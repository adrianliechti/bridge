(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();var m3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Lx={exports:{}},Wd={};var g3;function GF(){if(g3)return Wd;g3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,r,i){var a=null;if(i!==void 0&&(a=""+i),r.key!==void 0&&(a=""+r.key),"key"in r){i={};for(var l in r)l!=="key"&&(i[l]=r[l])}else i=r;return r=i.ref,{$$typeof:t,type:s,key:a,ref:r!==void 0?r:null,props:i}}return Wd.Fragment=e,Wd.jsx=n,Wd.jsxs=n,Wd}var y3;function YF(){return y3||(y3=1,Lx.exports=GF()),Lx.exports}var f=YF(),Px={exports:{}},St={};var v3;function ZF(){if(v3)return St;v3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),g=Symbol.iterator;function y(L){return L===null||typeof L!="object"?null:(L=g&&L[g]||L["@@iterator"],typeof L=="function"?L:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,w={};function k(L,V,T){this.props=L,this.context=V,this.refs=w,this.updater=T||b}k.prototype.isReactComponent={},k.prototype.setState=function(L,V){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,V,"setState")},k.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function C(){}C.prototype=k.prototype;function E(L,V,T){this.props=L,this.context=V,this.refs=w,this.updater=T||b}var A=E.prototype=new C;A.constructor=E,_(A,k.prototype),A.isPureReactComponent=!0;var R=Array.isArray;function N(){}var M={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function W(L,V,T){var Q=T.ref;return{$$typeof:t,type:L,key:V,ref:Q!==void 0?Q:null,props:T}}function P(L,V){return W(L.type,V,L.props)}function G(L){return typeof L=="object"&&L!==null&&L.$$typeof===t}function $(L){var V={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(T){return V[T]})}var U=/\/+/g;function Z(L,V){return typeof L=="object"&&L!==null&&L.key!=null?$(""+L.key):V.toString(36)}function K(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(N,N):(L.status="pending",L.then(function(V){L.status==="pending"&&(L.status="fulfilled",L.value=V)},function(V){L.status==="pending"&&(L.status="rejected",L.reason=V)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function B(L,V,T,Q,te){var X=typeof L;(X==="undefined"||X==="boolean")&&(L=null);var oe=!1;if(L===null)oe=!0;else switch(X){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(L.$$typeof){case t:case e:oe=!0;break;case m:return oe=L._init,B(oe(L._payload),V,T,Q,te)}}if(oe)return te=te(L),oe=Q===""?"."+Z(L,0):Q,R(te)?(T="",oe!=null&&(T=oe.replace(U,"$&/")+"/"),B(te,V,T,"",function(Xe){return Xe})):te!=null&&(G(te)&&(te=P(te,T+(te.key==null||L&&L.key===te.key?"":(""+te.key).replace(U,"$&/")+"/")+oe)),V.push(te)),1;oe=0;var xe=Q===""?".":Q+":";if(R(L))for(var Se=0;Se<L.length;Se++)Q=L[Se],X=xe+Z(Q,Se),oe+=B(Q,V,T,X,te);else if(Se=y(L),typeof Se=="function")for(L=Se.call(L),Se=0;!(Q=L.next()).done;)Q=Q.value,X=xe+Z(Q,Se++),oe+=B(Q,V,T,X,te);else if(X==="object"){if(typeof L.then=="function")return B(K(L),V,T,Q,te);throw V=String(L),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return oe}function J(L,V,T){if(L==null)return L;var Q=[],te=0;return B(L,Q,"","",function(X){return V.call(T,X,te++)}),Q}function Y(L){if(L._status===-1){var V=L._result;V=V(),V.then(function(T){(L._status===0||L._status===-1)&&(L._status=1,L._result=T)},function(T){(L._status===0||L._status===-1)&&(L._status=2,L._result=T)}),L._status===-1&&(L._status=0,L._result=V)}if(L._status===1)return L._result.default;throw L._result}var z=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},O={map:J,forEach:function(L,V,T){J(L,function(){V.apply(this,arguments)},T)},count:function(L){var V=0;return J(L,function(){V++}),V},toArray:function(L){return J(L,function(V){return V})||[]},only:function(L){if(!G(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return St.Activity=p,St.Children=O,St.Component=k,St.Fragment=n,St.Profiler=r,St.PureComponent=E,St.StrictMode=s,St.Suspense=u,St.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,St.__COMPILER_RUNTIME={__proto__:null,c:function(L){return M.H.useMemoCache(L)}},St.cache=function(L){return function(){return L.apply(null,arguments)}},St.cacheSignal=function(){return null},St.cloneElement=function(L,V,T){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var Q=_({},L.props),te=L.key;if(V!=null)for(X in V.key!==void 0&&(te=""+V.key),V)!I.call(V,X)||X==="key"||X==="__self"||X==="__source"||X==="ref"&&V.ref===void 0||(Q[X]=V[X]);var X=arguments.length-2;if(X===1)Q.children=T;else if(1<X){for(var oe=Array(X),xe=0;xe<X;xe++)oe[xe]=arguments[xe+2];Q.children=oe}return W(L.type,te,Q)},St.createContext=function(L){return L={$$typeof:a,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:i,_context:L},L},St.createElement=function(L,V,T){var Q,te={},X=null;if(V!=null)for(Q in V.key!==void 0&&(X=""+V.key),V)I.call(V,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(te[Q]=V[Q]);var oe=arguments.length-2;if(oe===1)te.children=T;else if(1<oe){for(var xe=Array(oe),Se=0;Se<oe;Se++)xe[Se]=arguments[Se+2];te.children=xe}if(L&&L.defaultProps)for(Q in oe=L.defaultProps,oe)te[Q]===void 0&&(te[Q]=oe[Q]);return W(L,X,te)},St.createRef=function(){return{current:null}},St.forwardRef=function(L){return{$$typeof:l,render:L}},St.isValidElement=G,St.lazy=function(L){return{$$typeof:m,_payload:{_status:-1,_result:L},_init:Y}},St.memo=function(L,V){return{$$typeof:h,type:L,compare:V===void 0?null:V}},St.startTransition=function(L){var V=M.T,T={};M.T=T;try{var Q=L(),te=M.S;te!==null&&te(T,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(N,z)}catch(X){z(X)}finally{V!==null&&T.types!==null&&(V.types=T.types),M.T=V}},St.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},St.use=function(L){return M.H.use(L)},St.useActionState=function(L,V,T){return M.H.useActionState(L,V,T)},St.useCallback=function(L,V){return M.H.useCallback(L,V)},St.useContext=function(L){return M.H.useContext(L)},St.useDebugValue=function(){},St.useDeferredValue=function(L,V){return M.H.useDeferredValue(L,V)},St.useEffect=function(L,V){return M.H.useEffect(L,V)},St.useEffectEvent=function(L){return M.H.useEffectEvent(L)},St.useId=function(){return M.H.useId()},St.useImperativeHandle=function(L,V,T){return M.H.useImperativeHandle(L,V,T)},St.useInsertionEffect=function(L,V){return M.H.useInsertionEffect(L,V)},St.useLayoutEffect=function(L,V){return M.H.useLayoutEffect(L,V)},St.useMemo=function(L,V){return M.H.useMemo(L,V)},St.useOptimistic=function(L,V){return M.H.useOptimistic(L,V)},St.useReducer=function(L,V,T){return M.H.useReducer(L,V,T)},St.useRef=function(L){return M.H.useRef(L)},St.useState=function(L){return M.H.useState(L)},St.useSyncExternalStore=function(L,V,T){return M.H.useSyncExternalStore(L,V,T)},St.useTransition=function(){return M.H.useTransition()},St.version="19.2.3",St}var b3;function Th(){return b3||(b3=1,Px.exports=ZF()),Px.exports}var F=Th();const Is=Vv(F);var Bx={exports:{}},Gd={},$x={exports:{}},zx={};var _3;function JF(){return _3||(_3=1,(function(t){function e(B,J){var Y=B.length;B.push(J);e:for(;0<Y;){var z=Y-1>>>1,O=B[z];if(0<r(O,J))B[z]=J,B[Y]=O,Y=z;else break e}}function n(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var J=B[0],Y=B.pop();if(Y!==J){B[0]=Y;e:for(var z=0,O=B.length,L=O>>>1;z<L;){var V=2*(z+1)-1,T=B[V],Q=V+1,te=B[Q];if(0>r(T,Y))Q<O&&0>r(te,T)?(B[z]=te,B[Q]=Y,z=Q):(B[z]=T,B[V]=Y,z=V);else if(Q<O&&0>r(te,Y))B[z]=te,B[Q]=Y,z=Q;else break e}}return J}function r(B,J){var Y=B.sortIndex-J.sortIndex;return Y!==0?Y:B.id-J.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],h=[],m=1,p=null,g=3,y=!1,b=!1,_=!1,w=!1,k=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function A(B){for(var J=n(h);J!==null;){if(J.callback===null)s(h);else if(J.startTime<=B)s(h),J.sortIndex=J.expirationTime,e(u,J);else break;J=n(h)}}function R(B){if(_=!1,A(B),!b)if(n(u)!==null)b=!0,N||(N=!0,$());else{var J=n(h);J!==null&&K(R,J.startTime-B)}}var N=!1,M=-1,I=5,W=-1;function P(){return w?!0:!(t.unstable_now()-W<I)}function G(){if(w=!1,N){var B=t.unstable_now();W=B;var J=!0;try{e:{b=!1,_&&(_=!1,C(M),M=-1),y=!0;var Y=g;try{t:{for(A(B),p=n(u);p!==null&&!(p.expirationTime>B&&P());){var z=p.callback;if(typeof z=="function"){p.callback=null,g=p.priorityLevel;var O=z(p.expirationTime<=B);if(B=t.unstable_now(),typeof O=="function"){p.callback=O,A(B),J=!0;break t}p===n(u)&&s(u),A(B)}else s(u);p=n(u)}if(p!==null)J=!0;else{var L=n(h);L!==null&&K(R,L.startTime-B),J=!1}}break e}finally{p=null,g=Y,y=!1}J=void 0}}finally{J?$():N=!1}}}var $;if(typeof E=="function")$=function(){E(G)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,Z=U.port2;U.port1.onmessage=G,$=function(){Z.postMessage(null)}}else $=function(){k(G,0)};function K(B,J){M=k(function(){B(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var J=3;break;default:J=g}var Y=g;g=J;try{return B()}finally{g=Y}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(B,J){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Y=g;g=B;try{return J()}finally{g=Y}},t.unstable_scheduleCallback=function(B,J,Y){var z=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?z+Y:z):Y=z,B){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=Y+O,B={id:m++,callback:J,priorityLevel:B,startTime:Y,expirationTime:O,sortIndex:-1},Y>z?(B.sortIndex=Y,e(h,B),n(u)===null&&B===n(h)&&(_?(C(M),M=-1):_=!0,K(R,Y-z))):(B.sortIndex=O,e(u,B),b||y||(b=!0,N||(N=!0,$()))),B},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(B){var J=g;return function(){var Y=g;g=J;try{return B.apply(this,arguments)}finally{g=Y}}}})(zx)),zx}var x3;function XF(){return x3||(x3=1,$x.exports=JF()),$x.exports}var Fx={exports:{}},As={};var w3;function QF(){if(w3)return As;w3=1;var t=Th();function e(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function i(u,h,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:p==null?null:""+p,children:u,containerInfo:h,implementation:m}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return As.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,As.createPortal=function(u,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return i(u,h,null,m)},As.flushSync=function(u){var h=a.T,m=s.p;try{if(a.T=null,s.p=2,u)return u()}finally{a.T=h,s.p=m,s.d.f()}},As.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(u,h))},As.prefetchDNS=function(u){typeof u=="string"&&s.d.D(u)},As.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var m=h.as,p=l(m,h.crossOrigin),g=typeof h.integrity=="string"?h.integrity:void 0,y=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?s.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:y}):m==="script"&&s.d.X(u,{crossOrigin:p,integrity:g,fetchPriority:y,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},As.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=l(h.as,h.crossOrigin);s.d.M(u,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(u)},As.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,p=l(m,h.crossOrigin);s.d.L(u,m,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},As.preloadModule=function(u,h){if(typeof u=="string")if(h){var m=l(h.as,h.crossOrigin);s.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(u)},As.requestFormReset=function(u){s.d.r(u)},As.unstable_batchedUpdates=function(u,h){return u(h)},As.useFormState=function(u,h,m){return a.H.useFormState(u,h,m)},As.useFormStatus=function(){return a.H.useHostTransitionStatus()},As.version="19.2.3",As}var S3;function p6(){if(S3)return Fx.exports;S3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Fx.exports=QF(),Fx.exports}var k3;function eU(){if(k3)return Gd;k3=1;var t=XF(),e=Th(),n=p6();function s(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)c+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function i(o){var c=o,d=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(d=c.return),o=c.return;while(o)}return c.tag===3?d:null}function a(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function l(o){if(o.tag===31){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function u(o){if(i(o)!==o)throw Error(s(188))}function h(o){var c=o.alternate;if(!c){if(c=i(o),c===null)throw Error(s(188));return c!==o?null:o}for(var d=o,v=c;;){var x=d.return;if(x===null)break;var S=x.alternate;if(S===null){if(v=x.return,v!==null){d=v;continue}break}if(x.child===S.child){for(S=x.child;S;){if(S===d)return u(x),o;if(S===v)return u(x),c;S=S.sibling}throw Error(s(188))}if(d.return!==v.return)d=x,v=S;else{for(var j=!1,H=x.child;H;){if(H===d){j=!0,d=x,v=S;break}if(H===v){j=!0,v=x,d=S;break}H=H.sibling}if(!j){for(H=S.child;H;){if(H===d){j=!0,d=S,v=x;break}if(H===v){j=!0,v=S,d=x;break}H=H.sibling}if(!j)throw Error(s(189))}}if(d.alternate!==v)throw Error(s(190))}if(d.tag!==3)throw Error(s(188));return d.stateNode.current===d?o:c}function m(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=m(o),c!==null)return c;o=o.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),E=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function $(o){return o===null||typeof o!="object"?null:(o=G&&o[G]||o["@@iterator"],typeof o=="function"?o:null)}var U=Symbol.for("react.client.reference");function Z(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===U?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case _:return"Fragment";case k:return"Profiler";case w:return"StrictMode";case R:return"Suspense";case N:return"SuspenseList";case W:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case b:return"Portal";case E:return o.displayName||"Context";case C:return(o._context.displayName||"Context")+".Consumer";case A:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case M:return c=o.displayName||null,c!==null?c:Z(o.type)||"Memo";case I:c=o._payload,o=o._init;try{return Z(o(c))}catch{}}return null}var K=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},z=[],O=-1;function L(o){return{current:o}}function V(o){0>O||(o.current=z[O],z[O]=null,O--)}function T(o,c){O++,z[O]=o.current,o.current=c}var Q=L(null),te=L(null),X=L(null),oe=L(null);function xe(o,c){switch(T(X,c),T(te,o),T(Q,null),c.nodeType){case 9:case 11:o=(o=c.documentElement)&&(o=o.namespaceURI)?B5(o):0;break;default:if(o=c.tagName,c=c.namespaceURI)c=B5(c),o=$5(c,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}V(Q),T(Q,o)}function Se(){V(Q),V(te),V(X)}function Xe(o){o.memoizedState!==null&&T(oe,o);var c=Q.current,d=$5(c,o.type);c!==d&&(T(te,o),T(Q,d))}function Ke(o){te.current===o&&(V(Q),V(te)),oe.current===o&&(V(oe),Hd._currentValue=Y)}var st,Le;function Ge(o){if(st===void 0)try{throw Error()}catch(d){var c=d.stack.trim().match(/\n( *(at )?)/);st=c&&c[1]||"",Le=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+st+o+Le}var ct=!1;function ut(o,c){if(!o||ct)return"";ct=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(c){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(pe){var de=pe}Reflect.construct(o,[],ye)}else{try{ye.call()}catch(pe){de=pe}o.call(ye.prototype)}}else{try{throw Error()}catch(pe){de=pe}(ye=o())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(pe){if(pe&&de&&typeof pe.stack=="string")return[pe.stack,de.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=v.DetermineComponentFrameRoot(),j=S[0],H=S[1];if(j&&H){var ee=j.split(`
`),ue=H.split(`
`);for(x=v=0;v<ee.length&&!ee[v].includes("DetermineComponentFrameRoot");)v++;for(;x<ue.length&&!ue[x].includes("DetermineComponentFrameRoot");)x++;if(v===ee.length||x===ue.length)for(v=ee.length-1,x=ue.length-1;1<=v&&0<=x&&ee[v]!==ue[x];)x--;for(;1<=v&&0<=x;v--,x--)if(ee[v]!==ue[x]){if(v!==1||x!==1)do if(v--,x--,0>x||ee[v]!==ue[x]){var me=`
`+ee[v].replace(" at new "," at ");return o.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",o.displayName)),me}while(1<=v&&0<=x);break}}}finally{ct=!1,Error.prepareStackTrace=d}return(d=o?o.displayName||o.name:"")?Ge(d):""}function Re(o,c){switch(o.tag){case 26:case 27:case 5:return Ge(o.type);case 16:return Ge("Lazy");case 13:return o.child!==c&&c!==null?Ge("Suspense Fallback"):Ge("Suspense");case 19:return Ge("SuspenseList");case 0:case 15:return ut(o.type,!1);case 11:return ut(o.type.render,!1);case 1:return ut(o.type,!0);case 31:return Ge("Activity");default:return""}}function mt(o){try{var c="",d=null;do c+=Re(o,d),d=o,o=o.return;while(o);return c}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}var pt=Object.prototype.hasOwnProperty,At=t.unstable_scheduleCallback,Me=t.unstable_cancelCallback,ze=t.unstable_shouldYield,De=t.unstable_requestPaint,Je=t.unstable_now,Ee=t.unstable_getCurrentPriorityLevel,ae=t.unstable_ImmediatePriority,be=t.unstable_UserBlockingPriority,Ye=t.unstable_NormalPriority,ft=t.unstable_LowPriority,Rt=t.unstable_IdlePriority,xn=t.log,re=t.unstable_setDisableYieldValue,le=null,fe=null;function ke(o){if(typeof xn=="function"&&re(o),fe&&typeof fe.setStrictMode=="function")try{fe.setStrictMode(le,o)}catch{}}var je=Math.clz32?Math.clz32:_t,Pt=Math.log,Dt=Math.LN2;function _t(o){return o>>>=0,o===0?32:31-(Pt(o)/Dt|0)|0}var Ie=256,$e=262144,Fe=4194304;function Ue(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function wt(o,c,d){var v=o.pendingLanes;if(v===0)return 0;var x=0,S=o.suspendedLanes,j=o.pingedLanes;o=o.warmLanes;var H=v&134217727;return H!==0?(v=H&~S,v!==0?x=Ue(v):(j&=H,j!==0?x=Ue(j):d||(d=H&~o,d!==0&&(x=Ue(d))))):(H=v&~S,H!==0?x=Ue(H):j!==0?x=Ue(j):d||(d=v&~o,d!==0&&(x=Ue(d)))),x===0?0:c!==0&&c!==x&&(c&S)===0&&(S=x&-x,d=c&-c,S>=d||S===32&&(d&4194048)!==0)?c:x}function Lt(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function Zt(o,c){switch(o){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function On(){var o=Fe;return Fe<<=1,(Fe&62914560)===0&&(Fe=4194304),o}function gr(o){for(var c=[],d=0;31>d;d++)c.push(o);return c}function Hr(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Ve(o,c,d,v,x,S){var j=o.pendingLanes;o.pendingLanes=d,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=d,o.entangledLanes&=d,o.errorRecoveryDisabledLanes&=d,o.shellSuspendCounter=0;var H=o.entanglements,ee=o.expirationTimes,ue=o.hiddenUpdates;for(d=j&~d;0<d;){var me=31-je(d),ye=1<<me;H[me]=0,ee[me]=-1;var de=ue[me];if(de!==null)for(ue[me]=null,me=0;me<de.length;me++){var pe=de[me];pe!==null&&(pe.lane&=-536870913)}d&=~ye}v!==0&&Qe(o,v,0),S!==0&&x===0&&o.tag!==0&&(o.suspendedLanes|=S&~(j&~c))}function Qe(o,c,d){o.pendingLanes|=c,o.suspendedLanes&=~c;var v=31-je(c);o.entangledLanes|=c,o.entanglements[v]=o.entanglements[v]|1073741824|d&261930}function at(o,c){var d=o.entangledLanes|=c;for(o=o.entanglements;d;){var v=31-je(d),x=1<<v;x&c|o[v]&c&&(o[v]|=c),d&=~x}}function nn(o,c){var d=c&-c;return d=(d&42)!==0?1:Vr(d),(d&(o.suspendedLanes|c))!==0?0:d}function Vr(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Di(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function qr(){var o=J.p;return o!==0?o:(o=window.event,o===void 0?32:l3(o.type))}function ga(o,c){var d=J.p;try{return J.p=o,c()}finally{J.p=d}}var yr=Math.random().toString(36).slice(2),ln="__reactFiber$"+yr,Xt="__reactProps$"+yr,Fc="__reactContainer$"+yr,E1="__reactEvents$"+yr,P7="__reactListeners$"+yr,B7="__reactHandles$"+yr,CA="__reactResources$"+yr,rd="__reactMarker$"+yr;function A1(o){delete o[ln],delete o[Xt],delete o[E1],delete o[P7],delete o[B7]}function Uc(o){var c=o[ln];if(c)return c;for(var d=o.parentNode;d;){if(c=d[Fc]||d[ln]){if(d=c.alternate,c.child!==null||d!==null&&d.child!==null)for(o=K5(o);o!==null;){if(d=o[ln])return d;o=K5(o)}return c}o=d,d=o.parentNode}return null}function Hc(o){if(o=o[ln]||o[Fc]){var c=o.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return o}return null}function id(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(s(33))}function Vc(o){var c=o[CA];return c||(c=o[CA]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function rs(o){o[rd]=!0}var NA=new Set,EA={};function bl(o,c){qc(o,c),qc(o+"Capture",c)}function qc(o,c){for(EA[o]=c,o=0;o<c.length;o++)NA.add(c[o])}var $7=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),AA={},RA={};function z7(o){return pt.call(RA,o)?!0:pt.call(AA,o)?!1:$7.test(o)?RA[o]=!0:(AA[o]=!0,!1)}function Um(o,c,d){if(z7(c))if(d===null)o.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var v=c.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+d)}}function Hm(o,c,d){if(d===null)o.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+d)}}function ya(o,c,d,v){if(v===null)o.removeAttribute(d);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(d);return}o.setAttributeNS(c,d,""+v)}}function Kr(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function TA(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function F7(o,c,d){var v=Object.getOwnPropertyDescriptor(o.constructor.prototype,c);if(!o.hasOwnProperty(c)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var x=v.get,S=v.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return x.call(this)},set:function(j){d=""+j,S.call(this,j)}}),Object.defineProperty(o,c,{enumerable:v.enumerable}),{getValue:function(){return d},setValue:function(j){d=""+j},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function R1(o){if(!o._valueTracker){var c=TA(o)?"checked":"value";o._valueTracker=F7(o,c,""+o[c])}}function jA(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var d=c.getValue(),v="";return o&&(v=TA(o)?o.checked?"true":"false":o.value),o=v,o!==d?(c.setValue(o),!0):!1}function Vm(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var U7=/[\n"\\]/g;function Wr(o){return o.replace(U7,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function T1(o,c,d,v,x,S,j,H){o.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?o.type=j:o.removeAttribute("type"),c!=null?j==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+Kr(c)):o.value!==""+Kr(c)&&(o.value=""+Kr(c)):j!=="submit"&&j!=="reset"||o.removeAttribute("value"),c!=null?j1(o,j,Kr(c)):d!=null?j1(o,j,Kr(d)):v!=null&&o.removeAttribute("value"),x==null&&S!=null&&(o.defaultChecked=!!S),x!=null&&(o.checked=x&&typeof x!="function"&&typeof x!="symbol"),H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?o.name=""+Kr(H):o.removeAttribute("name")}function OA(o,c,d,v,x,S,j,H){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(o.type=S),c!=null||d!=null){if(!(S!=="submit"&&S!=="reset"||c!=null)){R1(o);return}d=d!=null?""+Kr(d):"",c=c!=null?""+Kr(c):d,H||c===o.value||(o.value=c),o.defaultValue=c}v=v??x,v=typeof v!="function"&&typeof v!="symbol"&&!!v,o.checked=H?o.checked:!!v,o.defaultChecked=!!v,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(o.name=j),R1(o)}function j1(o,c,d){c==="number"&&Vm(o.ownerDocument)===o||o.defaultValue===""+d||(o.defaultValue=""+d)}function Kc(o,c,d,v){if(o=o.options,c){c={};for(var x=0;x<d.length;x++)c["$"+d[x]]=!0;for(d=0;d<o.length;d++)x=c.hasOwnProperty("$"+o[d].value),o[d].selected!==x&&(o[d].selected=x),x&&v&&(o[d].defaultSelected=!0)}else{for(d=""+Kr(d),c=null,x=0;x<o.length;x++){if(o[x].value===d){o[x].selected=!0,v&&(o[x].defaultSelected=!0);return}c!==null||o[x].disabled||(c=o[x])}c!==null&&(c.selected=!0)}}function MA(o,c,d){if(c!=null&&(c=""+Kr(c),c!==o.value&&(o.value=c),d==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=d!=null?""+Kr(d):""}function IA(o,c,d,v){if(c==null){if(v!=null){if(d!=null)throw Error(s(92));if(K(v)){if(1<v.length)throw Error(s(93));v=v[0]}d=v}d==null&&(d=""),c=d}d=Kr(c),o.defaultValue=d,v=o.textContent,v===d&&v!==""&&v!==null&&(o.value=v),R1(o)}function Wc(o,c){if(c){var d=o.firstChild;if(d&&d===o.lastChild&&d.nodeType===3){d.nodeValue=c;return}}o.textContent=c}var H7=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function DA(o,c,d){var v=c.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?v?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":v?o.setProperty(c,d):typeof d!="number"||d===0||H7.has(c)?c==="float"?o.cssFloat=d:o[c]=(""+d).trim():o[c]=d+"px"}function LA(o,c,d){if(c!=null&&typeof c!="object")throw Error(s(62));if(o=o.style,d!=null){for(var v in d)!d.hasOwnProperty(v)||c!=null&&c.hasOwnProperty(v)||(v.indexOf("--")===0?o.setProperty(v,""):v==="float"?o.cssFloat="":o[v]="");for(var x in c)v=c[x],c.hasOwnProperty(x)&&d[x]!==v&&DA(o,x,v)}else for(var S in c)c.hasOwnProperty(S)&&DA(o,S,c[S])}function O1(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var V7=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),q7=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qm(o){return q7.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function va(){}var M1=null;function I1(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Gc=null,Yc=null;function PA(o){var c=Hc(o);if(c&&(o=c.stateNode)){var d=o[Xt]||null;e:switch(o=c.stateNode,c.type){case"input":if(T1(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),c=d.name,d.type==="radio"&&c!=null){for(d=o;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Wr(""+c)+'"][type="radio"]'),c=0;c<d.length;c++){var v=d[c];if(v!==o&&v.form===o.form){var x=v[Xt]||null;if(!x)throw Error(s(90));T1(v,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(c=0;c<d.length;c++)v=d[c],v.form===o.form&&jA(v)}break e;case"textarea":MA(o,d.value,d.defaultValue);break e;case"select":c=d.value,c!=null&&Kc(o,!!d.multiple,c,!1)}}}var D1=!1;function BA(o,c,d){if(D1)return o(c,d);D1=!0;try{var v=o(c);return v}finally{if(D1=!1,(Gc!==null||Yc!==null)&&(Og(),Gc&&(c=Gc,o=Yc,Yc=Gc=null,PA(c),o)))for(c=0;c<o.length;c++)PA(o[c])}}function ad(o,c){var d=o.stateNode;if(d===null)return null;var v=d[Xt]||null;if(v===null)return null;d=v[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(o=o.type,v=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!v;break e;default:o=!1}if(o)return null;if(d&&typeof d!="function")throw Error(s(231,c,typeof d));return d}var ba=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),L1=!1;if(ba)try{var od={};Object.defineProperty(od,"passive",{get:function(){L1=!0}}),window.addEventListener("test",od,od),window.removeEventListener("test",od,od)}catch{L1=!1}var uo=null,P1=null,Km=null;function $A(){if(Km)return Km;var o,c=P1,d=c.length,v,x="value"in uo?uo.value:uo.textContent,S=x.length;for(o=0;o<d&&c[o]===x[o];o++);var j=d-o;for(v=1;v<=j&&c[d-v]===x[S-v];v++);return Km=x.slice(o,1<v?1-v:void 0)}function Wm(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function Gm(){return!0}function zA(){return!1}function Xs(o){function c(d,v,x,S,j){this._reactName=d,this._targetInst=x,this.type=v,this.nativeEvent=S,this.target=j,this.currentTarget=null;for(var H in o)o.hasOwnProperty(H)&&(d=o[H],this[H]=d?d(S):S[H]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Gm:zA,this.isPropagationStopped=zA,this}return p(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Gm)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Gm)},persist:function(){},isPersistent:Gm}),c}var _l={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ym=Xs(_l),ld=p({},_l,{view:0,detail:0}),K7=Xs(ld),B1,$1,cd,Zm=p({},ld,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:F1,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==cd&&(cd&&o.type==="mousemove"?(B1=o.screenX-cd.screenX,$1=o.screenY-cd.screenY):$1=B1=0,cd=o),B1)},movementY:function(o){return"movementY"in o?o.movementY:$1}}),FA=Xs(Zm),W7=p({},Zm,{dataTransfer:0}),G7=Xs(W7),Y7=p({},ld,{relatedTarget:0}),z1=Xs(Y7),Z7=p({},_l,{animationName:0,elapsedTime:0,pseudoElement:0}),J7=Xs(Z7),X7=p({},_l,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Q7=Xs(X7),e9=p({},_l,{data:0}),UA=Xs(e9),t9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},n9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},s9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function r9(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=s9[o])?!!c[o]:!1}function F1(){return r9}var i9=p({},ld,{key:function(o){if(o.key){var c=t9[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=Wm(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?n9[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:F1,charCode:function(o){return o.type==="keypress"?Wm(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Wm(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),a9=Xs(i9),o9=p({},Zm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),HA=Xs(o9),l9=p({},ld,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:F1}),c9=Xs(l9),u9=p({},_l,{propertyName:0,elapsedTime:0,pseudoElement:0}),h9=Xs(u9),d9=p({},Zm,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),f9=Xs(d9),p9=p({},_l,{newState:0,oldState:0}),m9=Xs(p9),g9=[9,13,27,32],U1=ba&&"CompositionEvent"in window,ud=null;ba&&"documentMode"in document&&(ud=document.documentMode);var y9=ba&&"TextEvent"in window&&!ud,VA=ba&&(!U1||ud&&8<ud&&11>=ud),qA=" ",KA=!1;function WA(o,c){switch(o){case"keyup":return g9.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function GA(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Zc=!1;function v9(o,c){switch(o){case"compositionend":return GA(c);case"keypress":return c.which!==32?null:(KA=!0,qA);case"textInput":return o=c.data,o===qA&&KA?null:o;default:return null}}function b9(o,c){if(Zc)return o==="compositionend"||!U1&&WA(o,c)?(o=$A(),Km=P1=uo=null,Zc=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return VA&&c.locale!=="ko"?null:c.data;default:return null}}var _9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function YA(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!_9[o.type]:c==="textarea"}function ZA(o,c,d,v){Gc?Yc?Yc.push(v):Yc=[v]:Gc=v,c=$g(c,"onChange"),0<c.length&&(d=new Ym("onChange","change",null,d,v),o.push({event:d,listeners:c}))}var hd=null,dd=null;function x9(o){O5(o,0)}function Jm(o){var c=id(o);if(jA(c))return o}function JA(o,c){if(o==="change")return c}var XA=!1;if(ba){var H1;if(ba){var V1="oninput"in document;if(!V1){var QA=document.createElement("div");QA.setAttribute("oninput","return;"),V1=typeof QA.oninput=="function"}H1=V1}else H1=!1;XA=H1&&(!document.documentMode||9<document.documentMode)}function e4(){hd&&(hd.detachEvent("onpropertychange",t4),dd=hd=null)}function t4(o){if(o.propertyName==="value"&&Jm(dd)){var c=[];ZA(c,dd,o,I1(o)),BA(x9,c)}}function w9(o,c,d){o==="focusin"?(e4(),hd=c,dd=d,hd.attachEvent("onpropertychange",t4)):o==="focusout"&&e4()}function S9(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Jm(dd)}function k9(o,c){if(o==="click")return Jm(c)}function C9(o,c){if(o==="input"||o==="change")return Jm(c)}function N9(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var vr=typeof Object.is=="function"?Object.is:N9;function fd(o,c){if(vr(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var d=Object.keys(o),v=Object.keys(c);if(d.length!==v.length)return!1;for(v=0;v<d.length;v++){var x=d[v];if(!pt.call(c,x)||!vr(o[x],c[x]))return!1}return!0}function n4(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function s4(o,c){var d=n4(o);o=0;for(var v;d;){if(d.nodeType===3){if(v=o+d.textContent.length,o<=c&&v>=c)return{node:d,offset:c-o};o=v}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=n4(d)}}function r4(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?r4(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function i4(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=Vm(o.document);c instanceof o.HTMLIFrameElement;){try{var d=typeof c.contentWindow.location.href=="string"}catch{d=!1}if(d)o=c.contentWindow;else break;c=Vm(o.document)}return c}function q1(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}var E9=ba&&"documentMode"in document&&11>=document.documentMode,Jc=null,K1=null,pd=null,W1=!1;function a4(o,c,d){var v=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;W1||Jc==null||Jc!==Vm(v)||(v=Jc,"selectionStart"in v&&q1(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),pd&&fd(pd,v)||(pd=v,v=$g(K1,"onSelect"),0<v.length&&(c=new Ym("onSelect","select",null,c,d),o.push({event:c,listeners:v}),c.target=Jc)))}function xl(o,c){var d={};return d[o.toLowerCase()]=c.toLowerCase(),d["Webkit"+o]="webkit"+c,d["Moz"+o]="moz"+c,d}var Xc={animationend:xl("Animation","AnimationEnd"),animationiteration:xl("Animation","AnimationIteration"),animationstart:xl("Animation","AnimationStart"),transitionrun:xl("Transition","TransitionRun"),transitionstart:xl("Transition","TransitionStart"),transitioncancel:xl("Transition","TransitionCancel"),transitionend:xl("Transition","TransitionEnd")},G1={},o4={};ba&&(o4=document.createElement("div").style,"AnimationEvent"in window||(delete Xc.animationend.animation,delete Xc.animationiteration.animation,delete Xc.animationstart.animation),"TransitionEvent"in window||delete Xc.transitionend.transition);function wl(o){if(G1[o])return G1[o];if(!Xc[o])return o;var c=Xc[o],d;for(d in c)if(c.hasOwnProperty(d)&&d in o4)return G1[o]=c[d];return o}var l4=wl("animationend"),c4=wl("animationiteration"),u4=wl("animationstart"),A9=wl("transitionrun"),R9=wl("transitionstart"),T9=wl("transitioncancel"),h4=wl("transitionend"),d4=new Map,Y1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Y1.push("scrollEnd");function bi(o,c){d4.set(o,c),bl(c,[o])}var Xm=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Gr=[],Qc=0,Z1=0;function Qm(){for(var o=Qc,c=Z1=Qc=0;c<o;){var d=Gr[c];Gr[c++]=null;var v=Gr[c];Gr[c++]=null;var x=Gr[c];Gr[c++]=null;var S=Gr[c];if(Gr[c++]=null,v!==null&&x!==null){var j=v.pending;j===null?x.next=x:(x.next=j.next,j.next=x),v.pending=x}S!==0&&f4(d,x,S)}}function eg(o,c,d,v){Gr[Qc++]=o,Gr[Qc++]=c,Gr[Qc++]=d,Gr[Qc++]=v,Z1|=v,o.lanes|=v,o=o.alternate,o!==null&&(o.lanes|=v)}function J1(o,c,d,v){return eg(o,c,d,v),tg(o)}function Sl(o,c){return eg(o,null,null,c),tg(o)}function f4(o,c,d){o.lanes|=d;var v=o.alternate;v!==null&&(v.lanes|=d);for(var x=!1,S=o.return;S!==null;)S.childLanes|=d,v=S.alternate,v!==null&&(v.childLanes|=d),S.tag===22&&(o=S.stateNode,o===null||o._visibility&1||(x=!0)),o=S,S=S.return;return o.tag===3?(S=o.stateNode,x&&c!==null&&(x=31-je(d),o=S.hiddenUpdates,v=o[x],v===null?o[x]=[c]:v.push(c),c.lane=d|536870912),S):null}function tg(o){if(50<Ld)throw Ld=0,ax=null,Error(s(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var eu={};function j9(o,c,d,v){this.tag=o,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function br(o,c,d,v){return new j9(o,c,d,v)}function X1(o){return o=o.prototype,!(!o||!o.isReactComponent)}function _a(o,c){var d=o.alternate;return d===null?(d=br(o.tag,c,o.key,o.mode),d.elementType=o.elementType,d.type=o.type,d.stateNode=o.stateNode,d.alternate=o,o.alternate=d):(d.pendingProps=c,d.type=o.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=o.flags&65011712,d.childLanes=o.childLanes,d.lanes=o.lanes,d.child=o.child,d.memoizedProps=o.memoizedProps,d.memoizedState=o.memoizedState,d.updateQueue=o.updateQueue,c=o.dependencies,d.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},d.sibling=o.sibling,d.index=o.index,d.ref=o.ref,d.refCleanup=o.refCleanup,d}function p4(o,c){o.flags&=65011714;var d=o.alternate;return d===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=d.childLanes,o.lanes=d.lanes,o.child=d.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=d.memoizedProps,o.memoizedState=d.memoizedState,o.updateQueue=d.updateQueue,o.type=d.type,c=d.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function ng(o,c,d,v,x,S){var j=0;if(v=o,typeof o=="function")X1(o)&&(j=1);else if(typeof o=="string")j=LF(o,d,Q.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case W:return o=br(31,d,c,x),o.elementType=W,o.lanes=S,o;case _:return kl(d.children,x,S,c);case w:j=8,x|=24;break;case k:return o=br(12,d,c,x|2),o.elementType=k,o.lanes=S,o;case R:return o=br(13,d,c,x),o.elementType=R,o.lanes=S,o;case N:return o=br(19,d,c,x),o.elementType=N,o.lanes=S,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case E:j=10;break e;case C:j=9;break e;case A:j=11;break e;case M:j=14;break e;case I:j=16,v=null;break e}j=29,d=Error(s(130,o===null?"null":typeof o,"")),v=null}return c=br(j,d,c,x),c.elementType=o,c.type=v,c.lanes=S,c}function kl(o,c,d,v){return o=br(7,o,v,c),o.lanes=d,o}function Q1(o,c,d){return o=br(6,o,null,c),o.lanes=d,o}function m4(o){var c=br(18,null,null,0);return c.stateNode=o,c}function e_(o,c,d){return c=br(4,o.children!==null?o.children:[],o.key,c),c.lanes=d,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}var g4=new WeakMap;function Yr(o,c){if(typeof o=="object"&&o!==null){var d=g4.get(o);return d!==void 0?d:(c={value:o,source:c,stack:mt(c)},g4.set(o,c),c)}return{value:o,source:c,stack:mt(c)}}var tu=[],nu=0,sg=null,md=0,Zr=[],Jr=0,ho=null,Li=1,Pi="";function xa(o,c){tu[nu++]=md,tu[nu++]=sg,sg=o,md=c}function y4(o,c,d){Zr[Jr++]=Li,Zr[Jr++]=Pi,Zr[Jr++]=ho,ho=o;var v=Li;o=Pi;var x=32-je(v)-1;v&=~(1<<x),d+=1;var S=32-je(c)+x;if(30<S){var j=x-x%5;S=(v&(1<<j)-1).toString(32),v>>=j,x-=j,Li=1<<32-je(c)+x|d<<x|v,Pi=S+o}else Li=1<<S|d<<x|v,Pi=o}function t_(o){o.return!==null&&(xa(o,1),y4(o,1,0))}function n_(o){for(;o===sg;)sg=tu[--nu],tu[nu]=null,md=tu[--nu],tu[nu]=null;for(;o===ho;)ho=Zr[--Jr],Zr[Jr]=null,Pi=Zr[--Jr],Zr[Jr]=null,Li=Zr[--Jr],Zr[Jr]=null}function v4(o,c){Zr[Jr++]=Li,Zr[Jr++]=Pi,Zr[Jr++]=ho,Li=c.id,Pi=c.overflow,ho=o}var ds=null,fn=null,Ht=!1,fo=null,Xr=!1,s_=Error(s(519));function po(o){var c=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gd(Yr(c,o)),s_}function b4(o){var c=o.stateNode,d=o.type,v=o.memoizedProps;switch(c[ln]=o,c[Xt]=v,d){case"dialog":$t("cancel",c),$t("close",c);break;case"iframe":case"object":case"embed":$t("load",c);break;case"video":case"audio":for(d=0;d<Bd.length;d++)$t(Bd[d],c);break;case"source":$t("error",c);break;case"img":case"image":case"link":$t("error",c),$t("load",c);break;case"details":$t("toggle",c);break;case"input":$t("invalid",c),OA(c,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0);break;case"select":$t("invalid",c);break;case"textarea":$t("invalid",c),IA(c,v.value,v.defaultValue,v.children)}d=v.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||c.textContent===""+d||v.suppressHydrationWarning===!0||L5(c.textContent,d)?(v.popover!=null&&($t("beforetoggle",c),$t("toggle",c)),v.onScroll!=null&&$t("scroll",c),v.onScrollEnd!=null&&$t("scrollend",c),v.onClick!=null&&(c.onclick=va),c=!0):c=!1,c||po(o,!0)}function _4(o){for(ds=o.return;ds;)switch(ds.tag){case 5:case 31:case 13:Xr=!1;return;case 27:case 3:Xr=!0;return;default:ds=ds.return}}function su(o){if(o!==ds)return!1;if(!Ht)return _4(o),Ht=!0,!1;var c=o.tag,d;if((d=c!==3&&c!==27)&&((d=c===5)&&(d=o.type,d=!(d!=="form"&&d!=="button")||xx(o.type,o.memoizedProps)),d=!d),d&&fn&&po(o),_4(o),c===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(s(317));fn=q5(o)}else if(c===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(s(317));fn=q5(o)}else c===27?(c=fn,Ao(o.type)?(o=Nx,Nx=null,fn=o):fn=c):fn=ds?ei(o.stateNode.nextSibling):null;return!0}function Cl(){fn=ds=null,Ht=!1}function r_(){var o=fo;return o!==null&&(nr===null?nr=o:nr.push.apply(nr,o),fo=null),o}function gd(o){fo===null?fo=[o]:fo.push(o)}var i_=L(null),Nl=null,wa=null;function mo(o,c,d){T(i_,c._currentValue),c._currentValue=d}function Sa(o){o._currentValue=i_.current,V(i_)}function a_(o,c,d){for(;o!==null;){var v=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,v!==null&&(v.childLanes|=c)):v!==null&&(v.childLanes&c)!==c&&(v.childLanes|=c),o===d)break;o=o.return}}function o_(o,c,d,v){var x=o.child;for(x!==null&&(x.return=o);x!==null;){var S=x.dependencies;if(S!==null){var j=x.child;S=S.firstContext;e:for(;S!==null;){var H=S;S=x;for(var ee=0;ee<c.length;ee++)if(H.context===c[ee]){S.lanes|=d,H=S.alternate,H!==null&&(H.lanes|=d),a_(S.return,d,o),v||(j=null);break e}S=H.next}}else if(x.tag===18){if(j=x.return,j===null)throw Error(s(341));j.lanes|=d,S=j.alternate,S!==null&&(S.lanes|=d),a_(j,d,o),j=null}else j=x.child;if(j!==null)j.return=x;else for(j=x;j!==null;){if(j===o){j=null;break}if(x=j.sibling,x!==null){x.return=j.return,j=x;break}j=j.return}x=j}}function ru(o,c,d,v){o=null;for(var x=c,S=!1;x!==null;){if(!S){if((x.flags&524288)!==0)S=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var j=x.alternate;if(j===null)throw Error(s(387));if(j=j.memoizedProps,j!==null){var H=x.type;vr(x.pendingProps.value,j.value)||(o!==null?o.push(H):o=[H])}}else if(x===oe.current){if(j=x.alternate,j===null)throw Error(s(387));j.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(o!==null?o.push(Hd):o=[Hd])}x=x.return}o!==null&&o_(c,o,d,v),c.flags|=262144}function rg(o){for(o=o.firstContext;o!==null;){if(!vr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function El(o){Nl=o,wa=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function fs(o){return x4(Nl,o)}function ig(o,c){return Nl===null&&El(o),x4(o,c)}function x4(o,c){var d=c._currentValue;if(c={context:c,memoizedValue:d,next:null},wa===null){if(o===null)throw Error(s(308));wa=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else wa=wa.next=c;return d}var O9=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(d,v){o.push(v)}};this.abort=function(){c.aborted=!0,o.forEach(function(d){return d()})}},M9=t.unstable_scheduleCallback,I9=t.unstable_NormalPriority,$n={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function l_(){return{controller:new O9,data:new Map,refCount:0}}function yd(o){o.refCount--,o.refCount===0&&M9(I9,function(){o.controller.abort()})}var vd=null,c_=0,iu=0,au=null;function D9(o,c){if(vd===null){var d=vd=[];c_=0,iu=dx(),au={status:"pending",value:void 0,then:function(v){d.push(v)}}}return c_++,c.then(w4,w4),c}function w4(){if(--c_===0&&vd!==null){au!==null&&(au.status="fulfilled");var o=vd;vd=null,iu=0,au=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function L9(o,c){var d=[],v={status:"pending",value:null,reason:null,then:function(x){d.push(x)}};return o.then(function(){v.status="fulfilled",v.value=c;for(var x=0;x<d.length;x++)(0,d[x])(c)},function(x){for(v.status="rejected",v.reason=x,x=0;x<d.length;x++)(0,d[x])(void 0)}),v}var S4=B.S;B.S=function(o,c){a5=Je(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&D9(o,c),S4!==null&&S4(o,c)};var Al=L(null);function u_(){var o=Al.current;return o!==null?o:cn.pooledCache}function ag(o,c){c===null?T(Al,Al.current):T(Al,c.pool)}function k4(){var o=u_();return o===null?null:{parent:$n._currentValue,pool:o}}var ou=Error(s(460)),h_=Error(s(474)),og=Error(s(542)),lg={then:function(){}};function C4(o){return o=o.status,o==="fulfilled"||o==="rejected"}function N4(o,c,d){switch(d=o[d],d===void 0?o.push(c):d!==c&&(c.then(va,va),c=d),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,A4(o),o;default:if(typeof c.status=="string")c.then(va,va);else{if(o=cn,o!==null&&100<o.shellSuspendCounter)throw Error(s(482));o=c,o.status="pending",o.then(function(v){if(c.status==="pending"){var x=c;x.status="fulfilled",x.value=v}},function(v){if(c.status==="pending"){var x=c;x.status="rejected",x.reason=v}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,A4(o),o}throw Tl=c,ou}}function Rl(o){try{var c=o._init;return c(o._payload)}catch(d){throw d!==null&&typeof d=="object"&&typeof d.then=="function"?(Tl=d,ou):d}}var Tl=null;function E4(){if(Tl===null)throw Error(s(459));var o=Tl;return Tl=null,o}function A4(o){if(o===ou||o===og)throw Error(s(483))}var lu=null,bd=0;function cg(o){var c=bd;return bd+=1,lu===null&&(lu=[]),N4(lu,o,c)}function _d(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function ug(o,c){throw c.$$typeof===g?Error(s(525)):(o=Object.prototype.toString.call(c),Error(s(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function R4(o){function c(ie,ne){if(o){var ce=ie.deletions;ce===null?(ie.deletions=[ne],ie.flags|=16):ce.push(ne)}}function d(ie,ne){if(!o)return null;for(;ne!==null;)c(ie,ne),ne=ne.sibling;return null}function v(ie){for(var ne=new Map;ie!==null;)ie.key!==null?ne.set(ie.key,ie):ne.set(ie.index,ie),ie=ie.sibling;return ne}function x(ie,ne){return ie=_a(ie,ne),ie.index=0,ie.sibling=null,ie}function S(ie,ne,ce){return ie.index=ce,o?(ce=ie.alternate,ce!==null?(ce=ce.index,ce<ne?(ie.flags|=67108866,ne):ce):(ie.flags|=67108866,ne)):(ie.flags|=1048576,ne)}function j(ie){return o&&ie.alternate===null&&(ie.flags|=67108866),ie}function H(ie,ne,ce,ge){return ne===null||ne.tag!==6?(ne=Q1(ce,ie.mode,ge),ne.return=ie,ne):(ne=x(ne,ce),ne.return=ie,ne)}function ee(ie,ne,ce,ge){var ot=ce.type;return ot===_?me(ie,ne,ce.props.children,ge,ce.key):ne!==null&&(ne.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===I&&Rl(ot)===ne.type)?(ne=x(ne,ce.props),_d(ne,ce),ne.return=ie,ne):(ne=ng(ce.type,ce.key,ce.props,null,ie.mode,ge),_d(ne,ce),ne.return=ie,ne)}function ue(ie,ne,ce,ge){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==ce.containerInfo||ne.stateNode.implementation!==ce.implementation?(ne=e_(ce,ie.mode,ge),ne.return=ie,ne):(ne=x(ne,ce.children||[]),ne.return=ie,ne)}function me(ie,ne,ce,ge,ot){return ne===null||ne.tag!==7?(ne=kl(ce,ie.mode,ge,ot),ne.return=ie,ne):(ne=x(ne,ce),ne.return=ie,ne)}function ye(ie,ne,ce){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return ne=Q1(""+ne,ie.mode,ce),ne.return=ie,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case y:return ce=ng(ne.type,ne.key,ne.props,null,ie.mode,ce),_d(ce,ne),ce.return=ie,ce;case b:return ne=e_(ne,ie.mode,ce),ne.return=ie,ne;case I:return ne=Rl(ne),ye(ie,ne,ce)}if(K(ne)||$(ne))return ne=kl(ne,ie.mode,ce,null),ne.return=ie,ne;if(typeof ne.then=="function")return ye(ie,cg(ne),ce);if(ne.$$typeof===E)return ye(ie,ig(ie,ne),ce);ug(ie,ne)}return null}function de(ie,ne,ce,ge){var ot=ne!==null?ne.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return ot!==null?null:H(ie,ne,""+ce,ge);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case y:return ce.key===ot?ee(ie,ne,ce,ge):null;case b:return ce.key===ot?ue(ie,ne,ce,ge):null;case I:return ce=Rl(ce),de(ie,ne,ce,ge)}if(K(ce)||$(ce))return ot!==null?null:me(ie,ne,ce,ge,null);if(typeof ce.then=="function")return de(ie,ne,cg(ce),ge);if(ce.$$typeof===E)return de(ie,ne,ig(ie,ce),ge);ug(ie,ce)}return null}function pe(ie,ne,ce,ge,ot){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return ie=ie.get(ce)||null,H(ne,ie,""+ge,ot);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case y:return ie=ie.get(ge.key===null?ce:ge.key)||null,ee(ne,ie,ge,ot);case b:return ie=ie.get(ge.key===null?ce:ge.key)||null,ue(ne,ie,ge,ot);case I:return ge=Rl(ge),pe(ie,ne,ce,ge,ot)}if(K(ge)||$(ge))return ie=ie.get(ce)||null,me(ne,ie,ge,ot,null);if(typeof ge.then=="function")return pe(ie,ne,ce,cg(ge),ot);if(ge.$$typeof===E)return pe(ie,ne,ce,ig(ne,ge),ot);ug(ne,ge)}return null}function et(ie,ne,ce,ge){for(var ot=null,Kt=null,rt=ne,Tt=ne=0,Ut=null;rt!==null&&Tt<ce.length;Tt++){rt.index>Tt?(Ut=rt,rt=null):Ut=rt.sibling;var Wt=de(ie,rt,ce[Tt],ge);if(Wt===null){rt===null&&(rt=Ut);break}o&&rt&&Wt.alternate===null&&c(ie,rt),ne=S(Wt,ne,Tt),Kt===null?ot=Wt:Kt.sibling=Wt,Kt=Wt,rt=Ut}if(Tt===ce.length)return d(ie,rt),Ht&&xa(ie,Tt),ot;if(rt===null){for(;Tt<ce.length;Tt++)rt=ye(ie,ce[Tt],ge),rt!==null&&(ne=S(rt,ne,Tt),Kt===null?ot=rt:Kt.sibling=rt,Kt=rt);return Ht&&xa(ie,Tt),ot}for(rt=v(rt);Tt<ce.length;Tt++)Ut=pe(rt,ie,Tt,ce[Tt],ge),Ut!==null&&(o&&Ut.alternate!==null&&rt.delete(Ut.key===null?Tt:Ut.key),ne=S(Ut,ne,Tt),Kt===null?ot=Ut:Kt.sibling=Ut,Kt=Ut);return o&&rt.forEach(function(Mo){return c(ie,Mo)}),Ht&&xa(ie,Tt),ot}function dt(ie,ne,ce,ge){if(ce==null)throw Error(s(151));for(var ot=null,Kt=null,rt=ne,Tt=ne=0,Ut=null,Wt=ce.next();rt!==null&&!Wt.done;Tt++,Wt=ce.next()){rt.index>Tt?(Ut=rt,rt=null):Ut=rt.sibling;var Mo=de(ie,rt,Wt.value,ge);if(Mo===null){rt===null&&(rt=Ut);break}o&&rt&&Mo.alternate===null&&c(ie,rt),ne=S(Mo,ne,Tt),Kt===null?ot=Mo:Kt.sibling=Mo,Kt=Mo,rt=Ut}if(Wt.done)return d(ie,rt),Ht&&xa(ie,Tt),ot;if(rt===null){for(;!Wt.done;Tt++,Wt=ce.next())Wt=ye(ie,Wt.value,ge),Wt!==null&&(ne=S(Wt,ne,Tt),Kt===null?ot=Wt:Kt.sibling=Wt,Kt=Wt);return Ht&&xa(ie,Tt),ot}for(rt=v(rt);!Wt.done;Tt++,Wt=ce.next())Wt=pe(rt,ie,Tt,Wt.value,ge),Wt!==null&&(o&&Wt.alternate!==null&&rt.delete(Wt.key===null?Tt:Wt.key),ne=S(Wt,ne,Tt),Kt===null?ot=Wt:Kt.sibling=Wt,Kt=Wt);return o&&rt.forEach(function(WF){return c(ie,WF)}),Ht&&xa(ie,Tt),ot}function an(ie,ne,ce,ge){if(typeof ce=="object"&&ce!==null&&ce.type===_&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case y:e:{for(var ot=ce.key;ne!==null;){if(ne.key===ot){if(ot=ce.type,ot===_){if(ne.tag===7){d(ie,ne.sibling),ge=x(ne,ce.props.children),ge.return=ie,ie=ge;break e}}else if(ne.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===I&&Rl(ot)===ne.type){d(ie,ne.sibling),ge=x(ne,ce.props),_d(ge,ce),ge.return=ie,ie=ge;break e}d(ie,ne);break}else c(ie,ne);ne=ne.sibling}ce.type===_?(ge=kl(ce.props.children,ie.mode,ge,ce.key),ge.return=ie,ie=ge):(ge=ng(ce.type,ce.key,ce.props,null,ie.mode,ge),_d(ge,ce),ge.return=ie,ie=ge)}return j(ie);case b:e:{for(ot=ce.key;ne!==null;){if(ne.key===ot)if(ne.tag===4&&ne.stateNode.containerInfo===ce.containerInfo&&ne.stateNode.implementation===ce.implementation){d(ie,ne.sibling),ge=x(ne,ce.children||[]),ge.return=ie,ie=ge;break e}else{d(ie,ne);break}else c(ie,ne);ne=ne.sibling}ge=e_(ce,ie.mode,ge),ge.return=ie,ie=ge}return j(ie);case I:return ce=Rl(ce),an(ie,ne,ce,ge)}if(K(ce))return et(ie,ne,ce,ge);if($(ce)){if(ot=$(ce),typeof ot!="function")throw Error(s(150));return ce=ot.call(ce),dt(ie,ne,ce,ge)}if(typeof ce.then=="function")return an(ie,ne,cg(ce),ge);if(ce.$$typeof===E)return an(ie,ne,ig(ie,ce),ge);ug(ie,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint"?(ce=""+ce,ne!==null&&ne.tag===6?(d(ie,ne.sibling),ge=x(ne,ce),ge.return=ie,ie=ge):(d(ie,ne),ge=Q1(ce,ie.mode,ge),ge.return=ie,ie=ge),j(ie)):d(ie,ne)}return function(ie,ne,ce,ge){try{bd=0;var ot=an(ie,ne,ce,ge);return lu=null,ot}catch(rt){if(rt===ou||rt===og)throw rt;var Kt=br(29,rt,null,ie.mode);return Kt.lanes=ge,Kt.return=ie,Kt}}}var jl=R4(!0),T4=R4(!1),go=!1;function d_(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function f_(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function yo(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function vo(o,c,d){var v=o.updateQueue;if(v===null)return null;if(v=v.shared,(Yt&2)!==0){var x=v.pending;return x===null?c.next=c:(c.next=x.next,x.next=c),v.pending=c,c=tg(o),f4(o,null,d),c}return eg(o,v,c,d),tg(o)}function xd(o,c,d){if(c=c.updateQueue,c!==null&&(c=c.shared,(d&4194048)!==0)){var v=c.lanes;v&=o.pendingLanes,d|=v,c.lanes=d,at(o,d)}}function p_(o,c){var d=o.updateQueue,v=o.alternate;if(v!==null&&(v=v.updateQueue,d===v)){var x=null,S=null;if(d=d.firstBaseUpdate,d!==null){do{var j={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};S===null?x=S=j:S=S.next=j,d=d.next}while(d!==null);S===null?x=S=c:S=S.next=c}else x=S=c;d={baseState:v.baseState,firstBaseUpdate:x,lastBaseUpdate:S,shared:v.shared,callbacks:v.callbacks},o.updateQueue=d;return}o=d.lastBaseUpdate,o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=c}var m_=!1;function wd(){if(m_){var o=au;if(o!==null)throw o}}function Sd(o,c,d,v){m_=!1;var x=o.updateQueue;go=!1;var S=x.firstBaseUpdate,j=x.lastBaseUpdate,H=x.shared.pending;if(H!==null){x.shared.pending=null;var ee=H,ue=ee.next;ee.next=null,j===null?S=ue:j.next=ue,j=ee;var me=o.alternate;me!==null&&(me=me.updateQueue,H=me.lastBaseUpdate,H!==j&&(H===null?me.firstBaseUpdate=ue:H.next=ue,me.lastBaseUpdate=ee))}if(S!==null){var ye=x.baseState;j=0,me=ue=ee=null,H=S;do{var de=H.lane&-536870913,pe=de!==H.lane;if(pe?(Ft&de)===de:(v&de)===de){de!==0&&de===iu&&(m_=!0),me!==null&&(me=me.next={lane:0,tag:H.tag,payload:H.payload,callback:null,next:null});e:{var et=o,dt=H;de=c;var an=d;switch(dt.tag){case 1:if(et=dt.payload,typeof et=="function"){ye=et.call(an,ye,de);break e}ye=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=dt.payload,de=typeof et=="function"?et.call(an,ye,de):et,de==null)break e;ye=p({},ye,de);break e;case 2:go=!0}}de=H.callback,de!==null&&(o.flags|=64,pe&&(o.flags|=8192),pe=x.callbacks,pe===null?x.callbacks=[de]:pe.push(de))}else pe={lane:de,tag:H.tag,payload:H.payload,callback:H.callback,next:null},me===null?(ue=me=pe,ee=ye):me=me.next=pe,j|=de;if(H=H.next,H===null){if(H=x.shared.pending,H===null)break;pe=H,H=pe.next,pe.next=null,x.lastBaseUpdate=pe,x.shared.pending=null}}while(!0);me===null&&(ee=ye),x.baseState=ee,x.firstBaseUpdate=ue,x.lastBaseUpdate=me,S===null&&(x.shared.lanes=0),So|=j,o.lanes=j,o.memoizedState=ye}}function j4(o,c){if(typeof o!="function")throw Error(s(191,o));o.call(c)}function O4(o,c){var d=o.callbacks;if(d!==null)for(o.callbacks=null,o=0;o<d.length;o++)j4(d[o],c)}var cu=L(null),hg=L(0);function M4(o,c){o=Oa,T(hg,o),T(cu,c),Oa=o|c.baseLanes}function g_(){T(hg,Oa),T(cu,cu.current)}function y_(){Oa=hg.current,V(cu),V(hg)}var _r=L(null),Qr=null;function bo(o){var c=o.alternate;T(Mn,Mn.current&1),T(_r,o),Qr===null&&(c===null||cu.current!==null||c.memoizedState!==null)&&(Qr=o)}function v_(o){T(Mn,Mn.current),T(_r,o),Qr===null&&(Qr=o)}function I4(o){o.tag===22?(T(Mn,Mn.current),T(_r,o),Qr===null&&(Qr=o)):_o()}function _o(){T(Mn,Mn.current),T(_r,_r.current)}function xr(o){V(_r),Qr===o&&(Qr=null),V(Mn)}var Mn=L(0);function dg(o){for(var c=o;c!==null;){if(c.tag===13){var d=c.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||kx(d)||Cx(d)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var ka=0,Nt=null,sn=null,zn=null,fg=!1,uu=!1,Ol=!1,pg=0,kd=0,hu=null,P9=0;function En(){throw Error(s(321))}function b_(o,c){if(c===null)return!1;for(var d=0;d<c.length&&d<o.length;d++)if(!vr(o[d],c[d]))return!1;return!0}function __(o,c,d,v,x,S){return ka=S,Nt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,B.H=o===null||o.memoizedState===null?yR:D_,Ol=!1,S=d(v,x),Ol=!1,uu&&(S=L4(c,d,v,x)),D4(o),S}function D4(o){B.H=Ed;var c=sn!==null&&sn.next!==null;if(ka=0,zn=sn=Nt=null,fg=!1,kd=0,hu=null,c)throw Error(s(300));o===null||Fn||(o=o.dependencies,o!==null&&rg(o)&&(Fn=!0))}function L4(o,c,d,v){Nt=o;var x=0;do{if(uu&&(hu=null),kd=0,uu=!1,25<=x)throw Error(s(301));if(x+=1,zn=sn=null,o.updateQueue!=null){var S=o.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}B.H=vR,S=c(d,v)}while(uu);return S}function B9(){var o=B.H,c=o.useState()[0];return c=typeof c.then=="function"?Cd(c):c,o=o.useState()[0],(sn!==null?sn.memoizedState:null)!==o&&(Nt.flags|=1024),c}function x_(){var o=pg!==0;return pg=0,o}function w_(o,c,d){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~d}function S_(o){if(fg){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}fg=!1}ka=0,zn=sn=Nt=null,uu=!1,kd=pg=0,hu=null}function Ps(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zn===null?Nt.memoizedState=zn=o:zn=zn.next=o,zn}function In(){if(sn===null){var o=Nt.alternate;o=o!==null?o.memoizedState:null}else o=sn.next;var c=zn===null?Nt.memoizedState:zn.next;if(c!==null)zn=c,sn=o;else{if(o===null)throw Nt.alternate===null?Error(s(467)):Error(s(310));sn=o,o={memoizedState:sn.memoizedState,baseState:sn.baseState,baseQueue:sn.baseQueue,queue:sn.queue,next:null},zn===null?Nt.memoizedState=zn=o:zn=zn.next=o}return zn}function mg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Cd(o){var c=kd;return kd+=1,hu===null&&(hu=[]),o=N4(hu,o,c),c=Nt,(zn===null?c.memoizedState:zn.next)===null&&(c=c.alternate,B.H=c===null||c.memoizedState===null?yR:D_),o}function gg(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Cd(o);if(o.$$typeof===E)return fs(o)}throw Error(s(438,String(o)))}function k_(o){var c=null,d=Nt.updateQueue;if(d!==null&&(c=d.memoCache),c==null){var v=Nt.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(c={data:v.data.map(function(x){return x.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),d===null&&(d=mg(),Nt.updateQueue=d),d.memoCache=c,d=c.data[c.index],d===void 0)for(d=c.data[c.index]=Array(o),v=0;v<o;v++)d[v]=P;return c.index++,d}function Ca(o,c){return typeof c=="function"?c(o):c}function yg(o){var c=In();return C_(c,sn,o)}function C_(o,c,d){var v=o.queue;if(v===null)throw Error(s(311));v.lastRenderedReducer=d;var x=o.baseQueue,S=v.pending;if(S!==null){if(x!==null){var j=x.next;x.next=S.next,S.next=j}c.baseQueue=x=S,v.pending=null}if(S=o.baseState,x===null)o.memoizedState=S;else{c=x.next;var H=j=null,ee=null,ue=c,me=!1;do{var ye=ue.lane&-536870913;if(ye!==ue.lane?(Ft&ye)===ye:(ka&ye)===ye){var de=ue.revertLane;if(de===0)ee!==null&&(ee=ee.next={lane:0,revertLane:0,gesture:null,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),ye===iu&&(me=!0);else if((ka&de)===de){ue=ue.next,de===iu&&(me=!0);continue}else ye={lane:0,revertLane:ue.revertLane,gesture:null,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},ee===null?(H=ee=ye,j=S):ee=ee.next=ye,Nt.lanes|=de,So|=de;ye=ue.action,Ol&&d(S,ye),S=ue.hasEagerState?ue.eagerState:d(S,ye)}else de={lane:ye,revertLane:ue.revertLane,gesture:ue.gesture,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},ee===null?(H=ee=de,j=S):ee=ee.next=de,Nt.lanes|=ye,So|=ye;ue=ue.next}while(ue!==null&&ue!==c);if(ee===null?j=S:ee.next=H,!vr(S,o.memoizedState)&&(Fn=!0,me&&(d=au,d!==null)))throw d;o.memoizedState=S,o.baseState=j,o.baseQueue=ee,v.lastRenderedState=S}return x===null&&(v.lanes=0),[o.memoizedState,v.dispatch]}function N_(o){var c=In(),d=c.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=o;var v=d.dispatch,x=d.pending,S=c.memoizedState;if(x!==null){d.pending=null;var j=x=x.next;do S=o(S,j.action),j=j.next;while(j!==x);vr(S,c.memoizedState)||(Fn=!0),c.memoizedState=S,c.baseQueue===null&&(c.baseState=S),d.lastRenderedState=S}return[S,v]}function P4(o,c,d){var v=Nt,x=In(),S=Ht;if(S){if(d===void 0)throw Error(s(407));d=d()}else d=c();var j=!vr((sn||x).memoizedState,d);if(j&&(x.memoizedState=d,Fn=!0),x=x.queue,R_(z4.bind(null,v,x,o),[o]),x.getSnapshot!==c||j||zn!==null&&zn.memoizedState.tag&1){if(v.flags|=2048,du(9,{destroy:void 0},$4.bind(null,v,x,d,c),null),cn===null)throw Error(s(349));S||(ka&127)!==0||B4(v,c,d)}return d}function B4(o,c,d){o.flags|=16384,o={getSnapshot:c,value:d},c=Nt.updateQueue,c===null?(c=mg(),Nt.updateQueue=c,c.stores=[o]):(d=c.stores,d===null?c.stores=[o]:d.push(o))}function $4(o,c,d,v){c.value=d,c.getSnapshot=v,F4(c)&&U4(o)}function z4(o,c,d){return d(function(){F4(c)&&U4(o)})}function F4(o){var c=o.getSnapshot;o=o.value;try{var d=c();return!vr(o,d)}catch{return!0}}function U4(o){var c=Sl(o,2);c!==null&&sr(c,o,2)}function E_(o){var c=Ps();if(typeof o=="function"){var d=o;if(o=d(),Ol){ke(!0);try{d()}finally{ke(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:o},c}function H4(o,c,d,v){return o.baseState=d,C_(o,sn,typeof v=="function"?v:Ca)}function $9(o,c,d,v,x){if(_g(o))throw Error(s(485));if(o=c.action,o!==null){var S={payload:x,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){S.listeners.push(j)}};B.T!==null?d(!0):S.isTransition=!1,v(S),d=c.pending,d===null?(S.next=c.pending=S,V4(c,S)):(S.next=d.next,c.pending=d.next=S)}}function V4(o,c){var d=c.action,v=c.payload,x=o.state;if(c.isTransition){var S=B.T,j={};B.T=j;try{var H=d(x,v),ee=B.S;ee!==null&&ee(j,H),q4(o,c,H)}catch(ue){A_(o,c,ue)}finally{S!==null&&j.types!==null&&(S.types=j.types),B.T=S}}else try{S=d(x,v),q4(o,c,S)}catch(ue){A_(o,c,ue)}}function q4(o,c,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(v){K4(o,c,v)},function(v){return A_(o,c,v)}):K4(o,c,d)}function K4(o,c,d){c.status="fulfilled",c.value=d,W4(c),o.state=d,c=o.pending,c!==null&&(d=c.next,d===c?o.pending=null:(d=d.next,c.next=d,V4(o,d)))}function A_(o,c,d){var v=o.pending;if(o.pending=null,v!==null){v=v.next;do c.status="rejected",c.reason=d,W4(c),c=c.next;while(c!==v)}o.action=null}function W4(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function G4(o,c){return c}function Y4(o,c){if(Ht){var d=cn.formState;if(d!==null){e:{var v=Nt;if(Ht){if(fn){t:{for(var x=fn,S=Xr;x.nodeType!==8;){if(!S){x=null;break t}if(x=ei(x.nextSibling),x===null){x=null;break t}}S=x.data,x=S==="F!"||S==="F"?x:null}if(x){fn=ei(x.nextSibling),v=x.data==="F!";break e}}po(v)}v=!1}v&&(c=d[0])}}return d=Ps(),d.memoizedState=d.baseState=c,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:G4,lastRenderedState:c},d.queue=v,d=pR.bind(null,Nt,v),v.dispatch=d,v=E_(!1),S=I_.bind(null,Nt,!1,v.queue),v=Ps(),x={state:c,dispatch:null,action:o,pending:null},v.queue=x,d=$9.bind(null,Nt,x,S,d),x.dispatch=d,v.memoizedState=o,[c,d,!1]}function Z4(o){var c=In();return J4(c,sn,o)}function J4(o,c,d){if(c=C_(o,c,G4)[0],o=yg(Ca)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var v=Cd(c)}catch(j){throw j===ou?og:j}else v=c;c=In();var x=c.queue,S=x.dispatch;return d!==c.memoizedState&&(Nt.flags|=2048,du(9,{destroy:void 0},z9.bind(null,x,d),null)),[v,S,o]}function z9(o,c){o.action=c}function X4(o){var c=In(),d=sn;if(d!==null)return J4(c,d,o);In(),c=c.memoizedState,d=In();var v=d.queue.dispatch;return d.memoizedState=o,[c,v,!1]}function du(o,c,d,v){return o={tag:o,create:d,deps:v,inst:c,next:null},c=Nt.updateQueue,c===null&&(c=mg(),Nt.updateQueue=c),d=c.lastEffect,d===null?c.lastEffect=o.next=o:(v=d.next,d.next=o,o.next=v,c.lastEffect=o),o}function Q4(){return In().memoizedState}function vg(o,c,d,v){var x=Ps();Nt.flags|=o,x.memoizedState=du(1|c,{destroy:void 0},d,v===void 0?null:v)}function bg(o,c,d,v){var x=In();v=v===void 0?null:v;var S=x.memoizedState.inst;sn!==null&&v!==null&&b_(v,sn.memoizedState.deps)?x.memoizedState=du(c,S,d,v):(Nt.flags|=o,x.memoizedState=du(1|c,S,d,v))}function eR(o,c){vg(8390656,8,o,c)}function R_(o,c){bg(2048,8,o,c)}function F9(o){Nt.flags|=4;var c=Nt.updateQueue;if(c===null)c=mg(),Nt.updateQueue=c,c.events=[o];else{var d=c.events;d===null?c.events=[o]:d.push(o)}}function tR(o){var c=In().memoizedState;return F9({ref:c,nextImpl:o}),function(){if((Yt&2)!==0)throw Error(s(440));return c.impl.apply(void 0,arguments)}}function nR(o,c){return bg(4,2,o,c)}function sR(o,c){return bg(4,4,o,c)}function rR(o,c){if(typeof c=="function"){o=o();var d=c(o);return function(){typeof d=="function"?d():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function iR(o,c,d){d=d!=null?d.concat([o]):null,bg(4,4,rR.bind(null,c,o),d)}function T_(){}function aR(o,c){var d=In();c=c===void 0?null:c;var v=d.memoizedState;return c!==null&&b_(c,v[1])?v[0]:(d.memoizedState=[o,c],o)}function oR(o,c){var d=In();c=c===void 0?null:c;var v=d.memoizedState;if(c!==null&&b_(c,v[1]))return v[0];if(v=o(),Ol){ke(!0);try{o()}finally{ke(!1)}}return d.memoizedState=[v,c],v}function j_(o,c,d){return d===void 0||(ka&1073741824)!==0&&(Ft&261930)===0?o.memoizedState=c:(o.memoizedState=d,o=l5(),Nt.lanes|=o,So|=o,d)}function lR(o,c,d,v){return vr(d,c)?d:cu.current!==null?(o=j_(o,d,v),vr(o,c)||(Fn=!0),o):(ka&42)===0||(ka&1073741824)!==0&&(Ft&261930)===0?(Fn=!0,o.memoizedState=d):(o=l5(),Nt.lanes|=o,So|=o,c)}function cR(o,c,d,v,x){var S=J.p;J.p=S!==0&&8>S?S:8;var j=B.T,H={};B.T=H,I_(o,!1,c,d);try{var ee=x(),ue=B.S;if(ue!==null&&ue(H,ee),ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var me=L9(ee,v);Nd(o,c,me,kr(o))}else Nd(o,c,v,kr(o))}catch(ye){Nd(o,c,{then:function(){},status:"rejected",reason:ye},kr())}finally{J.p=S,j!==null&&H.types!==null&&(j.types=H.types),B.T=j}}function U9(){}function O_(o,c,d,v){if(o.tag!==5)throw Error(s(476));var x=uR(o).queue;cR(o,x,c,Y,d===null?U9:function(){return hR(o),d(v)})}function uR(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:Y},next:null};var d={};return c.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:d},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function hR(o){var c=uR(o);c.next===null&&(c=o.alternate.memoizedState),Nd(o,c.next.queue,{},kr())}function M_(){return fs(Hd)}function dR(){return In().memoizedState}function fR(){return In().memoizedState}function H9(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var d=kr();o=yo(d);var v=vo(c,o,d);v!==null&&(sr(v,c,d),xd(v,c,d)),c={cache:l_()},o.payload=c;return}c=c.return}}function V9(o,c,d){var v=kr();d={lane:v,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},_g(o)?mR(c,d):(d=J1(o,c,d,v),d!==null&&(sr(d,o,v),gR(d,c,v)))}function pR(o,c,d){var v=kr();Nd(o,c,d,v)}function Nd(o,c,d,v){var x={lane:v,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null};if(_g(o))mR(c,x);else{var S=o.alternate;if(o.lanes===0&&(S===null||S.lanes===0)&&(S=c.lastRenderedReducer,S!==null))try{var j=c.lastRenderedState,H=S(j,d);if(x.hasEagerState=!0,x.eagerState=H,vr(H,j))return eg(o,c,x,0),cn===null&&Qm(),!1}catch{}if(d=J1(o,c,x,v),d!==null)return sr(d,o,v),gR(d,c,v),!0}return!1}function I_(o,c,d,v){if(v={lane:2,revertLane:dx(),gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},_g(o)){if(c)throw Error(s(479))}else c=J1(o,d,v,2),c!==null&&sr(c,o,2)}function _g(o){var c=o.alternate;return o===Nt||c!==null&&c===Nt}function mR(o,c){uu=fg=!0;var d=o.pending;d===null?c.next=c:(c.next=d.next,d.next=c),o.pending=c}function gR(o,c,d){if((d&4194048)!==0){var v=c.lanes;v&=o.pendingLanes,d|=v,c.lanes=d,at(o,d)}}var Ed={readContext:fs,use:gg,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useLayoutEffect:En,useInsertionEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useSyncExternalStore:En,useId:En,useHostTransitionStatus:En,useFormState:En,useActionState:En,useOptimistic:En,useMemoCache:En,useCacheRefresh:En};Ed.useEffectEvent=En;var yR={readContext:fs,use:gg,useCallback:function(o,c){return Ps().memoizedState=[o,c===void 0?null:c],o},useContext:fs,useEffect:eR,useImperativeHandle:function(o,c,d){d=d!=null?d.concat([o]):null,vg(4194308,4,rR.bind(null,c,o),d)},useLayoutEffect:function(o,c){return vg(4194308,4,o,c)},useInsertionEffect:function(o,c){vg(4,2,o,c)},useMemo:function(o,c){var d=Ps();c=c===void 0?null:c;var v=o();if(Ol){ke(!0);try{o()}finally{ke(!1)}}return d.memoizedState=[v,c],v},useReducer:function(o,c,d){var v=Ps();if(d!==void 0){var x=d(c);if(Ol){ke(!0);try{d(c)}finally{ke(!1)}}}else x=c;return v.memoizedState=v.baseState=x,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:x},v.queue=o,o=o.dispatch=V9.bind(null,Nt,o),[v.memoizedState,o]},useRef:function(o){var c=Ps();return o={current:o},c.memoizedState=o},useState:function(o){o=E_(o);var c=o.queue,d=pR.bind(null,Nt,c);return c.dispatch=d,[o.memoizedState,d]},useDebugValue:T_,useDeferredValue:function(o,c){var d=Ps();return j_(d,o,c)},useTransition:function(){var o=E_(!1);return o=cR.bind(null,Nt,o.queue,!0,!1),Ps().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,d){var v=Nt,x=Ps();if(Ht){if(d===void 0)throw Error(s(407));d=d()}else{if(d=c(),cn===null)throw Error(s(349));(Ft&127)!==0||B4(v,c,d)}x.memoizedState=d;var S={value:d,getSnapshot:c};return x.queue=S,eR(z4.bind(null,v,S,o),[o]),v.flags|=2048,du(9,{destroy:void 0},$4.bind(null,v,S,d,c),null),d},useId:function(){var o=Ps(),c=cn.identifierPrefix;if(Ht){var d=Pi,v=Li;d=(v&~(1<<32-je(v)-1)).toString(32)+d,c="_"+c+"R_"+d,d=pg++,0<d&&(c+="H"+d.toString(32)),c+="_"}else d=P9++,c="_"+c+"r_"+d.toString(32)+"_";return o.memoizedState=c},useHostTransitionStatus:M_,useFormState:Y4,useActionState:Y4,useOptimistic:function(o){var c=Ps();c.memoizedState=c.baseState=o;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=d,c=I_.bind(null,Nt,!0,d),d.dispatch=c,[o,c]},useMemoCache:k_,useCacheRefresh:function(){return Ps().memoizedState=H9.bind(null,Nt)},useEffectEvent:function(o){var c=Ps(),d={impl:o};return c.memoizedState=d,function(){if((Yt&2)!==0)throw Error(s(440));return d.impl.apply(void 0,arguments)}}},D_={readContext:fs,use:gg,useCallback:aR,useContext:fs,useEffect:R_,useImperativeHandle:iR,useInsertionEffect:nR,useLayoutEffect:sR,useMemo:oR,useReducer:yg,useRef:Q4,useState:function(){return yg(Ca)},useDebugValue:T_,useDeferredValue:function(o,c){var d=In();return lR(d,sn.memoizedState,o,c)},useTransition:function(){var o=yg(Ca)[0],c=In().memoizedState;return[typeof o=="boolean"?o:Cd(o),c]},useSyncExternalStore:P4,useId:dR,useHostTransitionStatus:M_,useFormState:Z4,useActionState:Z4,useOptimistic:function(o,c){var d=In();return H4(d,sn,o,c)},useMemoCache:k_,useCacheRefresh:fR};D_.useEffectEvent=tR;var vR={readContext:fs,use:gg,useCallback:aR,useContext:fs,useEffect:R_,useImperativeHandle:iR,useInsertionEffect:nR,useLayoutEffect:sR,useMemo:oR,useReducer:N_,useRef:Q4,useState:function(){return N_(Ca)},useDebugValue:T_,useDeferredValue:function(o,c){var d=In();return sn===null?j_(d,o,c):lR(d,sn.memoizedState,o,c)},useTransition:function(){var o=N_(Ca)[0],c=In().memoizedState;return[typeof o=="boolean"?o:Cd(o),c]},useSyncExternalStore:P4,useId:dR,useHostTransitionStatus:M_,useFormState:X4,useActionState:X4,useOptimistic:function(o,c){var d=In();return sn!==null?H4(d,sn,o,c):(d.baseState=o,[o,d.queue.dispatch])},useMemoCache:k_,useCacheRefresh:fR};vR.useEffectEvent=tR;function L_(o,c,d,v){c=o.memoizedState,d=d(v,c),d=d==null?c:p({},c,d),o.memoizedState=d,o.lanes===0&&(o.updateQueue.baseState=d)}var P_={enqueueSetState:function(o,c,d){o=o._reactInternals;var v=kr(),x=yo(v);x.payload=c,d!=null&&(x.callback=d),c=vo(o,x,v),c!==null&&(sr(c,o,v),xd(c,o,v))},enqueueReplaceState:function(o,c,d){o=o._reactInternals;var v=kr(),x=yo(v);x.tag=1,x.payload=c,d!=null&&(x.callback=d),c=vo(o,x,v),c!==null&&(sr(c,o,v),xd(c,o,v))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var d=kr(),v=yo(d);v.tag=2,c!=null&&(v.callback=c),c=vo(o,v,d),c!==null&&(sr(c,o,d),xd(c,o,d))}};function bR(o,c,d,v,x,S,j){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(v,S,j):c.prototype&&c.prototype.isPureReactComponent?!fd(d,v)||!fd(x,S):!0}function _R(o,c,d,v){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(d,v),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(d,v),c.state!==o&&P_.enqueueReplaceState(c,c.state,null)}function Ml(o,c){var d=c;if("ref"in c){d={};for(var v in c)v!=="ref"&&(d[v]=c[v])}if(o=o.defaultProps){d===c&&(d=p({},d));for(var x in o)d[x]===void 0&&(d[x]=o[x])}return d}function xR(o){Xm(o)}function wR(o){console.error(o)}function SR(o){Xm(o)}function xg(o,c){try{var d=o.onUncaughtError;d(c.value,{componentStack:c.stack})}catch(v){setTimeout(function(){throw v})}}function kR(o,c,d){try{var v=o.onCaughtError;v(d.value,{componentStack:d.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function B_(o,c,d){return d=yo(d),d.tag=3,d.payload={element:null},d.callback=function(){xg(o,c)},d}function CR(o){return o=yo(o),o.tag=3,o}function NR(o,c,d,v){var x=d.type.getDerivedStateFromError;if(typeof x=="function"){var S=v.value;o.payload=function(){return x(S)},o.callback=function(){kR(c,d,v)}}var j=d.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(o.callback=function(){kR(c,d,v),typeof x!="function"&&(ko===null?ko=new Set([this]):ko.add(this));var H=v.stack;this.componentDidCatch(v.value,{componentStack:H!==null?H:""})})}function q9(o,c,d,v,x){if(d.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(c=d.alternate,c!==null&&ru(c,d,x,!0),d=_r.current,d!==null){switch(d.tag){case 31:case 13:return Qr===null?Mg():d.alternate===null&&An===0&&(An=3),d.flags&=-257,d.flags|=65536,d.lanes=x,v===lg?d.flags|=16384:(c=d.updateQueue,c===null?d.updateQueue=new Set([v]):c.add(v),cx(o,v,x)),!1;case 22:return d.flags|=65536,v===lg?d.flags|=16384:(c=d.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([v])},d.updateQueue=c):(d=c.retryQueue,d===null?c.retryQueue=new Set([v]):d.add(v)),cx(o,v,x)),!1}throw Error(s(435,d.tag))}return cx(o,v,x),Mg(),!1}if(Ht)return c=_r.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=x,v!==s_&&(o=Error(s(422),{cause:v}),gd(Yr(o,d)))):(v!==s_&&(c=Error(s(423),{cause:v}),gd(Yr(c,d))),o=o.current.alternate,o.flags|=65536,x&=-x,o.lanes|=x,v=Yr(v,d),x=B_(o.stateNode,v,x),p_(o,x),An!==4&&(An=2)),!1;var S=Error(s(520),{cause:v});if(S=Yr(S,d),Dd===null?Dd=[S]:Dd.push(S),An!==4&&(An=2),c===null)return!0;v=Yr(v,d),d=c;do{switch(d.tag){case 3:return d.flags|=65536,o=x&-x,d.lanes|=o,o=B_(d.stateNode,v,o),p_(d,o),!1;case 1:if(c=d.type,S=d.stateNode,(d.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(ko===null||!ko.has(S))))return d.flags|=65536,x&=-x,d.lanes|=x,x=CR(x),NR(x,o,d,v),p_(d,x),!1}d=d.return}while(d!==null);return!1}var $_=Error(s(461)),Fn=!1;function ps(o,c,d,v){c.child=o===null?T4(c,null,d,v):jl(c,o.child,d,v)}function ER(o,c,d,v,x){d=d.render;var S=c.ref;if("ref"in v){var j={};for(var H in v)H!=="ref"&&(j[H]=v[H])}else j=v;return El(c),v=__(o,c,d,j,S,x),H=x_(),o!==null&&!Fn?(w_(o,c,x),Na(o,c,x)):(Ht&&H&&t_(c),c.flags|=1,ps(o,c,v,x),c.child)}function AR(o,c,d,v,x){if(o===null){var S=d.type;return typeof S=="function"&&!X1(S)&&S.defaultProps===void 0&&d.compare===null?(c.tag=15,c.type=S,RR(o,c,S,v,x)):(o=ng(d.type,null,v,c,c.mode,x),o.ref=c.ref,o.return=c,c.child=o)}if(S=o.child,!W_(o,x)){var j=S.memoizedProps;if(d=d.compare,d=d!==null?d:fd,d(j,v)&&o.ref===c.ref)return Na(o,c,x)}return c.flags|=1,o=_a(S,v),o.ref=c.ref,o.return=c,c.child=o}function RR(o,c,d,v,x){if(o!==null){var S=o.memoizedProps;if(fd(S,v)&&o.ref===c.ref)if(Fn=!1,c.pendingProps=v=S,W_(o,x))(o.flags&131072)!==0&&(Fn=!0);else return c.lanes=o.lanes,Na(o,c,x)}return z_(o,c,d,v,x)}function TR(o,c,d,v){var x=v.children,S=o!==null?o.memoizedState:null;if(o===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),v.mode==="hidden"){if((c.flags&128)!==0){if(S=S!==null?S.baseLanes|d:d,o!==null){for(v=c.child=o.child,x=0;v!==null;)x=x|v.lanes|v.childLanes,v=v.sibling;v=x&~S}else v=0,c.child=null;return jR(o,c,S,d,v)}if((d&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&ag(c,S!==null?S.cachePool:null),S!==null?M4(c,S):g_(),I4(c);else return v=c.lanes=536870912,jR(o,c,S!==null?S.baseLanes|d:d,d,v)}else S!==null?(ag(c,S.cachePool),M4(c,S),_o(),c.memoizedState=null):(o!==null&&ag(c,null),g_(),_o());return ps(o,c,x,d),c.child}function Ad(o,c){return o!==null&&o.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function jR(o,c,d,v,x){var S=u_();return S=S===null?null:{parent:$n._currentValue,pool:S},c.memoizedState={baseLanes:d,cachePool:S},o!==null&&ag(c,null),g_(),I4(c),o!==null&&ru(o,c,v,!0),c.childLanes=x,null}function wg(o,c){return c=kg({mode:c.mode,children:c.children},o.mode),c.ref=o.ref,o.child=c,c.return=o,c}function OR(o,c,d){return jl(c,o.child,null,d),o=wg(c,c.pendingProps),o.flags|=2,xr(c),c.memoizedState=null,o}function K9(o,c,d){var v=c.pendingProps,x=(c.flags&128)!==0;if(c.flags&=-129,o===null){if(Ht){if(v.mode==="hidden")return o=wg(c,v),c.lanes=536870912,Ad(null,o);if(v_(c),(o=fn)?(o=V5(o,Xr),o=o!==null&&o.data==="&"?o:null,o!==null&&(c.memoizedState={dehydrated:o,treeContext:ho!==null?{id:Li,overflow:Pi}:null,retryLane:536870912,hydrationErrors:null},d=m4(o),d.return=c,c.child=d,ds=c,fn=null)):o=null,o===null)throw po(c);return c.lanes=536870912,null}return wg(c,v)}var S=o.memoizedState;if(S!==null){var j=S.dehydrated;if(v_(c),x)if(c.flags&256)c.flags&=-257,c=OR(o,c,d);else if(c.memoizedState!==null)c.child=o.child,c.flags|=128,c=null;else throw Error(s(558));else if(Fn||ru(o,c,d,!1),x=(d&o.childLanes)!==0,Fn||x){if(v=cn,v!==null&&(j=nn(v,d),j!==0&&j!==S.retryLane))throw S.retryLane=j,Sl(o,j),sr(v,o,j),$_;Mg(),c=OR(o,c,d)}else o=S.treeContext,fn=ei(j.nextSibling),ds=c,Ht=!0,fo=null,Xr=!1,o!==null&&v4(c,o),c=wg(c,v),c.flags|=4096;return c}return o=_a(o.child,{mode:v.mode,children:v.children}),o.ref=c.ref,c.child=o,o.return=c,o}function Sg(o,c){var d=c.ref;if(d===null)o!==null&&o.ref!==null&&(c.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(s(284));(o===null||o.ref!==d)&&(c.flags|=4194816)}}function z_(o,c,d,v,x){return El(c),d=__(o,c,d,v,void 0,x),v=x_(),o!==null&&!Fn?(w_(o,c,x),Na(o,c,x)):(Ht&&v&&t_(c),c.flags|=1,ps(o,c,d,x),c.child)}function MR(o,c,d,v,x,S){return El(c),c.updateQueue=null,d=L4(c,v,d,x),D4(o),v=x_(),o!==null&&!Fn?(w_(o,c,S),Na(o,c,S)):(Ht&&v&&t_(c),c.flags|=1,ps(o,c,d,S),c.child)}function IR(o,c,d,v,x){if(El(c),c.stateNode===null){var S=eu,j=d.contextType;typeof j=="object"&&j!==null&&(S=fs(j)),S=new d(v,S),c.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=P_,c.stateNode=S,S._reactInternals=c,S=c.stateNode,S.props=v,S.state=c.memoizedState,S.refs={},d_(c),j=d.contextType,S.context=typeof j=="object"&&j!==null?fs(j):eu,S.state=c.memoizedState,j=d.getDerivedStateFromProps,typeof j=="function"&&(L_(c,d,j,v),S.state=c.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(j=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),j!==S.state&&P_.enqueueReplaceState(S,S.state,null),Sd(c,v,S,x),wd(),S.state=c.memoizedState),typeof S.componentDidMount=="function"&&(c.flags|=4194308),v=!0}else if(o===null){S=c.stateNode;var H=c.memoizedProps,ee=Ml(d,H);S.props=ee;var ue=S.context,me=d.contextType;j=eu,typeof me=="object"&&me!==null&&(j=fs(me));var ye=d.getDerivedStateFromProps;me=typeof ye=="function"||typeof S.getSnapshotBeforeUpdate=="function",H=c.pendingProps!==H,me||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(H||ue!==j)&&_R(c,S,v,j),go=!1;var de=c.memoizedState;S.state=de,Sd(c,v,S,x),wd(),ue=c.memoizedState,H||de!==ue||go?(typeof ye=="function"&&(L_(c,d,ye,v),ue=c.memoizedState),(ee=go||bR(c,d,ee,v,de,ue,j))?(me||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(c.flags|=4194308)):(typeof S.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=v,c.memoizedState=ue),S.props=v,S.state=ue,S.context=j,v=ee):(typeof S.componentDidMount=="function"&&(c.flags|=4194308),v=!1)}else{S=c.stateNode,f_(o,c),j=c.memoizedProps,me=Ml(d,j),S.props=me,ye=c.pendingProps,de=S.context,ue=d.contextType,ee=eu,typeof ue=="object"&&ue!==null&&(ee=fs(ue)),H=d.getDerivedStateFromProps,(ue=typeof H=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(j!==ye||de!==ee)&&_R(c,S,v,ee),go=!1,de=c.memoizedState,S.state=de,Sd(c,v,S,x),wd();var pe=c.memoizedState;j!==ye||de!==pe||go||o!==null&&o.dependencies!==null&&rg(o.dependencies)?(typeof H=="function"&&(L_(c,d,H,v),pe=c.memoizedState),(me=go||bR(c,d,me,v,de,pe,ee)||o!==null&&o.dependencies!==null&&rg(o.dependencies))?(ue||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(v,pe,ee),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(v,pe,ee)),typeof S.componentDidUpdate=="function"&&(c.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof S.componentDidUpdate!="function"||j===o.memoizedProps&&de===o.memoizedState||(c.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||j===o.memoizedProps&&de===o.memoizedState||(c.flags|=1024),c.memoizedProps=v,c.memoizedState=pe),S.props=v,S.state=pe,S.context=ee,v=me):(typeof S.componentDidUpdate!="function"||j===o.memoizedProps&&de===o.memoizedState||(c.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||j===o.memoizedProps&&de===o.memoizedState||(c.flags|=1024),v=!1)}return S=v,Sg(o,c),v=(c.flags&128)!==0,S||v?(S=c.stateNode,d=v&&typeof d.getDerivedStateFromError!="function"?null:S.render(),c.flags|=1,o!==null&&v?(c.child=jl(c,o.child,null,x),c.child=jl(c,null,d,x)):ps(o,c,d,x),c.memoizedState=S.state,o=c.child):o=Na(o,c,x),o}function DR(o,c,d,v){return Cl(),c.flags|=256,ps(o,c,d,v),c.child}var F_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function U_(o){return{baseLanes:o,cachePool:k4()}}function H_(o,c,d){return o=o!==null?o.childLanes&~d:0,c&&(o|=Sr),o}function LR(o,c,d){var v=c.pendingProps,x=!1,S=(c.flags&128)!==0,j;if((j=S)||(j=o!==null&&o.memoizedState===null?!1:(Mn.current&2)!==0),j&&(x=!0,c.flags&=-129),j=(c.flags&32)!==0,c.flags&=-33,o===null){if(Ht){if(x?bo(c):_o(),(o=fn)?(o=V5(o,Xr),o=o!==null&&o.data!=="&"?o:null,o!==null&&(c.memoizedState={dehydrated:o,treeContext:ho!==null?{id:Li,overflow:Pi}:null,retryLane:536870912,hydrationErrors:null},d=m4(o),d.return=c,c.child=d,ds=c,fn=null)):o=null,o===null)throw po(c);return Cx(o)?c.lanes=32:c.lanes=536870912,null}var H=v.children;return v=v.fallback,x?(_o(),x=c.mode,H=kg({mode:"hidden",children:H},x),v=kl(v,x,d,null),H.return=c,v.return=c,H.sibling=v,c.child=H,v=c.child,v.memoizedState=U_(d),v.childLanes=H_(o,j,d),c.memoizedState=F_,Ad(null,v)):(bo(c),V_(c,H))}var ee=o.memoizedState;if(ee!==null&&(H=ee.dehydrated,H!==null)){if(S)c.flags&256?(bo(c),c.flags&=-257,c=q_(o,c,d)):c.memoizedState!==null?(_o(),c.child=o.child,c.flags|=128,c=null):(_o(),H=v.fallback,x=c.mode,v=kg({mode:"visible",children:v.children},x),H=kl(H,x,d,null),H.flags|=2,v.return=c,H.return=c,v.sibling=H,c.child=v,jl(c,o.child,null,d),v=c.child,v.memoizedState=U_(d),v.childLanes=H_(o,j,d),c.memoizedState=F_,c=Ad(null,v));else if(bo(c),Cx(H)){if(j=H.nextSibling&&H.nextSibling.dataset,j)var ue=j.dgst;j=ue,v=Error(s(419)),v.stack="",v.digest=j,gd({value:v,source:null,stack:null}),c=q_(o,c,d)}else if(Fn||ru(o,c,d,!1),j=(d&o.childLanes)!==0,Fn||j){if(j=cn,j!==null&&(v=nn(j,d),v!==0&&v!==ee.retryLane))throw ee.retryLane=v,Sl(o,v),sr(j,o,v),$_;kx(H)||Mg(),c=q_(o,c,d)}else kx(H)?(c.flags|=192,c.child=o.child,c=null):(o=ee.treeContext,fn=ei(H.nextSibling),ds=c,Ht=!0,fo=null,Xr=!1,o!==null&&v4(c,o),c=V_(c,v.children),c.flags|=4096);return c}return x?(_o(),H=v.fallback,x=c.mode,ee=o.child,ue=ee.sibling,v=_a(ee,{mode:"hidden",children:v.children}),v.subtreeFlags=ee.subtreeFlags&65011712,ue!==null?H=_a(ue,H):(H=kl(H,x,d,null),H.flags|=2),H.return=c,v.return=c,v.sibling=H,c.child=v,Ad(null,v),v=c.child,H=o.child.memoizedState,H===null?H=U_(d):(x=H.cachePool,x!==null?(ee=$n._currentValue,x=x.parent!==ee?{parent:ee,pool:ee}:x):x=k4(),H={baseLanes:H.baseLanes|d,cachePool:x}),v.memoizedState=H,v.childLanes=H_(o,j,d),c.memoizedState=F_,Ad(o.child,v)):(bo(c),d=o.child,o=d.sibling,d=_a(d,{mode:"visible",children:v.children}),d.return=c,d.sibling=null,o!==null&&(j=c.deletions,j===null?(c.deletions=[o],c.flags|=16):j.push(o)),c.child=d,c.memoizedState=null,d)}function V_(o,c){return c=kg({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function kg(o,c){return o=br(22,o,null,c),o.lanes=0,o}function q_(o,c,d){return jl(c,o.child,null,d),o=V_(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function PR(o,c,d){o.lanes|=c;var v=o.alternate;v!==null&&(v.lanes|=c),a_(o.return,c,d)}function K_(o,c,d,v,x,S){var j=o.memoizedState;j===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:v,tail:d,tailMode:x,treeForkCount:S}:(j.isBackwards=c,j.rendering=null,j.renderingStartTime=0,j.last=v,j.tail=d,j.tailMode=x,j.treeForkCount=S)}function BR(o,c,d){var v=c.pendingProps,x=v.revealOrder,S=v.tail;v=v.children;var j=Mn.current,H=(j&2)!==0;if(H?(j=j&1|2,c.flags|=128):j&=1,T(Mn,j),ps(o,c,v,d),v=Ht?md:0,!H&&o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&PR(o,d,c);else if(o.tag===19)PR(o,d,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(x){case"forwards":for(d=c.child,x=null;d!==null;)o=d.alternate,o!==null&&dg(o)===null&&(x=d),d=d.sibling;d=x,d===null?(x=c.child,c.child=null):(x=d.sibling,d.sibling=null),K_(c,!1,x,d,S,v);break;case"backwards":case"unstable_legacy-backwards":for(d=null,x=c.child,c.child=null;x!==null;){if(o=x.alternate,o!==null&&dg(o)===null){c.child=x;break}o=x.sibling,x.sibling=d,d=x,x=o}K_(c,!0,d,null,S,v);break;case"together":K_(c,!1,null,null,void 0,v);break;default:c.memoizedState=null}return c.child}function Na(o,c,d){if(o!==null&&(c.dependencies=o.dependencies),So|=c.lanes,(d&c.childLanes)===0)if(o!==null){if(ru(o,c,d,!1),(d&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(s(153));if(c.child!==null){for(o=c.child,d=_a(o,o.pendingProps),c.child=d,d.return=c;o.sibling!==null;)o=o.sibling,d=d.sibling=_a(o,o.pendingProps),d.return=c;d.sibling=null}return c.child}function W_(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&rg(o)))}function W9(o,c,d){switch(c.tag){case 3:xe(c,c.stateNode.containerInfo),mo(c,$n,o.memoizedState.cache),Cl();break;case 27:case 5:Xe(c);break;case 4:xe(c,c.stateNode.containerInfo);break;case 10:mo(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,v_(c),null;break;case 13:var v=c.memoizedState;if(v!==null)return v.dehydrated!==null?(bo(c),c.flags|=128,null):(d&c.child.childLanes)!==0?LR(o,c,d):(bo(c),o=Na(o,c,d),o!==null?o.sibling:null);bo(c);break;case 19:var x=(o.flags&128)!==0;if(v=(d&c.childLanes)!==0,v||(ru(o,c,d,!1),v=(d&c.childLanes)!==0),x){if(v)return BR(o,c,d);c.flags|=128}if(x=c.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),T(Mn,Mn.current),v)break;return null;case 22:return c.lanes=0,TR(o,c,d,c.pendingProps);case 24:mo(c,$n,o.memoizedState.cache)}return Na(o,c,d)}function $R(o,c,d){if(o!==null)if(o.memoizedProps!==c.pendingProps)Fn=!0;else{if(!W_(o,d)&&(c.flags&128)===0)return Fn=!1,W9(o,c,d);Fn=(o.flags&131072)!==0}else Fn=!1,Ht&&(c.flags&1048576)!==0&&y4(c,md,c.index);switch(c.lanes=0,c.tag){case 16:e:{var v=c.pendingProps;if(o=Rl(c.elementType),c.type=o,typeof o=="function")X1(o)?(v=Ml(o,v),c.tag=1,c=IR(null,c,o,v,d)):(c.tag=0,c=z_(null,c,o,v,d));else{if(o!=null){var x=o.$$typeof;if(x===A){c.tag=11,c=ER(null,c,o,v,d);break e}else if(x===M){c.tag=14,c=AR(null,c,o,v,d);break e}}throw c=Z(o)||o,Error(s(306,c,""))}}return c;case 0:return z_(o,c,c.type,c.pendingProps,d);case 1:return v=c.type,x=Ml(v,c.pendingProps),IR(o,c,v,x,d);case 3:e:{if(xe(c,c.stateNode.containerInfo),o===null)throw Error(s(387));v=c.pendingProps;var S=c.memoizedState;x=S.element,f_(o,c),Sd(c,v,null,d);var j=c.memoizedState;if(v=j.cache,mo(c,$n,v),v!==S.cache&&o_(c,[$n],d,!0),wd(),v=j.element,S.isDehydrated)if(S={element:v,isDehydrated:!1,cache:j.cache},c.updateQueue.baseState=S,c.memoizedState=S,c.flags&256){c=DR(o,c,v,d);break e}else if(v!==x){x=Yr(Error(s(424)),c),gd(x),c=DR(o,c,v,d);break e}else for(o=c.stateNode.containerInfo,o.nodeType===9?o=o.body:o=o.nodeName==="HTML"?o.ownerDocument.body:o,fn=ei(o.firstChild),ds=c,Ht=!0,fo=null,Xr=!0,d=T4(c,null,v,d),c.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Cl(),v===x){c=Na(o,c,d);break e}ps(o,c,v,d)}c=c.child}return c;case 26:return Sg(o,c),o===null?(d=Z5(c.type,null,c.pendingProps,null))?c.memoizedState=d:Ht||(d=c.type,o=c.pendingProps,v=zg(X.current).createElement(d),v[ln]=c,v[Xt]=o,ms(v,d,o),rs(v),c.stateNode=v):c.memoizedState=Z5(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return Xe(c),o===null&&Ht&&(v=c.stateNode=W5(c.type,c.pendingProps,X.current),ds=c,Xr=!0,x=fn,Ao(c.type)?(Nx=x,fn=ei(v.firstChild)):fn=x),ps(o,c,c.pendingProps.children,d),Sg(o,c),o===null&&(c.flags|=4194304),c.child;case 5:return o===null&&Ht&&((x=v=fn)&&(v=SF(v,c.type,c.pendingProps,Xr),v!==null?(c.stateNode=v,ds=c,fn=ei(v.firstChild),Xr=!1,x=!0):x=!1),x||po(c)),Xe(c),x=c.type,S=c.pendingProps,j=o!==null?o.memoizedProps:null,v=S.children,xx(x,S)?v=null:j!==null&&xx(x,j)&&(c.flags|=32),c.memoizedState!==null&&(x=__(o,c,B9,null,null,d),Hd._currentValue=x),Sg(o,c),ps(o,c,v,d),c.child;case 6:return o===null&&Ht&&((o=d=fn)&&(d=kF(d,c.pendingProps,Xr),d!==null?(c.stateNode=d,ds=c,fn=null,o=!0):o=!1),o||po(c)),null;case 13:return LR(o,c,d);case 4:return xe(c,c.stateNode.containerInfo),v=c.pendingProps,o===null?c.child=jl(c,null,v,d):ps(o,c,v,d),c.child;case 11:return ER(o,c,c.type,c.pendingProps,d);case 7:return ps(o,c,c.pendingProps,d),c.child;case 8:return ps(o,c,c.pendingProps.children,d),c.child;case 12:return ps(o,c,c.pendingProps.children,d),c.child;case 10:return v=c.pendingProps,mo(c,c.type,v.value),ps(o,c,v.children,d),c.child;case 9:return x=c.type._context,v=c.pendingProps.children,El(c),x=fs(x),v=v(x),c.flags|=1,ps(o,c,v,d),c.child;case 14:return AR(o,c,c.type,c.pendingProps,d);case 15:return RR(o,c,c.type,c.pendingProps,d);case 19:return BR(o,c,d);case 31:return K9(o,c,d);case 22:return TR(o,c,d,c.pendingProps);case 24:return El(c),v=fs($n),o===null?(x=u_(),x===null&&(x=cn,S=l_(),x.pooledCache=S,S.refCount++,S!==null&&(x.pooledCacheLanes|=d),x=S),c.memoizedState={parent:v,cache:x},d_(c),mo(c,$n,x)):((o.lanes&d)!==0&&(f_(o,c),Sd(c,null,null,d),wd()),x=o.memoizedState,S=c.memoizedState,x.parent!==v?(x={parent:v,cache:v},c.memoizedState=x,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=x),mo(c,$n,v)):(v=S.cache,mo(c,$n,v),v!==x.cache&&o_(c,[$n],d,!0))),ps(o,c,c.pendingProps.children,d),c.child;case 29:throw c.pendingProps}throw Error(s(156,c.tag))}function Ea(o){o.flags|=4}function G_(o,c,d,v,x){if((c=(o.mode&32)!==0)&&(c=!1),c){if(o.flags|=16777216,(x&335544128)===x)if(o.stateNode.complete)o.flags|=8192;else if(d5())o.flags|=8192;else throw Tl=lg,h_}else o.flags&=-16777217}function zR(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!t3(c))if(d5())o.flags|=8192;else throw Tl=lg,h_}function Cg(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?On():536870912,o.lanes|=c,gu|=c)}function Rd(o,c){if(!Ht)switch(o.tailMode){case"hidden":c=o.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?o.tail=null:d.sibling=null;break;case"collapsed":d=o.tail;for(var v=null;d!==null;)d.alternate!==null&&(v=d),d=d.sibling;v===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:v.sibling=null}}function pn(o){var c=o.alternate!==null&&o.alternate.child===o.child,d=0,v=0;if(c)for(var x=o.child;x!==null;)d|=x.lanes|x.childLanes,v|=x.subtreeFlags&65011712,v|=x.flags&65011712,x.return=o,x=x.sibling;else for(x=o.child;x!==null;)d|=x.lanes|x.childLanes,v|=x.subtreeFlags,v|=x.flags,x.return=o,x=x.sibling;return o.subtreeFlags|=v,o.childLanes=d,c}function G9(o,c,d){var v=c.pendingProps;switch(n_(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(c),null;case 1:return pn(c),null;case 3:return d=c.stateNode,v=null,o!==null&&(v=o.memoizedState.cache),c.memoizedState.cache!==v&&(c.flags|=2048),Sa($n),Se(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(o===null||o.child===null)&&(su(c)?Ea(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,r_())),pn(c),null;case 26:var x=c.type,S=c.memoizedState;return o===null?(Ea(c),S!==null?(pn(c),zR(c,S)):(pn(c),G_(c,x,null,v,d))):S?S!==o.memoizedState?(Ea(c),pn(c),zR(c,S)):(pn(c),c.flags&=-16777217):(o=o.memoizedProps,o!==v&&Ea(c),pn(c),G_(c,x,o,v,d)),null;case 27:if(Ke(c),d=X.current,x=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==v&&Ea(c);else{if(!v){if(c.stateNode===null)throw Error(s(166));return pn(c),null}o=Q.current,su(c)?b4(c):(o=W5(x,v,d),c.stateNode=o,Ea(c))}return pn(c),null;case 5:if(Ke(c),x=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==v&&Ea(c);else{if(!v){if(c.stateNode===null)throw Error(s(166));return pn(c),null}if(S=Q.current,su(c))b4(c);else{var j=zg(X.current);switch(S){case 1:S=j.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:S=j.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":S=j.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":S=j.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":S=j.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof v.is=="string"?j.createElement("select",{is:v.is}):j.createElement("select"),v.multiple?S.multiple=!0:v.size&&(S.size=v.size);break;default:S=typeof v.is=="string"?j.createElement(x,{is:v.is}):j.createElement(x)}}S[ln]=c,S[Xt]=v;e:for(j=c.child;j!==null;){if(j.tag===5||j.tag===6)S.appendChild(j.stateNode);else if(j.tag!==4&&j.tag!==27&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===c)break e;for(;j.sibling===null;){if(j.return===null||j.return===c)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}c.stateNode=S;e:switch(ms(S,x,v),x){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}v&&Ea(c)}}return pn(c),G_(c,c.type,o===null?null:o.memoizedProps,c.pendingProps,d),null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==v&&Ea(c);else{if(typeof v!="string"&&c.stateNode===null)throw Error(s(166));if(o=X.current,su(c)){if(o=c.stateNode,d=c.memoizedProps,v=null,x=ds,x!==null)switch(x.tag){case 27:case 5:v=x.memoizedProps}o[ln]=c,o=!!(o.nodeValue===d||v!==null&&v.suppressHydrationWarning===!0||L5(o.nodeValue,d)),o||po(c,!0)}else o=zg(o).createTextNode(v),o[ln]=c,c.stateNode=o}return pn(c),null;case 31:if(d=c.memoizedState,o===null||o.memoizedState!==null){if(v=su(c),d!==null){if(o===null){if(!v)throw Error(s(318));if(o=c.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(s(557));o[ln]=c}else Cl(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;pn(c),o=!1}else d=r_(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=d),o=!0;if(!o)return c.flags&256?(xr(c),c):(xr(c),null);if((c.flags&128)!==0)throw Error(s(558))}return pn(c),null;case 13:if(v=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(x=su(c),v!==null&&v.dehydrated!==null){if(o===null){if(!x)throw Error(s(318));if(x=c.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(s(317));x[ln]=c}else Cl(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;pn(c),x=!1}else x=r_(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=x),x=!0;if(!x)return c.flags&256?(xr(c),c):(xr(c),null)}return xr(c),(c.flags&128)!==0?(c.lanes=d,c):(d=v!==null,o=o!==null&&o.memoizedState!==null,d&&(v=c.child,x=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(x=v.alternate.memoizedState.cachePool.pool),S=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(S=v.memoizedState.cachePool.pool),S!==x&&(v.flags|=2048)),d!==o&&d&&(c.child.flags|=8192),Cg(c,c.updateQueue),pn(c),null);case 4:return Se(),o===null&&gx(c.stateNode.containerInfo),pn(c),null;case 10:return Sa(c.type),pn(c),null;case 19:if(V(Mn),v=c.memoizedState,v===null)return pn(c),null;if(x=(c.flags&128)!==0,S=v.rendering,S===null)if(x)Rd(v,!1);else{if(An!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(S=dg(o),S!==null){for(c.flags|=128,Rd(v,!1),o=S.updateQueue,c.updateQueue=o,Cg(c,o),c.subtreeFlags=0,o=d,d=c.child;d!==null;)p4(d,o),d=d.sibling;return T(Mn,Mn.current&1|2),Ht&&xa(c,v.treeForkCount),c.child}o=o.sibling}v.tail!==null&&Je()>Tg&&(c.flags|=128,x=!0,Rd(v,!1),c.lanes=4194304)}else{if(!x)if(o=dg(S),o!==null){if(c.flags|=128,x=!0,o=o.updateQueue,c.updateQueue=o,Cg(c,o),Rd(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!Ht)return pn(c),null}else 2*Je()-v.renderingStartTime>Tg&&d!==536870912&&(c.flags|=128,x=!0,Rd(v,!1),c.lanes=4194304);v.isBackwards?(S.sibling=c.child,c.child=S):(o=v.last,o!==null?o.sibling=S:c.child=S,v.last=S)}return v.tail!==null?(o=v.tail,v.rendering=o,v.tail=o.sibling,v.renderingStartTime=Je(),o.sibling=null,d=Mn.current,T(Mn,x?d&1|2:d&1),Ht&&xa(c,v.treeForkCount),o):(pn(c),null);case 22:case 23:return xr(c),y_(),v=c.memoizedState!==null,o!==null?o.memoizedState!==null!==v&&(c.flags|=8192):v&&(c.flags|=8192),v?(d&536870912)!==0&&(c.flags&128)===0&&(pn(c),c.subtreeFlags&6&&(c.flags|=8192)):pn(c),d=c.updateQueue,d!==null&&Cg(c,d.retryQueue),d=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==d&&(c.flags|=2048),o!==null&&V(Al),null;case 24:return d=null,o!==null&&(d=o.memoizedState.cache),c.memoizedState.cache!==d&&(c.flags|=2048),Sa($n),pn(c),null;case 25:return null;case 30:return null}throw Error(s(156,c.tag))}function Y9(o,c){switch(n_(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return Sa($n),Se(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return Ke(c),null;case 31:if(c.memoizedState!==null){if(xr(c),c.alternate===null)throw Error(s(340));Cl()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 13:if(xr(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(s(340));Cl()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return V(Mn),null;case 4:return Se(),null;case 10:return Sa(c.type),null;case 22:case 23:return xr(c),y_(),o!==null&&V(Al),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return Sa($n),null;case 25:return null;default:return null}}function FR(o,c){switch(n_(c),c.tag){case 3:Sa($n),Se();break;case 26:case 27:case 5:Ke(c);break;case 4:Se();break;case 31:c.memoizedState!==null&&xr(c);break;case 13:xr(c);break;case 19:V(Mn);break;case 10:Sa(c.type);break;case 22:case 23:xr(c),y_(),o!==null&&V(Al);break;case 24:Sa($n)}}function Td(o,c){try{var d=c.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var x=v.next;d=x;do{if((d.tag&o)===o){v=void 0;var S=d.create,j=d.inst;v=S(),j.destroy=v}d=d.next}while(d!==x)}}catch(H){en(c,c.return,H)}}function xo(o,c,d){try{var v=c.updateQueue,x=v!==null?v.lastEffect:null;if(x!==null){var S=x.next;v=S;do{if((v.tag&o)===o){var j=v.inst,H=j.destroy;if(H!==void 0){j.destroy=void 0,x=c;var ee=d,ue=H;try{ue()}catch(me){en(x,ee,me)}}}v=v.next}while(v!==S)}}catch(me){en(c,c.return,me)}}function UR(o){var c=o.updateQueue;if(c!==null){var d=o.stateNode;try{O4(c,d)}catch(v){en(o,o.return,v)}}}function HR(o,c,d){d.props=Ml(o.type,o.memoizedProps),d.state=o.memoizedState;try{d.componentWillUnmount()}catch(v){en(o,c,v)}}function jd(o,c){try{var d=o.ref;if(d!==null){switch(o.tag){case 26:case 27:case 5:var v=o.stateNode;break;case 30:v=o.stateNode;break;default:v=o.stateNode}typeof d=="function"?o.refCleanup=d(v):d.current=v}}catch(x){en(o,c,x)}}function Bi(o,c){var d=o.ref,v=o.refCleanup;if(d!==null)if(typeof v=="function")try{v()}catch(x){en(o,c,x)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(x){en(o,c,x)}else d.current=null}function VR(o){var c=o.type,d=o.memoizedProps,v=o.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":d.autoFocus&&v.focus();break e;case"img":d.src?v.src=d.src:d.srcSet&&(v.srcset=d.srcSet)}}catch(x){en(o,o.return,x)}}function Y_(o,c,d){try{var v=o.stateNode;yF(v,o.type,d,c),v[Xt]=c}catch(x){en(o,o.return,x)}}function qR(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Ao(o.type)||o.tag===4}function Z_(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||qR(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Ao(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function J_(o,c,d){var v=o.tag;if(v===5||v===6)o=o.stateNode,c?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(o,c):(c=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,c.appendChild(o),d=d._reactRootContainer,d!=null||c.onclick!==null||(c.onclick=va));else if(v!==4&&(v===27&&Ao(o.type)&&(d=o.stateNode,c=null),o=o.child,o!==null))for(J_(o,c,d),o=o.sibling;o!==null;)J_(o,c,d),o=o.sibling}function Ng(o,c,d){var v=o.tag;if(v===5||v===6)o=o.stateNode,c?d.insertBefore(o,c):d.appendChild(o);else if(v!==4&&(v===27&&Ao(o.type)&&(d=o.stateNode),o=o.child,o!==null))for(Ng(o,c,d),o=o.sibling;o!==null;)Ng(o,c,d),o=o.sibling}function KR(o){var c=o.stateNode,d=o.memoizedProps;try{for(var v=o.type,x=c.attributes;x.length;)c.removeAttributeNode(x[0]);ms(c,v,d),c[ln]=o,c[Xt]=d}catch(S){en(o,o.return,S)}}var Aa=!1,Un=!1,X_=!1,WR=typeof WeakSet=="function"?WeakSet:Set,is=null;function Z9(o,c){if(o=o.containerInfo,bx=Wg,o=i4(o),q1(o)){if("selectionStart"in o)var d={start:o.selectionStart,end:o.selectionEnd};else e:{d=(d=o.ownerDocument)&&d.defaultView||window;var v=d.getSelection&&d.getSelection();if(v&&v.rangeCount!==0){d=v.anchorNode;var x=v.anchorOffset,S=v.focusNode;v=v.focusOffset;try{d.nodeType,S.nodeType}catch{d=null;break e}var j=0,H=-1,ee=-1,ue=0,me=0,ye=o,de=null;t:for(;;){for(var pe;ye!==d||x!==0&&ye.nodeType!==3||(H=j+x),ye!==S||v!==0&&ye.nodeType!==3||(ee=j+v),ye.nodeType===3&&(j+=ye.nodeValue.length),(pe=ye.firstChild)!==null;)de=ye,ye=pe;for(;;){if(ye===o)break t;if(de===d&&++ue===x&&(H=j),de===S&&++me===v&&(ee=j),(pe=ye.nextSibling)!==null)break;ye=de,de=ye.parentNode}ye=pe}d=H===-1||ee===-1?null:{start:H,end:ee}}else d=null}d=d||{start:0,end:0}}else d=null;for(_x={focusedElem:o,selectionRange:d},Wg=!1,is=c;is!==null;)if(c=is,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,is=o;else for(;is!==null;){switch(c=is,S=c.alternate,o=c.flags,c.tag){case 0:if((o&4)!==0&&(o=c.updateQueue,o=o!==null?o.events:null,o!==null))for(d=0;d<o.length;d++)x=o[d],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&S!==null){o=void 0,d=c,x=S.memoizedProps,S=S.memoizedState,v=d.stateNode;try{var et=Ml(d.type,x);o=v.getSnapshotBeforeUpdate(et,S),v.__reactInternalSnapshotBeforeUpdate=o}catch(dt){en(d,d.return,dt)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,d=o.nodeType,d===9)Sx(o);else if(d===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Sx(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(s(163))}if(o=c.sibling,o!==null){o.return=c.return,is=o;break}is=c.return}}function GR(o,c,d){var v=d.flags;switch(d.tag){case 0:case 11:case 15:Ta(o,d),v&4&&Td(5,d);break;case 1:if(Ta(o,d),v&4)if(o=d.stateNode,c===null)try{o.componentDidMount()}catch(j){en(d,d.return,j)}else{var x=Ml(d.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(x,c,o.__reactInternalSnapshotBeforeUpdate)}catch(j){en(d,d.return,j)}}v&64&&UR(d),v&512&&jd(d,d.return);break;case 3:if(Ta(o,d),v&64&&(o=d.updateQueue,o!==null)){if(c=null,d.child!==null)switch(d.child.tag){case 27:case 5:c=d.child.stateNode;break;case 1:c=d.child.stateNode}try{O4(o,c)}catch(j){en(d,d.return,j)}}break;case 27:c===null&&v&4&&KR(d);case 26:case 5:Ta(o,d),c===null&&v&4&&VR(d),v&512&&jd(d,d.return);break;case 12:Ta(o,d);break;case 31:Ta(o,d),v&4&&JR(o,d);break;case 13:Ta(o,d),v&4&&XR(o,d),v&64&&(o=d.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(d=iF.bind(null,d),CF(o,d))));break;case 22:if(v=d.memoizedState!==null||Aa,!v){c=c!==null&&c.memoizedState!==null||Un,x=Aa;var S=Un;Aa=v,(Un=c)&&!S?ja(o,d,(d.subtreeFlags&8772)!==0):Ta(o,d),Aa=x,Un=S}break;case 30:break;default:Ta(o,d)}}function YR(o){var c=o.alternate;c!==null&&(o.alternate=null,YR(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&A1(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var yn=null,Qs=!1;function Ra(o,c,d){for(d=d.child;d!==null;)ZR(o,c,d),d=d.sibling}function ZR(o,c,d){if(fe&&typeof fe.onCommitFiberUnmount=="function")try{fe.onCommitFiberUnmount(le,d)}catch{}switch(d.tag){case 26:Un||Bi(d,c),Ra(o,c,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:Un||Bi(d,c);var v=yn,x=Qs;Ao(d.type)&&(yn=d.stateNode,Qs=!1),Ra(o,c,d),zd(d.stateNode),yn=v,Qs=x;break;case 5:Un||Bi(d,c);case 6:if(v=yn,x=Qs,yn=null,Ra(o,c,d),yn=v,Qs=x,yn!==null)if(Qs)try{(yn.nodeType===9?yn.body:yn.nodeName==="HTML"?yn.ownerDocument.body:yn).removeChild(d.stateNode)}catch(S){en(d,c,S)}else try{yn.removeChild(d.stateNode)}catch(S){en(d,c,S)}break;case 18:yn!==null&&(Qs?(o=yn,U5(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,d.stateNode),ku(o)):U5(yn,d.stateNode));break;case 4:v=yn,x=Qs,yn=d.stateNode.containerInfo,Qs=!0,Ra(o,c,d),yn=v,Qs=x;break;case 0:case 11:case 14:case 15:xo(2,d,c),Un||xo(4,d,c),Ra(o,c,d);break;case 1:Un||(Bi(d,c),v=d.stateNode,typeof v.componentWillUnmount=="function"&&HR(d,c,v)),Ra(o,c,d);break;case 21:Ra(o,c,d);break;case 22:Un=(v=Un)||d.memoizedState!==null,Ra(o,c,d),Un=v;break;default:Ra(o,c,d)}}function JR(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{ku(o)}catch(d){en(c,c.return,d)}}}function XR(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{ku(o)}catch(d){en(c,c.return,d)}}function J9(o){switch(o.tag){case 31:case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new WR),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new WR),c;default:throw Error(s(435,o.tag))}}function Eg(o,c){var d=J9(o);c.forEach(function(v){if(!d.has(v)){d.add(v);var x=aF.bind(null,o,v);v.then(x,x)}})}function er(o,c){var d=c.deletions;if(d!==null)for(var v=0;v<d.length;v++){var x=d[v],S=o,j=c,H=j;e:for(;H!==null;){switch(H.tag){case 27:if(Ao(H.type)){yn=H.stateNode,Qs=!1;break e}break;case 5:yn=H.stateNode,Qs=!1;break e;case 3:case 4:yn=H.stateNode.containerInfo,Qs=!0;break e}H=H.return}if(yn===null)throw Error(s(160));ZR(S,j,x),yn=null,Qs=!1,S=x.alternate,S!==null&&(S.return=null),x.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)QR(c,o),c=c.sibling}var _i=null;function QR(o,c){var d=o.alternate,v=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:er(c,o),tr(o),v&4&&(xo(3,o,o.return),Td(3,o),xo(5,o,o.return));break;case 1:er(c,o),tr(o),v&512&&(Un||d===null||Bi(d,d.return)),v&64&&Aa&&(o=o.updateQueue,o!==null&&(v=o.callbacks,v!==null&&(d=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=d===null?v:d.concat(v))));break;case 26:var x=_i;if(er(c,o),tr(o),v&512&&(Un||d===null||Bi(d,d.return)),v&4){var S=d!==null?d.memoizedState:null;if(v=o.memoizedState,d===null)if(v===null)if(o.stateNode===null){e:{v=o.type,d=o.memoizedProps,x=x.ownerDocument||x;t:switch(v){case"title":S=x.getElementsByTagName("title")[0],(!S||S[rd]||S[ln]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=x.createElement(v),x.head.insertBefore(S,x.querySelector("head > title"))),ms(S,v,d),S[ln]=o,rs(S),v=S;break e;case"link":var j=Q5("link","href",x).get(v+(d.href||""));if(j){for(var H=0;H<j.length;H++)if(S=j[H],S.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&S.getAttribute("rel")===(d.rel==null?null:d.rel)&&S.getAttribute("title")===(d.title==null?null:d.title)&&S.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){j.splice(H,1);break t}}S=x.createElement(v),ms(S,v,d),x.head.appendChild(S);break;case"meta":if(j=Q5("meta","content",x).get(v+(d.content||""))){for(H=0;H<j.length;H++)if(S=j[H],S.getAttribute("content")===(d.content==null?null:""+d.content)&&S.getAttribute("name")===(d.name==null?null:d.name)&&S.getAttribute("property")===(d.property==null?null:d.property)&&S.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&S.getAttribute("charset")===(d.charSet==null?null:d.charSet)){j.splice(H,1);break t}}S=x.createElement(v),ms(S,v,d),x.head.appendChild(S);break;default:throw Error(s(468,v))}S[ln]=o,rs(S),v=S}o.stateNode=v}else e3(x,o.type,o.stateNode);else o.stateNode=X5(x,v,o.memoizedProps);else S!==v?(S===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):S.count--,v===null?e3(x,o.type,o.stateNode):X5(x,v,o.memoizedProps)):v===null&&o.stateNode!==null&&Y_(o,o.memoizedProps,d.memoizedProps)}break;case 27:er(c,o),tr(o),v&512&&(Un||d===null||Bi(d,d.return)),d!==null&&v&4&&Y_(o,o.memoizedProps,d.memoizedProps);break;case 5:if(er(c,o),tr(o),v&512&&(Un||d===null||Bi(d,d.return)),o.flags&32){x=o.stateNode;try{Wc(x,"")}catch(et){en(o,o.return,et)}}v&4&&o.stateNode!=null&&(x=o.memoizedProps,Y_(o,x,d!==null?d.memoizedProps:x)),v&1024&&(X_=!0);break;case 6:if(er(c,o),tr(o),v&4){if(o.stateNode===null)throw Error(s(162));v=o.memoizedProps,d=o.stateNode;try{d.nodeValue=v}catch(et){en(o,o.return,et)}}break;case 3:if(Hg=null,x=_i,_i=Fg(c.containerInfo),er(c,o),_i=x,tr(o),v&4&&d!==null&&d.memoizedState.isDehydrated)try{ku(c.containerInfo)}catch(et){en(o,o.return,et)}X_&&(X_=!1,e5(o));break;case 4:v=_i,_i=Fg(o.stateNode.containerInfo),er(c,o),tr(o),_i=v;break;case 12:er(c,o),tr(o);break;case 31:er(c,o),tr(o),v&4&&(v=o.updateQueue,v!==null&&(o.updateQueue=null,Eg(o,v)));break;case 13:er(c,o),tr(o),o.child.flags&8192&&o.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(Rg=Je()),v&4&&(v=o.updateQueue,v!==null&&(o.updateQueue=null,Eg(o,v)));break;case 22:x=o.memoizedState!==null;var ee=d!==null&&d.memoizedState!==null,ue=Aa,me=Un;if(Aa=ue||x,Un=me||ee,er(c,o),Un=me,Aa=ue,tr(o),v&8192)e:for(c=o.stateNode,c._visibility=x?c._visibility&-2:c._visibility|1,x&&(d===null||ee||Aa||Un||Il(o)),d=null,c=o;;){if(c.tag===5||c.tag===26){if(d===null){ee=d=c;try{if(S=ee.stateNode,x)j=S.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{H=ee.stateNode;var ye=ee.memoizedProps.style,de=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;H.style.display=de==null||typeof de=="boolean"?"":(""+de).trim()}}catch(et){en(ee,ee.return,et)}}}else if(c.tag===6){if(d===null){ee=c;try{ee.stateNode.nodeValue=x?"":ee.memoizedProps}catch(et){en(ee,ee.return,et)}}}else if(c.tag===18){if(d===null){ee=c;try{var pe=ee.stateNode;x?H5(pe,!0):H5(ee.stateNode,!1)}catch(et){en(ee,ee.return,et)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break e;for(;c.sibling===null;){if(c.return===null||c.return===o)break e;d===c&&(d=null),c=c.return}d===c&&(d=null),c.sibling.return=c.return,c=c.sibling}v&4&&(v=o.updateQueue,v!==null&&(d=v.retryQueue,d!==null&&(v.retryQueue=null,Eg(o,d))));break;case 19:er(c,o),tr(o),v&4&&(v=o.updateQueue,v!==null&&(o.updateQueue=null,Eg(o,v)));break;case 30:break;case 21:break;default:er(c,o),tr(o)}}function tr(o){var c=o.flags;if(c&2){try{for(var d,v=o.return;v!==null;){if(qR(v)){d=v;break}v=v.return}if(d==null)throw Error(s(160));switch(d.tag){case 27:var x=d.stateNode,S=Z_(o);Ng(o,S,x);break;case 5:var j=d.stateNode;d.flags&32&&(Wc(j,""),d.flags&=-33);var H=Z_(o);Ng(o,H,j);break;case 3:case 4:var ee=d.stateNode.containerInfo,ue=Z_(o);J_(o,ue,ee);break;default:throw Error(s(161))}}catch(me){en(o,o.return,me)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function e5(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;e5(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function Ta(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)GR(o,c.alternate,c),c=c.sibling}function Il(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:xo(4,c,c.return),Il(c);break;case 1:Bi(c,c.return);var d=c.stateNode;typeof d.componentWillUnmount=="function"&&HR(c,c.return,d),Il(c);break;case 27:zd(c.stateNode);case 26:case 5:Bi(c,c.return),Il(c);break;case 22:c.memoizedState===null&&Il(c);break;case 30:Il(c);break;default:Il(c)}o=o.sibling}}function ja(o,c,d){for(d=d&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var v=c.alternate,x=o,S=c,j=S.flags;switch(S.tag){case 0:case 11:case 15:ja(x,S,d),Td(4,S);break;case 1:if(ja(x,S,d),v=S,x=v.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(ue){en(v,v.return,ue)}if(v=S,x=v.updateQueue,x!==null){var H=v.stateNode;try{var ee=x.shared.hiddenCallbacks;if(ee!==null)for(x.shared.hiddenCallbacks=null,x=0;x<ee.length;x++)j4(ee[x],H)}catch(ue){en(v,v.return,ue)}}d&&j&64&&UR(S),jd(S,S.return);break;case 27:KR(S);case 26:case 5:ja(x,S,d),d&&v===null&&j&4&&VR(S),jd(S,S.return);break;case 12:ja(x,S,d);break;case 31:ja(x,S,d),d&&j&4&&JR(x,S);break;case 13:ja(x,S,d),d&&j&4&&XR(x,S);break;case 22:S.memoizedState===null&&ja(x,S,d),jd(S,S.return);break;case 30:break;default:ja(x,S,d)}c=c.sibling}}function Q_(o,c){var d=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==d&&(o!=null&&o.refCount++,d!=null&&yd(d))}function ex(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&yd(o))}function xi(o,c,d,v){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)t5(o,c,d,v),c=c.sibling}function t5(o,c,d,v){var x=c.flags;switch(c.tag){case 0:case 11:case 15:xi(o,c,d,v),x&2048&&Td(9,c);break;case 1:xi(o,c,d,v);break;case 3:xi(o,c,d,v),x&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&yd(o)));break;case 12:if(x&2048){xi(o,c,d,v),o=c.stateNode;try{var S=c.memoizedProps,j=S.id,H=S.onPostCommit;typeof H=="function"&&H(j,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(ee){en(c,c.return,ee)}}else xi(o,c,d,v);break;case 31:xi(o,c,d,v);break;case 13:xi(o,c,d,v);break;case 23:break;case 22:S=c.stateNode,j=c.alternate,c.memoizedState!==null?S._visibility&2?xi(o,c,d,v):Od(o,c):S._visibility&2?xi(o,c,d,v):(S._visibility|=2,fu(o,c,d,v,(c.subtreeFlags&10256)!==0||!1)),x&2048&&Q_(j,c);break;case 24:xi(o,c,d,v),x&2048&&ex(c.alternate,c);break;default:xi(o,c,d,v)}}function fu(o,c,d,v,x){for(x=x&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var S=o,j=c,H=d,ee=v,ue=j.flags;switch(j.tag){case 0:case 11:case 15:fu(S,j,H,ee,x),Td(8,j);break;case 23:break;case 22:var me=j.stateNode;j.memoizedState!==null?me._visibility&2?fu(S,j,H,ee,x):Od(S,j):(me._visibility|=2,fu(S,j,H,ee,x)),x&&ue&2048&&Q_(j.alternate,j);break;case 24:fu(S,j,H,ee,x),x&&ue&2048&&ex(j.alternate,j);break;default:fu(S,j,H,ee,x)}c=c.sibling}}function Od(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var d=o,v=c,x=v.flags;switch(v.tag){case 22:Od(d,v),x&2048&&Q_(v.alternate,v);break;case 24:Od(d,v),x&2048&&ex(v.alternate,v);break;default:Od(d,v)}c=c.sibling}}var Md=8192;function pu(o,c,d){if(o.subtreeFlags&Md)for(o=o.child;o!==null;)n5(o,c,d),o=o.sibling}function n5(o,c,d){switch(o.tag){case 26:pu(o,c,d),o.flags&Md&&o.memoizedState!==null&&PF(d,_i,o.memoizedState,o.memoizedProps);break;case 5:pu(o,c,d);break;case 3:case 4:var v=_i;_i=Fg(o.stateNode.containerInfo),pu(o,c,d),_i=v;break;case 22:o.memoizedState===null&&(v=o.alternate,v!==null&&v.memoizedState!==null?(v=Md,Md=16777216,pu(o,c,d),Md=v):pu(o,c,d));break;default:pu(o,c,d)}}function s5(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function Id(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var d=0;d<c.length;d++){var v=c[d];is=v,i5(v,o)}s5(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)r5(o),o=o.sibling}function r5(o){switch(o.tag){case 0:case 11:case 15:Id(o),o.flags&2048&&xo(9,o,o.return);break;case 3:Id(o);break;case 12:Id(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&2&&(o.return===null||o.return.tag!==13)?(c._visibility&=-3,Ag(o)):Id(o);break;default:Id(o)}}function Ag(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var d=0;d<c.length;d++){var v=c[d];is=v,i5(v,o)}s5(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:xo(8,c,c.return),Ag(c);break;case 22:d=c.stateNode,d._visibility&2&&(d._visibility&=-3,Ag(c));break;default:Ag(c)}o=o.sibling}}function i5(o,c){for(;is!==null;){var d=is;switch(d.tag){case 0:case 11:case 15:xo(8,d,c);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var v=d.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:yd(d.memoizedState.cache)}if(v=d.child,v!==null)v.return=d,is=v;else e:for(d=o;is!==null;){v=is;var x=v.sibling,S=v.return;if(YR(v),v===d){is=null;break e}if(x!==null){x.return=S,is=x;break e}is=S}}}var X9={getCacheForType:function(o){var c=fs($n),d=c.data.get(o);return d===void 0&&(d=o(),c.data.set(o,d)),d},cacheSignal:function(){return fs($n).controller.signal}},Q9=typeof WeakMap=="function"?WeakMap:Map,Yt=0,cn=null,Bt=null,Ft=0,Qt=0,wr=null,wo=!1,mu=!1,tx=!1,Oa=0,An=0,So=0,Dl=0,nx=0,Sr=0,gu=0,Dd=null,nr=null,sx=!1,Rg=0,a5=0,Tg=1/0,jg=null,ko=null,Gn=0,Co=null,yu=null,Ma=0,rx=0,ix=null,o5=null,Ld=0,ax=null;function kr(){return(Yt&2)!==0&&Ft!==0?Ft&-Ft:B.T!==null?dx():qr()}function l5(){if(Sr===0)if((Ft&536870912)===0||Ht){var o=$e;$e<<=1,($e&3932160)===0&&($e=262144),Sr=o}else Sr=536870912;return o=_r.current,o!==null&&(o.flags|=32),Sr}function sr(o,c,d){(o===cn&&(Qt===2||Qt===9)||o.cancelPendingCommit!==null)&&(vu(o,0),No(o,Ft,Sr,!1)),Hr(o,d),((Yt&2)===0||o!==cn)&&(o===cn&&((Yt&2)===0&&(Dl|=d),An===4&&No(o,Ft,Sr,!1)),$i(o))}function c5(o,c,d){if((Yt&6)!==0)throw Error(s(327));var v=!d&&(c&127)===0&&(c&o.expiredLanes)===0||Lt(o,c),x=v?nF(o,c):lx(o,c,!0),S=v;do{if(x===0){mu&&!v&&No(o,c,0,!1);break}else{if(d=o.current.alternate,S&&!eF(d)){x=lx(o,c,!1),S=!1;continue}if(x===2){if(S=c,o.errorRecoveryDisabledLanes&S)var j=0;else j=o.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){c=j;e:{var H=o;x=Dd;var ee=H.current.memoizedState.isDehydrated;if(ee&&(vu(H,j).flags|=256),j=lx(H,j,!1),j!==2){if(tx&&!ee){H.errorRecoveryDisabledLanes|=S,Dl|=S,x=4;break e}S=nr,nr=x,S!==null&&(nr===null?nr=S:nr.push.apply(nr,S))}x=j}if(S=!1,x!==2)continue}}if(x===1){vu(o,0),No(o,c,0,!0);break}e:{switch(v=o,S=x,S){case 0:case 1:throw Error(s(345));case 4:if((c&4194048)!==c)break;case 6:No(v,c,Sr,!wo);break e;case 2:nr=null;break;case 3:case 5:break;default:throw Error(s(329))}if((c&62914560)===c&&(x=Rg+300-Je(),10<x)){if(No(v,c,Sr,!wo),wt(v,0,!0)!==0)break e;Ma=c,v.timeoutHandle=z5(u5.bind(null,v,d,nr,jg,sx,c,Sr,Dl,gu,wo,S,"Throttled",-0,0),x);break e}u5(v,d,nr,jg,sx,c,Sr,Dl,gu,wo,S,null,-0,0)}}break}while(!0);$i(o)}function u5(o,c,d,v,x,S,j,H,ee,ue,me,ye,de,pe){if(o.timeoutHandle=-1,ye=c.subtreeFlags,ye&8192||(ye&16785408)===16785408){ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:va},n5(c,S,ye);var et=(S&62914560)===S?Rg-Je():(S&4194048)===S?a5-Je():0;if(et=BF(ye,et),et!==null){Ma=S,o.cancelPendingCommit=et(v5.bind(null,o,c,S,d,v,x,j,H,ee,me,ye,null,de,pe)),No(o,S,j,!ue);return}}v5(o,c,S,d,v,x,j,H,ee)}function eF(o){for(var c=o;;){var d=c.tag;if((d===0||d===11||d===15)&&c.flags&16384&&(d=c.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var v=0;v<d.length;v++){var x=d[v],S=x.getSnapshot;x=x.value;try{if(!vr(S(),x))return!1}catch{return!1}}if(d=c.child,c.subtreeFlags&16384&&d!==null)d.return=c,c=d;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function No(o,c,d,v){c&=~nx,c&=~Dl,o.suspendedLanes|=c,o.pingedLanes&=~c,v&&(o.warmLanes|=c),v=o.expirationTimes;for(var x=c;0<x;){var S=31-je(x),j=1<<S;v[S]=-1,x&=~j}d!==0&&Qe(o,d,c)}function Og(){return(Yt&6)===0?(Pd(0),!1):!0}function ox(){if(Bt!==null){if(Qt===0)var o=Bt.return;else o=Bt,wa=Nl=null,S_(o),lu=null,bd=0,o=Bt;for(;o!==null;)FR(o.alternate,o),o=o.return;Bt=null}}function vu(o,c){var d=o.timeoutHandle;d!==-1&&(o.timeoutHandle=-1,_F(d)),d=o.cancelPendingCommit,d!==null&&(o.cancelPendingCommit=null,d()),Ma=0,ox(),cn=o,Bt=d=_a(o.current,null),Ft=c,Qt=0,wr=null,wo=!1,mu=Lt(o,c),tx=!1,gu=Sr=nx=Dl=So=An=0,nr=Dd=null,sx=!1,(c&8)!==0&&(c|=c&32);var v=o.entangledLanes;if(v!==0)for(o=o.entanglements,v&=c;0<v;){var x=31-je(v),S=1<<x;c|=o[x],v&=~S}return Oa=c,Qm(),d}function h5(o,c){Nt=null,B.H=Ed,c===ou||c===og?(c=E4(),Qt=3):c===h_?(c=E4(),Qt=4):Qt=c===$_?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,wr=c,Bt===null&&(An=1,xg(o,Yr(c,o.current)))}function d5(){var o=_r.current;return o===null?!0:(Ft&4194048)===Ft?Qr===null:(Ft&62914560)===Ft||(Ft&536870912)!==0?o===Qr:!1}function f5(){var o=B.H;return B.H=Ed,o===null?Ed:o}function p5(){var o=B.A;return B.A=X9,o}function Mg(){An=4,wo||(Ft&4194048)!==Ft&&_r.current!==null||(mu=!0),(So&134217727)===0&&(Dl&134217727)===0||cn===null||No(cn,Ft,Sr,!1)}function lx(o,c,d){var v=Yt;Yt|=2;var x=f5(),S=p5();(cn!==o||Ft!==c)&&(jg=null,vu(o,c)),c=!1;var j=An;e:do try{if(Qt!==0&&Bt!==null){var H=Bt,ee=wr;switch(Qt){case 8:ox(),j=6;break e;case 3:case 2:case 9:case 6:_r.current===null&&(c=!0);var ue=Qt;if(Qt=0,wr=null,bu(o,H,ee,ue),d&&mu){j=0;break e}break;default:ue=Qt,Qt=0,wr=null,bu(o,H,ee,ue)}}tF(),j=An;break}catch(me){h5(o,me)}while(!0);return c&&o.shellSuspendCounter++,wa=Nl=null,Yt=v,B.H=x,B.A=S,Bt===null&&(cn=null,Ft=0,Qm()),j}function tF(){for(;Bt!==null;)m5(Bt)}function nF(o,c){var d=Yt;Yt|=2;var v=f5(),x=p5();cn!==o||Ft!==c?(jg=null,Tg=Je()+500,vu(o,c)):mu=Lt(o,c);e:do try{if(Qt!==0&&Bt!==null){c=Bt;var S=wr;t:switch(Qt){case 1:Qt=0,wr=null,bu(o,c,S,1);break;case 2:case 9:if(C4(S)){Qt=0,wr=null,g5(c);break}c=function(){Qt!==2&&Qt!==9||cn!==o||(Qt=7),$i(o)},S.then(c,c);break e;case 3:Qt=7;break e;case 4:Qt=5;break e;case 7:C4(S)?(Qt=0,wr=null,g5(c)):(Qt=0,wr=null,bu(o,c,S,7));break;case 5:var j=null;switch(Bt.tag){case 26:j=Bt.memoizedState;case 5:case 27:var H=Bt;if(j?t3(j):H.stateNode.complete){Qt=0,wr=null;var ee=H.sibling;if(ee!==null)Bt=ee;else{var ue=H.return;ue!==null?(Bt=ue,Ig(ue)):Bt=null}break t}}Qt=0,wr=null,bu(o,c,S,5);break;case 6:Qt=0,wr=null,bu(o,c,S,6);break;case 8:ox(),An=6;break e;default:throw Error(s(462))}}sF();break}catch(me){h5(o,me)}while(!0);return wa=Nl=null,B.H=v,B.A=x,Yt=d,Bt!==null?0:(cn=null,Ft=0,Qm(),An)}function sF(){for(;Bt!==null&&!ze();)m5(Bt)}function m5(o){var c=$R(o.alternate,o,Oa);o.memoizedProps=o.pendingProps,c===null?Ig(o):Bt=c}function g5(o){var c=o,d=c.alternate;switch(c.tag){case 15:case 0:c=MR(d,c,c.pendingProps,c.type,void 0,Ft);break;case 11:c=MR(d,c,c.pendingProps,c.type.render,c.ref,Ft);break;case 5:S_(c);default:FR(d,c),c=Bt=p4(c,Oa),c=$R(d,c,Oa)}o.memoizedProps=o.pendingProps,c===null?Ig(o):Bt=c}function bu(o,c,d,v){wa=Nl=null,S_(c),lu=null,bd=0;var x=c.return;try{if(q9(o,x,c,d,Ft)){An=1,xg(o,Yr(d,o.current)),Bt=null;return}}catch(S){if(x!==null)throw Bt=x,S;An=1,xg(o,Yr(d,o.current)),Bt=null;return}c.flags&32768?(Ht||v===1?o=!0:mu||(Ft&536870912)!==0?o=!1:(wo=o=!0,(v===2||v===9||v===3||v===6)&&(v=_r.current,v!==null&&v.tag===13&&(v.flags|=16384))),y5(c,o)):Ig(c)}function Ig(o){var c=o;do{if((c.flags&32768)!==0){y5(c,wo);return}o=c.return;var d=G9(c.alternate,c,Oa);if(d!==null){Bt=d;return}if(c=c.sibling,c!==null){Bt=c;return}Bt=c=o}while(c!==null);An===0&&(An=5)}function y5(o,c){do{var d=Y9(o.alternate,o);if(d!==null){d.flags&=32767,Bt=d;return}if(d=o.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!c&&(o=o.sibling,o!==null)){Bt=o;return}Bt=o=d}while(o!==null);An=6,Bt=null}function v5(o,c,d,v,x,S,j,H,ee){o.cancelPendingCommit=null;do Dg();while(Gn!==0);if((Yt&6)!==0)throw Error(s(327));if(c!==null){if(c===o.current)throw Error(s(177));if(S=c.lanes|c.childLanes,S|=Z1,Ve(o,d,S,j,H,ee),o===cn&&(Bt=cn=null,Ft=0),yu=c,Co=o,Ma=d,rx=S,ix=x,o5=v,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,oF(Ye,function(){return S5(),null})):(o.callbackNode=null,o.callbackPriority=0),v=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||v){v=B.T,B.T=null,x=J.p,J.p=2,j=Yt,Yt|=4;try{Z9(o,c,d)}finally{Yt=j,J.p=x,B.T=v}}Gn=1,b5(),_5(),x5()}}function b5(){if(Gn===1){Gn=0;var o=Co,c=yu,d=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||d){d=B.T,B.T=null;var v=J.p;J.p=2;var x=Yt;Yt|=4;try{QR(c,o);var S=_x,j=i4(o.containerInfo),H=S.focusedElem,ee=S.selectionRange;if(j!==H&&H&&H.ownerDocument&&r4(H.ownerDocument.documentElement,H)){if(ee!==null&&q1(H)){var ue=ee.start,me=ee.end;if(me===void 0&&(me=ue),"selectionStart"in H)H.selectionStart=ue,H.selectionEnd=Math.min(me,H.value.length);else{var ye=H.ownerDocument||document,de=ye&&ye.defaultView||window;if(de.getSelection){var pe=de.getSelection(),et=H.textContent.length,dt=Math.min(ee.start,et),an=ee.end===void 0?dt:Math.min(ee.end,et);!pe.extend&&dt>an&&(j=an,an=dt,dt=j);var ie=s4(H,dt),ne=s4(H,an);if(ie&&ne&&(pe.rangeCount!==1||pe.anchorNode!==ie.node||pe.anchorOffset!==ie.offset||pe.focusNode!==ne.node||pe.focusOffset!==ne.offset)){var ce=ye.createRange();ce.setStart(ie.node,ie.offset),pe.removeAllRanges(),dt>an?(pe.addRange(ce),pe.extend(ne.node,ne.offset)):(ce.setEnd(ne.node,ne.offset),pe.addRange(ce))}}}}for(ye=[],pe=H;pe=pe.parentNode;)pe.nodeType===1&&ye.push({element:pe,left:pe.scrollLeft,top:pe.scrollTop});for(typeof H.focus=="function"&&H.focus(),H=0;H<ye.length;H++){var ge=ye[H];ge.element.scrollLeft=ge.left,ge.element.scrollTop=ge.top}}Wg=!!bx,_x=bx=null}finally{Yt=x,J.p=v,B.T=d}}o.current=c,Gn=2}}function _5(){if(Gn===2){Gn=0;var o=Co,c=yu,d=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||d){d=B.T,B.T=null;var v=J.p;J.p=2;var x=Yt;Yt|=4;try{GR(o,c.alternate,c)}finally{Yt=x,J.p=v,B.T=d}}Gn=3}}function x5(){if(Gn===4||Gn===3){Gn=0,De();var o=Co,c=yu,d=Ma,v=o5;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Gn=5:(Gn=0,yu=Co=null,w5(o,o.pendingLanes));var x=o.pendingLanes;if(x===0&&(ko=null),Di(d),c=c.stateNode,fe&&typeof fe.onCommitFiberRoot=="function")try{fe.onCommitFiberRoot(le,c,void 0,(c.current.flags&128)===128)}catch{}if(v!==null){c=B.T,x=J.p,J.p=2,B.T=null;try{for(var S=o.onRecoverableError,j=0;j<v.length;j++){var H=v[j];S(H.value,{componentStack:H.stack})}}finally{B.T=c,J.p=x}}(Ma&3)!==0&&Dg(),$i(o),x=o.pendingLanes,(d&261930)!==0&&(x&42)!==0?o===ax?Ld++:(Ld=0,ax=o):Ld=0,Pd(0)}}function w5(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,yd(c)))}function Dg(){return b5(),_5(),x5(),S5()}function S5(){if(Gn!==5)return!1;var o=Co,c=rx;rx=0;var d=Di(Ma),v=B.T,x=J.p;try{J.p=32>d?32:d,B.T=null,d=ix,ix=null;var S=Co,j=Ma;if(Gn=0,yu=Co=null,Ma=0,(Yt&6)!==0)throw Error(s(331));var H=Yt;if(Yt|=4,r5(S.current),t5(S,S.current,j,d),Yt=H,Pd(0,!1),fe&&typeof fe.onPostCommitFiberRoot=="function")try{fe.onPostCommitFiberRoot(le,S)}catch{}return!0}finally{J.p=x,B.T=v,w5(o,c)}}function k5(o,c,d){c=Yr(d,c),c=B_(o.stateNode,c,2),o=vo(o,c,2),o!==null&&(Hr(o,2),$i(o))}function en(o,c,d){if(o.tag===3)k5(o,o,d);else for(;c!==null;){if(c.tag===3){k5(c,o,d);break}else if(c.tag===1){var v=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(ko===null||!ko.has(v))){o=Yr(d,o),d=CR(2),v=vo(c,d,2),v!==null&&(NR(d,v,c,o),Hr(v,2),$i(v));break}}c=c.return}}function cx(o,c,d){var v=o.pingCache;if(v===null){v=o.pingCache=new Q9;var x=new Set;v.set(c,x)}else x=v.get(c),x===void 0&&(x=new Set,v.set(c,x));x.has(d)||(tx=!0,x.add(d),o=rF.bind(null,o,c,d),c.then(o,o))}function rF(o,c,d){var v=o.pingCache;v!==null&&v.delete(c),o.pingedLanes|=o.suspendedLanes&d,o.warmLanes&=~d,cn===o&&(Ft&d)===d&&(An===4||An===3&&(Ft&62914560)===Ft&&300>Je()-Rg?(Yt&2)===0&&vu(o,0):nx|=d,gu===Ft&&(gu=0)),$i(o)}function C5(o,c){c===0&&(c=On()),o=Sl(o,c),o!==null&&(Hr(o,c),$i(o))}function iF(o){var c=o.memoizedState,d=0;c!==null&&(d=c.retryLane),C5(o,d)}function aF(o,c){var d=0;switch(o.tag){case 31:case 13:var v=o.stateNode,x=o.memoizedState;x!==null&&(d=x.retryLane);break;case 19:v=o.stateNode;break;case 22:v=o.stateNode._retryCache;break;default:throw Error(s(314))}v!==null&&v.delete(c),C5(o,d)}function oF(o,c){return At(o,c)}var Lg=null,_u=null,ux=!1,Pg=!1,hx=!1,Eo=0;function $i(o){o!==_u&&o.next===null&&(_u===null?Lg=_u=o:_u=_u.next=o),Pg=!0,ux||(ux=!0,cF())}function Pd(o,c){if(!hx&&Pg){hx=!0;do for(var d=!1,v=Lg;v!==null;){if(o!==0){var x=v.pendingLanes;if(x===0)var S=0;else{var j=v.suspendedLanes,H=v.pingedLanes;S=(1<<31-je(42|o)+1)-1,S&=x&~(j&~H),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(d=!0,R5(v,S))}else S=Ft,S=wt(v,v===cn?S:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(S&3)===0||Lt(v,S)||(d=!0,R5(v,S));v=v.next}while(d);hx=!1}}function lF(){N5()}function N5(){Pg=ux=!1;var o=0;Eo!==0&&bF()&&(o=Eo);for(var c=Je(),d=null,v=Lg;v!==null;){var x=v.next,S=E5(v,c);S===0?(v.next=null,d===null?Lg=x:d.next=x,x===null&&(_u=d)):(d=v,(o!==0||(S&3)!==0)&&(Pg=!0)),v=x}Gn!==0&&Gn!==5||Pd(o),Eo!==0&&(Eo=0)}function E5(o,c){for(var d=o.suspendedLanes,v=o.pingedLanes,x=o.expirationTimes,S=o.pendingLanes&-62914561;0<S;){var j=31-je(S),H=1<<j,ee=x[j];ee===-1?((H&d)===0||(H&v)!==0)&&(x[j]=Zt(H,c)):ee<=c&&(o.expiredLanes|=H),S&=~H}if(c=cn,d=Ft,d=wt(o,o===c?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),v=o.callbackNode,d===0||o===c&&(Qt===2||Qt===9)||o.cancelPendingCommit!==null)return v!==null&&v!==null&&Me(v),o.callbackNode=null,o.callbackPriority=0;if((d&3)===0||Lt(o,d)){if(c=d&-d,c===o.callbackPriority)return c;switch(v!==null&&Me(v),Di(d)){case 2:case 8:d=be;break;case 32:d=Ye;break;case 268435456:d=Rt;break;default:d=Ye}return v=A5.bind(null,o),d=At(d,v),o.callbackPriority=c,o.callbackNode=d,c}return v!==null&&v!==null&&Me(v),o.callbackPriority=2,o.callbackNode=null,2}function A5(o,c){if(Gn!==0&&Gn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var d=o.callbackNode;if(Dg()&&o.callbackNode!==d)return null;var v=Ft;return v=wt(o,o===cn?v:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),v===0?null:(c5(o,v,c),E5(o,Je()),o.callbackNode!=null&&o.callbackNode===d?A5.bind(null,o):null)}function R5(o,c){if(Dg())return null;c5(o,c,!0)}function cF(){xF(function(){(Yt&6)!==0?At(ae,lF):N5()})}function dx(){if(Eo===0){var o=iu;o===0&&(o=Ie,Ie<<=1,(Ie&261888)===0&&(Ie=256)),Eo=o}return Eo}function T5(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:qm(""+o)}function j5(o,c){var d=c.ownerDocument.createElement("input");return d.name=c.name,d.value=c.value,o.id&&d.setAttribute("form",o.id),c.parentNode.insertBefore(d,c),o=new FormData(o),d.parentNode.removeChild(d),o}function uF(o,c,d,v,x){if(c==="submit"&&d&&d.stateNode===x){var S=T5((x[Xt]||null).action),j=v.submitter;j&&(c=(c=j[Xt]||null)?T5(c.formAction):j.getAttribute("formAction"),c!==null&&(S=c,j=null));var H=new Ym("action","action",null,v,x);o.push({event:H,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(Eo!==0){var ee=j?j5(x,j):new FormData(x);O_(d,{pending:!0,data:ee,method:x.method,action:S},null,ee)}}else typeof S=="function"&&(H.preventDefault(),ee=j?j5(x,j):new FormData(x),O_(d,{pending:!0,data:ee,method:x.method,action:S},S,ee))},currentTarget:x}]})}}for(var fx=0;fx<Y1.length;fx++){var px=Y1[fx],hF=px.toLowerCase(),dF=px[0].toUpperCase()+px.slice(1);bi(hF,"on"+dF)}bi(l4,"onAnimationEnd"),bi(c4,"onAnimationIteration"),bi(u4,"onAnimationStart"),bi("dblclick","onDoubleClick"),bi("focusin","onFocus"),bi("focusout","onBlur"),bi(A9,"onTransitionRun"),bi(R9,"onTransitionStart"),bi(T9,"onTransitionCancel"),bi(h4,"onTransitionEnd"),qc("onMouseEnter",["mouseout","mouseover"]),qc("onMouseLeave",["mouseout","mouseover"]),qc("onPointerEnter",["pointerout","pointerover"]),qc("onPointerLeave",["pointerout","pointerover"]),bl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bl("onBeforeInput",["compositionend","keypress","textInput","paste"]),bl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fF=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bd));function O5(o,c){c=(c&4)!==0;for(var d=0;d<o.length;d++){var v=o[d],x=v.event;v=v.listeners;e:{var S=void 0;if(c)for(var j=v.length-1;0<=j;j--){var H=v[j],ee=H.instance,ue=H.currentTarget;if(H=H.listener,ee!==S&&x.isPropagationStopped())break e;S=H,x.currentTarget=ue;try{S(x)}catch(me){Xm(me)}x.currentTarget=null,S=ee}else for(j=0;j<v.length;j++){if(H=v[j],ee=H.instance,ue=H.currentTarget,H=H.listener,ee!==S&&x.isPropagationStopped())break e;S=H,x.currentTarget=ue;try{S(x)}catch(me){Xm(me)}x.currentTarget=null,S=ee}}}}function $t(o,c){var d=c[E1];d===void 0&&(d=c[E1]=new Set);var v=o+"__bubble";d.has(v)||(M5(c,o,2,!1),d.add(v))}function mx(o,c,d){var v=0;c&&(v|=4),M5(d,o,v,c)}var Bg="_reactListening"+Math.random().toString(36).slice(2);function gx(o){if(!o[Bg]){o[Bg]=!0,NA.forEach(function(d){d!=="selectionchange"&&(fF.has(d)||mx(d,!1,o),mx(d,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[Bg]||(c[Bg]=!0,mx("selectionchange",!1,c))}}function M5(o,c,d,v){switch(l3(c)){case 2:var x=FF;break;case 8:x=UF;break;default:x=jx}d=x.bind(null,c,d,o),x=void 0,!L1||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(x=!0),v?x!==void 0?o.addEventListener(c,d,{capture:!0,passive:x}):o.addEventListener(c,d,!0):x!==void 0?o.addEventListener(c,d,{passive:x}):o.addEventListener(c,d,!1)}function yx(o,c,d,v,x){var S=v;if((c&1)===0&&(c&2)===0&&v!==null)e:for(;;){if(v===null)return;var j=v.tag;if(j===3||j===4){var H=v.stateNode.containerInfo;if(H===x)break;if(j===4)for(j=v.return;j!==null;){var ee=j.tag;if((ee===3||ee===4)&&j.stateNode.containerInfo===x)return;j=j.return}for(;H!==null;){if(j=Uc(H),j===null)return;if(ee=j.tag,ee===5||ee===6||ee===26||ee===27){v=S=j;continue e}H=H.parentNode}}v=v.return}BA(function(){var ue=S,me=I1(d),ye=[];e:{var de=d4.get(o);if(de!==void 0){var pe=Ym,et=o;switch(o){case"keypress":if(Wm(d)===0)break e;case"keydown":case"keyup":pe=a9;break;case"focusin":et="focus",pe=z1;break;case"focusout":et="blur",pe=z1;break;case"beforeblur":case"afterblur":pe=z1;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=FA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=G7;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=c9;break;case l4:case c4:case u4:pe=J7;break;case h4:pe=h9;break;case"scroll":case"scrollend":pe=K7;break;case"wheel":pe=f9;break;case"copy":case"cut":case"paste":pe=Q7;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=HA;break;case"toggle":case"beforetoggle":pe=m9}var dt=(c&4)!==0,an=!dt&&(o==="scroll"||o==="scrollend"),ie=dt?de!==null?de+"Capture":null:de;dt=[];for(var ne=ue,ce;ne!==null;){var ge=ne;if(ce=ge.stateNode,ge=ge.tag,ge!==5&&ge!==26&&ge!==27||ce===null||ie===null||(ge=ad(ne,ie),ge!=null&&dt.push($d(ne,ge,ce))),an)break;ne=ne.return}0<dt.length&&(de=new pe(de,et,null,d,me),ye.push({event:de,listeners:dt}))}}if((c&7)===0){e:{if(de=o==="mouseover"||o==="pointerover",pe=o==="mouseout"||o==="pointerout",de&&d!==M1&&(et=d.relatedTarget||d.fromElement)&&(Uc(et)||et[Fc]))break e;if((pe||de)&&(de=me.window===me?me:(de=me.ownerDocument)?de.defaultView||de.parentWindow:window,pe?(et=d.relatedTarget||d.toElement,pe=ue,et=et?Uc(et):null,et!==null&&(an=i(et),dt=et.tag,et!==an||dt!==5&&dt!==27&&dt!==6)&&(et=null)):(pe=null,et=ue),pe!==et)){if(dt=FA,ge="onMouseLeave",ie="onMouseEnter",ne="mouse",(o==="pointerout"||o==="pointerover")&&(dt=HA,ge="onPointerLeave",ie="onPointerEnter",ne="pointer"),an=pe==null?de:id(pe),ce=et==null?de:id(et),de=new dt(ge,ne+"leave",pe,d,me),de.target=an,de.relatedTarget=ce,ge=null,Uc(me)===ue&&(dt=new dt(ie,ne+"enter",et,d,me),dt.target=ce,dt.relatedTarget=an,ge=dt),an=ge,pe&&et)t:{for(dt=pF,ie=pe,ne=et,ce=0,ge=ie;ge;ge=dt(ge))ce++;ge=0;for(var ot=ne;ot;ot=dt(ot))ge++;for(;0<ce-ge;)ie=dt(ie),ce--;for(;0<ge-ce;)ne=dt(ne),ge--;for(;ce--;){if(ie===ne||ne!==null&&ie===ne.alternate){dt=ie;break t}ie=dt(ie),ne=dt(ne)}dt=null}else dt=null;pe!==null&&I5(ye,de,pe,dt,!1),et!==null&&an!==null&&I5(ye,an,et,dt,!0)}}e:{if(de=ue?id(ue):window,pe=de.nodeName&&de.nodeName.toLowerCase(),pe==="select"||pe==="input"&&de.type==="file")var Kt=JA;else if(YA(de))if(XA)Kt=C9;else{Kt=S9;var rt=w9}else pe=de.nodeName,!pe||pe.toLowerCase()!=="input"||de.type!=="checkbox"&&de.type!=="radio"?ue&&O1(ue.elementType)&&(Kt=JA):Kt=k9;if(Kt&&(Kt=Kt(o,ue))){ZA(ye,Kt,d,me);break e}rt&&rt(o,de,ue),o==="focusout"&&ue&&de.type==="number"&&ue.memoizedProps.value!=null&&j1(de,"number",de.value)}switch(rt=ue?id(ue):window,o){case"focusin":(YA(rt)||rt.contentEditable==="true")&&(Jc=rt,K1=ue,pd=null);break;case"focusout":pd=K1=Jc=null;break;case"mousedown":W1=!0;break;case"contextmenu":case"mouseup":case"dragend":W1=!1,a4(ye,d,me);break;case"selectionchange":if(E9)break;case"keydown":case"keyup":a4(ye,d,me)}var Tt;if(U1)e:{switch(o){case"compositionstart":var Ut="onCompositionStart";break e;case"compositionend":Ut="onCompositionEnd";break e;case"compositionupdate":Ut="onCompositionUpdate";break e}Ut=void 0}else Zc?WA(o,d)&&(Ut="onCompositionEnd"):o==="keydown"&&d.keyCode===229&&(Ut="onCompositionStart");Ut&&(VA&&d.locale!=="ko"&&(Zc||Ut!=="onCompositionStart"?Ut==="onCompositionEnd"&&Zc&&(Tt=$A()):(uo=me,P1="value"in uo?uo.value:uo.textContent,Zc=!0)),rt=$g(ue,Ut),0<rt.length&&(Ut=new UA(Ut,o,null,d,me),ye.push({event:Ut,listeners:rt}),Tt?Ut.data=Tt:(Tt=GA(d),Tt!==null&&(Ut.data=Tt)))),(Tt=y9?v9(o,d):b9(o,d))&&(Ut=$g(ue,"onBeforeInput"),0<Ut.length&&(rt=new UA("onBeforeInput","beforeinput",null,d,me),ye.push({event:rt,listeners:Ut}),rt.data=Tt)),uF(ye,o,ue,d,me)}O5(ye,c)})}function $d(o,c,d){return{instance:o,listener:c,currentTarget:d}}function $g(o,c){for(var d=c+"Capture",v=[];o!==null;){var x=o,S=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||S===null||(x=ad(o,d),x!=null&&v.unshift($d(o,x,S)),x=ad(o,c),x!=null&&v.push($d(o,x,S))),o.tag===3)return v;o=o.return}return[]}function pF(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function I5(o,c,d,v,x){for(var S=c._reactName,j=[];d!==null&&d!==v;){var H=d,ee=H.alternate,ue=H.stateNode;if(H=H.tag,ee!==null&&ee===v)break;H!==5&&H!==26&&H!==27||ue===null||(ee=ue,x?(ue=ad(d,S),ue!=null&&j.unshift($d(d,ue,ee))):x||(ue=ad(d,S),ue!=null&&j.push($d(d,ue,ee)))),d=d.return}j.length!==0&&o.push({event:c,listeners:j})}var mF=/\r\n?/g,gF=/\u0000|\uFFFD/g;function D5(o){return(typeof o=="string"?o:""+o).replace(mF,`
`).replace(gF,"")}function L5(o,c){return c=D5(c),D5(o)===c}function rn(o,c,d,v,x,S){switch(d){case"children":typeof v=="string"?c==="body"||c==="textarea"&&v===""||Wc(o,v):(typeof v=="number"||typeof v=="bigint")&&c!=="body"&&Wc(o,""+v);break;case"className":Hm(o,"class",v);break;case"tabIndex":Hm(o,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":Hm(o,d,v);break;case"style":LA(o,v,S);break;case"data":if(c!=="object"){Hm(o,"data",v);break}case"src":case"href":if(v===""&&(c!=="a"||d!=="href")){o.removeAttribute(d);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){o.removeAttribute(d);break}v=qm(""+v),o.setAttribute(d,v);break;case"action":case"formAction":if(typeof v=="function"){o.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(d==="formAction"?(c!=="input"&&rn(o,c,"name",x.name,x,null),rn(o,c,"formEncType",x.formEncType,x,null),rn(o,c,"formMethod",x.formMethod,x,null),rn(o,c,"formTarget",x.formTarget,x,null)):(rn(o,c,"encType",x.encType,x,null),rn(o,c,"method",x.method,x,null),rn(o,c,"target",x.target,x,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){o.removeAttribute(d);break}v=qm(""+v),o.setAttribute(d,v);break;case"onClick":v!=null&&(o.onclick=va);break;case"onScroll":v!=null&&$t("scroll",o);break;case"onScrollEnd":v!=null&&$t("scrollend",o);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(s(61));if(d=v.__html,d!=null){if(x.children!=null)throw Error(s(60));o.innerHTML=d}}break;case"multiple":o.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":o.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){o.removeAttribute("xlink:href");break}d=qm(""+v),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?o.setAttribute(d,""+v):o.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?o.setAttribute(d,""):o.removeAttribute(d);break;case"capture":case"download":v===!0?o.setAttribute(d,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?o.setAttribute(d,v):o.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?o.setAttribute(d,v):o.removeAttribute(d);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?o.removeAttribute(d):o.setAttribute(d,v);break;case"popover":$t("beforetoggle",o),$t("toggle",o),Um(o,"popover",v);break;case"xlinkActuate":ya(o,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":ya(o,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":ya(o,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":ya(o,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":ya(o,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":ya(o,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":ya(o,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":ya(o,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":ya(o,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Um(o,"is",v);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=V7.get(d)||d,Um(o,d,v))}}function vx(o,c,d,v,x,S){switch(d){case"style":LA(o,v,S);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(s(61));if(d=v.__html,d!=null){if(x.children!=null)throw Error(s(60));o.innerHTML=d}}break;case"children":typeof v=="string"?Wc(o,v):(typeof v=="number"||typeof v=="bigint")&&Wc(o,""+v);break;case"onScroll":v!=null&&$t("scroll",o);break;case"onScrollEnd":v!=null&&$t("scrollend",o);break;case"onClick":v!=null&&(o.onclick=va);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!EA.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(x=d.endsWith("Capture"),c=d.slice(2,x?d.length-7:void 0),S=o[Xt]||null,S=S!=null?S[d]:null,typeof S=="function"&&o.removeEventListener(c,S,x),typeof v=="function")){typeof S!="function"&&S!==null&&(d in o?o[d]=null:o.hasAttribute(d)&&o.removeAttribute(d)),o.addEventListener(c,v,x);break e}d in o?o[d]=v:v===!0?o.setAttribute(d,""):Um(o,d,v)}}}function ms(o,c,d){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$t("error",o),$t("load",o);var v=!1,x=!1,S;for(S in d)if(d.hasOwnProperty(S)){var j=d[S];if(j!=null)switch(S){case"src":v=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,c));default:rn(o,c,S,j,d,null)}}x&&rn(o,c,"srcSet",d.srcSet,d,null),v&&rn(o,c,"src",d.src,d,null);return;case"input":$t("invalid",o);var H=S=j=x=null,ee=null,ue=null;for(v in d)if(d.hasOwnProperty(v)){var me=d[v];if(me!=null)switch(v){case"name":x=me;break;case"type":j=me;break;case"checked":ee=me;break;case"defaultChecked":ue=me;break;case"value":S=me;break;case"defaultValue":H=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(s(137,c));break;default:rn(o,c,v,me,d,null)}}OA(o,S,H,ee,ue,j,x,!1);return;case"select":$t("invalid",o),v=j=S=null;for(x in d)if(d.hasOwnProperty(x)&&(H=d[x],H!=null))switch(x){case"value":S=H;break;case"defaultValue":j=H;break;case"multiple":v=H;default:rn(o,c,x,H,d,null)}c=S,d=j,o.multiple=!!v,c!=null?Kc(o,!!v,c,!1):d!=null&&Kc(o,!!v,d,!0);return;case"textarea":$t("invalid",o),S=x=v=null;for(j in d)if(d.hasOwnProperty(j)&&(H=d[j],H!=null))switch(j){case"value":v=H;break;case"defaultValue":x=H;break;case"children":S=H;break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(91));break;default:rn(o,c,j,H,d,null)}IA(o,v,x,S);return;case"option":for(ee in d)d.hasOwnProperty(ee)&&(v=d[ee],v!=null)&&(ee==="selected"?o.selected=v&&typeof v!="function"&&typeof v!="symbol":rn(o,c,ee,v,d,null));return;case"dialog":$t("beforetoggle",o),$t("toggle",o),$t("cancel",o),$t("close",o);break;case"iframe":case"object":$t("load",o);break;case"video":case"audio":for(v=0;v<Bd.length;v++)$t(Bd[v],o);break;case"image":$t("error",o),$t("load",o);break;case"details":$t("toggle",o);break;case"embed":case"source":case"link":$t("error",o),$t("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ue in d)if(d.hasOwnProperty(ue)&&(v=d[ue],v!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,c));default:rn(o,c,ue,v,d,null)}return;default:if(O1(c)){for(me in d)d.hasOwnProperty(me)&&(v=d[me],v!==void 0&&vx(o,c,me,v,d,void 0));return}}for(H in d)d.hasOwnProperty(H)&&(v=d[H],v!=null&&rn(o,c,H,v,d,null))}function yF(o,c,d,v){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,S=null,j=null,H=null,ee=null,ue=null,me=null;for(pe in d){var ye=d[pe];if(d.hasOwnProperty(pe)&&ye!=null)switch(pe){case"checked":break;case"value":break;case"defaultValue":ee=ye;default:v.hasOwnProperty(pe)||rn(o,c,pe,null,v,ye)}}for(var de in v){var pe=v[de];if(ye=d[de],v.hasOwnProperty(de)&&(pe!=null||ye!=null))switch(de){case"type":S=pe;break;case"name":x=pe;break;case"checked":ue=pe;break;case"defaultChecked":me=pe;break;case"value":j=pe;break;case"defaultValue":H=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(s(137,c));break;default:pe!==ye&&rn(o,c,de,pe,v,ye)}}T1(o,j,H,ee,ue,me,S,x);return;case"select":pe=j=H=de=null;for(S in d)if(ee=d[S],d.hasOwnProperty(S)&&ee!=null)switch(S){case"value":break;case"multiple":pe=ee;default:v.hasOwnProperty(S)||rn(o,c,S,null,v,ee)}for(x in v)if(S=v[x],ee=d[x],v.hasOwnProperty(x)&&(S!=null||ee!=null))switch(x){case"value":de=S;break;case"defaultValue":H=S;break;case"multiple":j=S;default:S!==ee&&rn(o,c,x,S,v,ee)}c=H,d=j,v=pe,de!=null?Kc(o,!!d,de,!1):!!v!=!!d&&(c!=null?Kc(o,!!d,c,!0):Kc(o,!!d,d?[]:"",!1));return;case"textarea":pe=de=null;for(H in d)if(x=d[H],d.hasOwnProperty(H)&&x!=null&&!v.hasOwnProperty(H))switch(H){case"value":break;case"children":break;default:rn(o,c,H,null,v,x)}for(j in v)if(x=v[j],S=d[j],v.hasOwnProperty(j)&&(x!=null||S!=null))switch(j){case"value":de=x;break;case"defaultValue":pe=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(s(91));break;default:x!==S&&rn(o,c,j,x,v,S)}MA(o,de,pe);return;case"option":for(var et in d)de=d[et],d.hasOwnProperty(et)&&de!=null&&!v.hasOwnProperty(et)&&(et==="selected"?o.selected=!1:rn(o,c,et,null,v,de));for(ee in v)de=v[ee],pe=d[ee],v.hasOwnProperty(ee)&&de!==pe&&(de!=null||pe!=null)&&(ee==="selected"?o.selected=de&&typeof de!="function"&&typeof de!="symbol":rn(o,c,ee,de,v,pe));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var dt in d)de=d[dt],d.hasOwnProperty(dt)&&de!=null&&!v.hasOwnProperty(dt)&&rn(o,c,dt,null,v,de);for(ue in v)if(de=v[ue],pe=d[ue],v.hasOwnProperty(ue)&&de!==pe&&(de!=null||pe!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(s(137,c));break;default:rn(o,c,ue,de,v,pe)}return;default:if(O1(c)){for(var an in d)de=d[an],d.hasOwnProperty(an)&&de!==void 0&&!v.hasOwnProperty(an)&&vx(o,c,an,void 0,v,de);for(me in v)de=v[me],pe=d[me],!v.hasOwnProperty(me)||de===pe||de===void 0&&pe===void 0||vx(o,c,me,de,v,pe);return}}for(var ie in d)de=d[ie],d.hasOwnProperty(ie)&&de!=null&&!v.hasOwnProperty(ie)&&rn(o,c,ie,null,v,de);for(ye in v)de=v[ye],pe=d[ye],!v.hasOwnProperty(ye)||de===pe||de==null&&pe==null||rn(o,c,ye,de,v,pe)}function P5(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function vF(){if(typeof performance.getEntriesByType=="function"){for(var o=0,c=0,d=performance.getEntriesByType("resource"),v=0;v<d.length;v++){var x=d[v],S=x.transferSize,j=x.initiatorType,H=x.duration;if(S&&H&&P5(j)){for(j=0,H=x.responseEnd,v+=1;v<d.length;v++){var ee=d[v],ue=ee.startTime;if(ue>H)break;var me=ee.transferSize,ye=ee.initiatorType;me&&P5(ye)&&(ee=ee.responseEnd,j+=me*(ee<H?1:(H-ue)/(ee-ue)))}if(--v,c+=8*(S+j)/(x.duration/1e3),o++,10<o)break}}if(0<o)return c/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var bx=null,_x=null;function zg(o){return o.nodeType===9?o:o.ownerDocument}function B5(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $5(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function xx(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var wx=null;function bF(){var o=window.event;return o&&o.type==="popstate"?o===wx?!1:(wx=o,!0):(wx=null,!1)}var z5=typeof setTimeout=="function"?setTimeout:void 0,_F=typeof clearTimeout=="function"?clearTimeout:void 0,F5=typeof Promise=="function"?Promise:void 0,xF=typeof queueMicrotask=="function"?queueMicrotask:typeof F5<"u"?function(o){return F5.resolve(null).then(o).catch(wF)}:z5;function wF(o){setTimeout(function(){throw o})}function Ao(o){return o==="head"}function U5(o,c){var d=c,v=0;do{var x=d.nextSibling;if(o.removeChild(d),x&&x.nodeType===8)if(d=x.data,d==="/$"||d==="/&"){if(v===0){o.removeChild(x),ku(c);return}v--}else if(d==="$"||d==="$?"||d==="$~"||d==="$!"||d==="&")v++;else if(d==="html")zd(o.ownerDocument.documentElement);else if(d==="head"){d=o.ownerDocument.head,zd(d);for(var S=d.firstChild;S;){var j=S.nextSibling,H=S.nodeName;S[rd]||H==="SCRIPT"||H==="STYLE"||H==="LINK"&&S.rel.toLowerCase()==="stylesheet"||d.removeChild(S),S=j}}else d==="body"&&zd(o.ownerDocument.body);d=x}while(d);ku(c)}function H5(o,c){var d=o;o=0;do{var v=d.nextSibling;if(d.nodeType===1?c?(d._stashedDisplay=d.style.display,d.style.display="none"):(d.style.display=d._stashedDisplay||"",d.getAttribute("style")===""&&d.removeAttribute("style")):d.nodeType===3&&(c?(d._stashedText=d.nodeValue,d.nodeValue=""):d.nodeValue=d._stashedText||""),v&&v.nodeType===8)if(d=v.data,d==="/$"){if(o===0)break;o--}else d!=="$"&&d!=="$?"&&d!=="$~"&&d!=="$!"||o++;d=v}while(d)}function Sx(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var d=c;switch(c=c.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":Sx(d),A1(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}o.removeChild(d)}}function SF(o,c,d,v){for(;o.nodeType===1;){var x=d;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!v&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(v){if(!o[rd])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(S=o.getAttribute("rel"),S==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(S!==x.rel||o.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||o.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||o.getAttribute("title")!==(x.title==null?null:x.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(S=o.getAttribute("src"),(S!==(x.src==null?null:x.src)||o.getAttribute("type")!==(x.type==null?null:x.type)||o.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&S&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var S=x.name==null?null:""+x.name;if(x.type==="hidden"&&o.getAttribute("name")===S)return o}else return o;if(o=ei(o.nextSibling),o===null)break}return null}function kF(o,c,d){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!d||(o=ei(o.nextSibling),o===null))return null;return o}function V5(o,c){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!c||(o=ei(o.nextSibling),o===null))return null;return o}function kx(o){return o.data==="$?"||o.data==="$~"}function Cx(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function CF(o,c){var d=o.ownerDocument;if(o.data==="$~")o._reactRetry=c;else if(o.data!=="$?"||d.readyState!=="loading")c();else{var v=function(){c(),d.removeEventListener("DOMContentLoaded",v)};d.addEventListener("DOMContentLoaded",v),o._reactRetry=v}}function ei(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return o}var Nx=null;function q5(o){o=o.nextSibling;for(var c=0;o;){if(o.nodeType===8){var d=o.data;if(d==="/$"||d==="/&"){if(c===0)return ei(o.nextSibling);c--}else d!=="$"&&d!=="$!"&&d!=="$?"&&d!=="$~"&&d!=="&"||c++}o=o.nextSibling}return null}function K5(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var d=o.data;if(d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"){if(c===0)return o;c--}else d!=="/$"&&d!=="/&"||c++}o=o.previousSibling}return null}function W5(o,c,d){switch(c=zg(d),o){case"html":if(o=c.documentElement,!o)throw Error(s(452));return o;case"head":if(o=c.head,!o)throw Error(s(453));return o;case"body":if(o=c.body,!o)throw Error(s(454));return o;default:throw Error(s(451))}}function zd(o){for(var c=o.attributes;c.length;)o.removeAttributeNode(c[0]);A1(o)}var ti=new Map,G5=new Set;function Fg(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Ia=J.d;J.d={f:NF,r:EF,D:AF,C:RF,L:TF,m:jF,X:MF,S:OF,M:IF};function NF(){var o=Ia.f(),c=Og();return o||c}function EF(o){var c=Hc(o);c!==null&&c.tag===5&&c.type==="form"?hR(c):Ia.r(o)}var xu=typeof document>"u"?null:document;function Y5(o,c,d){var v=xu;if(v&&typeof c=="string"&&c){var x=Wr(c);x='link[rel="'+o+'"][href="'+x+'"]',typeof d=="string"&&(x+='[crossorigin="'+d+'"]'),G5.has(x)||(G5.add(x),o={rel:o,crossOrigin:d,href:c},v.querySelector(x)===null&&(c=v.createElement("link"),ms(c,"link",o),rs(c),v.head.appendChild(c)))}}function AF(o){Ia.D(o),Y5("dns-prefetch",o,null)}function RF(o,c){Ia.C(o,c),Y5("preconnect",o,c)}function TF(o,c,d){Ia.L(o,c,d);var v=xu;if(v&&o&&c){var x='link[rel="preload"][as="'+Wr(c)+'"]';c==="image"&&d&&d.imageSrcSet?(x+='[imagesrcset="'+Wr(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(x+='[imagesizes="'+Wr(d.imageSizes)+'"]')):x+='[href="'+Wr(o)+'"]';var S=x;switch(c){case"style":S=wu(o);break;case"script":S=Su(o)}ti.has(S)||(o=p({rel:"preload",href:c==="image"&&d&&d.imageSrcSet?void 0:o,as:c},d),ti.set(S,o),v.querySelector(x)!==null||c==="style"&&v.querySelector(Fd(S))||c==="script"&&v.querySelector(Ud(S))||(c=v.createElement("link"),ms(c,"link",o),rs(c),v.head.appendChild(c)))}}function jF(o,c){Ia.m(o,c);var d=xu;if(d&&o){var v=c&&typeof c.as=="string"?c.as:"script",x='link[rel="modulepreload"][as="'+Wr(v)+'"][href="'+Wr(o)+'"]',S=x;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=Su(o)}if(!ti.has(S)&&(o=p({rel:"modulepreload",href:o},c),ti.set(S,o),d.querySelector(x)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Ud(S)))return}v=d.createElement("link"),ms(v,"link",o),rs(v),d.head.appendChild(v)}}}function OF(o,c,d){Ia.S(o,c,d);var v=xu;if(v&&o){var x=Vc(v).hoistableStyles,S=wu(o);c=c||"default";var j=x.get(S);if(!j){var H={loading:0,preload:null};if(j=v.querySelector(Fd(S)))H.loading=5;else{o=p({rel:"stylesheet",href:o,"data-precedence":c},d),(d=ti.get(S))&&Ex(o,d);var ee=j=v.createElement("link");rs(ee),ms(ee,"link",o),ee._p=new Promise(function(ue,me){ee.onload=ue,ee.onerror=me}),ee.addEventListener("load",function(){H.loading|=1}),ee.addEventListener("error",function(){H.loading|=2}),H.loading|=4,Ug(j,c,v)}j={type:"stylesheet",instance:j,count:1,state:H},x.set(S,j)}}}function MF(o,c){Ia.X(o,c);var d=xu;if(d&&o){var v=Vc(d).hoistableScripts,x=Su(o),S=v.get(x);S||(S=d.querySelector(Ud(x)),S||(o=p({src:o,async:!0},c),(c=ti.get(x))&&Ax(o,c),S=d.createElement("script"),rs(S),ms(S,"link",o),d.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},v.set(x,S))}}function IF(o,c){Ia.M(o,c);var d=xu;if(d&&o){var v=Vc(d).hoistableScripts,x=Su(o),S=v.get(x);S||(S=d.querySelector(Ud(x)),S||(o=p({src:o,async:!0,type:"module"},c),(c=ti.get(x))&&Ax(o,c),S=d.createElement("script"),rs(S),ms(S,"link",o),d.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},v.set(x,S))}}function Z5(o,c,d,v){var x=(x=X.current)?Fg(x):null;if(!x)throw Error(s(446));switch(o){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(c=wu(d.href),d=Vc(x).hoistableStyles,v=d.get(c),v||(v={type:"style",instance:null,count:0,state:null},d.set(c,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){o=wu(d.href);var S=Vc(x).hoistableStyles,j=S.get(o);if(j||(x=x.ownerDocument||x,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(o,j),(S=x.querySelector(Fd(o)))&&!S._p&&(j.instance=S,j.state.loading=5),ti.has(o)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},ti.set(o,d),S||DF(x,o,d,j.state))),c&&v===null)throw Error(s(528,""));return j}if(c&&v!==null)throw Error(s(529,""));return null;case"script":return c=d.async,d=d.src,typeof d=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Su(d),d=Vc(x).hoistableScripts,v=d.get(c),v||(v={type:"script",instance:null,count:0,state:null},d.set(c,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,o))}}function wu(o){return'href="'+Wr(o)+'"'}function Fd(o){return'link[rel="stylesheet"]['+o+"]"}function J5(o){return p({},o,{"data-precedence":o.precedence,precedence:null})}function DF(o,c,d,v){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?v.loading=1:(c=o.createElement("link"),v.preload=c,c.addEventListener("load",function(){return v.loading|=1}),c.addEventListener("error",function(){return v.loading|=2}),ms(c,"link",d),rs(c),o.head.appendChild(c))}function Su(o){return'[src="'+Wr(o)+'"]'}function Ud(o){return"script[async]"+o}function X5(o,c,d){if(c.count++,c.instance===null)switch(c.type){case"style":var v=o.querySelector('style[data-href~="'+Wr(d.href)+'"]');if(v)return c.instance=v,rs(v),v;var x=p({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return v=(o.ownerDocument||o).createElement("style"),rs(v),ms(v,"style",x),Ug(v,d.precedence,o),c.instance=v;case"stylesheet":x=wu(d.href);var S=o.querySelector(Fd(x));if(S)return c.state.loading|=4,c.instance=S,rs(S),S;v=J5(d),(x=ti.get(x))&&Ex(v,x),S=(o.ownerDocument||o).createElement("link"),rs(S);var j=S;return j._p=new Promise(function(H,ee){j.onload=H,j.onerror=ee}),ms(S,"link",v),c.state.loading|=4,Ug(S,d.precedence,o),c.instance=S;case"script":return S=Su(d.src),(x=o.querySelector(Ud(S)))?(c.instance=x,rs(x),x):(v=d,(x=ti.get(S))&&(v=p({},d),Ax(v,x)),o=o.ownerDocument||o,x=o.createElement("script"),rs(x),ms(x,"link",v),o.head.appendChild(x),c.instance=x);case"void":return null;default:throw Error(s(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(v=c.instance,c.state.loading|=4,Ug(v,d.precedence,o));return c.instance}function Ug(o,c,d){for(var v=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=v.length?v[v.length-1]:null,S=x,j=0;j<v.length;j++){var H=v[j];if(H.dataset.precedence===c)S=H;else if(S!==x)break}S?S.parentNode.insertBefore(o,S.nextSibling):(c=d.nodeType===9?d.head:d,c.insertBefore(o,c.firstChild))}function Ex(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function Ax(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var Hg=null;function Q5(o,c,d){if(Hg===null){var v=new Map,x=Hg=new Map;x.set(d,v)}else x=Hg,v=x.get(d),v||(v=new Map,x.set(d,v));if(v.has(o))return v;for(v.set(o,null),d=d.getElementsByTagName(o),x=0;x<d.length;x++){var S=d[x];if(!(S[rd]||S[ln]||o==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var j=S.getAttribute(c)||"";j=o+j;var H=v.get(j);H?H.push(S):v.set(j,[S])}}return v}function e3(o,c,d){o=o.ownerDocument||o,o.head.insertBefore(d,c==="title"?o.querySelector("head > title"):null)}function LF(o,c,d){if(d===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;return c.rel==="stylesheet"?(o=c.disabled,typeof c.precedence=="string"&&o==null):!0;case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function t3(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function PF(o,c,d,v){if(d.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var x=wu(v.href),S=c.querySelector(Fd(x));if(S){c=S._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(o.count++,o=Vg.bind(o),c.then(o,o)),d.state.loading|=4,d.instance=S,rs(S);return}S=c.ownerDocument||c,v=J5(v),(x=ti.get(x))&&Ex(v,x),S=S.createElement("link"),rs(S);var j=S;j._p=new Promise(function(H,ee){j.onload=H,j.onerror=ee}),ms(S,"link",v),d.instance=S}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(d,c),(c=d.state.preload)&&(d.state.loading&3)===0&&(o.count++,d=Vg.bind(o),c.addEventListener("load",d),c.addEventListener("error",d))}}var Rx=0;function BF(o,c){return o.stylesheets&&o.count===0&&Kg(o,o.stylesheets),0<o.count||0<o.imgCount?function(d){var v=setTimeout(function(){if(o.stylesheets&&Kg(o,o.stylesheets),o.unsuspend){var S=o.unsuspend;o.unsuspend=null,S()}},6e4+c);0<o.imgBytes&&Rx===0&&(Rx=62500*vF());var x=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&Kg(o,o.stylesheets),o.unsuspend)){var S=o.unsuspend;o.unsuspend=null,S()}},(o.imgBytes>Rx?50:800)+c);return o.unsuspend=d,function(){o.unsuspend=null,clearTimeout(v),clearTimeout(x)}}:null}function Vg(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Kg(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var qg=null;function Kg(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,qg=new Map,c.forEach($F,o),qg=null,Vg.call(o))}function $F(o,c){if(!(c.state.loading&4)){var d=qg.get(o);if(d)var v=d.get(null);else{d=new Map,qg.set(o,d);for(var x=o.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<x.length;S++){var j=x[S];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(d.set(j.dataset.precedence,j),v=j)}v&&d.set(null,v)}x=c.instance,j=x.getAttribute("data-precedence"),S=d.get(j)||v,S===v&&d.set(null,x),d.set(j,x),this.count++,v=Vg.bind(this),x.addEventListener("load",v),x.addEventListener("error",v),S?S.parentNode.insertBefore(x,S.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(x,o.firstChild)),c.state.loading|=4}}var Hd={$$typeof:E,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function zF(o,c,d,v,x,S,j,H,ee){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gr(0),this.hiddenUpdates=gr(null),this.identifierPrefix=v,this.onUncaughtError=x,this.onCaughtError=S,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ee,this.incompleteTransitions=new Map}function n3(o,c,d,v,x,S,j,H,ee,ue,me,ye){return o=new zF(o,c,d,j,ee,ue,me,ye,H),c=1,S===!0&&(c|=24),S=br(3,null,null,c),o.current=S,S.stateNode=o,c=l_(),c.refCount++,o.pooledCache=c,c.refCount++,S.memoizedState={element:v,isDehydrated:d,cache:c},d_(S),o}function s3(o){return o?(o=eu,o):eu}function r3(o,c,d,v,x,S){x=s3(x),v.context===null?v.context=x:v.pendingContext=x,v=yo(c),v.payload={element:d},S=S===void 0?null:S,S!==null&&(v.callback=S),d=vo(o,v,c),d!==null&&(sr(d,o,c),xd(d,o,c))}function i3(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var d=o.retryLane;o.retryLane=d!==0&&d<c?d:c}}function Tx(o,c){i3(o,c),(o=o.alternate)&&i3(o,c)}function a3(o){if(o.tag===13||o.tag===31){var c=Sl(o,67108864);c!==null&&sr(c,o,67108864),Tx(o,67108864)}}function o3(o){if(o.tag===13||o.tag===31){var c=kr();c=Vr(c);var d=Sl(o,c);d!==null&&sr(d,o,c),Tx(o,c)}}var Wg=!0;function FF(o,c,d,v){var x=B.T;B.T=null;var S=J.p;try{J.p=2,jx(o,c,d,v)}finally{J.p=S,B.T=x}}function UF(o,c,d,v){var x=B.T;B.T=null;var S=J.p;try{J.p=8,jx(o,c,d,v)}finally{J.p=S,B.T=x}}function jx(o,c,d,v){if(Wg){var x=Ox(v);if(x===null)yx(o,c,v,Gg,d),c3(o,v);else if(VF(x,o,c,d,v))v.stopPropagation();else if(c3(o,v),c&4&&-1<HF.indexOf(o)){for(;x!==null;){var S=Hc(x);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var j=Ue(S.pendingLanes);if(j!==0){var H=S;for(H.pendingLanes|=2,H.entangledLanes|=2;j;){var ee=1<<31-je(j);H.entanglements[1]|=ee,j&=~ee}$i(S),(Yt&6)===0&&(Tg=Je()+500,Pd(0))}}break;case 31:case 13:H=Sl(S,2),H!==null&&sr(H,S,2),Og(),Tx(S,2)}if(S=Ox(v),S===null&&yx(o,c,v,Gg,d),S===x)break;x=S}x!==null&&v.stopPropagation()}else yx(o,c,v,null,d)}}function Ox(o){return o=I1(o),Mx(o)}var Gg=null;function Mx(o){if(Gg=null,o=Uc(o),o!==null){var c=i(o);if(c===null)o=null;else{var d=c.tag;if(d===13){if(o=a(c),o!==null)return o;o=null}else if(d===31){if(o=l(c),o!==null)return o;o=null}else if(d===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return Gg=o,null}function l3(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ee()){case ae:return 2;case be:return 8;case Ye:case ft:return 32;case Rt:return 268435456;default:return 32}default:return 32}}var Ix=!1,Ro=null,To=null,jo=null,Vd=new Map,qd=new Map,Oo=[],HF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function c3(o,c){switch(o){case"focusin":case"focusout":Ro=null;break;case"dragenter":case"dragleave":To=null;break;case"mouseover":case"mouseout":jo=null;break;case"pointerover":case"pointerout":Vd.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":qd.delete(c.pointerId)}}function Kd(o,c,d,v,x,S){return o===null||o.nativeEvent!==S?(o={blockedOn:c,domEventName:d,eventSystemFlags:v,nativeEvent:S,targetContainers:[x]},c!==null&&(c=Hc(c),c!==null&&a3(c)),o):(o.eventSystemFlags|=v,c=o.targetContainers,x!==null&&c.indexOf(x)===-1&&c.push(x),o)}function VF(o,c,d,v,x){switch(c){case"focusin":return Ro=Kd(Ro,o,c,d,v,x),!0;case"dragenter":return To=Kd(To,o,c,d,v,x),!0;case"mouseover":return jo=Kd(jo,o,c,d,v,x),!0;case"pointerover":var S=x.pointerId;return Vd.set(S,Kd(Vd.get(S)||null,o,c,d,v,x)),!0;case"gotpointercapture":return S=x.pointerId,qd.set(S,Kd(qd.get(S)||null,o,c,d,v,x)),!0}return!1}function u3(o){var c=Uc(o.target);if(c!==null){var d=i(c);if(d!==null){if(c=d.tag,c===13){if(c=a(d),c!==null){o.blockedOn=c,ga(o.priority,function(){o3(d)});return}}else if(c===31){if(c=l(d),c!==null){o.blockedOn=c,ga(o.priority,function(){o3(d)});return}}else if(c===3&&d.stateNode.current.memoizedState.isDehydrated){o.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Yg(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var d=Ox(o.nativeEvent);if(d===null){d=o.nativeEvent;var v=new d.constructor(d.type,d);M1=v,d.target.dispatchEvent(v),M1=null}else return c=Hc(d),c!==null&&a3(c),o.blockedOn=d,!1;c.shift()}return!0}function h3(o,c,d){Yg(o)&&d.delete(c)}function qF(){Ix=!1,Ro!==null&&Yg(Ro)&&(Ro=null),To!==null&&Yg(To)&&(To=null),jo!==null&&Yg(jo)&&(jo=null),Vd.forEach(h3),qd.forEach(h3)}function Zg(o,c){o.blockedOn===c&&(o.blockedOn=null,Ix||(Ix=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,qF)))}var Jg=null;function d3(o){Jg!==o&&(Jg=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Jg===o&&(Jg=null);for(var c=0;c<o.length;c+=3){var d=o[c],v=o[c+1],x=o[c+2];if(typeof v!="function"){if(Mx(v||d)===null)continue;break}var S=Hc(d);S!==null&&(o.splice(c,3),c-=3,O_(S,{pending:!0,data:x,method:d.method,action:v},v,x))}}))}function ku(o){function c(ee){return Zg(ee,o)}Ro!==null&&Zg(Ro,o),To!==null&&Zg(To,o),jo!==null&&Zg(jo,o),Vd.forEach(c),qd.forEach(c);for(var d=0;d<Oo.length;d++){var v=Oo[d];v.blockedOn===o&&(v.blockedOn=null)}for(;0<Oo.length&&(d=Oo[0],d.blockedOn===null);)u3(d),d.blockedOn===null&&Oo.shift();if(d=(o.ownerDocument||o).$$reactFormReplay,d!=null)for(v=0;v<d.length;v+=3){var x=d[v],S=d[v+1],j=x[Xt]||null;if(typeof S=="function")j||d3(d);else if(j){var H=null;if(S&&S.hasAttribute("formAction")){if(x=S,j=S[Xt]||null)H=j.formAction;else if(Mx(x)!==null)continue}else H=j.action;typeof H=="function"?d[v+1]=H:(d.splice(v,3),v-=3),d3(d)}}}function f3(){function o(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(j){return x=j})},focusReset:"manual",scroll:"manual"})}function c(){x!==null&&(x(),x=null),v||setTimeout(d,20)}function d(){if(!v&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var v=!1,x=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(d,100),function(){v=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),x!==null&&(x(),x=null)}}}function Dx(o){this._internalRoot=o}Xg.prototype.render=Dx.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(s(409));var d=c.current,v=kr();r3(d,v,o,c,null,null)},Xg.prototype.unmount=Dx.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;r3(o.current,2,null,o,null,null),Og(),c[Fc]=null}};function Xg(o){this._internalRoot=o}Xg.prototype.unstable_scheduleHydration=function(o){if(o){var c=qr();o={blockedOn:null,target:o,priority:c};for(var d=0;d<Oo.length&&c!==0&&c<Oo[d].priority;d++);Oo.splice(d,0,o),d===0&&u3(o)}};var p3=e.version;if(p3!=="19.2.3")throw Error(s(527,p3,"19.2.3"));J.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(s(188)):(o=Object.keys(o).join(","),Error(s(268,o)));return o=h(c),o=o!==null?m(o):null,o=o===null?null:o.stateNode,o};var KF={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qg.isDisabled&&Qg.supportsFiber)try{le=Qg.inject(KF),fe=Qg}catch{}}return Gd.createRoot=function(o,c){if(!r(o))throw Error(s(299));var d=!1,v="",x=xR,S=wR,j=SR;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&(S=c.onCaughtError),c.onRecoverableError!==void 0&&(j=c.onRecoverableError)),c=n3(o,1,!1,null,null,d,v,null,x,S,j,f3),o[Fc]=c.current,gx(o),new Dx(c)},Gd.hydrateRoot=function(o,c,d){if(!r(o))throw Error(s(299));var v=!1,x="",S=xR,j=wR,H=SR,ee=null;return d!=null&&(d.unstable_strictMode===!0&&(v=!0),d.identifierPrefix!==void 0&&(x=d.identifierPrefix),d.onUncaughtError!==void 0&&(S=d.onUncaughtError),d.onCaughtError!==void 0&&(j=d.onCaughtError),d.onRecoverableError!==void 0&&(H=d.onRecoverableError),d.formState!==void 0&&(ee=d.formState)),c=n3(o,1,!0,c,d??null,v,x,ee,S,j,H,f3),c.context=s3(null),d=c.current,v=kr(),v=Vr(v),x=yo(v),x.callback=null,vo(d,x,v),d=v,c.current.lanes=d,Hr(c,d),$i(c),o[Fc]=c.current,gx(o),new Xg(c)},Gd.version="19.2.3",Gd}var C3;function tU(){if(C3)return Bx.exports;C3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Bx.exports=eU(),Bx.exports}var nU=tU();const RS=new WeakMap,sU=new WeakMap,by={current:[]};let Ux=!1,np=0;const vf=new Set,e0=new Map;function m6(t){for(const e of t){if(by.current.includes(e))continue;by.current.push(e),e.recompute();const n=sU.get(e);if(n)for(const s of n){const r=RS.get(s);r?.length&&m6(r)}}}function rU(t){const e={prevVal:t.prevState,currentVal:t.state};for(const n of t.listeners)n(e)}function iU(t){const e={prevVal:t.prevState,currentVal:t.state};for(const n of t.listeners)n(e)}function g6(t){if(np>0&&!e0.has(t)&&e0.set(t,t.prevState),vf.add(t),!(np>0)&&!Ux)try{for(Ux=!0;vf.size>0;){const e=Array.from(vf);vf.clear();for(const n of e){const s=e0.get(n)??n.prevState;n.prevState=s,rU(n)}for(const n of e){const s=RS.get(n);s&&(by.current.push(n),m6(s))}for(const n of e){const s=RS.get(n);if(s)for(const r of s)iU(r)}}}finally{Ux=!1,by.current=[],e0.clear()}}function sp(t){np++;try{t()}finally{if(np--,np===0){const e=vf.values().next().value;e&&g6(e)}}}function aU(t){return typeof t=="function"}class oU{constructor(e,n){this.listeners=new Set,this.subscribe=s=>{var r,i;this.listeners.add(s);const a=(i=(r=this.options)==null?void 0:r.onSubscribe)==null?void 0:i.call(r,s,this);return()=>{this.listeners.delete(s),a?.()}},this.prevState=e,this.state=e,this.options=n}setState(e){var n,s,r;this.prevState=this.state,(n=this.options)!=null&&n.updateFn?this.state=this.options.updateFn(this.prevState)(e):aU(e)?this.state=e(this.prevState):this.state=e,(r=(s=this.options)==null?void 0:s.onUpdate)==null||r.call(s),g6(this)}}const Jo="__TSR_index",N3="popstate",E3="beforeunload";function lU(t){let e=t.getLocation();const n=new Set,s=a=>{e=t.getLocation(),n.forEach(l=>l({location:e,action:a}))},r=a=>{t.notifyOnIndexChange??!0?s(a):e=t.getLocation()},i=async({task:a,navigateOpts:l,...u})=>{if(l?.ignoreBlocker??!1){a();return}const m=t.getBlockers?.()??[],p=u.type==="PUSH"||u.type==="REPLACE";if(typeof document<"u"&&m.length&&p)for(const g of m){const y=_y(u.path,u.state);if(await g.blockerFn({currentLocation:e,nextLocation:y,action:u.type})){t.onBlocked?.();return}}a()};return{get location(){return e},get length(){return t.getLength()},subscribers:n,subscribe:a=>(n.add(a),()=>{n.delete(a)}),push:(a,l,u)=>{const h=e.state[Jo];l=A3(h+1,l),i({task:()=>{t.pushState(a,l),s({type:"PUSH"})},navigateOpts:u,type:"PUSH",path:a,state:l})},replace:(a,l,u)=>{const h=e.state[Jo];l=A3(h,l),i({task:()=>{t.replaceState(a,l),s({type:"REPLACE"})},navigateOpts:u,type:"REPLACE",path:a,state:l})},go:(a,l)=>{i({task:()=>{t.go(a),r({type:"GO",index:a})},navigateOpts:l,type:"GO"})},back:a=>{i({task:()=>{t.back(a?.ignoreBlocker??!1),r({type:"BACK"})},navigateOpts:a,type:"BACK"})},forward:a=>{i({task:()=>{t.forward(a?.ignoreBlocker??!1),r({type:"FORWARD"})},navigateOpts:a,type:"FORWARD"})},canGoBack:()=>e.state[Jo]!==0,createHref:a=>t.createHref(a),block:a=>{if(!t.setBlockers)return()=>{};const l=t.getBlockers?.()??[];return t.setBlockers([...l,a]),()=>{const u=t.getBlockers?.()??[];t.setBlockers?.(u.filter(h=>h!==a))}},flush:()=>t.flush?.(),destroy:()=>t.destroy?.(),notify:s}}function A3(t,e){e||(e={});const n=IC();return{...e,key:n,__TSR_key:n,[Jo]:t}}function cU(t){const e=typeof document<"u"?window:void 0,n=e.history.pushState,s=e.history.replaceState;let r=[];const i=()=>r,a=I=>r=I,l=(I=>I),u=(()=>_y(`${e.location.pathname}${e.location.search}${e.location.hash}`,e.history.state));if(!e.history.state?.__TSR_key&&!e.history.state?.key){const I=IC();e.history.replaceState({[Jo]:0,key:I,__TSR_key:I},"")}let h=u(),m,p=!1,g=!1,y=!1,b=!1;const _=()=>h;let w,k;const C=()=>{w&&(M._ignoreSubscribers=!0,(w.isPush?e.history.pushState:e.history.replaceState)(w.state,"",w.href),M._ignoreSubscribers=!1,w=void 0,k=void 0,m=void 0)},E=(I,W,P)=>{const G=l(W);k||(m=h),h=_y(W,P),w={href:G,state:P,isPush:w?.isPush||I==="push"},k||(k=Promise.resolve().then(()=>C()))},A=I=>{h=u(),M.notify({type:I})},R=async()=>{if(g){g=!1;return}const I=u(),W=I.state[Jo]-h.state[Jo],P=W===1,G=W===-1,$=!P&&!G||p;p=!1;const U=$?"GO":G?"BACK":"FORWARD",Z=$?{type:"GO",index:W}:{type:G?"BACK":"FORWARD"};if(y)y=!1;else{const K=i();if(typeof document<"u"&&K.length){for(const B of K)if(await B.blockerFn({currentLocation:h,nextLocation:I,action:U})){g=!0,e.history.go(1),M.notify(Z);return}}}h=u(),M.notify(Z)},N=I=>{if(b){b=!1;return}let W=!1;const P=i();if(typeof document<"u"&&P.length)for(const G of P){const $=G.enableBeforeUnload??!0;if($===!0){W=!0;break}if(typeof $=="function"&&$()===!0){W=!0;break}}if(W)return I.preventDefault(),I.returnValue=""},M=lU({getLocation:_,getLength:()=>e.history.length,pushState:(I,W)=>E("push",I,W),replaceState:(I,W)=>E("replace",I,W),back:I=>(I&&(y=!0),b=!0,e.history.back()),forward:I=>{I&&(y=!0),b=!0,e.history.forward()},go:I=>{p=!0,e.history.go(I)},createHref:I=>l(I),flush:C,destroy:()=>{e.history.pushState=n,e.history.replaceState=s,e.removeEventListener(E3,N,{capture:!0}),e.removeEventListener(N3,R)},onBlocked:()=>{m&&h!==m&&(h=m)},getBlockers:i,setBlockers:a,notifyOnIndexChange:!1});return e.addEventListener(E3,N,{capture:!0}),e.addEventListener(N3,R),e.history.pushState=function(...I){const W=n.apply(e.history,I);return M._ignoreSubscribers||A("PUSH"),W},e.history.replaceState=function(...I){const W=s.apply(e.history,I);return M._ignoreSubscribers||A("REPLACE"),W},M}function uU(t){let e=t.replace(/[\x00-\x1f\x7f]/g,"");return e.startsWith("//")&&(e="/"+e.replace(/^\/+/,"")),e}function _y(t,e){const n=uU(t),s=n.indexOf("#"),r=n.indexOf("?"),i=IC();return{href:n,pathname:n.substring(0,s>0?r>0?Math.min(s,r):s:r>0?r:n.length),hash:s>-1?n.substring(s):"",search:r>-1?n.slice(r,s===-1?void 0:s):"",state:e||{[Jo]:0,key:i,__TSR_key:i}}}function IC(){return(Math.random()+1).toString(36).substring(7)}function xy(t){return t[t.length-1]}function hU(t){return typeof t=="function"}function Ho(t,e){return hU(t)?t(e):t}const dU=Object.prototype.hasOwnProperty;function ri(t,e){if(t===e)return t;const n=e,s=j3(t)&&j3(n);if(!s&&!(wy(t)&&wy(n)))return n;const r=s?t:R3(t);if(!r)return n;const i=s?n:R3(n);if(!i)return n;const a=r.length,l=i.length,u=s?new Array(l):{};let h=0;for(let m=0;m<l;m++){const p=s?m:i[m],g=t[p],y=n[p];if(g===y){u[p]=g,(s?m<a:dU.call(t,p))&&h++;continue}if(g===null||y===null||typeof g!="object"||typeof y!="object"){u[p]=y;continue}const b=ri(g,y);u[p]=b,b===g&&h++}return a===l&&h===a?t:u}function R3(t){const e=[],n=Object.getOwnPropertyNames(t);for(const r of n){if(!Object.prototype.propertyIsEnumerable.call(t,r))return!1;e.push(r)}const s=Object.getOwnPropertySymbols(t);for(const r of s){if(!Object.prototype.propertyIsEnumerable.call(t,r))return!1;e.push(r)}return e}function wy(t){if(!T3(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!T3(n)||!n.hasOwnProperty("isPrototypeOf"))}function T3(t){return Object.prototype.toString.call(t)==="[object Object]"}function j3(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function nc(t,e,n){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(let s=0,r=t.length;s<r;s++)if(!nc(t[s],e[s],n))return!1;return!0}if(wy(t)&&wy(e)){const s=n?.ignoreUndefined??!0;if(n?.partial){for(const a in e)if((!s||e[a]!==void 0)&&!nc(t[a],e[a],n))return!1;return!0}let r=0;if(!s)r=Object.keys(t).length;else for(const a in t)t[a]!==void 0&&r++;let i=0;for(const a in e)if((!s||e[a]!==void 0)&&(i++,i>r||!nc(t[a],e[a],n)))return!1;return r===i}return!1}function ch(t){let e,n;const s=new Promise((r,i)=>{e=r,n=i});return s.status="pending",s.resolve=r=>{s.status="resolved",s.value=r,e(r),t?.(r)},s.reject=r=>{s.status="rejected",n(r)},s}function Xo(t){return!!(t&&typeof t=="object"&&typeof t.then=="function")}function fU(t){return t.replace(/[\x00-\x1f\x7f]/g,"")}function O3(t){let e;try{e=decodeURI(t)}catch{e=t.replaceAll(/%[0-9A-F]{2}/gi,n=>{try{return decodeURI(n)}catch{return n}})}return fU(e)}function M3(t,e){if(!t)return t;const n=/%25|%5C/gi;let s=0,r="",i;for(;(i=n.exec(t))!==null;)r+=O3(t.slice(s,i.index))+i[0],s=n.lastIndex;return r=r+O3(s?t.slice(s):t),r.startsWith("//")&&(r="/"+r.replace(/^\/+/,"")),r}var pU="Invariant failed";function Wa(t,e){if(!t)throw new Error(pU)}function Sy(t){const e=new Map;let n,s;const r=i=>{i.next&&(i.prev?(i.prev.next=i.next,i.next.prev=i.prev,i.next=void 0,s&&(s.next=i,i.prev=s)):(i.next.prev=void 0,n=i.next,i.next=void 0,s&&(i.prev=s,s.next=i)),s=i)};return{get(i){const a=e.get(i);if(a)return r(a),a.value},set(i,a){if(e.size>=t&&n){const u=n;e.delete(u.key),u.next&&(n=u.next,u.next.prev=void 0),u===s&&(s=void 0)}const l=e.get(i);if(l)l.value=a,r(l);else{const u={key:i,value:a,prev:s};s&&(s.next=u),s=u,n||(n=u),e.set(i,u)}},clear(){e.clear(),n=void 0,s=void 0}}}const uh=0,uc=1,hc=2,Np=3,Hu=4,mU=/^([^{]*)\{\$([a-zA-Z_$][a-zA-Z0-9_$]*)\}([^}]*)$/,gU=/^([^{]*)\{-\$([a-zA-Z_$][a-zA-Z0-9_$]*)\}([^}]*)$/,yU=/^([^{]*)\{\$\}([^}]*)$/;function DC(t,e,n=new Uint16Array(6)){const s=t.indexOf("/",e),r=s===-1?t.length:s,i=t.substring(e,r);if(!i||!i.includes("$"))return n[0]=uh,n[1]=e,n[2]=e,n[3]=r,n[4]=r,n[5]=r,n;if(i==="$"){const h=t.length;return n[0]=hc,n[1]=e,n[2]=e,n[3]=h,n[4]=h,n[5]=h,n}if(i.charCodeAt(0)===36)return n[0]=uc,n[1]=e,n[2]=e+1,n[3]=r,n[4]=r,n[5]=r,n;const a=i.match(yU);if(a){const m=a[1].length;return n[0]=hc,n[1]=e+m,n[2]=e+m+1,n[3]=e+m+2,n[4]=e+m+3,n[5]=t.length,n}const l=i.match(gU);if(l){const h=l[1],m=l[2],p=l[3],g=h.length;return n[0]=Np,n[1]=e+g,n[2]=e+g+3,n[3]=e+g+3+m.length,n[4]=r-p.length,n[5]=r,n}const u=i.match(mU);if(u){const h=u[1],m=u[2],p=u[3],g=h.length;return n[0]=uc,n[1]=e+g,n[2]=e+g+2,n[3]=e+g+2+m.length,n[4]=r-p.length,n[5]=r,n}return n[0]=uh,n[1]=e,n[2]=e,n[3]=r,n[4]=r,n[5]=r,n}function qv(t,e,n,s,r,i,a){a?.(n);let l=s;{const u=n.fullPath??n.from,h=u.length,m=n.options?.caseSensitive??t;for(;l<h;){const g=DC(u,l,e);let y;const b=l,_=g[5];switch(l=_+1,i++,g[0]){case uh:{const k=u.substring(g[2],g[3]);if(m){const C=r.static?.get(k);if(C)y=C;else{r.static??=new Map;const E=Qu(n.fullPath??n.from);E.parent=r,E.depth=i,y=E,r.static.set(k,E)}}else{const C=k.toLowerCase(),E=r.staticInsensitive?.get(C);if(E)y=E;else{r.staticInsensitive??=new Map;const A=Qu(n.fullPath??n.from);A.parent=r,A.depth=i,y=A,r.staticInsensitive.set(C,A)}}break}case uc:{const k=u.substring(b,g[1]),C=u.substring(g[4],_),E=m&&!!(k||C),A=k?E?k:k.toLowerCase():void 0,R=C?E?C:C.toLowerCase():void 0,N=r.dynamic?.find(M=>M.caseSensitive===E&&M.prefix===A&&M.suffix===R);if(N)y=N;else{const M=Vx(uc,n.fullPath??n.from,E,A,R);y=M,M.depth=i,M.parent=r,r.dynamic??=[],r.dynamic.push(M)}break}case Np:{const k=u.substring(b,g[1]),C=u.substring(g[4],_),E=m&&!!(k||C),A=k?E?k:k.toLowerCase():void 0,R=C?E?C:C.toLowerCase():void 0,N=r.optional?.find(M=>M.caseSensitive===E&&M.prefix===A&&M.suffix===R);if(N)y=N;else{const M=Vx(Np,n.fullPath??n.from,E,A,R);y=M,M.parent=r,M.depth=i,r.optional??=[],r.optional.push(M)}break}case hc:{const k=u.substring(b,g[1]),C=u.substring(g[4],_),E=m&&!!(k||C),A=k?E?k:k.toLowerCase():void 0,R=C?E?C:C.toLowerCase():void 0,N=Vx(hc,n.fullPath??n.from,E,A,R);y=N,N.parent=r,N.depth=i,r.wildcard??=[],r.wildcard.push(N)}}r=y}const p=(n.path||!n.children)&&!n.isRoot;if(p&&u.endsWith("/")){const g=Qu(n.fullPath??n.from);g.kind=Hu,g.parent=r,i++,g.depth=i,r.index=g,r=g}p&&!r.route&&(r.route=n,r.fullPath=n.fullPath??n.from)}if(n.children)for(const u of n.children)qv(t,e,u,l,r,i,a)}function Hx(t,e){if(t.prefix&&e.prefix&&t.prefix!==e.prefix){if(t.prefix.startsWith(e.prefix))return-1;if(e.prefix.startsWith(t.prefix))return 1}if(t.suffix&&e.suffix&&t.suffix!==e.suffix){if(t.suffix.endsWith(e.suffix))return-1;if(e.suffix.endsWith(t.suffix))return 1}return t.prefix&&!e.prefix?-1:!t.prefix&&e.prefix?1:t.suffix&&!e.suffix?-1:!t.suffix&&e.suffix?1:t.caseSensitive&&!e.caseSensitive?-1:!t.caseSensitive&&e.caseSensitive?1:0}function Vl(t){if(t.static)for(const e of t.static.values())Vl(e);if(t.staticInsensitive)for(const e of t.staticInsensitive.values())Vl(e);if(t.dynamic?.length){t.dynamic.sort(Hx);for(const e of t.dynamic)Vl(e)}if(t.optional?.length){t.optional.sort(Hx);for(const e of t.optional)Vl(e)}if(t.wildcard?.length){t.wildcard.sort(Hx);for(const e of t.wildcard)Vl(e)}}function Qu(t){return{kind:uh,depth:0,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:t,parent:null}}function Vx(t,e,n,s,r){return{kind:t,depth:0,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:e,parent:null,caseSensitive:n,prefix:s,suffix:r}}function vU(t,e){const n=Qu("/"),s=new Uint16Array(6);for(const r of t)qv(!1,s,r,1,n,0);Vl(n),e.masksTree=n,e.flatCache=Sy(1e3)}function bU(t,e){t||="/";const n=e.flatCache.get(t);if(n)return n;const s=LC(t,e.masksTree);return e.flatCache.set(t,s),s}function _U(t,e,n,s,r){t||="/",s||="/";const i=e?`case\0${t}`:t;let a=r.singleCache.get(i);if(!a){a=Qu("/");const l=new Uint16Array(6);qv(e,l,{from:t},1,a,0),r.singleCache.set(i,a)}return LC(s,a,n)}function xU(t,e,n=!1){const s=n?t:`nofuzz\0${t}`,r=e.matchCache.get(s);if(r!==void 0)return r;t||="/";const i=LC(t,e.segmentTree,n);return i&&(i.branch=CU(i.route)),e.matchCache.set(s,i),i}function wU(t){return t==="/"?t:t.replace(/\/{1,}$/,"")}function SU(t,e=!1,n){const s=Qu(t.fullPath),r=new Uint16Array(6),i={},a={};let l=0;return qv(e,r,t,1,s,0,h=>{if(n?.(h,l),Wa(!(h.id in i),`Duplicate routes found with id: ${String(h.id)}`),i[h.id]=h,l!==0&&h.path){const m=wU(h.fullPath);(!a[m]||h.fullPath.endsWith("/"))&&(a[m]=h)}l++}),Vl(s),{processedTree:{segmentTree:s,singleCache:Sy(1e3),matchCache:Sy(1e3),flatCache:null,masksTree:null},routesById:i,routesByPath:a}}function LC(t,e,n=!1){const s=t.split("/"),r=EU(t,s,e,n);if(!r)return null;const i=kU(t,s,r);return"**"in r&&(i["**"]=r["**"]),{route:r.node.route,params:i}}function kU(t,e,n){const s=NU(n.node);let r=null;const i={};for(let a=0,l=0,u=0;l<s.length;a++,l++,u++){const h=s[l],m=e[a],p=u;if(m&&(u+=m.length),h.kind===uc){r??=n.node.fullPath.split("/");const g=r[l],y=h.prefix?.length??0;if(g.charCodeAt(y)===123){const _=h.suffix?.length??0,w=g.substring(y+2,g.length-_-1),k=m.substring(y,m.length-_);i[w]=decodeURIComponent(k)}else{const _=g.substring(1);i[_]=decodeURIComponent(m)}}else if(h.kind===Np){if(n.skipped&1<<l){a--;continue}r??=n.node.fullPath.split("/");const g=r[l],y=h.prefix?.length??0,b=h.suffix?.length??0,_=g.substring(y+3,g.length-b-1),w=h.suffix||h.prefix?m.substring(y,m.length-b):m;w&&(i[_]=decodeURIComponent(w))}else if(h.kind===hc){const g=h,y=t.substring(p+(g.prefix?.length??0),t.length-(g.suffix?.length??0)),b=decodeURIComponent(y);i["*"]=b,i._splat=b;break}}return i}function CU(t){const e=[t];for(;t.parentRoute;)t=t.parentRoute,e.push(t);return e.reverse(),e}function NU(t){const e=Array(t.depth+1);do e[t.depth]=t,t=t.parent;while(t);return e}function EU(t,e,n,s){if(t==="/"&&n.index)return{node:n.index,skipped:0};const r=!xy(e),i=r&&t!=="/",a=e.length-(r?1:0),l=[{node:n,index:1,skipped:0,depth:1,statics:1,dynamics:0,optionals:0}];let u=null,h=null,m=null;for(;l.length;){const p=l.pop();let{node:g,index:y,skipped:b,depth:_,statics:w,dynamics:k,optionals:C}=p;s&&g.route&&g.kind!==Hu&&Yd(h,p)&&(h=p);const E=y===a;if(E&&(g.route&&!i&&Yd(m,p)&&(m=p),!g.optional&&!g.wildcard&&!g.index))continue;const A=E?void 0:e[y];let R;if(E&&g.index){const N={node:g.index,index:y,skipped:b,depth:_+1,statics:w,dynamics:k,optionals:C};if(w===a&&!k&&!C&&!b)return N;Yd(m,N)&&(m=N)}if(g.wildcard&&Yd(u,p))for(const N of g.wildcard){const{prefix:M,suffix:I}=N;if(!(M&&(E||!(N.caseSensitive?A:R??=A.toLowerCase()).startsWith(M)))){if(I){if(E)continue;const W=e.slice(y).join("/").slice(-I.length);if((N.caseSensitive?W:W.toLowerCase())!==I)continue}u={node:N,index:a,skipped:b,depth:_,statics:w,dynamics:k,optionals:C};break}}if(g.optional){const N=b|1<<_,M=_+1;for(let I=g.optional.length-1;I>=0;I--){const W=g.optional[I];l.push({node:W,index:y,skipped:N,depth:M,statics:w,dynamics:k,optionals:C})}if(!E)for(let I=g.optional.length-1;I>=0;I--){const W=g.optional[I],{prefix:P,suffix:G}=W;if(P||G){const $=W.caseSensitive?A:R??=A.toLowerCase();if(P&&!$.startsWith(P)||G&&!$.endsWith(G))continue}l.push({node:W,index:y+1,skipped:b,depth:M,statics:w,dynamics:k,optionals:C+1})}}if(!E&&g.dynamic&&A)for(let N=g.dynamic.length-1;N>=0;N--){const M=g.dynamic[N],{prefix:I,suffix:W}=M;if(I||W){const P=M.caseSensitive?A:R??=A.toLowerCase();if(I&&!P.startsWith(I)||W&&!P.endsWith(W))continue}l.push({node:M,index:y+1,skipped:b,depth:_+1,statics:w,dynamics:k+1,optionals:C})}if(!E&&g.staticInsensitive){const N=g.staticInsensitive.get(R??=A.toLowerCase());N&&l.push({node:N,index:y+1,skipped:b,depth:_+1,statics:w+1,dynamics:k,optionals:C})}if(!E&&g.static){const N=g.static.get(A);N&&l.push({node:N,index:y+1,skipped:b,depth:_+1,statics:w+1,dynamics:k,optionals:C})}}if(m&&u)return Yd(u,m)?m:u;if(m)return m;if(u)return u;if(s&&h){let p=h.index;for(let y=0;y<h.index;y++)p+=e[y].length;const g=p===t.length?"/":t.slice(p);return{node:h.node,skipped:h.skipped,"**":decodeURIComponent(g)}}return null}function Yd(t,e){return t?e.statics>t.statics||e.statics===t.statics&&(e.dynamics>t.dynamics||e.dynamics===t.dynamics&&(e.optionals>t.optionals||e.optionals===t.optionals&&((e.node.kind===Hu)>(t.node.kind===Hu)||e.node.kind===Hu==(t.node.kind===Hu)&&e.depth>t.depth))):!0}function q0(t){return PC(t.filter(e=>e!==void 0).join("/"))}function PC(t){return t.replace(/\/{2,}/g,"/")}function y6(t){return t==="/"?t:t.replace(/^\/{1,}/,"")}function sc(t){const e=t.length;return e>1&&t[e-1]==="/"?t.replace(/\/{1,}$/,""):t}function v6(t){return sc(y6(t))}function ky(t,e){return t?.endsWith("/")&&t!=="/"&&t!==`${e}/`?t.slice(0,-1):t}function AU(t,e,n){return ky(t,n)===ky(e,n)}function RU({base:t,to:e,trailingSlash:n="never",cache:s}){const r=e.startsWith("/"),i=!r&&e===".";let a;if(s){a=r?e:i?t:t+"\0"+e;const p=s.get(a);if(p)return p}let l;if(i)l=t.split("/");else if(r)l=e.split("/");else{for(l=t.split("/");l.length>1&&xy(l)==="";)l.pop();const p=e.split("/");for(let g=0,y=p.length;g<y;g++){const b=p[g];b===""?g?g===y-1&&l.push(b):l=[b]:b===".."?l.pop():b==="."||l.push(b)}}l.length>1&&(xy(l)===""?n==="never"&&l.pop():n==="always"&&l.push(""));let u,h="";for(let p=0;p<l.length;p++){p>0&&(h+="/");const g=l[p];if(!g)continue;u=DC(g,0,u);const y=u[0];if(y===uh){h+=g;continue}const b=u[5],_=g.substring(0,u[1]),w=g.substring(u[4],b),k=g.substring(u[2],u[3]);y===uc?h+=_||w?`${_}{$${k}}${w}`:`$${k}`:y===hc?h+=_||w?`${_}{$}${w}`:"$":h+=`${_}{-$${k}}${w}`}h=PC(h);const m=h||"/";return a&&s&&s.set(a,m),m}function qx(t,e,n){const s=e[t];return typeof s!="string"?s:t==="_splat"?encodeURI(s):TU(s,n)}function Kx({path:t,params:e,decodeCharMap:n}){let s=!1;const r={};if(!t||t==="/")return{interpolatedPath:"/",usedParams:r,isMissingParams:s};if(!t.includes("$"))return{interpolatedPath:t,usedParams:r,isMissingParams:s};const i=t.length;let a=0,l,u="";for(;a<i;){const m=a;l=DC(t,m,l);const p=l[5];if(a=p+1,m===p)continue;const g=l[0];if(g===uh){u+="/"+t.substring(m,p);continue}if(g===hc){const y=e._splat;r._splat=y,r["*"]=y;const b=t.substring(m,l[1]),_=t.substring(l[4],p);if(!y){s=!0,(b||_)&&(u+="/"+b+_);continue}const w=qx("_splat",e,n);u+="/"+b+w+_;continue}if(g===uc){const y=t.substring(l[2],l[3]);!s&&!(y in e)&&(s=!0),r[y]=e[y];const b=t.substring(m,l[1]),_=t.substring(l[4],p),w=qx(y,e,n)??"undefined";u+="/"+b+w+_;continue}if(g===Np){const y=t.substring(l[2],l[3]),b=e[y];if(b==null)continue;r[y]=b;const _=t.substring(m,l[1]),w=t.substring(l[4],p),k=qx(y,e,n)??"";u+="/"+_+k+w;continue}}return t.endsWith("/")&&(u+="/"),{usedParams:r,interpolatedPath:u||"/",isMissingParams:s}}function TU(t,e){let n=encodeURIComponent(t);if(e)for(const[s,r]of e)n=n.replaceAll(s,r);return n}function Lr(t){return!!t?.isNotFound}function jU(){try{if(typeof window<"u"&&typeof window.sessionStorage=="object")return window.sessionStorage}catch{}}const Cy="tsr-scroll-restoration-v1_3",OU=(t,e)=>{let n;return(...s)=>{n||(n=setTimeout(()=>{t(...s),n=null},e))}};function MU(){const t=jU();if(!t)return null;const e=t.getItem(Cy);let n=e?JSON.parse(e):{};return{state:n,set:s=>{n=Ho(s,n)||n;try{t.setItem(Cy,JSON.stringify(n))}catch{console.warn("[ts-router] Could not persist scroll restoration state to sessionStorage.")}}}}const t0=MU(),TS=t=>t.state.__TSR_key||t.href;function IU(t){const e=[];let n;for(;n=t.parentNode;)e.push(`${t.tagName}:nth-child(${Array.prototype.indexOf.call(n.children,t)+1})`),t=n;return`${e.reverse().join(" > ")}`.toLowerCase()}let Ny=!1;function b6({storageKey:t,key:e,behavior:n,shouldScrollRestoration:s,scrollToTopSelectors:r,location:i}){let a;try{a=JSON.parse(sessionStorage.getItem(t)||"{}")}catch(h){console.error(h);return}const l=e||window.history.state?.__TSR_key,u=a[l];Ny=!0;e:{if(s&&u&&Object.keys(u).length>0){for(const p in u){const g=u[p];if(p==="window")window.scrollTo({top:g.scrollY,left:g.scrollX,behavior:n});else if(p){const y=document.querySelector(p);y&&(y.scrollLeft=g.scrollX,y.scrollTop=g.scrollY)}}break e}const h=(i??window.location).hash.split("#",2)[1];if(h){const p=window.history.state?.__hashScrollIntoViewOptions??!0;if(p){const g=document.getElementById(h);g&&g.scrollIntoView(p)}break e}const m={top:0,left:0,behavior:n};if(window.scrollTo(m),r)for(const p of r){if(p==="window")continue;const g=typeof p=="function"?p():document.querySelector(p);g&&g.scrollTo(m)}}Ny=!1}function DU(t,e){if(!t0&&!t.isServer||((t.options.scrollRestoration??!1)&&(t.isScrollRestoring=!0),t.isServer||t.isScrollRestorationSetup||!t0))return;t.isScrollRestorationSetup=!0,Ny=!1;const s=t.options.getScrollRestorationKey||TS;window.history.scrollRestoration="manual";const r=i=>{if(Ny||!t.isScrollRestoring)return;let a="";if(i.target===document||i.target===window)a="window";else{const u=i.target.getAttribute("data-scroll-restoration-id");u?a=`[data-scroll-restoration-id="${u}"]`:a=IU(i.target)}const l=s(t.state.location);t0.set(u=>{const h=u[l]||={},m=h[a]||={};if(a==="window")m.scrollX=window.scrollX||0,m.scrollY=window.scrollY||0;else if(a){const p=document.querySelector(a);p&&(m.scrollX=p.scrollLeft||0,m.scrollY=p.scrollTop||0)}return u})};typeof document<"u"&&document.addEventListener("scroll",OU(r,100),!0),t.subscribe("onRendered",i=>{const a=s(i.toLocation);if(!t.resetNextScroll){t.resetNextScroll=!0;return}typeof t.options.scrollRestoration=="function"&&!t.options.scrollRestoration({location:t.latestLocation})||(b6({storageKey:Cy,key:a,behavior:t.options.scrollRestorationBehavior,shouldScrollRestoration:t.isScrollRestoring,scrollToTopSelectors:t.options.scrollToTopSelectors,location:t.history.location}),t.isScrollRestoring&&t0.set(l=>(l[a]||={},l)))})}function LU(t){if(typeof document<"u"&&document.querySelector){const e=t.state.location.state.__hashScrollIntoViewOptions??!0;if(e&&t.state.location.hash!==""){const n=document.getElementById(t.state.location.hash);n&&n.scrollIntoView(e)}}}function PU(t,e=String){const n=new URLSearchParams;for(const s in t){const r=t[s];r!==void 0&&n.set(s,e(r))}return n.toString()}function Wx(t){return t?t==="false"?!1:t==="true"?!0:+t*0===0&&+t+""===t?+t:t:""}function BU(t){const e=new URLSearchParams(t),n={};for(const[s,r]of e.entries()){const i=n[s];i==null?n[s]=Wx(r):Array.isArray(i)?i.push(Wx(r)):n[s]=[i,Wx(r)]}return n}const $U=FU(JSON.parse),zU=UU(JSON.stringify,JSON.parse);function FU(t){return e=>{e[0]==="?"&&(e=e.substring(1));const n=BU(e);for(const s in n){const r=n[s];if(typeof r=="string")try{n[s]=t(r)}catch{}}return n}}function UU(t,e){const n=typeof e=="function";function s(r){if(typeof r=="object"&&r!==null)try{return t(r)}catch{}else if(n&&typeof r=="string")try{return e(r),t(r)}catch{}return r}return r=>{const i=PU(r,s);return i?`?${i}`:""}}const Or="__root__";function BC(t){if(t.statusCode=t.statusCode||t.code||307,!t.reloadDocument&&typeof t.href=="string")try{new URL(t.href),t.reloadDocument=!0}catch{}const e=new Headers(t.headers);t.href&&e.get("Location")===null&&e.set("Location",t.href);const n=new Response(null,{status:t.statusCode,headers:e});if(n.options=t,t.throw)throw n;return n}function ci(t){return t instanceof Response&&!!t.options}const K0=t=>{if(!t.rendered)return t.rendered=!0,t.onReady?.()},Kv=(t,e)=>!!(t.preload&&!t.router.state.matches.some(n=>n.id===e)),$C=(t,e,n=!0)=>{const s={...t.router.options.context??{}},r=n?e:e-1;for(let i=0;i<=r;i++){const a=t.matches[i];if(!a)continue;const l=t.router.getMatch(a.id);l&&Object.assign(s,l.__routeContext,l.__beforeLoadContext)}return s},_6=(t,e)=>{const n=t.router.routesById[e.routeId??""]??t.router.routeTree;!n.options.notFoundComponent&&t.router.options?.defaultNotFoundComponent&&(n.options.notFoundComponent=t.router.options.defaultNotFoundComponent),Wa(n.options.notFoundComponent);const s=t.matches.find(r=>r.routeId===n.id);Wa(s,"Could not find match for route: "+n.id),t.updateMatch(s.id,r=>({...r,status:"notFound",error:e,isFetching:!1})),e.routerCode==="BEFORE_LOAD"&&n.parentRoute&&(e.routeId=n.parentRoute.id,_6(t,e))},Vo=(t,e,n)=>{if(!(!ci(n)&&!Lr(n))){if(ci(n)&&n.redirectHandled&&!n.options.reloadDocument)throw n;if(e){e._nonReactive.beforeLoadPromise?.resolve(),e._nonReactive.loaderPromise?.resolve(),e._nonReactive.beforeLoadPromise=void 0,e._nonReactive.loaderPromise=void 0;const s=ci(n)?"redirected":"notFound";e._nonReactive.error=n,t.updateMatch(e.id,r=>({...r,status:s,isFetching:!1,error:n})),Lr(n)&&!n.routeId&&(n.routeId=e.routeId),e._nonReactive.loadPromise?.resolve()}throw ci(n)?(t.rendered=!0,n.options._fromLocation=t.location,n.redirectHandled=!0,n=t.router.resolveRedirect(n),n):(_6(t,n),n)}},x6=(t,e)=>{const n=t.router.getMatch(e);return!!(!t.router.isServer&&n._nonReactive.dehydrated||t.router.isServer&&n.ssr===!1)},Zd=(t,e,n,s)=>{const{id:r,routeId:i}=t.matches[e],a=t.router.looseRoutesById[i];if(n instanceof Promise)throw n;n.routerCode=s,t.firstBadMatchIndex??=e,Vo(t,t.router.getMatch(r),n);try{a.options.onError?.(n)}catch(l){n=l,Vo(t,t.router.getMatch(r),n)}t.updateMatch(r,l=>(l._nonReactive.beforeLoadPromise?.resolve(),l._nonReactive.beforeLoadPromise=void 0,l._nonReactive.loadPromise?.resolve(),{...l,error:n,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController}))},HU=(t,e,n,s)=>{const r=t.router.getMatch(e),i=t.matches[n-1]?.id,a=i?t.router.getMatch(i):void 0;if(t.router.isShell()){r.ssr=s.id===Or;return}if(a?.ssr===!1){r.ssr=!1;return}const l=y=>y===!0&&a?.ssr==="data-only"?"data-only":y,u=t.router.options.defaultSsr??!0;if(s.options.ssr===void 0){r.ssr=l(u);return}if(typeof s.options.ssr!="function"){r.ssr=l(s.options.ssr);return}const{search:h,params:m}=r,p={search:n0(h,r.searchError),params:n0(m,r.paramsError),location:t.location,matches:t.matches.map(y=>({index:y.index,pathname:y.pathname,fullPath:y.fullPath,staticData:y.staticData,id:y.id,routeId:y.routeId,search:n0(y.search,y.searchError),params:n0(y.params,y.paramsError),ssr:y.ssr}))},g=s.options.ssr(p);if(Xo(g))return g.then(y=>{r.ssr=l(y??u)});r.ssr=l(g??u)},w6=(t,e,n,s)=>{if(s._nonReactive.pendingTimeout!==void 0)return;const r=n.options.pendingMs??t.router.options.defaultPendingMs;if(!!(t.onReady&&!t.router.isServer&&!Kv(t,e)&&(n.options.loader||n.options.beforeLoad||C6(n))&&typeof r=="number"&&r!==1/0&&(n.options.pendingComponent??t.router.options?.defaultPendingComponent))){const a=setTimeout(()=>{K0(t)},r);s._nonReactive.pendingTimeout=a}},VU=(t,e,n)=>{const s=t.router.getMatch(e);if(!s._nonReactive.beforeLoadPromise&&!s._nonReactive.loaderPromise)return;w6(t,e,n,s);const r=()=>{const i=t.router.getMatch(e);i.preload&&(i.status==="redirected"||i.status==="notFound")&&Vo(t,i,i.error)};return s._nonReactive.beforeLoadPromise?s._nonReactive.beforeLoadPromise.then(r):r()},qU=(t,e,n,s)=>{const r=t.router.getMatch(e),i=r._nonReactive.loadPromise;r._nonReactive.loadPromise=ch(()=>{i?.resolve()});const{paramsError:a,searchError:l}=r;a&&Zd(t,n,a,"PARSE_PARAMS"),l&&Zd(t,n,l,"VALIDATE_SEARCH"),w6(t,e,s,r);const u=new AbortController,h=t.matches[n-1]?.id;(h?t.router.getMatch(h):void 0)?.context??t.router.options.context;let p=!1;const g=()=>{p||(p=!0,t.updateMatch(e,N=>({...N,isFetching:"beforeLoad",fetchCount:N.fetchCount+1,abortController:u})))},y=()=>{r._nonReactive.beforeLoadPromise?.resolve(),r._nonReactive.beforeLoadPromise=void 0,t.updateMatch(e,N=>({...N,isFetching:!1}))};if(!s.options.beforeLoad){sp(()=>{g(),y()});return}r._nonReactive.beforeLoadPromise=ch();const b={...$C(t,n,!1),...r.__routeContext},{search:_,params:w,cause:k}=r,C=Kv(t,e),E={search:_,abortController:u,params:w,preload:C,context:b,location:t.location,navigate:N=>t.router.navigate({...N,_fromLocation:t.location}),buildLocation:t.router.buildLocation,cause:C?"preload":k,matches:t.matches,...t.router.options.additionalContext},A=N=>{if(N===void 0){sp(()=>{g(),y()});return}(ci(N)||Lr(N))&&(g(),Zd(t,n,N,"BEFORE_LOAD")),sp(()=>{g(),t.updateMatch(e,M=>({...M,__beforeLoadContext:N})),y()})};let R;try{if(R=s.options.beforeLoad(E),Xo(R))return g(),R.catch(N=>{Zd(t,n,N,"BEFORE_LOAD")}).then(A)}catch(N){g(),Zd(t,n,N,"BEFORE_LOAD")}A(R)},KU=(t,e)=>{const{id:n,routeId:s}=t.matches[e],r=t.router.looseRoutesById[s],i=()=>{if(t.router.isServer){const u=HU(t,n,e,r);if(Xo(u))return u.then(l)}return l()},a=()=>qU(t,n,e,r),l=()=>{if(x6(t,n))return;const u=VU(t,n,r);return Xo(u)?u.then(a):a()};return i()},WU=(t,e,n)=>{const s=t.router.getMatch(e);if(!s||!n.options.head&&!n.options.scripts&&!n.options.headers)return;const r={matches:t.matches,match:s,params:s.params,loaderData:s.loaderData};return Promise.all([n.options.head?.(r),n.options.scripts?.(r),n.options.headers?.(r)]).then(([i,a,l])=>{const u=i?.meta,h=i?.links,m=i?.scripts,p=i?.styles;return{meta:u,links:h,headScripts:m,headers:l,scripts:a,styles:p}})},S6=(t,e,n,s)=>{const r=t.matchPromises[n-1],{params:i,loaderDeps:a,abortController:l,cause:u}=t.router.getMatch(e),h=$C(t,n),m=Kv(t,e);return{params:i,deps:a,preload:!!m,parentMatchPromise:r,abortController:l,context:h,location:t.location,navigate:p=>t.router.navigate({...p,_fromLocation:t.location}),cause:m?"preload":u,route:s,...t.router.options.additionalContext}},I3=async(t,e,n,s)=>{try{const r=t.router.getMatch(e);try{(!t.router.isServer||r.ssr===!0)&&k6(s);const i=s.options.loader?.(S6(t,e,n,s)),a=s.options.loader&&Xo(i);if((a||s._lazyPromise||s._componentsPromise||s.options.head||s.options.scripts||s.options.headers||r._nonReactive.minPendingPromise)&&t.updateMatch(e,h=>({...h,isFetching:"loader"})),s.options.loader){const h=a?await i:i;Vo(t,t.router.getMatch(e),h),h!==void 0&&t.updateMatch(e,m=>({...m,loaderData:h}))}s._lazyPromise&&await s._lazyPromise;const u=r._nonReactive.minPendingPromise;u&&await u,s._componentsPromise&&await s._componentsPromise,t.updateMatch(e,h=>({...h,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now()}))}catch(i){let a=i;if(a?.name==="AbortError"){t.updateMatch(e,u=>({...u,status:u.status==="pending"?"success":u.status,isFetching:!1}));return}const l=r._nonReactive.minPendingPromise;l&&await l,Lr(i)&&await s.options.notFoundComponent?.preload?.(),Vo(t,t.router.getMatch(e),i);try{s.options.onError?.(i)}catch(u){a=u,Vo(t,t.router.getMatch(e),u)}t.updateMatch(e,u=>({...u,error:a,status:"error",isFetching:!1}))}}catch(r){const i=t.router.getMatch(e);i&&(i._nonReactive.loaderPromise=void 0),Vo(t,i,r)}},GU=async(t,e)=>{const{id:n,routeId:s}=t.matches[e];let r=!1,i=!1;const a=t.router.looseRoutesById[s],l=()=>{t.updateMatch(n,m=>({...m,context:$C(t,e)}))};if(x6(t,n)){if(t.router.isServer)return t.router.getMatch(n)}else{const m=t.router.getMatch(n);if(m._nonReactive.loaderPromise){if(m.status==="success"&&!t.sync&&!m.preload)return m;await m._nonReactive.loaderPromise;const p=t.router.getMatch(n),g=p._nonReactive.error||p.error;g&&Vo(t,p,g)}else{const p=Date.now()-m.updatedAt,g=Kv(t,n),y=g?a.options.preloadStaleTime??t.router.options.defaultPreloadStaleTime??3e4:a.options.staleTime??t.router.options.defaultStaleTime??0,b=a.options.shouldReload,_=typeof b=="function"?b(S6(t,n,e,a)):b,w=!!g&&!t.router.state.matches.some(A=>A.id===n),k=t.router.getMatch(n);k._nonReactive.loaderPromise=ch(),w!==k.preload&&t.updateMatch(n,A=>({...A,preload:w}));const{status:C,invalid:E}=k;r=C==="success"&&(E||(_??p>y)),g&&a.options.preload===!1||(r&&!t.sync?(i=!0,(async()=>{try{await I3(t,n,e,a),l();const A=t.router.getMatch(n);A._nonReactive.loaderPromise?.resolve(),A._nonReactive.loadPromise?.resolve(),A._nonReactive.loaderPromise=void 0}catch(A){ci(A)&&await t.router.navigate(A.options)}})()):(C!=="success"||r&&t.sync)&&await I3(t,n,e,a))}}const u=t.router.getMatch(n);i||(u._nonReactive.loaderPromise?.resolve(),u._nonReactive.loadPromise?.resolve()),clearTimeout(u._nonReactive.pendingTimeout),u._nonReactive.pendingTimeout=void 0,i||(u._nonReactive.loaderPromise=void 0),u._nonReactive.dehydrated=void 0,i||l();const h=i?u.isFetching:!1;return h!==u.isFetching||u.invalid!==!1?(t.updateMatch(n,m=>({...m,isFetching:h,invalid:!1})),t.router.getMatch(n)):u};async function D3(t){const e=Object.assign(t,{matchPromises:[]});!e.router.isServer&&e.router.state.matches.some(n=>n._forcePending)&&K0(e);try{for(let l=0;l<e.matches.length;l++){const u=KU(e,l);Xo(u)&&await u}const n=e.firstBadMatchIndex??e.matches.length;for(let l=0;l<n;l++)e.matchPromises.push(GU(e,l));const r=(await Promise.allSettled(e.matchPromises)).filter(l=>l.status==="rejected").map(l=>l.reason);let i;for(const l of r){if(ci(l))throw l;!i&&Lr(l)&&(i=l)}for(const l of e.matches){const{id:u,routeId:h}=l,m=e.router.looseRoutesById[h];try{const p=WU(e,u,m);if(p){const g=await p;e.updateMatch(u,y=>({...y,...g}))}}catch(p){console.error(`Error executing head for route ${h}:`,p)}}if(i)throw i;const a=K0(e);Xo(a)&&await a}catch(n){if(Lr(n)&&!e.preload){const s=K0(e);throw Xo(s)&&await s,n}if(ci(n))throw n}return e.matches}async function k6(t){if(!t._lazyLoaded&&t._lazyPromise===void 0&&(t.lazyFn?t._lazyPromise=t.lazyFn().then(e=>{const{id:n,...s}=e.options;Object.assign(t.options,s),t._lazyLoaded=!0,t._lazyPromise=void 0}):t._lazyLoaded=!0),!t._componentsLoaded&&t._componentsPromise===void 0){const e=()=>{const n=[];for(const s of N6){const r=t.options[s]?.preload;r&&n.push(r())}if(n.length)return Promise.all(n).then(()=>{t._componentsLoaded=!0,t._componentsPromise=void 0});t._componentsLoaded=!0,t._componentsPromise=void 0};t._componentsPromise=t._lazyPromise?t._lazyPromise.then(e):e()}return t._componentsPromise}function n0(t,e){return e?{status:"error",error:e}:{status:"success",value:t}}function C6(t){for(const e of N6)if(t.options[e]?.preload)return!0;return!1}const N6=["component","errorComponent","pendingComponent","notFoundComponent"];function YU(t){return{input:({url:e})=>{for(const n of t)e=E6(n,e);return e},output:({url:e})=>{for(let n=t.length-1;n>=0;n--)e=A6(t[n],e);return e}}}function ZU(t){const e=v6(t.basepath),n=`/${e}`,s=`${n}/`,r=t.caseSensitive?n:n.toLowerCase(),i=t.caseSensitive?s:s.toLowerCase();return{input:({url:a})=>{const l=t.caseSensitive?a.pathname:a.pathname.toLowerCase();return l===r?a.pathname="/":l.startsWith(i)&&(a.pathname=a.pathname.slice(n.length)),a},output:({url:a})=>(a.pathname=q0(["/",e,a.pathname]),a)}}function E6(t,e){const n=t?.input?.({url:e});if(n){if(typeof n=="string")return new URL(n);if(n instanceof URL)return n}return e}function A6(t,e){const n=t?.output?.({url:e});if(n){if(typeof n=="string")return new URL(n);if(n instanceof URL)return n}return e}function rc(t){const e=t.resolvedLocation,n=t.location,s=e?.pathname!==n.pathname,r=e?.href!==n.href,i=e?.hash!==n.hash;return{fromLocation:e,toLocation:n,pathChanged:s,hrefChanged:r,hashChanged:i}}class JU{constructor(e){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=n=>n(),this.update=n=>{n.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info.");const s=this.options,r=this.basepath??s?.basepath??"/",i=this.basepath===void 0,a=s?.rewrite;this.options={...s,...n},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(g=>[encodeURIComponent(g),g])):void 0,(!this.history||this.options.history&&this.options.history!==this.history)&&(this.options.history?this.history=this.options.history:this.isServer||(this.history=cU())),this.origin=this.options.origin,this.origin||(!this.isServer&&window?.origin&&window.origin!=="null"?this.origin=window.origin:this.origin="http://localhost"),this.history&&this.updateLatestLocation(),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),!this.__store&&this.latestLocation&&(this.__store=new oU(QU(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(g=>!["redirected"].includes(g.status))}}}),DU(this));let l=!1;const u=this.options.basepath??"/",h=this.options.rewrite;if(i||r!==u||a!==h){this.basepath=u;const g=[];v6(u)!==""&&g.push(ZU({basepath:u})),h&&g.push(h),this.rewrite=g.length===0?void 0:g.length===1?g[0]:YU(g),this.history&&this.updateLatestLocation(),l=!0}l&&this.__store&&(this.__store.state={...this.state,location:this.latestLocation}),typeof window<"u"&&"CSS"in window&&typeof window.CSS?.supports=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.updateLatestLocation=()=>{this.latestLocation=this.parseLocation(this.history.location,this.latestLocation)},this.buildRouteTree=()=>{const{routesById:n,routesByPath:s,processedTree:r}=SU(this.routeTree,this.options.caseSensitive,(a,l)=>{a.init({originalIndex:l})});this.options.routeMasks&&vU(this.options.routeMasks,r),this.routesById=n,this.routesByPath=s,this.processedTree=r;const i=this.options.notFoundRoute;i&&(i.init({originalIndex:99999999999}),this.routesById[i.id]=i)},this.subscribe=(n,s)=>{const r={eventType:n,fn:s};return this.subscribers.add(r),()=>{this.subscribers.delete(r)}},this.emit=n=>{this.subscribers.forEach(s=>{s.eventType===n.type&&s.fn(n)})},this.parseLocation=(n,s)=>{const r=({href:u,state:h})=>{const m=new URL(u,this.origin),p=E6(this.rewrite,m),g=this.options.parseSearch(p.search),y=this.options.stringifySearch(g);return p.search=y,{href:p.href.replace(p.origin,""),publicHref:u,url:p,pathname:M3(p.pathname),searchStr:y,search:ri(s?.search,g),hash:p.hash.split("#").reverse()[0]??"",state:ri(s?.state,h)}},i=r(n),{__tempLocation:a,__tempKey:l}=i.state;if(a&&(!l||l===this.tempLocationKey)){const u=r(a);return u.state.key=i.state.key,u.state.__TSR_key=i.state.__TSR_key,delete u.state.__tempLocation,{...u,maskedLocation:i}}return i},this.resolvePathCache=Sy(1e3),this.resolvePathWithBase=(n,s)=>RU({base:n,to:PC(s),trailingSlash:this.options.trailingSlash,cache:this.resolvePathCache}),this.matchRoutes=(n,s,r)=>typeof n=="string"?this.matchRoutesInternal({pathname:n,search:s},r):this.matchRoutesInternal(n,s),this.getMatchedRoutes=n=>eH({pathname:n,routesById:this.routesById,processedTree:this.processedTree}),this.cancelMatch=n=>{const s=this.getMatch(n);s&&(s.abortController.abort(),clearTimeout(s._nonReactive.pendingTimeout),s._nonReactive.pendingTimeout=void 0)},this.cancelMatches=()=>{const n=this.state.matches.filter(i=>i.status==="pending"),s=this.state.matches.filter(i=>i.isFetching==="loader");new Set([...this.state.pendingMatches??[],...n,...s]).forEach(i=>{this.cancelMatch(i.id)})},this.buildLocation=n=>{const s=(i={})=>{const a=i._fromLocation||this.pendingBuiltLocation||this.latestLocation,l=this.matchRoutes(a,{_buildLocation:!0}),u=xy(l);i.from;const h=i.unsafeRelative==="path"?a.pathname:i.from??u.fullPath,m=this.resolvePathWithBase(h,"."),p=u.search,g={...u.params},y=i.to?this.resolvePathWithBase(m,`${i.to}`):this.resolvePathWithBase(m,"."),b=i.params===!1||i.params===null?{}:(i.params??!0)===!0?g:Object.assign(g,Ho(i.params,g)),_=Kx({path:y,params:b}).interpolatedPath,w=this.matchRoutes(_,void 0,{_buildLocation:!0}).map(P=>this.looseRoutesById[P.routeId]);if(Object.keys(b).length>0)for(const P of w){const G=P.options.params?.stringify??P.options.stringifyParams;G&&Object.assign(b,G(b))}const k=n.leaveParams?y:M3(Kx({path:y,params:b,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath);let C=p;if(n._includeValidateSearch&&this.options.search?.strict){const P={};w.forEach(G=>{if(G.options.validateSearch)try{Object.assign(P,jS(G.options.validateSearch,{...P,...C}))}catch{}}),C=P}C=tH({search:C,dest:i,destRoutes:w,_includeValidateSearch:n._includeValidateSearch}),C=ri(p,C);const E=this.options.stringifySearch(C),A=i.hash===!0?a.hash:i.hash?Ho(i.hash,a.hash):void 0,R=A?`#${A}`:"";let N=i.state===!0?a.state:i.state?Ho(i.state,a.state):{};N=ri(a.state,N);const M=`${k}${E}${R}`,I=new URL(M,this.origin),W=A6(this.rewrite,I);return{publicHref:W.pathname+W.search+W.hash,href:M,url:W,pathname:k,search:C,searchStr:E,state:N,hash:A??"",unmaskOnReload:i.unmaskOnReload}},r=(i={},a)=>{const l=s(i);let u=a?s(a):void 0;if(!u){const h={};if(this.options.routeMasks){const m=bU(l.pathname,this.processedTree);if(m){Object.assign(h,m.params);const{from:p,params:g,...y}=m.route,b=g===!1||g===null?{}:(g??!0)===!0?h:Object.assign(h,Ho(g,h));a={from:n.from,...y,params:b},u=s(a)}}}return u&&(l.maskedLocation=u),l};return n.mask?r(n,{from:n.from,...n.mask}):r(n)},this.commitLocation=({viewTransition:n,ignoreBlocker:s,...r})=>{const i=()=>{const u=["key","__TSR_key","__TSR_index","__hashScrollIntoViewOptions"];u.forEach(m=>{r.state[m]=this.latestLocation.state[m]});const h=nc(r.state,this.latestLocation.state);return u.forEach(m=>{delete r.state[m]}),h},a=sc(this.latestLocation.href)===sc(r.href),l=this.commitLocationPromise;if(this.commitLocationPromise=ch(()=>{l?.resolve()}),a&&i())this.load();else{let{maskedLocation:u,hashScrollIntoView:h,url:m,...p}=r;u&&(p={...u,state:{...u.state,__tempKey:void 0,__tempLocation:{...p,search:p.searchStr,state:{...p.state,__tempKey:void 0,__tempLocation:void 0,__TSR_key:void 0,key:void 0}}}},(p.unmaskOnReload??this.options.unmaskOnReload??!1)&&(p.state.__tempKey=this.tempLocationKey)),p.state.__hashScrollIntoViewOptions=h??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=n,this.history[r.replace?"replace":"push"](p.publicHref,p.state,{ignoreBlocker:s})}return this.resetNextScroll=r.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:n,resetScroll:s,hashScrollIntoView:r,viewTransition:i,ignoreBlocker:a,href:l,...u}={})=>{if(l){const p=this.history.location.state.__TSR_index,g=_y(l,{__TSR_index:n?p:p+1});u.to=g.pathname,u.search=this.options.parseSearch(g.search),u.hash=g.hash.slice(1)}const h=this.buildLocation({...u,_includeValidateSearch:!0});this.pendingBuiltLocation=h;const m=this.commitLocation({...h,viewTransition:i,replace:n,resetScroll:s,hashScrollIntoView:r,ignoreBlocker:a});return Promise.resolve().then(()=>{this.pendingBuiltLocation===h&&(this.pendingBuiltLocation=void 0)}),m},this.navigate=async({to:n,reloadDocument:s,href:r,publicHref:i,...a})=>{let l=!1;if(r)try{new URL(`${r}`),l=!0}catch{}if(l&&!s&&(s=!0),s){if(!r||!i&&!l){const h=this.buildLocation({to:n,...a});r=r??h.url.href,i=i??h.url.href}const u=!l&&i?i:r;if(!a.ignoreBlocker){const m=this.history.getBlockers?.()??[];for(const p of m)if(p?.blockerFn&&await p.blockerFn({currentLocation:this.latestLocation,nextLocation:this.latestLocation,action:"PUSH"}))return Promise.resolve()}return a.replace?window.location.replace(u):window.location.href=u,Promise.resolve()}return this.buildAndCommitLocation({...a,href:r,to:n,_isNavigate:!0})},this.beforeLoad=()=>{if(this.cancelMatches(),this.updateLatestLocation(),this.isServer){const s=this.buildLocation({to:this.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});if(this.latestLocation.publicHref!==s.publicHref||s.url.origin!==this.origin){const r=this.getParsedLocationHref(s);throw BC({href:r})}}const n=this.matchRoutes(this.latestLocation);this.__store.setState(s=>({...s,status:"pending",statusCode:200,isLoading:!0,location:this.latestLocation,pendingMatches:n,cachedMatches:s.cachedMatches.filter(r=>!n.some(i=>i.id===r.id))}))},this.load=async n=>{let s,r,i;for(i=new Promise(l=>{this.startTransition(async()=>{try{this.beforeLoad();const u=this.latestLocation,h=this.state.resolvedLocation;this.state.redirect||this.emit({type:"onBeforeNavigate",...rc({resolvedLocation:h,location:u})}),this.emit({type:"onBeforeLoad",...rc({resolvedLocation:h,location:u})}),await D3({router:this,sync:n?.sync,matches:this.state.pendingMatches,location:u,updateMatch:this.updateMatch,onReady:async()=>{this.startTransition(()=>{this.startViewTransition(async()=>{let m=[],p=[],g=[];sp(()=>{this.__store.setState(y=>{const b=y.matches,_=y.pendingMatches||y.matches;return m=b.filter(w=>!_.some(k=>k.id===w.id)),p=_.filter(w=>!b.some(k=>k.id===w.id)),g=_.filter(w=>b.some(k=>k.id===w.id)),{...y,isLoading:!1,loadedAt:Date.now(),matches:_,pendingMatches:void 0,cachedMatches:[...y.cachedMatches,...m.filter(w=>w.status!=="error"&&w.status!=="notFound")]}}),this.clearExpiredCache()}),[[m,"onLeave"],[p,"onEnter"],[g,"onStay"]].forEach(([y,b])=>{y.forEach(_=>{this.looseRoutesById[_.routeId].options[b]?.(_)})})})})}})}catch(u){ci(u)?(s=u,this.isServer||this.navigate({...s.options,replace:!0,ignoreBlocker:!0})):Lr(u)&&(r=u),this.__store.setState(h=>({...h,statusCode:s?s.status:r?404:h.matches.some(m=>m.status==="error")?500:200,redirect:s}))}this.latestLoadPromise===i&&(this.commitLocationPromise?.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),l()})}),this.latestLoadPromise=i,await i;this.latestLoadPromise&&i!==this.latestLoadPromise;)await this.latestLoadPromise;let a;this.hasNotFoundMatch()?a=404:this.__store.state.matches.some(l=>l.status==="error")&&(a=500),a!==void 0&&this.__store.setState(l=>({...l,statusCode:a}))},this.startViewTransition=n=>{const s=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,s&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let r;if(typeof s=="object"&&this.isViewTransitionTypesSupported){const i=this.latestLocation,a=this.state.resolvedLocation,l=typeof s.types=="function"?s.types(rc({resolvedLocation:a,location:i})):s.types;if(l===!1){n();return}r={update:n,types:l}}else r=n;document.startViewTransition(r)}else n()},this.updateMatch=(n,s)=>{this.startTransition(()=>{const r=this.state.pendingMatches?.some(i=>i.id===n)?"pendingMatches":this.state.matches.some(i=>i.id===n)?"matches":this.state.cachedMatches.some(i=>i.id===n)?"cachedMatches":"";r&&this.__store.setState(i=>({...i,[r]:i[r]?.map(a=>a.id===n?s(a):a)}))})},this.getMatch=n=>{const s=r=>r.id===n;return this.state.cachedMatches.find(s)??this.state.pendingMatches?.find(s)??this.state.matches.find(s)},this.invalidate=n=>{const s=r=>n?.filter?.(r)??!0?{...r,invalid:!0,...n?.forcePending||r.status==="error"||r.status==="notFound"?{status:"pending",error:void 0}:void 0}:r;return this.__store.setState(r=>({...r,matches:r.matches.map(s),cachedMatches:r.cachedMatches.map(s),pendingMatches:r.pendingMatches?.map(s)})),this.shouldViewTransition=!1,this.load({sync:n?.sync})},this.getParsedLocationHref=n=>{let s=n.url.href;return this.origin&&n.url.origin===this.origin&&(s=s.replace(this.origin,"")||"/"),s},this.resolveRedirect=n=>{if(!n.options.href){const s=this.buildLocation(n.options),r=this.getParsedLocationHref(s);n.options.href=s.href,n.headers.set("Location",r)}return n.headers.get("Location")||n.headers.set("Location",n.options.href),n},this.clearCache=n=>{const s=n?.filter;s!==void 0?this.__store.setState(r=>({...r,cachedMatches:r.cachedMatches.filter(i=>!s(i))})):this.__store.setState(r=>({...r,cachedMatches:[]}))},this.clearExpiredCache=()=>{const n=s=>{const r=this.looseRoutesById[s.routeId];if(!r.options.loader)return!0;const i=(s.preload?r.options.preloadGcTime??this.options.defaultPreloadGcTime:r.options.gcTime??this.options.defaultGcTime)??300*1e3;return s.status==="error"?!0:Date.now()-s.updatedAt>=i};this.clearCache({filter:n})},this.loadRouteChunk=k6,this.preloadRoute=async n=>{const s=this.buildLocation(n);let r=this.matchRoutes(s,{throwOnError:!0,preload:!0,dest:n});const i=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(l=>l.id)),a=new Set([...i,...this.state.cachedMatches.map(l=>l.id)]);sp(()=>{r.forEach(l=>{a.has(l.id)||this.__store.setState(u=>({...u,cachedMatches:[...u.cachedMatches,l]}))})});try{return r=await D3({router:this,matches:r,location:s,preload:!0,updateMatch:(l,u)=>{i.has(l)?r=r.map(h=>h.id===l?u(h):h):this.updateMatch(l,u)}}),r}catch(l){if(ci(l))return l.options.reloadDocument?void 0:await this.preloadRoute({...l.options,_fromLocation:s});Lr(l)||console.error(l);return}},this.matchRoute=(n,s)=>{const r={...n,to:n.to?this.resolvePathWithBase(n.from||"",n.to):void 0,params:n.params||{},leaveParams:!0},i=this.buildLocation(r);if(s?.pending&&this.state.status!=="pending")return!1;const l=(s?.pending===void 0?!this.state.isLoading:s.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,u=_U(i.pathname,s?.caseSensitive??!1,s?.fuzzy??!1,l.pathname,this.processedTree);return!u||n.params&&!nc(u.params,n.params,{partial:!0})?!1:s?.includeSearch??!0?nc(l.search,i.search,{partial:!0})?u.params:!1:u.params},this.hasNotFoundMatch=()=>this.__store.state.matches.some(n=>n.status==="notFound"||n.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...e,caseSensitive:e.caseSensitive??!1,notFoundMode:e.notFoundMode??"fuzzy",stringifySearch:e.stringifySearch??zU,parseSearch:e.parseSearch??$U}),typeof document<"u"&&(self.__TSR_ROUTER__=this)}isShell(){return!!this.options.isShell}isPrerendering(){return!!this.options.isPrerendering}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(e,n){const s=this.getMatchedRoutes(e.pathname),{foundRoute:r,routeParams:i}=s;let{matchedRoutes:a}=s,l=!1;(r?r.path!=="/"&&i["**"]:sc(e.pathname))&&(this.options.notFoundRoute?a=[...a,this.options.notFoundRoute]:l=!0);const u=(()=>{if(l){if(this.options.notFoundMode!=="root")for(let p=a.length-1;p>=0;p--){const g=a[p];if(g.children)return g.id}return Or}})(),h=[],m=p=>p?.id?p.context??this.options.context??void 0:this.options.context??void 0;return a.forEach((p,g)=>{const y=h[g-1],[b,_,w]=(()=>{const U=y?.search??e.search,Z=y?._strictSearch??void 0;try{const K=jS(p.options.validateSearch,{...U})??void 0;return[{...U,...K},{...Z,...K},void 0]}catch(K){let B=K;if(K instanceof Ey||(B=new Ey(K.message,{cause:K})),n?.throwOnError)throw B;return[U,{},B]}})(),k=p.options.loaderDeps?.({search:b})??"",C=k?JSON.stringify(k):"",{interpolatedPath:E,usedParams:A}=Kx({path:p.fullPath,params:i,decodeCharMap:this.pathParamsDecodeCharMap}),R=p.id+E+C,N=this.getMatch(R),M=this.state.matches.find(U=>U.routeId===p.id),I=N?._strictParams??A;let W;if(!N){const U=p.options.params?.parse??p.options.parseParams;if(U)try{Object.assign(I,U(I))}catch(Z){if(Lr(Z)||ci(Z)?W=Z:W=new XU(Z.message,{cause:Z}),n?.throwOnError)throw W}}Object.assign(i,I);const P=M?"stay":"enter";let G;if(N)G={...N,cause:P,params:M?ri(M.params,i):i,_strictParams:I,search:ri(M?M.search:N.search,b),_strictSearch:_};else{const U=p.options.loader||p.options.beforeLoad||p.lazyFn||C6(p)?"pending":"success";G={id:R,ssr:this.isServer?void 0:p.options.ssr,index:g,routeId:p.id,params:M?ri(M.params,i):i,_strictParams:I,pathname:E,updatedAt:Date.now(),search:M?ri(M.search,b):b,_strictSearch:_,searchError:void 0,status:U,isFetching:!1,error:void 0,paramsError:W,__routeContext:void 0,_nonReactive:{loadPromise:ch()},__beforeLoadContext:void 0,context:{},abortController:new AbortController,fetchCount:0,cause:P,loaderDeps:M?ri(M.loaderDeps,k):k,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:p.options.staticData||{},fullPath:p.fullPath}}n?.preload||(G.globalNotFound=u===p.id),G.searchError=w;const $=m(y);G.context={...$,...G.__routeContext,...G.__beforeLoadContext},h.push(G)}),h.forEach((p,g)=>{const y=this.looseRoutesById[p.routeId];if(!this.getMatch(p.id)&&n?._buildLocation!==!0){const _=h[g-1],w=m(_);if(y.options.context){const k={deps:p.loaderDeps,params:p.params,context:w??{},location:e,navigate:C=>this.navigate({...C,_fromLocation:e}),buildLocation:this.buildLocation,cause:p.cause,abortController:p.abortController,preload:!!p.preload,matches:h};p.__routeContext=y.options.context(k)??void 0}p.context={...w,...p.__routeContext,...p.__beforeLoadContext}}}),h}}class Ey extends Error{}class XU extends Error{}function QU(t){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:t,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function jS(t,e){if(t==null)return{};if("~standard"in t){const n=t["~standard"].validate(e);if(n instanceof Promise)throw new Ey("Async validation not supported");if(n.issues)throw new Ey(JSON.stringify(n.issues,void 0,2),{cause:n});return n.value}return"parse"in t?t.parse(e):typeof t=="function"?t(e):{}}function eH({pathname:t,routesById:e,processedTree:n}){const s={},r=sc(t);let i;const a=xU(r,n,!0);return a&&(i=a.route,Object.assign(s,a.params)),{matchedRoutes:a?.branch||[e[Or]],routeParams:s,foundRoute:i}}function tH({search:t,dest:e,destRoutes:n,_includeValidateSearch:s}){const r=n.reduce((l,u)=>{const h=[];if("search"in u.options)u.options.search?.middlewares&&h.push(...u.options.search.middlewares);else if(u.options.preSearchFilters||u.options.postSearchFilters){const m=({search:p,next:g})=>{let y=p;"preSearchFilters"in u.options&&u.options.preSearchFilters&&(y=u.options.preSearchFilters.reduce((_,w)=>w(_),p));const b=g(y);return"postSearchFilters"in u.options&&u.options.postSearchFilters?u.options.postSearchFilters.reduce((_,w)=>w(_),b):b};h.push(m)}if(s&&u.options.validateSearch){const m=({search:p,next:g})=>{const y=g(p);try{return{...y,...jS(u.options.validateSearch,y)??void 0}}catch{return y}};h.push(m)}return l.concat(h)},[])??[],i=({search:l})=>e.search?e.search===!0?l:Ho(e.search,l):{};r.push(i);const a=(l,u)=>{if(l>=r.length)return u;const h=r[l];return h({search:u,next:p=>a(l+1,p)})};return a(0,t)}const nH="Error preloading route! ";class R6{constructor(e){if(this.init=n=>{this.originalIndex=n.originalIndex;const s=this.options,r=!s?.path&&!s?.id;this.parentRoute=this.options.getParentRoute?.(),r?this._path=Or:this.parentRoute||Wa(!1);let i=r?Or:s?.path;i&&i!=="/"&&(i=y6(i));const a=s?.id||i;let l=r?Or:q0([this.parentRoute.id===Or?"":this.parentRoute.id,a]);i===Or&&(i="/"),l!==Or&&(l=q0(["/",l]));const u=l===Or?"/":q0([this.parentRoute.fullPath,i]);this._path=i,this._id=l,this._fullPath=u,this._to=u},this.addChildren=n=>this._addFileChildren(n),this._addFileChildren=n=>(Array.isArray(n)&&(this.children=n),typeof n=="object"&&n!==null&&(this.children=Object.values(n)),this),this._addFileTypes=()=>this,this.updateLoader=n=>(Object.assign(this.options,n),this),this.update=n=>(Object.assign(this.options,n),this),this.lazy=n=>(this.lazyFn=n,this),this.options=e||{},this.isRoot=!e?.getParentRoute,e?.id&&e?.path)throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}}class sH extends R6{constructor(e){super(e)}}function zC(t){const e=t.errorComponent??Wv;return f.jsx(rH,{getResetKey:t.getResetKey,onCatch:t.onCatch,children:({error:n,reset:s})=>n?F.createElement(e,{error:n,reset:s}):t.children})}class rH extends F.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(e){return{resetKey:e.getResetKey()}}static getDerivedStateFromError(e){return{error:e}}reset(){this.setState({error:null})}componentDidUpdate(e,n){n.error&&n.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(e,n){this.props.onCatch&&this.props.onCatch(e,n)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function Wv({error:t}){const[e,n]=F.useState(!1);return f.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[f.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),f.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>n(s=>!s),children:e?"Hide Error":"Show Error"})]}),f.jsx("div",{style:{height:".25rem"}}),e?f.jsx("div",{children:f.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:t.message?f.jsx("code",{children:t.message}):null})}):null]})}function iH({children:t,fallback:e=null}){return aH()?f.jsx(Is.Fragment,{children:t}):f.jsx(Is.Fragment,{children:e})}function aH(){return Is.useSyncExternalStore(oH,()=>!0,()=>!1)}function oH(){return()=>{}}var Gx={exports:{}},Yx={},Zx={exports:{}},Jx={};var L3;function lH(){if(L3)return Jx;L3=1;var t=Th();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:e,s=t.useState,r=t.useEffect,i=t.useLayoutEffect,a=t.useDebugValue;function l(p,g){var y=g(),b=s({inst:{value:y,getSnapshot:g}}),_=b[0].inst,w=b[1];return i(function(){_.value=y,_.getSnapshot=g,u(_)&&w({inst:_})},[p,y,g]),r(function(){return u(_)&&w({inst:_}),p(function(){u(_)&&w({inst:_})})},[p]),a(y),y}function u(p){var g=p.getSnapshot;p=p.value;try{var y=g();return!n(p,y)}catch{return!0}}function h(p,g){return g()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:l;return Jx.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,Jx}var P3;function cH(){return P3||(P3=1,Zx.exports=lH()),Zx.exports}var B3;function uH(){if(B3)return Yx;B3=1;var t=Th(),e=cH();function n(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var s=typeof Object.is=="function"?Object.is:n,r=e.useSyncExternalStore,i=t.useRef,a=t.useEffect,l=t.useMemo,u=t.useDebugValue;return Yx.useSyncExternalStoreWithSelector=function(h,m,p,g,y){var b=i(null);if(b.current===null){var _={hasValue:!1,value:null};b.current=_}else _=b.current;b=l(function(){function k(N){if(!C){if(C=!0,E=N,N=g(N),y!==void 0&&_.hasValue){var M=_.value;if(y(M,N))return A=M}return A=N}if(M=A,s(E,N))return M;var I=g(N);return y!==void 0&&y(M,I)?(E=N,M):(E=N,A=I)}var C=!1,E,A,R=p===void 0?null:p;return[function(){return k(m())},R===null?void 0:function(){return k(R())}]},[m,p,g,y]);var w=r(h,b[0],b[1]);return a(function(){_.hasValue=!0,_.value=w},[w]),u(w),w},Yx}var $3;function hH(){return $3||($3=1,Gx.exports=uH()),Gx.exports}var dH=hH();function fH(t,e=s=>s,n={}){const s=n.equal??pH;return dH.useSyncExternalStoreWithSelector(t.subscribe,()=>t.state,()=>t.state,e,s)}function pH(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[s,r]of t)if(!e.has(s)||!Object.is(r,e.get(s)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0}if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();const n=z3(t);if(n.length!==z3(e).length)return!1;for(let s=0;s<n.length;s++)if(!Object.prototype.hasOwnProperty.call(e,n[s])||!Object.is(t[n[s]],e[n[s]]))return!1;return!0}function z3(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}const Xx=F.createContext(null);function T6(){return typeof document>"u"?Xx:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=Xx,Xx)}function $r(t){const e=F.useContext(T6());return t?.warn,e}function ur(t){const e=$r({warn:t?.router===void 0}),n=t?.router||e,s=F.useRef(void 0);return fH(n.__store,r=>{if(t?.select){if(t.structuralSharing??n.options.defaultStructuralSharing){const i=ri(s.current,t.select(r));return s.current=i,i}return t.select(r)}return r})}const Gv=F.createContext(void 0),mH=F.createContext(void 0);function na(t){const e=F.useContext(t.from?mH:Gv);return ur({select:s=>{const r=s.matches.find(i=>t.from?t.from===i.routeId:i.id===e);if(Wa(!((t.shouldThrow??!0)&&!r),`Could not find ${t.from?`an active match from "${t.from}"`:"a nearest match!"}`),r!==void 0)return t.select?t.select(r):r},structuralSharing:t.structuralSharing})}function FC(t){return na({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.loaderData):e.loaderData})}function UC(t){const{select:e,...n}=t;return na({...n,select:s=>e?e(s.loaderDeps):s.loaderDeps})}function nm(t){return na({from:t.from,shouldThrow:t.shouldThrow,structuralSharing:t.structuralSharing,strict:t.strict,select:e=>{const n=t.strict===!1?e.params:e._strictParams;return t.select?t.select(n):n}})}function Yv(t){return na({from:t.from,strict:t.strict,shouldThrow:t.shouldThrow,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.search):e.search})}const s0=typeof window<"u"?F.useLayoutEffect:F.useEffect;function Qx(t){const e=F.useRef({value:t,prev:null}),n=e.current.value;return t!==n&&(e.current={value:t,prev:n}),e.current.prev}function gH(t,e,n={},s={}){F.useEffect(()=>{if(!t.current||s.disabled||typeof IntersectionObserver!="function")return;const r=new IntersectionObserver(([i])=>{e(i)},n);return r.observe(t.current),()=>{r.disconnect()}},[e,n,s.disabled,t])}function yH(t){const e=F.useRef(null);return F.useImperativeHandle(t,()=>e.current,[]),e}function jh(t){const e=$r();return F.useCallback(n=>e.navigate({...n,from:n.from??t?.from}),[t?.from,e])}var HC=p6();function vH(t,e){const n=$r(),[s,r]=F.useState(!1),i=F.useRef(!1),a=yH(e),{activeProps:l,inactiveProps:u,activeOptions:h,to:m,preload:p,preloadDelay:g,hashScrollIntoView:y,replace:b,startTransition:_,resetScroll:w,viewTransition:k,children:C,target:E,disabled:A,style:R,className:N,onClick:M,onFocus:I,onMouseEnter:W,onMouseLeave:P,onTouchStart:G,ignoreBlocker:$,params:U,search:Z,hash:K,state:B,mask:J,reloadDocument:Y,unsafeRelative:z,from:O,_fromLocation:L,...V}=t,T=ur({select:De=>De.location.search,structuralSharing:!0}),Q=t.from,te=F.useMemo(()=>({...t,from:Q}),[n,T,Q,t._fromLocation,t.hash,t.to,t.search,t.params,t.state,t.mask,t.unsafeRelative]),X=F.useMemo(()=>n.buildLocation({...te}),[n,te]),oe=F.useMemo(()=>{if(A)return;let De=X.maskedLocation?X.maskedLocation.url.href:X.url.href,Je=!1;return n.origin&&(De.startsWith(n.origin)?De=n.history.createHref(De.replace(n.origin,""))||"/":Je=!0),{href:De,external:Je}},[A,X.maskedLocation,X.url,n.origin,n.history]),xe=F.useMemo(()=>{if(oe?.external)return oe.href;try{return new URL(m),m}catch{}},[m,oe]),Se=t.reloadDocument||xe?!1:p??n.options.defaultPreload,Xe=g??n.options.defaultPreloadDelay??0,Ke=ur({select:De=>{if(xe)return!1;if(h?.exact){if(!AU(De.location.pathname,X.pathname,n.basepath))return!1}else{const Je=ky(De.location.pathname,n.basepath),Ee=ky(X.pathname,n.basepath);if(!(Je.startsWith(Ee)&&(Je.length===Ee.length||Je[Ee.length]==="/")))return!1}return(h?.includeSearch??!0)&&!nc(De.location.search,X.search,{partial:!h?.exact,ignoreUndefined:!h?.explicitUndefined})?!1:h?.includeHash?De.location.hash===X.hash:!0}}),st=F.useCallback(()=>{n.preloadRoute({...te}).catch(De=>{console.warn(De),console.warn(nH)})},[n,te]),Le=F.useCallback(De=>{De?.isIntersecting&&st()},[st]);gH(a,Le,SH,{disabled:!!A||Se!=="viewport"}),F.useEffect(()=>{i.current||!A&&Se==="render"&&(st(),i.current=!0)},[A,st,Se]);const Ge=De=>{const Je=De.currentTarget.getAttribute("target"),Ee=E!==void 0?E:Je;if(!A&&!kH(De)&&!De.defaultPrevented&&(!Ee||Ee==="_self")&&De.button===0){De.preventDefault(),HC.flushSync(()=>{r(!0)});const ae=n.subscribe("onResolved",()=>{ae(),r(!1)});n.navigate({...te,replace:b,resetScroll:w,hashScrollIntoView:y,startTransition:_,viewTransition:k,ignoreBlocker:$})}};if(xe)return{...V,ref:a,href:xe,...C&&{children:C},...E&&{target:E},...A&&{disabled:A},...R&&{style:R},...N&&{className:N},...M&&{onClick:M},...I&&{onFocus:I},...W&&{onMouseEnter:W},...P&&{onMouseLeave:P},...G&&{onTouchStart:G}};const ct=De=>{A||Se&&st()},ut=ct,Re=De=>{if(!(A||!Se))if(!Xe)st();else{const Je=De.target;if(Jd.has(Je))return;const Ee=setTimeout(()=>{Jd.delete(Je),st()},Xe);Jd.set(Je,Ee)}},mt=De=>{if(A||!Se||!Xe)return;const Je=De.target,Ee=Jd.get(Je);Ee&&(clearTimeout(Ee),Jd.delete(Je))},pt=Ke?Ho(l,{})??bH:ew,At=Ke?ew:Ho(u,{})??ew,Me=[N,pt.className,At.className].filter(Boolean).join(" "),ze=(R||pt.style||At.style)&&{...R,...pt.style,...At.style};return{...V,...pt,...At,href:oe?.href,ref:a,onClick:Xd([M,Ge]),onFocus:Xd([I,ct]),onMouseEnter:Xd([W,Re]),onMouseLeave:Xd([P,mt]),onTouchStart:Xd([G,ut]),disabled:!!A,target:E,...ze&&{style:ze},...Me&&{className:Me},...A&&_H,...Ke&&xH,...s&&wH}}const ew={},bH={className:"active"},_H={role:"link","aria-disabled":!0},xH={"data-status":"active","aria-current":"page"},wH={"data-transitioning":"transitioning"},Jd=new WeakMap,SH={rootMargin:"100px"},Xd=t=>e=>{for(const n of t)if(n){if(e.defaultPrevented)return;n(e)}},ji=F.forwardRef((t,e)=>{const{_asChild:n,...s}=t,{type:r,ref:i,...a}=vH(s,e),l=typeof s.children=="function"?s.children({isActive:a["data-status"]==="active"}):s.children;return n===void 0&&delete a.disabled,F.createElement(n||"a",{...a,ref:i},l)});function kH(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}let CH=class extends R6{constructor(e){super(e),this.useMatch=n=>na({select:n?.select,from:this.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>na({...n,from:this.id,select:s=>n?.select?n.select(s.context):s.context}),this.useSearch=n=>Yv({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useParams=n=>nm({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useLoaderDeps=n=>UC({...n,from:this.id}),this.useLoaderData=n=>FC({...n,from:this.id}),this.useNavigate=()=>jh({from:this.fullPath}),this.Link=Is.forwardRef((n,s)=>f.jsx(ji,{ref:s,from:this.fullPath,...n})),this.$$typeof=Symbol.for("react.memo")}};function la(t){return new CH(t)}class NH extends sH{constructor(e){super(e),this.useMatch=n=>na({select:n?.select,from:this.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>na({...n,from:this.id,select:s=>n?.select?n.select(s.context):s.context}),this.useSearch=n=>Yv({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useParams=n=>nm({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useLoaderDeps=n=>UC({...n,from:this.id}),this.useLoaderData=n=>FC({...n,from:this.id}),this.useNavigate=()=>jh({from:this.fullPath}),this.Link=Is.forwardRef((n,s)=>f.jsx(ji,{ref:s,from:this.fullPath,...n})),this.$$typeof=Symbol.for("react.memo")}}function EH(t){return new NH(t)}function F3(t){return typeof t=="object"?new U3(t,{silent:!0}).createRoute(t):new U3(t,{silent:!0}).createRoute}class U3{constructor(e,n){this.path=e,this.createRoute=s=>{this.silent;const r=la(s);return r.isRoot=!1,r},this.silent=n?.silent}}class H3{constructor(e){this.useMatch=n=>na({select:n?.select,from:this.options.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>na({from:this.options.id,select:s=>n?.select?n.select(s.context):s.context}),this.useSearch=n=>Yv({select:n?.select,structuralSharing:n?.structuralSharing,from:this.options.id}),this.useParams=n=>nm({select:n?.select,structuralSharing:n?.structuralSharing,from:this.options.id}),this.useLoaderDeps=n=>UC({...n,from:this.options.id}),this.useLoaderData=n=>FC({...n,from:this.options.id}),this.useNavigate=()=>{const n=$r();return jh({from:n.routesById[this.options.id].fullPath})},this.options=e,this.$$typeof=Symbol.for("react.memo")}}function V3(t){return typeof t=="object"?new H3(t):e=>new H3({id:t,...e})}function AH(){const t=$r(),e=F.useRef({router:t,mounted:!1}),[n,s]=F.useState(!1),{hasPendingMatches:r,isLoading:i}=ur({select:p=>({isLoading:p.isLoading,hasPendingMatches:p.matches.some(g=>g.status==="pending")}),structuralSharing:!0}),a=Qx(i),l=i||n||r,u=Qx(l),h=i||r,m=Qx(h);return t.startTransition=p=>{s(!0),F.startTransition(()=>{p(),s(!1)})},F.useEffect(()=>{const p=t.history.subscribe(t.load),g=t.buildLocation({to:t.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return sc(t.latestLocation.publicHref)!==sc(g.publicHref)&&t.commitLocation({...g,replace:!0}),()=>{p()}},[t,t.history]),s0(()=>{if(typeof window<"u"&&t.ssr||e.current.router===t&&e.current.mounted)return;e.current={router:t,mounted:!0},(async()=>{try{await t.load()}catch(g){console.error(g)}})()},[t]),s0(()=>{a&&!i&&t.emit({type:"onLoad",...rc(t.state)})},[a,t,i]),s0(()=>{m&&!h&&t.emit({type:"onBeforeRouteMount",...rc(t.state)})},[h,m,t]),s0(()=>{if(u&&!l){const p=rc(t.state);t.emit({type:"onResolved",...p}),t.__store.setState(g=>({...g,status:"idle",resolvedLocation:g.location})),p.hrefChanged&&LU(t)}},[l,u,t]),null}function RH(t){const e=ur({select:n=>`not-found-${n.location.pathname}-${n.status}`});return f.jsx(zC,{getResetKey:()=>e,onCatch:(n,s)=>{if(Lr(n))t.onCatch?.(n,s);else throw n},errorComponent:({error:n})=>{if(Lr(n))return t.fallback?.(n);throw n},children:t.children})}function TH(){return f.jsx("p",{children:"Not Found"})}function Du(t){return f.jsx(f.Fragment,{children:t.children})}function j6(t,e,n){return e.options.notFoundComponent?f.jsx(e.options.notFoundComponent,{...n}):t.options.defaultNotFoundComponent?f.jsx(t.options.defaultNotFoundComponent,{...n}):f.jsx(TH,{})}function jH({children:t}){const e=$r();return e.isServer?f.jsx("script",{nonce:e.options.ssr?.nonce,dangerouslySetInnerHTML:{__html:t+";document.currentScript.remove()"}}):null}function OH(){const t=$r();if(!t.isScrollRestoring||!t.isServer||typeof t.options.scrollRestoration=="function"&&!t.options.scrollRestoration({location:t.latestLocation}))return null;const n=(t.options.getScrollRestorationKey||TS)(t.latestLocation),s=n!==TS(t.latestLocation)?n:void 0,r={storageKey:Cy,shouldScrollRestoration:!0};return s&&(r.key=s),f.jsx(jH,{children:`(${b6.toString()})(${JSON.stringify(r)})`})}const O6=F.memo(function({matchId:e}){const n=$r(),s=ur({select:k=>{const C=k.matches.find(E=>E.id===e);return Wa(C),{routeId:C.routeId,ssr:C.ssr,_displayPending:C._displayPending}},structuralSharing:!0}),r=n.routesById[s.routeId],i=r.options.pendingComponent??n.options.defaultPendingComponent,a=i?f.jsx(i,{}):null,l=r.options.errorComponent??n.options.defaultErrorComponent,u=r.options.onCatch??n.options.defaultOnCatch,h=r.isRoot?r.options.notFoundComponent??n.options.notFoundRoute?.options.component:r.options.notFoundComponent,m=s.ssr===!1||s.ssr==="data-only",p=(!r.isRoot||r.options.wrapInSuspense||m)&&(r.options.wrapInSuspense??i??(r.options.errorComponent?.preload||m))?F.Suspense:Du,g=l?zC:Du,y=h?RH:Du,b=ur({select:k=>k.loadedAt}),_=ur({select:k=>{const C=k.matches.findIndex(E=>E.id===e);return k.matches[C-1]?.routeId}}),w=r.isRoot?r.options.shellComponent??Du:Du;return f.jsxs(w,{children:[f.jsx(Gv.Provider,{value:e,children:f.jsx(p,{fallback:a,children:f.jsx(g,{getResetKey:()=>b,errorComponent:l||Wv,onCatch:(k,C)=>{if(Lr(k))throw k;u?.(k,C)},children:f.jsx(y,{fallback:k=>{if(!h||k.routeId&&k.routeId!==s.routeId||!k.routeId&&!r.isRoot)throw k;return F.createElement(h,k)},children:m||s._displayPending?f.jsx(iH,{fallback:a,children:f.jsx(q3,{matchId:e})}):f.jsx(q3,{matchId:e})})})})}),_===Or&&n.options.scrollRestoration?f.jsxs(f.Fragment,{children:[f.jsx(MH,{}),f.jsx(OH,{})]}):null]})});function MH(){const t=$r(),e=F.useRef(void 0);return f.jsx("script",{suppressHydrationWarning:!0,ref:n=>{n&&(e.current===void 0||e.current.href!==t.latestLocation.href)&&(t.emit({type:"onRendered",...rc(t.state)}),e.current=t.latestLocation)}},t.latestLocation.state.__TSR_key)}const q3=F.memo(function({matchId:e}){const n=$r(),{match:s,key:r,routeId:i}=ur({select:u=>{const h=u.matches.find(b=>b.id===e),m=h.routeId,g=(n.routesById[m].options.remountDeps??n.options.defaultRemountDeps)?.({routeId:m,loaderDeps:h.loaderDeps,params:h._strictParams,search:h._strictSearch});return{key:g?JSON.stringify(g):void 0,routeId:m,match:{id:h.id,status:h.status,error:h.error,invalid:h.invalid,_forcePending:h._forcePending,_displayPending:h._displayPending}}},structuralSharing:!0}),a=n.routesById[i],l=F.useMemo(()=>{const u=a.options.component??n.options.defaultComponent;return u?f.jsx(u,{},r):f.jsx(M6,{})},[r,a.options.component,n.options.defaultComponent]);if(s._displayPending)throw n.getMatch(s.id)?._nonReactive.displayPendingPromise;if(s._forcePending)throw n.getMatch(s.id)?._nonReactive.minPendingPromise;if(s.status==="pending"){const u=a.options.pendingMinMs??n.options.defaultPendingMinMs;if(u){const h=n.getMatch(s.id);if(h&&!h._nonReactive.minPendingPromise&&!n.isServer){const m=ch();h._nonReactive.minPendingPromise=m,setTimeout(()=>{m.resolve(),h._nonReactive.minPendingPromise=void 0},u)}}throw n.getMatch(s.id)?._nonReactive.loadPromise}if(s.status==="notFound")return Wa(Lr(s.error)),j6(n,a,s.error);if(s.status==="redirected")throw Wa(ci(s.error)),n.getMatch(s.id)?._nonReactive.loadPromise;if(s.status==="error"){if(n.isServer){const u=(a.options.errorComponent??n.options.defaultErrorComponent)||Wv;return f.jsx(u,{error:s.error,reset:void 0,info:{componentStack:""}})}throw s.error}return l}),M6=F.memo(function(){const e=$r(),n=F.useContext(Gv),s=ur({select:h=>h.matches.find(m=>m.id===n)?.routeId}),r=e.routesById[s],i=ur({select:h=>{const p=h.matches.find(g=>g.id===n);return Wa(p),p.globalNotFound}}),a=ur({select:h=>{const m=h.matches,p=m.findIndex(g=>g.id===n);return m[p+1]?.id}}),l=e.options.defaultPendingComponent?f.jsx(e.options.defaultPendingComponent,{}):null;if(i)return j6(e,r,void 0);if(!a)return null;const u=f.jsx(O6,{matchId:a});return s===Or?f.jsx(F.Suspense,{fallback:l,children:u}):u});function IH(){const t=$r(),n=t.routesById[Or].options.pendingComponent??t.options.defaultPendingComponent,s=n?f.jsx(n,{}):null,r=t.isServer||typeof document<"u"&&t.ssr?Du:F.Suspense,i=f.jsxs(r,{fallback:s,children:[!t.isServer&&f.jsx(AH,{}),f.jsx(DH,{})]});return t.options.InnerWrap?f.jsx(t.options.InnerWrap,{children:i}):i}function DH(){const t=$r(),e=ur({select:r=>r.matches[0]?.id}),n=ur({select:r=>r.loadedAt}),s=e?f.jsx(O6,{matchId:e}):null;return f.jsx(Gv.Provider,{value:e,children:t.options.disableGlobalCatchBoundary?s:f.jsx(zC,{getResetKey:()=>n,errorComponent:Wv,onCatch:r=>{r.message||r.toString()},children:s})})}const LH=t=>new PH(t);class PH extends JU{constructor(e){super(e)}}typeof globalThis<"u"?(globalThis.createFileRoute=F3,globalThis.createLazyFileRoute=V3):typeof window<"u"&&(window.createFileRoute=F3,window.createLazyFileRoute=V3);function BH({router:t,children:e,...n}){Object.keys(n).length>0&&t.update({...t.options,...n,context:{...t.options.context,...n.context}});const s=T6(),r=f.jsx(s.Provider,{value:t,children:e});return t.options.Wrap?f.jsx(t.options.Wrap,{children:r}):r}function $H({router:t,...e}){return f.jsx(BH,{router:t,...e,children:f.jsx(IH,{})})}let bf={};async function zH(){try{const t=await fetch("/config.json");if(t.ok){const e=await t.json();bf={...bf,...e}}else console.warn("Failed to load config.json, using defaults");return bf}catch(t){return console.warn("Error loading config:",t),bf}}function sa(){return bf}function FH(t,e){return e.some(n=>n.includes("*")?new RegExp(`^${n.replace(/\*/g,".*")}$`).test(t):n===t)}var sm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},UH={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},HH=class{#t=UH;#e=!1;setTimeoutProvider(t){this.#t=t}setTimeout(t,e){return this.#t.setTimeout(t,e)}clearTimeout(t){this.#t.clearTimeout(t)}setInterval(t,e){return this.#t.setInterval(t,e)}clearInterval(t){this.#t.clearInterval(t)}},Gl=new HH;function VH(t){setTimeout(t,0)}var dc=typeof window>"u"||"Deno"in globalThis;function or(){}function qH(t,e){return typeof t=="function"?t(e):t}function OS(t){return typeof t=="number"&&t>=0&&t!==1/0}function I6(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Qo(t,e){return typeof t=="function"?t(e):t}function ii(t,e){return typeof t=="function"?t(e):t}function K3(t,e){const{type:n="all",exact:s,fetchStatus:r,predicate:i,queryKey:a,stale:l}=t;if(a){if(s){if(e.queryHash!==VC(a,e.options))return!1}else if(!Ap(e.queryKey,a))return!1}if(n!=="all"){const u=e.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||r&&r!==e.state.fetchStatus||i&&!i(e))}function W3(t,e){const{exact:n,status:s,predicate:r,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Ep(e.options.mutationKey)!==Ep(i))return!1}else if(!Ap(e.options.mutationKey,i))return!1}return!(s&&e.state.status!==s||r&&!r(e))}function VC(t,e){return(e?.queryKeyHashFn||Ep)(t)}function Ep(t){return JSON.stringify(t,(e,n)=>IS(n)?Object.keys(n).sort().reduce((s,r)=>(s[r]=n[r],s),{}):n)}function Ap(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Ap(t[n],e[n])):!1}var KH=Object.prototype.hasOwnProperty;function D6(t,e){if(t===e)return t;const n=G3(t)&&G3(e);if(!n&&!(IS(t)&&IS(e)))return e;const r=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),a=i.length,l=n?new Array(a):{};let u=0;for(let h=0;h<a;h++){const m=n?h:i[h],p=t[m],g=e[m];if(p===g){l[m]=p,(n?h<r:KH.call(t,m))&&u++;continue}if(p===null||g===null||typeof p!="object"||typeof g!="object"){l[m]=g;continue}const y=D6(p,g);l[m]=y,y===p&&u++}return r===a&&u===r?t:l}function MS(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function G3(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function IS(t){if(!Y3(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Y3(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Y3(t){return Object.prototype.toString.call(t)==="[object Object]"}function WH(t){return new Promise(e=>{Gl.setTimeout(e,t)})}function DS(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?D6(t,e):e}function Z3(t){return t}function GH(t,e,n=0){const s=[...t,e];return n&&s.length>n?s.slice(1):s}function YH(t,e,n=0){const s=[e,...t];return n&&s.length>n?s.slice(0,-1):s}var qC=Symbol();function L6(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===qC?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function P6(t,e){return typeof t=="function"?t(...e):!!t}function ZH(t,e,n){let s=!1,r;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(r??=e(),s||(s=!0,r.aborted?n():r.addEventListener("abort",n,{once:!0})),r)}),t}var JH=class extends sm{#t;#e;#n;constructor(){super(),this.#n=t=>{if(!dc&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#e||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(t){this.#n=t,this.#e?.(),this.#e=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#t!==t&&(this.#t=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#t=="boolean"?this.#t:globalThis.document?.visibilityState!=="hidden"}},KC=new JH;function LS(){let t,e;const n=new Promise((r,i)=>{t=r,e=i});n.status="pending",n.catch(()=>{});function s(r){Object.assign(n,r),delete n.resolve,delete n.reject}return n.resolve=r=>{s({status:"fulfilled",value:r}),t(r)},n.reject=r=>{s({status:"rejected",reason:r}),e(r)},n}var XH=VH;function QH(){let t=[],e=0,n=l=>{l()},s=l=>{l()},r=XH;const i=l=>{e?t.push(l):r(()=>{n(l)})},a=()=>{const l=t;t=[],l.length&&r(()=>{s(()=>{l.forEach(u=>{n(u)})})})};return{batch:l=>{let u;e++;try{u=l()}finally{e--,e||a()}return u},batchCalls:l=>(...u)=>{i(()=>{l(...u)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{r=l}}}var bs=QH(),eV=class extends sm{#t=!0;#e;#n;constructor(){super(),this.#n=t=>{if(!dc&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#e||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(t){this.#n=t,this.#e?.(),this.#e=t(this.setOnline.bind(this))}setOnline(t){this.#t!==t&&(this.#t=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#t}},Ay=new eV;function tV(t){return Math.min(1e3*2**t,3e4)}function B6(t){return(t??"online")==="online"?Ay.isOnline():!0}var PS=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function $6(t){let e=!1,n=0,s;const r=LS(),i=()=>r.status!=="pending",a=_=>{if(!i()){const w=new PS(_);g(w),t.onCancel?.(w)}},l=()=>{e=!0},u=()=>{e=!1},h=()=>KC.isFocused()&&(t.networkMode==="always"||Ay.isOnline())&&t.canRun(),m=()=>B6(t.networkMode)&&t.canRun(),p=_=>{i()||(s?.(),r.resolve(_))},g=_=>{i()||(s?.(),r.reject(_))},y=()=>new Promise(_=>{s=w=>{(i()||h())&&_(w)},t.onPause?.()}).then(()=>{s=void 0,i()||t.onContinue?.()}),b=()=>{if(i())return;let _;const w=n===0?t.initialPromise:void 0;try{_=w??t.fn()}catch(k){_=Promise.reject(k)}Promise.resolve(_).then(p).catch(k=>{if(i())return;const C=t.retry??(dc?0:3),E=t.retryDelay??tV,A=typeof E=="function"?E(n,k):E,R=C===!0||typeof C=="number"&&n<C||typeof C=="function"&&C(n,k);if(e||!R){g(k);return}n++,t.onFail?.(n,k),WH(A).then(()=>h()?void 0:y()).then(()=>{e?g(k):b()})})};return{promise:r,status:()=>r.status,cancel:a,continue:()=>(s?.(),r),cancelRetry:l,continueRetry:u,canStart:m,start:()=>(m()?b():y().then(b),r)}}var z6=class{#t;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),OS(this.gcTime)&&(this.#t=Gl.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(dc?1/0:300*1e3))}clearGcTimeout(){this.#t&&(Gl.clearTimeout(this.#t),this.#t=void 0)}},nV=class extends z6{#t;#e;#n;#r;#s;#o;#i;constructor(t){super(),this.#i=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.client,this.#n=this.#r.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#t=X3(this.options),this.state=t.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(t){if(this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=X3(this.options);e.data!==void 0&&(this.setState(J3(e.data,e.dataUpdatedAt)),this.#t=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=DS(this.state.data,t,this.options);return this.#a({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#a({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#s?.promise;return this.#s?.cancel(t),e?e.then(or).catch(or):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(t=>ii(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===qC||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Qo(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!I6(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#s&&(this.#i?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(t&&this.setOptions(t),!this.options.queryFn){const l=this.observers.find(u=>u.options.queryFn);l&&this.setOptions(l.options)}const n=new AbortController,s=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#i=!0,n.signal)})},r=()=>{const l=L6(this.options,e),h=(()=>{const m={client:this.#r,queryKey:this.queryKey,meta:this.meta};return s(m),m})();return this.#i=!1,this.options.persister?this.options.persister(l,h,this):l(h)},a=(()=>{const l={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:r};return s(l),l})();this.options.behavior?.onFetch(a,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==a.fetchOptions?.meta)&&this.#a({type:"fetch",meta:a.fetchOptions?.meta}),this.#s=$6({initialPromise:e?.initialPromise,fn:a.fetchFn,onCancel:l=>{l instanceof PS&&l.revert&&this.setState({...this.#e,fetchStatus:"idle"}),n.abort()},onFail:(l,u)=>{this.#a({type:"failed",failureCount:l,error:u})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0});try{const l=await this.#s.start();if(l===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(l),this.#n.config.onSuccess?.(l,this),this.#n.config.onSettled?.(l,this.state.error,this),l}catch(l){if(l instanceof PS){if(l.silent)return this.#s.promise;if(l.revert){if(this.state.data===void 0)throw l;return this.state.data}}throw this.#a({type:"error",error:l}),this.#n.config.onError?.(l,this),this.#n.config.onSettled?.(this.state.data,l,this),l}finally{this.scheduleGc()}}#a(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...F6(n.data,this.options),fetchMeta:t.meta??null};case"success":const s={...n,...J3(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#e=t.manual?s:void 0,s;case"error":const r=t.error;return{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),bs.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function F6(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:B6(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function J3(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function X3(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,s=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var sV=class extends sm{constructor(t,e){super(),this.options=e,this.#t=t,this.#a=null,this.#i=LS(),this.bindMethods(),this.setOptions(e)}#t;#e=void 0;#n=void 0;#r=void 0;#s;#o;#i;#a;#p;#m;#c;#u;#l;#h;#d=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),Q3(this.#e,this.options)?this.#f():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return BS(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return BS(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#_(),this.#x(),this.#e.removeObserver(this)}setOptions(t){const e=this.options,n=this.#e;if(this.options=this.#t.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ii(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#e.setOptions(this.options),e._defaulted&&!MS(this.options,e)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const s=this.hasListeners();s&&eT(this.#e,n,this.options,e)&&this.#f(),this.updateResult(),s&&(this.#e!==n||ii(this.options.enabled,this.#e)!==ii(e.enabled,this.#e)||Qo(this.options.staleTime,this.#e)!==Qo(e.staleTime,this.#e))&&this.#g();const r=this.#y();s&&(this.#e!==n||ii(this.options.enabled,this.#e)!==ii(e.enabled,this.#e)||r!==this.#h)&&this.#v(r)}getOptimisticResult(t){const e=this.#t.getQueryCache().build(this.#t,t),n=this.createResult(e,t);return iV(this,n)&&(this.#r=n,this.#o=this.options,this.#s=this.#e.state),n}getCurrentResult(){return this.#r}trackResult(t,e){return new Proxy(t,{get:(n,s)=>(this.trackProp(s),e?.(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#i.status==="pending"&&this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,s))})}trackProp(t){this.#d.add(t)}getCurrentQuery(){return this.#e}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#t.defaultQueryOptions(t),n=this.#t.getQueryCache().build(this.#t,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#f({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#f(t){this.#w();let e=this.#e.fetch(this.options,t);return t?.throwOnError||(e=e.catch(or)),e}#g(){this.#_();const t=Qo(this.options.staleTime,this.#e);if(dc||this.#r.isStale||!OS(t))return;const n=I6(this.#r.dataUpdatedAt,t)+1;this.#u=Gl.setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#v(t){this.#x(),this.#h=t,!(dc||ii(this.options.enabled,this.#e)===!1||!OS(this.#h)||this.#h===0)&&(this.#l=Gl.setInterval(()=>{(this.options.refetchIntervalInBackground||KC.isFocused())&&this.#f()},this.#h))}#b(){this.#g(),this.#v(this.#y())}#_(){this.#u&&(Gl.clearTimeout(this.#u),this.#u=void 0)}#x(){this.#l&&(Gl.clearInterval(this.#l),this.#l=void 0)}createResult(t,e){const n=this.#e,s=this.options,r=this.#r,i=this.#s,a=this.#o,u=t!==n?t.state:this.#n,{state:h}=t;let m={...h},p=!1,g;if(e._optimisticResults){const I=this.hasListeners(),W=!I&&Q3(t,e),P=I&&eT(t,n,e,s);(W||P)&&(m={...m,...F6(h.data,t.options)}),e._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:y,errorUpdatedAt:b,status:_}=m;g=m.data;let w=!1;if(e.placeholderData!==void 0&&g===void 0&&_==="pending"){let I;r?.isPlaceholderData&&e.placeholderData===a?.placeholderData?(I=r.data,w=!0):I=typeof e.placeholderData=="function"?e.placeholderData(this.#c?.state.data,this.#c):e.placeholderData,I!==void 0&&(_="success",g=DS(r?.data,I,e),p=!0)}if(e.select&&g!==void 0&&!w)if(r&&g===i?.data&&e.select===this.#p)g=this.#m;else try{this.#p=e.select,g=e.select(g),g=DS(r?.data,g,e),this.#m=g,this.#a=null}catch(I){this.#a=I}this.#a&&(y=this.#a,g=this.#m,b=Date.now(),_="error");const k=m.fetchStatus==="fetching",C=_==="pending",E=_==="error",A=C&&k,R=g!==void 0,M={status:_,fetchStatus:m.fetchStatus,isPending:C,isSuccess:_==="success",isError:E,isInitialLoading:A,isLoading:A,data:g,dataUpdatedAt:m.dataUpdatedAt,error:y,errorUpdatedAt:b,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>u.dataUpdateCount||m.errorUpdateCount>u.errorUpdateCount,isFetching:k,isRefetching:k&&!C,isLoadingError:E&&!R,isPaused:m.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:E&&R,isStale:WC(t,e),refetch:this.refetch,promise:this.#i,isEnabled:ii(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const I=G=>{M.status==="error"?G.reject(M.error):M.data!==void 0&&G.resolve(M.data)},W=()=>{const G=this.#i=M.promise=LS();I(G)},P=this.#i;switch(P.status){case"pending":t.queryHash===n.queryHash&&I(P);break;case"fulfilled":(M.status==="error"||M.data!==P.value)&&W();break;case"rejected":(M.status!=="error"||M.error!==P.reason)&&W();break}}return M}updateResult(){const t=this.#r,e=this.createResult(this.#e,this.options);if(this.#s=this.#e.state,this.#o=this.options,this.#s.data!==void 0&&(this.#c=this.#e),MS(e,t))return;this.#r=e;const n=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,r=typeof s=="function"?s():s;if(r==="all"||!r&&!this.#d.size)return!0;const i=new Set(r??this.#d);return this.options.throwOnError&&i.add("error"),Object.keys(this.#r).some(a=>{const l=a;return this.#r[l]!==t[l]&&i.has(l)})};this.#S({listeners:n()})}#w(){const t=this.#t.getQueryCache().build(this.#t,this.options);if(t===this.#e)return;const e=this.#e;this.#e=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#S(t){bs.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#t.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function rV(t,e){return ii(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Q3(t,e){return rV(t,e)||t.state.data!==void 0&&BS(t,e,e.refetchOnMount)}function BS(t,e,n){if(ii(e.enabled,t)!==!1&&Qo(e.staleTime,t)!=="static"){const s=typeof n=="function"?n(t):n;return s==="always"||s!==!1&&WC(t,e)}return!1}function eT(t,e,n,s){return(t!==e||ii(s.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&WC(t,n)}function WC(t,e){return ii(e.enabled,t)!==!1&&t.isStaleByTime(Qo(e.staleTime,t))}function iV(t,e){return!MS(t.getCurrentResult(),e)}function tT(t){return{onFetch:(e,n)=>{const s=e.options,r=e.fetchOptions?.meta?.fetchMore?.direction,i=e.state.data?.pages||[],a=e.state.data?.pageParams||[];let l={pages:[],pageParams:[]},u=0;const h=async()=>{let m=!1;const p=b=>{ZH(b,()=>e.signal,()=>m=!0)},g=L6(e.options,e.fetchOptions),y=async(b,_,w)=>{if(m)return Promise.reject();if(_==null&&b.pages.length)return Promise.resolve(b);const C=(()=>{const N={client:e.client,queryKey:e.queryKey,pageParam:_,direction:w?"backward":"forward",meta:e.options.meta};return p(N),N})(),E=await g(C),{maxPages:A}=e.options,R=w?YH:GH;return{pages:R(b.pages,E,A),pageParams:R(b.pageParams,_,A)}};if(r&&i.length){const b=r==="backward",_=b?aV:nT,w={pages:i,pageParams:a},k=_(s,w);l=await y(w,k,b)}else{const b=t??i.length;do{const _=u===0?a[0]??s.initialPageParam:nT(s,l);if(u>0&&_==null)break;l=await y(l,_),u++}while(u<b)}return l};e.options.persister?e.fetchFn=()=>e.options.persister?.(h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=h}}}function nT(t,{pages:e,pageParams:n}){const s=e.length-1;return e.length>0?t.getNextPageParam(e[s],e,n[s],n):void 0}function aV(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var oV=class extends z6{#t;#e;#n;#r;constructor(t){super(),this.#t=t.client,this.mutationId=t.mutationId,this.#n=t.mutationCache,this.#e=[],this.state=t.state||lV(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#s({type:"continue"})},n={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=$6({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(i,a)=>{this.#s({type:"failed",failureCount:i,error:a})},onPause:()=>{this.#s({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const s=this.state.status==="pending",r=!this.#r.canStart();try{if(s)e();else{this.#s({type:"pending",variables:t,isPaused:r}),await this.#n.config.onMutate?.(t,this,n);const a=await this.options.onMutate?.(t,n);a!==this.state.context&&this.#s({type:"pending",context:a,variables:t,isPaused:r})}const i=await this.#r.start();return await this.#n.config.onSuccess?.(i,t,this.state.context,this,n),await this.options.onSuccess?.(i,t,this.state.context,n),await this.#n.config.onSettled?.(i,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(i,null,t,this.state.context,n),this.#s({type:"success",data:i}),i}catch(i){try{await this.#n.config.onError?.(i,t,this.state.context,this,n)}catch(a){Promise.reject(a)}try{await this.options.onError?.(i,t,this.state.context,n)}catch(a){Promise.reject(a)}try{await this.#n.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this,n)}catch(a){Promise.reject(a)}try{await this.options.onSettled?.(void 0,i,t,this.state.context,n)}catch(a){Promise.reject(a)}throw this.#s({type:"error",error:i}),i}finally{this.#n.runNext(this)}}#s(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),bs.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(t)}),this.#n.notify({mutation:this,type:"updated",action:t})})}};function lV(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var cV=class extends sm{constructor(t={}){super(),this.config=t,this.#t=new Set,this.#e=new Map,this.#n=0}#t;#e;#n;build(t,e,n){const s=new oV({client:t,mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(s),s}add(t){this.#t.add(t);const e=r0(t);if(typeof e=="string"){const n=this.#e.get(e);n?n.push(t):this.#e.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#t.delete(t)){const e=r0(t);if(typeof e=="string"){const n=this.#e.get(e);if(n)if(n.length>1){const s=n.indexOf(t);s!==-1&&n.splice(s,1)}else n[0]===t&&this.#e.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=r0(t);if(typeof e=="string"){const s=this.#e.get(e)?.find(r=>r.state.status==="pending");return!s||s===t}else return!0}runNext(t){const e=r0(t);return typeof e=="string"?this.#e.get(e)?.find(s=>s!==t&&s.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){bs.batch(()=>{this.#t.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>W3(e,n))}findAll(t={}){return this.getAll().filter(e=>W3(t,e))}notify(t){bs.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return bs.batch(()=>Promise.all(t.map(e=>e.continue().catch(or))))}};function r0(t){return t.options.scope?.id}var uV=class extends sm{constructor(t={}){super(),this.config=t,this.#t=new Map}#t;build(t,e,n){const s=e.queryKey,r=e.queryHash??VC(s,e);let i=this.get(r);return i||(i=new nV({client:t,queryKey:s,queryHash:r,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(i)),i}add(t){this.#t.has(t.queryHash)||(this.#t.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#t.get(t.queryHash);e&&(t.destroy(),e===t&&this.#t.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){bs.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#t.get(t)}getAll(){return[...this.#t.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>K3(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>K3(t,n)):e}notify(t){bs.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){bs.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){bs.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},hV=class{#t;#e;#n;#r;#s;#o;#i;#a;constructor(t={}){this.#t=t.queryCache||new uV,this.#e=t.mutationCache||new cV,this.#n=t.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#i=KC.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#a=Ay.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#i?.(),this.#i=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#t.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#e.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#t.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#t.build(this,e),s=n.state.data;return s===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Qo(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(t){return this.#t.findAll(t).map(({queryKey:e,state:n})=>{const s=n.data;return[e,s]})}setQueryData(t,e,n){const s=this.defaultQueryOptions({queryKey:t}),i=this.#t.get(s.queryHash)?.state.data,a=qH(e,i);if(a!==void 0)return this.#t.build(this,s).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return bs.batch(()=>this.#t.findAll(t).map(({queryKey:s})=>[s,this.setQueryData(s,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#t.get(e.queryHash)?.state}removeQueries(t){const e=this.#t;bs.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#t;return bs.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},s=bs.batch(()=>this.#t.findAll(t).map(r=>r.cancel(n)));return Promise.all(s).then(or).catch(or)}invalidateQueries(t,e={}){return bs.batch(()=>(this.#t.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},s=bs.batch(()=>this.#t.findAll(t).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let i=r.fetch(void 0,n);return n.throwOnError||(i=i.catch(or)),r.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(or)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#t.build(this,e);return n.isStaleByTime(Qo(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(or).catch(or)}fetchInfiniteQuery(t){return t.behavior=tT(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(or).catch(or)}ensureInfiniteQueryData(t){return t.behavior=tT(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Ay.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(Ep(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(s=>{Ap(t,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(t,e){this.#s.set(Ep(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#s.values()],n={};return e.forEach(s=>{Ap(t,s.mutationKey)&&Object.assign(n,s.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=VC(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===qC&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}},U6=F.createContext(void 0),dV=t=>{const e=F.useContext(U6);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},fV=({client:t,children:e})=>(F.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),f.jsx(U6.Provider,{value:t,children:e})),H6=F.createContext(!1),pV=()=>F.useContext(H6);H6.Provider;function mV(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var gV=F.createContext(mV()),yV=()=>F.useContext(gV),vV=(t,e,n)=>{const s=n?.state.error&&typeof t.throwOnError=="function"?P6(t.throwOnError,[n.state.error,n]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||s)&&(e.isReset()||(t.retryOnMount=!1))},bV=t=>{F.useEffect(()=>{t.clearReset()},[t])},_V=({result:t,errorResetBoundary:e,throwOnError:n,query:s,suspense:r})=>t.isError&&!e.isReset()&&!t.isFetching&&s&&(r&&t.data===void 0||P6(n,[t.error,s])),xV=t=>{if(t.suspense){const n=r=>r==="static"?r:Math.max(r??1e3,1e3),s=t.staleTime;t.staleTime=typeof s=="function"?(...r)=>n(s(...r)):n(s),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},wV=(t,e)=>t.isLoading&&t.isFetching&&!e,SV=(t,e)=>t?.suspense&&e.isPending,sT=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function kV(t,e,n){const s=pV(),r=yV(),i=dV(),a=i.defaultQueryOptions(t);i.getDefaultOptions().queries?._experimental_beforeQuery?.(a);const l=i.getQueryCache().get(a.queryHash);a._optimisticResults=s?"isRestoring":"optimistic",xV(a),vV(a,r,l),bV(r);const u=!i.getQueryCache().get(a.queryHash),[h]=F.useState(()=>new e(i,a)),m=h.getOptimisticResult(a),p=!s&&t.subscribed!==!1;if(F.useSyncExternalStore(F.useCallback(g=>{const y=p?h.subscribe(bs.batchCalls(g)):or;return h.updateResult(),y},[h,p]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),F.useEffect(()=>{h.setOptions(a)},[a,h]),SV(a,m))throw sT(a,h,r);if(_V({result:m,errorResetBoundary:r,throwOnError:a.throwOnError,query:l,suspense:a.suspense}))throw m.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(a,m),a.experimental_prefetchInRender&&!dc&&wV(m,s)&&(u?sT(a,h,r):l?.promise)?.catch(or).finally(()=>{h.updateResult()}),a.notifyOnChangeProps?m:h.trackResult(m)}function Ry(t,e){return kV(t,sV)}function we(t,e,n){function s(l,u){if(l._zod||Object.defineProperty(l,"_zod",{value:{def:u,constr:a,traits:new Set},enumerable:!1}),l._zod.traits.has(t))return;l._zod.traits.add(t),e(l,u);const h=a.prototype,m=Object.keys(h);for(let p=0;p<m.length;p++){const g=m[p];g in l||(l[g]=h[g].bind(l))}}const r=n?.Parent??Object;class i extends r{}Object.defineProperty(i,"name",{value:t});function a(l){var u;const h=n?.Parent?new i:this;s(h,l),(u=h._zod).deferred??(u.deferred=[]);for(const m of h._zod.deferred)m();return h}return Object.defineProperty(a,"init",{value:s}),Object.defineProperty(a,Symbol.hasInstance,{value:l=>n?.Parent&&l instanceof n.Parent?!0:l?._zod?.traits?.has(t)}),Object.defineProperty(a,"name",{value:t}),a}class eh extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class V6 extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const q6={};function fc(t){return q6}function K6(t){const e=Object.values(t).filter(s=>typeof s=="number");return Object.entries(t).filter(([s,r])=>e.indexOf(+s)===-1).map(([s,r])=>r)}function $S(t,e){return typeof e=="bigint"?e.toString():e}function GC(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function YC(t){return t==null}function ZC(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}const rT=Symbol("evaluating");function tn(t,e,n){let s;Object.defineProperty(t,e,{get(){if(s!==rT)return s===void 0&&(s=rT,s=n()),s},set(r){Object.defineProperty(t,e,{value:r})},configurable:!0})}function Oc(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function hl(...t){const e={};for(const n of t){const s=Object.getOwnPropertyDescriptors(n);Object.assign(e,s)}return Object.defineProperties({},e)}function iT(t){return JSON.stringify(t)}function CV(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const W6="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function Ty(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const NV=GC(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function Rp(t){if(Ty(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(Ty(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function G6(t){return Rp(t)?{...t}:Array.isArray(t)?[...t]:t}const EV=new Set(["string","number","symbol"]);function Zv(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function dl(t,e,n){const s=new t._zod.constr(e??t._zod.def);return(!e||n?.parent)&&(s._zod.parent=t),s}function xt(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function AV(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}function RV(t,e){const n=t._zod.def,s=n.checks;if(s&&s.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const i=hl(t._zod.def,{get shape(){const a={};for(const l in e){if(!(l in n.shape))throw new Error(`Unrecognized key: "${l}"`);e[l]&&(a[l]=n.shape[l])}return Oc(this,"shape",a),a},checks:[]});return dl(t,i)}function TV(t,e){const n=t._zod.def,s=n.checks;if(s&&s.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const i=hl(t._zod.def,{get shape(){const a={...t._zod.def.shape};for(const l in e){if(!(l in n.shape))throw new Error(`Unrecognized key: "${l}"`);e[l]&&delete a[l]}return Oc(this,"shape",a),a},checks:[]});return dl(t,i)}function jV(t,e){if(!Rp(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0){const i=t._zod.def.shape;for(const a in e)if(Object.getOwnPropertyDescriptor(i,a)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const r=hl(t._zod.def,{get shape(){const i={...t._zod.def.shape,...e};return Oc(this,"shape",i),i}});return dl(t,r)}function OV(t,e){if(!Rp(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n=hl(t._zod.def,{get shape(){const s={...t._zod.def.shape,...e};return Oc(this,"shape",s),s}});return dl(t,n)}function MV(t,e){const n=hl(t._zod.def,{get shape(){const s={...t._zod.def.shape,...e._zod.def.shape};return Oc(this,"shape",s),s},get catchall(){return e._zod.def.catchall},checks:[]});return dl(t,n)}function IV(t,e,n){const r=e._zod.def.checks;if(r&&r.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const a=hl(e._zod.def,{get shape(){const l=e._zod.def.shape,u={...l};if(n)for(const h in n){if(!(h in l))throw new Error(`Unrecognized key: "${h}"`);n[h]&&(u[h]=t?new t({type:"optional",innerType:l[h]}):l[h])}else for(const h in l)u[h]=t?new t({type:"optional",innerType:l[h]}):l[h];return Oc(this,"shape",u),u},checks:[]});return dl(e,a)}function DV(t,e,n){const s=hl(e._zod.def,{get shape(){const r=e._zod.def.shape,i={...r};if(n)for(const a in n){if(!(a in i))throw new Error(`Unrecognized key: "${a}"`);n[a]&&(i[a]=new t({type:"nonoptional",innerType:r[a]}))}else for(const a in r)i[a]=new t({type:"nonoptional",innerType:r[a]});return Oc(this,"shape",i),i}});return dl(e,s)}function Vu(t,e=0){if(t.aborted===!0)return!0;for(let n=e;n<t.issues.length;n++)if(t.issues[n]?.continue!==!0)return!0;return!1}function Y6(t,e){return e.map(n=>{var s;return(s=n).path??(s.path=[]),n.path.unshift(t),n})}function i0(t){return typeof t=="string"?t:t?.message}function pc(t,e,n){const s={...t,path:t.path??[]};if(!t.message){const r=i0(t.inst?._zod.def?.error?.(t))??i0(e?.error?.(t))??i0(n.customError?.(t))??i0(n.localeError?.(t))??"Invalid input";s.message=r}return delete s.inst,delete s.continue,e?.reportInput||delete s.input,s}function JC(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Tp(...t){const[e,n,s]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:s}:{...e}}const Z6=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,$S,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},J6=we("$ZodError",Z6),X6=we("$ZodError",Z6,{Parent:Error});function LV(t,e=n=>n.message){const n={},s=[];for(const r of t.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(e(r))):s.push(e(r));return{formErrors:s,fieldErrors:n}}function PV(t,e=n=>n.message){const n={_errors:[]},s=r=>{for(const i of r.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(a=>s({issues:a}));else if(i.code==="invalid_key")s({issues:i.issues});else if(i.code==="invalid_element")s({issues:i.issues});else if(i.path.length===0)n._errors.push(e(i));else{let a=n,l=0;for(;l<i.path.length;){const u=i.path[l];l===i.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(e(i))):a[u]=a[u]||{_errors:[]},a=a[u],l++}}};return s(t),n}const XC=t=>(e,n,s,r)=>{const i=s?Object.assign(s,{async:!1}):{async:!1},a=e._zod.run({value:n,issues:[]},i);if(a instanceof Promise)throw new eh;if(a.issues.length){const l=new(r?.Err??t)(a.issues.map(u=>pc(u,i,fc())));throw W6(l,r?.callee),l}return a.value},QC=t=>async(e,n,s,r)=>{const i=s?Object.assign(s,{async:!0}):{async:!0};let a=e._zod.run({value:n,issues:[]},i);if(a instanceof Promise&&(a=await a),a.issues.length){const l=new(r?.Err??t)(a.issues.map(u=>pc(u,i,fc())));throw W6(l,r?.callee),l}return a.value},Jv=t=>(e,n,s)=>{const r=s?{...s,async:!1}:{async:!1},i=e._zod.run({value:n,issues:[]},r);if(i instanceof Promise)throw new eh;return i.issues.length?{success:!1,error:new(t??J6)(i.issues.map(a=>pc(a,r,fc())))}:{success:!0,data:i.value}},BV=Jv(X6),Xv=t=>async(e,n,s)=>{const r=s?Object.assign(s,{async:!0}):{async:!0};let i=e._zod.run({value:n,issues:[]},r);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new t(i.issues.map(a=>pc(a,r,fc())))}:{success:!0,data:i.value}},$V=Xv(X6),zV=t=>(e,n,s)=>{const r=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return XC(t)(e,n,r)},FV=t=>(e,n,s)=>XC(t)(e,n,s),UV=t=>async(e,n,s)=>{const r=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return QC(t)(e,n,r)},HV=t=>async(e,n,s)=>QC(t)(e,n,s),VV=t=>(e,n,s)=>{const r=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return Jv(t)(e,n,r)},qV=t=>(e,n,s)=>Jv(t)(e,n,s),KV=t=>async(e,n,s)=>{const r=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return Xv(t)(e,n,r)},WV=t=>async(e,n,s)=>Xv(t)(e,n,s),GV=/^[cC][^\s-]{8,}$/,YV=/^[0-9a-z]+$/,ZV=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,JV=/^[0-9a-vA-V]{20}$/,XV=/^[A-Za-z0-9]{27}$/,QV=/^[a-zA-Z0-9_-]{21}$/,eq=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,tq=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,aT=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,nq=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,sq="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function rq(){return new RegExp(sq,"u")}const iq=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,aq=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,oq=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,lq=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,cq=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Q6=/^[A-Za-z0-9_-]*$/,uq=/^\+[1-9]\d{6,14}$/,eD="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",hq=new RegExp(`^${eD}$`);function tD(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function dq(t){return new RegExp(`^${tD(t)}$`)}function fq(t){const e=tD({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const s=`${e}(?:${n.join("|")})`;return new RegExp(`^${eD}T(?:${s})$`)}const pq=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},mq=/^[^A-Z]*$/,gq=/^[^a-z]*$/,ca=we("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),yq=we("$ZodCheckMaxLength",(t,e)=>{var n;ca.init(t,e),(n=t._zod.def).when??(n.when=s=>{const r=s.value;return!YC(r)&&r.length!==void 0}),t._zod.onattach.push(s=>{const r=s._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<r&&(s._zod.bag.maximum=e.maximum)}),t._zod.check=s=>{const r=s.value;if(r.length<=e.maximum)return;const a=JC(r);s.issues.push({origin:a,code:"too_big",maximum:e.maximum,inclusive:!0,input:r,inst:t,continue:!e.abort})}}),vq=we("$ZodCheckMinLength",(t,e)=>{var n;ca.init(t,e),(n=t._zod.def).when??(n.when=s=>{const r=s.value;return!YC(r)&&r.length!==void 0}),t._zod.onattach.push(s=>{const r=s._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>r&&(s._zod.bag.minimum=e.minimum)}),t._zod.check=s=>{const r=s.value;if(r.length>=e.minimum)return;const a=JC(r);s.issues.push({origin:a,code:"too_small",minimum:e.minimum,inclusive:!0,input:r,inst:t,continue:!e.abort})}}),bq=we("$ZodCheckLengthEquals",(t,e)=>{var n;ca.init(t,e),(n=t._zod.def).when??(n.when=s=>{const r=s.value;return!YC(r)&&r.length!==void 0}),t._zod.onattach.push(s=>{const r=s._zod.bag;r.minimum=e.length,r.maximum=e.length,r.length=e.length}),t._zod.check=s=>{const r=s.value,i=r.length;if(i===e.length)return;const a=JC(r),l=i>e.length;s.issues.push({origin:a,...l?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:s.value,inst:t,continue:!e.abort})}}),Qv=we("$ZodCheckStringFormat",(t,e)=>{var n,s;ca.init(t,e),t._zod.onattach.push(r=>{const i=r._zod.bag;i.format=e.format,e.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=r=>{e.pattern.lastIndex=0,!e.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:e.format,input:r.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(s=t._zod).check??(s.check=()=>{})}),_q=we("$ZodCheckRegex",(t,e)=>{Qv.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),xq=we("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=mq),Qv.init(t,e)}),wq=we("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=gq),Qv.init(t,e)}),Sq=we("$ZodCheckIncludes",(t,e)=>{ca.init(t,e);const n=Zv(e.includes),s=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=s,t._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(s)}),t._zod.check=r=>{r.value.includes(e.includes,e.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:r.value,inst:t,continue:!e.abort})}}),kq=we("$ZodCheckStartsWith",(t,e)=>{ca.init(t,e);const n=new RegExp(`^${Zv(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(s=>{const r=s._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),t._zod.check=s=>{s.value.startsWith(e.prefix)||s.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:s.value,inst:t,continue:!e.abort})}}),Cq=we("$ZodCheckEndsWith",(t,e)=>{ca.init(t,e);const n=new RegExp(`.*${Zv(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(s=>{const r=s._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),t._zod.check=s=>{s.value.endsWith(e.suffix)||s.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:s.value,inst:t,continue:!e.abort})}}),Nq=we("$ZodCheckOverwrite",(t,e)=>{ca.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class Eq{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const s=e.split(`
`).filter(a=>a),r=Math.min(...s.map(a=>a.length-a.trimStart().length)),i=s.map(a=>a.slice(r)).map(a=>" ".repeat(this.indent*2)+a);for(const a of i)this.content.push(a)}compile(){const e=Function,n=this?.args,r=[...(this?.content??[""]).map(i=>`  ${i}`)];return new e(...n,r.join(`
`))}}const Aq={major:4,minor:3,patch:5},ts=we("$ZodType",(t,e)=>{var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=Aq;const s=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&s.unshift(t);for(const r of s)for(const i of r._zod.onattach)i(t);if(s.length===0)(n=t._zod).deferred??(n.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const r=(a,l,u)=>{let h=Vu(a),m;for(const p of l){if(p._zod.def.when){if(!p._zod.def.when(a))continue}else if(h)continue;const g=a.issues.length,y=p._zod.check(a);if(y instanceof Promise&&u?.async===!1)throw new eh;if(m||y instanceof Promise)m=(m??Promise.resolve()).then(async()=>{await y,a.issues.length!==g&&(h||(h=Vu(a,g)))});else{if(a.issues.length===g)continue;h||(h=Vu(a,g))}}return m?m.then(()=>a):a},i=(a,l,u)=>{if(Vu(a))return a.aborted=!0,a;const h=r(l,s,u);if(h instanceof Promise){if(u.async===!1)throw new eh;return h.then(m=>t._zod.parse(m,u))}return t._zod.parse(h,u)};t._zod.run=(a,l)=>{if(l.skipChecks)return t._zod.parse(a,l);if(l.direction==="backward"){const h=t._zod.parse({value:a.value,issues:[]},{...l,skipChecks:!0});return h instanceof Promise?h.then(m=>i(m,a,l)):i(h,a,l)}const u=t._zod.parse(a,l);if(u instanceof Promise){if(l.async===!1)throw new eh;return u.then(h=>r(h,s,l))}return r(u,s,l)}}tn(t,"~standard",()=>({validate:r=>{try{const i=BV(t,r);return i.success?{value:i.data}:{issues:i.error?.issues}}catch{return $V(t,r).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},vendor:"zod",version:1}))}),eN=we("$ZodString",(t,e)=>{ts.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??pq(t._zod.bag),t._zod.parse=(n,s)=>{if(e.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:t}),n}}),_n=we("$ZodStringFormat",(t,e)=>{Qv.init(t,e),eN.init(t,e)}),Rq=we("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=tq),_n.init(t,e)}),Tq=we("$ZodUUID",(t,e)=>{if(e.version){const s={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(s===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=aT(s))}else e.pattern??(e.pattern=aT());_n.init(t,e)}),jq=we("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=nq),_n.init(t,e)}),Oq=we("$ZodURL",(t,e)=>{_n.init(t,e),t._zod.check=n=>{try{const s=n.value.trim(),r=new URL(s);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(r.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(r.protocol.endsWith(":")?r.protocol.slice(0,-1):r.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=r.href:n.value=s;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),Mq=we("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=rq()),_n.init(t,e)}),Iq=we("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=QV),_n.init(t,e)}),Dq=we("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=GV),_n.init(t,e)}),Lq=we("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=YV),_n.init(t,e)}),Pq=we("$ZodULID",(t,e)=>{e.pattern??(e.pattern=ZV),_n.init(t,e)}),Bq=we("$ZodXID",(t,e)=>{e.pattern??(e.pattern=JV),_n.init(t,e)}),$q=we("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=XV),_n.init(t,e)}),zq=we("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=fq(e)),_n.init(t,e)}),Fq=we("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=hq),_n.init(t,e)}),Uq=we("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=dq(e)),_n.init(t,e)}),Hq=we("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=eq),_n.init(t,e)}),Vq=we("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=iq),_n.init(t,e),t._zod.bag.format="ipv4"}),qq=we("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=aq),_n.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),Kq=we("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=oq),_n.init(t,e)}),Wq=we("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=lq),_n.init(t,e),t._zod.check=n=>{const s=n.value.split("/");try{if(s.length!==2)throw new Error;const[r,i]=s;if(!i)throw new Error;const a=Number(i);if(`${a}`!==i)throw new Error;if(a<0||a>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function nD(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const Gq=we("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=cq),_n.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{nD(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function Yq(t){if(!Q6.test(t))return!1;const e=t.replace(/[-_]/g,s=>s==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return nD(n)}const Zq=we("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=Q6),_n.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{Yq(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),Jq=we("$ZodE164",(t,e)=>{e.pattern??(e.pattern=uq),_n.init(t,e)});function Xq(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[s]=n;if(!s)return!1;const r=JSON.parse(atob(s));return!("typ"in r&&r?.typ!=="JWT"||!r.alg||e&&(!("alg"in r)||r.alg!==e))}catch{return!1}}const Qq=we("$ZodJWT",(t,e)=>{_n.init(t,e),t._zod.check=n=>{Xq(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),eK=we("$ZodUnknown",(t,e)=>{ts.init(t,e),t._zod.parse=n=>n}),tK=we("$ZodNever",(t,e)=>{ts.init(t,e),t._zod.parse=(n,s)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});function oT(t,e,n){t.issues.length&&e.issues.push(...Y6(n,t.issues)),e.value[n]=t.value}const nK=we("$ZodArray",(t,e)=>{ts.init(t,e),t._zod.parse=(n,s)=>{const r=n.value;if(!Array.isArray(r))return n.issues.push({expected:"array",code:"invalid_type",input:r,inst:t}),n;n.value=Array(r.length);const i=[];for(let a=0;a<r.length;a++){const l=r[a],u=e.element._zod.run({value:l,issues:[]},s);u instanceof Promise?i.push(u.then(h=>oT(h,n,a))):oT(u,n,a)}return i.length?Promise.all(i).then(()=>n):n}});function jy(t,e,n,s,r){if(t.issues.length){if(r&&!(n in s))return;e.issues.push(...Y6(n,t.issues))}t.value===void 0?n in s&&(e.value[n]=void 0):e.value[n]=t.value}function sD(t){const e=Object.keys(t.shape);for(const s of e)if(!t.shape?.[s]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${s}": expected a Zod schema`);const n=AV(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function rD(t,e,n,s,r,i){const a=[],l=r.keySet,u=r.catchall._zod,h=u.def.type,m=u.optout==="optional";for(const p in e){if(l.has(p))continue;if(h==="never"){a.push(p);continue}const g=u.run({value:e[p],issues:[]},s);g instanceof Promise?t.push(g.then(y=>jy(y,n,p,e,m))):jy(g,n,p,e,m)}return a.length&&n.issues.push({code:"unrecognized_keys",keys:a,input:e,inst:i}),t.length?Promise.all(t).then(()=>n):n}const sK=we("$ZodObject",(t,e)=>{if(ts.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const l=e.shape;Object.defineProperty(e,"shape",{get:()=>{const u={...l};return Object.defineProperty(e,"shape",{value:u}),u}})}const s=GC(()=>sD(e));tn(t._zod,"propValues",()=>{const l=e.shape,u={};for(const h in l){const m=l[h]._zod;if(m.values){u[h]??(u[h]=new Set);for(const p of m.values)u[h].add(p)}}return u});const r=Ty,i=e.catchall;let a;t._zod.parse=(l,u)=>{a??(a=s.value);const h=l.value;if(!r(h))return l.issues.push({expected:"object",code:"invalid_type",input:h,inst:t}),l;l.value={};const m=[],p=a.shape;for(const g of a.keys){const y=p[g],b=y._zod.optout==="optional",_=y._zod.run({value:h[g],issues:[]},u);_ instanceof Promise?m.push(_.then(w=>jy(w,l,g,h,b))):jy(_,l,g,h,b)}return i?rD(m,h,l,u,s.value,t):m.length?Promise.all(m).then(()=>l):l}}),rK=we("$ZodObjectJIT",(t,e)=>{sK.init(t,e);const n=t._zod.parse,s=GC(()=>sD(e)),r=g=>{const y=new Eq(["shape","payload","ctx"]),b=s.value,_=E=>{const A=iT(E);return`shape[${A}]._zod.run({ value: input[${A}], issues: [] }, ctx)`};y.write("const input = payload.value;");const w=Object.create(null);let k=0;for(const E of b.keys)w[E]=`key_${k++}`;y.write("const newResult = {};");for(const E of b.keys){const A=w[E],R=iT(E),M=g[E]?._zod?.optout==="optional";y.write(`const ${A} = ${_(E)};`),M?y.write(`
        if (${A}.issues.length) {
          if (${R} in input) {
            payload.issues = payload.issues.concat(${A}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${R}, ...iss.path] : [${R}]
            })));
          }
        }
        
        if (${A}.value === undefined) {
          if (${R} in input) {
            newResult[${R}] = undefined;
          }
        } else {
          newResult[${R}] = ${A}.value;
        }
        
      `):y.write(`
        if (${A}.issues.length) {
          payload.issues = payload.issues.concat(${A}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${R}, ...iss.path] : [${R}]
          })));
        }
        
        if (${A}.value === undefined) {
          if (${R} in input) {
            newResult[${R}] = undefined;
          }
        } else {
          newResult[${R}] = ${A}.value;
        }
        
      `)}y.write("payload.value = newResult;"),y.write("return payload;");const C=y.compile();return(E,A)=>C(g,E,A)};let i;const a=Ty,l=!q6.jitless,h=l&&NV.value,m=e.catchall;let p;t._zod.parse=(g,y)=>{p??(p=s.value);const b=g.value;return a(b)?l&&h&&y?.async===!1&&y.jitless!==!0?(i||(i=r(e.shape)),g=i(g,y),m?rD([],b,g,y,p,t):g):n(g,y):(g.issues.push({expected:"object",code:"invalid_type",input:b,inst:t}),g)}});function lT(t,e,n,s){for(const i of t)if(i.issues.length===0)return e.value=i.value,e;const r=t.filter(i=>!Vu(i));return r.length===1?(e.value=r[0].value,r[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(i=>i.issues.map(a=>pc(a,s,fc())))}),e)}const iK=we("$ZodUnion",(t,e)=>{ts.init(t,e),tn(t._zod,"optin",()=>e.options.some(r=>r._zod.optin==="optional")?"optional":void 0),tn(t._zod,"optout",()=>e.options.some(r=>r._zod.optout==="optional")?"optional":void 0),tn(t._zod,"values",()=>{if(e.options.every(r=>r._zod.values))return new Set(e.options.flatMap(r=>Array.from(r._zod.values)))}),tn(t._zod,"pattern",()=>{if(e.options.every(r=>r._zod.pattern)){const r=e.options.map(i=>i._zod.pattern);return new RegExp(`^(${r.map(i=>ZC(i.source)).join("|")})$`)}});const n=e.options.length===1,s=e.options[0]._zod.run;t._zod.parse=(r,i)=>{if(n)return s(r,i);let a=!1;const l=[];for(const u of e.options){const h=u._zod.run({value:r.value,issues:[]},i);if(h instanceof Promise)l.push(h),a=!0;else{if(h.issues.length===0)return h;l.push(h)}}return a?Promise.all(l).then(u=>lT(u,r,t,i)):lT(l,r,t,i)}}),aK=we("$ZodIntersection",(t,e)=>{ts.init(t,e),t._zod.parse=(n,s)=>{const r=n.value,i=e.left._zod.run({value:r,issues:[]},s),a=e.right._zod.run({value:r,issues:[]},s);return i instanceof Promise||a instanceof Promise?Promise.all([i,a]).then(([u,h])=>cT(n,u,h)):cT(n,i,a)}});function zS(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(Rp(t)&&Rp(e)){const n=Object.keys(e),s=Object.keys(t).filter(i=>n.indexOf(i)!==-1),r={...t,...e};for(const i of s){const a=zS(t[i],e[i]);if(!a.valid)return{valid:!1,mergeErrorPath:[i,...a.mergeErrorPath]};r[i]=a.data}return{valid:!0,data:r}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let s=0;s<t.length;s++){const r=t[s],i=e[s],a=zS(r,i);if(!a.valid)return{valid:!1,mergeErrorPath:[s,...a.mergeErrorPath]};n.push(a.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function cT(t,e,n){const s=new Map;let r;for(const l of e.issues)if(l.code==="unrecognized_keys"){r??(r=l);for(const u of l.keys)s.has(u)||s.set(u,{}),s.get(u).l=!0}else t.issues.push(l);for(const l of n.issues)if(l.code==="unrecognized_keys")for(const u of l.keys)s.has(u)||s.set(u,{}),s.get(u).r=!0;else t.issues.push(l);const i=[...s].filter(([,l])=>l.l&&l.r).map(([l])=>l);if(i.length&&r&&t.issues.push({...r,keys:i}),Vu(t))return t;const a=zS(e.value,n.value);if(!a.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(a.mergeErrorPath)}`);return t.value=a.data,t}const oK=we("$ZodEnum",(t,e)=>{ts.init(t,e);const n=K6(e.entries),s=new Set(n);t._zod.values=s,t._zod.pattern=new RegExp(`^(${n.filter(r=>EV.has(typeof r)).map(r=>typeof r=="string"?Zv(r):r.toString()).join("|")})$`),t._zod.parse=(r,i)=>{const a=r.value;return s.has(a)||r.issues.push({code:"invalid_value",values:n,input:a,inst:t}),r}}),lK=we("$ZodTransform",(t,e)=>{ts.init(t,e),t._zod.parse=(n,s)=>{if(s.direction==="backward")throw new V6(t.constructor.name);const r=e.transform(n.value,n);if(s.async)return(r instanceof Promise?r:Promise.resolve(r)).then(a=>(n.value=a,n));if(r instanceof Promise)throw new eh;return n.value=r,n}});function uT(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const iD=we("$ZodOptional",(t,e)=>{ts.init(t,e),t._zod.optin="optional",t._zod.optout="optional",tn(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),tn(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${ZC(n.source)})?$`):void 0}),t._zod.parse=(n,s)=>{if(e.innerType._zod.optin==="optional"){const r=e.innerType._zod.run(n,s);return r instanceof Promise?r.then(i=>uT(i,n.value)):uT(r,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,s)}}),cK=we("$ZodExactOptional",(t,e)=>{iD.init(t,e),tn(t._zod,"values",()=>e.innerType._zod.values),tn(t._zod,"pattern",()=>e.innerType._zod.pattern),t._zod.parse=(n,s)=>e.innerType._zod.run(n,s)}),uK=we("$ZodNullable",(t,e)=>{ts.init(t,e),tn(t._zod,"optin",()=>e.innerType._zod.optin),tn(t._zod,"optout",()=>e.innerType._zod.optout),tn(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${ZC(n.source)}|null)$`):void 0}),tn(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,s)=>n.value===null?n:e.innerType._zod.run(n,s)}),hK=we("$ZodDefault",(t,e)=>{ts.init(t,e),t._zod.optin="optional",tn(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,s)=>{if(s.direction==="backward")return e.innerType._zod.run(n,s);if(n.value===void 0)return n.value=e.defaultValue,n;const r=e.innerType._zod.run(n,s);return r instanceof Promise?r.then(i=>hT(i,e)):hT(r,e)}});function hT(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const dK=we("$ZodPrefault",(t,e)=>{ts.init(t,e),t._zod.optin="optional",tn(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,s)=>(s.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,s))}),fK=we("$ZodNonOptional",(t,e)=>{ts.init(t,e),tn(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(s=>s!==void 0)):void 0}),t._zod.parse=(n,s)=>{const r=e.innerType._zod.run(n,s);return r instanceof Promise?r.then(i=>dT(i,t)):dT(r,t)}});function dT(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const pK=we("$ZodCatch",(t,e)=>{ts.init(t,e),tn(t._zod,"optin",()=>e.innerType._zod.optin),tn(t._zod,"optout",()=>e.innerType._zod.optout),tn(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,s)=>{if(s.direction==="backward")return e.innerType._zod.run(n,s);const r=e.innerType._zod.run(n,s);return r instanceof Promise?r.then(i=>(n.value=i.value,i.issues.length&&(n.value=e.catchValue({...n,error:{issues:i.issues.map(a=>pc(a,s,fc()))},input:n.value}),n.issues=[]),n)):(n.value=r.value,r.issues.length&&(n.value=e.catchValue({...n,error:{issues:r.issues.map(i=>pc(i,s,fc()))},input:n.value}),n.issues=[]),n)}}),mK=we("$ZodPipe",(t,e)=>{ts.init(t,e),tn(t._zod,"values",()=>e.in._zod.values),tn(t._zod,"optin",()=>e.in._zod.optin),tn(t._zod,"optout",()=>e.out._zod.optout),tn(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,s)=>{if(s.direction==="backward"){const i=e.out._zod.run(n,s);return i instanceof Promise?i.then(a=>a0(a,e.in,s)):a0(i,e.in,s)}const r=e.in._zod.run(n,s);return r instanceof Promise?r.then(i=>a0(i,e.out,s)):a0(r,e.out,s)}});function a0(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const gK=we("$ZodReadonly",(t,e)=>{ts.init(t,e),tn(t._zod,"propValues",()=>e.innerType._zod.propValues),tn(t._zod,"values",()=>e.innerType._zod.values),tn(t._zod,"optin",()=>e.innerType?._zod?.optin),tn(t._zod,"optout",()=>e.innerType?._zod?.optout),t._zod.parse=(n,s)=>{if(s.direction==="backward")return e.innerType._zod.run(n,s);const r=e.innerType._zod.run(n,s);return r instanceof Promise?r.then(fT):fT(r)}});function fT(t){return t.value=Object.freeze(t.value),t}const yK=we("$ZodCustom",(t,e)=>{ca.init(t,e),ts.init(t,e),t._zod.parse=(n,s)=>n,t._zod.check=n=>{const s=n.value,r=e.fn(s);if(r instanceof Promise)return r.then(i=>pT(i,n,s,t));pT(r,n,s,t)}});function pT(t,e,n,s){if(!t){const r={code:"custom",input:n,inst:s,path:[...s._zod.def.path??[]],continue:!s._zod.def.abort};s._zod.def.params&&(r.params=s._zod.def.params),e.issues.push(Tp(r))}}var mT;class vK{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const s=n[0];return this._map.set(e,s),s&&typeof s=="object"&&"id"in s&&this._idmap.set(s.id,e),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const s={...this.get(n)??{}};delete s.id;const r={...s,...this._map.get(e)};return Object.keys(r).length?r:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function bK(){return new vK}(mT=globalThis).__zod_globalRegistry??(mT.__zod_globalRegistry=bK());const _f=globalThis.__zod_globalRegistry;function _K(t,e){return new t({type:"string",...xt(e)})}function xK(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...xt(e)})}function gT(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...xt(e)})}function wK(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...xt(e)})}function SK(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...xt(e)})}function kK(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...xt(e)})}function CK(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...xt(e)})}function NK(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...xt(e)})}function EK(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...xt(e)})}function AK(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...xt(e)})}function RK(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...xt(e)})}function TK(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...xt(e)})}function jK(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...xt(e)})}function OK(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...xt(e)})}function MK(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...xt(e)})}function IK(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...xt(e)})}function DK(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...xt(e)})}function LK(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...xt(e)})}function PK(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...xt(e)})}function BK(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...xt(e)})}function $K(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...xt(e)})}function zK(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...xt(e)})}function FK(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...xt(e)})}function UK(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...xt(e)})}function HK(t,e){return new t({type:"string",format:"date",check:"string_format",...xt(e)})}function VK(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...xt(e)})}function qK(t,e){return new t({type:"string",format:"duration",check:"string_format",...xt(e)})}function KK(t){return new t({type:"unknown"})}function WK(t,e){return new t({type:"never",...xt(e)})}function aD(t,e){return new yq({check:"max_length",...xt(e),maximum:t})}function Oy(t,e){return new vq({check:"min_length",...xt(e),minimum:t})}function oD(t,e){return new bq({check:"length_equals",...xt(e),length:t})}function GK(t,e){return new _q({check:"string_format",format:"regex",...xt(e),pattern:t})}function YK(t){return new xq({check:"string_format",format:"lowercase",...xt(t)})}function ZK(t){return new wq({check:"string_format",format:"uppercase",...xt(t)})}function JK(t,e){return new Sq({check:"string_format",format:"includes",...xt(e),includes:t})}function XK(t,e){return new kq({check:"string_format",format:"starts_with",...xt(e),prefix:t})}function QK(t,e){return new Cq({check:"string_format",format:"ends_with",...xt(e),suffix:t})}function Oh(t){return new Nq({check:"overwrite",tx:t})}function eW(t){return Oh(e=>e.normalize(t))}function tW(){return Oh(t=>t.trim())}function nW(){return Oh(t=>t.toLowerCase())}function sW(){return Oh(t=>t.toUpperCase())}function rW(){return Oh(t=>CV(t))}function iW(t,e,n){return new t({type:"array",element:e,...xt(n)})}function aW(t,e,n){return new t({type:"custom",check:"custom",fn:e,...xt(n)})}function oW(t){const e=lW(n=>(n.addIssue=s=>{if(typeof s=="string")n.issues.push(Tp(s,n.value,e._zod.def));else{const r=s;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=n.value),r.inst??(r.inst=e),r.continue??(r.continue=!e._zod.def.abort),n.issues.push(Tp(r))}},t(n.value,n)));return e}function lW(t,e){const n=new ca({check:"custom",...xt(e)});return n._zod.check=t,n}function lD(t){let e=t?.target??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:t?.metadata??_f,target:e,unrepresentable:t?.unrepresentable??"throw",override:t?.override??(()=>{}),io:t?.io??"output",counter:0,seen:new Map,cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0}}function ks(t,e,n={path:[],schemaPath:[]}){var s;const r=t._zod.def,i=e.seen.get(t);if(i)return i.count++,n.schemaPath.includes(t)&&(i.cycle=n.path),i.schema;const a={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,a);const l=t._zod.toJSONSchema?.();if(l)a.schema=l;else{const m={...n,schemaPath:[...n.schemaPath,t],path:n.path};if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,a.schema,m);else{const g=a.schema,y=e.processors[r.type];if(!y)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${r.type}`);y(t,e,g,m)}const p=t._zod.parent;p&&(a.ref||(a.ref=p),ks(p,e,m),e.seen.get(p).isParent=!0)}const u=e.metadataRegistry.get(t);return u&&Object.assign(a.schema,u),e.io==="input"&&Bs(t)&&(delete a.schema.examples,delete a.schema.default),e.io==="input"&&a.schema._prefault&&((s=a.schema).default??(s.default=a.schema._prefault)),delete a.schema._prefault,e.seen.get(t).schema}function cD(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const s=new Map;for(const a of t.seen.entries()){const l=t.metadataRegistry.get(a[0])?.id;if(l){const u=s.get(l);if(u&&u!==a[0])throw new Error(`Duplicate schema id "${l}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);s.set(l,a[0])}}const r=a=>{const l=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const p=t.external.registry.get(a[0])?.id,g=t.external.uri??(b=>b);if(p)return{ref:g(p)};const y=a[1].defId??a[1].schema.id??`schema${t.counter++}`;return a[1].defId=y,{defId:y,ref:`${g("__shared")}#/${l}/${y}`}}if(a[1]===n)return{ref:"#"};const h=`#/${l}/`,m=a[1].schema.id??`__schema${t.counter++}`;return{defId:m,ref:h+m}},i=a=>{if(a[1].schema.$ref)return;const l=a[1],{ref:u,defId:h}=r(a);l.def={...l.schema},h&&(l.defId=h);const m=l.schema;for(const p in m)delete m[p];m.$ref=u};if(t.cycles==="throw")for(const a of t.seen.entries()){const l=a[1];if(l.cycle)throw new Error(`Cycle detected: #/${l.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const a of t.seen.entries()){const l=a[1];if(e===a[0]){i(a);continue}if(t.external){const h=t.external.registry.get(a[0])?.id;if(e!==a[0]&&h){i(a);continue}}if(t.metadataRegistry.get(a[0])?.id){i(a);continue}if(l.cycle){i(a);continue}if(l.count>1&&t.reused==="ref"){i(a);continue}}}function uD(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const s=a=>{const l=t.seen.get(a);if(l.ref===null)return;const u=l.def??l.schema,h={...u},m=l.ref;if(l.ref=null,m){s(m);const g=t.seen.get(m),y=g.schema;if(y.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(u.allOf=u.allOf??[],u.allOf.push(y)):Object.assign(u,y),Object.assign(u,h),a._zod.parent===m)for(const _ in u)_==="$ref"||_==="allOf"||_ in h||delete u[_];if(y.$ref)for(const _ in u)_==="$ref"||_==="allOf"||_ in g.def&&JSON.stringify(u[_])===JSON.stringify(g.def[_])&&delete u[_]}const p=a._zod.parent;if(p&&p!==m){s(p);const g=t.seen.get(p);if(g?.schema.$ref&&(u.$ref=g.schema.$ref,g.def))for(const y in u)y==="$ref"||y==="allOf"||y in g.def&&JSON.stringify(u[y])===JSON.stringify(g.def[y])&&delete u[y]}t.override({zodSchema:a,jsonSchema:u,path:l.path??[]})};for(const a of[...t.seen.entries()].reverse())s(a[0]);const r={};if(t.target==="draft-2020-12"?r.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?r.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?r.$schema="http://json-schema.org/draft-04/schema#":t.target,t.external?.uri){const a=t.external.registry.get(e)?.id;if(!a)throw new Error("Schema is missing an `id` property");r.$id=t.external.uri(a)}Object.assign(r,n.def??n.schema);const i=t.external?.defs??{};for(const a of t.seen.entries()){const l=a[1];l.def&&l.defId&&(i[l.defId]=l.def)}t.external||Object.keys(i).length>0&&(t.target==="draft-2020-12"?r.$defs=i:r.definitions=i);try{const a=JSON.parse(JSON.stringify(r));return Object.defineProperty(a,"~standard",{value:{...e["~standard"],jsonSchema:{input:My(e,"input",t.processors),output:My(e,"output",t.processors)}},enumerable:!1,writable:!1}),a}catch{throw new Error("Error converting schema to JSON.")}}function Bs(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const s=t._zod.def;if(s.type==="transform")return!0;if(s.type==="array")return Bs(s.element,n);if(s.type==="set")return Bs(s.valueType,n);if(s.type==="lazy")return Bs(s.getter(),n);if(s.type==="promise"||s.type==="optional"||s.type==="nonoptional"||s.type==="nullable"||s.type==="readonly"||s.type==="default"||s.type==="prefault")return Bs(s.innerType,n);if(s.type==="intersection")return Bs(s.left,n)||Bs(s.right,n);if(s.type==="record"||s.type==="map")return Bs(s.keyType,n)||Bs(s.valueType,n);if(s.type==="pipe")return Bs(s.in,n)||Bs(s.out,n);if(s.type==="object"){for(const r in s.shape)if(Bs(s.shape[r],n))return!0;return!1}if(s.type==="union"){for(const r of s.options)if(Bs(r,n))return!0;return!1}if(s.type==="tuple"){for(const r of s.items)if(Bs(r,n))return!0;return!!(s.rest&&Bs(s.rest,n))}return!1}const cW=(t,e={})=>n=>{const s=lD({...n,processors:e});return ks(t,s),cD(s,t),uD(s,t)},My=(t,e,n={})=>s=>{const{libraryOptions:r,target:i}=s??{},a=lD({...r??{},target:i,io:e,processors:n});return ks(t,a),cD(a,t),uD(a,t)},uW={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},hW=(t,e,n,s)=>{const r=n;r.type="string";const{minimum:i,maximum:a,format:l,patterns:u,contentEncoding:h}=t._zod.bag;if(typeof i=="number"&&(r.minLength=i),typeof a=="number"&&(r.maxLength=a),l&&(r.format=uW[l]??l,r.format===""&&delete r.format,l==="time"&&delete r.format),h&&(r.contentEncoding=h),u&&u.size>0){const m=[...u];m.length===1?r.pattern=m[0].source:m.length>1&&(r.allOf=[...m.map(p=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:p.source}))])}},dW=(t,e,n,s)=>{n.not={}},fW=(t,e,n,s)=>{},pW=(t,e,n,s)=>{const r=t._zod.def,i=K6(r.entries);i.every(a=>typeof a=="number")&&(n.type="number"),i.every(a=>typeof a=="string")&&(n.type="string"),n.enum=i},mW=(t,e,n,s)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},gW=(t,e,n,s)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},yW=(t,e,n,s)=>{const r=n,i=t._zod.def,{minimum:a,maximum:l}=t._zod.bag;typeof a=="number"&&(r.minItems=a),typeof l=="number"&&(r.maxItems=l),r.type="array",r.items=ks(i.element,e,{...s,path:[...s.path,"items"]})},vW=(t,e,n,s)=>{const r=n,i=t._zod.def;r.type="object",r.properties={};const a=i.shape;for(const h in a)r.properties[h]=ks(a[h],e,{...s,path:[...s.path,"properties",h]});const l=new Set(Object.keys(a)),u=new Set([...l].filter(h=>{const m=i.shape[h]._zod;return e.io==="input"?m.optin===void 0:m.optout===void 0}));u.size>0&&(r.required=Array.from(u)),i.catchall?._zod.def.type==="never"?r.additionalProperties=!1:i.catchall?i.catchall&&(r.additionalProperties=ks(i.catchall,e,{...s,path:[...s.path,"additionalProperties"]})):e.io==="output"&&(r.additionalProperties=!1)},bW=(t,e,n,s)=>{const r=t._zod.def,i=r.inclusive===!1,a=r.options.map((l,u)=>ks(l,e,{...s,path:[...s.path,i?"oneOf":"anyOf",u]}));i?n.oneOf=a:n.anyOf=a},_W=(t,e,n,s)=>{const r=t._zod.def,i=ks(r.left,e,{...s,path:[...s.path,"allOf",0]}),a=ks(r.right,e,{...s,path:[...s.path,"allOf",1]}),l=h=>"allOf"in h&&Object.keys(h).length===1,u=[...l(i)?i.allOf:[i],...l(a)?a.allOf:[a]];n.allOf=u},xW=(t,e,n,s)=>{const r=t._zod.def,i=ks(r.innerType,e,s),a=e.seen.get(t);e.target==="openapi-3.0"?(a.ref=r.innerType,n.nullable=!0):n.anyOf=[i,{type:"null"}]},wW=(t,e,n,s)=>{const r=t._zod.def;ks(r.innerType,e,s);const i=e.seen.get(t);i.ref=r.innerType},SW=(t,e,n,s)=>{const r=t._zod.def;ks(r.innerType,e,s);const i=e.seen.get(t);i.ref=r.innerType,n.default=JSON.parse(JSON.stringify(r.defaultValue))},kW=(t,e,n,s)=>{const r=t._zod.def;ks(r.innerType,e,s);const i=e.seen.get(t);i.ref=r.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(r.defaultValue)))},CW=(t,e,n,s)=>{const r=t._zod.def;ks(r.innerType,e,s);const i=e.seen.get(t);i.ref=r.innerType;let a;try{a=r.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=a},NW=(t,e,n,s)=>{const r=t._zod.def,i=e.io==="input"?r.in._zod.def.type==="transform"?r.out:r.in:r.out;ks(i,e,s);const a=e.seen.get(t);a.ref=i},EW=(t,e,n,s)=>{const r=t._zod.def;ks(r.innerType,e,s);const i=e.seen.get(t);i.ref=r.innerType,n.readOnly=!0},hD=(t,e,n,s)=>{const r=t._zod.def;ks(r.innerType,e,s);const i=e.seen.get(t);i.ref=r.innerType},AW=we("ZodISODateTime",(t,e)=>{zq.init(t,e),Nn.init(t,e)});function RW(t){return UK(AW,t)}const TW=we("ZodISODate",(t,e)=>{Fq.init(t,e),Nn.init(t,e)});function jW(t){return HK(TW,t)}const OW=we("ZodISOTime",(t,e)=>{Uq.init(t,e),Nn.init(t,e)});function MW(t){return VK(OW,t)}const IW=we("ZodISODuration",(t,e)=>{Hq.init(t,e),Nn.init(t,e)});function DW(t){return qK(IW,t)}const LW=(t,e)=>{J6.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>PV(t,n)},flatten:{value:n=>LV(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,$S,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,$S,2)}},isEmpty:{get(){return t.issues.length===0}}})},gi=we("ZodError",LW,{Parent:Error}),PW=XC(gi),BW=QC(gi),$W=Jv(gi),zW=Xv(gi),FW=zV(gi),UW=FV(gi),HW=UV(gi),VW=HV(gi),qW=VV(gi),KW=qV(gi),WW=KV(gi),GW=WV(gi),ns=we("ZodType",(t,e)=>(ts.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:My(t,"input"),output:My(t,"output")}}),t.toJSONSchema=cW(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(hl(e,{checks:[...e.checks??[],...n.map(s=>typeof s=="function"?{_zod:{check:s,def:{check:"custom"},onattach:[]}}:s)]}),{parent:!0}),t.with=t.check,t.clone=(n,s)=>dl(t,n,s),t.brand=()=>t,t.register=((n,s)=>(n.add(t,s),t)),t.parse=(n,s)=>PW(t,n,s,{callee:t.parse}),t.safeParse=(n,s)=>$W(t,n,s),t.parseAsync=async(n,s)=>BW(t,n,s,{callee:t.parseAsync}),t.safeParseAsync=async(n,s)=>zW(t,n,s),t.spa=t.safeParseAsync,t.encode=(n,s)=>FW(t,n,s),t.decode=(n,s)=>UW(t,n,s),t.encodeAsync=async(n,s)=>HW(t,n,s),t.decodeAsync=async(n,s)=>VW(t,n,s),t.safeEncode=(n,s)=>qW(t,n,s),t.safeDecode=(n,s)=>KW(t,n,s),t.safeEncodeAsync=async(n,s)=>WW(t,n,s),t.safeDecodeAsync=async(n,s)=>GW(t,n,s),t.refine=(n,s)=>t.check($G(n,s)),t.superRefine=n=>t.check(zG(n)),t.overwrite=n=>t.check(Oh(n)),t.optional=()=>bT(t),t.exactOptional=()=>NG(t),t.nullable=()=>_T(t),t.nullish=()=>bT(_T(t)),t.nonoptional=n=>OG(t,n),t.array=()=>yG(t),t.or=n=>_G([t,n]),t.and=n=>wG(t,n),t.transform=n=>xT(t,kG(n)),t.default=n=>RG(t,n),t.prefault=n=>jG(t,n),t.catch=n=>IG(t,n),t.pipe=n=>xT(t,n),t.readonly=()=>PG(t),t.describe=n=>{const s=t.clone();return _f.add(s,{description:n}),s},Object.defineProperty(t,"description",{get(){return _f.get(t)?.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return _f.get(t);const s=t.clone();return _f.add(s,n[0]),s},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t.apply=n=>n(t),t)),dD=we("_ZodString",(t,e)=>{eN.init(t,e),ns.init(t,e),t._zod.processJSONSchema=(s,r,i)=>hW(t,s,r);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...s)=>t.check(GK(...s)),t.includes=(...s)=>t.check(JK(...s)),t.startsWith=(...s)=>t.check(XK(...s)),t.endsWith=(...s)=>t.check(QK(...s)),t.min=(...s)=>t.check(Oy(...s)),t.max=(...s)=>t.check(aD(...s)),t.length=(...s)=>t.check(oD(...s)),t.nonempty=(...s)=>t.check(Oy(1,...s)),t.lowercase=s=>t.check(YK(s)),t.uppercase=s=>t.check(ZK(s)),t.trim=()=>t.check(tW()),t.normalize=(...s)=>t.check(eW(...s)),t.toLowerCase=()=>t.check(nW()),t.toUpperCase=()=>t.check(sW()),t.slugify=()=>t.check(rW())}),YW=we("ZodString",(t,e)=>{eN.init(t,e),dD.init(t,e),t.email=n=>t.check(xK(ZW,n)),t.url=n=>t.check(NK(JW,n)),t.jwt=n=>t.check(FK(dG,n)),t.emoji=n=>t.check(EK(XW,n)),t.guid=n=>t.check(gT(yT,n)),t.uuid=n=>t.check(wK(o0,n)),t.uuidv4=n=>t.check(SK(o0,n)),t.uuidv6=n=>t.check(kK(o0,n)),t.uuidv7=n=>t.check(CK(o0,n)),t.nanoid=n=>t.check(AK(QW,n)),t.guid=n=>t.check(gT(yT,n)),t.cuid=n=>t.check(RK(eG,n)),t.cuid2=n=>t.check(TK(tG,n)),t.ulid=n=>t.check(jK(nG,n)),t.base64=n=>t.check(BK(cG,n)),t.base64url=n=>t.check($K(uG,n)),t.xid=n=>t.check(OK(sG,n)),t.ksuid=n=>t.check(MK(rG,n)),t.ipv4=n=>t.check(IK(iG,n)),t.ipv6=n=>t.check(DK(aG,n)),t.cidrv4=n=>t.check(LK(oG,n)),t.cidrv6=n=>t.check(PK(lG,n)),t.e164=n=>t.check(zK(hG,n)),t.datetime=n=>t.check(RW(n)),t.date=n=>t.check(jW(n)),t.time=n=>t.check(MW(n)),t.duration=n=>t.check(DW(n))});function xs(t){return _K(YW,t)}const Nn=we("ZodStringFormat",(t,e)=>{_n.init(t,e),dD.init(t,e)}),ZW=we("ZodEmail",(t,e)=>{jq.init(t,e),Nn.init(t,e)}),yT=we("ZodGUID",(t,e)=>{Rq.init(t,e),Nn.init(t,e)}),o0=we("ZodUUID",(t,e)=>{Tq.init(t,e),Nn.init(t,e)}),JW=we("ZodURL",(t,e)=>{Oq.init(t,e),Nn.init(t,e)}),XW=we("ZodEmoji",(t,e)=>{Mq.init(t,e),Nn.init(t,e)}),QW=we("ZodNanoID",(t,e)=>{Iq.init(t,e),Nn.init(t,e)}),eG=we("ZodCUID",(t,e)=>{Dq.init(t,e),Nn.init(t,e)}),tG=we("ZodCUID2",(t,e)=>{Lq.init(t,e),Nn.init(t,e)}),nG=we("ZodULID",(t,e)=>{Pq.init(t,e),Nn.init(t,e)}),sG=we("ZodXID",(t,e)=>{Bq.init(t,e),Nn.init(t,e)}),rG=we("ZodKSUID",(t,e)=>{$q.init(t,e),Nn.init(t,e)}),iG=we("ZodIPv4",(t,e)=>{Vq.init(t,e),Nn.init(t,e)}),aG=we("ZodIPv6",(t,e)=>{qq.init(t,e),Nn.init(t,e)}),oG=we("ZodCIDRv4",(t,e)=>{Kq.init(t,e),Nn.init(t,e)}),lG=we("ZodCIDRv6",(t,e)=>{Wq.init(t,e),Nn.init(t,e)}),cG=we("ZodBase64",(t,e)=>{Gq.init(t,e),Nn.init(t,e)}),uG=we("ZodBase64URL",(t,e)=>{Zq.init(t,e),Nn.init(t,e)}),hG=we("ZodE164",(t,e)=>{Jq.init(t,e),Nn.init(t,e)}),dG=we("ZodJWT",(t,e)=>{Qq.init(t,e),Nn.init(t,e)}),fG=we("ZodUnknown",(t,e)=>{eK.init(t,e),ns.init(t,e),t._zod.processJSONSchema=(n,s,r)=>fW()});function vT(){return KK(fG)}const pG=we("ZodNever",(t,e)=>{tK.init(t,e),ns.init(t,e),t._zod.processJSONSchema=(n,s,r)=>dW(t,n,s)});function mG(t){return WK(pG,t)}const gG=we("ZodArray",(t,e)=>{nK.init(t,e),ns.init(t,e),t._zod.processJSONSchema=(n,s,r)=>yW(t,n,s,r),t.element=e.element,t.min=(n,s)=>t.check(Oy(n,s)),t.nonempty=n=>t.check(Oy(1,n)),t.max=(n,s)=>t.check(aD(n,s)),t.length=(n,s)=>t.check(oD(n,s)),t.unwrap=()=>t.element});function yG(t,e){return iW(gG,t,e)}const vG=we("ZodObject",(t,e)=>{rK.init(t,e),ns.init(t,e),t._zod.processJSONSchema=(n,s,r)=>vW(t,n,s,r),tn(t,"shape",()=>e.shape),t.keyof=()=>Iy(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:vT()}),t.loose=()=>t.clone({...t._zod.def,catchall:vT()}),t.strict=()=>t.clone({...t._zod.def,catchall:mG()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>jV(t,n),t.safeExtend=n=>OV(t,n),t.merge=n=>MV(t,n),t.pick=n=>RV(t,n),t.omit=n=>TV(t,n),t.partial=(...n)=>IV(fD,t,n[0]),t.required=(...n)=>DV(pD,t,n[0])});function ua(t,e){const n={type:"object",shape:t??{},...xt(e)};return new vG(n)}const bG=we("ZodUnion",(t,e)=>{iK.init(t,e),ns.init(t,e),t._zod.processJSONSchema=(n,s,r)=>bW(t,n,s,r),t.options=e.options});function _G(t,e){return new bG({type:"union",options:t,...xt(e)})}const xG=we("ZodIntersection",(t,e)=>{aK.init(t,e),ns.init(t,e),t._zod.processJSONSchema=(n,s,r)=>_W(t,n,s,r)});function wG(t,e){return new xG({type:"intersection",left:t,right:e})}const FS=we("ZodEnum",(t,e)=>{oK.init(t,e),ns.init(t,e),t._zod.processJSONSchema=(s,r,i)=>pW(t,s,r),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(s,r)=>{const i={};for(const a of s)if(n.has(a))i[a]=e.entries[a];else throw new Error(`Key ${a} not found in enum`);return new FS({...e,checks:[],...xt(r),entries:i})},t.exclude=(s,r)=>{const i={...e.entries};for(const a of s)if(n.has(a))delete i[a];else throw new Error(`Key ${a} not found in enum`);return new FS({...e,checks:[],...xt(r),entries:i})}});function Iy(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(s=>[s,s])):t;return new FS({type:"enum",entries:n,...xt(e)})}const SG=we("ZodTransform",(t,e)=>{lK.init(t,e),ns.init(t,e),t._zod.processJSONSchema=(n,s,r)=>gW(t,n),t._zod.parse=(n,s)=>{if(s.direction==="backward")throw new V6(t.constructor.name);n.addIssue=i=>{if(typeof i=="string")n.issues.push(Tp(i,n.value,e));else{const a=i;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=n.value),a.inst??(a.inst=t),n.issues.push(Tp(a))}};const r=e.transform(n.value,n);return r instanceof Promise?r.then(i=>(n.value=i,n)):(n.value=r,n)}});function kG(t){return new SG({type:"transform",transform:t})}const fD=we("ZodOptional",(t,e)=>{iD.init(t,e),ns.init(t,e),t._zod.processJSONSchema=(n,s,r)=>hD(t,n,s,r),t.unwrap=()=>t._zod.def.innerType});function bT(t){return new fD({type:"optional",innerType:t})}const CG=we("ZodExactOptional",(t,e)=>{cK.init(t,e),ns.init(t,e),t._zod.processJSONSchema=(n,s,r)=>hD(t,n,s,r),t.unwrap=()=>t._zod.def.innerType});function NG(t){return new CG({type:"optional",innerType:t})}const EG=we("ZodNullable",(t,e)=>{uK.init(t,e),ns.init(t,e),t._zod.processJSONSchema=(n,s,r)=>xW(t,n,s,r),t.unwrap=()=>t._zod.def.innerType});function _T(t){return new EG({type:"nullable",innerType:t})}const AG=we("ZodDefault",(t,e)=>{hK.init(t,e),ns.init(t,e),t._zod.processJSONSchema=(n,s,r)=>SW(t,n,s,r),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function RG(t,e){return new AG({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():G6(e)}})}const TG=we("ZodPrefault",(t,e)=>{dK.init(t,e),ns.init(t,e),t._zod.processJSONSchema=(n,s,r)=>kW(t,n,s,r),t.unwrap=()=>t._zod.def.innerType});function jG(t,e){return new TG({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():G6(e)}})}const pD=we("ZodNonOptional",(t,e)=>{fK.init(t,e),ns.init(t,e),t._zod.processJSONSchema=(n,s,r)=>wW(t,n,s,r),t.unwrap=()=>t._zod.def.innerType});function OG(t,e){return new pD({type:"nonoptional",innerType:t,...xt(e)})}const MG=we("ZodCatch",(t,e)=>{pK.init(t,e),ns.init(t,e),t._zod.processJSONSchema=(n,s,r)=>CW(t,n,s,r),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function IG(t,e){return new MG({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const DG=we("ZodPipe",(t,e)=>{mK.init(t,e),ns.init(t,e),t._zod.processJSONSchema=(n,s,r)=>NW(t,n,s,r),t.in=e.in,t.out=e.out});function xT(t,e){return new DG({type:"pipe",in:t,out:e})}const LG=we("ZodReadonly",(t,e)=>{gK.init(t,e),ns.init(t,e),t._zod.processJSONSchema=(n,s,r)=>EW(t,n,s,r),t.unwrap=()=>t._zod.def.innerType});function PG(t){return new LG({type:"readonly",innerType:t})}const BG=we("ZodCustom",(t,e)=>{yK.init(t,e),ns.init(t,e),t._zod.processJSONSchema=(n,s,r)=>mW(t,n)});function $G(t,e={}){return aW(BG,t,e)}function zG(t){return oW(t)}const FG=new hV({defaultOptions:{queries:{staleTime:0,refetchInterval:5e3,refetchOnWindowFocus:!1,retry:!1}}});var tw={exports:{}},nw={};var wT;function UG(){if(wT)return nw;wT=1;var t=Th().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return nw.c=function(e){return t.H.useMemoCache(e)},nw}var ST;function HG(){return ST||(ST=1,tw.exports=UG()),tw.exports}var Pe=HG();const VG=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qG=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),kT=t=>{const e=qG(t);return e.charAt(0).toUpperCase()+e.slice(1)},mD=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),KG=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var WG={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const GG=F.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:a,...l},u)=>F.createElement("svg",{ref:u,...WG,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:mD("lucide",r),...!i&&!KG(l)&&{"aria-hidden":"true"},...l},[...a.map(([h,m])=>F.createElement(h,m)),...Array.isArray(i)?i:[i]]));const Oe=(t,e)=>{const n=F.forwardRef(({className:s,...r},i)=>F.createElement(GG,{ref:i,iconNode:e,className:mD(`lucide-${VG(kT(t))}`,`lucide-${t}`,s),...r}));return n.displayName=kT(t),n};const YG=[["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}],["path",{d:"M10 4v4",key:"pp8u80"}],["path",{d:"M2 8h20",key:"d11cs7"}],["path",{d:"M6 4v4",key:"1svtjw"}]],ZG=Oe("app-window",YG);const JG=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],XG=Oe("arrow-up-down",JG);const QG=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],eo=Oe("box",QG);const eY=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],gD=Oe("calendar",eY);const tY=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Tn=Oe("check",tY);const nY=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ss=Oe("chevron-down",nY);const sY=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],di=Oe("chevron-right",sY);const rY=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],iY=Oe("chevron-up",rY);const aY=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],oY=Oe("chevrons-up-down",aY);const lY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Mh=Oe("circle-alert",lY);const cY=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],uY=Oe("circle-check-big",cY);const hY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Oi=Oe("circle-check",hY);const dY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],rm=Oe("circle-question-mark",dY);const fY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],to=Oe("circle-x",fY);const pY=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],fl=Oe("clock",pY);const mY=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],gY=Oe("cloud",mY);const yY=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],vY=Oe("columns-3",yY);const bY=[["path",{d:"M22 7.7c0-.6-.4-1.2-.8-1.5l-6.3-3.9a1.72 1.72 0 0 0-1.7 0l-10.3 6c-.5.2-.9.8-.9 1.4v6.6c0 .5.4 1.2.8 1.5l6.3 3.9a1.72 1.72 0 0 0 1.7 0l10.3-6c.5-.3.9-1 .9-1.5Z",key:"1t2lqe"}],["path",{d:"M10 21.9V14L2.1 9.1",key:"o7czzq"}],["path",{d:"m10 14 11.9-6.9",key:"zm5e20"}],["path",{d:"M14 19.8v-8.1",key:"159ecu"}],["path",{d:"M18 17.5V9.4",key:"11uown"}]],CT=Oe("container",bY);const _Y=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],js=Oe("copy",_Y);const xY=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],eb=Oe("cpu",xY);const wY=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Ih=Oe("database",wY);const SY=[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]],kY=Oe("diamond",SY);const CY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],yD=Oe("disc",CY);const NY=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],tN=Oe("external-link",NY);const EY=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],nN=Oe("eye-off",EY);const AY=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],sN=Oe("eye",AY);const RY=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],US=Oe("file-check",RY);const TY=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],jY=Oe("file-down",TY);const OY=[["path",{d:"M10.65 22H18a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v10.1",key:"1a2hbp"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m10 15 1 1",key:"1h4vmv"}],["path",{d:"m11 14-4.586 4.586",key:"maylof"}],["circle",{cx:"5",cy:"20",r:"2",key:"860zyv"}]],vD=Oe("file-key",OY);const MY=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ri=Oe("file-text",MY);const IY=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],rN=Oe("folder-open",IY);const DY=[["path",{d:"M2 9.35V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h7",key:"y8kt7d"}],["path",{d:"m8 16 3-3-3-3",key:"rlqrt1"}]],LY=Oe("folder-symlink",DY);const PY=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],BY=Oe("folder-tree",PY);const $Y=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],zY=Oe("funnel",$Y);const FY=[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]],bD=Oe("ghost",FY);const UY=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],Dy=Oe("git-branch",UY);const HY=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],VY=Oe("git-compare",HY);const qY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Ji=Oe("globe",qY);const KY=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],Ws=Oe("hard-drive",KY);const WY=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],HS=Oe("hash",WY);const GY=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],im=Oe("hexagon",GY);const YY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ZY=Oe("info",YY);const JY=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],tb=Oe("key-round",JY);const XY=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],am=Oe("key",XY);const QY=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Ga=Oe("layers",QY);const eZ=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],iN=Oe("layout-grid",eZ);const tZ=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],pl=Oe("link",tZ);const nZ=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],sZ=Oe("list",nZ);const rZ=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],qa=Oe("loader-circle",rZ);const iZ=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],om=Oe("lock",iZ);const aZ=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],oZ=Oe("mail",aZ);const lZ=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],cZ=Oe("maximize-2",lZ);const uZ=[["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"m14.305 7.53.923-.382",key:"1mlnsw"}],["path",{d:"m15.228 4.852-.923-.383",key:"82mpwg"}],["path",{d:"m16.852 3.228-.383-.924",key:"ln4sir"}],["path",{d:"m16.852 8.772-.383.923",key:"1dejw0"}],["path",{d:"m19.148 3.228.383-.924",key:"192kgf"}],["path",{d:"m19.53 9.696-.382-.924",key:"fiavlr"}],["path",{d:"m20.772 4.852.924-.383",key:"1j8mgp"}],["path",{d:"m20.772 7.148.924.383",key:"zix9be"}],["path",{d:"M22 13v2a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7",key:"1tnzv8"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}]],aN=Oe("monitor-cog",uZ);const hZ=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],Vs=Oe("network",hZ);const dZ=[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]],fZ=Oe("newspaper",dZ);const pZ=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],_D=Oe("package",pZ);const mZ=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],jp=Oe("pause",mZ);const gZ=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],th=Oe("play",gZ);const yZ=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M17 8a1 1 0 0 1 1 1v4a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1z",key:"1xoxul"}],["path",{d:"M9 8V2",key:"14iosj"}]],vZ=Oe("plug",yZ);const bZ=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],_Z=Oe("puzzle",bZ);const xZ=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],wZ=Oe("radio",xZ);const SZ=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Cn=Oe("refresh-cw",SZ);const kZ=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],xD=Oe("rocket",kZ);const CZ=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],NZ=Oe("rotate-ccw",CZ);const EZ=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],Op=Oe("route",EZ);const AZ=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],RZ=Oe("save",AZ);const TZ=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],oN=Oe("search",TZ);const jZ=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],OZ=Oe("send",jZ);const MZ=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],ra=Oe("server",MZ);const IZ=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],DZ=Oe("settings",IZ);const LZ=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],PZ=Oe("share-2",LZ);const BZ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],$Z=Oe("shield-check",BZ);const zZ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Dh=Oe("shield",zZ);const FZ=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],wD=Oe("sparkles",FZ);const UZ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],VS=Oe("square",UZ);const HZ=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],SD=Oe("tag",HZ);const VZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],qZ=Oe("target",VZ);const KZ=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],kD=Oe("trash-2",KZ);const WZ=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ly=Oe("triangle-alert",WZ);const GZ=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],CD=Oe("user",GZ);const YZ=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Mp=Oe("x",YZ);const ZZ=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ND=Oe("zap",ZZ);const JZ=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],XZ=Oe("zoom-in",JZ);const QZ=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],eJ=Oe("zoom-out",QZ),Py=new Map,By=new Map,rp=new Map;function tJ(t){t?(Py.delete(t),By.delete(t),rp.delete(t)):(Py.clear(),By.clear(),rp.clear())}function NT(t){return t===""?0:t==="apps"?1:t==="batch"?2:t==="networking.k8s.io"?3:t==="storage.k8s.io"?4:t==="rbac.authorization.k8s.io"?5:t.endsWith(".k8s.io")?10:100}function nJ(t){const e=t.group||"";return e?`${t.name}.${e}`:t.name}function Xi(t){const e=t.group||"",n=t.version||"v1";return e?`/apis/${e}/${n}`:"/api/v1"}function ET(t,e,n){const s=nJ(n);t.set(s,n);const r=NT(n.group||""),i=a=>{const l=e.get(a);if(!l)e.set(a,n);else{const u=NT(l.group||"");r<u&&e.set(a,n)}};if(i(n.name),n.singularName&&i(n.singularName),n.shortNames)for(const a of n.shortNames)i(a)}async function sw(t,e){const n=`/contexts/${e}${t}`,s=await fetch(n);if(!s.ok)throw new Error(`API request failed: ${s.status} ${s.statusText}`);return s.json()}async function lm(t){const e=By.get(t);if(e)return e;const n=rp.get(t);if(n)return n;const s=(async()=>{const r=new Map,i=new Map;try{const a=await sw("/api/v1",t);for(const l of a.resources){if(l.name.includes("/"))continue;const u={...l,group:"",version:"v1"};ET(r,i,u)}}catch(a){console.warn("Failed to fetch core v1 resources:",a)}try{const a=await sw("/apis",t);await Promise.all(a.groups.map(async l=>{const u=l.preferredVersion?.version||l.versions[0]?.version;if(!u)return;const h=`/apis/${l.name}/${u}`;try{const m=await sw(h,t);for(const p of m.resources){if(p.name.includes("/"))continue;const g={...p,group:p.group||l.name,version:p.version||u};ET(r,i,g)}}catch(m){console.warn(`Failed to fetch resources for ${h}:`,m)}}))}catch(a){console.warn("Failed to fetch API groups:",a)}return Py.set(t,r),By.set(t,i),rp.delete(t),i})();return rp.set(t,s),s}async function hr(t,e){return(await lm(t)).get(e)}async function ED(t,e){return await lm(t),Py.get(t)?.get(e)}async function AD(t,e,n){const s=await lm(t);let r="";n&&n.includes("/")&&(r=n.split("/")[0]);for(const i of s.values())if(i.kind===e)if(n){if((i.group||"")===r)return i}else return i;if(n){for(const i of s.values())if(i.kind===e)return i}}function sJ(t){lm(t).catch(console.error)}function rJ(t){const e=t.spec;if(!e)throw new Error("CRD is missing spec");const n=e.versions.find(i=>i.storage),s=e.versions.find(i=>i.served),r=n?.name||s?.name||e.versions[0]?.name;return{name:e.names.plural,singularName:e.names.singular||"",namespaced:e.scope==="Namespaced",group:e.group,version:r,kind:e.names.kind,verbs:["get","list","watch","create","update","patch","delete"],shortNames:e.names.shortNames}}async function no(t,e){const n=e?`/contexts/${e}${t}`:t,s=await fetch(n);if(!s.ok)throw new Error(`API request failed: ${s.status} ${s.statusText}`);return s.json()}async function iJ(t){return no("/api/v1/namespaces",t)}async function aJ(t){return(await no("/apis/apiextensions.k8s.io/v1/customresourcedefinitions",t)).items}async function oJ(t,e,n,s){const r=Xi(e),i=e.namespaced&&s?`${r}/namespaces/${s}/${e.name}/${n}`:`${r}/${e.name}/${n}`;return no(i,t)}async function lJ(t,e,n,s,r){const i=Xi(e),a=e.namespaced&&r?`${i}/namespaces/${r}/${e.name}/${n}`:`${i}/${e.name}/${n}`,l=`/contexts/${t}${a}`,u=await fetch(l,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!u.ok){const h=await u.text();let m=`API request failed: ${u.status} ${u.statusText}`;try{const p=JSON.parse(h);p.message&&(m=p.message)}catch{}throw new Error(m)}return u.json()}async function lN(t,e,n){const s=Xi(e),r=e.namespaced&&n?`${s}/namespaces/${n}/${e.name}`:`${s}/${e.name}`;return(await no(r,t)).items}async function cJ(t,e,n){const s=n?`involvedObject.name=${e},involvedObject.namespace=${n}`:`involvedObject.name=${e}`,r=n?`/api/v1/namespaces/${n}/events?fieldSelector=${encodeURIComponent(s)}`:`/api/v1/events?fieldSelector=${encodeURIComponent(s)}`;return(await no(r,t)).items.sort((a,l)=>{const u=a.lastTimestamp||a.eventTime||a.metadata?.creationTimestamp||"",h=l.lastTimestamp||l.eventTime||l.metadata?.creationTimestamp||"";return new Date(h).getTime()-new Date(u).getTime()})}async function uJ(t,e,n,s){const r=Xi(e),i=e.namespaced&&s?`${r}/namespaces/${s}/${e.name}/${n}`:`${r}/${e.name}/${n}`,a=`/contexts/${t}${i}`,l=await fetch(a,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!l.ok){const u=await l.text();let h=`Delete failed: ${l.status} ${l.statusText}`;try{const m=JSON.parse(u);m.message&&(h=m.message)}catch{}throw new Error(h)}}async function cN(t,e,n,s,r){const i=Xi(e),a=e.namespaced&&r?`${i}/namespaces/${r}/${e.name}/${n}/scale`:`${i}/${e.name}/${n}/scale`,l=`/contexts/${t}${a}`,u=await fetch(l);if(!u.ok)throw new Error(`Failed to get scale: ${u.status} ${u.statusText}`);const h=await u.json();h.spec.replicas=s;const m=await fetch(l,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(!m.ok){const p=await m.text();let g=`Scale failed: ${m.status} ${m.statusText}`;try{const y=JSON.parse(p);y.message&&(g=y.message)}catch{}throw new Error(g)}}async function uN(t,e,n,s){const r=Xi(e),i=e.namespaced&&s?`${r}/namespaces/${s}/${e.name}/${n}`:`${r}/${e.name}/${n}`,a=`/contexts/${t}${i}`,l={spec:{template:{metadata:{annotations:{"kubectl.kubernetes.io/restartedAt":new Date().toISOString()}}}}},u=await fetch(a,{method:"PATCH",headers:{"Content-Type":"application/strategic-merge-patch+json"},body:JSON.stringify(l)});if(!u.ok){const h=await u.text();let m=`Restart failed: ${u.status} ${u.statusText}`;try{const p=JSON.parse(h);p.message&&(m=p.message)}catch{}throw new Error(m)}}const ip=new Map,ap=new Map;function hJ(t){t?(ip.delete(t),ap.delete(t)):(ip.clear(),ap.clear())}async function hN(t){const e=ip.get(t);if(e!==void 0)return e;const n=ap.get(t);if(n)return n;const s=(async()=>{try{const i=await ED(t,"pods.metrics.k8s.io")!==void 0;return ip.set(t,i),i}catch(r){return console.warn("Failed to check metrics availability:",r),ip.set(t,!1),!1}finally{ap.delete(t)}})();return ap.set(t,s),s}function el(t){if(!t)return 0;if(t.endsWith("n"))return parseInt(t.slice(0,-1),10)||0;if(t.endsWith("m"))return(parseInt(t.slice(0,-1),10)||0)*1e6;const e=parseFloat(t);return isNaN(e)?0:e*1e9}function tl(t){if(!t)return 0;const e=t.match(/^(\d+(?:\.\d+)?)(Ki|Mi|Gi|Ti|K|M|G|T|k|m|g|t)?$/);if(!e){const r=parseInt(t,10);return isNaN(r)?0:r}const n=parseFloat(e[1]),s=e[2];if(!s)return n;switch(s){case"Ki":return n*1024;case"Mi":return n*1024*1024;case"Gi":return n*1024*1024*1024;case"Ti":return n*1024*1024*1024*1024;case"K":case"k":return n*1e3;case"M":case"m":return n*1e3*1e3;case"G":case"g":return n*1e3*1e3*1e3;case"T":case"t":return n*1e3*1e3*1e3*1e3;default:return n}}function Ip(t){if(t>=1e9){const e=t/1e9;return e>=10?`${Math.round(e)}`:`${e.toFixed(1)}`}return`${Math.round(t/1e6)}m`}function Dp(t){return t>=1024*1024*1024?`${(t/(1024*1024*1024)).toFixed(1)}Gi`:t>=1024*1024?`${(t/(1024*1024)).toFixed(0)}Mi`:t>=1024?`${(t/1024).toFixed(0)}Ki`:`${t}B`}async function dJ(t,e,n){try{return await hN(t)?await no(`/apis/metrics.k8s.io/v1beta1/namespaces/${n}/pods/${e}`,t):null}catch{return null}}async function dN(t,e,n){try{if(!await hN(t))return[];const s=Object.entries(n).map(([i,a])=>`${i}=${a}`).join(",");return(await no(`/apis/metrics.k8s.io/v1beta1/namespaces/${e}/pods?labelSelector=${encodeURIComponent(s)}`,t)).items||[]}catch{return[]}}async function fJ(t,e){try{return await hN(t)?await no(`/apis/metrics.k8s.io/v1beta1/nodes/${e}`,t):null}catch{return null}}function fN(t){const e=new Map;for(const s of t)for(const r of s.containers){const i=e.get(r.name)||{cpuNanos:0,memoryBytes:0,count:0};i.cpuNanos+=el(r.usage.cpu),i.memoryBytes+=tl(r.usage.memory),i.count++,e.set(r.name,i)}const n=new Map;for(const[s,r]of e)n.set(s,{cpu:{usage:Ip(r.cpuNanos),usageNanoCores:r.cpuNanos},memory:{usage:Dp(r.memoryBytes),usageBytes:r.memoryBytes}});return n}function pJ({namespaces:t,selectedNamespace:e,onSelectNamespace:n,disabled:s=!1,spaceLabels:r=[],platformNamespaces:i=[]}){const[a,l]=F.useState(!1),[u,h]=F.useState(""),[m,p]=F.useState(-1),g=F.useRef(null),y=F.useRef(null),b=F.useRef(null),_=F.useMemo(()=>I=>FH(I,i),[i]),w=F.useMemo(()=>{const I=[],W=new Set;for(const $ of r){const U=new Map;for(const Z of t){const K=Z.metadata?.name;if(!K||W.has(K))continue;const B=Z.metadata?.labels?.[$];B&&(U.has(B)||U.set(B,[]),U.get(B).push(Z),W.add(K))}for(const[Z,K]of Array.from(U.entries()).sort(([B],[J])=>B.localeCompare(J)))I.push({label:Z,namespaces:K.sort((B,J)=>(B.metadata?.name||"").localeCompare(J.metadata?.name||""))})}const P=t.filter($=>{const U=$.metadata?.name;return U&&!W.has(U)&&!_(U)}).sort(($,U)=>($.metadata?.name||"").localeCompare(U.metadata?.name||""));P.length>0&&I.push({label:"User",namespaces:P});const G=t.filter($=>{const U=$.metadata?.name;return U&&!W.has(U)&&_(U)}).sort(($,U)=>($.metadata?.name||"").localeCompare(U.metadata?.name||""));return G.length>0&&I.push({label:"Platform",namespaces:G}),I},[t,r,_]),k=F.useMemo(()=>u===""?w:w.map(I=>({...I,namespaces:I.namespaces.filter(W=>W.metadata?.name?.toLowerCase().includes(u.toLowerCase()))})).filter(I=>I.namespaces.length>0),[w,u]),C=F.useMemo(()=>{const I=[];(u===""||"all namespaces".includes(u.toLowerCase()))&&I.push({value:"",label:"All Namespaces"});for(const P of k)for(const G of P.namespaces){const $=G.metadata?.name;$&&I.push({value:$,label:$})}return I},[k,u]),E=k.some(I=>I.namespaces.length>0),A=u===""||"all namespaces".includes(u.toLowerCase());F.useEffect(()=>{if(!a)return;function I(W){g.current&&!g.current.contains(W.target)&&(l(!1),h(""))}return document.addEventListener("mousedown",I),()=>document.removeEventListener("mousedown",I)},[a]),F.useEffect(()=>{a&&(y.current?.focus(),p(-1))},[a]);const R=I=>{n(I||void 0),l(!1),h("")},N=I=>{switch(I.key){case"ArrowDown":I.preventDefault(),p(W=>Math.min(W+1,C.length-1));break;case"ArrowUp":I.preventDefault(),p(W=>Math.max(W-1,0));break;case"Enter":I.preventDefault(),m>=0&&m<C.length&&R(C[m].value);break;case"Escape":l(!1),h("");break}};F.useEffect(()=>{m>=0&&b.current&&b.current.querySelector(`[data-index="${m}"]`)?.scrollIntoView({block:"nearest"})},[m]);let M=-1;return f.jsxs("div",{className:"relative",ref:g,children:[f.jsxs("div",{className:"relative",children:[f.jsx("input",{ref:y,type:"text",className:"w-full px-3 py-1.5 pr-8 bg-neutral-50 dark:bg-neutral-950 border border-neutral-200 dark:border-neutral-700 text-neutral-900 dark:text-neutral-100 rounded-lg text-sm text-left disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-1 focus:ring-neutral-400/50 dark:focus:ring-neutral-500/50 cursor-default placeholder:text-neutral-400",value:a?u:s?"Cluster":e||"All Namespaces",onChange:I=>h(I.target.value),onFocus:()=>!s&&l(!0),onKeyDown:N,placeholder:a?"Search...":void 0,disabled:s,readOnly:!a}),f.jsx("button",{type:"button",onClick:()=>!s&&l(!a),className:"absolute inset-y-0 right-0 flex items-center pr-2",disabled:s,children:f.jsx(Ss,{size:16,className:"text-neutral-400 dark:text-neutral-500"})})]}),a&&f.jsx("div",{ref:b,className:"absolute z-50 w-full mt-1 bg-white dark:bg-neutral-950 rounded-lg shadow-xl max-h-96 overflow-y-auto focus:outline-none border border-neutral-200 dark:border-neutral-700",children:!E&&!A?f.jsx("div",{className:"px-3 py-3 text-sm text-neutral-500 dark:text-neutral-400",children:"No namespaces found"}):f.jsxs(f.Fragment,{children:[A&&f.jsxs("div",{"data-index":++M,onClick:()=>R(""),className:`px-3 py-2 cursor-pointer text-sm flex items-center justify-between ${m===M?"bg-neutral-100 dark:bg-neutral-700":""} ${e===void 0?"text-neutral-900 dark:text-neutral-100":"text-neutral-600 dark:text-neutral-400"}`,children:[f.jsx("span",{className:"truncate",children:"All Namespaces"}),e===void 0&&f.jsx(Tn,{size:16,className:"text-neutral-500 dark:text-neutral-400"})]}),k.map(I=>f.jsxs("div",{className:"py-1",children:[f.jsx("div",{className:"px-3 py-1 text-[10px] font-semibold text-neutral-400 dark:text-neutral-500 uppercase tracking-wider",children:I.label}),I.namespaces.map(W=>{const P=W.metadata?.name;if(!P)return null;const G=++M,$=e===P,U=m===G;return f.jsxs("div",{"data-index":G,onClick:()=>R(P),className:`mx-1 px-2.5 py-1.5 rounded-md cursor-pointer text-sm flex items-center justify-between ${U?"bg-neutral-100 dark:bg-neutral-700":""} ${$?"text-neutral-900 dark:text-neutral-100":"text-neutral-600 dark:text-neutral-400"}`,children:[f.jsx("span",{className:"truncate",children:P}),$&&f.jsx(Tn,{size:16,className:"text-neutral-500 dark:text-neutral-400"})]},P)})]},I.label))]})})]})}async function mJ(t,e){const n=`/contexts/${e}${t}`,s=await fetch(n,{headers:{Accept:"application/json;as=Table;v=v1;g=meta.k8s.io"}});if(!s.ok)throw new Error(`API request failed: ${s.status} ${s.statusText}`);return s.json()}async function RD(t,e,n){const s=Xi(e),r=e.namespaced&&n?`${s}/namespaces/${n}/${e.name}`:`${s}/${e.name}`;return mJ(r,t)}const qS={workloads:"Workloads",config:"Config",network:"Network",storage:"Storage",cluster:"Cluster",crd:"Custom Resources"},$y=[{kind:"pods",label:"Pods",icon:eo,category:"workloads"},{kind:"deployments",label:"Deployments",icon:xD,category:"workloads"},{kind:"daemonsets",label:"DaemonSets",icon:bD,category:"workloads"},{kind:"statefulsets",label:"StatefulSets",icon:Ih,category:"workloads"},{kind:"replicasets",label:"ReplicaSets",icon:Ga,category:"workloads"},{kind:"jobs",label:"Jobs",icon:ND,category:"workloads"},{kind:"cronjobs",label:"CronJobs",icon:fl,category:"workloads"},{kind:"secrets",label:"Secrets",icon:tb,category:"config"},{kind:"configmaps",label:"ConfigMaps",icon:Ri,category:"config"},{kind:"applications",label:"Applications",icon:ZG,category:"config"},{kind:"applicationsets",label:"ApplicationSets",icon:iN,category:"config"},{kind:"certificates",label:"Certificates",icon:$Z,category:"config"},{kind:"certificaterequests",label:"CertificateRequests",icon:US,category:"config"},{kind:"services",label:"Services",icon:vZ,category:"network"},{kind:"ingresses",label:"Ingresses",icon:Ji,category:"network"},{kind:"gateways",label:"Gateways",icon:Vs,category:"network"},{kind:"httproutes",label:"HTTPRoutes",icon:Ji,category:"network"},{kind:"grpcroutes",label:"GRPCRoutes",icon:Ji,category:"network"},{kind:"tcproutes",label:"TCPRoutes",icon:Vs,category:"network"},{kind:"udproutes",label:"UDPRoutes",icon:Vs,category:"network"},{kind:"tlsroutes",label:"TLSRoutes",icon:Vs,category:"network"},{kind:"persistentvolumes",label:"PersistentVolumes",icon:Ws,category:"storage"},{kind:"persistentvolumeclaims",label:"PersistentVolumeClaims",icon:yD,category:"storage"},{kind:"namespaces",label:"Namespaces",icon:rN,category:"cluster"},{kind:"nodes",label:"Nodes",icon:ra,category:"cluster"},{kind:"events",label:"Events",icon:fZ,category:"cluster"}],gJ=[{kind:"contexts",label:"Contexts",icon:aN,category:"cluster"}],TD=im,pN=new Map;for(const t of $y)pN.set(t.kind,t);for(const t of gJ)pN.set(t.kind,t);function yJ(t){return pN.get(t)?.icon??TD}function KS(t){if(!t)return[];const e=[];return t.singularName&&e.push(t.singularName),t.shortNames&&e.push(...t.shortNames),e}function AT(t,e){return t.name===e.name&&(t.group||"")===(e.group||"")}function vJ(t){const e=Pe.c(47),{context:n,namespace:s,namespaces:r,selectedResource:i,onSelectResource:a,onSelectNamespace:l,isOverviewSelected:u,isWelcome:h}=t;let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m=new Map,e[0]=m):m=e[0];const[p,g]=F.useState(m);let y;e[1]===Symbol.for("react.memo_cache_sentinel")?(y=[],e[1]=y):y=e[1];const[b,_]=F.useState(y);let w;e[2]===Symbol.for("react.memo_cache_sentinel")?(w={workloads:!0,config:!0,network:!0,storage:!0,cluster:!0,crd:!1},e[2]=w):w=e[2];const[k,C]=F.useState(w);let E,A;e[3]!==n?(E=()=>{(async()=>{const J=new Map;for(const Y of $y){const z=await hr(n,Y.kind);z&&J.set(Y.kind,z)}g(J)})()},A=[n],e[3]=n,e[4]=E,e[5]=A):(E=e[4],A=e[5]),F.useEffect(E,A);let R,N;e[6]!==n?(R=()=>{aJ(n).then(B=>{const J=B.map(rJ);J.sort(SJ),_(J)}).catch(wJ)},N=[n],e[6]=n,e[7]=R,e[8]=N):(R=e[7],N=e[8]),F.useEffect(R,N);let M;e[9]===Symbol.for("react.memo_cache_sentinel")?(M=B=>{C(J=>({...J,[B]:!J[B]}))},e[9]=M):M=e[9];const I=M;let W,P,G,$,U;if(e[10]!==p||e[11]!==b||e[12]!==k||e[13]!==u||e[14]!==h||e[15]!==s||e[16]!==r||e[17]!==l||e[18]!==a||e[19]!==i){const B=$y.reduce(xJ,{}),J=b.reduce(_J,{}),Y=Object.entries(J).sort(bJ),z=i!==null&&!i.namespaced;let O,L;e[25]===Symbol.for("react.memo_cache_sentinel")?(O=sa().kubernetes?.tenancyLabels,L=sa().kubernetes?.platformNamespaces,e[25]=O,e[26]=L):(O=e[25],L=e[26]),e[27]!==s||e[28]!==r||e[29]!==l||e[30]!==z?($=f.jsx("div",{className:"shrink-0 px-3 pb-2",children:f.jsx(pJ,{namespaces:r,selectedNamespace:s,onSelectNamespace:l,disabled:z,spaceLabels:O,platformNamespaces:L})}),e[27]=s,e[28]=r,e[29]=l,e[30]=z,e[31]=$):$=e[31],U="flex-1 py-1 overflow-y-auto overflow-x-hidden min-h-0";const V=`flex items-center w-full px-3 py-2 text-sm rounded-lg transition-colors ${u&&!h?"bg-white/90 text-neutral-900 shadow-sm dark:bg-neutral-800 dark:text-neutral-100":"text-neutral-600 hover:bg-white/50 hover:text-neutral-900 dark:text-neutral-400 dark:hover:bg-neutral-800/50 dark:hover:text-neutral-200"}`;let T;e[32]!==a?(T=()=>a(null),e[32]=a,e[33]=T):T=e[33];let Q,te;e[34]===Symbol.for("react.memo_cache_sentinel")?(Q=f.jsx(Vs,{size:16,className:"mr-2.5 shrink-0 opacity-70"}),te=f.jsx("span",{className:"font-medium",children:"Overview"}),e[34]=Q,e[35]=te):(Q=e[34],te=e[35]),e[36]!==V||e[37]!==T?(W=f.jsx("div",{className:"mb-2 px-2",children:f.jsxs("button",{className:V,onClick:T,children:[Q,te]})}),e[36]=V,e[37]=T,e[38]=W):W=e[38],P=Object.entries(B).map(X=>{const[oe,xe]=X;return f.jsxs("div",{className:"mb-1",children:[f.jsxs("button",{className:"flex items-center w-full px-4 py-1.5 text-[11px] font-semibold uppercase tracking-wider text-neutral-500 hover:text-neutral-700 dark:text-neutral-500 dark:hover:text-neutral-400 transition-colors",onClick:()=>I(oe),children:[f.jsx("span",{className:"mr-1.5 opacity-60",children:k[oe]?f.jsx(Ss,{size:12}):f.jsx(di,{size:12})}),f.jsx("span",{children:qS[oe]})]}),k[oe]&&f.jsx("ul",{className:"px-2",children:xe.map(Se=>{const Xe=p.get(Se.kind);if(!Xe)return null;const Ke=i!==null&&AT(Xe,i);return f.jsx("li",{children:f.jsxs("button",{className:`flex items-center w-full px-3 py-2 text-sm rounded-lg transition-colors ${Ke?"bg-white/90 text-neutral-900 shadow-sm dark:bg-neutral-800 dark:text-neutral-100":"text-neutral-600 hover:bg-white/50 hover:text-neutral-900 dark:text-neutral-400 dark:hover:bg-neutral-800/50 dark:hover:text-neutral-200"}`,onClick:()=>a(Xe),children:[f.jsx(Se.icon,{size:16,className:"mr-2.5 shrink-0 opacity-70"}),f.jsx("span",{className:"truncate",children:Se.label})]})},Se.kind)})})]},oe)}),G=b.length>0&&f.jsxs("div",{className:"mb-1",children:[f.jsxs("button",{className:"flex items-center w-full px-4 py-1.5 text-[11px] font-semibold uppercase tracking-wider text-neutral-500 hover:text-neutral-700 dark:text-neutral-500 dark:hover:text-neutral-400 transition-colors",onClick:()=>I("crd"),children:[f.jsx("span",{className:"mr-1.5 opacity-60",children:k.crd?f.jsx(Ss,{size:12}):f.jsx(di,{size:12})}),f.jsx("span",{children:qS.crd}),f.jsx("span",{className:"ml-auto px-1.5 py-0.5 bg-neutral-300/60 rounded text-[10px] text-neutral-500 dark:bg-neutral-700 dark:text-neutral-500",children:b.length})]}),k.crd&&f.jsx("div",{className:"px-2",children:Y.map(X=>{const[oe,xe]=X;return f.jsxs("div",{className:"mb-1",children:[f.jsx("div",{className:"px-3 py-1 text-[10px] text-neutral-400 truncate lowercase dark:text-neutral-600",title:oe,children:oe}),f.jsx("ul",{children:xe.map(Se=>{const Xe=i!==null&&AT(Se,i);return f.jsx("li",{children:f.jsxs("button",{className:`flex items-center w-full px-3 py-2 text-sm rounded-lg transition-colors ${Xe?"bg-white/90 text-neutral-900 shadow-sm dark:bg-neutral-800 dark:text-neutral-100":"text-neutral-600 hover:bg-white/50 hover:text-neutral-900 dark:text-neutral-400 dark:hover:bg-neutral-800/50 dark:hover:text-neutral-200"}`,onClick:()=>a(Se),title:`${Se.kind} (${Se.group})`,children:[f.jsx(im,{size:16,className:"mr-2.5 shrink-0 opacity-70"}),f.jsx("span",{className:"truncate",children:Se.kind})]})},`${Se.group||""}/${Se.name}`)})})]},oe)})})]}),e[10]=p,e[11]=b,e[12]=k,e[13]=u,e[14]=h,e[15]=s,e[16]=r,e[17]=l,e[18]=a,e[19]=i,e[20]=W,e[21]=P,e[22]=G,e[23]=$,e[24]=U}else W=e[20],P=e[21],G=e[22],$=e[23],U=e[24];let Z;e[39]!==W||e[40]!==P||e[41]!==G||e[42]!==U?(Z=f.jsxs("nav",{className:U,children:[W,P,G]}),e[39]=W,e[40]=P,e[41]=G,e[42]=U,e[43]=Z):Z=e[43];let K;return e[44]!==$||e[45]!==Z?(K=f.jsxs(f.Fragment,{children:[$,Z]}),e[44]=$,e[45]=Z,e[46]=K):K=e[46],K}function bJ(t,e){const[n]=t,[s]=e,r=n.split(".").reverse().join("."),i=s.split(".").reverse().join(".");return r.localeCompare(i)}function _J(t,e){const n=e.group||"core";return t[n]||(t[n]=[]),t[n].push(e),t}function xJ(t,e){return t[e.category]||(t[e.category]=[]),t[e.category].push(e),t}function wJ(t){console.error("Failed to load CRDs:",t)}function SJ(t,e){return t.kind.localeCompare(e.kind)}const kJ="docker";function jD(t){const e=Pe.c(32),{mode:n,contexts:s,selectedContext:r,onSelectContext:i,dockerContexts:a,selectedDockerContext:l,onSelectDockerContext:u}=t;let h;e[0]!==a?(h=a===void 0?[]:a,e[0]=a,e[1]=h):h=e[1];const m=h,[p,g]=F.useState(!1),y=F.useRef(null);let b,_;e[2]!==p?(b=()=>{if(!p)return;const B=function(Y){y.current&&!y.current.contains(Y.target)&&g(!1)};return document.addEventListener("mousedown",B),()=>document.removeEventListener("mousedown",B)},_=[p],e[2]=p,e[3]=b,e[4]=_):(b=e[3],_=e[4]),F.useEffect(b,_);let w;e[5]!==i||e[6]!==u?(w=(B,J)=>{J?u&&u(B):i(B),g(!1)},e[5]=i,e[6]=u,e[7]=w):w=e[7];const k=w,C=n==="docker",E=C?l||kJ:r,A=C?CT:ra,R=s.length,N=m.length;if(R+N<=1)return null;let I;e[8]!==p?(I=()=>g(!p),e[8]=p,e[9]=I):I=e[9];let W;e[10]!==A?(W=f.jsx(A,{size:12,className:"opacity-60 group-hover:opacity-80"}),e[10]=A,e[11]=W):W=e[11];let P;e[12]!==E?(P=f.jsx("span",{className:"truncate flex-1 text-left",children:E}),e[12]=E,e[13]=P):P=e[13];const G=`opacity-40 group-hover:opacity-60 transition-transform ${p?"rotate-180":""}`;let $;e[14]!==G?($=f.jsx(Ss,{size:12,className:G}),e[14]=G,e[15]=$):$=e[15];let U;e[16]!==$||e[17]!==I||e[18]!==W||e[19]!==P?(U=f.jsxs("button",{type:"button",onClick:I,className:"flex items-center gap-1.5 w-full px-1 py-0.5 text-xs text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-300 transition-colors rounded group",children:[W,P,$]}),e[16]=$,e[17]=I,e[18]=W,e[19]=P,e[20]=U):U=e[20];let Z;e[21]!==s||e[22]!==m||e[23]!==k||e[24]!==C||e[25]!==p||e[26]!==r||e[27]!==l?(Z=p&&f.jsx("div",{className:"absolute z-50 left-0 right-0 mt-1 bg-white dark:bg-neutral-950 rounded-lg shadow-xl max-h-64 overflow-y-auto border border-neutral-200 dark:border-neutral-700",children:f.jsxs("div",{className:"py-1",children:[m.length>0&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"px-3 py-1 text-[10px] font-semibold text-neutral-400 dark:text-neutral-500 uppercase tracking-wider",children:"Docker"}),m.map(B=>{const J=C&&l===B;return f.jsxs("div",{onClick:()=>k(B,!0),className:`mx-1 px-2.5 py-1.5 rounded-md cursor-pointer text-sm flex items-center justify-between hover:bg-neutral-100 dark:hover:bg-neutral-800 ${J?"text-neutral-900 dark:text-neutral-100":"text-neutral-600 dark:text-neutral-400"}`,children:[f.jsxs("div",{className:"flex items-center gap-2 truncate",children:[f.jsx(CT,{size:14,className:"opacity-50 shrink-0"}),f.jsx("span",{className:"truncate",children:B})]}),J&&f.jsx(Tn,{size:14,className:"text-neutral-500 dark:text-neutral-400 shrink-0"})]},`docker-${B}`)})]}),s.length>0&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:`px-3 py-1 text-[10px] font-semibold text-neutral-400 dark:text-neutral-500 uppercase tracking-wider ${m.length>0?"mt-1":""}`,children:"Kubernetes"}),s.map(B=>{const J=!C&&r===B;return f.jsxs("div",{onClick:()=>k(B,!1),className:`mx-1 px-2.5 py-1.5 rounded-md cursor-pointer text-sm flex items-center justify-between hover:bg-neutral-100 dark:hover:bg-neutral-800 ${J?"text-neutral-900 dark:text-neutral-100":"text-neutral-600 dark:text-neutral-400"}`,children:[f.jsxs("div",{className:"flex items-center gap-2 truncate",children:[f.jsx(ra,{size:14,className:"opacity-50 shrink-0"}),f.jsx("span",{className:"truncate",children:B})]}),J&&f.jsx(Tn,{size:14,className:"text-neutral-500 dark:text-neutral-400 shrink-0"})]},B)})]})]})}),e[21]=s,e[22]=m,e[23]=k,e[24]=C,e[25]=p,e[26]=r,e[27]=l,e[28]=Z):Z=e[28];let K;return e[29]!==U||e[30]!==Z?(K=f.jsxs("div",{className:"relative",ref:y,children:[U,Z]}),e[29]=U,e[30]=Z,e[31]=K):K=e[31],K}function zi(t){return t.toLowerCase().replace(/[-_.]/g,"")}function OD(t){const e=Pe.c(138),{isOpen:n,onClose:s,adapter:r}=t,[i,a]=F.useState(""),[l,u]=F.useState(0);let h;e[0]===Symbol.for("react.memo_cache_sentinel")?(h=[],e[0]=h):h=e[0];const[m,p]=F.useState(h),[g,y]=F.useState(!1),[b,_]=F.useState(!1),[w,k]=F.useState(null),[C,E]=F.useState(r.id),[A,R]=F.useState(!1),N=F.useRef(null),M=F.useRef(null),I=F.useRef(null);r.id!==C&&(E(r.id),_(!1));let W,P;e[1]!==r?(W=()=>{let Ve=!1;return r.initialize().then(()=>{Ve||_(!0)}),()=>{Ve=!0}},P=[r],e[1]=r,e[2]=W,e[3]=P):(W=e[2],P=e[3]),F.useEffect(W,P),n&&!A?(R(!0),a(""),u(0),p([]),k(null)):!n&&A&&R(!1);let G;if(e[4]!==r||e[5]!==i){e:{const Ve=i.trim();if(Ve.startsWith("/")){G={mode:"filter",query:Ve.slice(1).trim(),allNamespaces:!1,prefix:"/"};break e}const Qe=Ve.startsWith("::"),at=Qe?"::":Ve.startsWith(":")?":":"";if(!at){G={mode:"search",query:Ve,allNamespaces:!1,prefix:""};break e}const nn=Ve.slice(at.length).trim(),Vr=nn.indexOf(" ");if(Vr===-1){const ln=r.findResourceType?.(nn);if(ln){if(ln.kind==="namespaces"){G={mode:"namespaces",query:"",allNamespaces:Qe,prefix:at};break e}if(ln.kind==="contexts"){let Xt;e[7]!==at?(Xt={mode:"contexts",query:"",allNamespaces:!1,prefix:at},e[7]=at,e[8]=Xt):Xt=e[8],G=Xt;break e}G={mode:"resources",resourceKind:ln.kind,query:"",allNamespaces:Qe,prefix:at};break e}G={mode:"resources",query:nn,allNamespaces:Qe,prefix:at};break e}const Di=nn.slice(0,Vr),qr=nn.slice(Vr+1).trim(),ga=r.findResourceType?.(Di);if(ga){if(ga.kind==="namespaces"){let Xt;e[9]!==Qe||e[10]!==at||e[11]!==qr?(Xt={mode:"namespaces",query:qr,allNamespaces:Qe,prefix:at},e[9]=Qe,e[10]=at,e[11]=qr,e[12]=Xt):Xt=e[12],G=Xt;break e}if(ga.kind==="contexts"){let Xt;e[13]!==at||e[14]!==qr?(Xt={mode:"contexts",query:qr,allNamespaces:!1,prefix:at},e[13]=at,e[14]=qr,e[15]=Xt):Xt=e[15],G=Xt;break e}let ln;e[16]!==Qe||e[17]!==at||e[18]!==ga.kind||e[19]!==qr?(ln={mode:"search",resourceKind:ga.kind,query:qr,allNamespaces:Qe,prefix:at},e[16]=Qe,e[17]=at,e[18]=ga.kind,e[19]=qr,e[20]=ln):ln=e[20],G=ln;break e}let yr;e[21]!==nn||e[22]!==Qe||e[23]!==at?(yr={mode:"search",query:nn,allNamespaces:Qe,prefix:at},e[21]=nn,e[22]=Qe,e[23]=at,e[24]=yr):yr=e[24],G=yr}e[4]=r,e[5]=i,e[6]=G}else G=e[6];const $=G,{mode:U,resourceKind:Z,query:K,allNamespaces:B}=$;let J;e:{if(!b){let Qe;e[25]===Symbol.for("react.memo_cache_sentinel")?(Qe=[],e[25]=Qe):Qe=e[25],J=Qe;break e}let Ve;e[26]!==r?(Ve=r.getAvailableResourceTypes(),e[26]=r,e[27]=Ve):Ve=e[27],J=Ve}const Y=J;let z;if(e[28]!==Y||e[29]!==K){const Ve=zi(K);z=Y.filter(Qe=>zi(Qe.label).includes(Ve)||zi(Qe.kind).includes(Ve)||zi(Qe.category).includes(Ve)||Qe.aliases?.some(at=>zi(at).includes(Ve))),e[28]=Y,e[29]=K,e[30]=z}else z=e[30];const O=z;let L;e:{if(!r.supportsNamespaces){let Qe;e[31]===Symbol.for("react.memo_cache_sentinel")?(Qe=[],e[31]=Qe):Qe=e[31],L=Qe;break e}let Ve;if(e[32]!==r||e[33]!==K){const Qe=zi(K);Ve=r.getNamespaces().filter(at=>zi(at.name).includes(Qe)),e[32]=r,e[33]=K,e[34]=Ve}else Ve=e[34];L=Ve}const V=L;let T;e:{if(!r.supportsContexts||!r.getContexts){let Qe;e[35]===Symbol.for("react.memo_cache_sentinel")?(Qe=[],e[35]=Qe):Qe=e[35],T=Qe;break e}let Ve;if(e[36]!==r||e[37]!==K){const Qe=zi(K);Ve=r.getContexts().filter(at=>zi(at.name).includes(Qe)||at.cluster&&zi(at.cluster).includes(Qe)),e[36]=r,e[37]=K,e[38]=Ve}else Ve=e[38];T=Ve}const Q=T;let te;e:{if(U==="resources"){let Qe;if(e[39]!==r||e[40]!==O){let at;e[42]!==r?(at=nn=>r.resourceTypeToSearchResult(nn),e[42]=r,e[43]=at):at=e[43],Qe=O.map(at),e[39]=r,e[40]=O,e[41]=Qe}else Qe=e[41];te=Qe;break e}if(U==="namespaces"&&r.supportsNamespaces&&r.namespaceToSearchResult){let Qe;if(e[44]!==r.namespaceToSearchResult||e[45]!==V){let at;e[47]!==r.namespaceToSearchResult?(at=nn=>r.namespaceToSearchResult(nn),e[47]=r.namespaceToSearchResult,e[48]=at):at=e[48],Qe=V.map(at),e[44]=r.namespaceToSearchResult,e[45]=V,e[46]=Qe}else Qe=e[46];te=Qe;break e}if(U==="contexts"&&r.supportsContexts&&r.contextToSearchResult&&r.getContexts){let Qe;if(e[49]!==r.contextToSearchResult||e[50]!==Q){let at;e[52]!==r.contextToSearchResult?(at=nn=>r.contextToSearchResult(nn),e[52]=r.contextToSearchResult,e[53]=at):at=e[53],Qe=Q.map(at),e[49]=r.contextToSearchResult,e[50]=Q,e[51]=Qe}else Qe=e[51];te=Qe;break e}let Ve;e[54]===Symbol.for("react.memo_cache_sentinel")?(Ve=[],e[54]=Ve):Ve=e[54],te=Ve}const X=te,oe=U==="search"||U==="searchAll"||U==="filter"?m:X,xe=(U==="search"||U==="searchAll"||U==="filter")&&K.length>=2&&b,[Se,Xe]=F.useState(U),[Ke,st]=F.useState(X.length);U!==Se?(Xe(U),st(X.length),U!=="search"&&U!=="searchAll"&&U!=="filter"&&u(0)):U!=="search"&&U!=="searchAll"&&U!=="filter"&&X.length!==Ke&&(st(X.length),u(0));const[Le,Ge]=F.useState(xe);xe&&!Le?(Ge(!0),y(!0)):!xe&&Le&&Ge(!1);let ct;e[55]!==r||e[56]!==B||e[57]!==Z||e[58]!==K||e[59]!==xe?(ct=()=>(I.current&&clearTimeout(I.current),xe&&(I.current=setTimeout(async()=>{const Ve=await r.searchResources(K,B,Z);p(Ve),u(0),y(!1)},300)),()=>{I.current&&clearTimeout(I.current)}),e[55]=r,e[56]=B,e[57]=Z,e[58]=K,e[59]=xe,e[60]=ct):ct=e[60];let ut;e[61]!==r||e[62]!==B||e[63]!==Z||e[64]!==U||e[65]!==K||e[66]!==xe?(ut=[xe,U,K,B,Z,r],e[61]=r,e[62]=B,e[63]=Z,e[64]=U,e[65]=K,e[66]=xe,e[67]=ut):ut=e[67],F.useEffect(ct,ut),(U==="search"||U==="searchAll"||U==="filter")&&K.length<2&&m.length>0&&(p([]),y(!1));let mt;e[68]!==r?(mt=Ve=>{r.handleSelect(Ve)},e[68]=r,e[69]=mt):mt=e[69];const pt=mt;let At;e[70]!==l||e[71]!==$.prefix||e[72]!==$.resourceKind||e[73]!==w||e[74]!==i||e[75]!==oe||e[76]!==U?(At=Ve=>{if(oe.length===0)return;w===null&&k(i);const Qe=oe[l];if(!Qe)return;const at=Qe.completionValue||Qe.label;let nn;const Vr=$.prefix;U==="resources"&&Qe.type==="resource-type"?nn=`${Vr}${at} `:U==="namespaces"||U==="contexts"?nn=`${Vr}${U==="namespaces"?"ns":"ctx"} ${at}`:U==="search"||U==="searchAll"?$.resourceKind?nn=`${Vr}${$.resourceKind} ${at}`:nn=`${Vr}${at}`:U==="filter"?nn=`/${at}`:nn=at,a(nn),oe.length>1&&u(Ve?Di=>(Di-1+oe.length)%oe.length:Di=>(Di+1)%oe.length)},e[70]=l,e[71]=$.prefix,e[72]=$.resourceKind,e[73]=w,e[74]=i,e[75]=oe,e[76]=U,e[77]=At):At=e[77];const Me=At;let ze;e[78]!==l||e[79]!==pt||e[80]!==Me||e[81]!==s||e[82]!==w||e[83]!==oe?(ze=Ve=>{e:switch(Ve.key){case"ArrowDown":{Ve.preventDefault(),u(Qe=>Math.min(Qe+1,oe.length-1));break e}case"ArrowUp":{Ve.preventDefault(),u(NJ);break e}case"Tab":{Ve.preventDefault(),Me(Ve.shiftKey);break e}case"Enter":{Ve.preventDefault(),oe[l]&&pt(oe[l]);break e}case"Escape":Ve.preventDefault(),w!==null?(a(w),k(null)):s()}},e[78]=l,e[79]=pt,e[80]=Me,e[81]=s,e[82]=w,e[83]=oe,e[84]=ze):ze=e[84];const De=ze;let Je,Ee;e[85]!==n?(Je=()=>{n&&setTimeout(()=>N.current?.focus(),0)},Ee=[n],e[85]=n,e[86]=Je,e[87]=Ee):(Je=e[86],Ee=e[87]),F.useEffect(Je,Ee);let ae,be;e[88]!==l?(ae=()=>{l>=0&&M.current&&M.current.querySelector(`[data-index="${l}"]`)?.scrollIntoView({block:"nearest"})},be=[l],e[88]=l,e[89]=ae,e[90]=be):(ae=e[89],be=e[90]),F.useEffect(ae,be);let Ye;e[91]!==r||e[92]!==U?(Ye=r.getPlaceholder(U,r.getCurrentScopeLabel?.()??void 0),e[91]=r,e[92]=U,e[93]=Ye):Ye=e[93];const ft=Ye;let Rt;e[94]!==r?(Rt=r.getHelpItems(),e[94]=r,e[95]=Rt):Rt=e[95];const xn=Rt;if(!n)return null;let re,le;e[96]!==s?(re=Ve=>{Ve.target===Ve.currentTarget&&s()},le=f.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:s}),e[96]=s,e[97]=re,e[98]=le):(re=e[97],le=e[98]);let fe;e[99]===Symbol.for("react.memo_cache_sentinel")?(fe=f.jsx(oN,{size:20,className:"text-neutral-400 dark:text-neutral-500 shrink-0"}),e[99]=fe):fe=e[99];let ke;e[100]===Symbol.for("react.memo_cache_sentinel")?(ke=Ve=>a(Ve.target.value),e[100]=ke):ke=e[100];let je;e[101]!==De||e[102]!==ft||e[103]!==i?(je=f.jsx("input",{ref:N,type:"text",className:"flex-1 bg-transparent text-neutral-900 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 outline-none text-base",value:i,onChange:ke,onKeyDown:De,placeholder:ft,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1}),e[101]=De,e[102]=ft,e[103]=i,e[104]=je):je=e[104];let Pt;e[105]!==g?(Pt=g&&f.jsx("div",{className:"shrink-0 w-4 h-4 border-2 border-neutral-300 dark:border-neutral-600 border-t-neutral-500 dark:border-t-neutral-400 rounded-full animate-spin"}),e[105]=g,e[106]=Pt):Pt=e[106];let Dt;e[107]!==je||e[108]!==Pt?(Dt=f.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 border-b border-neutral-200 dark:border-neutral-700",children:[fe,je,Pt]}),e[107]=je,e[108]=Pt,e[109]=Dt):Dt=e[109];let _t;e[110]!==l||e[111]!==pt||e[112]!==xn||e[113]!==g||e[114]!==oe||e[115]!==U||e[116]!==K?(_t=f.jsx("div",{ref:M,className:"max-h-[60vh] overflow-y-auto",children:oe.length===0?f.jsx("div",{className:"px-4 py-8 text-center text-neutral-500 dark:text-neutral-400",children:g?"Searching...":K.length>0&&(U==="search"||U==="searchAll")&&K.length<2?"Type at least 2 characters to search":K.length>0?"No results found":f.jsxs("div",{className:"space-y-2",children:[f.jsx("p",{children:"Type to search or use prefixes:"}),f.jsx("div",{className:"text-sm space-y-1",children:xn.map(CJ)})]})}):f.jsx("div",{className:"py-2",children:oe.map((Ve,Qe)=>{const at=Ve.icon,nn=Qe===l;return f.jsxs("div",{"data-index":Qe,onClick:()=>pt(Ve),className:`flex items-center gap-3 px-4 py-2.5 cursor-pointer ${nn?"bg-neutral-100 dark:bg-neutral-800":"hover:bg-neutral-50 dark:hover:bg-neutral-800/50"}`,children:[f.jsx(at,{size:18,className:`shrink-0 ${Ve.type==="namespace"?"text-blue-500":Ve.type==="context"?"text-purple-500":Ve.type==="resource"?"text-green-500":"text-neutral-400 dark:text-neutral-500"}`}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"text-sm text-neutral-900 dark:text-neutral-100 truncate",children:Ve.label}),Ve.sublabel&&f.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate",children:Ve.sublabel})]}),f.jsxs("div",{className:"shrink-0 flex items-center gap-2",children:[nn&&f.jsx("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:""}),f.jsxs("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:[Ve.type==="resource-type"&&"Type",Ve.type==="namespace"&&"Namespace",Ve.type==="context"&&"Context",Ve.type==="resource"&&"Resource"]})]})]},Ve.id)})})}),e[110]=l,e[111]=pt,e[112]=xn,e[113]=g,e[114]=oe,e[115]=U,e[116]=K,e[117]=_t):_t=e[117];let Ie,$e,Fe,Ue;e[118]===Symbol.for("react.memo_cache_sentinel")?(Ie=f.jsxs("span",{children:[f.jsx("kbd",{className:"px-1 py-0.5 bg-neutral-100 dark:bg-neutral-800 rounded",children:""})," Navigate"]}),$e=f.jsxs("span",{children:[f.jsx("kbd",{className:"px-1 py-0.5 bg-neutral-100 dark:bg-neutral-800 rounded",children:""})," Complete"]}),Fe=f.jsxs("span",{children:[f.jsx("kbd",{className:"px-1 py-0.5 bg-neutral-100 dark:bg-neutral-800 rounded",children:""})," Select"]}),Ue=f.jsx("kbd",{className:"px-1 py-0.5 bg-neutral-100 dark:bg-neutral-800 rounded",children:"esc"}),e[118]=Ie,e[119]=$e,e[120]=Fe,e[121]=Ue):(Ie=e[118],$e=e[119],Fe=e[120],Ue=e[121]);const wt=w!==null?"Revert":"Close";let Lt;e[122]!==wt?(Lt=f.jsxs("div",{className:"flex items-center gap-4",children:[Ie,$e,Fe,f.jsxs("span",{children:[Ue," ",wt]})]}),e[122]=wt,e[123]=Lt):Lt=e[123];let Zt;e[124]!==r||e[125]!==U?(Zt=r.getCurrentScopeLabel?.()&&U==="search"&&f.jsxs("span",{children:["Scope: ",r.getCurrentScopeLabel()]}),e[124]=r,e[125]=U,e[126]=Zt):Zt=e[126];let On;e[127]!==Lt||e[128]!==Zt?(On=f.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-t border-neutral-200 dark:border-neutral-700 text-xs text-neutral-400 dark:text-neutral-500",children:[Lt,Zt]}),e[127]=Lt,e[128]=Zt,e[129]=On):On=e[129];let gr;e[130]!==Dt||e[131]!==_t||e[132]!==On?(gr=f.jsxs("div",{className:"relative w-full max-w-2xl mx-4 bg-white dark:bg-neutral-900 rounded-xl shadow-2xl border border-neutral-200 dark:border-neutral-700 overflow-hidden",children:[Dt,_t,On]}),e[130]=Dt,e[131]=_t,e[132]=On,e[133]=gr):gr=e[133];let Hr;return e[134]!==re||e[135]!==le||e[136]!==gr?(Hr=HC.createPortal(f.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-[15vh]",onClick:re,children:[le,gr]}),document.body),e[134]=re,e[135]=le,e[136]=gr,e[137]=Hr):Hr=e[137],Hr}function CJ(t){return f.jsxs("p",{children:[f.jsx("kbd",{className:"px-1.5 py-0.5 bg-neutral-100 dark:bg-neutral-800 rounded text-xs",children:t.prefix})," ",t.label]},t.prefix)}function NJ(t){return Math.max(t-1,0)}function l0(t){return t.toLowerCase().replace(/[-_.]/g,"")}const MD=[{kind:"contexts",label:"Contexts",icon:aN,category:"Cluster",aliases:["ctx","context"]}];function EJ(t,e){const n=KS(t),s=e?.icon??yJ(t.name),r=e?.label?qS[e.category]:"Other";return{kind:t.name,label:t.kind,icon:s,category:r,aliases:n.length>0?n:void 0}}function RT(t,e){const n=t.toLowerCase(),s=MD.find(r=>r.kind.toLowerCase()===n||r.label.toLowerCase()===n||r.aliases?.some(i=>i.toLowerCase()===n));return s||e.find(r=>!!(r.kind.toLowerCase()===n||r.label.toLowerCase()===n||r.aliases?.some(i=>i.toLowerCase()===n)))}function AJ(t){const{context:e,namespace:n,namespaces:s,contexts:r,currentContext:i,setNamespace:a,setContext:l,setSelectedResource:u,setSelectedItem:h,onClose:m}=t;let p=new Map,g=[];const y={id:"kubernetes",resourceTypes:[],supportsNamespaces:!0,supportsContexts:!0,searchModePrefixes:[{prefix:"::",mode:"searchAll"},{prefix:":",mode:"resources"},{prefix:"/",mode:"filter"}],async initialize(){const b=new Map,_=[],w=[];for(const k of $y)try{const C=await hr(e,k.kind);C&&(b.set(k.kind,C),_.push(EJ(C,k)))}catch{}try{const k=await lm(e);for(const[,C]of k){if(b.has(C.name))continue;b.set(C.name,C);const E=KS(C);w.push({kind:C.name,label:C.kind,icon:TD,category:"Custom Resources",aliases:E.length>0?E:void 0})}}catch{}w.sort((k,C)=>k.label.localeCompare(C.label)),p=b,g=[..._,...w],y.resourceTypes=[..._,...w,...MD]},getAvailableResourceTypes(){return g.filter(b=>p.has(b.kind)||b.kind==="contexts")},getNamespaces(){return s.filter(b=>b.metadata?.name).map(b=>({name:b.metadata.name}))},getContexts(){return r.map(b=>({name:b.name,cluster:b.cluster,isCurrent:b.name===i}))},findResourceType(b){return RT(b,g)},resourceTypeToSearchResult(b){const _=p.get(b.kind),w=KS(_),k=w.length>0?w:b.aliases;return{id:`type-${b.kind}`,type:"resource-type",label:b.label,sublabel:k?.length?`${b.category}  ${k.join(", ")}`:b.category,icon:b.icon,category:b.category,data:{resourceConfig:_,kind:b.kind},completionValue:b.kind}},namespaceToSearchResult(b){return{id:`ns-${b.name}`,type:"namespace",label:b.name,icon:rN,data:{namespace:b.name},completionValue:b.name}},contextToSearchResult(b){return{id:`ctx-${b.name}`,type:"context",label:b.name,sublabel:b.isCurrent?"Current context":b.cluster,icon:aN,data:{context:b.name},completionValue:b.name}},async searchResources(b,_,w){if(!b||b.length<2)return[];const k=[],C=l0(b),E=_?void 0:n;let A=g.filter(M=>p.has(M.kind));if(w){const M=RT(w,g);if(M&&p.has(M.kind))A=[M];else return[]}const R=A.map(async M=>{const I=p.get(M.kind);if(!I)return[];try{const W=await RD(e,I,E),P=[];for(const G of W.rows){if(!G.object.metadata)continue;const $=G.object.metadata.name,U=G.object.metadata.namespace;$&&l0($).includes(C)&&P.push({id:`${M.kind}/${U||""}/${$}`,type:"resource",label:$,sublabel:U?`${M.label} in ${U}`:M.label,icon:M.icon,category:M.category,data:{resourceConfig:I,namespace:U,resourceName:$},completionValue:$})}return P}catch{return[]}}),N=await Promise.all(R);for(const M of N)k.push(...M);return k.sort((M,I)=>{const W=l0(M.label)===C,P=l0(I.label)===C;return W&&!P?-1:!W&&P?1:M.label.localeCompare(I.label)}),k.slice(0,50)},handleSelect(b){if(b.type==="resource-type"){const _=b.data.resourceConfig;if(b.data.kind==="contexts")return;_&&u(_)}else if(b.type==="namespace")a(b.data.namespace);else if(b.type==="context")l(b.data.context);else if(b.type==="resource"){const _=b.data.resourceConfig,w=b.data.namespace,k=b.data.resourceName;w&&w!==n&&a(w),_&&k?h(_.name,k,w):_&&u(_)}m()},getPlaceholder(b,_){switch(b){case"resources":return"Type resource name (e.g., pods, :ns, :ctx)...";case"namespaces":return"Search namespaces...";case"contexts":return"Search contexts...";case"searchAll":return"Search resources across all namespaces...";case"filter":return"Filter current view...";default:return`Search in ${_||n||"all namespaces"}... (:pods, ::pods, /filter)`}},getHelpItems(){return[{prefix:":pods",label:"Resource types (po, deploy, svc...)"},{prefix:"::pods",label:"Search all namespaces"},{prefix:":ns",label:"Switch namespace"},{prefix:":ctx",label:"Switch context"},{prefix:"/",label:"Filter current view"}]},getCurrentScopeLabel(){return n||null}};return y}function cm(t,e){return{id:"delete",label:"Delete",icon:F.createElement(kD,{size:14}),variant:"danger",confirm:{title:"Delete Resource",message:e?.message||"Are you sure you want to delete this resource? This action cannot be undone.",confirmLabel:"Delete"},execute:t,isDisabled:e?.isDisabled,isVisible:e?.isVisible}}function mN(t,e,n){return{id:"scale",label:"Scale",icon:F.createElement(XG,{size:14}),variant:"primary",input:{title:n?.title||"Scale",description:n?.description,submitLabel:"Apply",label:"Replicas",type:"slider",min:0,max:n?.max??20,defaultValue:s=>e(s)},execute:async(s,r,i)=>{const a=i?.value,l=typeof a=="number"?a:Number(a);if(!Number.isFinite(l)||l<0)throw new Error("Replicas must be a non-negative number");await t(s,r,l)},isDisabled:n?.isDisabled}}function gN(t,e){return{id:"restart",label:"Restart",icon:F.createElement(Cn,{size:14}),variant:"secondary",execute:t,isDisabled:e?.isDisabled}}function TT(t){const e=Math.floor((Date.now()-t.getTime())/1e3);if(e<60)return`${e}s ago`;const n=Math.floor(e/60);if(n<60)return`${n}m ago`;const s=Math.floor(n/60);return s<24?`${s}h ago`:`${Math.floor(s/24)}d ago`}function Qd(t){const e=t.match(/^(\d+)(Ki|Mi|Gi|Ti|K|M|G|T)?$/);if(!e)return t;const n=parseInt(e[1],10),s=e[2];return s?s==="Ki"&&n>=1024*1024?`${(n/(1024*1024)).toFixed(1)}Gi`:s==="Ki"&&n>=1024?`${(n/1024).toFixed(1)}Mi`:s==="Mi"&&n>=1024?`${(n/1024).toFixed(1)}Gi`:t:n>=1024*1024*1024?`${(n/(1024*1024*1024)).toFixed(1)}Gi`:n>=1024*1024?`${(n/(1024*1024)).toFixed(1)}Mi`:n>=1024?`${(n/1024).toFixed(1)}Ki`:`${n}B`}function ID(t){switch(t){case"ReadWriteOnce":return"bg-blue-500/20 text-blue-400 border border-blue-500/30";case"ReadOnlyMany":return"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30";case"ReadWriteMany":return"bg-purple-500/20 text-purple-400 border border-purple-500/30";case"ReadWriteOncePod":return"bg-amber-500/20 text-amber-400 border border-amber-500/30";default:return"bg-gray-700 text-gray-300"}}function DD(t){switch(t){case"ReadWriteOnce":return"RWO";case"ReadOnlyMany":return"ROX";case"ReadWriteMany":return"RWX";case"ReadWriteOncePod":return"RWOP";default:return t}}function RJ(t){const e=t.split(" ");if(e.length!==5)return t;const[n,s,r,i,a]=e;if(t==="* * * * *")return"Every minute";if(t==="0 * * * *")return"Every hour";if(t==="0 0 * * *")return"Every day at midnight";if(t==="0 0 * * 0")return"Every Sunday at midnight";if(t==="0 0 1 * *")return"First day of every month at midnight";const l=[];if(n!=="*"&&l.push(`at minute ${n}`),s!=="*"&&l.push(`at hour ${s}`),r!=="*"&&l.push(`on day ${r}`),i!=="*"&&l.push(`in month ${i}`),a!=="*"){const u=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],h=parseInt(a);l.push(`on ${isNaN(h)?a:u[h]||a}`)}return l.length>0?l.join(", "):"Custom schedule"}function jT(t){return{name:t.name,image:t.image||"",resources:t.resources?{requests:t.resources.requests,limits:t.resources.limits}:void 0,ports:t.ports?.map(e=>({name:e.name,containerPort:e.containerPort,protocol:e.protocol})),command:t.command,args:t.args,mounts:t.volumeMounts?.map(e=>({name:e.name,mountPath:e.mountPath,readOnly:e.readOnly,subPath:e.subPath})),env:t.env?.map(LD),envFrom:t.envFrom?.map(PD).filter(e=>e!==null)}}function Lh(t,e,n){const s=[];return e&&e.length>0&&s.push({id:"init-containers",title:"Init Containers",data:{type:"containers",items:e.map(jT)}}),t&&t.length>0&&s.push({id:"containers",title:"Containers",data:{type:"containers",items:t.map(jT),metricsLoader:n}}),s}function TJ(t){if(!t||t.length===0)return null;let e=0,n=0,s=0,r=0,i=!1,a=!1,l=!1,u=!1;for(const h of t){const m=h.resources;if(!m)continue;const p=m.requests,g=m.limits;p?.cpu&&(e+=el(p.cpu),i=!0),g?.cpu&&(n+=el(g.cpu),a=!0),p?.memory&&(s+=tl(p.memory),l=!0),g?.memory&&(r+=tl(g.memory),u=!0)}return!i&&!a&&!l&&!u?null:{cpu:{requests:i?Ip(e):void 0,requestsNanoCores:i?e:void 0,limits:a?Ip(n):void 0,limitsNanoCores:a?n:void 0},memory:{requests:l?Dp(s):void 0,requestsBytes:l?s:void 0,limits:u?Dp(r):void 0,limitsBytes:u?r:void 0}}}function Mc(t){const e=TJ(t);return e?{id:"resource-quota",data:{type:"resource-quota",data:e}}:null}function LD(t){if(t.value!==void 0)return{name:t.name,value:t.value};if(t.valueFrom){if(t.valueFrom.secretKeyRef)return{name:t.name,valueFrom:{type:"secretKeyRef",source:t.valueFrom.secretKeyRef.name??"",key:t.valueFrom.secretKeyRef.key}};if(t.valueFrom.configMapKeyRef)return{name:t.name,valueFrom:{type:"configMapKeyRef",source:t.valueFrom.configMapKeyRef.name??"",key:t.valueFrom.configMapKeyRef.key}};if(t.valueFrom.fieldRef)return{name:t.name,valueFrom:{type:"fieldRef",source:t.valueFrom.fieldRef.fieldPath}};if(t.valueFrom.resourceFieldRef){const e=t.valueFrom.resourceFieldRef.resource,n=t.valueFrom.resourceFieldRef.containerName;return{name:t.name,valueFrom:{type:"resourceFieldRef",source:n?`${n}/${e}`:e}}}}return{name:t.name,value:""}}function PD(t){return t.configMapRef?{name:t.configMapRef.name??"",type:"configMap",prefix:t.prefix}:t.secretRef?{name:t.secretRef.name??"",type:"secret",prefix:t.prefix}:null}const jJ={kinds:["Deployment","Deployments"],actions:[mN(async(t,e,n)=>{const s=e.metadata?.name,r=e.metadata?.namespace;if(!s||!r)throw new Error("Deployment name/namespace missing");const i=await hr(t,"deployments");if(!i)throw new Error("Could not get deployment configuration");await cN(t,i,s,n,r)},t=>t.spec?.replicas??1,{title:"Scale Deployment"}),gN(async(t,e)=>{const n=e.metadata?.name,s=e.metadata?.namespace;if(!n||!s)throw new Error("Deployment name/namespace missing");const r=await hr(t,"deployments");if(!r)throw new Error("Could not get deployment configuration");await uN(t,r,n,s)})],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata,i=r?.namespace;if(!n)return{sections:[]};const a=n.replicas??1,l=s?.readyReplicas??0,u=s?.updatedReplicas??0,h=s?.availableReplicas??0,m=async()=>{const y=n.selector?.matchLabels;if(!i||!y||Object.keys(y).length===0)return null;const b=await dN(t,i,y);return b.length===0?null:fN(b)},p=[...n.template?.spec?.containers??[],...n.template?.spec?.initContainers??[]],g=Mc(p);return{sections:[{id:"replicas",title:"Replica Status",data:{type:"gauges",items:[{label:"Ready",current:l,total:a,color:"emerald"},{label:"Updated",current:u,total:a,color:"blue"},{label:"Available",current:h,total:a,color:"cyan"}],showPodGrid:{total:a,ready:l,available:h,icon:"box"}}},{id:"strategy",data:{type:"info-grid",items:[{label:"Strategy",value:n.strategy?.type||"RollingUpdate"},...n.strategy?.rollingUpdate?[{label:"Max Surge",value:String(n.strategy.rollingUpdate.maxSurge??"25%"),color:"text-cyan-400"},{label:"Max Unavailable",value:String(n.strategy.rollingUpdate.maxUnavailable??"25%"),color:"text-amber-400"}]:[]],columns:3}},{id:"replicasets",data:{type:"related-replicasets",title:"ReplicaSets",loader:async()=>{if(!i||!r?.name)return[];try{const y=await hr(t,"replicasets");if(!y)return[];const b=await lN(t,y,i),_=r.name??"",w=r.uid;return b.filter(k=>{const C=k.metadata,E=C.name;if(C.ownerReferences?.some(R=>R.kind==="Deployment"&&R.name===_||R.uid===w))return!0;if(E.startsWith(_+"-")){const R=E.slice(_.length+1);return/^[a-z0-9]{7,10}$/.test(R)}return!1}).map(k=>{const C=k.metadata,E=k.spec,A=k.status;return{name:C.name,replicas:A?.replicas??0,readyReplicas:A?.readyReplicas??0,images:E?.template?.spec?.containers?.map(R=>R.image)??[],isCurrent:(A?.replicas??0)>0,namespace:i,context:t}}).sort((k,C)=>k.isCurrent&&!C.isCurrent?-1:!k.isCurrent&&C.isCurrent?1:C.name.localeCompare(k.name))}catch(y){return console.error("Failed to fetch ReplicaSets:",y),[]}}}},...Lh(n.template?.spec?.containers,n.template?.spec?.initContainers,m),...g?[g]:[]]}}},OJ={kinds:["Pod","Pods"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata,i=r?.namespace;if(!n)return{sections:[]};const a=n.containers??[],l=n.initContainers??[],u=s?.containerStatuses??[],h=s?.initContainerStatuses??[],m=u.reduce((b,_)=>b+(_.restartCount??0),0),p=async()=>{const b=r?.name,_=i;if(!b||!_)return null;const w=await dJ(t,b,_);if(!w)return null;const k=new Map;for(const C of w.containers)k.set(C.name,{cpu:{usage:Ip(el(C.usage.cpu)),usageNanoCores:el(C.usage.cpu)},memory:{usage:Dp(tl(C.usage.memory)),usageBytes:tl(C.usage.memory)}});return k},g=[...a,...l],y=Mc(g);return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Phase",value:s?.phase||"Unknown",status:IJ(s?.phase)},{label:"Pod IP",value:s?.podIP||"Pending"},{label:"Node",value:n.nodeName||"Not scheduled"},{label:"Restarts",value:m,status:m>0?"warning":"success"}]}},...y?[y]:[],...l.length>0?[{id:"init-containers",title:"Init Containers",data:{type:"containers",items:l.map(b=>OT(b,h))}}]:[],{id:"containers",title:"Containers",data:{type:"containers",items:a.map(b=>OT(b,u)),metricsLoader:p}},...n.volumes?.length?[{id:"volumes",title:"Volumes",data:{type:"volumes",items:n.volumes.map(b=>MJ(b,[...a,...l]))}}]:[]]}}};function OT(t,e){const n=e.find(a=>a.name===t.name),s=DJ(n),r=n?.lastState?.terminated,i=n?.state?.terminated;return{name:t.name,image:t.image||"",state:s.state,stateReason:s.reason,stateMessage:s.message,ready:n?.ready,restartCount:n?.restartCount,currentTermination:i?{reason:i.reason,message:i.message,exitCode:i.exitCode,signal:i.signal,startedAt:i.startedAt?.toISOString?.()??i.startedAt,finishedAt:i.finishedAt?.toISOString?.()??i.finishedAt}:void 0,lastTermination:r?{reason:r.reason,exitCode:r.exitCode,signal:r.signal,finishedAt:r.finishedAt?.toISOString?.()??r.finishedAt}:void 0,resources:t.resources?{requests:t.resources.requests,limits:t.resources.limits}:void 0,ports:t.ports?.map(a=>({name:a.name,containerPort:a.containerPort,protocol:a.protocol})),command:t.command,args:t.args,mounts:t.volumeMounts?.map(a=>({name:a.name,mountPath:a.mountPath,readOnly:a.readOnly,subPath:a.subPath})),env:t.env?.map(LD),envFrom:t.envFrom?.map(PD).filter(a=>a!==null)}}function MJ(t,e){const n=LJ(t),s=[];for(const r of e)if(r.volumeMounts)for(const i of r.volumeMounts)i.name===t.name&&s.push({container:r.name,mountPath:i.mountPath,readOnly:i.readOnly??!1,subPath:i.subPath});return{name:t.name,type:n.type,source:n.detail,extra:n.extra,mounts:s}}function IJ(t){switch(t?.toLowerCase()){case"running":return"success";case"succeeded":return"success";case"pending":return"warning";case"failed":return"error";default:return"neutral"}}function DJ(t){return t?.state?t.state.running?{state:"running"}:t.state.waiting?{state:"waiting",reason:t.state.waiting.reason,message:t.state.waiting.message}:t.state.terminated?{state:"terminated",reason:t.state.terminated.reason,message:t.state.terminated.message}:{}:{}}function c0(t){const e=t.toString(8).padStart(4,"0"),n=parseInt(e[e.length-4]||"0",10),s=parseInt(e[e.length-3],10),r=parseInt(e[e.length-2],10),i=parseInt(e[e.length-1],10),a=(n&4)!==0,l=(n&2)!==0,u=(n&1)!==0,h=b=>b&4?"r":"-",m=b=>b&2?"w":"-",p=s&1?a?"s":"x":a?"S":"-",g=r&1?l?"s":"x":l?"S":"-",y=i&1?u?"t":"x":u?"T":"-";return h(s)+m(s)+p+h(r)+m(r)+g+h(i)+m(i)+y}function LJ(t){if(t.configMap)return{type:"ConfigMap",detail:t.configMap.name||"",extra:{...t.configMap.optional!==void 0&&{optional:String(t.configMap.optional)},...t.configMap.defaultMode!==void 0&&{mode:c0(t.configMap.defaultMode)}}};if(t.secret)return{type:"Secret",detail:t.secret.secretName||"",extra:{...t.secret.optional!==void 0&&{optional:String(t.secret.optional)},...t.secret.defaultMode!==void 0&&{mode:c0(t.secret.defaultMode)}}};if(t.emptyDir)return{type:"EmptyDir",detail:t.emptyDir.medium||"default",extra:{...t.emptyDir.sizeLimit&&{sizeLimit:t.emptyDir.sizeLimit}}};if(t.hostPath)return{type:"HostPath",detail:t.hostPath.path,extra:{...t.hostPath.type&&{type:t.hostPath.type}}};if(t.persistentVolumeClaim)return{type:"PVC",detail:t.persistentVolumeClaim.claimName,extra:{...t.persistentVolumeClaim.readOnly&&{readOnly:"true"}}};if(t.projected){const e=t.projected.sources||[],n=e.map(s=>s.configMap?"ConfigMap":s.secret?"Secret":s.serviceAccountToken?"ServiceAccountToken":s.downwardAPI?"DownwardAPI":"Unknown");return{type:"Projected",detail:`${e.length} sources`,extra:{sources:n.join(", "),...t.projected.defaultMode!==void 0&&{mode:c0(t.projected.defaultMode)}}}}return t.downwardAPI?{type:"DownwardAPI",detail:`${t.downwardAPI.items?.length||0} items`,extra:{...t.downwardAPI.defaultMode!==void 0&&{mode:c0(t.downwardAPI.defaultMode)}}}:t.nfs?{type:"NFS",detail:`${t.nfs.server}:${t.nfs.path}`,extra:{...t.nfs.readOnly&&{readOnly:"true"}}}:t.csi?{type:"CSI",detail:t.csi.driver,extra:{...t.csi.fsType&&{fsType:t.csi.fsType},...t.csi.readOnly&&{readOnly:"true"}}}:{type:"Unknown",detail:""}}const PJ={kinds:["StatefulSet","StatefulSets"],actions:[mN(async(t,e,n)=>{const s=e.metadata?.name,r=e.metadata?.namespace;if(!s||!r)throw new Error("StatefulSet name/namespace missing");const i=await hr(t,"statefulsets");if(!i)throw new Error("Could not get statefulset configuration");await cN(t,i,s,n,r)},t=>t.spec?.replicas??1,{title:"Scale StatefulSet"}),gN(async(t,e)=>{const n=e.metadata?.name,s=e.metadata?.namespace;if(!n||!s)throw new Error("StatefulSet name/namespace missing");const r=await hr(t,"statefulsets");if(!r)throw new Error("Could not get statefulset configuration");await uN(t,r,n,s)})],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata,i=r?.namespace;if(!n)return{sections:[]};const a=n.replicas??1,l=s?.readyReplicas??0,u=s?.currentReplicas??0,h=s?.updatedReplicas??0,m=s?.availableReplicas??0,p=Array.from({length:a},(_,w)=>`${r?.name}-${w}`),g=async()=>{const _=n.selector?.matchLabels;if(!i||!_||Object.keys(_).length===0)return null;const w=await dN(t,i,_);return w.length===0?null:fN(w)},y=[...n.template?.spec?.containers??[],...n.template?.spec?.initContainers??[]],b=Mc(y);return{sections:[{id:"replicas",title:"Replica Status",data:{type:"gauges",items:[{label:"Ready",current:l,total:a,color:"emerald"},{label:"Current",current:u,total:a,color:"blue"},{label:"Updated",current:h,total:a,color:"cyan"}],showPodGrid:{total:a,ready:l,available:m,showOrdinal:!0,icon:"database",podTitles:p}}},{id:"config",data:{type:"info-grid",items:[{label:"Service Name",value:n.serviceName,color:"text-cyan-400"},{label:"Pod Management",value:n.podManagementPolicy||"OrderedReady"},{label:"Update Strategy",value:n.updateStrategy?.type||"RollingUpdate"},...n.updateStrategy?.rollingUpdate?.partition!==void 0?[{label:"Partition",value:n.updateStrategy.rollingUpdate.partition,color:"text-amber-400"}]:[]],columns:2}},...s?.currentRevision?[{id:"revisions",title:"Revisions",data:{type:"info-grid",items:[{label:"Current",value:s.currentRevision,color:"text-cyan-400"},...s.updateRevision&&s.updateRevision!==s.currentRevision?[{label:"Update",value:s.updateRevision,color:"text-amber-400"}]:[]],columns:1}}]:[],...n.volumeClaimTemplates?.length?[{id:"volume-templates",title:"Volume Claim Templates",data:{type:"volume-claim-templates",items:n.volumeClaimTemplates.map(_=>({name:_.metadata?.name||"",size:_.spec?.resources?.requests?.storage,storageClass:_.spec?.storageClassName,accessModes:_.spec?.accessModes}))}}]:[],{id:"pvcs",data:{type:"related-pvcs",title:"Persistent Volume Claims",loader:async()=>{if(!i||!r?.name)return[];try{const _=await hr(t,"persistentvolumeclaims");if(!_)return[];const w=await lN(t,_,i),k=r.name,C=n?.volumeClaimTemplates?.map(E=>E.metadata?.name)??[];return w.filter(E=>{const R=E.metadata.name;return C.some(N=>R.startsWith(`${N}-${k}-`))}).map(E=>{const A=E.metadata,R=E.spec,N=E.status;return{name:A.name,status:N?.phase??"Unknown",capacity:N?.capacity?.storage,storageClass:R?.storageClassName,namespace:i,context:t}})}catch(_){return console.error("Failed to fetch PVCs:",_),[]}}}},...Lh(n.template?.spec?.containers,n.template?.spec?.initContainers,g),...b?[b]:[]]}}},BJ={kinds:["DaemonSet","DaemonSets"],actions:[gN(async(t,e)=>{const n=e.metadata?.name,s=e.metadata?.namespace;if(!n||!s)throw new Error("DaemonSet name/namespace missing");const r=await hr(t,"daemonsets");if(!r)throw new Error("Could not get daemonset configuration");await uN(t,r,n,s)})],adapt(t,e){const n=e.spec,s=e.status,i=e.metadata?.namespace;if(!n)return{sections:[]};const a=s?.desiredNumberScheduled??0,l=s?.currentNumberScheduled??0,u=s?.numberReady??0,h=s?.numberAvailable??0,m=s?.numberMisscheduled??0,p=s?.updatedNumberScheduled??0,g=async()=>{const _=n.selector?.matchLabels;if(!i||!_||Object.keys(_).length===0)return null;const w=await dN(t,i,_);return w.length===0?null:fN(w)},y=[...n.template?.spec?.containers??[],...n.template?.spec?.initContainers??[]],b=Mc(y);return{sections:[{id:"distribution",title:"Node Distribution",data:{type:"gauges",items:[{label:"Scheduled",current:l,total:a,color:"blue"},{label:"Ready",current:u,total:a,color:"emerald"},{label:"Available",current:h,total:a,color:"cyan"}],showPodGrid:{total:a,ready:u,current:l,icon:"server"}}},{id:"status",data:{type:"info-grid",items:[{label:"Update Strategy",value:n.updateStrategy?.type||"RollingUpdate"},{label:"Updated",value:`${p}/${a}`,color:"text-cyan-400"},...m>0?[{label:"Misscheduled",value:`${m} pods on wrong nodes`,color:"text-red-400"}]:[]],columns:2}},...n.updateStrategy?.rollingUpdate?[{id:"rolling-update",title:"Rolling Update Config",data:{type:"info-grid",items:[{label:"Max Unavailable",value:String(n.updateStrategy.rollingUpdate.maxUnavailable??1),color:"text-amber-400"},...n.updateStrategy.rollingUpdate.maxSurge?[{label:"Max Surge",value:String(n.updateStrategy.rollingUpdate.maxSurge),color:"text-cyan-400"}]:[]],columns:2}}]:[],...n.template?.spec?.nodeSelector&&Object.keys(n.template.spec.nodeSelector).length>0?[{id:"node-selector",data:{type:"labels",labels:n.template.spec.nodeSelector,title:"Node Selector"}}]:[],...Lh(n.template?.spec?.containers,n.template?.spec?.initContainers,g),...b?[b]:[]]}}},$J={kinds:["Node","Nodes"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata;if(!s)return{sections:[]};const i=s.nodeInfo,a=s.conditions??[],l=s.addresses??[],u=s.capacity??{},h=s.allocatable??{},m=n?.taints??[],p=r?.labels??{},y=a.find(_=>_.type==="Ready")?.status==="True",b=Object.keys(p).filter(_=>_.startsWith("node-role.kubernetes.io/")).map(_=>_.replace("node-role.kubernetes.io/",""));return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Status",value:y?"Ready":"NotReady",status:y?"success":"error",icon:y?f.jsx(Oi,{size:14}):f.jsx(to,{size:14})},{label:"Role",value:b.length>0?b.join(", "):"worker",icon:f.jsx(ra,{size:14,className:"text-purple-400"})}]}},{id:"metrics",data:{type:"node-metrics",title:"Resource Usage",loader:async()=>{const _=r?.name;if(!_)return null;const w=await fJ(t,_);if(!w)return null;const k=h.cpu??"0",C=h.memory??"0";return{cpu:{usage:Ip(el(w.usage.cpu)),usageNanoCores:el(w.usage.cpu),allocatable:k,allocatableNanoCores:el(k)},memory:{usage:Dp(tl(w.usage.memory)),usageBytes:tl(w.usage.memory),allocatable:Qd(C),allocatableBytes:tl(C)}}}}},...l.length>0?[{id:"addresses",title:"Addresses",data:{type:"addresses",addresses:l.map(_=>({type:_.type||"",address:_.address||""}))}}]:[],{id:"resources",title:"Resources",data:{type:"capacity-bars",items:[{label:"CPU",icon:f.jsx(eb,{size:14,className:"text-blue-400"}),capacity:u.cpu??"0",allocatable:h.cpu??"0"},{label:"Memory",icon:f.jsx(Ws,{size:14,className:"text-purple-400"}),capacity:Qd(u.memory??"0"),allocatable:Qd(h.memory??"0")},{label:"Pods",icon:f.jsx(eo,{size:14,className:"text-emerald-400"}),capacity:u.pods??"0",allocatable:h.pods??"0"},...u["ephemeral-storage"]?[{label:"Storage",icon:f.jsx(Ws,{size:14,className:"text-amber-400"}),capacity:Qd(u["ephemeral-storage"]),allocatable:Qd(h["ephemeral-storage"]??"0")}]:[]]}},...i?[{id:"system-info",title:"System Info",data:{type:"info-grid",items:[{label:"OS",value:i.operatingSystem},{label:"Arch",value:i.architecture},{label:"Kernel",value:i.kernelVersion},{label:"OS Image",value:i.osImage},{label:"Container Runtime",value:i.containerRuntimeVersion},{label:"Kubelet",value:i.kubeletVersion},{label:"Kube-Proxy",value:i.kubeProxyVersion}],columns:2}}]:[],...m.length>0?[{id:"taints",title:"Taints",data:{type:"taints",items:m.map(_=>({key:_.key||"",value:_.value,effect:_.effect||""}))}}]:[]]}}},zJ={kinds:["CronJob","CronJobs"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata,i=r?.namespace;if(!n)return{sections:[]};const a=n.suspend??!1,l=n.schedule,u=s?.lastScheduleTime?new Date(s.lastScheduleTime):null,h=s?.lastSuccessfulTime?new Date(s.lastSuccessfulTime):null,m=s?.active?.length??0,p=RJ(l),g=[...n.jobTemplate?.spec?.template?.spec?.containers??[],...n.jobTemplate?.spec?.template?.spec?.initContainers??[]],y=Mc(g);return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Status",value:a?"Suspended":"Active",status:a?"warning":"success",icon:a?f.jsx(jp,{size:14}):f.jsx(th,{size:14})},{label:"Active Jobs",value:String(m),status:m>0?"warning":"neutral",icon:f.jsx(fl,{size:14,className:"text-blue-400"})}]}},...y?[y]:[],{id:"schedule",data:{type:"schedule",schedule:l,description:p}},{id:"timing",data:{type:"info-grid",items:[...u?[{label:"Last Scheduled",value:TT(u),color:"text-purple-400"}]:[],...h?[{label:"Last Successful",value:TT(h),color:"text-emerald-400"}]:[]],columns:2}},{id:"job-config",title:"Job Configuration",data:{type:"info-grid",items:[{label:"Concurrency Policy",value:n.concurrencyPolicy||"Allow",color:FJ(n.concurrencyPolicy)},...n.startingDeadlineSeconds?[{label:"Starting Deadline",value:`${n.startingDeadlineSeconds}s`}]:[],{label:"Successful History",value:n.successfulJobsHistoryLimit??3},{label:"Failed History",value:n.failedJobsHistoryLimit??1},...n.jobTemplate?.spec?.backoffLimit!==void 0?[{label:"Backoff Limit",value:n.jobTemplate.spec.backoffLimit}]:[],...n.jobTemplate?.spec?.activeDeadlineSeconds?[{label:"Job Deadline",value:`${n.jobTemplate.spec.activeDeadlineSeconds}s`,color:"text-amber-400"}]:[]],columns:2}},{id:"jobs",data:{type:"related-jobs",title:"Recent Jobs",loader:async()=>{if(!i||!r?.name)return[];try{const b=await hr(t,"jobs");if(!b)return[];const _=await lN(t,b,i),w=r.name??"",k=r.uid;return _.filter(C=>{const E=C.metadata,A=E.name;if(E.ownerReferences?.some(N=>N.kind==="CronJob"&&N.name===w||N.uid===k))return!0;if(A.startsWith(w+"-")){const N=A.slice(w.length+1);return/^\d{10}$/.test(N)}return!1}).map(C=>{const E=C.metadata,A=C.status,R=A?.conditions,N=R?.some(I=>I.type==="Complete"&&I.status==="True"),M=R?.some(I=>I.type==="Failed"&&I.status==="True");return{name:E.name,status:N?"Complete":M?"Failed":"Running",startTime:A?.startTime,completionTime:A?.completionTime,succeeded:A?.succeeded,failed:A?.failed,namespace:i,context:t}}).sort((C,E)=>{const A=C.startTime?new Date(C.startTime).getTime():0;return(E.startTime?new Date(E.startTime).getTime():0)-A})}catch(b){return console.error("Failed to fetch Jobs:",b),[]}}}},...Lh(n.jobTemplate?.spec?.template?.spec?.containers,n.jobTemplate?.spec?.template?.spec?.initContainers)]}}};function FJ(t){switch(t){case"Forbid":return"text-red-400";case"Replace":return"text-amber-400";default:return"text-emerald-400"}}const UJ={kinds:["Job","Jobs"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=n.completions??1,i=n.parallelism??1,a=s?.succeeded??0,l=s?.failed??0,u=s?.active??0,h=n.backoffLimit??6,m=a>=r,p=s?.conditions?.some(k=>k.type==="Failed"&&k.status==="True"),g=m?"Complete":p?"Failed":u>0?"Running":"Pending",y=s?.startTime?new Date(s.startTime):void 0,b=s?.completionTime?new Date(s.completionTime):void 0,_=[...n.template?.spec?.containers??[],...n.template?.spec?.initContainers??[]],w=Mc(_);return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Status",value:g,status:m?"success":p?"error":u>0?"warning":"neutral",icon:m?f.jsx(Oi,{size:14}):p?f.jsx(to,{size:14}):f.jsx(th,{size:14})},...y?[{label:"Duration",value:HJ(y,b),icon:f.jsx(fl,{size:14,className:"text-blue-400"})}]:[]]}},...w?[w]:[],{id:"progress",title:"Progress",data:{type:"job-progress",completions:r,succeeded:a,failed:l,active:u}},{id:"config",data:{type:"info-grid",items:[{label:"Parallelism",value:i,color:"text-cyan-400"},{label:"Backoff Limit",value:`${h}${l>0?` (${l} failures)`:""}`,color:l>=h?"text-red-400":l>0?"text-amber-400":void 0},...n.activeDeadlineSeconds?[{label:"Deadline",value:`${n.activeDeadlineSeconds}s`,color:"text-amber-400"}]:[],...n.ttlSecondsAfterFinished!==void 0?[{label:"TTL After Finished",value:`${n.ttlSecondsAfterFinished}s`}]:[],...n.completionMode?[{label:"Completion Mode",value:n.completionMode,color:"text-purple-400"}]:[]],columns:2}},...y?[{id:"timeline",title:"Timeline",data:{type:"timeline",startTime:y,completionTime:b}}]:[],...Lh(n.template?.spec?.containers,n.template?.spec?.initContainers)]}}};function HJ(t,e){const s=(e??new Date).getTime()-t.getTime(),r=Math.floor(s/1e3),i=Math.floor(r/60),a=Math.floor(i/60),l=Math.floor(a/24);return l>0?`${l}d ${a%24}h`:a>0?`${a}h ${i%60}m`:i>0?`${i}m ${r%60}s`:`${r}s`}const VJ={kinds:["ReplicaSet","ReplicaSets"],actions:[mN(async(t,e,n)=>{const s=e.metadata?.name,r=e.metadata?.namespace;if(!s||!r)throw new Error("ReplicaSet name/namespace missing");const i=await hr(t,"replicasets");if(!i)throw new Error("Could not get replicaset configuration");await cN(t,i,s,n,r)},t=>t.spec?.replicas??1,{title:"Scale ReplicaSet",description:"Set the desired number of replicas. Note: If this ReplicaSet is managed by a Deployment, the Deployment may override this change."})],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata,i=r?.namespace;if(!n)return{sections:[]};const a=n.replicas??1,l=s?.replicas??0,u=s?.readyReplicas??0,h=s?.availableReplicas??0,m=r?.ownerReferences?.[0],p=[...n.template?.spec?.containers??[],...n.template?.spec?.initContainers??[]],g=Mc(p),y=b=>({Deployment:"deployments",StatefulSet:"statefulsets",DaemonSet:"daemonsets",Job:"jobs"})[b]||b.toLowerCase()+"s";return{sections:[...m?[{id:"owner",data:{type:"custom",render:()=>{const b=f.jsxs("div",{className:`bg-blue-500/10 border border-blue-500/30 rounded-lg p-3 ${i?"hover:bg-blue-500/15 transition-colors cursor-pointer":""}`,children:[f.jsxs("div",{className:"text-xs text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(pl,{size:10})," Owned By"]}),f.jsxs("div",{className:"text-sm flex items-center gap-2",children:[f.jsxs("span",{className:"text-neutral-500",children:[m.kind,":"]}),f.jsx("span",{className:"text-cyan-400",children:m.name})]})]});return i?f.jsx(ji,{to:"/cluster/$context/$resourceType/$name",params:{context:t,resourceType:y(m.kind),name:m.name},search:_=>({..._,namespace:i}),children:b}):b}}}]:[],{id:"replicas",title:"Replica Status",data:{type:"gauges",items:[{label:"Ready",current:u,total:a,color:"emerald"},{label:"Current",current:l,total:a,color:"blue"},{label:"Available",current:h,total:a,color:"cyan"}],showPodGrid:{total:Math.max(a,l),ready:u,available:h,current:l,icon:"box"}}},...g?[g]:[],...n.selector?.matchLabels?[{id:"selector",data:{type:"labels",labels:n.selector.matchLabels,title:"Selector"}}]:[],...Lh(n.template?.spec?.containers,n.template?.spec?.initContainers)]}}},qJ={kinds:["PersistentVolume","PersistentVolumes"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=s?.phase??"Unknown",i=n.capacity?.storage??"Unknown";return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Phase",value:r,status:KJ(r)},{label:"Capacity",value:i,icon:f.jsx(Ws,{size:14,className:"text-purple-400"})},{label:"Reclaim Policy",value:n.persistentVolumeReclaimPolicy??"Delete",status:n.persistentVolumeReclaimPolicy==="Retain"?"warning":"neutral"},{label:"Volume Mode",value:n.volumeMode??"Filesystem"}]}},...n.accessModes?.length?[{id:"access-modes",title:"Access Modes",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.accessModes.map((a,l)=>f.jsx("span",{className:`text-xs px-2 py-1 rounded ${ID(a)}`,children:DD(a)},l))})}}]:[],...n.storageClassName?[{id:"storage-class",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Storage Class"}),f.jsxs("div",{className:"text-sm text-purple-600 dark:text-purple-400 flex items-center gap-2",children:[f.jsx(Ih,{size:14}),n.storageClassName]})]})}}]:[],...n.claimRef?[{id:"claim-ref",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(pl,{size:10})," Bound To"]}),f.jsxs("div",{className:"text-sm",children:[f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-500",children:[n.claimRef.namespace,"/"]}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:n.claimRef.name})]})]})}}]:[],{id:"source",title:"Volume Source",data:{type:"custom",render:()=>{const a=WJ(n),l=a.find(h=>h.label==="Type")?.value||"Unknown",u=a.filter(h=>h.label!=="Type");return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3 space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:"Type:"}),f.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-purple-500/20 text-purple-700 dark:text-purple-400",children:l})]}),u.length>0&&f.jsx("div",{className:"space-y-1 pl-1",children:u.map((h,m)=>f.jsxs("div",{className:"text-xs",children:[f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-500",children:[h.label,":"]})," ",f.jsx("span",{className:h.color?`${h.color.replace("text-cyan-400","text-cyan-600 dark:text-cyan-400").replace("text-purple-400","text-purple-600 dark:text-purple-400")}`:"text-neutral-900 dark:text-neutral-300",children:h.value})]},m))})]})}}},...n.nodeAffinity?.required?.nodeSelectorTerms?[{id:"node-affinity",title:"Node Affinity",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.nodeAffinity.required.nodeSelectorTerms.map((a,l)=>f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-2",children:a.matchExpressions?.map((u,h)=>f.jsxs("div",{className:"text-xs",children:[f.jsx("span",{className:"text-purple-400",children:u.key}),f.jsx("span",{className:"text-neutral-500 mx-1",children:u.operator}),u.values&&f.jsx("span",{className:"text-cyan-400",children:u.values.join(", ")})]},h))},l))})}}]:[],...n.mountOptions?.length?[{id:"mount-options",title:"Mount Options",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-1",children:n.mountOptions.map((a,l)=>f.jsx("span",{className:"text-xs bg-neutral-200 dark:bg-neutral-800 px-2 py-1 rounded text-neutral-800 dark:text-neutral-300",children:a},l))})}}]:[]]}}};function KJ(t){switch(t){case"Bound":return"success";case"Available":return"success";case"Released":return"warning";case"Failed":return"error";default:return"neutral"}}function WJ(t){if(!t)return[];const e=[];return t.hostPath?(e.push({label:"Type",value:"HostPath"}),e.push({label:"Path",value:t.hostPath.path,color:"text-cyan-400"})):t.nfs?(e.push({label:"Type",value:"NFS"}),e.push({label:"Server",value:t.nfs.server,color:"text-cyan-400"}),e.push({label:"Path",value:t.nfs.path,color:"text-cyan-400"})):t.csi?(e.push({label:"Type",value:"CSI"}),e.push({label:"Driver",value:t.csi.driver,color:"text-purple-400"}),t.csi.volumeHandle&&e.push({label:"Handle",value:t.csi.volumeHandle,color:"text-cyan-400"})):t.local?(e.push({label:"Type",value:"Local"}),e.push({label:"Path",value:t.local.path,color:"text-cyan-400"})):t.awsElasticBlockStore?(e.push({label:"Type",value:"AWS EBS"}),e.push({label:"Volume ID",value:t.awsElasticBlockStore.volumeID,color:"text-cyan-400"})):t.gcePersistentDisk?(e.push({label:"Type",value:"GCE PD"}),e.push({label:"PD Name",value:t.gcePersistentDisk.pdName,color:"text-cyan-400"})):t.azureDisk?(e.push({label:"Type",value:"Azure Disk"}),e.push({label:"Disk Name",value:t.azureDisk.diskName,color:"text-cyan-400"})):e.push({label:"Type",value:"Unknown"}),e}const GJ={kinds:["PersistentVolumeClaim","PersistentVolumeClaims"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=s?.phase??"Unknown",i=n.volumeName,a=n.resources?.requests?.storage,l=s?.capacity?.storage,u=[{id:"status",data:{type:"status-cards",items:[{label:"Phase",value:r,status:YJ(r)},{label:"Requested",value:a??"Not specified",icon:f.jsx(Ws,{size:14,className:"text-purple-400"})},...l?[{label:"Actual Capacity",value:l,status:"success"}]:[],{label:"Volume Mode",value:n.volumeMode??"Filesystem"}]}}];return n.accessModes?.length&&u.push({id:"access-modes",title:"Access Modes",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.accessModes.map((h,m)=>f.jsx("span",{className:`text-xs px-2 py-1 rounded ${ID(h)}`,children:DD(h)},m))})}}),n.storageClassName&&u.push({id:"storage-class",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Storage Class"}),f.jsxs("div",{className:"text-sm text-purple-600 dark:text-purple-400 flex items-center gap-2",children:[f.jsx(Ih,{size:14}),n.storageClassName]})]})}}),i?u.push({id:"bound-volume",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(pl,{size:10})," Bound To"]}),f.jsxs("div",{className:"text-sm",children:[f.jsx("span",{className:"text-neutral-700 dark:text-neutral-400",children:"platform/"}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:i})]})]})}}):u.push({id:"no-volume",data:{type:"custom",render:()=>f.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3",children:f.jsxs("div",{className:"text-yellow-400 text-sm flex items-center gap-2",children:[f.jsx(tN,{size:14}),"Not bound to any volume"]})})}}),n.selector?.matchLabels&&Object.keys(n.selector.matchLabels).length>0&&u.push({id:"selector",title:"Volume Selector",data:{type:"labels",labels:n.selector.matchLabels}}),{sections:u}}};function YJ(t){switch(t){case"Bound":return"success";case"Pending":return"warning";case"Lost":return"error";default:return"neutral"}}const ZJ="/apis/argoproj.io/v1alpha1";async function BD(t,e,n,s){const r=`/contexts/${t}${ZJ}/namespaces/${n}/applications/${e}`,i=await fetch(r,{method:"PATCH",headers:{"Content-Type":"application/merge-patch+json"},body:JSON.stringify(s)});if(!i.ok){const a=await i.text();throw new Error(`Failed to patch application: ${i.status} ${i.statusText} - ${a}`)}return i}async function MT(t,e,n="argocd",s={}){const i={operation:{sync:{syncStrategy:s.strategy==="apply"?{apply:{}}:{hook:{}},...s.revision&&{revision:s.revision},...s.prune!==void 0&&{prune:s.prune},...s.dryRun!==void 0&&{dryRun:s.dryRun}}}};await BD(t,e,n,i)}async function IT(t,e,n="argocd",s=!1){await BD(t,e,n,{metadata:{annotations:{"argocd.argoproj.io/refresh":s?"hard":"normal"}}})}function JJ(t){switch(t){case"Synced":return"success";case"OutOfSync":return"warning";default:return"neutral"}}function XJ(t){switch(t){case"Healthy":return"success";case"Progressing":return"warning";case"Degraded":case"Missing":return"error";case"Suspended":return"warning";default:return"neutral"}}function QJ(t){switch(t){case"Synced":return f.jsx(Oi,{size:14,className:"text-emerald-400"});case"OutOfSync":return f.jsx(Cn,{size:14,className:"text-amber-400"});default:return f.jsx(Mh,{size:14,className:"text-gray-400"})}}function eX(t){switch(t){case"Healthy":return f.jsx(Oi,{size:14,className:"text-emerald-400"});case"Progressing":return f.jsx(Cn,{size:14,className:"text-blue-400 animate-spin"});case"Degraded":return f.jsx(to,{size:14,className:"text-red-400"});case"Missing":return f.jsx(Mh,{size:14,className:"text-red-400"});case"Suspended":return f.jsx(jp,{size:14,className:"text-amber-400"});default:return f.jsx(rm,{size:14,className:"text-gray-400"})}}function tX(t,e=12){switch(t){case"Healthy":return f.jsx(Oi,{size:e,className:"text-emerald-400 shrink-0"});case"Progressing":return f.jsx(Cn,{size:e,className:"text-blue-400 animate-spin shrink-0"});case"Degraded":return f.jsx(to,{size:e,className:"text-red-400 shrink-0"});case"Missing":return f.jsx(Mh,{size:e,className:"text-red-400 shrink-0"});case"Suspended":return f.jsx(jp,{size:e,className:"text-amber-400 shrink-0"});default:return f.jsx(rm,{size:e,className:"text-gray-400 shrink-0"})}}function nX(t){const e={Synced:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",OutOfSync:"bg-amber-500/20 text-amber-400 border-amber-500/30",Unknown:"bg-gray-500/20 text-gray-400 border-gray-500/30"},n=e[t]||e.Unknown;return f.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${n}`,children:t||"Unknown"})}function rw(t){if(!t)return"Unknown";const e=new Date(t),s=Math.floor((new Date().getTime()-e.getTime())/1e3);return s<60?`${s}s ago`:s<3600?`${Math.floor(s/60)}m ago`:s<86400?`${Math.floor(s/3600)}h ago`:`${Math.floor(s/86400)}d ago`}function sX(t){if(!t)return"Unknown";const e=t.match(/[:/]([^/:]+\/[^/:]+?)(?:\.git)?$/);return e?e[1]:t}const rX={kinds:["Application","Applications"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=n.source||n.sources?.[0],i=s?.sync?.status||"Unknown",a=s?.health?.status||"Unknown",l=s?.operationState?.phase,u={healthy:0,progressing:0,degraded:0,missing:0,suspended:0,unknown:0};s?.resources?.forEach(m=>{const p=m.health?.status;let g;p?g=p.toLowerCase():g=m.status==="Synced"?"healthy":"unknown",g in u&&u[g]++});const h=s?.resources?.length||0;return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Sync Status",value:i,status:JJ(i),icon:QJ(i)},{label:"Health",value:a,status:XJ(a),icon:eX(a)},...l?[{label:"Operation",value:l,status:l==="Succeeded"?"success":l==="Failed"?"error":"warning",icon:l==="Running"?f.jsx(Cn,{size:14,className:"animate-spin"}):void 0}]:[]]}},...h>0?[{id:"resource-health",title:"Resource Health",data:{type:"gauges",items:[{label:"Healthy",current:u.healthy,total:h,color:"emerald"},{label:"Progressing",current:u.progressing,total:h,color:"blue"},{label:"Degraded",current:u.degraded+u.missing,total:h,color:"amber"}]}}]:[],...s?.resources?.length?[{id:"resources",title:"Managed Resources",data:{type:"custom",render:()=>{const m=new Map;s.resources.forEach(g=>{const y=g.kind||"Unknown";m.has(y)||m.set(y,[]),m.get(y).push(g)});const p=Array.from(m.keys()).sort((g,y)=>{const b=m.get(g),_=m.get(y),w=b.some(C=>C.health?.status!=="Healthy"),k=_.some(C=>C.health?.status!=="Healthy");return w&&!k?-1:!w&&k?1:g.localeCompare(y)});return f.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:p.map(g=>{const y=m.get(g),b=[...y].sort((_,w)=>{const k=_.health?.status==="Healthy",C=w.health?.status==="Healthy";return!k&&C?-1:k&&!C?1:(_.name||"").localeCompare(w.name||"")});return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-2",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[f.jsx(_D,{size:12,className:"text-neutral-500"}),f.jsx("span",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-400",children:g}),f.jsxs("span",{className:"text-[10px] text-neutral-500 dark:text-neutral-600",children:["(",y.length,")"]})]}),f.jsx("div",{className:"space-y-1",children:b.map((_,w)=>f.jsxs("div",{className:"flex items-center gap-2 text-xs pl-4",children:[tX(_.health?.status),f.jsx("span",{className:"text-neutral-700 dark:text-neutral-300 truncate flex-1",title:_.name,children:_.name}),_.namespace&&f.jsx("span",{className:"text-neutral-500 dark:text-neutral-600 text-[10px]",children:_.namespace}),nX(_.status),_.requiresPruning&&f.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded border bg-red-500/20 text-red-400 border-red-500/30",children:"Prune"})]},`${_.namespace}-${_.name}-${w}`))})]},g)})})}}}]:[],{id:"source",title:"Source",data:{type:"info-grid",items:[{label:"Repository",value:sX(r?.repoURL),color:"text-cyan-400"},{label:"Path",value:r?.path||r?.chart||"/",color:"text-purple-400"},{label:"Target Revision",value:r?.targetRevision||"HEAD",color:"text-blue-400"},...s?.sync?.revision?[{label:"Current Revision",value:s.sync.revision.substring(0,7),color:"text-emerald-400"}]:[]],columns:2}},{id:"destination",title:"Destination",data:{type:"info-grid",items:[{label:"Server",value:n.destination?.name||n.destination?.server||"Unknown"},{label:"Namespace",value:n.destination?.namespace||"default",color:"text-cyan-400"},{label:"Project",value:n.project||"default",color:"text-purple-400"}],columns:2}},...n.syncPolicy?[{id:"sync-policy",title:"Sync Policy",data:{type:"info-grid",items:[...n.syncPolicy.automated?[{label:"Auto Sync",value:"Enabled",color:"text-emerald-400"},{label:"Prune",value:n.syncPolicy.automated.prune?"Yes":"No",color:n.syncPolicy.automated.prune?"text-amber-400":void 0},{label:"Self Heal",value:n.syncPolicy.automated.selfHeal?"Yes":"No",color:n.syncPolicy.automated.selfHeal?"text-emerald-400":void 0}]:[{label:"Auto Sync",value:"Disabled",color:"text-gray-400"}],...n.syncPolicy.retry?.limit?[{label:"Retry Limit",value:n.syncPolicy.retry.limit}]:[]],columns:2}}]:[],...n.syncPolicy?.syncOptions?.length?[{id:"sync-options",data:{type:"labels",labels:Object.fromEntries(n.syncPolicy.syncOptions.map(m=>{const[p,g]=m.split("=");return[p,g||"true"]})),title:"Sync Options"}}]:[],...s?.reconciledAt||s?.operationState?.finishedAt?[{id:"timing",data:{type:"info-grid",items:[...s?.reconciledAt?[{label:"Last Reconciled",value:rw(s.reconciledAt)}]:[],...s?.operationState?.startedAt?[{label:"Operation Started",value:rw(s.operationState.startedAt)}]:[],...s?.operationState?.finishedAt?[{label:"Operation Finished",value:rw(s.operationState.finishedAt)}]:[]],columns:2}}]:[],...s?.health?.message?[{id:"health-message",title:"Health Message",data:{type:"info-grid",items:[{label:"Message",value:s.health.message}],columns:1}}]:[],...s?.operationState?.message?[{id:"operation-message",title:"Operation Message",data:{type:"info-grid",items:[{label:"Message",value:s.operationState.message}],columns:1}}]:[],...s?.summary?.images?.length?[{id:"images",title:"Images",data:{type:"container-images",containers:s.summary.images.map((m,p)=>({name:`image-${p+1}`,image:m}))}}]:[]]}},actions:[{id:"sync",label:"Sync",icon:f.jsx(th,{size:14}),variant:"primary",confirm:{title:"Sync Application",message:"This will sync the application to match the desired state in Git. Continue?",confirmLabel:"Sync"},execute:async(t,e)=>{const n=e.metadata?.name,s=e.metadata?.namespace||"argocd";if(!n)throw new Error("Application name is required");await MT(t,n,s)},isDisabled:t=>t.status?.operationState?.phase==="Running"?"Sync already in progress":!1},{id:"sync-prune",label:"Sync (Prune)",icon:f.jsx(kY,{size:14}),variant:"warning",confirm:{title:"Sync with Prune",message:"This will sync the application and DELETE resources that are no longer in Git. This action cannot be undone. Continue?",confirmLabel:"Sync & Prune"},execute:async(t,e)=>{const n=e.metadata?.name,s=e.metadata?.namespace||"argocd";if(!n)throw new Error("Application name is required");await MT(t,n,s,{prune:!0})},isDisabled:t=>t.status?.operationState?.phase==="Running"?"Sync already in progress":!1},{id:"refresh",label:"Refresh",icon:f.jsx(Cn,{size:14}),variant:"secondary",execute:async(t,e)=>{const n=e.metadata?.name,s=e.metadata?.namespace||"argocd";if(!n)throw new Error("Application name is required");await IT(t,n,s)}},{id:"hard-refresh",label:"Hard Refresh",icon:f.jsx(VY,{size:14}),variant:"secondary",execute:async(t,e)=>{const n=e.metadata?.name,s=e.metadata?.namespace||"argocd";if(!n)throw new Error("Application name is required");await IT(t,n,s,!0)}}]};function iX(t){return!t||t.length===0?{status:"Unknown",level:"neutral"}:t.find(r=>r.type==="ErrorOccurred"&&r.status==="True")?{status:"Error",level:"error"}:t.find(r=>r.type==="ResourcesUpToDate")?.status==="True"?{status:"Healthy",level:"success"}:t.find(r=>r.type==="ParametersGenerated")?.status==="True"?{status:"Progressing",level:"warning"}:{status:"Unknown",level:"neutral"}}function aX(t){switch(t){case"success":return f.jsx(Oi,{size:14,className:"text-emerald-400"});case"warning":return f.jsx(Cn,{size:14,className:"text-amber-400"});case"error":return f.jsx(to,{size:14,className:"text-red-400"});default:return f.jsx(rm,{size:14,className:"text-gray-400"})}}function oX(t){if(t.list){const e=t.list.elements?.length||0;return{name:"List",icon:f.jsx(sZ,{size:12,className:"text-blue-400"}),details:`${e} element${e!==1?"s":""}`}}if(t.clusters)return{name:"Clusters",icon:f.jsx(ra,{size:12,className:"text-purple-400"}),details:t.clusters.selector?.matchLabels?Object.entries(t.clusters.selector.matchLabels).map(([e,n])=>`${e}=${n}`).join(", "):"All clusters"};if(t.git){const e=t.git.directories&&t.git.directories.length>0,n=t.git.files&&t.git.files.length>0;return{name:n?"Git Files":"Git Directories",icon:f.jsx(Dy,{size:12,className:"text-cyan-400"}),details:e?t.git.directories?.map(s=>s.path).join(", "):n?t.git.files?.map(s=>s.path).join(", "):t.git.revision||"HEAD"}}if(t.matrix){const e=t.matrix.generators?.length||0;return{name:"Matrix",icon:f.jsx(Ga,{size:12,className:"text-amber-400"}),details:`${e} generator${e!==1?"s":""}`}}if(t.merge){const e=t.merge.generators?.length||0;return{name:"Merge",icon:f.jsx(Ga,{size:12,className:"text-orange-400"}),details:`${e} generator${e!==1?"s":""}`}}return t.scmProvider?{name:`SCM Provider (${t.scmProvider.github?"GitHub":t.scmProvider.gitlab?"GitLab":t.scmProvider.bitbucket?"Bitbucket":t.scmProvider.bitbucketServer?"Bitbucket Server":t.scmProvider.gitea?"Gitea":t.scmProvider.azureDevOps?"Azure DevOps":"Unknown"})`,icon:f.jsx(gY,{size:12,className:"text-green-400"}),details:t.scmProvider.github?.organization||t.scmProvider.gitlab?.group||t.scmProvider.bitbucket?.owner||t.scmProvider.azureDevOps?.organization}:t.pullRequest?{name:`Pull Request (${t.pullRequest.github?"GitHub":t.pullRequest.gitlab?"GitLab":t.pullRequest.bitbucketServer?"Bitbucket Server":"Unknown"})`,icon:f.jsx(Dy,{size:12,className:"text-pink-400"}),details:t.pullRequest.github?.repo||t.pullRequest.gitlab?.project||t.pullRequest.bitbucketServer?.repo}:t.clusterDecisionResource?{name:"Cluster Decision Resource",icon:f.jsx(BY,{size:12,className:"text-indigo-400"}),details:t.clusterDecisionResource.configMapRef}:{name:"Unknown",icon:f.jsx(rm,{size:12,className:"text-gray-400"})}}function lX(t){if(!t)return"Unknown";const e=t.match(/[:/]([^/:]+\/[^/:]+?)(?:\.git)?$/);return e?e[1]:t}function cX(t){if(!t)return"Unknown";const e=new Date(t),s=Math.floor((new Date().getTime()-e.getTime())/1e3);return s<60?`${s}s ago`:s<3600?`${Math.floor(s/60)}m ago`:s<86400?`${Math.floor(s/3600)}h ago`:`${Math.floor(s/86400)}d ago`}const uX={kinds:["ApplicationSet","ApplicationSets"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata;if(!n)return{sections:[]};const i=n.template,a=i?.spec?.source||i?.spec?.sources?.[0],l=iX(s?.conditions),u=s?.applicationStatus?.length||0;return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Status",value:l.status,status:l.level,icon:aX(l.level)},{label:"Applications",value:u,status:u>0?"success":"neutral",icon:f.jsx(_D,{size:14,className:u>0?"text-emerald-400":"text-gray-400"})},{label:"Generators",value:n.generators?.length||0,status:"neutral",icon:f.jsx(Ga,{size:14,className:"text-blue-400"})}]}},...n.generators?.length?[{id:"generators",title:"Generators",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.generators.map((h,m)=>{const p=oX(h);return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-2.5 flex items-center gap-3",children:[f.jsx("div",{className:"p-1.5 bg-neutral-200 dark:bg-neutral-700/50 rounded",children:p.icon}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"text-xs font-medium text-neutral-900 dark:text-neutral-200",children:p.name}),p.details&&f.jsx("div",{className:"text-[10px] text-neutral-500 truncate",title:p.details,children:p.details})]})]},m)})})}}]:[],...s?.applicationStatus?.length?[{id:"applications",title:"Generated Applications",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-1 max-h-60 overflow-y-auto",children:s.applicationStatus.map((h,m)=>{const p=h.status==="Successful"||h.status==="Healthy"?"success":h.status==="Waiting"||h.status==="Progressing"?"warning":h.status==="Error"||h.status==="Failed"?"error":"neutral";return f.jsxs("div",{className:"flex items-center gap-2 text-xs bg-neutral-100 dark:bg-neutral-800/30 rounded px-2 py-1.5",children:[p==="success"&&f.jsx(Oi,{size:12,className:"text-emerald-400 shrink-0"}),p==="warning"&&f.jsx(Cn,{size:12,className:"text-amber-400 shrink-0"}),p==="error"&&f.jsx(to,{size:12,className:"text-red-400 shrink-0"}),p==="neutral"&&f.jsx(rm,{size:12,className:"text-gray-400 shrink-0"}),f.jsx("span",{className:"text-neutral-700 dark:text-neutral-300 truncate flex-1",title:h.application,children:h.application||"Unknown"}),h.status&&f.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${p==="success"?"bg-emerald-500/20 text-emerald-400 border-emerald-500/30":p==="warning"?"bg-amber-500/20 text-amber-400 border-amber-500/30":p==="error"?"bg-red-500/20 text-red-400 border-red-500/30":"bg-gray-500/20 text-gray-400 border-gray-500/30"}`,children:h.status})]},h.application||m)})})}}]:[],...a?[{id:"template-source",title:"Template Source",data:{type:"info-grid",items:[{label:"Repository",value:lX(a.repoURL),color:"text-cyan-400"},{label:"Path",value:a.path||a.chart||"/",color:"text-purple-400"},{label:"Revision",value:a.targetRevision||"HEAD",color:"text-blue-400"}],columns:2}}]:[],...i?.spec?.destination?[{id:"template-destination",title:"Template Destination",data:{type:"info-grid",items:[{label:"Server",value:i.spec.destination.name||i.spec.destination.server||"{{server}}"},{label:"Namespace",value:i.spec.destination.namespace||"{{namespace}}",color:"text-cyan-400"},{label:"Project",value:i.spec.project||"default",color:"text-purple-400"}],columns:2}}]:[],...n.syncPolicy?[{id:"sync-policy",title:"Sync Policy",data:{type:"info-grid",items:[{label:"Preserve Resources on Deletion",value:n.syncPolicy.preserveResourcesOnDeletion?"Yes":"No",color:n.syncPolicy.preserveResourcesOnDeletion?"text-amber-400":void 0},...n.syncPolicy.applicationsSync?[{label:"Applications Sync",value:n.syncPolicy.applicationsSync,color:"text-blue-400"}]:[]],columns:2}}]:[],...n.strategy?[{id:"strategy",title:"Rollout Strategy",data:{type:"info-grid",items:[{label:"Type",value:n.strategy.type||"AllAtOnce",color:n.strategy.type==="RollingSync"?"text-cyan-400":void 0},...n.strategy.rollingSync?.steps?.length?[{label:"Steps",value:n.strategy.rollingSync.steps.length}]:[]],columns:2}}]:[],...n.goTemplate!==void 0?[{id:"template-options",title:"Template Options",data:{type:"info-grid",items:[{label:"Go Template",value:n.goTemplate?"Enabled":"Disabled",color:n.goTemplate?"text-emerald-400":"text-gray-400"},...n.goTemplateOptions?.length?[{label:"Options",value:n.goTemplateOptions.join(", ")}]:[]],columns:2}}]:[],...r?.creationTimestamp?[{id:"timing",data:{type:"info-grid",items:[{label:"Created",value:cX(r.creationTimestamp)}],columns:1}}]:[]]}}};function hX(t){const e=t?.find(n=>n.type==="Ready");return e?{ready:e.status==="True",reason:e.reason,message:e.message}:{ready:!1}}function dX(t,e){return t?"success":e==="Issuing"||e==="Pending"?"warning":"error"}function fX(t,e){return t?f.jsx(Oi,{size:14,className:"text-emerald-400"}):e==="Issuing"||e==="Pending"?f.jsx(Cn,{size:14,className:"text-amber-400 animate-spin"}):f.jsx(to,{size:14,className:"text-red-400"})}function pX(t){if(!t)return"Default (90d)";const e=t.match(/^(\d+)h$/);if(e){const n=parseInt(e[1],10);return n>=8760?`${Math.round(n/8760)}y`:n>=720?`${Math.round(n/720)}mo`:n>=24?`${Math.round(n/24)}d`:`${n}h`}return t}function u0(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function mX(t){if(!t)return{text:"Unknown",status:"neutral"};const e=new Date,s=new Date(t).getTime()-e.getTime(),r=Math.floor(s/(1e3*60*60*24));return s<0?{text:"Expired",status:"error"}:r<7?{text:`${r}d remaining`,status:"error"}:r<30?{text:`${r}d remaining`,status:"warning"}:r>365?{text:`${Math.floor(r/365)}y remaining`,status:"success"}:r>30?{text:`${Math.floor(r/30)}mo remaining`,status:"success"}:{text:`${r}d remaining`,status:"success"}}function gX(t){if(!t)return"RSA 2048";const e=t.algorithm??"RSA",n=t.size??(e==="ECDSA"?256:2048);return`${e} ${n}`}const yX={kinds:["Certificate","Certificates"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata?.namespace;if(!n)return{sections:[]};const{ready:i,reason:a}=hX(s?.conditions),l=mX(s?.notAfter),u=[{id:"status",data:{type:"status-cards",items:[{label:"Status",value:i?"Ready":a??"Not Ready",status:dX(i,a),icon:fX(i,a)},{label:"Expires",value:l.text,status:l.status,icon:f.jsx(fl,{size:14,className:l.status==="error"?"text-red-400":l.status==="warning"?"text-amber-400":"text-emerald-400"})},{label:"Type",value:n.isCA?"CA Certificate":"TLS Certificate",status:"neutral",icon:f.jsx(Dh,{size:14,className:n.isCA?"text-purple-400":"text-blue-400"})},{label:"Revision",value:s?.revision??1,status:"neutral"}]}}];u.push({id:"details",title:"Certificate Details",data:{type:"info-grid",columns:2,items:[{label:"Secret Name",value:n.secretName},...n.commonName?[{label:"Common Name",value:n.commonName}]:[],{label:"Duration",value:pX(n.duration)},{label:"Algorithm",value:gX(n.privateKey)},...s?.notBefore?[{label:"Valid From",value:u0(s.notBefore)}]:[],...s?.notAfter?[{label:"Valid Until",value:u0(s.notAfter)}]:[],...s?.renewalTime?[{label:"Renewal Time",value:u0(s.renewalTime)}]:[]]}});const h=n.issuerRef.kind??"Issuer",m=h==="ClusterIssuer",p=m?"clusterissuers.cert-manager.io":"issuers.cert-manager.io";if(u.push({id:"issuer",title:"Issuer",data:{type:"custom",render:()=>{const g=f.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-lg p-3 hover:bg-purple-500/15 transition-colors cursor-pointer",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(am,{size:14,className:"text-purple-400"}),f.jsx("span",{className:"text-sm font-medium text-purple-300",children:h}),f.jsx(pl,{size:12,className:"text-purple-400/60 ml-auto"})]}),f.jsx("div",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:n.issuerRef.name}),n.issuerRef.group&&f.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:n.issuerRef.group})]}),y=m?b=>b:b=>({...b,namespace:r});return f.jsx(ji,{to:"/cluster/$context/$resourceType/$name",params:{context:t,resourceType:p,name:n.issuerRef.name},search:y,children:g})}}}),n.dnsNames?.length&&u.push({id:"dns-names",title:"DNS Names",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.dnsNames.map((g,y)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-blue-500/20 text-blue-300 border border-blue-500/30",children:g},y))})}}),n.ipAddresses?.length&&u.push({id:"ip-addresses",title:"IP Addresses",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.ipAddresses.map((g,y)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-cyan-500/20 text-cyan-300 border border-cyan-500/30",children:g},y))})}}),n.uris?.length&&u.push({id:"uris",title:"URIs",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-1",children:n.uris.map((g,y)=>f.jsx("div",{className:"text-xs text-neutral-700 dark:text-neutral-300 font-mono",children:g},y))})}}),n.emailAddresses?.length&&u.push({id:"email-addresses",title:"Email Addresses",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.emailAddresses.map((g,y)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-amber-500/20 text-amber-300 border border-amber-500/30",children:g},y))})}}),n.usages?.length&&u.push({id:"usages",title:"Key Usages",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.usages.map((g,y)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-neutral-200 dark:bg-neutral-700 text-neutral-700 dark:text-neutral-300",children:g},y))})}}),n.privateKey&&u.push({id:"private-key",title:"Private Key",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(om,{size:14,className:"text-neutral-400"}),f.jsx("span",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Configuration"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-500",children:"Algorithm:"}),f.jsx("span",{className:"ml-1 text-neutral-700 dark:text-neutral-300",children:n.privateKey.algorithm??"RSA"})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-500",children:"Size:"}),f.jsx("span",{className:"ml-1 text-neutral-700 dark:text-neutral-300",children:n.privateKey.size??2048})]}),n.privateKey.encoding&&f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-500",children:"Encoding:"}),f.jsx("span",{className:"ml-1 text-neutral-700 dark:text-neutral-300",children:n.privateKey.encoding})]}),n.privateKey.rotationPolicy&&f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-500",children:"Rotation:"}),f.jsx("span",{className:"ml-1 text-neutral-700 dark:text-neutral-300",children:n.privateKey.rotationPolicy})]})]})]})}}),n.subject&&Object.keys(n.subject).some(g=>{const y=n.subject[g];return Array.isArray(y)?y.length>0:!!y})){const g=[];n.subject.organizations?.length&&g.push(`O=${n.subject.organizations.join(", ")}`),n.subject.organizationalUnits?.length&&g.push(`OU=${n.subject.organizationalUnits.join(", ")}`),n.subject.countries?.length&&g.push(`C=${n.subject.countries.join(", ")}`),n.subject.localities?.length&&g.push(`L=${n.subject.localities.join(", ")}`),n.subject.provinces?.length&&g.push(`ST=${n.subject.provinces.join(", ")}`),u.push({id:"subject",title:"Subject",data:{type:"custom",render:()=>f.jsx("div",{className:"text-xs text-neutral-700 dark:text-neutral-300 font-mono bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:g.join(", ")})}})}if(n.keystores){const g=[];n.keystores.jks?.create&&g.push("JKS"),n.keystores.pkcs12?.create&&g.push("PKCS#12"),g.length>0&&u.push({id:"keystores",title:"Keystores",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:g.map((y,b)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-green-500/20 text-green-300 border border-green-500/30",children:y},b))})}})}return s?.failedIssuanceAttempts&&s.failedIssuanceAttempts>0&&u.push({id:"failed-issuance",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 text-red-400",children:[f.jsx(Mh,{size:14}),f.jsxs("span",{className:"text-sm font-medium",children:["Failed Issuance Attempts: ",s.failedIssuanceAttempts]})]}),s.lastFailureTime&&f.jsxs("div",{className:"text-xs text-neutral-500 mt-1",children:["Last failure: ",u0(s.lastFailureTime)]})]})}}),{sections:u}}};var DT={};var LT;function vX(){if(LT)return DT;LT=1;var t;return(function(e){(function(n){var s=typeof globalThis=="object"?globalThis:typeof m3=="object"?m3:typeof self=="object"?self:typeof this=="object"?this:u(),r=i(e);typeof s.Reflect<"u"&&(r=i(s.Reflect,r)),n(r,s),typeof s.Reflect>"u"&&(s.Reflect=e);function i(h,m){return function(p,g){Object.defineProperty(h,p,{configurable:!0,writable:!0,value:g}),m&&m(p,g)}}function a(){try{return Function("return this;")()}catch{}}function l(){try{return(0,eval)("(function() { return this; })()")}catch{}}function u(){return a()||l()}})(function(n,s){var r=Object.prototype.hasOwnProperty,i=typeof Symbol=="function",a=i&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",l=i&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",u=typeof Object.create=="function",h={__proto__:[]}instanceof Array,m=!u&&!h,p={create:u?function(){return xn(Object.create(null))}:h?function(){return xn({__proto__:null})}:function(){return xn({})},has:m?function(re,le){return r.call(re,le)}:function(re,le){return le in re},get:m?function(re,le){return r.call(re,le)?re[le]:void 0}:function(re,le){return re[le]}},g=Object.getPrototypeOf(Function),y=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Ye(),b=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:ft(),_=typeof WeakMap=="function"?WeakMap:Rt(),w=i?Symbol.for("@reflect-metadata:registry"):void 0,k=Je(),C=Ee(k);function E(re,le,fe,ke){if(T(fe)){if(!st(re))throw new TypeError;if(!Ge(le))throw new TypeError;return U(re,le)}else{if(!st(re))throw new TypeError;if(!X(le))throw new TypeError;if(!X(ke)&&!T(ke)&&!Q(ke))throw new TypeError;return Q(ke)&&(ke=void 0),fe=Ke(fe),Z(re,le,fe,ke)}}n("decorate",E);function A(re,le){function fe(ke,je){if(!X(ke))throw new TypeError;if(!T(je)&&!ct(je))throw new TypeError;z(re,le,ke,je)}return fe}n("metadata",A);function R(re,le,fe,ke){if(!X(fe))throw new TypeError;return T(ke)||(ke=Ke(ke)),z(re,le,fe,ke)}n("defineMetadata",R);function N(re,le,fe){if(!X(le))throw new TypeError;return T(fe)||(fe=Ke(fe)),K(re,le,fe)}n("hasMetadata",N);function M(re,le,fe){if(!X(le))throw new TypeError;return T(fe)||(fe=Ke(fe)),B(re,le,fe)}n("hasOwnMetadata",M);function I(re,le,fe){if(!X(le))throw new TypeError;return T(fe)||(fe=Ke(fe)),J(re,le,fe)}n("getMetadata",I);function W(re,le,fe){if(!X(le))throw new TypeError;return T(fe)||(fe=Ke(fe)),Y(re,le,fe)}n("getOwnMetadata",W);function P(re,le){if(!X(re))throw new TypeError;return T(le)||(le=Ke(le)),O(re,le)}n("getMetadataKeys",P);function G(re,le){if(!X(re))throw new TypeError;return T(le)||(le=Ke(le)),L(re,le)}n("getOwnMetadataKeys",G);function $(re,le,fe){if(!X(le))throw new TypeError;if(T(fe)||(fe=Ke(fe)),!X(le))throw new TypeError;T(fe)||(fe=Ke(fe));var ke=be(le,fe,!1);return T(ke)?!1:ke.OrdinaryDeleteMetadata(re,le,fe)}n("deleteMetadata",$);function U(re,le){for(var fe=re.length-1;fe>=0;--fe){var ke=re[fe],je=ke(le);if(!T(je)&&!Q(je)){if(!Ge(je))throw new TypeError;le=je}}return le}function Z(re,le,fe,ke){for(var je=re.length-1;je>=0;--je){var Pt=re[je],Dt=Pt(le,fe,ke);if(!T(Dt)&&!Q(Dt)){if(!X(Dt))throw new TypeError;ke=Dt}}return ke}function K(re,le,fe){var ke=B(re,le,fe);if(ke)return!0;var je=ze(le);return Q(je)?!1:K(re,je,fe)}function B(re,le,fe){var ke=be(le,fe,!1);return T(ke)?!1:Se(ke.OrdinaryHasOwnMetadata(re,le,fe))}function J(re,le,fe){var ke=B(re,le,fe);if(ke)return Y(re,le,fe);var je=ze(le);if(!Q(je))return J(re,je,fe)}function Y(re,le,fe){var ke=be(le,fe,!1);if(!T(ke))return ke.OrdinaryGetOwnMetadata(re,le,fe)}function z(re,le,fe,ke){var je=be(fe,ke,!0);je.OrdinaryDefineOwnMetadata(re,le,fe,ke)}function O(re,le){var fe=L(re,le),ke=ze(re);if(ke===null)return fe;var je=O(ke,le);if(je.length<=0)return fe;if(fe.length<=0)return je;for(var Pt=new b,Dt=[],_t=0,Ie=fe;_t<Ie.length;_t++){var $e=Ie[_t],Fe=Pt.has($e);Fe||(Pt.add($e),Dt.push($e))}for(var Ue=0,wt=je;Ue<wt.length;Ue++){var $e=wt[Ue],Fe=Pt.has($e);Fe||(Pt.add($e),Dt.push($e))}return Dt}function L(re,le){var fe=be(re,le,!1);return fe?fe.OrdinaryOwnMetadataKeys(re,le):[]}function V(re){if(re===null)return 1;switch(typeof re){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return re===null?1:6;default:return 6}}function T(re){return re===void 0}function Q(re){return re===null}function te(re){return typeof re=="symbol"}function X(re){return typeof re=="object"?re!==null:typeof re=="function"}function oe(re,le){switch(V(re)){case 0:return re;case 1:return re;case 2:return re;case 3:return re;case 4:return re;case 5:return re}var fe="string",ke=Re(re,a);if(ke!==void 0){var je=ke.call(re,fe);if(X(je))throw new TypeError;return je}return xe(re)}function xe(re,le){var fe,ke,je;{var Pt=re.toString;if(Le(Pt)){var ke=Pt.call(re);if(!X(ke))return ke}var fe=re.valueOf;if(Le(fe)){var ke=fe.call(re);if(!X(ke))return ke}}throw new TypeError}function Se(re){return!!re}function Xe(re){return""+re}function Ke(re){var le=oe(re);return te(le)?le:Xe(le)}function st(re){return Array.isArray?Array.isArray(re):re instanceof Object?re instanceof Array:Object.prototype.toString.call(re)==="[object Array]"}function Le(re){return typeof re=="function"}function Ge(re){return typeof re=="function"}function ct(re){switch(V(re)){case 3:return!0;case 4:return!0;default:return!1}}function ut(re,le){return re===le||re!==re&&le!==le}function Re(re,le){var fe=re[le];if(fe!=null){if(!Le(fe))throw new TypeError;return fe}}function mt(re){var le=Re(re,l);if(!Le(le))throw new TypeError;var fe=le.call(re);if(!X(fe))throw new TypeError;return fe}function pt(re){return re.value}function At(re){var le=re.next();return le.done?!1:le}function Me(re){var le=re.return;le&&le.call(re)}function ze(re){var le=Object.getPrototypeOf(re);if(typeof re!="function"||re===g||le!==g)return le;var fe=re.prototype,ke=fe&&Object.getPrototypeOf(fe);if(ke==null||ke===Object.prototype)return le;var je=ke.constructor;return typeof je!="function"||je===re?le:je}function De(){var re;!T(w)&&typeof s.Reflect<"u"&&!(w in s.Reflect)&&typeof s.Reflect.defineMetadata=="function"&&(re=ae(s.Reflect));var le,fe,ke,je=new _,Pt={registerProvider:Dt,getProvider:Ie,setProvider:Fe};return Pt;function Dt(Ue){if(!Object.isExtensible(Pt))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case re===Ue:break;case T(le):le=Ue;break;case le===Ue:break;case T(fe):fe=Ue;break;case fe===Ue:break;default:ke===void 0&&(ke=new b),ke.add(Ue);break}}function _t(Ue,wt){if(!T(le)){if(le.isProviderFor(Ue,wt))return le;if(!T(fe)){if(fe.isProviderFor(Ue,wt))return le;if(!T(ke))for(var Lt=mt(ke);;){var Zt=At(Lt);if(!Zt)return;var On=pt(Zt);if(On.isProviderFor(Ue,wt))return Me(Lt),On}}}if(!T(re)&&re.isProviderFor(Ue,wt))return re}function Ie(Ue,wt){var Lt=je.get(Ue),Zt;return T(Lt)||(Zt=Lt.get(wt)),T(Zt)&&(Zt=_t(Ue,wt),T(Zt)||(T(Lt)&&(Lt=new y,je.set(Ue,Lt)),Lt.set(wt,Zt))),Zt}function $e(Ue){if(T(Ue))throw new TypeError;return le===Ue||fe===Ue||!T(ke)&&ke.has(Ue)}function Fe(Ue,wt,Lt){if(!$e(Lt))throw new Error("Metadata provider not registered.");var Zt=Ie(Ue,wt);if(Zt!==Lt){if(!T(Zt))return!1;var On=je.get(Ue);T(On)&&(On=new y,je.set(Ue,On)),On.set(wt,Lt)}return!0}}function Je(){var re;return!T(w)&&X(s.Reflect)&&Object.isExtensible(s.Reflect)&&(re=s.Reflect[w]),T(re)&&(re=De()),!T(w)&&X(s.Reflect)&&Object.isExtensible(s.Reflect)&&Object.defineProperty(s.Reflect,w,{enumerable:!1,configurable:!1,writable:!1,value:re}),re}function Ee(re){var le=new _,fe={isProviderFor:function($e,Fe){var Ue=le.get($e);return T(Ue)?!1:Ue.has(Fe)},OrdinaryDefineOwnMetadata:Dt,OrdinaryHasOwnMetadata:je,OrdinaryGetOwnMetadata:Pt,OrdinaryOwnMetadataKeys:_t,OrdinaryDeleteMetadata:Ie};return k.registerProvider(fe),fe;function ke($e,Fe,Ue){var wt=le.get($e),Lt=!1;if(T(wt)){if(!Ue)return;wt=new y,le.set($e,wt),Lt=!0}var Zt=wt.get(Fe);if(T(Zt)){if(!Ue)return;if(Zt=new y,wt.set(Fe,Zt),!re.setProvider($e,Fe,fe))throw wt.delete(Fe),Lt&&le.delete($e),new Error("Wrong provider for target.")}return Zt}function je($e,Fe,Ue){var wt=ke(Fe,Ue,!1);return T(wt)?!1:Se(wt.has($e))}function Pt($e,Fe,Ue){var wt=ke(Fe,Ue,!1);if(!T(wt))return wt.get($e)}function Dt($e,Fe,Ue,wt){var Lt=ke(Ue,wt,!0);Lt.set($e,Fe)}function _t($e,Fe){var Ue=[],wt=ke($e,Fe,!1);if(T(wt))return Ue;for(var Lt=wt.keys(),Zt=mt(Lt),On=0;;){var gr=At(Zt);if(!gr)return Ue.length=On,Ue;var Hr=pt(gr);try{Ue[On]=Hr}catch(Ve){try{Me(Zt)}finally{throw Ve}}On++}}function Ie($e,Fe,Ue){var wt=ke(Fe,Ue,!1);if(T(wt)||!wt.delete($e))return!1;if(wt.size===0){var Lt=le.get(Fe);T(Lt)||(Lt.delete(Ue),Lt.size===0&&le.delete(Lt))}return!0}}function ae(re){var le=re.defineMetadata,fe=re.hasOwnMetadata,ke=re.getOwnMetadata,je=re.getOwnMetadataKeys,Pt=re.deleteMetadata,Dt=new _,_t={isProviderFor:function(Ie,$e){var Fe=Dt.get(Ie);return!T(Fe)&&Fe.has($e)?!0:je(Ie,$e).length?(T(Fe)&&(Fe=new b,Dt.set(Ie,Fe)),Fe.add($e),!0):!1},OrdinaryDefineOwnMetadata:le,OrdinaryHasOwnMetadata:fe,OrdinaryGetOwnMetadata:ke,OrdinaryOwnMetadataKeys:je,OrdinaryDeleteMetadata:Pt};return _t}function be(re,le,fe){var ke=k.getProvider(re,le);if(!T(ke))return ke;if(fe){if(k.setProvider(re,le,C))return C;throw new Error("Illegal state.")}}function Ye(){var re={},le=[],fe=(function(){function _t(Ie,$e,Fe){this._index=0,this._keys=Ie,this._values=$e,this._selector=Fe}return _t.prototype["@@iterator"]=function(){return this},_t.prototype[l]=function(){return this},_t.prototype.next=function(){var Ie=this._index;if(Ie>=0&&Ie<this._keys.length){var $e=this._selector(this._keys[Ie],this._values[Ie]);return Ie+1>=this._keys.length?(this._index=-1,this._keys=le,this._values=le):this._index++,{value:$e,done:!1}}return{value:void 0,done:!0}},_t.prototype.throw=function(Ie){throw this._index>=0&&(this._index=-1,this._keys=le,this._values=le),Ie},_t.prototype.return=function(Ie){return this._index>=0&&(this._index=-1,this._keys=le,this._values=le),{value:Ie,done:!0}},_t})(),ke=(function(){function _t(){this._keys=[],this._values=[],this._cacheKey=re,this._cacheIndex=-2}return Object.defineProperty(_t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),_t.prototype.has=function(Ie){return this._find(Ie,!1)>=0},_t.prototype.get=function(Ie){var $e=this._find(Ie,!1);return $e>=0?this._values[$e]:void 0},_t.prototype.set=function(Ie,$e){var Fe=this._find(Ie,!0);return this._values[Fe]=$e,this},_t.prototype.delete=function(Ie){var $e=this._find(Ie,!1);if($e>=0){for(var Fe=this._keys.length,Ue=$e+1;Ue<Fe;Ue++)this._keys[Ue-1]=this._keys[Ue],this._values[Ue-1]=this._values[Ue];return this._keys.length--,this._values.length--,ut(Ie,this._cacheKey)&&(this._cacheKey=re,this._cacheIndex=-2),!0}return!1},_t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=re,this._cacheIndex=-2},_t.prototype.keys=function(){return new fe(this._keys,this._values,je)},_t.prototype.values=function(){return new fe(this._keys,this._values,Pt)},_t.prototype.entries=function(){return new fe(this._keys,this._values,Dt)},_t.prototype["@@iterator"]=function(){return this.entries()},_t.prototype[l]=function(){return this.entries()},_t.prototype._find=function(Ie,$e){if(!ut(this._cacheKey,Ie)){this._cacheIndex=-1;for(var Fe=0;Fe<this._keys.length;Fe++)if(ut(this._keys[Fe],Ie)){this._cacheIndex=Fe;break}}return this._cacheIndex<0&&$e&&(this._cacheIndex=this._keys.length,this._keys.push(Ie),this._values.push(void 0)),this._cacheIndex},_t})();return ke;function je(_t,Ie){return _t}function Pt(_t,Ie){return Ie}function Dt(_t,Ie){return[_t,Ie]}}function ft(){var re=(function(){function le(){this._map=new y}return Object.defineProperty(le.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),le.prototype.has=function(fe){return this._map.has(fe)},le.prototype.add=function(fe){return this._map.set(fe,fe),this},le.prototype.delete=function(fe){return this._map.delete(fe)},le.prototype.clear=function(){this._map.clear()},le.prototype.keys=function(){return this._map.keys()},le.prototype.values=function(){return this._map.keys()},le.prototype.entries=function(){return this._map.entries()},le.prototype["@@iterator"]=function(){return this.keys()},le.prototype[l]=function(){return this.keys()},le})();return re}function Rt(){var re=16,le=p.create(),fe=ke();return(function(){function Ie(){this._key=ke()}return Ie.prototype.has=function($e){var Fe=je($e,!1);return Fe!==void 0?p.has(Fe,this._key):!1},Ie.prototype.get=function($e){var Fe=je($e,!1);return Fe!==void 0?p.get(Fe,this._key):void 0},Ie.prototype.set=function($e,Fe){var Ue=je($e,!0);return Ue[this._key]=Fe,this},Ie.prototype.delete=function($e){var Fe=je($e,!1);return Fe!==void 0?delete Fe[this._key]:!1},Ie.prototype.clear=function(){this._key=ke()},Ie})();function ke(){var Ie;do Ie="@@WeakMap@@"+_t();while(p.has(le,Ie));return le[Ie]=!0,Ie}function je(Ie,$e){if(!r.call(Ie,fe)){if(!$e)return;Object.defineProperty(Ie,fe,{value:p.create()})}return Ie[fe]}function Pt(Ie,$e){for(var Fe=0;Fe<$e;++Fe)Ie[Fe]=Math.random()*255|0;return Ie}function Dt(Ie){if(typeof Uint8Array=="function"){var $e=new Uint8Array(Ie);return typeof crypto<"u"?crypto.getRandomValues($e):typeof msCrypto<"u"?msCrypto.getRandomValues($e):Pt($e,Ie),$e}return Pt(new Array(Ie),Ie)}function _t(){var Ie=Dt(re);Ie[6]=Ie[6]&79|64,Ie[8]=Ie[8]&191|128;for(var $e="",Fe=0;Fe<re;++Fe){var Ue=Ie[Fe];(Fe===4||Fe===6||Fe===8)&&($e+="-"),Ue<16&&($e+="0"),$e+=Ue.toString(16).toLowerCase()}return $e}}function xn(re){return re.__=void 0,delete re.__,re}})})(t||(t={})),DT}vX();const bX="[object ArrayBuffer]";class Be{static isArrayBuffer(e){return Object.prototype.toString.call(e)===bX}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:e.byteLength===e.buffer.byteLength||e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,n){if(e.constructor===n)return e;if(this.isArrayBuffer(e))return new n(e);if(this.isArrayBufferView(e))return new n(e.buffer,e.byteOffset,e.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,n){const s=Be.toUint8Array(e),r=Be.toUint8Array(n);if(s.length!==r.byteLength)return!1;for(let i=0;i<s.length;i++)if(s[i]!==r[i])return!1;return!0}static concat(...e){let n;Array.isArray(e[0])&&!(e[1]instanceof Function)||Array.isArray(e[0])&&e[1]instanceof Function?n=e[0]:e[e.length-1]instanceof Function?n=e.slice(0,e.length-1):n=e;let s=0;for(const a of n)s+=a.byteLength;const r=new Uint8Array(s);let i=0;for(const a of n){const l=this.toUint8Array(a);r.set(l,i),i+=l.length}return e[e.length-1]instanceof Function?this.toView(r,e[e.length-1]):r.buffer}}const iw="string",_X=/^[0-9a-f\s]+$/i,xX=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,wX=/^[a-zA-Z0-9-_]+$/;class PT{static fromString(e){const n=unescape(encodeURIComponent(e)),s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s.buffer}static toString(e){const n=Be.toUint8Array(e);let s="";for(let i=0;i<n.length;i++)s+=String.fromCharCode(n[i]);return decodeURIComponent(escape(s))}}class Fi{static toString(e,n=!1){const s=Be.toArrayBuffer(e),r=new DataView(s);let i="";for(let a=0;a<s.byteLength;a+=2){const l=r.getUint16(a,n);i+=String.fromCharCode(l)}return i}static fromString(e,n=!1){const s=new ArrayBuffer(e.length*2),r=new DataView(s);for(let i=0;i<e.length;i++)r.setUint16(i*2,e.charCodeAt(i),n);return s}}class nt{static isHex(e){return typeof e===iw&&_X.test(e)}static isBase64(e){return typeof e===iw&&xX.test(e)}static isBase64Url(e){return typeof e===iw&&wX.test(e)}static ToString(e,n="utf8"){const s=Be.toUint8Array(e);switch(n.toLowerCase()){case"utf8":return this.ToUtf8String(s);case"binary":return this.ToBinary(s);case"hex":return this.ToHex(s);case"base64":return this.ToBase64(s);case"base64url":return this.ToBase64Url(s);case"utf16le":return Fi.toString(s,!0);case"utf16":case"utf16be":return Fi.toString(s);default:throw new Error(`Unknown type of encoding '${n}'`)}}static FromString(e,n="utf8"){if(!e)return new ArrayBuffer(0);switch(n.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return Fi.fromString(e,!0);case"utf16":case"utf16be":return Fi.fromString(e);default:throw new Error(`Unknown type of encoding '${n}'`)}}static ToBase64(e){const n=Be.toUint8Array(e);if(typeof btoa<"u"){const s=this.ToString(n,"binary");return btoa(s)}else return Buffer.from(n).toString("base64")}static FromBase64(e){const n=this.formatString(e);if(!n)return new ArrayBuffer(0);if(!nt.isBase64(n))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return typeof atob<"u"?this.FromBinary(atob(n)):new Uint8Array(Buffer.from(n,"base64")).buffer}static FromBase64Url(e){const n=this.formatString(e);if(!n)return new ArrayBuffer(0);if(!nt.isBase64Url(n))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(n.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,n=nt.DEFAULT_UTF8_ENCODING){switch(n){case"ascii":return this.FromBinary(e);case"utf8":return PT.fromString(e);case"utf16":case"utf16be":return Fi.fromString(e);case"utf16le":case"usc2":return Fi.fromString(e,!0);default:throw new Error(`Unknown type of encoding '${n}'`)}}static ToUtf8String(e,n=nt.DEFAULT_UTF8_ENCODING){switch(n){case"ascii":return this.ToBinary(e);case"utf8":return PT.toString(e);case"utf16":case"utf16be":return Fi.toString(e);case"utf16le":case"usc2":return Fi.toString(e,!0);default:throw new Error(`Unknown type of encoding '${n}'`)}}static FromBinary(e){const n=e.length,s=new Uint8Array(n);for(let r=0;r<n;r++)s[r]=e.charCodeAt(r);return s.buffer}static ToBinary(e){const n=Be.toUint8Array(e);let s="";for(let r=0;r<n.length;r++)s+=String.fromCharCode(n[r]);return s}static ToHex(e){const n=Be.toUint8Array(e);let s="";const r=n.length;for(let i=0;i<r;i++){const a=n[i];a<16&&(s+="0"),s+=a.toString(16)}return s}static FromHex(e){let n=this.formatString(e);if(!n)return new ArrayBuffer(0);if(!nt.isHex(n))throw new TypeError("Argument 'hexString' is not HEX encoded");n.length%2&&(n=`0${n}`);const s=new Uint8Array(n.length/2);for(let r=0;r<n.length;r=r+2){const i=n.slice(r,r+2);s[r/2]=parseInt(i,16)}return s.buffer}static ToUtf16String(e,n=!1){return Fi.toString(e,n)}static FromUtf16String(e,n=!1){return Fi.fromString(e,n)}static Base64Padding(e){const n=4-e.length%4;if(n<4)for(let s=0;s<n;s++)e+="=";return e}static formatString(e){return e?.replace(/[\n\r\t ]/g,"")||""}}nt.DEFAULT_UTF8_ENCODING="utf8";function SX(...t){const e=t.map(r=>r.byteLength).reduce((r,i)=>r+i),n=new Uint8Array(e);let s=0;return t.map(r=>new Uint8Array(r)).forEach(r=>{for(const i of r)n[s++]=i}),n.buffer}function $D(t,e){if(!(t&&e)||t.byteLength!==e.byteLength)return!1;const n=new Uint8Array(t),s=new Uint8Array(e);for(let r=0;r<t.byteLength;r++)if(n[r]!==s[r])return!1;return!0}function hh(t,e){let n=0;if(t.length===1)return t[0];for(let s=t.length-1;s>=0;s--)n+=t[t.length-1-s]*Math.pow(2,e*s);return n}function mc(t,e,n=-1){const s=n;let r=t,i=0,a=Math.pow(2,e);for(let l=1;l<8;l++){if(t<a){let u;if(s<0)u=new ArrayBuffer(l),i=l;else{if(s<l)return new ArrayBuffer(0);u=new ArrayBuffer(s),i=s}const h=new Uint8Array(u);for(let m=l-1;m>=0;m--){const p=Math.pow(2,m*e);h[i-m-1]=Math.floor(r/p),r-=h[i-m-1]*p}return u}a*=Math.pow(2,e)}return new ArrayBuffer(0)}function WS(...t){let e=0,n=0;for(const i of t)e+=i.length;const s=new ArrayBuffer(e),r=new Uint8Array(s);for(const i of t)r.set(i,n),n+=i.length;return r}function zD(){const t=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const l=t[0]===255&&t[1]&128,u=t[0]===0&&(t[1]&128)===0;(l||u)&&this.warnings.push("Needlessly long format")}const e=new ArrayBuffer(this.valueHex.byteLength),n=new Uint8Array(e);for(let l=0;l<this.valueHex.byteLength;l++)n[l]=0;n[0]=t[0]&128;const s=hh(n,8),r=new ArrayBuffer(this.valueHex.byteLength),i=new Uint8Array(r);for(let l=0;l<this.valueHex.byteLength;l++)i[l]=t[l];return i[0]&=127,hh(i,8)-s}function kX(t){const e=t<0?t*-1:t;let n=128;for(let s=1;s<8;s++){if(e<=n){if(t<0){const a=n-e,l=mc(a,8,s),u=new Uint8Array(l);return u[0]|=128,l}let r=mc(e,8,s),i=new Uint8Array(r);if(i[0]&128){const a=r.slice(0),l=new Uint8Array(a);r=new ArrayBuffer(r.byteLength+1),i=new Uint8Array(r);for(let u=0;u<a.byteLength;u++)i[u+1]=l[u];i[0]=0}return r}n*=Math.pow(2,8)}return new ArrayBuffer(0)}function CX(t,e){if(t.byteLength!==e.byteLength)return!1;const n=new Uint8Array(t),s=new Uint8Array(e);for(let r=0;r<n.length;r++)if(n[r]!==s[r])return!1;return!0}function Mr(t,e){const n=t.toString(10);if(e<n.length)return"";const s=e-n.length,r=new Array(s);for(let a=0;a<s;a++)r[a]="0";return r.join("").concat(n)}function zy(){if(typeof BigInt>"u")throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function yN(t){let e=0,n=0;for(let r=0;r<t.length;r++){const i=t[r];e+=i.byteLength}const s=new Uint8Array(e);for(let r=0;r<t.length;r++){const i=t[r];s.set(new Uint8Array(i),n),n+=i.byteLength}return s.buffer}function so(t,e,n,s){return e instanceof Uint8Array?e.byteLength?n<0?(t.error="Wrong parameter: inputOffset less than zero",!1):s<0?(t.error="Wrong parameter: inputLength less than zero",!1):e.byteLength-n-s<0?(t.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):!0:(t.error="Wrong parameter: inputBuffer has zero length",!1):(t.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class nb{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return yN(this.items)}}const ef=[new Uint8Array([1])],BT="0123456789",aw="name",$T="valueHexView",NX="isHexOnly",EX="idBlock",AX="tagClass",RX="tagNumber",TX="isConstructed",jX="fromBER",OX="toBER",MX="local",lr="",ha=new ArrayBuffer(0),sb=new Uint8Array(0),Lp="EndOfContent",FD="OCTET STRING",UD="BIT STRING";function da(t){var e;return e=class extends t{get valueHex(){return this.valueHexView.slice().buffer}set valueHex(s){this.valueHexView=new Uint8Array(s)}constructor(...s){var r;super(...s);const i=s[0]||{};this.isHexOnly=(r=i.isHexOnly)!==null&&r!==void 0?r:!1,this.valueHexView=i.valueHex?Be.toUint8Array(i.valueHex):sb}fromBER(s,r,i){const a=s instanceof ArrayBuffer?new Uint8Array(s):s;if(!so(this,a,r,i))return-1;const l=r+i;return this.valueHexView=a.subarray(r,l),this.valueHexView.length?(this.blockLength=i,l):(this.warnings.push("Zero buffer length"),r)}toBER(s=!1){return this.isHexOnly?s?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",ha)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:nt.ToHex(this.valueHexView)}}},e.NAME="hexBlock",e}class Ic{static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}constructor({blockLength:e=0,error:n=lr,warnings:s=[],valueBeforeDecode:r=sb}={}){this.blockLength=e,this.error=n,this.warnings=s,this.valueBeforeDecodeView=Be.toUint8Array(r)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:nt.ToHex(this.valueBeforeDecodeView)}}}Ic.NAME="baseBlock";class Ys extends Ic{fromBER(e,n,s){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,n){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}Ys.NAME="valueBlock";class HD extends da(Ic){constructor({idBlock:e={}}={}){var n,s,r,i;super(),e?(this.isHexOnly=(n=e.isHexOnly)!==null&&n!==void 0?n:!1,this.valueHexView=e.valueHex?Be.toUint8Array(e.valueHex):sb,this.tagClass=(s=e.tagClass)!==null&&s!==void 0?s:-1,this.tagNumber=(r=e.tagNumber)!==null&&r!==void 0?r:-1,this.isConstructed=(i=e.isConstructed)!==null&&i!==void 0?i:!1):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let n=0;switch(this.tagClass){case 1:n|=0;break;case 2:n|=64;break;case 3:n|=128;break;case 4:n|=192;break;default:return this.error="Unknown tag class",ha}if(this.isConstructed&&(n|=32),this.tagNumber<31&&!this.isHexOnly){const r=new Uint8Array(1);if(!e){let i=this.tagNumber;i&=31,n|=i,r[0]=n}return r.buffer}if(!this.isHexOnly){const r=mc(this.tagNumber,7),i=new Uint8Array(r),a=r.byteLength,l=new Uint8Array(a+1);if(l[0]=n|31,!e){for(let u=0;u<a-1;u++)l[u+1]=i[u]|128;l[a]=i[a-1]}return l.buffer}const s=new Uint8Array(this.valueHexView.byteLength+1);if(s[0]=n|31,!e){const r=this.valueHexView;for(let i=0;i<r.length-1;i++)s[i+1]=r[i]|128;s[this.valueHexView.byteLength]=r[r.length-1]}return s.buffer}fromBER(e,n,s){const r=Be.toUint8Array(e);if(!so(this,r,n,s))return-1;const i=r.subarray(n,n+s);if(i.length===0)return this.error="Zero buffer length",-1;switch(i[0]&192){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(i[0]&32)===32,this.isHexOnly=!1;const l=i[0]&31;if(l!==31)this.tagNumber=l,this.blockLength=1;else{let u=1,h=this.valueHexView=new Uint8Array(255),m=255;for(;i[u]&128;){if(h[u-1]=i[u]&127,u++,u>=i.length)return this.error="End of input reached before message was fully decoded",-1;if(u===m){m+=255;const g=new Uint8Array(m);for(let y=0;y<h.length;y++)g[y]=h[y];h=this.valueHexView=new Uint8Array(m)}}this.blockLength=u+1,h[u-1]=i[u]&127;const p=new Uint8Array(u);for(let g=0;g<u;g++)p[g]=h[g];h=this.valueHexView=new Uint8Array(u),h.set(p),this.blockLength<=9?this.tagNumber=hh(h,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(this.tagClass===1&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return n+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}HD.NAME="identificationBlock";class VD extends Ic{constructor({lenBlock:e={}}={}){var n,s,r;super(),this.isIndefiniteForm=(n=e.isIndefiniteForm)!==null&&n!==void 0?n:!1,this.longFormUsed=(s=e.longFormUsed)!==null&&s!==void 0?s:!1,this.length=(r=e.length)!==null&&r!==void 0?r:0}fromBER(e,n,s){const r=Be.toUint8Array(e);if(!so(this,r,n,s))return-1;const i=r.subarray(n,n+s);if(i.length===0)return this.error="Zero buffer length",-1;if(i[0]===255)return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=i[0]===128,this.isIndefiniteForm)return this.blockLength=1,n+this.blockLength;if(this.longFormUsed=!!(i[0]&128),this.longFormUsed===!1)return this.length=i[0],this.blockLength=1,n+this.blockLength;const a=i[0]&127;if(a>8)return this.error="Too big integer",-1;if(a+1>i.length)return this.error="End of input reached before message was fully decoded",-1;const l=n+1,u=r.subarray(l,l+a);return u[a-1]===0&&this.warnings.push("Needlessly long encoded length"),this.length=hh(u,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=a+1,n+this.blockLength}toBER(e=!1){let n,s;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return n=new ArrayBuffer(1),e===!1&&(s=new Uint8Array(n),s[0]=128),n;if(this.longFormUsed){const r=mc(this.length,8);if(r.byteLength>127)return this.error="Too big length",ha;if(n=new ArrayBuffer(r.byteLength+1),e)return n;const i=new Uint8Array(r);s=new Uint8Array(n),s[0]=r.byteLength|128;for(let a=0;a<r.byteLength;a++)s[a+1]=i[a];return n}return n=new ArrayBuffer(1),e===!1&&(s=new Uint8Array(n),s[0]=this.length),n}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}VD.NAME="lengthBlock";const Ze={};class Cs extends Ic{constructor({name:e=lr,optional:n=!1,primitiveSchema:s,...r}={},i){super(r),this.name=e,this.optional=n,s&&(this.primitiveSchema=s),this.idBlock=new HD(r),this.lenBlock=new VD(r),this.valueBlock=i?new i(r):new Ys(r)}fromBER(e,n,s){const r=this.valueBlock.fromBER(e,n,this.lenBlock.isIndefiniteForm?s:this.lenBlock.length);return r===-1?(this.error=this.valueBlock.error,r):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}toBER(e,n){const s=n||new nb;n||qD(this);const r=this.idBlock.toBER(e);if(s.write(r),this.lenBlock.isIndefiniteForm)s.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,s),s.write(new ArrayBuffer(2));else{const i=this.valueBlock.toBER(e);this.lenBlock.length=i.byteLength;const a=this.lenBlock.toBER(e);s.write(a),s.write(i)}return n?ha:s.final()}toJSON(){const e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return e==="ascii"?this.onAsciiEncoding():nt.ToHex(this.toBER())}onAsciiEncoding(){const e=this.constructor.NAME,n=nt.ToHex(this.valueBlock.valueBeforeDecodeView);return`${e} : ${n}`}isEqual(e){if(this===e)return!0;if(!(e instanceof this.constructor))return!1;const n=this.toBER(),s=e.toBER();return CX(n,s)}}Cs.NAME="BaseBlock";function qD(t){var e;if(t instanceof Ze.Constructed)for(const n of t.valueBlock.value)qD(n)&&(t.lenBlock.isIndefiniteForm=!0);return!!(!((e=t.lenBlock)===null||e===void 0)&&e.isIndefiniteForm)}class vN extends Cs{getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}constructor({value:e=lr,...n}={},s){super(n,s),e&&this.fromString(e)}fromBER(e,n,s){const r=this.valueBlock.fromBER(e,n,this.lenBlock.isIndefiniteForm?s:this.lenBlock.length);return r===-1?(this.error=this.valueBlock.error,r):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}vN.NAME="BaseStringBlock";class KD extends da(Ys){constructor({isHexOnly:e=!0,...n}={}){super(n),this.isHexOnly=e}}KD.NAME="PrimitiveValueBlock";var WD;class um extends Cs{constructor(e={}){super(e,KD),this.idBlock.isConstructed=!1}}WD=um;Ze.Primitive=WD;um.NAME="PRIMITIVE";function IX(t,e){if(t instanceof e)return t;const n=new e;return n.idBlock=t.idBlock,n.lenBlock=t.lenBlock,n.warnings=t.warnings,n.valueBeforeDecodeView=t.valueBeforeDecodeView,n}function Ph(t,e=0,n=t.length){const s=e;let r=new Cs({},Ys);const i=new Ic;if(!so(i,t,e,n))return r.error=i.error,{offset:-1,result:r};if(!t.subarray(e,e+n).length)return r.error="Zero buffer length",{offset:-1,result:r};let l=r.idBlock.fromBER(t,e,n);if(r.idBlock.warnings.length&&r.warnings.concat(r.idBlock.warnings),l===-1)return r.error=r.idBlock.error,{offset:-1,result:r};if(e=l,n-=r.idBlock.blockLength,l=r.lenBlock.fromBER(t,e,n),r.lenBlock.warnings.length&&r.warnings.concat(r.lenBlock.warnings),l===-1)return r.error=r.lenBlock.error,{offset:-1,result:r};if(e=l,n-=r.lenBlock.blockLength,!r.idBlock.isConstructed&&r.lenBlock.isIndefiniteForm)return r.error="Indefinite length form used for primitive encoding form",{offset:-1,result:r};let u=Cs;switch(r.idBlock.tagClass){case 1:if(r.idBlock.tagNumber>=37&&r.idBlock.isHexOnly===!1)return r.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:r};switch(r.idBlock.tagNumber){case 0:if(r.idBlock.isConstructed&&r.lenBlock.length>0)return r.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:r};u=Ze.EndOfContent;break;case 1:u=Ze.Boolean;break;case 2:u=Ze.Integer;break;case 3:u=Ze.BitString;break;case 4:u=Ze.OctetString;break;case 5:u=Ze.Null;break;case 6:u=Ze.ObjectIdentifier;break;case 10:u=Ze.Enumerated;break;case 12:u=Ze.Utf8String;break;case 13:u=Ze.RelativeObjectIdentifier;break;case 14:u=Ze.TIME;break;case 15:return r.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:r};case 16:u=Ze.Sequence;break;case 17:u=Ze.Set;break;case 18:u=Ze.NumericString;break;case 19:u=Ze.PrintableString;break;case 20:u=Ze.TeletexString;break;case 21:u=Ze.VideotexString;break;case 22:u=Ze.IA5String;break;case 23:u=Ze.UTCTime;break;case 24:u=Ze.GeneralizedTime;break;case 25:u=Ze.GraphicString;break;case 26:u=Ze.VisibleString;break;case 27:u=Ze.GeneralString;break;case 28:u=Ze.UniversalString;break;case 29:u=Ze.CharacterString;break;case 30:u=Ze.BmpString;break;case 31:u=Ze.DATE;break;case 32:u=Ze.TimeOfDay;break;case 33:u=Ze.DateTime;break;case 34:u=Ze.Duration;break;default:{const h=r.idBlock.isConstructed?new Ze.Constructed:new Ze.Primitive;h.idBlock=r.idBlock,h.lenBlock=r.lenBlock,h.warnings=r.warnings,r=h}}break;default:u=r.idBlock.isConstructed?Ze.Constructed:Ze.Primitive}return r=IX(r,u),l=r.fromBER(t,e,r.lenBlock.isIndefiniteForm?n:r.lenBlock.length),r.valueBeforeDecodeView=t.subarray(s,s+r.blockLength),{offset:l,result:r}}function nh(t){if(!t.byteLength){const e=new Cs({},Ys);return e.error="Input buffer has zero length",{offset:-1,result:e}}return Ph(Be.toUint8Array(t).slice(),0,t.byteLength)}function DX(t,e){return t?1:e}class nl extends Ys{constructor({value:e=[],isIndefiniteForm:n=!1,...s}={}){super(s),this.value=e,this.isIndefiniteForm=n}fromBER(e,n,s){const r=Be.toUint8Array(e);if(!so(this,r,n,s))return-1;if(this.valueBeforeDecodeView=r.subarray(n,n+s),this.valueBeforeDecodeView.length===0)return this.warnings.push("Zero buffer length"),n;let i=n;for(;DX(this.isIndefiniteForm,s)>0;){const a=Ph(r,i,s);if(a.offset===-1)return this.error=a.result.error,this.warnings.concat(a.result.warnings),-1;if(i=a.offset,this.blockLength+=a.result.blockLength,s-=a.result.blockLength,this.value.push(a.result),this.isIndefiniteForm&&a.result.constructor.NAME===Lp)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===Lp?this.value.pop():this.warnings.push("No EndOfContent block encoded")),i}toBER(e,n){const s=n||new nb;for(let r=0;r<this.value.length;r++)this.value[r].toBER(e,s);return n?ha:s.final()}toJSON(){const e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const n of this.value)e.value.push(n.toJSON());return e}}nl.NAME="ConstructedValueBlock";var GD;class qs extends Cs{constructor(e={}){super(e,nl),this.idBlock.isConstructed=!0}fromBER(e,n,s){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const r=this.valueBlock.fromBER(e,n,this.lenBlock.isIndefiniteForm?s:this.lenBlock.length);return r===-1?(this.error=this.valueBlock.error,r):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}onAsciiEncoding(){const e=[];for(const s of this.valueBlock.value)e.push(s.toString("ascii").split(`
`).map(r=>`  ${r}`).join(`
`));const n=this.idBlock.tagClass===3?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${n} :
${e.join(`
`)}`:`${n} :`}}GD=qs;Ze.Constructed=GD;qs.NAME="CONSTRUCTED";class YD extends Ys{fromBER(e,n,s){return n}toBER(e){return ha}}YD.override="EndOfContentValueBlock";var ZD;class bN extends Cs{constructor(e={}){super(e,YD),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}ZD=bN;Ze.EndOfContent=ZD;bN.NAME=Lp;var JD;class gc extends Cs{constructor(e={}){super(e,Ys),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,n,s){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=s,n+s>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):n+s}toBER(e,n){const s=new ArrayBuffer(2);if(!e){const r=new Uint8Array(s);r[0]=5,r[1]=0}return n&&n.write(s),s}onAsciiEncoding(){return`${this.constructor.NAME}`}}JD=gc;Ze.Null=JD;gc.NAME="NULL";class XD extends da(Ys){get value(){for(const e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}constructor({value:e,...n}={}){super(n),n.valueHex?this.valueHexView=Be.toUint8Array(n.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}fromBER(e,n,s){const r=Be.toUint8Array(e);return so(this,r,n,s)?(this.valueHexView=r.subarray(n,n+s),s>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,zD.call(this),this.blockLength=s,n+s):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}XD.NAME="BooleanValueBlock";var QD;let rb=class extends Cs{getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}constructor(e={}){super(e,XD),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}};QD=rb;Ze.Boolean=QD;rb.NAME="BOOLEAN";class eL extends da(nl){constructor({isConstructed:e=!1,...n}={}){super(n),this.isConstructed=e}fromBER(e,n,s){let r=0;if(this.isConstructed){if(this.isHexOnly=!1,r=nl.prototype.fromBER.call(this,e,n,s),r===-1)return r;for(let i=0;i<this.value.length;i++){const a=this.value[i].constructor.NAME;if(a===Lp){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(a!==FD)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,r=super.fromBER(e,n,s),this.blockLength=s;return r}toBER(e,n){return this.isConstructed?nl.prototype.toBER.call(this,e,n):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}eL.NAME="OctetStringValueBlock";var _N;let ic=class extends Cs{constructor({idBlock:e={},lenBlock:n={},...s}={}){var r,i;(r=s.isConstructed)!==null&&r!==void 0||(s.isConstructed=!!(!((i=s.value)===null||i===void 0)&&i.length)),super({idBlock:{isConstructed:s.isConstructed,...e},lenBlock:{...n,isIndefiniteForm:!!s.isIndefiniteForm},...s},eL),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,n,s){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,s===0)return this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),n;if(!this.valueBlock.isConstructed){const i=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(n,n+s);try{if(i.byteLength){const a=Ph(i,0,i.byteLength);a.offset!==-1&&a.offset===s&&(this.valueBlock.value=[a.result])}}catch{}}return super.fromBER(e,n,s)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return qs.prototype.onAsciiEncoding.call(this);const e=this.constructor.NAME,n=nt.ToHex(this.valueBlock.valueHexView);return`${e} : ${n}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const e=[];for(const n of this.valueBlock.value)n instanceof _N&&e.push(n.valueBlock.valueHexView);return Be.concat(e)}};_N=ic;Ze.OctetString=_N;ic.NAME=FD;class tL extends da(nl){constructor({unusedBits:e=0,isConstructed:n=!1,...s}={}){super(s),this.unusedBits=e,this.isConstructed=n,this.blockLength=this.valueHexView.byteLength}fromBER(e,n,s){if(!s)return n;let r=-1;if(this.isConstructed){if(r=nl.prototype.fromBER.call(this,e,n,s),r===-1)return r;for(const l of this.value){const u=l.constructor.NAME;if(u===Lp){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(u!==UD)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const h=l.valueBlock;if(this.unusedBits>0&&h.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=h.unusedBits}return r}const i=Be.toUint8Array(e);if(!so(this,i,n,s))return-1;const a=i.subarray(n,n+s);if(this.unusedBits=a[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const l=a.subarray(1);try{if(l.byteLength){const u=Ph(l,0,l.byteLength);u.offset!==-1&&u.offset===s-1&&(this.value=[u.result])}}catch{}}return this.valueHexView=a.subarray(1),this.blockLength=a.length,n+s}toBER(e,n){if(this.isConstructed)return nl.prototype.toBER.call(this,e,n);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength){const r=new Uint8Array(1);return r[0]=0,r.buffer}const s=new Uint8Array(this.valueHexView.length+1);return s[0]=this.unusedBits,s.set(this.valueHexView,1),s.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}tL.NAME="BitStringValueBlock";var nL;let ac=class extends Cs{constructor({idBlock:e={},lenBlock:n={},...s}={}){var r,i;(r=s.isConstructed)!==null&&r!==void 0||(s.isConstructed=!!(!((i=s.value)===null||i===void 0)&&i.length)),super({idBlock:{isConstructed:s.isConstructed,...e},lenBlock:{...n,isIndefiniteForm:!!s.isIndefiniteForm},...s},tL),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,n,s){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,n,s)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return qs.prototype.onAsciiEncoding.call(this);{const e=[],n=this.valueBlock.valueHexView;for(const a of n)e.push(a.toString(2).padStart(8,"0"));const s=e.join(""),r=this.constructor.NAME,i=s.substring(0,s.length-this.valueBlock.unusedBits);return`${r} : ${i}`}}};nL=ac;Ze.BitString=nL;ac.NAME=UD;var sL;function LX(t,e){const n=new Uint8Array([0]),s=new Uint8Array(t),r=new Uint8Array(e);let i=s.slice(0);const a=i.length-1,l=r.slice(0),u=l.length-1;let h=0;const m=u<a?a:u;let p=0;for(let g=m;g>=0;g--,p++)!0===p<l.length?h=i[a-p]+l[u-p]+n[0]:h=i[a-p]+n[0],n[0]=h/10,!0===p>=i.length?i=WS(new Uint8Array([h%10]),i):i[a-p]=h%10;return n[0]>0&&(i=WS(n,i)),i}function zT(t){if(t>=ef.length)for(let e=ef.length;e<=t;e++){const n=new Uint8Array([0]);let s=ef[e-1].slice(0);for(let r=s.length-1;r>=0;r--){const i=new Uint8Array([(s[r]<<1)+n[0]]);n[0]=i[0]/10,s[r]=i[0]%10}n[0]>0&&(s=WS(n,s)),ef.push(s)}return ef[t]}function PX(t,e){let n=0;const s=new Uint8Array(t),r=new Uint8Array(e),i=s.slice(0),a=i.length-1,l=r.slice(0),u=l.length-1;let h,m=0;for(let p=u;p>=0;p--,m++)h=i[a-m]-l[u-m]-n,!0===h<0?(n=1,i[a-m]=h+10):(n=0,i[a-m]=h);if(n>0)for(let p=a-u+1;p>=0;p--,m++)if(h=i[a-m]-n,h<0)n=1,i[a-m]=h+10;else{n=0,i[a-m]=h;break}return i.slice()}class xN extends da(Ys){setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=zD.call(this)))}constructor({value:e,...n}={}){super(n),this._valueDec=0,n.valueHex&&this.setValueHex(),e!==void 0&&(this.valueDec=e)}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(kX(e))}get valueDec(){return this._valueDec}fromDER(e,n,s,r=0){const i=this.fromBER(e,n,s);if(i===-1)return i;const a=this.valueHexView;return a[0]===0&&(a[1]&128)!==0?this.valueHexView=a.subarray(1):r!==0&&a.length<r&&(r-a.length>1&&(r=a.length+1),this.valueHexView=a.subarray(r-a.length)),i}toDER(e=!1){const n=this.valueHexView;switch(!0){case(n[0]&128)!==0:{const s=new Uint8Array(this.valueHexView.length+1);s[0]=0,s.set(n,1),this.valueHexView=s}break;case(n[0]===0&&(n[1]&128)===0):this.valueHexView=this.valueHexView.subarray(1);break}return this.toBER(e)}fromBER(e,n,s){const r=super.fromBER(e,n,s);return r===-1||this.setValueHex(),r}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const e=this.valueHexView.length*8-1;let n=new Uint8Array(this.valueHexView.length*8/3),s=0,r;const i=this.valueHexView;let a="",l=!1;for(let u=i.byteLength-1;u>=0;u--){r=i[u];for(let h=0;h<8;h++)(r&1)===1&&(s===e?(n=PX(zT(s),n),a="-"):n=LX(n,zT(s))),s++,r>>=1}for(let u=0;u<n.length;u++)n[u]&&(l=!0),l&&(a+=BT.charAt(n[u]));return l===!1&&(a+=BT.charAt(0)),a}}sL=xN;xN.NAME="IntegerValueBlock";Object.defineProperty(sL.prototype,"valueHex",{set:function(t){this.valueHexView=new Uint8Array(t),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});var op;class Bh extends Cs{constructor(e={}){super(e,xN),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return zy(),BigInt(this.valueBlock.toString())}static fromBigInt(e){zy();const n=BigInt(e),s=new nb,r=n.toString(16).replace(/^-/,""),i=new Uint8Array(nt.FromHex(r));if(n<0){const l=new Uint8Array(i.length+(i[0]&128?1:0));l[0]|=128;const h=BigInt(`0x${nt.ToHex(l)}`)+n,m=Be.toUint8Array(nt.FromHex(h.toString(16)));m[0]|=128,s.write(m)}else i[0]&128&&s.write(new Uint8Array([0])),s.write(i);return new op({valueHex:s.final()})}convertToDER(){const e=new op({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new op({valueHex:this.valueBlock.valueHexView[0]===0?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}op=Bh;Ze.Integer=op;Bh.NAME="INTEGER";var rL;class ib extends Bh{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}rL=ib;Ze.Enumerated=rL;ib.NAME="ENUMERATED";class GS extends da(Ys){constructor({valueDec:e=-1,isFirstSid:n=!1,...s}={}){super(s),this.valueDec=e,this.isFirstSid=n}fromBER(e,n,s){if(!s)return n;const r=Be.toUint8Array(e);if(!so(this,r,n,s))return-1;const i=r.subarray(n,n+s);this.valueHexView=new Uint8Array(s);for(let l=0;l<s&&(this.valueHexView[l]=i[l]&127,this.blockLength++,(i[l]&128)!==0);l++);const a=new Uint8Array(this.blockLength);for(let l=0;l<this.blockLength;l++)a[l]=this.valueHexView[l];return this.valueHexView=a,(i[this.blockLength-1]&128)!==0?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=hh(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),n+this.blockLength)}set valueBigInt(e){zy();let n=BigInt(e).toString(2);for(;n.length%7;)n="0"+n;const s=new Uint8Array(n.length/7);for(let r=0;r<s.length;r++)s[r]=parseInt(n.slice(r*7,r*7+7),2)+(r+1<s.length?128:0);this.fromBER(s.buffer,0,s.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const r=this.valueHexView,i=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength-1;a++)i[a]=r[a]|128;return i[this.blockLength-1]=r[this.blockLength-1],i.buffer}const n=mc(this.valueDec,7);if(n.byteLength===0)return this.error="Error during encoding SID value",ha;const s=new Uint8Array(n.byteLength);if(!e){const r=new Uint8Array(n),i=n.byteLength-1;for(let a=0;a<i;a++)s[a]=r[a]|128;s[i]=r[i]}return s}toString(){let e="";if(this.isHexOnly)e=nt.ToHex(this.valueHexView);else if(this.isFirstSid){let n=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",n-=40):(e="2.",n-=80),e+=n.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}GS.NAME="sidBlock";class iL extends Ys{constructor({value:e=lr,...n}={}){super(n),this.value=[],e&&this.fromString(e)}fromBER(e,n,s){let r=n;for(;s>0;){const i=new GS;if(r=i.fromBER(e,r,s),r===-1)return this.blockLength=0,this.error=i.error,r;this.value.length===0&&(i.isFirstSid=!0),this.blockLength+=i.blockLength,s-=i.blockLength,this.value.push(i)}return r}toBER(e){const n=[];for(let s=0;s<this.value.length;s++){const r=this.value[s].toBER(e);if(r.byteLength===0)return this.error=this.value[s].error,ha;n.push(r)}return yN(n)}fromString(e){this.value=[];let n=0,s=0,r="",i=!1;do if(s=e.indexOf(".",n),s===-1?r=e.substring(n):r=e.substring(n,s),n=s+1,i){const a=this.value[0];let l=0;switch(a.valueDec){case 0:break;case 1:l=40;break;case 2:l=80;break;default:this.value=[];return}const u=parseInt(r,10);if(isNaN(u))return;a.valueDec=u+l,i=!1}else{const a=new GS;if(r>Number.MAX_SAFE_INTEGER){zy();const l=BigInt(r);a.valueBigInt=l}else if(a.valueDec=parseInt(r,10),isNaN(a.valueDec))return;this.value.length||(a.isFirstSid=!0,i=!0),this.value.push(a)}while(s!==-1)}toString(){let e="",n=!1;for(let s=0;s<this.value.length;s++){n=this.value[s].isHexOnly;let r=this.value[s].toString();s!==0&&(e=`${e}.`),n?(r=`{${r}}`,this.value[s].isFirstSid?e=`2.{${r} - 80}`:e+=r):e+=r}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let n=0;n<this.value.length;n++)e.sidArray.push(this.value[n].toJSON());return e}}iL.NAME="ObjectIdentifierValueBlock";var aL;class ab extends Cs{getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}constructor(e={}){super(e,iL),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}aL=ab;Ze.ObjectIdentifier=aL;ab.NAME="OBJECT IDENTIFIER";class YS extends da(Ic){constructor({valueDec:e=0,...n}={}){super(n),this.valueDec=e}fromBER(e,n,s){if(s===0)return n;const r=Be.toUint8Array(e);if(!so(this,r,n,s))return-1;const i=r.subarray(n,n+s);this.valueHexView=new Uint8Array(s);for(let l=0;l<s&&(this.valueHexView[l]=i[l]&127,this.blockLength++,(i[l]&128)!==0);l++);const a=new Uint8Array(this.blockLength);for(let l=0;l<this.blockLength;l++)a[l]=this.valueHexView[l];return this.valueHexView=a,(i[this.blockLength-1]&128)!==0?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=hh(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),n+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const r=this.valueHexView,i=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength-1;a++)i[a]=r[a]|128;return i[this.blockLength-1]=r[this.blockLength-1],i.buffer}const n=mc(this.valueDec,7);if(n.byteLength===0)return this.error="Error during encoding SID value",ha;const s=new Uint8Array(n.byteLength);if(!e){const r=new Uint8Array(n),i=n.byteLength-1;for(let a=0;a<i;a++)s[a]=r[a]|128;s[i]=r[i]}return s.buffer}toString(){let e="";return this.isHexOnly?e=nt.ToHex(this.valueHexView):e=this.valueDec.toString(),e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}YS.NAME="relativeSidBlock";class oL extends Ys{constructor({value:e=lr,...n}={}){super(n),this.value=[],e&&this.fromString(e)}fromBER(e,n,s){let r=n;for(;s>0;){const i=new YS;if(r=i.fromBER(e,r,s),r===-1)return this.blockLength=0,this.error=i.error,r;this.blockLength+=i.blockLength,s-=i.blockLength,this.value.push(i)}return r}toBER(e,n){const s=[];for(let r=0;r<this.value.length;r++){const i=this.value[r].toBER(e);if(i.byteLength===0)return this.error=this.value[r].error,ha;s.push(i)}return yN(s)}fromString(e){this.value=[];let n=0,s=0,r="";do{s=e.indexOf(".",n),s===-1?r=e.substring(n):r=e.substring(n,s),n=s+1;const i=new YS;if(i.valueDec=parseInt(r,10),isNaN(i.valueDec))return!0;this.value.push(i)}while(s!==-1);return!0}toString(){let e="",n=!1;for(let s=0;s<this.value.length;s++){n=this.value[s].isHexOnly;let r=this.value[s].toString();s!==0&&(e=`${e}.`),n&&(r=`{${r}}`),e+=r}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let n=0;n<this.value.length;n++)e.sidArray.push(this.value[n].toJSON());return e}}oL.NAME="RelativeObjectIdentifierValueBlock";var lL;class wN extends Cs{getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}constructor(e={}){super(e,oL),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}lL=wN;Ze.RelativeObjectIdentifier=lL;wN.NAME="RelativeObjectIdentifier";var cL;class Ni extends qs{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}cL=Ni;Ze.Sequence=cL;Ni.NAME="SEQUENCE";var uL;let Qi=class extends qs{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}};uL=Qi;Ze.Set=uL;Qi.NAME="SET";class hL extends da(Ys){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=lr}toJSON(){return{...super.toJSON(),value:this.value}}}hL.NAME="StringValueBlock";class dL extends hL{}dL.NAME="SimpleStringValueBlock";class zr extends vN{constructor({...e}={}){super(e,dL)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,Be.toUint8Array(e))}fromString(e){const n=e.length,s=this.valueBlock.valueHexView=new Uint8Array(n);for(let r=0;r<n;r++)s[r]=e.charCodeAt(r);this.valueBlock.value=e}}zr.NAME="SIMPLE STRING";class fL extends zr{fromBuffer(e){this.valueBlock.valueHexView=Be.toUint8Array(e);try{this.valueBlock.value=nt.ToUtf8String(e)}catch(n){this.warnings.push(`Error during "decodeURIComponent": ${n}, using raw string`),this.valueBlock.value=nt.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(nt.FromUtf8String(e)),this.valueBlock.value=e}}fL.NAME="Utf8StringValueBlock";var pL;class ro extends fL{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}pL=ro;Ze.Utf8String=pL;ro.NAME="UTF8String";class mL extends zr{fromBuffer(e){this.valueBlock.value=nt.ToUtf16String(e),this.valueBlock.valueHexView=Be.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(nt.FromUtf16String(e))}}mL.NAME="BmpStringValueBlock";var gL;class ob extends mL{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}gL=ob;Ze.BmpString=gL;ob.NAME="BMPString";class yL extends zr{fromBuffer(e){const n=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),s=new Uint8Array(n);for(let r=0;r<s.length;r+=4)s[r]=s[r+3],s[r+1]=s[r+2],s[r+2]=0,s[r+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(n))}fromString(e){const n=e.length,s=this.valueBlock.valueHexView=new Uint8Array(n*4);for(let r=0;r<n;r++){const i=mc(e.charCodeAt(r),8),a=new Uint8Array(i);if(a.length>4)continue;const l=4-a.length;for(let u=a.length-1;u>=0;u--)s[r*4+u+l]=a[u]}this.valueBlock.value=e}}yL.NAME="UniversalStringValueBlock";var vL;class lb extends yL{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}vL=lb;Ze.UniversalString=vL;lb.NAME="UniversalString";var bL;class cb extends zr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}bL=cb;Ze.NumericString=bL;cb.NAME="NumericString";var _L;class ub extends zr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}_L=ub;Ze.PrintableString=_L;ub.NAME="PrintableString";var xL;class hb extends zr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}xL=hb;Ze.TeletexString=xL;hb.NAME="TeletexString";var wL;class db extends zr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}wL=db;Ze.VideotexString=wL;db.NAME="VideotexString";var SL;class fb extends zr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}SL=fb;Ze.IA5String=SL;fb.NAME="IA5String";var kL;class pb extends zr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}kL=pb;Ze.GraphicString=kL;pb.NAME="GraphicString";var CL;class hm extends zr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}CL=hm;Ze.VisibleString=CL;hm.NAME="VisibleString";var NL;class mb extends zr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}NL=mb;Ze.GeneralString=NL;mb.NAME="GeneralString";var EL;class gb extends zr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}EL=gb;Ze.CharacterString=EL;gb.NAME="CharacterString";var AL;class dm extends hm{constructor({value:e,valueDate:n,...s}={}){if(super(s),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let r=0;r<e.length;r++)this.valueBlock.valueHexView[r]=e.charCodeAt(r)}n&&(this.fromDate(n),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,Be.toUint8Array(e)))}toBuffer(){const e=this.toString(),n=new ArrayBuffer(e.length),s=new Uint8Array(n);for(let r=0;r<e.length;r++)s[r]=e.charCodeAt(r);return n}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){const s=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(e);if(s===null){this.error="Wrong input string for conversion";return}const r=parseInt(s[1],10);r>=50?this.year=1900+r:this.year=2e3+r,this.month=parseInt(s[2],10),this.day=parseInt(s[3],10),this.hour=parseInt(s[4],10),this.minute=parseInt(s[5],10),this.second=parseInt(s[6],10)}toString(e="iso"){if(e==="iso"){const n=new Array(7);return n[0]=Mr(this.year<2e3?this.year-1900:this.year-2e3,2),n[1]=Mr(this.month,2),n[2]=Mr(this.day,2),n[3]=Mr(this.hour,2),n[4]=Mr(this.minute,2),n[5]=Mr(this.second,2),n[6]="Z",n.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}AL=dm;Ze.UTCTime=AL;dm.NAME="UTCTime";var RL;class yb extends dm{constructor(e={}){var n;super(e),(n=this.millisecond)!==null&&n!==void 0||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){const e=Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond);return new Date(e)}fromString(e){let n=!1,s="",r="",i=0,a,l=0,u=0;if(e[e.length-1]==="Z")s=e.substring(0,e.length-1),n=!0;else{const p=new Number(e[e.length-1]);if(isNaN(p.valueOf()))throw new Error("Wrong input string for conversion");s=e}if(n){if(s.indexOf("+")!==-1)throw new Error("Wrong input string for conversion");if(s.indexOf("-")!==-1)throw new Error("Wrong input string for conversion")}else{let p=1,g=s.indexOf("+"),y="";if(g===-1&&(g=s.indexOf("-"),p=-1),g!==-1){if(y=s.substring(g+1),s=s.substring(0,g),y.length!==2&&y.length!==4)throw new Error("Wrong input string for conversion");let b=parseInt(y.substring(0,2),10);if(isNaN(b.valueOf()))throw new Error("Wrong input string for conversion");if(l=p*b,y.length===4){if(b=parseInt(y.substring(2,4),10),isNaN(b.valueOf()))throw new Error("Wrong input string for conversion");u=p*b}}}let h=s.indexOf(".");if(h===-1&&(h=s.indexOf(",")),h!==-1){const p=new Number(`0${s.substring(h)}`);if(isNaN(p.valueOf()))throw new Error("Wrong input string for conversion");i=p.valueOf(),r=s.substring(0,h)}else r=s;switch(!0){case r.length===8:if(a=/(\d{4})(\d{2})(\d{2})/ig,h!==-1)throw new Error("Wrong input string for conversion");break;case r.length===10:if(a=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,h!==-1){let p=60*i;this.minute=Math.floor(p),p=60*(p-this.minute),this.second=Math.floor(p),p=1e3*(p-this.second),this.millisecond=Math.floor(p)}break;case r.length===12:if(a=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,h!==-1){let p=60*i;this.second=Math.floor(p),p=1e3*(p-this.second),this.millisecond=Math.floor(p)}break;case r.length===14:if(a=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,h!==-1){const p=1e3*i;this.millisecond=Math.floor(p)}break;default:throw new Error("Wrong input string for conversion")}const m=a.exec(r);if(m===null)throw new Error("Wrong input string for conversion");for(let p=1;p<m.length;p++)switch(p){case 1:this.year=parseInt(m[p],10);break;case 2:this.month=parseInt(m[p],10);break;case 3:this.day=parseInt(m[p],10);break;case 4:this.hour=parseInt(m[p],10)+l;break;case 5:this.minute=parseInt(m[p],10)+u;break;case 6:this.second=parseInt(m[p],10);break;default:throw new Error("Wrong input string for conversion")}if(n===!1){const p=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=p.getUTCFullYear(),this.month=p.getUTCMonth(),this.day=p.getUTCDay(),this.hour=p.getUTCHours(),this.minute=p.getUTCMinutes(),this.second=p.getUTCSeconds(),this.millisecond=p.getUTCMilliseconds()}}toString(e="iso"){if(e==="iso"){const n=[];return n.push(Mr(this.year,4)),n.push(Mr(this.month,2)),n.push(Mr(this.day,2)),n.push(Mr(this.hour,2)),n.push(Mr(this.minute,2)),n.push(Mr(this.second,2)),this.millisecond!==0&&(n.push("."),n.push(Mr(this.millisecond,3))),n.push("Z"),n.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}RL=yb;Ze.GeneralizedTime=RL;yb.NAME="GeneralizedTime";var TL;let SN=class extends ro{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}};TL=SN;Ze.DATE=TL;SN.NAME="DATE";var jL;class kN extends ro{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}jL=kN;Ze.TimeOfDay=jL;kN.NAME="TimeOfDay";var OL;class CN extends ro{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}OL=CN;Ze.DateTime=OL;CN.NAME="DateTime";var ML;class NN extends ro{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}ML=NN;Ze.Duration=ML;NN.NAME="Duration";var IL;class EN extends ro{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}IL=EN;Ze.TIME=IL;EN.NAME="TIME";class yc{constructor({name:e=lr,optional:n=!1}={}){this.name=e,this.optional=n}}class AN extends yc{constructor({value:e=[],...n}={}){super(n),this.value=e}}class Fy extends yc{constructor({value:e=new yc,local:n=!1,...s}={}){super(s),this.value=e,this.local=n}}class BX{get data(){return this.dataView.slice().buffer}set data(e){this.dataView=Be.toUint8Array(e)}constructor({data:e=sb}={}){this.dataView=Be.toUint8Array(e)}fromBER(e,n,s){const r=n+s;return this.dataView=Be.toUint8Array(e).subarray(n,r),r}toBER(e){return this.dataView.slice().buffer}}function qo(t,e,n){if(n instanceof AN){for(const i of n.value)if(qo(t,e,i).verified)return{verified:!0,result:t};{const i={verified:!1,result:{error:"Wrong values for Choice type"}};return n.hasOwnProperty(aw)&&(i.name=n.name),i}}if(n instanceof yc)return n.hasOwnProperty(aw)&&(t[n.name]=e),{verified:!0,result:t};if(!(t instanceof Object))return{verified:!1,result:{error:"Wrong root object"}};if(!(e instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(!(n instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(EX in n))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(jX in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(OX in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const s=n.idBlock.toBER(!1);if(s.byteLength===0)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(n.idBlock.fromBER(s,0,s.byteLength)===-1)return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(n.idBlock.hasOwnProperty(AX)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.tagClass!==e.idBlock.tagClass)return{verified:!1,result:t};if(n.idBlock.hasOwnProperty(RX)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.tagNumber!==e.idBlock.tagNumber)return{verified:!1,result:t};if(n.idBlock.hasOwnProperty(TX)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.isConstructed!==e.idBlock.isConstructed)return{verified:!1,result:t};if(!(NX in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.isHexOnly!==e.idBlock.isHexOnly)return{verified:!1,result:t};if(n.idBlock.isHexOnly){if(!($T in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const i=n.idBlock.valueHexView,a=e.idBlock.valueHexView;if(i.length!==a.length)return{verified:!1,result:t};for(let l=0;l<i.length;l++)if(i[l]!==a[1])return{verified:!1,result:t}}if(n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,lr),n.name&&(t[n.name]=e)),n instanceof Ze.Constructed){let i=0,a={verified:!1,result:{error:"Unknown error"}},l=n.valueBlock.value.length;if(l>0&&n.valueBlock.value[0]instanceof Fy&&(l=e.valueBlock.value.length),l===0)return{verified:!0,result:t};if(e.valueBlock.value.length===0&&n.valueBlock.value.length!==0){let u=!0;for(let h=0;h<n.valueBlock.value.length;h++)u=u&&(n.valueBlock.value[h].optional||!1);return u?{verified:!0,result:t}:(n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,lr),n.name&&delete t[n.name]),t.error="Inconsistent object length",{verified:!1,result:t})}for(let u=0;u<l;u++)if(u-i>=e.valueBlock.value.length){if(n.valueBlock.value[u].optional===!1){const h={verified:!1,result:t};return t.error="Inconsistent length between ASN.1 data and schema",n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,lr),n.name&&(delete t[n.name],h.name=n.name)),h}}else if(n.valueBlock.value[0]instanceof Fy){if(a=qo(t,e.valueBlock.value[u],n.valueBlock.value[0].value),a.verified===!1)if(n.valueBlock.value[0].optional)i++;else return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,lr),n.name&&delete t[n.name]),a;if(aw in n.valueBlock.value[0]&&n.valueBlock.value[0].name.length>0){let h={};MX in n.valueBlock.value[0]&&n.valueBlock.value[0].local?h=e:h=t,typeof h[n.valueBlock.value[0].name]>"u"&&(h[n.valueBlock.value[0].name]=[]),h[n.valueBlock.value[0].name].push(e.valueBlock.value[u])}}else if(a=qo(t,e.valueBlock.value[u-i],n.valueBlock.value[u]),a.verified===!1)if(n.valueBlock.value[u].optional)i++;else return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,lr),n.name&&delete t[n.name]),a;if(a.verified===!1){const u={verified:!1,result:t};return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,lr),n.name&&(delete t[n.name],u.name=n.name)),u}return{verified:!0,result:t}}if(n.primitiveSchema&&$T in e.valueBlock){const i=Ph(e.valueBlock.valueHexView);if(i.offset===-1){const a={verified:!1,result:i.result};return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,lr),n.name&&(delete t[n.name],a.name=n.name)),a}return qo(t,i.result,n.primitiveSchema)}return{verified:!0,result:t}}function $X(t,e){if(!(e instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};const n=Ph(Be.toUint8Array(t));return n.offset===-1?{verified:!1,result:n.result}:qo(n.result,n.result,e)}const DL=Object.freeze(Object.defineProperty({__proto__:null,Any:yc,BaseBlock:Cs,BaseStringBlock:vN,BitString:ac,BmpString:ob,Boolean:rb,CharacterString:gb,Choice:AN,Constructed:qs,DATE:SN,DateTime:CN,Duration:NN,EndOfContent:bN,Enumerated:ib,GeneralString:mb,GeneralizedTime:yb,GraphicString:pb,HexBlock:da,IA5String:fb,Integer:Bh,Null:gc,NumericString:cb,ObjectIdentifier:ab,OctetString:ic,Primitive:um,PrintableString:ub,RawData:BX,RelativeObjectIdentifier:wN,Repeated:Fy,Sequence:Ni,Set:Qi,TIME:EN,TeletexString:hb,TimeOfDay:kN,UTCTime:dm,UniversalString:lb,Utf8String:ro,ValueBlock:Ys,VideotexString:db,ViewWriter:nb,VisibleString:hm,compareSchema:qo,fromBER:nh,verifySchema:$X},Symbol.toStringTag,{value:"Module"}));var _e;(function(t){t[t.Sequence=0]="Sequence",t[t.Set=1]="Set",t[t.Choice=2]="Choice"})(_e||(_e={}));var se;(function(t){t[t.Any=1]="Any",t[t.Boolean=2]="Boolean",t[t.OctetString=3]="OctetString",t[t.BitString=4]="BitString",t[t.Integer=5]="Integer",t[t.Enumerated=6]="Enumerated",t[t.ObjectIdentifier=7]="ObjectIdentifier",t[t.Utf8String=8]="Utf8String",t[t.BmpString=9]="BmpString",t[t.UniversalString=10]="UniversalString",t[t.NumericString=11]="NumericString",t[t.PrintableString=12]="PrintableString",t[t.TeletexString=13]="TeletexString",t[t.VideotexString=14]="VideotexString",t[t.IA5String=15]="IA5String",t[t.GraphicString=16]="GraphicString",t[t.VisibleString=17]="VisibleString",t[t.GeneralString=18]="GeneralString",t[t.CharacterString=19]="CharacterString",t[t.UTCTime=20]="UTCTime",t[t.GeneralizedTime=21]="GeneralizedTime",t[t.DATE=22]="DATE",t[t.TimeOfDay=23]="TimeOfDay",t[t.DateTime=24]="DateTime",t[t.Duration=25]="Duration",t[t.TIME=26]="TIME",t[t.Null=27]="Null"})(se||(se={}));class vb{constructor(e,n=0){if(this.unusedBits=0,this.value=new ArrayBuffer(0),e)if(typeof e=="number")this.fromNumber(e);else if(Be.isBufferSource(e))this.unusedBits=n,this.value=Be.toArrayBuffer(e);else throw TypeError("Unsupported type of 'params' argument for BitString")}fromASN(e){if(!(e instanceof ac))throw new TypeError("Argument 'asn' is not instance of ASN.1 BitString");return this.unusedBits=e.valueBlock.unusedBits,this.value=e.valueBlock.valueHex,this}toASN(){return new ac({unusedBits:this.unusedBits,valueHex:this.value})}toSchema(e){return new ac({name:e})}toNumber(){let e="";const n=new Uint8Array(this.value);for(const s of n)e+=s.toString(2).padStart(8,"0");return e=e.split("").reverse().join(""),this.unusedBits&&(e=e.slice(this.unusedBits).padStart(this.unusedBits,"0")),parseInt(e,2)}fromNumber(e){let n=e.toString(2);const s=n.length+7>>3;this.unusedBits=(s<<3)-n.length;const r=new Uint8Array(s);n=n.padStart(s<<3,"0").split("").reverse().join("");let i=0;for(;i<s;)r[i]=parseInt(n.slice(i<<3,(i<<3)+8),2),i++;this.value=r.buffer}}class qt{get byteLength(){return this.buffer.byteLength}get byteOffset(){return 0}constructor(e){typeof e=="number"?this.buffer=new ArrayBuffer(e):Be.isBufferSource(e)?this.buffer=Be.toArrayBuffer(e):Array.isArray(e)?this.buffer=new Uint8Array(e):this.buffer=new ArrayBuffer(0)}fromASN(e){if(!(e instanceof ic))throw new TypeError("Argument 'asn' is not instance of ASN.1 OctetString");return this.buffer=e.valueBlock.valueHex,this}toASN(){return new ic({valueHex:this.buffer})}toSchema(e){return new ic({name:e})}}const zX={fromASN:t=>t instanceof gc?null:t.valueBeforeDecodeView,toASN:t=>{if(t===null)return new gc;const e=nh(t);if(e.result.error)throw new Error(e.result.error);return e.result}},FX={fromASN:t=>t.valueBlock.valueHexView.byteLength>=4?t.valueBlock.toString():t.valueBlock.valueDec,toASN:t=>new Bh({value:+t})},UX={fromASN:t=>t.valueBlock.valueDec,toASN:t=>new ib({value:t})},gn={fromASN:t=>t.valueBlock.valueHexView,toASN:t=>new Bh({valueHex:t})},HX={fromASN:t=>t.valueBlock.valueHexView,toASN:t=>new ac({valueHex:t})},VX={fromASN:t=>t.valueBlock.toString(),toASN:t=>new ab({value:t})},qX={fromASN:t=>t.valueBlock.value,toASN:t=>new rb({value:t})},Uy={fromASN:t=>t.valueBlock.valueHexView,toASN:t=>new ic({valueHex:t})},KX={fromASN:t=>new qt(t.getValue()),toASN:t=>t.toASN()};function yi(t){return{fromASN:e=>e.valueBlock.value,toASN:e=>new t({value:e})}}const LL=yi(ro),WX=yi(ob),GX=yi(lb),YX=yi(cb),ZX=yi(ub),JX=yi(hb),XX=yi(db),QX=yi(fb),eQ=yi(pb),tQ=yi(hm),nQ=yi(mb),sQ=yi(gb),rQ={fromASN:t=>t.toDate(),toASN:t=>new dm({valueDate:t})},iQ={fromASN:t=>t.toDate(),toASN:t=>new yb({valueDate:t})},aQ={fromASN:()=>null,toASN:()=>new gc};function lp(t){switch(t){case se.Any:return zX;case se.BitString:return HX;case se.BmpString:return WX;case se.Boolean:return qX;case se.CharacterString:return sQ;case se.Enumerated:return UX;case se.GeneralString:return nQ;case se.GeneralizedTime:return iQ;case se.GraphicString:return eQ;case se.IA5String:return QX;case se.Integer:return FX;case se.Null:return aQ;case se.NumericString:return YX;case se.ObjectIdentifier:return VX;case se.OctetString:return Uy;case se.PrintableString:return ZX;case se.TeletexString:return JX;case se.UTCTime:return rQ;case se.UniversalString:return GX;case se.Utf8String:return LL;case se.VideotexString:return XX;case se.VisibleString:return tQ;default:return null}}function Ua(t){return typeof t=="function"&&t.prototype?t.prototype.toASN&&t.prototype.fromASN?!0:Ua(t.prototype):!!(t&&typeof t=="object"&&"toASN"in t&&"fromASN"in t)}function PL(t){var e;if(t){const n=Object.getPrototypeOf(t);return((e=n?.prototype)===null||e===void 0?void 0:e.constructor)===Array?!0:PL(n)}return!1}function oQ(t,e){if(!(t&&e)||t.byteLength!==e.byteLength)return!1;const n=new Uint8Array(t),s=new Uint8Array(e);for(let r=0;r<t.byteLength;r++)if(n[r]!==s[r])return!1;return!0}class lQ{constructor(){this.items=new WeakMap}has(e){return this.items.has(e)}get(e,n=!1){const s=this.items.get(e);if(!s)throw new Error(`Cannot get schema for '${e.prototype.constructor.name}' target`);if(n&&!s.schema)throw new Error(`Schema '${e.prototype.constructor.name}' doesn't contain ASN.1 schema. Call 'AsnSchemaStorage.cache'.`);return s}cache(e){const n=this.get(e);n.schema||(n.schema=this.create(e,!0))}createDefault(e){const n={type:_e.Sequence,items:{}},s=this.findParentSchema(e);return s&&(Object.assign(n,s),n.items=Object.assign({},n.items,s.items)),n}create(e,n){const s=this.items.get(e)||this.createDefault(e),r=[];for(const i in s.items){const a=s.items[i],l=n?i:"";let u;if(typeof a.type=="number"){const m=se[a.type],p=DL[m];if(!p)throw new Error(`Cannot get ASN1 class by name '${m}'`);u=new p({name:l})}else Ua(a.type)?u=new a.type().toSchema(l):a.optional?this.get(a.type).type===_e.Choice?u=new yc({name:l}):(u=this.create(a.type,!1),u.name=l):u=new yc({name:l});const h=!!a.optional||a.defaultValue!==void 0;if(a.repeated){u.name="";const m=a.repeated==="set"?Qi:Ni;u=new m({name:"",value:[new Fy({name:l,value:u})]})}if(a.context!==null&&a.context!==void 0)if(a.implicit)if(typeof a.type=="number"||Ua(a.type)){const m=a.repeated?qs:um;r.push(new m({name:l,optional:h,idBlock:{tagClass:3,tagNumber:a.context}}))}else{this.cache(a.type);const m=!!a.repeated;let p=m?u:this.get(a.type,!0).schema;p="valueBlock"in p?p.valueBlock.value:p.value,r.push(new qs({name:m?"":l,optional:h,idBlock:{tagClass:3,tagNumber:a.context},value:p}))}else r.push(new qs({optional:h,idBlock:{tagClass:3,tagNumber:a.context},value:[u]}));else u.optional=h,r.push(u)}switch(s.type){case _e.Sequence:return new Ni({value:r,name:""});case _e.Set:return new Qi({value:r,name:""});case _e.Choice:return new AN({value:r,name:""});default:throw new Error("Unsupported ASN1 type in use")}}set(e,n){return this.items.set(e,n),this}findParentSchema(e){const n=Object.getPrototypeOf(e);return n?this.items.get(n)||this.findParentSchema(n):null}}const vs=new lQ,Ne=t=>e=>{let n;vs.has(e)?n=vs.get(e):(n=vs.createDefault(e),vs.set(e,n)),Object.assign(n,t)},q=t=>(e,n)=>{let s;vs.has(e.constructor)?s=vs.get(e.constructor):(s=vs.createDefault(e.constructor),vs.set(e.constructor,s));const r=Object.assign({},t);if(typeof r.type=="number"&&!r.converter){const i=lp(t.type);if(!i)throw new Error(`Cannot get default converter for property '${n}' of ${e.constructor.name}`);r.converter=i}r.raw=t.raw,s.items[n]=r};class tf extends Error{constructor(){super(...arguments),this.schemas=[]}}class cQ{static parse(e,n){const s=nh(e);if(s.result.error)throw new Error(s.result.error);return this.fromASN(s.result,n)}static fromASN(e,n){try{if(Ua(n))return new n().fromASN(e);const s=vs.get(n);vs.cache(n);let r=s.schema;const i=this.handleChoiceTypes(e,s,n,r);if(i?.result)return i.result;i?.targetSchema&&(r=i.targetSchema);const a=this.handleSequenceTypes(e,s,n,r),l=new n;return PL(n)?this.handleArrayTypes(e,s,n):(this.processSchemaItems(s,a,l),l)}catch(s){throw s instanceof tf&&s.schemas.push(n.name),s}}static handleChoiceTypes(e,n,s,r){if(e.constructor===qs&&n.type===_e.Choice&&e.idBlock.tagClass===3)for(const i in n.items){const a=n.items[i];if(a.context===e.idBlock.tagNumber&&a.implicit&&typeof a.type=="function"&&vs.has(a.type)){const l=vs.get(a.type);if(l&&l.type===_e.Sequence){const u=new Ni;if("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)&&"value"in u.valueBlock){u.valueBlock.value=e.valueBlock.value;const h=this.fromASN(u,a.type),m=new s;return m[i]=h,{result:m}}}}}else if(e.constructor===qs&&n.type!==_e.Choice){const i=new qs({idBlock:{tagClass:3,tagNumber:e.idBlock.tagNumber},value:n.schema.valueBlock.value});for(const a in n.items)delete e[a];return{targetSchema:i}}return null}static handleSequenceTypes(e,n,s,r){if(n.type===_e.Sequence){const i=qo({},e,r);if(!i.verified)throw new tf(`Data does not match to ${s.name} ASN1 schema.${i.result.error?` ${i.result.error}`:""}`);return i}else{const i=qo({},e,r);if(!i.verified)throw new tf(`Data does not match to ${s.name} ASN1 schema.${i.result.error?` ${i.result.error}`:""}`);return i}}static processRepeatedField(e,n,s){let r=e.slice(n);if(r.length===1&&r[0].constructor.name==="Sequence"){const i=r[0];i.valueBlock&&i.valueBlock.value&&Array.isArray(i.valueBlock.value)&&(r=i.valueBlock.value)}if(typeof s.type=="number"){const i=lp(s.type);if(!i)throw new Error(`No converter for ASN.1 type ${s.type}`);return r.filter(a=>a&&a.valueBlock).map(a=>{try{return i.fromASN(a)}catch{return}}).filter(a=>a!==void 0)}else return r.filter(i=>i&&i.valueBlock).map(i=>{try{return this.fromASN(i,s.type)}catch{return}}).filter(i=>i!==void 0)}static processPrimitiveField(e,n){const s=lp(n.type);if(!s)throw new Error(`No converter for ASN.1 type ${n.type}`);return s.fromASN(e)}static isOptionalChoiceField(e){return e.optional&&typeof e.type=="function"&&vs.has(e.type)&&vs.get(e.type).type===_e.Choice}static processOptionalChoiceField(e,n){try{return{processed:!0,value:this.fromASN(e,n.type)}}catch(s){if(s instanceof tf&&/Wrong values for Choice type/.test(s.message))return{processed:!1};throw s}}static handleArrayTypes(e,n,s){if(!("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)))throw new Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");const r=n.itemType;if(typeof r=="number"){const i=lp(r);if(!i)throw new Error(`Cannot get default converter for array item of ${s.name} ASN1 schema`);return s.from(e.valueBlock.value,a=>i.fromASN(a))}else return s.from(e.valueBlock.value,i=>this.fromASN(i,r))}static processSchemaItems(e,n,s){for(const r in e.items){const i=n.result[r];if(!i)continue;const a=e.items[r],l=a.type;let u;typeof l=="number"||Ua(l)?u=this.processPrimitiveSchemaItem(i,a,l):u=this.processComplexSchemaItem(i,a,l),u&&typeof u=="object"&&"value"in u&&"raw"in u?(s[r]=u.value,s[`${r}Raw`]=u.raw):s[r]=u}}static processPrimitiveSchemaItem(e,n,s){var r;const i=(r=n.converter)!==null&&r!==void 0?r:Ua(s)?new s:null;if(!i)throw new Error("Converter is empty");return n.repeated?this.processRepeatedPrimitiveItem(e,n,i):this.processSinglePrimitiveItem(e,n,s,i)}static processRepeatedPrimitiveItem(e,n,s){if(n.implicit){const r=n.repeated==="sequence"?Ni:Qi,i=new r;i.valueBlock=e.valueBlock;const a=nh(i.toBER(!1));if(a.offset===-1)throw new Error(`Cannot parse the child item. ${a.result.error}`);if(!("value"in a.result.valueBlock&&Array.isArray(a.result.valueBlock.value)))throw new Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");const l=a.result.valueBlock.value;return Array.from(l,u=>s.fromASN(u))}else return Array.from(e,r=>s.fromASN(r))}static processSinglePrimitiveItem(e,n,s,r){let i=e;if(n.implicit){let a;if(Ua(s))a=new s().toSchema("");else{const l=se[s],u=DL[l];if(!u)throw new Error(`Cannot get '${l}' class from asn1js module`);a=new u}a.valueBlock=i.valueBlock,i=nh(a.toBER(!1)).result}return r.fromASN(i)}static processComplexSchemaItem(e,n,s){if(n.repeated){if(!Array.isArray(e))throw new Error("Cannot get list of items from the ASN.1 parsed value. ASN.1 value should be iterable.");return Array.from(e,r=>this.fromASN(r,s))}else{const r=this.handleImplicitTagging(e,n,s);if(this.isOptionalChoiceField(n))try{return this.fromASN(r,s)}catch(i){if(i instanceof tf&&/Wrong values for Choice type/.test(i.message))return;throw i}else{const i=this.fromASN(r,s);return n.raw?{value:i,raw:e.valueBeforeDecodeView}:i}}}static handleImplicitTagging(e,n,s){if(n.implicit&&typeof n.context=="number"){const r=vs.get(s);if(r.type===_e.Sequence){const i=new Ni;if("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)&&"value"in i.valueBlock)return i.valueBlock.value=e.valueBlock.value,i}else if(r.type===_e.Set){const i=new Qi;if("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)&&"value"in i.valueBlock)return i.valueBlock.value=e.valueBlock.value,i}}return e}}class RN{static serialize(e){return e instanceof Cs?e.toBER(!1):this.toASN(e).toBER(!1)}static toASN(e){if(e&&typeof e=="object"&&Ua(e))return e.toASN();if(!(e&&typeof e=="object"))throw new TypeError("Parameter 1 should be type of Object.");const n=e.constructor,s=vs.get(n);vs.cache(n);let r=[];if(s.itemType){if(!Array.isArray(e))throw new TypeError("Parameter 1 should be type of Array.");if(typeof s.itemType=="number"){const a=lp(s.itemType);if(!a)throw new Error(`Cannot get default converter for array item of ${n.name} ASN1 schema`);r=e.map(l=>a.toASN(l))}else r=e.map(a=>this.toAsnItem({type:s.itemType},"[]",n,a))}else for(const a in s.items){const l=s.items[a],u=e[a];if(u===void 0||l.defaultValue===u||typeof l.defaultValue=="object"&&typeof u=="object"&&oQ(this.serialize(l.defaultValue),this.serialize(u)))continue;const h=RN.toAsnItem(l,a,n,u);if(typeof l.context=="number")if(l.implicit)if(!l.repeated&&(typeof l.type=="number"||Ua(l.type))){const m={};m.valueHex=h instanceof gc?h.valueBeforeDecodeView:h.valueBlock.toBER(),r.push(new um({optional:l.optional,idBlock:{tagClass:3,tagNumber:l.context},...m}))}else r.push(new qs({optional:l.optional,idBlock:{tagClass:3,tagNumber:l.context},value:h.valueBlock.value}));else r.push(new qs({optional:l.optional,idBlock:{tagClass:3,tagNumber:l.context},value:[h]}));else l.repeated?r=r.concat(h):r.push(h)}let i;switch(s.type){case _e.Sequence:i=new Ni({value:r});break;case _e.Set:i=new Qi({value:r});break;case _e.Choice:if(!r[0])throw new Error(`Schema '${n.name}' has wrong data. Choice cannot be empty.`);i=r[0];break}return i}static toAsnItem(e,n,s,r){let i;if(typeof e.type=="number"){const a=e.converter;if(!a)throw new Error(`Property '${n}' doesn't have converter for type ${se[e.type]} in schema '${s.name}'`);if(e.repeated){if(!Array.isArray(r))throw new TypeError("Parameter 'objProp' should be type of Array.");const l=Array.from(r,h=>a.toASN(h)),u=e.repeated==="sequence"?Ni:Qi;i=new u({value:l})}else i=a.toASN(r)}else if(e.repeated){if(!Array.isArray(r))throw new TypeError("Parameter 'objProp' should be type of Array.");const a=Array.from(r,u=>this.toASN(u)),l=e.repeated==="sequence"?Ni:Qi;i=new l({value:a})}else i=this.toASN(r);return i}}class Jt extends Array{constructor(e=[]){if(typeof e=="number")super(e);else{super();for(const n of e)this.push(n)}}}class He{static serialize(e){return RN.serialize(e)}static parse(e,n){return cQ.parse(e,n)}static toString(e){const n=Be.isBufferSource(e)?Be.toArrayBuffer(e):He.serialize(e),s=nh(n);if(s.offset===-1)throw new Error(`Cannot decode ASN.1 data. ${s.result.error}`);return s.result.toString()}}function D(t,e,n,s){var r=arguments.length,i=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,n):s,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,s);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i}function Et(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)}function vn(t,e,n,s,r){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?r.call(t,n):r?r.value=n:e.set(t,n),n}class FT{static isIPv4(e){return/^(\d{1,3}\.){3}\d{1,3}$/.test(e)}static parseIPv4(e){const n=e.split(".");if(n.length!==4)throw new Error("Invalid IPv4 address");return n.map(s=>{const r=parseInt(s,10);if(isNaN(r)||r<0||r>255)throw new Error("Invalid IPv4 address part");return r})}static parseIPv6(e){const s=this.expandIPv6(e).split(":");if(s.length!==8)throw new Error("Invalid IPv6 address");return s.reduce((r,i)=>{const a=parseInt(i,16);if(isNaN(a)||a<0||a>65535)throw new Error("Invalid IPv6 address part");return r.push(a>>8&255),r.push(a&255),r},[])}static expandIPv6(e){if(!e.includes("::"))return e;const n=e.split("::");if(n.length>2)throw new Error("Invalid IPv6 address");const s=n[0]?n[0].split(":"):[],r=n[1]?n[1].split(":"):[],i=8-(s.length+r.length);if(i<0)throw new Error("Invalid IPv6 address");return[...s,...Array(i).fill("0"),...r].join(":")}static formatIPv6(e){const n=[];for(let s=0;s<16;s+=2)n.push((e[s]<<8|e[s+1]).toString(16));return this.compressIPv6(n.join(":"))}static compressIPv6(e){const n=e.split(":");let s=-1,r=0,i=-1,a=0;for(let l=0;l<n.length;l++)n[l]==="0"?(i===-1&&(i=l),a++):(a>r&&(s=i,r=a),i=-1,a=0);if(a>r&&(s=i,r=a),r>1){const l=n.slice(0,s).join(":"),u=n.slice(s+r).join(":");return`${l}::${u}`}return e}static parseCIDR(e){const[n,s]=e.split("/"),r=parseInt(s,10);if(this.isIPv4(n)){if(r<0||r>32)throw new Error("Invalid IPv4 prefix length");return[this.parseIPv4(n),r]}else{if(r<0||r>128)throw new Error("Invalid IPv6 prefix length");return[this.parseIPv6(n),r]}}static decodeIP(e){if(e.length===64&&parseInt(e,16)===0)return"::/0";if(e.length!==16)return e;const n=parseInt(e.slice(8),16).toString(2).split("").reduce((r,i)=>r+ +i,0);let s=e.slice(0,8).replace(/(.{2})/g,r=>`${parseInt(r,16)}.`);return s=s.slice(0,-1),`${s}/${n}`}static toString(e){const n=new Uint8Array(e);if(n.length===4)return Array.from(n).join(".");if(n.length===16)return this.formatIPv6(n);if(n.length===8||n.length===32){const s=n.length/2,r=n.slice(0,s),i=n.slice(s);if(n.every(u=>u===0))return n.length===8?"0.0.0.0/0":"::/0";const l=i.reduce((u,h)=>u+(h.toString(2).match(/1/g)||[]).length,0);return n.length===8?`${Array.from(r).join(".")}/${l}`:`${this.formatIPv6(r)}/${l}`}return this.decodeIP(nt.ToHex(e))}static fromString(e){if(e.includes("/")){const[s,r]=this.parseCIDR(e),i=new Uint8Array(s.length);let a=r;for(let u=0;u<i.length;u++)a>=8?(i[u]=255,a-=8):a>0&&(i[u]=255<<8-a,a=0);const l=new Uint8Array(s.length*2);return l.set(s,0),l.set(i,s.length),l.buffer}const n=this.isIPv4(e)?this.parseIPv4(e):this.parseIPv6(e);return new Uint8Array(n).buffer}}var ZS,JS,XS;let Ns=class{constructor(e={}){Object.assign(this,e)}toString(){return this.bmpString||this.printableString||this.teletexString||this.universalString||this.utf8String||""}};D([q({type:se.TeletexString})],Ns.prototype,"teletexString",void 0);D([q({type:se.PrintableString})],Ns.prototype,"printableString",void 0);D([q({type:se.UniversalString})],Ns.prototype,"universalString",void 0);D([q({type:se.Utf8String})],Ns.prototype,"utf8String",void 0);D([q({type:se.BmpString})],Ns.prototype,"bmpString",void 0);Ns=D([Ne({type:_e.Choice})],Ns);let dh=class extends Ns{constructor(e={}){super(e),Object.assign(this,e)}toString(){return this.ia5String||(this.anyValue?nt.ToHex(this.anyValue):super.toString())}};D([q({type:se.IA5String})],dh.prototype,"ia5String",void 0);D([q({type:se.Any})],dh.prototype,"anyValue",void 0);dh=D([Ne({type:_e.Choice})],dh);class bb{constructor(e={}){this.type="",this.value=new dh,Object.assign(this,e)}}D([q({type:se.ObjectIdentifier})],bb.prototype,"type",void 0);D([q({type:dh})],bb.prototype,"value",void 0);let fh=ZS=class extends Jt{constructor(e){super(e),Object.setPrototypeOf(this,ZS.prototype)}};fh=ZS=D([Ne({type:_e.Set,itemType:bb})],fh);let QS=JS=class extends Jt{constructor(e){super(e),Object.setPrototypeOf(this,JS.prototype)}};QS=JS=D([Ne({type:_e.Sequence,itemType:fh})],QS);let Qn=XS=class extends QS{constructor(e){super(e),Object.setPrototypeOf(this,XS.prototype)}};Qn=XS=D([Ne({type:_e.Sequence})],Qn);const uQ={fromASN:t=>FT.toString(Uy.fromASN(t)),toASN:t=>Uy.toASN(FT.fromString(t))};class Pp{constructor(e={}){this.typeId="",this.value=new ArrayBuffer(0),Object.assign(this,e)}}D([q({type:se.ObjectIdentifier})],Pp.prototype,"typeId",void 0);D([q({type:se.Any,context:0})],Pp.prototype,"value",void 0);class TN{constructor(e={}){this.partyName=new Ns,Object.assign(this,e)}}D([q({type:Ns,optional:!0,context:0,implicit:!0})],TN.prototype,"nameAssigner",void 0);D([q({type:Ns,context:1,implicit:!0})],TN.prototype,"partyName",void 0);let kt=class{constructor(e={}){Object.assign(this,e)}};D([q({type:Pp,context:0,implicit:!0})],kt.prototype,"otherName",void 0);D([q({type:se.IA5String,context:1,implicit:!0})],kt.prototype,"rfc822Name",void 0);D([q({type:se.IA5String,context:2,implicit:!0})],kt.prototype,"dNSName",void 0);D([q({type:se.Any,context:3,implicit:!0})],kt.prototype,"x400Address",void 0);D([q({type:Qn,context:4,implicit:!1})],kt.prototype,"directoryName",void 0);D([q({type:TN,context:5})],kt.prototype,"ediPartyName",void 0);D([q({type:se.IA5String,context:6,implicit:!0})],kt.prototype,"uniformResourceIdentifier",void 0);D([q({type:se.OctetString,context:7,implicit:!0,converter:uQ})],kt.prototype,"iPAddress",void 0);D([q({type:se.ObjectIdentifier,context:8,implicit:!0})],kt.prototype,"registeredID",void 0);kt=D([Ne({type:_e.Choice})],kt);const jN="1.3.6.1.5.5.7",hQ=`${jN}.1`,$h=`${jN}.3`,_b=`${jN}.48`,UT=`${_b}.1`,HT=`${_b}.2`,VT=`${_b}.3`,qT=`${_b}.5`,io="2.5.29";var ek;const tk=`${hQ}.1`;class fm{constructor(e={}){this.accessMethod="",this.accessLocation=new kt,Object.assign(this,e)}}D([q({type:se.ObjectIdentifier})],fm.prototype,"accessMethod",void 0);D([q({type:kt})],fm.prototype,"accessLocation",void 0);let qu=ek=class extends Jt{constructor(e){super(e),Object.setPrototypeOf(this,ek.prototype)}};qu=ek=D([Ne({type:_e.Sequence,itemType:fm})],qu);const nk=`${io}.35`;class ON extends qt{}class Yl{constructor(e={}){e&&Object.assign(this,e)}}D([q({type:ON,context:0,optional:!0,implicit:!0})],Yl.prototype,"keyIdentifier",void 0);D([q({type:kt,context:1,optional:!0,implicit:!0,repeated:"sequence"})],Yl.prototype,"authorityCertIssuer",void 0);D([q({type:se.Integer,context:2,optional:!0,implicit:!0,converter:gn})],Yl.prototype,"authorityCertSerialNumber",void 0);const BL=`${io}.19`;class Hy{constructor(e={}){this.cA=!1,Object.assign(this,e)}}D([q({type:se.Boolean,defaultValue:!1})],Hy.prototype,"cA",void 0);D([q({type:se.Integer,optional:!0})],Hy.prototype,"pathLenConstraint",void 0);var sk;let Ds=sk=class extends Jt{constructor(e){super(e),Object.setPrototypeOf(this,sk.prototype)}};Ds=sk=D([Ne({type:_e.Sequence,itemType:kt})],Ds);var rk;let KT=rk=class extends Ds{constructor(e){super(e),Object.setPrototypeOf(this,rk.prototype)}};KT=rk=D([Ne({type:_e.Sequence})],KT);var ik;const $L=`${io}.32`;let Ya=class{constructor(e={}){Object.assign(this,e)}toString(){return this.ia5String||this.visibleString||this.bmpString||this.utf8String||""}};D([q({type:se.IA5String})],Ya.prototype,"ia5String",void 0);D([q({type:se.VisibleString})],Ya.prototype,"visibleString",void 0);D([q({type:se.BmpString})],Ya.prototype,"bmpString",void 0);D([q({type:se.Utf8String})],Ya.prototype,"utf8String",void 0);Ya=D([Ne({type:_e.Choice})],Ya);class MN{constructor(e={}){this.organization=new Ya,this.noticeNumbers=[],Object.assign(this,e)}}D([q({type:Ya})],MN.prototype,"organization",void 0);D([q({type:se.Integer,repeated:"sequence"})],MN.prototype,"noticeNumbers",void 0);class IN{constructor(e={}){Object.assign(this,e)}}D([q({type:MN,optional:!0})],IN.prototype,"noticeRef",void 0);D([q({type:Ya,optional:!0})],IN.prototype,"explicitText",void 0);let Vy=class{constructor(e={}){Object.assign(this,e)}};D([q({type:se.IA5String})],Vy.prototype,"cPSuri",void 0);D([q({type:IN})],Vy.prototype,"userNotice",void 0);Vy=D([Ne({type:_e.Choice})],Vy);class DN{constructor(e={}){this.policyQualifierId="",this.qualifier=new ArrayBuffer(0),Object.assign(this,e)}}D([q({type:se.ObjectIdentifier})],DN.prototype,"policyQualifierId",void 0);D([q({type:se.Any})],DN.prototype,"qualifier",void 0);class xb{constructor(e={}){this.policyIdentifier="",Object.assign(this,e)}}D([q({type:se.ObjectIdentifier})],xb.prototype,"policyIdentifier",void 0);D([q({type:DN,repeated:"sequence",optional:!0})],xb.prototype,"policyQualifiers",void 0);let qy=ik=class extends Jt{constructor(e){super(e),Object.setPrototypeOf(this,ik.prototype)}};qy=ik=D([Ne({type:_e.Sequence,itemType:xb})],qy);let Ky=class{constructor(e=0){this.value=e}};D([q({type:se.Integer})],Ky.prototype,"value",void 0);Ky=D([Ne({type:_e.Choice})],Ky);let WT=class extends Ky{};WT=D([Ne({type:_e.Choice})],WT);var ak;const ok=`${io}.31`;var Si;(function(t){t[t.unused=1]="unused",t[t.keyCompromise=2]="keyCompromise",t[t.cACompromise=4]="cACompromise",t[t.affiliationChanged=8]="affiliationChanged",t[t.superseded=16]="superseded",t[t.cessationOfOperation=32]="cessationOfOperation",t[t.certificateHold=64]="certificateHold",t[t.privilegeWithdrawn=128]="privilegeWithdrawn",t[t.aACompromise=256]="aACompromise"})(Si||(Si={}));class zL extends vb{toJSON(){const e=[],n=this.toNumber();return n&Si.aACompromise&&e.push("aACompromise"),n&Si.affiliationChanged&&e.push("affiliationChanged"),n&Si.cACompromise&&e.push("cACompromise"),n&Si.certificateHold&&e.push("certificateHold"),n&Si.cessationOfOperation&&e.push("cessationOfOperation"),n&Si.keyCompromise&&e.push("keyCompromise"),n&Si.privilegeWithdrawn&&e.push("privilegeWithdrawn"),n&Si.superseded&&e.push("superseded"),n&Si.unused&&e.push("unused"),e}toString(){return`[${this.toJSON().join(", ")}]`}}let vc=class{constructor(e={}){Object.assign(this,e)}};D([q({type:kt,context:0,repeated:"sequence",implicit:!0})],vc.prototype,"fullName",void 0);D([q({type:fh,context:1,implicit:!0})],vc.prototype,"nameRelativeToCRLIssuer",void 0);vc=D([Ne({type:_e.Choice})],vc);class zh{constructor(e={}){Object.assign(this,e)}}D([q({type:vc,context:0,optional:!0})],zh.prototype,"distributionPoint",void 0);D([q({type:zL,context:1,optional:!0,implicit:!0})],zh.prototype,"reasons",void 0);D([q({type:kt,context:2,optional:!0,repeated:"sequence",implicit:!0})],zh.prototype,"cRLIssuer",void 0);let sh=ak=class extends Jt{constructor(e){super(e),Object.setPrototypeOf(this,ak.prototype)}};sh=ak=D([Ne({type:_e.Sequence,itemType:zh})],sh);var lk;let GT=lk=class extends sh{constructor(e){super(e),Object.setPrototypeOf(this,lk.prototype)}};GT=lk=D([Ne({type:_e.Sequence,itemType:zh})],GT);class Os{constructor(e={}){this.onlyContainsUserCerts=Os.ONLY,this.onlyContainsCACerts=Os.ONLY,this.indirectCRL=Os.ONLY,this.onlyContainsAttributeCerts=Os.ONLY,Object.assign(this,e)}}Os.ONLY=!1;D([q({type:vc,context:0,optional:!0})],Os.prototype,"distributionPoint",void 0);D([q({type:se.Boolean,context:1,defaultValue:Os.ONLY,implicit:!0})],Os.prototype,"onlyContainsUserCerts",void 0);D([q({type:se.Boolean,context:2,defaultValue:Os.ONLY,implicit:!0})],Os.prototype,"onlyContainsCACerts",void 0);D([q({type:zL,context:3,optional:!0,implicit:!0})],Os.prototype,"onlySomeReasons",void 0);D([q({type:se.Boolean,context:4,defaultValue:Os.ONLY,implicit:!0})],Os.prototype,"indirectCRL",void 0);D([q({type:se.Boolean,context:5,defaultValue:Os.ONLY,implicit:!0})],Os.prototype,"onlyContainsAttributeCerts",void 0);var cp;(function(t){t[t.unspecified=0]="unspecified",t[t.keyCompromise=1]="keyCompromise",t[t.cACompromise=2]="cACompromise",t[t.affiliationChanged=3]="affiliationChanged",t[t.superseded=4]="superseded",t[t.cessationOfOperation=5]="cessationOfOperation",t[t.certificateHold=6]="certificateHold",t[t.removeFromCRL=8]="removeFromCRL",t[t.privilegeWithdrawn=9]="privilegeWithdrawn",t[t.aACompromise=10]="aACompromise"})(cp||(cp={}));let ck=class{constructor(e=cp.unspecified){this.reason=cp.unspecified,this.reason=e}toJSON(){return cp[this.reason]}toString(){return this.toJSON()}};D([q({type:se.Enumerated})],ck.prototype,"reason",void 0);ck=D([Ne({type:_e.Choice})],ck);var uk;const FL=`${io}.37`;let Wy=uk=class extends Jt{constructor(e){super(e),Object.setPrototypeOf(this,uk.prototype)}};Wy=uk=D([Ne({type:_e.Sequence,itemType:se.ObjectIdentifier})],Wy);const dQ=`${$h}.1`,fQ=`${$h}.2`,pQ=`${$h}.3`,mQ=`${$h}.4`,gQ=`${$h}.8`,yQ=`${$h}.9`;let hk=class{constructor(e=new ArrayBuffer(0)){this.value=e}};D([q({type:se.Integer,converter:gn})],hk.prototype,"value",void 0);hk=D([Ne({type:_e.Choice})],hk);let dk=class{constructor(e){this.value=new Date,e&&(this.value=e)}};D([q({type:se.GeneralizedTime})],dk.prototype,"value",void 0);dk=D([Ne({type:_e.Choice})],dk);var fk;const UL=`${io}.18`;let YT=fk=class extends Ds{constructor(e){super(e),Object.setPrototypeOf(this,fk.prototype)}};YT=fk=D([Ne({type:_e.Sequence})],YT);const HL=`${io}.15`;var ki;(function(t){t[t.digitalSignature=1]="digitalSignature",t[t.nonRepudiation=2]="nonRepudiation",t[t.keyEncipherment=4]="keyEncipherment",t[t.dataEncipherment=8]="dataEncipherment",t[t.keyAgreement=16]="keyAgreement",t[t.keyCertSign=32]="keyCertSign",t[t.cRLSign=64]="cRLSign",t[t.encipherOnly=128]="encipherOnly",t[t.decipherOnly=256]="decipherOnly"})(ki||(ki={}));class ow extends vb{toJSON(){const e=this.toNumber(),n=[];return e&ki.cRLSign&&n.push("crlSign"),e&ki.dataEncipherment&&n.push("dataEncipherment"),e&ki.decipherOnly&&n.push("decipherOnly"),e&ki.digitalSignature&&n.push("digitalSignature"),e&ki.encipherOnly&&n.push("encipherOnly"),e&ki.keyAgreement&&n.push("keyAgreement"),e&ki.keyCertSign&&n.push("keyCertSign"),e&ki.keyEncipherment&&n.push("keyEncipherment"),e&ki.nonRepudiation&&n.push("nonRepudiation"),n}toString(){return`[${this.toJSON().join(", ")}]`}}var pk;class wb{constructor(e={}){this.base=new kt,this.minimum=0,Object.assign(this,e)}}D([q({type:kt})],wb.prototype,"base",void 0);D([q({type:se.Integer,context:0,defaultValue:0,implicit:!0})],wb.prototype,"minimum",void 0);D([q({type:se.Integer,context:1,optional:!0,implicit:!0})],wb.prototype,"maximum",void 0);let Gy=pk=class extends Jt{constructor(e){super(e),Object.setPrototypeOf(this,pk.prototype)}};Gy=pk=D([Ne({type:_e.Sequence,itemType:wb})],Gy);class VL{constructor(e={}){Object.assign(this,e)}}D([q({type:Gy,context:0,optional:!0,implicit:!0})],VL.prototype,"permittedSubtrees",void 0);D([q({type:Gy,context:1,optional:!0,implicit:!0})],VL.prototype,"excludedSubtrees",void 0);class qL{constructor(e={}){Object.assign(this,e)}}D([q({type:se.Integer,context:0,implicit:!0,optional:!0,converter:gn})],qL.prototype,"requireExplicitPolicy",void 0);D([q({type:se.Integer,context:1,implicit:!0,optional:!0,converter:gn})],qL.prototype,"inhibitPolicyMapping",void 0);var mk;class LN{constructor(e={}){this.issuerDomainPolicy="",this.subjectDomainPolicy="",Object.assign(this,e)}}D([q({type:se.ObjectIdentifier})],LN.prototype,"issuerDomainPolicy",void 0);D([q({type:se.ObjectIdentifier})],LN.prototype,"subjectDomainPolicy",void 0);let ZT=mk=class extends Jt{constructor(e){super(e),Object.setPrototypeOf(this,mk.prototype)}};ZT=mk=D([Ne({type:_e.Sequence,itemType:LN})],ZT);var gk;const KL=`${io}.17`;let yk=gk=class extends Ds{constructor(e){super(e),Object.setPrototypeOf(this,gk.prototype)}};yk=gk=D([Ne({type:_e.Sequence})],yk);let Za=class{constructor(e={}){this.type="",this.values=[],Object.assign(this,e)}};D([q({type:se.ObjectIdentifier})],Za.prototype,"type",void 0);D([q({type:se.Any,repeated:"set"})],Za.prototype,"values",void 0);var vk;let JT=vk=class extends Jt{constructor(e){super(e),Object.setPrototypeOf(this,vk.prototype)}};JT=vk=D([Ne({type:_e.Sequence,itemType:Za})],JT);const WL=`${io}.14`;class sl extends ON{}class GL{constructor(e={}){Object.assign(this,e)}}D([q({type:se.GeneralizedTime,context:0,implicit:!0,optional:!0})],GL.prototype,"notBefore",void 0);D([q({type:se.GeneralizedTime,context:1,implicit:!0,optional:!0})],GL.prototype,"notAfter",void 0);var up;(function(t){t[t.keyUpdateAllowed=1]="keyUpdateAllowed",t[t.newExtensions=2]="newExtensions",t[t.pKIXCertificate=4]="pKIXCertificate"})(up||(up={}));class YL extends vb{toJSON(){const e=[],n=this.toNumber();return n&up.pKIXCertificate&&e.push("pKIXCertificate"),n&up.newExtensions&&e.push("newExtensions"),n&up.keyUpdateAllowed&&e.push("keyUpdateAllowed"),e}toString(){return`[${this.toJSON().join(", ")}]`}}class ZL{constructor(e={}){this.entrustVers="",this.entrustInfoFlags=new YL,Object.assign(this,e)}}D([q({type:se.GeneralString})],ZL.prototype,"entrustVers",void 0);D([q({type:YL})],ZL.prototype,"entrustInfoFlags",void 0);var bk;let XT=bk=class extends Jt{constructor(e){super(e),Object.setPrototypeOf(this,bk.prototype)}};XT=bk=D([Ne({type:_e.Sequence,itemType:fm})],XT);class We{constructor(e={}){this.algorithm="",Object.assign(this,e)}isEqual(e){return e instanceof We&&e.algorithm==this.algorithm&&(e.parameters&&this.parameters&&$D(e.parameters,this.parameters)||e.parameters===this.parameters)}}D([q({type:se.ObjectIdentifier})],We.prototype,"algorithm",void 0);D([q({type:se.Any,optional:!0})],We.prototype,"parameters",void 0);class Gi{constructor(e={}){this.algorithm=new We,this.subjectPublicKey=new ArrayBuffer(0),Object.assign(this,e)}}D([q({type:We})],Gi.prototype,"algorithm",void 0);D([q({type:se.BitString})],Gi.prototype,"subjectPublicKey",void 0);let ws=class{constructor(e){if(e)if(typeof e=="string"||typeof e=="number"||e instanceof Date){const n=new Date(e);n.getUTCFullYear()>2049?this.generalTime=n:this.utcTime=n}else Object.assign(this,e)}getTime(){const e=this.utcTime||this.generalTime;if(!e)throw new Error("Cannot get time from CHOICE object");return e}};D([q({type:se.UTCTime})],ws.prototype,"utcTime",void 0);D([q({type:se.GeneralizedTime})],ws.prototype,"generalTime",void 0);ws=D([Ne({type:_e.Choice})],ws);class Sb{constructor(e){this.notBefore=new ws(new Date),this.notAfter=new ws(new Date),e&&(this.notBefore=new ws(e.notBefore),this.notAfter=new ws(e.notAfter))}}D([q({type:ws})],Sb.prototype,"notBefore",void 0);D([q({type:ws})],Sb.prototype,"notAfter",void 0);var _k;let Ti=class JL{constructor(e={}){this.extnID="",this.critical=JL.CRITICAL,this.extnValue=new qt,Object.assign(this,e)}};Ti.CRITICAL=!1;D([q({type:se.ObjectIdentifier})],Ti.prototype,"extnID",void 0);D([q({type:se.Boolean,defaultValue:Ti.CRITICAL})],Ti.prototype,"critical",void 0);D([q({type:qt})],Ti.prototype,"extnValue",void 0);let bc=_k=class extends Jt{constructor(e){super(e),Object.setPrototypeOf(this,_k.prototype)}};bc=_k=D([Ne({type:_e.Sequence,itemType:Ti})],bc);var ph;(function(t){t[t.v1=0]="v1",t[t.v2=1]="v2",t[t.v3=2]="v3"})(ph||(ph={}));class vi{constructor(e={}){this.version=ph.v1,this.serialNumber=new ArrayBuffer(0),this.signature=new We,this.issuer=new Qn,this.validity=new Sb,this.subject=new Qn,this.subjectPublicKeyInfo=new Gi,Object.assign(this,e)}}D([q({type:se.Integer,context:0,defaultValue:ph.v1})],vi.prototype,"version",void 0);D([q({type:se.Integer,converter:gn})],vi.prototype,"serialNumber",void 0);D([q({type:We})],vi.prototype,"signature",void 0);D([q({type:Qn})],vi.prototype,"issuer",void 0);D([q({type:Sb})],vi.prototype,"validity",void 0);D([q({type:Qn})],vi.prototype,"subject",void 0);D([q({type:Gi})],vi.prototype,"subjectPublicKeyInfo",void 0);D([q({type:se.BitString,context:1,implicit:!0,optional:!0})],vi.prototype,"issuerUniqueID",void 0);D([q({type:se.BitString,context:2,implicit:!0,optional:!0})],vi.prototype,"subjectUniqueID",void 0);D([q({type:bc,context:3,optional:!0})],vi.prototype,"extensions",void 0);class mh{constructor(e={}){this.tbsCertificate=new vi,this.signatureAlgorithm=new We,this.signatureValue=new ArrayBuffer(0),Object.assign(this,e)}}D([q({type:vi,raw:!0})],mh.prototype,"tbsCertificate",void 0);D([q({type:We})],mh.prototype,"signatureAlgorithm",void 0);D([q({type:se.BitString})],mh.prototype,"signatureValue",void 0);class kb{constructor(e={}){this.userCertificate=new ArrayBuffer(0),this.revocationDate=new ws,Object.assign(this,e)}}D([q({type:se.Integer,converter:gn})],kb.prototype,"userCertificate",void 0);D([q({type:ws})],kb.prototype,"revocationDate",void 0);D([q({type:Ti,optional:!0,repeated:"sequence"})],kb.prototype,"crlEntryExtensions",void 0);class ao{constructor(e={}){this.signature=new We,this.issuer=new Qn,this.thisUpdate=new ws,Object.assign(this,e)}}D([q({type:se.Integer,optional:!0})],ao.prototype,"version",void 0);D([q({type:We})],ao.prototype,"signature",void 0);D([q({type:Qn})],ao.prototype,"issuer",void 0);D([q({type:ws})],ao.prototype,"thisUpdate",void 0);D([q({type:ws,optional:!0})],ao.prototype,"nextUpdate",void 0);D([q({type:kb,repeated:"sequence",optional:!0})],ao.prototype,"revokedCertificates",void 0);D([q({type:Ti,optional:!0,context:0,repeated:"sequence"})],ao.prototype,"crlExtensions",void 0);class PN{constructor(e={}){this.tbsCertList=new ao,this.signatureAlgorithm=new We,this.signature=new ArrayBuffer(0),Object.assign(this,e)}}D([q({type:ao,raw:!0})],PN.prototype,"tbsCertList",void 0);D([q({type:We})],PN.prototype,"signatureAlgorithm",void 0);D([q({type:se.BitString})],PN.prototype,"signature",void 0);class Fh{constructor(e={}){this.issuer=new Qn,this.serialNumber=new ArrayBuffer(0),Object.assign(this,e)}}D([q({type:Qn})],Fh.prototype,"issuer",void 0);D([q({type:se.Integer,converter:gn})],Fh.prototype,"serialNumber",void 0);let gh=class{constructor(e={}){Object.assign(this,e)}};D([q({type:sl,context:0,implicit:!0})],gh.prototype,"subjectKeyIdentifier",void 0);D([q({type:Fh})],gh.prototype,"issuerAndSerialNumber",void 0);gh=D([Ne({type:_e.Choice})],gh);var Ja;(function(t){t[t.v0=0]="v0",t[t.v1=1]="v1",t[t.v2=2]="v2",t[t.v3=3]="v3",t[t.v4=4]="v4",t[t.v5=5]="v5"})(Ja||(Ja={}));let Bp=class extends We{};Bp=D([Ne({type:_e.Sequence})],Bp);let Yy=class extends We{};Yy=D([Ne({type:_e.Sequence})],Yy);let ia=class extends We{};ia=D([Ne({type:_e.Sequence})],ia);let Zy=class extends We{};Zy=D([Ne({type:_e.Sequence})],Zy);let QT=class extends We{};QT=D([Ne({type:_e.Sequence})],QT);let xk=class extends We{};xk=D([Ne({type:_e.Sequence})],xk);let Uh=class{constructor(e={}){this.attrType="",this.attrValues=[],Object.assign(this,e)}};D([q({type:se.ObjectIdentifier})],Uh.prototype,"attrType",void 0);D([q({type:se.Any,repeated:"set"})],Uh.prototype,"attrValues",void 0);var wk;class fa{constructor(e={}){this.version=Ja.v0,this.sid=new gh,this.digestAlgorithm=new Bp,this.signatureAlgorithm=new Yy,this.signature=new qt,Object.assign(this,e)}}D([q({type:se.Integer})],fa.prototype,"version",void 0);D([q({type:gh})],fa.prototype,"sid",void 0);D([q({type:Bp})],fa.prototype,"digestAlgorithm",void 0);D([q({type:Uh,repeated:"set",context:0,implicit:!0,optional:!0,raw:!0})],fa.prototype,"signedAttrs",void 0);D([q({type:Yy})],fa.prototype,"signatureAlgorithm",void 0);D([q({type:qt})],fa.prototype,"signature",void 0);D([q({type:Uh,repeated:"set",context:1,implicit:!0,optional:!0})],fa.prototype,"unsignedAttrs",void 0);let Jy=wk=class extends Jt{constructor(e){super(e),Object.setPrototypeOf(this,wk.prototype)}};Jy=wk=D([Ne({type:_e.Set,itemType:fa})],Jy);let ej=class extends fa{};ej=D([Ne({type:_e.Sequence})],ej);let tj=class extends ws{};tj=D([Ne({type:_e.Choice})],tj);class BN{constructor(e={}){this.acIssuer=new kt,this.acSerial=0,this.attrs=[],Object.assign(this,e)}}D([q({type:kt})],BN.prototype,"acIssuer",void 0);D([q({type:se.Integer})],BN.prototype,"acSerial",void 0);D([q({type:Za,repeated:"sequence"})],BN.prototype,"attrs",void 0);var Sk;let Xy=Sk=class extends Jt{constructor(e){super(e),Object.setPrototypeOf(this,Sk.prototype)}};Xy=Sk=D([Ne({type:_e.Sequence,itemType:se.ObjectIdentifier})],Xy);class Cb{constructor(e={}){this.permitUnSpecified=!0,Object.assign(this,e)}}D([q({type:se.Integer,optional:!0})],Cb.prototype,"pathLenConstraint",void 0);D([q({type:Xy,implicit:!0,context:0,optional:!0})],Cb.prototype,"permittedAttrs",void 0);D([q({type:Xy,implicit:!0,context:1,optional:!0})],Cb.prototype,"excludedAttrs",void 0);D([q({type:se.Boolean,defaultValue:!0})],Cb.prototype,"permitUnSpecified",void 0);class Dc{constructor(e={}){this.issuer=new Ds,this.serial=new ArrayBuffer(0),this.issuerUID=new ArrayBuffer(0),Object.assign(this,e)}}D([q({type:Ds})],Dc.prototype,"issuer",void 0);D([q({type:se.Integer,converter:gn})],Dc.prototype,"serial",void 0);D([q({type:se.BitString,optional:!0})],Dc.prototype,"issuerUID",void 0);var kk;(function(t){t[t.publicKey=0]="publicKey",t[t.publicKeyCert=1]="publicKeyCert",t[t.otherObjectTypes=2]="otherObjectTypes"})(kk||(kk={}));class Lc{constructor(e={}){this.digestedObjectType=kk.publicKey,this.digestAlgorithm=new We,this.objectDigest=new ArrayBuffer(0),Object.assign(this,e)}}D([q({type:se.Enumerated})],Lc.prototype,"digestedObjectType",void 0);D([q({type:se.ObjectIdentifier,optional:!0})],Lc.prototype,"otherObjectTypeID",void 0);D([q({type:We})],Lc.prototype,"digestAlgorithm",void 0);D([q({type:se.BitString})],Lc.prototype,"objectDigest",void 0);class Nb{constructor(e={}){Object.assign(this,e)}}D([q({type:Ds,optional:!0})],Nb.prototype,"issuerName",void 0);D([q({type:Dc,context:0,implicit:!0,optional:!0})],Nb.prototype,"baseCertificateID",void 0);D([q({type:Lc,context:1,implicit:!0,optional:!0})],Nb.prototype,"objectDigestInfo",void 0);let yh=class{constructor(e={}){Object.assign(this,e)}};D([q({type:kt,repeated:"sequence"})],yh.prototype,"v1Form",void 0);D([q({type:Nb,context:0,implicit:!0})],yh.prototype,"v2Form",void 0);yh=D([Ne({type:_e.Choice})],yh);class Eb{constructor(e={}){this.notBeforeTime=new Date,this.notAfterTime=new Date,Object.assign(this,e)}}D([q({type:se.GeneralizedTime})],Eb.prototype,"notBeforeTime",void 0);D([q({type:se.GeneralizedTime})],Eb.prototype,"notAfterTime",void 0);class pm{constructor(e={}){Object.assign(this,e)}}D([q({type:Dc,implicit:!0,context:0,optional:!0})],pm.prototype,"baseCertificateID",void 0);D([q({type:Ds,implicit:!0,context:1,optional:!0})],pm.prototype,"entityName",void 0);D([q({type:Lc,implicit:!0,context:2,optional:!0})],pm.prototype,"objectDigestInfo",void 0);var Ck;(function(t){t[t.v2=1]="v2"})(Ck||(Ck={}));class Mi{constructor(e={}){this.version=Ck.v2,this.holder=new pm,this.issuer=new yh,this.signature=new We,this.serialNumber=new ArrayBuffer(0),this.attrCertValidityPeriod=new Eb,this.attributes=[],Object.assign(this,e)}}D([q({type:se.Integer})],Mi.prototype,"version",void 0);D([q({type:pm})],Mi.prototype,"holder",void 0);D([q({type:yh})],Mi.prototype,"issuer",void 0);D([q({type:We})],Mi.prototype,"signature",void 0);D([q({type:se.Integer,converter:gn})],Mi.prototype,"serialNumber",void 0);D([q({type:Eb})],Mi.prototype,"attrCertValidityPeriod",void 0);D([q({type:Za,repeated:"sequence"})],Mi.prototype,"attributes",void 0);D([q({type:se.BitString,optional:!0})],Mi.prototype,"issuerUniqueID",void 0);D([q({type:bc,optional:!0})],Mi.prototype,"extensions",void 0);class Ab{constructor(e={}){this.acinfo=new Mi,this.signatureAlgorithm=new We,this.signatureValue=new ArrayBuffer(0),Object.assign(this,e)}}D([q({type:Mi})],Ab.prototype,"acinfo",void 0);D([q({type:We})],Ab.prototype,"signatureAlgorithm",void 0);D([q({type:se.BitString})],Ab.prototype,"signatureValue",void 0);var Qy;(function(t){t[t.unmarked=1]="unmarked",t[t.unclassified=2]="unclassified",t[t.restricted=4]="restricted",t[t.confidential=8]="confidential",t[t.secret=16]="secret",t[t.topSecret=32]="topSecret"})(Qy||(Qy={}));class Nk extends vb{}class $N{constructor(e={}){this.type="",this.value=new ArrayBuffer(0),Object.assign(this,e)}}D([q({type:se.ObjectIdentifier,implicit:!0,context:0})],$N.prototype,"type",void 0);D([q({type:se.Any,implicit:!0,context:1})],$N.prototype,"value",void 0);class zN{constructor(e={}){this.policyId="",this.classList=new Nk(Qy.unclassified),Object.assign(this,e)}}D([q({type:se.ObjectIdentifier})],zN.prototype,"policyId",void 0);D([q({type:Nk,defaultValue:new Nk(Qy.unclassified)})],zN.prototype,"classList",void 0);D([q({type:$N,repeated:"set"})],zN.prototype,"securityCategories",void 0);class Rb{constructor(e={}){Object.assign(this,e)}}D([q({type:qt})],Rb.prototype,"cotets",void 0);D([q({type:se.ObjectIdentifier})],Rb.prototype,"oid",void 0);D([q({type:se.Utf8String})],Rb.prototype,"string",void 0);class XL{constructor(e={}){this.values=[],Object.assign(this,e)}}D([q({type:Ds,implicit:!0,context:0,optional:!0})],XL.prototype,"policyAuthority",void 0);D([q({type:Rb,repeated:"sequence"})],XL.prototype,"values",void 0);var Ek;class Tb{constructor(e={}){this.targetCertificate=new Dc,Object.assign(this,e)}}D([q({type:Dc})],Tb.prototype,"targetCertificate",void 0);D([q({type:kt,optional:!0})],Tb.prototype,"targetName",void 0);D([q({type:Lc,optional:!0})],Tb.prototype,"certDigestInfo",void 0);let vh=class{constructor(e={}){Object.assign(this,e)}};D([q({type:kt,context:0,implicit:!0})],vh.prototype,"targetName",void 0);D([q({type:kt,context:1,implicit:!0})],vh.prototype,"targetGroup",void 0);D([q({type:Tb,context:2,implicit:!0})],vh.prototype,"targetCert",void 0);vh=D([Ne({type:_e.Choice})],vh);let Ak=Ek=class extends Jt{constructor(e){super(e),Object.setPrototypeOf(this,Ek.prototype)}};Ak=Ek=D([Ne({type:_e.Sequence,itemType:vh})],Ak);var Rk;let nj=Rk=class extends Jt{constructor(e){super(e),Object.setPrototypeOf(this,Rk.prototype)}};nj=Rk=D([Ne({type:_e.Sequence,itemType:Ak})],nj);class QL{constructor(e={}){Object.assign(this,e)}}D([q({type:Ds,implicit:!0,context:0,optional:!0})],QL.prototype,"roleAuthority",void 0);D([q({type:kt,implicit:!0,context:1})],QL.prototype,"roleName",void 0);class FN{constructor(e={}){this.service=new kt,this.ident=new kt,Object.assign(this,e)}}D([q({type:kt})],FN.prototype,"service",void 0);D([q({type:kt})],FN.prototype,"ident",void 0);D([q({type:qt,optional:!0})],FN.prototype,"authInfo",void 0);var Tk;class UN{constructor(e={}){this.otherCertFormat="",this.otherCert=new ArrayBuffer(0),Object.assign(this,e)}}D([q({type:se.ObjectIdentifier})],UN.prototype,"otherCertFormat",void 0);D([q({type:se.Any})],UN.prototype,"otherCert",void 0);let bh=class{constructor(e={}){Object.assign(this,e)}};D([q({type:mh})],bh.prototype,"certificate",void 0);D([q({type:Ab,context:2,implicit:!0})],bh.prototype,"v2AttrCert",void 0);D([q({type:UN,context:3,implicit:!0})],bh.prototype,"other",void 0);bh=D([Ne({type:_e.Choice})],bh);let ev=Tk=class extends Jt{constructor(e){super(e),Object.setPrototypeOf(this,Tk.prototype)}};ev=Tk=D([Ne({type:_e.Set,itemType:bh})],ev);class Hh{constructor(e={}){this.contentType="",this.content=new ArrayBuffer(0),Object.assign(this,e)}}D([q({type:se.ObjectIdentifier})],Hh.prototype,"contentType",void 0);D([q({type:se.Any,context:0})],Hh.prototype,"content",void 0);let $p=class{constructor(e={}){Object.assign(this,e)}};D([q({type:qt})],$p.prototype,"single",void 0);D([q({type:se.Any})],$p.prototype,"any",void 0);$p=D([Ne({type:_e.Choice})],$p);class jb{constructor(e={}){this.eContentType="",Object.assign(this,e)}}D([q({type:se.ObjectIdentifier})],jb.prototype,"eContentType",void 0);D([q({type:$p,context:0,optional:!0})],jb.prototype,"eContent",void 0);let zp=class{constructor(e={}){Object.assign(this,e)}};D([q({type:qt,context:0,implicit:!0,optional:!0})],zp.prototype,"value",void 0);D([q({type:qt,converter:KX,context:0,implicit:!0,optional:!0,repeated:"sequence"})],zp.prototype,"constructedValue",void 0);zp=D([Ne({type:_e.Choice})],zp);class mm{constructor(e={}){this.contentType="",this.contentEncryptionAlgorithm=new Zy,Object.assign(this,e)}}D([q({type:se.ObjectIdentifier})],mm.prototype,"contentType",void 0);D([q({type:Zy})],mm.prototype,"contentEncryptionAlgorithm",void 0);D([q({type:zp,optional:!0})],mm.prototype,"encryptedContent",void 0);class Ob{constructor(e={}){this.keyAttrId="",Object.assign(this,e)}}D([q({type:se.ObjectIdentifier})],Ob.prototype,"keyAttrId",void 0);D([q({type:se.Any,optional:!0})],Ob.prototype,"keyAttr",void 0);var jk;class Mb{constructor(e={}){this.subjectKeyIdentifier=new sl,Object.assign(this,e)}}D([q({type:sl})],Mb.prototype,"subjectKeyIdentifier",void 0);D([q({type:se.GeneralizedTime,optional:!0})],Mb.prototype,"date",void 0);D([q({type:Ob,optional:!0})],Mb.prototype,"other",void 0);let _h=class{constructor(e={}){Object.assign(this,e)}};D([q({type:Mb,context:0,implicit:!0,optional:!0})],_h.prototype,"rKeyId",void 0);D([q({type:Fh,optional:!0})],_h.prototype,"issuerAndSerialNumber",void 0);_h=D([Ne({type:_e.Choice})],_h);class HN{constructor(e={}){this.rid=new _h,this.encryptedKey=new qt,Object.assign(this,e)}}D([q({type:_h})],HN.prototype,"rid",void 0);D([q({type:qt})],HN.prototype,"encryptedKey",void 0);let tv=jk=class extends Jt{constructor(e){super(e),Object.setPrototypeOf(this,jk.prototype)}};tv=jk=D([Ne({type:_e.Sequence,itemType:HN})],tv);class VN{constructor(e={}){this.algorithm=new We,this.publicKey=new ArrayBuffer(0),Object.assign(this,e)}}D([q({type:We})],VN.prototype,"algorithm",void 0);D([q({type:se.BitString})],VN.prototype,"publicKey",void 0);let _c=class{constructor(e={}){Object.assign(this,e)}};D([q({type:sl,context:0,implicit:!0,optional:!0})],_c.prototype,"subjectKeyIdentifier",void 0);D([q({type:VN,context:1,implicit:!0,optional:!0})],_c.prototype,"originatorKey",void 0);D([q({type:Fh,optional:!0})],_c.prototype,"issuerAndSerialNumber",void 0);_c=D([Ne({type:_e.Choice})],_c);class Vh{constructor(e={}){this.version=Ja.v3,this.originator=new _c,this.keyEncryptionAlgorithm=new ia,this.recipientEncryptedKeys=new tv,Object.assign(this,e)}}D([q({type:se.Integer})],Vh.prototype,"version",void 0);D([q({type:_c,context:0})],Vh.prototype,"originator",void 0);D([q({type:qt,context:1,optional:!0})],Vh.prototype,"ukm",void 0);D([q({type:ia})],Vh.prototype,"keyEncryptionAlgorithm",void 0);D([q({type:tv})],Vh.prototype,"recipientEncryptedKeys",void 0);let xh=class{constructor(e={}){Object.assign(this,e)}};D([q({type:sl,context:0,implicit:!0})],xh.prototype,"subjectKeyIdentifier",void 0);D([q({type:Fh})],xh.prototype,"issuerAndSerialNumber",void 0);xh=D([Ne({type:_e.Choice})],xh);class gm{constructor(e={}){this.version=Ja.v0,this.rid=new xh,this.keyEncryptionAlgorithm=new ia,this.encryptedKey=new qt,Object.assign(this,e)}}D([q({type:se.Integer})],gm.prototype,"version",void 0);D([q({type:xh})],gm.prototype,"rid",void 0);D([q({type:ia})],gm.prototype,"keyEncryptionAlgorithm",void 0);D([q({type:qt})],gm.prototype,"encryptedKey",void 0);class ym{constructor(e={}){this.keyIdentifier=new qt,Object.assign(this,e)}}D([q({type:qt})],ym.prototype,"keyIdentifier",void 0);D([q({type:se.GeneralizedTime,optional:!0})],ym.prototype,"date",void 0);D([q({type:Ob,optional:!0})],ym.prototype,"other",void 0);class vm{constructor(e={}){this.version=Ja.v4,this.kekid=new ym,this.keyEncryptionAlgorithm=new ia,this.encryptedKey=new qt,Object.assign(this,e)}}D([q({type:se.Integer})],vm.prototype,"version",void 0);D([q({type:ym})],vm.prototype,"kekid",void 0);D([q({type:ia})],vm.prototype,"keyEncryptionAlgorithm",void 0);D([q({type:qt})],vm.prototype,"encryptedKey",void 0);class bm{constructor(e={}){this.version=Ja.v0,this.keyEncryptionAlgorithm=new ia,this.encryptedKey=new qt,Object.assign(this,e)}}D([q({type:se.Integer})],bm.prototype,"version",void 0);D([q({type:xk,context:0,optional:!0})],bm.prototype,"keyDerivationAlgorithm",void 0);D([q({type:ia})],bm.prototype,"keyEncryptionAlgorithm",void 0);D([q({type:qt})],bm.prototype,"encryptedKey",void 0);class qN{constructor(e={}){this.oriType="",this.oriValue=new ArrayBuffer(0),Object.assign(this,e)}}D([q({type:se.ObjectIdentifier})],qN.prototype,"oriType",void 0);D([q({type:se.Any})],qN.prototype,"oriValue",void 0);let ll=class{constructor(e={}){Object.assign(this,e)}};D([q({type:gm,optional:!0})],ll.prototype,"ktri",void 0);D([q({type:Vh,context:1,implicit:!0,optional:!0})],ll.prototype,"kari",void 0);D([q({type:vm,context:2,implicit:!0,optional:!0})],ll.prototype,"kekri",void 0);D([q({type:bm,context:3,implicit:!0,optional:!0})],ll.prototype,"pwri",void 0);D([q({type:qN,context:4,implicit:!0,optional:!0})],ll.prototype,"ori",void 0);ll=D([Ne({type:_e.Choice})],ll);var Ok;let nv=Ok=class extends Jt{constructor(e){super(e),Object.setPrototypeOf(this,Ok.prototype)}};nv=Ok=D([Ne({type:_e.Set,itemType:ll})],nv);var Mk;class Ib{constructor(e={}){this.otherRevInfoFormat="",this.otherRevInfo=new ArrayBuffer(0),Object.assign(this,e)}}D([q({type:se.ObjectIdentifier})],Ib.prototype,"otherRevInfoFormat",void 0);D([q({type:se.Any})],Ib.prototype,"otherRevInfo",void 0);let sv=class{constructor(e={}){this.other=new Ib,Object.assign(this,e)}};D([q({type:Ib,context:1,implicit:!0})],sv.prototype,"other",void 0);sv=D([Ne({type:_e.Choice})],sv);let rv=Mk=class extends Jt{constructor(e){super(e),Object.setPrototypeOf(this,Mk.prototype)}};rv=Mk=D([Ne({type:_e.Set,itemType:sv})],rv);class KN{constructor(e={}){Object.assign(this,e)}}D([q({type:ev,context:0,implicit:!0,optional:!0})],KN.prototype,"certs",void 0);D([q({type:rv,context:1,implicit:!0,optional:!0})],KN.prototype,"crls",void 0);var Ik;let Dk=Ik=class extends Jt{constructor(e){super(e),Object.setPrototypeOf(this,Ik.prototype)}};Dk=Ik=D([Ne({type:_e.Set,itemType:Uh})],Dk);class _m{constructor(e={}){this.version=Ja.v0,this.recipientInfos=new nv,this.encryptedContentInfo=new mm,Object.assign(this,e)}}D([q({type:se.Integer})],_m.prototype,"version",void 0);D([q({type:KN,context:0,implicit:!0,optional:!0})],_m.prototype,"originatorInfo",void 0);D([q({type:nv})],_m.prototype,"recipientInfos",void 0);D([q({type:mm})],_m.prototype,"encryptedContentInfo",void 0);D([q({type:Dk,context:1,implicit:!0,optional:!0})],_m.prototype,"unprotectedAttrs",void 0);const vQ="1.2.840.113549.1.7.2";var Lk;let iv=Lk=class extends Jt{constructor(e){super(e),Object.setPrototypeOf(this,Lk.prototype)}};iv=Lk=D([Ne({type:_e.Set,itemType:Bp})],iv);class qh{constructor(e={}){this.version=Ja.v0,this.digestAlgorithms=new iv,this.encapContentInfo=new jb,this.signerInfos=new Jy,Object.assign(this,e)}}D([q({type:se.Integer})],qh.prototype,"version",void 0);D([q({type:iv})],qh.prototype,"digestAlgorithms",void 0);D([q({type:jb})],qh.prototype,"encapContentInfo",void 0);D([q({type:ev,context:0,implicit:!0,optional:!0})],qh.prototype,"certificates",void 0);D([q({type:rv,context:1,implicit:!0,optional:!0})],qh.prototype,"crls",void 0);D([q({type:Jy})],qh.prototype,"signerInfos",void 0);const Fp="1.2.840.10045.2.1",WN="1.2.840.10045.4.1",eP="1.2.840.10045.4.3.1",GN="1.2.840.10045.4.3.2",YN="1.2.840.10045.4.3.3",ZN="1.2.840.10045.4.3.4",sj="1.2.840.10045.3.1.7",rj="1.3.132.0.34",ij="1.3.132.0.35";function xm(t){return new We({algorithm:t})}const bQ=xm(WN);xm(eP);const _Q=xm(GN),xQ=xm(YN),wQ=xm(ZN);let Up=class{constructor(e={}){Object.assign(this,e)}};D([q({type:se.ObjectIdentifier})],Up.prototype,"fieldType",void 0);D([q({type:se.Any})],Up.prototype,"parameters",void 0);Up=D([Ne({type:_e.Sequence})],Up);class SQ extends qt{}let wh=class{constructor(e={}){Object.assign(this,e)}};D([q({type:se.OctetString})],wh.prototype,"a",void 0);D([q({type:se.OctetString})],wh.prototype,"b",void 0);D([q({type:se.BitString,optional:!0})],wh.prototype,"seed",void 0);wh=D([Ne({type:_e.Sequence})],wh);var Pk;(function(t){t[t.ecpVer1=1]="ecpVer1"})(Pk||(Pk={}));let Xa=class{constructor(e={}){this.version=Pk.ecpVer1,Object.assign(this,e)}};D([q({type:se.Integer})],Xa.prototype,"version",void 0);D([q({type:Up})],Xa.prototype,"fieldID",void 0);D([q({type:wh})],Xa.prototype,"curve",void 0);D([q({type:SQ})],Xa.prototype,"base",void 0);D([q({type:se.Integer,converter:gn})],Xa.prototype,"order",void 0);D([q({type:se.Integer,optional:!0})],Xa.prototype,"cofactor",void 0);Xa=D([Ne({type:_e.Sequence})],Xa);let cl=class{constructor(e={}){Object.assign(this,e)}};D([q({type:se.ObjectIdentifier})],cl.prototype,"namedCurve",void 0);D([q({type:se.Null})],cl.prototype,"implicitCurve",void 0);D([q({type:Xa})],cl.prototype,"specifiedCurve",void 0);cl=D([Ne({type:_e.Choice})],cl);class Db{constructor(e={}){this.version=1,this.privateKey=new qt,Object.assign(this,e)}}D([q({type:se.Integer})],Db.prototype,"version",void 0);D([q({type:qt})],Db.prototype,"privateKey",void 0);D([q({type:cl,context:0,optional:!0})],Db.prototype,"parameters",void 0);D([q({type:se.BitString,context:1,optional:!0})],Db.prototype,"publicKey",void 0);class av{constructor(e={}){this.r=new ArrayBuffer(0),this.s=new ArrayBuffer(0),Object.assign(this,e)}}D([q({type:se.Integer,converter:gn})],av.prototype,"r",void 0);D([q({type:se.Integer,converter:gn})],av.prototype,"s",void 0);const fr="1.2.840.113549.1.1",xc=`${fr}.1`,kQ=`${fr}.7`,CQ=`${fr}.9`,hp=`${fr}.10`,NQ=`${fr}.2`,EQ=`${fr}.4`,ov=`${fr}.5`,AQ=`${fr}.14`,Bk=`${fr}.11`,lv=`${fr}.12`,cv=`${fr}.13`,tP=`${fr}.15`,nP=`${fr}.16`,uv="1.3.14.3.2.26",sP="2.16.840.1.101.3.4.2.4",hv="2.16.840.1.101.3.4.2.1",dv="2.16.840.1.101.3.4.2.2",fv="2.16.840.1.101.3.4.2.3",RQ="2.16.840.1.101.3.4.2.5",TQ="2.16.840.1.101.3.4.2.6",jQ="1.2.840.113549.2.2",OQ="1.2.840.113549.2.5",Lb=`${fr}.8`;function ss(t){return new We({algorithm:t,parameters:null})}ss(jQ);ss(OQ);const wc=ss(uv);ss(sP);ss(hv);ss(dv);ss(fv);ss(RQ);ss(TQ);const rP=new We({algorithm:Lb,parameters:He.serialize(wc)}),iP=new We({algorithm:CQ,parameters:He.serialize(Uy.toASN(new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer))});ss(xc);ss(NQ);ss(EQ);ss(ov);ss(tP);ss(nP);ss(lv);ss(cv);ss(tP);ss(nP);class Pb{constructor(e={}){this.hashAlgorithm=new We(wc),this.maskGenAlgorithm=new We({algorithm:Lb,parameters:He.serialize(wc)}),this.pSourceAlgorithm=new We(iP),Object.assign(this,e)}}D([q({type:We,context:0,defaultValue:wc})],Pb.prototype,"hashAlgorithm",void 0);D([q({type:We,context:1,defaultValue:rP})],Pb.prototype,"maskGenAlgorithm",void 0);D([q({type:We,context:2,defaultValue:iP})],Pb.prototype,"pSourceAlgorithm",void 0);new We({algorithm:kQ,parameters:He.serialize(new Pb)});class Sc{constructor(e={}){this.hashAlgorithm=new We(wc),this.maskGenAlgorithm=new We({algorithm:Lb,parameters:He.serialize(wc)}),this.saltLength=20,this.trailerField=1,Object.assign(this,e)}}D([q({type:We,context:0,defaultValue:wc})],Sc.prototype,"hashAlgorithm",void 0);D([q({type:We,context:1,defaultValue:rP})],Sc.prototype,"maskGenAlgorithm",void 0);D([q({type:se.Integer,context:2,defaultValue:20})],Sc.prototype,"saltLength",void 0);D([q({type:se.Integer,context:3,defaultValue:1})],Sc.prototype,"trailerField",void 0);new We({algorithm:hp,parameters:He.serialize(new Sc)});class Bb{constructor(e={}){this.digestAlgorithm=new We,this.digest=new qt,Object.assign(this,e)}}D([q({type:We})],Bb.prototype,"digestAlgorithm",void 0);D([q({type:qt})],Bb.prototype,"digest",void 0);var $k;class $b{constructor(e={}){this.prime=new ArrayBuffer(0),this.exponent=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0),Object.assign(this,e)}}D([q({type:se.Integer,converter:gn})],$b.prototype,"prime",void 0);D([q({type:se.Integer,converter:gn})],$b.prototype,"exponent",void 0);D([q({type:se.Integer,converter:gn})],$b.prototype,"coefficient",void 0);let zk=$k=class extends Jt{constructor(e){super(e),Object.setPrototypeOf(this,$k.prototype)}};zk=$k=D([Ne({type:_e.Sequence,itemType:$b})],zk);class pa{constructor(e={}){this.version=0,this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),this.privateExponent=new ArrayBuffer(0),this.prime1=new ArrayBuffer(0),this.prime2=new ArrayBuffer(0),this.exponent1=new ArrayBuffer(0),this.exponent2=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0),Object.assign(this,e)}}D([q({type:se.Integer})],pa.prototype,"version",void 0);D([q({type:se.Integer,converter:gn})],pa.prototype,"modulus",void 0);D([q({type:se.Integer,converter:gn})],pa.prototype,"publicExponent",void 0);D([q({type:se.Integer,converter:gn})],pa.prototype,"privateExponent",void 0);D([q({type:se.Integer,converter:gn})],pa.prototype,"prime1",void 0);D([q({type:se.Integer,converter:gn})],pa.prototype,"prime2",void 0);D([q({type:se.Integer,converter:gn})],pa.prototype,"exponent1",void 0);D([q({type:se.Integer,converter:gn})],pa.prototype,"exponent2",void 0);D([q({type:se.Integer,converter:gn})],pa.prototype,"coefficient",void 0);D([q({type:zk,optional:!0})],pa.prototype,"otherPrimeInfos",void 0);class JN{constructor(e={}){this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),Object.assign(this,e)}}D([q({type:se.Integer,converter:gn})],JN.prototype,"modulus",void 0);D([q({type:se.Integer,converter:gn})],JN.prototype,"publicExponent",void 0);var Fk;(function(t){t[t.Transient=0]="Transient",t[t.Singleton=1]="Singleton",t[t.ResolutionScoped=2]="ResolutionScoped",t[t.ContainerScoped=3]="ContainerScoped"})(Fk||(Fk={}));const rr=Fk;var Uk=function(t,e){return Uk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var r in s)s.hasOwnProperty(r)&&(n[r]=s[r])},Uk(t,e)};function XN(t,e){Uk(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function MQ(t,e,n,s){function r(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(m){try{h(s.next(m))}catch(p){a(p)}}function u(m){try{h(s.throw(m))}catch(p){a(p)}}function h(m){m.done?i(m.value):r(m.value).then(l,u)}h((s=s.apply(t,[])).next())})}function IQ(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},s,r,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(h){return function(m){return u([h,m])}}function u(h){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,r&&(i=h[0]&2?r.return:h[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,h[1])).done)return i;switch(r=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,r=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){n.label=h[1];break}if(h[0]===6&&n.label<i[1]){n.label=i[1],i=h;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(h);break}i[2]&&n.ops.pop(),n.trys.pop();continue}h=e.call(t,n)}catch(m){h=[6,m],r=0}finally{s=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function h0(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function pv(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),r,i=[],a;try{for(;(e===void 0||e-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(l){a={error:l}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(a)throw a.error}}return i}function ql(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(pv(arguments[e]));return t}var DQ="injectionTokens";function LQ(t){var e=Reflect.getMetadata("design:paramtypes",t)||[],n=Reflect.getOwnMetadata(DQ,t)||{};return Object.keys(n).forEach(function(s){e[+s]=n[s]}),e}function aP(t){return!!t.useClass}function Hk(t){return!!t.useFactory}var oP=(function(){function t(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return t.prototype.createProxy=function(e){var n=this,s={},r=!1,i,a=function(){return r||(i=e(n.wrap()),r=!0),i};return new Proxy(s,this.createHandler(a))},t.prototype.createHandler=function(e){var n={},s=function(r){n[r]=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];i[0]=e();var l=Reflect[r];return l.apply(void 0,ql(i))}};return this.reflectMethods.forEach(s),n},t})();function Cu(t){return typeof t=="string"||typeof t=="symbol"}function PQ(t){return typeof t=="object"&&"token"in t&&"multiple"in t}function aj(t){return typeof t=="object"&&"token"in t&&"transform"in t}function BQ(t){return typeof t=="function"||t instanceof oP}function W0(t){return!!t.useToken}function G0(t){return t.useValue!=null}function $Q(t){return aP(t)||G0(t)||W0(t)||Hk(t)}var QN=(function(){function t(){this._registryMap=new Map}return t.prototype.entries=function(){return this._registryMap.entries()},t.prototype.getAll=function(e){return this.ensure(e),this._registryMap.get(e)},t.prototype.get=function(e){this.ensure(e);var n=this._registryMap.get(e);return n[n.length-1]||null},t.prototype.set=function(e,n){this.ensure(e),this._registryMap.get(e).push(n)},t.prototype.setAll=function(e,n){this._registryMap.set(e,n)},t.prototype.has=function(e){return this.ensure(e),this._registryMap.get(e).length>0},t.prototype.clear=function(){this._registryMap.clear()},t.prototype.ensure=function(e){this._registryMap.has(e)||this._registryMap.set(e,[])},t})(),zQ=(function(t){XN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(QN),d0=(function(){function t(){this.scopedResolutions=new Map}return t})();function FQ(t,e){if(t===null)return"at position #"+e;var n=t.split(",")[e].trim();return'"'+n+'" at position #'+e}function UQ(t,e,n){return n===void 0&&(n="    "),ql([t],e.message.split(`
`).map(function(s){return n+s})).join(`
`)}function HQ(t,e,n){var s=pv(t.toString().match(/constructor\(([\w, ]+)\)/)||[],2),r=s[1],i=r===void 0?null:r,a=FQ(i,e);return UQ("Cannot inject the dependency "+a+' of "'+t.name+'" constructor. Reason:',n)}function VQ(t){if(typeof t.dispose!="function")return!1;var e=t.dispose;return!(e.length>0)}var qQ=(function(t){XN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(QN),KQ=(function(t){XN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(QN),WQ=(function(){function t(){this.preResolution=new qQ,this.postResolution=new KQ}return t})(),lP=new Map,GQ=(function(){function t(e){this.parent=e,this._registry=new zQ,this.interceptors=new WQ,this.disposed=!1,this.disposables=new Set}return t.prototype.register=function(e,n,s){s===void 0&&(s={lifecycle:rr.Transient}),this.ensureNotDisposed();var r;if($Q(n)?r=n:r={useClass:n},W0(r))for(var i=[e],a=r;a!=null;){var l=a.useToken;if(i.includes(l))throw new Error("Token registration cycle detected! "+ql(i,[l]).join(" -> "));i.push(l);var u=this._registry.get(l);u&&W0(u.provider)?a=u.provider:a=null}if((s.lifecycle===rr.Singleton||s.lifecycle==rr.ContainerScoped||s.lifecycle==rr.ResolutionScoped)&&(G0(r)||Hk(r)))throw new Error('Cannot use lifecycle "'+rr[s.lifecycle]+'" with ValueProviders or FactoryProviders');return this._registry.set(e,{provider:r,options:s}),this},t.prototype.registerType=function(e,n){return this.ensureNotDisposed(),Cu(n)?this.register(e,{useToken:n}):this.register(e,{useClass:n})},t.prototype.registerInstance=function(e,n){return this.ensureNotDisposed(),this.register(e,{useValue:n})},t.prototype.registerSingleton=function(e,n){if(this.ensureNotDisposed(),Cu(e)){if(Cu(n))return this.register(e,{useToken:n},{lifecycle:rr.Singleton});if(n)return this.register(e,{useClass:n},{lifecycle:rr.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var s=e;return n&&!Cu(n)&&(s=n),this.register(e,{useClass:s},{lifecycle:rr.Singleton})},t.prototype.resolve=function(e,n,s){n===void 0&&(n=new d0),s===void 0&&(s=!1),this.ensureNotDisposed();var r=this.getRegistration(e);if(!r&&Cu(e)){if(s)return;throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"')}if(this.executePreResolutionInterceptor(e,"Single"),r){var i=this.resolveRegistration(r,n);return this.executePostResolutionInterceptor(e,i,"Single"),i}if(BQ(e)){var i=this.construct(e,n);return this.executePostResolutionInterceptor(e,i,"Single"),i}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},t.prototype.executePreResolutionInterceptor=function(e,n){var s,r;if(this.interceptors.preResolution.has(e)){var i=[];try{for(var a=h0(this.interceptors.preResolution.getAll(e)),l=a.next();!l.done;l=a.next()){var u=l.value;u.options.frequency!="Once"&&i.push(u),u.callback(e,n)}}catch(h){s={error:h}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(s)throw s.error}}this.interceptors.preResolution.setAll(e,i)}},t.prototype.executePostResolutionInterceptor=function(e,n,s){var r,i;if(this.interceptors.postResolution.has(e)){var a=[];try{for(var l=h0(this.interceptors.postResolution.getAll(e)),u=l.next();!u.done;u=l.next()){var h=u.value;h.options.frequency!="Once"&&a.push(h),h.callback(e,n,s)}}catch(m){r={error:m}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}this.interceptors.postResolution.setAll(e,a)}},t.prototype.resolveRegistration=function(e,n){if(this.ensureNotDisposed(),e.options.lifecycle===rr.ResolutionScoped&&n.scopedResolutions.has(e))return n.scopedResolutions.get(e);var s=e.options.lifecycle===rr.Singleton,r=e.options.lifecycle===rr.ContainerScoped,i=s||r,a;return G0(e.provider)?a=e.provider.useValue:W0(e.provider)?a=i?e.instance||(e.instance=this.resolve(e.provider.useToken,n)):this.resolve(e.provider.useToken,n):aP(e.provider)?a=i?e.instance||(e.instance=this.construct(e.provider.useClass,n)):this.construct(e.provider.useClass,n):Hk(e.provider)?a=e.provider.useFactory(this):a=this.construct(e.provider,n),e.options.lifecycle===rr.ResolutionScoped&&n.scopedResolutions.set(e,a),a},t.prototype.resolveAll=function(e,n,s){var r=this;n===void 0&&(n=new d0),s===void 0&&(s=!1),this.ensureNotDisposed();var i=this.getAllRegistrations(e);if(!i&&Cu(e)){if(s)return[];throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"')}if(this.executePreResolutionInterceptor(e,"All"),i){var a=i.map(function(u){return r.resolveRegistration(u,n)});return this.executePostResolutionInterceptor(e,a,"All"),a}var l=[this.construct(e,n)];return this.executePostResolutionInterceptor(e,l,"All"),l},t.prototype.isRegistered=function(e,n){return n===void 0&&(n=!1),this.ensureNotDisposed(),this._registry.has(e)||n&&(this.parent||!1)&&this.parent.isRegistered(e,!0)},t.prototype.reset=function(){this.ensureNotDisposed(),this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},t.prototype.clearInstances=function(){var e,n;this.ensureNotDisposed();try{for(var s=h0(this._registry.entries()),r=s.next();!r.done;r=s.next()){var i=pv(r.value,2),a=i[0],l=i[1];this._registry.setAll(a,l.filter(function(u){return!G0(u.provider)}).map(function(u){return u.instance=void 0,u}))}}catch(u){e={error:u}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}},t.prototype.createChildContainer=function(){var e,n;this.ensureNotDisposed();var s=new t(this);try{for(var r=h0(this._registry.entries()),i=r.next();!i.done;i=r.next()){var a=pv(i.value,2),l=a[0],u=a[1];u.some(function(h){var m=h.options;return m.lifecycle===rr.ContainerScoped})&&s._registry.setAll(l,u.map(function(h){return h.options.lifecycle===rr.ContainerScoped?{provider:h.provider,options:h.options}:h}))}}catch(h){e={error:h}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return s},t.prototype.beforeResolution=function(e,n,s){s===void 0&&(s={frequency:"Always"}),this.interceptors.preResolution.set(e,{callback:n,options:s})},t.prototype.afterResolution=function(e,n,s){s===void 0&&(s={frequency:"Always"}),this.interceptors.postResolution.set(e,{callback:n,options:s})},t.prototype.dispose=function(){return MQ(this,void 0,void 0,function(){var e;return IQ(this,function(n){switch(n.label){case 0:return this.disposed=!0,e=[],this.disposables.forEach(function(s){var r=s.dispose();r&&e.push(r)}),[4,Promise.all(e)];case 1:return n.sent(),[2]}})})},t.prototype.getRegistration=function(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null},t.prototype.getAllRegistrations=function(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null},t.prototype.construct=function(e,n){var s=this;if(e instanceof oP)return e.createProxy(function(i){return s.resolve(i,n)});var r=(function(){var i=lP.get(e);if(!i||i.length===0){if(e.length===0)return new e;throw new Error('TypeInfo not known for "'+e.name+'"')}var a=i.map(s.resolveParams(n,e));return new(e.bind.apply(e,ql([void 0],a)))})();return VQ(r)&&this.disposables.add(r),r},t.prototype.resolveParams=function(e,n){var s=this;return function(r,i){var a,l,u;try{return PQ(r)?aj(r)?r.multiple?(a=s.resolve(r.transform)).transform.apply(a,ql([s.resolveAll(r.token,new d0,r.isOptional)],r.transformArgs)):(l=s.resolve(r.transform)).transform.apply(l,ql([s.resolve(r.token,e,r.isOptional)],r.transformArgs)):r.multiple?s.resolveAll(r.token,new d0,r.isOptional):s.resolve(r.token,e,r.isOptional):aj(r)?(u=s.resolve(r.transform,e)).transform.apply(u,ql([s.resolve(r.token,e)],r.transformArgs)):s.resolve(r,e)}catch(h){throw new Error(HQ(n,i,h))}}},t.prototype.ensureNotDisposed=function(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")},t})(),Gs=new GQ;function zb(t){return function(e){lP.set(e,LQ(e))}}if(typeof Reflect>"u"||!Reflect.getMetadata)throw new Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`);var Vk;class Fb{constructor(e={}){this.attrId="",this.attrValues=[],Object.assign(e)}}D([q({type:se.ObjectIdentifier})],Fb.prototype,"attrId",void 0);D([q({type:se.Any,repeated:"set"})],Fb.prototype,"attrValues",void 0);let oj=Vk=class extends Jt{constructor(e){super(e),Object.setPrototypeOf(this,Vk.prototype)}};oj=Vk=D([Ne({type:_e.Sequence,itemType:Fb})],oj);var qk;let lj=qk=class extends Jt{constructor(e){super(e),Object.setPrototypeOf(this,qk.prototype)}};lj=qk=D([Ne({type:_e.Sequence,itemType:Hh})],lj);class cP{constructor(e={}){this.certId="",this.certValue=new ArrayBuffer(0),Object.assign(this,e)}}D([q({type:se.ObjectIdentifier})],cP.prototype,"certId",void 0);D([q({type:se.Any,context:0})],cP.prototype,"certValue",void 0);class uP{constructor(e={}){this.crlId="",this.crltValue=new ArrayBuffer(0),Object.assign(this,e)}}D([q({type:se.ObjectIdentifier})],uP.prototype,"crlId",void 0);D([q({type:se.Any,context:0})],uP.prototype,"crltValue",void 0);class hP extends qt{}let Ub=class{constructor(e={}){this.encryptionAlgorithm=new We,this.encryptedData=new hP,Object.assign(this,e)}};D([q({type:We})],Ub.prototype,"encryptionAlgorithm",void 0);D([q({type:hP})],Ub.prototype,"encryptedData",void 0);var Kk,Wk;(function(t){t[t.v1=0]="v1"})(Wk||(Wk={}));class dP extends qt{}let Gk=Kk=class extends Jt{constructor(e){super(e),Object.setPrototypeOf(this,Kk.prototype)}};Gk=Kk=D([Ne({type:_e.Sequence,itemType:Za})],Gk);class wm{constructor(e={}){this.version=Wk.v1,this.privateKeyAlgorithm=new We,this.privateKey=new dP,Object.assign(this,e)}}D([q({type:se.Integer})],wm.prototype,"version",void 0);D([q({type:We})],wm.prototype,"privateKeyAlgorithm",void 0);D([q({type:dP})],wm.prototype,"privateKey",void 0);D([q({type:Gk,implicit:!0,context:0,optional:!0})],wm.prototype,"attributes",void 0);let cj=class extends wm{};cj=D([Ne({type:_e.Sequence})],cj);let uj=class extends Ub{};uj=D([Ne({type:_e.Sequence})],uj);class fP{constructor(e={}){this.secretTypeId="",this.secretValue=new ArrayBuffer(0),Object.assign(this,e)}}D([q({type:se.ObjectIdentifier})],fP.prototype,"secretTypeId",void 0);D([q({type:se.Any,context:0})],fP.prototype,"secretValue",void 0);class Sm{constructor(e={}){this.mac=new Bb,this.macSalt=new qt,this.iterations=1,Object.assign(this,e)}}D([q({type:Bb})],Sm.prototype,"mac",void 0);D([q({type:qt})],Sm.prototype,"macSalt",void 0);D([q({type:se.Integer,defaultValue:1})],Sm.prototype,"iterations",void 0);class Hb{constructor(e={}){this.version=3,this.authSafe=new Hh,this.macData=new Sm,Object.assign(this,e)}}D([q({type:se.Integer})],Hb.prototype,"version",void 0);D([q({type:Hh})],Hb.prototype,"authSafe",void 0);D([q({type:Sm,optional:!0})],Hb.prototype,"macData",void 0);var Yk;class Vb{constructor(e={}){this.bagId="",this.bagValue=new ArrayBuffer(0),Object.assign(this,e)}}D([q({type:se.ObjectIdentifier})],Vb.prototype,"bagId",void 0);D([q({type:se.Any,context:0})],Vb.prototype,"bagValue",void 0);D([q({type:Fb,repeated:"set",optional:!0})],Vb.prototype,"bagAttributes",void 0);let hj=Yk=class extends Jt{constructor(e){super(e),Object.setPrototypeOf(this,Yk.prototype)}};hj=Yk=D([Ne({type:_e.Sequence,itemType:Vb})],hj);var Zk,Jk,Xk;const pP="1.2.840.113549.1.9",mP=`${pP}.7`,eE=`${pP}.14`;let mv=class extends Ns{constructor(e={}){super(e)}toString(){return this.ia5String||super.toString()}};D([q({type:se.IA5String})],mv.prototype,"ia5String",void 0);mv=D([Ne({type:_e.Choice})],mv);let dj=class extends Hh{};dj=D([Ne({type:_e.Sequence})],dj);let fj=class extends Hb{};fj=D([Ne({type:_e.Sequence})],fj);let pj=class extends Ub{};pj=D([Ne({type:_e.Sequence})],pj);let Qk=class{constructor(e=""){this.value=e}toString(){return this.value}};D([q({type:se.IA5String})],Qk.prototype,"value",void 0);Qk=D([Ne({type:_e.Choice})],Qk);let mj=class extends mv{};mj=D([Ne({type:_e.Choice})],mj);let gj=class extends Ns{};gj=D([Ne({type:_e.Choice})],gj);let e2=class{constructor(e=new Date){this.value=e}};D([q({type:se.GeneralizedTime})],e2.prototype,"value",void 0);e2=D([Ne({type:_e.Choice})],e2);let yj=class extends Ns{};yj=D([Ne({type:_e.Choice})],yj);let t2=class{constructor(e="M"){this.value=e}toString(){return this.value}};D([q({type:se.PrintableString})],t2.prototype,"value",void 0);t2=D([Ne({type:_e.Choice})],t2);let gv=class{constructor(e=""){this.value=e}toString(){return this.value}};D([q({type:se.PrintableString})],gv.prototype,"value",void 0);gv=D([Ne({type:_e.Choice})],gv);let vj=class extends gv{};vj=D([Ne({type:_e.Choice})],vj);let bj=class extends Ns{};bj=D([Ne({type:_e.Choice})],bj);let n2=class{constructor(e=""){this.value=e}toString(){return this.value}};D([q({type:se.ObjectIdentifier})],n2.prototype,"value",void 0);n2=D([Ne({type:_e.Choice})],n2);let _j=class extends ws{};_j=D([Ne({type:_e.Choice})],_j);let s2=class{constructor(e=0){this.value=e}toString(){return this.value.toString()}};D([q({type:se.Integer})],s2.prototype,"value",void 0);s2=D([Ne({type:_e.Choice})],s2);let xj=class extends fa{};xj=D([Ne({type:_e.Sequence})],xj);let yv=class extends Ns{};yv=D([Ne({type:_e.Choice})],yv);let wj=Zk=class extends bc{constructor(e){super(e),Object.setPrototypeOf(this,Zk.prototype)}};wj=Zk=D([Ne({type:_e.Sequence})],wj);let Sj=Jk=class extends Jt{constructor(e){super(e),Object.setPrototypeOf(this,Jk.prototype)}};Sj=Jk=D([Ne({type:_e.Set,itemType:Uh})],Sj);let r2=class{constructor(e=""){this.value=e}toString(){return this.value}};D([q({type:se.BmpString})],r2.prototype,"value",void 0);r2=D([Ne({type:_e.Choice})],r2);let i2=class extends We{};i2=D([Ne({type:_e.Sequence})],i2);let kj=Xk=class extends Jt{constructor(e){super(e),Object.setPrototypeOf(this,Xk.prototype)}};kj=Xk=D([Ne({type:_e.Sequence,itemType:i2})],kj);var a2;let vv=a2=class extends Jt{constructor(e){super(e),Object.setPrototypeOf(this,a2.prototype)}};vv=a2=D([Ne({type:_e.Sequence,itemType:Za})],vv);class Kh{constructor(e={}){this.version=0,this.subject=new Qn,this.subjectPKInfo=new Gi,this.attributes=new vv,Object.assign(this,e)}}D([q({type:se.Integer})],Kh.prototype,"version",void 0);D([q({type:Qn})],Kh.prototype,"subject",void 0);D([q({type:Gi})],Kh.prototype,"subjectPKInfo",void 0);D([q({type:vv,implicit:!0,context:0,optional:!0})],Kh.prototype,"attributes",void 0);class Hp{constructor(e={}){this.certificationRequestInfo=new Kh,this.signatureAlgorithm=new We,this.signature=new ArrayBuffer(0),Object.assign(this,e)}}D([q({type:Kh,raw:!0})],Hp.prototype,"certificationRequestInfo",void 0);D([q({type:We})],Hp.prototype,"signatureAlgorithm",void 0);D([q({type:se.BitString})],Hp.prototype,"signature",void 0);const km="crypto.algorithm";class YQ{getAlgorithms(){return Gs.resolveAll(km)}toAsnAlgorithm(e){({...e});for(const n of this.getAlgorithms()){const s=n.toAsnAlgorithm(e);if(s)return s}if(/^[0-9.]+$/.test(e.name)){const n=new We({algorithm:e.name});if("parameters"in e){const s=e;n.parameters=s.parameters}return n}throw new Error("Cannot convert WebCrypto algorithm to ASN.1 algorithm")}toWebAlgorithm(e){for(const s of this.getAlgorithms()){const r=s.toWebAlgorithm(e);if(r)return r}return{name:e.algorithm,parameters:e.parameters}}}const Sh="crypto.algorithmProvider";Gs.registerSingleton(Sh,YQ);var Y0;const pr="1.3.36.3.3.2.8.1.1",Cj=`${pr}.1`,Nj=`${pr}.2`,Ej=`${pr}.3`,Aj=`${pr}.4`,Rj=`${pr}.5`,Tj=`${pr}.6`,jj=`${pr}.7`,Oj=`${pr}.8`,Mj=`${pr}.9`,Ij=`${pr}.10`,Dj=`${pr}.11`,Lj=`${pr}.12`,Pj=`${pr}.13`,Bj=`${pr}.14`,$j="brainpoolP160r1",zj="brainpoolP160t1",Fj="brainpoolP192r1",Uj="brainpoolP192t1",Hj="brainpoolP224r1",Vj="brainpoolP224t1",qj="brainpoolP256r1",Kj="brainpoolP256t1",Wj="brainpoolP320r1",Gj="brainpoolP320t1",Yj="brainpoolP384r1",Zj="brainpoolP384t1",Jj="brainpoolP512r1",Xj="brainpoolP512t1",wn="ECDSA";let Vp=Y0=class{toAsnAlgorithm(e){switch(e.name.toLowerCase()){case wn.toLowerCase():if("hash"in e)switch((typeof e.hash=="string"?e.hash:e.hash.name).toLowerCase()){case"sha-1":return bQ;case"sha-256":return _Q;case"sha-384":return xQ;case"sha-512":return wQ}else if("namedCurve"in e){let n="";switch(e.namedCurve){case"P-256":n=sj;break;case"K-256":n=Y0.SECP256K1;break;case"P-384":n=rj;break;case"P-521":n=ij;break;case $j:n=Cj;break;case zj:n=Nj;break;case Fj:n=Ej;break;case Uj:n=Aj;break;case Hj:n=Rj;break;case Vj:n=Tj;break;case qj:n=jj;break;case Kj:n=Oj;break;case Wj:n=Mj;break;case Gj:n=Ij;break;case Yj:n=Dj;break;case Zj:n=Lj;break;case Jj:n=Pj;break;case Xj:n=Bj;break}if(n)return new We({algorithm:Fp,parameters:He.serialize(new cl({namedCurve:n}))})}}return null}toWebAlgorithm(e){switch(e.algorithm){case WN:return{name:wn,hash:{name:"SHA-1"}};case GN:return{name:wn,hash:{name:"SHA-256"}};case YN:return{name:wn,hash:{name:"SHA-384"}};case ZN:return{name:wn,hash:{name:"SHA-512"}};case Fp:{if(!e.parameters)throw new TypeError("Cannot get required parameters from EC algorithm");switch(He.parse(e.parameters,cl).namedCurve){case sj:return{name:wn,namedCurve:"P-256"};case Y0.SECP256K1:return{name:wn,namedCurve:"K-256"};case rj:return{name:wn,namedCurve:"P-384"};case ij:return{name:wn,namedCurve:"P-521"};case Cj:return{name:wn,namedCurve:$j};case Nj:return{name:wn,namedCurve:zj};case Ej:return{name:wn,namedCurve:Fj};case Aj:return{name:wn,namedCurve:Uj};case Rj:return{name:wn,namedCurve:Hj};case Tj:return{name:wn,namedCurve:Vj};case jj:return{name:wn,namedCurve:qj};case Oj:return{name:wn,namedCurve:Kj};case Mj:return{name:wn,namedCurve:Wj};case Ij:return{name:wn,namedCurve:Gj};case Dj:return{name:wn,namedCurve:Yj};case Lj:return{name:wn,namedCurve:Zj};case Pj:return{name:wn,namedCurve:Jj};case Bj:return{name:wn,namedCurve:Xj}}}}return null}};Vp.SECP256K1="1.3.132.0.10";Vp=Y0=D([zb()],Vp);Gs.registerSingleton(km,Vp);const gP=Symbol("name"),yP=Symbol("value");class Gt{constructor(e,n={},s=""){this[gP]=e,this[yP]=s;for(const r in n)this[r]=n[r]}}Gt.NAME=gP;Gt.VALUE=yP;class ZQ{static toTextObject(e){const n=new Gt("Algorithm Identifier",{},ml.toString(e.algorithm));if(e.parameters)if(e.algorithm===Fp){const s=new Vp().toWebAlgorithm(e);s&&"namedCurve"in s?n["Named Curve"]=s.namedCurve:n.Parameters=e.parameters}else n.Parameters=e.parameters;return n}}class ml{static toString(e){const n=this.items[e];return n||e}}ml.items={[uv]:"sha1",[sP]:"sha224",[hv]:"sha256",[dv]:"sha384",[fv]:"sha512",[xc]:"rsaEncryption",[ov]:"sha1WithRSAEncryption",[AQ]:"sha224WithRSAEncryption",[Bk]:"sha256WithRSAEncryption",[lv]:"sha384WithRSAEncryption",[cv]:"sha512WithRSAEncryption",[Fp]:"ecPublicKey",[WN]:"ecdsaWithSHA1",[eP]:"ecdsaWithSHA224",[GN]:"ecdsaWithSHA256",[YN]:"ecdsaWithSHA384",[ZN]:"ecdsaWithSHA512",[dQ]:"TLS WWW server authentication",[fQ]:"TLS WWW client authentication",[pQ]:"Code Signing",[mQ]:"E-mail Protection",[gQ]:"Time Stamping",[yQ]:"OCSP Signing",[vQ]:"Signed Data"};class kc{static serialize(e){return this.serializeObj(e).join(`
`)}static pad(e=0){return"".padStart(2*e," ")}static serializeObj(e,n=0){const s=[];let r=this.pad(n++),i="";const a=e[Gt.VALUE];a&&(i=` ${a}`),s.push(`${r}${e[Gt.NAME]}:${i}`),r=this.pad(n);for(const l in e){if(typeof l=="symbol")continue;const u=e[l],h=l?`${l}: `:"";if(typeof u=="string"||typeof u=="number"||typeof u=="boolean")s.push(`${r}${h}${u}`);else if(u instanceof Date)s.push(`${r}${h}${u.toUTCString()}`);else if(Array.isArray(u))for(const m of u)m[Gt.NAME]=l,s.push(...this.serializeObj(m,n));else if(u instanceof Gt)u[Gt.NAME]=l,s.push(...this.serializeObj(u,n));else if(Be.isBufferSource(u))l?(s.push(`${r}${h}`),s.push(...this.serializeBufferSource(u,n+1))):s.push(...this.serializeBufferSource(u,n));else if("toTextObject"in u){const m=u.toTextObject();m[Gt.NAME]=l,s.push(...this.serializeObj(m,n))}else throw new TypeError("Cannot serialize data in text format. Unsupported type.")}return s}static serializeBufferSource(e,n=0){const s=this.pad(n),r=Be.toUint8Array(e),i=[];for(let a=0;a<r.length;){const l=[];for(let u=0;u<16&&a<r.length;u++){u===8&&l.push("");const h=r[a++].toString(16).padStart(2,"0");l.push(h)}i.push(`${s}${l.join(" ")}`)}return i}static serializeAlgorithm(e){return this.algorithmSerializer.toTextObject(e)}}kc.oidSerializer=ml;kc.algorithmSerializer=ZQ;var Lu;class gl{get rawData(){return Et(this,Lu,"f")||vn(this,Lu,He.serialize(this.asn),"f"),Et(this,Lu,"f")}constructor(...e){Lu.set(this,void 0),Be.isBufferSource(e[0])?(this.asn=He.parse(e[0],e[1]),vn(this,Lu,Be.toArrayBuffer(e[0]),"f"),this.onInit(this.asn)):(this.asn=e[0],this.onInit(this.asn))}equal(e){return e instanceof gl?$D(e.rawData,this.rawData):!1}toString(e="text"){switch(e){case"asn":return He.toString(this.rawData);case"text":return kc.serialize(this.toTextObject());case"hex":return nt.ToHex(this.rawData);case"base64":return nt.ToBase64(this.rawData);case"base64url":return nt.ToBase64Url(this.rawData);default:throw TypeError("Argument 'format' is unsupported value")}}getTextName(){return this.constructor.NAME}toTextObject(){const e=this.toTextObjectEmpty();return e[""]=this.rawData,e}toTextObjectEmpty(e){return new Gt(this.getTextName(),{},e)}}Lu=new WeakMap;gl.NAME="ASN";class Fr extends gl{constructor(...e){let n;Be.isBufferSource(e[0])?n=Be.toArrayBuffer(e[0]):n=He.serialize(new Ti({extnID:e[0],critical:e[1],extnValue:new qt(Be.toArrayBuffer(e[2]))})),super(n,Ti)}onInit(e){this.type=e.extnID,this.critical=e.critical,this.value=e.extnValue.buffer}toTextObject(){const e=this.toTextObjectWithoutValue();return e[""]=this.value,e}toTextObjectWithoutValue(){const e=this.toTextObjectEmpty(this.critical?"critical":void 0);return e[Gt.NAME]===Fr.NAME&&(e[Gt.NAME]=ml.toString(this.type)),e}}var vP;class Ko{static isCryptoKeyPair(e){return e&&e.privateKey&&e.publicKey}static isCryptoKey(e){return e&&e.usages&&e.type&&e.algorithm&&e.extractable!==void 0}constructor(){this.items=new Map,this[vP]="CryptoProvider",typeof self<"u"&&typeof crypto<"u"?this.set(Ko.DEFAULT,crypto):typeof global<"u"&&global.crypto&&global.crypto.subtle&&this.set(Ko.DEFAULT,global.crypto)}clear(){this.items.clear()}delete(e){return this.items.delete(e)}forEach(e,n){return this.items.forEach(e,n)}has(e){return this.items.has(e)}get size(){return this.items.size}entries(){return this.items.entries()}keys(){return this.items.keys()}values(){return this.items.values()}[Symbol.iterator](){return this.items[Symbol.iterator]()}get(e=Ko.DEFAULT){const n=this.items.get(e.toLowerCase());if(!n)throw new Error(`Cannot get Crypto by name '${e}'`);return n}set(e,n){if(typeof e=="string"){if(!n)throw new TypeError("Argument 'value' is required");this.items.set(e.toLowerCase(),n)}else this.items.set(Ko.DEFAULT,e);return this}}vP=Symbol.toStringTag;Ko.DEFAULT="default";const Us=new Ko,JQ=/^[0-2](?:\.[1-9][0-9]*)+$/;function XQ(t){return new RegExp(JQ).test(t)}class bP{constructor(e={}){this.items={};for(const n in e)this.register(n,e[n])}get(e){return this.items[e]||null}findId(e){return XQ(e)?e:this.get(e)}register(e,n){this.items[e]=n,this.items[n]=e}}const dr=new bP;dr.register("CN","2.5.4.3");dr.register("L","2.5.4.7");dr.register("ST","2.5.4.8");dr.register("O","2.5.4.10");dr.register("OU","2.5.4.11");dr.register("C","2.5.4.6");dr.register("DC","0.9.2342.19200300.100.1.25");dr.register("E","1.2.840.113549.1.9.1");dr.register("G","2.5.4.42");dr.register("I","2.5.4.43");dr.register("SN","2.5.4.4");dr.register("T","2.5.4.12");function QQ(t,e){return`\\${nt.ToHex(nt.FromUtf8String(e)).toUpperCase()}`}function eee(t){return t.replace(/([,+"\\<>;])/g,"\\$1").replace(/^([ #])/,"\\$1").replace(/([ ]$)/,"\\$1").replace(/([\r\n\t])/,QQ)}class Cc{static isASCII(e){for(let n=0;n<e.length;n++)if(e.charCodeAt(n)>255)return!1;return!0}static isPrintableString(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/g.test(e)}constructor(e,n={}){this.extraNames=new bP,this.asn=new Qn;for(const s in n)if(Object.prototype.hasOwnProperty.call(n,s)){const r=n[s];this.extraNames.register(s,r)}typeof e=="string"?this.asn=this.fromString(e):e instanceof Qn?this.asn=e:Be.isBufferSource(e)?this.asn=He.parse(e,Qn):this.asn=this.fromJSON(e)}getField(e){const n=this.extraNames.findId(e)||dr.findId(e),s=[];for(const r of this.asn)for(const i of r)i.type===n&&s.push(i.value.toString());return s}getName(e){return this.extraNames.get(e)||dr.get(e)}toString(){return this.asn.map(e=>e.map(n=>{const s=this.getName(n.type)||n.type,r=n.value.anyValue?`#${nt.ToHex(n.value.anyValue)}`:eee(n.value.toString());return`${s}=${r}`}).join("+")).join(", ")}toJSON(){var e;const n=[];for(const s of this.asn){const r={};for(const i of s){const a=this.getName(i.type)||i.type;(e=r[a])!==null&&e!==void 0||(r[a]=[]),r[a].push(i.value.anyValue?`#${nt.ToHex(i.value.anyValue)}`:i.value.toString())}n.push(r)}return n}fromString(e){const n=new Qn,s=/(\d\.[\d.]*\d|[A-Za-z]+)=((?:"")|(?:".*?[^\\]")|(?:[^,+"\\](?=[,+]|$))|(?:[^,+].*?(?:[^\\][,+]))|(?:))([,+])?/g;let r=null,i=",";for(;r=s.exec(`${e},`);){let[,a,l]=r;const u=l[l.length-1];(u===","||u==="+")&&(l=l.slice(0,l.length-1),r[3]=u);const h=r[3];a=this.getTypeOid(a);const m=this.createAttribute(a,l);i==="+"?n[n.length-1].push(m):n.push(new fh([m])),i=h}return n}fromJSON(e){const n=new Qn;for(const s of e){const r=new fh;for(const i in s){const a=this.getTypeOid(i),l=s[i];for(const u of l){const h=this.createAttribute(a,u);r.push(h)}}n.push(r)}return n}getTypeOid(e){if(/[\d.]+/.test(e)||(e=this.getName(e)||""),!e)throw new Error(`Cannot get OID for name type '${e}'`);return e}createAttribute(e,n){const s=new bb({type:e});if(typeof n=="object")for(const r in n)switch(r){case"ia5String":s.value.ia5String=n[r];break;case"utf8String":s.value.utf8String=n[r];break;case"universalString":s.value.universalString=n[r];break;case"bmpString":s.value.bmpString=n[r];break;case"printableString":s.value.printableString=n[r];break}else if(n[0]==="#")s.value.anyValue=nt.FromHex(n.slice(1));else{const r=this.processStringValue(n);e===this.getName("E")||e===this.getName("DC")?s.value.ia5String=r:Cc.isPrintableString(r)?s.value.printableString=r:s.value.utf8String=r}return s}processStringValue(e){const n=/"(.*?[^\\])?"/.exec(e);return n&&(e=n[1]),e.replace(/\\0a/ig,`
`).replace(/\\0d/ig,"\r").replace(/\\0g/ig,"	").replace(/\\(.)/g,"$1")}toArrayBuffer(){return He.serialize(this.asn)}async getThumbprint(...e){var n;let s,r="SHA-1";return e.length>=1&&!(!((n=e[0])===null||n===void 0)&&n.subtle)?(r=e[0]||r,s=e[1]||Us.get()):s=e[0]||Us.get(),await s.subtle.digest(r,this.toArrayBuffer())}}const _P="Cannot initialize GeneralName from ASN.1 data.",Qj=`${_P} Unsupported string format in use.`,tee=`${_P} Value doesn't match to GUID regular expression.`,eO=/^([0-9a-f]{8})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{12})$/i,tO="1.3.6.1.4.1.311.25.1",nO="1.3.6.1.4.1.311.20.2.3",lw="dns",cw="dn",uw="email",hw="ip",dw="url",fw="guid",pw="upn",f0="id";class Wo extends gl{constructor(...e){let n;if(e.length===2)switch(e[0]){case cw:{const s=new Cc(e[1]).toArrayBuffer(),r=He.parse(s,Qn);n=new kt({directoryName:r});break}case lw:n=new kt({dNSName:e[1]});break;case uw:n=new kt({rfc822Name:e[1]});break;case fw:{const s=new RegExp(eO,"i").exec(e[1]);if(!s)throw new Error("Cannot parse GUID value. Value doesn't match to regular expression");const r=s.slice(1).map((i,a)=>a<3?nt.ToHex(new Uint8Array(nt.FromHex(i)).reverse()):i).join("");n=new kt({otherName:new Pp({typeId:tO,value:He.serialize(new qt(nt.FromHex(r)))})});break}case hw:n=new kt({iPAddress:e[1]});break;case f0:n=new kt({registeredID:e[1]});break;case pw:{n=new kt({otherName:new Pp({typeId:nO,value:He.serialize(LL.toASN(e[1]))})});break}case dw:n=new kt({uniformResourceIdentifier:e[1]});break;default:throw new Error("Cannot create GeneralName. Unsupported type of the name")}else Be.isBufferSource(e[0])?n=He.parse(e[0],kt):n=e[0];super(n)}onInit(e){if(e.dNSName!=null)this.type=lw,this.value=e.dNSName;else if(e.rfc822Name!=null)this.type=uw,this.value=e.rfc822Name;else if(e.iPAddress!=null)this.type=hw,this.value=e.iPAddress;else if(e.uniformResourceIdentifier!=null)this.type=dw,this.value=e.uniformResourceIdentifier;else if(e.registeredID!=null)this.type=f0,this.value=e.registeredID;else if(e.directoryName!=null)this.type=cw,this.value=new Cc(e.directoryName).toString();else if(e.otherName!=null)if(e.otherName.typeId===tO){this.type=fw;const n=He.parse(e.otherName.value,qt),s=new RegExp(eO,"i").exec(nt.ToHex(n));if(!s)throw new Error(tee);this.value=s.slice(1).map((r,i)=>i<3?nt.ToHex(new Uint8Array(nt.FromHex(r)).reverse()):r).join("-")}else if(e.otherName.typeId===nO)this.type=pw,this.value=He.parse(e.otherName.value,Ns).toString();else throw new Error(Qj);else throw new Error(Qj)}toJSON(){return{type:this.type,value:this.value}}toTextObject(){let e;switch(this.type){case cw:case lw:case fw:case hw:case f0:case pw:case dw:e=this.type.toUpperCase();break;case uw:e="Email";break;default:throw new Error("Unsupported GeneralName type")}let n=this.value;return this.type===f0&&(n=ml.toString(n)),new Gt(e,void 0,n)}}class Nc extends gl{constructor(e){let n;if(e instanceof Ds)n=e;else if(Array.isArray(e)){const s=[];for(const r of e)if(r instanceof kt)s.push(r);else{const i=He.parse(new Wo(r.type,r.value).rawData,kt);s.push(i)}n=new Ds(s)}else if(Be.isBufferSource(e))n=He.parse(e,Ds);else throw new Error("Cannot initialize GeneralNames. Incorrect incoming arguments");super(n)}onInit(e){const n=[];for(const s of e){let r=null;try{r=new Wo(s)}catch{continue}n.push(r)}this.items=n}toJSON(){return this.items.map(e=>e.toJSON())}toTextObject(){const e=super.toTextObjectEmpty();for(const n of this.items){const s=n.toTextObject();let r=e[s[Gt.NAME]];Array.isArray(r)||(r=[],e[s[Gt.NAME]]=r),r.push(s)}return e}}Nc.NAME="GeneralNames";const dp="-{5}",qp="\\n",nee=`[^${qp}]+`,see=`${dp}BEGIN (${nee}(?=${dp}))${dp}`,ree=`${dp}END \\1${dp}`,kh="\\n",iee=`[^:${qp}]+`,aee=`(?:[^${qp}]+${kh}(?: +[^${qp}]+${kh})*)`,oee="[a-zA-Z0-9=+/]+",lee=`(?:${oee}${kh})+`,sO=`${see}${kh}(?:((?:${iee}: ${aee})+))?${kh}?(${lee})${ree}`;class Dr{static isPem(e){return typeof e=="string"&&new RegExp(sO,"g").test(e.replace(/\r/g,""))}static decodeWithHeaders(e){e=e.replace(/\r/g,"");const n=new RegExp(sO,"g"),s=[];let r=null;for(;r=n.exec(e);){const i=r[3].replace(new RegExp(`[${qp}]+`,"g"),""),a={type:r[1],headers:[],rawData:nt.FromBase64(i)},l=r[2];if(l){const u=l.split(new RegExp(kh,"g"));let h=null;for(const m of u){const[p,g]=m.split(/:(.*)/);if(g===void 0){if(!h)throw new Error("Cannot parse PEM string. Incorrect header value");h.value+=p.trim()}else h&&a.headers.push(h),h={key:p,value:g.trim()}}h&&a.headers.push(h)}s.push(a)}return s}static decode(e){return this.decodeWithHeaders(e).map(s=>s.rawData)}static decodeFirst(e){const n=this.decode(e);if(!n.length)throw new RangeError("PEM string doesn't contain any objects");return n[0]}static encode(e,n){if(Array.isArray(e)){const s=new Array;return n?e.forEach(r=>{if(!Be.isBufferSource(r))throw new TypeError("Cannot encode array of BufferSource in PEM format. Not all items of the array are BufferSource");s.push(this.encodeStruct({type:n,rawData:Be.toArrayBuffer(r)}))}):e.forEach(r=>{if(!("type"in r))throw new TypeError("Cannot encode array of PemStruct in PEM format. Not all items of the array are PemStrut");s.push(this.encodeStruct(r))}),s.join(`
`)}else{if(!n)throw new Error("Required argument 'tag' is missed");return this.encodeStruct({type:n,rawData:Be.toArrayBuffer(e)})}}static encodeStruct(e){var n;const s=e.type.toLocaleUpperCase(),r=[];if(r.push(`-----BEGIN ${s}-----`),!((n=e.headers)===null||n===void 0)&&n.length){for(const h of e.headers)r.push(`${h.key}: ${h.value}`);r.push("")}const i=nt.ToBase64(e.rawData);let a,l=0;const u=Array();for(;l<i.length&&(i.length-l<64?a=i.substring(l):(a=i.substring(l,l+64),l+=64),a.length!==0);)if(u.push(a),a.length<64)break;return r.push(...u),r.push(`-----END ${s}-----`),r.join(`
`)}}Dr.CertificateTag="CERTIFICATE";Dr.CrlTag="CRL";Dr.CertificateRequestTag="CERTIFICATE REQUEST";Dr.PublicKeyTag="PUBLIC KEY";Dr.PrivateKeyTag="PRIVATE KEY";class Qa extends gl{static isAsnEncoded(e){return Be.isBufferSource(e)||typeof e=="string"}static toArrayBuffer(e){if(typeof e=="string"){if(Dr.isPem(e))return Dr.decode(e)[0];if(nt.isHex(e))return nt.FromHex(e);if(nt.isBase64(e))return nt.FromBase64(e);if(nt.isBase64Url(e))return nt.FromBase64Url(e);throw new TypeError("Unsupported format of 'raw' argument. Must be one of DER, PEM, HEX, Base64, or Base4Url")}else{const n=Be.toUint8Array(e);if(n.length>0&&n[0]===48)return Be.toArrayBuffer(e);const s=nt.ToBinary(e);if(Dr.isPem(s))return Dr.decode(s)[0];if(nt.isHex(s))return nt.FromHex(s);if(nt.isBase64(s))return nt.FromBase64(s);if(nt.isBase64Url(s))return nt.FromBase64Url(s);throw new TypeError("Unsupported format of 'raw' argument. Must be one of DER, PEM, HEX, Base64, or Base4Url")}}constructor(...e){Qa.isAsnEncoded(e[0])?super(Qa.toArrayBuffer(e[0]),e[1]):super(e[0])}toString(e="pem"){return e==="pem"?Dr.encode(this.rawData,this.tag):super.toString(e)}}class ea extends Qa{static async create(e,n=Us.get()){if(e instanceof ea)return e;if(Ko.isCryptoKey(e)){if(e.type!=="public")throw new TypeError("Public key is required");const s=await n.subtle.exportKey("spki",e);return new ea(s)}else{if(e.publicKey)return e.publicKey;if(Be.isBufferSource(e))return new ea(e);throw new TypeError("Unsupported PublicKeyType")}}constructor(e){Qa.isAsnEncoded(e)?super(e,Gi):super(e),this.tag=Dr.PublicKeyTag}async export(...e){let n,s=["verify"],r={hash:"SHA-256",...this.algorithm};e.length>1?(r=e[0]||r,s=e[1]||s,n=e[2]||Us.get()):n=e[0]||Us.get();let i=this.rawData;const a=He.parse(this.rawData,Gi);return a.algorithm.algorithm===hp&&(i=cee(a,i)),n.subtle.importKey("spki",i,r,!0,s)}onInit(e){const n=Gs.resolve(Sh),s=this.algorithm=n.toWebAlgorithm(e.algorithm);if(e.algorithm.algorithm===xc){const r=He.parse(e.subjectPublicKey,JN),i=Be.toUint8Array(r.modulus);s.publicExponent=Be.toUint8Array(r.publicExponent),s.modulusLength=(i[0]?i:i.slice(1)).byteLength<<3}}async getThumbprint(...e){var n;let s,r="SHA-1";return e.length>=1&&!(!((n=e[0])===null||n===void 0)&&n.subtle)?(r=e[0]||r,s=e[1]||Us.get()):s=e[0]||Us.get(),await s.subtle.digest(r,this.rawData)}async getKeyIdentifier(...e){let n,s="SHA-1";e.length===1?typeof e[0]=="string"?(s=e[0],n=Us.get()):n=e[0]:e.length===2?(s=e[0],n=e[1]):n=Us.get();const r=He.parse(this.rawData,Gi);return await n.subtle.digest(s,r.subjectPublicKey)}toTextObject(){const e=this.toTextObjectEmpty(),n=He.parse(this.rawData,Gi);switch(e.Algorithm=kc.serializeAlgorithm(n.algorithm),n.algorithm.algorithm){case Fp:e["EC Point"]=n.subjectPublicKey;break;case xc:default:e["Raw Data"]=n.subjectPublicKey}return e}}function cee(t,e){return t.algorithm=new We({algorithm:xc,parameters:null}),e=He.serialize(t),e}class Kp extends Fr{static async create(e,n=!1,s=Us.get()){if("name"in e&&"serialNumber"in e)return new Kp(e,n);const i=await(await ea.create(e,s)).getKeyIdentifier(s);return new Kp(nt.ToHex(i),n)}constructor(...e){if(Be.isBufferSource(e[0]))super(e[0]);else if(typeof e[0]=="string"){const n=new Yl({keyIdentifier:new ON(nt.FromHex(e[0]))});super(nk,e[1],He.serialize(n))}else{const n=e[0],s=n.name instanceof Nc?He.parse(n.name.rawData,Ds):n.name,r=new Yl({authorityCertIssuer:s,authorityCertSerialNumber:nt.FromHex(n.serialNumber)});super(nk,e[1],He.serialize(r))}}onInit(e){super.onInit(e);const n=He.parse(e.extnValue,Yl);n.keyIdentifier&&(this.keyId=nt.ToHex(n.keyIdentifier)),(n.authorityCertIssuer||n.authorityCertSerialNumber)&&(this.certId={name:n.authorityCertIssuer||[],serialNumber:n.authorityCertSerialNumber?nt.ToHex(n.authorityCertSerialNumber):""})}toTextObject(){const e=this.toTextObjectWithoutValue(),n=He.parse(this.value,Yl);return n.authorityCertIssuer&&(e["Authority Issuer"]=new Nc(n.authorityCertIssuer).toTextObject()),n.authorityCertSerialNumber&&(e["Authority Serial Number"]=n.authorityCertSerialNumber),n.keyIdentifier&&(e[""]=n.keyIdentifier),e}}Kp.NAME="Authority Key Identifier";class xP extends Fr{constructor(...e){if(Be.isBufferSource(e[0])){super(e[0]);const n=He.parse(this.value,Hy);this.ca=n.cA,this.pathLength=n.pathLenConstraint}else{const n=new Hy({cA:e[0],pathLenConstraint:e[1]});super(BL,e[2],He.serialize(n)),this.ca=e[0],this.pathLength=e[1]}}toTextObject(){const e=this.toTextObjectWithoutValue();return this.ca&&(e.CA=this.ca),this.pathLength!==void 0&&(e["Path Length"]=this.pathLength),e}}xP.NAME="Basic Constraints";var rO;(function(t){t.serverAuth="1.3.6.1.5.5.7.3.1",t.clientAuth="1.3.6.1.5.5.7.3.2",t.codeSigning="1.3.6.1.5.5.7.3.3",t.emailProtection="1.3.6.1.5.5.7.3.4",t.timeStamping="1.3.6.1.5.5.7.3.8",t.ocspSigning="1.3.6.1.5.5.7.3.9"})(rO||(rO={}));class wP extends Fr{constructor(...e){if(Be.isBufferSource(e[0])){super(e[0]);const n=He.parse(this.value,Wy);this.usages=n.map(s=>s)}else{const n=new Wy(e[0]);super(FL,e[1],He.serialize(n)),this.usages=e[0]}}toTextObject(){const e=this.toTextObjectWithoutValue();return e[""]=this.usages.map(n=>ml.toString(n)).join(", "),e}}wP.NAME="Extended Key Usages";var $a;(function(t){t[t.digitalSignature=1]="digitalSignature",t[t.nonRepudiation=2]="nonRepudiation",t[t.keyEncipherment=4]="keyEncipherment",t[t.dataEncipherment=8]="dataEncipherment",t[t.keyAgreement=16]="keyAgreement",t[t.keyCertSign=32]="keyCertSign",t[t.cRLSign=64]="cRLSign",t[t.encipherOnly=128]="encipherOnly",t[t.decipherOnly=256]="decipherOnly"})($a||($a={}));class SP extends Fr{constructor(...e){if(Be.isBufferSource(e[0])){super(e[0]);const n=He.parse(this.value,ow);this.usages=n.toNumber()}else{const n=new ow(e[0]);super(HL,e[1],He.serialize(n)),this.usages=e[0]}}toTextObject(){const e=this.toTextObjectWithoutValue(),n=He.parse(this.value,ow);return e[""]=n.toJSON().join(", "),e}}SP.NAME="Key Usages";class qb extends Fr{static async create(e,n=!1,s=Us.get()){const i=await(await ea.create(e,s)).getKeyIdentifier(s);return new qb(nt.ToHex(i),n)}constructor(...e){if(Be.isBufferSource(e[0])){super(e[0]);const n=He.parse(this.value,sl);this.keyId=nt.ToHex(n)}else{const n=typeof e[0]=="string"?nt.FromHex(e[0]):e[0],s=new sl(n);super(WL,e[1],He.serialize(s)),this.keyId=nt.ToHex(n)}}toTextObject(){const e=this.toTextObjectWithoutValue(),n=He.parse(this.value,sl);return e[""]=n,e}}qb.NAME="Subject Key Identifier";class kP extends Fr{constructor(...e){Be.isBufferSource(e[0])?super(e[0]):super(KL,e[1],new Nc(e[0]||[]).rawData)}onInit(e){super.onInit(e);const n=He.parse(e.extnValue,yk);this.names=new Nc(n)}toTextObject(){const e=this.toTextObjectWithoutValue(),n=this.names.toTextObject();for(const s in n)e[s]=n[s];return e}}kP.NAME="Subject Alternative Name";class Ur{static register(e,n){this.items.set(e,n)}static create(e){const n=new Fr(e),s=this.items.get(n.type);return s?new s(e):n}}Ur.items=new Map;class CP extends Fr{constructor(...e){var n;if(Be.isBufferSource(e[0])){super(e[0]);const s=He.parse(this.value,qy);this.policies=s.map(r=>r.policyIdentifier)}else{const s=e[0],r=(n=e[1])!==null&&n!==void 0?n:!1,i=new qy(s.map(a=>new xb({policyIdentifier:a})));super($L,r,He.serialize(i)),this.policies=s}}toTextObject(){const e=this.toTextObjectWithoutValue();return e.Policy=this.policies.map(n=>new Gt("",{},ml.toString(n))),e}}CP.NAME="Certificate Policies";Ur.register($L,CP);class NP extends Fr{constructor(...e){var n;if(Be.isBufferSource(e[0]))super(e[0]);else if(Array.isArray(e[0])&&typeof e[0][0]=="string"){const r=e[0].map(a=>new zh({distributionPoint:new vc({fullName:[new kt({uniformResourceIdentifier:a})]})})),i=new sh(r);super(ok,e[1],He.serialize(i))}else{const s=new sh(e[0]);super(ok,e[1],He.serialize(s))}(n=this.distributionPoints)!==null&&n!==void 0||(this.distributionPoints=[])}onInit(e){super.onInit(e);const n=He.parse(e.extnValue,sh);this.distributionPoints=n}toTextObject(){const e=this.toTextObjectWithoutValue();return e["Distribution Point"]=this.distributionPoints.map(n=>{var s;const r={};return n.distributionPoint&&(r[""]=(s=n.distributionPoint.fullName)===null||s===void 0?void 0:s.map(i=>new Wo(i).toString()).join(", ")),n.reasons&&(r.Reasons=n.reasons.toString()),n.cRLIssuer&&(r["CRL Issuer"]=n.cRLIssuer.map(i=>i.toString()).join(", ")),r}),e}}NP.NAME="CRL Distribution Points";class EP extends Fr{constructor(...e){var n,s,r,i;if(Be.isBufferSource(e[0]))super(e[0]);else if(e[0]instanceof qu){const a=new qu(e[0]);super(tk,e[1],He.serialize(a))}else{const a=e[0],l=new qu;m0(l,a,UT,"ocsp"),m0(l,a,HT,"caIssuers"),m0(l,a,VT,"timeStamping"),m0(l,a,qT,"caRepository"),super(tk,e[1],He.serialize(l))}(n=this.ocsp)!==null&&n!==void 0||(this.ocsp=[]),(s=this.caIssuers)!==null&&s!==void 0||(this.caIssuers=[]),(r=this.timeStamping)!==null&&r!==void 0||(this.timeStamping=[]),(i=this.caRepository)!==null&&i!==void 0||(this.caRepository=[])}onInit(e){super.onInit(e),this.ocsp=[],this.caIssuers=[],this.timeStamping=[],this.caRepository=[],He.parse(e.extnValue,qu).forEach(s=>{switch(s.accessMethod){case UT:this.ocsp.push(new Wo(s.accessLocation));break;case HT:this.caIssuers.push(new Wo(s.accessLocation));break;case VT:this.timeStamping.push(new Wo(s.accessLocation));break;case qT:this.caRepository.push(new Wo(s.accessLocation));break}})}toTextObject(){const e=this.toTextObjectWithoutValue();return this.ocsp.length&&p0(e,"OCSP",this.ocsp),this.caIssuers.length&&p0(e,"CA Issuers",this.caIssuers),this.timeStamping.length&&p0(e,"Time Stamping",this.timeStamping),this.caRepository.length&&p0(e,"CA Repository",this.caRepository),e}}EP.NAME="Authority Info Access";function p0(t,e,n){if(n.length===1)t[e]=n[0].toTextObject();else{const s=new Gt("");n.forEach((r,i)=>{const a=r.toTextObject(),l=`${a[Gt.NAME]} ${i+1}`;let u=s[l];Array.isArray(u)||(u=[],s[l]=u),u.push(a)}),t[e]=s}}function m0(t,e,n,s){const r=e[s];r&&(Array.isArray(r)?r:[r]).forEach(a=>{typeof a=="string"&&(a=new Wo("url",a)),t.push(new fm({accessMethod:n,accessLocation:He.parse(a.rawData,kt)}))})}class AP extends Fr{constructor(...e){Be.isBufferSource(e[0])?super(e[0]):super(UL,e[1],new Nc(e[0]||[]).rawData)}onInit(e){super.onInit(e);const n=He.parse(e.extnValue,Ds);this.names=new Nc(n)}toTextObject(){const e=this.toTextObjectWithoutValue(),n=this.names.toTextObject();for(const s in n)e[s]=n[s];return e}}AP.NAME="Issuer Alternative Name";class Wh extends gl{constructor(...e){let n;if(Be.isBufferSource(e[0]))n=Be.toArrayBuffer(e[0]);else{const s=e[0],r=Array.isArray(e[1])?e[1].map(i=>Be.toArrayBuffer(i)):[];n=He.serialize(new Za({type:s,values:r}))}super(n,Za)}onInit(e){this.type=e.type,this.values=e.values}toTextObject(){const e=this.toTextObjectWithoutValue();return e.Value=this.values.map(n=>new Gt("",{"":n})),e}toTextObjectWithoutValue(){const e=this.toTextObjectEmpty();return e[Gt.NAME]===Wh.NAME&&(e[Gt.NAME]=ml.toString(this.type)),e}}Wh.NAME="Attribute";class RP extends Wh{constructor(...e){var n;if(Be.isBufferSource(e[0]))super(e[0]);else{const s=new yv({printableString:e[0]});super(mP,[He.serialize(s)])}(n=this.password)!==null&&n!==void 0||(this.password="")}onInit(e){if(super.onInit(e),this.values[0]){const n=He.parse(this.values[0],yv);this.password=n.toString()}}toTextObject(){const e=this.toTextObjectWithoutValue();return e[Gt.VALUE]=this.password,e}}RP.NAME="Challenge Password";class tE extends Wh{constructor(...e){var n;if(Be.isBufferSource(e[0]))super(e[0]);else{const s=e[0],r=new bc;for(const i of s)r.push(He.parse(i.rawData,Ti));super(eE,[He.serialize(r)])}(n=this.items)!==null&&n!==void 0||(this.items=[])}onInit(e){if(super.onInit(e),this.values[0]){const n=He.parse(this.values[0],bc);this.items=n.map(s=>Ur.create(He.serialize(s)))}}toTextObject(){const e=this.toTextObjectWithoutValue(),n=this.items.map(s=>s.toTextObject());for(const s of n)e[s[Gt.NAME]]=s;return e}}tE.NAME="Extensions";class Kb{static register(e,n){this.items.set(e,n)}static create(e){const n=new Wh(e),s=this.items.get(n.type);return s?new s(e):n}}Kb.items=new Map;const Wb="crypto.signatureFormatter";class uee{toAsnSignature(e,n){return Be.toArrayBuffer(n)}toWebSignature(e,n){return Be.toArrayBuffer(n)}}var Z0;let o2=Z0=class{static createPssParams(e,n){const s=Z0.getHashAlgorithm(e);return s?new Sc({hashAlgorithm:s,maskGenAlgorithm:new We({algorithm:Lb,parameters:He.serialize(s)}),saltLength:n}):null}static getHashAlgorithm(e){const n=Gs.resolve(Sh);return typeof e=="string"?n.toAsnAlgorithm({name:e}):typeof e=="object"&&e&&"name"in e?n.toAsnAlgorithm(e):null}toAsnAlgorithm(e){switch(e.name.toLowerCase()){case"rsassa-pkcs1-v1_5":if("hash"in e){let n;if(typeof e.hash=="string")n=e.hash;else if(e.hash&&typeof e.hash=="object"&&"name"in e.hash&&typeof e.hash.name=="string")n=e.hash.name.toUpperCase();else throw new Error("Cannot get hash algorithm name");switch(n.toLowerCase()){case"sha-1":return new We({algorithm:ov,parameters:null});case"sha-256":return new We({algorithm:Bk,parameters:null});case"sha-384":return new We({algorithm:lv,parameters:null});case"sha-512":return new We({algorithm:cv,parameters:null})}}else return new We({algorithm:xc,parameters:null});break;case"rsa-pss":if("hash"in e){if(!("saltLength"in e&&typeof e.saltLength=="number"))throw new Error("Cannot get 'saltLength' from 'alg' argument");const n=Z0.createPssParams(e.hash,e.saltLength);if(!n)throw new Error("Cannot create PSS parameters");return new We({algorithm:hp,parameters:He.serialize(n)})}else return new We({algorithm:hp,parameters:null})}return null}toWebAlgorithm(e){switch(e.algorithm){case xc:return{name:"RSASSA-PKCS1-v1_5"};case ov:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case Bk:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case lv:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case cv:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case hp:if(e.parameters){const n=He.parse(e.parameters,Sc);return{name:"RSA-PSS",hash:Gs.resolve(Sh).toWebAlgorithm(n.hashAlgorithm),saltLength:n.saltLength}}else return{name:"RSA-PSS"}}return null}};o2=Z0=D([zb()],o2);Gs.registerSingleton(km,o2);let l2=class{toAsnAlgorithm(e){switch(e.name.toLowerCase()){case"sha-1":return new We({algorithm:uv});case"sha-256":return new We({algorithm:hv});case"sha-384":return new We({algorithm:dv});case"sha-512":return new We({algorithm:fv})}return null}toWebAlgorithm(e){switch(e.algorithm){case uv:return{name:"SHA-1"};case hv:return{name:"SHA-256"};case dv:return{name:"SHA-384"};case fv:return{name:"SHA-512"}}return null}};l2=D([zb()],l2);Gs.registerSingleton(km,l2);class ui{addPadding(e,n){const s=Be.toUint8Array(n),r=new Uint8Array(e);return r.set(s,e-s.length),r.buffer}removePadding(e,n=!1){let s=Be.toUint8Array(e);for(let r=0;r<s.length;r++)if(s[r]){s=s.slice(r);break}if(n&&s[0]>127){const r=new Uint8Array(s.length+1);return r.set(s,1),r.buffer}return s.buffer}toAsnSignature(e,n){if(e.name==="ECDSA"){const s=e.namedCurve,r=ui.namedCurveSize.get(s)||ui.defaultNamedCurveSize,i=new av,a=Be.toUint8Array(n);return i.r=this.removePadding(a.slice(0,r),!0),i.s=this.removePadding(a.slice(r,r+r),!0),He.serialize(i)}return null}toWebSignature(e,n){if(e.name==="ECDSA"){const s=He.parse(n,av),r=e.namedCurve,i=ui.namedCurveSize.get(r)||ui.defaultNamedCurveSize,a=this.addPadding(i,this.removePadding(s.r)),l=this.addPadding(i,this.removePadding(s.s));return SX(a,l)}return null}}ui.namedCurveSize=new Map;ui.defaultNamedCurveSize=32;const mw="1.3.101.110",iO="1.3.101.111",gw="1.3.101.112",aO="1.3.101.113";let c2=class{toAsnAlgorithm(e){let n=null;switch(e.name.toLowerCase()){case"ed25519":n=gw;break;case"x25519":n=mw;break;case"eddsa":switch(e.namedCurve.toLowerCase()){case"ed25519":n=gw;break;case"ed448":n=aO;break}break;case"ecdh-es":switch(e.namedCurve.toLowerCase()){case"x25519":n=mw;break;case"x448":n=iO;break}}return n?new We({algorithm:n}):null}toWebAlgorithm(e){switch(e.algorithm){case gw:return{name:"Ed25519"};case aO:return{name:"EdDSA",namedCurve:"Ed448"};case mw:return{name:"X25519"};case iO:return{name:"ECDH-ES",namedCurve:"X448"}}return null}};c2=D([zb()],c2);Gs.registerSingleton(km,c2);var xf,wf,Sf,kf,Cf,Nf,Ef,Pu;class hee extends Qa{get subjectName(){return Et(this,wf,"f")||vn(this,wf,new Cc(this.asn.certificationRequestInfo.subject),"f"),Et(this,wf,"f")}get subject(){return Et(this,Sf,"f")||vn(this,Sf,this.subjectName.toString(),"f"),Et(this,Sf,"f")}get signatureAlgorithm(){if(!Et(this,kf,"f")){const e=Gs.resolve(Sh);vn(this,kf,e.toWebAlgorithm(this.asn.signatureAlgorithm),"f")}return Et(this,kf,"f")}get signature(){return Et(this,Cf,"f")||vn(this,Cf,this.asn.signature,"f"),Et(this,Cf,"f")}get publicKey(){return Et(this,Nf,"f")||vn(this,Nf,new ea(this.asn.certificationRequestInfo.subjectPKInfo),"f"),Et(this,Nf,"f")}get attributes(){return Et(this,Ef,"f")||vn(this,Ef,this.asn.certificationRequestInfo.attributes.map(e=>Kb.create(He.serialize(e))),"f"),Et(this,Ef,"f")}get extensions(){if(!Et(this,Pu,"f")){vn(this,Pu,[],"f");const e=this.getAttribute(eE);e instanceof tE&&vn(this,Pu,e.items,"f")}return Et(this,Pu,"f")}get tbs(){return Et(this,xf,"f")||vn(this,xf,this.asn.certificationRequestInfoRaw||He.serialize(this.asn.certificationRequestInfo),"f"),Et(this,xf,"f")}constructor(e){const n=Qa.isAsnEncoded(e)?[e,Hp]:[e];super(n[0],n[1]),xf.set(this,void 0),wf.set(this,void 0),Sf.set(this,void 0),kf.set(this,void 0),Cf.set(this,void 0),Nf.set(this,void 0),Ef.set(this,void 0),Pu.set(this,void 0),this.tag=Dr.CertificateRequestTag}onInit(e){}getAttribute(e){for(const n of this.attributes)if(n.type===e)return n;return null}getAttributes(e){return this.attributes.filter(n=>n.type===e)}getExtension(e){for(const n of this.extensions)if(n.type===e)return n;return null}getExtensions(e){return this.extensions.filter(n=>n.type===e)}async verify(e=Us.get()){const n={...this.publicKey.algorithm,...this.signatureAlgorithm},s=await this.publicKey.export(n,["verify"],e),r=Gs.resolveAll(Wb).reverse();let i=null;for(const l of r)if(i=l.toWebSignature(n,this.signature),i)break;if(!i)throw Error("Cannot convert WebCrypto signature value to ASN.1 format");return await e.subtle.verify(this.signatureAlgorithm,s,i,this.tbs)}toTextObject(){const e=this.toTextObjectEmpty(),n=He.parse(this.rawData,Hp),s=n.certificationRequestInfo,r=new Gt("",{Version:`${ph[s.version]} (${s.version})`,Subject:this.subject,"Subject Public Key Info":this.publicKey});if(this.attributes.length){const i=new Gt("");for(const a of this.attributes){const l=a.toTextObject();i[l[Gt.NAME]]=l}r.Attributes=i}return e.Data=r,e.Signature=new Gt("",{Algorithm:kc.serializeAlgorithm(n.signatureAlgorithm),"":n.signature}),e}}xf=new WeakMap,wf=new WeakMap,Sf=new WeakMap,kf=new WeakMap,Cf=new WeakMap,Nf=new WeakMap,Ef=new WeakMap,Pu=new WeakMap;hee.NAME="PKCS#10 Certificate Request";var Af,Rf,Tf,jf,Of,Mf,If,Df,Lf,Pf,Bu,Bf;class TP extends Qa{get publicKey(){return Et(this,Bf,"f")||vn(this,Bf,new ea(this.asn.tbsCertificate.subjectPublicKeyInfo),"f"),Et(this,Bf,"f")}get serialNumber(){if(!Et(this,Rf,"f")){const e=this.asn.tbsCertificate;let n=new Uint8Array(e.serialNumber);n.length>1&&n[0]===0&&n[1]>127&&(n=n.slice(1)),vn(this,Rf,nt.ToHex(n),"f")}return Et(this,Rf,"f")}get subjectName(){return Et(this,Tf,"f")||vn(this,Tf,new Cc(this.asn.tbsCertificate.subject),"f"),Et(this,Tf,"f")}get subject(){return Et(this,jf,"f")||vn(this,jf,this.subjectName.toString(),"f"),Et(this,jf,"f")}get issuerName(){return Et(this,Of,"f")||vn(this,Of,new Cc(this.asn.tbsCertificate.issuer),"f"),Et(this,Of,"f")}get issuer(){return Et(this,Mf,"f")||vn(this,Mf,this.issuerName.toString(),"f"),Et(this,Mf,"f")}get notBefore(){if(!Et(this,If,"f")){const e=this.asn.tbsCertificate.validity.notBefore.utcTime||this.asn.tbsCertificate.validity.notBefore.generalTime;if(!e)throw new Error("Cannot get 'notBefore' value");vn(this,If,e,"f")}return Et(this,If,"f")}get notAfter(){if(!Et(this,Df,"f")){const e=this.asn.tbsCertificate.validity.notAfter.utcTime||this.asn.tbsCertificate.validity.notAfter.generalTime;if(!e)throw new Error("Cannot get 'notAfter' value");vn(this,Df,e,"f")}return Et(this,Df,"f")}get signatureAlgorithm(){if(!Et(this,Lf,"f")){const e=Gs.resolve(Sh);vn(this,Lf,e.toWebAlgorithm(this.asn.signatureAlgorithm),"f")}return Et(this,Lf,"f")}get signature(){return Et(this,Pf,"f")||vn(this,Pf,this.asn.signatureValue,"f"),Et(this,Pf,"f")}get extensions(){return Et(this,Bu,"f")||(vn(this,Bu,[],"f"),this.asn.tbsCertificate.extensions&&vn(this,Bu,this.asn.tbsCertificate.extensions.map(e=>Ur.create(He.serialize(e))),"f")),Et(this,Bu,"f")}get tbs(){return Et(this,Af,"f")||vn(this,Af,this.asn.tbsCertificateRaw||He.serialize(this.asn.tbsCertificate),"f"),Et(this,Af,"f")}constructor(e){const n=Qa.isAsnEncoded(e)?[e,mh]:[e];super(n[0],n[1]),Af.set(this,void 0),Rf.set(this,void 0),Tf.set(this,void 0),jf.set(this,void 0),Of.set(this,void 0),Mf.set(this,void 0),If.set(this,void 0),Df.set(this,void 0),Lf.set(this,void 0),Pf.set(this,void 0),Bu.set(this,void 0),Bf.set(this,void 0),this.tag=Dr.CertificateTag}onInit(e){}getExtension(e){for(const n of this.extensions)if(typeof e=="string"){if(n.type===e)return n}else if(n instanceof e)return n;return null}getExtensions(e){return this.extensions.filter(n=>typeof e=="string"?n.type===e:n instanceof e)}async verify(e={},n=Us.get()){let s,r;const i=e.publicKey;try{if(!i)s={...this.publicKey.algorithm,...this.signatureAlgorithm},r=await this.publicKey.export(s,["verify"],n);else if("publicKey"in i)s={...i.publicKey.algorithm,...this.signatureAlgorithm},r=await i.publicKey.export(s,["verify"],n);else if(i instanceof ea)s={...i.algorithm,...this.signatureAlgorithm},r=await i.export(s,["verify"],n);else if(Be.isBufferSource(i)){const h=new ea(i);s={...h.algorithm,...this.signatureAlgorithm},r=await h.export(s,["verify"],n)}else s={...i.algorithm,...this.signatureAlgorithm},r=i}catch{return!1}const a=Gs.resolveAll(Wb).reverse();let l=null;for(const h of a)if(l=h.toWebSignature(s,this.signature),l)break;if(!l)throw Error("Cannot convert ASN.1 signature value to WebCrypto format");const u=await n.subtle.verify(this.signatureAlgorithm,r,l,this.tbs);if(e.signatureOnly)return u;{const m=(e.date||new Date).getTime();return u&&this.notBefore.getTime()<m&&m<this.notAfter.getTime()}}async getThumbprint(...e){let n,s="SHA-1";return e[0]&&(e[0].subtle?n=e[0]:(s=e[0]||s,n=e[1])),n??(n=Us.get()),await n.subtle.digest(s,this.rawData)}async isSelfSigned(e=Us.get()){return this.subject===this.issuer&&await this.verify({signatureOnly:!0},e)}toTextObject(){const e=this.toTextObjectEmpty(),n=He.parse(this.rawData,mh),s=n.tbsCertificate,r=new Gt("",{Version:`${ph[s.version]} (${s.version})`,"Serial Number":s.serialNumber,"Signature Algorithm":kc.serializeAlgorithm(s.signature),Issuer:this.issuer,Validity:new Gt("",{"Not Before":s.validity.notBefore.getTime(),"Not After":s.validity.notAfter.getTime()}),Subject:this.subject,"Subject Public Key Info":this.publicKey});if(s.issuerUniqueID&&(r["Issuer Unique ID"]=s.issuerUniqueID),s.subjectUniqueID&&(r["Subject Unique ID"]=s.subjectUniqueID),this.extensions.length){const i=new Gt("");for(const a of this.extensions){const l=a.toTextObject();i[l[Gt.NAME]]=l}r.Extensions=i}return e.Data=r,e.Signature=new Gt("",{Algorithm:kc.serializeAlgorithm(n.signatureAlgorithm),"":n.signatureValue}),e}}Af=new WeakMap,Rf=new WeakMap,Tf=new WeakMap,jf=new WeakMap,Of=new WeakMap,Mf=new WeakMap,If=new WeakMap,Df=new WeakMap,Lf=new WeakMap,Pf=new WeakMap,Bu=new WeakMap,Bf=new WeakMap;TP.NAME="Certificate";var oO;(function(t){t[t.unspecified=0]="unspecified",t[t.keyCompromise=1]="keyCompromise",t[t.cACompromise=2]="cACompromise",t[t.affiliationChanged=3]="affiliationChanged",t[t.superseded=4]="superseded",t[t.cessationOfOperation=5]="cessationOfOperation",t[t.certificateHold=6]="certificateHold",t[t.removeFromCRL=8]="removeFromCRL",t[t.privilegeWithdrawn=9]="privilegeWithdrawn",t[t.aACompromise=10]="aACompromise"})(oO||(oO={}));Ur.register(BL,xP);Ur.register(FL,wP);Ur.register(HL,SP);Ur.register(WL,qb);Ur.register(nk,Kp);Ur.register(KL,kP);Ur.register(ok,NP);Ur.register(tk,EP);Ur.register(UL,AP);Kb.register(mP,RP);Kb.register(eE,tE);Gs.registerSingleton(Wb,uee);Gs.registerSingleton(Wb,ui);ui.namedCurveSize.set("P-256",32);ui.namedCurveSize.set("K-256",32);ui.namedCurveSize.set("P-384",48);ui.namedCurveSize.set("P-521",66);const dee=["-----BEGIN CERTIFICATE-----","-----BEGIN X509 CERTIFICATE-----","-----BEGIN TRUSTED CERTIFICATE-----"],fee=["-----BEGIN PRIVATE KEY-----","-----BEGIN RSA PRIVATE KEY-----","-----BEGIN EC PRIVATE KEY-----","-----BEGIN ENCRYPTED PRIVATE KEY-----"],pee=["-----BEGIN PUBLIC KEY-----","-----BEGIN RSA PUBLIC KEY-----"],mee=["-----BEGIN CERTIFICATE REQUEST-----","-----BEGIN NEW CERTIFICATE REQUEST-----"];function gee(t){const e=t.trim();for(const n of dee)if(e.startsWith(n))return{type:"certificate",content:e};for(const n of fee)if(e.startsWith(n))return{type:"private-key",content:e};for(const n of pee)if(e.startsWith(n))return{type:"public-key",content:e};for(const n of mee)if(e.startsWith(n))return{type:"csr",content:e};return null}function yee(t){try{const e=new TP(t),n=new Date,s={};for(const k of e.subject.split(", ")){const[C,E]=k.split("=");C&&E&&(s[C]=E)}const r={};for(const k of e.issuer.split(", ")){const[C,E]=k.split("=");C&&E&&(r[C]=E)}const i=e.notBefore,a=e.notAfter,l=n>a,u=n<i,h=Math.ceil((a.getTime()-n.getTime())/(1e3*60*60*24)),m=e.subject===e.issuer;let p="Unknown";try{const k=e.publicKey;p=k.algorithm.name||"Unknown","namedCurve"in k.algorithm&&(p+=` (${k.algorithm.namedCurve})`),"modulusLength"in k.algorithm&&(p+=` ${k.algorithm.modulusLength}-bit`)}catch{}const g=e.signatureAlgorithm.name||"Unknown";let y,b,_,w=!1;for(const k of e.extensions){if(k.type==="2.5.29.15")try{const C=k;y=[],C.usages&$a.digitalSignature&&y.push("Digital Signature"),C.usages&$a.keyEncipherment&&y.push("Key Encipherment"),C.usages&$a.dataEncipherment&&y.push("Data Encipherment"),C.usages&$a.keyAgreement&&y.push("Key Agreement"),C.usages&$a.keyCertSign&&y.push("Certificate Signing"),C.usages&$a.cRLSign&&y.push("CRL Signing"),C.usages&$a.nonRepudiation&&y.push("Non-Repudiation")}catch{}if(k.type==="2.5.29.37")try{b=k.usages.map(E=>{const A=String(E);return{"1.3.6.1.5.5.7.3.1":"Server Authentication","1.3.6.1.5.5.7.3.2":"Client Authentication","1.3.6.1.5.5.7.3.3":"Code Signing","1.3.6.1.5.5.7.3.4":"Email Protection","1.3.6.1.5.5.7.3.8":"Time Stamping","1.3.6.1.5.5.7.3.9":"OCSP Signing"}[A]||A})}catch{}if(k.type==="2.5.29.17")try{_=k.names.items.map(E=>E.type==="dns"?`DNS:${E.value}`:E.type==="ip"?`IP:${E.value}`:E.type==="email"?`Email:${E.value}`:E.type==="url"?`URI:${E.value}`:String(E.value))}catch{}if(k.type==="2.5.29.19")try{w=k.ca}catch{}}return{subject:s,issuer:r,serialNumber:e.serialNumber,notBefore:i,notAfter:a,isExpired:l,isNotYetValid:u,daysUntilExpiry:h,keyAlgorithm:p,signatureAlgorithm:g,keyUsage:y,extKeyUsage:b,subjectAltNames:_,isSelfSigned:m,isCA:w}}catch(e){return console.error("Failed to parse certificate:",e),null}}function lO(t){return t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",timeZoneName:"short"})}function yw(t){const e=["CN","O","OU","L","ST","C"],n=[];for(const s of e)t[s]&&n.push(`${s}=${t[s]}`);for(const[s,r]of Object.entries(t))e.includes(s)||n.push(`${s}=${r}`);return n.join(", ")}function u2(t){const e=Pe.c(33),{name:n,pem:s}=t,[r,i]=F.useState(!1);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=()=>i(xee),e[0]=a):a=e[0];const l=a,[u,h]=F.useState(!1);let m,p;if(e[1]!==u||e[2]!==r||e[3]!==n||e[4]!==s){p=Symbol.for("react.early_return_sentinel");e:{const g=yee(s);let y;e[7]!==s?(y=async()=>{await navigator.clipboard.writeText(s),h(!0),setTimeout(()=>h(!1),2e3)},e[7]=s,e[8]=y):y=e[8];const b=y;if(!g){let G;e[9]===Symbol.for("react.memo_cache_sentinel")?(G=f.jsx(Ly,{size:14,className:"text-amber-500"}),e[9]=G):G=e[9];let $;e[10]!==n?($=f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n}),e[10]=n,e[11]=$):$=e[11];let U;e[12]===Symbol.for("react.memo_cache_sentinel")?(U=f.jsx("span",{className:"text-xs text-neutral-500",children:"Failed to parse certificate"}),e[12]=U):U=e[12];let Z;e[13]!==$?(Z=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-3",children:f.jsxs("div",{className:"flex items-center gap-2",children:[G,$,U]})}),e[13]=$,e[14]=Z):Z=e[14],p=Z;break e}let _="text-emerald-500",w="bg-emerald-100 dark:bg-emerald-500/20",k="Valid";g.isExpired?(_="text-red-500",w="bg-red-100 dark:bg-red-500/20",k="Expired"):g.isNotYetValid?(_="text-amber-500",w="bg-amber-100 dark:bg-amber-500/20",k="Not Yet Valid"):g.daysUntilExpiry<=30&&(_="text-amber-500",w="bg-amber-100 dark:bg-amber-500/20",k=`Expires in ${g.daysUntilExpiry} days`);let C;e[15]===Symbol.for("react.memo_cache_sentinel")?(C=f.jsx(Dh,{size:14,className:"text-blue-500 dark:text-blue-400"}),e[15]=C):C=e[15];let E;e[16]!==n?(E=f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n}),e[16]=n,e[17]=E):E=e[17];const A=`text-xs px-1.5 py-0.5 rounded ${w} ${_}`;let R;e[18]!==k||e[19]!==A?(R=f.jsx("span",{className:A,children:k}),e[18]=k,e[19]=A,e[20]=R):R=e[20];let N;e[21]!==b?(N=G=>{G.stopPropagation(),b()},e[21]=b,e[22]=N):N=e[22];let M;e[23]!==u?(M=u?f.jsx(Tn,{size:14,className:"text-emerald-500"}):f.jsx(js,{size:14,className:"text-neutral-400"}),e[23]=u,e[24]=M):M=e[24];let I;e[25]!==M||e[26]!==N?(I=f.jsx("button",{onClick:N,className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy certificate",children:M}),e[25]=M,e[26]=N,e[27]=I):I=e[27];let W;e[28]!==r?(W=r?f.jsx(Ss,{size:14,className:"text-neutral-400"}):f.jsx(di,{size:14,className:"text-neutral-400"}),e[28]=r,e[29]=W):W=e[29];let P;e[30]!==I||e[31]!==W?(P=f.jsxs("div",{className:"flex items-center gap-1",children:[I,W]}),e[30]=I,e[31]=W,e[32]=P):P=e[32],m=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:l,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[C,E,R,g.isCA&&f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-purple-100 dark:bg-purple-500/20 text-purple-600 dark:text-purple-400",children:"CA"}),g.isSelfSigned&&f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-neutral-200 dark:bg-neutral-600/50 text-neutral-600 dark:text-neutral-400",children:"Self-Signed"})]}),P]}),r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3 space-y-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Subject"}),f.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300",children:g.subject.CN||yw(g.subject)}),g.subject.CN&&Object.keys(g.subject).length>1&&f.jsx("div",{className:"text-xs font-mono text-neutral-500 mt-0.5",children:yw(g.subject)})]}),!g.isSelfSigned&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Issuer"}),f.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300",children:g.issuer.CN||yw(g.issuer)})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Not Before"}),f.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300",children:lO(g.notBefore)})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Not After"}),f.jsxs("div",{className:`text-xs font-mono flex items-center gap-1 ${g.isExpired?"text-red-500":g.daysUntilExpiry<=30?"text-amber-500":"text-neutral-700 dark:text-neutral-300"}`,children:[g.isExpired?f.jsx(Ly,{size:12}):g.daysUntilExpiry<=30?f.jsx(fl,{size:12}):f.jsx(uY,{size:12,className:"text-emerald-500"}),lO(g.notAfter)]})]})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Serial Number"}),f.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300 break-all",children:g.serialNumber})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Key Algorithm"}),f.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300",children:g.keyAlgorithm})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Signature Algorithm"}),f.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300",children:g.signatureAlgorithm})]})]}),g.subjectAltNames&&g.subjectAltNames.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Subject Alternative Names"}),f.jsx("div",{className:"flex flex-wrap gap-1",children:g.subjectAltNames.map(_ee)})]}),g.keyUsage&&g.keyUsage.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Key Usage"}),f.jsx("div",{className:"flex flex-wrap gap-1",children:g.keyUsage.map(bee)})]}),g.extKeyUsage&&g.extKeyUsage.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Extended Key Usage"}),f.jsx("div",{className:"flex flex-wrap gap-1",children:g.extKeyUsage.map(vee)})]})]})]})}e[1]=u,e[2]=r,e[3]=n,e[4]=s,e[5]=m,e[6]=p}else m=e[5],p=e[6];return p!==Symbol.for("react.early_return_sentinel")?p:m}function vee(t,e){return f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-neutral-200 dark:bg-neutral-600/50 text-neutral-600 dark:text-neutral-400",children:t},e)}function bee(t,e){return f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-neutral-200 dark:bg-neutral-600/50 text-neutral-600 dark:text-neutral-400",children:t},e)}function _ee(t,e){return f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-blue-100 dark:bg-blue-500/20 text-blue-600 dark:text-blue-400 font-mono",children:t},e)}function xee(t){return!t}function wee(t){const e=Pe.c(30),{name:n,pem:s}=t,[r,i]=F.useState(!1);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=()=>i(See),e[0]=a):a=e[0];const l=a,[u,h]=F.useState(!1);let m;e[1]!==s?(m=async()=>{await navigator.clipboard.writeText(s),h(!0),setTimeout(()=>h(!1),2e3)},e[1]=s,e[2]=m):m=e[2];const p=m;let g;e[3]===Symbol.for("react.memo_cache_sentinel")?(g=f.jsx(Dh,{size:14,className:"text-red-500 dark:text-red-400"}),e[3]=g):g=e[3];let y;e[4]!==n?(y=f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n}),e[4]=n,e[5]=y):y=e[5];let b;e[6]===Symbol.for("react.memo_cache_sentinel")?(b=f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-red-100 dark:bg-red-500/20 text-red-600 dark:text-red-400",children:"Private Key"}),e[6]=b):b=e[6];let _;e[7]!==y?(_=f.jsxs("div",{className:"flex items-center gap-2",children:[g,y,b]}),e[7]=y,e[8]=_):_=e[8];let w;e[9]!==p?(w=I=>{I.stopPropagation(),p()},e[9]=p,e[10]=w):w=e[10];let k;e[11]!==u?(k=u?f.jsx(Tn,{size:14,className:"text-emerald-500"}):f.jsx(js,{size:14,className:"text-neutral-400"}),e[11]=u,e[12]=k):k=e[12];let C;e[13]!==w||e[14]!==k?(C=f.jsx("button",{onClick:w,className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy private key",children:k}),e[13]=w,e[14]=k,e[15]=C):C=e[15];let E;e[16]!==r?(E=r?f.jsx(Ss,{size:14,className:"text-neutral-400"}):f.jsx(di,{size:14,className:"text-neutral-400"}),e[16]=r,e[17]=E):E=e[17];let A;e[18]!==E||e[19]!==C?(A=f.jsxs("div",{className:"flex items-center gap-1",children:[C,E]}),e[18]=E,e[19]=C,e[20]=A):A=e[20];let R;e[21]!==A||e[22]!==_?(R=f.jsxs("button",{onClick:l,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[_,A]}),e[21]=A,e[22]=_,e[23]=R):R=e[23];let N;e[24]!==r||e[25]!==s?(N=r&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:s})}),e[24]=r,e[25]=s,e[26]=N):N=e[26];let M;return e[27]!==R||e[28]!==N?(M=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[R,N]}),e[27]=R,e[28]=N,e[29]=M):M=e[29],M}function See(t){return!t}function jP(t){const e=Pe.c(30),{name:n,pem:s}=t,[r,i]=F.useState(!1);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=()=>i(kee),e[0]=a):a=e[0];const l=a,[u,h]=F.useState(!1);let m;e[1]!==s?(m=async()=>{await navigator.clipboard.writeText(s),h(!0),setTimeout(()=>h(!1),2e3)},e[1]=s,e[2]=m):m=e[2];const p=m;let g;e[3]===Symbol.for("react.memo_cache_sentinel")?(g=f.jsx(Dh,{size:14,className:"text-amber-500 dark:text-amber-400"}),e[3]=g):g=e[3];let y;e[4]!==n?(y=f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n}),e[4]=n,e[5]=y):y=e[5];let b;e[6]===Symbol.for("react.memo_cache_sentinel")?(b=f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-amber-100 dark:bg-amber-500/20 text-amber-600 dark:text-amber-400",children:"Certificate Request"}),e[6]=b):b=e[6];let _;e[7]!==y?(_=f.jsxs("div",{className:"flex items-center gap-2",children:[g,y,b]}),e[7]=y,e[8]=_):_=e[8];let w;e[9]!==p?(w=I=>{I.stopPropagation(),p()},e[9]=p,e[10]=w):w=e[10];let k;e[11]!==u?(k=u?f.jsx(Tn,{size:14,className:"text-emerald-500"}):f.jsx(js,{size:14,className:"text-neutral-400"}),e[11]=u,e[12]=k):k=e[12];let C;e[13]!==w||e[14]!==k?(C=f.jsx("button",{onClick:w,className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy CSR",children:k}),e[13]=w,e[14]=k,e[15]=C):C=e[15];let E;e[16]!==r?(E=r?f.jsx(Ss,{size:14,className:"text-neutral-400"}):f.jsx(di,{size:14,className:"text-neutral-400"}),e[16]=r,e[17]=E):E=e[17];let A;e[18]!==E||e[19]!==C?(A=f.jsxs("div",{className:"flex items-center gap-1",children:[C,E]}),e[18]=E,e[19]=C,e[20]=A):A=e[20];let R;e[21]!==A||e[22]!==_?(R=f.jsxs("button",{onClick:l,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[_,A]}),e[21]=A,e[22]=_,e[23]=R):R=e[23];let N;e[24]!==r||e[25]!==s?(N=r&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:s})}),e[24]=r,e[25]=s,e[26]=N):N=e[26];let M;return e[27]!==R||e[28]!==N?(M=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[R,N]}),e[27]=R,e[28]=N,e[29]=M):M=e[29],M}function kee(t){return!t}function Cee(t){const e=Pe.c(6),{name:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=f.jsx(Dh,{size:14,className:"text-blue-500 dark:text-blue-400"}),e[0]=s):s=e[0];let r;e[1]!==n?(r=f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n}),e[1]=n,e[2]=r):r=e[2];let i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i=f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-blue-100 dark:bg-blue-500/20 text-blue-600 dark:text-blue-400",children:"Public Key"}),e[3]=i):i=e[3];let a;return e[4]!==r?(a=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-3",children:f.jsxs("div",{className:"flex items-center gap-2",children:[s,r,i]})}),e[4]=r,e[5]=a):a=e[5],a}function Nee(t){const e=t?.find(p=>p.type==="Approved"),n=t?.find(p=>p.type==="Denied"),s=t?.find(p=>p.type==="Ready"),r=t?.find(p=>p.type==="InvalidRequest"),i=e?.status==="True",a=n?.status==="True",l=s?.status==="True",u=s?.status==="False"||r?.status==="True";let h,m;return l?(h=s?.reason,m=s?.message):u?(h=s?.reason||r?.reason,m=s?.message||r?.message):a?(h=n?.reason,m=n?.message):i&&(h=e?.reason,m=e?.message),{approved:i,denied:a,ready:l,failed:u,reason:h,message:m}}function Eee(t){return t.ready?{text:"Issued",level:"success"}:t.failed||t.denied?{text:t.denied?"Denied":"Failed",level:"error"}:t.approved?{text:"Approved",level:"warning"}:{text:"Pending",level:"warning"}}function Aee(t){return t.ready?f.jsx(Oi,{size:14,className:"text-emerald-400"}):t.failed||t.denied?f.jsx(to,{size:14,className:"text-red-400"}):t.approved?f.jsx(Cn,{size:14,className:"text-amber-400 animate-spin"}):f.jsx(Mh,{size:14,className:"text-amber-400"})}function Ree(t){if(!t)return"Default (90d)";const e=t.match(/^(\d+)h/);if(e){const n=parseInt(e[1],10);return n>=8760?`${Math.round(n/8760)}y`:n>=720?`${Math.round(n/720)}mo`:n>=24?`${Math.round(n/24)}d`:`${n}h`}return t}function cO(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function vw(t){if(!t)return null;try{return atob(t)}catch{return null}}const Tee={kinds:["CertificateRequest","CertificateRequests"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata,i=r?.namespace;if(!n)return{sections:[]};const a=Nee(s?.conditions),l=Eee(a),u=r?.annotations?.["cert-manager.io/certificate-name"],h=r?.annotations?.["cert-manager.io/certificate-revision"],m=[{id:"status",data:{type:"status-cards",items:[{label:"Status",value:l.text,status:l.level,icon:Aee(a)},...a.approved?[{label:"Approved",value:"Yes",status:"success",icon:f.jsx(Oi,{size:14,className:"text-emerald-400"})}]:[],...n.isCA?[{label:"Type",value:"CA Certificate",status:"neutral",icon:f.jsx(US,{size:14,className:"text-purple-400"})}]:[{label:"Type",value:"TLS Certificate",status:"neutral",icon:f.jsx(US,{size:14,className:"text-blue-400"})}],...h?[{label:"Revision",value:h,status:"neutral"}]:[]]}}];if(u&&m.push({id:"parent-certificate",title:"Parent Certificate",data:{type:"custom",render:()=>{const p=f.jsx("div",{className:`bg-blue-500/10 border border-blue-500/30 rounded-lg p-3 ${i?"hover:bg-blue-500/15 transition-colors cursor-pointer":""}`,children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(pl,{size:14,className:"text-blue-400"}),f.jsx("span",{className:"text-sm text-blue-300",children:u})]})});return i?f.jsx(ji,{to:"/cluster/$context/$resourceType/$name",params:{context:t,resourceType:"certificates.cert-manager.io",name:u},search:g=>({...g,namespace:i}),children:p}):p}}}),m.push({id:"details",title:"Request Details",data:{type:"info-grid",columns:2,items:[{label:"Duration",value:Ree(n.duration)},...r?.creationTimestamp?[{label:"Created",value:cO(r.creationTimestamp)}]:[],...n.username?[{label:"Requested By",value:n.username.split(":").pop()||n.username}]:[]]}}),m.push({id:"issuer",title:"Issuer",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(am,{size:14,className:"text-purple-400"}),f.jsx("span",{className:"text-sm font-medium text-purple-300",children:n.issuerRef.kind??"Issuer"})]}),f.jsx("div",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:n.issuerRef.name}),n.issuerRef.group&&f.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:n.issuerRef.group})]})}}),(n.username||n.groups?.length)&&m.push({id:"requester",title:"Requester",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(CD,{size:14,className:"text-neutral-600 dark:text-neutral-400"}),f.jsx("span",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Identity"})]}),n.username&&f.jsxs("div",{className:"text-xs text-neutral-700 dark:text-neutral-400 mb-1",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"User:"})," ",f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-mono",children:n.username})]}),n.groups&&n.groups.length>0&&f.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:n.groups.map((p,g)=>f.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-neutral-200 dark:bg-neutral-700 text-neutral-700 dark:text-neutral-400",children:p},g))})]})}}),n.usages?.length&&m.push({id:"usages",title:"Key Usages",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.usages.map((p,g)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-neutral-200 dark:bg-neutral-700 text-neutral-700 dark:text-neutral-300",children:p},g))})}}),s?.certificate){const p=vw(s.certificate),g=s.ca?vw(s.ca):null;m.push({id:"certificate-issued",title:"Certificate",data:{type:"custom",render:()=>f.jsxs("div",{className:"space-y-3",children:[p&&f.jsx(u2,{name:"Issued Certificate",pem:p}),g&&f.jsx(u2,{name:"CA Certificate",pem:g})]})}})}if(n.request){const p=vw(n.request);p&&m.push({id:"csr",title:"Certificate Signing Request",data:{type:"custom",render:()=>f.jsx(jP,{name:"Certificate Request",pem:p})}})}return s?.failureTime&&m.push({id:"failure",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 text-red-400",children:[f.jsx(fl,{size:14}),f.jsx("span",{className:"text-sm font-medium",children:"Failed"})]}),f.jsxs("div",{className:"text-xs text-neutral-500 mt-1",children:["Failure time: ",cO(s.failureTime)]}),a.message&&f.jsx("div",{className:"text-xs text-red-400/70 mt-1",children:a.message})]})}}),{sections:m}}};function OP(t){if(t)return t instanceof Date?t.toISOString():t}function uO(t){const e=OP(t);return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"N/A"}function hO(t){const e=OP(t);if(!e)return"N/A";const n=new Date(e),r=new Date().getTime()-n.getTime(),i=Math.floor(r/1e3),a=Math.floor(i/60),l=Math.floor(a/60),u=Math.floor(l/24);return u>0?`${u}d ago`:l>0?`${l}h ago`:a>0?`${a}m ago`:i>0?`${i}s ago`:"just now"}const jee={kinds:["Event","Events"],adapt(t,e){const n=e.metadata,s=e.involvedObject,r=e.source,i=e.type==="Warning",a=e.count??1,l=e.firstTimestamp||e.eventTime||n?.creationTimestamp,u=e.lastTimestamp||e.eventTime,h=[{id:"status",data:{type:"status-cards",items:[{label:"Type",value:e.type||"Normal",status:i?"warning":"success",icon:i?f.jsx(Ly,{size:14,className:"text-amber-400"}):f.jsx(ZY,{size:14,className:"text-emerald-400"})},{label:"Reason",value:e.reason||"Unknown",status:"neutral"},...a>1?[{label:"Count",value:a,status:"neutral",icon:f.jsx(HS,{size:14,className:"text-blue-400"})}]:[]]}}];return e.message&&h.push({id:"message",title:"Message",data:{type:"custom",render:()=>f.jsx("div",{className:`p-3 rounded-lg border ${i?"bg-amber-500/10 border-amber-500/30":"bg-neutral-100 dark:bg-neutral-900/50 border-neutral-200 dark:border-neutral-700"}`,children:f.jsx("p",{className:"text-sm text-neutral-700 dark:text-neutral-300 whitespace-pre-wrap",children:e.message})})}}),s&&s.name&&h.push({id:"involved-object",title:"Involved Object",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(qZ,{size:14,className:"text-blue-400"}),f.jsx("span",{className:"text-sm font-medium text-blue-300",children:s.kind||"Resource"})]}),f.jsxs("div",{className:"space-y-1 text-xs",children:[f.jsxs("div",{className:"text-neutral-300",children:[f.jsx("span",{className:"text-neutral-500",children:"Name: "}),f.jsx("span",{className:"text-cyan-400 font-mono",children:s.name})]}),s.namespace&&f.jsxs("div",{className:"text-neutral-300",children:[f.jsx("span",{className:"text-neutral-500",children:"Namespace: "}),f.jsx("span",{className:"text-purple-400",children:s.namespace})]}),s.fieldPath&&f.jsxs("div",{className:"text-neutral-300",children:[f.jsx("span",{className:"text-neutral-500",children:"Field: "}),f.jsx("span",{className:"text-neutral-400 font-mono",children:s.fieldPath})]}),s.apiVersion&&f.jsxs("div",{className:"text-neutral-300",children:[f.jsx("span",{className:"text-neutral-500",children:"API Version: "}),f.jsx("span",{className:"text-neutral-400",children:s.apiVersion})]})]})]})}}),h.push({id:"timestamps",title:"Timestamps",data:{type:"custom",render:()=>f.jsxs("div",{className:"space-y-2",children:[l&&f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx(gD,{size:14,className:"text-neutral-500"}),f.jsx("span",{className:"text-neutral-500",children:"First seen:"}),f.jsx("span",{className:"text-neutral-300",children:uO(l)}),f.jsxs("span",{className:"text-neutral-500",children:["(",hO(l),")"]})]}),u&&a>1&&f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx(Cn,{size:14,className:"text-neutral-500"}),f.jsx("span",{className:"text-neutral-500",children:"Last seen:"}),f.jsx("span",{className:"text-neutral-300",children:uO(u)}),f.jsxs("span",{className:"text-neutral-500",children:["(",hO(u),")"]})]})]})}}),r&&(r.component||r.host)&&h.push({id:"source",title:"Source",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(ra,{size:14,className:"text-neutral-400"}),f.jsx("span",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Event Source"})]}),f.jsxs("div",{className:"space-y-1 text-xs",children:[r.component&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-300",children:[f.jsx("span",{className:"text-neutral-500",children:"Component: "}),f.jsx("span",{className:"text-cyan-400",children:r.component})]}),r.host&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-300",children:[f.jsx("span",{className:"text-neutral-500",children:"Host: "}),f.jsx("span",{className:"text-neutral-400 font-mono",children:r.host})]})]})]})}}),(e.reportingComponent||e.reportingInstance)&&h.push({id:"reporting",title:"Reporting",data:{type:"info-grid",columns:2,items:[...e.reportingComponent?[{label:"Component",value:e.reportingComponent}]:[],...e.reportingInstance?[{label:"Instance",value:e.reportingInstance}]:[],...e.action?[{label:"Action",value:e.action}]:[]]}}),e.related&&e.related.name&&e.related.name!==s?.name&&h.push({id:"related",title:"Related Object",data:{type:"info-grid",columns:2,items:[{label:"Kind",value:e.related.kind||"Unknown"},{label:"Name",value:e.related.name},...e.related.namespace?[{label:"Namespace",value:e.related.namespace}]:[]]}}),{sections:h}}};function Oee(t){switch(t){case"LoadBalancer":return{label:"LoadBalancer",status:"success",icon:f.jsx(Ji,{size:14,className:"text-emerald-400"})};case"NodePort":return{label:"NodePort",status:"warning",icon:f.jsx(ra,{size:14,className:"text-amber-400"})};case"ExternalName":return{label:"ExternalName",status:"neutral",icon:f.jsx(tN,{size:14,className:"text-purple-400"})};default:return{label:t||"ClusterIP",status:"neutral",icon:f.jsx(Vs,{size:14,className:"text-blue-400"})}}}const Mee={kinds:["Service","Services"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=Oee(n.type),i=n.type==="LoadBalancer",a=s?.loadBalancer?.ingress,l=i&&a&&a.length>0,u=[{id:"status",data:{type:"status-cards",items:[{label:"Type",value:r.label,status:r.status,icon:r.icon},...n.clusterIP&&n.clusterIP!=="None"?[{label:"Cluster IP",value:n.clusterIP,status:"neutral",icon:f.jsx(Vs,{size:14,className:"text-blue-400"})}]:[],...n.clusterIP==="None"?[{label:"Cluster IP",value:"Headless",status:"neutral",icon:f.jsx(Vs,{size:14,className:"text-neutral-400"})}]:[],...n.externalName?[{label:"External Name",value:n.externalName,status:"neutral",icon:f.jsx(tN,{size:14,className:"text-purple-400"})}]:[]]}}];return n.ports&&n.ports.length>0&&u.push({id:"ports",title:"Ports",data:{type:"custom",render:()=>f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsxs("table",{className:"w-full text-xs",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700",children:[f.jsx("th",{className:"pb-2 text-left text-neutral-500 font-medium",children:"Name"}),f.jsx("th",{className:"pb-2 text-left text-neutral-500 font-medium",children:"Protocol"}),f.jsx("th",{className:"pb-2 text-right text-neutral-500 font-medium",children:"Port"}),f.jsx("th",{className:"pb-2 text-right text-neutral-500 font-medium",children:"Target"}),f.jsx("th",{className:"pb-2 text-right text-neutral-500 font-medium",children:"NodePort"})]})}),f.jsx("tbody",{children:n.ports.map((m,p)=>f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-2 text-neutral-900 dark:text-neutral-300",children:m.name||f.jsx("span",{className:"text-neutral-400 italic",children:"unnamed"})}),f.jsx("td",{className:"py-2",children:f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-neutral-200 dark:bg-neutral-700 text-neutral-600 dark:text-neutral-400",children:m.protocol||"TCP"})}),f.jsx("td",{className:"py-2 text-right font-mono text-neutral-700 dark:text-neutral-300",children:m.port}),f.jsx("td",{className:"py-2 text-right font-mono text-neutral-700 dark:text-neutral-300",children:m.targetPort||f.jsx("span",{className:"text-neutral-400",children:""})}),f.jsx("td",{className:"py-2 text-right font-mono text-amber-500 dark:text-amber-400",children:m.nodePort||f.jsx("span",{className:"text-neutral-400",children:""})})]},p))})]})})}}),i&&u.push({id:"loadbalancer",title:"Load Balancer",data:{type:"custom",render:()=>f.jsx("div",{className:`rounded-lg p-3 border ${l?"bg-emerald-500/10 border-emerald-500/30":"bg-amber-500/10 border-amber-500/30"}`,children:l?f.jsx("div",{className:"space-y-2",children:a.map((m,p)=>f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Ji,{size:14,className:"text-emerald-400"}),f.jsx("span",{className:"text-sm font-mono text-emerald-300",children:m.ip||m.hostname||"N/A"})]},p))}):f.jsxs("div",{className:"flex items-center gap-2 text-amber-400",children:[f.jsx(Ji,{size:14}),f.jsx("span",{className:"text-sm",children:"Pending external IP assignment..."})]})})}}),n.externalIPs&&n.externalIPs.length>0&&u.push({id:"external-ips",title:"External IPs",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.externalIPs.map((m,p)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-purple-500/20 text-purple-300 font-mono",children:m},p))})}}),n.selector&&Object.keys(n.selector).length>0&&u.push({id:"selector",data:{type:"labels",labels:n.selector,title:"Selector"}}),(n.externalTrafficPolicy||n.internalTrafficPolicy||n.sessionAffinity!=="None")&&u.push({id:"traffic",title:"Traffic Configuration",data:{type:"info-grid",columns:2,items:[...n.externalTrafficPolicy?[{label:"External Traffic",value:n.externalTrafficPolicy,color:n.externalTrafficPolicy==="Local"?"text-amber-400":void 0}]:[],...n.internalTrafficPolicy?[{label:"Internal Traffic",value:n.internalTrafficPolicy}]:[],...n.sessionAffinity&&n.sessionAffinity!=="None"?[{label:"Session Affinity",value:n.sessionAffinity,color:"text-purple-400"}]:[],...n.sessionAffinityConfig?.clientIP?.timeoutSeconds?[{label:"Affinity Timeout",value:`${n.sessionAffinityConfig.clientIP.timeoutSeconds}s`}]:[],...n.healthCheckNodePort?[{label:"Health Check Port",value:n.healthCheckNodePort}]:[]]}}),i&&(n.loadBalancerIP||n.loadBalancerSourceRanges?.length||n.loadBalancerClass)&&u.push({id:"lb-config",title:"Load Balancer Configuration",data:{type:"custom",render:()=>f.jsxs("div",{className:"space-y-2",children:[n.loadBalancerIP&&f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx("span",{className:"text-neutral-500",children:"Requested IP:"}),f.jsx("span",{className:"text-neutral-300 font-mono",children:n.loadBalancerIP})]}),n.loadBalancerClass&&f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx("span",{className:"text-neutral-500",children:"Class:"}),f.jsx("span",{className:"text-neutral-300",children:n.loadBalancerClass})]}),n.loadBalancerSourceRanges&&n.loadBalancerSourceRanges.length>0&&f.jsxs("div",{className:"text-sm",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(om,{size:14,className:"text-neutral-500"}),f.jsx("span",{className:"text-neutral-500",children:"Source Ranges:"})]}),f.jsx("div",{className:"flex flex-wrap gap-1 ml-5",children:n.loadBalancerSourceRanges.map((m,p)=>f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-amber-500/20 text-amber-300 font-mono",children:m},p))})]}),n.allocateLoadBalancerNodePorts===!1&&f.jsx("div",{className:"text-xs text-neutral-500",children:"NodePort allocation disabled"})]})}}),{sections:u}}};async function Iee(t){try{const e=atob(t),n=atob(e),s=new Uint8Array(n.length);for(let g=0;g<n.length;g++)s[g]=n.charCodeAt(g);const r=new DecompressionStream("gzip"),i=r.writable.getWriter();i.write(s),i.close();const a=r.readable.getReader(),l=[];for(;;){const{done:g,value:y}=await a.read();if(g)break;l.push(y)}const u=l.reduce((g,y)=>g+y.length,0),h=new Uint8Array(u);let m=0;for(const g of l)h.set(g,m),m+=g.length;const p=new TextDecoder().decode(h);return JSON.parse(p)}catch(e){return console.error("Failed to decode Helm release:",e),null}}function Dee(t){switch(t?.toLowerCase()){case"deployed":return"text-emerald-400";case"failed":return"text-red-400";case"pending-install":case"pending-upgrade":case"pending-rollback":return"text-yellow-400";case"uninstalling":case"superseded":return"text-neutral-400";default:return"text-neutral-300"}}function Lee(t){const e=Pe.c(55),{encoded:n}=t,[s,r]=F.useState(null),[i,a]=F.useState(null),[l,u]=F.useState(!0),[h,m]=F.useState(!1),[p,g]=F.useState(!1),[y,b]=F.useState(!1);let _;e[0]===Symbol.for("react.memo_cache_sentinel")?(_=()=>m($ee),e[0]=_):_=e[0];const w=_;let k;e[1]===Symbol.for("react.memo_cache_sentinel")?(k=()=>g(Bee),e[1]=k):k=e[1];const C=k;let E;e[2]===Symbol.for("react.memo_cache_sentinel")?(E=()=>b(Pee),e[2]=E):E=e[2];const A=E,[R,N]=F.useState(null);let M,I;e[3]!==n?(M=()=>{Iee(n).then(Ge=>{r(Ge),u(!1)}).catch(()=>{a("Failed to decode Helm release data"),u(!1)})},I=[n],e[3]=n,e[4]=M,e[5]=I):(M=e[4],I=e[5]),F.useEffect(M,I);let W;e[6]===Symbol.for("react.memo_cache_sentinel")?(W=async(Ge,ct)=>{await navigator.clipboard.writeText(ct),N(Ge),setTimeout(()=>N(null),2e3)},e[6]=W):W=e[6];const P=W;if(l){let Ge;return e[7]===Symbol.for("react.memo_cache_sentinel")?(Ge=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Decoding Helm release..."})}),e[7]=Ge):Ge=e[7],Ge}if(i||!s){const Ge=i||"Failed to decode release";let ct;return e[8]!==Ge?(ct=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("span",{className:"text-xs text-red-600 dark:text-red-400",children:Ge})}),e[8]=Ge,e[9]=ct):ct=e[9],ct}const G=s.chart?.metadata,$=s.info;let U;e[10]!==G?(U=G?.description&&f.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:G.description}),e[10]=G,e[11]=U):U=e[11];let Z;e[12]===Symbol.for("react.memo_cache_sentinel")?(Z=f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 dark:text-neutral-500 whitespace-nowrap",children:"Release"}),e[12]=Z):Z=e[12];const K=s.name||"Unknown";let B;e[13]!==K?(B=f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[Z,f.jsx("td",{className:"py-1.5 text-neutral-900 dark:text-neutral-300",children:K})]}),e[13]=K,e[14]=B):B=e[14];let J;e[15]===Symbol.for("react.memo_cache_sentinel")?(J=f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 dark:text-neutral-500 whitespace-nowrap",children:"Revision"}),e[15]=J):J=e[15];const Y=s.version||1;let z;e[16]!==Y?(z=f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[J,f.jsx("td",{className:"py-1.5 text-neutral-900 dark:text-neutral-300",children:Y})]}),e[16]=Y,e[17]=z):z=e[17];let O;e[18]===Symbol.for("react.memo_cache_sentinel")?(O=f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 dark:text-neutral-500 whitespace-nowrap",children:"Status"}),e[18]=O):O=e[18];const L=$?.status;let V;e[19]!==L?(V=Dee(L),e[19]=L,e[20]=V):V=e[20];const T=`py-1.5 font-medium ${V}`,Q=$?.status||"Unknown";let te;e[21]!==T||e[22]!==Q?(te=f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[O,f.jsx("td",{className:T,children:Q})]}),e[21]=T,e[22]=Q,e[23]=te):te=e[23];let X;e[24]!==G?(X=G&&f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 dark:text-neutral-500 whitespace-nowrap",children:"Chart"}),f.jsxs("td",{className:"py-1.5 text-neutral-900 dark:text-neutral-300",children:[G.name,"-",G.version]})]}),e[24]=G,e[25]=X):X=e[25];let oe;e[26]!==G?(oe=G?.appVersion&&f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 dark:text-neutral-500 whitespace-nowrap",children:"App Version"}),f.jsx("td",{className:"py-1.5 text-cyan-600 dark:text-cyan-400",children:G.appVersion})]}),e[26]=G,e[27]=oe):oe=e[27];let xe;e[28]!==$?(xe=$?.last_deployed&&f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 dark:text-neutral-500 whitespace-nowrap",children:"Last Deployed"}),f.jsx("td",{className:"py-1.5 text-neutral-900 dark:text-neutral-300",children:new Date($.last_deployed).toLocaleString()})]}),e[28]=$,e[29]=xe):xe=e[29];let Se;e[30]!==B||e[31]!==z||e[32]!==te||e[33]!==X||e[34]!==oe||e[35]!==xe?(Se=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("table",{className:"w-full text-xs",children:f.jsxs("tbody",{children:[B,z,te,X,oe,xe]})})}),e[30]=B,e[31]=z,e[32]=te,e[33]=X,e[34]=oe,e[35]=xe,e[36]=Se):Se=e[36];let Xe;e[37]!==R||e[38]!==s.config||e[39]!==h?(Xe=s.config&&Object.keys(s.config).length>0&&f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:w,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(am,{size:14,className:"text-amber-500 dark:text-amber-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:"User Values"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:Ge=>{Ge.stopPropagation(),P("values",JSON.stringify(s.config,null,2))},className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy values",children:R==="values"?f.jsx(Tn,{size:14,className:"text-emerald-500"}):f.jsx(js,{size:14,className:"text-neutral-400"})}),h?f.jsx(Ss,{size:14,className:"text-neutral-400"}):f.jsx(di,{size:14,className:"text-neutral-400"})]})]}),h&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:JSON.stringify(s.config,null,2)})})]}),e[37]=R,e[38]=s.config,e[39]=h,e[40]=Xe):Xe=e[40];let Ke;e[41]!==R||e[42]!==$||e[43]!==y?(Ke=$?.notes&&f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:A,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Ri,{size:14,className:"text-blue-500 dark:text-blue-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:"Release Notes"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:Ge=>{Ge.stopPropagation(),P("notes",$.notes||"")},className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy notes",children:R==="notes"?f.jsx(Tn,{size:14,className:"text-emerald-500"}):f.jsx(js,{size:14,className:"text-neutral-400"})}),y?f.jsx(Ss,{size:14,className:"text-neutral-400"}):f.jsx(di,{size:14,className:"text-neutral-400"})]})]}),y&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:$.notes})})]}),e[41]=R,e[42]=$,e[43]=y,e[44]=Ke):Ke=e[44];let st;e[45]!==R||e[46]!==s.manifest||e[47]!==p?(st=s.manifest&&f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:C,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Ri,{size:14,className:"text-purple-500 dark:text-purple-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:"Rendered Manifest"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:Ge=>{Ge.stopPropagation(),P("manifest",s.manifest||"")},className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy manifest",children:R==="manifest"?f.jsx(Tn,{size:14,className:"text-emerald-500"}):f.jsx(js,{size:14,className:"text-neutral-400"})}),p?f.jsx(Ss,{size:14,className:"text-neutral-400"}):f.jsx(di,{size:14,className:"text-neutral-400"})]})]}),p&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-96 overflow-y-auto",children:s.manifest})})]}),e[45]=R,e[46]=s.manifest,e[47]=p,e[48]=st):st=e[48];let Le;return e[49]!==Se||e[50]!==Xe||e[51]!==Ke||e[52]!==st||e[53]!==U?(Le=f.jsxs("div",{className:"space-y-4",children:[U,Se,Xe,Ke,st]}),e[49]=Se,e[50]=Xe,e[51]=Ke,e[52]=st,e[53]=U,e[54]=Le):Le=e[54],Le}function Pee(t){return!t}function Bee(t){return!t}function $ee(t){return!t}function zee(t){try{const e=atob(t);return JSON.parse(e)}catch{return null}}function Fee(t){try{const e=atob(t),[n,...s]=e.split(":");return{username:n,password:s.join(":")}}catch{return null}}function Uee(t){const e=Pe.c(21),{encoded:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=new Set,e[0]=s):s=e[0];const[r,i]=F.useState(s),[a,l]=F.useState(null),[u,h]=F.useState(!1);let m,p,g,y,b;if(e[1]!==a||e[2]!==n||e[3]!==r){b=Symbol.for("react.early_return_sentinel");e:{const k=zee(n);p=k?JSON.stringify(k,null,2):null;let C;e[9]===Symbol.for("react.memo_cache_sentinel")?(C=async(R,N)=>{await navigator.clipboard.writeText(N),l(R),setTimeout(()=>l(null),2e3)},e[9]=C):C=e[9],m=C;const E=R=>{i(N=>{const M=new Set(N);return M.has(R)?M.delete(R):M.add(R),M})};if(!k||!k.auths){let R;e[10]===Symbol.for("react.memo_cache_sentinel")?(R=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("span",{className:"text-xs text-red-600 dark:text-red-400",children:"Failed to decode Docker config"})}),e[10]=R):R=e[10],b=R;break e}const A=Object.entries(k.auths);if(A.length===0){let R;e[11]===Symbol.for("react.memo_cache_sentinel")?(R=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"No registries configured"})}),e[11]=R):R=e[11],b=R;break e}g="space-y-3",y=A.map(R=>{const[N,M]=R;let I=M.username,W=M.password;if(!I&&M.auth){const G=Fee(M.auth);G&&(I=G.username,W=G.password)}const P=r.has(N);return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[f.jsx(ra,{size:14,className:"text-blue-500 dark:text-blue-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-900 dark:text-neutral-200 break-all",children:N})]}),f.jsx("table",{className:"w-full text-xs",children:f.jsxs("tbody",{children:[I&&f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 whitespace-nowrap w-1",children:f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(CD,{size:12}),"Username"]})}),f.jsx("td",{className:"py-1.5 text-neutral-900 dark:text-neutral-300",children:I}),f.jsx("td",{className:"py-1.5",children:f.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[f.jsx("div",{className:"w-7"}),f.jsx("button",{onClick:()=>m(`${N}-username`,I),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:"Copy username",children:a===`${N}-username`?f.jsx(Tn,{size:12,className:"text-emerald-500"}):f.jsx(js,{size:12,className:"text-neutral-400"})})]})})]}),W&&f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 whitespace-nowrap w-1",children:f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(am,{size:12}),"Password"]})}),f.jsx("td",{className:"py-1.5 font-mono",children:P?f.jsx("span",{className:"text-neutral-900 dark:text-neutral-300 break-all",children:W}):f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:""})}),f.jsx("td",{className:"py-1.5",children:f.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[f.jsx("button",{onClick:()=>E(N),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:P?"Hide password":"Reveal password",children:P?f.jsx(nN,{size:12,className:"text-neutral-400"}):f.jsx(sN,{size:12,className:"text-neutral-400"})}),f.jsx("button",{onClick:()=>m(`${N}-password`,W),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:"Copy password",children:a===`${N}-password`?f.jsx(Tn,{size:12,className:"text-emerald-500"}):f.jsx(js,{size:12,className:"text-neutral-400"})})]})})]}),M.email&&f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 whitespace-nowrap w-1",children:f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(oZ,{size:12}),"Email"]})}),f.jsx("td",{className:"py-1.5 text-neutral-900 dark:text-neutral-300",children:M.email}),f.jsx("td",{className:"py-1.5",children:f.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[f.jsx("div",{className:"w-7"}),f.jsx("button",{onClick:()=>m(`${N}-email`,M.email),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:"Copy email",children:a===`${N}-email`?f.jsx(Tn,{size:12,className:"text-emerald-500"}):f.jsx(js,{size:12,className:"text-neutral-400"})})]})})]})]})})]},N)})}e[1]=a,e[2]=n,e[3]=r,e[4]=m,e[5]=p,e[6]=g,e[7]=y,e[8]=b}else m=e[4],p=e[5],g=e[6],y=e[7],b=e[8];if(b!==Symbol.for("react.early_return_sentinel"))return b;let _;e[12]!==a||e[13]!==m||e[14]!==p||e[15]!==u?(_=p&&f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:()=>h(!u),className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Ri,{size:14,className:"text-purple-500 dark:text-purple-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:"Docker Config"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:k=>{k.stopPropagation(),m("raw",p)},className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy JSON",children:a==="raw"?f.jsx(Tn,{size:14,className:"text-emerald-500"}):f.jsx(js,{size:14,className:"text-neutral-400"})}),u?f.jsx(Ss,{size:14,className:"text-neutral-400"}):f.jsx(di,{size:14,className:"text-neutral-400"})]})]}),u&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:p})})]}),e[12]=a,e[13]=m,e[14]=p,e[15]=u,e[16]=_):_=e[16];let w;return e[17]!==g||e[18]!==y||e[19]!==_?(w=f.jsxs("div",{className:g,children:[y,_]}),e[17]=g,e[18]=y,e[19]=_,e[20]=w):w=e[20],w}function Hee(t){try{return atob(t)}catch{return null}}function Vee(t){let e=0;for(let n=0;n<Math.min(t.length,1e3);n++){const s=t.charCodeAt(n);(s===0||s<32&&s!==9&&s!==10&&s!==13)&&e++}return e>t.length*.1}function dO(t){return t.replace(/^[\r\n]+|[\r\n]+$/g,"").includes(`
`)}function qee(t){return!t.endsWith(".crt")&&!t.endsWith(".pem")&&t!=="ca.crt"&&t!=="tls.crt"&&t!=="namespace"}function Kee(t){const e=Pe.c(12),{entries:n}=t,[s,r]=F.useState(null);let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=new Set,e[0]=i):i=e[0];const[a,l]=F.useState(i);let u;e[1]===Symbol.for("react.memo_cache_sentinel")?(u=async(b,_)=>{await navigator.clipboard.writeText(_),r(b),setTimeout(()=>r(null),2e3)},e[1]=u):u=e[1];const h=u;let m;e[2]===Symbol.for("react.memo_cache_sentinel")?(m=b=>{l(_=>{const w=new Set(_);return w.has(b)?w.delete(b):w.add(b),w})},e[2]=m):m=e[2];const p=m;let g;if(e[3]!==s||e[4]!==n||e[5]!==a){let b;e[7]!==s||e[8]!==a?(b=_=>{const{key:w,decoded:k,isSensitive:C}=_;return f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 whitespace-nowrap",children:w}),f.jsx("td",{className:"py-1.5 font-mono break-all",children:C&&!a.has(w)?f.jsx("span",{className:"text-neutral-400",children:""}):f.jsx("span",{className:"text-neutral-900 dark:text-neutral-300",children:k})}),f.jsx("td",{className:"py-1.5 w-1",children:f.jsxs("div",{className:"flex items-center gap-1",children:[C?f.jsx("button",{onClick:()=>p(w),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:a.has(w)?"Hide value":"Reveal value",children:a.has(w)?f.jsx(nN,{size:12,className:"text-neutral-400"}):f.jsx(sN,{size:12,className:"text-neutral-400"})}):f.jsx("div",{className:"w-7"}),f.jsx("button",{onClick:()=>h(w,k),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:"Copy value",children:s===w?f.jsx(Tn,{size:12,className:"text-emerald-500"}):f.jsx(js,{size:12,className:"text-neutral-400"})})]})})]},w)},e[7]=s,e[8]=a,e[9]=b):b=e[9],g=n.map(b),e[3]=s,e[4]=n,e[5]=a,e[6]=g}else g=e[6];let y;return e[10]!==g?(y=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("table",{className:"w-full text-xs",children:f.jsx("tbody",{children:g})})}),e[10]=g,e[11]=y):y=e[11],y}function Wee(t){const e=Pe.c(35),{name:n,decoded:s,isSensitive:r}=t,[i,a]=F.useState(!1),[l,u]=F.useState(!1),[h,m]=F.useState(!1);let p;e[0]!==s?(p=async()=>{await navigator.clipboard.writeText(s),m(!0),setTimeout(()=>m(!1),2e3)},e[0]=s,e[1]=p):p=e[1];const g=p;let y;e[2]!==i?(y=()=>a(!i),e[2]=i,e[3]=y):y=e[3];let b;e[4]===Symbol.for("react.memo_cache_sentinel")?(b=f.jsx(am,{size:14,className:"text-amber-500 dark:text-amber-400"}),e[4]=b):b=e[4];let _;e[5]!==n?(_=f.jsxs("div",{className:"flex items-center gap-2",children:[b,f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n})]}),e[5]=n,e[6]=_):_=e[6];let w;e[7]!==g?(w=W=>{W.stopPropagation(),g()},e[7]=g,e[8]=w):w=e[8];let k;e[9]!==h?(k=h?f.jsx(Tn,{size:14,className:"text-emerald-500"}):f.jsx(js,{size:14,className:"text-neutral-400"}),e[9]=h,e[10]=k):k=e[10];let C;e[11]!==w||e[12]!==k?(C=f.jsx("button",{onClick:w,className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy value",children:k}),e[11]=w,e[12]=k,e[13]=C):C=e[13];let E;e[14]!==r||e[15]!==l?(E=r&&f.jsx("button",{onClick:W=>{W.stopPropagation(),u(!l)},className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:l?"Hide value":"Reveal value",children:l?f.jsx(nN,{size:14,className:"text-neutral-400"}):f.jsx(sN,{size:14,className:"text-neutral-400"})}),e[14]=r,e[15]=l,e[16]=E):E=e[16];let A;e[17]!==i?(A=i?f.jsx(Ss,{size:14,className:"text-neutral-400"}):f.jsx(di,{size:14,className:"text-neutral-400"}),e[17]=i,e[18]=A):A=e[18];let R;e[19]!==C||e[20]!==E||e[21]!==A?(R=f.jsxs("div",{className:"flex items-center gap-1",children:[C,E,A]}),e[19]=C,e[20]=E,e[21]=A,e[22]=R):R=e[22];let N;e[23]!==R||e[24]!==y||e[25]!==_?(N=f.jsxs("button",{onClick:y,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[_,R]}),e[23]=R,e[24]=y,e[25]=_,e[26]=N):N=e[26];let M;e[27]!==s||e[28]!==i||e[29]!==r||e[30]!==l?(M=i&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:r&&!l?f.jsx("span",{className:"text-xs text-neutral-400 font-mono",children:""}):f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:s})}),e[27]=s,e[28]=i,e[29]=r,e[30]=l,e[31]=M):M=e[31];let I;return e[32]!==N||e[33]!==M?(I=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[N,M]}),e[32]=N,e[33]=M,e[34]=I):I=e[34],I}const Gee={kinds:["Secret","Secrets"],adapt(t,e){const n=e.data||{},s=e.stringData||{},r=[...new Set([...Object.keys(n),...Object.keys(s)])];if(e.type==="helm.sh/release.v1"&&n.release)return{sections:[{id:"helm-release",data:{type:"custom",render:()=>f.jsx(Lee,{encoded:n.release})}}]};if(e.type==="kubernetes.io/dockerconfigjson"&&n[".dockerconfigjson"])return{sections:[{id:"docker-config",data:{type:"custom",render:()=>f.jsx(Uee,{encoded:n[".dockerconfigjson"]})}}]};const i=[];e.immutable&&i.push({id:"status",data:{type:"status-cards",items:[{label:"Immutable",value:"Yes",status:"warning",icon:f.jsx(om,{size:14,className:"text-amber-400"})}]}});const a=[],l=[],u=[],h=[],m=[],p=[],g=[];return r.forEach(y=>{const b=n[y]||btoa(s[y]||""),_=Hee(b),w=qee(y);if(!_)u.push(y);else if(Vee(_))u.push(y);else{const k=gee(_);if(k)switch(k.type){case"certificate":h.push({key:y,pem:k.content});break;case"private-key":m.push({key:y,pem:k.content});break;case"public-key":p.push(y);break;case"csr":g.push({key:y,pem:k.content});break;default:dO(_)?l.push({key:y,decoded:_,isSensitive:w}):a.push({key:y,decoded:_,isSensitive:w})}else dO(_)?l.push({key:y,decoded:_,isSensitive:w}):a.push({key:y,decoded:_,isSensitive:w})}}),h.length>0&&i.push({id:"certificates",title:"Certificates",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:h.map(({key:y,pem:b})=>f.jsx(u2,{name:y,pem:b},y))})}}),m.length>0&&i.push({id:"private-keys",title:"Private Keys",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:m.map(({key:y,pem:b})=>f.jsx(wee,{name:y,pem:b},y))})}}),p.length>0&&i.push({id:"public-keys",title:"Public Keys",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:p.map(y=>f.jsx(Cee,{name:y},y))})}}),g.length>0&&i.push({id:"csrs",title:"Certificate Requests",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:g.map(({key:y,pem:b})=>f.jsx(jP,{name:y,pem:b},y))})}}),a.length>0&&i.push({id:"data-simple",title:"Data",data:{type:"custom",render:()=>f.jsx(Kee,{entries:a})}}),l.length>0&&i.push({id:"data-multiline",title:a.length>0?"Files":"Data",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:l.map(({key:y,decoded:b,isSensitive:_})=>f.jsx(Wee,{name:y,decoded:b,isSensitive:_},y))})}}),u.length>0&&i.push({id:"binary-data",title:"Binary Data",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:u.map(y=>f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-3",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Ri,{size:14,className:"text-purple-500 dark:text-purple-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:y}),f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-purple-100 dark:bg-purple-500/20 text-purple-600 dark:text-purple-400",children:"Binary"})]})},y))})}}),{sections:i}}};function Yee(t){return t.includes(`
`)}function Zee(t){const e=Pe.c(29),{name:n,value:s}=t,[r,i]=F.useState(!1),[a,l]=F.useState(!1);let u;e[0]!==s?(u=async()=>{await navigator.clipboard.writeText(s),l(!0),setTimeout(()=>l(!1),2e3)},e[0]=s,e[1]=u):u=e[1];const h=u;let m;e[2]!==r?(m=()=>i(!r),e[2]=r,e[3]=m):m=e[3];let p;e[4]===Symbol.for("react.memo_cache_sentinel")?(p=f.jsx(Ri,{size:14,className:"text-blue-500 dark:text-blue-400"}),e[4]=p):p=e[4];let g;e[5]!==n?(g=f.jsxs("div",{className:"flex items-center gap-2",children:[p,f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n})]}),e[5]=n,e[6]=g):g=e[6];let y;e[7]!==h?(y=R=>{R.stopPropagation(),h()},e[7]=h,e[8]=y):y=e[8];let b;e[9]!==a?(b=a?f.jsx(Tn,{size:14,className:"text-emerald-500"}):f.jsx(js,{size:14,className:"text-neutral-400"}),e[9]=a,e[10]=b):b=e[10];let _;e[11]!==y||e[12]!==b?(_=f.jsx("button",{onClick:y,className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy value",children:b}),e[11]=y,e[12]=b,e[13]=_):_=e[13];let w;e[14]!==r?(w=r?f.jsx(Ss,{size:14,className:"text-neutral-400"}):f.jsx(di,{size:14,className:"text-neutral-400"}),e[14]=r,e[15]=w):w=e[15];let k;e[16]!==_||e[17]!==w?(k=f.jsxs("div",{className:"flex items-center gap-1",children:[_,w]}),e[16]=_,e[17]=w,e[18]=k):k=e[18];let C;e[19]!==m||e[20]!==g||e[21]!==k?(C=f.jsxs("button",{onClick:m,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[g,k]}),e[19]=m,e[20]=g,e[21]=k,e[22]=C):C=e[22];let E;e[23]!==r||e[24]!==s?(E=r&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-700 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:s})}),e[23]=r,e[24]=s,e[25]=E):E=e[25];let A;return e[26]!==C||e[27]!==E?(A=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[C,E]}),e[26]=C,e[27]=E,e[28]=A):A=e[28],A}function Jee(t){const e=Pe.c(8),{entries:n}=t,[s,r]=F.useState(null);let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=async(h,m)=>{await navigator.clipboard.writeText(m),r(h),setTimeout(()=>r(null),2e3)},e[0]=i):i=e[0];const a=i;let l;if(e[1]!==s||e[2]!==n){let h;e[4]!==s?(h=m=>{const[p,g]=m;return f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 whitespace-nowrap",children:p}),f.jsx("td",{className:"py-1.5 font-mono break-all text-neutral-900 dark:text-neutral-300",children:g}),f.jsx("td",{className:"py-1.5 w-1",children:f.jsx("button",{onClick:()=>a(p,g),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:"Copy value",children:s===p?f.jsx(Tn,{size:12,className:"text-emerald-500"}):f.jsx(js,{size:12,className:"text-neutral-400"})})})]},p)},e[4]=s,e[5]=h):h=e[5],l=n.map(h),e[1]=s,e[2]=n,e[3]=l}else l=e[3];let u;return e[6]!==l?(u=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("table",{className:"w-full text-xs",children:f.jsx("tbody",{children:l})})}),e[6]=l,e[7]=u):u=e[7],u}function Xee(t){const e=Pe.c(16),{name:n,value:s}=t,[r,i]=F.useState(!1);let a;e[0]!==s?(a=async()=>{await navigator.clipboard.writeText(s),i(!0),setTimeout(()=>i(!1),2e3)},e[0]=s,e[1]=a):a=e[1];const l=a;let u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u=f.jsx(Ri,{size:14,className:"text-purple-500 dark:text-purple-400"}),e[2]=u):u=e[2];let h;e[3]!==n?(h=f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n}),e[3]=n,e[4]=h):h=e[4];let m;e[5]===Symbol.for("react.memo_cache_sentinel")?(m=f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-purple-100 dark:bg-purple-500/20 text-purple-600 dark:text-purple-400",children:"Binary"}),e[5]=m):m=e[5];let p;e[6]!==h?(p=f.jsxs("div",{className:"flex items-center gap-2",children:[u,h,m]}),e[6]=h,e[7]=p):p=e[7];let g;e[8]!==r?(g=r?f.jsx(Tn,{size:12,className:"text-emerald-500"}):f.jsx(js,{size:12,className:"text-neutral-400"}),e[8]=r,e[9]=g):g=e[9];let y;e[10]!==l||e[11]!==g?(y=f.jsx("button",{onClick:l,className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:"Copy base64 value",children:g}),e[10]=l,e[11]=g,e[12]=y):y=e[12];let b;return e[13]!==p||e[14]!==y?(b=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-3",children:f.jsxs("div",{className:"flex items-center justify-between",children:[p,y]})}),e[13]=p,e[14]=y,e[15]=b):b=e[15],b}const Qee={kinds:["ConfigMap","ConfigMaps"],adapt(t,e){const n=e.data||{},s=e.binaryData||{},r=Object.keys(n),i=Object.keys(s),a=r.length+i.length,l=[{id:"status",data:{type:"status-cards",items:[...e.immutable?[{label:"Immutable",value:"Yes",status:"warning",icon:f.jsx(om,{size:14,className:"text-amber-400"})}]:[]]}}],u=[],h=[];return r.forEach(m=>{Yee(n[m])?h.push([m,n[m]]):u.push([m,n[m]])}),u.length>0&&l.push({id:"data-simple",title:"Data",data:{type:"custom",render:()=>f.jsx(Jee,{entries:u})}}),h.length>0&&l.push({id:"data-multiline",title:u.length>0?"Files":"Data",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:h.map(([m,p])=>f.jsx(Zee,{name:m,value:p},m))})}}),i.length>0&&l.push({id:"binary-data",title:"Binary Data",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:i.map(m=>f.jsx(Xee,{name:m,value:s[m]},m))})}}),a===0&&l.push({id:"empty",data:{type:"custom",render:()=>f.jsxs("div",{className:"text-center py-8 text-neutral-400 dark:text-neutral-500",children:[f.jsx(Ri,{size:32,className:"mx-auto mb-2 opacity-50"}),f.jsx("p",{className:"text-sm",children:"This ConfigMap is empty"})]})}}),{sections:l}}},ete={kinds:["Gateway","Gateways"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=s?.conditions?.find(h=>h.type==="Accepted"),i=s?.conditions?.find(h=>h.type==="Programmed"),a=r?.status==="True",l=i?.status==="True",u=s?.listeners?.reduce((h,m)=>h+(m.attachedRoutes||0),0)||0;return{sections:[{id:"status",title:"Gateway Status",data:{type:"status-cards",items:[{label:"Gateway Class",value:n.gatewayClassName,status:"neutral"},{label:"Accepted",value:a?"Yes":"No",status:a?"success":"error"},{label:"Programmed",value:l?"Yes":"No",status:l?"success":"error"},{label:"Attached Routes",value:u,status:"neutral"}]}},...s?.addresses&&s.addresses.length>0?[{id:"addresses",title:"Addresses",data:{type:"info-grid",items:s.addresses.map(h=>({label:h.type||"IPAddress",value:h.value,color:"text-blue-400"})),columns:2}}]:[],{id:"listeners",title:"Listeners",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.listeners.map(h=>f.jsx(tte,{listener:h,status:s},h.name))})}}]}}};function tte(t){const e=Pe.c(32),{listener:n,status:s}=t,[r,i]=Is.useState(!1);let a;e[0]!==n.name||e[1]!==s?.listeners?(a=s?.listeners?.find(A=>A.name===n.name),e[0]=n.name,e[1]=s?.listeners,e[2]=a):a=e[2];const u=a?.attachedRoutes??0;let h;e[3]!==r?(h=()=>i(!r),e[3]=r,e[4]=h):h=e[4];let m;e[5]===Symbol.for("react.memo_cache_sentinel")?(m=f.jsx(wZ,{size:14,className:"text-emerald-400"}),e[5]=m):m=e[5];let p;e[6]!==n.name?(p=f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:n.name}),e[6]=n.name,e[7]=p):p=e[7];let g;e[8]!==n.protocol?(g=f.jsx("span",{className:"px-1.5 py-0.5 rounded text-xs bg-blue-500/20 text-blue-400",children:n.protocol}),e[8]=n.protocol,e[9]=g):g=e[9];let y;e[10]!==p||e[11]!==g?(y=f.jsxs("div",{className:"flex items-center gap-2",children:[p,g]}),e[10]=p,e[11]=g,e[12]=y):y=e[12];const b=u!==1?"s":"";let _;e[13]!==u||e[14]!==n.port||e[15]!==b?(_=f.jsxs("div",{className:"text-xs text-neutral-500",children:["Port ",n.port,"  ",u," route",b]}),e[13]=u,e[14]=n.port,e[15]=b,e[16]=_):_=e[16];let w;e[17]!==y||e[18]!==_?(w=f.jsxs("div",{className:"flex-1 min-w-0",children:[y,_]}),e[17]=y,e[18]=_,e[19]=w):w=e[19];let k;e[20]!==h||e[21]!==w?(k=f.jsxs("button",{onClick:h,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[m,w]}),e[20]=h,e[21]=w,e[22]=k):k=e[22];let C;e[23]!==u||e[24]!==r||e[25]!==n.hostname||e[26]!==n.port||e[27]!==n.protocol?(C=r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Protocol & Port"}),f.jsxs("div",{className:"text-xs space-y-1",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Protocol:"}),f.jsx("span",{className:"text-blue-400",children:n.protocol})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Port:"}),f.jsx("span",{className:"text-cyan-400",children:n.port})]})]})]}),n.hostname&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Hostname"}),f.jsx("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Ji,{size:10,className:"text-cyan-400"}),f.jsx("span",{className:"text-cyan-400",children:n.hostname})]})})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Attached Routes"}),f.jsxs("div",{className:"text-xs",children:[f.jsx("span",{className:"text-emerald-400 font-medium",children:u}),f.jsxs("span",{className:"text-neutral-500 ml-1",children:["route",u!==1?"s":""," attached"]})]})]})]}),e[23]=u,e[24]=r,e[25]=n.hostname,e[26]=n.port,e[27]=n.protocol,e[28]=C):C=e[28];let E;return e[29]!==k||e[30]!==C?(E=f.jsxs("div",{className:"border border-emerald-500/30 bg-emerald-500/5 rounded-lg overflow-hidden",children:[k,C]}),e[29]=k,e[30]=C,e[31]=E):E=e[31],E}const nte={kinds:["HTTPRoute","HTTPRoutes"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata?.namespace;return n?{sections:[...n.parentRefs&&n.parentRefs.length>0?[{id:"parents",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.parentRefs.map((i,a)=>{const u=s?.parents?.find(g=>g.parentRef.name===i.name)?.conditions?.find(g=>g.type==="Accepted"),h=u?.status==="True",m=i.namespace||r,p=f.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(pl,{size:10})," Parent Gateway"]}),f.jsxs("div",{className:"text-sm flex items-center gap-2",children:[f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:i.name}),i.namespace&&f.jsxs("span",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:["(",i.namespace,")"]}),f.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ml-auto ${h?"bg-emerald-500/20 text-emerald-600 dark:text-emerald-400":"bg-amber-500/20 text-amber-700 dark:text-amber-400"}`,children:h?"Accepted":u?.reason||"Unknown"})]})]});return m?f.jsx(ji,{to:"/cluster/$context/$resourceType/$name",params:{context:t,resourceType:"gateways.gateway.networking.k8s.io",name:i.name},search:g=>({...g,namespace:m}),className:"block hover:bg-blue-500/15 rounded-lg transition-colors cursor-pointer",children:p},a):f.jsx("div",{children:p},a)})})}}]:[],...n.hostnames&&n.hostnames.length>0?[{id:"hostnames",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 border border-neutral-200 dark:border-neutral-700 rounded-lg p-3",children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-2",children:"Hostnames"}),f.jsx("div",{className:"flex flex-wrap gap-2",children:n.hostnames.map((i,a)=>f.jsx("div",{className:"bg-cyan-500/10 border border-cyan-500/30 rounded px-2.5 py-1 text-sm text-cyan-600 dark:text-cyan-400 font-mono",children:i},a))})]})}}]:[],...n.rules&&n.rules.length>0?[{id:"rules",title:"Routing Rules",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.rules.map((i,a)=>f.jsx(ste,{rule:i,index:a},i.matches?.[0]?.path?.value||`rule-${a}`))})}}]:[]]}:{sections:[]}}};function ste(t){const e=Pe.c(22),{rule:n,index:s}=t,[r,i]=Is.useState(!1),a=n.matches?.length||0,l=n.backendRefs?.length||0;let u;e[0]!==r?(u=()=>i(!r),e[0]=r,e[1]=u):u=e[1];let h;e[2]===Symbol.for("react.memo_cache_sentinel")?(h=f.jsx(Op,{size:14,className:"text-purple-400"}),e[2]=h):h=e[2];const m=s+1;let p;e[3]!==m?(p=f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:["Rule ",m]})}),e[3]=m,e[4]=p):p=e[4];const g=a>0?`${a} match${a!==1?"es":""}`:"All requests",y=l!==1?"s":"";let b;e[5]!==l||e[6]!==g||e[7]!==y?(b=f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:[g,"  ",l," backend",y]}),e[5]=l,e[6]=g,e[7]=y,e[8]=b):b=e[8];let _;e[9]!==p||e[10]!==b?(_=f.jsxs("div",{className:"flex-1 min-w-0",children:[p,b]}),e[9]=p,e[10]=b,e[11]=_):_=e[11];let w;e[12]!==u||e[13]!==_?(w=f.jsxs("button",{onClick:u,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[h,_]}),e[12]=u,e[13]=_,e[14]=w):w=e[14];let k;e[15]!==r||e[16]!==n.backendRefs||e[17]!==n.matches?(k=r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[n.matches&&n.matches.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Matches"}),f.jsx("div",{className:"space-y-2",children:n.matches.map(ite)})]}),n.backendRefs&&n.backendRefs.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Backend Services"}),f.jsx("div",{className:"space-y-2",children:n.backendRefs.map(rte)})]})]}),e[15]=r,e[16]=n.backendRefs,e[17]=n.matches,e[18]=k):k=e[18];let C;return e[19]!==k||e[20]!==w?(C=f.jsxs("div",{className:"border border-purple-500/30 bg-purple-500/5 rounded-lg overflow-hidden",children:[w,k]}),e[19]=k,e[20]=w,e[21]=C):C=e[21],C}function rte(t,e){return f.jsx("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Dy,{size:10,className:"text-emerald-600 dark:text-emerald-400"}),f.jsx("span",{className:"text-emerald-600 dark:text-emerald-400",children:t.name}),t.port&&f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:":"}),f.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:t.port})]}),t.weight!==void 0&&f.jsxs("span",{className:"ml-auto px-1 py-0.5 rounded bg-amber-500/20 text-amber-400 text-[10px]",children:["weight: ",t.weight]})]})},e)}function ite(t,e){return f.jsxs("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:[t.path?.value&&f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(Op,{size:10,className:"text-cyan-600 dark:text-cyan-400"}),f.jsx("span",{className:"text-neutral-600 dark:text-neutral-400",children:"Path:"}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-mono",children:t.path.value})]}),t.method&&f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400 ml-4",children:"Method:"}),f.jsx("span",{className:"px-1 py-0.5 rounded bg-blue-500/20 text-blue-400 text-[10px] font-mono",children:t.method})]})]},e)}const ate={kinds:["GRPCRoute","GRPCRoutes"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata?.namespace;return n?{sections:[...n.parentRefs&&n.parentRefs.length>0?[{id:"parents",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.parentRefs.map((i,a)=>{const u=s?.parents?.find(g=>g.parentRef.name===i.name)?.conditions?.find(g=>g.type==="Accepted"),h=u?.status==="True",m=i.namespace||r,p=f.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(pl,{size:10})," Parent Gateway"]}),f.jsxs("div",{className:"text-sm flex items-center gap-2",children:[f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:i.name}),i.namespace&&f.jsxs("span",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:["(",i.namespace,")"]}),f.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ml-auto ${h?"bg-emerald-500/20 text-emerald-600 dark:text-emerald-400":"bg-amber-500/20 text-amber-700 dark:text-amber-400"}`,children:h?"Accepted":u?.reason||"Unknown"})]})]});return m?f.jsx(ji,{to:"/cluster/$context/$resourceType/$name",params:{context:t,resourceType:"gateways.gateway.networking.k8s.io",name:i.name},search:g=>({...g,namespace:m}),className:"block hover:bg-blue-500/15 rounded-lg transition-colors cursor-pointer",children:p},a):f.jsx("div",{children:p},a)})})}}]:[],...n.hostnames&&n.hostnames.length>0?[{id:"hostnames",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 border border-neutral-200 dark:border-neutral-700 rounded-lg p-3",children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-2",children:"Hostnames"}),f.jsx("div",{className:"flex flex-wrap gap-2",children:n.hostnames.map((i,a)=>f.jsx("div",{className:"bg-cyan-500/10 border border-cyan-500/30 rounded px-2.5 py-1 text-sm text-cyan-600 dark:text-cyan-400 font-mono",children:i},a))})]})}}]:[],...n.rules&&n.rules.length>0?[{id:"rules",title:"Routing Rules",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.rules.map((i,a)=>f.jsx(ote,{rule:i,index:a},i.matches?.[0]?.method?.service||`rule-${a}`))})}}]:[]]}:{sections:[]}}};function ote(t){const e=Pe.c(22),{rule:n,index:s}=t,[r,i]=Is.useState(!1),a=n.matches?.length||0,l=n.backendRefs?.length||0;let u;e[0]!==r?(u=()=>i(!r),e[0]=r,e[1]=u):u=e[1];let h;e[2]===Symbol.for("react.memo_cache_sentinel")?(h=f.jsx(Vs,{size:14,className:"text-indigo-400"}),e[2]=h):h=e[2];const m=s+1;let p;e[3]!==m?(p=f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:["Rule ",m]})}),e[3]=m,e[4]=p):p=e[4];const g=a>0?`${a} match${a!==1?"es":""}`:"All methods",y=l!==1?"s":"";let b;e[5]!==l||e[6]!==g||e[7]!==y?(b=f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:[g,"  ",l," backend",y]}),e[5]=l,e[6]=g,e[7]=y,e[8]=b):b=e[8];let _;e[9]!==p||e[10]!==b?(_=f.jsxs("div",{className:"flex-1 min-w-0",children:[p,b]}),e[9]=p,e[10]=b,e[11]=_):_=e[11];let w;e[12]!==u||e[13]!==_?(w=f.jsxs("button",{onClick:u,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[h,_]}),e[12]=u,e[13]=_,e[14]=w):w=e[14];let k;e[15]!==r||e[16]!==n.backendRefs||e[17]!==n.matches?(k=r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[n.matches&&n.matches.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"gRPC Method Matches"}),f.jsx("div",{className:"space-y-2",children:n.matches.map(cte)})]}),n.backendRefs&&n.backendRefs.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Backend Services"}),f.jsx("div",{className:"space-y-2",children:n.backendRefs.map(lte)})]})]}),e[15]=r,e[16]=n.backendRefs,e[17]=n.matches,e[18]=k):k=e[18];let C;return e[19]!==k||e[20]!==w?(C=f.jsxs("div",{className:"border border-indigo-500/30 bg-indigo-500/5 rounded-lg overflow-hidden",children:[w,k]}),e[19]=k,e[20]=w,e[21]=C):C=e[21],C}function lte(t,e){return f.jsx("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Dy,{size:10,className:"text-emerald-600 dark:text-emerald-400"}),f.jsx("span",{className:"text-emerald-600 dark:text-emerald-400",children:t.name}),t.port&&f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:":"}),f.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:t.port})]}),t.weight!==void 0&&f.jsxs("span",{className:"ml-auto px-1 py-0.5 rounded bg-amber-500/20 text-amber-400 text-[10px]",children:["weight: ",t.weight]})]})},e)}function cte(t,e){return f.jsxs("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:[t.method?.service&&f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(Vs,{size:10,className:"text-purple-600 dark:text-purple-400"}),f.jsx("span",{className:"text-neutral-600 dark:text-neutral-400",children:"Service:"}),f.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-mono",children:t.method.service})]}),t.method?.method&&f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-400 ml-4",children:"Method:"}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-mono",children:t.method.method})]})]},e)}const ute={kinds:["Ingress","Ingresses"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=s?.loadBalancer?.ingress&&s.loadBalancer.ingress.length>0;return{sections:[{id:"status",title:"Ingress Status",data:{type:"status-cards",items:[{label:"Ingress Class",value:n.ingressClassName||"default",status:"neutral"},{label:"Load Balancer",value:r?"Ready":"Pending",status:r?"success":"warning"}]}},...r?[{id:"load-balancer",title:"Load Balancer",data:{type:"info-grid",items:(s?.loadBalancer?.ingress||[]).map(i=>({label:i.hostname?"Hostname":"IP Address",value:i.hostname||i.ip||"Unknown",color:"text-blue-400"})),columns:2}}]:[],...n.tls&&n.tls.length>0?[{id:"tls",title:"TLS Configuration",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.tls.map((i,a)=>f.jsx(fte,{tls:i,index:a},i.secretName||`tls-${a}`))})}}]:[],...n.rules&&n.rules.length>0?[{id:"rules",title:"Routing Rules",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.rules.map((i,a)=>f.jsx(hte,{rule:i,index:a},i.host||`rule-${a}`))})}}]:[],...n.defaultBackend?.service?[{id:"default-backend",title:"Default Backend",data:{type:"info-grid",items:[{label:"Service",value:n.defaultBackend.service.name},{label:"Port",value:String(n.defaultBackend.service.port?.number||n.defaultBackend.service.port?.name||"unknown")}],columns:2}}]:[]]}}};function hte(t){const e=Pe.c(21),{rule:n,index:s}=t,[r,i]=Is.useState(!1);let a;e[0]!==r?(a=()=>i(!r),e[0]=r,e[1]=a):a=e[1];let l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=f.jsx(Vs,{size:14,className:"text-blue-400"}),e[2]=l):l=e[2];const u=n.host||`Rule ${s+1}`;let h;e[3]!==u?(h=f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:u})}),e[3]=u,e[4]=h):h=e[4];const m=n.http?.paths.length||0,p=n.http?.paths.length!==1?"s":"";let g;e[5]!==m||e[6]!==p?(g=f.jsxs("div",{className:"text-xs text-neutral-500",children:[m," path",p]}),e[5]=m,e[6]=p,e[7]=g):g=e[7];let y;e[8]!==h||e[9]!==g?(y=f.jsxs("div",{className:"flex-1 min-w-0",children:[h,g]}),e[8]=h,e[9]=g,e[10]=y):y=e[10];let b;e[11]!==a||e[12]!==y?(b=f.jsxs("button",{onClick:a,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[l,y]}),e[11]=a,e[12]=y,e[13]=b):b=e[13];let _;e[14]!==r||e[15]!==n.host||e[16]!==n.http?(_=r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[n.host&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Host"}),f.jsx("div",{className:"text-xs text-cyan-400",children:n.host})]}),n.http?.paths&&n.http.paths.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Paths"}),f.jsx("div",{className:"space-y-2",children:n.http.paths.map(dte)})]})]}),e[14]=r,e[15]=n.host,e[16]=n.http,e[17]=_):_=e[17];let w;return e[18]!==_||e[19]!==b?(w=f.jsxs("div",{className:"border border-blue-500/30 bg-blue-500/5 rounded-lg overflow-hidden",children:[b,_]}),e[18]=_,e[19]=b,e[20]=w):w=e[20],w}function dte(t,e){const n=t.backend.service?.port?.number||t.backend.service?.port?.name||"";return f.jsxs("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(Op,{size:10,className:"text-purple-400"}),f.jsx("span",{className:"text-neutral-700 dark:text-neutral-300 font-mono",children:t.path||"/"}),f.jsx("span",{className:"px-1 py-0.5 rounded bg-purple-500/20 text-purple-400 text-[10px]",children:t.pathType})]}),f.jsxs("div",{className:"ml-4 flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-600",children:""}),f.jsx("span",{className:"text-emerald-400",children:t.backend.service?.name||"unknown"}),f.jsx("span",{className:"text-neutral-600",children:":"}),f.jsx("span",{className:"text-blue-400",children:n})]})]},e)}function fte(t){const e=Pe.c(22),{tls:n,index:s}=t,[r,i]=Is.useState(!1);let a;e[0]!==r?(a=()=>i(!r),e[0]=r,e[1]=a):a=e[1];let l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=f.jsx(tb,{size:14,className:"text-amber-400"}),e[2]=l):l=e[2];const u=n.secretName||`TLS ${s+1}`;let h;e[3]!==u?(h=f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:u})}),e[3]=u,e[4]=h):h=e[4];let m;e[5]!==n.hosts?(m=n.hosts?.join(", ")||"All hosts",e[5]=n.hosts,e[6]=m):m=e[6];let p;e[7]!==m?(p=f.jsx("div",{className:"text-xs text-neutral-500 truncate",children:m}),e[7]=m,e[8]=p):p=e[8];let g;e[9]!==h||e[10]!==p?(g=f.jsxs("div",{className:"flex-1 min-w-0",children:[h,p]}),e[9]=h,e[10]=p,e[11]=g):g=e[11];let y;e[12]!==a||e[13]!==g?(y=f.jsxs("button",{onClick:a,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[l,g]}),e[12]=a,e[13]=g,e[14]=y):y=e[14];let b;e[15]!==r||e[16]!==n.hosts||e[17]!==n.secretName?(b=r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Secret"}),f.jsx("div",{className:"text-xs text-purple-400",children:n.secretName||"default"})]}),n.hosts&&n.hosts.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Hosts"}),f.jsx("div",{className:"space-y-1",children:n.hosts.map(pte)})]})]}),e[15]=r,e[16]=n.hosts,e[17]=n.secretName,e[18]=b):b=e[18];let _;return e[19]!==y||e[20]!==b?(_=f.jsxs("div",{className:"border border-amber-500/30 bg-amber-500/5 rounded-lg overflow-hidden",children:[y,b]}),e[19]=y,e[20]=b,e[21]=_):_=e[21],_}function pte(t,e){return f.jsx("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Ji,{size:10,className:"text-cyan-400"}),f.jsx("span",{className:"text-cyan-400",children:t})]})},e)}const mte=[jJ,OJ,PJ,BJ,$J,zJ,UJ,VJ,qJ,GJ,rX,uX,yX,Tee,jee,Mee,Gee,Qee,ete,nte,ate,ute],nE=new Map;mte.forEach(t=>{t.kinds.forEach(e=>{nE.set(e.toLowerCase(),t)})});function MP(t){return nE.get(t.toLowerCase())??null}function gte(t){return nE.has(t.toLowerCase())}function yte(t,e){const n=e.kind;if(!n)return null;const s=MP(n);return s?s.adapt(t,e):null}const vte=cm(async(t,e)=>{const n=e.kind,s=e.apiVersion,r=e.metadata?.name,i=e.metadata?.namespace;if(!n||!r)throw new Error("Resource kind and name are required");const a=await AD(t,n,s);if(!a)throw new Error(`Could not find API configuration for ${n}`);await uJ(t,a,r,i)});function IP(t){const e=t.kind;if(!e)return[];const n=MP(e),s=[];if(n?.actions){const r=n.actions.filter(i=>i.id!=="delete"&&(!i.isVisible||i.isVisible(t)));s.push(...r)}return s.push(vte),s}function DP({context:t,actions:e,resource:n,onActionComplete:s}){const[r,i]=F.useState(null),[a,l]=F.useState(null),[u,h]=F.useState(null),[m,p]=F.useState({}),[g,y]=F.useState(null);if(e.length===0)return null;const b=async(k,C)=>{y(null),i(k.id);try{await k.execute(t,n,C),s?.()}catch(E){y(E instanceof Error?E.message:"Action failed")}finally{i(null),l(null),h(null),p({})}},_=k=>{if(k.input){const C=k.input.defaultValue?k.input.defaultValue(n):k.input.type==="number"?0:"";p({value:C}),h(k)}else k.confirm?l(k):b(k)},w=(k="secondary")=>{switch(k){case"primary":return"bg-blue-600 hover:bg-blue-700 text-white border-blue-600";case"danger":return"bg-red-600 hover:bg-red-700 text-white border-red-600";case"warning":return"bg-amber-600 hover:bg-amber-700 text-white border-amber-600";default:return"bg-neutral-700 hover:bg-neutral-600 text-neutral-200 border-neutral-600"}};return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.map(k=>{const C=k.isDisabled?.(n),E=C===!0||typeof C=="string",A=typeof C=="string"?C:void 0,R=r===k.id;return f.jsxs("button",{onClick:()=>_(k),disabled:E||R,title:A,className:`
                flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded border
                transition-colors duration-150
                ${w(k.variant)}
                ${E?"opacity-50 cursor-not-allowed":"cursor-pointer"}
                ${R?"opacity-75":""}
              `,children:[R?f.jsx(Cn,{size:14,className:"animate-spin"}):k.icon,k.label]},k.id)})}),g&&f.jsx("div",{className:"mb-4 p-2 bg-red-500/10 border border-red-500/30 rounded text-red-400 text-xs",children:g}),a&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:f.jsxs("div",{className:"bg-neutral-800 border border-neutral-700 rounded-lg p-4 max-w-md mx-4 shadow-xl",children:[f.jsx("h3",{className:"text-sm font-semibold text-neutral-200 mb-2",children:a.confirm?.title}),f.jsx("p",{className:"text-xs text-neutral-400 mb-4",children:a.confirm?.message}),f.jsxs("div",{className:"flex justify-end gap-2",children:[f.jsx("button",{onClick:()=>l(null),className:"px-3 py-1.5 text-xs font-medium rounded border border-neutral-600 bg-neutral-700 hover:bg-neutral-600 text-neutral-200",children:"Cancel"}),f.jsxs("button",{onClick:()=>b(a),disabled:r===a.id,className:`
                  flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded border
                  ${w(a.variant)}
                  ${r===a.id?"opacity-75":""}
                `,children:[r===a.id&&f.jsx(Cn,{size:14,className:"animate-spin"}),a.confirm?.confirmLabel||"Confirm"]})]})]})}),u&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:f.jsxs("div",{className:"bg-neutral-800 border border-neutral-700 rounded-lg p-4 max-w-md mx-4 shadow-xl",children:[f.jsx("h3",{className:"text-sm font-semibold text-neutral-200 mb-2",children:u.input?.title}),u.input?.description&&f.jsx("p",{className:"text-xs text-neutral-400 mb-4",children:u.input.description}),f.jsxs("form",{onSubmit:k=>{k.preventDefault(),b(u,m)},className:"space-y-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs text-neutral-400 mb-1",children:u.input?.label}),f.jsx("input",{type:u.input?.type,value:m.value??"",onChange:k=>{const C=u.input?.type==="number"?parseInt(k.target.value,10)||0:k.target.value;p({value:C})},min:u.input?.min,max:u.input?.max,placeholder:u.input?.placeholder,className:"w-full px-3 py-2 text-sm bg-neutral-900 border border-neutral-600 rounded text-neutral-200 placeholder-neutral-500 focus:outline-none focus:border-blue-500",autoFocus:!0})]}),f.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[f.jsx("button",{type:"button",onClick:()=>{h(null),p({})},className:"px-3 py-1.5 text-xs font-medium rounded border border-neutral-600 bg-neutral-700 hover:bg-neutral-600 text-neutral-200",children:"Cancel"}),f.jsxs("button",{type:"submit",disabled:r===u.id,className:`
                    flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded border
                    ${w(u.variant)}
                    ${r===u.id?"opacity-75":""}
                  `,children:[r===u.id&&f.jsx(Cn,{size:14,className:"animate-spin"}),u.input?.submitLabel||"Submit"]})]})]})]})})]})}function bte(t){const e=Pe.c(6),{items:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s={success:"text-emerald-400",warning:"text-amber-400",error:"text-red-400",neutral:"text-neutral-900 dark:text-neutral-100"},e[0]=s):s=e[0];const r=s;let i;if(e[1]!==n){let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=(u,h)=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800 rounded-lg p-3",children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:u.label}),f.jsxs("div",{className:`text-sm font-medium flex items-center gap-2 ${r[u.status||"neutral"]}`,children:[u.icon,u.value]}),u.description&&f.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:u.description})]},h),e[3]=l):l=e[3],i=n.map(l),e[1]=n,e[2]=i}else i=e[2];let a;return e[4]!==i?(a=f.jsx("div",{className:"grid grid-cols-2 gap-3",children:i}),e[4]=i,e[5]=a):a=e[5],a}function _te(t){const e=Pe.c(12),{items:n,podGrid:s}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r={emerald:"text-emerald-400",blue:"text-blue-400",cyan:"text-cyan-400",purple:"text-purple-400",amber:"text-amber-400"},e[0]=r):r=e[0];const i=r;let a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a={emerald:"bg-emerald-500",blue:"bg-blue-500",cyan:"bg-cyan-500",purple:"bg-purple-500",amber:"bg-amber-500"},e[1]=a):a=e[1];const l=a;let u;if(e[2]!==n){let g;e[4]===Symbol.for("react.memo_cache_sentinel")?(g=(y,b)=>{const _=y.total>0?Math.min(y.current/y.total*100,100):0;return f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:y.label}),f.jsxs("span",{className:i[y.color],children:[y.current,"/",y.total]})]}),f.jsx("div",{className:"h-1 bg-neutral-300 dark:bg-neutral-700 rounded-full overflow-hidden",children:f.jsx("div",{className:`h-full ${l[y.color]}`,style:{width:`${_}%`}})})]},b)},e[4]=g):g=e[4],u=n.map(g),e[2]=n,e[3]=u}else u=e[3];let h;e[5]!==u?(h=f.jsx("div",{className:"flex items-center gap-4 mb-3",children:u}),e[5]=u,e[6]=h):h=e[6];let m;e[7]!==s?(m=s&&f.jsx(xte,{data:s}),e[7]=s,e[8]=m):m=e[8];let p;return e[9]!==h||e[10]!==m?(p=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800 rounded-lg p-3",children:[h,m]}),e[9]=h,e[10]=m,e[11]=p):p=e[11],p}function xte(t){const e=Pe.c(10),{data:n}=t,s=n.icon==="database"?Ih:n.icon==="server"?ra:eo;let r;e[0]!==n.total?(r=Array.from({length:n.total}),e[0]=n.total,e[1]=r):r=e[1];let i;return e[2]!==s||e[3]!==n.available||e[4]!==n.current||e[5]!==n.podTitles||e[6]!==n.ready||e[7]!==n.showOrdinal||e[8]!==r?(i=f.jsx("div",{className:"flex flex-wrap gap-1",children:r.map((a,l)=>{const u=l<n.ready,h=n.available!==void 0?l<n.available:u,m=n.current!==void 0?l<n.current:h,p=n.podTitles?.[l]??`Pod ${l}`;return f.jsxs("div",{className:`${n.showOrdinal?"w-8 h-8":"w-6 h-6"} rounded flex flex-col items-center justify-center ${u?"bg-emerald-500/20 border border-emerald-500/50":h?"bg-cyan-500/20 border border-cyan-500/50":m?"bg-amber-500/20 border border-amber-500/50":"bg-neutral-300/50 dark:bg-neutral-700/50 border border-neutral-400 dark:border-neutral-600"}`,title:`${p}: ${u?"Ready":h?"Available":m?"Current":"Pending"}`,children:[f.jsx(s,{size:n.showOrdinal?10:12,className:u?"text-emerald-600 dark:text-emerald-400":h?"text-cyan-600 dark:text-cyan-400":m?"text-amber-600 dark:text-amber-400":"text-neutral-600 dark:text-neutral-500"}),n.showOrdinal&&f.jsx("span",{className:`text-[9px] ${u?"text-emerald-600 dark:text-emerald-400":h?"text-cyan-600 dark:text-cyan-400":m?"text-amber-600 dark:text-amber-400":"text-neutral-600 dark:text-neutral-500"}`,children:l})]},l)})}),e[2]=s,e[3]=n.available,e[4]=n.current,e[5]=n.podTitles,e[6]=n.ready,e[7]=n.showOrdinal,e[8]=r,e[9]=i):i=e[9],i}function wte(t,e){if(t==="running")return{label:"Running",borderClass:"border-emerald-500/30 bg-emerald-500/5",badgeClass:"bg-emerald-500/20 text-emerald-400",iconClass:"text-emerald-400"};if(t==="waiting"){const n=e==="CrashLoopBackOff"||e==="Error";return{label:e||"Waiting",borderClass:n?"border-red-500/30 bg-red-500/5":"border-amber-500/30 bg-amber-500/5",badgeClass:n?"bg-red-500/20 text-red-400":"bg-amber-500/20 text-amber-400",iconClass:n?"text-red-400":"text-amber-400"}}return t==="terminated"?{label:e||"Terminated",borderClass:"border-neutral-300 bg-neutral-100 dark:border-neutral-700 dark:bg-neutral-900/50",badgeClass:"bg-neutral-200 text-neutral-600 dark:bg-neutral-700 dark:text-neutral-400",iconClass:"text-neutral-500 dark:text-neutral-400"}:{label:"Unknown",borderClass:"border-neutral-300 bg-neutral-100 dark:border-neutral-700 dark:bg-neutral-900/50",badgeClass:"bg-neutral-200 text-neutral-600 dark:bg-neutral-700 dark:text-neutral-400",iconClass:"text-neutral-500 dark:text-neutral-400"}}const Ste=15e3;function kte(t){const e=Pe.c(10),{items:n,metricsLoader:s}=t,[r,i]=F.useState(null);let a,l;if(e[0]!==s?(a=()=>{if(!s)return;let m=!0;const p=async()=>{const y=await s();m&&i(y)};p();const g=setInterval(p,Ste);return()=>{m=!1,clearInterval(g)}},l=[s],e[0]=s,e[1]=a,e[2]=l):(a=e[1],l=e[2]),F.useEffect(a,l),n.length===0)return null;let u;if(e[3]!==n||e[4]!==r){let m;e[6]!==r?(m=p=>f.jsx(Cte,{container:p,metrics:r?.get(p.name)},p.name),e[6]=r,e[7]=m):m=e[7],u=n.map(m),e[3]=n,e[4]=r,e[5]=u}else u=e[5];let h;return e[8]!==u?(h=f.jsx("div",{className:"space-y-2",children:u}),e[8]=u,e[9]=h):h=e[9],h}function Cte(t){const e=Pe.c(52),{container:n,metrics:s}=t,[r,i]=F.useState(!1);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=()=>i(Tte),e[0]=a):a=e[0];const l=a;let u;e[1]!==n.state||e[2]!==n.stateReason?(u=wte(n.state,n.stateReason),e[1]=n.state,e[2]=n.stateReason,e[3]=u):u=e[3];const h=u,m=`border rounded-lg overflow-hidden ${h.borderClass}`;let p;e[4]!==h.iconClass?(p=f.jsx(eo,{size:16,className:h.iconClass}),e[4]=h.iconClass,e[5]=p):p=e[5];let g;e[6]!==n.name?(g=f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:n.name}),e[6]=n.name,e[7]=g):g=e[7];let y;e[8]!==n.state||e[9]!==h.badgeClass||e[10]!==h.label?(y=n.state&&f.jsx("span",{className:`px-1.5 py-0.5 rounded text-xs ${h.badgeClass}`,children:h.label}),e[8]=n.state,e[9]=h.badgeClass,e[10]=h.label,e[11]=y):y=e[11];let b;e[12]!==g||e[13]!==y?(b=f.jsxs("div",{className:"flex items-center gap-2",children:[g,y]}),e[12]=g,e[13]=y,e[14]=b):b=e[14];let _;e[15]!==n.image?(_=f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 truncate",children:n.image}),e[15]=n.image,e[16]=_):_=e[16];let w;e[17]!==b||e[18]!==_?(w=f.jsxs("div",{className:"flex-1 min-w-0",children:[b,_]}),e[17]=b,e[18]=_,e[19]=w):w=e[19];let k;e[20]!==s?(k=s&&f.jsxs("div",{className:"flex items-center gap-3 text-xs font-mono",children:[f.jsx("span",{className:"text-blue-400",title:"CPU",children:s.cpu.usage}),f.jsx("span",{className:"text-purple-400",title:"Memory",children:s.memory.usage})]}),e[20]=s,e[21]=k):k=e[21];let C;e[22]!==n.restartCount?(C=(n.restartCount??0)>0&&f.jsxs("div",{className:"text-xs text-amber-400",children:[n.restartCount," restarts"]}),e[22]=n.restartCount,e[23]=C):C=e[23];let E;e[24]!==n.replicas?(E=n.replicas&&f.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 font-mono",children:n.replicas}),e[24]=n.replicas,e[25]=E):E=e[25];let A;e[26]!==k||e[27]!==C||e[28]!==E||e[29]!==p||e[30]!==w?(A=f.jsxs("button",{onClick:l,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[p,w,k,C,E]}),e[26]=k,e[27]=C,e[28]=E,e[29]=p,e[30]=w,e[31]=A):A=e[31];let R;e[32]!==n.args||e[33]!==n.command||e[34]!==n.currentTermination||e[35]!==n.env||e[36]!==n.envFrom||e[37]!==n.image||e[38]!==n.lastTermination||e[39]!==n.mounts||e[40]!==n.ports||e[41]!==n.resources||e[42]!==n.state||e[43]!==n.stateMessage||e[44]!==n.stateReason||e[45]!==r||e[46]!==s?(R=r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[n.currentTermination&&f.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded p-2",children:[f.jsx("div",{className:"text-xs text-red-400 font-medium mb-1",children:"Terminated"}),f.jsxs("div",{className:"text-xs space-y-1",children:[n.currentTermination.reason&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Reason:"})," ",n.currentTermination.reason]}),n.currentTermination.exitCode!==void 0&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Exit Code:"})," ",n.currentTermination.exitCode]}),n.currentTermination.signal!==void 0&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Signal:"})," ",n.currentTermination.signal]}),n.currentTermination.finishedAt&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Finished:"})," ",new Date(n.currentTermination.finishedAt).toLocaleString()]}),n.currentTermination.message&&f.jsxs("div",{className:"mt-2 p-2 bg-neutral-900/50 rounded",children:[f.jsx("div",{className:"text-neutral-600 dark:text-neutral-500 mb-1",children:"Message:"}),f.jsx("div",{className:"text-red-300 text-[11px] font-mono break-all whitespace-pre-wrap",children:n.currentTermination.message})]})]})]}),n.state==="waiting"&&n.stateMessage&&f.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded p-2",children:[f.jsxs("div",{className:"text-xs text-amber-400 font-medium mb-1",children:["Waiting: ",n.stateReason]}),f.jsx("div",{className:"text-amber-300 text-[11px] font-mono break-all whitespace-pre-wrap",children:n.stateMessage})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Image"}),f.jsx("div",{className:"text-xs text-cyan-600 dark:text-cyan-400 break-all",children:n.image})]}),(n.command||n.args)&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Command"}),f.jsx("code",{className:"text-xs text-neutral-900 dark:text-neutral-300 bg-neutral-200 dark:bg-neutral-800 px-2 py-1 rounded block",children:[...n.command||[],...n.args||[]].join(" ")})]}),n.lastTermination&&f.jsxs("div",{className:"bg-red-500/5 border border-red-500/20 rounded p-2",children:[f.jsx("div",{className:"text-xs text-red-400 font-medium mb-1",children:"Last Termination"}),f.jsxs("div",{className:"text-xs space-y-0.5",children:[n.lastTermination.reason&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Reason:"})," ",n.lastTermination.reason]}),n.lastTermination.exitCode!==void 0&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Exit Code:"})," ",n.lastTermination.exitCode]}),n.lastTermination.signal!==void 0&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Signal:"})," ",n.lastTermination.signal]}),n.lastTermination.finishedAt&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Finished:"})," ",new Date(n.lastTermination.finishedAt).toLocaleString()]})]})]}),n.ports&&n.ports.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Ports"}),f.jsx("div",{className:"flex flex-wrap gap-1",children:n.ports.map(Rte)})]}),!s&&n.resources&&f.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.resources.requests&&f.jsxs("div",{children:[f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(eb,{size:10})," Requests"]}),f.jsx("div",{className:"text-xs space-y-0.5",children:Object.entries(n.resources.requests).map(Ate)})]}),n.resources.limits&&f.jsxs("div",{children:[f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(Ws,{size:10})," Limits"]}),f.jsx("div",{className:"text-xs space-y-0.5",children:Object.entries(n.resources.limits).map(Ete)})]})]}),(n.env&&n.env.length>0||n.envFrom&&n.envFrom.length>0)&&f.jsx(jte,{env:n.env,envFrom:n.envFrom}),n.mounts&&n.mounts.length>0&&f.jsxs("div",{children:[f.jsxs("div",{className:"text-xs text-neutral-500 mb-2 flex items-center gap-1",children:[f.jsx(Ws,{size:10})," Volume Mounts"]}),f.jsx("div",{className:"text-xs space-y-1.5",children:n.mounts.map(Nte)})]})]}),e[32]=n.args,e[33]=n.command,e[34]=n.currentTermination,e[35]=n.env,e[36]=n.envFrom,e[37]=n.image,e[38]=n.lastTermination,e[39]=n.mounts,e[40]=n.ports,e[41]=n.resources,e[42]=n.state,e[43]=n.stateMessage,e[44]=n.stateReason,e[45]=r,e[46]=s,e[47]=R):R=e[47];let N;return e[48]!==A||e[49]!==R||e[50]!==m?(N=f.jsxs("div",{className:m,children:[A,R]}),e[48]=A,e[49]=R,e[50]=m,e[51]=N):N=e[51],N}function Nte(t,e){return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded p-2 flex items-center gap-2",children:[f.jsx("span",{className:"text-purple-400 truncate max-w-35",title:t.name,children:t.name}),f.jsx("span",{className:"text-neutral-600",children:""}),f.jsx("span",{className:"text-cyan-400 font-mono truncate flex-1",title:t.mountPath,children:t.mountPath}),t.readOnly&&f.jsx("span",{className:"text-amber-400 text-[10px] px-1 py-0.5 bg-amber-500/10 rounded",children:"(ro)"})]},e)}function Ete(t){const[e,n]=t;return f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-500",children:[e,":"]})," ",n]},e)}function Ate(t){const[e,n]=t;return f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-500",children:[e,":"]})," ",n]},e)}function Rte(t,e){return f.jsxs("span",{className:"text-xs text-neutral-900 dark:text-neutral-100 bg-neutral-200 dark:bg-neutral-800 px-2 py-1 rounded",children:[t.containerPort,"/",t.protocol||"TCP",t.name&&f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-500 ml-1",children:["(",t.name,")"]})]},e)}function Tte(t){return!t}function jte(t){const e=Pe.c(9),{env:n,envFrom:s}=t,r=s&&s.length>0;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=f.jsx("div",{className:"text-xs text-neutral-500 mb-2",children:"Environment"}),e[0]=i):i=e[0];let a;e[1]!==s||e[2]!==r?(a=r&&f.jsx("div",{className:"mb-2 space-y-1",children:s.map(Mte)}),e[1]=s,e[2]=r,e[3]=a):a=e[3];let l;e[4]!==n?(l=n&&n.length>0&&f.jsx("table",{className:"w-full text-xs",children:f.jsx("tbody",{children:n.map(Ote)})}),e[4]=n,e[5]=l):l=e[5];let u;return e[6]!==a||e[7]!==l?(u=f.jsxs("div",{children:[i,a,l]}),e[6]=a,e[7]=l,e[8]=u):u=e[8],u}function Ote(t,e){return f.jsxs("tr",{className:e%2===0?"bg-neutral-50 dark:bg-neutral-800/30":"",children:[f.jsx("td",{className:"py-1 px-2 text-sky-600 dark:text-sky-400 font-mono truncate max-w-35",title:t.name,children:t.name}),f.jsx("td",{className:"py-1 px-2 truncate",children:f.jsx(Ite,{env:t})})]},t.name)}function Mte(t,e){return f.jsxs("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 px-2 py-1.5 rounded flex items-center gap-2",children:[t.type==="secret"?f.jsx(vD,{size:12,className:"text-amber-500 shrink-0"}):f.jsx(Ri,{size:12,className:"text-blue-400 shrink-0"}),f.jsx("span",{className:"text-neutral-500",children:"from"}),f.jsx("span",{className:t.type==="secret"?"text-amber-500":"text-blue-400",children:t.type==="secret"?"Secret":"ConfigMap"}),f.jsx("span",{className:"text-neutral-900 dark:text-neutral-300 font-mono",children:t.name}),t.prefix&&f.jsxs("span",{className:"text-neutral-500 ml-auto text-[10px]",children:["prefix: ",t.prefix]})]},e)}function Ite(t){const e=Pe.c(29),{env:n}=t;if(n.value!==void 0){let r;return e[0]!==n.value?(r=f.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 font-mono",title:n.value,children:n.value}),e[0]=n.value,e[1]=r):r=e[1],r}if(n.valueFrom){const{type:r,source:i,key:a}=n.valueFrom;switch(r){case"secretKeyRef":{const l=`Secret: ${i}/${a}`;let u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u=f.jsx(vD,{size:10,className:"shrink-0"}),e[2]=u):u=e[2];let h;e[3]!==a||e[4]!==i?(h=f.jsxs("span",{className:"truncate font-mono",children:[i,"/",a]}),e[3]=a,e[4]=i,e[5]=h):h=e[5];let m;return e[6]!==l||e[7]!==h?(m=f.jsxs("span",{className:"flex items-center gap-1 text-amber-600 dark:text-amber-500",title:l,children:[u,h]}),e[6]=l,e[7]=h,e[8]=m):m=e[8],m}case"configMapKeyRef":{const l=`ConfigMap: ${i}/${a}`;let u;e[9]===Symbol.for("react.memo_cache_sentinel")?(u=f.jsx(Ri,{size:10,className:"shrink-0"}),e[9]=u):u=e[9];let h;e[10]!==a||e[11]!==i?(h=f.jsxs("span",{className:"truncate font-mono",children:[i,"/",a]}),e[10]=a,e[11]=i,e[12]=h):h=e[12];let m;return e[13]!==l||e[14]!==h?(m=f.jsxs("span",{className:"flex items-center gap-1 text-blue-600 dark:text-blue-400",title:l,children:[u,h]}),e[13]=l,e[14]=h,e[15]=m):m=e[15],m}case"fieldRef":{const l=`Field: ${i}`;let u;e[16]===Symbol.for("react.memo_cache_sentinel")?(u=f.jsx(HS,{size:10,className:"shrink-0"}),e[16]=u):u=e[16];let h;e[17]!==i?(h=f.jsx("span",{className:"truncate font-mono",children:i}),e[17]=i,e[18]=h):h=e[18];let m;return e[19]!==l||e[20]!==h?(m=f.jsxs("span",{className:"flex items-center gap-1 text-purple-600 dark:text-purple-400",title:l,children:[u,h]}),e[19]=l,e[20]=h,e[21]=m):m=e[21],m}case"resourceFieldRef":{const l=`Resource: ${i}`;let u;e[22]===Symbol.for("react.memo_cache_sentinel")?(u=f.jsx(HS,{size:10,className:"shrink-0"}),e[22]=u):u=e[22];let h;e[23]!==i?(h=f.jsx("span",{className:"truncate font-mono",children:i}),e[23]=i,e[24]=h):h=e[24];let m;return e[25]!==l||e[26]!==h?(m=f.jsxs("span",{className:"flex items-center gap-1 text-cyan-600 dark:text-cyan-400",title:l,children:[u,h]}),e[25]=l,e[26]=h,e[27]=m):m=e[27],m}}}let s;return e[28]===Symbol.for("react.memo_cache_sentinel")?(s=f.jsx("span",{className:"text-neutral-500 italic",children:"not set"}),e[28]=s):s=e[28],s}function Dte(t){const e=Pe.c(4),{items:n}=t;if(n.length===0)return null;let s;e[0]!==n?(s=n.map(Lte),e[0]=n,e[1]=s):s=e[1];let r;return e[2]!==s?(r=f.jsx("div",{className:"space-y-2",children:s}),e[2]=s,e[3]=r):r=e[3],r}function Lte(t){return f.jsx(Pte,{volume:t},t.name)}function Pte(t){const e=Pe.c(31),{volume:n}=t,[s,r]=F.useState(!1);let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=()=>r(Fte),e[0]=i):i=e[0];const a=i;let l;e[1]===Symbol.for("react.memo_cache_sentinel")?(l={ConfigMap:"border-blue-500/30 bg-blue-500/5",Secret:"border-amber-500/30 bg-amber-500/5",PVC:"border-emerald-500/30 bg-emerald-500/5",EmptyDir:"border-neutral-500/30 bg-neutral-500/5",HostPath:"border-red-500/30 bg-red-500/5",Projected:"border-purple-500/30 bg-purple-500/5",DownwardAPI:"border-cyan-500/30 bg-cyan-500/5",NFS:"border-orange-500/30 bg-orange-500/5",CSI:"border-indigo-500/30 bg-indigo-500/5"},e[1]=l):l=e[1];const u=l;let h;e[2]===Symbol.for("react.memo_cache_sentinel")?(h={ConfigMap:f.jsx(DZ,{size:14,className:"text-blue-400"}),Secret:f.jsx(tb,{size:14,className:"text-amber-400"}),PVC:f.jsx(Ih,{size:14,className:"text-emerald-400"}),EmptyDir:f.jsx(rN,{size:14,className:"text-neutral-400"}),HostPath:f.jsx(LY,{size:14,className:"text-red-400"}),Projected:f.jsx(Ga,{size:14,className:"text-purple-400"}),DownwardAPI:f.jsx(jY,{size:14,className:"text-cyan-400"}),NFS:f.jsx(Vs,{size:14,className:"text-orange-400"}),CSI:f.jsx(_Z,{size:14,className:"text-indigo-400"})},e[2]=h):h=e[2];const m=h;let p;e[3]===Symbol.for("react.memo_cache_sentinel")?(p={ConfigMap:"bg-blue-500/20 text-blue-400",Secret:"bg-amber-500/20 text-amber-400",PVC:"bg-emerald-500/20 text-emerald-400",EmptyDir:"bg-neutral-500/20 text-neutral-400",HostPath:"bg-red-500/20 text-red-400",Projected:"bg-purple-500/20 text-purple-400",DownwardAPI:"bg-cyan-500/20 text-cyan-400",NFS:"bg-orange-500/20 text-orange-400",CSI:"bg-indigo-500/20 text-indigo-400"},e[3]=p):p=e[3];const g=p,y=`border rounded-lg overflow-hidden ${u[n.type]||"border-neutral-300 dark:border-neutral-700 bg-neutral-100 dark:bg-neutral-900/50"}`;let b;e[4]!==n.type?(b=m[n.type]||f.jsx(Ws,{size:14,className:"text-neutral-600 dark:text-neutral-400"}),e[4]=n.type,e[5]=b):b=e[5];let _;e[6]!==n.name?(_=f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:n.name})}),e[6]=n.name,e[7]=_):_=e[7];let w;e[8]!==n.source?(w=n.source&&f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400/70",children:n.source}),e[8]=n.source,e[9]=w):w=e[9];let k;e[10]!==n.mounts?(k=n.mounts.length>0&&f.jsxs("span",{className:"ml-2",children:[" ",n.mounts.map(zte).join(", ")]}),e[10]=n.mounts,e[11]=k):k=e[11];let C;e[12]!==w||e[13]!==k?(C=f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 truncate",children:[w,k]}),e[12]=w,e[13]=k,e[14]=C):C=e[14];let E;e[15]!==C||e[16]!==_?(E=f.jsxs("div",{className:"flex-1 min-w-0",children:[_,C]}),e[15]=C,e[16]=_,e[17]=E):E=e[17];let A;e[18]!==E||e[19]!==b?(A=f.jsxs("button",{onClick:a,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[b,E]}),e[18]=E,e[19]=b,e[20]=A):A=e[20];let R;e[21]!==s||e[22]!==n.extra||e[23]!==n.mounts||e[24]!==n.source||e[25]!==n.type?(R=s&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Source"}),f.jsxs("div",{className:"text-xs",children:[f.jsx("span",{className:`px-1.5 py-0.5 rounded ${g[n.type]||"bg-neutral-200 dark:bg-neutral-700 text-neutral-600 dark:text-neutral-400"}`,children:n.type}),n.source&&f.jsx("span",{className:"ml-2 text-cyan-600 dark:text-cyan-400",children:n.source})]}),n.extra&&Object.keys(n.extra).length>0&&f.jsx("div",{className:"mt-2 text-xs space-y-1",children:Object.entries(n.extra).map($te)})]}),n.mounts.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Mount Points"}),f.jsx("div",{className:"space-y-2",children:n.mounts.map(Bte)})]})]}),e[21]=s,e[22]=n.extra,e[23]=n.mounts,e[24]=n.source,e[25]=n.type,e[26]=R):R=e[26];let N;return e[27]!==A||e[28]!==R||e[29]!==y?(N=f.jsxs("div",{className:y,children:[A,R]}),e[27]=A,e[28]=R,e[29]=y,e[30]=N):N=e[30],N}function Bte(t,e){return f.jsxs("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(eo,{size:10,className:"text-blue-400"}),f.jsx("span",{className:"text-neutral-900 dark:text-neutral-300",children:t.container}),f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:""}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-mono",children:t.mountPath}),t.readOnly&&f.jsx("span",{className:"px-1 py-0.5 rounded bg-amber-500/20 text-amber-400 text-[10px]",children:"read-only"})]}),t.subPath&&f.jsxs("div",{className:"ml-4 mt-1 text-neutral-600 dark:text-neutral-500",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"subPath:"})," ",f.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:t.subPath})]})]},e)}function $te(t){const[e,n]=t;return f.jsxs("div",{className:"text-neutral-600 dark:text-neutral-400",children:[f.jsxs("span",{className:"text-neutral-500",children:[e,":"]})," ",f.jsx("span",{className:"text-neutral-900 dark:text-neutral-300",children:String(n)})]},e)}function zte(t){return t.mountPath}function Fte(t){return!t}function Ute(t){const e=Pe.c(4),{items:n}=t;if(n.length===0)return null;let s;e[0]!==n?(s=n.map(Hte),e[0]=n,e[1]=s):s=e[1];let r;return e[2]!==s?(r=f.jsx("div",{className:"space-y-3",children:s}),e[2]=s,e[3]=r):r=e[3],r}function Hte(t,e){return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsxs("div",{className:"flex items-center gap-2 text-sm text-neutral-900 dark:text-neutral-300",children:[t.icon,t.label]}),f.jsxs("div",{className:"text-xs",children:[f.jsx("span",{className:"text-cyan-400",children:t.allocatable}),f.jsx("span",{className:"text-neutral-500",children:" / "}),f.jsx("span",{className:"text-neutral-400",children:t.capacity})]})]}),f.jsxs("div",{className:"text-[10px] text-neutral-500 flex justify-between",children:[f.jsx("span",{children:"Allocatable"}),f.jsx("span",{children:"Capacity"})]})]},e)}function Vte(t){const e=Pe.c(6),{items:n}=t;if(n.length===0)return null;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s={NoSchedule:"bg-red-500/20 text-red-400 border-red-500/30",PreferNoSchedule:"bg-amber-500/20 text-amber-400 border-amber-500/30",NoExecute:"bg-purple-500/20 text-purple-400 border-purple-500/30"},e[0]=s):s=e[0];const r=s;let i;if(e[1]!==n){let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=(u,h)=>f.jsxs("span",{className:"text-xs bg-neutral-200 dark:bg-neutral-700 px-2 py-0.5 rounded flex items-center gap-1",title:`${u.key}=${u.value||""}:${u.effect}`,children:[f.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:u.key}),u.value&&f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"text-neutral-400",children:"="}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:u.value})]}),f.jsx("span",{className:`ml-1 px-1 py-0.5 rounded text-[10px] border ${r[u.effect]??"bg-neutral-700 text-neutral-300"}`,children:u.effect})]},h),e[3]=l):l=e[3],i=n.map(l),e[1]=n,e[2]=i}else i=e[2];let a;return e[4]!==i?(a=f.jsx("div",{className:"flex flex-wrap gap-1",children:i}),e[4]=i,e[5]=a):a=e[5],a}function fO(t,e){return e<=0?0:Math.min(100,Math.round(t/e*100))}function qte(t){const e=Math.floor((Date.now()-t.getTime())/1e3);if(e<60)return`${e}s ago`;const n=Math.floor(e/60);if(n<60)return`${n}m ago`;const s=Math.floor(n/60);return s<24?`${s}h ago`:`${Math.floor(s/24)}d ago`}function Kte(t){const e=Pe.c(18),{loader:n,title:s}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],e[0]=r):r=e[0];const[i,a]=F.useState(r),[l,u]=F.useState(!0);let h,m;if(e[1]!==n?(h=()=>{n().then(a).finally(()=>u(!1))},m=[n],e[1]=n,e[2]=h,e[3]=m):(h=e[2],m=e[3]),F.useEffect(h,m),l){let _;e[4]!==s?(_=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[4]=s,e[5]=_):_=e[5];let w;e[6]===Symbol.for("react.memo_cache_sentinel")?(w=f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:"Loading ReplicaSets..."}),e[6]=w):w=e[6];let k;return e[7]!==_?(k=f.jsxs("div",{children:[_,w]}),e[7]=_,e[8]=k):k=e[8],k}if(i.length===0)return null;let p;e[9]!==s?(p=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[9]=s,e[10]=p):p=e[10];let g;e[11]!==i?(g=i.map(Wte),e[11]=i,e[12]=g):g=e[12];let y;e[13]!==g?(y=f.jsx("div",{className:"space-y-2",children:g}),e[13]=g,e[14]=y):y=e[14];let b;return e[15]!==p||e[16]!==y?(b=f.jsxs("div",{children:[p,y]}),e[15]=p,e[16]=y,e[17]=b):b=e[17],b}function Wte(t){const e=f.jsx("div",{className:`border rounded-lg p-3 ${t.isCurrent?"border-blue-500/30 bg-blue-500/5":"border-neutral-300 dark:border-neutral-700 bg-neutral-100 dark:bg-neutral-900/50 opacity-60"} ${t.context&&t.namespace?"hover:border-blue-500/50 transition-colors cursor-pointer":""}`,children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Ga,{size:16,className:t.isCurrent?"text-blue-400":"text-neutral-600 dark:text-neutral-500"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100 truncate",title:t.name,children:t.name})}),t.images.length>0&&f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 truncate",children:t.images.join(", ")})]}),f.jsxs("div",{className:"text-xs",children:[f.jsxs("span",{className:t.readyReplicas===t.replicas?"text-emerald-600 dark:text-emerald-400":"text-amber-600 dark:text-amber-400",children:[t.readyReplicas,"/",t.replicas]}),f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500 ml-1",children:"ready"})]})]})});return t.context&&t.namespace?f.jsx(ji,{to:"/cluster/$context/$resourceType/$name",params:{context:t.context,resourceType:"replicasets",name:t.name},search:n=>({...n,namespace:t.namespace}),children:e},t.name):f.jsx("div",{children:e},t.name)}function Gte(t){const e=Pe.c(18),{loader:n,title:s}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],e[0]=r):r=e[0];const[i,a]=F.useState(r),[l,u]=F.useState(!0);let h,m;if(e[1]!==n?(h=()=>{n().then(a).finally(()=>u(!1))},m=[n],e[1]=n,e[2]=h,e[3]=m):(h=e[2],m=e[3]),F.useEffect(h,m),l){let _;e[4]!==s?(_=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[4]=s,e[5]=_):_=e[5];let w;e[6]===Symbol.for("react.memo_cache_sentinel")?(w=f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:"Loading PVCs..."}),e[6]=w):w=e[6];let k;return e[7]!==_?(k=f.jsxs("div",{children:[_,w]}),e[7]=_,e[8]=k):k=e[8],k}if(i.length===0)return null;let p;e[9]!==s?(p=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[9]=s,e[10]=p):p=e[10];let g;e[11]!==i?(g=i.map(Yte),e[11]=i,e[12]=g):g=e[12];let y;e[13]!==g?(y=f.jsx("div",{className:"space-y-2",children:g}),e[13]=g,e[14]=y):y=e[14];let b;return e[15]!==p||e[16]!==y?(b=f.jsxs("div",{children:[p,y]}),e[15]=p,e[16]=y,e[17]=b):b=e[17],b}function Yte(t){const e=f.jsx("div",{className:`border rounded-lg p-3 ${t.status==="Bound"?"border-emerald-500/30 bg-emerald-500/5":"border-neutral-300 dark:border-neutral-700 bg-neutral-100 dark:bg-neutral-900/50"} ${t.context&&t.namespace?"hover:border-emerald-500/50 transition-colors cursor-pointer":""}`,children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Ws,{size:16,className:t.status==="Bound"?"text-emerald-600 dark:text-emerald-400":"text-neutral-600 dark:text-neutral-500"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100 truncate",children:t.name})}),f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:[t.storageClass||"default"," storage class"]})]}),f.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[t.capacity&&f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:t.capacity}),f.jsx("span",{className:t.status==="Bound"?"text-emerald-600 dark:text-emerald-400":"text-amber-600 dark:text-amber-400",children:t.status})]})]})});return t.context&&t.namespace?f.jsx(ji,{to:"/cluster/$context/$resourceType/$name",params:{context:t.context,resourceType:"persistentvolumeclaims",name:t.name},search:n=>({...n,namespace:t.namespace}),children:e},t.name):f.jsx("div",{children:e},t.name)}function Zte(t){const e=Pe.c(26),{loader:n,title:s}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],e[0]=r):r=e[0];const[i,a]=F.useState(r),[l,u]=F.useState(!0),[h,m]=F.useState(!1);let p;e[1]===Symbol.for("react.memo_cache_sentinel")?(p=()=>m(Xte),e[1]=p):p=e[1];const g=p;let y,b;if(e[2]!==n?(y=()=>{n().then(a).finally(()=>u(!1))},b=[n],e[2]=n,e[3]=y,e[4]=b):(y=e[3],b=e[4]),F.useEffect(y,b),l){let N;e[5]!==s?(N=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[5]=s,e[6]=N):N=e[6];let M;e[7]===Symbol.for("react.memo_cache_sentinel")?(M=f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:"Loading jobs..."}),e[7]=M):M=e[7];let I;return e[8]!==N?(I=f.jsxs("div",{children:[N,M]}),e[8]=N,e[9]=I):I=e[9],I}if(i.length===0)return null;let _;e[10]!==h||e[11]!==i?(_=h?i:i.slice(0,3),e[10]=h,e[11]=i,e[12]=_):_=e[12];const w=_;let k;e[13]!==s?(k=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[13]=s,e[14]=k):k=e[14];let C;e[15]!==w?(C=w.map(Jte),e[15]=w,e[16]=C):C=e[16];let E;e[17]!==h||e[18]!==i.length?(E=i.length>3&&f.jsxs("button",{onClick:g,className:"flex items-center gap-1 text-xs text-neutral-600 dark:text-neutral-500 hover:text-neutral-900 dark:hover:text-neutral-300 transition-colors mt-2",children:[h?f.jsx(Ss,{size:12}):f.jsx(di,{size:12}),h?"Show less":`Show ${i.length-3} more`]}),e[17]=h,e[18]=i.length,e[19]=E):E=e[19];let A;e[20]!==C||e[21]!==E?(A=f.jsxs("div",{className:"space-y-2",children:[C,E]}),e[20]=C,e[21]=E,e[22]=A):A=e[22];let R;return e[23]!==k||e[24]!==A?(R=f.jsxs("div",{children:[k,A]}),e[23]=k,e[24]=A,e[25]=R):R=e[25],R}function Jte(t){const e=f.jsx("div",{className:`border rounded-lg p-3 ${t.status==="Complete"?"border-emerald-500/30 bg-emerald-500/5":t.status==="Failed"?"border-red-500/30 bg-red-500/5":"border-amber-500/30 bg-amber-500/5"} ${t.context&&t.namespace?"hover:border-blue-500/50 transition-colors cursor-pointer":""}`,children:f.jsxs("div",{className:"flex items-center gap-3",children:[t.status==="Complete"?f.jsx(Oi,{size:16,className:"text-emerald-400"}):t.status==="Failed"?f.jsx(to,{size:16,className:"text-red-400"}):f.jsx(fl,{size:16,className:"text-amber-400"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100 truncate",title:t.name,children:t.name})}),t.startTime&&f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:["Started ",qte(new Date(t.startTime))]})]}),f.jsx("span",{className:`text-xs ${t.status==="Complete"?"text-emerald-600 dark:text-emerald-400":t.status==="Failed"?"text-red-600 dark:text-red-400":"text-amber-600 dark:text-amber-400"}`,children:t.status})]})});return t.context&&t.namespace?f.jsx(ji,{to:"/cluster/$context/$resourceType/$name",params:{context:t.context,resourceType:"jobs",name:t.name},search:n=>({...n,namespace:t.namespace}),children:e},t.name):f.jsx("div",{children:e},t.name)}function Xte(t){return!t}function Qte(t){const e=Pe.c(4),{items:n}=t;let s;e[0]!==n?(s=n.map(ene),e[0]=n,e[1]=s):s=e[1];let r;return e[2]!==s?(r=f.jsx("div",{className:"space-y-2",children:s}),e[2]=s,e[3]=r):r=e[3],r}function ene(t,e){return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(Ws,{size:14,className:"text-purple-400"}),f.jsx("span",{className:"text-sm text-neutral-900 dark:text-neutral-100",children:t.name})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[t.size&&f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Size:"})," ",f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:t.size})]}),t.storageClass&&f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Class:"})," ",f.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:t.storageClass})]}),t.accessModes&&f.jsxs("div",{className:"col-span-2",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Access:"})," ",f.jsx("span",{className:"text-neutral-900 dark:text-neutral-300",children:t.accessModes.join(", ")})]})]})]},e)}function tne(t){const e=Pe.c(8),{schedule:n,description:s}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(gD,{size:16,className:"text-purple-400"}),f.jsx("span",{className:"text-sm text-neutral-900 dark:text-neutral-100",children:"Schedule"})]}),e[0]=r):r=e[0];let i;e[1]!==n?(i=f.jsx("div",{className:"font-mono text-cyan-600 dark:text-cyan-400 text-lg mb-1",children:n}),e[1]=n,e[2]=i):i=e[2];let a;e[3]!==s?(a=f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:s}),e[3]=s,e[4]=a):a=e[4];let l;return e[5]!==i||e[6]!==a?(l=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[r,i,a]}),e[5]=i,e[6]=a,e[7]=l):l=e[7],l}function nne(t){const e=Pe.c(35),{completions:n,succeeded:s,failed:r,active:i}=t;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=f.jsx("span",{className:"text-sm text-neutral-900 dark:text-neutral-300",children:"Completions"}),e[0]=a):a=e[0];const l=s>=n?"text-emerald-600 dark:text-emerald-400":"text-cyan-600 dark:text-cyan-400";let u;e[1]!==s||e[2]!==l?(u=f.jsx("span",{className:l,children:s}),e[1]=s,e[2]=l,e[3]=u):u=e[3];let h;e[4]!==n?(h=f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-500",children:[" / ",n]}),e[4]=n,e[5]=h):h=e[5];let m;e[6]!==u||e[7]!==h?(m=f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a,f.jsxs("span",{className:"text-sm",children:[u,h]})]}),e[6]=u,e[7]=h,e[8]=m):m=e[8];let p;e[9]!==n||e[10]!==s?(p=s>0&&f.jsx("div",{className:"h-full bg-emerald-500",style:{width:`${s/n*100}%`}}),e[9]=n,e[10]=s,e[11]=p):p=e[11];let g;e[12]!==n||e[13]!==r?(g=r>0&&f.jsx("div",{className:"h-full bg-red-500",style:{width:`${r/(n+r)*100}%`}}),e[12]=n,e[13]=r,e[14]=g):g=e[14];let y;e[15]!==p||e[16]!==g?(y=f.jsxs("div",{className:"h-2 bg-neutral-300 dark:bg-neutral-700 rounded-full overflow-hidden flex",children:[p,g]}),e[15]=p,e[16]=g,e[17]=y):y=e[17];let b;e[18]===Symbol.for("react.memo_cache_sentinel")?(b=f.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),e[18]=b):b=e[18];let _;e[19]!==s?(_=f.jsxs("div",{className:"flex items-center gap-1",children:[b,f.jsxs("span",{className:"text-neutral-700 dark:text-neutral-400",children:["Succeeded: ",s]})]}),e[19]=s,e[20]=_):_=e[20];let w;e[21]===Symbol.for("react.memo_cache_sentinel")?(w=f.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"}),e[21]=w):w=e[21];let k;e[22]!==i?(k=f.jsxs("div",{className:"flex items-center gap-1",children:[w,f.jsxs("span",{className:"text-neutral-700 dark:text-neutral-400",children:["Active: ",i]})]}),e[22]=i,e[23]=k):k=e[23];let C;e[24]===Symbol.for("react.memo_cache_sentinel")?(C=f.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),e[24]=C):C=e[24];let E;e[25]!==r?(E=f.jsxs("div",{className:"flex items-center gap-1",children:[C,f.jsxs("span",{className:"text-neutral-700 dark:text-neutral-400",children:["Failed: ",r]})]}),e[25]=r,e[26]=E):E=e[26];let A;e[27]!==_||e[28]!==k||e[29]!==E?(A=f.jsxs("div",{className:"flex items-center gap-4 mt-3 text-xs",children:[_,k,E]}),e[27]=_,e[28]=k,e[29]=E,e[30]=A):A=e[30];let R;return e[31]!==A||e[32]!==m||e[33]!==y?(R=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[m,y,A]}),e[31]=A,e[32]=m,e[33]=y,e[34]=R):R=e[34],R}function sne(t){const e=Pe.c(7),{startTime:n,completionTime:s}=t;let r;e[0]!==n?(r=n&&f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Started:"})," ",f.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:n.toLocaleString()})]}),e[0]=n,e[1]=r):r=e[1];let i;e[2]!==s?(i=s&&f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Completed:"})," ",f.jsx("span",{className:"text-emerald-600 dark:text-emerald-400",children:s.toLocaleString()})]}),e[2]=s,e[3]=i):i=e[3];let a;return e[4]!==r||e[5]!==i?(a=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3 space-y-2 text-xs",children:[r,i]}),e[4]=r,e[5]=i,e[6]=a):a=e[6],a}function rne(t){const e=Pe.c(11),{items:n,columns:s}=t,r=s===void 0?2:s;let i,a;if(e[0]!==r||e[1]!==n){const u=n.filter(ine),h=r===3?"grid-cols-3":r===2?"grid-cols-2":"grid-cols-1";let m;e[4]!==r?(m=y=>{if(r!==3)return"";const b=y%3;return b===0?"text-left":b===1?"text-center":"text-right"},e[4]=r,e[5]=m):m=e[5];const p=m;i=`bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3 grid gap-2 text-xs ${h}`;let g;e[6]!==p?(g=(y,b)=>f.jsxs("div",{className:`overflow-hidden ${p(b)}`,children:[f.jsxs("span",{className:"text-neutral-500 dark:text-neutral-500",children:[y.label,":"]})," ",f.jsx("span",{className:y.color||"text-neutral-900 dark:text-neutral-300",children:y.value})]},b),e[6]=p,e[7]=g):g=e[7],a=u.map(g),e[0]=r,e[1]=n,e[2]=i,e[3]=a}else i=e[2],a=e[3];let l;return e[8]!==i||e[9]!==a?(l=f.jsx("div",{className:i,children:a}),e[8]=i,e[9]=a,e[10]=l):l=e[10],l}function ine(t){return t.value!==void 0&&t.value!==null}function LP(t){const e=Pe.c(17),{labels:n,title:s}=t,r=s===void 0?"Labels":s;let i,a,l,u;if(e[0]!==n||e[1]!==r){u=Symbol.for("react.early_return_sentinel");e:{const g=Object.entries(n);if(g.length===0){u=null;break e}const y=["node-role.kubernetes.io/","kubernetes.io/os","kubernetes.io/arch","node.kubernetes.io/instance-type","topology.kubernetes.io/"],b=[...g].sort((w,k)=>{const C=y.some(A=>w[0].startsWith(A)),E=y.some(A=>k[0].startsWith(A));return C&&!E?-1:!C&&E?1:0});let _;e[6]===Symbol.for("react.memo_cache_sentinel")?(_=f.jsx(SD,{size:12}),e[6]=_):_=e[6],e[7]!==r?(l=f.jsxs("h5",{className:"flex items-center gap-2 text-xs font-medium text-neutral-500 uppercase tracking-wider mb-2",children:[_,r]}),e[7]=r,e[8]=l):l=e[8],a="w-full text-xs",i=b.map((w,k)=>{const[C,E]=w,A=y.some(R=>C.startsWith(R));return f.jsxs("tr",{className:k%2===0?"bg-neutral-50 dark:bg-neutral-800/30":"",children:[f.jsx("td",{className:`py-1.5 px-2 whitespace-nowrap w-[1%] ${A?"text-blue-600 dark:text-blue-400":"text-sky-600 dark:text-sky-400"}`,title:C,children:C}),f.jsx("td",{className:"py-1.5 px-2 text-emerald-600 dark:text-emerald-400 break-all",title:E,children:E})]},C)})}e[0]=n,e[1]=r,e[2]=i,e[3]=a,e[4]=l,e[5]=u}else i=e[2],a=e[3],l=e[4],u=e[5];if(u!==Symbol.for("react.early_return_sentinel"))return u;let h;e[9]!==i?(h=f.jsx("tbody",{children:i}),e[9]=i,e[10]=h):h=e[10];let m;e[11]!==a||e[12]!==h?(m=f.jsx("table",{className:a,children:h}),e[11]=a,e[12]=h,e[13]=m):m=e[13];let p;return e[14]!==l||e[15]!==m?(p=f.jsxs("div",{children:[l,m]}),e[14]=l,e[15]=m,e[16]=p):p=e[16],p}function ane(t){const e=Pe.c(4),{containers:n}=t;let s;e[0]!==n?(s=n.map(one),e[0]=n,e[1]=s):s=e[1];let r;return e[2]!==s?(r=f.jsx("div",{className:"space-y-1",children:s}),e[2]=s,e[3]=r):r=e[3],r}function one(t){return f.jsxs("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 px-2 py-1.5 rounded flex items-center gap-2",children:[f.jsx(eo,{size:12,className:"text-blue-400"}),f.jsxs("span",{className:"text-neutral-900 dark:text-neutral-300",children:[t.name,":"]}),f.jsx("span",{className:"text-cyan-400 truncate",children:t.image})]},t.name)}function lne(t){const e=Pe.c(4),{addresses:n}=t;let s;e[0]!==n?(s=n.map(cne),e[0]=n,e[1]=s):s=e[1];let r;return e[2]!==s?(r=f.jsx("div",{className:"grid grid-cols-2 gap-2",children:s}),e[2]=s,e[3]=r):r=e[3],r}function cne(t,e){return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-2",children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:t.type}),f.jsx("div",{className:"text-sm text-cyan-600 dark:text-cyan-400 font-mono",children:t.address})]},e)}const une=15e3;function hne(t){const e=Pe.c(56),{loader:n,title:s}=t,[r,i]=F.useState(null),[a,l]=F.useState(!0);let u,h;if(e[0]!==n?(u=()=>{let L=!0;const V=async()=>{const Q=await n();L&&(i(Q),l(!1))};V();const T=setInterval(V,une);return()=>{L=!1,clearInterval(T)}},h=[n],e[0]=n,e[1]=u,e[2]=h):(u=e[1],h=e[2]),F.useEffect(u,h),!a&&r===null)return null;if(a){let L;e[3]!==s?(L=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[3]=s,e[4]=L):L=e[4];let V;e[5]===Symbol.for("react.memo_cache_sentinel")?(V=f.jsxs("div",{className:"flex items-center gap-2 text-xs text-neutral-500",children:[f.jsx(Cn,{size:12,className:"animate-spin"}),"Loading metrics..."]}),e[5]=V):V=e[5];let T;return e[6]!==L?(T=f.jsxs("div",{children:[L,V]}),e[6]=L,e[7]=T):T=e[7],T}if(!r)return null;const m=fO(r.cpu.usageNanoCores,r.cpu.allocatableNanoCores??0),p=fO(r.memory.usageBytes,r.memory.allocatableBytes??0);let g;e[8]!==s?(g=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[8]=s,e[9]=g):g=e[9];let y;e[10]===Symbol.for("react.memo_cache_sentinel")?(y=f.jsxs("span",{className:"text-xs text-neutral-400 flex items-center gap-1.5",children:[f.jsx(eb,{size:12}),"CPU Usage"]}),e[10]=y):y=e[10];const b=m>80?"text-amber-400":"text-blue-400";let _;e[11]!==r.cpu.usage||e[12]!==b?(_=f.jsx("span",{className:b,children:r.cpu.usage}),e[11]=r.cpu.usage,e[12]=b,e[13]=_):_=e[13];let w;e[14]!==r.cpu.allocatable?(w=f.jsxs("span",{className:"text-neutral-500",children:[" / ",r.cpu.allocatable]}),e[14]=r.cpu.allocatable,e[15]=w):w=e[15];let k;e[16]!==_||e[17]!==w?(k=f.jsxs("div",{className:"flex items-center justify-between",children:[y,f.jsxs("span",{className:"text-xs font-mono",children:[_,w]})]}),e[16]=_,e[17]=w,e[18]=k):k=e[18];const C=`h-full transition-all duration-300 ${m>80?"bg-amber-500":"bg-blue-500"}`,E=`${m}%`;let A;e[19]!==E?(A={width:E},e[19]=E,e[20]=A):A=e[20];let R;e[21]!==A||e[22]!==C?(R=f.jsx("div",{className:"h-2 bg-neutral-700 rounded-full overflow-hidden",children:f.jsx("div",{className:C,style:A})}),e[21]=A,e[22]=C,e[23]=R):R=e[23];let N;e[24]!==m?(N=f.jsxs("div",{className:"text-xs text-neutral-500 text-right",children:[m,"% utilized"]}),e[24]=m,e[25]=N):N=e[25];let M;e[26]!==R||e[27]!==N||e[28]!==k?(M=f.jsxs("div",{className:"bg-neutral-900/50 rounded-lg p-3 space-y-2",children:[k,R,N]}),e[26]=R,e[27]=N,e[28]=k,e[29]=M):M=e[29];let I;e[30]===Symbol.for("react.memo_cache_sentinel")?(I=f.jsxs("span",{className:"text-xs text-neutral-400 flex items-center gap-1.5",children:[f.jsx(Ws,{size:12}),"Memory Usage"]}),e[30]=I):I=e[30];const W=p>80?"text-amber-400":"text-purple-400";let P;e[31]!==r.memory.usage||e[32]!==W?(P=f.jsx("span",{className:W,children:r.memory.usage}),e[31]=r.memory.usage,e[32]=W,e[33]=P):P=e[33];let G;e[34]!==r.memory.allocatable?(G=f.jsxs("span",{className:"text-neutral-500",children:[" / ",r.memory.allocatable]}),e[34]=r.memory.allocatable,e[35]=G):G=e[35];let $;e[36]!==P||e[37]!==G?($=f.jsxs("div",{className:"flex items-center justify-between",children:[I,f.jsxs("span",{className:"text-xs font-mono",children:[P,G]})]}),e[36]=P,e[37]=G,e[38]=$):$=e[38];const U=`h-full transition-all duration-300 ${p>80?"bg-amber-500":"bg-purple-500"}`,Z=`${p}%`;let K;e[39]!==Z?(K={width:Z},e[39]=Z,e[40]=K):K=e[40];let B;e[41]!==U||e[42]!==K?(B=f.jsx("div",{className:"h-2 bg-neutral-700 rounded-full overflow-hidden",children:f.jsx("div",{className:U,style:K})}),e[41]=U,e[42]=K,e[43]=B):B=e[43];let J;e[44]!==p?(J=f.jsxs("div",{className:"text-xs text-neutral-500 text-right",children:[p,"% utilized"]}),e[44]=p,e[45]=J):J=e[45];let Y;e[46]!==$||e[47]!==B||e[48]!==J?(Y=f.jsxs("div",{className:"bg-neutral-900/50 rounded-lg p-3 space-y-2",children:[$,B,J]}),e[46]=$,e[47]=B,e[48]=J,e[49]=Y):Y=e[49];let z;e[50]!==M||e[51]!==Y?(z=f.jsxs("div",{className:"space-y-3",children:[M,Y]}),e[50]=M,e[51]=Y,e[52]=z):z=e[52];let O;return e[53]!==z||e[54]!==g?(O=f.jsxs("div",{children:[g,z]}),e[53]=z,e[54]=g,e[55]=O):O=e[55],O}function dne(t){const e=Pe.c(24),{data:n}=t,{cpu:s,memory:r}=n;if(!(s.requests||s.limits||r.requests||r.limits))return null;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=f.jsx("h5",{className:"text-xs font-medium text-neutral-500 uppercase tracking-wider mb-2",children:"Resource Quota"}),e[0]=a):a=e[0];let l;e[1]===Symbol.for("react.memo_cache_sentinel")?(l=f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(eb,{size:14,className:"text-blue-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"CPU"})]}),e[1]=l):l=e[1];let u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u=f.jsx("span",{className:"text-xs text-neutral-500",children:"Requests"}),e[2]=u):u=e[2];const h=s.requests||"";let m;e[3]!==h?(m=f.jsxs("div",{className:"flex items-center justify-between",children:[u,f.jsx("span",{className:"text-sm font-mono text-neutral-900 dark:text-neutral-100",children:h})]}),e[3]=h,e[4]=m):m=e[4];let p;e[5]===Symbol.for("react.memo_cache_sentinel")?(p=f.jsx("span",{className:"text-xs text-neutral-500",children:"Limits"}),e[5]=p):p=e[5];const g=s.limits||"";let y;e[6]!==g?(y=f.jsxs("div",{className:"flex items-center justify-between",children:[p,f.jsx("span",{className:"text-sm font-mono text-neutral-900 dark:text-neutral-100",children:g})]}),e[6]=g,e[7]=y):y=e[7];let b;e[8]!==m||e[9]!==y?(b=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800 rounded-lg p-3",children:[l,f.jsxs("div",{className:"space-y-1.5",children:[m,y]})]}),e[8]=m,e[9]=y,e[10]=b):b=e[10];let _;e[11]===Symbol.for("react.memo_cache_sentinel")?(_=f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(Ws,{size:14,className:"text-purple-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Memory"})]}),e[11]=_):_=e[11];let w;e[12]===Symbol.for("react.memo_cache_sentinel")?(w=f.jsx("span",{className:"text-xs text-neutral-500",children:"Requests"}),e[12]=w):w=e[12];const k=r.requests||"";let C;e[13]!==k?(C=f.jsxs("div",{className:"flex items-center justify-between",children:[w,f.jsx("span",{className:"text-sm font-mono text-neutral-900 dark:text-neutral-100",children:k})]}),e[13]=k,e[14]=C):C=e[14];let E;e[15]===Symbol.for("react.memo_cache_sentinel")?(E=f.jsx("span",{className:"text-xs text-neutral-500",children:"Limits"}),e[15]=E):E=e[15];const A=r.limits||"";let R;e[16]!==A?(R=f.jsxs("div",{className:"flex items-center justify-between",children:[E,f.jsx("span",{className:"text-sm font-mono text-neutral-900 dark:text-neutral-100",children:A})]}),e[16]=A,e[17]=R):R=e[17];let N;e[18]!==C||e[19]!==R?(N=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800 rounded-lg p-3",children:[_,f.jsxs("div",{className:"space-y-1.5",children:[C,R]})]}),e[18]=C,e[19]=R,e[20]=N):N=e[20];let M;return e[21]!==N||e[22]!==b?(M=f.jsxs("div",{children:[a,f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[b,N]})]}),e[21]=N,e[22]=b,e[23]=M):M=e[23],M}function PP(t){const e=Pe.c(9),{section:n}=t,{title:s,data:r}=n;let i;e[0]!==r?(i=fne(r),e[0]=r,e[1]=i):i=e[1];const a=i;if(a===null)return null;if(!s){let h;return e[2]!==a?(h=f.jsx("div",{children:a}),e[2]=a,e[3]=h):h=e[3],h}let l;e[4]!==s?(l=f.jsx("h5",{className:"text-xs font-medium text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[4]=s,e[5]=l):l=e[5];let u;return e[6]!==a||e[7]!==l?(u=f.jsxs("div",{children:[l,a]}),e[6]=a,e[7]=l,e[8]=u):u=e[8],u}function fne(t){switch(t.type){case"status-cards":return f.jsx(bte,{items:t.items});case"gauges":return f.jsx(_te,{items:t.items,podGrid:t.showPodGrid});case"info-grid":return f.jsx(rne,{items:t.items,columns:t.columns});case"containers":return f.jsx(kte,{items:t.items,metricsLoader:t.metricsLoader});case"volumes":return f.jsx(Dte,{items:t.items});case"labels":return f.jsx(LP,{labels:t.labels,title:t.title});case"capacity-bars":return f.jsx(Ute,{items:t.items});case"taints":return f.jsx(Vte,{items:t.items});case"container-images":return f.jsx(ane,{containers:t.containers});case"related-replicasets":return f.jsx(Kte,{loader:t.loader,title:t.title});case"related-pvcs":return f.jsx(Gte,{loader:t.loader,title:t.title});case"related-jobs":return f.jsx(Zte,{loader:t.loader,title:t.title});case"volume-claim-templates":return f.jsx(Qte,{items:t.items});case"schedule":return f.jsx(tne,{schedule:t.schedule,description:t.description});case"job-progress":return f.jsx(nne,{...t});case"timeline":return f.jsx(sne,{startTime:t.startTime,completionTime:t.completionTime});case"addresses":return f.jsx(lne,{addresses:t.addresses});case"node-metrics":return f.jsx(hne,{loader:t.loader,title:t.title});case"resource-quota":return f.jsx(dne,{data:t.data});case"custom":return t.render();default:return null}}function pne(t){const e=Pe.c(21),{context:n,resource:s,onActionComplete:r,hideActions:i}=t,a=i===void 0?!1:i;let l;e[0]!==n||e[1]!==s?(l=yte(n,s),e[0]=n,e[1]=s,e[2]=l):l=e[2];const u=l;let h;e[3]!==s?(h=IP(s),e[3]=s,e[4]=h):h=e[4];const m=h,p=s.metadata?.annotations?.["kubernetes.io/description"];if(!u||u.sections.length===0){let w;return e[5]!==s.kind?(w=f.jsxs("div",{className:"text-neutral-500 text-sm",children:["No visualization available for ",s.kind]}),e[5]=s.kind,e[6]=w):w=e[6],w}let g;e[7]!==m||e[8]!==n||e[9]!==a||e[10]!==r||e[11]!==s?(g=!a&&f.jsx(DP,{context:n,actions:m,resource:s,onActionComplete:r}),e[7]=m,e[8]=n,e[9]=a,e[10]=r,e[11]=s,e[12]=g):g=e[12];let y;e[13]!==p?(y=p&&f.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:p}),e[13]=p,e[14]=y):y=e[14];let b;e[15]!==u.sections?(b=u.sections.map(mne),e[15]=u.sections,e[16]=b):b=e[16];let _;return e[17]!==g||e[18]!==y||e[19]!==b?(_=f.jsxs("div",{className:"space-y-6",children:[g,y,b]}),e[17]=g,e[18]=y,e[19]=b,e[20]=_):_=e[20],_}function mne(t){return f.jsx(PP,{section:t},t.id)}function Gb(t){const e=Pe.c(6),{toolbarRef:n,children:s}=t,[r,i]=F.useState(null);let a,l;e[0]!==n?(a=()=>{i(n.current)},l=[n],e[0]=n,e[1]=a,e[2]=l):(a=e[1],l=e[2]),F.useEffect(a,l);let u;return e[3]!==s||e[4]!==r?(u=r?HC.createPortal(s,r):null,e[3]=s,e[4]=r,e[5]=u):u=e[5],u}var bw,pO;function gne(){if(pO)return bw;pO=1;const t=[[{color:"0, 0, 0",class:"ansi-black"},{color:"187, 0, 0",class:"ansi-red"},{color:"0, 187, 0",class:"ansi-green"},{color:"187, 187, 0",class:"ansi-yellow"},{color:"0, 0, 187",class:"ansi-blue"},{color:"187, 0, 187",class:"ansi-magenta"},{color:"0, 187, 187",class:"ansi-cyan"},{color:"255,255,255",class:"ansi-white"}],[{color:"85, 85, 85",class:"ansi-bright-black"},{color:"255, 85, 85",class:"ansi-bright-red"},{color:"0, 255, 0",class:"ansi-bright-green"},{color:"255, 255, 85",class:"ansi-bright-yellow"},{color:"85, 85, 255",class:"ansi-bright-blue"},{color:"255, 85, 255",class:"ansi-bright-magenta"},{color:"85, 255, 255",class:"ansi-bright-cyan"},{color:"255, 255, 255",class:"ansi-bright-white"}]],e=/(https?:\/\/(?:[A-Za-z0-9#;/?:@=+$',_.!~*()[\]-]|&amp;|%[A-Fa-f0-9]{2})+)/gm;class n{static escapeForHtml(r){return new n().escapeForHtml(r)}static linkify(r){return new n().linkify(r)}static ansiToHtml(r,i){return new n().ansiToHtml(r,i)}static ansiToJson(r,i){return new n().ansiToJson(r,i)}static ansiToText(r){return new n().ansiToText(r)}constructor(){this.fg=this.bg=this.fg_truecolor=this.bg_truecolor=null,this.bright=0,this.decorations=[]}setupPalette(){this.PALETTE_COLORS=[];for(let l=0;l<2;++l)for(let u=0;u<8;++u)this.PALETTE_COLORS.push(t[l][u].color);let r=[0,95,135,175,215,255],i=(l,u,h)=>r[l]+", "+r[u]+", "+r[h];for(let l=0;l<6;++l)for(let u=0;u<6;++u)for(let h=0;h<6;++h)this.PALETTE_COLORS.push(i(l,u,h));let a=8;for(let l=0;l<24;++l,a+=10)this.PALETTE_COLORS.push(a+", "+a+", "+a)}escapeForHtml(r){return r.replace(/[&<>\"]/gm,i=>i=="&"?"&amp;":i=='"'?"&quot;":i=="<"?"&lt;":i==">"?"&gt;":"")}linkify(r){return r.replace(e,i=>`<a href="${i}">${i}</a>`)}ansiToHtml(r,i){return this.process(r,i,!0)}ansiToJson(r,i){return i=i||{},i.json=!0,i.clearLine=!1,this.process(r,i,!0)}ansiToText(r){return this.process(r,{},!1)}process(r,i,a){let l=this,u=r.split(/\033\[/),h=u.shift();i==null&&(i={}),i.clearLine=/\r/.test(r);let m=u.map(p=>this.processChunk(p,i,a));if(i&&i.json){let p=l.processChunkJson("");return p.content=h,p.clearLine=i.clearLine,m.unshift(p),i.remove_empty&&(m=m.filter(g=>!g.isEmpty())),m}else m.unshift(h);return m.join("")}processChunkJson(r,i,a){i=typeof i>"u"?{}:i;let l=i.use_classes=typeof i.use_classes<"u"&&i.use_classes,u=i.key=l?"class":"color",h={content:r,fg:null,bg:null,fg_truecolor:null,bg_truecolor:null,isInverted:!1,clearLine:i.clearLine,decoration:null,decorations:[],was_processed:!1,isEmpty:()=>!h.content},m=r.match(/^([!\x3c-\x3f]*)([\d;]*)([\x20-\x2c]*[\x40-\x7e])([\s\S]*)/m);if(!m)return h;h.content=m[4];let p=m[2].split(";");if(m[1]!==""||m[3]!=="m"||!a)return h;let g=this;for(;p.length>0;){let y=p.shift(),b=parseInt(y);if(isNaN(b)||b===0)g.fg=g.bg=null,g.decorations=[];else if(b===1)g.decorations.push("bold");else if(b===2)g.decorations.push("dim");else if(b===3)g.decorations.push("italic");else if(b===4)g.decorations.push("underline");else if(b===5)g.decorations.push("blink");else if(b===7)g.decorations.push("reverse");else if(b===8)g.decorations.push("hidden");else if(b===9)g.decorations.push("strikethrough");else if(b===21)g.removeDecoration("bold");else if(b===22)g.removeDecoration("bold"),g.removeDecoration("dim");else if(b===23)g.removeDecoration("italic");else if(b===24)g.removeDecoration("underline");else if(b===25)g.removeDecoration("blink");else if(b===27)g.removeDecoration("reverse");else if(b===28)g.removeDecoration("hidden");else if(b===29)g.removeDecoration("strikethrough");else if(b===39)g.fg=null;else if(b===49)g.bg=null;else if(b>=30&&b<38)g.fg=t[0][b%10][u];else if(b>=90&&b<98)g.fg=t[1][b%10][u];else if(b>=40&&b<48)g.bg=t[0][b%10][u];else if(b>=100&&b<108)g.bg=t[1][b%10][u];else if(b===38||b===48){let _=b===38;if(p.length>=1){let w=p.shift();if(w==="5"&&p.length>=1){let k=parseInt(p.shift());if(k>=0&&k<=255)if(!l)this.PALETTE_COLORS||g.setupPalette(),_?g.fg=this.PALETTE_COLORS[k]:g.bg=this.PALETTE_COLORS[k];else{let C=k>=16?"ansi-palette-"+k:t[k>7?1:0][k%8].class;_?g.fg=C:g.bg=C}}else if(w==="2"&&p.length>=3){let k=parseInt(p.shift()),C=parseInt(p.shift()),E=parseInt(p.shift());if(k>=0&&k<=255&&C>=0&&C<=255&&E>=0&&E<=255){let A=k+", "+C+", "+E;l?_?(g.fg="ansi-truecolor",g.fg_truecolor=A):(g.bg="ansi-truecolor",g.bg_truecolor=A):_?g.fg=A:g.bg=A}}}}}return g.fg===null&&g.bg===null&&g.decorations.length===0||(h.fg=g.fg,h.bg=g.bg,h.fg_truecolor=g.fg_truecolor,h.bg_truecolor=g.bg_truecolor,h.decorations=g.decorations,h.decoration=g.decorations.slice(-1).pop()||null,h.was_processed=!0),h}processChunk(r,i,a){i=i||{};let l=this.processChunkJson(r,i,a),u=i.use_classes;if(l.decorations=l.decorations.filter(b=>{if(b==="reverse"){l.fg||(l.fg=t[0][7][u?"class":"color"]),l.bg||(l.bg=t[0][0][u?"class":"color"]);let _=l.fg;l.fg=l.bg,l.bg=_;let w=l.fg_truecolor;return l.fg_truecolor=l.bg_truecolor,l.bg_truecolor=w,l.isInverted=!0,!1}return!0}),i.json)return l;if(l.isEmpty())return"";if(!l.was_processed)return l.content;let h=[],m=[],p=[],g={},y=b=>{let _=[],w;for(w in b)b.hasOwnProperty(w)&&_.push("data-"+w+'="'+this.escapeForHtml(b[w])+'"');return _.length>0?" "+_.join(" "):""};return l.isInverted&&(g["ansi-is-inverted"]="true"),l.fg&&(u?(h.push(l.fg+"-fg"),l.fg_truecolor!==null&&(g["ansi-truecolor-fg"]=l.fg_truecolor,l.fg_truecolor=null)):h.push("color:rgb("+l.fg+")")),l.bg&&(u?(h.push(l.bg+"-bg"),l.bg_truecolor!==null&&(g["ansi-truecolor-bg"]=l.bg_truecolor,l.bg_truecolor=null)):h.push("background-color:rgb("+l.bg+")")),l.decorations.forEach(b=>{if(u){m.push("ansi-"+b);return}b==="bold"?m.push("font-weight:bold"):b==="dim"?m.push("opacity:0.5"):b==="italic"?m.push("font-style:italic"):b==="hidden"?m.push("visibility:hidden"):b==="strikethrough"?p.push("line-through"):p.push(b)}),p.length&&m.push("text-decoration:"+p.join(" ")),u?'<span class="'+h.concat(m).join(" ")+'"'+y(g)+">"+l.content+"</span>":'<span style="'+h.concat(m).join(";")+'"'+y(g)+">"+l.content+"</span>"}removeDecoration(r){const i=this.decorations.indexOf(r);i>=0&&this.decorations.splice(i,1)}}return bw=n,bw}var yne=gne();const vne=Vv(yne),mO=["text-cyan-400","text-emerald-400","text-amber-400","text-purple-400","text-pink-400","text-blue-400","text-red-400","text-orange-400"];function bne(t,e){const n=e.indexOf(t);return mO[n%mO.length]}function _ne(t){if(!t)return"";try{return new Date(t).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3})}catch{return t}}function xne(t){return t.replace(/\x1b\[[0-9;]*[a-zA-Z]/g,"")}const wne=/^([IWEF])(\d{4})\s+(\d{2}:\d{2}:\d{2}\.\d+)\s+\d+\s+([\w.]+:\d+)]\s*(.*)$/;function Sne(t){const e=t.match(wne);if(!e)return null;const[,n,,,s,r]=e,i=n==="E"?"error":n==="W"?"warn":n==="F"?"error":"info",a=sE(r),l=[`source: ${s}`];for(const[u,h]of Object.entries(a))l.push(`${u}: ${h}`);return{format:"klog",formatted:l.join(`
`),level:i}}function sE(t){const e={},n=/(?:"([^"]*)"|([\w.]+)=(?:"([^"]*)"|([^\s]*)))/g;let s,r=0;for(;(s=n.exec(t))!==null;)if(s[1]!==void 0)e[`msg${r||""}`]=s[1],r++;else{const i=s[2],a=s[3]??s[4]??"";e[i]=a}return e}function kne(t){const e=t.match(/(?:^|\s)([\w.]+)=/);if(!e)return{message:t,kvText:""};const n=e.index+(e[0].startsWith(" ")?1:0),s=t.slice(0,n).trim(),r=t.slice(n);return{message:s,kvText:r}}function Cne(t){const e=t.trim(),n=/^(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?Z?)\s+(INF|WRN|ERR|DBG|TRC|INFO|WARN|ERROR|DEBUG|TRACE|FTL|FATAL)\s+/i,s=e.match(n);if(!s)return null;const r=s[1],i=s[2].toUpperCase(),a=e.slice(s[0].length),{message:l,kvText:u}=kne(a),h=sE(u||a),m=Object.keys(h);let p="unknown";i.startsWith("ERR")||i==="FTL"||i==="FATAL"?p="error":i.startsWith("WRN")||i==="WARN"?p="warn":i.startsWith("INF")||i==="INFO"?p="info":i.startsWith("DBG")||i==="DEBUG"?p="debug":(i.startsWith("TRC")||i==="TRACE")&&(p="trace");const g=[`timestamp: ${r}`,`level: ${i}`];l&&g.push(`message: ${l}`);for(const y of m)g.push(`${y}: ${h[y]}`);return{format:"console",formatted:g.join(`
`),level:p}}function Nne(t){const e=t.trim();if(!/\w+=/.test(e))return null;const n=sE(e),s=Object.keys(n);if(s.length<2)return null;let r="unknown";const i=(n.level??n.lvl??n.severity??"").toLowerCase();return i.includes("err")||i==="fatal"?r="error":i.includes("warn")?r="warn":i==="info"?r="info":i==="debug"?r="debug":i==="trace"&&(r="trace"),{format:"logfmt",formatted:s.map(l=>`${l}: ${n[l]}`).join(`
`),level:r}}function Ene(t){const e=t.trim(),n=xne(e);if(n.startsWith("{")||n.startsWith("["))try{const a=JSON.parse(n);return{format:"json",formatted:JSON.stringify(a,null,2),jsonData:a}}catch{}const s=Sne(n);if(s)return s;const r=Cne(n);if(r)return r;const i=Nne(n);return i||{format:"plain",formatted:t}}const Ane={error:"text-red-600 dark:text-red-400",warn:"text-yellow-600 dark:text-yellow-400",info:"text-blue-600 dark:text-blue-400",debug:"text-neutral-600 dark:text-neutral-400",trace:"text-neutral-500 dark:text-neutral-500",unknown:"text-neutral-700 dark:text-neutral-300"},gO={"ansi-black":"text-neutral-800 dark:text-neutral-400","ansi-red":"text-red-600 dark:text-red-400","ansi-green":"text-green-600 dark:text-green-400","ansi-yellow":"text-yellow-600 dark:text-yellow-300","ansi-blue":"text-blue-600 dark:text-blue-400","ansi-magenta":"text-fuchsia-600 dark:text-fuchsia-400","ansi-cyan":"text-cyan-600 dark:text-cyan-400","ansi-white":"text-neutral-600 dark:text-neutral-200","ansi-bright-black":"text-neutral-500 dark:text-neutral-500","ansi-bright-red":"text-red-500 dark:text-red-300","ansi-bright-green":"text-green-500 dark:text-green-300","ansi-bright-yellow":"text-yellow-500 dark:text-yellow-200","ansi-bright-blue":"text-blue-500 dark:text-blue-300","ansi-bright-magenta":"text-fuchsia-500 dark:text-fuchsia-300","ansi-bright-cyan":"text-cyan-500 dark:text-cyan-300","ansi-bright-white":"text-neutral-400 dark:text-white"},yO={"ansi-black":"bg-neutral-900 dark:bg-neutral-900","ansi-red":"bg-red-600/20 dark:bg-red-500/30","ansi-green":"bg-green-600/20 dark:bg-green-500/30","ansi-yellow":"bg-yellow-500/20 dark:bg-yellow-500/30","ansi-blue":"bg-blue-600/20 dark:bg-blue-500/30","ansi-magenta":"bg-fuchsia-600/20 dark:bg-fuchsia-500/30","ansi-cyan":"bg-cyan-600/20 dark:bg-cyan-500/30","ansi-white":"bg-neutral-200 dark:bg-neutral-100","ansi-bright-black":"bg-neutral-700 dark:bg-neutral-700","ansi-bright-red":"bg-red-500/30 dark:bg-red-400/40","ansi-bright-green":"bg-green-500/30 dark:bg-green-400/40","ansi-bright-yellow":"bg-yellow-400/30 dark:bg-yellow-400/40","ansi-bright-blue":"bg-blue-500/30 dark:bg-blue-400/40","ansi-bright-magenta":"bg-fuchsia-500/30 dark:bg-fuchsia-400/40","ansi-bright-cyan":"bg-cyan-500/30 dark:bg-cyan-400/40","ansi-bright-white":"bg-white dark:bg-white"};function vO(t){const e=Pe.c(5),{text:n}=t;let s,r;if(e[0]!==n){r=Symbol.for("react.early_return_sentinel");e:{const a=vne.ansiToJson(n,{use_classes:!0,remove_empty:!0});if(a.length===0){r=f.jsx(f.Fragment,{children:n});break e}if(!a.some(Tne)){r=f.jsx(f.Fragment,{children:n});break e}s=a.map(Rne)}e[0]=n,e[1]=s,e[2]=r}else s=e[1],r=e[2];if(r!==Symbol.for("react.early_return_sentinel"))return r;let i;return e[3]!==s?(i=f.jsx(f.Fragment,{children:s}),e[3]=s,e[4]=i):i=e[4],i}function Rne(t,e){const n=[];return t.fg&&gO[t.fg]&&n.push(gO[t.fg]),t.bg&&yO[t.bg]&&n.push(yO[t.bg]),t.decorations?.includes("bold")&&n.push("font-bold"),t.decorations?.includes("italic")&&n.push("italic"),t.decorations?.includes("underline")&&n.push("underline"),n.length>0?f.jsx("span",{className:n.join(" "),children:t.content},e):f.jsx("span",{children:t.content},e)}function Tne(t){return t.fg||t.bg||t.decorations?.length}const jne={error:"bg-red-50 dark:bg-red-500/10 border-l-2 border-red-400 dark:border-red-500/50",warn:"bg-yellow-50 dark:bg-yellow-500/10 border-l-2 border-yellow-400 dark:border-yellow-500/50",info:"",debug:"",trace:"",unknown:""};function One(t,e,n){if(n&&n!=="unknown")return n;if(e){const i=e.level??e.severity??e.lvl??e.log_level??"",a=String(i).toLowerCase();if(a.includes("err")||a==="fatal"||a==="critical")return"error";if(a.includes("warn"))return"warn";if(a==="info")return"info";if(a==="debug")return"debug";if(a==="trace")return"trace"}const r=t.toLowerCase().slice(0,100);return/\b(error|err|fatal|critical|panic|exception)\b/.test(r)?"error":/\b(warn|warning)\b/.test(r)?"warn":/\binfo\b/.test(r)?"info":/\bdebug\b/.test(r)?"debug":/\btrace\b/.test(r)?"trace":"unknown"}function BP(t){const e=Pe.c(53),{logs:n,sources:s,isLoading:r,error:i,emptyMessage:a,unavailableMessage:l,toolbarRef:u}=t,h=r===void 0?!1:r,m=a===void 0?"Waiting for logs...":a,[p,g]=F.useState(!0),[y,b]=F.useState(!1),[_,w]=F.useState(!1),k=F.useRef(null),C=F.useRef(null);let E;e[0]!==n?(E=async()=>{const V=n.map(Mne).join(`
`);await navigator.clipboard.writeText(V),b(!0),setTimeout(()=>b(!1),2e3)},e[0]=n,e[1]=E):E=e[1];const A=E;let R;e[2]===Symbol.for("react.memo_cache_sentinel")?(R=()=>{if(!C.current)return;const{scrollTop:V,scrollHeight:T,clientHeight:Q}=C.current,te=T-V-Q<50;g(te)},e[2]=R):R=e[2];const N=R;let M;e[3]!==p?(M=()=>{p&&k.current&&k.current.scrollIntoView({behavior:"smooth"})},e[3]=p,e[4]=M):M=e[4];let I;e[5]!==p||e[6]!==n?(I=[n,p],e[5]=p,e[6]=n,e[7]=I):I=e[7],F.useEffect(M,I);let W;e[8]===Symbol.for("react.memo_cache_sentinel")?(W=()=>{g(!0),k.current?.scrollIntoView({behavior:"smooth"})},e[8]=W):W=e[8];const P=W;if(l){let V;return e[9]!==l?(V=f.jsx("div",{className:"h-full flex items-center justify-center text-neutral-500 dark:text-neutral-500",children:l}),e[9]=l,e[10]=V):V=e[10],V}let G;e[11]!==y||e[12]!==A||e[13]!==n.length||e[14]!==_||e[15]!==u?(G=u&&f.jsxs(Gb,{toolbarRef:u,children:[f.jsx("button",{onClick:()=>w(!_),className:`flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium rounded transition-colors ${_?"text-amber-600 dark:text-amber-400 bg-amber-100 dark:bg-amber-500/20":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-200 dark:hover:bg-neutral-800"}`,title:_?"Show all logs":"Show only errors & warnings",children:f.jsx(zY,{size:12})}),f.jsx("button",{onClick:A,disabled:n.length===0,className:"flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-200 dark:hover:bg-neutral-800 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Copy logs",children:y?f.jsx(Tn,{size:12,className:"text-emerald-500"}):f.jsx(js,{size:12})})]}),e[11]=y,e[12]=A,e[13]=n.length,e[14]=_,e[15]=u,e[16]=G):G=e[16];let $;e[17]!==h?($=h&&f.jsx("div",{className:"p-4 text-neutral-500 dark:text-neutral-500",children:"Loading..."}),e[17]=h,e[18]=$):$=e[18];let U;e[19]!==i?(U=i&&f.jsx("div",{className:"p-4 text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-500/10 border-b border-red-300 dark:border-red-500/30",children:i}),e[19]=i,e[20]=U):U=e[20];let Z;e[21]!==h||e[22]!==s||e[23]!==l?(Z=!h&&s.length===0&&!l&&f.jsx("div",{className:"p-4 text-neutral-500 dark:text-neutral-500",children:"No sources found"}),e[21]=h,e[22]=s,e[23]=l,e[24]=Z):Z=e[24];let K;e[25]!==m||e[26]!==i||e[27]!==h||e[28]!==n.length||e[29]!==s?(K=n.length===0&&!h&&s.length>0&&!i&&f.jsx("div",{className:"p-4 text-neutral-500 dark:text-neutral-500",children:m}),e[25]=m,e[26]=i,e[27]=h,e[28]=n.length,e[29]=s,e[30]=K):K=e[30];let B;if(e[31]!==n||e[32]!==_||e[33]!==s){let V;e[35]!==_||e[36]!==s?(V=(T,Q)=>{const te=Ene(T.message),X=One(T.message,te.jsonData,te.level);if(_&&X!=="error"&&X!=="warn")return null;const oe=Ane[X],xe=jne[X],Se=te.format!=="plain";return f.jsxs("div",{className:`hover:bg-neutral-100 dark:hover:bg-neutral-900/50 rounded px-2 py-1 group ${xe}`,children:[f.jsxs("div",{className:"flex items-center gap-2 text-[10px] leading-tight mb-0.5",children:[f.jsx("span",{className:`${bne(T.source,s)}`,title:T.source,children:T.source}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-600",children:_ne(T.timestamp)}),T.container&&T.container!==T.source&&f.jsx("span",{className:"text-neutral-500 dark:text-neutral-500",children:T.container})]}),Se?f.jsx("pre",{className:`${oe} whitespace-pre overflow-x-auto scrollbar-hide leading-snug text-[11px]`,children:f.jsx(vO,{text:te.formatted})}):f.jsx("div",{className:`${oe} break-all whitespace-pre-wrap leading-snug`,children:f.jsx(vO,{text:te.formatted})})]},Q)},e[35]=_,e[36]=s,e[37]=V):V=e[37],B=n.map(V),e[31]=n,e[32]=_,e[33]=s,e[34]=B}else B=e[34];let J;e[38]===Symbol.for("react.memo_cache_sentinel")?(J=f.jsx("div",{ref:k}),e[38]=J):J=e[38];let Y;e[39]!==B?(Y=f.jsxs("div",{className:"p-2 space-y-1",children:[B,J]}),e[39]=B,e[40]=Y):Y=e[40];let z;e[41]!==U||e[42]!==Z||e[43]!==K||e[44]!==Y||e[45]!==$?(z=f.jsxs("div",{ref:C,onScroll:N,className:"flex-1 overflow-auto font-mono text-xs",children:[$,U,Z,K,Y]}),e[41]=U,e[42]=Z,e[43]=K,e[44]=Y,e[45]=$,e[46]=z):z=e[46];let O;e[47]!==p?(O=!p&&f.jsx("div",{className:"shrink-0 px-4 py-2 border-t border-neutral-200 dark:border-neutral-800 bg-neutral-100 dark:bg-neutral-900/50",children:f.jsxs("button",{onClick:P,className:"flex items-center gap-1 text-xs text-neutral-600 dark:text-neutral-500 hover:text-neutral-900 dark:hover:text-neutral-300",children:[f.jsx(Ss,{size:12}),"Scroll to bottom"]})}),e[47]=p,e[48]=O):O=e[48];let L;return e[49]!==z||e[50]!==O||e[51]!==G?(L=f.jsxs("div",{className:"flex flex-col h-full bg-neutral-50 dark:bg-neutral-950",children:[G,z,O]}),e[49]=z,e[50]=O,e[51]=G,e[52]=L):L=e[52],L}function Mne(t){return`${t.timestamp??""} [${t.source}]${t.container?` [${t.container}]`:""} ${t.message}`}function bO(t,e,n){const s=t.match(/^(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d+Z)\s+(.*)$/);return s?{podName:e,container:n,timestamp:s[1],message:s[2]}:{podName:e,container:n,message:t}}async function Ine(t,e,n,s){const r=new URLSearchParams;s.container&&r.set("container",s.container),s.follow&&r.set("follow","true"),s.tailLines!==void 0&&r.set("tailLines",String(s.tailLines)),s.timestamps&&r.set("timestamps","true");const i=`/contexts/${t}/api/v1/namespaces/${e}/pods/${n}/log?${r.toString()}`;try{const a=await fetch(i,{signal:s.signal});if(!a.ok)throw new Error(`Failed to fetch logs: ${a.status} ${a.statusText}`);if(!a.body)throw new Error("No response body");const l=a.body.getReader(),u=new TextDecoder;let h="";for(;;){const{done:m,value:p}=await l.read();if(m)break;h+=u.decode(p,{stream:!0});const g=h.split(`
`);h=g.pop()||"";for(const y of g)y.trim()&&s.onLog(bO(y,n,s.container))}h.trim()&&s.onLog(bO(h,n,s.container))}catch(a){if(a.name==="AbortError")return;s.onError?.(a)}}function _O(t){const e=new AbortController;for(const n of t.podNames)Ine(t.context,t.namespace,n,{container:t.container,follow:t.follow,tailLines:t.tailLines,timestamps:t.timestamps,onLog:t.onLog,onError:t.onError,signal:e.signal});return e}async function Dne(t,e,n){const s=`/contexts/${t}/api/v1/namespaces/${e}/pods/${n}`,r=await fetch(s);if(!r.ok)throw new Error(`Failed to fetch pod: ${r.status}`);const i=await r.json(),a=[];if(i.spec?.initContainers)for(const l of i.spec.initContainers)a.push(l.name);if(i.spec?.containers)for(const l of i.spec.containers)a.push(l.name);return a}async function Lne(t,e,n,s){let r;switch(n.toLowerCase()){case"deployment":r=`/apis/apps/v1/namespaces/${e}/deployments/${s}`;break;case"daemonset":r=`/apis/apps/v1/namespaces/${e}/daemonsets/${s}`;break;case"replicaset":r=`/apis/apps/v1/namespaces/${e}/replicasets/${s}`;break;case"statefulset":r=`/apis/apps/v1/namespaces/${e}/statefulsets/${s}`;break;case"job":r=`/apis/batch/v1/namespaces/${e}/jobs/${s}`;break;default:throw new Error(`Unsupported workload kind: ${n}`)}const i=await fetch(`/contexts/${t}${r}`);if(!i.ok)throw new Error(`Failed to fetch ${n}: ${i.status}`);const l=(await i.json()).spec?.selector?.matchLabels;if(!l)throw new Error("Workload has no selector labels");const u=Object.entries(l).map(([p,g])=>`${p}=${g}`).join(","),h=await fetch(`/contexts/${t}/api/v1/namespaces/${e}/pods?labelSelector=${encodeURIComponent(u)}`);if(!h.ok)throw new Error(`Failed to fetch pods: ${h.status}`);return(await h.json()).items.map(p=>p.metadata.name)}const Pne=4e3;function Bne(t){const e=Pe.c(44),{context:n,resource:s,tailLines:r}=t,i=r===void 0?Pne:r;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=[],e[0]=a):a=e[0];const[l,u]=F.useState(a);let h;e[1]===Symbol.for("react.memo_cache_sentinel")?(h=[],e[1]=h):h=e[1];const[m,p]=F.useState(h);let g;e[2]===Symbol.for("react.memo_cache_sentinel")?(g=[],e[2]=g):g=e[2];const[y,b]=F.useState(g),[_,w]=F.useState(!1),[k,C]=F.useState(null),[E,A]=F.useState(!1),R=F.useRef(null),N=s.kind,M=s.metadata?.name,I=s.metadata?.namespace;let W;e:{if(N==="Pod"&&M){let V;e[3]!==M?(V=[M],e[3]=M,e[4]=V):V=e[4],W=V;break e}W=m}const P=W;let G,$;e[5]!==n||e[6]!==N||e[7]!==M||e[8]!==I?(G=()=>{if(!N||!M||!I||N==="Pod")return;let V=!1;return async function(){w(!0);try{const te=await Lne(n,I,N,M);V||(p(te),w(!1))}catch(te){V||(C(te.message),w(!1))}}(),()=>{V=!0}},$=[n,I,N,M],e[5]=n,e[6]=N,e[7]=M,e[8]=I,e[9]=G,e[10]=$):(G=e[9],$=e[10]),F.useEffect(G,$);let U,Z;e[11]!==n||e[12]!==N||e[13]!==M||e[14]!==I?(U=()=>{if(!N||!M||!I||N!=="Pod")return;let V=!1;return async function(){w(!0);try{const te=await Dne(n,I,M);V||(b(te),w(!1))}catch(te){V||(C(te.message),w(!1))}}(),()=>{V=!0}},Z=[n,I,N,M],e[11]=n,e[12]=N,e[13]=M,e[14]=I,e[15]=U,e[16]=Z):(U=e[15],Z=e[16]),F.useEffect(U,Z);const K=N==="Pod"&&y.length>1,B=P.length>0&&!E&&!_&&(N!=="Pod"||y.length>0);let J;e[17]!==n||e[18]!==K||e[19]!==I||e[20]!==y||e[21]!==B||e[22]!==P||e[23]!==i?(J=()=>{if(B&&I){const V=setTimeout(()=>{if(A(!0),K){const T=[];for(const Q of y){const te=_O({context:n,namespace:I,podNames:P,container:Q,follow:!0,tailLines:Math.ceil(i/y.length),timestamps:!0,onLog:X=>{const oe={timestamp:X.timestamp,message:X.message,source:X.podName,container:Q};u(xe=>[...xe,oe])},onError:X=>{C(X.message)}});T.push(te)}R.current={abort:()=>T.forEach($ne),signal:T[0]?.signal}}else R.current=_O({context:n,namespace:I,podNames:P,container:y.length===1?y[0]:void 0,follow:!0,tailLines:i,timestamps:!0,onLog:T=>{const Q={timestamp:T.timestamp,message:T.message,source:T.podName,container:T.container};u(te=>[...te,Q])},onError:T=>{C(T.message)}})},0);return()=>clearTimeout(V)}},e[17]=n,e[18]=K,e[19]=I,e[20]=y,e[21]=B,e[22]=P,e[23]=i,e[24]=J):J=e[24];let Y;e[25]!==n||e[26]!==K||e[27]!==N||e[28]!==I||e[29]!==y||e[30]!==B||e[31]!==P||e[32]!==i?(Y=[B,n,I,P,i,K,y,N],e[25]=n,e[26]=K,e[27]=N,e[28]=I,e[29]=y,e[30]=B,e[31]=P,e[32]=i,e[33]=Y):Y=e[33],F.useEffect(J,Y);let z;e[34]===Symbol.for("react.memo_cache_sentinel")?(z=()=>()=>{R.current?.abort(),R.current=null},e[34]=z):z=e[34];let O;e[35]!==N||e[36]!==M||e[37]!==I?(O=[N,M,I],e[35]=N,e[36]=M,e[37]=I,e[38]=O):O=e[38],F.useEffect(z,O);let L;return e[39]!==k||e[40]!==_||e[41]!==l||e[42]!==P?(L={logs:l,sources:P,isLoading:_,error:k},e[39]=k,e[40]=_,e[41]=l,e[42]=P,e[43]=L):L=e[43],L}function $ne(t){return t.abort()}function zne(t){const e=Pe.c(9),{context:n,resource:s,toolbarRef:r}=t;let i;e[0]!==n||e[1]!==s?(i={context:n,resource:s},e[0]=n,e[1]=s,e[2]=i):i=e[2];const{logs:a,sources:l,isLoading:u,error:h}=Bne(i);let m;return e[3]!==h||e[4]!==u||e[5]!==a||e[6]!==l||e[7]!==r?(m=f.jsx(BP,{logs:a,sources:l,isLoading:u,error:h,emptyMessage:"Waiting for logs...",toolbarRef:r}),e[3]=h,e[4]=u,e[5]=a,e[6]=l,e[7]=r,e[8]=m):m=e[8],m}function Fne(t){return`${t.kind}/${t.metadata?.namespace}/${t.metadata?.name}`}function Une(t){const e=Pe.c(7),{context:n,resource:s,toolbarRef:r}=t;let i;e[0]!==s?(i=Fne(s),e[0]=s,e[1]=i):i=e[1];let a;return e[2]!==n||e[3]!==s||e[4]!==i||e[5]!==r?(a=f.jsx(zne,{context:n,resource:s,toolbarRef:r},i),e[2]=n,e[3]=s,e[4]=i,e[5]=r,e[6]=a):a=e[6],a}var $P=Object.defineProperty,Hne=Object.getOwnPropertyDescriptor,Vne=(t,e)=>{for(var n in e)$P(t,n,{get:e[n],enumerable:!0})},jn=(t,e,n,s)=>{for(var r=s>1?void 0:s?Hne(e,n):e,i=t.length-1,a;i>=0;i--)(a=t[i])&&(r=(s?a(e,n,r):a(r))||r);return s&&r&&$P(e,n,r),r},qe=(t,e)=>(n,s)=>e(n,s,t),xO="Terminal input",h2={get:()=>xO,set:t=>xO=t},wO="Too much output to announce, navigate to rows manually to read",d2={get:()=>wO,set:t=>wO=t};function qne(t){return t.replace(/\r?\n/g,"\r")}function Kne(t,e){return e?"\x1B[200~"+t+"\x1B[201~":t}function Wne(t,e){t.clipboardData&&t.clipboardData.setData("text/plain",e.selectionText),t.preventDefault()}function Gne(t,e,n,s){if(t.stopPropagation(),t.clipboardData){let r=t.clipboardData.getData("text/plain");zP(r,e,n,s)}}function zP(t,e,n,s){t=qne(t),t=Kne(t,n.decPrivateModes.bracketedPasteMode&&s.rawOptions.ignoreBracketedPasteMode!==!0),n.triggerDataEvent(t,!0),e.value=""}function FP(t,e,n){let s=n.getBoundingClientRect(),r=t.clientX-s.left-10,i=t.clientY-s.top-10;e.style.width="20px",e.style.height="20px",e.style.left=`${r}px`,e.style.top=`${i}px`,e.style.zIndex="1000",e.focus()}function SO(t,e,n,s,r){FP(t,e,n),r&&s.rightClickSelect(t),e.value=s.selectionText,e.select()}function Fo(t){return t>65535?(t-=65536,String.fromCharCode((t>>10)+55296)+String.fromCharCode(t%1024+56320)):String.fromCharCode(t)}function Yb(t,e=0,n=t.length){let s="";for(let r=e;r<n;++r){let i=t[r];i>65535?(i-=65536,s+=String.fromCharCode((i>>10)+55296)+String.fromCharCode(i%1024+56320)):s+=String.fromCharCode(i)}return s}var Yne=class{constructor(){this._interim=0}clear(){this._interim=0}decode(t,e){let n=t.length;if(!n)return 0;let s=0,r=0;if(this._interim){let i=t.charCodeAt(r++);56320<=i&&i<=57343?e[s++]=(this._interim-55296)*1024+i-56320+65536:(e[s++]=this._interim,e[s++]=i),this._interim=0}for(let i=r;i<n;++i){let a=t.charCodeAt(i);if(55296<=a&&a<=56319){if(++i>=n)return this._interim=a,s;let l=t.charCodeAt(i);56320<=l&&l<=57343?e[s++]=(a-55296)*1024+l-56320+65536:(e[s++]=a,e[s++]=l);continue}a!==65279&&(e[s++]=a)}return s}},Zne=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(t,e){let n=t.length;if(!n)return 0;let s=0,r,i,a,l,u=0,h=0;if(this.interim[0]){let g=!1,y=this.interim[0];y&=(y&224)===192?31:(y&240)===224?15:7;let b=0,_;for(;(_=this.interim[++b]&63)&&b<4;)y<<=6,y|=_;let w=(this.interim[0]&224)===192?2:(this.interim[0]&240)===224?3:4,k=w-b;for(;h<k;){if(h>=n)return 0;if(_=t[h++],(_&192)!==128){h--,g=!0;break}else this.interim[b++]=_,y<<=6,y|=_&63}g||(w===2?y<128?h--:e[s++]=y:w===3?y<2048||y>=55296&&y<=57343||y===65279||(e[s++]=y):y<65536||y>1114111||(e[s++]=y)),this.interim.fill(0)}let m=n-4,p=h;for(;p<n;){for(;p<m&&!((r=t[p])&128)&&!((i=t[p+1])&128)&&!((a=t[p+2])&128)&&!((l=t[p+3])&128);)e[s++]=r,e[s++]=i,e[s++]=a,e[s++]=l,p+=4;if(r=t[p++],r<128)e[s++]=r;else if((r&224)===192){if(p>=n)return this.interim[0]=r,s;if(i=t[p++],(i&192)!==128){p--;continue}if(u=(r&31)<<6|i&63,u<128){p--;continue}e[s++]=u}else if((r&240)===224){if(p>=n)return this.interim[0]=r,s;if(i=t[p++],(i&192)!==128){p--;continue}if(p>=n)return this.interim[0]=r,this.interim[1]=i,s;if(a=t[p++],(a&192)!==128){p--;continue}if(u=(r&15)<<12|(i&63)<<6|a&63,u<2048||u>=55296&&u<=57343||u===65279)continue;e[s++]=u}else if((r&248)===240){if(p>=n)return this.interim[0]=r,s;if(i=t[p++],(i&192)!==128){p--;continue}if(p>=n)return this.interim[0]=r,this.interim[1]=i,s;if(a=t[p++],(a&192)!==128){p--;continue}if(p>=n)return this.interim[0]=r,this.interim[1]=i,this.interim[2]=a,s;if(l=t[p++],(l&192)!==128){p--;continue}if(u=(r&7)<<18|(i&63)<<12|(a&63)<<6|l&63,u<65536||u>1114111)continue;e[s++]=u}}return s}},UP="",Go=" ",Cm=class HP{constructor(){this.fg=0,this.bg=0,this.extended=new bv}static toColorRGB(e){return[e>>>16&255,e>>>8&255,e&255]}static fromColorRGB(e){return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255}clone(){let e=new HP;return e.fg=this.fg,e.bg=this.bg,e.extended=this.extended.clone(),e}isInverse(){return this.fg&67108864}isBold(){return this.fg&134217728}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:this.fg&268435456}isBlink(){return this.fg&536870912}isInvisible(){return this.fg&1073741824}isItalic(){return this.bg&67108864}isDim(){return this.bg&134217728}isStrikethrough(){return this.fg&2147483648}isProtected(){return this.bg&536870912}isOverline(){return this.bg&1073741824}getFgColorMode(){return this.fg&50331648}getBgColorMode(){return this.bg&50331648}isFgRGB(){return(this.fg&50331648)===50331648}isBgRGB(){return(this.bg&50331648)===50331648}isFgPalette(){return(this.fg&50331648)===16777216||(this.fg&50331648)===33554432}isBgPalette(){return(this.bg&50331648)===16777216||(this.bg&50331648)===33554432}isFgDefault(){return(this.fg&50331648)===0}isBgDefault(){return(this.bg&50331648)===0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(this.fg&50331648){case 16777216:case 33554432:return this.fg&255;case 50331648:return this.fg&16777215;default:return-1}}getBgColor(){switch(this.bg&50331648){case 16777216:case 33554432:return this.bg&255;case 50331648:return this.bg&16777215;default:return-1}}hasExtendedAttrs(){return this.bg&268435456}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(this.bg&268435456&&~this.extended.underlineColor)switch(this.extended.underlineColor&50331648){case 16777216:case 33554432:return this.extended.underlineColor&255;case 50331648:return this.extended.underlineColor&16777215;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return this.bg&268435456&&~this.extended.underlineColor?this.extended.underlineColor&50331648:this.getFgColorMode()}isUnderlineColorRGB(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===50331648:this.isFgRGB()}isUnderlineColorPalette(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===16777216||(this.extended.underlineColor&50331648)===33554432:this.isFgPalette()}isUnderlineColorDefault(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===0:this.isFgDefault()}getUnderlineStyle(){return this.fg&268435456?this.bg&268435456?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}},bv=class VP{constructor(e=0,n=0){this._ext=0,this._urlId=0,this._ext=e,this._urlId=n}get ext(){return this._urlId?this._ext&-469762049|this.underlineStyle<<26:this._ext}set ext(e){this._ext=e}get underlineStyle(){return this._urlId?5:(this._ext&469762048)>>26}set underlineStyle(e){this._ext&=-469762049,this._ext|=e<<26&469762048}get underlineColor(){return this._ext&67108863}set underlineColor(e){this._ext&=-67108864,this._ext|=e&67108863}get urlId(){return this._urlId}set urlId(e){this._urlId=e}get underlineVariantOffset(){let e=(this._ext&3758096384)>>29;return e<0?e^4294967288:e}set underlineVariantOffset(e){this._ext&=536870911,this._ext|=e<<29&3758096384}clone(){return new VP(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}},fi=class qP extends Cm{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new bv,this.combinedData=""}static fromCharData(e){let n=new qP;return n.setFromCharData(e),n}isCombined(){return this.content&2097152}getWidth(){return this.content>>22}getChars(){return this.content&2097152?this.combinedData:this.content&2097151?Fo(this.content&2097151):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):this.content&2097151}setFromCharData(e){this.fg=e[0],this.bg=0;let n=!1;if(e[1].length>2)n=!0;else if(e[1].length===2){let s=e[1].charCodeAt(0);if(55296<=s&&s<=56319){let r=e[1].charCodeAt(1);56320<=r&&r<=57343?this.content=(s-55296)*1024+r-56320+65536|e[2]<<22:n=!0}else n=!0}else this.content=e[1].charCodeAt(0)|e[2]<<22;n&&(this.combinedData=e[1],this.content=2097152|e[2]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},kO="di$target",f2="di$dependencies",_w=new Map;function Jne(t){return t[f2]||[]}function hs(t){if(_w.has(t))return _w.get(t);let e=function(n,s,r){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");Xne(e,n,r)};return e._id=t,_w.set(t,e),e}function Xne(t,e,n){e[kO]===e?e[f2].push({id:t,index:n}):(e[f2]=[{id:t,index:n}],e[kO]=e)}var Zs=hs("BufferService"),KP=hs("CoreMouseService"),Pc=hs("CoreService"),Qne=hs("CharsetService"),rE=hs("InstantiationService"),WP=hs("LogService"),Js=hs("OptionsService"),GP=hs("OscLinkService"),ese=hs("UnicodeService"),Nm=hs("DecorationService"),p2=class{constructor(t,e,n){this._bufferService=t,this._optionsService=e,this._oscLinkService=n}provideLinks(t,e){let n=this._bufferService.buffer.lines.get(t-1);if(!n){e(void 0);return}let s=[],r=this._optionsService.rawOptions.linkHandler,i=new fi,a=n.getTrimmedLength(),l=-1,u=-1,h=!1;for(let m=0;m<a;m++)if(!(u===-1&&!n.hasContent(m))){if(n.loadCell(m,i),i.hasExtendedAttrs()&&i.extended.urlId)if(u===-1){u=m,l=i.extended.urlId;continue}else h=i.extended.urlId!==l;else u!==-1&&(h=!0);if(h||u!==-1&&m===a-1){let p=this._oscLinkService.getLinkData(l)?.uri;if(p){let g={start:{x:u+1,y:t},end:{x:m+(!h&&m===a-1?1:0),y:t}},y=!1;if(!r?.allowNonHttpProtocols)try{let b=new URL(p);["http:","https:"].includes(b.protocol)||(y=!0)}catch{y=!0}y||s.push({text:p,range:g,activate:(b,_)=>r?r.activate(b,_,g):tse(b,_),hover:(b,_)=>r?.hover?.(b,_,g),leave:(b,_)=>r?.leave?.(b,_,g)})}h=!1,i.hasExtendedAttrs()&&i.extended.urlId?(u=m,l=i.extended.urlId):(u=-1,l=-1)}}e(s)}};p2=jn([qe(0,Zs),qe(1,Js),qe(2,GP)],p2);function tse(t,e){if(confirm(`Do you want to navigate to ${e}?

WARNING: This link could potentially be dangerous`)){let n=window.open();if(n){try{n.opener=null}catch{}n.location.href=e}else console.warn("Opening link blocked as opener could not be cleared")}}var Zb=hs("CharSizeService"),oo=hs("CoreBrowserService"),iE=hs("MouseService"),lo=hs("RenderService"),nse=hs("SelectionService"),YP=hs("CharacterJoinerService"),Gh=hs("ThemeService"),ZP=hs("LinkProviderService"),sse=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(t){setTimeout(()=>{throw t.stack?CO.isErrorNoTelemetry(t)?new CO(t.message+`

`+t.stack):new Error(t.message+`

`+t.stack):t},0)}}addListener(t){return this.listeners.push(t),()=>{this._removeListener(t)}}emit(t){this.listeners.forEach(e=>{e(t)})}_removeListener(t){this.listeners.splice(this.listeners.indexOf(t),1)}setUnexpectedErrorHandler(t){this.unexpectedErrorHandler=t}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(t){this.unexpectedErrorHandler(t),this.emit(t)}onUnexpectedExternalError(t){this.unexpectedErrorHandler(t)}},rse=new sse;function J0(t){ise(t)||rse.onUnexpectedError(t)}var m2="Canceled";function ise(t){return t instanceof ase?!0:t instanceof Error&&t.name===m2&&t.message===m2}var ase=class extends Error{constructor(){super(m2),this.name=this.message}};function ose(t){return new Error(`Illegal argument: ${t}`)}var CO=class g2 extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof g2)return e;let n=new g2;return n.message=e.message,n.stack=e.stack,n}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}},y2=class JP extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,JP.prototype)}};function Cr(t,e=0){return t[t.length-(1+e)]}var lse;(t=>{function e(i){return i<0}t.isLessThan=e;function n(i){return i<=0}t.isLessThanOrEqual=n;function s(i){return i>0}t.isGreaterThan=s;function r(i){return i===0}t.isNeitherLessOrGreaterThan=r,t.greaterThan=1,t.lessThan=-1,t.neitherLessOrGreaterThan=0})(lse||={});function cse(t,e){let n=this,s=!1,r;return function(){return s||(s=!0,e||(r=t.apply(n,arguments))),r}}var XP;(t=>{function e(A){return A&&typeof A=="object"&&typeof A[Symbol.iterator]=="function"}t.is=e;let n=Object.freeze([]);function s(){return n}t.empty=s;function*r(A){yield A}t.single=r;function i(A){return e(A)?A:r(A)}t.wrap=i;function a(A){return A||n}t.from=a;function*l(A){for(let R=A.length-1;R>=0;R--)yield A[R]}t.reverse=l;function u(A){return!A||A[Symbol.iterator]().next().done===!0}t.isEmpty=u;function h(A){return A[Symbol.iterator]().next().value}t.first=h;function m(A,R){let N=0;for(let M of A)if(R(M,N++))return!0;return!1}t.some=m;function p(A,R){for(let N of A)if(R(N))return N}t.find=p;function*g(A,R){for(let N of A)R(N)&&(yield N)}t.filter=g;function*y(A,R){let N=0;for(let M of A)yield R(M,N++)}t.map=y;function*b(A,R){let N=0;for(let M of A)yield*R(M,N++)}t.flatMap=b;function*_(...A){for(let R of A)yield*R}t.concat=_;function w(A,R,N){let M=N;for(let I of A)M=R(M,I);return M}t.reduce=w;function*k(A,R,N=A.length){for(R<0&&(R+=A.length),N<0?N+=A.length:N>A.length&&(N=A.length);R<N;R++)yield A[R]}t.slice=k;function C(A,R=Number.POSITIVE_INFINITY){let N=[];if(R===0)return[N,A];let M=A[Symbol.iterator]();for(let I=0;I<R;I++){let W=M.next();if(W.done)return[N,t.empty()];N.push(W.value)}return[N,{[Symbol.iterator](){return M}}]}t.consume=C;async function E(A){let R=[];for await(let N of A)R.push(N);return Promise.resolve(R)}t.asyncToArray=E})(XP||={});function Ec(t){if(XP.is(t)){let e=[];for(let n of t)if(n)try{n.dispose()}catch(s){e.push(s)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}function use(...t){return bn(()=>Ec(t))}function bn(t){return{dispose:cse(()=>{t()})}}var QP=class eB{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{Ec(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?eB.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),void 0)}};QP.DISABLE_DISPOSED_WARNING=!1;var rl=QP,It=class{constructor(){this._store=new rl,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};It.None=Object.freeze({dispose(){}});var Ch=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(t){this._isDisposed||t===this._value||(this._value?.dispose(),this._value=t)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}clearAndLeak(){let t=this._value;return this._value=void 0,t}},Ha=typeof window=="object"?window:globalThis,v2=class b2{constructor(e){this.element=e,this.next=b2.Undefined,this.prev=b2.Undefined}};v2.Undefined=new v2(void 0);var Sn=v2,NO=class{constructor(){this._first=Sn.Undefined,this._last=Sn.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Sn.Undefined}clear(){let t=this._first;for(;t!==Sn.Undefined;){let e=t.next;t.prev=Sn.Undefined,t.next=Sn.Undefined,t=e}this._first=Sn.Undefined,this._last=Sn.Undefined,this._size=0}unshift(t){return this._insert(t,!1)}push(t){return this._insert(t,!0)}_insert(t,e){let n=new Sn(t);if(this._first===Sn.Undefined)this._first=n,this._last=n;else if(e){let r=this._last;this._last=n,n.prev=r,r.next=n}else{let r=this._first;this._first=n,n.next=r,r.prev=n}this._size+=1;let s=!1;return()=>{s||(s=!0,this._remove(n))}}shift(){if(this._first!==Sn.Undefined){let t=this._first.element;return this._remove(this._first),t}}pop(){if(this._last!==Sn.Undefined){let t=this._last.element;return this._remove(this._last),t}}_remove(t){if(t.prev!==Sn.Undefined&&t.next!==Sn.Undefined){let e=t.prev;e.next=t.next,t.next.prev=e}else t.prev===Sn.Undefined&&t.next===Sn.Undefined?(this._first=Sn.Undefined,this._last=Sn.Undefined):t.next===Sn.Undefined?(this._last=this._last.prev,this._last.next=Sn.Undefined):t.prev===Sn.Undefined&&(this._first=this._first.next,this._first.prev=Sn.Undefined);this._size-=1}*[Symbol.iterator](){let t=this._first;for(;t!==Sn.Undefined;)yield t.element,t=t.next}},hse=globalThis.performance&&typeof globalThis.performance.now=="function",dse=class tB{static create(e){return new tB(e)}constructor(e){this._now=hse&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}},_s;(t=>{t.None=()=>It.None;function e($,U){return p($,()=>{},0,void 0,!0,void 0,U)}t.defer=e;function n($){return(U,Z=null,K)=>{let B=!1,J;return J=$(Y=>{if(!B)return J?J.dispose():B=!0,U.call(Z,Y)},null,K),B&&J.dispose(),J}}t.once=n;function s($,U,Z){return h((K,B=null,J)=>$(Y=>K.call(B,U(Y)),null,J),Z)}t.map=s;function r($,U,Z){return h((K,B=null,J)=>$(Y=>{U(Y),K.call(B,Y)},null,J),Z)}t.forEach=r;function i($,U,Z){return h((K,B=null,J)=>$(Y=>U(Y)&&K.call(B,Y),null,J),Z)}t.filter=i;function a($){return $}t.signal=a;function l(...$){return(U,Z=null,K)=>{let B=use(...$.map(J=>J(Y=>U.call(Z,Y))));return m(B,K)}}t.any=l;function u($,U,Z,K){let B=Z;return s($,J=>(B=U(B,J),B),K)}t.reduce=u;function h($,U){let Z,K={onWillAddFirstListener(){Z=$(B.fire,B)},onDidRemoveLastListener(){Z?.dispose()}},B=new Te(K);return U?.add(B),B.event}function m($,U){return U instanceof Array?U.push($):U&&U.add($),$}function p($,U,Z=100,K=!1,B=!1,J,Y){let z,O,L,V=0,T,Q={leakWarningThreshold:J,onWillAddFirstListener(){z=$(X=>{V++,O=U(O,X),K&&!L&&(te.fire(O),O=void 0),T=()=>{let oe=O;O=void 0,L=void 0,(!K||V>1)&&te.fire(oe),V=0},typeof Z=="number"?(clearTimeout(L),L=setTimeout(T,Z)):L===void 0&&(L=0,queueMicrotask(T))})},onWillRemoveListener(){B&&V>0&&T?.()},onDidRemoveLastListener(){T=void 0,z.dispose()}},te=new Te(Q);return Y?.add(te),te.event}t.debounce=p;function g($,U=0,Z){return t.debounce($,(K,B)=>K?(K.push(B),K):[B],U,void 0,!0,void 0,Z)}t.accumulate=g;function y($,U=(K,B)=>K===B,Z){let K=!0,B;return i($,J=>{let Y=K||!U(J,B);return K=!1,B=J,Y},Z)}t.latch=y;function b($,U,Z){return[t.filter($,U,Z),t.filter($,K=>!U(K),Z)]}t.split=b;function _($,U=!1,Z=[],K){let B=Z.slice(),J=$(O=>{B?B.push(O):z.fire(O)});K&&K.add(J);let Y=()=>{B?.forEach(O=>z.fire(O)),B=null},z=new Te({onWillAddFirstListener(){J||(J=$(O=>z.fire(O)),K&&K.add(J))},onDidAddFirstListener(){B&&(U?setTimeout(Y):Y())},onDidRemoveLastListener(){J&&J.dispose(),J=null}});return K&&K.add(z),z.event}t.buffer=_;function w($,U){return(Z,K,B)=>{let J=U(new C);return $(function(Y){let z=J.evaluate(Y);z!==k&&Z.call(K,z)},void 0,B)}}t.chain=w;let k=Symbol("HaltChainable");class C{constructor(){this.steps=[]}map(U){return this.steps.push(U),this}forEach(U){return this.steps.push(Z=>(U(Z),Z)),this}filter(U){return this.steps.push(Z=>U(Z)?Z:k),this}reduce(U,Z){let K=Z;return this.steps.push(B=>(K=U(K,B),K)),this}latch(U=(Z,K)=>Z===K){let Z=!0,K;return this.steps.push(B=>{let J=Z||!U(B,K);return Z=!1,K=B,J?B:k}),this}evaluate(U){for(let Z of this.steps)if(U=Z(U),U===k)break;return U}}function E($,U,Z=K=>K){let K=(...z)=>Y.fire(Z(...z)),B=()=>$.on(U,K),J=()=>$.removeListener(U,K),Y=new Te({onWillAddFirstListener:B,onDidRemoveLastListener:J});return Y.event}t.fromNodeEventEmitter=E;function A($,U,Z=K=>K){let K=(...z)=>Y.fire(Z(...z)),B=()=>$.addEventListener(U,K),J=()=>$.removeEventListener(U,K),Y=new Te({onWillAddFirstListener:B,onDidRemoveLastListener:J});return Y.event}t.fromDOMEventEmitter=A;function R($){return new Promise(U=>n($)(U))}t.toPromise=R;function N($){let U=new Te;return $.then(Z=>{U.fire(Z)},()=>{U.fire(void 0)}).finally(()=>{U.dispose()}),U.event}t.fromPromise=N;function M($,U){return $(Z=>U.fire(Z))}t.forward=M;function I($,U,Z){return U(Z),$(K=>U(K))}t.runAndSubscribe=I;class W{constructor(U,Z){this._observable=U,this._counter=0,this._hasChanged=!1;let K={onWillAddFirstListener:()=>{U.addObserver(this)},onDidRemoveLastListener:()=>{U.removeObserver(this)}};this.emitter=new Te(K),Z&&Z.add(this.emitter)}beginUpdate(U){this._counter++}handlePossibleChange(U){}handleChange(U,Z){this._hasChanged=!0}endUpdate(U){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function P($,U){return new W($,U).emitter.event}t.fromObservable=P;function G($){return(U,Z,K)=>{let B=0,J=!1,Y={beginUpdate(){B++},endUpdate(){B--,B===0&&($.reportChanges(),J&&(J=!1,U.call(Z)))},handlePossibleChange(){},handleChange(){J=!0}};$.addObserver(Y),$.reportChanges();let z={dispose(){$.removeObserver(Y)}};return K instanceof rl?K.add(z):Array.isArray(K)&&K.push(z),z}}t.fromObservableLight=G})(_s||={});var _2=class x2{constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${x2._idPool++}`,x2.all.add(this)}start(e){this._stopWatch=new dse,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}};_2.all=new Set,_2._idPool=0;var fse=_2,pse=-1,nB=class sB{constructor(e,n,s=(sB._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e,this.threshold=n,this.name=s,this._warnCountdown=0}dispose(){this._stacks?.clear()}check(e,n){let s=this.threshold;if(s<=0||n<s)return;this._stacks||(this._stacks=new Map);let r=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,r+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=s*.5;let[i,a]=this.getMostFrequentStack(),l=`[${this.name}] potential listener LEAK detected, having ${n} listeners already. MOST frequent listener (${a}):`;console.warn(l),console.warn(i);let u=new yse(l,i);this._errorHandler(u)}return()=>{let i=this._stacks.get(e.value)||0;this._stacks.set(e.value,i-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,n=0;for(let[s,r]of this._stacks)(!e||n<r)&&(e=[s,r],n=r);return e}};nB._idPool=1;var mse=nB,gse=class rB{constructor(e){this.value=e}static create(){let e=new Error;return new rB(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},yse=class extends Error{constructor(t,e){super(t),this.name="ListenerLeakError",this.stack=e}},vse=class extends Error{constructor(t,e){super(t),this.name="ListenerRefusalError",this.stack=e}},bse=0,xw=class{constructor(t){this.value=t,this.id=bse++}},_se=2,xse,Te=class{constructor(e){this._size=0,this._options=e,this._leakageMon=this._options?.leakWarningThreshold?new mse(e?.onListenerError??J0,this._options?.leakWarningThreshold??pse):void 0,this._perfMon=this._options?._profName?new fse(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){this._disposed||(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose())}get event(){return this._event??=(e,n,s)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let l=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(l);let u=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],h=new vse(`${l}. HINT: Stack shows most frequent listener (${u[1]}-times)`,u[0]);return(this._options?.onListenerError||J0)(h),It.None}if(this._disposed)return It.None;n&&(e=e.bind(n));let r=new xw(e),i;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(r.stack=gse.create(),i=this._leakageMon.check(r.stack,this._size+1)),this._listeners?this._listeners instanceof xw?(this._deliveryQueue??=new wse,this._listeners=[this._listeners,r]):this._listeners.push(r):(this._options?.onWillAddFirstListener?.(this),this._listeners=r,this._options?.onDidAddFirstListener?.(this)),this._size++;let a=bn(()=>{i?.(),this._removeListener(r)});return s instanceof rl?s.add(a):Array.isArray(s)&&s.push(a),a},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let n=this._listeners,s=n.indexOf(e);if(s===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,n[s]=void 0;let r=this._deliveryQueue.current===this;if(this._size*_se<=n.length){let i=0;for(let a=0;a<n.length;a++)n[a]?n[i++]=n[a]:r&&(this._deliveryQueue.end--,i<this._deliveryQueue.i&&this._deliveryQueue.i--);n.length=i}}_deliver(e,n){if(!e)return;let s=this._options?.onListenerError||J0;if(!s){e.value(n);return}try{e.value(n)}catch(r){s(r)}}_deliverQueue(e){let n=e.current._listeners;for(;e.i<e.end;)this._deliver(n[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof xw)this._deliver(this._listeners,e);else{let n=this._deliveryQueue;n.enqueue(this,e,this._listeners.length),this._deliverQueue(n)}this._perfMon?.stop()}hasListeners(){return this._size>0}},wse=class{constructor(){this.i=-1,this.end=0}enqueue(t,e,n){this.i=0,this.end=n,this.current=t,this.value=e}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},w2=class{constructor(){this.mapWindowIdToZoomLevel=new Map,this._onDidChangeZoomLevel=new Te,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this.mapWindowIdToZoomFactor=new Map,this._onDidChangeFullscreen=new Te,this.onDidChangeFullscreen=this._onDidChangeFullscreen.event,this.mapWindowIdToFullScreen=new Map}getZoomLevel(e){return this.mapWindowIdToZoomLevel.get(this.getWindowId(e))??0}setZoomLevel(e,n){if(this.getZoomLevel(n)===e)return;let s=this.getWindowId(n);this.mapWindowIdToZoomLevel.set(s,e),this._onDidChangeZoomLevel.fire(s)}getZoomFactor(e){return this.mapWindowIdToZoomFactor.get(this.getWindowId(e))??1}setZoomFactor(e,n){this.mapWindowIdToZoomFactor.set(this.getWindowId(n),e)}setFullscreen(e,n){if(this.isFullscreen(n)===e)return;let s=this.getWindowId(n);this.mapWindowIdToFullScreen.set(s,e),this._onDidChangeFullscreen.fire(s)}isFullscreen(e){return!!this.mapWindowIdToFullScreen.get(this.getWindowId(e))}getWindowId(e){return e.vscodeWindowId}};w2.INSTANCE=new w2;var aE=w2;function Sse(t,e,n){typeof e=="string"&&(e=t.matchMedia(e)),e.addEventListener("change",n)}aE.INSTANCE.onDidChangeZoomLevel;function kse(t){return aE.INSTANCE.getZoomFactor(t)}aE.INSTANCE.onDidChangeFullscreen;var Yh=typeof navigator=="object"?navigator.userAgent:"",S2=Yh.indexOf("Firefox")>=0,Cse=Yh.indexOf("AppleWebKit")>=0,oE=Yh.indexOf("Chrome")>=0,Nse=!oE&&Yh.indexOf("Safari")>=0;Yh.indexOf("Electron/")>=0;Yh.indexOf("Android")>=0;var ww=!1;if(typeof Ha.matchMedia=="function"){let t=Ha.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),e=Ha.matchMedia("(display-mode: fullscreen)");ww=t.matches,Sse(Ha,t,({matches:n})=>{ww&&e.matches||(ww=n)})}var Ku="en",k2=!1,C2=!1,X0=!1,iB=!1,g0,Q0=Ku,EO=Ku,Ese,Pa,oc=globalThis,jr;typeof oc.vscode<"u"&&typeof oc.vscode.process<"u"?jr=oc.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(jr=process);var Ase=typeof jr?.versions?.electron=="string",Rse=Ase&&jr?.type==="renderer";if(typeof jr=="object"){k2=jr.platform==="win32",C2=jr.platform==="darwin",X0=jr.platform==="linux",X0&&jr.env.SNAP&&jr.env.SNAP_REVISION,jr.env.CI||jr.env.BUILD_ARTIFACTSTAGINGDIRECTORY,g0=Ku,Q0=Ku;let t=jr.env.VSCODE_NLS_CONFIG;if(t)try{let e=JSON.parse(t);g0=e.userLocale,EO=e.osLocale,Q0=e.resolvedLanguage||Ku,Ese=e.languagePack?.translationsConfigFile}catch{}iB=!0}else typeof navigator=="object"&&!Rse?(Pa=navigator.userAgent,k2=Pa.indexOf("Windows")>=0,C2=Pa.indexOf("Macintosh")>=0,(Pa.indexOf("Macintosh")>=0||Pa.indexOf("iPad")>=0||Pa.indexOf("iPhone")>=0)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0,X0=Pa.indexOf("Linux")>=0,Pa?.indexOf("Mobi")>=0,Q0=globalThis._VSCODE_NLS_LANGUAGE||Ku,g0=navigator.language.toLowerCase(),EO=g0):console.error("Unable to resolve platform.");var aB=k2,ta=C2,Tse=X0,AO=iB,aa=Pa,Io=Q0,jse;(t=>{function e(){return Io}t.value=e;function n(){return Io.length===2?Io==="en":Io.length>=3?Io[0]==="e"&&Io[1]==="n"&&Io[2]==="-":!1}t.isDefaultVariant=n;function s(){return Io==="en"}t.isDefault=s})(jse||={});var Ose=typeof oc.postMessage=="function"&&!oc.importScripts;(()=>{if(Ose){let t=[];oc.addEventListener("message",n=>{if(n.data&&n.data.vscodeScheduleAsyncWork)for(let s=0,r=t.length;s<r;s++){let i=t[s];if(i.id===n.data.vscodeScheduleAsyncWork){t.splice(s,1),i.callback();return}}});let e=0;return n=>{let s=++e;t.push({id:s,callback:n}),oc.postMessage({vscodeScheduleAsyncWork:s},"*")}}return t=>setTimeout(t)})();var Mse=!!(aa&&aa.indexOf("Chrome")>=0);aa&&aa.indexOf("Firefox")>=0;!Mse&&aa&&aa.indexOf("Safari")>=0;aa&&aa.indexOf("Edg/")>=0;aa&&aa.indexOf("Android")>=0;var Nu=typeof navigator=="object"?navigator:{};AO||document.queryCommandSupported&&document.queryCommandSupported("copy")||Nu&&Nu.clipboard&&Nu.clipboard.writeText,AO||Nu&&Nu.clipboard&&Nu.clipboard.readText;var lE=class{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(t,e){this._keyCodeToStr[t]=e,this._strToKeyCode[e.toLowerCase()]=t}keyCodeToStr(t){return this._keyCodeToStr[t]}strToKeyCode(t){return this._strToKeyCode[t.toLowerCase()]||0}},Sw=new lE,RO=new lE,TO=new lE,Ise=new Array(230),oB;(t=>{function e(l){return Sw.keyCodeToStr(l)}t.toString=e;function n(l){return Sw.strToKeyCode(l)}t.fromString=n;function s(l){return RO.keyCodeToStr(l)}t.toUserSettingsUS=s;function r(l){return TO.keyCodeToStr(l)}t.toUserSettingsGeneral=r;function i(l){return RO.strToKeyCode(l)||TO.strToKeyCode(l)}t.fromUserSettings=i;function a(l){if(l>=98&&l<=113)return null;switch(l){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return Sw.keyCodeToStr(l)}t.toElectronAccelerator=a})(oB||={});var Dse=class lB{constructor(e,n,s,r,i){this.ctrlKey=e,this.shiftKey=n,this.altKey=s,this.metaKey=r,this.keyCode=i}equals(e){return e instanceof lB&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}getHashCode(){let e=this.ctrlKey?"1":"0",n=this.shiftKey?"1":"0",s=this.altKey?"1":"0",r=this.metaKey?"1":"0";return`K${e}${n}${s}${r}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new Lse([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},Lse=class{constructor(t){if(t.length===0)throw ose("chords");this.chords=t}getHashCode(){let t="";for(let e=0,n=this.chords.length;e<n;e++)e!==0&&(t+=";"),t+=this.chords[e].getHashCode();return t}equals(t){if(t===null||this.chords.length!==t.chords.length)return!1;for(let e=0;e<this.chords.length;e++)if(!this.chords[e].equals(t.chords[e]))return!1;return!0}};function Pse(t){if(t.charCode){let n=String.fromCharCode(t.charCode).toUpperCase();return oB.fromString(n)}let e=t.keyCode;if(e===3)return 7;if(S2)switch(e){case 59:return 85;case 60:if(Tse)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(ta)return 57;break}else if(Cse&&(ta&&e===93||!ta&&e===92))return 57;return Ise[e]||0}var Bse=ta?256:2048,$se=512,zse=1024,Fse=ta?2048:256,jO=class{constructor(t){this._standardKeyboardEventBrand=!0;let e=t;this.browserEvent=e,this.target=e.target,this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,this.altGraphKey=e.getModifierState?.("AltGraph"),this.keyCode=Pse(e),this.code=e.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(t){return this._asKeybinding===t}_computeKeybinding(){let t=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(t=this.keyCode);let e=0;return this.ctrlKey&&(e|=Bse),this.altKey&&(e|=$se),this.shiftKey&&(e|=zse),this.metaKey&&(e|=Fse),e|=t,e}_computeKeyCodeChord(){let t=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(t=this.keyCode),new Dse(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,t)}},OO=new WeakMap;function Use(t){if(!t.parent||t.parent===t)return null;try{let e=t.location,n=t.parent.location;if(e.origin!=="null"&&n.origin!=="null"&&e.origin!==n.origin)return null}catch{return null}return t.parent}var Hse=class{static getSameOriginWindowChain(t){let e=OO.get(t);if(!e){e=[],OO.set(t,e);let n=t,s;do s=Use(n),s?e.push({window:new WeakRef(n),iframeElement:n.frameElement||null}):e.push({window:new WeakRef(n),iframeElement:null}),n=s;while(n)}return e.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(t,e){if(!e||t===e)return{top:0,left:0};let n=0,s=0,r=this.getSameOriginWindowChain(t);for(let i of r){let a=i.window.deref();if(n+=a?.scrollY??0,s+=a?.scrollX??0,a===e||!i.iframeElement)break;let l=i.iframeElement.getBoundingClientRect();n+=l.top,s+=l.left}return{top:n,left:s}}},y0=class{constructor(t,e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=e.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);let n=Hse.getPositionOfChildWindowRelativeToAncestorWindow(t,e.view);this.posx-=n.left,this.posy-=n.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}},MO=class{constructor(t,e=0,n=0){this.browserEvent=t||null,this.target=t?t.target||t.targetNode||t.srcElement:null,this.deltaY=n,this.deltaX=e;let s=!1;if(oE){let r=navigator.userAgent.match(/Chrome\/(\d+)/);s=(r?parseInt(r[1]):123)<=122}if(t){let r=t,i=t,a=t.view?.devicePixelRatio||1;if(typeof r.wheelDeltaY<"u")s?this.deltaY=r.wheelDeltaY/(120*a):this.deltaY=r.wheelDeltaY/120;else if(typeof i.VERTICAL_AXIS<"u"&&i.axis===i.VERTICAL_AXIS)this.deltaY=-i.detail/3;else if(t.type==="wheel"){let l=t;l.deltaMode===l.DOM_DELTA_LINE?S2&&!ta?this.deltaY=-t.deltaY/3:this.deltaY=-t.deltaY:this.deltaY=-t.deltaY/40}if(typeof r.wheelDeltaX<"u")Nse&&aB?this.deltaX=-(r.wheelDeltaX/120):s?this.deltaX=r.wheelDeltaX/(120*a):this.deltaX=r.wheelDeltaX/120;else if(typeof i.HORIZONTAL_AXIS<"u"&&i.axis===i.HORIZONTAL_AXIS)this.deltaX=-t.detail/3;else if(t.type==="wheel"){let l=t;l.deltaMode===l.DOM_DELTA_LINE?S2&&!ta?this.deltaX=-t.deltaX/3:this.deltaX=-t.deltaX:this.deltaX=-t.deltaX/40}this.deltaY===0&&this.deltaX===0&&t.wheelDelta&&(s?this.deltaY=t.wheelDelta/(120*a):this.deltaY=t.wheelDelta/120)}}preventDefault(){this.browserEvent?.preventDefault()}stopPropagation(){this.browserEvent?.stopPropagation()}},cB=Object.freeze(function(t,e){let n=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(n)}}}),Vse;(t=>{function e(n){return n===t.None||n===t.Cancelled||n instanceof qse?!0:!n||typeof n!="object"?!1:typeof n.isCancellationRequested=="boolean"&&typeof n.onCancellationRequested=="function"}t.isCancellationToken=e,t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:_s.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:cB})})(Vse||={});var qse=class{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?cB:(this._emitter||(this._emitter=new Te),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},cE=class{constructor(t,e){this._isDisposed=!1,this._token=-1,typeof t=="function"&&typeof e=="number"&&this.setIfNotSet(t,e)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(t,e){if(this._isDisposed)throw new y2("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,t()},e)}setIfNotSet(t,e){if(this._isDisposed)throw new y2("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,t()},e))}},Kse=class{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(t,e,n=globalThis){if(this.isDisposed)throw new y2("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();let s=n.setInterval(()=>{t()},e);this.disposable=bn(()=>{n.clearInterval(s),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}},Wse;(t=>{async function e(s){let r,i=await Promise.all(s.map(a=>a.then(l=>l,l=>{r||(r=l)})));if(typeof r<"u")throw r;return i}t.settled=e;function n(s){return new Promise(async(r,i)=>{try{await s(r,i)}catch(a){i(a)}})}t.withAsyncBody=n})(Wse||={});var IO=class si{static fromArray(e){return new si(n=>{n.emitMany(e)})}static fromPromise(e){return new si(async n=>{n.emitMany(await e)})}static fromPromises(e){return new si(async n=>{await Promise.all(e.map(async s=>n.emitOne(await s)))})}static merge(e){return new si(async n=>{await Promise.all(e.map(async s=>{for await(let r of s)n.emitOne(r)}))})}constructor(e,n){this._state=0,this._results=[],this._error=null,this._onReturn=n,this._onStateChanged=new Te,queueMicrotask(async()=>{let s={emitOne:r=>this.emitOne(r),emitMany:r=>this.emitMany(r),reject:r=>this.reject(r)};try{await Promise.resolve(e(s)),this.resolve()}catch(r){this.reject(r)}finally{s.emitOne=void 0,s.emitMany=void 0,s.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await _s.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>(this._onReturn?.(),{done:!0,value:void 0})}}static map(e,n){return new si(async s=>{for await(let r of e)s.emitOne(n(r))})}map(e){return si.map(this,e)}static filter(e,n){return new si(async s=>{for await(let r of e)n(r)&&s.emitOne(r)})}filter(e){return si.filter(this,e)}static coalesce(e){return si.filter(e,n=>!!n)}coalesce(){return si.coalesce(this)}static async toPromise(e){let n=[];for await(let s of e)n.push(s);return n}toPromise(){return si.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};IO.EMPTY=IO.fromArray([]);var{getWindow:Yi,getWindowId:Gse,onDidRegisterWindow:Yse}=(function(){let t=new Map,e={window:Ha,disposables:new rl};t.set(Ha.vscodeWindowId,e);let n=new Te,s=new Te,r=new Te;function i(a,l){return(typeof a=="number"?t.get(a):void 0)??(l?e:void 0)}return{onDidRegisterWindow:n.event,onWillUnregisterWindow:r.event,onDidUnregisterWindow:s.event,registerWindow(a){if(t.has(a.vscodeWindowId))return It.None;let l=new rl,u={window:a,disposables:l.add(new rl)};return t.set(a.vscodeWindowId,u),l.add(bn(()=>{t.delete(a.vscodeWindowId),s.fire(a)})),l.add(bt(a,os.BEFORE_UNLOAD,()=>{r.fire(a)})),n.fire(u),l},getWindows(){return t.values()},getWindowsCount(){return t.size},getWindowId(a){return a.vscodeWindowId},hasWindow(a){return t.has(a)},getWindowById:i,getWindow(a){let l=a;if(l?.ownerDocument?.defaultView)return l.ownerDocument.defaultView.window;let u=a;return u?.view?u.view.window:Ha},getDocument(a){return Yi(a).document}}})(),Zse=class{constructor(t,e,n,s){this._node=t,this._type=e,this._handler=n,this._options=s||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}};function bt(t,e,n,s){return new Zse(t,e,n,s)}var DO=function(t,e,n,s){return bt(t,e,n,s)},uE,Jse=class extends Kse{constructor(t){super(),this.defaultTarget=t&&Yi(t)}cancelAndSet(t,e,n){return super.cancelAndSet(t,e,n??this.defaultTarget)}},LO=class{constructor(t,e=0){this._runner=t,this.priority=e,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(t){J0(t)}}static sort(t,e){return e.priority-t.priority}};(function(){let t=new Map,e=new Map,n=new Map,s=new Map,r=i=>{n.set(i,!1);let a=t.get(i)??[];for(e.set(i,a),t.set(i,[]),s.set(i,!0);a.length>0;)a.sort(LO.sort),a.shift().execute();s.set(i,!1)};uE=(i,a,l=0)=>{let u=Gse(i),h=new LO(a,l),m=t.get(u);return m||(m=[],t.set(u,m)),m.push(h),n.get(u)||(n.set(u,!0),i.requestAnimationFrame(()=>r(u))),h}})();function Xse(t){let e=t.getBoundingClientRect(),n=Yi(t);return{left:e.left+n.scrollX,top:e.top+n.scrollY,width:e.width,height:e.height}}var os={CLICK:"click",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",KEY_DOWN:"keydown",KEY_UP:"keyup",BEFORE_UNLOAD:"beforeunload",CHANGE:"change",FOCUS:"focus",BLUR:"blur",INPUT:"input"},Qse=class{constructor(t){this.domNode=t,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingTop="",this._paddingLeft="",this._paddingBottom="",this._paddingRight="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(t){let e=ir(t);this._maxWidth!==e&&(this._maxWidth=e,this.domNode.style.maxWidth=this._maxWidth)}setWidth(t){let e=ir(t);this._width!==e&&(this._width=e,this.domNode.style.width=this._width)}setHeight(t){let e=ir(t);this._height!==e&&(this._height=e,this.domNode.style.height=this._height)}setTop(t){let e=ir(t);this._top!==e&&(this._top=e,this.domNode.style.top=this._top)}setLeft(t){let e=ir(t);this._left!==e&&(this._left=e,this.domNode.style.left=this._left)}setBottom(t){let e=ir(t);this._bottom!==e&&(this._bottom=e,this.domNode.style.bottom=this._bottom)}setRight(t){let e=ir(t);this._right!==e&&(this._right=e,this.domNode.style.right=this._right)}setPaddingTop(t){let e=ir(t);this._paddingTop!==e&&(this._paddingTop=e,this.domNode.style.paddingTop=this._paddingTop)}setPaddingLeft(t){let e=ir(t);this._paddingLeft!==e&&(this._paddingLeft=e,this.domNode.style.paddingLeft=this._paddingLeft)}setPaddingBottom(t){let e=ir(t);this._paddingBottom!==e&&(this._paddingBottom=e,this.domNode.style.paddingBottom=this._paddingBottom)}setPaddingRight(t){let e=ir(t);this._paddingRight!==e&&(this._paddingRight=e,this.domNode.style.paddingRight=this._paddingRight)}setFontFamily(t){this._fontFamily!==t&&(this._fontFamily=t,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(t){let e=ir(t);this._fontSize!==e&&(this._fontSize=e,this.domNode.style.fontSize=this._fontSize)}setFontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(t){this._fontFeatureSettings!==t&&(this._fontFeatureSettings=t,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(t){this._fontVariationSettings!==t&&(this._fontVariationSettings=t,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(t){this._textDecoration!==t&&(this._textDecoration=t,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(t){let e=ir(t);this._lineHeight!==e&&(this._lineHeight=e,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(t){let e=ir(t);this._letterSpacing!==e&&(this._letterSpacing=e,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(t){this._className!==t&&(this._className=t,this.domNode.className=this._className)}toggleClassName(t,e){this.domNode.classList.toggle(t,e),this._className=this.domNode.className}setDisplay(t){this._display!==t&&(this._display=t,this.domNode.style.display=this._display)}setPosition(t){this._position!==t&&(this._position=t,this.domNode.style.position=this._position)}setVisibility(t){this._visibility!==t&&(this._visibility=t,this.domNode.style.visibility=this._visibility)}setColor(t){this._color!==t&&(this._color=t,this.domNode.style.color=this._color)}setBackgroundColor(t){this._backgroundColor!==t&&(this._backgroundColor=t,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(t){this._layerHint!==t&&(this._layerHint=t,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(t){this._boxShadow!==t&&(this._boxShadow=t,this.domNode.style.boxShadow=t)}setContain(t){this._contain!==t&&(this._contain=t,this.domNode.style.contain=this._contain)}setAttribute(t,e){this.domNode.setAttribute(t,e)}removeAttribute(t){this.domNode.removeAttribute(t)}appendChild(t){this.domNode.appendChild(t.domNode)}removeChild(t){this.domNode.removeChild(t.domNode)}};function ir(t){return typeof t=="number"?`${t}px`:t}function fp(t){return new Qse(t)}var uB=class{constructor(){this._hooks=new rl,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(t,e){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let n=this._onStopCallback;this._onStopCallback=null,t&&n&&n(e)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(t,e,n,s,r){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=s,this._onStopCallback=r;let i=t;try{t.setPointerCapture(e),this._hooks.add(bn(()=>{try{t.releasePointerCapture(e)}catch{}}))}catch{i=Yi(t)}this._hooks.add(bt(i,os.POINTER_MOVE,a=>{if(a.buttons!==n){this.stopMonitoring(!0);return}a.preventDefault(),this._pointerMoveCallback(a)})),this._hooks.add(bt(i,os.POINTER_UP,a=>this.stopMonitoring(!0)))}};function ere(t,e,n){let s=null,r=null;if(typeof n.value=="function"?(s="value",r=n.value,r.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof n.get=="function"&&(s="get",r=n.get),!r)throw new Error("not supported");let i=`$memoize$${e}`;n[s]=function(...a){return this.hasOwnProperty(i)||Object.defineProperty(this,i,{configurable:!1,enumerable:!1,writable:!1,value:r.apply(this,a)}),this[i]}}var qi;(t=>(t.Tap="-xterm-gesturetap",t.Change="-xterm-gesturechange",t.Start="-xterm-gesturestart",t.End="-xterm-gesturesend",t.Contextmenu="-xterm-gesturecontextmenu"))(qi||={});var $f=class Ts extends It{constructor(){super(),this.dispatched=!1,this.targets=new NO,this.ignoreTargets=new NO,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(_s.runAndSubscribe(Yse,({window:e,disposables:n})=>{n.add(bt(e.document,"touchstart",s=>this.onTouchStart(s),{passive:!1})),n.add(bt(e.document,"touchend",s=>this.onTouchEnd(e,s))),n.add(bt(e.document,"touchmove",s=>this.onTouchMove(s),{passive:!1}))},{window:Ha,disposables:this._store}))}static addTarget(e){if(!Ts.isTouchDevice())return It.None;Ts.INSTANCE||(Ts.INSTANCE=new Ts);let n=Ts.INSTANCE.targets.push(e);return bn(n)}static ignoreTarget(e){if(!Ts.isTouchDevice())return It.None;Ts.INSTANCE||(Ts.INSTANCE=new Ts);let n=Ts.INSTANCE.ignoreTargets.push(e);return bn(n)}static isTouchDevice(){return"ontouchstart"in Ha||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){let n=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let s=0,r=e.targetTouches.length;s<r;s++){let i=e.targetTouches.item(s);this.activeTouches[i.identifier]={id:i.identifier,initialTarget:i.target,initialTimeStamp:n,initialPageX:i.pageX,initialPageY:i.pageY,rollingTimestamps:[n],rollingPageX:[i.pageX],rollingPageY:[i.pageY]};let a=this.newGestureEvent(qi.Start,i.target);a.pageX=i.pageX,a.pageY=i.pageY,this.dispatchEvent(a)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e,n){let s=Date.now(),r=Object.keys(this.activeTouches).length;for(let i=0,a=n.changedTouches.length;i<a;i++){let l=n.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(l.identifier))){console.warn("move of an UNKNOWN touch",l);continue}let u=this.activeTouches[l.identifier],h=Date.now()-u.initialTimeStamp;if(h<Ts.HOLD_DELAY&&Math.abs(u.initialPageX-Cr(u.rollingPageX))<30&&Math.abs(u.initialPageY-Cr(u.rollingPageY))<30){let m=this.newGestureEvent(qi.Tap,u.initialTarget);m.pageX=Cr(u.rollingPageX),m.pageY=Cr(u.rollingPageY),this.dispatchEvent(m)}else if(h>=Ts.HOLD_DELAY&&Math.abs(u.initialPageX-Cr(u.rollingPageX))<30&&Math.abs(u.initialPageY-Cr(u.rollingPageY))<30){let m=this.newGestureEvent(qi.Contextmenu,u.initialTarget);m.pageX=Cr(u.rollingPageX),m.pageY=Cr(u.rollingPageY),this.dispatchEvent(m)}else if(r===1){let m=Cr(u.rollingPageX),p=Cr(u.rollingPageY),g=Cr(u.rollingTimestamps)-u.rollingTimestamps[0],y=m-u.rollingPageX[0],b=p-u.rollingPageY[0],_=[...this.targets].filter(w=>u.initialTarget instanceof Node&&w.contains(u.initialTarget));this.inertia(e,_,s,Math.abs(y)/g,y>0?1:-1,m,Math.abs(b)/g,b>0?1:-1,p)}this.dispatchEvent(this.newGestureEvent(qi.End,u.initialTarget)),delete this.activeTouches[l.identifier]}this.dispatched&&(n.preventDefault(),n.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,n){let s=document.createEvent("CustomEvent");return s.initEvent(e,!1,!0),s.initialTarget=n,s.tapCount=0,s}dispatchEvent(e){if(e.type===qi.Tap){let n=new Date().getTime(),s=0;n-this._lastSetTapCountTime>Ts.CLEAR_TAP_COUNT_TIME?s=1:s=2,this._lastSetTapCountTime=n,e.tapCount=s}else(e.type===qi.Change||e.type===qi.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(let s of this.ignoreTargets)if(s.contains(e.initialTarget))return;let n=[];for(let s of this.targets)if(s.contains(e.initialTarget)){let r=0,i=e.initialTarget;for(;i&&i!==s;)r++,i=i.parentElement;n.push([r,s])}n.sort((s,r)=>s[0]-r[0]);for(let[s,r]of n)r.dispatchEvent(e),this.dispatched=!0}}inertia(e,n,s,r,i,a,l,u,h){this.handle=uE(e,()=>{let m=Date.now(),p=m-s,g=0,y=0,b=!0;r+=Ts.SCROLL_FRICTION*p,l+=Ts.SCROLL_FRICTION*p,r>0&&(b=!1,g=i*r*p),l>0&&(b=!1,y=u*l*p);let _=this.newGestureEvent(qi.Change);_.translationX=g,_.translationY=y,n.forEach(w=>w.dispatchEvent(_)),b||this.inertia(e,n,m,r,i,a+g,l,u,h+y)})}onTouchMove(e){let n=Date.now();for(let s=0,r=e.changedTouches.length;s<r;s++){let i=e.changedTouches.item(s);if(!this.activeTouches.hasOwnProperty(String(i.identifier))){console.warn("end of an UNKNOWN touch",i);continue}let a=this.activeTouches[i.identifier],l=this.newGestureEvent(qi.Change,a.initialTarget);l.translationX=i.pageX-Cr(a.rollingPageX),l.translationY=i.pageY-Cr(a.rollingPageY),l.pageX=i.pageX,l.pageY=i.pageY,this.dispatchEvent(l),a.rollingPageX.length>3&&(a.rollingPageX.shift(),a.rollingPageY.shift(),a.rollingTimestamps.shift()),a.rollingPageX.push(i.pageX),a.rollingPageY.push(i.pageY),a.rollingTimestamps.push(n)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}};$f.SCROLL_FRICTION=-.005,$f.HOLD_DELAY=700,$f.CLEAR_TAP_COUNT_TIME=400,jn([ere],$f,"isTouchDevice",1);var tre=$f,hE=class extends It{onclick(t,e){this._register(bt(t,os.CLICK,n=>e(new y0(Yi(t),n))))}onmousedown(t,e){this._register(bt(t,os.MOUSE_DOWN,n=>e(new y0(Yi(t),n))))}onmouseover(t,e){this._register(bt(t,os.MOUSE_OVER,n=>e(new y0(Yi(t),n))))}onmouseleave(t,e){this._register(bt(t,os.MOUSE_LEAVE,n=>e(new y0(Yi(t),n))))}onkeydown(t,e){this._register(bt(t,os.KEY_DOWN,n=>e(new jO(n))))}onkeyup(t,e){this._register(bt(t,os.KEY_UP,n=>e(new jO(n))))}oninput(t,e){this._register(bt(t,os.INPUT,e))}onblur(t,e){this._register(bt(t,os.BLUR,e))}onfocus(t,e){this._register(bt(t,os.FOCUS,e))}onchange(t,e){this._register(bt(t,os.CHANGE,e))}ignoreGesture(t){return tre.ignoreTarget(t)}},PO=11,nre=class extends hE{constructor(t){super(),this._onActivate=t.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=t.bgWidth+"px",this.bgDomNode.style.height=t.bgHeight+"px",typeof t.top<"u"&&(this.bgDomNode.style.top="0px"),typeof t.left<"u"&&(this.bgDomNode.style.left="0px"),typeof t.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof t.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=t.className,this.domNode.style.position="absolute",this.domNode.style.width=PO+"px",this.domNode.style.height=PO+"px",typeof t.top<"u"&&(this.domNode.style.top=t.top+"px"),typeof t.left<"u"&&(this.domNode.style.left=t.left+"px"),typeof t.bottom<"u"&&(this.domNode.style.bottom=t.bottom+"px"),typeof t.right<"u"&&(this.domNode.style.right=t.right+"px"),this._pointerMoveMonitor=this._register(new uB),this._register(DO(this.bgDomNode,os.POINTER_DOWN,e=>this._arrowPointerDown(e))),this._register(DO(this.domNode,os.POINTER_DOWN,e=>this._arrowPointerDown(e))),this._pointerdownRepeatTimer=this._register(new Jse),this._pointerdownScheduleRepeatTimer=this._register(new cE)}_arrowPointerDown(t){if(!t.target||!(t.target instanceof Element))return;let e=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,Yi(t))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(e,200),this._pointerMoveMonitor.startMonitoring(t.target,t.pointerId,t.buttons,n=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),t.preventDefault()}},sre=class N2{constructor(e,n,s,r,i,a,l){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(n=n|0,s=s|0,r=r|0,i=i|0,a=a|0,l=l|0),this.rawScrollLeft=r,this.rawScrollTop=l,n<0&&(n=0),r+n>s&&(r=s-n),r<0&&(r=0),i<0&&(i=0),l+i>a&&(l=a-i),l<0&&(l=0),this.width=n,this.scrollWidth=s,this.scrollLeft=r,this.height=i,this.scrollHeight=a,this.scrollTop=l}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,n){return new N2(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,n?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,n?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new N2(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,n){let s=this.width!==e.width,r=this.scrollWidth!==e.scrollWidth,i=this.scrollLeft!==e.scrollLeft,a=this.height!==e.height,l=this.scrollHeight!==e.scrollHeight,u=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:n,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:s,scrollWidthChanged:r,scrollLeftChanged:i,heightChanged:a,scrollHeightChanged:l,scrollTopChanged:u}}},rre=class extends It{constructor(t){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new Te),this.onScroll=this._onScroll.event,this._smoothScrollDuration=t.smoothScrollDuration,this._scheduleAtNextAnimationFrame=t.scheduleAtNextAnimationFrame,this._state=new sre(t.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(t){this._smoothScrollDuration=t}validateScrollPosition(t){return this._state.withScrollPosition(t)}getScrollDimensions(){return this._state}setScrollDimensions(t,e){let n=this._state.withScrollDimensions(t,e);this._setState(n,!!this._smoothScrolling),this._smoothScrolling?.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(t){let e=this._state.withScrollPosition(t);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(e,!1)}setScrollPositionSmooth(t,e){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(t);if(this._smoothScrolling){t={scrollLeft:typeof t.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:t.scrollLeft,scrollTop:typeof t.scrollTop>"u"?this._smoothScrolling.to.scrollTop:t.scrollTop};let n=this._state.withScrollPosition(t);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let s;e?s=new $O(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):s=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=s}else{let n=this._state.withScrollPosition(t);this._smoothScrolling=$O.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;let t=this._smoothScrolling.tick(),e=this._state.withScrollPosition(t);if(this._setState(e,!0),!!this._smoothScrolling){if(t.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(t,e){let n=this._state;n.equals(t)||(this._state=t,this._onScroll.fire(this._state.createScrollEvent(n,e)))}},BO=class{constructor(t,e,n){this.scrollLeft=t,this.scrollTop=e,this.isDone=n}};function kw(t,e){let n=e-t;return function(s){return t+n*ore(s)}}function ire(t,e,n){return function(s){return s<n?t(s/n):e((s-n)/(1-n))}}var $O=class E2{constructor(e,n,s,r){this.from=e,this.to=n,this.duration=r,this.startTime=s,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,n,s){if(Math.abs(e-n)>2.5*s){let r,i;return e<n?(r=e+.75*s,i=n-.75*s):(r=e-.75*s,i=n+.75*s),ire(kw(e,r),kw(i,n),.33)}return kw(e,n)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){let n=(e-this.startTime)/this.duration;if(n<1){let s=this.scrollLeft(n),r=this.scrollTop(n);return new BO(s,r,!1)}return new BO(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,n,s){return E2.start(e,n,s)}static start(e,n,s){s=s+10;let r=Date.now()-10;return new E2(e,n,r,s)}};function are(t){return Math.pow(t,3)}function ore(t){return 1-are(1-t)}var lre=class extends It{constructor(t,e,n){super(),this._visibility=t,this._visibleClassName=e,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new cE)}setVisibility(t){this._visibility!==t&&(this._visibility=t,this._updateShouldBeVisible())}setShouldBeVisible(t){this._rawShouldBeVisible=t,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){let t=this._applyVisibilitySetting();this._shouldBeVisible!==t&&(this._shouldBeVisible=t,this.ensureVisibility())}setIsNeeded(t){this._isNeeded!==t&&(this._isNeeded=t,this.ensureVisibility())}setDomNode(t){this._domNode=t,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode?.setClassName(this._visibleClassName)},0))}_hide(t){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode?.setClassName(this._invisibleClassName+(t?" fade":"")))}},cre=140,hB=class extends hE{constructor(t){super(),this._lazyRender=t.lazyRender,this._host=t.host,this._scrollable=t.scrollable,this._scrollByPage=t.scrollByPage,this._scrollbarState=t.scrollbarState,this._visibilityController=this._register(new lre(t.visibility,"visible scrollbar "+t.extraScrollbarClassName,"invisible scrollbar "+t.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new uB),this._shouldRender=!0,this.domNode=fp(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(bt(this.domNode.domNode,os.POINTER_DOWN,e=>this._domNodePointerDown(e)))}_createArrow(t){let e=this._register(new nre(t));this.domNode.domNode.appendChild(e.bgDomNode),this.domNode.domNode.appendChild(e.domNode)}_createSlider(t,e,n,s){this.slider=fp(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(t),this.slider.setLeft(e),typeof n=="number"&&this.slider.setWidth(n),typeof s=="number"&&this.slider.setHeight(s),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(bt(this.slider.domNode,os.POINTER_DOWN,r=>{r.button===0&&(r.preventDefault(),this._sliderPointerDown(r))})),this.onclick(this.slider.domNode,r=>{r.leftButton&&r.stopPropagation()})}_onElementSize(t){return this._scrollbarState.setVisibleSize(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(t){return this._scrollbarState.setScrollSize(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(t){return this._scrollbarState.setScrollPosition(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(t){t.target===this.domNode.domNode&&this._onPointerDown(t)}delegatePointerDown(t){let e=this.domNode.domNode.getClientRects()[0].top,n=e+this._scrollbarState.getSliderPosition(),s=e+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),r=this._sliderPointerPosition(t);n<=r&&r<=s?t.button===0&&(t.preventDefault(),this._sliderPointerDown(t)):this._onPointerDown(t)}_onPointerDown(t){let e,n;if(t.target===this.domNode.domNode&&typeof t.offsetX=="number"&&typeof t.offsetY=="number")e=t.offsetX,n=t.offsetY;else{let r=Xse(this.domNode.domNode);e=t.pageX-r.left,n=t.pageY-r.top}let s=this._pointerDownRelativePosition(e,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(s):this._scrollbarState.getDesiredScrollPositionFromOffset(s)),t.button===0&&(t.preventDefault(),this._sliderPointerDown(t))}_sliderPointerDown(t){if(!t.target||!(t.target instanceof Element))return;let e=this._sliderPointerPosition(t),n=this._sliderOrthogonalPointerPosition(t),s=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(t.target,t.pointerId,t.buttons,r=>{let i=this._sliderOrthogonalPointerPosition(r),a=Math.abs(i-n);if(aB&&a>cre){this._setDesiredScrollPositionNow(s.getScrollPosition());return}let l=this._sliderPointerPosition(r)-e;this._setDesiredScrollPositionNow(s.getDesiredScrollPositionFromDelta(l))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(t){let e={};this.writeScrollPosition(e,t),this._scrollable.setScrollPositionNow(e)}updateScrollbarSize(t){this._updateScrollbarSize(t),this._scrollbarState.setScrollbarSize(t),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}},dB=class A2{constructor(e,n,s,r,i,a){this._scrollbarSize=Math.round(n),this._oppositeScrollbarSize=Math.round(s),this._arrowSize=Math.round(e),this._visibleSize=r,this._scrollSize=i,this._scrollPosition=a,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new A2(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){let n=Math.round(e);return this._visibleSize!==n?(this._visibleSize=n,this._refreshComputedValues(),!0):!1}setScrollSize(e){let n=Math.round(e);return this._scrollSize!==n?(this._scrollSize=n,this._refreshComputedValues(),!0):!1}setScrollPosition(e){let n=Math.round(e);return this._scrollPosition!==n?(this._scrollPosition=n,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,n,s,r,i){let a=Math.max(0,s-e),l=Math.max(0,a-2*n),u=r>0&&r>s;if(!u)return{computedAvailableSize:Math.round(a),computedIsNeeded:u,computedSliderSize:Math.round(l),computedSliderRatio:0,computedSliderPosition:0};let h=Math.round(Math.max(20,Math.floor(s*l/r))),m=(l-h)/(r-s),p=i*m;return{computedAvailableSize:Math.round(a),computedIsNeeded:u,computedSliderSize:Math.round(h),computedSliderRatio:m,computedSliderPosition:Math.round(p)}}_refreshComputedValues(){let e=A2._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;let n=e-this._arrowSize-this._computedSliderSize/2;return Math.round(n/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;let n=e-this._arrowSize,s=this._scrollPosition;return n<this._computedSliderPosition?s-=this._visibleSize:s+=this._visibleSize,s}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;let n=this._computedSliderPosition+e;return Math.round(n/this._computedSliderRatio)}},ure=class extends hB{constructor(t,e,n){let s=t.getScrollDimensions(),r=t.getCurrentScrollPosition();if(super({lazyRender:e.lazyRender,host:n,scrollbarState:new dB(e.horizontalHasArrows?e.arrowSize:0,e.horizontal===2?0:e.horizontalScrollbarSize,e.vertical===2?0:e.verticalScrollbarSize,s.width,s.scrollWidth,r.scrollLeft),visibility:e.horizontal,extraScrollbarClassName:"horizontal",scrollable:t,scrollByPage:e.scrollByPage}),e.horizontalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(Math.floor((e.horizontalScrollbarSize-e.horizontalSliderSize)/2),0,void 0,e.horizontalSliderSize)}_updateSlider(t,e){this.slider.setWidth(t),this.slider.setLeft(e)}_renderDomNode(t,e){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(t){return this._shouldRender=this._onElementScrollSize(t.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(t.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(t.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(t,e){return t}_sliderPointerPosition(t){return t.pageX}_sliderOrthogonalPointerPosition(t){return t.pageY}_updateScrollbarSize(t){this.slider.setHeight(t)}writeScrollPosition(t,e){t.scrollLeft=e}updateOptions(t){this.updateScrollbarSize(t.horizontal===2?0:t.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(t.vertical===2?0:t.verticalScrollbarSize),this._visibilityController.setVisibility(t.horizontal),this._scrollByPage=t.scrollByPage}},hre=class extends hB{constructor(t,e,n){let s=t.getScrollDimensions(),r=t.getCurrentScrollPosition();if(super({lazyRender:e.lazyRender,host:n,scrollbarState:new dB(e.verticalHasArrows?e.arrowSize:0,e.vertical===2?0:e.verticalScrollbarSize,0,s.height,s.scrollHeight,r.scrollTop),visibility:e.vertical,extraScrollbarClassName:"vertical",scrollable:t,scrollByPage:e.scrollByPage}),e.verticalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(0,Math.floor((e.verticalScrollbarSize-e.verticalSliderSize)/2),e.verticalSliderSize,void 0)}_updateSlider(t,e){this.slider.setHeight(t),this.slider.setTop(e)}_renderDomNode(t,e){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(t){return this._shouldRender=this._onElementScrollSize(t.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(t.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(t.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(t,e){return e}_sliderPointerPosition(t){return t.pageY}_sliderOrthogonalPointerPosition(t){return t.pageX}_updateScrollbarSize(t){this.slider.setWidth(t)}writeScrollPosition(t,e){t.scrollTop=e}updateOptions(t){this.updateScrollbarSize(t.vertical===2?0:t.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(t.vertical),this._scrollByPage=t.scrollByPage}},dre=500,zO=50,fre=class{constructor(t,e,n){this.timestamp=t,this.deltaX=e,this.deltaY=n,this.score=0}},R2=class{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,n=0,s=1,r=this._rear;do{let i=r===this._front?e:Math.pow(2,-s);if(e-=i,n+=this._memory[r].score*i,r===this._front)break;r=(this._capacity+r-1)%this._capacity,s++}while(!0);return n<=.5}acceptStandardWheelEvent(e){if(oE){let n=Yi(e.browserEvent),s=kse(n);this.accept(Date.now(),e.deltaX*s,e.deltaY*s)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,n,s){let r=null,i=new fre(e,n,s);this._front===-1&&this._rear===-1?(this._memory[0]=i,this._front=0,this._rear=0):(r=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=i),i.score=this._computeScore(i,r)}_computeScore(e,n){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let s=.5;if((!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(s+=.25),n){let r=Math.abs(e.deltaX),i=Math.abs(e.deltaY),a=Math.abs(n.deltaX),l=Math.abs(n.deltaY),u=Math.max(Math.min(r,a),1),h=Math.max(Math.min(i,l),1),m=Math.max(r,a),p=Math.max(i,l);m%u===0&&p%h===0&&(s-=.5)}return Math.min(Math.max(s,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}};R2.INSTANCE=new R2;var pre=R2,mre=class extends hE{constructor(t,e,n){super(),this._onScroll=this._register(new Te),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new Te),this.onWillScroll=this._onWillScroll.event,this._options=yre(e),this._scrollable=n,this._register(this._scrollable.onScroll(r=>{this._onWillScroll.fire(r),this._onDidScroll(r),this._onScroll.fire(r)}));let s={onMouseWheel:r=>this._onMouseWheel(r),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new hre(this._scrollable,this._options,s)),this._horizontalScrollbar=this._register(new ure(this._scrollable,this._options,s)),this._domNode=document.createElement("div"),this._domNode.className="xterm-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.appendChild(t),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=fp(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=fp(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=fp(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,r=>this._onMouseOver(r)),this.onmouseleave(this._listenOnDomNode,r=>this._onMouseLeave(r)),this._hideTimeout=this._register(new cE),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}get options(){return this._options}dispose(){this._mouseWheelToDispose=Ec(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(t){this._verticalScrollbar.delegatePointerDown(t)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(t){this._scrollable.setScrollDimensions(t,!1)}updateClassName(t){this._options.className=t,ta&&(this._options.className+=" mac"),this._domNode.className="xterm-scrollable-element "+this._options.className}updateOptions(t){typeof t.handleMouseWheel<"u"&&(this._options.handleMouseWheel=t.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof t.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=t.mouseWheelScrollSensitivity),typeof t.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=t.fastScrollSensitivity),typeof t.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=t.scrollPredominantAxis),typeof t.horizontal<"u"&&(this._options.horizontal=t.horizontal),typeof t.vertical<"u"&&(this._options.vertical=t.vertical),typeof t.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=t.horizontalScrollbarSize),typeof t.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=t.verticalScrollbarSize),typeof t.scrollByPage<"u"&&(this._options.scrollByPage=t.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}setRevealOnScroll(t){this._revealOnScroll=t}delegateScrollFromMouseWheelEvent(t){this._onMouseWheel(new MO(t))}_setListeningToMouseWheel(t){if(this._mouseWheelToDispose.length>0!==t&&(this._mouseWheelToDispose=Ec(this._mouseWheelToDispose),t)){let e=n=>{this._onMouseWheel(new MO(n))};this._mouseWheelToDispose.push(bt(this._listenOnDomNode,os.MOUSE_WHEEL,e,{passive:!1}))}}_onMouseWheel(t){if(t.browserEvent?.defaultPrevented)return;let e=pre.INSTANCE;e.acceptStandardWheelEvent(t);let n=!1;if(t.deltaY||t.deltaX){let r=t.deltaY*this._options.mouseWheelScrollSensitivity,i=t.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&i+r===0?i=r=0:Math.abs(r)>=Math.abs(i)?i=0:r=0),this._options.flipAxes&&([r,i]=[i,r]);let a=!ta&&t.browserEvent&&t.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!i&&(i=r,r=0),t.browserEvent&&t.browserEvent.altKey&&(i=i*this._options.fastScrollSensitivity,r=r*this._options.fastScrollSensitivity);let l=this._scrollable.getFutureScrollPosition(),u={};if(r){let h=zO*r,m=l.scrollTop-(h<0?Math.floor(h):Math.ceil(h));this._verticalScrollbar.writeScrollPosition(u,m)}if(i){let h=zO*i,m=l.scrollLeft-(h<0?Math.floor(h):Math.ceil(h));this._horizontalScrollbar.writeScrollPosition(u,m)}u=this._scrollable.validateScrollPosition(u),(l.scrollLeft!==u.scrollLeft||l.scrollTop!==u.scrollTop)&&(this._options.mouseWheelSmoothScroll&&e.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(u):this._scrollable.setScrollPositionNow(u),n=!0)}let s=n;!s&&this._options.alwaysConsumeMouseWheel&&(s=!0),!s&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(s=!0),s&&(t.preventDefault(),t.stopPropagation())}_onDidScroll(t){this._shouldRender=this._horizontalScrollbar.onDidScroll(t)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(t)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let t=this._scrollable.getCurrentScrollPosition(),e=t.scrollTop>0,n=t.scrollLeft>0,s=n?" left":"",r=e?" top":"",i=n||e?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${s}`),this._topShadowDomNode.setClassName(`shadow${r}`),this._topLeftShadowDomNode.setClassName(`shadow${i}${r}${s}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(t){this._mouseIsOver=!1,this._hide()}_onMouseOver(t){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),dre)}},gre=class extends mre{constructor(t,e,n){super(t,e,n)}setScrollPosition(t){t.reuseAnimation?this._scrollable.setScrollPositionSmooth(t,t.reuseAnimation):this._scrollable.setScrollPositionNow(t)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}};function yre(t){let e={lazyRender:typeof t.lazyRender<"u"?t.lazyRender:!1,className:typeof t.className<"u"?t.className:"",useShadows:typeof t.useShadows<"u"?t.useShadows:!0,handleMouseWheel:typeof t.handleMouseWheel<"u"?t.handleMouseWheel:!0,flipAxes:typeof t.flipAxes<"u"?t.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof t.consumeMouseWheelIfScrollbarIsNeeded<"u"?t.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof t.alwaysConsumeMouseWheel<"u"?t.alwaysConsumeMouseWheel:!1,scrollYToX:typeof t.scrollYToX<"u"?t.scrollYToX:!1,mouseWheelScrollSensitivity:typeof t.mouseWheelScrollSensitivity<"u"?t.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof t.fastScrollSensitivity<"u"?t.fastScrollSensitivity:5,scrollPredominantAxis:typeof t.scrollPredominantAxis<"u"?t.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof t.mouseWheelSmoothScroll<"u"?t.mouseWheelSmoothScroll:!0,arrowSize:typeof t.arrowSize<"u"?t.arrowSize:11,listenOnDomNode:typeof t.listenOnDomNode<"u"?t.listenOnDomNode:null,horizontal:typeof t.horizontal<"u"?t.horizontal:1,horizontalScrollbarSize:typeof t.horizontalScrollbarSize<"u"?t.horizontalScrollbarSize:10,horizontalSliderSize:typeof t.horizontalSliderSize<"u"?t.horizontalSliderSize:0,horizontalHasArrows:typeof t.horizontalHasArrows<"u"?t.horizontalHasArrows:!1,vertical:typeof t.vertical<"u"?t.vertical:1,verticalScrollbarSize:typeof t.verticalScrollbarSize<"u"?t.verticalScrollbarSize:10,verticalHasArrows:typeof t.verticalHasArrows<"u"?t.verticalHasArrows:!1,verticalSliderSize:typeof t.verticalSliderSize<"u"?t.verticalSliderSize:0,scrollByPage:typeof t.scrollByPage<"u"?t.scrollByPage:!1};return e.horizontalSliderSize=typeof t.horizontalSliderSize<"u"?t.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof t.verticalSliderSize<"u"?t.verticalSliderSize:e.verticalScrollbarSize,ta&&(e.className+=" mac"),e}var T2=class extends It{constructor(t,e,n,s,r,i,a,l){super(),this._bufferService=n,this._optionsService=a,this._renderService=l,this._onRequestScrollLines=this._register(new Te),this.onRequestScrollLines=this._onRequestScrollLines.event,this._isSyncing=!1,this._isHandlingScroll=!1,this._suppressOnScrollHandler=!1;let u=this._register(new rre({forceIntegerValues:!1,smoothScrollDuration:this._optionsService.rawOptions.smoothScrollDuration,scheduleAtNextAnimationFrame:h=>uE(s.window,h)}));this._register(this._optionsService.onSpecificOptionChange("smoothScrollDuration",()=>{u.setSmoothScrollDuration(this._optionsService.rawOptions.smoothScrollDuration)})),this._scrollableElement=this._register(new gre(e,{vertical:1,horizontal:2,useShadows:!1,mouseWheelSmoothScroll:!0,...this._getChangeOptions()},u)),this._register(this._optionsService.onMultipleOptionChange(["scrollSensitivity","fastScrollSensitivity","overviewRuler"],()=>this._scrollableElement.updateOptions(this._getChangeOptions()))),this._register(r.onProtocolChange(h=>{this._scrollableElement.updateOptions({handleMouseWheel:!(h&16)})})),this._scrollableElement.setScrollDimensions({height:0,scrollHeight:0}),this._register(_s.runAndSubscribe(i.onChangeColors,()=>{this._scrollableElement.getDomNode().style.backgroundColor=i.colors.background.css})),t.appendChild(this._scrollableElement.getDomNode()),this._register(bn(()=>this._scrollableElement.getDomNode().remove())),this._styleElement=s.mainDocument.createElement("style"),e.appendChild(this._styleElement),this._register(bn(()=>this._styleElement.remove())),this._register(_s.runAndSubscribe(i.onChangeColors,()=>{this._styleElement.textContent=[".xterm .xterm-scrollable-element > .scrollbar > .slider {",`  background: ${i.colors.scrollbarSliderBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider:hover {",`  background: ${i.colors.scrollbarSliderHoverBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider.active {",`  background: ${i.colors.scrollbarSliderActiveBackground.css};`,"}"].join(`
`)})),this._register(this._bufferService.onResize(()=>this.queueSync())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._latestYDisp=void 0,this.queueSync()})),this._register(this._bufferService.onScroll(()=>this._sync())),this._register(this._scrollableElement.onScroll(h=>this._handleScroll(h)))}scrollLines(t){let e=this._scrollableElement.getScrollPosition();this._scrollableElement.setScrollPosition({reuseAnimation:!0,scrollTop:e.scrollTop+t*this._renderService.dimensions.css.cell.height})}scrollToLine(t,e){e&&(this._latestYDisp=t),this._scrollableElement.setScrollPosition({reuseAnimation:!e,scrollTop:t*this._renderService.dimensions.css.cell.height})}_getChangeOptions(){return{mouseWheelScrollSensitivity:this._optionsService.rawOptions.scrollSensitivity,fastScrollSensitivity:this._optionsService.rawOptions.fastScrollSensitivity,verticalScrollbarSize:this._optionsService.rawOptions.overviewRuler?.width||14}}queueSync(t){t!==void 0&&(this._latestYDisp=t),this._queuedAnimationFrame===void 0&&(this._queuedAnimationFrame=this._renderService.addRefreshCallback(()=>{this._queuedAnimationFrame=void 0,this._sync(this._latestYDisp)}))}_sync(t=this._bufferService.buffer.ydisp){!this._renderService||this._isSyncing||(this._isSyncing=!0,this._suppressOnScrollHandler=!0,this._scrollableElement.setScrollDimensions({height:this._renderService.dimensions.css.canvas.height,scrollHeight:this._renderService.dimensions.css.cell.height*this._bufferService.buffer.lines.length}),this._suppressOnScrollHandler=!1,t!==this._latestYDisp&&this._scrollableElement.setScrollPosition({scrollTop:t*this._renderService.dimensions.css.cell.height}),this._isSyncing=!1)}_handleScroll(t){if(!this._renderService||this._isHandlingScroll||this._suppressOnScrollHandler)return;this._isHandlingScroll=!0;let e=Math.round(t.scrollTop/this._renderService.dimensions.css.cell.height),n=e-this._bufferService.buffer.ydisp;n!==0&&(this._latestYDisp=e,this._onRequestScrollLines.fire(n)),this._isHandlingScroll=!1}};T2=jn([qe(2,Zs),qe(3,oo),qe(4,KP),qe(5,Gh),qe(6,Js),qe(7,lo)],T2);var j2=class extends It{constructor(t,e,n,s,r){super(),this._screenElement=t,this._bufferService=e,this._coreBrowserService=n,this._decorationService=s,this._renderService=r,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this._register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this._register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this._register(this._decorationService.onDecorationRemoved(i=>this._removeDecoration(i))),this._register(bn(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let t of this._decorationService.decorations)this._renderDecoration(t);this._dimensionsChanged=!1}_renderDecoration(t){this._refreshStyle(t),this._dimensionsChanged&&this._refreshXPosition(t)}_createElement(t){let e=this._coreBrowserService.mainDocument.createElement("div");e.classList.add("xterm-decoration"),e.classList.toggle("xterm-decoration-top-layer",t?.options?.layer==="top"),e.style.width=`${Math.round((t.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,e.style.height=`${(t.options.height||1)*this._renderService.dimensions.css.cell.height}px`,e.style.top=`${(t.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height}px`,e.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let n=t.options.x??0;return n&&n>this._bufferService.cols&&(e.style.display="none"),this._refreshXPosition(t,e),e}_refreshStyle(t){let e=t.marker.line-this._bufferService.buffers.active.ydisp;if(e<0||e>=this._bufferService.rows)t.element&&(t.element.style.display="none",t.onRenderEmitter.fire(t.element));else{let n=this._decorationElements.get(t);n||(n=this._createElement(t),t.element=n,this._decorationElements.set(t,n),this._container.appendChild(n),t.onDispose(()=>{this._decorationElements.delete(t),n.remove()})),n.style.display=this._altBufferIsActive?"none":"block",this._altBufferIsActive||(n.style.width=`${Math.round((t.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,n.style.height=`${(t.options.height||1)*this._renderService.dimensions.css.cell.height}px`,n.style.top=`${e*this._renderService.dimensions.css.cell.height}px`,n.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`),t.onRenderEmitter.fire(n)}}_refreshXPosition(t,e=t.element){if(!e)return;let n=t.options.x??0;(t.options.anchor||"left")==="right"?e.style.right=n?`${n*this._renderService.dimensions.css.cell.width}px`:"":e.style.left=n?`${n*this._renderService.dimensions.css.cell.width}px`:""}_removeDecoration(t){this._decorationElements.get(t)?.remove(),this._decorationElements.delete(t),t.dispose()}};j2=jn([qe(1,Zs),qe(2,oo),qe(3,Nm),qe(4,lo)],j2);var vre=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(t){if(t.options.overviewRulerOptions){for(let e of this._zones)if(e.color===t.options.overviewRulerOptions.color&&e.position===t.options.overviewRulerOptions.position){if(this._lineIntersectsZone(e,t.marker.line))return;if(this._lineAdjacentToZone(e,t.marker.line,t.options.overviewRulerOptions.position)){this._addLineToZone(e,t.marker.line);return}}if(this._zonePoolIndex<this._zonePool.length){this._zonePool[this._zonePoolIndex].color=t.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=t.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=t.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=t.marker.line,this._zones.push(this._zonePool[this._zonePoolIndex++]);return}this._zones.push({color:t.options.overviewRulerOptions.color,position:t.options.overviewRulerOptions.position,startBufferLine:t.marker.line,endBufferLine:t.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(t){this._linePadding=t}_lineIntersectsZone(t,e){return e>=t.startBufferLine&&e<=t.endBufferLine}_lineAdjacentToZone(t,e,n){return e>=t.startBufferLine-this._linePadding[n||"full"]&&e<=t.endBufferLine+this._linePadding[n||"full"]}_addLineToZone(t,e){t.startBufferLine=Math.min(t.startBufferLine,e),t.endBufferLine=Math.max(t.endBufferLine,e)}},Ui={full:0,left:0,center:0,right:0},Do={full:0,left:0,center:0,right:0},nf={full:0,left:0,center:0,right:0},_v=class extends It{constructor(t,e,n,s,r,i,a,l){super(),this._viewportElement=t,this._screenElement=e,this._bufferService=n,this._decorationService=s,this._renderService=r,this._optionsService=i,this._themeService=a,this._coreBrowserService=l,this._colorZoneStore=new vre,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement),this._register(bn(()=>this._canvas?.remove()));let u=this._canvas.getContext("2d");if(u)this._ctx=u;else throw new Error("Ctx cannot be null");this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this._register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0))),this._register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this._register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})),this._register(this._renderService.onRender(()=>{(!this._containerHeight||this._containerHeight!==this._screenElement.clientHeight)&&(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._register(this._optionsService.onSpecificOptionChange("overviewRuler",()=>this._queueRefresh(!0))),this._register(this._themeService.onChangeColors(()=>this._queueRefresh())),this._queueRefresh(!0)}get _width(){return this._optionsService.options.overviewRuler?.width||0}_refreshDrawConstants(){let t=Math.floor((this._canvas.width-1)/3),e=Math.ceil((this._canvas.width-1)/3);Do.full=this._canvas.width,Do.left=t,Do.center=e,Do.right=t,this._refreshDrawHeightConstants(),nf.full=1,nf.left=1,nf.center=1+Do.left,nf.right=1+Do.left+Do.center}_refreshDrawHeightConstants(){Ui.full=Math.round(2*this._coreBrowserService.dpr);let t=this._canvas.height/this._bufferService.buffer.lines.length,e=Math.round(Math.max(Math.min(t,12),6)*this._coreBrowserService.dpr);Ui.left=e,Ui.center=e,Ui.right=e}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Ui.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Ui.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Ui.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Ui.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let e of this._decorationService.decorations)this._colorZoneStore.addDecoration(e);this._ctx.lineWidth=1,this._renderRulerOutline();let t=this._colorZoneStore.zones;for(let e of t)e.position!=="full"&&this._renderColorZone(e);for(let e of t)e.position==="full"&&this._renderColorZone(e);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderRulerOutline(){this._ctx.fillStyle=this._themeService.colors.overviewRulerBorder.css,this._ctx.fillRect(0,0,1,this._canvas.height),this._optionsService.rawOptions.overviewRuler.showTopBorder&&this._ctx.fillRect(1,0,this._canvas.width-1,1),this._optionsService.rawOptions.overviewRuler.showBottomBorder&&this._ctx.fillRect(1,this._canvas.height-1,this._canvas.width-1,this._canvas.height)}_renderColorZone(t){this._ctx.fillStyle=t.color,this._ctx.fillRect(nf[t.position||"full"],Math.round((this._canvas.height-1)*(t.startBufferLine/this._bufferService.buffers.active.lines.length)-Ui[t.position||"full"]/2),Do[t.position||"full"],Math.round((this._canvas.height-1)*((t.endBufferLine-t.startBufferLine)/this._bufferService.buffers.active.lines.length)+Ui[t.position||"full"]))}_queueRefresh(t,e){this._shouldUpdateDimensions=t||this._shouldUpdateDimensions,this._shouldUpdateAnchor=e||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};_v=jn([qe(2,Zs),qe(3,Nm),qe(4,lo),qe(5,Js),qe(6,Gh),qe(7,oo)],_v);var ve;(t=>(t.NUL="\0",t.SOH="",t.STX="",t.ETX="",t.EOT="",t.ENQ="",t.ACK="",t.BEL="\x07",t.BS="\b",t.HT="	",t.LF=`
`,t.VT="\v",t.FF="\f",t.CR="\r",t.SO="",t.SI="",t.DLE="",t.DC1="",t.DC2="",t.DC3="",t.DC4="",t.NAK="",t.SYN="",t.ETB="",t.CAN="",t.EM="",t.SUB="",t.ESC="\x1B",t.FS="",t.GS="",t.RS="",t.US="",t.SP=" ",t.DEL=""))(ve||={});var ey;(t=>(t.PAD="",t.HOP="",t.BPH="",t.NBH="",t.IND="",t.NEL="",t.SSA="",t.ESA="",t.HTS="",t.HTJ="",t.VTS="",t.PLD="",t.PLU="",t.RI="",t.SS2="",t.SS3="",t.DCS="",t.PU1="",t.PU2="",t.STS="",t.CCH="",t.MW="",t.SPA="",t.EPA="",t.SOS="",t.SGCI="",t.SCI="",t.CSI="",t.ST="",t.OSC="",t.PM="",t.APC=""))(ey||={});var fB;(t=>t.ST=`${ve.ESC}\\`)(fB||={});var O2=class{constructor(t,e,n,s,r,i){this._textarea=t,this._compositionView=e,this._bufferService=n,this._optionsService=s,this._coreService=r,this._renderService=i,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}get isComposing(){return this._isComposing}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(t){this._compositionView.textContent=t.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(t){if(this._isComposing||this._isSendingComposition){if(t.keyCode===20||t.keyCode===229||t.keyCode===16||t.keyCode===17||t.keyCode===18)return!1;this._finalizeComposition(!1)}return t.keyCode===229?(this._handleAnyTextareaChanges(),!1):!0}_finalizeComposition(t){if(this._compositionView.classList.remove("active"),this._isComposing=!1,t){let e={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){this._isSendingComposition=!1;let n;e.start+=this._dataAlreadySent.length,this._isComposing?n=this._textarea.value.substring(e.start,this._compositionPosition.start):n=this._textarea.value.substring(e.start),n.length>0&&this._coreService.triggerDataEvent(n,!0)}},0)}else{this._isSendingComposition=!1;let e=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(e,!0)}}_handleAnyTextareaChanges(){let t=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let e=this._textarea.value,n=e.replace(t,"");this._dataAlreadySent=n,e.length>t.length?this._coreService.triggerDataEvent(n,!0):e.length<t.length?this._coreService.triggerDataEvent(`${ve.DEL}`,!0):e.length===t.length&&e!==t&&this._coreService.triggerDataEvent(e,!0)}},0)}updateCompositionElements(t){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let e=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),n=this._renderService.dimensions.css.cell.height,s=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,r=e*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=r+"px",this._compositionView.style.top=s+"px",this._compositionView.style.height=n+"px",this._compositionView.style.lineHeight=n+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let i=this._compositionView.getBoundingClientRect();this._textarea.style.left=r+"px",this._textarea.style.top=s+"px",this._textarea.style.width=Math.max(i.width,1)+"px",this._textarea.style.height=Math.max(i.height,1)+"px",this._textarea.style.lineHeight=i.height+"px"}t||setTimeout(()=>this.updateCompositionElements(!0),0)}}};O2=jn([qe(2,Zs),qe(3,Js),qe(4,Pc),qe(5,lo)],O2);var ls=0,cs=0,us=0,Rn=0,FO={css:"#00000000",rgba:0},Kn;(t=>{function e(r,i,a,l){return l!==void 0?`#${Ll(r)}${Ll(i)}${Ll(a)}${Ll(l)}`:`#${Ll(r)}${Ll(i)}${Ll(a)}`}t.toCss=e;function n(r,i,a,l=255){return(r<<24|i<<16|a<<8|l)>>>0}t.toRgba=n;function s(r,i,a,l){return{css:t.toCss(r,i,a,l),rgba:t.toRgba(r,i,a,l)}}t.toColor=s})(Kn||={});var mn;(t=>{function e(u,h){if(Rn=(h.rgba&255)/255,Rn===1)return{css:h.css,rgba:h.rgba};let m=h.rgba>>24&255,p=h.rgba>>16&255,g=h.rgba>>8&255,y=u.rgba>>24&255,b=u.rgba>>16&255,_=u.rgba>>8&255;ls=y+Math.round((m-y)*Rn),cs=b+Math.round((p-b)*Rn),us=_+Math.round((g-_)*Rn);let w=Kn.toCss(ls,cs,us),k=Kn.toRgba(ls,cs,us);return{css:w,rgba:k}}t.blend=e;function n(u){return(u.rgba&255)===255}t.isOpaque=n;function s(u,h,m){let p=ty.ensureContrastRatio(u.rgba,h.rgba,m);if(p)return Kn.toColor(p>>24&255,p>>16&255,p>>8&255)}t.ensureContrastRatio=s;function r(u){let h=(u.rgba|255)>>>0;return[ls,cs,us]=ty.toChannels(h),{css:Kn.toCss(ls,cs,us),rgba:h}}t.opaque=r;function i(u,h){return Rn=Math.round(h*255),[ls,cs,us]=ty.toChannels(u.rgba),{css:Kn.toCss(ls,cs,us,Rn),rgba:Kn.toRgba(ls,cs,us,Rn)}}t.opacity=i;function a(u,h){return Rn=u.rgba&255,i(u,Rn*h/255)}t.multiplyOpacity=a;function l(u){return[u.rgba>>24&255,u.rgba>>16&255,u.rgba>>8&255]}t.toColorRGB=l})(mn||={});var kn;(t=>{let e,n;try{let r=document.createElement("canvas");r.width=1,r.height=1;let i=r.getContext("2d",{willReadFrequently:!0});i&&(e=i,e.globalCompositeOperation="copy",n=e.createLinearGradient(0,0,1,1))}catch{}function s(r){if(r.match(/#[\da-f]{3,8}/i))switch(r.length){case 4:return ls=parseInt(r.slice(1,2).repeat(2),16),cs=parseInt(r.slice(2,3).repeat(2),16),us=parseInt(r.slice(3,4).repeat(2),16),Kn.toColor(ls,cs,us);case 5:return ls=parseInt(r.slice(1,2).repeat(2),16),cs=parseInt(r.slice(2,3).repeat(2),16),us=parseInt(r.slice(3,4).repeat(2),16),Rn=parseInt(r.slice(4,5).repeat(2),16),Kn.toColor(ls,cs,us,Rn);case 7:return{css:r,rgba:(parseInt(r.slice(1),16)<<8|255)>>>0};case 9:return{css:r,rgba:parseInt(r.slice(1),16)>>>0}}let i=r.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(i)return ls=parseInt(i[1]),cs=parseInt(i[2]),us=parseInt(i[3]),Rn=Math.round((i[5]===void 0?1:parseFloat(i[5]))*255),Kn.toColor(ls,cs,us,Rn);if(!e||!n)throw new Error("css.toColor: Unsupported css format");if(e.fillStyle=n,e.fillStyle=r,typeof e.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(e.fillRect(0,0,1,1),[ls,cs,us,Rn]=e.getImageData(0,0,1,1).data,Rn!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:Kn.toRgba(ls,cs,us,Rn),css:r}}t.toColor=s})(kn||={});var $s;(t=>{function e(s){return n(s>>16&255,s>>8&255,s&255)}t.relativeLuminance=e;function n(s,r,i){let a=s/255,l=r/255,u=i/255,h=a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4),m=l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4),p=u<=.03928?u/12.92:Math.pow((u+.055)/1.055,2.4);return h*.2126+m*.7152+p*.0722}t.relativeLuminance2=n})($s||={});var ty;(t=>{function e(a,l){if(Rn=(l&255)/255,Rn===1)return l;let u=l>>24&255,h=l>>16&255,m=l>>8&255,p=a>>24&255,g=a>>16&255,y=a>>8&255;return ls=p+Math.round((u-p)*Rn),cs=g+Math.round((h-g)*Rn),us=y+Math.round((m-y)*Rn),Kn.toRgba(ls,cs,us)}t.blend=e;function n(a,l,u){let h=$s.relativeLuminance(a>>8),m=$s.relativeLuminance(l>>8);if(Da(h,m)<u){if(m<h){let y=s(a,l,u),b=Da(h,$s.relativeLuminance(y>>8));if(b<u){let _=r(a,l,u),w=Da(h,$s.relativeLuminance(_>>8));return b>w?y:_}return y}let p=r(a,l,u),g=Da(h,$s.relativeLuminance(p>>8));if(g<u){let y=s(a,l,u),b=Da(h,$s.relativeLuminance(y>>8));return g>b?p:y}return p}}t.ensureContrastRatio=n;function s(a,l,u){let h=a>>24&255,m=a>>16&255,p=a>>8&255,g=l>>24&255,y=l>>16&255,b=l>>8&255,_=Da($s.relativeLuminance2(g,y,b),$s.relativeLuminance2(h,m,p));for(;_<u&&(g>0||y>0||b>0);)g-=Math.max(0,Math.ceil(g*.1)),y-=Math.max(0,Math.ceil(y*.1)),b-=Math.max(0,Math.ceil(b*.1)),_=Da($s.relativeLuminance2(g,y,b),$s.relativeLuminance2(h,m,p));return(g<<24|y<<16|b<<8|255)>>>0}t.reduceLuminance=s;function r(a,l,u){let h=a>>24&255,m=a>>16&255,p=a>>8&255,g=l>>24&255,y=l>>16&255,b=l>>8&255,_=Da($s.relativeLuminance2(g,y,b),$s.relativeLuminance2(h,m,p));for(;_<u&&(g<255||y<255||b<255);)g=Math.min(255,g+Math.ceil((255-g)*.1)),y=Math.min(255,y+Math.ceil((255-y)*.1)),b=Math.min(255,b+Math.ceil((255-b)*.1)),_=Da($s.relativeLuminance2(g,y,b),$s.relativeLuminance2(h,m,p));return(g<<24|y<<16|b<<8|255)>>>0}t.increaseLuminance=r;function i(a){return[a>>24&255,a>>16&255,a>>8&255,a&255]}t.toChannels=i})(ty||={});function Ll(t){let e=t.toString(16);return e.length<2?"0"+e:e}function Da(t,e){return t<e?(e+.05)/(t+.05):(t+.05)/(e+.05)}var bre=class extends Cm{constructor(t,e,n){super(),this.content=0,this.combinedData="",this.fg=t.fg,this.bg=t.bg,this.combinedData=e,this._width=n}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(t){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},xv=class{constructor(t){this._bufferService=t,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new fi}register(t){let e={id:this._nextCharacterJoinerId++,handler:t};return this._characterJoiners.push(e),e.id}deregister(t){for(let e=0;e<this._characterJoiners.length;e++)if(this._characterJoiners[e].id===t)return this._characterJoiners.splice(e,1),!0;return!1}getJoinedCharacters(t){if(this._characterJoiners.length===0)return[];let e=this._bufferService.buffer.lines.get(t);if(!e||e.length===0)return[];let n=[],s=e.translateToString(!0),r=0,i=0,a=0,l=e.getFg(0),u=e.getBg(0);for(let h=0;h<e.getTrimmedLength();h++)if(e.loadCell(h,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==l||this._workCell.bg!==u){if(h-r>1){let m=this._getJoinedRanges(s,a,i,e,r);for(let p=0;p<m.length;p++)n.push(m[p])}r=h,a=i,l=this._workCell.fg,u=this._workCell.bg}i+=this._workCell.getChars().length||Go.length}if(this._bufferService.cols-r>1){let h=this._getJoinedRanges(s,a,i,e,r);for(let m=0;m<h.length;m++)n.push(h[m])}return n}_getJoinedRanges(t,e,n,s,r){let i=t.substring(e,n),a=[];try{a=this._characterJoiners[0].handler(i)}catch(l){console.error(l)}for(let l=1;l<this._characterJoiners.length;l++)try{let u=this._characterJoiners[l].handler(i);for(let h=0;h<u.length;h++)xv._mergeRanges(a,u[h])}catch(u){console.error(u)}return this._stringRangesToCellRanges(a,s,r),a}_stringRangesToCellRanges(t,e,n){let s=0,r=!1,i=0,a=t[s];if(a){for(let l=n;l<this._bufferService.cols;l++){let u=e.getWidth(l),h=e.getString(l).length||Go.length;if(u!==0){if(!r&&a[0]<=i&&(a[0]=l,r=!0),a[1]<=i){if(a[1]=l,a=t[++s],!a)break;a[0]<=i?(a[0]=l,r=!0):r=!1}i+=h}}a&&(a[1]=this._bufferService.cols)}}static _mergeRanges(t,e){let n=!1;for(let s=0;s<t.length;s++){let r=t[s];if(n){if(e[1]<=r[0])return t[s-1][1]=e[1],t;if(e[1]<=r[1])return t[s-1][1]=Math.max(e[1],r[1]),t.splice(s,1),t;t.splice(s,1),s--}else{if(e[1]<=r[0])return t.splice(s,0,e),t;if(e[1]<=r[1])return r[0]=Math.min(e[0],r[0]),t;e[0]<r[1]&&(r[0]=Math.min(e[0],r[0]),n=!0);continue}}return n?t[t.length-1][1]=e[1]:t.push(e),t}};xv=jn([qe(0,Zs)],xv);function _re(t){return 57508<=t&&t<=57558}function xre(t){return 9472<=t&&t<=9631}function wre(t){return _re(t)||xre(t)}function Sre(){return{css:{canvas:v0(),cell:v0()},device:{canvas:v0(),cell:v0(),char:{width:0,height:0,left:0,top:0}}}}function v0(){return{width:0,height:0}}var M2=class{constructor(t,e,n,s,r,i,a){this._document=t,this._characterJoinerService=e,this._optionsService=n,this._coreBrowserService=s,this._coreService=r,this._decorationService=i,this._themeService=a,this._workCell=new fi,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(t,e,n){this._selectionStart=t,this._selectionEnd=e,this._columnSelectMode=n}createRow(t,e,n,s,r,i,a,l,u,h,m){let p=[],g=this._characterJoinerService.getJoinedCharacters(e),y=this._themeService.colors,b=t.getNoBgTrimmedLength();n&&b<i+1&&(b=i+1);let _,w=0,k="",C=0,E=0,A=0,R=0,N=!1,M=0,I=!1,W=0,P=0,G=[],$=h!==-1&&m!==-1;for(let U=0;U<b;U++){t.loadCell(U,this._workCell);let Z=this._workCell.getWidth();if(Z===0)continue;let K=!1,B=U>=P,J=U,Y=this._workCell;if(g.length>0&&U===g[0][0]&&B){let Le=g.shift(),Ge=this._isCellInSelection(Le[0],e);for(C=Le[0]+1;C<Le[1];C++)B&&=Ge===this._isCellInSelection(C,e);B&&=!n||i<Le[0]||i>=Le[1],B?(K=!0,Y=new bre(this._workCell,t.translateToString(!0,Le[0],Le[1]),Le[1]-Le[0]),J=Le[1]-1,Z=Y.getWidth()):P=Le[1]}let z=this._isCellInSelection(U,e),O=n&&U===i,L=$&&U>=h&&U<=m,V=!1;this._decorationService.forEachDecorationAtCell(U,e,void 0,Le=>{V=!0});let T=Y.getChars()||Go;if(T===" "&&(Y.isUnderline()||Y.isOverline())&&(T=""),W=Z*l-u.get(T,Y.isBold(),Y.isItalic()),!_)_=this._document.createElement("span");else if(w&&(z&&I||!z&&!I&&Y.bg===E)&&(z&&I&&y.selectionForeground||Y.fg===A)&&Y.extended.ext===R&&L===N&&W===M&&!O&&!K&&!V&&B){Y.isInvisible()?k+=Go:k+=T,w++;continue}else w&&(_.textContent=k),_=this._document.createElement("span"),w=0,k="";if(E=Y.bg,A=Y.fg,R=Y.extended.ext,N=L,M=W,I=z,K&&i>=U&&i<=J&&(i=U),!this._coreService.isCursorHidden&&O&&this._coreService.isCursorInitialized){if(G.push("xterm-cursor"),this._coreBrowserService.isFocused)a&&G.push("xterm-cursor-blink"),G.push(s==="bar"?"xterm-cursor-bar":s==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(r)switch(r){case"outline":G.push("xterm-cursor-outline");break;case"block":G.push("xterm-cursor-block");break;case"bar":G.push("xterm-cursor-bar");break;case"underline":G.push("xterm-cursor-underline");break}}if(Y.isBold()&&G.push("xterm-bold"),Y.isItalic()&&G.push("xterm-italic"),Y.isDim()&&G.push("xterm-dim"),Y.isInvisible()?k=Go:k=Y.getChars()||Go,Y.isUnderline()&&(G.push(`xterm-underline-${Y.extended.underlineStyle}`),k===" "&&(k=""),!Y.isUnderlineColorDefault()))if(Y.isUnderlineColorRGB())_.style.textDecorationColor=`rgb(${Cm.toColorRGB(Y.getUnderlineColor()).join(",")})`;else{let Le=Y.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Y.isBold()&&Le<8&&(Le+=8),_.style.textDecorationColor=y.ansi[Le].css}Y.isOverline()&&(G.push("xterm-overline"),k===" "&&(k="")),Y.isStrikethrough()&&G.push("xterm-strikethrough"),L&&(_.style.textDecoration="underline");let Q=Y.getFgColor(),te=Y.getFgColorMode(),X=Y.getBgColor(),oe=Y.getBgColorMode(),xe=!!Y.isInverse();if(xe){let Le=Q;Q=X,X=Le;let Ge=te;te=oe,oe=Ge}let Se,Xe,Ke=!1;this._decorationService.forEachDecorationAtCell(U,e,void 0,Le=>{Le.options.layer!=="top"&&Ke||(Le.backgroundColorRGB&&(oe=50331648,X=Le.backgroundColorRGB.rgba>>8&16777215,Se=Le.backgroundColorRGB),Le.foregroundColorRGB&&(te=50331648,Q=Le.foregroundColorRGB.rgba>>8&16777215,Xe=Le.foregroundColorRGB),Ke=Le.options.layer==="top")}),!Ke&&z&&(Se=this._coreBrowserService.isFocused?y.selectionBackgroundOpaque:y.selectionInactiveBackgroundOpaque,X=Se.rgba>>8&16777215,oe=50331648,Ke=!0,y.selectionForeground&&(te=50331648,Q=y.selectionForeground.rgba>>8&16777215,Xe=y.selectionForeground)),Ke&&G.push("xterm-decoration-top");let st;switch(oe){case 16777216:case 33554432:st=y.ansi[X],G.push(`xterm-bg-${X}`);break;case 50331648:st=Kn.toColor(X>>16,X>>8&255,X&255),this._addStyle(_,`background-color:#${UO((X>>>0).toString(16),"0",6)}`);break;default:xe?(st=y.foreground,G.push("xterm-bg-257")):st=y.background}switch(Se||Y.isDim()&&(Se=mn.multiplyOpacity(st,.5)),te){case 16777216:case 33554432:Y.isBold()&&Q<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Q+=8),this._applyMinimumContrast(_,st,y.ansi[Q],Y,Se,void 0)||G.push(`xterm-fg-${Q}`);break;case 50331648:let Le=Kn.toColor(Q>>16&255,Q>>8&255,Q&255);this._applyMinimumContrast(_,st,Le,Y,Se,Xe)||this._addStyle(_,`color:#${UO(Q.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(_,st,y.foreground,Y,Se,Xe)||xe&&G.push("xterm-fg-257")}G.length&&(_.className=G.join(" "),G.length=0),!O&&!K&&!V&&B?w++:_.textContent=k,W!==this.defaultSpacing&&(_.style.letterSpacing=`${W}px`),p.push(_),U=J}return _&&w&&(_.textContent=k),p}_applyMinimumContrast(t,e,n,s,r,i){if(this._optionsService.rawOptions.minimumContrastRatio===1||wre(s.getCode()))return!1;let a=this._getContrastCache(s),l;if(!r&&!i&&(l=a.getColor(e.rgba,n.rgba)),l===void 0){let u=this._optionsService.rawOptions.minimumContrastRatio/(s.isDim()?2:1);l=mn.ensureContrastRatio(r||e,i||n,u),a.setColor((r||e).rgba,(i||n).rgba,l??null)}return l?(this._addStyle(t,`color:${l.css}`),!0):!1}_getContrastCache(t){return t.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(t,e){t.setAttribute("style",`${t.getAttribute("style")||""}${e};`)}_isCellInSelection(t,e){let n=this._selectionStart,s=this._selectionEnd;return!n||!s?!1:this._columnSelectMode?n[0]<=s[0]?t>=n[0]&&e>=n[1]&&t<s[0]&&e<=s[1]:t<n[0]&&e>=n[1]&&t>=s[0]&&e<=s[1]:e>n[1]&&e<s[1]||n[1]===s[1]&&e===n[1]&&t>=n[0]&&t<s[0]||n[1]<s[1]&&e===s[1]&&t<s[0]||n[1]<s[1]&&e===n[1]&&t>=n[0]}};M2=jn([qe(1,YP),qe(2,Js),qe(3,oo),qe(4,Pc),qe(5,Nm),qe(6,Gh)],M2);function UO(t,e,n){for(;t.length<n;)t=e+t;return t}var kre=class{constructor(t,e){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=t.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let n=t.createElement("span");n.classList.add("xterm-char-measure-element");let s=t.createElement("span");s.classList.add("xterm-char-measure-element"),s.style.fontWeight="bold";let r=t.createElement("span");r.classList.add("xterm-char-measure-element"),r.style.fontStyle="italic";let i=t.createElement("span");i.classList.add("xterm-char-measure-element"),i.style.fontWeight="bold",i.style.fontStyle="italic",this._measureElements=[n,s,r,i],this._container.appendChild(n),this._container.appendChild(s),this._container.appendChild(r),this._container.appendChild(i),e.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(t,e,n,s){t===this._font&&e===this._fontSize&&n===this._weight&&s===this._weightBold||(this._font=t,this._fontSize=e,this._weight=n,this._weightBold=s,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${n}`,this._measureElements[1].style.fontWeight=`${s}`,this._measureElements[2].style.fontWeight=`${n}`,this._measureElements[3].style.fontWeight=`${s}`,this.clear())}get(t,e,n){let s=0;if(!e&&!n&&t.length===1&&(s=t.charCodeAt(0))<256){if(this._flat[s]!==-9999)return this._flat[s];let a=this._measure(t,0);return a>0&&(this._flat[s]=a),a}let r=t;e&&(r+="B"),n&&(r+="I");let i=this._holey.get(r);if(i===void 0){let a=0;e&&(a|=1),n&&(a|=2),i=this._measure(t,a),i>0&&this._holey.set(r,i)}return i}_measure(t,e){let n=this._measureElements[e];return n.textContent=t.repeat(32),n.offsetWidth/32}},Cre=class{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(t,e,n,s=!1){if(this.selectionStart=e,this.selectionEnd=n,!e||!n||e[0]===n[0]&&e[1]===n[1]){this.clear();return}let r=t.buffers.active.ydisp,i=e[1]-r,a=n[1]-r,l=Math.max(i,0),u=Math.min(a,t.rows-1);if(l>=t.rows||u<0){this.clear();return}this.hasSelection=!0,this.columnSelectMode=s,this.viewportStartRow=i,this.viewportEndRow=a,this.viewportCappedStartRow=l,this.viewportCappedEndRow=u,this.startCol=e[0],this.endCol=n[0]}isCellSelected(t,e,n){return this.hasSelection?(n-=t.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?e>=this.startCol&&n>=this.viewportCappedStartRow&&e<this.endCol&&n<=this.viewportCappedEndRow:e<this.startCol&&n>=this.viewportCappedStartRow&&e>=this.endCol&&n<=this.viewportCappedEndRow:n>this.viewportStartRow&&n<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&n===this.viewportStartRow&&e>=this.startCol&&e<this.endCol||this.viewportStartRow<this.viewportEndRow&&n===this.viewportEndRow&&e<this.endCol||this.viewportStartRow<this.viewportEndRow&&n===this.viewportStartRow&&e>=this.startCol):!1}};function Nre(){return new Cre}var Cw="xterm-dom-renderer-owner-",ni="xterm-rows",b0="xterm-fg-",HO="xterm-bg-",sf="xterm-focus",_0="xterm-selection",Ere=1,I2=class extends It{constructor(t,e,n,s,r,i,a,l,u,h,m,p,g,y){super(),this._terminal=t,this._document=e,this._element=n,this._screenElement=s,this._viewportElement=r,this._helperContainer=i,this._linkifier2=a,this._charSizeService=u,this._optionsService=h,this._bufferService=m,this._coreService=p,this._coreBrowserService=g,this._themeService=y,this._terminalClass=Ere++,this._rowElements=[],this._selectionRenderModel=Nre(),this.onRequestRedraw=this._register(new Te).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(ni),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(_0),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=Sre(),this._updateDimensions(),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._themeService.onChangeColors(b=>this._injectCss(b))),this._injectCss(this._themeService.colors),this._rowFactory=l.createInstance(M2,document),this._element.classList.add(Cw+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this._register(this._linkifier2.onShowLinkUnderline(b=>this._handleLinkHover(b))),this._register(this._linkifier2.onHideLinkUnderline(b=>this._handleLinkLeave(b))),this._register(bn(()=>{this._element.classList.remove(Cw+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new kre(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let t=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*t,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*t),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/t),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/t),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let n of this._rowElements)n.style.width=`${this.dimensions.css.canvas.width}px`,n.style.height=`${this.dimensions.css.cell.height}px`,n.style.lineHeight=`${this.dimensions.css.cell.height}px`,n.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let e=`${this._terminalSelector} .${ni} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=e,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(t){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let e=`${this._terminalSelector} .${ni} { pointer-events: none; color: ${t.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;e+=`${this._terminalSelector} .${ni} .xterm-dim { color: ${mn.multiplyOpacity(t.foreground,.5).css};}`,e+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;let n=`blink_underline_${this._terminalClass}`,s=`blink_bar_${this._terminalClass}`,r=`blink_block_${this._terminalClass}`;e+=`@keyframes ${n} { 50% {  border-bottom-style: hidden; }}`,e+=`@keyframes ${s} { 50% {  box-shadow: none; }}`,e+=`@keyframes ${r} { 0% {  background-color: ${t.cursor.css};  color: ${t.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${t.cursor.css}; }}`,e+=`${this._terminalSelector} .${ni}.${sf} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${n} 1s step-end infinite;}${this._terminalSelector} .${ni}.${sf} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${s} 1s step-end infinite;}${this._terminalSelector} .${ni}.${sf} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${r} 1s step-end infinite;}${this._terminalSelector} .${ni} .xterm-cursor.xterm-cursor-block { background-color: ${t.cursor.css}; color: ${t.cursorAccent.css};}${this._terminalSelector} .${ni} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${t.cursor.css} !important; color: ${t.cursorAccent.css} !important;}${this._terminalSelector} .${ni} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${t.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${ni} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${t.cursor.css} inset;}${this._terminalSelector} .${ni} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${t.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,e+=`${this._terminalSelector} .${_0} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${_0} div { position: absolute; background-color: ${t.selectionBackgroundOpaque.css};}${this._terminalSelector} .${_0} div { position: absolute; background-color: ${t.selectionInactiveBackgroundOpaque.css};}`;for(let[i,a]of t.ansi.entries())e+=`${this._terminalSelector} .${b0}${i} { color: ${a.css}; }${this._terminalSelector} .${b0}${i}.xterm-dim { color: ${mn.multiplyOpacity(a,.5).css}; }${this._terminalSelector} .${HO}${i} { background-color: ${a.css}; }`;e+=`${this._terminalSelector} .${b0}257 { color: ${mn.opaque(t.background).css}; }${this._terminalSelector} .${b0}257.xterm-dim { color: ${mn.multiplyOpacity(mn.opaque(t.background),.5).css}; }${this._terminalSelector} .${HO}257 { background-color: ${t.foreground.css}; }`,this._themeStyleElement.textContent=e}_setDefaultSpacing(){let t=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${t}px`,this._rowFactory.defaultSpacing=t}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(t,e){for(let n=this._rowElements.length;n<=e;n++){let s=this._document.createElement("div");this._rowContainer.appendChild(s),this._rowElements.push(s)}for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(t,e){this._refreshRowElements(t,e),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(sf),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(sf),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(t,e,n){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(t,e,n),this.renderRows(0,this._bufferService.rows-1),!t||!e||(this._selectionRenderModel.update(this._terminal,t,e,n),!this._selectionRenderModel.hasSelection))return;let s=this._selectionRenderModel.viewportStartRow,r=this._selectionRenderModel.viewportEndRow,i=this._selectionRenderModel.viewportCappedStartRow,a=this._selectionRenderModel.viewportCappedEndRow,l=this._document.createDocumentFragment();if(n){let u=t[0]>e[0];l.appendChild(this._createSelectionElement(i,u?e[0]:t[0],u?t[0]:e[0],a-i+1))}else{let u=s===i?t[0]:0,h=i===r?e[0]:this._bufferService.cols;l.appendChild(this._createSelectionElement(i,u,h));let m=a-i-1;if(l.appendChild(this._createSelectionElement(i+1,0,this._bufferService.cols,m)),i!==a){let p=r===a?e[0]:this._bufferService.cols;l.appendChild(this._createSelectionElement(a,0,p))}}this._selectionContainer.appendChild(l)}_createSelectionElement(t,e,n,s=1){let r=this._document.createElement("div"),i=e*this.dimensions.css.cell.width,a=this.dimensions.css.cell.width*(n-e);return i+a>this.dimensions.css.canvas.width&&(a=this.dimensions.css.canvas.width-i),r.style.height=`${s*this.dimensions.css.cell.height}px`,r.style.top=`${t*this.dimensions.css.cell.height}px`,r.style.left=`${i}px`,r.style.width=`${a}px`,r}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let t of this._rowElements)t.replaceChildren()}renderRows(t,e){let n=this._bufferService.buffer,s=n.ybase+n.y,r=Math.min(n.x,this._bufferService.cols-1),i=this._coreService.decPrivateModes.cursorBlink??this._optionsService.rawOptions.cursorBlink,a=this._coreService.decPrivateModes.cursorStyle??this._optionsService.rawOptions.cursorStyle,l=this._optionsService.rawOptions.cursorInactiveStyle;for(let u=t;u<=e;u++){let h=u+n.ydisp,m=this._rowElements[u],p=n.lines.get(h);if(!m||!p)break;m.replaceChildren(...this._rowFactory.createRow(p,h,h===s,a,l,r,i,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${Cw}${this._terminalClass}`}_handleLinkHover(t){this._setCellUnderline(t.x1,t.x2,t.y1,t.y2,t.cols,!0)}_handleLinkLeave(t){this._setCellUnderline(t.x1,t.x2,t.y1,t.y2,t.cols,!1)}_setCellUnderline(t,e,n,s,r,i){n<0&&(t=0),s<0&&(e=0);let a=this._bufferService.rows-1;n=Math.max(Math.min(n,a),0),s=Math.max(Math.min(s,a),0),r=Math.min(r,this._bufferService.cols);let l=this._bufferService.buffer,u=l.ybase+l.y,h=Math.min(l.x,r-1),m=this._optionsService.rawOptions.cursorBlink,p=this._optionsService.rawOptions.cursorStyle,g=this._optionsService.rawOptions.cursorInactiveStyle;for(let y=n;y<=s;++y){let b=y+l.ydisp,_=this._rowElements[y],w=l.lines.get(b);if(!_||!w)break;_.replaceChildren(...this._rowFactory.createRow(w,b,b===u,p,g,h,m,this.dimensions.css.cell.width,this._widthCache,i?y===n?t:0:-1,i?(y===s?e:r)-1:-1))}}};I2=jn([qe(7,rE),qe(8,Zb),qe(9,Js),qe(10,Zs),qe(11,Pc),qe(12,oo),qe(13,Gh)],I2);var D2=class extends It{constructor(t,e,n){super(),this._optionsService=n,this.width=0,this.height=0,this._onCharSizeChange=this._register(new Te),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this._register(new Rre(this._optionsService))}catch{this._measureStrategy=this._register(new Are(t,e,this._optionsService))}this._register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}get hasValidSize(){return this.width>0&&this.height>0}measure(){let t=this._measureStrategy.measure();(t.width!==this.width||t.height!==this.height)&&(this.width=t.width,this.height=t.height,this._onCharSizeChange.fire())}};D2=jn([qe(2,Js)],D2);var pB=class extends It{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(t,e){t!==void 0&&t>0&&e!==void 0&&e>0&&(this._result.width=t,this._result.height=e)}},Are=class extends pB{constructor(t,e,n){super(),this._document=t,this._parentElement=e,this._optionsService=n,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}},Rre=class extends pB{constructor(t){super(),this._optionsService=t,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");let e=this._ctx.measureText("W");if(!("width"in e&&"fontBoundingBoxAscent"in e&&"fontBoundingBoxDescent"in e))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;let t=this._ctx.measureText("W");return this._validateAndSet(t.width,t.fontBoundingBoxAscent+t.fontBoundingBoxDescent),this._result}},Tre=class extends It{constructor(t,e,n){super(),this._textarea=t,this._window=e,this.mainDocument=n,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=this._register(new jre(this._window)),this._onDprChange=this._register(new Te),this.onDprChange=this._onDprChange.event,this._onWindowChange=this._register(new Te),this.onWindowChange=this._onWindowChange.event,this._register(this.onWindowChange(s=>this._screenDprMonitor.setWindow(s))),this._register(_s.forward(this._screenDprMonitor.onDprChange,this._onDprChange)),this._register(bt(this._textarea,"focus",()=>this._isFocused=!0)),this._register(bt(this._textarea,"blur",()=>this._isFocused=!1))}get window(){return this._window}set window(t){this._window!==t&&(this._window=t,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}},jre=class extends It{constructor(t){super(),this._parentWindow=t,this._windowResizeListener=this._register(new Ch),this._onDprChange=this._register(new Te),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this._register(bn(()=>this.clearListener()))}setWindow(t){this._parentWindow=t,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=bt(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){!this._resolutionMediaMatchList||!this._outerListener||(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}},Ore=class extends It{constructor(){super(),this.linkProviders=[],this._register(bn(()=>this.linkProviders.length=0))}registerLinkProvider(t){return this.linkProviders.push(t),{dispose:()=>{let e=this.linkProviders.indexOf(t);e!==-1&&this.linkProviders.splice(e,1)}}}};function dE(t,e,n){let s=n.getBoundingClientRect(),r=t.getComputedStyle(n),i=parseInt(r.getPropertyValue("padding-left")),a=parseInt(r.getPropertyValue("padding-top"));return[e.clientX-s.left-i,e.clientY-s.top-a]}function Mre(t,e,n,s,r,i,a,l,u){if(!i)return;let h=dE(t,e,n);if(h)return h[0]=Math.ceil((h[0]+(u?a/2:0))/a),h[1]=Math.ceil(h[1]/l),h[0]=Math.min(Math.max(h[0],1),s+(u?1:0)),h[1]=Math.min(Math.max(h[1],1),r),h}var L2=class{constructor(t,e){this._renderService=t,this._charSizeService=e}getCoords(t,e,n,s,r){return Mre(window,t,e,n,s,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,r)}getMouseReportCoords(t,e){let n=dE(window,t,e);if(this._charSizeService.hasValidSize)return n[0]=Math.min(Math.max(n[0],0),this._renderService.dimensions.css.canvas.width-1),n[1]=Math.min(Math.max(n[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(n[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(n[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(n[0]),y:Math.floor(n[1])}}};L2=jn([qe(0,lo),qe(1,Zb)],L2);var Ire=class{constructor(t,e){this._renderCallback=t,this._coreBrowserService=e,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(t){return this._refreshCallbacks.push(t),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(t,e,n){this._rowCount=n,t=t!==void 0?t:0,e=e!==void 0?e:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,t):t,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,e):e,!this._animationFrame&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0){this._runRefreshCallbacks();return}let t=Math.max(this._rowStart,0),e=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(t,e),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let t of this._refreshCallbacks)t(0);this._refreshCallbacks=[]}},mB={};Vne(mB,{getSafariVersion:()=>Lre,isChromeOS:()=>bB,isFirefox:()=>gB,isIpad:()=>Pre,isIphone:()=>Bre,isLegacyEdge:()=>Dre,isLinux:()=>fE,isMac:()=>wv,isNode:()=>Jb,isSafari:()=>yB,isWindows:()=>vB});var Jb=typeof process<"u"&&"title"in process,Em=Jb?"node":navigator.userAgent,Am=Jb?"node":navigator.platform,gB=Em.includes("Firefox"),Dre=Em.includes("Edge"),yB=/^((?!chrome|android).)*safari/i.test(Em);function Lre(){if(!yB)return 0;let t=Em.match(/Version\/(\d+)/);return t===null||t.length<2?0:parseInt(t[1])}var wv=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(Am),Pre=Am==="iPad",Bre=Am==="iPhone",vB=["Windows","Win16","Win32","WinCE"].includes(Am),fE=Am.indexOf("Linux")>=0,bB=/\bCrOS\b/.test(Em),_B=class{constructor(){this._tasks=[],this._i=0}enqueue(t){this._tasks.push(t),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(t){this._idleCallback=void 0;let e=0,n=0,s=t.timeRemaining(),r=0;for(;this._i<this._tasks.length;){if(e=performance.now(),this._tasks[this._i]()||this._i++,e=Math.max(1,performance.now()-e),n=Math.max(e,n),r=t.timeRemaining(),n*1.5>r){s-e<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(s-e))}ms`),this._start();return}s=r}this.clear()}},$re=class extends _B{_requestCallback(t){return setTimeout(()=>t(this._createDeadline(16)))}_cancelCallback(t){clearTimeout(t)}_createDeadline(t){let e=performance.now()+t;return{timeRemaining:()=>Math.max(0,e-performance.now())}}},zre=class extends _B{_requestCallback(t){return requestIdleCallback(t)}_cancelCallback(t){cancelIdleCallback(t)}},Sv=!Jb&&"requestIdleCallback"in window?zre:$re,Fre=class{constructor(){this._queue=new Sv}set(t){this._queue.clear(),this._queue.enqueue(t)}flush(){this._queue.flush()}},P2=class extends It{constructor(t,e,n,s,r,i,a,l,u){super(),this._rowCount=t,this._optionsService=n,this._charSizeService=s,this._coreService=r,this._coreBrowserService=l,this._renderer=this._register(new Ch),this._pausedResizeTask=new Fre,this._observerDisposable=this._register(new Ch),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this._register(new Te),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this._register(new Te),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this._register(new Te),this.onRender=this._onRender.event,this._onRefreshRequest=this._register(new Te),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new Ire((h,m)=>this._renderRows(h,m),this._coreBrowserService),this._register(this._renderDebouncer),this._syncOutputHandler=new Ure(this._coreBrowserService,this._coreService,()=>this._fullRefresh()),this._register(bn(()=>this._syncOutputHandler.dispose())),this._register(this._coreBrowserService.onDprChange(()=>this.handleDevicePixelRatioChange())),this._register(a.onResize(()=>this._fullRefresh())),this._register(a.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this._register(i.onDecorationRegistered(()=>this._fullRefresh())),this._register(i.onDecorationRemoved(()=>this._fullRefresh())),this._register(this._optionsService.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(a.cols,a.rows),this._fullRefresh()})),this._register(this._optionsService.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(a.buffer.y,a.buffer.y,!0))),this._register(u.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(this._coreBrowserService.window,e),this._register(this._coreBrowserService.onWindowChange(h=>this._registerIntersectionObserver(h,e)))}get dimensions(){return this._renderer.value.dimensions}_registerIntersectionObserver(t,e){if("IntersectionObserver"in t){let n=new t.IntersectionObserver(s=>this._handleIntersectionChange(s[s.length-1]),{threshold:0});n.observe(e),this._observerDisposable.value=bn(()=>n.disconnect())}}_handleIntersectionChange(t){this._isPaused=t.isIntersecting===void 0?t.intersectionRatio===0:!t.isIntersecting,!this._isPaused&&!this._charSizeService.hasValidSize&&this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(t,e,n=!1){if(this._isPaused){this._needsFullRefresh=!0;return}if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(t,e);return}let s=this._syncOutputHandler.flush();s&&(t=Math.min(t,s.start),e=Math.max(e,s.end)),n||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(t,e,this._rowCount)}_renderRows(t,e){if(this._renderer.value){if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(t,e);return}t=Math.min(t,this._rowCount-1),e=Math.min(e,this._rowCount-1),this._renderer.value.renderRows(t,e),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:t,end:e}),this._onRender.fire({start:t,end:e}),this._isNextRenderRedrawOnly=!0}}resize(t,e){this._rowCount=e,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(t){this._renderer.value=t,this._renderer.value&&(this._renderer.value.onRequestRedraw(e=>this.refreshRows(e.start,e.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(t){return this._renderDebouncer.addRefreshCallback(t)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(t,e){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(t,e)):this._renderer.value.handleResize(t,e),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(t,e,n){this._selectionState.start=t,this._selectionState.end=e,this._selectionState.columnSelectMode=n,this._renderer.value?.handleSelectionChanged(t,e,n)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};P2=jn([qe(2,Js),qe(3,Zb),qe(4,Pc),qe(5,Nm),qe(6,Zs),qe(7,oo),qe(8,Gh)],P2);var Ure=class{constructor(t,e,n){this._coreBrowserService=t,this._coreService=e,this._onTimeout=n,this._start=0,this._end=0,this._isBuffering=!1}bufferRows(t,e){this._isBuffering?(this._start=Math.min(this._start,t),this._end=Math.max(this._end,e)):(this._start=t,this._end=e,this._isBuffering=!0),this._timeout===void 0&&(this._timeout=this._coreBrowserService.window.setTimeout(()=>{this._timeout=void 0,this._coreService.decPrivateModes.synchronizedOutput=!1,this._onTimeout()},1e3))}flush(){if(this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0),!this._isBuffering)return;let t={start:this._start,end:this._end};return this._isBuffering=!1,t}dispose(){this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0)}};function Hre(t,e,n,s){let r=n.buffer.x,i=n.buffer.y;if(!n.buffer.hasScrollback)return Kre(r,i,t,e,n,s)+Xb(i,e,n,s)+Wre(r,i,t,e,n,s);let a;if(i===e)return a=r>t?"D":"C",Gp(Math.abs(r-t),Wp(a,s));a=i>e?"D":"C";let l=Math.abs(i-e),u=qre(i>e?t:r,n)+(l-1)*n.cols+1+Vre(i>e?r:t);return Gp(u,Wp(a,s))}function Vre(t,e){return t-1}function qre(t,e){return e.cols-t}function Kre(t,e,n,s,r,i){return Xb(e,s,r,i).length===0?"":Gp(wB(t,e,t,e-Ac(e,r),!1,r).length,Wp("D",i))}function Xb(t,e,n,s){let r=t-Ac(t,n),i=e-Ac(e,n),a=Math.abs(r-i)-Gre(t,e,n);return Gp(a,Wp(xB(t,e),s))}function Wre(t,e,n,s,r,i){let a;Xb(e,s,r,i).length>0?a=s-Ac(s,r):a=e;let l=s,u=Yre(t,e,n,s,r,i);return Gp(wB(t,a,n,l,u==="C",r).length,Wp(u,i))}function Gre(t,e,n){let s=0,r=t-Ac(t,n),i=e-Ac(e,n);for(let a=0;a<Math.abs(r-i);a++){let l=xB(t,e)==="A"?-1:1;n.buffer.lines.get(r+l*a)?.isWrapped&&s++}return s}function Ac(t,e){let n=0,s=e.buffer.lines.get(t),r=s?.isWrapped;for(;r&&t>=0&&t<e.rows;)n++,s=e.buffer.lines.get(--t),r=s?.isWrapped;return n}function Yre(t,e,n,s,r,i){let a;return Xb(n,s,r,i).length>0?a=s-Ac(s,r):a=e,t<n&&a<=s||t>=n&&a<s?"C":"D"}function xB(t,e){return t>e?"A":"B"}function wB(t,e,n,s,r,i){let a=t,l=e,u="";for(;(a!==n||l!==s)&&l>=0&&l<i.buffer.lines.length;)a+=r?1:-1,r&&a>i.cols-1?(u+=i.buffer.translateBufferLineToString(l,!1,t,a),a=0,t=0,l++):!r&&a<0&&(u+=i.buffer.translateBufferLineToString(l,!1,0,t+1),a=i.cols-1,t=a,l--);return u+i.buffer.translateBufferLineToString(l,!1,t,a)}function Wp(t,e){let n=e?"O":"[";return ve.ESC+n+t}function Gp(t,e){t=Math.floor(t);let n="";for(let s=0;s<t;s++)n+=e;return n}var Zre=class{constructor(t){this._bufferService=t,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:!this.selectionEnd||!this.selectionStart?this.selectionStart:this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let t=this.selectionStart[0]+this.selectionStartLength;return t>this._bufferService.cols?t%this._bufferService.cols===0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(t/this._bufferService.cols)-1]:[t%this._bufferService.cols,this.selectionStart[1]+Math.floor(t/this._bufferService.cols)]:[t,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let t=this.selectionStart[0]+this.selectionStartLength;return t>this._bufferService.cols?[t%this._bufferService.cols,this.selectionStart[1]+Math.floor(t/this._bufferService.cols)]:[Math.max(t,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let t=this.selectionStart,e=this.selectionEnd;return!t||!e?!1:t[1]>e[1]||t[1]===e[1]&&t[0]>e[0]}handleTrim(t){return this.selectionStart&&(this.selectionStart[1]-=t),this.selectionEnd&&(this.selectionEnd[1]-=t),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}};function VO(t,e){if(t.start.y>t.end.y)throw new Error(`Buffer range end (${t.end.x}, ${t.end.y}) cannot be before start (${t.start.x}, ${t.start.y})`);return e*(t.end.y-t.start.y)+(t.end.x-t.start.x+1)}var Nw=50,Jre=15,Xre=50,Qre=500,eie="",tie=new RegExp(eie,"g"),B2=class extends It{constructor(t,e,n,s,r,i,a,l,u){super(),this._element=t,this._screenElement=e,this._linkifier=n,this._bufferService=s,this._coreService=r,this._mouseService=i,this._optionsService=a,this._renderService=l,this._coreBrowserService=u,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new fi,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this._register(new Te),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this._register(new Te),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this._register(new Te),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this._register(new Te),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=h=>this._handleMouseMove(h),this._mouseUpListener=h=>this._handleMouseUp(h),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(h=>this._handleTrim(h)),this._register(this._bufferService.buffers.onBufferActivate(h=>this._handleBufferActivate(h))),this.enable(),this._model=new Zre(this._bufferService),this._activeSelectionMode=0,this._register(bn(()=>{this._removeMouseDownListeners()})),this._register(this._bufferService.onResize(h=>{h.rowsChanged&&this.clearSelection()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let t=this._model.finalSelectionStart,e=this._model.finalSelectionEnd;return!t||!e?!1:t[0]!==e[0]||t[1]!==e[1]}get selectionText(){let t=this._model.finalSelectionStart,e=this._model.finalSelectionEnd;if(!t||!e)return"";let n=this._bufferService.buffer,s=[];if(this._activeSelectionMode===3){if(t[0]===e[0])return"";let r=t[0]<e[0]?t[0]:e[0],i=t[0]<e[0]?e[0]:t[0];for(let a=t[1];a<=e[1];a++){let l=n.translateBufferLineToString(a,!0,r,i);s.push(l)}}else{let r=t[1]===e[1]?e[0]:void 0;s.push(n.translateBufferLineToString(t[1],!0,t[0],r));for(let i=t[1]+1;i<=e[1]-1;i++){let a=n.lines.get(i),l=n.translateBufferLineToString(i,!0);a?.isWrapped?s[s.length-1]+=l:s.push(l)}if(t[1]!==e[1]){let i=n.lines.get(e[1]),a=n.translateBufferLineToString(e[1],!0,0,e[0]);i&&i.isWrapped?s[s.length-1]+=a:s.push(a)}}return s.map(r=>r.replace(tie," ")).join(vB?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(t){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),fE&&t&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(t){let e=this._getMouseBufferCoords(t),n=this._model.finalSelectionStart,s=this._model.finalSelectionEnd;return!n||!s||!e?!1:this._areCoordsInSelection(e,n,s)}isCellInSelection(t,e){let n=this._model.finalSelectionStart,s=this._model.finalSelectionEnd;return!n||!s?!1:this._areCoordsInSelection([t,e],n,s)}_areCoordsInSelection(t,e,n){return t[1]>e[1]&&t[1]<n[1]||e[1]===n[1]&&t[1]===e[1]&&t[0]>=e[0]&&t[0]<n[0]||e[1]<n[1]&&t[1]===n[1]&&t[0]<n[0]||e[1]<n[1]&&t[1]===e[1]&&t[0]>=e[0]}_selectWordAtCursor(t,e){let n=this._linkifier.currentLink?.link?.range;if(n)return this._model.selectionStart=[n.start.x-1,n.start.y-1],this._model.selectionStartLength=VO(n,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let s=this._getMouseBufferCoords(t);return s?(this._selectWordAt(s,e),this._model.selectionEnd=void 0,!0):!1}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(t,e){this._model.clearSelection(),t=Math.max(t,0),e=Math.min(e,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,t],this._model.selectionEnd=[this._bufferService.cols,e],this.refresh(),this._onSelectionChange.fire()}_handleTrim(t){this._model.handleTrim(t)&&this.refresh()}_getMouseBufferCoords(t){let e=this._mouseService.getCoords(t,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(e)return e[0]--,e[1]--,e[1]+=this._bufferService.buffer.ydisp,e}_getMouseEventScrollAmount(t){let e=dE(this._coreBrowserService.window,t,this._screenElement)[1],n=this._renderService.dimensions.css.canvas.height;return e>=0&&e<=n?0:(e>n&&(e-=n),e=Math.min(Math.max(e,-Nw),Nw),e/=Nw,e/Math.abs(e)+Math.round(e*(Jre-1)))}shouldForceSelection(t){return wv?t.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:t.shiftKey}handleMouseDown(t){if(this._mouseDownTimeStamp=t.timeStamp,!(t.button===2&&this.hasSelection)&&t.button===0){if(!this._enabled){if(!this.shouldForceSelection(t))return;t.stopPropagation()}t.preventDefault(),this._dragScrollAmount=0,this._enabled&&t.shiftKey?this._handleIncrementalClick(t):t.detail===1?this._handleSingleClick(t):t.detail===2?this._handleDoubleClick(t):t.detail===3&&this._handleTripleClick(t),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),Xre)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(t){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(t))}_handleSingleClick(t){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(t)?3:0,this._model.selectionStart=this._getMouseBufferCoords(t),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let e=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);e&&e.length!==this._model.selectionStart[0]&&e.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(t){this._selectWordAtCursor(t,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(t){let e=this._getMouseBufferCoords(t);e&&(this._activeSelectionMode=2,this._selectLineAt(e[1]))}shouldColumnSelect(t){return t.altKey&&!(wv&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(t){if(t.stopImmediatePropagation(),!this._model.selectionStart)return;let e=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(t),!this._model.selectionEnd){this.refresh(!0);return}this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(t),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let n=this._bufferService.buffer;if(this._model.selectionEnd[1]<n.lines.length){let s=n.lines.get(this._model.selectionEnd[1]);s&&s.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}(!e||e[0]!==this._model.selectionEnd[0]||e[1]!==this._model.selectionEnd[1])&&this.refresh(!0)}_dragScroll(){if(!(!this._model.selectionEnd||!this._model.selectionStart)&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let t=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(t.ydisp+this._bufferService.rows,t.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=t.ydisp),this.refresh()}}_handleMouseUp(t){let e=t.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&e<Qre&&t.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let n=this._mouseService.getCoords(t,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(n&&n[0]!==void 0&&n[1]!==void 0){let s=Hre(n[0]-1,n[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(s,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let t=this._model.finalSelectionStart,e=this._model.finalSelectionEnd,n=!!t&&!!e&&(t[0]!==e[0]||t[1]!==e[1]);if(!n){this._oldHasSelection&&this._fireOnSelectionChange(t,e,n);return}!t||!e||(!this._oldSelectionStart||!this._oldSelectionEnd||t[0]!==this._oldSelectionStart[0]||t[1]!==this._oldSelectionStart[1]||e[0]!==this._oldSelectionEnd[0]||e[1]!==this._oldSelectionEnd[1])&&this._fireOnSelectionChange(t,e,n)}_fireOnSelectionChange(t,e,n){this._oldSelectionStart=t,this._oldSelectionEnd=e,this._oldHasSelection=n,this._onSelectionChange.fire()}_handleBufferActivate(t){this.clearSelection(),this._trimListener.dispose(),this._trimListener=t.activeBuffer.lines.onTrim(e=>this._handleTrim(e))}_convertViewportColToCharacterIndex(t,e){let n=e;for(let s=0;e>=s;s++){let r=t.loadCell(s,this._workCell).getChars().length;this._workCell.getWidth()===0?n--:r>1&&e!==s&&(n+=r-1)}return n}setSelection(t,e,n){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[t,e],this._model.selectionStartLength=n,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(t){this._isClickInSelection(t)||(this._selectWordAtCursor(t,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(t,e,n=!0,s=!0){if(t[0]>=this._bufferService.cols)return;let r=this._bufferService.buffer,i=r.lines.get(t[1]);if(!i)return;let a=r.translateBufferLineToString(t[1],!1),l=this._convertViewportColToCharacterIndex(i,t[0]),u=l,h=t[0]-l,m=0,p=0,g=0,y=0;if(a.charAt(l)===" "){for(;l>0&&a.charAt(l-1)===" ";)l--;for(;u<a.length&&a.charAt(u+1)===" ";)u++}else{let w=t[0],k=t[0];i.getWidth(w)===0&&(m++,w--),i.getWidth(k)===2&&(p++,k++);let C=i.getString(k).length;for(C>1&&(y+=C-1,u+=C-1);w>0&&l>0&&!this._isCharWordSeparator(i.loadCell(w-1,this._workCell));){i.loadCell(w-1,this._workCell);let E=this._workCell.getChars().length;this._workCell.getWidth()===0?(m++,w--):E>1&&(g+=E-1,l-=E-1),l--,w--}for(;k<i.length&&u+1<a.length&&!this._isCharWordSeparator(i.loadCell(k+1,this._workCell));){i.loadCell(k+1,this._workCell);let E=this._workCell.getChars().length;this._workCell.getWidth()===2?(p++,k++):E>1&&(y+=E-1,u+=E-1),u++,k++}}u++;let b=l+h-m+g,_=Math.min(this._bufferService.cols,u-l+m+p-g-y);if(!(!e&&a.slice(l,u).trim()==="")){if(n&&b===0&&i.getCodePoint(0)!==32){let w=r.lines.get(t[1]-1);if(w&&i.isWrapped&&w.getCodePoint(this._bufferService.cols-1)!==32){let k=this._getWordAt([this._bufferService.cols-1,t[1]-1],!1,!0,!1);if(k){let C=this._bufferService.cols-k.start;b-=C,_+=C}}}if(s&&b+_===this._bufferService.cols&&i.getCodePoint(this._bufferService.cols-1)!==32){let w=r.lines.get(t[1]+1);if(w?.isWrapped&&w.getCodePoint(0)!==32){let k=this._getWordAt([0,t[1]+1],!1,!1,!0);k&&(_+=k.length)}}return{start:b,length:_}}}_selectWordAt(t,e){let n=this._getWordAt(t,e);if(n){for(;n.start<0;)n.start+=this._bufferService.cols,t[1]--;this._model.selectionStart=[n.start,t[1]],this._model.selectionStartLength=n.length}}_selectToWordAt(t){let e=this._getWordAt(t,!0);if(e){let n=t[1];for(;e.start<0;)e.start+=this._bufferService.cols,n--;if(!this._model.areSelectionValuesReversed())for(;e.start+e.length>this._bufferService.cols;)e.length-=this._bufferService.cols,n++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?e.start:e.start+e.length,n]}}_isCharWordSeparator(t){return t.getWidth()===0?!1:this._optionsService.rawOptions.wordSeparator.indexOf(t.getChars())>=0}_selectLineAt(t){let e=this._bufferService.buffer.getWrappedRangeForLine(t),n={start:{x:0,y:e.first},end:{x:this._bufferService.cols-1,y:e.last}};this._model.selectionStart=[0,e.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=VO(n,this._bufferService.cols)}};B2=jn([qe(3,Zs),qe(4,Pc),qe(5,iE),qe(6,Js),qe(7,lo),qe(8,oo)],B2);var qO=class{constructor(){this._data={}}set(t,e,n){this._data[t]||(this._data[t]={}),this._data[t][e]=n}get(t,e){return this._data[t]?this._data[t][e]:void 0}clear(){this._data={}}},KO=class{constructor(){this._color=new qO,this._css=new qO}setCss(t,e,n){this._css.set(t,e,n)}getCss(t,e){return this._css.get(t,e)}setColor(t,e,n){this._color.set(t,e,n)}getColor(t,e){return this._color.get(t,e)}clear(){this._color.clear(),this._css.clear()}},Yn=Object.freeze((()=>{let t=[kn.toColor("#2e3436"),kn.toColor("#cc0000"),kn.toColor("#4e9a06"),kn.toColor("#c4a000"),kn.toColor("#3465a4"),kn.toColor("#75507b"),kn.toColor("#06989a"),kn.toColor("#d3d7cf"),kn.toColor("#555753"),kn.toColor("#ef2929"),kn.toColor("#8ae234"),kn.toColor("#fce94f"),kn.toColor("#729fcf"),kn.toColor("#ad7fa8"),kn.toColor("#34e2e2"),kn.toColor("#eeeeec")],e=[0,95,135,175,215,255];for(let n=0;n<216;n++){let s=e[n/36%6|0],r=e[n/6%6|0],i=e[n%6];t.push({css:Kn.toCss(s,r,i),rgba:Kn.toRgba(s,r,i)})}for(let n=0;n<24;n++){let s=8+n*10;t.push({css:Kn.toCss(s,s,s),rgba:Kn.toRgba(s,s,s)})}return t})()),zl=kn.toColor("#ffffff"),zf=kn.toColor("#000000"),WO=kn.toColor("#ffffff"),GO=zf,rf={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117},nie=zl,$2=class extends It{constructor(t){super(),this._optionsService=t,this._contrastCache=new KO,this._halfContrastCache=new KO,this._onChangeColors=this._register(new Te),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:zl,background:zf,cursor:WO,cursorAccent:GO,selectionForeground:void 0,selectionBackgroundTransparent:rf,selectionBackgroundOpaque:mn.blend(zf,rf),selectionInactiveBackgroundTransparent:rf,selectionInactiveBackgroundOpaque:mn.blend(zf,rf),scrollbarSliderBackground:mn.opacity(zl,.2),scrollbarSliderHoverBackground:mn.opacity(zl,.4),scrollbarSliderActiveBackground:mn.opacity(zl,.5),overviewRulerBorder:zl,ansi:Yn.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this._register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this._register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}get colors(){return this._colors}_setTheme(t={}){let e=this._colors;if(e.foreground=on(t.foreground,zl),e.background=on(t.background,zf),e.cursor=mn.blend(e.background,on(t.cursor,WO)),e.cursorAccent=mn.blend(e.background,on(t.cursorAccent,GO)),e.selectionBackgroundTransparent=on(t.selectionBackground,rf),e.selectionBackgroundOpaque=mn.blend(e.background,e.selectionBackgroundTransparent),e.selectionInactiveBackgroundTransparent=on(t.selectionInactiveBackground,e.selectionBackgroundTransparent),e.selectionInactiveBackgroundOpaque=mn.blend(e.background,e.selectionInactiveBackgroundTransparent),e.selectionForeground=t.selectionForeground?on(t.selectionForeground,FO):void 0,e.selectionForeground===FO&&(e.selectionForeground=void 0),mn.isOpaque(e.selectionBackgroundTransparent)&&(e.selectionBackgroundTransparent=mn.opacity(e.selectionBackgroundTransparent,.3)),mn.isOpaque(e.selectionInactiveBackgroundTransparent)&&(e.selectionInactiveBackgroundTransparent=mn.opacity(e.selectionInactiveBackgroundTransparent,.3)),e.scrollbarSliderBackground=on(t.scrollbarSliderBackground,mn.opacity(e.foreground,.2)),e.scrollbarSliderHoverBackground=on(t.scrollbarSliderHoverBackground,mn.opacity(e.foreground,.4)),e.scrollbarSliderActiveBackground=on(t.scrollbarSliderActiveBackground,mn.opacity(e.foreground,.5)),e.overviewRulerBorder=on(t.overviewRulerBorder,nie),e.ansi=Yn.slice(),e.ansi[0]=on(t.black,Yn[0]),e.ansi[1]=on(t.red,Yn[1]),e.ansi[2]=on(t.green,Yn[2]),e.ansi[3]=on(t.yellow,Yn[3]),e.ansi[4]=on(t.blue,Yn[4]),e.ansi[5]=on(t.magenta,Yn[5]),e.ansi[6]=on(t.cyan,Yn[6]),e.ansi[7]=on(t.white,Yn[7]),e.ansi[8]=on(t.brightBlack,Yn[8]),e.ansi[9]=on(t.brightRed,Yn[9]),e.ansi[10]=on(t.brightGreen,Yn[10]),e.ansi[11]=on(t.brightYellow,Yn[11]),e.ansi[12]=on(t.brightBlue,Yn[12]),e.ansi[13]=on(t.brightMagenta,Yn[13]),e.ansi[14]=on(t.brightCyan,Yn[14]),e.ansi[15]=on(t.brightWhite,Yn[15]),t.extendedAnsi){let n=Math.min(e.ansi.length-16,t.extendedAnsi.length);for(let s=0;s<n;s++)e.ansi[s+16]=on(t.extendedAnsi[s],Yn[s+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(t){this._restoreColor(t),this._onChangeColors.fire(this.colors)}_restoreColor(t){if(t===void 0){for(let e=0;e<this._restoreColors.ansi.length;++e)this._colors.ansi[e]=this._restoreColors.ansi[e];return}switch(t){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[t]=this._restoreColors.ansi[t]}}modifyColors(t){t(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};$2=jn([qe(0,Js)],$2);function on(t,e){if(t!==void 0)try{return kn.toColor(t)}catch{}return e}var sie=class{constructor(...t){this._entries=new Map;for(let[e,n]of t)this.set(e,n)}set(t,e){let n=this._entries.get(t);return this._entries.set(t,e),n}forEach(t){for(let[e,n]of this._entries.entries())t(e,n)}has(t){return this._entries.has(t)}get(t){return this._entries.get(t)}},rie=class{constructor(){this._services=new sie,this._services.set(rE,this)}setService(t,e){this._services.set(t,e)}getService(t){return this._services.get(t)}createInstance(t,...e){let n=Jne(t).sort((i,a)=>i.index-a.index),s=[];for(let i of n){let a=this._services.get(i.id);if(!a)throw new Error(`[createInstance] ${t.name} depends on UNKNOWN service ${i.id._id}.`);s.push(a)}let r=n.length>0?n[0].index:e.length;if(e.length!==r)throw new Error(`[createInstance] First service dependency of ${t.name} at position ${r+1} conflicts with ${e.length} static arguments`);return new t(...e,...s)}},iie={trace:0,debug:1,info:2,warn:3,error:4,off:5},aie="xterm.js: ",z2=class extends It{constructor(t){super(),this._optionsService=t,this._logLevel=5,this._updateLogLevel(),this._register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel()))}get logLevel(){return this._logLevel}_updateLogLevel(){this._logLevel=iie[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(t){for(let e=0;e<t.length;e++)typeof t[e]=="function"&&(t[e]=t[e]())}_log(t,e,n){this._evalLazyOptionalParams(n),t.call(console,(this._optionsService.options.logger?"":aie)+e,...n)}trace(t,...e){this._logLevel<=0&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,t,e)}debug(t,...e){this._logLevel<=1&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,t,e)}info(t,...e){this._logLevel<=2&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,t,e)}warn(t,...e){this._logLevel<=3&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,t,e)}error(t,...e){this._logLevel<=4&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,t,e)}};z2=jn([qe(0,Js)],z2);var YO=class extends It{constructor(t){super(),this._maxLength=t,this.onDeleteEmitter=this._register(new Te),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this._register(new Te),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this._register(new Te),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(t){if(this._maxLength===t)return;let e=new Array(t);for(let n=0;n<Math.min(t,this.length);n++)e[n]=this._array[this._getCyclicIndex(n)];this._array=e,this._maxLength=t,this._startIndex=0}get length(){return this._length}set length(t){if(t>this._length)for(let e=this._length;e<t;e++)this._array[e]=void 0;this._length=t}get(t){return this._array[this._getCyclicIndex(t)]}set(t,e){this._array[this._getCyclicIndex(t)]=e}push(t){this._array[this._getCyclicIndex(this._length)]=t,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(t,e,...n){if(e){for(let s=t;s<this._length-e;s++)this._array[this._getCyclicIndex(s)]=this._array[this._getCyclicIndex(s+e)];this._length-=e,this.onDeleteEmitter.fire({index:t,amount:e})}for(let s=this._length-1;s>=t;s--)this._array[this._getCyclicIndex(s+n.length)]=this._array[this._getCyclicIndex(s)];for(let s=0;s<n.length;s++)this._array[this._getCyclicIndex(t+s)]=n[s];if(n.length&&this.onInsertEmitter.fire({index:t,amount:n.length}),this._length+n.length>this._maxLength){let s=this._length+n.length-this._maxLength;this._startIndex+=s,this._length=this._maxLength,this.onTrimEmitter.fire(s)}else this._length+=n.length}trimStart(t){t>this._length&&(t=this._length),this._startIndex+=t,this._length-=t,this.onTrimEmitter.fire(t)}shiftElements(t,e,n){if(!(e<=0)){if(t<0||t>=this._length)throw new Error("start argument out of range");if(t+n<0)throw new Error("Cannot shift elements in list beyond index 0");if(n>0){for(let r=e-1;r>=0;r--)this.set(t+r+n,this.get(t+r));let s=t+e+n-this._length;if(s>0)for(this._length+=s;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let s=0;s<e;s++)this.set(t+s+n,this.get(t+s))}}_getCyclicIndex(t){return(this._startIndex+t)%this._maxLength}},Mt=3,qn=Object.freeze(new Cm),x0=0,Ew=2,Ff=class SB{constructor(e,n,s=!1){this.isWrapped=s,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(e*Mt);let r=n||fi.fromCharData([0,UP,1,0]);for(let i=0;i<e;++i)this.setCell(i,r);this.length=e}get(e){let n=this._data[e*Mt+0],s=n&2097151;return[this._data[e*Mt+1],n&2097152?this._combined[e]:s?Fo(s):"",n>>22,n&2097152?this._combined[e].charCodeAt(this._combined[e].length-1):s]}set(e,n){this._data[e*Mt+1]=n[0],n[1].length>1?(this._combined[e]=n[1],this._data[e*Mt+0]=e|2097152|n[2]<<22):this._data[e*Mt+0]=n[1].charCodeAt(0)|n[2]<<22}getWidth(e){return this._data[e*Mt+0]>>22}hasWidth(e){return this._data[e*Mt+0]&12582912}getFg(e){return this._data[e*Mt+1]}getBg(e){return this._data[e*Mt+2]}hasContent(e){return this._data[e*Mt+0]&4194303}getCodePoint(e){let n=this._data[e*Mt+0];return n&2097152?this._combined[e].charCodeAt(this._combined[e].length-1):n&2097151}isCombined(e){return this._data[e*Mt+0]&2097152}getString(e){let n=this._data[e*Mt+0];return n&2097152?this._combined[e]:n&2097151?Fo(n&2097151):""}isProtected(e){return this._data[e*Mt+2]&536870912}loadCell(e,n){return x0=e*Mt,n.content=this._data[x0+0],n.fg=this._data[x0+1],n.bg=this._data[x0+2],n.content&2097152&&(n.combinedData=this._combined[e]),n.bg&268435456&&(n.extended=this._extendedAttrs[e]),n}setCell(e,n){n.content&2097152&&(this._combined[e]=n.combinedData),n.bg&268435456&&(this._extendedAttrs[e]=n.extended),this._data[e*Mt+0]=n.content,this._data[e*Mt+1]=n.fg,this._data[e*Mt+2]=n.bg}setCellFromCodepoint(e,n,s,r){r.bg&268435456&&(this._extendedAttrs[e]=r.extended),this._data[e*Mt+0]=n|s<<22,this._data[e*Mt+1]=r.fg,this._data[e*Mt+2]=r.bg}addCodepointToCell(e,n,s){let r=this._data[e*Mt+0];r&2097152?this._combined[e]+=Fo(n):r&2097151?(this._combined[e]=Fo(r&2097151)+Fo(n),r&=-2097152,r|=2097152):r=n|1<<22,s&&(r&=-12582913,r|=s<<22),this._data[e*Mt+0]=r}insertCells(e,n,s){if(e%=this.length,e&&this.getWidth(e-1)===2&&this.setCellFromCodepoint(e-1,0,1,s),n<this.length-e){let r=new fi;for(let i=this.length-e-n-1;i>=0;--i)this.setCell(e+n+i,this.loadCell(e+i,r));for(let i=0;i<n;++i)this.setCell(e+i,s)}else for(let r=e;r<this.length;++r)this.setCell(r,s);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,s)}deleteCells(e,n,s){if(e%=this.length,n<this.length-e){let r=new fi;for(let i=0;i<this.length-e-n;++i)this.setCell(e+i,this.loadCell(e+n+i,r));for(let i=this.length-n;i<this.length;++i)this.setCell(i,s)}else for(let r=e;r<this.length;++r)this.setCell(r,s);e&&this.getWidth(e-1)===2&&this.setCellFromCodepoint(e-1,0,1,s),this.getWidth(e)===0&&!this.hasContent(e)&&this.setCellFromCodepoint(e,0,1,s)}replaceCells(e,n,s,r=!1){if(r){for(e&&this.getWidth(e-1)===2&&!this.isProtected(e-1)&&this.setCellFromCodepoint(e-1,0,1,s),n<this.length&&this.getWidth(n-1)===2&&!this.isProtected(n)&&this.setCellFromCodepoint(n,0,1,s);e<n&&e<this.length;)this.isProtected(e)||this.setCell(e,s),e++;return}for(e&&this.getWidth(e-1)===2&&this.setCellFromCodepoint(e-1,0,1,s),n<this.length&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n,0,1,s);e<n&&e<this.length;)this.setCell(e++,s)}resize(e,n){if(e===this.length)return this._data.length*4*Ew<this._data.buffer.byteLength;let s=e*Mt;if(e>this.length){if(this._data.buffer.byteLength>=s*4)this._data=new Uint32Array(this._data.buffer,0,s);else{let r=new Uint32Array(s);r.set(this._data),this._data=r}for(let r=this.length;r<e;++r)this.setCell(r,n)}else{this._data=this._data.subarray(0,s);let r=Object.keys(this._combined);for(let a=0;a<r.length;a++){let l=parseInt(r[a],10);l>=e&&delete this._combined[l]}let i=Object.keys(this._extendedAttrs);for(let a=0;a<i.length;a++){let l=parseInt(i[a],10);l>=e&&delete this._extendedAttrs[l]}}return this.length=e,s*4*Ew<this._data.buffer.byteLength}cleanupMemory(){if(this._data.length*4*Ew<this._data.buffer.byteLength){let e=new Uint32Array(this._data.length);return e.set(this._data),this._data=e,1}return 0}fill(e,n=!1){if(n){for(let s=0;s<this.length;++s)this.isProtected(s)||this.setCell(s,e);return}this._combined={},this._extendedAttrs={};for(let s=0;s<this.length;++s)this.setCell(s,e)}copyFrom(e){this.length!==e.length?this._data=new Uint32Array(e._data):this._data.set(e._data),this.length=e.length,this._combined={};for(let n in e._combined)this._combined[n]=e._combined[n];this._extendedAttrs={};for(let n in e._extendedAttrs)this._extendedAttrs[n]=e._extendedAttrs[n];this.isWrapped=e.isWrapped}clone(){let e=new SB(0);e._data=new Uint32Array(this._data),e.length=this.length;for(let n in this._combined)e._combined[n]=this._combined[n];for(let n in this._extendedAttrs)e._extendedAttrs[n]=this._extendedAttrs[n];return e.isWrapped=this.isWrapped,e}getTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(this._data[e*Mt+0]&4194303)return e+(this._data[e*Mt+0]>>22);return 0}getNoBgTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(this._data[e*Mt+0]&4194303||this._data[e*Mt+2]&50331648)return e+(this._data[e*Mt+0]>>22);return 0}copyCellsFrom(e,n,s,r,i){let a=e._data;if(i)for(let u=r-1;u>=0;u--){for(let h=0;h<Mt;h++)this._data[(s+u)*Mt+h]=a[(n+u)*Mt+h];a[(n+u)*Mt+2]&268435456&&(this._extendedAttrs[s+u]=e._extendedAttrs[n+u])}else for(let u=0;u<r;u++){for(let h=0;h<Mt;h++)this._data[(s+u)*Mt+h]=a[(n+u)*Mt+h];a[(n+u)*Mt+2]&268435456&&(this._extendedAttrs[s+u]=e._extendedAttrs[n+u])}let l=Object.keys(e._combined);for(let u=0;u<l.length;u++){let h=parseInt(l[u],10);h>=n&&(this._combined[h-n+s]=e._combined[h])}}translateToString(e,n,s,r){n=n??0,s=s??this.length,e&&(s=Math.min(s,this.getTrimmedLength())),r&&(r.length=0);let i="";for(;n<s;){let a=this._data[n*Mt+0],l=a&2097151,u=a&2097152?this._combined[n]:l?Fo(l):Go;if(i+=u,r)for(let h=0;h<u.length;++h)r.push(n);n+=a>>22||1}return r&&r.push(n),i}};function oie(t,e,n,s,r,i){let a=[];for(let l=0;l<t.length-1;l++){let u=l,h=t.get(++u);if(!h.isWrapped)continue;let m=[t.get(l)];for(;u<t.length&&h.isWrapped;)m.push(h),h=t.get(++u);if(!i&&s>=l&&s<u){l+=m.length-1;continue}let p=0,g=Yp(m,p,e),y=1,b=0;for(;y<m.length;){let w=Yp(m,y,e),k=w-b,C=n-g,E=Math.min(k,C);m[p].copyCellsFrom(m[y],b,g,E,!1),g+=E,g===n&&(p++,g=0),b+=E,b===w&&(y++,b=0),g===0&&p!==0&&m[p-1].getWidth(n-1)===2&&(m[p].copyCellsFrom(m[p-1],n-1,g++,1,!1),m[p-1].setCell(n-1,r))}m[p].replaceCells(g,n,r);let _=0;for(let w=m.length-1;w>0&&(w>p||m[w].getTrimmedLength()===0);w--)_++;_>0&&(a.push(l+m.length-_),a.push(_)),l+=m.length-1}return a}function lie(t,e){let n=[],s=0,r=e[s],i=0;for(let a=0;a<t.length;a++)if(r===a){let l=e[++s];t.onDeleteEmitter.fire({index:a-i,amount:l}),a+=l-1,i+=l,r=e[++s]}else n.push(a);return{layout:n,countRemoved:i}}function cie(t,e){let n=[];for(let s=0;s<e.length;s++)n.push(t.get(e[s]));for(let s=0;s<n.length;s++)t.set(s,n[s]);t.length=e.length}function uie(t,e,n){let s=[],r=t.map((u,h)=>Yp(t,h,e)).reduce((u,h)=>u+h),i=0,a=0,l=0;for(;l<r;){if(r-l<n){s.push(r-l);break}i+=n;let u=Yp(t,a,e);i>u&&(i-=u,a++);let h=t[a].getWidth(i-1)===2;h&&i--;let m=h?n-1:n;s.push(m),l+=m}return s}function Yp(t,e,n){if(e===t.length-1)return t[e].getTrimmedLength();let s=!t[e].hasContent(n-1)&&t[e].getWidth(n-1)===1,r=t[e+1].getWidth(0)===2;return s&&r?n-1:n}var kB=class CB{constructor(e){this.line=e,this.isDisposed=!1,this._disposables=[],this._id=CB._nextId++,this._onDispose=this.register(new Te),this.onDispose=this._onDispose.event}get id(){return this._id}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),Ec(this._disposables),this._disposables.length=0)}register(e){return this._disposables.push(e),e}};kB._nextId=1;var hie=kB,es={},Fl=es.B;es[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""};es.A={"#":""};es.B=void 0;es[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""};es.C=es[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};es.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};es.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};es.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};es.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""};es.E=es[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};es.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""};es.H=es[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};es["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""};var ZO=4294967295,JO=class{constructor(t,e,n){this._hasScrollback=t,this._optionsService=e,this._bufferService=n,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=qn.clone(),this.savedCharset=Fl,this.markers=[],this._nullCell=fi.fromCharData([0,UP,1,0]),this._whitespaceCell=fi.fromCharData([0,Go,1,32]),this._isClearing=!1,this._memoryCleanupQueue=new Sv,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new YO(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(t){return t?(this._nullCell.fg=t.fg,this._nullCell.bg=t.bg,this._nullCell.extended=t.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new bv),this._nullCell}getWhitespaceCell(t){return t?(this._whitespaceCell.fg=t.fg,this._whitespaceCell.bg=t.bg,this._whitespaceCell.extended=t.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new bv),this._whitespaceCell}getBlankLine(t,e){return new Ff(this._bufferService.cols,this.getNullCell(t),e)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let t=this.ybase+this.y-this.ydisp;return t>=0&&t<this._rows}_getCorrectBufferLength(t){if(!this._hasScrollback)return t;let e=t+this._optionsService.rawOptions.scrollback;return e>ZO?ZO:e}fillViewportRows(t){if(this.lines.length===0){t===void 0&&(t=qn);let e=this._rows;for(;e--;)this.lines.push(this.getBlankLine(t))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new YO(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(t,e){let n=this.getNullCell(qn),s=0,r=this._getCorrectBufferLength(e);if(r>this.lines.maxLength&&(this.lines.maxLength=r),this.lines.length>0){if(this._cols<t)for(let a=0;a<this.lines.length;a++)s+=+this.lines.get(a).resize(t,n);let i=0;if(this._rows<e)for(let a=this._rows;a<e;a++)this.lines.length<e+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new Ff(t,n)):this.ybase>0&&this.lines.length<=this.ybase+this.y+i+1?(this.ybase--,i++,this.ydisp>0&&this.ydisp--):this.lines.push(new Ff(t,n)));else for(let a=this._rows;a>e;a--)this.lines.length>e+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(r<this.lines.maxLength){let a=this.lines.length-r;a>0&&(this.lines.trimStart(a),this.ybase=Math.max(this.ybase-a,0),this.ydisp=Math.max(this.ydisp-a,0),this.savedY=Math.max(this.savedY-a,0)),this.lines.maxLength=r}this.x=Math.min(this.x,t-1),this.y=Math.min(this.y,e-1),i&&(this.y+=i),this.savedX=Math.min(this.savedX,t-1),this.scrollTop=0}if(this.scrollBottom=e-1,this._isReflowEnabled&&(this._reflow(t,e),this._cols>t))for(let i=0;i<this.lines.length;i++)s+=+this.lines.get(i).resize(t,n);this._cols=t,this._rows=e,this._memoryCleanupQueue.clear(),s>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let t=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,t=!1);let e=0;for(;this._memoryCleanupPosition<this.lines.length;)if(e+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),e>100)return!0;return t}get _isReflowEnabled(){let t=this._optionsService.rawOptions.windowsPty;return t&&t.buildNumber?this._hasScrollback&&t.backend==="conpty"&&t.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(t,e){this._cols!==t&&(t>this._cols?this._reflowLarger(t,e):this._reflowSmaller(t,e))}_reflowLarger(t,e){let n=this._optionsService.rawOptions.reflowCursorLine,s=oie(this.lines,this._cols,t,this.ybase+this.y,this.getNullCell(qn),n);if(s.length>0){let r=lie(this.lines,s);cie(this.lines,r.layout),this._reflowLargerAdjustViewport(t,e,r.countRemoved)}}_reflowLargerAdjustViewport(t,e,n){let s=this.getNullCell(qn),r=n;for(;r-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<e&&this.lines.push(new Ff(t,s))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-n,0)}_reflowSmaller(t,e){let n=this._optionsService.rawOptions.reflowCursorLine,s=this.getNullCell(qn),r=[],i=0;for(let a=this.lines.length-1;a>=0;a--){let l=this.lines.get(a);if(!l||!l.isWrapped&&l.getTrimmedLength()<=t)continue;let u=[l];for(;l.isWrapped&&a>0;)l=this.lines.get(--a),u.unshift(l);if(!n){let E=this.ybase+this.y;if(E>=a&&E<a+u.length)continue}let h=u[u.length-1].getTrimmedLength(),m=uie(u,this._cols,t),p=m.length-u.length,g;this.ybase===0&&this.y!==this.lines.length-1?g=Math.max(0,this.y-this.lines.maxLength+p):g=Math.max(0,this.lines.length-this.lines.maxLength+p);let y=[];for(let E=0;E<p;E++){let A=this.getBlankLine(qn,!0);y.push(A)}y.length>0&&(r.push({start:a+u.length+i,newLines:y}),i+=y.length),u.push(...y);let b=m.length-1,_=m[b];_===0&&(b--,_=m[b]);let w=u.length-p-1,k=h;for(;w>=0;){let E=Math.min(k,_);if(u[b]===void 0)break;if(u[b].copyCellsFrom(u[w],k-E,_-E,E,!0),_-=E,_===0&&(b--,_=m[b]),k-=E,k===0){w--;let A=Math.max(w,0);k=Yp(u,A,this._cols)}}for(let E=0;E<u.length;E++)m[E]<t&&u[E].setCell(m[E],s);let C=p-g;for(;C-- >0;)this.ybase===0?this.y<e-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+i)-e&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+p,this.ybase+e-1)}if(r.length>0){let a=[],l=[];for(let _=0;_<this.lines.length;_++)l.push(this.lines.get(_));let u=this.lines.length,h=u-1,m=0,p=r[m];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+i);let g=0;for(let _=Math.min(this.lines.maxLength-1,u+i-1);_>=0;_--)if(p&&p.start>h+g){for(let w=p.newLines.length-1;w>=0;w--)this.lines.set(_--,p.newLines[w]);_++,a.push({index:h+1,amount:p.newLines.length}),g+=p.newLines.length,p=r[++m]}else this.lines.set(_,l[h--]);let y=0;for(let _=a.length-1;_>=0;_--)a[_].index+=y,this.lines.onInsertEmitter.fire(a[_]),y+=a[_].amount;let b=Math.max(0,u+i-this.lines.maxLength);b>0&&this.lines.onTrimEmitter.fire(b)}}translateBufferLineToString(t,e,n=0,s){let r=this.lines.get(t);return r?r.translateToString(e,n,s):""}getWrappedRangeForLine(t){let e=t,n=t;for(;e>0&&this.lines.get(e).isWrapped;)e--;for(;n+1<this.lines.length&&this.lines.get(n+1).isWrapped;)n++;return{first:e,last:n}}setupTabStops(t){for(t!=null?this.tabs[t]||(t=this.prevStop(t)):(this.tabs={},t=0);t<this._cols;t+=this._optionsService.rawOptions.tabStopWidth)this.tabs[t]=!0}prevStop(t){for(t==null&&(t=this.x);!this.tabs[--t]&&t>0;);return t>=this._cols?this._cols-1:t<0?0:t}nextStop(t){for(t==null&&(t=this.x);!this.tabs[++t]&&t<this._cols;);return t>=this._cols?this._cols-1:t<0?0:t}clearMarkers(t){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].line===t&&(this.markers[e].dispose(),this.markers.splice(e--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].dispose();this.markers.length=0,this._isClearing=!1}addMarker(t){let e=new hie(t);return this.markers.push(e),e.register(this.lines.onTrim(n=>{e.line-=n,e.line<0&&e.dispose()})),e.register(this.lines.onInsert(n=>{e.line>=n.index&&(e.line+=n.amount)})),e.register(this.lines.onDelete(n=>{e.line>=n.index&&e.line<n.index+n.amount&&e.dispose(),e.line>n.index&&(e.line-=n.amount)})),e.register(e.onDispose(()=>this._removeMarker(e))),e}_removeMarker(t){this._isClearing||this.markers.splice(this.markers.indexOf(t),1)}},die=class extends It{constructor(t,e){super(),this._optionsService=t,this._bufferService=e,this._onBufferActivate=this._register(new Te),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this._register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this._register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new JO(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new JO(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(t){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(t),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(t,e){this._normal.resize(t,e),this._alt.resize(t,e),this.setupTabStops(t)}setupTabStops(t){this._normal.setupTabStops(t),this._alt.setupTabStops(t)}},NB=2,EB=1,F2=class extends It{constructor(t){super(),this.isUserScrolling=!1,this._onResize=this._register(new Te),this.onResize=this._onResize.event,this._onScroll=this._register(new Te),this.onScroll=this._onScroll.event,this.cols=Math.max(t.rawOptions.cols||0,NB),this.rows=Math.max(t.rawOptions.rows||0,EB),this.buffers=this._register(new die(t,this)),this._register(this.buffers.onBufferActivate(e=>{this._onScroll.fire(e.activeBuffer.ydisp)}))}get buffer(){return this.buffers.active}resize(t,e){let n=this.cols!==t,s=this.rows!==e;this.cols=t,this.rows=e,this.buffers.resize(t,e),this._onResize.fire({cols:t,rows:e,colsChanged:n,rowsChanged:s})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(t,e=!1){let n=this.buffer,s;s=this._cachedBlankLine,(!s||s.length!==this.cols||s.getFg(0)!==t.fg||s.getBg(0)!==t.bg)&&(s=n.getBlankLine(t,e),this._cachedBlankLine=s),s.isWrapped=e;let r=n.ybase+n.scrollTop,i=n.ybase+n.scrollBottom;if(n.scrollTop===0){let a=n.lines.isFull;i===n.lines.length-1?a?n.lines.recycle().copyFrom(s):n.lines.push(s.clone()):n.lines.splice(i+1,0,s.clone()),a?this.isUserScrolling&&(n.ydisp=Math.max(n.ydisp-1,0)):(n.ybase++,this.isUserScrolling||n.ydisp++)}else{let a=i-r+1;n.lines.shiftElements(r+1,a-1,-1),n.lines.set(i,s.clone())}this.isUserScrolling||(n.ydisp=n.ybase),this._onScroll.fire(n.ydisp)}scrollLines(t,e){let n=this.buffer;if(t<0){if(n.ydisp===0)return;this.isUserScrolling=!0}else t+n.ydisp>=n.ybase&&(this.isUserScrolling=!1);let s=n.ydisp;n.ydisp=Math.max(Math.min(n.ydisp+t,n.ybase),0),s!==n.ydisp&&(e||this._onScroll.fire(n.ydisp))}};F2=jn([qe(0,Js)],F2);var Eu={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnEraseInDisplay:!1,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},reflowCursorLine:!1,rescaleOverlappingGlyphs:!1,rightClickSelectsWord:wv,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRuler:{}},fie=["normal","bold","100","200","300","400","500","600","700","800","900"],pie=class extends It{constructor(t){super(),this._onOptionChange=this._register(new Te),this.onOptionChange=this._onOptionChange.event;let e={...Eu};for(let n in t)if(n in e)try{let s=t[n];e[n]=this._sanitizeAndValidateOption(n,s)}catch(s){console.error(s)}this.rawOptions=e,this.options={...e},this._setupOptions(),this._register(bn(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(t,e){return this.onOptionChange(n=>{n===t&&e(this.rawOptions[t])})}onMultipleOptionChange(t,e){return this.onOptionChange(n=>{t.indexOf(n)!==-1&&e()})}_setupOptions(){let t=n=>{if(!(n in Eu))throw new Error(`No option with key "${n}"`);return this.rawOptions[n]},e=(n,s)=>{if(!(n in Eu))throw new Error(`No option with key "${n}"`);s=this._sanitizeAndValidateOption(n,s),this.rawOptions[n]!==s&&(this.rawOptions[n]=s,this._onOptionChange.fire(n))};for(let n in this.rawOptions){let s={get:t.bind(this,n),set:e.bind(this,n)};Object.defineProperty(this.options,n,s)}}_sanitizeAndValidateOption(t,e){switch(t){case"cursorStyle":if(e||(e=Eu[t]),!mie(e))throw new Error(`"${e}" is not a valid value for ${t}`);break;case"wordSeparator":e||(e=Eu[t]);break;case"fontWeight":case"fontWeightBold":if(typeof e=="number"&&1<=e&&e<=1e3)break;e=fie.includes(e)?e:Eu[t];break;case"cursorWidth":e=Math.floor(e);case"lineHeight":case"tabStopWidth":if(e<1)throw new Error(`${t} cannot be less than 1, value: ${e}`);break;case"minimumContrastRatio":e=Math.max(1,Math.min(21,Math.round(e*10)/10));break;case"scrollback":if(e=Math.min(e,4294967295),e<0)throw new Error(`${t} cannot be less than 0, value: ${e}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(e<=0)throw new Error(`${t} cannot be less than or equal to 0, value: ${e}`);break;case"rows":case"cols":if(!e&&e!==0)throw new Error(`${t} must be numeric, value: ${e}`);break;case"windowsPty":e=e??{};break}return e}};function mie(t){return t==="block"||t==="underline"||t==="bar"}function Uf(t,e=5){if(typeof t!="object")return t;let n=Array.isArray(t)?[]:{};for(let s in t)n[s]=e<=1?t[s]:t[s]&&Uf(t[s],e-1);return n}var XO=Object.freeze({insertMode:!1}),QO=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,cursorBlink:void 0,cursorStyle:void 0,origin:!1,reverseWraparound:!1,sendFocus:!1,synchronizedOutput:!1,wraparound:!0}),U2=class extends It{constructor(t,e,n){super(),this._bufferService=t,this._logService=e,this._optionsService=n,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this._register(new Te),this.onData=this._onData.event,this._onUserInput=this._register(new Te),this.onUserInput=this._onUserInput.event,this._onBinary=this._register(new Te),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this._register(new Te),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=Uf(XO),this.decPrivateModes=Uf(QO)}reset(){this.modes=Uf(XO),this.decPrivateModes=Uf(QO)}triggerDataEvent(t,e=!1){if(this._optionsService.rawOptions.disableStdin)return;let n=this._bufferService.buffer;e&&this._optionsService.rawOptions.scrollOnUserInput&&n.ybase!==n.ydisp&&this._onRequestScrollToBottom.fire(),e&&this._onUserInput.fire(),this._logService.debug(`sending data "${t}"`),this._logService.trace("sending data (codes)",()=>t.split("").map(s=>s.charCodeAt(0))),this._onData.fire(t)}triggerBinaryEvent(t){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${t}"`),this._logService.trace("sending binary (codes)",()=>t.split("").map(e=>e.charCodeAt(0))),this._onBinary.fire(t))}};U2=jn([qe(0,Zs),qe(1,WP),qe(2,Js)],U2);var eM={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:t=>t.button===4||t.action!==1?!1:(t.ctrl=!1,t.alt=!1,t.shift=!1,!0)},VT200:{events:19,restrict:t=>t.action!==32},DRAG:{events:23,restrict:t=>!(t.action===32&&t.button===3)},ANY:{events:31,restrict:t=>!0}};function Aw(t,e){let n=(t.ctrl?16:0)|(t.shift?4:0)|(t.alt?8:0);return t.button===4?(n|=64,n|=t.action):(n|=t.button&3,t.button&4&&(n|=64),t.button&8&&(n|=128),t.action===32?n|=32:t.action===0&&!e&&(n|=3)),n}var Rw=String.fromCharCode,tM={DEFAULT:t=>{let e=[Aw(t,!1)+32,t.col+32,t.row+32];return e[0]>255||e[1]>255||e[2]>255?"":`\x1B[M${Rw(e[0])}${Rw(e[1])}${Rw(e[2])}`},SGR:t=>{let e=t.action===0&&t.button!==4?"m":"M";return`\x1B[<${Aw(t,!0)};${t.col};${t.row}${e}`},SGR_PIXELS:t=>{let e=t.action===0&&t.button!==4?"m":"M";return`\x1B[<${Aw(t,!0)};${t.x};${t.y}${e}`}},H2=class extends It{constructor(t,e,n){super(),this._bufferService=t,this._coreService=e,this._optionsService=n,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._wheelPartialScroll=0,this._onProtocolChange=this._register(new Te),this.onProtocolChange=this._onProtocolChange.event;for(let s of Object.keys(eM))this.addProtocol(s,eM[s]);for(let s of Object.keys(tM))this.addEncoding(s,tM[s]);this.reset()}addProtocol(t,e){this._protocols[t]=e}addEncoding(t,e){this._encodings[t]=e}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(t){if(!this._protocols[t])throw new Error(`unknown protocol "${t}"`);this._activeProtocol=t,this._onProtocolChange.fire(this._protocols[t].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(t){if(!this._encodings[t])throw new Error(`unknown encoding "${t}"`);this._activeEncoding=t}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null,this._wheelPartialScroll=0}consumeWheelEvent(t,e,n){if(t.deltaY===0||t.shiftKey||e===void 0||n===void 0)return 0;let s=e/n,r=this._applyScrollModifier(t.deltaY,t);return t.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(r/=s+0,Math.abs(t.deltaY)<50&&(r*=.3),this._wheelPartialScroll+=r,r=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(r*=this._bufferService.rows),r}_applyScrollModifier(t,e){return e.altKey||e.ctrlKey||e.shiftKey?t*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:t*this._optionsService.rawOptions.scrollSensitivity}triggerMouseEvent(t){if(t.col<0||t.col>=this._bufferService.cols||t.row<0||t.row>=this._bufferService.rows||t.button===4&&t.action===32||t.button===3&&t.action!==32||t.button!==4&&(t.action===2||t.action===3)||(t.col++,t.row++,t.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,t,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(t))return!1;let e=this._encodings[this._activeEncoding](t);return e&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(e):this._coreService.triggerDataEvent(e,!0)),this._lastEvent=t,!0}explainEvents(t){return{down:!!(t&1),up:!!(t&2),drag:!!(t&4),move:!!(t&8),wheel:!!(t&16)}}_equalEvents(t,e,n){if(n){if(t.x!==e.x||t.y!==e.y)return!1}else if(t.col!==e.col||t.row!==e.row)return!1;return!(t.button!==e.button||t.action!==e.action||t.ctrl!==e.ctrl||t.alt!==e.alt||t.shift!==e.shift)}};H2=jn([qe(0,Zs),qe(1,Pc),qe(2,Js)],H2);var Tw=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],gie=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],Zn;function yie(t,e){let n=0,s=e.length-1,r;if(t<e[0][0]||t>e[s][1])return!1;for(;s>=n;)if(r=n+s>>1,t>e[r][1])n=r+1;else if(t<e[r][0])s=r-1;else return!0;return!1}var vie=class{constructor(){if(this.version="6",!Zn){Zn=new Uint8Array(65536),Zn.fill(1),Zn[0]=0,Zn.fill(0,1,32),Zn.fill(0,127,160),Zn.fill(2,4352,4448),Zn[9001]=2,Zn[9002]=2,Zn.fill(2,11904,42192),Zn[12351]=1,Zn.fill(2,44032,55204),Zn.fill(2,63744,64256),Zn.fill(2,65040,65050),Zn.fill(2,65072,65136),Zn.fill(2,65280,65377),Zn.fill(2,65504,65511);for(let t=0;t<Tw.length;++t)Zn.fill(0,Tw[t][0],Tw[t][1]+1)}}wcwidth(t){return t<32?0:t<127?1:t<65536?Zn[t]:yie(t,gie)?0:t>=131072&&t<=196605||t>=196608&&t<=262141?2:1}charProperties(t,e){let n=this.wcwidth(t),s=n===0&&e!==0;if(s){let r=Zl.extractWidth(e);r===0?s=!1:r>n&&(n=r)}return Zl.createPropertyValue(0,n,s)}},Zl=class ny{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new Te,this.onChange=this._onChange.event;let e=new vie;this.register(e),this._active=e.version,this._activeProvider=e}static extractShouldJoin(e){return(e&1)!==0}static extractWidth(e){return e>>1&3}static extractCharKind(e){return e>>3}static createPropertyValue(e,n,s=!1){return(e&16777215)<<3|(n&3)<<1|(s?1:0)}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(e){if(!this._providers[e])throw new Error(`unknown Unicode version "${e}"`);this._active=e,this._activeProvider=this._providers[e],this._onChange.fire(e)}register(e){this._providers[e.version]=e}wcwidth(e){return this._activeProvider.wcwidth(e)}getStringCellWidth(e){let n=0,s=0,r=e.length;for(let i=0;i<r;++i){let a=e.charCodeAt(i);if(55296<=a&&a<=56319){if(++i>=r)return n+this.wcwidth(a);let h=e.charCodeAt(i);56320<=h&&h<=57343?a=(a-55296)*1024+h-56320+65536:n+=this.wcwidth(h)}let l=this.charProperties(a,s),u=ny.extractWidth(l);ny.extractShouldJoin(l)&&(u-=ny.extractWidth(s)),n+=u,s=l}return n}charProperties(e,n){return this._activeProvider.charProperties(e,n)}},bie=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(t){this.glevel=t,this.charset=this._charsets[t]}setgCharset(t,e){this._charsets[t]=e,this.glevel===t&&(this.charset=e)}};function nM(t){let e=t.buffer.lines.get(t.buffer.ybase+t.buffer.y-1)?.get(t.cols-1),n=t.buffer.lines.get(t.buffer.ybase+t.buffer.y);n&&e&&(n.isWrapped=e[3]!==0&&e[3]!==32)}var af=2147483647,_ie=256,AB=class V2{constructor(e=32,n=32){if(this.maxLength=e,this.maxSubParamsLength=n,n>_ie)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(e),this.length=0,this._subParams=new Int32Array(n),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(e),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}static fromArray(e){let n=new V2;if(!e.length)return n;for(let s=Array.isArray(e[0])?1:0;s<e.length;++s){let r=e[s];if(Array.isArray(r))for(let i=0;i<r.length;++i)n.addSubParam(r[i]);else n.addParam(r)}return n}clone(){let e=new V2(this.maxLength,this.maxSubParamsLength);return e.params.set(this.params),e.length=this.length,e._subParams.set(this._subParams),e._subParamsLength=this._subParamsLength,e._subParamsIdx.set(this._subParamsIdx),e._rejectDigits=this._rejectDigits,e._rejectSubDigits=this._rejectSubDigits,e._digitIsSub=this._digitIsSub,e}toArray(){let e=[];for(let n=0;n<this.length;++n){e.push(this.params[n]);let s=this._subParamsIdx[n]>>8,r=this._subParamsIdx[n]&255;r-s>0&&e.push(Array.prototype.slice.call(this._subParams,s,r))}return e}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(e){if(this._digitIsSub=!1,this.length>=this.maxLength){this._rejectDigits=!0;return}if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=e>af?af:e}addSubParam(e){if(this._digitIsSub=!0,!!this.length){if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength){this._rejectSubDigits=!0;return}if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=e>af?af:e,this._subParamsIdx[this.length-1]++}}hasSubParams(e){return(this._subParamsIdx[e]&255)-(this._subParamsIdx[e]>>8)>0}getSubParams(e){let n=this._subParamsIdx[e]>>8,s=this._subParamsIdx[e]&255;return s-n>0?this._subParams.subarray(n,s):null}getSubParamsAll(){let e={};for(let n=0;n<this.length;++n){let s=this._subParamsIdx[n]>>8,r=this._subParamsIdx[n]&255;r-s>0&&(e[n]=this._subParams.slice(s,r))}return e}addDigit(e){let n;if(this._rejectDigits||!(n=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let s=this._digitIsSub?this._subParams:this.params,r=s[n-1];s[n-1]=~r?Math.min(r*10+e,af):e}},of=[],xie=class{constructor(){this._state=0,this._active=of,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(t,e){this._handlers[t]===void 0&&(this._handlers[t]=[]);let n=this._handlers[t];return n.push(e),{dispose:()=>{let s=n.indexOf(e);s!==-1&&n.splice(s,1)}}}clearHandler(t){this._handlers[t]&&delete this._handlers[t]}setHandlerFallback(t){this._handlerFb=t}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=of}reset(){if(this._state===2)for(let t=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;t>=0;--t)this._active[t].end(!1);this._stack.paused=!1,this._active=of,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||of,!this._active.length)this._handlerFb(this._id,"START");else for(let t=this._active.length-1;t>=0;t--)this._active[t].start()}_put(t,e,n){if(!this._active.length)this._handlerFb(this._id,"PUT",Yb(t,e,n));else for(let s=this._active.length-1;s>=0;s--)this._active[s].put(t,e,n)}start(){this.reset(),this._state=1}put(t,e,n){if(this._state!==3){if(this._state===1)for(;e<n;){let s=t[e++];if(s===59){this._state=2,this._start();break}if(s<48||57<s){this._state=3;return}this._id===-1&&(this._id=0),this._id=this._id*10+s-48}this._state===2&&n-e>0&&this._put(t,e,n)}}end(t,e=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),!this._active.length)this._handlerFb(this._id,"END",t);else{let n=!1,s=this._active.length-1,r=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,n=e,r=this._stack.fallThrough,this._stack.paused=!1),!r&&n===!1){for(;s>=0&&(n=this._active[s].end(t),n!==!0);s--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,n;s--}for(;s>=0;s--)if(n=this._active[s].end(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,n}this._active=of,this._id=-1,this._state=0}}},Nr=class{constructor(t){this._handler=t,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(t,e,n){this._hitLimit||(this._data+=Yb(t,e,n),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}end(t){let e=!1;if(this._hitLimit)e=!1;else if(t&&(e=this._handler(this._data),e instanceof Promise))return e.then(n=>(this._data="",this._hitLimit=!1,n));return this._data="",this._hitLimit=!1,e}},lf=[],wie=class{constructor(){this._handlers=Object.create(null),this._active=lf,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=lf}registerHandler(t,e){this._handlers[t]===void 0&&(this._handlers[t]=[]);let n=this._handlers[t];return n.push(e),{dispose:()=>{let s=n.indexOf(e);s!==-1&&n.splice(s,1)}}}clearHandler(t){this._handlers[t]&&delete this._handlers[t]}setHandlerFallback(t){this._handlerFb=t}reset(){if(this._active.length)for(let t=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;t>=0;--t)this._active[t].unhook(!1);this._stack.paused=!1,this._active=lf,this._ident=0}hook(t,e){if(this.reset(),this._ident=t,this._active=this._handlers[t]||lf,!this._active.length)this._handlerFb(this._ident,"HOOK",e);else for(let n=this._active.length-1;n>=0;n--)this._active[n].hook(e)}put(t,e,n){if(!this._active.length)this._handlerFb(this._ident,"PUT",Yb(t,e,n));else for(let s=this._active.length-1;s>=0;s--)this._active[s].put(t,e,n)}unhook(t,e=!0){if(!this._active.length)this._handlerFb(this._ident,"UNHOOK",t);else{let n=!1,s=this._active.length-1,r=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,n=e,r=this._stack.fallThrough,this._stack.paused=!1),!r&&n===!1){for(;s>=0&&(n=this._active[s].unhook(t),n!==!0);s--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,n;s--}for(;s>=0;s--)if(n=this._active[s].unhook(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,n}this._active=lf,this._ident=0}},Hf=new AB;Hf.addParam(0);var sM=class{constructor(t){this._handler=t,this._data="",this._params=Hf,this._hitLimit=!1}hook(t){this._params=t.length>1||t.params[0]?t.clone():Hf,this._data="",this._hitLimit=!1}put(t,e,n){this._hitLimit||(this._data+=Yb(t,e,n),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}unhook(t){let e=!1;if(this._hitLimit)e=!1;else if(t&&(e=this._handler(this._data,this._params),e instanceof Promise))return e.then(n=>(this._params=Hf,this._data="",this._hitLimit=!1,n));return this._params=Hf,this._data="",this._hitLimit=!1,e}},Sie=class{constructor(t){this.table=new Uint8Array(t)}setDefault(t,e){this.table.fill(t<<4|e)}add(t,e,n,s){this.table[e<<8|t]=n<<4|s}addMany(t,e,n,s){for(let r=0;r<t.length;r++)this.table[e<<8|t[r]]=n<<4|s}},ai=160,kie=(function(){let t=new Sie(4095),e=Array.apply(null,Array(256)).map((l,u)=>u),n=(l,u)=>e.slice(l,u),s=n(32,127),r=n(0,24);r.push(25),r.push.apply(r,n(28,32));let i=n(0,14),a;t.setDefault(1,0),t.addMany(s,0,2,0);for(a in i)t.addMany([24,26,153,154],a,3,0),t.addMany(n(128,144),a,3,0),t.addMany(n(144,152),a,3,0),t.add(156,a,0,0),t.add(27,a,11,1),t.add(157,a,4,8),t.addMany([152,158,159],a,0,7),t.add(155,a,11,3),t.add(144,a,11,9);return t.addMany(r,0,3,0),t.addMany(r,1,3,1),t.add(127,1,0,1),t.addMany(r,8,0,8),t.addMany(r,3,3,3),t.add(127,3,0,3),t.addMany(r,4,3,4),t.add(127,4,0,4),t.addMany(r,6,3,6),t.addMany(r,5,3,5),t.add(127,5,0,5),t.addMany(r,2,3,2),t.add(127,2,0,2),t.add(93,1,4,8),t.addMany(s,8,5,8),t.add(127,8,5,8),t.addMany([156,27,24,26,7],8,6,0),t.addMany(n(28,32),8,0,8),t.addMany([88,94,95],1,0,7),t.addMany(s,7,0,7),t.addMany(r,7,0,7),t.add(156,7,0,0),t.add(127,7,0,7),t.add(91,1,11,3),t.addMany(n(64,127),3,7,0),t.addMany(n(48,60),3,8,4),t.addMany([60,61,62,63],3,9,4),t.addMany(n(48,60),4,8,4),t.addMany(n(64,127),4,7,0),t.addMany([60,61,62,63],4,0,6),t.addMany(n(32,64),6,0,6),t.add(127,6,0,6),t.addMany(n(64,127),6,0,0),t.addMany(n(32,48),3,9,5),t.addMany(n(32,48),5,9,5),t.addMany(n(48,64),5,0,6),t.addMany(n(64,127),5,7,0),t.addMany(n(32,48),4,9,5),t.addMany(n(32,48),1,9,2),t.addMany(n(32,48),2,9,2),t.addMany(n(48,127),2,10,0),t.addMany(n(48,80),1,10,0),t.addMany(n(81,88),1,10,0),t.addMany([89,90,92],1,10,0),t.addMany(n(96,127),1,10,0),t.add(80,1,11,9),t.addMany(r,9,0,9),t.add(127,9,0,9),t.addMany(n(28,32),9,0,9),t.addMany(n(32,48),9,9,12),t.addMany(n(48,60),9,8,10),t.addMany([60,61,62,63],9,9,10),t.addMany(r,11,0,11),t.addMany(n(32,128),11,0,11),t.addMany(n(28,32),11,0,11),t.addMany(r,10,0,10),t.add(127,10,0,10),t.addMany(n(28,32),10,0,10),t.addMany(n(48,60),10,8,10),t.addMany([60,61,62,63],10,0,11),t.addMany(n(32,48),10,9,12),t.addMany(r,12,0,12),t.add(127,12,0,12),t.addMany(n(28,32),12,0,12),t.addMany(n(32,48),12,9,12),t.addMany(n(48,64),12,0,11),t.addMany(n(64,127),12,12,13),t.addMany(n(64,127),10,12,13),t.addMany(n(64,127),9,12,13),t.addMany(r,13,13,13),t.addMany(s,13,13,13),t.add(127,13,0,13),t.addMany([27,156,24,26],13,14,0),t.add(ai,0,2,0),t.add(ai,8,5,8),t.add(ai,6,0,6),t.add(ai,11,0,11),t.add(ai,13,13,13),t})(),Cie=class extends It{constructor(t=kie){super(),this._transitions=t,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new AB,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(e,n,s)=>{},this._executeHandlerFb=e=>{},this._csiHandlerFb=(e,n)=>{},this._escHandlerFb=e=>{},this._errorHandlerFb=e=>e,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this._register(bn(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this._register(new xie),this._dcsParser=this._register(new wie),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(t,e=[64,126]){let n=0;if(t.prefix){if(t.prefix.length>1)throw new Error("only one byte as prefix supported");if(n=t.prefix.charCodeAt(0),n&&60>n||n>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(t.intermediates){if(t.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let r=0;r<t.intermediates.length;++r){let i=t.intermediates.charCodeAt(r);if(32>i||i>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");n<<=8,n|=i}}if(t.final.length!==1)throw new Error("final must be a single byte");let s=t.final.charCodeAt(0);if(e[0]>s||s>e[1])throw new Error(`final must be in range ${e[0]} .. ${e[1]}`);return n<<=8,n|=s,n}identToString(t){let e=[];for(;t;)e.push(String.fromCharCode(t&255)),t>>=8;return e.reverse().join("")}setPrintHandler(t){this._printHandler=t}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(t,e){let n=this._identifier(t,[48,126]);this._escHandlers[n]===void 0&&(this._escHandlers[n]=[]);let s=this._escHandlers[n];return s.push(e),{dispose:()=>{let r=s.indexOf(e);r!==-1&&s.splice(r,1)}}}clearEscHandler(t){this._escHandlers[this._identifier(t,[48,126])]&&delete this._escHandlers[this._identifier(t,[48,126])]}setEscHandlerFallback(t){this._escHandlerFb=t}setExecuteHandler(t,e){this._executeHandlers[t.charCodeAt(0)]=e}clearExecuteHandler(t){this._executeHandlers[t.charCodeAt(0)]&&delete this._executeHandlers[t.charCodeAt(0)]}setExecuteHandlerFallback(t){this._executeHandlerFb=t}registerCsiHandler(t,e){let n=this._identifier(t);this._csiHandlers[n]===void 0&&(this._csiHandlers[n]=[]);let s=this._csiHandlers[n];return s.push(e),{dispose:()=>{let r=s.indexOf(e);r!==-1&&s.splice(r,1)}}}clearCsiHandler(t){this._csiHandlers[this._identifier(t)]&&delete this._csiHandlers[this._identifier(t)]}setCsiHandlerFallback(t){this._csiHandlerFb=t}registerDcsHandler(t,e){return this._dcsParser.registerHandler(this._identifier(t),e)}clearDcsHandler(t){this._dcsParser.clearHandler(this._identifier(t))}setDcsHandlerFallback(t){this._dcsParser.setHandlerFallback(t)}registerOscHandler(t,e){return this._oscParser.registerHandler(t,e)}clearOscHandler(t){this._oscParser.clearHandler(t)}setOscHandlerFallback(t){this._oscParser.setHandlerFallback(t)}setErrorHandler(t){this._errorHandler=t}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(t,e,n,s,r){this._parseStack.state=t,this._parseStack.handlers=e,this._parseStack.handlerPos=n,this._parseStack.transition=s,this._parseStack.chunkPos=r}parse(t,e,n){let s=0,r=0,i=0,a;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,i=this._parseStack.chunkPos+1;else{if(n===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let l=this._parseStack.handlers,u=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(n===!1&&u>-1){for(;u>=0&&(a=l[u](this._params),a!==!0);u--)if(a instanceof Promise)return this._parseStack.handlerPos=u,a}this._parseStack.handlers=[];break;case 4:if(n===!1&&u>-1){for(;u>=0&&(a=l[u](),a!==!0);u--)if(a instanceof Promise)return this._parseStack.handlerPos=u,a}this._parseStack.handlers=[];break;case 6:if(s=t[this._parseStack.chunkPos],a=this._dcsParser.unhook(s!==24&&s!==26,n),a)return a;s===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(s=t[this._parseStack.chunkPos],a=this._oscParser.end(s!==24&&s!==26,n),a)return a;s===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break}this._parseStack.state=0,i=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=this._parseStack.transition&15}for(let l=i;l<e;++l){switch(s=t[l],r=this._transitions.table[this.currentState<<8|(s<160?s:ai)],r>>4){case 2:for(let g=l+1;;++g){if(g>=e||(s=t[g])<32||s>126&&s<ai){this._printHandler(t,l,g),l=g-1;break}if(++g>=e||(s=t[g])<32||s>126&&s<ai){this._printHandler(t,l,g),l=g-1;break}if(++g>=e||(s=t[g])<32||s>126&&s<ai){this._printHandler(t,l,g),l=g-1;break}if(++g>=e||(s=t[g])<32||s>126&&s<ai){this._printHandler(t,l,g),l=g-1;break}}break;case 3:this._executeHandlers[s]?this._executeHandlers[s]():this._executeHandlerFb(s),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:l,code:s,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let u=this._csiHandlers[this._collect<<8|s],h=u?u.length-1:-1;for(;h>=0&&(a=u[h](this._params),a!==!0);h--)if(a instanceof Promise)return this._preserveStack(3,u,h,r,l),a;h<0&&this._csiHandlerFb(this._collect<<8|s,this._params),this.precedingJoinState=0;break;case 8:do switch(s){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(s-48)}while(++l<e&&(s=t[l])>47&&s<60);l--;break;case 9:this._collect<<=8,this._collect|=s;break;case 10:let m=this._escHandlers[this._collect<<8|s],p=m?m.length-1:-1;for(;p>=0&&(a=m[p](),a!==!0);p--)if(a instanceof Promise)return this._preserveStack(4,m,p,r,l),a;p<0&&this._escHandlerFb(this._collect<<8|s),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|s,this._params);break;case 13:for(let g=l+1;;++g)if(g>=e||(s=t[g])===24||s===26||s===27||s>127&&s<ai){this._dcsParser.put(t,l,g),l=g-1;break}break;case 14:if(a=this._dcsParser.unhook(s!==24&&s!==26),a)return this._preserveStack(6,[],0,r,l),a;s===27&&(r|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let g=l+1;;g++)if(g>=e||(s=t[g])<32||s>127&&s<ai){this._oscParser.put(t,l,g),l=g-1;break}break;case 6:if(a=this._oscParser.end(s!==24&&s!==26),a)return this._preserveStack(5,[],0,r,l),a;s===27&&(r|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break}this.currentState=r&15}}},Nie=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,Eie=/^[\da-f]+$/;function rM(t){if(!t)return;let e=t.toLowerCase();if(e.indexOf("rgb:")===0){e=e.slice(4);let n=Nie.exec(e);if(n){let s=n[1]?15:n[4]?255:n[7]?4095:65535;return[Math.round(parseInt(n[1]||n[4]||n[7]||n[10],16)/s*255),Math.round(parseInt(n[2]||n[5]||n[8]||n[11],16)/s*255),Math.round(parseInt(n[3]||n[6]||n[9]||n[12],16)/s*255)]}}else if(e.indexOf("#")===0&&(e=e.slice(1),Eie.exec(e)&&[3,6,9,12].includes(e.length))){let n=e.length/3,s=[0,0,0];for(let r=0;r<3;++r){let i=parseInt(e.slice(n*r,n*r+n),16);s[r]=n===1?i<<4:n===2?i:n===3?i>>4:i>>8}return s}}function jw(t,e){let n=t.toString(16),s=n.length<2?"0"+n:n;switch(e){case 4:return n[0];case 8:return s;case 12:return(s+s).slice(0,3);default:return s+s}}function Aie(t,e=16){let[n,s,r]=t;return`rgb:${jw(n,e)}/${jw(s,e)}/${jw(r,e)}`}var Rie={"(":0,")":1,"*":2,"+":3,"-":1,".":2},Lo=131072,iM=10;function aM(t,e){if(t>24)return e.setWinLines||!1;switch(t){case 1:return!!e.restoreWin;case 2:return!!e.minimizeWin;case 3:return!!e.setWinPosition;case 4:return!!e.setWinSizePixels;case 5:return!!e.raiseWin;case 6:return!!e.lowerWin;case 7:return!!e.refreshWin;case 8:return!!e.setWinSizeChars;case 9:return!!e.maximizeWin;case 10:return!!e.fullscreenWin;case 11:return!!e.getWinState;case 13:return!!e.getWinPosition;case 14:return!!e.getWinSizePixels;case 15:return!!e.getScreenSizePixels;case 16:return!!e.getCellSizePixels;case 18:return!!e.getWinSizeChars;case 19:return!!e.getScreenSizeChars;case 20:return!!e.getIconTitle;case 21:return!!e.getWinTitle;case 22:return!!e.pushTitle;case 23:return!!e.popTitle;case 24:return!!e.setWinLines}return!1}var oM=5e3,lM=0,Tie=class extends It{constructor(t,e,n,s,r,i,a,l,u=new Cie){super(),this._bufferService=t,this._charsetService=e,this._coreService=n,this._logService=s,this._optionsService=r,this._oscLinkService=i,this._coreMouseService=a,this._unicodeService=l,this._parser=u,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new Yne,this._utf8Decoder=new Zne,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=qn.clone(),this._eraseAttrDataInternal=qn.clone(),this._onRequestBell=this._register(new Te),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this._register(new Te),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this._register(new Te),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this._register(new Te),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this._register(new Te),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this._register(new Te),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this._register(new Te),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this._register(new Te),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this._register(new Te),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this._register(new Te),this.onLineFeed=this._onLineFeed.event,this._onScroll=this._register(new Te),this.onScroll=this._onScroll.event,this._onTitleChange=this._register(new Te),this.onTitleChange=this._onTitleChange.event,this._onColor=this._register(new Te),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this._register(this._parser),this._dirtyRowTracker=new q2(this._bufferService),this._activeBuffer=this._bufferService.buffer,this._register(this._bufferService.buffers.onBufferActivate(h=>this._activeBuffer=h.activeBuffer)),this._parser.setCsiHandlerFallback((h,m)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(h),params:m.toArray()})}),this._parser.setEscHandlerFallback(h=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(h)})}),this._parser.setExecuteHandlerFallback(h=>{this._logService.debug("Unknown EXECUTE code: ",{code:h})}),this._parser.setOscHandlerFallback((h,m,p)=>{this._logService.debug("Unknown OSC code: ",{identifier:h,action:m,data:p})}),this._parser.setDcsHandlerFallback((h,m,p)=>{m==="HOOK"&&(p=p.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(h),action:m,payload:p})}),this._parser.setPrintHandler((h,m,p)=>this.print(h,m,p)),this._parser.registerCsiHandler({final:"@"},h=>this.insertChars(h)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},h=>this.scrollLeft(h)),this._parser.registerCsiHandler({final:"A"},h=>this.cursorUp(h)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},h=>this.scrollRight(h)),this._parser.registerCsiHandler({final:"B"},h=>this.cursorDown(h)),this._parser.registerCsiHandler({final:"C"},h=>this.cursorForward(h)),this._parser.registerCsiHandler({final:"D"},h=>this.cursorBackward(h)),this._parser.registerCsiHandler({final:"E"},h=>this.cursorNextLine(h)),this._parser.registerCsiHandler({final:"F"},h=>this.cursorPrecedingLine(h)),this._parser.registerCsiHandler({final:"G"},h=>this.cursorCharAbsolute(h)),this._parser.registerCsiHandler({final:"H"},h=>this.cursorPosition(h)),this._parser.registerCsiHandler({final:"I"},h=>this.cursorForwardTab(h)),this._parser.registerCsiHandler({final:"J"},h=>this.eraseInDisplay(h,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},h=>this.eraseInDisplay(h,!0)),this._parser.registerCsiHandler({final:"K"},h=>this.eraseInLine(h,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},h=>this.eraseInLine(h,!0)),this._parser.registerCsiHandler({final:"L"},h=>this.insertLines(h)),this._parser.registerCsiHandler({final:"M"},h=>this.deleteLines(h)),this._parser.registerCsiHandler({final:"P"},h=>this.deleteChars(h)),this._parser.registerCsiHandler({final:"S"},h=>this.scrollUp(h)),this._parser.registerCsiHandler({final:"T"},h=>this.scrollDown(h)),this._parser.registerCsiHandler({final:"X"},h=>this.eraseChars(h)),this._parser.registerCsiHandler({final:"Z"},h=>this.cursorBackwardTab(h)),this._parser.registerCsiHandler({final:"`"},h=>this.charPosAbsolute(h)),this._parser.registerCsiHandler({final:"a"},h=>this.hPositionRelative(h)),this._parser.registerCsiHandler({final:"b"},h=>this.repeatPrecedingCharacter(h)),this._parser.registerCsiHandler({final:"c"},h=>this.sendDeviceAttributesPrimary(h)),this._parser.registerCsiHandler({prefix:">",final:"c"},h=>this.sendDeviceAttributesSecondary(h)),this._parser.registerCsiHandler({final:"d"},h=>this.linePosAbsolute(h)),this._parser.registerCsiHandler({final:"e"},h=>this.vPositionRelative(h)),this._parser.registerCsiHandler({final:"f"},h=>this.hVPosition(h)),this._parser.registerCsiHandler({final:"g"},h=>this.tabClear(h)),this._parser.registerCsiHandler({final:"h"},h=>this.setMode(h)),this._parser.registerCsiHandler({prefix:"?",final:"h"},h=>this.setModePrivate(h)),this._parser.registerCsiHandler({final:"l"},h=>this.resetMode(h)),this._parser.registerCsiHandler({prefix:"?",final:"l"},h=>this.resetModePrivate(h)),this._parser.registerCsiHandler({final:"m"},h=>this.charAttributes(h)),this._parser.registerCsiHandler({final:"n"},h=>this.deviceStatus(h)),this._parser.registerCsiHandler({prefix:"?",final:"n"},h=>this.deviceStatusPrivate(h)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},h=>this.softReset(h)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},h=>this.setCursorStyle(h)),this._parser.registerCsiHandler({final:"r"},h=>this.setScrollRegion(h)),this._parser.registerCsiHandler({final:"s"},h=>this.saveCursor(h)),this._parser.registerCsiHandler({final:"t"},h=>this.windowOptions(h)),this._parser.registerCsiHandler({final:"u"},h=>this.restoreCursor(h)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},h=>this.insertColumns(h)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},h=>this.deleteColumns(h)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},h=>this.selectProtected(h)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},h=>this.requestMode(h,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},h=>this.requestMode(h,!1)),this._parser.setExecuteHandler(ve.BEL,()=>this.bell()),this._parser.setExecuteHandler(ve.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(ve.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(ve.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(ve.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(ve.BS,()=>this.backspace()),this._parser.setExecuteHandler(ve.HT,()=>this.tab()),this._parser.setExecuteHandler(ve.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(ve.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(ey.IND,()=>this.index()),this._parser.setExecuteHandler(ey.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(ey.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new Nr(h=>(this.setTitle(h),this.setIconName(h),!0))),this._parser.registerOscHandler(1,new Nr(h=>this.setIconName(h))),this._parser.registerOscHandler(2,new Nr(h=>this.setTitle(h))),this._parser.registerOscHandler(4,new Nr(h=>this.setOrReportIndexedColor(h))),this._parser.registerOscHandler(8,new Nr(h=>this.setHyperlink(h))),this._parser.registerOscHandler(10,new Nr(h=>this.setOrReportFgColor(h))),this._parser.registerOscHandler(11,new Nr(h=>this.setOrReportBgColor(h))),this._parser.registerOscHandler(12,new Nr(h=>this.setOrReportCursorColor(h))),this._parser.registerOscHandler(104,new Nr(h=>this.restoreIndexedColor(h))),this._parser.registerOscHandler(110,new Nr(h=>this.restoreFgColor(h))),this._parser.registerOscHandler(111,new Nr(h=>this.restoreBgColor(h))),this._parser.registerOscHandler(112,new Nr(h=>this.restoreCursorColor(h))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let h in es)this._parser.registerEscHandler({intermediates:"(",final:h},()=>this.selectCharset("("+h)),this._parser.registerEscHandler({intermediates:")",final:h},()=>this.selectCharset(")"+h)),this._parser.registerEscHandler({intermediates:"*",final:h},()=>this.selectCharset("*"+h)),this._parser.registerEscHandler({intermediates:"+",final:h},()=>this.selectCharset("+"+h)),this._parser.registerEscHandler({intermediates:"-",final:h},()=>this.selectCharset("-"+h)),this._parser.registerEscHandler({intermediates:".",final:h},()=>this.selectCharset("."+h)),this._parser.registerEscHandler({intermediates:"/",final:h},()=>this.selectCharset("/"+h));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(h=>(this._logService.error("Parsing error: ",h),h)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new sM((h,m)=>this.requestStatusString(h,m)))}getAttrData(){return this._curAttrData}_preserveStack(t,e,n,s){this._parseStack.paused=!0,this._parseStack.cursorStartX=t,this._parseStack.cursorStartY=e,this._parseStack.decodedLength=n,this._parseStack.position=s}_logSlowResolvingAsync(t){this._logService.logLevel<=3&&Promise.race([t,new Promise((e,n)=>setTimeout(()=>n("#SLOW_TIMEOUT"),oM))]).catch(e=>{if(e!=="#SLOW_TIMEOUT")throw e;console.warn(`async parser handler taking longer than ${oM} ms`)})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(t,e){let n,s=this._activeBuffer.x,r=this._activeBuffer.y,i=0,a=this._parseStack.paused;if(a){if(n=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,e))return this._logSlowResolvingAsync(n),n;s=this._parseStack.cursorStartX,r=this._parseStack.cursorStartY,this._parseStack.paused=!1,t.length>Lo&&(i=this._parseStack.position+Lo)}if(this._logService.logLevel<=1&&this._logService.debug(`parsing data ${typeof t=="string"?` "${t}"`:` "${Array.prototype.map.call(t,h=>String.fromCharCode(h)).join("")}"`}`),this._logService.logLevel===0&&this._logService.trace("parsing data (codes)",typeof t=="string"?t.split("").map(h=>h.charCodeAt(0)):t),this._parseBuffer.length<t.length&&this._parseBuffer.length<Lo&&(this._parseBuffer=new Uint32Array(Math.min(t.length,Lo))),a||this._dirtyRowTracker.clearRange(),t.length>Lo)for(let h=i;h<t.length;h+=Lo){let m=h+Lo<t.length?h+Lo:t.length,p=typeof t=="string"?this._stringDecoder.decode(t.substring(h,m),this._parseBuffer):this._utf8Decoder.decode(t.subarray(h,m),this._parseBuffer);if(n=this._parser.parse(this._parseBuffer,p))return this._preserveStack(s,r,p,h),this._logSlowResolvingAsync(n),n}else if(!a){let h=typeof t=="string"?this._stringDecoder.decode(t,this._parseBuffer):this._utf8Decoder.decode(t,this._parseBuffer);if(n=this._parser.parse(this._parseBuffer,h))return this._preserveStack(s,r,h,0),this._logSlowResolvingAsync(n),n}(this._activeBuffer.x!==s||this._activeBuffer.y!==r)&&this._onCursorMove.fire();let l=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),u=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);u<this._bufferService.rows&&this._onRequestRefreshRows.fire({start:Math.min(u,this._bufferService.rows-1),end:Math.min(l,this._bufferService.rows-1)})}print(t,e,n){let s,r,i=this._charsetService.charset,a=this._optionsService.rawOptions.screenReaderMode,l=this._bufferService.cols,u=this._coreService.decPrivateModes.wraparound,h=this._coreService.modes.insertMode,m=this._curAttrData,p=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&n-e>0&&p.getWidth(this._activeBuffer.x-1)===2&&p.setCellFromCodepoint(this._activeBuffer.x-1,0,1,m);let g=this._parser.precedingJoinState;for(let y=e;y<n;++y){if(s=t[y],s<127&&i){let k=i[String.fromCharCode(s)];k&&(s=k.charCodeAt(0))}let b=this._unicodeService.charProperties(s,g);r=Zl.extractWidth(b);let _=Zl.extractShouldJoin(b),w=_?Zl.extractWidth(g):0;if(g=b,a&&this._onA11yChar.fire(Fo(s)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+r-w>l){if(u){let k=p,C=this._activeBuffer.x-w;for(this._activeBuffer.x=w,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),p=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),w>0&&p instanceof Ff&&p.copyCellsFrom(k,C,0,w,!1);C<l;)k.setCellFromCodepoint(C++,0,1,m)}else if(this._activeBuffer.x=l-1,r===2)continue}if(_&&this._activeBuffer.x){let k=p.getWidth(this._activeBuffer.x-1)?1:2;p.addCodepointToCell(this._activeBuffer.x-k,s,r);for(let C=r-w;--C>=0;)p.setCellFromCodepoint(this._activeBuffer.x++,0,0,m);continue}if(h&&(p.insertCells(this._activeBuffer.x,r-w,this._activeBuffer.getNullCell(m)),p.getWidth(l-1)===2&&p.setCellFromCodepoint(l-1,0,1,m)),p.setCellFromCodepoint(this._activeBuffer.x++,s,r,m),r>0)for(;--r;)p.setCellFromCodepoint(this._activeBuffer.x++,0,0,m)}this._parser.precedingJoinState=g,this._activeBuffer.x<l&&n-e>0&&p.getWidth(this._activeBuffer.x)===0&&!p.hasContent(this._activeBuffer.x)&&p.setCellFromCodepoint(this._activeBuffer.x,0,1,m),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(t,e){return t.final==="t"&&!t.prefix&&!t.intermediates?this._parser.registerCsiHandler(t,n=>aM(n.params[0],this._optionsService.rawOptions.windowOptions)?e(n):!0):this._parser.registerCsiHandler(t,e)}registerDcsHandler(t,e){return this._parser.registerDcsHandler(t,new sM(e))}registerEscHandler(t,e){return this._parser.registerEscHandler(t,e)}registerOscHandler(t,e){return this._parser.registerOscHandler(t,new Nr(e))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);t.hasWidth(this._activeBuffer.x)&&!t.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-t),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(t=this._bufferService.cols-1){this._activeBuffer.x=Math.min(t,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(t,e){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=t,this._activeBuffer.y=this._activeBuffer.scrollTop+e):(this._activeBuffer.x=t,this._activeBuffer.y=e),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(t,e){this._restrictCursor(),this._setCursor(this._activeBuffer.x+t,this._activeBuffer.y+e)}cursorUp(t){let e=this._activeBuffer.y-this._activeBuffer.scrollTop;return e>=0?this._moveCursor(0,-Math.min(e,t.params[0]||1)):this._moveCursor(0,-(t.params[0]||1)),!0}cursorDown(t){let e=this._activeBuffer.scrollBottom-this._activeBuffer.y;return e>=0?this._moveCursor(0,Math.min(e,t.params[0]||1)):this._moveCursor(0,t.params[0]||1),!0}cursorForward(t){return this._moveCursor(t.params[0]||1,0),!0}cursorBackward(t){return this._moveCursor(-(t.params[0]||1),0),!0}cursorNextLine(t){return this.cursorDown(t),this._activeBuffer.x=0,!0}cursorPrecedingLine(t){return this.cursorUp(t),this._activeBuffer.x=0,!0}cursorCharAbsolute(t){return this._setCursor((t.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(t){return this._setCursor(t.length>=2?(t.params[1]||1)-1:0,(t.params[0]||1)-1),!0}charPosAbsolute(t){return this._setCursor((t.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(t){return this._moveCursor(t.params[0]||1,0),!0}linePosAbsolute(t){return this._setCursor(this._activeBuffer.x,(t.params[0]||1)-1),!0}vPositionRelative(t){return this._moveCursor(0,t.params[0]||1),!0}hVPosition(t){return this.cursorPosition(t),!0}tabClear(t){let e=t.params[0];return e===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:e===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(t){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let e=t.params[0]||1;for(;e--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(t){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let e=t.params[0]||1;for(;e--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(t){let e=t.params[0];return e===1&&(this._curAttrData.bg|=536870912),(e===2||e===0)&&(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(t,e,n,s=!1,r=!1){let i=this._activeBuffer.lines.get(this._activeBuffer.ybase+t);i.replaceCells(e,n,this._activeBuffer.getNullCell(this._eraseAttrData()),r),s&&(i.isWrapped=!1)}_resetBufferLine(t,e=!1){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+t);n&&(n.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),e),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+t),n.isWrapped=!1)}eraseInDisplay(t,e=!1){this._restrictCursor(this._bufferService.cols);let n;switch(t.params[0]){case 0:for(n=this._activeBuffer.y,this._dirtyRowTracker.markDirty(n),this._eraseInBufferLine(n++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,e);n<this._bufferService.rows;n++)this._resetBufferLine(n,e);this._dirtyRowTracker.markDirty(n);break;case 1:for(n=this._activeBuffer.y,this._dirtyRowTracker.markDirty(n),this._eraseInBufferLine(n,0,this._activeBuffer.x+1,!0,e),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(n+1).isWrapped=!1);n--;)this._resetBufferLine(n,e);this._dirtyRowTracker.markDirty(0);break;case 2:if(this._optionsService.rawOptions.scrollOnEraseInDisplay){for(n=this._bufferService.rows,this._dirtyRowTracker.markRangeDirty(0,n-1);n--&&!this._activeBuffer.lines.get(this._activeBuffer.ybase+n)?.getTrimmedLength(););for(;n>=0;n--)this._bufferService.scroll(this._eraseAttrData())}else{for(n=this._bufferService.rows,this._dirtyRowTracker.markDirty(n-1);n--;)this._resetBufferLine(n,e);this._dirtyRowTracker.markDirty(0)}break;case 3:let s=this._activeBuffer.lines.length-this._bufferService.rows;s>0&&(this._activeBuffer.lines.trimStart(s),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-s,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-s,0),this._onScroll.fire(0));break}return!0}eraseInLine(t,e=!1){switch(this._restrictCursor(this._bufferService.cols),t.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,e);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,e);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,e);break}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(t){this._restrictCursor();let e=t.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let n=this._activeBuffer.ybase+this._activeBuffer.y,s=this._bufferService.rows-1-this._activeBuffer.scrollBottom,r=this._bufferService.rows-1+this._activeBuffer.ybase-s+1;for(;e--;)this._activeBuffer.lines.splice(r-1,1),this._activeBuffer.lines.splice(n,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(t){this._restrictCursor();let e=t.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let n=this._activeBuffer.ybase+this._activeBuffer.y,s;for(s=this._bufferService.rows-1-this._activeBuffer.scrollBottom,s=this._bufferService.rows-1+this._activeBuffer.ybase-s;e--;)this._activeBuffer.lines.splice(n,1),this._activeBuffer.lines.splice(s,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(t){this._restrictCursor();let e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return e&&(e.insertCells(this._activeBuffer.x,t.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(t){this._restrictCursor();let e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return e&&(e.deleteCells(this._activeBuffer.x,t.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(t){let e=t.params[0]||1;for(;e--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(t){let e=t.params[0]||1;for(;e--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(qn));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(t){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let e=t.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);s.deleteCells(0,e,this._activeBuffer.getNullCell(this._eraseAttrData())),s.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(t){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let e=t.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);s.insertCells(0,e,this._activeBuffer.getNullCell(this._eraseAttrData())),s.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(t){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let e=t.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);s.insertCells(this._activeBuffer.x,e,this._activeBuffer.getNullCell(this._eraseAttrData())),s.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(t){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let e=t.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);s.deleteCells(this._activeBuffer.x,e,this._activeBuffer.getNullCell(this._eraseAttrData())),s.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(t){this._restrictCursor();let e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return e&&(e.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(t.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(t){let e=this._parser.precedingJoinState;if(!e)return!0;let n=t.params[0]||1,s=Zl.extractWidth(e),r=this._activeBuffer.x-s,i=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(r),a=new Uint32Array(i.length*n),l=0;for(let h=0;h<i.length;){let m=i.codePointAt(h)||0;a[l++]=m,h+=m>65535?2:1}let u=l;for(let h=1;h<n;++h)a.copyWithin(u,0,l),u+=l;return this.print(a,0,u),!0}sendDeviceAttributesPrimary(t){return t.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(ve.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(ve.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(t){return t.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(ve.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(ve.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(t.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(ve.ESC+"[>83;40003;0c")),!0}_is(t){return(this._optionsService.rawOptions.termName+"").indexOf(t)===0}setMode(t){for(let e=0;e<t.length;e++)switch(t.params[e]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0;break}return!0}setModePrivate(t){for(let e=0;e<t.length;e++)switch(t.params[e]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,Fl),this._charsetService.setgCharset(1,Fl),this._charsetService.setgCharset(2,Fl),this._charsetService.setgCharset(3,Fl);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!0;break}return!0}resetMode(t){for(let e=0;e<t.length;e++)switch(t.params[e]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1;break}return!0}resetModePrivate(t){for(let e=0;e<t.length;e++)switch(t.params[e]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),t.params[e]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!1,this._onRequestRefreshRows.fire(void 0);break}return!0}requestMode(t,e){let n;(_=>(_[_.NOT_RECOGNIZED=0]="NOT_RECOGNIZED",_[_.SET=1]="SET",_[_.RESET=2]="RESET",_[_.PERMANENTLY_SET=3]="PERMANENTLY_SET",_[_.PERMANENTLY_RESET=4]="PERMANENTLY_RESET"))(n||={});let s=this._coreService.decPrivateModes,{activeProtocol:r,activeEncoding:i}=this._coreMouseService,a=this._coreService,{buffers:l,cols:u}=this._bufferService,{active:h,alt:m}=l,p=this._optionsService.rawOptions,g=(_,w)=>(a.triggerDataEvent(`${ve.ESC}[${e?"":"?"}${_};${w}$y`),!0),y=_=>_?1:2,b=t.params[0];return e?b===2?g(b,4):b===4?g(b,y(a.modes.insertMode)):b===12?g(b,3):b===20?g(b,y(p.convertEol)):g(b,0):b===1?g(b,y(s.applicationCursorKeys)):b===3?g(b,p.windowOptions.setWinLines?u===80?2:u===132?1:0:0):b===6?g(b,y(s.origin)):b===7?g(b,y(s.wraparound)):b===8?g(b,3):b===9?g(b,y(r==="X10")):b===12?g(b,y(p.cursorBlink)):b===25?g(b,y(!a.isCursorHidden)):b===45?g(b,y(s.reverseWraparound)):b===66?g(b,y(s.applicationKeypad)):b===67?g(b,4):b===1e3?g(b,y(r==="VT200")):b===1002?g(b,y(r==="DRAG")):b===1003?g(b,y(r==="ANY")):b===1004?g(b,y(s.sendFocus)):b===1005?g(b,4):b===1006?g(b,y(i==="SGR")):b===1015?g(b,4):b===1016?g(b,y(i==="SGR_PIXELS")):b===1048?g(b,1):b===47||b===1047||b===1049?g(b,y(h===m)):b===2004?g(b,y(s.bracketedPasteMode)):b===2026?g(b,y(s.synchronizedOutput)):g(b,0)}_updateAttrColor(t,e,n,s,r){return e===2?(t|=50331648,t&=-16777216,t|=Cm.fromColorRGB([n,s,r])):e===5&&(t&=-50331904,t|=33554432|n&255),t}_extractColor(t,e,n){let s=[0,0,-1,0,0,0],r=0,i=0;do{if(s[i+r]=t.params[e+i],t.hasSubParams(e+i)){let a=t.getSubParams(e+i),l=0;do s[1]===5&&(r=1),s[i+l+1+r]=a[l];while(++l<a.length&&l+i+1+r<s.length);break}if(s[1]===5&&i+r>=2||s[1]===2&&i+r>=5)break;s[1]&&(r=1)}while(++i+e<t.length&&i+r<s.length);for(let a=2;a<s.length;++a)s[a]===-1&&(s[a]=0);switch(s[0]){case 38:n.fg=this._updateAttrColor(n.fg,s[1],s[3],s[4],s[5]);break;case 48:n.bg=this._updateAttrColor(n.bg,s[1],s[3],s[4],s[5]);break;case 58:n.extended=n.extended.clone(),n.extended.underlineColor=this._updateAttrColor(n.extended.underlineColor,s[1],s[3],s[4],s[5])}return i}_processUnderline(t,e){e.extended=e.extended.clone(),(!~t||t>5)&&(t=1),e.extended.underlineStyle=t,e.fg|=268435456,t===0&&(e.fg&=-268435457),e.updateExtended()}_processSGR0(t){t.fg=qn.fg,t.bg=qn.bg,t.extended=t.extended.clone(),t.extended.underlineStyle=0,t.extended.underlineColor&=-67108864,t.updateExtended()}charAttributes(t){if(t.length===1&&t.params[0]===0)return this._processSGR0(this._curAttrData),!0;let e=t.length,n,s=this._curAttrData;for(let r=0;r<e;r++)n=t.params[r],n>=30&&n<=37?(s.fg&=-50331904,s.fg|=16777216|n-30):n>=40&&n<=47?(s.bg&=-50331904,s.bg|=16777216|n-40):n>=90&&n<=97?(s.fg&=-50331904,s.fg|=16777216|n-90|8):n>=100&&n<=107?(s.bg&=-50331904,s.bg|=16777216|n-100|8):n===0?this._processSGR0(s):n===1?s.fg|=134217728:n===3?s.bg|=67108864:n===4?(s.fg|=268435456,this._processUnderline(t.hasSubParams(r)?t.getSubParams(r)[0]:1,s)):n===5?s.fg|=536870912:n===7?s.fg|=67108864:n===8?s.fg|=1073741824:n===9?s.fg|=2147483648:n===2?s.bg|=134217728:n===21?this._processUnderline(2,s):n===22?(s.fg&=-134217729,s.bg&=-134217729):n===23?s.bg&=-67108865:n===24?(s.fg&=-268435457,this._processUnderline(0,s)):n===25?s.fg&=-536870913:n===27?s.fg&=-67108865:n===28?s.fg&=-1073741825:n===29?s.fg&=2147483647:n===39?(s.fg&=-67108864,s.fg|=qn.fg&16777215):n===49?(s.bg&=-67108864,s.bg|=qn.bg&16777215):n===38||n===48||n===58?r+=this._extractColor(t,r,s):n===53?s.bg|=1073741824:n===55?s.bg&=-1073741825:n===59?(s.extended=s.extended.clone(),s.extended.underlineColor=-1,s.updateExtended()):n===100?(s.fg&=-67108864,s.fg|=qn.fg&16777215,s.bg&=-67108864,s.bg|=qn.bg&16777215):this._logService.debug("Unknown SGR attribute: %d.",n);return!0}deviceStatus(t){switch(t.params[0]){case 5:this._coreService.triggerDataEvent(`${ve.ESC}[0n`);break;case 6:let e=this._activeBuffer.y+1,n=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${ve.ESC}[${e};${n}R`);break}return!0}deviceStatusPrivate(t){if(t.params[0]===6){let e=this._activeBuffer.y+1,n=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${ve.ESC}[?${e};${n}R`)}return!0}softReset(t){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=qn.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(t){let e=t.length===0?1:t.params[0];if(e===0)this._coreService.decPrivateModes.cursorStyle=void 0,this._coreService.decPrivateModes.cursorBlink=void 0;else{switch(e){case 1:case 2:this._coreService.decPrivateModes.cursorStyle="block";break;case 3:case 4:this._coreService.decPrivateModes.cursorStyle="underline";break;case 5:case 6:this._coreService.decPrivateModes.cursorStyle="bar";break}let n=e%2===1;this._coreService.decPrivateModes.cursorBlink=n}return!0}setScrollRegion(t){let e=t.params[0]||1,n;return(t.length<2||(n=t.params[1])>this._bufferService.rows||n===0)&&(n=this._bufferService.rows),n>e&&(this._activeBuffer.scrollTop=e-1,this._activeBuffer.scrollBottom=n-1,this._setCursor(0,0)),!0}windowOptions(t){if(!aM(t.params[0],this._optionsService.rawOptions.windowOptions))return!0;let e=t.length>1?t.params[1]:0;switch(t.params[0]){case 14:e!==2&&this._onRequestWindowsOptionsReport.fire(0);break;case 16:this._onRequestWindowsOptionsReport.fire(1);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${ve.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:(e===0||e===2)&&(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>iM&&this._windowTitleStack.shift()),(e===0||e===1)&&(this._iconNameStack.push(this._iconName),this._iconNameStack.length>iM&&this._iconNameStack.shift());break;case 23:(e===0||e===2)&&this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),(e===0||e===1)&&this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop());break}return!0}saveCursor(t){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(t){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(t){return this._windowTitle=t,this._onTitleChange.fire(t),!0}setIconName(t){return this._iconName=t,!0}setOrReportIndexedColor(t){let e=[],n=t.split(";");for(;n.length>1;){let s=n.shift(),r=n.shift();if(/^\d+$/.exec(s)){let i=parseInt(s);if(cM(i))if(r==="?")e.push({type:0,index:i});else{let a=rM(r);a&&e.push({type:1,index:i,color:a})}}}return e.length&&this._onColor.fire(e),!0}setHyperlink(t){let e=t.indexOf(";");if(e===-1)return!0;let n=t.slice(0,e).trim(),s=t.slice(e+1);return s?this._createHyperlink(n,s):n.trim()?!1:this._finishHyperlink()}_createHyperlink(t,e){this._getCurrentLinkId()&&this._finishHyperlink();let n=t.split(":"),s,r=n.findIndex(i=>i.startsWith("id="));return r!==-1&&(s=n[r].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:s,uri:e}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(t,e){let n=t.split(";");for(let s=0;s<n.length&&!(e>=this._specialColors.length);++s,++e)if(n[s]==="?")this._onColor.fire([{type:0,index:this._specialColors[e]}]);else{let r=rM(n[s]);r&&this._onColor.fire([{type:1,index:this._specialColors[e],color:r}])}return!0}setOrReportFgColor(t){return this._setOrReportSpecialColor(t,0)}setOrReportBgColor(t){return this._setOrReportSpecialColor(t,1)}setOrReportCursorColor(t){return this._setOrReportSpecialColor(t,2)}restoreIndexedColor(t){if(!t)return this._onColor.fire([{type:2}]),!0;let e=[],n=t.split(";");for(let s=0;s<n.length;++s)if(/^\d+$/.exec(n[s])){let r=parseInt(n[s]);cM(r)&&e.push({type:2,index:r})}return e.length&&this._onColor.fire(e),!0}restoreFgColor(t){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(t){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(t){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,Fl),!0}selectCharset(t){return t.length!==2?(this.selectDefaultCharset(),!0):(t[0]==="/"||this._charsetService.setgCharset(Rie[t[0]],es[t[1]]||Fl),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let t=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,t,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=qn.clone(),this._eraseAttrDataInternal=qn.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=this._curAttrData.bg&67108863,this._eraseAttrDataInternal}setgLevel(t){return this._charsetService.setgLevel(t),!0}screenAlignmentPattern(){let t=new fi;t.content=1<<22|69,t.fg=this._curAttrData.fg,t.bg=this._curAttrData.bg,this._setCursor(0,0);for(let e=0;e<this._bufferService.rows;++e){let n=this._activeBuffer.ybase+this._activeBuffer.y+e,s=this._activeBuffer.lines.get(n);s&&(s.fill(t),s.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(t,e){let n=a=>(this._coreService.triggerDataEvent(`${ve.ESC}${a}${ve.ESC}\\`),!0),s=this._bufferService.buffer,r=this._optionsService.rawOptions;return n(t==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:t==='"p'?'P1$r61;1"p':t==="r"?`P1$r${s.scrollTop+1};${s.scrollBottom+1}r`:t==="m"?"P1$r0m":t===" q"?`P1$r${{block:2,underline:4,bar:6}[r.cursorStyle]-(r.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(t,e){this._dirtyRowTracker.markRangeDirty(t,e)}},q2=class{constructor(t){this._bufferService=t,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(t){t<this.start?this.start=t:t>this.end&&(this.end=t)}markRangeDirty(t,e){t>e&&(lM=t,t=e,e=lM),t<this.start&&(this.start=t),e>this.end&&(this.end=e)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};q2=jn([qe(0,Zs)],q2);function cM(t){return 0<=t&&t<256}var jie=5e7,uM=12,Oie=50,Mie=class extends It{constructor(t){super(),this._action=t,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this._register(new Te),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(t,e){if(e!==void 0&&this._syncCalls>e){this._syncCalls=0;return}if(this._pendingData+=t.length,this._writeBuffer.push(t),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;this._isSyncWriting=!0;let n;for(;n=this._writeBuffer.shift();){this._action(n);let s=this._callbacks.shift();s&&s()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(t,e){if(this._pendingData>jie)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput){this._didUserInput=!1,this._pendingData+=t.length,this._writeBuffer.push(t),this._callbacks.push(e),this._innerWrite();return}setTimeout(()=>this._innerWrite())}this._pendingData+=t.length,this._writeBuffer.push(t),this._callbacks.push(e)}_innerWrite(t=0,e=!0){let n=t||performance.now();for(;this._writeBuffer.length>this._bufferOffset;){let s=this._writeBuffer[this._bufferOffset],r=this._action(s,e);if(r){let a=l=>performance.now()-n>=uM?setTimeout(()=>this._innerWrite(0,l)):this._innerWrite(n,l);r.catch(l=>(queueMicrotask(()=>{throw l}),Promise.resolve(!1))).then(a);return}let i=this._callbacks[this._bufferOffset];if(i&&i(),this._bufferOffset++,this._pendingData-=s.length,performance.now()-n>=uM)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>Oie&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}},K2=class{constructor(t){this._bufferService=t,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(t){let e=this._bufferService.buffer;if(t.id===void 0){let l=e.addMarker(e.ybase+e.y),u={data:t,id:this._nextId++,lines:[l]};return l.onDispose(()=>this._removeMarkerFromLink(u,l)),this._dataByLinkId.set(u.id,u),u.id}let n=t,s=this._getEntryIdKey(n),r=this._entriesWithId.get(s);if(r)return this.addLineToLink(r.id,e.ybase+e.y),r.id;let i=e.addMarker(e.ybase+e.y),a={id:this._nextId++,key:this._getEntryIdKey(n),data:n,lines:[i]};return i.onDispose(()=>this._removeMarkerFromLink(a,i)),this._entriesWithId.set(a.key,a),this._dataByLinkId.set(a.id,a),a.id}addLineToLink(t,e){let n=this._dataByLinkId.get(t);if(n&&n.lines.every(s=>s.line!==e)){let s=this._bufferService.buffer.addMarker(e);n.lines.push(s),s.onDispose(()=>this._removeMarkerFromLink(n,s))}}getLinkData(t){return this._dataByLinkId.get(t)?.data}_getEntryIdKey(t){return`${t.id};;${t.uri}`}_removeMarkerFromLink(t,e){let n=t.lines.indexOf(e);n!==-1&&(t.lines.splice(n,1),t.lines.length===0&&(t.data.id!==void 0&&this._entriesWithId.delete(t.key),this._dataByLinkId.delete(t.id)))}};K2=jn([qe(0,Zs)],K2);var hM=!1,Iie=class extends It{constructor(t){super(),this._windowsWrappingHeuristics=this._register(new Ch),this._onBinary=this._register(new Te),this.onBinary=this._onBinary.event,this._onData=this._register(new Te),this.onData=this._onData.event,this._onLineFeed=this._register(new Te),this.onLineFeed=this._onLineFeed.event,this._onResize=this._register(new Te),this.onResize=this._onResize.event,this._onWriteParsed=this._register(new Te),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this._register(new Te),this._instantiationService=new rie,this.optionsService=this._register(new pie(t)),this._instantiationService.setService(Js,this.optionsService),this._bufferService=this._register(this._instantiationService.createInstance(F2)),this._instantiationService.setService(Zs,this._bufferService),this._logService=this._register(this._instantiationService.createInstance(z2)),this._instantiationService.setService(WP,this._logService),this.coreService=this._register(this._instantiationService.createInstance(U2)),this._instantiationService.setService(Pc,this.coreService),this.coreMouseService=this._register(this._instantiationService.createInstance(H2)),this._instantiationService.setService(KP,this.coreMouseService),this.unicodeService=this._register(this._instantiationService.createInstance(Zl)),this._instantiationService.setService(ese,this.unicodeService),this._charsetService=this._instantiationService.createInstance(bie),this._instantiationService.setService(Qne,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(K2),this._instantiationService.setService(GP,this._oscLinkService),this._inputHandler=this._register(new Tie(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this._register(_s.forward(this._inputHandler.onLineFeed,this._onLineFeed)),this._register(this._inputHandler),this._register(_s.forward(this._bufferService.onResize,this._onResize)),this._register(_s.forward(this.coreService.onData,this._onData)),this._register(_s.forward(this.coreService.onBinary,this._onBinary)),this._register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom(!0))),this._register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this._register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this._register(this._bufferService.onScroll(()=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this._register(new Mie((e,n)=>this._inputHandler.parse(e,n))),this._register(_s.forward(this._writeBuffer.onWriteParsed,this._onWriteParsed))}get onScroll(){return this._onScrollApi||(this._onScrollApi=this._register(new Te),this._onScroll.event(t=>{this._onScrollApi?.fire(t.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(t){for(let e in t)this.optionsService.options[e]=t[e]}write(t,e){this._writeBuffer.write(t,e)}writeSync(t,e){this._logService.logLevel<=3&&!hM&&(this._logService.warn("writeSync is unreliable and will be removed soon."),hM=!0),this._writeBuffer.writeSync(t,e)}input(t,e=!0){this.coreService.triggerDataEvent(t,e)}resize(t,e){isNaN(t)||isNaN(e)||(t=Math.max(t,NB),e=Math.max(e,EB),this._bufferService.resize(t,e))}scroll(t,e=!1){this._bufferService.scroll(t,e)}scrollLines(t,e){this._bufferService.scrollLines(t,e)}scrollPages(t){this.scrollLines(t*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(t){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(t){let e=t-this._bufferService.buffer.ydisp;e!==0&&this.scrollLines(e)}registerEscHandler(t,e){return this._inputHandler.registerEscHandler(t,e)}registerDcsHandler(t,e){return this._inputHandler.registerDcsHandler(t,e)}registerCsiHandler(t,e){return this._inputHandler.registerCsiHandler(t,e)}registerOscHandler(t,e){return this._inputHandler.registerOscHandler(t,e)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let t=!1,e=this.optionsService.rawOptions.windowsPty;e&&e.buildNumber!==void 0&&e.buildNumber!==void 0?t=e.backend==="conpty"&&e.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(t=!0),t?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let t=[];t.push(this.onLineFeed(nM.bind(null,this._bufferService))),t.push(this.registerCsiHandler({final:"H"},()=>(nM(this._bufferService),!1))),this._windowsWrappingHeuristics.value=bn(()=>{for(let e of t)e.dispose()})}}},Die={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};function Lie(t,e,n,s){let r={type:0,cancel:!1,key:void 0},i=(t.shiftKey?1:0)|(t.altKey?2:0)|(t.ctrlKey?4:0)|(t.metaKey?8:0);switch(t.keyCode){case 0:t.key==="UIKeyInputUpArrow"?e?r.key=ve.ESC+"OA":r.key=ve.ESC+"[A":t.key==="UIKeyInputLeftArrow"?e?r.key=ve.ESC+"OD":r.key=ve.ESC+"[D":t.key==="UIKeyInputRightArrow"?e?r.key=ve.ESC+"OC":r.key=ve.ESC+"[C":t.key==="UIKeyInputDownArrow"&&(e?r.key=ve.ESC+"OB":r.key=ve.ESC+"[B");break;case 8:r.key=t.ctrlKey?"\b":ve.DEL,t.altKey&&(r.key=ve.ESC+r.key);break;case 9:if(t.shiftKey){r.key=ve.ESC+"[Z";break}r.key=ve.HT,r.cancel=!0;break;case 13:r.key=t.altKey?ve.ESC+ve.CR:ve.CR,r.cancel=!0;break;case 27:r.key=ve.ESC,t.altKey&&(r.key=ve.ESC+ve.ESC),r.cancel=!0;break;case 37:if(t.metaKey)break;i?r.key=ve.ESC+"[1;"+(i+1)+"D":e?r.key=ve.ESC+"OD":r.key=ve.ESC+"[D";break;case 39:if(t.metaKey)break;i?r.key=ve.ESC+"[1;"+(i+1)+"C":e?r.key=ve.ESC+"OC":r.key=ve.ESC+"[C";break;case 38:if(t.metaKey)break;i?r.key=ve.ESC+"[1;"+(i+1)+"A":e?r.key=ve.ESC+"OA":r.key=ve.ESC+"[A";break;case 40:if(t.metaKey)break;i?r.key=ve.ESC+"[1;"+(i+1)+"B":e?r.key=ve.ESC+"OB":r.key=ve.ESC+"[B";break;case 45:!t.shiftKey&&!t.ctrlKey&&(r.key=ve.ESC+"[2~");break;case 46:i?r.key=ve.ESC+"[3;"+(i+1)+"~":r.key=ve.ESC+"[3~";break;case 36:i?r.key=ve.ESC+"[1;"+(i+1)+"H":e?r.key=ve.ESC+"OH":r.key=ve.ESC+"[H";break;case 35:i?r.key=ve.ESC+"[1;"+(i+1)+"F":e?r.key=ve.ESC+"OF":r.key=ve.ESC+"[F";break;case 33:t.shiftKey?r.type=2:t.ctrlKey?r.key=ve.ESC+"[5;"+(i+1)+"~":r.key=ve.ESC+"[5~";break;case 34:t.shiftKey?r.type=3:t.ctrlKey?r.key=ve.ESC+"[6;"+(i+1)+"~":r.key=ve.ESC+"[6~";break;case 112:i?r.key=ve.ESC+"[1;"+(i+1)+"P":r.key=ve.ESC+"OP";break;case 113:i?r.key=ve.ESC+"[1;"+(i+1)+"Q":r.key=ve.ESC+"OQ";break;case 114:i?r.key=ve.ESC+"[1;"+(i+1)+"R":r.key=ve.ESC+"OR";break;case 115:i?r.key=ve.ESC+"[1;"+(i+1)+"S":r.key=ve.ESC+"OS";break;case 116:i?r.key=ve.ESC+"[15;"+(i+1)+"~":r.key=ve.ESC+"[15~";break;case 117:i?r.key=ve.ESC+"[17;"+(i+1)+"~":r.key=ve.ESC+"[17~";break;case 118:i?r.key=ve.ESC+"[18;"+(i+1)+"~":r.key=ve.ESC+"[18~";break;case 119:i?r.key=ve.ESC+"[19;"+(i+1)+"~":r.key=ve.ESC+"[19~";break;case 120:i?r.key=ve.ESC+"[20;"+(i+1)+"~":r.key=ve.ESC+"[20~";break;case 121:i?r.key=ve.ESC+"[21;"+(i+1)+"~":r.key=ve.ESC+"[21~";break;case 122:i?r.key=ve.ESC+"[23;"+(i+1)+"~":r.key=ve.ESC+"[23~";break;case 123:i?r.key=ve.ESC+"[24;"+(i+1)+"~":r.key=ve.ESC+"[24~";break;default:if(t.ctrlKey&&!t.shiftKey&&!t.altKey&&!t.metaKey)t.keyCode>=65&&t.keyCode<=90?r.key=String.fromCharCode(t.keyCode-64):t.keyCode===32?r.key=ve.NUL:t.keyCode>=51&&t.keyCode<=55?r.key=String.fromCharCode(t.keyCode-51+27):t.keyCode===56?r.key=ve.DEL:t.keyCode===219?r.key=ve.ESC:t.keyCode===220?r.key=ve.FS:t.keyCode===221&&(r.key=ve.GS);else if((!n||s)&&t.altKey&&!t.metaKey){let a=Die[t.keyCode]?.[t.shiftKey?1:0];if(a)r.key=ve.ESC+a;else if(t.keyCode>=65&&t.keyCode<=90){let l=t.ctrlKey?t.keyCode-64:t.keyCode+32,u=String.fromCharCode(l);t.shiftKey&&(u=u.toUpperCase()),r.key=ve.ESC+u}else if(t.keyCode===32)r.key=ve.ESC+(t.ctrlKey?ve.NUL:" ");else if(t.key==="Dead"&&t.code.startsWith("Key")){let l=t.code.slice(3,4);t.shiftKey||(l=l.toLowerCase()),r.key=ve.ESC+l,r.cancel=!0}}else n&&!t.altKey&&!t.ctrlKey&&!t.shiftKey&&t.metaKey?t.keyCode===65&&(r.type=1):t.key&&!t.ctrlKey&&!t.altKey&&!t.metaKey&&t.keyCode>=48&&t.key.length===1?r.key=t.key:t.key&&t.ctrlKey&&(t.key==="_"&&(r.key=ve.US),t.key==="@"&&(r.key=ve.NUL));break}return r}var Dn=0,Pie=class{constructor(t){this._getKey=t,this._array=[],this._insertedValues=[],this._flushInsertedTask=new Sv,this._isFlushingInserted=!1,this._deletedIndices=[],this._flushDeletedTask=new Sv,this._isFlushingDeleted=!1}clear(){this._array.length=0,this._insertedValues.length=0,this._flushInsertedTask.clear(),this._isFlushingInserted=!1,this._deletedIndices.length=0,this._flushDeletedTask.clear(),this._isFlushingDeleted=!1}insert(t){this._flushCleanupDeleted(),this._insertedValues.length===0&&this._flushInsertedTask.enqueue(()=>this._flushInserted()),this._insertedValues.push(t)}_flushInserted(){let t=this._insertedValues.sort((r,i)=>this._getKey(r)-this._getKey(i)),e=0,n=0,s=new Array(this._array.length+this._insertedValues.length);for(let r=0;r<s.length;r++)n>=this._array.length||this._getKey(t[e])<=this._getKey(this._array[n])?(s[r]=t[e],e++):s[r]=this._array[n++];this._array=s,this._insertedValues.length=0}_flushCleanupInserted(){!this._isFlushingInserted&&this._insertedValues.length>0&&this._flushInsertedTask.flush()}delete(t){if(this._flushCleanupInserted(),this._array.length===0)return!1;let e=this._getKey(t);if(e===void 0||(Dn=this._search(e),Dn===-1)||this._getKey(this._array[Dn])!==e)return!1;do if(this._array[Dn]===t)return this._deletedIndices.length===0&&this._flushDeletedTask.enqueue(()=>this._flushDeleted()),this._deletedIndices.push(Dn),!0;while(++Dn<this._array.length&&this._getKey(this._array[Dn])===e);return!1}_flushDeleted(){this._isFlushingDeleted=!0;let t=this._deletedIndices.sort((r,i)=>r-i),e=0,n=new Array(this._array.length-t.length),s=0;for(let r=0;r<this._array.length;r++)t[e]===r?e++:n[s++]=this._array[r];this._array=n,this._deletedIndices.length=0,this._isFlushingDeleted=!1}_flushCleanupDeleted(){!this._isFlushingDeleted&&this._deletedIndices.length>0&&this._flushDeletedTask.flush()}*getKeyIterator(t){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(Dn=this._search(t),!(Dn<0||Dn>=this._array.length)&&this._getKey(this._array[Dn])===t))do yield this._array[Dn];while(++Dn<this._array.length&&this._getKey(this._array[Dn])===t)}forEachByKey(t,e){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(Dn=this._search(t),!(Dn<0||Dn>=this._array.length)&&this._getKey(this._array[Dn])===t))do e(this._array[Dn]);while(++Dn<this._array.length&&this._getKey(this._array[Dn])===t)}values(){return this._flushCleanupInserted(),this._flushCleanupDeleted(),[...this._array].values()}_search(t){let e=0,n=this._array.length-1;for(;n>=e;){let s=e+n>>1,r=this._getKey(this._array[s]);if(r>t)n=s-1;else if(r<t)e=s+1;else{for(;s>0&&this._getKey(this._array[s-1])===t;)s--;return s}}return e}},Ow=0,dM=0,Bie=class extends It{constructor(){super(),this._decorations=new Pie(t=>t?.marker.line),this._onDecorationRegistered=this._register(new Te),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this._register(new Te),this.onDecorationRemoved=this._onDecorationRemoved.event,this._register(bn(()=>this.reset()))}get decorations(){return this._decorations.values()}registerDecoration(t){if(t.marker.isDisposed)return;let e=new $ie(t);if(e){let n=e.marker.onDispose(()=>e.dispose()),s=e.onDispose(()=>{s.dispose(),e&&(this._decorations.delete(e)&&this._onDecorationRemoved.fire(e),n.dispose())});this._decorations.insert(e),this._onDecorationRegistered.fire(e)}return e}reset(){for(let t of this._decorations.values())t.dispose();this._decorations.clear()}*getDecorationsAtCell(t,e,n){let s=0,r=0;for(let i of this._decorations.getKeyIterator(e))s=i.options.x??0,r=s+(i.options.width??1),t>=s&&t<r&&(!n||(i.options.layer??"bottom")===n)&&(yield i)}forEachDecorationAtCell(t,e,n,s){this._decorations.forEachByKey(e,r=>{Ow=r.options.x??0,dM=Ow+(r.options.width??1),t>=Ow&&t<dM&&(!n||(r.options.layer??"bottom")===n)&&s(r)})}},$ie=class extends rl{constructor(t){super(),this.options=t,this.onRenderEmitter=this.add(new Te),this.onRender=this.onRenderEmitter.event,this._onDispose=this.add(new Te),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=t.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=kn.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=kn.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}dispose(){this._onDispose.fire(),super.dispose()}},zie=1e3,Fie=class{constructor(t,e=zie){this._renderCallback=t,this._debounceThresholdMS=e,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(t,e,n){this._rowCount=n,t=t!==void 0?t:0,e=e!==void 0?e:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,t):t,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,e):e;let s=performance.now();if(s-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=s,this._innerRefresh();else if(!this._additionalRefreshRequested){let r=s-this._lastRefreshMs,i=this._debounceThresholdMS-r;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=performance.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},i)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let t=Math.max(this._rowStart,0),e=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(t,e)}},fM=20,kv=class extends It{constructor(t,e,n,s){super(),this._terminal=t,this._coreBrowserService=n,this._renderService=s,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="";let r=this._coreBrowserService.mainDocument;this._accessibilityContainer=r.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=r.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let i=0;i<this._terminal.rows;i++)this._rowElements[i]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[i]);if(this._topBoundaryFocusListener=i=>this._handleBoundaryFocus(i,0),this._bottomBoundaryFocusListener=i=>this._handleBoundaryFocus(i,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=r.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this._register(new Fie(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this._register(this._terminal.onResize(i=>this._handleResize(i.rows))),this._register(this._terminal.onRender(i=>this._refreshRows(i.start,i.end))),this._register(this._terminal.onScroll(()=>this._refreshRows())),this._register(this._terminal.onA11yChar(i=>this._handleChar(i))),this._register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this._register(this._terminal.onA11yTab(i=>this._handleTab(i))),this._register(this._terminal.onKey(i=>this._handleKey(i.key))),this._register(this._terminal.onBlur(()=>this._clearLiveRegion())),this._register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._register(bt(r,"selectionchange",()=>this._handleSelectionChange())),this._register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRowsDimensions(),this._refreshRows(),this._register(bn(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(t){for(let e=0;e<t;e++)this._handleChar(" ")}_handleChar(t){this._liveRegionLineCount<fM+1&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==t&&(this._charsToAnnounce+=t):this._charsToAnnounce+=t,t===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===fM+1&&(this._liveRegion.textContent+=d2.get())))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(t){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(t)||this._charsToConsume.push(t)}_refreshRows(t,e){this._liveRegionDebouncer.refresh(t,e,this._terminal.rows)}_renderRows(t,e){let n=this._terminal.buffer,s=n.lines.length.toString();for(let r=t;r<=e;r++){let i=n.lines.get(n.ydisp+r),a=[],l=i?.translateToString(!0,void 0,void 0,a)||"",u=(n.ydisp+r+1).toString(),h=this._rowElements[r];h&&(l.length===0?(h.textContent="",this._rowColumns.set(h,[0,1])):(h.textContent=l,this._rowColumns.set(h,a)),h.setAttribute("aria-posinset",u),h.setAttribute("aria-setsize",s),this._alignRowWidth(h))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(t,e){let n=t.target,s=this._rowElements[e===0?1:this._rowElements.length-2],r=n.getAttribute("aria-posinset"),i=e===0?"1":`${this._terminal.buffer.lines.length}`;if(r===i||t.relatedTarget!==s)return;let a,l;if(e===0?(a=n,l=this._rowElements.pop(),this._rowContainer.removeChild(l)):(a=this._rowElements.shift(),l=n,this._rowContainer.removeChild(a)),a.removeEventListener("focus",this._topBoundaryFocusListener),l.removeEventListener("focus",this._bottomBoundaryFocusListener),e===0){let u=this._createAccessibilityTreeNode();this._rowElements.unshift(u),this._rowContainer.insertAdjacentElement("afterbegin",u)}else{let u=this._createAccessibilityTreeNode();this._rowElements.push(u),this._rowContainer.appendChild(u)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(e===0?-1:1),this._rowElements[e===0?1:this._rowElements.length-2].focus(),t.preventDefault(),t.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;let t=this._coreBrowserService.mainDocument.getSelection();if(!t)return;if(t.isCollapsed){this._rowContainer.contains(t.anchorNode)&&this._terminal.clearSelection();return}if(!t.anchorNode||!t.focusNode){console.error("anchorNode and/or focusNode are null");return}let e={node:t.anchorNode,offset:t.anchorOffset},n={node:t.focusNode,offset:t.focusOffset};if((e.node.compareDocumentPosition(n.node)&Node.DOCUMENT_POSITION_PRECEDING||e.node===n.node&&e.offset>n.offset)&&([e,n]=[n,e]),e.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(e={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(e.node))return;let s=this._rowElements.slice(-1)[0];if(n.node.compareDocumentPosition(s)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(n={node:s,offset:s.textContent?.length??0}),!this._rowContainer.contains(n.node))return;let r=({node:l,offset:u})=>{let h=l instanceof Text?l.parentNode:l,m=parseInt(h?.getAttribute("aria-posinset"),10)-1;if(isNaN(m))return console.warn("row is invalid. Race condition?"),null;let p=this._rowColumns.get(h);if(!p)return console.warn("columns is null. Race condition?"),null;let g=u<p.length?p[u]:p.slice(-1)[0]+1;return g>=this._terminal.cols&&(++m,g=0),{row:m,column:g}},i=r(e),a=r(n);if(!(!i||!a)){if(i.row>a.row||i.row===a.row&&i.column>=a.column)throw new Error("invalid range");this._terminal.select(i.column,i.row,(a.row-i.row)*this._terminal.cols-i.column+a.column)}}_handleResize(t){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let e=this._rowContainer.children.length;e<this._terminal.rows;e++)this._rowElements[e]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[e]);for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let t=this._coreBrowserService.mainDocument.createElement("div");return t.setAttribute("role","listitem"),t.tabIndex=-1,this._refreshRowDimensions(t),t}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){Object.assign(this._accessibilityContainer.style,{width:`${this._renderService.dimensions.css.canvas.width}px`,fontSize:`${this._terminal.options.fontSize}px`}),this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let t=0;t<this._terminal.rows;t++)this._refreshRowDimensions(this._rowElements[t]),this._alignRowWidth(this._rowElements[t])}}_refreshRowDimensions(t){t.style.height=`${this._renderService.dimensions.css.cell.height}px`}_alignRowWidth(t){t.style.transform="";let e=t.getBoundingClientRect().width,n=this._rowColumns.get(t)?.slice(-1)?.[0];if(!n)return;let s=n*this._renderService.dimensions.css.cell.width;t.style.transform=`scaleX(${s/e})`}};kv=jn([qe(1,rE),qe(2,oo),qe(3,lo)],kv);var W2=class extends It{constructor(t,e,n,s,r){super(),this._element=t,this._mouseService=e,this._renderService=n,this._bufferService=s,this._linkProviderService=r,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this._register(new Te),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this._register(new Te),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this._register(bn(()=>{Ec(this._linkCacheDisposables),this._linkCacheDisposables.length=0,this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this._register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this._register(bt(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this._register(bt(this._element,"mousemove",this._handleMouseMove.bind(this))),this._register(bt(this._element,"mousedown",this._handleMouseDown.bind(this))),this._register(bt(this._element,"mouseup",this._handleMouseUp.bind(this)))}get currentLink(){return this._currentLink}_handleMouseMove(t){this._lastMouseEvent=t;let e=this._positionFromMouseEvent(t,this._element,this._mouseService);if(!e)return;this._isMouseOut=!1;let n=t.composedPath();for(let s=0;s<n.length;s++){let r=n[s];if(r.classList.contains("xterm"))break;if(r.classList.contains("xterm-hover"))return}(!this._lastBufferCell||e.x!==this._lastBufferCell.x||e.y!==this._lastBufferCell.y)&&(this._handleHover(e),this._lastBufferCell=e)}_handleHover(t){if(this._activeLine!==t.y||this._wasResized){this._clearCurrentLink(),this._askForLink(t,!1),this._wasResized=!1;return}this._currentLink&&this._linkAtPosition(this._currentLink.link,t)||(this._clearCurrentLink(),this._askForLink(t,!0))}_askForLink(t,e){(!this._activeProviderReplies||!e)&&(this._activeProviderReplies?.forEach(s=>{s?.forEach(r=>{r.link.dispose&&r.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=t.y);let n=!1;for(let[s,r]of this._linkProviderService.linkProviders.entries())e?this._activeProviderReplies?.get(s)&&(n=this._checkLinkProviderResult(s,t,n)):r.provideLinks(t.y,i=>{if(this._isMouseOut)return;let a=i?.map(l=>({link:l}));this._activeProviderReplies?.set(s,a),n=this._checkLinkProviderResult(s,t,n),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(t.y,this._activeProviderReplies)})}_removeIntersectingLinks(t,e){let n=new Set;for(let s=0;s<e.size;s++){let r=e.get(s);if(r)for(let i=0;i<r.length;i++){let a=r[i],l=a.link.range.start.y<t?0:a.link.range.start.x,u=a.link.range.end.y>t?this._bufferService.cols:a.link.range.end.x;for(let h=l;h<=u;h++){if(n.has(h)){r.splice(i--,1);break}n.add(h)}}}}_checkLinkProviderResult(t,e,n){if(!this._activeProviderReplies)return n;let s=this._activeProviderReplies.get(t),r=!1;for(let i=0;i<t;i++)(!this._activeProviderReplies.has(i)||this._activeProviderReplies.get(i))&&(r=!0);if(!r&&s){let i=s.find(a=>this._linkAtPosition(a.link,e));i&&(n=!0,this._handleNewLink(i))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!n)for(let i=0;i<this._activeProviderReplies.size;i++){let a=this._activeProviderReplies.get(i)?.find(l=>this._linkAtPosition(l.link,e));if(a){n=!0,this._handleNewLink(a);break}}return n}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(t){if(!this._currentLink)return;let e=this._positionFromMouseEvent(t,this._element,this._mouseService);e&&this._mouseDownLink&&Uie(this._mouseDownLink.link,this._currentLink.link)&&this._linkAtPosition(this._currentLink.link,e)&&this._currentLink.link.activate(t,this._currentLink.link.text)}_clearCurrentLink(t,e){!this._currentLink||!this._lastMouseEvent||(!t||!e||this._currentLink.link.range.start.y>=t&&this._currentLink.link.range.end.y<=e)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,Ec(this._linkCacheDisposables),this._linkCacheDisposables.length=0)}_handleNewLink(t){if(!this._lastMouseEvent)return;let e=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);e&&this._linkAtPosition(t.link,e)&&(this._currentLink=t,this._currentLink.state={decorations:{underline:t.link.decorations===void 0?!0:t.link.decorations.underline,pointerCursor:t.link.decorations===void 0?!0:t.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,t.link,this._lastMouseEvent),t.link.decorations={},Object.defineProperties(t.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:n=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==n&&(this._currentLink.state.decorations.pointerCursor=n,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",n))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:n=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==n&&(this._currentLink.state.decorations.underline=n,this._currentLink.state.isHovered&&this._fireUnderlineEvent(t.link,n))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(n=>{if(!this._currentLink)return;let s=n.start===0?0:n.start+1+this._bufferService.buffer.ydisp,r=this._bufferService.buffer.ydisp+1+n.end;if(this._currentLink.link.range.start.y>=s&&this._currentLink.link.range.end.y<=r&&(this._clearCurrentLink(s,r),this._lastMouseEvent)){let i=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);i&&this._askForLink(i,!1)}})))}_linkHover(t,e,n){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(e,!0),this._currentLink.state.decorations.pointerCursor&&t.classList.add("xterm-cursor-pointer")),e.hover&&e.hover(n,e.text)}_fireUnderlineEvent(t,e){let n=t.range,s=this._bufferService.buffer.ydisp,r=this._createLinkUnderlineEvent(n.start.x-1,n.start.y-s-1,n.end.x,n.end.y-s-1,void 0);(e?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(r)}_linkLeave(t,e,n){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(e,!1),this._currentLink.state.decorations.pointerCursor&&t.classList.remove("xterm-cursor-pointer")),e.leave&&e.leave(n,e.text)}_linkAtPosition(t,e){let n=t.range.start.y*this._bufferService.cols+t.range.start.x,s=t.range.end.y*this._bufferService.cols+t.range.end.x,r=e.y*this._bufferService.cols+e.x;return n<=r&&r<=s}_positionFromMouseEvent(t,e,n){let s=n.getCoords(t,e,this._bufferService.cols,this._bufferService.rows);if(s)return{x:s[0],y:s[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(t,e,n,s,r){return{x1:t,y1:e,x2:n,y2:s,cols:this._bufferService.cols,fg:r}}};W2=jn([qe(1,iE),qe(2,lo),qe(3,Zs),qe(4,ZP)],W2);function Uie(t,e){return t.text===e.text&&t.range.start.x===e.range.start.x&&t.range.start.y===e.range.start.y&&t.range.end.x===e.range.end.x&&t.range.end.y===e.range.end.y}var Hie=class extends Iie{constructor(t={}){super(t),this._linkifier=this._register(new Ch),this.browser=mB,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this._register(new Ch),this._onCursorMove=this._register(new Te),this.onCursorMove=this._onCursorMove.event,this._onKey=this._register(new Te),this.onKey=this._onKey.event,this._onRender=this._register(new Te),this.onRender=this._onRender.event,this._onSelectionChange=this._register(new Te),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this._register(new Te),this.onTitleChange=this._onTitleChange.event,this._onBell=this._register(new Te),this.onBell=this._onBell.event,this._onFocus=this._register(new Te),this._onBlur=this._register(new Te),this._onA11yCharEmitter=this._register(new Te),this._onA11yTabEmitter=this._register(new Te),this._onWillOpen=this._register(new Te),this._setup(),this._decorationService=this._instantiationService.createInstance(Bie),this._instantiationService.setService(Nm,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(Ore),this._instantiationService.setService(ZP,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(p2)),this._register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this._register(this._inputHandler.onRequestRefreshRows(e=>this.refresh(e?.start??0,e?.end??this.rows-1))),this._register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this._register(this._inputHandler.onRequestReset(()=>this.reset())),this._register(this._inputHandler.onRequestWindowsOptionsReport(e=>this._reportWindowsOptions(e))),this._register(this._inputHandler.onColor(e=>this._handleColorEvent(e))),this._register(_s.forward(this._inputHandler.onCursorMove,this._onCursorMove)),this._register(_s.forward(this._inputHandler.onTitleChange,this._onTitleChange)),this._register(_s.forward(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this._register(_s.forward(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this._register(this._bufferService.onResize(e=>this._afterResize(e.cols,e.rows))),this._register(bn(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}get linkifier(){return this._linkifier.value}get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}_handleColorEvent(t){if(this._themeService)for(let e of t){let n,s="";switch(e.index){case 256:n="foreground",s="10";break;case 257:n="background",s="11";break;case 258:n="cursor",s="12";break;default:n="ansi",s="4;"+e.index}switch(e.type){case 0:let r=mn.toColorRGB(n==="ansi"?this._themeService.colors.ansi[e.index]:this._themeService.colors[n]);this.coreService.triggerDataEvent(`${ve.ESC}]${s};${Aie(r)}${fB.ST}`);break;case 1:if(n==="ansi")this._themeService.modifyColors(i=>i.ansi[e.index]=Kn.toColor(...e.color));else{let i=n;this._themeService.modifyColors(a=>a[i]=Kn.toColor(...e.color))}break;case 2:this._themeService.restoreColor(e.index);break}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(t){t?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(kv,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(t){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(ve.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(ve.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let t=this.buffer.ybase+this.buffer.y,e=this.buffer.lines.get(t);if(!e)return;let n=Math.min(this.buffer.x,this.cols-1),s=this._renderService.dimensions.css.cell.height,r=e.getWidth(n),i=this._renderService.dimensions.css.cell.width*r,a=this.buffer.y*this._renderService.dimensions.css.cell.height,l=n*this._renderService.dimensions.css.cell.width;this.textarea.style.left=l+"px",this.textarea.style.top=a+"px",this.textarea.style.width=i+"px",this.textarea.style.height=s+"px",this.textarea.style.lineHeight=s+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this._register(bt(this.element,"copy",e=>{this.hasSelection()&&Wne(e,this._selectionService)}));let t=e=>Gne(e,this.textarea,this.coreService,this.optionsService);this._register(bt(this.textarea,"paste",t)),this._register(bt(this.element,"paste",t)),gB?this._register(bt(this.element,"mousedown",e=>{e.button===2&&SO(e,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this._register(bt(this.element,"contextmenu",e=>{SO(e,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),fE&&this._register(bt(this.element,"auxclick",e=>{e.button===1&&FP(e,this.textarea,this.screenElement)}))}_bindKeys(){this._register(bt(this.textarea,"keyup",t=>this._keyUp(t),!0)),this._register(bt(this.textarea,"keydown",t=>this._keyDown(t),!0)),this._register(bt(this.textarea,"keypress",t=>this._keyPress(t),!0)),this._register(bt(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this._register(bt(this.textarea,"compositionupdate",t=>this._compositionHelper.compositionupdate(t))),this._register(bt(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this._register(bt(this.textarea,"input",t=>this._inputEvent(t),!0)),this._register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(t){if(!t)throw new Error("Terminal requires a parent element.");if(t.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService){this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView);return}this._document=t.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),t.appendChild(this.element);let e=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),e.appendChild(this._viewportElement),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._register(bt(this.screenElement,"mousemove",r=>this.updateCursorStyle(r))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),e.appendChild(this.screenElement);let n=this.textarea=this._document.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",h2.get()),bB||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._register(this.optionsService.onSpecificOptionChange("disableStdin",()=>n.readOnly=this.optionsService.rawOptions.disableStdin)),this.textarea.readOnly=this.optionsService.rawOptions.disableStdin,this._coreBrowserService=this._register(this._instantiationService.createInstance(Tre,this.textarea,t.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(oo,this._coreBrowserService),this._register(bt(this.textarea,"focus",r=>this._handleTextAreaFocus(r))),this._register(bt(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(D2,this._document,this._helperContainer),this._instantiationService.setService(Zb,this._charSizeService),this._themeService=this._instantiationService.createInstance($2),this._instantiationService.setService(Gh,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(xv),this._instantiationService.setService(YP,this._characterJoinerService),this._renderService=this._register(this._instantiationService.createInstance(P2,this.rows,this.screenElement)),this._instantiationService.setService(lo,this._renderService),this._register(this._renderService.onRenderedViewportChange(r=>this._onRender.fire(r))),this.onResize(r=>this._renderService.resize(r.cols,r.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(O2,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(L2),this._instantiationService.setService(iE,this._mouseService);let s=this._linkifier.value=this._register(this._instantiationService.createInstance(W2,this.screenElement));this.element.appendChild(e);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this._register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this._register(this.onBlur(()=>this._renderService.handleBlur())),this._register(this.onFocus(()=>this._renderService.handleFocus())),this._viewport=this._register(this._instantiationService.createInstance(T2,this.element,this.screenElement)),this._register(this._viewport.onRequestScrollLines(r=>{super.scrollLines(r,!1),this.refresh(0,this.rows-1)})),this._selectionService=this._register(this._instantiationService.createInstance(B2,this.element,this.screenElement,s)),this._instantiationService.setService(nse,this._selectionService),this._register(this._selectionService.onRequestScrollLines(r=>this.scrollLines(r.amount,r.suppressScrollEvent))),this._register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this._register(this._selectionService.onRequestRedraw(r=>this._renderService.handleSelectionChanged(r.start,r.end,r.columnSelectMode))),this._register(this._selectionService.onLinuxMouseSelection(r=>{this.textarea.value=r,this.textarea.focus(),this.textarea.select()})),this._register(_s.any(this._onScroll.event,this._inputHandler.onScroll)(()=>{this._selectionService.refresh(),this._viewport?.queueSync()})),this._register(this._instantiationService.createInstance(j2,this.screenElement)),this._register(bt(this.element,"mousedown",r=>this._selectionService.handleMouseDown(r))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(kv,this)),this._register(this.optionsService.onSpecificOptionChange("screenReaderMode",r=>this._handleScreenReaderModeOptionChange(r))),this.options.overviewRuler.width&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(_v,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRuler",r=>{!this._overviewRulerRenderer&&r&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(_v,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(I2,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){let t=this,e=this.element;function n(i){let a=t._mouseService.getMouseReportCoords(i,t.screenElement);if(!a)return!1;let l,u;switch(i.overrideType||i.type){case"mousemove":u=32,i.buttons===void 0?(l=3,i.button!==void 0&&(l=i.button<3?i.button:3)):l=i.buttons&1?0:i.buttons&4?1:i.buttons&2?2:3;break;case"mouseup":u=0,l=i.button<3?i.button:3;break;case"mousedown":u=1,l=i.button<3?i.button:3;break;case"wheel":if(t._customWheelEventHandler&&t._customWheelEventHandler(i)===!1)return!1;let h=i.deltaY;if(h===0||t.coreMouseService.consumeWheelEvent(i,t._renderService?.dimensions?.device?.cell?.height,t._coreBrowserService?.dpr)===0)return!1;u=h<0?0:1,l=4;break;default:return!1}return u===void 0||l===void 0||l>4?!1:t.coreMouseService.triggerMouseEvent({col:a.col,row:a.row,x:a.x,y:a.y,button:l,action:u,ctrl:i.ctrlKey,alt:i.altKey,shift:i.shiftKey})}let s={mouseup:null,wheel:null,mousedrag:null,mousemove:null},r={mouseup:i=>(n(i),i.buttons||(this._document.removeEventListener("mouseup",s.mouseup),s.mousedrag&&this._document.removeEventListener("mousemove",s.mousedrag)),this.cancel(i)),wheel:i=>(n(i),this.cancel(i,!0)),mousedrag:i=>{i.buttons&&n(i)},mousemove:i=>{i.buttons||n(i)}};this._register(this.coreMouseService.onProtocolChange(i=>{i?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(i)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),i&8?s.mousemove||(e.addEventListener("mousemove",r.mousemove),s.mousemove=r.mousemove):(e.removeEventListener("mousemove",s.mousemove),s.mousemove=null),i&16?s.wheel||(e.addEventListener("wheel",r.wheel,{passive:!1}),s.wheel=r.wheel):(e.removeEventListener("wheel",s.wheel),s.wheel=null),i&2?s.mouseup||(s.mouseup=r.mouseup):(this._document.removeEventListener("mouseup",s.mouseup),s.mouseup=null),i&4?s.mousedrag||(s.mousedrag=r.mousedrag):(this._document.removeEventListener("mousemove",s.mousedrag),s.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this._register(bt(e,"mousedown",i=>{if(i.preventDefault(),this.focus(),!(!this.coreMouseService.areMouseEventsActive||this._selectionService.shouldForceSelection(i)))return n(i),s.mouseup&&this._document.addEventListener("mouseup",s.mouseup),s.mousedrag&&this._document.addEventListener("mousemove",s.mousedrag),this.cancel(i)})),this._register(bt(e,"wheel",i=>{if(!s.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(i)===!1)return!1;if(!this.buffer.hasScrollback){if(i.deltaY===0)return!1;if(t.coreMouseService.consumeWheelEvent(i,t._renderService?.dimensions?.device?.cell?.height,t._coreBrowserService?.dpr)===0)return this.cancel(i,!0);let a=ve.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(i.deltaY<0?"A":"B");return this.coreService.triggerDataEvent(a,!0),this.cancel(i,!0)}}},{passive:!1}))}refresh(t,e){this._renderService?.refreshRows(t,e)}updateCursorStyle(t){this._selectionService?.shouldColumnSelect(t)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(t,e){this._viewport?this._viewport.scrollLines(t):super.scrollLines(t,e),this.refresh(0,this.rows-1)}scrollPages(t){this.scrollLines(t*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(t){t&&this._viewport?this._viewport.scrollToLine(this.buffer.ybase,!0):this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(t){let e=t-this._bufferService.buffer.ydisp;e!==0&&this.scrollLines(e)}paste(t){zP(t,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(t){this._customKeyEventHandler=t}attachCustomWheelEventHandler(t){this._customWheelEventHandler=t}registerLinkProvider(t){return this._linkProviderService.registerLinkProvider(t)}registerCharacterJoiner(t){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let e=this._characterJoinerService.register(t);return this.refresh(0,this.rows-1),e}deregisterCharacterJoiner(t){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(t)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(t){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+t)}registerDecoration(t){return this._decorationService.registerDecoration(t)}hasSelection(){return this._selectionService?this._selectionService.hasSelection:!1}select(t,e,n){this._selectionService.setSelection(t,e,n)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(!(!this._selectionService||!this._selectionService.hasSelection))return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(t,e){this._selectionService?.selectLines(t,e)}_keyDown(t){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(t)===!1)return!1;let e=this.browser.isMac&&this.options.macOptionIsMeta&&t.altKey;if(!e&&!this._compositionHelper.keydown(t))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(!0),!1;!e&&(t.key==="Dead"||t.key==="AltGraph")&&(this._unprocessedDeadKey=!0);let n=Lie(t,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(t),n.type===3||n.type===2){let s=this.rows-1;return this.scrollLines(n.type===2?-s:s),this.cancel(t,!0)}if(n.type===1&&this.selectAll(),this._isThirdLevelShift(this.browser,t)||(n.cancel&&this.cancel(t,!0),!n.key)||t.key&&!t.ctrlKey&&!t.altKey&&!t.metaKey&&t.key.length===1&&t.key.charCodeAt(0)>=65&&t.key.charCodeAt(0)<=90)return!0;if(this._unprocessedDeadKey)return this._unprocessedDeadKey=!1,!0;if((n.key===ve.ETX||n.key===ve.CR)&&(this.textarea.value=""),this._onKey.fire({key:n.key,domEvent:t}),this._showCursor(),this.coreService.triggerDataEvent(n.key,!0),!this.optionsService.rawOptions.screenReaderMode||t.altKey||t.ctrlKey)return this.cancel(t,!0);this._keyDownHandled=!0}_isThirdLevelShift(t,e){let n=t.isMac&&!this.options.macOptionIsMeta&&e.altKey&&!e.ctrlKey&&!e.metaKey||t.isWindows&&e.altKey&&e.ctrlKey&&!e.metaKey||t.isWindows&&e.getModifierState("AltGraph");return e.type==="keypress"?n:n&&(!e.keyCode||e.keyCode>47)}_keyUp(t){this._keyDownSeen=!1,!(this._customKeyEventHandler&&this._customKeyEventHandler(t)===!1)&&(Vie(t)||this.focus(),this.updateCursorStyle(t),this._keyPressHandled=!1)}_keyPress(t){let e;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(t)===!1)return!1;if(this.cancel(t),t.charCode)e=t.charCode;else if(t.which===null||t.which===void 0)e=t.keyCode;else if(t.which!==0&&t.charCode!==0)e=t.which;else return!1;return!e||(t.altKey||t.ctrlKey||t.metaKey)&&!this._isThirdLevelShift(this.browser,t)?!1:(e=String.fromCharCode(e),this._onKey.fire({key:e,domEvent:t}),this._showCursor(),this.coreService.triggerDataEvent(e,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,!0)}_inputEvent(t){if(t.data&&t.inputType==="insertText"&&(!t.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let e=t.data;return this.coreService.triggerDataEvent(e,!0),this.cancel(t),!0}return!1}resize(t,e){if(t===this.cols&&e===this.rows){this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure();return}super.resize(t,e)}_afterResize(t,e){this._charSizeService?.measure()}clear(){if(!(this.buffer.ybase===0&&this.buffer.y===0)){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let t=1;t<this.rows;t++)this.buffer.lines.push(this.buffer.getBlankLine(qn));this._onScroll.fire({position:this.buffer.ydisp}),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;let t=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this._customKeyEventHandler=t,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(ve.ESC+"[I"):this.coreService.triggerDataEvent(ve.ESC+"[O")}_reportWindowsOptions(t){if(this._renderService)switch(t){case 0:let e=this._renderService.dimensions.css.canvas.width.toFixed(0),n=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${ve.ESC}[4;${n};${e}t`);break;case 1:let s=this._renderService.dimensions.css.cell.width.toFixed(0),r=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${ve.ESC}[6;${r};${s}t`);break}}cancel(t,e){if(!(!this.options.cancelEvents&&!e))return t.preventDefault(),t.stopPropagation(),!1}};function Vie(t){return t.keyCode===16||t.keyCode===17||t.keyCode===18}var qie=class{constructor(){this._addons=[]}dispose(){for(let t=this._addons.length-1;t>=0;t--)this._addons[t].instance.dispose()}loadAddon(t,e){let n={instance:e,dispose:e.dispose,isDisposed:!1};this._addons.push(n),e.dispose=()=>this._wrappedAddonDispose(n),e.activate(t)}_wrappedAddonDispose(t){if(t.isDisposed)return;let e=-1;for(let n=0;n<this._addons.length;n++)if(this._addons[n]===t){e=n;break}if(e===-1)throw new Error("Could not dispose an addon that has not been loaded");t.isDisposed=!0,t.dispose.apply(t.instance),this._addons.splice(e,1)}},Kie=class{constructor(t){this._line=t}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(t,e){if(!(t<0||t>=this._line.length))return e?(this._line.loadCell(t,e),e):this._line.loadCell(t,new fi)}translateToString(t,e,n){return this._line.translateToString(t,e,n)}},pM=class{constructor(t,e){this._buffer=t,this.type=e}init(t){return this._buffer=t,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(t){let e=this._buffer.lines.get(t);if(e)return new Kie(e)}getNullCell(){return new fi}},Wie=class extends It{constructor(t){super(),this._core=t,this._onBufferChange=this._register(new Te),this.onBufferChange=this._onBufferChange.event,this._normal=new pM(this._core.buffers.normal,"normal"),this._alternate=new pM(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}},Gie=class{constructor(t){this._core=t}registerCsiHandler(t,e){return this._core.registerCsiHandler(t,n=>e(n.toArray()))}addCsiHandler(t,e){return this.registerCsiHandler(t,e)}registerDcsHandler(t,e){return this._core.registerDcsHandler(t,(n,s)=>e(n,s.toArray()))}addDcsHandler(t,e){return this.registerDcsHandler(t,e)}registerEscHandler(t,e){return this._core.registerEscHandler(t,e)}addEscHandler(t,e){return this.registerEscHandler(t,e)}registerOscHandler(t,e){return this._core.registerOscHandler(t,e)}addOscHandler(t,e){return this.registerOscHandler(t,e)}},Yie=class{constructor(t){this._core=t}register(t){this._core.unicodeService.register(t)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(t){this._core.unicodeService.activeVersion=t}},Zie=["cols","rows"],Hi=0,Jie=class extends It{constructor(t){super(),this._core=this._register(new Hie(t)),this._addonManager=this._register(new qie),this._publicOptions={...this._core.options};let e=s=>this._core.options[s],n=(s,r)=>{this._checkReadonlyOptions(s),this._core.options[s]=r};for(let s in this._core.options){let r={get:e.bind(this,s),set:n.bind(this,s)};Object.defineProperty(this._publicOptions,s,r)}}_checkReadonlyOptions(t){if(Zie.includes(t))throw new Error(`Option "${t}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new Gie(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new Yie(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this._register(new Wie(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let t=this._core.coreService.decPrivateModes,e="none";switch(this._core.coreMouseService.activeProtocol){case"X10":e="x10";break;case"VT200":e="vt200";break;case"DRAG":e="drag";break;case"ANY":e="any";break}return{applicationCursorKeysMode:t.applicationCursorKeys,applicationKeypadMode:t.applicationKeypad,bracketedPasteMode:t.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:e,originMode:t.origin,reverseWraparoundMode:t.reverseWraparound,sendFocusMode:t.sendFocus,synchronizedOutputMode:t.synchronizedOutput,wraparoundMode:t.wraparound}}get options(){return this._publicOptions}set options(t){for(let e in t)this._publicOptions[e]=t[e]}blur(){this._core.blur()}focus(){this._core.focus()}input(t,e=!0){this._core.input(t,e)}resize(t,e){this._verifyIntegers(t,e),this._core.resize(t,e)}open(t){this._core.open(t)}attachCustomKeyEventHandler(t){this._core.attachCustomKeyEventHandler(t)}attachCustomWheelEventHandler(t){this._core.attachCustomWheelEventHandler(t)}registerLinkProvider(t){return this._core.registerLinkProvider(t)}registerCharacterJoiner(t){return this._checkProposedApi(),this._core.registerCharacterJoiner(t)}deregisterCharacterJoiner(t){this._checkProposedApi(),this._core.deregisterCharacterJoiner(t)}registerMarker(t=0){return this._verifyIntegers(t),this._core.registerMarker(t)}registerDecoration(t){return this._checkProposedApi(),this._verifyPositiveIntegers(t.x??0,t.width??0,t.height??0),this._core.registerDecoration(t)}hasSelection(){return this._core.hasSelection()}select(t,e,n){this._verifyIntegers(t,e,n),this._core.select(t,e,n)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(t,e){this._verifyIntegers(t,e),this._core.selectLines(t,e)}dispose(){super.dispose()}scrollLines(t){this._verifyIntegers(t),this._core.scrollLines(t)}scrollPages(t){this._verifyIntegers(t),this._core.scrollPages(t)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(t){this._verifyIntegers(t),this._core.scrollToLine(t)}clear(){this._core.clear()}write(t,e){this._core.write(t,e)}writeln(t,e){this._core.write(t),this._core.write(`\r
`,e)}paste(t){this._core.paste(t)}refresh(t,e){this._verifyIntegers(t,e),this._core.refresh(t,e)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(t){this._addonManager.loadAddon(this,t)}static get strings(){return{get promptLabel(){return h2.get()},set promptLabel(t){h2.set(t)},get tooMuchOutput(){return d2.get()},set tooMuchOutput(t){d2.set(t)}}}_verifyIntegers(...t){for(Hi of t)if(Hi===1/0||isNaN(Hi)||Hi%1!==0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...t){for(Hi of t)if(Hi&&(Hi===1/0||isNaN(Hi)||Hi%1!==0||Hi<0))throw new Error("This API only accepts positive integers")}};var Xie=2,Qie=1,eae=class{activate(t){this._terminal=t}dispose(){}fit(){let t=this.proposeDimensions();if(!t||!this._terminal||isNaN(t.cols)||isNaN(t.rows))return;let e=this._terminal._core;(this._terminal.rows!==t.rows||this._terminal.cols!==t.cols)&&(e._renderService.clear(),this._terminal.resize(t.cols,t.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let t=this._terminal._core._renderService.dimensions;if(t.css.cell.width===0||t.css.cell.height===0)return;let e=this._terminal.options.scrollback===0?0:this._terminal.options.overviewRuler?.width||14,n=window.getComputedStyle(this._terminal.element.parentElement),s=parseInt(n.getPropertyValue("height")),r=Math.max(0,parseInt(n.getPropertyValue("width"))),i=window.getComputedStyle(this._terminal.element),a={top:parseInt(i.getPropertyValue("padding-top")),bottom:parseInt(i.getPropertyValue("padding-bottom")),right:parseInt(i.getPropertyValue("padding-right")),left:parseInt(i.getPropertyValue("padding-left"))},l=a.top+a.bottom,u=a.right+a.left,h=s-l,m=r-u-e;return{cols:Math.max(Xie,Math.floor(m/t.css.cell.width)),rows:Math.max(Qie,Math.floor(h/t.css.cell.height))}}};var tae=class{constructor(e,n,s,r={}){this._terminal=e,this._regex=n,this._handler=s,this._options=r}provideLinks(e,n){let s=sae.computeLink(e,this._regex,this._terminal,this._handler);n(this._addCallbacks(s))}_addCallbacks(e){return e.map(n=>(n.leave=this._options.leave,n.hover=(s,r)=>{if(this._options.hover){let{range:i}=n;this._options.hover(s,r,i)}},n))}};function nae(t){try{let e=new URL(t),n=e.password&&e.username?`${e.protocol}//${e.username}:${e.password}@${e.host}`:e.username?`${e.protocol}//${e.username}@${e.host}`:`${e.protocol}//${e.host}`;return t.toLocaleLowerCase().startsWith(n.toLocaleLowerCase())}catch{return!1}}var sae=class sy{static computeLink(e,n,s,r){let i=new RegExp(n.source,(n.flags||"")+"g"),[a,l]=sy._getWindowedLineStrings(e-1,s),u=a.join(""),h,m=[];for(;h=i.exec(u);){let p=h[0];if(!nae(p))continue;let[g,y]=sy._mapStrIdx(s,l,0,h.index),[b,_]=sy._mapStrIdx(s,g,y,p.length);if(g===-1||y===-1||b===-1||_===-1)continue;let w={start:{x:y+1,y:g+1},end:{x:_,y:b+1}};m.push({range:w,text:p,activate:r})}return m}static _getWindowedLineStrings(e,n){let s,r=e,i=e,a=0,l="",u=[];if(s=n.buffer.active.getLine(e)){let h=s.translateToString(!0);if(s.isWrapped&&h[0]!==" "){for(a=0;(s=n.buffer.active.getLine(--r))&&a<2048&&(l=s.translateToString(!0),a+=l.length,u.push(l),!(!s.isWrapped||l.indexOf(" ")!==-1)););u.reverse()}for(u.push(h),a=0;(s=n.buffer.active.getLine(++i))&&s.isWrapped&&a<2048&&(l=s.translateToString(!0),a+=l.length,u.push(l),l.indexOf(" ")===-1););}return[u,r]}static _mapStrIdx(e,n,s,r){let i=e.buffer.active,a=i.getNullCell(),l=s;for(;r;){let u=i.getLine(n);if(!u)return[-1,-1];for(let h=l;h<u.length;++h){u.getCell(h,a);let m=a.getChars();if(a.getWidth()&&(r-=m.length||1,h===u.length-1&&m==="")){let p=i.getLine(n+1);p&&p.isWrapped&&(p.getCell(0,a),a.getWidth()===2&&(r+=1))}if(r<0)return[n,h]}n++,l=0}return[n,l]}},rae=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function iae(t,e){let n=window.open();if(n){try{n.opener=null}catch{}n.location.href=e}else console.warn("Opening link blocked as opener could not be cleared")}var aae=class{constructor(t=iae,e={}){this._handler=t,this._options=e}activate(t){this._terminal=t;let e=this._options,n=e.urlRegex||rae;this._linkProvider=this._terminal.registerLinkProvider(new tae(this._terminal,n,this._handler,e))}dispose(){this._linkProvider?.dispose()}};const oae=0,lae=1,cae=2,uae=4,hae=["/bin/bash","/bin/sh"];class dae{ws=null;options;isClosing=!1;hasConnected=!1;constructor(e){this.options=e}async connect(){const e=this.options.command||hae;for(const n of e)try{await this.tryConnect([n]),this.hasConnected=!0;return}catch{if(n===e[e.length-1])throw new Error(`No shell available (tried: ${e.join(", ")})`)}}tryConnect(e){return new Promise((n,s)=>{const{context:r,namespace:i,pod:a,container:l}=this.options,u=new URLSearchParams;u.set("container",l),u.set("stdin","true"),u.set("stdout","true"),u.set("stderr","true"),u.set("tty","true");for(const y of e)u.append("command",y);const m=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/contexts/${r}/api/v1/namespaces/${i}/pods/${a}/exec?${u.toString()}`;this.ws=new WebSocket(m,["v4.channel.k8s.io"]);let p=!1;const g=setTimeout(()=>{p||(p=!0,this.ws?.close(),s(new Error("Connection timeout")))},5e3);this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{setTimeout(()=>{!p&&this.ws?.readyState===WebSocket.OPEN&&(clearTimeout(g),p=!0,n())},200)},this.ws.onmessage=y=>{if(y.data instanceof ArrayBuffer){const b=new Uint8Array(y.data);if(b.length<1)return;const _=b[0],w=new TextDecoder().decode(b.slice(1));switch(_){case lae:case cae:w&&this.options.onData(w);break}}},this.ws.onerror=()=>{clearTimeout(g),p||(p=!0,s(new Error("WebSocket connection failed")))},this.ws.onclose=y=>{clearTimeout(g),p?!this.isClosing&&this.hasConnected&&this.options.onClose?.():(p=!0,s(new Error(y.reason||`Connection closed (code: ${y.code})`)))}})}send(e){if(this.ws?.readyState===WebSocket.OPEN){const s=new TextEncoder().encode(e),r=new Uint8Array(s.length+1);r[0]=oae,r.set(s,1),this.ws.send(r)}}resize(e,n){if(this.ws?.readyState===WebSocket.OPEN){const s=JSON.stringify({Width:e,Height:n}),i=new TextEncoder().encode(s),a=new Uint8Array(i.length+1);a[0]=uae,a.set(i,1),this.ws.send(a)}}disconnect(){this.isClosing=!0,this.ws&&(this.ws.close(),this.ws=null)}get isConnected(){return this.ws?.readyState===WebSocket.OPEN}}function fae(t){const e=[],n=t.spec,s=t.status;if(n?.containers)for(const r of n.containers){const i=s?.containerStatuses?.find(a=>a.name===r.name);e.push({name:r.name,ready:i?.ready??!1})}return e}function pae({context:t,resource:e,toolbarRef:n}){const s=F.useRef(null),r=F.useRef(null),i=F.useRef(null),a=F.useRef(null),[l,u]=F.useState(!1),[h,m]=F.useState(!1),[p,g]=F.useState(""),[y,b]=F.useState(!1),_=e.metadata?.namespace,w=e.metadata?.name,k=fae(e);F.useEffect(()=>{k.length>0&&!p&&g(k[0].name)},[k,p]),F.useEffect(()=>{if(!s.current||r.current)return;const N=new Jie({cursorBlink:!0,fontSize:13,fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace',theme:{background:"#0a0a0a",foreground:"#e5e5e5",cursor:"#e5e5e5",cursorAccent:"#0a0a0a",selectionBackground:"#3b82f680",black:"#171717",red:"#ef4444",green:"#22c55e",yellow:"#eab308",blue:"#3b82f6",magenta:"#a855f7",cyan:"#06b6d4",white:"#e5e5e5",brightBlack:"#404040",brightRed:"#f87171",brightGreen:"#4ade80",brightYellow:"#facc15",brightBlue:"#60a5fa",brightMagenta:"#c084fc",brightCyan:"#22d3ee",brightWhite:"#ffffff"},allowProposedApi:!0}),M=new eae,I=new aae;N.loadAddon(M),N.loadAddon(I),N.open(s.current),M.fit(),r.current=N,i.current=M;const W=()=>{M.fit(),a.current?.isConnected&&a.current.resize(N.cols,N.rows)},P=new ResizeObserver(W);return P.observe(s.current),window.addEventListener("resize",W),()=>{P.disconnect(),window.removeEventListener("resize",W),N.dispose(),r.current=null,i.current=null}},[]);const C=F.useCallback(async()=>{if(!_||!w||!p||!r.current)return;a.current?.disconnect(),m(!0);const N=r.current;N.clear(),N.writeln(`Connecting to ${w}/${p}...`),N.writeln("");try{const M=new dae({context:t,namespace:_,pod:w,container:p,onData:W=>{N.write(W)},onError:W=>{N.writeln(`\r
\x1B[31mError: ${W}\x1B[0m`)},onClose:()=>{u(!1),N.writeln(`\r
\x1B[33mConnection closed.\x1B[0m`)}});await M.connect(),a.current=M,u(!0);const I=i.current;I&&(I.fit(),M.resize(N.cols,N.rows)),N.onData(W=>{M.send(W)})}catch(M){const I=M instanceof Error?M.message:"Failed to connect";N.writeln(`\r
\x1B[31mFailed to connect: ${I}\x1B[0m`)}finally{m(!1)}},[t,_,w,p]),E=F.useCallback(()=>{a.current?.disconnect(),a.current=null,u(!1)},[]),A=F.useRef(!1);F.useEffect(()=>{if(p&&!A.current&&r.current){A.current=!0;const N=setTimeout(()=>{C()},100);return()=>clearTimeout(N)}},[p,C]),F.useEffect(()=>()=>{a.current?.disconnect(),a.current=null},[]);const R=N=>{g(N),b(!1),E()};return f.jsxs("div",{className:"flex flex-col h-full bg-[#0a0a0a]",children:[n&&f.jsx(Gb,{toolbarRef:n,children:k.length>1&&f.jsxs("div",{className:"relative",children:[f.jsxs("button",{onClick:()=>b(!y),className:"flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-200 dark:hover:bg-neutral-800 rounded transition-colors",children:[f.jsx("span",{className:"max-w-30 truncate",children:p}),f.jsx(Ss,{size:12})]}),y&&f.jsx("div",{className:"absolute right-0 top-full mt-1 z-50 bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg shadow-lg py-1 min-w-40",children:k.map(N=>f.jsxs("button",{onClick:()=>R(N.name),className:`w-full text-left px-3 py-1.5 text-xs hover:bg-neutral-100 dark:hover:bg-neutral-700 flex items-center gap-2 ${N.name===p?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-500/10":"text-neutral-700 dark:text-neutral-300"}`,children:[f.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${N.ready?"bg-emerald-500":"bg-neutral-400"}`}),N.name]},N.name))})]})}),f.jsx("div",{ref:s,className:"flex-1 p-2",style:{minHeight:0}}),f.jsxs("div",{className:"shrink-0 px-4 py-1.5 border-t border-neutral-800 bg-neutral-900/50 flex items-center gap-3 text-xs text-neutral-500",children:[f.jsxs("span",{className:"flex items-center gap-1.5",children:[f.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${l?"bg-emerald-500":h?"bg-amber-500 animate-pulse":"bg-neutral-600"}`}),l?"Connected":h?"Connecting...":"Disconnected"]}),p&&f.jsxs("span",{className:"text-neutral-600",children:[w,"/",p]})]})]})}function mae(t){const e=Pe.c(20),{metadata:n}=t,s=n.labels,r=n.annotations;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=new Set(["pod-template-hash","controller-revision-hash","pod-template-generation"]),e[0]=i):i=e[0];const a=i;let l;e[1]===Symbol.for("react.memo_cache_sentinel")?(l=new Set(["kubectl.kubernetes.io/last-applied-configuration","deployment.kubernetes.io/revision","control-plane.alpha.kubernetes.io/leader","deprecated.daemonset.template.generation","kubernetes.io/description"]),e[1]=l):l=e[1];const u=l;let h;e[2]!==s?(h=s?Object.fromEntries(Object.entries(s).filter(R=>{const[N]=R;return!a.has(N)})):void 0,e[2]=s,e[3]=h):h=e[3];const m=h;let p;e[4]!==r?(p=r?Object.fromEntries(Object.entries(r).filter(R=>{const[N]=R;return!u.has(N)})):void 0,e[4]=r,e[5]=p):p=e[5];const g=p,y=[...Object.entries(m??{}).map(bae),...Object.entries(g??{}).map(vae)];let b;e[6]!==m?(b=m&&Object.keys(m).length>0,e[6]=m,e[7]=b):b=e[7];const _=b;let w;e[8]!==g?(w=g&&Object.keys(g).length>0,e[8]=g,e[9]=w):w=e[9];const k=w;if(y.length===0)return null;let C;e[10]!==m||e[11]!==_?(C=_&&f.jsxs(f.Fragment,{children:[f.jsx("tr",{children:f.jsx("td",{colSpan:2,className:"pb-2",children:f.jsx("span",{className:"text-[10px] font-medium uppercase tracking-wider text-neutral-500 dark:text-neutral-500",children:"Labels"})})}),Object.entries(m).map(yae)]}),e[10]=m,e[11]=_,e[12]=C):C=e[12];let E;e[13]!==g||e[14]!==k||e[15]!==_?(E=k&&f.jsxs(f.Fragment,{children:[f.jsx("tr",{children:f.jsx("td",{colSpan:2,className:_?"pt-4 pb-2":"pb-2",children:f.jsx("span",{className:"text-[10px] font-medium uppercase tracking-wider text-neutral-500 dark:text-neutral-500",children:"Annotations"})})}),Object.entries(g).map(gae)]}),e[13]=g,e[14]=k,e[15]=_,e[16]=E):E=e[16];let A;return e[17]!==C||e[18]!==E?(A=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("table",{className:"w-full text-xs",children:f.jsxs("tbody",{children:[C,E]})})}),e[17]=C,e[18]=E,e[19]=A):A=e[19],A}function gae(t,e,n){const[s,r]=t;return f.jsxs("tr",{className:e<n.length-1?"border-b border-neutral-200 dark:border-neutral-700/50":"",children:[f.jsx("td",{className:"py-1.5 pr-3 text-purple-600 dark:text-purple-400 align-top whitespace-nowrap w-[1%]",children:s}),f.jsx("td",{className:"py-1.5 text-neutral-600 dark:text-neutral-300 break-all",children:r})]},`annotation-${s}`)}function yae(t){const[e,n]=t;return f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[f.jsx("td",{className:"py-1.5 pr-3 text-sky-600 dark:text-sky-400 align-top whitespace-nowrap w-[1%]",children:e}),f.jsx("td",{className:"py-1.5 text-emerald-600 dark:text-emerald-400 break-all",children:n})]},`label-${e}`)}function vae(t){const[e,n]=t;return{key:e,value:n,type:"annotation"}}function bae(t){const[e,n]=t;return{key:e,value:n,type:"label"}}function _ae(t){const e=Pe.c(6),{events:n,loading:s}=t;if(s&&n.length===0){let a;return e[0]===Symbol.for("react.memo_cache_sentinel")?(a=f.jsxs("div",{className:"flex items-center gap-2 text-neutral-600 dark:text-neutral-500 text-sm",children:[f.jsx(qa,{size:14,className:"animate-spin"}),"Loading events..."]}),e[0]=a):a=e[0],a}if(n.length===0){let a;return e[1]===Symbol.for("react.memo_cache_sentinel")?(a=f.jsx("div",{className:"text-neutral-600 dark:text-neutral-500 text-sm italic",children:"No events found for this resource"}),e[1]=a):a=e[1],a}let r;e[2]!==n?(r=n.map(xae),e[2]=n,e[3]=r):r=e[3];let i;return e[4]!==r?(i=f.jsx("div",{className:"space-y-2",children:r}),e[4]=r,e[5]=i):i=e[5],i}function xae(t){return f.jsx(wae,{event:t},t.metadata?.uid||`${t.reason}-${t.lastTimestamp}`)}function wae(t){const e=Pe.c(36),{event:n}=t;let s;e[0]!==n.eventTime||e[1]!==n.lastTimestamp||e[2]!==n.metadata?(s=()=>n.lastTimestamp?n.lastTimestamp instanceof Date?n.lastTimestamp.toISOString():String(n.lastTimestamp):n.eventTime?String(n.eventTime):n.metadata?.creationTimestamp?n.metadata.creationTimestamp instanceof Date?n.metadata.creationTimestamp.toISOString():String(n.metadata.creationTimestamp):new Date().toISOString(),e[0]=n.eventTime,e[1]=n.lastTimestamp,e[2]=n.metadata,e[3]=s):s=e[3];const r=s;let i,a,l,u,h;if(e[4]!==n.reason||e[5]!==n.type||e[6]!==r){const _=r(),w=n.type==="Warning";h=`p-3 rounded-lg border ${w?"bg-amber-500/5 border-amber-500/20":"bg-neutral-100 dark:bg-neutral-900/50 border-neutral-300 dark:border-neutral-700/50"}`,l="flex items-start justify-between gap-2 mb-1";const k=`px-1.5 py-0.5 rounded text-xs font-medium ${w?"bg-amber-500/20 text-amber-600 dark:text-amber-400":"bg-emerald-500/20 text-emerald-600 dark:text-emerald-400"}`;let C;e[12]!==n.type||e[13]!==k?(C=f.jsx("span",{className:k,children:n.type}),e[12]=n.type,e[13]=k,e[14]=C):C=e[14];let E;e[15]!==n.reason?(E=f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-200",children:n.reason}),e[15]=n.reason,e[16]=E):E=e[16],e[17]!==C||e[18]!==E?(u=f.jsxs("div",{className:"flex items-center gap-2",children:[C,E]}),e[17]=C,e[18]=E,e[19]=u):u=e[19],i="text-xs text-neutral-600 dark:text-neutral-500 whitespace-nowrap",a=Sae(_),e[4]=n.reason,e[5]=n.type,e[6]=r,e[7]=i,e[8]=a,e[9]=l,e[10]=u,e[11]=h}else i=e[7],a=e[8],l=e[9],u=e[10],h=e[11];let m;e[20]!==i||e[21]!==a?(m=f.jsx("span",{className:i,children:a}),e[20]=i,e[21]=a,e[22]=m):m=e[22];let p;e[23]!==l||e[24]!==u||e[25]!==m?(p=f.jsxs("div",{className:l,children:[u,m]}),e[23]=l,e[24]=u,e[25]=m,e[26]=p):p=e[26];let g;e[27]!==n.message?(g=f.jsx("p",{className:"text-sm text-neutral-700 dark:text-neutral-400",children:n.message}),e[27]=n.message,e[28]=g):g=e[28];let y;e[29]!==n.count?(y=n.count&&n.count>1&&f.jsxs("p",{className:"text-xs text-neutral-600 dark:text-neutral-500 mt-1",children:["Occurred ",n.count," times"]}),e[29]=n.count,e[30]=y):y=e[30];let b;return e[31]!==y||e[32]!==h||e[33]!==p||e[34]!==g?(b=f.jsxs("div",{className:h,children:[p,g,y]}),e[31]=y,e[32]=h,e[33]=p,e[34]=g,e[35]=b):b=e[35],b}function Sae(t){const e=new Date(t),s=new Date().getTime()-e.getTime(),r=Math.floor(s/1e3),i=Math.floor(r/60),a=Math.floor(i/60),l=Math.floor(a/24);return l>0?`${l}d ago`:a>0?`${a}h ago`:i>0?`${i}m ago`:`${r}s ago`}function mM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=Array(e);n<e;n++)s[n]=t[n];return s}function kae(t){if(Array.isArray(t))return t}function Cae(t,e,n){return(e=Oae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nae(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s,r,i,a,l=[],u=!0,h=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(u=(s=i.call(n)).done)&&(l.push(s.value),l.length!==e);u=!0);}catch(m){h=!0,r=m}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(h)throw r}}return l}}function Eae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function yM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gM(Object(n),!0).forEach(function(s){Cae(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gM(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function Aae(t,e){if(t==null)return{};var n,s,r=Rae(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Rae(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)!==-1)continue;n[s]=t[s]}return n}function Tae(t,e){return kae(t)||Nae(t,e)||Mae(t,e)||Eae()}function jae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Oae(t){var e=jae(t,"string");return typeof e=="symbol"?e:e+""}function Mae(t,e){if(t){if(typeof t=="string")return mM(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mM(t,e):void 0}}function Iae(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function bM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vM(Object(n),!0).forEach(function(s){Iae(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vM(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function Dae(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(s){return e.reduceRight(function(r,i){return i(r)},s)}}function Vf(t){return function e(){for(var n=this,s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return r.length>=t.length?t.apply(this,r):function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];return e.apply(n,[].concat(r,l))}}}function Cv(t){return{}.toString.call(t).includes("Object")}function Lae(t){return!Object.keys(t).length}function Zp(t){return typeof t=="function"}function Pae(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Bae(t,e){return Cv(e)||il("changeType"),Object.keys(e).some(function(n){return!Pae(t,n)})&&il("changeField"),e}function $ae(t){Zp(t)||il("selectorType")}function zae(t){Zp(t)||Cv(t)||il("handlerType"),Cv(t)&&Object.values(t).some(function(e){return!Zp(e)})&&il("handlersType")}function Fae(t){t||il("initialIsRequired"),Cv(t)||il("initialType"),Lae(t)&&il("initialContent")}function Uae(t,e){throw new Error(t[e]||t.default)}var Hae={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},il=Vf(Uae)(Hae),w0={changes:Bae,selector:$ae,handler:zae,initial:Fae};function Vae(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};w0.initial(t),w0.handler(e);var n={current:t},s=Vf(Wae)(n,e),r=Vf(Kae)(n),i=Vf(w0.changes)(t),a=Vf(qae)(n);function l(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(m){return m};return w0.selector(h),h(n.current)}function u(h){Dae(s,r,i,a)(h)}return[l,u]}function qae(t,e){return Zp(e)?e(t.current):e}function Kae(t,e){return t.current=bM(bM({},t.current),e),e}function Wae(t,e,n){return Zp(e)?e(t.current):Object.keys(n).forEach(function(s){var r;return(r=e[s])===null||r===void 0?void 0:r.call(e,t.current[s])}),n}var Gae={create:Vae},Yae={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function Zae(t){return function e(){for(var n=this,s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return r.length>=t.length?t.apply(this,r):function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];return e.apply(n,[].concat(r,l))}}}function Jae(t){return{}.toString.call(t).includes("Object")}function Xae(t){return t||_M("configIsRequired"),Jae(t)||_M("configType"),t.urls?(Qae(),{paths:{vs:t.urls.monacoBase}}):t}function Qae(){console.warn(RB.deprecation)}function eoe(t,e){throw new Error(t[e]||t.default)}var RB={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},_M=Zae(eoe)(RB),toe={config:Xae},noe=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return function(r){return n.reduceRight(function(i,a){return a(i)},r)}};function TB(t,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&t[n]&&Object.assign(e[n],TB(t[n],e[n]))}),yM(yM({},t),e)}var soe={type:"cancelation",msg:"operation is manually canceled"};function Mw(t){var e=!1,n=new Promise(function(s,r){t.then(function(i){return e?r(soe):s(i)}),t.catch(r)});return n.cancel=function(){return e=!0},n}var roe=["monaco"],ioe=Gae.create({config:Yae,isInitialized:!1,resolve:null,reject:null,monaco:null}),jB=Tae(ioe,2),Rm=jB[0],Qb=jB[1];function aoe(t){var e=toe.config(t),n=e.monaco,s=Aae(e,roe);Qb(function(r){return{config:TB(r.config,s),monaco:n}})}function ooe(){var t=Rm(function(e){var n=e.monaco,s=e.isInitialized,r=e.resolve;return{monaco:n,isInitialized:s,resolve:r}});if(!t.isInitialized){if(Qb({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),Mw(Iw);if(window.monaco&&window.monaco.editor)return OB(window.monaco),t.resolve(window.monaco),Mw(Iw);noe(loe,uoe)(hoe)}return Mw(Iw)}function loe(t){return document.body.appendChild(t)}function coe(t){var e=document.createElement("script");return t&&(e.src=t),e}function uoe(t){var e=Rm(function(s){var r=s.config,i=s.reject;return{config:r,reject:i}}),n=coe("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=e.reject,n}function hoe(){var t=Rm(function(n){var s=n.config,r=n.resolve,i=n.reject;return{config:s,resolve:r,reject:i}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(n){var s=n.m||n;OB(s),t.resolve(s)},function(n){t.reject(n)})}function OB(t){Rm().monaco||Qb({monaco:t})}function doe(){return Rm(function(t){var e=t.monaco;return e})}var Iw=new Promise(function(t,e){return Qb({resolve:t,reject:e})}),MB={config:aoe,init:ooe,__getMonacoInstance:doe},foe={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Dw=foe,poe={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},moe=poe;function goe({children:t}){return Is.createElement("div",{style:moe.container},t)}var yoe=goe,voe=yoe;function boe({width:t,height:e,isEditorReady:n,loading:s,_ref:r,className:i,wrapperProps:a}){return Is.createElement("section",{style:{...Dw.wrapper,width:t,height:e},...a},!n&&Is.createElement(voe,null,s),Is.createElement("div",{ref:r,style:{...Dw.fullWidth,...!n&&Dw.hide},className:i}))}var _oe=boe,IB=F.memo(_oe);function xoe(t){F.useEffect(t,[])}var DB=xoe;function woe(t,e,n=!0){let s=F.useRef(!0);F.useEffect(s.current||!n?()=>{s.current=!1}:t,e)}var Ir=woe;function pp(){}function Wu(t,e,n,s){return Soe(t,s)||koe(t,e,n,s)}function Soe(t,e){return t.editor.getModel(LB(t,e))}function koe(t,e,n,s){return t.editor.createModel(e,n,s?LB(t,s):void 0)}function LB(t,e){return t.Uri.parse(e)}function Coe({original:t,modified:e,language:n,originalLanguage:s,modifiedLanguage:r,originalModelPath:i,modifiedModelPath:a,keepCurrentOriginalModel:l=!1,keepCurrentModifiedModel:u=!1,theme:h="light",loading:m="Loading...",options:p={},height:g="100%",width:y="100%",className:b,wrapperProps:_={},beforeMount:w=pp,onMount:k=pp}){let[C,E]=F.useState(!1),[A,R]=F.useState(!0),N=F.useRef(null),M=F.useRef(null),I=F.useRef(null),W=F.useRef(k),P=F.useRef(w),G=F.useRef(!1);DB(()=>{let K=MB.init();return K.then(B=>(M.current=B)&&R(!1)).catch(B=>B?.type!=="cancelation"&&console.error("Monaco initialization: error:",B)),()=>N.current?Z():K.cancel()}),Ir(()=>{if(N.current&&M.current){let K=N.current.getOriginalEditor(),B=Wu(M.current,t||"",s||n||"text",i||"");B!==K.getModel()&&K.setModel(B)}},[i],C),Ir(()=>{if(N.current&&M.current){let K=N.current.getModifiedEditor(),B=Wu(M.current,e||"",r||n||"text",a||"");B!==K.getModel()&&K.setModel(B)}},[a],C),Ir(()=>{let K=N.current.getModifiedEditor();K.getOption(M.current.editor.EditorOption.readOnly)?K.setValue(e||""):e!==K.getValue()&&(K.executeEdits("",[{range:K.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),K.pushUndoStop())},[e],C),Ir(()=>{N.current?.getModel()?.original.setValue(t||"")},[t],C),Ir(()=>{let{original:K,modified:B}=N.current.getModel();M.current.editor.setModelLanguage(K,s||n||"text"),M.current.editor.setModelLanguage(B,r||n||"text")},[n,s,r],C),Ir(()=>{M.current?.editor.setTheme(h)},[h],C),Ir(()=>{N.current?.updateOptions(p)},[p],C);let $=F.useCallback(()=>{if(!M.current)return;P.current(M.current);let K=Wu(M.current,t||"",s||n||"text",i||""),B=Wu(M.current,e||"",r||n||"text",a||"");N.current?.setModel({original:K,modified:B})},[n,e,r,t,s,i,a]),U=F.useCallback(()=>{!G.current&&I.current&&(N.current=M.current.editor.createDiffEditor(I.current,{automaticLayout:!0,...p}),$(),M.current?.editor.setTheme(h),E(!0),G.current=!0)},[p,h,$]);F.useEffect(()=>{C&&W.current(N.current,M.current)},[C]),F.useEffect(()=>{!A&&!C&&U()},[A,C,U]);function Z(){let K=N.current?.getModel();l||K?.original?.dispose(),u||K?.modified?.dispose(),N.current?.dispose()}return Is.createElement(IB,{width:y,height:g,isEditorReady:C,loading:m,_ref:I,className:b,wrapperProps:_})}var Noe=Coe;F.memo(Noe);function Eoe(t){let e=F.useRef();return F.useEffect(()=>{e.current=t},[t]),e.current}var Aoe=Eoe,S0=new Map;function Roe({defaultValue:t,defaultLanguage:e,defaultPath:n,value:s,language:r,path:i,theme:a="light",line:l,loading:u="Loading...",options:h={},overrideServices:m={},saveViewState:p=!0,keepCurrentModel:g=!1,width:y="100%",height:b="100%",className:_,wrapperProps:w={},beforeMount:k=pp,onMount:C=pp,onChange:E,onValidate:A=pp}){let[R,N]=F.useState(!1),[M,I]=F.useState(!0),W=F.useRef(null),P=F.useRef(null),G=F.useRef(null),$=F.useRef(C),U=F.useRef(k),Z=F.useRef(),K=F.useRef(s),B=Aoe(i),J=F.useRef(!1),Y=F.useRef(!1);DB(()=>{let L=MB.init();return L.then(V=>(W.current=V)&&I(!1)).catch(V=>V?.type!=="cancelation"&&console.error("Monaco initialization: error:",V)),()=>P.current?O():L.cancel()}),Ir(()=>{let L=Wu(W.current,t||s||"",e||r||"",i||n||"");L!==P.current?.getModel()&&(p&&S0.set(B,P.current?.saveViewState()),P.current?.setModel(L),p&&P.current?.restoreViewState(S0.get(i)))},[i],R),Ir(()=>{P.current?.updateOptions(h)},[h],R),Ir(()=>{!P.current||s===void 0||(P.current.getOption(W.current.editor.EditorOption.readOnly)?P.current.setValue(s):s!==P.current.getValue()&&(Y.current=!0,P.current.executeEdits("",[{range:P.current.getModel().getFullModelRange(),text:s,forceMoveMarkers:!0}]),P.current.pushUndoStop(),Y.current=!1))},[s],R),Ir(()=>{let L=P.current?.getModel();L&&r&&W.current?.editor.setModelLanguage(L,r)},[r],R),Ir(()=>{l!==void 0&&P.current?.revealLine(l)},[l],R),Ir(()=>{W.current?.editor.setTheme(a)},[a],R);let z=F.useCallback(()=>{if(!(!G.current||!W.current)&&!J.current){U.current(W.current);let L=i||n,V=Wu(W.current,s||t||"",e||r||"",L||"");P.current=W.current?.editor.create(G.current,{model:V,automaticLayout:!0,...h},m),p&&P.current.restoreViewState(S0.get(L)),W.current.editor.setTheme(a),l!==void 0&&P.current.revealLine(l),N(!0),J.current=!0}},[t,e,n,s,r,i,h,m,p,a,l]);F.useEffect(()=>{R&&$.current(P.current,W.current)},[R]),F.useEffect(()=>{!M&&!R&&z()},[M,R,z]),K.current=s,F.useEffect(()=>{R&&E&&(Z.current?.dispose(),Z.current=P.current?.onDidChangeModelContent(L=>{Y.current||E(P.current.getValue(),L)}))},[R,E]),F.useEffect(()=>{if(R){let L=W.current.editor.onDidChangeMarkers(V=>{let T=P.current.getModel()?.uri;if(T&&V.find(Q=>Q.path===T.path)){let Q=W.current.editor.getModelMarkers({resource:T});A?.(Q)}});return()=>{L?.dispose()}}return()=>{}},[R,A]);function O(){Z.current?.dispose(),g?p&&S0.set(i,P.current.saveViewState()):P.current.getModel()?.dispose(),P.current.dispose()}return Is.createElement(IB,{width:y,height:b,isEditorReady:R,loading:u,_ref:G,className:_,wrapperProps:w})}var Toe=Roe,joe=F.memo(Toe),Ooe=joe;const pE=Symbol.for("yaml.alias"),G2=Symbol.for("yaml.document"),al=Symbol.for("yaml.map"),PB=Symbol.for("yaml.pair"),oa=Symbol.for("yaml.scalar"),Zh=Symbol.for("yaml.seq"),mi=Symbol.for("yaml.node.type"),Bc=t=>!!t&&typeof t=="object"&&t[mi]===pE,Tm=t=>!!t&&typeof t=="object"&&t[mi]===G2,jm=t=>!!t&&typeof t=="object"&&t[mi]===al,Bn=t=>!!t&&typeof t=="object"&&t[mi]===PB,dn=t=>!!t&&typeof t=="object"&&t[mi]===oa,Om=t=>!!t&&typeof t=="object"&&t[mi]===Zh;function Ln(t){if(t&&typeof t=="object")switch(t[mi]){case al:case Zh:return!0}return!1}function Pn(t){if(t&&typeof t=="object")switch(t[mi]){case pE:case al:case oa:case Zh:return!0}return!1}const BB=t=>(dn(t)||Ln(t))&&!!t.anchor,Ul=Symbol("break visit"),Moe=Symbol("skip children"),mp=Symbol("remove node");function Jh(t,e){const n=Ioe(e);Tm(t)?Gu(null,t.contents,n,Object.freeze([t]))===mp&&(t.contents=null):Gu(null,t,n,Object.freeze([]))}Jh.BREAK=Ul;Jh.SKIP=Moe;Jh.REMOVE=mp;function Gu(t,e,n,s){const r=Doe(t,e,n,s);if(Pn(r)||Bn(r))return Loe(t,s,r),Gu(t,r,n,s);if(typeof r!="symbol"){if(Ln(e)){s=Object.freeze(s.concat(e));for(let i=0;i<e.items.length;++i){const a=Gu(i,e.items[i],n,s);if(typeof a=="number")i=a-1;else{if(a===Ul)return Ul;a===mp&&(e.items.splice(i,1),i-=1)}}}else if(Bn(e)){s=Object.freeze(s.concat(e));const i=Gu("key",e.key,n,s);if(i===Ul)return Ul;i===mp&&(e.key=null);const a=Gu("value",e.value,n,s);if(a===Ul)return Ul;a===mp&&(e.value=null)}}return r}function Ioe(t){return typeof t=="object"&&(t.Collection||t.Node||t.Value)?Object.assign({Alias:t.Node,Map:t.Node,Scalar:t.Node,Seq:t.Node},t.Value&&{Map:t.Value,Scalar:t.Value,Seq:t.Value},t.Collection&&{Map:t.Collection,Seq:t.Collection},t):t}function Doe(t,e,n,s){if(typeof n=="function")return n(t,e,s);if(jm(e))return n.Map?.(t,e,s);if(Om(e))return n.Seq?.(t,e,s);if(Bn(e))return n.Pair?.(t,e,s);if(dn(e))return n.Scalar?.(t,e,s);if(Bc(e))return n.Alias?.(t,e,s)}function Loe(t,e,n){const s=e[e.length-1];if(Ln(s))s.items[t]=n;else if(Bn(s))t==="key"?s.key=n:s.value=n;else if(Tm(s))s.contents=n;else{const r=Bc(s)?"alias":"scalar";throw new Error(`Cannot replace node with ${r} parent`)}}const Poe={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},Boe=t=>t.replace(/[!,[\]{}]/g,e=>Poe[e]);class Fs{constructor(e,n){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},Fs.defaultYaml,e),this.tags=Object.assign({},Fs.defaultTags,n)}clone(){const e=new Fs(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new Fs(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Fs.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Fs.defaultTags);break}return e}add(e,n){this.atNextDocument&&(this.yaml={explicit:Fs.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Fs.defaultTags),this.atNextDocument=!1);const s=e.trim().split(/[ \t]+/),r=s.shift();switch(r){case"%TAG":{if(s.length!==2&&(n(0,"%TAG directive should contain exactly two parts"),s.length<2))return!1;const[i,a]=s;return this.tags[i]=a,!0}case"%YAML":{if(this.yaml.explicit=!0,s.length!==1)return n(0,"%YAML directive should contain exactly one part"),!1;const[i]=s;if(i==="1.1"||i==="1.2")return this.yaml.version=i,!0;{const a=/^\d+\.\d+$/.test(i);return n(6,`Unsupported YAML version ${i}`,a),!1}}default:return n(0,`Unknown directive ${r}`,!0),!1}}tagName(e,n){if(e==="!")return"!";if(e[0]!=="!")return n(`Not a valid tag: ${e}`),null;if(e[1]==="<"){const a=e.slice(2,-1);return a==="!"||a==="!!"?(n(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&n("Verbatim tags must end with a >"),a)}const[,s,r]=e.match(/^(.*!)([^!]*)$/s);r||n(`The ${e} tag has no suffix`);const i=this.tags[s];if(i)try{return i+decodeURIComponent(r)}catch(a){return n(String(a)),null}return s==="!"?e:(n(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[n,s]of Object.entries(this.tags))if(e.startsWith(s))return n+Boe(e.substring(s.length));return e[0]==="!"?e:`!<${e}>`}toString(e){const n=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],s=Object.entries(this.tags);let r;if(e&&s.length>0&&Pn(e.contents)){const i={};Jh(e.contents,(a,l)=>{Pn(l)&&l.tag&&(i[l.tag]=!0)}),r=Object.keys(i)}else r=[];for(const[i,a]of s)i==="!!"&&a==="tag:yaml.org,2002:"||(!e||r.some(l=>l.startsWith(a)))&&n.push(`%TAG ${i} ${a}`);return n.join(`
`)}}Fs.defaultYaml={explicit:!1,version:"1.2"};Fs.defaultTags={"!!":"tag:yaml.org,2002:"};function $B(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){const n=`Anchor must not contain whitespace or control characters: ${JSON.stringify(t)}`;throw new Error(n)}return!0}function zB(t){const e=new Set;return Jh(t,{Value(n,s){s.anchor&&e.add(s.anchor)}}),e}function FB(t,e){for(let n=1;;++n){const s=`${t}${n}`;if(!e.has(s))return s}}function $oe(t,e){const n=[],s=new Map;let r=null;return{onAnchor:i=>{n.push(i),r??(r=zB(t));const a=FB(e,r);return r.add(a),a},setAnchors:()=>{for(const i of n){const a=s.get(i);if(typeof a=="object"&&a.anchor&&(dn(a.node)||Ln(a.node)))a.node.anchor=a.anchor;else{const l=new Error("Failed to resolve repeated object (this should not happen)");throw l.source=i,l}}},sourceObjects:s}}function Yu(t,e,n,s){if(s&&typeof s=="object")if(Array.isArray(s))for(let r=0,i=s.length;r<i;++r){const a=s[r],l=Yu(t,s,String(r),a);l===void 0?delete s[r]:l!==a&&(s[r]=l)}else if(s instanceof Map)for(const r of Array.from(s.keys())){const i=s.get(r),a=Yu(t,s,r,i);a===void 0?s.delete(r):a!==i&&s.set(r,a)}else if(s instanceof Set)for(const r of Array.from(s)){const i=Yu(t,s,r,r);i===void 0?s.delete(r):i!==r&&(s.delete(r),s.add(i))}else for(const[r,i]of Object.entries(s)){const a=Yu(t,s,r,i);a===void 0?delete s[r]:a!==i&&(s[r]=a)}return t.call(e,n,s)}function pi(t,e,n){if(Array.isArray(t))return t.map((s,r)=>pi(s,String(r),n));if(t&&typeof t.toJSON=="function"){if(!n||!BB(t))return t.toJSON(e,n);const s={aliasCount:0,count:1,res:void 0};n.anchors.set(t,s),n.onCreate=i=>{s.res=i,delete n.onCreate};const r=t.toJSON(e,n);return n.onCreate&&n.onCreate(r),r}return typeof t=="bigint"&&!n?.keep?Number(t):t}class mE{constructor(e){Object.defineProperty(this,mi,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:n,maxAliasCount:s,onAnchor:r,reviver:i}={}){if(!Tm(e))throw new TypeError("A document argument is required");const a={anchors:new Map,doc:e,keep:!0,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof s=="number"?s:100},l=pi(this,"",a);if(typeof r=="function")for(const{count:u,res:h}of a.anchors.values())r(h,u);return typeof i=="function"?Yu(i,{"":l},"",l):l}}class gE extends mE{constructor(e){super(pE),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e,n){let s;n?.aliasResolveCache?s=n.aliasResolveCache:(s=[],Jh(e,{Node:(i,a)=>{(Bc(a)||BB(a))&&s.push(a)}}),n&&(n.aliasResolveCache=s));let r;for(const i of s){if(i===this)break;i.anchor===this.source&&(r=i)}return r}toJSON(e,n){if(!n)return{source:this.source};const{anchors:s,doc:r,maxAliasCount:i}=n,a=this.resolve(r,n);if(!a){const u=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(u)}let l=s.get(a);if(l||(pi(a,null,n),l=s.get(a)),l?.res===void 0){const u="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(u)}if(i>=0&&(l.count+=1,l.aliasCount===0&&(l.aliasCount=ry(r,a,s)),l.count*l.aliasCount>i)){const u="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(u)}return l.res}toString(e,n,s){const r=`*${this.source}`;if(e){if($B(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const i=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(i)}if(e.implicitKey)return`${r} `}return r}}function ry(t,e,n){if(Bc(e)){const s=e.resolve(t),r=n&&s&&n.get(s);return r?r.count*r.aliasCount:0}else if(Ln(e)){let s=0;for(const r of e.items){const i=ry(t,r,n);i>s&&(s=i)}return s}else if(Bn(e)){const s=ry(t,e.key,n),r=ry(t,e.value,n);return Math.max(s,r)}return 1}const UB=t=>!t||typeof t!="function"&&typeof t!="object";class Ct extends mE{constructor(e){super(oa),this.value=e}toJSON(e,n){return n?.keep?this.value:pi(this.value,e,n)}toString(){return String(this.value)}}Ct.BLOCK_FOLDED="BLOCK_FOLDED";Ct.BLOCK_LITERAL="BLOCK_LITERAL";Ct.PLAIN="PLAIN";Ct.QUOTE_DOUBLE="QUOTE_DOUBLE";Ct.QUOTE_SINGLE="QUOTE_SINGLE";const zoe="tag:yaml.org,2002:";function Foe(t,e,n){if(e){const s=n.filter(i=>i.tag===e),r=s.find(i=>!i.format)??s[0];if(!r)throw new Error(`Tag ${e} not found`);return r}return n.find(s=>s.identify?.(t)&&!s.format)}function Jp(t,e,n){if(Tm(t)&&(t=t.contents),Pn(t))return t;if(Bn(t)){const p=n.schema[al].createNode?.(n.schema,null,n);return p.items.push(t),p}(t instanceof String||t instanceof Number||t instanceof Boolean||typeof BigInt<"u"&&t instanceof BigInt)&&(t=t.valueOf());const{aliasDuplicateObjects:s,onAnchor:r,onTagObj:i,schema:a,sourceObjects:l}=n;let u;if(s&&t&&typeof t=="object"){if(u=l.get(t),u)return u.anchor??(u.anchor=r(t)),new gE(u.anchor);u={anchor:null,node:null},l.set(t,u)}e?.startsWith("!!")&&(e=zoe+e.slice(2));let h=Foe(t,e,a.tags);if(!h){if(t&&typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object"){const p=new Ct(t);return u&&(u.node=p),p}h=t instanceof Map?a[al]:Symbol.iterator in Object(t)?a[Zh]:a[al]}i&&(i(h),delete n.onTagObj);const m=h?.createNode?h.createNode(n.schema,t,n):typeof h?.nodeClass?.from=="function"?h.nodeClass.from(n.schema,t,n):new Ct(t);return e?m.tag=e:h.default||(m.tag=h.tag),u&&(u.node=m),m}function Nv(t,e,n){let s=n;for(let r=e.length-1;r>=0;--r){const i=e[r];if(typeof i=="number"&&Number.isInteger(i)&&i>=0){const a=[];a[i]=s,s=a}else s=new Map([[i,s]])}return Jp(s,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}const qf=t=>t==null||typeof t=="object"&&!!t[Symbol.iterator]().next().done;class HB extends mE{constructor(e,n){super(e),Object.defineProperty(this,"schema",{value:n,configurable:!0,enumerable:!1,writable:!0})}clone(e){const n=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(n.schema=e),n.items=n.items.map(s=>Pn(s)||Bn(s)?s.clone(e):s),this.range&&(n.range=this.range.slice()),n}addIn(e,n){if(qf(e))this.add(n);else{const[s,...r]=e,i=this.get(s,!0);if(Ln(i))i.addIn(r,n);else if(i===void 0&&this.schema)this.set(s,Nv(this.schema,r,n));else throw new Error(`Expected YAML collection at ${s}. Remaining path: ${r}`)}}deleteIn(e){const[n,...s]=e;if(s.length===0)return this.delete(n);const r=this.get(n,!0);if(Ln(r))return r.deleteIn(s);throw new Error(`Expected YAML collection at ${n}. Remaining path: ${s}`)}getIn(e,n){const[s,...r]=e,i=this.get(s,!0);return r.length===0?!n&&dn(i)?i.value:i:Ln(i)?i.getIn(r,n):void 0}hasAllNullValues(e){return this.items.every(n=>{if(!Bn(n))return!1;const s=n.value;return s==null||e&&dn(s)&&s.value==null&&!s.commentBefore&&!s.comment&&!s.tag})}hasIn(e){const[n,...s]=e;if(s.length===0)return this.has(n);const r=this.get(n,!0);return Ln(r)?r.hasIn(s):!1}setIn(e,n){const[s,...r]=e;if(r.length===0)this.set(s,n);else{const i=this.get(s,!0);if(Ln(i))i.setIn(r,n);else if(i===void 0&&this.schema)this.set(s,Nv(this.schema,r,n));else throw new Error(`Expected YAML collection at ${s}. Remaining path: ${r}`)}}}const Uoe=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function Va(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}const Jl=(t,e,n)=>t.endsWith(`
`)?Va(n,e):n.includes(`
`)?`
`+Va(n,e):(t.endsWith(" ")?"":" ")+n,VB="flow",Y2="block",iy="quoted";function e1(t,e,n="flow",{indentAtStart:s,lineWidth:r=80,minContentWidth:i=20,onFold:a,onOverflow:l}={}){if(!r||r<0)return t;r<i&&(i=0);const u=Math.max(1+i,1+r-e.length);if(t.length<=u)return t;const h=[],m={};let p=r-e.length;typeof s=="number"&&(s>r-Math.max(2,i)?h.push(0):p=r-s);let g,y,b=!1,_=-1,w=-1,k=-1;n===Y2&&(_=xM(t,_,e.length),_!==-1&&(p=_+u));for(let E;E=t[_+=1];){if(n===iy&&E==="\\"){switch(w=_,t[_+1]){case"x":_+=3;break;case"u":_+=5;break;case"U":_+=9;break;default:_+=1}k=_}if(E===`
`)n===Y2&&(_=xM(t,_,e.length)),p=_+e.length+u,g=void 0;else{if(E===" "&&y&&y!==" "&&y!==`
`&&y!=="	"){const A=t[_+1];A&&A!==" "&&A!==`
`&&A!=="	"&&(g=_)}if(_>=p)if(g)h.push(g),p=g+u,g=void 0;else if(n===iy){for(;y===" "||y==="	";)y=E,E=t[_+=1],b=!0;const A=_>k+1?_-2:w-1;if(m[A])return t;h.push(A),m[A]=!0,p=A+u,g=void 0}else b=!0}y=E}if(b&&l&&l(),h.length===0)return t;a&&a();let C=t.slice(0,h[0]);for(let E=0;E<h.length;++E){const A=h[E],R=h[E+1]||t.length;A===0?C=`
${e}${t.slice(0,R)}`:(n===iy&&m[A]&&(C+=`${t[A]}\\`),C+=`
${e}${t.slice(A+1,R)}`)}return C}function xM(t,e,n){let s=e,r=e+1,i=t[r];for(;i===" "||i==="	";)if(e<r+n)i=t[++e];else{do i=t[++e];while(i&&i!==`
`);s=e,r=e+1,i=t[r]}return s}const t1=(t,e)=>({indentAtStart:e?t.indent.length:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),n1=t=>/^(%|---|\.\.\.)/m.test(t);function Hoe(t,e,n){if(!e||e<0)return!1;const s=e-n,r=t.length;if(r<=s)return!1;for(let i=0,a=0;i<r;++i)if(t[i]===`
`){if(i-a>s)return!0;if(a=i+1,r-a<=s)return!1}return!0}function gp(t,e){const n=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return n;const{implicitKey:s}=e,r=e.options.doubleQuotedMinMultiLineLength,i=e.indent||(n1(t)?"  ":"");let a="",l=0;for(let u=0,h=n[u];h;h=n[++u])if(h===" "&&n[u+1]==="\\"&&n[u+2]==="n"&&(a+=n.slice(l,u)+"\\ ",u+=1,l=u,h="\\"),h==="\\")switch(n[u+1]){case"u":{a+=n.slice(l,u);const m=n.substr(u+2,4);switch(m){case"0000":a+="\\0";break;case"0007":a+="\\a";break;case"000b":a+="\\v";break;case"001b":a+="\\e";break;case"0085":a+="\\N";break;case"00a0":a+="\\_";break;case"2028":a+="\\L";break;case"2029":a+="\\P";break;default:m.substr(0,2)==="00"?a+="\\x"+m.substr(2):a+=n.substr(u,6)}u+=5,l=u+1}break;case"n":if(s||n[u+2]==='"'||n.length<r)u+=1;else{for(a+=n.slice(l,u)+`

`;n[u+2]==="\\"&&n[u+3]==="n"&&n[u+4]!=='"';)a+=`
`,u+=2;a+=i,n[u+2]===" "&&(a+="\\"),u+=1,l=u+1}break;default:u+=1}return a=l?a+n.slice(l):n,s?a:e1(a,i,iy,t1(e,!1))}function Z2(t,e){if(e.options.singleQuote===!1||e.implicitKey&&t.includes(`
`)||/[ \t]\n|\n[ \t]/.test(t))return gp(t,e);const n=e.indent||(n1(t)?"  ":""),s="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return e.implicitKey?s:e1(s,n,VB,t1(e,!1))}function Zu(t,e){const{singleQuote:n}=e.options;let s;if(n===!1)s=gp;else{const r=t.includes('"'),i=t.includes("'");r&&!i?s=Z2:i&&!r?s=gp:s=n?Z2:gp}return s(t,e)}let J2;try{J2=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{J2=/\n+(?!\n|$)/g}function ay({comment:t,type:e,value:n},s,r,i){const{blockQuote:a,commentString:l,lineWidth:u}=s.options;if(!a||/\n[\t ]+$/.test(n))return Zu(n,s);const h=s.indent||(s.forceBlockIndent||n1(n)?"  ":""),m=a==="literal"?!0:a==="folded"||e===Ct.BLOCK_FOLDED?!1:e===Ct.BLOCK_LITERAL?!0:!Hoe(n,u,h.length);if(!n)return m?`|
`:`>
`;let p,g;for(g=n.length;g>0;--g){const R=n[g-1];if(R!==`
`&&R!=="	"&&R!==" ")break}let y=n.substring(g);const b=y.indexOf(`
`);b===-1?p="-":n===y||b!==y.length-1?(p="+",i&&i()):p="",y&&(n=n.slice(0,-y.length),y[y.length-1]===`
`&&(y=y.slice(0,-1)),y=y.replace(J2,`$&${h}`));let _=!1,w,k=-1;for(w=0;w<n.length;++w){const R=n[w];if(R===" ")_=!0;else if(R===`
`)k=w;else break}let C=n.substring(0,k<w?k+1:w);C&&(n=n.substring(C.length),C=C.replace(/\n+/g,`$&${h}`));let A=(_?h?"2":"1":"")+p;if(t&&(A+=" "+l(t.replace(/ ?[\r\n]+/g," ")),r&&r()),!m){const R=n.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${h}`);let N=!1;const M=t1(s,!0);a!=="folded"&&e!==Ct.BLOCK_FOLDED&&(M.onOverflow=()=>{N=!0});const I=e1(`${C}${R}${y}`,h,Y2,M);if(!N)return`>${A}
${h}${I}`}return n=n.replace(/\n+/g,`$&${h}`),`|${A}
${h}${C}${n}${y}`}function Voe(t,e,n,s){const{type:r,value:i}=t,{actualString:a,implicitKey:l,indent:u,indentStep:h,inFlow:m}=e;if(l&&i.includes(`
`)||m&&/[[\]{},]/.test(i))return Zu(i,e);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(i))return l||m||!i.includes(`
`)?Zu(i,e):ay(t,e,n,s);if(!l&&!m&&r!==Ct.PLAIN&&i.includes(`
`))return ay(t,e,n,s);if(n1(i)){if(u==="")return e.forceBlockIndent=!0,ay(t,e,n,s);if(l&&u===h)return Zu(i,e)}const p=i.replace(/\n+/g,`$&
${u}`);if(a){const g=_=>_.default&&_.tag!=="tag:yaml.org,2002:str"&&_.test?.test(p),{compat:y,tags:b}=e.doc.schema;if(b.some(g)||y?.some(g))return Zu(i,e)}return l?p:e1(p,u,VB,t1(e,!1))}function yE(t,e,n,s){const{implicitKey:r,inFlow:i}=e,a=typeof t.value=="string"?t:Object.assign({},t,{value:String(t.value)});let{type:l}=t;l!==Ct.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(a.value)&&(l=Ct.QUOTE_DOUBLE);const u=m=>{switch(m){case Ct.BLOCK_FOLDED:case Ct.BLOCK_LITERAL:return r||i?Zu(a.value,e):ay(a,e,n,s);case Ct.QUOTE_DOUBLE:return gp(a.value,e);case Ct.QUOTE_SINGLE:return Z2(a.value,e);case Ct.PLAIN:return Voe(a,e,n,s);default:return null}};let h=u(l);if(h===null){const{defaultKeyType:m,defaultStringType:p}=e.options,g=r&&m||p;if(h=u(g),h===null)throw new Error(`Unsupported default string type ${g}`)}return h}function qB(t,e){const n=Object.assign({blockQuote:!0,commentString:Uoe,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e);let s;switch(n.collectionStyle){case"block":s=!1;break;case"flow":s=!0;break;default:s=null}return{anchors:new Set,doc:t,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:typeof n.indent=="number"?" ".repeat(n.indent):"  ",inFlow:s,options:n}}function qoe(t,e){if(e.tag){const r=t.filter(i=>i.tag===e.tag);if(r.length>0)return r.find(i=>i.format===e.format)??r[0]}let n,s;if(dn(e)){s=e.value;let r=t.filter(i=>i.identify?.(s));if(r.length>1){const i=r.filter(a=>a.test);i.length>0&&(r=i)}n=r.find(i=>i.format===e.format)??r.find(i=>!i.format)}else s=e,n=t.find(r=>r.nodeClass&&s instanceof r.nodeClass);if(!n){const r=s?.constructor?.name??(s===null?"null":typeof s);throw new Error(`Tag not resolved for ${r} value`)}return n}function Koe(t,e,{anchors:n,doc:s}){if(!s.directives)return"";const r=[],i=(dn(t)||Ln(t))&&t.anchor;i&&$B(i)&&(n.add(i),r.push(`&${i}`));const a=t.tag??(e.default?null:e.tag);return a&&r.push(s.directives.tagString(a)),r.join(" ")}function Nh(t,e,n,s){if(Bn(t))return t.toString(e,n,s);if(Bc(t)){if(e.doc.directives)return t.toString(e);if(e.resolvedAliases?.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let r;const i=Pn(t)?t:e.doc.createNode(t,{onTagObj:u=>r=u});r??(r=qoe(e.doc.schema.tags,i));const a=Koe(i,r,e);a.length>0&&(e.indentAtStart=(e.indentAtStart??0)+a.length+1);const l=typeof r.stringify=="function"?r.stringify(i,e,n,s):dn(i)?yE(i,e,n,s):i.toString(e,n,s);return a?dn(i)||l[0]==="{"||l[0]==="["?`${a} ${l}`:`${a}
${e.indent}${l}`:l}function Woe({key:t,value:e},n,s,r){const{allNullValues:i,doc:a,indent:l,indentStep:u,options:{commentString:h,indentSeq:m,simpleKeys:p}}=n;let g=Pn(t)&&t.comment||null;if(p){if(g)throw new Error("With simple keys, key nodes cannot have comments");if(Ln(t)||!Pn(t)&&typeof t=="object"){const M="With simple keys, collection cannot be used as a key value";throw new Error(M)}}let y=!p&&(!t||g&&e==null&&!n.inFlow||Ln(t)||(dn(t)?t.type===Ct.BLOCK_FOLDED||t.type===Ct.BLOCK_LITERAL:typeof t=="object"));n=Object.assign({},n,{allNullValues:!1,implicitKey:!y&&(p||!i),indent:l+u});let b=!1,_=!1,w=Nh(t,n,()=>b=!0,()=>_=!0);if(!y&&!n.inFlow&&w.length>1024){if(p)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");y=!0}if(n.inFlow){if(i||e==null)return b&&s&&s(),w===""?"?":y?`? ${w}`:w}else if(i&&!p||e==null&&y)return w=`? ${w}`,g&&!b?w+=Jl(w,n.indent,h(g)):_&&r&&r(),w;b&&(g=null),y?(g&&(w+=Jl(w,n.indent,h(g))),w=`? ${w}
${l}:`):(w=`${w}:`,g&&(w+=Jl(w,n.indent,h(g))));let k,C,E;Pn(e)?(k=!!e.spaceBefore,C=e.commentBefore,E=e.comment):(k=!1,C=null,E=null,e&&typeof e=="object"&&(e=a.createNode(e))),n.implicitKey=!1,!y&&!g&&dn(e)&&(n.indentAtStart=w.length+1),_=!1,!m&&u.length>=2&&!n.inFlow&&!y&&Om(e)&&!e.flow&&!e.tag&&!e.anchor&&(n.indent=n.indent.substring(2));let A=!1;const R=Nh(e,n,()=>A=!0,()=>_=!0);let N=" ";if(g||k||C){if(N=k?`
`:"",C){const M=h(C);N+=`
${Va(M,n.indent)}`}R===""&&!n.inFlow?N===`
`&&E&&(N=`

`):N+=`
${n.indent}`}else if(!y&&Ln(e)){const M=R[0],I=R.indexOf(`
`),W=I!==-1,P=n.inFlow??e.flow??e.items.length===0;if(W||!P){let G=!1;if(W&&(M==="&"||M==="!")){let $=R.indexOf(" ");M==="&"&&$!==-1&&$<I&&R[$+1]==="!"&&($=R.indexOf(" ",$+1)),($===-1||I<$)&&(G=!0)}G||(N=`
${n.indent}`)}}else(R===""||R[0]===`
`)&&(N="");return w+=N+R,n.inFlow?A&&s&&s():E&&!A?w+=Jl(w,n.indent,h(E)):_&&r&&r(),w}function KB(t,e){(t==="debug"||t==="warn")&&console.warn(e)}const k0="<<",Ka={identify:t=>t===k0||typeof t=="symbol"&&t.description===k0,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new Ct(Symbol(k0)),{addToJSMap:WB}),stringify:()=>k0},Goe=(t,e)=>(Ka.identify(e)||dn(e)&&(!e.type||e.type===Ct.PLAIN)&&Ka.identify(e.value))&&t?.doc.schema.tags.some(n=>n.tag===Ka.tag&&n.default);function WB(t,e,n){if(n=t&&Bc(n)?n.resolve(t.doc):n,Om(n))for(const s of n.items)Lw(t,e,s);else if(Array.isArray(n))for(const s of n)Lw(t,e,s);else Lw(t,e,n)}function Lw(t,e,n){const s=t&&Bc(n)?n.resolve(t.doc):n;if(!jm(s))throw new Error("Merge sources must be maps or map aliases");const r=s.toJSON(null,t,Map);for(const[i,a]of r)e instanceof Map?e.has(i)||e.set(i,a):e instanceof Set?e.add(i):Object.prototype.hasOwnProperty.call(e,i)||Object.defineProperty(e,i,{value:a,writable:!0,enumerable:!0,configurable:!0});return e}function GB(t,e,{key:n,value:s}){if(Pn(n)&&n.addToJSMap)n.addToJSMap(t,e,s);else if(Goe(t,n))WB(t,e,s);else{const r=pi(n,"",t);if(e instanceof Map)e.set(r,pi(s,r,t));else if(e instanceof Set)e.add(r);else{const i=Yoe(n,r,t),a=pi(s,i,t);i in e?Object.defineProperty(e,i,{value:a,writable:!0,enumerable:!0,configurable:!0}):e[i]=a}}return e}function Yoe(t,e,n){if(e===null)return"";if(typeof e!="object")return String(e);if(Pn(t)&&n?.doc){const s=qB(n.doc,{});s.anchors=new Set;for(const i of n.anchors.keys())s.anchors.add(i.anchor);s.inFlow=!0,s.inStringifyKey=!0;const r=t.toString(s);if(!n.mapKeyWarned){let i=JSON.stringify(r);i.length>40&&(i=i.substring(0,36)+'..."'),KB(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${i}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return r}return JSON.stringify(e)}function vE(t,e,n){const s=Jp(t,void 0,n),r=Jp(e,void 0,n);return new Ks(s,r)}class Ks{constructor(e,n=null){Object.defineProperty(this,mi,{value:PB}),this.key=e,this.value=n}clone(e){let{key:n,value:s}=this;return Pn(n)&&(n=n.clone(e)),Pn(s)&&(s=s.clone(e)),new Ks(n,s)}toJSON(e,n){const s=n?.mapAsMap?new Map:{};return GB(n,s,this)}toString(e,n,s){return e?.doc?Woe(this,e,n,s):JSON.stringify(this)}}function YB(t,e,n){return(e.inFlow??t.flow?Joe:Zoe)(t,e,n)}function Zoe({comment:t,items:e},n,{blockItemPrefix:s,flowChars:r,itemIndent:i,onChompKeep:a,onComment:l}){const{indent:u,options:{commentString:h}}=n,m=Object.assign({},n,{indent:i,type:null});let p=!1;const g=[];for(let b=0;b<e.length;++b){const _=e[b];let w=null;if(Pn(_))!p&&_.spaceBefore&&g.push(""),Ev(n,g,_.commentBefore,p),_.comment&&(w=_.comment);else if(Bn(_)){const C=Pn(_.key)?_.key:null;C&&(!p&&C.spaceBefore&&g.push(""),Ev(n,g,C.commentBefore,p))}p=!1;let k=Nh(_,m,()=>w=null,()=>p=!0);w&&(k+=Jl(k,i,h(w))),p&&w&&(p=!1),g.push(s+k)}let y;if(g.length===0)y=r.start+r.end;else{y=g[0];for(let b=1;b<g.length;++b){const _=g[b];y+=_?`
${u}${_}`:`
`}}return t?(y+=`
`+Va(h(t),u),l&&l()):p&&a&&a(),y}function Joe({items:t},e,{flowChars:n,itemIndent:s}){const{indent:r,indentStep:i,flowCollectionPadding:a,options:{commentString:l}}=e;s+=i;const u=Object.assign({},e,{indent:s,inFlow:!0,type:null});let h=!1,m=0;const p=[];for(let b=0;b<t.length;++b){const _=t[b];let w=null;if(Pn(_))_.spaceBefore&&p.push(""),Ev(e,p,_.commentBefore,!1),_.comment&&(w=_.comment);else if(Bn(_)){const C=Pn(_.key)?_.key:null;C&&(C.spaceBefore&&p.push(""),Ev(e,p,C.commentBefore,!1),C.comment&&(h=!0));const E=Pn(_.value)?_.value:null;E?(E.comment&&(w=E.comment),E.commentBefore&&(h=!0)):_.value==null&&C?.comment&&(w=C.comment)}w&&(h=!0);let k=Nh(_,u,()=>w=null);b<t.length-1&&(k+=","),w&&(k+=Jl(k,s,l(w))),!h&&(p.length>m||k.includes(`
`))&&(h=!0),p.push(k),m=p.length}const{start:g,end:y}=n;if(p.length===0)return g+y;if(!h){const b=p.reduce((_,w)=>_+w.length+2,2);h=e.options.lineWidth>0&&b>e.options.lineWidth}if(h){let b=g;for(const _ of p)b+=_?`
${i}${r}${_}`:`
`;return`${b}
${r}${y}`}else return`${g}${a}${p.join(" ")}${a}${y}`}function Ev({indent:t,options:{commentString:e}},n,s,r){if(s&&r&&(s=s.replace(/^\n+/,"")),s){const i=Va(e(s),t);n.push(i.trimStart())}}function Xl(t,e){const n=dn(e)?e.value:e;for(const s of t)if(Bn(s)&&(s.key===e||s.key===n||dn(s.key)&&s.key.value===n))return s}class li extends HB{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(al,e),this.items=[]}static from(e,n,s){const{keepUndefined:r,replacer:i}=s,a=new this(e),l=(u,h)=>{if(typeof i=="function")h=i.call(n,u,h);else if(Array.isArray(i)&&!i.includes(u))return;(h!==void 0||r)&&a.items.push(vE(u,h,s))};if(n instanceof Map)for(const[u,h]of n)l(u,h);else if(n&&typeof n=="object")for(const u of Object.keys(n))l(u,n[u]);return typeof e.sortMapEntries=="function"&&a.items.sort(e.sortMapEntries),a}add(e,n){let s;Bn(e)?s=e:!e||typeof e!="object"||!("key"in e)?s=new Ks(e,e?.value):s=new Ks(e.key,e.value);const r=Xl(this.items,s.key),i=this.schema?.sortMapEntries;if(r){if(!n)throw new Error(`Key ${s.key} already set`);dn(r.value)&&UB(s.value)?r.value.value=s.value:r.value=s.value}else if(i){const a=this.items.findIndex(l=>i(s,l)<0);a===-1?this.items.push(s):this.items.splice(a,0,s)}else this.items.push(s)}delete(e){const n=Xl(this.items,e);return n?this.items.splice(this.items.indexOf(n),1).length>0:!1}get(e,n){const r=Xl(this.items,e)?.value;return(!n&&dn(r)?r.value:r)??void 0}has(e){return!!Xl(this.items,e)}set(e,n){this.add(new Ks(e,n),!0)}toJSON(e,n,s){const r=s?new s:n?.mapAsMap?new Map:{};n?.onCreate&&n.onCreate(r);for(const i of this.items)GB(n,r,i);return r}toString(e,n,s){if(!e)return JSON.stringify(this);for(const r of this.items)if(!Bn(r))throw new Error(`Map items must all be pairs; found ${JSON.stringify(r)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),YB(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:s,onComment:n})}}const Xh={collection:"map",default:!0,nodeClass:li,tag:"tag:yaml.org,2002:map",resolve(t,e){return jm(t)||e("Expected a mapping for this tag"),t},createNode:(t,e,n)=>li.from(t,e,n)};class Rc extends HB{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(Zh,e),this.items=[]}add(e){this.items.push(e)}delete(e){const n=C0(e);return typeof n!="number"?!1:this.items.splice(n,1).length>0}get(e,n){const s=C0(e);if(typeof s!="number")return;const r=this.items[s];return!n&&dn(r)?r.value:r}has(e){const n=C0(e);return typeof n=="number"&&n<this.items.length}set(e,n){const s=C0(e);if(typeof s!="number")throw new Error(`Expected a valid index, not ${e}.`);const r=this.items[s];dn(r)&&UB(n)?r.value=n:this.items[s]=n}toJSON(e,n){const s=[];n?.onCreate&&n.onCreate(s);let r=0;for(const i of this.items)s.push(pi(i,String(r++),n));return s}toString(e,n,s){return e?YB(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:s,onComment:n}):JSON.stringify(this)}static from(e,n,s){const{replacer:r}=s,i=new this(e);if(n&&Symbol.iterator in Object(n)){let a=0;for(let l of n){if(typeof r=="function"){const u=n instanceof Set?l:String(a++);l=r.call(n,u,l)}i.items.push(Jp(l,void 0,s))}}return i}}function C0(t){let e=dn(t)?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}const Qh={collection:"seq",default:!0,nodeClass:Rc,tag:"tag:yaml.org,2002:seq",resolve(t,e){return Om(t)||e("Expected a sequence for this tag"),t},createNode:(t,e,n)=>Rc.from(t,e,n)},s1={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify(t,e,n,s){return e=Object.assign({actualString:!0},e),yE(t,e,n,s)}},r1={identify:t=>t==null,createNode:()=>new Ct(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new Ct(null),stringify:({source:t},e)=>typeof t=="string"&&r1.test.test(t)?t:e.options.nullStr},bE={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new Ct(t[0]==="t"||t[0]==="T"),stringify({source:t,value:e},n){if(t&&bE.test.test(t)){const s=t[0]==="t"||t[0]==="T";if(e===s)return t}return e?n.options.trueStr:n.options.falseStr}};function Ii({format:t,minFractionDigits:e,tag:n,value:s}){if(typeof s=="bigint")return String(s);const r=typeof s=="number"?s:Number(s);if(!isFinite(r))return isNaN(r)?".nan":r<0?"-.inf":".inf";let i=Object.is(s,-0)?"-0":JSON.stringify(s);if(!t&&e&&(!n||n==="tag:yaml.org,2002:float")&&/^\d/.test(i)){let a=i.indexOf(".");a<0&&(a=i.length,i+=".");let l=e-(i.length-a-1);for(;l-- >0;)i+="0"}return i}const ZB={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Ii},JB={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():Ii(t)}},XB={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){const e=new Ct(parseFloat(t)),n=t.indexOf(".");return n!==-1&&t[t.length-1]==="0"&&(e.minFractionDigits=t.length-n-1),e},stringify:Ii},i1=t=>typeof t=="bigint"||Number.isInteger(t),_E=(t,e,n,{intAsBigInt:s})=>s?BigInt(t):parseInt(t.substring(e),n);function QB(t,e,n){const{value:s}=t;return i1(s)&&s>=0?n+s.toString(e):Ii(t)}const e$={identify:t=>i1(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,n)=>_E(t,2,8,n),stringify:t=>QB(t,8,"0o")},t$={identify:i1,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,n)=>_E(t,0,10,n),stringify:Ii},n$={identify:t=>i1(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,n)=>_E(t,2,16,n),stringify:t=>QB(t,16,"0x")},Xoe=[Xh,Qh,s1,r1,bE,e$,t$,n$,ZB,JB,XB];function wM(t){return typeof t=="bigint"||Number.isInteger(t)}const N0=({value:t})=>JSON.stringify(t),Qoe=[{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:N0},{identify:t=>t==null,createNode:()=>new Ct(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:N0},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:t=>t==="true",stringify:N0},{identify:wM,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:n})=>n?BigInt(t):parseInt(t,10),stringify:({value:t})=>wM(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:N0}],ele={default:!0,tag:"",test:/^/,resolve(t,e){return e(`Unresolved plain scalar ${JSON.stringify(t)}`),t}},tle=[Xh,Qh].concat(Qoe,ele),xE={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if(typeof atob=="function"){const n=atob(t.replace(/[\n\r]/g,"")),s=new Uint8Array(n.length);for(let r=0;r<n.length;++r)s[r]=n.charCodeAt(r);return s}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:n},s,r,i){if(!n)return"";const a=n;let l;if(typeof btoa=="function"){let u="";for(let h=0;h<a.length;++h)u+=String.fromCharCode(a[h]);l=btoa(u)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e??(e=Ct.BLOCK_LITERAL),e!==Ct.QUOTE_DOUBLE){const u=Math.max(s.options.lineWidth-s.indent.length,s.options.minContentWidth),h=Math.ceil(l.length/u),m=new Array(h);for(let p=0,g=0;p<h;++p,g+=u)m[p]=l.substr(g,u);l=m.join(e===Ct.BLOCK_LITERAL?`
`:" ")}return yE({comment:t,type:e,value:l},s,r,i)}};function s$(t,e){if(Om(t))for(let n=0;n<t.items.length;++n){let s=t.items[n];if(!Bn(s)){if(jm(s)){s.items.length>1&&e("Each pair must have its own sequence indicator");const r=s.items[0]||new Ks(new Ct(null));if(s.commentBefore&&(r.key.commentBefore=r.key.commentBefore?`${s.commentBefore}
${r.key.commentBefore}`:s.commentBefore),s.comment){const i=r.value??r.key;i.comment=i.comment?`${s.comment}
${i.comment}`:s.comment}s=r}t.items[n]=Bn(s)?s:new Ks(s)}}else e("Expected a sequence for this tag");return t}function r$(t,e,n){const{replacer:s}=n,r=new Rc(t);r.tag="tag:yaml.org,2002:pairs";let i=0;if(e&&Symbol.iterator in Object(e))for(let a of e){typeof s=="function"&&(a=s.call(e,String(i++),a));let l,u;if(Array.isArray(a))if(a.length===2)l=a[0],u=a[1];else throw new TypeError(`Expected [key, value] tuple: ${a}`);else if(a&&a instanceof Object){const h=Object.keys(a);if(h.length===1)l=h[0],u=a[l];else throw new TypeError(`Expected tuple with one key, not ${h.length} keys`)}else l=a;r.items.push(vE(l,u,n))}return r}const wE={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:s$,createNode:r$};class rh extends Rc{constructor(){super(),this.add=li.prototype.add.bind(this),this.delete=li.prototype.delete.bind(this),this.get=li.prototype.get.bind(this),this.has=li.prototype.has.bind(this),this.set=li.prototype.set.bind(this),this.tag=rh.tag}toJSON(e,n){if(!n)return super.toJSON(e);const s=new Map;n?.onCreate&&n.onCreate(s);for(const r of this.items){let i,a;if(Bn(r)?(i=pi(r.key,"",n),a=pi(r.value,i,n)):i=pi(r,"",n),s.has(i))throw new Error("Ordered maps must not include duplicate keys");s.set(i,a)}return s}static from(e,n,s){const r=r$(e,n,s),i=new this;return i.items=r.items,i}}rh.tag="tag:yaml.org,2002:omap";const SE={collection:"seq",identify:t=>t instanceof Map,nodeClass:rh,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){const n=s$(t,e),s=[];for(const{key:r}of n.items)dn(r)&&(s.includes(r.value)?e(`Ordered maps must not include duplicate keys: ${r.value}`):s.push(r.value));return Object.assign(new rh,n)},createNode:(t,e,n)=>rh.from(t,e,n)};function i$({value:t,source:e},n){return e&&(t?a$:o$).test.test(e)?e:t?n.options.trueStr:n.options.falseStr}const a$={identify:t=>t===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new Ct(!0),stringify:i$},o$={identify:t=>t===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new Ct(!1),stringify:i$},nle={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Ii},sle={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():Ii(t)}},rle={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){const e=new Ct(parseFloat(t.replace(/_/g,""))),n=t.indexOf(".");if(n!==-1){const s=t.substring(n+1).replace(/_/g,"");s[s.length-1]==="0"&&(e.minFractionDigits=s.length)}return e},stringify:Ii},Mm=t=>typeof t=="bigint"||Number.isInteger(t);function a1(t,e,n,{intAsBigInt:s}){const r=t[0];if((r==="-"||r==="+")&&(e+=1),t=t.substring(e).replace(/_/g,""),s){switch(n){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`;break}const a=BigInt(t);return r==="-"?BigInt(-1)*a:a}const i=parseInt(t,n);return r==="-"?-1*i:i}function kE(t,e,n){const{value:s}=t;if(Mm(s)){const r=s.toString(e);return s<0?"-"+n+r.substr(1):n+r}return Ii(t)}const ile={identify:Mm,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,n)=>a1(t,2,2,n),stringify:t=>kE(t,2,"0b")},ale={identify:Mm,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,n)=>a1(t,1,8,n),stringify:t=>kE(t,8,"0")},ole={identify:Mm,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,n)=>a1(t,0,10,n),stringify:Ii},lle={identify:Mm,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,n)=>a1(t,2,16,n),stringify:t=>kE(t,16,"0x")};class ih extends li{constructor(e){super(e),this.tag=ih.tag}add(e){let n;Bn(e)?n=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?n=new Ks(e.key,null):n=new Ks(e,null),Xl(this.items,n.key)||this.items.push(n)}get(e,n){const s=Xl(this.items,e);return!n&&Bn(s)?dn(s.key)?s.key.value:s.key:s}set(e,n){if(typeof n!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof n}`);const s=Xl(this.items,e);s&&!n?this.items.splice(this.items.indexOf(s),1):!s&&n&&this.items.push(new Ks(e))}toJSON(e,n){return super.toJSON(e,n,Set)}toString(e,n,s){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),n,s);throw new Error("Set items must all have null values")}static from(e,n,s){const{replacer:r}=s,i=new this(e);if(n&&Symbol.iterator in Object(n))for(let a of n)typeof r=="function"&&(a=r.call(n,a,a)),i.items.push(vE(a,null,s));return i}}ih.tag="tag:yaml.org,2002:set";const CE={collection:"map",identify:t=>t instanceof Set,nodeClass:ih,default:!1,tag:"tag:yaml.org,2002:set",createNode:(t,e,n)=>ih.from(t,e,n),resolve(t,e){if(jm(t)){if(t.hasAllNullValues(!0))return Object.assign(new ih,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t}};function NE(t,e){const n=t[0],s=n==="-"||n==="+"?t.substring(1):t,r=a=>e?BigInt(a):Number(a),i=s.replace(/_/g,"").split(":").reduce((a,l)=>a*r(60)+r(l),r(0));return n==="-"?r(-1)*i:i}function l$(t){let{value:e}=t,n=a=>a;if(typeof e=="bigint")n=a=>BigInt(a);else if(isNaN(e)||!isFinite(e))return Ii(t);let s="";e<0&&(s="-",e*=n(-1));const r=n(60),i=[e%r];return e<60?i.unshift(0):(e=(e-i[0])/r,i.unshift(e%r),e>=60&&(e=(e-i[0])/r,i.unshift(e))),s+i.map(a=>String(a).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const c$={identify:t=>typeof t=="bigint"||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:n})=>NE(t,n),stringify:l$},u$={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>NE(t,!1),stringify:l$},o1={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){const e=t.match(o1.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,s,r,i,a,l]=e.map(Number),u=e[7]?Number((e[7]+"00").substr(1,3)):0;let h=Date.UTC(n,s-1,r,i||0,a||0,l||0,u);const m=e[8];if(m&&m!=="Z"){let p=NE(m,!1);Math.abs(p)<30&&(p*=60),h-=6e4*p}return new Date(h)},stringify:({value:t})=>t?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""},SM=[Xh,Qh,s1,r1,a$,o$,ile,ale,ole,lle,nle,sle,rle,xE,Ka,SE,wE,CE,c$,u$,o1],kM=new Map([["core",Xoe],["failsafe",[Xh,Qh,s1]],["json",tle],["yaml11",SM],["yaml-1.1",SM]]),CM={binary:xE,bool:bE,float:XB,floatExp:JB,floatNaN:ZB,floatTime:u$,int:t$,intHex:n$,intOct:e$,intTime:c$,map:Xh,merge:Ka,null:r1,omap:SE,pairs:wE,seq:Qh,set:CE,timestamp:o1},cle={"tag:yaml.org,2002:binary":xE,"tag:yaml.org,2002:merge":Ka,"tag:yaml.org,2002:omap":SE,"tag:yaml.org,2002:pairs":wE,"tag:yaml.org,2002:set":CE,"tag:yaml.org,2002:timestamp":o1};function Pw(t,e,n){const s=kM.get(e);if(s&&!t)return n&&!s.includes(Ka)?s.concat(Ka):s.slice();let r=s;if(!r)if(Array.isArray(t))r=[];else{const i=Array.from(kM.keys()).filter(a=>a!=="yaml11").map(a=>JSON.stringify(a)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${i} or define customTags array`)}if(Array.isArray(t))for(const i of t)r=r.concat(i);else typeof t=="function"&&(r=t(r.slice()));return n&&(r=r.concat(Ka)),r.reduce((i,a)=>{const l=typeof a=="string"?CM[a]:a;if(!l){const u=JSON.stringify(a),h=Object.keys(CM).map(m=>JSON.stringify(m)).join(", ");throw new Error(`Unknown custom tag ${u}; use one of ${h}`)}return i.includes(l)||i.push(l),i},[])}const ule=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0;let hle=class h${constructor({compat:e,customTags:n,merge:s,resolveKnownTags:r,schema:i,sortMapEntries:a,toStringDefaults:l}){this.compat=Array.isArray(e)?Pw(e,"compat"):e?Pw(null,e):null,this.name=typeof i=="string"&&i||"core",this.knownTags=r?cle:{},this.tags=Pw(n,this.name,s),this.toStringOptions=l??null,Object.defineProperty(this,al,{value:Xh}),Object.defineProperty(this,oa,{value:s1}),Object.defineProperty(this,Zh,{value:Qh}),this.sortMapEntries=typeof a=="function"?a:a===!0?ule:null}clone(){const e=Object.create(h$.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}};function dle(t,e){const n=[];let s=e.directives===!0;if(e.directives!==!1&&t.directives){const u=t.directives.toString(t);u?(n.push(u),s=!0):t.directives.docStart&&(s=!0)}s&&n.push("---");const r=qB(t,e),{commentString:i}=r.options;if(t.commentBefore){n.length!==1&&n.unshift("");const u=i(t.commentBefore);n.unshift(Va(u,""))}let a=!1,l=null;if(t.contents){if(Pn(t.contents)){if(t.contents.spaceBefore&&s&&n.push(""),t.contents.commentBefore){const m=i(t.contents.commentBefore);n.push(Va(m,""))}r.forceBlockIndent=!!t.comment,l=t.contents.comment}const u=l?void 0:()=>a=!0;let h=Nh(t.contents,r,()=>l=null,u);l&&(h+=Jl(h,"",i(l))),(h[0]==="|"||h[0]===">")&&n[n.length-1]==="---"?n[n.length-1]=`--- ${h}`:n.push(h)}else n.push(Nh(t.contents,r));if(t.directives?.docEnd)if(t.comment){const u=i(t.comment);u.includes(`
`)?(n.push("..."),n.push(Va(u,""))):n.push(`... ${u}`)}else n.push("...");else{let u=t.comment;u&&a&&(u=u.replace(/^\n+/,"")),u&&((!a||l)&&n[n.length-1]!==""&&n.push(""),n.push(Va(i(u),"")))}return n.join(`
`)+`
`}let EE=class d${constructor(e,n,s){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,mi,{value:G2});let r=null;typeof n=="function"||Array.isArray(n)?r=n:s===void 0&&n&&(s=n,n=void 0);const i=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},s);this.options=i;let{version:a}=i;s?._directives?(this.directives=s._directives.atDocument(),this.directives.yaml.explicit&&(a=this.directives.yaml.version)):this.directives=new Fs({version:a}),this.setSchema(a,s),this.contents=e===void 0?null:this.createNode(e,r,s)}clone(){const e=Object.create(d$.prototype,{[mi]:{value:G2}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=Pn(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){Au(this.contents)&&this.contents.add(e)}addIn(e,n){Au(this.contents)&&this.contents.addIn(e,n)}createAlias(e,n){if(!e.anchor){const s=zB(this);e.anchor=!n||s.has(n)?FB(n||"a",s):n}return new gE(e.anchor)}createNode(e,n,s){let r;if(typeof n=="function")e=n.call({"":e},"",e),r=n;else if(Array.isArray(n)){const w=C=>typeof C=="number"||C instanceof String||C instanceof Number,k=n.filter(w).map(String);k.length>0&&(n=n.concat(k)),r=n}else s===void 0&&n&&(s=n,n=void 0);const{aliasDuplicateObjects:i,anchorPrefix:a,flow:l,keepUndefined:u,onTagObj:h,tag:m}=s??{},{onAnchor:p,setAnchors:g,sourceObjects:y}=$oe(this,a||"a"),b={aliasDuplicateObjects:i??!0,keepUndefined:u??!1,onAnchor:p,onTagObj:h,replacer:r,schema:this.schema,sourceObjects:y},_=Jp(e,m,b);return l&&Ln(_)&&(_.flow=!0),g(),_}createPair(e,n,s={}){const r=this.createNode(e,null,s),i=this.createNode(n,null,s);return new Ks(r,i)}delete(e){return Au(this.contents)?this.contents.delete(e):!1}deleteIn(e){return qf(e)?this.contents==null?!1:(this.contents=null,!0):Au(this.contents)?this.contents.deleteIn(e):!1}get(e,n){return Ln(this.contents)?this.contents.get(e,n):void 0}getIn(e,n){return qf(e)?!n&&dn(this.contents)?this.contents.value:this.contents:Ln(this.contents)?this.contents.getIn(e,n):void 0}has(e){return Ln(this.contents)?this.contents.has(e):!1}hasIn(e){return qf(e)?this.contents!==void 0:Ln(this.contents)?this.contents.hasIn(e):!1}set(e,n){this.contents==null?this.contents=Nv(this.schema,[e],n):Au(this.contents)&&this.contents.set(e,n)}setIn(e,n){qf(e)?this.contents=n:this.contents==null?this.contents=Nv(this.schema,Array.from(e),n):Au(this.contents)&&this.contents.setIn(e,n)}setSchema(e,n={}){typeof e=="number"&&(e=String(e));let s;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new Fs({version:"1.1"}),s={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new Fs({version:e}),s={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,s=null;break;default:{const r=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${r}`)}}if(n.schema instanceof Object)this.schema=n.schema;else if(s)this.schema=new hle(Object.assign(s,n));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:n,mapAsMap:s,maxAliasCount:r,onAnchor:i,reviver:a}={}){const l={anchors:new Map,doc:this,keep:!e,mapAsMap:s===!0,mapKeyWarned:!1,maxAliasCount:typeof r=="number"?r:100},u=pi(this.contents,n??"",l);if(typeof i=="function")for(const{count:h,res:m}of l.anchors.values())i(m,h);return typeof a=="function"?Yu(a,{"":u},"",u):u}toJSON(e,n){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:n})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const n=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${n}`)}return dle(this,e)}};function Au(t){if(Ln(t))return!0;throw new Error("Expected a YAML collection as document contents")}class f$ extends Error{constructor(e,n,s,r){super(),this.name=e,this.code=s,this.message=r,this.pos=n}}class Kf extends f${constructor(e,n,s){super("YAMLParseError",e,n,s)}}class fle extends f${constructor(e,n,s){super("YAMLWarning",e,n,s)}}const NM=(t,e)=>n=>{if(n.pos[0]===-1)return;n.linePos=n.pos.map(l=>e.linePos(l));const{line:s,col:r}=n.linePos[0];n.message+=` at line ${s}, column ${r}`;let i=r-1,a=t.substring(e.lineStarts[s-1],e.lineStarts[s]).replace(/[\n\r]+$/,"");if(i>=60&&a.length>80){const l=Math.min(i-39,a.length-79);a=""+a.substring(l),i-=l-1}if(a.length>80&&(a=a.substring(0,79)+""),s>1&&/^ *$/.test(a.substring(0,i))){let l=t.substring(e.lineStarts[s-2],e.lineStarts[s-1]);l.length>80&&(l=l.substring(0,79)+`
`),a=l+a}if(/[^ ]/.test(a)){let l=1;const u=n.linePos[1];u?.line===s&&u.col>r&&(l=Math.max(1,Math.min(u.col-r,80-i)));const h=" ".repeat(i)+"^".repeat(l);n.message+=`:

${a}
${h}
`}};function Eh(t,{flow:e,indicator:n,next:s,offset:r,onError:i,parentIndent:a,startOnNewline:l}){let u=!1,h=l,m=l,p="",g="",y=!1,b=!1,_=null,w=null,k=null,C=null,E=null,A=null,R=null;for(const I of t)switch(b&&(I.type!=="space"&&I.type!=="newline"&&I.type!=="comma"&&i(I.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),b=!1),_&&(h&&I.type!=="comment"&&I.type!=="newline"&&i(_,"TAB_AS_INDENT","Tabs are not allowed as indentation"),_=null),I.type){case"space":!e&&(n!=="doc-start"||s?.type!=="flow-collection")&&I.source.includes("	")&&(_=I),m=!0;break;case"comment":{m||i(I,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const W=I.source.substring(1)||" ";p?p+=g+W:p=W,g="",h=!1;break}case"newline":h?p?p+=I.source:(!A||n!=="seq-item-ind")&&(u=!0):g+=I.source,h=!0,y=!0,(w||k)&&(C=I),m=!0;break;case"anchor":w&&i(I,"MULTIPLE_ANCHORS","A node can have at most one anchor"),I.source.endsWith(":")&&i(I.offset+I.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),w=I,R??(R=I.offset),h=!1,m=!1,b=!0;break;case"tag":{k&&i(I,"MULTIPLE_TAGS","A node can have at most one tag"),k=I,R??(R=I.offset),h=!1,m=!1,b=!0;break}case n:(w||k)&&i(I,"BAD_PROP_ORDER",`Anchors and tags must be after the ${I.source} indicator`),A&&i(I,"UNEXPECTED_TOKEN",`Unexpected ${I.source} in ${e??"collection"}`),A=I,h=n==="seq-item-ind"||n==="explicit-key-ind",m=!1;break;case"comma":if(e){E&&i(I,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),E=I,h=!1,m=!1;break}default:i(I,"UNEXPECTED_TOKEN",`Unexpected ${I.type} token`),h=!1,m=!1}const N=t[t.length-1],M=N?N.offset+N.source.length:r;return b&&s&&s.type!=="space"&&s.type!=="newline"&&s.type!=="comma"&&(s.type!=="scalar"||s.source!=="")&&i(s.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),_&&(h&&_.indent<=a||s?.type==="block-map"||s?.type==="block-seq")&&i(_,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:E,found:A,spaceBefore:u,comment:p,hasNewline:y,anchor:w,tag:k,newlineAfterProp:C,end:M,start:R??M}}function Xp(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes(`
`))return!0;if(t.end){for(const e of t.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(const e of t.items){for(const n of e.start)if(n.type==="newline")return!0;if(e.sep){for(const n of e.sep)if(n.type==="newline")return!0}if(Xp(e.key)||Xp(e.value))return!0}return!1;default:return!0}}function X2(t,e,n){if(e?.type==="flow-collection"){const s=e.end[0];s.indent===t&&(s.source==="]"||s.source==="}")&&Xp(e)&&n(s,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function p$(t,e,n){const{uniqueKeys:s}=t.options;if(s===!1)return!1;const r=typeof s=="function"?s:(i,a)=>i===a||dn(i)&&dn(a)&&i.value===a.value;return e.some(i=>r(i.key,n))}const EM="All mapping items must start at the same column";function ple({composeNode:t,composeEmptyNode:e},n,s,r,i){const a=i?.nodeClass??li,l=new a(n.schema);n.atRoot&&(n.atRoot=!1);let u=s.offset,h=null;for(const m of s.items){const{start:p,key:g,sep:y,value:b}=m,_=Eh(p,{indicator:"explicit-key-ind",next:g??y?.[0],offset:u,onError:r,parentIndent:s.indent,startOnNewline:!0}),w=!_.found;if(w){if(g&&(g.type==="block-seq"?r(u,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in g&&g.indent!==s.indent&&r(u,"BAD_INDENT",EM)),!_.anchor&&!_.tag&&!y){h=_.end,_.comment&&(l.comment?l.comment+=`
`+_.comment:l.comment=_.comment);continue}(_.newlineAfterProp||Xp(g))&&r(g??p[p.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else _.found?.indent!==s.indent&&r(u,"BAD_INDENT",EM);n.atKey=!0;const k=_.end,C=g?t(n,g,_,r):e(n,k,p,null,_,r);n.schema.compat&&X2(s.indent,g,r),n.atKey=!1,p$(n,l.items,C)&&r(k,"DUPLICATE_KEY","Map keys must be unique");const E=Eh(y??[],{indicator:"map-value-ind",next:b,offset:C.range[2],onError:r,parentIndent:s.indent,startOnNewline:!g||g.type==="block-scalar"});if(u=E.end,E.found){w&&(b?.type==="block-map"&&!E.hasNewline&&r(u,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&_.start<E.found.offset-1024&&r(C.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const A=b?t(n,b,E,r):e(n,u,y,null,E,r);n.schema.compat&&X2(s.indent,b,r),u=A.range[2];const R=new Ks(C,A);n.options.keepSourceTokens&&(R.srcToken=m),l.items.push(R)}else{w&&r(C.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),E.comment&&(C.comment?C.comment+=`
`+E.comment:C.comment=E.comment);const A=new Ks(C);n.options.keepSourceTokens&&(A.srcToken=m),l.items.push(A)}}return h&&h<u&&r(h,"IMPOSSIBLE","Map comment with trailing content"),l.range=[s.offset,u,h??u],l}function mle({composeNode:t,composeEmptyNode:e},n,s,r,i){const a=i?.nodeClass??Rc,l=new a(n.schema);n.atRoot&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let u=s.offset,h=null;for(const{start:m,value:p}of s.items){const g=Eh(m,{indicator:"seq-item-ind",next:p,offset:u,onError:r,parentIndent:s.indent,startOnNewline:!0});if(!g.found)if(g.anchor||g.tag||p)p?.type==="block-seq"?r(g.end,"BAD_INDENT","All sequence items must start at the same column"):r(u,"MISSING_CHAR","Sequence item without - indicator");else{h=g.end,g.comment&&(l.comment=g.comment);continue}const y=p?t(n,p,g,r):e(n,g.end,m,null,g,r);n.schema.compat&&X2(s.indent,p,r),u=y.range[2],l.items.push(y)}return l.range=[s.offset,u,h??u],l}function Im(t,e,n,s){let r="";if(t){let i=!1,a="";for(const l of t){const{source:u,type:h}=l;switch(h){case"space":i=!0;break;case"comment":{n&&!i&&s(l,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const m=u.substring(1)||" ";r?r+=a+m:r=m,a="";break}case"newline":r&&(a+=u),i=!0;break;default:s(l,"UNEXPECTED_TOKEN",`Unexpected ${h} at node end`)}e+=u.length}}return{comment:r,offset:e}}const Bw="Block collections are not allowed within flow collections",$w=t=>t&&(t.type==="block-map"||t.type==="block-seq");function gle({composeNode:t,composeEmptyNode:e},n,s,r,i){const a=s.start.source==="{",l=a?"flow map":"flow sequence",u=i?.nodeClass??(a?li:Rc),h=new u(n.schema);h.flow=!0;const m=n.atRoot;m&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let p=s.offset+s.start.source.length;for(let w=0;w<s.items.length;++w){const k=s.items[w],{start:C,key:E,sep:A,value:R}=k,N=Eh(C,{flow:l,indicator:"explicit-key-ind",next:E??A?.[0],offset:p,onError:r,parentIndent:s.indent,startOnNewline:!1});if(!N.found){if(!N.anchor&&!N.tag&&!A&&!R){w===0&&N.comma?r(N.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${l}`):w<s.items.length-1&&r(N.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${l}`),N.comment&&(h.comment?h.comment+=`
`+N.comment:h.comment=N.comment),p=N.end;continue}!a&&n.options.strict&&Xp(E)&&r(E,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(w===0)N.comma&&r(N.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${l}`);else if(N.comma||r(N.start,"MISSING_CHAR",`Missing , between ${l} items`),N.comment){let M="";e:for(const I of C)switch(I.type){case"comma":case"space":break;case"comment":M=I.source.substring(1);break e;default:break e}if(M){let I=h.items[h.items.length-1];Bn(I)&&(I=I.value??I.key),I.comment?I.comment+=`
`+M:I.comment=M,N.comment=N.comment.substring(M.length+1)}}if(!a&&!A&&!N.found){const M=R?t(n,R,N,r):e(n,N.end,A,null,N,r);h.items.push(M),p=M.range[2],$w(R)&&r(M.range,"BLOCK_IN_FLOW",Bw)}else{n.atKey=!0;const M=N.end,I=E?t(n,E,N,r):e(n,M,C,null,N,r);$w(E)&&r(I.range,"BLOCK_IN_FLOW",Bw),n.atKey=!1;const W=Eh(A??[],{flow:l,indicator:"map-value-ind",next:R,offset:I.range[2],onError:r,parentIndent:s.indent,startOnNewline:!1});if(W.found){if(!a&&!N.found&&n.options.strict){if(A)for(const $ of A){if($===W.found)break;if($.type==="newline"){r($,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}N.start<W.found.offset-1024&&r(W.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else R&&("source"in R&&R.source?.[0]===":"?r(R,"MISSING_CHAR",`Missing space after : in ${l}`):r(W.start,"MISSING_CHAR",`Missing , or : between ${l} items`));const P=R?t(n,R,W,r):W.found?e(n,W.end,A,null,W,r):null;P?$w(R)&&r(P.range,"BLOCK_IN_FLOW",Bw):W.comment&&(I.comment?I.comment+=`
`+W.comment:I.comment=W.comment);const G=new Ks(I,P);if(n.options.keepSourceTokens&&(G.srcToken=k),a){const $=h;p$(n,$.items,I)&&r(M,"DUPLICATE_KEY","Map keys must be unique"),$.items.push(G)}else{const $=new li(n.schema);$.flow=!0,$.items.push(G);const U=(P??I).range;$.range=[I.range[0],U[1],U[2]],h.items.push($)}p=P?P.range[2]:W.end}}const g=a?"}":"]",[y,...b]=s.end;let _=p;if(y?.source===g)_=y.offset+y.source.length;else{const w=l[0].toUpperCase()+l.substring(1),k=m?`${w} must end with a ${g}`:`${w} in block collection must be sufficiently indented and end with a ${g}`;r(p,m?"MISSING_CHAR":"BAD_INDENT",k),y&&y.source.length!==1&&b.unshift(y)}if(b.length>0){const w=Im(b,_,n.options.strict,r);w.comment&&(h.comment?h.comment+=`
`+w.comment:h.comment=w.comment),h.range=[s.offset,_,w.offset]}else h.range=[s.offset,_,_];return h}function zw(t,e,n,s,r,i){const a=n.type==="block-map"?ple(t,e,n,s,i):n.type==="block-seq"?mle(t,e,n,s,i):gle(t,e,n,s,i),l=a.constructor;return r==="!"||r===l.tagName?(a.tag=l.tagName,a):(r&&(a.tag=r),a)}function yle(t,e,n,s,r){const i=s.tag,a=i?e.directives.tagName(i.source,g=>r(i,"TAG_RESOLVE_FAILED",g)):null;if(n.type==="block-seq"){const{anchor:g,newlineAfterProp:y}=s,b=g&&i?g.offset>i.offset?g:i:g??i;b&&(!y||y.offset<b.offset)&&r(b,"MISSING_CHAR","Missing newline after block sequence props")}const l=n.type==="block-map"?"map":n.type==="block-seq"?"seq":n.start.source==="{"?"map":"seq";if(!i||!a||a==="!"||a===li.tagName&&l==="map"||a===Rc.tagName&&l==="seq")return zw(t,e,n,r,a);let u=e.schema.tags.find(g=>g.tag===a&&g.collection===l);if(!u){const g=e.schema.knownTags[a];if(g?.collection===l)e.schema.tags.push(Object.assign({},g,{default:!1})),u=g;else return g?r(i,"BAD_COLLECTION_TYPE",`${g.tag} used for ${l} collection, but expects ${g.collection??"scalar"}`,!0):r(i,"TAG_RESOLVE_FAILED",`Unresolved tag: ${a}`,!0),zw(t,e,n,r,a)}const h=zw(t,e,n,r,a,u),m=u.resolve?.(h,g=>r(i,"TAG_RESOLVE_FAILED",g),e.options)??h,p=Pn(m)?m:new Ct(m);return p.range=h.range,p.tag=a,u?.format&&(p.format=u.format),p}function vle(t,e,n){const s=e.offset,r=ble(e,t.options.strict,n);if(!r)return{value:"",type:null,comment:"",range:[s,s,s]};const i=r.mode===">"?Ct.BLOCK_FOLDED:Ct.BLOCK_LITERAL,a=e.source?_le(e.source):[];let l=a.length;for(let _=a.length-1;_>=0;--_){const w=a[_][1];if(w===""||w==="\r")l=_;else break}if(l===0){const _=r.chomp==="+"&&a.length>0?`
`.repeat(Math.max(1,a.length-1)):"";let w=s+r.length;return e.source&&(w+=e.source.length),{value:_,type:i,comment:r.comment,range:[s,w,w]}}let u=e.indent+r.indent,h=e.offset+r.length,m=0;for(let _=0;_<l;++_){const[w,k]=a[_];if(k===""||k==="\r")r.indent===0&&w.length>u&&(u=w.length);else{w.length<u&&n(h+w.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),r.indent===0&&(u=w.length),m=_,u===0&&!t.atRoot&&n(h,"BAD_INDENT","Block scalar values in collections must be indented");break}h+=w.length+k.length+1}for(let _=a.length-1;_>=l;--_)a[_][0].length>u&&(l=_+1);let p="",g="",y=!1;for(let _=0;_<m;++_)p+=a[_][0].slice(u)+`
`;for(let _=m;_<l;++_){let[w,k]=a[_];h+=w.length+k.length+1;const C=k[k.length-1]==="\r";if(C&&(k=k.slice(0,-1)),k&&w.length<u){const A=`Block scalar lines must not be less indented than their ${r.indent?"explicit indentation indicator":"first line"}`;n(h-k.length-(C?2:1),"BAD_INDENT",A),w=""}i===Ct.BLOCK_LITERAL?(p+=g+w.slice(u)+k,g=`
`):w.length>u||k[0]==="	"?(g===" "?g=`
`:!y&&g===`
`&&(g=`

`),p+=g+w.slice(u)+k,g=`
`,y=!0):k===""?g===`
`?p+=`
`:g=`
`:(p+=g+k,g=" ",y=!1)}switch(r.chomp){case"-":break;case"+":for(let _=l;_<a.length;++_)p+=`
`+a[_][0].slice(u);p[p.length-1]!==`
`&&(p+=`
`);break;default:p+=`
`}const b=s+r.length+e.source.length;return{value:p,type:i,comment:r.comment,range:[s,b,b]}}function ble({offset:t,props:e},n,s){if(e[0].type!=="block-scalar-header")return s(e[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:r}=e[0],i=r[0];let a=0,l="",u=-1;for(let g=1;g<r.length;++g){const y=r[g];if(!l&&(y==="-"||y==="+"))l=y;else{const b=Number(y);!a&&b?a=b:u===-1&&(u=t+g)}}u!==-1&&s(u,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${r}`);let h=!1,m="",p=r.length;for(let g=1;g<e.length;++g){const y=e[g];switch(y.type){case"space":h=!0;case"newline":p+=y.source.length;break;case"comment":n&&!h&&s(y,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),p+=y.source.length,m=y.source.substring(1);break;case"error":s(y,"UNEXPECTED_TOKEN",y.message),p+=y.source.length;break;default:{const b=`Unexpected token in block scalar header: ${y.type}`;s(y,"UNEXPECTED_TOKEN",b);const _=y.source;_&&typeof _=="string"&&(p+=_.length)}}}return{mode:i,indent:a,chomp:l,comment:m,length:p}}function _le(t){const e=t.split(/\n( *)/),n=e[0],s=n.match(/^( *)/),i=[s?.[1]?[s[1],n.slice(s[1].length)]:["",n]];for(let a=1;a<e.length;a+=2)i.push([e[a],e[a+1]]);return i}function xle(t,e,n){const{offset:s,type:r,source:i,end:a}=t;let l,u;const h=(g,y,b)=>n(s+g,y,b);switch(r){case"scalar":l=Ct.PLAIN,u=wle(i,h);break;case"single-quoted-scalar":l=Ct.QUOTE_SINGLE,u=Sle(i,h);break;case"double-quoted-scalar":l=Ct.QUOTE_DOUBLE,u=kle(i,h);break;default:return n(t,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${r}`),{value:"",type:null,comment:"",range:[s,s+i.length,s+i.length]}}const m=s+i.length,p=Im(a,m,e,n);return{value:u,type:l,comment:p.comment,range:[s,m,p.offset]}}function wle(t,e){let n="";switch(t[0]){case"	":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":{n=`block scalar indicator ${t[0]}`;break}case"@":case"`":{n=`reserved character ${t[0]}`;break}}return n&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`),m$(t)}function Sle(t,e){return(t[t.length-1]!=="'"||t.length===1)&&e(t.length,"MISSING_CHAR","Missing closing 'quote"),m$(t.slice(1,-1)).replace(/''/g,"'")}function m$(t){let e,n;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),n=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let s=e.exec(t);if(!s)return t;let r=s[1],i=" ",a=e.lastIndex;for(n.lastIndex=a;s=n.exec(t);)s[1]===""?i===`
`?r+=i:i=`
`:(r+=i+s[1],i=" "),a=n.lastIndex;const l=/[ \t]*(.*)/sy;return l.lastIndex=a,s=l.exec(t),r+i+(s?.[1]??"")}function kle(t,e){let n="";for(let s=1;s<t.length-1;++s){const r=t[s];if(!(r==="\r"&&t[s+1]===`
`))if(r===`
`){const{fold:i,offset:a}=Cle(t,s);n+=i,s=a}else if(r==="\\"){let i=t[++s];const a=Nle[i];if(a)n+=a;else if(i===`
`)for(i=t[s+1];i===" "||i==="	";)i=t[++s+1];else if(i==="\r"&&t[s+1]===`
`)for(i=t[++s+1];i===" "||i==="	";)i=t[++s+1];else if(i==="x"||i==="u"||i==="U"){const l={x:2,u:4,U:8}[i];n+=Ele(t,s+1,l,e),s+=l}else{const l=t.substr(s-1,2);e(s-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${l}`),n+=l}}else if(r===" "||r==="	"){const i=s;let a=t[s+1];for(;a===" "||a==="	";)a=t[++s+1];a!==`
`&&!(a==="\r"&&t[s+2]===`
`)&&(n+=s>i?t.slice(i,s+1):r)}else n+=r}return(t[t.length-1]!=='"'||t.length===1)&&e(t.length,"MISSING_CHAR",'Missing closing "quote'),n}function Cle(t,e){let n="",s=t[e+1];for(;(s===" "||s==="	"||s===`
`||s==="\r")&&!(s==="\r"&&t[e+2]!==`
`);)s===`
`&&(n+=`
`),e+=1,s=t[e+1];return n||(n=" "),{fold:n,offset:e}}const Nle={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"",_:"",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function Ele(t,e,n,s){const r=t.substr(e,n),a=r.length===n&&/^[0-9a-fA-F]+$/.test(r)?parseInt(r,16):NaN;if(isNaN(a)){const l=t.substr(e-2,n+2);return s(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${l}`),l}return String.fromCodePoint(a)}function g$(t,e,n,s){const{value:r,type:i,comment:a,range:l}=e.type==="block-scalar"?vle(t,e,s):xle(e,t.options.strict,s),u=n?t.directives.tagName(n.source,p=>s(n,"TAG_RESOLVE_FAILED",p)):null;let h;t.options.stringKeys&&t.atKey?h=t.schema[oa]:u?h=Ale(t.schema,r,u,n,s):e.type==="scalar"?h=Rle(t,r,e,s):h=t.schema[oa];let m;try{const p=h.resolve(r,g=>s(n??e,"TAG_RESOLVE_FAILED",g),t.options);m=dn(p)?p:new Ct(p)}catch(p){const g=p instanceof Error?p.message:String(p);s(n??e,"TAG_RESOLVE_FAILED",g),m=new Ct(r)}return m.range=l,m.source=r,i&&(m.type=i),u&&(m.tag=u),h.format&&(m.format=h.format),a&&(m.comment=a),m}function Ale(t,e,n,s,r){if(n==="!")return t[oa];const i=[];for(const l of t.tags)if(!l.collection&&l.tag===n)if(l.default&&l.test)i.push(l);else return l;for(const l of i)if(l.test?.test(e))return l;const a=t.knownTags[n];return a&&!a.collection?(t.tags.push(Object.assign({},a,{default:!1,test:void 0})),a):(r(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,n!=="tag:yaml.org,2002:str"),t[oa])}function Rle({atKey:t,directives:e,schema:n},s,r,i){const a=n.tags.find(l=>(l.default===!0||t&&l.default==="key")&&l.test?.test(s))||n[oa];if(n.compat){const l=n.compat.find(u=>u.default&&u.test?.test(s))??n[oa];if(a.tag!==l.tag){const u=e.tagString(a.tag),h=e.tagString(l.tag),m=`Value may be parsed as either ${u} or ${h}`;i(r,"TAG_RESOLVE_FAILED",m,!0)}}return a}function Tle(t,e,n){if(e){n??(n=e.length);for(let s=n-1;s>=0;--s){let r=e[s];switch(r.type){case"space":case"comment":case"newline":t-=r.source.length;continue}for(r=e[++s];r?.type==="space";)t+=r.source.length,r=e[++s];break}}return t}const jle={composeNode:y$,composeEmptyNode:AE};function y$(t,e,n,s){const r=t.atKey,{spaceBefore:i,comment:a,anchor:l,tag:u}=n;let h,m=!0;switch(e.type){case"alias":h=Ole(t,e,s),(l||u)&&s(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":h=g$(t,e,u,s),l&&(h.anchor=l.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":h=yle(jle,t,e,n,s),l&&(h.anchor=l.source.substring(1));break;default:{const p=e.type==="error"?e.message:`Unsupported token (type: ${e.type})`;s(e,"UNEXPECTED_TOKEN",p),h=AE(t,e.offset,void 0,null,n,s),m=!1}}return l&&h.anchor===""&&s(l,"BAD_ALIAS","Anchor cannot be an empty string"),r&&t.options.stringKeys&&(!dn(h)||typeof h.value!="string"||h.tag&&h.tag!=="tag:yaml.org,2002:str")&&s(u??e,"NON_STRING_KEY","With stringKeys, all keys must be strings"),i&&(h.spaceBefore=!0),a&&(e.type==="scalar"&&e.source===""?h.comment=a:h.commentBefore=a),t.options.keepSourceTokens&&m&&(h.srcToken=e),h}function AE(t,e,n,s,{spaceBefore:r,comment:i,anchor:a,tag:l,end:u},h){const m={type:"scalar",offset:Tle(e,n,s),indent:-1,source:""},p=g$(t,m,l,h);return a&&(p.anchor=a.source.substring(1),p.anchor===""&&h(a,"BAD_ALIAS","Anchor cannot be an empty string")),r&&(p.spaceBefore=!0),i&&(p.comment=i,p.range[2]=u),p}function Ole({options:t},{offset:e,source:n,end:s},r){const i=new gE(n.substring(1));i.source===""&&r(e,"BAD_ALIAS","Alias cannot be an empty string"),i.source.endsWith(":")&&r(e+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const a=e+n.length,l=Im(s,a,t.strict,r);return i.range=[e,a,l.offset],l.comment&&(i.comment=l.comment),i}function Mle(t,e,{offset:n,start:s,value:r,end:i},a){const l=Object.assign({_directives:e},t),u=new EE(void 0,l),h={atKey:!1,atRoot:!0,directives:u.directives,options:u.options,schema:u.schema},m=Eh(s,{indicator:"doc-start",next:r??i?.[0],offset:n,onError:a,parentIndent:0,startOnNewline:!0});m.found&&(u.directives.docStart=!0,r&&(r.type==="block-map"||r.type==="block-seq")&&!m.hasNewline&&a(m.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),u.contents=r?y$(h,r,m,a):AE(h,m.end,s,null,m,a);const p=u.contents.range[2],g=Im(i,p,!1,a);return g.comment&&(u.comment=g.comment),u.range=[n,p,g.offset],u}function cf(t){if(typeof t=="number")return[t,t+1];if(Array.isArray(t))return t.length===2?t:[t[0],t[1]];const{offset:e,source:n}=t;return[e,e+(typeof n=="string"?n.length:1)]}function AM(t){let e="",n=!1,s=!1;for(let r=0;r<t.length;++r){const i=t[r];switch(i[0]){case"#":e+=(e===""?"":s?`

`:`
`)+(i.substring(1)||" "),n=!0,s=!1;break;case"%":t[r+1]?.[0]!=="#"&&(r+=1),n=!1;break;default:n||(s=!0),n=!1}}return{comment:e,afterEmptyLine:s}}class Ile{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(n,s,r,i)=>{const a=cf(n);i?this.warnings.push(new fle(a,s,r)):this.errors.push(new Kf(a,s,r))},this.directives=new Fs({version:e.version||"1.2"}),this.options=e}decorate(e,n){const{comment:s,afterEmptyLine:r}=AM(this.prelude);if(s){const i=e.contents;if(n)e.comment=e.comment?`${e.comment}
${s}`:s;else if(r||e.directives.docStart||!i)e.commentBefore=s;else if(Ln(i)&&!i.flow&&i.items.length>0){let a=i.items[0];Bn(a)&&(a=a.key);const l=a.commentBefore;a.commentBefore=l?`${s}
${l}`:s}else{const a=i.commentBefore;i.commentBefore=a?`${s}
${a}`:s}}n?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:AM(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,n=!1,s=-1){for(const r of e)yield*this.next(r);yield*this.end(n,s)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,(n,s,r)=>{const i=cf(e);i[0]+=n,this.onError(i,"BAD_DIRECTIVE",s,r)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{const n=Mle(this.options,this.directives,e,this.onError);this.atDirectives&&!n.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(n,!1),this.doc&&(yield this.doc),this.doc=n,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const n=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,s=new Kf(cf(e),"UNEXPECTED_TOKEN",n);this.atDirectives||!this.doc?this.errors.push(s):this.doc.errors.push(s);break}case"doc-end":{if(!this.doc){const s="Unexpected doc-end without preceding document";this.errors.push(new Kf(cf(e),"UNEXPECTED_TOKEN",s));break}this.doc.directives.docEnd=!0;const n=Im(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),n.comment){const s=this.doc.comment;this.doc.comment=s?`${s}
${n.comment}`:n.comment}this.doc.range[2]=n.offset;break}default:this.errors.push(new Kf(cf(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,n=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){const s=Object.assign({_directives:this.directives},this.options),r=new EE(void 0,s);this.atDirectives&&this.onError(n,"MISSING_CHAR","Missing directives-end indicator line"),r.range=[0,n,n],this.decorate(r,!1),yield r}}}const v$="\uFEFF",b$="",_$="",Q2="";function Dle(t){switch(t){case v$:return"byte-order-mark";case b$:return"doc-mode";case _$:return"flow-error-end";case Q2:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}function wi(t){switch(t){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}const RM=new Set("0123456789ABCDEFabcdef"),Lle=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),E0=new Set(",[]{}"),Ple=new Set(` ,[]{}
\r	`),Fw=t=>!t||Ple.has(t);class Ble{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,n=!1){if(e){if(typeof e!="string")throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null}this.atEnd=!n;let s=this.next??"stream";for(;s&&(n||this.hasChars(1));)s=yield*this.parseNext(s)}atLineEnd(){let e=this.pos,n=this.buffer[e];for(;n===" "||n==="	";)n=this.buffer[++e];return!n||n==="#"||n===`
`?!0:n==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let n=this.buffer[e];if(this.indentNext>0){let s=0;for(;n===" ";)n=this.buffer[++s+e];if(n==="\r"){const r=this.buffer[s+e+1];if(r===`
`||!r&&!this.atEnd)return e+s+1}return n===`
`||s>=this.indentNext||!n&&!this.atEnd?e+s:-1}if(n==="-"||n==="."){const s=this.buffer.substr(e,3);if((s==="---"||s==="...")&&wi(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===v$&&(yield*this.pushCount(1),e=e.substring(1)),e[0]==="%"){let n=e.length,s=e.indexOf("#");for(;s!==-1;){const i=e[s-1];if(i===" "||i==="	"){n=s-1;break}else s=e.indexOf("#",s+1)}for(;;){const i=e[n-1];if(i===" "||i==="	")n-=1;else break}const r=(yield*this.pushCount(n))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-r),this.pushNewline(),"stream"}if(this.atLineEnd()){const n=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-n),yield*this.pushNewline(),"stream"}return yield b$,yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const n=this.peek(3);if((n==="---"||n==="...")&&wi(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,n==="---"?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!wi(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[e,n]=this.peek(2);if(!n&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&wi(n)){const s=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=s,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const e=this.getLine();if(e===null)return this.setNext("doc");let n=yield*this.pushIndicators();switch(e[n]){case"#":yield*this.pushCount(e.length-n);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(Fw),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return n+=yield*this.parseBlockScalarHeader(),n+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-n),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,n,s=-1;do e=yield*this.pushNewline(),e>0?(n=yield*this.pushSpaces(!1),this.indentValue=s=n):n=0,n+=yield*this.pushSpaces(!0);while(e+n>0);const r=this.getLine();if(r===null)return this.setNext("flow");if((s!==-1&&s<this.indentNext&&r[0]!=="#"||s===0&&(r.startsWith("---")||r.startsWith("..."))&&wi(r[3]))&&!(s===this.indentNext-1&&this.flowLevel===1&&(r[0]==="]"||r[0]==="}")))return this.flowLevel=0,yield _$,yield*this.parseLineStart();let i=0;for(;r[i]===",";)i+=yield*this.pushCount(1),i+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(i+=yield*this.pushIndicators(),r[i]){case void 0:return"flow";case"#":return yield*this.pushCount(r.length-i),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(Fw),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const a=this.charAt(1);if(this.flowKey||wi(a)||a===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let n=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;n!==-1&&this.buffer[n+1]==="'";)n=this.buffer.indexOf("'",n+2);else for(;n!==-1;){let i=0;for(;this.buffer[n-1-i]==="\\";)i+=1;if(i%2===0)break;n=this.buffer.indexOf('"',n+1)}const s=this.buffer.substring(0,n);let r=s.indexOf(`
`,this.pos);if(r!==-1){for(;r!==-1;){const i=this.continueScalar(r+1);if(i===-1)break;r=s.indexOf(`
`,i)}r!==-1&&(n=r-(s[r-1]==="\r"?2:1))}if(n===-1){if(!this.atEnd)return this.setNext("quoted-scalar");n=this.buffer.length}return yield*this.pushToIndex(n+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const n=this.buffer[++e];if(n==="+")this.blockScalarKeep=!0;else if(n>"0"&&n<="9")this.blockScalarIndent=Number(n)-1;else if(n!=="-")break}return yield*this.pushUntil(n=>wi(n)||n==="#")}*parseBlockScalar(){let e=this.pos-1,n=0,s;e:for(let i=this.pos;s=this.buffer[i];++i)switch(s){case" ":n+=1;break;case`
`:e=i,n=0;break;case"\r":{const a=this.buffer[i+1];if(!a&&!this.atEnd)return this.setNext("block-scalar");if(a===`
`)break}default:break e}if(!s&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=n:this.indentNext=this.blockScalarIndent+(this.indentNext===0?1:this.indentNext);do{const i=this.continueScalar(e+1);if(i===-1)break;e=this.buffer.indexOf(`
`,i)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}let r=e+1;for(s=this.buffer[r];s===" ";)s=this.buffer[++r];if(s==="	"){for(;s==="	"||s===" "||s==="\r"||s===`
`;)s=this.buffer[++r];e=r-1}else if(!this.blockScalarKeep)do{let i=e-1,a=this.buffer[i];a==="\r"&&(a=this.buffer[--i]);const l=i;for(;a===" ";)a=this.buffer[--i];if(a===`
`&&i>=this.pos&&i+1+n>l)e=i;else break}while(!0);return yield Q2,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let n=this.pos-1,s=this.pos-1,r;for(;r=this.buffer[++s];)if(r===":"){const i=this.buffer[s+1];if(wi(i)||e&&E0.has(i))break;n=s}else if(wi(r)){let i=this.buffer[s+1];if(r==="\r"&&(i===`
`?(s+=1,r=`
`,i=this.buffer[s+1]):n=s),i==="#"||e&&E0.has(i))break;if(r===`
`){const a=this.continueScalar(s+1);if(a===-1)break;s=Math.max(s,a-2)}}else{if(e&&E0.has(r))break;n=s}return!r&&!this.atEnd?this.setNext("plain-scalar"):(yield Q2,yield*this.pushToIndex(n+1,!0),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,n){const s=this.buffer.slice(this.pos,e);return s?(yield s,this.pos+=s.length,s.length):(n&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(Fw))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const e=this.flowLevel>0,n=this.charAt(1);if(wi(n)||e&&E0.has(n))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,n=this.buffer[e];for(;!wi(n)&&n!==">";)n=this.buffer[++e];return yield*this.pushToIndex(n===">"?e+1:e,!1)}else{let e=this.pos+1,n=this.buffer[e];for(;n;)if(Lle.has(n))n=this.buffer[++e];else if(n==="%"&&RM.has(this.buffer[e+1])&&RM.has(this.buffer[e+2]))n=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){const e=this.buffer[this.pos];return e===`
`?yield*this.pushCount(1):e==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(e){let n=this.pos-1,s;do s=this.buffer[++n];while(s===" "||e&&s==="	");const r=n-this.pos;return r>0&&(yield this.buffer.substr(this.pos,r),this.pos=n),r}*pushUntil(e){let n=this.pos,s=this.buffer[n];for(;!e(s);)s=this.buffer[++n];return yield*this.pushToIndex(n,!1)}}class $le{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let n=0,s=this.lineStarts.length;for(;n<s;){const i=n+s>>1;this.lineStarts[i]<e?n=i+1:s=i}if(this.lineStarts[n]===e)return{line:n+1,col:1};if(n===0)return{line:0,col:e};const r=this.lineStarts[n-1];return{line:n,col:e-r+1}}}}function Uo(t,e){for(let n=0;n<t.length;++n)if(t[n].type===e)return!0;return!1}function TM(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function x$(t){switch(t?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function A0(t){switch(t.type){case"document":return t.start;case"block-map":{const e=t.items[t.items.length-1];return e.sep??e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function Ru(t){if(t.length===0)return[];let e=t.length;e:for(;--e>=0;)switch(t[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;t[++e]?.type==="space";);return t.splice(e,t.length)}function jM(t){if(t.start.type==="flow-seq-start")for(const e of t.items)e.sep&&!e.value&&!Uo(e.start,"explicit-key-ind")&&!Uo(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,x$(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}class zle{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Ble,this.onNewLine=e}*parse(e,n=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(const s of this.lexer.lex(e,n))yield*this.next(s);n||(yield*this.end())}*next(e){if(this.source=e,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}const n=Dle(e);if(n)if(n==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=n,yield*this.step(),n){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{const s=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:s,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const e=this.peek(1);if(this.type==="doc-end"&&e?.type!=="doc-end"){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){const n=e??this.stack.pop();if(!n)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield n;else{const s=this.peek(1);switch(n.type==="block-scalar"?n.indent="indent"in s?s.indent:0:n.type==="flow-collection"&&s.type==="document"&&(n.indent=0),n.type==="flow-collection"&&jM(n),s.type){case"document":s.value=n;break;case"block-scalar":s.props.push(n);break;case"block-map":{const r=s.items[s.items.length-1];if(r.value){s.items.push({start:[],key:n,sep:[]}),this.onKeyLine=!0;return}else if(r.sep)r.value=n;else{Object.assign(r,{key:n,sep:[]}),this.onKeyLine=!r.explicitKey;return}break}case"block-seq":{const r=s.items[s.items.length-1];r.value?s.items.push({start:[],value:n}):r.value=n;break}case"flow-collection":{const r=s.items[s.items.length-1];!r||r.value?s.items.push({start:[],key:n,sep:[]}):r.sep?r.value=n:Object.assign(r,{key:n,sep:[]});return}default:yield*this.pop(),yield*this.pop(n)}if((s.type==="document"||s.type==="block-map"||s.type==="block-seq")&&(n.type==="block-map"||n.type==="block-seq")){const r=n.items[n.items.length-1];r&&!r.sep&&!r.value&&r.start.length>0&&TM(r.start)===-1&&(n.indent===0||r.start.every(i=>i.type!=="comment"||i.indent<n.indent))&&(s.type==="document"?s.end=r.start:s.items.push({start:r.start}),n.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{TM(e.start)!==-1?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}const n=this.startBlockValue(e);n?this.stack.push(n):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){const n=A0(this.peek(2)),s=Ru(n);let r;e.end?(r=e.end,r.push(this.sourceToken),delete e.end):r=[this.sourceToken];const i={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:s,key:e,sep:r}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=i}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){const n=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,n.value){const s="end"in n.value?n.value.end:void 0;(Array.isArray(s)?s[s.length-1]:void 0)?.type==="comment"?s?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else if(n.sep)n.sep.push(this.sourceToken);else{if(this.atIndentedComment(n.start,e.indent)){const r=e.items[e.items.length-2]?.value?.end;if(Array.isArray(r)){Array.prototype.push.apply(r,n.start),r.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return}if(this.indent>=e.indent){const s=!this.onKeyLine&&this.indent===e.indent,r=s&&(n.sep||n.explicitKey)&&this.type!=="seq-item-ind";let i=[];if(r&&n.sep&&!n.value){const a=[];for(let l=0;l<n.sep.length;++l){const u=n.sep[l];switch(u.type){case"newline":a.push(l);break;case"space":break;case"comment":u.indent>e.indent&&(a.length=0);break;default:a.length=0}}a.length>=2&&(i=n.sep.splice(a[1]))}switch(this.type){case"anchor":case"tag":r||n.value?(i.push(this.sourceToken),e.items.push({start:i}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"explicit-key-ind":!n.sep&&!n.explicitKey?(n.start.push(this.sourceToken),n.explicitKey=!0):r||n.value?(i.push(this.sourceToken),e.items.push({start:i,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}),this.onKeyLine=!0;return;case"map-value-ind":if(n.explicitKey)if(n.sep)if(n.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(Uo(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:i,key:null,sep:[this.sourceToken]}]});else if(x$(n.key)&&!Uo(n.sep,"newline")){const a=Ru(n.start),l=n.key,u=n.sep;u.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:a,key:l,sep:u}]})}else i.length>0?n.sep=n.sep.concat(i,this.sourceToken):n.sep.push(this.sourceToken);else if(Uo(n.start,"newline"))Object.assign(n,{key:null,sep:[this.sourceToken]});else{const a=Ru(n.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:a,key:null,sep:[this.sourceToken]}]})}else n.sep?n.value||r?e.items.push({start:i,key:null,sep:[this.sourceToken]}):Uo(n.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const a=this.flowScalar(this.type);r||n.value?(e.items.push({start:i,key:a,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(a):(Object.assign(n,{key:a,sep:[]}),this.onKeyLine=!0);return}default:{const a=this.startBlockValue(e);if(a){if(a.type==="block-seq"){if(!n.explicitKey&&n.sep&&!Uo(n.sep,"newline")){yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source});return}}else s&&e.items.push({start:i});this.stack.push(a);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){const n=e.items[e.items.length-1];switch(this.type){case"newline":if(n.value){const s="end"in n.value?n.value.end:void 0;(Array.isArray(s)?s[s.length-1]:void 0)?.type==="comment"?s?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(n.start,e.indent)){const r=e.items[e.items.length-2]?.value?.end;if(Array.isArray(r)){Array.prototype.push.apply(r,n.start),r.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return;case"anchor":case"tag":if(n.value||this.indent<=e.indent)break;n.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;n.value||Uo(n.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return}if(this.indent>e.indent){const s=this.startBlockValue(e);if(s){this.stack.push(s);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){const n=e.items[e.items.length-1];if(this.type==="flow-error-end"){let s;do yield*this.pop(),s=this.peek(1);while(s?.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!n||n.sep?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return;case"map-value-ind":!n||n.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!n||n.value?e.items.push({start:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const r=this.flowScalar(this.type);!n||n.value?e.items.push({start:[],key:r,sep:[]}):n.sep?this.stack.push(r):Object.assign(n,{key:r,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}const s=this.startBlockValue(e);s?this.stack.push(s):(yield*this.pop(),yield*this.step())}else{const s=this.peek(2);if(s.type==="block-map"&&(this.type==="map-value-ind"&&s.indent===e.indent||this.type==="newline"&&!s.items[s.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&s.type!=="flow-collection"){const r=A0(s),i=Ru(r);jM(e);const a=e.end.splice(1,e.end.length);a.push(this.sourceToken);const l={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:i,key:e,sep:a}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=l}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const n=A0(e),s=Ru(n);return s.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;const n=A0(e),s=Ru(n);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,n){return this.type!=="comment"||this.indent<=n?!1:e.every(s=>s.type==="newline"||s.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}}function Fle(t){const e=t.prettyErrors!==!1;return{lineCounter:t.lineCounter||e&&new $le||null,prettyErrors:e}}function Ule(t,e={}){const{lineCounter:n,prettyErrors:s}=Fle(e),r=new zle(n?.addNewLine),i=new Ile(e);let a=null;for(const l of i.compose(r.parse(t),!0,t.length))if(!a)a=l;else if(a.options.logLevel!=="silent"){a.errors.push(new Kf(l.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return s&&n&&(a.errors.forEach(NM(t,n)),a.warnings.forEach(NM(t,n))),a}function Uw(t,e,n){let s;const r=Ule(t,n);if(!r)return null;if(r.warnings.forEach(i=>KB(r.options.logLevel,i)),r.errors.length>0){if(r.options.logLevel!=="silent")throw r.errors[0];r.errors=[]}return r.toJS(Object.assign({reviver:s},n))}function OM(t,e,n){let s=null;if(typeof e=="function"||Array.isArray(e)?s=e:n===void 0&&e&&(n=e),typeof n=="string"&&(n=n.length),typeof n=="number"){const r=Math.round(n);n=r<1?void 0:r>8?{indent:8}:{indent:r}}if(t===void 0){const{keepUndefined:r}=n??e??{};if(!r)return}return Tm(t)&&!s?t.toString(n):new EE(t,s,n).toString(n)}function Hw(){return document.documentElement.classList.contains("dark")||window.matchMedia("(prefers-color-scheme: dark)").matches}function Hle({resource:t,loading:e,error:n,onSave:s,toolbarRef:r}){const[i,a]=F.useState(""),[l,u]=F.useState(""),[h,m]=F.useState(!1),[p,g]=F.useState(null),[y,b]=F.useState(!1),[_,w]=F.useState(null),[k,C]=F.useState(Hw),E=F.useRef(null),A=F.useRef(null),[R,N]=F.useState(!1);F.useEffect(()=>{const $=new MutationObserver(()=>{C(Hw())});$.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]});const U=window.matchMedia("(prefers-color-scheme: dark)"),Z=()=>C(Hw());return U.addEventListener("change",Z),()=>{$.disconnect(),U.removeEventListener("change",Z)}},[]);const M=F.useCallback(async $=>{const U=$.getModel();if(!U)return N(!0);const Z=U.getValue().split(`
`),K=/^(\s*)(managedFields|ownerReferences|kubectl\.kubernetes\.io\/last-applied-configuration):/,B=Z.flatMap((J,Y)=>{const z=J.match(K);if(!z)return[];const O=z[1].length,L=Z.slice(Y+1).findIndex(T=>T.trimStart().length>0&&T.length-T.trimStart().length<=O),V=L===-1?Z.length:Y+1+L;return V>Y+1?[{start:Y+1,end:V}]:[]});for(const{start:J,end:Y}of B.reverse())$.setSelection({startLineNumber:J,startColumn:1,endLineNumber:Y,endColumn:1}),await $.getAction("editor.fold")?.run();$.setPosition({lineNumber:1,column:1}),$.revealLine(1),N(!0)},[]);F.useEffect(()=>{if(t){const $=OM(t,{lineWidth:0});$!==l&&(h?u($):(a($),u($),g(null),w(null),E.current&&(N(!1),setTimeout(()=>M(E.current),100))))}},[t,l,h,M]),F.useEffect(()=>{if(!i){g(null);return}try{Uw(i),g(null)}catch($){g($ instanceof Error?$.message:"Invalid YAML")}},[i]);const I=($,U)=>{E.current=$,A.current=U,U.languages.registerDocumentFormattingEditProvider("yaml",{provideDocumentFormattingEdits:Z=>{try{const K=Z.getValue(),B=Uw(K),J=OM(B,{lineWidth:0});return[{range:Z.getFullModelRange(),text:J}]}catch{return[]}}}),N(!1),setTimeout(()=>M($),100)},W=$=>{const U=$||"";a(U),m(U!==l),w(null)},P=F.useCallback(()=>{a(l),m(!1),g(null),w(null)},[l]),G=F.useCallback(async()=>{if(!(p||!h))try{b(!0),w(null);const $=Uw(i);await s($),u(i),m(!1)}catch($){w($ instanceof Error?$.message:"Failed to save")}finally{b(!1)}},[p,h,i,s]);return e?f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsxs("div",{className:"flex items-center gap-2 text-neutral-600 dark:text-neutral-400 text-sm",children:[f.jsx(qa,{size:14,className:"animate-spin"}),"Loading resource..."]})}):n?f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsx("div",{className:"text-sm text-red-600 dark:text-red-400",children:n})}):t?f.jsxs("div",{className:"flex flex-col h-full",children:[r&&f.jsxs(Gb,{toolbarRef:r,children:[f.jsx("button",{onClick:G,disabled:!h||!!p||y,className:"flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 hover:bg-neutral-200 dark:hover:bg-neutral-800 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Save changes",children:y?f.jsx(qa,{size:12,className:"animate-spin"}):f.jsx(RZ,{size:12})}),f.jsx("button",{onClick:P,disabled:!h||y,className:"flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-200 dark:hover:bg-neutral-800 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Reset changes",children:f.jsx(NZ,{size:12})})]}),(p||_)&&f.jsx("div",{className:"shrink-0 flex items-center gap-2 px-4 py-2 bg-red-50 dark:bg-red-500/10 border-b border-red-200 dark:border-red-500/20",children:p?f.jsxs(f.Fragment,{children:[f.jsx(Mh,{size:14,className:"text-red-500 shrink-0"}),f.jsxs("span",{className:"text-xs text-red-700 dark:text-red-400",children:["Invalid YAML: ",p]})]}):f.jsxs(f.Fragment,{children:[f.jsx(Mp,{size:14,className:"text-red-500 shrink-0"}),f.jsx("span",{className:"text-xs text-red-700 dark:text-red-400",children:_})]})}),f.jsx("div",{className:`flex-1 min-h-0 transition-opacity duration-150 ${R?"opacity-100":"opacity-0"}`,children:f.jsx(Ooe,{height:"100%",language:"yaml",theme:k?"vs-dark":"light",value:i,onChange:W,onMount:I,loading:f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsx(qa,{size:20,className:"animate-spin text-neutral-400"})}),options:{minimap:{enabled:!1},fontSize:13,fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace',lineNumbers:"on",scrollBeyondLastLine:!1,wordWrap:"on",wrappingIndent:"indent",automaticLayout:!0,tabSize:2,insertSpaces:!0,renderWhitespace:"selection",bracketPairColorization:{enabled:!0},guides:{indentation:!0,bracketPairs:!0},padding:{top:12,bottom:12},scrollbar:{verticalScrollbarSize:10,horizontalScrollbarSize:10}}})})]}):f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"No resource loaded"})})}const Vle=new Set(["managedFields"]);function qle(t){const e=t.metadata;if(!e)return t;const n=Object.fromEntries(Object.entries(e).filter(([s])=>!Vle.has(s)));return{...t,metadata:n}}function w$({context:t,isOpen:e,onClose:n,otherPanelOpen:s=!1,resource:r,tab:i,onTabChange:a}){const[l,u]=F.useState("yaml"),[h,m]=F.useState(null),[p,g]=F.useState(null),[y,b]=F.useState(null),[_,w]=F.useState(null),[k,C]=F.useState({}),E=F.useRef(null),A=F.useRef(null),R=F.useRef(null);F.useEffect(()=>{if(!_||_.input?.type!=="slider")return;const Re=pt=>{R.current&&!R.current.contains(pt.target)&&(w(null),C({}))},mt=setTimeout(()=>{document.addEventListener("mousedown",Re)},0);return()=>{clearTimeout(mt),document.removeEventListener("mousedown",Re)}},[_]);const{data:N,isLoading:M,error:I,refetch:W}=Ry({queryKey:["kubernetes","resource",t,r?.kind,r?.apiVersion,r?.name,r?.namespace],queryFn:async()=>{if(!r||!r.name||!r.kind)return null;const Re=await AD(t,r.kind,r.apiVersion);if(!Re)throw new Error(`Unknown resource kind: ${r.kind}`);return E.current=Re,oJ(t,Re,r.name,r.namespace)},enabled:e&&!!r?.name&&!!r?.kind,placeholderData:Z3}),{data:P=[],isLoading:G}=Ry({queryKey:["kubernetes","events",t,r?.name,r?.namespace],queryFn:async()=>r?.name?cJ(t,r.name,r.namespace):[],enabled:e&&!!r?.name,placeholderData:Z3}),$=I instanceof Error?I.message:I?String(I):null,U=N?IP(N):[],Z=async(Re,mt)=>{g(null),m(Re.id);try{await Re.execute(t,N,mt),W()}catch(pt){g(pt instanceof Error?pt.message:"Action failed")}finally{m(null),b(null),w(null),C({})}},K=Re=>{if(Re.input){const mt=Re.input.defaultValue?Re.input.defaultValue(N):Re.input.type==="text"?"":0;C({value:mt}),w(Re)}else Re.confirm?b(Re):Z(Re)},B=F.useCallback(async Re=>{if(!r||!r.name||!E.current)throw new Error("Resource configuration not available");await lJ(t,E.current,r.name,Re,r.namespace),W()},[t,r,W]),J=F.useCallback(Re=>{u(Re),a?.(Re)},[a]),Y=r?.kind||"",z=gte(Y),L=["Pod","Deployment","DaemonSet","ReplicaSet","StatefulSet","Job"].includes(Y)&&!!r?.namespace,V=Y==="Pod"&&!!r?.namespace,T=new Set(["pod-template-hash","controller-revision-hash","pod-template-generation"]),Q=new Set(["kubectl.kubernetes.io/last-applied-configuration","deployment.kubernetes.io/revision","control-plane.alpha.kubernetes.io/leader","deprecated.daemonset.template.generation","kubernetes.io/description"]),te=N?.metadata,X=te?.labels,oe=te?.annotations,xe=X?Object.keys(X).filter(Re=>!T.has(Re)).length:0,Se=oe?Object.keys(oe).filter(Re=>!Q.has(Re)).length:0,Xe=xe>0||Se>0,Ke=P.length>0,st=F.useCallback(Re=>{switch(Re){case"overview":return z;case"metadata":return Xe;case"yaml":return!0;case"events":return Ke;case"logs":return L;case"terminal":return V;default:return!1}},[z,Xe,Ke,L,V]),Le=F.useCallback(()=>z?"overview":"yaml",[z]);if(F.useEffect(()=>{if(i&&st(i))u(i);else if(i){const Re=Le();u(Re),a?.(Re)}else u(Le())},[r?.kind,r?.name,r?.namespace,i,st,Le,a]),F.useEffect(()=>{if(!st(l)){const Re=Le();u(Re),a?.(Re)}},[l,st,Le,a]),!e||!r||!r.name)return null;const Ge=N,ct=Ge?qle(Ge):null,ut=r.name;return f.jsxs("aside",{className:"fixed top-0 h-screen bg-white border-l border-neutral-200 dark:bg-neutral-900 dark:border-neutral-800 flex flex-col z-20 shadow-xl transition-all duration-300",style:{right:s?"28rem":"0",width:s?"28rem":"40rem"},children:["      ",f.jsxs("header",{className:"shrink-0 h-16 flex items-center justify-between pl-5 pr-4 border-b border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900",children:[f.jsx("div",{className:"flex items-center gap-3 min-w-0",children:f.jsxs("div",{className:"min-w-0",children:[f.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-neutral-100 truncate",children:ut}),f.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-500",children:r.namespace||"cluster-scoped"})]})}),f.jsx("button",{onClick:n,className:"p-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-400 dark:hover:text-neutral-200 dark:hover:bg-neutral-800 rounded-md transition-colors",title:"Close",children:f.jsx(Mp,{size:18})})]}),f.jsxs("div",{className:"shrink-0 flex items-center border-b border-neutral-200 dark:border-neutral-800 bg-neutral-50 dark:bg-neutral-900/50",children:[f.jsxs("div",{className:"flex",children:[z&&f.jsx("button",{onClick:()=>J("overview"),className:`px-4 py-2.5 text-sm font-medium transition-colors ${l==="overview"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 -mb-px":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200"}`,children:"Overview"}),Xe&&f.jsx("button",{onClick:()=>J("metadata"),className:`px-4 py-2.5 text-sm font-medium transition-colors ${l==="metadata"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 -mb-px":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200"}`,children:"Metadata"}),f.jsx("button",{onClick:()=>J("yaml"),className:`px-4 py-2.5 text-sm font-medium transition-colors ${l==="yaml"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 -mb-px":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200"}`,children:"Manifest"}),P.length>0&&f.jsx("button",{onClick:()=>J("events"),className:`px-4 py-2.5 text-sm font-medium transition-colors ${l==="events"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 -mb-px":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200"}`,children:"Events"}),L&&f.jsx("button",{onClick:()=>J("logs"),className:`px-4 py-2.5 text-sm font-medium transition-colors ${l==="logs"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 -mb-px":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200"}`,children:"Logs"}),V&&f.jsx("button",{onClick:()=>J("terminal"),className:`px-4 py-2.5 text-sm font-medium transition-colors ${l==="terminal"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 -mb-px":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200"}`,children:"Terminal"})]}),f.jsxs("div",{className:"ml-auto pr-4 flex items-center gap-1",children:[f.jsx("div",{ref:A,className:"flex items-center gap-1"}),l==="overview"&&U.length>0&&f.jsx(f.Fragment,{children:U.map(Re=>{const mt=Re.isDisabled?.(N),pt=mt===!0||typeof mt=="string",At=typeof mt=="string"?mt:void 0,Me=h===Re.id,ze=_?.id===Re.id&&Re.input?.type==="slider";return f.jsxs("div",{className:"relative",children:[f.jsx("button",{onClick:()=>K(Re),disabled:pt||Me,title:At||Re.label,className:`
                        flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium rounded transition-colors
                        ${pt||Me?"opacity-50 cursor-not-allowed":""}
                        ${ze?"bg-neutral-200 dark:bg-neutral-700":""}
                        ${Re.variant==="primary"?"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 hover:bg-neutral-200 dark:hover:bg-neutral-800":Re.variant==="warning"?"text-amber-600 dark:text-amber-400 hover:text-amber-700 dark:hover:text-amber-300 hover:bg-neutral-200 dark:hover:bg-neutral-800":Re.variant==="danger"?"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 hover:bg-neutral-200 dark:hover:bg-neutral-800":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-200 dark:hover:bg-neutral-800"}
                      `,children:Me?f.jsx(Cn,{size:12,className:"animate-spin"}):Re.icon}),ze&&f.jsx("div",{ref:R,className:"absolute right-0 top-full mt-1 z-50 bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded shadow-lg px-2 py-1.5",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"range",min:Re.input?.min??0,max:Re.input?.max??10,value:k.value??0,onChange:De=>C({value:parseInt(De.target.value,10)}),className:"w-24 h-1 bg-neutral-200 dark:bg-neutral-700 rounded-full appearance-none cursor-pointer accent-blue-500"}),f.jsx("span",{className:"text-xs font-medium text-neutral-900 dark:text-neutral-100 w-4 text-center tabular-nums",children:k.value??0}),f.jsx("button",{onClick:()=>Z(Re,k),disabled:Me,className:"p-0.5 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded transition-colors",title:"Apply",children:f.jsx(Tn,{size:14})}),f.jsx("button",{onClick:()=>{w(null),C({})},className:"p-0.5 text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded transition-colors",title:"Close",children:f.jsx(Mp,{size:14})})]})})]},Re.id)})})]})]}),p&&f.jsx("div",{className:"shrink-0 mx-4 mt-2 p-2 bg-red-500/10 border border-red-500/30 rounded text-red-600 dark:text-red-400 text-xs",children:p}),y&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:f.jsxs("div",{className:"bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg p-4 max-w-md mx-4 shadow-xl",children:[f.jsx("h3",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-200 mb-2",children:y.confirm?.title}),f.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400 mb-4",children:y.confirm?.message}),f.jsxs("div",{className:"flex justify-end gap-2",children:[f.jsx("button",{onClick:()=>b(null),className:"px-3 py-1.5 text-xs font-medium text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded transition-colors",children:"Cancel"}),f.jsxs("button",{onClick:()=>Z(y),disabled:h===y.id,className:`
                  px-3 py-1.5 text-xs font-medium text-white rounded transition-colors
                  ${y.variant==="danger"?"bg-red-600 hover:bg-red-700":y.variant==="warning"?"bg-amber-600 hover:bg-amber-700":"bg-blue-600 hover:bg-blue-700"}
                  ${h===y.id?"opacity-50 cursor-not-allowed":""}
                `,children:[h===y.id?f.jsx(Cn,{size:12,className:"animate-spin inline mr-1"}):null,y.confirm?.confirmLabel||"Confirm"]})]})]})}),_&&_.input?.type!=="slider"&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:f.jsxs("div",{className:"bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg p-4 max-w-md mx-4 shadow-xl",children:[f.jsx("h3",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-200 mb-2",children:_.input?.title}),_.input?.description&&f.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400 mb-4",children:_.input.description}),f.jsxs("form",{onSubmit:Re=>{Re.preventDefault(),Z(_,k)},className:"space-y-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs text-neutral-600 dark:text-neutral-400 mb-1",children:_.input?.label}),f.jsx("input",{type:_.input?.type,value:k.value??"",onChange:Re=>{const mt=_.input?.type==="number"?parseInt(Re.target.value,10)||0:Re.target.value;C({value:mt})},min:_.input?.min,max:_.input?.max,placeholder:_.input?.placeholder,className:"w-full px-3 py-2 text-sm bg-neutral-100 dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-600 rounded text-neutral-900 dark:text-neutral-200 placeholder-neutral-500 focus:outline-none focus:border-blue-500",autoFocus:!0})]}),f.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[f.jsx("button",{type:"button",onClick:()=>{w(null),C({})},className:"px-3 py-1.5 text-xs font-medium text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded transition-colors",children:"Cancel"}),f.jsxs("button",{type:"submit",disabled:h===_.id,className:`
                    px-3 py-1.5 text-xs font-medium text-white rounded transition-colors
                    ${_.variant==="danger"?"bg-red-600 hover:bg-red-700":_.variant==="warning"?"bg-amber-600 hover:bg-amber-700":"bg-blue-600 hover:bg-blue-700"}
                    ${h===_.id?"opacity-50 cursor-not-allowed":""}
                  `,children:[h===_.id?f.jsx(Cn,{size:12,className:"animate-spin inline mr-1"}):null,_.input?.submitLabel||"Submit"]})]})]})]})}),l==="overview"&&z&&f.jsxs("div",{className:"flex-1 overflow-auto p-4",children:[M&&f.jsxs("div",{className:"flex items-center gap-2 text-neutral-600 dark:text-neutral-400 text-sm mb-4",children:[f.jsx(qa,{size:14,className:"animate-spin"}),"Loading full resource..."]}),$&&f.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mb-4",children:$}),N&&!M&&f.jsx(pne,{context:t,resource:N,hideActions:!0})]}),l==="yaml"&&f.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:f.jsx(Hle,{resource:N??null,loading:M,error:$,onSave:B,toolbarRef:A})}),l==="metadata"&&f.jsx("div",{className:"flex-1 overflow-auto p-5",children:ct&&f.jsx(mae,{metadata:ct.metadata})}),l==="events"&&f.jsx("div",{className:"flex-1 overflow-auto p-5",children:f.jsx(_ae,{events:P,loading:G})}),l==="logs"&&L&&N&&f.jsx("div",{className:"flex-1 overflow-hidden",children:f.jsx(Une,{context:t,resource:N,toolbarRef:A})}),l==="terminal"&&V&&N&&f.jsx("div",{className:"flex-1 overflow-hidden",children:f.jsx(pae,{context:t,resource:N,toolbarRef:A})})]})}const Ah={Pod:eo,Deployment:xD,DaemonSet:bD,StatefulSet:Ih,Job:ND,CronJob:fl,Service:PZ,Ingress:Ji,Gateway:Vs,HTTPRoute:Op,GRPCRoute:Op,NetworkPolicy:Dh,PersistentVolume:Ws,PersistentVolumeClaim:yD,ConfigMap:Ri,Secret:tb,Node:ra},Kle={Pod:{bg:"#dcfce7",bgDark:"#14532d",border:"#22c55e",borderDark:"#4ade80",text:"#166534",textDark:"#86efac"},Deployment:{bg:"#dbeafe",bgDark:"#1e3a8a",border:"#3b82f6",borderDark:"#60a5fa",text:"#1e40af",textDark:"#93c5fd"},DaemonSet:{bg:"#f3e8ff",bgDark:"#581c87",border:"#a855f7",borderDark:"#c084fc",text:"#6b21a8",textDark:"#d8b4fe"},StatefulSet:{bg:"#ede9fe",bgDark:"#5b21b6",border:"#8b5cf6",borderDark:"#a78bfa",text:"#5b21b6",textDark:"#c4b5fd"},Job:{bg:"#fef3c7",bgDark:"#78350f",border:"#f59e0b",borderDark:"#fbbf24",text:"#92400e",textDark:"#fcd34d"},CronJob:{bg:"#ffedd5",bgDark:"#7c2d12",border:"#f97316",borderDark:"#fb923c",text:"#9a3412",textDark:"#fdba74"},Service:{bg:"#cffafe",bgDark:"#164e63",border:"#06b6d4",borderDark:"#22d3ee",text:"#155e75",textDark:"#67e8f9"},Ingress:{bg:"#ccfbf1",bgDark:"#134e4a",border:"#14b8a6",borderDark:"#2dd4bf",text:"#115e59",textDark:"#5eead4"},Gateway:{bg:"#d1fae5",bgDark:"#065f46",border:"#10b981",borderDark:"#34d399",text:"#065f46",textDark:"#6ee7b7"},HTTPRoute:{bg:"#a7f3d0",bgDark:"#047857",border:"#34d399",borderDark:"#6ee7b7",text:"#047857",textDark:"#a7f3d0"},GRPCRoute:{bg:"#a7f3d0",bgDark:"#047857",border:"#34d399",borderDark:"#6ee7b7",text:"#047857",textDark:"#a7f3d0"},NetworkPolicy:{bg:"#fef3c7",bgDark:"#78350f",border:"#f59e0b",borderDark:"#fbbf24",text:"#92400e",textDark:"#fcd34d"},PersistentVolume:{bg:"#f1f5f9",bgDark:"#334155",border:"#64748b",borderDark:"#94a3b8",text:"#334155",textDark:"#cbd5e1"},PersistentVolumeClaim:{bg:"#f8fafc",bgDark:"#475569",border:"#94a3b8",borderDark:"#cbd5e1",text:"#475569",textDark:"#e2e8f0"},ConfigMap:{bg:"#fef9c3",bgDark:"#713f12",border:"#eab308",borderDark:"#facc15",text:"#854d0e",textDark:"#fde047"},Secret:{bg:"#fee2e2",bgDark:"#7f1d1d",border:"#ef4444",borderDark:"#f87171",text:"#991b1b",textDark:"#fca5a5"}},Wle={bg:"#f3f4f6",bgDark:"#374151",border:"#9ca3af",borderDark:"#6b7280",text:"#374151",textDark:"#d1d5db"};function lc(t,e){const n=Kle[t]||Wle;return{bg:e?n.bgDark:n.bg,border:e?n.borderDark:n.border,text:e?n.textDark:n.text}}function S$(t){let e="Unknown",n="#9ca3af",s="#6b7280";if(t.kind==="Pod"){const r=t.status?.phase||"Unknown";e=r,r==="Running"?(n="#22c55e",s="#4ade80"):r==="Pending"?(n="#eab308",s="#facc15"):r==="Failed"?(n="#ef4444",s="#f87171"):r==="Succeeded"&&(n="#22c55e",s="#4ade80")}else if(t.kind==="DaemonSet"){const r=t.status?.desiredNumberScheduled||0,i=t.status?.numberReady||0;e=`${i}/${r}`,i===r&&r>0?(n="#22c55e",s="#4ade80"):(n="#eab308",s="#facc15")}else if(["Deployment","StatefulSet"].includes(t.kind)){const r=t.status?.replicas||0,i=t.status?.readyReplicas||0;e=`${i}/${r}`,i===r&&r>0?(n="#22c55e",s="#4ade80"):(n="#eab308",s="#facc15")}else if(t.kind==="Service")e="Active",n="#22c55e",s="#4ade80";else if(t.kind==="Job"){const r=t.status?.succeeded||0,i=t.status?.failed||0;r>0?(e="Succeeded",n="#22c55e",s="#4ade80"):i>0?(e="Failed",n="#ef4444",s="#f87171"):(e="Running",n="#eab308",s="#facc15")}else t.kind==="PersistentVolumeClaim"?(e=t.status?.phase||"Unknown",e==="Bound"?(n="#22c55e",s="#4ade80"):(n="#eab308",s="#facc15")):["ConfigMap","Secret","Ingress","CronJob"].includes(t.kind)&&(e="Active",n="#22c55e",s="#4ade80");return{status:e,color:n,colorDark:s}}const uf=160,Vw=60,MM=48,Av=120,Ql=32,oy=6,eC=32,Ju=8,za=20,Yo=4,yp=5,Gle=32,Yle=10,Po=12,IM=36,R0=20;function Zle({context:t,namespace:e}){const n=t||"",s=e,[r,i]=F.useState([]),[a,l]=F.useState([]),[u,h]=F.useState(!0),[m,p]=F.useState(null),[g,y]=F.useState({x:40,y:40,scale:1}),[b,_]=F.useState(!1),[w,k]=F.useState({x:0,y:0}),[C,E]=F.useState(null),[A,R]=F.useState(!1),N=F.useRef(null);F.useEffect(()=>{const O=()=>{const Q=document.documentElement.classList.contains("dark"),te=window.matchMedia("(prefers-color-scheme: dark)");R(Q||te.matches)};O();const L=new MutationObserver(O);L.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]});const V=window.matchMedia("(prefers-color-scheme: dark)"),T=()=>O();return V.addEventListener("change",T),()=>{L.disconnect(),V.removeEventListener("change",T)}},[]);const M=F.useCallback(async()=>{h(!0),p(null);try{const O=s?`/namespaces/${s}`:"",L=[{path:`/api/v1${O}/pods`,kind:"Pod"},{path:`/apis/apps/v1${O}/deployments`,kind:"Deployment"},{path:`/apis/apps/v1${O}/replicasets`,kind:"ReplicaSet"},{path:`/apis/apps/v1${O}/statefulsets`,kind:"StatefulSet"},{path:`/apis/apps/v1${O}/daemonsets`,kind:"DaemonSet"},{path:`/api/v1${O}/services`,kind:"Service"},{path:`/api/v1${O}/configmaps`,kind:"ConfigMap"},{path:`/api/v1${O}/secrets`,kind:"Secret"},{path:`/api/v1${O}/persistentvolumeclaims`,kind:"PersistentVolumeClaim"},{path:`/apis/batch/v1${O}/jobs`,kind:"Job"},{path:`/apis/batch/v1${O}/cronjobs`,kind:"CronJob"},{path:`/apis/networking.k8s.io/v1${O}/ingresses`,kind:"Ingress"},{path:`/apis/networking.k8s.io/v1${O}/networkpolicies`,kind:"NetworkPolicy"},{path:`/apis/gateway.networking.k8s.io/v1${O}/gateways`,kind:"Gateway"},{path:`/apis/gateway.networking.k8s.io/v1${O}/httproutes`,kind:"HTTPRoute"},{path:`/apis/gateway.networking.k8s.io/v1${O}/grpcroutes`,kind:"GRPCRoute"}],V=await Promise.allSettled(L.map(async({path:te,kind:X})=>{try{return((await no(te,n)).items||[]).map(xe=>({...xe,kind:X}))}catch{return[]}})),T=[];V.forEach(te=>{te.status==="fulfilled"&&T.push(...te.value)}),l(T);const Q=oce(T);i(Q)}catch(O){p(O instanceof Error?O.message:"Failed to load resources")}finally{h(!1)}},[n,s]);F.useEffect(()=>{M()},[M]);const I=F.useCallback(O=>{O.button===0&&(_(!0),k({x:O.clientX-g.x,y:O.clientY-g.y}))},[g.x,g.y]),W=F.useCallback(O=>{b&&y(L=>({...L,x:O.clientX-w.x,y:O.clientY-w.y}))},[b,w]),P=F.useCallback(()=>{_(!1)},[]),G=F.useCallback(O=>{O.preventDefault();const L=O.deltaY>0?.9:1.1,V=Math.min(Math.max(g.scale*L,.1),3),T=N.current?.getBoundingClientRect();if(T){const Q=O.clientX-T.left,te=O.clientY-T.top,X=Q-(Q-g.x)*(V/g.scale),oe=te-(te-g.y)*(V/g.scale);y({x:X,y:oe,scale:V})}},[g]),$=()=>y(O=>({...O,scale:Math.min(O.scale*1.2,3)})),U=()=>y(O=>({...O,scale:Math.max(O.scale/1.2,.1)})),Z=()=>{if(!N.current||r.length===0)return;const O=N.current.getBoundingClientRect(),L=Math.max(...r.map(X=>X.x+X.width),800),V=Math.max(...r.map(X=>X.y+X.height),600),T=(O.width-80)/L,Q=(O.height-80)/V,te=Math.min(T,Q,1);y({x:40,y:40,scale:te})},K=F.useMemo(()=>{if(r.length===0)return{width:800,height:600};const O=Math.max(...r.map(V=>V.x+V.width)),L=Math.max(...r.map(V=>V.y+V.height));return{width:O+100,height:L+100}},[r]);F.useEffect(()=>{if(r.length>0&&N.current){const O=N.current.getBoundingClientRect(),L=(O.width-80)/K.width,V=(O.height-80)/K.height,T=Math.min(L,V,1);y({x:40,y:40,scale:T})}},[r,K]),F.useEffect(()=>{E(null)},[s]);const B=F.useCallback(O=>{E(O)},[]),J=F.useCallback((O,L,V)=>{const T=a.find(Q=>Q.kind===O&&Q.metadata.name===L&&Q.metadata.namespace===V);T&&E({uid:T.metadata.uid,resource:T,x:0,y:0,width:0,height:0})},[a]),Y=C?{name:C.resource.metadata.name,namespace:C.resource.metadata.namespace,uid:C.resource.metadata.uid,kind:C.resource.kind,apiVersion:C.resource.apiVersion}:null,z=C!==null;return u?f.jsx("div",{className:"flex items-center justify-center h-full bg-white dark:bg-neutral-950",children:f.jsxs("div",{className:"flex items-center gap-2 text-neutral-500",children:[f.jsx(Cn,{className:"animate-spin",size:20}),f.jsx("span",{children:"Loading resources..."})]})}):m?f.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4 bg-white dark:bg-neutral-950",children:[f.jsx("div",{className:"text-red-500",children:m}),f.jsxs("button",{onClick:M,className:"flex items-center gap-2 px-4 py-2 text-sm bg-neutral-100 hover:bg-neutral-200 dark:bg-neutral-800 dark:hover:bg-neutral-700 rounded-md transition-colors",children:[f.jsx(Cn,{size:16}),"Retry"]})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:`h-full w-full relative bg-neutral-100 dark:bg-neutral-900 overflow-hidden transition-all duration-300 ${z?"mr-120":""}`,children:[f.jsxs("div",{className:"absolute top-4 right-4 z-10 flex items-center gap-1 bg-white dark:bg-neutral-800 rounded-lg shadow-sm border border-neutral-200 dark:border-neutral-700",children:[f.jsx("button",{onClick:M,className:"p-2 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-l-lg",title:"Refresh",children:f.jsx(Cn,{size:16,className:"text-neutral-600 dark:text-neutral-400"})}),f.jsx("div",{className:"w-px h-5 bg-neutral-200 dark:bg-neutral-700"}),f.jsx("button",{onClick:$,className:"p-2 hover:bg-neutral-100 dark:hover:bg-neutral-700",title:"Zoom In",children:f.jsx(XZ,{size:16,className:"text-neutral-600 dark:text-neutral-400"})}),f.jsx("button",{onClick:U,className:"p-2 hover:bg-neutral-100 dark:hover:bg-neutral-700",title:"Zoom Out",children:f.jsx(eJ,{size:16,className:"text-neutral-600 dark:text-neutral-400"})}),f.jsx("button",{onClick:Z,className:"p-2 hover:bg-neutral-100 dark:hover:bg-neutral-700",title:"Fit View",children:f.jsx(cZ,{size:16,className:"text-neutral-600 dark:text-neutral-400"})}),f.jsxs("div",{className:"px-2 text-xs text-neutral-500 border-l border-neutral-200 dark:border-neutral-700 rounded-r-lg",children:[Math.round(g.scale*100),"%"]})]}),f.jsxs("div",{className:"absolute bottom-4 right-4 z-10 px-3 py-2 bg-white dark:bg-neutral-800 rounded-lg shadow-sm border border-neutral-200 dark:border-neutral-700",children:[f.jsx("div",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-400 mb-2",children:"Connections"}),f.jsxs("div",{className:"flex flex-col gap-1 text-xs",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{width:"24",height:"8",children:f.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#64748b",strokeWidth:"2"})}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Owner"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{width:"24",height:"8",children:f.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#8b5cf6",strokeWidth:"2",strokeDasharray:"4,2"})}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Selector"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{width:"24",height:"8",children:f.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#06b6d4",strokeWidth:"2",strokeDasharray:"4,2"})}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Service"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{width:"24",height:"8",children:f.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#14b8a6",strokeWidth:"2",strokeDasharray:"4,2"})}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Ingress"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{width:"24",height:"8",children:f.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#10b981",strokeWidth:"2",strokeDasharray:"4,2"})}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Gateway"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{width:"24",height:"8",children:f.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#f59e0b",strokeWidth:"1.5",strokeDasharray:"2,2"})}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"NetworkPolicy"})]})]})]}),f.jsx("div",{ref:N,className:"w-full h-full cursor-grab active:cursor-grabbing overflow-hidden",onMouseDown:I,onMouseMove:W,onMouseUp:P,onMouseLeave:P,onWheel:G,children:f.jsxs("svg",{width:K.width,height:K.height,style:{transform:`translate(${g.x}px, ${g.y}px) scale(${g.scale})`,transformOrigin:"0 0"},children:[f.jsxs("defs",{children:[f.jsx("marker",{id:"arrow-owner",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#64748b"})}),f.jsx("marker",{id:"arrow-selector",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#8b5cf6"})}),f.jsx("marker",{id:"arrow-service",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#06b6d4"})}),f.jsx("marker",{id:"arrow-ingress",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#14b8a6"})}),f.jsx("marker",{id:"arrow-gateway",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#10b981"})}),f.jsx("marker",{id:"arrow-network-policy",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"5",markerHeight:"5",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#f59e0b"})}),f.jsx("marker",{id:"arrow-owner-dark",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#94a3b8"})}),f.jsx("marker",{id:"arrow-selector-dark",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#c084fc"})}),f.jsx("marker",{id:"arrow-service-dark",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#22d3ee"})}),f.jsx("marker",{id:"arrow-ingress-dark",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#2dd4bf"})}),f.jsx("marker",{id:"arrow-gateway-dark",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#34d399"})}),f.jsx("marker",{id:"arrow-network-policy-dark",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"5",markerHeight:"5",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#fbbf24"})})]}),r.map(O=>f.jsx(Jle,{application:O,onNodeClick:B,onConfigClick:J,isDarkMode:A},O.id))]})})]}),f.jsx(w$,{context:n,isOpen:z,onClose:()=>E(null),resource:Y})]})}function Jle(t){const e=Pe.c(40),{application:n,onNodeClick:s,onConfigClick:r,isDarkMode:i}=t;let a;e[0]!==n.nodes?(a=new Map(n.nodes.map(Xle)),n.nodes.forEach(C=>{C.childPods&&C.childPods.forEach(E=>{a.set(E.uid,{...E,x:C.x+E.x,y:C.y+E.y})})}),e[0]=n.nodes,e[1]=a):a=e[1];const l=a;let u;e[2]!==n.nodes?(u=n.nodes.filter(C=>!C.resource.kind.match(/^Pod$/)||!n.nodes.some(E=>["Deployment","StatefulSet","DaemonSet","Job"].includes(E.resource.kind)&&E.childPods?.some(A=>A.uid===C.uid))),e[2]=n.nodes,e[3]=u):u=e[3];const h=u,m=n.name&&n.name.length>0,p=i?"#262626":"white",g=i?"#404040":"#e5e7eb";let y;e[4]!==n.height||e[5]!==n.width||e[6]!==n.x||e[7]!==n.y||e[8]!==p||e[9]!==g?(y=f.jsx("rect",{x:n.x,y:n.y,width:n.width,height:n.height,rx:12,fill:p,stroke:g,strokeWidth:1}),e[4]=n.height,e[5]=n.width,e[6]=n.x,e[7]=n.y,e[8]=p,e[9]=g,e[10]=y):y=e[10];let b;e[11]!==n.name||e[12]!==n.namespace||e[13]!==n.width||e[14]!==n.x||e[15]!==n.y||e[16]!==i||e[17]!==m?(b=m&&f.jsxs("g",{children:[f.jsx("text",{x:n.x+10,y:n.y+13,fontSize:12,fontWeight:600,fill:i?"#e5e5e5":"#374151",dominantBaseline:"hanging",children:n.name.length>Math.floor((n.width-20)/7)?n.name.slice(0,Math.floor((n.width-20)/7)-1)+"":n.name}),n.namespace&&f.jsx("text",{x:n.x+10,y:n.y+26,fontSize:10,fill:i?"#a3a3a3":"#6b7280",dominantBaseline:"hanging",children:n.namespace.length>Math.floor((n.width-20)/6)?n.namespace.slice(0,Math.floor((n.width-20)/6)-1)+"":n.namespace})]}),e[11]=n.name,e[12]=n.namespace,e[13]=n.width,e[14]=n.x,e[15]=n.y,e[16]=i,e[17]=m,e[18]=b):b=e[18];let _;if(e[19]!==n.edges||e[20]!==i||e[21]!==l){let C;e[23]!==i||e[24]!==l?(C=(E,A)=>{const R=l.get(E.from),N=l.get(E.to);return!R||!N||E.type==="owner"&&(R.childPods?.some(I=>I.uid===N.uid)||N.childPods?.some(I=>I.uid===R.uid))?null:f.jsx(Qle,{from:R,to:N,type:E.type,isDarkMode:i},A)},e[23]=i,e[24]=l,e[25]=C):C=e[25],_=n.edges.map(C),e[19]=n.edges,e[20]=i,e[21]=l,e[22]=_}else _=e[22];let w;if(e[26]!==i||e[27]!==r||e[28]!==s||e[29]!==h){let C;e[31]!==i||e[32]!==r||e[33]!==s?(C=E=>f.jsx(ece,{node:E,onClick:()=>s(E),onPodClick:s,onConfigClick:r,isDarkMode:i},E.uid),e[31]=i,e[32]=r,e[33]=s,e[34]=C):C=e[34],w=h.map(C),e[26]=i,e[27]=r,e[28]=s,e[29]=h,e[30]=w}else w=e[30];let k;return e[35]!==y||e[36]!==b||e[37]!==_||e[38]!==w?(k=f.jsxs("g",{children:[y,b,_,w]}),e[35]=y,e[36]=b,e[37]=_,e[38]=w,e[39]=k):k=e[39],k}function Xle(t){return[t.uid,t]}function Qle(t){const e=Pe.c(14),{from:n,to:s,type:r,isDarkMode:i}=t,a=n.x+n.width,l=n.y+n.height/2,u=s.x,h=s.y+s.height/2,m=(a+u)/2,p=`M ${a} ${l} C ${m} ${l}, ${m} ${h}, ${u} ${h}`,g=i?"#94a3b8":"#64748b",y=i?"#c084fc":"#8b5cf6",b=i?"#22d3ee":"#06b6d4",_=i?"#2dd4bf":"#14b8a6",w=i?"#34d399":"#10b981",k=i?"#fbbf24":"#f59e0b";let C;e[0]!==g||e[1]!==y||e[2]!==b||e[3]!==_||e[4]!==w||e[5]!==k?(C={owner:g,selector:y,service:b,ingress:_,gateway:w,"network-policy":k},e[0]=g,e[1]=y,e[2]=b,e[3]=_,e[4]=w,e[5]=k,e[6]=C):C=e[6];const E=C;let A;e[7]===Symbol.for("react.memo_cache_sentinel")?(A={owner:void 0,selector:"6,3",service:"6,3",ingress:"4,2",gateway:"4,2","network-policy":"2,2"},e[7]=A):A=e[7];const R=A,N=E[r],M=r==="network-policy"?1.5:2,I=R[r],W=`url(#arrow-${r}${i?"-dark":""})`;let P;return e[8]!==p||e[9]!==M||e[10]!==I||e[11]!==W||e[12]!==N?(P=f.jsx("path",{d:p,fill:"none",stroke:N,strokeWidth:M,strokeDasharray:I,markerEnd:W}),e[8]=p,e[9]=M,e[10]=I,e[11]=W,e[12]=N,e[13]=P):P=e[13],P}function ece(t){const e=Pe.c(62),{node:n,onClick:s,onPodClick:r,onConfigClick:i,isDarkMode:a}=t,{resource:l,x:u,y:h,width:m,height:p}=n;if(l.kind==="NetworkPolicy"){let z;return e[0]!==a||e[1]!==n||e[2]!==s?(z=f.jsx(rce,{node:n,onClick:s,isDarkMode:a}),e[0]=a,e[1]=n,e[2]=s,e[3]=z):z=e[3],z}if(l.kind==="Service"){let z;return e[4]!==a||e[5]!==n||e[6]!==s?(z=f.jsx(DM,{node:n,onClick:s,isDarkMode:a}),e[4]=a,e[5]=n,e[6]=s,e[7]=z):z=e[7],z}if(["Gateway","HTTPRoute","GRPCRoute"].includes(l.kind)){let z;return e[8]!==a||e[9]!==n||e[10]!==s?(z=f.jsx(DM,{node:n,onClick:s,isDarkMode:a}),e[8]=a,e[9]=n,e[10]=s,e[11]=z):z=e[11],z}if(l.kind==="Ingress"){let z;return e[12]!==a||e[13]!==n||e[14]!==s?(z=f.jsx(nce,{node:n,onClick:s,isDarkMode:a}),e[12]=a,e[13]=n,e[14]=s,e[15]=z):z=e[15],z}if(["Deployment","StatefulSet","DaemonSet","Job"].includes(l.kind)&&n.childPods&&n.childPods.length>0){let z;return e[16]!==a||e[17]!==n||e[18]!==s||e[19]!==i||e[20]!==r?(z=f.jsx(tce,{node:n,onClick:s,onPodClick:r,onConfigClick:i,isDarkMode:a}),e[16]=a,e[17]=n,e[18]=s,e[19]=i,e[20]=r,e[21]=z):z=e[21],z}let g;e[22]!==a||e[23]!==l.kind?(g=lc(l.kind,a),e[22]=a,e[23]=l.kind,e[24]=g):g=e[24];const y=g,b=Ah[l.kind]||im;let _;e[25]!==l?(_=S$(l),e[25]=l,e[26]=_):_=e[26];const w=_,k=a?w.colorDark:w.color,C=Math.floor((m-20)/6.5),E=l.metadata.name.length>C?l.metadata.name.slice(0,C-2)+"":l.metadata.name,A=`translate(${u}, ${h})`;let R;e[27]!==s?(R=z=>{z.stopPropagation(),s()},e[27]=s,e[28]=R):R=e[28];let N;e[29]===Symbol.for("react.memo_cache_sentinel")?(N={cursor:"pointer"},e[29]=N):N=e[29];let M;e[30]!==y.bg||e[31]!==y.border||e[32]!==p||e[33]!==m?(M=f.jsx("rect",{width:m,height:p,rx:8,fill:y.bg,stroke:y.border,strokeWidth:2}),e[30]=y.bg,e[31]=y.border,e[32]=p,e[33]=m,e[34]=M):M=e[34];let I;e[35]!==y.text?(I={color:y.text},e[35]=y.text,e[36]=I):I=e[36];let W;e[37]!==b?(W=f.jsx(b,{size:16}),e[37]=b,e[38]=W):W=e[38];let P;e[39]!==I||e[40]!==W?(P=f.jsx("foreignObject",{width:18,height:18,children:f.jsx("div",{style:I,children:W})}),e[39]=I,e[40]=W,e[41]=P):P=e[41];let G;e[42]!==y.text||e[43]!==l.kind?(G=f.jsx("text",{x:22,y:13,fontSize:11,fill:y.text,fontWeight:600,children:l.kind}),e[42]=y.text,e[43]=l.kind,e[44]=G):G=e[44];let $;e[45]!==G||e[46]!==P?($=f.jsxs("g",{transform:"translate(10, 10)",children:[P,G]}),e[45]=G,e[46]=P,e[47]=$):$=e[47];const U=m-12;let Z;e[48]!==k||e[49]!==U?(Z=f.jsx("circle",{cx:U,cy:14,r:5,fill:k}),e[48]=k,e[49]=U,e[50]=Z):Z=e[50];const K=p-12,B=a?"#e5e7eb":"#1f2937";let J;e[51]!==E||e[52]!==K||e[53]!==B?(J=f.jsx("text",{x:10,y:K,fontSize:12,fontWeight:600,fill:B,children:E}),e[51]=E,e[52]=K,e[53]=B,e[54]=J):J=e[54];let Y;return e[55]!==$||e[56]!==Z||e[57]!==J||e[58]!==A||e[59]!==R||e[60]!==M?(Y=f.jsxs("g",{transform:A,onClick:R,style:N,className:"hover:opacity-80 transition-opacity",children:[M,$,Z,J]}),e[55]=$,e[56]=Z,e[57]=J,e[58]=A,e[59]=R,e[60]=M,e[61]=Y):Y=e[61],Y}function DM(t){const e=Pe.c(26),{node:n,onClick:s,isDarkMode:r}=t,{resource:i,x:a,y:l,width:u,height:h}=n;let m;e[0]!==r||e[1]!==i.kind?(m=lc(i.kind,r),e[0]=r,e[1]=i.kind,e[2]=m):m=e[2];const p=m,g=Ah[i.kind]||im,y=`translate(${a}, ${l})`;let b;e[3]!==s?(b=M=>{M.stopPropagation(),s()},e[3]=s,e[4]=b):b=e[4];let _;e[5]===Symbol.for("react.memo_cache_sentinel")?(_={cursor:"pointer"},e[5]=_):_=e[5];let w;e[6]!==p.bg||e[7]!==p.border||e[8]!==h||e[9]!==u?(w=f.jsx("rect",{width:u,height:h,rx:8,fill:p.bg,stroke:p.border,strokeWidth:2}),e[6]=p.bg,e[7]=p.border,e[8]=h,e[9]=u,e[10]=w):w=e[10];const k=`translate(${u/2-12}, ${h/2-12})`;let C;e[11]!==p.text?(C={color:p.text},e[11]=p.text,e[12]=C):C=e[12];let E;e[13]!==g?(E=f.jsx(g,{size:22}),e[13]=g,e[14]=E):E=e[14];let A;e[15]!==C||e[16]!==E?(A=f.jsx("foreignObject",{width:24,height:24,children:f.jsx("div",{style:C,children:E})}),e[15]=C,e[16]=E,e[17]=A):A=e[17];let R;e[18]!==k||e[19]!==A?(R=f.jsx("g",{transform:k,children:A}),e[18]=k,e[19]=A,e[20]=R):R=e[20];let N;return e[21]!==R||e[22]!==y||e[23]!==b||e[24]!==w?(N=f.jsxs("g",{transform:y,onClick:b,style:_,className:"hover:opacity-80 transition-opacity",children:[w,R]}),e[21]=R,e[22]=y,e[23]=b,e[24]=w,e[25]=N):N=e[25],N}function tce(t){const e=Pe.c(54),{node:n,onClick:s,onPodClick:r,onConfigClick:i,isDarkMode:a}=t,{resource:l,x:u,y:h,width:m,height:p,childPods:g}=n;let y;e[0]!==g?(y=g===void 0?[]:g,e[0]=g,e[1]=y):y=e[1];const b=y;let _;e[2]!==a||e[3]!==l.kind?(_=lc(l.kind,a),e[2]=a,e[3]=l.kind,e[4]=_):_=e[4];const w=_,k=Ah[l.kind]||im,C=Math.floor((m-60)/6),E=l.metadata.name.length>C?l.metadata.name.slice(0,C-2)+"":l.metadata.name;let A;e[5]!==n?(A=n.configIcons||[],e[5]=n,e[6]=A):A=e[6];const R=A,N=`translate(${u}, ${h})`;let M;e[7]!==s?(M=L=>{L.stopPropagation(),s()},e[7]=s,e[8]=M):M=e[8];let I;e[9]===Symbol.for("react.memo_cache_sentinel")?(I={cursor:"pointer"},e[9]=I):I=e[9];let W;e[10]!==w.bg||e[11]!==w.border||e[12]!==p||e[13]!==M||e[14]!==m?(W=f.jsx("rect",{width:m,height:p,rx:10,fill:w.bg,stroke:w.border,strokeWidth:2,onClick:M,style:I,className:"hover:opacity-90"}),e[10]=w.bg,e[11]=w.border,e[12]=p,e[13]=M,e[14]=m,e[15]=W):W=e[15];let P;e[16]!==s?(P=L=>{L.stopPropagation(),s()},e[16]=s,e[17]=P):P=e[17];let G;e[18]===Symbol.for("react.memo_cache_sentinel")?(G={cursor:"pointer"},e[18]=G):G=e[18];let $;e[19]!==w.text?($={color:w.text},e[19]=w.text,e[20]=$):$=e[20];let U;e[21]!==k?(U=f.jsx(k,{size:16}),e[21]=k,e[22]=U):U=e[22];let Z;e[23]!==$||e[24]!==U?(Z=f.jsx("foreignObject",{width:18,height:18,children:f.jsx("div",{style:$,children:U})}),e[23]=$,e[24]=U,e[25]=Z):Z=e[25];let K;e[26]!==w.text||e[27]!==E?(K=f.jsx("text",{x:22,y:13,fontSize:11,fill:w.text,fontWeight:600,children:E}),e[26]=w.text,e[27]=E,e[28]=K):K=e[28];let B;e[29]!==Z||e[30]!==K?(B=f.jsxs("g",{transform:"translate(8, 8)",children:[Z,K]}),e[29]=Z,e[30]=K,e[31]=B):B=e[31];let J;e[32]!==B||e[33]!==P?(J=f.jsx("g",{onClick:P,style:G,children:B}),e[32]=B,e[33]=P,e[34]=J):J=e[34];let Y;if(e[35]!==b||e[36]!==a||e[37]!==r){let L;e[39]!==a||e[40]!==r?(L=(V,T)=>{const Q=lc("Pod",a),te=S$(V.resource),X=a?te.colorDark:te.color,oe=eC+T*(Ql+oy),xe=Math.floor((Av-30)/5.5),Se=V.resource.metadata.name.length>xe?V.resource.metadata.name.slice(0,xe-2)+"":V.resource.metadata.name;return f.jsxs("g",{transform:`translate(${Ju}, ${oe})`,onClick:Xe=>{Xe.stopPropagation(),r?.(V)},style:{cursor:"pointer"},className:"hover:opacity-80",children:[f.jsx("rect",{width:Av,height:Ql,rx:4,fill:Q.bg,stroke:Q.border,strokeWidth:1.5}),f.jsx("circle",{cx:12,cy:Ql/2,r:4,fill:X}),f.jsx("text",{x:22,y:Ql/2+4,fontSize:10,fill:a?"#e5e7eb":"#1f2937",fontWeight:500,children:Se})]},V.uid)},e[39]=a,e[40]=r,e[41]=L):L=e[41],Y=b.map(L),e[35]=b,e[36]=a,e[37]=r,e[38]=Y}else Y=e[38];let z;e[42]!==R||e[43]!==p||e[44]!==a||e[45]!==i||e[46]!==l.metadata.namespace?(z=R.length>0&&f.jsx("g",{transform:`translate(${Ju}, ${p-Math.ceil(R.length/yp)*(za+Yo)-Yo})`,children:R.map((L,V)=>{const T=Ah[L.kind],Q=lc(L.kind,a),te=Math.floor(V/yp),oe=V%yp*(za+Yo),xe=te*(za+Yo);return f.jsxs("g",{transform:`translate(${oe}, ${xe})`,onClick:Se=>{Se.stopPropagation(),i&&i(L.kind,L.name,l.metadata.namespace)},style:{cursor:"pointer"},className:"hover:opacity-80",children:[f.jsx("title",{children:L.name}),f.jsx("rect",{width:za,height:za,rx:3,fill:Q.bg,stroke:Q.border,strokeWidth:1}),f.jsx("g",{transform:`translate(${za/2-6}, ${za/2-6})`,children:f.jsx("foreignObject",{width:12,height:12,children:f.jsx("div",{style:{color:Q.text},children:f.jsx(T,{size:12})})})})]},`${L.kind}-${L.name}-${V}`)})}),e[42]=R,e[43]=p,e[44]=a,e[45]=i,e[46]=l.metadata.namespace,e[47]=z):z=e[47];let O;return e[48]!==J||e[49]!==Y||e[50]!==z||e[51]!==N||e[52]!==W?(O=f.jsxs("g",{transform:N,children:[W,J,Y,z]}),e[48]=J,e[49]=Y,e[50]=z,e[51]=N,e[52]=W,e[53]=O):O=e[53],O}function nce(t){const e=Pe.c(52),{node:n,onClick:s,isDarkMode:r}=t,{resource:i,x:a,y:l,width:u,height:h}=n;let m;e[0]!==r?(m=lc("Ingress",r),e[0]=r,e[1]=m):m=e[1];const p=m,g=Ah.Ingress,y=i.spec;let b,_,w,k,C,E,A,R;if(e[2]!==p.bg||e[3]!==p.border||e[4]!==p.text||e[5]!==h||e[6]!==r||e[7]!==s||e[8]!==i.metadata.name||e[9]!==y.rules||e[10]!==u||e[11]!==a||e[12]!==l){const P=y.rules?.map(sce).filter(Boolean)||[],G=Math.floor((u-20)/6.5);b=i.metadata.name.length>G?i.metadata.name.slice(0,G-2)+"":i.metadata.name,_=`translate(${a}, ${l})`,e[21]!==s?(w=B=>{B.stopPropagation(),s()},e[21]=s,e[22]=w):w=e[22],e[23]===Symbol.for("react.memo_cache_sentinel")?(k={cursor:"pointer"},e[23]=k):k=e[23],C="hover:opacity-80 transition-opacity",e[24]!==p.bg||e[25]!==p.border||e[26]!==h||e[27]!==u?(E=f.jsx("rect",{width:u,height:h,rx:8,fill:p.bg,stroke:p.border,strokeWidth:2}),e[24]=p.bg,e[25]=p.border,e[26]=h,e[27]=u,e[28]=E):E=e[28];let $;e[29]!==p.text?($={color:p.text},e[29]=p.text,e[30]=$):$=e[30];let U;e[31]===Symbol.for("react.memo_cache_sentinel")?(U=f.jsx(g,{size:16}),e[31]=U):U=e[31];let Z;e[32]!==$?(Z=f.jsx("foreignObject",{width:18,height:18,children:f.jsx("div",{style:$,children:U})}),e[32]=$,e[33]=Z):Z=e[33];let K;e[34]!==p.text?(K=f.jsx("text",{x:22,y:13,fontSize:11,fill:p.text,fontWeight:600,children:"Ingress"}),e[34]=p.text,e[35]=K):K=e[35],e[36]!==Z||e[37]!==K?(A=f.jsxs("g",{transform:"translate(10, 10)",children:[Z,K]}),e[36]=Z,e[37]=K,e[38]=A):A=e[38],R=P.length>0&&P[0]&&f.jsx("text",{x:u-10,y:18,fontSize:9,fill:r?"#5eead4":"#115e59",textAnchor:"end",children:P[0].length>18?P[0].slice(0,16)+"":P[0]}),e[2]=p.bg,e[3]=p.border,e[4]=p.text,e[5]=h,e[6]=r,e[7]=s,e[8]=i.metadata.name,e[9]=y.rules,e[10]=u,e[11]=a,e[12]=l,e[13]=b,e[14]=_,e[15]=w,e[16]=k,e[17]=C,e[18]=E,e[19]=A,e[20]=R}else b=e[13],_=e[14],w=e[15],k=e[16],C=e[17],E=e[18],A=e[19],R=e[20];const N=h-12,M=r?"#e5e7eb":"#1f2937";let I;e[39]!==b||e[40]!==M||e[41]!==N?(I=f.jsx("text",{x:10,y:N,fontSize:12,fontWeight:600,fill:M,children:b}),e[39]=b,e[40]=M,e[41]=N,e[42]=I):I=e[42];let W;return e[43]!==I||e[44]!==_||e[45]!==w||e[46]!==k||e[47]!==C||e[48]!==E||e[49]!==A||e[50]!==R?(W=f.jsxs("g",{transform:_,onClick:w,style:k,className:C,children:[E,A,R,I]}),e[43]=I,e[44]=_,e[45]=w,e[46]=k,e[47]=C,e[48]=E,e[49]=A,e[50]=R,e[51]=W):W=e[51],W}function sce(t){return t.host}function rce(t){const e=Pe.c(55),{node:n,onClick:s,isDarkMode:r}=t,{resource:i,x:a,y:l,width:u,height:h}=n;let m;e[0]!==r?(m=lc("NetworkPolicy",r),e[0]=r,e[1]=m):m=e[1];const p=m,g=Ah.NetworkPolicy,y=i.spec;let b;e[2]!==y.policyTypes?(b=y.policyTypes||[],e[2]=y.policyTypes,e[3]=b):b=e[3];const _=b;let w;e[4]!==_||e[5]!==y.ingress?(w=_.includes("Ingress")||y.ingress,e[4]=_,e[5]=y.ingress,e[6]=w):w=e[6];const k=w;let C;e[7]!==_||e[8]!==y.egress?(C=_.includes("Egress")||y.egress,e[7]=_,e[8]=y.egress,e[9]=C):C=e[9];const E=C;let A;e[10]!==y.ingress?(A=y.ingress||[],e[10]=y.ingress,e[11]=A):A=e[11];const R=A;let N;e[12]!==y.egress?(N=y.egress||[],e[12]=y.egress,e[13]=N):N=e[13];const M=N,I=k&&R.length===0,W=E&&M.length===0,P=I&&W,G=Math.floor((u-20)/6.5),$=i.metadata.name.length>G?i.metadata.name.slice(0,G-2)+"":i.metadata.name;let U;e[14]!==W||e[15]!==M||e[16]!==E||e[17]!==k||e[18]!==I||e[19]!==R||e[20]!==P?(U=()=>{const ut=[];return P?" Deny All":(I?ut.push(" No Ingress"):k&&R.length>0&&ut.push(`${R.length}`),W?ut.push(" No Egress"):E&&M.length>0&&ut.push(`${M.length}`),ut.join(" ")||" Allow")},e[14]=W,e[15]=M,e[16]=E,e[17]=k,e[18]=I,e[19]=R,e[20]=P,e[21]=U):U=e[21];const Z=U,K=`translate(${a}, ${l})`;let B;e[22]!==s?(B=ut=>{ut.stopPropagation(),s()},e[22]=s,e[23]=B):B=e[23];let J;e[24]===Symbol.for("react.memo_cache_sentinel")?(J={cursor:"pointer"},e[24]=J):J=e[24];const Y=P?r?"#7f1d1d":"#fef2f2":p.bg,z=P?r?"#f87171":"#ef4444":p.border;let O;e[25]!==h||e[26]!==Y||e[27]!==z||e[28]!==u?(O=f.jsx("rect",{width:u,height:h,rx:8,fill:Y,stroke:z,strokeWidth:2}),e[25]=h,e[26]=Y,e[27]=z,e[28]=u,e[29]=O):O=e[29];const L=P?r?"#f87171":"#ef4444":p.text;let V;e[30]!==L?(V={color:L},e[30]=L,e[31]=V):V=e[31];let T;e[32]===Symbol.for("react.memo_cache_sentinel")?(T=f.jsx(g,{size:16}),e[32]=T):T=e[32];let Q;e[33]!==V?(Q=f.jsx("foreignObject",{width:18,height:18,children:f.jsx("div",{style:V,children:T})}),e[33]=V,e[34]=Q):Q=e[34];const te=P?r?"#f87171":"#ef4444":p.text;let X;e[35]!==te?(X=f.jsx("text",{x:22,y:13,fontSize:10,fill:te,fontWeight:600,children:"NetworkPolicy"}),e[35]=te,e[36]=X):X=e[36];let oe;e[37]!==Q||e[38]!==X?(oe=f.jsxs("g",{transform:"translate(10, 10)",children:[Q,X]}),e[37]=Q,e[38]=X,e[39]=oe):oe=e[39];const xe=u-10,Se=P?r?"#fca5a5":"#dc2626":r?"#fcd34d":"#92400e",Xe=Z();let Ke;e[40]!==xe||e[41]!==Se||e[42]!==Xe?(Ke=f.jsx("text",{x:xe,y:18,fontSize:9,fill:Se,textAnchor:"end",fontWeight:500,children:Xe}),e[40]=xe,e[41]=Se,e[42]=Xe,e[43]=Ke):Ke=e[43];const st=h-12,Le=r?"#e5e7eb":"#1f2937";let Ge;e[44]!==$||e[45]!==st||e[46]!==Le?(Ge=f.jsx("text",{x:10,y:st,fontSize:12,fontWeight:600,fill:Le,children:$}),e[44]=$,e[45]=st,e[46]=Le,e[47]=Ge):Ge=e[47];let ct;return e[48]!==O||e[49]!==oe||e[50]!==Ke||e[51]!==Ge||e[52]!==K||e[53]!==B?(ct=f.jsxs("g",{transform:K,onClick:B,style:J,className:"hover:opacity-80 transition-opacity",children:[O,oe,Ke,Ge]}),e[48]=O,e[49]=oe,e[50]=Ke,e[51]=Ge,e[52]=K,e[53]=B,e[54]=ct):ct=e[54],ct}function ice(t){const e=t.metadata.labels||{};return e["app.kubernetes.io/instance"]||e.release||e.app||e["app.kubernetes.io/name"]||e["k8s-app"]||e.name||e["app.kubernetes.io/component"]||e["app.kubernetes.io/part-of"]}const ace={Deployment:1,StatefulSet:2,DaemonSet:3,CronJob:4,Job:5,Pod:6};function oce(t){const e=new Map;t.forEach(z=>{z.metadata.uid&&e.set(z.metadata.uid,z)});const n=new Map,s=new Map,r=(z,O)=>{n.has(z)||n.set(z,new Set),n.has(O)||n.set(O,new Set),n.get(z).add(O),n.get(O).add(z)},i=(z,O,L)=>{const V=`${z}-${O}`;s.has(V)||s.set(V,[]),s.get(V).push({from:z,to:O,type:L})},a=new Map,l=new Map;t.forEach(z=>{const O=(z.metadata.ownerReferences||[]).filter(L=>e.has(L.uid));if(O.length>0){const L=O[0];l.set(z.metadata.uid,L.uid),a.has(L.uid)||a.set(L.uid,[]),a.get(L.uid).push(z.metadata.uid),r(z.metadata.uid,L.uid),i(L.uid,z.metadata.uid,"owner")}});const u=["Deployment","StatefulSet","DaemonSet","Job"];t.forEach(z=>{if(!u.includes(z.kind))return;const O=z.spec?.selector?.matchLabels;!O||Object.keys(O).length===0||t.filter(L=>L.kind==="Pod"&&L.metadata.namespace===z.metadata.namespace).forEach(L=>{const V=L.metadata.labels||{};Object.entries(O).every(([T,Q])=>V[T]===Q)&&r(z.metadata.uid,L.metadata.uid)})});const h=new Map,m=new Map,p=new Set;t.filter(z=>z.kind==="Pod").forEach(z=>{const O=z.metadata.ownerReferences?.[0];if(!O)return;if(O.kind==="Node"){p.add(z.metadata.uid);return}const L=e.get(O.uid);if(L){if(u.includes(L.kind)){h.has(L.metadata.uid)||h.set(L.metadata.uid,[]),h.get(L.metadata.uid).push(z),m.set(z.metadata.uid,L.metadata.uid);return}if(L.kind==="ReplicaSet"){const V=L.metadata.ownerReferences?.[0];if(V){const T=e.get(V.uid);T&&T.kind==="Deployment"&&(h.has(T.metadata.uid)||h.set(T.metadata.uid,[]),h.get(T.metadata.uid).push(z),m.set(z.metadata.uid,T.metadata.uid))}}}}),h.forEach(z=>{z.sort((O,L)=>O.metadata.name.localeCompare(L.metadata.name))}),t.forEach(z=>{if(z.kind!=="Service")return;const O=z.spec?.selector;!O||Object.keys(O).length===0||t.filter(L=>L.kind==="Pod"&&L.metadata.namespace===z.metadata.namespace).forEach(L=>{const V=L.metadata.labels||{};Object.entries(O).every(([T,Q])=>V[T]===Q)&&(r(z.metadata.uid,L.metadata.uid),i(z.metadata.uid,L.metadata.uid,"service"))})}),t.forEach(z=>{if(z.kind!=="NetworkPolicy")return;const O=z.spec,L=z.metadata.namespace||"",V=O.podSelector?.matchLabels||{},T=Object.keys(V).length===0;t.filter(Q=>Q.kind==="Pod"&&Q.metadata.namespace===L).forEach(Q=>{const te=Q.metadata.labels||{};if(T||Object.entries(V).every(([oe,xe])=>te[oe]===xe)){const oe=m.get(Q.metadata.uid);i(oe||Q.metadata.uid,z.metadata.uid,"network-policy")}})});const g=new Map;t.forEach(z=>{if(z.kind==="Service"){const O=`${z.metadata.namespace||""}/${z.metadata.name}`;g.set(O,z)}}),t.forEach(z=>{if(z.kind!=="Ingress")return;const O=z.spec,L=z.metadata.namespace||"";if(O.defaultBackend?.service?.name){const V=g.get(`${L}/${O.defaultBackend.service.name}`);V&&(r(z.metadata.uid,V.metadata.uid),i(z.metadata.uid,V.metadata.uid,"ingress"))}O.rules?.forEach(V=>{V.http?.paths?.forEach(T=>{if(T.backend?.service?.name){const Q=g.get(`${L}/${T.backend.service.name}`);Q&&(r(z.metadata.uid,Q.metadata.uid),i(z.metadata.uid,Q.metadata.uid,"ingress"))}})})}),t.forEach(z=>{if(z.kind!=="HTTPRoute"&&z.kind!=="GRPCRoute")return;const O=z.spec,L=z.metadata.namespace||"";O.parentRefs?.forEach(V=>{if(!V.kind||V.kind==="Gateway"){const T=t.find(Q=>Q.kind==="Gateway"&&Q.metadata.name===V.name&&Q.metadata.namespace===L);T&&(r(T.metadata.uid,z.metadata.uid),i(T.metadata.uid,z.metadata.uid,"gateway"))}}),O.rules?.forEach(V=>{V.backendRefs?.forEach(T=>{if(!T.kind||T.kind==="Service"){const Q=g.get(`${L}/${T.name}`);Q&&(r(z.metadata.uid,Q.metadata.uid),i(z.metadata.uid,Q.metadata.uid,"gateway"))}})})});const y=new Map,b=new Map,_=new Map;t.forEach(z=>{const O=`${z.metadata.namespace||""}/${z.metadata.name}`;z.kind==="ConfigMap"?y.set(O,z):z.kind==="Secret"?b.set(O,z):z.kind==="PersistentVolumeClaim"&&_.set(O,z)});const w=(z,O,L)=>{z?.forEach(V=>{V.env?.forEach(T=>{T.valueFrom?.configMapKeyRef?.name&&O.add(T.valueFrom.configMapKeyRef.name),T.valueFrom?.secretKeyRef?.name&&L.add(T.valueFrom.secretKeyRef.name)}),V.envFrom?.forEach(T=>{T.configMapRef?.name&&O.add(T.configMapRef.name),T.secretRef?.name&&L.add(T.secretRef.name)})})},k=new Map;t.filter(z=>z.kind==="Pod").forEach(z=>{const O=m.get(z.metadata.uid);if(!O)return;const L=z.spec,V=new Set,T=new Set,Q=new Set;L.volumes?.forEach(X=>{X.configMap?.name&&V.add(X.configMap.name),X.secret?.secretName&&T.add(X.secret.secretName),X.persistentVolumeClaim?.claimName&&Q.add(X.persistentVolumeClaim.claimName),X.projected?.sources?.forEach(oe=>{oe.configMap?.name&&V.add(oe.configMap.name),oe.secret?.name&&T.add(oe.secret.name)})}),w(L.containers,V,T),w(L.initContainers,V,T),k.has(O)||k.set(O,new Map);const te=k.get(O);V.size>0&&(te.has("ConfigMap")||te.set("ConfigMap",new Set),V.forEach(X=>te.get("ConfigMap").add(X))),T.size>0&&(te.has("Secret")||te.set("Secret",new Set),T.forEach(X=>te.get("Secret").add(X))),Q.size>0&&(te.has("PersistentVolumeClaim")||te.set("PersistentVolumeClaim",new Set),Q.forEach(X=>te.get("PersistentVolumeClaim").add(X)))});const C=z=>{const O=l.get(z);return O?C(O):z},E=new Map,A=new Map,R=new Map;t.forEach(z=>{if(z.kind!=="Pod")return;const O=z.metadata.namespace||"",L=C(z.metadata.uid),V=z.spec,T=new Set,Q=new Set,te=new Set;V.volumes?.forEach(X=>{X.configMap?.name&&T.add(X.configMap.name),X.secret?.secretName&&Q.add(X.secret.secretName),X.persistentVolumeClaim?.claimName&&te.add(X.persistentVolumeClaim.claimName),X.projected?.sources?.forEach(oe=>{oe.configMap?.name&&T.add(oe.configMap.name),oe.secret?.name&&Q.add(oe.secret.name)})}),w(V.containers,T,Q),w(V.initContainers,T,Q),T.forEach(X=>{const oe=`${O}/${X}`;E.has(oe)||E.set(oe,new Set),E.get(oe).add(L)}),Q.forEach(X=>{const oe=`${O}/${X}`;A.has(oe)||A.set(oe,new Set),A.get(oe).add(L)}),te.forEach(X=>{const oe=`${O}/${X}`;R.has(oe)||R.set(oe,new Set),R.get(oe).add(L)})});const N=new Set;E.forEach((z,O)=>{if(z.size>1){const L=y.get(O);L&&N.add(L.metadata.uid)}}),A.forEach((z,O)=>{if(z.size>1){const L=b.get(O);L&&N.add(L.metadata.uid)}}),R.forEach((z,O)=>{if(z.size>1){const L=_.get(O);L&&N.add(L.metadata.uid)}}),t.forEach(z=>{if(z.kind!=="Pod")return;const O=z.metadata.namespace||"",L=z.spec,V=new Set,T=new Set,Q=new Set;L.volumes?.forEach(te=>{te.configMap?.name&&V.add(te.configMap.name),te.secret?.secretName&&T.add(te.secret.secretName),te.persistentVolumeClaim?.claimName&&Q.add(te.persistentVolumeClaim.claimName),te.projected?.sources?.forEach(X=>{X.configMap?.name&&V.add(X.configMap.name),X.secret?.name&&T.add(X.secret.name)})}),w(L.containers,V,T),w(L.initContainers,V,T),V.forEach(te=>{const X=y.get(`${O}/${te}`);X&&!N.has(X.metadata.uid)&&(r(z.metadata.uid,X.metadata.uid),i(X.metadata.uid,z.metadata.uid,"owner"))}),T.forEach(te=>{const X=b.get(`${O}/${te}`);X&&!N.has(X.metadata.uid)&&(r(z.metadata.uid,X.metadata.uid),i(X.metadata.uid,z.metadata.uid,"owner"))}),Q.forEach(te=>{const X=_.get(`${O}/${te}`);X&&!N.has(X.metadata.uid)&&(r(z.metadata.uid,X.metadata.uid),i(X.metadata.uid,z.metadata.uid,"owner"))})});const M=new Set,I=[];function W(z,O){M.has(z)||p.has(z)||(M.add(z),O.push(z),(n.get(z)||new Set).forEach(L=>W(L,O)))}t.forEach(z=>{if(!p.has(z.metadata.uid)&&!M.has(z.metadata.uid)){const O=[];W(z.metadata.uid,O),O.length>0&&I.push(O)}}),I.sort((z,O)=>O.length-z.length);const P=[],G={Gateway:0,Ingress:0,HTTPRoute:1,GRPCRoute:1,Service:2,Deployment:3,StatefulSet:3,DaemonSet:3,Job:3,CronJob:3,Pod:3,ConfigMap:4,Secret:4,PersistentVolumeClaim:4,NetworkPolicy:5};I.forEach((z,O)=>{const L=z.map(Me=>e.get(Me)).filter(Boolean);if(L.length===0)return;const V=L.filter(Me=>!(Me.kind==="ReplicaSet"||Me.kind==="Pod"&&m.has(Me.metadata.uid)||["ConfigMap","Secret","PersistentVolumeClaim"].includes(Me.kind)));if(V.length===0)return;const T=new Map;V.forEach(Me=>{const ze=G[Me.kind]??3;T.has(ze)||T.set(ze,[]),T.get(ze).push(Me.metadata.uid)}),T.forEach(Me=>{Me.sort((ze,De)=>{const Je=e.get(ze),Ee=e.get(De);return Je.metadata.name.localeCompare(Ee.metadata.name)})});const Q=new Map;V.forEach(Me=>{if(["Service","Gateway","HTTPRoute","GRPCRoute"].includes(Me.kind)){Q.set(Me.metadata.uid,{width:MM,height:MM});return}const ze=h.get(Me.metadata.uid);if(ze&&ze.length>0){const De=k.get(Me.metadata.uid);let Je=0;De&&De.forEach(re=>Je+=re.size);const Ee=Av+Ju*2,ae=Math.min(Je,yp),be=ae>0?ae*(za+Yo)-Yo+Ju*2:0,Ye=Math.max(Ee,be),ft=Je>0?Math.ceil(Je/yp):0,Rt=ft>0?ft*(za+Yo)+Yo:0,xn=eC+ze.length*(Ql+oy)-oy+Ju+Rt;Q.set(Me.metadata.uid,{width:Ye,height:xn})}else Q.set(Me.metadata.uid,{width:uf,height:Vw})});const te=new Map;let X=0,oe=Po+IM;const xe=Array.from(T.keys()).sort((Me,ze)=>Me-ze),Se=new Map;xe.forEach(Me=>{const ze=Math.max(...(T.get(Me)||[]).map(De=>Q.get(De)?.width||uf));Se.set(Me,ze)});let Xe=Po;xe.forEach(Me=>{const ze=Se.get(Me)||uf;let De=Po+IM;T.get(Me).forEach(Je=>{const Ee=Q.get(Je)||{width:uf,height:Vw},ae=(ze-Ee.width)/2;te.set(Je,{x:Xe+ae,y:De}),oe=Math.max(oe,De+Ee.height),De+=Ee.height+Yle}),X=Math.max(X,Xe+ze),Xe+=ze+Gle});const Ke=X+Po,st=oe+Po,Le=V.map(Me=>{const ze=te.get(Me.metadata.uid),De=Q.get(Me.metadata.uid)||{width:uf,height:Vw},Ee=h.get(Me.metadata.uid)?.map((Ye,ft)=>({uid:Ye.metadata.uid,resource:Ye,x:Ju,y:eC+ft*(Ql+oy),width:Av,height:Ql})),ae=k.get(Me.metadata.uid),be=[];return ae&&ae.forEach((Ye,ft)=>{Ye.forEach(Rt=>be.push({kind:ft,name:Rt}))}),{uid:Me.metadata.uid,resource:Me,x:ze.x,y:ze.y,width:De.width,height:De.height,childPods:Ee,configIcons:be}}),Ge=[],ct=new Set,ut=new Set;V.forEach(Me=>{const ze=h.get(Me.metadata.uid);ze&&ze.forEach(De=>ut.add(De.metadata.uid))}),s.forEach(Me=>{Me.forEach(ze=>{const De=V.some(be=>be.metadata.uid===ze.from),Je=V.some(be=>be.metadata.uid===ze.to),Ee=ut.has(ze.to),ae=ut.has(ze.from);if(De&&Je||De&&Ee||Je&&ae){const be=`${ze.from}-${ze.to}-${ze.type}`;ct.has(be)||(ct.add(be),Ge.push(ze))}})});let Re,mt=1/0;V.forEach(Me=>{const ze=ace[Me.kind];ze!==void 0&&ze<mt&&(mt=ze,Re=Me)});const pt=Re?ice(Re)||Re.metadata.name:void 0,At=Re?.metadata.namespace;P.push({id:`app-${O}`,name:pt||"",namespace:At,nodes:Le,edges:Ge,x:0,y:0,width:Ke,height:st})});const $=new Map;P.forEach(z=>{const O=z.namespace||"",L=z.name||"",V=`${O}/${L}`;$.has(V)||$.set(V,[]),$.get(V).push(z)});const U=[];$.forEach((z,O)=>{if(z.length===1)U.push(z[0]);else{z.sort((oe,xe)=>{const Se=oe.nodes[0]?.resource.metadata.name||"",Xe=xe.nodes[0]?.resource.metadata.name||"";return Se.localeCompare(Xe)});const L=[],V=[];let T=Po,Q=0;z.forEach(oe=>{oe.nodes.forEach(xe=>{L.push({...xe,x:xe.x+T-Po,y:xe.y})}),V.push(...oe.edges),T+=oe.width+R0,Q=Math.max(Q,oe.height)});const[te,X]=O.split("/");U.push({id:`app-${O}`,name:X,namespace:te,nodes:L,edges:V,x:0,y:0,width:T-R0+Po,height:Q})}}),U.sort((z,O)=>O.height-z.height);const Z=1800;let K=0,B=[];const J=[];U.forEach(z=>{K+z.width>Z&&B.length>0&&(J.push([...B]),K=0,B=[]),B.push({app:z,tempX:K}),K+=z.width+R0}),B.length>0&&J.push(B);let Y=0;return J.forEach(z=>{const O=Math.max(...z.map(L=>L.app.height));z.forEach(({app:L,tempX:V})=>{const T=V,Q=Y+(O-L.height)/2;L.nodes.forEach(te=>{te.x+=T,te.y+=Q}),L.x=T,L.y=Q}),Y+=O+R0}),U}const lce=5e3;function k$(t,e,n){const s=Pe.c(13);let r;s[0]!==n?(r=n===void 0?{}:n,s[0]=n,s[1]=r):r=s[1];const i=r,{refetchInterval:a,enabled:l}=i,u=a===void 0?lce:a,h=l===void 0?!0:l,m=u>0?u:!1;let p;s[2]!==h||s[3]!==e||s[4]!==t||s[5]!==m?(p={queryKey:t,queryFn:e,refetchInterval:m,enabled:h},s[2]=h,s[3]=e,s[4]=t,s[5]=m,s[6]=p):p=s[6];const y=Ry(p),b=y.data??null,_=y.isFetching&&!y.isLoading;let w;return s[7]!==y.error||s[8]!==y.isLoading||s[9]!==y.refetch||s[10]!==b||s[11]!==_?(w={data:b,loading:y.isLoading,error:y.error,refetch:y.refetch,isRefetching:_},s[7]=y.error,s[8]=y.isLoading,s[9]=y.refetch,s[10]=b,s[11]=_,s[12]=w):w=s[12],w}function RE(){const t=Pe.c(9);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=new Set,t[0]=e):e=t[0];const[n,s]=F.useState(e);let r;t[1]!==n?(r=y=>n.has(y),t[1]=n,t[2]=r):r=t[2];const i=r;let a;t[3]===Symbol.for("react.memo_cache_sentinel")?(a=y=>{s(b=>{const _=new Set(b);return _.add(y),_})},t[3]=a):a=t[3];const l=a;let u;t[4]===Symbol.for("react.memo_cache_sentinel")?(u=y=>{s(b=>{const _=new Set(b);return _.delete(y),_})},t[4]=u):u=t[4];const h=u;let m;t[5]===Symbol.for("react.memo_cache_sentinel")?(m=y=>{s(b=>{const _=new Set(b);return _.has(y)?_.delete(y):_.add(y),_})},t[5]=m):m=t[5];const p=m;let g;return t[6]!==i||t[7]!==n?(g={openPanels:n,isOpen:i,open:l,close:h,toggle:p},t[6]=i,t[7]=n,t[8]=g):g=t[8],g}const cce={selector:!1,containers:!1,images:!1,labels:!1,annotations:!1,"nominated node":!1,"readiness gates":!1,"node selector":!1};function uce(){const t=Pe.c(3),[e,n]=F.useState(hce);let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=a=>{n(l=>typeof a=="function"?a(l):a)},t[0]=s):s=t[0];const r=s;let i;return t[1]!==e?(i={columnVisibility:e,onColumnVisibilityChange:r},t[1]=e,t[2]=i):i=t[2],i}function hce(){return{...cce}}function dce(){return{accessor:(t,e)=>typeof t=="function"?{...e,accessorFn:t}:{...e,accessorKey:t},display:t=>t,group:t=>t}}function Zo(t,e){return typeof t=="function"?t(e):t}function Br(t,e){return n=>{e.setState(s=>({...s,[t]:Zo(n,s[t])}))}}function l1(t){return t instanceof Function}function fce(t){return Array.isArray(t)&&t.every(e=>typeof e=="number")}function pce(t,e){const n=[],s=r=>{r.forEach(i=>{n.push(i);const a=e(i);a!=null&&a.length&&s(a)})};return s(t),n}function gt(t,e,n){let s=[],r;return i=>{let a;n.key&&n.debug&&(a=Date.now());const l=t(i);if(!(l.length!==s.length||l.some((m,p)=>s[p]!==m)))return r;s=l;let h;if(n.key&&n.debug&&(h=Date.now()),r=e(...l),n==null||n.onChange==null||n.onChange(r),n.key&&n.debug&&n!=null&&n.debug()){const m=Math.round((Date.now()-a)*100)/100,p=Math.round((Date.now()-h)*100)/100,g=p/16,y=(b,_)=>{for(b=String(b);b.length<_;)b=" "+b;return b};console.info(`%c ${y(p,5)} /${y(m,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*g,120))}deg 100% 31%);`,n?.key)}return r}}function yt(t,e,n,s){return{debug:()=>{var r;return(r=t?.debugAll)!=null?r:t[e]},key:!1,onChange:s}}function mce(t,e,n,s){const r=()=>{var a;return(a=i.getValue())!=null?a:t.options.renderFallbackValue},i={id:`${e.id}_${n.id}`,row:e,column:n,getValue:()=>e.getValue(s),renderValue:r,getContext:gt(()=>[t,n,e,i],(a,l,u,h)=>({table:a,column:l,row:u,cell:h,getValue:h.getValue,renderValue:h.renderValue}),yt(t.options,"debugCells"))};return t._features.forEach(a=>{a.createCell==null||a.createCell(i,n,e,t)},{}),i}function gce(t,e,n,s){var r,i;const l={...t._getDefaultColumnDef(),...e},u=l.accessorKey;let h=(r=(i=l.id)!=null?i:u?typeof String.prototype.replaceAll=="function"?u.replaceAll(".","_"):u.replace(/\./g,"_"):void 0)!=null?r:typeof l.header=="string"?l.header:void 0,m;if(l.accessorFn?m=l.accessorFn:u&&(u.includes(".")?m=g=>{let y=g;for(const _ of u.split(".")){var b;y=(b=y)==null?void 0:b[_]}return y}:m=g=>g[l.accessorKey]),!h)throw new Error;let p={id:`${String(h)}`,accessorFn:m,parent:s,depth:n,columnDef:l,columns:[],getFlatColumns:gt(()=>[!0],()=>{var g;return[p,...(g=p.columns)==null?void 0:g.flatMap(y=>y.getFlatColumns())]},yt(t.options,"debugColumns")),getLeafColumns:gt(()=>[t._getOrderColumnsFn()],g=>{var y;if((y=p.columns)!=null&&y.length){let b=p.columns.flatMap(_=>_.getLeafColumns());return g(b)}return[p]},yt(t.options,"debugColumns"))};for(const g of t._features)g.createColumn==null||g.createColumn(p,t);return p}const Rs="debugHeaders";function LM(t,e,n){var s;let i={id:(s=n.id)!=null?s:e.id,column:e,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const a=[],l=u=>{u.subHeaders&&u.subHeaders.length&&u.subHeaders.map(l),a.push(u)};return l(i),a},getContext:()=>({table:t,header:i,column:e})};return t._features.forEach(a=>{a.createHeader==null||a.createHeader(i,t)}),i}const yce={createTable:t=>{t.getHeaderGroups=gt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,s,r)=>{var i,a;const l=(i=s?.map(p=>n.find(g=>g.id===p)).filter(Boolean))!=null?i:[],u=(a=r?.map(p=>n.find(g=>g.id===p)).filter(Boolean))!=null?a:[],h=n.filter(p=>!(s!=null&&s.includes(p.id))&&!(r!=null&&r.includes(p.id)));return T0(e,[...l,...h,...u],t)},yt(t.options,Rs)),t.getCenterHeaderGroups=gt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,s,r)=>(n=n.filter(i=>!(s!=null&&s.includes(i.id))&&!(r!=null&&r.includes(i.id))),T0(e,n,t,"center")),yt(t.options,Rs)),t.getLeftHeaderGroups=gt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(e,n,s)=>{var r;const i=(r=s?.map(a=>n.find(l=>l.id===a)).filter(Boolean))!=null?r:[];return T0(e,i,t,"left")},yt(t.options,Rs)),t.getRightHeaderGroups=gt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(e,n,s)=>{var r;const i=(r=s?.map(a=>n.find(l=>l.id===a)).filter(Boolean))!=null?r:[];return T0(e,i,t,"right")},yt(t.options,Rs)),t.getFooterGroups=gt(()=>[t.getHeaderGroups()],e=>[...e].reverse(),yt(t.options,Rs)),t.getLeftFooterGroups=gt(()=>[t.getLeftHeaderGroups()],e=>[...e].reverse(),yt(t.options,Rs)),t.getCenterFooterGroups=gt(()=>[t.getCenterHeaderGroups()],e=>[...e].reverse(),yt(t.options,Rs)),t.getRightFooterGroups=gt(()=>[t.getRightHeaderGroups()],e=>[...e].reverse(),yt(t.options,Rs)),t.getFlatHeaders=gt(()=>[t.getHeaderGroups()],e=>e.map(n=>n.headers).flat(),yt(t.options,Rs)),t.getLeftFlatHeaders=gt(()=>[t.getLeftHeaderGroups()],e=>e.map(n=>n.headers).flat(),yt(t.options,Rs)),t.getCenterFlatHeaders=gt(()=>[t.getCenterHeaderGroups()],e=>e.map(n=>n.headers).flat(),yt(t.options,Rs)),t.getRightFlatHeaders=gt(()=>[t.getRightHeaderGroups()],e=>e.map(n=>n.headers).flat(),yt(t.options,Rs)),t.getCenterLeafHeaders=gt(()=>[t.getCenterFlatHeaders()],e=>e.filter(n=>{var s;return!((s=n.subHeaders)!=null&&s.length)}),yt(t.options,Rs)),t.getLeftLeafHeaders=gt(()=>[t.getLeftFlatHeaders()],e=>e.filter(n=>{var s;return!((s=n.subHeaders)!=null&&s.length)}),yt(t.options,Rs)),t.getRightLeafHeaders=gt(()=>[t.getRightFlatHeaders()],e=>e.filter(n=>{var s;return!((s=n.subHeaders)!=null&&s.length)}),yt(t.options,Rs)),t.getLeafHeaders=gt(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(e,n,s)=>{var r,i,a,l,u,h;return[...(r=(i=e[0])==null?void 0:i.headers)!=null?r:[],...(a=(l=n[0])==null?void 0:l.headers)!=null?a:[],...(u=(h=s[0])==null?void 0:h.headers)!=null?u:[]].map(m=>m.getLeafHeaders()).flat()},yt(t.options,Rs))}};function T0(t,e,n,s){var r,i;let a=0;const l=function(g,y){y===void 0&&(y=1),a=Math.max(a,y),g.filter(b=>b.getIsVisible()).forEach(b=>{var _;(_=b.columns)!=null&&_.length&&l(b.columns,y+1)},0)};l(t);let u=[];const h=(g,y)=>{const b={depth:y,id:[s,`${y}`].filter(Boolean).join("_"),headers:[]},_=[];g.forEach(w=>{const k=[..._].reverse()[0],C=w.column.depth===b.depth;let E,A=!1;if(C&&w.column.parent?E=w.column.parent:(E=w.column,A=!0),k&&k?.column===E)k.subHeaders.push(w);else{const R=LM(n,E,{id:[s,y,E.id,w?.id].filter(Boolean).join("_"),isPlaceholder:A,placeholderId:A?`${_.filter(N=>N.column===E).length}`:void 0,depth:y,index:_.length});R.subHeaders.push(w),_.push(R)}b.headers.push(w),w.headerGroup=b}),u.push(b),y>0&&h(_,y-1)},m=e.map((g,y)=>LM(n,g,{depth:a,index:y}));h(m,a-1),u.reverse();const p=g=>g.filter(b=>b.column.getIsVisible()).map(b=>{let _=0,w=0,k=[0];b.subHeaders&&b.subHeaders.length?(k=[],p(b.subHeaders).forEach(E=>{let{colSpan:A,rowSpan:R}=E;_+=A,k.push(R)})):_=1;const C=Math.min(...k);return w=w+C,b.colSpan=_,b.rowSpan=w,{colSpan:_,rowSpan:w}});return p((r=(i=u[0])==null?void 0:i.headers)!=null?r:[]),u}const vce=(t,e,n,s,r,i,a)=>{let l={id:e,index:s,original:n,depth:r,parentId:a,_valuesCache:{},_uniqueValuesCache:{},getValue:u=>{if(l._valuesCache.hasOwnProperty(u))return l._valuesCache[u];const h=t.getColumn(u);if(h!=null&&h.accessorFn)return l._valuesCache[u]=h.accessorFn(l.original,s),l._valuesCache[u]},getUniqueValues:u=>{if(l._uniqueValuesCache.hasOwnProperty(u))return l._uniqueValuesCache[u];const h=t.getColumn(u);if(h!=null&&h.accessorFn)return h.columnDef.getUniqueValues?(l._uniqueValuesCache[u]=h.columnDef.getUniqueValues(l.original,s),l._uniqueValuesCache[u]):(l._uniqueValuesCache[u]=[l.getValue(u)],l._uniqueValuesCache[u])},renderValue:u=>{var h;return(h=l.getValue(u))!=null?h:t.options.renderFallbackValue},subRows:[],getLeafRows:()=>pce(l.subRows,u=>u.subRows),getParentRow:()=>l.parentId?t.getRow(l.parentId,!0):void 0,getParentRows:()=>{let u=[],h=l;for(;;){const m=h.getParentRow();if(!m)break;u.push(m),h=m}return u.reverse()},getAllCells:gt(()=>[t.getAllLeafColumns()],u=>u.map(h=>mce(t,l,h,h.id)),yt(t.options,"debugRows")),_getAllCellsByColumnId:gt(()=>[l.getAllCells()],u=>u.reduce((h,m)=>(h[m.column.id]=m,h),{}),yt(t.options,"debugRows"))};for(let u=0;u<t._features.length;u++){const h=t._features[u];h==null||h.createRow==null||h.createRow(l,t)}return l},bce={createColumn:(t,e)=>{t._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():e.getPreFilteredRowModel(),t._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}}},C$=(t,e,n)=>{var s,r;const i=n==null||(s=n.toString())==null?void 0:s.toLowerCase();return!!(!((r=t.getValue(e))==null||(r=r.toString())==null||(r=r.toLowerCase())==null)&&r.includes(i))};C$.autoRemove=t=>Ei(t);const N$=(t,e,n)=>{var s;return!!(!((s=t.getValue(e))==null||(s=s.toString())==null)&&s.includes(n))};N$.autoRemove=t=>Ei(t);const E$=(t,e,n)=>{var s;return((s=t.getValue(e))==null||(s=s.toString())==null?void 0:s.toLowerCase())===n?.toLowerCase()};E$.autoRemove=t=>Ei(t);const A$=(t,e,n)=>{var s;return(s=t.getValue(e))==null?void 0:s.includes(n)};A$.autoRemove=t=>Ei(t);const R$=(t,e,n)=>!n.some(s=>{var r;return!((r=t.getValue(e))!=null&&r.includes(s))});R$.autoRemove=t=>Ei(t)||!(t!=null&&t.length);const T$=(t,e,n)=>n.some(s=>{var r;return(r=t.getValue(e))==null?void 0:r.includes(s)});T$.autoRemove=t=>Ei(t)||!(t!=null&&t.length);const j$=(t,e,n)=>t.getValue(e)===n;j$.autoRemove=t=>Ei(t);const O$=(t,e,n)=>t.getValue(e)==n;O$.autoRemove=t=>Ei(t);const TE=(t,e,n)=>{let[s,r]=n;const i=t.getValue(e);return i>=s&&i<=r};TE.resolveFilterValue=t=>{let[e,n]=t,s=typeof e!="number"?parseFloat(e):e,r=typeof n!="number"?parseFloat(n):n,i=e===null||Number.isNaN(s)?-1/0:s,a=n===null||Number.isNaN(r)?1/0:r;if(i>a){const l=i;i=a,a=l}return[i,a]};TE.autoRemove=t=>Ei(t)||Ei(t[0])&&Ei(t[1]);const Fa={includesString:C$,includesStringSensitive:N$,equalsString:E$,arrIncludes:A$,arrIncludesAll:R$,arrIncludesSome:T$,equals:j$,weakEquals:O$,inNumberRange:TE};function Ei(t){return t==null||t===""}const _ce={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],...t}),getDefaultOptions:t=>({onColumnFiltersChange:Br("columnFilters",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(t,e)=>{t.getAutoFilterFn=()=>{const n=e.getCoreRowModel().flatRows[0],s=n?.getValue(t.id);return typeof s=="string"?Fa.includesString:typeof s=="number"?Fa.inNumberRange:typeof s=="boolean"||s!==null&&typeof s=="object"?Fa.equals:Array.isArray(s)?Fa.arrIncludes:Fa.weakEquals},t.getFilterFn=()=>{var n,s;return l1(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():(n=(s=e.options.filterFns)==null?void 0:s[t.columnDef.filterFn])!=null?n:Fa[t.columnDef.filterFn]},t.getCanFilter=()=>{var n,s,r;return((n=t.columnDef.enableColumnFilter)!=null?n:!0)&&((s=e.options.enableColumnFilters)!=null?s:!0)&&((r=e.options.enableFilters)!=null?r:!0)&&!!t.accessorFn},t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var n;return(n=e.getState().columnFilters)==null||(n=n.find(s=>s.id===t.id))==null?void 0:n.value},t.getFilterIndex=()=>{var n,s;return(n=(s=e.getState().columnFilters)==null?void 0:s.findIndex(r=>r.id===t.id))!=null?n:-1},t.setFilterValue=n=>{e.setColumnFilters(s=>{const r=t.getFilterFn(),i=s?.find(m=>m.id===t.id),a=Zo(n,i?i.value:void 0);if(PM(r,a,t)){var l;return(l=s?.filter(m=>m.id!==t.id))!=null?l:[]}const u={id:t.id,value:a};if(i){var h;return(h=s?.map(m=>m.id===t.id?u:m))!=null?h:[]}return s!=null&&s.length?[...s,u]:[u]})}},createRow:(t,e)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.setColumnFilters=e=>{const n=t.getAllLeafColumns(),s=r=>{var i;return(i=Zo(e,r))==null?void 0:i.filter(a=>{const l=n.find(u=>u.id===a.id);if(l){const u=l.getFilterFn();if(PM(u,a.value,l))return!1}return!0})};t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(s)},t.resetColumnFilters=e=>{var n,s;t.setColumnFilters(e?[]:(n=(s=t.initialState)==null?void 0:s.columnFilters)!=null?n:[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel())}};function PM(t,e,n){return(t&&t.autoRemove?t.autoRemove(e,n):!1)||typeof e>"u"||typeof e=="string"&&!e}const xce=(t,e,n)=>n.reduce((s,r)=>{const i=r.getValue(t);return s+(typeof i=="number"?i:0)},0),wce=(t,e,n)=>{let s;return n.forEach(r=>{const i=r.getValue(t);i!=null&&(s>i||s===void 0&&i>=i)&&(s=i)}),s},Sce=(t,e,n)=>{let s;return n.forEach(r=>{const i=r.getValue(t);i!=null&&(s<i||s===void 0&&i>=i)&&(s=i)}),s},kce=(t,e,n)=>{let s,r;return n.forEach(i=>{const a=i.getValue(t);a!=null&&(s===void 0?a>=a&&(s=r=a):(s>a&&(s=a),r<a&&(r=a)))}),[s,r]},Cce=(t,e)=>{let n=0,s=0;if(e.forEach(r=>{let i=r.getValue(t);i!=null&&(i=+i)>=i&&(++n,s+=i)}),n)return s/n},Nce=(t,e)=>{if(!e.length)return;const n=e.map(i=>i.getValue(t));if(!fce(n))return;if(n.length===1)return n[0];const s=Math.floor(n.length/2),r=n.sort((i,a)=>i-a);return n.length%2!==0?r[s]:(r[s-1]+r[s])/2},Ece=(t,e)=>Array.from(new Set(e.map(n=>n.getValue(t))).values()),Ace=(t,e)=>new Set(e.map(n=>n.getValue(t))).size,Rce=(t,e)=>e.length,qw={sum:xce,min:wce,max:Sce,extent:kce,mean:Cce,median:Nce,unique:Ece,uniqueCount:Ace,count:Rce},Tce={getDefaultColumnDef:()=>({aggregatedCell:t=>{var e,n;return(e=(n=t.getValue())==null||n.toString==null?void 0:n.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:Br("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,e)=>{t.toggleGrouping=()=>{e.setGrouping(n=>n!=null&&n.includes(t.id)?n.filter(s=>s!==t.id):[...n??[],t.id])},t.getCanGroup=()=>{var n,s;return((n=t.columnDef.enableGrouping)!=null?n:!0)&&((s=e.options.enableGrouping)!=null?s:!0)&&(!!t.accessorFn||!!t.columnDef.getGroupingValue)},t.getIsGrouped=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.includes(t.id)},t.getGroupedIndex=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.indexOf(t.id)},t.getToggleGroupingHandler=()=>{const n=t.getCanGroup();return()=>{n&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{const n=e.getCoreRowModel().flatRows[0],s=n?.getValue(t.id);if(typeof s=="number")return qw.sum;if(Object.prototype.toString.call(s)==="[object Date]")return qw.extent},t.getAggregationFn=()=>{var n,s;if(!t)throw new Error;return l1(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():(n=(s=e.options.aggregationFns)==null?void 0:s[t.columnDef.aggregationFn])!=null?n:qw[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=e=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(e),t.resetGrouping=e=>{var n,s;t.setGrouping(e?[]:(n=(s=t.initialState)==null?void 0:s.grouping)!=null?n:[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,e)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=n=>{if(t._groupingValuesCache.hasOwnProperty(n))return t._groupingValuesCache[n];const s=e.getColumn(n);return s!=null&&s.columnDef.getGroupingValue?(t._groupingValuesCache[n]=s.columnDef.getGroupingValue(t.original),t._groupingValuesCache[n]):t.getValue(n)},t._groupingValuesCache={}},createCell:(t,e,n,s)=>{t.getIsGrouped=()=>e.getIsGrouped()&&e.id===n.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&e.getIsGrouped(),t.getIsAggregated=()=>{var r;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((r=n.subRows)!=null&&r.length)}}};function jce(t,e,n){if(!(e!=null&&e.length)||!n)return t;const s=t.filter(i=>!e.includes(i.id));return n==="remove"?s:[...e.map(i=>t.find(a=>a.id===i)).filter(Boolean),...s]}const Oce={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:Br("columnOrder",t)}),createColumn:(t,e)=>{t.getIndex=gt(n=>[vp(e,n)],n=>n.findIndex(s=>s.id===t.id),yt(e.options,"debugColumns")),t.getIsFirstColumn=n=>{var s;return((s=vp(e,n)[0])==null?void 0:s.id)===t.id},t.getIsLastColumn=n=>{var s;const r=vp(e,n);return((s=r[r.length-1])==null?void 0:s.id)===t.id}},createTable:t=>{t.setColumnOrder=e=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(e),t.resetColumnOrder=e=>{var n;t.setColumnOrder(e?[]:(n=t.initialState.columnOrder)!=null?n:[])},t._getOrderColumnsFn=gt(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(e,n,s)=>r=>{let i=[];if(!(e!=null&&e.length))i=r;else{const a=[...e],l=[...r];for(;l.length&&a.length;){const u=a.shift(),h=l.findIndex(m=>m.id===u);h>-1&&i.push(l.splice(h,1)[0])}i=[...i,...l]}return jce(i,n,s)},yt(t.options,"debugTable"))}},Kw=()=>({left:[],right:[]}),Mce={getInitialState:t=>({columnPinning:Kw(),...t}),getDefaultOptions:t=>({onColumnPinningChange:Br("columnPinning",t)}),createColumn:(t,e)=>{t.pin=n=>{const s=t.getLeafColumns().map(r=>r.id).filter(Boolean);e.setColumnPinning(r=>{var i,a;if(n==="right"){var l,u;return{left:((l=r?.left)!=null?l:[]).filter(p=>!(s!=null&&s.includes(p))),right:[...((u=r?.right)!=null?u:[]).filter(p=>!(s!=null&&s.includes(p))),...s]}}if(n==="left"){var h,m;return{left:[...((h=r?.left)!=null?h:[]).filter(p=>!(s!=null&&s.includes(p))),...s],right:((m=r?.right)!=null?m:[]).filter(p=>!(s!=null&&s.includes(p)))}}return{left:((i=r?.left)!=null?i:[]).filter(p=>!(s!=null&&s.includes(p))),right:((a=r?.right)!=null?a:[]).filter(p=>!(s!=null&&s.includes(p)))}})},t.getCanPin=()=>t.getLeafColumns().some(s=>{var r,i,a;return((r=s.columnDef.enablePinning)!=null?r:!0)&&((i=(a=e.options.enableColumnPinning)!=null?a:e.options.enablePinning)!=null?i:!0)}),t.getIsPinned=()=>{const n=t.getLeafColumns().map(l=>l.id),{left:s,right:r}=e.getState().columnPinning,i=n.some(l=>s?.includes(l)),a=n.some(l=>r?.includes(l));return i?"left":a?"right":!1},t.getPinnedIndex=()=>{var n,s;const r=t.getIsPinned();return r?(n=(s=e.getState().columnPinning)==null||(s=s[r])==null?void 0:s.indexOf(t.id))!=null?n:-1:0}},createRow:(t,e)=>{t.getCenterVisibleCells=gt(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,s,r)=>{const i=[...s??[],...r??[]];return n.filter(a=>!i.includes(a.column.id))},yt(e.options,"debugRows")),t.getLeftVisibleCells=gt(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left],(n,s)=>(s??[]).map(i=>n.find(a=>a.column.id===i)).filter(Boolean).map(i=>({...i,position:"left"})),yt(e.options,"debugRows")),t.getRightVisibleCells=gt(()=>[t._getAllVisibleCells(),e.getState().columnPinning.right],(n,s)=>(s??[]).map(i=>n.find(a=>a.column.id===i)).filter(Boolean).map(i=>({...i,position:"right"})),yt(e.options,"debugRows"))},createTable:t=>{t.setColumnPinning=e=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(e),t.resetColumnPinning=e=>{var n,s;return t.setColumnPinning(e?Kw():(n=(s=t.initialState)==null?void 0:s.columnPinning)!=null?n:Kw())},t.getIsSomeColumnsPinned=e=>{var n;const s=t.getState().columnPinning;if(!e){var r,i;return!!((r=s.left)!=null&&r.length||(i=s.right)!=null&&i.length)}return!!((n=s[e])!=null&&n.length)},t.getLeftLeafColumns=gt(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(e,n)=>(n??[]).map(s=>e.find(r=>r.id===s)).filter(Boolean),yt(t.options,"debugColumns")),t.getRightLeafColumns=gt(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(e,n)=>(n??[]).map(s=>e.find(r=>r.id===s)).filter(Boolean),yt(t.options,"debugColumns")),t.getCenterLeafColumns=gt(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,s)=>{const r=[...n??[],...s??[]];return e.filter(i=>!r.includes(i.id))},yt(t.options,"debugColumns"))}};function Ice(t){return t||(typeof document<"u"?document:null)}const j0={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Ww=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),Dce={getDefaultColumnDef:()=>j0,getInitialState:t=>({columnSizing:{},columnSizingInfo:Ww(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:Br("columnSizing",t),onColumnSizingInfoChange:Br("columnSizingInfo",t)}),createColumn:(t,e)=>{t.getSize=()=>{var n,s,r;const i=e.getState().columnSizing[t.id];return Math.min(Math.max((n=t.columnDef.minSize)!=null?n:j0.minSize,(s=i??t.columnDef.size)!=null?s:j0.size),(r=t.columnDef.maxSize)!=null?r:j0.maxSize)},t.getStart=gt(n=>[n,vp(e,n),e.getState().columnSizing],(n,s)=>s.slice(0,t.getIndex(n)).reduce((r,i)=>r+i.getSize(),0),yt(e.options,"debugColumns")),t.getAfter=gt(n=>[n,vp(e,n),e.getState().columnSizing],(n,s)=>s.slice(t.getIndex(n)+1).reduce((r,i)=>r+i.getSize(),0),yt(e.options,"debugColumns")),t.resetSize=()=>{e.setColumnSizing(n=>{let{[t.id]:s,...r}=n;return r})},t.getCanResize=()=>{var n,s;return((n=t.columnDef.enableResizing)!=null?n:!0)&&((s=e.options.enableColumnResizing)!=null?s:!0)},t.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,e)=>{t.getSize=()=>{let n=0;const s=r=>{if(r.subHeaders.length)r.subHeaders.forEach(s);else{var i;n+=(i=r.column.getSize())!=null?i:0}};return s(t),n},t.getStart=()=>{if(t.index>0){const n=t.headerGroup.headers[t.index-1];return n.getStart()+n.getSize()}return 0},t.getResizeHandler=n=>{const s=e.getColumn(t.column.id),r=s?.getCanResize();return i=>{if(!s||!r||(i.persist==null||i.persist(),Gw(i)&&i.touches&&i.touches.length>1))return;const a=t.getSize(),l=t?t.getLeafHeaders().map(k=>[k.column.id,k.column.getSize()]):[[s.id,s.getSize()]],u=Gw(i)?Math.round(i.touches[0].clientX):i.clientX,h={},m=(k,C)=>{typeof C=="number"&&(e.setColumnSizingInfo(E=>{var A,R;const N=e.options.columnResizeDirection==="rtl"?-1:1,M=(C-((A=E?.startOffset)!=null?A:0))*N,I=Math.max(M/((R=E?.startSize)!=null?R:0),-.999999);return E.columnSizingStart.forEach(W=>{let[P,G]=W;h[P]=Math.round(Math.max(G+G*I,0)*100)/100}),{...E,deltaOffset:M,deltaPercentage:I}}),(e.options.columnResizeMode==="onChange"||k==="end")&&e.setColumnSizing(E=>({...E,...h})))},p=k=>m("move",k),g=k=>{m("end",k),e.setColumnSizingInfo(C=>({...C,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},y=Ice(n),b={moveHandler:k=>p(k.clientX),upHandler:k=>{y?.removeEventListener("mousemove",b.moveHandler),y?.removeEventListener("mouseup",b.upHandler),g(k.clientX)}},_={moveHandler:k=>(k.cancelable&&(k.preventDefault(),k.stopPropagation()),p(k.touches[0].clientX),!1),upHandler:k=>{var C;y?.removeEventListener("touchmove",_.moveHandler),y?.removeEventListener("touchend",_.upHandler),k.cancelable&&(k.preventDefault(),k.stopPropagation()),g((C=k.touches[0])==null?void 0:C.clientX)}},w=Lce()?{passive:!1}:!1;Gw(i)?(y?.addEventListener("touchmove",_.moveHandler,w),y?.addEventListener("touchend",_.upHandler,w)):(y?.addEventListener("mousemove",b.moveHandler,w),y?.addEventListener("mouseup",b.upHandler,w)),e.setColumnSizingInfo(k=>({...k,startOffset:u,startSize:a,deltaOffset:0,deltaPercentage:0,columnSizingStart:l,isResizingColumn:s.id}))}}},createTable:t=>{t.setColumnSizing=e=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(e),t.setColumnSizingInfo=e=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(e),t.resetColumnSizing=e=>{var n;t.setColumnSizing(e?{}:(n=t.initialState.columnSizing)!=null?n:{})},t.resetHeaderSizeInfo=e=>{var n;t.setColumnSizingInfo(e?Ww():(n=t.initialState.columnSizingInfo)!=null?n:Ww())},t.getTotalSize=()=>{var e,n;return(e=(n=t.getHeaderGroups()[0])==null?void 0:n.headers.reduce((s,r)=>s+r.getSize(),0))!=null?e:0},t.getLeftTotalSize=()=>{var e,n;return(e=(n=t.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((s,r)=>s+r.getSize(),0))!=null?e:0},t.getCenterTotalSize=()=>{var e,n;return(e=(n=t.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((s,r)=>s+r.getSize(),0))!=null?e:0},t.getRightTotalSize=()=>{var e,n;return(e=(n=t.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((s,r)=>s+r.getSize(),0))!=null?e:0}}};let O0=null;function Lce(){if(typeof O0=="boolean")return O0;let t=!1;try{const e={get passive(){return t=!0,!1}},n=()=>{};window.addEventListener("test",n,e),window.removeEventListener("test",n)}catch{t=!1}return O0=t,O0}function Gw(t){return t.type==="touchstart"}const Pce={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:Br("columnVisibility",t)}),createColumn:(t,e)=>{t.toggleVisibility=n=>{t.getCanHide()&&e.setColumnVisibility(s=>({...s,[t.id]:n??!t.getIsVisible()}))},t.getIsVisible=()=>{var n,s;const r=t.columns;return(n=r.length?r.some(i=>i.getIsVisible()):(s=e.getState().columnVisibility)==null?void 0:s[t.id])!=null?n:!0},t.getCanHide=()=>{var n,s;return((n=t.columnDef.enableHiding)!=null?n:!0)&&((s=e.options.enableHiding)!=null?s:!0)},t.getToggleVisibilityHandler=()=>n=>{t.toggleVisibility==null||t.toggleVisibility(n.target.checked)}},createRow:(t,e)=>{t._getAllVisibleCells=gt(()=>[t.getAllCells(),e.getState().columnVisibility],n=>n.filter(s=>s.column.getIsVisible()),yt(e.options,"debugRows")),t.getVisibleCells=gt(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(n,s,r)=>[...n,...s,...r],yt(e.options,"debugRows"))},createTable:t=>{const e=(n,s)=>gt(()=>[s(),s().filter(r=>r.getIsVisible()).map(r=>r.id).join("_")],r=>r.filter(i=>i.getIsVisible==null?void 0:i.getIsVisible()),yt(t.options,"debugColumns"));t.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=n=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(n),t.resetColumnVisibility=n=>{var s;t.setColumnVisibility(n?{}:(s=t.initialState.columnVisibility)!=null?s:{})},t.toggleAllColumnsVisible=n=>{var s;n=(s=n)!=null?s:!t.getIsAllColumnsVisible(),t.setColumnVisibility(t.getAllLeafColumns().reduce((r,i)=>({...r,[i.id]:n||!(i.getCanHide!=null&&i.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>n=>{var s;t.toggleAllColumnsVisible((s=n.target)==null?void 0:s.checked)}}};function vp(t,e){return e?e==="center"?t.getCenterVisibleLeafColumns():e==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}const Bce={createTable:t=>{t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}},$ce={getInitialState:t=>({globalFilter:void 0,...t}),getDefaultOptions:t=>({onGlobalFilterChange:Br("globalFilter",t),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var n;const s=(n=t.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[e.id])==null?void 0:n.getValue();return typeof s=="string"||typeof s=="number"}}),createColumn:(t,e)=>{t.getCanGlobalFilter=()=>{var n,s,r,i;return((n=t.columnDef.enableGlobalFilter)!=null?n:!0)&&((s=e.options.enableGlobalFilter)!=null?s:!0)&&((r=e.options.enableFilters)!=null?r:!0)&&((i=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(t))!=null?i:!0)&&!!t.accessorFn}},createTable:t=>{t.getGlobalAutoFilterFn=()=>Fa.includesString,t.getGlobalFilterFn=()=>{var e,n;const{globalFilterFn:s}=t.options;return l1(s)?s:s==="auto"?t.getGlobalAutoFilterFn():(e=(n=t.options.filterFns)==null?void 0:n[s])!=null?e:Fa[s]},t.setGlobalFilter=e=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(e)},t.resetGlobalFilter=e=>{t.setGlobalFilter(e?void 0:t.initialState.globalFilter)}}},zce={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:Br("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let e=!1,n=!1;t._autoResetExpanded=()=>{var s,r;if(!e){t._queue(()=>{e=!0});return}if((s=(r=t.options.autoResetAll)!=null?r:t.options.autoResetExpanded)!=null?s:!t.options.manualExpanding){if(n)return;n=!0,t._queue(()=>{t.resetExpanded(),n=!1})}},t.setExpanded=s=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(s),t.toggleAllRowsExpanded=s=>{s??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=s=>{var r,i;t.setExpanded(s?{}:(r=(i=t.initialState)==null?void 0:i.expanded)!=null?r:{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(s=>s.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>s=>{s.persist==null||s.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{const s=t.getState().expanded;return s===!0||Object.values(s).some(Boolean)},t.getIsAllRowsExpanded=()=>{const s=t.getState().expanded;return typeof s=="boolean"?s===!0:!(!Object.keys(s).length||t.getRowModel().flatRows.some(r=>!r.getIsExpanded()))},t.getExpandedDepth=()=>{let s=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(i=>{const a=i.split(".");s=Math.max(s,a.length)}),s},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,e)=>{t.toggleExpanded=n=>{e.setExpanded(s=>{var r;const i=s===!0?!0:!!(s!=null&&s[t.id]);let a={};if(s===!0?Object.keys(e.getRowModel().rowsById).forEach(l=>{a[l]=!0}):a=s,n=(r=n)!=null?r:!i,!i&&n)return{...a,[t.id]:!0};if(i&&!n){const{[t.id]:l,...u}=a;return u}return s})},t.getIsExpanded=()=>{var n;const s=e.getState().expanded;return!!((n=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(t))!=null?n:s===!0||s?.[t.id])},t.getCanExpand=()=>{var n,s,r;return(n=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(t))!=null?n:((s=e.options.enableExpanding)!=null?s:!0)&&!!((r=t.subRows)!=null&&r.length)},t.getIsAllParentsExpanded=()=>{let n=!0,s=t;for(;n&&s.parentId;)s=e.getRow(s.parentId,!0),n=s.getIsExpanded();return n},t.getToggleExpandedHandler=()=>{const n=t.getCanExpand();return()=>{n&&t.toggleExpanded()}}}},tC=0,nC=10,Yw=()=>({pageIndex:tC,pageSize:nC}),Fce={getInitialState:t=>({...t,pagination:{...Yw(),...t?.pagination}}),getDefaultOptions:t=>({onPaginationChange:Br("pagination",t)}),createTable:t=>{let e=!1,n=!1;t._autoResetPageIndex=()=>{var s,r;if(!e){t._queue(()=>{e=!0});return}if((s=(r=t.options.autoResetAll)!=null?r:t.options.autoResetPageIndex)!=null?s:!t.options.manualPagination){if(n)return;n=!0,t._queue(()=>{t.resetPageIndex(),n=!1})}},t.setPagination=s=>{const r=i=>Zo(s,i);return t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(r)},t.resetPagination=s=>{var r;t.setPagination(s?Yw():(r=t.initialState.pagination)!=null?r:Yw())},t.setPageIndex=s=>{t.setPagination(r=>{let i=Zo(s,r.pageIndex);const a=typeof t.options.pageCount>"u"||t.options.pageCount===-1?Number.MAX_SAFE_INTEGER:t.options.pageCount-1;return i=Math.max(0,Math.min(i,a)),{...r,pageIndex:i}})},t.resetPageIndex=s=>{var r,i;t.setPageIndex(s?tC:(r=(i=t.initialState)==null||(i=i.pagination)==null?void 0:i.pageIndex)!=null?r:tC)},t.resetPageSize=s=>{var r,i;t.setPageSize(s?nC:(r=(i=t.initialState)==null||(i=i.pagination)==null?void 0:i.pageSize)!=null?r:nC)},t.setPageSize=s=>{t.setPagination(r=>{const i=Math.max(1,Zo(s,r.pageSize)),a=r.pageSize*r.pageIndex,l=Math.floor(a/i);return{...r,pageIndex:l,pageSize:i}})},t.setPageCount=s=>t.setPagination(r=>{var i;let a=Zo(s,(i=t.options.pageCount)!=null?i:-1);return typeof a=="number"&&(a=Math.max(-1,a)),{...r,pageCount:a}}),t.getPageOptions=gt(()=>[t.getPageCount()],s=>{let r=[];return s&&s>0&&(r=[...new Array(s)].fill(null).map((i,a)=>a)),r},yt(t.options,"debugTable")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{const{pageIndex:s}=t.getState().pagination,r=t.getPageCount();return r===-1?!0:r===0?!1:s<r-1},t.previousPage=()=>t.setPageIndex(s=>s-1),t.nextPage=()=>t.setPageIndex(s=>s+1),t.firstPage=()=>t.setPageIndex(0),t.lastPage=()=>t.setPageIndex(t.getPageCount()-1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>{var s;return(s=t.options.pageCount)!=null?s:Math.ceil(t.getRowCount()/t.getState().pagination.pageSize)},t.getRowCount=()=>{var s;return(s=t.options.rowCount)!=null?s:t.getPrePaginationRowModel().rows.length}}},Zw=()=>({top:[],bottom:[]}),Uce={getInitialState:t=>({rowPinning:Zw(),...t}),getDefaultOptions:t=>({onRowPinningChange:Br("rowPinning",t)}),createRow:(t,e)=>{t.pin=(n,s,r)=>{const i=s?t.getLeafRows().map(u=>{let{id:h}=u;return h}):[],a=r?t.getParentRows().map(u=>{let{id:h}=u;return h}):[],l=new Set([...a,t.id,...i]);e.setRowPinning(u=>{var h,m;if(n==="bottom"){var p,g;return{top:((p=u?.top)!=null?p:[]).filter(_=>!(l!=null&&l.has(_))),bottom:[...((g=u?.bottom)!=null?g:[]).filter(_=>!(l!=null&&l.has(_))),...Array.from(l)]}}if(n==="top"){var y,b;return{top:[...((y=u?.top)!=null?y:[]).filter(_=>!(l!=null&&l.has(_))),...Array.from(l)],bottom:((b=u?.bottom)!=null?b:[]).filter(_=>!(l!=null&&l.has(_)))}}return{top:((h=u?.top)!=null?h:[]).filter(_=>!(l!=null&&l.has(_))),bottom:((m=u?.bottom)!=null?m:[]).filter(_=>!(l!=null&&l.has(_)))}})},t.getCanPin=()=>{var n;const{enableRowPinning:s,enablePinning:r}=e.options;return typeof s=="function"?s(t):(n=s??r)!=null?n:!0},t.getIsPinned=()=>{const n=[t.id],{top:s,bottom:r}=e.getState().rowPinning,i=n.some(l=>s?.includes(l)),a=n.some(l=>r?.includes(l));return i?"top":a?"bottom":!1},t.getPinnedIndex=()=>{var n,s;const r=t.getIsPinned();if(!r)return-1;const i=(n=r==="top"?e.getTopRows():e.getBottomRows())==null?void 0:n.map(a=>{let{id:l}=a;return l});return(s=i?.indexOf(t.id))!=null?s:-1}},createTable:t=>{t.setRowPinning=e=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(e),t.resetRowPinning=e=>{var n,s;return t.setRowPinning(e?Zw():(n=(s=t.initialState)==null?void 0:s.rowPinning)!=null?n:Zw())},t.getIsSomeRowsPinned=e=>{var n;const s=t.getState().rowPinning;if(!e){var r,i;return!!((r=s.top)!=null&&r.length||(i=s.bottom)!=null&&i.length)}return!!((n=s[e])!=null&&n.length)},t._getPinnedRows=(e,n,s)=>{var r;return((r=t.options.keepPinnedRows)==null||r?(n??[]).map(a=>{const l=t.getRow(a,!0);return l.getIsAllParentsExpanded()?l:null}):(n??[]).map(a=>e.find(l=>l.id===a))).filter(Boolean).map(a=>({...a,position:s}))},t.getTopRows=gt(()=>[t.getRowModel().rows,t.getState().rowPinning.top],(e,n)=>t._getPinnedRows(e,n,"top"),yt(t.options,"debugRows")),t.getBottomRows=gt(()=>[t.getRowModel().rows,t.getState().rowPinning.bottom],(e,n)=>t._getPinnedRows(e,n,"bottom"),yt(t.options,"debugRows")),t.getCenterRows=gt(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(e,n,s)=>{const r=new Set([...n??[],...s??[]]);return e.filter(i=>!r.has(i.id))},yt(t.options,"debugRows"))}},Hce={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:Br("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=e=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(e),t.resetRowSelection=e=>{var n;return t.setRowSelection(e?{}:(n=t.initialState.rowSelection)!=null?n:{})},t.toggleAllRowsSelected=e=>{t.setRowSelection(n=>{e=typeof e<"u"?e:!t.getIsAllRowsSelected();const s={...n},r=t.getPreGroupedRowModel().flatRows;return e?r.forEach(i=>{i.getCanSelect()&&(s[i.id]=!0)}):r.forEach(i=>{delete s[i.id]}),s})},t.toggleAllPageRowsSelected=e=>t.setRowSelection(n=>{const s=typeof e<"u"?e:!t.getIsAllPageRowsSelected(),r={...n};return t.getRowModel().rows.forEach(i=>{sC(r,i.id,s,!0,t)}),r}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=gt(()=>[t.getState().rowSelection,t.getCoreRowModel()],(e,n)=>Object.keys(e).length?Jw(t,n):{rows:[],flatRows:[],rowsById:{}},yt(t.options,"debugTable")),t.getFilteredSelectedRowModel=gt(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(e,n)=>Object.keys(e).length?Jw(t,n):{rows:[],flatRows:[],rowsById:{}},yt(t.options,"debugTable")),t.getGroupedSelectedRowModel=gt(()=>[t.getState().rowSelection,t.getSortedRowModel()],(e,n)=>Object.keys(e).length?Jw(t,n):{rows:[],flatRows:[],rowsById:{}},yt(t.options,"debugTable")),t.getIsAllRowsSelected=()=>{const e=t.getFilteredRowModel().flatRows,{rowSelection:n}=t.getState();let s=!!(e.length&&Object.keys(n).length);return s&&e.some(r=>r.getCanSelect()&&!n[r.id])&&(s=!1),s},t.getIsAllPageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows.filter(r=>r.getCanSelect()),{rowSelection:n}=t.getState();let s=!!e.length;return s&&e.some(r=>!n[r.id])&&(s=!1),s},t.getIsSomeRowsSelected=()=>{var e;const n=Object.keys((e=t.getState().rowSelection)!=null?e:{}).length;return n>0&&n<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:e.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>e=>{t.toggleAllRowsSelected(e.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>e=>{t.toggleAllPageRowsSelected(e.target.checked)}},createRow:(t,e)=>{t.toggleSelected=(n,s)=>{const r=t.getIsSelected();e.setRowSelection(i=>{var a;if(n=typeof n<"u"?n:!r,t.getCanSelect()&&r===n)return i;const l={...i};return sC(l,t.id,n,(a=s?.selectChildren)!=null?a:!0,e),l})},t.getIsSelected=()=>{const{rowSelection:n}=e.getState();return jE(t,n)},t.getIsSomeSelected=()=>{const{rowSelection:n}=e.getState();return rC(t,n)==="some"},t.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=e.getState();return rC(t,n)==="all"},t.getCanSelect=()=>{var n;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(t):(n=e.options.enableRowSelection)!=null?n:!0},t.getCanSelectSubRows=()=>{var n;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(t):(n=e.options.enableSubRowSelection)!=null?n:!0},t.getCanMultiSelect=()=>{var n;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(t):(n=e.options.enableMultiRowSelection)!=null?n:!0},t.getToggleSelectedHandler=()=>{const n=t.getCanSelect();return s=>{var r;n&&t.toggleSelected((r=s.target)==null?void 0:r.checked)}}}},sC=(t,e,n,s,r)=>{var i;const a=r.getRow(e,!0);n?(a.getCanMultiSelect()||Object.keys(t).forEach(l=>delete t[l]),a.getCanSelect()&&(t[e]=!0)):delete t[e],s&&(i=a.subRows)!=null&&i.length&&a.getCanSelectSubRows()&&a.subRows.forEach(l=>sC(t,l.id,n,s,r))};function Jw(t,e){const n=t.getState().rowSelection,s=[],r={},i=function(a,l){return a.map(u=>{var h;const m=jE(u,n);if(m&&(s.push(u),r[u.id]=u),(h=u.subRows)!=null&&h.length&&(u={...u,subRows:i(u.subRows)}),m)return u}).filter(Boolean)};return{rows:i(e.rows),flatRows:s,rowsById:r}}function jE(t,e){var n;return(n=e[t.id])!=null?n:!1}function rC(t,e,n){var s;if(!((s=t.subRows)!=null&&s.length))return!1;let r=!0,i=!1;return t.subRows.forEach(a=>{if(!(i&&!r)&&(a.getCanSelect()&&(jE(a,e)?i=!0:r=!1),a.subRows&&a.subRows.length)){const l=rC(a,e);l==="all"?i=!0:(l==="some"&&(i=!0),r=!1)}}),r?"all":i?"some":!1}const iC=/([0-9]+)/gm,Vce=(t,e,n)=>M$(ul(t.getValue(n)).toLowerCase(),ul(e.getValue(n)).toLowerCase()),qce=(t,e,n)=>M$(ul(t.getValue(n)),ul(e.getValue(n))),Kce=(t,e,n)=>OE(ul(t.getValue(n)).toLowerCase(),ul(e.getValue(n)).toLowerCase()),Wce=(t,e,n)=>OE(ul(t.getValue(n)),ul(e.getValue(n))),Gce=(t,e,n)=>{const s=t.getValue(n),r=e.getValue(n);return s>r?1:s<r?-1:0},Yce=(t,e,n)=>OE(t.getValue(n),e.getValue(n));function OE(t,e){return t===e?0:t>e?1:-1}function ul(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function M$(t,e){const n=t.split(iC).filter(Boolean),s=e.split(iC).filter(Boolean);for(;n.length&&s.length;){const r=n.shift(),i=s.shift(),a=parseInt(r,10),l=parseInt(i,10),u=[a,l].sort();if(isNaN(u[0])){if(r>i)return 1;if(i>r)return-1;continue}if(isNaN(u[1]))return isNaN(a)?-1:1;if(a>l)return 1;if(l>a)return-1}return n.length-s.length}const hf={alphanumeric:Vce,alphanumericCaseSensitive:qce,text:Kce,textCaseSensitive:Wce,datetime:Gce,basic:Yce},Zce={getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:Br("sorting",t),isMultiSortEvent:e=>e.shiftKey}),createColumn:(t,e)=>{t.getAutoSortingFn=()=>{const n=e.getFilteredRowModel().flatRows.slice(10);let s=!1;for(const r of n){const i=r?.getValue(t.id);if(Object.prototype.toString.call(i)==="[object Date]")return hf.datetime;if(typeof i=="string"&&(s=!0,i.split(iC).length>1))return hf.alphanumeric}return s?hf.text:hf.basic},t.getAutoSortDir=()=>{const n=e.getFilteredRowModel().flatRows[0];return typeof n?.getValue(t.id)=="string"?"asc":"desc"},t.getSortingFn=()=>{var n,s;if(!t)throw new Error;return l1(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():(n=(s=e.options.sortingFns)==null?void 0:s[t.columnDef.sortingFn])!=null?n:hf[t.columnDef.sortingFn]},t.toggleSorting=(n,s)=>{const r=t.getNextSortingOrder(),i=typeof n<"u"&&n!==null;e.setSorting(a=>{const l=a?.find(y=>y.id===t.id),u=a?.findIndex(y=>y.id===t.id);let h=[],m,p=i?n:r==="desc";if(a!=null&&a.length&&t.getCanMultiSort()&&s?l?m="toggle":m="add":a!=null&&a.length&&u!==a.length-1?m="replace":l?m="toggle":m="replace",m==="toggle"&&(i||r||(m="remove")),m==="add"){var g;h=[...a,{id:t.id,desc:p}],h.splice(0,h.length-((g=e.options.maxMultiSortColCount)!=null?g:Number.MAX_SAFE_INTEGER))}else m==="toggle"?h=a.map(y=>y.id===t.id?{...y,desc:p}:y):m==="remove"?h=a.filter(y=>y.id!==t.id):h=[{id:t.id,desc:p}];return h})},t.getFirstSortDir=()=>{var n,s;return((n=(s=t.columnDef.sortDescFirst)!=null?s:e.options.sortDescFirst)!=null?n:t.getAutoSortDir()==="desc")?"desc":"asc"},t.getNextSortingOrder=n=>{var s,r;const i=t.getFirstSortDir(),a=t.getIsSorted();return a?a!==i&&((s=e.options.enableSortingRemoval)==null||s)&&(!(n&&(r=e.options.enableMultiRemove)!=null)||r)?!1:a==="desc"?"asc":"desc":i},t.getCanSort=()=>{var n,s;return((n=t.columnDef.enableSorting)!=null?n:!0)&&((s=e.options.enableSorting)!=null?s:!0)&&!!t.accessorFn},t.getCanMultiSort=()=>{var n,s;return(n=(s=t.columnDef.enableMultiSort)!=null?s:e.options.enableMultiSort)!=null?n:!!t.accessorFn},t.getIsSorted=()=>{var n;const s=(n=e.getState().sorting)==null?void 0:n.find(r=>r.id===t.id);return s?s.desc?"desc":"asc":!1},t.getSortIndex=()=>{var n,s;return(n=(s=e.getState().sorting)==null?void 0:s.findIndex(r=>r.id===t.id))!=null?n:-1},t.clearSorting=()=>{e.setSorting(n=>n!=null&&n.length?n.filter(s=>s.id!==t.id):[])},t.getToggleSortingHandler=()=>{const n=t.getCanSort();return s=>{n&&(s.persist==null||s.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(s):!1))}}},createTable:t=>{t.setSorting=e=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(e),t.resetSorting=e=>{var n,s;t.setSorting(e?[]:(n=(s=t.initialState)==null?void 0:s.sorting)!=null?n:[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},Jce=[yce,Pce,Oce,Mce,bce,_ce,Bce,$ce,Zce,Tce,zce,Fce,Uce,Hce,Dce];function Xce(t){var e,n;const s=[...Jce,...(e=t._features)!=null?e:[]];let r={_features:s};const i=r._features.reduce((g,y)=>Object.assign(g,y.getDefaultOptions==null?void 0:y.getDefaultOptions(r)),{}),a=g=>r.options.mergeOptions?r.options.mergeOptions(i,g):{...i,...g};let u={...{},...(n=t.initialState)!=null?n:{}};r._features.forEach(g=>{var y;u=(y=g.getInitialState==null?void 0:g.getInitialState(u))!=null?y:u});const h=[];let m=!1;const p={_features:s,options:{...i,...t},initialState:u,_queue:g=>{h.push(g),m||(m=!0,Promise.resolve().then(()=>{for(;h.length;)h.shift()();m=!1}).catch(y=>setTimeout(()=>{throw y})))},reset:()=>{r.setState(r.initialState)},setOptions:g=>{const y=Zo(g,r.options);r.options=a(y)},getState:()=>r.options.state,setState:g=>{r.options.onStateChange==null||r.options.onStateChange(g)},_getRowId:(g,y,b)=>{var _;return(_=r.options.getRowId==null?void 0:r.options.getRowId(g,y,b))!=null?_:`${b?[b.id,y].join("."):y}`},getCoreRowModel:()=>(r._getCoreRowModel||(r._getCoreRowModel=r.options.getCoreRowModel(r)),r._getCoreRowModel()),getRowModel:()=>r.getPaginationRowModel(),getRow:(g,y)=>{let b=(y?r.getPrePaginationRowModel():r.getRowModel()).rowsById[g];if(!b&&(b=r.getCoreRowModel().rowsById[g],!b))throw new Error;return b},_getDefaultColumnDef:gt(()=>[r.options.defaultColumn],g=>{var y;return g=(y=g)!=null?y:{},{header:b=>{const _=b.header.column.columnDef;return _.accessorKey?_.accessorKey:_.accessorFn?_.id:null},cell:b=>{var _,w;return(_=(w=b.renderValue())==null||w.toString==null?void 0:w.toString())!=null?_:null},...r._features.reduce((b,_)=>Object.assign(b,_.getDefaultColumnDef==null?void 0:_.getDefaultColumnDef()),{}),...g}},yt(t,"debugColumns")),_getColumnDefs:()=>r.options.columns,getAllColumns:gt(()=>[r._getColumnDefs()],g=>{const y=function(b,_,w){return w===void 0&&(w=0),b.map(k=>{const C=gce(r,k,w,_),E=k;return C.columns=E.columns?y(E.columns,C,w+1):[],C})};return y(g)},yt(t,"debugColumns")),getAllFlatColumns:gt(()=>[r.getAllColumns()],g=>g.flatMap(y=>y.getFlatColumns()),yt(t,"debugColumns")),_getAllFlatColumnsById:gt(()=>[r.getAllFlatColumns()],g=>g.reduce((y,b)=>(y[b.id]=b,y),{}),yt(t,"debugColumns")),getAllLeafColumns:gt(()=>[r.getAllColumns(),r._getOrderColumnsFn()],(g,y)=>{let b=g.flatMap(_=>_.getLeafColumns());return y(b)},yt(t,"debugColumns")),getColumn:g=>r._getAllFlatColumnsById()[g]};Object.assign(r,p);for(let g=0;g<r._features.length;g++){const y=r._features[g];y==null||y.createTable==null||y.createTable(r)}return r}function Qce(){return t=>gt(()=>[t.options.data],e=>{const n={rows:[],flatRows:[],rowsById:{}},s=function(r,i,a){i===void 0&&(i=0);const l=[];for(let h=0;h<r.length;h++){const m=vce(t,t._getRowId(r[h],h,a),r[h],h,i,void 0,a?.id);if(n.flatRows.push(m),n.rowsById[m.id]=m,l.push(m),t.options.getSubRows){var u;m.originalSubRows=t.options.getSubRows(r[h],h),(u=m.originalSubRows)!=null&&u.length&&(m.subRows=s(m.originalSubRows,i+1,m))}}return l};return n.rows=s(e),n},yt(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))}function eue(){return t=>gt(()=>[t.getState().sorting,t.getPreSortedRowModel()],(e,n)=>{if(!n.rows.length||!(e!=null&&e.length))return n;const s=t.getState().sorting,r=[],i=s.filter(u=>{var h;return(h=t.getColumn(u.id))==null?void 0:h.getCanSort()}),a={};i.forEach(u=>{const h=t.getColumn(u.id);h&&(a[u.id]={sortUndefined:h.columnDef.sortUndefined,invertSorting:h.columnDef.invertSorting,sortingFn:h.getSortingFn()})});const l=u=>{const h=u.map(m=>({...m}));return h.sort((m,p)=>{for(let y=0;y<i.length;y+=1){var g;const b=i[y],_=a[b.id],w=_.sortUndefined,k=(g=b?.desc)!=null?g:!1;let C=0;if(w){const E=m.getValue(b.id),A=p.getValue(b.id),R=E===void 0,N=A===void 0;if(R||N){if(w==="first")return R?-1:1;if(w==="last")return R?1:-1;C=R&&N?0:R?w:-w}}if(C===0&&(C=_.sortingFn(m,p,b.id)),C!==0)return k&&(C*=-1),_.invertSorting&&(C*=-1),C}return m.index-p.index}),h.forEach(m=>{var p;r.push(m),(p=m.subRows)!=null&&p.length&&(m.subRows=l(m.subRows))}),h};return{rows:l(n.rows),flatRows:r,rowsById:n.rowsById}},yt(t.options,"debugTable","getSortedRowModel",()=>t._autoResetPageIndex()))}function BM(t,e){return t?tue(t)?F.createElement(t,e):t:null}function tue(t){return nue(t)||typeof t=="function"||sue(t)}function nue(t){return typeof t=="function"&&(()=>{const e=Object.getPrototypeOf(t);return e.prototype&&e.prototype.isReactComponent})()}function sue(t){return typeof t=="object"&&typeof t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}function rue(t){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...t},[n]=F.useState(()=>({current:Xce(e)})),[s,r]=F.useState(()=>n.current.initialState);return n.current.setOptions(i=>({...i,...t,state:{...s,...t.state},onStateChange:a=>{r(a),t.onStateChange==null||t.onStateChange(a)}})),n.current}function Xw(t){return t?.metadata?.uid?t.metadata.uid:t?.Id?t.Id:t?.Name?t.Name:JSON.stringify(t)}function iue(t){if(t?.metadata?.namespace)return t.metadata.namespace}function aue(t){const e=Pe.c(17),{columns:n}=t,[s,r]=F.useState(!1),i=F.useRef(null);let a,l;e[0]!==s?(a=()=>{if(!s)return;const _=function(k){i.current&&!i.current.contains(k.target)&&r(!1)};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},l=[s],e[0]=s,e[1]=a,e[2]=l):(a=e[1],l=e[2]),F.useEffect(a,l);let u,h;if(e[3]!==s?(u=()=>{if(!s)return;const _=function(k){k.key==="Escape"&&r(!1)};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},h=[s],e[3]=s,e[4]=u,e[5]=h):(u=e[4],h=e[5]),F.useEffect(u,h),n.length===0)return null;let m;e[6]!==s?(m=()=>r(!s),e[6]=s,e[7]=m):m=e[7];let p;e[8]===Symbol.for("react.memo_cache_sentinel")?(p=f.jsx(vY,{size:18}),e[8]=p):p=e[8];let g;e[9]!==m?(g=f.jsx("button",{onClick:m,className:"p-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded-md transition-colors focus:outline-none",title:"Toggle columns",children:p}),e[9]=m,e[10]=g):g=e[10];let y;e[11]!==n||e[12]!==s?(y=s&&f.jsx("div",{className:"absolute right-0 z-50 mt-1 p-2 bg-white border border-neutral-300 dark:bg-neutral-900 dark:border-neutral-700 rounded-lg shadow-xl min-w-45 max-h-75 overflow-y-auto",children:n.map(oue)}),e[11]=n,e[12]=s,e[13]=y):y=e[13];let b;return e[14]!==g||e[15]!==y?(b=f.jsxs("div",{className:"relative",ref:i,children:[g,y]}),e[14]=g,e[15]=y,e[16]=b):b=e[16],b}function oue(t){const e=t.getIsVisible(),n=t.id,s=t.columnDef.header,r=typeof s=="string"?s:n;return f.jsxs("label",{className:"flex items-center gap-2 px-2 py-1.5 cursor-pointer rounded hover:bg-neutral-100 dark:hover:bg-neutral-800",children:[f.jsx("span",{onClick:t.getToggleVisibilityHandler(),className:`size-4 rounded border flex items-center justify-center cursor-pointer transition-colors ${e?"bg-neutral-500 border-neutral-500 dark:bg-neutral-600 dark:border-neutral-500":"border-neutral-300 bg-white dark:border-neutral-600 dark:bg-neutral-800"}`,children:e&&f.jsx(Tn,{size:12,className:"text-white dark:text-neutral-300"})}),f.jsx("span",{onClick:t.getToggleVisibilityHandler(),className:"text-sm text-neutral-700 dark:text-neutral-400 cursor-pointer",children:r})]},n)}const $M=dce();function lue(t){const e=t.toLowerCase();return e==="status"||e==="phase"||e==="ready"||e==="condition"}function cue(t){const e=t.toLowerCase();return e.match(/running|active|ready|available|bound|succeeded|complete|healthy|true/)?{text:"text-emerald-600 dark:text-emerald-400",dot:"bg-emerald-500"}:e.match(/pending|creating|waiting|progressing|scheduled/)?{text:"text-amber-600 dark:text-amber-400",dot:"bg-amber-500"}:e.match(/failed|error|crashloopbackoff|terminated|unknown|lost|false/)?{text:"text-red-600 dark:text-red-400",dot:"bg-red-500"}:{text:"text-neutral-500 dark:text-neutral-400",dot:"bg-neutral-400"}}function uue({config:t,data:e,loading:n,error:s,refetch:r,isRefetching:i=!1,columnVisibility:a,onColumnVisibilityChange:l,onColumnsLoaded:u,toolbarRef:h,selectedItem:m,onSelectItem:p,namespace:g}){const y=g===void 0&&t.namespaced===!0,b=F.useMemo(()=>{if(!e?.columnDefinitions)return[];const A=[];return e.columnDefinitions.forEach((N,M)=>{const I=lue(N.name),W=N.name.toLowerCase()==="name",P=N.format==="date-time";A.push($M.accessor(G=>G.cells[M],{id:N.name.toLowerCase(),header:N.name,sortingFn:P?"datetime":"auto",sortUndefined:"last",cell:G=>{const $=G.getValue();let U;if($==null)U="<none>";else if(P&&typeof $=="string"){const Z=new Date($),B=new Date().getTime()-Z.getTime(),J=Math.floor(B/1e3),Y=Math.floor(J/60),z=Math.floor(Y/60),O=Math.floor(z/24);O>0?U=`${O}d`:z>0?U=`${z}h`:Y>0?U=`${Y}m`:U=`${J}s`}else Array.isArray($)?U=$.length>0?$.join(", "):"<none>":typeof $=="object"?U=JSON.stringify($):U=String($);if(I){const{text:Z,dot:K}=cue(U);return f.jsxs("span",{className:`inline-flex items-center gap-1.5 text-xs font-medium capitalize ${Z}`,children:[f.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${K}`}),U]})}return W?f.jsx("span",{className:"text-neutral-900 dark:text-neutral-300",children:U}):f.jsx("span",{className:"text-neutral-500 dark:text-neutral-500",children:U})},meta:{description:N.description,format:N.format}})),W&&y&&A.push($M.accessor(G=>iue(G.object),{id:"Namespace",header:"Namespace",sortingFn:"alphanumeric",sortUndefined:"last",cell:G=>{const $=G.getValue()??"<none>";return f.jsx("span",{className:"text-neutral-500 dark:text-neutral-500",children:$})},meta:{description:"Namespace of the resource",format:""}}))}),A},[e?.columnDefinitions,y]),_=F.useMemo(()=>m?{[Xw(m.object)]:!0}:{},[m]),w=F.useCallback(A=>{const R=typeof A=="function"?A(_):A,N=Object.keys(R).filter(M=>R[M]);if(N.length===0)p?.(null);else{const M=e?.rows.find(I=>Xw(I.object)===N[0]);p?.(M??null)}},[e?.rows,p,_]),[k,C]=F.useState([]),E=rue({data:e?.rows??[],columns:b,state:{sorting:k,rowSelection:_,columnVisibility:a},getCoreRowModel:Qce(),getSortedRowModel:eue(),onSortingChange:C,onRowSelectionChange:w,onColumnVisibilityChange:l,enableRowSelection:!0,enableMultiRowSelection:!1,getRowId:A=>Xw(A.object)});return F.useEffect(()=>{e?.columnDefinitions&&u&&u(e.columnDefinitions)},[e,u]),n?f.jsx("div",{className:"h-full flex items-center justify-center",children:f.jsxs("div",{className:"flex flex-col items-center gap-3 text-neutral-400 dark:text-neutral-500",children:[f.jsx("div",{className:"w-6 h-6 border-2 border-neutral-200 border-t-neutral-400 dark:border-neutral-700 dark:border-t-neutral-500 rounded-full animate-spin"}),f.jsxs("span",{className:"text-sm",children:["Loading ",t.name,"..."]})]})}):s?f.jsx("div",{className:"h-full flex items-center justify-center",children:f.jsxs("div",{className:"flex items-center gap-3 text-red-500 dark:text-red-400",children:[f.jsx(Ly,{size:18}),f.jsx("span",{className:"text-sm",children:s.message}),f.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 underline underline-offset-2",children:"Retry"})]})}):!e||!e.columnDefinitions||e.rows.length===0?f.jsx("div",{className:"h-full flex items-center justify-center",children:f.jsxs("div",{className:"flex flex-col items-center text-neutral-400 dark:text-neutral-500",children:[f.jsx("svg",{className:"w-8 h-8 mb-2 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),f.jsx("span",{className:"text-sm",children:"No resources found"})]})}):f.jsxs("div",{className:"pl-2 h-full relative",children:[i&&f.jsx("div",{className:"absolute top-2 right-4 z-20",children:f.jsx(Cn,{size:14,className:"text-neutral-400 dark:text-neutral-500 animate-spin"})}),f.jsx("div",{className:"overflow-auto h-full",children:f.jsxs("table",{className:"w-full text-[13px]",children:[f.jsx("thead",{className:"sticky top-0 z-10 bg-neutral-100 dark:bg-neutral-950",children:E.getHeaderGroups().map(A=>f.jsx("tr",{children:A.headers.map(R=>{const N=R.column.getIsSorted(),M=R.column.columnDef.meta;return f.jsx("th",{title:M?.description,onClick:R.column.getToggleSortingHandler(),className:`text-left px-4 py-2 text-[11px] font-medium whitespace-nowrap cursor-pointer transition-colors select-none group bg-neutral-100 dark:bg-neutral-950 ${N?"text-neutral-900 dark:text-neutral-200":"text-neutral-500 dark:text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-400"}`,children:f.jsxs("div",{className:"flex items-center gap-1",children:[BM(R.column.columnDef.header,R.getContext()),f.jsx("span",{className:`transition-opacity ${N?"opacity-100":"opacity-0 group-hover:opacity-40"}`,children:N==="asc"?f.jsx(iY,{size:12}):N==="desc"?f.jsx(Ss,{size:12}):f.jsx(oY,{size:12})})]})},R.id)})},A.id))}),f.jsx("tbody",{children:E.getRowModel().rows.map((A,R)=>{const N=A.getIsSelected(),M=R%2===1,I=A.getVisibleCells();return f.jsx("tr",{onClick:A.getToggleSelectedHandler(),className:`transition-colors cursor-pointer ${N?"bg-blue-500/20 dark:bg-blue-500/20":M?"bg-neutral-200/40 dark:bg-neutral-800/30 hover:bg-neutral-200/70 dark:hover:bg-neutral-800/50":"hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30"}`,children:I.map((W,P)=>f.jsx("td",{className:`px-4 py-2 whitespace-nowrap ${P===0?"rounded-l-lg":""} ${P===I.length-1?"rounded-r-lg":""}`,children:BM(W.column.columnDef.cell,W.getContext())},W.id))},A.id)})})]})}),h&&f.jsx(Gb,{toolbarRef:h,children:f.jsx(aue,{columns:E.getAllLeafColumns()})})]})}const Pl="detail";function I$(t){const e=Pe.c(57),{config:n,title:s,namespace:r,data:i,loading:a,error:l,refetch:u,isRefetching:h,showDetailPanel:m,renderDetailPanel:p,renderHeaderActions:g,renderExtraPanels:y,selectedItemName:b,onSelectItemName:_,getItemName:w}=t,k=h===void 0?!1:h,C=m===void 0?!0:m;let E;e[0]===Symbol.for("react.memo_cache_sentinel")?(E=[],e[0]=E):E=e[0];const[A,R]=F.useState(E),[N,M]=F.useState(null),I=F.useRef(null),[W,P]=F.useState(n),[G,$]=F.useState(r),{columnVisibility:U,onColumnVisibilityChange:Z}=uce(),{isOpen:K,open:B,close:J}=RE(),Y=K(Pl),z=F.useRef(void 0),O=F.useRef(!1);(n!==W||r!==G)&&(P(n),$(r),M(null),J(Pl));let V;e[1]===Symbol.for("react.memo_cache_sentinel")?(V=()=>{O.current=!1},e[1]=V):V=e[1];let T;e[2]!==n||e[3]!==r?(T=[n,r],e[2]=n,e[3]=r,e[4]=T):T=e[4],F.useEffect(V,T);let Q,te;e[5]!==J||e[6]!==i||e[7]!==w||e[8]!==B||e[9]!==b||e[10]!==C?(Q=()=>{const De=z.current;z.current=b,queueMicrotask(()=>{if(b&&i?.rows&&w){const Je=i.rows.find(ae=>w(ae)===b);Je&&(De!==b||!O.current)&&(O.current=!0,M(Je),C&&B(Pl))}else!b&&De&&(M(null),J(Pl))})},te=[b,i,w,C,B,J],e[5]=J,e[6]=i,e[7]=w,e[8]=B,e[9]=b,e[10]=C,e[11]=Q,e[12]=te):(Q=e[11],te=e[12]),F.useEffect(Q,te);let X;e[13]!==J||e[14]!==w||e[15]!==_||e[16]!==B||e[17]!==C?(X=De=>{M(De),De&&C?(B(Pl),_&&w&&_(w(De))):(J(Pl),_&&_(void 0))},e[13]=J,e[14]=w,e[15]=_,e[16]=B,e[17]=C,e[18]=X):X=e[18];const oe=X;let xe;e[19]===Symbol.for("react.memo_cache_sentinel")?(xe=De=>{R(De)},e[19]=xe):xe=e[19];const Se=xe,Ke=`shrink-0 h-14 flex items-center justify-between px-5 mt-2 transition-all duration-300 ${Y?"pr-[40rem]":""}`;let st;e[20]!==s?(st=f.jsx("div",{className:"flex items-center gap-4",children:f.jsx("h2",{className:"text-lg font-medium text-neutral-900 dark:text-neutral-100",children:s})}),e[20]=s,e[21]=st):st=e[21];let Le,Ge;e[22]===Symbol.for("react.memo_cache_sentinel")?(Le=f.jsx("button",{onClick:hue,className:"p-2 rounded-md text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 transition-colors",title:"Command Palette (K)",children:f.jsx(oN,{size:18})}),Ge=f.jsx("div",{ref:I}),e[22]=Le,e[23]=Ge):(Le=e[22],Ge=e[23]);let ct;e[24]!==A||e[25]!==g?(ct=g?.(A),e[24]=A,e[25]=g,e[26]=ct):ct=e[26];let ut;e[27]!==ct?(ut=f.jsxs("div",{className:"flex items-center gap-2",children:[Le,Ge,ct]}),e[27]=ct,e[28]=ut):ut=e[28];let Re;e[29]!==Ke||e[30]!==st||e[31]!==ut?(Re=f.jsxs("header",{className:Ke,children:[st,ut]}),e[29]=Ke,e[30]=st,e[31]=ut,e[32]=Re):Re=e[32];let mt;e[33]!==U||e[34]!==n||e[35]!==i||e[36]!==l||e[37]!==oe||e[38]!==k||e[39]!==a||e[40]!==r||e[41]!==Z||e[42]!==u||e[43]!==N?(mt=f.jsx("section",{className:"flex-1 min-h-0 overflow-hidden",children:f.jsx(uue,{config:n,data:i,loading:a,error:l,refetch:u,isRefetching:k,columnVisibility:U,onColumnVisibilityChange:Z,onColumnsLoaded:Se,toolbarRef:I,selectedItem:N,onSelectItem:oe,namespace:r})}),e[33]=U,e[34]=n,e[35]=i,e[36]=l,e[37]=oe,e[38]=k,e[39]=a,e[40]=r,e[41]=Z,e[42]=u,e[43]=N,e[44]=mt):mt=e[44];let pt;e[45]!==Re||e[46]!==mt?(pt=f.jsxs("main",{className:"flex-1 flex flex-col h-full min-w-0",children:[Re,mt]}),e[45]=Re,e[46]=mt,e[47]=pt):pt=e[47];const At=y?.(N,Y);let Me;e[48]!==J||e[49]!==_||e[50]!==p||e[51]!==N?(Me=p&&N&&p(N,()=>{M(null),J(Pl),_&&_(void 0)},!1),e[48]=J,e[49]=_,e[50]=p,e[51]=N,e[52]=Me):Me=e[52];let ze;return e[53]!==pt||e[54]!==At||e[55]!==Me?(ze=f.jsxs(f.Fragment,{children:[pt,At,Me]}),e[53]=pt,e[54]=At,e[55]=Me,e[56]=ze):ze=e[56],ze}function hue(){const t=new KeyboardEvent("keydown",{key:"k",metaKey:!0,ctrlKey:!0,bubbles:!0});document.dispatchEvent(t)}class due{#t=!0;#e;#n;#r;#s;#o;#i;#a;#p=0;#m=5;#c=!1;#u=!1;#l=null;#h=()=>{this.debugLog("Connected to event bus"),this.#o=!0,this.#c=!1,this.debugLog("Emitting queued events",this.#s),this.#s.forEach(e=>this.emitEventToBus(e)),this.#s=[],this.stopConnectLoop(),this.#n().removeEventListener("tanstack-connect-success",this.#h)};#d=()=>{if(this.#p<this.#m){this.#p++,this.dispatchCustomEvent("tanstack-connect",{});return}this.#n().removeEventListener("tanstack-connect",this.#d),this.#u=!0,this.debugLog("Max retries reached, giving up on connection"),this.stopConnectLoop()};#f=()=>{this.#c||(this.#c=!0,this.#n().addEventListener("tanstack-connect-success",this.#h),this.#d())};constructor({pluginId:e,debug:n=!1,enabled:s=!0,reconnectEveryMs:r=300}){this.#e=e,this.#t=s,this.#n=this.getGlobalTarget,this.#r=n,this.debugLog(" Initializing event subscription for plugin",this.#e),this.#s=[],this.#o=!1,this.#u=!1,this.#i=null,this.#a=r}startConnectLoop(){this.#i!==null||this.#o||(this.debugLog(`Starting connect loop (every ${this.#a}ms)`),this.#i=setInterval(this.#d,this.#a))}stopConnectLoop(){this.#c=!1,this.#i!==null&&(clearInterval(this.#i),this.#i=null,this.#s=[],this.debugLog("Stopped connect loop"))}debugLog(...e){this.#r&&console.log(` [tanstack-devtools:${this.#e}-plugin]`,...e)}getGlobalTarget(){if(typeof globalThis<"u"&&globalThis.__TANSTACK_EVENT_TARGET__)return this.debugLog("Using global event target"),globalThis.__TANSTACK_EVENT_TARGET__;if(typeof window<"u"&&typeof window.addEventListener<"u")return this.debugLog("Using window as event target"),window;const e=typeof EventTarget<"u"?new EventTarget:void 0;return typeof e>"u"||typeof e.addEventListener>"u"?(this.debugLog("No event mechanism available, running in non-web environment"),{addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!1}):(this.debugLog("Using new EventTarget as fallback"),e)}getPluginId(){return this.#e}dispatchCustomEventShim(e,n){try{const s=new Event(e,{detail:n});this.#n().dispatchEvent(s)}catch{this.debugLog("Failed to dispatch shim event")}}dispatchCustomEvent(e,n){try{this.#n().dispatchEvent(new CustomEvent(e,{detail:n}))}catch{this.dispatchCustomEventShim(e,n)}}emitEventToBus(e){this.debugLog("Emitting event to client bus",e),this.dispatchCustomEvent("tanstack-dispatch-event",e)}createEventPayload(e,n){return{type:`${this.#e}:${e}`,payload:n,pluginId:this.#e}}emit(e,n){if(!this.#t){this.debugLog("Event bus client is disabled, not emitting event",e,n);return}if(this.#l&&(this.debugLog("Emitting event to internal event target",e,n),this.#l.dispatchEvent(new CustomEvent(`${this.#e}:${e}`,{detail:this.createEventPayload(e,n)}))),this.#u){this.debugLog("Previously failed to connect, not emitting to bus");return}if(!this.#o){this.debugLog("Bus not available, will be pushed as soon as connected"),this.#s.push(this.createEventPayload(e,n)),typeof CustomEvent<"u"&&!this.#c&&(this.#f(),this.startConnectLoop());return}return this.emitEventToBus(this.createEventPayload(e,n))}on(e,n,s){const r=s?.withEventTarget??!1,i=`${this.#e}:${e}`;if(r&&(this.#l||(this.#l=new EventTarget),this.#l.addEventListener(i,l=>{n(l.detail)})),!this.#t)return this.debugLog("Event bus client is disabled, not registering event",i),()=>{};const a=l=>{this.debugLog("Received event from bus",l.detail),n(l.detail)};return this.#n().addEventListener(i,a),this.debugLog("Registered event to bus",i),()=>{r&&this.#l?.removeEventListener(i,a),this.#n().removeEventListener(i,a)}}onAll(e){if(!this.#t)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const n=s=>{const r=s.detail;e(r)};return this.#n().addEventListener("tanstack-devtools-global",n),()=>this.#n().removeEventListener("tanstack-devtools-global",n)}onAllPluginEvents(e){if(!this.#t)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const n=s=>{const r=s.detail;this.#e&&r.pluginId!==this.#e||e(r)};return this.#n().addEventListener("tanstack-devtools-global",n),()=>this.#n().removeEventListener("tanstack-devtools-global",n)}}class fue extends due{constructor(){super({pluginId:"tanstack-ai-devtools"})}}const Hn=new fue;async function pue(t){let e="";for await(const n of t)n.type==="content"&&n.delta&&(e+=n.delta);return e}function mue(t){return typeof t=="object"&&t!==null&&"~standard"in t&&typeof t["~standard"]=="object"&&t["~standard"].version===1&&typeof t["~standard"].jsonSchema=="object"&&typeof t["~standard"].jsonSchema.input=="function"}function cc(t){return typeof t=="object"&&t!==null&&"~standard"in t&&typeof t["~standard"]=="object"&&t!==null&&t["~standard"]!==null&&"version"in t["~standard"]&&t["~standard"].version===1&&"validate"in t["~standard"]&&typeof t["~standard"].validate=="function"}function bp(t,e=[]){const n={...t};if(n.type==="object"&&n.properties){const s={...n.properties},r=Object.keys(s);for(const i of r){const a=s[i],l=!e.includes(i);a.type==="object"&&a.properties?s[i]=bp(a,a.required||[]):a.type==="array"&&a.items?s[i]={...a,items:bp(a.items,a.items.required||[])}:l&&(a.type&&!Array.isArray(a.type)?s[i]={...a,type:[a.type,"null"]}:Array.isArray(a.type)&&!a.type.includes("null")&&(s[i]={...a,type:[...a.type,"null"]}))}n.properties=s,n.required=r,n.additionalProperties=!1}return n.type==="array"&&n.items&&(n.items=bp(n.items,n.items.required||[])),n}function aC(t,e={}){if(!t)return;const{forStructuredOutput:n=!1}=e;if(mue(t)){let r=t["~standard"].jsonSchema.input({target:"draft-07"});if(typeof r=="object"&&"$schema"in r){const{$schema:i,...a}=r;r=a}return typeof r=="object"&&("properties"in r&&!r.type&&(r.type="object"),r.type==="object"&&!("properties"in r)&&(r.properties={}),r.type==="object"&&!("required"in r)&&(r.required=[]),n&&(r=bp(r,r.required||[]))),r}return n&&typeof t=="object"?bp(t,t.required||[]):t}function ah(t,e){if(!cc(t))return e;const n=t["~standard"].validate(e);if(n instanceof Promise)throw new Error("Schema validation returned a Promise. Use validateWithStandardSchema for async validation.");if(!n.issues)return n.value;const s=n.issues.map(r=>r.message||"Validation failed").join(", ");throw new Error(`Validation failed: ${s}`)}class gue{constructor(e){this.toolCallsMap=new Map,this.tools=e}addToolCallChunk(e){const n=e.index,s=this.toolCallsMap.get(n);s?(e.toolCall.function.name&&!s.function.name&&(s.function.name=e.toolCall.function.name),e.toolCall.function.arguments&&(s.function.arguments+=e.toolCall.function.arguments)):e.toolCall.id&&e.toolCall.function.name&&this.toolCallsMap.set(n,{id:e.toolCall.id,type:"function",function:{name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||""}})}hasToolCalls(){return this.getToolCalls().length>0}getToolCalls(){return Array.from(this.toolCallsMap.values()).filter(e=>e.id&&e.function.name&&e.function.name.trim().length>0)}async*executeTools(e){const n=this.getToolCalls(),s=[];for(const r of n){const i=this.tools.find(l=>l.name===r.function.name);let a;if(i?.execute)try{let l;try{l=JSON.parse(r.function.arguments)}catch{throw new Error(`Failed to parse tool arguments as JSON: ${r.function.arguments}`)}if(i.inputSchema&&cc(i.inputSchema))try{l=ah(i.inputSchema,l)}catch(h){const m=h instanceof Error?h.message:"Validation failed";throw new Error(`Input validation failed for tool ${i.name}: ${m}`)}let u=await i.execute(l);if(i.outputSchema&&cc(i.outputSchema)&&u!==void 0&&u!==null)try{u=ah(i.outputSchema,u)}catch(h){const m=h instanceof Error?h.message:"Validation failed";throw new Error(`Output validation failed for tool ${i.name}: ${m}`)}a=typeof u=="string"?u:JSON.stringify(u)}catch(l){a=`Error executing tool: ${l instanceof Error?l.message:"Unknown error"}`}else a=`Tool ${r.function.name} does not have an execute function`;yield{type:"tool_result",id:e.id,model:e.model,timestamp:Date.now(),toolCallId:r.id,content:a},s.push({role:"tool",content:a,toolCallId:r.id})}return s}clear(){this.toolCallsMap.clear()}}async function zM(t,e,n=new Map,s=new Map){const r=[],i=[],a=[],l=new Map;for(const u of e)l.set(u.name,u);for(const u of t){const h=l.get(u.function.name),m=u.function.name;if(!h){r.push({toolCallId:u.id,toolName:m,result:{error:`Unknown tool: ${m}`},state:"output-error"});continue}let p={};const g=u.function.arguments.trim()||"{}";try{p=JSON.parse(g)}catch{throw new Error(`Failed to parse tool arguments as JSON: ${g}`)}if(h.inputSchema&&cc(h.inputSchema))try{p=ah(h.inputSchema,p)}catch(b){const _=b instanceof Error?b.message:"Validation failed";r.push({toolCallId:u.id,toolName:m,result:{error:`Input validation failed for tool ${h.name}: ${_}`},state:"output-error"});continue}if(!h.execute){if(h.needsApproval){const b=`approval_${u.id}`;n.has(b)?n.get(b)?s.has(u.id)?r.push({toolCallId:u.id,toolName:m,result:s.get(u.id)}):a.push({toolCallId:u.id,toolName:m,input:p}):r.push({toolCallId:u.id,toolName:m,result:{error:"User declined tool execution"},state:"output-error"}):i.push({toolCallId:u.id,toolName:u.function.name,input:p,approvalId:b})}else s.has(u.id)?r.push({toolCallId:u.id,toolName:m,result:s.get(u.id)}):a.push({toolCallId:u.id,toolName:m,input:p});continue}if(h.needsApproval){const b=`approval_${u.id}`;if(n.has(b))if(n.get(b)){const w=Date.now();try{let k=await h.execute(p);const C=Date.now()-w;h.outputSchema&&cc(h.outputSchema)&&k!==void 0&&k!==null&&(k=ah(h.outputSchema,k)),r.push({toolCallId:u.id,toolName:m,result:typeof k=="string"?JSON.parse(k):k||null,duration:C})}catch(k){const C=Date.now()-w,E=k instanceof Error?k.message:"Unknown error";r.push({toolCallId:u.id,toolName:m,result:{error:E},state:"output-error",duration:C})}}else r.push({toolCallId:u.id,toolName:m,result:{error:"User declined tool execution"},state:"output-error"});else i.push({toolCallId:u.id,toolName:m,input:p,approvalId:b});continue}const y=Date.now();try{let b=await h.execute(p);const _=Date.now()-y;h.outputSchema&&cc(h.outputSchema)&&b!==void 0&&b!==null&&(b=ah(h.outputSchema,b)),r.push({toolCallId:u.id,toolName:m,result:typeof b=="string"?JSON.parse(b):b||null,duration:_})}catch(b){const _=Date.now()-y,w=b instanceof Error?b.message:"Unknown error";r.push({toolCallId:u.id,toolName:m,result:{error:w},state:"output-error",duration:_})}}return{results:r,needsApproval:i,needsClientExecution:a}}function D$(t){return({iterationCount:e})=>e<t}class L${constructor(e){this.iterationCount=0,this.lastFinishReason=null,this.streamStartTime=0,this.totalChunkCount=0,this.currentMessageId=null,this.accumulatedContent="",this.doneChunk=null,this.shouldEmitStreamEnd=!0,this.earlyTermination=!1,this.toolPhase="continue",this.cyclePhase="processText",this.adapter=e.adapter,this.params=e.params,this.systemPrompts=e.params.systemPrompts||[],this.tools=e.params.tools||[],this.loopStrategy=e.params.agentLoopStrategy||D$(5),this.toolCallManager=new gue(this.tools),this.initialMessageCount=e.params.messages.length,this.messages=e.params.messages,this.requestId=this.createId("chat"),this.streamId=this.createId("stream"),this.effectiveRequest=e.params.abortController?{signal:e.params.abortController.signal}:void 0,this.effectiveSignal=e.params.abortController?.signal}getAccumulatedContent(){return this.accumulatedContent}getMessages(){return this.messages}async*run(){this.beforeRun();try{if((yield*this.checkForPendingToolCalls())==="wait")return;do{if(this.earlyTermination||this.isAborted())return;this.beginCycle(),this.cyclePhase==="processText"?yield*this.streamModelResponse():yield*this.processToolCalls(),this.endCycle()}while(this.shouldContinue())}finally{this.afterRun()}}beforeRun(){this.streamStartTime=Date.now();const{model:e,tools:n,temperature:s,topP:r,maxTokens:i,metadata:a,modelOptions:l,conversationId:u}=this.params,h={};s!==void 0&&(h.temperature=s),r!==void 0&&(h.topP=r),i!==void 0&&(h.maxTokens=i),a!==void 0&&(h.metadata=a),Hn.emit("text:started",{requestId:this.requestId,streamId:this.streamId,model:e,provider:this.adapter.name,messageCount:this.initialMessageCount,hasTools:!!n&&n.length>0,streaming:!0,timestamp:Date.now(),clientId:u,toolNames:n?.map(m=>m.name),options:Object.keys(h).length>0?h:void 0,modelOptions:l}),Hn.emit("stream:started",{streamId:this.streamId,model:e,provider:this.adapter.name,timestamp:Date.now()})}afterRun(){if(!this.shouldEmitStreamEnd)return;const e=Date.now();Hn.emit("text:completed",{requestId:this.requestId,streamId:this.streamId,model:this.params.model,content:this.accumulatedContent,messageId:this.currentMessageId||void 0,finishReason:this.lastFinishReason||void 0,usage:this.doneChunk?.usage,timestamp:e}),Hn.emit("stream:ended",{requestId:this.requestId,streamId:this.streamId,totalChunks:this.totalChunkCount,duration:e-this.streamStartTime,timestamp:e})}beginCycle(){this.cyclePhase==="processText"&&this.beginIteration()}endCycle(){if(this.cyclePhase==="processText"){this.cyclePhase="executeToolCalls";return}this.cyclePhase="processText",this.iterationCount++}beginIteration(){this.currentMessageId=this.createId("msg"),this.accumulatedContent="",this.doneChunk=null}async*streamModelResponse(){const{temperature:e,topP:n,maxTokens:s,metadata:r,modelOptions:i}=this.params,l=this.params.tools?.map(u=>({...u,inputSchema:u.inputSchema?aC(u.inputSchema):void 0,outputSchema:u.outputSchema?aC(u.outputSchema):void 0}));for await(const u of this.adapter.chatStream({model:this.params.model,messages:this.messages,tools:l,temperature:e,topP:n,maxTokens:s,metadata:r,request:this.effectiveRequest,modelOptions:i,systemPrompts:this.systemPrompts}))if(this.isAborted()||(this.totalChunkCount++,yield u,this.handleStreamChunk(u),this.earlyTermination))break}handleStreamChunk(e){switch(e.type){case"content":this.handleContentChunk(e);break;case"tool_call":this.handleToolCallChunk(e);break;case"tool_result":this.handleToolResultChunk(e);break;case"done":this.handleDoneChunk(e);break;case"error":this.handleErrorChunk(e);break;case"thinking":this.handleThinkingChunk(e);break}}handleContentChunk(e){this.accumulatedContent=e.content,Hn.emit("stream:chunk:content",{streamId:this.streamId,messageId:this.currentMessageId||void 0,content:e.content,delta:e.delta,timestamp:Date.now()})}handleToolCallChunk(e){this.toolCallManager.addToolCallChunk(e),Hn.emit("stream:chunk:tool-call",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:e.toolCall.id,toolName:e.toolCall.function.name,index:e.index,arguments:e.toolCall.function.arguments,timestamp:Date.now()})}handleToolResultChunk(e){Hn.emit("stream:chunk:tool-result",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:e.toolCallId,result:e.content,timestamp:Date.now()})}handleDoneChunk(e){if(this.doneChunk?.finishReason==="tool_calls"&&e.finishReason==="stop"){this.lastFinishReason=e.finishReason,Hn.emit("stream:chunk:done",{streamId:this.streamId,messageId:this.currentMessageId||void 0,finishReason:e.finishReason,usage:e.usage,timestamp:Date.now()}),e.usage&&Hn.emit("usage:tokens",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,model:this.params.model,usage:e.usage,timestamp:Date.now()});return}this.doneChunk=e,this.lastFinishReason=e.finishReason,Hn.emit("stream:chunk:done",{streamId:this.streamId,messageId:this.currentMessageId||void 0,finishReason:e.finishReason,usage:e.usage,timestamp:Date.now()}),e.usage&&Hn.emit("usage:tokens",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,model:this.params.model,usage:e.usage,timestamp:Date.now()})}handleErrorChunk(e){Hn.emit("stream:chunk:error",{streamId:this.streamId,messageId:this.currentMessageId||void 0,error:e.error.message,timestamp:Date.now()}),this.earlyTermination=!0,this.shouldEmitStreamEnd=!1}handleThinkingChunk(e){Hn.emit("stream:chunk:thinking",{streamId:this.streamId,messageId:this.currentMessageId||void 0,content:e.content,delta:e.delta,timestamp:Date.now()})}async*checkForPendingToolCalls(){const e=this.getPendingToolCallsFromMessages();if(e.length===0)return"continue";const n=this.createSyntheticDoneChunk();Hn.emit("text:iteration",{requestId:this.requestId,streamId:this.streamId,iterationNumber:this.iterationCount+1,messageCount:this.messages.length,toolCallCount:e.length,timestamp:Date.now()});const{approvals:s,clientToolResults:r}=this.collectClientState(),i=await zM(e,this.tools,s,r);if(i.needsApproval.length>0||i.needsClientExecution.length>0){for(const l of this.emitApprovalRequests(i.needsApproval,n))yield l;for(const l of this.emitClientToolInputs(i.needsClientExecution,n))yield l;return this.shouldEmitStreamEnd=!1,"wait"}const a=this.emitToolResults(i.results,n);for(const l of a)yield l;return"continue"}async*processToolCalls(){if(!this.shouldExecuteToolPhase()){this.setToolPhase("stop");return}const e=this.toolCallManager.getToolCalls(),n=this.doneChunk;if(!n||e.length===0){this.setToolPhase("stop");return}Hn.emit("text:iteration",{requestId:this.requestId,streamId:this.streamId,iterationNumber:this.iterationCount+1,messageCount:this.messages.length,toolCallCount:e.length,timestamp:Date.now()}),this.addAssistantToolCallMessage(e);const{approvals:s,clientToolResults:r}=this.collectClientState(),i=await zM(e,this.tools,s,r);if(i.needsApproval.length>0||i.needsClientExecution.length>0){for(const l of this.emitApprovalRequests(i.needsApproval,n))yield l;for(const l of this.emitClientToolInputs(i.needsClientExecution,n))yield l;this.setToolPhase("wait");return}const a=this.emitToolResults(i.results,n);for(const l of a)yield l;this.toolCallManager.clear(),this.setToolPhase("continue")}shouldExecuteToolPhase(){return this.doneChunk?.finishReason==="tool_calls"&&this.tools.length>0&&this.toolCallManager.hasToolCalls()}addAssistantToolCallMessage(e){this.messages=[...this.messages,{role:"assistant",content:this.accumulatedContent||null,toolCalls:e}]}collectClientState(){const e=new Map,n=new Map;for(const s of this.messages)if(s.role==="assistant"&&s.parts){const r=s.parts;for(const i of r)i.type==="tool-call"&&i.state==="approval-responded"&&i.approval&&e.set(i.approval.id,i.approval.approved),i.type==="tool-call"&&i.output!==void 0&&!i.approval&&n.set(i.id,i.output)}return{approvals:e,clientToolResults:n}}emitApprovalRequests(e,n){const s=[];for(const r of e)Hn.emit("stream:approval-requested",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:r.toolCallId,toolName:r.toolName,input:r.input,approvalId:r.approvalId,timestamp:Date.now()}),s.push({type:"approval-requested",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:r.toolCallId,toolName:r.toolName,input:r.input,approval:{id:r.approvalId,needsApproval:!0}});return s}emitClientToolInputs(e,n){const s=[];for(const r of e)Hn.emit("stream:tool-input-available",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:r.toolCallId,toolName:r.toolName,input:r.input,timestamp:Date.now()}),s.push({type:"tool-input-available",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:r.toolCallId,toolName:r.toolName,input:r.input});return s}emitToolResults(e,n){const s=[];for(const r of e){Hn.emit("tool:call-completed",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:r.toolCallId,toolName:r.toolName,result:r.result,duration:r.duration??0,timestamp:Date.now()});const i=JSON.stringify(r.result),a={type:"tool_result",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:r.toolCallId,content:i};s.push(a),this.messages=[...this.messages,{role:"tool",content:i,toolCallId:r.toolCallId}]}return s}getPendingToolCallsFromMessages(){const e=new Set(this.messages.filter(s=>s.role==="tool"&&s.toolCallId).map(s=>s.toolCallId)),n=[];for(const s of this.messages)if(s.role==="assistant"&&s.toolCalls)for(const r of s.toolCalls)e.has(r.id)||n.push(r);return n}createSyntheticDoneChunk(){return{type:"done",id:this.createId("pending"),model:this.params.model,timestamp:Date.now(),finishReason:"tool_calls"}}shouldContinue(){return this.cyclePhase==="executeToolCalls"?!0:this.loopStrategy({iterationCount:this.iterationCount,messages:this.messages,finishReason:this.lastFinishReason})&&this.toolPhase==="continue"}isAborted(){return!!this.effectiveSignal?.aborted}setToolPhase(e){this.toolPhase=e,e==="wait"&&(this.shouldEmitStreamEnd=!1)}createId(e){return`${e}-${Date.now()}-${Math.random().toString(36).slice(2,9)}`}}function yue(t){const{outputSchema:e,stream:n}=t;return e?bue(t):n===!1?vue(t):P$(t)}async function*P$(t){const{adapter:e,...n}=t,s=e.model,r=new L$({adapter:e,params:{...n,model:s}});for await(const i of r.run())yield i}function vue(t){const e=P$(t);return pue(e)}async function bue(t){const{adapter:e,outputSchema:n,...s}=t,r=e.model;if(!n)throw new Error("outputSchema is required for structured output");const i=new L$({adapter:e,params:{...s,model:r}});for await(const g of i.run());const a=i.getMessages(),{tools:l,agentLoopStrategy:u,...h}=s,m=aC(n);if(!m)throw new Error("Failed to convert output schema to JSON Schema");const p=await e.structuredOutput({chatOptions:{...h,model:r,messages:a},outputSchema:m});return cc(n)?ah(n,p.data):p.data}function yl(t){return{__toolSide:"definition",...t,server(n){return{__toolSide:"server",...t,execute:n}},client(n){return{__toolSide:"client",...t,execute:n}}}}function FM(t){return t===null?"":typeof t=="string"?t:t.filter(e=>e.type==="text").map(e=>e.content).join("")}function _ue(t){const e=[];for(const n of t)"parts"in n?e.push(...B$(n)):e.push(n);return e}function B$(t){const e=[];if(t.role==="system")return e;const n=[],s=[],r=[];for(const l of t.parts)l.type==="text"?n.push(l):l.type==="tool-call"?s.push(l):l.type==="tool-result"&&r.push(l);const i=n.map(l=>l.content).join("")||null,a=s.length>0?s.filter(l=>l.state==="input-complete"||l.state==="approval-responded"||l.output!==void 0).map(l=>({id:l.id,type:"function",function:{name:l.name,arguments:l.arguments}})):void 0;t.role!=="assistant"||i||!a?e.push({role:t.role,content:i,...a&&a.length>0&&{toolCalls:a}}):a.length>0&&e.push({role:"assistant",content:i,toolCalls:a});for(const l of r)(l.state==="complete"||l.state==="error")&&e.push({role:"tool",content:l.content,toolCallId:l.toolCallId});return e}function xue(t,e){const n=[],s=FM(t.content);if(s&&n.push({type:"text",content:s}),t.toolCalls&&t.toolCalls.length>0)for(const r of t.toolCalls)n.push({type:"tool-call",id:r.id,name:r.function.name,arguments:r.function.arguments,state:"input-complete"});return t.role==="tool"&&t.toolCallId&&n.push({type:"tool-result",toolCallId:t.toolCallId,content:FM(t.content),state:"complete"}),{id:e||Rv(),role:t.role==="tool"?"assistant":t.role,parts:n}}function wue(t,e){return"parts"in t?{...t,id:t.id||e(),createdAt:t.createdAt||new Date}:{...xue(t,e()),createdAt:new Date}}function Rv(){return`msg-${Date.now()}-${Math.random().toString(36).substring(7)}`}var Bl={},Qw={},UM;function HM(){return UM||(UM=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.ALL=t.COLLECTION=t.ATOM=t.SPECIAL=t.INF=t._INFINITY=t.INFINITY=t.NAN=t.BOOL=t.NULL=t.OBJ=t.ARR=t.NUM=t.STR=void 0,t.STR=1,t.NUM=2,t.ARR=4,t.OBJ=8,t.NULL=16,t.BOOL=32,t.NAN=64,t.INFINITY=128,t._INFINITY=256,t.INF=t.INFINITY|t._INFINITY,t.SPECIAL=t.NULL|t.BOOL|t.INF|t.NAN,t.ATOM=t.STR|t.NUM|t.SPECIAL,t.COLLECTION=t.ARR|t.OBJ,t.ALL=t.ATOM|t.COLLECTION,t.Allow={STR:t.STR,NUM:t.NUM,ARR:t.ARR,OBJ:t.OBJ,NULL:t.NULL,BOOL:t.BOOL,NAN:t.NAN,INFINITY:t.INFINITY,_INFINITY:t._INFINITY,INF:t.INF,SPECIAL:t.SPECIAL,ATOM:t.ATOM,COLLECTION:t.COLLECTION,ALL:t.ALL},t.default=t.Allow})(Qw)),Qw}var VM;function Sue(){return VM||(VM=1,(function(t){var e=Bl&&Bl.__createBinding||(Object.create?(function(h,m,p,g){g===void 0&&(g=p);var y=Object.getOwnPropertyDescriptor(m,p);(!y||("get"in y?!m.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return m[p]}}),Object.defineProperty(h,g,y)}):(function(h,m,p,g){g===void 0&&(g=p),h[g]=m[p]})),n=Bl&&Bl.__exportStar||function(h,m){for(var p in h)p!=="default"&&!Object.prototype.hasOwnProperty.call(m,p)&&e(m,h,p)};Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.MalformedJSON=t.PartialJSON=t.parseJSON=t.parse=void 0;const s=HM();Object.defineProperty(t,"Allow",{enumerable:!0,get:function(){return s.Allow}}),n(HM(),t);class r extends Error{}t.PartialJSON=r;class i extends Error{}t.MalformedJSON=i;function a(h,m=s.Allow.ALL){if(typeof h!="string")throw new TypeError(`expecting str, got ${typeof h}`);if(!h.trim())throw new Error(`${h} is empty`);return l(h.trim(),m)}t.parseJSON=a;const l=(h,m)=>{const p=h.length;let g=0;const y=R=>{throw new r(`${R} at position ${g}`)},b=R=>{throw new i(`${R} at position ${g}`)},_=()=>(A(),g>=p&&y("Unexpected end of input"),h[g]==='"'?w():h[g]==="{"?k():h[g]==="["?C():h.substring(g,g+4)==="null"||s.Allow.NULL&m&&p-g<4&&"null".startsWith(h.substring(g))?(g+=4,null):h.substring(g,g+4)==="true"||s.Allow.BOOL&m&&p-g<4&&"true".startsWith(h.substring(g))?(g+=4,!0):h.substring(g,g+5)==="false"||s.Allow.BOOL&m&&p-g<5&&"false".startsWith(h.substring(g))?(g+=5,!1):h.substring(g,g+8)==="Infinity"||s.Allow.INFINITY&m&&p-g<8&&"Infinity".startsWith(h.substring(g))?(g+=8,1/0):h.substring(g,g+9)==="-Infinity"||s.Allow._INFINITY&m&&1<p-g&&p-g<9&&"-Infinity".startsWith(h.substring(g))?(g+=9,-1/0):h.substring(g,g+3)==="NaN"||s.Allow.NAN&m&&p-g<3&&"NaN".startsWith(h.substring(g))?(g+=3,NaN):E()),w=()=>{const R=g;let N=!1;for(g++;g<p&&(h[g]!=='"'||N&&h[g-1]==="\\");)N=h[g]==="\\"?!N:!1,g++;if(h.charAt(g)=='"')try{return JSON.parse(h.substring(R,++g-Number(N)))}catch(M){b(String(M))}else if(s.Allow.STR&m)try{return JSON.parse(h.substring(R,g-Number(N))+'"')}catch{return JSON.parse(h.substring(R,h.lastIndexOf("\\"))+'"')}y("Unterminated string literal")},k=()=>{g++,A();const R={};try{for(;h[g]!=="}";){if(A(),g>=p&&s.Allow.OBJ&m)return R;const N=w();A(),g++;try{const M=_();R[N]=M}catch(M){if(s.Allow.OBJ&m)return R;throw M}A(),h[g]===","&&g++}}catch{if(s.Allow.OBJ&m)return R;y("Expected '}' at end of object")}return g++,R},C=()=>{g++;const R=[];try{for(;h[g]!=="]";)R.push(_()),A(),h[g]===","&&g++}catch{if(s.Allow.ARR&m)return R;y("Expected ']' at end of array")}return g++,R},E=()=>{if(g===0){h==="-"&&b("Not sure what '-' is");try{return JSON.parse(h)}catch(N){if(s.Allow.NUM&m)try{return JSON.parse(h.substring(0,h.lastIndexOf("e")))}catch{}b(String(N))}}const R=g;for(h[g]==="-"&&g++;h[g]&&",]}".indexOf(h[g])===-1;)g++;g==p&&!(s.Allow.NUM&m)&&y("Unterminated number literal");try{return JSON.parse(h.substring(R,g))}catch{h.substring(R,g)==="-"&&y("Not sure what '-' is");try{return JSON.parse(h.substring(R,h.lastIndexOf("e")))}catch(M){b(String(M))}}},A=()=>{for(;g<p&&` 
\r	`.includes(h[g]);)g++};return _()},u=a;t.parse=u})(Bl)),Bl}var kue=Sue();class Cue{parse(e){if(!(!e||e.trim()===""))try{return kue.parse(e)}catch{return}}}const Nue=new Cue;function Eue(t,e,n){return t.map(s=>{if(s.id!==e)return s;const r=[...s.parts],i=r.length>0?r[r.length-1]:null;return i&&i.type==="text"?r[r.length-1]={type:"text",content:n}:r.push({type:"text",content:n}),{...s,parts:r}})}function eS(t,e,n){return t.map(s=>{if(s.id!==e)return s;const r=[...s.parts],i=r.findIndex(l=>l.type==="tool-call"&&l.id===n.id),a={type:"tool-call",id:n.id,name:n.name,arguments:n.arguments,state:n.state};return i>=0?r[i]=a:r.push(a),{...s,parts:r}})}function qM(t,e,n,s,r,i){return t.map(a=>{if(a.id!==e)return a;const l=[...a.parts],u=l.findIndex(m=>m.type==="tool-result"&&m.toolCallId===n),h={type:"tool-result",toolCallId:n,content:s,state:r,...i&&{error:i}};return u>=0?l[u]=h:l.push(h),{...a,parts:l}})}function Aue(t,e,n,s){return t.map(r=>{if(r.id!==e)return r;const i=[...r.parts],a=i.find(l=>l.type==="tool-call"&&l.id===n);return a&&(a.state="approval-requested",a.approval={id:s,needsApproval:!0}),{...r,parts:i}})}function Rue(t,e,n,s,r){return t.map(i=>{const a=[...i.parts],l=a.find(u=>u.type==="tool-call"&&u.id===e);return l&&(l.output=r?{error:r}:n,s?l.state=s:l.state="input-complete"),{...i,parts:a}})}function Tue(t,e,n){return t.map(s=>{const r=[...s.parts],i=r.find(a=>a.type==="tool-call"&&a.approval?.id===e);return i&&i.approval&&(i.approval.approved=n,i.state="approval-responded"),{...s,parts:r}})}function jue(t,e,n){return t.map(s=>{if(s.id!==e)return s;const r=[...s.parts],i=r.findIndex(l=>l.type==="thinking"),a={type:"thinking",content:n};return i>=0?r[i]=a:r.push(a),{...s,parts:r}})}class Oue{shouldEmit(e,n){return!0}}class ME{constructor(e={}){this.messages=[],this.currentAssistantMessageId=null,this.totalTextContent="",this.currentSegmentText="",this.lastEmittedText="",this.thinkingContent="",this.toolCalls=new Map,this.toolCallOrder=[],this.finishReason=null,this.isDone=!1,this.hasToolCallsSinceTextStart=!1,this.recording=null,this.recordingStartTime=0,this.chunkStrategy=e.chunkStrategy||new Oue,this.events=e.events||{},this.handlers=e.handlers||{},this.jsonParser=e.jsonParser||Nue,this.recordingEnabled=e.recording??!1,e.initialMessages&&(this.messages=[...e.initialMessages])}setMessages(e){this.messages=[...e],this.emitMessagesChange()}addUserMessage(e){const n={id:Rv(),role:"user",parts:[{type:"text",content:e}],createdAt:new Date};return this.messages=[...this.messages,n],this.emitMessagesChange(),n}startAssistantMessage(){this.resetStreamState();const e={id:Rv(),role:"assistant",parts:[],createdAt:new Date};return this.currentAssistantMessageId=e.id,this.messages=[...this.messages,e],this.events.onStreamStart?.(),this.emitMessagesChange(),e.id}addToolResult(e,n,s){const r=this.messages.find(u=>u.parts.some(h=>h.type==="tool-call"&&h.id===e));if(!r){console.warn(`[StreamProcessor] Could not find message with tool call ${e}`);return}let i=Rue(this.messages,e,n,s?"input-complete":void 0,s);const a=typeof n=="string"?n:JSON.stringify(n),l=s?"error":"complete";i=qM(i,r.id,e,a,l,s),this.messages=i,this.emitMessagesChange()}addToolApprovalResponse(e,n){this.messages=Tue(this.messages,e,n),this.emitMessagesChange()}toModelMessages(){const e=[];for(const n of this.messages)e.push(...B$(n));return e}getMessages(){return this.messages}areAllToolsComplete(){const e=this.messages.findLast(s=>s.role==="assistant");if(!e)return!0;const n=e.parts.filter(s=>s.type==="tool-call");return n.length===0?!0:n.every(s=>s.state==="approval-responded"||s.output!==void 0&&!s.approval)}removeMessagesAfter(e){this.messages=this.messages.slice(0,e+1),this.emitMessagesChange()}clearMessages(){this.messages=[],this.currentAssistantMessageId=null,this.emitMessagesChange()}async process(e){this.resetStreamState(),this.recordingEnabled&&this.startRecording();for await(const n of e)this.processChunk(n);return this.finalizeStream(),this.recording&&(this.recording.result=this.getResult()),this.getResult()}processChunk(e){switch(this.recording&&this.recording.chunks.push({chunk:e,timestamp:Date.now(),index:this.recording.chunks.length}),e.type){case"content":this.handleContentChunk(e);break;case"tool_call":this.handleToolCallChunk(e);break;case"tool_result":this.handleToolResultChunk(e);break;case"done":this.handleDoneChunk(e);break;case"error":this.handleErrorChunk(e);break;case"thinking":this.handleThinkingChunk(e);break;case"approval-requested":this.handleApprovalRequestedChunk(e);break;case"tool-input-available":this.handleToolInputAvailableChunk(e);break}}handleContentChunk(e){this.completeAllToolCalls();const n=this.currentSegmentText;this.hasToolCallsSinceTextStart&&n.length>0&&this.isNewTextSegment(e,n)&&(n!==this.lastEmittedText&&this.emitTextUpdate(),this.currentSegmentText="",this.lastEmittedText="",this.hasToolCallsSinceTextStart=!1);const r=this.currentSegmentText;let i=r;e.delta!==""?i=r+e.delta:e.content!==""&&(e.content.startsWith(r)?i=e.content:r.startsWith(e.content)?i=r:i=r+e.content);const a=i.slice(r.length);this.currentSegmentText=i,this.totalTextContent+=a;const l=e.delta??e.content??"";this.chunkStrategy.shouldEmit(l,this.currentSegmentText)&&this.currentSegmentText!==this.lastEmittedText&&this.emitTextUpdate()}handleToolCallChunk(e){this.hasToolCallsSinceTextStart=!0;const n=e.toolCall.id,s=this.toolCalls.get(n);if(s){const r=s.state==="awaiting-input";s.arguments+=e.toolCall.function.arguments||"",r&&e.toolCall.function.arguments&&(s.state="input-streaming"),s.parsedArguments=this.jsonParser.parse(s.arguments);const i=this.toolCallOrder.indexOf(n);this.handlers.onToolCallStateChange?.(i,s.id,s.name,s.state,s.arguments,s.parsedArguments),e.toolCall.function.arguments&&this.handlers.onToolCallDelta?.(i,e.toolCall.function.arguments),this.currentAssistantMessageId&&(this.messages=eS(this.messages,this.currentAssistantMessageId,{id:s.id,name:s.name,arguments:s.arguments,state:s.state}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,s.id,s.state,s.arguments))}else{const r=e.toolCall.function.arguments?"input-streaming":"awaiting-input",i={id:e.toolCall.id,name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||"",state:r,parsedArguments:void 0,index:e.index};e.toolCall.function.arguments&&(i.parsedArguments=this.jsonParser.parse(e.toolCall.function.arguments)),this.toolCalls.set(n,i),this.toolCallOrder.push(n);const a=this.toolCallOrder.indexOf(n);this.handlers.onToolCallStart?.(a,e.toolCall.id,e.toolCall.function.name),this.handlers.onToolCallStateChange?.(a,e.toolCall.id,e.toolCall.function.name,r,e.toolCall.function.arguments||"",i.parsedArguments),e.toolCall.function.arguments&&this.handlers.onToolCallDelta?.(a,e.toolCall.function.arguments),this.currentAssistantMessageId&&(this.messages=eS(this.messages,this.currentAssistantMessageId,{id:e.toolCall.id,name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||"",state:r}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,e.toolCall.id,r,e.toolCall.function.arguments||""))}}handleToolResultChunk(e){const n="complete";this.handlers.onToolResultStateChange?.(e.toolCallId,e.content,n),this.currentAssistantMessageId&&(this.messages=qM(this.messages,this.currentAssistantMessageId,e.toolCallId,e.content,n),this.emitMessagesChange())}handleDoneChunk(e){this.finishReason=e.finishReason,this.isDone=!0,this.completeAllToolCalls()}handleErrorChunk(e){this.handlers.onError?.(e.error),this.events.onError?.(new Error(e.error.message))}handleThinkingChunk(e){const n=this.thinkingContent;let s=n;e.delta!==""?s=n+e.delta:e.content!==""&&(e.content.startsWith(n)?s=e.content:n.startsWith(e.content)?s=n:s=n+e.content),this.thinkingContent=s,this.handlers.onThinkingUpdate?.(this.thinkingContent),this.currentAssistantMessageId&&(this.messages=jue(this.messages,this.currentAssistantMessageId,this.thinkingContent),this.emitMessagesChange(),this.events.onThinkingUpdate?.(this.currentAssistantMessageId,this.thinkingContent))}handleApprovalRequestedChunk(e){this.handlers.onApprovalRequested?.(e.toolCallId,e.toolName,e.input,e.approval.id),this.currentAssistantMessageId&&(this.messages=Aue(this.messages,this.currentAssistantMessageId,e.toolCallId,e.approval.id),this.emitMessagesChange()),this.events.onApprovalRequest?.({toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,approvalId:e.approval.id})}handleToolInputAvailableChunk(e){this.handlers.onToolInputAvailable?.(e.toolCallId,e.toolName,e.input),this.events.onToolCall?.({toolCallId:e.toolCallId,toolName:e.toolName,input:e.input})}isNewTextSegment(e,n){return e.delta!==void 0&&e.content!==void 0&&(e.content.length<n.length||!e.content.startsWith(n)&&!n.startsWith(e.content))}completeAllToolCalls(){this.toolCalls.forEach((e,n)=>{if(e.state!=="input-complete"){const s=this.toolCallOrder.indexOf(n);this.completeToolCall(s,e)}})}completeToolCall(e,n){n.state="input-complete",n.parsedArguments=this.jsonParser.parse(n.arguments),this.handlers.onToolCallStateChange?.(e,n.id,n.name,"input-complete",n.arguments,n.parsedArguments),this.handlers.onToolCallComplete?.(e,n.id,n.name,n.arguments),this.currentAssistantMessageId&&(this.messages=eS(this.messages,this.currentAssistantMessageId,{id:n.id,name:n.name,arguments:n.arguments,state:"input-complete"}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,n.id,"input-complete",n.arguments))}emitTextUpdate(){this.lastEmittedText=this.currentSegmentText,this.handlers.onTextUpdate?.(this.currentSegmentText),this.currentAssistantMessageId&&(this.messages=Eue(this.messages,this.currentAssistantMessageId,this.currentSegmentText),this.emitMessagesChange(),this.events.onTextUpdate?.(this.currentAssistantMessageId,this.currentSegmentText))}emitMessagesChange(){this.events.onMessagesChange?.([...this.messages])}finalizeStream(){this.completeAllToolCalls(),this.currentSegmentText!==this.lastEmittedText&&this.emitTextUpdate();const e=this.getCompletedToolCalls();if(this.handlers.onStreamEnd?.(this.totalTextContent,e.length>0?e:void 0),this.currentAssistantMessageId){const n=this.messages.find(s=>s.id===this.currentAssistantMessageId);n&&this.events.onStreamEnd?.(n)}}getCompletedToolCalls(){return Array.from(this.toolCalls.values()).filter(e=>e.state==="input-complete").map(e=>({id:e.id,type:"function",function:{name:e.name,arguments:e.arguments}}))}getResult(){const e=this.getCompletedToolCalls();return{content:this.totalTextContent,thinking:this.thinkingContent||void 0,toolCalls:e.length>0?e:void 0,finishReason:this.finishReason}}getState(){return{content:this.totalTextContent,thinking:this.thinkingContent,toolCalls:new Map(this.toolCalls),toolCallOrder:[...this.toolCallOrder],finishReason:this.finishReason,done:this.isDone}}startRecording(){this.recordingEnabled=!0,this.recordingStartTime=Date.now(),this.recording={version:"1.0",timestamp:this.recordingStartTime,chunks:[]}}getRecording(){return this.recording}resetStreamState(){this.totalTextContent="",this.currentSegmentText="",this.lastEmittedText="",this.thinkingContent="",this.toolCalls.clear(),this.toolCallOrder=[],this.finishReason=null,this.isDone=!1,this.hasToolCallsSinceTextStart=!1,this.chunkStrategy.reset?.()}reset(){this.resetStreamState(),this.messages=[],this.currentAssistantMessageId=null}static async replay(e,n){return new ME(n).process(Mue(e))}}function Mue(t){return{async*[Symbol.asyncIterator](){for(const{chunk:e}of t.chunks)yield e}}}class Iue{constructor(e){this.clientId=e}clientCreated(e){this.emitEvent("client:created",{initialMessageCount:e})}loadingChanged(e){this.emitEvent("client:loading-changed",{isLoading:e})}errorChanged(e){this.emitEvent("client:error-changed",{error:e})}textUpdated(e,n,s){this.emitEvent("processor:text-updated",{streamId:e,content:s}),this.emitEvent("client:assistant-message-updated",{messageId:n,content:s})}toolCallStateChanged(e,n,s,r,i,a){this.emitEvent("processor:tool-call-state-changed",{streamId:e,toolCallId:s,toolName:r,state:i,arguments:a}),this.emitEvent("client:tool-call-updated",{messageId:n,toolCallId:s,toolName:r,state:i,arguments:a})}toolResultStateChanged(e,n,s,r,i){this.emitEvent("processor:tool-result-state-changed",{streamId:e,toolCallId:n,content:s,state:r,error:i})}thinkingUpdated(e,n,s,r){this.emitEvent("stream:chunk:thinking",{streamId:e,messageId:n,content:s,delta:r})}approvalRequested(e,n,s,r,i){this.emitEvent("client:approval-requested",{messageId:e,toolCallId:n,toolName:s,input:r,approvalId:i})}messageAppended(e){const n=e.parts.filter(s=>s.type==="text").map(s=>s.content).join(" ").substring(0,100);this.emitEvent("client:message-appended",{messageId:e.id,role:e.role,contentPreview:n})}messageSent(e,n){this.emitEvent("client:message-sent",{messageId:e,content:n})}reloaded(e){this.emitEvent("client:reloaded",{fromMessageIndex:e})}stopped(){this.emitEvent("client:stopped")}messagesCleared(){this.emitEvent("client:messages-cleared")}toolResultAdded(e,n,s,r){this.emitEvent("tool:result-added",{toolCallId:e,toolName:n,output:s,state:r})}toolApprovalResponded(e,n,s){this.emitEvent("tool:approval-responded",{approvalId:e,toolCallId:n,approved:s})}}class Due extends Iue{emitEvent(e,n){e.startsWith("client:")||e.startsWith("tool:")?Hn.emit(e,{...n,clientId:this.clientId,timestamp:Date.now()}):Hn.emit(e,{...n,timestamp:Date.now()})}}class Lue{constructor(e){if(this.body={},this.isLoading=!1,this.error=void 0,this.abortController=null,this.currentStreamId=null,this.currentMessageId=null,this.postStreamActions=[],this.uniqueId=e.id||this.generateUniqueId("chat"),this.body=e.body||{},this.connection=e.connection,this.events=new Due(this.uniqueId),this.clientToolsRef={current:new Map},e.tools)for(const n of e.tools)this.clientToolsRef.current.set(n.name,n);this.callbacksRef={current:{onResponse:e.onResponse||(()=>{}),onChunk:e.onChunk||(()=>{}),onFinish:e.onFinish||(()=>{}),onError:e.onError||(()=>{}),onMessagesChange:e.onMessagesChange||(()=>{}),onLoadingChange:e.onLoadingChange||(()=>{}),onErrorChange:e.onErrorChange||(()=>{})}},this.processor=new ME({chunkStrategy:e.streamProcessor?.chunkStrategy,initialMessages:e.initialMessages,events:{onMessagesChange:n=>{this.callbacksRef.current.onMessagesChange(n)},onStreamStart:()=>{},onStreamEnd:n=>{this.callbacksRef.current.onFinish(n)},onError:n=>{this.setError(n),this.callbacksRef.current.onError(n)},onTextUpdate:(n,s)=>{this.currentStreamId&&this.events.textUpdated(this.currentStreamId,n,s)},onThinkingUpdate:(n,s)=>{this.currentStreamId&&this.events.thinkingUpdated(this.currentStreamId,n,s)},onToolCallStateChange:(n,s,r,i)=>{const h=this.processor.getMessages().find(m=>m.id===n)?.parts.find(m=>m.type==="tool-call"&&m.id===s)?.name||"unknown";this.currentStreamId&&this.events.toolCallStateChanged(this.currentStreamId,n,s,h,r,i)},onToolCall:async n=>{const s=this.clientToolsRef.current.get(n.toolName);if(s?.execute)try{const r=await s.execute(n.input);await this.addToolResult({toolCallId:n.toolCallId,tool:n.toolName,output:r,state:"output-available"})}catch(r){await this.addToolResult({toolCallId:n.toolCallId,tool:n.toolName,output:null,state:"output-error",errorText:r.message})}},onApprovalRequest:n=>{this.events.approvalRequested(this.currentMessageId||"",n.toolCallId,n.toolName,n.input,n.approvalId)}}}),this.events.clientCreated(this.processor.getMessages().length)}generateUniqueId(e){return`${e}-${Date.now()}-${Math.random().toString(36).substring(7)}`}setIsLoading(e){this.isLoading=e,this.callbacksRef.current.onLoadingChange(e),this.events.loadingChanged(e)}setError(e){this.error=e,this.callbacksRef.current.onErrorChange(e),this.events.errorChanged(e?.message||null)}async processStream(e){this.currentStreamId=this.generateUniqueId("stream");const n=this.processor.startAssistantMessage();this.currentMessageId=n;const s={id:n,role:"assistant",parts:[],createdAt:new Date};this.events.messageAppended(s);for await(const a of e)this.callbacksRef.current.onChunk(a),this.processor.processChunk(a),await new Promise(l=>setTimeout(l,0));return this.processor.finalizeStream(),this.currentStreamId=null,this.currentMessageId=null,this.processor.getMessages().find(a=>a.id===n)||{id:n,role:"assistant",parts:[],createdAt:new Date}}async sendMessage(e){if(!e.trim()||this.isLoading)return;const n=this.processor.addUserMessage(e.trim());this.events.messageSent(n.id,e.trim()),await this.streamResponse()}async append(e){const n=wue(e,Rv);if(n.role==="system")return;const s=n;this.events.messageAppended(s);const r=this.processor.getMessages();this.processor.setMessages([...r,s]),await this.streamResponse()}async streamResponse(){this.setIsLoading(!0),this.setError(void 0),this.abortController=new AbortController;try{const e=this.processor.toModelMessages();await this.callbacksRef.current.onResponse();const n={...this.body,conversationId:this.uniqueId},s=this.connection.connect(e,n,this.abortController.signal);await this.processStream(s)}catch(e){if(e instanceof Error){if(e.name==="AbortError")return;this.setError(e),this.callbacksRef.current.onError(e)}}finally{this.abortController=null,this.setIsLoading(!1),await this.drainPostStreamActions()}}async reload(){const e=this.processor.getMessages();if(e.length===0)return;const n=e.findLastIndex(s=>s.role==="user");n!==-1&&(this.events.reloaded(n),this.processor.removeMessagesAfter(n),await this.streamResponse())}stop(){this.abortController&&(this.abortController.abort(),this.abortController=null),this.setIsLoading(!1),this.events.stopped()}clear(){this.processor.clearMessages(),this.setError(void 0),this.events.messagesCleared()}async addToolResult(e){if(this.events.toolResultAdded(e.toolCallId,e.tool,e.output,e.state||"output-available"),this.processor.addToolResult(e.toolCallId,e.output,e.errorText),this.isLoading){this.queuePostStreamAction(()=>this.checkForContinuation());return}await this.checkForContinuation()}async addToolApprovalResponse(e){const n=this.processor.getMessages();let s;for(const r of n){const i=r.parts.find(a=>a.type==="tool-call"&&a.approval?.id===e.id);if(i){s=i.id;break}}if(s&&this.events.toolApprovalResponded(e.id,s,e.approved),this.processor.addToolApprovalResponse(e.id,e.approved),this.isLoading){this.queuePostStreamAction(()=>this.checkForContinuation());return}await this.checkForContinuation()}queuePostStreamAction(e){this.postStreamActions.push(e)}async drainPostStreamActions(){for(;this.postStreamActions.length>0;)await this.postStreamActions.shift()()}async checkForContinuation(){this.shouldAutoSend()&&await this.streamResponse()}shouldAutoSend(){return this.processor.areAllToolsComplete()}getMessages(){return this.processor.getMessages()}getIsLoading(){return this.isLoading}getError(){return this.error}setMessagesManually(e){this.processor.setMessages(e)}updateOptions(e){if(e.connection!==void 0&&(this.connection=e.connection),e.body!==void 0&&(this.body=e.body),e.tools!==void 0){this.clientToolsRef.current=new Map;for(const n of e.tools)this.clientToolsRef.current.set(n.name,n)}e.onResponse!==void 0&&(this.callbacksRef.current.onResponse=e.onResponse),e.onChunk!==void 0&&(this.callbacksRef.current.onChunk=e.onChunk),e.onFinish!==void 0&&(this.callbacksRef.current.onFinish=e.onFinish),e.onError!==void 0&&(this.callbacksRef.current.onError=e.onError)}}function $$(...t){return t}function Pue(t){return{async*connect(e,n){const s=_ue(e);yield*t(s,n)}}}function Bue(t){const e=F.useId(),n=t.id||e,[s,r]=F.useState(t.initialMessages||[]),[i,a]=F.useState(!1),[l,u]=F.useState(void 0),h=F.useRef(t.initialMessages||[]),m=F.useRef(!0);F.useEffect(()=>{h.current=s},[s]);const p=F.useRef(t);p.current=t;const g=F.useMemo(()=>{const R=m.current?t.initialMessages||[]:h.current;return m.current=!1,new Lue({connection:p.current.connection,id:n,initialMessages:R,body:p.current.body,onResponse:p.current.onResponse,onChunk:p.current.onChunk,onFinish:p.current.onFinish,onError:p.current.onError,tools:p.current.tools,streamProcessor:t.streamProcessor,onMessagesChange:N=>{r(N)},onLoadingChange:N=>{a(N)},onErrorChange:N=>{u(N)}})},[n]);F.useEffect(()=>{t.initialMessages&&t.initialMessages.length>0&&s.length===0&&g.setMessagesManually(t.initialMessages)},[]),F.useEffect(()=>()=>{g.stop()},[g]);const y=F.useCallback(async R=>{await g.sendMessage(R)},[g]),b=F.useCallback(async R=>{await g.append(R)},[g]),_=F.useCallback(async()=>{await g.reload()},[g]),w=F.useCallback(()=>{g.stop()},[g]),k=F.useCallback(()=>{g.clear()},[g]),C=F.useCallback(R=>{g.setMessagesManually(R)},[g]),E=F.useCallback(async R=>{await g.addToolResult(R)},[g]),A=F.useCallback(async R=>{await g.addToolApprovalResponse(R)},[g]);return{messages:s,sendMessage:y,append:b,reload:_,stop:w,isLoading:i,error:l,setMessages:C,clear:k,addToolResult:E,addToolApprovalResponse:A}}class $ue{constructor(e={},n){this.kind="text",this.config=e,this.model=n}generateId(){return`${this.name}-${Date.now()}-${Math.random().toString(36).substring(7)}`}}const zue=t=>{if(t.conversation&&t.previous_response_id)throw new Error("Cannot use both 'conversation' and 'previous_response_id' in the same request.")},Fue=t=>{Uue(t),zue(t)},Uue=t=>{const e=t.metadata;if(e&&Object.keys(e).length>16)throw new Error("Metadata cannot have more than 16 key-value pairs.");if(e&&Object.keys(e).some(i=>i.length>64))throw new Error("Metadata keys cannot be longer than 64 characters.");if(e&&Object.values(e).some(i=>i.length>512))throw new Error("Metadata values cannot be longer than 512 characters.")};function oC(t){if(t!==null){if(Array.isArray(t))return t.map(e=>oC(e));if(typeof t=="object"){const e={};for(const[n,s]of Object.entries(t)){const r=oC(s);r!==void 0&&(e[n]=r)}return e}return t}}function Kl(t,e=[]){const n={...t};if(n.type==="object"&&n.properties){const s={...n.properties},r=Object.keys(s);for(const i of r){const a=s[i],l=!e.includes(i);if(a.type==="object"&&a.properties)s[i]=Kl(a,a.required||[]);else if(a.type==="array"&&a.items)s[i]={...a,items:Kl(a.items,a.items.required||[])};else if(a.anyOf)s[i]=Kl(a,a.required||[]);else{if(a.oneOf)throw new Error("oneOf is not supported in OpenAI structured output schemas. Check the supported outputs here: https://platform.openai.com/docs/guides/structured-outputs#supported-types");l&&(a.type&&!Array.isArray(a.type)?s[i]={...a,type:[a.type,"null"]}:Array.isArray(a.type)&&!a.type.includes("null")&&(s[i]={...a,type:[...a.type,"null"]}))}}n.properties=s,n.required=r,n.additionalProperties=!1}if(n.type==="array"&&n.items&&(n.items=Kl(n.items,n.items.required||[])),n.anyOf&&Array.isArray(n.anyOf)&&(n.anyOf=n.anyOf.map(s=>Kl(s,s.required||[]))),n.oneOf)throw new Error("oneOf is not supported in OpenAI structured output schemas. Check the supported outputs here: https://platform.openai.com/docs/guides/structured-outputs#supported-types");return n}function Hue(t){return{type:"apply_patch"}}function Vue(t){return{type:"code_interpreter",container:t.metadata.container}}function que(t){const e=t.metadata;return{type:"computer_use_preview",display_height:e.display_height,display_width:e.display_width,environment:e.environment}}function Kue(t){const e=t.metadata;return{type:"custom",name:e.name,description:e.description,format:e.format}}function Wue(t){const e=t.metadata;return{type:"file_search",vector_store_ids:e.vector_store_ids,max_num_results:e.max_num_results,ranking_options:e.ranking_options,filters:e.filters}}function Gue(t){const e=t.inputSchema??{type:"object",properties:{},required:[]},n=Kl(e,e.required||[]);return n.additionalProperties=!1,{type:"function",name:t.name,description:t.description,parameters:n,strict:!0}}function Yue(t){return{type:"image_generation",...t.metadata}}function Zue(t){return{type:"local_shell"}}function Jue(t){if(!t.server_url&&!t.connector_id)throw new Error("Either server_url or connector_id must be provided.");if(t.connector_id&&t.server_url)throw new Error("Only one of server_url or connector_id can be provided.")}function Xue(t){const n={type:"mcp",...t.metadata};return Jue(n),n}function Que(t){return{type:"shell"}}function ehe(t){const e=t.metadata;return{type:e.type,search_context_size:e.search_context_size,user_location:e.user_location}}function the(t){return t.metadata}function nhe(t){return t.map(e=>{const n=new Set(["apply_patch","code_interpreter","computer_use_preview","file_search","image_generation","local_shell","mcp","shell","web_search_preview","web_search","custom"]),s=e.name;if(n.has(s))switch(s){case"apply_patch":return Hue();case"code_interpreter":return Vue(e);case"computer_use_preview":return que(e);case"file_search":return Wue(e);case"image_generation":return Yue(e);case"local_shell":return Zue();case"mcp":return Xue(e);case"shell":return Que();case"web_search_preview":return ehe(e);case"web_search":return the(e);case"custom":return Kue(e)}return Gue(e)})}function vt(t,e,n,s,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function he(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)}let z$=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return z$=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^n()&15>>+s/4).toString(16))};function lC(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const cC=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class lt extends Error{}class Es extends lt{constructor(e,n,s,r){super(`${Es.makeMessage(e,n,s)}`),this.status=e,this.headers=r,this.requestID=r?.get("x-request-id"),this.error=n;const i=n;this.code=i?.code,this.param=i?.param,this.type=i?.type}static makeMessage(e,n,s){const r=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):s;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,s,r){if(!e||!r)return new c1({message:s,cause:cC(n)});const i=n?.error;return e===400?new F$(e,i,s,r):e===401?new U$(e,i,s,r):e===403?new H$(e,i,s,r):e===404?new V$(e,i,s,r):e===409?new q$(e,i,s,r):e===422?new K$(e,i,s,r):e===429?new W$(e,i,s,r):e>=500?new G$(e,i,s,r):new Es(e,i,s,r)}}class hi extends Es{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class c1 extends Es{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class IE extends c1{constructor({message:e}={}){super({message:e??"Request timed out."})}}class F$ extends Es{}class U$ extends Es{}class H$ extends Es{}class V$ extends Es{}class q$ extends Es{}class K$ extends Es{}class W$ extends Es{}class G$ extends Es{}class Y$ extends lt{constructor(){super("Could not parse response content as the length limit was reached")}}class Z$ extends lt{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Wf extends Error{constructor(e){super(e)}}const she=/^[a-z][a-z0-9+.-]*:/i,rhe=t=>she.test(t);let cr=t=>(cr=Array.isArray,cr(t)),KM=cr;function J$(t){return typeof t!="object"?{}:t??{}}function ihe(t){if(!t)return!0;for(const e in t)return!1;return!0}function ahe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function tS(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const ohe=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new lt(`${t} must be an integer`);if(e<0)throw new lt(`${t} must be a positive integer`);return e},lhe=t=>{try{return JSON.parse(t)}catch{return}},Dm=t=>new Promise(e=>setTimeout(e,t)),$u="6.15.0",che=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function uhe(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const hhe=()=>{const t=uhe();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$u,"X-Stainless-OS":GM(Deno.build.os),"X-Stainless-Arch":WM(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$u,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$u,"X-Stainless-OS":GM(globalThis.process.platform??"unknown"),"X-Stainless-Arch":WM(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=dhe();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$u,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$u,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function dhe(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const s=n.exec(navigator.userAgent);if(s){const r=s[1]||0,i=s[2]||0,a=s[3]||0;return{browser:e,version:`${r}.${i}.${a}`}}}return null}const WM=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",GM=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let YM;const fhe=()=>YM??(YM=hhe());function phe(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function X$(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Q$(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return X$({start(){},async pull(n){const{done:s,value:r}=await e.next();s?n.close():n.enqueue(r)},async cancel(){await e.return?.()}})}function e8(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function mhe(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const ghe=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),t8="RFC3986",n8=t=>String(t),ZM={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:n8},yhe="RFC1738";let uC=(t,e)=>(uC=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),uC(t,e));const Vi=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),nS=1024,vhe=(t,e,n,s,r)=>{if(t.length===0)return t;let i=t;if(typeof t=="symbol"?i=Symbol.prototype.toString.call(t):typeof t!="string"&&(i=String(t)),n==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(l){return"%26%23"+parseInt(l.slice(2),16)+"%3B"});let a="";for(let l=0;l<i.length;l+=nS){const u=i.length>=nS?i.slice(l,l+nS):i,h=[];for(let m=0;m<u.length;++m){let p=u.charCodeAt(m);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||r===yhe&&(p===40||p===41)){h[h.length]=u.charAt(m);continue}if(p<128){h[h.length]=Vi[p];continue}if(p<2048){h[h.length]=Vi[192|p>>6]+Vi[128|p&63];continue}if(p<55296||p>=57344){h[h.length]=Vi[224|p>>12]+Vi[128|p>>6&63]+Vi[128|p&63];continue}m+=1,p=65536+((p&1023)<<10|u.charCodeAt(m)&1023),h[h.length]=Vi[240|p>>18]+Vi[128|p>>12&63]+Vi[128|p>>6&63]+Vi[128|p&63]}a+=h.join("")}return a};function bhe(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function JM(t,e){if(cr(t)){const n=[];for(let s=0;s<t.length;s+=1)n.push(e(t[s]));return n}return e(t)}const s8={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},r8=function(t,e){Array.prototype.push.apply(t,cr(e)?e:[e])};let XM;const Xn={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:vhe,encodeValuesOnly:!1,format:t8,formatter:n8,indices:!1,serializeDate(t){return(XM??(XM=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function _he(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const sS={};function i8(t,e,n,s,r,i,a,l,u,h,m,p,g,y,b,_,w,k){let C=t,E=k,A=0,R=!1;for(;(E=E.get(sS))!==void 0&&!R;){const P=E.get(t);if(A+=1,typeof P<"u"){if(P===A)throw new RangeError("Cyclic object value");R=!0}typeof E.get(sS)>"u"&&(A=0)}if(typeof h=="function"?C=h(e,C):C instanceof Date?C=g?.(C):n==="comma"&&cr(C)&&(C=JM(C,function(P){return P instanceof Date?g?.(P):P})),C===null){if(i)return u&&!_?u(e,Xn.encoder,w,"key",y):e;C=""}if(_he(C)||bhe(C)){if(u){const P=_?e:u(e,Xn.encoder,w,"key",y);return[b?.(P)+"="+b?.(u(C,Xn.encoder,w,"value",y))]}return[b?.(e)+"="+b?.(String(C))]}const N=[];if(typeof C>"u")return N;let M;if(n==="comma"&&cr(C))_&&u&&(C=JM(C,u)),M=[{value:C.length>0?C.join(",")||null:void 0}];else if(cr(h))M=h;else{const P=Object.keys(C);M=m?P.sort(m):P}const I=l?String(e).replace(/\./g,"%2E"):String(e),W=s&&cr(C)&&C.length===1?I+"[]":I;if(r&&cr(C)&&C.length===0)return W+"[]";for(let P=0;P<M.length;++P){const G=M[P],$=typeof G=="object"&&typeof G.value<"u"?G.value:C[G];if(a&&$===null)continue;const U=p&&l?G.replace(/\./g,"%2E"):G,Z=cr(C)?typeof n=="function"?n(W,U):W:W+(p?"."+U:"["+U+"]");k.set(t,A);const K=new WeakMap;K.set(sS,k),r8(N,i8($,Z,n,s,r,i,a,l,n==="comma"&&_&&cr(C)?null:u,h,m,p,g,y,b,_,w,K))}return N}function xhe(t=Xn){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Xn.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=t8;if(typeof t.format<"u"){if(!uC(ZM,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const s=ZM[n];let r=Xn.filter;(typeof t.filter=="function"||cr(t.filter))&&(r=t.filter);let i;if(t.arrayFormat&&t.arrayFormat in s8?i=t.arrayFormat:"indices"in t?i=t.indices?"indices":"repeat":i=Xn.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const a=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Xn.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Xn.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Xn.allowEmptyArrays,arrayFormat:i,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Xn.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Xn.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Xn.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Xn.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Xn.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Xn.encodeValuesOnly,filter:r,format:n,formatter:s,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Xn.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Xn.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Xn.strictNullHandling}}function whe(t,e={}){let n=t;const s=xhe(e);let r,i;typeof s.filter=="function"?(i=s.filter,n=i("",n)):cr(s.filter)&&(i=s.filter,r=i);const a=[];if(typeof n!="object"||n===null)return"";const l=s8[s.arrayFormat],u=l==="comma"&&s.commaRoundTrip;r||(r=Object.keys(n)),s.sort&&r.sort(s.sort);const h=new WeakMap;for(let g=0;g<r.length;++g){const y=r[g];s.skipNulls&&n[y]===null||r8(a,i8(n[y],y,l,u,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,h))}const m=a.join(s.delimiter);let p=s.addQueryPrefix===!0?"?":"";return s.charsetSentinel&&(s.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),m.length>0?p+m:""}function She(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let s=0;for(const r of t)n.set(r,s),s+=r.length;return n}let QM;function DE(t){let e;return(QM??(e=new globalThis.TextEncoder,QM=e.encode.bind(e)))(t)}let eI;function tI(t){let e;return(eI??(e=new globalThis.TextDecoder,eI=e.decode.bind(e)))(t)}var Er,Ar;class u1{constructor(){Er.set(this,void 0),Ar.set(this,void 0),vt(this,Er,new Uint8Array),vt(this,Ar,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?DE(e):e;vt(this,Er,She([he(this,Er,"f"),n]));const s=[];let r;for(;(r=khe(he(this,Er,"f"),he(this,Ar,"f")))!=null;){if(r.carriage&&he(this,Ar,"f")==null){vt(this,Ar,r.index);continue}if(he(this,Ar,"f")!=null&&(r.index!==he(this,Ar,"f")+1||r.carriage)){s.push(tI(he(this,Er,"f").subarray(0,he(this,Ar,"f")-1))),vt(this,Er,he(this,Er,"f").subarray(he(this,Ar,"f"))),vt(this,Ar,null);continue}const i=he(this,Ar,"f")!==null?r.preceding-1:r.preceding,a=tI(he(this,Er,"f").subarray(0,i));s.push(a),vt(this,Er,he(this,Er,"f").subarray(r.index)),vt(this,Ar,null)}return s}flush(){return he(this,Er,"f").length?this.decode(`
`):[]}}Er=new WeakMap,Ar=new WeakMap;u1.NEWLINE_CHARS=new Set([`
`,"\r"]);u1.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function khe(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function Che(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}const Tv={off:0,error:200,warn:300,info:400,debug:500},nI=(t,e,n)=>{if(t){if(ahe(Tv,t))return t;gs(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Tv))}`)}};function Gf(){}function M0(t,e,n){return!e||Tv[t]>Tv[n]?Gf:e[t].bind(e)}const Nhe={error:Gf,warn:Gf,info:Gf,debug:Gf};let sI=new WeakMap;function gs(t){const e=t.logger,n=t.logLevel??"off";if(!e)return Nhe;const s=sI.get(e);if(s&&s[0]===n)return s[1];const r={error:M0("error",e,n),warn:M0("warn",e,n),info:M0("info",e,n),debug:M0("debug",e,n)};return sI.set(e,[n,r]),r}const Hl=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var df;class Zi{constructor(e,n,s){this.iterator=e,df.set(this,void 0),this.controller=n,vt(this,df,s)}static fromSSEResponse(e,n,s){let r=!1;const i=s?gs(s):console;async function*a(){if(r)throw new lt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let l=!1;try{for await(const u of Ehe(e,n))if(!l){if(u.data.startsWith("[DONE]")){l=!0;continue}if(u.event===null||!u.event.startsWith("thread.")){let h;try{h=JSON.parse(u.data)}catch(m){throw i.error("Could not parse message into JSON:",u.data),i.error("From chunk:",u.raw),m}if(h&&h.error)throw new Es(void 0,h.error,void 0,e.headers);yield h}else{let h;try{h=JSON.parse(u.data)}catch(m){throw console.error("Could not parse message into JSON:",u.data),console.error("From chunk:",u.raw),m}if(u.event=="error")throw new Es(void 0,h.error,h.message,void 0);yield{event:u.event,data:h}}}l=!0}catch(u){if(lC(u))return;throw u}finally{l||n.abort()}}return new Zi(a,n,s)}static fromReadableStream(e,n,s){let r=!1;async function*i(){const l=new u1,u=e8(e);for await(const h of u)for(const m of l.decode(h))yield m;for(const h of l.flush())yield h}async function*a(){if(r)throw new lt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let l=!1;try{for await(const u of i())l||u&&(yield JSON.parse(u));l=!0}catch(u){if(lC(u))return;throw u}finally{l||n.abort()}}return new Zi(a,n,s)}[(df=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],s=this.iterator(),r=i=>({next:()=>{if(i.length===0){const a=s.next();e.push(a),n.push(a)}return i.shift()}});return[new Zi(()=>r(e),this.controller,he(this,df,"f")),new Zi(()=>r(n),this.controller,he(this,df,"f"))]}toReadableStream(){const e=this;let n;return X$({async start(){n=e[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:i}=await n.next();if(i)return s.close();const a=DE(JSON.stringify(r)+`
`);s.enqueue(a)}catch(r){s.error(r)}},async cancel(){await n.return?.()}})}}async function*Ehe(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new lt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new lt("Attempted to iterate over a response with no body");const n=new Rhe,s=new u1,r=e8(t.body);for await(const i of Ahe(r))for(const a of s.decode(i)){const l=n.decode(a);l&&(yield l)}for(const i of s.flush()){const a=n.decode(i);a&&(yield a)}}async function*Ahe(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const s=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?DE(n):n;let r=new Uint8Array(e.length+s.length);r.set(e),r.set(s,e.length),e=r;let i;for(;(i=Che(e))!==-1;)yield e.slice(0,i),e=e.slice(i)}e.length>0&&(yield e)}class Rhe{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,s,r]=The(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function The(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function a8(t,e){const{response:n,requestLogID:s,retryOfRequestLogID:r,startTime:i}=e,a=await(async()=>{if(e.options.stream)return gs(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Zi.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const u=n.headers.get("content-type")?.split(";")[0]?.trim();if(u?.includes("application/json")||u?.endsWith("+json")){const p=await n.json();return o8(p,n)}return await n.text()})();return gs(t).debug(`[${s}] response parsed`,Hl({retryOfRequestLogID:r,url:n.url,status:n.status,body:a,durationMs:Date.now()-i})),a}function o8(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var Yf;class h1 extends Promise{constructor(e,n,s=a8){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=s,Yf.set(this,void 0),vt(this,Yf,e)}_thenUnwrap(e){return new h1(he(this,Yf,"f"),this.responsePromise,async(n,s)=>o8(e(await this.parseResponse(n,s),s),s.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(he(this,Yf,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}Yf=new WeakMap;var I0;class LE{constructor(e,n,s,r){I0.set(this,void 0),vt(this,I0,e),this.options=r,this.response=n,this.body=s}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new lt("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await he(this,I0,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(I0=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class jhe extends h1{constructor(e,n,s){super(e,n,async(r,i)=>new s(r,i.response,await a8(r,i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class d1 extends LE{constructor(e,n,s,r){super(e,n,s,r),this.data=s.data||[],this.object=s.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class Wn extends LE{constructor(e,n,s,r){super(e,n,s,r),this.data=s.data||[],this.has_more=s.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),n=e[e.length-1]?.id;return n?{...this.options,query:{...J$(this.options.query),after:n}}:null}}class jv extends LE{constructor(e,n,s,r){super(e,n,s,r),this.data=s.data||[],this.has_more=s.has_more||!1,this.last_id=s.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...J$(this.options.query),after:e}}:null}}const l8=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function _p(t,e,n){return l8(),new File(t,e??"unknown_file",n)}function ly(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const PE=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",rI=async(t,e)=>hC(t.body)?{...t,body:await c8(t.body,e)}:t,Tc=async(t,e)=>({...t,body:await c8(t.body,e)}),iI=new WeakMap;function Ohe(t){const e=typeof t=="function"?t:t.fetch,n=iI.get(e);if(n)return n;const s=(async()=>{try{const r="Response"in e?e.Response:(await e("data:,")).constructor,i=new FormData;return i.toString()!==await new r(i).text()}catch{return!0}})();return iI.set(e,s),s}const c8=async(t,e)=>{if(!await Ohe(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([s,r])=>dC(n,s,r))),n},u8=t=>t instanceof Blob&&"name"in t,Mhe=t=>typeof t=="object"&&t!==null&&(t instanceof Response||PE(t)||u8(t)),hC=t=>{if(Mhe(t))return!0;if(Array.isArray(t))return t.some(hC);if(t&&typeof t=="object"){for(const e in t)if(hC(t[e]))return!0}return!1},dC=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,_p([await n.blob()],ly(n)));else if(PE(n))t.append(e,_p([await new Response(Q$(n)).blob()],ly(n)));else if(u8(n))t.append(e,n,ly(n));else if(Array.isArray(n))await Promise.all(n.map(s=>dC(t,e+"[]",s)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([s,r])=>dC(t,`${e}[${s}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},h8=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Ihe=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&h8(t),Dhe=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Lhe(t,e,n){if(l8(),t=await t,Ihe(t))return t instanceof File?t:_p([await t.arrayBuffer()],t.name);if(Dhe(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),_p(await fC(r),e,n)}const s=await fC(t);if(e||(e=ly(t)),!n?.type){const r=s.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof r=="string"&&(n={...n,type:r})}return _p(s,e,n)}async function fC(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(h8(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(PE(t))for await(const n of t)e.push(...await fC(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${Phe(t)}`)}return e}function Phe(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class it{constructor(e){this._client=e}}function d8(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const aI=Object.freeze(Object.create(null)),Bhe=(t=d8)=>function(n,...s){if(n.length===1)return n[0];let r=!1;const i=[],a=n.reduce((m,p,g)=>{/[?#]/.test(p)&&(r=!0);const y=s[g];let b=(r?encodeURIComponent:t)(""+y);return g!==s.length&&(y==null||typeof y=="object"&&y.toString===Object.getPrototypeOf(Object.getPrototypeOf(y.hasOwnProperty??aI)??aI)?.toString)&&(b=y+"",i.push({start:m.length+p.length,length:b.length,error:`Value of type ${Object.prototype.toString.call(y).slice(8,-1)} is not a valid path parameter`})),m+p+(g===s.length?"":b)},""),l=a.split(/[?#]/,1)[0],u=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=u.exec(l))!==null;)i.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(i.sort((m,p)=>m.start-p.start),i.length>0){let m=0;const p=i.reduce((g,y)=>{const b=" ".repeat(y.start-m),_="^".repeat(y.length);return m=y.start+y.length,g+b+_},"");throw new lt(`Path parameters result in path with invalid segments:
${i.map(g=>g.error).join(`
`)}
${a}
${p}`)}return a},Ce=Bhe(d8);let f8=class extends it{list(e,n={},s){return this._client.getAPIList(Ce`/chat/completions/${e}/messages`,Wn,{query:n,...s})}};function Ov(t){return t!==void 0&&"function"in t&&t.function!==void 0}function BE(t){return t?.$brand==="auto-parseable-response-format"}function Lm(t){return t?.$brand==="auto-parseable-tool"}function $he(t,e){return!e||!p8(e)?{...t,choices:t.choices.map(n=>(m8(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:$E(t,e)}function $E(t,e){const n=t.choices.map(s=>{if(s.finish_reason==="length")throw new Y$;if(s.finish_reason==="content_filter")throw new Z$;return m8(s.message.tool_calls),{...s,message:{...s.message,...s.message.tool_calls?{tool_calls:s.message.tool_calls?.map(r=>Fhe(e,r))??void 0}:void 0,parsed:s.message.content&&!s.message.refusal?zhe(e,s.message.content):null}}});return{...t,choices:n}}function zhe(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function Fhe(t,e){const n=t.tools?.find(s=>Ov(s)&&s.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:Lm(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function Uhe(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const n=t.tools?.find(s=>Ov(s)&&s.function?.name===e.function.name);return Ov(n)&&(Lm(n)||n?.function.strict||!1)}function p8(t){return BE(t.response_format)?!0:t.tools?.some(e=>Lm(e)||e.type==="function"&&e.function.strict===!0)??!1}function m8(t){for(const e of t||[])if(e.type!=="function")throw new lt(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function Hhe(t){for(const e of t??[]){if(e.type!=="function")throw new lt(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new lt(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Mv=t=>t?.role==="assistant",g8=t=>t?.role==="tool";var pC,cy,uy,Zf,Jf,hy,Xf,Ba,Qf,Iv,Dv,zu,y8;class zE{constructor(){pC.add(this),this.controller=new AbortController,cy.set(this,void 0),uy.set(this,()=>{}),Zf.set(this,()=>{}),Jf.set(this,void 0),hy.set(this,()=>{}),Xf.set(this,()=>{}),Ba.set(this,{}),Qf.set(this,!1),Iv.set(this,!1),Dv.set(this,!1),zu.set(this,!1),vt(this,cy,new Promise((e,n)=>{vt(this,uy,e,"f"),vt(this,Zf,n,"f")})),vt(this,Jf,new Promise((e,n)=>{vt(this,hy,e,"f"),vt(this,Xf,n,"f")})),he(this,cy,"f").catch(()=>{}),he(this,Jf,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},he(this,pC,"m",y8).bind(this))},0)}_connected(){this.ended||(he(this,uy,"f").call(this),this._emit("connect"))}get ended(){return he(this,Qf,"f")}get errored(){return he(this,Iv,"f")}get aborted(){return he(this,Dv,"f")}abort(){this.controller.abort()}on(e,n){return(he(this,Ba,"f")[e]||(he(this,Ba,"f")[e]=[])).push({listener:n}),this}off(e,n){const s=he(this,Ba,"f")[e];if(!s)return this;const r=s.findIndex(i=>i.listener===n);return r>=0&&s.splice(r,1),this}once(e,n){return(he(this,Ba,"f")[e]||(he(this,Ba,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,s)=>{vt(this,zu,!0),e!=="error"&&this.once("error",s),this.once(e,n)})}async done(){vt(this,zu,!0),await he(this,Jf,"f")}_emit(e,...n){if(he(this,Qf,"f"))return;e==="end"&&(vt(this,Qf,!0),he(this,hy,"f").call(this));const s=he(this,Ba,"f")[e];if(s&&(he(this,Ba,"f")[e]=s.filter(r=>!r.once),s.forEach(({listener:r})=>r(...n))),e==="abort"){const r=n[0];!he(this,zu,"f")&&!s?.length&&Promise.reject(r),he(this,Zf,"f").call(this,r),he(this,Xf,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=n[0];!he(this,zu,"f")&&!s?.length&&Promise.reject(r),he(this,Zf,"f").call(this,r),he(this,Xf,"f").call(this,r),this._emit("end")}}_emitFinal(){}}cy=new WeakMap,uy=new WeakMap,Zf=new WeakMap,Jf=new WeakMap,hy=new WeakMap,Xf=new WeakMap,Ba=new WeakMap,Qf=new WeakMap,Iv=new WeakMap,Dv=new WeakMap,zu=new WeakMap,pC=new WeakSet,y8=function(e){if(vt(this,Iv,!0),e instanceof Error&&e.name==="AbortError"&&(e=new hi),e instanceof hi)return vt(this,Dv,!0),this._emit("abort",e);if(e instanceof lt)return this._emit("error",e);if(e instanceof Error){const n=new lt(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new lt(String(e)))};function Vhe(t){return typeof t.parse=="function"}var zs,mC,Lv,gC,yC,vC,v8,b8;const qhe=10;class _8 extends zE{constructor(){super(...arguments),zs.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),g8(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Mv(e)&&e.tool_calls)for(const s of e.tool_calls)s.type==="function"&&this._emit("functionToolCall",s.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new lt("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),he(this,zs,"m",mC).call(this)}async finalMessage(){return await this.done(),he(this,zs,"m",Lv).call(this)}async finalFunctionToolCall(){return await this.done(),he(this,zs,"m",gC).call(this)}async finalFunctionToolCallResult(){return await this.done(),he(this,zs,"m",yC).call(this)}async totalUsage(){return await this.done(),he(this,zs,"m",vC).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=he(this,zs,"m",Lv).call(this);n&&this._emit("finalMessage",n);const s=he(this,zs,"m",mC).call(this);s&&this._emit("finalContent",s);const r=he(this,zs,"m",gC).call(this);r&&this._emit("finalFunctionToolCall",r);const i=he(this,zs,"m",yC).call(this);i!=null&&this._emit("finalFunctionToolCallResult",i),this._chatCompletions.some(a=>a.usage)&&this._emit("totalUsage",he(this,zs,"m",vC).call(this))}async _createChatCompletion(e,n,s){const r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),he(this,zs,"m",v8).call(this,n);const i=await e.chat.completions.create({...n,stream:!1},{...s,signal:this.controller.signal});return this._connected(),this._addChatCompletion($E(i,n))}async _runChatCompletion(e,n,s){for(const r of n.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,n,s)}async _runTools(e,n,s){const r="tool",{tool_choice:i="auto",stream:a,...l}=n,u=typeof i!="string"&&i.type==="function"&&i?.function?.name,{maxChatCompletions:h=qhe}=s||{},m=n.tools.map(y=>{if(Lm(y)){if(!y.$callback)throw new lt("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:y.$callback,name:y.function.name,description:y.function.description||"",parameters:y.function.parameters,parse:y.$parseRaw,strict:!0}}}return y}),p={};for(const y of m)y.type==="function"&&(p[y.function.name||y.function.function.name]=y.function);const g="tools"in n?m.map(y=>y.type==="function"?{type:"function",function:{name:y.function.name||y.function.function.name,parameters:y.function.parameters,description:y.function.description,strict:y.function.strict}}:y):void 0;for(const y of n.messages)this._addMessage(y,!1);for(let y=0;y<h;++y){const _=(await this._createChatCompletion(e,{...l,tool_choice:i,tools:g,messages:[...this.messages]},s)).choices[0]?.message;if(!_)throw new lt("missing message in ChatCompletion response");if(!_.tool_calls?.length)return;for(const w of _.tool_calls){if(w.type!=="function")continue;const k=w.id,{name:C,arguments:E}=w.function,A=p[C];if(A){if(u&&u!==C){const I=`Invalid tool_call: ${JSON.stringify(C)}. ${JSON.stringify(u)} requested. Please try again`;this._addMessage({role:r,tool_call_id:k,content:I});continue}}else{const I=`Invalid tool_call: ${JSON.stringify(C)}. Available options are: ${Object.keys(p).map(W=>JSON.stringify(W)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:k,content:I});continue}let R;try{R=Vhe(A)?await A.parse(E):E}catch(I){const W=I instanceof Error?I.message:String(I);this._addMessage({role:r,tool_call_id:k,content:W});continue}const N=await A.function(R,this),M=he(this,zs,"m",b8).call(this,N);if(this._addMessage({role:r,tool_call_id:k,content:M}),u)return}}}}zs=new WeakSet,mC=function(){return he(this,zs,"m",Lv).call(this).content??null},Lv=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Mv(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new lt("stream ended without producing a ChatCompletionMessage with role=assistant")},gC=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(Mv(n)&&n?.tool_calls?.length)return n.tool_calls.filter(s=>s.type==="function").at(-1)?.function}},yC=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(g8(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(s=>s.role==="assistant"&&s.tool_calls?.some(r=>r.type==="function"&&r.id===n.tool_call_id)))return n.content}},vC=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},v8=function(e){if(e.n!=null&&e.n>1)throw new lt("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},b8=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class FE extends _8{static runTools(e,n,s){const r=new FE,i={...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,n,i)),r}_addMessage(e,n=!0){super._addMessage(e,n),Mv(e)&&e.content&&this._emit("content",e.content)}}const x8=1,w8=2,S8=4,k8=8,C8=16,N8=32,E8=64,A8=128,R8=256,T8=A8|R8,j8=C8|N8|T8|E8,O8=x8|w8|j8,M8=S8|k8,Khe=O8|M8,as={STR:x8,NUM:w8,ARR:S8,OBJ:k8,NULL:C8,BOOL:N8,NAN:E8,INFINITY:A8,MINUS_INFINITY:R8,INF:T8,SPECIAL:j8,ATOM:O8,COLLECTION:M8,ALL:Khe};class Whe extends Error{}class Ghe extends Error{}function Yhe(t,e=as.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return Zhe(t.trim(),e)}const Zhe=(t,e)=>{const n=t.length;let s=0;const r=g=>{throw new Whe(`${g} at position ${s}`)},i=g=>{throw new Ghe(`${g} at position ${s}`)},a=()=>(p(),s>=n&&r("Unexpected end of input"),t[s]==='"'?l():t[s]==="{"?u():t[s]==="["?h():t.substring(s,s+4)==="null"||as.NULL&e&&n-s<4&&"null".startsWith(t.substring(s))?(s+=4,null):t.substring(s,s+4)==="true"||as.BOOL&e&&n-s<4&&"true".startsWith(t.substring(s))?(s+=4,!0):t.substring(s,s+5)==="false"||as.BOOL&e&&n-s<5&&"false".startsWith(t.substring(s))?(s+=5,!1):t.substring(s,s+8)==="Infinity"||as.INFINITY&e&&n-s<8&&"Infinity".startsWith(t.substring(s))?(s+=8,1/0):t.substring(s,s+9)==="-Infinity"||as.MINUS_INFINITY&e&&1<n-s&&n-s<9&&"-Infinity".startsWith(t.substring(s))?(s+=9,-1/0):t.substring(s,s+3)==="NaN"||as.NAN&e&&n-s<3&&"NaN".startsWith(t.substring(s))?(s+=3,NaN):m()),l=()=>{const g=s;let y=!1;for(s++;s<n&&(t[s]!=='"'||y&&t[s-1]==="\\");)y=t[s]==="\\"?!y:!1,s++;if(t.charAt(s)=='"')try{return JSON.parse(t.substring(g,++s-Number(y)))}catch(b){i(String(b))}else if(as.STR&e)try{return JSON.parse(t.substring(g,s-Number(y))+'"')}catch{return JSON.parse(t.substring(g,t.lastIndexOf("\\"))+'"')}r("Unterminated string literal")},u=()=>{s++,p();const g={};try{for(;t[s]!=="}";){if(p(),s>=n&&as.OBJ&e)return g;const y=l();p(),s++;try{const b=a();Object.defineProperty(g,y,{value:b,writable:!0,enumerable:!0,configurable:!0})}catch(b){if(as.OBJ&e)return g;throw b}p(),t[s]===","&&s++}}catch{if(as.OBJ&e)return g;r("Expected '}' at end of object")}return s++,g},h=()=>{s++;const g=[];try{for(;t[s]!=="]";)g.push(a()),p(),t[s]===","&&s++}catch{if(as.ARR&e)return g;r("Expected ']' at end of array")}return s++,g},m=()=>{if(s===0){t==="-"&&as.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(t)}catch(y){if(as.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}i(String(y))}}const g=s;for(t[s]==="-"&&s++;t[s]&&!",]}".includes(t[s]);)s++;s==n&&!(as.NUM&e)&&r("Unterminated number literal");try{return JSON.parse(t.substring(g,s))}catch{t.substring(g,s)==="-"&&as.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(t.substring(g,t.lastIndexOf("e")))}catch(b){i(String(b))}}},p=()=>{for(;s<n&&` 
\r	`.includes(t[s]);)s++};return a()},oI=t=>Yhe(t,as.ALL^as.NUM);var Jn,La,Tu,Bo,rS,D0,iS,aS,oS,L0,lS,lI;class Qp extends _8{constructor(e){super(),Jn.add(this),La.set(this,void 0),Tu.set(this,void 0),Bo.set(this,void 0),vt(this,La,e),vt(this,Tu,[])}get currentChatCompletionSnapshot(){return he(this,Bo,"f")}static fromReadableStream(e){const n=new Qp(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,s){const r=new Qp(n);return r._run(()=>r._runChatCompletion(e,{...n,stream:!0},{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,n,s){super._createChatCompletion;const r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),he(this,Jn,"m",rS).call(this);const i=await e.chat.completions.create({...n,stream:!0},{...s,signal:this.controller.signal});this._connected();for await(const a of i)he(this,Jn,"m",iS).call(this,a);if(i.controller.signal?.aborted)throw new hi;return this._addChatCompletion(he(this,Jn,"m",L0).call(this))}async _fromReadableStream(e,n){const s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),he(this,Jn,"m",rS).call(this),this._connected();const r=Zi.fromReadableStream(e,this.controller);let i;for await(const a of r)i&&i!==a.id&&this._addChatCompletion(he(this,Jn,"m",L0).call(this)),he(this,Jn,"m",iS).call(this,a),i=a.id;if(r.controller.signal?.aborted)throw new hi;return this._addChatCompletion(he(this,Jn,"m",L0).call(this))}[(La=new WeakMap,Tu=new WeakMap,Bo=new WeakMap,Jn=new WeakSet,rS=function(){this.ended||vt(this,Bo,void 0)},D0=function(n){let s=he(this,Tu,"f")[n.index];return s||(s={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},he(this,Tu,"f")[n.index]=s,s)},iS=function(n){if(this.ended)return;const s=he(this,Jn,"m",lI).call(this,n);this._emit("chunk",n,s);for(const r of n.choices){const i=s.choices[r.index];r.delta.content!=null&&i.message?.role==="assistant"&&i.message?.content&&(this._emit("content",r.delta.content,i.message.content),this._emit("content.delta",{delta:r.delta.content,snapshot:i.message.content,parsed:i.message.parsed})),r.delta.refusal!=null&&i.message?.role==="assistant"&&i.message?.refusal&&this._emit("refusal.delta",{delta:r.delta.refusal,snapshot:i.message.refusal}),r.logprobs?.content!=null&&i.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:r.logprobs?.content,snapshot:i.logprobs?.content??[]}),r.logprobs?.refusal!=null&&i.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:r.logprobs?.refusal,snapshot:i.logprobs?.refusal??[]});const a=he(this,Jn,"m",D0).call(this,i);i.finish_reason&&(he(this,Jn,"m",oS).call(this,i),a.current_tool_call_index!=null&&he(this,Jn,"m",aS).call(this,i,a.current_tool_call_index));for(const l of r.delta.tool_calls??[])a.current_tool_call_index!==l.index&&(he(this,Jn,"m",oS).call(this,i),a.current_tool_call_index!=null&&he(this,Jn,"m",aS).call(this,i,a.current_tool_call_index)),a.current_tool_call_index=l.index;for(const l of r.delta.tool_calls??[]){const u=i.message.tool_calls?.[l.index];u?.type&&(u?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:u.function?.name,index:l.index,arguments:u.function.arguments,parsed_arguments:u.function.parsed_arguments,arguments_delta:l.function?.arguments??""}):(u?.type,void 0))}}},aS=function(n,s){if(he(this,Jn,"m",D0).call(this,n).done_tool_calls.has(s))return;const i=n.message.tool_calls?.[s];if(!i)throw new Error("no tool call snapshot");if(!i.type)throw new Error("tool call snapshot missing `type`");if(i.type==="function"){const a=he(this,La,"f")?.tools?.find(l=>Ov(l)&&l.function.name===i.function.name);this._emit("tool_calls.function.arguments.done",{name:i.function.name,index:s,arguments:i.function.arguments,parsed_arguments:Lm(a)?a.$parseRaw(i.function.arguments):a?.function.strict?JSON.parse(i.function.arguments):null})}else i.type},oS=function(n){const s=he(this,Jn,"m",D0).call(this,n);if(n.message.content&&!s.content_done){s.content_done=!0;const r=he(this,Jn,"m",lS).call(this);this._emit("content.done",{content:n.message.content,parsed:r?r.$parseRaw(n.message.content):null})}n.message.refusal&&!s.refusal_done&&(s.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!s.logprobs_content_done&&(s.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!s.logprobs_refusal_done&&(s.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},L0=function(){if(this.ended)throw new lt("stream has ended, this shouldn't happen");const n=he(this,Bo,"f");if(!n)throw new lt("request ended without sending any chunks");return vt(this,Bo,void 0),vt(this,Tu,[]),Jhe(n,he(this,La,"f"))},lS=function(){const n=he(this,La,"f")?.response_format;return BE(n)?n:null},lI=function(n){var s,r,i,a;let l=he(this,Bo,"f");const{choices:u,...h}=n;l?Object.assign(l,h):l=vt(this,Bo,{...h,choices:[]});for(const{delta:m,finish_reason:p,index:g,logprobs:y=null,...b}of n.choices){let _=l.choices[g];if(_||(_=l.choices[g]={finish_reason:p,index:g,message:{},logprobs:y,...b}),y)if(!_.logprobs)_.logprobs=Object.assign({},y);else{const{content:N,refusal:M,...I}=y;Object.assign(_.logprobs,I),N&&((s=_.logprobs).content??(s.content=[]),_.logprobs.content.push(...N)),M&&((r=_.logprobs).refusal??(r.refusal=[]),_.logprobs.refusal.push(...M))}if(p&&(_.finish_reason=p,he(this,La,"f")&&p8(he(this,La,"f")))){if(p==="length")throw new Y$;if(p==="content_filter")throw new Z$}if(Object.assign(_,b),!m)continue;const{content:w,refusal:k,function_call:C,role:E,tool_calls:A,...R}=m;if(Object.assign(_.message,R),k&&(_.message.refusal=(_.message.refusal||"")+k),E&&(_.message.role=E),C&&(_.message.function_call?(C.name&&(_.message.function_call.name=C.name),C.arguments&&((i=_.message.function_call).arguments??(i.arguments=""),_.message.function_call.arguments+=C.arguments)):_.message.function_call=C),w&&(_.message.content=(_.message.content||"")+w,!_.message.refusal&&he(this,Jn,"m",lS).call(this)&&(_.message.parsed=oI(_.message.content))),A){_.message.tool_calls||(_.message.tool_calls=[]);for(const{index:N,id:M,type:I,function:W,...P}of A){const G=(a=_.message.tool_calls)[N]??(a[N]={});Object.assign(G,P),M&&(G.id=M),I&&(G.type=I),W&&(G.function??(G.function={name:W.name??"",arguments:""})),W?.name&&(G.function.name=W.name),W?.arguments&&(G.function.arguments+=W.arguments,Uhe(he(this,La,"f"),G)&&(G.function.parsed_arguments=oI(G.function.arguments)))}}}return l},Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("chunk",r=>{const i=n.shift();i?i.resolve(r):e.push(r)}),this.on("end",()=>{s=!0;for(const r of n)r.resolve(void 0);n.length=0}),this.on("abort",r=>{s=!0;for(const i of n)i.reject(r);n.length=0}),this.on("error",r=>{s=!0;for(const i of n)i.reject(r);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((i,a)=>n.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Zi(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Jhe(t,e){const{id:n,choices:s,created:r,model:i,system_fingerprint:a,...l}=t,u={...l,id:n,choices:s.map(({message:h,finish_reason:m,index:p,logprobs:g,...y})=>{if(!m)throw new lt(`missing finish_reason for choice ${p}`);const{content:b=null,function_call:_,tool_calls:w,...k}=h,C=h.role;if(!C)throw new lt(`missing role for choice ${p}`);if(_){const{arguments:E,name:A}=_;if(E==null)throw new lt(`missing function_call.arguments for choice ${p}`);if(!A)throw new lt(`missing function_call.name for choice ${p}`);return{...y,message:{content:b,function_call:{arguments:E,name:A},role:C,refusal:h.refusal??null},finish_reason:m,index:p,logprobs:g}}return w?{...y,index:p,finish_reason:m,logprobs:g,message:{...k,role:C,content:b,refusal:h.refusal??null,tool_calls:w.map((E,A)=>{const{function:R,type:N,id:M,...I}=E,{arguments:W,name:P,...G}=R||{};if(M==null)throw new lt(`missing choices[${p}].tool_calls[${A}].id
${P0(t)}`);if(N==null)throw new lt(`missing choices[${p}].tool_calls[${A}].type
${P0(t)}`);if(P==null)throw new lt(`missing choices[${p}].tool_calls[${A}].function.name
${P0(t)}`);if(W==null)throw new lt(`missing choices[${p}].tool_calls[${A}].function.arguments
${P0(t)}`);return{...I,id:M,type:N,function:{...G,name:P,arguments:W}}})}}:{...y,message:{...k,content:b,role:C,refusal:h.refusal??null},finish_reason:m,index:p,logprobs:g}}),created:r,model:i,object:"chat.completion",...a?{system_fingerprint:a}:{}};return $he(u,e)}function P0(t){return JSON.stringify(t)}class Pv extends Qp{static fromReadableStream(e){const n=new Pv(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,s){const r=new Pv(n),i={...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,n,i)),r}}let UE=class extends it{constructor(){super(...arguments),this.messages=new f8(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(Ce`/chat/completions/${e}`,n)}update(e,n,s){return this._client.post(Ce`/chat/completions/${e}`,{body:n,...s})}list(e={},n){return this._client.getAPIList("/chat/completions",Wn,{query:e,...n})}delete(e,n){return this._client.delete(Ce`/chat/completions/${e}`,n)}parse(e,n){return Hhe(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(s=>$E(s,e))}runTools(e,n){return e.stream?Pv.runTools(this._client,e,n):FE.runTools(this._client,e,n)}stream(e,n){return Qp.createChatCompletion(this._client,e,n)}};UE.Messages=f8;class HE extends it{constructor(){super(...arguments),this.completions=new UE(this._client)}}HE.Completions=UE;const I8=Symbol("brand.privateNullableHeaders");function*Xhe(t){if(!t)return;if(I8 in t){const{values:s,nulls:r}=t;yield*s.entries();for(const i of r)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():KM(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let s of n){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const i=KM(s[1])?s[1]:[s[1]];let a=!1;for(const l of i)l!==void 0&&(e&&!a&&(a=!0,yield[r,null]),yield[r,l])}}const tt=t=>{const e=new Headers,n=new Set;for(const s of t){const r=new Set;for(const[i,a]of Xhe(s)){const l=i.toLowerCase();r.has(l)||(e.delete(i),r.add(l)),a===null?(e.delete(i),n.add(l)):(e.append(i,a),n.delete(l))}}return{[I8]:!0,values:e,nulls:n}};class D8 extends it{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:tt([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class L8 extends it{create(e,n){return this._client.post("/audio/transcriptions",Tc({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class P8 extends it{create(e,n){return this._client.post("/audio/translations",Tc({body:e,...n,__metadata:{model:e.model}},this._client))}}class Pm extends it{constructor(){super(...arguments),this.transcriptions=new L8(this._client),this.translations=new P8(this._client),this.speech=new D8(this._client)}}Pm.Transcriptions=L8;Pm.Translations=P8;Pm.Speech=D8;class B8 extends it{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(Ce`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",Wn,{query:e,...n})}cancel(e,n){return this._client.post(Ce`/batches/${e}/cancel`,n)}}class $8 extends it{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:tt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(Ce`/assistants/${e}`,{...n,headers:tt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,s){return this._client.post(Ce`/assistants/${e}`,{body:n,...s,headers:tt([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e={},n){return this._client.getAPIList("/assistants",Wn,{query:e,...n,headers:tt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(Ce`/assistants/${e}`,{...n,headers:tt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let z8=class extends it{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:tt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class F8 extends it{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:tt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let f1=class extends it{constructor(){super(...arguments),this.sessions=new z8(this._client),this.transcriptionSessions=new F8(this._client)}};f1.Sessions=z8;f1.TranscriptionSessions=F8;class U8 extends it{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:tt([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(e,n){return this._client.post(Ce`/chatkit/sessions/${e}/cancel`,{...n,headers:tt([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let H8=class extends it{retrieve(e,n){return this._client.get(Ce`/chatkit/threads/${e}`,{...n,headers:tt([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",jv,{query:e,...n,headers:tt([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(e,n){return this._client.delete(Ce`/chatkit/threads/${e}`,{...n,headers:tt([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(e,n={},s){return this._client.getAPIList(Ce`/chatkit/threads/${e}/items`,jv,{query:n,...s,headers:tt([{"OpenAI-Beta":"chatkit_beta=v1"},s?.headers])})}};class p1 extends it{constructor(){super(...arguments),this.sessions=new U8(this._client),this.threads=new H8(this._client)}}p1.Sessions=U8;p1.Threads=H8;class V8 extends it{create(e,n,s){return this._client.post(Ce`/threads/${e}/messages`,{body:n,...s,headers:tt([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}retrieve(e,n,s){const{thread_id:r}=n;return this._client.get(Ce`/threads/${r}/messages/${e}`,{...s,headers:tt([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}update(e,n,s){const{thread_id:r,...i}=n;return this._client.post(Ce`/threads/${r}/messages/${e}`,{body:i,...s,headers:tt([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n={},s){return this._client.getAPIList(Ce`/threads/${e}/messages`,Wn,{query:n,...s,headers:tt([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}delete(e,n,s){const{thread_id:r}=n;return this._client.delete(Ce`/threads/${r}/messages/${e}`,{...s,headers:tt([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}class q8 extends it{retrieve(e,n,s){const{thread_id:r,run_id:i,...a}=n;return this._client.get(Ce`/threads/${r}/runs/${i}/steps/${e}`,{query:a,...s,headers:tt([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n,s){const{thread_id:r,...i}=n;return this._client.getAPIList(Ce`/threads/${r}/runs/${e}/steps`,Wn,{query:i,...s,headers:tt([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}const Qhe=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,s=new Uint8Array(n);for(let r=0;r<n;r++)s[r]=e.charCodeAt(r);return Array.from(new Float32Array(s.buffer))}};var ede={};const ju=t=>{if(typeof globalThis.process<"u")return ede?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var ys,ec,bC,Wi,dy,Ci,tc,Xu,Wl,Bv,Tr,fy,py,xp,ep,tp,cI,uI,hI,dI,fI,pI,mI;class wp extends zE{constructor(){super(...arguments),ys.add(this),bC.set(this,[]),Wi.set(this,{}),dy.set(this,{}),Ci.set(this,void 0),tc.set(this,void 0),Xu.set(this,void 0),Wl.set(this,void 0),Bv.set(this,void 0),Tr.set(this,void 0),fy.set(this,void 0),py.set(this,void 0),xp.set(this,void 0)}[(bC=new WeakMap,Wi=new WeakMap,dy=new WeakMap,Ci=new WeakMap,tc=new WeakMap,Xu=new WeakMap,Wl=new WeakMap,Bv=new WeakMap,Tr=new WeakMap,fy=new WeakMap,py=new WeakMap,xp=new WeakMap,ys=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("event",r=>{const i=n.shift();i?i.resolve(r):e.push(r)}),this.on("end",()=>{s=!0;for(const r of n)r.resolve(void 0);n.length=0}),this.on("abort",r=>{s=!0;for(const i of n)i.reject(r);n.length=0}),this.on("error",r=>{s=!0;for(const i of n)i.reject(r);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((i,a)=>n.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new ec;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=Zi.fromReadableStream(e,this.controller);for await(const i of r)he(this,ys,"m",ep).call(this,i);if(r.controller.signal?.aborted)throw new hi;return this._addRun(he(this,ys,"m",tp).call(this))}toReadableStream(){return new Zi(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,s,r){const i=new ec;return i._run(()=>i._runToolAssistantStream(e,n,s,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createToolAssistantStream(e,n,s,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const a={...s,stream:!0},l=await e.submitToolOutputs(n,a,{...r,signal:this.controller.signal});this._connected();for await(const u of l)he(this,ys,"m",ep).call(this,u);if(l.controller.signal?.aborted)throw new hi;return this._addRun(he(this,ys,"m",tp).call(this))}static createThreadAssistantStream(e,n,s){const r=new ec;return r._run(()=>r._threadAssistantStream(e,n,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,n,s,r){const i=new ec;return i._run(()=>i._runAssistantStream(e,n,s,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}currentEvent(){return he(this,fy,"f")}currentRun(){return he(this,py,"f")}currentMessageSnapshot(){return he(this,Ci,"f")}currentRunStepSnapshot(){return he(this,xp,"f")}async finalRunSteps(){return await this.done(),Object.values(he(this,Wi,"f"))}async finalMessages(){return await this.done(),Object.values(he(this,dy,"f"))}async finalRun(){if(await this.done(),!he(this,tc,"f"))throw Error("Final run was not received.");return he(this,tc,"f")}async _createThreadAssistantStream(e,n,s){const r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const i={...n,stream:!0},a=await e.createAndRun(i,{...s,signal:this.controller.signal});this._connected();for await(const l of a)he(this,ys,"m",ep).call(this,l);if(a.controller.signal?.aborted)throw new hi;return this._addRun(he(this,ys,"m",tp).call(this))}async _createAssistantStream(e,n,s,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const a={...s,stream:!0},l=await e.create(n,a,{...r,signal:this.controller.signal});this._connected();for await(const u of l)he(this,ys,"m",ep).call(this,u);if(l.controller.signal?.aborted)throw new hi;return this._addRun(he(this,ys,"m",tp).call(this))}static accumulateDelta(e,n){for(const[s,r]of Object.entries(n)){if(!e.hasOwnProperty(s)){e[s]=r;continue}let i=e[s];if(i==null){e[s]=r;continue}if(s==="index"||s==="type"){e[s]=r;continue}if(typeof i=="string"&&typeof r=="string")i+=r;else if(typeof i=="number"&&typeof r=="number")i+=r;else if(tS(i)&&tS(r))i=this.accumulateDelta(i,r);else if(Array.isArray(i)&&Array.isArray(r)){if(i.every(a=>typeof a=="string"||typeof a=="number")){i.push(...r);continue}for(const a of r){if(!tS(a))throw new Error(`Expected array delta entry to be an object but got: ${a}`);const l=a.index;if(l==null)throw console.error(a),new Error("Expected array delta entry to have an `index` property");if(typeof l!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${l}`);const u=i[l];u==null?i.push(a):i[l]=this.accumulateDelta(u,a)}continue}else throw Error(`Unhandled record type: ${s}, deltaValue: ${r}, accValue: ${i}`);e[s]=i}return e}_addRun(e){return e}async _threadAssistantStream(e,n,s){return await this._createThreadAssistantStream(n,e,s)}async _runAssistantStream(e,n,s,r){return await this._createAssistantStream(n,e,s,r)}async _runToolAssistantStream(e,n,s,r){return await this._createToolAssistantStream(n,e,s,r)}}ec=wp,ep=function(e){if(!this.ended)switch(vt(this,fy,e),he(this,ys,"m",hI).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":he(this,ys,"m",mI).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":he(this,ys,"m",uI).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":he(this,ys,"m",cI).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},tp=function(){if(this.ended)throw new lt("stream has ended, this shouldn't happen");if(!he(this,tc,"f"))throw Error("Final run has not been received");return he(this,tc,"f")},cI=function(e){const[n,s]=he(this,ys,"m",fI).call(this,e,he(this,Ci,"f"));vt(this,Ci,n),he(this,dy,"f")[n.id]=n;for(const r of s){const i=n.content[r.index];i?.type=="text"&&this._emit("textCreated",i.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const r of e.data.delta.content){if(r.type=="text"&&r.text){let i=r.text,a=n.content[r.index];if(a&&a.type=="text")this._emit("textDelta",i,a.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=he(this,Xu,"f")){if(he(this,Wl,"f"))switch(he(this,Wl,"f").type){case"text":this._emit("textDone",he(this,Wl,"f").text,he(this,Ci,"f"));break;case"image_file":this._emit("imageFileDone",he(this,Wl,"f").image_file,he(this,Ci,"f"));break}vt(this,Xu,r.index)}vt(this,Wl,n.content[r.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(he(this,Xu,"f")!==void 0){const r=e.data.content[he(this,Xu,"f")];if(r)switch(r.type){case"image_file":this._emit("imageFileDone",r.image_file,he(this,Ci,"f"));break;case"text":this._emit("textDone",r.text,he(this,Ci,"f"));break}}he(this,Ci,"f")&&this._emit("messageDone",e.data),vt(this,Ci,void 0)}},uI=function(e){const n=he(this,ys,"m",dI).call(this,e);switch(vt(this,xp,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const s=e.data.delta;if(s.step_details&&s.step_details.type=="tool_calls"&&s.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const i of s.step_details.tool_calls)i.index==he(this,Bv,"f")?this._emit("toolCallDelta",i,n.step_details.tool_calls[i.index]):(he(this,Tr,"f")&&this._emit("toolCallDone",he(this,Tr,"f")),vt(this,Bv,i.index),vt(this,Tr,n.step_details.tool_calls[i.index]),he(this,Tr,"f")&&this._emit("toolCallCreated",he(this,Tr,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":vt(this,xp,void 0),e.data.step_details.type=="tool_calls"&&he(this,Tr,"f")&&(this._emit("toolCallDone",he(this,Tr,"f")),vt(this,Tr,void 0)),this._emit("runStepDone",e.data,n);break}},hI=function(e){he(this,bC,"f").push(e),this._emit("event",e)},dI=function(e){switch(e.event){case"thread.run.step.created":return he(this,Wi,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=he(this,Wi,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let s=e.data;if(s.delta){const r=ec.accumulateDelta(n,s.delta);he(this,Wi,"f")[e.data.id]=r}return he(this,Wi,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":he(this,Wi,"f")[e.data.id]=e.data;break}if(he(this,Wi,"f")[e.data.id])return he(this,Wi,"f")[e.data.id];throw new Error("No snapshot available")},fI=function(e,n){let s=[];switch(e.event){case"thread.message.created":return[e.data,s];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const i of r.delta.content)if(i.index in n.content){let a=n.content[i.index];n.content[i.index]=he(this,ys,"m",pI).call(this,i,a)}else n.content[i.index]=i,s.push(i);return[n,s];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,s];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},pI=function(e,n){return ec.accumulateDelta(n,e)},mI=function(e){switch(vt(this,py,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":vt(this,tc,e.data),he(this,Tr,"f")&&(this._emit("toolCallDone",he(this,Tr,"f")),vt(this,Tr,void 0));break}};let VE=class extends it{constructor(){super(...arguments),this.steps=new q8(this._client)}create(e,n,s){const{include:r,...i}=n;return this._client.post(Ce`/threads/${e}/runs`,{query:{include:r},body:i,...s,headers:tt([{"OpenAI-Beta":"assistants=v2"},s?.headers]),stream:n.stream??!1})}retrieve(e,n,s){const{thread_id:r}=n;return this._client.get(Ce`/threads/${r}/runs/${e}`,{...s,headers:tt([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}update(e,n,s){const{thread_id:r,...i}=n;return this._client.post(Ce`/threads/${r}/runs/${e}`,{body:i,...s,headers:tt([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n={},s){return this._client.getAPIList(Ce`/threads/${e}/runs`,Wn,{query:n,...s,headers:tt([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}cancel(e,n,s){const{thread_id:r}=n;return this._client.post(Ce`/threads/${r}/runs/${e}/cancel`,{...s,headers:tt([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async createAndPoll(e,n,s){const r=await this.create(e,n,s);return await this.poll(r.id,{thread_id:e},s)}createAndStream(e,n,s){return wp.createAssistantStream(e,this._client.beta.threads.runs,n,s)}async poll(e,n,s){const r=tt([s?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":s?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:i,response:a}=await this.retrieve(e,n,{...s,headers:{...s?.headers,...r}}).withResponse();switch(i.status){case"queued":case"in_progress":case"cancelling":let l=5e3;if(s?.pollIntervalMs)l=s.pollIntervalMs;else{const u=a.headers.get("openai-poll-after-ms");if(u){const h=parseInt(u);isNaN(h)||(l=h)}}await Dm(l);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return i}}}stream(e,n,s){return wp.createAssistantStream(e,this._client.beta.threads.runs,n,s)}submitToolOutputs(e,n,s){const{thread_id:r,...i}=n;return this._client.post(Ce`/threads/${r}/runs/${e}/submit_tool_outputs`,{body:i,...s,headers:tt([{"OpenAI-Beta":"assistants=v2"},s?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,s){const r=await this.submitToolOutputs(e,n,s);return await this.poll(r.id,n,s)}submitToolOutputsStream(e,n,s){return wp.createToolAssistantStream(e,this._client.beta.threads.runs,n,s)}};VE.Steps=q8;class m1 extends it{constructor(){super(...arguments),this.runs=new VE(this._client),this.messages=new V8(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:tt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(Ce`/threads/${e}`,{...n,headers:tt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,s){return this._client.post(Ce`/threads/${e}`,{body:n,...s,headers:tt([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}delete(e,n){return this._client.delete(Ce`/threads/${e}`,{...n,headers:tt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:tt([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const s=await this.createAndRun(e,n);return await this.runs.poll(s.id,{thread_id:s.thread_id},n)}createAndRunStream(e,n){return wp.createThreadAssistantStream(e,this._client.beta.threads,n)}}m1.Runs=VE;m1.Messages=V8;class ed extends it{constructor(){super(...arguments),this.realtime=new f1(this._client),this.chatkit=new p1(this._client),this.assistants=new $8(this._client),this.threads=new m1(this._client)}}ed.Realtime=f1;ed.ChatKit=p1;ed.Assistants=$8;ed.Threads=m1;class K8 extends it{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class W8 extends it{retrieve(e,n,s){const{container_id:r}=n;return this._client.get(Ce`/containers/${r}/files/${e}/content`,{...s,headers:tt([{Accept:"application/binary"},s?.headers]),__binaryResponse:!0})}}let qE=class extends it{constructor(){super(...arguments),this.content=new W8(this._client)}create(e,n,s){return this._client.post(Ce`/containers/${e}/files`,Tc({body:n,...s},this._client))}retrieve(e,n,s){const{container_id:r}=n;return this._client.get(Ce`/containers/${r}/files/${e}`,s)}list(e,n={},s){return this._client.getAPIList(Ce`/containers/${e}/files`,Wn,{query:n,...s})}delete(e,n,s){const{container_id:r}=n;return this._client.delete(Ce`/containers/${r}/files/${e}`,{...s,headers:tt([{Accept:"*/*"},s?.headers])})}};qE.Content=W8;class KE extends it{constructor(){super(...arguments),this.files=new qE(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(Ce`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",Wn,{query:e,...n})}delete(e,n){return this._client.delete(Ce`/containers/${e}`,{...n,headers:tt([{Accept:"*/*"},n?.headers])})}}KE.Files=qE;class G8 extends it{create(e,n,s){const{include:r,...i}=n;return this._client.post(Ce`/conversations/${e}/items`,{query:{include:r},body:i,...s})}retrieve(e,n,s){const{conversation_id:r,...i}=n;return this._client.get(Ce`/conversations/${r}/items/${e}`,{query:i,...s})}list(e,n={},s){return this._client.getAPIList(Ce`/conversations/${e}/items`,jv,{query:n,...s})}delete(e,n,s){const{conversation_id:r}=n;return this._client.delete(Ce`/conversations/${r}/items/${e}`,s)}}class WE extends it{constructor(){super(...arguments),this.items=new G8(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(Ce`/conversations/${e}`,n)}update(e,n,s){return this._client.post(Ce`/conversations/${e}`,{body:n,...s})}delete(e,n){return this._client.delete(Ce`/conversations/${e}`,n)}}WE.Items=G8;class Y8 extends it{create(e,n){const s=!!e.encoding_format;let r=s?e.encoding_format:"base64";s&&gs(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const i=this._client.post("/embeddings",{body:{...e,encoding_format:r},...n});return s?i:(gs(this._client).debug("embeddings/decoding base64 embeddings from base64"),i._thenUnwrap(a=>(a&&a.data&&a.data.forEach(l=>{const u=l.embedding;l.embedding=Qhe(u)}),a)))}}class Z8 extends it{retrieve(e,n,s){const{eval_id:r,run_id:i}=n;return this._client.get(Ce`/evals/${r}/runs/${i}/output_items/${e}`,s)}list(e,n,s){const{eval_id:r,...i}=n;return this._client.getAPIList(Ce`/evals/${r}/runs/${e}/output_items`,Wn,{query:i,...s})}}class GE extends it{constructor(){super(...arguments),this.outputItems=new Z8(this._client)}create(e,n,s){return this._client.post(Ce`/evals/${e}/runs`,{body:n,...s})}retrieve(e,n,s){const{eval_id:r}=n;return this._client.get(Ce`/evals/${r}/runs/${e}`,s)}list(e,n={},s){return this._client.getAPIList(Ce`/evals/${e}/runs`,Wn,{query:n,...s})}delete(e,n,s){const{eval_id:r}=n;return this._client.delete(Ce`/evals/${r}/runs/${e}`,s)}cancel(e,n,s){const{eval_id:r}=n;return this._client.post(Ce`/evals/${r}/runs/${e}`,s)}}GE.OutputItems=Z8;class YE extends it{constructor(){super(...arguments),this.runs=new GE(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(Ce`/evals/${e}`,n)}update(e,n,s){return this._client.post(Ce`/evals/${e}`,{body:n,...s})}list(e={},n){return this._client.getAPIList("/evals",Wn,{query:e,...n})}delete(e,n){return this._client.delete(Ce`/evals/${e}`,n)}}YE.Runs=GE;let J8=class extends it{create(e,n){return this._client.post("/files",Tc({body:e,...n},this._client))}retrieve(e,n){return this._client.get(Ce`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",Wn,{query:e,...n})}delete(e,n){return this._client.delete(Ce`/files/${e}`,n)}content(e,n){return this._client.get(Ce`/files/${e}/content`,{...n,headers:tt([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:s=1800*1e3}={}){const r=new Set(["processed","error","deleted"]),i=Date.now();let a=await this.retrieve(e);for(;!a.status||!r.has(a.status);)if(await Dm(n),a=await this.retrieve(e),Date.now()-i>s)throw new IE({message:`Giving up on waiting for file ${e} to finish processing after ${s} milliseconds.`});return a}};class X8 extends it{}let Q8=class extends it{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class ZE extends it{constructor(){super(...arguments),this.graders=new Q8(this._client)}}ZE.Graders=Q8;class ez extends it{create(e,n,s){return this._client.getAPIList(Ce`/fine_tuning/checkpoints/${e}/permissions`,d1,{body:n,method:"post",...s})}retrieve(e,n={},s){return this._client.get(Ce`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...s})}delete(e,n,s){const{fine_tuned_model_checkpoint:r}=n;return this._client.delete(Ce`/fine_tuning/checkpoints/${r}/permissions/${e}`,s)}}let JE=class extends it{constructor(){super(...arguments),this.permissions=new ez(this._client)}};JE.Permissions=ez;class tz extends it{list(e,n={},s){return this._client.getAPIList(Ce`/fine_tuning/jobs/${e}/checkpoints`,Wn,{query:n,...s})}}class XE extends it{constructor(){super(...arguments),this.checkpoints=new tz(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(Ce`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",Wn,{query:e,...n})}cancel(e,n){return this._client.post(Ce`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},s){return this._client.getAPIList(Ce`/fine_tuning/jobs/${e}/events`,Wn,{query:n,...s})}pause(e,n){return this._client.post(Ce`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(Ce`/fine_tuning/jobs/${e}/resume`,n)}}XE.Checkpoints=tz;class td extends it{constructor(){super(...arguments),this.methods=new X8(this._client),this.jobs=new XE(this._client),this.checkpoints=new JE(this._client),this.alpha=new ZE(this._client)}}td.Methods=X8;td.Jobs=XE;td.Checkpoints=JE;td.Alpha=ZE;class nz extends it{}class QE extends it{constructor(){super(...arguments),this.graderModels=new nz(this._client)}}QE.GraderModels=nz;class sz extends it{createVariation(e,n){return this._client.post("/images/variations",Tc({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",Tc({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class rz extends it{retrieve(e,n){return this._client.get(Ce`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",d1,e)}delete(e,n){return this._client.delete(Ce`/models/${e}`,n)}}class iz extends it{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class az extends it{accept(e,n,s){return this._client.post(Ce`/realtime/calls/${e}/accept`,{body:n,...s,headers:tt([{Accept:"*/*"},s?.headers])})}hangup(e,n){return this._client.post(Ce`/realtime/calls/${e}/hangup`,{...n,headers:tt([{Accept:"*/*"},n?.headers])})}refer(e,n,s){return this._client.post(Ce`/realtime/calls/${e}/refer`,{body:n,...s,headers:tt([{Accept:"*/*"},s?.headers])})}reject(e,n={},s){return this._client.post(Ce`/realtime/calls/${e}/reject`,{body:n,...s,headers:tt([{Accept:"*/*"},s?.headers])})}}class oz extends it{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class g1 extends it{constructor(){super(...arguments),this.clientSecrets=new oz(this._client),this.calls=new az(this._client)}}g1.ClientSecrets=oz;g1.Calls=az;function tde(t,e){return!e||!sde(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(s=>({...s,parsed:null}))}:n)}:lz(t,e)}function lz(t,e){const n=t.output.map(r=>{if(r.type==="function_call")return{...r,parsed_arguments:ade(e,r)};if(r.type==="message"){const i=r.content.map(a=>a.type==="output_text"?{...a,parsed:nde(e,a.text)}:a);return{...r,content:i}}return r}),s=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||_C(s),Object.defineProperty(s,"output_parsed",{enumerable:!0,get(){for(const r of s.output)if(r.type==="message"){for(const i of r.content)if(i.type==="output_text"&&i.parsed!==null)return i.parsed}return null}}),s}function nde(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function sde(t){return!!BE(t.text?.format)}function rde(t){return t?.$brand==="auto-parseable-tool"}function ide(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function ade(t,e){const n=ide(t.tools??[],e.name);return{...e,...e,parsed_arguments:rde(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function _C(t){const e=[];for(const n of t.output)if(n.type==="message")for(const s of n.content)s.type==="output_text"&&e.push(s.text);t.output_text=e.join("")}var Ou,B0,$o,$0,gI,yI,vI,bI;class eA extends zE{constructor(e){super(),Ou.add(this),B0.set(this,void 0),$o.set(this,void 0),$0.set(this,void 0),vt(this,B0,e)}static createResponse(e,n,s){const r=new eA(n);return r._run(()=>r._createOrRetrieveResponse(e,n,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createOrRetrieveResponse(e,n,s){const r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),he(this,Ou,"m",gI).call(this);let i,a=null;"response_id"in n?(i=await e.responses.retrieve(n.response_id,{stream:!0},{...s,signal:this.controller.signal,stream:!0}),a=n.starting_after??null):i=await e.responses.create({...n,stream:!0},{...s,signal:this.controller.signal}),this._connected();for await(const l of i)he(this,Ou,"m",yI).call(this,l,a);if(i.controller.signal?.aborted)throw new hi;return he(this,Ou,"m",vI).call(this)}[(B0=new WeakMap,$o=new WeakMap,$0=new WeakMap,Ou=new WeakSet,gI=function(){this.ended||vt(this,$o,void 0)},yI=function(n,s){if(this.ended)return;const r=(a,l)=>{(s==null||l.sequence_number>s)&&this._emit(a,l)},i=he(this,Ou,"m",bI).call(this,n);switch(r("event",n),n.type){case"response.output_text.delta":{const a=i.output[n.output_index];if(!a)throw new lt(`missing output at index ${n.output_index}`);if(a.type==="message"){const l=a.content[n.content_index];if(!l)throw new lt(`missing content at index ${n.content_index}`);if(l.type!=="output_text")throw new lt(`expected content to be 'output_text', got ${l.type}`);r("response.output_text.delta",{...n,snapshot:l.text})}break}case"response.function_call_arguments.delta":{const a=i.output[n.output_index];if(!a)throw new lt(`missing output at index ${n.output_index}`);a.type==="function_call"&&r("response.function_call_arguments.delta",{...n,snapshot:a.arguments});break}default:r(n.type,n);break}},vI=function(){if(this.ended)throw new lt("stream has ended, this shouldn't happen");const n=he(this,$o,"f");if(!n)throw new lt("request ended without sending any events");vt(this,$o,void 0);const s=ode(n,he(this,B0,"f"));return vt(this,$0,s),s},bI=function(n){let s=he(this,$o,"f");if(!s){if(n.type!=="response.created")throw new lt(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return s=vt(this,$o,n.response),s}switch(n.type){case"response.output_item.added":{s.output.push(n.item);break}case"response.content_part.added":{const r=s.output[n.output_index];if(!r)throw new lt(`missing output at index ${n.output_index}`);const i=r.type,a=n.part;i==="message"&&a.type!=="reasoning_text"?r.content.push(a):i==="reasoning"&&a.type==="reasoning_text"&&(r.content||(r.content=[]),r.content.push(a));break}case"response.output_text.delta":{const r=s.output[n.output_index];if(!r)throw new lt(`missing output at index ${n.output_index}`);if(r.type==="message"){const i=r.content[n.content_index];if(!i)throw new lt(`missing content at index ${n.content_index}`);if(i.type!=="output_text")throw new lt(`expected content to be 'output_text', got ${i.type}`);i.text+=n.delta}break}case"response.function_call_arguments.delta":{const r=s.output[n.output_index];if(!r)throw new lt(`missing output at index ${n.output_index}`);r.type==="function_call"&&(r.arguments+=n.delta);break}case"response.reasoning_text.delta":{const r=s.output[n.output_index];if(!r)throw new lt(`missing output at index ${n.output_index}`);if(r.type==="reasoning"){const i=r.content?.[n.content_index];if(!i)throw new lt(`missing content at index ${n.content_index}`);if(i.type!=="reasoning_text")throw new lt(`expected content to be 'reasoning_text', got ${i.type}`);i.text+=n.delta}break}case"response.completed":{vt(this,$o,n.response);break}}return s},Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("event",r=>{const i=n.shift();i?i.resolve(r):e.push(r)}),this.on("end",()=>{s=!0;for(const r of n)r.resolve(void 0);n.length=0}),this.on("abort",r=>{s=!0;for(const i of n)i.reject(r);n.length=0}),this.on("error",r=>{s=!0;for(const i of n)i.reject(r);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((i,a)=>n.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=he(this,$0,"f");if(!e)throw new lt("stream ended without producing a ChatCompletion");return e}}function ode(t,e){return tde(t,e)}class cz extends it{list(e,n={},s){return this._client.getAPIList(Ce`/responses/${e}/input_items`,Wn,{query:n,...s})}}class uz extends it{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class y1 extends it{constructor(){super(...arguments),this.inputItems=new cz(this._client),this.inputTokens=new uz(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&_C(s),s))}retrieve(e,n={},s){return this._client.get(Ce`/responses/${e}`,{query:n,...s,stream:n?.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&_C(r),r))}delete(e,n){return this._client.delete(Ce`/responses/${e}`,{...n,headers:tt([{Accept:"*/*"},n?.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(s=>lz(s,e))}stream(e,n){return eA.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(Ce`/responses/${e}/cancel`,n)}compact(e,n){return this._client.post("/responses/compact",{body:e,...n})}}y1.InputItems=cz;y1.InputTokens=uz;class hz extends it{create(e,n,s){return this._client.post(Ce`/uploads/${e}/parts`,Tc({body:n,...s},this._client))}}class tA extends it{constructor(){super(...arguments),this.parts=new hz(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(Ce`/uploads/${e}/cancel`,n)}complete(e,n,s){return this._client.post(Ce`/uploads/${e}/complete`,{body:n,...s})}}tA.Parts=hz;const lde=async t=>{const e=await Promise.allSettled(t),n=e.filter(r=>r.status==="rejected");if(n.length){for(const r of n)console.error(r.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const s=[];for(const r of e)r.status==="fulfilled"&&s.push(r.value);return s};class dz extends it{create(e,n,s){return this._client.post(Ce`/vector_stores/${e}/file_batches`,{body:n,...s,headers:tt([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}retrieve(e,n,s){const{vector_store_id:r}=n;return this._client.get(Ce`/vector_stores/${r}/file_batches/${e}`,{...s,headers:tt([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}cancel(e,n,s){const{vector_store_id:r}=n;return this._client.post(Ce`/vector_stores/${r}/file_batches/${e}/cancel`,{...s,headers:tt([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async createAndPoll(e,n,s){const r=await this.create(e,n);return await this.poll(e,r.id,s)}listFiles(e,n,s){const{vector_store_id:r,...i}=n;return this._client.getAPIList(Ce`/vector_stores/${r}/file_batches/${e}/files`,Wn,{query:i,...s,headers:tt([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async poll(e,n,s){const r=tt([s?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":s?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:i,response:a}=await this.retrieve(n,{vector_store_id:e},{...s,headers:r}).withResponse();switch(i.status){case"in_progress":let l=5e3;if(s?.pollIntervalMs)l=s.pollIntervalMs;else{const u=a.headers.get("openai-poll-after-ms");if(u){const h=parseInt(u);isNaN(h)||(l=h)}}await Dm(l);break;case"failed":case"cancelled":case"completed":return i}}}async uploadAndPoll(e,{files:n,fileIds:s=[]},r){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const i=r?.maxConcurrency??5,a=Math.min(i,n.length),l=this._client,u=n.values(),h=[...s];async function m(g){for(let y of g){const b=await l.files.create({file:y,purpose:"assistants"},r);h.push(b.id)}}const p=Array(a).fill(u).map(m);return await lde(p),await this.createAndPoll(e,{file_ids:h})}}class fz extends it{create(e,n,s){return this._client.post(Ce`/vector_stores/${e}/files`,{body:n,...s,headers:tt([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}retrieve(e,n,s){const{vector_store_id:r}=n;return this._client.get(Ce`/vector_stores/${r}/files/${e}`,{...s,headers:tt([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}update(e,n,s){const{vector_store_id:r,...i}=n;return this._client.post(Ce`/vector_stores/${r}/files/${e}`,{body:i,...s,headers:tt([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n={},s){return this._client.getAPIList(Ce`/vector_stores/${e}/files`,Wn,{query:n,...s,headers:tt([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}delete(e,n,s){const{vector_store_id:r}=n;return this._client.delete(Ce`/vector_stores/${r}/files/${e}`,{...s,headers:tt([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async createAndPoll(e,n,s){const r=await this.create(e,n,s);return await this.poll(e,r.id,s)}async poll(e,n,s){const r=tt([s?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":s?.pollIntervalMs?.toString()??void 0}]);for(;;){const i=await this.retrieve(n,{vector_store_id:e},{...s,headers:r}).withResponse(),a=i.data;switch(a.status){case"in_progress":let l=5e3;if(s?.pollIntervalMs)l=s.pollIntervalMs;else{const u=i.response.headers.get("openai-poll-after-ms");if(u){const h=parseInt(u);isNaN(h)||(l=h)}}await Dm(l);break;case"failed":case"completed":return a}}}async upload(e,n,s){const r=await this._client.files.create({file:n,purpose:"assistants"},s);return this.create(e,{file_id:r.id},s)}async uploadAndPoll(e,n,s){const r=await this.upload(e,n,s);return await this.poll(e,r.id,s)}content(e,n,s){const{vector_store_id:r}=n;return this._client.getAPIList(Ce`/vector_stores/${r}/files/${e}/content`,d1,{...s,headers:tt([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}class v1 extends it{constructor(){super(...arguments),this.files=new fz(this._client),this.fileBatches=new dz(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:tt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(Ce`/vector_stores/${e}`,{...n,headers:tt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,s){return this._client.post(Ce`/vector_stores/${e}`,{body:n,...s,headers:tt([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",Wn,{query:e,...n,headers:tt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(Ce`/vector_stores/${e}`,{...n,headers:tt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(e,n,s){return this._client.getAPIList(Ce`/vector_stores/${e}/search`,d1,{body:n,method:"post",...s,headers:tt([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}v1.Files=fz;v1.FileBatches=dz;class pz extends it{create(e,n){return this._client.post("/videos",rI({body:e,...n},this._client))}retrieve(e,n){return this._client.get(Ce`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",jv,{query:e,...n})}delete(e,n){return this._client.delete(Ce`/videos/${e}`,n)}downloadContent(e,n={},s){return this._client.get(Ce`/videos/${e}/content`,{query:n,...s,headers:tt([{Accept:"application/binary"},s?.headers]),__binaryResponse:!0})}remix(e,n,s){return this._client.post(Ce`/videos/${e}/remix`,rI({body:n,...s},this._client))}}var Fu,mz,my;class gz extends it{constructor(){super(...arguments),Fu.add(this)}async unwrap(e,n,s=this._client.webhookSecret,r=300){return await this.verifySignature(e,n,s,r),JSON.parse(e)}async verifySignature(e,n,s=this._client.webhookSecret,r=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");he(this,Fu,"m",mz).call(this,s);const i=tt([n]).values,a=he(this,Fu,"m",my).call(this,i,"webhook-signature"),l=he(this,Fu,"m",my).call(this,i,"webhook-timestamp"),u=he(this,Fu,"m",my).call(this,i,"webhook-id"),h=parseInt(l,10);if(isNaN(h))throw new Wf("Invalid webhook timestamp format");const m=Math.floor(Date.now()/1e3);if(m-h>r)throw new Wf("Webhook timestamp is too old");if(h>m+r)throw new Wf("Webhook timestamp is too new");const p=a.split(" ").map(_=>_.startsWith("v1,")?_.substring(3):_),g=s.startsWith("whsec_")?Buffer.from(s.replace("whsec_",""),"base64"):Buffer.from(s,"utf-8"),y=u?`${u}.${l}.${e}`:`${l}.${e}`,b=await crypto.subtle.importKey("raw",g,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const _ of p)try{const w=Buffer.from(_,"base64");if(await crypto.subtle.verify("HMAC",b,w,new TextEncoder().encode(y)))return}catch{continue}throw new Wf("The given webhook signature does not match the expected signature")}}Fu=new WeakSet,mz=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},my=function(e,n){if(!e)throw new Error("Headers are required");const s=e.get(n);if(s==null)throw new Error(`Missing required header: ${n}`);return s};var xC,nA,gy,yz;class Ot{constructor({baseURL:e=ju("OPENAI_BASE_URL"),apiKey:n=ju("OPENAI_API_KEY"),organization:s=ju("OPENAI_ORG_ID")??null,project:r=ju("OPENAI_PROJECT_ID")??null,webhookSecret:i=ju("OPENAI_WEBHOOK_SECRET")??null,...a}={}){if(xC.add(this),gy.set(this,void 0),this.completions=new K8(this),this.chat=new HE(this),this.embeddings=new Y8(this),this.files=new J8(this),this.images=new sz(this),this.audio=new Pm(this),this.moderations=new iz(this),this.models=new rz(this),this.fineTuning=new td(this),this.graders=new QE(this),this.vectorStores=new v1(this),this.webhooks=new gz(this),this.beta=new ed(this),this.batches=new B8(this),this.uploads=new tA(this),this.responses=new y1(this),this.realtime=new g1(this),this.conversations=new WE(this),this.evals=new YE(this),this.containers=new KE(this),this.videos=new pz(this),n===void 0)throw new lt("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const l={apiKey:n,organization:s,project:r,webhookSecret:i,...a,baseURL:e||"https://api.openai.com/v1"};if(!l.dangerouslyAllowBrowser&&che())throw new lt(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=l.baseURL,this.timeout=l.timeout??nA.DEFAULT_TIMEOUT,this.logger=l.logger??console;const u="warn";this.logLevel=u,this.logLevel=nI(l.logLevel,"ClientOptions.logLevel",this)??nI(ju("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??u,this.fetchOptions=l.fetchOptions,this.maxRetries=l.maxRetries??2,this.fetch=l.fetch??phe(),vt(this,gy,ghe),this._options=l,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=s,this.project=r,this.webhookSecret=i}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return tt([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return whe(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${$u}`}defaultIdempotencyKey(){return`stainless-node-retry-${z$()}`}makeStatusError(e,n,s,r){return Es.generate(e,n,s,r)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(s){throw s instanceof lt?s:new lt(`Failed to get token from 'apiKey' function: ${s.message}`,{cause:s})}if(typeof n!="string"||!n)throw new lt(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,s){const r=!he(this,xC,"m",yz).call(this)&&s||this.baseURL,i=rhe(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return ihe(a)||(n={...a,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:s}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,s){return this.request(Promise.resolve(s).then(r=>({method:e,path:n,...r})))}request(e,n=null){return new h1(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,s){const r=await e,i=r.maxRetries??this.maxRetries;n==null&&(n=i),await this.prepareOptions(r);const{req:a,url:l,timeout:u}=await this.buildRequest(r,{retryCount:i-n});await this.prepareRequest(a,{url:l,options:r});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=s===void 0?"":`, retryOf: ${s}`,p=Date.now();if(gs(this).debug(`[${h}] sending request`,Hl({retryOfRequestLogID:s,method:r.method,url:l,options:r,headers:a.headers})),r.signal?.aborted)throw new hi;const g=new AbortController,y=await this.fetchWithTimeout(l,a,u,g).catch(cC),b=Date.now();if(y instanceof globalThis.Error){const k=`retrying, ${n} attempts remaining`;if(r.signal?.aborted)throw new hi;const C=lC(y)||/timed? ?out/i.test(String(y)+("cause"in y?String(y.cause):""));if(n)return gs(this).info(`[${h}] connection ${C?"timed out":"failed"} - ${k}`),gs(this).debug(`[${h}] connection ${C?"timed out":"failed"} (${k})`,Hl({retryOfRequestLogID:s,url:l,durationMs:b-p,message:y.message})),this.retryRequest(r,n,s??h);throw gs(this).info(`[${h}] connection ${C?"timed out":"failed"} - error; no more retries left`),gs(this).debug(`[${h}] connection ${C?"timed out":"failed"} (error; no more retries left)`,Hl({retryOfRequestLogID:s,url:l,durationMs:b-p,message:y.message})),C?new IE:new c1({cause:y})}const _=[...y.headers.entries()].filter(([k])=>k==="x-request-id").map(([k,C])=>", "+k+": "+JSON.stringify(C)).join(""),w=`[${h}${m}${_}] ${a.method} ${l} ${y.ok?"succeeded":"failed"} with status ${y.status} in ${b-p}ms`;if(!y.ok){const k=await this.shouldRetry(y);if(n&&k){const M=`retrying, ${n} attempts remaining`;return await mhe(y.body),gs(this).info(`${w} - ${M}`),gs(this).debug(`[${h}] response error (${M})`,Hl({retryOfRequestLogID:s,url:y.url,status:y.status,headers:y.headers,durationMs:b-p})),this.retryRequest(r,n,s??h,y.headers)}const C=k?"error; no more retries left":"error; not retryable";gs(this).info(`${w} - ${C}`);const E=await y.text().catch(M=>cC(M).message),A=lhe(E),R=A?void 0:E;throw gs(this).debug(`[${h}] response error (${C})`,Hl({retryOfRequestLogID:s,url:y.url,status:y.status,headers:y.headers,message:R,durationMs:Date.now()-p})),this.makeStatusError(y.status,A,R,y.headers)}return gs(this).info(w),gs(this).debug(`[${h}] response start`,Hl({retryOfRequestLogID:s,url:y.url,status:y.status,headers:y.headers,durationMs:b-p})),{response:y,options:r,controller:g,requestLogID:h,retryOfRequestLogID:s,startTime:p}}getAPIList(e,n,s){return this.requestAPIList(n,{method:"get",path:e,...s})}requestAPIList(e,n){const s=this.makeRequest(n,null,void 0);return new jhe(this,s,e)}async fetchWithTimeout(e,n,s,r){const{signal:i,method:a,...l}=n||{};i&&i.addEventListener("abort",()=>r.abort());const u=setTimeout(()=>r.abort(),s),h=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,m={signal:r.signal,...h?{duplex:"half"}:{},method:"GET",...l};a&&(m.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(u)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,s,r){let i;const a=r?.get("retry-after-ms");if(a){const u=parseFloat(a);Number.isNaN(u)||(i=u)}const l=r?.get("retry-after");if(l&&!i){const u=parseFloat(l);Number.isNaN(u)?i=Date.parse(l)-Date.now():i=u*1e3}if(!(i&&0<=i&&i<60*1e3)){const u=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,u)}return await Dm(i),this.makeRequest(e,n-1,s)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,a=Math.min(.5*Math.pow(2,i),8),l=1-Math.random()*.25;return a*l*1e3}async buildRequest(e,{retryCount:n=0}={}){const s={...e},{method:r,path:i,query:a,defaultBaseURL:l}=s,u=this.buildURL(i,a,l);"timeout"in s&&ohe("timeout",s.timeout),s.timeout=s.timeout??this.timeout;const{bodyHeaders:h,body:m}=this.buildBody({options:s}),p=await this.buildHeaders({options:e,method:r,bodyHeaders:h,retryCount:n});return{req:{method:r,headers:p,...s.signal&&{signal:s.signal},...globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"},...m&&{body:m},...this.fetchOptions??{},...s.fetchOptions??{}},url:u,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:s,retryCount:r}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const a=tt([i,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...fhe(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,s,e.headers]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=tt([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Q$(e)}:he(this,gy,"f").call(this,{body:e,headers:s})}}nA=Ot,gy=new WeakMap,xC=new WeakSet,yz=function(){return this.baseURL!=="https://api.openai.com/v1"};Ot.OpenAI=nA;Ot.DEFAULT_TIMEOUT=6e5;Ot.OpenAIError=lt;Ot.APIError=Es;Ot.APIConnectionError=c1;Ot.APIConnectionTimeoutError=IE;Ot.APIUserAbortError=hi;Ot.NotFoundError=V$;Ot.ConflictError=q$;Ot.RateLimitError=W$;Ot.BadRequestError=F$;Ot.AuthenticationError=U$;Ot.InternalServerError=G$;Ot.PermissionDeniedError=H$;Ot.UnprocessableEntityError=K$;Ot.InvalidWebhookSignatureError=Wf;Ot.toFile=Lhe;Ot.Completions=K8;Ot.Chat=HE;Ot.Embeddings=Y8;Ot.Files=J8;Ot.Images=sz;Ot.Audio=Pm;Ot.Moderations=iz;Ot.Models=rz;Ot.FineTuning=td;Ot.Graders=QE;Ot.VectorStores=v1;Ot.Webhooks=gz;Ot.Beta=ed;Ot.Batches=B8;Ot.Uploads=tA;Ot.Responses=y1;Ot.Realtime=g1;Ot.Conversations=WE;Ot.Evals=YE;Ot.Containers=KE;Ot.Videos=pz;class cde extends Ot{constructor(e){super({...e,dangerouslyAllowBrowser:!0})}}function ude(t){return new cde({apiKey:t.apiKey,organization:t.organization,baseURL:t.baseURL})}function hde(t){return`${t}-${Date.now()}-${Math.random().toString(36).substring(7)}`}class dde extends $ue{constructor(e,n){super({},n),this.kind="text",this.name="openai",this.client=ude(e)}async*chatStream(e){const n=new Map,s=this.mapTextOptionsToOpenAI(e);try{const r=await this.client.responses.create({...s,stream:!0},{headers:e.request?.headers,signal:e.request?.signal});yield*this.processOpenAIStreamChunks(r,n,e,()=>hde(this.name))}catch(r){const i=r;throw console.error(">>> chatStream: Fatal error during response creation <<<"),console.error(">>> Error message:",i.message),console.error(">>> Error stack:",i.stack),console.error(">>> Full error:",i),r}}async structuredOutput(e){const{chatOptions:n,outputSchema:s}=e,r=this.mapTextOptionsToOpenAI(n),i=Kl(s,s.required||[]);try{const a=await this.client.responses.create({...r,stream:!1,text:{format:{type:"json_schema",name:"structured_output",schema:i,strict:!0}}},{headers:n.request?.headers,signal:n.request?.signal}),l=this.extractTextFromResponse(a);let u;try{u=JSON.parse(l)}catch{throw new Error(`Failed to parse structured output as JSON. Content: ${l.slice(0,200)}${l.length>200?"...":""}`)}return{data:oC(u),rawText:l}}catch(a){const l=a;throw console.error(">>> structuredOutput: Error during response creation <<<"),console.error(">>> Error message:",l.message),a}}extractTextFromResponse(e){let n="";for(const s of e.output)if(s.type==="message")for(const r of s.content)r.type==="output_text"&&(n+=r.text);return n}async*processOpenAIStreamChunks(e,n,s,r){let i="",a="";const l=Date.now();let u=0,h=!1,m=!1,p=null,g=s.model;try{for await(const y of e){u++;const b=_=>_.type==="output_text"?(i+=_.text,{type:"content",id:p||r(),model:g||s.model,timestamp:l,delta:_.text,content:i,role:"assistant"}):_.type==="reasoning_text"?(a+=_.text,{type:"thinking",id:p||r(),model:g||s.model,timestamp:l,delta:_.text,content:a}):{type:"error",id:p||r(),model:g||s.model,timestamp:l,error:{message:_.refusal}};if((y.type==="response.created"||y.type==="response.incomplete"||y.type==="response.failed")&&(p=y.response.id,g=y.response.model,h=!1,m=!1,i="",a="",y.response.error&&(yield{type:"error",id:y.response.id,model:y.response.model,timestamp:l,error:y.response.error}),y.response.incomplete_details&&(yield{type:"error",id:y.response.id,model:y.response.model,timestamp:l,error:{message:y.response.incomplete_details.reason??""}})),y.type==="response.output_text.delta"&&y.delta){const _=Array.isArray(y.delta)?y.delta.join(""):typeof y.delta=="string"?y.delta:"";_&&(i+=_,h=!0,yield{type:"content",id:p||r(),model:g||s.model,timestamp:l,delta:_,content:i,role:"assistant"})}if(y.type==="response.reasoning_text.delta"&&y.delta){const _=Array.isArray(y.delta)?y.delta.join(""):typeof y.delta=="string"?y.delta:"";_&&(a+=_,m=!0,yield{type:"thinking",id:p||r(),model:g||s.model,timestamp:l,delta:_,content:a})}if(y.type==="response.reasoning_summary_text.delta"&&y.delta){const _=typeof y.delta=="string"?y.delta:"";_&&(a+=_,m=!0,yield{type:"thinking",id:p||r(),model:g||s.model,timestamp:l,delta:_,content:a})}if(y.type==="response.content_part.added"){const _=y.part;yield b(_)}if(y.type==="response.content_part.done"){const _=y.part;if(_.type==="output_text"&&h||_.type==="reasoning_text"&&m)continue;yield b(_)}if(y.type==="response.output_item.added"){const _=y.item;_.type==="function_call"&&_.id&&(n.has(_.id)||n.set(_.id,{index:y.output_index,name:_.name||""}))}if(y.type==="response.function_call_arguments.done"){const{item_id:_,output_index:w}=y,C=n.get(_)?.name||"";yield{type:"tool_call",id:p||r(),model:g||s.model,timestamp:l,index:w,toolCall:{id:_,type:"function",function:{name:C,arguments:y.arguments}}}}if(y.type==="response.completed"){const _=y.response.output.some(w=>w.type==="function_call");yield{type:"done",id:p||r(),model:g||s.model,timestamp:l,usage:{promptTokens:y.response.usage?.input_tokens||0,completionTokens:y.response.usage?.output_tokens||0,totalTokens:y.response.usage?.total_tokens||0},finishReason:_?"tool_calls":"stop"}}y.type==="error"&&(yield{type:"error",id:p||r(),model:g||s.model,timestamp:l,error:{message:y.message,code:y.code??void 0}})}}catch(y){const b=y;console.log("[OpenAI Adapter] Stream ended with error. Event type summary:",{totalChunks:u,error:b.message}),yield{type:"error",id:r(),model:s.model,timestamp:l,error:{message:b.message||"Unknown error occurred",code:b.code}}}}mapTextOptionsToOpenAI(e){const n=e.modelOptions,s=this.convertMessagesToInput(e.messages);n&&Fue({...n,model:e.model});const r=e.tools?nhe(e.tools):void 0;return{model:e.model,temperature:e.temperature,max_output_tokens:e.maxTokens,top_p:e.topP,metadata:e.metadata,instructions:e.systemPrompts?.join(`
`),...n,input:s,tools:r}}convertMessagesToInput(e){const n=[];for(const s of e){if(s.role==="tool"){n.push({type:"function_call_output",call_id:s.toolCallId||"",output:typeof s.content=="string"?s.content:JSON.stringify(s.content)});continue}if(s.role==="assistant"){if(s.toolCalls&&s.toolCalls.length>0)for(const a of s.toolCalls){const l=typeof a.function.arguments=="string"?a.function.arguments:JSON.stringify(a.function.arguments);n.push({type:"function_call",call_id:a.id,name:a.function.name,arguments:l})}if(s.content){const a=this.extractTextContent(s.content);a&&n.push({type:"message",role:"assistant",content:a})}continue}const r=this.normalizeContent(s.content),i=[];for(const a of r)i.push(this.convertContentPartToOpenAI(a));i.length===0&&i.push({type:"input_text",text:""}),n.push({type:"message",role:"user",content:i})}return n}convertContentPartToOpenAI(e){switch(e.type){case"text":return{type:"input_text",text:e.content};case"image":{const n=e.metadata;return e.source.type==="url"?{type:"input_image",image_url:e.source.value,detail:n?.detail||"auto"}:{type:"input_image",image_url:e.source.value,detail:n?.detail||"auto"}}case"audio":return e.source.type==="url"?{type:"input_file",file_url:e.source.value}:{type:"input_file",file_data:e.source.value};default:throw new Error(`Unsupported content part type: ${e.type}`)}}normalizeContent(e){return e===null?[]:typeof e=="string"?[{type:"text",content:e}]:e}extractTextContent(e){return e===null?"":typeof e=="string"?e:e.filter(n=>n.type==="text").map(n=>n.content).join("")}}function fde(t){const e=`${window.location.origin}/openai/v1`;return new dde({apiKey:"not-needed",baseURL:e},t)}function pde(){return sa().ai?.model||"gpt-5.1"}function mde(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const gde=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,yde=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,vde={};function _I(t,e){return(vde.jsx?yde:gde).test(t)}const bde=/[ \t\n\f\r]/g;function _de(t){return typeof t=="object"?t.type==="text"?xI(t.value):!1:xI(t)}function xI(t){return t.replace(bde,"")===""}class Bm{constructor(e,n,s){this.normal=n,this.property=e,s&&(this.space=s)}}Bm.prototype.normal={};Bm.prototype.property={};Bm.prototype.space=void 0;function vz(t,e){const n={},s={};for(const r of t)Object.assign(n,r.property),Object.assign(s,r.normal);return new Bm(n,s,e)}function wC(t){return t.toLowerCase()}class mr{constructor(e,n){this.attribute=n,this.property=e}}mr.prototype.attribute="";mr.prototype.booleanish=!1;mr.prototype.boolean=!1;mr.prototype.commaOrSpaceSeparated=!1;mr.prototype.commaSeparated=!1;mr.prototype.defined=!1;mr.prototype.mustUseProperty=!1;mr.prototype.number=!1;mr.prototype.overloadedBoolean=!1;mr.prototype.property="";mr.prototype.spaceSeparated=!1;mr.prototype.space=void 0;let xde=0;const jt=$c(),Vn=$c(),SC=$c(),Ae=$c(),hn=$c(),oh=$c(),Rr=$c();function $c(){return 2**++xde}const kC=Object.freeze(Object.defineProperty({__proto__:null,boolean:jt,booleanish:Vn,commaOrSpaceSeparated:Rr,commaSeparated:oh,number:Ae,overloadedBoolean:SC,spaceSeparated:hn},Symbol.toStringTag,{value:"Module"})),cS=Object.keys(kC);class sA extends mr{constructor(e,n,s,r){let i=-1;if(super(e,n),wI(this,"space",r),typeof s=="number")for(;++i<cS.length;){const a=cS[i];wI(this,cS[i],(s&kC[a])===kC[a])}}}sA.prototype.defined=!0;function wI(t,e,n){n&&(t[e]=n)}function nd(t){const e={},n={};for(const[s,r]of Object.entries(t.properties)){const i=new sA(s,t.transform(t.attributes||{},s),r,t.space);t.mustUseProperty&&t.mustUseProperty.includes(s)&&(i.mustUseProperty=!0),e[s]=i,n[wC(s)]=s,n[wC(i.attribute)]=s}return new Bm(e,n,t.space)}const bz=nd({properties:{ariaActiveDescendant:null,ariaAtomic:Vn,ariaAutoComplete:null,ariaBusy:Vn,ariaChecked:Vn,ariaColCount:Ae,ariaColIndex:Ae,ariaColSpan:Ae,ariaControls:hn,ariaCurrent:null,ariaDescribedBy:hn,ariaDetails:null,ariaDisabled:Vn,ariaDropEffect:hn,ariaErrorMessage:null,ariaExpanded:Vn,ariaFlowTo:hn,ariaGrabbed:Vn,ariaHasPopup:null,ariaHidden:Vn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:hn,ariaLevel:Ae,ariaLive:null,ariaModal:Vn,ariaMultiLine:Vn,ariaMultiSelectable:Vn,ariaOrientation:null,ariaOwns:hn,ariaPlaceholder:null,ariaPosInSet:Ae,ariaPressed:Vn,ariaReadOnly:Vn,ariaRelevant:null,ariaRequired:Vn,ariaRoleDescription:hn,ariaRowCount:Ae,ariaRowIndex:Ae,ariaRowSpan:Ae,ariaSelected:Vn,ariaSetSize:Ae,ariaSort:null,ariaValueMax:Ae,ariaValueMin:Ae,ariaValueNow:Ae,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function _z(t,e){return e in t?t[e]:e}function xz(t,e){return _z(t,e.toLowerCase())}const wde=nd({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:oh,acceptCharset:hn,accessKey:hn,action:null,allow:null,allowFullScreen:jt,allowPaymentRequest:jt,allowUserMedia:jt,alt:null,as:null,async:jt,autoCapitalize:null,autoComplete:hn,autoFocus:jt,autoPlay:jt,blocking:hn,capture:null,charSet:null,checked:jt,cite:null,className:hn,cols:Ae,colSpan:null,content:null,contentEditable:Vn,controls:jt,controlsList:hn,coords:Ae|oh,crossOrigin:null,data:null,dateTime:null,decoding:null,default:jt,defer:jt,dir:null,dirName:null,disabled:jt,download:SC,draggable:Vn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:jt,formTarget:null,headers:hn,height:Ae,hidden:SC,high:Ae,href:null,hrefLang:null,htmlFor:hn,httpEquiv:hn,id:null,imageSizes:null,imageSrcSet:null,inert:jt,inputMode:null,integrity:null,is:null,isMap:jt,itemId:null,itemProp:hn,itemRef:hn,itemScope:jt,itemType:hn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:jt,low:Ae,manifest:null,max:null,maxLength:Ae,media:null,method:null,min:null,minLength:Ae,multiple:jt,muted:jt,name:null,nonce:null,noModule:jt,noValidate:jt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:jt,optimum:Ae,pattern:null,ping:hn,placeholder:null,playsInline:jt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:jt,referrerPolicy:null,rel:hn,required:jt,reversed:jt,rows:Ae,rowSpan:Ae,sandbox:hn,scope:null,scoped:jt,seamless:jt,selected:jt,shadowRootClonable:jt,shadowRootDelegatesFocus:jt,shadowRootMode:null,shape:null,size:Ae,sizes:null,slot:null,span:Ae,spellCheck:Vn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ae,step:null,style:null,tabIndex:Ae,target:null,title:null,translate:null,type:null,typeMustMatch:jt,useMap:null,value:Vn,width:Ae,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:hn,axis:null,background:null,bgColor:null,border:Ae,borderColor:null,bottomMargin:Ae,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:jt,declare:jt,event:null,face:null,frame:null,frameBorder:null,hSpace:Ae,leftMargin:Ae,link:null,longDesc:null,lowSrc:null,marginHeight:Ae,marginWidth:Ae,noResize:jt,noHref:jt,noShade:jt,noWrap:jt,object:null,profile:null,prompt:null,rev:null,rightMargin:Ae,rules:null,scheme:null,scrolling:Vn,standby:null,summary:null,text:null,topMargin:Ae,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ae,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:jt,disableRemotePlayback:jt,prefix:null,property:null,results:Ae,security:null,unselectable:null},space:"html",transform:xz}),Sde=nd({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Rr,accentHeight:Ae,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ae,amplitude:Ae,arabicForm:null,ascent:Ae,attributeName:null,attributeType:null,azimuth:Ae,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ae,by:null,calcMode:null,capHeight:Ae,className:hn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ae,diffuseConstant:Ae,direction:null,display:null,dur:null,divisor:Ae,dominantBaseline:null,download:jt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ae,enableBackground:null,end:null,event:null,exponent:Ae,externalResourcesRequired:null,fill:null,fillOpacity:Ae,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:oh,g2:oh,glyphName:oh,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ae,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ae,horizOriginX:Ae,horizOriginY:Ae,id:null,ideographic:Ae,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ae,k:Ae,k1:Ae,k2:Ae,k3:Ae,k4:Ae,kernelMatrix:Rr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ae,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ae,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ae,overlineThickness:Ae,paintOrder:null,panose1:null,path:null,pathLength:Ae,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:hn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ae,pointsAtY:Ae,pointsAtZ:Ae,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Rr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Rr,rev:Rr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Rr,requiredFeatures:Rr,requiredFonts:Rr,requiredFormats:Rr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ae,specularExponent:Ae,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ae,strikethroughThickness:Ae,string:null,stroke:null,strokeDashArray:Rr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ae,strokeOpacity:Ae,strokeWidth:null,style:null,surfaceScale:Ae,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Rr,tabIndex:Ae,tableValues:null,target:null,targetX:Ae,targetY:Ae,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Rr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ae,underlineThickness:Ae,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ae,values:null,vAlphabetic:Ae,vMathematical:Ae,vectorEffect:null,vHanging:Ae,vIdeographic:Ae,version:null,vertAdvY:Ae,vertOriginX:Ae,vertOriginY:Ae,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ae,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:_z}),wz=nd({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),Sz=nd({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:xz}),kz=nd({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),kde={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Cde=/[A-Z]/g,SI=/-[a-z]/g,Nde=/^data[-\w.:]+$/i;function Ede(t,e){const n=wC(e);let s=e,r=mr;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Nde.test(e)){if(e.charAt(4)==="-"){const i=e.slice(5).replace(SI,Rde);s="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=e.slice(4);if(!SI.test(i)){let a=i.replace(Cde,Ade);a.charAt(0)!=="-"&&(a="-"+a),e="data"+a}}r=sA}return new r(s,e)}function Ade(t){return"-"+t.toLowerCase()}function Rde(t){return t.charAt(1).toUpperCase()}const Tde=vz([bz,wde,wz,Sz,kz],"html"),rA=vz([bz,Sde,wz,Sz,kz],"svg");function jde(t){return t.join(" ").trim()}var Mu={},uS,kI;function Ode(){if(kI)return uS;kI=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,s=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,i=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,l=/^\s+|\s+$/g,u=`
`,h="/",m="*",p="",g="comment",y="declaration";function b(w,k){if(typeof w!="string")throw new TypeError("First argument must be a string");if(!w)return[];k=k||{};var C=1,E=1;function A(Z){var K=Z.match(e);K&&(C+=K.length);var B=Z.lastIndexOf(u);E=~B?Z.length-B:E+Z.length}function R(){var Z={line:C,column:E};return function(K){return K.position=new N(Z),W(),K}}function N(Z){this.start=Z,this.end={line:C,column:E},this.source=k.source}N.prototype.content=w;function M(Z){var K=new Error(k.source+":"+C+":"+E+": "+Z);if(K.reason=Z,K.filename=k.source,K.line=C,K.column=E,K.source=w,!k.silent)throw K}function I(Z){var K=Z.exec(w);if(K){var B=K[0];return A(B),w=w.slice(B.length),K}}function W(){I(n)}function P(Z){var K;for(Z=Z||[];K=G();)K!==!1&&Z.push(K);return Z}function G(){var Z=R();if(!(h!=w.charAt(0)||m!=w.charAt(1))){for(var K=2;p!=w.charAt(K)&&(m!=w.charAt(K)||h!=w.charAt(K+1));)++K;if(K+=2,p===w.charAt(K-1))return M("End of comment missing");var B=w.slice(2,K-2);return E+=2,A(B),w=w.slice(K),E+=2,Z({type:g,comment:B})}}function $(){var Z=R(),K=I(s);if(K){if(G(),!I(r))return M("property missing ':'");var B=I(i),J=Z({type:y,property:_(K[0].replace(t,p)),value:B?_(B[0].replace(t,p)):p});return I(a),J}}function U(){var Z=[];P(Z);for(var K;K=$();)K!==!1&&(Z.push(K),P(Z));return Z}return W(),U()}function _(w){return w?w.replace(l,p):p}return uS=b,uS}var CI;function Mde(){if(CI)return Mu;CI=1;var t=Mu&&Mu.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Mu,"__esModule",{value:!0}),Mu.default=n;const e=t(Ode());function n(s,r){let i=null;if(!s||typeof s!="string")return i;const a=(0,e.default)(s),l=typeof r=="function";return a.forEach(u=>{if(u.type!=="declaration")return;const{property:h,value:m}=u;l?r(h,m,u):m&&(i=i||{},i[h]=m)}),i}return Mu}var ff={},NI;function Ide(){if(NI)return ff;NI=1,Object.defineProperty(ff,"__esModule",{value:!0}),ff.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,s=/^-(webkit|moz|ms|o|khtml)-/,r=/^-(ms)-/,i=function(h){return!h||n.test(h)||t.test(h)},a=function(h,m){return m.toUpperCase()},l=function(h,m){return"".concat(m,"-")},u=function(h,m){return m===void 0&&(m={}),i(h)?h:(h=h.toLowerCase(),m.reactCompat?h=h.replace(r,l):h=h.replace(s,l),h.replace(e,a))};return ff.camelCase=u,ff}var pf,EI;function Dde(){if(EI)return pf;EI=1;var t=pf&&pf.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},e=t(Mde()),n=Ide();function s(r,i){var a={};return!r||typeof r!="string"||(0,e.default)(r,function(l,u){l&&u&&(a[(0,n.camelCase)(l,i)]=u)}),a}return s.default=s,pf=s,pf}var Lde=Dde();const Pde=Vv(Lde),Cz=Nz("end"),iA=Nz("start");function Nz(t){return e;function e(n){const s=n&&n.position&&n.position[t]||{};if(typeof s.line=="number"&&s.line>0&&typeof s.column=="number"&&s.column>0)return{line:s.line,column:s.column,offset:typeof s.offset=="number"&&s.offset>-1?s.offset:void 0}}}function Bde(t){const e=iA(t),n=Cz(t);if(e&&n)return{start:e,end:n}}function Sp(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?AI(t.position):"start"in t||"end"in t?AI(t):"line"in t||"column"in t?CC(t):""}function CC(t){return RI(t&&t.line)+":"+RI(t&&t.column)}function AI(t){return CC(t&&t.start)+"-"+CC(t&&t.end)}function RI(t){return t&&typeof t=="number"?t:1}class Ls extends Error{constructor(e,n,s){super(),typeof n=="string"&&(s=n,n=void 0);let r="",i={},a=!1;if(n&&("line"in n&&"column"in n?i={place:n}:"start"in n&&"end"in n?i={place:n}:"type"in n?i={ancestors:[n],place:n.position}:i={...n}),typeof e=="string"?r=e:!i.cause&&e&&(a=!0,r=e.message,i.cause=e),!i.ruleId&&!i.source&&typeof s=="string"){const u=s.indexOf(":");u===-1?i.ruleId=s:(i.source=s.slice(0,u),i.ruleId=s.slice(u+1))}if(!i.place&&i.ancestors&&i.ancestors){const u=i.ancestors[i.ancestors.length-1];u&&(i.place=u.position)}const l=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=l?l.line:void 0,this.name=Sp(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=a&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Ls.prototype.file="";Ls.prototype.name="";Ls.prototype.reason="";Ls.prototype.message="";Ls.prototype.stack="";Ls.prototype.column=void 0;Ls.prototype.line=void 0;Ls.prototype.ancestors=void 0;Ls.prototype.cause=void 0;Ls.prototype.fatal=void 0;Ls.prototype.place=void 0;Ls.prototype.ruleId=void 0;Ls.prototype.source=void 0;const aA={}.hasOwnProperty,$de=new Map,zde=/[A-Z]/g,Fde=new Set(["table","tbody","thead","tfoot","tr"]),Ude=new Set(["td","th"]),Ez="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Hde(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let s;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");s=Jde(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");s=Zde(n,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:s,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?rA:Tde,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},i=Az(r,t,void 0);return i&&typeof i!="string"?i:r.create(t,r.Fragment,{children:i||void 0},void 0)}function Az(t,e,n){if(e.type==="element")return Vde(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return qde(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return Wde(t,e,n);if(e.type==="mdxjsEsm")return Kde(t,e);if(e.type==="root")return Gde(t,e,n);if(e.type==="text")return Yde(t,e)}function Vde(t,e,n){const s=t.schema;let r=s;e.tagName.toLowerCase()==="svg"&&s.space==="html"&&(r=rA,t.schema=r),t.ancestors.push(e);const i=Tz(t,e.tagName,!1),a=Xde(t,e);let l=lA(t,e);return Fde.has(e.tagName)&&(l=l.filter(function(u){return typeof u=="string"?!_de(u):!0})),Rz(t,a,i,e),oA(a,l),t.ancestors.pop(),t.schema=s,t.create(e,i,a,n)}function qde(t,e){if(e.data&&e.data.estree&&t.evaluater){const s=e.data.estree.body[0];return s.type,t.evaluater.evaluateExpression(s.expression)}em(t,e.position)}function Kde(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);em(t,e.position)}function Wde(t,e,n){const s=t.schema;let r=s;e.name==="svg"&&s.space==="html"&&(r=rA,t.schema=r),t.ancestors.push(e);const i=e.name===null?t.Fragment:Tz(t,e.name,!0),a=Qde(t,e),l=lA(t,e);return Rz(t,a,i,e),oA(a,l),t.ancestors.pop(),t.schema=s,t.create(e,i,a,n)}function Gde(t,e,n){const s={};return oA(s,lA(t,e)),t.create(e,t.Fragment,s,n)}function Yde(t,e){return e.value}function Rz(t,e,n,s){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=s)}function oA(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function Zde(t,e,n){return s;function s(r,i,a,l){const h=Array.isArray(a.children)?n:e;return l?h(i,a,l):h(i,a)}}function Jde(t,e){return n;function n(s,r,i,a){const l=Array.isArray(i.children),u=iA(s);return e(r,i,a,l,{columnNumber:u?u.column-1:void 0,fileName:t,lineNumber:u?u.line:void 0},void 0)}}function Xde(t,e){const n={};let s,r;for(r in e.properties)if(r!=="children"&&aA.call(e.properties,r)){const i=efe(t,r,e.properties[r]);if(i){const[a,l]=i;t.tableCellAlignToStyle&&a==="align"&&typeof l=="string"&&Ude.has(e.tagName)?s=l:n[a]=l}}if(s){const i=n.style||(n.style={});i[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=s}return n}function Qde(t,e){const n={};for(const s of e.attributes)if(s.type==="mdxJsxExpressionAttribute")if(s.data&&s.data.estree&&t.evaluater){const i=s.data.estree.body[0];i.type;const a=i.expression;a.type;const l=a.properties[0];l.type,Object.assign(n,t.evaluater.evaluateExpression(l.argument))}else em(t,e.position);else{const r=s.name;let i;if(s.value&&typeof s.value=="object")if(s.value.data&&s.value.data.estree&&t.evaluater){const l=s.value.data.estree.body[0];l.type,i=t.evaluater.evaluateExpression(l.expression)}else em(t,e.position);else i=s.value===null?!0:s.value;n[r]=i}return n}function lA(t,e){const n=[];let s=-1;const r=t.passKeys?new Map:$de;for(;++s<e.children.length;){const i=e.children[s];let a;if(t.passKeys){const u=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(u){const h=r.get(u)||0;a=u+"-"+h,r.set(u,h+1)}}const l=Az(t,i,a);l!==void 0&&n.push(l)}return n}function efe(t,e,n){const s=Ede(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=s.commaSeparated?mde(n):jde(n)),s.property==="style"){let r=typeof n=="object"?n:tfe(t,String(n));return t.stylePropertyNameCase==="css"&&(r=nfe(r)),["style",r]}return[t.elementAttributeNameCase==="react"&&s.space?kde[s.property]||s.property:s.attribute,n]}}function tfe(t,e){try{return Pde(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const s=n,r=new Ls("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=t.filePath||void 0,r.url=Ez+"#cannot-parse-style-attribute",r}}function Tz(t,e,n){let s;if(!n)s={type:"Literal",value:e};else if(e.includes(".")){const r=e.split(".");let i=-1,a;for(;++i<r.length;){const l=_I(r[i])?{type:"Identifier",name:r[i]}:{type:"Literal",value:r[i]};a=a?{type:"MemberExpression",object:a,property:l,computed:!!(i&&l.type==="Literal"),optional:!1}:l}s=a}else s=_I(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(s.type==="Literal"){const r=s.value;return aA.call(t.components,r)?t.components[r]:r}if(t.evaluater)return t.evaluater.evaluateExpression(s);em(t)}function em(t,e){const n=new Ls("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=Ez+"#cannot-handle-mdx-estrees-without-createevaluater",n}function nfe(t){const e={};let n;for(n in t)aA.call(t,n)&&(e[sfe(n)]=t[n]);return e}function sfe(t){let e=t.replace(zde,rfe);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function rfe(t){return"-"+t.toLowerCase()}const hS={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},ife={};function cA(t,e){const n=ife,s=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,r=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return jz(t,s,r)}function jz(t,e,n){if(afe(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return TI(t.children,e,n)}return Array.isArray(t)?TI(t,e,n):""}function TI(t,e,n){const s=[];let r=-1;for(;++r<t.length;)s[r]=jz(t[r],e,n);return s.join("")}function afe(t){return!!(t&&typeof t=="object")}const jI=document.createElement("i");function uA(t){const e="&"+t+";";jI.innerHTML=e;const n=jI.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Pr(t,e,n,s){const r=t.length;let i=0,a;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,n=n>0?n:0,s.length<1e4)a=Array.from(s),a.unshift(e,n),t.splice(...a);else for(n&&t.splice(e,n);i<s.length;)a=s.slice(i,i+1e4),a.unshift(e,0),t.splice(...a),i+=1e4,e+=1e4}function oi(t,e){return t.length>0?(Pr(t,t.length,0,e),t):e}const OI={}.hasOwnProperty;function Oz(t){const e={};let n=-1;for(;++n<t.length;)ofe(e,t[n]);return e}function ofe(t,e){let n;for(n in e){const r=(OI.call(t,n)?t[n]:void 0)||(t[n]={}),i=e[n];let a;if(i)for(a in i){OI.call(r,a)||(r[a]=[]);const l=i[a];lfe(r[a],Array.isArray(l)?l:l?[l]:[])}}}function lfe(t,e){let n=-1;const s=[];for(;++n<e.length;)(e[n].add==="after"?t:s).push(e[n]);Pr(t,0,0,s)}function Mz(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Ai(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Hs=vl(/[A-Za-z]/),Ms=vl(/[\dA-Za-z]/),cfe=vl(/[#-'*+\--9=?A-Z^-~]/);function $v(t){return t!==null&&(t<32||t===127)}const NC=vl(/\d/),ufe=vl(/[\dA-Fa-f]/),hfe=vl(/[!-/:-@[-`{-~]/);function ht(t){return t!==null&&t<-2}function un(t){return t!==null&&(t<0||t===32)}function zt(t){return t===-2||t===-1||t===32}const b1=vl(new RegExp("\\p{P}|\\p{S}","u")),jc=vl(/\s/);function vl(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function sd(t){const e=[];let n=-1,s=0,r=0;for(;++n<t.length;){const i=t.charCodeAt(n);let a="";if(i===37&&Ms(t.charCodeAt(n+1))&&Ms(t.charCodeAt(n+2)))r=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(a=String.fromCharCode(i));else if(i>55295&&i<57344){const l=t.charCodeAt(n+1);i<56320&&l>56319&&l<57344?(a=String.fromCharCode(i,l),r=1):a=""}else a=String.fromCharCode(i);a&&(e.push(t.slice(s,n),encodeURIComponent(a)),s=n+r+1,a=""),r&&(n+=r,r=0)}return e.join("")+t.slice(s)}function Vt(t,e,n,s){const r=s?s-1:Number.POSITIVE_INFINITY;let i=0;return a;function a(u){return zt(u)?(t.enter(n),l(u)):e(u)}function l(u){return zt(u)&&i++<r?(t.consume(u),l):(t.exit(n),e(u))}}const dfe={tokenize:ffe};function ffe(t){const e=t.attempt(this.parser.constructs.contentInitial,s,r);let n;return e;function s(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),Vt(t,e,"linePrefix")}function r(l){return t.enter("paragraph"),i(l)}function i(l){const u=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,a(l)}function a(l){if(l===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(l);return}return ht(l)?(t.consume(l),t.exit("chunkText"),i):(t.consume(l),a)}}const pfe={tokenize:mfe},MI={tokenize:gfe};function mfe(t){const e=this,n=[];let s=0,r,i,a;return l;function l(E){if(s<n.length){const A=n[s];return e.containerState=A[1],t.attempt(A[0].continuation,u,h)(E)}return h(E)}function u(E){if(s++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&C();const A=e.events.length;let R=A,N;for(;R--;)if(e.events[R][0]==="exit"&&e.events[R][1].type==="chunkFlow"){N=e.events[R][1].end;break}k(s);let M=A;for(;M<e.events.length;)e.events[M][1].end={...N},M++;return Pr(e.events,R+1,0,e.events.slice(A)),e.events.length=M,h(E)}return l(E)}function h(E){if(s===n.length){if(!r)return g(E);if(r.currentConstruct&&r.currentConstruct.concrete)return b(E);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(MI,m,p)(E)}function m(E){return r&&C(),k(s),g(E)}function p(E){return e.parser.lazy[e.now().line]=s!==n.length,a=e.now().offset,b(E)}function g(E){return e.containerState={},t.attempt(MI,y,b)(E)}function y(E){return s++,n.push([e.currentConstruct,e.containerState]),g(E)}function b(E){if(E===null){r&&C(),k(0),t.consume(E);return}return r=r||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:i}),_(E)}function _(E){if(E===null){w(t.exit("chunkFlow"),!0),k(0),t.consume(E);return}return ht(E)?(t.consume(E),w(t.exit("chunkFlow")),s=0,e.interrupt=void 0,l):(t.consume(E),_)}function w(E,A){const R=e.sliceStream(E);if(A&&R.push(null),E.previous=i,i&&(i.next=E),i=E,r.defineSkip(E.start),r.write(R),e.parser.lazy[E.start.line]){let N=r.events.length;for(;N--;)if(r.events[N][1].start.offset<a&&(!r.events[N][1].end||r.events[N][1].end.offset>a))return;const M=e.events.length;let I=M,W,P;for(;I--;)if(e.events[I][0]==="exit"&&e.events[I][1].type==="chunkFlow"){if(W){P=e.events[I][1].end;break}W=!0}for(k(s),N=M;N<e.events.length;)e.events[N][1].end={...P},N++;Pr(e.events,I+1,0,e.events.slice(M)),e.events.length=N}}function k(E){let A=n.length;for(;A-- >E;){const R=n[A];e.containerState=R[1],R[0].exit.call(e,t)}n.length=E}function C(){r.write([null]),i=void 0,r=void 0,e.containerState._closeFlow=void 0}}function gfe(t,e,n){return Vt(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Rh(t){if(t===null||un(t)||jc(t))return 1;if(b1(t))return 2}function _1(t,e,n){const s=[];let r=-1;for(;++r<t.length;){const i=t[r].resolveAll;i&&!s.includes(i)&&(e=i(e,n),s.push(i))}return e}const EC={name:"attention",resolveAll:yfe,tokenize:vfe};function yfe(t,e){let n=-1,s,r,i,a,l,u,h,m;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(s=n;s--;)if(t[s][0]==="exit"&&t[s][1].type==="attentionSequence"&&t[s][1]._open&&e.sliceSerialize(t[s][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[s][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[s][1].end.offset-t[s][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;u=t[s][1].end.offset-t[s][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const p={...t[s][1].end},g={...t[n][1].start};II(p,-u),II(g,u),a={type:u>1?"strongSequence":"emphasisSequence",start:p,end:{...t[s][1].end}},l={type:u>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:g},i={type:u>1?"strongText":"emphasisText",start:{...t[s][1].end},end:{...t[n][1].start}},r={type:u>1?"strong":"emphasis",start:{...a.start},end:{...l.end}},t[s][1].end={...a.start},t[n][1].start={...l.end},h=[],t[s][1].end.offset-t[s][1].start.offset&&(h=oi(h,[["enter",t[s][1],e],["exit",t[s][1],e]])),h=oi(h,[["enter",r,e],["enter",a,e],["exit",a,e],["enter",i,e]]),h=oi(h,_1(e.parser.constructs.insideSpan.null,t.slice(s+1,n),e)),h=oi(h,[["exit",i,e],["enter",l,e],["exit",l,e],["exit",r,e]]),t[n][1].end.offset-t[n][1].start.offset?(m=2,h=oi(h,[["enter",t[n][1],e],["exit",t[n][1],e]])):m=0,Pr(t,s-1,n-s+3,h),n=s+h.length-m-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function vfe(t,e){const n=this.parser.constructs.attentionMarkers.null,s=this.previous,r=Rh(s);let i;return a;function a(u){return i=u,t.enter("attentionSequence"),l(u)}function l(u){if(u===i)return t.consume(u),l;const h=t.exit("attentionSequence"),m=Rh(u),p=!m||m===2&&r||n.includes(u),g=!r||r===2&&m||n.includes(s);return h._open=!!(i===42?p:p&&(r||!g)),h._close=!!(i===42?g:g&&(m||!p)),e(u)}}function II(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const bfe={name:"autolink",tokenize:_fe};function _fe(t,e,n){let s=0;return r;function r(y){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),i}function i(y){return Hs(y)?(t.consume(y),a):y===64?n(y):h(y)}function a(y){return y===43||y===45||y===46||Ms(y)?(s=1,l(y)):h(y)}function l(y){return y===58?(t.consume(y),s=0,u):(y===43||y===45||y===46||Ms(y))&&s++<32?(t.consume(y),l):(s=0,h(y))}function u(y){return y===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),e):y===null||y===32||y===60||$v(y)?n(y):(t.consume(y),u)}function h(y){return y===64?(t.consume(y),m):cfe(y)?(t.consume(y),h):n(y)}function m(y){return Ms(y)?p(y):n(y)}function p(y){return y===46?(t.consume(y),s=0,m):y===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),e):g(y)}function g(y){if((y===45||Ms(y))&&s++<63){const b=y===45?g:p;return t.consume(y),b}return n(y)}}const $m={partial:!0,tokenize:xfe};function xfe(t,e,n){return s;function s(i){return zt(i)?Vt(t,r,"linePrefix")(i):r(i)}function r(i){return i===null||ht(i)?e(i):n(i)}}const Iz={continuation:{tokenize:Sfe},exit:kfe,name:"blockQuote",tokenize:wfe};function wfe(t,e,n){const s=this;return r;function r(a){if(a===62){const l=s.containerState;return l.open||(t.enter("blockQuote",{_container:!0}),l.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(a),t.exit("blockQuoteMarker"),i}return n(a)}function i(a){return zt(a)?(t.enter("blockQuotePrefixWhitespace"),t.consume(a),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(a))}}function Sfe(t,e,n){const s=this;return r;function r(a){return zt(a)?Vt(t,i,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):i(a)}function i(a){return t.attempt(Iz,e,n)(a)}}function kfe(t){t.exit("blockQuote")}const Dz={name:"characterEscape",tokenize:Cfe};function Cfe(t,e,n){return s;function s(i){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(i),t.exit("escapeMarker"),r}function r(i){return hfe(i)?(t.enter("characterEscapeValue"),t.consume(i),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(i)}}const Lz={name:"characterReference",tokenize:Nfe};function Nfe(t,e,n){const s=this;let r=0,i,a;return l;function l(p){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),u}function u(p){return p===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(p),t.exit("characterReferenceMarkerNumeric"),h):(t.enter("characterReferenceValue"),i=31,a=Ms,m(p))}function h(p){return p===88||p===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(p),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),i=6,a=ufe,m):(t.enter("characterReferenceValue"),i=7,a=NC,m(p))}function m(p){if(p===59&&r){const g=t.exit("characterReferenceValue");return a===Ms&&!uA(s.sliceSerialize(g))?n(p):(t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return a(p)&&r++<i?(t.consume(p),m):n(p)}}const DI={partial:!0,tokenize:Afe},LI={concrete:!0,name:"codeFenced",tokenize:Efe};function Efe(t,e,n){const s=this,r={partial:!0,tokenize:R};let i=0,a=0,l;return u;function u(N){return h(N)}function h(N){const M=s.events[s.events.length-1];return i=M&&M[1].type==="linePrefix"?M[2].sliceSerialize(M[1],!0).length:0,l=N,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),m(N)}function m(N){return N===l?(a++,t.consume(N),m):a<3?n(N):(t.exit("codeFencedFenceSequence"),zt(N)?Vt(t,p,"whitespace")(N):p(N))}function p(N){return N===null||ht(N)?(t.exit("codeFencedFence"),s.interrupt?e(N):t.check(DI,_,A)(N)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),g(N))}function g(N){return N===null||ht(N)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),p(N)):zt(N)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Vt(t,y,"whitespace")(N)):N===96&&N===l?n(N):(t.consume(N),g)}function y(N){return N===null||ht(N)?p(N):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),b(N))}function b(N){return N===null||ht(N)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),p(N)):N===96&&N===l?n(N):(t.consume(N),b)}function _(N){return t.attempt(r,A,w)(N)}function w(N){return t.enter("lineEnding"),t.consume(N),t.exit("lineEnding"),k}function k(N){return i>0&&zt(N)?Vt(t,C,"linePrefix",i+1)(N):C(N)}function C(N){return N===null||ht(N)?t.check(DI,_,A)(N):(t.enter("codeFlowValue"),E(N))}function E(N){return N===null||ht(N)?(t.exit("codeFlowValue"),C(N)):(t.consume(N),E)}function A(N){return t.exit("codeFenced"),e(N)}function R(N,M,I){let W=0;return P;function P(K){return N.enter("lineEnding"),N.consume(K),N.exit("lineEnding"),G}function G(K){return N.enter("codeFencedFence"),zt(K)?Vt(N,$,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(K):$(K)}function $(K){return K===l?(N.enter("codeFencedFenceSequence"),U(K)):I(K)}function U(K){return K===l?(W++,N.consume(K),U):W>=a?(N.exit("codeFencedFenceSequence"),zt(K)?Vt(N,Z,"whitespace")(K):Z(K)):I(K)}function Z(K){return K===null||ht(K)?(N.exit("codeFencedFence"),M(K)):I(K)}}}function Afe(t,e,n){const s=this;return r;function r(a){return a===null?n(a):(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),i)}function i(a){return s.parser.lazy[s.now().line]?n(a):e(a)}}const dS={name:"codeIndented",tokenize:Tfe},Rfe={partial:!0,tokenize:jfe};function Tfe(t,e,n){const s=this;return r;function r(h){return t.enter("codeIndented"),Vt(t,i,"linePrefix",5)(h)}function i(h){const m=s.events[s.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?a(h):n(h)}function a(h){return h===null?u(h):ht(h)?t.attempt(Rfe,a,u)(h):(t.enter("codeFlowValue"),l(h))}function l(h){return h===null||ht(h)?(t.exit("codeFlowValue"),a(h)):(t.consume(h),l)}function u(h){return t.exit("codeIndented"),e(h)}}function jfe(t,e,n){const s=this;return r;function r(a){return s.parser.lazy[s.now().line]?n(a):ht(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),r):Vt(t,i,"linePrefix",5)(a)}function i(a){const l=s.events[s.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(a):ht(a)?r(a):n(a)}}const Ofe={name:"codeText",previous:Ife,resolve:Mfe,tokenize:Dfe};function Mfe(t){let e=t.length-4,n=3,s,r;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(s=n;++s<e;)if(t[s][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(s=n-1,e++;++s<=e;)r===void 0?s!==e&&t[s][1].type!=="lineEnding"&&(r=s):(s===e||t[s][1].type==="lineEnding")&&(t[r][1].type="codeTextData",s!==r+2&&(t[r][1].end=t[s-1][1].end,t.splice(r+2,s-r-2),e-=s-r-2,s=r+2),r=void 0);return t}function Ife(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Dfe(t,e,n){let s=0,r,i;return a;function a(p){return t.enter("codeText"),t.enter("codeTextSequence"),l(p)}function l(p){return p===96?(t.consume(p),s++,l):(t.exit("codeTextSequence"),u(p))}function u(p){return p===null?n(p):p===32?(t.enter("space"),t.consume(p),t.exit("space"),u):p===96?(i=t.enter("codeTextSequence"),r=0,m(p)):ht(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),u):(t.enter("codeTextData"),h(p))}function h(p){return p===null||p===32||p===96||ht(p)?(t.exit("codeTextData"),u(p)):(t.consume(p),h)}function m(p){return p===96?(t.consume(p),r++,m):r===s?(t.exit("codeTextSequence"),t.exit("codeText"),e(p)):(i.type="codeTextData",h(p))}}class Lfe{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const s=n??Number.POSITIVE_INFINITY;return s<this.left.length?this.left.slice(e,s):e>this.left.length?this.right.slice(this.right.length-s+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-s+this.left.length).reverse())}splice(e,n,s){const r=n||0;this.setCursor(Math.trunc(e));const i=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return s&&mf(this.left,s),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),mf(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),mf(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);mf(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);mf(this.left,n.reverse())}}}function mf(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function Pz(t){const e={};let n=-1,s,r,i,a,l,u,h;const m=new Lfe(t);for(;++n<m.length;){for(;n in e;)n=e[n];if(s=m.get(n),n&&s[1].type==="chunkFlow"&&m.get(n-1)[1].type==="listItemPrefix"&&(u=s[1]._tokenizer.events,i=0,i<u.length&&u[i][1].type==="lineEndingBlank"&&(i+=2),i<u.length&&u[i][1].type==="content"))for(;++i<u.length&&u[i][1].type!=="content";)u[i][1].type==="chunkText"&&(u[i][1]._isInFirstContentOfListItem=!0,i++);if(s[0]==="enter")s[1].contentType&&(Object.assign(e,Pfe(m,n)),n=e[n],h=!0);else if(s[1]._container){for(i=n,r=void 0;i--;)if(a=m.get(i),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(r&&(m.get(r)[1].type="lineEndingBlank"),a[1].type="lineEnding",r=i);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;r&&(s[1].end={...m.get(r)[1].start},l=m.slice(r,n),l.unshift(s),m.splice(r,n-r+1,l))}}return Pr(t,0,Number.POSITIVE_INFINITY,m.slice(0)),!h}function Pfe(t,e){const n=t.get(e)[1],s=t.get(e)[2];let r=e-1;const i=[];let a=n._tokenizer;a||(a=s.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const l=a.events,u=[],h={};let m,p,g=-1,y=n,b=0,_=0;const w=[_];for(;y;){for(;t.get(++r)[1]!==y;);i.push(r),y._tokenizer||(m=s.sliceStream(y),y.next||m.push(null),p&&a.defineSkip(y.start),y._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(m),y._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),p=y,y=y.next}for(y=n;++g<l.length;)l[g][0]==="exit"&&l[g-1][0]==="enter"&&l[g][1].type===l[g-1][1].type&&l[g][1].start.line!==l[g][1].end.line&&(_=g+1,w.push(_),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(a.events=[],y?(y._tokenizer=void 0,y.previous=void 0):w.pop(),g=w.length;g--;){const k=l.slice(w[g],w[g+1]),C=i.pop();u.push([C,C+k.length-1]),t.splice(C,2,k)}for(u.reverse(),g=-1;++g<u.length;)h[b+u[g][0]]=b+u[g][1],b+=u[g][1]-u[g][0]-1;return h}const Bfe={resolve:zfe,tokenize:Ffe},$fe={partial:!0,tokenize:Ufe};function zfe(t){return Pz(t),t}function Ffe(t,e){let n;return s;function s(l){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),r(l)}function r(l){return l===null?i(l):ht(l)?t.check($fe,a,i)(l):(t.consume(l),r)}function i(l){return t.exit("chunkContent"),t.exit("content"),e(l)}function a(l){return t.consume(l),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}function Ufe(t,e,n){const s=this;return r;function r(a){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Vt(t,i,"linePrefix")}function i(a){if(a===null||ht(a))return n(a);const l=s.events[s.events.length-1];return!s.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(a):t.interrupt(s.parser.constructs.flow,n,e)(a)}}function Bz(t,e,n,s,r,i,a,l,u){const h=u||Number.POSITIVE_INFINITY;let m=0;return p;function p(k){return k===60?(t.enter(s),t.enter(r),t.enter(i),t.consume(k),t.exit(i),g):k===null||k===32||k===41||$v(k)?n(k):(t.enter(s),t.enter(a),t.enter(l),t.enter("chunkString",{contentType:"string"}),_(k))}function g(k){return k===62?(t.enter(i),t.consume(k),t.exit(i),t.exit(r),t.exit(s),e):(t.enter(l),t.enter("chunkString",{contentType:"string"}),y(k))}function y(k){return k===62?(t.exit("chunkString"),t.exit(l),g(k)):k===null||k===60||ht(k)?n(k):(t.consume(k),k===92?b:y)}function b(k){return k===60||k===62||k===92?(t.consume(k),y):y(k)}function _(k){return!m&&(k===null||k===41||un(k))?(t.exit("chunkString"),t.exit(l),t.exit(a),t.exit(s),e(k)):m<h&&k===40?(t.consume(k),m++,_):k===41?(t.consume(k),m--,_):k===null||k===32||k===40||$v(k)?n(k):(t.consume(k),k===92?w:_)}function w(k){return k===40||k===41||k===92?(t.consume(k),_):_(k)}}function $z(t,e,n,s,r,i){const a=this;let l=0,u;return h;function h(y){return t.enter(s),t.enter(r),t.consume(y),t.exit(r),t.enter(i),m}function m(y){return l>999||y===null||y===91||y===93&&!u||y===94&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(y):y===93?(t.exit(i),t.enter(r),t.consume(y),t.exit(r),t.exit(s),e):ht(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),m):(t.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===null||y===91||y===93||ht(y)||l++>999?(t.exit("chunkString"),m(y)):(t.consume(y),u||(u=!zt(y)),y===92?g:p)}function g(y){return y===91||y===92||y===93?(t.consume(y),l++,p):p(y)}}function zz(t,e,n,s,r,i){let a;return l;function l(g){return g===34||g===39||g===40?(t.enter(s),t.enter(r),t.consume(g),t.exit(r),a=g===40?41:g,u):n(g)}function u(g){return g===a?(t.enter(r),t.consume(g),t.exit(r),t.exit(s),e):(t.enter(i),h(g))}function h(g){return g===a?(t.exit(i),u(a)):g===null?n(g):ht(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),Vt(t,h,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),m(g))}function m(g){return g===a||g===null||ht(g)?(t.exit("chunkString"),h(g)):(t.consume(g),g===92?p:m)}function p(g){return g===a||g===92?(t.consume(g),m):m(g)}}function kp(t,e){let n;return s;function s(r){return ht(r)?(t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),n=!0,s):zt(r)?Vt(t,s,n?"linePrefix":"lineSuffix")(r):e(r)}}const Hfe={name:"definition",tokenize:qfe},Vfe={partial:!0,tokenize:Kfe};function qfe(t,e,n){const s=this;let r;return i;function i(y){return t.enter("definition"),a(y)}function a(y){return $z.call(s,t,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function l(y){return r=Ai(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)),y===58?(t.enter("definitionMarker"),t.consume(y),t.exit("definitionMarker"),u):n(y)}function u(y){return un(y)?kp(t,h)(y):h(y)}function h(y){return Bz(t,m,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function m(y){return t.attempt(Vfe,p,p)(y)}function p(y){return zt(y)?Vt(t,g,"whitespace")(y):g(y)}function g(y){return y===null||ht(y)?(t.exit("definition"),s.parser.defined.push(r),e(y)):n(y)}}function Kfe(t,e,n){return s;function s(l){return un(l)?kp(t,r)(l):n(l)}function r(l){return zz(t,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function i(l){return zt(l)?Vt(t,a,"whitespace")(l):a(l)}function a(l){return l===null||ht(l)?e(l):n(l)}}const Wfe={name:"hardBreakEscape",tokenize:Gfe};function Gfe(t,e,n){return s;function s(i){return t.enter("hardBreakEscape"),t.consume(i),r}function r(i){return ht(i)?(t.exit("hardBreakEscape"),e(i)):n(i)}}const Yfe={name:"headingAtx",resolve:Zfe,tokenize:Jfe};function Zfe(t,e){let n=t.length-2,s=3,r,i;return t[s][1].type==="whitespace"&&(s+=2),n-2>s&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(s===n-1||n-4>s&&t[n-2][1].type==="whitespace")&&(n-=s+1===n?2:4),n>s&&(r={type:"atxHeadingText",start:t[s][1].start,end:t[n][1].end},i={type:"chunkText",start:t[s][1].start,end:t[n][1].end,contentType:"text"},Pr(t,s,n-s+1,[["enter",r,e],["enter",i,e],["exit",i,e],["exit",r,e]])),t}function Jfe(t,e,n){let s=0;return r;function r(m){return t.enter("atxHeading"),i(m)}function i(m){return t.enter("atxHeadingSequence"),a(m)}function a(m){return m===35&&s++<6?(t.consume(m),a):m===null||un(m)?(t.exit("atxHeadingSequence"),l(m)):n(m)}function l(m){return m===35?(t.enter("atxHeadingSequence"),u(m)):m===null||ht(m)?(t.exit("atxHeading"),e(m)):zt(m)?Vt(t,l,"whitespace")(m):(t.enter("atxHeadingText"),h(m))}function u(m){return m===35?(t.consume(m),u):(t.exit("atxHeadingSequence"),l(m))}function h(m){return m===null||m===35||un(m)?(t.exit("atxHeadingText"),l(m)):(t.consume(m),h)}}const Xfe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],PI=["pre","script","style","textarea"],Qfe={concrete:!0,name:"htmlFlow",resolveTo:npe,tokenize:spe},epe={partial:!0,tokenize:ipe},tpe={partial:!0,tokenize:rpe};function npe(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function spe(t,e,n){const s=this;let r,i,a,l,u;return h;function h(T){return m(T)}function m(T){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(T),p}function p(T){return T===33?(t.consume(T),g):T===47?(t.consume(T),i=!0,_):T===63?(t.consume(T),r=3,s.interrupt?e:O):Hs(T)?(t.consume(T),a=String.fromCharCode(T),w):n(T)}function g(T){return T===45?(t.consume(T),r=2,y):T===91?(t.consume(T),r=5,l=0,b):Hs(T)?(t.consume(T),r=4,s.interrupt?e:O):n(T)}function y(T){return T===45?(t.consume(T),s.interrupt?e:O):n(T)}function b(T){const Q="CDATA[";return T===Q.charCodeAt(l++)?(t.consume(T),l===Q.length?s.interrupt?e:$:b):n(T)}function _(T){return Hs(T)?(t.consume(T),a=String.fromCharCode(T),w):n(T)}function w(T){if(T===null||T===47||T===62||un(T)){const Q=T===47,te=a.toLowerCase();return!Q&&!i&&PI.includes(te)?(r=1,s.interrupt?e(T):$(T)):Xfe.includes(a.toLowerCase())?(r=6,Q?(t.consume(T),k):s.interrupt?e(T):$(T)):(r=7,s.interrupt&&!s.parser.lazy[s.now().line]?n(T):i?C(T):E(T))}return T===45||Ms(T)?(t.consume(T),a+=String.fromCharCode(T),w):n(T)}function k(T){return T===62?(t.consume(T),s.interrupt?e:$):n(T)}function C(T){return zt(T)?(t.consume(T),C):P(T)}function E(T){return T===47?(t.consume(T),P):T===58||T===95||Hs(T)?(t.consume(T),A):zt(T)?(t.consume(T),E):P(T)}function A(T){return T===45||T===46||T===58||T===95||Ms(T)?(t.consume(T),A):R(T)}function R(T){return T===61?(t.consume(T),N):zt(T)?(t.consume(T),R):E(T)}function N(T){return T===null||T===60||T===61||T===62||T===96?n(T):T===34||T===39?(t.consume(T),u=T,M):zt(T)?(t.consume(T),N):I(T)}function M(T){return T===u?(t.consume(T),u=null,W):T===null||ht(T)?n(T):(t.consume(T),M)}function I(T){return T===null||T===34||T===39||T===47||T===60||T===61||T===62||T===96||un(T)?R(T):(t.consume(T),I)}function W(T){return T===47||T===62||zt(T)?E(T):n(T)}function P(T){return T===62?(t.consume(T),G):n(T)}function G(T){return T===null||ht(T)?$(T):zt(T)?(t.consume(T),G):n(T)}function $(T){return T===45&&r===2?(t.consume(T),B):T===60&&r===1?(t.consume(T),J):T===62&&r===4?(t.consume(T),L):T===63&&r===3?(t.consume(T),O):T===93&&r===5?(t.consume(T),z):ht(T)&&(r===6||r===7)?(t.exit("htmlFlowData"),t.check(epe,V,U)(T)):T===null||ht(T)?(t.exit("htmlFlowData"),U(T)):(t.consume(T),$)}function U(T){return t.check(tpe,Z,V)(T)}function Z(T){return t.enter("lineEnding"),t.consume(T),t.exit("lineEnding"),K}function K(T){return T===null||ht(T)?U(T):(t.enter("htmlFlowData"),$(T))}function B(T){return T===45?(t.consume(T),O):$(T)}function J(T){return T===47?(t.consume(T),a="",Y):$(T)}function Y(T){if(T===62){const Q=a.toLowerCase();return PI.includes(Q)?(t.consume(T),L):$(T)}return Hs(T)&&a.length<8?(t.consume(T),a+=String.fromCharCode(T),Y):$(T)}function z(T){return T===93?(t.consume(T),O):$(T)}function O(T){return T===62?(t.consume(T),L):T===45&&r===2?(t.consume(T),O):$(T)}function L(T){return T===null||ht(T)?(t.exit("htmlFlowData"),V(T)):(t.consume(T),L)}function V(T){return t.exit("htmlFlow"),e(T)}}function rpe(t,e,n){const s=this;return r;function r(a){return ht(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),i):n(a)}function i(a){return s.parser.lazy[s.now().line]?n(a):e(a)}}function ipe(t,e,n){return s;function s(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),t.attempt($m,e,n)}}const ape={name:"htmlText",tokenize:ope};function ope(t,e,n){const s=this;let r,i,a;return l;function l(O){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(O),u}function u(O){return O===33?(t.consume(O),h):O===47?(t.consume(O),R):O===63?(t.consume(O),E):Hs(O)?(t.consume(O),I):n(O)}function h(O){return O===45?(t.consume(O),m):O===91?(t.consume(O),i=0,b):Hs(O)?(t.consume(O),C):n(O)}function m(O){return O===45?(t.consume(O),y):n(O)}function p(O){return O===null?n(O):O===45?(t.consume(O),g):ht(O)?(a=p,J(O)):(t.consume(O),p)}function g(O){return O===45?(t.consume(O),y):p(O)}function y(O){return O===62?B(O):O===45?g(O):p(O)}function b(O){const L="CDATA[";return O===L.charCodeAt(i++)?(t.consume(O),i===L.length?_:b):n(O)}function _(O){return O===null?n(O):O===93?(t.consume(O),w):ht(O)?(a=_,J(O)):(t.consume(O),_)}function w(O){return O===93?(t.consume(O),k):_(O)}function k(O){return O===62?B(O):O===93?(t.consume(O),k):_(O)}function C(O){return O===null||O===62?B(O):ht(O)?(a=C,J(O)):(t.consume(O),C)}function E(O){return O===null?n(O):O===63?(t.consume(O),A):ht(O)?(a=E,J(O)):(t.consume(O),E)}function A(O){return O===62?B(O):E(O)}function R(O){return Hs(O)?(t.consume(O),N):n(O)}function N(O){return O===45||Ms(O)?(t.consume(O),N):M(O)}function M(O){return ht(O)?(a=M,J(O)):zt(O)?(t.consume(O),M):B(O)}function I(O){return O===45||Ms(O)?(t.consume(O),I):O===47||O===62||un(O)?W(O):n(O)}function W(O){return O===47?(t.consume(O),B):O===58||O===95||Hs(O)?(t.consume(O),P):ht(O)?(a=W,J(O)):zt(O)?(t.consume(O),W):B(O)}function P(O){return O===45||O===46||O===58||O===95||Ms(O)?(t.consume(O),P):G(O)}function G(O){return O===61?(t.consume(O),$):ht(O)?(a=G,J(O)):zt(O)?(t.consume(O),G):W(O)}function $(O){return O===null||O===60||O===61||O===62||O===96?n(O):O===34||O===39?(t.consume(O),r=O,U):ht(O)?(a=$,J(O)):zt(O)?(t.consume(O),$):(t.consume(O),Z)}function U(O){return O===r?(t.consume(O),r=void 0,K):O===null?n(O):ht(O)?(a=U,J(O)):(t.consume(O),U)}function Z(O){return O===null||O===34||O===39||O===60||O===61||O===96?n(O):O===47||O===62||un(O)?W(O):(t.consume(O),Z)}function K(O){return O===47||O===62||un(O)?W(O):n(O)}function B(O){return O===62?(t.consume(O),t.exit("htmlTextData"),t.exit("htmlText"),e):n(O)}function J(O){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(O),t.exit("lineEnding"),Y}function Y(O){return zt(O)?Vt(t,z,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(O):z(O)}function z(O){return t.enter("htmlTextData"),a(O)}}const hA={name:"labelEnd",resolveAll:hpe,resolveTo:dpe,tokenize:fpe},lpe={tokenize:ppe},cpe={tokenize:mpe},upe={tokenize:gpe};function hpe(t){let e=-1;const n=[];for(;++e<t.length;){const s=t[e][1];if(n.push(t[e]),s.type==="labelImage"||s.type==="labelLink"||s.type==="labelEnd"){const r=s.type==="labelImage"?4:2;s.type="data",e+=r}}return t.length!==n.length&&Pr(t,0,t.length,n),t}function dpe(t,e){let n=t.length,s=0,r,i,a,l;for(;n--;)if(r=t[n][1],i){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;t[n][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(a){if(t[n][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(i=n,r.type!=="labelLink")){s=2;break}}else r.type==="labelEnd"&&(a=n);const u={type:t[i][1].type==="labelLink"?"link":"image",start:{...t[i][1].start},end:{...t[t.length-1][1].end}},h={type:"label",start:{...t[i][1].start},end:{...t[a][1].end}},m={type:"labelText",start:{...t[i+s+2][1].end},end:{...t[a-2][1].start}};return l=[["enter",u,e],["enter",h,e]],l=oi(l,t.slice(i+1,i+s+3)),l=oi(l,[["enter",m,e]]),l=oi(l,_1(e.parser.constructs.insideSpan.null,t.slice(i+s+4,a-3),e)),l=oi(l,[["exit",m,e],t[a-2],t[a-1],["exit",h,e]]),l=oi(l,t.slice(a+1)),l=oi(l,[["exit",u,e]]),Pr(t,i,t.length,l),t}function fpe(t,e,n){const s=this;let r=s.events.length,i,a;for(;r--;)if((s.events[r][1].type==="labelImage"||s.events[r][1].type==="labelLink")&&!s.events[r][1]._balanced){i=s.events[r][1];break}return l;function l(g){return i?i._inactive?p(g):(a=s.parser.defined.includes(Ai(s.sliceSerialize({start:i.end,end:s.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(g),t.exit("labelMarker"),t.exit("labelEnd"),u):n(g)}function u(g){return g===40?t.attempt(lpe,m,a?m:p)(g):g===91?t.attempt(cpe,m,a?h:p)(g):a?m(g):p(g)}function h(g){return t.attempt(upe,m,p)(g)}function m(g){return e(g)}function p(g){return i._balanced=!0,n(g)}}function ppe(t,e,n){return s;function s(p){return t.enter("resource"),t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),r}function r(p){return un(p)?kp(t,i)(p):i(p)}function i(p){return p===41?m(p):Bz(t,a,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function a(p){return un(p)?kp(t,u)(p):m(p)}function l(p){return n(p)}function u(p){return p===34||p===39||p===40?zz(t,h,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):m(p)}function h(p){return un(p)?kp(t,m)(p):m(p)}function m(p){return p===41?(t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),t.exit("resource"),e):n(p)}}function mpe(t,e,n){const s=this;return r;function r(l){return $z.call(s,t,i,a,"reference","referenceMarker","referenceString")(l)}function i(l){return s.parser.defined.includes(Ai(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)))?e(l):n(l)}function a(l){return n(l)}}function gpe(t,e,n){return s;function s(i){return t.enter("reference"),t.enter("referenceMarker"),t.consume(i),t.exit("referenceMarker"),r}function r(i){return i===93?(t.enter("referenceMarker"),t.consume(i),t.exit("referenceMarker"),t.exit("reference"),e):n(i)}}const ype={name:"labelStartImage",resolveAll:hA.resolveAll,tokenize:vpe};function vpe(t,e,n){const s=this;return r;function r(l){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(l),t.exit("labelImageMarker"),i}function i(l){return l===91?(t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelImage"),a):n(l)}function a(l){return l===94&&"_hiddenFootnoteSupport"in s.parser.constructs?n(l):e(l)}}const bpe={name:"labelStartLink",resolveAll:hA.resolveAll,tokenize:_pe};function _pe(t,e,n){const s=this;return r;function r(a){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelLink"),i}function i(a){return a===94&&"_hiddenFootnoteSupport"in s.parser.constructs?n(a):e(a)}}const fS={name:"lineEnding",tokenize:xpe};function xpe(t,e){return n;function n(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),Vt(t,e,"linePrefix")}}const yy={name:"thematicBreak",tokenize:wpe};function wpe(t,e,n){let s=0,r;return i;function i(h){return t.enter("thematicBreak"),a(h)}function a(h){return r=h,l(h)}function l(h){return h===r?(t.enter("thematicBreakSequence"),u(h)):s>=3&&(h===null||ht(h))?(t.exit("thematicBreak"),e(h)):n(h)}function u(h){return h===r?(t.consume(h),s++,u):(t.exit("thematicBreakSequence"),zt(h)?Vt(t,l,"whitespace")(h):l(h))}}const ar={continuation:{tokenize:Npe},exit:Ape,name:"list",tokenize:Cpe},Spe={partial:!0,tokenize:Rpe},kpe={partial:!0,tokenize:Epe};function Cpe(t,e,n){const s=this,r=s.events[s.events.length-1];let i=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,a=0;return l;function l(y){const b=s.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(b==="listUnordered"?!s.containerState.marker||y===s.containerState.marker:NC(y)){if(s.containerState.type||(s.containerState.type=b,t.enter(b,{_container:!0})),b==="listUnordered")return t.enter("listItemPrefix"),y===42||y===45?t.check(yy,n,h)(y):h(y);if(!s.interrupt||y===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),u(y)}return n(y)}function u(y){return NC(y)&&++a<10?(t.consume(y),u):(!s.interrupt||a<2)&&(s.containerState.marker?y===s.containerState.marker:y===41||y===46)?(t.exit("listItemValue"),h(y)):n(y)}function h(y){return t.enter("listItemMarker"),t.consume(y),t.exit("listItemMarker"),s.containerState.marker=s.containerState.marker||y,t.check($m,s.interrupt?n:m,t.attempt(Spe,g,p))}function m(y){return s.containerState.initialBlankLine=!0,i++,g(y)}function p(y){return zt(y)?(t.enter("listItemPrefixWhitespace"),t.consume(y),t.exit("listItemPrefixWhitespace"),g):n(y)}function g(y){return s.containerState.size=i+s.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(y)}}function Npe(t,e,n){const s=this;return s.containerState._closeFlow=void 0,t.check($m,r,i);function r(l){return s.containerState.furtherBlankLines=s.containerState.furtherBlankLines||s.containerState.initialBlankLine,Vt(t,e,"listItemIndent",s.containerState.size+1)(l)}function i(l){return s.containerState.furtherBlankLines||!zt(l)?(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,a(l)):(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,t.attempt(kpe,e,a)(l))}function a(l){return s.containerState._closeFlow=!0,s.interrupt=void 0,Vt(t,t.attempt(ar,e,n),"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function Epe(t,e,n){const s=this;return Vt(t,r,"listItemIndent",s.containerState.size+1);function r(i){const a=s.events[s.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===s.containerState.size?e(i):n(i)}}function Ape(t){t.exit(this.containerState.type)}function Rpe(t,e,n){const s=this;return Vt(t,r,"listItemPrefixWhitespace",s.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(i){const a=s.events[s.events.length-1];return!zt(i)&&a&&a[1].type==="listItemPrefixWhitespace"?e(i):n(i)}}const BI={name:"setextUnderline",resolveTo:Tpe,tokenize:jpe};function Tpe(t,e){let n=t.length,s,r,i;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){s=n;break}t[n][1].type==="paragraph"&&(r=n)}else t[n][1].type==="content"&&t.splice(n,1),!i&&t[n][1].type==="definition"&&(i=n);const a={type:"setextHeading",start:{...t[s][1].start},end:{...t[t.length-1][1].end}};return t[r][1].type="setextHeadingText",i?(t.splice(r,0,["enter",a,e]),t.splice(i+1,0,["exit",t[s][1],e]),t[s][1].end={...t[i][1].end}):t[s][1]=a,t.push(["exit",a,e]),t}function jpe(t,e,n){const s=this;let r;return i;function i(h){let m=s.events.length,p;for(;m--;)if(s.events[m][1].type!=="lineEnding"&&s.events[m][1].type!=="linePrefix"&&s.events[m][1].type!=="content"){p=s.events[m][1].type==="paragraph";break}return!s.parser.lazy[s.now().line]&&(s.interrupt||p)?(t.enter("setextHeadingLine"),r=h,a(h)):n(h)}function a(h){return t.enter("setextHeadingLineSequence"),l(h)}function l(h){return h===r?(t.consume(h),l):(t.exit("setextHeadingLineSequence"),zt(h)?Vt(t,u,"lineSuffix")(h):u(h))}function u(h){return h===null||ht(h)?(t.exit("setextHeadingLine"),e(h)):n(h)}}const Ope={tokenize:Mpe};function Mpe(t){const e=this,n=t.attempt($m,s,t.attempt(this.parser.constructs.flowInitial,r,Vt(t,t.attempt(this.parser.constructs.flow,r,t.attempt(Bfe,r)),"linePrefix")));return n;function s(i){if(i===null){t.consume(i);return}return t.enter("lineEndingBlank"),t.consume(i),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function r(i){if(i===null){t.consume(i);return}return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const Ipe={resolveAll:Uz()},Dpe=Fz("string"),Lpe=Fz("text");function Fz(t){return{resolveAll:Uz(t==="text"?Ppe:void 0),tokenize:e};function e(n){const s=this,r=this.parser.constructs[t],i=n.attempt(r,a,l);return a;function a(m){return h(m)?i(m):l(m)}function l(m){if(m===null){n.consume(m);return}return n.enter("data"),n.consume(m),u}function u(m){return h(m)?(n.exit("data"),i(m)):(n.consume(m),u)}function h(m){if(m===null)return!0;const p=r[m];let g=-1;if(p)for(;++g<p.length;){const y=p[g];if(!y.previous||y.previous.call(s,s.previous))return!0}return!1}}}function Uz(t){return e;function e(n,s){let r=-1,i;for(;++r<=n.length;)i===void 0?n[r]&&n[r][1].type==="data"&&(i=r,r++):(!n[r]||n[r][1].type!=="data")&&(r!==i+2&&(n[i][1].end=n[r-1][1].end,n.splice(i+2,r-i-2),r=i+2),i=void 0);return t?t(n,s):n}}function Ppe(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const s=t[n-1][1],r=e.sliceStream(s);let i=r.length,a=-1,l=0,u;for(;i--;){const h=r[i];if(typeof h=="string"){for(a=h.length;h.charCodeAt(a-1)===32;)l++,a--;if(a)break;a=-1}else if(h===-2)u=!0,l++;else if(h!==-1){i++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(l=0),l){const h={type:n===t.length||u||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?a:s.start._bufferIndex+a,_index:s.start._index+i,line:s.end.line,column:s.end.column-l,offset:s.end.offset-l},end:{...s.end}};s.end={...h.start},s.start.offset===s.end.offset?Object.assign(s,h):(t.splice(n,0,["enter",h,e],["exit",h,e]),n+=2)}n++}return t}const Bpe={42:ar,43:ar,45:ar,48:ar,49:ar,50:ar,51:ar,52:ar,53:ar,54:ar,55:ar,56:ar,57:ar,62:Iz},$pe={91:Hfe},zpe={[-2]:dS,[-1]:dS,32:dS},Fpe={35:Yfe,42:yy,45:[BI,yy],60:Qfe,61:BI,95:yy,96:LI,126:LI},Upe={38:Lz,92:Dz},Hpe={[-5]:fS,[-4]:fS,[-3]:fS,33:ype,38:Lz,42:EC,60:[bfe,ape],91:bpe,92:[Wfe,Dz],93:hA,95:EC,96:Ofe},Vpe={null:[EC,Ipe]},qpe={null:[42,95]},Kpe={null:[]},Wpe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:qpe,contentInitial:$pe,disable:Kpe,document:Bpe,flow:Fpe,flowInitial:zpe,insideSpan:Vpe,string:Upe,text:Hpe},Symbol.toStringTag,{value:"Module"}));function Gpe(t,e,n){let s={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const r={},i=[];let a=[],l=[];const u={attempt:M(R),check:M(N),consume:C,enter:E,exit:A,interrupt:M(N,{interrupt:!0})},h={code:null,containerState:{},defineSkip:_,events:[],now:b,parser:t,previous:null,sliceSerialize:g,sliceStream:y,write:p};let m=e.tokenize.call(h,u);return e.resolveAll&&i.push(e),h;function p(G){return a=oi(a,G),w(),a[a.length-1]!==null?[]:(I(e,0),h.events=_1(i,h.events,h),h.events)}function g(G,$){return Zpe(y(G),$)}function y(G){return Ype(a,G)}function b(){const{_bufferIndex:G,_index:$,line:U,column:Z,offset:K}=s;return{_bufferIndex:G,_index:$,line:U,column:Z,offset:K}}function _(G){r[G.line]=G.column,P()}function w(){let G;for(;s._index<a.length;){const $=a[s._index];if(typeof $=="string")for(G=s._index,s._bufferIndex<0&&(s._bufferIndex=0);s._index===G&&s._bufferIndex<$.length;)k($.charCodeAt(s._bufferIndex));else k($)}}function k(G){m=m(G)}function C(G){ht(G)?(s.line++,s.column=1,s.offset+=G===-3?2:1,P()):G!==-1&&(s.column++,s.offset++),s._bufferIndex<0?s._index++:(s._bufferIndex++,s._bufferIndex===a[s._index].length&&(s._bufferIndex=-1,s._index++)),h.previous=G}function E(G,$){const U=$||{};return U.type=G,U.start=b(),h.events.push(["enter",U,h]),l.push(U),U}function A(G){const $=l.pop();return $.end=b(),h.events.push(["exit",$,h]),$}function R(G,$){I(G,$.from)}function N(G,$){$.restore()}function M(G,$){return U;function U(Z,K,B){let J,Y,z,O;return Array.isArray(Z)?V(Z):"tokenize"in Z?V([Z]):L(Z);function L(X){return oe;function oe(xe){const Se=xe!==null&&X[xe],Xe=xe!==null&&X.null,Ke=[...Array.isArray(Se)?Se:Se?[Se]:[],...Array.isArray(Xe)?Xe:Xe?[Xe]:[]];return V(Ke)(xe)}}function V(X){return J=X,Y=0,X.length===0?B:T(X[Y])}function T(X){return oe;function oe(xe){return O=W(),z=X,X.partial||(h.currentConstruct=X),X.name&&h.parser.constructs.disable.null.includes(X.name)?te():X.tokenize.call($?Object.assign(Object.create(h),$):h,u,Q,te)(xe)}}function Q(X){return G(z,O),K}function te(X){return O.restore(),++Y<J.length?T(J[Y]):B}}}function I(G,$){G.resolveAll&&!i.includes(G)&&i.push(G),G.resolve&&Pr(h.events,$,h.events.length-$,G.resolve(h.events.slice($),h)),G.resolveTo&&(h.events=G.resolveTo(h.events,h))}function W(){const G=b(),$=h.previous,U=h.currentConstruct,Z=h.events.length,K=Array.from(l);return{from:Z,restore:B};function B(){s=G,h.previous=$,h.currentConstruct=U,h.events.length=Z,l=K,P()}}function P(){s.line in r&&s.column<2&&(s.column=r[s.line],s.offset+=r[s.line]-1)}}function Ype(t,e){const n=e.start._index,s=e.start._bufferIndex,r=e.end._index,i=e.end._bufferIndex;let a;if(n===r)a=[t[n].slice(s,i)];else{if(a=t.slice(n,r),s>-1){const l=a[0];typeof l=="string"?a[0]=l.slice(s):a.shift()}i>0&&a.push(t[r].slice(0,i))}return a}function Zpe(t,e){let n=-1;const s=[];let r;for(;++n<t.length;){const i=t[n];let a;if(typeof i=="string")a=i;else switch(i){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=e?" ":"	";break}case-1:{if(!e&&r)continue;a=" ";break}default:a=String.fromCharCode(i)}r=i===-2,s.push(a)}return s.join("")}function Jpe(t){const s={constructs:Oz([Wpe,...(t||{}).extensions||[]]),content:r(dfe),defined:[],document:r(pfe),flow:r(Ope),lazy:{},string:r(Dpe),text:r(Lpe)};return s;function r(i){return a;function a(l){return Gpe(s,i,l)}}}function Xpe(t){for(;!Pz(t););return t}const $I=/[\0\t\n\r]/g;function Qpe(){let t=1,e="",n=!0,s;return r;function r(i,a,l){const u=[];let h,m,p,g,y;for(i=e+(typeof i=="string"?i.toString():new TextDecoder(a||void 0).decode(i)),p=0,e="",n&&(i.charCodeAt(0)===65279&&p++,n=void 0);p<i.length;){if($I.lastIndex=p,h=$I.exec(i),g=h&&h.index!==void 0?h.index:i.length,y=i.charCodeAt(g),!h){e=i.slice(p);break}if(y===10&&p===g&&s)u.push(-3),s=void 0;else switch(s&&(u.push(-5),s=void 0),p<g&&(u.push(i.slice(p,g)),t+=g-p),y){case 0:{u.push(65533),t++;break}case 9:{for(m=Math.ceil(t/4)*4,u.push(-2);t++<m;)u.push(-1);break}case 10:{u.push(-4),t=1;break}default:s=!0,t=1}p=g+1}return l&&(s&&u.push(-5),e&&u.push(e),u.push(null)),u}}const eme=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function tme(t){return t.replace(eme,nme)}function nme(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const r=n.charCodeAt(1),i=r===120||r===88;return Mz(n.slice(i?2:1),i?16:10)}return uA(n)||t}const Hz={}.hasOwnProperty;function sme(t,e,n){return typeof e!="string"&&(n=e,e=void 0),rme(n)(Xpe(Jpe(n).document().write(Qpe()(t,e,!0))))}function rme(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(pt),autolinkProtocol:W,autolinkEmail:W,atxHeading:i(ct),blockQuote:i(Xe),characterEscape:W,characterReference:W,codeFenced:i(Ke),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:i(Ke,a),codeText:i(st,a),codeTextData:W,data:W,codeFlowValue:W,definition:i(Le),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:i(Ge),hardBreakEscape:i(ut),hardBreakTrailing:i(ut),htmlFlow:i(Re,a),htmlFlowData:W,htmlText:i(Re,a),htmlTextData:W,image:i(mt),label:a,link:i(pt),listItem:i(Me),listItemValue:g,listOrdered:i(At,p),listUnordered:i(At),paragraph:i(ze),reference:T,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:i(ct),strong:i(De),thematicBreak:i(Ee)},exit:{atxHeading:u(),atxHeadingSequence:R,autolink:u(),autolinkEmail:Se,autolinkProtocol:xe,blockQuote:u(),characterEscapeValue:P,characterReferenceMarkerHexadecimal:te,characterReferenceMarkerNumeric:te,characterReferenceValue:X,characterReference:oe,codeFenced:u(w),codeFencedFence:_,codeFencedFenceInfo:y,codeFencedFenceMeta:b,codeFlowValue:P,codeIndented:u(k),codeText:u(K),codeTextData:P,data:P,definition:u(),definitionDestinationString:A,definitionLabelString:C,definitionTitleString:E,emphasis:u(),hardBreakEscape:u($),hardBreakTrailing:u($),htmlFlow:u(U),htmlFlowData:P,htmlText:u(Z),htmlTextData:P,image:u(J),label:z,labelText:Y,lineEnding:G,link:u(B),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:Q,resourceDestinationString:O,resourceTitleString:L,resource:V,setextHeading:u(I),setextHeadingLineSequence:M,setextHeadingText:N,strong:u(),thematicBreak:u()}};Vz(e,(t||{}).mdastExtensions||[]);const n={};return s;function s(ae){let be={type:"root",children:[]};const Ye={stack:[be],tokenStack:[],config:e,enter:l,exit:h,buffer:a,resume:m,data:n},ft=[];let Rt=-1;for(;++Rt<ae.length;)if(ae[Rt][1].type==="listOrdered"||ae[Rt][1].type==="listUnordered")if(ae[Rt][0]==="enter")ft.push(Rt);else{const xn=ft.pop();Rt=r(ae,xn,Rt)}for(Rt=-1;++Rt<ae.length;){const xn=e[ae[Rt][0]];Hz.call(xn,ae[Rt][1].type)&&xn[ae[Rt][1].type].call(Object.assign({sliceSerialize:ae[Rt][2].sliceSerialize},Ye),ae[Rt][1])}if(Ye.tokenStack.length>0){const xn=Ye.tokenStack[Ye.tokenStack.length-1];(xn[1]||zI).call(Ye,void 0,xn[0])}for(be.position={start:zo(ae.length>0?ae[0][1].start:{line:1,column:1,offset:0}),end:zo(ae.length>0?ae[ae.length-2][1].end:{line:1,column:1,offset:0})},Rt=-1;++Rt<e.transforms.length;)be=e.transforms[Rt](be)||be;return be}function r(ae,be,Ye){let ft=be-1,Rt=-1,xn=!1,re,le,fe,ke;for(;++ft<=Ye;){const je=ae[ft];switch(je[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{je[0]==="enter"?Rt++:Rt--,ke=void 0;break}case"lineEndingBlank":{je[0]==="enter"&&(re&&!ke&&!Rt&&!fe&&(fe=ft),ke=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ke=void 0}if(!Rt&&je[0]==="enter"&&je[1].type==="listItemPrefix"||Rt===-1&&je[0]==="exit"&&(je[1].type==="listUnordered"||je[1].type==="listOrdered")){if(re){let Pt=ft;for(le=void 0;Pt--;){const Dt=ae[Pt];if(Dt[1].type==="lineEnding"||Dt[1].type==="lineEndingBlank"){if(Dt[0]==="exit")continue;le&&(ae[le][1].type="lineEndingBlank",xn=!0),Dt[1].type="lineEnding",le=Pt}else if(!(Dt[1].type==="linePrefix"||Dt[1].type==="blockQuotePrefix"||Dt[1].type==="blockQuotePrefixWhitespace"||Dt[1].type==="blockQuoteMarker"||Dt[1].type==="listItemIndent"))break}fe&&(!le||fe<le)&&(re._spread=!0),re.end=Object.assign({},le?ae[le][1].start:je[1].end),ae.splice(le||ft,0,["exit",re,je[2]]),ft++,Ye++}if(je[1].type==="listItemPrefix"){const Pt={type:"listItem",_spread:!1,start:Object.assign({},je[1].start),end:void 0};re=Pt,ae.splice(ft,0,["enter",Pt,je[2]]),ft++,Ye++,fe=void 0,ke=!0}}}return ae[be][1]._spread=xn,Ye}function i(ae,be){return Ye;function Ye(ft){l.call(this,ae(ft),ft),be&&be.call(this,ft)}}function a(){this.stack.push({type:"fragment",children:[]})}function l(ae,be,Ye){this.stack[this.stack.length-1].children.push(ae),this.stack.push(ae),this.tokenStack.push([be,Ye||void 0]),ae.position={start:zo(be.start),end:void 0}}function u(ae){return be;function be(Ye){ae&&ae.call(this,Ye),h.call(this,Ye)}}function h(ae,be){const Ye=this.stack.pop(),ft=this.tokenStack.pop();if(ft)ft[0].type!==ae.type&&(be?be.call(this,ae,ft[0]):(ft[1]||zI).call(this,ae,ft[0]));else throw new Error("Cannot close `"+ae.type+"` ("+Sp({start:ae.start,end:ae.end})+"): its not open");Ye.position.end=zo(ae.end)}function m(){return cA(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function g(ae){if(this.data.expectingFirstListItemValue){const be=this.stack[this.stack.length-2];be.start=Number.parseInt(this.sliceSerialize(ae),10),this.data.expectingFirstListItemValue=void 0}}function y(){const ae=this.resume(),be=this.stack[this.stack.length-1];be.lang=ae}function b(){const ae=this.resume(),be=this.stack[this.stack.length-1];be.meta=ae}function _(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){const ae=this.resume(),be=this.stack[this.stack.length-1];be.value=ae.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function k(){const ae=this.resume(),be=this.stack[this.stack.length-1];be.value=ae.replace(/(\r?\n|\r)$/g,"")}function C(ae){const be=this.resume(),Ye=this.stack[this.stack.length-1];Ye.label=be,Ye.identifier=Ai(this.sliceSerialize(ae)).toLowerCase()}function E(){const ae=this.resume(),be=this.stack[this.stack.length-1];be.title=ae}function A(){const ae=this.resume(),be=this.stack[this.stack.length-1];be.url=ae}function R(ae){const be=this.stack[this.stack.length-1];if(!be.depth){const Ye=this.sliceSerialize(ae).length;be.depth=Ye}}function N(){this.data.setextHeadingSlurpLineEnding=!0}function M(ae){const be=this.stack[this.stack.length-1];be.depth=this.sliceSerialize(ae).codePointAt(0)===61?1:2}function I(){this.data.setextHeadingSlurpLineEnding=void 0}function W(ae){const Ye=this.stack[this.stack.length-1].children;let ft=Ye[Ye.length-1];(!ft||ft.type!=="text")&&(ft=Je(),ft.position={start:zo(ae.start),end:void 0},Ye.push(ft)),this.stack.push(ft)}function P(ae){const be=this.stack.pop();be.value+=this.sliceSerialize(ae),be.position.end=zo(ae.end)}function G(ae){const be=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ye=be.children[be.children.length-1];Ye.position.end=zo(ae.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(be.type)&&(W.call(this,ae),P.call(this,ae))}function $(){this.data.atHardBreak=!0}function U(){const ae=this.resume(),be=this.stack[this.stack.length-1];be.value=ae}function Z(){const ae=this.resume(),be=this.stack[this.stack.length-1];be.value=ae}function K(){const ae=this.resume(),be=this.stack[this.stack.length-1];be.value=ae}function B(){const ae=this.stack[this.stack.length-1];if(this.data.inReference){const be=this.data.referenceType||"shortcut";ae.type+="Reference",ae.referenceType=be,delete ae.url,delete ae.title}else delete ae.identifier,delete ae.label;this.data.referenceType=void 0}function J(){const ae=this.stack[this.stack.length-1];if(this.data.inReference){const be=this.data.referenceType||"shortcut";ae.type+="Reference",ae.referenceType=be,delete ae.url,delete ae.title}else delete ae.identifier,delete ae.label;this.data.referenceType=void 0}function Y(ae){const be=this.sliceSerialize(ae),Ye=this.stack[this.stack.length-2];Ye.label=tme(be),Ye.identifier=Ai(be).toLowerCase()}function z(){const ae=this.stack[this.stack.length-1],be=this.resume(),Ye=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ye.type==="link"){const ft=ae.children;Ye.children=ft}else Ye.alt=be}function O(){const ae=this.resume(),be=this.stack[this.stack.length-1];be.url=ae}function L(){const ae=this.resume(),be=this.stack[this.stack.length-1];be.title=ae}function V(){this.data.inReference=void 0}function T(){this.data.referenceType="collapsed"}function Q(ae){const be=this.resume(),Ye=this.stack[this.stack.length-1];Ye.label=be,Ye.identifier=Ai(this.sliceSerialize(ae)).toLowerCase(),this.data.referenceType="full"}function te(ae){this.data.characterReferenceType=ae.type}function X(ae){const be=this.sliceSerialize(ae),Ye=this.data.characterReferenceType;let ft;Ye?(ft=Mz(be,Ye==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ft=uA(be);const Rt=this.stack[this.stack.length-1];Rt.value+=ft}function oe(ae){const be=this.stack.pop();be.position.end=zo(ae.end)}function xe(ae){P.call(this,ae);const be=this.stack[this.stack.length-1];be.url=this.sliceSerialize(ae)}function Se(ae){P.call(this,ae);const be=this.stack[this.stack.length-1];be.url="mailto:"+this.sliceSerialize(ae)}function Xe(){return{type:"blockquote",children:[]}}function Ke(){return{type:"code",lang:null,meta:null,value:""}}function st(){return{type:"inlineCode",value:""}}function Le(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ge(){return{type:"emphasis",children:[]}}function ct(){return{type:"heading",depth:0,children:[]}}function ut(){return{type:"break"}}function Re(){return{type:"html",value:""}}function mt(){return{type:"image",title:null,url:"",alt:null}}function pt(){return{type:"link",title:null,url:"",children:[]}}function At(ae){return{type:"list",ordered:ae.type==="listOrdered",start:null,spread:ae._spread,children:[]}}function Me(ae){return{type:"listItem",spread:ae._spread,checked:null,children:[]}}function ze(){return{type:"paragraph",children:[]}}function De(){return{type:"strong",children:[]}}function Je(){return{type:"text",value:""}}function Ee(){return{type:"thematicBreak"}}}function zo(t){return{line:t.line,column:t.column,offset:t.offset}}function Vz(t,e){let n=-1;for(;++n<e.length;){const s=e[n];Array.isArray(s)?Vz(t,s):ime(t,s)}}function ime(t,e){let n;for(n in e)if(Hz.call(e,n))switch(n){case"canContainEols":{const s=e[n];s&&t[n].push(...s);break}case"transforms":{const s=e[n];s&&t[n].push(...s);break}case"enter":case"exit":{const s=e[n];s&&Object.assign(t[n],s);break}}}function zI(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Sp({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Sp({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Sp({start:e.start,end:e.end})+") is still open")}function ame(t){const e=this;e.parser=n;function n(s){return sme(s,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function ome(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function lme(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function cme(t,e){const n=e.value?e.value+`
`:"",s={},r=e.lang?e.lang.split(/\s+/):[];r.length>0&&(s.className=["language-"+r[0]]);let i={type:"element",tagName:"code",properties:s,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function ume(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function hme(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function dme(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",s=String(e.identifier).toUpperCase(),r=sd(s.toLowerCase()),i=t.footnoteOrder.indexOf(s);let a,l=t.footnoteCounts.get(s);l===void 0?(l=0,t.footnoteOrder.push(s),a=t.footnoteOrder.length):a=i+1,l+=1,t.footnoteCounts.set(s,l);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+r,id:n+"fnref-"+r+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};t.patch(e,u);const h={type:"element",tagName:"sup",properties:{},children:[u]};return t.patch(e,h),t.applyData(e,h)}function fme(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function pme(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function qz(t,e){const n=e.referenceType;let s="]";if(n==="collapsed"?s+="[]":n==="full"&&(s+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+s}];const r=t.all(e),i=r[0];i&&i.type==="text"?i.value="["+i.value:r.unshift({type:"text",value:"["});const a=r[r.length-1];return a&&a.type==="text"?a.value+=s:r.push({type:"text",value:s}),r}function mme(t,e){const n=String(e.identifier).toUpperCase(),s=t.definitionById.get(n);if(!s)return qz(t,e);const r={src:sd(s.url||""),alt:e.alt};s.title!==null&&s.title!==void 0&&(r.title=s.title);const i={type:"element",tagName:"img",properties:r,children:[]};return t.patch(e,i),t.applyData(e,i)}function gme(t,e){const n={src:sd(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const s={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,s),t.applyData(e,s)}function yme(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const s={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,s),t.applyData(e,s)}function vme(t,e){const n=String(e.identifier).toUpperCase(),s=t.definitionById.get(n);if(!s)return qz(t,e);const r={href:sd(s.url||"")};s.title!==null&&s.title!==void 0&&(r.title=s.title);const i={type:"element",tagName:"a",properties:r,children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function bme(t,e){const n={href:sd(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const s={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function _me(t,e,n){const s=t.all(e),r=n?xme(n):Kz(e),i={},a=[];if(typeof e.checked=="boolean"){const m=s[0];let p;m&&m.type==="element"&&m.tagName==="p"?p=m:(p={type:"element",tagName:"p",properties:{},children:[]},s.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let l=-1;for(;++l<s.length;){const m=s[l];(r||l!==0||m.type!=="element"||m.tagName!=="p")&&a.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!r?a.push(...m.children):a.push(m)}const u=s[s.length-1];u&&(r||u.type!=="element"||u.tagName!=="p")&&a.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:i,children:a};return t.patch(e,h),t.applyData(e,h)}function xme(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let s=-1;for(;!e&&++s<n.length;)e=Kz(n[s])}return e}function Kz(t){const e=t.spread;return e??t.children.length>1}function wme(t,e){const n={},s=t.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++r<s.length;){const a=s[r];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(s,!0)};return t.patch(e,i),t.applyData(e,i)}function Sme(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function kme(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function Cme(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Nme(t,e){const n=t.all(e),s=n.shift(),r=[];if(s){const a={type:"element",tagName:"thead",properties:{},children:t.wrap([s],!0)};t.patch(e.children[0],a),r.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},l=iA(e.children[1]),u=Cz(e.children[e.children.length-1]);l&&u&&(a.position={start:l,end:u}),r.push(a)}const i={type:"element",tagName:"table",properties:{},children:t.wrap(r,!0)};return t.patch(e,i),t.applyData(e,i)}function Eme(t,e,n){const s=n?n.children:void 0,i=(s?s.indexOf(e):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,l=a?a.length:e.children.length;let u=-1;const h=[];for(;++u<l;){const p=e.children[u],g={},y=a?a[u]:void 0;y&&(g.align=y);let b={type:"element",tagName:i,properties:g,children:[]};p&&(b.children=t.all(p),t.patch(p,b),b=t.applyData(p,b)),h.push(b)}const m={type:"element",tagName:"tr",properties:{},children:t.wrap(h,!0)};return t.patch(e,m),t.applyData(e,m)}function Ame(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const FI=9,UI=32;function Rme(t){const e=String(t),n=/\r?\n|\r/g;let s=n.exec(e),r=0;const i=[];for(;s;)i.push(HI(e.slice(r,s.index),r>0,!0),s[0]),r=s.index+s[0].length,s=n.exec(e);return i.push(HI(e.slice(r),r>0,!1)),i.join("")}function HI(t,e,n){let s=0,r=t.length;if(e){let i=t.codePointAt(s);for(;i===FI||i===UI;)s++,i=t.codePointAt(s)}if(n){let i=t.codePointAt(r-1);for(;i===FI||i===UI;)r--,i=t.codePointAt(r-1)}return r>s?t.slice(s,r):""}function Tme(t,e){const n={type:"text",value:Rme(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function jme(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const Ome={blockquote:ome,break:lme,code:cme,delete:ume,emphasis:hme,footnoteReference:dme,heading:fme,html:pme,imageReference:mme,image:gme,inlineCode:yme,linkReference:vme,link:bme,listItem:_me,list:wme,paragraph:Sme,root:kme,strong:Cme,table:Nme,tableCell:Ame,tableRow:Eme,text:Tme,thematicBreak:jme,toml:z0,yaml:z0,definition:z0,footnoteDefinition:z0};function z0(){}const Wz=-1,x1=0,Cp=1,zv=2,dA=3,fA=4,pA=5,mA=6,Gz=7,Yz=8,VI=typeof self=="object"?self:globalThis,Mme=(t,e)=>{const n=(r,i)=>(t.set(i,r),r),s=r=>{if(t.has(r))return t.get(r);const[i,a]=e[r];switch(i){case x1:case Wz:return n(a,r);case Cp:{const l=n([],r);for(const u of a)l.push(s(u));return l}case zv:{const l=n({},r);for(const[u,h]of a)l[s(u)]=s(h);return l}case dA:return n(new Date(a),r);case fA:{const{source:l,flags:u}=a;return n(new RegExp(l,u),r)}case pA:{const l=n(new Map,r);for(const[u,h]of a)l.set(s(u),s(h));return l}case mA:{const l=n(new Set,r);for(const u of a)l.add(s(u));return l}case Gz:{const{name:l,message:u}=a;return n(new VI[l](u),r)}case Yz:return n(BigInt(a),r);case"BigInt":return n(Object(BigInt(a)),r);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:l}=new Uint8Array(a);return n(new DataView(l),a)}}return n(new VI[i](a),r)};return s},qI=t=>Mme(new Map,t)(0),Iu="",{toString:Ime}={},{keys:Dme}=Object,gf=t=>{const e=typeof t;if(e!=="object"||!t)return[x1,e];const n=Ime.call(t).slice(8,-1);switch(n){case"Array":return[Cp,Iu];case"Object":return[zv,Iu];case"Date":return[dA,Iu];case"RegExp":return[fA,Iu];case"Map":return[pA,Iu];case"Set":return[mA,Iu];case"DataView":return[Cp,n]}return n.includes("Array")?[Cp,n]:n.includes("Error")?[Gz,n]:[zv,n]},F0=([t,e])=>t===x1&&(e==="function"||e==="symbol"),Lme=(t,e,n,s)=>{const r=(a,l)=>{const u=s.push(a)-1;return n.set(l,u),u},i=a=>{if(n.has(a))return n.get(a);let[l,u]=gf(a);switch(l){case x1:{let m=a;switch(u){case"bigint":l=Yz,m=a.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+u);m=null;break;case"undefined":return r([Wz],a)}return r([l,m],a)}case Cp:{if(u){let g=a;return u==="DataView"?g=new Uint8Array(a.buffer):u==="ArrayBuffer"&&(g=new Uint8Array(a)),r([u,[...g]],a)}const m=[],p=r([l,m],a);for(const g of a)m.push(i(g));return p}case zv:{if(u)switch(u){case"BigInt":return r([u,a.toString()],a);case"Boolean":case"Number":case"String":return r([u,a.valueOf()],a)}if(e&&"toJSON"in a)return i(a.toJSON());const m=[],p=r([l,m],a);for(const g of Dme(a))(t||!F0(gf(a[g])))&&m.push([i(g),i(a[g])]);return p}case dA:return r([l,a.toISOString()],a);case fA:{const{source:m,flags:p}=a;return r([l,{source:m,flags:p}],a)}case pA:{const m=[],p=r([l,m],a);for(const[g,y]of a)(t||!(F0(gf(g))||F0(gf(y))))&&m.push([i(g),i(y)]);return p}case mA:{const m=[],p=r([l,m],a);for(const g of a)(t||!F0(gf(g)))&&m.push(i(g));return p}}const{message:h}=a;return r([l,{name:u,message:h}],a)};return i},KI=(t,{json:e,lossy:n}={})=>{const s=[];return Lme(!(e||n),!!e,new Map,s)(t),s},Fv=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?qI(KI(t,e)):structuredClone(t):(t,e)=>qI(KI(t,e));function Pme(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function Bme(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function $me(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||Pme,s=t.options.footnoteBackLabel||Bme,r=t.options.footnoteLabel||"Footnotes",i=t.options.footnoteLabelTagName||"h2",a=t.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let u=-1;for(;++u<t.footnoteOrder.length;){const h=t.footnoteById.get(t.footnoteOrder[u]);if(!h)continue;const m=t.all(h),p=String(h.identifier).toUpperCase(),g=sd(p.toLowerCase());let y=0;const b=[],_=t.footnoteCounts.get(p);for(;_!==void 0&&++y<=_;){b.length>0&&b.push({type:"text",value:" "});let C=typeof n=="string"?n:n(u,y);typeof C=="string"&&(C={type:"text",value:C}),b.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+g+(y>1?"-"+y:""),dataFootnoteBackref:"",ariaLabel:typeof s=="string"?s:s(u,y),className:["data-footnote-backref"]},children:Array.isArray(C)?C:[C]})}const w=m[m.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const C=w.children[w.children.length-1];C&&C.type==="text"?C.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...b)}else m.push(...b);const k={type:"element",tagName:"li",properties:{id:e+"fn-"+g},children:t.wrap(m,!0)};t.patch(h,k),l.push(k)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...Fv(a),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(l,!0)},{type:"text",value:`
`}]}}const w1=(function(t){if(t==null)return Hme;if(typeof t=="function")return S1(t);if(typeof t=="object")return Array.isArray(t)?zme(t):Fme(t);if(typeof t=="string")return Ume(t);throw new Error("Expected function, string, or object as test")});function zme(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=w1(t[n]);return S1(s);function s(...r){let i=-1;for(;++i<e.length;)if(e[i].apply(this,r))return!0;return!1}}function Fme(t){const e=t;return S1(n);function n(s){const r=s;let i;for(i in t)if(r[i]!==e[i])return!1;return!0}}function Ume(t){return S1(e);function e(n){return n&&n.type===t}}function S1(t){return e;function e(n,s,r){return!!(Vme(n)&&t.call(this,n,typeof s=="number"?s:void 0,r||void 0))}}function Hme(){return!0}function Vme(t){return t!==null&&typeof t=="object"&&"type"in t}const Zz=[],qme=!0,AC=!1,Kme="skip";function Jz(t,e,n,s){let r;typeof e=="function"&&typeof n!="function"?(s=n,n=e):r=e;const i=w1(r),a=s?-1:1;l(t,void 0,[])();function l(u,h,m){const p=u&&typeof u=="object"?u:{};if(typeof p.type=="string"){const y=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(u.type+(y?"<"+y+">":""))+")"})}return g;function g(){let y=Zz,b,_,w;if((!e||i(u,h,m[m.length-1]||void 0))&&(y=Wme(n(u,m)),y[0]===AC))return y;if("children"in u&&u.children){const k=u;if(k.children&&y[0]!==Kme)for(_=(s?k.children.length:-1)+a,w=m.concat(k);_>-1&&_<k.children.length;){const C=k.children[_];if(b=l(C,_,w)(),b[0]===AC)return b;_=typeof b[1]=="number"?b[1]:_+a}}return y}}}function Wme(t){return Array.isArray(t)?t:typeof t=="number"?[qme,t]:t==null?Zz:[t]}function gA(t,e,n,s){let r,i,a;typeof e=="function"&&typeof n!="function"?(i=void 0,a=e,r=n):(i=e,a=n,r=s),Jz(t,i,l,r);function l(u,h){const m=h[h.length-1],p=m?m.children.indexOf(u):void 0;return a(u,p,m)}}const RC={}.hasOwnProperty,Gme={};function Yme(t,e){const n=e||Gme,s=new Map,r=new Map,i=new Map,a={...Ome,...n.handlers},l={all:h,applyData:Jme,definitionById:s,footnoteById:r,footnoteCounts:i,footnoteOrder:[],handlers:a,one:u,options:n,patch:Zme,wrap:Qme};return gA(t,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const p=m.type==="definition"?s:r,g=String(m.identifier).toUpperCase();p.has(g)||p.set(g,m)}}),l;function u(m,p){const g=m.type,y=l.handlers[g];if(RC.call(l.handlers,g)&&y)return y(l,m,p);if(l.options.passThrough&&l.options.passThrough.includes(g)){if("children"in m){const{children:_,...w}=m,k=Fv(w);return k.children=l.all(m),k}return Fv(m)}return(l.options.unknownHandler||Xme)(l,m,p)}function h(m){const p=[];if("children"in m){const g=m.children;let y=-1;for(;++y<g.length;){const b=l.one(g[y],m);if(b){if(y&&g[y-1].type==="break"&&(!Array.isArray(b)&&b.type==="text"&&(b.value=WI(b.value)),!Array.isArray(b)&&b.type==="element")){const _=b.children[0];_&&_.type==="text"&&(_.value=WI(_.value))}Array.isArray(b)?p.push(...b):p.push(b)}}}return p}}function Zme(t,e){t.position&&(e.position=Bde(t))}function Jme(t,e){let n=e;if(t&&t.data){const s=t.data.hName,r=t.data.hChildren,i=t.data.hProperties;if(typeof s=="string")if(n.type==="element")n.tagName=s;else{const a="children"in n?n.children:[n];n={type:"element",tagName:s,properties:{},children:a}}n.type==="element"&&i&&Object.assign(n.properties,Fv(i)),"children"in n&&n.children&&r!==null&&r!==void 0&&(n.children=r)}return n}function Xme(t,e){const n=e.data||{},s="value"in e&&!(RC.call(n,"hProperties")||RC.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function Qme(t,e){const n=[];let s=-1;for(e&&n.push({type:"text",value:`
`});++s<t.length;)s&&n.push({type:"text",value:`
`}),n.push(t[s]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function WI(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function GI(t,e){const n=Yme(t,e),s=n.one(t,void 0),r=$me(n),i=Array.isArray(s)?{type:"root",children:s}:s||{type:"root",children:[]};return r&&i.children.push({type:"text",value:`
`},r),i}function ege(t,e){return t&&"run"in t?async function(n,s){const r=GI(n,{file:s,...e});await t.run(r,s)}:function(n,s){return GI(n,{file:s,...t||e})}}function YI(t){if(t)throw t}var pS,ZI;function tge(){if(ZI)return pS;ZI=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,s=Object.getOwnPropertyDescriptor,r=function(h){return typeof Array.isArray=="function"?Array.isArray(h):e.call(h)==="[object Array]"},i=function(h){if(!h||e.call(h)!=="[object Object]")return!1;var m=t.call(h,"constructor"),p=h.constructor&&h.constructor.prototype&&t.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!m&&!p)return!1;var g;for(g in h);return typeof g>"u"||t.call(h,g)},a=function(h,m){n&&m.name==="__proto__"?n(h,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):h[m.name]=m.newValue},l=function(h,m){if(m==="__proto__")if(t.call(h,m)){if(s)return s(h,m).value}else return;return h[m]};return pS=function u(){var h,m,p,g,y,b,_=arguments[0],w=1,k=arguments.length,C=!1;for(typeof _=="boolean"&&(C=_,_=arguments[1]||{},w=2),(_==null||typeof _!="object"&&typeof _!="function")&&(_={});w<k;++w)if(h=arguments[w],h!=null)for(m in h)p=l(_,m),g=l(h,m),_!==g&&(C&&g&&(i(g)||(y=r(g)))?(y?(y=!1,b=p&&r(p)?p:[]):b=p&&i(p)?p:{},a(_,{name:m,newValue:u(C,b,g)})):typeof g<"u"&&a(_,{name:m,newValue:g}));return _},pS}var nge=tge();const mS=Vv(nge);function TC(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function sge(){const t=[],e={run:n,use:s};return e;function n(...r){let i=-1;const a=r.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);l(null,...r);function l(u,...h){const m=t[++i];let p=-1;if(u){a(u);return}for(;++p<r.length;)(h[p]===null||h[p]===void 0)&&(h[p]=r[p]);r=h,m?rge(m,l)(...h):a(null,...h)}}function s(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return t.push(r),e}}function rge(t,e){let n;return s;function s(...a){const l=t.length>a.length;let u;l&&a.push(r);try{u=t.apply(this,a)}catch(h){const m=h;if(l&&n)throw m;return r(m)}l||(u&&u.then&&typeof u.then=="function"?u.then(i,r):u instanceof Error?r(u):i(u))}function r(a,...l){n||(n=!0,e(a,...l))}function i(a){r(null,a)}}const Ki={basename:ige,dirname:age,extname:oge,join:lge,sep:"/"};function ige(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');zm(t);let n=0,s=-1,r=t.length,i;if(e===void 0||e.length===0||e.length>t.length){for(;r--;)if(t.codePointAt(r)===47){if(i){n=r+1;break}}else s<0&&(i=!0,s=r+1);return s<0?"":t.slice(n,s)}if(e===t)return"";let a=-1,l=e.length-1;for(;r--;)if(t.codePointAt(r)===47){if(i){n=r+1;break}}else a<0&&(i=!0,a=r+1),l>-1&&(t.codePointAt(r)===e.codePointAt(l--)?l<0&&(s=r):(l=-1,s=a));return n===s?s=a:s<0&&(s=t.length),t.slice(n,s)}function age(t){if(zm(t),t.length===0)return".";let e=-1,n=t.length,s;for(;--n;)if(t.codePointAt(n)===47){if(s){e=n;break}}else s||(s=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function oge(t){zm(t);let e=t.length,n=-1,s=0,r=-1,i=0,a;for(;e--;){const l=t.codePointAt(e);if(l===47){if(a){s=e+1;break}continue}n<0&&(a=!0,n=e+1),l===46?r<0?r=e:i!==1&&(i=1):r>-1&&(i=-1)}return r<0||n<0||i===0||i===1&&r===n-1&&r===s+1?"":t.slice(r,n)}function lge(...t){let e=-1,n;for(;++e<t.length;)zm(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":cge(n)}function cge(t){zm(t);const e=t.codePointAt(0)===47;let n=uge(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function uge(t,e){let n="",s=0,r=-1,i=0,a=-1,l,u;for(;++a<=t.length;){if(a<t.length)l=t.codePointAt(a);else{if(l===47)break;l=47}if(l===47){if(!(r===a-1||i===1))if(r!==a-1&&i===2){if(n.length<2||s!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",s=0):(n=n.slice(0,u),s=n.length-1-n.lastIndexOf("/")),r=a,i=0;continue}}else if(n.length>0){n="",s=0,r=a,i=0;continue}}e&&(n=n.length>0?n+"/..":"..",s=2)}else n.length>0?n+="/"+t.slice(r+1,a):n=t.slice(r+1,a),s=a-r-1;r=a,i=0}else l===46&&i>-1?i++:i=-1}return n}function zm(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const hge={cwd:dge};function dge(){return"/"}function jC(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function fge(t){if(typeof t=="string")t=new URL(t);else if(!jC(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return pge(t)}function pge(t){if(t.hostname!==""){const s=new TypeError('File URL host must be "localhost" or empty on darwin');throw s.code="ERR_INVALID_FILE_URL_HOST",s}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const s=e.codePointAt(n+2);if(s===70||s===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const gS=["history","path","basename","stem","extname","dirname"];class Xz{constructor(e){let n;e?jC(e)?n={path:e}:typeof e=="string"||mge(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":hge.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let s=-1;for(;++s<gS.length;){const i=gS[s];i in n&&n[i]!==void 0&&n[i]!==null&&(this[i]=i==="history"?[...n[i]]:n[i])}let r;for(r in n)gS.includes(r)||(this[r]=n[r])}get basename(){return typeof this.path=="string"?Ki.basename(this.path):void 0}set basename(e){vS(e,"basename"),yS(e,"basename"),this.path=Ki.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Ki.dirname(this.path):void 0}set dirname(e){JI(this.basename,"dirname"),this.path=Ki.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Ki.extname(this.path):void 0}set extname(e){if(yS(e,"extname"),JI(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ki.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){jC(e)&&(e=fge(e)),vS(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Ki.basename(this.path,this.extname):void 0}set stem(e){vS(e,"stem"),yS(e,"stem"),this.path=Ki.join(this.dirname||"",e+(this.extname||""))}fail(e,n,s){const r=this.message(e,n,s);throw r.fatal=!0,r}info(e,n,s){const r=this.message(e,n,s);return r.fatal=void 0,r}message(e,n,s){const r=new Ls(e,n,s);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function yS(t,e){if(t&&t.includes(Ki.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Ki.sep+"`")}function vS(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function JI(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function mge(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const gge=(function(t){const s=this.constructor.prototype,r=s[t],i=function(){return r.apply(i,arguments)};return Object.setPrototypeOf(i,s),i}),yge={}.hasOwnProperty;class yA extends gge{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=sge()}copy(){const e=new yA;let n=-1;for(;++n<this.attachers.length;){const s=this.attachers[n];e.use(...s)}return e.data(mS(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(xS("data",this.frozen),this.namespace[e]=n,this):yge.call(this.namespace,e)&&this.namespace[e]||void 0:e?(xS("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...s]=this.attachers[this.freezeIndex];if(s[0]===!1)continue;s[0]===!0&&(s[0]=void 0);const r=n.call(e,...s);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=U0(e),s=this.parser||this.Parser;return bS("parse",s),s(String(n),n)}process(e,n){const s=this;return this.freeze(),bS("process",this.parser||this.Parser),_S("process",this.compiler||this.Compiler),n?r(void 0,n):new Promise(r);function r(i,a){const l=U0(e),u=s.parse(l);s.run(u,l,function(m,p,g){if(m||!p||!g)return h(m);const y=p,b=s.stringify(y,g);_ge(b)?g.value=b:g.result=b,h(m,g)});function h(m,p){m||!p?a(m):i?i(p):n(void 0,p)}}}processSync(e){let n=!1,s;return this.freeze(),bS("processSync",this.parser||this.Parser),_S("processSync",this.compiler||this.Compiler),this.process(e,r),QI("processSync","process",n),s;function r(i,a){n=!0,YI(i),s=a}}run(e,n,s){XI(e),this.freeze();const r=this.transformers;return!s&&typeof n=="function"&&(s=n,n=void 0),s?i(void 0,s):new Promise(i);function i(a,l){const u=U0(n);r.run(e,u,h);function h(m,p,g){const y=p||e;m?l(m):a?a(y):s(void 0,y,g)}}}runSync(e,n){let s=!1,r;return this.run(e,n,i),QI("runSync","run",s),r;function i(a,l){YI(a),r=l,s=!0}}stringify(e,n){this.freeze();const s=U0(n),r=this.compiler||this.Compiler;return _S("stringify",r),XI(e),r(e,s)}use(e,...n){const s=this.attachers,r=this.namespace;if(xS("use",this.frozen),e!=null)if(typeof e=="function")u(e,n);else if(typeof e=="object")Array.isArray(e)?l(e):a(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function i(h){if(typeof h=="function")u(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[m,...p]=h;u(m,p)}else a(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function a(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(h.plugins),h.settings&&(r.settings=mS(!0,r.settings,h.settings))}function l(h){let m=-1;if(h!=null)if(Array.isArray(h))for(;++m<h.length;){const p=h[m];i(p)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function u(h,m){let p=-1,g=-1;for(;++p<s.length;)if(s[p][0]===h){g=p;break}if(g===-1)s.push([h,...m]);else if(m.length>0){let[y,...b]=m;const _=s[g][1];TC(_)&&TC(y)&&(y=mS(!0,_,y)),s[g]=[h,y,...b]}}}}const vge=new yA().freeze();function bS(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function _S(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function xS(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function XI(t){if(!TC(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function QI(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function U0(t){return bge(t)?t:new Xz(t)}function bge(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function _ge(t){return typeof t=="string"||xge(t)}function xge(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const wge="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",e6=[],t6={allowDangerousHtml:!0},Sge=/^(https?|ircs?|mailto|xmpp)$/i,kge=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Cge(t){const e=Nge(t),n=Ege(t);return Age(e.runSync(e.parse(n),n),t)}function Nge(t){const e=t.rehypePlugins||e6,n=t.remarkPlugins||e6,s=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...t6}:t6;return vge().use(ame).use(n).use(ege,s).use(e)}function Ege(t){const e=t.children||"",n=new Xz;return typeof e=="string"&&(n.value=e),n}function Age(t,e){const n=e.allowedElements,s=e.allowElement,r=e.components,i=e.disallowedElements,a=e.skipHtml,l=e.unwrapDisallowed,u=e.urlTransform||Rge;for(const m of kge)Object.hasOwn(e,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+wge+m.id,void 0);return gA(t,h),Hde(t,{Fragment:f.Fragment,components:r,ignoreInvalidStyle:!0,jsx:f.jsx,jsxs:f.jsxs,passKeys:!0,passNode:!0});function h(m,p,g){if(m.type==="raw"&&g&&typeof p=="number")return a?g.children.splice(p,1):g.children[p]={type:"text",value:m.value},p;if(m.type==="element"){let y;for(y in hS)if(Object.hasOwn(hS,y)&&Object.hasOwn(m.properties,y)){const b=m.properties[y],_=hS[y];(_===null||_.includes(m.tagName))&&(m.properties[y]=u(String(b||""),y,m))}}if(m.type==="element"){let y=n?!n.includes(m.tagName):i?i.includes(m.tagName):!1;if(!y&&s&&typeof p=="number"&&(y=!s(m,p,g)),y&&g&&typeof p=="number")return l&&m.children?g.children.splice(p,1,...m.children):g.children.splice(p,1),p}}}function Rge(t){const e=t.indexOf(":"),n=t.indexOf("?"),s=t.indexOf("#"),r=t.indexOf("/");return e===-1||r!==-1&&e>r||n!==-1&&e>n||s!==-1&&e>s||Sge.test(t.slice(0,e))?t:""}function n6(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let s=0,r=n.indexOf(e);for(;r!==-1;)s++,r=n.indexOf(e,r+e.length);return s}function Tge(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Qz(t,e,n){const r=w1((n||{}).ignore||[]),i=jge(e);let a=-1;for(;++a<i.length;)Jz(t,"text",l);function l(h,m){let p=-1,g;for(;++p<m.length;){const y=m[p],b=g?g.children:void 0;if(r(y,b?b.indexOf(y):void 0,g))return;g=y}if(g)return u(h,m)}function u(h,m){const p=m[m.length-1],g=i[a][0],y=i[a][1];let b=0;const w=p.children.indexOf(h);let k=!1,C=[];g.lastIndex=0;let E=g.exec(h.value);for(;E;){const A=E.index,R={index:E.index,input:E.input,stack:[...m,h]};let N=y(...E,R);if(typeof N=="string"&&(N=N.length>0?{type:"text",value:N}:void 0),N===!1?g.lastIndex=A+1:(b!==A&&C.push({type:"text",value:h.value.slice(b,A)}),Array.isArray(N)?C.push(...N):N&&C.push(N),b=A+E[0].length,k=!0),!g.global)break;E=g.exec(h.value)}return k?(b<h.value.length&&C.push({type:"text",value:h.value.slice(b)}),p.children.splice(w,1,...C)):C=[h],w+C.length}}function jge(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let s=-1;for(;++s<n.length;){const r=n[s];e.push([Oge(r[0]),Mge(r[1])])}return e}function Oge(t){return typeof t=="string"?new RegExp(Tge(t),"g"):t}function Mge(t){return typeof t=="function"?t:function(){return t}}const wS="phrasing",SS=["autolink","link","image","label"];function Ige(){return{transforms:[Fge],enter:{literalAutolink:Lge,literalAutolinkEmail:kS,literalAutolinkHttp:kS,literalAutolinkWww:kS},exit:{literalAutolink:zge,literalAutolinkEmail:$ge,literalAutolinkHttp:Pge,literalAutolinkWww:Bge}}}function Dge(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:wS,notInConstruct:SS},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:wS,notInConstruct:SS},{character:":",before:"[ps]",after:"\\/",inConstruct:wS,notInConstruct:SS}]}}function Lge(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function kS(t){this.config.enter.autolinkProtocol.call(this,t)}function Pge(t){this.config.exit.autolinkProtocol.call(this,t)}function Bge(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function $ge(t){this.config.exit.autolinkEmail.call(this,t)}function zge(t){this.exit(t)}function Fge(t){Qz(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Uge],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Hge]],{ignore:["link","linkReference"]})}function Uge(t,e,n,s,r){let i="";if(!e7(r)||(/^w/i.test(e)&&(n=e+n,e="",i="http://"),!Vge(n)))return!1;const a=qge(n+s);if(!a[0])return!1;const l={type:"link",title:null,url:i+e+a[0],children:[{type:"text",value:e+a[0]}]};return a[1]?[l,{type:"text",value:a[1]}]:l}function Hge(t,e,n,s){return!e7(s,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function Vge(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function qge(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],s=n.indexOf(")");const r=n6(t,"(");let i=n6(t,")");for(;s!==-1&&r>i;)t+=n.slice(0,s+1),n=n.slice(s+1),s=n.indexOf(")"),i++;return[t,n]}function e7(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||jc(n)||b1(n))&&(!e||n!==47)}t7.peek=e0e;function Kge(){this.buffer()}function Wge(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function Gge(){this.buffer()}function Yge(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function Zge(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ai(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Jge(t){this.exit(t)}function Xge(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ai(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Qge(t){this.exit(t)}function e0e(){return"["}function t7(t,e,n,s){const r=n.createTracker(s);let i=r.move("[^");const a=n.enter("footnoteReference"),l=n.enter("reference");return i+=r.move(n.safe(n.associationId(t),{after:"]",before:i})),l(),a(),i+=r.move("]"),i}function t0e(){return{enter:{gfmFootnoteCallString:Kge,gfmFootnoteCall:Wge,gfmFootnoteDefinitionLabelString:Gge,gfmFootnoteDefinition:Yge},exit:{gfmFootnoteCallString:Zge,gfmFootnoteCall:Jge,gfmFootnoteDefinitionLabelString:Xge,gfmFootnoteDefinition:Qge}}}function n0e(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:t7},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(s,r,i,a){const l=i.createTracker(a);let u=l.move("[^");const h=i.enter("footnoteDefinition"),m=i.enter("label");return u+=l.move(i.safe(i.associationId(s),{before:u,after:"]"})),m(),u+=l.move("]:"),s.children&&s.children.length>0&&(l.shift(4),u+=l.move((e?`
`:" ")+i.indentLines(i.containerFlow(s,l.current()),e?n7:s0e))),h(),u}}function s0e(t,e,n){return e===0?t:n7(t,e,n)}function n7(t,e,n){return(n?"":"    ")+t}const r0e=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];s7.peek=c0e;function i0e(){return{canContainEols:["delete"],enter:{strikethrough:o0e},exit:{strikethrough:l0e}}}function a0e(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:r0e}],handlers:{delete:s7}}}function o0e(t){this.enter({type:"delete",children:[]},t)}function l0e(t){this.exit(t)}function s7(t,e,n,s){const r=n.createTracker(s),i=n.enter("strikethrough");let a=r.move("~~");return a+=n.containerPhrasing(t,{...r.current(),before:a,after:"~"}),a+=r.move("~~"),i(),a}function c0e(){return"~"}function u0e(t){return t.length}function h0e(t,e){const n=e||{},s=(n.align||[]).concat(),r=n.stringLength||u0e,i=[],a=[],l=[],u=[];let h=0,m=-1;for(;++m<t.length;){const _=[],w=[];let k=-1;for(t[m].length>h&&(h=t[m].length);++k<t[m].length;){const C=d0e(t[m][k]);if(n.alignDelimiters!==!1){const E=r(C);w[k]=E,(u[k]===void 0||E>u[k])&&(u[k]=E)}_.push(C)}a[m]=_,l[m]=w}let p=-1;if(typeof s=="object"&&"length"in s)for(;++p<h;)i[p]=s6(s[p]);else{const _=s6(s);for(;++p<h;)i[p]=_}p=-1;const g=[],y=[];for(;++p<h;){const _=i[p];let w="",k="";_===99?(w=":",k=":"):_===108?w=":":_===114&&(k=":");let C=n.alignDelimiters===!1?1:Math.max(1,u[p]-w.length-k.length);const E=w+"-".repeat(C)+k;n.alignDelimiters!==!1&&(C=w.length+C+k.length,C>u[p]&&(u[p]=C),y[p]=C),g[p]=E}a.splice(1,0,g),l.splice(1,0,y),m=-1;const b=[];for(;++m<a.length;){const _=a[m],w=l[m];p=-1;const k=[];for(;++p<h;){const C=_[p]||"";let E="",A="";if(n.alignDelimiters!==!1){const R=u[p]-(w[p]||0),N=i[p];N===114?E=" ".repeat(R):N===99?R%2?(E=" ".repeat(R/2+.5),A=" ".repeat(R/2-.5)):(E=" ".repeat(R/2),A=E):A=" ".repeat(R)}n.delimiterStart!==!1&&!p&&k.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&C==="")&&(n.delimiterStart!==!1||p)&&k.push(" "),n.alignDelimiters!==!1&&k.push(E),k.push(C),n.alignDelimiters!==!1&&k.push(A),n.padding!==!1&&k.push(" "),(n.delimiterEnd!==!1||p!==h-1)&&k.push("|")}b.push(n.delimiterEnd===!1?k.join("").replace(/ +$/,""):k.join(""))}return b.join(`
`)}function d0e(t){return t==null?"":String(t)}function s6(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function f0e(t,e,n,s){const r=n.enter("blockquote"),i=n.createTracker(s);i.move("> "),i.shift(2);const a=n.indentLines(n.containerFlow(t,i.current()),p0e);return r(),a}function p0e(t,e,n){return">"+(n?"":" ")+t}function m0e(t,e){return r6(t,e.inConstruct,!0)&&!r6(t,e.notInConstruct,!1)}function r6(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let s=-1;for(;++s<e.length;)if(t.includes(e[s]))return!0;return!1}function i6(t,e,n,s){let r=-1;for(;++r<n.unsafe.length;)if(n.unsafe[r].character===`
`&&m0e(n.stack,n.unsafe[r]))return/[ \t]/.test(s.before)?"":" ";return`\\
`}function g0e(t,e){const n=String(t);let s=n.indexOf(e),r=s,i=0,a=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;s!==-1;)s===r?++i>a&&(a=i):i=1,r=s+e.length,s=n.indexOf(e,r);return a}function y0e(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function v0e(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function b0e(t,e,n,s){const r=v0e(n),i=t.value||"",a=r==="`"?"GraveAccent":"Tilde";if(y0e(t,n)){const p=n.enter("codeIndented"),g=n.indentLines(i,_0e);return p(),g}const l=n.createTracker(s),u=r.repeat(Math.max(g0e(i,r)+1,3)),h=n.enter("codeFenced");let m=l.move(u);if(t.lang){const p=n.enter(`codeFencedLang${a}`);m+=l.move(n.safe(t.lang,{before:m,after:" ",encode:["`"],...l.current()})),p()}if(t.lang&&t.meta){const p=n.enter(`codeFencedMeta${a}`);m+=l.move(" "),m+=l.move(n.safe(t.meta,{before:m,after:`
`,encode:["`"],...l.current()})),p()}return m+=l.move(`
`),i&&(m+=l.move(i+`
`)),m+=l.move(u),h(),m}function _0e(t,e,n){return(n?"":"    ")+t}function vA(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function x0e(t,e,n,s){const r=vA(n),i=r==='"'?"Quote":"Apostrophe",a=n.enter("definition");let l=n.enter("label");const u=n.createTracker(s);let h=u.move("[");return h+=u.move(n.safe(n.associationId(t),{before:h,after:"]",...u.current()})),h+=u.move("]: "),l(),!t.url||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),h+=u.move("<"),h+=u.move(n.safe(t.url,{before:h,after:">",...u.current()})),h+=u.move(">")):(l=n.enter("destinationRaw"),h+=u.move(n.safe(t.url,{before:h,after:t.title?" ":`
`,...u.current()}))),l(),t.title&&(l=n.enter(`title${i}`),h+=u.move(" "+r),h+=u.move(n.safe(t.title,{before:h,after:r,...u.current()})),h+=u.move(r),l()),a(),h}function w0e(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function tm(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Uv(t,e,n){const s=Rh(t),r=Rh(e);return s===void 0?r===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:s===1?r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}r7.peek=S0e;function r7(t,e,n,s){const r=w0e(n),i=n.enter("emphasis"),a=n.createTracker(s),l=a.move(r);let u=a.move(n.containerPhrasing(t,{after:r,before:l,...a.current()}));const h=u.charCodeAt(0),m=Uv(s.before.charCodeAt(s.before.length-1),h,r);m.inside&&(u=tm(h)+u.slice(1));const p=u.charCodeAt(u.length-1),g=Uv(s.after.charCodeAt(0),p,r);g.inside&&(u=u.slice(0,-1)+tm(p));const y=a.move(r);return i(),n.attentionEncodeSurroundingInfo={after:g.outside,before:m.outside},l+u+y}function S0e(t,e,n){return n.options.emphasis||"*"}function k0e(t,e){let n=!1;return gA(t,function(s){if("value"in s&&/\r?\n|\r/.test(s.value)||s.type==="break")return n=!0,AC}),!!((!t.depth||t.depth<3)&&cA(t)&&(e.options.setext||n))}function C0e(t,e,n,s){const r=Math.max(Math.min(6,t.depth||1),1),i=n.createTracker(s);if(k0e(t,n)){const m=n.enter("headingSetext"),p=n.enter("phrasing"),g=n.containerPhrasing(t,{...i.current(),before:`
`,after:`
`});return p(),m(),g+`
`+(r===1?"=":"-").repeat(g.length-(Math.max(g.lastIndexOf("\r"),g.lastIndexOf(`
`))+1))}const a="#".repeat(r),l=n.enter("headingAtx"),u=n.enter("phrasing");i.move(a+" ");let h=n.containerPhrasing(t,{before:"# ",after:`
`,...i.current()});return/^[\t ]/.test(h)&&(h=tm(h.charCodeAt(0))+h.slice(1)),h=h?a+" "+h:a,n.options.closeAtx&&(h+=" "+a),u(),l(),h}i7.peek=N0e;function i7(t){return t.value||""}function N0e(){return"<"}a7.peek=E0e;function a7(t,e,n,s){const r=vA(n),i=r==='"'?"Quote":"Apostrophe",a=n.enter("image");let l=n.enter("label");const u=n.createTracker(s);let h=u.move("![");return h+=u.move(n.safe(t.alt,{before:h,after:"]",...u.current()})),h+=u.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),h+=u.move("<"),h+=u.move(n.safe(t.url,{before:h,after:">",...u.current()})),h+=u.move(">")):(l=n.enter("destinationRaw"),h+=u.move(n.safe(t.url,{before:h,after:t.title?" ":")",...u.current()}))),l(),t.title&&(l=n.enter(`title${i}`),h+=u.move(" "+r),h+=u.move(n.safe(t.title,{before:h,after:r,...u.current()})),h+=u.move(r),l()),h+=u.move(")"),a(),h}function E0e(){return"!"}o7.peek=A0e;function o7(t,e,n,s){const r=t.referenceType,i=n.enter("imageReference");let a=n.enter("label");const l=n.createTracker(s);let u=l.move("![");const h=n.safe(t.alt,{before:u,after:"]",...l.current()});u+=l.move(h+"]["),a();const m=n.stack;n.stack=[],a=n.enter("reference");const p=n.safe(n.associationId(t),{before:u,after:"]",...l.current()});return a(),n.stack=m,i(),r==="full"||!h||h!==p?u+=l.move(p+"]"):r==="shortcut"?u=u.slice(0,-1):u+=l.move("]"),u}function A0e(){return"!"}l7.peek=R0e;function l7(t,e,n){let s=t.value||"",r="`",i=-1;for(;new RegExp("(^|[^`])"+r+"([^`]|$)").test(s);)r+="`";for(/[^ \r\n]/.test(s)&&(/^[ \r\n]/.test(s)&&/[ \r\n]$/.test(s)||/^`|`$/.test(s))&&(s=" "+s+" ");++i<n.unsafe.length;){const a=n.unsafe[i],l=n.compilePattern(a);let u;if(a.atBreak)for(;u=l.exec(s);){let h=u.index;s.charCodeAt(h)===10&&s.charCodeAt(h-1)===13&&h--,s=s.slice(0,h)+" "+s.slice(u.index+1)}}return r+s+r}function R0e(){return"`"}function c7(t,e){const n=cA(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}u7.peek=T0e;function u7(t,e,n,s){const r=vA(n),i=r==='"'?"Quote":"Apostrophe",a=n.createTracker(s);let l,u;if(c7(t,n)){const m=n.stack;n.stack=[],l=n.enter("autolink");let p=a.move("<");return p+=a.move(n.containerPhrasing(t,{before:p,after:">",...a.current()})),p+=a.move(">"),l(),n.stack=m,p}l=n.enter("link"),u=n.enter("label");let h=a.move("[");return h+=a.move(n.containerPhrasing(t,{before:h,after:"](",...a.current()})),h+=a.move("]("),u(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(u=n.enter("destinationLiteral"),h+=a.move("<"),h+=a.move(n.safe(t.url,{before:h,after:">",...a.current()})),h+=a.move(">")):(u=n.enter("destinationRaw"),h+=a.move(n.safe(t.url,{before:h,after:t.title?" ":")",...a.current()}))),u(),t.title&&(u=n.enter(`title${i}`),h+=a.move(" "+r),h+=a.move(n.safe(t.title,{before:h,after:r,...a.current()})),h+=a.move(r),u()),h+=a.move(")"),l(),h}function T0e(t,e,n){return c7(t,n)?"<":"["}h7.peek=j0e;function h7(t,e,n,s){const r=t.referenceType,i=n.enter("linkReference");let a=n.enter("label");const l=n.createTracker(s);let u=l.move("[");const h=n.containerPhrasing(t,{before:u,after:"]",...l.current()});u+=l.move(h+"]["),a();const m=n.stack;n.stack=[],a=n.enter("reference");const p=n.safe(n.associationId(t),{before:u,after:"]",...l.current()});return a(),n.stack=m,i(),r==="full"||!h||h!==p?u+=l.move(p+"]"):r==="shortcut"?u=u.slice(0,-1):u+=l.move("]"),u}function j0e(){return"["}function bA(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function O0e(t){const e=bA(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function M0e(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function d7(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function I0e(t,e,n,s){const r=n.enter("list"),i=n.bulletCurrent;let a=t.ordered?M0e(n):bA(n);const l=t.ordered?a==="."?")":".":O0e(n);let u=e&&n.bulletLastUsed?a===n.bulletLastUsed:!1;if(!t.ordered){const m=t.children?t.children[0]:void 0;if((a==="*"||a==="-")&&m&&(!m.children||!m.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(u=!0),d7(n)===a&&m){let p=-1;for(;++p<t.children.length;){const g=t.children[p];if(g&&g.type==="listItem"&&g.children&&g.children[0]&&g.children[0].type==="thematicBreak"){u=!0;break}}}}u&&(a=l),n.bulletCurrent=a;const h=n.containerFlow(t,s);return n.bulletLastUsed=a,n.bulletCurrent=i,r(),h}function D0e(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function L0e(t,e,n,s){const r=D0e(n);let i=n.bulletCurrent||bA(n);e&&e.type==="list"&&e.ordered&&(i=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+i);let a=i.length+1;(r==="tab"||r==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(a=Math.ceil(a/4)*4);const l=n.createTracker(s);l.move(i+" ".repeat(a-i.length)),l.shift(a);const u=n.enter("listItem"),h=n.indentLines(n.containerFlow(t,l.current()),m);return u(),h;function m(p,g,y){return g?(y?"":" ".repeat(a))+p:(y?i:i+" ".repeat(a-i.length))+p}}function P0e(t,e,n,s){const r=n.enter("paragraph"),i=n.enter("phrasing"),a=n.containerPhrasing(t,s);return i(),r(),a}const B0e=w1(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function $0e(t,e,n,s){return(t.children.some(function(a){return B0e(a)})?n.containerPhrasing:n.containerFlow).call(n,t,s)}function z0e(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}f7.peek=F0e;function f7(t,e,n,s){const r=z0e(n),i=n.enter("strong"),a=n.createTracker(s),l=a.move(r+r);let u=a.move(n.containerPhrasing(t,{after:r,before:l,...a.current()}));const h=u.charCodeAt(0),m=Uv(s.before.charCodeAt(s.before.length-1),h,r);m.inside&&(u=tm(h)+u.slice(1));const p=u.charCodeAt(u.length-1),g=Uv(s.after.charCodeAt(0),p,r);g.inside&&(u=u.slice(0,-1)+tm(p));const y=a.move(r+r);return i(),n.attentionEncodeSurroundingInfo={after:g.outside,before:m.outside},l+u+y}function F0e(t,e,n){return n.options.strong||"*"}function U0e(t,e,n,s){return n.safe(t.value,s)}function H0e(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function V0e(t,e,n){const s=(d7(n)+(n.options.ruleSpaces?" ":"")).repeat(H0e(n));return n.options.ruleSpaces?s.slice(0,-1):s}const p7={blockquote:f0e,break:i6,code:b0e,definition:x0e,emphasis:r7,hardBreak:i6,heading:C0e,html:i7,image:a7,imageReference:o7,inlineCode:l7,link:u7,linkReference:h7,list:I0e,listItem:L0e,paragraph:P0e,root:$0e,strong:f7,text:U0e,thematicBreak:V0e};function q0e(){return{enter:{table:K0e,tableData:a6,tableHeader:a6,tableRow:G0e},exit:{codeText:Y0e,table:W0e,tableData:CS,tableHeader:CS,tableRow:CS}}}function K0e(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function W0e(t){this.exit(t),this.data.inTable=void 0}function G0e(t){this.enter({type:"tableRow",children:[]},t)}function CS(t){this.exit(t)}function a6(t){this.enter({type:"tableCell",children:[]},t)}function Y0e(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,Z0e));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function Z0e(t,e){return e==="|"?e:t}function J0e(t){const e=t||{},n=e.tableCellPadding,s=e.tablePipeAlign,r=e.stringLength,i=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:g,table:a,tableCell:u,tableRow:l}};function a(y,b,_,w){return h(m(y,_,w),y.align)}function l(y,b,_,w){const k=p(y,_,w),C=h([k]);return C.slice(0,C.indexOf(`
`))}function u(y,b,_,w){const k=_.enter("tableCell"),C=_.enter("phrasing"),E=_.containerPhrasing(y,{...w,before:i,after:i});return C(),k(),E}function h(y,b){return h0e(y,{align:b,alignDelimiters:s,padding:n,stringLength:r})}function m(y,b,_){const w=y.children;let k=-1;const C=[],E=b.enter("table");for(;++k<w.length;)C[k]=p(w[k],b,_);return E(),C}function p(y,b,_){const w=y.children;let k=-1;const C=[],E=b.enter("tableRow");for(;++k<w.length;)C[k]=u(w[k],y,b,_);return E(),C}function g(y,b,_){let w=p7.inlineCode(y,b,_);return _.stack.includes("tableCell")&&(w=w.replace(/\|/g,"\\$&")),w}}function X0e(){return{exit:{taskListCheckValueChecked:o6,taskListCheckValueUnchecked:o6,paragraph:eye}}}function Q0e(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:tye}}}function o6(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function eye(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const s=n.children[0];if(s&&s.type==="text"){const r=e.children;let i=-1,a;for(;++i<r.length;){const l=r[i];if(l.type==="paragraph"){a=l;break}}a===n&&(s.value=s.value.slice(1),s.value.length===0?n.children.shift():n.position&&s.position&&typeof s.position.start.offset=="number"&&(s.position.start.column++,s.position.start.offset++,n.position.start=Object.assign({},s.position.start)))}}this.exit(t)}function tye(t,e,n,s){const r=t.children[0],i=typeof t.checked=="boolean"&&r&&r.type==="paragraph",a="["+(t.checked?"x":" ")+"] ",l=n.createTracker(s);i&&l.move(a);let u=p7.listItem(t,e,n,{...s,...l.current()});return i&&(u=u.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,h)),u;function h(m){return m+a}}function nye(){return[Ige(),t0e(),i0e(),q0e(),X0e()]}function sye(t){return{extensions:[Dge(),n0e(t),a0e(),J0e(t),Q0e()]}}const rye={tokenize:uye,partial:!0},m7={tokenize:hye,partial:!0},g7={tokenize:dye,partial:!0},y7={tokenize:fye,partial:!0},iye={tokenize:pye,partial:!0},v7={name:"wwwAutolink",tokenize:lye,previous:_7},b7={name:"protocolAutolink",tokenize:cye,previous:x7},co={name:"emailAutolink",tokenize:oye,previous:w7},ma={};function aye(){return{text:ma}}let $l=48;for(;$l<123;)ma[$l]=co,$l++,$l===58?$l=65:$l===91&&($l=97);ma[43]=co;ma[45]=co;ma[46]=co;ma[95]=co;ma[72]=[co,b7];ma[104]=[co,b7];ma[87]=[co,v7];ma[119]=[co,v7];function oye(t,e,n){const s=this;let r,i;return a;function a(p){return!OC(p)||!w7.call(s,s.previous)||_A(s.events)?n(p):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),l(p))}function l(p){return OC(p)?(t.consume(p),l):p===64?(t.consume(p),u):n(p)}function u(p){return p===46?t.check(iye,m,h)(p):p===45||p===95||Ms(p)?(i=!0,t.consume(p),u):m(p)}function h(p){return t.consume(p),r=!0,u}function m(p){return i&&r&&Hs(s.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(p)):n(p)}}function lye(t,e,n){const s=this;return r;function r(a){return a!==87&&a!==119||!_7.call(s,s.previous)||_A(s.events)?n(a):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(rye,t.attempt(m7,t.attempt(g7,i),n),n)(a))}function i(a){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(a)}}function cye(t,e,n){const s=this;let r="",i=!1;return a;function a(p){return(p===72||p===104)&&x7.call(s,s.previous)&&!_A(s.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),r+=String.fromCodePoint(p),t.consume(p),l):n(p)}function l(p){if(Hs(p)&&r.length<5)return r+=String.fromCodePoint(p),t.consume(p),l;if(p===58){const g=r.toLowerCase();if(g==="http"||g==="https")return t.consume(p),u}return n(p)}function u(p){return p===47?(t.consume(p),i?h:(i=!0,u)):n(p)}function h(p){return p===null||$v(p)||un(p)||jc(p)||b1(p)?n(p):t.attempt(m7,t.attempt(g7,m),n)(p)}function m(p){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(p)}}function uye(t,e,n){let s=0;return r;function r(a){return(a===87||a===119)&&s<3?(s++,t.consume(a),r):a===46&&s===3?(t.consume(a),i):n(a)}function i(a){return a===null?n(a):e(a)}}function hye(t,e,n){let s,r,i;return a;function a(h){return h===46||h===95?t.check(y7,u,l)(h):h===null||un(h)||jc(h)||h!==45&&b1(h)?u(h):(i=!0,t.consume(h),a)}function l(h){return h===95?s=!0:(r=s,s=void 0),t.consume(h),a}function u(h){return r||s||!i?n(h):e(h)}}function dye(t,e){let n=0,s=0;return r;function r(a){return a===40?(n++,t.consume(a),r):a===41&&s<n?i(a):a===33||a===34||a===38||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===60||a===63||a===93||a===95||a===126?t.check(y7,e,i)(a):a===null||un(a)||jc(a)?e(a):(t.consume(a),r)}function i(a){return a===41&&s++,t.consume(a),r}}function fye(t,e,n){return s;function s(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(t.consume(l),s):l===38?(t.consume(l),i):l===93?(t.consume(l),r):l===60||l===null||un(l)||jc(l)?e(l):n(l)}function r(l){return l===null||l===40||l===91||un(l)||jc(l)?e(l):s(l)}function i(l){return Hs(l)?a(l):n(l)}function a(l){return l===59?(t.consume(l),s):Hs(l)?(t.consume(l),a):n(l)}}function pye(t,e,n){return s;function s(i){return t.consume(i),r}function r(i){return Ms(i)?n(i):e(i)}}function _7(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||un(t)}function x7(t){return!Hs(t)}function w7(t){return!(t===47||OC(t))}function OC(t){return t===43||t===45||t===46||t===95||Ms(t)}function _A(t){let e=t.length,n=!1;for(;e--;){const s=t[e][1];if((s.type==="labelLink"||s.type==="labelImage")&&!s._balanced){n=!0;break}if(s._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const mye={tokenize:Sye,partial:!0};function gye(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:_ye,continuation:{tokenize:xye},exit:wye}},text:{91:{name:"gfmFootnoteCall",tokenize:bye},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:yye,resolveTo:vye}}}}function yye(t,e,n){const s=this;let r=s.events.length;const i=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let a;for(;r--;){const u=s.events[r][1];if(u.type==="labelImage"){a=u;break}if(u.type==="gfmFootnoteCall"||u.type==="labelLink"||u.type==="label"||u.type==="image"||u.type==="link")break}return l;function l(u){if(!a||!a._balanced)return n(u);const h=Ai(s.sliceSerialize({start:a.end,end:s.now()}));return h.codePointAt(0)!==94||!i.includes(h.slice(1))?n(u):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(u),t.exit("gfmFootnoteCallLabelMarker"),e(u))}}function vye(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const s={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},r={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};r.end.column++,r.end.offset++,r.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},r.end),end:Object.assign({},t[t.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},l=[t[n+1],t[n+2],["enter",s,e],t[n+3],t[n+4],["enter",r,e],["exit",r,e],["enter",i,e],["enter",a,e],["exit",a,e],["exit",i,e],t[t.length-2],t[t.length-1],["exit",s,e]];return t.splice(n,t.length-n+1,...l),t}function bye(t,e,n){const s=this,r=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let i=0,a;return l;function l(p){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),u}function u(p){return p!==94?n(p):(t.enter("gfmFootnoteCallMarker"),t.consume(p),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",h)}function h(p){if(i>999||p===93&&!a||p===null||p===91||un(p))return n(p);if(p===93){t.exit("chunkString");const g=t.exit("gfmFootnoteCallString");return r.includes(Ai(s.sliceSerialize(g)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(p)}return un(p)||(a=!0),i++,t.consume(p),p===92?m:h}function m(p){return p===91||p===92||p===93?(t.consume(p),i++,h):h(p)}}function _ye(t,e,n){const s=this,r=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let i,a=0,l;return u;function u(b){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(b),t.exit("gfmFootnoteDefinitionLabelMarker"),h}function h(b){return b===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(b),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",m):n(b)}function m(b){if(a>999||b===93&&!l||b===null||b===91||un(b))return n(b);if(b===93){t.exit("chunkString");const _=t.exit("gfmFootnoteDefinitionLabelString");return i=Ai(s.sliceSerialize(_)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(b),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),g}return un(b)||(l=!0),a++,t.consume(b),b===92?p:m}function p(b){return b===91||b===92||b===93?(t.consume(b),a++,m):m(b)}function g(b){return b===58?(t.enter("definitionMarker"),t.consume(b),t.exit("definitionMarker"),r.includes(i)||r.push(i),Vt(t,y,"gfmFootnoteDefinitionWhitespace")):n(b)}function y(b){return e(b)}}function xye(t,e,n){return t.check($m,e,t.attempt(mye,e,n))}function wye(t){t.exit("gfmFootnoteDefinition")}function Sye(t,e,n){const s=this;return Vt(t,r,"gfmFootnoteDefinitionIndent",5);function r(i){const a=s.events[s.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?e(i):n(i)}}function kye(t){let n=(t||{}).singleTilde;const s={name:"strikethrough",tokenize:i,resolveAll:r};return n==null&&(n=!0),{text:{126:s},insideSpan:{null:[s]},attentionMarkers:{null:[126]}};function r(a,l){let u=-1;for(;++u<a.length;)if(a[u][0]==="enter"&&a[u][1].type==="strikethroughSequenceTemporary"&&a[u][1]._close){let h=u;for(;h--;)if(a[h][0]==="exit"&&a[h][1].type==="strikethroughSequenceTemporary"&&a[h][1]._open&&a[u][1].end.offset-a[u][1].start.offset===a[h][1].end.offset-a[h][1].start.offset){a[u][1].type="strikethroughSequence",a[h][1].type="strikethroughSequence";const m={type:"strikethrough",start:Object.assign({},a[h][1].start),end:Object.assign({},a[u][1].end)},p={type:"strikethroughText",start:Object.assign({},a[h][1].end),end:Object.assign({},a[u][1].start)},g=[["enter",m,l],["enter",a[h][1],l],["exit",a[h][1],l],["enter",p,l]],y=l.parser.constructs.insideSpan.null;y&&Pr(g,g.length,0,_1(y,a.slice(h+1,u),l)),Pr(g,g.length,0,[["exit",p,l],["enter",a[u][1],l],["exit",a[u][1],l],["exit",m,l]]),Pr(a,h-1,u-h+3,g),u=h+g.length-2;break}}for(u=-1;++u<a.length;)a[u][1].type==="strikethroughSequenceTemporary"&&(a[u][1].type="data");return a}function i(a,l,u){const h=this.previous,m=this.events;let p=0;return g;function g(b){return h===126&&m[m.length-1][1].type!=="characterEscape"?u(b):(a.enter("strikethroughSequenceTemporary"),y(b))}function y(b){const _=Rh(h);if(b===126)return p>1?u(b):(a.consume(b),p++,y);if(p<2&&!n)return u(b);const w=a.exit("strikethroughSequenceTemporary"),k=Rh(b);return w._open=!k||k===2&&!!_,w._close=!_||_===2&&!!k,l(b)}}}class Cye{constructor(){this.map=[]}add(e,n,s){Nye(this,e,n,s)}consume(e){if(this.map.sort(function(i,a){return i[0]-a[0]}),this.map.length===0)return;let n=this.map.length;const s=[];for(;n>0;)n-=1,s.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];s.push(e.slice()),e.length=0;let r=s.pop();for(;r;){for(const i of r)e.push(i);r=s.pop()}this.map.length=0}}function Nye(t,e,n,s){let r=0;if(!(n===0&&s.length===0)){for(;r<t.map.length;){if(t.map[r][0]===e){t.map[r][1]+=n,t.map[r][2].push(...s);return}r+=1}t.map.push([e,n,s])}}function Eye(t,e){let n=!1;const s=[];for(;e<t.length;){const r=t[e];if(n){if(r[0]==="enter")r[1].type==="tableContent"&&s.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(r[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const i=s.length-1;s[i]=s[i]==="left"?"center":"right"}}else if(r[1].type==="tableDelimiterRow")break}else r[0]==="enter"&&r[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return s}function Aye(){return{flow:{null:{name:"table",tokenize:Rye,resolveAll:Tye}}}}function Rye(t,e,n){const s=this;let r=0,i=0,a;return l;function l(P){let G=s.events.length-1;for(;G>-1;){const Z=s.events[G][1].type;if(Z==="lineEnding"||Z==="linePrefix")G--;else break}const $=G>-1?s.events[G][1].type:null,U=$==="tableHead"||$==="tableRow"?N:u;return U===N&&s.parser.lazy[s.now().line]?n(P):U(P)}function u(P){return t.enter("tableHead"),t.enter("tableRow"),h(P)}function h(P){return P===124||(a=!0,i+=1),m(P)}function m(P){return P===null?n(P):ht(P)?i>1?(i=0,s.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(P),t.exit("lineEnding"),y):n(P):zt(P)?Vt(t,m,"whitespace")(P):(i+=1,a&&(a=!1,r+=1),P===124?(t.enter("tableCellDivider"),t.consume(P),t.exit("tableCellDivider"),a=!0,m):(t.enter("data"),p(P)))}function p(P){return P===null||P===124||un(P)?(t.exit("data"),m(P)):(t.consume(P),P===92?g:p)}function g(P){return P===92||P===124?(t.consume(P),p):p(P)}function y(P){return s.interrupt=!1,s.parser.lazy[s.now().line]?n(P):(t.enter("tableDelimiterRow"),a=!1,zt(P)?Vt(t,b,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):b(P))}function b(P){return P===45||P===58?w(P):P===124?(a=!0,t.enter("tableCellDivider"),t.consume(P),t.exit("tableCellDivider"),_):R(P)}function _(P){return zt(P)?Vt(t,w,"whitespace")(P):w(P)}function w(P){return P===58?(i+=1,a=!0,t.enter("tableDelimiterMarker"),t.consume(P),t.exit("tableDelimiterMarker"),k):P===45?(i+=1,k(P)):P===null||ht(P)?A(P):R(P)}function k(P){return P===45?(t.enter("tableDelimiterFiller"),C(P)):R(P)}function C(P){return P===45?(t.consume(P),C):P===58?(a=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(P),t.exit("tableDelimiterMarker"),E):(t.exit("tableDelimiterFiller"),E(P))}function E(P){return zt(P)?Vt(t,A,"whitespace")(P):A(P)}function A(P){return P===124?b(P):P===null||ht(P)?!a||r!==i?R(P):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(P)):R(P)}function R(P){return n(P)}function N(P){return t.enter("tableRow"),M(P)}function M(P){return P===124?(t.enter("tableCellDivider"),t.consume(P),t.exit("tableCellDivider"),M):P===null||ht(P)?(t.exit("tableRow"),e(P)):zt(P)?Vt(t,M,"whitespace")(P):(t.enter("data"),I(P))}function I(P){return P===null||P===124||un(P)?(t.exit("data"),M(P)):(t.consume(P),P===92?W:I)}function W(P){return P===92||P===124?(t.consume(P),I):I(P)}}function Tye(t,e){let n=-1,s=!0,r=0,i=[0,0,0,0],a=[0,0,0,0],l=!1,u=0,h,m,p;const g=new Cye;for(;++n<t.length;){const y=t[n],b=y[1];y[0]==="enter"?b.type==="tableHead"?(l=!1,u!==0&&(l6(g,e,u,h,m),m=void 0,u=0),h={type:"table",start:Object.assign({},b.start),end:Object.assign({},b.end)},g.add(n,0,[["enter",h,e]])):b.type==="tableRow"||b.type==="tableDelimiterRow"?(s=!0,p=void 0,i=[0,0,0,0],a=[0,n+1,0,0],l&&(l=!1,m={type:"tableBody",start:Object.assign({},b.start),end:Object.assign({},b.end)},g.add(n,0,[["enter",m,e]])),r=b.type==="tableDelimiterRow"?2:m?3:1):r&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")?(s=!1,a[2]===0&&(i[1]!==0&&(a[0]=a[1],p=H0(g,e,i,r,void 0,p),i=[0,0,0,0]),a[2]=n)):b.type==="tableCellDivider"&&(s?s=!1:(i[1]!==0&&(a[0]=a[1],p=H0(g,e,i,r,void 0,p)),i=a,a=[i[1],n,0,0])):b.type==="tableHead"?(l=!0,u=n):b.type==="tableRow"||b.type==="tableDelimiterRow"?(u=n,i[1]!==0?(a[0]=a[1],p=H0(g,e,i,r,n,p)):a[1]!==0&&(p=H0(g,e,a,r,n,p)),r=0):r&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")&&(a[3]=n)}for(u!==0&&l6(g,e,u,h,m),g.consume(e.events),n=-1;++n<e.events.length;){const y=e.events[n];y[0]==="enter"&&y[1].type==="table"&&(y[1]._align=Eye(e.events,n))}return t}function H0(t,e,n,s,r,i){const a=s===1?"tableHeader":s===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(i.end=Object.assign({},Uu(e.events,n[0])),t.add(n[0],0,[["exit",i,e]]));const u=Uu(e.events,n[1]);if(i={type:a,start:Object.assign({},u),end:Object.assign({},u)},t.add(n[1],0,[["enter",i,e]]),n[2]!==0){const h=Uu(e.events,n[2]),m=Uu(e.events,n[3]),p={type:l,start:Object.assign({},h),end:Object.assign({},m)};if(t.add(n[2],0,[["enter",p,e]]),s!==2){const g=e.events[n[2]],y=e.events[n[3]];if(g[1].end=Object.assign({},y[1].end),g[1].type="chunkText",g[1].contentType="text",n[3]>n[2]+1){const b=n[2]+1,_=n[3]-n[2]-1;t.add(b,_,[])}}t.add(n[3]+1,0,[["exit",p,e]])}return r!==void 0&&(i.end=Object.assign({},Uu(e.events,r)),t.add(r,0,[["exit",i,e]]),i=void 0),i}function l6(t,e,n,s,r){const i=[],a=Uu(e.events,n);r&&(r.end=Object.assign({},a),i.push(["exit",r,e])),s.end=Object.assign({},a),i.push(["exit",s,e]),t.add(n+1,0,i)}function Uu(t,e){const n=t[e],s=n[0]==="enter"?"start":"end";return n[1][s]}const jye={name:"tasklistCheck",tokenize:Mye};function Oye(){return{text:{91:jye}}}function Mye(t,e,n){const s=this;return r;function r(u){return s.previous!==null||!s._gfmTasklistFirstContentOfListItem?n(u):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(u),t.exit("taskListCheckMarker"),i)}function i(u){return un(u)?(t.enter("taskListCheckValueUnchecked"),t.consume(u),t.exit("taskListCheckValueUnchecked"),a):u===88||u===120?(t.enter("taskListCheckValueChecked"),t.consume(u),t.exit("taskListCheckValueChecked"),a):n(u)}function a(u){return u===93?(t.enter("taskListCheckMarker"),t.consume(u),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),l):n(u)}function l(u){return ht(u)?e(u):zt(u)?t.check({tokenize:Iye},e,n)(u):n(u)}}function Iye(t,e,n){return Vt(t,s,"whitespace");function s(r){return r===null?n(r):e(r)}}function Dye(t){return Oz([aye(),gye(),kye(t),Aye(),Oye()])}const Lye={};function Pye(t){const e=this,n=t||Lye,s=e.data(),r=s.micromarkExtensions||(s.micromarkExtensions=[]),i=s.fromMarkdownExtensions||(s.fromMarkdownExtensions=[]),a=s.toMarkdownExtensions||(s.toMarkdownExtensions=[]);r.push(Dye(n)),i.push(nye()),a.push(sye(n))}function Bye(t){Qz(t,[/\r?\n|\r/g,$ye])}function $ye(){return{type:"break"}}function zye(){return function(t){Bye(t)}}const Fye={pre:({children:t})=>f.jsx(f.Fragment,{children:t}),li:({children:t,...e})=>f.jsx("li",{className:"py-0.5 ml-0",...e,children:t}),ul:({children:t,...e})=>f.jsx("ul",{className:"list-disc list-outside ml-5 pl-0 my-2",...e,children:t}),ol:({children:t,...e})=>f.jsx("ol",{className:"list-decimal list-outside ml-5 pl-0 my-2",...e,children:t}),strong:({children:t,...e})=>f.jsx("span",{className:"font-semibold",...e,children:t}),a:({children:t,href:e,...n})=>{let s=e||"";return s&&!s.startsWith("http")&&!s.startsWith("#")&&(s=`https://${s}`),f.jsx("a",{className:"text-sky-400 hover:underline",href:s,target:"_blank",rel:"noreferrer noopener",...n,children:t})},h1:({children:t,...e})=>f.jsx("h1",{className:"text-xl font-semibold mt-4 mb-2",...e,children:t}),h2:({children:t,...e})=>f.jsx("h2",{className:"text-lg font-semibold mt-4 mb-2",...e,children:t}),h3:({children:t,...e})=>f.jsx("h3",{className:"text-base font-semibold mt-3 mb-1",...e,children:t}),h4:({children:t,...e})=>f.jsx("h4",{className:"text-sm font-semibold mt-3 mb-1",...e,children:t}),h5:({children:t,...e})=>f.jsx("h5",{className:"text-sm font-semibold mt-2 mb-1",...e,children:t}),h6:({children:t,...e})=>f.jsx("h6",{className:"text-xs font-semibold mt-2 mb-1",...e,children:t}),p:({children:t,...e})=>f.jsx("p",{className:"my-2 leading-relaxed",...e,children:t}),table:({children:t,...e})=>f.jsx("div",{className:"overflow-x-auto my-3",children:f.jsx("table",{className:"w-full border-collapse border border-neutral-600 text-xs",...e,children:t})}),thead:({children:t,...e})=>f.jsx("thead",{className:"bg-neutral-700",...e,children:t}),tbody:({children:t,...e})=>f.jsx("tbody",{...e,children:t}),tr:({children:t,...e})=>f.jsx("tr",{className:"border-b border-neutral-600",...e,children:t}),th:({children:t,...e})=>f.jsx("th",{className:"p-2 text-left font-semibold border-r last:border-r-0 border-neutral-600",...e,children:t}),td:({children:t,...e})=>f.jsx("td",{className:"p-2 border-r last:border-r-0 border-neutral-600",...e,children:t}),blockquote:({children:t,...e})=>f.jsx("blockquote",{className:"border-l-4 border-neutral-500 pl-3 py-1 my-2 italic text-neutral-300",...e,children:t}),hr:({...t})=>f.jsx("hr",{className:"my-4 border-neutral-600",...t}),code({children:t,className:e,...n}){const s=/language-(\w+)/.exec(e||""),r=String(t).replace(/\n$/,""),i=r.includes(`
`);if(!s&&!i)return f.jsx("code",{...n,className:`${e||""} bg-neutral-700 px-1.5 py-0.5 rounded text-xs font-mono text-sky-300`,children:t});const a=s?.[1]||"text";return f.jsxs("div",{className:"my-3",children:[f.jsx("div",{className:"flex items-center justify-between bg-neutral-700 px-3 py-1 rounded-t text-xs text-neutral-400",children:f.jsx("span",{children:a})}),f.jsx("pre",{className:"bg-neutral-800 p-3 rounded-b overflow-x-auto",children:f.jsx("code",{className:"text-xs font-mono text-neutral-200",children:r})})]})}},Uye=[Pye,zye],Hye=t=>{const e=Pe.c(6),{children:n}=t;if(!n)return null;let s=n,r;if(e[0]!==s){s=s.replace(/^(#{1,6}\s+.+)\n```/gm,"$1\n\n```");let a;e[3]===Symbol.for("react.memo_cache_sentinel")?(a=/```\n(#{1,6}\s+)/gm,e[3]=a):a=e[3],r=s.replace(a,"```\n\n$1"),e[0]=s,e[1]=r,e[2]=s}else r=e[1],s=e[2];s=r;let i;return e[4]!==s?(i=f.jsx(Cge,{remarkPlugins:Uye,components:Fye,children:s}),e[4]=s,e[5]=i):i=e[5],i},Vye=F.memo(Hye,(t,e)=>t.children===e.children);function S7(t){const e=Pe.c(83),{isOpen:n,onClose:s,otherPanelOpen:r,adapterConfig:i,environment:a,tools:l,buildInstructions:u}=t,h=r===void 0?!1:r,[m,p]=F.useState(""),g=F.useRef(null),y=F.useRef(null),b=F.useRef(i.id);let _;if(e[0]!==u||e[1]!==a||e[2]!==l){const Ee=pde(),ae=fde(Ee),be=u(a);_=Pue(Ye=>yue({adapter:ae,messages:Ye,tools:l,systemPrompts:[be],agentLoopStrategy:D$(10)})),e[0]=u,e[1]=a,e[2]=l,e[3]=_}else _=e[3];const w=_;let k;e[4]!==w||e[5]!==l?(k={connection:w,tools:l},e[4]=w,e[5]=l,e[6]=k):k=e[6];const{messages:C,sendMessage:E,isLoading:A,stop:R,clear:N}=Bue(k);let M,I;e[7]!==i.id||e[8]!==N?(M=()=>{b.current!==i.id&&(N(),b.current=i.id)},I=[i.id,N],e[7]=i.id,e[8]=N,e[9]=M,e[10]=I):(M=e[9],I=e[10]),F.useEffect(M,I);let W;e[11]===Symbol.for("react.memo_cache_sentinel")?(W=()=>{g.current?.scrollIntoView({behavior:"smooth"})},e[11]=W):W=e[11];let P;e[12]!==C?(P=[C],e[12]=C,e[13]=P):P=e[13],F.useEffect(W,P);let G,$;e[14]!==n?(G=()=>{n&&y.current?.focus()},$=[n],e[14]=n,e[15]=G,e[16]=$):(G=e[15],$=e[16]),F.useEffect(G,$);let U;e[17]!==m||e[18]!==A||e[19]!==E?(U=Ee=>{Ee.preventDefault(),!(!m.trim()||A)&&(E(m.trim()),p(""))},e[17]=m,e[18]=A,e[19]=E,e[20]=U):U=e[20];const Z=U;let K;e[21]!==Z?(K=Ee=>{Ee.key==="Enter"&&!Ee.shiftKey&&(Ee.preventDefault(),Z(Ee))},e[21]=Z,e[22]=K):K=e[22];const B=K,J=qye;let Y;e[23]!==A||e[24]!==C.length?(Y=(Ee,ae)=>A&&Ee.role==="assistant"&&ae===C.length-1,e[23]=A,e[24]=C.length,e[25]=Y):Y=e[25];const z=Y,O=`fixed top-0 right-0 h-screen bg-white border-l border-neutral-200 dark:bg-neutral-900 dark:border-neutral-800 flex flex-col transition-all duration-300 ease-in-out z-30 ${n?"opacity-100 translate-x-0":"opacity-0 translate-x-full pointer-events-none"}`,L=h?"28rem":"40rem";let V;e[26]!==L?(V={width:L},e[26]=L,e[27]=V):V=e[27];let T;e[28]!==i.name?(T=f.jsx("h3",{className:"font-semibold text-neutral-900 dark:text-neutral-100",children:i.name}),e[28]=i.name,e[29]=T):T=e[29];let Q;e[30]===Symbol.for("react.memo_cache_sentinel")?(Q=f.jsx(kD,{size:18}),e[30]=Q):Q=e[30];let te;e[31]!==N?(te=f.jsx("button",{onClick:N,className:"p-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded-md transition-colors",title:"Clear chat",children:Q}),e[31]=N,e[32]=te):te=e[32];let X;e[33]===Symbol.for("react.memo_cache_sentinel")?(X=f.jsx(Mp,{size:18}),e[33]=X):X=e[33];let oe;e[34]!==s?(oe=f.jsx("button",{onClick:s,className:"p-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded-md transition-colors",children:X}),e[34]=s,e[35]=oe):oe=e[35];let xe;e[36]!==te||e[37]!==oe?(xe=f.jsxs("div",{className:"flex items-center gap-1",children:[te,oe]}),e[36]=te,e[37]=oe,e[38]=xe):xe=e[38];let Se;e[39]!==T||e[40]!==xe?(Se=f.jsxs("div",{className:"shrink-0 h-16 px-4 flex items-center justify-between border-b border-neutral-200 dark:border-neutral-800",children:[T,xe]}),e[39]=T,e[40]=xe,e[41]=Se):Se=e[41];let Xe;if(e[42]!==z||e[43]!==C){let Ee;e[45]!==z?(Ee=(ae,be)=>{const Ye=J(ae);return f.jsx("div",{className:`text-sm ${ae.role==="user"?"bg-neutral-100 dark:bg-neutral-800/50 -mx-4 px-4 py-3 border-l-2 border-sky-500":""}`,children:f.jsx("div",{className:ae.role==="user"?"text-neutral-900 dark:text-neutral-100":"text-neutral-800 dark:text-neutral-200",children:ae.role==="assistant"?Ye?f.jsx(Vye,{children:Ye}):z(ae,be)?f.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[f.jsx(qa,{size:14,className:"animate-spin"}),"Thinking..."]}):null:f.jsx("span",{className:"whitespace-pre-wrap",children:Ye})})},ae.id)},e[45]=z,e[46]=Ee):Ee=e[46],Xe=C.map(Ee),e[42]=z,e[43]=C,e[44]=Xe}else Xe=e[44];let Ke;e[47]!==A||e[48]!==C?(Ke=A&&(C.length===0||C[C.length-1]?.role==="user")&&f.jsx("div",{className:"text-sm",children:f.jsx("div",{className:"text-neutral-800 dark:text-neutral-200",children:f.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[f.jsx(qa,{size:14,className:"animate-spin"}),"Thinking..."]})})}),e[47]=A,e[48]=C,e[49]=Ke):Ke=e[49];let st;e[50]===Symbol.for("react.memo_cache_sentinel")?(st=f.jsx("div",{ref:g}),e[50]=st):st=e[50];let Le;e[51]!==Xe||e[52]!==Ke?(Le=f.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0",children:[Xe,Ke,st]}),e[51]=Xe,e[52]=Ke,e[53]=Le):Le=e[53];let Ge;e[54]===Symbol.for("react.memo_cache_sentinel")?(Ge=Ee=>p(Ee.target.value),e[54]=Ge):Ge=e[54];let ct;e[55]===Symbol.for("react.memo_cache_sentinel")?(ct={maxHeight:"120px"},e[55]=ct):ct=e[55];let ut;e[56]!==i.placeholder||e[57]!==B||e[58]!==m||e[59]!==A?(ut=f.jsx("textarea",{ref:y,value:m,onChange:Ge,onKeyDown:B,placeholder:i.placeholder,rows:1,disabled:A,className:"flex-1 px-4 py-2.5 bg-neutral-50 border border-neutral-300 dark:bg-neutral-800 dark:border-neutral-700 rounded-xl text-neutral-900 dark:text-neutral-100 text-sm placeholder-neutral-500 resize-none focus:outline-none focus:ring-2 focus:ring-sky-600 focus:border-transparent disabled:opacity-50",style:ct}),e[56]=i.placeholder,e[57]=B,e[58]=m,e[59]=A,e[60]=ut):ut=e[60];const Re=A?"button":"submit",mt=A?R:void 0;let pt;e[61]!==m||e[62]!==A?(pt=!A&&!m.trim(),e[61]=m,e[62]=A,e[63]=pt):pt=e[63];let At;e[64]!==A?(At=A?f.jsx(VS,{size:18}):f.jsx(OZ,{size:18}),e[64]=A,e[65]=At):At=e[65];let Me;e[66]!==Re||e[67]!==mt||e[68]!==pt||e[69]!==At?(Me=f.jsx("button",{type:Re,onClick:mt,disabled:pt,className:"p-2.5 bg-sky-600 hover:bg-sky-500 disabled:bg-neutral-300 dark:disabled:bg-neutral-700 disabled:text-neutral-500 text-white rounded-xl transition-colors",children:At}),e[66]=Re,e[67]=mt,e[68]=pt,e[69]=At,e[70]=Me):Me=e[70];let ze;e[71]!==ut||e[72]!==Me?(ze=f.jsxs("div",{className:"flex items-end gap-2",children:[ut,Me]}),e[71]=ut,e[72]=Me,e[73]=ze):ze=e[73];let De;e[74]!==Z||e[75]!==ze?(De=f.jsx("form",{onSubmit:Z,className:"shrink-0 p-4 border-t border-neutral-200 dark:border-neutral-800",children:ze}),e[74]=Z,e[75]=ze,e[76]=De):De=e[76];let Je;return e[77]!==O||e[78]!==V||e[79]!==Se||e[80]!==Le||e[81]!==De?(Je=f.jsxs("div",{className:O,style:V,children:[Se,Le,De]}),e[77]=O,e[78]=V,e[79]=Se,e[80]=Le,e[81]=De,e[82]=Je):Je=e[82],Je}function qye(t){return t.parts.filter(Wye).map(Kye).join("").replace(/^undefined/,"")}function Kye(t){return t.content}function Wye(t){return t.type==="text"&&!!t.content}const Gye=ua({resource:xs().describe("The type of resource to list (e.g., pods, deployments, services, configmaps, secrets, ingresses, gateways, httproutes, grpcroutes, tcproutes, udproutes, tlsroutes, jobs, cronjobs, daemonsets, statefulsets, replicasets, nodes, namespaces, persistentvolumes, persistentvolumeclaims, events)"),namespace:xs().optional().describe('The namespace to list resources from. Use "all" for all namespaces, or omit for cluster-scoped resources')}),Yye=ua({resource:xs().describe("The type of resource (e.g., pod, deployment, service)"),name:xs().describe("The name of the resource"),namespace:xs().optional().describe("The namespace of the resource (required for namespaced resources)")}),Zye=ua({name:xs().describe("The name of the pod"),namespace:xs().describe("The namespace of the pod"),container:xs().optional().describe("The container name (optional, defaults to first container)"),tailLines:xs().optional().describe("Number of lines to return from the end of the logs (default: 100)")}),Jye=ua({resource:xs().describe("The type of resource (e.g., pod, deployment, service)"),name:xs().describe("The name of the resource"),namespace:xs().describe("The namespace of the resource")}),Xye=yl({name:"list_resources",description:"List Kubernetes resources of a specific type in a namespace or cluster-wide",inputSchema:Gye}),Qye=yl({name:"get_resource",description:"Get detailed information about a specific Kubernetes resource",inputSchema:Yye}),eve=yl({name:"get_pod_logs",description:"Get logs from a specific pod",inputSchema:Zye}),tve=yl({name:"describe_resource",description:"Get events and status conditions for a Kubernetes resource",inputSchema:Jye});async function NS(t,e){const n=e.toLowerCase(),s=await hr(t,n);return s?{config:s,plural:s.name}:null}function nve(t){const e=t.currentContext,n=Xye.client(async a=>{const l=a,u=await NS(e,l.resource);if(!u)return{error:`Unknown resource type: ${l.resource}`};const{config:h,plural:m}=u,p=Xi(h);let g;h.namespaced&&l.namespace&&l.namespace!=="all"?g=`${p}/namespaces/${l.namespace}/${m}`:g=`${p}/${m}`;const y=await fetch(`/contexts/${e}${g}`);if(!y.ok)return{error:`Failed to list ${m}: ${y.status} ${y.statusText}`};const b=await y.json();return{kind:b.kind,items:b.items?.map(_=>({name:_.metadata?.name,namespace:_.metadata?.namespace,createdAt:_.metadata?.creationTimestamp,status:_.status}))||[]}}),s=Qye.client(async a=>{const l=a,u=await NS(e,l.resource);if(!u)return{error:`Unknown resource type: ${l.resource}`};const{config:h,plural:m}=u,p=Xi(h);let g;h.namespaced&&l.namespace?g=`${p}/namespaces/${l.namespace}/${m}/${l.name}`:g=`${p}/${m}/${l.name}`;const y=await fetch(`/contexts/${e}${g}`);return y.ok?y.json():{error:`Failed to get ${l.resource} ${l.name}: ${y.status} ${y.statusText}`}}),r=eve.client(async a=>{const l=a,u=l.tailLines||"100";let h=`/api/v1/namespaces/${l.namespace}/pods/${l.name}/log?tailLines=${u}`;l.container&&(h+=`&container=${l.container}`);const m=await fetch(`/contexts/${e}${h}`);return m.ok?{logs:await m.text()||"(no logs available)"}:{error:`Failed to get logs: ${m.status} ${m.statusText}`}}),i=tve.client(async a=>{const l=a,u=await NS(e,l.resource);if(!u)return{error:`Unknown resource type: ${l.resource}`};const{config:h,plural:m}=u,p=Xi(h);let g;h.namespaced&&l.namespace?g=`${p}/namespaces/${l.namespace}/${m}/${l.name}`:g=`${p}/${m}/${l.name}`;const y=await fetch(`/contexts/${e}${g}`);if(!y.ok)return{error:`Failed to get ${l.resource} ${l.name}: ${y.status}`};const b=await y.json(),_=`/api/v1/namespaces/${l.namespace}/events?fieldSelector=involvedObject.name=${l.name}`,w=await fetch(`/contexts/${e}${_}`);let k=[];return w.ok&&(k=(await w.json()).items?.map(E=>({type:E.type,reason:E.reason,message:E.message,lastTimestamp:E.lastTimestamp}))||[]),{metadata:b.metadata,spec:b.spec,status:b.status,events:k}});return $$(n,s,r,i)}function sve(t){let e="";const n=[];return t.currentNamespace&&n.push(`- Current namespace: ${t.currentNamespace}`),t.selectedResourceKind&&n.push(`- Currently viewing resource type: ${t.selectedResourceKind}`),t.selectedResourceName&&n.push(`- Currently selected resource: ${t.selectedResourceName}`),n.length>0&&(e=`

The user is currently viewing:
${n.join(`
`)}

Use this context to provide more relevant answers. When the user asks about resources without specifying a namespace, use the current namespace.`),`You are a helpful Kubernetes assistant. You can help users understand and manage their Kubernetes clusters.
When users ask about resources, use the available tools to fetch real data from the cluster.
Provide clear, concise explanations and highlight any issues or warnings you find.
Format your responses using markdown for better readability.${e}`}const rve={id:"kubernetes",name:"Kubernetes Assistant",placeholder:"Ask about your Kubernetes resources..."},ES="ai";function ive(t){const e=Pe.c(50),{resource:n,context:s,namespace:r,selectedItem:i,onSelectItem:a,tab:l,onTabChange:u}=t,{isOpen:h,toggle:m,close:p}=RE();let g;e[0]!==h?(g=h(ES),e[0]=h,e[1]=g):g=e[1];const y=g;let b;e[2]!==s||e[3]!==r||e[4]!==n.group||e[5]!==n.name?(b=["kubernetes","resources",s,n.group,n.name,r],e[2]=s,e[3]=r,e[4]=n.group,e[5]=n.name,e[6]=b):b=e[6];let _;e[7]!==s||e[8]!==r||e[9]!==n?(_=()=>RD(s,n,r),e[7]=s,e[8]=r,e[9]=n,e[10]=_):_=e[10];const{data:w,loading:k,error:C,refetch:E,isRefetching:A}=k$(b,_);let R;e[11]!==n.group||e[12]!==n.kind||e[13]!==n.version?(R=z=>z.object.metadata?{name:z.object.metadata.name||"",namespace:z.object.metadata.namespace,uid:z.object.metadata.uid||"",resourceVersion:z.object.metadata.resourceVersion||"",kind:n.kind,apiVersion:n.group?`${n.group}/${n.version}`:n.version||""}:null,e[11]=n.group,e[12]=n.kind,e[13]=n.version,e[14]=R):R=e[14];const N=R;let M;e[15]!==s||e[16]!==r||e[17]!==n.group||e[18]!==n.kind||e[19]!==n.version?(M=z=>({currentContext:s,currentNamespace:z?.object.metadata?.namespace||r||"all namespaces",selectedResourceKind:n.group?`${n.kind} (${n.group}/${n.version})`:`${n.kind} (${n.version})`,selectedResourceName:z?.object.metadata?.name}),e[15]=s,e[16]=r,e[17]=n.group,e[18]=n.kind,e[19]=n.version,e[20]=M):M=e[20];const I=M;let W;if(e[21]!==I){const z=I(null);W=nve(z),e[21]=I,e[22]=W}else W=e[22];const P=W;let G;e[23]!==y||e[24]!==m?(G=()=>sa().ai?f.jsx("button",{onClick:()=>m(ES),className:`p-2 rounded-md transition-colors ${y?"text-sky-400 hover:text-sky-300 hover:bg-neutral-100 dark:hover:bg-neutral-800":"text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800"}`,title:"AI Assistant",children:f.jsx(wD,{size:18})}):null,e[23]=y,e[24]=m,e[25]=G):G=e[25];const $=G;let U;e[26]!==p||e[27]!==I||e[28]!==y||e[29]!==P?(U=(z,O)=>{const L=I(z);return f.jsx(S7,{isOpen:y,onClose:()=>p(ES),otherPanelOpen:O,adapterConfig:rve,environment:L,tools:P,buildInstructions:sve})},e[26]=p,e[27]=I,e[28]=y,e[29]=P,e[30]=U):U=e[30];const Z=U;let K;e[31]!==s||e[32]!==N||e[33]!==y||e[34]!==u||e[35]!==l?(K=(z,O,L)=>{const V=N(z);return f.jsx(w$,{context:s,isOpen:!0,onClose:O,otherPanelOpen:L||y,resource:V,tab:l,onTabChange:u})},e[31]=s,e[32]=N,e[33]=y,e[34]=u,e[35]=l,e[36]=K):K=e[36];const B=K,J=ave;let Y;return e[37]!==w||e[38]!==C||e[39]!==A||e[40]!==k||e[41]!==r||e[42]!==a||e[43]!==E||e[44]!==B||e[45]!==Z||e[46]!==$||e[47]!==n||e[48]!==i?(Y=f.jsx(I$,{config:n,title:n.kind,namespace:r,data:w,loading:k,error:C,refetch:E,isRefetching:A,renderDetailPanel:B,renderHeaderActions:$,renderExtraPanels:Z,selectedItemName:i,onSelectItemName:a,getItemName:J}),e[37]=w,e[38]=C,e[39]=A,e[40]=k,e[41]=r,e[42]=a,e[43]=E,e[44]=B,e[45]=Z,e[46]=$,e[47]=n,e[48]=i,e[49]=Y):Y=e[49],Y}function ave(t){return t.object.metadata?.name||""}const ove=new Set(["apps","batch","networking.k8s.io","storage.k8s.io","rbac.authorization.k8s.io","policy","autoscaling","coordination.k8s.io","discovery.k8s.io","events.k8s.io","node.k8s.io","scheduling.k8s.io"]),lve=t=>{const e=t.group||"";return e===""||ove.has(e)};function cve(){const t=Pe.c(88);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e={strict:!1},t[0]=e):e=t[0];const{context:n,resourceType:s,name:r}=nm(e);let i;t[1]===Symbol.for("react.memo_cache_sentinel")?(i={from:N1.id},t[1]=i):i=t[1];const a=Yv(i),l=jh();let u;t[2]===Symbol.for("react.memo_cache_sentinel")?(u=sa(),t[2]=u):u=t[2];const h=u,[m,p]=F.useState(!1),[g,y]=F.useState(null);let b;t[3]===Symbol.for("react.memo_cache_sentinel")?(b=h.kubernetes?.contexts||[],t[3]=b):b=t[3];const _=b;let w;t[4]===Symbol.for("react.memo_cache_sentinel")?(w=h.docker?.contexts||[],t[4]=w):w=t[4];const k=w;let C,E;t[5]!==n?(C=["kubernetes","namespaces",n],E=()=>n?iJ(n):Promise.resolve({items:[]}),t[5]=n,t[6]=C,t[7]=E):(C=t[6],E=t[7]);const A=!!n;let R;t[8]!==A?(R={enabled:A},t[8]=A,t[9]=R):R=t[9];const{data:N}=k$(C,E,R);let M;t[10]!==N?.items?(M=N?.items||[],t[10]=N?.items,t[11]=M):M=t[11];const I=M;let W,P;t[12]!==n?(W=()=>{n&&sJ(n)},P=[n],t[12]=n,t[13]=W,t[14]=P):(W=t[13],P=t[14]),F.useEffect(W,P);let G,$;t[15]!==n||t[16]!==s?(G=()=>{n&&s&&hr(n,s).then(Ee=>{if(Ee)y(Ee);else if(s.includes("."))return ED(n,s);return null}).then(Ee=>{Ee&&y(Ee)}).catch(()=>{y(null)})},$=[n,s],t[15]=n,t[16]=s,t[17]=G,t[18]=$):(G=t[17],$=t[18]),F.useEffect(G,$);const U=s?g:null;let Z;t[19]!==n||t[20]!==l||t[21]!==s||t[22]!==a.namespace?(Z=Ee=>{n&&(tJ(n),hJ(n)),s?hr(Ee,s).then(ae=>{l(ae?{to:"/cluster/$context/$resourceType",params:{context:Ee,resourceType:s},search:{namespace:a.namespace}}:{to:"/cluster/$context",params:{context:Ee}})}).catch(()=>{l({to:"/cluster/$context",params:{context:Ee}})}):l({to:"/cluster/$context",params:{context:Ee},search:ae=>({...ae,namespace:a.namespace})})},t[19]=n,t[20]=l,t[21]=s,t[22]=a.namespace,t[23]=Z):Z=t[23];const K=Z;let B;t[24]!==l?(B=Ee=>{l({to:".",search:ae=>({...ae,namespace:Ee})})},t[24]=l,t[25]=B):B=t[25];const J=B;let Y;t[26]!==n||t[27]!==l?(Y=Ee=>{if(Ee){const ae=lve(Ee)?Ee.name:`${Ee.name}.${Ee.group}`;l({to:"/cluster/$context/$resourceType",params:{context:n,resourceType:ae},search:gve})}else l({to:"/cluster/$context/$resourceType",params:{context:n,resourceType:"overview"},search:mve})},t[26]=n,t[27]=l,t[28]=Y):Y=t[28];const z=Y;let O;t[29]!==n||t[30]!==l||t[31]!==s?(O=Ee=>{Ee&&s?l({to:"/cluster/$context/$resourceType/$name",params:{context:n,resourceType:s,name:Ee},search:pve}):s&&l({to:"/cluster/$context/$resourceType",params:{context:n,resourceType:s},search:fve})},t[29]=n,t[30]=l,t[31]=s,t[32]=O):O=t[32];const L=O;let V;t[33]!==l?(V=Ee=>{l({to:".",search:ae=>({...ae,tab:Ee}),replace:!0})},t[33]=l,t[34]=V):V=t[34];const T=V;let Q;t[35]!==l?(Q=Ee=>{l({to:"/docker/$context",params:{context:Ee}})},t[35]=l,t[36]=Q):Q=t[36];const te=Q;let X;t[37]===Symbol.for("react.memo_cache_sentinel")?(X=()=>{p(!1)},t[37]=X):X=t[37];const oe=X;let xe;t[38]!==n||t[39]!==l||t[40]!==a.namespace?(xe=(Ee,ae,be)=>{be&&be!==a.namespace?l({to:"/cluster/$context/$resourceType/$name",params:{context:n,resourceType:Ee,name:ae},search:{namespace:be}}):l({to:"/cluster/$context/$resourceType/$name",params:{context:n,resourceType:Ee,name:ae},search:dve})},t[38]=n,t[39]=l,t[40]=a.namespace,t[41]=xe):xe=t[41];const Se=xe,Xe=n||"";let Ke;if(t[42]!==n||t[43]!==I||t[44]!==l||t[45]!==Se||t[46]!==a.namespace||t[47]!==J||t[48]!==z||t[49]!==Xe){let Ee;t[51]!==l?(Ee=ae=>{l({to:"/cluster/$context",params:{context:ae}})},t[51]=l,t[52]=Ee):Ee=t[52],Ke=AJ({context:Xe,namespace:a.namespace,namespaces:I,contexts:_.map(hve),currentContext:n||"",setNamespace:J,setContext:Ee,setSelectedResource:z,setSelectedItem:Se,onClose:oe}),t[42]=n,t[43]=I,t[44]=l,t[45]=Se,t[46]=a.namespace,t[47]=J,t[48]=z,t[49]=Xe,t[50]=Ke}else Ke=t[50];const st=Ke;let Le,Ge;t[53]===Symbol.for("react.memo_cache_sentinel")?(Le=()=>{const Ee=ae=>{(ae.metaKey||ae.ctrlKey)&&ae.key==="k"&&(ae.preventDefault(),p(uve))};return document.addEventListener("keydown",Ee),()=>document.removeEventListener("keydown",Ee)},Ge=[],t[53]=Le,t[54]=Ge):(Le=t[53],Ge=t[54]),F.useEffect(Le,Ge);const ct=s==="overview",ut=!s,Re=n||"";let mt;t[55]!==K||t[56]!==te||t[57]!==Re?(mt=f.jsx("div",{className:"shrink-0 px-3 pt-3 pb-2",children:f.jsx(jD,{mode:"cluster",contexts:_,selectedContext:Re,onSelectContext:K,dockerContexts:k,selectedDockerContext:"",onSelectDockerContext:te})}),t[55]=K,t[56]=te,t[57]=Re,t[58]=mt):mt=t[58];const pt=n||"";let At;t[59]!==ct||t[60]!==ut||t[61]!==I||t[62]!==g||t[63]!==a.namespace||t[64]!==J||t[65]!==z||t[66]!==pt?(At=f.jsx(vJ,{context:pt,namespace:a.namespace,namespaces:I,selectedResource:g,onSelectResource:z,onSelectNamespace:J,isOverviewSelected:ct,isWelcome:ut}),t[59]=ct,t[60]=ut,t[61]=I,t[62]=g,t[63]=a.namespace,t[64]=J,t[65]=z,t[66]=pt,t[67]=At):At=t[67];let Me;t[68]!==mt||t[69]!==At?(Me=f.jsx("div",{className:"py-2 pl-2 shrink-0 h-full",children:f.jsxs("aside",{className:"w-56 h-full shrink-0 bg-white dark:bg-black/40 backdrop-blur-xl flex flex-col rounded-xl border border-neutral-300/50 dark:border-neutral-700/50",children:[mt,At]})}),t[68]=mt,t[69]=At,t[70]=Me):Me=t[70];let ze;t[71]!==n||t[72]!==U||t[73]!==ct||t[74]!==ut||t[75]!==r||t[76]!==a.namespace||t[77]!==a.tab||t[78]!==L||t[79]!==T?(ze=ut?f.jsx("main",{className:"flex-1 flex flex-col h-full min-w-0 items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("img",{src:"/logo.png",alt:"Logo",className:"w-48 h-48 mx-auto dark:hidden"}),f.jsx("img",{src:"/logo_dark.png",alt:"Logo",className:"w-48 h-48 mx-auto hidden dark:block"}),f.jsxs("p",{className:"mt-4 text-sm text-neutral-500 dark:text-neutral-400",children:["Select a resource from the sidebar or press ",f.jsx("kbd",{className:"px-1.5 py-0.5 rounded bg-neutral-200 dark:bg-neutral-700 text-xs",children:"K"})," to search"]})]})}):ct?f.jsxs("main",{className:"flex-1 flex flex-col h-full min-w-0",children:[f.jsxs("header",{className:"shrink-0 h-14 flex items-center justify-between px-5 mt-2",children:[f.jsx("div",{className:"flex items-center gap-4",children:f.jsx("h2",{className:"text-lg font-medium text-neutral-900 dark:text-neutral-100",children:"Overview"})}),f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("button",{onClick:()=>p(!0),className:"p-2 rounded-md text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 transition-colors",title:"Command Palette (K)",children:f.jsx(oN,{size:18})})})]}),f.jsx("section",{className:"flex-1 overflow-hidden min-h-0",children:f.jsx(Zle,{context:n||"",namespace:a.namespace})})]}):U?f.jsx(ive,{context:n||"",namespace:a.namespace,resource:U,selectedItem:r,onSelectItem:L,tab:a.tab,onTabChange:T},`${U.group||""}/${U.name}`):f.jsx("div",{className:"flex-1 flex items-center justify-center text-neutral-500",children:"Loading resource..."}),t[71]=n,t[72]=U,t[73]=ct,t[74]=ut,t[75]=r,t[76]=a.namespace,t[77]=a.tab,t[78]=L,t[79]=T,t[80]=ze):ze=t[80];let De;t[81]!==st||t[82]!==m?(De=f.jsx(OD,{isOpen:m,onClose:oe,adapter:st}),t[81]=st,t[82]=m,t[83]=De):De=t[83];let Je;return t[84]!==Me||t[85]!==ze||t[86]!==De?(Je=f.jsxs("div",{className:"flex h-screen overflow-hidden bg-neutral-50 text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100",children:[Me,ze,De]}),t[84]=Me,t[85]=ze,t[86]=De,t[87]=Je):Je=t[87],Je}function uve(t){return!t}function hve(t){return{name:t}}function dve(t){return t}function fve(t){return{...t,tab:void 0}}function pve(t){return t}function mve(t){return t}function gve(t){return t}const xA=[{kind:"applications",label:"Applications",icon:iN,aliases:["app","apps"]},{kind:"containers",label:"Containers",icon:eo,aliases:["c","container"]},{kind:"images",label:"Images",icon:Ga,aliases:["i","img","image"]},{kind:"volumes",label:"Volumes",icon:Ws,aliases:["v","vol","volume"]},{kind:"networks",label:"Networks",icon:Vs,aliases:["n","net","network"]}],yve=new Map;for(const t of xA)yve.set(t.kind,t);function vve(t){const e=Pe.c(6),{selectedResource:n,onSelectResource:s,isWelcome:r}=t;let i;e[0]!==r||e[1]!==s||e[2]!==n?(i=xA.map(l=>{const u=!r&&n===l.kind;return f.jsx("li",{children:f.jsxs("button",{className:`flex items-center w-full px-3 py-2 text-sm rounded-lg transition-colors ${u?"bg-white/90 text-neutral-900 shadow-sm dark:bg-neutral-800 dark:text-neutral-100":"text-neutral-600 hover:bg-white/50 hover:text-neutral-900 dark:text-neutral-400 dark:hover:bg-neutral-800/50 dark:hover:text-neutral-200"}`,onClick:()=>s(l.kind),children:[f.jsx(l.icon,{size:16,className:"mr-2.5 shrink-0 opacity-70"}),f.jsx("span",{className:"truncate",children:l.label})]})},l.kind)}),e[0]=r,e[1]=s,e[2]=n,e[3]=i):i=e[3];let a;return e[4]!==i?(a=f.jsx("nav",{className:"flex-1 py-1 overflow-y-auto overflow-x-hidden min-h-0",children:f.jsx("ul",{className:"px-2",children:i})}),e[4]=i,e[5]=a):a=e[5],a}async function zc(t,e){const n=await fetch(`/contexts/${e}${t}`);if(!n.ok)throw new Error(`Docker API request failed: ${n.status} ${n.statusText}`);return n.json()}async function lh(t,e=!0){return zc(`/containers/json?all=${e}`,t)}async function Hv(t,e){return zc(`/containers/${e}/json`,t)}async function wA(t){return zc("/images/json",t)}async function bve(t,e,n=!1){return k1(`/images/${e}?force=${n}`,t)}async function k7(t){return(await zc("/volumes",t)).Volumes??[]}async function c6(t,e){return zc(`/volumes/${encodeURIComponent(e)}`,t)}async function _ve(t,e,n=!1){return k1(`/volumes/${encodeURIComponent(e)}?force=${n}`,t)}async function C7(t){return zc("/networks",t)}async function u6(t,e){return zc(`/networks/${e}`,t)}async function xve(t,e){return k1(`/networks/${e}`,t)}async function Fm(t,e){const n=await fetch(`/contexts/${e}${t}`,{method:"POST"});if(!n.ok){const s=await n.text();throw new Error(s||`Docker API request failed: ${n.status} ${n.statusText}`)}}async function k1(t,e){const n=await fetch(`/contexts/${e}${t}`,{method:"DELETE"});if(!n.ok){const s=await n.text();throw new Error(s||`Docker API request failed: ${n.status} ${n.statusText}`)}}async function wve(t,e){return Fm(`/containers/${e}/start`,t)}async function Sve(t,e){return Fm(`/containers/${e}/stop`,t)}async function kve(t,e){return Fm(`/containers/${e}/restart`,t)}async function Cve(t,e){return Fm(`/containers/${e}/pause`,t)}async function Nve(t,e){return Fm(`/containers/${e}/unpause`,t)}async function Eve(t,e,n=!1){return k1(`/containers/${e}?force=${n}`,t)}function N7(t,e,n={}){const s=new URLSearchParams;return s.set("stdout",String(n.stdout??!0)),s.set("stderr",String(n.stderr??!0)),s.set("timestamps",String(n.timestamps??!0)),n.follow&&s.set("follow","true"),n.tail!==void 0&&s.set("tail",String(n.tail)),n.since!==void 0&&s.set("since",String(n.since)),n.until!==void 0&&s.set("until",String(n.until)),`/contexts/${t}/containers/${e}/logs?${s.toString()}`}async function Ave(t,e,n={}){const s=N7(t,e,{...n,follow:!1}),r=await fetch(s);if(!r.ok)throw new Error(`Failed to fetch logs: ${r.status} ${r.statusText}`);return r.text()}async function Rve(t,e,n,s,r){const i=N7(t,e,{...n,follow:!0}),a=await fetch(i,{signal:r});if(!a.ok)throw new Error(`Failed to stream logs: ${a.status} ${a.statusText}`);const l=a.body?.getReader();if(!l)throw new Error("No response body");const u=new TextDecoder;let h=[],m="",p=null;const g=_=>{m+=_;const w=m.split(`
`);m=w.pop()||"";for(const k of w)k.trim()&&s(k)},y=_=>{const w=u.decode(_,{stream:!0});g(w)},b=()=>{for(;h.length>=8;){const _=h[4]<<24|h[5]<<16|h[6]<<8|h[7];if(h.length<8+_)break;const w=new Uint8Array(h.slice(8,8+_));h=h.slice(8+_);const k=u.decode(w,{stream:!0});g(k)}};try{for(;;){const{done:_,value:w}=await l.read();if(_)break;if(p===null&&w.length>0){const k=w[0];w.length>=4&&k<=2&&w[1]===0&&w[2]===0&&w[3]===0?p=!0:p=!1}p?(h.push(...w),b()):y(w)}m.trim()&&s(m)}finally{l.releaseLock()}}function ol(t){return!t||t.length===0?"unnamed":t[0].replace(/^\//,"")}function Tve(t){if(t==="<none>:<none>")return{repository:"<none>",tag:"<none>"};if(t.includes("@")){const[r,i]=t.split("@");return{repository:r,tag:i}}const e=t.lastIndexOf("/"),s=(e>=0?t.substring(e+1):t).lastIndexOf(":");if(s>=0){const r=e>=0?e+1+s:s;return{repository:t.substring(0,r),tag:t.substring(r+1)}}return{repository:t,tag:"latest"}}function vy(t){return t<1024?`${t} B`:t<1024*1024?`${(t/1024).toFixed(1)} KB`:t<1024*1024*1024?`${(t/(1024*1024)).toFixed(1)} MB`:`${(t/(1024*1024*1024)).toFixed(2)} GB`}function jve(t){return!t||t.length===0?"-":t.filter(e=>e.PublicPort).map(e=>`${e.PublicPort}:${e.PrivatePort}/${e.Type}`).join(", ")||"-"}function E7(t){if(!t||t<=0)return"-";const e=new Date(t*1e3),s=new Date().getTime()-e.getTime(),r=Math.floor(s/1e3),i=Math.floor(r/60),a=Math.floor(i/60),l=Math.floor(a/24);return l>0?`${l}d`:a>0?`${a}h`:i>0?`${i}m`:`${r}s`}function A7(t){const e=[{name:"Name",type:"string",format:"",description:"Container name",priority:0},{name:"Image",type:"string",format:"",description:"Container image",priority:0},{name:"Status",type:"string",format:"",description:"Container status",priority:0},{name:"State",type:"string",format:"",description:"Container state",priority:1},{name:"Ports",type:"string",format:"",description:"Published ports",priority:1},{name:"Age",type:"string",format:"",description:"Time since created",priority:1}],n=t.map(s=>({cells:[ol(s.Names??[]),s.Image??"",s.Status??"",s.State??"",jve(s.Ports??[]),E7(s.Created??0)],object:s}));return{columnDefinitions:e,rows:n}}function R7(t){const e=[{name:"Repository",type:"string",format:"",description:"Image repository",priority:0},{name:"Tag",type:"string",format:"",description:"Image tag",priority:0},{name:"Image ID",type:"string",format:"",description:"Image identifier",priority:0},{name:"Size",type:"string",format:"",description:"Image size",priority:1},{name:"Age",type:"string",format:"",description:"Time since created",priority:1}],n=t.map(s=>{const r=s.RepoTags?.[0]||"<none>:<none>",{repository:i,tag:a}=Tve(r);return{cells:[i||"<none>",a||"<none>",s.Id?.replace("sha256:","").substring(0,12)??"<none>",vy(s.Size),E7(s.Created??0)],object:s}});return{columnDefinitions:e,rows:n}}function T7(t){const e=[{name:"Name",type:"string",format:"",description:"Volume name",priority:0},{name:"Driver",type:"string",format:"",description:"Volume driver",priority:0},{name:"Scope",type:"string",format:"",description:"Volume scope",priority:1},{name:"Mountpoint",type:"string",format:"",description:"Mount location",priority:2}],n=t.map(s=>({cells:[s.Name??"",s.Driver??"local",s.Scope??"local",s.Mountpoint??""],object:s}));return{columnDefinitions:e,rows:n}}function j7(t){const e=[{name:"Name",type:"string",format:"",description:"Network name",priority:0},{name:"Driver",type:"string",format:"",description:"Network driver",priority:0},{name:"Scope",type:"string",format:"",description:"Network scope",priority:1},{name:"ID",type:"string",format:"",description:"Network identifier",priority:2}],n=t.map(s=>({cells:[s.Name??"",s.Driver??"bridge",s.Scope??"local",s.Id?.substring(0,12)??""],object:s}));return{columnDefinitions:e,rows:n}}const V0="com.docker.compose.project",Ove="com.docker.compose.service",Mve="com.docker.compose.project.config_files",Ive="com.docker.compose.project.working_dir";async function Dve(t){const[e,n,s]=await Promise.all([lh(t,!0),C7(t),k7(t)]),r=e.filter(m=>m.Labels?.[V0]),i=await Promise.all(r.map(m=>Hv(t,m.Id))),a=new Map;for(const m of i){const p=m.Config?.Labels,g=p?.[V0];if(!g)continue;const y=p?.[Ove]??"unknown";a.has(g)||a.set(g,{services:new Map,configFiles:p?.[Mve],workingDir:p?.[Ive]});const b=a.get(g);b.services.has(y)||b.services.set(y,[]),b.services.get(y).push(m)}const l=new Map;for(const m of n){const p=m.Labels?.[V0];p&&(l.has(p)||l.set(p,[]),l.get(p).push(m))}const u=new Map;for(const m of s){const p=m.Labels?.[V0];p&&(u.has(p)||u.set(p,[]),u.get(p).push(m))}const h=[];for(const[m,p]of a){const g=[];let y=0,b=0;for(const[_,w]of p.services){const k=w.filter(E=>E.State?.Running).length;y+=k,b+=w.length;const C=w[0]?.Config?.Image;g.push({name:_,containers:w,running:k,total:w.length,image:C})}g.sort((_,w)=>_.name.localeCompare(w.name)),h.push({name:m,services:g,runningContainers:y,totalContainers:b,networks:l.get(m)??[],volumes:u.get(m)??[],configFiles:p.configFiles,workingDir:p.workingDir})}return h.sort((m,p)=>m.name.localeCompare(p.name)),h}function O7(t){const e=[{name:"Name",type:"string",format:"",description:"Application name",priority:0},{name:"Services",type:"number",format:"",description:"Number of services",priority:0},{name:"Status",type:"string",format:"",description:"Running containers",priority:0},{name:"Networks",type:"number",format:"",description:"Number of networks",priority:1},{name:"Volumes",type:"number",format:"",description:"Number of volumes",priority:1}],n=t.map(s=>({cells:[s.name,s.services.length.toString(),`${s.runningContainers}/${s.totalContainers}`,s.networks.length.toString(),s.volumes.length.toString()],object:s}));return{columnDefinitions:e,rows:n}}function yf(t){return t.toLowerCase().replace(/[-_.]/g,"")}const MC=xA.map(t=>({kind:t.kind,label:t.label,icon:t.icon,category:"Docker",aliases:t.aliases}));function Lve(t){const e=t.toLowerCase();return MC.find(n=>n.kind.toLowerCase()===e||n.label.toLowerCase()===e||n.aliases?.some(s=>s.toLowerCase()===e))}function Pve(t){const{context:e,onSelectResource:n,onSelectItem:s,onClose:r}=t;return{id:"docker",resourceTypes:MC,supportsNamespaces:!1,searchModePrefixes:[{prefix:":",mode:"resources"},{prefix:"/",mode:"filter"}],async initialize(){},getAvailableResourceTypes(){return MC},getNamespaces(){return[]},resourceTypeToSearchResult(a){return{id:`type-${a.kind}`,type:"resource-type",label:a.label,sublabel:a.aliases?.length?`${a.category}  ${a.aliases.join(", ")}`:a.category,icon:a.icon,category:a.category,data:{dockerResourceType:a.kind},completionValue:a.kind}},findResourceType(a){return Lve(a)},async searchResources(a,l,u){if(!a||a.length<2)return[];const h=[],m=yf(a),p=!u||u==="containers",g=!u||u==="images";try{const[y,b]=await Promise.all([p?lh(e,!0):Promise.resolve([]),g?wA(e):Promise.resolve([])]);if(p)for(const _ of y){const k=(_.Names||[])[0]?.replace(/^\//,"")||_.Id?.substring(0,12)||"",C=k;yf(k).includes(m)&&h.push({id:`container/${_.Id}`,type:"resource",label:k,sublabel:`Container  ${_.State||"unknown"}`,icon:eo,category:"Docker",data:{dockerResourceType:"containers",resourceName:C},completionValue:k})}if(g)for(const _ of b){const k=(_.RepoTags||[])[0]||_.Id?.substring(7,19)||"",C=k.replace(/:/g,"-");yf(k).includes(m)&&h.push({id:`image/${_.Id}`,type:"resource",label:k,sublabel:"Image",icon:Ga,category:"Docker",data:{dockerResourceType:"images",resourceName:C},completionValue:k})}}catch{}return h.sort((y,b)=>{const _=yf(y.label)===m,w=yf(b.label)===m;return _&&!w?-1:!_&&w?1:y.label.localeCompare(b.label)}),h.slice(0,50)},handleSelect(a){if(a.type==="resource-type"){const l=a.data.dockerResourceType;l&&n(l)}else if(a.type==="resource"){const l=a.data.dockerResourceType,u=a.data.resourceName;l&&u?s(l,u):l&&n(l)}r()},getPlaceholder(a){switch(a){case"resources":return"Type resource name (e.g., containers, images)...";case"filter":return"Filter current view...";default:return"Search containers and images... (:containers, :images, /filter)"}},getHelpItems(){return[{prefix:":containers",label:"Containers (c)"},{prefix:":images",label:"Images (img)"},{prefix:"/",label:"Filter current view"}]},getCurrentScopeLabel(){return null}}}const Bve=ua({all:xs().optional().describe("Whether to include stopped containers (default: true)")}),$ve=ua({}),zve=ua({container:xs().describe("The container name or ID")}),Fve=ua({container:xs().describe("The container name or ID"),tail:xs().optional().describe("Number of lines to return from the end of the logs (default: 100)")}),Uve=yl({name:"list_containers",description:"List all Docker containers (running and stopped)",inputSchema:Bve}),Hve=yl({name:"list_images",description:"List all Docker images on the system",inputSchema:$ve}),Vve=yl({name:"inspect_container",description:"Get detailed information about a specific container",inputSchema:zve}),qve=yl({name:"get_container_logs",description:"Get logs from a specific container",inputSchema:Fve});function Kve(t){return t<1024?`${t} B`:t<1024*1024?`${(t/1024).toFixed(1)} KB`:t<1024*1024*1024?`${(t/(1024*1024)).toFixed(1)} MB`:`${(t/(1024*1024*1024)).toFixed(2)} GB`}function Wve(t){const e=t.context,n=Uve.client(async a=>{const u=a.all!=="false";return{containers:(await lh(e,u)).map(m=>({id:m.Id?.substring(0,12),name:ol(m.Names??[]),image:m.Image,state:m.State,status:m.Status,ports:m.Ports?.filter(p=>p.PublicPort).map(p=>`${p.PublicPort}:${p.PrivatePort}/${p.Type}`)}))}}),s=Hve.client(async()=>({images:(await wA(e)).map(l=>{const u=l.RepoTags?.[0]||"<none>:<none>",[h,m]=u.split(":");return{id:l.Id.replace("sha256:","").substring(0,12),repository:h,tag:m,size:Kve(l.Size),created:new Date(l.Created*1e3).toISOString()}})})),r=Vve.client(async a=>{const l=a;try{const h=(await lh(e,!0)).find(p=>p.Id?.startsWith(l.container)||ol(p.Names??[]).toLowerCase()===l.container.toLowerCase());if(!h?.Id)return{error:`Container not found: ${l.container}`};const m=await Hv(e,h.Id);return{id:m.Id?.substring(0,12),name:m.Name?.replace(/^\//,""),image:m.Config?.Image,state:{status:m.State?.Status,running:m.State?.Running,startedAt:m.State?.StartedAt,finishedAt:m.State?.FinishedAt,exitCode:m.State?.ExitCode},config:{env:m.Config?.Env,cmd:m.Config?.Cmd,workingDir:m.Config?.WorkingDir,exposedPorts:m.Config?.ExposedPorts?Object.keys(m.Config.ExposedPorts):[]},hostConfig:{portBindings:m.HostConfig?.PortBindings,binds:m.HostConfig?.Binds,networkMode:m.HostConfig?.NetworkMode,restartPolicy:m.HostConfig?.RestartPolicy},networkSettings:{ipAddress:m.NetworkSettings?.IPAddress,networks:m.NetworkSettings?.Networks?Object.keys(m.NetworkSettings.Networks):[]},mounts:m.Mounts?.map(p=>({type:p.Type,source:p.Source,destination:p.Destination,mode:p.Mode}))}}catch(u){return{error:`Failed to inspect container: ${u}`}}}),i=qve.client(async a=>{const l=a;try{const h=(await lh(e,!0)).find(g=>g.Id?.startsWith(l.container)||ol(g.Names??[]).toLowerCase()===l.container.toLowerCase());if(!h?.Id)return{error:`Container not found: ${l.container}`};const m=parseInt(l.tail||"100",10);return{logs:await Ave(e,h.Id,{tail:m})||"(no logs available)"}}catch(u){return{error:`Failed to get logs: ${u}`}}});return $$(n,s,r,i)}function Gve(t){let e="";const n=[];return t.selectedResourceType&&n.push(`- Currently viewing: ${t.selectedResourceType}`),t.selectedContainerName&&n.push(`- Currently selected container: ${t.selectedContainerName}`),n.length>0&&(e=`

The user is currently viewing:
${n.join(`
`)}

Use this context to provide more relevant answers.`),`You are a helpful Docker assistant. You can help users understand and manage their Docker containers and images.
When users ask about containers or images, use the available tools to fetch real data from the Docker daemon.
Provide clear, concise explanations and highlight any issues or warnings you find.
Format your responses using markdown for better readability.${e}`}const Yve={id:"docker",name:"Docker Assistant",placeholder:"Ask about your containers and images..."},Zve="com.docker.compose.project",Jve="com.docker.compose.service";function Xve(t){switch(t?.toLowerCase()){case"running":return"running";case"paused":return"paused";case"exited":return"exited";case"created":return"created";case"dead":return"dead";case"removing":return"removing";case"restarting":return"restarting";default:return}}function Qve(t){switch(t?.toLowerCase()){case"running":return"success";case"paused":return"warning";case"restarting":return"warning";case"exited":case"dead":return"error";default:return"neutral"}}const ebe={types:["container"],adapt(t,e){const n=[],s=e.State,r=e.Config,i=e.NetworkSettings,a=[{label:"Status",value:s?.Status??"Unknown",status:Qve(s?.Status),icon:s?.Running?F.createElement(th,{size:14}):s?.Paused?F.createElement(jp,{size:14}):F.createElement(VS,{size:14})}];s?.Running&&a.push({label:"PID",value:s.Pid??0,status:"neutral"}),s?.ExitCode!==void 0&&s.ExitCode!==0&&a.push({label:"Exit Code",value:s.ExitCode,status:"error"}),n.push({id:"status",data:{type:"status-cards",items:a}});const l=r?.Labels?.[Zve],u=r?.Labels?.[Jve];l&&t&&n.push({id:"application",data:{type:"custom",render:()=>f.jsx(ji,{to:"/docker/$context/$resourceType/$name",params:{context:t,resourceType:"applications",name:l},children:f.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3 hover:bg-blue-500/15 transition-colors cursor-pointer",children:[f.jsxs("div",{className:"text-xs text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(pl,{size:10})," Part of Application"]}),f.jsxs("div",{className:"text-sm flex items-center gap-2",children:[f.jsx(iN,{size:14,className:"text-blue-400"}),f.jsx("span",{className:"text-cyan-400",children:l}),u&&f.jsxs("span",{className:"text-neutral-500",children:["/ ",u]})]})]})})}});const h=[{label:"ID",value:e.Id?.substring(0,12)},{label:"Name",value:e.Name?.replace(/^\//,"")},{label:"Image",value:r?.Image},{label:"Created",value:e.Created?new Date(e.Created).toLocaleString():void 0},{label:"Platform",value:e.Platform},{label:"Driver",value:e.Driver}];s?.StartedAt&&s.StartedAt!=="0001-01-01T00:00:00Z"&&h.push({label:"Started",value:new Date(s.StartedAt).toLocaleString()}),s?.FinishedAt&&s.FinishedAt!=="0001-01-01T00:00:00Z"&&h.push({label:"Finished",value:new Date(s.FinishedAt).toLocaleString()}),n.push({id:"info",title:"Container",data:{type:"info-grid",items:h,columns:2}});const m=(r?.Env??[]).map(g=>{const[y,...b]=g.split("=");return{name:y,value:b.join("=")}}),p=[{name:e.Name?.replace(/^\//,"")??"container",image:r?.Image??"",state:Xve(s?.Status),stateReason:s?.Error||void 0,command:r?.Cmd??void 0,args:void 0,ports:Object.entries(r?.ExposedPorts??{}).map(([g])=>{const[y,b]=g.split("/");return{containerPort:parseInt(y,10),protocol:b?.toUpperCase()}}),mounts:e.Mounts?.map(g=>({name:g.Name??g.Type??"mount",mountPath:g.Destination??"",readOnly:!g.RW})),env:m.length>0?m:void 0}];if(n.push({id:"containers",title:"Configuration",data:{type:"containers",items:p}}),i?.Networks&&Object.keys(i.Networks).length>0){const g=[],y=[];for(const[b,_]of Object.entries(i.Networks))_.IPAddress&&g.push({type:`${b} IP`,address:_.IPAddress}),_.Gateway&&g.push({type:`${b} Gateway`,address:_.Gateway}),_.MacAddress&&y.push({label:`${b} MAC`,value:_.MacAddress});g.length>0&&n.push({id:"network-addresses",title:"Network",data:{type:"addresses",addresses:g}}),y.length>0&&n.push({id:"network-info",data:{type:"info-grid",items:y,columns:2}})}if(i?.Ports&&Object.keys(i.Ports).length>0){const g=[];for(const[y,b]of Object.entries(i.Ports))if(b&&b.length>0)for(const _ of b)g.push({label:y,value:`${_.HostIp||"0.0.0.0"}:${_.HostPort}`});else g.push({label:y,value:"not published"});n.push({id:"ports",title:"Ports",data:{type:"info-grid",items:g,columns:2}})}if(e.Mounts&&e.Mounts.length>0){const g=e.Mounts.map(y=>({name:y.Name??y.Source??"volume",type:y.Type??"unknown",source:y.Source??"",extra:y.Driver?{Driver:y.Driver}:void 0,mounts:[{container:e.Name?.replace(/^\//,"")??"container",mountPath:y.Destination??"",readOnly:!y.RW}]}));n.push({id:"volumes",title:"Mounts",data:{type:"volumes",items:g}})}return r?.Labels&&Object.keys(r.Labels).length>0&&n.push({id:"labels",data:{type:"labels",labels:r.Labels}}),{sections:n}},actions:[{id:"start",label:"Start",icon:F.createElement(th,{size:14}),variant:"primary",execute:async(t,e)=>{await wve(t,e.Id)},isVisible:t=>!t.State?.Running},{id:"stop",label:"Stop",icon:F.createElement(VS,{size:14}),variant:"warning",execute:async(t,e)=>{await Sve(t,e.Id)},isVisible:t=>t.State?.Running===!0},{id:"restart",label:"Restart",icon:F.createElement(Cn,{size:14}),variant:"secondary",execute:async(t,e)=>{await kve(t,e.Id)},isVisible:t=>t.State?.Running===!0},{id:"pause",label:"Pause",icon:F.createElement(jp,{size:14}),variant:"secondary",execute:async(t,e)=>{await Cve(t,e.Id)},isVisible:t=>{const e=t;return e.State?.Running===!0&&!e.State?.Paused}},{id:"unpause",label:"Unpause",icon:F.createElement(th,{size:14}),variant:"secondary",execute:async(t,e)=>{await Nve(t,e.Id)},isVisible:t=>t.State?.Paused===!0},cm(async(t,e)=>{await Eve(t,e.Id)},{message:"Are you sure you want to delete this container? This action cannot be undone.",isVisible:t=>!t.State?.Running})]};function tbe(t){return t?new Date(t*1e3).toLocaleString():"Unknown"}function h6(t){if(!t||t==="<none>:<none>")return{repository:"<none>",tag:"<none>"};if(t.includes("@")){const[r,i]=t.split("@");return{repository:r,tag:i}}const e=t.lastIndexOf("/"),s=(e>=0?t.substring(e+1):t).lastIndexOf(":");if(s>=0){const r=e>=0?e+1+s:s;return{repository:t.substring(0,r),tag:t.substring(r+1)}}return{repository:t,tag:"latest"}}const nbe={types:["image"],adapt(t,e){const n=[],s=e.RepoTags??[],r=e.RepoDigests??[],i=s[0]||"<none>:<none>",{repository:a,tag:l}=h6(i),u=[{label:"Size",value:vy(e.Size),status:"neutral",icon:F.createElement(Ga,{size:14})}];s.length>0&&u.push({label:"Tags",value:s.length,status:"neutral",icon:F.createElement(SD,{size:14})}),e.Containers!==void 0&&e.Containers>=0&&u.push({label:"Containers",value:e.Containers,status:e.Containers>0?"success":"neutral"}),n.push({id:"status",data:{type:"status-cards",items:u}});const h=[{label:"Repository",value:a!=="<none>"?a:void 0},{label:"Tag",value:l!=="<none>"?l:void 0},{label:"Image ID",value:e.Id?.replace("sha256:","").substring(0,12)},{label:"Full ID",value:e.Id?.replace("sha256:","")},{label:"Size",value:vy(e.Size)},{label:"Virtual Size",value:e.VirtualSize?vy(e.VirtualSize):void 0},{label:"Created",value:tbe(e.Created)}];if(e.ParentId&&h.push({label:"Parent",value:e.ParentId.replace("sha256:","").substring(0,12)}),n.push({id:"info",title:"Information",data:{type:"info-grid",items:h.filter(p=>p.value)}}),s.length>1){const p=s.map(g=>{const y=h6(g);return{label:y.repository,value:y.tag}});n.push({id:"tags",title:"Tags",data:{type:"info-grid",items:p}})}if(r.length>0){const p=r.map(g=>{const[y,b]=g.split("@");return{label:y,value:b?.substring(7,19)+"..."}});n.push({id:"digests",title:"Digests",data:{type:"info-grid",items:p}})}const m=e.Labels;return m&&Object.keys(m).length>0&&n.push({id:"labels",data:{type:"labels",labels:m}}),{sections:n}},actions:[cm(async(t,e)=>{await bve(t,e.Id)},{message:"Are you sure you want to delete this image? This action cannot be undone.",isDisabled:t=>{const e=t;return e.Containers&&e.Containers>0?"Image is used by containers":!1}})]};function sbe(t){if(t==null||t<0)return"Unknown";if(t===0)return"0 B";const e=["B","KB","MB","GB","TB"],n=Math.floor(Math.log(t)/Math.log(1024));return`${(t/Math.pow(1024,n)).toFixed(n>0?1:0)} ${e[n]}`}const rbe={types:["volume"],adapt(t,e){const n=[],s=[{label:"Driver",value:e.Driver??"local",status:"neutral",icon:F.createElement(Ws,{size:14})}];e.UsageData?.Size!==void 0&&e.UsageData.Size>=0&&s.push({label:"Size",value:sbe(e.UsageData.Size),status:"neutral"}),e.UsageData?.RefCount!==void 0&&e.UsageData.RefCount>=0&&s.push({label:"Containers",value:e.UsageData.RefCount,status:e.UsageData.RefCount>0?"success":"neutral"}),n.push({id:"status",data:{type:"status-cards",items:s}});const r=[{label:"Name",value:e.Name},{label:"Driver",value:e.Driver},{label:"Scope",value:e.Scope},{label:"Mountpoint",value:e.Mountpoint}];e.CreatedAt&&r.push({label:"Created",value:new Date(e.CreatedAt).toLocaleString()}),n.push({id:"info",title:"Information",data:{type:"info-grid",items:r.filter(l=>l.value)}});const i=e.Labels;i&&Object.keys(i).length>0&&n.push({id:"labels",data:{type:"labels",labels:i}});const a=e.Options;if(a&&Object.keys(a).length>0){const l=Object.entries(a).map(([u,h])=>({label:u,value:h}));n.push({id:"options",title:"Driver Options",data:{type:"info-grid",items:l}})}return{sections:n}},actions:[cm(async(t,e)=>{await _ve(t,e.Name)},{message:"Are you sure you want to delete this volume? This action cannot be undone and all data will be lost.",isDisabled:t=>{const e=t;return e.UsageData?.RefCount&&e.UsageData.RefCount>0?"Volume is in use by containers":!1}})]},d6=["bridge","host","none"],ibe={types:["network"],adapt(t,e){const n=[],s=e.IPAM,r=e.Containers,i=[{label:"Driver",value:e.Driver??"bridge",status:"neutral",icon:F.createElement(Vs,{size:14})},{label:"Scope",value:e.Scope??"local",status:"neutral",icon:F.createElement(Ji,{size:14})}];e.Internal&&i.push({label:"Internal",value:"Yes",status:"warning",icon:F.createElement(om,{size:14})});const a=r?Object.keys(r).length:0;i.push({label:"Containers",value:a,status:a>0?"success":"neutral"}),n.push({id:"status",data:{type:"status-cards",items:i}});const l=[{label:"Name",value:e.Name},{label:"ID",value:e.Id?.substring(0,12)},{label:"Driver",value:e.Driver},{label:"Scope",value:e.Scope}];if(e.Created&&l.push({label:"Created",value:new Date(e.Created).toLocaleString()}),e.EnableIPv6&&l.push({label:"IPv6",value:"Enabled"}),e.Internal&&l.push({label:"Internal",value:"Yes"}),e.Attachable&&l.push({label:"Attachable",value:"Yes"}),e.Ingress&&l.push({label:"Ingress",value:"Yes"}),n.push({id:"info",title:"Information",data:{type:"info-grid",items:l.filter(h=>h.value)}}),s?.Config&&s.Config.length>0){const h=[];h.push({label:"Driver",value:s.Driver??"default"}),s.Config.forEach((m,p)=>{const g=s.Config.length>1?`[${p+1}] `:"";m.Subnet&&h.push({label:`${g}Subnet`,value:m.Subnet}),m.Gateway&&h.push({label:`${g}Gateway`,value:m.Gateway}),m.IPRange&&h.push({label:`${g}IP Range`,value:m.IPRange})}),n.push({id:"ipam",title:"IPAM Configuration",data:{type:"info-grid",items:h}})}if(r&&Object.keys(r).length>0){const h=Object.entries(r).map(([m,p])=>({label:p.Name||m.substring(0,12),value:p.IPv4Address||p.IPv6Address||"No IP"}));n.push({id:"containers",title:"Connected Containers",data:{type:"info-grid",items:h}})}const u=e.Labels;return u&&Object.keys(u).length>0&&n.push({id:"labels",data:{type:"labels",labels:u}}),{sections:n}},actions:[cm(async(t,e)=>{await xve(t,e.Id)},{message:"Are you sure you want to delete this network? This action cannot be undone.",isDisabled:t=>{const e=t;return e.Name&&d6.includes(e.Name)?"Cannot delete built-in network":e.Containers&&Object.keys(e.Containers).length>0?"Network has connected containers":!1},isVisible:t=>{const e=t;return!e.Name||!d6.includes(e.Name)}})]};function abe(t,e,n){if(t)return"running";if(e)return"paused";switch(n?.toLowerCase()){case"exited":return"exited";case"created":return"created";case"dead":return"dead";case"removing":return"removing";case"restarting":return"restarting";default:return}}function obe(t){const e=t.Config,n=t.State,s=(e?.Env??[]).map(l=>{const[u,...h]=l.split("=");return{name:u,value:h.join("=")}}),r=Object.entries(e?.ExposedPorts??{}).map(([l])=>{const[u,h]=l.split("/");return{containerPort:parseInt(u,10),protocol:h?.toUpperCase()}}),i=t.Mounts?.map(l=>({name:l.Name??l.Type??"mount",mountPath:l.Destination??"",readOnly:!l.RW}));return{name:t.Name?.replace(/^\//,"")??t.Id?.substring(0,12)??"unknown",image:e?.Image??"",state:abe(n?.Running,n?.Paused,n?.Status),stateReason:n?.Error||n?.Status,command:e?.Cmd??void 0,ports:r.length>0?r:void 0,mounts:i&&i.length>0?i:void 0,env:s.length>0?s:void 0}}const lbe={types:["application"],adapt(t,e){const n=[],s=[];for(const r of e.services){const i=r.containers.map(a=>({...obe(a),group:r.name,replicas:`${r.running}/${r.total}`}));s.push(...i)}if(s.length>0&&n.push({id:"containers",title:"Containers",data:{type:"containers",items:s}}),e.networks.length>0){const r=e.networks.map(i=>({label:i.Name??"unknown",value:`${i.Driver??"bridge"} (${i.Scope??"local"})`}));n.push({id:"networks",title:"Networks",data:{type:"info-grid",items:r}})}if(e.volumes.length>0){const r=e.volumes.map(i=>({label:i.Name??"unknown",value:i.Driver??"local"}));n.push({id:"volumes",title:"Volumes",data:{type:"info-grid",items:r}})}return{sections:n}},actions:[]},cbe=[ebe,nbe,rbe,ibe,lbe],SA=new Map;cbe.forEach(t=>{t.types.forEach(e=>{SA.set(e.toLowerCase(),t)})});function M7(t){return SA.get(t.toLowerCase())??null}function ube(t){return SA.has(t.toLowerCase())}function hbe(t,e,n){const s=M7(e);return s?s.adapt(n,t):null}function I7(t,e="container"){const n=M7(e);return n?.actions?n.actions.filter(s=>!s.isVisible||s.isVisible(t)):[]}function dbe(t){return"services"in t&&Array.isArray(t.services)?"application":"Config"in t&&"State"in t?"container":"RepoTags"in t||"RepoDigests"in t?"image":"Mountpoint"in t&&"Driver"in t&&!("IPAM"in t)?"volume":"IPAM"in t?"network":"container"}function fbe(t){const e=Pe.c(15),{context:n,resource:s,onActionComplete:r,hideActions:i,hideLabels:a}=t,l=i===void 0?!1:i,u=a===void 0?!1:a;let h,m,p,g;if(e[0]!==n||e[1]!==l||e[2]!==u||e[3]!==r||e[4]!==s){g=Symbol.for("react.early_return_sentinel");e:{const b=dbe(s),_=hbe(s,b,n),w=I7(s,b);if(!_){let C;e[9]===Symbol.for("react.memo_cache_sentinel")?(C=f.jsx("div",{className:"text-neutral-500 text-sm",children:"No visualization available"}),e[9]=C):C=e[9],g=C;break e}const k=u?_.sections.filter(mbe):_.sections;if(k.length===0){let C;e[10]===Symbol.for("react.memo_cache_sentinel")?(C=f.jsx("div",{className:"text-neutral-500 text-sm",children:"No visualization available"}),e[10]=C):C=e[10],g=C;break e}h="space-y-4",m=!l&&w.length>0&&f.jsx(DP,{context:n,actions:w,resource:s,onActionComplete:r}),p=k.map(pbe)}e[0]=n,e[1]=l,e[2]=u,e[3]=r,e[4]=s,e[5]=h,e[6]=m,e[7]=p,e[8]=g}else h=e[5],m=e[6],p=e[7],g=e[8];if(g!==Symbol.for("react.early_return_sentinel"))return g;let y;return e[11]!==h||e[12]!==m||e[13]!==p?(y=f.jsxs("div",{className:h,children:[m,p]}),e[11]=h,e[12]=m,e[13]=p,e[14]=y):y=e[14],y}function pbe(t){return f.jsx(PP,{section:t},t.id)}function mbe(t){return t.data.type!=="labels"}const gbe=1e3;function ybe(t){const e=t.replace(/\r/g,""),n=e.match(/^(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?Z)\s*(.*)$/);if(n){const[,s,r]=n;return{timestamp:s,message:r}}return{message:e}}function vbe(t){const e=Pe.c(21),{context:n,container:s,tailLines:r}=t,i=r===void 0?gbe:r;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=[],e[0]=a):a=e[0];const[l,u]=F.useState(a),[h,m]=F.useState(null),p=F.useRef(null),g=s.Id;let y;e[1]!==s.Names?(y=s.Names??[],e[1]=s.Names,e[2]=y):y=e[2];let b;e[3]!==y?(b=ol(y),e[3]=y,e[4]=b):b=e[4];const _=b,w=s.State==="running";let k,C;e[5]!==g||e[6]!==_||e[7]!==n||e[8]!==w||e[9]!==i?(k=()=>{if(!w||!g)return;const M=new AbortController;return p.current=M,Rve(n,g,{follow:!0,stdout:!0,stderr:!0,timestamps:!0,tail:i},I=>{const W=ybe(I),P={timestamp:W.timestamp,message:W.message,source:_};u(G=>[...G,P])},M.signal).catch(I=>{I.name!=="AbortError"&&m(I.message)}),()=>{M.abort()}},C=[n,g,_,w,i],e[5]=g,e[6]=_,e[7]=n,e[8]=w,e[9]=i,e[10]=k,e[11]=C):(k=e[10],C=e[11]),F.useEffect(k,C);const E=w,A=w?void 0:"Container is not running. Start the container to view logs.";let R;e[12]!==_||e[13]!==E?(R=E?[_]:[],e[12]=_,e[13]=E,e[14]=R):R=e[14];let N;return e[15]!==h||e[16]!==E||e[17]!==l||e[18]!==R||e[19]!==A?(N={logs:l,sources:R,isLoading:!1,error:h,isAvailable:E,unavailableMessage:A},e[15]=h,e[16]=E,e[17]=l,e[18]=R,e[19]=A,e[20]=N):N=e[20],N}function bbe(t){const e=Pe.c(10),{context:n,container:s,toolbarRef:r}=t;let i;e[0]!==s||e[1]!==n?(i={context:n,container:s},e[0]=s,e[1]=n,e[2]=i):i=e[2];const{logs:a,sources:l,isLoading:u,error:h,unavailableMessage:m}=vbe(i);let p;return e[3]!==h||e[4]!==u||e[5]!==a||e[6]!==l||e[7]!==r||e[8]!==m?(p=f.jsx(BP,{logs:a,sources:l,isLoading:u,error:h,emptyMessage:"Waiting for logs...",unavailableMessage:m,toolbarRef:r}),e[3]=h,e[4]=u,e[5]=a,e[6]=l,e[7]=r,e[8]=m,e[9]=p):p=e[9],p}function _be(t){const e=Pe.c(4),{context:n,container:s,toolbarRef:r}=t;let i;return e[0]!==s||e[1]!==n||e[2]!==r?(i=f.jsx(bbe,{context:n,container:s,toolbarRef:r},s.Id),e[0]=s,e[1]=n,e[2]=r,e[3]=i):i=e[3],i}function xbe({context:t,isOpen:e,onClose:n,otherPanelOpen:s=!1,resource:r,resourceType:i="containers"}){const[a,l]=F.useState(null),[u,h]=F.useState(!1),[m,p]=F.useState(null),[g,y]=F.useState("overview"),[b,_]=F.useState(null),[w,k]=F.useState(null),C=F.useRef(null),E=5e3,R=F.useCallback(Y=>Y?i==="applications"?Y.name??"":i==="containers"||i==="images"?Y.Id??"":i==="volumes"?Y.Name??"":i==="networks"?Y.Id??"":"":"",[i])(r),M=F.useCallback(Y=>{if(!Y)return"";if(i==="applications")return Y.name??"";if(i==="containers")return ol(Y.Names??[]);if(i==="images"){const z=Y,O=z.RepoTags?.[0];return O||(z.Id?.replace("sha256:","").substring(0,12)??"")}return i==="volumes"||i==="networks"?Y.Name??"":""},[i])(r),I=F.useCallback(async()=>{if(R)try{let Y;if(i==="containers")Y=await Hv(t,R);else{if(i==="images")return;if(i==="applications")return;i==="volumes"?Y=await c6(t,R):i==="networks"&&(Y=await u6(t,R))}Y&&l(Y)}catch{}},[R,i,t]);F.useEffect(()=>{if(!e||!R||!a||i==="images"||i==="applications")return;const Y=setInterval(()=>{I()},E);return()=>clearInterval(Y)},[e,R,a,I,i]),F.useEffect(()=>{if(y("overview"),!R){l(null),p(null);return}if(i==="images"){l(r);return}if(i==="applications"){l(r);return}(async()=>{h(!0),p(null);try{let z;i==="containers"?z=await Hv(t,R):i==="volumes"?z=await c6(t,R):i==="networks"&&(z=await u6(t,R)),z&&l(z)}catch(z){p(z instanceof Error?z.message:"Failed to fetch resource details")}finally{h(!1)}})()},[R,i,r,t]);const W=i==="applications"?"application":i==="containers"?"container":i==="images"?"image":i==="volumes"?"volume":"network",P=a?I7(a,W).filter(Y=>!(Y.isVisible&&!Y.isVisible(a))):[],G=async Y=>{if(Y.confirm){k(Y);return}await $(Y)},$=async Y=>{if(a){_(Y.id),k(null);try{await Y.execute(t,a),await I()}catch(z){console.error("Action failed:",z)}finally{_(null)}}};if(!e)return null;const U=i==="containers",Z=(()=>{if(!a)return!1;if(i==="containers"){const Y=a;return Y.Config?.Labels&&Object.keys(Y.Config.Labels).length>0}if(i==="images"){const Y=a;return Y.Labels&&Object.keys(Y.Labels).length>0}if(i==="volumes"){const Y=a;return Y.Labels&&Object.keys(Y.Labels).length>0}if(i==="networks"){const Y=a;return Y.Labels&&Object.keys(Y.Labels).length>0}return!1})(),K=()=>{if(a){if(i==="containers")return a.Config?.Labels;if(i==="images"||i==="volumes"||i==="networks")return a.Labels??void 0}},B=[{id:"overview",label:"Overview"},...Z?[{id:"metadata",label:"Metadata"}]:[],...U?[{id:"logs",label:"Logs"}]:[]],J=ube(W);return f.jsxs("div",{className:`fixed right-0 top-0 h-full bg-white dark:bg-neutral-900 border-l border-neutral-200 dark:border-neutral-700 shadow-xl z-30 flex flex-col transition-all duration-300 ${s?"w-md":"w-xl"}`,children:[f.jsxs("div",{className:"shrink-0 h-14 flex items-center justify-between px-4 border-b border-neutral-200 dark:border-neutral-800",children:[f.jsx("div",{className:"flex items-center gap-3 min-w-0",children:f.jsxs("div",{className:"min-w-0",children:[f.jsx("h2",{className:"font-semibold text-sm text-neutral-900 dark:text-neutral-100 truncate",children:M||"Resource"}),r&&f.jsx("span",{className:"text-xs text-neutral-400 font-mono mt-0.5",children:R.substring(0,12)})]})}),f.jsx("div",{className:"flex items-center gap-1",children:f.jsx("button",{onClick:n,className:"p-2 rounded-lg text-neutral-500 hover:text-neutral-700 hover:bg-neutral-100 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 transition-colors",title:"Close",children:f.jsx(Mp,{size:16})})})]}),f.jsxs("div",{className:"shrink-0 border-b border-neutral-200 dark:border-neutral-800 flex items-center",children:[f.jsx("div",{className:"flex",children:B.filter(Y=>Y.id!=="overview"||J).map(Y=>f.jsx("button",{onClick:()=>y(Y.id),className:`px-4 py-2.5 text-sm font-medium transition-colors ${g===Y.id?"text-neutral-900 dark:text-neutral-100 border-b-2 border-neutral-900 dark:border-neutral-100":"text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300"}`,children:Y.label},Y.id))}),f.jsxs("div",{className:"ml-auto pr-4 flex items-center gap-1",children:[f.jsx("div",{ref:C,className:"flex items-center gap-1"}),g==="overview"&&P.map(Y=>{const z=Y.isDisabled?.(a),O=z===!0||typeof z=="string",L=typeof z=="string"?z:void 0,V=b===Y.id;return f.jsx("button",{onClick:()=>G(Y),disabled:O||V,title:L||Y.label,className:`
                  flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium rounded transition-colors
                  ${O||V?"opacity-50 cursor-not-allowed":""}
                  ${Y.variant==="primary"?"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 hover:bg-neutral-200 dark:hover:bg-neutral-800":Y.variant==="warning"?"text-amber-600 dark:text-amber-400 hover:text-amber-700 dark:hover:text-amber-300 hover:bg-neutral-200 dark:hover:bg-neutral-800":Y.variant==="danger"?"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 hover:bg-neutral-200 dark:hover:bg-neutral-800":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-200 dark:hover:bg-neutral-800"}
                `,children:V?f.jsx(qa,{size:14,className:"animate-spin"}):Y.icon},Y.id)})]})]}),w&&f.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-lg shadow-xl max-w-md w-full mx-4 p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-neutral-100 mb-2",children:w.confirm?.title}),f.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mb-6",children:w.confirm?.message}),f.jsxs("div",{className:"flex justify-end gap-3",children:[f.jsx("button",{onClick:()=>k(null),className:"px-4 py-2 text-sm font-medium text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 transition-colors",children:"Cancel"}),f.jsx("button",{onClick:()=>$(w),className:`px-4 py-2 text-sm font-medium rounded transition-colors ${w.variant==="danger"?"bg-red-600 hover:bg-red-700 text-white":w.variant==="warning"?"bg-amber-600 hover:bg-amber-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:w.confirm?.confirmLabel||"Confirm"})]})]})}),f.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:u&&!a?f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsx(qa,{className:"w-6 h-6 text-neutral-400 animate-spin"})}):m?f.jsx("div",{className:"p-4 text-red-500 text-sm",children:m}):r?f.jsxs(f.Fragment,{children:[g==="overview"&&a&&f.jsx("div",{className:"h-full overflow-auto p-4",children:f.jsx(fbe,{context:t,resource:a,onActionComplete:I,hideActions:!0,hideLabels:!0})}),g==="metadata"&&a&&f.jsx("div",{className:"h-full overflow-auto p-4",children:K()&&f.jsx(LP,{labels:K()})}),g==="logs"&&i==="containers"&&r&&f.jsx(_be,{context:t,container:r,toolbarRef:C})]}):f.jsx("div",{className:"p-4 text-neutral-500 text-sm",children:"No resource selected"})})]})}const AS="ai";function f6(t,e){switch(e){case"applications":return t.name??"";case"containers":return t.Id??"";case"images":return t.Id??"";case"volumes":return t.Name??"";case"networks":return t.Id??"";default:return""}}function wbe(t,e){switch(e){case"applications":return t.name??"";case"containers":{const n=t;return n.Names?ol(n.Names):n.Id?.substring(0,12)??""}case"images":{const n=t;return n.RepoTags?.[0]?.replace(/:/g,"-")??n.Id?.substring(7,19)??""}case"volumes":return t.Name??"";case"networks":return t.Name??"";default:return""}}async function Sbe(t,e){let n;switch(e){case"applications":{const s=await Dve(t);n=O7(s);break}case"containers":{const s=await lh(t,!0);n=A7(s);break}case"images":{const s=await wA(t);n=R7(s);break}case"volumes":{const s=await k7(t);n=T7(s);break}case"networks":{const s=await C7(t);n=j7(s);break}}return[...n.rows].sort((s,r)=>{const i=f6(s.object,e),a=f6(r.object,e);return i.localeCompare(a)})}function kbe(t){const e=Pe.c(55),{resourceType:n,context:s,selectedItem:r,onSelectItem:i}=t,{isOpen:a,toggle:l,close:u}=RE();let h;e[0]!==a?(h=a(AS),e[0]=a,e[1]=h):h=e[1];const m=h;let p;e[2]!==s||e[3]!==n?(p={queryKey:["docker",s,n],queryFn:()=>Sbe(s,n),refetchInterval:5e3},e[2]=s,e[3]=n,e[4]=p):p=e[4];const{data:g,isLoading:y,error:b,refetch:_,isFetching:w}=Ry(p);let k;e[5]!==g?(k=g===void 0?[]:g,e[5]=g,e[6]=k):k=e[6];const C=k,E=w&&!y;let A;e[7]!==n?(A={name:n,namespaced:!1},e[7]=n,e[8]=A):A=e[8];const R=A;let N;e:{switch(n){case"applications":{let X;e[9]!==C?(X=O7(C.map(Rbe)),e[9]=C,e[10]=X):X=e[10],N=X;break e}case"containers":{let X;e[11]!==C?(X=A7(C.map(Abe)),e[11]=C,e[12]=X):X=e[12],N=X;break e}case"images":{let X;e[13]!==C?(X=R7(C.map(Ebe)),e[13]=C,e[14]=X):X=e[14],N=X;break e}case"volumes":{let X;e[15]!==C?(X=T7(C.map(Nbe)),e[15]=C,e[16]=X):X=e[16],N=X;break e}case"networks":{let X;e[17]!==C?(X=j7(C.map(Cbe)),e[17]=C,e[18]=X):X=e[18],N=X;break e}}N=void 0}const M=N;let I;e[19]===Symbol.for("react.memo_cache_sentinel")?(I={applications:"Applications",containers:"Containers",images:"Images",volumes:"Volumes",networks:"Networks"},e[19]=I):I=e[19];const P=I[n];let G;e[20]!==s||e[21]!==n?(G=X=>{const oe=X?.object;return{context:s,selectedResourceType:n,selectedContainerId:n==="containers"?oe?.Id?.substring(0,12):void 0,selectedContainerName:n==="containers"&&oe?.Names?ol(oe.Names):void 0}},e[20]=s,e[21]=n,e[22]=G):G=e[22];const $=G;let U;if(e[23]!==$){const X=$(null);U=Wve(X),e[23]=$,e[24]=U}else U=e[24];const Z=U;let K;e[25]!==m||e[26]!==l?(K=()=>sa().ai?f.jsx("button",{onClick:()=>l(AS),className:`p-2 rounded-md transition-colors ${m?"text-sky-400 hover:text-sky-300 hover:bg-neutral-100 dark:hover:bg-neutral-800":"text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800"}`,title:"AI Assistant",children:f.jsx(wD,{size:18})}):null,e[25]=m,e[26]=l,e[27]=K):K=e[27];const B=K;let J;e[28]!==u||e[29]!==$||e[30]!==m||e[31]!==Z?(J=(X,oe)=>{const xe=$(X);return f.jsx(S7,{isOpen:m,onClose:()=>u(AS),otherPanelOpen:oe,adapterConfig:Yve,environment:xe,tools:Z,buildInstructions:Gve})},e[28]=u,e[29]=$,e[30]=m,e[31]=Z,e[32]=J):J=e[32];const Y=J,z=n==="applications"||n==="containers"||n==="images"||n==="volumes"||n==="networks";let O;e[33]!==s||e[34]!==m||e[35]!==n||e[36]!==z?(O=z?(X,oe,xe)=>f.jsx(xbe,{context:s,isOpen:!0,onClose:oe,otherPanelOpen:xe||m,resource:X.object,resourceType:n}):void 0,e[33]=s,e[34]=m,e[35]=n,e[36]=z,e[37]=O):O=e[37];const L=O;let V;e[38]!==n?(V=X=>wbe(X.object,n),e[38]=n,e[39]=V):V=e[39];const T=V,Q=M;let te;return e[40]!==R||e[41]!==b||e[42]!==T||e[43]!==E||e[44]!==y||e[45]!==i||e[46]!==_||e[47]!==L||e[48]!==Y||e[49]!==B||e[50]!==r||e[51]!==z||e[52]!==Q||e[53]!==P?(te=f.jsx(I$,{config:R,title:P,data:Q,loading:y,error:b,refetch:_,isRefetching:E,showDetailPanel:z,renderDetailPanel:L,renderHeaderActions:B,renderExtraPanels:Y,selectedItemName:r,onSelectItemName:i,getItemName:T}),e[40]=R,e[41]=b,e[42]=T,e[43]=E,e[44]=y,e[45]=i,e[46]=_,e[47]=L,e[48]=Y,e[49]=B,e[50]=r,e[51]=z,e[52]=Q,e[53]=P,e[54]=te):te=e[54],te}function Cbe(t){return t.object}function Nbe(t){return t.object}function Ebe(t){return t.object}function Abe(t){return t.object}function Rbe(t){return t.object}const Tbe=["applications","containers","images","volumes","networks"];function jbe(t){return Tbe.includes(t)}function Obe(){const t=Pe.c(52);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e={strict:!1},t[0]=e):e=t[0];const{context:n,resourceType:s,name:r}=nm(e),i=jh();let a;t[1]===Symbol.for("react.memo_cache_sentinel")?(a=sa(),t[1]=a):a=t[1];const l=a,[u,h]=F.useState(!1);let m;t[2]===Symbol.for("react.memo_cache_sentinel")?(m=l.kubernetes?.contexts||[],t[2]=m):m=t[2];const p=m;let g;t[3]===Symbol.for("react.memo_cache_sentinel")?(g=l.docker?.contexts||[],t[3]=g):g=t[3];const y=g,b=!s;let _;t[4]!==s?(_=s&&jbe(s)?s:null,t[4]=s,t[5]=_):_=t[5];const w=_;let k;t[6]!==w||t[7]!==i?(k=te=>{i(w?{to:"/docker/$context/$resourceType",params:{context:te,resourceType:w}}:{to:"/docker/$context",params:{context:te}})},t[6]=w,t[7]=i,t[8]=k):k=t[8];const C=k;let E;t[9]!==n||t[10]!==i?(E=te=>{i({to:"/docker/$context/$resourceType",params:{context:n,resourceType:te}})},t[9]=n,t[10]=i,t[11]=E):E=t[11];const A=E;let R;t[12]!==n||t[13]!==w||t[14]!==i?(R=te=>{w&&i(te?{to:"/docker/$context/$resourceType/$name",params:{context:n,resourceType:w,name:te}}:{to:"/docker/$context/$resourceType",params:{context:n,resourceType:w}})},t[12]=n,t[13]=w,t[14]=i,t[15]=R):R=t[15];const N=R;let M;t[16]!==i?(M=te=>{i({to:"/cluster/$context",params:{context:te}})},t[16]=i,t[17]=M):M=t[17];const I=M;let W;t[18]===Symbol.for("react.memo_cache_sentinel")?(W=()=>{h(!1)},t[18]=W):W=t[18];const P=W;let G;t[19]!==n||t[20]!==i?(G=(te,X)=>{i({to:"/docker/$context/$resourceType/$name",params:{context:n,resourceType:te,name:X}})},t[19]=n,t[20]=i,t[21]=G):G=t[21];const $=G,U=n||"";let Z;t[22]!==$||t[23]!==A||t[24]!==U?(Z=Pve({context:U,onSelectResource:A,onSelectItem:$,onClose:P}),t[22]=$,t[23]=A,t[24]=U,t[25]=Z):Z=t[25];const K=Z;let B,J;t[26]===Symbol.for("react.memo_cache_sentinel")?(B=()=>{const te=X=>{(X.metaKey||X.ctrlKey)&&X.key==="k"&&(X.preventDefault(),h(Mbe))};return document.addEventListener("keydown",te),()=>document.removeEventListener("keydown",te)},J=[],t[26]=B,t[27]=J):(B=t[26],J=t[27]),F.useEffect(B,J);const Y=n||"";let z;t[28]!==I||t[29]!==C||t[30]!==Y?(z=f.jsx("div",{className:"shrink-0 px-3 pt-3 pb-2",children:f.jsx(jD,{mode:"docker",contexts:p,selectedContext:"",onSelectContext:I,dockerContexts:y,selectedDockerContext:Y,onSelectDockerContext:C})}),t[28]=I,t[29]=C,t[30]=Y,t[31]=z):z=t[31];let O;t[32]!==w||t[33]!==b||t[34]!==A?(O=f.jsx(vve,{selectedResource:w,onSelectResource:A,isWelcome:b}),t[32]=w,t[33]=b,t[34]=A,t[35]=O):O=t[35];let L;t[36]!==z||t[37]!==O?(L=f.jsx("div",{className:"py-2 pl-2 shrink-0 h-full",children:f.jsxs("aside",{className:"w-56 h-full shrink-0 bg-white dark:bg-black/40 backdrop-blur-xl flex flex-col rounded-xl border border-neutral-300/50 dark:border-neutral-700/50",children:[z,O]})}),t[36]=z,t[37]=O,t[38]=L):L=t[38];let V;t[39]!==n||t[40]!==w||t[41]!==b||t[42]!==r||t[43]!==N?(V=b?f.jsx("main",{className:"flex-1 flex flex-col h-full min-w-0 items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("img",{src:"/logo.png",alt:"Logo",className:"w-48 h-48 mx-auto dark:hidden"}),f.jsx("img",{src:"/logo_dark.png",alt:"Logo",className:"w-48 h-48 mx-auto hidden dark:block"}),f.jsxs("p",{className:"mt-4 text-sm text-neutral-500 dark:text-neutral-400",children:["Select a resource from the sidebar or press ",f.jsx("kbd",{className:"px-1.5 py-0.5 rounded bg-neutral-200 dark:bg-neutral-700 text-xs",children:"K"})," to search"]})]})}):w?f.jsx(kbe,{context:n||"",resourceType:w,selectedItem:r,onSelectItem:N},w):null,t[39]=n,t[40]=w,t[41]=b,t[42]=r,t[43]=N,t[44]=V):V=t[44];let T;t[45]!==K||t[46]!==u?(T=f.jsx(OD,{isOpen:u,onClose:P,adapter:K}),t[45]=K,t[46]=u,t[47]=T):T=t[47];let Q;return t[48]!==L||t[49]!==V||t[50]!==T?(Q=f.jsxs("div",{className:"flex h-screen overflow-hidden bg-neutral-50 text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100",children:[L,V,T]}),t[48]=L,t[49]=V,t[50]=T,t[51]=Q):Q=t[51],Q}function Mbe(t){return!t}function Ibe(){const t=Pe.c(14);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=sa(),t[0]=e):e=t[0];const n=e,s=jh();n.kubernetes?.contexts;let r;t[1]===Symbol.for("react.memo_cache_sentinel")?(r=n.kubernetes?.contexts||[],t[1]=r):r=t[1];const i=r;let a;t[2]===Symbol.for("react.memo_cache_sentinel")?(a=()=>n.docker?.contexts||[],t[2]=a):a=t[2],n.docker?.contexts;let l;t[3]===Symbol.for("react.memo_cache_sentinel")?(l=a(),t[3]=l):l=t[3];const u=l,h=i.length>0,m=u.length>0;let p;t[4]!==s?(p=()=>{if(h){const b=n.kubernetes?.defaultContext||i[0];s({to:"/cluster/$context",params:{context:b},replace:!0});return}if(m){const b=n.docker?.defaultContext||u[0];s({to:"/docker/$context",params:{context:b},replace:!0});return}},t[4]=s,t[5]=p):p=t[5];let g;if(t[6]!==s?(g=[h,m,n.kubernetes?.defaultContext,n.docker?.defaultContext,i,u,s],t[6]=s,t[7]=g):g=t[7],F.useEffect(p,g),!h&&!m){let b,_,w;t[8]===Symbol.for("react.memo_cache_sentinel")?(b=f.jsxs("div",{className:"mb-6",children:[f.jsx("img",{src:"/logo.png",alt:"Logo",className:"w-32 h-32 mx-auto dark:hidden opacity-50"}),f.jsx("img",{src:"/logo_dark.png",alt:"Logo",className:"w-32 h-32 mx-auto hidden dark:block opacity-50"})]}),_=f.jsx("h1",{className:"text-xl font-semibold text-neutral-700 dark:text-neutral-300 mb-3",children:"No Contexts Available"}),w=f.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-6",children:"No Kubernetes or Docker contexts were found. Make sure your kubeconfig or Docker configuration is set up correctly."}),t[8]=b,t[9]=_,t[10]=w):(b=t[8],_=t[9],w=t[10]);let k;t[11]===Symbol.for("react.memo_cache_sentinel")?(k=f.jsx("p",{className:"font-medium text-neutral-500 dark:text-neutral-400",children:"Quick setup:"}),t[11]=k):k=t[11];let C;return t[12]===Symbol.for("react.memo_cache_sentinel")?(C=f.jsx("div",{className:"flex h-screen overflow-hidden bg-neutral-50 text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100",children:f.jsx("div",{className:"flex-1 flex flex-col items-center justify-center",children:f.jsxs("div",{className:"max-w-md mx-auto px-8 text-center",children:[b,_,w,f.jsxs("div",{className:"text-left text-xs text-neutral-400 dark:text-neutral-500 space-y-2 bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:[k,f.jsxs("p",{children:[" For Kubernetes: ensure ",f.jsx("code",{className:"bg-neutral-200 dark:bg-neutral-700 px-1 rounded",children:"~/.kube/config"})," exists"]}),f.jsx("p",{children:" For Docker: ensure Docker Desktop or Docker Engine is running"})]})]})})}),t[12]=C):C=t[12],C}let y;return t[13]===Symbol.for("react.memo_cache_sentinel")?(y=f.jsx("div",{className:"flex h-screen overflow-hidden bg-neutral-50 text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100",children:f.jsx("div",{className:"flex-1 flex flex-col items-center justify-center",children:f.jsxs("div",{className:"mb-8",children:[f.jsx("img",{src:"/logo.png",alt:"Logo",className:"w-32 h-32 mx-auto dark:hidden opacity-50"}),f.jsx("img",{src:"/logo_dark.png",alt:"Logo",className:"w-32 h-32 mx-auto hidden dark:block opacity-50"})]})})}),t[13]=y):y=t[13],y}const Dbe=ua({namespace:xs().optional(),panel:Iy(["ai"]).optional(),tab:Iy(["overview","metadata","yaml","events","logs","terminal"]).optional()}),Lbe=ua({panel:Iy(["ai"]).optional()}),C1=EH({component:()=>f.jsx(fV,{client:FG,children:f.jsx(M6,{})})}),Pbe=la({getParentRoute:()=>C1,path:"/",component:Ibe}),N1=la({getParentRoute:()=>C1,path:"cluster/$context",validateSearch:Dbe,component:cve,beforeLoad:({params:t})=>{if(!(sa().kubernetes?.contexts||[]).includes(t.context))throw BC({to:"/"})}}),Bbe=la({getParentRoute:()=>N1,path:"/"}),D7=la({getParentRoute:()=>N1,path:"$resourceType"}),$be=la({getParentRoute:()=>D7,path:"$name"}),kA=la({getParentRoute:()=>C1,path:"docker/$context",validateSearch:Lbe,component:Obe,beforeLoad:({params:t})=>{if(!(sa().docker?.contexts||[]).includes(t.context))throw BC({to:"/"})}}),zbe=la({getParentRoute:()=>kA,path:"/"}),L7=la({getParentRoute:()=>kA,path:"$resourceType"}),Fbe=la({getParentRoute:()=>L7,path:"$name"}),Ube=C1.addChildren([Pbe,N1.addChildren([Bbe,D7.addChildren([$be])]),kA.addChildren([zbe,L7.addChildren([Fbe])])]),Hbe=LH({routeTree:Ube,defaultPreload:"intent"});zH().then(()=>{nU.createRoot(document.getElementById("root")).render(f.jsx(F.StrictMode,{children:f.jsx($H,{router:Hbe})}))});
