(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();var c5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function eS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gv={exports:{}},_h={};var u5;function UL(){if(u5)return _h;u5=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,r,a){var o=null;if(a!==void 0&&(o=""+a),r.key!==void 0&&(o=""+r.key),"key"in r){a={};for(var c in r)c!=="key"&&(a[c]=r[c])}else a=r;return r=a.ref,{$$typeof:t,type:s,key:o,ref:r!==void 0?r:null,props:a}}return _h.Fragment=e,_h.jsx=n,_h.jsxs=n,_h}var h5;function VL(){return h5||(h5=1,Gv.exports=UL()),Gv.exports}var f=VL(),Yv={exports:{}},at={};var d5;function FL(){if(d5)return at;d5=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),v=Symbol.iterator;function y(R){return R===null||typeof R!="object"?null:(R=v&&R[v]||R["@@iterator"],typeof R=="function"?R:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function k(R,V,E){this.props=R,this.context=V,this.refs=S,this.updater=E||x}k.prototype.isReactComponent={},k.prototype.setState=function(R,V){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,V,"setState")},k.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function C(){}C.prototype=k.prototype;function A(R,V,E){this.props=R,this.context=V,this.refs=S,this.updater=E||x}var B=A.prototype=new C;B.constructor=A,w(B,k.prototype),B.isPureReactComponent=!0;var M=Array.isArray;function T(){}var H={H:null,A:null,T:null,S:null},$=Object.prototype.hasOwnProperty;function G(R,V,E){var Z=E.ref;return{$$typeof:t,type:R,key:V,ref:Z!==void 0?Z:null,props:E}}function z(R,V){return G(R.type,V,R.props)}function Q(R){return typeof R=="object"&&R!==null&&R.$$typeof===t}function F(R){var V={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(E){return V[E]})}var K=/\/+/g;function J(R,V){return typeof R=="object"&&R!==null&&R.key!=null?F(""+R.key):V.toString(36)}function q(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(T,T):(R.status="pending",R.then(function(V){R.status==="pending"&&(R.status="fulfilled",R.value=V)},function(V){R.status==="pending"&&(R.status="rejected",R.reason=V)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function P(R,V,E,Z,ue){var ne=typeof R;(ne==="undefined"||ne==="boolean")&&(R=null);var de=!1;if(R===null)de=!0;else switch(ne){case"bigint":case"string":case"number":de=!0;break;case"object":switch(R.$$typeof){case t:case e:de=!0;break;case g:return de=R._init,P(de(R._payload),V,E,Z,ue)}}if(de)return ue=ue(R),de=Z===""?"."+J(R,0):Z,M(ue)?(E="",de!=null&&(E=de.replace(K,"$&/")+"/"),P(ue,V,E,"",function(et){return et})):ue!=null&&(Q(ue)&&(ue=z(ue,E+(ue.key==null||R&&R.key===ue.key?"":(""+ue.key).replace(K,"$&/")+"/")+de)),V.push(ue)),1;de=0;var we=Z===""?".":Z+":";if(M(R))for(var Ee=0;Ee<R.length;Ee++)Z=R[Ee],ne=we+J(Z,Ee),de+=P(Z,V,E,ne,ue);else if(Ee=y(R),typeof Ee=="function")for(R=Ee.call(R),Ee=0;!(Z=R.next()).done;)Z=Z.value,ne=we+J(Z,Ee++),de+=P(Z,V,E,ne,ue);else if(ne==="object"){if(typeof R.then=="function")return P(q(R),V,E,Z,ue);throw V=String(R),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return de}function X(R,V,E){if(R==null)return R;var Z=[],ue=0;return P(R,Z,"","",function(ne){return V.call(E,ne,ue++)}),Z}function U(R){if(R._status===-1){var V=R._result;V=V(),V.then(function(E){(R._status===0||R._status===-1)&&(R._status=1,R._result=E)},function(E){(R._status===0||R._status===-1)&&(R._status=2,R._result=E)}),R._status===-1&&(R._status=0,R._result=V)}if(R._status===1)return R._result.default;throw R._result}var D=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},O={map:X,forEach:function(R,V,E){X(R,function(){V.apply(this,arguments)},E)},count:function(R){var V=0;return X(R,function(){V++}),V},toArray:function(R){return X(R,function(V){return V})||[]},only:function(R){if(!Q(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return at.Activity=m,at.Children=O,at.Component=k,at.Fragment=n,at.Profiler=r,at.PureComponent=A,at.StrictMode=s,at.Suspense=h,at.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,at.__COMPILER_RUNTIME={__proto__:null,c:function(R){return H.H.useMemoCache(R)}},at.cache=function(R){return function(){return R.apply(null,arguments)}},at.cacheSignal=function(){return null},at.cloneElement=function(R,V,E){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var Z=w({},R.props),ue=R.key;if(V!=null)for(ne in V.key!==void 0&&(ue=""+V.key),V)!$.call(V,ne)||ne==="key"||ne==="__self"||ne==="__source"||ne==="ref"&&V.ref===void 0||(Z[ne]=V[ne]);var ne=arguments.length-2;if(ne===1)Z.children=E;else if(1<ne){for(var de=Array(ne),we=0;we<ne;we++)de[we]=arguments[we+2];Z.children=de}return G(R.type,ue,Z)},at.createContext=function(R){return R={$$typeof:o,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:a,_context:R},R},at.createElement=function(R,V,E){var Z,ue={},ne=null;if(V!=null)for(Z in V.key!==void 0&&(ne=""+V.key),V)$.call(V,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(ue[Z]=V[Z]);var de=arguments.length-2;if(de===1)ue.children=E;else if(1<de){for(var we=Array(de),Ee=0;Ee<de;Ee++)we[Ee]=arguments[Ee+2];ue.children=we}if(R&&R.defaultProps)for(Z in de=R.defaultProps,de)ue[Z]===void 0&&(ue[Z]=de[Z]);return G(R,ne,ue)},at.createRef=function(){return{current:null}},at.forwardRef=function(R){return{$$typeof:c,render:R}},at.isValidElement=Q,at.lazy=function(R){return{$$typeof:g,_payload:{_status:-1,_result:R},_init:U}},at.memo=function(R,V){return{$$typeof:d,type:R,compare:V===void 0?null:V}},at.startTransition=function(R){var V=H.T,E={};H.T=E;try{var Z=R(),ue=H.S;ue!==null&&ue(E,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(T,D)}catch(ne){D(ne)}finally{V!==null&&E.types!==null&&(V.types=E.types),H.T=V}},at.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},at.use=function(R){return H.H.use(R)},at.useActionState=function(R,V,E){return H.H.useActionState(R,V,E)},at.useCallback=function(R,V){return H.H.useCallback(R,V)},at.useContext=function(R){return H.H.useContext(R)},at.useDebugValue=function(){},at.useDeferredValue=function(R,V){return H.H.useDeferredValue(R,V)},at.useEffect=function(R,V){return H.H.useEffect(R,V)},at.useEffectEvent=function(R){return H.H.useEffectEvent(R)},at.useId=function(){return H.H.useId()},at.useImperativeHandle=function(R,V,E){return H.H.useImperativeHandle(R,V,E)},at.useInsertionEffect=function(R,V){return H.H.useInsertionEffect(R,V)},at.useLayoutEffect=function(R,V){return H.H.useLayoutEffect(R,V)},at.useMemo=function(R,V){return H.H.useMemo(R,V)},at.useOptimistic=function(R,V){return H.H.useOptimistic(R,V)},at.useReducer=function(R,V,E){return H.H.useReducer(R,V,E)},at.useRef=function(R){return H.H.useRef(R)},at.useState=function(R){return H.H.useState(R)},at.useSyncExternalStore=function(R,V,E){return H.H.useSyncExternalStore(R,V,E)},at.useTransition=function(){return H.H.useTransition()},at.version="19.2.3",at}var f5;function ug(){return f5||(f5=1,Yv.exports=FL()),Yv.exports}var W=ug();const Rr=eS(W);var Xv={exports:{}},xh={},Jv={exports:{}},Qv={};var p5;function qL(){return p5||(p5=1,(function(t){function e(P,X){var U=P.length;P.push(X);e:for(;0<U;){var D=U-1>>>1,O=P[D];if(0<r(O,X))P[D]=X,P[U]=O,U=D;else break e}}function n(P){return P.length===0?null:P[0]}function s(P){if(P.length===0)return null;var X=P[0],U=P.pop();if(U!==X){P[0]=U;e:for(var D=0,O=P.length,R=O>>>1;D<R;){var V=2*(D+1)-1,E=P[V],Z=V+1,ue=P[Z];if(0>r(E,U))Z<O&&0>r(ue,E)?(P[D]=ue,P[Z]=U,D=Z):(P[D]=E,P[V]=U,D=V);else if(Z<O&&0>r(ue,U))P[D]=ue,P[Z]=U,D=Z;else break e}}return X}function r(P,X){var U=P.sortIndex-X.sortIndex;return U!==0?U:P.id-X.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var h=[],d=[],g=1,m=null,v=3,y=!1,x=!1,w=!1,S=!1,k=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function B(P){for(var X=n(d);X!==null;){if(X.callback===null)s(d);else if(X.startTime<=P)s(d),X.sortIndex=X.expirationTime,e(h,X);else break;X=n(d)}}function M(P){if(w=!1,B(P),!x)if(n(h)!==null)x=!0,T||(T=!0,F());else{var X=n(d);X!==null&&q(M,X.startTime-P)}}var T=!1,H=-1,$=5,G=-1;function z(){return S?!0:!(t.unstable_now()-G<$)}function Q(){if(S=!1,T){var P=t.unstable_now();G=P;var X=!0;try{e:{x=!1,w&&(w=!1,C(H),H=-1),y=!0;var U=v;try{t:{for(B(P),m=n(h);m!==null&&!(m.expirationTime>P&&z());){var D=m.callback;if(typeof D=="function"){m.callback=null,v=m.priorityLevel;var O=D(m.expirationTime<=P);if(P=t.unstable_now(),typeof O=="function"){m.callback=O,B(P),X=!0;break t}m===n(h)&&s(h),B(P)}else s(h);m=n(h)}if(m!==null)X=!0;else{var R=n(d);R!==null&&q(M,R.startTime-P),X=!1}}break e}finally{m=null,v=U,y=!1}X=void 0}}finally{X?F():T=!1}}}var F;if(typeof A=="function")F=function(){A(Q)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,J=K.port2;K.port1.onmessage=Q,F=function(){J.postMessage(null)}}else F=function(){k(Q,0)};function q(P,X){H=k(function(){P(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(P){switch(v){case 1:case 2:case 3:var X=3;break;default:X=v}var U=v;v=X;try{return P()}finally{v=U}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(P,X){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var U=v;v=P;try{return X()}finally{v=U}},t.unstable_scheduleCallback=function(P,X,U){var D=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?D+U:D):U=D,P){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=U+O,P={id:g++,callback:X,priorityLevel:P,startTime:U,expirationTime:O,sortIndex:-1},U>D?(P.sortIndex=U,e(d,P),n(h)===null&&P===n(d)&&(w?(C(H),H=-1):w=!0,q(M,U-D))):(P.sortIndex=O,e(h,P),x||y||(x=!0,T||(T=!0,F()))),P},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(P){var X=v;return function(){var U=v;v=X;try{return P.apply(this,arguments)}finally{v=U}}}})(Qv)),Qv}var m5;function KL(){return m5||(m5=1,Jv.exports=qL()),Jv.exports}var Zv={exports:{}},os={};var g5;function WL(){if(g5)return os;g5=1;var t=ug();function e(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)d+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(h,d,g){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:m==null?null:""+m,children:h,containerInfo:d,implementation:g}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(h,d){if(h==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return os.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,os.createPortal=function(h,d){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(h,d,null,g)},os.flushSync=function(h){var d=o.T,g=s.p;try{if(o.T=null,s.p=2,h)return h()}finally{o.T=d,s.p=g,s.d.f()}},os.preconnect=function(h,d){typeof h=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,s.d.C(h,d))},os.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},os.preinit=function(h,d){if(typeof h=="string"&&d&&typeof d.as=="string"){var g=d.as,m=c(g,d.crossOrigin),v=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;g==="style"?s.d.S(h,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:m,integrity:v,fetchPriority:y}):g==="script"&&s.d.X(h,{crossOrigin:m,integrity:v,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},os.preinitModule=function(h,d){if(typeof h=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var g=c(d.as,d.crossOrigin);s.d.M(h,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&s.d.M(h)},os.preload=function(h,d){if(typeof h=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var g=d.as,m=c(g,d.crossOrigin);s.d.L(h,g,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},os.preloadModule=function(h,d){if(typeof h=="string")if(d){var g=c(d.as,d.crossOrigin);s.d.m(h,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else s.d.m(h)},os.requestFormReset=function(h){s.d.r(h)},os.unstable_batchedUpdates=function(h,d){return h(d)},os.useFormState=function(h,d,g){return o.H.useFormState(h,d,g)},os.useFormStatus=function(){return o.H.useHostTransitionStatus()},os.version="19.2.3",os}var y5;function Yj(){if(y5)return Zv.exports;y5=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Zv.exports=WL(),Zv.exports}var v5;function GL(){if(v5)return xh;v5=1;var t=KL(),e=ug(),n=Yj();function s(i){var l="https://react.dev/errors/"+i;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)l+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+i+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var l=i,u=i;if(i.alternate)for(;l.return;)l=l.return;else{i=l;do l=i,(l.flags&4098)!==0&&(u=l.return),i=l.return;while(i)}return l.tag===3?u:null}function o(i){if(i.tag===13){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function c(i){if(i.tag===31){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function h(i){if(a(i)!==i)throw Error(s(188))}function d(i){var l=i.alternate;if(!l){if(l=a(i),l===null)throw Error(s(188));return l!==i?null:i}for(var u=i,p=l;;){var b=u.return;if(b===null)break;var _=b.alternate;if(_===null){if(p=b.return,p!==null){u=p;continue}break}if(b.child===_.child){for(_=b.child;_;){if(_===u)return h(b),i;if(_===p)return h(b),l;_=_.sibling}throw Error(s(188))}if(u.return!==p.return)u=b,p=_;else{for(var N=!1,L=b.child;L;){if(L===u){N=!0,u=b,p=_;break}if(L===p){N=!0,p=b,u=_;break}L=L.sibling}if(!N){for(L=_.child;L;){if(L===u){N=!0,u=_,p=b;break}if(L===p){N=!0,p=_,u=b;break}L=L.sibling}if(!N)throw Error(s(189))}}if(u.alternate!==p)throw Error(s(190))}if(u.tag!==3)throw Error(s(188));return u.stateNode.current===u?i:l}function g(i){var l=i.tag;if(l===5||l===26||l===27||l===6)return i;for(i=i.child;i!==null;){if(l=g(i),l!==null)return l;i=i.sibling}return null}var m=Object.assign,v=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),A=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function F(i){return i===null||typeof i!="object"?null:(i=Q&&i[Q]||i["@@iterator"],typeof i=="function"?i:null)}var K=Symbol.for("react.client.reference");function J(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===K?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case k:return"Profiler";case S:return"StrictMode";case M:return"Suspense";case T:return"SuspenseList";case G:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case x:return"Portal";case A:return i.displayName||"Context";case C:return(i._context.displayName||"Context")+".Consumer";case B:var l=i.render;return i=i.displayName,i||(i=l.displayName||l.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case H:return l=i.displayName||null,l!==null?l:J(i.type)||"Memo";case $:l=i._payload,i=i._init;try{return J(i(l))}catch{}}return null}var q=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U={pending:!1,data:null,method:null,action:null},D=[],O=-1;function R(i){return{current:i}}function V(i){0>O||(i.current=D[O],D[O]=null,O--)}function E(i,l){O++,D[O]=i.current,i.current=l}var Z=R(null),ue=R(null),ne=R(null),de=R(null);function we(i,l){switch(E(ne,l),E(ue,i),E(Z,null),l.nodeType){case 9:case 11:i=(i=l.documentElement)&&(i=i.namespaceURI)?R4(i):0;break;default:if(i=l.tagName,l=l.namespaceURI)l=R4(l),i=B4(l,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}V(Z),E(Z,i)}function Ee(){V(Z),V(ue),V(ne)}function et(i){i.memoizedState!==null&&E(de,i);var l=Z.current,u=B4(l,i.type);l!==u&&(E(ue,i),E(Z,u))}function Ce(i){ue.current===i&&(V(Z),V(ue)),de.current===i&&(V(de),gh._currentValue=U)}var Ge,Te;function tt(i){if(Ge===void 0)try{throw Error()}catch(u){var l=u.stack.trim().match(/\n( *(at )?)/);Ge=l&&l[1]||"",Te=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ge+i+Te}var mt=!1;function ht(i,l){if(!i||mt)return"";mt=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(l){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(he){var ce=he}Reflect.construct(i,[],ye)}else{try{ye.call()}catch(he){ce=he}i.call(ye.prototype)}}else{try{throw Error()}catch(he){ce=he}(ye=i())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(he){if(he&&ce&&typeof he.stack=="string")return[he.stack,ce.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=p.DetermineComponentFrameRoot(),N=_[0],L=_[1];if(N&&L){var Y=N.split(`
`),le=L.split(`
`);for(b=p=0;p<Y.length&&!Y[p].includes("DetermineComponentFrameRoot");)p++;for(;b<le.length&&!le[b].includes("DetermineComponentFrameRoot");)b++;if(p===Y.length||b===le.length)for(p=Y.length-1,b=le.length-1;1<=p&&0<=b&&Y[p]!==le[b];)b--;for(;1<=p&&0<=b;p--,b--)if(Y[p]!==le[b]){if(p!==1||b!==1)do if(p--,b--,0>b||Y[p]!==le[b]){var me=`
`+Y[p].replace(" at new "," at ");return i.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",i.displayName)),me}while(1<=p&&0<=b);break}}}finally{mt=!1,Error.prepareStackTrace=u}return(u=i?i.displayName||i.name:"")?tt(u):""}function Lt(i,l){switch(i.tag){case 26:case 27:case 5:return tt(i.type);case 16:return tt("Lazy");case 13:return i.child!==l&&l!==null?tt("Suspense Fallback"):tt("Suspense");case 19:return tt("SuspenseList");case 0:case 15:return ht(i.type,!1);case 11:return ht(i.type.render,!1);case 1:return ht(i.type,!0);case 31:return tt("Activity");default:return""}}function bn(i){try{var l="",u=null;do l+=Lt(i,u),u=i,i=i.return;while(i);return l}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var ls=Object.prototype.hasOwnProperty,Es=t.unstable_scheduleCallback,Qe=t.unstable_cancelCallback,rt=t.unstable_shouldYield,Zt=t.unstable_requestPaint,Rt=t.unstable_now,Wn=t.unstable_getCurrentPriorityLevel,pe=t.unstable_ImmediatePriority,_e=t.unstable_UserBlockingPriority,Ke=t.unstable_NormalPriority,it=t.unstable_LowPriority,St=t.unstable_IdlePriority,jn=t.log,re=t.unstable_setDisableYieldValue,ae=null,fe=null;function Se(i){if(typeof jn=="function"&&re(i),fe&&typeof fe.setStrictMode=="function")try{fe.setStrictMode(ae,i)}catch{}}var Oe=Math.clz32?Math.clz32:yt,It=Math.log,Bt=Math.LN2;function yt(i){return i>>>=0,i===0?32:31-(It(i)/Bt|0)|0}var Be=256,De=262144,Pe=4194304;function ze(i){var l=i&42;if(l!==0)return l;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function dt(i,l,u){var p=i.pendingLanes;if(p===0)return 0;var b=0,_=i.suspendedLanes,N=i.pingedLanes;i=i.warmLanes;var L=p&134217727;return L!==0?(p=L&~_,p!==0?b=ze(p):(N&=L,N!==0?b=ze(N):u||(u=L&~i,u!==0&&(b=ze(u))))):(L=p&~_,L!==0?b=ze(L):N!==0?b=ze(N):u||(u=p&~i,u!==0&&(b=ze(u)))),b===0?0:l!==0&&l!==b&&(l&_)===0&&(_=b&-b,u=l&-l,_>=u||_===32&&(u&4194048)!==0)?l:b}function Mt(i,l){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&l)===0}function sn(i,l){switch(i){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function As(){var i=Pe;return Pe<<=1,(Pe&62914560)===0&&(Pe=4194304),i}function So(i){for(var l=[],u=0;31>u;u++)l.push(i);return l}function hl(i,l){i.pendingLanes|=l,l!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Ly(i,l,u,p,b,_){var N=i.pendingLanes;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=u,i.entangledLanes&=u,i.errorRecoveryDisabledLanes&=u,i.shellSuspendCounter=0;var L=i.entanglements,Y=i.expirationTimes,le=i.hiddenUpdates;for(u=N&~u;0<u;){var me=31-Oe(u),ye=1<<me;L[me]=0,Y[me]=-1;var ce=le[me];if(ce!==null)for(le[me]=null,me=0;me<ce.length;me++){var he=ce[me];he!==null&&(he.lane&=-536870913)}u&=~ye}p!==0&&pk(i,p,0),_!==0&&b===0&&i.tag!==0&&(i.suspendedLanes|=_&~(N&~l))}function pk(i,l,u){i.pendingLanes|=l,i.suspendedLanes&=~l;var p=31-Oe(l);i.entangledLanes|=l,i.entanglements[p]=i.entanglements[p]|1073741824|u&261930}function mk(i,l){var u=i.entangledLanes|=l;for(i=i.entanglements;u;){var p=31-Oe(u),b=1<<p;b&l|i[p]&l&&(i[p]|=l),u&=~b}}function gk(i,l){var u=l&-l;return u=(u&42)!==0?1:Iy(u),(u&(i.suspendedLanes|l))!==0?0:u}function Iy(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Py(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function yk(){var i=X.p;return i!==0?i:(i=window.event,i===void 0?32:n5(i.type))}function vk(i,l){var u=X.p;try{return X.p=i,l()}finally{X.p=u}}var pa=Math.random().toString(36).slice(2),Gn="__reactFiber$"+pa,js="__reactProps$"+pa,ko="__reactContainer$"+pa,zy="__reactEvents$"+pa,OD="__reactListeners$"+pa,RD="__reactHandles$"+pa,bk="__reactResources$"+pa,Ou="__reactMarker$"+pa;function $y(i){delete i[Gn],delete i[js],delete i[zy],delete i[OD],delete i[RD]}function Co(i){var l=i[Gn];if(l)return l;for(var u=i.parentNode;u;){if(l=u[ko]||u[Gn]){if(u=l.alternate,l.child!==null||u!==null&&u.child!==null)for(i=$4(i);i!==null;){if(u=i[Gn])return u;i=$4(i)}return l}i=u,u=i.parentNode}return null}function No(i){if(i=i[Gn]||i[ko]){var l=i.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return i}return null}function Ru(i){var l=i.tag;if(l===5||l===26||l===27||l===6)return i.stateNode;throw Error(s(33))}function Eo(i){var l=i[bk];return l||(l=i[bk]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function zn(i){i[Ou]=!0}var _k=new Set,xk={};function dl(i,l){Ao(i,l),Ao(i+"Capture",l)}function Ao(i,l){for(xk[i]=l,i=0;i<l.length;i++)_k.add(l[i])}var BD=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wk={},Sk={};function MD(i){return ls.call(Sk,i)?!0:ls.call(wk,i)?!1:BD.test(i)?Sk[i]=!0:(wk[i]=!0,!1)}function Vf(i,l,u){if(MD(l))if(u===null)i.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":i.removeAttribute(l);return;case"boolean":var p=l.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){i.removeAttribute(l);return}}i.setAttribute(l,""+u)}}function Ff(i,l,u){if(u===null)i.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttribute(l,""+u)}}function Ci(i,l,u,p){if(p===null)i.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttributeNS(l,u,""+p)}}function mr(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function kk(i){var l=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function DD(i,l,u){var p=Object.getOwnPropertyDescriptor(i.constructor.prototype,l);if(!i.hasOwnProperty(l)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var b=p.get,_=p.set;return Object.defineProperty(i,l,{configurable:!0,get:function(){return b.call(this)},set:function(N){u=""+N,_.call(this,N)}}),Object.defineProperty(i,l,{enumerable:p.enumerable}),{getValue:function(){return u},setValue:function(N){u=""+N},stopTracking:function(){i._valueTracker=null,delete i[l]}}}}function Hy(i){if(!i._valueTracker){var l=kk(i)?"checked":"value";i._valueTracker=DD(i,l,""+i[l])}}function Ck(i){if(!i)return!1;var l=i._valueTracker;if(!l)return!0;var u=l.getValue(),p="";return i&&(p=kk(i)?i.checked?"true":"false":i.value),i=p,i!==u?(l.setValue(i),!0):!1}function qf(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var LD=/[\n"\\]/g;function gr(i){return i.replace(LD,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Uy(i,l,u,p,b,_,N,L){i.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?i.type=N:i.removeAttribute("type"),l!=null?N==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+mr(l)):i.value!==""+mr(l)&&(i.value=""+mr(l)):N!=="submit"&&N!=="reset"||i.removeAttribute("value"),l!=null?Vy(i,N,mr(l)):u!=null?Vy(i,N,mr(u)):p!=null&&i.removeAttribute("value"),b==null&&_!=null&&(i.defaultChecked=!!_),b!=null&&(i.checked=b&&typeof b!="function"&&typeof b!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?i.name=""+mr(L):i.removeAttribute("name")}function Nk(i,l,u,p,b,_,N,L){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),l!=null||u!=null){if(!(_!=="submit"&&_!=="reset"||l!=null)){Hy(i);return}u=u!=null?""+mr(u):"",l=l!=null?""+mr(l):u,L||l===i.value||(i.value=l),i.defaultValue=l}p=p??b,p=typeof p!="function"&&typeof p!="symbol"&&!!p,i.checked=L?i.checked:!!p,i.defaultChecked=!!p,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(i.name=N),Hy(i)}function Vy(i,l,u){l==="number"&&qf(i.ownerDocument)===i||i.defaultValue===""+u||(i.defaultValue=""+u)}function jo(i,l,u,p){if(i=i.options,l){l={};for(var b=0;b<u.length;b++)l["$"+u[b]]=!0;for(u=0;u<i.length;u++)b=l.hasOwnProperty("$"+i[u].value),i[u].selected!==b&&(i[u].selected=b),b&&p&&(i[u].defaultSelected=!0)}else{for(u=""+mr(u),l=null,b=0;b<i.length;b++){if(i[b].value===u){i[b].selected=!0,p&&(i[b].defaultSelected=!0);return}l!==null||i[b].disabled||(l=i[b])}l!==null&&(l.selected=!0)}}function Ek(i,l,u){if(l!=null&&(l=""+mr(l),l!==i.value&&(i.value=l),u==null)){i.defaultValue!==l&&(i.defaultValue=l);return}i.defaultValue=u!=null?""+mr(u):""}function Ak(i,l,u,p){if(l==null){if(p!=null){if(u!=null)throw Error(s(92));if(q(p)){if(1<p.length)throw Error(s(93));p=p[0]}u=p}u==null&&(u=""),l=u}u=mr(l),i.defaultValue=u,p=i.textContent,p===u&&p!==""&&p!==null&&(i.value=p),Hy(i)}function To(i,l){if(l){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=l;return}}i.textContent=l}var ID=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jk(i,l,u){var p=l.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?p?i.setProperty(l,""):l==="float"?i.cssFloat="":i[l]="":p?i.setProperty(l,u):typeof u!="number"||u===0||ID.has(l)?l==="float"?i.cssFloat=u:i[l]=(""+u).trim():i[l]=u+"px"}function Tk(i,l,u){if(l!=null&&typeof l!="object")throw Error(s(62));if(i=i.style,u!=null){for(var p in u)!u.hasOwnProperty(p)||l!=null&&l.hasOwnProperty(p)||(p.indexOf("--")===0?i.setProperty(p,""):p==="float"?i.cssFloat="":i[p]="");for(var b in l)p=l[b],l.hasOwnProperty(b)&&u[b]!==p&&jk(i,b,p)}else for(var _ in l)l.hasOwnProperty(_)&&jk(i,_,l[_])}function Fy(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var PD=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zD=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Kf(i){return zD.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Ni(){}var qy=null;function Ky(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Oo=null,Ro=null;function Ok(i){var l=No(i);if(l&&(i=l.stateNode)){var u=i[js]||null;e:switch(i=l.stateNode,l.type){case"input":if(Uy(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),l=u.name,u.type==="radio"&&l!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+gr(""+l)+'"][type="radio"]'),l=0;l<u.length;l++){var p=u[l];if(p!==i&&p.form===i.form){var b=p[js]||null;if(!b)throw Error(s(90));Uy(p,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(l=0;l<u.length;l++)p=u[l],p.form===i.form&&Ck(p)}break e;case"textarea":Ek(i,u.value,u.defaultValue);break e;case"select":l=u.value,l!=null&&jo(i,!!u.multiple,l,!1)}}}var Wy=!1;function Rk(i,l,u){if(Wy)return i(l,u);Wy=!0;try{var p=i(l);return p}finally{if(Wy=!1,(Oo!==null||Ro!==null)&&(Bp(),Oo&&(l=Oo,i=Ro,Ro=Oo=null,Ok(l),i)))for(l=0;l<i.length;l++)Ok(i[l])}}function Bu(i,l){var u=i.stateNode;if(u===null)return null;var p=u[js]||null;if(p===null)return null;u=p[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(s(231,l,typeof u));return u}var Ei=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gy=!1;if(Ei)try{var Mu={};Object.defineProperty(Mu,"passive",{get:function(){Gy=!0}}),window.addEventListener("test",Mu,Mu),window.removeEventListener("test",Mu,Mu)}catch{Gy=!1}var ma=null,Yy=null,Wf=null;function Bk(){if(Wf)return Wf;var i,l=Yy,u=l.length,p,b="value"in ma?ma.value:ma.textContent,_=b.length;for(i=0;i<u&&l[i]===b[i];i++);var N=u-i;for(p=1;p<=N&&l[u-p]===b[_-p];p++);return Wf=b.slice(i,1<p?1-p:void 0)}function Gf(i){var l=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&l===13&&(i=13)):i=l,i===10&&(i=13),32<=i||i===13?i:0}function Yf(){return!0}function Mk(){return!1}function Ts(i){function l(u,p,b,_,N){this._reactName=u,this._targetInst=b,this.type=p,this.nativeEvent=_,this.target=N,this.currentTarget=null;for(var L in i)i.hasOwnProperty(L)&&(u=i[L],this[L]=u?u(_):_[L]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Yf:Mk,this.isPropagationStopped=Mk,this}return m(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Yf)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Yf)},persist:function(){},isPersistent:Yf}),l}var fl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xf=Ts(fl),Du=m({},fl,{view:0,detail:0}),$D=Ts(Du),Xy,Jy,Lu,Jf=m({},Du,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zy,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Lu&&(Lu&&i.type==="mousemove"?(Xy=i.screenX-Lu.screenX,Jy=i.screenY-Lu.screenY):Jy=Xy=0,Lu=i),Xy)},movementY:function(i){return"movementY"in i?i.movementY:Jy}}),Dk=Ts(Jf),HD=m({},Jf,{dataTransfer:0}),UD=Ts(HD),VD=m({},Du,{relatedTarget:0}),Qy=Ts(VD),FD=m({},fl,{animationName:0,elapsedTime:0,pseudoElement:0}),qD=Ts(FD),KD=m({},fl,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),WD=Ts(KD),GD=m({},fl,{data:0}),Lk=Ts(GD),YD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},JD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QD(i){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(i):(i=JD[i])?!!l[i]:!1}function Zy(){return QD}var ZD=m({},Du,{key:function(i){if(i.key){var l=YD[i.key]||i.key;if(l!=="Unidentified")return l}return i.type==="keypress"?(i=Gf(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?XD[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zy,charCode:function(i){return i.type==="keypress"?Gf(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Gf(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),e8=Ts(ZD),t8=m({},Jf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ik=Ts(t8),n8=m({},Du,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zy}),s8=Ts(n8),r8=m({},fl,{propertyName:0,elapsedTime:0,pseudoElement:0}),i8=Ts(r8),a8=m({},Jf,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),l8=Ts(a8),o8=m({},fl,{newState:0,oldState:0}),c8=Ts(o8),u8=[9,13,27,32],e1=Ei&&"CompositionEvent"in window,Iu=null;Ei&&"documentMode"in document&&(Iu=document.documentMode);var h8=Ei&&"TextEvent"in window&&!Iu,Pk=Ei&&(!e1||Iu&&8<Iu&&11>=Iu),zk=" ",$k=!1;function Hk(i,l){switch(i){case"keyup":return u8.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uk(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Bo=!1;function d8(i,l){switch(i){case"compositionend":return Uk(l);case"keypress":return l.which!==32?null:($k=!0,zk);case"textInput":return i=l.data,i===zk&&$k?null:i;default:return null}}function f8(i,l){if(Bo)return i==="compositionend"||!e1&&Hk(i,l)?(i=Bk(),Wf=Yy=ma=null,Bo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Pk&&l.locale!=="ko"?null:l.data;default:return null}}var p8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vk(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l==="input"?!!p8[i.type]:l==="textarea"}function Fk(i,l,u,p){Oo?Ro?Ro.push(p):Ro=[p]:Oo=p,l=$p(l,"onChange"),0<l.length&&(u=new Xf("onChange","change",null,u,p),i.push({event:u,listeners:l}))}var Pu=null,zu=null;function m8(i){N4(i,0)}function Qf(i){var l=Ru(i);if(Ck(l))return i}function qk(i,l){if(i==="change")return l}var Kk=!1;if(Ei){var t1;if(Ei){var n1="oninput"in document;if(!n1){var Wk=document.createElement("div");Wk.setAttribute("oninput","return;"),n1=typeof Wk.oninput=="function"}t1=n1}else t1=!1;Kk=t1&&(!document.documentMode||9<document.documentMode)}function Gk(){Pu&&(Pu.detachEvent("onpropertychange",Yk),zu=Pu=null)}function Yk(i){if(i.propertyName==="value"&&Qf(zu)){var l=[];Fk(l,zu,i,Ky(i)),Rk(m8,l)}}function g8(i,l,u){i==="focusin"?(Gk(),Pu=l,zu=u,Pu.attachEvent("onpropertychange",Yk)):i==="focusout"&&Gk()}function y8(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Qf(zu)}function v8(i,l){if(i==="click")return Qf(l)}function b8(i,l){if(i==="input"||i==="change")return Qf(l)}function _8(i,l){return i===l&&(i!==0||1/i===1/l)||i!==i&&l!==l}var Ws=typeof Object.is=="function"?Object.is:_8;function $u(i,l){if(Ws(i,l))return!0;if(typeof i!="object"||i===null||typeof l!="object"||l===null)return!1;var u=Object.keys(i),p=Object.keys(l);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var b=u[p];if(!ls.call(l,b)||!Ws(i[b],l[b]))return!1}return!0}function Xk(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Jk(i,l){var u=Xk(i);i=0;for(var p;u;){if(u.nodeType===3){if(p=i+u.textContent.length,i<=l&&p>=l)return{node:u,offset:l-i};i=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Xk(u)}}function Qk(i,l){return i&&l?i===l?!0:i&&i.nodeType===3?!1:l&&l.nodeType===3?Qk(i,l.parentNode):"contains"in i?i.contains(l):i.compareDocumentPosition?!!(i.compareDocumentPosition(l)&16):!1:!1}function Zk(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var l=qf(i.document);l instanceof i.HTMLIFrameElement;){try{var u=typeof l.contentWindow.location.href=="string"}catch{u=!1}if(u)i=l.contentWindow;else break;l=qf(i.document)}return l}function s1(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l&&(l==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||l==="textarea"||i.contentEditable==="true")}var x8=Ei&&"documentMode"in document&&11>=document.documentMode,Mo=null,r1=null,Hu=null,i1=!1;function eC(i,l,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;i1||Mo==null||Mo!==qf(p)||(p=Mo,"selectionStart"in p&&s1(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Hu&&$u(Hu,p)||(Hu=p,p=$p(r1,"onSelect"),0<p.length&&(l=new Xf("onSelect","select",null,l,u),i.push({event:l,listeners:p}),l.target=Mo)))}function pl(i,l){var u={};return u[i.toLowerCase()]=l.toLowerCase(),u["Webkit"+i]="webkit"+l,u["Moz"+i]="moz"+l,u}var Do={animationend:pl("Animation","AnimationEnd"),animationiteration:pl("Animation","AnimationIteration"),animationstart:pl("Animation","AnimationStart"),transitionrun:pl("Transition","TransitionRun"),transitionstart:pl("Transition","TransitionStart"),transitioncancel:pl("Transition","TransitionCancel"),transitionend:pl("Transition","TransitionEnd")},a1={},tC={};Ei&&(tC=document.createElement("div").style,"AnimationEvent"in window||(delete Do.animationend.animation,delete Do.animationiteration.animation,delete Do.animationstart.animation),"TransitionEvent"in window||delete Do.transitionend.transition);function ml(i){if(a1[i])return a1[i];if(!Do[i])return i;var l=Do[i],u;for(u in l)if(l.hasOwnProperty(u)&&u in tC)return a1[i]=l[u];return i}var nC=ml("animationend"),sC=ml("animationiteration"),rC=ml("animationstart"),w8=ml("transitionrun"),S8=ml("transitionstart"),k8=ml("transitioncancel"),iC=ml("transitionend"),aC=new Map,l1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");l1.push("scrollEnd");function $r(i,l){aC.set(i,l),dl(l,[i])}var Zf=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},yr=[],Lo=0,o1=0;function ep(){for(var i=Lo,l=o1=Lo=0;l<i;){var u=yr[l];yr[l++]=null;var p=yr[l];yr[l++]=null;var b=yr[l];yr[l++]=null;var _=yr[l];if(yr[l++]=null,p!==null&&b!==null){var N=p.pending;N===null?b.next=b:(b.next=N.next,N.next=b),p.pending=b}_!==0&&lC(u,b,_)}}function tp(i,l,u,p){yr[Lo++]=i,yr[Lo++]=l,yr[Lo++]=u,yr[Lo++]=p,o1|=p,i.lanes|=p,i=i.alternate,i!==null&&(i.lanes|=p)}function c1(i,l,u,p){return tp(i,l,u,p),np(i)}function gl(i,l){return tp(i,null,null,l),np(i)}function lC(i,l,u){i.lanes|=u;var p=i.alternate;p!==null&&(p.lanes|=u);for(var b=!1,_=i.return;_!==null;)_.childLanes|=u,p=_.alternate,p!==null&&(p.childLanes|=u),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(b=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,b&&l!==null&&(b=31-Oe(u),i=_.hiddenUpdates,p=i[b],p===null?i[b]=[l]:p.push(l),l.lane=u|536870912),_):null}function np(i){if(50<ch)throw ch=0,vv=null,Error(s(185));for(var l=i.return;l!==null;)i=l,l=i.return;return i.tag===3?i.stateNode:null}var Io={};function C8(i,l,u,p){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gs(i,l,u,p){return new C8(i,l,u,p)}function u1(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ai(i,l){var u=i.alternate;return u===null?(u=Gs(i.tag,l,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=l,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&65011712,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,l=i.dependencies,u.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u.refCleanup=i.refCleanup,u}function oC(i,l){i.flags&=65011714;var u=i.alternate;return u===null?(i.childLanes=0,i.lanes=l,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,l=u.dependencies,i.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),i}function sp(i,l,u,p,b,_){var N=0;if(p=i,typeof i=="function")u1(i)&&(N=1);else if(typeof i=="string")N=TL(i,u,Z.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case G:return i=Gs(31,u,l,b),i.elementType=G,i.lanes=_,i;case w:return yl(u.children,b,_,l);case S:N=8,b|=24;break;case k:return i=Gs(12,u,l,b|2),i.elementType=k,i.lanes=_,i;case M:return i=Gs(13,u,l,b),i.elementType=M,i.lanes=_,i;case T:return i=Gs(19,u,l,b),i.elementType=T,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case A:N=10;break e;case C:N=9;break e;case B:N=11;break e;case H:N=14;break e;case $:N=16,p=null;break e}N=29,u=Error(s(130,i===null?"null":typeof i,"")),p=null}return l=Gs(N,u,l,b),l.elementType=i,l.type=p,l.lanes=_,l}function yl(i,l,u,p){return i=Gs(7,i,p,l),i.lanes=u,i}function h1(i,l,u){return i=Gs(6,i,null,l),i.lanes=u,i}function cC(i){var l=Gs(18,null,null,0);return l.stateNode=i,l}function d1(i,l,u){return l=Gs(4,i.children!==null?i.children:[],i.key,l),l.lanes=u,l.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},l}var uC=new WeakMap;function vr(i,l){if(typeof i=="object"&&i!==null){var u=uC.get(i);return u!==void 0?u:(l={value:i,source:l,stack:bn(l)},uC.set(i,l),l)}return{value:i,source:l,stack:bn(l)}}var Po=[],zo=0,rp=null,Uu=0,br=[],_r=0,ga=null,Qr=1,Zr="";function ji(i,l){Po[zo++]=Uu,Po[zo++]=rp,rp=i,Uu=l}function hC(i,l,u){br[_r++]=Qr,br[_r++]=Zr,br[_r++]=ga,ga=i;var p=Qr;i=Zr;var b=32-Oe(p)-1;p&=~(1<<b),u+=1;var _=32-Oe(l)+b;if(30<_){var N=b-b%5;_=(p&(1<<N)-1).toString(32),p>>=N,b-=N,Qr=1<<32-Oe(l)+b|u<<b|p,Zr=_+i}else Qr=1<<_|u<<b|p,Zr=i}function f1(i){i.return!==null&&(ji(i,1),hC(i,1,0))}function p1(i){for(;i===rp;)rp=Po[--zo],Po[zo]=null,Uu=Po[--zo],Po[zo]=null;for(;i===ga;)ga=br[--_r],br[_r]=null,Zr=br[--_r],br[_r]=null,Qr=br[--_r],br[_r]=null}function dC(i,l){br[_r++]=Qr,br[_r++]=Zr,br[_r++]=ga,Qr=l.id,Zr=l.overflow,ga=i}var Yn=null,Yt=null,Nt=!1,ya=null,xr=!1,m1=Error(s(519));function va(i){var l=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Vu(vr(l,i)),m1}function fC(i){var l=i.stateNode,u=i.type,p=i.memoizedProps;switch(l[Gn]=i,l[js]=p,u){case"dialog":xt("cancel",l),xt("close",l);break;case"iframe":case"object":case"embed":xt("load",l);break;case"video":case"audio":for(u=0;u<hh.length;u++)xt(hh[u],l);break;case"source":xt("error",l);break;case"img":case"image":case"link":xt("error",l),xt("load",l);break;case"details":xt("toggle",l);break;case"input":xt("invalid",l),Nk(l,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":xt("invalid",l);break;case"textarea":xt("invalid",l),Ak(l,p.value,p.defaultValue,p.children)}u=p.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||l.textContent===""+u||p.suppressHydrationWarning===!0||T4(l.textContent,u)?(p.popover!=null&&(xt("beforetoggle",l),xt("toggle",l)),p.onScroll!=null&&xt("scroll",l),p.onScrollEnd!=null&&xt("scrollend",l),p.onClick!=null&&(l.onclick=Ni),l=!0):l=!1,l||va(i,!0)}function pC(i){for(Yn=i.return;Yn;)switch(Yn.tag){case 5:case 31:case 13:xr=!1;return;case 27:case 3:xr=!0;return;default:Yn=Yn.return}}function $o(i){if(i!==Yn)return!1;if(!Nt)return pC(i),Nt=!0,!1;var l=i.tag,u;if((u=l!==3&&l!==27)&&((u=l===5)&&(u=i.type,u=!(u!=="form"&&u!=="button")||Bv(i.type,i.memoizedProps)),u=!u),u&&Yt&&va(i),pC(i),l===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Yt=z4(i)}else if(l===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Yt=z4(i)}else l===27?(l=Yt,Ra(i.type)?(i=Pv,Pv=null,Yt=i):Yt=l):Yt=Yn?Sr(i.stateNode.nextSibling):null;return!0}function vl(){Yt=Yn=null,Nt=!1}function g1(){var i=ya;return i!==null&&(Ms===null?Ms=i:Ms.push.apply(Ms,i),ya=null),i}function Vu(i){ya===null?ya=[i]:ya.push(i)}var y1=R(null),bl=null,Ti=null;function ba(i,l,u){E(y1,l._currentValue),l._currentValue=u}function Oi(i){i._currentValue=y1.current,V(y1)}function v1(i,l,u){for(;i!==null;){var p=i.alternate;if((i.childLanes&l)!==l?(i.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),i===u)break;i=i.return}}function b1(i,l,u,p){var b=i.child;for(b!==null&&(b.return=i);b!==null;){var _=b.dependencies;if(_!==null){var N=b.child;_=_.firstContext;e:for(;_!==null;){var L=_;_=b;for(var Y=0;Y<l.length;Y++)if(L.context===l[Y]){_.lanes|=u,L=_.alternate,L!==null&&(L.lanes|=u),v1(_.return,u,i),p||(N=null);break e}_=L.next}}else if(b.tag===18){if(N=b.return,N===null)throw Error(s(341));N.lanes|=u,_=N.alternate,_!==null&&(_.lanes|=u),v1(N,u,i),N=null}else N=b.child;if(N!==null)N.return=b;else for(N=b;N!==null;){if(N===i){N=null;break}if(b=N.sibling,b!==null){b.return=N.return,N=b;break}N=N.return}b=N}}function Ho(i,l,u,p){i=null;for(var b=l,_=!1;b!==null;){if(!_){if((b.flags&524288)!==0)_=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var N=b.alternate;if(N===null)throw Error(s(387));if(N=N.memoizedProps,N!==null){var L=b.type;Ws(b.pendingProps.value,N.value)||(i!==null?i.push(L):i=[L])}}else if(b===de.current){if(N=b.alternate,N===null)throw Error(s(387));N.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(i!==null?i.push(gh):i=[gh])}b=b.return}i!==null&&b1(l,i,u,p),l.flags|=262144}function ip(i){for(i=i.firstContext;i!==null;){if(!Ws(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function _l(i){bl=i,Ti=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Xn(i){return mC(bl,i)}function ap(i,l){return bl===null&&_l(i),mC(i,l)}function mC(i,l){var u=l._currentValue;if(l={context:l,memoizedValue:u,next:null},Ti===null){if(i===null)throw Error(s(308));Ti=l,i.dependencies={lanes:0,firstContext:l},i.flags|=524288}else Ti=Ti.next=l;return u}var N8=typeof AbortController<"u"?AbortController:function(){var i=[],l=this.signal={aborted:!1,addEventListener:function(u,p){i.push(p)}};this.abort=function(){l.aborted=!0,i.forEach(function(u){return u()})}},E8=t.unstable_scheduleCallback,A8=t.unstable_NormalPriority,_n={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _1(){return{controller:new N8,data:new Map,refCount:0}}function Fu(i){i.refCount--,i.refCount===0&&E8(A8,function(){i.controller.abort()})}var qu=null,x1=0,Uo=0,Vo=null;function j8(i,l){if(qu===null){var u=qu=[];x1=0,Uo=kv(),Vo={status:"pending",value:void 0,then:function(p){u.push(p)}}}return x1++,l.then(gC,gC),l}function gC(){if(--x1===0&&qu!==null){Vo!==null&&(Vo.status="fulfilled");var i=qu;qu=null,Uo=0,Vo=null;for(var l=0;l<i.length;l++)(0,i[l])()}}function T8(i,l){var u=[],p={status:"pending",value:null,reason:null,then:function(b){u.push(b)}};return i.then(function(){p.status="fulfilled",p.value=l;for(var b=0;b<u.length;b++)(0,u[b])(l)},function(b){for(p.status="rejected",p.reason=b,b=0;b<u.length;b++)(0,u[b])(void 0)}),p}var yC=P.S;P.S=function(i,l){e4=Rt(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&j8(i,l),yC!==null&&yC(i,l)};var xl=R(null);function w1(){var i=xl.current;return i!==null?i:qt.pooledCache}function lp(i,l){l===null?E(xl,xl.current):E(xl,l.pool)}function vC(){var i=w1();return i===null?null:{parent:_n._currentValue,pool:i}}var Fo=Error(s(460)),S1=Error(s(474)),op=Error(s(542)),cp={then:function(){}};function bC(i){return i=i.status,i==="fulfilled"||i==="rejected"}function _C(i,l,u){switch(u=i[u],u===void 0?i.push(l):u!==l&&(l.then(Ni,Ni),l=u),l.status){case"fulfilled":return l.value;case"rejected":throw i=l.reason,wC(i),i;default:if(typeof l.status=="string")l.then(Ni,Ni);else{if(i=qt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=l,i.status="pending",i.then(function(p){if(l.status==="pending"){var b=l;b.status="fulfilled",b.value=p}},function(p){if(l.status==="pending"){var b=l;b.status="rejected",b.reason=p}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw i=l.reason,wC(i),i}throw Sl=l,Fo}}function wl(i){try{var l=i._init;return l(i._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Sl=u,Fo):u}}var Sl=null;function xC(){if(Sl===null)throw Error(s(459));var i=Sl;return Sl=null,i}function wC(i){if(i===Fo||i===op)throw Error(s(483))}var qo=null,Ku=0;function up(i){var l=Ku;return Ku+=1,qo===null&&(qo=[]),_C(qo,i,l)}function Wu(i,l){l=l.props.ref,i.ref=l!==void 0?l:null}function hp(i,l){throw l.$$typeof===v?Error(s(525)):(i=Object.prototype.toString.call(l),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":i)))}function SC(i){function l(se,ee){if(i){var ie=se.deletions;ie===null?(se.deletions=[ee],se.flags|=16):ie.push(ee)}}function u(se,ee){if(!i)return null;for(;ee!==null;)l(se,ee),ee=ee.sibling;return null}function p(se){for(var ee=new Map;se!==null;)se.key!==null?ee.set(se.key,se):ee.set(se.index,se),se=se.sibling;return ee}function b(se,ee){return se=Ai(se,ee),se.index=0,se.sibling=null,se}function _(se,ee,ie){return se.index=ie,i?(ie=se.alternate,ie!==null?(ie=ie.index,ie<ee?(se.flags|=67108866,ee):ie):(se.flags|=67108866,ee)):(se.flags|=1048576,ee)}function N(se){return i&&se.alternate===null&&(se.flags|=67108866),se}function L(se,ee,ie,ge){return ee===null||ee.tag!==6?(ee=h1(ie,se.mode,ge),ee.return=se,ee):(ee=b(ee,ie),ee.return=se,ee)}function Y(se,ee,ie,ge){var Ye=ie.type;return Ye===w?me(se,ee,ie.props.children,ge,ie.key):ee!==null&&(ee.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===$&&wl(Ye)===ee.type)?(ee=b(ee,ie.props),Wu(ee,ie),ee.return=se,ee):(ee=sp(ie.type,ie.key,ie.props,null,se.mode,ge),Wu(ee,ie),ee.return=se,ee)}function le(se,ee,ie,ge){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==ie.containerInfo||ee.stateNode.implementation!==ie.implementation?(ee=d1(ie,se.mode,ge),ee.return=se,ee):(ee=b(ee,ie.children||[]),ee.return=se,ee)}function me(se,ee,ie,ge,Ye){return ee===null||ee.tag!==7?(ee=yl(ie,se.mode,ge,Ye),ee.return=se,ee):(ee=b(ee,ie),ee.return=se,ee)}function ye(se,ee,ie){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ee=h1(""+ee,se.mode,ie),ee.return=se,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case y:return ie=sp(ee.type,ee.key,ee.props,null,se.mode,ie),Wu(ie,ee),ie.return=se,ie;case x:return ee=d1(ee,se.mode,ie),ee.return=se,ee;case $:return ee=wl(ee),ye(se,ee,ie)}if(q(ee)||F(ee))return ee=yl(ee,se.mode,ie,null),ee.return=se,ee;if(typeof ee.then=="function")return ye(se,up(ee),ie);if(ee.$$typeof===A)return ye(se,ap(se,ee),ie);hp(se,ee)}return null}function ce(se,ee,ie,ge){var Ye=ee!==null?ee.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return Ye!==null?null:L(se,ee,""+ie,ge);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case y:return ie.key===Ye?Y(se,ee,ie,ge):null;case x:return ie.key===Ye?le(se,ee,ie,ge):null;case $:return ie=wl(ie),ce(se,ee,ie,ge)}if(q(ie)||F(ie))return Ye!==null?null:me(se,ee,ie,ge,null);if(typeof ie.then=="function")return ce(se,ee,up(ie),ge);if(ie.$$typeof===A)return ce(se,ee,ap(se,ie),ge);hp(se,ie)}return null}function he(se,ee,ie,ge,Ye){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return se=se.get(ie)||null,L(ee,se,""+ge,Ye);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case y:return se=se.get(ge.key===null?ie:ge.key)||null,Y(ee,se,ge,Ye);case x:return se=se.get(ge.key===null?ie:ge.key)||null,le(ee,se,ge,Ye);case $:return ge=wl(ge),he(se,ee,ie,ge,Ye)}if(q(ge)||F(ge))return se=se.get(ie)||null,me(ee,se,ge,Ye,null);if(typeof ge.then=="function")return he(se,ee,ie,up(ge),Ye);if(ge.$$typeof===A)return he(se,ee,ie,ap(ee,ge),Ye);hp(ee,ge)}return null}function Ue(se,ee,ie,ge){for(var Ye=null,jt=null,qe=ee,ft=ee=0,Ct=null;qe!==null&&ft<ie.length;ft++){qe.index>ft?(Ct=qe,qe=null):Ct=qe.sibling;var Tt=ce(se,qe,ie[ft],ge);if(Tt===null){qe===null&&(qe=Ct);break}i&&qe&&Tt.alternate===null&&l(se,qe),ee=_(Tt,ee,ft),jt===null?Ye=Tt:jt.sibling=Tt,jt=Tt,qe=Ct}if(ft===ie.length)return u(se,qe),Nt&&ji(se,ft),Ye;if(qe===null){for(;ft<ie.length;ft++)qe=ye(se,ie[ft],ge),qe!==null&&(ee=_(qe,ee,ft),jt===null?Ye=qe:jt.sibling=qe,jt=qe);return Nt&&ji(se,ft),Ye}for(qe=p(qe);ft<ie.length;ft++)Ct=he(qe,se,ft,ie[ft],ge),Ct!==null&&(i&&Ct.alternate!==null&&qe.delete(Ct.key===null?ft:Ct.key),ee=_(Ct,ee,ft),jt===null?Ye=Ct:jt.sibling=Ct,jt=Ct);return i&&qe.forEach(function(Ia){return l(se,Ia)}),Nt&&ji(se,ft),Ye}function Ze(se,ee,ie,ge){if(ie==null)throw Error(s(151));for(var Ye=null,jt=null,qe=ee,ft=ee=0,Ct=null,Tt=ie.next();qe!==null&&!Tt.done;ft++,Tt=ie.next()){qe.index>ft?(Ct=qe,qe=null):Ct=qe.sibling;var Ia=ce(se,qe,Tt.value,ge);if(Ia===null){qe===null&&(qe=Ct);break}i&&qe&&Ia.alternate===null&&l(se,qe),ee=_(Ia,ee,ft),jt===null?Ye=Ia:jt.sibling=Ia,jt=Ia,qe=Ct}if(Tt.done)return u(se,qe),Nt&&ji(se,ft),Ye;if(qe===null){for(;!Tt.done;ft++,Tt=ie.next())Tt=ye(se,Tt.value,ge),Tt!==null&&(ee=_(Tt,ee,ft),jt===null?Ye=Tt:jt.sibling=Tt,jt=Tt);return Nt&&ji(se,ft),Ye}for(qe=p(qe);!Tt.done;ft++,Tt=ie.next())Tt=he(qe,se,ft,Tt.value,ge),Tt!==null&&(i&&Tt.alternate!==null&&qe.delete(Tt.key===null?ft:Tt.key),ee=_(Tt,ee,ft),jt===null?Ye=Tt:jt.sibling=Tt,jt=Tt);return i&&qe.forEach(function(HL){return l(se,HL)}),Nt&&ji(se,ft),Ye}function Vt(se,ee,ie,ge){if(typeof ie=="object"&&ie!==null&&ie.type===w&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case y:e:{for(var Ye=ie.key;ee!==null;){if(ee.key===Ye){if(Ye=ie.type,Ye===w){if(ee.tag===7){u(se,ee.sibling),ge=b(ee,ie.props.children),ge.return=se,se=ge;break e}}else if(ee.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===$&&wl(Ye)===ee.type){u(se,ee.sibling),ge=b(ee,ie.props),Wu(ge,ie),ge.return=se,se=ge;break e}u(se,ee);break}else l(se,ee);ee=ee.sibling}ie.type===w?(ge=yl(ie.props.children,se.mode,ge,ie.key),ge.return=se,se=ge):(ge=sp(ie.type,ie.key,ie.props,null,se.mode,ge),Wu(ge,ie),ge.return=se,se=ge)}return N(se);case x:e:{for(Ye=ie.key;ee!==null;){if(ee.key===Ye)if(ee.tag===4&&ee.stateNode.containerInfo===ie.containerInfo&&ee.stateNode.implementation===ie.implementation){u(se,ee.sibling),ge=b(ee,ie.children||[]),ge.return=se,se=ge;break e}else{u(se,ee);break}else l(se,ee);ee=ee.sibling}ge=d1(ie,se.mode,ge),ge.return=se,se=ge}return N(se);case $:return ie=wl(ie),Vt(se,ee,ie,ge)}if(q(ie))return Ue(se,ee,ie,ge);if(F(ie)){if(Ye=F(ie),typeof Ye!="function")throw Error(s(150));return ie=Ye.call(ie),Ze(se,ee,ie,ge)}if(typeof ie.then=="function")return Vt(se,ee,up(ie),ge);if(ie.$$typeof===A)return Vt(se,ee,ap(se,ie),ge);hp(se,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint"?(ie=""+ie,ee!==null&&ee.tag===6?(u(se,ee.sibling),ge=b(ee,ie),ge.return=se,se=ge):(u(se,ee),ge=h1(ie,se.mode,ge),ge.return=se,se=ge),N(se)):u(se,ee)}return function(se,ee,ie,ge){try{Ku=0;var Ye=Vt(se,ee,ie,ge);return qo=null,Ye}catch(qe){if(qe===Fo||qe===op)throw qe;var jt=Gs(29,qe,null,se.mode);return jt.lanes=ge,jt.return=se,jt}}}var kl=SC(!0),kC=SC(!1),_a=!1;function k1(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function C1(i,l){i=i.updateQueue,l.updateQueue===i&&(l.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function xa(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function wa(i,l,u){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(Dt&2)!==0){var b=p.pending;return b===null?l.next=l:(l.next=b.next,b.next=l),p.pending=l,l=np(i),lC(i,null,u),l}return tp(i,p,l,u),np(i)}function Gu(i,l,u){if(l=l.updateQueue,l!==null&&(l=l.shared,(u&4194048)!==0)){var p=l.lanes;p&=i.pendingLanes,u|=p,l.lanes=u,mk(i,u)}}function N1(i,l){var u=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var b=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var N={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};_===null?b=_=N:_=_.next=N,u=u.next}while(u!==null);_===null?b=_=l:_=_.next=l}else b=_=l;u={baseState:p.baseState,firstBaseUpdate:b,lastBaseUpdate:_,shared:p.shared,callbacks:p.callbacks},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=l:i.next=l,u.lastBaseUpdate=l}var E1=!1;function Yu(){if(E1){var i=Vo;if(i!==null)throw i}}function Xu(i,l,u,p){E1=!1;var b=i.updateQueue;_a=!1;var _=b.firstBaseUpdate,N=b.lastBaseUpdate,L=b.shared.pending;if(L!==null){b.shared.pending=null;var Y=L,le=Y.next;Y.next=null,N===null?_=le:N.next=le,N=Y;var me=i.alternate;me!==null&&(me=me.updateQueue,L=me.lastBaseUpdate,L!==N&&(L===null?me.firstBaseUpdate=le:L.next=le,me.lastBaseUpdate=Y))}if(_!==null){var ye=b.baseState;N=0,me=le=Y=null,L=_;do{var ce=L.lane&-536870913,he=ce!==L.lane;if(he?(kt&ce)===ce:(p&ce)===ce){ce!==0&&ce===Uo&&(E1=!0),me!==null&&(me=me.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});e:{var Ue=i,Ze=L;ce=l;var Vt=u;switch(Ze.tag){case 1:if(Ue=Ze.payload,typeof Ue=="function"){ye=Ue.call(Vt,ye,ce);break e}ye=Ue;break e;case 3:Ue.flags=Ue.flags&-65537|128;case 0:if(Ue=Ze.payload,ce=typeof Ue=="function"?Ue.call(Vt,ye,ce):Ue,ce==null)break e;ye=m({},ye,ce);break e;case 2:_a=!0}}ce=L.callback,ce!==null&&(i.flags|=64,he&&(i.flags|=8192),he=b.callbacks,he===null?b.callbacks=[ce]:he.push(ce))}else he={lane:ce,tag:L.tag,payload:L.payload,callback:L.callback,next:null},me===null?(le=me=he,Y=ye):me=me.next=he,N|=ce;if(L=L.next,L===null){if(L=b.shared.pending,L===null)break;he=L,L=he.next,he.next=null,b.lastBaseUpdate=he,b.shared.pending=null}}while(!0);me===null&&(Y=ye),b.baseState=Y,b.firstBaseUpdate=le,b.lastBaseUpdate=me,_===null&&(b.shared.lanes=0),Ea|=N,i.lanes=N,i.memoizedState=ye}}function CC(i,l){if(typeof i!="function")throw Error(s(191,i));i.call(l)}function NC(i,l){var u=i.callbacks;if(u!==null)for(i.callbacks=null,i=0;i<u.length;i++)CC(u[i],l)}var Ko=R(null),dp=R(0);function EC(i,l){i=$i,E(dp,i),E(Ko,l),$i=i|l.baseLanes}function A1(){E(dp,$i),E(Ko,Ko.current)}function j1(){$i=dp.current,V(Ko),V(dp)}var Ys=R(null),wr=null;function Sa(i){var l=i.alternate;E(dn,dn.current&1),E(Ys,i),wr===null&&(l===null||Ko.current!==null||l.memoizedState!==null)&&(wr=i)}function T1(i){E(dn,dn.current),E(Ys,i),wr===null&&(wr=i)}function AC(i){i.tag===22?(E(dn,dn.current),E(Ys,i),wr===null&&(wr=i)):ka()}function ka(){E(dn,dn.current),E(Ys,Ys.current)}function Xs(i){V(Ys),wr===i&&(wr=null),V(dn)}var dn=R(0);function fp(i){for(var l=i;l!==null;){if(l.tag===13){var u=l.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Lv(u)||Iv(u)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Ri=0,ct=null,Ht=null,xn=null,pp=!1,Wo=!1,Cl=!1,mp=0,Ju=0,Go=null,O8=0;function on(){throw Error(s(321))}function O1(i,l){if(l===null)return!1;for(var u=0;u<l.length&&u<i.length;u++)if(!Ws(i[u],l[u]))return!1;return!0}function R1(i,l,u,p,b,_){return Ri=_,ct=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,P.H=i===null||i.memoizedState===null?hN:W1,Cl=!1,_=u(p,b),Cl=!1,Wo&&(_=TC(l,u,p,b)),jC(i),_}function jC(i){P.H=eh;var l=Ht!==null&&Ht.next!==null;if(Ri=0,xn=Ht=ct=null,pp=!1,Ju=0,Go=null,l)throw Error(s(300));i===null||wn||(i=i.dependencies,i!==null&&ip(i)&&(wn=!0))}function TC(i,l,u,p){ct=i;var b=0;do{if(Wo&&(Go=null),Ju=0,Wo=!1,25<=b)throw Error(s(301));if(b+=1,xn=Ht=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}P.H=dN,_=l(u,p)}while(Wo);return _}function R8(){var i=P.H,l=i.useState()[0];return l=typeof l.then=="function"?Qu(l):l,i=i.useState()[0],(Ht!==null?Ht.memoizedState:null)!==i&&(ct.flags|=1024),l}function B1(){var i=mp!==0;return mp=0,i}function M1(i,l,u){l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~u}function D1(i){if(pp){for(i=i.memoizedState;i!==null;){var l=i.queue;l!==null&&(l.pending=null),i=i.next}pp=!1}Ri=0,xn=Ht=ct=null,Wo=!1,Ju=mp=0,Go=null}function ms(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xn===null?ct.memoizedState=xn=i:xn=xn.next=i,xn}function fn(){if(Ht===null){var i=ct.alternate;i=i!==null?i.memoizedState:null}else i=Ht.next;var l=xn===null?ct.memoizedState:xn.next;if(l!==null)xn=l,Ht=i;else{if(i===null)throw ct.alternate===null?Error(s(467)):Error(s(310));Ht=i,i={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},xn===null?ct.memoizedState=xn=i:xn=xn.next=i}return xn}function gp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qu(i){var l=Ju;return Ju+=1,Go===null&&(Go=[]),i=_C(Go,i,l),l=ct,(xn===null?l.memoizedState:xn.next)===null&&(l=l.alternate,P.H=l===null||l.memoizedState===null?hN:W1),i}function yp(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Qu(i);if(i.$$typeof===A)return Xn(i)}throw Error(s(438,String(i)))}function L1(i){var l=null,u=ct.updateQueue;if(u!==null&&(l=u.memoCache),l==null){var p=ct.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(l={data:p.data.map(function(b){return b.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),u===null&&(u=gp(),ct.updateQueue=u),u.memoCache=l,u=l.data[l.index],u===void 0)for(u=l.data[l.index]=Array(i),p=0;p<i;p++)u[p]=z;return l.index++,u}function Bi(i,l){return typeof l=="function"?l(i):l}function vp(i){var l=fn();return I1(l,Ht,i)}function I1(i,l,u){var p=i.queue;if(p===null)throw Error(s(311));p.lastRenderedReducer=u;var b=i.baseQueue,_=p.pending;if(_!==null){if(b!==null){var N=b.next;b.next=_.next,_.next=N}l.baseQueue=b=_,p.pending=null}if(_=i.baseState,b===null)i.memoizedState=_;else{l=b.next;var L=N=null,Y=null,le=l,me=!1;do{var ye=le.lane&-536870913;if(ye!==le.lane?(kt&ye)===ye:(Ri&ye)===ye){var ce=le.revertLane;if(ce===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),ye===Uo&&(me=!0);else if((Ri&ce)===ce){le=le.next,ce===Uo&&(me=!0);continue}else ye={lane:0,revertLane:le.revertLane,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},Y===null?(L=Y=ye,N=_):Y=Y.next=ye,ct.lanes|=ce,Ea|=ce;ye=le.action,Cl&&u(_,ye),_=le.hasEagerState?le.eagerState:u(_,ye)}else ce={lane:ye,revertLane:le.revertLane,gesture:le.gesture,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},Y===null?(L=Y=ce,N=_):Y=Y.next=ce,ct.lanes|=ye,Ea|=ye;le=le.next}while(le!==null&&le!==l);if(Y===null?N=_:Y.next=L,!Ws(_,i.memoizedState)&&(wn=!0,me&&(u=Vo,u!==null)))throw u;i.memoizedState=_,i.baseState=N,i.baseQueue=Y,p.lastRenderedState=_}return b===null&&(p.lanes=0),[i.memoizedState,p.dispatch]}function P1(i){var l=fn(),u=l.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=i;var p=u.dispatch,b=u.pending,_=l.memoizedState;if(b!==null){u.pending=null;var N=b=b.next;do _=i(_,N.action),N=N.next;while(N!==b);Ws(_,l.memoizedState)||(wn=!0),l.memoizedState=_,l.baseQueue===null&&(l.baseState=_),u.lastRenderedState=_}return[_,p]}function OC(i,l,u){var p=ct,b=fn(),_=Nt;if(_){if(u===void 0)throw Error(s(407));u=u()}else u=l();var N=!Ws((Ht||b).memoizedState,u);if(N&&(b.memoizedState=u,wn=!0),b=b.queue,H1(MC.bind(null,p,b,i),[i]),b.getSnapshot!==l||N||xn!==null&&xn.memoizedState.tag&1){if(p.flags|=2048,Yo(9,{destroy:void 0},BC.bind(null,p,b,u,l),null),qt===null)throw Error(s(349));_||(Ri&127)!==0||RC(p,l,u)}return u}function RC(i,l,u){i.flags|=16384,i={getSnapshot:l,value:u},l=ct.updateQueue,l===null?(l=gp(),ct.updateQueue=l,l.stores=[i]):(u=l.stores,u===null?l.stores=[i]:u.push(i))}function BC(i,l,u,p){l.value=u,l.getSnapshot=p,DC(l)&&LC(i)}function MC(i,l,u){return u(function(){DC(l)&&LC(i)})}function DC(i){var l=i.getSnapshot;i=i.value;try{var u=l();return!Ws(i,u)}catch{return!0}}function LC(i){var l=gl(i,2);l!==null&&Ds(l,i,2)}function z1(i){var l=ms();if(typeof i=="function"){var u=i;if(i=u(),Cl){Se(!0);try{u()}finally{Se(!1)}}}return l.memoizedState=l.baseState=i,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:i},l}function IC(i,l,u,p){return i.baseState=u,I1(i,Ht,typeof p=="function"?p:Bi)}function B8(i,l,u,p,b){if(xp(i))throw Error(s(485));if(i=l.action,i!==null){var _={payload:b,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){_.listeners.push(N)}};P.T!==null?u(!0):_.isTransition=!1,p(_),u=l.pending,u===null?(_.next=l.pending=_,PC(l,_)):(_.next=u.next,l.pending=u.next=_)}}function PC(i,l){var u=l.action,p=l.payload,b=i.state;if(l.isTransition){var _=P.T,N={};P.T=N;try{var L=u(b,p),Y=P.S;Y!==null&&Y(N,L),zC(i,l,L)}catch(le){$1(i,l,le)}finally{_!==null&&N.types!==null&&(_.types=N.types),P.T=_}}else try{_=u(b,p),zC(i,l,_)}catch(le){$1(i,l,le)}}function zC(i,l,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(p){$C(i,l,p)},function(p){return $1(i,l,p)}):$C(i,l,u)}function $C(i,l,u){l.status="fulfilled",l.value=u,HC(l),i.state=u,l=i.pending,l!==null&&(u=l.next,u===l?i.pending=null:(u=u.next,l.next=u,PC(i,u)))}function $1(i,l,u){var p=i.pending;if(i.pending=null,p!==null){p=p.next;do l.status="rejected",l.reason=u,HC(l),l=l.next;while(l!==p)}i.action=null}function HC(i){i=i.listeners;for(var l=0;l<i.length;l++)(0,i[l])()}function UC(i,l){return l}function VC(i,l){if(Nt){var u=qt.formState;if(u!==null){e:{var p=ct;if(Nt){if(Yt){t:{for(var b=Yt,_=xr;b.nodeType!==8;){if(!_){b=null;break t}if(b=Sr(b.nextSibling),b===null){b=null;break t}}_=b.data,b=_==="F!"||_==="F"?b:null}if(b){Yt=Sr(b.nextSibling),p=b.data==="F!";break e}}va(p)}p=!1}p&&(l=u[0])}}return u=ms(),u.memoizedState=u.baseState=l,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:UC,lastRenderedState:l},u.queue=p,u=oN.bind(null,ct,p),p.dispatch=u,p=z1(!1),_=K1.bind(null,ct,!1,p.queue),p=ms(),b={state:l,dispatch:null,action:i,pending:null},p.queue=b,u=B8.bind(null,ct,b,_,u),b.dispatch=u,p.memoizedState=i,[l,u,!1]}function FC(i){var l=fn();return qC(l,Ht,i)}function qC(i,l,u){if(l=I1(i,l,UC)[0],i=vp(Bi)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var p=Qu(l)}catch(N){throw N===Fo?op:N}else p=l;l=fn();var b=l.queue,_=b.dispatch;return u!==l.memoizedState&&(ct.flags|=2048,Yo(9,{destroy:void 0},M8.bind(null,b,u),null)),[p,_,i]}function M8(i,l){i.action=l}function KC(i){var l=fn(),u=Ht;if(u!==null)return qC(l,u,i);fn(),l=l.memoizedState,u=fn();var p=u.queue.dispatch;return u.memoizedState=i,[l,p,!1]}function Yo(i,l,u,p){return i={tag:i,create:u,deps:p,inst:l,next:null},l=ct.updateQueue,l===null&&(l=gp(),ct.updateQueue=l),u=l.lastEffect,u===null?l.lastEffect=i.next=i:(p=u.next,u.next=i,i.next=p,l.lastEffect=i),i}function WC(){return fn().memoizedState}function bp(i,l,u,p){var b=ms();ct.flags|=i,b.memoizedState=Yo(1|l,{destroy:void 0},u,p===void 0?null:p)}function _p(i,l,u,p){var b=fn();p=p===void 0?null:p;var _=b.memoizedState.inst;Ht!==null&&p!==null&&O1(p,Ht.memoizedState.deps)?b.memoizedState=Yo(l,_,u,p):(ct.flags|=i,b.memoizedState=Yo(1|l,_,u,p))}function GC(i,l){bp(8390656,8,i,l)}function H1(i,l){_p(2048,8,i,l)}function D8(i){ct.flags|=4;var l=ct.updateQueue;if(l===null)l=gp(),ct.updateQueue=l,l.events=[i];else{var u=l.events;u===null?l.events=[i]:u.push(i)}}function YC(i){var l=fn().memoizedState;return D8({ref:l,nextImpl:i}),function(){if((Dt&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}function XC(i,l){return _p(4,2,i,l)}function JC(i,l){return _p(4,4,i,l)}function QC(i,l){if(typeof l=="function"){i=i();var u=l(i);return function(){typeof u=="function"?u():l(null)}}if(l!=null)return i=i(),l.current=i,function(){l.current=null}}function ZC(i,l,u){u=u!=null?u.concat([i]):null,_p(4,4,QC.bind(null,l,i),u)}function U1(){}function eN(i,l){var u=fn();l=l===void 0?null:l;var p=u.memoizedState;return l!==null&&O1(l,p[1])?p[0]:(u.memoizedState=[i,l],i)}function tN(i,l){var u=fn();l=l===void 0?null:l;var p=u.memoizedState;if(l!==null&&O1(l,p[1]))return p[0];if(p=i(),Cl){Se(!0);try{i()}finally{Se(!1)}}return u.memoizedState=[p,l],p}function V1(i,l,u){return u===void 0||(Ri&1073741824)!==0&&(kt&261930)===0?i.memoizedState=l:(i.memoizedState=u,i=n4(),ct.lanes|=i,Ea|=i,u)}function nN(i,l,u,p){return Ws(u,l)?u:Ko.current!==null?(i=V1(i,u,p),Ws(i,l)||(wn=!0),i):(Ri&42)===0||(Ri&1073741824)!==0&&(kt&261930)===0?(wn=!0,i.memoizedState=u):(i=n4(),ct.lanes|=i,Ea|=i,l)}function sN(i,l,u,p,b){var _=X.p;X.p=_!==0&&8>_?_:8;var N=P.T,L={};P.T=L,K1(i,!1,l,u);try{var Y=b(),le=P.S;if(le!==null&&le(L,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var me=T8(Y,p);Zu(i,l,me,Zs(i))}else Zu(i,l,p,Zs(i))}catch(ye){Zu(i,l,{then:function(){},status:"rejected",reason:ye},Zs())}finally{X.p=_,N!==null&&L.types!==null&&(N.types=L.types),P.T=N}}function L8(){}function F1(i,l,u,p){if(i.tag!==5)throw Error(s(476));var b=rN(i).queue;sN(i,b,l,U,u===null?L8:function(){return iN(i),u(p)})}function rN(i){var l=i.memoizedState;if(l!==null)return l;l={memoizedState:U,baseState:U,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:U},next:null};var u={};return l.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:u},next:null},i.memoizedState=l,i=i.alternate,i!==null&&(i.memoizedState=l),l}function iN(i){var l=rN(i);l.next===null&&(l=i.alternate.memoizedState),Zu(i,l.next.queue,{},Zs())}function q1(){return Xn(gh)}function aN(){return fn().memoizedState}function lN(){return fn().memoizedState}function I8(i){for(var l=i.return;l!==null;){switch(l.tag){case 24:case 3:var u=Zs();i=xa(u);var p=wa(l,i,u);p!==null&&(Ds(p,l,u),Gu(p,l,u)),l={cache:_1()},i.payload=l;return}l=l.return}}function P8(i,l,u){var p=Zs();u={lane:p,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},xp(i)?cN(l,u):(u=c1(i,l,u,p),u!==null&&(Ds(u,i,p),uN(u,l,p)))}function oN(i,l,u){var p=Zs();Zu(i,l,u,p)}function Zu(i,l,u,p){var b={lane:p,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(xp(i))cN(l,b);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=l.lastRenderedReducer,_!==null))try{var N=l.lastRenderedState,L=_(N,u);if(b.hasEagerState=!0,b.eagerState=L,Ws(L,N))return tp(i,l,b,0),qt===null&&ep(),!1}catch{}if(u=c1(i,l,b,p),u!==null)return Ds(u,i,p),uN(u,l,p),!0}return!1}function K1(i,l,u,p){if(p={lane:2,revertLane:kv(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},xp(i)){if(l)throw Error(s(479))}else l=c1(i,u,p,2),l!==null&&Ds(l,i,2)}function xp(i){var l=i.alternate;return i===ct||l!==null&&l===ct}function cN(i,l){Wo=pp=!0;var u=i.pending;u===null?l.next=l:(l.next=u.next,u.next=l),i.pending=l}function uN(i,l,u){if((u&4194048)!==0){var p=l.lanes;p&=i.pendingLanes,u|=p,l.lanes=u,mk(i,u)}}var eh={readContext:Xn,use:yp,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useLayoutEffect:on,useInsertionEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useSyncExternalStore:on,useId:on,useHostTransitionStatus:on,useFormState:on,useActionState:on,useOptimistic:on,useMemoCache:on,useCacheRefresh:on};eh.useEffectEvent=on;var hN={readContext:Xn,use:yp,useCallback:function(i,l){return ms().memoizedState=[i,l===void 0?null:l],i},useContext:Xn,useEffect:GC,useImperativeHandle:function(i,l,u){u=u!=null?u.concat([i]):null,bp(4194308,4,QC.bind(null,l,i),u)},useLayoutEffect:function(i,l){return bp(4194308,4,i,l)},useInsertionEffect:function(i,l){bp(4,2,i,l)},useMemo:function(i,l){var u=ms();l=l===void 0?null:l;var p=i();if(Cl){Se(!0);try{i()}finally{Se(!1)}}return u.memoizedState=[p,l],p},useReducer:function(i,l,u){var p=ms();if(u!==void 0){var b=u(l);if(Cl){Se(!0);try{u(l)}finally{Se(!1)}}}else b=l;return p.memoizedState=p.baseState=b,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:b},p.queue=i,i=i.dispatch=P8.bind(null,ct,i),[p.memoizedState,i]},useRef:function(i){var l=ms();return i={current:i},l.memoizedState=i},useState:function(i){i=z1(i);var l=i.queue,u=oN.bind(null,ct,l);return l.dispatch=u,[i.memoizedState,u]},useDebugValue:U1,useDeferredValue:function(i,l){var u=ms();return V1(u,i,l)},useTransition:function(){var i=z1(!1);return i=sN.bind(null,ct,i.queue,!0,!1),ms().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,l,u){var p=ct,b=ms();if(Nt){if(u===void 0)throw Error(s(407));u=u()}else{if(u=l(),qt===null)throw Error(s(349));(kt&127)!==0||RC(p,l,u)}b.memoizedState=u;var _={value:u,getSnapshot:l};return b.queue=_,GC(MC.bind(null,p,_,i),[i]),p.flags|=2048,Yo(9,{destroy:void 0},BC.bind(null,p,_,u,l),null),u},useId:function(){var i=ms(),l=qt.identifierPrefix;if(Nt){var u=Zr,p=Qr;u=(p&~(1<<32-Oe(p)-1)).toString(32)+u,l="_"+l+"R_"+u,u=mp++,0<u&&(l+="H"+u.toString(32)),l+="_"}else u=O8++,l="_"+l+"r_"+u.toString(32)+"_";return i.memoizedState=l},useHostTransitionStatus:q1,useFormState:VC,useActionState:VC,useOptimistic:function(i){var l=ms();l.memoizedState=l.baseState=i;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=u,l=K1.bind(null,ct,!0,u),u.dispatch=l,[i,l]},useMemoCache:L1,useCacheRefresh:function(){return ms().memoizedState=I8.bind(null,ct)},useEffectEvent:function(i){var l=ms(),u={impl:i};return l.memoizedState=u,function(){if((Dt&2)!==0)throw Error(s(440));return u.impl.apply(void 0,arguments)}}},W1={readContext:Xn,use:yp,useCallback:eN,useContext:Xn,useEffect:H1,useImperativeHandle:ZC,useInsertionEffect:XC,useLayoutEffect:JC,useMemo:tN,useReducer:vp,useRef:WC,useState:function(){return vp(Bi)},useDebugValue:U1,useDeferredValue:function(i,l){var u=fn();return nN(u,Ht.memoizedState,i,l)},useTransition:function(){var i=vp(Bi)[0],l=fn().memoizedState;return[typeof i=="boolean"?i:Qu(i),l]},useSyncExternalStore:OC,useId:aN,useHostTransitionStatus:q1,useFormState:FC,useActionState:FC,useOptimistic:function(i,l){var u=fn();return IC(u,Ht,i,l)},useMemoCache:L1,useCacheRefresh:lN};W1.useEffectEvent=YC;var dN={readContext:Xn,use:yp,useCallback:eN,useContext:Xn,useEffect:H1,useImperativeHandle:ZC,useInsertionEffect:XC,useLayoutEffect:JC,useMemo:tN,useReducer:P1,useRef:WC,useState:function(){return P1(Bi)},useDebugValue:U1,useDeferredValue:function(i,l){var u=fn();return Ht===null?V1(u,i,l):nN(u,Ht.memoizedState,i,l)},useTransition:function(){var i=P1(Bi)[0],l=fn().memoizedState;return[typeof i=="boolean"?i:Qu(i),l]},useSyncExternalStore:OC,useId:aN,useHostTransitionStatus:q1,useFormState:KC,useActionState:KC,useOptimistic:function(i,l){var u=fn();return Ht!==null?IC(u,Ht,i,l):(u.baseState=i,[i,u.queue.dispatch])},useMemoCache:L1,useCacheRefresh:lN};dN.useEffectEvent=YC;function G1(i,l,u,p){l=i.memoizedState,u=u(p,l),u=u==null?l:m({},l,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Y1={enqueueSetState:function(i,l,u){i=i._reactInternals;var p=Zs(),b=xa(p);b.payload=l,u!=null&&(b.callback=u),l=wa(i,b,p),l!==null&&(Ds(l,i,p),Gu(l,i,p))},enqueueReplaceState:function(i,l,u){i=i._reactInternals;var p=Zs(),b=xa(p);b.tag=1,b.payload=l,u!=null&&(b.callback=u),l=wa(i,b,p),l!==null&&(Ds(l,i,p),Gu(l,i,p))},enqueueForceUpdate:function(i,l){i=i._reactInternals;var u=Zs(),p=xa(u);p.tag=2,l!=null&&(p.callback=l),l=wa(i,p,u),l!==null&&(Ds(l,i,u),Gu(l,i,u))}};function fN(i,l,u,p,b,_,N){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,_,N):l.prototype&&l.prototype.isPureReactComponent?!$u(u,p)||!$u(b,_):!0}function pN(i,l,u,p){i=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(u,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(u,p),l.state!==i&&Y1.enqueueReplaceState(l,l.state,null)}function Nl(i,l){var u=l;if("ref"in l){u={};for(var p in l)p!=="ref"&&(u[p]=l[p])}if(i=i.defaultProps){u===l&&(u=m({},u));for(var b in i)u[b]===void 0&&(u[b]=i[b])}return u}function mN(i){Zf(i)}function gN(i){console.error(i)}function yN(i){Zf(i)}function wp(i,l){try{var u=i.onUncaughtError;u(l.value,{componentStack:l.stack})}catch(p){setTimeout(function(){throw p})}}function vN(i,l,u){try{var p=i.onCaughtError;p(u.value,{componentStack:u.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function X1(i,l,u){return u=xa(u),u.tag=3,u.payload={element:null},u.callback=function(){wp(i,l)},u}function bN(i){return i=xa(i),i.tag=3,i}function _N(i,l,u,p){var b=u.type.getDerivedStateFromError;if(typeof b=="function"){var _=p.value;i.payload=function(){return b(_)},i.callback=function(){vN(l,u,p)}}var N=u.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(i.callback=function(){vN(l,u,p),typeof b!="function"&&(Aa===null?Aa=new Set([this]):Aa.add(this));var L=p.stack;this.componentDidCatch(p.value,{componentStack:L!==null?L:""})})}function z8(i,l,u,p,b){if(u.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(l=u.alternate,l!==null&&Ho(l,u,b,!0),u=Ys.current,u!==null){switch(u.tag){case 31:case 13:return wr===null?Mp():u.alternate===null&&cn===0&&(cn=3),u.flags&=-257,u.flags|=65536,u.lanes=b,p===cp?u.flags|=16384:(l=u.updateQueue,l===null?u.updateQueue=new Set([p]):l.add(p),xv(i,p,b)),!1;case 22:return u.flags|=65536,p===cp?u.flags|=16384:(l=u.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([p])},u.updateQueue=l):(u=l.retryQueue,u===null?l.retryQueue=new Set([p]):u.add(p)),xv(i,p,b)),!1}throw Error(s(435,u.tag))}return xv(i,p,b),Mp(),!1}if(Nt)return l=Ys.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=b,p!==m1&&(i=Error(s(422),{cause:p}),Vu(vr(i,u)))):(p!==m1&&(l=Error(s(423),{cause:p}),Vu(vr(l,u))),i=i.current.alternate,i.flags|=65536,b&=-b,i.lanes|=b,p=vr(p,u),b=X1(i.stateNode,p,b),N1(i,b),cn!==4&&(cn=2)),!1;var _=Error(s(520),{cause:p});if(_=vr(_,u),oh===null?oh=[_]:oh.push(_),cn!==4&&(cn=2),l===null)return!0;p=vr(p,u),u=l;do{switch(u.tag){case 3:return u.flags|=65536,i=b&-b,u.lanes|=i,i=X1(u.stateNode,p,i),N1(u,i),!1;case 1:if(l=u.type,_=u.stateNode,(u.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Aa===null||!Aa.has(_))))return u.flags|=65536,b&=-b,u.lanes|=b,b=bN(b),_N(b,i,u,p),N1(u,b),!1}u=u.return}while(u!==null);return!1}var J1=Error(s(461)),wn=!1;function Jn(i,l,u,p){l.child=i===null?kC(l,null,u,p):kl(l,i.child,u,p)}function xN(i,l,u,p,b){u=u.render;var _=l.ref;if("ref"in p){var N={};for(var L in p)L!=="ref"&&(N[L]=p[L])}else N=p;return _l(l),p=R1(i,l,u,N,_,b),L=B1(),i!==null&&!wn?(M1(i,l,b),Mi(i,l,b)):(Nt&&L&&f1(l),l.flags|=1,Jn(i,l,p,b),l.child)}function wN(i,l,u,p,b){if(i===null){var _=u.type;return typeof _=="function"&&!u1(_)&&_.defaultProps===void 0&&u.compare===null?(l.tag=15,l.type=_,SN(i,l,_,p,b)):(i=sp(u.type,null,p,l,l.mode,b),i.ref=l.ref,i.return=l,l.child=i)}if(_=i.child,!iv(i,b)){var N=_.memoizedProps;if(u=u.compare,u=u!==null?u:$u,u(N,p)&&i.ref===l.ref)return Mi(i,l,b)}return l.flags|=1,i=Ai(_,p),i.ref=l.ref,i.return=l,l.child=i}function SN(i,l,u,p,b){if(i!==null){var _=i.memoizedProps;if($u(_,p)&&i.ref===l.ref)if(wn=!1,l.pendingProps=p=_,iv(i,b))(i.flags&131072)!==0&&(wn=!0);else return l.lanes=i.lanes,Mi(i,l,b)}return Q1(i,l,u,p,b)}function kN(i,l,u,p){var b=p.children,_=i!==null?i.memoizedState:null;if(i===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((l.flags&128)!==0){if(_=_!==null?_.baseLanes|u:u,i!==null){for(p=l.child=i.child,b=0;p!==null;)b=b|p.lanes|p.childLanes,p=p.sibling;p=b&~_}else p=0,l.child=null;return CN(i,l,_,u,p)}if((u&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},i!==null&&lp(l,_!==null?_.cachePool:null),_!==null?EC(l,_):A1(),AC(l);else return p=l.lanes=536870912,CN(i,l,_!==null?_.baseLanes|u:u,u,p)}else _!==null?(lp(l,_.cachePool),EC(l,_),ka(),l.memoizedState=null):(i!==null&&lp(l,null),A1(),ka());return Jn(i,l,b,u),l.child}function th(i,l){return i!==null&&i.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function CN(i,l,u,p,b){var _=w1();return _=_===null?null:{parent:_n._currentValue,pool:_},l.memoizedState={baseLanes:u,cachePool:_},i!==null&&lp(l,null),A1(),AC(l),i!==null&&Ho(i,l,p,!0),l.childLanes=b,null}function Sp(i,l){return l=Cp({mode:l.mode,children:l.children},i.mode),l.ref=i.ref,i.child=l,l.return=i,l}function NN(i,l,u){return kl(l,i.child,null,u),i=Sp(l,l.pendingProps),i.flags|=2,Xs(l),l.memoizedState=null,i}function $8(i,l,u){var p=l.pendingProps,b=(l.flags&128)!==0;if(l.flags&=-129,i===null){if(Nt){if(p.mode==="hidden")return i=Sp(l,p),l.lanes=536870912,th(null,i);if(T1(l),(i=Yt)?(i=P4(i,xr),i=i!==null&&i.data==="&"?i:null,i!==null&&(l.memoizedState={dehydrated:i,treeContext:ga!==null?{id:Qr,overflow:Zr}:null,retryLane:536870912,hydrationErrors:null},u=cC(i),u.return=l,l.child=u,Yn=l,Yt=null)):i=null,i===null)throw va(l);return l.lanes=536870912,null}return Sp(l,p)}var _=i.memoizedState;if(_!==null){var N=_.dehydrated;if(T1(l),b)if(l.flags&256)l.flags&=-257,l=NN(i,l,u);else if(l.memoizedState!==null)l.child=i.child,l.flags|=128,l=null;else throw Error(s(558));else if(wn||Ho(i,l,u,!1),b=(u&i.childLanes)!==0,wn||b){if(p=qt,p!==null&&(N=gk(p,u),N!==0&&N!==_.retryLane))throw _.retryLane=N,gl(i,N),Ds(p,i,N),J1;Mp(),l=NN(i,l,u)}else i=_.treeContext,Yt=Sr(N.nextSibling),Yn=l,Nt=!0,ya=null,xr=!1,i!==null&&dC(l,i),l=Sp(l,p),l.flags|=4096;return l}return i=Ai(i.child,{mode:p.mode,children:p.children}),i.ref=l.ref,l.child=i,i.return=l,i}function kp(i,l){var u=l.ref;if(u===null)i!==null&&i.ref!==null&&(l.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(s(284));(i===null||i.ref!==u)&&(l.flags|=4194816)}}function Q1(i,l,u,p,b){return _l(l),u=R1(i,l,u,p,void 0,b),p=B1(),i!==null&&!wn?(M1(i,l,b),Mi(i,l,b)):(Nt&&p&&f1(l),l.flags|=1,Jn(i,l,u,b),l.child)}function EN(i,l,u,p,b,_){return _l(l),l.updateQueue=null,u=TC(l,p,u,b),jC(i),p=B1(),i!==null&&!wn?(M1(i,l,_),Mi(i,l,_)):(Nt&&p&&f1(l),l.flags|=1,Jn(i,l,u,_),l.child)}function AN(i,l,u,p,b){if(_l(l),l.stateNode===null){var _=Io,N=u.contextType;typeof N=="object"&&N!==null&&(_=Xn(N)),_=new u(p,_),l.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Y1,l.stateNode=_,_._reactInternals=l,_=l.stateNode,_.props=p,_.state=l.memoizedState,_.refs={},k1(l),N=u.contextType,_.context=typeof N=="object"&&N!==null?Xn(N):Io,_.state=l.memoizedState,N=u.getDerivedStateFromProps,typeof N=="function"&&(G1(l,u,N,p),_.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(N=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),N!==_.state&&Y1.enqueueReplaceState(_,_.state,null),Xu(l,p,_,b),Yu(),_.state=l.memoizedState),typeof _.componentDidMount=="function"&&(l.flags|=4194308),p=!0}else if(i===null){_=l.stateNode;var L=l.memoizedProps,Y=Nl(u,L);_.props=Y;var le=_.context,me=u.contextType;N=Io,typeof me=="object"&&me!==null&&(N=Xn(me));var ye=u.getDerivedStateFromProps;me=typeof ye=="function"||typeof _.getSnapshotBeforeUpdate=="function",L=l.pendingProps!==L,me||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(L||le!==N)&&pN(l,_,p,N),_a=!1;var ce=l.memoizedState;_.state=ce,Xu(l,p,_,b),Yu(),le=l.memoizedState,L||ce!==le||_a?(typeof ye=="function"&&(G1(l,u,ye,p),le=l.memoizedState),(Y=_a||fN(l,u,Y,p,ce,le,N))?(me||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(l.flags|=4194308)):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=le),_.props=p,_.state=le,_.context=N,p=Y):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{_=l.stateNode,C1(i,l),N=l.memoizedProps,me=Nl(u,N),_.props=me,ye=l.pendingProps,ce=_.context,le=u.contextType,Y=Io,typeof le=="object"&&le!==null&&(Y=Xn(le)),L=u.getDerivedStateFromProps,(le=typeof L=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(N!==ye||ce!==Y)&&pN(l,_,p,Y),_a=!1,ce=l.memoizedState,_.state=ce,Xu(l,p,_,b),Yu();var he=l.memoizedState;N!==ye||ce!==he||_a||i!==null&&i.dependencies!==null&&ip(i.dependencies)?(typeof L=="function"&&(G1(l,u,L,p),he=l.memoizedState),(me=_a||fN(l,u,me,p,ce,he,Y)||i!==null&&i.dependencies!==null&&ip(i.dependencies))?(le||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(p,he,Y),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(p,he,Y)),typeof _.componentDidUpdate=="function"&&(l.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof _.componentDidUpdate!="function"||N===i.memoizedProps&&ce===i.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&ce===i.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=he),_.props=p,_.state=he,_.context=Y,p=me):(typeof _.componentDidUpdate!="function"||N===i.memoizedProps&&ce===i.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&ce===i.memoizedState||(l.flags|=1024),p=!1)}return _=p,kp(i,l),p=(l.flags&128)!==0,_||p?(_=l.stateNode,u=p&&typeof u.getDerivedStateFromError!="function"?null:_.render(),l.flags|=1,i!==null&&p?(l.child=kl(l,i.child,null,b),l.child=kl(l,null,u,b)):Jn(i,l,u,b),l.memoizedState=_.state,i=l.child):i=Mi(i,l,b),i}function jN(i,l,u,p){return vl(),l.flags|=256,Jn(i,l,u,p),l.child}var Z1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ev(i){return{baseLanes:i,cachePool:vC()}}function tv(i,l,u){return i=i!==null?i.childLanes&~u:0,l&&(i|=Qs),i}function TN(i,l,u){var p=l.pendingProps,b=!1,_=(l.flags&128)!==0,N;if((N=_)||(N=i!==null&&i.memoizedState===null?!1:(dn.current&2)!==0),N&&(b=!0,l.flags&=-129),N=(l.flags&32)!==0,l.flags&=-33,i===null){if(Nt){if(b?Sa(l):ka(),(i=Yt)?(i=P4(i,xr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(l.memoizedState={dehydrated:i,treeContext:ga!==null?{id:Qr,overflow:Zr}:null,retryLane:536870912,hydrationErrors:null},u=cC(i),u.return=l,l.child=u,Yn=l,Yt=null)):i=null,i===null)throw va(l);return Iv(i)?l.lanes=32:l.lanes=536870912,null}var L=p.children;return p=p.fallback,b?(ka(),b=l.mode,L=Cp({mode:"hidden",children:L},b),p=yl(p,b,u,null),L.return=l,p.return=l,L.sibling=p,l.child=L,p=l.child,p.memoizedState=ev(u),p.childLanes=tv(i,N,u),l.memoizedState=Z1,th(null,p)):(Sa(l),nv(l,L))}var Y=i.memoizedState;if(Y!==null&&(L=Y.dehydrated,L!==null)){if(_)l.flags&256?(Sa(l),l.flags&=-257,l=sv(i,l,u)):l.memoizedState!==null?(ka(),l.child=i.child,l.flags|=128,l=null):(ka(),L=p.fallback,b=l.mode,p=Cp({mode:"visible",children:p.children},b),L=yl(L,b,u,null),L.flags|=2,p.return=l,L.return=l,p.sibling=L,l.child=p,kl(l,i.child,null,u),p=l.child,p.memoizedState=ev(u),p.childLanes=tv(i,N,u),l.memoizedState=Z1,l=th(null,p));else if(Sa(l),Iv(L)){if(N=L.nextSibling&&L.nextSibling.dataset,N)var le=N.dgst;N=le,p=Error(s(419)),p.stack="",p.digest=N,Vu({value:p,source:null,stack:null}),l=sv(i,l,u)}else if(wn||Ho(i,l,u,!1),N=(u&i.childLanes)!==0,wn||N){if(N=qt,N!==null&&(p=gk(N,u),p!==0&&p!==Y.retryLane))throw Y.retryLane=p,gl(i,p),Ds(N,i,p),J1;Lv(L)||Mp(),l=sv(i,l,u)}else Lv(L)?(l.flags|=192,l.child=i.child,l=null):(i=Y.treeContext,Yt=Sr(L.nextSibling),Yn=l,Nt=!0,ya=null,xr=!1,i!==null&&dC(l,i),l=nv(l,p.children),l.flags|=4096);return l}return b?(ka(),L=p.fallback,b=l.mode,Y=i.child,le=Y.sibling,p=Ai(Y,{mode:"hidden",children:p.children}),p.subtreeFlags=Y.subtreeFlags&65011712,le!==null?L=Ai(le,L):(L=yl(L,b,u,null),L.flags|=2),L.return=l,p.return=l,p.sibling=L,l.child=p,th(null,p),p=l.child,L=i.child.memoizedState,L===null?L=ev(u):(b=L.cachePool,b!==null?(Y=_n._currentValue,b=b.parent!==Y?{parent:Y,pool:Y}:b):b=vC(),L={baseLanes:L.baseLanes|u,cachePool:b}),p.memoizedState=L,p.childLanes=tv(i,N,u),l.memoizedState=Z1,th(i.child,p)):(Sa(l),u=i.child,i=u.sibling,u=Ai(u,{mode:"visible",children:p.children}),u.return=l,u.sibling=null,i!==null&&(N=l.deletions,N===null?(l.deletions=[i],l.flags|=16):N.push(i)),l.child=u,l.memoizedState=null,u)}function nv(i,l){return l=Cp({mode:"visible",children:l},i.mode),l.return=i,i.child=l}function Cp(i,l){return i=Gs(22,i,null,l),i.lanes=0,i}function sv(i,l,u){return kl(l,i.child,null,u),i=nv(l,l.pendingProps.children),i.flags|=2,l.memoizedState=null,i}function ON(i,l,u){i.lanes|=l;var p=i.alternate;p!==null&&(p.lanes|=l),v1(i.return,l,u)}function rv(i,l,u,p,b,_){var N=i.memoizedState;N===null?i.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:b,treeForkCount:_}:(N.isBackwards=l,N.rendering=null,N.renderingStartTime=0,N.last=p,N.tail=u,N.tailMode=b,N.treeForkCount=_)}function RN(i,l,u){var p=l.pendingProps,b=p.revealOrder,_=p.tail;p=p.children;var N=dn.current,L=(N&2)!==0;if(L?(N=N&1|2,l.flags|=128):N&=1,E(dn,N),Jn(i,l,p,u),p=Nt?Uu:0,!L&&i!==null&&(i.flags&128)!==0)e:for(i=l.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&ON(i,u,l);else if(i.tag===19)ON(i,u,l);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===l)break e;for(;i.sibling===null;){if(i.return===null||i.return===l)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(b){case"forwards":for(u=l.child,b=null;u!==null;)i=u.alternate,i!==null&&fp(i)===null&&(b=u),u=u.sibling;u=b,u===null?(b=l.child,l.child=null):(b=u.sibling,u.sibling=null),rv(l,!1,b,u,_,p);break;case"backwards":case"unstable_legacy-backwards":for(u=null,b=l.child,l.child=null;b!==null;){if(i=b.alternate,i!==null&&fp(i)===null){l.child=b;break}i=b.sibling,b.sibling=u,u=b,b=i}rv(l,!0,u,null,_,p);break;case"together":rv(l,!1,null,null,void 0,p);break;default:l.memoizedState=null}return l.child}function Mi(i,l,u){if(i!==null&&(l.dependencies=i.dependencies),Ea|=l.lanes,(u&l.childLanes)===0)if(i!==null){if(Ho(i,l,u,!1),(u&l.childLanes)===0)return null}else return null;if(i!==null&&l.child!==i.child)throw Error(s(153));if(l.child!==null){for(i=l.child,u=Ai(i,i.pendingProps),l.child=u,u.return=l;i.sibling!==null;)i=i.sibling,u=u.sibling=Ai(i,i.pendingProps),u.return=l;u.sibling=null}return l.child}function iv(i,l){return(i.lanes&l)!==0?!0:(i=i.dependencies,!!(i!==null&&ip(i)))}function H8(i,l,u){switch(l.tag){case 3:we(l,l.stateNode.containerInfo),ba(l,_n,i.memoizedState.cache),vl();break;case 27:case 5:et(l);break;case 4:we(l,l.stateNode.containerInfo);break;case 10:ba(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,T1(l),null;break;case 13:var p=l.memoizedState;if(p!==null)return p.dehydrated!==null?(Sa(l),l.flags|=128,null):(u&l.child.childLanes)!==0?TN(i,l,u):(Sa(l),i=Mi(i,l,u),i!==null?i.sibling:null);Sa(l);break;case 19:var b=(i.flags&128)!==0;if(p=(u&l.childLanes)!==0,p||(Ho(i,l,u,!1),p=(u&l.childLanes)!==0),b){if(p)return RN(i,l,u);l.flags|=128}if(b=l.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),E(dn,dn.current),p)break;return null;case 22:return l.lanes=0,kN(i,l,u,l.pendingProps);case 24:ba(l,_n,i.memoizedState.cache)}return Mi(i,l,u)}function BN(i,l,u){if(i!==null)if(i.memoizedProps!==l.pendingProps)wn=!0;else{if(!iv(i,u)&&(l.flags&128)===0)return wn=!1,H8(i,l,u);wn=(i.flags&131072)!==0}else wn=!1,Nt&&(l.flags&1048576)!==0&&hC(l,Uu,l.index);switch(l.lanes=0,l.tag){case 16:e:{var p=l.pendingProps;if(i=wl(l.elementType),l.type=i,typeof i=="function")u1(i)?(p=Nl(i,p),l.tag=1,l=AN(null,l,i,p,u)):(l.tag=0,l=Q1(null,l,i,p,u));else{if(i!=null){var b=i.$$typeof;if(b===B){l.tag=11,l=xN(null,l,i,p,u);break e}else if(b===H){l.tag=14,l=wN(null,l,i,p,u);break e}}throw l=J(i)||i,Error(s(306,l,""))}}return l;case 0:return Q1(i,l,l.type,l.pendingProps,u);case 1:return p=l.type,b=Nl(p,l.pendingProps),AN(i,l,p,b,u);case 3:e:{if(we(l,l.stateNode.containerInfo),i===null)throw Error(s(387));p=l.pendingProps;var _=l.memoizedState;b=_.element,C1(i,l),Xu(l,p,null,u);var N=l.memoizedState;if(p=N.cache,ba(l,_n,p),p!==_.cache&&b1(l,[_n],u,!0),Yu(),p=N.element,_.isDehydrated)if(_={element:p,isDehydrated:!1,cache:N.cache},l.updateQueue.baseState=_,l.memoizedState=_,l.flags&256){l=jN(i,l,p,u);break e}else if(p!==b){b=vr(Error(s(424)),l),Vu(b),l=jN(i,l,p,u);break e}else for(i=l.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,Yt=Sr(i.firstChild),Yn=l,Nt=!0,ya=null,xr=!0,u=kC(l,null,p,u),l.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(vl(),p===b){l=Mi(i,l,u);break e}Jn(i,l,p,u)}l=l.child}return l;case 26:return kp(i,l),i===null?(u=F4(l.type,null,l.pendingProps,null))?l.memoizedState=u:Nt||(u=l.type,i=l.pendingProps,p=Hp(ne.current).createElement(u),p[Gn]=l,p[js]=i,Qn(p,u,i),zn(p),l.stateNode=p):l.memoizedState=F4(l.type,i.memoizedProps,l.pendingProps,i.memoizedState),null;case 27:return et(l),i===null&&Nt&&(p=l.stateNode=H4(l.type,l.pendingProps,ne.current),Yn=l,xr=!0,b=Yt,Ra(l.type)?(Pv=b,Yt=Sr(p.firstChild)):Yt=b),Jn(i,l,l.pendingProps.children,u),kp(i,l),i===null&&(l.flags|=4194304),l.child;case 5:return i===null&&Nt&&((b=p=Yt)&&(p=yL(p,l.type,l.pendingProps,xr),p!==null?(l.stateNode=p,Yn=l,Yt=Sr(p.firstChild),xr=!1,b=!0):b=!1),b||va(l)),et(l),b=l.type,_=l.pendingProps,N=i!==null?i.memoizedProps:null,p=_.children,Bv(b,_)?p=null:N!==null&&Bv(b,N)&&(l.flags|=32),l.memoizedState!==null&&(b=R1(i,l,R8,null,null,u),gh._currentValue=b),kp(i,l),Jn(i,l,p,u),l.child;case 6:return i===null&&Nt&&((i=u=Yt)&&(u=vL(u,l.pendingProps,xr),u!==null?(l.stateNode=u,Yn=l,Yt=null,i=!0):i=!1),i||va(l)),null;case 13:return TN(i,l,u);case 4:return we(l,l.stateNode.containerInfo),p=l.pendingProps,i===null?l.child=kl(l,null,p,u):Jn(i,l,p,u),l.child;case 11:return xN(i,l,l.type,l.pendingProps,u);case 7:return Jn(i,l,l.pendingProps,u),l.child;case 8:return Jn(i,l,l.pendingProps.children,u),l.child;case 12:return Jn(i,l,l.pendingProps.children,u),l.child;case 10:return p=l.pendingProps,ba(l,l.type,p.value),Jn(i,l,p.children,u),l.child;case 9:return b=l.type._context,p=l.pendingProps.children,_l(l),b=Xn(b),p=p(b),l.flags|=1,Jn(i,l,p,u),l.child;case 14:return wN(i,l,l.type,l.pendingProps,u);case 15:return SN(i,l,l.type,l.pendingProps,u);case 19:return RN(i,l,u);case 31:return $8(i,l,u);case 22:return kN(i,l,u,l.pendingProps);case 24:return _l(l),p=Xn(_n),i===null?(b=w1(),b===null&&(b=qt,_=_1(),b.pooledCache=_,_.refCount++,_!==null&&(b.pooledCacheLanes|=u),b=_),l.memoizedState={parent:p,cache:b},k1(l),ba(l,_n,b)):((i.lanes&u)!==0&&(C1(i,l),Xu(l,null,null,u),Yu()),b=i.memoizedState,_=l.memoizedState,b.parent!==p?(b={parent:p,cache:p},l.memoizedState=b,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=b),ba(l,_n,p)):(p=_.cache,ba(l,_n,p),p!==b.cache&&b1(l,[_n],u,!0))),Jn(i,l,l.pendingProps.children,u),l.child;case 29:throw l.pendingProps}throw Error(s(156,l.tag))}function Di(i){i.flags|=4}function av(i,l,u,p,b){if((l=(i.mode&32)!==0)&&(l=!1),l){if(i.flags|=16777216,(b&335544128)===b)if(i.stateNode.complete)i.flags|=8192;else if(a4())i.flags|=8192;else throw Sl=cp,S1}else i.flags&=-16777217}function MN(i,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Y4(l))if(a4())i.flags|=8192;else throw Sl=cp,S1}function Np(i,l){l!==null&&(i.flags|=4),i.flags&16384&&(l=i.tag!==22?As():536870912,i.lanes|=l,Zo|=l)}function nh(i,l){if(!Nt)switch(i.tailMode){case"hidden":l=i.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?l||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function Xt(i){var l=i.alternate!==null&&i.alternate.child===i.child,u=0,p=0;if(l)for(var b=i.child;b!==null;)u|=b.lanes|b.childLanes,p|=b.subtreeFlags&65011712,p|=b.flags&65011712,b.return=i,b=b.sibling;else for(b=i.child;b!==null;)u|=b.lanes|b.childLanes,p|=b.subtreeFlags,p|=b.flags,b.return=i,b=b.sibling;return i.subtreeFlags|=p,i.childLanes=u,l}function U8(i,l,u){var p=l.pendingProps;switch(p1(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(l),null;case 1:return Xt(l),null;case 3:return u=l.stateNode,p=null,i!==null&&(p=i.memoizedState.cache),l.memoizedState.cache!==p&&(l.flags|=2048),Oi(_n),Ee(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&($o(l)?Di(l):i===null||i.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,g1())),Xt(l),null;case 26:var b=l.type,_=l.memoizedState;return i===null?(Di(l),_!==null?(Xt(l),MN(l,_)):(Xt(l),av(l,b,null,p,u))):_?_!==i.memoizedState?(Di(l),Xt(l),MN(l,_)):(Xt(l),l.flags&=-16777217):(i=i.memoizedProps,i!==p&&Di(l),Xt(l),av(l,b,i,p,u)),null;case 27:if(Ce(l),u=ne.current,b=l.type,i!==null&&l.stateNode!=null)i.memoizedProps!==p&&Di(l);else{if(!p){if(l.stateNode===null)throw Error(s(166));return Xt(l),null}i=Z.current,$o(l)?fC(l):(i=H4(b,p,u),l.stateNode=i,Di(l))}return Xt(l),null;case 5:if(Ce(l),b=l.type,i!==null&&l.stateNode!=null)i.memoizedProps!==p&&Di(l);else{if(!p){if(l.stateNode===null)throw Error(s(166));return Xt(l),null}if(_=Z.current,$o(l))fC(l);else{var N=Hp(ne.current);switch(_){case 1:_=N.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:_=N.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":_=N.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":_=N.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":_=N.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof p.is=="string"?N.createElement("select",{is:p.is}):N.createElement("select"),p.multiple?_.multiple=!0:p.size&&(_.size=p.size);break;default:_=typeof p.is=="string"?N.createElement(b,{is:p.is}):N.createElement(b)}}_[Gn]=l,_[js]=p;e:for(N=l.child;N!==null;){if(N.tag===5||N.tag===6)_.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===l)break e;for(;N.sibling===null;){if(N.return===null||N.return===l)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}l.stateNode=_;e:switch(Qn(_,b,p),b){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&Di(l)}}return Xt(l),av(l,l.type,i===null?null:i.memoizedProps,l.pendingProps,u),null;case 6:if(i&&l.stateNode!=null)i.memoizedProps!==p&&Di(l);else{if(typeof p!="string"&&l.stateNode===null)throw Error(s(166));if(i=ne.current,$o(l)){if(i=l.stateNode,u=l.memoizedProps,p=null,b=Yn,b!==null)switch(b.tag){case 27:case 5:p=b.memoizedProps}i[Gn]=l,i=!!(i.nodeValue===u||p!==null&&p.suppressHydrationWarning===!0||T4(i.nodeValue,u)),i||va(l,!0)}else i=Hp(i).createTextNode(p),i[Gn]=l,l.stateNode=i}return Xt(l),null;case 31:if(u=l.memoizedState,i===null||i.memoizedState!==null){if(p=$o(l),u!==null){if(i===null){if(!p)throw Error(s(318));if(i=l.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[Gn]=l}else vl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Xt(l),i=!1}else u=g1(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=u),i=!0;if(!i)return l.flags&256?(Xs(l),l):(Xs(l),null);if((l.flags&128)!==0)throw Error(s(558))}return Xt(l),null;case 13:if(p=l.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(b=$o(l),p!==null&&p.dehydrated!==null){if(i===null){if(!b)throw Error(s(318));if(b=l.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(s(317));b[Gn]=l}else vl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Xt(l),b=!1}else b=g1(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=b),b=!0;if(!b)return l.flags&256?(Xs(l),l):(Xs(l),null)}return Xs(l),(l.flags&128)!==0?(l.lanes=u,l):(u=p!==null,i=i!==null&&i.memoizedState!==null,u&&(p=l.child,b=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(b=p.alternate.memoizedState.cachePool.pool),_=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(_=p.memoizedState.cachePool.pool),_!==b&&(p.flags|=2048)),u!==i&&u&&(l.child.flags|=8192),Np(l,l.updateQueue),Xt(l),null);case 4:return Ee(),i===null&&Av(l.stateNode.containerInfo),Xt(l),null;case 10:return Oi(l.type),Xt(l),null;case 19:if(V(dn),p=l.memoizedState,p===null)return Xt(l),null;if(b=(l.flags&128)!==0,_=p.rendering,_===null)if(b)nh(p,!1);else{if(cn!==0||i!==null&&(i.flags&128)!==0)for(i=l.child;i!==null;){if(_=fp(i),_!==null){for(l.flags|=128,nh(p,!1),i=_.updateQueue,l.updateQueue=i,Np(l,i),l.subtreeFlags=0,i=u,u=l.child;u!==null;)oC(u,i),u=u.sibling;return E(dn,dn.current&1|2),Nt&&ji(l,p.treeForkCount),l.child}i=i.sibling}p.tail!==null&&Rt()>Op&&(l.flags|=128,b=!0,nh(p,!1),l.lanes=4194304)}else{if(!b)if(i=fp(_),i!==null){if(l.flags|=128,b=!0,i=i.updateQueue,l.updateQueue=i,Np(l,i),nh(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!Nt)return Xt(l),null}else 2*Rt()-p.renderingStartTime>Op&&u!==536870912&&(l.flags|=128,b=!0,nh(p,!1),l.lanes=4194304);p.isBackwards?(_.sibling=l.child,l.child=_):(i=p.last,i!==null?i.sibling=_:l.child=_,p.last=_)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=Rt(),i.sibling=null,u=dn.current,E(dn,b?u&1|2:u&1),Nt&&ji(l,p.treeForkCount),i):(Xt(l),null);case 22:case 23:return Xs(l),j1(),p=l.memoizedState!==null,i!==null?i.memoizedState!==null!==p&&(l.flags|=8192):p&&(l.flags|=8192),p?(u&536870912)!==0&&(l.flags&128)===0&&(Xt(l),l.subtreeFlags&6&&(l.flags|=8192)):Xt(l),u=l.updateQueue,u!==null&&Np(l,u.retryQueue),u=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==u&&(l.flags|=2048),i!==null&&V(xl),null;case 24:return u=null,i!==null&&(u=i.memoizedState.cache),l.memoizedState.cache!==u&&(l.flags|=2048),Oi(_n),Xt(l),null;case 25:return null;case 30:return null}throw Error(s(156,l.tag))}function V8(i,l){switch(p1(l),l.tag){case 1:return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 3:return Oi(_n),Ee(),i=l.flags,(i&65536)!==0&&(i&128)===0?(l.flags=i&-65537|128,l):null;case 26:case 27:case 5:return Ce(l),null;case 31:if(l.memoizedState!==null){if(Xs(l),l.alternate===null)throw Error(s(340));vl()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 13:if(Xs(l),i=l.memoizedState,i!==null&&i.dehydrated!==null){if(l.alternate===null)throw Error(s(340));vl()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 19:return V(dn),null;case 4:return Ee(),null;case 10:return Oi(l.type),null;case 22:case 23:return Xs(l),j1(),i!==null&&V(xl),i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 24:return Oi(_n),null;case 25:return null;default:return null}}function DN(i,l){switch(p1(l),l.tag){case 3:Oi(_n),Ee();break;case 26:case 27:case 5:Ce(l);break;case 4:Ee();break;case 31:l.memoizedState!==null&&Xs(l);break;case 13:Xs(l);break;case 19:V(dn);break;case 10:Oi(l.type);break;case 22:case 23:Xs(l),j1(),i!==null&&V(xl);break;case 24:Oi(_n)}}function sh(i,l){try{var u=l.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var b=p.next;u=b;do{if((u.tag&i)===i){p=void 0;var _=u.create,N=u.inst;p=_(),N.destroy=p}u=u.next}while(u!==b)}}catch(L){$t(l,l.return,L)}}function Ca(i,l,u){try{var p=l.updateQueue,b=p!==null?p.lastEffect:null;if(b!==null){var _=b.next;p=_;do{if((p.tag&i)===i){var N=p.inst,L=N.destroy;if(L!==void 0){N.destroy=void 0,b=l;var Y=u,le=L;try{le()}catch(me){$t(b,Y,me)}}}p=p.next}while(p!==_)}}catch(me){$t(l,l.return,me)}}function LN(i){var l=i.updateQueue;if(l!==null){var u=i.stateNode;try{NC(l,u)}catch(p){$t(i,i.return,p)}}}function IN(i,l,u){u.props=Nl(i.type,i.memoizedProps),u.state=i.memoizedState;try{u.componentWillUnmount()}catch(p){$t(i,l,p)}}function rh(i,l){try{var u=i.ref;if(u!==null){switch(i.tag){case 26:case 27:case 5:var p=i.stateNode;break;case 30:p=i.stateNode;break;default:p=i.stateNode}typeof u=="function"?i.refCleanup=u(p):u.current=p}}catch(b){$t(i,l,b)}}function ei(i,l){var u=i.ref,p=i.refCleanup;if(u!==null)if(typeof p=="function")try{p()}catch(b){$t(i,l,b)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(b){$t(i,l,b)}else u.current=null}function PN(i){var l=i.type,u=i.memoizedProps,p=i.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":u.autoFocus&&p.focus();break e;case"img":u.src?p.src=u.src:u.srcSet&&(p.srcset=u.srcSet)}}catch(b){$t(i,i.return,b)}}function lv(i,l,u){try{var p=i.stateNode;hL(p,i.type,u,l),p[js]=l}catch(b){$t(i,i.return,b)}}function zN(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ra(i.type)||i.tag===4}function ov(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||zN(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ra(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function cv(i,l,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,l?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(i,l):(l=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,l.appendChild(i),u=u._reactRootContainer,u!=null||l.onclick!==null||(l.onclick=Ni));else if(p!==4&&(p===27&&Ra(i.type)&&(u=i.stateNode,l=null),i=i.child,i!==null))for(cv(i,l,u),i=i.sibling;i!==null;)cv(i,l,u),i=i.sibling}function Ep(i,l,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,l?u.insertBefore(i,l):u.appendChild(i);else if(p!==4&&(p===27&&Ra(i.type)&&(u=i.stateNode),i=i.child,i!==null))for(Ep(i,l,u),i=i.sibling;i!==null;)Ep(i,l,u),i=i.sibling}function $N(i){var l=i.stateNode,u=i.memoizedProps;try{for(var p=i.type,b=l.attributes;b.length;)l.removeAttributeNode(b[0]);Qn(l,p,u),l[Gn]=i,l[js]=u}catch(_){$t(i,i.return,_)}}var Li=!1,Sn=!1,uv=!1,HN=typeof WeakSet=="function"?WeakSet:Set,$n=null;function F8(i,l){if(i=i.containerInfo,Ov=Gp,i=Zk(i),s1(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var b=p.anchorOffset,_=p.focusNode;p=p.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var N=0,L=-1,Y=-1,le=0,me=0,ye=i,ce=null;t:for(;;){for(var he;ye!==u||b!==0&&ye.nodeType!==3||(L=N+b),ye!==_||p!==0&&ye.nodeType!==3||(Y=N+p),ye.nodeType===3&&(N+=ye.nodeValue.length),(he=ye.firstChild)!==null;)ce=ye,ye=he;for(;;){if(ye===i)break t;if(ce===u&&++le===b&&(L=N),ce===_&&++me===p&&(Y=N),(he=ye.nextSibling)!==null)break;ye=ce,ce=ye.parentNode}ye=he}u=L===-1||Y===-1?null:{start:L,end:Y}}else u=null}u=u||{start:0,end:0}}else u=null;for(Rv={focusedElem:i,selectionRange:u},Gp=!1,$n=l;$n!==null;)if(l=$n,i=l.child,(l.subtreeFlags&1028)!==0&&i!==null)i.return=l,$n=i;else for(;$n!==null;){switch(l=$n,_=l.alternate,i=l.flags,l.tag){case 0:if((i&4)!==0&&(i=l.updateQueue,i=i!==null?i.events:null,i!==null))for(u=0;u<i.length;u++)b=i[u],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,u=l,b=_.memoizedProps,_=_.memoizedState,p=u.stateNode;try{var Ue=Nl(u.type,b);i=p.getSnapshotBeforeUpdate(Ue,_),p.__reactInternalSnapshotBeforeUpdate=i}catch(Ze){$t(u,u.return,Ze)}}break;case 3:if((i&1024)!==0){if(i=l.stateNode.containerInfo,u=i.nodeType,u===9)Dv(i);else if(u===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Dv(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=l.sibling,i!==null){i.return=l.return,$n=i;break}$n=l.return}}function UN(i,l,u){var p=u.flags;switch(u.tag){case 0:case 11:case 15:Pi(i,u),p&4&&sh(5,u);break;case 1:if(Pi(i,u),p&4)if(i=u.stateNode,l===null)try{i.componentDidMount()}catch(N){$t(u,u.return,N)}else{var b=Nl(u.type,l.memoizedProps);l=l.memoizedState;try{i.componentDidUpdate(b,l,i.__reactInternalSnapshotBeforeUpdate)}catch(N){$t(u,u.return,N)}}p&64&&LN(u),p&512&&rh(u,u.return);break;case 3:if(Pi(i,u),p&64&&(i=u.updateQueue,i!==null)){if(l=null,u.child!==null)switch(u.child.tag){case 27:case 5:l=u.child.stateNode;break;case 1:l=u.child.stateNode}try{NC(i,l)}catch(N){$t(u,u.return,N)}}break;case 27:l===null&&p&4&&$N(u);case 26:case 5:Pi(i,u),l===null&&p&4&&PN(u),p&512&&rh(u,u.return);break;case 12:Pi(i,u);break;case 31:Pi(i,u),p&4&&qN(i,u);break;case 13:Pi(i,u),p&4&&KN(i,u),p&64&&(i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(u=Z8.bind(null,u),bL(i,u))));break;case 22:if(p=u.memoizedState!==null||Li,!p){l=l!==null&&l.memoizedState!==null||Sn,b=Li;var _=Sn;Li=p,(Sn=l)&&!_?zi(i,u,(u.subtreeFlags&8772)!==0):Pi(i,u),Li=b,Sn=_}break;case 30:break;default:Pi(i,u)}}function VN(i){var l=i.alternate;l!==null&&(i.alternate=null,VN(l)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(l=i.stateNode,l!==null&&$y(l)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var en=null,Os=!1;function Ii(i,l,u){for(u=u.child;u!==null;)FN(i,l,u),u=u.sibling}function FN(i,l,u){if(fe&&typeof fe.onCommitFiberUnmount=="function")try{fe.onCommitFiberUnmount(ae,u)}catch{}switch(u.tag){case 26:Sn||ei(u,l),Ii(i,l,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Sn||ei(u,l);var p=en,b=Os;Ra(u.type)&&(en=u.stateNode,Os=!1),Ii(i,l,u),fh(u.stateNode),en=p,Os=b;break;case 5:Sn||ei(u,l);case 6:if(p=en,b=Os,en=null,Ii(i,l,u),en=p,Os=b,en!==null)if(Os)try{(en.nodeType===9?en.body:en.nodeName==="HTML"?en.ownerDocument.body:en).removeChild(u.stateNode)}catch(_){$t(u,l,_)}else try{en.removeChild(u.stateNode)}catch(_){$t(u,l,_)}break;case 18:en!==null&&(Os?(i=en,L4(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,u.stateNode),lc(i)):L4(en,u.stateNode));break;case 4:p=en,b=Os,en=u.stateNode.containerInfo,Os=!0,Ii(i,l,u),en=p,Os=b;break;case 0:case 11:case 14:case 15:Ca(2,u,l),Sn||Ca(4,u,l),Ii(i,l,u);break;case 1:Sn||(ei(u,l),p=u.stateNode,typeof p.componentWillUnmount=="function"&&IN(u,l,p)),Ii(i,l,u);break;case 21:Ii(i,l,u);break;case 22:Sn=(p=Sn)||u.memoizedState!==null,Ii(i,l,u),Sn=p;break;default:Ii(i,l,u)}}function qN(i,l){if(l.memoizedState===null&&(i=l.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{lc(i)}catch(u){$t(l,l.return,u)}}}function KN(i,l){if(l.memoizedState===null&&(i=l.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{lc(i)}catch(u){$t(l,l.return,u)}}function q8(i){switch(i.tag){case 31:case 13:case 19:var l=i.stateNode;return l===null&&(l=i.stateNode=new HN),l;case 22:return i=i.stateNode,l=i._retryCache,l===null&&(l=i._retryCache=new HN),l;default:throw Error(s(435,i.tag))}}function Ap(i,l){var u=q8(i);l.forEach(function(p){if(!u.has(p)){u.add(p);var b=eL.bind(null,i,p);p.then(b,b)}})}function Rs(i,l){var u=l.deletions;if(u!==null)for(var p=0;p<u.length;p++){var b=u[p],_=i,N=l,L=N;e:for(;L!==null;){switch(L.tag){case 27:if(Ra(L.type)){en=L.stateNode,Os=!1;break e}break;case 5:en=L.stateNode,Os=!1;break e;case 3:case 4:en=L.stateNode.containerInfo,Os=!0;break e}L=L.return}if(en===null)throw Error(s(160));FN(_,N,b),en=null,Os=!1,_=b.alternate,_!==null&&(_.return=null),b.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)WN(l,i),l=l.sibling}var Hr=null;function WN(i,l){var u=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Rs(l,i),Bs(i),p&4&&(Ca(3,i,i.return),sh(3,i),Ca(5,i,i.return));break;case 1:Rs(l,i),Bs(i),p&512&&(Sn||u===null||ei(u,u.return)),p&64&&Li&&(i=i.updateQueue,i!==null&&(p=i.callbacks,p!==null&&(u=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=u===null?p:u.concat(p))));break;case 26:var b=Hr;if(Rs(l,i),Bs(i),p&512&&(Sn||u===null||ei(u,u.return)),p&4){var _=u!==null?u.memoizedState:null;if(p=i.memoizedState,u===null)if(p===null)if(i.stateNode===null){e:{p=i.type,u=i.memoizedProps,b=b.ownerDocument||b;t:switch(p){case"title":_=b.getElementsByTagName("title")[0],(!_||_[Ou]||_[Gn]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=b.createElement(p),b.head.insertBefore(_,b.querySelector("head > title"))),Qn(_,p,u),_[Gn]=i,zn(_),p=_;break e;case"link":var N=W4("link","href",b).get(p+(u.href||""));if(N){for(var L=0;L<N.length;L++)if(_=N[L],_.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&_.getAttribute("rel")===(u.rel==null?null:u.rel)&&_.getAttribute("title")===(u.title==null?null:u.title)&&_.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){N.splice(L,1);break t}}_=b.createElement(p),Qn(_,p,u),b.head.appendChild(_);break;case"meta":if(N=W4("meta","content",b).get(p+(u.content||""))){for(L=0;L<N.length;L++)if(_=N[L],_.getAttribute("content")===(u.content==null?null:""+u.content)&&_.getAttribute("name")===(u.name==null?null:u.name)&&_.getAttribute("property")===(u.property==null?null:u.property)&&_.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&_.getAttribute("charset")===(u.charSet==null?null:u.charSet)){N.splice(L,1);break t}}_=b.createElement(p),Qn(_,p,u),b.head.appendChild(_);break;default:throw Error(s(468,p))}_[Gn]=i,zn(_),p=_}i.stateNode=p}else G4(b,i.type,i.stateNode);else i.stateNode=K4(b,p,i.memoizedProps);else _!==p?(_===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):_.count--,p===null?G4(b,i.type,i.stateNode):K4(b,p,i.memoizedProps)):p===null&&i.stateNode!==null&&lv(i,i.memoizedProps,u.memoizedProps)}break;case 27:Rs(l,i),Bs(i),p&512&&(Sn||u===null||ei(u,u.return)),u!==null&&p&4&&lv(i,i.memoizedProps,u.memoizedProps);break;case 5:if(Rs(l,i),Bs(i),p&512&&(Sn||u===null||ei(u,u.return)),i.flags&32){b=i.stateNode;try{To(b,"")}catch(Ue){$t(i,i.return,Ue)}}p&4&&i.stateNode!=null&&(b=i.memoizedProps,lv(i,b,u!==null?u.memoizedProps:b)),p&1024&&(uv=!0);break;case 6:if(Rs(l,i),Bs(i),p&4){if(i.stateNode===null)throw Error(s(162));p=i.memoizedProps,u=i.stateNode;try{u.nodeValue=p}catch(Ue){$t(i,i.return,Ue)}}break;case 3:if(Fp=null,b=Hr,Hr=Up(l.containerInfo),Rs(l,i),Hr=b,Bs(i),p&4&&u!==null&&u.memoizedState.isDehydrated)try{lc(l.containerInfo)}catch(Ue){$t(i,i.return,Ue)}uv&&(uv=!1,GN(i));break;case 4:p=Hr,Hr=Up(i.stateNode.containerInfo),Rs(l,i),Bs(i),Hr=p;break;case 12:Rs(l,i),Bs(i);break;case 31:Rs(l,i),Bs(i),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,Ap(i,p)));break;case 13:Rs(l,i),Bs(i),i.child.flags&8192&&i.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Tp=Rt()),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,Ap(i,p)));break;case 22:b=i.memoizedState!==null;var Y=u!==null&&u.memoizedState!==null,le=Li,me=Sn;if(Li=le||b,Sn=me||Y,Rs(l,i),Sn=me,Li=le,Bs(i),p&8192)e:for(l=i.stateNode,l._visibility=b?l._visibility&-2:l._visibility|1,b&&(u===null||Y||Li||Sn||El(i)),u=null,l=i;;){if(l.tag===5||l.tag===26){if(u===null){Y=u=l;try{if(_=Y.stateNode,b)N=_.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{L=Y.stateNode;var ye=Y.memoizedProps.style,ce=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;L.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(Ue){$t(Y,Y.return,Ue)}}}else if(l.tag===6){if(u===null){Y=l;try{Y.stateNode.nodeValue=b?"":Y.memoizedProps}catch(Ue){$t(Y,Y.return,Ue)}}}else if(l.tag===18){if(u===null){Y=l;try{var he=Y.stateNode;b?I4(he,!0):I4(Y.stateNode,!1)}catch(Ue){$t(Y,Y.return,Ue)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===i)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break e;for(;l.sibling===null;){if(l.return===null||l.return===i)break e;u===l&&(u=null),l=l.return}u===l&&(u=null),l.sibling.return=l.return,l=l.sibling}p&4&&(p=i.updateQueue,p!==null&&(u=p.retryQueue,u!==null&&(p.retryQueue=null,Ap(i,u))));break;case 19:Rs(l,i),Bs(i),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,Ap(i,p)));break;case 30:break;case 21:break;default:Rs(l,i),Bs(i)}}function Bs(i){var l=i.flags;if(l&2){try{for(var u,p=i.return;p!==null;){if(zN(p)){u=p;break}p=p.return}if(u==null)throw Error(s(160));switch(u.tag){case 27:var b=u.stateNode,_=ov(i);Ep(i,_,b);break;case 5:var N=u.stateNode;u.flags&32&&(To(N,""),u.flags&=-33);var L=ov(i);Ep(i,L,N);break;case 3:case 4:var Y=u.stateNode.containerInfo,le=ov(i);cv(i,le,Y);break;default:throw Error(s(161))}}catch(me){$t(i,i.return,me)}i.flags&=-3}l&4096&&(i.flags&=-4097)}function GN(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var l=i;GN(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),i=i.sibling}}function Pi(i,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)UN(i,l.alternate,l),l=l.sibling}function El(i){for(i=i.child;i!==null;){var l=i;switch(l.tag){case 0:case 11:case 14:case 15:Ca(4,l,l.return),El(l);break;case 1:ei(l,l.return);var u=l.stateNode;typeof u.componentWillUnmount=="function"&&IN(l,l.return,u),El(l);break;case 27:fh(l.stateNode);case 26:case 5:ei(l,l.return),El(l);break;case 22:l.memoizedState===null&&El(l);break;case 30:El(l);break;default:El(l)}i=i.sibling}}function zi(i,l,u){for(u=u&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var p=l.alternate,b=i,_=l,N=_.flags;switch(_.tag){case 0:case 11:case 15:zi(b,_,u),sh(4,_);break;case 1:if(zi(b,_,u),p=_,b=p.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(le){$t(p,p.return,le)}if(p=_,b=p.updateQueue,b!==null){var L=p.stateNode;try{var Y=b.shared.hiddenCallbacks;if(Y!==null)for(b.shared.hiddenCallbacks=null,b=0;b<Y.length;b++)CC(Y[b],L)}catch(le){$t(p,p.return,le)}}u&&N&64&&LN(_),rh(_,_.return);break;case 27:$N(_);case 26:case 5:zi(b,_,u),u&&p===null&&N&4&&PN(_),rh(_,_.return);break;case 12:zi(b,_,u);break;case 31:zi(b,_,u),u&&N&4&&qN(b,_);break;case 13:zi(b,_,u),u&&N&4&&KN(b,_);break;case 22:_.memoizedState===null&&zi(b,_,u),rh(_,_.return);break;case 30:break;default:zi(b,_,u)}l=l.sibling}}function hv(i,l){var u=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),i=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(i=l.memoizedState.cachePool.pool),i!==u&&(i!=null&&i.refCount++,u!=null&&Fu(u))}function dv(i,l){i=null,l.alternate!==null&&(i=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==i&&(l.refCount++,i!=null&&Fu(i))}function Ur(i,l,u,p){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)YN(i,l,u,p),l=l.sibling}function YN(i,l,u,p){var b=l.flags;switch(l.tag){case 0:case 11:case 15:Ur(i,l,u,p),b&2048&&sh(9,l);break;case 1:Ur(i,l,u,p);break;case 3:Ur(i,l,u,p),b&2048&&(i=null,l.alternate!==null&&(i=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==i&&(l.refCount++,i!=null&&Fu(i)));break;case 12:if(b&2048){Ur(i,l,u,p),i=l.stateNode;try{var _=l.memoizedProps,N=_.id,L=_.onPostCommit;typeof L=="function"&&L(N,l.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(Y){$t(l,l.return,Y)}}else Ur(i,l,u,p);break;case 31:Ur(i,l,u,p);break;case 13:Ur(i,l,u,p);break;case 23:break;case 22:_=l.stateNode,N=l.alternate,l.memoizedState!==null?_._visibility&2?Ur(i,l,u,p):ih(i,l):_._visibility&2?Ur(i,l,u,p):(_._visibility|=2,Xo(i,l,u,p,(l.subtreeFlags&10256)!==0||!1)),b&2048&&hv(N,l);break;case 24:Ur(i,l,u,p),b&2048&&dv(l.alternate,l);break;default:Ur(i,l,u,p)}}function Xo(i,l,u,p,b){for(b=b&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var _=i,N=l,L=u,Y=p,le=N.flags;switch(N.tag){case 0:case 11:case 15:Xo(_,N,L,Y,b),sh(8,N);break;case 23:break;case 22:var me=N.stateNode;N.memoizedState!==null?me._visibility&2?Xo(_,N,L,Y,b):ih(_,N):(me._visibility|=2,Xo(_,N,L,Y,b)),b&&le&2048&&hv(N.alternate,N);break;case 24:Xo(_,N,L,Y,b),b&&le&2048&&dv(N.alternate,N);break;default:Xo(_,N,L,Y,b)}l=l.sibling}}function ih(i,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var u=i,p=l,b=p.flags;switch(p.tag){case 22:ih(u,p),b&2048&&hv(p.alternate,p);break;case 24:ih(u,p),b&2048&&dv(p.alternate,p);break;default:ih(u,p)}l=l.sibling}}var ah=8192;function Jo(i,l,u){if(i.subtreeFlags&ah)for(i=i.child;i!==null;)XN(i,l,u),i=i.sibling}function XN(i,l,u){switch(i.tag){case 26:Jo(i,l,u),i.flags&ah&&i.memoizedState!==null&&OL(u,Hr,i.memoizedState,i.memoizedProps);break;case 5:Jo(i,l,u);break;case 3:case 4:var p=Hr;Hr=Up(i.stateNode.containerInfo),Jo(i,l,u),Hr=p;break;case 22:i.memoizedState===null&&(p=i.alternate,p!==null&&p.memoizedState!==null?(p=ah,ah=16777216,Jo(i,l,u),ah=p):Jo(i,l,u));break;default:Jo(i,l,u)}}function JN(i){var l=i.alternate;if(l!==null&&(i=l.child,i!==null)){l.child=null;do l=i.sibling,i.sibling=null,i=l;while(i!==null)}}function lh(i){var l=i.deletions;if((i.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var p=l[u];$n=p,ZN(p,i)}JN(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)QN(i),i=i.sibling}function QN(i){switch(i.tag){case 0:case 11:case 15:lh(i),i.flags&2048&&Ca(9,i,i.return);break;case 3:lh(i);break;case 12:lh(i);break;case 22:var l=i.stateNode;i.memoizedState!==null&&l._visibility&2&&(i.return===null||i.return.tag!==13)?(l._visibility&=-3,jp(i)):lh(i);break;default:lh(i)}}function jp(i){var l=i.deletions;if((i.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var p=l[u];$n=p,ZN(p,i)}JN(i)}for(i=i.child;i!==null;){switch(l=i,l.tag){case 0:case 11:case 15:Ca(8,l,l.return),jp(l);break;case 22:u=l.stateNode,u._visibility&2&&(u._visibility&=-3,jp(l));break;default:jp(l)}i=i.sibling}}function ZN(i,l){for(;$n!==null;){var u=$n;switch(u.tag){case 0:case 11:case 15:Ca(8,u,l);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var p=u.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Fu(u.memoizedState.cache)}if(p=u.child,p!==null)p.return=u,$n=p;else e:for(u=i;$n!==null;){p=$n;var b=p.sibling,_=p.return;if(VN(p),p===u){$n=null;break e}if(b!==null){b.return=_,$n=b;break e}$n=_}}}var K8={getCacheForType:function(i){var l=Xn(_n),u=l.data.get(i);return u===void 0&&(u=i(),l.data.set(i,u)),u},cacheSignal:function(){return Xn(_n).controller.signal}},W8=typeof WeakMap=="function"?WeakMap:Map,Dt=0,qt=null,_t=null,kt=0,zt=0,Js=null,Na=!1,Qo=!1,fv=!1,$i=0,cn=0,Ea=0,Al=0,pv=0,Qs=0,Zo=0,oh=null,Ms=null,mv=!1,Tp=0,e4=0,Op=1/0,Rp=null,Aa=null,Tn=0,ja=null,ec=null,Hi=0,gv=0,yv=null,t4=null,ch=0,vv=null;function Zs(){return(Dt&2)!==0&&kt!==0?kt&-kt:P.T!==null?kv():yk()}function n4(){if(Qs===0)if((kt&536870912)===0||Nt){var i=De;De<<=1,(De&3932160)===0&&(De=262144),Qs=i}else Qs=536870912;return i=Ys.current,i!==null&&(i.flags|=32),Qs}function Ds(i,l,u){(i===qt&&(zt===2||zt===9)||i.cancelPendingCommit!==null)&&(tc(i,0),Ta(i,kt,Qs,!1)),hl(i,u),((Dt&2)===0||i!==qt)&&(i===qt&&((Dt&2)===0&&(Al|=u),cn===4&&Ta(i,kt,Qs,!1)),ti(i))}function s4(i,l,u){if((Dt&6)!==0)throw Error(s(327));var p=!u&&(l&127)===0&&(l&i.expiredLanes)===0||Mt(i,l),b=p?X8(i,l):_v(i,l,!0),_=p;do{if(b===0){Qo&&!p&&Ta(i,l,0,!1);break}else{if(u=i.current.alternate,_&&!G8(u)){b=_v(i,l,!1),_=!1;continue}if(b===2){if(_=l,i.errorRecoveryDisabledLanes&_)var N=0;else N=i.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){l=N;e:{var L=i;b=oh;var Y=L.current.memoizedState.isDehydrated;if(Y&&(tc(L,N).flags|=256),N=_v(L,N,!1),N!==2){if(fv&&!Y){L.errorRecoveryDisabledLanes|=_,Al|=_,b=4;break e}_=Ms,Ms=b,_!==null&&(Ms===null?Ms=_:Ms.push.apply(Ms,_))}b=N}if(_=!1,b!==2)continue}}if(b===1){tc(i,0),Ta(i,l,0,!0);break}e:{switch(p=i,_=b,_){case 0:case 1:throw Error(s(345));case 4:if((l&4194048)!==l)break;case 6:Ta(p,l,Qs,!Na);break e;case 2:Ms=null;break;case 3:case 5:break;default:throw Error(s(329))}if((l&62914560)===l&&(b=Tp+300-Rt(),10<b)){if(Ta(p,l,Qs,!Na),dt(p,0,!0)!==0)break e;Hi=l,p.timeoutHandle=M4(r4.bind(null,p,u,Ms,Rp,mv,l,Qs,Al,Zo,Na,_,"Throttled",-0,0),b);break e}r4(p,u,Ms,Rp,mv,l,Qs,Al,Zo,Na,_,null,-0,0)}}break}while(!0);ti(i)}function r4(i,l,u,p,b,_,N,L,Y,le,me,ye,ce,he){if(i.timeoutHandle=-1,ye=l.subtreeFlags,ye&8192||(ye&16785408)===16785408){ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ni},XN(l,_,ye);var Ue=(_&62914560)===_?Tp-Rt():(_&4194048)===_?e4-Rt():0;if(Ue=RL(ye,Ue),Ue!==null){Hi=_,i.cancelPendingCommit=Ue(d4.bind(null,i,l,_,u,p,b,N,L,Y,me,ye,null,ce,he)),Ta(i,_,N,!le);return}}d4(i,l,_,u,p,b,N,L,Y)}function G8(i){for(var l=i;;){var u=l.tag;if((u===0||u===11||u===15)&&l.flags&16384&&(u=l.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var p=0;p<u.length;p++){var b=u[p],_=b.getSnapshot;b=b.value;try{if(!Ws(_(),b))return!1}catch{return!1}}if(u=l.child,l.subtreeFlags&16384&&u!==null)u.return=l,l=u;else{if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ta(i,l,u,p){l&=~pv,l&=~Al,i.suspendedLanes|=l,i.pingedLanes&=~l,p&&(i.warmLanes|=l),p=i.expirationTimes;for(var b=l;0<b;){var _=31-Oe(b),N=1<<_;p[_]=-1,b&=~N}u!==0&&pk(i,u,l)}function Bp(){return(Dt&6)===0?(uh(0),!1):!0}function bv(){if(_t!==null){if(zt===0)var i=_t.return;else i=_t,Ti=bl=null,D1(i),qo=null,Ku=0,i=_t;for(;i!==null;)DN(i.alternate,i),i=i.return;_t=null}}function tc(i,l){var u=i.timeoutHandle;u!==-1&&(i.timeoutHandle=-1,pL(u)),u=i.cancelPendingCommit,u!==null&&(i.cancelPendingCommit=null,u()),Hi=0,bv(),qt=i,_t=u=Ai(i.current,null),kt=l,zt=0,Js=null,Na=!1,Qo=Mt(i,l),fv=!1,Zo=Qs=pv=Al=Ea=cn=0,Ms=oh=null,mv=!1,(l&8)!==0&&(l|=l&32);var p=i.entangledLanes;if(p!==0)for(i=i.entanglements,p&=l;0<p;){var b=31-Oe(p),_=1<<b;l|=i[b],p&=~_}return $i=l,ep(),u}function i4(i,l){ct=null,P.H=eh,l===Fo||l===op?(l=xC(),zt=3):l===S1?(l=xC(),zt=4):zt=l===J1?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Js=l,_t===null&&(cn=1,wp(i,vr(l,i.current)))}function a4(){var i=Ys.current;return i===null?!0:(kt&4194048)===kt?wr===null:(kt&62914560)===kt||(kt&536870912)!==0?i===wr:!1}function l4(){var i=P.H;return P.H=eh,i===null?eh:i}function o4(){var i=P.A;return P.A=K8,i}function Mp(){cn=4,Na||(kt&4194048)!==kt&&Ys.current!==null||(Qo=!0),(Ea&134217727)===0&&(Al&134217727)===0||qt===null||Ta(qt,kt,Qs,!1)}function _v(i,l,u){var p=Dt;Dt|=2;var b=l4(),_=o4();(qt!==i||kt!==l)&&(Rp=null,tc(i,l)),l=!1;var N=cn;e:do try{if(zt!==0&&_t!==null){var L=_t,Y=Js;switch(zt){case 8:bv(),N=6;break e;case 3:case 2:case 9:case 6:Ys.current===null&&(l=!0);var le=zt;if(zt=0,Js=null,nc(i,L,Y,le),u&&Qo){N=0;break e}break;default:le=zt,zt=0,Js=null,nc(i,L,Y,le)}}Y8(),N=cn;break}catch(me){i4(i,me)}while(!0);return l&&i.shellSuspendCounter++,Ti=bl=null,Dt=p,P.H=b,P.A=_,_t===null&&(qt=null,kt=0,ep()),N}function Y8(){for(;_t!==null;)c4(_t)}function X8(i,l){var u=Dt;Dt|=2;var p=l4(),b=o4();qt!==i||kt!==l?(Rp=null,Op=Rt()+500,tc(i,l)):Qo=Mt(i,l);e:do try{if(zt!==0&&_t!==null){l=_t;var _=Js;t:switch(zt){case 1:zt=0,Js=null,nc(i,l,_,1);break;case 2:case 9:if(bC(_)){zt=0,Js=null,u4(l);break}l=function(){zt!==2&&zt!==9||qt!==i||(zt=7),ti(i)},_.then(l,l);break e;case 3:zt=7;break e;case 4:zt=5;break e;case 7:bC(_)?(zt=0,Js=null,u4(l)):(zt=0,Js=null,nc(i,l,_,7));break;case 5:var N=null;switch(_t.tag){case 26:N=_t.memoizedState;case 5:case 27:var L=_t;if(N?Y4(N):L.stateNode.complete){zt=0,Js=null;var Y=L.sibling;if(Y!==null)_t=Y;else{var le=L.return;le!==null?(_t=le,Dp(le)):_t=null}break t}}zt=0,Js=null,nc(i,l,_,5);break;case 6:zt=0,Js=null,nc(i,l,_,6);break;case 8:bv(),cn=6;break e;default:throw Error(s(462))}}J8();break}catch(me){i4(i,me)}while(!0);return Ti=bl=null,P.H=p,P.A=b,Dt=u,_t!==null?0:(qt=null,kt=0,ep(),cn)}function J8(){for(;_t!==null&&!rt();)c4(_t)}function c4(i){var l=BN(i.alternate,i,$i);i.memoizedProps=i.pendingProps,l===null?Dp(i):_t=l}function u4(i){var l=i,u=l.alternate;switch(l.tag){case 15:case 0:l=EN(u,l,l.pendingProps,l.type,void 0,kt);break;case 11:l=EN(u,l,l.pendingProps,l.type.render,l.ref,kt);break;case 5:D1(l);default:DN(u,l),l=_t=oC(l,$i),l=BN(u,l,$i)}i.memoizedProps=i.pendingProps,l===null?Dp(i):_t=l}function nc(i,l,u,p){Ti=bl=null,D1(l),qo=null,Ku=0;var b=l.return;try{if(z8(i,b,l,u,kt)){cn=1,wp(i,vr(u,i.current)),_t=null;return}}catch(_){if(b!==null)throw _t=b,_;cn=1,wp(i,vr(u,i.current)),_t=null;return}l.flags&32768?(Nt||p===1?i=!0:Qo||(kt&536870912)!==0?i=!1:(Na=i=!0,(p===2||p===9||p===3||p===6)&&(p=Ys.current,p!==null&&p.tag===13&&(p.flags|=16384))),h4(l,i)):Dp(l)}function Dp(i){var l=i;do{if((l.flags&32768)!==0){h4(l,Na);return}i=l.return;var u=U8(l.alternate,l,$i);if(u!==null){_t=u;return}if(l=l.sibling,l!==null){_t=l;return}_t=l=i}while(l!==null);cn===0&&(cn=5)}function h4(i,l){do{var u=V8(i.alternate,i);if(u!==null){u.flags&=32767,_t=u;return}if(u=i.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!l&&(i=i.sibling,i!==null)){_t=i;return}_t=i=u}while(i!==null);cn=6,_t=null}function d4(i,l,u,p,b,_,N,L,Y){i.cancelPendingCommit=null;do Lp();while(Tn!==0);if((Dt&6)!==0)throw Error(s(327));if(l!==null){if(l===i.current)throw Error(s(177));if(_=l.lanes|l.childLanes,_|=o1,Ly(i,u,_,N,L,Y),i===qt&&(_t=qt=null,kt=0),ec=l,ja=i,Hi=u,gv=_,yv=b,t4=p,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,tL(Ke,function(){return y4(),null})):(i.callbackNode=null,i.callbackPriority=0),p=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||p){p=P.T,P.T=null,b=X.p,X.p=2,N=Dt,Dt|=4;try{F8(i,l,u)}finally{Dt=N,X.p=b,P.T=p}}Tn=1,f4(),p4(),m4()}}function f4(){if(Tn===1){Tn=0;var i=ja,l=ec,u=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||u){u=P.T,P.T=null;var p=X.p;X.p=2;var b=Dt;Dt|=4;try{WN(l,i);var _=Rv,N=Zk(i.containerInfo),L=_.focusedElem,Y=_.selectionRange;if(N!==L&&L&&L.ownerDocument&&Qk(L.ownerDocument.documentElement,L)){if(Y!==null&&s1(L)){var le=Y.start,me=Y.end;if(me===void 0&&(me=le),"selectionStart"in L)L.selectionStart=le,L.selectionEnd=Math.min(me,L.value.length);else{var ye=L.ownerDocument||document,ce=ye&&ye.defaultView||window;if(ce.getSelection){var he=ce.getSelection(),Ue=L.textContent.length,Ze=Math.min(Y.start,Ue),Vt=Y.end===void 0?Ze:Math.min(Y.end,Ue);!he.extend&&Ze>Vt&&(N=Vt,Vt=Ze,Ze=N);var se=Jk(L,Ze),ee=Jk(L,Vt);if(se&&ee&&(he.rangeCount!==1||he.anchorNode!==se.node||he.anchorOffset!==se.offset||he.focusNode!==ee.node||he.focusOffset!==ee.offset)){var ie=ye.createRange();ie.setStart(se.node,se.offset),he.removeAllRanges(),Ze>Vt?(he.addRange(ie),he.extend(ee.node,ee.offset)):(ie.setEnd(ee.node,ee.offset),he.addRange(ie))}}}}for(ye=[],he=L;he=he.parentNode;)he.nodeType===1&&ye.push({element:he,left:he.scrollLeft,top:he.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<ye.length;L++){var ge=ye[L];ge.element.scrollLeft=ge.left,ge.element.scrollTop=ge.top}}Gp=!!Ov,Rv=Ov=null}finally{Dt=b,X.p=p,P.T=u}}i.current=l,Tn=2}}function p4(){if(Tn===2){Tn=0;var i=ja,l=ec,u=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||u){u=P.T,P.T=null;var p=X.p;X.p=2;var b=Dt;Dt|=4;try{UN(i,l.alternate,l)}finally{Dt=b,X.p=p,P.T=u}}Tn=3}}function m4(){if(Tn===4||Tn===3){Tn=0,Zt();var i=ja,l=ec,u=Hi,p=t4;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Tn=5:(Tn=0,ec=ja=null,g4(i,i.pendingLanes));var b=i.pendingLanes;if(b===0&&(Aa=null),Py(u),l=l.stateNode,fe&&typeof fe.onCommitFiberRoot=="function")try{fe.onCommitFiberRoot(ae,l,void 0,(l.current.flags&128)===128)}catch{}if(p!==null){l=P.T,b=X.p,X.p=2,P.T=null;try{for(var _=i.onRecoverableError,N=0;N<p.length;N++){var L=p[N];_(L.value,{componentStack:L.stack})}}finally{P.T=l,X.p=b}}(Hi&3)!==0&&Lp(),ti(i),b=i.pendingLanes,(u&261930)!==0&&(b&42)!==0?i===vv?ch++:(ch=0,vv=i):ch=0,uh(0)}}function g4(i,l){(i.pooledCacheLanes&=l)===0&&(l=i.pooledCache,l!=null&&(i.pooledCache=null,Fu(l)))}function Lp(){return f4(),p4(),m4(),y4()}function y4(){if(Tn!==5)return!1;var i=ja,l=gv;gv=0;var u=Py(Hi),p=P.T,b=X.p;try{X.p=32>u?32:u,P.T=null,u=yv,yv=null;var _=ja,N=Hi;if(Tn=0,ec=ja=null,Hi=0,(Dt&6)!==0)throw Error(s(331));var L=Dt;if(Dt|=4,QN(_.current),YN(_,_.current,N,u),Dt=L,uh(0,!1),fe&&typeof fe.onPostCommitFiberRoot=="function")try{fe.onPostCommitFiberRoot(ae,_)}catch{}return!0}finally{X.p=b,P.T=p,g4(i,l)}}function v4(i,l,u){l=vr(u,l),l=X1(i.stateNode,l,2),i=wa(i,l,2),i!==null&&(hl(i,2),ti(i))}function $t(i,l,u){if(i.tag===3)v4(i,i,u);else for(;l!==null;){if(l.tag===3){v4(l,i,u);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Aa===null||!Aa.has(p))){i=vr(u,i),u=bN(2),p=wa(l,u,2),p!==null&&(_N(u,p,l,i),hl(p,2),ti(p));break}}l=l.return}}function xv(i,l,u){var p=i.pingCache;if(p===null){p=i.pingCache=new W8;var b=new Set;p.set(l,b)}else b=p.get(l),b===void 0&&(b=new Set,p.set(l,b));b.has(u)||(fv=!0,b.add(u),i=Q8.bind(null,i,l,u),l.then(i,i))}function Q8(i,l,u){var p=i.pingCache;p!==null&&p.delete(l),i.pingedLanes|=i.suspendedLanes&u,i.warmLanes&=~u,qt===i&&(kt&u)===u&&(cn===4||cn===3&&(kt&62914560)===kt&&300>Rt()-Tp?(Dt&2)===0&&tc(i,0):pv|=u,Zo===kt&&(Zo=0)),ti(i)}function b4(i,l){l===0&&(l=As()),i=gl(i,l),i!==null&&(hl(i,l),ti(i))}function Z8(i){var l=i.memoizedState,u=0;l!==null&&(u=l.retryLane),b4(i,u)}function eL(i,l){var u=0;switch(i.tag){case 31:case 13:var p=i.stateNode,b=i.memoizedState;b!==null&&(u=b.retryLane);break;case 19:p=i.stateNode;break;case 22:p=i.stateNode._retryCache;break;default:throw Error(s(314))}p!==null&&p.delete(l),b4(i,u)}function tL(i,l){return Es(i,l)}var Ip=null,sc=null,wv=!1,Pp=!1,Sv=!1,Oa=0;function ti(i){i!==sc&&i.next===null&&(sc===null?Ip=sc=i:sc=sc.next=i),Pp=!0,wv||(wv=!0,sL())}function uh(i,l){if(!Sv&&Pp){Sv=!0;do for(var u=!1,p=Ip;p!==null;){if(i!==0){var b=p.pendingLanes;if(b===0)var _=0;else{var N=p.suspendedLanes,L=p.pingedLanes;_=(1<<31-Oe(42|i)+1)-1,_&=b&~(N&~L),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(u=!0,S4(p,_))}else _=kt,_=dt(p,p===qt?_:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(_&3)===0||Mt(p,_)||(u=!0,S4(p,_));p=p.next}while(u);Sv=!1}}function nL(){_4()}function _4(){Pp=wv=!1;var i=0;Oa!==0&&fL()&&(i=Oa);for(var l=Rt(),u=null,p=Ip;p!==null;){var b=p.next,_=x4(p,l);_===0?(p.next=null,u===null?Ip=b:u.next=b,b===null&&(sc=u)):(u=p,(i!==0||(_&3)!==0)&&(Pp=!0)),p=b}Tn!==0&&Tn!==5||uh(i),Oa!==0&&(Oa=0)}function x4(i,l){for(var u=i.suspendedLanes,p=i.pingedLanes,b=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var N=31-Oe(_),L=1<<N,Y=b[N];Y===-1?((L&u)===0||(L&p)!==0)&&(b[N]=sn(L,l)):Y<=l&&(i.expiredLanes|=L),_&=~L}if(l=qt,u=kt,u=dt(i,i===l?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),p=i.callbackNode,u===0||i===l&&(zt===2||zt===9)||i.cancelPendingCommit!==null)return p!==null&&p!==null&&Qe(p),i.callbackNode=null,i.callbackPriority=0;if((u&3)===0||Mt(i,u)){if(l=u&-u,l===i.callbackPriority)return l;switch(p!==null&&Qe(p),Py(u)){case 2:case 8:u=_e;break;case 32:u=Ke;break;case 268435456:u=St;break;default:u=Ke}return p=w4.bind(null,i),u=Es(u,p),i.callbackPriority=l,i.callbackNode=u,l}return p!==null&&p!==null&&Qe(p),i.callbackPriority=2,i.callbackNode=null,2}function w4(i,l){if(Tn!==0&&Tn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var u=i.callbackNode;if(Lp()&&i.callbackNode!==u)return null;var p=kt;return p=dt(i,i===qt?p:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),p===0?null:(s4(i,p,l),x4(i,Rt()),i.callbackNode!=null&&i.callbackNode===u?w4.bind(null,i):null)}function S4(i,l){if(Lp())return null;s4(i,l,!0)}function sL(){mL(function(){(Dt&6)!==0?Es(pe,nL):_4()})}function kv(){if(Oa===0){var i=Uo;i===0&&(i=Be,Be<<=1,(Be&261888)===0&&(Be=256)),Oa=i}return Oa}function k4(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Kf(""+i)}function C4(i,l){var u=l.ownerDocument.createElement("input");return u.name=l.name,u.value=l.value,i.id&&u.setAttribute("form",i.id),l.parentNode.insertBefore(u,l),i=new FormData(i),u.parentNode.removeChild(u),i}function rL(i,l,u,p,b){if(l==="submit"&&u&&u.stateNode===b){var _=k4((b[js]||null).action),N=p.submitter;N&&(l=(l=N[js]||null)?k4(l.formAction):N.getAttribute("formAction"),l!==null&&(_=l,N=null));var L=new Xf("action","action",null,p,b);i.push({event:L,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Oa!==0){var Y=N?C4(b,N):new FormData(b);F1(u,{pending:!0,data:Y,method:b.method,action:_},null,Y)}}else typeof _=="function"&&(L.preventDefault(),Y=N?C4(b,N):new FormData(b),F1(u,{pending:!0,data:Y,method:b.method,action:_},_,Y))},currentTarget:b}]})}}for(var Cv=0;Cv<l1.length;Cv++){var Nv=l1[Cv],iL=Nv.toLowerCase(),aL=Nv[0].toUpperCase()+Nv.slice(1);$r(iL,"on"+aL)}$r(nC,"onAnimationEnd"),$r(sC,"onAnimationIteration"),$r(rC,"onAnimationStart"),$r("dblclick","onDoubleClick"),$r("focusin","onFocus"),$r("focusout","onBlur"),$r(w8,"onTransitionRun"),$r(S8,"onTransitionStart"),$r(k8,"onTransitionCancel"),$r(iC,"onTransitionEnd"),Ao("onMouseEnter",["mouseout","mouseover"]),Ao("onMouseLeave",["mouseout","mouseover"]),Ao("onPointerEnter",["pointerout","pointerover"]),Ao("onPointerLeave",["pointerout","pointerover"]),dl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),dl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),dl("onBeforeInput",["compositionend","keypress","textInput","paste"]),dl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),dl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),dl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hh));function N4(i,l){l=(l&4)!==0;for(var u=0;u<i.length;u++){var p=i[u],b=p.event;p=p.listeners;e:{var _=void 0;if(l)for(var N=p.length-1;0<=N;N--){var L=p[N],Y=L.instance,le=L.currentTarget;if(L=L.listener,Y!==_&&b.isPropagationStopped())break e;_=L,b.currentTarget=le;try{_(b)}catch(me){Zf(me)}b.currentTarget=null,_=Y}else for(N=0;N<p.length;N++){if(L=p[N],Y=L.instance,le=L.currentTarget,L=L.listener,Y!==_&&b.isPropagationStopped())break e;_=L,b.currentTarget=le;try{_(b)}catch(me){Zf(me)}b.currentTarget=null,_=Y}}}}function xt(i,l){var u=l[zy];u===void 0&&(u=l[zy]=new Set);var p=i+"__bubble";u.has(p)||(E4(l,i,2,!1),u.add(p))}function Ev(i,l,u){var p=0;l&&(p|=4),E4(u,i,p,l)}var zp="_reactListening"+Math.random().toString(36).slice(2);function Av(i){if(!i[zp]){i[zp]=!0,_k.forEach(function(u){u!=="selectionchange"&&(lL.has(u)||Ev(u,!1,i),Ev(u,!0,i))});var l=i.nodeType===9?i:i.ownerDocument;l===null||l[zp]||(l[zp]=!0,Ev("selectionchange",!1,l))}}function E4(i,l,u,p){switch(n5(l)){case 2:var b=DL;break;case 8:b=LL;break;default:b=Vv}u=b.bind(null,l,u,i),b=void 0,!Gy||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(b=!0),p?b!==void 0?i.addEventListener(l,u,{capture:!0,passive:b}):i.addEventListener(l,u,!0):b!==void 0?i.addEventListener(l,u,{passive:b}):i.addEventListener(l,u,!1)}function jv(i,l,u,p,b){var _=p;if((l&1)===0&&(l&2)===0&&p!==null)e:for(;;){if(p===null)return;var N=p.tag;if(N===3||N===4){var L=p.stateNode.containerInfo;if(L===b)break;if(N===4)for(N=p.return;N!==null;){var Y=N.tag;if((Y===3||Y===4)&&N.stateNode.containerInfo===b)return;N=N.return}for(;L!==null;){if(N=Co(L),N===null)return;if(Y=N.tag,Y===5||Y===6||Y===26||Y===27){p=_=N;continue e}L=L.parentNode}}p=p.return}Rk(function(){var le=_,me=Ky(u),ye=[];e:{var ce=aC.get(i);if(ce!==void 0){var he=Xf,Ue=i;switch(i){case"keypress":if(Gf(u)===0)break e;case"keydown":case"keyup":he=e8;break;case"focusin":Ue="focus",he=Qy;break;case"focusout":Ue="blur",he=Qy;break;case"beforeblur":case"afterblur":he=Qy;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Dk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=UD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=s8;break;case nC:case sC:case rC:he=qD;break;case iC:he=i8;break;case"scroll":case"scrollend":he=$D;break;case"wheel":he=l8;break;case"copy":case"cut":case"paste":he=WD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=Ik;break;case"toggle":case"beforetoggle":he=c8}var Ze=(l&4)!==0,Vt=!Ze&&(i==="scroll"||i==="scrollend"),se=Ze?ce!==null?ce+"Capture":null:ce;Ze=[];for(var ee=le,ie;ee!==null;){var ge=ee;if(ie=ge.stateNode,ge=ge.tag,ge!==5&&ge!==26&&ge!==27||ie===null||se===null||(ge=Bu(ee,se),ge!=null&&Ze.push(dh(ee,ge,ie))),Vt)break;ee=ee.return}0<Ze.length&&(ce=new he(ce,Ue,null,u,me),ye.push({event:ce,listeners:Ze}))}}if((l&7)===0){e:{if(ce=i==="mouseover"||i==="pointerover",he=i==="mouseout"||i==="pointerout",ce&&u!==qy&&(Ue=u.relatedTarget||u.fromElement)&&(Co(Ue)||Ue[ko]))break e;if((he||ce)&&(ce=me.window===me?me:(ce=me.ownerDocument)?ce.defaultView||ce.parentWindow:window,he?(Ue=u.relatedTarget||u.toElement,he=le,Ue=Ue?Co(Ue):null,Ue!==null&&(Vt=a(Ue),Ze=Ue.tag,Ue!==Vt||Ze!==5&&Ze!==27&&Ze!==6)&&(Ue=null)):(he=null,Ue=le),he!==Ue)){if(Ze=Dk,ge="onMouseLeave",se="onMouseEnter",ee="mouse",(i==="pointerout"||i==="pointerover")&&(Ze=Ik,ge="onPointerLeave",se="onPointerEnter",ee="pointer"),Vt=he==null?ce:Ru(he),ie=Ue==null?ce:Ru(Ue),ce=new Ze(ge,ee+"leave",he,u,me),ce.target=Vt,ce.relatedTarget=ie,ge=null,Co(me)===le&&(Ze=new Ze(se,ee+"enter",Ue,u,me),Ze.target=ie,Ze.relatedTarget=Vt,ge=Ze),Vt=ge,he&&Ue)t:{for(Ze=oL,se=he,ee=Ue,ie=0,ge=se;ge;ge=Ze(ge))ie++;ge=0;for(var Ye=ee;Ye;Ye=Ze(Ye))ge++;for(;0<ie-ge;)se=Ze(se),ie--;for(;0<ge-ie;)ee=Ze(ee),ge--;for(;ie--;){if(se===ee||ee!==null&&se===ee.alternate){Ze=se;break t}se=Ze(se),ee=Ze(ee)}Ze=null}else Ze=null;he!==null&&A4(ye,ce,he,Ze,!1),Ue!==null&&Vt!==null&&A4(ye,Vt,Ue,Ze,!0)}}e:{if(ce=le?Ru(le):window,he=ce.nodeName&&ce.nodeName.toLowerCase(),he==="select"||he==="input"&&ce.type==="file")var jt=qk;else if(Vk(ce))if(Kk)jt=b8;else{jt=y8;var qe=g8}else he=ce.nodeName,!he||he.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?le&&Fy(le.elementType)&&(jt=qk):jt=v8;if(jt&&(jt=jt(i,le))){Fk(ye,jt,u,me);break e}qe&&qe(i,ce,le),i==="focusout"&&le&&ce.type==="number"&&le.memoizedProps.value!=null&&Vy(ce,"number",ce.value)}switch(qe=le?Ru(le):window,i){case"focusin":(Vk(qe)||qe.contentEditable==="true")&&(Mo=qe,r1=le,Hu=null);break;case"focusout":Hu=r1=Mo=null;break;case"mousedown":i1=!0;break;case"contextmenu":case"mouseup":case"dragend":i1=!1,eC(ye,u,me);break;case"selectionchange":if(x8)break;case"keydown":case"keyup":eC(ye,u,me)}var ft;if(e1)e:{switch(i){case"compositionstart":var Ct="onCompositionStart";break e;case"compositionend":Ct="onCompositionEnd";break e;case"compositionupdate":Ct="onCompositionUpdate";break e}Ct=void 0}else Bo?Hk(i,u)&&(Ct="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Ct="onCompositionStart");Ct&&(Pk&&u.locale!=="ko"&&(Bo||Ct!=="onCompositionStart"?Ct==="onCompositionEnd"&&Bo&&(ft=Bk()):(ma=me,Yy="value"in ma?ma.value:ma.textContent,Bo=!0)),qe=$p(le,Ct),0<qe.length&&(Ct=new Lk(Ct,i,null,u,me),ye.push({event:Ct,listeners:qe}),ft?Ct.data=ft:(ft=Uk(u),ft!==null&&(Ct.data=ft)))),(ft=h8?d8(i,u):f8(i,u))&&(Ct=$p(le,"onBeforeInput"),0<Ct.length&&(qe=new Lk("onBeforeInput","beforeinput",null,u,me),ye.push({event:qe,listeners:Ct}),qe.data=ft)),rL(ye,i,le,u,me)}N4(ye,l)})}function dh(i,l,u){return{instance:i,listener:l,currentTarget:u}}function $p(i,l){for(var u=l+"Capture",p=[];i!==null;){var b=i,_=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||_===null||(b=Bu(i,u),b!=null&&p.unshift(dh(i,b,_)),b=Bu(i,l),b!=null&&p.push(dh(i,b,_))),i.tag===3)return p;i=i.return}return[]}function oL(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function A4(i,l,u,p,b){for(var _=l._reactName,N=[];u!==null&&u!==p;){var L=u,Y=L.alternate,le=L.stateNode;if(L=L.tag,Y!==null&&Y===p)break;L!==5&&L!==26&&L!==27||le===null||(Y=le,b?(le=Bu(u,_),le!=null&&N.unshift(dh(u,le,Y))):b||(le=Bu(u,_),le!=null&&N.push(dh(u,le,Y)))),u=u.return}N.length!==0&&i.push({event:l,listeners:N})}var cL=/\r\n?/g,uL=/\u0000|\uFFFD/g;function j4(i){return(typeof i=="string"?i:""+i).replace(cL,`
`).replace(uL,"")}function T4(i,l){return l=j4(l),j4(i)===l}function Ut(i,l,u,p,b,_){switch(u){case"children":typeof p=="string"?l==="body"||l==="textarea"&&p===""||To(i,p):(typeof p=="number"||typeof p=="bigint")&&l!=="body"&&To(i,""+p);break;case"className":Ff(i,"class",p);break;case"tabIndex":Ff(i,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Ff(i,u,p);break;case"style":Tk(i,p,_);break;case"data":if(l!=="object"){Ff(i,"data",p);break}case"src":case"href":if(p===""&&(l!=="a"||u!=="href")){i.removeAttribute(u);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){i.removeAttribute(u);break}p=Kf(""+p),i.setAttribute(u,p);break;case"action":case"formAction":if(typeof p=="function"){i.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(u==="formAction"?(l!=="input"&&Ut(i,l,"name",b.name,b,null),Ut(i,l,"formEncType",b.formEncType,b,null),Ut(i,l,"formMethod",b.formMethod,b,null),Ut(i,l,"formTarget",b.formTarget,b,null)):(Ut(i,l,"encType",b.encType,b,null),Ut(i,l,"method",b.method,b,null),Ut(i,l,"target",b.target,b,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){i.removeAttribute(u);break}p=Kf(""+p),i.setAttribute(u,p);break;case"onClick":p!=null&&(i.onclick=Ni);break;case"onScroll":p!=null&&xt("scroll",i);break;case"onScrollEnd":p!=null&&xt("scrollend",i);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(s(61));if(u=p.__html,u!=null){if(b.children!=null)throw Error(s(60));i.innerHTML=u}}break;case"multiple":i.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":i.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){i.removeAttribute("xlink:href");break}u=Kf(""+p),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(u,""+p):i.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(u,""):i.removeAttribute(u);break;case"capture":case"download":p===!0?i.setAttribute(u,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(u,p):i.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?i.setAttribute(u,p):i.removeAttribute(u);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?i.removeAttribute(u):i.setAttribute(u,p);break;case"popover":xt("beforetoggle",i),xt("toggle",i),Vf(i,"popover",p);break;case"xlinkActuate":Ci(i,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Ci(i,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Ci(i,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Ci(i,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Ci(i,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Ci(i,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Ci(i,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Ci(i,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Ci(i,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":Vf(i,"is",p);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=PD.get(u)||u,Vf(i,u,p))}}function Tv(i,l,u,p,b,_){switch(u){case"style":Tk(i,p,_);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(s(61));if(u=p.__html,u!=null){if(b.children!=null)throw Error(s(60));i.innerHTML=u}}break;case"children":typeof p=="string"?To(i,p):(typeof p=="number"||typeof p=="bigint")&&To(i,""+p);break;case"onScroll":p!=null&&xt("scroll",i);break;case"onScrollEnd":p!=null&&xt("scrollend",i);break;case"onClick":p!=null&&(i.onclick=Ni);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xk.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(b=u.endsWith("Capture"),l=u.slice(2,b?u.length-7:void 0),_=i[js]||null,_=_!=null?_[u]:null,typeof _=="function"&&i.removeEventListener(l,_,b),typeof p=="function")){typeof _!="function"&&_!==null&&(u in i?i[u]=null:i.hasAttribute(u)&&i.removeAttribute(u)),i.addEventListener(l,p,b);break e}u in i?i[u]=p:p===!0?i.setAttribute(u,""):Vf(i,u,p)}}}function Qn(i,l,u){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xt("error",i),xt("load",i);var p=!1,b=!1,_;for(_ in u)if(u.hasOwnProperty(_)){var N=u[_];if(N!=null)switch(_){case"src":p=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,l));default:Ut(i,l,_,N,u,null)}}b&&Ut(i,l,"srcSet",u.srcSet,u,null),p&&Ut(i,l,"src",u.src,u,null);return;case"input":xt("invalid",i);var L=_=N=b=null,Y=null,le=null;for(p in u)if(u.hasOwnProperty(p)){var me=u[p];if(me!=null)switch(p){case"name":b=me;break;case"type":N=me;break;case"checked":Y=me;break;case"defaultChecked":le=me;break;case"value":_=me;break;case"defaultValue":L=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(s(137,l));break;default:Ut(i,l,p,me,u,null)}}Nk(i,_,L,Y,le,N,b,!1);return;case"select":xt("invalid",i),p=N=_=null;for(b in u)if(u.hasOwnProperty(b)&&(L=u[b],L!=null))switch(b){case"value":_=L;break;case"defaultValue":N=L;break;case"multiple":p=L;default:Ut(i,l,b,L,u,null)}l=_,u=N,i.multiple=!!p,l!=null?jo(i,!!p,l,!1):u!=null&&jo(i,!!p,u,!0);return;case"textarea":xt("invalid",i),_=b=p=null;for(N in u)if(u.hasOwnProperty(N)&&(L=u[N],L!=null))switch(N){case"value":p=L;break;case"defaultValue":b=L;break;case"children":_=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(s(91));break;default:Ut(i,l,N,L,u,null)}Ak(i,p,b,_);return;case"option":for(Y in u)u.hasOwnProperty(Y)&&(p=u[Y],p!=null)&&(Y==="selected"?i.selected=p&&typeof p!="function"&&typeof p!="symbol":Ut(i,l,Y,p,u,null));return;case"dialog":xt("beforetoggle",i),xt("toggle",i),xt("cancel",i),xt("close",i);break;case"iframe":case"object":xt("load",i);break;case"video":case"audio":for(p=0;p<hh.length;p++)xt(hh[p],i);break;case"image":xt("error",i),xt("load",i);break;case"details":xt("toggle",i);break;case"embed":case"source":case"link":xt("error",i),xt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in u)if(u.hasOwnProperty(le)&&(p=u[le],p!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,l));default:Ut(i,l,le,p,u,null)}return;default:if(Fy(l)){for(me in u)u.hasOwnProperty(me)&&(p=u[me],p!==void 0&&Tv(i,l,me,p,u,void 0));return}}for(L in u)u.hasOwnProperty(L)&&(p=u[L],p!=null&&Ut(i,l,L,p,u,null))}function hL(i,l,u,p){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,_=null,N=null,L=null,Y=null,le=null,me=null;for(he in u){var ye=u[he];if(u.hasOwnProperty(he)&&ye!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":Y=ye;default:p.hasOwnProperty(he)||Ut(i,l,he,null,p,ye)}}for(var ce in p){var he=p[ce];if(ye=u[ce],p.hasOwnProperty(ce)&&(he!=null||ye!=null))switch(ce){case"type":_=he;break;case"name":b=he;break;case"checked":le=he;break;case"defaultChecked":me=he;break;case"value":N=he;break;case"defaultValue":L=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(s(137,l));break;default:he!==ye&&Ut(i,l,ce,he,p,ye)}}Uy(i,N,L,Y,le,me,_,b);return;case"select":he=N=L=ce=null;for(_ in u)if(Y=u[_],u.hasOwnProperty(_)&&Y!=null)switch(_){case"value":break;case"multiple":he=Y;default:p.hasOwnProperty(_)||Ut(i,l,_,null,p,Y)}for(b in p)if(_=p[b],Y=u[b],p.hasOwnProperty(b)&&(_!=null||Y!=null))switch(b){case"value":ce=_;break;case"defaultValue":L=_;break;case"multiple":N=_;default:_!==Y&&Ut(i,l,b,_,p,Y)}l=L,u=N,p=he,ce!=null?jo(i,!!u,ce,!1):!!p!=!!u&&(l!=null?jo(i,!!u,l,!0):jo(i,!!u,u?[]:"",!1));return;case"textarea":he=ce=null;for(L in u)if(b=u[L],u.hasOwnProperty(L)&&b!=null&&!p.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:Ut(i,l,L,null,p,b)}for(N in p)if(b=p[N],_=u[N],p.hasOwnProperty(N)&&(b!=null||_!=null))switch(N){case"value":ce=b;break;case"defaultValue":he=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:b!==_&&Ut(i,l,N,b,p,_)}Ek(i,ce,he);return;case"option":for(var Ue in u)ce=u[Ue],u.hasOwnProperty(Ue)&&ce!=null&&!p.hasOwnProperty(Ue)&&(Ue==="selected"?i.selected=!1:Ut(i,l,Ue,null,p,ce));for(Y in p)ce=p[Y],he=u[Y],p.hasOwnProperty(Y)&&ce!==he&&(ce!=null||he!=null)&&(Y==="selected"?i.selected=ce&&typeof ce!="function"&&typeof ce!="symbol":Ut(i,l,Y,ce,p,he));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ze in u)ce=u[Ze],u.hasOwnProperty(Ze)&&ce!=null&&!p.hasOwnProperty(Ze)&&Ut(i,l,Ze,null,p,ce);for(le in p)if(ce=p[le],he=u[le],p.hasOwnProperty(le)&&ce!==he&&(ce!=null||he!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(s(137,l));break;default:Ut(i,l,le,ce,p,he)}return;default:if(Fy(l)){for(var Vt in u)ce=u[Vt],u.hasOwnProperty(Vt)&&ce!==void 0&&!p.hasOwnProperty(Vt)&&Tv(i,l,Vt,void 0,p,ce);for(me in p)ce=p[me],he=u[me],!p.hasOwnProperty(me)||ce===he||ce===void 0&&he===void 0||Tv(i,l,me,ce,p,he);return}}for(var se in u)ce=u[se],u.hasOwnProperty(se)&&ce!=null&&!p.hasOwnProperty(se)&&Ut(i,l,se,null,p,ce);for(ye in p)ce=p[ye],he=u[ye],!p.hasOwnProperty(ye)||ce===he||ce==null&&he==null||Ut(i,l,ye,ce,p,he)}function O4(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function dL(){if(typeof performance.getEntriesByType=="function"){for(var i=0,l=0,u=performance.getEntriesByType("resource"),p=0;p<u.length;p++){var b=u[p],_=b.transferSize,N=b.initiatorType,L=b.duration;if(_&&L&&O4(N)){for(N=0,L=b.responseEnd,p+=1;p<u.length;p++){var Y=u[p],le=Y.startTime;if(le>L)break;var me=Y.transferSize,ye=Y.initiatorType;me&&O4(ye)&&(Y=Y.responseEnd,N+=me*(Y<L?1:(L-le)/(Y-le)))}if(--p,l+=8*(_+N)/(b.duration/1e3),i++,10<i)break}}if(0<i)return l/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Ov=null,Rv=null;function Hp(i){return i.nodeType===9?i:i.ownerDocument}function R4(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function B4(i,l){if(i===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&l==="foreignObject"?0:i}function Bv(i,l){return i==="textarea"||i==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Mv=null;function fL(){var i=window.event;return i&&i.type==="popstate"?i===Mv?!1:(Mv=i,!0):(Mv=null,!1)}var M4=typeof setTimeout=="function"?setTimeout:void 0,pL=typeof clearTimeout=="function"?clearTimeout:void 0,D4=typeof Promise=="function"?Promise:void 0,mL=typeof queueMicrotask=="function"?queueMicrotask:typeof D4<"u"?function(i){return D4.resolve(null).then(i).catch(gL)}:M4;function gL(i){setTimeout(function(){throw i})}function Ra(i){return i==="head"}function L4(i,l){var u=l,p=0;do{var b=u.nextSibling;if(i.removeChild(u),b&&b.nodeType===8)if(u=b.data,u==="/$"||u==="/&"){if(p===0){i.removeChild(b),lc(l);return}p--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")p++;else if(u==="html")fh(i.ownerDocument.documentElement);else if(u==="head"){u=i.ownerDocument.head,fh(u);for(var _=u.firstChild;_;){var N=_.nextSibling,L=_.nodeName;_[Ou]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&_.rel.toLowerCase()==="stylesheet"||u.removeChild(_),_=N}}else u==="body"&&fh(i.ownerDocument.body);u=b}while(u);lc(l)}function I4(i,l){var u=i;i=0;do{var p=u.nextSibling;if(u.nodeType===1?l?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(l?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),p&&p.nodeType===8)if(u=p.data,u==="/$"){if(i===0)break;i--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||i++;u=p}while(u)}function Dv(i){var l=i.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var u=l;switch(l=l.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Dv(u),$y(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}i.removeChild(u)}}function yL(i,l,u,p){for(;i.nodeType===1;){var b=u;if(i.nodeName.toLowerCase()!==l.toLowerCase()){if(!p&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(p){if(!i[Ou])switch(l){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==b.rel||i.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||i.getAttribute("title")!==(b.title==null?null:b.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(b.src==null?null:b.src)||i.getAttribute("type")!==(b.type==null?null:b.type)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(l==="input"&&i.type==="hidden"){var _=b.name==null?null:""+b.name;if(b.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Sr(i.nextSibling),i===null)break}return null}function vL(i,l,u){if(l==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=Sr(i.nextSibling),i===null))return null;return i}function P4(i,l){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Sr(i.nextSibling),i===null))return null;return i}function Lv(i){return i.data==="$?"||i.data==="$~"}function Iv(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function bL(i,l){var u=i.ownerDocument;if(i.data==="$~")i._reactRetry=l;else if(i.data!=="$?"||u.readyState!=="loading")l();else{var p=function(){l(),u.removeEventListener("DOMContentLoaded",p)};u.addEventListener("DOMContentLoaded",p),i._reactRetry=p}}function Sr(i){for(;i!=null;i=i.nextSibling){var l=i.nodeType;if(l===1||l===3)break;if(l===8){if(l=i.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return i}var Pv=null;function z4(i){i=i.nextSibling;for(var l=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"||u==="/&"){if(l===0)return Sr(i.nextSibling);l--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||l++}i=i.nextSibling}return null}function $4(i){i=i.previousSibling;for(var l=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(l===0)return i;l--}else u!=="/$"&&u!=="/&"||l++}i=i.previousSibling}return null}function H4(i,l,u){switch(l=Hp(u),i){case"html":if(i=l.documentElement,!i)throw Error(s(452));return i;case"head":if(i=l.head,!i)throw Error(s(453));return i;case"body":if(i=l.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function fh(i){for(var l=i.attributes;l.length;)i.removeAttributeNode(l[0]);$y(i)}var kr=new Map,U4=new Set;function Up(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ui=X.d;X.d={f:_L,r:xL,D:wL,C:SL,L:kL,m:CL,X:EL,S:NL,M:AL};function _L(){var i=Ui.f(),l=Bp();return i||l}function xL(i){var l=No(i);l!==null&&l.tag===5&&l.type==="form"?iN(l):Ui.r(i)}var rc=typeof document>"u"?null:document;function V4(i,l,u){var p=rc;if(p&&typeof l=="string"&&l){var b=gr(l);b='link[rel="'+i+'"][href="'+b+'"]',typeof u=="string"&&(b+='[crossorigin="'+u+'"]'),U4.has(b)||(U4.add(b),i={rel:i,crossOrigin:u,href:l},p.querySelector(b)===null&&(l=p.createElement("link"),Qn(l,"link",i),zn(l),p.head.appendChild(l)))}}function wL(i){Ui.D(i),V4("dns-prefetch",i,null)}function SL(i,l){Ui.C(i,l),V4("preconnect",i,l)}function kL(i,l,u){Ui.L(i,l,u);var p=rc;if(p&&i&&l){var b='link[rel="preload"][as="'+gr(l)+'"]';l==="image"&&u&&u.imageSrcSet?(b+='[imagesrcset="'+gr(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(b+='[imagesizes="'+gr(u.imageSizes)+'"]')):b+='[href="'+gr(i)+'"]';var _=b;switch(l){case"style":_=ic(i);break;case"script":_=ac(i)}kr.has(_)||(i=m({rel:"preload",href:l==="image"&&u&&u.imageSrcSet?void 0:i,as:l},u),kr.set(_,i),p.querySelector(b)!==null||l==="style"&&p.querySelector(ph(_))||l==="script"&&p.querySelector(mh(_))||(l=p.createElement("link"),Qn(l,"link",i),zn(l),p.head.appendChild(l)))}}function CL(i,l){Ui.m(i,l);var u=rc;if(u&&i){var p=l&&typeof l.as=="string"?l.as:"script",b='link[rel="modulepreload"][as="'+gr(p)+'"][href="'+gr(i)+'"]',_=b;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=ac(i)}if(!kr.has(_)&&(i=m({rel:"modulepreload",href:i},l),kr.set(_,i),u.querySelector(b)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(mh(_)))return}p=u.createElement("link"),Qn(p,"link",i),zn(p),u.head.appendChild(p)}}}function NL(i,l,u){Ui.S(i,l,u);var p=rc;if(p&&i){var b=Eo(p).hoistableStyles,_=ic(i);l=l||"default";var N=b.get(_);if(!N){var L={loading:0,preload:null};if(N=p.querySelector(ph(_)))L.loading=5;else{i=m({rel:"stylesheet",href:i,"data-precedence":l},u),(u=kr.get(_))&&zv(i,u);var Y=N=p.createElement("link");zn(Y),Qn(Y,"link",i),Y._p=new Promise(function(le,me){Y.onload=le,Y.onerror=me}),Y.addEventListener("load",function(){L.loading|=1}),Y.addEventListener("error",function(){L.loading|=2}),L.loading|=4,Vp(N,l,p)}N={type:"stylesheet",instance:N,count:1,state:L},b.set(_,N)}}}function EL(i,l){Ui.X(i,l);var u=rc;if(u&&i){var p=Eo(u).hoistableScripts,b=ac(i),_=p.get(b);_||(_=u.querySelector(mh(b)),_||(i=m({src:i,async:!0},l),(l=kr.get(b))&&$v(i,l),_=u.createElement("script"),zn(_),Qn(_,"link",i),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},p.set(b,_))}}function AL(i,l){Ui.M(i,l);var u=rc;if(u&&i){var p=Eo(u).hoistableScripts,b=ac(i),_=p.get(b);_||(_=u.querySelector(mh(b)),_||(i=m({src:i,async:!0,type:"module"},l),(l=kr.get(b))&&$v(i,l),_=u.createElement("script"),zn(_),Qn(_,"link",i),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},p.set(b,_))}}function F4(i,l,u,p){var b=(b=ne.current)?Up(b):null;if(!b)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(l=ic(u.href),u=Eo(b).hoistableStyles,p=u.get(l),p||(p={type:"style",instance:null,count:0,state:null},u.set(l,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){i=ic(u.href);var _=Eo(b).hoistableStyles,N=_.get(i);if(N||(b=b.ownerDocument||b,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,N),(_=b.querySelector(ph(i)))&&!_._p&&(N.instance=_,N.state.loading=5),kr.has(i)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},kr.set(i,u),_||jL(b,i,u,N.state))),l&&p===null)throw Error(s(528,""));return N}if(l&&p!==null)throw Error(s(529,""));return null;case"script":return l=u.async,u=u.src,typeof u=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=ac(u),u=Eo(b).hoistableScripts,p=u.get(l),p||(p={type:"script",instance:null,count:0,state:null},u.set(l,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function ic(i){return'href="'+gr(i)+'"'}function ph(i){return'link[rel="stylesheet"]['+i+"]"}function q4(i){return m({},i,{"data-precedence":i.precedence,precedence:null})}function jL(i,l,u,p){i.querySelector('link[rel="preload"][as="style"]['+l+"]")?p.loading=1:(l=i.createElement("link"),p.preload=l,l.addEventListener("load",function(){return p.loading|=1}),l.addEventListener("error",function(){return p.loading|=2}),Qn(l,"link",u),zn(l),i.head.appendChild(l))}function ac(i){return'[src="'+gr(i)+'"]'}function mh(i){return"script[async]"+i}function K4(i,l,u){if(l.count++,l.instance===null)switch(l.type){case"style":var p=i.querySelector('style[data-href~="'+gr(u.href)+'"]');if(p)return l.instance=p,zn(p),p;var b=m({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return p=(i.ownerDocument||i).createElement("style"),zn(p),Qn(p,"style",b),Vp(p,u.precedence,i),l.instance=p;case"stylesheet":b=ic(u.href);var _=i.querySelector(ph(b));if(_)return l.state.loading|=4,l.instance=_,zn(_),_;p=q4(u),(b=kr.get(b))&&zv(p,b),_=(i.ownerDocument||i).createElement("link"),zn(_);var N=_;return N._p=new Promise(function(L,Y){N.onload=L,N.onerror=Y}),Qn(_,"link",p),l.state.loading|=4,Vp(_,u.precedence,i),l.instance=_;case"script":return _=ac(u.src),(b=i.querySelector(mh(_)))?(l.instance=b,zn(b),b):(p=u,(b=kr.get(_))&&(p=m({},u),$v(p,b)),i=i.ownerDocument||i,b=i.createElement("script"),zn(b),Qn(b,"link",p),i.head.appendChild(b),l.instance=b);case"void":return null;default:throw Error(s(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(p=l.instance,l.state.loading|=4,Vp(p,u.precedence,i));return l.instance}function Vp(i,l,u){for(var p=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=p.length?p[p.length-1]:null,_=b,N=0;N<p.length;N++){var L=p[N];if(L.dataset.precedence===l)_=L;else if(_!==b)break}_?_.parentNode.insertBefore(i,_.nextSibling):(l=u.nodeType===9?u.head:u,l.insertBefore(i,l.firstChild))}function zv(i,l){i.crossOrigin==null&&(i.crossOrigin=l.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=l.referrerPolicy),i.title==null&&(i.title=l.title)}function $v(i,l){i.crossOrigin==null&&(i.crossOrigin=l.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=l.referrerPolicy),i.integrity==null&&(i.integrity=l.integrity)}var Fp=null;function W4(i,l,u){if(Fp===null){var p=new Map,b=Fp=new Map;b.set(u,p)}else b=Fp,p=b.get(u),p||(p=new Map,b.set(u,p));if(p.has(i))return p;for(p.set(i,null),u=u.getElementsByTagName(i),b=0;b<u.length;b++){var _=u[b];if(!(_[Ou]||_[Gn]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var N=_.getAttribute(l)||"";N=i+N;var L=p.get(N);L?L.push(_):p.set(N,[_])}}return p}function G4(i,l,u){i=i.ownerDocument||i,i.head.insertBefore(u,l==="title"?i.querySelector("head > title"):null)}function TL(i,l,u){if(u===1||l.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;return l.rel==="stylesheet"?(i=l.disabled,typeof l.precedence=="string"&&i==null):!0;case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function Y4(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function OL(i,l,u,p){if(u.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var b=ic(p.href),_=l.querySelector(ph(b));if(_){l=_._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(i.count++,i=qp.bind(i),l.then(i,i)),u.state.loading|=4,u.instance=_,zn(_);return}_=l.ownerDocument||l,p=q4(p),(b=kr.get(b))&&zv(p,b),_=_.createElement("link"),zn(_);var N=_;N._p=new Promise(function(L,Y){N.onload=L,N.onerror=Y}),Qn(_,"link",p),u.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(u,l),(l=u.state.preload)&&(u.state.loading&3)===0&&(i.count++,u=qp.bind(i),l.addEventListener("load",u),l.addEventListener("error",u))}}var Hv=0;function RL(i,l){return i.stylesheets&&i.count===0&&Wp(i,i.stylesheets),0<i.count||0<i.imgCount?function(u){var p=setTimeout(function(){if(i.stylesheets&&Wp(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+l);0<i.imgBytes&&Hv===0&&(Hv=62500*dL());var b=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Wp(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>Hv?50:800)+l);return i.unsuspend=u,function(){i.unsuspend=null,clearTimeout(p),clearTimeout(b)}}:null}function qp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Wp(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Kp=null;function Wp(i,l){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Kp=new Map,l.forEach(BL,i),Kp=null,qp.call(i))}function BL(i,l){if(!(l.state.loading&4)){var u=Kp.get(i);if(u)var p=u.get(null);else{u=new Map,Kp.set(i,u);for(var b=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<b.length;_++){var N=b[_];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(u.set(N.dataset.precedence,N),p=N)}p&&u.set(null,p)}b=l.instance,N=b.getAttribute("data-precedence"),_=u.get(N)||p,_===p&&u.set(null,b),u.set(N,b),this.count++,p=qp.bind(this),b.addEventListener("load",p),b.addEventListener("error",p),_?_.parentNode.insertBefore(b,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(b,i.firstChild)),l.state.loading|=4}}var gh={$$typeof:A,Provider:null,Consumer:null,_currentValue:U,_currentValue2:U,_threadCount:0};function ML(i,l,u,p,b,_,N,L,Y){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=So(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=So(0),this.hiddenUpdates=So(null),this.identifierPrefix=p,this.onUncaughtError=b,this.onCaughtError=_,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function X4(i,l,u,p,b,_,N,L,Y,le,me,ye){return i=new ML(i,l,u,N,Y,le,me,ye,L),l=1,_===!0&&(l|=24),_=Gs(3,null,null,l),i.current=_,_.stateNode=i,l=_1(),l.refCount++,i.pooledCache=l,l.refCount++,_.memoizedState={element:p,isDehydrated:u,cache:l},k1(_),i}function J4(i){return i?(i=Io,i):Io}function Q4(i,l,u,p,b,_){b=J4(b),p.context===null?p.context=b:p.pendingContext=b,p=xa(l),p.payload={element:u},_=_===void 0?null:_,_!==null&&(p.callback=_),u=wa(i,p,l),u!==null&&(Ds(u,i,l),Gu(u,i,l))}function Z4(i,l){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<l?u:l}}function Uv(i,l){Z4(i,l),(i=i.alternate)&&Z4(i,l)}function e5(i){if(i.tag===13||i.tag===31){var l=gl(i,67108864);l!==null&&Ds(l,i,67108864),Uv(i,67108864)}}function t5(i){if(i.tag===13||i.tag===31){var l=Zs();l=Iy(l);var u=gl(i,l);u!==null&&Ds(u,i,l),Uv(i,l)}}var Gp=!0;function DL(i,l,u,p){var b=P.T;P.T=null;var _=X.p;try{X.p=2,Vv(i,l,u,p)}finally{X.p=_,P.T=b}}function LL(i,l,u,p){var b=P.T;P.T=null;var _=X.p;try{X.p=8,Vv(i,l,u,p)}finally{X.p=_,P.T=b}}function Vv(i,l,u,p){if(Gp){var b=Fv(p);if(b===null)jv(i,l,p,Yp,u),s5(i,p);else if(PL(b,i,l,u,p))p.stopPropagation();else if(s5(i,p),l&4&&-1<IL.indexOf(i)){for(;b!==null;){var _=No(b);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var N=ze(_.pendingLanes);if(N!==0){var L=_;for(L.pendingLanes|=2,L.entangledLanes|=2;N;){var Y=1<<31-Oe(N);L.entanglements[1]|=Y,N&=~Y}ti(_),(Dt&6)===0&&(Op=Rt()+500,uh(0))}}break;case 31:case 13:L=gl(_,2),L!==null&&Ds(L,_,2),Bp(),Uv(_,2)}if(_=Fv(p),_===null&&jv(i,l,p,Yp,u),_===b)break;b=_}b!==null&&p.stopPropagation()}else jv(i,l,p,null,u)}}function Fv(i){return i=Ky(i),qv(i)}var Yp=null;function qv(i){if(Yp=null,i=Co(i),i!==null){var l=a(i);if(l===null)i=null;else{var u=l.tag;if(u===13){if(i=o(l),i!==null)return i;i=null}else if(u===31){if(i=c(l),i!==null)return i;i=null}else if(u===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;i=null}else l!==i&&(i=null)}}return Yp=i,null}function n5(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Wn()){case pe:return 2;case _e:return 8;case Ke:case it:return 32;case St:return 268435456;default:return 32}default:return 32}}var Kv=!1,Ba=null,Ma=null,Da=null,yh=new Map,vh=new Map,La=[],IL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function s5(i,l){switch(i){case"focusin":case"focusout":Ba=null;break;case"dragenter":case"dragleave":Ma=null;break;case"mouseover":case"mouseout":Da=null;break;case"pointerover":case"pointerout":yh.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":vh.delete(l.pointerId)}}function bh(i,l,u,p,b,_){return i===null||i.nativeEvent!==_?(i={blockedOn:l,domEventName:u,eventSystemFlags:p,nativeEvent:_,targetContainers:[b]},l!==null&&(l=No(l),l!==null&&e5(l)),i):(i.eventSystemFlags|=p,l=i.targetContainers,b!==null&&l.indexOf(b)===-1&&l.push(b),i)}function PL(i,l,u,p,b){switch(l){case"focusin":return Ba=bh(Ba,i,l,u,p,b),!0;case"dragenter":return Ma=bh(Ma,i,l,u,p,b),!0;case"mouseover":return Da=bh(Da,i,l,u,p,b),!0;case"pointerover":var _=b.pointerId;return yh.set(_,bh(yh.get(_)||null,i,l,u,p,b)),!0;case"gotpointercapture":return _=b.pointerId,vh.set(_,bh(vh.get(_)||null,i,l,u,p,b)),!0}return!1}function r5(i){var l=Co(i.target);if(l!==null){var u=a(l);if(u!==null){if(l=u.tag,l===13){if(l=o(u),l!==null){i.blockedOn=l,vk(i.priority,function(){t5(u)});return}}else if(l===31){if(l=c(u),l!==null){i.blockedOn=l,vk(i.priority,function(){t5(u)});return}}else if(l===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Xp(i){if(i.blockedOn!==null)return!1;for(var l=i.targetContainers;0<l.length;){var u=Fv(i.nativeEvent);if(u===null){u=i.nativeEvent;var p=new u.constructor(u.type,u);qy=p,u.target.dispatchEvent(p),qy=null}else return l=No(u),l!==null&&e5(l),i.blockedOn=u,!1;l.shift()}return!0}function i5(i,l,u){Xp(i)&&u.delete(l)}function zL(){Kv=!1,Ba!==null&&Xp(Ba)&&(Ba=null),Ma!==null&&Xp(Ma)&&(Ma=null),Da!==null&&Xp(Da)&&(Da=null),yh.forEach(i5),vh.forEach(i5)}function Jp(i,l){i.blockedOn===l&&(i.blockedOn=null,Kv||(Kv=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,zL)))}var Qp=null;function a5(i){Qp!==i&&(Qp=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Qp===i&&(Qp=null);for(var l=0;l<i.length;l+=3){var u=i[l],p=i[l+1],b=i[l+2];if(typeof p!="function"){if(qv(p||u)===null)continue;break}var _=No(u);_!==null&&(i.splice(l,3),l-=3,F1(_,{pending:!0,data:b,method:u.method,action:p},p,b))}}))}function lc(i){function l(Y){return Jp(Y,i)}Ba!==null&&Jp(Ba,i),Ma!==null&&Jp(Ma,i),Da!==null&&Jp(Da,i),yh.forEach(l),vh.forEach(l);for(var u=0;u<La.length;u++){var p=La[u];p.blockedOn===i&&(p.blockedOn=null)}for(;0<La.length&&(u=La[0],u.blockedOn===null);)r5(u),u.blockedOn===null&&La.shift();if(u=(i.ownerDocument||i).$$reactFormReplay,u!=null)for(p=0;p<u.length;p+=3){var b=u[p],_=u[p+1],N=b[js]||null;if(typeof _=="function")N||a5(u);else if(N){var L=null;if(_&&_.hasAttribute("formAction")){if(b=_,N=_[js]||null)L=N.formAction;else if(qv(b)!==null)continue}else L=N.action;typeof L=="function"?u[p+1]=L:(u.splice(p,3),p-=3),a5(u)}}}function l5(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(N){return b=N})},focusReset:"manual",scroll:"manual"})}function l(){b!==null&&(b(),b=null),p||setTimeout(u,20)}function u(){if(!p&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,b=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(u,100),function(){p=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),b!==null&&(b(),b=null)}}}function Wv(i){this._internalRoot=i}Zp.prototype.render=Wv.prototype.render=function(i){var l=this._internalRoot;if(l===null)throw Error(s(409));var u=l.current,p=Zs();Q4(u,p,i,l,null,null)},Zp.prototype.unmount=Wv.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var l=i.containerInfo;Q4(i.current,2,null,i,null,null),Bp(),l[ko]=null}};function Zp(i){this._internalRoot=i}Zp.prototype.unstable_scheduleHydration=function(i){if(i){var l=yk();i={blockedOn:null,target:i,priority:l};for(var u=0;u<La.length&&l!==0&&l<La[u].priority;u++);La.splice(u,0,i),u===0&&r5(i)}};var o5=e.version;if(o5!=="19.2.3")throw Error(s(527,o5,"19.2.3"));X.findDOMNode=function(i){var l=i._reactInternals;if(l===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=d(l),i=i!==null?g(i):null,i=i===null?null:i.stateNode,i};var $L={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var em=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!em.isDisabled&&em.supportsFiber)try{ae=em.inject($L),fe=em}catch{}}return xh.createRoot=function(i,l){if(!r(i))throw Error(s(299));var u=!1,p="",b=mN,_=gN,N=yN;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(_=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError)),l=X4(i,1,!1,null,null,u,p,null,b,_,N,l5),i[ko]=l.current,Av(i),new Wv(l)},xh.hydrateRoot=function(i,l,u){if(!r(i))throw Error(s(299));var p=!1,b="",_=mN,N=gN,L=yN,Y=null;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(b=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(N=u.onCaughtError),u.onRecoverableError!==void 0&&(L=u.onRecoverableError),u.formState!==void 0&&(Y=u.formState)),l=X4(i,1,!0,l,u??null,p,b,Y,_,N,L,l5),l.context=J4(null),u=l.current,p=Zs(),p=Iy(p),b=xa(p),b.callback=null,wa(u,b,p),u=p,l.current.lanes=u,hl(l,u),ti(l),i[ko]=l.current,Av(i),new Zp(l)},xh.version="19.2.3",xh}var b5;function YL(){if(b5)return Xv.exports;b5=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Xv.exports=GL(),Xv.exports}var XL=YL(),eb={exports:{}},tb={};var _5;function JL(){if(_5)return tb;_5=1;var t=ug().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return tb.c=function(e){return t.H.useMemoCache(e)},tb}var x5;function QL(){return x5||(x5=1,eb.exports=JL()),eb.exports}var He=QL();const ZL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),eI=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),w5=t=>{const e=eI(t);return e.charAt(0).toUpperCase()+e.slice(1)},Xj=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),tI=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var nI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const sI=W.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:a,iconNode:o,...c},h)=>W.createElement("svg",{ref:h,...nI,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:Xj("lucide",r),...!a&&!tI(c)&&{"aria-hidden":"true"},...c},[...o.map(([d,g])=>W.createElement(d,g)),...Array.isArray(a)?a:[a]]));const je=(t,e)=>{const n=W.forwardRef(({className:s,...r},a)=>W.createElement(sI,{ref:a,iconNode:e,className:Xj(`lucide-${ZL(w5(t))}`,`lucide-${t}`,s),...r}));return n.displayName=w5(t),n};const rI=[["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}],["path",{d:"M10 4v4",key:"pp8u80"}],["path",{d:"M2 8h20",key:"d11cs7"}],["path",{d:"M6 4v4",key:"1svtjw"}]],iI=je("app-window",rI);const aI=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],al=je("box",aI);const lI=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Jj=je("calendar",lI);const oI=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],En=je("check",oI);const cI=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ln=je("chevron-down",cI);const uI=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Hs=je("chevron-right",uI);const hI=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],dI=je("chevron-up",hI);const fI=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],pI=je("chevrons-up-down",fI);const mI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],mo=je("circle-alert",mI);const gI=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],yI=je("circle-check-big",gI);const vI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Lr=je("circle-check",vI);const bI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],cf=je("circle-question-mark",bI);const _I=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],bi=je("circle-x",_I);const xI=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ll=je("clock",xI);const wI=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],SI=je("cloud",wI);const kI=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],CI=je("columns-3",kI);const NI=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],us=je("copy",NI);const EI=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],uf=je("cpu",EI);const AI=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],go=je("database",AI);const jI=[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]],TI=je("diamond",jI);const OI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Qj=je("disc",OI);const RI=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],tS=je("external-link",RI);const BI=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],nS=je("eye-off",BI);const MI=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],sS=je("eye",MI);const DI=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],g_=je("file-check",DI);const LI=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],II=je("file-down",LI);const PI=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ea=je("file-text",PI);const zI=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Zj=je("folder-open",zI);const $I=[["path",{d:"M2 9.35V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h7",key:"y8kt7d"}],["path",{d:"m8 16 3-3-3-3",key:"rlqrt1"}]],HI=je("folder-symlink",$I);const UI=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],VI=je("folder-tree",UI);const FI=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],qI=je("funnel",FI);const KI=[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]],eT=je("ghost",KI);const WI=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],r0=je("git-branch",WI);const GI=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],YI=je("git-compare",GI);const XI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Qi=je("globe",XI);const JI=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],Us=je("hard-drive",JI);const QI=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],ZI=je("hash",QI);const e7=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],hg=je("hexagon",e7);const t7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],n7=je("info",t7);const s7=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],dg=je("key-round",s7);const r7=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],hf=je("key",r7);const i7=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Xl=je("layers",i7);const a7=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],l7=je("layout-grid",a7);const o7=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],au=je("link",o7);const c7=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],u7=je("list",c7);const h7=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Fl=je("loader-circle",h7);const d7=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],fg=je("lock",d7);const f7=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],p7=je("mail",f7);const m7=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],g7=je("maximize-2",m7);const y7=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],ur=je("network",y7);const v7=[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]],b7=je("newspaper",v7);const _7=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],tT=je("package",_7);const x7=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],rS=je("pause",x7);const w7=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],iS=je("play",w7);const S7=[["path",{d:"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z",key:"goz73y"}],["path",{d:"m2 22 3-3",key:"19mgm9"}],["path",{d:"M7.5 13.5 10 11",key:"7xgeeb"}],["path",{d:"M10.5 16.5 13 14",key:"10btkg"}],["path",{d:"m18 3-4 4h6l-4 4",key:"16psg9"}]],k7=je("plug-zap",S7);const C7=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M17 8a1 1 0 0 1 1 1v4a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1z",key:"1xoxul"}],["path",{d:"M9 8V2",key:"14iosj"}]],N7=je("plug",C7);const E7=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],A7=je("puzzle",E7);const j7=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],T7=je("radio",j7);const O7=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],gn=je("refresh-cw",O7);const R7=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],nT=je("rocket",R7);const B7=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],M7=je("rotate-ccw",B7);const D7=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],$d=je("route",D7);const L7=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],I7=je("save",L7);const P7=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],z7=je("send",P7);const $7=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],mi=je("server",$7);const H7=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],U7=je("settings",H7);const V7=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],F7=je("share-2",V7);const q7=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],K7=je("shield-check",q7);const W7=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],lu=je("shield",W7);const G7=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Y7=je("sparkles",G7);const X7=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],J7=je("tag",X7);const Q7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Z7=je("target",Q7);const eP=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],tP=je("trash-2",eP);const nP=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],i0=je("triangle-alert",nP);const sP=[["path",{d:"m19 5 3-3",key:"yk6iyv"}],["path",{d:"m2 22 3-3",key:"19mgm9"}],["path",{d:"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z",key:"goz73y"}],["path",{d:"M7.5 13.5 10 11",key:"7xgeeb"}],["path",{d:"M10.5 16.5 13 14",key:"10btkg"}],["path",{d:"m12 6 6 6 2.3-2.3a2.4 2.4 0 0 0 0-3.4l-2.6-2.6a2.4 2.4 0 0 0-3.4 0Z",key:"1snsnr"}]],rP=je("unplug",sP);const iP=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],sT=je("user",iP);const aP=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],aS=je("x",aP);const lP=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],lS=je("zap",lP);const oP=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],cP=je("zoom-in",oP);const uP=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],hP=je("zoom-out",uP),a0=new Map,l0=new Map,_d=new Map;function dP(t){t?(a0.delete(t),l0.delete(t),_d.delete(t)):(a0.clear(),l0.clear(),_d.clear())}function S5(t){return t===""?0:t==="apps"?1:t==="batch"?2:t==="networking.k8s.io"?3:t==="storage.k8s.io"?4:t==="rbac.authorization.k8s.io"?5:t.endsWith(".k8s.io")?10:100}function fP(t){const e=t.group||"";return e?`${t.name}.${e}`:t.name}function ql(t){const e=t.group||"",n=t.version||"v1";return e?`/apis/${e}/${n}`:"/api/v1"}function k5(t,e,n){const s=fP(n);t.set(s,n);const r=S5(n.group||""),a=o=>{const c=e.get(o);if(!c)e.set(o,n);else{const h=S5(c.group||"");r<h&&e.set(o,n)}};if(a(n.name),n.singularName&&a(n.singularName),n.shortNames)for(const o of n.shortNames)a(o)}async function nb(t,e){const n=`/contexts/${e}${t}`,s=await fetch(n);if(!s.ok)throw new Error(`API request failed: ${s.status} ${s.statusText}`);return s.json()}async function pg(t){const e=l0.get(t);if(e)return e;const n=_d.get(t);if(n)return n;const s=(async()=>{const r=new Map,a=new Map;try{const o=await nb("/api/v1",t);for(const c of o.resources){if(c.name.includes("/"))continue;const h={...c,group:"",version:"v1"};k5(r,a,h)}}catch(o){console.warn("Failed to fetch core v1 resources:",o)}try{const o=await nb("/apis",t);await Promise.all(o.groups.map(async c=>{const h=c.preferredVersion?.version||c.versions[0]?.version;if(!h)return;const d=`/apis/${c.name}/${h}`;try{const g=await nb(d,t);for(const m of g.resources){if(m.name.includes("/"))continue;const v={...m,group:m.group||c.name,version:m.version||h};k5(r,a,v)}}catch(g){console.warn(`Failed to fetch resources for ${d}:`,g)}}))}catch(o){console.warn("Failed to fetch API groups:",o)}return a0.set(t,r),l0.set(t,a),_d.delete(t),a})();return _d.set(t,s),s}async function ou(t,e){return(await pg(t)).get(e)}async function pP(t,e){return await pg(t),a0.get(t)?.get(e)}async function C5(t,e,n){const s=await pg(t);let r="";n&&n.includes("/")&&(r=n.split("/")[0]);for(const a of s.values())if(a.kind===e)if(n){if((a.group||"")===r)return a}else return a;if(n){for(const a of s.values())if(a.kind===e)return a}}function mP(t){pg(t).catch(console.error)}function gP(t){const e=t.spec;if(!e)throw new Error("CRD is missing spec");const n=e.versions.find(a=>a.storage),s=e.versions.find(a=>a.served),r=n?.name||s?.name||e.versions[0]?.name;return{name:e.names.plural,singularName:e.names.singular||"",namespaced:e.scope==="Namespaced",group:e.group,version:r,kind:e.names.kind,verbs:["get","list","watch","create","update","patch","delete"],shortNames:e.names.shortNames}}async function aa(t,e){const n=e?`/contexts/${e}${t}`:t,s=await fetch(n);if(!s.ok)throw new Error(`API request failed: ${s.status} ${s.statusText}`);return s.json()}async function yP(t){return aa("/api/v1/namespaces",t)}async function vP(t){return(await aa("/apis/apiextensions.k8s.io/v1/customresourcedefinitions",t)).items}async function y_(t,e,n,s){const r=ql(e),a=e.namespaced&&s?`${r}/namespaces/${s}/${e.name}/${n}`:`${r}/${e.name}/${n}`;return aa(a,t)}async function rT(t,e,n,s,r){const a=ql(e),o=e.namespaced&&r?`${a}/namespaces/${r}/${e.name}/${n}`:`${a}/${e.name}/${n}`,c=`/contexts/${t}${o}`,h=await fetch(c,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!h.ok){const d=await h.text();let g=`API request failed: ${h.status} ${h.statusText}`;try{const m=JSON.parse(d);m.message&&(g=m.message)}catch{}throw new Error(g)}return h.json()}async function mg(t,e,n){const s=ql(e),r=e.namespaced&&n?`${s}/namespaces/${n}/${e.name}`:`${s}/${e.name}`;return(await aa(r,t)).items}async function v_(t,e,n){const s=n?`involvedObject.name=${e},involvedObject.namespace=${n}`:`involvedObject.name=${e}`,r=n?`/api/v1/namespaces/${n}/events?fieldSelector=${encodeURIComponent(s)}`:`/api/v1/events?fieldSelector=${encodeURIComponent(s)}`;return(await aa(r,t)).items.sort((o,c)=>{const h=o.lastTimestamp||o.eventTime||o.metadata?.creationTimestamp||"",d=c.lastTimestamp||c.eventTime||c.metadata?.creationTimestamp||"";return new Date(d).getTime()-new Date(h).getTime()})}let vc={contexts:[]};async function bP(){try{const[t,e]=await Promise.all([fetch("/config.json"),fetch("/contexts")]);if(t.ok){const n=await t.json();vc={...vc,...n}}else console.warn("Failed to load config.json, using defaults");if(e.ok){const n=await e.json();vc.contexts=n}else console.warn("Failed to load contexts, using defaults");return vc}catch(t){return console.warn("Error loading config:",t),vc}}function Hd(){return vc}function _P(t,e){return e.some(n=>n.includes("*")?new RegExp(`^${n.replace(/\*/g,".*")}$`).test(t):n===t)}function xP({namespaces:t,selectedNamespace:e,onSelectNamespace:n,disabled:s=!1,spaceLabels:r=[],platformNamespaces:a=[]}){const[o,c]=W.useState(!1),[h,d]=W.useState(""),[g,m]=W.useState(-1),v=W.useRef(null),y=W.useRef(null),x=W.useRef(null),w=W.useMemo(()=>$=>_P($,a),[a]),S=W.useMemo(()=>{const $=[],G=new Set;for(const F of r){const K=new Map;for(const J of t){const q=J.metadata?.name;if(!q||G.has(q))continue;const P=J.metadata?.labels?.[F];P&&(K.has(P)||K.set(P,[]),K.get(P).push(J),G.add(q))}for(const[J,q]of Array.from(K.entries()).sort(([P],[X])=>P.localeCompare(X)))$.push({label:J,namespaces:q.sort((P,X)=>(P.metadata?.name||"").localeCompare(X.metadata?.name||""))})}const z=t.filter(F=>{const K=F.metadata?.name;return K&&!G.has(K)&&!w(K)}).sort((F,K)=>(F.metadata?.name||"").localeCompare(K.metadata?.name||""));z.length>0&&$.push({label:"User",namespaces:z});const Q=t.filter(F=>{const K=F.metadata?.name;return K&&!G.has(K)&&w(K)}).sort((F,K)=>(F.metadata?.name||"").localeCompare(K.metadata?.name||""));return Q.length>0&&$.push({label:"Platform",namespaces:Q}),$},[t,r,w]),k=W.useMemo(()=>h===""?S:S.map($=>({...$,namespaces:$.namespaces.filter(G=>G.metadata?.name?.toLowerCase().includes(h.toLowerCase()))})).filter($=>$.namespaces.length>0),[S,h]),C=W.useMemo(()=>{const $=[];(h===""||"all namespaces".includes(h.toLowerCase()))&&$.push({value:"",label:"All Namespaces"});for(const z of k)for(const Q of z.namespaces){const F=Q.metadata?.name;F&&$.push({value:F,label:F})}return $},[k,h]),A=k.some($=>$.namespaces.length>0),B=h===""||"all namespaces".includes(h.toLowerCase());W.useEffect(()=>{if(!o)return;function $(G){v.current&&!v.current.contains(G.target)&&(c(!1),d(""))}return document.addEventListener("mousedown",$),()=>document.removeEventListener("mousedown",$)},[o]),W.useEffect(()=>{o&&(y.current?.focus(),m(-1))},[o]);const M=$=>{n($||void 0),c(!1),d("")},T=$=>{switch($.key){case"ArrowDown":$.preventDefault(),m(G=>Math.min(G+1,C.length-1));break;case"ArrowUp":$.preventDefault(),m(G=>Math.max(G-1,0));break;case"Enter":$.preventDefault(),g>=0&&g<C.length&&M(C[g].value);break;case"Escape":c(!1),d("");break}};W.useEffect(()=>{g>=0&&x.current&&x.current.querySelector(`[data-index="${g}"]`)?.scrollIntoView({block:"nearest"})},[g]);let H=-1;return f.jsxs("div",{className:"relative",ref:v,children:[f.jsxs("div",{className:"relative",children:[f.jsx("input",{ref:y,type:"text",className:"w-full px-3 py-1.5 pr-8 bg-neutral-50 dark:bg-neutral-950 border border-neutral-200 dark:border-neutral-700 text-neutral-900 dark:text-neutral-100 rounded-lg text-sm text-left disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-1 focus:ring-neutral-400/50 dark:focus:ring-neutral-500/50 cursor-default placeholder:text-neutral-400",value:o?h:e||"All Namespaces",onChange:$=>d($.target.value),onFocus:()=>!s&&c(!0),onKeyDown:T,placeholder:o?"Search...":void 0,disabled:s,readOnly:!o}),f.jsx("button",{type:"button",onClick:()=>!s&&c(!o),className:"absolute inset-y-0 right-0 flex items-center pr-2",disabled:s,children:f.jsx(Ln,{size:16,className:"text-neutral-400 dark:text-neutral-500"})})]}),o&&f.jsx("div",{ref:x,className:"absolute z-50 w-full mt-1 bg-white dark:bg-neutral-950 rounded-lg shadow-xl max-h-96 overflow-y-auto focus:outline-none border border-neutral-200 dark:border-neutral-700",children:!A&&!B?f.jsx("div",{className:"px-3 py-3 text-sm text-neutral-500 dark:text-neutral-400",children:"No namespaces found"}):f.jsxs(f.Fragment,{children:[B&&f.jsxs("div",{"data-index":++H,onClick:()=>M(""),className:`px-3 py-2 cursor-pointer text-sm flex items-center justify-between ${g===H?"bg-neutral-100 dark:bg-neutral-700":""} ${e===void 0?"text-neutral-900 dark:text-neutral-100":"text-neutral-600 dark:text-neutral-400"}`,children:[f.jsx("span",{className:"truncate",children:"All Namespaces"}),e===void 0&&f.jsx(En,{size:16,className:"text-neutral-500 dark:text-neutral-400"})]}),k.map($=>f.jsxs("div",{className:"py-1",children:[f.jsx("div",{className:"px-3 py-1 text-[10px] font-semibold text-neutral-400 dark:text-neutral-500 uppercase tracking-wider",children:$.label}),$.namespaces.map(G=>{const z=G.metadata?.name;if(!z)return null;const Q=++H,F=e===z,K=g===Q;return f.jsxs("div",{"data-index":Q,onClick:()=>M(z),className:`mx-1 px-2.5 py-1.5 rounded-md cursor-pointer text-sm flex items-center justify-between ${K?"bg-neutral-100 dark:bg-neutral-700":""} ${F?"text-neutral-900 dark:text-neutral-100":"text-neutral-600 dark:text-neutral-400"}`,children:[f.jsx("span",{className:"truncate",children:z}),F&&f.jsx(En,{size:16,className:"text-neutral-500 dark:text-neutral-400"})]},z)})]},$.label))]})})]})}function wP(t){const e=He.c(24),{contexts:n,selectedContext:s,onSelectContext:r}=t,[a,o]=W.useState(!1),c=W.useRef(null);let h,d;e[0]!==a?(h=()=>{if(!a)return;const B=function(T){c.current&&!c.current.contains(T.target)&&o(!1)};return document.addEventListener("mousedown",B),()=>document.removeEventListener("mousedown",B)},d=[a],e[0]=a,e[1]=h,e[2]=d):(h=e[1],d=e[2]),W.useEffect(h,d);let g;e[3]!==r?(g=B=>{r(B),o(!1)},e[3]=r,e[4]=g):g=e[4];const m=g;if(n.length<=1)return null;let v;e[5]!==a?(v=()=>o(!a),e[5]=a,e[6]=v):v=e[6];let y;e[7]===Symbol.for("react.memo_cache_sentinel")?(y=f.jsx(mi,{size:12,className:"opacity-60 group-hover:opacity-80"}),e[7]=y):y=e[7];let x;e[8]!==s?(x=f.jsx("span",{className:"truncate flex-1 text-left",children:s}),e[8]=s,e[9]=x):x=e[9];const w=`opacity-40 group-hover:opacity-60 transition-transform ${a?"rotate-180":""}`;let S;e[10]!==w?(S=f.jsx(Ln,{size:12,className:w}),e[10]=w,e[11]=S):S=e[11];let k;e[12]!==v||e[13]!==x||e[14]!==S?(k=f.jsxs("button",{type:"button",onClick:v,className:"flex items-center gap-1.5 w-full px-1 py-0.5 text-xs text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-300 transition-colors rounded group",children:[y,x,S]}),e[12]=v,e[13]=x,e[14]=S,e[15]=k):k=e[15];let C;e[16]!==n||e[17]!==m||e[18]!==a||e[19]!==s?(C=a&&f.jsx("div",{className:"absolute z-50 left-0 right-0 mt-1 bg-white dark:bg-neutral-950 rounded-lg shadow-xl max-h-64 overflow-y-auto border border-neutral-200 dark:border-neutral-700",children:f.jsxs("div",{className:"py-1",children:[f.jsx("div",{className:"px-3 py-1 text-[10px] font-semibold text-neutral-400 dark:text-neutral-500 uppercase tracking-wider",children:"Clusters"}),n.map(B=>{const M=s===B.name;return f.jsxs("div",{onClick:()=>m(B.name),className:`mx-1 px-2.5 py-1.5 rounded-md cursor-pointer text-sm flex items-center justify-between hover:bg-neutral-100 dark:hover:bg-neutral-800 ${M?"text-neutral-900 dark:text-neutral-100":"text-neutral-600 dark:text-neutral-400"}`,children:[f.jsxs("div",{className:"flex items-center gap-2 truncate",children:[f.jsx(mi,{size:14,className:"opacity-50 shrink-0"}),f.jsx("span",{className:"truncate",children:B.name})]}),M&&f.jsx(En,{size:14,className:"text-neutral-500 dark:text-neutral-400 shrink-0"})]},B.name)})]})}),e[16]=n,e[17]=m,e[18]=a,e[19]=s,e[20]=C):C=e[20];let A;return e[21]!==C||e[22]!==k?(A=f.jsxs("div",{className:"relative",ref:c,children:[k,C]}),e[21]=C,e[22]=k,e[23]=A):A=e[23],A}async function SP(t,e){const n=`/contexts/${e}${t}`,s=await fetch(n,{headers:{Accept:"application/json;as=Table;v=v1;g=meta.k8s.io"}});if(!s.ok)throw new Error(`API request failed: ${s.status} ${s.statusText}`);return s.json()}async function iT(t,e,n){const s=ql(e),r=e.namespaced&&n?`${s}/namespaces/${n}/${e.name}`:`${s}/${e.name}`;return SP(r,t)}const aT=W.createContext(null);function Ir(){const t=W.useContext(aT);if(!t)throw new Error("useCluster must be used within a ClusterProvider");return t}function N5(t,e){return t.name===e.name&&(t.group||"")===(e.group||"")}const E5=[{kind:"pods",label:"Pods",icon:al,category:"workloads"},{kind:"deployments",label:"Deployments",icon:nT,category:"workloads"},{kind:"daemonsets",label:"DaemonSets",icon:eT,category:"workloads"},{kind:"statefulsets",label:"StatefulSets",icon:go,category:"workloads"},{kind:"replicasets",label:"ReplicaSets",icon:Xl,category:"workloads"},{kind:"jobs",label:"Jobs",icon:lS,category:"workloads"},{kind:"cronjobs",label:"CronJobs",icon:ll,category:"workloads"},{kind:"secrets",label:"Secrets",icon:dg,category:"config"},{kind:"configmaps",label:"ConfigMaps",icon:ea,category:"config"},{kind:"applications",label:"Applications",icon:iI,category:"config"},{kind:"applicationsets",label:"ApplicationSets",icon:l7,category:"config"},{kind:"certificates",label:"Certificates",icon:K7,category:"config"},{kind:"certificaterequests",label:"CertificateRequests",icon:g_,category:"config"},{kind:"services",label:"Services",icon:N7,category:"network"},{kind:"ingresses",label:"Ingresses",icon:Qi,category:"network"},{kind:"gateways",label:"Gateways",icon:ur,category:"network"},{kind:"httproutes",label:"HTTPRoutes",icon:Qi,category:"network"},{kind:"grpcroutes",label:"GRPCRoutes",icon:Qi,category:"network"},{kind:"tcproutes",label:"TCPRoutes",icon:ur,category:"network"},{kind:"udproutes",label:"UDPRoutes",icon:ur,category:"network"},{kind:"tlsroutes",label:"TLSRoutes",icon:ur,category:"network"},{kind:"persistentvolumes",label:"PersistentVolumes",icon:Us,category:"storage"},{kind:"persistentvolumeclaims",label:"PersistentVolumeClaims",icon:Qj,category:"storage"},{kind:"namespaces",label:"Namespaces",icon:Zj,category:"cluster"},{kind:"nodes",label:"Nodes",icon:mi,category:"cluster"},{kind:"events",label:"Events",icon:b7,category:"cluster"}],A5={workloads:"Workloads",config:"Config",network:"Network",storage:"Storage",cluster:"Cluster",crd:"Custom Resources"};function kP(t){const e=He.c(58),{selectedResource:n,onSelectResource:s,isOverviewSelected:r}=t,{context:a,contexts:o,namespace:c,namespaces:h,setContext:d,setNamespace:g}=Ir();let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m=new Map,e[0]=m):m=e[0];const[v,y]=W.useState(m);let x;e[1]===Symbol.for("react.memo_cache_sentinel")?(x=[],e[1]=x):x=e[1];const[w,S]=W.useState(x);let k;e[2]===Symbol.for("react.memo_cache_sentinel")?(k={workloads:!0,config:!0,network:!0,storage:!0,cluster:!0,crd:!1},e[2]=k):k=e[2];const[C,A]=W.useState(k);let B,M;e[3]!==a?(B=()=>{(async()=>{const D=new Map;for(const O of E5){const R=await ou(a,O.kind);R&&D.set(O.kind,R)}y(D)})()},M=[a],e[3]=a,e[4]=B,e[5]=M):(B=e[4],M=e[5]),W.useEffect(B,M);let T,H;e[6]!==a?(T=()=>{vP(a).then(U=>{const D=U.map(gP);D.sort(jP),S(D)}).catch(AP)},H=[a],e[6]=a,e[7]=T,e[8]=H):(T=e[7],H=e[8]),W.useEffect(T,H);let $;e[9]===Symbol.for("react.memo_cache_sentinel")?($=U=>{A(D=>({...D,[U]:!D[U]}))},e[9]=$):$=e[9];const G=$;let z,Q,F,K,J,q;if(e[10]!==v||e[11]!==a||e[12]!==o||e[13]!==w||e[14]!==C||e[15]!==r||e[16]!==c||e[17]!==h||e[18]!==s||e[19]!==n||e[20]!==d||e[21]!==g){const U=E5.reduce(EP,{}),D=w.reduce(NP,{}),O=Object.entries(D).sort(CP);K="w-56 h-full shrink-0 bg-white dark:bg-black/40 backdrop-blur-xl flex flex-col rounded-xl border border-neutral-300/50 dark:border-neutral-700/50";let R;e[28]!==a||e[29]!==o||e[30]!==d?(R=f.jsx(wP,{contexts:o,selectedContext:a,onSelectContext:d}),e[28]=a,e[29]=o,e[30]=d,e[31]=R):R=e[31];const V=n!==null&&!n.namespaced;let E,Z;e[32]===Symbol.for("react.memo_cache_sentinel")?(E=Hd().platform?.spaces?.labels,Z=Hd().platform?.namespaces,e[32]=E,e[33]=Z):(E=e[32],Z=e[33]);let ue;e[34]!==c||e[35]!==h||e[36]!==g||e[37]!==V?(ue=f.jsx(xP,{namespaces:h,selectedNamespace:c,onSelectNamespace:g,disabled:V,spaceLabels:E,platformNamespaces:Z}),e[34]=c,e[35]=h,e[36]=g,e[37]=V,e[38]=ue):ue=e[38],e[39]!==R||e[40]!==ue?(J=f.jsxs("div",{className:"shrink-0 px-3 pt-3 pb-2 space-y-2",children:[R,ue]}),e[39]=R,e[40]=ue,e[41]=J):J=e[41],q="flex-1 py-1 overflow-y-auto overflow-x-hidden min-h-0";const ne=`flex items-center w-full px-3 py-2 text-sm rounded-lg transition-colors ${r?"bg-white/90 text-neutral-900 shadow-sm dark:bg-neutral-800 dark:text-neutral-100":"text-neutral-600 hover:bg-white/50 hover:text-neutral-900 dark:text-neutral-400 dark:hover:bg-neutral-800/50 dark:hover:text-neutral-200"}`;let de;e[42]!==s?(de=()=>s(null),e[42]=s,e[43]=de):de=e[43];let we,Ee;e[44]===Symbol.for("react.memo_cache_sentinel")?(we=f.jsx(ur,{size:16,className:"mr-2.5 shrink-0 opacity-70"}),Ee=f.jsx("span",{className:"font-medium",children:"Overview"}),e[44]=we,e[45]=Ee):(we=e[44],Ee=e[45]),e[46]!==ne||e[47]!==de?(z=f.jsx("div",{className:"mb-2 px-2",children:f.jsxs("button",{className:ne,onClick:de,children:[we,Ee]})}),e[46]=ne,e[47]=de,e[48]=z):z=e[48],Q=Object.entries(U).map(et=>{const[Ce,Ge]=et;return f.jsxs("div",{className:"mb-1",children:[f.jsxs("button",{className:"flex items-center w-full px-4 py-1.5 text-[11px] font-semibold uppercase tracking-wider text-neutral-500 hover:text-neutral-700 dark:text-neutral-500 dark:hover:text-neutral-400 transition-colors",onClick:()=>G(Ce),children:[f.jsx("span",{className:"mr-1.5 opacity-60",children:C[Ce]?f.jsx(Ln,{size:12}):f.jsx(Hs,{size:12})}),f.jsx("span",{children:A5[Ce]})]}),C[Ce]&&f.jsx("ul",{className:"px-2",children:Ge.map(Te=>{const tt=v.get(Te.kind);if(!tt)return null;const mt=n!==null&&N5(tt,n);return f.jsx("li",{children:f.jsxs("button",{className:`flex items-center w-full px-3 py-2 text-sm rounded-lg transition-colors ${mt?"bg-white/90 text-neutral-900 shadow-sm dark:bg-neutral-800 dark:text-neutral-100":"text-neutral-600 hover:bg-white/50 hover:text-neutral-900 dark:text-neutral-400 dark:hover:bg-neutral-800/50 dark:hover:text-neutral-200"}`,onClick:()=>s(tt),children:[f.jsx(Te.icon,{size:16,className:"mr-2.5 shrink-0 opacity-70"}),f.jsx("span",{className:"truncate",children:Te.label})]})},Te.kind)})})]},Ce)}),F=w.length>0&&f.jsxs("div",{className:"mb-1",children:[f.jsxs("button",{className:"flex items-center w-full px-4 py-1.5 text-[11px] font-semibold uppercase tracking-wider text-neutral-500 hover:text-neutral-700 dark:text-neutral-500 dark:hover:text-neutral-400 transition-colors",onClick:()=>G("crd"),children:[f.jsx("span",{className:"mr-1.5 opacity-60",children:C.crd?f.jsx(Ln,{size:12}):f.jsx(Hs,{size:12})}),f.jsx("span",{children:A5.crd}),f.jsx("span",{className:"ml-auto px-1.5 py-0.5 bg-neutral-300/60 rounded text-[10px] text-neutral-500 dark:bg-neutral-700 dark:text-neutral-500",children:w.length})]}),C.crd&&f.jsx("div",{className:"px-2",children:O.map(et=>{const[Ce,Ge]=et;return f.jsxs("div",{className:"mb-1",children:[f.jsx("div",{className:"px-3 py-1 text-[10px] text-neutral-400 truncate lowercase dark:text-neutral-600",title:Ce,children:Ce}),f.jsx("ul",{children:Ge.map(Te=>{const tt=n!==null&&N5(Te,n);return f.jsx("li",{children:f.jsxs("button",{className:`flex items-center w-full px-3 py-2 text-sm rounded-lg transition-colors ${tt?"bg-white/90 text-neutral-900 shadow-sm dark:bg-neutral-800 dark:text-neutral-100":"text-neutral-600 hover:bg-white/50 hover:text-neutral-900 dark:text-neutral-400 dark:hover:bg-neutral-800/50 dark:hover:text-neutral-200"}`,onClick:()=>s(Te),title:`${Te.kind} (${Te.group})`,children:[f.jsx(hg,{size:16,className:"mr-2.5 shrink-0 opacity-70"}),f.jsx("span",{className:"truncate",children:Te.kind})]})},`${Te.group||""}/${Te.name}`)})})]},Ce)})})]}),e[10]=v,e[11]=a,e[12]=o,e[13]=w,e[14]=C,e[15]=r,e[16]=c,e[17]=h,e[18]=s,e[19]=n,e[20]=d,e[21]=g,e[22]=z,e[23]=Q,e[24]=F,e[25]=K,e[26]=J,e[27]=q}else z=e[22],Q=e[23],F=e[24],K=e[25],J=e[26],q=e[27];let P;e[49]!==z||e[50]!==Q||e[51]!==F||e[52]!==q?(P=f.jsxs("nav",{className:q,children:[z,Q,F]}),e[49]=z,e[50]=Q,e[51]=F,e[52]=q,e[53]=P):P=e[53];let X;return e[54]!==K||e[55]!==J||e[56]!==P?(X=f.jsxs("aside",{className:K,children:[J,P]}),e[54]=K,e[55]=J,e[56]=P,e[57]=X):X=e[57],X}function CP(t,e){const[n]=t,[s]=e,r=n.split(".").reverse().join("."),a=s.split(".").reverse().join(".");return r.localeCompare(a)}function NP(t,e){const n=e.group||"core";return t[n]||(t[n]=[]),t[n].push(e),t}function EP(t,e){return t[e.category]||(t[e.category]=[]),t[e.category].push(e),t}function AP(t){console.error("Failed to load CRDs:",t)}function jP(t,e){return t.kind.localeCompare(e.kind)}const TP=["selector","containers","images","labels","annotations","nominated node","readiness gates","node selector"];function OP(){const t=He.c(3),[e,n]=W.useState(RP);let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=o=>{const c=o.toLowerCase();n(h=>{const d=new Set(h);return d.has(c)?d.delete(c):d.add(c),d})},t[0]=s):s=t[0];const r=s;let a;return t[1]!==e?(a={hiddenColumns:e,toggleColumn:r},t[1]=e,t[2]=a):a=t[2],a}function RP(){return new Set(TP)}const lT=W.createContext(null);function BP(){const t=W.useContext(lT);if(!t)throw new Error("usePanels must be used within a PanelProvider");return t}const MP=5e3;function oT(t,e=[],n={}){const{refetchInterval:s=MP,refetchShowLoading:r=!1}=n,[a,o]=W.useState(null),[c,h]=W.useState(!0),[d,g]=W.useState(null),[m,v]=W.useState(!1),y=W.useRef(!0),x=W.useCallback(async(S=!1)=>{(!S||r)&&h(!0),S&&v(!0);try{const k=await t();o(k),g(null)}catch(k){S||g(k instanceof Error?k:new Error("Unknown error"))}finally{h(!1),v(!1)}},[t,r,...e]);W.useEffect(()=>{y.current=!0,x(!1)},[x]),W.useEffect(()=>{if(!s||s<=0)return;const S=setInterval(()=>{(!y.current||a!==null)&&x(!0),y.current=!1},s);return()=>clearInterval(S)},[x,s,a]);const w=W.useCallback(()=>{x(!1)},[x]);return{data:a,loading:c,error:d,refetch:w,isRefetching:m}}function DP(t,e){return t==null?"<none>":e.format==="date-time"&&typeof t=="string"?LP(t):Array.isArray(t)?t.length>0?t.join(", "):"<none>":typeof t=="object"?JSON.stringify(t):String(t)}function LP(t){const e=new Date(t),s=new Date().getTime()-e.getTime(),r=Math.floor(s/1e3),a=Math.floor(r/60),o=Math.floor(a/60),c=Math.floor(o/24);return c>0?`${c}d`:o>0?`${o}h`:a>0?`${a}m`:`${r}s`}function IP(t){const e=t.name.toLowerCase();return e==="status"||e==="phase"||e==="ready"||e==="condition"}function PP(t){const e=He.c(75),{config:n,hiddenColumns:s,onColumnsLoaded:r,selectedItem:a,onSelectItem:o}=t,{context:c,namespace:h}=Ir();let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d={column:null,direction:null},e[0]=d):d=e[0];const[g,m]=W.useState(d);let v,y;e[1]!==n||e[2]!==c||e[3]!==h?(v=()=>iT(c,n,h),y=[c,n,h],e[1]=n,e[2]=c,e[3]=h,e[4]=v,e[5]=y):(v=e[4],y=e[5]);const{data:x,loading:w,error:S,refetch:k,isRefetching:C}=oT(v,y);let A;e:{if(!x?.columnDefinitions){let D;e[6]===Symbol.for("react.memo_cache_sentinel")?(D=[],e[6]=D):D=e[6],A=D;break e}let U;if(e[7]!==x.columnDefinitions||e[8]!==s){let D;e[10]!==s?(D=O=>!s.has(O.name.toLowerCase()),e[10]=s,e[11]=D):D=e[11],U=x.columnDefinitions.filter(D),e[7]=x.columnDefinitions,e[8]=s,e[9]=U}else U=e[9];A=U}const B=A;let M;e:{if(!x?.rows||!g.column||!g.direction){let V;e[12]!==x?.rows?(V=x?.rows??[],e[12]=x?.rows,e[13]=V):V=e[13],M=V;break e}let U;if(e[14]!==x.columnDefinitions||e[15]!==g){let V;e[17]!==g?(V=E=>E.name===g.column,e[17]=g,e[18]=V):V=e[18],U=x.columnDefinitions.findIndex(V),e[14]=x.columnDefinitions,e[15]=g,e[16]=U}else U=e[16];const D=U;if(D===-1){M=x.rows;break e}const O=x.columnDefinitions[D];let R;if(e[19]!==O||e[20]!==D||e[21]!==x.rows||e[22]!==g){let V;e[24]!==O||e[25]!==D||e[26]!==g?(V=(E,Z)=>{const ue=E.cells[D],ne=Z.cells[D];if(ue==null&&ne==null)return 0;if(ue==null)return g.direction==="asc"?-1:1;if(ne==null)return g.direction==="asc"?1:-1;let de;if(O.format==="date-time"){const we=new Date(String(ue)).getTime(),Ee=new Date(String(ne)).getTime();de=we-Ee}else typeof ue=="number"&&typeof ne=="number"?de=ue-ne:de=String(ue).localeCompare(String(ne));return g.direction==="asc"?de:-de},e[24]=O,e[25]=D,e[26]=g,e[27]=V):V=e[27],R=[...x.rows].sort(V),e[19]=O,e[20]=D,e[21]=x.rows,e[22]=g,e[23]=R}else R=e[23];M=R}const T=M;let H;e[28]===Symbol.for("react.memo_cache_sentinel")?(H=U=>{m(D=>D.column!==U?{column:U,direction:"asc"}:D.direction==="asc"?{column:U,direction:"desc"}:{column:null,direction:null})},e[28]=H):H=e[28];const $=H;let G,z;if(e[29]!==x||e[30]!==r?(G=()=>{x?.columnDefinitions&&r&&r(x.columnDefinitions)},z=[x,r],e[29]=x,e[30]=r,e[31]=G,e[32]=z):(G=e[31],z=e[32]),W.useEffect(G,z),w){let U;e[33]===Symbol.for("react.memo_cache_sentinel")?(U=f.jsx("div",{className:"w-6 h-6 border-2 border-neutral-200 border-t-neutral-400 dark:border-neutral-700 dark:border-t-neutral-500 rounded-full animate-spin"}),e[33]=U):U=e[33];let D;return e[34]!==n.name?(D=f.jsx("div",{className:"h-full flex items-center justify-center",children:f.jsxs("div",{className:"flex flex-col items-center gap-3 text-neutral-400 dark:text-neutral-500",children:[U,f.jsxs("span",{className:"text-sm",children:["Loading ",n.name,"..."]})]})}),e[34]=n.name,e[35]=D):D=e[35],D}if(S){let U;e[36]===Symbol.for("react.memo_cache_sentinel")?(U=f.jsx(i0,{size:18}),e[36]=U):U=e[36];let D;e[37]!==S.message?(D=f.jsx("span",{className:"text-sm",children:S.message}),e[37]=S.message,e[38]=D):D=e[38];let O;e[39]!==k?(O=f.jsx("button",{onClick:k,className:"px-3 py-1.5 text-sm text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 underline underline-offset-2",children:"Retry"}),e[39]=k,e[40]=O):O=e[40];let R;return e[41]!==D||e[42]!==O?(R=f.jsx("div",{className:"h-full flex items-center justify-center",children:f.jsxs("div",{className:"flex items-center gap-3 text-red-500 dark:text-red-400",children:[U,D,O]})}),e[41]=D,e[42]=O,e[43]=R):R=e[43],R}if(!x||!x.columnDefinitions||x.rows.length===0){let U;e[44]===Symbol.for("react.memo_cache_sentinel")?(U=f.jsx("svg",{className:"w-8 h-8 mb-2 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),e[44]=U):U=e[44];let D;return e[45]!==n.name?(D=f.jsx("div",{className:"h-full flex items-center justify-center",children:f.jsxs("div",{className:"flex flex-col items-center text-neutral-400 dark:text-neutral-500",children:[U,f.jsxs("span",{className:"text-sm",children:["No ",n.name," found"]})]})}),e[45]=n.name,e[46]=D):D=e[46],D}let Q;e[47]!==C?(Q=C&&f.jsx("div",{className:"absolute top-2 right-4 z-20",children:f.jsx(gn,{size:14,className:"text-neutral-400 dark:text-neutral-500 animate-spin"})}),e[47]=C,e[48]=Q):Q=e[48];let F;if(e[49]!==g||e[50]!==B){let U;e[52]!==g?(U=(D,O)=>{const R=g.column===D.name;return f.jsx("th",{title:D.description,onClick:()=>$(D.name),className:`text-left px-4 py-2 text-[11px] font-medium whitespace-nowrap cursor-pointer transition-colors select-none group bg-neutral-100 dark:bg-neutral-950 ${R?"text-neutral-900 dark:text-neutral-200":"text-neutral-500 dark:text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-400"}`,children:f.jsxs("div",{className:"flex items-center gap-1",children:[D.name,f.jsx("span",{className:`transition-opacity ${R?"opacity-100":"opacity-0 group-hover:opacity-40"}`,children:R&&g.direction==="asc"?f.jsx(dI,{size:12}):R&&g.direction==="desc"?f.jsx(Ln,{size:12}):f.jsx(pI,{size:12})})]})},O)},e[52]=g,e[53]=U):U=e[53],F=B.map(U),e[49]=g,e[50]=B,e[51]=F}else F=e[51];let K;e[54]!==F?(K=f.jsx("thead",{className:"sticky top-0 z-10 bg-neutral-100 dark:bg-neutral-950",children:f.jsx("tr",{children:F})}),e[54]=F,e[55]=K):K=e[55];let J;if(e[56]!==x||e[57]!==o||e[58]!==a?.object||e[59]!==T||e[60]!==B){let U;e[62]!==x||e[63]!==o||e[64]!==a?.object||e[65]!==B?(U=(D,O)=>{const R=a?.object.metadata.uid===D.object.metadata.uid,V=O%2===1;return f.jsx("tr",{onClick:()=>o?.(R?null:D),className:`transition-colors cursor-pointer ${R?"bg-blue-500/20 dark:bg-blue-500/20":V?"bg-neutral-200/40 dark:bg-neutral-800/30 hover:bg-neutral-200/70 dark:hover:bg-neutral-800/50":"hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30"}`,children:B.map((E,Z)=>{const ue=x.columnDefinitions.findIndex(Ee=>Ee.name===E.name),ne=D.cells[ue],de=DP(ne,E),we=E.name.toLowerCase()==="name";return IP(E)?f.jsx("td",{className:`px-4 py-2 whitespace-nowrap ${Z===0?"rounded-l-lg":""} ${Z===B.length-1?"rounded-r-lg":""}`,children:f.jsxs("span",{className:`inline-flex items-center gap-1.5 text-xs font-medium capitalize ${de.toLowerCase().match(/running|active|ready|available|bound|succeeded|complete|healthy|true/)?"text-emerald-600 dark:text-emerald-400":de.toLowerCase().match(/pending|creating|waiting|progressing|scheduled/)?"text-amber-600 dark:text-amber-400":de.toLowerCase().match(/failed|error|crashloopbackoff|terminated|unknown|lost|false/)?"text-red-600 dark:text-red-400":"text-neutral-500 dark:text-neutral-400"}`,children:[f.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${de.toLowerCase().match(/running|active|ready|available|bound|succeeded|complete|healthy|true/)?"bg-emerald-500":de.toLowerCase().match(/pending|creating|waiting|progressing|scheduled/)?"bg-amber-500":de.toLowerCase().match(/failed|error|crashloopbackoff|terminated|unknown|lost|false/)?"bg-red-500":"bg-neutral-400"}`}),de]})},Z):f.jsx("td",{className:`px-4 py-2 whitespace-nowrap ${Z===0?"rounded-l-lg":""} ${Z===B.length-1?"rounded-r-lg":""} ${we?"text-neutral-900 dark:text-neutral-300":"text-neutral-500 dark:text-neutral-500"}`,children:de},Z)})},D.object.metadata.uid)},e[62]=x,e[63]=o,e[64]=a?.object,e[65]=B,e[66]=U):U=e[66],J=T.map(U),e[56]=x,e[57]=o,e[58]=a?.object,e[59]=T,e[60]=B,e[61]=J}else J=e[61];let q;e[67]!==J?(q=f.jsx("tbody",{children:J}),e[67]=J,e[68]=q):q=e[68];let P;e[69]!==K||e[70]!==q?(P=f.jsx("div",{className:"overflow-auto h-full",children:f.jsxs("table",{className:"w-full text-[13px]",children:[K,q]})}),e[69]=K,e[70]=q,e[71]=P):P=e[71];let X;return e[72]!==P||e[73]!==Q?(X=f.jsxs("div",{className:"pl-2 h-full relative",children:[Q,P]}),e[72]=P,e[73]=Q,e[74]=X):X=e[74],X}function zP(t){const e=He.c(19),{columns:n,hiddenColumns:s,onToggleColumn:r}=t,[a,o]=W.useState(!1),c=W.useRef(null);let h,d;e[0]!==a?(h=()=>{if(!a)return;const k=function(A){c.current&&!c.current.contains(A.target)&&o(!1)};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},d=[a],e[0]=a,e[1]=h,e[2]=d):(h=e[1],d=e[2]),W.useEffect(h,d);let g,m;if(e[3]!==a?(g=()=>{if(!a)return;const k=function(A){A.key==="Escape"&&o(!1)};return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)},m=[a],e[3]=a,e[4]=g,e[5]=m):(g=e[4],m=e[5]),W.useEffect(g,m),n.length===0)return null;let v;e[6]!==a?(v=()=>o(!a),e[6]=a,e[7]=v):v=e[7];let y;e[8]===Symbol.for("react.memo_cache_sentinel")?(y=f.jsx(CI,{size:18}),e[8]=y):y=e[8];let x;e[9]!==v?(x=f.jsx("button",{onClick:v,className:"p-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded-md transition-colors focus:outline-none",title:"Toggle columns",children:y}),e[9]=v,e[10]=x):x=e[10];let w;e[11]!==n||e[12]!==s||e[13]!==a||e[14]!==r?(w=a&&f.jsx("div",{className:"absolute right-0 z-50 mt-1 p-2 bg-white border border-neutral-300 dark:bg-neutral-900 dark:border-neutral-700 rounded-lg shadow-xl min-w-45 max-h-75 overflow-y-auto",children:n.map(k=>{const C=!s.has(k.name.toLowerCase());return f.jsxs("label",{className:"flex items-center gap-2 px-2 py-1.5 cursor-pointer rounded hover:bg-neutral-100 dark:hover:bg-neutral-800",children:[f.jsx("span",{onClick:()=>r(k.name),className:`size-4 rounded border flex items-center justify-center cursor-pointer transition-colors ${C?"bg-neutral-500 border-neutral-500 dark:bg-neutral-600 dark:border-neutral-500":"border-neutral-300 bg-white dark:border-neutral-600 dark:bg-neutral-800"}`,children:C&&f.jsx(En,{size:12,className:"text-white dark:text-neutral-300"})}),f.jsx("span",{onClick:()=>r(k.name),className:"text-sm text-neutral-700 dark:text-neutral-400 cursor-pointer",children:k.name})]},k.name)})}),e[11]=n,e[12]=s,e[13]=a,e[14]=r,e[15]=w):w=e[15];let S;return e[16]!==x||e[17]!==w?(S=f.jsxs("div",{className:"relative",ref:c,children:[x,w]}),e[16]=x,e[17]=w,e[18]=S):S=e[18],S}function nt(t,e,n,s,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function oe(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)}let cT=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return cT=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^n()&15>>+s/4).toString(16))};function b_(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const __=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Xe extends Error{}class rs extends Xe{constructor(e,n,s,r){super(`${rs.makeMessage(e,n,s)}`),this.status=e,this.headers=r,this.requestID=r?.get("x-request-id"),this.error=n;const a=n;this.code=a?.code,this.param=a?.param,this.type=a?.type}static makeMessage(e,n,s){const r=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):s;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,s,r){if(!e||!r)return new gg({message:s,cause:__(n)});const a=n?.error;return e===400?new uT(e,a,s,r):e===401?new hT(e,a,s,r):e===403?new dT(e,a,s,r):e===404?new fT(e,a,s,r):e===409?new pT(e,a,s,r):e===422?new mT(e,a,s,r):e===429?new gT(e,a,s,r):e>=500?new yT(e,a,s,r):new rs(e,a,s,r)}}class Tr extends rs{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class gg extends rs{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class oS extends gg{constructor({message:e}={}){super({message:e??"Request timed out."})}}class uT extends rs{}class hT extends rs{}class dT extends rs{}class fT extends rs{}class pT extends rs{}class mT extends rs{}class gT extends rs{}class yT extends rs{}class vT extends Xe{constructor(){super("Could not parse response content as the length limit was reached")}}class bT extends Xe{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class zh extends Error{constructor(e){super(e)}}const $P=/^[a-z][a-z0-9+.-]*:/i,HP=t=>$P.test(t);let zs=t=>(zs=Array.isArray,zs(t)),j5=zs;function _T(t){return typeof t!="object"?{}:t??{}}function UP(t){if(!t)return!0;for(const e in t)return!1;return!0}function VP(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function sb(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const FP=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Xe(`${t} must be an integer`);if(e<0)throw new Xe(`${t} must be a positive integer`);return e},qP=t=>{try{return JSON.parse(t)}catch{return}},df=t=>new Promise(e=>setTimeout(e,t)),bc="6.15.0",KP=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function WP(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const GP=()=>{const t=WP();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":bc,"X-Stainless-OS":O5(Deno.build.os),"X-Stainless-Arch":T5(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":bc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":bc,"X-Stainless-OS":O5(globalThis.process.platform??"unknown"),"X-Stainless-Arch":T5(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=YP();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":bc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":bc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function YP(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const s=n.exec(navigator.userAgent);if(s){const r=s[1]||0,a=s[2]||0,o=s[3]||0;return{browser:e,version:`${r}.${a}.${o}`}}}return null}const T5=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",O5=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let R5;const XP=()=>R5??(R5=GP());function JP(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function xT(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function wT(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return xT({start(){},async pull(n){const{done:s,value:r}=await e.next();s?n.close():n.enqueue(r)},async cancel(){await e.return?.()}})}function ST(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function QP(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const ZP=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),kT="RFC3986",CT=t=>String(t),B5={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:CT},ez="RFC1738";let x_=(t,e)=>(x_=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),x_(t,e));const ni=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),rb=1024,tz=(t,e,n,s,r)=>{if(t.length===0)return t;let a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});let o="";for(let c=0;c<a.length;c+=rb){const h=a.length>=rb?a.slice(c,c+rb):a,d=[];for(let g=0;g<h.length;++g){let m=h.charCodeAt(g);if(m===45||m===46||m===95||m===126||m>=48&&m<=57||m>=65&&m<=90||m>=97&&m<=122||r===ez&&(m===40||m===41)){d[d.length]=h.charAt(g);continue}if(m<128){d[d.length]=ni[m];continue}if(m<2048){d[d.length]=ni[192|m>>6]+ni[128|m&63];continue}if(m<55296||m>=57344){d[d.length]=ni[224|m>>12]+ni[128|m>>6&63]+ni[128|m&63];continue}g+=1,m=65536+((m&1023)<<10|h.charCodeAt(g)&1023),d[d.length]=ni[240|m>>18]+ni[128|m>>12&63]+ni[128|m>>6&63]+ni[128|m&63]}o+=d.join("")}return o};function nz(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function M5(t,e){if(zs(t)){const n=[];for(let s=0;s<t.length;s+=1)n.push(e(t[s]));return n}return e(t)}const NT={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},ET=function(t,e){Array.prototype.push.apply(t,zs(e)?e:[e])};let D5;const Mn={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:tz,encodeValuesOnly:!1,format:kT,formatter:CT,indices:!1,serializeDate(t){return(D5??(D5=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function sz(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const ib={};function AT(t,e,n,s,r,a,o,c,h,d,g,m,v,y,x,w,S,k){let C=t,A=k,B=0,M=!1;for(;(A=A.get(ib))!==void 0&&!M;){const z=A.get(t);if(B+=1,typeof z<"u"){if(z===B)throw new RangeError("Cyclic object value");M=!0}typeof A.get(ib)>"u"&&(B=0)}if(typeof d=="function"?C=d(e,C):C instanceof Date?C=v?.(C):n==="comma"&&zs(C)&&(C=M5(C,function(z){return z instanceof Date?v?.(z):z})),C===null){if(a)return h&&!w?h(e,Mn.encoder,S,"key",y):e;C=""}if(sz(C)||nz(C)){if(h){const z=w?e:h(e,Mn.encoder,S,"key",y);return[x?.(z)+"="+x?.(h(C,Mn.encoder,S,"value",y))]}return[x?.(e)+"="+x?.(String(C))]}const T=[];if(typeof C>"u")return T;let H;if(n==="comma"&&zs(C))w&&h&&(C=M5(C,h)),H=[{value:C.length>0?C.join(",")||null:void 0}];else if(zs(d))H=d;else{const z=Object.keys(C);H=g?z.sort(g):z}const $=c?String(e).replace(/\./g,"%2E"):String(e),G=s&&zs(C)&&C.length===1?$+"[]":$;if(r&&zs(C)&&C.length===0)return G+"[]";for(let z=0;z<H.length;++z){const Q=H[z],F=typeof Q=="object"&&typeof Q.value<"u"?Q.value:C[Q];if(o&&F===null)continue;const K=m&&c?Q.replace(/\./g,"%2E"):Q,J=zs(C)?typeof n=="function"?n(G,K):G:G+(m?"."+K:"["+K+"]");k.set(t,B);const q=new WeakMap;q.set(ib,k),ET(T,AT(F,J,n,s,r,a,o,c,n==="comma"&&w&&zs(C)?null:h,d,g,m,v,y,x,w,S,q))}return T}function rz(t=Mn){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Mn.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=kT;if(typeof t.format<"u"){if(!x_(B5,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const s=B5[n];let r=Mn.filter;(typeof t.filter=="function"||zs(t.filter))&&(r=t.filter);let a;if(t.arrayFormat&&t.arrayFormat in NT?a=t.arrayFormat:"indices"in t?a=t.indices?"indices":"repeat":a=Mn.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Mn.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Mn.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Mn.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Mn.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Mn.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Mn.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Mn.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Mn.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Mn.encodeValuesOnly,filter:r,format:n,formatter:s,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Mn.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Mn.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Mn.strictNullHandling}}function iz(t,e={}){let n=t;const s=rz(e);let r,a;typeof s.filter=="function"?(a=s.filter,n=a("",n)):zs(s.filter)&&(a=s.filter,r=a);const o=[];if(typeof n!="object"||n===null)return"";const c=NT[s.arrayFormat],h=c==="comma"&&s.commaRoundTrip;r||(r=Object.keys(n)),s.sort&&r.sort(s.sort);const d=new WeakMap;for(let v=0;v<r.length;++v){const y=r[v];s.skipNulls&&n[y]===null||ET(o,AT(n[y],y,c,h,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,d))}const g=o.join(s.delimiter);let m=s.addQueryPrefix===!0?"?":"";return s.charsetSentinel&&(s.charset==="iso-8859-1"?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),g.length>0?m+g:""}function az(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let s=0;for(const r of t)n.set(r,s),s+=r.length;return n}let L5;function cS(t){let e;return(L5??(e=new globalThis.TextEncoder,L5=e.encode.bind(e)))(t)}let I5;function P5(t){let e;return(I5??(e=new globalThis.TextDecoder,I5=e.decode.bind(e)))(t)}var nr,sr;class yg{constructor(){nr.set(this,void 0),sr.set(this,void 0),nt(this,nr,new Uint8Array),nt(this,sr,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?cS(e):e;nt(this,nr,az([oe(this,nr,"f"),n]));const s=[];let r;for(;(r=lz(oe(this,nr,"f"),oe(this,sr,"f")))!=null;){if(r.carriage&&oe(this,sr,"f")==null){nt(this,sr,r.index);continue}if(oe(this,sr,"f")!=null&&(r.index!==oe(this,sr,"f")+1||r.carriage)){s.push(P5(oe(this,nr,"f").subarray(0,oe(this,sr,"f")-1))),nt(this,nr,oe(this,nr,"f").subarray(oe(this,sr,"f"))),nt(this,sr,null);continue}const a=oe(this,sr,"f")!==null?r.preceding-1:r.preceding,o=P5(oe(this,nr,"f").subarray(0,a));s.push(o),nt(this,nr,oe(this,nr,"f").subarray(r.index)),nt(this,sr,null)}return s}flush(){return oe(this,nr,"f").length?this.decode(`
`):[]}}nr=new WeakMap,sr=new WeakMap;yg.NEWLINE_CHARS=new Set([`
`,"\r"]);yg.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function lz(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function oz(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}const o0={off:0,error:200,warn:300,info:400,debug:500},z5=(t,e,n)=>{if(t){if(VP(o0,t))return t;Zn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(o0))}`)}};function $h(){}function tm(t,e,n){return!e||o0[t]>o0[n]?$h:e[t].bind(e)}const cz={error:$h,warn:$h,info:$h,debug:$h};let $5=new WeakMap;function Zn(t){const e=t.logger,n=t.logLevel??"off";if(!e)return cz;const s=$5.get(e);if(s&&s[0]===n)return s[1];const r={error:tm("error",e,n),warn:tm("warn",e,n),info:tm("info",e,n),debug:tm("debug",e,n)};return $5.set(e,[n,r]),r}const Ol=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var wh;class ci{constructor(e,n,s){this.iterator=e,wh.set(this,void 0),this.controller=n,nt(this,wh,s)}static fromSSEResponse(e,n,s){let r=!1;const a=s?Zn(s):console;async function*o(){if(r)throw new Xe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let c=!1;try{for await(const h of uz(e,n))if(!c){if(h.data.startsWith("[DONE]")){c=!0;continue}if(h.event===null||!h.event.startsWith("thread.")){let d;try{d=JSON.parse(h.data)}catch(g){throw a.error("Could not parse message into JSON:",h.data),a.error("From chunk:",h.raw),g}if(d&&d.error)throw new rs(void 0,d.error,void 0,e.headers);yield d}else{let d;try{d=JSON.parse(h.data)}catch(g){throw console.error("Could not parse message into JSON:",h.data),console.error("From chunk:",h.raw),g}if(h.event=="error")throw new rs(void 0,d.error,d.message,void 0);yield{event:h.event,data:d}}}c=!0}catch(h){if(b_(h))return;throw h}finally{c||n.abort()}}return new ci(o,n,s)}static fromReadableStream(e,n,s){let r=!1;async function*a(){const c=new yg,h=ST(e);for await(const d of h)for(const g of c.decode(d))yield g;for(const d of c.flush())yield d}async function*o(){if(r)throw new Xe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let c=!1;try{for await(const h of a())c||h&&(yield JSON.parse(h));c=!0}catch(h){if(b_(h))return;throw h}finally{c||n.abort()}}return new ci(o,n,s)}[(wh=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],s=this.iterator(),r=a=>({next:()=>{if(a.length===0){const o=s.next();e.push(o),n.push(o)}return a.shift()}});return[new ci(()=>r(e),this.controller,oe(this,wh,"f")),new ci(()=>r(n),this.controller,oe(this,wh,"f"))]}toReadableStream(){const e=this;let n;return xT({async start(){n=e[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:a}=await n.next();if(a)return s.close();const o=cS(JSON.stringify(r)+`
`);s.enqueue(o)}catch(r){s.error(r)}},async cancel(){await n.return?.()}})}}async function*uz(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Xe("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Xe("Attempted to iterate over a response with no body");const n=new dz,s=new yg,r=ST(t.body);for await(const a of hz(r))for(const o of s.decode(a)){const c=n.decode(o);c&&(yield c)}for(const a of s.flush()){const o=n.decode(a);o&&(yield o)}}async function*hz(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const s=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?cS(n):n;let r=new Uint8Array(e.length+s.length);r.set(e),r.set(s,e.length),e=r;let a;for(;(a=oz(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class dz{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,s,r]=fz(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function fz(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function jT(t,e){const{response:n,requestLogID:s,retryOfRequestLogID:r,startTime:a}=e,o=await(async()=>{if(e.options.stream)return Zn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):ci.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const h=n.headers.get("content-type")?.split(";")[0]?.trim();if(h?.includes("application/json")||h?.endsWith("+json")){const m=await n.json();return TT(m,n)}return await n.text()})();return Zn(t).debug(`[${s}] response parsed`,Ol({retryOfRequestLogID:r,url:n.url,status:n.status,body:o,durationMs:Date.now()-a})),o}function TT(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var Hh;class vg extends Promise{constructor(e,n,s=jT){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=s,Hh.set(this,void 0),nt(this,Hh,e)}_thenUnwrap(e){return new vg(oe(this,Hh,"f"),this.responsePromise,async(n,s)=>TT(e(await this.parseResponse(n,s),s),s.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(oe(this,Hh,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}Hh=new WeakMap;var nm;class uS{constructor(e,n,s,r){nm.set(this,void 0),nt(this,nm,e),this.options=r,this.response=n,this.body=s}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Xe("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await oe(this,nm,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(nm=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class pz extends vg{constructor(e,n,s){super(e,n,async(r,a)=>new s(r,a.response,await jT(r,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class bg extends uS{constructor(e,n,s,r){super(e,n,s,r),this.data=s.data||[],this.object=s.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class An extends uS{constructor(e,n,s,r){super(e,n,s,r),this.data=s.data||[],this.has_more=s.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),n=e[e.length-1]?.id;return n?{...this.options,query:{..._T(this.options.query),after:n}}:null}}class c0 extends uS{constructor(e,n,s,r){super(e,n,s,r),this.data=s.data||[],this.has_more=s.has_more||!1,this.last_id=s.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{..._T(this.options.query),after:e}}:null}}const OT=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function xd(t,e,n){return OT(),new File(t,e??"unknown_file",n)}function Bm(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const hS=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",H5=async(t,e)=>w_(t.body)?{...t,body:await RT(t.body,e)}:t,Jl=async(t,e)=>({...t,body:await RT(t.body,e)}),U5=new WeakMap;function mz(t){const e=typeof t=="function"?t:t.fetch,n=U5.get(e);if(n)return n;const s=(async()=>{try{const r="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new r(a).text()}catch{return!0}})();return U5.set(e,s),s}const RT=async(t,e)=>{if(!await mz(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([s,r])=>S_(n,s,r))),n},BT=t=>t instanceof Blob&&"name"in t,gz=t=>typeof t=="object"&&t!==null&&(t instanceof Response||hS(t)||BT(t)),w_=t=>{if(gz(t))return!0;if(Array.isArray(t))return t.some(w_);if(t&&typeof t=="object"){for(const e in t)if(w_(t[e]))return!0}return!1},S_=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,xd([await n.blob()],Bm(n)));else if(hS(n))t.append(e,xd([await new Response(wT(n)).blob()],Bm(n)));else if(BT(n))t.append(e,n,Bm(n));else if(Array.isArray(n))await Promise.all(n.map(s=>S_(t,e+"[]",s)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([s,r])=>S_(t,`${e}[${s}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},MT=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",yz=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&MT(t),vz=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function bz(t,e,n){if(OT(),t=await t,yz(t))return t instanceof File?t:xd([await t.arrayBuffer()],t.name);if(vz(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),xd(await k_(r),e,n)}const s=await k_(t);if(e||(e=Bm(t)),!n?.type){const r=s.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof r=="string"&&(n={...n,type:r})}return xd(s,e,n)}async function k_(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(MT(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(hS(t))for await(const n of t)e.push(...await k_(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${_z(t)}`)}return e}function _z(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class We{constructor(e){this._client=e}}function DT(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const V5=Object.freeze(Object.create(null)),xz=(t=DT)=>function(n,...s){if(n.length===1)return n[0];let r=!1;const a=[],o=n.reduce((g,m,v)=>{/[?#]/.test(m)&&(r=!0);const y=s[v];let x=(r?encodeURIComponent:t)(""+y);return v!==s.length&&(y==null||typeof y=="object"&&y.toString===Object.getPrototypeOf(Object.getPrototypeOf(y.hasOwnProperty??V5)??V5)?.toString)&&(x=y+"",a.push({start:g.length+m.length,length:x.length,error:`Value of type ${Object.prototype.toString.call(y).slice(8,-1)} is not a valid path parameter`})),g+m+(v===s.length?"":x)},""),c=o.split(/[?#]/,1)[0],h=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=h.exec(c))!==null;)a.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(a.sort((g,m)=>g.start-m.start),a.length>0){let g=0;const m=a.reduce((v,y)=>{const x=" ".repeat(y.start-g),w="^".repeat(y.length);return g=y.start+y.length,v+x+w},"");throw new Xe(`Path parameters result in path with invalid segments:
${a.map(v=>v.error).join(`
`)}
${o}
${m}`)}return o},xe=xz(DT);let LT=class extends We{list(e,n={},s){return this._client.getAPIList(xe`/chat/completions/${e}/messages`,An,{query:n,...s})}};function u0(t){return t!==void 0&&"function"in t&&t.function!==void 0}function dS(t){return t?.$brand==="auto-parseable-response-format"}function ff(t){return t?.$brand==="auto-parseable-tool"}function wz(t,e){return!e||!IT(e)?{...t,choices:t.choices.map(n=>(PT(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:fS(t,e)}function fS(t,e){const n=t.choices.map(s=>{if(s.finish_reason==="length")throw new vT;if(s.finish_reason==="content_filter")throw new bT;return PT(s.message.tool_calls),{...s,message:{...s.message,...s.message.tool_calls?{tool_calls:s.message.tool_calls?.map(r=>kz(e,r))??void 0}:void 0,parsed:s.message.content&&!s.message.refusal?Sz(e,s.message.content):null}}});return{...t,choices:n}}function Sz(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function kz(t,e){const n=t.tools?.find(s=>u0(s)&&s.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:ff(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function Cz(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const n=t.tools?.find(s=>u0(s)&&s.function?.name===e.function.name);return u0(n)&&(ff(n)||n?.function.strict||!1)}function IT(t){return dS(t.response_format)?!0:t.tools?.some(e=>ff(e)||e.type==="function"&&e.function.strict===!0)??!1}function PT(t){for(const e of t||[])if(e.type!=="function")throw new Xe(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function Nz(t){for(const e of t??[]){if(e.type!=="function")throw new Xe(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Xe(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const h0=t=>t?.role==="assistant",zT=t=>t?.role==="tool";var C_,Mm,Dm,Uh,Vh,Lm,Fh,qi,qh,d0,f0,_c,$T;class pS{constructor(){C_.add(this),this.controller=new AbortController,Mm.set(this,void 0),Dm.set(this,()=>{}),Uh.set(this,()=>{}),Vh.set(this,void 0),Lm.set(this,()=>{}),Fh.set(this,()=>{}),qi.set(this,{}),qh.set(this,!1),d0.set(this,!1),f0.set(this,!1),_c.set(this,!1),nt(this,Mm,new Promise((e,n)=>{nt(this,Dm,e,"f"),nt(this,Uh,n,"f")})),nt(this,Vh,new Promise((e,n)=>{nt(this,Lm,e,"f"),nt(this,Fh,n,"f")})),oe(this,Mm,"f").catch(()=>{}),oe(this,Vh,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},oe(this,C_,"m",$T).bind(this))},0)}_connected(){this.ended||(oe(this,Dm,"f").call(this),this._emit("connect"))}get ended(){return oe(this,qh,"f")}get errored(){return oe(this,d0,"f")}get aborted(){return oe(this,f0,"f")}abort(){this.controller.abort()}on(e,n){return(oe(this,qi,"f")[e]||(oe(this,qi,"f")[e]=[])).push({listener:n}),this}off(e,n){const s=oe(this,qi,"f")[e];if(!s)return this;const r=s.findIndex(a=>a.listener===n);return r>=0&&s.splice(r,1),this}once(e,n){return(oe(this,qi,"f")[e]||(oe(this,qi,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,s)=>{nt(this,_c,!0),e!=="error"&&this.once("error",s),this.once(e,n)})}async done(){nt(this,_c,!0),await oe(this,Vh,"f")}_emit(e,...n){if(oe(this,qh,"f"))return;e==="end"&&(nt(this,qh,!0),oe(this,Lm,"f").call(this));const s=oe(this,qi,"f")[e];if(s&&(oe(this,qi,"f")[e]=s.filter(r=>!r.once),s.forEach(({listener:r})=>r(...n))),e==="abort"){const r=n[0];!oe(this,_c,"f")&&!s?.length&&Promise.reject(r),oe(this,Uh,"f").call(this,r),oe(this,Fh,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=n[0];!oe(this,_c,"f")&&!s?.length&&Promise.reject(r),oe(this,Uh,"f").call(this,r),oe(this,Fh,"f").call(this,r),this._emit("end")}}_emitFinal(){}}Mm=new WeakMap,Dm=new WeakMap,Uh=new WeakMap,Vh=new WeakMap,Lm=new WeakMap,Fh=new WeakMap,qi=new WeakMap,qh=new WeakMap,d0=new WeakMap,f0=new WeakMap,_c=new WeakMap,C_=new WeakSet,$T=function(e){if(nt(this,d0,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Tr),e instanceof Tr)return nt(this,f0,!0),this._emit("abort",e);if(e instanceof Xe)return this._emit("error",e);if(e instanceof Error){const n=new Xe(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Xe(String(e)))};function Ez(t){return typeof t.parse=="function"}var ys,N_,p0,E_,A_,j_,HT,UT;const Az=10;class VT extends pS{constructor(){super(...arguments),ys.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),zT(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(h0(e)&&e.tool_calls)for(const s of e.tool_calls)s.type==="function"&&this._emit("functionToolCall",s.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Xe("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),oe(this,ys,"m",N_).call(this)}async finalMessage(){return await this.done(),oe(this,ys,"m",p0).call(this)}async finalFunctionToolCall(){return await this.done(),oe(this,ys,"m",E_).call(this)}async finalFunctionToolCallResult(){return await this.done(),oe(this,ys,"m",A_).call(this)}async totalUsage(){return await this.done(),oe(this,ys,"m",j_).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=oe(this,ys,"m",p0).call(this);n&&this._emit("finalMessage",n);const s=oe(this,ys,"m",N_).call(this);s&&this._emit("finalContent",s);const r=oe(this,ys,"m",E_).call(this);r&&this._emit("finalFunctionToolCall",r);const a=oe(this,ys,"m",A_).call(this);a!=null&&this._emit("finalFunctionToolCallResult",a),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",oe(this,ys,"m",j_).call(this))}async _createChatCompletion(e,n,s){const r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),oe(this,ys,"m",HT).call(this,n);const a=await e.chat.completions.create({...n,stream:!1},{...s,signal:this.controller.signal});return this._connected(),this._addChatCompletion(fS(a,n))}async _runChatCompletion(e,n,s){for(const r of n.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,n,s)}async _runTools(e,n,s){const r="tool",{tool_choice:a="auto",stream:o,...c}=n,h=typeof a!="string"&&a.type==="function"&&a?.function?.name,{maxChatCompletions:d=Az}=s||{},g=n.tools.map(y=>{if(ff(y)){if(!y.$callback)throw new Xe("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:y.$callback,name:y.function.name,description:y.function.description||"",parameters:y.function.parameters,parse:y.$parseRaw,strict:!0}}}return y}),m={};for(const y of g)y.type==="function"&&(m[y.function.name||y.function.function.name]=y.function);const v="tools"in n?g.map(y=>y.type==="function"?{type:"function",function:{name:y.function.name||y.function.function.name,parameters:y.function.parameters,description:y.function.description,strict:y.function.strict}}:y):void 0;for(const y of n.messages)this._addMessage(y,!1);for(let y=0;y<d;++y){const w=(await this._createChatCompletion(e,{...c,tool_choice:a,tools:v,messages:[...this.messages]},s)).choices[0]?.message;if(!w)throw new Xe("missing message in ChatCompletion response");if(!w.tool_calls?.length)return;for(const S of w.tool_calls){if(S.type!=="function")continue;const k=S.id,{name:C,arguments:A}=S.function,B=m[C];if(B){if(h&&h!==C){const $=`Invalid tool_call: ${JSON.stringify(C)}. ${JSON.stringify(h)} requested. Please try again`;this._addMessage({role:r,tool_call_id:k,content:$});continue}}else{const $=`Invalid tool_call: ${JSON.stringify(C)}. Available options are: ${Object.keys(m).map(G=>JSON.stringify(G)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:k,content:$});continue}let M;try{M=Ez(B)?await B.parse(A):A}catch($){const G=$ instanceof Error?$.message:String($);this._addMessage({role:r,tool_call_id:k,content:G});continue}const T=await B.function(M,this),H=oe(this,ys,"m",UT).call(this,T);if(this._addMessage({role:r,tool_call_id:k,content:H}),h)return}}}}ys=new WeakSet,N_=function(){return oe(this,ys,"m",p0).call(this).content??null},p0=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(h0(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new Xe("stream ended without producing a ChatCompletionMessage with role=assistant")},E_=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(h0(n)&&n?.tool_calls?.length)return n.tool_calls.filter(s=>s.type==="function").at(-1)?.function}},A_=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(zT(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(s=>s.role==="assistant"&&s.tool_calls?.some(r=>r.type==="function"&&r.id===n.tool_call_id)))return n.content}},j_=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},HT=function(e){if(e.n!=null&&e.n>1)throw new Xe("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},UT=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class mS extends VT{static runTools(e,n,s){const r=new mS,a={...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,n,a)),r}_addMessage(e,n=!0){super._addMessage(e,n),h0(e)&&e.content&&this._emit("content",e.content)}}const FT=1,qT=2,KT=4,WT=8,GT=16,YT=32,XT=64,JT=128,QT=256,ZT=JT|QT,e6=GT|YT|ZT|XT,t6=FT|qT|e6,n6=KT|WT,jz=t6|n6,Hn={STR:FT,NUM:qT,ARR:KT,OBJ:WT,NULL:GT,BOOL:YT,NAN:XT,INFINITY:JT,MINUS_INFINITY:QT,INF:ZT,SPECIAL:e6,ATOM:t6,COLLECTION:n6,ALL:jz};class Tz extends Error{}class Oz extends Error{}function Rz(t,e=Hn.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return Bz(t.trim(),e)}const Bz=(t,e)=>{const n=t.length;let s=0;const r=v=>{throw new Tz(`${v} at position ${s}`)},a=v=>{throw new Oz(`${v} at position ${s}`)},o=()=>(m(),s>=n&&r("Unexpected end of input"),t[s]==='"'?c():t[s]==="{"?h():t[s]==="["?d():t.substring(s,s+4)==="null"||Hn.NULL&e&&n-s<4&&"null".startsWith(t.substring(s))?(s+=4,null):t.substring(s,s+4)==="true"||Hn.BOOL&e&&n-s<4&&"true".startsWith(t.substring(s))?(s+=4,!0):t.substring(s,s+5)==="false"||Hn.BOOL&e&&n-s<5&&"false".startsWith(t.substring(s))?(s+=5,!1):t.substring(s,s+8)==="Infinity"||Hn.INFINITY&e&&n-s<8&&"Infinity".startsWith(t.substring(s))?(s+=8,1/0):t.substring(s,s+9)==="-Infinity"||Hn.MINUS_INFINITY&e&&1<n-s&&n-s<9&&"-Infinity".startsWith(t.substring(s))?(s+=9,-1/0):t.substring(s,s+3)==="NaN"||Hn.NAN&e&&n-s<3&&"NaN".startsWith(t.substring(s))?(s+=3,NaN):g()),c=()=>{const v=s;let y=!1;for(s++;s<n&&(t[s]!=='"'||y&&t[s-1]==="\\");)y=t[s]==="\\"?!y:!1,s++;if(t.charAt(s)=='"')try{return JSON.parse(t.substring(v,++s-Number(y)))}catch(x){a(String(x))}else if(Hn.STR&e)try{return JSON.parse(t.substring(v,s-Number(y))+'"')}catch{return JSON.parse(t.substring(v,t.lastIndexOf("\\"))+'"')}r("Unterminated string literal")},h=()=>{s++,m();const v={};try{for(;t[s]!=="}";){if(m(),s>=n&&Hn.OBJ&e)return v;const y=c();m(),s++;try{const x=o();Object.defineProperty(v,y,{value:x,writable:!0,enumerable:!0,configurable:!0})}catch(x){if(Hn.OBJ&e)return v;throw x}m(),t[s]===","&&s++}}catch{if(Hn.OBJ&e)return v;r("Expected '}' at end of object")}return s++,v},d=()=>{s++;const v=[];try{for(;t[s]!=="]";)v.push(o()),m(),t[s]===","&&s++}catch{if(Hn.ARR&e)return v;r("Expected ']' at end of array")}return s++,v},g=()=>{if(s===0){t==="-"&&Hn.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(t)}catch(y){if(Hn.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}a(String(y))}}const v=s;for(t[s]==="-"&&s++;t[s]&&!",]}".includes(t[s]);)s++;s==n&&!(Hn.NUM&e)&&r("Unterminated number literal");try{return JSON.parse(t.substring(v,s))}catch{t.substring(v,s)==="-"&&Hn.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(t.substring(v,t.lastIndexOf("e")))}catch(x){a(String(x))}}},m=()=>{for(;s<n&&` 
\r	`.includes(t[s]);)s++};return o()},F5=t=>Rz(t,Hn.ALL^Hn.NUM);var On,Vi,oc,Pa,ab,sm,lb,ob,cb,rm,ub,q5;class Ud extends VT{constructor(e){super(),On.add(this),Vi.set(this,void 0),oc.set(this,void 0),Pa.set(this,void 0),nt(this,Vi,e),nt(this,oc,[])}get currentChatCompletionSnapshot(){return oe(this,Pa,"f")}static fromReadableStream(e){const n=new Ud(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,s){const r=new Ud(n);return r._run(()=>r._runChatCompletion(e,{...n,stream:!0},{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,n,s){super._createChatCompletion;const r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),oe(this,On,"m",ab).call(this);const a=await e.chat.completions.create({...n,stream:!0},{...s,signal:this.controller.signal});this._connected();for await(const o of a)oe(this,On,"m",lb).call(this,o);if(a.controller.signal?.aborted)throw new Tr;return this._addChatCompletion(oe(this,On,"m",rm).call(this))}async _fromReadableStream(e,n){const s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),oe(this,On,"m",ab).call(this),this._connected();const r=ci.fromReadableStream(e,this.controller);let a;for await(const o of r)a&&a!==o.id&&this._addChatCompletion(oe(this,On,"m",rm).call(this)),oe(this,On,"m",lb).call(this,o),a=o.id;if(r.controller.signal?.aborted)throw new Tr;return this._addChatCompletion(oe(this,On,"m",rm).call(this))}[(Vi=new WeakMap,oc=new WeakMap,Pa=new WeakMap,On=new WeakSet,ab=function(){this.ended||nt(this,Pa,void 0)},sm=function(n){let s=oe(this,oc,"f")[n.index];return s||(s={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},oe(this,oc,"f")[n.index]=s,s)},lb=function(n){if(this.ended)return;const s=oe(this,On,"m",q5).call(this,n);this._emit("chunk",n,s);for(const r of n.choices){const a=s.choices[r.index];r.delta.content!=null&&a.message?.role==="assistant"&&a.message?.content&&(this._emit("content",r.delta.content,a.message.content),this._emit("content.delta",{delta:r.delta.content,snapshot:a.message.content,parsed:a.message.parsed})),r.delta.refusal!=null&&a.message?.role==="assistant"&&a.message?.refusal&&this._emit("refusal.delta",{delta:r.delta.refusal,snapshot:a.message.refusal}),r.logprobs?.content!=null&&a.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:r.logprobs?.content,snapshot:a.logprobs?.content??[]}),r.logprobs?.refusal!=null&&a.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:r.logprobs?.refusal,snapshot:a.logprobs?.refusal??[]});const o=oe(this,On,"m",sm).call(this,a);a.finish_reason&&(oe(this,On,"m",cb).call(this,a),o.current_tool_call_index!=null&&oe(this,On,"m",ob).call(this,a,o.current_tool_call_index));for(const c of r.delta.tool_calls??[])o.current_tool_call_index!==c.index&&(oe(this,On,"m",cb).call(this,a),o.current_tool_call_index!=null&&oe(this,On,"m",ob).call(this,a,o.current_tool_call_index)),o.current_tool_call_index=c.index;for(const c of r.delta.tool_calls??[]){const h=a.message.tool_calls?.[c.index];h?.type&&(h?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:h.function?.name,index:c.index,arguments:h.function.arguments,parsed_arguments:h.function.parsed_arguments,arguments_delta:c.function?.arguments??""}):(h?.type,void 0))}}},ob=function(n,s){if(oe(this,On,"m",sm).call(this,n).done_tool_calls.has(s))return;const a=n.message.tool_calls?.[s];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const o=oe(this,Vi,"f")?.tools?.find(c=>u0(c)&&c.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:s,arguments:a.function.arguments,parsed_arguments:ff(o)?o.$parseRaw(a.function.arguments):o?.function.strict?JSON.parse(a.function.arguments):null})}else a.type},cb=function(n){const s=oe(this,On,"m",sm).call(this,n);if(n.message.content&&!s.content_done){s.content_done=!0;const r=oe(this,On,"m",ub).call(this);this._emit("content.done",{content:n.message.content,parsed:r?r.$parseRaw(n.message.content):null})}n.message.refusal&&!s.refusal_done&&(s.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!s.logprobs_content_done&&(s.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!s.logprobs_refusal_done&&(s.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},rm=function(){if(this.ended)throw new Xe("stream has ended, this shouldn't happen");const n=oe(this,Pa,"f");if(!n)throw new Xe("request ended without sending any chunks");return nt(this,Pa,void 0),nt(this,oc,[]),Mz(n,oe(this,Vi,"f"))},ub=function(){const n=oe(this,Vi,"f")?.response_format;return dS(n)?n:null},q5=function(n){var s,r,a,o;let c=oe(this,Pa,"f");const{choices:h,...d}=n;c?Object.assign(c,d):c=nt(this,Pa,{...d,choices:[]});for(const{delta:g,finish_reason:m,index:v,logprobs:y=null,...x}of n.choices){let w=c.choices[v];if(w||(w=c.choices[v]={finish_reason:m,index:v,message:{},logprobs:y,...x}),y)if(!w.logprobs)w.logprobs=Object.assign({},y);else{const{content:T,refusal:H,...$}=y;Object.assign(w.logprobs,$),T&&((s=w.logprobs).content??(s.content=[]),w.logprobs.content.push(...T)),H&&((r=w.logprobs).refusal??(r.refusal=[]),w.logprobs.refusal.push(...H))}if(m&&(w.finish_reason=m,oe(this,Vi,"f")&&IT(oe(this,Vi,"f")))){if(m==="length")throw new vT;if(m==="content_filter")throw new bT}if(Object.assign(w,x),!g)continue;const{content:S,refusal:k,function_call:C,role:A,tool_calls:B,...M}=g;if(Object.assign(w.message,M),k&&(w.message.refusal=(w.message.refusal||"")+k),A&&(w.message.role=A),C&&(w.message.function_call?(C.name&&(w.message.function_call.name=C.name),C.arguments&&((a=w.message.function_call).arguments??(a.arguments=""),w.message.function_call.arguments+=C.arguments)):w.message.function_call=C),S&&(w.message.content=(w.message.content||"")+S,!w.message.refusal&&oe(this,On,"m",ub).call(this)&&(w.message.parsed=F5(w.message.content))),B){w.message.tool_calls||(w.message.tool_calls=[]);for(const{index:T,id:H,type:$,function:G,...z}of B){const Q=(o=w.message.tool_calls)[T]??(o[T]={});Object.assign(Q,z),H&&(Q.id=H),$&&(Q.type=$),G&&(Q.function??(Q.function={name:G.name??"",arguments:""})),G?.name&&(Q.function.name=G.name),G?.arguments&&(Q.function.arguments+=G.arguments,Cz(oe(this,Vi,"f"),Q)&&(Q.function.parsed_arguments=F5(Q.function.arguments)))}}}return c},Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("chunk",r=>{const a=n.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{s=!0;for(const r of n)r.resolve(void 0);n.length=0}),this.on("abort",r=>{s=!0;for(const a of n)a.reject(r);n.length=0}),this.on("error",r=>{s=!0;for(const a of n)a.reject(r);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((a,o)=>n.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new ci(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Mz(t,e){const{id:n,choices:s,created:r,model:a,system_fingerprint:o,...c}=t,h={...c,id:n,choices:s.map(({message:d,finish_reason:g,index:m,logprobs:v,...y})=>{if(!g)throw new Xe(`missing finish_reason for choice ${m}`);const{content:x=null,function_call:w,tool_calls:S,...k}=d,C=d.role;if(!C)throw new Xe(`missing role for choice ${m}`);if(w){const{arguments:A,name:B}=w;if(A==null)throw new Xe(`missing function_call.arguments for choice ${m}`);if(!B)throw new Xe(`missing function_call.name for choice ${m}`);return{...y,message:{content:x,function_call:{arguments:A,name:B},role:C,refusal:d.refusal??null},finish_reason:g,index:m,logprobs:v}}return S?{...y,index:m,finish_reason:g,logprobs:v,message:{...k,role:C,content:x,refusal:d.refusal??null,tool_calls:S.map((A,B)=>{const{function:M,type:T,id:H,...$}=A,{arguments:G,name:z,...Q}=M||{};if(H==null)throw new Xe(`missing choices[${m}].tool_calls[${B}].id
${im(t)}`);if(T==null)throw new Xe(`missing choices[${m}].tool_calls[${B}].type
${im(t)}`);if(z==null)throw new Xe(`missing choices[${m}].tool_calls[${B}].function.name
${im(t)}`);if(G==null)throw new Xe(`missing choices[${m}].tool_calls[${B}].function.arguments
${im(t)}`);return{...$,id:H,type:T,function:{...Q,name:z,arguments:G}}})}}:{...y,message:{...k,content:x,role:C,refusal:d.refusal??null},finish_reason:g,index:m,logprobs:v}}),created:r,model:a,object:"chat.completion",...o?{system_fingerprint:o}:{}};return wz(h,e)}function im(t){return JSON.stringify(t)}class m0 extends Ud{static fromReadableStream(e){const n=new m0(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,s){const r=new m0(n),a={...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,n,a)),r}}let gS=class extends We{constructor(){super(...arguments),this.messages=new LT(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(xe`/chat/completions/${e}`,n)}update(e,n,s){return this._client.post(xe`/chat/completions/${e}`,{body:n,...s})}list(e={},n){return this._client.getAPIList("/chat/completions",An,{query:e,...n})}delete(e,n){return this._client.delete(xe`/chat/completions/${e}`,n)}parse(e,n){return Nz(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(s=>fS(s,e))}runTools(e,n){return e.stream?m0.runTools(this._client,e,n):mS.runTools(this._client,e,n)}stream(e,n){return Ud.createChatCompletion(this._client,e,n)}};gS.Messages=LT;class yS extends We{constructor(){super(...arguments),this.completions=new gS(this._client)}}yS.Completions=gS;const s6=Symbol("brand.privateNullableHeaders");function*Dz(t){if(!t)return;if(s6 in t){const{values:s,nulls:r}=t;yield*s.entries();for(const a of r)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():j5(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let s of n){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const a=j5(s[1])?s[1]:[s[1]];let o=!1;for(const c of a)c!==void 0&&(e&&!o&&(o=!0,yield[r,null]),yield[r,c])}}const Ve=t=>{const e=new Headers,n=new Set;for(const s of t){const r=new Set;for(const[a,o]of Dz(s)){const c=a.toLowerCase();r.has(c)||(e.delete(a),r.add(c)),o===null?(e.delete(a),n.add(c)):(e.append(a,o),n.delete(c))}}return{[s6]:!0,values:e,nulls:n}};class r6 extends We{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:Ve([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class i6 extends We{create(e,n){return this._client.post("/audio/transcriptions",Jl({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class a6 extends We{create(e,n){return this._client.post("/audio/translations",Jl({body:e,...n,__metadata:{model:e.model}},this._client))}}class pf extends We{constructor(){super(...arguments),this.transcriptions=new i6(this._client),this.translations=new a6(this._client),this.speech=new r6(this._client)}}pf.Transcriptions=i6;pf.Translations=a6;pf.Speech=r6;class l6 extends We{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(xe`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",An,{query:e,...n})}cancel(e,n){return this._client.post(xe`/batches/${e}/cancel`,n)}}class o6 extends We{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:Ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(xe`/assistants/${e}`,{...n,headers:Ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,s){return this._client.post(xe`/assistants/${e}`,{body:n,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e={},n){return this._client.getAPIList("/assistants",An,{query:e,...n,headers:Ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(xe`/assistants/${e}`,{...n,headers:Ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let c6=class extends We{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:Ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class u6 extends We{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:Ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let _g=class extends We{constructor(){super(...arguments),this.sessions=new c6(this._client),this.transcriptionSessions=new u6(this._client)}};_g.Sessions=c6;_g.TranscriptionSessions=u6;class h6 extends We{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:Ve([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(e,n){return this._client.post(xe`/chatkit/sessions/${e}/cancel`,{...n,headers:Ve([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let d6=class extends We{retrieve(e,n){return this._client.get(xe`/chatkit/threads/${e}`,{...n,headers:Ve([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",c0,{query:e,...n,headers:Ve([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(e,n){return this._client.delete(xe`/chatkit/threads/${e}`,{...n,headers:Ve([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(e,n={},s){return this._client.getAPIList(xe`/chatkit/threads/${e}/items`,c0,{query:n,...s,headers:Ve([{"OpenAI-Beta":"chatkit_beta=v1"},s?.headers])})}};class xg extends We{constructor(){super(...arguments),this.sessions=new h6(this._client),this.threads=new d6(this._client)}}xg.Sessions=h6;xg.Threads=d6;class f6 extends We{create(e,n,s){return this._client.post(xe`/threads/${e}/messages`,{body:n,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}retrieve(e,n,s){const{thread_id:r}=n;return this._client.get(xe`/threads/${r}/messages/${e}`,{...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}update(e,n,s){const{thread_id:r,...a}=n;return this._client.post(xe`/threads/${r}/messages/${e}`,{body:a,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n={},s){return this._client.getAPIList(xe`/threads/${e}/messages`,An,{query:n,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}delete(e,n,s){const{thread_id:r}=n;return this._client.delete(xe`/threads/${r}/messages/${e}`,{...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}class p6 extends We{retrieve(e,n,s){const{thread_id:r,run_id:a,...o}=n;return this._client.get(xe`/threads/${r}/runs/${a}/steps/${e}`,{query:o,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n,s){const{thread_id:r,...a}=n;return this._client.getAPIList(xe`/threads/${r}/runs/${e}/steps`,An,{query:a,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}const Lz=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,s=new Uint8Array(n);for(let r=0;r<n;r++)s[r]=e.charCodeAt(r);return Array.from(new Float32Array(s.buffer))}};var Iz={};const cc=t=>{if(typeof globalThis.process<"u")return Iz?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var es,Il,T_,oi,Im,Kr,Pl,Nc,Dl,g0,ir,Pm,zm,wd,Kh,Wh,K5,W5,G5,Y5,X5,J5,Q5;class Sd extends pS{constructor(){super(...arguments),es.add(this),T_.set(this,[]),oi.set(this,{}),Im.set(this,{}),Kr.set(this,void 0),Pl.set(this,void 0),Nc.set(this,void 0),Dl.set(this,void 0),g0.set(this,void 0),ir.set(this,void 0),Pm.set(this,void 0),zm.set(this,void 0),wd.set(this,void 0)}[(T_=new WeakMap,oi=new WeakMap,Im=new WeakMap,Kr=new WeakMap,Pl=new WeakMap,Nc=new WeakMap,Dl=new WeakMap,g0=new WeakMap,ir=new WeakMap,Pm=new WeakMap,zm=new WeakMap,wd=new WeakMap,es=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("event",r=>{const a=n.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{s=!0;for(const r of n)r.resolve(void 0);n.length=0}),this.on("abort",r=>{s=!0;for(const a of n)a.reject(r);n.length=0}),this.on("error",r=>{s=!0;for(const a of n)a.reject(r);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((a,o)=>n.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new Il;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=ci.fromReadableStream(e,this.controller);for await(const a of r)oe(this,es,"m",Kh).call(this,a);if(r.controller.signal?.aborted)throw new Tr;return this._addRun(oe(this,es,"m",Wh).call(this))}toReadableStream(){return new ci(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,s,r){const a=new Il;return a._run(()=>a._runToolAssistantStream(e,n,s,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,n,s,r){const a=r?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...s,stream:!0},c=await e.submitToolOutputs(n,o,{...r,signal:this.controller.signal});this._connected();for await(const h of c)oe(this,es,"m",Kh).call(this,h);if(c.controller.signal?.aborted)throw new Tr;return this._addRun(oe(this,es,"m",Wh).call(this))}static createThreadAssistantStream(e,n,s){const r=new Il;return r._run(()=>r._threadAssistantStream(e,n,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,n,s,r){const a=new Il;return a._run(()=>a._runAssistantStream(e,n,s,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return oe(this,Pm,"f")}currentRun(){return oe(this,zm,"f")}currentMessageSnapshot(){return oe(this,Kr,"f")}currentRunStepSnapshot(){return oe(this,wd,"f")}async finalRunSteps(){return await this.done(),Object.values(oe(this,oi,"f"))}async finalMessages(){return await this.done(),Object.values(oe(this,Im,"f"))}async finalRun(){if(await this.done(),!oe(this,Pl,"f"))throw Error("Final run was not received.");return oe(this,Pl,"f")}async _createThreadAssistantStream(e,n,s){const r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},o=await e.createAndRun(a,{...s,signal:this.controller.signal});this._connected();for await(const c of o)oe(this,es,"m",Kh).call(this,c);if(o.controller.signal?.aborted)throw new Tr;return this._addRun(oe(this,es,"m",Wh).call(this))}async _createAssistantStream(e,n,s,r){const a=r?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...s,stream:!0},c=await e.create(n,o,{...r,signal:this.controller.signal});this._connected();for await(const h of c)oe(this,es,"m",Kh).call(this,h);if(c.controller.signal?.aborted)throw new Tr;return this._addRun(oe(this,es,"m",Wh).call(this))}static accumulateDelta(e,n){for(const[s,r]of Object.entries(n)){if(!e.hasOwnProperty(s)){e[s]=r;continue}let a=e[s];if(a==null){e[s]=r;continue}if(s==="index"||s==="type"){e[s]=r;continue}if(typeof a=="string"&&typeof r=="string")a+=r;else if(typeof a=="number"&&typeof r=="number")a+=r;else if(sb(a)&&sb(r))a=this.accumulateDelta(a,r);else if(Array.isArray(a)&&Array.isArray(r)){if(a.every(o=>typeof o=="string"||typeof o=="number")){a.push(...r);continue}for(const o of r){if(!sb(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const c=o.index;if(c==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof c!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${c}`);const h=a[c];h==null?a.push(o):a[c]=this.accumulateDelta(h,o)}continue}else throw Error(`Unhandled record type: ${s}, deltaValue: ${r}, accValue: ${a}`);e[s]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,n,s){return await this._createThreadAssistantStream(n,e,s)}async _runAssistantStream(e,n,s,r){return await this._createAssistantStream(n,e,s,r)}async _runToolAssistantStream(e,n,s,r){return await this._createToolAssistantStream(n,e,s,r)}}Il=Sd,Kh=function(e){if(!this.ended)switch(nt(this,Pm,e),oe(this,es,"m",G5).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":oe(this,es,"m",Q5).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":oe(this,es,"m",W5).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":oe(this,es,"m",K5).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Wh=function(){if(this.ended)throw new Xe("stream has ended, this shouldn't happen");if(!oe(this,Pl,"f"))throw Error("Final run has not been received");return oe(this,Pl,"f")},K5=function(e){const[n,s]=oe(this,es,"m",X5).call(this,e,oe(this,Kr,"f"));nt(this,Kr,n),oe(this,Im,"f")[n.id]=n;for(const r of s){const a=n.content[r.index];a?.type=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const r of e.data.delta.content){if(r.type=="text"&&r.text){let a=r.text,o=n.content[r.index];if(o&&o.type=="text")this._emit("textDelta",a,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=oe(this,Nc,"f")){if(oe(this,Dl,"f"))switch(oe(this,Dl,"f").type){case"text":this._emit("textDone",oe(this,Dl,"f").text,oe(this,Kr,"f"));break;case"image_file":this._emit("imageFileDone",oe(this,Dl,"f").image_file,oe(this,Kr,"f"));break}nt(this,Nc,r.index)}nt(this,Dl,n.content[r.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(oe(this,Nc,"f")!==void 0){const r=e.data.content[oe(this,Nc,"f")];if(r)switch(r.type){case"image_file":this._emit("imageFileDone",r.image_file,oe(this,Kr,"f"));break;case"text":this._emit("textDone",r.text,oe(this,Kr,"f"));break}}oe(this,Kr,"f")&&this._emit("messageDone",e.data),nt(this,Kr,void 0)}},W5=function(e){const n=oe(this,es,"m",Y5).call(this,e);switch(nt(this,wd,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const s=e.data.delta;if(s.step_details&&s.step_details.type=="tool_calls"&&s.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const a of s.step_details.tool_calls)a.index==oe(this,g0,"f")?this._emit("toolCallDelta",a,n.step_details.tool_calls[a.index]):(oe(this,ir,"f")&&this._emit("toolCallDone",oe(this,ir,"f")),nt(this,g0,a.index),nt(this,ir,n.step_details.tool_calls[a.index]),oe(this,ir,"f")&&this._emit("toolCallCreated",oe(this,ir,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":nt(this,wd,void 0),e.data.step_details.type=="tool_calls"&&oe(this,ir,"f")&&(this._emit("toolCallDone",oe(this,ir,"f")),nt(this,ir,void 0)),this._emit("runStepDone",e.data,n);break}},G5=function(e){oe(this,T_,"f").push(e),this._emit("event",e)},Y5=function(e){switch(e.event){case"thread.run.step.created":return oe(this,oi,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=oe(this,oi,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let s=e.data;if(s.delta){const r=Il.accumulateDelta(n,s.delta);oe(this,oi,"f")[e.data.id]=r}return oe(this,oi,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":oe(this,oi,"f")[e.data.id]=e.data;break}if(oe(this,oi,"f")[e.data.id])return oe(this,oi,"f")[e.data.id];throw new Error("No snapshot available")},X5=function(e,n){let s=[];switch(e.event){case"thread.message.created":return[e.data,s];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const a of r.delta.content)if(a.index in n.content){let o=n.content[a.index];n.content[a.index]=oe(this,es,"m",J5).call(this,a,o)}else n.content[a.index]=a,s.push(a);return[n,s];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,s];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},J5=function(e,n){return Il.accumulateDelta(n,e)},Q5=function(e){switch(nt(this,zm,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":nt(this,Pl,e.data),oe(this,ir,"f")&&(this._emit("toolCallDone",oe(this,ir,"f")),nt(this,ir,void 0));break}};let vS=class extends We{constructor(){super(...arguments),this.steps=new p6(this._client)}create(e,n,s){const{include:r,...a}=n;return this._client.post(xe`/threads/${e}/runs`,{query:{include:r},body:a,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers]),stream:n.stream??!1})}retrieve(e,n,s){const{thread_id:r}=n;return this._client.get(xe`/threads/${r}/runs/${e}`,{...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}update(e,n,s){const{thread_id:r,...a}=n;return this._client.post(xe`/threads/${r}/runs/${e}`,{body:a,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n={},s){return this._client.getAPIList(xe`/threads/${e}/runs`,An,{query:n,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}cancel(e,n,s){const{thread_id:r}=n;return this._client.post(xe`/threads/${r}/runs/${e}/cancel`,{...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async createAndPoll(e,n,s){const r=await this.create(e,n,s);return await this.poll(r.id,{thread_id:e},s)}createAndStream(e,n,s){return Sd.createAssistantStream(e,this._client.beta.threads.runs,n,s)}async poll(e,n,s){const r=Ve([s?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":s?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:o}=await this.retrieve(e,n,{...s,headers:{...s?.headers,...r}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let c=5e3;if(s?.pollIntervalMs)c=s.pollIntervalMs;else{const h=o.headers.get("openai-poll-after-ms");if(h){const d=parseInt(h);isNaN(d)||(c=d)}}await df(c);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,n,s){return Sd.createAssistantStream(e,this._client.beta.threads.runs,n,s)}submitToolOutputs(e,n,s){const{thread_id:r,...a}=n;return this._client.post(xe`/threads/${r}/runs/${e}/submit_tool_outputs`,{body:a,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,s){const r=await this.submitToolOutputs(e,n,s);return await this.poll(r.id,n,s)}submitToolOutputsStream(e,n,s){return Sd.createToolAssistantStream(e,this._client.beta.threads.runs,n,s)}};vS.Steps=p6;class wg extends We{constructor(){super(...arguments),this.runs=new vS(this._client),this.messages=new f6(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:Ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(xe`/threads/${e}`,{...n,headers:Ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,s){return this._client.post(xe`/threads/${e}`,{body:n,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}delete(e,n){return this._client.delete(xe`/threads/${e}`,{...n,headers:Ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:Ve([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const s=await this.createAndRun(e,n);return await this.runs.poll(s.id,{thread_id:s.thread_id},n)}createAndRunStream(e,n){return Sd.createThreadAssistantStream(e,this._client.beta.threads,n)}}wg.Runs=vS;wg.Messages=f6;class cu extends We{constructor(){super(...arguments),this.realtime=new _g(this._client),this.chatkit=new xg(this._client),this.assistants=new o6(this._client),this.threads=new wg(this._client)}}cu.Realtime=_g;cu.ChatKit=xg;cu.Assistants=o6;cu.Threads=wg;class m6 extends We{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class g6 extends We{retrieve(e,n,s){const{container_id:r}=n;return this._client.get(xe`/containers/${r}/files/${e}/content`,{...s,headers:Ve([{Accept:"application/binary"},s?.headers]),__binaryResponse:!0})}}let bS=class extends We{constructor(){super(...arguments),this.content=new g6(this._client)}create(e,n,s){return this._client.post(xe`/containers/${e}/files`,Jl({body:n,...s},this._client))}retrieve(e,n,s){const{container_id:r}=n;return this._client.get(xe`/containers/${r}/files/${e}`,s)}list(e,n={},s){return this._client.getAPIList(xe`/containers/${e}/files`,An,{query:n,...s})}delete(e,n,s){const{container_id:r}=n;return this._client.delete(xe`/containers/${r}/files/${e}`,{...s,headers:Ve([{Accept:"*/*"},s?.headers])})}};bS.Content=g6;class _S extends We{constructor(){super(...arguments),this.files=new bS(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(xe`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",An,{query:e,...n})}delete(e,n){return this._client.delete(xe`/containers/${e}`,{...n,headers:Ve([{Accept:"*/*"},n?.headers])})}}_S.Files=bS;class y6 extends We{create(e,n,s){const{include:r,...a}=n;return this._client.post(xe`/conversations/${e}/items`,{query:{include:r},body:a,...s})}retrieve(e,n,s){const{conversation_id:r,...a}=n;return this._client.get(xe`/conversations/${r}/items/${e}`,{query:a,...s})}list(e,n={},s){return this._client.getAPIList(xe`/conversations/${e}/items`,c0,{query:n,...s})}delete(e,n,s){const{conversation_id:r}=n;return this._client.delete(xe`/conversations/${r}/items/${e}`,s)}}class xS extends We{constructor(){super(...arguments),this.items=new y6(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(xe`/conversations/${e}`,n)}update(e,n,s){return this._client.post(xe`/conversations/${e}`,{body:n,...s})}delete(e,n){return this._client.delete(xe`/conversations/${e}`,n)}}xS.Items=y6;class v6 extends We{create(e,n){const s=!!e.encoding_format;let r=s?e.encoding_format:"base64";s&&Zn(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:r},...n});return s?a:(Zn(this._client).debug("embeddings/decoding base64 embeddings from base64"),a._thenUnwrap(o=>(o&&o.data&&o.data.forEach(c=>{const h=c.embedding;c.embedding=Lz(h)}),o)))}}class b6 extends We{retrieve(e,n,s){const{eval_id:r,run_id:a}=n;return this._client.get(xe`/evals/${r}/runs/${a}/output_items/${e}`,s)}list(e,n,s){const{eval_id:r,...a}=n;return this._client.getAPIList(xe`/evals/${r}/runs/${e}/output_items`,An,{query:a,...s})}}class wS extends We{constructor(){super(...arguments),this.outputItems=new b6(this._client)}create(e,n,s){return this._client.post(xe`/evals/${e}/runs`,{body:n,...s})}retrieve(e,n,s){const{eval_id:r}=n;return this._client.get(xe`/evals/${r}/runs/${e}`,s)}list(e,n={},s){return this._client.getAPIList(xe`/evals/${e}/runs`,An,{query:n,...s})}delete(e,n,s){const{eval_id:r}=n;return this._client.delete(xe`/evals/${r}/runs/${e}`,s)}cancel(e,n,s){const{eval_id:r}=n;return this._client.post(xe`/evals/${r}/runs/${e}`,s)}}wS.OutputItems=b6;class SS extends We{constructor(){super(...arguments),this.runs=new wS(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(xe`/evals/${e}`,n)}update(e,n,s){return this._client.post(xe`/evals/${e}`,{body:n,...s})}list(e={},n){return this._client.getAPIList("/evals",An,{query:e,...n})}delete(e,n){return this._client.delete(xe`/evals/${e}`,n)}}SS.Runs=wS;let _6=class extends We{create(e,n){return this._client.post("/files",Jl({body:e,...n},this._client))}retrieve(e,n){return this._client.get(xe`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",An,{query:e,...n})}delete(e,n){return this._client.delete(xe`/files/${e}`,n)}content(e,n){return this._client.get(xe`/files/${e}/content`,{...n,headers:Ve([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:s=1800*1e3}={}){const r=new Set(["processed","error","deleted"]),a=Date.now();let o=await this.retrieve(e);for(;!o.status||!r.has(o.status);)if(await df(n),o=await this.retrieve(e),Date.now()-a>s)throw new oS({message:`Giving up on waiting for file ${e} to finish processing after ${s} milliseconds.`});return o}};class x6 extends We{}let w6=class extends We{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class kS extends We{constructor(){super(...arguments),this.graders=new w6(this._client)}}kS.Graders=w6;class S6 extends We{create(e,n,s){return this._client.getAPIList(xe`/fine_tuning/checkpoints/${e}/permissions`,bg,{body:n,method:"post",...s})}retrieve(e,n={},s){return this._client.get(xe`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...s})}delete(e,n,s){const{fine_tuned_model_checkpoint:r}=n;return this._client.delete(xe`/fine_tuning/checkpoints/${r}/permissions/${e}`,s)}}let CS=class extends We{constructor(){super(...arguments),this.permissions=new S6(this._client)}};CS.Permissions=S6;class k6 extends We{list(e,n={},s){return this._client.getAPIList(xe`/fine_tuning/jobs/${e}/checkpoints`,An,{query:n,...s})}}class NS extends We{constructor(){super(...arguments),this.checkpoints=new k6(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(xe`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",An,{query:e,...n})}cancel(e,n){return this._client.post(xe`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},s){return this._client.getAPIList(xe`/fine_tuning/jobs/${e}/events`,An,{query:n,...s})}pause(e,n){return this._client.post(xe`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(xe`/fine_tuning/jobs/${e}/resume`,n)}}NS.Checkpoints=k6;class uu extends We{constructor(){super(...arguments),this.methods=new x6(this._client),this.jobs=new NS(this._client),this.checkpoints=new CS(this._client),this.alpha=new kS(this._client)}}uu.Methods=x6;uu.Jobs=NS;uu.Checkpoints=CS;uu.Alpha=kS;class C6 extends We{}class ES extends We{constructor(){super(...arguments),this.graderModels=new C6(this._client)}}ES.GraderModels=C6;class N6 extends We{createVariation(e,n){return this._client.post("/images/variations",Jl({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",Jl({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class E6 extends We{retrieve(e,n){return this._client.get(xe`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",bg,e)}delete(e,n){return this._client.delete(xe`/models/${e}`,n)}}class A6 extends We{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class j6 extends We{accept(e,n,s){return this._client.post(xe`/realtime/calls/${e}/accept`,{body:n,...s,headers:Ve([{Accept:"*/*"},s?.headers])})}hangup(e,n){return this._client.post(xe`/realtime/calls/${e}/hangup`,{...n,headers:Ve([{Accept:"*/*"},n?.headers])})}refer(e,n,s){return this._client.post(xe`/realtime/calls/${e}/refer`,{body:n,...s,headers:Ve([{Accept:"*/*"},s?.headers])})}reject(e,n={},s){return this._client.post(xe`/realtime/calls/${e}/reject`,{body:n,...s,headers:Ve([{Accept:"*/*"},s?.headers])})}}class T6 extends We{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class Sg extends We{constructor(){super(...arguments),this.clientSecrets=new T6(this._client),this.calls=new j6(this._client)}}Sg.ClientSecrets=T6;Sg.Calls=j6;function Pz(t,e){return!e||!$z(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(s=>({...s,parsed:null}))}:n)}:O6(t,e)}function O6(t,e){const n=t.output.map(r=>{if(r.type==="function_call")return{...r,parsed_arguments:Vz(e,r)};if(r.type==="message"){const a=r.content.map(o=>o.type==="output_text"?{...o,parsed:zz(e,o.text)}:o);return{...r,content:a}}return r}),s=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||O_(s),Object.defineProperty(s,"output_parsed",{enumerable:!0,get(){for(const r of s.output)if(r.type==="message"){for(const a of r.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),s}function zz(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function $z(t){return!!dS(t.text?.format)}function Hz(t){return t?.$brand==="auto-parseable-tool"}function Uz(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function Vz(t,e){const n=Uz(t.tools??[],e.name);return{...e,...e,parsed_arguments:Hz(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function O_(t){const e=[];for(const n of t.output)if(n.type==="message")for(const s of n.content)s.type==="output_text"&&e.push(s.text);t.output_text=e.join("")}var uc,am,za,lm,Z5,eE,tE,nE;class AS extends pS{constructor(e){super(),uc.add(this),am.set(this,void 0),za.set(this,void 0),lm.set(this,void 0),nt(this,am,e)}static createResponse(e,n,s){const r=new AS(n);return r._run(()=>r._createOrRetrieveResponse(e,n,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createOrRetrieveResponse(e,n,s){const r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),oe(this,uc,"m",Z5).call(this);let a,o=null;"response_id"in n?(a=await e.responses.retrieve(n.response_id,{stream:!0},{...s,signal:this.controller.signal,stream:!0}),o=n.starting_after??null):a=await e.responses.create({...n,stream:!0},{...s,signal:this.controller.signal}),this._connected();for await(const c of a)oe(this,uc,"m",eE).call(this,c,o);if(a.controller.signal?.aborted)throw new Tr;return oe(this,uc,"m",tE).call(this)}[(am=new WeakMap,za=new WeakMap,lm=new WeakMap,uc=new WeakSet,Z5=function(){this.ended||nt(this,za,void 0)},eE=function(n,s){if(this.ended)return;const r=(o,c)=>{(s==null||c.sequence_number>s)&&this._emit(o,c)},a=oe(this,uc,"m",nE).call(this,n);switch(r("event",n),n.type){case"response.output_text.delta":{const o=a.output[n.output_index];if(!o)throw new Xe(`missing output at index ${n.output_index}`);if(o.type==="message"){const c=o.content[n.content_index];if(!c)throw new Xe(`missing content at index ${n.content_index}`);if(c.type!=="output_text")throw new Xe(`expected content to be 'output_text', got ${c.type}`);r("response.output_text.delta",{...n,snapshot:c.text})}break}case"response.function_call_arguments.delta":{const o=a.output[n.output_index];if(!o)throw new Xe(`missing output at index ${n.output_index}`);o.type==="function_call"&&r("response.function_call_arguments.delta",{...n,snapshot:o.arguments});break}default:r(n.type,n);break}},tE=function(){if(this.ended)throw new Xe("stream has ended, this shouldn't happen");const n=oe(this,za,"f");if(!n)throw new Xe("request ended without sending any events");nt(this,za,void 0);const s=Fz(n,oe(this,am,"f"));return nt(this,lm,s),s},nE=function(n){let s=oe(this,za,"f");if(!s){if(n.type!=="response.created")throw new Xe(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return s=nt(this,za,n.response),s}switch(n.type){case"response.output_item.added":{s.output.push(n.item);break}case"response.content_part.added":{const r=s.output[n.output_index];if(!r)throw new Xe(`missing output at index ${n.output_index}`);const a=r.type,o=n.part;a==="message"&&o.type!=="reasoning_text"?r.content.push(o):a==="reasoning"&&o.type==="reasoning_text"&&(r.content||(r.content=[]),r.content.push(o));break}case"response.output_text.delta":{const r=s.output[n.output_index];if(!r)throw new Xe(`missing output at index ${n.output_index}`);if(r.type==="message"){const a=r.content[n.content_index];if(!a)throw new Xe(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new Xe(`expected content to be 'output_text', got ${a.type}`);a.text+=n.delta}break}case"response.function_call_arguments.delta":{const r=s.output[n.output_index];if(!r)throw new Xe(`missing output at index ${n.output_index}`);r.type==="function_call"&&(r.arguments+=n.delta);break}case"response.reasoning_text.delta":{const r=s.output[n.output_index];if(!r)throw new Xe(`missing output at index ${n.output_index}`);if(r.type==="reasoning"){const a=r.content?.[n.content_index];if(!a)throw new Xe(`missing content at index ${n.content_index}`);if(a.type!=="reasoning_text")throw new Xe(`expected content to be 'reasoning_text', got ${a.type}`);a.text+=n.delta}break}case"response.completed":{nt(this,za,n.response);break}}return s},Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("event",r=>{const a=n.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{s=!0;for(const r of n)r.resolve(void 0);n.length=0}),this.on("abort",r=>{s=!0;for(const a of n)a.reject(r);n.length=0}),this.on("error",r=>{s=!0;for(const a of n)a.reject(r);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((a,o)=>n.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=oe(this,lm,"f");if(!e)throw new Xe("stream ended without producing a ChatCompletion");return e}}function Fz(t,e){return Pz(t,e)}class R6 extends We{list(e,n={},s){return this._client.getAPIList(xe`/responses/${e}/input_items`,An,{query:n,...s})}}class B6 extends We{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class kg extends We{constructor(){super(...arguments),this.inputItems=new R6(this._client),this.inputTokens=new B6(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&O_(s),s))}retrieve(e,n={},s){return this._client.get(xe`/responses/${e}`,{query:n,...s,stream:n?.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&O_(r),r))}delete(e,n){return this._client.delete(xe`/responses/${e}`,{...n,headers:Ve([{Accept:"*/*"},n?.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(s=>O6(s,e))}stream(e,n){return AS.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(xe`/responses/${e}/cancel`,n)}compact(e,n){return this._client.post("/responses/compact",{body:e,...n})}}kg.InputItems=R6;kg.InputTokens=B6;class M6 extends We{create(e,n,s){return this._client.post(xe`/uploads/${e}/parts`,Jl({body:n,...s},this._client))}}class jS extends We{constructor(){super(...arguments),this.parts=new M6(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(xe`/uploads/${e}/cancel`,n)}complete(e,n,s){return this._client.post(xe`/uploads/${e}/complete`,{body:n,...s})}}jS.Parts=M6;const qz=async t=>{const e=await Promise.allSettled(t),n=e.filter(r=>r.status==="rejected");if(n.length){for(const r of n)console.error(r.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const s=[];for(const r of e)r.status==="fulfilled"&&s.push(r.value);return s};class D6 extends We{create(e,n,s){return this._client.post(xe`/vector_stores/${e}/file_batches`,{body:n,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}retrieve(e,n,s){const{vector_store_id:r}=n;return this._client.get(xe`/vector_stores/${r}/file_batches/${e}`,{...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}cancel(e,n,s){const{vector_store_id:r}=n;return this._client.post(xe`/vector_stores/${r}/file_batches/${e}/cancel`,{...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async createAndPoll(e,n,s){const r=await this.create(e,n);return await this.poll(e,r.id,s)}listFiles(e,n,s){const{vector_store_id:r,...a}=n;return this._client.getAPIList(xe`/vector_stores/${r}/file_batches/${e}/files`,An,{query:a,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async poll(e,n,s){const r=Ve([s?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":s?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:o}=await this.retrieve(n,{vector_store_id:e},{...s,headers:r}).withResponse();switch(a.status){case"in_progress":let c=5e3;if(s?.pollIntervalMs)c=s.pollIntervalMs;else{const h=o.headers.get("openai-poll-after-ms");if(h){const d=parseInt(h);isNaN(d)||(c=d)}}await df(c);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:n,fileIds:s=[]},r){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=r?.maxConcurrency??5,o=Math.min(a,n.length),c=this._client,h=n.values(),d=[...s];async function g(v){for(let y of v){const x=await c.files.create({file:y,purpose:"assistants"},r);d.push(x.id)}}const m=Array(o).fill(h).map(g);return await qz(m),await this.createAndPoll(e,{file_ids:d})}}class L6 extends We{create(e,n,s){return this._client.post(xe`/vector_stores/${e}/files`,{body:n,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}retrieve(e,n,s){const{vector_store_id:r}=n;return this._client.get(xe`/vector_stores/${r}/files/${e}`,{...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}update(e,n,s){const{vector_store_id:r,...a}=n;return this._client.post(xe`/vector_stores/${r}/files/${e}`,{body:a,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n={},s){return this._client.getAPIList(xe`/vector_stores/${e}/files`,An,{query:n,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}delete(e,n,s){const{vector_store_id:r}=n;return this._client.delete(xe`/vector_stores/${r}/files/${e}`,{...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async createAndPoll(e,n,s){const r=await this.create(e,n,s);return await this.poll(e,r.id,s)}async poll(e,n,s){const r=Ve([s?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":s?.pollIntervalMs?.toString()??void 0}]);for(;;){const a=await this.retrieve(n,{vector_store_id:e},{...s,headers:r}).withResponse(),o=a.data;switch(o.status){case"in_progress":let c=5e3;if(s?.pollIntervalMs)c=s.pollIntervalMs;else{const h=a.response.headers.get("openai-poll-after-ms");if(h){const d=parseInt(h);isNaN(d)||(c=d)}}await df(c);break;case"failed":case"completed":return o}}}async upload(e,n,s){const r=await this._client.files.create({file:n,purpose:"assistants"},s);return this.create(e,{file_id:r.id},s)}async uploadAndPoll(e,n,s){const r=await this.upload(e,n,s);return await this.poll(e,r.id,s)}content(e,n,s){const{vector_store_id:r}=n;return this._client.getAPIList(xe`/vector_stores/${r}/files/${e}/content`,bg,{...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}class Cg extends We{constructor(){super(...arguments),this.files=new L6(this._client),this.fileBatches=new D6(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:Ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(xe`/vector_stores/${e}`,{...n,headers:Ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,s){return this._client.post(xe`/vector_stores/${e}`,{body:n,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",An,{query:e,...n,headers:Ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(xe`/vector_stores/${e}`,{...n,headers:Ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(e,n,s){return this._client.getAPIList(xe`/vector_stores/${e}/search`,bg,{body:n,method:"post",...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}Cg.Files=L6;Cg.FileBatches=D6;class I6 extends We{create(e,n){return this._client.post("/videos",H5({body:e,...n},this._client))}retrieve(e,n){return this._client.get(xe`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",c0,{query:e,...n})}delete(e,n){return this._client.delete(xe`/videos/${e}`,n)}downloadContent(e,n={},s){return this._client.get(xe`/videos/${e}/content`,{query:n,...s,headers:Ve([{Accept:"application/binary"},s?.headers]),__binaryResponse:!0})}remix(e,n,s){return this._client.post(xe`/videos/${e}/remix`,H5({body:n,...s},this._client))}}var xc,P6,$m;class z6 extends We{constructor(){super(...arguments),xc.add(this)}async unwrap(e,n,s=this._client.webhookSecret,r=300){return await this.verifySignature(e,n,s,r),JSON.parse(e)}async verifySignature(e,n,s=this._client.webhookSecret,r=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");oe(this,xc,"m",P6).call(this,s);const a=Ve([n]).values,o=oe(this,xc,"m",$m).call(this,a,"webhook-signature"),c=oe(this,xc,"m",$m).call(this,a,"webhook-timestamp"),h=oe(this,xc,"m",$m).call(this,a,"webhook-id"),d=parseInt(c,10);if(isNaN(d))throw new zh("Invalid webhook timestamp format");const g=Math.floor(Date.now()/1e3);if(g-d>r)throw new zh("Webhook timestamp is too old");if(d>g+r)throw new zh("Webhook timestamp is too new");const m=o.split(" ").map(w=>w.startsWith("v1,")?w.substring(3):w),v=s.startsWith("whsec_")?Buffer.from(s.replace("whsec_",""),"base64"):Buffer.from(s,"utf-8"),y=h?`${h}.${c}.${e}`:`${c}.${e}`,x=await crypto.subtle.importKey("raw",v,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const w of m)try{const S=Buffer.from(w,"base64");if(await crypto.subtle.verify("HMAC",x,S,new TextEncoder().encode(y)))return}catch{continue}throw new zh("The given webhook signature does not match the expected signature")}}xc=new WeakSet,P6=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},$m=function(e,n){if(!e)throw new Error("Headers are required");const s=e.get(n);if(s==null)throw new Error(`Missing required header: ${n}`);return s};var R_,TS,Hm,$6;class gt{constructor({baseURL:e=cc("OPENAI_BASE_URL"),apiKey:n=cc("OPENAI_API_KEY"),organization:s=cc("OPENAI_ORG_ID")??null,project:r=cc("OPENAI_PROJECT_ID")??null,webhookSecret:a=cc("OPENAI_WEBHOOK_SECRET")??null,...o}={}){if(R_.add(this),Hm.set(this,void 0),this.completions=new m6(this),this.chat=new yS(this),this.embeddings=new v6(this),this.files=new _6(this),this.images=new N6(this),this.audio=new pf(this),this.moderations=new A6(this),this.models=new E6(this),this.fineTuning=new uu(this),this.graders=new ES(this),this.vectorStores=new Cg(this),this.webhooks=new z6(this),this.beta=new cu(this),this.batches=new l6(this),this.uploads=new jS(this),this.responses=new kg(this),this.realtime=new Sg(this),this.conversations=new xS(this),this.evals=new SS(this),this.containers=new _S(this),this.videos=new I6(this),n===void 0)throw new Xe("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const c={apiKey:n,organization:s,project:r,webhookSecret:a,...o,baseURL:e||"https://api.openai.com/v1"};if(!c.dangerouslyAllowBrowser&&KP())throw new Xe(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=c.baseURL,this.timeout=c.timeout??TS.DEFAULT_TIMEOUT,this.logger=c.logger??console;const h="warn";this.logLevel=h,this.logLevel=z5(c.logLevel,"ClientOptions.logLevel",this)??z5(cc("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??h,this.fetchOptions=c.fetchOptions,this.maxRetries=c.maxRetries??2,this.fetch=c.fetch??JP(),nt(this,Hm,ZP),this._options=c,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=s,this.project=r,this.webhookSecret=a}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return Ve([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return iz(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${bc}`}defaultIdempotencyKey(){return`stainless-node-retry-${cT()}`}makeStatusError(e,n,s,r){return rs.generate(e,n,s,r)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(s){throw s instanceof Xe?s:new Xe(`Failed to get token from 'apiKey' function: ${s.message}`,{cause:s})}if(typeof n!="string"||!n)throw new Xe(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,s){const r=!oe(this,R_,"m",$6).call(this)&&s||this.baseURL,a=HP(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return UP(o)||(n={...o,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:s}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,s){return this.request(Promise.resolve(s).then(r=>({method:e,path:n,...r})))}request(e,n=null){return new vg(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,s){const r=await e,a=r.maxRetries??this.maxRetries;n==null&&(n=a),await this.prepareOptions(r);const{req:o,url:c,timeout:h}=await this.buildRequest(r,{retryCount:a-n});await this.prepareRequest(o,{url:c,options:r});const d="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=s===void 0?"":`, retryOf: ${s}`,m=Date.now();if(Zn(this).debug(`[${d}] sending request`,Ol({retryOfRequestLogID:s,method:r.method,url:c,options:r,headers:o.headers})),r.signal?.aborted)throw new Tr;const v=new AbortController,y=await this.fetchWithTimeout(c,o,h,v).catch(__),x=Date.now();if(y instanceof globalThis.Error){const k=`retrying, ${n} attempts remaining`;if(r.signal?.aborted)throw new Tr;const C=b_(y)||/timed? ?out/i.test(String(y)+("cause"in y?String(y.cause):""));if(n)return Zn(this).info(`[${d}] connection ${C?"timed out":"failed"} - ${k}`),Zn(this).debug(`[${d}] connection ${C?"timed out":"failed"} (${k})`,Ol({retryOfRequestLogID:s,url:c,durationMs:x-m,message:y.message})),this.retryRequest(r,n,s??d);throw Zn(this).info(`[${d}] connection ${C?"timed out":"failed"} - error; no more retries left`),Zn(this).debug(`[${d}] connection ${C?"timed out":"failed"} (error; no more retries left)`,Ol({retryOfRequestLogID:s,url:c,durationMs:x-m,message:y.message})),C?new oS:new gg({cause:y})}const w=[...y.headers.entries()].filter(([k])=>k==="x-request-id").map(([k,C])=>", "+k+": "+JSON.stringify(C)).join(""),S=`[${d}${g}${w}] ${o.method} ${c} ${y.ok?"succeeded":"failed"} with status ${y.status} in ${x-m}ms`;if(!y.ok){const k=await this.shouldRetry(y);if(n&&k){const H=`retrying, ${n} attempts remaining`;return await QP(y.body),Zn(this).info(`${S} - ${H}`),Zn(this).debug(`[${d}] response error (${H})`,Ol({retryOfRequestLogID:s,url:y.url,status:y.status,headers:y.headers,durationMs:x-m})),this.retryRequest(r,n,s??d,y.headers)}const C=k?"error; no more retries left":"error; not retryable";Zn(this).info(`${S} - ${C}`);const A=await y.text().catch(H=>__(H).message),B=qP(A),M=B?void 0:A;throw Zn(this).debug(`[${d}] response error (${C})`,Ol({retryOfRequestLogID:s,url:y.url,status:y.status,headers:y.headers,message:M,durationMs:Date.now()-m})),this.makeStatusError(y.status,B,M,y.headers)}return Zn(this).info(S),Zn(this).debug(`[${d}] response start`,Ol({retryOfRequestLogID:s,url:y.url,status:y.status,headers:y.headers,durationMs:x-m})),{response:y,options:r,controller:v,requestLogID:d,retryOfRequestLogID:s,startTime:m}}getAPIList(e,n,s){return this.requestAPIList(n,{method:"get",path:e,...s})}requestAPIList(e,n){const s=this.makeRequest(n,null,void 0);return new pz(this,s,e)}async fetchWithTimeout(e,n,s,r){const{signal:a,method:o,...c}=n||{};a&&a.addEventListener("abort",()=>r.abort());const h=setTimeout(()=>r.abort(),s),d=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,g={signal:r.signal,...d?{duplex:"half"}:{},method:"GET",...c};o&&(g.method=o.toUpperCase());try{return await this.fetch.call(void 0,e,g)}finally{clearTimeout(h)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,s,r){let a;const o=r?.get("retry-after-ms");if(o){const h=parseFloat(o);Number.isNaN(h)||(a=h)}const c=r?.get("retry-after");if(c&&!a){const h=parseFloat(c);Number.isNaN(h)?a=Date.parse(c)-Date.now():a=h*1e3}if(!(a&&0<=a&&a<60*1e3)){const h=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,h)}return await df(a),this.makeRequest(e,n-1,s)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,o=Math.min(.5*Math.pow(2,a),8),c=1-Math.random()*.25;return o*c*1e3}async buildRequest(e,{retryCount:n=0}={}){const s={...e},{method:r,path:a,query:o,defaultBaseURL:c}=s,h=this.buildURL(a,o,c);"timeout"in s&&FP("timeout",s.timeout),s.timeout=s.timeout??this.timeout;const{bodyHeaders:d,body:g}=this.buildBody({options:s}),m=await this.buildHeaders({options:e,method:r,bodyHeaders:d,retryCount:n});return{req:{method:r,headers:m,...s.signal&&{signal:s.signal},...globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"},...g&&{body:g},...this.fetchOptions??{},...s.fetchOptions??{}},url:h,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:s,retryCount:r}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const o=Ve([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...XP(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,s,e.headers]);return this.validateHeaders(o),o.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Ve([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:wT(e)}:oe(this,Hm,"f").call(this,{body:e,headers:s})}}TS=gt,Hm=new WeakMap,R_=new WeakSet,$6=function(){return this.baseURL!=="https://api.openai.com/v1"};gt.OpenAI=TS;gt.DEFAULT_TIMEOUT=6e5;gt.OpenAIError=Xe;gt.APIError=rs;gt.APIConnectionError=gg;gt.APIConnectionTimeoutError=oS;gt.APIUserAbortError=Tr;gt.NotFoundError=fT;gt.ConflictError=pT;gt.RateLimitError=gT;gt.BadRequestError=uT;gt.AuthenticationError=hT;gt.InternalServerError=yT;gt.PermissionDeniedError=dT;gt.UnprocessableEntityError=mT;gt.InvalidWebhookSignatureError=zh;gt.toFile=bz;gt.Completions=m6;gt.Chat=yS;gt.Embeddings=v6;gt.Files=_6;gt.Images=N6;gt.Audio=pf;gt.Moderations=A6;gt.Models=E6;gt.FineTuning=uu;gt.Graders=ES;gt.VectorStores=Cg;gt.Webhooks=z6;gt.Beta=cu;gt.Batches=l6;gt.Uploads=jS;gt.Responses=kg;gt.Realtime=Sg;gt.Conversations=xS;gt.Evals=SS;gt.Containers=_S;gt.Videos=I6;const Kz=new gt({baseURL:`${window.location.origin}/openai/v1`,apiKey:"not-needed",dangerouslyAllowBrowser:!0}),Wa={User:"user",Assistant:"assistant",Tool:"tool"};function Wz(t){return t.map(e=>({type:"function",name:e.name,description:e.description,parameters:e.parameters,strict:!1}))}async function Gz(t,e,n,s,r){const a=[];for(const g of n)switch(g.role){case Wa.User:{a.push({type:"message",role:"user",content:[{type:"input_text",text:g.content}]});break}case Wa.Tool:{if(g.toolResult){const m=typeof g.toolResult.data=="string"?g.toolResult.data:JSON.stringify(g.toolResult.data);a.push({type:"function_call_output",call_id:g.toolResult.id,output:m})}break}case Wa.Assistant:{if(g.toolCalls&&g.toolCalls.length>0)for(const m of g.toolCalls)a.push({type:"function_call",call_id:m.id,name:m.name,arguments:m.arguments});else a.push({type:"message",role:"assistant",content:g.content});break}}const o=Kz.responses.stream({model:t,tools:Wz(s),input:a,instructions:e});if(r){let g="";o.on("response.output_text.delta",m=>{const v=m.delta;g+=v,r(v,g)})}const c=await o.finalResponse();if(!c.output)return{role:Wa.Assistant,content:""};let h="";const d=[];for(const g of c.output)if(g.type==="message"){if(g.content)for(const m of g.content)m.type==="output_text"&&(h=m.text)}else g.type==="function_call"&&g.call_id&&d.push({id:g.call_id,name:g.name,arguments:g.arguments});return{role:Wa.Assistant,content:h,toolCalls:d.length>0?d:void 0}}const Yz=[{name:"list_resources",description:"List Kubernetes resources of a specific type in a namespace or cluster-wide",parameters:{type:"object",properties:{resource:{type:"string",description:"The type of resource to list (e.g., pods, deployments, services, configmaps, secrets, ingresses, gateways, httproutes, grpcroutes, tcproutes, udproutes, tlsroutes, jobs, cronjobs, daemonsets, statefulsets, replicasets, nodes, namespaces, persistentvolumes, persistentvolumeclaims, events)"},namespace:{type:"string",description:'The namespace to list resources from. Use "all" for all namespaces, or omit for cluster-scoped resources'}},required:["resource"]}},{name:"get_resource",description:"Get detailed information about a specific Kubernetes resource",parameters:{type:"object",properties:{resource:{type:"string",description:"The type of resource (e.g., pod, deployment, service)"},name:{type:"string",description:"The name of the resource"},namespace:{type:"string",description:"The namespace of the resource (required for namespaced resources)"}},required:["resource","name"]}},{name:"get_pod_logs",description:"Get logs from a specific pod",parameters:{type:"object",properties:{name:{type:"string",description:"The name of the pod"},namespace:{type:"string",description:"The namespace of the pod"},container:{type:"string",description:"The container name (optional, defaults to first container)"},tailLines:{type:"string",description:"Number of lines to return from the end of the logs (default: 100)"}},required:["name","namespace"]}},{name:"describe_resource",description:"Get events and status conditions for a Kubernetes resource",parameters:{type:"object",properties:{resource:{type:"string",description:"The type of resource (e.g., pod, deployment, service)"},name:{type:"string",description:"The name of the resource"},namespace:{type:"string",description:"The namespace of the resource"}},required:["resource","name","namespace"]}}];async function hb(t,e){const n=e.toLowerCase(),s=await ou(t,n);return s?{config:s,plural:s.name}:null}async function Xz(t,e,n){switch(e){case"list_resources":{const s=await hb(t,n.resource);if(!s)return{error:`Unknown resource type: ${n.resource}`};const{config:r,plural:a}=s,o=ql(r);let c;r.namespaced&&n.namespace&&n.namespace!=="all"?c=`${o}/namespaces/${n.namespace}/${a}`:c=`${o}/${a}`;const h=await fetch(`/contexts/${t}${c}`);if(!h.ok)return{error:`Failed to list ${a}: ${h.status} ${h.statusText}`};const d=await h.json();return{kind:d.kind,items:d.items?.map(g=>({name:g.metadata?.name,namespace:g.metadata?.namespace,createdAt:g.metadata?.creationTimestamp,status:g.status}))||[]}}case"get_resource":{const s=await hb(t,n.resource);if(!s)return{error:`Unknown resource type: ${n.resource}`};const{config:r,plural:a}=s,o=ql(r);let c;r.namespaced&&n.namespace?c=`${o}/namespaces/${n.namespace}/${a}/${n.name}`:c=`${o}/${a}/${n.name}`;const h=await fetch(`/contexts/${t}${c}`);return h.ok?h.json():{error:`Failed to get ${n.resource} ${n.name}: ${h.status} ${h.statusText}`}}case"get_pod_logs":{const s=n.tailLines||"100";let r=`/api/v1/namespaces/${n.namespace}/pods/${n.name}/log?tailLines=${s}`;n.container&&(r+=`&container=${n.container}`);const a=await fetch(`/contexts/${t}${r}`);return a.ok?{logs:await a.text()||"(no logs available)"}:{error:`Failed to get logs: ${a.status} ${a.statusText}`}}case"describe_resource":{const s=await hb(t,n.resource);if(!s)return{error:`Unknown resource type: ${n.resource}`};const{config:r,plural:a}=s,o=ql(r);let c;r.namespaced&&n.namespace?c=`${o}/namespaces/${n.namespace}/${a}/${n.name}`:c=`${o}/${a}/${n.name}`;const h=await fetch(`/contexts/${t}${c}`);if(!h.ok)return{error:`Failed to get ${n.resource} ${n.name}: ${h.status}`};const d=await h.json(),g=`/api/v1/namespaces/${n.namespace}/events?fieldSelector=involvedObject.name=${n.name}`,m=await fetch(`/contexts/${t}${g}`);let v=[];return m.ok&&(v=(await m.json()).items?.map(x=>({type:x.type,reason:x.reason,message:x.message,lastTimestamp:x.lastTimestamp}))||[]),{metadata:d.metadata,spec:d.spec,status:d.status,events:v}}default:return{error:`Unknown tool: ${e}`}}}async function Jz(t,e){const n=JSON.parse(e.arguments),s=await Xz(t,e.name,n);return{id:e.id,data:s}}async function Qz(t,e,n){const s=n?.model||"",r=n.environment.currentContext;let a="";if(n?.environment){const m=n.environment,v=[];m.currentNamespace&&v.push(`- Current namespace: ${m.currentNamespace}`),m.selectedResourceKind&&v.push(`- Currently viewing resource type: ${m.selectedResourceKind}`),m.selectedResourceName&&v.push(`- Currently selected resource: ${m.selectedResourceName}`),v.length>0&&(a=`

The user is currently viewing:
${v.join(`
`)}

Use this context to provide more relevant answers. When the user asks about resources without specifying a namespace, use the current namespace.`)}const o=n?.instructions||`You are a helpful Kubernetes assistant. You can help users understand and manage their Kubernetes clusters.
When users ask about resources, use the available tools to fetch real data from the cluster.
Provide clear, concise explanations and highlight any issues or warnings you find.
Format your responses using markdown for better readability.${a}`;let h=[...e,{role:Wa.User,content:t}],d=0;const g=10;for(;d<g;){d++;const m=await Gz(s,o,h,Yz,n?.onStream);if(!m.toolCalls||m.toolCalls.length===0)return{response:m,history:[...h,m]};h=[...h,m];for(const v of m.toolCalls){const y=JSON.parse(v.arguments);n?.onToolCall?.(v.name,y);const x=await Jz(r,v);h.push({role:Wa.Tool,content:"",toolResult:x})}}return{response:{role:Wa.Assistant,content:"I apologize, but I encountered an issue processing your request. Please try again."},history:h}}function Zz(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const e$=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,t$=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,n$={};function sE(t,e){return(n$.jsx?t$:e$).test(t)}const s$=/[ \t\n\f\r]/g;function r$(t){return typeof t=="object"?t.type==="text"?rE(t.value):!1:rE(t)}function rE(t){return t.replace(s$,"")===""}let mf=class{constructor(e,n,s){this.normal=n,this.property=e,s&&(this.space=s)}};mf.prototype.normal={};mf.prototype.property={};mf.prototype.space=void 0;function H6(t,e){const n={},s={};for(const r of t)Object.assign(n,r.property),Object.assign(s,r.normal);return new mf(n,s,e)}function B_(t){return t.toLowerCase()}class Fs{constructor(e,n){this.attribute=n,this.property=e}}Fs.prototype.attribute="";Fs.prototype.booleanish=!1;Fs.prototype.boolean=!1;Fs.prototype.commaOrSpaceSeparated=!1;Fs.prototype.commaSeparated=!1;Fs.prototype.defined=!1;Fs.prototype.mustUseProperty=!1;Fs.prototype.number=!1;Fs.prototype.overloadedBoolean=!1;Fs.prototype.property="";Fs.prototype.spaceSeparated=!1;Fs.prototype.space=void 0;let i$=0;const pt=yo(),kn=yo(),M_=yo(),Ne=yo(),Wt=yo(),Mc=yo(),rr=yo();function yo(){return 2**++i$}const D_=Object.freeze(Object.defineProperty({__proto__:null,boolean:pt,booleanish:kn,commaOrSpaceSeparated:rr,commaSeparated:Mc,number:Ne,overloadedBoolean:M_,spaceSeparated:Wt},Symbol.toStringTag,{value:"Module"})),db=Object.keys(D_);class OS extends Fs{constructor(e,n,s,r){let a=-1;if(super(e,n),iE(this,"space",r),typeof s=="number")for(;++a<db.length;){const o=db[a];iE(this,db[a],(s&D_[o])===D_[o])}}}OS.prototype.defined=!0;function iE(t,e,n){n&&(t[e]=n)}function hu(t){const e={},n={};for(const[s,r]of Object.entries(t.properties)){const a=new OS(s,t.transform(t.attributes||{},s),r,t.space);t.mustUseProperty&&t.mustUseProperty.includes(s)&&(a.mustUseProperty=!0),e[s]=a,n[B_(s)]=s,n[B_(a.attribute)]=s}return new mf(e,n,t.space)}const U6=hu({properties:{ariaActiveDescendant:null,ariaAtomic:kn,ariaAutoComplete:null,ariaBusy:kn,ariaChecked:kn,ariaColCount:Ne,ariaColIndex:Ne,ariaColSpan:Ne,ariaControls:Wt,ariaCurrent:null,ariaDescribedBy:Wt,ariaDetails:null,ariaDisabled:kn,ariaDropEffect:Wt,ariaErrorMessage:null,ariaExpanded:kn,ariaFlowTo:Wt,ariaGrabbed:kn,ariaHasPopup:null,ariaHidden:kn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Wt,ariaLevel:Ne,ariaLive:null,ariaModal:kn,ariaMultiLine:kn,ariaMultiSelectable:kn,ariaOrientation:null,ariaOwns:Wt,ariaPlaceholder:null,ariaPosInSet:Ne,ariaPressed:kn,ariaReadOnly:kn,ariaRelevant:null,ariaRequired:kn,ariaRoleDescription:Wt,ariaRowCount:Ne,ariaRowIndex:Ne,ariaRowSpan:Ne,ariaSelected:kn,ariaSetSize:Ne,ariaSort:null,ariaValueMax:Ne,ariaValueMin:Ne,ariaValueNow:Ne,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function V6(t,e){return e in t?t[e]:e}function F6(t,e){return V6(t,e.toLowerCase())}const a$=hu({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Mc,acceptCharset:Wt,accessKey:Wt,action:null,allow:null,allowFullScreen:pt,allowPaymentRequest:pt,allowUserMedia:pt,alt:null,as:null,async:pt,autoCapitalize:null,autoComplete:Wt,autoFocus:pt,autoPlay:pt,blocking:Wt,capture:null,charSet:null,checked:pt,cite:null,className:Wt,cols:Ne,colSpan:null,content:null,contentEditable:kn,controls:pt,controlsList:Wt,coords:Ne|Mc,crossOrigin:null,data:null,dateTime:null,decoding:null,default:pt,defer:pt,dir:null,dirName:null,disabled:pt,download:M_,draggable:kn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:pt,formTarget:null,headers:Wt,height:Ne,hidden:M_,high:Ne,href:null,hrefLang:null,htmlFor:Wt,httpEquiv:Wt,id:null,imageSizes:null,imageSrcSet:null,inert:pt,inputMode:null,integrity:null,is:null,isMap:pt,itemId:null,itemProp:Wt,itemRef:Wt,itemScope:pt,itemType:Wt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:pt,low:Ne,manifest:null,max:null,maxLength:Ne,media:null,method:null,min:null,minLength:Ne,multiple:pt,muted:pt,name:null,nonce:null,noModule:pt,noValidate:pt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:pt,optimum:Ne,pattern:null,ping:Wt,placeholder:null,playsInline:pt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:pt,referrerPolicy:null,rel:Wt,required:pt,reversed:pt,rows:Ne,rowSpan:Ne,sandbox:Wt,scope:null,scoped:pt,seamless:pt,selected:pt,shadowRootClonable:pt,shadowRootDelegatesFocus:pt,shadowRootMode:null,shape:null,size:Ne,sizes:null,slot:null,span:Ne,spellCheck:kn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ne,step:null,style:null,tabIndex:Ne,target:null,title:null,translate:null,type:null,typeMustMatch:pt,useMap:null,value:kn,width:Ne,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Wt,axis:null,background:null,bgColor:null,border:Ne,borderColor:null,bottomMargin:Ne,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:pt,declare:pt,event:null,face:null,frame:null,frameBorder:null,hSpace:Ne,leftMargin:Ne,link:null,longDesc:null,lowSrc:null,marginHeight:Ne,marginWidth:Ne,noResize:pt,noHref:pt,noShade:pt,noWrap:pt,object:null,profile:null,prompt:null,rev:null,rightMargin:Ne,rules:null,scheme:null,scrolling:kn,standby:null,summary:null,text:null,topMargin:Ne,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ne,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:pt,disableRemotePlayback:pt,prefix:null,property:null,results:Ne,security:null,unselectable:null},space:"html",transform:F6}),l$=hu({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:rr,accentHeight:Ne,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ne,amplitude:Ne,arabicForm:null,ascent:Ne,attributeName:null,attributeType:null,azimuth:Ne,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ne,by:null,calcMode:null,capHeight:Ne,className:Wt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ne,diffuseConstant:Ne,direction:null,display:null,dur:null,divisor:Ne,dominantBaseline:null,download:pt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ne,enableBackground:null,end:null,event:null,exponent:Ne,externalResourcesRequired:null,fill:null,fillOpacity:Ne,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Mc,g2:Mc,glyphName:Mc,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ne,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ne,horizOriginX:Ne,horizOriginY:Ne,id:null,ideographic:Ne,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ne,k:Ne,k1:Ne,k2:Ne,k3:Ne,k4:Ne,kernelMatrix:rr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ne,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ne,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ne,overlineThickness:Ne,paintOrder:null,panose1:null,path:null,pathLength:Ne,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Wt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ne,pointsAtY:Ne,pointsAtZ:Ne,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:rr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:rr,rev:rr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:rr,requiredFeatures:rr,requiredFonts:rr,requiredFormats:rr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ne,specularExponent:Ne,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ne,strikethroughThickness:Ne,string:null,stroke:null,strokeDashArray:rr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ne,strokeOpacity:Ne,strokeWidth:null,style:null,surfaceScale:Ne,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:rr,tabIndex:Ne,tableValues:null,target:null,targetX:Ne,targetY:Ne,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:rr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ne,underlineThickness:Ne,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ne,values:null,vAlphabetic:Ne,vMathematical:Ne,vectorEffect:null,vHanging:Ne,vIdeographic:Ne,version:null,vertAdvY:Ne,vertOriginX:Ne,vertOriginY:Ne,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ne,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:V6}),q6=hu({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),K6=hu({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:F6}),W6=hu({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),o$={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},c$=/[A-Z]/g,aE=/-[a-z]/g,u$=/^data[-\w.:]+$/i;function h$(t,e){const n=B_(e);let s=e,r=Fs;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&u$.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(aE,f$);s="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!aE.test(a)){let o=a.replace(c$,d$);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}r=OS}return new r(s,e)}function d$(t){return"-"+t.toLowerCase()}function f$(t){return t.charAt(1).toUpperCase()}const p$=H6([U6,a$,q6,K6,W6],"html"),RS=H6([U6,l$,q6,K6,W6],"svg");function m$(t){return t.join(" ").trim()}var hc={},fb,lE;function g$(){if(lE)return fb;lE=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,s=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,c=/^\s+|\s+$/g,h=`
`,d="/",g="*",m="",v="comment",y="declaration";function x(S,k){if(typeof S!="string")throw new TypeError("First argument must be a string");if(!S)return[];k=k||{};var C=1,A=1;function B(J){var q=J.match(e);q&&(C+=q.length);var P=J.lastIndexOf(h);A=~P?J.length-P:A+J.length}function M(){var J={line:C,column:A};return function(q){return q.position=new T(J),G(),q}}function T(J){this.start=J,this.end={line:C,column:A},this.source=k.source}T.prototype.content=S;function H(J){var q=new Error(k.source+":"+C+":"+A+": "+J);if(q.reason=J,q.filename=k.source,q.line=C,q.column=A,q.source=S,!k.silent)throw q}function $(J){var q=J.exec(S);if(q){var P=q[0];return B(P),S=S.slice(P.length),q}}function G(){$(n)}function z(J){var q;for(J=J||[];q=Q();)q!==!1&&J.push(q);return J}function Q(){var J=M();if(!(d!=S.charAt(0)||g!=S.charAt(1))){for(var q=2;m!=S.charAt(q)&&(g!=S.charAt(q)||d!=S.charAt(q+1));)++q;if(q+=2,m===S.charAt(q-1))return H("End of comment missing");var P=S.slice(2,q-2);return A+=2,B(P),S=S.slice(q),A+=2,J({type:v,comment:P})}}function F(){var J=M(),q=$(s);if(q){if(Q(),!$(r))return H("property missing ':'");var P=$(a),X=J({type:y,property:w(q[0].replace(t,m)),value:P?w(P[0].replace(t,m)):m});return $(o),X}}function K(){var J=[];z(J);for(var q;q=F();)q!==!1&&(J.push(q),z(J));return J}return G(),K()}function w(S){return S?S.replace(c,m):m}return fb=x,fb}var oE;function y$(){if(oE)return hc;oE=1;var t=hc&&hc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(hc,"__esModule",{value:!0}),hc.default=n;const e=t(g$());function n(s,r){let a=null;if(!s||typeof s!="string")return a;const o=(0,e.default)(s),c=typeof r=="function";return o.forEach(h=>{if(h.type!=="declaration")return;const{property:d,value:g}=h;c?r(d,g,h):g&&(a=a||{},a[d]=g)}),a}return hc}var Sh={},cE;function v$(){if(cE)return Sh;cE=1,Object.defineProperty(Sh,"__esModule",{value:!0}),Sh.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,s=/^-(webkit|moz|ms|o|khtml)-/,r=/^-(ms)-/,a=function(d){return!d||n.test(d)||t.test(d)},o=function(d,g){return g.toUpperCase()},c=function(d,g){return"".concat(g,"-")},h=function(d,g){return g===void 0&&(g={}),a(d)?d:(d=d.toLowerCase(),g.reactCompat?d=d.replace(r,c):d=d.replace(s,c),d.replace(e,o))};return Sh.camelCase=h,Sh}var kh,uE;function b$(){if(uE)return kh;uE=1;var t=kh&&kh.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},e=t(y$()),n=v$();function s(r,a){var o={};return!r||typeof r!="string"||(0,e.default)(r,function(c,h){c&&h&&(o[(0,n.camelCase)(c,a)]=h)}),o}return s.default=s,kh=s,kh}var _$=b$();const x$=eS(_$),G6=Y6("end"),BS=Y6("start");function Y6(t){return e;function e(n){const s=n&&n.position&&n.position[t]||{};if(typeof s.line=="number"&&s.line>0&&typeof s.column=="number"&&s.column>0)return{line:s.line,column:s.column,offset:typeof s.offset=="number"&&s.offset>-1?s.offset:void 0}}}function w$(t){const e=BS(t),n=G6(t);if(e&&n)return{start:e,end:n}}function kd(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?hE(t.position):"start"in t||"end"in t?hE(t):"line"in t||"column"in t?L_(t):""}function L_(t){return dE(t&&t.line)+":"+dE(t&&t.column)}function hE(t){return L_(t&&t.start)+"-"+L_(t&&t.end)}function dE(t){return t&&typeof t=="number"?t:1}class ps extends Error{constructor(e,n,s){super(),typeof n=="string"&&(s=n,n=void 0);let r="",a={},o=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof e=="string"?r=e:!a.cause&&e&&(o=!0,r=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof s=="string"){const h=s.indexOf(":");h===-1?a.ruleId=s:(a.source=s.slice(0,h),a.ruleId=s.slice(h+1))}if(!a.place&&a.ancestors&&a.ancestors){const h=a.ancestors[a.ancestors.length-1];h&&(a.place=h.position)}const c=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=c?c.line:void 0,this.name=kd(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=o&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}ps.prototype.file="";ps.prototype.name="";ps.prototype.reason="";ps.prototype.message="";ps.prototype.stack="";ps.prototype.column=void 0;ps.prototype.line=void 0;ps.prototype.ancestors=void 0;ps.prototype.cause=void 0;ps.prototype.fatal=void 0;ps.prototype.place=void 0;ps.prototype.ruleId=void 0;ps.prototype.source=void 0;const MS={}.hasOwnProperty,S$=new Map,k$=/[A-Z]/g,C$=new Set(["table","tbody","thead","tfoot","tr"]),N$=new Set(["td","th"]),X6="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function E$(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let s;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");s=D$(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");s=M$(n,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:s,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?RS:p$,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},a=J6(r,t,void 0);return a&&typeof a!="string"?a:r.create(t,r.Fragment,{children:a||void 0},void 0)}function J6(t,e,n){if(e.type==="element")return A$(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return j$(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return O$(t,e,n);if(e.type==="mdxjsEsm")return T$(t,e);if(e.type==="root")return R$(t,e,n);if(e.type==="text")return B$(t,e)}function A$(t,e,n){const s=t.schema;let r=s;e.tagName.toLowerCase()==="svg"&&s.space==="html"&&(r=RS,t.schema=r),t.ancestors.push(e);const a=Z6(t,e.tagName,!1),o=L$(t,e);let c=LS(t,e);return C$.has(e.tagName)&&(c=c.filter(function(h){return typeof h=="string"?!r$(h):!0})),Q6(t,o,a,e),DS(o,c),t.ancestors.pop(),t.schema=s,t.create(e,a,o,n)}function j$(t,e){if(e.data&&e.data.estree&&t.evaluater){const s=e.data.estree.body[0];return s.type,t.evaluater.evaluateExpression(s.expression)}Vd(t,e.position)}function T$(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Vd(t,e.position)}function O$(t,e,n){const s=t.schema;let r=s;e.name==="svg"&&s.space==="html"&&(r=RS,t.schema=r),t.ancestors.push(e);const a=e.name===null?t.Fragment:Z6(t,e.name,!0),o=I$(t,e),c=LS(t,e);return Q6(t,o,a,e),DS(o,c),t.ancestors.pop(),t.schema=s,t.create(e,a,o,n)}function R$(t,e,n){const s={};return DS(s,LS(t,e)),t.create(e,t.Fragment,s,n)}function B$(t,e){return e.value}function Q6(t,e,n,s){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=s)}function DS(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function M$(t,e,n){return s;function s(r,a,o,c){const d=Array.isArray(o.children)?n:e;return c?d(a,o,c):d(a,o)}}function D$(t,e){return n;function n(s,r,a,o){const c=Array.isArray(a.children),h=BS(s);return e(r,a,o,c,{columnNumber:h?h.column-1:void 0,fileName:t,lineNumber:h?h.line:void 0},void 0)}}function L$(t,e){const n={};let s,r;for(r in e.properties)if(r!=="children"&&MS.call(e.properties,r)){const a=P$(t,r,e.properties[r]);if(a){const[o,c]=a;t.tableCellAlignToStyle&&o==="align"&&typeof c=="string"&&N$.has(e.tagName)?s=c:n[o]=c}}if(s){const a=n.style||(n.style={});a[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=s}return n}function I$(t,e){const n={};for(const s of e.attributes)if(s.type==="mdxJsxExpressionAttribute")if(s.data&&s.data.estree&&t.evaluater){const a=s.data.estree.body[0];a.type;const o=a.expression;o.type;const c=o.properties[0];c.type,Object.assign(n,t.evaluater.evaluateExpression(c.argument))}else Vd(t,e.position);else{const r=s.name;let a;if(s.value&&typeof s.value=="object")if(s.value.data&&s.value.data.estree&&t.evaluater){const c=s.value.data.estree.body[0];c.type,a=t.evaluater.evaluateExpression(c.expression)}else Vd(t,e.position);else a=s.value===null?!0:s.value;n[r]=a}return n}function LS(t,e){const n=[];let s=-1;const r=t.passKeys?new Map:S$;for(;++s<e.children.length;){const a=e.children[s];let o;if(t.passKeys){const h=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(h){const d=r.get(h)||0;o=h+"-"+d,r.set(h,d+1)}}const c=J6(t,a,o);c!==void 0&&n.push(c)}return n}function P$(t,e,n){const s=h$(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=s.commaSeparated?Zz(n):m$(n)),s.property==="style"){let r=typeof n=="object"?n:z$(t,String(n));return t.stylePropertyNameCase==="css"&&(r=$$(r)),["style",r]}return[t.elementAttributeNameCase==="react"&&s.space?o$[s.property]||s.property:s.attribute,n]}}function z$(t,e){try{return x$(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const s=n,r=new ps("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=t.filePath||void 0,r.url=X6+"#cannot-parse-style-attribute",r}}function Z6(t,e,n){let s;if(!n)s={type:"Literal",value:e};else if(e.includes(".")){const r=e.split(".");let a=-1,o;for(;++a<r.length;){const c=sE(r[a])?{type:"Identifier",name:r[a]}:{type:"Literal",value:r[a]};o=o?{type:"MemberExpression",object:o,property:c,computed:!!(a&&c.type==="Literal"),optional:!1}:c}s=o}else s=sE(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(s.type==="Literal"){const r=s.value;return MS.call(t.components,r)?t.components[r]:r}if(t.evaluater)return t.evaluater.evaluateExpression(s);Vd(t)}function Vd(t,e){const n=new ps("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=X6+"#cannot-handle-mdx-estrees-without-createevaluater",n}function $$(t){const e={};let n;for(n in t)MS.call(t,n)&&(e[H$(n)]=t[n]);return e}function H$(t){let e=t.replace(k$,U$);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function U$(t){return"-"+t.toLowerCase()}const pb={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},V$={};function IS(t,e){const n=V$,s=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,r=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return eO(t,s,r)}function eO(t,e,n){if(F$(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return fE(t.children,e,n)}return Array.isArray(t)?fE(t,e,n):""}function fE(t,e,n){const s=[];let r=-1;for(;++r<t.length;)s[r]=eO(t[r],e,n);return s.join("")}function F$(t){return!!(t&&typeof t=="object")}const pE=document.createElement("i");function PS(t){const e="&"+t+";";pE.innerHTML=e;const n=pE.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function hr(t,e,n,s){const r=t.length;let a=0,o;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,n=n>0?n:0,s.length<1e4)o=Array.from(s),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);a<s.length;)o=s.slice(a,a+1e4),o.unshift(e,0),t.splice(...o),a+=1e4,e+=1e4}function Ar(t,e){return t.length>0?(hr(t,t.length,0,e),t):e}const mE={}.hasOwnProperty;function tO(t){const e={};let n=-1;for(;++n<t.length;)q$(e,t[n]);return e}function q$(t,e){let n;for(n in e){const r=(mE.call(t,n)?t[n]:void 0)||(t[n]={}),a=e[n];let o;if(a)for(o in a){mE.call(r,o)||(r[o]=[]);const c=a[o];K$(r[o],Array.isArray(c)?c:c?[c]:[])}}}function K$(t,e){let n=-1;const s=[];for(;++n<e.length;)(e[n].add==="after"?t:s).push(e[n]);hr(t,0,0,s)}function nO(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Wr(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const _s=ol(/[A-Za-z]/),hs=ol(/[\dA-Za-z]/),W$=ol(/[#-'*+\--9=?A-Z^-~]/);function y0(t){return t!==null&&(t<32||t===127)}const I_=ol(/\d/),G$=ol(/[\dA-Fa-f]/),Y$=ol(/[!-/:-@[-`{-~]/);function Je(t){return t!==null&&t<-2}function Kt(t){return t!==null&&(t<0||t===32)}function wt(t){return t===-2||t===-1||t===32}const Ng=ol(new RegExp("\\p{P}|\\p{S}","u")),Ql=ol(/\s/);function ol(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function du(t){const e=[];let n=-1,s=0,r=0;for(;++n<t.length;){const a=t.charCodeAt(n);let o="";if(a===37&&hs(t.charCodeAt(n+1))&&hs(t.charCodeAt(n+2)))r=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(o=String.fromCharCode(a));else if(a>55295&&a<57344){const c=t.charCodeAt(n+1);a<56320&&c>56319&&c<57344?(o=String.fromCharCode(a,c),r=1):o=""}else o=String.fromCharCode(a);o&&(e.push(t.slice(s,n),encodeURIComponent(o)),s=n+r+1,o=""),r&&(n+=r,r=0)}return e.join("")+t.slice(s)}function Et(t,e,n,s){const r=s?s-1:Number.POSITIVE_INFINITY;let a=0;return o;function o(h){return wt(h)?(t.enter(n),c(h)):e(h)}function c(h){return wt(h)&&a++<r?(t.consume(h),c):(t.exit(n),e(h))}}const X$={tokenize:J$};function J$(t){const e=t.attempt(this.parser.constructs.contentInitial,s,r);let n;return e;function s(c){if(c===null){t.consume(c);return}return t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),Et(t,e,"linePrefix")}function r(c){return t.enter("paragraph"),a(c)}function a(c){const h=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=h),n=h,o(c)}function o(c){if(c===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(c);return}return Je(c)?(t.consume(c),t.exit("chunkText"),a):(t.consume(c),o)}}const Q$={tokenize:Z$},gE={tokenize:e9};function Z$(t){const e=this,n=[];let s=0,r,a,o;return c;function c(A){if(s<n.length){const B=n[s];return e.containerState=B[1],t.attempt(B[0].continuation,h,d)(A)}return d(A)}function h(A){if(s++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&C();const B=e.events.length;let M=B,T;for(;M--;)if(e.events[M][0]==="exit"&&e.events[M][1].type==="chunkFlow"){T=e.events[M][1].end;break}k(s);let H=B;for(;H<e.events.length;)e.events[H][1].end={...T},H++;return hr(e.events,M+1,0,e.events.slice(B)),e.events.length=H,d(A)}return c(A)}function d(A){if(s===n.length){if(!r)return v(A);if(r.currentConstruct&&r.currentConstruct.concrete)return x(A);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(gE,g,m)(A)}function g(A){return r&&C(),k(s),v(A)}function m(A){return e.parser.lazy[e.now().line]=s!==n.length,o=e.now().offset,x(A)}function v(A){return e.containerState={},t.attempt(gE,y,x)(A)}function y(A){return s++,n.push([e.currentConstruct,e.containerState]),v(A)}function x(A){if(A===null){r&&C(),k(0),t.consume(A);return}return r=r||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:a}),w(A)}function w(A){if(A===null){S(t.exit("chunkFlow"),!0),k(0),t.consume(A);return}return Je(A)?(t.consume(A),S(t.exit("chunkFlow")),s=0,e.interrupt=void 0,c):(t.consume(A),w)}function S(A,B){const M=e.sliceStream(A);if(B&&M.push(null),A.previous=a,a&&(a.next=A),a=A,r.defineSkip(A.start),r.write(M),e.parser.lazy[A.start.line]){let T=r.events.length;for(;T--;)if(r.events[T][1].start.offset<o&&(!r.events[T][1].end||r.events[T][1].end.offset>o))return;const H=e.events.length;let $=H,G,z;for(;$--;)if(e.events[$][0]==="exit"&&e.events[$][1].type==="chunkFlow"){if(G){z=e.events[$][1].end;break}G=!0}for(k(s),T=H;T<e.events.length;)e.events[T][1].end={...z},T++;hr(e.events,$+1,0,e.events.slice(H)),e.events.length=T}}function k(A){let B=n.length;for(;B-- >A;){const M=n[B];e.containerState=M[1],M[0].exit.call(e,t)}n.length=A}function C(){r.write([null]),a=void 0,r=void 0,e.containerState._closeFlow=void 0}}function e9(t,e,n){return Et(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Hc(t){if(t===null||Kt(t)||Ql(t))return 1;if(Ng(t))return 2}function Eg(t,e,n){const s=[];let r=-1;for(;++r<t.length;){const a=t[r].resolveAll;a&&!s.includes(a)&&(e=a(e,n),s.push(a))}return e}const P_={name:"attention",resolveAll:t9,tokenize:n9};function t9(t,e){let n=-1,s,r,a,o,c,h,d,g;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(s=n;s--;)if(t[s][0]==="exit"&&t[s][1].type==="attentionSequence"&&t[s][1]._open&&e.sliceSerialize(t[s][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[s][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[s][1].end.offset-t[s][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;h=t[s][1].end.offset-t[s][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const m={...t[s][1].end},v={...t[n][1].start};yE(m,-h),yE(v,h),o={type:h>1?"strongSequence":"emphasisSequence",start:m,end:{...t[s][1].end}},c={type:h>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:v},a={type:h>1?"strongText":"emphasisText",start:{...t[s][1].end},end:{...t[n][1].start}},r={type:h>1?"strong":"emphasis",start:{...o.start},end:{...c.end}},t[s][1].end={...o.start},t[n][1].start={...c.end},d=[],t[s][1].end.offset-t[s][1].start.offset&&(d=Ar(d,[["enter",t[s][1],e],["exit",t[s][1],e]])),d=Ar(d,[["enter",r,e],["enter",o,e],["exit",o,e],["enter",a,e]]),d=Ar(d,Eg(e.parser.constructs.insideSpan.null,t.slice(s+1,n),e)),d=Ar(d,[["exit",a,e],["enter",c,e],["exit",c,e],["exit",r,e]]),t[n][1].end.offset-t[n][1].start.offset?(g=2,d=Ar(d,[["enter",t[n][1],e],["exit",t[n][1],e]])):g=0,hr(t,s-1,n-s+3,d),n=s+d.length-g-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function n9(t,e){const n=this.parser.constructs.attentionMarkers.null,s=this.previous,r=Hc(s);let a;return o;function o(h){return a=h,t.enter("attentionSequence"),c(h)}function c(h){if(h===a)return t.consume(h),c;const d=t.exit("attentionSequence"),g=Hc(h),m=!g||g===2&&r||n.includes(h),v=!r||r===2&&g||n.includes(s);return d._open=!!(a===42?m:m&&(r||!v)),d._close=!!(a===42?v:v&&(g||!m)),e(h)}}function yE(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const s9={name:"autolink",tokenize:r9};function r9(t,e,n){let s=0;return r;function r(y){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),a}function a(y){return _s(y)?(t.consume(y),o):y===64?n(y):d(y)}function o(y){return y===43||y===45||y===46||hs(y)?(s=1,c(y)):d(y)}function c(y){return y===58?(t.consume(y),s=0,h):(y===43||y===45||y===46||hs(y))&&s++<32?(t.consume(y),c):(s=0,d(y))}function h(y){return y===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),e):y===null||y===32||y===60||y0(y)?n(y):(t.consume(y),h)}function d(y){return y===64?(t.consume(y),g):W$(y)?(t.consume(y),d):n(y)}function g(y){return hs(y)?m(y):n(y)}function m(y){return y===46?(t.consume(y),s=0,g):y===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),e):v(y)}function v(y){if((y===45||hs(y))&&s++<63){const x=y===45?v:m;return t.consume(y),x}return n(y)}}const gf={partial:!0,tokenize:i9};function i9(t,e,n){return s;function s(a){return wt(a)?Et(t,r,"linePrefix")(a):r(a)}function r(a){return a===null||Je(a)?e(a):n(a)}}const sO={continuation:{tokenize:l9},exit:o9,name:"blockQuote",tokenize:a9};function a9(t,e,n){const s=this;return r;function r(o){if(o===62){const c=s.containerState;return c.open||(t.enter("blockQuote",{_container:!0}),c.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),a}return n(o)}function a(o){return wt(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function l9(t,e,n){const s=this;return r;function r(o){return wt(o)?Et(t,a,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):a(o)}function a(o){return t.attempt(sO,e,n)(o)}}function o9(t){t.exit("blockQuote")}const rO={name:"characterEscape",tokenize:c9};function c9(t,e,n){return s;function s(a){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(a),t.exit("escapeMarker"),r}function r(a){return Y$(a)?(t.enter("characterEscapeValue"),t.consume(a),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(a)}}const iO={name:"characterReference",tokenize:u9};function u9(t,e,n){const s=this;let r=0,a,o;return c;function c(m){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(m),t.exit("characterReferenceMarker"),h}function h(m){return m===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(m),t.exit("characterReferenceMarkerNumeric"),d):(t.enter("characterReferenceValue"),a=31,o=hs,g(m))}function d(m){return m===88||m===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(m),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),a=6,o=G$,g):(t.enter("characterReferenceValue"),a=7,o=I_,g(m))}function g(m){if(m===59&&r){const v=t.exit("characterReferenceValue");return o===hs&&!PS(s.sliceSerialize(v))?n(m):(t.enter("characterReferenceMarker"),t.consume(m),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(m)&&r++<a?(t.consume(m),g):n(m)}}const vE={partial:!0,tokenize:d9},bE={concrete:!0,name:"codeFenced",tokenize:h9};function h9(t,e,n){const s=this,r={partial:!0,tokenize:M};let a=0,o=0,c;return h;function h(T){return d(T)}function d(T){const H=s.events[s.events.length-1];return a=H&&H[1].type==="linePrefix"?H[2].sliceSerialize(H[1],!0).length:0,c=T,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),g(T)}function g(T){return T===c?(o++,t.consume(T),g):o<3?n(T):(t.exit("codeFencedFenceSequence"),wt(T)?Et(t,m,"whitespace")(T):m(T))}function m(T){return T===null||Je(T)?(t.exit("codeFencedFence"),s.interrupt?e(T):t.check(vE,w,B)(T)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),v(T))}function v(T){return T===null||Je(T)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),m(T)):wt(T)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Et(t,y,"whitespace")(T)):T===96&&T===c?n(T):(t.consume(T),v)}function y(T){return T===null||Je(T)?m(T):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),x(T))}function x(T){return T===null||Je(T)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),m(T)):T===96&&T===c?n(T):(t.consume(T),x)}function w(T){return t.attempt(r,B,S)(T)}function S(T){return t.enter("lineEnding"),t.consume(T),t.exit("lineEnding"),k}function k(T){return a>0&&wt(T)?Et(t,C,"linePrefix",a+1)(T):C(T)}function C(T){return T===null||Je(T)?t.check(vE,w,B)(T):(t.enter("codeFlowValue"),A(T))}function A(T){return T===null||Je(T)?(t.exit("codeFlowValue"),C(T)):(t.consume(T),A)}function B(T){return t.exit("codeFenced"),e(T)}function M(T,H,$){let G=0;return z;function z(q){return T.enter("lineEnding"),T.consume(q),T.exit("lineEnding"),Q}function Q(q){return T.enter("codeFencedFence"),wt(q)?Et(T,F,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(q):F(q)}function F(q){return q===c?(T.enter("codeFencedFenceSequence"),K(q)):$(q)}function K(q){return q===c?(G++,T.consume(q),K):G>=o?(T.exit("codeFencedFenceSequence"),wt(q)?Et(T,J,"whitespace")(q):J(q)):$(q)}function J(q){return q===null||Je(q)?(T.exit("codeFencedFence"),H(q)):$(q)}}}function d9(t,e,n){const s=this;return r;function r(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),a)}function a(o){return s.parser.lazy[s.now().line]?n(o):e(o)}}const mb={name:"codeIndented",tokenize:p9},f9={partial:!0,tokenize:m9};function p9(t,e,n){const s=this;return r;function r(d){return t.enter("codeIndented"),Et(t,a,"linePrefix",5)(d)}function a(d){const g=s.events[s.events.length-1];return g&&g[1].type==="linePrefix"&&g[2].sliceSerialize(g[1],!0).length>=4?o(d):n(d)}function o(d){return d===null?h(d):Je(d)?t.attempt(f9,o,h)(d):(t.enter("codeFlowValue"),c(d))}function c(d){return d===null||Je(d)?(t.exit("codeFlowValue"),o(d)):(t.consume(d),c)}function h(d){return t.exit("codeIndented"),e(d)}}function m9(t,e,n){const s=this;return r;function r(o){return s.parser.lazy[s.now().line]?n(o):Je(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),r):Et(t,a,"linePrefix",5)(o)}function a(o){const c=s.events[s.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(o):Je(o)?r(o):n(o)}}const g9={name:"codeText",previous:v9,resolve:y9,tokenize:b9};function y9(t){let e=t.length-4,n=3,s,r;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(s=n;++s<e;)if(t[s][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(s=n-1,e++;++s<=e;)r===void 0?s!==e&&t[s][1].type!=="lineEnding"&&(r=s):(s===e||t[s][1].type==="lineEnding")&&(t[r][1].type="codeTextData",s!==r+2&&(t[r][1].end=t[s-1][1].end,t.splice(r+2,s-r-2),e-=s-r-2,s=r+2),r=void 0);return t}function v9(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function b9(t,e,n){let s=0,r,a;return o;function o(m){return t.enter("codeText"),t.enter("codeTextSequence"),c(m)}function c(m){return m===96?(t.consume(m),s++,c):(t.exit("codeTextSequence"),h(m))}function h(m){return m===null?n(m):m===32?(t.enter("space"),t.consume(m),t.exit("space"),h):m===96?(a=t.enter("codeTextSequence"),r=0,g(m)):Je(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),h):(t.enter("codeTextData"),d(m))}function d(m){return m===null||m===32||m===96||Je(m)?(t.exit("codeTextData"),h(m)):(t.consume(m),d)}function g(m){return m===96?(t.consume(m),r++,g):r===s?(t.exit("codeTextSequence"),t.exit("codeText"),e(m)):(a.type="codeTextData",d(m))}}class _9{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const s=n??Number.POSITIVE_INFINITY;return s<this.left.length?this.left.slice(e,s):e>this.left.length?this.right.slice(this.right.length-s+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-s+this.left.length).reverse())}splice(e,n,s){const r=n||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return s&&Ch(this.left,s),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Ch(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Ch(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Ch(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Ch(this.left,n.reverse())}}}function Ch(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function aO(t){const e={};let n=-1,s,r,a,o,c,h,d;const g=new _9(t);for(;++n<g.length;){for(;n in e;)n=e[n];if(s=g.get(n),n&&s[1].type==="chunkFlow"&&g.get(n-1)[1].type==="listItemPrefix"&&(h=s[1]._tokenizer.events,a=0,a<h.length&&h[a][1].type==="lineEndingBlank"&&(a+=2),a<h.length&&h[a][1].type==="content"))for(;++a<h.length&&h[a][1].type!=="content";)h[a][1].type==="chunkText"&&(h[a][1]._isInFirstContentOfListItem=!0,a++);if(s[0]==="enter")s[1].contentType&&(Object.assign(e,x9(g,n)),n=e[n],d=!0);else if(s[1]._container){for(a=n,r=void 0;a--;)if(o=g.get(a),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(r&&(g.get(r)[1].type="lineEndingBlank"),o[1].type="lineEnding",r=a);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;r&&(s[1].end={...g.get(r)[1].start},c=g.slice(r,n),c.unshift(s),g.splice(r,n-r+1,c))}}return hr(t,0,Number.POSITIVE_INFINITY,g.slice(0)),!d}function x9(t,e){const n=t.get(e)[1],s=t.get(e)[2];let r=e-1;const a=[];let o=n._tokenizer;o||(o=s.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const c=o.events,h=[],d={};let g,m,v=-1,y=n,x=0,w=0;const S=[w];for(;y;){for(;t.get(++r)[1]!==y;);a.push(r),y._tokenizer||(g=s.sliceStream(y),y.next||g.push(null),m&&o.defineSkip(y.start),y._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(g),y._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),m=y,y=y.next}for(y=n;++v<c.length;)c[v][0]==="exit"&&c[v-1][0]==="enter"&&c[v][1].type===c[v-1][1].type&&c[v][1].start.line!==c[v][1].end.line&&(w=v+1,S.push(w),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(o.events=[],y?(y._tokenizer=void 0,y.previous=void 0):S.pop(),v=S.length;v--;){const k=c.slice(S[v],S[v+1]),C=a.pop();h.push([C,C+k.length-1]),t.splice(C,2,k)}for(h.reverse(),v=-1;++v<h.length;)d[x+h[v][0]]=x+h[v][1],x+=h[v][1]-h[v][0]-1;return d}const w9={resolve:k9,tokenize:C9},S9={partial:!0,tokenize:N9};function k9(t){return aO(t),t}function C9(t,e){let n;return s;function s(c){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),r(c)}function r(c){return c===null?a(c):Je(c)?t.check(S9,o,a)(c):(t.consume(c),r)}function a(c){return t.exit("chunkContent"),t.exit("content"),e(c)}function o(c){return t.consume(c),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}function N9(t,e,n){const s=this;return r;function r(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Et(t,a,"linePrefix")}function a(o){if(o===null||Je(o))return n(o);const c=s.events[s.events.length-1];return!s.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(o):t.interrupt(s.parser.constructs.flow,n,e)(o)}}function lO(t,e,n,s,r,a,o,c,h){const d=h||Number.POSITIVE_INFINITY;let g=0;return m;function m(k){return k===60?(t.enter(s),t.enter(r),t.enter(a),t.consume(k),t.exit(a),v):k===null||k===32||k===41||y0(k)?n(k):(t.enter(s),t.enter(o),t.enter(c),t.enter("chunkString",{contentType:"string"}),w(k))}function v(k){return k===62?(t.enter(a),t.consume(k),t.exit(a),t.exit(r),t.exit(s),e):(t.enter(c),t.enter("chunkString",{contentType:"string"}),y(k))}function y(k){return k===62?(t.exit("chunkString"),t.exit(c),v(k)):k===null||k===60||Je(k)?n(k):(t.consume(k),k===92?x:y)}function x(k){return k===60||k===62||k===92?(t.consume(k),y):y(k)}function w(k){return!g&&(k===null||k===41||Kt(k))?(t.exit("chunkString"),t.exit(c),t.exit(o),t.exit(s),e(k)):g<d&&k===40?(t.consume(k),g++,w):k===41?(t.consume(k),g--,w):k===null||k===32||k===40||y0(k)?n(k):(t.consume(k),k===92?S:w)}function S(k){return k===40||k===41||k===92?(t.consume(k),w):w(k)}}function oO(t,e,n,s,r,a){const o=this;let c=0,h;return d;function d(y){return t.enter(s),t.enter(r),t.consume(y),t.exit(r),t.enter(a),g}function g(y){return c>999||y===null||y===91||y===93&&!h||y===94&&!c&&"_hiddenFootnoteSupport"in o.parser.constructs?n(y):y===93?(t.exit(a),t.enter(r),t.consume(y),t.exit(r),t.exit(s),e):Je(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),g):(t.enter("chunkString",{contentType:"string"}),m(y))}function m(y){return y===null||y===91||y===93||Je(y)||c++>999?(t.exit("chunkString"),g(y)):(t.consume(y),h||(h=!wt(y)),y===92?v:m)}function v(y){return y===91||y===92||y===93?(t.consume(y),c++,m):m(y)}}function cO(t,e,n,s,r,a){let o;return c;function c(v){return v===34||v===39||v===40?(t.enter(s),t.enter(r),t.consume(v),t.exit(r),o=v===40?41:v,h):n(v)}function h(v){return v===o?(t.enter(r),t.consume(v),t.exit(r),t.exit(s),e):(t.enter(a),d(v))}function d(v){return v===o?(t.exit(a),h(o)):v===null?n(v):Je(v)?(t.enter("lineEnding"),t.consume(v),t.exit("lineEnding"),Et(t,d,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),g(v))}function g(v){return v===o||v===null||Je(v)?(t.exit("chunkString"),d(v)):(t.consume(v),v===92?m:g)}function m(v){return v===o||v===92?(t.consume(v),g):g(v)}}function Cd(t,e){let n;return s;function s(r){return Je(r)?(t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),n=!0,s):wt(r)?Et(t,s,n?"linePrefix":"lineSuffix")(r):e(r)}}const E9={name:"definition",tokenize:j9},A9={partial:!0,tokenize:T9};function j9(t,e,n){const s=this;let r;return a;function a(y){return t.enter("definition"),o(y)}function o(y){return oO.call(s,t,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function c(y){return r=Wr(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)),y===58?(t.enter("definitionMarker"),t.consume(y),t.exit("definitionMarker"),h):n(y)}function h(y){return Kt(y)?Cd(t,d)(y):d(y)}function d(y){return lO(t,g,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function g(y){return t.attempt(A9,m,m)(y)}function m(y){return wt(y)?Et(t,v,"whitespace")(y):v(y)}function v(y){return y===null||Je(y)?(t.exit("definition"),s.parser.defined.push(r),e(y)):n(y)}}function T9(t,e,n){return s;function s(c){return Kt(c)?Cd(t,r)(c):n(c)}function r(c){return cO(t,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function a(c){return wt(c)?Et(t,o,"whitespace")(c):o(c)}function o(c){return c===null||Je(c)?e(c):n(c)}}const O9={name:"hardBreakEscape",tokenize:R9};function R9(t,e,n){return s;function s(a){return t.enter("hardBreakEscape"),t.consume(a),r}function r(a){return Je(a)?(t.exit("hardBreakEscape"),e(a)):n(a)}}const B9={name:"headingAtx",resolve:M9,tokenize:D9};function M9(t,e){let n=t.length-2,s=3,r,a;return t[s][1].type==="whitespace"&&(s+=2),n-2>s&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(s===n-1||n-4>s&&t[n-2][1].type==="whitespace")&&(n-=s+1===n?2:4),n>s&&(r={type:"atxHeadingText",start:t[s][1].start,end:t[n][1].end},a={type:"chunkText",start:t[s][1].start,end:t[n][1].end,contentType:"text"},hr(t,s,n-s+1,[["enter",r,e],["enter",a,e],["exit",a,e],["exit",r,e]])),t}function D9(t,e,n){let s=0;return r;function r(g){return t.enter("atxHeading"),a(g)}function a(g){return t.enter("atxHeadingSequence"),o(g)}function o(g){return g===35&&s++<6?(t.consume(g),o):g===null||Kt(g)?(t.exit("atxHeadingSequence"),c(g)):n(g)}function c(g){return g===35?(t.enter("atxHeadingSequence"),h(g)):g===null||Je(g)?(t.exit("atxHeading"),e(g)):wt(g)?Et(t,c,"whitespace")(g):(t.enter("atxHeadingText"),d(g))}function h(g){return g===35?(t.consume(g),h):(t.exit("atxHeadingSequence"),c(g))}function d(g){return g===null||g===35||Kt(g)?(t.exit("atxHeadingText"),c(g)):(t.consume(g),d)}}const L9=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],_E=["pre","script","style","textarea"],I9={concrete:!0,name:"htmlFlow",resolveTo:$9,tokenize:H9},P9={partial:!0,tokenize:V9},z9={partial:!0,tokenize:U9};function $9(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function H9(t,e,n){const s=this;let r,a,o,c,h;return d;function d(E){return g(E)}function g(E){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(E),m}function m(E){return E===33?(t.consume(E),v):E===47?(t.consume(E),a=!0,w):E===63?(t.consume(E),r=3,s.interrupt?e:O):_s(E)?(t.consume(E),o=String.fromCharCode(E),S):n(E)}function v(E){return E===45?(t.consume(E),r=2,y):E===91?(t.consume(E),r=5,c=0,x):_s(E)?(t.consume(E),r=4,s.interrupt?e:O):n(E)}function y(E){return E===45?(t.consume(E),s.interrupt?e:O):n(E)}function x(E){const Z="CDATA[";return E===Z.charCodeAt(c++)?(t.consume(E),c===Z.length?s.interrupt?e:F:x):n(E)}function w(E){return _s(E)?(t.consume(E),o=String.fromCharCode(E),S):n(E)}function S(E){if(E===null||E===47||E===62||Kt(E)){const Z=E===47,ue=o.toLowerCase();return!Z&&!a&&_E.includes(ue)?(r=1,s.interrupt?e(E):F(E)):L9.includes(o.toLowerCase())?(r=6,Z?(t.consume(E),k):s.interrupt?e(E):F(E)):(r=7,s.interrupt&&!s.parser.lazy[s.now().line]?n(E):a?C(E):A(E))}return E===45||hs(E)?(t.consume(E),o+=String.fromCharCode(E),S):n(E)}function k(E){return E===62?(t.consume(E),s.interrupt?e:F):n(E)}function C(E){return wt(E)?(t.consume(E),C):z(E)}function A(E){return E===47?(t.consume(E),z):E===58||E===95||_s(E)?(t.consume(E),B):wt(E)?(t.consume(E),A):z(E)}function B(E){return E===45||E===46||E===58||E===95||hs(E)?(t.consume(E),B):M(E)}function M(E){return E===61?(t.consume(E),T):wt(E)?(t.consume(E),M):A(E)}function T(E){return E===null||E===60||E===61||E===62||E===96?n(E):E===34||E===39?(t.consume(E),h=E,H):wt(E)?(t.consume(E),T):$(E)}function H(E){return E===h?(t.consume(E),h=null,G):E===null||Je(E)?n(E):(t.consume(E),H)}function $(E){return E===null||E===34||E===39||E===47||E===60||E===61||E===62||E===96||Kt(E)?M(E):(t.consume(E),$)}function G(E){return E===47||E===62||wt(E)?A(E):n(E)}function z(E){return E===62?(t.consume(E),Q):n(E)}function Q(E){return E===null||Je(E)?F(E):wt(E)?(t.consume(E),Q):n(E)}function F(E){return E===45&&r===2?(t.consume(E),P):E===60&&r===1?(t.consume(E),X):E===62&&r===4?(t.consume(E),R):E===63&&r===3?(t.consume(E),O):E===93&&r===5?(t.consume(E),D):Je(E)&&(r===6||r===7)?(t.exit("htmlFlowData"),t.check(P9,V,K)(E)):E===null||Je(E)?(t.exit("htmlFlowData"),K(E)):(t.consume(E),F)}function K(E){return t.check(z9,J,V)(E)}function J(E){return t.enter("lineEnding"),t.consume(E),t.exit("lineEnding"),q}function q(E){return E===null||Je(E)?K(E):(t.enter("htmlFlowData"),F(E))}function P(E){return E===45?(t.consume(E),O):F(E)}function X(E){return E===47?(t.consume(E),o="",U):F(E)}function U(E){if(E===62){const Z=o.toLowerCase();return _E.includes(Z)?(t.consume(E),R):F(E)}return _s(E)&&o.length<8?(t.consume(E),o+=String.fromCharCode(E),U):F(E)}function D(E){return E===93?(t.consume(E),O):F(E)}function O(E){return E===62?(t.consume(E),R):E===45&&r===2?(t.consume(E),O):F(E)}function R(E){return E===null||Je(E)?(t.exit("htmlFlowData"),V(E)):(t.consume(E),R)}function V(E){return t.exit("htmlFlow"),e(E)}}function U9(t,e,n){const s=this;return r;function r(o){return Je(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),a):n(o)}function a(o){return s.parser.lazy[s.now().line]?n(o):e(o)}}function V9(t,e,n){return s;function s(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),t.attempt(gf,e,n)}}const F9={name:"htmlText",tokenize:q9};function q9(t,e,n){const s=this;let r,a,o;return c;function c(O){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(O),h}function h(O){return O===33?(t.consume(O),d):O===47?(t.consume(O),M):O===63?(t.consume(O),A):_s(O)?(t.consume(O),$):n(O)}function d(O){return O===45?(t.consume(O),g):O===91?(t.consume(O),a=0,x):_s(O)?(t.consume(O),C):n(O)}function g(O){return O===45?(t.consume(O),y):n(O)}function m(O){return O===null?n(O):O===45?(t.consume(O),v):Je(O)?(o=m,X(O)):(t.consume(O),m)}function v(O){return O===45?(t.consume(O),y):m(O)}function y(O){return O===62?P(O):O===45?v(O):m(O)}function x(O){const R="CDATA[";return O===R.charCodeAt(a++)?(t.consume(O),a===R.length?w:x):n(O)}function w(O){return O===null?n(O):O===93?(t.consume(O),S):Je(O)?(o=w,X(O)):(t.consume(O),w)}function S(O){return O===93?(t.consume(O),k):w(O)}function k(O){return O===62?P(O):O===93?(t.consume(O),k):w(O)}function C(O){return O===null||O===62?P(O):Je(O)?(o=C,X(O)):(t.consume(O),C)}function A(O){return O===null?n(O):O===63?(t.consume(O),B):Je(O)?(o=A,X(O)):(t.consume(O),A)}function B(O){return O===62?P(O):A(O)}function M(O){return _s(O)?(t.consume(O),T):n(O)}function T(O){return O===45||hs(O)?(t.consume(O),T):H(O)}function H(O){return Je(O)?(o=H,X(O)):wt(O)?(t.consume(O),H):P(O)}function $(O){return O===45||hs(O)?(t.consume(O),$):O===47||O===62||Kt(O)?G(O):n(O)}function G(O){return O===47?(t.consume(O),P):O===58||O===95||_s(O)?(t.consume(O),z):Je(O)?(o=G,X(O)):wt(O)?(t.consume(O),G):P(O)}function z(O){return O===45||O===46||O===58||O===95||hs(O)?(t.consume(O),z):Q(O)}function Q(O){return O===61?(t.consume(O),F):Je(O)?(o=Q,X(O)):wt(O)?(t.consume(O),Q):G(O)}function F(O){return O===null||O===60||O===61||O===62||O===96?n(O):O===34||O===39?(t.consume(O),r=O,K):Je(O)?(o=F,X(O)):wt(O)?(t.consume(O),F):(t.consume(O),J)}function K(O){return O===r?(t.consume(O),r=void 0,q):O===null?n(O):Je(O)?(o=K,X(O)):(t.consume(O),K)}function J(O){return O===null||O===34||O===39||O===60||O===61||O===96?n(O):O===47||O===62||Kt(O)?G(O):(t.consume(O),J)}function q(O){return O===47||O===62||Kt(O)?G(O):n(O)}function P(O){return O===62?(t.consume(O),t.exit("htmlTextData"),t.exit("htmlText"),e):n(O)}function X(O){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(O),t.exit("lineEnding"),U}function U(O){return wt(O)?Et(t,D,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(O):D(O)}function D(O){return t.enter("htmlTextData"),o(O)}}const zS={name:"labelEnd",resolveAll:Y9,resolveTo:X9,tokenize:J9},K9={tokenize:Q9},W9={tokenize:Z9},G9={tokenize:eH};function Y9(t){let e=-1;const n=[];for(;++e<t.length;){const s=t[e][1];if(n.push(t[e]),s.type==="labelImage"||s.type==="labelLink"||s.type==="labelEnd"){const r=s.type==="labelImage"?4:2;s.type="data",e+=r}}return t.length!==n.length&&hr(t,0,t.length,n),t}function X9(t,e){let n=t.length,s=0,r,a,o,c;for(;n--;)if(r=t[n][1],a){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;t[n][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(a=n,r.type!=="labelLink")){s=2;break}}else r.type==="labelEnd"&&(o=n);const h={type:t[a][1].type==="labelLink"?"link":"image",start:{...t[a][1].start},end:{...t[t.length-1][1].end}},d={type:"label",start:{...t[a][1].start},end:{...t[o][1].end}},g={type:"labelText",start:{...t[a+s+2][1].end},end:{...t[o-2][1].start}};return c=[["enter",h,e],["enter",d,e]],c=Ar(c,t.slice(a+1,a+s+3)),c=Ar(c,[["enter",g,e]]),c=Ar(c,Eg(e.parser.constructs.insideSpan.null,t.slice(a+s+4,o-3),e)),c=Ar(c,[["exit",g,e],t[o-2],t[o-1],["exit",d,e]]),c=Ar(c,t.slice(o+1)),c=Ar(c,[["exit",h,e]]),hr(t,a,t.length,c),t}function J9(t,e,n){const s=this;let r=s.events.length,a,o;for(;r--;)if((s.events[r][1].type==="labelImage"||s.events[r][1].type==="labelLink")&&!s.events[r][1]._balanced){a=s.events[r][1];break}return c;function c(v){return a?a._inactive?m(v):(o=s.parser.defined.includes(Wr(s.sliceSerialize({start:a.end,end:s.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(v),t.exit("labelMarker"),t.exit("labelEnd"),h):n(v)}function h(v){return v===40?t.attempt(K9,g,o?g:m)(v):v===91?t.attempt(W9,g,o?d:m)(v):o?g(v):m(v)}function d(v){return t.attempt(G9,g,m)(v)}function g(v){return e(v)}function m(v){return a._balanced=!0,n(v)}}function Q9(t,e,n){return s;function s(m){return t.enter("resource"),t.enter("resourceMarker"),t.consume(m),t.exit("resourceMarker"),r}function r(m){return Kt(m)?Cd(t,a)(m):a(m)}function a(m){return m===41?g(m):lO(t,o,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(m)}function o(m){return Kt(m)?Cd(t,h)(m):g(m)}function c(m){return n(m)}function h(m){return m===34||m===39||m===40?cO(t,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(m):g(m)}function d(m){return Kt(m)?Cd(t,g)(m):g(m)}function g(m){return m===41?(t.enter("resourceMarker"),t.consume(m),t.exit("resourceMarker"),t.exit("resource"),e):n(m)}}function Z9(t,e,n){const s=this;return r;function r(c){return oO.call(s,t,a,o,"reference","referenceMarker","referenceString")(c)}function a(c){return s.parser.defined.includes(Wr(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)))?e(c):n(c)}function o(c){return n(c)}}function eH(t,e,n){return s;function s(a){return t.enter("reference"),t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),r}function r(a){return a===93?(t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),t.exit("reference"),e):n(a)}}const tH={name:"labelStartImage",resolveAll:zS.resolveAll,tokenize:nH};function nH(t,e,n){const s=this;return r;function r(c){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(c),t.exit("labelImageMarker"),a}function a(c){return c===91?(t.enter("labelMarker"),t.consume(c),t.exit("labelMarker"),t.exit("labelImage"),o):n(c)}function o(c){return c===94&&"_hiddenFootnoteSupport"in s.parser.constructs?n(c):e(c)}}const sH={name:"labelStartLink",resolveAll:zS.resolveAll,tokenize:rH};function rH(t,e,n){const s=this;return r;function r(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),a}function a(o){return o===94&&"_hiddenFootnoteSupport"in s.parser.constructs?n(o):e(o)}}const gb={name:"lineEnding",tokenize:iH};function iH(t,e){return n;function n(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),Et(t,e,"linePrefix")}}const Um={name:"thematicBreak",tokenize:aH};function aH(t,e,n){let s=0,r;return a;function a(d){return t.enter("thematicBreak"),o(d)}function o(d){return r=d,c(d)}function c(d){return d===r?(t.enter("thematicBreakSequence"),h(d)):s>=3&&(d===null||Je(d))?(t.exit("thematicBreak"),e(d)):n(d)}function h(d){return d===r?(t.consume(d),s++,h):(t.exit("thematicBreakSequence"),wt(d)?Et(t,c,"whitespace")(d):c(d))}}const Ps={continuation:{tokenize:uH},exit:dH,name:"list",tokenize:cH},lH={partial:!0,tokenize:fH},oH={partial:!0,tokenize:hH};function cH(t,e,n){const s=this,r=s.events[s.events.length-1];let a=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,o=0;return c;function c(y){const x=s.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!s.containerState.marker||y===s.containerState.marker:I_(y)){if(s.containerState.type||(s.containerState.type=x,t.enter(x,{_container:!0})),x==="listUnordered")return t.enter("listItemPrefix"),y===42||y===45?t.check(Um,n,d)(y):d(y);if(!s.interrupt||y===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),h(y)}return n(y)}function h(y){return I_(y)&&++o<10?(t.consume(y),h):(!s.interrupt||o<2)&&(s.containerState.marker?y===s.containerState.marker:y===41||y===46)?(t.exit("listItemValue"),d(y)):n(y)}function d(y){return t.enter("listItemMarker"),t.consume(y),t.exit("listItemMarker"),s.containerState.marker=s.containerState.marker||y,t.check(gf,s.interrupt?n:g,t.attempt(lH,v,m))}function g(y){return s.containerState.initialBlankLine=!0,a++,v(y)}function m(y){return wt(y)?(t.enter("listItemPrefixWhitespace"),t.consume(y),t.exit("listItemPrefixWhitespace"),v):n(y)}function v(y){return s.containerState.size=a+s.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(y)}}function uH(t,e,n){const s=this;return s.containerState._closeFlow=void 0,t.check(gf,r,a);function r(c){return s.containerState.furtherBlankLines=s.containerState.furtherBlankLines||s.containerState.initialBlankLine,Et(t,e,"listItemIndent",s.containerState.size+1)(c)}function a(c){return s.containerState.furtherBlankLines||!wt(c)?(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,o(c)):(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,t.attempt(oH,e,o)(c))}function o(c){return s.containerState._closeFlow=!0,s.interrupt=void 0,Et(t,t.attempt(Ps,e,n),"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function hH(t,e,n){const s=this;return Et(t,r,"listItemIndent",s.containerState.size+1);function r(a){const o=s.events[s.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===s.containerState.size?e(a):n(a)}}function dH(t){t.exit(this.containerState.type)}function fH(t,e,n){const s=this;return Et(t,r,"listItemPrefixWhitespace",s.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(a){const o=s.events[s.events.length-1];return!wt(a)&&o&&o[1].type==="listItemPrefixWhitespace"?e(a):n(a)}}const xE={name:"setextUnderline",resolveTo:pH,tokenize:mH};function pH(t,e){let n=t.length,s,r,a;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){s=n;break}t[n][1].type==="paragraph"&&(r=n)}else t[n][1].type==="content"&&t.splice(n,1),!a&&t[n][1].type==="definition"&&(a=n);const o={type:"setextHeading",start:{...t[s][1].start},end:{...t[t.length-1][1].end}};return t[r][1].type="setextHeadingText",a?(t.splice(r,0,["enter",o,e]),t.splice(a+1,0,["exit",t[s][1],e]),t[s][1].end={...t[a][1].end}):t[s][1]=o,t.push(["exit",o,e]),t}function mH(t,e,n){const s=this;let r;return a;function a(d){let g=s.events.length,m;for(;g--;)if(s.events[g][1].type!=="lineEnding"&&s.events[g][1].type!=="linePrefix"&&s.events[g][1].type!=="content"){m=s.events[g][1].type==="paragraph";break}return!s.parser.lazy[s.now().line]&&(s.interrupt||m)?(t.enter("setextHeadingLine"),r=d,o(d)):n(d)}function o(d){return t.enter("setextHeadingLineSequence"),c(d)}function c(d){return d===r?(t.consume(d),c):(t.exit("setextHeadingLineSequence"),wt(d)?Et(t,h,"lineSuffix")(d):h(d))}function h(d){return d===null||Je(d)?(t.exit("setextHeadingLine"),e(d)):n(d)}}const gH={tokenize:yH};function yH(t){const e=this,n=t.attempt(gf,s,t.attempt(this.parser.constructs.flowInitial,r,Et(t,t.attempt(this.parser.constructs.flow,r,t.attempt(w9,r)),"linePrefix")));return n;function s(a){if(a===null){t.consume(a);return}return t.enter("lineEndingBlank"),t.consume(a),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const vH={resolveAll:hO()},bH=uO("string"),_H=uO("text");function uO(t){return{resolveAll:hO(t==="text"?xH:void 0),tokenize:e};function e(n){const s=this,r=this.parser.constructs[t],a=n.attempt(r,o,c);return o;function o(g){return d(g)?a(g):c(g)}function c(g){if(g===null){n.consume(g);return}return n.enter("data"),n.consume(g),h}function h(g){return d(g)?(n.exit("data"),a(g)):(n.consume(g),h)}function d(g){if(g===null)return!0;const m=r[g];let v=-1;if(m)for(;++v<m.length;){const y=m[v];if(!y.previous||y.previous.call(s,s.previous))return!0}return!1}}}function hO(t){return e;function e(n,s){let r=-1,a;for(;++r<=n.length;)a===void 0?n[r]&&n[r][1].type==="data"&&(a=r,r++):(!n[r]||n[r][1].type!=="data")&&(r!==a+2&&(n[a][1].end=n[r-1][1].end,n.splice(a+2,r-a-2),r=a+2),a=void 0);return t?t(n,s):n}}function xH(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const s=t[n-1][1],r=e.sliceStream(s);let a=r.length,o=-1,c=0,h;for(;a--;){const d=r[a];if(typeof d=="string"){for(o=d.length;d.charCodeAt(o-1)===32;)c++,o--;if(o)break;o=-1}else if(d===-2)h=!0,c++;else if(d!==-1){a++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(c=0),c){const d={type:n===t.length||h||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?o:s.start._bufferIndex+o,_index:s.start._index+a,line:s.end.line,column:s.end.column-c,offset:s.end.offset-c},end:{...s.end}};s.end={...d.start},s.start.offset===s.end.offset?Object.assign(s,d):(t.splice(n,0,["enter",d,e],["exit",d,e]),n+=2)}n++}return t}const wH={42:Ps,43:Ps,45:Ps,48:Ps,49:Ps,50:Ps,51:Ps,52:Ps,53:Ps,54:Ps,55:Ps,56:Ps,57:Ps,62:sO},SH={91:E9},kH={[-2]:mb,[-1]:mb,32:mb},CH={35:B9,42:Um,45:[xE,Um],60:I9,61:xE,95:Um,96:bE,126:bE},NH={38:iO,92:rO},EH={[-5]:gb,[-4]:gb,[-3]:gb,33:tH,38:iO,42:P_,60:[s9,F9],91:sH,92:[O9,rO],93:zS,95:P_,96:g9},AH={null:[P_,vH]},jH={null:[42,95]},TH={null:[]},OH=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:jH,contentInitial:SH,disable:TH,document:wH,flow:CH,flowInitial:kH,insideSpan:AH,string:NH,text:EH},Symbol.toStringTag,{value:"Module"}));function RH(t,e,n){let s={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const r={},a=[];let o=[],c=[];const h={attempt:H(M),check:H(T),consume:C,enter:A,exit:B,interrupt:H(T,{interrupt:!0})},d={code:null,containerState:{},defineSkip:w,events:[],now:x,parser:t,previous:null,sliceSerialize:v,sliceStream:y,write:m};let g=e.tokenize.call(d,h);return e.resolveAll&&a.push(e),d;function m(Q){return o=Ar(o,Q),S(),o[o.length-1]!==null?[]:($(e,0),d.events=Eg(a,d.events,d),d.events)}function v(Q,F){return MH(y(Q),F)}function y(Q){return BH(o,Q)}function x(){const{_bufferIndex:Q,_index:F,line:K,column:J,offset:q}=s;return{_bufferIndex:Q,_index:F,line:K,column:J,offset:q}}function w(Q){r[Q.line]=Q.column,z()}function S(){let Q;for(;s._index<o.length;){const F=o[s._index];if(typeof F=="string")for(Q=s._index,s._bufferIndex<0&&(s._bufferIndex=0);s._index===Q&&s._bufferIndex<F.length;)k(F.charCodeAt(s._bufferIndex));else k(F)}}function k(Q){g=g(Q)}function C(Q){Je(Q)?(s.line++,s.column=1,s.offset+=Q===-3?2:1,z()):Q!==-1&&(s.column++,s.offset++),s._bufferIndex<0?s._index++:(s._bufferIndex++,s._bufferIndex===o[s._index].length&&(s._bufferIndex=-1,s._index++)),d.previous=Q}function A(Q,F){const K=F||{};return K.type=Q,K.start=x(),d.events.push(["enter",K,d]),c.push(K),K}function B(Q){const F=c.pop();return F.end=x(),d.events.push(["exit",F,d]),F}function M(Q,F){$(Q,F.from)}function T(Q,F){F.restore()}function H(Q,F){return K;function K(J,q,P){let X,U,D,O;return Array.isArray(J)?V(J):"tokenize"in J?V([J]):R(J);function R(ne){return de;function de(we){const Ee=we!==null&&ne[we],et=we!==null&&ne.null,Ce=[...Array.isArray(Ee)?Ee:Ee?[Ee]:[],...Array.isArray(et)?et:et?[et]:[]];return V(Ce)(we)}}function V(ne){return X=ne,U=0,ne.length===0?P:E(ne[U])}function E(ne){return de;function de(we){return O=G(),D=ne,ne.partial||(d.currentConstruct=ne),ne.name&&d.parser.constructs.disable.null.includes(ne.name)?ue():ne.tokenize.call(F?Object.assign(Object.create(d),F):d,h,Z,ue)(we)}}function Z(ne){return Q(D,O),q}function ue(ne){return O.restore(),++U<X.length?E(X[U]):P}}}function $(Q,F){Q.resolveAll&&!a.includes(Q)&&a.push(Q),Q.resolve&&hr(d.events,F,d.events.length-F,Q.resolve(d.events.slice(F),d)),Q.resolveTo&&(d.events=Q.resolveTo(d.events,d))}function G(){const Q=x(),F=d.previous,K=d.currentConstruct,J=d.events.length,q=Array.from(c);return{from:J,restore:P};function P(){s=Q,d.previous=F,d.currentConstruct=K,d.events.length=J,c=q,z()}}function z(){s.line in r&&s.column<2&&(s.column=r[s.line],s.offset+=r[s.line]-1)}}function BH(t,e){const n=e.start._index,s=e.start._bufferIndex,r=e.end._index,a=e.end._bufferIndex;let o;if(n===r)o=[t[n].slice(s,a)];else{if(o=t.slice(n,r),s>-1){const c=o[0];typeof c=="string"?o[0]=c.slice(s):o.shift()}a>0&&o.push(t[r].slice(0,a))}return o}function MH(t,e){let n=-1;const s=[];let r;for(;++n<t.length;){const a=t[n];let o;if(typeof a=="string")o=a;else switch(a){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&r)continue;o=" ";break}default:o=String.fromCharCode(a)}r=a===-2,s.push(o)}return s.join("")}function DH(t){const s={constructs:tO([OH,...(t||{}).extensions||[]]),content:r(X$),defined:[],document:r(Q$),flow:r(gH),lazy:{},string:r(bH),text:r(_H)};return s;function r(a){return o;function o(c){return RH(s,a,c)}}}function LH(t){for(;!aO(t););return t}const wE=/[\0\t\n\r]/g;function IH(){let t=1,e="",n=!0,s;return r;function r(a,o,c){const h=[];let d,g,m,v,y;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(o||void 0).decode(a)),m=0,e="",n&&(a.charCodeAt(0)===65279&&m++,n=void 0);m<a.length;){if(wE.lastIndex=m,d=wE.exec(a),v=d&&d.index!==void 0?d.index:a.length,y=a.charCodeAt(v),!d){e=a.slice(m);break}if(y===10&&m===v&&s)h.push(-3),s=void 0;else switch(s&&(h.push(-5),s=void 0),m<v&&(h.push(a.slice(m,v)),t+=v-m),y){case 0:{h.push(65533),t++;break}case 9:{for(g=Math.ceil(t/4)*4,h.push(-2);t++<g;)h.push(-1);break}case 10:{h.push(-4),t=1;break}default:s=!0,t=1}m=v+1}return c&&(s&&h.push(-5),e&&h.push(e),h.push(null)),h}}const PH=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function zH(t){return t.replace(PH,$H)}function $H(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const r=n.charCodeAt(1),a=r===120||r===88;return nO(n.slice(a?2:1),a?16:10)}return PS(n)||t}const dO={}.hasOwnProperty;function HH(t,e,n){return typeof e!="string"&&(n=e,e=void 0),UH(n)(LH(DH(n).document().write(IH()(t,e,!0))))}function UH(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(ls),autolinkProtocol:G,autolinkEmail:G,atxHeading:a(mt),blockQuote:a(et),characterEscape:G,characterReference:G,codeFenced:a(Ce),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:a(Ce,o),codeText:a(Ge,o),codeTextData:G,data:G,codeFlowValue:G,definition:a(Te),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:a(tt),hardBreakEscape:a(ht),hardBreakTrailing:a(ht),htmlFlow:a(Lt,o),htmlFlowData:G,htmlText:a(Lt,o),htmlTextData:G,image:a(bn),label:o,link:a(ls),listItem:a(Qe),listItemValue:v,listOrdered:a(Es,m),listUnordered:a(Es),paragraph:a(rt),reference:E,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:a(mt),strong:a(Zt),thematicBreak:a(Wn)},exit:{atxHeading:h(),atxHeadingSequence:M,autolink:h(),autolinkEmail:Ee,autolinkProtocol:we,blockQuote:h(),characterEscapeValue:z,characterReferenceMarkerHexadecimal:ue,characterReferenceMarkerNumeric:ue,characterReferenceValue:ne,characterReference:de,codeFenced:h(S),codeFencedFence:w,codeFencedFenceInfo:y,codeFencedFenceMeta:x,codeFlowValue:z,codeIndented:h(k),codeText:h(q),codeTextData:z,data:z,definition:h(),definitionDestinationString:B,definitionLabelString:C,definitionTitleString:A,emphasis:h(),hardBreakEscape:h(F),hardBreakTrailing:h(F),htmlFlow:h(K),htmlFlowData:z,htmlText:h(J),htmlTextData:z,image:h(X),label:D,labelText:U,lineEnding:Q,link:h(P),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:Z,resourceDestinationString:O,resourceTitleString:R,resource:V,setextHeading:h($),setextHeadingLineSequence:H,setextHeadingText:T,strong:h(),thematicBreak:h()}};fO(e,(t||{}).mdastExtensions||[]);const n={};return s;function s(pe){let _e={type:"root",children:[]};const Ke={stack:[_e],tokenStack:[],config:e,enter:c,exit:d,buffer:o,resume:g,data:n},it=[];let St=-1;for(;++St<pe.length;)if(pe[St][1].type==="listOrdered"||pe[St][1].type==="listUnordered")if(pe[St][0]==="enter")it.push(St);else{const jn=it.pop();St=r(pe,jn,St)}for(St=-1;++St<pe.length;){const jn=e[pe[St][0]];dO.call(jn,pe[St][1].type)&&jn[pe[St][1].type].call(Object.assign({sliceSerialize:pe[St][2].sliceSerialize},Ke),pe[St][1])}if(Ke.tokenStack.length>0){const jn=Ke.tokenStack[Ke.tokenStack.length-1];(jn[1]||SE).call(Ke,void 0,jn[0])}for(_e.position={start:$a(pe.length>0?pe[0][1].start:{line:1,column:1,offset:0}),end:$a(pe.length>0?pe[pe.length-2][1].end:{line:1,column:1,offset:0})},St=-1;++St<e.transforms.length;)_e=e.transforms[St](_e)||_e;return _e}function r(pe,_e,Ke){let it=_e-1,St=-1,jn=!1,re,ae,fe,Se;for(;++it<=Ke;){const Oe=pe[it];switch(Oe[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Oe[0]==="enter"?St++:St--,Se=void 0;break}case"lineEndingBlank":{Oe[0]==="enter"&&(re&&!Se&&!St&&!fe&&(fe=it),Se=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Se=void 0}if(!St&&Oe[0]==="enter"&&Oe[1].type==="listItemPrefix"||St===-1&&Oe[0]==="exit"&&(Oe[1].type==="listUnordered"||Oe[1].type==="listOrdered")){if(re){let It=it;for(ae=void 0;It--;){const Bt=pe[It];if(Bt[1].type==="lineEnding"||Bt[1].type==="lineEndingBlank"){if(Bt[0]==="exit")continue;ae&&(pe[ae][1].type="lineEndingBlank",jn=!0),Bt[1].type="lineEnding",ae=It}else if(!(Bt[1].type==="linePrefix"||Bt[1].type==="blockQuotePrefix"||Bt[1].type==="blockQuotePrefixWhitespace"||Bt[1].type==="blockQuoteMarker"||Bt[1].type==="listItemIndent"))break}fe&&(!ae||fe<ae)&&(re._spread=!0),re.end=Object.assign({},ae?pe[ae][1].start:Oe[1].end),pe.splice(ae||it,0,["exit",re,Oe[2]]),it++,Ke++}if(Oe[1].type==="listItemPrefix"){const It={type:"listItem",_spread:!1,start:Object.assign({},Oe[1].start),end:void 0};re=It,pe.splice(it,0,["enter",It,Oe[2]]),it++,Ke++,fe=void 0,Se=!0}}}return pe[_e][1]._spread=jn,Ke}function a(pe,_e){return Ke;function Ke(it){c.call(this,pe(it),it),_e&&_e.call(this,it)}}function o(){this.stack.push({type:"fragment",children:[]})}function c(pe,_e,Ke){this.stack[this.stack.length-1].children.push(pe),this.stack.push(pe),this.tokenStack.push([_e,Ke||void 0]),pe.position={start:$a(_e.start),end:void 0}}function h(pe){return _e;function _e(Ke){pe&&pe.call(this,Ke),d.call(this,Ke)}}function d(pe,_e){const Ke=this.stack.pop(),it=this.tokenStack.pop();if(it)it[0].type!==pe.type&&(_e?_e.call(this,pe,it[0]):(it[1]||SE).call(this,pe,it[0]));else throw new Error("Cannot close `"+pe.type+"` ("+kd({start:pe.start,end:pe.end})+"): its not open");Ke.position.end=$a(pe.end)}function g(){return IS(this.stack.pop())}function m(){this.data.expectingFirstListItemValue=!0}function v(pe){if(this.data.expectingFirstListItemValue){const _e=this.stack[this.stack.length-2];_e.start=Number.parseInt(this.sliceSerialize(pe),10),this.data.expectingFirstListItemValue=void 0}}function y(){const pe=this.resume(),_e=this.stack[this.stack.length-1];_e.lang=pe}function x(){const pe=this.resume(),_e=this.stack[this.stack.length-1];_e.meta=pe}function w(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function S(){const pe=this.resume(),_e=this.stack[this.stack.length-1];_e.value=pe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function k(){const pe=this.resume(),_e=this.stack[this.stack.length-1];_e.value=pe.replace(/(\r?\n|\r)$/g,"")}function C(pe){const _e=this.resume(),Ke=this.stack[this.stack.length-1];Ke.label=_e,Ke.identifier=Wr(this.sliceSerialize(pe)).toLowerCase()}function A(){const pe=this.resume(),_e=this.stack[this.stack.length-1];_e.title=pe}function B(){const pe=this.resume(),_e=this.stack[this.stack.length-1];_e.url=pe}function M(pe){const _e=this.stack[this.stack.length-1];if(!_e.depth){const Ke=this.sliceSerialize(pe).length;_e.depth=Ke}}function T(){this.data.setextHeadingSlurpLineEnding=!0}function H(pe){const _e=this.stack[this.stack.length-1];_e.depth=this.sliceSerialize(pe).codePointAt(0)===61?1:2}function $(){this.data.setextHeadingSlurpLineEnding=void 0}function G(pe){const Ke=this.stack[this.stack.length-1].children;let it=Ke[Ke.length-1];(!it||it.type!=="text")&&(it=Rt(),it.position={start:$a(pe.start),end:void 0},Ke.push(it)),this.stack.push(it)}function z(pe){const _e=this.stack.pop();_e.value+=this.sliceSerialize(pe),_e.position.end=$a(pe.end)}function Q(pe){const _e=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ke=_e.children[_e.children.length-1];Ke.position.end=$a(pe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(_e.type)&&(G.call(this,pe),z.call(this,pe))}function F(){this.data.atHardBreak=!0}function K(){const pe=this.resume(),_e=this.stack[this.stack.length-1];_e.value=pe}function J(){const pe=this.resume(),_e=this.stack[this.stack.length-1];_e.value=pe}function q(){const pe=this.resume(),_e=this.stack[this.stack.length-1];_e.value=pe}function P(){const pe=this.stack[this.stack.length-1];if(this.data.inReference){const _e=this.data.referenceType||"shortcut";pe.type+="Reference",pe.referenceType=_e,delete pe.url,delete pe.title}else delete pe.identifier,delete pe.label;this.data.referenceType=void 0}function X(){const pe=this.stack[this.stack.length-1];if(this.data.inReference){const _e=this.data.referenceType||"shortcut";pe.type+="Reference",pe.referenceType=_e,delete pe.url,delete pe.title}else delete pe.identifier,delete pe.label;this.data.referenceType=void 0}function U(pe){const _e=this.sliceSerialize(pe),Ke=this.stack[this.stack.length-2];Ke.label=zH(_e),Ke.identifier=Wr(_e).toLowerCase()}function D(){const pe=this.stack[this.stack.length-1],_e=this.resume(),Ke=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ke.type==="link"){const it=pe.children;Ke.children=it}else Ke.alt=_e}function O(){const pe=this.resume(),_e=this.stack[this.stack.length-1];_e.url=pe}function R(){const pe=this.resume(),_e=this.stack[this.stack.length-1];_e.title=pe}function V(){this.data.inReference=void 0}function E(){this.data.referenceType="collapsed"}function Z(pe){const _e=this.resume(),Ke=this.stack[this.stack.length-1];Ke.label=_e,Ke.identifier=Wr(this.sliceSerialize(pe)).toLowerCase(),this.data.referenceType="full"}function ue(pe){this.data.characterReferenceType=pe.type}function ne(pe){const _e=this.sliceSerialize(pe),Ke=this.data.characterReferenceType;let it;Ke?(it=nO(_e,Ke==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):it=PS(_e);const St=this.stack[this.stack.length-1];St.value+=it}function de(pe){const _e=this.stack.pop();_e.position.end=$a(pe.end)}function we(pe){z.call(this,pe);const _e=this.stack[this.stack.length-1];_e.url=this.sliceSerialize(pe)}function Ee(pe){z.call(this,pe);const _e=this.stack[this.stack.length-1];_e.url="mailto:"+this.sliceSerialize(pe)}function et(){return{type:"blockquote",children:[]}}function Ce(){return{type:"code",lang:null,meta:null,value:""}}function Ge(){return{type:"inlineCode",value:""}}function Te(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function tt(){return{type:"emphasis",children:[]}}function mt(){return{type:"heading",depth:0,children:[]}}function ht(){return{type:"break"}}function Lt(){return{type:"html",value:""}}function bn(){return{type:"image",title:null,url:"",alt:null}}function ls(){return{type:"link",title:null,url:"",children:[]}}function Es(pe){return{type:"list",ordered:pe.type==="listOrdered",start:null,spread:pe._spread,children:[]}}function Qe(pe){return{type:"listItem",spread:pe._spread,checked:null,children:[]}}function rt(){return{type:"paragraph",children:[]}}function Zt(){return{type:"strong",children:[]}}function Rt(){return{type:"text",value:""}}function Wn(){return{type:"thematicBreak"}}}function $a(t){return{line:t.line,column:t.column,offset:t.offset}}function fO(t,e){let n=-1;for(;++n<e.length;){const s=e[n];Array.isArray(s)?fO(t,s):VH(t,s)}}function VH(t,e){let n;for(n in e)if(dO.call(e,n))switch(n){case"canContainEols":{const s=e[n];s&&t[n].push(...s);break}case"transforms":{const s=e[n];s&&t[n].push(...s);break}case"enter":case"exit":{const s=e[n];s&&Object.assign(t[n],s);break}}}function SE(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+kd({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+kd({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+kd({start:e.start,end:e.end})+") is still open")}function FH(t){const e=this;e.parser=n;function n(s){return HH(s,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function qH(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function KH(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function WH(t,e){const n=e.value?e.value+`
`:"",s={},r=e.lang?e.lang.split(/\s+/):[];r.length>0&&(s.className=["language-"+r[0]]);let a={type:"element",tagName:"code",properties:s,children:[{type:"text",value:n}]};return e.meta&&(a.data={meta:e.meta}),t.patch(e,a),a=t.applyData(e,a),a={type:"element",tagName:"pre",properties:{},children:[a]},t.patch(e,a),a}function GH(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function YH(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function XH(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",s=String(e.identifier).toUpperCase(),r=du(s.toLowerCase()),a=t.footnoteOrder.indexOf(s);let o,c=t.footnoteCounts.get(s);c===void 0?(c=0,t.footnoteOrder.push(s),o=t.footnoteOrder.length):o=a+1,c+=1,t.footnoteCounts.set(s,c);const h={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+r,id:n+"fnref-"+r+(c>1?"-"+c:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,h);const d={type:"element",tagName:"sup",properties:{},children:[h]};return t.patch(e,d),t.applyData(e,d)}function JH(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function QH(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function pO(t,e){const n=e.referenceType;let s="]";if(n==="collapsed"?s+="[]":n==="full"&&(s+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+s}];const r=t.all(e),a=r[0];a&&a.type==="text"?a.value="["+a.value:r.unshift({type:"text",value:"["});const o=r[r.length-1];return o&&o.type==="text"?o.value+=s:r.push({type:"text",value:s}),r}function ZH(t,e){const n=String(e.identifier).toUpperCase(),s=t.definitionById.get(n);if(!s)return pO(t,e);const r={src:du(s.url||""),alt:e.alt};s.title!==null&&s.title!==void 0&&(r.title=s.title);const a={type:"element",tagName:"img",properties:r,children:[]};return t.patch(e,a),t.applyData(e,a)}function eU(t,e){const n={src:du(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const s={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,s),t.applyData(e,s)}function tU(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const s={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,s),t.applyData(e,s)}function nU(t,e){const n=String(e.identifier).toUpperCase(),s=t.definitionById.get(n);if(!s)return pO(t,e);const r={href:du(s.url||"")};s.title!==null&&s.title!==void 0&&(r.title=s.title);const a={type:"element",tagName:"a",properties:r,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function sU(t,e){const n={href:du(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const s={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function rU(t,e,n){const s=t.all(e),r=n?iU(n):mO(e),a={},o=[];if(typeof e.checked=="boolean"){const g=s[0];let m;g&&g.type==="element"&&g.tagName==="p"?m=g:(m={type:"element",tagName:"p",properties:{},children:[]},s.unshift(m)),m.children.length>0&&m.children.unshift({type:"text",value:" "}),m.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let c=-1;for(;++c<s.length;){const g=s[c];(r||c!==0||g.type!=="element"||g.tagName!=="p")&&o.push({type:"text",value:`
`}),g.type==="element"&&g.tagName==="p"&&!r?o.push(...g.children):o.push(g)}const h=s[s.length-1];h&&(r||h.type!=="element"||h.tagName!=="p")&&o.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:a,children:o};return t.patch(e,d),t.applyData(e,d)}function iU(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let s=-1;for(;!e&&++s<n.length;)e=mO(n[s])}return e}function mO(t){const e=t.spread;return e??t.children.length>1}function aU(t,e){const n={},s=t.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++r<s.length;){const o=s[r];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(s,!0)};return t.patch(e,a),t.applyData(e,a)}function lU(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function oU(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function cU(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function uU(t,e){const n=t.all(e),s=n.shift(),r=[];if(s){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([s],!0)};t.patch(e.children[0],o),r.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},c=BS(e.children[1]),h=G6(e.children[e.children.length-1]);c&&h&&(o.position={start:c,end:h}),r.push(o)}const a={type:"element",tagName:"table",properties:{},children:t.wrap(r,!0)};return t.patch(e,a),t.applyData(e,a)}function hU(t,e,n){const s=n?n.children:void 0,a=(s?s.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,c=o?o.length:e.children.length;let h=-1;const d=[];for(;++h<c;){const m=e.children[h],v={},y=o?o[h]:void 0;y&&(v.align=y);let x={type:"element",tagName:a,properties:v,children:[]};m&&(x.children=t.all(m),t.patch(m,x),x=t.applyData(m,x)),d.push(x)}const g={type:"element",tagName:"tr",properties:{},children:t.wrap(d,!0)};return t.patch(e,g),t.applyData(e,g)}function dU(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const kE=9,CE=32;function fU(t){const e=String(t),n=/\r?\n|\r/g;let s=n.exec(e),r=0;const a=[];for(;s;)a.push(NE(e.slice(r,s.index),r>0,!0),s[0]),r=s.index+s[0].length,s=n.exec(e);return a.push(NE(e.slice(r),r>0,!1)),a.join("")}function NE(t,e,n){let s=0,r=t.length;if(e){let a=t.codePointAt(s);for(;a===kE||a===CE;)s++,a=t.codePointAt(s)}if(n){let a=t.codePointAt(r-1);for(;a===kE||a===CE;)r--,a=t.codePointAt(r-1)}return r>s?t.slice(s,r):""}function pU(t,e){const n={type:"text",value:fU(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function mU(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const gU={blockquote:qH,break:KH,code:WH,delete:GH,emphasis:YH,footnoteReference:XH,heading:JH,html:QH,imageReference:ZH,image:eU,inlineCode:tU,linkReference:nU,link:sU,listItem:rU,list:aU,paragraph:lU,root:oU,strong:cU,table:uU,tableCell:dU,tableRow:hU,text:pU,thematicBreak:mU,toml:om,yaml:om,definition:om,footnoteDefinition:om};function om(){}const gO=-1,Ag=0,Nd=1,v0=2,$S=3,HS=4,US=5,VS=6,yO=7,vO=8,EE=typeof self=="object"?self:globalThis,yU=(t,e)=>{const n=(r,a)=>(t.set(a,r),r),s=r=>{if(t.has(r))return t.get(r);const[a,o]=e[r];switch(a){case Ag:case gO:return n(o,r);case Nd:{const c=n([],r);for(const h of o)c.push(s(h));return c}case v0:{const c=n({},r);for(const[h,d]of o)c[s(h)]=s(d);return c}case $S:return n(new Date(o),r);case HS:{const{source:c,flags:h}=o;return n(new RegExp(c,h),r)}case US:{const c=n(new Map,r);for(const[h,d]of o)c.set(s(h),s(d));return c}case VS:{const c=n(new Set,r);for(const h of o)c.add(s(h));return c}case yO:{const{name:c,message:h}=o;return n(new EE[c](h),r)}case vO:return n(BigInt(o),r);case"BigInt":return n(Object(BigInt(o)),r);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:c}=new Uint8Array(o);return n(new DataView(c),o)}}return n(new EE[a](o),r)};return s},AE=t=>yU(new Map,t)(0),dc="",{toString:vU}={},{keys:bU}=Object,Nh=t=>{const e=typeof t;if(e!=="object"||!t)return[Ag,e];const n=vU.call(t).slice(8,-1);switch(n){case"Array":return[Nd,dc];case"Object":return[v0,dc];case"Date":return[$S,dc];case"RegExp":return[HS,dc];case"Map":return[US,dc];case"Set":return[VS,dc];case"DataView":return[Nd,n]}return n.includes("Array")?[Nd,n]:n.includes("Error")?[yO,n]:[v0,n]},cm=([t,e])=>t===Ag&&(e==="function"||e==="symbol"),_U=(t,e,n,s)=>{const r=(o,c)=>{const h=s.push(o)-1;return n.set(c,h),h},a=o=>{if(n.has(o))return n.get(o);let[c,h]=Nh(o);switch(c){case Ag:{let g=o;switch(h){case"bigint":c=vO,g=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+h);g=null;break;case"undefined":return r([gO],o)}return r([c,g],o)}case Nd:{if(h){let v=o;return h==="DataView"?v=new Uint8Array(o.buffer):h==="ArrayBuffer"&&(v=new Uint8Array(o)),r([h,[...v]],o)}const g=[],m=r([c,g],o);for(const v of o)g.push(a(v));return m}case v0:{if(h)switch(h){case"BigInt":return r([h,o.toString()],o);case"Boolean":case"Number":case"String":return r([h,o.valueOf()],o)}if(e&&"toJSON"in o)return a(o.toJSON());const g=[],m=r([c,g],o);for(const v of bU(o))(t||!cm(Nh(o[v])))&&g.push([a(v),a(o[v])]);return m}case $S:return r([c,o.toISOString()],o);case HS:{const{source:g,flags:m}=o;return r([c,{source:g,flags:m}],o)}case US:{const g=[],m=r([c,g],o);for(const[v,y]of o)(t||!(cm(Nh(v))||cm(Nh(y))))&&g.push([a(v),a(y)]);return m}case VS:{const g=[],m=r([c,g],o);for(const v of o)(t||!cm(Nh(v)))&&g.push(a(v));return m}}const{message:d}=o;return r([c,{name:h,message:d}],o)};return a},jE=(t,{json:e,lossy:n}={})=>{const s=[];return _U(!(e||n),!!e,new Map,s)(t),s},b0=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?AE(jE(t,e)):structuredClone(t):(t,e)=>AE(jE(t,e));function xU(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function wU(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function SU(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||xU,s=t.options.footnoteBackLabel||wU,r=t.options.footnoteLabel||"Footnotes",a=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},c=[];let h=-1;for(;++h<t.footnoteOrder.length;){const d=t.footnoteById.get(t.footnoteOrder[h]);if(!d)continue;const g=t.all(d),m=String(d.identifier).toUpperCase(),v=du(m.toLowerCase());let y=0;const x=[],w=t.footnoteCounts.get(m);for(;w!==void 0&&++y<=w;){x.length>0&&x.push({type:"text",value:" "});let C=typeof n=="string"?n:n(h,y);typeof C=="string"&&(C={type:"text",value:C}),x.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+v+(y>1?"-"+y:""),dataFootnoteBackref:"",ariaLabel:typeof s=="string"?s:s(h,y),className:["data-footnote-backref"]},children:Array.isArray(C)?C:[C]})}const S=g[g.length-1];if(S&&S.type==="element"&&S.tagName==="p"){const C=S.children[S.children.length-1];C&&C.type==="text"?C.value+=" ":S.children.push({type:"text",value:" "}),S.children.push(...x)}else g.push(...x);const k={type:"element",tagName:"li",properties:{id:e+"fn-"+v},children:t.wrap(g,!0)};t.patch(d,k),c.push(k)}if(c.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...b0(o),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(c,!0)},{type:"text",value:`
`}]}}const jg=(function(t){if(t==null)return EU;if(typeof t=="function")return Tg(t);if(typeof t=="object")return Array.isArray(t)?kU(t):CU(t);if(typeof t=="string")return NU(t);throw new Error("Expected function, string, or object as test")});function kU(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=jg(t[n]);return Tg(s);function s(...r){let a=-1;for(;++a<e.length;)if(e[a].apply(this,r))return!0;return!1}}function CU(t){const e=t;return Tg(n);function n(s){const r=s;let a;for(a in t)if(r[a]!==e[a])return!1;return!0}}function NU(t){return Tg(e);function e(n){return n&&n.type===t}}function Tg(t){return e;function e(n,s,r){return!!(AU(n)&&t.call(this,n,typeof s=="number"?s:void 0,r||void 0))}}function EU(){return!0}function AU(t){return t!==null&&typeof t=="object"&&"type"in t}const bO=[],jU=!0,z_=!1,TU="skip";function _O(t,e,n,s){let r;typeof e=="function"&&typeof n!="function"?(s=n,n=e):r=e;const a=jg(r),o=s?-1:1;c(t,void 0,[])();function c(h,d,g){const m=h&&typeof h=="object"?h:{};if(typeof m.type=="string"){const y=typeof m.tagName=="string"?m.tagName:typeof m.name=="string"?m.name:void 0;Object.defineProperty(v,"name",{value:"node ("+(h.type+(y?"<"+y+">":""))+")"})}return v;function v(){let y=bO,x,w,S;if((!e||a(h,d,g[g.length-1]||void 0))&&(y=OU(n(h,g)),y[0]===z_))return y;if("children"in h&&h.children){const k=h;if(k.children&&y[0]!==TU)for(w=(s?k.children.length:-1)+o,S=g.concat(k);w>-1&&w<k.children.length;){const C=k.children[w];if(x=c(C,w,S)(),x[0]===z_)return x;w=typeof x[1]=="number"?x[1]:w+o}}return y}}}function OU(t){return Array.isArray(t)?t:typeof t=="number"?[jU,t]:t==null?bO:[t]}function FS(t,e,n,s){let r,a,o;typeof e=="function"&&typeof n!="function"?(a=void 0,o=e,r=n):(a=e,o=n,r=s),_O(t,a,c,r);function c(h,d){const g=d[d.length-1],m=g?g.children.indexOf(h):void 0;return o(h,m,g)}}const $_={}.hasOwnProperty,RU={};function BU(t,e){const n=e||RU,s=new Map,r=new Map,a=new Map,o={...gU,...n.handlers},c={all:d,applyData:DU,definitionById:s,footnoteById:r,footnoteCounts:a,footnoteOrder:[],handlers:o,one:h,options:n,patch:MU,wrap:IU};return FS(t,function(g){if(g.type==="definition"||g.type==="footnoteDefinition"){const m=g.type==="definition"?s:r,v=String(g.identifier).toUpperCase();m.has(v)||m.set(v,g)}}),c;function h(g,m){const v=g.type,y=c.handlers[v];if($_.call(c.handlers,v)&&y)return y(c,g,m);if(c.options.passThrough&&c.options.passThrough.includes(v)){if("children"in g){const{children:w,...S}=g,k=b0(S);return k.children=c.all(g),k}return b0(g)}return(c.options.unknownHandler||LU)(c,g,m)}function d(g){const m=[];if("children"in g){const v=g.children;let y=-1;for(;++y<v.length;){const x=c.one(v[y],g);if(x){if(y&&v[y-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=TE(x.value)),!Array.isArray(x)&&x.type==="element")){const w=x.children[0];w&&w.type==="text"&&(w.value=TE(w.value))}Array.isArray(x)?m.push(...x):m.push(x)}}}return m}}function MU(t,e){t.position&&(e.position=w$(t))}function DU(t,e){let n=e;if(t&&t.data){const s=t.data.hName,r=t.data.hChildren,a=t.data.hProperties;if(typeof s=="string")if(n.type==="element")n.tagName=s;else{const o="children"in n?n.children:[n];n={type:"element",tagName:s,properties:{},children:o}}n.type==="element"&&a&&Object.assign(n.properties,b0(a)),"children"in n&&n.children&&r!==null&&r!==void 0&&(n.children=r)}return n}function LU(t,e){const n=e.data||{},s="value"in e&&!($_.call(n,"hProperties")||$_.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function IU(t,e){const n=[];let s=-1;for(e&&n.push({type:"text",value:`
`});++s<t.length;)s&&n.push({type:"text",value:`
`}),n.push(t[s]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function TE(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function OE(t,e){const n=BU(t,e),s=n.one(t,void 0),r=SU(n),a=Array.isArray(s)?{type:"root",children:s}:s||{type:"root",children:[]};return r&&a.children.push({type:"text",value:`
`},r),a}function PU(t,e){return t&&"run"in t?async function(n,s){const r=OE(n,{file:s,...e});await t.run(r,s)}:function(n,s){return OE(n,{file:s,...t||e})}}function RE(t){if(t)throw t}var yb,BE;function zU(){if(BE)return yb;BE=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,s=Object.getOwnPropertyDescriptor,r=function(d){return typeof Array.isArray=="function"?Array.isArray(d):e.call(d)==="[object Array]"},a=function(d){if(!d||e.call(d)!=="[object Object]")return!1;var g=t.call(d,"constructor"),m=d.constructor&&d.constructor.prototype&&t.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!g&&!m)return!1;var v;for(v in d);return typeof v>"u"||t.call(d,v)},o=function(d,g){n&&g.name==="__proto__"?n(d,g.name,{enumerable:!0,configurable:!0,value:g.newValue,writable:!0}):d[g.name]=g.newValue},c=function(d,g){if(g==="__proto__")if(t.call(d,g)){if(s)return s(d,g).value}else return;return d[g]};return yb=function h(){var d,g,m,v,y,x,w=arguments[0],S=1,k=arguments.length,C=!1;for(typeof w=="boolean"&&(C=w,w=arguments[1]||{},S=2),(w==null||typeof w!="object"&&typeof w!="function")&&(w={});S<k;++S)if(d=arguments[S],d!=null)for(g in d)m=c(w,g),v=c(d,g),w!==v&&(C&&v&&(a(v)||(y=r(v)))?(y?(y=!1,x=m&&r(m)?m:[]):x=m&&a(m)?m:{},o(w,{name:g,newValue:h(C,x,v)})):typeof v<"u"&&o(w,{name:g,newValue:v}));return w},yb}var $U=zU();const vb=eS($U);function H_(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function HU(){const t=[],e={run:n,use:s};return e;function n(...r){let a=-1;const o=r.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);c(null,...r);function c(h,...d){const g=t[++a];let m=-1;if(h){o(h);return}for(;++m<r.length;)(d[m]===null||d[m]===void 0)&&(d[m]=r[m]);r=d,g?UU(g,c)(...d):o(null,...d)}}function s(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return t.push(r),e}}function UU(t,e){let n;return s;function s(...o){const c=t.length>o.length;let h;c&&o.push(r);try{h=t.apply(this,o)}catch(d){const g=d;if(c&&n)throw g;return r(g)}c||(h&&h.then&&typeof h.then=="function"?h.then(a,r):h instanceof Error?r(h):a(h))}function r(o,...c){n||(n=!0,e(o,...c))}function a(o){r(null,o)}}const li={basename:VU,dirname:FU,extname:qU,join:KU,sep:"/"};function VU(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');yf(t);let n=0,s=-1,r=t.length,a;if(e===void 0||e.length===0||e.length>t.length){for(;r--;)if(t.codePointAt(r)===47){if(a){n=r+1;break}}else s<0&&(a=!0,s=r+1);return s<0?"":t.slice(n,s)}if(e===t)return"";let o=-1,c=e.length-1;for(;r--;)if(t.codePointAt(r)===47){if(a){n=r+1;break}}else o<0&&(a=!0,o=r+1),c>-1&&(t.codePointAt(r)===e.codePointAt(c--)?c<0&&(s=r):(c=-1,s=o));return n===s?s=o:s<0&&(s=t.length),t.slice(n,s)}function FU(t){if(yf(t),t.length===0)return".";let e=-1,n=t.length,s;for(;--n;)if(t.codePointAt(n)===47){if(s){e=n;break}}else s||(s=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function qU(t){yf(t);let e=t.length,n=-1,s=0,r=-1,a=0,o;for(;e--;){const c=t.codePointAt(e);if(c===47){if(o){s=e+1;break}continue}n<0&&(o=!0,n=e+1),c===46?r<0?r=e:a!==1&&(a=1):r>-1&&(a=-1)}return r<0||n<0||a===0||a===1&&r===n-1&&r===s+1?"":t.slice(r,n)}function KU(...t){let e=-1,n;for(;++e<t.length;)yf(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":WU(n)}function WU(t){yf(t);const e=t.codePointAt(0)===47;let n=GU(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function GU(t,e){let n="",s=0,r=-1,a=0,o=-1,c,h;for(;++o<=t.length;){if(o<t.length)c=t.codePointAt(o);else{if(c===47)break;c=47}if(c===47){if(!(r===o-1||a===1))if(r!==o-1&&a===2){if(n.length<2||s!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(h=n.lastIndexOf("/"),h!==n.length-1){h<0?(n="",s=0):(n=n.slice(0,h),s=n.length-1-n.lastIndexOf("/")),r=o,a=0;continue}}else if(n.length>0){n="",s=0,r=o,a=0;continue}}e&&(n=n.length>0?n+"/..":"..",s=2)}else n.length>0?n+="/"+t.slice(r+1,o):n=t.slice(r+1,o),s=o-r-1;r=o,a=0}else c===46&&a>-1?a++:a=-1}return n}function yf(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const YU={cwd:XU};function XU(){return"/"}function U_(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function JU(t){if(typeof t=="string")t=new URL(t);else if(!U_(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return QU(t)}function QU(t){if(t.hostname!==""){const s=new TypeError('File URL host must be "localhost" or empty on darwin');throw s.code="ERR_INVALID_FILE_URL_HOST",s}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const s=e.codePointAt(n+2);if(s===70||s===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const bb=["history","path","basename","stem","extname","dirname"];class xO{constructor(e){let n;e?U_(e)?n={path:e}:typeof e=="string"||ZU(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":YU.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let s=-1;for(;++s<bb.length;){const a=bb[s];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let r;for(r in n)bb.includes(r)||(this[r]=n[r])}get basename(){return typeof this.path=="string"?li.basename(this.path):void 0}set basename(e){xb(e,"basename"),_b(e,"basename"),this.path=li.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?li.dirname(this.path):void 0}set dirname(e){ME(this.basename,"dirname"),this.path=li.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?li.extname(this.path):void 0}set extname(e){if(_b(e,"extname"),ME(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=li.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){U_(e)&&(e=JU(e)),xb(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?li.basename(this.path,this.extname):void 0}set stem(e){xb(e,"stem"),_b(e,"stem"),this.path=li.join(this.dirname||"",e+(this.extname||""))}fail(e,n,s){const r=this.message(e,n,s);throw r.fatal=!0,r}info(e,n,s){const r=this.message(e,n,s);return r.fatal=void 0,r}message(e,n,s){const r=new ps(e,n,s);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function _b(t,e){if(t&&t.includes(li.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+li.sep+"`")}function xb(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function ME(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function ZU(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const eV=(function(t){const s=this.constructor.prototype,r=s[t],a=function(){return r.apply(a,arguments)};return Object.setPrototypeOf(a,s),a}),tV={}.hasOwnProperty;class qS extends eV{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=HU()}copy(){const e=new qS;let n=-1;for(;++n<this.attachers.length;){const s=this.attachers[n];e.use(...s)}return e.data(vb(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(kb("data",this.frozen),this.namespace[e]=n,this):tV.call(this.namespace,e)&&this.namespace[e]||void 0:e?(kb("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...s]=this.attachers[this.freezeIndex];if(s[0]===!1)continue;s[0]===!0&&(s[0]=void 0);const r=n.call(e,...s);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=um(e),s=this.parser||this.Parser;return wb("parse",s),s(String(n),n)}process(e,n){const s=this;return this.freeze(),wb("process",this.parser||this.Parser),Sb("process",this.compiler||this.Compiler),n?r(void 0,n):new Promise(r);function r(a,o){const c=um(e),h=s.parse(c);s.run(h,c,function(g,m,v){if(g||!m||!v)return d(g);const y=m,x=s.stringify(y,v);rV(x)?v.value=x:v.result=x,d(g,v)});function d(g,m){g||!m?o(g):a?a(m):n(void 0,m)}}}processSync(e){let n=!1,s;return this.freeze(),wb("processSync",this.parser||this.Parser),Sb("processSync",this.compiler||this.Compiler),this.process(e,r),LE("processSync","process",n),s;function r(a,o){n=!0,RE(a),s=o}}run(e,n,s){DE(e),this.freeze();const r=this.transformers;return!s&&typeof n=="function"&&(s=n,n=void 0),s?a(void 0,s):new Promise(a);function a(o,c){const h=um(n);r.run(e,h,d);function d(g,m,v){const y=m||e;g?c(g):o?o(y):s(void 0,y,v)}}}runSync(e,n){let s=!1,r;return this.run(e,n,a),LE("runSync","run",s),r;function a(o,c){RE(o),r=c,s=!0}}stringify(e,n){this.freeze();const s=um(n),r=this.compiler||this.Compiler;return Sb("stringify",r),DE(e),r(e,s)}use(e,...n){const s=this.attachers,r=this.namespace;if(kb("use",this.frozen),e!=null)if(typeof e=="function")h(e,n);else if(typeof e=="object")Array.isArray(e)?c(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(d){if(typeof d=="function")h(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[g,...m]=d;h(g,m)}else o(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function o(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(d.plugins),d.settings&&(r.settings=vb(!0,r.settings,d.settings))}function c(d){let g=-1;if(d!=null)if(Array.isArray(d))for(;++g<d.length;){const m=d[g];a(m)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function h(d,g){let m=-1,v=-1;for(;++m<s.length;)if(s[m][0]===d){v=m;break}if(v===-1)s.push([d,...g]);else if(g.length>0){let[y,...x]=g;const w=s[v][1];H_(w)&&H_(y)&&(y=vb(!0,w,y)),s[v]=[d,y,...x]}}}}const nV=new qS().freeze();function wb(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Sb(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function kb(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function DE(t){if(!H_(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function LE(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function um(t){return sV(t)?t:new xO(t)}function sV(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function rV(t){return typeof t=="string"||iV(t)}function iV(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const aV="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",IE=[],PE={allowDangerousHtml:!0},lV=/^(https?|ircs?|mailto|xmpp)$/i,oV=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function cV(t){const e=uV(t),n=hV(t);return dV(e.runSync(e.parse(n),n),t)}function uV(t){const e=t.rehypePlugins||IE,n=t.remarkPlugins||IE,s=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...PE}:PE;return nV().use(FH).use(n).use(PU,s).use(e)}function hV(t){const e=t.children||"",n=new xO;return typeof e=="string"&&(n.value=e),n}function dV(t,e){const n=e.allowedElements,s=e.allowElement,r=e.components,a=e.disallowedElements,o=e.skipHtml,c=e.unwrapDisallowed,h=e.urlTransform||fV;for(const g of oV)Object.hasOwn(e,g.from)&&(""+g.from+(g.to?"use `"+g.to+"` instead":"remove it")+aV+g.id,void 0);return FS(t,d),E$(t,{Fragment:f.Fragment,components:r,ignoreInvalidStyle:!0,jsx:f.jsx,jsxs:f.jsxs,passKeys:!0,passNode:!0});function d(g,m,v){if(g.type==="raw"&&v&&typeof m=="number")return o?v.children.splice(m,1):v.children[m]={type:"text",value:g.value},m;if(g.type==="element"){let y;for(y in pb)if(Object.hasOwn(pb,y)&&Object.hasOwn(g.properties,y)){const x=g.properties[y],w=pb[y];(w===null||w.includes(g.tagName))&&(g.properties[y]=h(String(x||""),y,g))}}if(g.type==="element"){let y=n?!n.includes(g.tagName):a?a.includes(g.tagName):!1;if(!y&&s&&typeof m=="number"&&(y=!s(g,m,v)),y&&v&&typeof m=="number")return c&&g.children?v.children.splice(m,1,...g.children):v.children.splice(m,1),m}}}function fV(t){const e=t.indexOf(":"),n=t.indexOf("?"),s=t.indexOf("#"),r=t.indexOf("/");return e===-1||r!==-1&&e>r||n!==-1&&e>n||s!==-1&&e>s||lV.test(t.slice(0,e))?t:""}function zE(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let s=0,r=n.indexOf(e);for(;r!==-1;)s++,r=n.indexOf(e,r+e.length);return s}function pV(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function wO(t,e,n){const r=jg((n||{}).ignore||[]),a=mV(e);let o=-1;for(;++o<a.length;)_O(t,"text",c);function c(d,g){let m=-1,v;for(;++m<g.length;){const y=g[m],x=v?v.children:void 0;if(r(y,x?x.indexOf(y):void 0,v))return;v=y}if(v)return h(d,g)}function h(d,g){const m=g[g.length-1],v=a[o][0],y=a[o][1];let x=0;const S=m.children.indexOf(d);let k=!1,C=[];v.lastIndex=0;let A=v.exec(d.value);for(;A;){const B=A.index,M={index:A.index,input:A.input,stack:[...g,d]};let T=y(...A,M);if(typeof T=="string"&&(T=T.length>0?{type:"text",value:T}:void 0),T===!1?v.lastIndex=B+1:(x!==B&&C.push({type:"text",value:d.value.slice(x,B)}),Array.isArray(T)?C.push(...T):T&&C.push(T),x=B+A[0].length,k=!0),!v.global)break;A=v.exec(d.value)}return k?(x<d.value.length&&C.push({type:"text",value:d.value.slice(x)}),m.children.splice(S,1,...C)):C=[d],S+C.length}}function mV(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let s=-1;for(;++s<n.length;){const r=n[s];e.push([gV(r[0]),yV(r[1])])}return e}function gV(t){return typeof t=="string"?new RegExp(pV(t),"g"):t}function yV(t){return typeof t=="function"?t:function(){return t}}const Cb="phrasing",Nb=["autolink","link","image","label"];function vV(){return{transforms:[CV],enter:{literalAutolink:_V,literalAutolinkEmail:Eb,literalAutolinkHttp:Eb,literalAutolinkWww:Eb},exit:{literalAutolink:kV,literalAutolinkEmail:SV,literalAutolinkHttp:xV,literalAutolinkWww:wV}}}function bV(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Cb,notInConstruct:Nb},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Cb,notInConstruct:Nb},{character:":",before:"[ps]",after:"\\/",inConstruct:Cb,notInConstruct:Nb}]}}function _V(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Eb(t){this.config.enter.autolinkProtocol.call(this,t)}function xV(t){this.config.exit.autolinkProtocol.call(this,t)}function wV(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function SV(t){this.config.exit.autolinkEmail.call(this,t)}function kV(t){this.exit(t)}function CV(t){wO(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,NV],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),EV]],{ignore:["link","linkReference"]})}function NV(t,e,n,s,r){let a="";if(!SO(r)||(/^w/i.test(e)&&(n=e+n,e="",a="http://"),!AV(n)))return!1;const o=jV(n+s);if(!o[0])return!1;const c={type:"link",title:null,url:a+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[c,{type:"text",value:o[1]}]:c}function EV(t,e,n,s){return!SO(s,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function AV(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function jV(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],s=n.indexOf(")");const r=zE(t,"(");let a=zE(t,")");for(;s!==-1&&r>a;)t+=n.slice(0,s+1),n=n.slice(s+1),s=n.indexOf(")"),a++;return[t,n]}function SO(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Ql(n)||Ng(n))&&(!e||n!==47)}kO.peek=PV;function TV(){this.buffer()}function OV(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function RV(){this.buffer()}function BV(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function MV(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Wr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function DV(t){this.exit(t)}function LV(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Wr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function IV(t){this.exit(t)}function PV(){return"["}function kO(t,e,n,s){const r=n.createTracker(s);let a=r.move("[^");const o=n.enter("footnoteReference"),c=n.enter("reference");return a+=r.move(n.safe(n.associationId(t),{after:"]",before:a})),c(),o(),a+=r.move("]"),a}function zV(){return{enter:{gfmFootnoteCallString:TV,gfmFootnoteCall:OV,gfmFootnoteDefinitionLabelString:RV,gfmFootnoteDefinition:BV},exit:{gfmFootnoteCallString:MV,gfmFootnoteCall:DV,gfmFootnoteDefinitionLabelString:LV,gfmFootnoteDefinition:IV}}}function $V(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:kO},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(s,r,a,o){const c=a.createTracker(o);let h=c.move("[^");const d=a.enter("footnoteDefinition"),g=a.enter("label");return h+=c.move(a.safe(a.associationId(s),{before:h,after:"]"})),g(),h+=c.move("]:"),s.children&&s.children.length>0&&(c.shift(4),h+=c.move((e?`
`:" ")+a.indentLines(a.containerFlow(s,c.current()),e?CO:HV))),d(),h}}function HV(t,e,n){return e===0?t:CO(t,e,n)}function CO(t,e,n){return(n?"":"    ")+t}const UV=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];NO.peek=WV;function VV(){return{canContainEols:["delete"],enter:{strikethrough:qV},exit:{strikethrough:KV}}}function FV(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:UV}],handlers:{delete:NO}}}function qV(t){this.enter({type:"delete",children:[]},t)}function KV(t){this.exit(t)}function NO(t,e,n,s){const r=n.createTracker(s),a=n.enter("strikethrough");let o=r.move("~~");return o+=n.containerPhrasing(t,{...r.current(),before:o,after:"~"}),o+=r.move("~~"),a(),o}function WV(){return"~"}function GV(t){return t.length}function YV(t,e){const n=e||{},s=(n.align||[]).concat(),r=n.stringLength||GV,a=[],o=[],c=[],h=[];let d=0,g=-1;for(;++g<t.length;){const w=[],S=[];let k=-1;for(t[g].length>d&&(d=t[g].length);++k<t[g].length;){const C=XV(t[g][k]);if(n.alignDelimiters!==!1){const A=r(C);S[k]=A,(h[k]===void 0||A>h[k])&&(h[k]=A)}w.push(C)}o[g]=w,c[g]=S}let m=-1;if(typeof s=="object"&&"length"in s)for(;++m<d;)a[m]=$E(s[m]);else{const w=$E(s);for(;++m<d;)a[m]=w}m=-1;const v=[],y=[];for(;++m<d;){const w=a[m];let S="",k="";w===99?(S=":",k=":"):w===108?S=":":w===114&&(k=":");let C=n.alignDelimiters===!1?1:Math.max(1,h[m]-S.length-k.length);const A=S+"-".repeat(C)+k;n.alignDelimiters!==!1&&(C=S.length+C+k.length,C>h[m]&&(h[m]=C),y[m]=C),v[m]=A}o.splice(1,0,v),c.splice(1,0,y),g=-1;const x=[];for(;++g<o.length;){const w=o[g],S=c[g];m=-1;const k=[];for(;++m<d;){const C=w[m]||"";let A="",B="";if(n.alignDelimiters!==!1){const M=h[m]-(S[m]||0),T=a[m];T===114?A=" ".repeat(M):T===99?M%2?(A=" ".repeat(M/2+.5),B=" ".repeat(M/2-.5)):(A=" ".repeat(M/2),B=A):B=" ".repeat(M)}n.delimiterStart!==!1&&!m&&k.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&C==="")&&(n.delimiterStart!==!1||m)&&k.push(" "),n.alignDelimiters!==!1&&k.push(A),k.push(C),n.alignDelimiters!==!1&&k.push(B),n.padding!==!1&&k.push(" "),(n.delimiterEnd!==!1||m!==d-1)&&k.push("|")}x.push(n.delimiterEnd===!1?k.join("").replace(/ +$/,""):k.join(""))}return x.join(`
`)}function XV(t){return t==null?"":String(t)}function $E(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function JV(t,e,n,s){const r=n.enter("blockquote"),a=n.createTracker(s);a.move("> "),a.shift(2);const o=n.indentLines(n.containerFlow(t,a.current()),QV);return r(),o}function QV(t,e,n){return">"+(n?"":" ")+t}function ZV(t,e){return HE(t,e.inConstruct,!0)&&!HE(t,e.notInConstruct,!1)}function HE(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let s=-1;for(;++s<e.length;)if(t.includes(e[s]))return!0;return!1}function UE(t,e,n,s){let r=-1;for(;++r<n.unsafe.length;)if(n.unsafe[r].character===`
`&&ZV(n.stack,n.unsafe[r]))return/[ \t]/.test(s.before)?"":" ";return`\\
`}function eF(t,e){const n=String(t);let s=n.indexOf(e),r=s,a=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;s!==-1;)s===r?++a>o&&(o=a):a=1,r=s+e.length,s=n.indexOf(e,r);return o}function tF(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function nF(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function sF(t,e,n,s){const r=nF(n),a=t.value||"",o=r==="`"?"GraveAccent":"Tilde";if(tF(t,n)){const m=n.enter("codeIndented"),v=n.indentLines(a,rF);return m(),v}const c=n.createTracker(s),h=r.repeat(Math.max(eF(a,r)+1,3)),d=n.enter("codeFenced");let g=c.move(h);if(t.lang){const m=n.enter(`codeFencedLang${o}`);g+=c.move(n.safe(t.lang,{before:g,after:" ",encode:["`"],...c.current()})),m()}if(t.lang&&t.meta){const m=n.enter(`codeFencedMeta${o}`);g+=c.move(" "),g+=c.move(n.safe(t.meta,{before:g,after:`
`,encode:["`"],...c.current()})),m()}return g+=c.move(`
`),a&&(g+=c.move(a+`
`)),g+=c.move(h),d(),g}function rF(t,e,n){return(n?"":"    ")+t}function KS(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function iF(t,e,n,s){const r=KS(n),a=r==='"'?"Quote":"Apostrophe",o=n.enter("definition");let c=n.enter("label");const h=n.createTracker(s);let d=h.move("[");return d+=h.move(n.safe(n.associationId(t),{before:d,after:"]",...h.current()})),d+=h.move("]: "),c(),!t.url||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),d+=h.move("<"),d+=h.move(n.safe(t.url,{before:d,after:">",...h.current()})),d+=h.move(">")):(c=n.enter("destinationRaw"),d+=h.move(n.safe(t.url,{before:d,after:t.title?" ":`
`,...h.current()}))),c(),t.title&&(c=n.enter(`title${a}`),d+=h.move(" "+r),d+=h.move(n.safe(t.title,{before:d,after:r,...h.current()})),d+=h.move(r),c()),o(),d}function aF(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Fd(t){return"&#x"+t.toString(16).toUpperCase()+";"}function _0(t,e,n){const s=Hc(t),r=Hc(e);return s===void 0?r===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:s===1?r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}EO.peek=lF;function EO(t,e,n,s){const r=aF(n),a=n.enter("emphasis"),o=n.createTracker(s),c=o.move(r);let h=o.move(n.containerPhrasing(t,{after:r,before:c,...o.current()}));const d=h.charCodeAt(0),g=_0(s.before.charCodeAt(s.before.length-1),d,r);g.inside&&(h=Fd(d)+h.slice(1));const m=h.charCodeAt(h.length-1),v=_0(s.after.charCodeAt(0),m,r);v.inside&&(h=h.slice(0,-1)+Fd(m));const y=o.move(r);return a(),n.attentionEncodeSurroundingInfo={after:v.outside,before:g.outside},c+h+y}function lF(t,e,n){return n.options.emphasis||"*"}function oF(t,e){let n=!1;return FS(t,function(s){if("value"in s&&/\r?\n|\r/.test(s.value)||s.type==="break")return n=!0,z_}),!!((!t.depth||t.depth<3)&&IS(t)&&(e.options.setext||n))}function cF(t,e,n,s){const r=Math.max(Math.min(6,t.depth||1),1),a=n.createTracker(s);if(oF(t,n)){const g=n.enter("headingSetext"),m=n.enter("phrasing"),v=n.containerPhrasing(t,{...a.current(),before:`
`,after:`
`});return m(),g(),v+`
`+(r===1?"=":"-").repeat(v.length-(Math.max(v.lastIndexOf("\r"),v.lastIndexOf(`
`))+1))}const o="#".repeat(r),c=n.enter("headingAtx"),h=n.enter("phrasing");a.move(o+" ");let d=n.containerPhrasing(t,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(d)&&(d=Fd(d.charCodeAt(0))+d.slice(1)),d=d?o+" "+d:o,n.options.closeAtx&&(d+=" "+o),h(),c(),d}AO.peek=uF;function AO(t){return t.value||""}function uF(){return"<"}jO.peek=hF;function jO(t,e,n,s){const r=KS(n),a=r==='"'?"Quote":"Apostrophe",o=n.enter("image");let c=n.enter("label");const h=n.createTracker(s);let d=h.move("![");return d+=h.move(n.safe(t.alt,{before:d,after:"]",...h.current()})),d+=h.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),d+=h.move("<"),d+=h.move(n.safe(t.url,{before:d,after:">",...h.current()})),d+=h.move(">")):(c=n.enter("destinationRaw"),d+=h.move(n.safe(t.url,{before:d,after:t.title?" ":")",...h.current()}))),c(),t.title&&(c=n.enter(`title${a}`),d+=h.move(" "+r),d+=h.move(n.safe(t.title,{before:d,after:r,...h.current()})),d+=h.move(r),c()),d+=h.move(")"),o(),d}function hF(){return"!"}TO.peek=dF;function TO(t,e,n,s){const r=t.referenceType,a=n.enter("imageReference");let o=n.enter("label");const c=n.createTracker(s);let h=c.move("![");const d=n.safe(t.alt,{before:h,after:"]",...c.current()});h+=c.move(d+"]["),o();const g=n.stack;n.stack=[],o=n.enter("reference");const m=n.safe(n.associationId(t),{before:h,after:"]",...c.current()});return o(),n.stack=g,a(),r==="full"||!d||d!==m?h+=c.move(m+"]"):r==="shortcut"?h=h.slice(0,-1):h+=c.move("]"),h}function dF(){return"!"}OO.peek=fF;function OO(t,e,n){let s=t.value||"",r="`",a=-1;for(;new RegExp("(^|[^`])"+r+"([^`]|$)").test(s);)r+="`";for(/[^ \r\n]/.test(s)&&(/^[ \r\n]/.test(s)&&/[ \r\n]$/.test(s)||/^`|`$/.test(s))&&(s=" "+s+" ");++a<n.unsafe.length;){const o=n.unsafe[a],c=n.compilePattern(o);let h;if(o.atBreak)for(;h=c.exec(s);){let d=h.index;s.charCodeAt(d)===10&&s.charCodeAt(d-1)===13&&d--,s=s.slice(0,d)+" "+s.slice(h.index+1)}}return r+s+r}function fF(){return"`"}function RO(t,e){const n=IS(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}BO.peek=pF;function BO(t,e,n,s){const r=KS(n),a=r==='"'?"Quote":"Apostrophe",o=n.createTracker(s);let c,h;if(RO(t,n)){const g=n.stack;n.stack=[],c=n.enter("autolink");let m=o.move("<");return m+=o.move(n.containerPhrasing(t,{before:m,after:">",...o.current()})),m+=o.move(">"),c(),n.stack=g,m}c=n.enter("link"),h=n.enter("label");let d=o.move("[");return d+=o.move(n.containerPhrasing(t,{before:d,after:"](",...o.current()})),d+=o.move("]("),h(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(h=n.enter("destinationLiteral"),d+=o.move("<"),d+=o.move(n.safe(t.url,{before:d,after:">",...o.current()})),d+=o.move(">")):(h=n.enter("destinationRaw"),d+=o.move(n.safe(t.url,{before:d,after:t.title?" ":")",...o.current()}))),h(),t.title&&(h=n.enter(`title${a}`),d+=o.move(" "+r),d+=o.move(n.safe(t.title,{before:d,after:r,...o.current()})),d+=o.move(r),h()),d+=o.move(")"),c(),d}function pF(t,e,n){return RO(t,n)?"<":"["}MO.peek=mF;function MO(t,e,n,s){const r=t.referenceType,a=n.enter("linkReference");let o=n.enter("label");const c=n.createTracker(s);let h=c.move("[");const d=n.containerPhrasing(t,{before:h,after:"]",...c.current()});h+=c.move(d+"]["),o();const g=n.stack;n.stack=[],o=n.enter("reference");const m=n.safe(n.associationId(t),{before:h,after:"]",...c.current()});return o(),n.stack=g,a(),r==="full"||!d||d!==m?h+=c.move(m+"]"):r==="shortcut"?h=h.slice(0,-1):h+=c.move("]"),h}function mF(){return"["}function WS(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function gF(t){const e=WS(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function yF(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function DO(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function vF(t,e,n,s){const r=n.enter("list"),a=n.bulletCurrent;let o=t.ordered?yF(n):WS(n);const c=t.ordered?o==="."?")":".":gF(n);let h=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const g=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&g&&(!g.children||!g.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(h=!0),DO(n)===o&&g){let m=-1;for(;++m<t.children.length;){const v=t.children[m];if(v&&v.type==="listItem"&&v.children&&v.children[0]&&v.children[0].type==="thematicBreak"){h=!0;break}}}}h&&(o=c),n.bulletCurrent=o;const d=n.containerFlow(t,s);return n.bulletLastUsed=o,n.bulletCurrent=a,r(),d}function bF(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function _F(t,e,n,s){const r=bF(n);let a=n.bulletCurrent||WS(n);e&&e.type==="list"&&e.ordered&&(a=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+a);let o=a.length+1;(r==="tab"||r==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const c=n.createTracker(s);c.move(a+" ".repeat(o-a.length)),c.shift(o);const h=n.enter("listItem"),d=n.indentLines(n.containerFlow(t,c.current()),g);return h(),d;function g(m,v,y){return v?(y?"":" ".repeat(o))+m:(y?a:a+" ".repeat(o-a.length))+m}}function xF(t,e,n,s){const r=n.enter("paragraph"),a=n.enter("phrasing"),o=n.containerPhrasing(t,s);return a(),r(),o}const wF=jg(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function SF(t,e,n,s){return(t.children.some(function(o){return wF(o)})?n.containerPhrasing:n.containerFlow).call(n,t,s)}function kF(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}LO.peek=CF;function LO(t,e,n,s){const r=kF(n),a=n.enter("strong"),o=n.createTracker(s),c=o.move(r+r);let h=o.move(n.containerPhrasing(t,{after:r,before:c,...o.current()}));const d=h.charCodeAt(0),g=_0(s.before.charCodeAt(s.before.length-1),d,r);g.inside&&(h=Fd(d)+h.slice(1));const m=h.charCodeAt(h.length-1),v=_0(s.after.charCodeAt(0),m,r);v.inside&&(h=h.slice(0,-1)+Fd(m));const y=o.move(r+r);return a(),n.attentionEncodeSurroundingInfo={after:v.outside,before:g.outside},c+h+y}function CF(t,e,n){return n.options.strong||"*"}function NF(t,e,n,s){return n.safe(t.value,s)}function EF(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function AF(t,e,n){const s=(DO(n)+(n.options.ruleSpaces?" ":"")).repeat(EF(n));return n.options.ruleSpaces?s.slice(0,-1):s}const IO={blockquote:JV,break:UE,code:sF,definition:iF,emphasis:EO,hardBreak:UE,heading:cF,html:AO,image:jO,imageReference:TO,inlineCode:OO,link:BO,linkReference:MO,list:vF,listItem:_F,paragraph:xF,root:SF,strong:LO,text:NF,thematicBreak:AF};function jF(){return{enter:{table:TF,tableData:VE,tableHeader:VE,tableRow:RF},exit:{codeText:BF,table:OF,tableData:Ab,tableHeader:Ab,tableRow:Ab}}}function TF(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function OF(t){this.exit(t),this.data.inTable=void 0}function RF(t){this.enter({type:"tableRow",children:[]},t)}function Ab(t){this.exit(t)}function VE(t){this.enter({type:"tableCell",children:[]},t)}function BF(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,MF));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function MF(t,e){return e==="|"?e:t}function DF(t){const e=t||{},n=e.tableCellPadding,s=e.tablePipeAlign,r=e.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:v,table:o,tableCell:h,tableRow:c}};function o(y,x,w,S){return d(g(y,w,S),y.align)}function c(y,x,w,S){const k=m(y,w,S),C=d([k]);return C.slice(0,C.indexOf(`
`))}function h(y,x,w,S){const k=w.enter("tableCell"),C=w.enter("phrasing"),A=w.containerPhrasing(y,{...S,before:a,after:a});return C(),k(),A}function d(y,x){return YV(y,{align:x,alignDelimiters:s,padding:n,stringLength:r})}function g(y,x,w){const S=y.children;let k=-1;const C=[],A=x.enter("table");for(;++k<S.length;)C[k]=m(S[k],x,w);return A(),C}function m(y,x,w){const S=y.children;let k=-1;const C=[],A=x.enter("tableRow");for(;++k<S.length;)C[k]=h(S[k],y,x,w);return A(),C}function v(y,x,w){let S=IO.inlineCode(y,x,w);return w.stack.includes("tableCell")&&(S=S.replace(/\|/g,"\\$&")),S}}function LF(){return{exit:{taskListCheckValueChecked:FE,taskListCheckValueUnchecked:FE,paragraph:PF}}}function IF(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:zF}}}function FE(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function PF(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const s=n.children[0];if(s&&s.type==="text"){const r=e.children;let a=-1,o;for(;++a<r.length;){const c=r[a];if(c.type==="paragraph"){o=c;break}}o===n&&(s.value=s.value.slice(1),s.value.length===0?n.children.shift():n.position&&s.position&&typeof s.position.start.offset=="number"&&(s.position.start.column++,s.position.start.offset++,n.position.start=Object.assign({},s.position.start)))}}this.exit(t)}function zF(t,e,n,s){const r=t.children[0],a=typeof t.checked=="boolean"&&r&&r.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",c=n.createTracker(s);a&&c.move(o);let h=IO.listItem(t,e,n,{...s,...c.current()});return a&&(h=h.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,d)),h;function d(g){return g+o}}function $F(){return[vV(),zV(),VV(),jF(),LF()]}function HF(t){return{extensions:[bV(),$V(t),FV(),DF(t),IF()]}}const UF={tokenize:GF,partial:!0},PO={tokenize:YF,partial:!0},zO={tokenize:XF,partial:!0},$O={tokenize:JF,partial:!0},VF={tokenize:QF,partial:!0},HO={name:"wwwAutolink",tokenize:KF,previous:VO},UO={name:"protocolAutolink",tokenize:WF,previous:FO},la={name:"emailAutolink",tokenize:qF,previous:qO},_i={};function FF(){return{text:_i}}let jl=48;for(;jl<123;)_i[jl]=la,jl++,jl===58?jl=65:jl===91&&(jl=97);_i[43]=la;_i[45]=la;_i[46]=la;_i[95]=la;_i[72]=[la,UO];_i[104]=[la,UO];_i[87]=[la,HO];_i[119]=[la,HO];function qF(t,e,n){const s=this;let r,a;return o;function o(m){return!V_(m)||!qO.call(s,s.previous)||GS(s.events)?n(m):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),c(m))}function c(m){return V_(m)?(t.consume(m),c):m===64?(t.consume(m),h):n(m)}function h(m){return m===46?t.check(VF,g,d)(m):m===45||m===95||hs(m)?(a=!0,t.consume(m),h):g(m)}function d(m){return t.consume(m),r=!0,h}function g(m){return a&&r&&_s(s.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(m)):n(m)}}function KF(t,e,n){const s=this;return r;function r(o){return o!==87&&o!==119||!VO.call(s,s.previous)||GS(s.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(UF,t.attempt(PO,t.attempt(zO,a),n),n)(o))}function a(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function WF(t,e,n){const s=this;let r="",a=!1;return o;function o(m){return(m===72||m===104)&&FO.call(s,s.previous)&&!GS(s.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),r+=String.fromCodePoint(m),t.consume(m),c):n(m)}function c(m){if(_s(m)&&r.length<5)return r+=String.fromCodePoint(m),t.consume(m),c;if(m===58){const v=r.toLowerCase();if(v==="http"||v==="https")return t.consume(m),h}return n(m)}function h(m){return m===47?(t.consume(m),a?d:(a=!0,h)):n(m)}function d(m){return m===null||y0(m)||Kt(m)||Ql(m)||Ng(m)?n(m):t.attempt(PO,t.attempt(zO,g),n)(m)}function g(m){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(m)}}function GF(t,e,n){let s=0;return r;function r(o){return(o===87||o===119)&&s<3?(s++,t.consume(o),r):o===46&&s===3?(t.consume(o),a):n(o)}function a(o){return o===null?n(o):e(o)}}function YF(t,e,n){let s,r,a;return o;function o(d){return d===46||d===95?t.check($O,h,c)(d):d===null||Kt(d)||Ql(d)||d!==45&&Ng(d)?h(d):(a=!0,t.consume(d),o)}function c(d){return d===95?s=!0:(r=s,s=void 0),t.consume(d),o}function h(d){return r||s||!a?n(d):e(d)}}function XF(t,e){let n=0,s=0;return r;function r(o){return o===40?(n++,t.consume(o),r):o===41&&s<n?a(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check($O,e,a)(o):o===null||Kt(o)||Ql(o)?e(o):(t.consume(o),r)}function a(o){return o===41&&s++,t.consume(o),r}}function JF(t,e,n){return s;function s(c){return c===33||c===34||c===39||c===41||c===42||c===44||c===46||c===58||c===59||c===63||c===95||c===126?(t.consume(c),s):c===38?(t.consume(c),a):c===93?(t.consume(c),r):c===60||c===null||Kt(c)||Ql(c)?e(c):n(c)}function r(c){return c===null||c===40||c===91||Kt(c)||Ql(c)?e(c):s(c)}function a(c){return _s(c)?o(c):n(c)}function o(c){return c===59?(t.consume(c),s):_s(c)?(t.consume(c),o):n(c)}}function QF(t,e,n){return s;function s(a){return t.consume(a),r}function r(a){return hs(a)?n(a):e(a)}}function VO(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||Kt(t)}function FO(t){return!_s(t)}function qO(t){return!(t===47||V_(t))}function V_(t){return t===43||t===45||t===46||t===95||hs(t)}function GS(t){let e=t.length,n=!1;for(;e--;){const s=t[e][1];if((s.type==="labelLink"||s.type==="labelImage")&&!s._balanced){n=!0;break}if(s._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const ZF={tokenize:lq,partial:!0};function eq(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:rq,continuation:{tokenize:iq},exit:aq}},text:{91:{name:"gfmFootnoteCall",tokenize:sq},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:tq,resolveTo:nq}}}}function tq(t,e,n){const s=this;let r=s.events.length;const a=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let o;for(;r--;){const h=s.events[r][1];if(h.type==="labelImage"){o=h;break}if(h.type==="gfmFootnoteCall"||h.type==="labelLink"||h.type==="label"||h.type==="image"||h.type==="link")break}return c;function c(h){if(!o||!o._balanced)return n(h);const d=Wr(s.sliceSerialize({start:o.end,end:s.now()}));return d.codePointAt(0)!==94||!a.includes(d.slice(1))?n(h):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),e(h))}}function nq(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const s={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},r={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};r.end.column++,r.end.offset++,r.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},r.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},c=[t[n+1],t[n+2],["enter",s,e],t[n+3],t[n+4],["enter",r,e],["exit",r,e],["enter",a,e],["enter",o,e],["exit",o,e],["exit",a,e],t[t.length-2],t[t.length-1],["exit",s,e]];return t.splice(n,t.length-n+1,...c),t}function sq(t,e,n){const s=this,r=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let a=0,o;return c;function c(m){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(m),t.exit("gfmFootnoteCallLabelMarker"),h}function h(m){return m!==94?n(m):(t.enter("gfmFootnoteCallMarker"),t.consume(m),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",d)}function d(m){if(a>999||m===93&&!o||m===null||m===91||Kt(m))return n(m);if(m===93){t.exit("chunkString");const v=t.exit("gfmFootnoteCallString");return r.includes(Wr(s.sliceSerialize(v)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(m),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(m)}return Kt(m)||(o=!0),a++,t.consume(m),m===92?g:d}function g(m){return m===91||m===92||m===93?(t.consume(m),a++,d):d(m)}}function rq(t,e,n){const s=this,r=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let a,o=0,c;return h;function h(x){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionLabelMarker"),d}function d(x){return x===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",g):n(x)}function g(x){if(o>999||x===93&&!c||x===null||x===91||Kt(x))return n(x);if(x===93){t.exit("chunkString");const w=t.exit("gfmFootnoteDefinitionLabelString");return a=Wr(s.sliceSerialize(w)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),v}return Kt(x)||(c=!0),o++,t.consume(x),x===92?m:g}function m(x){return x===91||x===92||x===93?(t.consume(x),o++,g):g(x)}function v(x){return x===58?(t.enter("definitionMarker"),t.consume(x),t.exit("definitionMarker"),r.includes(a)||r.push(a),Et(t,y,"gfmFootnoteDefinitionWhitespace")):n(x)}function y(x){return e(x)}}function iq(t,e,n){return t.check(gf,e,t.attempt(ZF,e,n))}function aq(t){t.exit("gfmFootnoteDefinition")}function lq(t,e,n){const s=this;return Et(t,r,"gfmFootnoteDefinitionIndent",5);function r(a){const o=s.events[s.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(a):n(a)}}function oq(t){let n=(t||{}).singleTilde;const s={name:"strikethrough",tokenize:a,resolveAll:r};return n==null&&(n=!0),{text:{126:s},insideSpan:{null:[s]},attentionMarkers:{null:[126]}};function r(o,c){let h=-1;for(;++h<o.length;)if(o[h][0]==="enter"&&o[h][1].type==="strikethroughSequenceTemporary"&&o[h][1]._close){let d=h;for(;d--;)if(o[d][0]==="exit"&&o[d][1].type==="strikethroughSequenceTemporary"&&o[d][1]._open&&o[h][1].end.offset-o[h][1].start.offset===o[d][1].end.offset-o[d][1].start.offset){o[h][1].type="strikethroughSequence",o[d][1].type="strikethroughSequence";const g={type:"strikethrough",start:Object.assign({},o[d][1].start),end:Object.assign({},o[h][1].end)},m={type:"strikethroughText",start:Object.assign({},o[d][1].end),end:Object.assign({},o[h][1].start)},v=[["enter",g,c],["enter",o[d][1],c],["exit",o[d][1],c],["enter",m,c]],y=c.parser.constructs.insideSpan.null;y&&hr(v,v.length,0,Eg(y,o.slice(d+1,h),c)),hr(v,v.length,0,[["exit",m,c],["enter",o[h][1],c],["exit",o[h][1],c],["exit",g,c]]),hr(o,d-1,h-d+3,v),h=d+v.length-2;break}}for(h=-1;++h<o.length;)o[h][1].type==="strikethroughSequenceTemporary"&&(o[h][1].type="data");return o}function a(o,c,h){const d=this.previous,g=this.events;let m=0;return v;function v(x){return d===126&&g[g.length-1][1].type!=="characterEscape"?h(x):(o.enter("strikethroughSequenceTemporary"),y(x))}function y(x){const w=Hc(d);if(x===126)return m>1?h(x):(o.consume(x),m++,y);if(m<2&&!n)return h(x);const S=o.exit("strikethroughSequenceTemporary"),k=Hc(x);return S._open=!k||k===2&&!!w,S._close=!w||w===2&&!!k,c(x)}}}class cq{constructor(){this.map=[]}add(e,n,s){uq(this,e,n,s)}consume(e){if(this.map.sort(function(a,o){return a[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const s=[];for(;n>0;)n-=1,s.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];s.push(e.slice()),e.length=0;let r=s.pop();for(;r;){for(const a of r)e.push(a);r=s.pop()}this.map.length=0}}function uq(t,e,n,s){let r=0;if(!(n===0&&s.length===0)){for(;r<t.map.length;){if(t.map[r][0]===e){t.map[r][1]+=n,t.map[r][2].push(...s);return}r+=1}t.map.push([e,n,s])}}function hq(t,e){let n=!1;const s=[];for(;e<t.length;){const r=t[e];if(n){if(r[0]==="enter")r[1].type==="tableContent"&&s.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(r[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const a=s.length-1;s[a]=s[a]==="left"?"center":"right"}}else if(r[1].type==="tableDelimiterRow")break}else r[0]==="enter"&&r[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return s}function dq(){return{flow:{null:{name:"table",tokenize:fq,resolveAll:pq}}}}function fq(t,e,n){const s=this;let r=0,a=0,o;return c;function c(z){let Q=s.events.length-1;for(;Q>-1;){const J=s.events[Q][1].type;if(J==="lineEnding"||J==="linePrefix")Q--;else break}const F=Q>-1?s.events[Q][1].type:null,K=F==="tableHead"||F==="tableRow"?T:h;return K===T&&s.parser.lazy[s.now().line]?n(z):K(z)}function h(z){return t.enter("tableHead"),t.enter("tableRow"),d(z)}function d(z){return z===124||(o=!0,a+=1),g(z)}function g(z){return z===null?n(z):Je(z)?a>1?(a=0,s.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(z),t.exit("lineEnding"),y):n(z):wt(z)?Et(t,g,"whitespace")(z):(a+=1,o&&(o=!1,r+=1),z===124?(t.enter("tableCellDivider"),t.consume(z),t.exit("tableCellDivider"),o=!0,g):(t.enter("data"),m(z)))}function m(z){return z===null||z===124||Kt(z)?(t.exit("data"),g(z)):(t.consume(z),z===92?v:m)}function v(z){return z===92||z===124?(t.consume(z),m):m(z)}function y(z){return s.interrupt=!1,s.parser.lazy[s.now().line]?n(z):(t.enter("tableDelimiterRow"),o=!1,wt(z)?Et(t,x,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(z):x(z))}function x(z){return z===45||z===58?S(z):z===124?(o=!0,t.enter("tableCellDivider"),t.consume(z),t.exit("tableCellDivider"),w):M(z)}function w(z){return wt(z)?Et(t,S,"whitespace")(z):S(z)}function S(z){return z===58?(a+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(z),t.exit("tableDelimiterMarker"),k):z===45?(a+=1,k(z)):z===null||Je(z)?B(z):M(z)}function k(z){return z===45?(t.enter("tableDelimiterFiller"),C(z)):M(z)}function C(z){return z===45?(t.consume(z),C):z===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(z),t.exit("tableDelimiterMarker"),A):(t.exit("tableDelimiterFiller"),A(z))}function A(z){return wt(z)?Et(t,B,"whitespace")(z):B(z)}function B(z){return z===124?x(z):z===null||Je(z)?!o||r!==a?M(z):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(z)):M(z)}function M(z){return n(z)}function T(z){return t.enter("tableRow"),H(z)}function H(z){return z===124?(t.enter("tableCellDivider"),t.consume(z),t.exit("tableCellDivider"),H):z===null||Je(z)?(t.exit("tableRow"),e(z)):wt(z)?Et(t,H,"whitespace")(z):(t.enter("data"),$(z))}function $(z){return z===null||z===124||Kt(z)?(t.exit("data"),H(z)):(t.consume(z),z===92?G:$)}function G(z){return z===92||z===124?(t.consume(z),$):$(z)}}function pq(t,e){let n=-1,s=!0,r=0,a=[0,0,0,0],o=[0,0,0,0],c=!1,h=0,d,g,m;const v=new cq;for(;++n<t.length;){const y=t[n],x=y[1];y[0]==="enter"?x.type==="tableHead"?(c=!1,h!==0&&(qE(v,e,h,d,g),g=void 0,h=0),d={type:"table",start:Object.assign({},x.start),end:Object.assign({},x.end)},v.add(n,0,[["enter",d,e]])):x.type==="tableRow"||x.type==="tableDelimiterRow"?(s=!0,m=void 0,a=[0,0,0,0],o=[0,n+1,0,0],c&&(c=!1,g={type:"tableBody",start:Object.assign({},x.start),end:Object.assign({},x.end)},v.add(n,0,[["enter",g,e]])),r=x.type==="tableDelimiterRow"?2:g?3:1):r&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")?(s=!1,o[2]===0&&(a[1]!==0&&(o[0]=o[1],m=hm(v,e,a,r,void 0,m),a=[0,0,0,0]),o[2]=n)):x.type==="tableCellDivider"&&(s?s=!1:(a[1]!==0&&(o[0]=o[1],m=hm(v,e,a,r,void 0,m)),a=o,o=[a[1],n,0,0])):x.type==="tableHead"?(c=!0,h=n):x.type==="tableRow"||x.type==="tableDelimiterRow"?(h=n,a[1]!==0?(o[0]=o[1],m=hm(v,e,a,r,n,m)):o[1]!==0&&(m=hm(v,e,o,r,n,m)),r=0):r&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")&&(o[3]=n)}for(h!==0&&qE(v,e,h,d,g),v.consume(e.events),n=-1;++n<e.events.length;){const y=e.events[n];y[0]==="enter"&&y[1].type==="table"&&(y[1]._align=hq(e.events,n))}return t}function hm(t,e,n,s,r,a){const o=s===1?"tableHeader":s===2?"tableDelimiter":"tableData",c="tableContent";n[0]!==0&&(a.end=Object.assign({},wc(e.events,n[0])),t.add(n[0],0,[["exit",a,e]]));const h=wc(e.events,n[1]);if(a={type:o,start:Object.assign({},h),end:Object.assign({},h)},t.add(n[1],0,[["enter",a,e]]),n[2]!==0){const d=wc(e.events,n[2]),g=wc(e.events,n[3]),m={type:c,start:Object.assign({},d),end:Object.assign({},g)};if(t.add(n[2],0,[["enter",m,e]]),s!==2){const v=e.events[n[2]],y=e.events[n[3]];if(v[1].end=Object.assign({},y[1].end),v[1].type="chunkText",v[1].contentType="text",n[3]>n[2]+1){const x=n[2]+1,w=n[3]-n[2]-1;t.add(x,w,[])}}t.add(n[3]+1,0,[["exit",m,e]])}return r!==void 0&&(a.end=Object.assign({},wc(e.events,r)),t.add(r,0,[["exit",a,e]]),a=void 0),a}function qE(t,e,n,s,r){const a=[],o=wc(e.events,n);r&&(r.end=Object.assign({},o),a.push(["exit",r,e])),s.end=Object.assign({},o),a.push(["exit",s,e]),t.add(n+1,0,a)}function wc(t,e){const n=t[e],s=n[0]==="enter"?"start":"end";return n[1][s]}const mq={name:"tasklistCheck",tokenize:yq};function gq(){return{text:{91:mq}}}function yq(t,e,n){const s=this;return r;function r(h){return s.previous!==null||!s._gfmTasklistFirstContentOfListItem?n(h):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(h),t.exit("taskListCheckMarker"),a)}function a(h){return Kt(h)?(t.enter("taskListCheckValueUnchecked"),t.consume(h),t.exit("taskListCheckValueUnchecked"),o):h===88||h===120?(t.enter("taskListCheckValueChecked"),t.consume(h),t.exit("taskListCheckValueChecked"),o):n(h)}function o(h){return h===93?(t.enter("taskListCheckMarker"),t.consume(h),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),c):n(h)}function c(h){return Je(h)?e(h):wt(h)?t.check({tokenize:vq},e,n)(h):n(h)}}function vq(t,e,n){return Et(t,s,"whitespace");function s(r){return r===null?n(r):e(r)}}function bq(t){return tO([FF(),eq(),oq(t),dq(),gq()])}const _q={};function xq(t){const e=this,n=t||_q,s=e.data(),r=s.micromarkExtensions||(s.micromarkExtensions=[]),a=s.fromMarkdownExtensions||(s.fromMarkdownExtensions=[]),o=s.toMarkdownExtensions||(s.toMarkdownExtensions=[]);r.push(bq(n)),a.push($F()),o.push(HF(n))}function wq(t){wO(t,[/\r?\n|\r/g,Sq])}function Sq(){return{type:"break"}}function kq(){return function(t){wq(t)}}const Cq={pre:({children:t})=>f.jsx(f.Fragment,{children:t}),li:({children:t,...e})=>f.jsx("li",{className:"py-0.5 ml-0",...e,children:t}),ul:({children:t,...e})=>f.jsx("ul",{className:"list-disc list-outside ml-5 pl-0 my-2",...e,children:t}),ol:({children:t,...e})=>f.jsx("ol",{className:"list-decimal list-outside ml-5 pl-0 my-2",...e,children:t}),strong:({children:t,...e})=>f.jsx("span",{className:"font-semibold",...e,children:t}),a:({children:t,href:e,...n})=>{let s=e||"";return s&&!s.startsWith("http")&&!s.startsWith("#")&&(s=`https://${s}`),f.jsx("a",{className:"text-sky-400 hover:underline",href:s,target:"_blank",rel:"noreferrer noopener",...n,children:t})},h1:({children:t,...e})=>f.jsx("h1",{className:"text-xl font-semibold mt-4 mb-2",...e,children:t}),h2:({children:t,...e})=>f.jsx("h2",{className:"text-lg font-semibold mt-4 mb-2",...e,children:t}),h3:({children:t,...e})=>f.jsx("h3",{className:"text-base font-semibold mt-3 mb-1",...e,children:t}),h4:({children:t,...e})=>f.jsx("h4",{className:"text-sm font-semibold mt-3 mb-1",...e,children:t}),h5:({children:t,...e})=>f.jsx("h5",{className:"text-sm font-semibold mt-2 mb-1",...e,children:t}),h6:({children:t,...e})=>f.jsx("h6",{className:"text-xs font-semibold mt-2 mb-1",...e,children:t}),p:({children:t,...e})=>f.jsx("p",{className:"my-2 leading-relaxed",...e,children:t}),table:({children:t,...e})=>f.jsx("div",{className:"overflow-x-auto my-3",children:f.jsx("table",{className:"w-full border-collapse border border-neutral-600 text-xs",...e,children:t})}),thead:({children:t,...e})=>f.jsx("thead",{className:"bg-neutral-700",...e,children:t}),tbody:({children:t,...e})=>f.jsx("tbody",{...e,children:t}),tr:({children:t,...e})=>f.jsx("tr",{className:"border-b border-neutral-600",...e,children:t}),th:({children:t,...e})=>f.jsx("th",{className:"p-2 text-left font-semibold border-r last:border-r-0 border-neutral-600",...e,children:t}),td:({children:t,...e})=>f.jsx("td",{className:"p-2 border-r last:border-r-0 border-neutral-600",...e,children:t}),blockquote:({children:t,...e})=>f.jsx("blockquote",{className:"border-l-4 border-neutral-500 pl-3 py-1 my-2 italic text-neutral-300",...e,children:t}),hr:({...t})=>f.jsx("hr",{className:"my-4 border-neutral-600",...t}),code({children:t,className:e,...n}){const s=/language-(\w+)/.exec(e||""),r=String(t).replace(/\n$/,""),a=r.includes(`
`);if(!s&&!a)return f.jsx("code",{...n,className:`${e||""} bg-neutral-700 px-1.5 py-0.5 rounded text-xs font-mono text-sky-300`,children:t});const o=s?.[1]||"text";return f.jsxs("div",{className:"my-3",children:[f.jsx("div",{className:"flex items-center justify-between bg-neutral-700 px-3 py-1 rounded-t text-xs text-neutral-400",children:f.jsx("span",{children:o})}),f.jsx("pre",{className:"bg-neutral-800 p-3 rounded-b overflow-x-auto",children:f.jsx("code",{className:"text-xs font-mono text-neutral-200",children:r})})]})}},Nq=[xq,kq],Eq=t=>{const e=He.c(6),{children:n}=t;if(!n)return null;let s=n,r;if(e[0]!==s){s=s.replace(/^(#{1,6}\s+.+)\n```/gm,"$1\n\n```");let o;e[3]===Symbol.for("react.memo_cache_sentinel")?(o=/```\n(#{1,6}\s+)/gm,e[3]=o):o=e[3],r=s.replace(o,"```\n\n$1"),e[0]=s,e[1]=r,e[2]=s}else r=e[1],s=e[2];s=r;let a;return e[4]!==s?(a=f.jsx(cV,{remarkPlugins:Nq,components:Cq,children:s}),e[4]=s,e[5]=a):a=e[5],a},Aq=W.memo(Eq,(t,e)=>t.children===e.children);function jq({isOpen:t,onClose:e,otherPanelOpen:n=!1,environment:s}){const{context:r}=Ir(),[a,o]=W.useState([]),[c,h]=W.useState([]),[d,g]=W.useState(""),[m,v]=W.useState(!1),y=W.useRef(null),x=W.useRef(null);W.useEffect(()=>{y.current?.scrollIntoView({behavior:"smooth"})},[a]),W.useEffect(()=>{t&&x.current?.focus()},[t]);const w=async C=>{if(C.preventDefault(),!d.trim()||m)return;const A={id:Date.now().toString(),role:"user",content:d.trim()},B=(Date.now()+1).toString();o(M=>[...M,A]),g(""),v(!0),o(M=>[...M,{id:B,role:"assistant",content:"",isStreaming:!0}]);try{const{response:M,history:T}=await Qz(A.content,c,{environment:{currentContext:r,...s},model:Hd().ai?.model||"",onStream:(H,$)=>{o(G=>G.map(z=>z.id===B?{...z,content:$}:z))},onToolCall:(H,$)=>{console.log("Tool call:",H,$)}});h(T),o(H=>H.map($=>$.id===B?{...$,content:M.content,isStreaming:!1}:$))}catch(M){console.error("Chat error:",M),o(T=>T.map(H=>H.id===B?{...H,content:"Sorry, I encountered an error. Please try again.",isStreaming:!1}:H))}finally{v(!1)}},S=C=>{C.key==="Enter"&&!C.shiftKey&&(C.preventDefault(),w(C))},k=()=>{o([]),h([])};return f.jsxs("div",{className:`fixed top-0 right-0 h-screen bg-white border-l border-neutral-200 dark:bg-neutral-900 dark:border-neutral-800 flex flex-col transition-all duration-300 ease-in-out z-30 ${t?"opacity-100 translate-x-0":"opacity-0 translate-x-full pointer-events-none"}`,style:{width:n?"28rem":"40rem"},children:[f.jsxs("div",{className:"shrink-0 h-16 px-4 flex items-center justify-between border-b border-neutral-200 dark:border-neutral-800",children:[f.jsx("h3",{className:"font-semibold text-neutral-900 dark:text-neutral-100",children:"AI Assistant"}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:k,className:"p-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded-md transition-colors",title:"Clear chat",children:f.jsx(tP,{size:18})}),f.jsx("button",{onClick:e,className:"p-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded-md transition-colors",children:f.jsx(aS,{size:18})})]})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0",children:[a.map(C=>f.jsx("div",{className:`text-sm ${C.role==="user"?"bg-neutral-100 dark:bg-neutral-800/50 -mx-4 px-4 py-3 border-l-2 border-sky-500":""}`,children:f.jsx("div",{className:C.role==="user"?"text-neutral-900 dark:text-neutral-100":"text-neutral-800 dark:text-neutral-200",children:C.content?C.role==="assistant"?f.jsx(Aq,{children:C.content}):f.jsx("span",{className:"whitespace-pre-wrap",children:C.content}):C.isStreaming&&f.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[f.jsx(Fl,{size:14,className:"animate-spin"}),"Thinking..."]})})},C.id)),f.jsx("div",{ref:y})]}),f.jsx("form",{onSubmit:w,className:"shrink-0 p-4 border-t border-neutral-200 dark:border-neutral-800",children:f.jsxs("div",{className:"flex items-end gap-2",children:[f.jsx("textarea",{ref:x,value:d,onChange:C=>g(C.target.value),onKeyDown:S,placeholder:"Ask about your resources...",rows:1,disabled:m,className:"flex-1 px-4 py-2.5 bg-neutral-50 border border-neutral-300 dark:bg-neutral-800 dark:border-neutral-700 rounded-xl text-neutral-900 dark:text-neutral-100 text-sm placeholder-neutral-500 resize-none focus:outline-none focus:ring-2 focus:ring-sky-600 focus:border-transparent disabled:opacity-50",style:{maxHeight:"120px"}}),f.jsx("button",{type:"submit",disabled:!d.trim()||m,className:"p-2.5 bg-sky-600 hover:bg-sky-500 disabled:bg-neutral-300 dark:disabled:bg-neutral-700 disabled:text-neutral-500 text-white rounded-xl transition-colors",children:m?f.jsx(Fl,{size:18,className:"animate-spin"}):f.jsx(z7,{size:18})})]})})]})}function F_(t){const e=Math.floor((Date.now()-t.getTime())/1e3);if(e<60)return`${e}s ago`;const n=Math.floor(e/60);if(n<60)return`${n}m ago`;const s=Math.floor(n/60);return s<24?`${s}h ago`:`${Math.floor(s/24)}d ago`}function Eh(t){const e=t.match(/^(\d+)(Ki|Mi|Gi|Ti|K|M|G|T)?$/);if(!e)return t;const n=parseInt(e[1],10),s=e[2];return s?s==="Ki"&&n>=1024*1024?`${(n/(1024*1024)).toFixed(1)}Gi`:s==="Ki"&&n>=1024?`${(n/1024).toFixed(1)}Mi`:s==="Mi"&&n>=1024?`${(n/1024).toFixed(1)}Gi`:t:n>=1024*1024*1024?`${(n/(1024*1024*1024)).toFixed(1)}Gi`:n>=1024*1024?`${(n/(1024*1024)).toFixed(1)}Mi`:n>=1024?`${(n/1024).toFixed(1)}Ki`:`${n}B`}function KO(t){switch(t){case"ReadWriteOnce":return"bg-blue-500/20 text-blue-400 border border-blue-500/30";case"ReadOnlyMany":return"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30";case"ReadWriteMany":return"bg-purple-500/20 text-purple-400 border border-purple-500/30";case"ReadWriteOncePod":return"bg-amber-500/20 text-amber-400 border border-amber-500/30";default:return"bg-gray-700 text-gray-300"}}function WO(t){switch(t){case"ReadWriteOnce":return"RWO";case"ReadOnlyMany":return"ROX";case"ReadWriteMany":return"RWX";case"ReadWriteOncePod":return"RWOP";default:return t}}function Tq(t){const e=t.split(" ");if(e.length!==5)return t;const[n,s,r,a,o]=e;if(t==="* * * * *")return"Every minute";if(t==="0 * * * *")return"Every hour";if(t==="0 0 * * *")return"Every day at midnight";if(t==="0 0 * * 0")return"Every Sunday at midnight";if(t==="0 0 1 * *")return"First day of every month at midnight";const c=[];if(n!=="*"&&c.push(`at minute ${n}`),s!=="*"&&c.push(`at hour ${s}`),r!=="*"&&c.push(`on day ${r}`),a!=="*"&&c.push(`in month ${a}`),o!=="*"){const h=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],d=parseInt(o);c.push(`on ${isNaN(d)?o:h[d]||o}`)}return c.length>0?c.join(", "):"Custom schedule"}function KE(t){return{name:t.name,image:t.image||"",resources:t.resources?{requests:t.resources.requests,limits:t.resources.limits}:void 0,ports:t.ports?.map(e=>({name:e.name,containerPort:e.containerPort,protocol:e.protocol})),command:t.command,args:t.args,mounts:t.volumeMounts?.map(e=>({name:e.name,mountPath:e.mountPath,readOnly:e.readOnly,subPath:e.subPath}))}}function fu(t,e,n){const s=[];return e&&e.length>0&&s.push({id:"init-containers",title:"Init Containers",data:{type:"containers",items:e.map(KE)}}),t&&t.length>0&&s.push({id:"containers",title:"Containers",data:{type:"containers",items:t.map(KE),metricsLoader:n}}),s}const Ed=new Map,Ad=new Map;function Oq(t){t?(Ed.delete(t),Ad.delete(t)):(Ed.clear(),Ad.clear())}async function YS(t){const e=Ed.get(t);if(e!==void 0)return e;const n=Ad.get(t);if(n)return n;const s=(async()=>{try{const a=await pP(t,"pods.metrics.k8s.io")!==void 0;return Ed.set(t,a),a}catch(r){return console.warn("Failed to check metrics availability:",r),Ed.set(t,!1),!1}finally{Ad.delete(t)}})();return Ad.set(t,s),s}function Dc(t){if(!t)return 0;if(t.endsWith("n"))return parseInt(t.slice(0,-1),10)||0;if(t.endsWith("m"))return(parseInt(t.slice(0,-1),10)||0)*1e6;const e=parseFloat(t);return isNaN(e)?0:e*1e9}function Lc(t){if(!t)return 0;const e=t.match(/^(\d+(?:\.\d+)?)(Ki|Mi|Gi|Ti|K|M|G|T|k|m|g|t)?$/);if(!e){const r=parseInt(t,10);return isNaN(r)?0:r}const n=parseFloat(e[1]),s=e[2];if(!s)return n;switch(s){case"Ki":return n*1024;case"Mi":return n*1024*1024;case"Gi":return n*1024*1024*1024;case"Ti":return n*1024*1024*1024*1024;case"K":case"k":return n*1e3;case"M":case"m":return n*1e3*1e3;case"G":case"g":return n*1e3*1e3*1e3;case"T":case"t":return n*1e3*1e3*1e3*1e3;default:return n}}function XS(t){if(t>=1e9){const e=t/1e9;return e>=10?`${Math.round(e)}`:`${e.toFixed(1)}`}return`${Math.round(t/1e6)}m`}function JS(t){return t>=1024*1024*1024?`${(t/(1024*1024*1024)).toFixed(1)}Gi`:t>=1024*1024?`${(t/(1024*1024)).toFixed(0)}Mi`:t>=1024?`${(t/1024).toFixed(0)}Ki`:`${t}B`}function q_(t,e){return e<=0?0:Math.min(100,Math.round(t/e*100))}async function Rq(t,e,n){try{return await YS(t)?await aa(`/apis/metrics.k8s.io/v1beta1/namespaces/${n}/pods/${e}`,t):null}catch{return null}}async function QS(t,e,n){try{if(!await YS(t))return[];const s=Object.entries(n).map(([a,o])=>`${a}=${o}`).join(",");return(await aa(`/apis/metrics.k8s.io/v1beta1/namespaces/${e}/pods?labelSelector=${encodeURIComponent(s)}`,t)).items||[]}catch{return[]}}async function Bq(t,e){try{return await YS(t)?await aa(`/apis/metrics.k8s.io/v1beta1/nodes/${e}`,t):null}catch{return null}}function ZS(t){const e=new Map;for(const s of t)for(const r of s.containers){const a=e.get(r.name)||{cpuNanos:0,memoryBytes:0,count:0};a.cpuNanos+=Dc(r.usage.cpu),a.memoryBytes+=Lc(r.usage.memory),a.count++,e.set(r.name,a)}const n=new Map;for(const[s,r]of e)n.set(s,{cpu:{usage:XS(r.cpuNanos),usageNanoCores:r.cpuNanos},memory:{usage:JS(r.memoryBytes),usageBytes:r.memoryBytes}});return n}const Mq={kinds:["Deployment","Deployments"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata,a=r?.namespace;if(!n)return{sections:[]};const o=n.replicas??1,c=s?.readyReplicas??0,h=s?.updatedReplicas??0,d=s?.availableReplicas??0,g=async()=>{const m=n.selector?.matchLabels;if(!a||!m||Object.keys(m).length===0)return null;const v=await QS(t,a,m);return v.length===0?null:ZS(v)};return{sections:[{id:"replicas",title:"Replica Status",data:{type:"gauges",items:[{label:"Ready",current:c,total:o,color:"emerald"},{label:"Updated",current:h,total:o,color:"blue"},{label:"Available",current:d,total:o,color:"cyan"}],showPodGrid:{total:o,ready:c,available:d,icon:"box"}}},{id:"strategy",data:{type:"info-grid",items:[{label:"Strategy",value:n.strategy?.type||"RollingUpdate"},...n.strategy?.rollingUpdate?[{label:"Max Surge",value:String(n.strategy.rollingUpdate.maxSurge??"25%"),color:"text-cyan-400"},{label:"Max Unavailable",value:String(n.strategy.rollingUpdate.maxUnavailable??"25%"),color:"text-amber-400"}]:[]],columns:2}},{id:"replicasets",data:{type:"related-replicasets",title:"ReplicaSets",loader:async()=>{if(!a||!r?.name)return[];try{const m=await ou(t,"replicasets");if(!m)return[];const v=await mg(t,m,a),y=r.name??"",x=r.uid;return v.filter(w=>{const S=w.metadata,k=S.name;if(S.ownerReferences?.some(A=>A.kind==="Deployment"&&A.name===y||A.uid===x))return!0;if(k.startsWith(y+"-")){const A=k.slice(y.length+1);return/^[a-z0-9]{7,10}$/.test(A)}return!1}).map(w=>{const S=w.metadata,k=w.spec,C=w.status,A=S.annotations;return{name:S.name,replicas:C?.replicas??0,readyReplicas:C?.readyReplicas??0,revision:A?.["deployment.kubernetes.io/revision"],images:k?.template?.spec?.containers?.map(B=>B.image)??[],isCurrent:(C?.replicas??0)>0}}).sort((w,S)=>{const k=parseInt(w.revision??"0");return parseInt(S.revision??"0")-k})}catch(m){return console.error("Failed to fetch ReplicaSets:",m),[]}}}},...fu(n.template?.spec?.containers,n.template?.spec?.initContainers,g),...(s?.conditions??[]).length>0?[{id:"conditions",title:"Conditions",data:{type:"conditions",items:(s?.conditions??[]).map(m=>({type:m.type||"",status:m.status||"",reason:m.reason,message:m.message}))}}]:[]]}}},Dq={kinds:["Pod","Pods"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata,a=r?.namespace;if(!n)return{sections:[]};const o=n.containers??[],c=n.initContainers??[],h=s?.containerStatuses??[],d=s?.initContainerStatuses??[],g=h.reduce((v,y)=>v+(y.restartCount??0),0),m=async()=>{const v=r?.name,y=a;if(!v||!y)return null;const x=await Rq(t,v,y);if(!x)return null;const w=new Map;for(const S of x.containers)w.set(S.name,{cpu:{usage:XS(Dc(S.usage.cpu)),usageNanoCores:Dc(S.usage.cpu)},memory:{usage:JS(Lc(S.usage.memory)),usageBytes:Lc(S.usage.memory)}});return w};return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Phase",value:s?.phase||"Unknown",status:Iq(s?.phase)},{label:"Pod IP",value:s?.podIP||"Pending"},{label:"Node",value:n.nodeName||"Not scheduled"},{label:"Restarts",value:g,status:g>0?"warning":"success"}]}},...c.length>0?[{id:"init-containers",title:"Init Containers",data:{type:"containers",items:c.map(v=>WE(v,d))}}]:[],{id:"containers",title:"Containers",data:{type:"containers",items:o.map(v=>WE(v,h)),metricsLoader:m}},...n.volumes?.length?[{id:"volumes",title:"Volumes",data:{type:"volumes",items:n.volumes.map(v=>Lq(v,[...o,...c]))}}]:[],...(s?.conditions??[]).length>0?[{id:"conditions",title:"Conditions",data:{type:"conditions",items:(s?.conditions??[]).map(v=>({type:v.type||"",status:v.status||"",reason:v.reason,message:v.message}))}}]:[]]}}};function WE(t,e){const n=e.find(r=>r.name===t.name),s=Pq(n);return{name:t.name,image:t.image||"",state:s.state,stateReason:s.reason,ready:n?.ready,restartCount:n?.restartCount,resources:t.resources?{requests:t.resources.requests,limits:t.resources.limits}:void 0,ports:t.ports?.map(r=>({name:r.name,containerPort:r.containerPort,protocol:r.protocol})),command:t.command,args:t.args,mounts:t.volumeMounts?.map(r=>({name:r.name,mountPath:r.mountPath,readOnly:r.readOnly,subPath:r.subPath}))}}function Lq(t,e){const n=zq(t),s=[];for(const r of e)if(r.volumeMounts)for(const a of r.volumeMounts)a.name===t.name&&s.push({container:r.name,mountPath:a.mountPath,readOnly:a.readOnly??!1,subPath:a.subPath});return{name:t.name,type:n.type,source:n.detail,extra:n.extra,mounts:s}}function Iq(t){switch(t?.toLowerCase()){case"running":return"success";case"succeeded":return"success";case"pending":return"warning";case"failed":return"error";default:return"neutral"}}function Pq(t){return t?.state?t.state.running?{state:"running"}:t.state.waiting?{state:"waiting",reason:t.state.waiting.reason}:t.state.terminated?{state:"terminated",reason:t.state.terminated.reason}:{}:{}}function zq(t){if(t.configMap)return{type:"ConfigMap",detail:t.configMap.name||"",extra:{...t.configMap.optional!==void 0&&{optional:String(t.configMap.optional)},...t.configMap.defaultMode!==void 0&&{defaultMode:String(t.configMap.defaultMode).padStart(4,"0")}}};if(t.secret)return{type:"Secret",detail:t.secret.secretName||"",extra:{...t.secret.optional!==void 0&&{optional:String(t.secret.optional)},...t.secret.defaultMode!==void 0&&{defaultMode:String(t.secret.defaultMode).padStart(4,"0")}}};if(t.emptyDir)return{type:"EmptyDir",detail:t.emptyDir.medium||"default",extra:{...t.emptyDir.sizeLimit&&{sizeLimit:t.emptyDir.sizeLimit}}};if(t.hostPath)return{type:"HostPath",detail:t.hostPath.path,extra:{...t.hostPath.type&&{type:t.hostPath.type}}};if(t.persistentVolumeClaim)return{type:"PVC",detail:t.persistentVolumeClaim.claimName,extra:{...t.persistentVolumeClaim.readOnly&&{readOnly:"true"}}};if(t.projected){const e=t.projected.sources||[],n=e.map(s=>s.configMap?"ConfigMap":s.secret?"Secret":s.serviceAccountToken?"ServiceAccountToken":s.downwardAPI?"DownwardAPI":"Unknown");return{type:"Projected",detail:`${e.length} sources`,extra:{sources:n.join(", "),...t.projected.defaultMode!==void 0&&{defaultMode:String(t.projected.defaultMode).padStart(4,"0")}}}}return t.downwardAPI?{type:"DownwardAPI",detail:`${t.downwardAPI.items?.length||0} items`,extra:{...t.downwardAPI.defaultMode!==void 0&&{defaultMode:String(t.downwardAPI.defaultMode).padStart(4,"0")}}}:t.nfs?{type:"NFS",detail:`${t.nfs.server}:${t.nfs.path}`,extra:{...t.nfs.readOnly&&{readOnly:"true"}}}:t.csi?{type:"CSI",detail:t.csi.driver,extra:{...t.csi.fsType&&{fsType:t.csi.fsType},...t.csi.readOnly&&{readOnly:"true"}}}:{type:"Unknown",detail:""}}const $q={kinds:["StatefulSet","StatefulSets"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata,a=r?.namespace;if(!n)return{sections:[]};const o=n.replicas??1,c=s?.readyReplicas??0,h=s?.currentReplicas??0,d=s?.updatedReplicas??0,g=s?.availableReplicas??0,m=Array.from({length:o},(y,x)=>`${r?.name}-${x}`),v=async()=>{const y=n.selector?.matchLabels;if(!a||!y||Object.keys(y).length===0)return null;const x=await QS(t,a,y);return x.length===0?null:ZS(x)};return{sections:[{id:"replicas",title:"Replica Status",data:{type:"gauges",items:[{label:"Ready",current:c,total:o,color:"emerald"},{label:"Current",current:h,total:o,color:"blue"},{label:"Updated",current:d,total:o,color:"cyan"}],showPodGrid:{total:o,ready:c,available:g,showOrdinal:!0,icon:"database",podTitles:m}}},{id:"config",data:{type:"info-grid",items:[{label:"Service Name",value:n.serviceName,color:"text-cyan-400"},{label:"Pod Management",value:n.podManagementPolicy||"OrderedReady"},{label:"Update Strategy",value:n.updateStrategy?.type||"RollingUpdate"},...n.updateStrategy?.rollingUpdate?.partition!==void 0?[{label:"Partition",value:n.updateStrategy.rollingUpdate.partition,color:"text-amber-400"}]:[]],columns:2}},...s?.currentRevision?[{id:"revisions",title:"Revisions",data:{type:"info-grid",items:[{label:"Current",value:s.currentRevision,color:"text-cyan-400"},...s.updateRevision&&s.updateRevision!==s.currentRevision?[{label:"Update",value:s.updateRevision,color:"text-amber-400"}]:[]],columns:1}}]:[],...n.volumeClaimTemplates?.length?[{id:"volume-templates",title:"Volume Claim Templates",data:{type:"volume-claim-templates",items:n.volumeClaimTemplates.map(y=>({name:y.metadata?.name||"",size:y.spec?.resources?.requests?.storage,storageClass:y.spec?.storageClassName,accessModes:y.spec?.accessModes}))}}]:[],{id:"pvcs",data:{type:"related-pvcs",title:"Persistent Volume Claims",loader:async()=>{if(!a||!r?.name)return[];try{const y=await ou(t,"persistentvolumeclaims");if(!y)return[];const x=await mg(t,y,a),w=r.name,S=n?.volumeClaimTemplates?.map(k=>k.metadata?.name)??[];return x.filter(k=>{const A=k.metadata.name;return S.some(B=>A.startsWith(`${B}-${w}-`))}).map(k=>{const C=k.metadata,A=k.spec,B=k.status;return{name:C.name,status:B?.phase??"Unknown",capacity:B?.capacity?.storage,storageClass:A?.storageClassName}})}catch(y){return console.error("Failed to fetch PVCs:",y),[]}}}},...fu(n.template?.spec?.containers,n.template?.spec?.initContainers,v),...(s?.conditions??[]).length>0?[{id:"conditions",title:"Conditions",data:{type:"conditions",items:(s?.conditions??[]).map(y=>({type:y.type||"",status:y.status||"",reason:y.reason,message:y.message}))}}]:[]]}}},Hq={kinds:["DaemonSet","DaemonSets"],adapt(t,e){const n=e.spec,s=e.status,a=e.metadata?.namespace;if(!n)return{sections:[]};const o=s?.desiredNumberScheduled??0,c=s?.currentNumberScheduled??0,h=s?.numberReady??0,d=s?.numberAvailable??0,g=s?.numberMisscheduled??0,m=s?.updatedNumberScheduled??0,v=async()=>{const y=n.selector?.matchLabels;if(!a||!y||Object.keys(y).length===0)return null;const x=await QS(t,a,y);return x.length===0?null:ZS(x)};return{sections:[{id:"distribution",title:"Node Distribution",data:{type:"gauges",items:[{label:"Scheduled",current:c,total:o,color:"blue"},{label:"Ready",current:h,total:o,color:"emerald"},{label:"Available",current:d,total:o,color:"cyan"}],showPodGrid:{total:o,ready:h,current:c,icon:"server"}}},{id:"status",data:{type:"info-grid",items:[{label:"Update Strategy",value:n.updateStrategy?.type||"RollingUpdate"},{label:"Updated",value:`${m}/${o}`,color:"text-cyan-400"},...g>0?[{label:"Misscheduled",value:`${g} pods on wrong nodes`,color:"text-red-400"}]:[]],columns:2}},...n.updateStrategy?.rollingUpdate?[{id:"rolling-update",title:"Rolling Update Config",data:{type:"info-grid",items:[{label:"Max Unavailable",value:String(n.updateStrategy.rollingUpdate.maxUnavailable??1),color:"text-amber-400"},...n.updateStrategy.rollingUpdate.maxSurge?[{label:"Max Surge",value:String(n.updateStrategy.rollingUpdate.maxSurge),color:"text-cyan-400"}]:[]],columns:2}}]:[],...n.template?.spec?.nodeSelector&&Object.keys(n.template.spec.nodeSelector).length>0?[{id:"node-selector",data:{type:"labels",labels:n.template.spec.nodeSelector,title:"Node Selector"}}]:[],...fu(n.template?.spec?.containers,n.template?.spec?.initContainers,v),...(s?.conditions??[]).length>0?[{id:"conditions",title:"Conditions",data:{type:"conditions",items:(s?.conditions??[]).map(y=>({type:y.type||"",status:y.status||"",reason:y.reason,message:y.message}))}}]:[]]}}},Uq={kinds:["Node","Nodes"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata;if(!s)return{sections:[]};const a=s.nodeInfo,o=s.conditions??[],c=s.addresses??[],h=s.capacity??{},d=s.allocatable??{},g=n?.taints??[],m=r?.labels??{},y=o.find(w=>w.type==="Ready")?.status==="True",x=Object.keys(m).filter(w=>w.startsWith("node-role.kubernetes.io/")).map(w=>w.replace("node-role.kubernetes.io/",""));return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Status",value:y?"Ready":"NotReady",status:y?"success":"error",icon:y?f.jsx(Lr,{size:14}):f.jsx(bi,{size:14})},{label:"Role",value:x.length>0?x.join(", "):"worker",icon:f.jsx(mi,{size:14,className:"text-purple-400"})}]}},{id:"metrics",data:{type:"node-metrics",title:"Resource Usage",loader:async()=>{const w=r?.name;if(!w)return null;const S=await Bq(t,w);if(!S)return null;const k=d.cpu??"0",C=d.memory??"0";return{cpu:{usage:XS(Dc(S.usage.cpu)),usageNanoCores:Dc(S.usage.cpu),allocatable:k,allocatableNanoCores:Dc(k)},memory:{usage:JS(Lc(S.usage.memory)),usageBytes:Lc(S.usage.memory),allocatable:Eh(C),allocatableBytes:Lc(C)}}}}},...c.length>0?[{id:"addresses",title:"Addresses",data:{type:"addresses",addresses:c.map(w=>({type:w.type||"",address:w.address||""}))}}]:[],{id:"resources",title:"Resources",data:{type:"capacity-bars",items:[{label:"CPU",icon:f.jsx(uf,{size:14,className:"text-blue-400"}),capacity:h.cpu??"0",allocatable:d.cpu??"0"},{label:"Memory",icon:f.jsx(Us,{size:14,className:"text-purple-400"}),capacity:Eh(h.memory??"0"),allocatable:Eh(d.memory??"0")},{label:"Pods",icon:f.jsx(al,{size:14,className:"text-emerald-400"}),capacity:h.pods??"0",allocatable:d.pods??"0"},...h["ephemeral-storage"]?[{label:"Storage",icon:f.jsx(Us,{size:14,className:"text-amber-400"}),capacity:Eh(h["ephemeral-storage"]),allocatable:Eh(d["ephemeral-storage"]??"0")}]:[]]}},...a?[{id:"system-info",title:"System Info",data:{type:"info-grid",items:[{label:"OS",value:a.operatingSystem},{label:"Arch",value:a.architecture},{label:"Kernel",value:a.kernelVersion},{label:"OS Image",value:a.osImage},{label:"Container Runtime",value:a.containerRuntimeVersion},{label:"Kubelet",value:a.kubeletVersion},{label:"Kube-Proxy",value:a.kubeProxyVersion}],columns:2}}]:[],...g.length>0?[{id:"taints",title:"Taints",data:{type:"taints",items:g.map(w=>({key:w.key||"",value:w.value,effect:w.effect||""}))}}]:[],...o.length>0?[{id:"conditions",title:"Conditions",data:{type:"conditions",items:o.map(w=>({type:w.type||"",status:w.status||"",reason:w.reason,message:w.message}))}}]:[]]}}},Vq={kinds:["CronJob","CronJobs"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata,a=r?.namespace;if(!n)return{sections:[]};const o=n.suspend??!1,c=n.schedule,h=s?.lastScheduleTime?new Date(s.lastScheduleTime):null,d=s?.lastSuccessfulTime?new Date(s.lastSuccessfulTime):null,g=s?.active?.length??0,m=Tq(c);return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Status",value:o?"Suspended":"Active",status:o?"warning":"success",icon:o?f.jsx(rS,{size:14}):f.jsx(iS,{size:14})},{label:"Active Jobs",value:String(g),status:g>0?"warning":"neutral",icon:f.jsx(ll,{size:14,className:"text-blue-400"})}]}},{id:"schedule",data:{type:"schedule",schedule:c,description:m}},{id:"timing",data:{type:"info-grid",items:[...h?[{label:"Last Scheduled",value:F_(h),color:"text-purple-400"}]:[],...d?[{label:"Last Successful",value:F_(d),color:"text-emerald-400"}]:[]],columns:2}},{id:"job-config",title:"Job Configuration",data:{type:"info-grid",items:[{label:"Concurrency Policy",value:n.concurrencyPolicy||"Allow",color:Fq(n.concurrencyPolicy)},...n.startingDeadlineSeconds?[{label:"Starting Deadline",value:`${n.startingDeadlineSeconds}s`}]:[],{label:"Successful History",value:n.successfulJobsHistoryLimit??3},{label:"Failed History",value:n.failedJobsHistoryLimit??1},...n.jobTemplate?.spec?.backoffLimit!==void 0?[{label:"Backoff Limit",value:n.jobTemplate.spec.backoffLimit}]:[],...n.jobTemplate?.spec?.activeDeadlineSeconds?[{label:"Job Deadline",value:`${n.jobTemplate.spec.activeDeadlineSeconds}s`,color:"text-amber-400"}]:[]],columns:2}},{id:"jobs",data:{type:"related-jobs",title:"Recent Jobs",loader:async()=>{if(!a||!r?.name)return[];try{const v=await ou(t,"jobs");if(!v)return[];const y=await mg(t,v,a),x=r.name??"",w=r.uid;return y.filter(S=>{const k=S.metadata,C=k.name;if(k.ownerReferences?.some(B=>B.kind==="CronJob"&&B.name===x||B.uid===w))return!0;if(C.startsWith(x+"-")){const B=C.slice(x.length+1);return/^\d{10}$/.test(B)}return!1}).map(S=>{const k=S.metadata,C=S.status,A=C?.conditions,B=A?.some(T=>T.type==="Complete"&&T.status==="True"),M=A?.some(T=>T.type==="Failed"&&T.status==="True");return{name:k.name,status:B?"Complete":M?"Failed":"Running",startTime:C?.startTime,completionTime:C?.completionTime,succeeded:C?.succeeded,failed:C?.failed}}).sort((S,k)=>{const C=S.startTime?new Date(S.startTime).getTime():0;return(k.startTime?new Date(k.startTime).getTime():0)-C})}catch(v){return console.error("Failed to fetch Jobs:",v),[]}}}},...fu(n.jobTemplate?.spec?.template?.spec?.containers,n.jobTemplate?.spec?.template?.spec?.initContainers)]}}};function Fq(t){switch(t){case"Forbid":return"text-red-400";case"Replace":return"text-amber-400";default:return"text-emerald-400"}}const qq={kinds:["Job","Jobs"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=n.completions??1,a=n.parallelism??1,o=s?.succeeded??0,c=s?.failed??0,h=s?.active??0,d=n.backoffLimit??6,g=o>=r,m=s?.conditions?.some(w=>w.type==="Failed"&&w.status==="True"),v=g?"Complete":m?"Failed":h>0?"Running":"Pending",y=s?.startTime?new Date(s.startTime):void 0,x=s?.completionTime?new Date(s.completionTime):void 0;return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Status",value:v,status:g?"success":m?"error":h>0?"warning":"neutral",icon:g?f.jsx(Lr,{size:14}):m?f.jsx(bi,{size:14}):f.jsx(iS,{size:14})},...y?[{label:"Duration",value:Kq(y,x),icon:f.jsx(ll,{size:14,className:"text-blue-400"})}]:[]]}},{id:"progress",title:"Progress",data:{type:"job-progress",completions:r,succeeded:o,failed:c,active:h}},{id:"config",data:{type:"info-grid",items:[{label:"Parallelism",value:a,color:"text-cyan-400"},{label:"Backoff Limit",value:`${d}${c>0?` (${c} failures)`:""}`,color:c>=d?"text-red-400":c>0?"text-amber-400":void 0},...n.activeDeadlineSeconds?[{label:"Deadline",value:`${n.activeDeadlineSeconds}s`,color:"text-amber-400"}]:[],...n.ttlSecondsAfterFinished!==void 0?[{label:"TTL After Finished",value:`${n.ttlSecondsAfterFinished}s`}]:[],...n.completionMode?[{label:"Completion Mode",value:n.completionMode,color:"text-purple-400"}]:[]],columns:2}},...y?[{id:"timeline",title:"Timeline",data:{type:"timeline",startTime:y,completionTime:x}}]:[],...fu(n.template?.spec?.containers,n.template?.spec?.initContainers),...s?.conditions?.length?[{id:"conditions",title:"Conditions",data:{type:"conditions",items:s.conditions.map(w=>({type:w.type||"",status:w.status||"",reason:w.reason,message:w.message}))}}]:[]]}}};function Kq(t,e){const s=(e??new Date).getTime()-t.getTime(),r=Math.floor(s/1e3),a=Math.floor(r/60),o=Math.floor(a/60),c=Math.floor(o/24);return c>0?`${c}d ${o%24}h`:o>0?`${o}h ${a%60}m`:a>0?`${a}m ${r%60}s`:`${r}s`}const Wq={kinds:["ReplicaSet","ReplicaSets"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata;if(!n)return{sections:[]};const a=n.replicas??1,o=s?.replicas??0,c=s?.readyReplicas??0,h=s?.availableReplicas??0,d=r?.ownerReferences?.[0],g=r?.annotations?.["deployment.kubernetes.io/revision"];return{sections:[...d?[{id:"owner",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"text-xs text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(au,{size:10})," Owned By"]}),f.jsxs("div",{className:"text-sm flex items-center gap-2",children:[f.jsxs("span",{className:"text-neutral-500",children:[d.kind,":"]}),f.jsx("span",{className:"text-cyan-400",children:d.name}),g&&f.jsxs("span",{className:"text-xs bg-neutral-700 px-1.5 py-0.5 rounded text-neutral-400",children:["rev ",g]})]})]})}}]:[],{id:"replicas",title:"Replica Status",data:{type:"gauges",items:[{label:"Ready",current:c,total:a,color:"emerald"},{label:"Current",current:o,total:a,color:"blue"},{label:"Available",current:h,total:a,color:"cyan"}],showPodGrid:{total:Math.max(a,o),ready:c,available:h,current:o,icon:"box"}}},...n.selector?.matchLabels?[{id:"selector",data:{type:"labels",labels:n.selector.matchLabels,title:"Selector"}}]:[],...fu(n.template?.spec?.containers,n.template?.spec?.initContainers),...(s?.conditions??[]).length>0?[{id:"conditions",title:"Conditions",data:{type:"conditions",items:(s?.conditions??[]).map(m=>({type:m.type||"",status:m.status||"",reason:m.reason,message:m.message}))}}]:[]]}}},Gq={kinds:["PersistentVolume","PersistentVolumes"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=s?.phase??"Unknown",a=n.capacity?.storage??"Unknown";return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Phase",value:r,status:Yq(r)},{label:"Capacity",value:a,icon:f.jsx(Us,{size:14,className:"text-purple-400"})},{label:"Reclaim Policy",value:n.persistentVolumeReclaimPolicy??"Delete",status:n.persistentVolumeReclaimPolicy==="Retain"?"warning":"neutral"},{label:"Volume Mode",value:n.volumeMode??"Filesystem"}]}},...n.accessModes?.length?[{id:"access-modes",title:"Access Modes",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.accessModes.map((o,c)=>f.jsx("span",{className:`text-xs px-2 py-1 rounded ${KO(o)}`,children:WO(o)},c))})}}]:[],...n.storageClassName?[{id:"storage-class",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Storage Class"}),f.jsxs("div",{className:"text-sm text-purple-600 dark:text-purple-400 flex items-center gap-2",children:[f.jsx(go,{size:14}),n.storageClassName]})]})}}]:[],...n.claimRef?[{id:"claim-ref",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(au,{size:10})," Bound To"]}),f.jsxs("div",{className:"text-sm",children:[f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-500",children:[n.claimRef.namespace,"/"]}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:n.claimRef.name})]})]})}}]:[],{id:"source",title:"Volume Source",data:{type:"custom",render:()=>{const o=Xq(n),c=o.find(d=>d.label==="Type")?.value||"Unknown",h=o.filter(d=>d.label!=="Type");return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3 space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:"Type:"}),f.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-purple-500/20 text-purple-700 dark:text-purple-400",children:c})]}),h.length>0&&f.jsx("div",{className:"space-y-1 pl-1",children:h.map((d,g)=>f.jsxs("div",{className:"text-xs",children:[f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-500",children:[d.label,":"]})," ",f.jsx("span",{className:d.color?`${d.color.replace("text-cyan-400","text-cyan-600 dark:text-cyan-400").replace("text-purple-400","text-purple-600 dark:text-purple-400")}`:"text-neutral-900 dark:text-neutral-300",children:d.value})]},g))})]})}}},...n.nodeAffinity?.required?.nodeSelectorTerms?[{id:"node-affinity",title:"Node Affinity",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.nodeAffinity.required.nodeSelectorTerms.map((o,c)=>f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-2",children:o.matchExpressions?.map((h,d)=>f.jsxs("div",{className:"text-xs",children:[f.jsx("span",{className:"text-purple-400",children:h.key}),f.jsx("span",{className:"text-neutral-500 mx-1",children:h.operator}),h.values&&f.jsx("span",{className:"text-cyan-400",children:h.values.join(", ")})]},d))},c))})}}]:[],...n.mountOptions?.length?[{id:"mount-options",title:"Mount Options",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-1",children:n.mountOptions.map((o,c)=>f.jsx("span",{className:"text-xs bg-neutral-200 dark:bg-neutral-800 px-2 py-1 rounded text-neutral-800 dark:text-neutral-300",children:o},c))})}}]:[]]}}};function Yq(t){switch(t){case"Bound":return"success";case"Available":return"success";case"Released":return"warning";case"Failed":return"error";default:return"neutral"}}function Xq(t){if(!t)return[];const e=[];return t.hostPath?(e.push({label:"Type",value:"HostPath"}),e.push({label:"Path",value:t.hostPath.path,color:"text-cyan-400"})):t.nfs?(e.push({label:"Type",value:"NFS"}),e.push({label:"Server",value:t.nfs.server,color:"text-cyan-400"}),e.push({label:"Path",value:t.nfs.path,color:"text-cyan-400"})):t.csi?(e.push({label:"Type",value:"CSI"}),e.push({label:"Driver",value:t.csi.driver,color:"text-purple-400"}),t.csi.volumeHandle&&e.push({label:"Handle",value:t.csi.volumeHandle,color:"text-cyan-400"})):t.local?(e.push({label:"Type",value:"Local"}),e.push({label:"Path",value:t.local.path,color:"text-cyan-400"})):t.awsElasticBlockStore?(e.push({label:"Type",value:"AWS EBS"}),e.push({label:"Volume ID",value:t.awsElasticBlockStore.volumeID,color:"text-cyan-400"})):t.gcePersistentDisk?(e.push({label:"Type",value:"GCE PD"}),e.push({label:"PD Name",value:t.gcePersistentDisk.pdName,color:"text-cyan-400"})):t.azureDisk?(e.push({label:"Type",value:"Azure Disk"}),e.push({label:"Disk Name",value:t.azureDisk.diskName,color:"text-cyan-400"})):e.push({label:"Type",value:"Unknown"}),e}const Jq={kinds:["PersistentVolumeClaim","PersistentVolumeClaims"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=s?.phase??"Unknown",a=n.volumeName,o=n.resources?.requests?.storage,c=s?.capacity?.storage,h=[{id:"status",data:{type:"status-cards",items:[{label:"Phase",value:r,status:Qq(r)},{label:"Requested",value:o??"Not specified",icon:f.jsx(Us,{size:14,className:"text-purple-400"})},...c?[{label:"Actual Capacity",value:c,status:"success"}]:[],{label:"Volume Mode",value:n.volumeMode??"Filesystem"}]}}];return n.accessModes?.length&&h.push({id:"access-modes",title:"Access Modes",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.accessModes.map((d,g)=>f.jsx("span",{className:`text-xs px-2 py-1 rounded ${KO(d)}`,children:WO(d)},g))})}}),n.storageClassName&&h.push({id:"storage-class",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Storage Class"}),f.jsxs("div",{className:"text-sm text-purple-600 dark:text-purple-400 flex items-center gap-2",children:[f.jsx(go,{size:14}),n.storageClassName]})]})}}),a?h.push({id:"bound-volume",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(au,{size:10})," Bound To"]}),f.jsxs("div",{className:"text-sm",children:[f.jsx("span",{className:"text-neutral-700 dark:text-neutral-400",children:"platform/"}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:a})]})]})}}):h.push({id:"no-volume",data:{type:"custom",render:()=>f.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3",children:f.jsxs("div",{className:"text-yellow-400 text-sm flex items-center gap-2",children:[f.jsx(tS,{size:14}),"Not bound to any volume"]})})}}),n.selector?.matchLabels&&Object.keys(n.selector.matchLabels).length>0&&h.push({id:"selector",title:"Volume Selector",data:{type:"labels",labels:n.selector.matchLabels}}),s?.conditions?.length&&h.push({id:"conditions",title:"Conditions",data:{type:"conditions",items:s.conditions.map(d=>({type:d.type??"",status:d.status??"Unknown",reason:d.reason,message:d.message}))}}),{sections:h}}};function Qq(t){switch(t){case"Bound":return"success";case"Pending":return"warning";case"Lost":return"error";default:return"neutral"}}const Zq="/apis/argoproj.io/v1alpha1";async function GO(t,e,n,s){const r=`/contexts/${t}${Zq}/namespaces/${n}/applications/${e}`,a=await fetch(r,{method:"PATCH",headers:{"Content-Type":"application/merge-patch+json"},body:JSON.stringify(s)});if(!a.ok){const o=await a.text();throw new Error(`Failed to patch application: ${a.status} ${a.statusText} - ${o}`)}return a}async function GE(t,e,n="argocd",s={}){const a={operation:{sync:{syncStrategy:s.strategy==="apply"?{apply:{}}:{hook:{}},...s.revision&&{revision:s.revision},...s.prune!==void 0&&{prune:s.prune},...s.dryRun!==void 0&&{dryRun:s.dryRun}}}};await GO(t,e,n,a)}async function YE(t,e,n="argocd",s=!1){await GO(t,e,n,{metadata:{annotations:{"argocd.argoproj.io/refresh":s?"hard":"normal"}}})}function eK(t){switch(t){case"Synced":return"success";case"OutOfSync":return"warning";default:return"neutral"}}function tK(t){switch(t){case"Healthy":return"success";case"Progressing":return"warning";case"Degraded":case"Missing":return"error";case"Suspended":return"warning";default:return"neutral"}}function nK(t){switch(t){case"Synced":return f.jsx(Lr,{size:14,className:"text-emerald-400"});case"OutOfSync":return f.jsx(gn,{size:14,className:"text-amber-400"});default:return f.jsx(mo,{size:14,className:"text-gray-400"})}}function sK(t){switch(t){case"Healthy":return f.jsx(Lr,{size:14,className:"text-emerald-400"});case"Progressing":return f.jsx(gn,{size:14,className:"text-blue-400 animate-spin"});case"Degraded":return f.jsx(bi,{size:14,className:"text-red-400"});case"Missing":return f.jsx(mo,{size:14,className:"text-red-400"});case"Suspended":return f.jsx(rS,{size:14,className:"text-amber-400"});default:return f.jsx(cf,{size:14,className:"text-gray-400"})}}function rK(t,e=12){switch(t){case"Healthy":return f.jsx(Lr,{size:e,className:"text-emerald-400 shrink-0"});case"Progressing":return f.jsx(gn,{size:e,className:"text-blue-400 animate-spin shrink-0"});case"Degraded":return f.jsx(bi,{size:e,className:"text-red-400 shrink-0"});case"Missing":return f.jsx(mo,{size:e,className:"text-red-400 shrink-0"});case"Suspended":return f.jsx(rS,{size:e,className:"text-amber-400 shrink-0"});default:return f.jsx(cf,{size:e,className:"text-gray-400 shrink-0"})}}function iK(t){const e={Synced:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",OutOfSync:"bg-amber-500/20 text-amber-400 border-amber-500/30",Unknown:"bg-gray-500/20 text-gray-400 border-gray-500/30"},n=e[t]||e.Unknown;return f.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${n}`,children:t||"Unknown"})}function jb(t){if(!t)return"Unknown";const e=new Date(t),s=Math.floor((new Date().getTime()-e.getTime())/1e3);return s<60?`${s}s ago`:s<3600?`${Math.floor(s/60)}m ago`:s<86400?`${Math.floor(s/3600)}h ago`:`${Math.floor(s/86400)}d ago`}function aK(t){if(!t)return"Unknown";const e=t.match(/[:/]([^/:]+\/[^/:]+?)(?:\.git)?$/);return e?e[1]:t}const lK={kinds:["Application","Applications"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=n.source||n.sources?.[0],a=s?.sync?.status||"Unknown",o=s?.health?.status||"Unknown",c=s?.operationState?.phase,h={healthy:0,progressing:0,degraded:0,missing:0,suspended:0,unknown:0};s?.resources?.forEach(g=>{const m=g.health?.status;let v;m?v=m.toLowerCase():v=g.status==="Synced"?"healthy":"unknown",v in h&&h[v]++});const d=s?.resources?.length||0;return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Sync Status",value:a,status:eK(a),icon:nK(a)},{label:"Health",value:o,status:tK(o),icon:sK(o)},...c?[{label:"Operation",value:c,status:c==="Succeeded"?"success":c==="Failed"?"error":"warning",icon:c==="Running"?f.jsx(gn,{size:14,className:"animate-spin"}):void 0}]:[]]}},...d>0?[{id:"resource-health",title:"Resource Health",data:{type:"gauges",items:[{label:"Healthy",current:h.healthy,total:d,color:"emerald"},{label:"Progressing",current:h.progressing,total:d,color:"blue"},{label:"Degraded",current:h.degraded+h.missing,total:d,color:"amber"}]}}]:[],...s?.resources?.length?[{id:"resources",title:"Managed Resources",data:{type:"custom",render:()=>{const g=new Map;s.resources.forEach(v=>{const y=v.kind||"Unknown";g.has(y)||g.set(y,[]),g.get(y).push(v)});const m=Array.from(g.keys()).sort((v,y)=>{const x=g.get(v),w=g.get(y),S=x.some(C=>C.health?.status!=="Healthy"),k=w.some(C=>C.health?.status!=="Healthy");return S&&!k?-1:!S&&k?1:v.localeCompare(y)});return f.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:m.map(v=>{const y=g.get(v),x=[...y].sort((w,S)=>{const k=w.health?.status==="Healthy",C=S.health?.status==="Healthy";return!k&&C?-1:k&&!C?1:(w.name||"").localeCompare(S.name||"")});return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-2",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[f.jsx(tT,{size:12,className:"text-neutral-500"}),f.jsx("span",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-400",children:v}),f.jsxs("span",{className:"text-[10px] text-neutral-500 dark:text-neutral-600",children:["(",y.length,")"]})]}),f.jsx("div",{className:"space-y-1",children:x.map((w,S)=>f.jsxs("div",{className:"flex items-center gap-2 text-xs pl-4",children:[rK(w.health?.status),f.jsx("span",{className:"text-neutral-700 dark:text-neutral-300 truncate flex-1",title:w.name,children:w.name}),w.namespace&&f.jsx("span",{className:"text-neutral-500 dark:text-neutral-600 text-[10px]",children:w.namespace}),iK(w.status),w.requiresPruning&&f.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded border bg-red-500/20 text-red-400 border-red-500/30",children:"Prune"})]},`${w.namespace}-${w.name}-${S}`))})]},v)})})}}}]:[],{id:"source",title:"Source",data:{type:"info-grid",items:[{label:"Repository",value:aK(r?.repoURL),color:"text-cyan-400"},{label:"Path",value:r?.path||r?.chart||"/",color:"text-purple-400"},{label:"Target Revision",value:r?.targetRevision||"HEAD",color:"text-blue-400"},...s?.sync?.revision?[{label:"Current Revision",value:s.sync.revision.substring(0,7),color:"text-emerald-400"}]:[]],columns:2}},{id:"destination",title:"Destination",data:{type:"info-grid",items:[{label:"Server",value:n.destination?.name||n.destination?.server||"Unknown"},{label:"Namespace",value:n.destination?.namespace||"default",color:"text-cyan-400"},{label:"Project",value:n.project||"default",color:"text-purple-400"}],columns:2}},...n.syncPolicy?[{id:"sync-policy",title:"Sync Policy",data:{type:"info-grid",items:[...n.syncPolicy.automated?[{label:"Auto Sync",value:"Enabled",color:"text-emerald-400"},{label:"Prune",value:n.syncPolicy.automated.prune?"Yes":"No",color:n.syncPolicy.automated.prune?"text-amber-400":void 0},{label:"Self Heal",value:n.syncPolicy.automated.selfHeal?"Yes":"No",color:n.syncPolicy.automated.selfHeal?"text-emerald-400":void 0}]:[{label:"Auto Sync",value:"Disabled",color:"text-gray-400"}],...n.syncPolicy.retry?.limit?[{label:"Retry Limit",value:n.syncPolicy.retry.limit}]:[]],columns:2}}]:[],...n.syncPolicy?.syncOptions?.length?[{id:"sync-options",data:{type:"labels",labels:Object.fromEntries(n.syncPolicy.syncOptions.map(g=>{const[m,v]=g.split("=");return[m,v||"true"]})),title:"Sync Options"}}]:[],...s?.reconciledAt||s?.operationState?.finishedAt?[{id:"timing",data:{type:"info-grid",items:[...s?.reconciledAt?[{label:"Last Reconciled",value:jb(s.reconciledAt)}]:[],...s?.operationState?.startedAt?[{label:"Operation Started",value:jb(s.operationState.startedAt)}]:[],...s?.operationState?.finishedAt?[{label:"Operation Finished",value:jb(s.operationState.finishedAt)}]:[]],columns:2}}]:[],...s?.health?.message?[{id:"health-message",title:"Health Message",data:{type:"info-grid",items:[{label:"Message",value:s.health.message}],columns:1}}]:[],...s?.operationState?.message?[{id:"operation-message",title:"Operation Message",data:{type:"info-grid",items:[{label:"Message",value:s.operationState.message}],columns:1}}]:[],...s?.summary?.images?.length?[{id:"images",title:"Images",data:{type:"container-images",containers:s.summary.images.map((g,m)=>({name:`image-${m+1}`,image:g}))}}]:[]]}},actions:[{id:"sync",label:"Sync",icon:f.jsx(iS,{size:14}),variant:"primary",confirm:{title:"Sync Application",message:"This will sync the application to match the desired state in Git. Continue?",confirmLabel:"Sync"},execute:async(t,e)=>{const n=e.metadata?.name,s=e.metadata?.namespace||"argocd";if(!n)throw new Error("Application name is required");await GE(t,n,s)},isDisabled:t=>t.status?.operationState?.phase==="Running"?"Sync already in progress":!1},{id:"sync-prune",label:"Sync (Prune)",icon:f.jsx(TI,{size:14}),variant:"warning",confirm:{title:"Sync with Prune",message:"This will sync the application and DELETE resources that are no longer in Git. This action cannot be undone. Continue?",confirmLabel:"Sync & Prune"},execute:async(t,e)=>{const n=e.metadata?.name,s=e.metadata?.namespace||"argocd";if(!n)throw new Error("Application name is required");await GE(t,n,s,{prune:!0})},isDisabled:t=>t.status?.operationState?.phase==="Running"?"Sync already in progress":!1},{id:"refresh",label:"Refresh",icon:f.jsx(gn,{size:14}),variant:"secondary",execute:async(t,e)=>{const n=e.metadata?.name,s=e.metadata?.namespace||"argocd";if(!n)throw new Error("Application name is required");await YE(t,n,s)}},{id:"hard-refresh",label:"Hard Refresh",icon:f.jsx(YI,{size:14}),variant:"secondary",execute:async(t,e)=>{const n=e.metadata?.name,s=e.metadata?.namespace||"argocd";if(!n)throw new Error("Application name is required");await YE(t,n,s,!0)}}]};function oK(t){return!t||t.length===0?{status:"Unknown",level:"neutral"}:t.find(r=>r.type==="ErrorOccurred"&&r.status==="True")?{status:"Error",level:"error"}:t.find(r=>r.type==="ResourcesUpToDate")?.status==="True"?{status:"Healthy",level:"success"}:t.find(r=>r.type==="ParametersGenerated")?.status==="True"?{status:"Progressing",level:"warning"}:{status:"Unknown",level:"neutral"}}function cK(t){switch(t){case"success":return f.jsx(Lr,{size:14,className:"text-emerald-400"});case"warning":return f.jsx(gn,{size:14,className:"text-amber-400"});case"error":return f.jsx(bi,{size:14,className:"text-red-400"});default:return f.jsx(cf,{size:14,className:"text-gray-400"})}}function uK(t){if(t.list){const e=t.list.elements?.length||0;return{name:"List",icon:f.jsx(u7,{size:12,className:"text-blue-400"}),details:`${e} element${e!==1?"s":""}`}}if(t.clusters)return{name:"Clusters",icon:f.jsx(mi,{size:12,className:"text-purple-400"}),details:t.clusters.selector?.matchLabels?Object.entries(t.clusters.selector.matchLabels).map(([e,n])=>`${e}=${n}`).join(", "):"All clusters"};if(t.git){const e=t.git.directories&&t.git.directories.length>0,n=t.git.files&&t.git.files.length>0;return{name:n?"Git Files":"Git Directories",icon:f.jsx(r0,{size:12,className:"text-cyan-400"}),details:e?t.git.directories?.map(s=>s.path).join(", "):n?t.git.files?.map(s=>s.path).join(", "):t.git.revision||"HEAD"}}if(t.matrix){const e=t.matrix.generators?.length||0;return{name:"Matrix",icon:f.jsx(Xl,{size:12,className:"text-amber-400"}),details:`${e} generator${e!==1?"s":""}`}}if(t.merge){const e=t.merge.generators?.length||0;return{name:"Merge",icon:f.jsx(Xl,{size:12,className:"text-orange-400"}),details:`${e} generator${e!==1?"s":""}`}}return t.scmProvider?{name:`SCM Provider (${t.scmProvider.github?"GitHub":t.scmProvider.gitlab?"GitLab":t.scmProvider.bitbucket?"Bitbucket":t.scmProvider.bitbucketServer?"Bitbucket Server":t.scmProvider.gitea?"Gitea":t.scmProvider.azureDevOps?"Azure DevOps":"Unknown"})`,icon:f.jsx(SI,{size:12,className:"text-green-400"}),details:t.scmProvider.github?.organization||t.scmProvider.gitlab?.group||t.scmProvider.bitbucket?.owner||t.scmProvider.azureDevOps?.organization}:t.pullRequest?{name:`Pull Request (${t.pullRequest.github?"GitHub":t.pullRequest.gitlab?"GitLab":t.pullRequest.bitbucketServer?"Bitbucket Server":"Unknown"})`,icon:f.jsx(r0,{size:12,className:"text-pink-400"}),details:t.pullRequest.github?.repo||t.pullRequest.gitlab?.project||t.pullRequest.bitbucketServer?.repo}:t.clusterDecisionResource?{name:"Cluster Decision Resource",icon:f.jsx(VI,{size:12,className:"text-indigo-400"}),details:t.clusterDecisionResource.configMapRef}:{name:"Unknown",icon:f.jsx(cf,{size:12,className:"text-gray-400"})}}function hK(t){if(!t)return"Unknown";const e=t.match(/[:/]([^/:]+\/[^/:]+?)(?:\.git)?$/);return e?e[1]:t}function dK(t){if(!t)return"Unknown";const e=new Date(t),s=Math.floor((new Date().getTime()-e.getTime())/1e3);return s<60?`${s}s ago`:s<3600?`${Math.floor(s/60)}m ago`:s<86400?`${Math.floor(s/3600)}h ago`:`${Math.floor(s/86400)}d ago`}const fK={kinds:["ApplicationSet","ApplicationSets"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata;if(!n)return{sections:[]};const a=n.template,o=a?.spec?.source||a?.spec?.sources?.[0],c=oK(s?.conditions),h=s?.applicationStatus?.length||0,d=s?.conditions?.map(g=>({type:g.type||"Unknown",status:g.status||"Unknown",reason:g.reason,message:g.message}))||[];return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Status",value:c.status,status:c.level,icon:cK(c.level)},{label:"Applications",value:h,status:h>0?"success":"neutral",icon:f.jsx(tT,{size:14,className:h>0?"text-emerald-400":"text-gray-400"})},{label:"Generators",value:n.generators?.length||0,status:"neutral",icon:f.jsx(Xl,{size:14,className:"text-blue-400"})}]}},...n.generators?.length?[{id:"generators",title:"Generators",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.generators.map((g,m)=>{const v=uK(g);return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-2.5 flex items-center gap-3",children:[f.jsx("div",{className:"p-1.5 bg-neutral-200 dark:bg-neutral-700/50 rounded",children:v.icon}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"text-xs font-medium text-neutral-900 dark:text-neutral-200",children:v.name}),v.details&&f.jsx("div",{className:"text-[10px] text-neutral-500 truncate",title:v.details,children:v.details})]})]},m)})})}}]:[],...s?.applicationStatus?.length?[{id:"applications",title:"Generated Applications",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-1 max-h-60 overflow-y-auto",children:s.applicationStatus.map((g,m)=>{const v=g.status==="Successful"||g.status==="Healthy"?"success":g.status==="Waiting"||g.status==="Progressing"?"warning":g.status==="Error"||g.status==="Failed"?"error":"neutral";return f.jsxs("div",{className:"flex items-center gap-2 text-xs bg-neutral-100 dark:bg-neutral-800/30 rounded px-2 py-1.5",children:[v==="success"&&f.jsx(Lr,{size:12,className:"text-emerald-400 shrink-0"}),v==="warning"&&f.jsx(gn,{size:12,className:"text-amber-400 shrink-0"}),v==="error"&&f.jsx(bi,{size:12,className:"text-red-400 shrink-0"}),v==="neutral"&&f.jsx(cf,{size:12,className:"text-gray-400 shrink-0"}),f.jsx("span",{className:"text-neutral-700 dark:text-neutral-300 truncate flex-1",title:g.application,children:g.application||"Unknown"}),g.status&&f.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${v==="success"?"bg-emerald-500/20 text-emerald-400 border-emerald-500/30":v==="warning"?"bg-amber-500/20 text-amber-400 border-amber-500/30":v==="error"?"bg-red-500/20 text-red-400 border-red-500/30":"bg-gray-500/20 text-gray-400 border-gray-500/30"}`,children:g.status})]},g.application||m)})})}}]:[],...o?[{id:"template-source",title:"Template Source",data:{type:"info-grid",items:[{label:"Repository",value:hK(o.repoURL),color:"text-cyan-400"},{label:"Path",value:o.path||o.chart||"/",color:"text-purple-400"},{label:"Revision",value:o.targetRevision||"HEAD",color:"text-blue-400"}],columns:2}}]:[],...a?.spec?.destination?[{id:"template-destination",title:"Template Destination",data:{type:"info-grid",items:[{label:"Server",value:a.spec.destination.name||a.spec.destination.server||"{{server}}"},{label:"Namespace",value:a.spec.destination.namespace||"{{namespace}}",color:"text-cyan-400"},{label:"Project",value:a.spec.project||"default",color:"text-purple-400"}],columns:2}}]:[],...n.syncPolicy?[{id:"sync-policy",title:"Sync Policy",data:{type:"info-grid",items:[{label:"Preserve Resources on Deletion",value:n.syncPolicy.preserveResourcesOnDeletion?"Yes":"No",color:n.syncPolicy.preserveResourcesOnDeletion?"text-amber-400":void 0},...n.syncPolicy.applicationsSync?[{label:"Applications Sync",value:n.syncPolicy.applicationsSync,color:"text-blue-400"}]:[]],columns:2}}]:[],...n.strategy?[{id:"strategy",title:"Rollout Strategy",data:{type:"info-grid",items:[{label:"Type",value:n.strategy.type||"AllAtOnce",color:n.strategy.type==="RollingSync"?"text-cyan-400":void 0},...n.strategy.rollingSync?.steps?.length?[{label:"Steps",value:n.strategy.rollingSync.steps.length}]:[]],columns:2}}]:[],...n.goTemplate!==void 0?[{id:"template-options",title:"Template Options",data:{type:"info-grid",items:[{label:"Go Template",value:n.goTemplate?"Enabled":"Disabled",color:n.goTemplate?"text-emerald-400":"text-gray-400"},...n.goTemplateOptions?.length?[{label:"Options",value:n.goTemplateOptions.join(", ")}]:[]],columns:2}}]:[],...r?.creationTimestamp?[{id:"timing",data:{type:"info-grid",items:[{label:"Created",value:dK(r.creationTimestamp)}],columns:1}}]:[],...d.length>0?[{id:"conditions",title:"Conditions",data:{type:"conditions",items:d}}]:[]]}}};function pK(t){const e=t?.find(n=>n.type==="Ready");return e?{ready:e.status==="True",reason:e.reason,message:e.message}:{ready:!1}}function mK(t,e){return t?"success":e==="Issuing"||e==="Pending"?"warning":"error"}function gK(t,e){return t?f.jsx(Lr,{size:14,className:"text-emerald-400"}):e==="Issuing"||e==="Pending"?f.jsx(gn,{size:14,className:"text-amber-400 animate-spin"}):f.jsx(bi,{size:14,className:"text-red-400"})}function yK(t){if(!t)return"Default (90d)";const e=t.match(/^(\d+)h$/);if(e){const n=parseInt(e[1],10);return n>=8760?`${Math.round(n/8760)}y`:n>=720?`${Math.round(n/720)}mo`:n>=24?`${Math.round(n/24)}d`:`${n}h`}return t}function dm(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function vK(t){if(!t)return{text:"Unknown",status:"neutral"};const e=new Date,s=new Date(t).getTime()-e.getTime(),r=Math.floor(s/(1e3*60*60*24));return s<0?{text:"Expired",status:"error"}:r<7?{text:`${r}d remaining`,status:"error"}:r<30?{text:`${r}d remaining`,status:"warning"}:r>365?{text:`${Math.floor(r/365)}y remaining`,status:"success"}:r>30?{text:`${Math.floor(r/30)}mo remaining`,status:"success"}:{text:`${r}d remaining`,status:"success"}}function bK(t){if(!t)return"RSA 2048";const e=t.algorithm??"RSA",n=t.size??(e==="ECDSA"?256:2048);return`${e} ${n}`}const _K={kinds:["Certificate","Certificates"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const{ready:r,reason:a}=pK(s?.conditions),o=vK(s?.notAfter),c=[{id:"status",data:{type:"status-cards",items:[{label:"Status",value:r?"Ready":a??"Not Ready",status:mK(r,a),icon:gK(r,a)},{label:"Expires",value:o.text,status:o.status,icon:f.jsx(ll,{size:14,className:o.status==="error"?"text-red-400":o.status==="warning"?"text-amber-400":"text-emerald-400"})},{label:"Type",value:n.isCA?"CA Certificate":"TLS Certificate",status:"neutral",icon:f.jsx(lu,{size:14,className:n.isCA?"text-purple-400":"text-blue-400"})},{label:"Revision",value:s?.revision??1,status:"neutral"}]}}];if(c.push({id:"details",title:"Certificate Details",data:{type:"info-grid",columns:2,items:[{label:"Secret Name",value:n.secretName},...n.commonName?[{label:"Common Name",value:n.commonName}]:[],{label:"Duration",value:yK(n.duration)},{label:"Algorithm",value:bK(n.privateKey)},...s?.notBefore?[{label:"Valid From",value:dm(s.notBefore)}]:[],...s?.notAfter?[{label:"Valid Until",value:dm(s.notAfter)}]:[],...s?.renewalTime?[{label:"Renewal Time",value:dm(s.renewalTime)}]:[]]}}),c.push({id:"issuer",title:"Issuer",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(hf,{size:14,className:"text-purple-400"}),f.jsx("span",{className:"text-sm font-medium text-purple-300",children:n.issuerRef.kind??"Issuer"})]}),f.jsx("div",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:n.issuerRef.name}),n.issuerRef.group&&f.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:n.issuerRef.group})]})}}),n.dnsNames?.length&&c.push({id:"dns-names",title:"DNS Names",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.dnsNames.map((h,d)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-blue-500/20 text-blue-300 border border-blue-500/30",children:h},d))})}}),n.ipAddresses?.length&&c.push({id:"ip-addresses",title:"IP Addresses",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.ipAddresses.map((h,d)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-cyan-500/20 text-cyan-300 border border-cyan-500/30",children:h},d))})}}),n.uris?.length&&c.push({id:"uris",title:"URIs",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-1",children:n.uris.map((h,d)=>f.jsx("div",{className:"text-xs text-neutral-700 dark:text-neutral-300 font-mono",children:h},d))})}}),n.emailAddresses?.length&&c.push({id:"email-addresses",title:"Email Addresses",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.emailAddresses.map((h,d)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-amber-500/20 text-amber-300 border border-amber-500/30",children:h},d))})}}),n.usages?.length&&c.push({id:"usages",title:"Key Usages",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.usages.map((h,d)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-neutral-200 dark:bg-neutral-700 text-neutral-700 dark:text-neutral-300",children:h},d))})}}),n.privateKey&&c.push({id:"private-key",title:"Private Key",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(fg,{size:14,className:"text-neutral-400"}),f.jsx("span",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Configuration"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-500",children:"Algorithm:"}),f.jsx("span",{className:"ml-1 text-neutral-700 dark:text-neutral-300",children:n.privateKey.algorithm??"RSA"})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-500",children:"Size:"}),f.jsx("span",{className:"ml-1 text-neutral-700 dark:text-neutral-300",children:n.privateKey.size??2048})]}),n.privateKey.encoding&&f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-500",children:"Encoding:"}),f.jsx("span",{className:"ml-1 text-neutral-700 dark:text-neutral-300",children:n.privateKey.encoding})]}),n.privateKey.rotationPolicy&&f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-500",children:"Rotation:"}),f.jsx("span",{className:"ml-1 text-neutral-700 dark:text-neutral-300",children:n.privateKey.rotationPolicy})]})]})]})}}),n.subject&&Object.keys(n.subject).some(h=>{const d=n.subject[h];return Array.isArray(d)?d.length>0:!!d})){const h=[];n.subject.organizations?.length&&h.push(`O=${n.subject.organizations.join(", ")}`),n.subject.organizationalUnits?.length&&h.push(`OU=${n.subject.organizationalUnits.join(", ")}`),n.subject.countries?.length&&h.push(`C=${n.subject.countries.join(", ")}`),n.subject.localities?.length&&h.push(`L=${n.subject.localities.join(", ")}`),n.subject.provinces?.length&&h.push(`ST=${n.subject.provinces.join(", ")}`),c.push({id:"subject",title:"Subject",data:{type:"custom",render:()=>f.jsx("div",{className:"text-xs text-neutral-700 dark:text-neutral-300 font-mono bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:h.join(", ")})}})}if(n.keystores){const h=[];n.keystores.jks?.create&&h.push("JKS"),n.keystores.pkcs12?.create&&h.push("PKCS#12"),h.length>0&&c.push({id:"keystores",title:"Keystores",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:h.map((d,g)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-green-500/20 text-green-300 border border-green-500/30",children:d},g))})}})}return s?.failedIssuanceAttempts&&s.failedIssuanceAttempts>0&&c.push({id:"failed-issuance",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 text-red-400",children:[f.jsx(mo,{size:14}),f.jsxs("span",{className:"text-sm font-medium",children:["Failed Issuance Attempts: ",s.failedIssuanceAttempts]})]}),s.lastFailureTime&&f.jsxs("div",{className:"text-xs text-neutral-500 mt-1",children:["Last failure: ",dm(s.lastFailureTime)]})]})}}),s?.conditions&&s.conditions.length>0&&c.push({id:"conditions",title:"Conditions",data:{type:"conditions",items:s.conditions.map(h=>({type:h.type??"",status:h.status??"Unknown",reason:h.reason,message:h.message}))}}),{sections:c}}};var XE={};var JE;function xK(){if(JE)return XE;JE=1;var t;return(function(e){(function(n){var s=typeof globalThis=="object"?globalThis:typeof c5=="object"?c5:typeof self=="object"?self:typeof this=="object"?this:h(),r=a(e);typeof s.Reflect<"u"&&(r=a(s.Reflect,r)),n(r,s),typeof s.Reflect>"u"&&(s.Reflect=e);function a(d,g){return function(m,v){Object.defineProperty(d,m,{configurable:!0,writable:!0,value:v}),g&&g(m,v)}}function o(){try{return Function("return this;")()}catch{}}function c(){try{return(0,eval)("(function() { return this; })()")}catch{}}function h(){return o()||c()}})(function(n,s){var r=Object.prototype.hasOwnProperty,a=typeof Symbol=="function",o=a&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",c=a&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",h=typeof Object.create=="function",d={__proto__:[]}instanceof Array,g=!h&&!d,m={create:h?function(){return jn(Object.create(null))}:d?function(){return jn({__proto__:null})}:function(){return jn({})},has:g?function(re,ae){return r.call(re,ae)}:function(re,ae){return ae in re},get:g?function(re,ae){return r.call(re,ae)?re[ae]:void 0}:function(re,ae){return re[ae]}},v=Object.getPrototypeOf(Function),y=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Ke(),x=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:it(),w=typeof WeakMap=="function"?WeakMap:St(),S=a?Symbol.for("@reflect-metadata:registry"):void 0,k=Rt(),C=Wn(k);function A(re,ae,fe,Se){if(E(fe)){if(!Ge(re))throw new TypeError;if(!tt(ae))throw new TypeError;return K(re,ae)}else{if(!Ge(re))throw new TypeError;if(!ne(ae))throw new TypeError;if(!ne(Se)&&!E(Se)&&!Z(Se))throw new TypeError;return Z(Se)&&(Se=void 0),fe=Ce(fe),J(re,ae,fe,Se)}}n("decorate",A);function B(re,ae){function fe(Se,Oe){if(!ne(Se))throw new TypeError;if(!E(Oe)&&!mt(Oe))throw new TypeError;D(re,ae,Se,Oe)}return fe}n("metadata",B);function M(re,ae,fe,Se){if(!ne(fe))throw new TypeError;return E(Se)||(Se=Ce(Se)),D(re,ae,fe,Se)}n("defineMetadata",M);function T(re,ae,fe){if(!ne(ae))throw new TypeError;return E(fe)||(fe=Ce(fe)),q(re,ae,fe)}n("hasMetadata",T);function H(re,ae,fe){if(!ne(ae))throw new TypeError;return E(fe)||(fe=Ce(fe)),P(re,ae,fe)}n("hasOwnMetadata",H);function $(re,ae,fe){if(!ne(ae))throw new TypeError;return E(fe)||(fe=Ce(fe)),X(re,ae,fe)}n("getMetadata",$);function G(re,ae,fe){if(!ne(ae))throw new TypeError;return E(fe)||(fe=Ce(fe)),U(re,ae,fe)}n("getOwnMetadata",G);function z(re,ae){if(!ne(re))throw new TypeError;return E(ae)||(ae=Ce(ae)),O(re,ae)}n("getMetadataKeys",z);function Q(re,ae){if(!ne(re))throw new TypeError;return E(ae)||(ae=Ce(ae)),R(re,ae)}n("getOwnMetadataKeys",Q);function F(re,ae,fe){if(!ne(ae))throw new TypeError;if(E(fe)||(fe=Ce(fe)),!ne(ae))throw new TypeError;E(fe)||(fe=Ce(fe));var Se=_e(ae,fe,!1);return E(Se)?!1:Se.OrdinaryDeleteMetadata(re,ae,fe)}n("deleteMetadata",F);function K(re,ae){for(var fe=re.length-1;fe>=0;--fe){var Se=re[fe],Oe=Se(ae);if(!E(Oe)&&!Z(Oe)){if(!tt(Oe))throw new TypeError;ae=Oe}}return ae}function J(re,ae,fe,Se){for(var Oe=re.length-1;Oe>=0;--Oe){var It=re[Oe],Bt=It(ae,fe,Se);if(!E(Bt)&&!Z(Bt)){if(!ne(Bt))throw new TypeError;Se=Bt}}return Se}function q(re,ae,fe){var Se=P(re,ae,fe);if(Se)return!0;var Oe=rt(ae);return Z(Oe)?!1:q(re,Oe,fe)}function P(re,ae,fe){var Se=_e(ae,fe,!1);return E(Se)?!1:Ee(Se.OrdinaryHasOwnMetadata(re,ae,fe))}function X(re,ae,fe){var Se=P(re,ae,fe);if(Se)return U(re,ae,fe);var Oe=rt(ae);if(!Z(Oe))return X(re,Oe,fe)}function U(re,ae,fe){var Se=_e(ae,fe,!1);if(!E(Se))return Se.OrdinaryGetOwnMetadata(re,ae,fe)}function D(re,ae,fe,Se){var Oe=_e(fe,Se,!0);Oe.OrdinaryDefineOwnMetadata(re,ae,fe,Se)}function O(re,ae){var fe=R(re,ae),Se=rt(re);if(Se===null)return fe;var Oe=O(Se,ae);if(Oe.length<=0)return fe;if(fe.length<=0)return Oe;for(var It=new x,Bt=[],yt=0,Be=fe;yt<Be.length;yt++){var De=Be[yt],Pe=It.has(De);Pe||(It.add(De),Bt.push(De))}for(var ze=0,dt=Oe;ze<dt.length;ze++){var De=dt[ze],Pe=It.has(De);Pe||(It.add(De),Bt.push(De))}return Bt}function R(re,ae){var fe=_e(re,ae,!1);return fe?fe.OrdinaryOwnMetadataKeys(re,ae):[]}function V(re){if(re===null)return 1;switch(typeof re){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return re===null?1:6;default:return 6}}function E(re){return re===void 0}function Z(re){return re===null}function ue(re){return typeof re=="symbol"}function ne(re){return typeof re=="object"?re!==null:typeof re=="function"}function de(re,ae){switch(V(re)){case 0:return re;case 1:return re;case 2:return re;case 3:return re;case 4:return re;case 5:return re}var fe="string",Se=Lt(re,o);if(Se!==void 0){var Oe=Se.call(re,fe);if(ne(Oe))throw new TypeError;return Oe}return we(re)}function we(re,ae){var fe,Se,Oe;{var It=re.toString;if(Te(It)){var Se=It.call(re);if(!ne(Se))return Se}var fe=re.valueOf;if(Te(fe)){var Se=fe.call(re);if(!ne(Se))return Se}}throw new TypeError}function Ee(re){return!!re}function et(re){return""+re}function Ce(re){var ae=de(re);return ue(ae)?ae:et(ae)}function Ge(re){return Array.isArray?Array.isArray(re):re instanceof Object?re instanceof Array:Object.prototype.toString.call(re)==="[object Array]"}function Te(re){return typeof re=="function"}function tt(re){return typeof re=="function"}function mt(re){switch(V(re)){case 3:return!0;case 4:return!0;default:return!1}}function ht(re,ae){return re===ae||re!==re&&ae!==ae}function Lt(re,ae){var fe=re[ae];if(fe!=null){if(!Te(fe))throw new TypeError;return fe}}function bn(re){var ae=Lt(re,c);if(!Te(ae))throw new TypeError;var fe=ae.call(re);if(!ne(fe))throw new TypeError;return fe}function ls(re){return re.value}function Es(re){var ae=re.next();return ae.done?!1:ae}function Qe(re){var ae=re.return;ae&&ae.call(re)}function rt(re){var ae=Object.getPrototypeOf(re);if(typeof re!="function"||re===v||ae!==v)return ae;var fe=re.prototype,Se=fe&&Object.getPrototypeOf(fe);if(Se==null||Se===Object.prototype)return ae;var Oe=Se.constructor;return typeof Oe!="function"||Oe===re?ae:Oe}function Zt(){var re;!E(S)&&typeof s.Reflect<"u"&&!(S in s.Reflect)&&typeof s.Reflect.defineMetadata=="function"&&(re=pe(s.Reflect));var ae,fe,Se,Oe=new w,It={registerProvider:Bt,getProvider:Be,setProvider:Pe};return It;function Bt(ze){if(!Object.isExtensible(It))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case re===ze:break;case E(ae):ae=ze;break;case ae===ze:break;case E(fe):fe=ze;break;case fe===ze:break;default:Se===void 0&&(Se=new x),Se.add(ze);break}}function yt(ze,dt){if(!E(ae)){if(ae.isProviderFor(ze,dt))return ae;if(!E(fe)){if(fe.isProviderFor(ze,dt))return ae;if(!E(Se))for(var Mt=bn(Se);;){var sn=Es(Mt);if(!sn)return;var As=ls(sn);if(As.isProviderFor(ze,dt))return Qe(Mt),As}}}if(!E(re)&&re.isProviderFor(ze,dt))return re}function Be(ze,dt){var Mt=Oe.get(ze),sn;return E(Mt)||(sn=Mt.get(dt)),E(sn)&&(sn=yt(ze,dt),E(sn)||(E(Mt)&&(Mt=new y,Oe.set(ze,Mt)),Mt.set(dt,sn))),sn}function De(ze){if(E(ze))throw new TypeError;return ae===ze||fe===ze||!E(Se)&&Se.has(ze)}function Pe(ze,dt,Mt){if(!De(Mt))throw new Error("Metadata provider not registered.");var sn=Be(ze,dt);if(sn!==Mt){if(!E(sn))return!1;var As=Oe.get(ze);E(As)&&(As=new y,Oe.set(ze,As)),As.set(dt,Mt)}return!0}}function Rt(){var re;return!E(S)&&ne(s.Reflect)&&Object.isExtensible(s.Reflect)&&(re=s.Reflect[S]),E(re)&&(re=Zt()),!E(S)&&ne(s.Reflect)&&Object.isExtensible(s.Reflect)&&Object.defineProperty(s.Reflect,S,{enumerable:!1,configurable:!1,writable:!1,value:re}),re}function Wn(re){var ae=new w,fe={isProviderFor:function(De,Pe){var ze=ae.get(De);return E(ze)?!1:ze.has(Pe)},OrdinaryDefineOwnMetadata:Bt,OrdinaryHasOwnMetadata:Oe,OrdinaryGetOwnMetadata:It,OrdinaryOwnMetadataKeys:yt,OrdinaryDeleteMetadata:Be};return k.registerProvider(fe),fe;function Se(De,Pe,ze){var dt=ae.get(De),Mt=!1;if(E(dt)){if(!ze)return;dt=new y,ae.set(De,dt),Mt=!0}var sn=dt.get(Pe);if(E(sn)){if(!ze)return;if(sn=new y,dt.set(Pe,sn),!re.setProvider(De,Pe,fe))throw dt.delete(Pe),Mt&&ae.delete(De),new Error("Wrong provider for target.")}return sn}function Oe(De,Pe,ze){var dt=Se(Pe,ze,!1);return E(dt)?!1:Ee(dt.has(De))}function It(De,Pe,ze){var dt=Se(Pe,ze,!1);if(!E(dt))return dt.get(De)}function Bt(De,Pe,ze,dt){var Mt=Se(ze,dt,!0);Mt.set(De,Pe)}function yt(De,Pe){var ze=[],dt=Se(De,Pe,!1);if(E(dt))return ze;for(var Mt=dt.keys(),sn=bn(Mt),As=0;;){var So=Es(sn);if(!So)return ze.length=As,ze;var hl=ls(So);try{ze[As]=hl}catch(Ly){try{Qe(sn)}finally{throw Ly}}As++}}function Be(De,Pe,ze){var dt=Se(Pe,ze,!1);if(E(dt)||!dt.delete(De))return!1;if(dt.size===0){var Mt=ae.get(Pe);E(Mt)||(Mt.delete(ze),Mt.size===0&&ae.delete(Mt))}return!0}}function pe(re){var ae=re.defineMetadata,fe=re.hasOwnMetadata,Se=re.getOwnMetadata,Oe=re.getOwnMetadataKeys,It=re.deleteMetadata,Bt=new w,yt={isProviderFor:function(Be,De){var Pe=Bt.get(Be);return!E(Pe)&&Pe.has(De)?!0:Oe(Be,De).length?(E(Pe)&&(Pe=new x,Bt.set(Be,Pe)),Pe.add(De),!0):!1},OrdinaryDefineOwnMetadata:ae,OrdinaryHasOwnMetadata:fe,OrdinaryGetOwnMetadata:Se,OrdinaryOwnMetadataKeys:Oe,OrdinaryDeleteMetadata:It};return yt}function _e(re,ae,fe){var Se=k.getProvider(re,ae);if(!E(Se))return Se;if(fe){if(k.setProvider(re,ae,C))return C;throw new Error("Illegal state.")}}function Ke(){var re={},ae=[],fe=(function(){function yt(Be,De,Pe){this._index=0,this._keys=Be,this._values=De,this._selector=Pe}return yt.prototype["@@iterator"]=function(){return this},yt.prototype[c]=function(){return this},yt.prototype.next=function(){var Be=this._index;if(Be>=0&&Be<this._keys.length){var De=this._selector(this._keys[Be],this._values[Be]);return Be+1>=this._keys.length?(this._index=-1,this._keys=ae,this._values=ae):this._index++,{value:De,done:!1}}return{value:void 0,done:!0}},yt.prototype.throw=function(Be){throw this._index>=0&&(this._index=-1,this._keys=ae,this._values=ae),Be},yt.prototype.return=function(Be){return this._index>=0&&(this._index=-1,this._keys=ae,this._values=ae),{value:Be,done:!0}},yt})(),Se=(function(){function yt(){this._keys=[],this._values=[],this._cacheKey=re,this._cacheIndex=-2}return Object.defineProperty(yt.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),yt.prototype.has=function(Be){return this._find(Be,!1)>=0},yt.prototype.get=function(Be){var De=this._find(Be,!1);return De>=0?this._values[De]:void 0},yt.prototype.set=function(Be,De){var Pe=this._find(Be,!0);return this._values[Pe]=De,this},yt.prototype.delete=function(Be){var De=this._find(Be,!1);if(De>=0){for(var Pe=this._keys.length,ze=De+1;ze<Pe;ze++)this._keys[ze-1]=this._keys[ze],this._values[ze-1]=this._values[ze];return this._keys.length--,this._values.length--,ht(Be,this._cacheKey)&&(this._cacheKey=re,this._cacheIndex=-2),!0}return!1},yt.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=re,this._cacheIndex=-2},yt.prototype.keys=function(){return new fe(this._keys,this._values,Oe)},yt.prototype.values=function(){return new fe(this._keys,this._values,It)},yt.prototype.entries=function(){return new fe(this._keys,this._values,Bt)},yt.prototype["@@iterator"]=function(){return this.entries()},yt.prototype[c]=function(){return this.entries()},yt.prototype._find=function(Be,De){if(!ht(this._cacheKey,Be)){this._cacheIndex=-1;for(var Pe=0;Pe<this._keys.length;Pe++)if(ht(this._keys[Pe],Be)){this._cacheIndex=Pe;break}}return this._cacheIndex<0&&De&&(this._cacheIndex=this._keys.length,this._keys.push(Be),this._values.push(void 0)),this._cacheIndex},yt})();return Se;function Oe(yt,Be){return yt}function It(yt,Be){return Be}function Bt(yt,Be){return[yt,Be]}}function it(){var re=(function(){function ae(){this._map=new y}return Object.defineProperty(ae.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),ae.prototype.has=function(fe){return this._map.has(fe)},ae.prototype.add=function(fe){return this._map.set(fe,fe),this},ae.prototype.delete=function(fe){return this._map.delete(fe)},ae.prototype.clear=function(){this._map.clear()},ae.prototype.keys=function(){return this._map.keys()},ae.prototype.values=function(){return this._map.keys()},ae.prototype.entries=function(){return this._map.entries()},ae.prototype["@@iterator"]=function(){return this.keys()},ae.prototype[c]=function(){return this.keys()},ae})();return re}function St(){var re=16,ae=m.create(),fe=Se();return(function(){function Be(){this._key=Se()}return Be.prototype.has=function(De){var Pe=Oe(De,!1);return Pe!==void 0?m.has(Pe,this._key):!1},Be.prototype.get=function(De){var Pe=Oe(De,!1);return Pe!==void 0?m.get(Pe,this._key):void 0},Be.prototype.set=function(De,Pe){var ze=Oe(De,!0);return ze[this._key]=Pe,this},Be.prototype.delete=function(De){var Pe=Oe(De,!1);return Pe!==void 0?delete Pe[this._key]:!1},Be.prototype.clear=function(){this._key=Se()},Be})();function Se(){var Be;do Be="@@WeakMap@@"+yt();while(m.has(ae,Be));return ae[Be]=!0,Be}function Oe(Be,De){if(!r.call(Be,fe)){if(!De)return;Object.defineProperty(Be,fe,{value:m.create()})}return Be[fe]}function It(Be,De){for(var Pe=0;Pe<De;++Pe)Be[Pe]=Math.random()*255|0;return Be}function Bt(Be){if(typeof Uint8Array=="function"){var De=new Uint8Array(Be);return typeof crypto<"u"?crypto.getRandomValues(De):typeof msCrypto<"u"?msCrypto.getRandomValues(De):It(De,Be),De}return It(new Array(Be),Be)}function yt(){var Be=Bt(re);Be[6]=Be[6]&79|64,Be[8]=Be[8]&191|128;for(var De="",Pe=0;Pe<re;++Pe){var ze=Be[Pe];(Pe===4||Pe===6||Pe===8)&&(De+="-"),ze<16&&(De+="0"),De+=ze.toString(16).toLowerCase()}return De}}function jn(re){return re.__=void 0,delete re.__,re}})})(t||(t={})),XE}xK();const wK="[object ArrayBuffer]";class Re{static isArrayBuffer(e){return Object.prototype.toString.call(e)===wK}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:e.byteLength===e.buffer.byteLength||e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,n){if(e.constructor===n)return e;if(this.isArrayBuffer(e))return new n(e);if(this.isArrayBufferView(e))return new n(e.buffer,e.byteOffset,e.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,n){const s=Re.toUint8Array(e),r=Re.toUint8Array(n);if(s.length!==r.byteLength)return!1;for(let a=0;a<s.length;a++)if(s[a]!==r[a])return!1;return!0}static concat(...e){let n;Array.isArray(e[0])&&!(e[1]instanceof Function)||Array.isArray(e[0])&&e[1]instanceof Function?n=e[0]:e[e.length-1]instanceof Function?n=e.slice(0,e.length-1):n=e;let s=0;for(const o of n)s+=o.byteLength;const r=new Uint8Array(s);let a=0;for(const o of n){const c=this.toUint8Array(o);r.set(c,a),a+=c.length}return e[e.length-1]instanceof Function?this.toView(r,e[e.length-1]):r.buffer}}const Tb="string",SK=/^[0-9a-f\s]+$/i,kK=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,CK=/^[a-zA-Z0-9-_]+$/;class QE{static fromString(e){const n=unescape(encodeURIComponent(e)),s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s.buffer}static toString(e){const n=Re.toUint8Array(e);let s="";for(let a=0;a<n.length;a++)s+=String.fromCharCode(n[a]);return decodeURIComponent(escape(s))}}class si{static toString(e,n=!1){const s=Re.toArrayBuffer(e),r=new DataView(s);let a="";for(let o=0;o<s.byteLength;o+=2){const c=r.getUint16(o,n);a+=String.fromCharCode(c)}return a}static fromString(e,n=!1){const s=new ArrayBuffer(e.length*2),r=new DataView(s);for(let a=0;a<e.length;a++)r.setUint16(a*2,e.charCodeAt(a),n);return s}}class Fe{static isHex(e){return typeof e===Tb&&SK.test(e)}static isBase64(e){return typeof e===Tb&&kK.test(e)}static isBase64Url(e){return typeof e===Tb&&CK.test(e)}static ToString(e,n="utf8"){const s=Re.toUint8Array(e);switch(n.toLowerCase()){case"utf8":return this.ToUtf8String(s);case"binary":return this.ToBinary(s);case"hex":return this.ToHex(s);case"base64":return this.ToBase64(s);case"base64url":return this.ToBase64Url(s);case"utf16le":return si.toString(s,!0);case"utf16":case"utf16be":return si.toString(s);default:throw new Error(`Unknown type of encoding '${n}'`)}}static FromString(e,n="utf8"){if(!e)return new ArrayBuffer(0);switch(n.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return si.fromString(e,!0);case"utf16":case"utf16be":return si.fromString(e);default:throw new Error(`Unknown type of encoding '${n}'`)}}static ToBase64(e){const n=Re.toUint8Array(e);if(typeof btoa<"u"){const s=this.ToString(n,"binary");return btoa(s)}else return Buffer.from(n).toString("base64")}static FromBase64(e){const n=this.formatString(e);if(!n)return new ArrayBuffer(0);if(!Fe.isBase64(n))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return typeof atob<"u"?this.FromBinary(atob(n)):new Uint8Array(Buffer.from(n,"base64")).buffer}static FromBase64Url(e){const n=this.formatString(e);if(!n)return new ArrayBuffer(0);if(!Fe.isBase64Url(n))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(n.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,n=Fe.DEFAULT_UTF8_ENCODING){switch(n){case"ascii":return this.FromBinary(e);case"utf8":return QE.fromString(e);case"utf16":case"utf16be":return si.fromString(e);case"utf16le":case"usc2":return si.fromString(e,!0);default:throw new Error(`Unknown type of encoding '${n}'`)}}static ToUtf8String(e,n=Fe.DEFAULT_UTF8_ENCODING){switch(n){case"ascii":return this.ToBinary(e);case"utf8":return QE.toString(e);case"utf16":case"utf16be":return si.toString(e);case"utf16le":case"usc2":return si.toString(e,!0);default:throw new Error(`Unknown type of encoding '${n}'`)}}static FromBinary(e){const n=e.length,s=new Uint8Array(n);for(let r=0;r<n;r++)s[r]=e.charCodeAt(r);return s.buffer}static ToBinary(e){const n=Re.toUint8Array(e);let s="";for(let r=0;r<n.length;r++)s+=String.fromCharCode(n[r]);return s}static ToHex(e){const n=Re.toUint8Array(e);let s="";const r=n.length;for(let a=0;a<r;a++){const o=n[a];o<16&&(s+="0"),s+=o.toString(16)}return s}static FromHex(e){let n=this.formatString(e);if(!n)return new ArrayBuffer(0);if(!Fe.isHex(n))throw new TypeError("Argument 'hexString' is not HEX encoded");n.length%2&&(n=`0${n}`);const s=new Uint8Array(n.length/2);for(let r=0;r<n.length;r=r+2){const a=n.slice(r,r+2);s[r/2]=parseInt(a,16)}return s.buffer}static ToUtf16String(e,n=!1){return si.toString(e,n)}static FromUtf16String(e,n=!1){return si.fromString(e,n)}static Base64Padding(e){const n=4-e.length%4;if(n<4)for(let s=0;s<n;s++)e+="=";return e}static formatString(e){return e?.replace(/[\n\r\t ]/g,"")||""}}Fe.DEFAULT_UTF8_ENCODING="utf8";function NK(...t){const e=t.map(r=>r.byteLength).reduce((r,a)=>r+a),n=new Uint8Array(e);let s=0;return t.map(r=>new Uint8Array(r)).forEach(r=>{for(const a of r)n[s++]=a}),n.buffer}function YO(t,e){if(!(t&&e)||t.byteLength!==e.byteLength)return!1;const n=new Uint8Array(t),s=new Uint8Array(e);for(let r=0;r<t.byteLength;r++)if(n[r]!==s[r])return!1;return!0}function Uc(t,e){let n=0;if(t.length===1)return t[0];for(let s=t.length-1;s>=0;s--)n+=t[t.length-1-s]*Math.pow(2,e*s);return n}function Zl(t,e,n=-1){const s=n;let r=t,a=0,o=Math.pow(2,e);for(let c=1;c<8;c++){if(t<o){let h;if(s<0)h=new ArrayBuffer(c),a=c;else{if(s<c)return new ArrayBuffer(0);h=new ArrayBuffer(s),a=s}const d=new Uint8Array(h);for(let g=c-1;g>=0;g--){const m=Math.pow(2,g*e);d[a-g-1]=Math.floor(r/m),r-=d[a-g-1]*m}return h}o*=Math.pow(2,e)}return new ArrayBuffer(0)}function K_(...t){let e=0,n=0;for(const a of t)e+=a.length;const s=new ArrayBuffer(e),r=new Uint8Array(s);for(const a of t)r.set(a,n),n+=a.length;return r}function XO(){const t=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const c=t[0]===255&&t[1]&128,h=t[0]===0&&(t[1]&128)===0;(c||h)&&this.warnings.push("Needlessly long format")}const e=new ArrayBuffer(this.valueHex.byteLength),n=new Uint8Array(e);for(let c=0;c<this.valueHex.byteLength;c++)n[c]=0;n[0]=t[0]&128;const s=Uc(n,8),r=new ArrayBuffer(this.valueHex.byteLength),a=new Uint8Array(r);for(let c=0;c<this.valueHex.byteLength;c++)a[c]=t[c];return a[0]&=127,Uc(a,8)-s}function EK(t){const e=t<0?t*-1:t;let n=128;for(let s=1;s<8;s++){if(e<=n){if(t<0){const o=n-e,c=Zl(o,8,s),h=new Uint8Array(c);return h[0]|=128,c}let r=Zl(e,8,s),a=new Uint8Array(r);if(a[0]&128){const o=r.slice(0),c=new Uint8Array(o);r=new ArrayBuffer(r.byteLength+1),a=new Uint8Array(r);for(let h=0;h<o.byteLength;h++)a[h+1]=c[h];a[0]=0}return r}n*=Math.pow(2,8)}return new ArrayBuffer(0)}function AK(t,e){if(t.byteLength!==e.byteLength)return!1;const n=new Uint8Array(t),s=new Uint8Array(e);for(let r=0;r<n.length;r++)if(n[r]!==s[r])return!1;return!0}function lr(t,e){const n=t.toString(10);if(e<n.length)return"";const s=e-n.length,r=new Array(s);for(let o=0;o<s;o++)r[o]="0";return r.join("").concat(n)}function x0(){if(typeof BigInt>"u")throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function e2(t){let e=0,n=0;for(let r=0;r<t.length;r++){const a=t[r];e+=a.byteLength}const s=new Uint8Array(e);for(let r=0;r<t.length;r++){const a=t[r];s.set(new Uint8Array(a),n),n+=a.byteLength}return s.buffer}function oa(t,e,n,s){return e instanceof Uint8Array?e.byteLength?n<0?(t.error="Wrong parameter: inputOffset less than zero",!1):s<0?(t.error="Wrong parameter: inputLength less than zero",!1):e.byteLength-n-s<0?(t.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):!0:(t.error="Wrong parameter: inputBuffer has zero length",!1):(t.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class Og{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return e2(this.items)}}const Ah=[new Uint8Array([1])],ZE="0123456789",Ob="name",eA="valueHexView",jK="isHexOnly",TK="idBlock",OK="tagClass",RK="tagNumber",BK="isConstructed",MK="fromBER",DK="toBER",LK="local",$s="",xi=new ArrayBuffer(0),Rg=new Uint8Array(0),qd="EndOfContent",JO="OCTET STRING",QO="BIT STRING";function wi(t){var e;return e=class extends t{get valueHex(){return this.valueHexView.slice().buffer}set valueHex(s){this.valueHexView=new Uint8Array(s)}constructor(...s){var r;super(...s);const a=s[0]||{};this.isHexOnly=(r=a.isHexOnly)!==null&&r!==void 0?r:!1,this.valueHexView=a.valueHex?Re.toUint8Array(a.valueHex):Rg}fromBER(s,r,a){const o=s instanceof ArrayBuffer?new Uint8Array(s):s;if(!oa(this,o,r,a))return-1;const c=r+a;return this.valueHexView=o.subarray(r,c),this.valueHexView.length?(this.blockLength=a,c):(this.warnings.push("Zero buffer length"),r)}toBER(s=!1){return this.isHexOnly?s?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",xi)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:Fe.ToHex(this.valueHexView)}}},e.NAME="hexBlock",e}class vo{static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}constructor({blockLength:e=0,error:n=$s,warnings:s=[],valueBeforeDecode:r=Rg}={}){this.blockLength=e,this.error=n,this.warnings=s,this.valueBeforeDecodeView=Re.toUint8Array(r)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:Fe.ToHex(this.valueBeforeDecodeView)}}}vo.NAME="baseBlock";class ks extends vo{fromBER(e,n,s){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,n){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}ks.NAME="valueBlock";class ZO extends wi(vo){constructor({idBlock:e={}}={}){var n,s,r,a;super(),e?(this.isHexOnly=(n=e.isHexOnly)!==null&&n!==void 0?n:!1,this.valueHexView=e.valueHex?Re.toUint8Array(e.valueHex):Rg,this.tagClass=(s=e.tagClass)!==null&&s!==void 0?s:-1,this.tagNumber=(r=e.tagNumber)!==null&&r!==void 0?r:-1,this.isConstructed=(a=e.isConstructed)!==null&&a!==void 0?a:!1):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let n=0;switch(this.tagClass){case 1:n|=0;break;case 2:n|=64;break;case 3:n|=128;break;case 4:n|=192;break;default:return this.error="Unknown tag class",xi}if(this.isConstructed&&(n|=32),this.tagNumber<31&&!this.isHexOnly){const r=new Uint8Array(1);if(!e){let a=this.tagNumber;a&=31,n|=a,r[0]=n}return r.buffer}if(!this.isHexOnly){const r=Zl(this.tagNumber,7),a=new Uint8Array(r),o=r.byteLength,c=new Uint8Array(o+1);if(c[0]=n|31,!e){for(let h=0;h<o-1;h++)c[h+1]=a[h]|128;c[o]=a[o-1]}return c.buffer}const s=new Uint8Array(this.valueHexView.byteLength+1);if(s[0]=n|31,!e){const r=this.valueHexView;for(let a=0;a<r.length-1;a++)s[a+1]=r[a]|128;s[this.valueHexView.byteLength]=r[r.length-1]}return s.buffer}fromBER(e,n,s){const r=Re.toUint8Array(e);if(!oa(this,r,n,s))return-1;const a=r.subarray(n,n+s);if(a.length===0)return this.error="Zero buffer length",-1;switch(a[0]&192){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(a[0]&32)===32,this.isHexOnly=!1;const c=a[0]&31;if(c!==31)this.tagNumber=c,this.blockLength=1;else{let h=1,d=this.valueHexView=new Uint8Array(255),g=255;for(;a[h]&128;){if(d[h-1]=a[h]&127,h++,h>=a.length)return this.error="End of input reached before message was fully decoded",-1;if(h===g){g+=255;const v=new Uint8Array(g);for(let y=0;y<d.length;y++)v[y]=d[y];d=this.valueHexView=new Uint8Array(g)}}this.blockLength=h+1,d[h-1]=a[h]&127;const m=new Uint8Array(h);for(let v=0;v<h;v++)m[v]=d[v];d=this.valueHexView=new Uint8Array(h),d.set(m),this.blockLength<=9?this.tagNumber=Uc(d,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(this.tagClass===1&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return n+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}ZO.NAME="identificationBlock";class eR extends vo{constructor({lenBlock:e={}}={}){var n,s,r;super(),this.isIndefiniteForm=(n=e.isIndefiniteForm)!==null&&n!==void 0?n:!1,this.longFormUsed=(s=e.longFormUsed)!==null&&s!==void 0?s:!1,this.length=(r=e.length)!==null&&r!==void 0?r:0}fromBER(e,n,s){const r=Re.toUint8Array(e);if(!oa(this,r,n,s))return-1;const a=r.subarray(n,n+s);if(a.length===0)return this.error="Zero buffer length",-1;if(a[0]===255)return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=a[0]===128,this.isIndefiniteForm)return this.blockLength=1,n+this.blockLength;if(this.longFormUsed=!!(a[0]&128),this.longFormUsed===!1)return this.length=a[0],this.blockLength=1,n+this.blockLength;const o=a[0]&127;if(o>8)return this.error="Too big integer",-1;if(o+1>a.length)return this.error="End of input reached before message was fully decoded",-1;const c=n+1,h=r.subarray(c,c+o);return h[o-1]===0&&this.warnings.push("Needlessly long encoded length"),this.length=Uc(h,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=o+1,n+this.blockLength}toBER(e=!1){let n,s;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return n=new ArrayBuffer(1),e===!1&&(s=new Uint8Array(n),s[0]=128),n;if(this.longFormUsed){const r=Zl(this.length,8);if(r.byteLength>127)return this.error="Too big length",xi;if(n=new ArrayBuffer(r.byteLength+1),e)return n;const a=new Uint8Array(r);s=new Uint8Array(n),s[0]=r.byteLength|128;for(let o=0;o<r.byteLength;o++)s[o+1]=a[o];return n}return n=new ArrayBuffer(1),e===!1&&(s=new Uint8Array(n),s[0]=this.length),n}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}eR.NAME="lengthBlock";const $e={};class is extends vo{constructor({name:e=$s,optional:n=!1,primitiveSchema:s,...r}={},a){super(r),this.name=e,this.optional=n,s&&(this.primitiveSchema=s),this.idBlock=new ZO(r),this.lenBlock=new eR(r),this.valueBlock=a?new a(r):new ks(r)}fromBER(e,n,s){const r=this.valueBlock.fromBER(e,n,this.lenBlock.isIndefiniteForm?s:this.lenBlock.length);return r===-1?(this.error=this.valueBlock.error,r):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}toBER(e,n){const s=n||new Og;n||tR(this);const r=this.idBlock.toBER(e);if(s.write(r),this.lenBlock.isIndefiniteForm)s.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,s),s.write(new ArrayBuffer(2));else{const a=this.valueBlock.toBER(e);this.lenBlock.length=a.byteLength;const o=this.lenBlock.toBER(e);s.write(o),s.write(a)}return n?xi:s.final()}toJSON(){const e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return e==="ascii"?this.onAsciiEncoding():Fe.ToHex(this.toBER())}onAsciiEncoding(){const e=this.constructor.NAME,n=Fe.ToHex(this.valueBlock.valueBeforeDecodeView);return`${e} : ${n}`}isEqual(e){if(this===e)return!0;if(!(e instanceof this.constructor))return!1;const n=this.toBER(),s=e.toBER();return AK(n,s)}}is.NAME="BaseBlock";function tR(t){var e;if(t instanceof $e.Constructed)for(const n of t.valueBlock.value)tR(n)&&(t.lenBlock.isIndefiniteForm=!0);return!!(!((e=t.lenBlock)===null||e===void 0)&&e.isIndefiniteForm)}class t2 extends is{getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}constructor({value:e=$s,...n}={},s){super(n,s),e&&this.fromString(e)}fromBER(e,n,s){const r=this.valueBlock.fromBER(e,n,this.lenBlock.isIndefiniteForm?s:this.lenBlock.length);return r===-1?(this.error=this.valueBlock.error,r):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}t2.NAME="BaseStringBlock";class nR extends wi(ks){constructor({isHexOnly:e=!0,...n}={}){super(n),this.isHexOnly=e}}nR.NAME="PrimitiveValueBlock";var sR;class vf extends is{constructor(e={}){super(e,nR),this.idBlock.isConstructed=!1}}sR=vf;$e.Primitive=sR;vf.NAME="PRIMITIVE";function IK(t,e){if(t instanceof e)return t;const n=new e;return n.idBlock=t.idBlock,n.lenBlock=t.lenBlock,n.warnings=t.warnings,n.valueBeforeDecodeView=t.valueBeforeDecodeView,n}function pu(t,e=0,n=t.length){const s=e;let r=new is({},ks);const a=new vo;if(!oa(a,t,e,n))return r.error=a.error,{offset:-1,result:r};if(!t.subarray(e,e+n).length)return r.error="Zero buffer length",{offset:-1,result:r};let c=r.idBlock.fromBER(t,e,n);if(r.idBlock.warnings.length&&r.warnings.concat(r.idBlock.warnings),c===-1)return r.error=r.idBlock.error,{offset:-1,result:r};if(e=c,n-=r.idBlock.blockLength,c=r.lenBlock.fromBER(t,e,n),r.lenBlock.warnings.length&&r.warnings.concat(r.lenBlock.warnings),c===-1)return r.error=r.lenBlock.error,{offset:-1,result:r};if(e=c,n-=r.lenBlock.blockLength,!r.idBlock.isConstructed&&r.lenBlock.isIndefiniteForm)return r.error="Indefinite length form used for primitive encoding form",{offset:-1,result:r};let h=is;switch(r.idBlock.tagClass){case 1:if(r.idBlock.tagNumber>=37&&r.idBlock.isHexOnly===!1)return r.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:r};switch(r.idBlock.tagNumber){case 0:if(r.idBlock.isConstructed&&r.lenBlock.length>0)return r.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:r};h=$e.EndOfContent;break;case 1:h=$e.Boolean;break;case 2:h=$e.Integer;break;case 3:h=$e.BitString;break;case 4:h=$e.OctetString;break;case 5:h=$e.Null;break;case 6:h=$e.ObjectIdentifier;break;case 10:h=$e.Enumerated;break;case 12:h=$e.Utf8String;break;case 13:h=$e.RelativeObjectIdentifier;break;case 14:h=$e.TIME;break;case 15:return r.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:r};case 16:h=$e.Sequence;break;case 17:h=$e.Set;break;case 18:h=$e.NumericString;break;case 19:h=$e.PrintableString;break;case 20:h=$e.TeletexString;break;case 21:h=$e.VideotexString;break;case 22:h=$e.IA5String;break;case 23:h=$e.UTCTime;break;case 24:h=$e.GeneralizedTime;break;case 25:h=$e.GraphicString;break;case 26:h=$e.VisibleString;break;case 27:h=$e.GeneralString;break;case 28:h=$e.UniversalString;break;case 29:h=$e.CharacterString;break;case 30:h=$e.BmpString;break;case 31:h=$e.DATE;break;case 32:h=$e.TimeOfDay;break;case 33:h=$e.DateTime;break;case 34:h=$e.Duration;break;default:{const d=r.idBlock.isConstructed?new $e.Constructed:new $e.Primitive;d.idBlock=r.idBlock,d.lenBlock=r.lenBlock,d.warnings=r.warnings,r=d}}break;default:h=r.idBlock.isConstructed?$e.Constructed:$e.Primitive}return r=IK(r,h),c=r.fromBER(t,e,r.lenBlock.isIndefiniteForm?n:r.lenBlock.length),r.valueBeforeDecodeView=t.subarray(s,s+r.blockLength),{offset:c,result:r}}function Ic(t){if(!t.byteLength){const e=new is({},ks);return e.error="Input buffer has zero length",{offset:-1,result:e}}return pu(Re.toUint8Array(t).slice(),0,t.byteLength)}function PK(t,e){return t?1:e}class Za extends ks{constructor({value:e=[],isIndefiniteForm:n=!1,...s}={}){super(s),this.value=e,this.isIndefiniteForm=n}fromBER(e,n,s){const r=Re.toUint8Array(e);if(!oa(this,r,n,s))return-1;if(this.valueBeforeDecodeView=r.subarray(n,n+s),this.valueBeforeDecodeView.length===0)return this.warnings.push("Zero buffer length"),n;let a=n;for(;PK(this.isIndefiniteForm,s)>0;){const o=pu(r,a,s);if(o.offset===-1)return this.error=o.result.error,this.warnings.concat(o.result.warnings),-1;if(a=o.offset,this.blockLength+=o.result.blockLength,s-=o.result.blockLength,this.value.push(o.result),this.isIndefiniteForm&&o.result.constructor.NAME===qd)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===qd?this.value.pop():this.warnings.push("No EndOfContent block encoded")),a}toBER(e,n){const s=n||new Og;for(let r=0;r<this.value.length;r++)this.value[r].toBER(e,s);return n?xi:s.final()}toJSON(){const e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const n of this.value)e.value.push(n.toJSON());return e}}Za.NAME="ConstructedValueBlock";var rR;class xs extends is{constructor(e={}){super(e,Za),this.idBlock.isConstructed=!0}fromBER(e,n,s){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const r=this.valueBlock.fromBER(e,n,this.lenBlock.isIndefiniteForm?s:this.lenBlock.length);return r===-1?(this.error=this.valueBlock.error,r):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}onAsciiEncoding(){const e=[];for(const s of this.valueBlock.value)e.push(s.toString("ascii").split(`
`).map(r=>`  ${r}`).join(`
`));const n=this.idBlock.tagClass===3?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${n} :
${e.join(`
`)}`:`${n} :`}}rR=xs;$e.Constructed=rR;xs.NAME="CONSTRUCTED";class iR extends ks{fromBER(e,n,s){return n}toBER(e){return xi}}iR.override="EndOfContentValueBlock";var aR;class n2 extends is{constructor(e={}){super(e,iR),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}aR=n2;$e.EndOfContent=aR;n2.NAME=qd;var lR;class eo extends is{constructor(e={}){super(e,ks),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,n,s){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=s,n+s>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):n+s}toBER(e,n){const s=new ArrayBuffer(2);if(!e){const r=new Uint8Array(s);r[0]=5,r[1]=0}return n&&n.write(s),s}onAsciiEncoding(){return`${this.constructor.NAME}`}}lR=eo;$e.Null=lR;eo.NAME="NULL";class oR extends wi(ks){get value(){for(const e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}constructor({value:e,...n}={}){super(n),n.valueHex?this.valueHexView=Re.toUint8Array(n.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}fromBER(e,n,s){const r=Re.toUint8Array(e);return oa(this,r,n,s)?(this.valueHexView=r.subarray(n,n+s),s>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,XO.call(this),this.blockLength=s,n+s):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}oR.NAME="BooleanValueBlock";var cR;let Bg=class extends is{getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}constructor(e={}){super(e,oR),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}};cR=Bg;$e.Boolean=cR;Bg.NAME="BOOLEAN";class uR extends wi(Za){constructor({isConstructed:e=!1,...n}={}){super(n),this.isConstructed=e}fromBER(e,n,s){let r=0;if(this.isConstructed){if(this.isHexOnly=!1,r=Za.prototype.fromBER.call(this,e,n,s),r===-1)return r;for(let a=0;a<this.value.length;a++){const o=this.value[a].constructor.NAME;if(o===qd){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(o!==JO)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,r=super.fromBER(e,n,s),this.blockLength=s;return r}toBER(e,n){return this.isConstructed?Za.prototype.toBER.call(this,e,n):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}uR.NAME="OctetStringValueBlock";var s2;let Kl=class extends is{constructor({idBlock:e={},lenBlock:n={},...s}={}){var r,a;(r=s.isConstructed)!==null&&r!==void 0||(s.isConstructed=!!(!((a=s.value)===null||a===void 0)&&a.length)),super({idBlock:{isConstructed:s.isConstructed,...e},lenBlock:{...n,isIndefiniteForm:!!s.isIndefiniteForm},...s},uR),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,n,s){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,s===0)return this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),n;if(!this.valueBlock.isConstructed){const a=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(n,n+s);try{if(a.byteLength){const o=pu(a,0,a.byteLength);o.offset!==-1&&o.offset===s&&(this.valueBlock.value=[o.result])}}catch{}}return super.fromBER(e,n,s)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return xs.prototype.onAsciiEncoding.call(this);const e=this.constructor.NAME,n=Fe.ToHex(this.valueBlock.valueHexView);return`${e} : ${n}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const e=[];for(const n of this.valueBlock.value)n instanceof s2&&e.push(n.valueBlock.valueHexView);return Re.concat(e)}};s2=Kl;$e.OctetString=s2;Kl.NAME=JO;class hR extends wi(Za){constructor({unusedBits:e=0,isConstructed:n=!1,...s}={}){super(s),this.unusedBits=e,this.isConstructed=n,this.blockLength=this.valueHexView.byteLength}fromBER(e,n,s){if(!s)return n;let r=-1;if(this.isConstructed){if(r=Za.prototype.fromBER.call(this,e,n,s),r===-1)return r;for(const c of this.value){const h=c.constructor.NAME;if(h===qd){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(h!==QO)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const d=c.valueBlock;if(this.unusedBits>0&&d.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=d.unusedBits}return r}const a=Re.toUint8Array(e);if(!oa(this,a,n,s))return-1;const o=a.subarray(n,n+s);if(this.unusedBits=o[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const c=o.subarray(1);try{if(c.byteLength){const h=pu(c,0,c.byteLength);h.offset!==-1&&h.offset===s-1&&(this.value=[h.result])}}catch{}}return this.valueHexView=o.subarray(1),this.blockLength=o.length,n+s}toBER(e,n){if(this.isConstructed)return Za.prototype.toBER.call(this,e,n);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength){const r=new Uint8Array(1);return r[0]=0,r.buffer}const s=new Uint8Array(this.valueHexView.length+1);return s[0]=this.unusedBits,s.set(this.valueHexView,1),s.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}hR.NAME="BitStringValueBlock";var dR;let Wl=class extends is{constructor({idBlock:e={},lenBlock:n={},...s}={}){var r,a;(r=s.isConstructed)!==null&&r!==void 0||(s.isConstructed=!!(!((a=s.value)===null||a===void 0)&&a.length)),super({idBlock:{isConstructed:s.isConstructed,...e},lenBlock:{...n,isIndefiniteForm:!!s.isIndefiniteForm},...s},hR),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,n,s){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,n,s)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return xs.prototype.onAsciiEncoding.call(this);{const e=[],n=this.valueBlock.valueHexView;for(const o of n)e.push(o.toString(2).padStart(8,"0"));const s=e.join(""),r=this.constructor.NAME,a=s.substring(0,s.length-this.valueBlock.unusedBits);return`${r} : ${a}`}}};dR=Wl;$e.BitString=dR;Wl.NAME=QO;var fR;function zK(t,e){const n=new Uint8Array([0]),s=new Uint8Array(t),r=new Uint8Array(e);let a=s.slice(0);const o=a.length-1,c=r.slice(0),h=c.length-1;let d=0;const g=h<o?o:h;let m=0;for(let v=g;v>=0;v--,m++)!0===m<c.length?d=a[o-m]+c[h-m]+n[0]:d=a[o-m]+n[0],n[0]=d/10,!0===m>=a.length?a=K_(new Uint8Array([d%10]),a):a[o-m]=d%10;return n[0]>0&&(a=K_(n,a)),a}function tA(t){if(t>=Ah.length)for(let e=Ah.length;e<=t;e++){const n=new Uint8Array([0]);let s=Ah[e-1].slice(0);for(let r=s.length-1;r>=0;r--){const a=new Uint8Array([(s[r]<<1)+n[0]]);n[0]=a[0]/10,s[r]=a[0]%10}n[0]>0&&(s=K_(n,s)),Ah.push(s)}return Ah[t]}function $K(t,e){let n=0;const s=new Uint8Array(t),r=new Uint8Array(e),a=s.slice(0),o=a.length-1,c=r.slice(0),h=c.length-1;let d,g=0;for(let m=h;m>=0;m--,g++)d=a[o-g]-c[h-g]-n,!0===d<0?(n=1,a[o-g]=d+10):(n=0,a[o-g]=d);if(n>0)for(let m=o-h+1;m>=0;m--,g++)if(d=a[o-g]-n,d<0)n=1,a[o-g]=d+10;else{n=0,a[o-g]=d;break}return a.slice()}class r2 extends wi(ks){setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=XO.call(this)))}constructor({value:e,...n}={}){super(n),this._valueDec=0,n.valueHex&&this.setValueHex(),e!==void 0&&(this.valueDec=e)}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(EK(e))}get valueDec(){return this._valueDec}fromDER(e,n,s,r=0){const a=this.fromBER(e,n,s);if(a===-1)return a;const o=this.valueHexView;return o[0]===0&&(o[1]&128)!==0?this.valueHexView=o.subarray(1):r!==0&&o.length<r&&(r-o.length>1&&(r=o.length+1),this.valueHexView=o.subarray(r-o.length)),a}toDER(e=!1){const n=this.valueHexView;switch(!0){case(n[0]&128)!==0:{const s=new Uint8Array(this.valueHexView.length+1);s[0]=0,s.set(n,1),this.valueHexView=s}break;case(n[0]===0&&(n[1]&128)===0):this.valueHexView=this.valueHexView.subarray(1);break}return this.toBER(e)}fromBER(e,n,s){const r=super.fromBER(e,n,s);return r===-1||this.setValueHex(),r}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const e=this.valueHexView.length*8-1;let n=new Uint8Array(this.valueHexView.length*8/3),s=0,r;const a=this.valueHexView;let o="",c=!1;for(let h=a.byteLength-1;h>=0;h--){r=a[h];for(let d=0;d<8;d++)(r&1)===1&&(s===e?(n=$K(tA(s),n),o="-"):n=zK(n,tA(s))),s++,r>>=1}for(let h=0;h<n.length;h++)n[h]&&(c=!0),c&&(o+=ZE.charAt(n[h]));return c===!1&&(o+=ZE.charAt(0)),o}}fR=r2;r2.NAME="IntegerValueBlock";Object.defineProperty(fR.prototype,"valueHex",{set:function(t){this.valueHexView=new Uint8Array(t),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});var jd;class mu extends is{constructor(e={}){super(e,r2),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return x0(),BigInt(this.valueBlock.toString())}static fromBigInt(e){x0();const n=BigInt(e),s=new Og,r=n.toString(16).replace(/^-/,""),a=new Uint8Array(Fe.FromHex(r));if(n<0){const c=new Uint8Array(a.length+(a[0]&128?1:0));c[0]|=128;const d=BigInt(`0x${Fe.ToHex(c)}`)+n,g=Re.toUint8Array(Fe.FromHex(d.toString(16)));g[0]|=128,s.write(g)}else a[0]&128&&s.write(new Uint8Array([0])),s.write(a);return new jd({valueHex:s.final()})}convertToDER(){const e=new jd({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new jd({valueHex:this.valueBlock.valueHexView[0]===0?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}jd=mu;$e.Integer=jd;mu.NAME="INTEGER";var pR;class Mg extends mu{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}pR=Mg;$e.Enumerated=pR;Mg.NAME="ENUMERATED";class W_ extends wi(ks){constructor({valueDec:e=-1,isFirstSid:n=!1,...s}={}){super(s),this.valueDec=e,this.isFirstSid=n}fromBER(e,n,s){if(!s)return n;const r=Re.toUint8Array(e);if(!oa(this,r,n,s))return-1;const a=r.subarray(n,n+s);this.valueHexView=new Uint8Array(s);for(let c=0;c<s&&(this.valueHexView[c]=a[c]&127,this.blockLength++,(a[c]&128)!==0);c++);const o=new Uint8Array(this.blockLength);for(let c=0;c<this.blockLength;c++)o[c]=this.valueHexView[c];return this.valueHexView=o,(a[this.blockLength-1]&128)!==0?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=Uc(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),n+this.blockLength)}set valueBigInt(e){x0();let n=BigInt(e).toString(2);for(;n.length%7;)n="0"+n;const s=new Uint8Array(n.length/7);for(let r=0;r<s.length;r++)s[r]=parseInt(n.slice(r*7,r*7+7),2)+(r+1<s.length?128:0);this.fromBER(s.buffer,0,s.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const r=this.valueHexView,a=new Uint8Array(this.blockLength);for(let o=0;o<this.blockLength-1;o++)a[o]=r[o]|128;return a[this.blockLength-1]=r[this.blockLength-1],a.buffer}const n=Zl(this.valueDec,7);if(n.byteLength===0)return this.error="Error during encoding SID value",xi;const s=new Uint8Array(n.byteLength);if(!e){const r=new Uint8Array(n),a=n.byteLength-1;for(let o=0;o<a;o++)s[o]=r[o]|128;s[a]=r[a]}return s}toString(){let e="";if(this.isHexOnly)e=Fe.ToHex(this.valueHexView);else if(this.isFirstSid){let n=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",n-=40):(e="2.",n-=80),e+=n.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}W_.NAME="sidBlock";class mR extends ks{constructor({value:e=$s,...n}={}){super(n),this.value=[],e&&this.fromString(e)}fromBER(e,n,s){let r=n;for(;s>0;){const a=new W_;if(r=a.fromBER(e,r,s),r===-1)return this.blockLength=0,this.error=a.error,r;this.value.length===0&&(a.isFirstSid=!0),this.blockLength+=a.blockLength,s-=a.blockLength,this.value.push(a)}return r}toBER(e){const n=[];for(let s=0;s<this.value.length;s++){const r=this.value[s].toBER(e);if(r.byteLength===0)return this.error=this.value[s].error,xi;n.push(r)}return e2(n)}fromString(e){this.value=[];let n=0,s=0,r="",a=!1;do if(s=e.indexOf(".",n),s===-1?r=e.substring(n):r=e.substring(n,s),n=s+1,a){const o=this.value[0];let c=0;switch(o.valueDec){case 0:break;case 1:c=40;break;case 2:c=80;break;default:this.value=[];return}const h=parseInt(r,10);if(isNaN(h))return;o.valueDec=h+c,a=!1}else{const o=new W_;if(r>Number.MAX_SAFE_INTEGER){x0();const c=BigInt(r);o.valueBigInt=c}else if(o.valueDec=parseInt(r,10),isNaN(o.valueDec))return;this.value.length||(o.isFirstSid=!0,a=!0),this.value.push(o)}while(s!==-1)}toString(){let e="",n=!1;for(let s=0;s<this.value.length;s++){n=this.value[s].isHexOnly;let r=this.value[s].toString();s!==0&&(e=`${e}.`),n?(r=`{${r}}`,this.value[s].isFirstSid?e=`2.{${r} - 80}`:e+=r):e+=r}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let n=0;n<this.value.length;n++)e.sidArray.push(this.value[n].toJSON());return e}}mR.NAME="ObjectIdentifierValueBlock";var gR;class Dg extends is{getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}constructor(e={}){super(e,mR),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}gR=Dg;$e.ObjectIdentifier=gR;Dg.NAME="OBJECT IDENTIFIER";class G_ extends wi(vo){constructor({valueDec:e=0,...n}={}){super(n),this.valueDec=e}fromBER(e,n,s){if(s===0)return n;const r=Re.toUint8Array(e);if(!oa(this,r,n,s))return-1;const a=r.subarray(n,n+s);this.valueHexView=new Uint8Array(s);for(let c=0;c<s&&(this.valueHexView[c]=a[c]&127,this.blockLength++,(a[c]&128)!==0);c++);const o=new Uint8Array(this.blockLength);for(let c=0;c<this.blockLength;c++)o[c]=this.valueHexView[c];return this.valueHexView=o,(a[this.blockLength-1]&128)!==0?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=Uc(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),n+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const r=this.valueHexView,a=new Uint8Array(this.blockLength);for(let o=0;o<this.blockLength-1;o++)a[o]=r[o]|128;return a[this.blockLength-1]=r[this.blockLength-1],a.buffer}const n=Zl(this.valueDec,7);if(n.byteLength===0)return this.error="Error during encoding SID value",xi;const s=new Uint8Array(n.byteLength);if(!e){const r=new Uint8Array(n),a=n.byteLength-1;for(let o=0;o<a;o++)s[o]=r[o]|128;s[a]=r[a]}return s.buffer}toString(){let e="";return this.isHexOnly?e=Fe.ToHex(this.valueHexView):e=this.valueDec.toString(),e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}G_.NAME="relativeSidBlock";class yR extends ks{constructor({value:e=$s,...n}={}){super(n),this.value=[],e&&this.fromString(e)}fromBER(e,n,s){let r=n;for(;s>0;){const a=new G_;if(r=a.fromBER(e,r,s),r===-1)return this.blockLength=0,this.error=a.error,r;this.blockLength+=a.blockLength,s-=a.blockLength,this.value.push(a)}return r}toBER(e,n){const s=[];for(let r=0;r<this.value.length;r++){const a=this.value[r].toBER(e);if(a.byteLength===0)return this.error=this.value[r].error,xi;s.push(a)}return e2(s)}fromString(e){this.value=[];let n=0,s=0,r="";do{s=e.indexOf(".",n),s===-1?r=e.substring(n):r=e.substring(n,s),n=s+1;const a=new G_;if(a.valueDec=parseInt(r,10),isNaN(a.valueDec))return!0;this.value.push(a)}while(s!==-1);return!0}toString(){let e="",n=!1;for(let s=0;s<this.value.length;s++){n=this.value[s].isHexOnly;let r=this.value[s].toString();s!==0&&(e=`${e}.`),n&&(r=`{${r}}`),e+=r}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let n=0;n<this.value.length;n++)e.sidArray.push(this.value[n].toJSON());return e}}yR.NAME="RelativeObjectIdentifierValueBlock";var vR;class i2 extends is{getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}constructor(e={}){super(e,yR),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}vR=i2;$e.RelativeObjectIdentifier=vR;i2.NAME="RelativeObjectIdentifier";var bR;class Gr extends xs{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}bR=Gr;$e.Sequence=bR;Gr.NAME="SEQUENCE";var _R;let di=class extends xs{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}};_R=di;$e.Set=_R;di.NAME="SET";class xR extends wi(ks){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=$s}toJSON(){return{...super.toJSON(),value:this.value}}}xR.NAME="StringValueBlock";class wR extends xR{}wR.NAME="SimpleStringValueBlock";class dr extends t2{constructor({...e}={}){super(e,wR)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,Re.toUint8Array(e))}fromString(e){const n=e.length,s=this.valueBlock.valueHexView=new Uint8Array(n);for(let r=0;r<n;r++)s[r]=e.charCodeAt(r);this.valueBlock.value=e}}dr.NAME="SIMPLE STRING";class SR extends dr{fromBuffer(e){this.valueBlock.valueHexView=Re.toUint8Array(e);try{this.valueBlock.value=Fe.ToUtf8String(e)}catch(n){this.warnings.push(`Error during "decodeURIComponent": ${n}, using raw string`),this.valueBlock.value=Fe.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(Fe.FromUtf8String(e)),this.valueBlock.value=e}}SR.NAME="Utf8StringValueBlock";var kR;class ca extends SR{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}kR=ca;$e.Utf8String=kR;ca.NAME="UTF8String";class CR extends dr{fromBuffer(e){this.valueBlock.value=Fe.ToUtf16String(e),this.valueBlock.valueHexView=Re.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(Fe.FromUtf16String(e))}}CR.NAME="BmpStringValueBlock";var NR;class Lg extends CR{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}NR=Lg;$e.BmpString=NR;Lg.NAME="BMPString";class ER extends dr{fromBuffer(e){const n=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),s=new Uint8Array(n);for(let r=0;r<s.length;r+=4)s[r]=s[r+3],s[r+1]=s[r+2],s[r+2]=0,s[r+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(n))}fromString(e){const n=e.length,s=this.valueBlock.valueHexView=new Uint8Array(n*4);for(let r=0;r<n;r++){const a=Zl(e.charCodeAt(r),8),o=new Uint8Array(a);if(o.length>4)continue;const c=4-o.length;for(let h=o.length-1;h>=0;h--)s[r*4+h+c]=o[h]}this.valueBlock.value=e}}ER.NAME="UniversalStringValueBlock";var AR;class Ig extends ER{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}AR=Ig;$e.UniversalString=AR;Ig.NAME="UniversalString";var jR;class Pg extends dr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}jR=Pg;$e.NumericString=jR;Pg.NAME="NumericString";var TR;class zg extends dr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}TR=zg;$e.PrintableString=TR;zg.NAME="PrintableString";var OR;class $g extends dr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}OR=$g;$e.TeletexString=OR;$g.NAME="TeletexString";var RR;class Hg extends dr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}RR=Hg;$e.VideotexString=RR;Hg.NAME="VideotexString";var BR;class Ug extends dr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}BR=Ug;$e.IA5String=BR;Ug.NAME="IA5String";var MR;class Vg extends dr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}MR=Vg;$e.GraphicString=MR;Vg.NAME="GraphicString";var DR;class bf extends dr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}DR=bf;$e.VisibleString=DR;bf.NAME="VisibleString";var LR;class Fg extends dr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}LR=Fg;$e.GeneralString=LR;Fg.NAME="GeneralString";var IR;class qg extends dr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}IR=qg;$e.CharacterString=IR;qg.NAME="CharacterString";var PR;class _f extends bf{constructor({value:e,valueDate:n,...s}={}){if(super(s),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let r=0;r<e.length;r++)this.valueBlock.valueHexView[r]=e.charCodeAt(r)}n&&(this.fromDate(n),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,Re.toUint8Array(e)))}toBuffer(){const e=this.toString(),n=new ArrayBuffer(e.length),s=new Uint8Array(n);for(let r=0;r<e.length;r++)s[r]=e.charCodeAt(r);return n}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){const s=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(e);if(s===null){this.error="Wrong input string for conversion";return}const r=parseInt(s[1],10);r>=50?this.year=1900+r:this.year=2e3+r,this.month=parseInt(s[2],10),this.day=parseInt(s[3],10),this.hour=parseInt(s[4],10),this.minute=parseInt(s[5],10),this.second=parseInt(s[6],10)}toString(e="iso"){if(e==="iso"){const n=new Array(7);return n[0]=lr(this.year<2e3?this.year-1900:this.year-2e3,2),n[1]=lr(this.month,2),n[2]=lr(this.day,2),n[3]=lr(this.hour,2),n[4]=lr(this.minute,2),n[5]=lr(this.second,2),n[6]="Z",n.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}PR=_f;$e.UTCTime=PR;_f.NAME="UTCTime";var zR;class Kg extends _f{constructor(e={}){var n;super(e),(n=this.millisecond)!==null&&n!==void 0||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){const e=Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond);return new Date(e)}fromString(e){let n=!1,s="",r="",a=0,o,c=0,h=0;if(e[e.length-1]==="Z")s=e.substring(0,e.length-1),n=!0;else{const m=new Number(e[e.length-1]);if(isNaN(m.valueOf()))throw new Error("Wrong input string for conversion");s=e}if(n){if(s.indexOf("+")!==-1)throw new Error("Wrong input string for conversion");if(s.indexOf("-")!==-1)throw new Error("Wrong input string for conversion")}else{let m=1,v=s.indexOf("+"),y="";if(v===-1&&(v=s.indexOf("-"),m=-1),v!==-1){if(y=s.substring(v+1),s=s.substring(0,v),y.length!==2&&y.length!==4)throw new Error("Wrong input string for conversion");let x=parseInt(y.substring(0,2),10);if(isNaN(x.valueOf()))throw new Error("Wrong input string for conversion");if(c=m*x,y.length===4){if(x=parseInt(y.substring(2,4),10),isNaN(x.valueOf()))throw new Error("Wrong input string for conversion");h=m*x}}}let d=s.indexOf(".");if(d===-1&&(d=s.indexOf(",")),d!==-1){const m=new Number(`0${s.substring(d)}`);if(isNaN(m.valueOf()))throw new Error("Wrong input string for conversion");a=m.valueOf(),r=s.substring(0,d)}else r=s;switch(!0){case r.length===8:if(o=/(\d{4})(\d{2})(\d{2})/ig,d!==-1)throw new Error("Wrong input string for conversion");break;case r.length===10:if(o=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,d!==-1){let m=60*a;this.minute=Math.floor(m),m=60*(m-this.minute),this.second=Math.floor(m),m=1e3*(m-this.second),this.millisecond=Math.floor(m)}break;case r.length===12:if(o=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,d!==-1){let m=60*a;this.second=Math.floor(m),m=1e3*(m-this.second),this.millisecond=Math.floor(m)}break;case r.length===14:if(o=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,d!==-1){const m=1e3*a;this.millisecond=Math.floor(m)}break;default:throw new Error("Wrong input string for conversion")}const g=o.exec(r);if(g===null)throw new Error("Wrong input string for conversion");for(let m=1;m<g.length;m++)switch(m){case 1:this.year=parseInt(g[m],10);break;case 2:this.month=parseInt(g[m],10);break;case 3:this.day=parseInt(g[m],10);break;case 4:this.hour=parseInt(g[m],10)+c;break;case 5:this.minute=parseInt(g[m],10)+h;break;case 6:this.second=parseInt(g[m],10);break;default:throw new Error("Wrong input string for conversion")}if(n===!1){const m=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=m.getUTCFullYear(),this.month=m.getUTCMonth(),this.day=m.getUTCDay(),this.hour=m.getUTCHours(),this.minute=m.getUTCMinutes(),this.second=m.getUTCSeconds(),this.millisecond=m.getUTCMilliseconds()}}toString(e="iso"){if(e==="iso"){const n=[];return n.push(lr(this.year,4)),n.push(lr(this.month,2)),n.push(lr(this.day,2)),n.push(lr(this.hour,2)),n.push(lr(this.minute,2)),n.push(lr(this.second,2)),this.millisecond!==0&&(n.push("."),n.push(lr(this.millisecond,3))),n.push("Z"),n.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}zR=Kg;$e.GeneralizedTime=zR;Kg.NAME="GeneralizedTime";var $R;class a2 extends ca{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}$R=a2;$e.DATE=$R;a2.NAME="DATE";var HR;class l2 extends ca{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}HR=l2;$e.TimeOfDay=HR;l2.NAME="TimeOfDay";var UR;class o2 extends ca{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}UR=o2;$e.DateTime=UR;o2.NAME="DateTime";var VR;class c2 extends ca{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}VR=c2;$e.Duration=VR;c2.NAME="Duration";var FR;class u2 extends ca{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}FR=u2;$e.TIME=FR;u2.NAME="TIME";class to{constructor({name:e=$s,optional:n=!1}={}){this.name=e,this.optional=n}}class h2 extends to{constructor({value:e=[],...n}={}){super(n),this.value=e}}class w0 extends to{constructor({value:e=new to,local:n=!1,...s}={}){super(s),this.value=e,this.local=n}}class HK{get data(){return this.dataView.slice().buffer}set data(e){this.dataView=Re.toUint8Array(e)}constructor({data:e=Rg}={}){this.dataView=Re.toUint8Array(e)}fromBER(e,n,s){const r=n+s;return this.dataView=Re.toUint8Array(e).subarray(n,r),r}toBER(e){return this.dataView.slice().buffer}}function Ga(t,e,n){if(n instanceof h2){for(const a of n.value)if(Ga(t,e,a).verified)return{verified:!0,result:t};{const a={verified:!1,result:{error:"Wrong values for Choice type"}};return n.hasOwnProperty(Ob)&&(a.name=n.name),a}}if(n instanceof to)return n.hasOwnProperty(Ob)&&(t[n.name]=e),{verified:!0,result:t};if(!(t instanceof Object))return{verified:!1,result:{error:"Wrong root object"}};if(!(e instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(!(n instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(TK in n))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(MK in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(DK in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const s=n.idBlock.toBER(!1);if(s.byteLength===0)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(n.idBlock.fromBER(s,0,s.byteLength)===-1)return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(n.idBlock.hasOwnProperty(OK)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.tagClass!==e.idBlock.tagClass)return{verified:!1,result:t};if(n.idBlock.hasOwnProperty(RK)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.tagNumber!==e.idBlock.tagNumber)return{verified:!1,result:t};if(n.idBlock.hasOwnProperty(BK)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.isConstructed!==e.idBlock.isConstructed)return{verified:!1,result:t};if(!(jK in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.isHexOnly!==e.idBlock.isHexOnly)return{verified:!1,result:t};if(n.idBlock.isHexOnly){if(!(eA in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const a=n.idBlock.valueHexView,o=e.idBlock.valueHexView;if(a.length!==o.length)return{verified:!1,result:t};for(let c=0;c<a.length;c++)if(a[c]!==o[1])return{verified:!1,result:t}}if(n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,$s),n.name&&(t[n.name]=e)),n instanceof $e.Constructed){let a=0,o={verified:!1,result:{error:"Unknown error"}},c=n.valueBlock.value.length;if(c>0&&n.valueBlock.value[0]instanceof w0&&(c=e.valueBlock.value.length),c===0)return{verified:!0,result:t};if(e.valueBlock.value.length===0&&n.valueBlock.value.length!==0){let h=!0;for(let d=0;d<n.valueBlock.value.length;d++)h=h&&(n.valueBlock.value[d].optional||!1);return h?{verified:!0,result:t}:(n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,$s),n.name&&delete t[n.name]),t.error="Inconsistent object length",{verified:!1,result:t})}for(let h=0;h<c;h++)if(h-a>=e.valueBlock.value.length){if(n.valueBlock.value[h].optional===!1){const d={verified:!1,result:t};return t.error="Inconsistent length between ASN.1 data and schema",n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,$s),n.name&&(delete t[n.name],d.name=n.name)),d}}else if(n.valueBlock.value[0]instanceof w0){if(o=Ga(t,e.valueBlock.value[h],n.valueBlock.value[0].value),o.verified===!1)if(n.valueBlock.value[0].optional)a++;else return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,$s),n.name&&delete t[n.name]),o;if(Ob in n.valueBlock.value[0]&&n.valueBlock.value[0].name.length>0){let d={};LK in n.valueBlock.value[0]&&n.valueBlock.value[0].local?d=e:d=t,typeof d[n.valueBlock.value[0].name]>"u"&&(d[n.valueBlock.value[0].name]=[]),d[n.valueBlock.value[0].name].push(e.valueBlock.value[h])}}else if(o=Ga(t,e.valueBlock.value[h-a],n.valueBlock.value[h]),o.verified===!1)if(n.valueBlock.value[h].optional)a++;else return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,$s),n.name&&delete t[n.name]),o;if(o.verified===!1){const h={verified:!1,result:t};return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,$s),n.name&&(delete t[n.name],h.name=n.name)),h}return{verified:!0,result:t}}if(n.primitiveSchema&&eA in e.valueBlock){const a=pu(e.valueBlock.valueHexView);if(a.offset===-1){const o={verified:!1,result:a.result};return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,$s),n.name&&(delete t[n.name],o.name=n.name)),o}return Ga(t,a.result,n.primitiveSchema)}return{verified:!0,result:t}}function UK(t,e){if(!(e instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};const n=pu(Re.toUint8Array(t));return n.offset===-1?{verified:!1,result:n.result}:Ga(n.result,n.result,e)}const qR=Object.freeze(Object.defineProperty({__proto__:null,Any:to,BaseBlock:is,BaseStringBlock:t2,BitString:Wl,BmpString:Lg,Boolean:Bg,CharacterString:qg,Choice:h2,Constructed:xs,DATE:a2,DateTime:o2,Duration:c2,EndOfContent:n2,Enumerated:Mg,GeneralString:Fg,GeneralizedTime:Kg,GraphicString:Vg,HexBlock:wi,IA5String:Ug,Integer:mu,Null:eo,NumericString:Pg,ObjectIdentifier:Dg,OctetString:Kl,Primitive:vf,PrintableString:zg,RawData:HK,RelativeObjectIdentifier:i2,Repeated:w0,Sequence:Gr,Set:di,TIME:u2,TeletexString:$g,TimeOfDay:l2,UTCTime:_f,UniversalString:Ig,Utf8String:ca,ValueBlock:ks,VideotexString:Hg,ViewWriter:Og,VisibleString:bf,compareSchema:Ga,fromBER:Ic,verifySchema:UK},Symbol.toStringTag,{value:"Module"}));var be;(function(t){t[t.Sequence=0]="Sequence",t[t.Set=1]="Set",t[t.Choice=2]="Choice"})(be||(be={}));var te;(function(t){t[t.Any=1]="Any",t[t.Boolean=2]="Boolean",t[t.OctetString=3]="OctetString",t[t.BitString=4]="BitString",t[t.Integer=5]="Integer",t[t.Enumerated=6]="Enumerated",t[t.ObjectIdentifier=7]="ObjectIdentifier",t[t.Utf8String=8]="Utf8String",t[t.BmpString=9]="BmpString",t[t.UniversalString=10]="UniversalString",t[t.NumericString=11]="NumericString",t[t.PrintableString=12]="PrintableString",t[t.TeletexString=13]="TeletexString",t[t.VideotexString=14]="VideotexString",t[t.IA5String=15]="IA5String",t[t.GraphicString=16]="GraphicString",t[t.VisibleString=17]="VisibleString",t[t.GeneralString=18]="GeneralString",t[t.CharacterString=19]="CharacterString",t[t.UTCTime=20]="UTCTime",t[t.GeneralizedTime=21]="GeneralizedTime",t[t.DATE=22]="DATE",t[t.TimeOfDay=23]="TimeOfDay",t[t.DateTime=24]="DateTime",t[t.Duration=25]="Duration",t[t.TIME=26]="TIME",t[t.Null=27]="Null"})(te||(te={}));class Wg{constructor(e,n=0){if(this.unusedBits=0,this.value=new ArrayBuffer(0),e)if(typeof e=="number")this.fromNumber(e);else if(Re.isBufferSource(e))this.unusedBits=n,this.value=Re.toArrayBuffer(e);else throw TypeError("Unsupported type of 'params' argument for BitString")}fromASN(e){if(!(e instanceof Wl))throw new TypeError("Argument 'asn' is not instance of ASN.1 BitString");return this.unusedBits=e.valueBlock.unusedBits,this.value=e.valueBlock.valueHex,this}toASN(){return new Wl({unusedBits:this.unusedBits,valueHex:this.value})}toSchema(e){return new Wl({name:e})}toNumber(){let e="";const n=new Uint8Array(this.value);for(const s of n)e+=s.toString(2).padStart(8,"0");return e=e.split("").reverse().join(""),this.unusedBits&&(e=e.slice(this.unusedBits).padStart(this.unusedBits,"0")),parseInt(e,2)}fromNumber(e){let n=e.toString(2);const s=n.length+7>>3;this.unusedBits=(s<<3)-n.length;const r=new Uint8Array(s);n=n.padStart(s<<3,"0").split("").reverse().join("");let a=0;for(;a<s;)r[a]=parseInt(n.slice(a<<3,(a<<3)+8),2),a++;this.value=r.buffer}}class At{get byteLength(){return this.buffer.byteLength}get byteOffset(){return 0}constructor(e){typeof e=="number"?this.buffer=new ArrayBuffer(e):Re.isBufferSource(e)?this.buffer=Re.toArrayBuffer(e):Array.isArray(e)?this.buffer=new Uint8Array(e):this.buffer=new ArrayBuffer(0)}fromASN(e){if(!(e instanceof Kl))throw new TypeError("Argument 'asn' is not instance of ASN.1 OctetString");return this.buffer=e.valueBlock.valueHex,this}toASN(){return new Kl({valueHex:this.buffer})}toSchema(e){return new Kl({name:e})}}const VK={fromASN:t=>t instanceof eo?null:t.valueBeforeDecodeView,toASN:t=>{if(t===null)return new eo;const e=Ic(t);if(e.result.error)throw new Error(e.result.error);return e.result}},FK={fromASN:t=>t.valueBlock.valueHexView.byteLength>=4?t.valueBlock.toString():t.valueBlock.valueDec,toASN:t=>new mu({value:+t})},qK={fromASN:t=>t.valueBlock.valueDec,toASN:t=>new Mg({value:t})},Qt={fromASN:t=>t.valueBlock.valueHexView,toASN:t=>new mu({valueHex:t})},KK={fromASN:t=>t.valueBlock.valueHexView,toASN:t=>new Wl({valueHex:t})},WK={fromASN:t=>t.valueBlock.toString(),toASN:t=>new Dg({value:t})},GK={fromASN:t=>t.valueBlock.value,toASN:t=>new Bg({value:t})},S0={fromASN:t=>t.valueBlock.valueHexView,toASN:t=>new Kl({valueHex:t})},YK={fromASN:t=>new At(t.getValue()),toASN:t=>t.toASN()};function Pr(t){return{fromASN:e=>e.valueBlock.value,toASN:e=>new t({value:e})}}const KR=Pr(ca),XK=Pr(Lg),JK=Pr(Ig),QK=Pr(Pg),ZK=Pr(zg),eW=Pr($g),tW=Pr(Hg),nW=Pr(Ug),sW=Pr(Vg),rW=Pr(bf),iW=Pr(Fg),aW=Pr(qg),lW={fromASN:t=>t.toDate(),toASN:t=>new _f({valueDate:t})},oW={fromASN:t=>t.toDate(),toASN:t=>new Kg({valueDate:t})},cW={fromASN:()=>null,toASN:()=>new eo};function Td(t){switch(t){case te.Any:return VK;case te.BitString:return KK;case te.BmpString:return XK;case te.Boolean:return GK;case te.CharacterString:return aW;case te.Enumerated:return qK;case te.GeneralString:return iW;case te.GeneralizedTime:return oW;case te.GraphicString:return sW;case te.IA5String:return nW;case te.Integer:return FK;case te.Null:return cW;case te.NumericString:return QK;case te.ObjectIdentifier:return WK;case te.OctetString:return S0;case te.PrintableString:return ZK;case te.TeletexString:return eW;case te.UTCTime:return lW;case te.UniversalString:return JK;case te.Utf8String:return KR;case te.VideotexString:return tW;case te.VisibleString:return rW;default:return null}}function Yi(t){return typeof t=="function"&&t.prototype?t.prototype.toASN&&t.prototype.fromASN?!0:Yi(t.prototype):!!(t&&typeof t=="object"&&"toASN"in t&&"fromASN"in t)}function WR(t){var e;if(t){const n=Object.getPrototypeOf(t);return((e=n?.prototype)===null||e===void 0?void 0:e.constructor)===Array?!0:WR(n)}return!1}function uW(t,e){if(!(t&&e)||t.byteLength!==e.byteLength)return!1;const n=new Uint8Array(t),s=new Uint8Array(e);for(let r=0;r<t.byteLength;r++)if(n[r]!==s[r])return!1;return!0}class hW{constructor(){this.items=new WeakMap}has(e){return this.items.has(e)}get(e,n=!1){const s=this.items.get(e);if(!s)throw new Error(`Cannot get schema for '${e.prototype.constructor.name}' target`);if(n&&!s.schema)throw new Error(`Schema '${e.prototype.constructor.name}' doesn't contain ASN.1 schema. Call 'AsnSchemaStorage.cache'.`);return s}cache(e){const n=this.get(e);n.schema||(n.schema=this.create(e,!0))}createDefault(e){const n={type:be.Sequence,items:{}},s=this.findParentSchema(e);return s&&(Object.assign(n,s),n.items=Object.assign({},n.items,s.items)),n}create(e,n){const s=this.items.get(e)||this.createDefault(e),r=[];for(const a in s.items){const o=s.items[a],c=n?a:"";let h;if(typeof o.type=="number"){const g=te[o.type],m=qR[g];if(!m)throw new Error(`Cannot get ASN1 class by name '${g}'`);h=new m({name:c})}else Yi(o.type)?h=new o.type().toSchema(c):o.optional?this.get(o.type).type===be.Choice?h=new to({name:c}):(h=this.create(o.type,!1),h.name=c):h=new to({name:c});const d=!!o.optional||o.defaultValue!==void 0;if(o.repeated){h.name="";const g=o.repeated==="set"?di:Gr;h=new g({name:"",value:[new w0({name:c,value:h})]})}if(o.context!==null&&o.context!==void 0)if(o.implicit)if(typeof o.type=="number"||Yi(o.type)){const g=o.repeated?xs:vf;r.push(new g({name:c,optional:d,idBlock:{tagClass:3,tagNumber:o.context}}))}else{this.cache(o.type);const g=!!o.repeated;let m=g?h:this.get(o.type,!0).schema;m="valueBlock"in m?m.valueBlock.value:m.value,r.push(new xs({name:g?"":c,optional:d,idBlock:{tagClass:3,tagNumber:o.context},value:m}))}else r.push(new xs({optional:d,idBlock:{tagClass:3,tagNumber:o.context},value:[h]}));else h.optional=d,r.push(h)}switch(s.type){case be.Sequence:return new Gr({value:r,name:""});case be.Set:return new di({value:r,name:""});case be.Choice:return new h2({value:r,name:""});default:throw new Error("Unsupported ASN1 type in use")}}set(e,n){return this.items.set(e,n),this}findParentSchema(e){const n=Object.getPrototypeOf(e);return n?this.items.get(n)||this.findParentSchema(n):null}}const ts=new hW,ke=t=>e=>{let n;ts.has(e)?n=ts.get(e):(n=ts.createDefault(e),ts.set(e,n)),Object.assign(n,t)},I=t=>(e,n)=>{let s;ts.has(e.constructor)?s=ts.get(e.constructor):(s=ts.createDefault(e.constructor),ts.set(e.constructor,s));const r=Object.assign({},t);if(typeof r.type=="number"&&!r.converter){const a=Td(t.type);if(!a)throw new Error(`Cannot get default converter for property '${n}' of ${e.constructor.name}`);r.converter=a}r.raw=t.raw,s.items[n]=r};class jh extends Error{constructor(){super(...arguments),this.schemas=[]}}class dW{static parse(e,n){const s=Ic(e);if(s.result.error)throw new Error(s.result.error);return this.fromASN(s.result,n)}static fromASN(e,n){try{if(Yi(n))return new n().fromASN(e);const s=ts.get(n);ts.cache(n);let r=s.schema;const a=this.handleChoiceTypes(e,s,n,r);if(a?.result)return a.result;a?.targetSchema&&(r=a.targetSchema);const o=this.handleSequenceTypes(e,s,n,r),c=new n;return WR(n)?this.handleArrayTypes(e,s,n):(this.processSchemaItems(s,o,c),c)}catch(s){throw s instanceof jh&&s.schemas.push(n.name),s}}static handleChoiceTypes(e,n,s,r){if(e.constructor===xs&&n.type===be.Choice&&e.idBlock.tagClass===3)for(const a in n.items){const o=n.items[a];if(o.context===e.idBlock.tagNumber&&o.implicit&&typeof o.type=="function"&&ts.has(o.type)){const c=ts.get(o.type);if(c&&c.type===be.Sequence){const h=new Gr;if("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)&&"value"in h.valueBlock){h.valueBlock.value=e.valueBlock.value;const d=this.fromASN(h,o.type),g=new s;return g[a]=d,{result:g}}}}}else if(e.constructor===xs&&n.type!==be.Choice){const a=new xs({idBlock:{tagClass:3,tagNumber:e.idBlock.tagNumber},value:n.schema.valueBlock.value});for(const o in n.items)delete e[o];return{targetSchema:a}}return null}static handleSequenceTypes(e,n,s,r){if(n.type===be.Sequence){const a=Ga({},e,r);if(!a.verified)throw new jh(`Data does not match to ${s.name} ASN1 schema.${a.result.error?` ${a.result.error}`:""}`);return a}else{const a=Ga({},e,r);if(!a.verified)throw new jh(`Data does not match to ${s.name} ASN1 schema.${a.result.error?` ${a.result.error}`:""}`);return a}}static processRepeatedField(e,n,s){let r=e.slice(n);if(r.length===1&&r[0].constructor.name==="Sequence"){const a=r[0];a.valueBlock&&a.valueBlock.value&&Array.isArray(a.valueBlock.value)&&(r=a.valueBlock.value)}if(typeof s.type=="number"){const a=Td(s.type);if(!a)throw new Error(`No converter for ASN.1 type ${s.type}`);return r.filter(o=>o&&o.valueBlock).map(o=>{try{return a.fromASN(o)}catch{return}}).filter(o=>o!==void 0)}else return r.filter(a=>a&&a.valueBlock).map(a=>{try{return this.fromASN(a,s.type)}catch{return}}).filter(a=>a!==void 0)}static processPrimitiveField(e,n){const s=Td(n.type);if(!s)throw new Error(`No converter for ASN.1 type ${n.type}`);return s.fromASN(e)}static isOptionalChoiceField(e){return e.optional&&typeof e.type=="function"&&ts.has(e.type)&&ts.get(e.type).type===be.Choice}static processOptionalChoiceField(e,n){try{return{processed:!0,value:this.fromASN(e,n.type)}}catch(s){if(s instanceof jh&&/Wrong values for Choice type/.test(s.message))return{processed:!1};throw s}}static handleArrayTypes(e,n,s){if(!("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)))throw new Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");const r=n.itemType;if(typeof r=="number"){const a=Td(r);if(!a)throw new Error(`Cannot get default converter for array item of ${s.name} ASN1 schema`);return s.from(e.valueBlock.value,o=>a.fromASN(o))}else return s.from(e.valueBlock.value,a=>this.fromASN(a,r))}static processSchemaItems(e,n,s){for(const r in e.items){const a=n.result[r];if(!a)continue;const o=e.items[r],c=o.type;let h;typeof c=="number"||Yi(c)?h=this.processPrimitiveSchemaItem(a,o,c):h=this.processComplexSchemaItem(a,o,c),h&&typeof h=="object"&&"value"in h&&"raw"in h?(s[r]=h.value,s[`${r}Raw`]=h.raw):s[r]=h}}static processPrimitiveSchemaItem(e,n,s){var r;const a=(r=n.converter)!==null&&r!==void 0?r:Yi(s)?new s:null;if(!a)throw new Error("Converter is empty");return n.repeated?this.processRepeatedPrimitiveItem(e,n,a):this.processSinglePrimitiveItem(e,n,s,a)}static processRepeatedPrimitiveItem(e,n,s){if(n.implicit){const r=n.repeated==="sequence"?Gr:di,a=new r;a.valueBlock=e.valueBlock;const o=Ic(a.toBER(!1));if(o.offset===-1)throw new Error(`Cannot parse the child item. ${o.result.error}`);if(!("value"in o.result.valueBlock&&Array.isArray(o.result.valueBlock.value)))throw new Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");const c=o.result.valueBlock.value;return Array.from(c,h=>s.fromASN(h))}else return Array.from(e,r=>s.fromASN(r))}static processSinglePrimitiveItem(e,n,s,r){let a=e;if(n.implicit){let o;if(Yi(s))o=new s().toSchema("");else{const c=te[s],h=qR[c];if(!h)throw new Error(`Cannot get '${c}' class from asn1js module`);o=new h}o.valueBlock=a.valueBlock,a=Ic(o.toBER(!1)).result}return r.fromASN(a)}static processComplexSchemaItem(e,n,s){if(n.repeated){if(!Array.isArray(e))throw new Error("Cannot get list of items from the ASN.1 parsed value. ASN.1 value should be iterable.");return Array.from(e,r=>this.fromASN(r,s))}else{const r=this.handleImplicitTagging(e,n,s);if(this.isOptionalChoiceField(n))try{return this.fromASN(r,s)}catch(a){if(a instanceof jh&&/Wrong values for Choice type/.test(a.message))return;throw a}else{const a=this.fromASN(r,s);return n.raw?{value:a,raw:e.valueBeforeDecodeView}:a}}}static handleImplicitTagging(e,n,s){if(n.implicit&&typeof n.context=="number"){const r=ts.get(s);if(r.type===be.Sequence){const a=new Gr;if("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)&&"value"in a.valueBlock)return a.valueBlock.value=e.valueBlock.value,a}else if(r.type===be.Set){const a=new di;if("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)&&"value"in a.valueBlock)return a.valueBlock.value=e.valueBlock.value,a}}return e}}class d2{static serialize(e){return e instanceof is?e.toBER(!1):this.toASN(e).toBER(!1)}static toASN(e){if(e&&typeof e=="object"&&Yi(e))return e.toASN();if(!(e&&typeof e=="object"))throw new TypeError("Parameter 1 should be type of Object.");const n=e.constructor,s=ts.get(n);ts.cache(n);let r=[];if(s.itemType){if(!Array.isArray(e))throw new TypeError("Parameter 1 should be type of Array.");if(typeof s.itemType=="number"){const o=Td(s.itemType);if(!o)throw new Error(`Cannot get default converter for array item of ${n.name} ASN1 schema`);r=e.map(c=>o.toASN(c))}else r=e.map(o=>this.toAsnItem({type:s.itemType},"[]",n,o))}else for(const o in s.items){const c=s.items[o],h=e[o];if(h===void 0||c.defaultValue===h||typeof c.defaultValue=="object"&&typeof h=="object"&&uW(this.serialize(c.defaultValue),this.serialize(h)))continue;const d=d2.toAsnItem(c,o,n,h);if(typeof c.context=="number")if(c.implicit)if(!c.repeated&&(typeof c.type=="number"||Yi(c.type))){const g={};g.valueHex=d instanceof eo?d.valueBeforeDecodeView:d.valueBlock.toBER(),r.push(new vf({optional:c.optional,idBlock:{tagClass:3,tagNumber:c.context},...g}))}else r.push(new xs({optional:c.optional,idBlock:{tagClass:3,tagNumber:c.context},value:d.valueBlock.value}));else r.push(new xs({optional:c.optional,idBlock:{tagClass:3,tagNumber:c.context},value:[d]}));else c.repeated?r=r.concat(d):r.push(d)}let a;switch(s.type){case be.Sequence:a=new Gr({value:r});break;case be.Set:a=new di({value:r});break;case be.Choice:if(!r[0])throw new Error(`Schema '${n.name}' has wrong data. Choice cannot be empty.`);a=r[0];break}return a}static toAsnItem(e,n,s,r){let a;if(typeof e.type=="number"){const o=e.converter;if(!o)throw new Error(`Property '${n}' doesn't have converter for type ${te[e.type]} in schema '${s.name}'`);if(e.repeated){if(!Array.isArray(r))throw new TypeError("Parameter 'objProp' should be type of Array.");const c=Array.from(r,d=>o.toASN(d)),h=e.repeated==="sequence"?Gr:di;a=new h({value:c})}else a=o.toASN(r)}else if(e.repeated){if(!Array.isArray(r))throw new TypeError("Parameter 'objProp' should be type of Array.");const o=Array.from(r,h=>this.toASN(h)),c=e.repeated==="sequence"?Gr:di;a=new c({value:o})}else a=this.toASN(r);return a}}class Pt extends Array{constructor(e=[]){if(typeof e=="number")super(e);else{super();for(const n of e)this.push(n)}}}class Me{static serialize(e){return d2.serialize(e)}static parse(e,n){return dW.parse(e,n)}static toString(e){const n=Re.isBufferSource(e)?Re.toArrayBuffer(e):Me.serialize(e),s=Ic(n);if(s.offset===-1)throw new Error(`Cannot decode ASN.1 data. ${s.result.error}`);return s.result.toString()}}function j(t,e,n,s){var r=arguments.length,a=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,n):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,s);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a}function ut(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)}function tn(t,e,n,s,r){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?r.call(t,n):r?r.value=n:e.set(t,n),n}class nA{static isIPv4(e){return/^(\d{1,3}\.){3}\d{1,3}$/.test(e)}static parseIPv4(e){const n=e.split(".");if(n.length!==4)throw new Error("Invalid IPv4 address");return n.map(s=>{const r=parseInt(s,10);if(isNaN(r)||r<0||r>255)throw new Error("Invalid IPv4 address part");return r})}static parseIPv6(e){const s=this.expandIPv6(e).split(":");if(s.length!==8)throw new Error("Invalid IPv6 address");return s.reduce((r,a)=>{const o=parseInt(a,16);if(isNaN(o)||o<0||o>65535)throw new Error("Invalid IPv6 address part");return r.push(o>>8&255),r.push(o&255),r},[])}static expandIPv6(e){if(!e.includes("::"))return e;const n=e.split("::");if(n.length>2)throw new Error("Invalid IPv6 address");const s=n[0]?n[0].split(":"):[],r=n[1]?n[1].split(":"):[],a=8-(s.length+r.length);if(a<0)throw new Error("Invalid IPv6 address");return[...s,...Array(a).fill("0"),...r].join(":")}static formatIPv6(e){const n=[];for(let s=0;s<16;s+=2)n.push((e[s]<<8|e[s+1]).toString(16));return this.compressIPv6(n.join(":"))}static compressIPv6(e){const n=e.split(":");let s=-1,r=0,a=-1,o=0;for(let c=0;c<n.length;c++)n[c]==="0"?(a===-1&&(a=c),o++):(o>r&&(s=a,r=o),a=-1,o=0);if(o>r&&(s=a,r=o),r>1){const c=n.slice(0,s).join(":"),h=n.slice(s+r).join(":");return`${c}::${h}`}return e}static parseCIDR(e){const[n,s]=e.split("/"),r=parseInt(s,10);if(this.isIPv4(n)){if(r<0||r>32)throw new Error("Invalid IPv4 prefix length");return[this.parseIPv4(n),r]}else{if(r<0||r>128)throw new Error("Invalid IPv6 prefix length");return[this.parseIPv6(n),r]}}static decodeIP(e){if(e.length===64&&parseInt(e,16)===0)return"::/0";if(e.length!==16)return e;const n=parseInt(e.slice(8),16).toString(2).split("").reduce((r,a)=>r+ +a,0);let s=e.slice(0,8).replace(/(.{2})/g,r=>`${parseInt(r,16)}.`);return s=s.slice(0,-1),`${s}/${n}`}static toString(e){const n=new Uint8Array(e);if(n.length===4)return Array.from(n).join(".");if(n.length===16)return this.formatIPv6(n);if(n.length===8||n.length===32){const s=n.length/2,r=n.slice(0,s),a=n.slice(s);if(n.every(h=>h===0))return n.length===8?"0.0.0.0/0":"::/0";const c=a.reduce((h,d)=>h+(d.toString(2).match(/1/g)||[]).length,0);return n.length===8?`${Array.from(r).join(".")}/${c}`:`${this.formatIPv6(r)}/${c}`}return this.decodeIP(Fe.ToHex(e))}static fromString(e){if(e.includes("/")){const[s,r]=this.parseCIDR(e),a=new Uint8Array(s.length);let o=r;for(let h=0;h<a.length;h++)o>=8?(a[h]=255,o-=8):o>0&&(a[h]=255<<8-o,o=0);const c=new Uint8Array(s.length*2);return c.set(s,0),c.set(a,s.length),c.buffer}const n=this.isIPv4(e)?this.parseIPv4(e):this.parseIPv6(e);return new Uint8Array(n).buffer}}var Y_,X_,J_;let as=class{constructor(e={}){Object.assign(this,e)}toString(){return this.bmpString||this.printableString||this.teletexString||this.universalString||this.utf8String||""}};j([I({type:te.TeletexString})],as.prototype,"teletexString",void 0);j([I({type:te.PrintableString})],as.prototype,"printableString",void 0);j([I({type:te.UniversalString})],as.prototype,"universalString",void 0);j([I({type:te.Utf8String})],as.prototype,"utf8String",void 0);j([I({type:te.BmpString})],as.prototype,"bmpString",void 0);as=j([ke({type:be.Choice})],as);let Vc=class extends as{constructor(e={}){super(e),Object.assign(this,e)}toString(){return this.ia5String||(this.anyValue?Fe.ToHex(this.anyValue):super.toString())}};j([I({type:te.IA5String})],Vc.prototype,"ia5String",void 0);j([I({type:te.Any})],Vc.prototype,"anyValue",void 0);Vc=j([ke({type:be.Choice})],Vc);class Gg{constructor(e={}){this.type="",this.value=new Vc,Object.assign(this,e)}}j([I({type:te.ObjectIdentifier})],Gg.prototype,"type",void 0);j([I({type:Vc})],Gg.prototype,"value",void 0);let Fc=Y_=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,Y_.prototype)}};Fc=Y_=j([ke({type:be.Set,itemType:Gg})],Fc);let Q_=X_=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,X_.prototype)}};Q_=X_=j([ke({type:be.Sequence,itemType:Fc})],Q_);let Dn=J_=class extends Q_{constructor(e){super(e),Object.setPrototypeOf(this,J_.prototype)}};Dn=J_=j([ke({type:be.Sequence})],Dn);const fW={fromASN:t=>nA.toString(S0.fromASN(t)),toASN:t=>S0.toASN(nA.fromString(t))};class Kd{constructor(e={}){this.typeId="",this.value=new ArrayBuffer(0),Object.assign(this,e)}}j([I({type:te.ObjectIdentifier})],Kd.prototype,"typeId",void 0);j([I({type:te.Any,context:0})],Kd.prototype,"value",void 0);class f2{constructor(e={}){this.partyName=new as,Object.assign(this,e)}}j([I({type:as,optional:!0,context:0,implicit:!0})],f2.prototype,"nameAssigner",void 0);j([I({type:as,context:1,implicit:!0})],f2.prototype,"partyName",void 0);let lt=class{constructor(e={}){Object.assign(this,e)}};j([I({type:Kd,context:0,implicit:!0})],lt.prototype,"otherName",void 0);j([I({type:te.IA5String,context:1,implicit:!0})],lt.prototype,"rfc822Name",void 0);j([I({type:te.IA5String,context:2,implicit:!0})],lt.prototype,"dNSName",void 0);j([I({type:te.Any,context:3,implicit:!0})],lt.prototype,"x400Address",void 0);j([I({type:Dn,context:4,implicit:!1})],lt.prototype,"directoryName",void 0);j([I({type:f2,context:5})],lt.prototype,"ediPartyName",void 0);j([I({type:te.IA5String,context:6,implicit:!0})],lt.prototype,"uniformResourceIdentifier",void 0);j([I({type:te.OctetString,context:7,implicit:!0,converter:fW})],lt.prototype,"iPAddress",void 0);j([I({type:te.ObjectIdentifier,context:8,implicit:!0})],lt.prototype,"registeredID",void 0);lt=j([ke({type:be.Choice})],lt);const p2="1.3.6.1.5.5.7",pW=`${p2}.1`,gu=`${p2}.3`,Yg=`${p2}.48`,sA=`${Yg}.1`,rA=`${Yg}.2`,iA=`${Yg}.3`,aA=`${Yg}.5`,ua="2.5.29";var Z_;const ex=`${pW}.1`;class xf{constructor(e={}){this.accessMethod="",this.accessLocation=new lt,Object.assign(this,e)}}j([I({type:te.ObjectIdentifier})],xf.prototype,"accessMethod",void 0);j([I({type:lt})],xf.prototype,"accessLocation",void 0);let Ec=Z_=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,Z_.prototype)}};Ec=Z_=j([ke({type:be.Sequence,itemType:xf})],Ec);const tx=`${ua}.35`;class m2 extends At{}class zl{constructor(e={}){e&&Object.assign(this,e)}}j([I({type:m2,context:0,optional:!0,implicit:!0})],zl.prototype,"keyIdentifier",void 0);j([I({type:lt,context:1,optional:!0,implicit:!0,repeated:"sequence"})],zl.prototype,"authorityCertIssuer",void 0);j([I({type:te.Integer,context:2,optional:!0,implicit:!0,converter:Qt})],zl.prototype,"authorityCertSerialNumber",void 0);const GR=`${ua}.19`;class k0{constructor(e={}){this.cA=!1,Object.assign(this,e)}}j([I({type:te.Boolean,defaultValue:!1})],k0.prototype,"cA",void 0);j([I({type:te.Integer,optional:!0})],k0.prototype,"pathLenConstraint",void 0);var nx;let fs=nx=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,nx.prototype)}};fs=nx=j([ke({type:be.Sequence,itemType:lt})],fs);var sx;let lA=sx=class extends fs{constructor(e){super(e),Object.setPrototypeOf(this,sx.prototype)}};lA=sx=j([ke({type:be.Sequence})],lA);var rx;const YR=`${ua}.32`;let ta=class{constructor(e={}){Object.assign(this,e)}toString(){return this.ia5String||this.visibleString||this.bmpString||this.utf8String||""}};j([I({type:te.IA5String})],ta.prototype,"ia5String",void 0);j([I({type:te.VisibleString})],ta.prototype,"visibleString",void 0);j([I({type:te.BmpString})],ta.prototype,"bmpString",void 0);j([I({type:te.Utf8String})],ta.prototype,"utf8String",void 0);ta=j([ke({type:be.Choice})],ta);class g2{constructor(e={}){this.organization=new ta,this.noticeNumbers=[],Object.assign(this,e)}}j([I({type:ta})],g2.prototype,"organization",void 0);j([I({type:te.Integer,repeated:"sequence"})],g2.prototype,"noticeNumbers",void 0);class y2{constructor(e={}){Object.assign(this,e)}}j([I({type:g2,optional:!0})],y2.prototype,"noticeRef",void 0);j([I({type:ta,optional:!0})],y2.prototype,"explicitText",void 0);let C0=class{constructor(e={}){Object.assign(this,e)}};j([I({type:te.IA5String})],C0.prototype,"cPSuri",void 0);j([I({type:y2})],C0.prototype,"userNotice",void 0);C0=j([ke({type:be.Choice})],C0);class v2{constructor(e={}){this.policyQualifierId="",this.qualifier=new ArrayBuffer(0),Object.assign(this,e)}}j([I({type:te.ObjectIdentifier})],v2.prototype,"policyQualifierId",void 0);j([I({type:te.Any})],v2.prototype,"qualifier",void 0);class Xg{constructor(e={}){this.policyIdentifier="",Object.assign(this,e)}}j([I({type:te.ObjectIdentifier})],Xg.prototype,"policyIdentifier",void 0);j([I({type:v2,repeated:"sequence",optional:!0})],Xg.prototype,"policyQualifiers",void 0);let N0=rx=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,rx.prototype)}};N0=rx=j([ke({type:be.Sequence,itemType:Xg})],N0);let E0=class{constructor(e=0){this.value=e}};j([I({type:te.Integer})],E0.prototype,"value",void 0);E0=j([ke({type:be.Choice})],E0);let oA=class extends E0{};oA=j([ke({type:be.Choice})],oA);var ix;const ax=`${ua}.31`;var Fr;(function(t){t[t.unused=1]="unused",t[t.keyCompromise=2]="keyCompromise",t[t.cACompromise=4]="cACompromise",t[t.affiliationChanged=8]="affiliationChanged",t[t.superseded=16]="superseded",t[t.cessationOfOperation=32]="cessationOfOperation",t[t.certificateHold=64]="certificateHold",t[t.privilegeWithdrawn=128]="privilegeWithdrawn",t[t.aACompromise=256]="aACompromise"})(Fr||(Fr={}));class XR extends Wg{toJSON(){const e=[],n=this.toNumber();return n&Fr.aACompromise&&e.push("aACompromise"),n&Fr.affiliationChanged&&e.push("affiliationChanged"),n&Fr.cACompromise&&e.push("cACompromise"),n&Fr.certificateHold&&e.push("certificateHold"),n&Fr.cessationOfOperation&&e.push("cessationOfOperation"),n&Fr.keyCompromise&&e.push("keyCompromise"),n&Fr.privilegeWithdrawn&&e.push("privilegeWithdrawn"),n&Fr.superseded&&e.push("superseded"),n&Fr.unused&&e.push("unused"),e}toString(){return`[${this.toJSON().join(", ")}]`}}let no=class{constructor(e={}){Object.assign(this,e)}};j([I({type:lt,context:0,repeated:"sequence",implicit:!0})],no.prototype,"fullName",void 0);j([I({type:Fc,context:1,implicit:!0})],no.prototype,"nameRelativeToCRLIssuer",void 0);no=j([ke({type:be.Choice})],no);class yu{constructor(e={}){Object.assign(this,e)}}j([I({type:no,context:0,optional:!0})],yu.prototype,"distributionPoint",void 0);j([I({type:XR,context:1,optional:!0,implicit:!0})],yu.prototype,"reasons",void 0);j([I({type:lt,context:2,optional:!0,repeated:"sequence",implicit:!0})],yu.prototype,"cRLIssuer",void 0);let Pc=ix=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,ix.prototype)}};Pc=ix=j([ke({type:be.Sequence,itemType:yu})],Pc);var lx;let cA=lx=class extends Pc{constructor(e){super(e),Object.setPrototypeOf(this,lx.prototype)}};cA=lx=j([ke({type:be.Sequence,itemType:yu})],cA);class ds{constructor(e={}){this.onlyContainsUserCerts=ds.ONLY,this.onlyContainsCACerts=ds.ONLY,this.indirectCRL=ds.ONLY,this.onlyContainsAttributeCerts=ds.ONLY,Object.assign(this,e)}}ds.ONLY=!1;j([I({type:no,context:0,optional:!0})],ds.prototype,"distributionPoint",void 0);j([I({type:te.Boolean,context:1,defaultValue:ds.ONLY,implicit:!0})],ds.prototype,"onlyContainsUserCerts",void 0);j([I({type:te.Boolean,context:2,defaultValue:ds.ONLY,implicit:!0})],ds.prototype,"onlyContainsCACerts",void 0);j([I({type:XR,context:3,optional:!0,implicit:!0})],ds.prototype,"onlySomeReasons",void 0);j([I({type:te.Boolean,context:4,defaultValue:ds.ONLY,implicit:!0})],ds.prototype,"indirectCRL",void 0);j([I({type:te.Boolean,context:5,defaultValue:ds.ONLY,implicit:!0})],ds.prototype,"onlyContainsAttributeCerts",void 0);var Od;(function(t){t[t.unspecified=0]="unspecified",t[t.keyCompromise=1]="keyCompromise",t[t.cACompromise=2]="cACompromise",t[t.affiliationChanged=3]="affiliationChanged",t[t.superseded=4]="superseded",t[t.cessationOfOperation=5]="cessationOfOperation",t[t.certificateHold=6]="certificateHold",t[t.removeFromCRL=8]="removeFromCRL",t[t.privilegeWithdrawn=9]="privilegeWithdrawn",t[t.aACompromise=10]="aACompromise"})(Od||(Od={}));let ox=class{constructor(e=Od.unspecified){this.reason=Od.unspecified,this.reason=e}toJSON(){return Od[this.reason]}toString(){return this.toJSON()}};j([I({type:te.Enumerated})],ox.prototype,"reason",void 0);ox=j([ke({type:be.Choice})],ox);var cx;const JR=`${ua}.37`;let A0=cx=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,cx.prototype)}};A0=cx=j([ke({type:be.Sequence,itemType:te.ObjectIdentifier})],A0);const mW=`${gu}.1`,gW=`${gu}.2`,yW=`${gu}.3`,vW=`${gu}.4`,bW=`${gu}.8`,_W=`${gu}.9`;let ux=class{constructor(e=new ArrayBuffer(0)){this.value=e}};j([I({type:te.Integer,converter:Qt})],ux.prototype,"value",void 0);ux=j([ke({type:be.Choice})],ux);let hx=class{constructor(e){this.value=new Date,e&&(this.value=e)}};j([I({type:te.GeneralizedTime})],hx.prototype,"value",void 0);hx=j([ke({type:be.Choice})],hx);var dx;const QR=`${ua}.18`;let uA=dx=class extends fs{constructor(e){super(e),Object.setPrototypeOf(this,dx.prototype)}};uA=dx=j([ke({type:be.Sequence})],uA);const ZR=`${ua}.15`;var qr;(function(t){t[t.digitalSignature=1]="digitalSignature",t[t.nonRepudiation=2]="nonRepudiation",t[t.keyEncipherment=4]="keyEncipherment",t[t.dataEncipherment=8]="dataEncipherment",t[t.keyAgreement=16]="keyAgreement",t[t.keyCertSign=32]="keyCertSign",t[t.cRLSign=64]="cRLSign",t[t.encipherOnly=128]="encipherOnly",t[t.decipherOnly=256]="decipherOnly"})(qr||(qr={}));class Rb extends Wg{toJSON(){const e=this.toNumber(),n=[];return e&qr.cRLSign&&n.push("crlSign"),e&qr.dataEncipherment&&n.push("dataEncipherment"),e&qr.decipherOnly&&n.push("decipherOnly"),e&qr.digitalSignature&&n.push("digitalSignature"),e&qr.encipherOnly&&n.push("encipherOnly"),e&qr.keyAgreement&&n.push("keyAgreement"),e&qr.keyCertSign&&n.push("keyCertSign"),e&qr.keyEncipherment&&n.push("keyEncipherment"),e&qr.nonRepudiation&&n.push("nonRepudiation"),n}toString(){return`[${this.toJSON().join(", ")}]`}}var fx;class Jg{constructor(e={}){this.base=new lt,this.minimum=0,Object.assign(this,e)}}j([I({type:lt})],Jg.prototype,"base",void 0);j([I({type:te.Integer,context:0,defaultValue:0,implicit:!0})],Jg.prototype,"minimum",void 0);j([I({type:te.Integer,context:1,optional:!0,implicit:!0})],Jg.prototype,"maximum",void 0);let j0=fx=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,fx.prototype)}};j0=fx=j([ke({type:be.Sequence,itemType:Jg})],j0);class eB{constructor(e={}){Object.assign(this,e)}}j([I({type:j0,context:0,optional:!0,implicit:!0})],eB.prototype,"permittedSubtrees",void 0);j([I({type:j0,context:1,optional:!0,implicit:!0})],eB.prototype,"excludedSubtrees",void 0);class tB{constructor(e={}){Object.assign(this,e)}}j([I({type:te.Integer,context:0,implicit:!0,optional:!0,converter:Qt})],tB.prototype,"requireExplicitPolicy",void 0);j([I({type:te.Integer,context:1,implicit:!0,optional:!0,converter:Qt})],tB.prototype,"inhibitPolicyMapping",void 0);var px;class b2{constructor(e={}){this.issuerDomainPolicy="",this.subjectDomainPolicy="",Object.assign(this,e)}}j([I({type:te.ObjectIdentifier})],b2.prototype,"issuerDomainPolicy",void 0);j([I({type:te.ObjectIdentifier})],b2.prototype,"subjectDomainPolicy",void 0);let hA=px=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,px.prototype)}};hA=px=j([ke({type:be.Sequence,itemType:b2})],hA);var mx;const nB=`${ua}.17`;let gx=mx=class extends fs{constructor(e){super(e),Object.setPrototypeOf(this,mx.prototype)}};gx=mx=j([ke({type:be.Sequence})],gx);let na=class{constructor(e={}){this.type="",this.values=[],Object.assign(this,e)}};j([I({type:te.ObjectIdentifier})],na.prototype,"type",void 0);j([I({type:te.Any,repeated:"set"})],na.prototype,"values",void 0);var yx;let dA=yx=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,yx.prototype)}};dA=yx=j([ke({type:be.Sequence,itemType:na})],dA);const sB=`${ua}.14`;class el extends m2{}class rB{constructor(e={}){Object.assign(this,e)}}j([I({type:te.GeneralizedTime,context:0,implicit:!0,optional:!0})],rB.prototype,"notBefore",void 0);j([I({type:te.GeneralizedTime,context:1,implicit:!0,optional:!0})],rB.prototype,"notAfter",void 0);var Rd;(function(t){t[t.keyUpdateAllowed=1]="keyUpdateAllowed",t[t.newExtensions=2]="newExtensions",t[t.pKIXCertificate=4]="pKIXCertificate"})(Rd||(Rd={}));class iB extends Wg{toJSON(){const e=[],n=this.toNumber();return n&Rd.pKIXCertificate&&e.push("pKIXCertificate"),n&Rd.newExtensions&&e.push("newExtensions"),n&Rd.keyUpdateAllowed&&e.push("keyUpdateAllowed"),e}toString(){return`[${this.toJSON().join(", ")}]`}}class aB{constructor(e={}){this.entrustVers="",this.entrustInfoFlags=new iB,Object.assign(this,e)}}j([I({type:te.GeneralString})],aB.prototype,"entrustVers",void 0);j([I({type:iB})],aB.prototype,"entrustInfoFlags",void 0);var vx;let fA=vx=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,vx.prototype)}};fA=vx=j([ke({type:be.Sequence,itemType:xf})],fA);class Ie{constructor(e={}){this.algorithm="",Object.assign(this,e)}isEqual(e){return e instanceof Ie&&e.algorithm==this.algorithm&&(e.parameters&&this.parameters&&YO(e.parameters,this.parameters)||e.parameters===this.parameters)}}j([I({type:te.ObjectIdentifier})],Ie.prototype,"algorithm",void 0);j([I({type:te.Any,optional:!0})],Ie.prototype,"parameters",void 0);class ui{constructor(e={}){this.algorithm=new Ie,this.subjectPublicKey=new ArrayBuffer(0),Object.assign(this,e)}}j([I({type:Ie})],ui.prototype,"algorithm",void 0);j([I({type:te.BitString})],ui.prototype,"subjectPublicKey",void 0);let ss=class{constructor(e){if(e)if(typeof e=="string"||typeof e=="number"||e instanceof Date){const n=new Date(e);n.getUTCFullYear()>2049?this.generalTime=n:this.utcTime=n}else Object.assign(this,e)}getTime(){const e=this.utcTime||this.generalTime;if(!e)throw new Error("Cannot get time from CHOICE object");return e}};j([I({type:te.UTCTime})],ss.prototype,"utcTime",void 0);j([I({type:te.GeneralizedTime})],ss.prototype,"generalTime",void 0);ss=j([ke({type:be.Choice})],ss);class Qg{constructor(e){this.notBefore=new ss(new Date),this.notAfter=new ss(new Date),e&&(this.notBefore=new ss(e.notBefore),this.notAfter=new ss(e.notAfter))}}j([I({type:ss})],Qg.prototype,"notBefore",void 0);j([I({type:ss})],Qg.prototype,"notAfter",void 0);var bx;let Yr=class lB{constructor(e={}){this.extnID="",this.critical=lB.CRITICAL,this.extnValue=new At,Object.assign(this,e)}};Yr.CRITICAL=!1;j([I({type:te.ObjectIdentifier})],Yr.prototype,"extnID",void 0);j([I({type:te.Boolean,defaultValue:Yr.CRITICAL})],Yr.prototype,"critical",void 0);j([I({type:At})],Yr.prototype,"extnValue",void 0);let so=bx=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,bx.prototype)}};so=bx=j([ke({type:be.Sequence,itemType:Yr})],so);var qc;(function(t){t[t.v1=0]="v1",t[t.v2=1]="v2",t[t.v3=2]="v3"})(qc||(qc={}));class zr{constructor(e={}){this.version=qc.v1,this.serialNumber=new ArrayBuffer(0),this.signature=new Ie,this.issuer=new Dn,this.validity=new Qg,this.subject=new Dn,this.subjectPublicKeyInfo=new ui,Object.assign(this,e)}}j([I({type:te.Integer,context:0,defaultValue:qc.v1})],zr.prototype,"version",void 0);j([I({type:te.Integer,converter:Qt})],zr.prototype,"serialNumber",void 0);j([I({type:Ie})],zr.prototype,"signature",void 0);j([I({type:Dn})],zr.prototype,"issuer",void 0);j([I({type:Qg})],zr.prototype,"validity",void 0);j([I({type:Dn})],zr.prototype,"subject",void 0);j([I({type:ui})],zr.prototype,"subjectPublicKeyInfo",void 0);j([I({type:te.BitString,context:1,implicit:!0,optional:!0})],zr.prototype,"issuerUniqueID",void 0);j([I({type:te.BitString,context:2,implicit:!0,optional:!0})],zr.prototype,"subjectUniqueID",void 0);j([I({type:so,context:3,optional:!0})],zr.prototype,"extensions",void 0);class Kc{constructor(e={}){this.tbsCertificate=new zr,this.signatureAlgorithm=new Ie,this.signatureValue=new ArrayBuffer(0),Object.assign(this,e)}}j([I({type:zr,raw:!0})],Kc.prototype,"tbsCertificate",void 0);j([I({type:Ie})],Kc.prototype,"signatureAlgorithm",void 0);j([I({type:te.BitString})],Kc.prototype,"signatureValue",void 0);class Zg{constructor(e={}){this.userCertificate=new ArrayBuffer(0),this.revocationDate=new ss,Object.assign(this,e)}}j([I({type:te.Integer,converter:Qt})],Zg.prototype,"userCertificate",void 0);j([I({type:ss})],Zg.prototype,"revocationDate",void 0);j([I({type:Yr,optional:!0,repeated:"sequence"})],Zg.prototype,"crlEntryExtensions",void 0);class ha{constructor(e={}){this.signature=new Ie,this.issuer=new Dn,this.thisUpdate=new ss,Object.assign(this,e)}}j([I({type:te.Integer,optional:!0})],ha.prototype,"version",void 0);j([I({type:Ie})],ha.prototype,"signature",void 0);j([I({type:Dn})],ha.prototype,"issuer",void 0);j([I({type:ss})],ha.prototype,"thisUpdate",void 0);j([I({type:ss,optional:!0})],ha.prototype,"nextUpdate",void 0);j([I({type:Zg,repeated:"sequence",optional:!0})],ha.prototype,"revokedCertificates",void 0);j([I({type:Yr,optional:!0,context:0,repeated:"sequence"})],ha.prototype,"crlExtensions",void 0);class _2{constructor(e={}){this.tbsCertList=new ha,this.signatureAlgorithm=new Ie,this.signature=new ArrayBuffer(0),Object.assign(this,e)}}j([I({type:ha,raw:!0})],_2.prototype,"tbsCertList",void 0);j([I({type:Ie})],_2.prototype,"signatureAlgorithm",void 0);j([I({type:te.BitString})],_2.prototype,"signature",void 0);class vu{constructor(e={}){this.issuer=new Dn,this.serialNumber=new ArrayBuffer(0),Object.assign(this,e)}}j([I({type:Dn})],vu.prototype,"issuer",void 0);j([I({type:te.Integer,converter:Qt})],vu.prototype,"serialNumber",void 0);let Wc=class{constructor(e={}){Object.assign(this,e)}};j([I({type:el,context:0,implicit:!0})],Wc.prototype,"subjectKeyIdentifier",void 0);j([I({type:vu})],Wc.prototype,"issuerAndSerialNumber",void 0);Wc=j([ke({type:be.Choice})],Wc);var sa;(function(t){t[t.v0=0]="v0",t[t.v1=1]="v1",t[t.v2=2]="v2",t[t.v3=3]="v3",t[t.v4=4]="v4",t[t.v5=5]="v5"})(sa||(sa={}));let Wd=class extends Ie{};Wd=j([ke({type:be.Sequence})],Wd);let T0=class extends Ie{};T0=j([ke({type:be.Sequence})],T0);let gi=class extends Ie{};gi=j([ke({type:be.Sequence})],gi);let O0=class extends Ie{};O0=j([ke({type:be.Sequence})],O0);let pA=class extends Ie{};pA=j([ke({type:be.Sequence})],pA);let _x=class extends Ie{};_x=j([ke({type:be.Sequence})],_x);let bu=class{constructor(e={}){this.attrType="",this.attrValues=[],Object.assign(this,e)}};j([I({type:te.ObjectIdentifier})],bu.prototype,"attrType",void 0);j([I({type:te.Any,repeated:"set"})],bu.prototype,"attrValues",void 0);var xx;class Si{constructor(e={}){this.version=sa.v0,this.sid=new Wc,this.digestAlgorithm=new Wd,this.signatureAlgorithm=new T0,this.signature=new At,Object.assign(this,e)}}j([I({type:te.Integer})],Si.prototype,"version",void 0);j([I({type:Wc})],Si.prototype,"sid",void 0);j([I({type:Wd})],Si.prototype,"digestAlgorithm",void 0);j([I({type:bu,repeated:"set",context:0,implicit:!0,optional:!0,raw:!0})],Si.prototype,"signedAttrs",void 0);j([I({type:T0})],Si.prototype,"signatureAlgorithm",void 0);j([I({type:At})],Si.prototype,"signature",void 0);j([I({type:bu,repeated:"set",context:1,implicit:!0,optional:!0})],Si.prototype,"unsignedAttrs",void 0);let R0=xx=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,xx.prototype)}};R0=xx=j([ke({type:be.Set,itemType:Si})],R0);let mA=class extends Si{};mA=j([ke({type:be.Sequence})],mA);let gA=class extends ss{};gA=j([ke({type:be.Choice})],gA);class x2{constructor(e={}){this.acIssuer=new lt,this.acSerial=0,this.attrs=[],Object.assign(this,e)}}j([I({type:lt})],x2.prototype,"acIssuer",void 0);j([I({type:te.Integer})],x2.prototype,"acSerial",void 0);j([I({type:na,repeated:"sequence"})],x2.prototype,"attrs",void 0);var wx;let B0=wx=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,wx.prototype)}};B0=wx=j([ke({type:be.Sequence,itemType:te.ObjectIdentifier})],B0);class ey{constructor(e={}){this.permitUnSpecified=!0,Object.assign(this,e)}}j([I({type:te.Integer,optional:!0})],ey.prototype,"pathLenConstraint",void 0);j([I({type:B0,implicit:!0,context:0,optional:!0})],ey.prototype,"permittedAttrs",void 0);j([I({type:B0,implicit:!0,context:1,optional:!0})],ey.prototype,"excludedAttrs",void 0);j([I({type:te.Boolean,defaultValue:!0})],ey.prototype,"permitUnSpecified",void 0);class bo{constructor(e={}){this.issuer=new fs,this.serial=new ArrayBuffer(0),this.issuerUID=new ArrayBuffer(0),Object.assign(this,e)}}j([I({type:fs})],bo.prototype,"issuer",void 0);j([I({type:te.Integer,converter:Qt})],bo.prototype,"serial",void 0);j([I({type:te.BitString,optional:!0})],bo.prototype,"issuerUID",void 0);var Sx;(function(t){t[t.publicKey=0]="publicKey",t[t.publicKeyCert=1]="publicKeyCert",t[t.otherObjectTypes=2]="otherObjectTypes"})(Sx||(Sx={}));class _o{constructor(e={}){this.digestedObjectType=Sx.publicKey,this.digestAlgorithm=new Ie,this.objectDigest=new ArrayBuffer(0),Object.assign(this,e)}}j([I({type:te.Enumerated})],_o.prototype,"digestedObjectType",void 0);j([I({type:te.ObjectIdentifier,optional:!0})],_o.prototype,"otherObjectTypeID",void 0);j([I({type:Ie})],_o.prototype,"digestAlgorithm",void 0);j([I({type:te.BitString})],_o.prototype,"objectDigest",void 0);class ty{constructor(e={}){Object.assign(this,e)}}j([I({type:fs,optional:!0})],ty.prototype,"issuerName",void 0);j([I({type:bo,context:0,implicit:!0,optional:!0})],ty.prototype,"baseCertificateID",void 0);j([I({type:_o,context:1,implicit:!0,optional:!0})],ty.prototype,"objectDigestInfo",void 0);let Gc=class{constructor(e={}){Object.assign(this,e)}};j([I({type:lt,repeated:"sequence"})],Gc.prototype,"v1Form",void 0);j([I({type:ty,context:0,implicit:!0})],Gc.prototype,"v2Form",void 0);Gc=j([ke({type:be.Choice})],Gc);class ny{constructor(e={}){this.notBeforeTime=new Date,this.notAfterTime=new Date,Object.assign(this,e)}}j([I({type:te.GeneralizedTime})],ny.prototype,"notBeforeTime",void 0);j([I({type:te.GeneralizedTime})],ny.prototype,"notAfterTime",void 0);class wf{constructor(e={}){Object.assign(this,e)}}j([I({type:bo,implicit:!0,context:0,optional:!0})],wf.prototype,"baseCertificateID",void 0);j([I({type:fs,implicit:!0,context:1,optional:!0})],wf.prototype,"entityName",void 0);j([I({type:_o,implicit:!0,context:2,optional:!0})],wf.prototype,"objectDigestInfo",void 0);var kx;(function(t){t[t.v2=1]="v2"})(kx||(kx={}));class Xr{constructor(e={}){this.version=kx.v2,this.holder=new wf,this.issuer=new Gc,this.signature=new Ie,this.serialNumber=new ArrayBuffer(0),this.attrCertValidityPeriod=new ny,this.attributes=[],Object.assign(this,e)}}j([I({type:te.Integer})],Xr.prototype,"version",void 0);j([I({type:wf})],Xr.prototype,"holder",void 0);j([I({type:Gc})],Xr.prototype,"issuer",void 0);j([I({type:Ie})],Xr.prototype,"signature",void 0);j([I({type:te.Integer,converter:Qt})],Xr.prototype,"serialNumber",void 0);j([I({type:ny})],Xr.prototype,"attrCertValidityPeriod",void 0);j([I({type:na,repeated:"sequence"})],Xr.prototype,"attributes",void 0);j([I({type:te.BitString,optional:!0})],Xr.prototype,"issuerUniqueID",void 0);j([I({type:so,optional:!0})],Xr.prototype,"extensions",void 0);class sy{constructor(e={}){this.acinfo=new Xr,this.signatureAlgorithm=new Ie,this.signatureValue=new ArrayBuffer(0),Object.assign(this,e)}}j([I({type:Xr})],sy.prototype,"acinfo",void 0);j([I({type:Ie})],sy.prototype,"signatureAlgorithm",void 0);j([I({type:te.BitString})],sy.prototype,"signatureValue",void 0);var M0;(function(t){t[t.unmarked=1]="unmarked",t[t.unclassified=2]="unclassified",t[t.restricted=4]="restricted",t[t.confidential=8]="confidential",t[t.secret=16]="secret",t[t.topSecret=32]="topSecret"})(M0||(M0={}));class Cx extends Wg{}class w2{constructor(e={}){this.type="",this.value=new ArrayBuffer(0),Object.assign(this,e)}}j([I({type:te.ObjectIdentifier,implicit:!0,context:0})],w2.prototype,"type",void 0);j([I({type:te.Any,implicit:!0,context:1})],w2.prototype,"value",void 0);class S2{constructor(e={}){this.policyId="",this.classList=new Cx(M0.unclassified),Object.assign(this,e)}}j([I({type:te.ObjectIdentifier})],S2.prototype,"policyId",void 0);j([I({type:Cx,defaultValue:new Cx(M0.unclassified)})],S2.prototype,"classList",void 0);j([I({type:w2,repeated:"set"})],S2.prototype,"securityCategories",void 0);class ry{constructor(e={}){Object.assign(this,e)}}j([I({type:At})],ry.prototype,"cotets",void 0);j([I({type:te.ObjectIdentifier})],ry.prototype,"oid",void 0);j([I({type:te.Utf8String})],ry.prototype,"string",void 0);class oB{constructor(e={}){this.values=[],Object.assign(this,e)}}j([I({type:fs,implicit:!0,context:0,optional:!0})],oB.prototype,"policyAuthority",void 0);j([I({type:ry,repeated:"sequence"})],oB.prototype,"values",void 0);var Nx;class iy{constructor(e={}){this.targetCertificate=new bo,Object.assign(this,e)}}j([I({type:bo})],iy.prototype,"targetCertificate",void 0);j([I({type:lt,optional:!0})],iy.prototype,"targetName",void 0);j([I({type:_o,optional:!0})],iy.prototype,"certDigestInfo",void 0);let Yc=class{constructor(e={}){Object.assign(this,e)}};j([I({type:lt,context:0,implicit:!0})],Yc.prototype,"targetName",void 0);j([I({type:lt,context:1,implicit:!0})],Yc.prototype,"targetGroup",void 0);j([I({type:iy,context:2,implicit:!0})],Yc.prototype,"targetCert",void 0);Yc=j([ke({type:be.Choice})],Yc);let Ex=Nx=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,Nx.prototype)}};Ex=Nx=j([ke({type:be.Sequence,itemType:Yc})],Ex);var Ax;let yA=Ax=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,Ax.prototype)}};yA=Ax=j([ke({type:be.Sequence,itemType:Ex})],yA);class cB{constructor(e={}){Object.assign(this,e)}}j([I({type:fs,implicit:!0,context:0,optional:!0})],cB.prototype,"roleAuthority",void 0);j([I({type:lt,implicit:!0,context:1})],cB.prototype,"roleName",void 0);class k2{constructor(e={}){this.service=new lt,this.ident=new lt,Object.assign(this,e)}}j([I({type:lt})],k2.prototype,"service",void 0);j([I({type:lt})],k2.prototype,"ident",void 0);j([I({type:At,optional:!0})],k2.prototype,"authInfo",void 0);var jx;class C2{constructor(e={}){this.otherCertFormat="",this.otherCert=new ArrayBuffer(0),Object.assign(this,e)}}j([I({type:te.ObjectIdentifier})],C2.prototype,"otherCertFormat",void 0);j([I({type:te.Any})],C2.prototype,"otherCert",void 0);let Xc=class{constructor(e={}){Object.assign(this,e)}};j([I({type:Kc})],Xc.prototype,"certificate",void 0);j([I({type:sy,context:2,implicit:!0})],Xc.prototype,"v2AttrCert",void 0);j([I({type:C2,context:3,implicit:!0})],Xc.prototype,"other",void 0);Xc=j([ke({type:be.Choice})],Xc);let D0=jx=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,jx.prototype)}};D0=jx=j([ke({type:be.Set,itemType:Xc})],D0);class _u{constructor(e={}){this.contentType="",this.content=new ArrayBuffer(0),Object.assign(this,e)}}j([I({type:te.ObjectIdentifier})],_u.prototype,"contentType",void 0);j([I({type:te.Any,context:0})],_u.prototype,"content",void 0);let Gd=class{constructor(e={}){Object.assign(this,e)}};j([I({type:At})],Gd.prototype,"single",void 0);j([I({type:te.Any})],Gd.prototype,"any",void 0);Gd=j([ke({type:be.Choice})],Gd);class ay{constructor(e={}){this.eContentType="",Object.assign(this,e)}}j([I({type:te.ObjectIdentifier})],ay.prototype,"eContentType",void 0);j([I({type:Gd,context:0,optional:!0})],ay.prototype,"eContent",void 0);let Yd=class{constructor(e={}){Object.assign(this,e)}};j([I({type:At,context:0,implicit:!0,optional:!0})],Yd.prototype,"value",void 0);j([I({type:At,converter:YK,context:0,implicit:!0,optional:!0,repeated:"sequence"})],Yd.prototype,"constructedValue",void 0);Yd=j([ke({type:be.Choice})],Yd);class Sf{constructor(e={}){this.contentType="",this.contentEncryptionAlgorithm=new O0,Object.assign(this,e)}}j([I({type:te.ObjectIdentifier})],Sf.prototype,"contentType",void 0);j([I({type:O0})],Sf.prototype,"contentEncryptionAlgorithm",void 0);j([I({type:Yd,optional:!0})],Sf.prototype,"encryptedContent",void 0);class ly{constructor(e={}){this.keyAttrId="",Object.assign(this,e)}}j([I({type:te.ObjectIdentifier})],ly.prototype,"keyAttrId",void 0);j([I({type:te.Any,optional:!0})],ly.prototype,"keyAttr",void 0);var Tx;class oy{constructor(e={}){this.subjectKeyIdentifier=new el,Object.assign(this,e)}}j([I({type:el})],oy.prototype,"subjectKeyIdentifier",void 0);j([I({type:te.GeneralizedTime,optional:!0})],oy.prototype,"date",void 0);j([I({type:ly,optional:!0})],oy.prototype,"other",void 0);let Jc=class{constructor(e={}){Object.assign(this,e)}};j([I({type:oy,context:0,implicit:!0,optional:!0})],Jc.prototype,"rKeyId",void 0);j([I({type:vu,optional:!0})],Jc.prototype,"issuerAndSerialNumber",void 0);Jc=j([ke({type:be.Choice})],Jc);class N2{constructor(e={}){this.rid=new Jc,this.encryptedKey=new At,Object.assign(this,e)}}j([I({type:Jc})],N2.prototype,"rid",void 0);j([I({type:At})],N2.prototype,"encryptedKey",void 0);let L0=Tx=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,Tx.prototype)}};L0=Tx=j([ke({type:be.Sequence,itemType:N2})],L0);class E2{constructor(e={}){this.algorithm=new Ie,this.publicKey=new ArrayBuffer(0),Object.assign(this,e)}}j([I({type:Ie})],E2.prototype,"algorithm",void 0);j([I({type:te.BitString})],E2.prototype,"publicKey",void 0);let ro=class{constructor(e={}){Object.assign(this,e)}};j([I({type:el,context:0,implicit:!0,optional:!0})],ro.prototype,"subjectKeyIdentifier",void 0);j([I({type:E2,context:1,implicit:!0,optional:!0})],ro.prototype,"originatorKey",void 0);j([I({type:vu,optional:!0})],ro.prototype,"issuerAndSerialNumber",void 0);ro=j([ke({type:be.Choice})],ro);class xu{constructor(e={}){this.version=sa.v3,this.originator=new ro,this.keyEncryptionAlgorithm=new gi,this.recipientEncryptedKeys=new L0,Object.assign(this,e)}}j([I({type:te.Integer})],xu.prototype,"version",void 0);j([I({type:ro,context:0})],xu.prototype,"originator",void 0);j([I({type:At,context:1,optional:!0})],xu.prototype,"ukm",void 0);j([I({type:gi})],xu.prototype,"keyEncryptionAlgorithm",void 0);j([I({type:L0})],xu.prototype,"recipientEncryptedKeys",void 0);let Qc=class{constructor(e={}){Object.assign(this,e)}};j([I({type:el,context:0,implicit:!0})],Qc.prototype,"subjectKeyIdentifier",void 0);j([I({type:vu})],Qc.prototype,"issuerAndSerialNumber",void 0);Qc=j([ke({type:be.Choice})],Qc);class kf{constructor(e={}){this.version=sa.v0,this.rid=new Qc,this.keyEncryptionAlgorithm=new gi,this.encryptedKey=new At,Object.assign(this,e)}}j([I({type:te.Integer})],kf.prototype,"version",void 0);j([I({type:Qc})],kf.prototype,"rid",void 0);j([I({type:gi})],kf.prototype,"keyEncryptionAlgorithm",void 0);j([I({type:At})],kf.prototype,"encryptedKey",void 0);class Cf{constructor(e={}){this.keyIdentifier=new At,Object.assign(this,e)}}j([I({type:At})],Cf.prototype,"keyIdentifier",void 0);j([I({type:te.GeneralizedTime,optional:!0})],Cf.prototype,"date",void 0);j([I({type:ly,optional:!0})],Cf.prototype,"other",void 0);class Nf{constructor(e={}){this.version=sa.v4,this.kekid=new Cf,this.keyEncryptionAlgorithm=new gi,this.encryptedKey=new At,Object.assign(this,e)}}j([I({type:te.Integer})],Nf.prototype,"version",void 0);j([I({type:Cf})],Nf.prototype,"kekid",void 0);j([I({type:gi})],Nf.prototype,"keyEncryptionAlgorithm",void 0);j([I({type:At})],Nf.prototype,"encryptedKey",void 0);class Ef{constructor(e={}){this.version=sa.v0,this.keyEncryptionAlgorithm=new gi,this.encryptedKey=new At,Object.assign(this,e)}}j([I({type:te.Integer})],Ef.prototype,"version",void 0);j([I({type:_x,context:0,optional:!0})],Ef.prototype,"keyDerivationAlgorithm",void 0);j([I({type:gi})],Ef.prototype,"keyEncryptionAlgorithm",void 0);j([I({type:At})],Ef.prototype,"encryptedKey",void 0);class A2{constructor(e={}){this.oriType="",this.oriValue=new ArrayBuffer(0),Object.assign(this,e)}}j([I({type:te.ObjectIdentifier})],A2.prototype,"oriType",void 0);j([I({type:te.Any})],A2.prototype,"oriValue",void 0);let rl=class{constructor(e={}){Object.assign(this,e)}};j([I({type:kf,optional:!0})],rl.prototype,"ktri",void 0);j([I({type:xu,context:1,implicit:!0,optional:!0})],rl.prototype,"kari",void 0);j([I({type:Nf,context:2,implicit:!0,optional:!0})],rl.prototype,"kekri",void 0);j([I({type:Ef,context:3,implicit:!0,optional:!0})],rl.prototype,"pwri",void 0);j([I({type:A2,context:4,implicit:!0,optional:!0})],rl.prototype,"ori",void 0);rl=j([ke({type:be.Choice})],rl);var Ox;let I0=Ox=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,Ox.prototype)}};I0=Ox=j([ke({type:be.Set,itemType:rl})],I0);var Rx;class cy{constructor(e={}){this.otherRevInfoFormat="",this.otherRevInfo=new ArrayBuffer(0),Object.assign(this,e)}}j([I({type:te.ObjectIdentifier})],cy.prototype,"otherRevInfoFormat",void 0);j([I({type:te.Any})],cy.prototype,"otherRevInfo",void 0);let P0=class{constructor(e={}){this.other=new cy,Object.assign(this,e)}};j([I({type:cy,context:1,implicit:!0})],P0.prototype,"other",void 0);P0=j([ke({type:be.Choice})],P0);let z0=Rx=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,Rx.prototype)}};z0=Rx=j([ke({type:be.Set,itemType:P0})],z0);class j2{constructor(e={}){Object.assign(this,e)}}j([I({type:D0,context:0,implicit:!0,optional:!0})],j2.prototype,"certs",void 0);j([I({type:z0,context:1,implicit:!0,optional:!0})],j2.prototype,"crls",void 0);var Bx;let Mx=Bx=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,Bx.prototype)}};Mx=Bx=j([ke({type:be.Set,itemType:bu})],Mx);class Af{constructor(e={}){this.version=sa.v0,this.recipientInfos=new I0,this.encryptedContentInfo=new Sf,Object.assign(this,e)}}j([I({type:te.Integer})],Af.prototype,"version",void 0);j([I({type:j2,context:0,implicit:!0,optional:!0})],Af.prototype,"originatorInfo",void 0);j([I({type:I0})],Af.prototype,"recipientInfos",void 0);j([I({type:Sf})],Af.prototype,"encryptedContentInfo",void 0);j([I({type:Mx,context:1,implicit:!0,optional:!0})],Af.prototype,"unprotectedAttrs",void 0);const xW="1.2.840.113549.1.7.2";var Dx;let $0=Dx=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,Dx.prototype)}};$0=Dx=j([ke({type:be.Set,itemType:Wd})],$0);class wu{constructor(e={}){this.version=sa.v0,this.digestAlgorithms=new $0,this.encapContentInfo=new ay,this.signerInfos=new R0,Object.assign(this,e)}}j([I({type:te.Integer})],wu.prototype,"version",void 0);j([I({type:$0})],wu.prototype,"digestAlgorithms",void 0);j([I({type:ay})],wu.prototype,"encapContentInfo",void 0);j([I({type:D0,context:0,implicit:!0,optional:!0})],wu.prototype,"certificates",void 0);j([I({type:z0,context:1,implicit:!0,optional:!0})],wu.prototype,"crls",void 0);j([I({type:R0})],wu.prototype,"signerInfos",void 0);const Xd="1.2.840.10045.2.1",T2="1.2.840.10045.4.1",uB="1.2.840.10045.4.3.1",O2="1.2.840.10045.4.3.2",R2="1.2.840.10045.4.3.3",B2="1.2.840.10045.4.3.4",vA="1.2.840.10045.3.1.7",bA="1.3.132.0.34",_A="1.3.132.0.35";function jf(t){return new Ie({algorithm:t})}const wW=jf(T2);jf(uB);const SW=jf(O2),kW=jf(R2),CW=jf(B2);let Jd=class{constructor(e={}){Object.assign(this,e)}};j([I({type:te.ObjectIdentifier})],Jd.prototype,"fieldType",void 0);j([I({type:te.Any})],Jd.prototype,"parameters",void 0);Jd=j([ke({type:be.Sequence})],Jd);class NW extends At{}let Zc=class{constructor(e={}){Object.assign(this,e)}};j([I({type:te.OctetString})],Zc.prototype,"a",void 0);j([I({type:te.OctetString})],Zc.prototype,"b",void 0);j([I({type:te.BitString,optional:!0})],Zc.prototype,"seed",void 0);Zc=j([ke({type:be.Sequence})],Zc);var Lx;(function(t){t[t.ecpVer1=1]="ecpVer1"})(Lx||(Lx={}));let ra=class{constructor(e={}){this.version=Lx.ecpVer1,Object.assign(this,e)}};j([I({type:te.Integer})],ra.prototype,"version",void 0);j([I({type:Jd})],ra.prototype,"fieldID",void 0);j([I({type:Zc})],ra.prototype,"curve",void 0);j([I({type:NW})],ra.prototype,"base",void 0);j([I({type:te.Integer,converter:Qt})],ra.prototype,"order",void 0);j([I({type:te.Integer,optional:!0})],ra.prototype,"cofactor",void 0);ra=j([ke({type:be.Sequence})],ra);let il=class{constructor(e={}){Object.assign(this,e)}};j([I({type:te.ObjectIdentifier})],il.prototype,"namedCurve",void 0);j([I({type:te.Null})],il.prototype,"implicitCurve",void 0);j([I({type:ra})],il.prototype,"specifiedCurve",void 0);il=j([ke({type:be.Choice})],il);class uy{constructor(e={}){this.version=1,this.privateKey=new At,Object.assign(this,e)}}j([I({type:te.Integer})],uy.prototype,"version",void 0);j([I({type:At})],uy.prototype,"privateKey",void 0);j([I({type:il,context:0,optional:!0})],uy.prototype,"parameters",void 0);j([I({type:te.BitString,context:1,optional:!0})],uy.prototype,"publicKey",void 0);class H0{constructor(e={}){this.r=new ArrayBuffer(0),this.s=new ArrayBuffer(0),Object.assign(this,e)}}j([I({type:te.Integer,converter:Qt})],H0.prototype,"r",void 0);j([I({type:te.Integer,converter:Qt})],H0.prototype,"s",void 0);const qs="1.2.840.113549.1.1",io=`${qs}.1`,EW=`${qs}.7`,AW=`${qs}.9`,Bd=`${qs}.10`,jW=`${qs}.2`,TW=`${qs}.4`,U0=`${qs}.5`,OW=`${qs}.14`,Ix=`${qs}.11`,V0=`${qs}.12`,F0=`${qs}.13`,hB=`${qs}.15`,dB=`${qs}.16`,q0="1.3.14.3.2.26",fB="2.16.840.1.101.3.4.2.4",K0="2.16.840.1.101.3.4.2.1",W0="2.16.840.1.101.3.4.2.2",G0="2.16.840.1.101.3.4.2.3",RW="2.16.840.1.101.3.4.2.5",BW="2.16.840.1.101.3.4.2.6",MW="1.2.840.113549.2.2",DW="1.2.840.113549.2.5",hy=`${qs}.8`;function Pn(t){return new Ie({algorithm:t,parameters:null})}Pn(MW);Pn(DW);const ao=Pn(q0);Pn(fB);Pn(K0);Pn(W0);Pn(G0);Pn(RW);Pn(BW);const pB=new Ie({algorithm:hy,parameters:Me.serialize(ao)}),mB=new Ie({algorithm:AW,parameters:Me.serialize(S0.toASN(new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer))});Pn(io);Pn(jW);Pn(TW);Pn(U0);Pn(hB);Pn(dB);Pn(V0);Pn(F0);Pn(hB);Pn(dB);class dy{constructor(e={}){this.hashAlgorithm=new Ie(ao),this.maskGenAlgorithm=new Ie({algorithm:hy,parameters:Me.serialize(ao)}),this.pSourceAlgorithm=new Ie(mB),Object.assign(this,e)}}j([I({type:Ie,context:0,defaultValue:ao})],dy.prototype,"hashAlgorithm",void 0);j([I({type:Ie,context:1,defaultValue:pB})],dy.prototype,"maskGenAlgorithm",void 0);j([I({type:Ie,context:2,defaultValue:mB})],dy.prototype,"pSourceAlgorithm",void 0);new Ie({algorithm:EW,parameters:Me.serialize(new dy)});class lo{constructor(e={}){this.hashAlgorithm=new Ie(ao),this.maskGenAlgorithm=new Ie({algorithm:hy,parameters:Me.serialize(ao)}),this.saltLength=20,this.trailerField=1,Object.assign(this,e)}}j([I({type:Ie,context:0,defaultValue:ao})],lo.prototype,"hashAlgorithm",void 0);j([I({type:Ie,context:1,defaultValue:pB})],lo.prototype,"maskGenAlgorithm",void 0);j([I({type:te.Integer,context:2,defaultValue:20})],lo.prototype,"saltLength",void 0);j([I({type:te.Integer,context:3,defaultValue:1})],lo.prototype,"trailerField",void 0);new Ie({algorithm:Bd,parameters:Me.serialize(new lo)});class fy{constructor(e={}){this.digestAlgorithm=new Ie,this.digest=new At,Object.assign(this,e)}}j([I({type:Ie})],fy.prototype,"digestAlgorithm",void 0);j([I({type:At})],fy.prototype,"digest",void 0);var Px;class py{constructor(e={}){this.prime=new ArrayBuffer(0),this.exponent=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0),Object.assign(this,e)}}j([I({type:te.Integer,converter:Qt})],py.prototype,"prime",void 0);j([I({type:te.Integer,converter:Qt})],py.prototype,"exponent",void 0);j([I({type:te.Integer,converter:Qt})],py.prototype,"coefficient",void 0);let zx=Px=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,Px.prototype)}};zx=Px=j([ke({type:be.Sequence,itemType:py})],zx);class ki{constructor(e={}){this.version=0,this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),this.privateExponent=new ArrayBuffer(0),this.prime1=new ArrayBuffer(0),this.prime2=new ArrayBuffer(0),this.exponent1=new ArrayBuffer(0),this.exponent2=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0),Object.assign(this,e)}}j([I({type:te.Integer})],ki.prototype,"version",void 0);j([I({type:te.Integer,converter:Qt})],ki.prototype,"modulus",void 0);j([I({type:te.Integer,converter:Qt})],ki.prototype,"publicExponent",void 0);j([I({type:te.Integer,converter:Qt})],ki.prototype,"privateExponent",void 0);j([I({type:te.Integer,converter:Qt})],ki.prototype,"prime1",void 0);j([I({type:te.Integer,converter:Qt})],ki.prototype,"prime2",void 0);j([I({type:te.Integer,converter:Qt})],ki.prototype,"exponent1",void 0);j([I({type:te.Integer,converter:Qt})],ki.prototype,"exponent2",void 0);j([I({type:te.Integer,converter:Qt})],ki.prototype,"coefficient",void 0);j([I({type:zx,optional:!0})],ki.prototype,"otherPrimeInfos",void 0);class M2{constructor(e={}){this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),Object.assign(this,e)}}j([I({type:te.Integer,converter:Qt})],M2.prototype,"modulus",void 0);j([I({type:te.Integer,converter:Qt})],M2.prototype,"publicExponent",void 0);var $x;(function(t){t[t.Transient=0]="Transient",t[t.Singleton=1]="Singleton",t[t.ResolutionScoped=2]="ResolutionScoped",t[t.ContainerScoped=3]="ContainerScoped"})($x||($x={}));const Ls=$x;var Hx=function(t,e){return Hx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var r in s)s.hasOwnProperty(r)&&(n[r]=s[r])},Hx(t,e)};function D2(t,e){Hx(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function LW(t,e,n,s){function r(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function c(g){try{d(s.next(g))}catch(m){o(m)}}function h(g){try{d(s.throw(g))}catch(m){o(m)}}function d(g){g.done?a(g.value):r(g.value).then(c,h)}d((s=s.apply(t,[])).next())})}function IW(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},s,r,a,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(d){return function(g){return h([d,g])}}function h(d){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,r&&(a=d[0]&2?r.return:d[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,d[1])).done)return a;switch(r=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,r=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){n.label=d[1];break}if(d[0]===6&&n.label<a[1]){n.label=a[1],a=d;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(d);break}a[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(t,n)}catch(g){d=[6,g],r=0}finally{s=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function fm(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Y0(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),r,a=[],o;try{for(;(e===void 0||e-- >0)&&!(r=s.next()).done;)a.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return a}function Ll(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Y0(arguments[e]));return t}var PW="injectionTokens";function zW(t){var e=Reflect.getMetadata("design:paramtypes",t)||[],n=Reflect.getOwnMetadata(PW,t)||{};return Object.keys(n).forEach(function(s){e[+s]=n[s]}),e}function gB(t){return!!t.useClass}function Ux(t){return!!t.useFactory}var yB=(function(){function t(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return t.prototype.createProxy=function(e){var n=this,s={},r=!1,a,o=function(){return r||(a=e(n.wrap()),r=!0),a};return new Proxy(s,this.createHandler(o))},t.prototype.createHandler=function(e){var n={},s=function(r){n[r]=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];a[0]=e();var c=Reflect[r];return c.apply(void 0,Ll(a))}};return this.reflectMethods.forEach(s),n},t})();function fc(t){return typeof t=="string"||typeof t=="symbol"}function $W(t){return typeof t=="object"&&"token"in t&&"multiple"in t}function xA(t){return typeof t=="object"&&"token"in t&&"transform"in t}function HW(t){return typeof t=="function"||t instanceof yB}function Vm(t){return!!t.useToken}function Fm(t){return t.useValue!=null}function UW(t){return gB(t)||Fm(t)||Vm(t)||Ux(t)}var L2=(function(){function t(){this._registryMap=new Map}return t.prototype.entries=function(){return this._registryMap.entries()},t.prototype.getAll=function(e){return this.ensure(e),this._registryMap.get(e)},t.prototype.get=function(e){this.ensure(e);var n=this._registryMap.get(e);return n[n.length-1]||null},t.prototype.set=function(e,n){this.ensure(e),this._registryMap.get(e).push(n)},t.prototype.setAll=function(e,n){this._registryMap.set(e,n)},t.prototype.has=function(e){return this.ensure(e),this._registryMap.get(e).length>0},t.prototype.clear=function(){this._registryMap.clear()},t.prototype.ensure=function(e){this._registryMap.has(e)||this._registryMap.set(e,[])},t})(),VW=(function(t){D2(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(L2),pm=(function(){function t(){this.scopedResolutions=new Map}return t})();function FW(t,e){if(t===null)return"at position #"+e;var n=t.split(",")[e].trim();return'"'+n+'" at position #'+e}function qW(t,e,n){return n===void 0&&(n="    "),Ll([t],e.message.split(`
`).map(function(s){return n+s})).join(`
`)}function KW(t,e,n){var s=Y0(t.toString().match(/constructor\(([\w, ]+)\)/)||[],2),r=s[1],a=r===void 0?null:r,o=FW(a,e);return qW("Cannot inject the dependency "+o+' of "'+t.name+'" constructor. Reason:',n)}function WW(t){if(typeof t.dispose!="function")return!1;var e=t.dispose;return!(e.length>0)}var GW=(function(t){D2(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(L2),YW=(function(t){D2(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(L2),XW=(function(){function t(){this.preResolution=new GW,this.postResolution=new YW}return t})(),vB=new Map,JW=(function(){function t(e){this.parent=e,this._registry=new VW,this.interceptors=new XW,this.disposed=!1,this.disposables=new Set}return t.prototype.register=function(e,n,s){s===void 0&&(s={lifecycle:Ls.Transient}),this.ensureNotDisposed();var r;if(UW(n)?r=n:r={useClass:n},Vm(r))for(var a=[e],o=r;o!=null;){var c=o.useToken;if(a.includes(c))throw new Error("Token registration cycle detected! "+Ll(a,[c]).join(" -> "));a.push(c);var h=this._registry.get(c);h&&Vm(h.provider)?o=h.provider:o=null}if((s.lifecycle===Ls.Singleton||s.lifecycle==Ls.ContainerScoped||s.lifecycle==Ls.ResolutionScoped)&&(Fm(r)||Ux(r)))throw new Error('Cannot use lifecycle "'+Ls[s.lifecycle]+'" with ValueProviders or FactoryProviders');return this._registry.set(e,{provider:r,options:s}),this},t.prototype.registerType=function(e,n){return this.ensureNotDisposed(),fc(n)?this.register(e,{useToken:n}):this.register(e,{useClass:n})},t.prototype.registerInstance=function(e,n){return this.ensureNotDisposed(),this.register(e,{useValue:n})},t.prototype.registerSingleton=function(e,n){if(this.ensureNotDisposed(),fc(e)){if(fc(n))return this.register(e,{useToken:n},{lifecycle:Ls.Singleton});if(n)return this.register(e,{useClass:n},{lifecycle:Ls.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var s=e;return n&&!fc(n)&&(s=n),this.register(e,{useClass:s},{lifecycle:Ls.Singleton})},t.prototype.resolve=function(e,n,s){n===void 0&&(n=new pm),s===void 0&&(s=!1),this.ensureNotDisposed();var r=this.getRegistration(e);if(!r&&fc(e)){if(s)return;throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"')}if(this.executePreResolutionInterceptor(e,"Single"),r){var a=this.resolveRegistration(r,n);return this.executePostResolutionInterceptor(e,a,"Single"),a}if(HW(e)){var a=this.construct(e,n);return this.executePostResolutionInterceptor(e,a,"Single"),a}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},t.prototype.executePreResolutionInterceptor=function(e,n){var s,r;if(this.interceptors.preResolution.has(e)){var a=[];try{for(var o=fm(this.interceptors.preResolution.getAll(e)),c=o.next();!c.done;c=o.next()){var h=c.value;h.options.frequency!="Once"&&a.push(h),h.callback(e,n)}}catch(d){s={error:d}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(s)throw s.error}}this.interceptors.preResolution.setAll(e,a)}},t.prototype.executePostResolutionInterceptor=function(e,n,s){var r,a;if(this.interceptors.postResolution.has(e)){var o=[];try{for(var c=fm(this.interceptors.postResolution.getAll(e)),h=c.next();!h.done;h=c.next()){var d=h.value;d.options.frequency!="Once"&&o.push(d),d.callback(e,n,s)}}catch(g){r={error:g}}finally{try{h&&!h.done&&(a=c.return)&&a.call(c)}finally{if(r)throw r.error}}this.interceptors.postResolution.setAll(e,o)}},t.prototype.resolveRegistration=function(e,n){if(this.ensureNotDisposed(),e.options.lifecycle===Ls.ResolutionScoped&&n.scopedResolutions.has(e))return n.scopedResolutions.get(e);var s=e.options.lifecycle===Ls.Singleton,r=e.options.lifecycle===Ls.ContainerScoped,a=s||r,o;return Fm(e.provider)?o=e.provider.useValue:Vm(e.provider)?o=a?e.instance||(e.instance=this.resolve(e.provider.useToken,n)):this.resolve(e.provider.useToken,n):gB(e.provider)?o=a?e.instance||(e.instance=this.construct(e.provider.useClass,n)):this.construct(e.provider.useClass,n):Ux(e.provider)?o=e.provider.useFactory(this):o=this.construct(e.provider,n),e.options.lifecycle===Ls.ResolutionScoped&&n.scopedResolutions.set(e,o),o},t.prototype.resolveAll=function(e,n,s){var r=this;n===void 0&&(n=new pm),s===void 0&&(s=!1),this.ensureNotDisposed();var a=this.getAllRegistrations(e);if(!a&&fc(e)){if(s)return[];throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"')}if(this.executePreResolutionInterceptor(e,"All"),a){var o=a.map(function(h){return r.resolveRegistration(h,n)});return this.executePostResolutionInterceptor(e,o,"All"),o}var c=[this.construct(e,n)];return this.executePostResolutionInterceptor(e,c,"All"),c},t.prototype.isRegistered=function(e,n){return n===void 0&&(n=!1),this.ensureNotDisposed(),this._registry.has(e)||n&&(this.parent||!1)&&this.parent.isRegistered(e,!0)},t.prototype.reset=function(){this.ensureNotDisposed(),this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},t.prototype.clearInstances=function(){var e,n;this.ensureNotDisposed();try{for(var s=fm(this._registry.entries()),r=s.next();!r.done;r=s.next()){var a=Y0(r.value,2),o=a[0],c=a[1];this._registry.setAll(o,c.filter(function(h){return!Fm(h.provider)}).map(function(h){return h.instance=void 0,h}))}}catch(h){e={error:h}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}},t.prototype.createChildContainer=function(){var e,n;this.ensureNotDisposed();var s=new t(this);try{for(var r=fm(this._registry.entries()),a=r.next();!a.done;a=r.next()){var o=Y0(a.value,2),c=o[0],h=o[1];h.some(function(d){var g=d.options;return g.lifecycle===Ls.ContainerScoped})&&s._registry.setAll(c,h.map(function(d){return d.options.lifecycle===Ls.ContainerScoped?{provider:d.provider,options:d.options}:d}))}}catch(d){e={error:d}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return s},t.prototype.beforeResolution=function(e,n,s){s===void 0&&(s={frequency:"Always"}),this.interceptors.preResolution.set(e,{callback:n,options:s})},t.prototype.afterResolution=function(e,n,s){s===void 0&&(s={frequency:"Always"}),this.interceptors.postResolution.set(e,{callback:n,options:s})},t.prototype.dispose=function(){return LW(this,void 0,void 0,function(){var e;return IW(this,function(n){switch(n.label){case 0:return this.disposed=!0,e=[],this.disposables.forEach(function(s){var r=s.dispose();r&&e.push(r)}),[4,Promise.all(e)];case 1:return n.sent(),[2]}})})},t.prototype.getRegistration=function(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null},t.prototype.getAllRegistrations=function(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null},t.prototype.construct=function(e,n){var s=this;if(e instanceof yB)return e.createProxy(function(a){return s.resolve(a,n)});var r=(function(){var a=vB.get(e);if(!a||a.length===0){if(e.length===0)return new e;throw new Error('TypeInfo not known for "'+e.name+'"')}var o=a.map(s.resolveParams(n,e));return new(e.bind.apply(e,Ll([void 0],o)))})();return WW(r)&&this.disposables.add(r),r},t.prototype.resolveParams=function(e,n){var s=this;return function(r,a){var o,c,h;try{return $W(r)?xA(r)?r.multiple?(o=s.resolve(r.transform)).transform.apply(o,Ll([s.resolveAll(r.token,new pm,r.isOptional)],r.transformArgs)):(c=s.resolve(r.transform)).transform.apply(c,Ll([s.resolve(r.token,e,r.isOptional)],r.transformArgs)):r.multiple?s.resolveAll(r.token,new pm,r.isOptional):s.resolve(r.token,e,r.isOptional):xA(r)?(h=s.resolve(r.transform,e)).transform.apply(h,Ll([s.resolve(r.token,e)],r.transformArgs)):s.resolve(r,e)}catch(d){throw new Error(KW(n,a,d))}}},t.prototype.ensureNotDisposed=function(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")},t})(),Ss=new JW;function my(t){return function(e){vB.set(e,zW(e))}}if(typeof Reflect>"u"||!Reflect.getMetadata)throw new Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`);var Vx;class gy{constructor(e={}){this.attrId="",this.attrValues=[],Object.assign(e)}}j([I({type:te.ObjectIdentifier})],gy.prototype,"attrId",void 0);j([I({type:te.Any,repeated:"set"})],gy.prototype,"attrValues",void 0);let wA=Vx=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,Vx.prototype)}};wA=Vx=j([ke({type:be.Sequence,itemType:gy})],wA);var Fx;let SA=Fx=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,Fx.prototype)}};SA=Fx=j([ke({type:be.Sequence,itemType:_u})],SA);class bB{constructor(e={}){this.certId="",this.certValue=new ArrayBuffer(0),Object.assign(this,e)}}j([I({type:te.ObjectIdentifier})],bB.prototype,"certId",void 0);j([I({type:te.Any,context:0})],bB.prototype,"certValue",void 0);class _B{constructor(e={}){this.crlId="",this.crltValue=new ArrayBuffer(0),Object.assign(this,e)}}j([I({type:te.ObjectIdentifier})],_B.prototype,"crlId",void 0);j([I({type:te.Any,context:0})],_B.prototype,"crltValue",void 0);class xB extends At{}let yy=class{constructor(e={}){this.encryptionAlgorithm=new Ie,this.encryptedData=new xB,Object.assign(this,e)}};j([I({type:Ie})],yy.prototype,"encryptionAlgorithm",void 0);j([I({type:xB})],yy.prototype,"encryptedData",void 0);var qx,Kx;(function(t){t[t.v1=0]="v1"})(Kx||(Kx={}));class wB extends At{}let Wx=qx=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,qx.prototype)}};Wx=qx=j([ke({type:be.Sequence,itemType:na})],Wx);class Tf{constructor(e={}){this.version=Kx.v1,this.privateKeyAlgorithm=new Ie,this.privateKey=new wB,Object.assign(this,e)}}j([I({type:te.Integer})],Tf.prototype,"version",void 0);j([I({type:Ie})],Tf.prototype,"privateKeyAlgorithm",void 0);j([I({type:wB})],Tf.prototype,"privateKey",void 0);j([I({type:Wx,implicit:!0,context:0,optional:!0})],Tf.prototype,"attributes",void 0);let kA=class extends Tf{};kA=j([ke({type:be.Sequence})],kA);let CA=class extends yy{};CA=j([ke({type:be.Sequence})],CA);class SB{constructor(e={}){this.secretTypeId="",this.secretValue=new ArrayBuffer(0),Object.assign(this,e)}}j([I({type:te.ObjectIdentifier})],SB.prototype,"secretTypeId",void 0);j([I({type:te.Any,context:0})],SB.prototype,"secretValue",void 0);class Of{constructor(e={}){this.mac=new fy,this.macSalt=new At,this.iterations=1,Object.assign(this,e)}}j([I({type:fy})],Of.prototype,"mac",void 0);j([I({type:At})],Of.prototype,"macSalt",void 0);j([I({type:te.Integer,defaultValue:1})],Of.prototype,"iterations",void 0);class vy{constructor(e={}){this.version=3,this.authSafe=new _u,this.macData=new Of,Object.assign(this,e)}}j([I({type:te.Integer})],vy.prototype,"version",void 0);j([I({type:_u})],vy.prototype,"authSafe",void 0);j([I({type:Of,optional:!0})],vy.prototype,"macData",void 0);var Gx;class by{constructor(e={}){this.bagId="",this.bagValue=new ArrayBuffer(0),Object.assign(this,e)}}j([I({type:te.ObjectIdentifier})],by.prototype,"bagId",void 0);j([I({type:te.Any,context:0})],by.prototype,"bagValue",void 0);j([I({type:gy,repeated:"set",optional:!0})],by.prototype,"bagAttributes",void 0);let NA=Gx=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,Gx.prototype)}};NA=Gx=j([ke({type:be.Sequence,itemType:by})],NA);var Yx,Xx,Jx;const kB="1.2.840.113549.1.9",CB=`${kB}.7`,I2=`${kB}.14`;let X0=class extends as{constructor(e={}){super(e)}toString(){return this.ia5String||super.toString()}};j([I({type:te.IA5String})],X0.prototype,"ia5String",void 0);X0=j([ke({type:be.Choice})],X0);let EA=class extends _u{};EA=j([ke({type:be.Sequence})],EA);let AA=class extends vy{};AA=j([ke({type:be.Sequence})],AA);let jA=class extends yy{};jA=j([ke({type:be.Sequence})],jA);let Qx=class{constructor(e=""){this.value=e}toString(){return this.value}};j([I({type:te.IA5String})],Qx.prototype,"value",void 0);Qx=j([ke({type:be.Choice})],Qx);let TA=class extends X0{};TA=j([ke({type:be.Choice})],TA);let OA=class extends as{};OA=j([ke({type:be.Choice})],OA);let Zx=class{constructor(e=new Date){this.value=e}};j([I({type:te.GeneralizedTime})],Zx.prototype,"value",void 0);Zx=j([ke({type:be.Choice})],Zx);let RA=class extends as{};RA=j([ke({type:be.Choice})],RA);let ew=class{constructor(e="M"){this.value=e}toString(){return this.value}};j([I({type:te.PrintableString})],ew.prototype,"value",void 0);ew=j([ke({type:be.Choice})],ew);let J0=class{constructor(e=""){this.value=e}toString(){return this.value}};j([I({type:te.PrintableString})],J0.prototype,"value",void 0);J0=j([ke({type:be.Choice})],J0);let BA=class extends J0{};BA=j([ke({type:be.Choice})],BA);let MA=class extends as{};MA=j([ke({type:be.Choice})],MA);let tw=class{constructor(e=""){this.value=e}toString(){return this.value}};j([I({type:te.ObjectIdentifier})],tw.prototype,"value",void 0);tw=j([ke({type:be.Choice})],tw);let DA=class extends ss{};DA=j([ke({type:be.Choice})],DA);let nw=class{constructor(e=0){this.value=e}toString(){return this.value.toString()}};j([I({type:te.Integer})],nw.prototype,"value",void 0);nw=j([ke({type:be.Choice})],nw);let LA=class extends Si{};LA=j([ke({type:be.Sequence})],LA);let Q0=class extends as{};Q0=j([ke({type:be.Choice})],Q0);let IA=Yx=class extends so{constructor(e){super(e),Object.setPrototypeOf(this,Yx.prototype)}};IA=Yx=j([ke({type:be.Sequence})],IA);let PA=Xx=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,Xx.prototype)}};PA=Xx=j([ke({type:be.Set,itemType:bu})],PA);let sw=class{constructor(e=""){this.value=e}toString(){return this.value}};j([I({type:te.BmpString})],sw.prototype,"value",void 0);sw=j([ke({type:be.Choice})],sw);let rw=class extends Ie{};rw=j([ke({type:be.Sequence})],rw);let zA=Jx=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,Jx.prototype)}};zA=Jx=j([ke({type:be.Sequence,itemType:rw})],zA);var iw;let Z0=iw=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,iw.prototype)}};Z0=iw=j([ke({type:be.Sequence,itemType:na})],Z0);class Su{constructor(e={}){this.version=0,this.subject=new Dn,this.subjectPKInfo=new ui,this.attributes=new Z0,Object.assign(this,e)}}j([I({type:te.Integer})],Su.prototype,"version",void 0);j([I({type:Dn})],Su.prototype,"subject",void 0);j([I({type:ui})],Su.prototype,"subjectPKInfo",void 0);j([I({type:Z0,implicit:!0,context:0,optional:!0})],Su.prototype,"attributes",void 0);class Qd{constructor(e={}){this.certificationRequestInfo=new Su,this.signatureAlgorithm=new Ie,this.signature=new ArrayBuffer(0),Object.assign(this,e)}}j([I({type:Su,raw:!0})],Qd.prototype,"certificationRequestInfo",void 0);j([I({type:Ie})],Qd.prototype,"signatureAlgorithm",void 0);j([I({type:te.BitString})],Qd.prototype,"signature",void 0);const Rf="crypto.algorithm";class QW{getAlgorithms(){return Ss.resolveAll(Rf)}toAsnAlgorithm(e){({...e});for(const n of this.getAlgorithms()){const s=n.toAsnAlgorithm(e);if(s)return s}if(/^[0-9.]+$/.test(e.name)){const n=new Ie({algorithm:e.name});if("parameters"in e){const s=e;n.parameters=s.parameters}return n}throw new Error("Cannot convert WebCrypto algorithm to ASN.1 algorithm")}toWebAlgorithm(e){for(const s of this.getAlgorithms()){const r=s.toWebAlgorithm(e);if(r)return r}return{name:e.algorithm,parameters:e.parameters}}}const eu="crypto.algorithmProvider";Ss.registerSingleton(eu,QW);var qm;const Ks="1.3.36.3.3.2.8.1.1",$A=`${Ks}.1`,HA=`${Ks}.2`,UA=`${Ks}.3`,VA=`${Ks}.4`,FA=`${Ks}.5`,qA=`${Ks}.6`,KA=`${Ks}.7`,WA=`${Ks}.8`,GA=`${Ks}.9`,YA=`${Ks}.10`,XA=`${Ks}.11`,JA=`${Ks}.12`,QA=`${Ks}.13`,ZA=`${Ks}.14`,e3="brainpoolP160r1",t3="brainpoolP160t1",n3="brainpoolP192r1",s3="brainpoolP192t1",r3="brainpoolP224r1",i3="brainpoolP224t1",a3="brainpoolP256r1",l3="brainpoolP256t1",o3="brainpoolP320r1",c3="brainpoolP320t1",u3="brainpoolP384r1",h3="brainpoolP384t1",d3="brainpoolP512r1",f3="brainpoolP512t1",rn="ECDSA";let Zd=qm=class{toAsnAlgorithm(e){switch(e.name.toLowerCase()){case rn.toLowerCase():if("hash"in e)switch((typeof e.hash=="string"?e.hash:e.hash.name).toLowerCase()){case"sha-1":return wW;case"sha-256":return SW;case"sha-384":return kW;case"sha-512":return CW}else if("namedCurve"in e){let n="";switch(e.namedCurve){case"P-256":n=vA;break;case"K-256":n=qm.SECP256K1;break;case"P-384":n=bA;break;case"P-521":n=_A;break;case e3:n=$A;break;case t3:n=HA;break;case n3:n=UA;break;case s3:n=VA;break;case r3:n=FA;break;case i3:n=qA;break;case a3:n=KA;break;case l3:n=WA;break;case o3:n=GA;break;case c3:n=YA;break;case u3:n=XA;break;case h3:n=JA;break;case d3:n=QA;break;case f3:n=ZA;break}if(n)return new Ie({algorithm:Xd,parameters:Me.serialize(new il({namedCurve:n}))})}}return null}toWebAlgorithm(e){switch(e.algorithm){case T2:return{name:rn,hash:{name:"SHA-1"}};case O2:return{name:rn,hash:{name:"SHA-256"}};case R2:return{name:rn,hash:{name:"SHA-384"}};case B2:return{name:rn,hash:{name:"SHA-512"}};case Xd:{if(!e.parameters)throw new TypeError("Cannot get required parameters from EC algorithm");switch(Me.parse(e.parameters,il).namedCurve){case vA:return{name:rn,namedCurve:"P-256"};case qm.SECP256K1:return{name:rn,namedCurve:"K-256"};case bA:return{name:rn,namedCurve:"P-384"};case _A:return{name:rn,namedCurve:"P-521"};case $A:return{name:rn,namedCurve:e3};case HA:return{name:rn,namedCurve:t3};case UA:return{name:rn,namedCurve:n3};case VA:return{name:rn,namedCurve:s3};case FA:return{name:rn,namedCurve:r3};case qA:return{name:rn,namedCurve:i3};case KA:return{name:rn,namedCurve:a3};case WA:return{name:rn,namedCurve:l3};case GA:return{name:rn,namedCurve:o3};case YA:return{name:rn,namedCurve:c3};case XA:return{name:rn,namedCurve:u3};case JA:return{name:rn,namedCurve:h3};case QA:return{name:rn,namedCurve:d3};case ZA:return{name:rn,namedCurve:f3}}}}return null}};Zd.SECP256K1="1.3.132.0.10";Zd=qm=j([my()],Zd);Ss.registerSingleton(Rf,Zd);const NB=Symbol("name"),EB=Symbol("value");class Ot{constructor(e,n={},s=""){this[NB]=e,this[EB]=s;for(const r in n)this[r]=n[r]}}Ot.NAME=NB;Ot.VALUE=EB;class ZW{static toTextObject(e){const n=new Ot("Algorithm Identifier",{},cl.toString(e.algorithm));if(e.parameters)if(e.algorithm===Xd){const s=new Zd().toWebAlgorithm(e);s&&"namedCurve"in s?n["Named Curve"]=s.namedCurve:n.Parameters=e.parameters}else n.Parameters=e.parameters;return n}}class cl{static toString(e){const n=this.items[e];return n||e}}cl.items={[q0]:"sha1",[fB]:"sha224",[K0]:"sha256",[W0]:"sha384",[G0]:"sha512",[io]:"rsaEncryption",[U0]:"sha1WithRSAEncryption",[OW]:"sha224WithRSAEncryption",[Ix]:"sha256WithRSAEncryption",[V0]:"sha384WithRSAEncryption",[F0]:"sha512WithRSAEncryption",[Xd]:"ecPublicKey",[T2]:"ecdsaWithSHA1",[uB]:"ecdsaWithSHA224",[O2]:"ecdsaWithSHA256",[R2]:"ecdsaWithSHA384",[B2]:"ecdsaWithSHA512",[mW]:"TLS WWW server authentication",[gW]:"TLS WWW client authentication",[yW]:"Code Signing",[vW]:"E-mail Protection",[bW]:"Time Stamping",[_W]:"OCSP Signing",[xW]:"Signed Data"};class oo{static serialize(e){return this.serializeObj(e).join(`
`)}static pad(e=0){return"".padStart(2*e," ")}static serializeObj(e,n=0){const s=[];let r=this.pad(n++),a="";const o=e[Ot.VALUE];o&&(a=` ${o}`),s.push(`${r}${e[Ot.NAME]}:${a}`),r=this.pad(n);for(const c in e){if(typeof c=="symbol")continue;const h=e[c],d=c?`${c}: `:"";if(typeof h=="string"||typeof h=="number"||typeof h=="boolean")s.push(`${r}${d}${h}`);else if(h instanceof Date)s.push(`${r}${d}${h.toUTCString()}`);else if(Array.isArray(h))for(const g of h)g[Ot.NAME]=c,s.push(...this.serializeObj(g,n));else if(h instanceof Ot)h[Ot.NAME]=c,s.push(...this.serializeObj(h,n));else if(Re.isBufferSource(h))c?(s.push(`${r}${d}`),s.push(...this.serializeBufferSource(h,n+1))):s.push(...this.serializeBufferSource(h,n));else if("toTextObject"in h){const g=h.toTextObject();g[Ot.NAME]=c,s.push(...this.serializeObj(g,n))}else throw new TypeError("Cannot serialize data in text format. Unsupported type.")}return s}static serializeBufferSource(e,n=0){const s=this.pad(n),r=Re.toUint8Array(e),a=[];for(let o=0;o<r.length;){const c=[];for(let h=0;h<16&&o<r.length;h++){h===8&&c.push("");const d=r[o++].toString(16).padStart(2,"0");c.push(d)}a.push(`${s}${c.join(" ")}`)}return a}static serializeAlgorithm(e){return this.algorithmSerializer.toTextObject(e)}}oo.oidSerializer=cl;oo.algorithmSerializer=ZW;var Sc;class ul{get rawData(){return ut(this,Sc,"f")||tn(this,Sc,Me.serialize(this.asn),"f"),ut(this,Sc,"f")}constructor(...e){Sc.set(this,void 0),Re.isBufferSource(e[0])?(this.asn=Me.parse(e[0],e[1]),tn(this,Sc,Re.toArrayBuffer(e[0]),"f"),this.onInit(this.asn)):(this.asn=e[0],this.onInit(this.asn))}equal(e){return e instanceof ul?YO(e.rawData,this.rawData):!1}toString(e="text"){switch(e){case"asn":return Me.toString(this.rawData);case"text":return oo.serialize(this.toTextObject());case"hex":return Fe.ToHex(this.rawData);case"base64":return Fe.ToBase64(this.rawData);case"base64url":return Fe.ToBase64Url(this.rawData);default:throw TypeError("Argument 'format' is unsupported value")}}getTextName(){return this.constructor.NAME}toTextObject(){const e=this.toTextObjectEmpty();return e[""]=this.rawData,e}toTextObjectEmpty(e){return new Ot(this.getTextName(),{},e)}}Sc=new WeakMap;ul.NAME="ASN";class fr extends ul{constructor(...e){let n;Re.isBufferSource(e[0])?n=Re.toArrayBuffer(e[0]):n=Me.serialize(new Yr({extnID:e[0],critical:e[1],extnValue:new At(Re.toArrayBuffer(e[2]))})),super(n,Yr)}onInit(e){this.type=e.extnID,this.critical=e.critical,this.value=e.extnValue.buffer}toTextObject(){const e=this.toTextObjectWithoutValue();return e[""]=this.value,e}toTextObjectWithoutValue(){const e=this.toTextObjectEmpty(this.critical?"critical":void 0);return e[Ot.NAME]===fr.NAME&&(e[Ot.NAME]=cl.toString(this.type)),e}}var AB;class Ya{static isCryptoKeyPair(e){return e&&e.privateKey&&e.publicKey}static isCryptoKey(e){return e&&e.usages&&e.type&&e.algorithm&&e.extractable!==void 0}constructor(){this.items=new Map,this[AB]="CryptoProvider",typeof self<"u"&&typeof crypto<"u"?this.set(Ya.DEFAULT,crypto):typeof global<"u"&&global.crypto&&global.crypto.subtle&&this.set(Ya.DEFAULT,global.crypto)}clear(){this.items.clear()}delete(e){return this.items.delete(e)}forEach(e,n){return this.items.forEach(e,n)}has(e){return this.items.has(e)}get size(){return this.items.size}entries(){return this.items.entries()}keys(){return this.items.keys()}values(){return this.items.values()}[Symbol.iterator](){return this.items[Symbol.iterator]()}get(e=Ya.DEFAULT){const n=this.items.get(e.toLowerCase());if(!n)throw new Error(`Cannot get Crypto by name '${e}'`);return n}set(e,n){if(typeof e=="string"){if(!n)throw new TypeError("Argument 'value' is required");this.items.set(e.toLowerCase(),n)}else this.items.set(Ya.DEFAULT,e);return this}}AB=Symbol.toStringTag;Ya.DEFAULT="default";const bs=new Ya,eG=/^[0-2](?:\.[1-9][0-9]*)+$/;function tG(t){return new RegExp(eG).test(t)}class jB{constructor(e={}){this.items={};for(const n in e)this.register(n,e[n])}get(e){return this.items[e]||null}findId(e){return tG(e)?e:this.get(e)}register(e,n){this.items[e]=n,this.items[n]=e}}const Vs=new jB;Vs.register("CN","2.5.4.3");Vs.register("L","2.5.4.7");Vs.register("ST","2.5.4.8");Vs.register("O","2.5.4.10");Vs.register("OU","2.5.4.11");Vs.register("C","2.5.4.6");Vs.register("DC","0.9.2342.19200300.100.1.25");Vs.register("E","1.2.840.113549.1.9.1");Vs.register("G","2.5.4.42");Vs.register("I","2.5.4.43");Vs.register("SN","2.5.4.4");Vs.register("T","2.5.4.12");function nG(t,e){return`\\${Fe.ToHex(Fe.FromUtf8String(e)).toUpperCase()}`}function sG(t){return t.replace(/([,+"\\<>;])/g,"\\$1").replace(/^([ #])/,"\\$1").replace(/([ ]$)/,"\\$1").replace(/([\r\n\t])/,nG)}class co{static isASCII(e){for(let n=0;n<e.length;n++)if(e.charCodeAt(n)>255)return!1;return!0}static isPrintableString(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/g.test(e)}constructor(e,n={}){this.extraNames=new jB,this.asn=new Dn;for(const s in n)if(Object.prototype.hasOwnProperty.call(n,s)){const r=n[s];this.extraNames.register(s,r)}typeof e=="string"?this.asn=this.fromString(e):e instanceof Dn?this.asn=e:Re.isBufferSource(e)?this.asn=Me.parse(e,Dn):this.asn=this.fromJSON(e)}getField(e){const n=this.extraNames.findId(e)||Vs.findId(e),s=[];for(const r of this.asn)for(const a of r)a.type===n&&s.push(a.value.toString());return s}getName(e){return this.extraNames.get(e)||Vs.get(e)}toString(){return this.asn.map(e=>e.map(n=>{const s=this.getName(n.type)||n.type,r=n.value.anyValue?`#${Fe.ToHex(n.value.anyValue)}`:sG(n.value.toString());return`${s}=${r}`}).join("+")).join(", ")}toJSON(){var e;const n=[];for(const s of this.asn){const r={};for(const a of s){const o=this.getName(a.type)||a.type;(e=r[o])!==null&&e!==void 0||(r[o]=[]),r[o].push(a.value.anyValue?`#${Fe.ToHex(a.value.anyValue)}`:a.value.toString())}n.push(r)}return n}fromString(e){const n=new Dn,s=/(\d\.[\d.]*\d|[A-Za-z]+)=((?:"")|(?:".*?[^\\]")|(?:[^,+"\\](?=[,+]|$))|(?:[^,+].*?(?:[^\\][,+]))|(?:))([,+])?/g;let r=null,a=",";for(;r=s.exec(`${e},`);){let[,o,c]=r;const h=c[c.length-1];(h===","||h==="+")&&(c=c.slice(0,c.length-1),r[3]=h);const d=r[3];o=this.getTypeOid(o);const g=this.createAttribute(o,c);a==="+"?n[n.length-1].push(g):n.push(new Fc([g])),a=d}return n}fromJSON(e){const n=new Dn;for(const s of e){const r=new Fc;for(const a in s){const o=this.getTypeOid(a),c=s[a];for(const h of c){const d=this.createAttribute(o,h);r.push(d)}}n.push(r)}return n}getTypeOid(e){if(/[\d.]+/.test(e)||(e=this.getName(e)||""),!e)throw new Error(`Cannot get OID for name type '${e}'`);return e}createAttribute(e,n){const s=new Gg({type:e});if(typeof n=="object")for(const r in n)switch(r){case"ia5String":s.value.ia5String=n[r];break;case"utf8String":s.value.utf8String=n[r];break;case"universalString":s.value.universalString=n[r];break;case"bmpString":s.value.bmpString=n[r];break;case"printableString":s.value.printableString=n[r];break}else if(n[0]==="#")s.value.anyValue=Fe.FromHex(n.slice(1));else{const r=this.processStringValue(n);e===this.getName("E")||e===this.getName("DC")?s.value.ia5String=r:co.isPrintableString(r)?s.value.printableString=r:s.value.utf8String=r}return s}processStringValue(e){const n=/"(.*?[^\\])?"/.exec(e);return n&&(e=n[1]),e.replace(/\\0a/ig,`
`).replace(/\\0d/ig,"\r").replace(/\\0g/ig,"	").replace(/\\(.)/g,"$1")}toArrayBuffer(){return Me.serialize(this.asn)}async getThumbprint(...e){var n;let s,r="SHA-1";return e.length>=1&&!(!((n=e[0])===null||n===void 0)&&n.subtle)?(r=e[0]||r,s=e[1]||bs.get()):s=e[0]||bs.get(),await s.subtle.digest(r,this.toArrayBuffer())}}const TB="Cannot initialize GeneralName from ASN.1 data.",p3=`${TB} Unsupported string format in use.`,rG=`${TB} Value doesn't match to GUID regular expression.`,m3=/^([0-9a-f]{8})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{12})$/i,g3="1.3.6.1.4.1.311.25.1",y3="1.3.6.1.4.1.311.20.2.3",Bb="dns",Mb="dn",Db="email",Lb="ip",Ib="url",Pb="guid",zb="upn",mm="id";class Xa extends ul{constructor(...e){let n;if(e.length===2)switch(e[0]){case Mb:{const s=new co(e[1]).toArrayBuffer(),r=Me.parse(s,Dn);n=new lt({directoryName:r});break}case Bb:n=new lt({dNSName:e[1]});break;case Db:n=new lt({rfc822Name:e[1]});break;case Pb:{const s=new RegExp(m3,"i").exec(e[1]);if(!s)throw new Error("Cannot parse GUID value. Value doesn't match to regular expression");const r=s.slice(1).map((a,o)=>o<3?Fe.ToHex(new Uint8Array(Fe.FromHex(a)).reverse()):a).join("");n=new lt({otherName:new Kd({typeId:g3,value:Me.serialize(new At(Fe.FromHex(r)))})});break}case Lb:n=new lt({iPAddress:e[1]});break;case mm:n=new lt({registeredID:e[1]});break;case zb:{n=new lt({otherName:new Kd({typeId:y3,value:Me.serialize(KR.toASN(e[1]))})});break}case Ib:n=new lt({uniformResourceIdentifier:e[1]});break;default:throw new Error("Cannot create GeneralName. Unsupported type of the name")}else Re.isBufferSource(e[0])?n=Me.parse(e[0],lt):n=e[0];super(n)}onInit(e){if(e.dNSName!=null)this.type=Bb,this.value=e.dNSName;else if(e.rfc822Name!=null)this.type=Db,this.value=e.rfc822Name;else if(e.iPAddress!=null)this.type=Lb,this.value=e.iPAddress;else if(e.uniformResourceIdentifier!=null)this.type=Ib,this.value=e.uniformResourceIdentifier;else if(e.registeredID!=null)this.type=mm,this.value=e.registeredID;else if(e.directoryName!=null)this.type=Mb,this.value=new co(e.directoryName).toString();else if(e.otherName!=null)if(e.otherName.typeId===g3){this.type=Pb;const n=Me.parse(e.otherName.value,At),s=new RegExp(m3,"i").exec(Fe.ToHex(n));if(!s)throw new Error(rG);this.value=s.slice(1).map((r,a)=>a<3?Fe.ToHex(new Uint8Array(Fe.FromHex(r)).reverse()):r).join("-")}else if(e.otherName.typeId===y3)this.type=zb,this.value=Me.parse(e.otherName.value,as).toString();else throw new Error(p3);else throw new Error(p3)}toJSON(){return{type:this.type,value:this.value}}toTextObject(){let e;switch(this.type){case Mb:case Bb:case Pb:case Lb:case mm:case zb:case Ib:e=this.type.toUpperCase();break;case Db:e="Email";break;default:throw new Error("Unsupported GeneralName type")}let n=this.value;return this.type===mm&&(n=cl.toString(n)),new Ot(e,void 0,n)}}class uo extends ul{constructor(e){let n;if(e instanceof fs)n=e;else if(Array.isArray(e)){const s=[];for(const r of e)if(r instanceof lt)s.push(r);else{const a=Me.parse(new Xa(r.type,r.value).rawData,lt);s.push(a)}n=new fs(s)}else if(Re.isBufferSource(e))n=Me.parse(e,fs);else throw new Error("Cannot initialize GeneralNames. Incorrect incoming arguments");super(n)}onInit(e){const n=[];for(const s of e){let r=null;try{r=new Xa(s)}catch{continue}n.push(r)}this.items=n}toJSON(){return this.items.map(e=>e.toJSON())}toTextObject(){const e=super.toTextObjectEmpty();for(const n of this.items){const s=n.toTextObject();let r=e[s[Ot.NAME]];Array.isArray(r)||(r=[],e[s[Ot.NAME]]=r),r.push(s)}return e}}uo.NAME="GeneralNames";const Md="-{5}",ef="\\n",iG=`[^${ef}]+`,aG=`${Md}BEGIN (${iG}(?=${Md}))${Md}`,lG=`${Md}END \\1${Md}`,tu="\\n",oG=`[^:${ef}]+`,cG=`(?:[^${ef}]+${tu}(?: +[^${ef}]+${tu})*)`,uG="[a-zA-Z0-9=+/]+",hG=`(?:${uG}${tu})+`,v3=`${aG}${tu}(?:((?:${oG}: ${cG})+))?${tu}?(${hG})${lG}`;class cr{static isPem(e){return typeof e=="string"&&new RegExp(v3,"g").test(e.replace(/\r/g,""))}static decodeWithHeaders(e){e=e.replace(/\r/g,"");const n=new RegExp(v3,"g"),s=[];let r=null;for(;r=n.exec(e);){const a=r[3].replace(new RegExp(`[${ef}]+`,"g"),""),o={type:r[1],headers:[],rawData:Fe.FromBase64(a)},c=r[2];if(c){const h=c.split(new RegExp(tu,"g"));let d=null;for(const g of h){const[m,v]=g.split(/:(.*)/);if(v===void 0){if(!d)throw new Error("Cannot parse PEM string. Incorrect header value");d.value+=m.trim()}else d&&o.headers.push(d),d={key:m,value:v.trim()}}d&&o.headers.push(d)}s.push(o)}return s}static decode(e){return this.decodeWithHeaders(e).map(s=>s.rawData)}static decodeFirst(e){const n=this.decode(e);if(!n.length)throw new RangeError("PEM string doesn't contain any objects");return n[0]}static encode(e,n){if(Array.isArray(e)){const s=new Array;return n?e.forEach(r=>{if(!Re.isBufferSource(r))throw new TypeError("Cannot encode array of BufferSource in PEM format. Not all items of the array are BufferSource");s.push(this.encodeStruct({type:n,rawData:Re.toArrayBuffer(r)}))}):e.forEach(r=>{if(!("type"in r))throw new TypeError("Cannot encode array of PemStruct in PEM format. Not all items of the array are PemStrut");s.push(this.encodeStruct(r))}),s.join(`
`)}else{if(!n)throw new Error("Required argument 'tag' is missed");return this.encodeStruct({type:n,rawData:Re.toArrayBuffer(e)})}}static encodeStruct(e){var n;const s=e.type.toLocaleUpperCase(),r=[];if(r.push(`-----BEGIN ${s}-----`),!((n=e.headers)===null||n===void 0)&&n.length){for(const d of e.headers)r.push(`${d.key}: ${d.value}`);r.push("")}const a=Fe.ToBase64(e.rawData);let o,c=0;const h=Array();for(;c<a.length&&(a.length-c<64?o=a.substring(c):(o=a.substring(c,c+64),c+=64),o.length!==0);)if(h.push(o),o.length<64)break;return r.push(...h),r.push(`-----END ${s}-----`),r.join(`
`)}}cr.CertificateTag="CERTIFICATE";cr.CrlTag="CRL";cr.CertificateRequestTag="CERTIFICATE REQUEST";cr.PublicKeyTag="PUBLIC KEY";cr.PrivateKeyTag="PRIVATE KEY";class ia extends ul{static isAsnEncoded(e){return Re.isBufferSource(e)||typeof e=="string"}static toArrayBuffer(e){if(typeof e=="string"){if(cr.isPem(e))return cr.decode(e)[0];if(Fe.isHex(e))return Fe.FromHex(e);if(Fe.isBase64(e))return Fe.FromBase64(e);if(Fe.isBase64Url(e))return Fe.FromBase64Url(e);throw new TypeError("Unsupported format of 'raw' argument. Must be one of DER, PEM, HEX, Base64, or Base4Url")}else{const n=Re.toUint8Array(e);if(n.length>0&&n[0]===48)return Re.toArrayBuffer(e);const s=Fe.ToBinary(e);if(cr.isPem(s))return cr.decode(s)[0];if(Fe.isHex(s))return Fe.FromHex(s);if(Fe.isBase64(s))return Fe.FromBase64(s);if(Fe.isBase64Url(s))return Fe.FromBase64Url(s);throw new TypeError("Unsupported format of 'raw' argument. Must be one of DER, PEM, HEX, Base64, or Base4Url")}}constructor(...e){ia.isAsnEncoded(e[0])?super(ia.toArrayBuffer(e[0]),e[1]):super(e[0])}toString(e="pem"){return e==="pem"?cr.encode(this.rawData,this.tag):super.toString(e)}}class fi extends ia{static async create(e,n=bs.get()){if(e instanceof fi)return e;if(Ya.isCryptoKey(e)){if(e.type!=="public")throw new TypeError("Public key is required");const s=await n.subtle.exportKey("spki",e);return new fi(s)}else{if(e.publicKey)return e.publicKey;if(Re.isBufferSource(e))return new fi(e);throw new TypeError("Unsupported PublicKeyType")}}constructor(e){ia.isAsnEncoded(e)?super(e,ui):super(e),this.tag=cr.PublicKeyTag}async export(...e){let n,s=["verify"],r={hash:"SHA-256",...this.algorithm};e.length>1?(r=e[0]||r,s=e[1]||s,n=e[2]||bs.get()):n=e[0]||bs.get();let a=this.rawData;const o=Me.parse(this.rawData,ui);return o.algorithm.algorithm===Bd&&(a=dG(o,a)),n.subtle.importKey("spki",a,r,!0,s)}onInit(e){const n=Ss.resolve(eu),s=this.algorithm=n.toWebAlgorithm(e.algorithm);if(e.algorithm.algorithm===io){const r=Me.parse(e.subjectPublicKey,M2),a=Re.toUint8Array(r.modulus);s.publicExponent=Re.toUint8Array(r.publicExponent),s.modulusLength=(a[0]?a:a.slice(1)).byteLength<<3}}async getThumbprint(...e){var n;let s,r="SHA-1";return e.length>=1&&!(!((n=e[0])===null||n===void 0)&&n.subtle)?(r=e[0]||r,s=e[1]||bs.get()):s=e[0]||bs.get(),await s.subtle.digest(r,this.rawData)}async getKeyIdentifier(...e){let n,s="SHA-1";e.length===1?typeof e[0]=="string"?(s=e[0],n=bs.get()):n=e[0]:e.length===2?(s=e[0],n=e[1]):n=bs.get();const r=Me.parse(this.rawData,ui);return await n.subtle.digest(s,r.subjectPublicKey)}toTextObject(){const e=this.toTextObjectEmpty(),n=Me.parse(this.rawData,ui);switch(e.Algorithm=oo.serializeAlgorithm(n.algorithm),n.algorithm.algorithm){case Xd:e["EC Point"]=n.subjectPublicKey;break;case io:default:e["Raw Data"]=n.subjectPublicKey}return e}}function dG(t,e){return t.algorithm=new Ie({algorithm:io,parameters:null}),e=Me.serialize(t),e}class tf extends fr{static async create(e,n=!1,s=bs.get()){if("name"in e&&"serialNumber"in e)return new tf(e,n);const a=await(await fi.create(e,s)).getKeyIdentifier(s);return new tf(Fe.ToHex(a),n)}constructor(...e){if(Re.isBufferSource(e[0]))super(e[0]);else if(typeof e[0]=="string"){const n=new zl({keyIdentifier:new m2(Fe.FromHex(e[0]))});super(tx,e[1],Me.serialize(n))}else{const n=e[0],s=n.name instanceof uo?Me.parse(n.name.rawData,fs):n.name,r=new zl({authorityCertIssuer:s,authorityCertSerialNumber:Fe.FromHex(n.serialNumber)});super(tx,e[1],Me.serialize(r))}}onInit(e){super.onInit(e);const n=Me.parse(e.extnValue,zl);n.keyIdentifier&&(this.keyId=Fe.ToHex(n.keyIdentifier)),(n.authorityCertIssuer||n.authorityCertSerialNumber)&&(this.certId={name:n.authorityCertIssuer||[],serialNumber:n.authorityCertSerialNumber?Fe.ToHex(n.authorityCertSerialNumber):""})}toTextObject(){const e=this.toTextObjectWithoutValue(),n=Me.parse(this.value,zl);return n.authorityCertIssuer&&(e["Authority Issuer"]=new uo(n.authorityCertIssuer).toTextObject()),n.authorityCertSerialNumber&&(e["Authority Serial Number"]=n.authorityCertSerialNumber),n.keyIdentifier&&(e[""]=n.keyIdentifier),e}}tf.NAME="Authority Key Identifier";class OB extends fr{constructor(...e){if(Re.isBufferSource(e[0])){super(e[0]);const n=Me.parse(this.value,k0);this.ca=n.cA,this.pathLength=n.pathLenConstraint}else{const n=new k0({cA:e[0],pathLenConstraint:e[1]});super(GR,e[2],Me.serialize(n)),this.ca=e[0],this.pathLength=e[1]}}toTextObject(){const e=this.toTextObjectWithoutValue();return this.ca&&(e.CA=this.ca),this.pathLength!==void 0&&(e["Path Length"]=this.pathLength),e}}OB.NAME="Basic Constraints";var b3;(function(t){t.serverAuth="1.3.6.1.5.5.7.3.1",t.clientAuth="1.3.6.1.5.5.7.3.2",t.codeSigning="1.3.6.1.5.5.7.3.3",t.emailProtection="1.3.6.1.5.5.7.3.4",t.timeStamping="1.3.6.1.5.5.7.3.8",t.ocspSigning="1.3.6.1.5.5.7.3.9"})(b3||(b3={}));class RB extends fr{constructor(...e){if(Re.isBufferSource(e[0])){super(e[0]);const n=Me.parse(this.value,A0);this.usages=n.map(s=>s)}else{const n=new A0(e[0]);super(JR,e[1],Me.serialize(n)),this.usages=e[0]}}toTextObject(){const e=this.toTextObjectWithoutValue();return e[""]=this.usages.map(n=>cl.toString(n)).join(", "),e}}RB.NAME="Extended Key Usages";var Wi;(function(t){t[t.digitalSignature=1]="digitalSignature",t[t.nonRepudiation=2]="nonRepudiation",t[t.keyEncipherment=4]="keyEncipherment",t[t.dataEncipherment=8]="dataEncipherment",t[t.keyAgreement=16]="keyAgreement",t[t.keyCertSign=32]="keyCertSign",t[t.cRLSign=64]="cRLSign",t[t.encipherOnly=128]="encipherOnly",t[t.decipherOnly=256]="decipherOnly"})(Wi||(Wi={}));class BB extends fr{constructor(...e){if(Re.isBufferSource(e[0])){super(e[0]);const n=Me.parse(this.value,Rb);this.usages=n.toNumber()}else{const n=new Rb(e[0]);super(ZR,e[1],Me.serialize(n)),this.usages=e[0]}}toTextObject(){const e=this.toTextObjectWithoutValue(),n=Me.parse(this.value,Rb);return e[""]=n.toJSON().join(", "),e}}BB.NAME="Key Usages";class _y extends fr{static async create(e,n=!1,s=bs.get()){const a=await(await fi.create(e,s)).getKeyIdentifier(s);return new _y(Fe.ToHex(a),n)}constructor(...e){if(Re.isBufferSource(e[0])){super(e[0]);const n=Me.parse(this.value,el);this.keyId=Fe.ToHex(n)}else{const n=typeof e[0]=="string"?Fe.FromHex(e[0]):e[0],s=new el(n);super(sB,e[1],Me.serialize(s)),this.keyId=Fe.ToHex(n)}}toTextObject(){const e=this.toTextObjectWithoutValue(),n=Me.parse(this.value,el);return e[""]=n,e}}_y.NAME="Subject Key Identifier";class MB extends fr{constructor(...e){Re.isBufferSource(e[0])?super(e[0]):super(nB,e[1],new uo(e[0]||[]).rawData)}onInit(e){super.onInit(e);const n=Me.parse(e.extnValue,gx);this.names=new uo(n)}toTextObject(){const e=this.toTextObjectWithoutValue(),n=this.names.toTextObject();for(const s in n)e[s]=n[s];return e}}MB.NAME="Subject Alternative Name";class pr{static register(e,n){this.items.set(e,n)}static create(e){const n=new fr(e),s=this.items.get(n.type);return s?new s(e):n}}pr.items=new Map;class DB extends fr{constructor(...e){var n;if(Re.isBufferSource(e[0])){super(e[0]);const s=Me.parse(this.value,N0);this.policies=s.map(r=>r.policyIdentifier)}else{const s=e[0],r=(n=e[1])!==null&&n!==void 0?n:!1,a=new N0(s.map(o=>new Xg({policyIdentifier:o})));super(YR,r,Me.serialize(a)),this.policies=s}}toTextObject(){const e=this.toTextObjectWithoutValue();return e.Policy=this.policies.map(n=>new Ot("",{},cl.toString(n))),e}}DB.NAME="Certificate Policies";pr.register(YR,DB);class LB extends fr{constructor(...e){var n;if(Re.isBufferSource(e[0]))super(e[0]);else if(Array.isArray(e[0])&&typeof e[0][0]=="string"){const r=e[0].map(o=>new yu({distributionPoint:new no({fullName:[new lt({uniformResourceIdentifier:o})]})})),a=new Pc(r);super(ax,e[1],Me.serialize(a))}else{const s=new Pc(e[0]);super(ax,e[1],Me.serialize(s))}(n=this.distributionPoints)!==null&&n!==void 0||(this.distributionPoints=[])}onInit(e){super.onInit(e);const n=Me.parse(e.extnValue,Pc);this.distributionPoints=n}toTextObject(){const e=this.toTextObjectWithoutValue();return e["Distribution Point"]=this.distributionPoints.map(n=>{var s;const r={};return n.distributionPoint&&(r[""]=(s=n.distributionPoint.fullName)===null||s===void 0?void 0:s.map(a=>new Xa(a).toString()).join(", ")),n.reasons&&(r.Reasons=n.reasons.toString()),n.cRLIssuer&&(r["CRL Issuer"]=n.cRLIssuer.map(a=>a.toString()).join(", ")),r}),e}}LB.NAME="CRL Distribution Points";class IB extends fr{constructor(...e){var n,s,r,a;if(Re.isBufferSource(e[0]))super(e[0]);else if(e[0]instanceof Ec){const o=new Ec(e[0]);super(ex,e[1],Me.serialize(o))}else{const o=e[0],c=new Ec;ym(c,o,sA,"ocsp"),ym(c,o,rA,"caIssuers"),ym(c,o,iA,"timeStamping"),ym(c,o,aA,"caRepository"),super(ex,e[1],Me.serialize(c))}(n=this.ocsp)!==null&&n!==void 0||(this.ocsp=[]),(s=this.caIssuers)!==null&&s!==void 0||(this.caIssuers=[]),(r=this.timeStamping)!==null&&r!==void 0||(this.timeStamping=[]),(a=this.caRepository)!==null&&a!==void 0||(this.caRepository=[])}onInit(e){super.onInit(e),this.ocsp=[],this.caIssuers=[],this.timeStamping=[],this.caRepository=[],Me.parse(e.extnValue,Ec).forEach(s=>{switch(s.accessMethod){case sA:this.ocsp.push(new Xa(s.accessLocation));break;case rA:this.caIssuers.push(new Xa(s.accessLocation));break;case iA:this.timeStamping.push(new Xa(s.accessLocation));break;case aA:this.caRepository.push(new Xa(s.accessLocation));break}})}toTextObject(){const e=this.toTextObjectWithoutValue();return this.ocsp.length&&gm(e,"OCSP",this.ocsp),this.caIssuers.length&&gm(e,"CA Issuers",this.caIssuers),this.timeStamping.length&&gm(e,"Time Stamping",this.timeStamping),this.caRepository.length&&gm(e,"CA Repository",this.caRepository),e}}IB.NAME="Authority Info Access";function gm(t,e,n){if(n.length===1)t[e]=n[0].toTextObject();else{const s=new Ot("");n.forEach((r,a)=>{const o=r.toTextObject(),c=`${o[Ot.NAME]} ${a+1}`;let h=s[c];Array.isArray(h)||(h=[],s[c]=h),h.push(o)}),t[e]=s}}function ym(t,e,n,s){const r=e[s];r&&(Array.isArray(r)?r:[r]).forEach(o=>{typeof o=="string"&&(o=new Xa("url",o)),t.push(new xf({accessMethod:n,accessLocation:Me.parse(o.rawData,lt)}))})}class PB extends fr{constructor(...e){Re.isBufferSource(e[0])?super(e[0]):super(QR,e[1],new uo(e[0]||[]).rawData)}onInit(e){super.onInit(e);const n=Me.parse(e.extnValue,fs);this.names=new uo(n)}toTextObject(){const e=this.toTextObjectWithoutValue(),n=this.names.toTextObject();for(const s in n)e[s]=n[s];return e}}PB.NAME="Issuer Alternative Name";class ku extends ul{constructor(...e){let n;if(Re.isBufferSource(e[0]))n=Re.toArrayBuffer(e[0]);else{const s=e[0],r=Array.isArray(e[1])?e[1].map(a=>Re.toArrayBuffer(a)):[];n=Me.serialize(new na({type:s,values:r}))}super(n,na)}onInit(e){this.type=e.type,this.values=e.values}toTextObject(){const e=this.toTextObjectWithoutValue();return e.Value=this.values.map(n=>new Ot("",{"":n})),e}toTextObjectWithoutValue(){const e=this.toTextObjectEmpty();return e[Ot.NAME]===ku.NAME&&(e[Ot.NAME]=cl.toString(this.type)),e}}ku.NAME="Attribute";class zB extends ku{constructor(...e){var n;if(Re.isBufferSource(e[0]))super(e[0]);else{const s=new Q0({printableString:e[0]});super(CB,[Me.serialize(s)])}(n=this.password)!==null&&n!==void 0||(this.password="")}onInit(e){if(super.onInit(e),this.values[0]){const n=Me.parse(this.values[0],Q0);this.password=n.toString()}}toTextObject(){const e=this.toTextObjectWithoutValue();return e[Ot.VALUE]=this.password,e}}zB.NAME="Challenge Password";class P2 extends ku{constructor(...e){var n;if(Re.isBufferSource(e[0]))super(e[0]);else{const s=e[0],r=new so;for(const a of s)r.push(Me.parse(a.rawData,Yr));super(I2,[Me.serialize(r)])}(n=this.items)!==null&&n!==void 0||(this.items=[])}onInit(e){if(super.onInit(e),this.values[0]){const n=Me.parse(this.values[0],so);this.items=n.map(s=>pr.create(Me.serialize(s)))}}toTextObject(){const e=this.toTextObjectWithoutValue(),n=this.items.map(s=>s.toTextObject());for(const s of n)e[s[Ot.NAME]]=s;return e}}P2.NAME="Extensions";class xy{static register(e,n){this.items.set(e,n)}static create(e){const n=new ku(e),s=this.items.get(n.type);return s?new s(e):n}}xy.items=new Map;const wy="crypto.signatureFormatter";class fG{toAsnSignature(e,n){return Re.toArrayBuffer(n)}toWebSignature(e,n){return Re.toArrayBuffer(n)}}var Km;let aw=Km=class{static createPssParams(e,n){const s=Km.getHashAlgorithm(e);return s?new lo({hashAlgorithm:s,maskGenAlgorithm:new Ie({algorithm:hy,parameters:Me.serialize(s)}),saltLength:n}):null}static getHashAlgorithm(e){const n=Ss.resolve(eu);return typeof e=="string"?n.toAsnAlgorithm({name:e}):typeof e=="object"&&e&&"name"in e?n.toAsnAlgorithm(e):null}toAsnAlgorithm(e){switch(e.name.toLowerCase()){case"rsassa-pkcs1-v1_5":if("hash"in e){let n;if(typeof e.hash=="string")n=e.hash;else if(e.hash&&typeof e.hash=="object"&&"name"in e.hash&&typeof e.hash.name=="string")n=e.hash.name.toUpperCase();else throw new Error("Cannot get hash algorithm name");switch(n.toLowerCase()){case"sha-1":return new Ie({algorithm:U0,parameters:null});case"sha-256":return new Ie({algorithm:Ix,parameters:null});case"sha-384":return new Ie({algorithm:V0,parameters:null});case"sha-512":return new Ie({algorithm:F0,parameters:null})}}else return new Ie({algorithm:io,parameters:null});break;case"rsa-pss":if("hash"in e){if(!("saltLength"in e&&typeof e.saltLength=="number"))throw new Error("Cannot get 'saltLength' from 'alg' argument");const n=Km.createPssParams(e.hash,e.saltLength);if(!n)throw new Error("Cannot create PSS parameters");return new Ie({algorithm:Bd,parameters:Me.serialize(n)})}else return new Ie({algorithm:Bd,parameters:null})}return null}toWebAlgorithm(e){switch(e.algorithm){case io:return{name:"RSASSA-PKCS1-v1_5"};case U0:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case Ix:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case V0:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case F0:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case Bd:if(e.parameters){const n=Me.parse(e.parameters,lo);return{name:"RSA-PSS",hash:Ss.resolve(eu).toWebAlgorithm(n.hashAlgorithm),saltLength:n.saltLength}}else return{name:"RSA-PSS"}}return null}};aw=Km=j([my()],aw);Ss.registerSingleton(Rf,aw);let lw=class{toAsnAlgorithm(e){switch(e.name.toLowerCase()){case"sha-1":return new Ie({algorithm:q0});case"sha-256":return new Ie({algorithm:K0});case"sha-384":return new Ie({algorithm:W0});case"sha-512":return new Ie({algorithm:G0})}return null}toWebAlgorithm(e){switch(e.algorithm){case q0:return{name:"SHA-1"};case K0:return{name:"SHA-256"};case W0:return{name:"SHA-384"};case G0:return{name:"SHA-512"}}return null}};lw=j([my()],lw);Ss.registerSingleton(Rf,lw);class Or{addPadding(e,n){const s=Re.toUint8Array(n),r=new Uint8Array(e);return r.set(s,e-s.length),r.buffer}removePadding(e,n=!1){let s=Re.toUint8Array(e);for(let r=0;r<s.length;r++)if(s[r]){s=s.slice(r);break}if(n&&s[0]>127){const r=new Uint8Array(s.length+1);return r.set(s,1),r.buffer}return s.buffer}toAsnSignature(e,n){if(e.name==="ECDSA"){const s=e.namedCurve,r=Or.namedCurveSize.get(s)||Or.defaultNamedCurveSize,a=new H0,o=Re.toUint8Array(n);return a.r=this.removePadding(o.slice(0,r),!0),a.s=this.removePadding(o.slice(r,r+r),!0),Me.serialize(a)}return null}toWebSignature(e,n){if(e.name==="ECDSA"){const s=Me.parse(n,H0),r=e.namedCurve,a=Or.namedCurveSize.get(r)||Or.defaultNamedCurveSize,o=this.addPadding(a,this.removePadding(s.r)),c=this.addPadding(a,this.removePadding(s.s));return NK(o,c)}return null}}Or.namedCurveSize=new Map;Or.defaultNamedCurveSize=32;const $b="1.3.101.110",_3="1.3.101.111",Hb="1.3.101.112",x3="1.3.101.113";let ow=class{toAsnAlgorithm(e){let n=null;switch(e.name.toLowerCase()){case"ed25519":n=Hb;break;case"x25519":n=$b;break;case"eddsa":switch(e.namedCurve.toLowerCase()){case"ed25519":n=Hb;break;case"ed448":n=x3;break}break;case"ecdh-es":switch(e.namedCurve.toLowerCase()){case"x25519":n=$b;break;case"x448":n=_3;break}}return n?new Ie({algorithm:n}):null}toWebAlgorithm(e){switch(e.algorithm){case Hb:return{name:"Ed25519"};case x3:return{name:"EdDSA",namedCurve:"Ed448"};case $b:return{name:"X25519"};case _3:return{name:"ECDH-ES",namedCurve:"X448"}}return null}};ow=j([my()],ow);Ss.registerSingleton(Rf,ow);var Gh,Yh,Xh,Jh,Qh,Zh,ed,kc;class pG extends ia{get subjectName(){return ut(this,Yh,"f")||tn(this,Yh,new co(this.asn.certificationRequestInfo.subject),"f"),ut(this,Yh,"f")}get subject(){return ut(this,Xh,"f")||tn(this,Xh,this.subjectName.toString(),"f"),ut(this,Xh,"f")}get signatureAlgorithm(){if(!ut(this,Jh,"f")){const e=Ss.resolve(eu);tn(this,Jh,e.toWebAlgorithm(this.asn.signatureAlgorithm),"f")}return ut(this,Jh,"f")}get signature(){return ut(this,Qh,"f")||tn(this,Qh,this.asn.signature,"f"),ut(this,Qh,"f")}get publicKey(){return ut(this,Zh,"f")||tn(this,Zh,new fi(this.asn.certificationRequestInfo.subjectPKInfo),"f"),ut(this,Zh,"f")}get attributes(){return ut(this,ed,"f")||tn(this,ed,this.asn.certificationRequestInfo.attributes.map(e=>xy.create(Me.serialize(e))),"f"),ut(this,ed,"f")}get extensions(){if(!ut(this,kc,"f")){tn(this,kc,[],"f");const e=this.getAttribute(I2);e instanceof P2&&tn(this,kc,e.items,"f")}return ut(this,kc,"f")}get tbs(){return ut(this,Gh,"f")||tn(this,Gh,this.asn.certificationRequestInfoRaw||Me.serialize(this.asn.certificationRequestInfo),"f"),ut(this,Gh,"f")}constructor(e){const n=ia.isAsnEncoded(e)?[e,Qd]:[e];super(n[0],n[1]),Gh.set(this,void 0),Yh.set(this,void 0),Xh.set(this,void 0),Jh.set(this,void 0),Qh.set(this,void 0),Zh.set(this,void 0),ed.set(this,void 0),kc.set(this,void 0),this.tag=cr.CertificateRequestTag}onInit(e){}getAttribute(e){for(const n of this.attributes)if(n.type===e)return n;return null}getAttributes(e){return this.attributes.filter(n=>n.type===e)}getExtension(e){for(const n of this.extensions)if(n.type===e)return n;return null}getExtensions(e){return this.extensions.filter(n=>n.type===e)}async verify(e=bs.get()){const n={...this.publicKey.algorithm,...this.signatureAlgorithm},s=await this.publicKey.export(n,["verify"],e),r=Ss.resolveAll(wy).reverse();let a=null;for(const c of r)if(a=c.toWebSignature(n,this.signature),a)break;if(!a)throw Error("Cannot convert WebCrypto signature value to ASN.1 format");return await e.subtle.verify(this.signatureAlgorithm,s,a,this.tbs)}toTextObject(){const e=this.toTextObjectEmpty(),n=Me.parse(this.rawData,Qd),s=n.certificationRequestInfo,r=new Ot("",{Version:`${qc[s.version]} (${s.version})`,Subject:this.subject,"Subject Public Key Info":this.publicKey});if(this.attributes.length){const a=new Ot("");for(const o of this.attributes){const c=o.toTextObject();a[c[Ot.NAME]]=c}r.Attributes=a}return e.Data=r,e.Signature=new Ot("",{Algorithm:oo.serializeAlgorithm(n.signatureAlgorithm),"":n.signature}),e}}Gh=new WeakMap,Yh=new WeakMap,Xh=new WeakMap,Jh=new WeakMap,Qh=new WeakMap,Zh=new WeakMap,ed=new WeakMap,kc=new WeakMap;pG.NAME="PKCS#10 Certificate Request";var td,nd,sd,rd,id,ad,ld,od,cd,ud,Cc,hd;class $B extends ia{get publicKey(){return ut(this,hd,"f")||tn(this,hd,new fi(this.asn.tbsCertificate.subjectPublicKeyInfo),"f"),ut(this,hd,"f")}get serialNumber(){if(!ut(this,nd,"f")){const e=this.asn.tbsCertificate;let n=new Uint8Array(e.serialNumber);n.length>1&&n[0]===0&&n[1]>127&&(n=n.slice(1)),tn(this,nd,Fe.ToHex(n),"f")}return ut(this,nd,"f")}get subjectName(){return ut(this,sd,"f")||tn(this,sd,new co(this.asn.tbsCertificate.subject),"f"),ut(this,sd,"f")}get subject(){return ut(this,rd,"f")||tn(this,rd,this.subjectName.toString(),"f"),ut(this,rd,"f")}get issuerName(){return ut(this,id,"f")||tn(this,id,new co(this.asn.tbsCertificate.issuer),"f"),ut(this,id,"f")}get issuer(){return ut(this,ad,"f")||tn(this,ad,this.issuerName.toString(),"f"),ut(this,ad,"f")}get notBefore(){if(!ut(this,ld,"f")){const e=this.asn.tbsCertificate.validity.notBefore.utcTime||this.asn.tbsCertificate.validity.notBefore.generalTime;if(!e)throw new Error("Cannot get 'notBefore' value");tn(this,ld,e,"f")}return ut(this,ld,"f")}get notAfter(){if(!ut(this,od,"f")){const e=this.asn.tbsCertificate.validity.notAfter.utcTime||this.asn.tbsCertificate.validity.notAfter.generalTime;if(!e)throw new Error("Cannot get 'notAfter' value");tn(this,od,e,"f")}return ut(this,od,"f")}get signatureAlgorithm(){if(!ut(this,cd,"f")){const e=Ss.resolve(eu);tn(this,cd,e.toWebAlgorithm(this.asn.signatureAlgorithm),"f")}return ut(this,cd,"f")}get signature(){return ut(this,ud,"f")||tn(this,ud,this.asn.signatureValue,"f"),ut(this,ud,"f")}get extensions(){return ut(this,Cc,"f")||(tn(this,Cc,[],"f"),this.asn.tbsCertificate.extensions&&tn(this,Cc,this.asn.tbsCertificate.extensions.map(e=>pr.create(Me.serialize(e))),"f")),ut(this,Cc,"f")}get tbs(){return ut(this,td,"f")||tn(this,td,this.asn.tbsCertificateRaw||Me.serialize(this.asn.tbsCertificate),"f"),ut(this,td,"f")}constructor(e){const n=ia.isAsnEncoded(e)?[e,Kc]:[e];super(n[0],n[1]),td.set(this,void 0),nd.set(this,void 0),sd.set(this,void 0),rd.set(this,void 0),id.set(this,void 0),ad.set(this,void 0),ld.set(this,void 0),od.set(this,void 0),cd.set(this,void 0),ud.set(this,void 0),Cc.set(this,void 0),hd.set(this,void 0),this.tag=cr.CertificateTag}onInit(e){}getExtension(e){for(const n of this.extensions)if(typeof e=="string"){if(n.type===e)return n}else if(n instanceof e)return n;return null}getExtensions(e){return this.extensions.filter(n=>typeof e=="string"?n.type===e:n instanceof e)}async verify(e={},n=bs.get()){let s,r;const a=e.publicKey;try{if(!a)s={...this.publicKey.algorithm,...this.signatureAlgorithm},r=await this.publicKey.export(s,["verify"],n);else if("publicKey"in a)s={...a.publicKey.algorithm,...this.signatureAlgorithm},r=await a.publicKey.export(s,["verify"],n);else if(a instanceof fi)s={...a.algorithm,...this.signatureAlgorithm},r=await a.export(s,["verify"],n);else if(Re.isBufferSource(a)){const d=new fi(a);s={...d.algorithm,...this.signatureAlgorithm},r=await d.export(s,["verify"],n)}else s={...a.algorithm,...this.signatureAlgorithm},r=a}catch{return!1}const o=Ss.resolveAll(wy).reverse();let c=null;for(const d of o)if(c=d.toWebSignature(s,this.signature),c)break;if(!c)throw Error("Cannot convert ASN.1 signature value to WebCrypto format");const h=await n.subtle.verify(this.signatureAlgorithm,r,c,this.tbs);if(e.signatureOnly)return h;{const g=(e.date||new Date).getTime();return h&&this.notBefore.getTime()<g&&g<this.notAfter.getTime()}}async getThumbprint(...e){let n,s="SHA-1";return e[0]&&(e[0].subtle?n=e[0]:(s=e[0]||s,n=e[1])),n??(n=bs.get()),await n.subtle.digest(s,this.rawData)}async isSelfSigned(e=bs.get()){return this.subject===this.issuer&&await this.verify({signatureOnly:!0},e)}toTextObject(){const e=this.toTextObjectEmpty(),n=Me.parse(this.rawData,Kc),s=n.tbsCertificate,r=new Ot("",{Version:`${qc[s.version]} (${s.version})`,"Serial Number":s.serialNumber,"Signature Algorithm":oo.serializeAlgorithm(s.signature),Issuer:this.issuer,Validity:new Ot("",{"Not Before":s.validity.notBefore.getTime(),"Not After":s.validity.notAfter.getTime()}),Subject:this.subject,"Subject Public Key Info":this.publicKey});if(s.issuerUniqueID&&(r["Issuer Unique ID"]=s.issuerUniqueID),s.subjectUniqueID&&(r["Subject Unique ID"]=s.subjectUniqueID),this.extensions.length){const a=new Ot("");for(const o of this.extensions){const c=o.toTextObject();a[c[Ot.NAME]]=c}r.Extensions=a}return e.Data=r,e.Signature=new Ot("",{Algorithm:oo.serializeAlgorithm(n.signatureAlgorithm),"":n.signatureValue}),e}}td=new WeakMap,nd=new WeakMap,sd=new WeakMap,rd=new WeakMap,id=new WeakMap,ad=new WeakMap,ld=new WeakMap,od=new WeakMap,cd=new WeakMap,ud=new WeakMap,Cc=new WeakMap,hd=new WeakMap;$B.NAME="Certificate";var w3;(function(t){t[t.unspecified=0]="unspecified",t[t.keyCompromise=1]="keyCompromise",t[t.cACompromise=2]="cACompromise",t[t.affiliationChanged=3]="affiliationChanged",t[t.superseded=4]="superseded",t[t.cessationOfOperation=5]="cessationOfOperation",t[t.certificateHold=6]="certificateHold",t[t.removeFromCRL=8]="removeFromCRL",t[t.privilegeWithdrawn=9]="privilegeWithdrawn",t[t.aACompromise=10]="aACompromise"})(w3||(w3={}));pr.register(GR,OB);pr.register(JR,RB);pr.register(ZR,BB);pr.register(sB,_y);pr.register(tx,tf);pr.register(nB,MB);pr.register(ax,LB);pr.register(ex,IB);pr.register(QR,PB);xy.register(CB,zB);xy.register(I2,P2);Ss.registerSingleton(wy,fG);Ss.registerSingleton(wy,Or);Or.namedCurveSize.set("P-256",32);Or.namedCurveSize.set("K-256",32);Or.namedCurveSize.set("P-384",48);Or.namedCurveSize.set("P-521",66);const mG=["-----BEGIN CERTIFICATE-----","-----BEGIN X509 CERTIFICATE-----","-----BEGIN TRUSTED CERTIFICATE-----"],gG=["-----BEGIN PRIVATE KEY-----","-----BEGIN RSA PRIVATE KEY-----","-----BEGIN EC PRIVATE KEY-----","-----BEGIN ENCRYPTED PRIVATE KEY-----"],yG=["-----BEGIN PUBLIC KEY-----","-----BEGIN RSA PUBLIC KEY-----"],vG=["-----BEGIN CERTIFICATE REQUEST-----","-----BEGIN NEW CERTIFICATE REQUEST-----"];function bG(t){const e=t.trim();for(const n of mG)if(e.startsWith(n))return{type:"certificate",content:e};for(const n of gG)if(e.startsWith(n))return{type:"private-key",content:e};for(const n of yG)if(e.startsWith(n))return{type:"public-key",content:e};for(const n of vG)if(e.startsWith(n))return{type:"csr",content:e};return null}function _G(t){try{const e=new $B(t),n=new Date,s={};for(const k of e.subject.split(", ")){const[C,A]=k.split("=");C&&A&&(s[C]=A)}const r={};for(const k of e.issuer.split(", ")){const[C,A]=k.split("=");C&&A&&(r[C]=A)}const a=e.notBefore,o=e.notAfter,c=n>o,h=n<a,d=Math.ceil((o.getTime()-n.getTime())/(1e3*60*60*24)),g=e.subject===e.issuer;let m="Unknown";try{const k=e.publicKey;m=k.algorithm.name||"Unknown","namedCurve"in k.algorithm&&(m+=` (${k.algorithm.namedCurve})`),"modulusLength"in k.algorithm&&(m+=` ${k.algorithm.modulusLength}-bit`)}catch{}const v=e.signatureAlgorithm.name||"Unknown";let y,x,w,S=!1;for(const k of e.extensions){if(k.type==="2.5.29.15")try{const C=k;y=[],C.usages&Wi.digitalSignature&&y.push("Digital Signature"),C.usages&Wi.keyEncipherment&&y.push("Key Encipherment"),C.usages&Wi.dataEncipherment&&y.push("Data Encipherment"),C.usages&Wi.keyAgreement&&y.push("Key Agreement"),C.usages&Wi.keyCertSign&&y.push("Certificate Signing"),C.usages&Wi.cRLSign&&y.push("CRL Signing"),C.usages&Wi.nonRepudiation&&y.push("Non-Repudiation")}catch{}if(k.type==="2.5.29.37")try{x=k.usages.map(A=>{const B=String(A);return{"1.3.6.1.5.5.7.3.1":"Server Authentication","1.3.6.1.5.5.7.3.2":"Client Authentication","1.3.6.1.5.5.7.3.3":"Code Signing","1.3.6.1.5.5.7.3.4":"Email Protection","1.3.6.1.5.5.7.3.8":"Time Stamping","1.3.6.1.5.5.7.3.9":"OCSP Signing"}[B]||B})}catch{}if(k.type==="2.5.29.17")try{w=k.names.items.map(A=>A.type==="dns"?`DNS:${A.value}`:A.type==="ip"?`IP:${A.value}`:A.type==="email"?`Email:${A.value}`:A.type==="url"?`URI:${A.value}`:String(A.value))}catch{}if(k.type==="2.5.29.19")try{S=k.ca}catch{}}return{subject:s,issuer:r,serialNumber:e.serialNumber,notBefore:a,notAfter:o,isExpired:c,isNotYetValid:h,daysUntilExpiry:d,keyAlgorithm:m,signatureAlgorithm:v,keyUsage:y,extKeyUsage:x,subjectAltNames:w,isSelfSigned:g,isCA:S}}catch(e){return console.error("Failed to parse certificate:",e),null}}function S3(t){return t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",timeZoneName:"short"})}function Ub(t){const e=["CN","O","OU","L","ST","C"],n=[];for(const s of e)t[s]&&n.push(`${s}=${t[s]}`);for(const[s,r]of Object.entries(t))e.includes(s)||n.push(`${s}=${r}`);return n.join(", ")}function cw(t){const e=He.c(34),{name:n,pem:s}=t,[r,a]=W.useState(!0),[o,c]=W.useState(!1);let h,d;if(e[0]!==o||e[1]!==r||e[2]!==n||e[3]!==s){d=Symbol.for("react.early_return_sentinel");e:{const g=_G(s);let m;e[6]!==s?(m=async()=>{await navigator.clipboard.writeText(s),c(!0),setTimeout(()=>c(!1),2e3)},e[6]=s,e[7]=m):m=e[7];const v=m;if(!g){let z;e[8]===Symbol.for("react.memo_cache_sentinel")?(z=f.jsx(i0,{size:14,className:"text-amber-500"}),e[8]=z):z=e[8];let Q;e[9]!==n?(Q=f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n}),e[9]=n,e[10]=Q):Q=e[10];let F;e[11]===Symbol.for("react.memo_cache_sentinel")?(F=f.jsx("span",{className:"text-xs text-neutral-500",children:"Failed to parse certificate"}),e[11]=F):F=e[11];let K;e[12]!==Q?(K=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-3",children:f.jsxs("div",{className:"flex items-center gap-2",children:[z,Q,F]})}),e[12]=Q,e[13]=K):K=e[13],d=K;break e}let y="text-emerald-500",x="bg-emerald-100 dark:bg-emerald-500/20",w="Valid";g.isExpired?(y="text-red-500",x="bg-red-100 dark:bg-red-500/20",w="Expired"):g.isNotYetValid?(y="text-amber-500",x="bg-amber-100 dark:bg-amber-500/20",w="Not Yet Valid"):g.daysUntilExpiry<=30&&(y="text-amber-500",x="bg-amber-100 dark:bg-amber-500/20",w=`Expires in ${g.daysUntilExpiry} days`);let S;e[14]!==r?(S=()=>a(!r),e[14]=r,e[15]=S):S=e[15];let k;e[16]===Symbol.for("react.memo_cache_sentinel")?(k=f.jsx(lu,{size:14,className:"text-blue-500 dark:text-blue-400"}),e[16]=k):k=e[16];let C;e[17]!==n?(C=f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n}),e[17]=n,e[18]=C):C=e[18];const A=`text-xs px-1.5 py-0.5 rounded ${x} ${y}`;let B;e[19]!==w||e[20]!==A?(B=f.jsx("span",{className:A,children:w}),e[19]=w,e[20]=A,e[21]=B):B=e[21];let M;e[22]!==v?(M=z=>{z.stopPropagation(),v()},e[22]=v,e[23]=M):M=e[23];let T;e[24]!==o?(T=o?f.jsx(En,{size:14,className:"text-emerald-500"}):f.jsx(us,{size:14,className:"text-neutral-400"}),e[24]=o,e[25]=T):T=e[25];let H;e[26]!==T||e[27]!==M?(H=f.jsx("button",{onClick:M,className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy certificate",children:T}),e[26]=T,e[27]=M,e[28]=H):H=e[28];let $;e[29]!==r?($=r?f.jsx(Ln,{size:14,className:"text-neutral-400"}):f.jsx(Hs,{size:14,className:"text-neutral-400"}),e[29]=r,e[30]=$):$=e[30];let G;e[31]!==H||e[32]!==$?(G=f.jsxs("div",{className:"flex items-center gap-1",children:[H,$]}),e[31]=H,e[32]=$,e[33]=G):G=e[33],h=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:S,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[k,C,B,g.isCA&&f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-purple-100 dark:bg-purple-500/20 text-purple-600 dark:text-purple-400",children:"CA"}),g.isSelfSigned&&f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-neutral-200 dark:bg-neutral-600/50 text-neutral-600 dark:text-neutral-400",children:"Self-Signed"})]}),G]}),r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3 space-y-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Subject"}),f.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300",children:g.subject.CN||Ub(g.subject)}),g.subject.CN&&Object.keys(g.subject).length>1&&f.jsx("div",{className:"text-xs font-mono text-neutral-500 mt-0.5",children:Ub(g.subject)})]}),!g.isSelfSigned&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Issuer"}),f.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300",children:g.issuer.CN||Ub(g.issuer)})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Not Before"}),f.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300",children:S3(g.notBefore)})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Not After"}),f.jsxs("div",{className:`text-xs font-mono flex items-center gap-1 ${g.isExpired?"text-red-500":g.daysUntilExpiry<=30?"text-amber-500":"text-neutral-700 dark:text-neutral-300"}`,children:[g.isExpired?f.jsx(i0,{size:12}):g.daysUntilExpiry<=30?f.jsx(ll,{size:12}):f.jsx(yI,{size:12,className:"text-emerald-500"}),S3(g.notAfter)]})]})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Serial Number"}),f.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300 break-all",children:g.serialNumber})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Key Algorithm"}),f.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300",children:g.keyAlgorithm})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Signature Algorithm"}),f.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300",children:g.signatureAlgorithm})]})]}),g.subjectAltNames&&g.subjectAltNames.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Subject Alternative Names"}),f.jsx("div",{className:"flex flex-wrap gap-1",children:g.subjectAltNames.map(SG)})]}),g.keyUsage&&g.keyUsage.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Key Usage"}),f.jsx("div",{className:"flex flex-wrap gap-1",children:g.keyUsage.map(wG)})]}),g.extKeyUsage&&g.extKeyUsage.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Extended Key Usage"}),f.jsx("div",{className:"flex flex-wrap gap-1",children:g.extKeyUsage.map(xG)})]})]})]})}e[0]=o,e[1]=r,e[2]=n,e[3]=s,e[4]=h,e[5]=d}else h=e[4],d=e[5];return d!==Symbol.for("react.early_return_sentinel")?d:h}function xG(t,e){return f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-neutral-200 dark:bg-neutral-600/50 text-neutral-600 dark:text-neutral-400",children:t},e)}function wG(t,e){return f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-neutral-200 dark:bg-neutral-600/50 text-neutral-600 dark:text-neutral-400",children:t},e)}function SG(t,e){return f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-blue-100 dark:bg-blue-500/20 text-blue-600 dark:text-blue-400 font-mono",children:t},e)}function kG(t){const e=He.c(32),{name:n,pem:s}=t,[r,a]=W.useState(!1),[o,c]=W.useState(!1);let h;e[0]!==s?(h=async()=>{await navigator.clipboard.writeText(s),c(!0),setTimeout(()=>c(!1),2e3)},e[0]=s,e[1]=h):h=e[1];const d=h;let g;e[2]!==r?(g=()=>a(!r),e[2]=r,e[3]=g):g=e[3];let m;e[4]===Symbol.for("react.memo_cache_sentinel")?(m=f.jsx(lu,{size:14,className:"text-red-500 dark:text-red-400"}),e[4]=m):m=e[4];let v;e[5]!==n?(v=f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n}),e[5]=n,e[6]=v):v=e[6];let y;e[7]===Symbol.for("react.memo_cache_sentinel")?(y=f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-red-100 dark:bg-red-500/20 text-red-600 dark:text-red-400",children:"Private Key"}),e[7]=y):y=e[7];let x;e[8]!==v?(x=f.jsxs("div",{className:"flex items-center gap-2",children:[m,v,y]}),e[8]=v,e[9]=x):x=e[9];let w;e[10]!==d?(w=H=>{H.stopPropagation(),d()},e[10]=d,e[11]=w):w=e[11];let S;e[12]!==o?(S=o?f.jsx(En,{size:14,className:"text-emerald-500"}):f.jsx(us,{size:14,className:"text-neutral-400"}),e[12]=o,e[13]=S):S=e[13];let k;e[14]!==w||e[15]!==S?(k=f.jsx("button",{onClick:w,className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy private key",children:S}),e[14]=w,e[15]=S,e[16]=k):k=e[16];let C;e[17]!==r?(C=r?f.jsx(Ln,{size:14,className:"text-neutral-400"}):f.jsx(Hs,{size:14,className:"text-neutral-400"}),e[17]=r,e[18]=C):C=e[18];let A;e[19]!==C||e[20]!==k?(A=f.jsxs("div",{className:"flex items-center gap-1",children:[k,C]}),e[19]=C,e[20]=k,e[21]=A):A=e[21];let B;e[22]!==A||e[23]!==g||e[24]!==x?(B=f.jsxs("button",{onClick:g,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[x,A]}),e[22]=A,e[23]=g,e[24]=x,e[25]=B):B=e[25];let M;e[26]!==r||e[27]!==s?(M=r&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:s})}),e[26]=r,e[27]=s,e[28]=M):M=e[28];let T;return e[29]!==B||e[30]!==M?(T=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[B,M]}),e[29]=B,e[30]=M,e[31]=T):T=e[31],T}function HB(t){const e=He.c(32),{name:n,pem:s}=t,[r,a]=W.useState(!1),[o,c]=W.useState(!1);let h;e[0]!==s?(h=async()=>{await navigator.clipboard.writeText(s),c(!0),setTimeout(()=>c(!1),2e3)},e[0]=s,e[1]=h):h=e[1];const d=h;let g;e[2]!==r?(g=()=>a(!r),e[2]=r,e[3]=g):g=e[3];let m;e[4]===Symbol.for("react.memo_cache_sentinel")?(m=f.jsx(lu,{size:14,className:"text-amber-500 dark:text-amber-400"}),e[4]=m):m=e[4];let v;e[5]!==n?(v=f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n}),e[5]=n,e[6]=v):v=e[6];let y;e[7]===Symbol.for("react.memo_cache_sentinel")?(y=f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-amber-100 dark:bg-amber-500/20 text-amber-600 dark:text-amber-400",children:"Certificate Request"}),e[7]=y):y=e[7];let x;e[8]!==v?(x=f.jsxs("div",{className:"flex items-center gap-2",children:[m,v,y]}),e[8]=v,e[9]=x):x=e[9];let w;e[10]!==d?(w=H=>{H.stopPropagation(),d()},e[10]=d,e[11]=w):w=e[11];let S;e[12]!==o?(S=o?f.jsx(En,{size:14,className:"text-emerald-500"}):f.jsx(us,{size:14,className:"text-neutral-400"}),e[12]=o,e[13]=S):S=e[13];let k;e[14]!==w||e[15]!==S?(k=f.jsx("button",{onClick:w,className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy CSR",children:S}),e[14]=w,e[15]=S,e[16]=k):k=e[16];let C;e[17]!==r?(C=r?f.jsx(Ln,{size:14,className:"text-neutral-400"}):f.jsx(Hs,{size:14,className:"text-neutral-400"}),e[17]=r,e[18]=C):C=e[18];let A;e[19]!==C||e[20]!==k?(A=f.jsxs("div",{className:"flex items-center gap-1",children:[k,C]}),e[19]=C,e[20]=k,e[21]=A):A=e[21];let B;e[22]!==A||e[23]!==g||e[24]!==x?(B=f.jsxs("button",{onClick:g,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[x,A]}),e[22]=A,e[23]=g,e[24]=x,e[25]=B):B=e[25];let M;e[26]!==r||e[27]!==s?(M=r&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:s})}),e[26]=r,e[27]=s,e[28]=M):M=e[28];let T;return e[29]!==B||e[30]!==M?(T=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[B,M]}),e[29]=B,e[30]=M,e[31]=T):T=e[31],T}function CG(t){const e=He.c(6),{name:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=f.jsx(lu,{size:14,className:"text-blue-500 dark:text-blue-400"}),e[0]=s):s=e[0];let r;e[1]!==n?(r=f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n}),e[1]=n,e[2]=r):r=e[2];let a;e[3]===Symbol.for("react.memo_cache_sentinel")?(a=f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-blue-100 dark:bg-blue-500/20 text-blue-600 dark:text-blue-400",children:"Public Key"}),e[3]=a):a=e[3];let o;return e[4]!==r?(o=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-3",children:f.jsxs("div",{className:"flex items-center gap-2",children:[s,r,a]})}),e[4]=r,e[5]=o):o=e[5],o}function NG(t){const e=t?.find(m=>m.type==="Approved"),n=t?.find(m=>m.type==="Denied"),s=t?.find(m=>m.type==="Ready"),r=t?.find(m=>m.type==="InvalidRequest"),a=e?.status==="True",o=n?.status==="True",c=s?.status==="True",h=s?.status==="False"||r?.status==="True";let d,g;return c?(d=s?.reason,g=s?.message):h?(d=s?.reason||r?.reason,g=s?.message||r?.message):o?(d=n?.reason,g=n?.message):a&&(d=e?.reason,g=e?.message),{approved:a,denied:o,ready:c,failed:h,reason:d,message:g}}function EG(t){return t.ready?{text:"Issued",level:"success"}:t.failed||t.denied?{text:t.denied?"Denied":"Failed",level:"error"}:t.approved?{text:"Approved",level:"warning"}:{text:"Pending",level:"warning"}}function AG(t){return t.ready?f.jsx(Lr,{size:14,className:"text-emerald-400"}):t.failed||t.denied?f.jsx(bi,{size:14,className:"text-red-400"}):t.approved?f.jsx(gn,{size:14,className:"text-amber-400 animate-spin"}):f.jsx(mo,{size:14,className:"text-amber-400"})}function jG(t){if(!t)return"Default (90d)";const e=t.match(/^(\d+)h/);if(e){const n=parseInt(e[1],10);return n>=8760?`${Math.round(n/8760)}y`:n>=720?`${Math.round(n/720)}mo`:n>=24?`${Math.round(n/24)}d`:`${n}h`}return t}function k3(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function Vb(t){if(!t)return null;try{return atob(t)}catch{return null}}const TG={kinds:["CertificateRequest","CertificateRequests"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata;if(!n)return{sections:[]};const a=NG(s?.conditions),o=EG(a),c=r?.annotations?.["cert-manager.io/certificate-name"],h=r?.annotations?.["cert-manager.io/certificate-revision"],d=[{id:"status",data:{type:"status-cards",items:[{label:"Status",value:o.text,status:o.level,icon:AG(a)},...a.approved?[{label:"Approved",value:"Yes",status:"success",icon:f.jsx(Lr,{size:14,className:"text-emerald-400"})}]:[],...n.isCA?[{label:"Type",value:"CA Certificate",status:"neutral",icon:f.jsx(g_,{size:14,className:"text-purple-400"})}]:[{label:"Type",value:"TLS Certificate",status:"neutral",icon:f.jsx(g_,{size:14,className:"text-blue-400"})}],...h?[{label:"Revision",value:h,status:"neutral"}]:[]]}}];if(c&&d.push({id:"parent-certificate",title:"Parent Certificate",data:{type:"custom",render:()=>f.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(au,{size:14,className:"text-blue-400"}),f.jsx("span",{className:"text-sm text-blue-300",children:c})]})})}}),d.push({id:"details",title:"Request Details",data:{type:"info-grid",columns:2,items:[{label:"Duration",value:jG(n.duration)},...r?.creationTimestamp?[{label:"Created",value:k3(r.creationTimestamp)}]:[],...n.username?[{label:"Requested By",value:n.username.split(":").pop()||n.username}]:[]]}}),d.push({id:"issuer",title:"Issuer",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(hf,{size:14,className:"text-purple-400"}),f.jsx("span",{className:"text-sm font-medium text-purple-300",children:n.issuerRef.kind??"Issuer"})]}),f.jsx("div",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:n.issuerRef.name}),n.issuerRef.group&&f.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:n.issuerRef.group})]})}}),(n.username||n.groups?.length)&&d.push({id:"requester",title:"Requester",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(sT,{size:14,className:"text-neutral-600 dark:text-neutral-400"}),f.jsx("span",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Identity"})]}),n.username&&f.jsxs("div",{className:"text-xs text-neutral-700 dark:text-neutral-400 mb-1",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"User:"})," ",f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-mono",children:n.username})]}),n.groups&&n.groups.length>0&&f.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:n.groups.map((g,m)=>f.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-neutral-200 dark:bg-neutral-700 text-neutral-700 dark:text-neutral-400",children:g},m))})]})}}),n.usages?.length&&d.push({id:"usages",title:"Key Usages",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.usages.map((g,m)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-neutral-200 dark:bg-neutral-700 text-neutral-700 dark:text-neutral-300",children:g},m))})}}),s?.certificate){const g=Vb(s.certificate),m=s.ca?Vb(s.ca):null;d.push({id:"certificate-issued",title:"Certificate",data:{type:"custom",render:()=>f.jsxs("div",{className:"space-y-3",children:[g&&f.jsx(cw,{name:"Issued Certificate",pem:g}),m&&f.jsx(cw,{name:"CA Certificate",pem:m})]})}})}if(n.request){const g=Vb(n.request);g&&d.push({id:"csr",title:"Certificate Signing Request",data:{type:"custom",render:()=>f.jsx(HB,{name:"Certificate Request",pem:g})}})}return s?.failureTime&&d.push({id:"failure",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 text-red-400",children:[f.jsx(ll,{size:14}),f.jsx("span",{className:"text-sm font-medium",children:"Failed"})]}),f.jsxs("div",{className:"text-xs text-neutral-500 mt-1",children:["Failure time: ",k3(s.failureTime)]}),a.message&&f.jsx("div",{className:"text-xs text-red-400/70 mt-1",children:a.message})]})}}),s?.conditions&&s.conditions.length>0&&d.push({id:"conditions",title:"Conditions",data:{type:"conditions",items:s.conditions.map(g=>({type:g.type??"",status:g.status??"Unknown",reason:g.reason,message:g.message}))}}),{sections:d}}};function UB(t){if(t)return t instanceof Date?t.toISOString():t}function C3(t){const e=UB(t);return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"N/A"}function N3(t){const e=UB(t);if(!e)return"N/A";const n=new Date(e),r=new Date().getTime()-n.getTime(),a=Math.floor(r/1e3),o=Math.floor(a/60),c=Math.floor(o/60),h=Math.floor(c/24);return h>0?`${h}d ago`:c>0?`${c}h ago`:o>0?`${o}m ago`:a>0?`${a}s ago`:"just now"}const OG={kinds:["Event","Events"],adapt(t,e){const n=e.metadata,s=e.involvedObject,r=e.source,a=e.type==="Warning",o=e.count??1,c=e.firstTimestamp||e.eventTime||n?.creationTimestamp,h=e.lastTimestamp||e.eventTime,d=[{id:"status",data:{type:"status-cards",items:[{label:"Type",value:e.type||"Normal",status:a?"warning":"success",icon:a?f.jsx(i0,{size:14,className:"text-amber-400"}):f.jsx(n7,{size:14,className:"text-emerald-400"})},{label:"Reason",value:e.reason||"Unknown",status:"neutral"},...o>1?[{label:"Count",value:o,status:"neutral",icon:f.jsx(ZI,{size:14,className:"text-blue-400"})}]:[]]}}];return e.message&&d.push({id:"message",title:"Message",data:{type:"custom",render:()=>f.jsx("div",{className:`p-3 rounded-lg border ${a?"bg-amber-500/10 border-amber-500/30":"bg-neutral-100 dark:bg-neutral-900/50 border-neutral-200 dark:border-neutral-700"}`,children:f.jsx("p",{className:"text-sm text-neutral-700 dark:text-neutral-300 whitespace-pre-wrap",children:e.message})})}}),s&&s.name&&d.push({id:"involved-object",title:"Involved Object",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(Z7,{size:14,className:"text-blue-400"}),f.jsx("span",{className:"text-sm font-medium text-blue-300",children:s.kind||"Resource"})]}),f.jsxs("div",{className:"space-y-1 text-xs",children:[f.jsxs("div",{className:"text-neutral-300",children:[f.jsx("span",{className:"text-neutral-500",children:"Name: "}),f.jsx("span",{className:"text-cyan-400 font-mono",children:s.name})]}),s.namespace&&f.jsxs("div",{className:"text-neutral-300",children:[f.jsx("span",{className:"text-neutral-500",children:"Namespace: "}),f.jsx("span",{className:"text-purple-400",children:s.namespace})]}),s.fieldPath&&f.jsxs("div",{className:"text-neutral-300",children:[f.jsx("span",{className:"text-neutral-500",children:"Field: "}),f.jsx("span",{className:"text-neutral-400 font-mono",children:s.fieldPath})]}),s.apiVersion&&f.jsxs("div",{className:"text-neutral-300",children:[f.jsx("span",{className:"text-neutral-500",children:"API Version: "}),f.jsx("span",{className:"text-neutral-400",children:s.apiVersion})]})]})]})}}),d.push({id:"timestamps",title:"Timestamps",data:{type:"custom",render:()=>f.jsxs("div",{className:"space-y-2",children:[c&&f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx(Jj,{size:14,className:"text-neutral-500"}),f.jsx("span",{className:"text-neutral-500",children:"First seen:"}),f.jsx("span",{className:"text-neutral-300",children:C3(c)}),f.jsxs("span",{className:"text-neutral-500",children:["(",N3(c),")"]})]}),h&&o>1&&f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx(gn,{size:14,className:"text-neutral-500"}),f.jsx("span",{className:"text-neutral-500",children:"Last seen:"}),f.jsx("span",{className:"text-neutral-300",children:C3(h)}),f.jsxs("span",{className:"text-neutral-500",children:["(",N3(h),")"]})]})]})}}),r&&(r.component||r.host)&&d.push({id:"source",title:"Source",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(mi,{size:14,className:"text-neutral-400"}),f.jsx("span",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Event Source"})]}),f.jsxs("div",{className:"space-y-1 text-xs",children:[r.component&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-300",children:[f.jsx("span",{className:"text-neutral-500",children:"Component: "}),f.jsx("span",{className:"text-cyan-400",children:r.component})]}),r.host&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-300",children:[f.jsx("span",{className:"text-neutral-500",children:"Host: "}),f.jsx("span",{className:"text-neutral-400 font-mono",children:r.host})]})]})]})}}),(e.reportingComponent||e.reportingInstance)&&d.push({id:"reporting",title:"Reporting",data:{type:"info-grid",columns:2,items:[...e.reportingComponent?[{label:"Component",value:e.reportingComponent}]:[],...e.reportingInstance?[{label:"Instance",value:e.reportingInstance}]:[],...e.action?[{label:"Action",value:e.action}]:[]]}}),e.related&&e.related.name&&e.related.name!==s?.name&&d.push({id:"related",title:"Related Object",data:{type:"info-grid",columns:2,items:[{label:"Kind",value:e.related.kind||"Unknown"},{label:"Name",value:e.related.name},...e.related.namespace?[{label:"Namespace",value:e.related.namespace}]:[]]}}),{sections:d}}};function RG(t){switch(t){case"LoadBalancer":return{label:"LoadBalancer",status:"success",icon:f.jsx(Qi,{size:14,className:"text-emerald-400"})};case"NodePort":return{label:"NodePort",status:"warning",icon:f.jsx(mi,{size:14,className:"text-amber-400"})};case"ExternalName":return{label:"ExternalName",status:"neutral",icon:f.jsx(tS,{size:14,className:"text-purple-400"})};default:return{label:t||"ClusterIP",status:"neutral",icon:f.jsx(ur,{size:14,className:"text-blue-400"})}}}const BG={kinds:["Service","Services"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=RG(n.type),a=n.type==="LoadBalancer",o=s?.loadBalancer?.ingress,c=a&&o&&o.length>0,h=[{id:"status",data:{type:"status-cards",items:[{label:"Type",value:r.label,status:r.status,icon:r.icon},...n.clusterIP&&n.clusterIP!=="None"?[{label:"Cluster IP",value:n.clusterIP,status:"neutral",icon:f.jsx(ur,{size:14,className:"text-blue-400"})}]:[],...n.clusterIP==="None"?[{label:"Cluster IP",value:"Headless",status:"neutral",icon:f.jsx(ur,{size:14,className:"text-neutral-400"})}]:[],...n.externalName?[{label:"External Name",value:n.externalName,status:"neutral",icon:f.jsx(tS,{size:14,className:"text-purple-400"})}]:[]]}}];return n.ports&&n.ports.length>0&&h.push({id:"ports",title:"Ports",data:{type:"custom",render:()=>f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsxs("table",{className:"w-full text-xs",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700",children:[f.jsx("th",{className:"pb-2 text-left text-neutral-500 font-medium",children:"Name"}),f.jsx("th",{className:"pb-2 text-left text-neutral-500 font-medium",children:"Protocol"}),f.jsx("th",{className:"pb-2 text-right text-neutral-500 font-medium",children:"Port"}),f.jsx("th",{className:"pb-2 text-right text-neutral-500 font-medium",children:"Target"}),f.jsx("th",{className:"pb-2 text-right text-neutral-500 font-medium",children:"NodePort"})]})}),f.jsx("tbody",{children:n.ports.map((g,m)=>f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-2 text-neutral-900 dark:text-neutral-300",children:g.name||f.jsx("span",{className:"text-neutral-400 italic",children:"unnamed"})}),f.jsx("td",{className:"py-2",children:f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-neutral-200 dark:bg-neutral-700 text-neutral-600 dark:text-neutral-400",children:g.protocol||"TCP"})}),f.jsx("td",{className:"py-2 text-right font-mono text-neutral-700 dark:text-neutral-300",children:g.port}),f.jsx("td",{className:"py-2 text-right font-mono text-neutral-700 dark:text-neutral-300",children:g.targetPort||f.jsx("span",{className:"text-neutral-400",children:""})}),f.jsx("td",{className:"py-2 text-right font-mono text-amber-500 dark:text-amber-400",children:g.nodePort||f.jsx("span",{className:"text-neutral-400",children:""})})]},m))})]})})}}),a&&h.push({id:"loadbalancer",title:"Load Balancer",data:{type:"custom",render:()=>f.jsx("div",{className:`rounded-lg p-3 border ${c?"bg-emerald-500/10 border-emerald-500/30":"bg-amber-500/10 border-amber-500/30"}`,children:c?f.jsx("div",{className:"space-y-2",children:o.map((g,m)=>f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Qi,{size:14,className:"text-emerald-400"}),f.jsx("span",{className:"text-sm font-mono text-emerald-300",children:g.ip||g.hostname||"N/A"})]},m))}):f.jsxs("div",{className:"flex items-center gap-2 text-amber-400",children:[f.jsx(Qi,{size:14}),f.jsx("span",{className:"text-sm",children:"Pending external IP assignment..."})]})})}}),n.externalIPs&&n.externalIPs.length>0&&h.push({id:"external-ips",title:"External IPs",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.externalIPs.map((g,m)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-purple-500/20 text-purple-300 font-mono",children:g},m))})}}),n.selector&&Object.keys(n.selector).length>0&&h.push({id:"selector",data:{type:"labels",labels:n.selector,title:"Selector"}}),(n.externalTrafficPolicy||n.internalTrafficPolicy||n.sessionAffinity!=="None")&&h.push({id:"traffic",title:"Traffic Configuration",data:{type:"info-grid",columns:2,items:[...n.externalTrafficPolicy?[{label:"External Traffic",value:n.externalTrafficPolicy,color:n.externalTrafficPolicy==="Local"?"text-amber-400":void 0}]:[],...n.internalTrafficPolicy?[{label:"Internal Traffic",value:n.internalTrafficPolicy}]:[],...n.sessionAffinity&&n.sessionAffinity!=="None"?[{label:"Session Affinity",value:n.sessionAffinity,color:"text-purple-400"}]:[],...n.sessionAffinityConfig?.clientIP?.timeoutSeconds?[{label:"Affinity Timeout",value:`${n.sessionAffinityConfig.clientIP.timeoutSeconds}s`}]:[],...n.healthCheckNodePort?[{label:"Health Check Port",value:n.healthCheckNodePort}]:[]]}}),a&&(n.loadBalancerIP||n.loadBalancerSourceRanges?.length||n.loadBalancerClass)&&h.push({id:"lb-config",title:"Load Balancer Configuration",data:{type:"custom",render:()=>f.jsxs("div",{className:"space-y-2",children:[n.loadBalancerIP&&f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx("span",{className:"text-neutral-500",children:"Requested IP:"}),f.jsx("span",{className:"text-neutral-300 font-mono",children:n.loadBalancerIP})]}),n.loadBalancerClass&&f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx("span",{className:"text-neutral-500",children:"Class:"}),f.jsx("span",{className:"text-neutral-300",children:n.loadBalancerClass})]}),n.loadBalancerSourceRanges&&n.loadBalancerSourceRanges.length>0&&f.jsxs("div",{className:"text-sm",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(fg,{size:14,className:"text-neutral-500"}),f.jsx("span",{className:"text-neutral-500",children:"Source Ranges:"})]}),f.jsx("div",{className:"flex flex-wrap gap-1 ml-5",children:n.loadBalancerSourceRanges.map((g,m)=>f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-amber-500/20 text-amber-300 font-mono",children:g},m))})]}),n.allocateLoadBalancerNodePorts===!1&&f.jsx("div",{className:"text-xs text-neutral-500",children:"NodePort allocation disabled"})]})}}),s?.conditions&&s.conditions.length>0&&h.push({id:"conditions",title:"Conditions",data:{type:"conditions",items:s.conditions.map(g=>({type:g.type,status:g.status,reason:g.reason,message:g.message}))}}),{sections:h}}};async function MG(t){try{const e=atob(t),n=atob(e),s=new Uint8Array(n.length);for(let v=0;v<n.length;v++)s[v]=n.charCodeAt(v);const r=new DecompressionStream("gzip"),a=r.writable.getWriter();a.write(s),a.close();const o=r.readable.getReader(),c=[];for(;;){const{done:v,value:y}=await o.read();if(v)break;c.push(y)}const h=c.reduce((v,y)=>v+y.length,0),d=new Uint8Array(h);let g=0;for(const v of c)d.set(v,g),g+=v.length;const m=new TextDecoder().decode(d);return JSON.parse(m)}catch(e){return console.error("Failed to decode Helm release:",e),null}}function DG(t){switch(t?.toLowerCase()){case"deployed":return"text-emerald-400";case"failed":return"text-red-400";case"pending-install":case"pending-upgrade":case"pending-rollback":return"text-yellow-400";case"uninstalling":case"superseded":return"text-neutral-400";default:return"text-neutral-300"}}function LG(t){const e=He.c(52),{encoded:n}=t,[s,r]=W.useState(null),[a,o]=W.useState(null),[c,h]=W.useState(!0),[d,g]=W.useState(!1),[m,v]=W.useState(!1),[y,x]=W.useState(!1),[w,S]=W.useState(null);let k,C;e[0]!==n?(k=()=>{MG(n).then(we=>{r(we),h(!1)}).catch(()=>{o("Failed to decode Helm release data"),h(!1)})},C=[n],e[0]=n,e[1]=k,e[2]=C):(k=e[1],C=e[2]),W.useEffect(k,C);let A;e[3]===Symbol.for("react.memo_cache_sentinel")?(A=async(we,Ee)=>{await navigator.clipboard.writeText(Ee),S(we),setTimeout(()=>S(null),2e3)},e[3]=A):A=e[3];const B=A;if(c){let we;return e[4]===Symbol.for("react.memo_cache_sentinel")?(we=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Decoding Helm release..."})}),e[4]=we):we=e[4],we}if(a||!s){const we=a||"Failed to decode release";let Ee;return e[5]!==we?(Ee=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("span",{className:"text-xs text-red-600 dark:text-red-400",children:we})}),e[5]=we,e[6]=Ee):Ee=e[6],Ee}const M=s.chart?.metadata,T=s.info;let H;e[7]!==M?(H=M?.description&&f.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:M.description}),e[7]=M,e[8]=H):H=e[8];let $;e[9]===Symbol.for("react.memo_cache_sentinel")?($=f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 dark:text-neutral-500 whitespace-nowrap",children:"Release"}),e[9]=$):$=e[9];const G=s.name||"Unknown";let z;e[10]!==G?(z=f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[$,f.jsx("td",{className:"py-1.5 text-neutral-900 dark:text-neutral-300",children:G})]}),e[10]=G,e[11]=z):z=e[11];let Q;e[12]===Symbol.for("react.memo_cache_sentinel")?(Q=f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 dark:text-neutral-500 whitespace-nowrap",children:"Revision"}),e[12]=Q):Q=e[12];const F=s.version||1;let K;e[13]!==F?(K=f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[Q,f.jsx("td",{className:"py-1.5 text-neutral-900 dark:text-neutral-300",children:F})]}),e[13]=F,e[14]=K):K=e[14];let J;e[15]===Symbol.for("react.memo_cache_sentinel")?(J=f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 dark:text-neutral-500 whitespace-nowrap",children:"Status"}),e[15]=J):J=e[15];const q=T?.status;let P;e[16]!==q?(P=DG(q),e[16]=q,e[17]=P):P=e[17];const X=`py-1.5 font-medium ${P}`,U=T?.status||"Unknown";let D;e[18]!==X||e[19]!==U?(D=f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[J,f.jsx("td",{className:X,children:U})]}),e[18]=X,e[19]=U,e[20]=D):D=e[20];let O;e[21]!==M?(O=M&&f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 dark:text-neutral-500 whitespace-nowrap",children:"Chart"}),f.jsxs("td",{className:"py-1.5 text-neutral-900 dark:text-neutral-300",children:[M.name,"-",M.version]})]}),e[21]=M,e[22]=O):O=e[22];let R;e[23]!==M?(R=M?.appVersion&&f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 dark:text-neutral-500 whitespace-nowrap",children:"App Version"}),f.jsx("td",{className:"py-1.5 text-cyan-600 dark:text-cyan-400",children:M.appVersion})]}),e[23]=M,e[24]=R):R=e[24];let V;e[25]!==T?(V=T?.last_deployed&&f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 dark:text-neutral-500 whitespace-nowrap",children:"Last Deployed"}),f.jsx("td",{className:"py-1.5 text-neutral-900 dark:text-neutral-300",children:new Date(T.last_deployed).toLocaleString()})]}),e[25]=T,e[26]=V):V=e[26];let E;e[27]!==K||e[28]!==D||e[29]!==O||e[30]!==R||e[31]!==V||e[32]!==z?(E=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("table",{className:"w-full text-xs",children:f.jsxs("tbody",{children:[z,K,D,O,R,V]})})}),e[27]=K,e[28]=D,e[29]=O,e[30]=R,e[31]=V,e[32]=z,e[33]=E):E=e[33];let Z;e[34]!==w||e[35]!==s.config||e[36]!==d?(Z=s.config&&Object.keys(s.config).length>0&&f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:()=>g(!d),className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(hf,{size:14,className:"text-amber-500 dark:text-amber-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:"User Values"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:we=>{we.stopPropagation(),B("values",JSON.stringify(s.config,null,2))},className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy values",children:w==="values"?f.jsx(En,{size:14,className:"text-emerald-500"}):f.jsx(us,{size:14,className:"text-neutral-400"})}),d?f.jsx(Ln,{size:14,className:"text-neutral-400"}):f.jsx(Hs,{size:14,className:"text-neutral-400"})]})]}),d&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:JSON.stringify(s.config,null,2)})})]}),e[34]=w,e[35]=s.config,e[36]=d,e[37]=Z):Z=e[37];let ue;e[38]!==w||e[39]!==T||e[40]!==y?(ue=T?.notes&&f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:()=>x(!y),className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(ea,{size:14,className:"text-blue-500 dark:text-blue-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:"Release Notes"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:we=>{we.stopPropagation(),B("notes",T.notes||"")},className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy notes",children:w==="notes"?f.jsx(En,{size:14,className:"text-emerald-500"}):f.jsx(us,{size:14,className:"text-neutral-400"})}),y?f.jsx(Ln,{size:14,className:"text-neutral-400"}):f.jsx(Hs,{size:14,className:"text-neutral-400"})]})]}),y&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:T.notes})})]}),e[38]=w,e[39]=T,e[40]=y,e[41]=ue):ue=e[41];let ne;e[42]!==w||e[43]!==s.manifest||e[44]!==m?(ne=s.manifest&&f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:()=>v(!m),className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(ea,{size:14,className:"text-purple-500 dark:text-purple-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:"Rendered Manifest"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:we=>{we.stopPropagation(),B("manifest",s.manifest||"")},className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy manifest",children:w==="manifest"?f.jsx(En,{size:14,className:"text-emerald-500"}):f.jsx(us,{size:14,className:"text-neutral-400"})}),m?f.jsx(Ln,{size:14,className:"text-neutral-400"}):f.jsx(Hs,{size:14,className:"text-neutral-400"})]})]}),m&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-96 overflow-y-auto",children:s.manifest})})]}),e[42]=w,e[43]=s.manifest,e[44]=m,e[45]=ne):ne=e[45];let de;return e[46]!==E||e[47]!==Z||e[48]!==ue||e[49]!==ne||e[50]!==H?(de=f.jsxs("div",{className:"space-y-4",children:[H,E,Z,ue,ne]}),e[46]=E,e[47]=Z,e[48]=ue,e[49]=ne,e[50]=H,e[51]=de):de=e[51],de}function IG(t){try{const e=atob(t);return JSON.parse(e)}catch{return null}}function PG(t){try{const e=atob(t),[n,...s]=e.split(":");return{username:n,password:s.join(":")}}catch{return null}}function zG(t){const e=He.c(21),{encoded:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=new Set,e[0]=s):s=e[0];const[r,a]=W.useState(s),[o,c]=W.useState(null),[h,d]=W.useState(!1);let g,m,v,y,x;if(e[1]!==o||e[2]!==n||e[3]!==r){x=Symbol.for("react.early_return_sentinel");e:{const k=IG(n);m=k?JSON.stringify(k,null,2):null;let C;e[9]===Symbol.for("react.memo_cache_sentinel")?(C=async(M,T)=>{await navigator.clipboard.writeText(T),c(M),setTimeout(()=>c(null),2e3)},e[9]=C):C=e[9],g=C;const A=M=>{a(T=>{const H=new Set(T);return H.has(M)?H.delete(M):H.add(M),H})};if(!k||!k.auths){let M;e[10]===Symbol.for("react.memo_cache_sentinel")?(M=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("span",{className:"text-xs text-red-600 dark:text-red-400",children:"Failed to decode Docker config"})}),e[10]=M):M=e[10],x=M;break e}const B=Object.entries(k.auths);if(B.length===0){let M;e[11]===Symbol.for("react.memo_cache_sentinel")?(M=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"No registries configured"})}),e[11]=M):M=e[11],x=M;break e}v="space-y-3",y=B.map(M=>{const[T,H]=M;let $=H.username,G=H.password;if(!$&&H.auth){const Q=PG(H.auth);Q&&($=Q.username,G=Q.password)}const z=r.has(T);return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[f.jsx(mi,{size:14,className:"text-blue-500 dark:text-blue-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-900 dark:text-neutral-200 break-all",children:T})]}),f.jsx("table",{className:"w-full text-xs",children:f.jsxs("tbody",{children:[$&&f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 whitespace-nowrap w-1",children:f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(sT,{size:12}),"Username"]})}),f.jsx("td",{className:"py-1.5 text-neutral-900 dark:text-neutral-300",children:$}),f.jsx("td",{className:"py-1.5",children:f.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[f.jsx("div",{className:"w-7"}),f.jsx("button",{onClick:()=>g(`${T}-username`,$),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:"Copy username",children:o===`${T}-username`?f.jsx(En,{size:12,className:"text-emerald-500"}):f.jsx(us,{size:12,className:"text-neutral-400"})})]})})]}),G&&f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 whitespace-nowrap w-1",children:f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(hf,{size:12}),"Password"]})}),f.jsx("td",{className:"py-1.5 font-mono",children:z?f.jsx("span",{className:"text-neutral-900 dark:text-neutral-300 break-all",children:G}):f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:""})}),f.jsx("td",{className:"py-1.5",children:f.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[f.jsx("button",{onClick:()=>A(T),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:z?"Hide password":"Reveal password",children:z?f.jsx(nS,{size:12,className:"text-neutral-400"}):f.jsx(sS,{size:12,className:"text-neutral-400"})}),f.jsx("button",{onClick:()=>g(`${T}-password`,G),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:"Copy password",children:o===`${T}-password`?f.jsx(En,{size:12,className:"text-emerald-500"}):f.jsx(us,{size:12,className:"text-neutral-400"})})]})})]}),H.email&&f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 whitespace-nowrap w-1",children:f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(p7,{size:12}),"Email"]})}),f.jsx("td",{className:"py-1.5 text-neutral-900 dark:text-neutral-300",children:H.email}),f.jsx("td",{className:"py-1.5",children:f.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[f.jsx("div",{className:"w-7"}),f.jsx("button",{onClick:()=>g(`${T}-email`,H.email),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:"Copy email",children:o===`${T}-email`?f.jsx(En,{size:12,className:"text-emerald-500"}):f.jsx(us,{size:12,className:"text-neutral-400"})})]})})]})]})})]},T)})}e[1]=o,e[2]=n,e[3]=r,e[4]=g,e[5]=m,e[6]=v,e[7]=y,e[8]=x}else g=e[4],m=e[5],v=e[6],y=e[7],x=e[8];if(x!==Symbol.for("react.early_return_sentinel"))return x;let w;e[12]!==o||e[13]!==g||e[14]!==m||e[15]!==h?(w=m&&f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:()=>d(!h),className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(ea,{size:14,className:"text-purple-500 dark:text-purple-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:"Docker Config"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:k=>{k.stopPropagation(),g("raw",m)},className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy JSON",children:o==="raw"?f.jsx(En,{size:14,className:"text-emerald-500"}):f.jsx(us,{size:14,className:"text-neutral-400"})}),h?f.jsx(Ln,{size:14,className:"text-neutral-400"}):f.jsx(Hs,{size:14,className:"text-neutral-400"})]})]}),h&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:m})})]}),e[12]=o,e[13]=g,e[14]=m,e[15]=h,e[16]=w):w=e[16];let S;return e[17]!==v||e[18]!==y||e[19]!==w?(S=f.jsxs("div",{className:v,children:[y,w]}),e[17]=v,e[18]=y,e[19]=w,e[20]=S):S=e[20],S}function $G(t){try{return atob(t)}catch{return null}}function HG(t){let e=0;for(let n=0;n<Math.min(t.length,1e3);n++){const s=t.charCodeAt(n);(s===0||s<32&&s!==9&&s!==10&&s!==13)&&e++}return e>t.length*.1}function E3(t){return t.replace(/^[\r\n]+|[\r\n]+$/g,"").includes(`
`)}function UG(t){return!t.endsWith(".crt")&&!t.endsWith(".pem")&&t!=="ca.crt"&&t!=="tls.crt"&&t!=="namespace"}function VG(t){const e=He.c(12),{entries:n}=t,[s,r]=W.useState(null);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=new Set,e[0]=a):a=e[0];const[o,c]=W.useState(a);let h;e[1]===Symbol.for("react.memo_cache_sentinel")?(h=async(x,w)=>{await navigator.clipboard.writeText(w),r(x),setTimeout(()=>r(null),2e3)},e[1]=h):h=e[1];const d=h;let g;e[2]===Symbol.for("react.memo_cache_sentinel")?(g=x=>{c(w=>{const S=new Set(w);return S.has(x)?S.delete(x):S.add(x),S})},e[2]=g):g=e[2];const m=g;let v;if(e[3]!==s||e[4]!==n||e[5]!==o){let x;e[7]!==s||e[8]!==o?(x=w=>{const{key:S,decoded:k,isSensitive:C}=w;return f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 whitespace-nowrap",children:S}),f.jsx("td",{className:"py-1.5 font-mono break-all",children:C&&!o.has(S)?f.jsx("span",{className:"text-neutral-400",children:""}):f.jsx("span",{className:"text-neutral-900 dark:text-neutral-300",children:k})}),f.jsx("td",{className:"py-1.5 w-1",children:f.jsxs("div",{className:"flex items-center gap-1",children:[C?f.jsx("button",{onClick:()=>m(S),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:o.has(S)?"Hide value":"Reveal value",children:o.has(S)?f.jsx(nS,{size:12,className:"text-neutral-400"}):f.jsx(sS,{size:12,className:"text-neutral-400"})}):f.jsx("div",{className:"w-7"}),f.jsx("button",{onClick:()=>d(S,k),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:"Copy value",children:s===S?f.jsx(En,{size:12,className:"text-emerald-500"}):f.jsx(us,{size:12,className:"text-neutral-400"})})]})})]},S)},e[7]=s,e[8]=o,e[9]=x):x=e[9],v=n.map(x),e[3]=s,e[4]=n,e[5]=o,e[6]=v}else v=e[6];let y;return e[10]!==v?(y=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("table",{className:"w-full text-xs",children:f.jsx("tbody",{children:v})})}),e[10]=v,e[11]=y):y=e[11],y}function FG(t){const e=He.c(35),{name:n,decoded:s,isSensitive:r}=t,[a,o]=W.useState(!1),[c,h]=W.useState(!1),[d,g]=W.useState(!1);let m;e[0]!==s?(m=async()=>{await navigator.clipboard.writeText(s),g(!0),setTimeout(()=>g(!1),2e3)},e[0]=s,e[1]=m):m=e[1];const v=m;let y;e[2]!==a?(y=()=>o(!a),e[2]=a,e[3]=y):y=e[3];let x;e[4]===Symbol.for("react.memo_cache_sentinel")?(x=f.jsx(hf,{size:14,className:"text-amber-500 dark:text-amber-400"}),e[4]=x):x=e[4];let w;e[5]!==n?(w=f.jsxs("div",{className:"flex items-center gap-2",children:[x,f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n})]}),e[5]=n,e[6]=w):w=e[6];let S;e[7]!==v?(S=G=>{G.stopPropagation(),v()},e[7]=v,e[8]=S):S=e[8];let k;e[9]!==d?(k=d?f.jsx(En,{size:14,className:"text-emerald-500"}):f.jsx(us,{size:14,className:"text-neutral-400"}),e[9]=d,e[10]=k):k=e[10];let C;e[11]!==S||e[12]!==k?(C=f.jsx("button",{onClick:S,className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy value",children:k}),e[11]=S,e[12]=k,e[13]=C):C=e[13];let A;e[14]!==r||e[15]!==c?(A=r&&f.jsx("button",{onClick:G=>{G.stopPropagation(),h(!c)},className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:c?"Hide value":"Reveal value",children:c?f.jsx(nS,{size:14,className:"text-neutral-400"}):f.jsx(sS,{size:14,className:"text-neutral-400"})}),e[14]=r,e[15]=c,e[16]=A):A=e[16];let B;e[17]!==a?(B=a?f.jsx(Ln,{size:14,className:"text-neutral-400"}):f.jsx(Hs,{size:14,className:"text-neutral-400"}),e[17]=a,e[18]=B):B=e[18];let M;e[19]!==C||e[20]!==A||e[21]!==B?(M=f.jsxs("div",{className:"flex items-center gap-1",children:[C,A,B]}),e[19]=C,e[20]=A,e[21]=B,e[22]=M):M=e[22];let T;e[23]!==M||e[24]!==y||e[25]!==w?(T=f.jsxs("button",{onClick:y,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[w,M]}),e[23]=M,e[24]=y,e[25]=w,e[26]=T):T=e[26];let H;e[27]!==s||e[28]!==a||e[29]!==r||e[30]!==c?(H=a&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:r&&!c?f.jsx("span",{className:"text-xs text-neutral-400 font-mono",children:""}):f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:s})}),e[27]=s,e[28]=a,e[29]=r,e[30]=c,e[31]=H):H=e[31];let $;return e[32]!==T||e[33]!==H?($=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[T,H]}),e[32]=T,e[33]=H,e[34]=$):$=e[34],$}const qG={kinds:["Secret","Secrets"],adapt(t,e){const n=e.data||{},s=e.stringData||{},r=[...new Set([...Object.keys(n),...Object.keys(s)])];if(e.type==="helm.sh/release.v1"&&n.release)return{sections:[{id:"helm-release",data:{type:"custom",render:()=>f.jsx(LG,{encoded:n.release})}}]};if(e.type==="kubernetes.io/dockerconfigjson"&&n[".dockerconfigjson"])return{sections:[{id:"docker-config",data:{type:"custom",render:()=>f.jsx(zG,{encoded:n[".dockerconfigjson"]})}}]};const a=[];e.immutable&&a.push({id:"status",data:{type:"status-cards",items:[{label:"Immutable",value:"Yes",status:"warning",icon:f.jsx(fg,{size:14,className:"text-amber-400"})}]}});const o=[],c=[],h=[],d=[],g=[],m=[],v=[];return r.forEach(y=>{const x=n[y]||btoa(s[y]||""),w=$G(x),S=UG(y);if(!w)h.push(y);else if(HG(w))h.push(y);else{const k=bG(w);if(k)switch(k.type){case"certificate":d.push({key:y,pem:k.content});break;case"private-key":g.push({key:y,pem:k.content});break;case"public-key":m.push(y);break;case"csr":v.push({key:y,pem:k.content});break;default:E3(w)?c.push({key:y,decoded:w,isSensitive:S}):o.push({key:y,decoded:w,isSensitive:S})}else E3(w)?c.push({key:y,decoded:w,isSensitive:S}):o.push({key:y,decoded:w,isSensitive:S})}}),d.length>0&&a.push({id:"certificates",title:"Certificates",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:d.map(({key:y,pem:x})=>f.jsx(cw,{name:y,pem:x},y))})}}),g.length>0&&a.push({id:"private-keys",title:"Private Keys",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:g.map(({key:y,pem:x})=>f.jsx(kG,{name:y,pem:x},y))})}}),m.length>0&&a.push({id:"public-keys",title:"Public Keys",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:m.map(y=>f.jsx(CG,{name:y},y))})}}),v.length>0&&a.push({id:"csrs",title:"Certificate Requests",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:v.map(({key:y,pem:x})=>f.jsx(HB,{name:y,pem:x},y))})}}),o.length>0&&a.push({id:"data-simple",title:"Data",data:{type:"custom",render:()=>f.jsx(VG,{entries:o})}}),c.length>0&&a.push({id:"data-multiline",title:o.length>0?"Files":"Data",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:c.map(({key:y,decoded:x,isSensitive:w})=>f.jsx(FG,{name:y,decoded:x,isSensitive:w},y))})}}),h.length>0&&a.push({id:"binary-data",title:"Binary Data",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:h.map(y=>f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-3",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(ea,{size:14,className:"text-purple-500 dark:text-purple-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:y}),f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-purple-100 dark:bg-purple-500/20 text-purple-600 dark:text-purple-400",children:"Binary"})]})},y))})}}),{sections:a}}};function KG(t){return t.includes(`
`)}function WG(t){const e=He.c(29),{name:n,value:s}=t,[r,a]=W.useState(!1),[o,c]=W.useState(!1);let h;e[0]!==s?(h=async()=>{await navigator.clipboard.writeText(s),c(!0),setTimeout(()=>c(!1),2e3)},e[0]=s,e[1]=h):h=e[1];const d=h;let g;e[2]!==r?(g=()=>a(!r),e[2]=r,e[3]=g):g=e[3];let m;e[4]===Symbol.for("react.memo_cache_sentinel")?(m=f.jsx(ea,{size:14,className:"text-blue-500 dark:text-blue-400"}),e[4]=m):m=e[4];let v;e[5]!==n?(v=f.jsxs("div",{className:"flex items-center gap-2",children:[m,f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n})]}),e[5]=n,e[6]=v):v=e[6];let y;e[7]!==d?(y=M=>{M.stopPropagation(),d()},e[7]=d,e[8]=y):y=e[8];let x;e[9]!==o?(x=o?f.jsx(En,{size:14,className:"text-emerald-500"}):f.jsx(us,{size:14,className:"text-neutral-400"}),e[9]=o,e[10]=x):x=e[10];let w;e[11]!==y||e[12]!==x?(w=f.jsx("button",{onClick:y,className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy value",children:x}),e[11]=y,e[12]=x,e[13]=w):w=e[13];let S;e[14]!==r?(S=r?f.jsx(Ln,{size:14,className:"text-neutral-400"}):f.jsx(Hs,{size:14,className:"text-neutral-400"}),e[14]=r,e[15]=S):S=e[15];let k;e[16]!==w||e[17]!==S?(k=f.jsxs("div",{className:"flex items-center gap-1",children:[w,S]}),e[16]=w,e[17]=S,e[18]=k):k=e[18];let C;e[19]!==g||e[20]!==v||e[21]!==k?(C=f.jsxs("button",{onClick:g,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[v,k]}),e[19]=g,e[20]=v,e[21]=k,e[22]=C):C=e[22];let A;e[23]!==r||e[24]!==s?(A=r&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-700 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:s})}),e[23]=r,e[24]=s,e[25]=A):A=e[25];let B;return e[26]!==C||e[27]!==A?(B=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[C,A]}),e[26]=C,e[27]=A,e[28]=B):B=e[28],B}function GG(t){const e=He.c(8),{entries:n}=t,[s,r]=W.useState(null);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=async(d,g)=>{await navigator.clipboard.writeText(g),r(d),setTimeout(()=>r(null),2e3)},e[0]=a):a=e[0];const o=a;let c;if(e[1]!==s||e[2]!==n){let d;e[4]!==s?(d=g=>{const[m,v]=g;return f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 whitespace-nowrap",children:m}),f.jsx("td",{className:"py-1.5 font-mono break-all text-neutral-900 dark:text-neutral-300",children:v}),f.jsx("td",{className:"py-1.5 w-1",children:f.jsx("button",{onClick:()=>o(m,v),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:"Copy value",children:s===m?f.jsx(En,{size:12,className:"text-emerald-500"}):f.jsx(us,{size:12,className:"text-neutral-400"})})})]},m)},e[4]=s,e[5]=d):d=e[5],c=n.map(d),e[1]=s,e[2]=n,e[3]=c}else c=e[3];let h;return e[6]!==c?(h=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("table",{className:"w-full text-xs",children:f.jsx("tbody",{children:c})})}),e[6]=c,e[7]=h):h=e[7],h}function YG(t){const e=He.c(16),{name:n,value:s}=t,[r,a]=W.useState(!1);let o;e[0]!==s?(o=async()=>{await navigator.clipboard.writeText(s),a(!0),setTimeout(()=>a(!1),2e3)},e[0]=s,e[1]=o):o=e[1];const c=o;let h;e[2]===Symbol.for("react.memo_cache_sentinel")?(h=f.jsx(ea,{size:14,className:"text-purple-500 dark:text-purple-400"}),e[2]=h):h=e[2];let d;e[3]!==n?(d=f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n}),e[3]=n,e[4]=d):d=e[4];let g;e[5]===Symbol.for("react.memo_cache_sentinel")?(g=f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-purple-100 dark:bg-purple-500/20 text-purple-600 dark:text-purple-400",children:"Binary"}),e[5]=g):g=e[5];let m;e[6]!==d?(m=f.jsxs("div",{className:"flex items-center gap-2",children:[h,d,g]}),e[6]=d,e[7]=m):m=e[7];let v;e[8]!==r?(v=r?f.jsx(En,{size:12,className:"text-emerald-500"}):f.jsx(us,{size:12,className:"text-neutral-400"}),e[8]=r,e[9]=v):v=e[9];let y;e[10]!==c||e[11]!==v?(y=f.jsx("button",{onClick:c,className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:"Copy base64 value",children:v}),e[10]=c,e[11]=v,e[12]=y):y=e[12];let x;return e[13]!==m||e[14]!==y?(x=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-3",children:f.jsxs("div",{className:"flex items-center justify-between",children:[m,y]})}),e[13]=m,e[14]=y,e[15]=x):x=e[15],x}const XG={kinds:["ConfigMap","ConfigMaps"],adapt(t,e){const n=e.data||{},s=e.binaryData||{},r=Object.keys(n),a=Object.keys(s),o=r.length+a.length,c=[{id:"status",data:{type:"status-cards",items:[...e.immutable?[{label:"Immutable",value:"Yes",status:"warning",icon:f.jsx(fg,{size:14,className:"text-amber-400"})}]:[]]}}],h=[],d=[];return r.forEach(g=>{KG(n[g])?d.push([g,n[g]]):h.push([g,n[g]])}),h.length>0&&c.push({id:"data-simple",title:"Data",data:{type:"custom",render:()=>f.jsx(GG,{entries:h})}}),d.length>0&&c.push({id:"data-multiline",title:h.length>0?"Files":"Data",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:d.map(([g,m])=>f.jsx(WG,{name:g,value:m},g))})}}),a.length>0&&c.push({id:"binary-data",title:"Binary Data",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:a.map(g=>f.jsx(YG,{name:g,value:s[g]},g))})}}),o===0&&c.push({id:"empty",data:{type:"custom",render:()=>f.jsxs("div",{className:"text-center py-8 text-neutral-400 dark:text-neutral-500",children:[f.jsx(ea,{size:32,className:"mx-auto mb-2 opacity-50"}),f.jsx("p",{className:"text-sm",children:"This ConfigMap is empty"})]})}}),{sections:c}}},JG={kinds:["Gateway","Gateways"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=s?.conditions?.find(d=>d.type==="Accepted"),a=s?.conditions?.find(d=>d.type==="Programmed"),o=r?.status==="True",c=a?.status==="True",h=s?.listeners?.reduce((d,g)=>d+(g.attachedRoutes||0),0)||0;return{sections:[{id:"status",title:"Gateway Status",data:{type:"status-cards",items:[{label:"Gateway Class",value:n.gatewayClassName,status:"neutral"},{label:"Accepted",value:o?"Yes":"No",status:o?"success":"error"},{label:"Programmed",value:c?"Yes":"No",status:c?"success":"error"},{label:"Attached Routes",value:h,status:"neutral"}]}},...s?.addresses&&s.addresses.length>0?[{id:"addresses",title:"Addresses",data:{type:"info-grid",items:s.addresses.map(d=>({label:d.type||"IPAddress",value:d.value,color:"text-blue-400"})),columns:2}}]:[],{id:"listeners",title:"Listeners",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.listeners.map(d=>f.jsx(QG,{listener:d,status:s},d.name))})}},...(s?.conditions??[]).length>0?[{id:"conditions",title:"Conditions",data:{type:"conditions",items:(s?.conditions??[]).map(d=>({type:d.type||"",status:d.status||"",reason:d.reason,message:d.message}))}}]:[]]}}};function QG(t){const e=He.c(32),{listener:n,status:s}=t,[r,a]=Rr.useState(!1);let o;e[0]!==n.name||e[1]!==s?.listeners?(o=s?.listeners?.find(B=>B.name===n.name),e[0]=n.name,e[1]=s?.listeners,e[2]=o):o=e[2];const h=o?.attachedRoutes??0;let d;e[3]!==r?(d=()=>a(!r),e[3]=r,e[4]=d):d=e[4];let g;e[5]===Symbol.for("react.memo_cache_sentinel")?(g=f.jsx(T7,{size:14,className:"text-emerald-400"}),e[5]=g):g=e[5];let m;e[6]!==n.name?(m=f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:n.name}),e[6]=n.name,e[7]=m):m=e[7];let v;e[8]!==n.protocol?(v=f.jsx("span",{className:"px-1.5 py-0.5 rounded text-xs bg-blue-500/20 text-blue-400",children:n.protocol}),e[8]=n.protocol,e[9]=v):v=e[9];let y;e[10]!==m||e[11]!==v?(y=f.jsxs("div",{className:"flex items-center gap-2",children:[m,v]}),e[10]=m,e[11]=v,e[12]=y):y=e[12];const x=h!==1?"s":"";let w;e[13]!==h||e[14]!==n.port||e[15]!==x?(w=f.jsxs("div",{className:"text-xs text-neutral-500",children:["Port ",n.port,"  ",h," route",x]}),e[13]=h,e[14]=n.port,e[15]=x,e[16]=w):w=e[16];let S;e[17]!==y||e[18]!==w?(S=f.jsxs("div",{className:"flex-1 min-w-0",children:[y,w]}),e[17]=y,e[18]=w,e[19]=S):S=e[19];let k;e[20]!==d||e[21]!==S?(k=f.jsxs("button",{onClick:d,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[g,S]}),e[20]=d,e[21]=S,e[22]=k):k=e[22];let C;e[23]!==h||e[24]!==r||e[25]!==n.hostname||e[26]!==n.port||e[27]!==n.protocol?(C=r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Protocol & Port"}),f.jsxs("div",{className:"text-xs space-y-1",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Protocol:"}),f.jsx("span",{className:"text-blue-400",children:n.protocol})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Port:"}),f.jsx("span",{className:"text-cyan-400",children:n.port})]})]})]}),n.hostname&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Hostname"}),f.jsx("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Qi,{size:10,className:"text-cyan-400"}),f.jsx("span",{className:"text-cyan-400",children:n.hostname})]})})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Attached Routes"}),f.jsxs("div",{className:"text-xs",children:[f.jsx("span",{className:"text-emerald-400 font-medium",children:h}),f.jsxs("span",{className:"text-neutral-500 ml-1",children:["route",h!==1?"s":""," attached"]})]})]})]}),e[23]=h,e[24]=r,e[25]=n.hostname,e[26]=n.port,e[27]=n.protocol,e[28]=C):C=e[28];let A;return e[29]!==k||e[30]!==C?(A=f.jsxs("div",{className:"border border-emerald-500/30 bg-emerald-500/5 rounded-lg overflow-hidden",children:[k,C]}),e[29]=k,e[30]=C,e[31]=A):A=e[31],A}const ZG={kinds:["HTTPRoute","HTTPRoutes"],adapt(t,e){const n=e.spec,s=e.status;return n?{sections:[...n.parentRefs&&n.parentRefs.length>0?[{id:"parents",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(au,{size:10})," Parent Gateway",n.parentRefs.length>1?"s":""]}),f.jsx("div",{className:"space-y-1",children:n.parentRefs.map((r,a)=>{const c=s?.parents?.find(d=>d.parentRef.name===r.name)?.conditions?.find(d=>d.type==="Accepted"),h=c?.status==="True";return f.jsxs("div",{className:"text-sm flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Gateway:"}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:r.name}),r.namespace&&f.jsxs("span",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:["(",r.namespace,")"]}),f.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${h?"bg-emerald-500/20 text-emerald-600 dark:text-emerald-400":"bg-amber-500/20 text-amber-700 dark:text-amber-400"}`,children:h?"Accepted":c?.reason||"Unknown"})]},a)})})]})}}]:[],...n.hostnames&&n.hostnames.length>0?[{id:"hostnames",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 border border-neutral-200 dark:border-neutral-700 rounded-lg p-3",children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-2",children:"Hostnames"}),f.jsx("div",{className:"flex flex-wrap gap-2",children:n.hostnames.map((r,a)=>f.jsx("div",{className:"bg-cyan-500/10 border border-cyan-500/30 rounded px-2.5 py-1 text-sm text-cyan-600 dark:text-cyan-400 font-mono",children:r},a))})]})}}]:[],...n.rules&&n.rules.length>0?[{id:"rules",title:"Routing Rules",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.rules.map((r,a)=>f.jsx(eY,{rule:r,index:a},r.matches?.[0]?.path?.value||`rule-${a}`))})}}]:[],...s?.parents?.some(r=>r.conditions&&r.conditions.length>0)?[{id:"parent-conditions",title:"Parent Status",data:{type:"conditions",items:s.parents.flatMap(r=>(r.conditions||[]).map(a=>({type:`${r.parentRef.name}: ${a.type}`,status:a.status,reason:a.reason,message:a.message})))}}]:[]]}:{sections:[]}}};function eY(t){const e=He.c(22),{rule:n,index:s}=t,[r,a]=Rr.useState(!1),o=n.matches?.length||0,c=n.backendRefs?.length||0;let h;e[0]!==r?(h=()=>a(!r),e[0]=r,e[1]=h):h=e[1];let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=f.jsx($d,{size:14,className:"text-purple-400"}),e[2]=d):d=e[2];const g=s+1;let m;e[3]!==g?(m=f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:["Rule ",g]})}),e[3]=g,e[4]=m):m=e[4];const v=o>0?`${o} match${o!==1?"es":""}`:"All requests",y=c!==1?"s":"";let x;e[5]!==c||e[6]!==v||e[7]!==y?(x=f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:[v,"  ",c," backend",y]}),e[5]=c,e[6]=v,e[7]=y,e[8]=x):x=e[8];let w;e[9]!==m||e[10]!==x?(w=f.jsxs("div",{className:"flex-1 min-w-0",children:[m,x]}),e[9]=m,e[10]=x,e[11]=w):w=e[11];let S;e[12]!==h||e[13]!==w?(S=f.jsxs("button",{onClick:h,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[d,w]}),e[12]=h,e[13]=w,e[14]=S):S=e[14];let k;e[15]!==r||e[16]!==n.backendRefs||e[17]!==n.matches?(k=r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[n.matches&&n.matches.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Matches"}),f.jsx("div",{className:"space-y-2",children:n.matches.map(nY)})]}),n.backendRefs&&n.backendRefs.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Backend Services"}),f.jsx("div",{className:"space-y-2",children:n.backendRefs.map(tY)})]})]}),e[15]=r,e[16]=n.backendRefs,e[17]=n.matches,e[18]=k):k=e[18];let C;return e[19]!==k||e[20]!==S?(C=f.jsxs("div",{className:"border border-purple-500/30 bg-purple-500/5 rounded-lg overflow-hidden",children:[S,k]}),e[19]=k,e[20]=S,e[21]=C):C=e[21],C}function tY(t,e){return f.jsx("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(r0,{size:10,className:"text-emerald-600 dark:text-emerald-400"}),f.jsx("span",{className:"text-emerald-600 dark:text-emerald-400",children:t.name}),t.port&&f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:":"}),f.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:t.port})]}),t.weight!==void 0&&f.jsxs("span",{className:"ml-auto px-1 py-0.5 rounded bg-amber-500/20 text-amber-400 text-[10px]",children:["weight: ",t.weight]})]})},e)}function nY(t,e){return f.jsxs("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:[t.path?.value&&f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx($d,{size:10,className:"text-cyan-600 dark:text-cyan-400"}),f.jsx("span",{className:"text-neutral-600 dark:text-neutral-400",children:"Path:"}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-mono",children:t.path.value})]}),t.method&&f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400 ml-4",children:"Method:"}),f.jsx("span",{className:"px-1 py-0.5 rounded bg-blue-500/20 text-blue-400 text-[10px] font-mono",children:t.method})]})]},e)}const sY={kinds:["GRPCRoute","GRPCRoutes"],adapt(t,e){const n=e.spec,s=e.status;return n?{sections:[...n.parentRefs&&n.parentRefs.length>0?[{id:"parents",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(au,{size:10})," Parent Gateway",n.parentRefs.length>1?"s":""]}),f.jsx("div",{className:"space-y-1",children:n.parentRefs.map((r,a)=>{const c=s?.parents?.find(d=>d.parentRef.name===r.name)?.conditions?.find(d=>d.type==="Accepted"),h=c?.status==="True";return f.jsxs("div",{className:"text-sm flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Gateway:"}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:r.name}),r.namespace&&f.jsxs("span",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:["(",r.namespace,")"]}),f.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${h?"bg-emerald-500/20 text-emerald-600 dark:text-emerald-400":"bg-amber-500/20 text-amber-700 dark:text-amber-400"}`,children:h?"Accepted":c?.reason||"Unknown"})]},a)})})]})}}]:[],...n.hostnames&&n.hostnames.length>0?[{id:"hostnames",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 border border-neutral-200 dark:border-neutral-700 rounded-lg p-3",children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-2",children:"Hostnames"}),f.jsx("div",{className:"flex flex-wrap gap-2",children:n.hostnames.map((r,a)=>f.jsx("div",{className:"bg-cyan-500/10 border border-cyan-500/30 rounded px-2.5 py-1 text-sm text-cyan-600 dark:text-cyan-400 font-mono",children:r},a))})]})}}]:[],...n.rules&&n.rules.length>0?[{id:"rules",title:"Routing Rules",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.rules.map((r,a)=>f.jsx(rY,{rule:r,index:a},r.matches?.[0]?.method?.service||`rule-${a}`))})}}]:[],...s?.parents?.some(r=>r.conditions&&r.conditions.length>0)?[{id:"parent-conditions",title:"Parent Status",data:{type:"conditions",items:s.parents.flatMap(r=>(r.conditions||[]).map(a=>({type:`${r.parentRef.name}: ${a.type}`,status:a.status,reason:a.reason,message:a.message})))}}]:[]]}:{sections:[]}}};function rY(t){const e=He.c(22),{rule:n,index:s}=t,[r,a]=Rr.useState(!1),o=n.matches?.length||0,c=n.backendRefs?.length||0;let h;e[0]!==r?(h=()=>a(!r),e[0]=r,e[1]=h):h=e[1];let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=f.jsx(ur,{size:14,className:"text-indigo-400"}),e[2]=d):d=e[2];const g=s+1;let m;e[3]!==g?(m=f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:["Rule ",g]})}),e[3]=g,e[4]=m):m=e[4];const v=o>0?`${o} match${o!==1?"es":""}`:"All methods",y=c!==1?"s":"";let x;e[5]!==c||e[6]!==v||e[7]!==y?(x=f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:[v,"  ",c," backend",y]}),e[5]=c,e[6]=v,e[7]=y,e[8]=x):x=e[8];let w;e[9]!==m||e[10]!==x?(w=f.jsxs("div",{className:"flex-1 min-w-0",children:[m,x]}),e[9]=m,e[10]=x,e[11]=w):w=e[11];let S;e[12]!==h||e[13]!==w?(S=f.jsxs("button",{onClick:h,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[d,w]}),e[12]=h,e[13]=w,e[14]=S):S=e[14];let k;e[15]!==r||e[16]!==n.backendRefs||e[17]!==n.matches?(k=r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[n.matches&&n.matches.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"gRPC Method Matches"}),f.jsx("div",{className:"space-y-2",children:n.matches.map(aY)})]}),n.backendRefs&&n.backendRefs.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Backend Services"}),f.jsx("div",{className:"space-y-2",children:n.backendRefs.map(iY)})]})]}),e[15]=r,e[16]=n.backendRefs,e[17]=n.matches,e[18]=k):k=e[18];let C;return e[19]!==k||e[20]!==S?(C=f.jsxs("div",{className:"border border-indigo-500/30 bg-indigo-500/5 rounded-lg overflow-hidden",children:[S,k]}),e[19]=k,e[20]=S,e[21]=C):C=e[21],C}function iY(t,e){return f.jsx("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(r0,{size:10,className:"text-emerald-600 dark:text-emerald-400"}),f.jsx("span",{className:"text-emerald-600 dark:text-emerald-400",children:t.name}),t.port&&f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:":"}),f.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:t.port})]}),t.weight!==void 0&&f.jsxs("span",{className:"ml-auto px-1 py-0.5 rounded bg-amber-500/20 text-amber-400 text-[10px]",children:["weight: ",t.weight]})]})},e)}function aY(t,e){return f.jsxs("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:[t.method?.service&&f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(ur,{size:10,className:"text-purple-600 dark:text-purple-400"}),f.jsx("span",{className:"text-neutral-600 dark:text-neutral-400",children:"Service:"}),f.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-mono",children:t.method.service})]}),t.method?.method&&f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-400 ml-4",children:"Method:"}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-mono",children:t.method.method})]})]},e)}const lY={kinds:["Ingress","Ingresses"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=s?.loadBalancer?.ingress&&s.loadBalancer.ingress.length>0;return{sections:[{id:"status",title:"Ingress Status",data:{type:"status-cards",items:[{label:"Ingress Class",value:n.ingressClassName||"default",status:"neutral"},{label:"Load Balancer",value:r?"Ready":"Pending",status:r?"success":"warning"}]}},...r?[{id:"load-balancer",title:"Load Balancer",data:{type:"info-grid",items:(s?.loadBalancer?.ingress||[]).map(a=>({label:a.hostname?"Hostname":"IP Address",value:a.hostname||a.ip||"Unknown",color:"text-blue-400"})),columns:2}}]:[],...n.tls&&n.tls.length>0?[{id:"tls",title:"TLS Configuration",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.tls.map((a,o)=>f.jsx(uY,{tls:a,index:o},a.secretName||`tls-${o}`))})}}]:[],...n.rules&&n.rules.length>0?[{id:"rules",title:"Routing Rules",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.rules.map((a,o)=>f.jsx(oY,{rule:a,index:o},a.host||`rule-${o}`))})}}]:[],...n.defaultBackend?.service?[{id:"default-backend",title:"Default Backend",data:{type:"info-grid",items:[{label:"Service",value:n.defaultBackend.service.name},{label:"Port",value:String(n.defaultBackend.service.port?.number||n.defaultBackend.service.port?.name||"unknown")}],columns:2}}]:[]]}}};function oY(t){const e=He.c(21),{rule:n,index:s}=t,[r,a]=Rr.useState(!1);let o;e[0]!==r?(o=()=>a(!r),e[0]=r,e[1]=o):o=e[1];let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=f.jsx(ur,{size:14,className:"text-blue-400"}),e[2]=c):c=e[2];const h=n.host||`Rule ${s+1}`;let d;e[3]!==h?(d=f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:h})}),e[3]=h,e[4]=d):d=e[4];const g=n.http?.paths.length||0,m=n.http?.paths.length!==1?"s":"";let v;e[5]!==g||e[6]!==m?(v=f.jsxs("div",{className:"text-xs text-neutral-500",children:[g," path",m]}),e[5]=g,e[6]=m,e[7]=v):v=e[7];let y;e[8]!==d||e[9]!==v?(y=f.jsxs("div",{className:"flex-1 min-w-0",children:[d,v]}),e[8]=d,e[9]=v,e[10]=y):y=e[10];let x;e[11]!==o||e[12]!==y?(x=f.jsxs("button",{onClick:o,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[c,y]}),e[11]=o,e[12]=y,e[13]=x):x=e[13];let w;e[14]!==r||e[15]!==n.host||e[16]!==n.http?(w=r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[n.host&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Host"}),f.jsx("div",{className:"text-xs text-cyan-400",children:n.host})]}),n.http?.paths&&n.http.paths.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Paths"}),f.jsx("div",{className:"space-y-2",children:n.http.paths.map(cY)})]})]}),e[14]=r,e[15]=n.host,e[16]=n.http,e[17]=w):w=e[17];let S;return e[18]!==w||e[19]!==x?(S=f.jsxs("div",{className:"border border-blue-500/30 bg-blue-500/5 rounded-lg overflow-hidden",children:[x,w]}),e[18]=w,e[19]=x,e[20]=S):S=e[20],S}function cY(t,e){const n=t.backend.service?.port?.number||t.backend.service?.port?.name||"";return f.jsxs("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx($d,{size:10,className:"text-purple-400"}),f.jsx("span",{className:"text-neutral-700 dark:text-neutral-300 font-mono",children:t.path||"/"}),f.jsx("span",{className:"px-1 py-0.5 rounded bg-purple-500/20 text-purple-400 text-[10px]",children:t.pathType})]}),f.jsxs("div",{className:"ml-4 flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-600",children:""}),f.jsx("span",{className:"text-emerald-400",children:t.backend.service?.name||"unknown"}),f.jsx("span",{className:"text-neutral-600",children:":"}),f.jsx("span",{className:"text-blue-400",children:n})]})]},e)}function uY(t){const e=He.c(22),{tls:n,index:s}=t,[r,a]=Rr.useState(!1);let o;e[0]!==r?(o=()=>a(!r),e[0]=r,e[1]=o):o=e[1];let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=f.jsx(dg,{size:14,className:"text-amber-400"}),e[2]=c):c=e[2];const h=n.secretName||`TLS ${s+1}`;let d;e[3]!==h?(d=f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:h})}),e[3]=h,e[4]=d):d=e[4];let g;e[5]!==n.hosts?(g=n.hosts?.join(", ")||"All hosts",e[5]=n.hosts,e[6]=g):g=e[6];let m;e[7]!==g?(m=f.jsx("div",{className:"text-xs text-neutral-500 truncate",children:g}),e[7]=g,e[8]=m):m=e[8];let v;e[9]!==d||e[10]!==m?(v=f.jsxs("div",{className:"flex-1 min-w-0",children:[d,m]}),e[9]=d,e[10]=m,e[11]=v):v=e[11];let y;e[12]!==o||e[13]!==v?(y=f.jsxs("button",{onClick:o,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[c,v]}),e[12]=o,e[13]=v,e[14]=y):y=e[14];let x;e[15]!==r||e[16]!==n.hosts||e[17]!==n.secretName?(x=r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Secret"}),f.jsx("div",{className:"text-xs text-purple-400",children:n.secretName||"default"})]}),n.hosts&&n.hosts.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Hosts"}),f.jsx("div",{className:"space-y-1",children:n.hosts.map(hY)})]})]}),e[15]=r,e[16]=n.hosts,e[17]=n.secretName,e[18]=x):x=e[18];let w;return e[19]!==y||e[20]!==x?(w=f.jsxs("div",{className:"border border-amber-500/30 bg-amber-500/5 rounded-lg overflow-hidden",children:[y,x]}),e[19]=y,e[20]=x,e[21]=w):w=e[21],w}function hY(t,e){return f.jsx("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Qi,{size:10,className:"text-cyan-400"}),f.jsx("span",{className:"text-cyan-400",children:t})]})},e)}const dY=[Mq,Dq,$q,Hq,Uq,Vq,qq,Wq,Gq,Jq,lK,fK,_K,TG,OG,BG,qG,XG,JG,ZG,sY,lY],z2=new Map;dY.forEach(t=>{t.kinds.forEach(e=>{z2.set(e.toLowerCase(),t)})});function VB(t){return z2.get(t.toLowerCase())??null}function A3(t){return z2.has(t.toLowerCase())}function fY(t,e){const n=e.kind;if(!n)return null;const s=VB(n);return s?s.adapt(t,e):null}function FB(t){const e=t.kind;if(!e)return[];const n=VB(e);return n?.actions?n.actions.filter(s=>!s.isVisible||s.isVisible(t)):[]}function pY({actions:t,resource:e,onActionComplete:n}){const{context:s}=Ir(),[r,a]=W.useState(null),[o,c]=W.useState(null),[h,d]=W.useState(null);if(t.length===0)return null;const g=async y=>{d(null),a(y.id);try{await y.execute(s,e),n?.()}catch(x){d(x instanceof Error?x.message:"Action failed")}finally{a(null),c(null)}},m=y=>{y.confirm?c(y):g(y)},v=(y="secondary")=>{switch(y){case"primary":return"bg-blue-600 hover:bg-blue-700 text-white border-blue-600";case"danger":return"bg-red-600 hover:bg-red-700 text-white border-red-600";case"warning":return"bg-amber-600 hover:bg-amber-700 text-white border-amber-600";default:return"bg-neutral-700 hover:bg-neutral-600 text-neutral-200 border-neutral-600"}};return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:t.map(y=>{const x=y.isDisabled?.(e),w=x===!0||typeof x=="string",S=typeof x=="string"?x:void 0,k=r===y.id;return f.jsxs("button",{onClick:()=>m(y),disabled:w||k,title:S,className:`
                flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded border
                transition-colors duration-150
                ${v(y.variant)}
                ${w?"opacity-50 cursor-not-allowed":"cursor-pointer"}
                ${k?"opacity-75":""}
              `,children:[k?f.jsx(gn,{size:14,className:"animate-spin"}):y.icon,y.label]},y.id)})}),h&&f.jsx("div",{className:"mb-4 p-2 bg-red-500/10 border border-red-500/30 rounded text-red-400 text-xs",children:h}),o&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:f.jsxs("div",{className:"bg-neutral-800 border border-neutral-700 rounded-lg p-4 max-w-md mx-4 shadow-xl",children:[f.jsx("h3",{className:"text-sm font-semibold text-neutral-200 mb-2",children:o.confirm?.title}),f.jsx("p",{className:"text-xs text-neutral-400 mb-4",children:o.confirm?.message}),f.jsxs("div",{className:"flex justify-end gap-2",children:[f.jsx("button",{onClick:()=>c(null),className:"px-3 py-1.5 text-xs font-medium rounded border border-neutral-600 bg-neutral-700 hover:bg-neutral-600 text-neutral-200",children:"Cancel"}),f.jsxs("button",{onClick:()=>g(o),disabled:r===o.id,className:`
                  flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded border
                  ${v(o.variant)}
                  ${r===o.id?"opacity-75":""}
                `,children:[r===o.id&&f.jsx(gn,{size:14,className:"animate-spin"}),o.confirm?.confirmLabel||"Confirm"]})]})]})})]})}function mY(t){const e=He.c(6),{items:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s={success:"text-emerald-400",warning:"text-amber-400",error:"text-red-400",neutral:"text-neutral-900 dark:text-neutral-100"},e[0]=s):s=e[0];const r=s;let a;if(e[1]!==n){let c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=(h,d)=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800 rounded-lg p-3",children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:h.label}),f.jsxs("div",{className:`text-sm font-medium flex items-center gap-2 ${r[h.status||"neutral"]}`,children:[h.icon,h.value]}),h.description&&f.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:h.description})]},d),e[3]=c):c=e[3],a=n.map(c),e[1]=n,e[2]=a}else a=e[2];let o;return e[4]!==a?(o=f.jsx("div",{className:"grid grid-cols-2 gap-3",children:a}),e[4]=a,e[5]=o):o=e[5],o}function gY(t){const e=He.c(12),{items:n,podGrid:s}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r={emerald:"text-emerald-400",blue:"text-blue-400",cyan:"text-cyan-400",purple:"text-purple-400",amber:"text-amber-400"},e[0]=r):r=e[0];const a=r;let o;e[1]===Symbol.for("react.memo_cache_sentinel")?(o={emerald:"bg-emerald-500",blue:"bg-blue-500",cyan:"bg-cyan-500",purple:"bg-purple-500",amber:"bg-amber-500"},e[1]=o):o=e[1];const c=o;let h;if(e[2]!==n){let v;e[4]===Symbol.for("react.memo_cache_sentinel")?(v=(y,x)=>{const w=y.total>0?Math.min(y.current/y.total*100,100):0;return f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:y.label}),f.jsxs("span",{className:a[y.color],children:[y.current,"/",y.total]})]}),f.jsx("div",{className:"h-1 bg-neutral-300 dark:bg-neutral-700 rounded-full overflow-hidden",children:f.jsx("div",{className:`h-full ${c[y.color]}`,style:{width:`${w}%`}})})]},x)},e[4]=v):v=e[4],h=n.map(v),e[2]=n,e[3]=h}else h=e[3];let d;e[5]!==h?(d=f.jsx("div",{className:"flex items-center gap-4 mb-3",children:h}),e[5]=h,e[6]=d):d=e[6];let g;e[7]!==s?(g=s&&f.jsx(qB,{data:s}),e[7]=s,e[8]=g):g=e[8];let m;return e[9]!==d||e[10]!==g?(m=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800 rounded-lg p-3",children:[d,g]}),e[9]=d,e[10]=g,e[11]=m):m=e[11],m}function qB(t){const e=He.c(10),{data:n}=t,s=n.icon==="database"?go:n.icon==="server"?mi:al;let r;e[0]!==n.total?(r=Array.from({length:n.total}),e[0]=n.total,e[1]=r):r=e[1];let a;return e[2]!==s||e[3]!==n.available||e[4]!==n.current||e[5]!==n.podTitles||e[6]!==n.ready||e[7]!==n.showOrdinal||e[8]!==r?(a=f.jsx("div",{className:"flex flex-wrap gap-1",children:r.map((o,c)=>{const h=c<n.ready,d=n.available!==void 0?c<n.available:h,g=n.current!==void 0?c<n.current:d,m=n.podTitles?.[c]??`Pod ${c}`;return f.jsxs("div",{className:`${n.showOrdinal?"w-8 h-8":"w-6 h-6"} rounded flex flex-col items-center justify-center ${h?"bg-emerald-500/20 border border-emerald-500/50":d?"bg-cyan-500/20 border border-cyan-500/50":g?"bg-amber-500/20 border border-amber-500/50":"bg-neutral-300/50 dark:bg-neutral-700/50 border border-neutral-400 dark:border-neutral-600"}`,title:`${m}: ${h?"Ready":d?"Available":g?"Current":"Pending"}`,children:[f.jsx(s,{size:n.showOrdinal?10:12,className:h?"text-emerald-600 dark:text-emerald-400":d?"text-cyan-600 dark:text-cyan-400":g?"text-amber-600 dark:text-amber-400":"text-neutral-600 dark:text-neutral-500"}),n.showOrdinal&&f.jsx("span",{className:`text-[9px] ${h?"text-emerald-600 dark:text-emerald-400":d?"text-cyan-600 dark:text-cyan-400":g?"text-amber-600 dark:text-amber-400":"text-neutral-600 dark:text-neutral-500"}`,children:c})]},c)})}),e[2]=s,e[3]=n.available,e[4]=n.current,e[5]=n.podTitles,e[6]=n.ready,e[7]=n.showOrdinal,e[8]=r,e[9]=a):a=e[9],a}const yY=new Set(["MemoryPressure","DiskPressure","PIDPressure","NetworkUnavailable","Failed","ErrorOccurred"]);function vY(t){return t.replace(/([a-z])([A-Z])/g,"$1 $2")}function bY(t){const e=He.c(12),{conditions:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=new Set,e[0]=s):s=e[0];const[r,a]=Rr.useState(s);if(!n||n.length===0)return null;let o;e[1]===Symbol.for("react.memo_cache_sentinel")?(o=v=>{a(y=>{const x=new Set(y);return x.has(v)?x.delete(v):x.add(v),x})},e[1]=o):o=e[1];const c=o,h=_Y;let d,g;if(e[2]!==n||e[3]!==r){let v;e[6]===Symbol.for("react.memo_cache_sentinel")?(v=(w,S)=>{const k=h(w),C=h(S);return k===C?0:k?1:-1},e[6]=v):v=e[6];const y=[...n].sort(v);d="rounded-lg overflow-hidden border border-neutral-200 dark:border-neutral-700/50";let x;e[7]!==r?(x=(w,S)=>{const k=h(w),C=w.status==="Unknown",A=w.reason||w.message,B=r.has(S);let M,T,H,$,G;return k?(M="bg-emerald-50/50 dark:bg-emerald-500/5",T="bg-emerald-100 dark:bg-emerald-500/20",H=Lr,$="text-emerald-500 dark:text-emerald-400",G="text-emerald-700 dark:text-emerald-400"):C?(M="bg-amber-50/50 dark:bg-amber-500/5",T="bg-amber-100 dark:bg-amber-500/20",H=mo,$="text-amber-500 dark:text-amber-400",G="text-amber-700 dark:text-amber-400"):(M="bg-red-50/50 dark:bg-red-500/5",T="bg-red-100 dark:bg-red-500/20",H=bi,$="text-red-500 dark:text-red-400",G="text-red-700 dark:text-red-400"),f.jsxs("div",{className:`${M} ${S>0?"border-t border-neutral-200 dark:border-neutral-700/50":""}`,children:[f.jsxs("div",{className:`flex items-center gap-3 px-3 py-2 ${A?"cursor-pointer hover:bg-neutral-500/5":""}`,onClick:()=>A&&c(S),children:[f.jsx("div",{className:`shrink-0 w-6 h-6 rounded-full flex items-center justify-center ${T}`,children:f.jsx(H,{size:14,className:$})}),f.jsx("span",{className:`text-sm font-medium flex-1 ${G}`,children:vY(w.type)}),w.reason&&w.reason.length<=30&&f.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-neutral-200/50 dark:bg-neutral-700/50 text-neutral-600 dark:text-neutral-400",children:w.reason}),A&&f.jsx("div",{className:"text-neutral-400",children:B?f.jsx(Ln,{size:14}):f.jsx(Hs,{size:14})})]}),A&&B&&f.jsxs("div",{className:"px-3 pb-2 pl-12 space-y-1",children:[w.reason&&w.reason.length>30&&f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-500 dark:text-neutral-500",children:"Reason: "}),w.reason]}),w.message&&f.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-500 wrap-break-word",children:w.message})]})]},`${w.type}-${S}`)},e[7]=r,e[8]=x):x=e[8],g=y.map(x),e[2]=n,e[3]=r,e[4]=d,e[5]=g}else d=e[4],g=e[5];let m;return e[9]!==d||e[10]!==g?(m=f.jsx("div",{className:d,children:g}),e[9]=d,e[10]=g,e[11]=m):m=e[11],m}function _Y(t){const e=yY.has(t.type),n=t.status==="True";return e?!n:n}function xY(t,e){if(t==="running")return{label:"Running",borderClass:"border-emerald-500/30 bg-emerald-500/5",badgeClass:"bg-emerald-500/20 text-emerald-400",iconClass:"text-emerald-400"};if(t==="waiting"){const n=e==="CrashLoopBackOff"||e==="Error";return{label:e||"Waiting",borderClass:n?"border-red-500/30 bg-red-500/5":"border-amber-500/30 bg-amber-500/5",badgeClass:n?"bg-red-500/20 text-red-400":"bg-amber-500/20 text-amber-400",iconClass:n?"text-red-400":"text-amber-400"}}return t==="terminated"?{label:e||"Terminated",borderClass:"border-neutral-300 bg-neutral-100 dark:border-neutral-700 dark:bg-neutral-900/50",badgeClass:"bg-neutral-200 text-neutral-600 dark:bg-neutral-700 dark:text-neutral-400",iconClass:"text-neutral-500 dark:text-neutral-400"}:{label:"Unknown",borderClass:"border-neutral-300 bg-neutral-100 dark:border-neutral-700 dark:bg-neutral-900/50",badgeClass:"bg-neutral-200 text-neutral-600 dark:bg-neutral-700 dark:text-neutral-400",iconClass:"text-neutral-500 dark:text-neutral-400"}}const wY=15e3;function SY(t){const e=He.c(10),{items:n,metricsLoader:s}=t,[r,a]=W.useState(null);let o,c;if(e[0]!==s?(o=()=>{if(!s)return;let g=!0;const m=async()=>{const y=await s();g&&a(y)};m();const v=setInterval(m,wY);return()=>{g=!1,clearInterval(v)}},c=[s],e[0]=s,e[1]=o,e[2]=c):(o=e[1],c=e[2]),W.useEffect(o,c),n.length===0)return null;let h;if(e[3]!==n||e[4]!==r){let g;e[6]!==r?(g=m=>f.jsx(kY,{container:m,metrics:r?.get(m.name)},m.name),e[6]=r,e[7]=g):g=e[7],h=n.map(g),e[3]=n,e[4]=r,e[5]=h}else h=e[5];let d;return e[8]!==h?(d=f.jsx("div",{className:"space-y-2",children:h}),e[8]=h,e[9]=d):d=e[9],d}function kY(t){const e=He.c(44),{container:n,metrics:s}=t,[r,a]=W.useState(!1);let o;e[0]!==n.state||e[1]!==n.stateReason?(o=xY(n.state,n.stateReason),e[0]=n.state,e[1]=n.stateReason,e[2]=o):o=e[2];const c=o,h=`border rounded-lg overflow-hidden ${c.borderClass}`;let d;e[3]!==r?(d=()=>a(!r),e[3]=r,e[4]=d):d=e[4];let g;e[5]!==c.iconClass?(g=f.jsx(al,{size:16,className:c.iconClass}),e[5]=c.iconClass,e[6]=g):g=e[6];let m;e[7]!==n.name?(m=f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:n.name}),e[7]=n.name,e[8]=m):m=e[8];let v;e[9]!==n.state||e[10]!==c.badgeClass||e[11]!==c.label?(v=n.state&&f.jsx("span",{className:`px-1.5 py-0.5 rounded text-xs ${c.badgeClass}`,children:c.label}),e[9]=n.state,e[10]=c.badgeClass,e[11]=c.label,e[12]=v):v=e[12];let y;e[13]!==m||e[14]!==v?(y=f.jsxs("div",{className:"flex items-center gap-2",children:[m,v]}),e[13]=m,e[14]=v,e[15]=y):y=e[15];let x;e[16]!==n.image?(x=f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 truncate",children:n.image}),e[16]=n.image,e[17]=x):x=e[17];let w;e[18]!==y||e[19]!==x?(w=f.jsxs("div",{className:"flex-1 min-w-0",children:[y,x]}),e[18]=y,e[19]=x,e[20]=w):w=e[20];let S;e[21]!==s?(S=s&&f.jsxs("div",{className:"flex items-center gap-3 text-xs font-mono",children:[f.jsx("span",{className:"text-blue-400",title:"CPU",children:s.cpu.usage}),f.jsx("span",{className:"text-purple-400",title:"Memory",children:s.memory.usage})]}),e[21]=s,e[22]=S):S=e[22];let k;e[23]!==n.restartCount?(k=(n.restartCount??0)>0&&f.jsxs("div",{className:"text-xs text-amber-400",children:[n.restartCount," restarts"]}),e[23]=n.restartCount,e[24]=k):k=e[24];let C;e[25]!==S||e[26]!==k||e[27]!==d||e[28]!==g||e[29]!==w?(C=f.jsxs("button",{onClick:d,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[g,w,S,k]}),e[25]=S,e[26]=k,e[27]=d,e[28]=g,e[29]=w,e[30]=C):C=e[30];let A;e[31]!==n.args||e[32]!==n.command||e[33]!==n.image||e[34]!==n.mounts||e[35]!==n.ports||e[36]!==n.resources||e[37]!==r||e[38]!==s?(A=r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Image"}),f.jsx("div",{className:"text-xs text-cyan-600 dark:text-cyan-400 break-all",children:n.image})]}),(n.command||n.args)&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Command"}),f.jsx("code",{className:"text-xs text-neutral-900 dark:text-neutral-300 bg-neutral-200 dark:bg-neutral-800 px-2 py-1 rounded block",children:[...n.command||[],...n.args||[]].join(" ")})]}),n.ports&&n.ports.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Ports"}),f.jsx("div",{className:"flex flex-wrap gap-1",children:n.ports.map(AY)})]}),!s&&n.resources&&f.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.resources.requests&&f.jsxs("div",{children:[f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(uf,{size:10})," Requests"]}),f.jsx("div",{className:"text-xs space-y-0.5",children:Object.entries(n.resources.requests).map(EY)})]}),n.resources.limits&&f.jsxs("div",{children:[f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(Us,{size:10})," Limits"]}),f.jsx("div",{className:"text-xs space-y-0.5",children:Object.entries(n.resources.limits).map(NY)})]})]}),n.mounts&&n.mounts.length>0&&f.jsxs("div",{children:[f.jsxs("div",{className:"text-xs text-neutral-500 mb-2 flex items-center gap-1",children:[f.jsx(Us,{size:10})," Volume Mounts"]}),f.jsx("div",{className:"text-xs space-y-1.5",children:n.mounts.map(CY)})]})]}),e[31]=n.args,e[32]=n.command,e[33]=n.image,e[34]=n.mounts,e[35]=n.ports,e[36]=n.resources,e[37]=r,e[38]=s,e[39]=A):A=e[39];let B;return e[40]!==C||e[41]!==A||e[42]!==h?(B=f.jsxs("div",{className:h,children:[C,A]}),e[40]=C,e[41]=A,e[42]=h,e[43]=B):B=e[43],B}function CY(t,e){return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded p-2 flex items-center gap-2",children:[f.jsx("span",{className:"text-purple-400 truncate max-w-35",title:t.name,children:t.name}),f.jsx("span",{className:"text-neutral-600",children:""}),f.jsx("span",{className:"text-cyan-400 font-mono truncate flex-1",title:t.mountPath,children:t.mountPath}),t.readOnly&&f.jsx("span",{className:"text-amber-400 text-[10px] px-1 py-0.5 bg-amber-500/10 rounded",children:"(ro)"})]},e)}function NY(t){const[e,n]=t;return f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-500",children:[e,":"]})," ",n]},e)}function EY(t){const[e,n]=t;return f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-500",children:[e,":"]})," ",n]},e)}function AY(t,e){return f.jsxs("span",{className:"text-xs text-neutral-900 dark:text-neutral-100 bg-neutral-200 dark:bg-neutral-800 px-2 py-1 rounded",children:[t.containerPort,"/",t.protocol||"TCP",t.name&&f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-500 ml-1",children:["(",t.name,")"]})]},e)}function jY(t){const e=He.c(4),{items:n}=t;if(n.length===0)return null;let s;e[0]!==n?(s=n.map(TY),e[0]=n,e[1]=s):s=e[1];let r;return e[2]!==s?(r=f.jsx("div",{className:"space-y-2",children:s}),e[2]=s,e[3]=r):r=e[3],r}function TY(t){return f.jsx(OY,{volume:t},t.name)}function OY(t){const e=He.c(33),{volume:n}=t,[s,r]=W.useState(!1);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a={ConfigMap:"border-blue-500/30 bg-blue-500/5",Secret:"border-amber-500/30 bg-amber-500/5",PVC:"border-emerald-500/30 bg-emerald-500/5",EmptyDir:"border-neutral-500/30 bg-neutral-500/5",HostPath:"border-red-500/30 bg-red-500/5",Projected:"border-purple-500/30 bg-purple-500/5",DownwardAPI:"border-cyan-500/30 bg-cyan-500/5",NFS:"border-orange-500/30 bg-orange-500/5",CSI:"border-indigo-500/30 bg-indigo-500/5"},e[0]=a):a=e[0];const o=a;let c;e[1]===Symbol.for("react.memo_cache_sentinel")?(c={ConfigMap:f.jsx(U7,{size:14,className:"text-blue-400"}),Secret:f.jsx(dg,{size:14,className:"text-amber-400"}),PVC:f.jsx(go,{size:14,className:"text-emerald-400"}),EmptyDir:f.jsx(Zj,{size:14,className:"text-neutral-400"}),HostPath:f.jsx(HI,{size:14,className:"text-red-400"}),Projected:f.jsx(Xl,{size:14,className:"text-purple-400"}),DownwardAPI:f.jsx(II,{size:14,className:"text-cyan-400"}),NFS:f.jsx(ur,{size:14,className:"text-orange-400"}),CSI:f.jsx(A7,{size:14,className:"text-indigo-400"})},e[1]=c):c=e[1];const h=c;let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d={ConfigMap:"bg-blue-500/20 text-blue-400",Secret:"bg-amber-500/20 text-amber-400",PVC:"bg-emerald-500/20 text-emerald-400",EmptyDir:"bg-neutral-500/20 text-neutral-400",HostPath:"bg-red-500/20 text-red-400",Projected:"bg-purple-500/20 text-purple-400",DownwardAPI:"bg-cyan-500/20 text-cyan-400",NFS:"bg-orange-500/20 text-orange-400",CSI:"bg-indigo-500/20 text-indigo-400"},e[2]=d):d=e[2];const g=d,m=`border rounded-lg overflow-hidden ${o[n.type]||"border-neutral-300 dark:border-neutral-700 bg-neutral-100 dark:bg-neutral-900/50"}`;let v;e[3]!==s?(v=()=>r(!s),e[3]=s,e[4]=v):v=e[4];let y;e[5]!==n.type?(y=h[n.type]||f.jsx(Us,{size:14,className:"text-neutral-600 dark:text-neutral-400"}),e[5]=n.type,e[6]=y):y=e[6];let x;e[7]!==n.name?(x=f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:n.name})}),e[7]=n.name,e[8]=x):x=e[8];let w;e[9]!==n.source?(w=n.source&&f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400/70",children:n.source}),e[9]=n.source,e[10]=w):w=e[10];let S;e[11]!==n.mounts?(S=n.mounts.length>0&&f.jsxs("span",{className:"ml-2",children:[" ",n.mounts.map(MY).join(", ")]}),e[11]=n.mounts,e[12]=S):S=e[12];let k;e[13]!==w||e[14]!==S?(k=f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 truncate",children:[w,S]}),e[13]=w,e[14]=S,e[15]=k):k=e[15];let C;e[16]!==k||e[17]!==x?(C=f.jsxs("div",{className:"flex-1 min-w-0",children:[x,k]}),e[16]=k,e[17]=x,e[18]=C):C=e[18];let A;e[19]!==C||e[20]!==v||e[21]!==y?(A=f.jsxs("button",{onClick:v,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[y,C]}),e[19]=C,e[20]=v,e[21]=y,e[22]=A):A=e[22];let B;e[23]!==s||e[24]!==n.extra||e[25]!==n.mounts||e[26]!==n.source||e[27]!==n.type?(B=s&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Source"}),f.jsxs("div",{className:"text-xs",children:[f.jsx("span",{className:`px-1.5 py-0.5 rounded ${g[n.type]||"bg-neutral-200 dark:bg-neutral-700 text-neutral-600 dark:text-neutral-400"}`,children:n.type}),n.source&&f.jsx("span",{className:"ml-2 text-cyan-600 dark:text-cyan-400",children:n.source})]}),n.extra&&Object.keys(n.extra).length>0&&f.jsx("div",{className:"mt-2 text-xs space-y-1",children:Object.entries(n.extra).map(BY)})]}),n.mounts.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Mount Points"}),f.jsx("div",{className:"space-y-2",children:n.mounts.map(RY)})]})]}),e[23]=s,e[24]=n.extra,e[25]=n.mounts,e[26]=n.source,e[27]=n.type,e[28]=B):B=e[28];let M;return e[29]!==A||e[30]!==B||e[31]!==m?(M=f.jsxs("div",{className:m,children:[A,B]}),e[29]=A,e[30]=B,e[31]=m,e[32]=M):M=e[32],M}function RY(t,e){return f.jsxs("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(al,{size:10,className:"text-blue-400"}),f.jsx("span",{className:"text-neutral-900 dark:text-neutral-300",children:t.container}),f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:""}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-mono",children:t.mountPath}),t.readOnly&&f.jsx("span",{className:"px-1 py-0.5 rounded bg-amber-500/20 text-amber-400 text-[10px]",children:"read-only"})]}),t.subPath&&f.jsxs("div",{className:"ml-4 mt-1 text-neutral-600 dark:text-neutral-500",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"subPath:"})," ",f.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:t.subPath})]})]},e)}function BY(t){const[e,n]=t;return f.jsxs("div",{className:"text-neutral-600 dark:text-neutral-400",children:[f.jsxs("span",{className:"text-neutral-500",children:[e,":"]})," ",f.jsx("span",{className:"text-neutral-900 dark:text-neutral-300",children:String(n)})]},e)}function MY(t){return t.mountPath}function DY(t){const e=He.c(4),{items:n}=t;if(n.length===0)return null;let s;e[0]!==n?(s=n.map(LY),e[0]=n,e[1]=s):s=e[1];let r;return e[2]!==s?(r=f.jsx("div",{className:"space-y-3",children:s}),e[2]=s,e[3]=r):r=e[3],r}function LY(t,e){return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsxs("div",{className:"flex items-center gap-2 text-sm text-neutral-900 dark:text-neutral-300",children:[t.icon,t.label]}),f.jsxs("div",{className:"text-xs",children:[f.jsx("span",{className:"text-cyan-400",children:t.allocatable}),f.jsx("span",{className:"text-neutral-500",children:" / "}),f.jsx("span",{className:"text-neutral-400",children:t.capacity})]})]}),f.jsxs("div",{className:"text-[10px] text-neutral-500 flex justify-between",children:[f.jsx("span",{children:"Allocatable"}),f.jsx("span",{children:"Capacity"})]})]},e)}function IY(t){const e=He.c(6),{items:n}=t;if(n.length===0)return null;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s={NoSchedule:"bg-red-500/20 text-red-400 border-red-500/30",PreferNoSchedule:"bg-amber-500/20 text-amber-400 border-amber-500/30",NoExecute:"bg-purple-500/20 text-purple-400 border-purple-500/30"},e[0]=s):s=e[0];const r=s;let a;if(e[1]!==n){let c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=(h,d)=>f.jsxs("span",{className:"text-xs bg-neutral-200 dark:bg-neutral-700 px-2 py-0.5 rounded flex items-center gap-1",title:`${h.key}=${h.value||""}:${h.effect}`,children:[f.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:h.key}),h.value&&f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"text-neutral-400",children:"="}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:h.value})]}),f.jsx("span",{className:`ml-1 px-1 py-0.5 rounded text-[10px] border ${r[h.effect]??"bg-neutral-700 text-neutral-300"}`,children:h.effect})]},d),e[3]=c):c=e[3],a=n.map(c),e[1]=n,e[2]=a}else a=e[2];let o;return e[4]!==a?(o=f.jsx("div",{className:"flex flex-wrap gap-1",children:a}),e[4]=a,e[5]=o):o=e[5],o}function PY(t){const e=He.c(18),{loader:n,title:s}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],e[0]=r):r=e[0];const[a,o]=W.useState(r),[c,h]=W.useState(!0);let d,g;if(e[1]!==n?(d=()=>{n().then(o).finally(()=>h(!1))},g=[n],e[1]=n,e[2]=d,e[3]=g):(d=e[2],g=e[3]),W.useEffect(d,g),c){let w;e[4]!==s?(w=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[4]=s,e[5]=w):w=e[5];let S;e[6]===Symbol.for("react.memo_cache_sentinel")?(S=f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:"Loading ReplicaSets..."}),e[6]=S):S=e[6];let k;return e[7]!==w?(k=f.jsxs("div",{children:[w,S]}),e[7]=w,e[8]=k):k=e[8],k}if(a.length===0)return null;let m;e[9]!==s?(m=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[9]=s,e[10]=m):m=e[10];let v;e[11]!==a?(v=a.map(zY),e[11]=a,e[12]=v):v=e[12];let y;e[13]!==v?(y=f.jsx("div",{className:"space-y-2",children:v}),e[13]=v,e[14]=y):y=e[14];let x;return e[15]!==m||e[16]!==y?(x=f.jsxs("div",{children:[m,y]}),e[15]=m,e[16]=y,e[17]=x):x=e[17],x}function zY(t){return f.jsx("div",{className:`border rounded-lg p-3 ${t.isCurrent?"border-blue-500/30 bg-blue-500/5":"border-neutral-300 dark:border-neutral-700 bg-neutral-100 dark:bg-neutral-900/50 opacity-60"}`,children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Xl,{size:16,className:t.isCurrent?"text-blue-400":"text-neutral-600 dark:text-neutral-500"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100 truncate",title:t.name,children:t.name}),t.revision&&f.jsxs("span",{className:"text-xs bg-neutral-200 dark:bg-neutral-700 px-1.5 py-0.5 rounded text-neutral-700 dark:text-neutral-400",children:["rev ",t.revision]})]}),t.images.length>0&&f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 truncate",children:t.images.join(", ")})]}),f.jsxs("div",{className:"text-xs",children:[f.jsxs("span",{className:t.readyReplicas===t.replicas?"text-emerald-600 dark:text-emerald-400":"text-amber-600 dark:text-amber-400",children:[t.readyReplicas,"/",t.replicas]}),f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500 ml-1",children:"ready"})]})]})},t.name)}function $Y(t){const e=He.c(18),{loader:n,title:s}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],e[0]=r):r=e[0];const[a,o]=W.useState(r),[c,h]=W.useState(!0);let d,g;if(e[1]!==n?(d=()=>{n().then(o).finally(()=>h(!1))},g=[n],e[1]=n,e[2]=d,e[3]=g):(d=e[2],g=e[3]),W.useEffect(d,g),c){let w;e[4]!==s?(w=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[4]=s,e[5]=w):w=e[5];let S;e[6]===Symbol.for("react.memo_cache_sentinel")?(S=f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:"Loading PVCs..."}),e[6]=S):S=e[6];let k;return e[7]!==w?(k=f.jsxs("div",{children:[w,S]}),e[7]=w,e[8]=k):k=e[8],k}if(a.length===0)return null;let m;e[9]!==s?(m=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[9]=s,e[10]=m):m=e[10];let v;e[11]!==a?(v=a.map(HY),e[11]=a,e[12]=v):v=e[12];let y;e[13]!==v?(y=f.jsx("div",{className:"space-y-2",children:v}),e[13]=v,e[14]=y):y=e[14];let x;return e[15]!==m||e[16]!==y?(x=f.jsxs("div",{children:[m,y]}),e[15]=m,e[16]=y,e[17]=x):x=e[17],x}function HY(t){return f.jsx("div",{className:`border rounded-lg p-3 ${t.status==="Bound"?"border-emerald-500/30 bg-emerald-500/5":"border-neutral-300 dark:border-neutral-700 bg-neutral-100 dark:bg-neutral-900/50"}`,children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Us,{size:16,className:t.status==="Bound"?"text-emerald-600 dark:text-emerald-400":"text-neutral-600 dark:text-neutral-500"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100 truncate",children:t.name})}),f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:[t.storageClass||"default"," storage class"]})]}),f.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[t.capacity&&f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:t.capacity}),f.jsx("span",{className:t.status==="Bound"?"text-emerald-600 dark:text-emerald-400":"text-amber-600 dark:text-amber-400",children:t.status})]})]})},t.name)}function UY(t){const e=He.c(25),{loader:n,title:s}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],e[0]=r):r=e[0];const[a,o]=W.useState(r),[c,h]=W.useState(!0),[d,g]=W.useState(!0);let m,v;if(e[1]!==n?(m=()=>{n().then(o).finally(()=>h(!1))},v=[n],e[1]=n,e[2]=m,e[3]=v):(m=e[2],v=e[3]),W.useEffect(m,v),c){let B;e[4]!==s?(B=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[4]=s,e[5]=B):B=e[5];let M;e[6]===Symbol.for("react.memo_cache_sentinel")?(M=f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:"Loading jobs..."}),e[6]=M):M=e[6];let T;return e[7]!==B?(T=f.jsxs("div",{children:[B,M]}),e[7]=B,e[8]=T):T=e[8],T}if(a.length===0)return null;let y;e[9]!==d||e[10]!==a?(y=d?a:a.slice(0,3),e[9]=d,e[10]=a,e[11]=y):y=e[11];const x=y;let w;e[12]!==s?(w=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[12]=s,e[13]=w):w=e[13];let S;e[14]!==x?(S=x.map(VY),e[14]=x,e[15]=S):S=e[15];let k;e[16]!==d||e[17]!==a.length?(k=a.length>3&&f.jsxs("button",{onClick:()=>g(!d),className:"flex items-center gap-1 text-xs text-neutral-600 dark:text-neutral-500 hover:text-neutral-900 dark:hover:text-neutral-300 transition-colors mt-2",children:[d?f.jsx(Ln,{size:12}):f.jsx(Hs,{size:12}),d?"Show less":`Show ${a.length-3} more`]}),e[16]=d,e[17]=a.length,e[18]=k):k=e[18];let C;e[19]!==S||e[20]!==k?(C=f.jsxs("div",{className:"space-y-2",children:[S,k]}),e[19]=S,e[20]=k,e[21]=C):C=e[21];let A;return e[22]!==w||e[23]!==C?(A=f.jsxs("div",{children:[w,C]}),e[22]=w,e[23]=C,e[24]=A):A=e[24],A}function VY(t){return f.jsx("div",{className:`border rounded-lg p-3 ${t.status==="Complete"?"border-emerald-500/30 bg-emerald-500/5":t.status==="Failed"?"border-red-500/30 bg-red-500/5":"border-amber-500/30 bg-amber-500/5"}`,children:f.jsxs("div",{className:"flex items-center gap-3",children:[t.status==="Complete"?f.jsx(Lr,{size:16,className:"text-emerald-400"}):t.status==="Failed"?f.jsx(bi,{size:16,className:"text-red-400"}):f.jsx(ll,{size:16,className:"text-amber-400"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100 truncate",title:t.name,children:t.name})}),t.startTime&&f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:["Started ",F_(new Date(t.startTime))]})]}),f.jsx("span",{className:`text-xs ${t.status==="Complete"?"text-emerald-600 dark:text-emerald-400":t.status==="Failed"?"text-red-600 dark:text-red-400":"text-amber-600 dark:text-amber-400"}`,children:t.status})]})},t.name)}function FY(t){const e=He.c(4),{items:n}=t;let s;e[0]!==n?(s=n.map(qY),e[0]=n,e[1]=s):s=e[1];let r;return e[2]!==s?(r=f.jsx("div",{className:"space-y-2",children:s}),e[2]=s,e[3]=r):r=e[3],r}function qY(t,e){return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(Us,{size:14,className:"text-purple-400"}),f.jsx("span",{className:"text-sm text-neutral-900 dark:text-neutral-100",children:t.name})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[t.size&&f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Size:"})," ",f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:t.size})]}),t.storageClass&&f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Class:"})," ",f.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:t.storageClass})]}),t.accessModes&&f.jsxs("div",{className:"col-span-2",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Access:"})," ",f.jsx("span",{className:"text-neutral-900 dark:text-neutral-300",children:t.accessModes.join(", ")})]})]})]},e)}function KY(t){const e=He.c(8),{schedule:n,description:s}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(Jj,{size:16,className:"text-purple-400"}),f.jsx("span",{className:"text-sm text-neutral-900 dark:text-neutral-100",children:"Schedule"})]}),e[0]=r):r=e[0];let a;e[1]!==n?(a=f.jsx("div",{className:"font-mono text-cyan-600 dark:text-cyan-400 text-lg mb-1",children:n}),e[1]=n,e[2]=a):a=e[2];let o;e[3]!==s?(o=f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:s}),e[3]=s,e[4]=o):o=e[4];let c;return e[5]!==a||e[6]!==o?(c=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[r,a,o]}),e[5]=a,e[6]=o,e[7]=c):c=e[7],c}function WY(t){const e=He.c(35),{completions:n,succeeded:s,failed:r,active:a}=t;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=f.jsx("span",{className:"text-sm text-neutral-900 dark:text-neutral-300",children:"Completions"}),e[0]=o):o=e[0];const c=s>=n?"text-emerald-600 dark:text-emerald-400":"text-cyan-600 dark:text-cyan-400";let h;e[1]!==s||e[2]!==c?(h=f.jsx("span",{className:c,children:s}),e[1]=s,e[2]=c,e[3]=h):h=e[3];let d;e[4]!==n?(d=f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-500",children:[" / ",n]}),e[4]=n,e[5]=d):d=e[5];let g;e[6]!==h||e[7]!==d?(g=f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o,f.jsxs("span",{className:"text-sm",children:[h,d]})]}),e[6]=h,e[7]=d,e[8]=g):g=e[8];let m;e[9]!==n||e[10]!==s?(m=s>0&&f.jsx("div",{className:"h-full bg-emerald-500",style:{width:`${s/n*100}%`}}),e[9]=n,e[10]=s,e[11]=m):m=e[11];let v;e[12]!==n||e[13]!==r?(v=r>0&&f.jsx("div",{className:"h-full bg-red-500",style:{width:`${r/(n+r)*100}%`}}),e[12]=n,e[13]=r,e[14]=v):v=e[14];let y;e[15]!==m||e[16]!==v?(y=f.jsxs("div",{className:"h-2 bg-neutral-300 dark:bg-neutral-700 rounded-full overflow-hidden flex",children:[m,v]}),e[15]=m,e[16]=v,e[17]=y):y=e[17];let x;e[18]===Symbol.for("react.memo_cache_sentinel")?(x=f.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),e[18]=x):x=e[18];let w;e[19]!==s?(w=f.jsxs("div",{className:"flex items-center gap-1",children:[x,f.jsxs("span",{className:"text-neutral-700 dark:text-neutral-400",children:["Succeeded: ",s]})]}),e[19]=s,e[20]=w):w=e[20];let S;e[21]===Symbol.for("react.memo_cache_sentinel")?(S=f.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"}),e[21]=S):S=e[21];let k;e[22]!==a?(k=f.jsxs("div",{className:"flex items-center gap-1",children:[S,f.jsxs("span",{className:"text-neutral-700 dark:text-neutral-400",children:["Active: ",a]})]}),e[22]=a,e[23]=k):k=e[23];let C;e[24]===Symbol.for("react.memo_cache_sentinel")?(C=f.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),e[24]=C):C=e[24];let A;e[25]!==r?(A=f.jsxs("div",{className:"flex items-center gap-1",children:[C,f.jsxs("span",{className:"text-neutral-700 dark:text-neutral-400",children:["Failed: ",r]})]}),e[25]=r,e[26]=A):A=e[26];let B;e[27]!==w||e[28]!==k||e[29]!==A?(B=f.jsxs("div",{className:"flex items-center gap-4 mt-3 text-xs",children:[w,k,A]}),e[27]=w,e[28]=k,e[29]=A,e[30]=B):B=e[30];let M;return e[31]!==B||e[32]!==g||e[33]!==y?(M=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[g,y,B]}),e[31]=B,e[32]=g,e[33]=y,e[34]=M):M=e[34],M}function GY(t){const e=He.c(7),{startTime:n,completionTime:s}=t;let r;e[0]!==n?(r=n&&f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Started:"})," ",f.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:n.toLocaleString()})]}),e[0]=n,e[1]=r):r=e[1];let a;e[2]!==s?(a=s&&f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Completed:"})," ",f.jsx("span",{className:"text-emerald-600 dark:text-emerald-400",children:s.toLocaleString()})]}),e[2]=s,e[3]=a):a=e[3];let o;return e[4]!==r||e[5]!==a?(o=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3 space-y-2 text-xs",children:[r,a]}),e[4]=r,e[5]=a,e[6]=o):o=e[6],o}function YY(t){const e=He.c(7),{items:n,columns:s}=t,r=s===void 0?2:s;let a,o;if(e[0]!==r||e[1]!==n){const h=n.filter(JY);a=`bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3 grid gap-2 text-xs ${r===2?"grid-cols-2":"grid-cols-1"}`,o=h.map(XY),e[0]=r,e[1]=n,e[2]=a,e[3]=o}else a=e[2],o=e[3];let c;return e[4]!==a||e[5]!==o?(c=f.jsx("div",{className:a,children:o}),e[4]=a,e[5]=o,e[6]=c):c=e[6],c}function XY(t,e){return f.jsxs("div",{className:"overflow-hidden",children:[f.jsxs("span",{className:"text-neutral-500 dark:text-neutral-500",children:[t.label,":"]})," ",f.jsx("span",{className:t.color||"text-neutral-900 dark:text-neutral-300",children:t.value})]},e)}function JY(t){return t.value!==void 0&&t.value!==null}function QY(t){const e=He.c(20),{labels:n,title:s}=t,r=s===void 0?"Labels":s;let a,o,c,h,d;if(e[0]!==n||e[1]!==r){d=Symbol.for("react.early_return_sentinel");e:{const y=Object.entries(n);if(y.length===0){d=null;break e}const x=["node-role.kubernetes.io/","kubernetes.io/os","kubernetes.io/arch","node.kubernetes.io/instance-type","topology.kubernetes.io/"],w=[...y].sort((k,C)=>{const A=x.some(M=>k[0].startsWith(M)),B=x.some(M=>C[0].startsWith(M));return A&&!B?-1:!A&&B?1:0});let S;e[7]===Symbol.for("react.memo_cache_sentinel")?(S=f.jsx(J7,{size:12}),e[7]=S):S=e[7],e[8]!==r?(h=f.jsxs("h5",{className:"flex items-center gap-2 text-xs font-medium text-neutral-500 uppercase tracking-wider mb-2",children:[S,r]}),e[8]=r,e[9]=h):h=e[9],o="w-full text-xs table-fixed",e[10]===Symbol.for("react.memo_cache_sentinel")?(c=f.jsxs("colgroup",{children:[f.jsx("col",{className:"w-[40%]"}),f.jsx("col",{className:"w-[60%]"})]}),e[10]=c):c=e[10],a=w.map((k,C)=>{const[A,B]=k,M=x.some(T=>A.startsWith(T));return f.jsxs("tr",{className:C%2===0?"bg-neutral-50 dark:bg-neutral-800/30":"",children:[f.jsx("td",{className:`py-1.5 px-2 truncate ${M?"text-blue-600 dark:text-blue-400":"text-sky-600 dark:text-sky-400"}`,title:A,children:A}),f.jsx("td",{className:"py-1.5 px-2 text-emerald-600 dark:text-emerald-400 truncate",title:B,children:B})]},A)})}e[0]=n,e[1]=r,e[2]=a,e[3]=o,e[4]=c,e[5]=h,e[6]=d}else a=e[2],o=e[3],c=e[4],h=e[5],d=e[6];if(d!==Symbol.for("react.early_return_sentinel"))return d;let g;e[11]!==a?(g=f.jsx("tbody",{children:a}),e[11]=a,e[12]=g):g=e[12];let m;e[13]!==o||e[14]!==c||e[15]!==g?(m=f.jsxs("table",{className:o,children:[c,g]}),e[13]=o,e[14]=c,e[15]=g,e[16]=m):m=e[16];let v;return e[17]!==h||e[18]!==m?(v=f.jsxs("div",{children:[h,m]}),e[17]=h,e[18]=m,e[19]=v):v=e[19],v}function ZY(t){const e=He.c(4),{containers:n}=t;let s;e[0]!==n?(s=n.map(eX),e[0]=n,e[1]=s):s=e[1];let r;return e[2]!==s?(r=f.jsx("div",{className:"space-y-1",children:s}),e[2]=s,e[3]=r):r=e[3],r}function eX(t){return f.jsxs("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 px-2 py-1.5 rounded flex items-center gap-2",children:[f.jsx(al,{size:12,className:"text-blue-400"}),f.jsxs("span",{className:"text-neutral-900 dark:text-neutral-300",children:[t.name,":"]}),f.jsx("span",{className:"text-cyan-400 truncate",children:t.image})]},t.name)}function tX(t){const e=He.c(4),{addresses:n}=t;let s;e[0]!==n?(s=n.map(nX),e[0]=n,e[1]=s):s=e[1];let r;return e[2]!==s?(r=f.jsx("div",{className:"grid grid-cols-2 gap-2",children:s}),e[2]=s,e[3]=r):r=e[3],r}function nX(t,e){return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-2",children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:t.type}),f.jsx("div",{className:"text-sm text-cyan-600 dark:text-cyan-400 font-mono",children:t.address})]},e)}const $2=15e3;function vm(t){const e=He.c(10),{value:n,max:s,label:r,colorClass:a}=t,o=a===void 0?"bg-blue-500":a,c=q_(n,s),g=`h-full ${c>80?"bg-amber-500":o} transition-all duration-300`,m=`${c}%`;let v;e[0]!==m?(v={width:m},e[0]=m,e[1]=v):v=e[1];let y;e[2]!==g||e[3]!==v?(y=f.jsx("div",{className:"h-2 bg-neutral-300 dark:bg-neutral-700 rounded-full overflow-hidden",children:f.jsx("div",{className:g,style:v})}),e[2]=g,e[3]=v,e[4]=y):y=e[4];let x;e[5]!==r?(x=r&&f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mt-0.5",children:r}),e[5]=r,e[6]=x):x=e[6];let w;return e[7]!==y||e[8]!==x?(w=f.jsxs("div",{className:"flex-1",children:[y,x]}),e[7]=y,e[8]=x,e[9]=w):w=e[9],w}function sX(t){const e=He.c(17),{loader:n,title:s}=t,[r,a]=W.useState(null),[o,c]=W.useState(!0);let h,d;if(e[0]!==n?(h=()=>{let x=!0;const w=async()=>{const k=await n();x&&(a(k),c(!1))};w();const S=setInterval(w,$2);return()=>{x=!1,clearInterval(S)}},d=[n],e[0]=n,e[1]=h,e[2]=d):(h=e[1],d=e[2]),W.useEffect(h,d),!o&&r===null)return null;if(o){let x;e[3]!==s?(x=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[3]=s,e[4]=x):x=e[4];let w;e[5]===Symbol.for("react.memo_cache_sentinel")?(w=f.jsxs("div",{className:"flex items-center gap-2 text-xs text-neutral-500",children:[f.jsx(gn,{size:12,className:"animate-spin"}),"Loading metrics..."]}),e[5]=w):w=e[5];let S;return e[6]!==x?(S=f.jsxs("div",{children:[x,w]}),e[6]=x,e[7]=S):S=e[7],S}if(!r||r.length===0)return null;let g;e[8]!==s?(g=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[8]=s,e[9]=g):g=e[9];let m;e[10]!==r?(m=r.map(rX),e[10]=r,e[11]=m):m=e[11];let v;e[12]!==m?(v=f.jsx("div",{className:"space-y-3",children:m}),e[12]=m,e[13]=v):v=e[13];let y;return e[14]!==g||e[15]!==v?(y=f.jsxs("div",{children:[g,v]}),e[14]=g,e[15]=v,e[16]=y):y=e[16],y}function rX(t){return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3 space-y-3",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(al,{size:14,className:"text-blue-400"}),f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:t.name})]}),f.jsxs("div",{className:"space-y-1",children:[f.jsxs("div",{className:"flex items-center justify-between text-xs",children:[f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-400 flex items-center gap-1.5",children:[f.jsx(uf,{size:12}),"CPU"]}),f.jsx("span",{className:"text-neutral-900 dark:text-neutral-100 font-mono",children:t.cpu.usage})]}),(t.cpu.requestNanoCores||t.cpu.limitNanoCores)&&f.jsxs("div",{className:"flex items-center gap-2",children:[t.cpu.requestNanoCores&&f.jsx(vm,{value:t.cpu.usageNanoCores,max:t.cpu.requestNanoCores,label:`of ${t.cpu.request} request`,colorClass:"bg-blue-500"}),t.cpu.limitNanoCores&&f.jsx(vm,{value:t.cpu.usageNanoCores,max:t.cpu.limitNanoCores,label:`of ${t.cpu.limit} limit`,colorClass:"bg-cyan-500"})]})]}),f.jsxs("div",{className:"space-y-1",children:[f.jsxs("div",{className:"flex items-center justify-between text-xs",children:[f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-400 flex items-center gap-1.5",children:[f.jsx(Us,{size:12}),"Memory"]}),f.jsx("span",{className:"text-neutral-900 dark:text-neutral-100 font-mono",children:t.memory.usage})]}),(t.memory.requestBytes||t.memory.limitBytes)&&f.jsxs("div",{className:"flex items-center gap-2",children:[t.memory.requestBytes&&f.jsx(vm,{value:t.memory.usageBytes,max:t.memory.requestBytes,label:`of ${t.memory.request} request`,colorClass:"bg-purple-500"}),t.memory.limitBytes&&f.jsx(vm,{value:t.memory.usageBytes,max:t.memory.limitBytes,label:`of ${t.memory.limit} limit`,colorClass:"bg-pink-500"})]})]})]},t.name)}function iX(t){const e=He.c(28),{loader:n,title:s}=t,[r,a]=W.useState(null),[o,c]=W.useState(!0),[h,d]=W.useState(!1);let g,m;if(e[0]!==n?(g=()=>{let M=!0;const T=async()=>{const $=await n();M&&(a($),c(!1))};T();const H=setInterval(T,$2);return()=>{M=!1,clearInterval(H)}},m=[n],e[0]=n,e[1]=g,e[2]=m):(g=e[1],m=e[2]),W.useEffect(g,m),!o&&r===null)return null;if(o){let M;e[3]!==s?(M=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[3]=s,e[4]=M):M=e[4];let T;e[5]===Symbol.for("react.memo_cache_sentinel")?(T=f.jsxs("div",{className:"flex items-center gap-2 text-xs text-neutral-500",children:[f.jsx(gn,{size:12,className:"animate-spin"}),"Loading metrics..."]}),e[5]=T):T=e[5];let H;return e[6]!==M?(H=f.jsxs("div",{children:[M,T]}),e[6]=M,e[7]=H):H=e[7],H}if(!r)return null;let v;e[8]!==s?(v=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[8]=s,e[9]=v):v=e[9];let y;e[10]===Symbol.for("react.memo_cache_sentinel")?(y=f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 flex items-center gap-1.5 mb-1",children:[f.jsx(uf,{size:12}),"Total CPU"]}),e[10]=y):y=e[10];let x;e[11]!==r.totalCpu?(x=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[y,f.jsx("div",{className:"text-lg font-mono text-blue-600 dark:text-blue-400",children:r.totalCpu})]}),e[11]=r.totalCpu,e[12]=x):x=e[12];let w;e[13]===Symbol.for("react.memo_cache_sentinel")?(w=f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 flex items-center gap-1.5 mb-1",children:[f.jsx(Us,{size:12}),"Total Memory"]}),e[13]=w):w=e[13];let S;e[14]!==r.totalMemory?(S=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[w,f.jsx("div",{className:"text-lg font-mono text-purple-600 dark:text-purple-400",children:r.totalMemory})]}),e[14]=r.totalMemory,e[15]=S):S=e[15];let k;e[16]!==x||e[17]!==S?(k=f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[x,S]}),e[16]=x,e[17]=S,e[18]=k):k=e[18];let C;e[19]!==r.podMetrics||e[20]!==h?(C=r.podMetrics.length>0&&f.jsxs("div",{className:"border border-neutral-300 dark:border-neutral-700 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:()=>d(!h),className:"w-full flex items-center justify-between p-2 bg-neutral-200/50 dark:bg-neutral-800/50 hover:bg-neutral-200 dark:hover:bg-neutral-800 transition-colors",children:[f.jsxs("span",{className:"text-xs text-neutral-700 dark:text-neutral-400",children:[r.podMetrics.length," pod",r.podMetrics.length!==1?"s":""]}),h?f.jsx(Ln,{size:14,className:"text-neutral-500"}):f.jsx(Hs,{size:14,className:"text-neutral-500"})]}),h&&f.jsx("div",{className:"divide-y divide-neutral-800",children:r.podMetrics.map(aX)})]}),e[19]=r.podMetrics,e[20]=h,e[21]=C):C=e[21];let A;e[22]!==k||e[23]!==C?(A=f.jsxs("div",{className:"space-y-3",children:[k,C]}),e[22]=k,e[23]=C,e[24]=A):A=e[24];let B;return e[25]!==A||e[26]!==v?(B=f.jsxs("div",{children:[v,A]}),e[25]=A,e[26]=v,e[27]=B):B=e[27],B}function aX(t){return f.jsxs("div",{className:"p-2 flex items-center justify-between",children:[f.jsx("span",{className:"text-xs text-neutral-300 truncate max-w-50",title:t.name,children:t.name}),f.jsxs("div",{className:"flex items-center gap-3 text-xs font-mono",children:[f.jsx("span",{className:"text-blue-400",children:t.cpu}),f.jsx("span",{className:"text-purple-400",children:t.memory})]})]},t.name)}function lX(t){const e=He.c(56),{loader:n,title:s}=t,[r,a]=W.useState(null),[o,c]=W.useState(!0);let h,d;if(e[0]!==n?(h=()=>{let R=!0;const V=async()=>{const Z=await n();R&&(a(Z),c(!1))};V();const E=setInterval(V,$2);return()=>{R=!1,clearInterval(E)}},d=[n],e[0]=n,e[1]=h,e[2]=d):(h=e[1],d=e[2]),W.useEffect(h,d),!o&&r===null)return null;if(o){let R;e[3]!==s?(R=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[3]=s,e[4]=R):R=e[4];let V;e[5]===Symbol.for("react.memo_cache_sentinel")?(V=f.jsxs("div",{className:"flex items-center gap-2 text-xs text-neutral-500",children:[f.jsx(gn,{size:12,className:"animate-spin"}),"Loading metrics..."]}),e[5]=V):V=e[5];let E;return e[6]!==R?(E=f.jsxs("div",{children:[R,V]}),e[6]=R,e[7]=E):E=e[7],E}if(!r)return null;const g=q_(r.cpu.usageNanoCores,r.cpu.allocatableNanoCores),m=q_(r.memory.usageBytes,r.memory.allocatableBytes);let v;e[8]!==s?(v=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[8]=s,e[9]=v):v=e[9];let y;e[10]===Symbol.for("react.memo_cache_sentinel")?(y=f.jsxs("span",{className:"text-xs text-neutral-400 flex items-center gap-1.5",children:[f.jsx(uf,{size:12}),"CPU Usage"]}),e[10]=y):y=e[10];const x=g>80?"text-amber-400":"text-blue-400";let w;e[11]!==r.cpu.usage||e[12]!==x?(w=f.jsx("span",{className:x,children:r.cpu.usage}),e[11]=r.cpu.usage,e[12]=x,e[13]=w):w=e[13];let S;e[14]!==r.cpu.allocatable?(S=f.jsxs("span",{className:"text-neutral-500",children:[" / ",r.cpu.allocatable]}),e[14]=r.cpu.allocatable,e[15]=S):S=e[15];let k;e[16]!==w||e[17]!==S?(k=f.jsxs("div",{className:"flex items-center justify-between",children:[y,f.jsxs("span",{className:"text-xs font-mono",children:[w,S]})]}),e[16]=w,e[17]=S,e[18]=k):k=e[18];const C=`h-full transition-all duration-300 ${g>80?"bg-amber-500":"bg-blue-500"}`,A=`${g}%`;let B;e[19]!==A?(B={width:A},e[19]=A,e[20]=B):B=e[20];let M;e[21]!==B||e[22]!==C?(M=f.jsx("div",{className:"h-2 bg-neutral-700 rounded-full overflow-hidden",children:f.jsx("div",{className:C,style:B})}),e[21]=B,e[22]=C,e[23]=M):M=e[23];let T;e[24]!==g?(T=f.jsxs("div",{className:"text-xs text-neutral-500 text-right",children:[g,"% utilized"]}),e[24]=g,e[25]=T):T=e[25];let H;e[26]!==M||e[27]!==T||e[28]!==k?(H=f.jsxs("div",{className:"bg-neutral-900/50 rounded-lg p-3 space-y-2",children:[k,M,T]}),e[26]=M,e[27]=T,e[28]=k,e[29]=H):H=e[29];let $;e[30]===Symbol.for("react.memo_cache_sentinel")?($=f.jsxs("span",{className:"text-xs text-neutral-400 flex items-center gap-1.5",children:[f.jsx(Us,{size:12}),"Memory Usage"]}),e[30]=$):$=e[30];const G=m>80?"text-amber-400":"text-purple-400";let z;e[31]!==r.memory.usage||e[32]!==G?(z=f.jsx("span",{className:G,children:r.memory.usage}),e[31]=r.memory.usage,e[32]=G,e[33]=z):z=e[33];let Q;e[34]!==r.memory.allocatable?(Q=f.jsxs("span",{className:"text-neutral-500",children:[" / ",r.memory.allocatable]}),e[34]=r.memory.allocatable,e[35]=Q):Q=e[35];let F;e[36]!==z||e[37]!==Q?(F=f.jsxs("div",{className:"flex items-center justify-between",children:[$,f.jsxs("span",{className:"text-xs font-mono",children:[z,Q]})]}),e[36]=z,e[37]=Q,e[38]=F):F=e[38];const K=`h-full transition-all duration-300 ${m>80?"bg-amber-500":"bg-purple-500"}`,J=`${m}%`;let q;e[39]!==J?(q={width:J},e[39]=J,e[40]=q):q=e[40];let P;e[41]!==K||e[42]!==q?(P=f.jsx("div",{className:"h-2 bg-neutral-700 rounded-full overflow-hidden",children:f.jsx("div",{className:K,style:q})}),e[41]=K,e[42]=q,e[43]=P):P=e[43];let X;e[44]!==m?(X=f.jsxs("div",{className:"text-xs text-neutral-500 text-right",children:[m,"% utilized"]}),e[44]=m,e[45]=X):X=e[45];let U;e[46]!==F||e[47]!==P||e[48]!==X?(U=f.jsxs("div",{className:"bg-neutral-900/50 rounded-lg p-3 space-y-2",children:[F,P,X]}),e[46]=F,e[47]=P,e[48]=X,e[49]=U):U=e[49];let D;e[50]!==H||e[51]!==U?(D=f.jsxs("div",{className:"space-y-3",children:[H,U]}),e[50]=H,e[51]=U,e[52]=D):D=e[52];let O;return e[53]!==D||e[54]!==v?(O=f.jsxs("div",{children:[v,D]}),e[53]=D,e[54]=v,e[55]=O):O=e[55],O}function oX(t){const e=He.c(9),{section:n}=t,{title:s,data:r}=n;let a;e[0]!==r?(a=cX(r),e[0]=r,e[1]=a):a=e[1];const o=a;if(o===null)return null;if(!s){let d;return e[2]!==o?(d=f.jsx(f.Fragment,{children:o}),e[2]=o,e[3]=d):d=e[3],d}let c;e[4]!==s?(c=f.jsx("h5",{className:"text-xs font-medium text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[4]=s,e[5]=c):c=e[5];let h;return e[6]!==o||e[7]!==c?(h=f.jsxs("div",{children:[c,o]}),e[6]=o,e[7]=c,e[8]=h):h=e[8],h}function cX(t){switch(t.type){case"status-cards":return f.jsx(mY,{items:t.items});case"gauges":return f.jsx(gY,{items:t.items,podGrid:t.showPodGrid});case"pod-grid":return f.jsx(qB,{data:t.data});case"conditions":return f.jsx(bY,{conditions:t.items});case"info-grid":return f.jsx(YY,{items:t.items,columns:t.columns});case"containers":return f.jsx(SY,{items:t.items,metricsLoader:t.metricsLoader});case"volumes":return f.jsx(jY,{items:t.items});case"labels":return f.jsx(QY,{labels:t.labels,title:t.title});case"capacity-bars":return f.jsx(DY,{items:t.items});case"taints":return f.jsx(IY,{items:t.items});case"container-images":return f.jsx(ZY,{containers:t.containers});case"related-replicasets":return f.jsx(PY,{loader:t.loader,title:t.title});case"related-pvcs":return f.jsx($Y,{loader:t.loader,title:t.title});case"related-jobs":return f.jsx(UY,{loader:t.loader,title:t.title});case"volume-claim-templates":return f.jsx(FY,{items:t.items});case"schedule":return f.jsx(KY,{schedule:t.schedule,description:t.description});case"job-progress":return f.jsx(WY,{...t});case"timeline":return f.jsx(GY,{startTime:t.startTime,completionTime:t.completionTime});case"addresses":return f.jsx(tX,{addresses:t.addresses});case"container-metrics":return f.jsx(sX,{loader:t.loader,title:t.title});case"workload-metrics":return f.jsx(iX,{loader:t.loader,title:t.title});case"node-metrics":return f.jsx(lX,{loader:t.loader,title:t.title});case"custom":return t.render();default:return null}}function uX(t){const e=He.c(25),{resource:n,onActionComplete:s,hideActions:r}=t,a=r===void 0?!1:r,{context:o}=Ir();let c,h,d,g,m;if(e[0]!==o||e[1]!==a||e[2]!==s||e[3]!==n){m=Symbol.for("react.early_return_sentinel");e:{const y=fY(o,n);let x;e[9]!==n?(x=FB(n),e[9]=n,e[10]=x):x=e[10];const w=x,S=n.metadata?.annotations?.["kubernetes.io/description"];if(!y||y.sections.length===0){let k;e[11]!==n.kind?(k=f.jsxs("div",{className:"text-neutral-500 text-sm",children:["No visualization available for ",n.kind]}),e[11]=n.kind,e[12]=k):k=e[12],m=k;break e}c="space-y-4",e[13]!==w||e[14]!==a||e[15]!==s||e[16]!==n?(h=!a&&f.jsx(pY,{actions:w,resource:n,onActionComplete:s}),e[13]=w,e[14]=a,e[15]=s,e[16]=n,e[17]=h):h=e[17],e[18]!==S?(d=S&&f.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:S}),e[18]=S,e[19]=d):d=e[19],g=y.sections.map(hX)}e[0]=o,e[1]=a,e[2]=s,e[3]=n,e[4]=c,e[5]=h,e[6]=d,e[7]=g,e[8]=m}else c=e[4],h=e[5],d=e[6],g=e[7],m=e[8];if(m!==Symbol.for("react.early_return_sentinel"))return m;let v;return e[20]!==c||e[21]!==h||e[22]!==d||e[23]!==g?(v=f.jsxs("div",{className:c,children:[h,d,g]}),e[20]=c,e[21]=h,e[22]=d,e[23]=g,e[24]=v):v=e[24],v}function hX(t){return f.jsx(oX,{section:t},t.id)}function j3(t,e,n){const s=t.match(/^(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d+Z)\s+(.*)$/);return s?{podName:e,container:n,timestamp:s[1],message:s[2]}:{podName:e,container:n,message:t}}async function dX(t,e,n,s){const r=new URLSearchParams;s.container&&r.set("container",s.container),r.set("follow","true"),r.set("tailLines",String(s.tailLines)),r.set("timestamps","true");const a=`/contexts/${t}/api/v1/namespaces/${e}/pods/${n}/log?${r.toString()}`;try{const o=await fetch(a,{signal:s.signal});if(!o.ok)throw new Error(`Failed to fetch logs: ${o.status} ${o.statusText}`);if(!o.body)throw new Error("No response body");const c=o.body.getReader(),h=new TextDecoder;let d="";for(;;){const{done:g,value:m}=await c.read();if(g)break;d+=h.decode(m,{stream:!0});const v=d.split(`
`);d=v.pop()||"";for(const y of v)y.trim()&&s.onLog(j3(y,n,s.container))}d.trim()&&s.onLog(j3(d,n,s.container))}catch(o){if(o.name==="AbortError")return;s.onError?.(o)}}function fX(t){const e=new AbortController;for(const n of t.podNames)dX(t.context,t.namespace,n,{container:t.container,follow:t.follow,tailLines:t.tailLines,timestamps:t.timestamps,onLog:t.onLog,onError:t.onError,signal:e.signal});return e}async function pX(t,e,n,s){let r;switch(n.toLowerCase()){case"deployment":r=`/apis/apps/v1/namespaces/${e}/deployments/${s}`;break;case"daemonset":r=`/apis/apps/v1/namespaces/${e}/daemonsets/${s}`;break;case"replicaset":r=`/apis/apps/v1/namespaces/${e}/replicasets/${s}`;break;case"statefulset":r=`/apis/apps/v1/namespaces/${e}/statefulsets/${s}`;break;case"job":r=`/apis/batch/v1/namespaces/${e}/jobs/${s}`;break;default:throw new Error(`Unsupported workload kind: ${n}`)}const a=await fetch(`/contexts/${t}${r}`);if(!a.ok)throw new Error(`Failed to fetch ${n}: ${a.status}`);const c=(await a.json()).spec?.selector?.matchLabels;if(!c)throw new Error("Workload has no selector labels");const h=Object.entries(c).map(([m,v])=>`${m}=${v}`).join(","),d=await fetch(`/contexts/${t}/api/v1/namespaces/${e}/pods?labelSelector=${encodeURIComponent(h)}`);if(!d.ok)throw new Error(`Failed to fetch pods: ${d.status}`);return(await d.json()).items.map(m=>m.metadata.name)}var mX=Yj();function H2(t){const e=He.c(6),{toolbarRef:n,children:s}=t,[r,a]=W.useState(null);let o,c;e[0]!==n?(o=()=>{a(n.current)},c=[n],e[0]=n,e[1]=o,e[2]=c):(o=e[1],c=e[2]),W.useEffect(o,c);let h;return e[3]!==s||e[4]!==r?(h=r?mX.createPortal(s,r):null,e[3]=s,e[4]=r,e[5]=h):h=e[5],h}const T3=["text-cyan-400","text-emerald-400","text-amber-400","text-purple-400","text-pink-400","text-blue-400","text-red-400","text-orange-400"];function O3(t,e){const n=e.indexOf(t);return T3[n%T3.length]}function gX(t){if(!t)return"";try{return new Date(t).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3})}catch{return t}}const yX=/^([IWEF])(\d{4})\s+(\d{2}:\d{2}:\d{2}\.\d+)\s+\d+\s+([\w.]+:\d+)]\s*(.*)$/;function vX(t){const e=t.match(yX);if(!e)return null;const[,n,,,s,r]=e,a=n==="E"?"error":n==="W"?"warn":n==="F"?"error":"info",o=KB(r),c=[`source: ${s}`];for(const[h,d]of Object.entries(o))c.push(`${h}: ${d}`);return{format:"klog",formatted:c.join(`
`),level:a}}function KB(t){const e={},n=/(?:"([^"]*)"|([\w.]+)=(?:"([^"]*)"|([^\s]*)))/g;let s,r=0;for(;(s=n.exec(t))!==null;)if(s[1]!==void 0)e[`msg${r||""}`]=s[1],r++;else{const a=s[2],o=s[3]??s[4]??"";e[a]=o}return e}function bX(t){const e=t.trim();if(!/\w+=/.test(e))return null;const n=KB(e),s=Object.keys(n);if(s.length<2)return null;let r="unknown";const a=(n.level??n.lvl??n.severity??"").toLowerCase();return a.includes("err")||a==="fatal"?r="error":a.includes("warn")?r="warn":a==="info"?r="info":a==="debug"&&(r="debug"),{format:"logfmt",formatted:s.map(c=>`${c}: ${n[c]}`).join(`
`),level:r}}function _X(t){const e=t.trim();if(e.startsWith("{")||e.startsWith("["))try{const r=JSON.parse(e);return{format:"json",formatted:JSON.stringify(r,null,2),jsonData:r}}catch{}const n=vX(e);if(n)return n;const s=bX(e);return s||{format:"plain",formatted:t}}const xX={error:"text-red-600 dark:text-red-400",warn:"text-yellow-600 dark:text-yellow-400",info:"text-blue-600 dark:text-blue-400",debug:"text-neutral-600 dark:text-neutral-400",trace:"text-neutral-500 dark:text-neutral-500",unknown:"text-neutral-700 dark:text-neutral-300"},wX={error:"bg-red-50 dark:bg-red-500/10 border-l-2 border-red-400 dark:border-red-500/50",warn:"bg-yellow-50 dark:bg-yellow-500/10 border-l-2 border-yellow-400 dark:border-yellow-500/50",info:"",debug:"",trace:"",unknown:""};function SX(t,e,n){if(n&&n!=="unknown")return n;if(e){const a=e.level??e.severity??e.lvl??e.log_level??"",o=String(a).toLowerCase();if(o.includes("err")||o==="fatal"||o==="critical")return"error";if(o.includes("warn"))return"warn";if(o==="info")return"info";if(o==="debug")return"debug";if(o==="trace")return"trace"}const r=t.toLowerCase().slice(0,100);return/\b(error|err|fatal|critical|panic|exception)\b/.test(r)?"error":/\b(warn|warning)\b/.test(r)?"warn":/\binfo\b/.test(r)?"info":/\bdebug\b/.test(r)?"debug":/\btrace\b/.test(r)?"trace":"unknown"}function kX(t,e){const[n,s]=W.useState({podNames:[],loading:!1,error:null}),r=e.kind,a=e.metadata?.name,o=e.metadata?.namespace;return W.useEffect(()=>{if(!r||!a||!o)return;if(r==="Pod"){s({podNames:[a],loading:!1,error:null});return}let c=!1;async function h(){try{const d=await pX(t,o,r,a);c||s({podNames:d,loading:!1,error:null})}catch(d){c||s(g=>({...g,loading:!1,error:d.message}))}}return s(d=>({...d,loading:!0,error:null})),h(),()=>{c=!0}},[t,o,r,a]),n}const CX=4e3;function NX(t){const e=He.c(61),{resource:n,toolbarRef:s}=t,{context:r}=Ir();let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=[],e[0]=a):a=e[0];const[o,c]=W.useState(a),[h,d]=W.useState(null),[g,m]=W.useState(!0),[v,y]=W.useState(!1),[x,w]=W.useState(!1),[S,k]=W.useState(!1),C=W.useRef(null),A=W.useRef(null);let B;e[1]!==o?(B=async()=>{const mt=o.map(EX).join(`
`);await navigator.clipboard.writeText(mt),w(!0),setTimeout(()=>w(!1),2e3)},e[1]=o,e[2]=B):B=e[2];const M=B,T=W.useRef(null),H=n.metadata?.namespace,{podNames:$,loading:G,error:z}=kX(r,n);let Q;e[3]===Symbol.for("react.memo_cache_sentinel")?(Q=()=>{if(!A.current)return;const{scrollTop:mt,scrollHeight:ht,clientHeight:Lt}=A.current,bn=ht-mt-Lt<50;m(bn)},e[3]=Q):Q=e[3];const F=Q;let K;e[4]!==g?(K=()=>{g&&C.current&&C.current.scrollIntoView({behavior:"smooth"})},e[4]=g,e[5]=K):K=e[5];let J;e[6]!==g||e[7]!==o?(J=[o,g],e[6]=g,e[7]=o,e[8]=J):J=e[8],W.useEffect(K,J);const q=$.length>0&&!v&&!G;let P,X;e[9]!==r||e[10]!==H||e[11]!==$||e[12]!==q?(P=()=>{if(q){const mt=setTimeout(()=>{$.length>0&&H&&(d(null),y(!0),T.current=fX({context:r,namespace:H,podNames:$,follow:!0,tailLines:CX,timestamps:!0,onLog:ht=>{c(Lt=>[...Lt,ht])},onError:ht=>{d(ht.message)}}))},0);return()=>clearTimeout(mt)}},X=[q,r,H,$],e[9]=r,e[10]=H,e[11]=$,e[12]=q,e[13]=P,e[14]=X):(P=e[13],X=e[14]),W.useEffect(P,X);let U,D;e[15]===Symbol.for("react.memo_cache_sentinel")?(U=()=>()=>{T.current?.abort(),T.current=null},D=[],e[15]=U,e[16]=D):(U=e[15],D=e[16]),W.useEffect(U,D);let O;e[17]===Symbol.for("react.memo_cache_sentinel")?(O=()=>{m(!0),C.current?.scrollIntoView({behavior:"smooth"})},e[17]=O):O=e[17];const R=O,V=z||h;let E;e[18]!==x||e[19]!==M||e[20]!==o.length||e[21]!==S||e[22]!==s?(E=s&&f.jsxs(H2,{toolbarRef:s,children:[f.jsx("button",{onClick:()=>k(!S),className:`flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium rounded transition-colors ${S?"text-amber-600 dark:text-amber-400 bg-amber-100 dark:bg-amber-500/20":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-200 dark:hover:bg-neutral-800"}`,title:S?"Show all logs":"Show only errors & warnings",children:f.jsx(qI,{size:12})}),f.jsx("button",{onClick:M,disabled:o.length===0,className:"flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-200 dark:hover:bg-neutral-800 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Copy logs",children:x?f.jsx(En,{size:12,className:"text-emerald-500"}):f.jsx(us,{size:12})})]}),e[18]=x,e[19]=M,e[20]=o.length,e[21]=S,e[22]=s,e[23]=E):E=e[23];let Z;e[24]!==$?(Z=$.length>1&&f.jsx("div",{className:"shrink-0 px-4 py-2 border-b border-neutral-200 dark:border-neutral-800 bg-neutral-100 dark:bg-neutral-900/30",children:f.jsx("div",{className:"flex flex-wrap gap-2",children:$.map(mt=>f.jsxs("span",{className:`text-xs ${O3(mt,$)} flex items-center gap-1`,title:mt,children:[f.jsx("span",{className:"w-2 h-2 rounded-full bg-current"}),mt]},mt))})}),e[24]=$,e[25]=Z):Z=e[25];let ue;e[26]!==G?(ue=G&&f.jsx("div",{className:"p-4 text-neutral-500 dark:text-neutral-500",children:"Loading pods..."}),e[26]=G,e[27]=ue):ue=e[27];let ne;e[28]!==V?(ne=V&&f.jsx("div",{className:"p-4 text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-500/10 border-b border-red-300 dark:border-red-500/30",children:V}),e[28]=V,e[29]=ne):ne=e[29];let de;e[30]!==G||e[31]!==$.length?(de=!G&&$.length===0&&f.jsx("div",{className:"p-4 text-neutral-500 dark:text-neutral-500",children:"No pods found"}),e[30]=G,e[31]=$.length,e[32]=de):de=e[32];let we;e[33]!==V||e[34]!==G||e[35]!==o.length||e[36]!==$.length?(we=o.length===0&&!G&&$.length>0&&!V&&f.jsx("div",{className:"p-4 text-neutral-500 dark:text-neutral-500",children:"Waiting for logs..."}),e[33]=V,e[34]=G,e[35]=o.length,e[36]=$.length,e[37]=we):we=e[37];let Ee;if(e[38]!==o||e[39]!==$||e[40]!==S){let mt;e[42]!==$||e[43]!==S?(mt=(ht,Lt)=>{const bn=_X(ht.message),ls=SX(ht.message,bn.jsonData,bn.level);if(S&&ls!=="error"&&ls!=="warn")return null;const Es=xX[ls],Qe=wX[ls],rt=bn.format!=="plain";return f.jsxs("div",{className:`hover:bg-neutral-100 dark:hover:bg-neutral-900/50 rounded px-2 py-1 group ${Qe}`,children:[f.jsxs("div",{className:"flex items-center gap-2 text-[10px] leading-tight mb-0.5",children:[f.jsx("span",{className:"text-neutral-500 dark:text-neutral-600",children:gX(ht.timestamp)}),f.jsx("span",{className:`${O3(ht.podName,$)}`,title:ht.podName,children:ht.podName}),ht.container&&ht.container!==ht.podName&&f.jsx("span",{className:"text-neutral-500 dark:text-neutral-500",children:ht.container})]}),rt?f.jsx("pre",{className:`${Es} whitespace-pre overflow-x-auto scrollbar-hide leading-snug text-[11px]`,children:bn.formatted}):f.jsx("div",{className:`${Es} break-all whitespace-pre-wrap leading-snug`,children:bn.formatted})]},Lt)},e[42]=$,e[43]=S,e[44]=mt):mt=e[44],Ee=o.map(mt),e[38]=o,e[39]=$,e[40]=S,e[41]=Ee}else Ee=e[41];let et;e[45]===Symbol.for("react.memo_cache_sentinel")?(et=f.jsx("div",{ref:C}),e[45]=et):et=e[45];let Ce;e[46]!==Ee?(Ce=f.jsxs("div",{className:"p-2 space-y-1",children:[Ee,et]}),e[46]=Ee,e[47]=Ce):Ce=e[47];let Ge;e[48]!==ue||e[49]!==ne||e[50]!==de||e[51]!==we||e[52]!==Ce?(Ge=f.jsxs("div",{ref:A,onScroll:F,className:"flex-1 overflow-auto font-mono text-xs",children:[ue,ne,de,we,Ce]}),e[48]=ue,e[49]=ne,e[50]=de,e[51]=we,e[52]=Ce,e[53]=Ge):Ge=e[53];let Te;e[54]!==g?(Te=!g&&f.jsx("div",{className:"shrink-0 px-4 py-2 border-t border-neutral-200 dark:border-neutral-800 bg-neutral-100 dark:bg-neutral-900/50",children:f.jsxs("button",{onClick:R,className:"flex items-center gap-1 text-xs text-neutral-600 dark:text-neutral-500 hover:text-neutral-900 dark:hover:text-neutral-300",children:[f.jsx(Ln,{size:12}),"Scroll to bottom"]})}),e[54]=g,e[55]=Te):Te=e[55];let tt;return e[56]!==E||e[57]!==Z||e[58]!==Ge||e[59]!==Te?(tt=f.jsxs("div",{className:"flex flex-col h-full bg-neutral-50 dark:bg-neutral-950",children:[E,Z,Ge,Te]}),e[56]=E,e[57]=Z,e[58]=Ge,e[59]=Te,e[60]=tt):tt=e[60],tt}function EX(t){return`${t.timestamp} [${t.podName}] ${t.message}`}var WB=Object.defineProperty,AX=Object.getOwnPropertyDescriptor,jX=(t,e)=>{for(var n in e)WB(t,n,{get:e[n],enumerable:!0})},hn=(t,e,n,s)=>{for(var r=s>1?void 0:s?AX(e,n):e,a=t.length-1,o;a>=0;a--)(o=t[a])&&(r=(s?o(e,n,r):o(r))||r);return s&&r&&WB(e,n,r),r},Le=(t,e)=>(n,s)=>e(n,s,t),R3="Terminal input",uw={get:()=>R3,set:t=>R3=t},B3="Too much output to announce, navigate to rows manually to read",hw={get:()=>B3,set:t=>B3=t};function TX(t){return t.replace(/\r?\n/g,"\r")}function OX(t,e){return e?"\x1B[200~"+t+"\x1B[201~":t}function RX(t,e){t.clipboardData&&t.clipboardData.setData("text/plain",e.selectionText),t.preventDefault()}function BX(t,e,n,s){if(t.stopPropagation(),t.clipboardData){let r=t.clipboardData.getData("text/plain");GB(r,e,n,s)}}function GB(t,e,n,s){t=TX(t),t=OX(t,n.decPrivateModes.bracketedPasteMode&&s.rawOptions.ignoreBracketedPasteMode!==!0),n.triggerDataEvent(t,!0),e.value=""}function YB(t,e,n){let s=n.getBoundingClientRect(),r=t.clientX-s.left-10,a=t.clientY-s.top-10;e.style.width="20px",e.style.height="20px",e.style.left=`${r}px`,e.style.top=`${a}px`,e.style.zIndex="1000",e.focus()}function M3(t,e,n,s,r){YB(t,e,n),r&&s.rightClickSelect(t),e.value=s.selectionText,e.select()}function qa(t){return t>65535?(t-=65536,String.fromCharCode((t>>10)+55296)+String.fromCharCode(t%1024+56320)):String.fromCharCode(t)}function Sy(t,e=0,n=t.length){let s="";for(let r=e;r<n;++r){let a=t[r];a>65535?(a-=65536,s+=String.fromCharCode((a>>10)+55296)+String.fromCharCode(a%1024+56320)):s+=String.fromCharCode(a)}return s}var MX=class{constructor(){this._interim=0}clear(){this._interim=0}decode(t,e){let n=t.length;if(!n)return 0;let s=0,r=0;if(this._interim){let a=t.charCodeAt(r++);56320<=a&&a<=57343?e[s++]=(this._interim-55296)*1024+a-56320+65536:(e[s++]=this._interim,e[s++]=a),this._interim=0}for(let a=r;a<n;++a){let o=t.charCodeAt(a);if(55296<=o&&o<=56319){if(++a>=n)return this._interim=o,s;let c=t.charCodeAt(a);56320<=c&&c<=57343?e[s++]=(o-55296)*1024+c-56320+65536:(e[s++]=o,e[s++]=c);continue}o!==65279&&(e[s++]=o)}return s}},DX=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(t,e){let n=t.length;if(!n)return 0;let s=0,r,a,o,c,h=0,d=0;if(this.interim[0]){let v=!1,y=this.interim[0];y&=(y&224)===192?31:(y&240)===224?15:7;let x=0,w;for(;(w=this.interim[++x]&63)&&x<4;)y<<=6,y|=w;let S=(this.interim[0]&224)===192?2:(this.interim[0]&240)===224?3:4,k=S-x;for(;d<k;){if(d>=n)return 0;if(w=t[d++],(w&192)!==128){d--,v=!0;break}else this.interim[x++]=w,y<<=6,y|=w&63}v||(S===2?y<128?d--:e[s++]=y:S===3?y<2048||y>=55296&&y<=57343||y===65279||(e[s++]=y):y<65536||y>1114111||(e[s++]=y)),this.interim.fill(0)}let g=n-4,m=d;for(;m<n;){for(;m<g&&!((r=t[m])&128)&&!((a=t[m+1])&128)&&!((o=t[m+2])&128)&&!((c=t[m+3])&128);)e[s++]=r,e[s++]=a,e[s++]=o,e[s++]=c,m+=4;if(r=t[m++],r<128)e[s++]=r;else if((r&224)===192){if(m>=n)return this.interim[0]=r,s;if(a=t[m++],(a&192)!==128){m--;continue}if(h=(r&31)<<6|a&63,h<128){m--;continue}e[s++]=h}else if((r&240)===224){if(m>=n)return this.interim[0]=r,s;if(a=t[m++],(a&192)!==128){m--;continue}if(m>=n)return this.interim[0]=r,this.interim[1]=a,s;if(o=t[m++],(o&192)!==128){m--;continue}if(h=(r&15)<<12|(a&63)<<6|o&63,h<2048||h>=55296&&h<=57343||h===65279)continue;e[s++]=h}else if((r&248)===240){if(m>=n)return this.interim[0]=r,s;if(a=t[m++],(a&192)!==128){m--;continue}if(m>=n)return this.interim[0]=r,this.interim[1]=a,s;if(o=t[m++],(o&192)!==128){m--;continue}if(m>=n)return this.interim[0]=r,this.interim[1]=a,this.interim[2]=o,s;if(c=t[m++],(c&192)!==128){m--;continue}if(h=(r&7)<<18|(a&63)<<12|(o&63)<<6|c&63,h<65536||h>1114111)continue;e[s++]=h}}return s}},XB="",Ja=" ",Bf=class JB{constructor(){this.fg=0,this.bg=0,this.extended=new eg}static toColorRGB(e){return[e>>>16&255,e>>>8&255,e&255]}static fromColorRGB(e){return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255}clone(){let e=new JB;return e.fg=this.fg,e.bg=this.bg,e.extended=this.extended.clone(),e}isInverse(){return this.fg&67108864}isBold(){return this.fg&134217728}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:this.fg&268435456}isBlink(){return this.fg&536870912}isInvisible(){return this.fg&1073741824}isItalic(){return this.bg&67108864}isDim(){return this.bg&134217728}isStrikethrough(){return this.fg&2147483648}isProtected(){return this.bg&536870912}isOverline(){return this.bg&1073741824}getFgColorMode(){return this.fg&50331648}getBgColorMode(){return this.bg&50331648}isFgRGB(){return(this.fg&50331648)===50331648}isBgRGB(){return(this.bg&50331648)===50331648}isFgPalette(){return(this.fg&50331648)===16777216||(this.fg&50331648)===33554432}isBgPalette(){return(this.bg&50331648)===16777216||(this.bg&50331648)===33554432}isFgDefault(){return(this.fg&50331648)===0}isBgDefault(){return(this.bg&50331648)===0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(this.fg&50331648){case 16777216:case 33554432:return this.fg&255;case 50331648:return this.fg&16777215;default:return-1}}getBgColor(){switch(this.bg&50331648){case 16777216:case 33554432:return this.bg&255;case 50331648:return this.bg&16777215;default:return-1}}hasExtendedAttrs(){return this.bg&268435456}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(this.bg&268435456&&~this.extended.underlineColor)switch(this.extended.underlineColor&50331648){case 16777216:case 33554432:return this.extended.underlineColor&255;case 50331648:return this.extended.underlineColor&16777215;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return this.bg&268435456&&~this.extended.underlineColor?this.extended.underlineColor&50331648:this.getFgColorMode()}isUnderlineColorRGB(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===50331648:this.isFgRGB()}isUnderlineColorPalette(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===16777216||(this.extended.underlineColor&50331648)===33554432:this.isFgPalette()}isUnderlineColorDefault(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===0:this.isFgDefault()}getUnderlineStyle(){return this.fg&268435456?this.bg&268435456?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}},eg=class QB{constructor(e=0,n=0){this._ext=0,this._urlId=0,this._ext=e,this._urlId=n}get ext(){return this._urlId?this._ext&-469762049|this.underlineStyle<<26:this._ext}set ext(e){this._ext=e}get underlineStyle(){return this._urlId?5:(this._ext&469762048)>>26}set underlineStyle(e){this._ext&=-469762049,this._ext|=e<<26&469762048}get underlineColor(){return this._ext&67108863}set underlineColor(e){this._ext&=-67108864,this._ext|=e&67108863}get urlId(){return this._urlId}set urlId(e){this._urlId=e}get underlineVariantOffset(){let e=(this._ext&3758096384)>>29;return e<0?e^4294967288:e}set underlineVariantOffset(e){this._ext&=536870911,this._ext|=e<<29&3758096384}clone(){return new QB(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}},Br=class ZB extends Bf{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new eg,this.combinedData=""}static fromCharData(e){let n=new ZB;return n.setFromCharData(e),n}isCombined(){return this.content&2097152}getWidth(){return this.content>>22}getChars(){return this.content&2097152?this.combinedData:this.content&2097151?qa(this.content&2097151):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):this.content&2097151}setFromCharData(e){this.fg=e[0],this.bg=0;let n=!1;if(e[1].length>2)n=!0;else if(e[1].length===2){let s=e[1].charCodeAt(0);if(55296<=s&&s<=56319){let r=e[1].charCodeAt(1);56320<=r&&r<=57343?this.content=(s-55296)*1024+r-56320+65536|e[2]<<22:n=!0}else n=!0}else this.content=e[1].charCodeAt(0)|e[2]<<22;n&&(this.combinedData=e[1],this.content=2097152|e[2]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},D3="di$target",dw="di$dependencies",Fb=new Map;function LX(t){return t[dw]||[]}function Kn(t){if(Fb.has(t))return Fb.get(t);let e=function(n,s,r){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");IX(e,n,r)};return e._id=t,Fb.set(t,e),e}function IX(t,e,n){e[D3]===e?e[dw].push({id:t,index:n}):(e[dw]=[{id:t,index:n}],e[D3]=e)}var Cs=Kn("BufferService"),eM=Kn("CoreMouseService"),xo=Kn("CoreService"),PX=Kn("CharsetService"),U2=Kn("InstantiationService"),tM=Kn("LogService"),Ns=Kn("OptionsService"),nM=Kn("OscLinkService"),zX=Kn("UnicodeService"),Mf=Kn("DecorationService"),fw=class{constructor(t,e,n){this._bufferService=t,this._optionsService=e,this._oscLinkService=n}provideLinks(t,e){let n=this._bufferService.buffer.lines.get(t-1);if(!n){e(void 0);return}let s=[],r=this._optionsService.rawOptions.linkHandler,a=new Br,o=n.getTrimmedLength(),c=-1,h=-1,d=!1;for(let g=0;g<o;g++)if(!(h===-1&&!n.hasContent(g))){if(n.loadCell(g,a),a.hasExtendedAttrs()&&a.extended.urlId)if(h===-1){h=g,c=a.extended.urlId;continue}else d=a.extended.urlId!==c;else h!==-1&&(d=!0);if(d||h!==-1&&g===o-1){let m=this._oscLinkService.getLinkData(c)?.uri;if(m){let v={start:{x:h+1,y:t},end:{x:g+(!d&&g===o-1?1:0),y:t}},y=!1;if(!r?.allowNonHttpProtocols)try{let x=new URL(m);["http:","https:"].includes(x.protocol)||(y=!0)}catch{y=!0}y||s.push({text:m,range:v,activate:(x,w)=>r?r.activate(x,w,v):$X(x,w),hover:(x,w)=>r?.hover?.(x,w,v),leave:(x,w)=>r?.leave?.(x,w,v)})}d=!1,a.hasExtendedAttrs()&&a.extended.urlId?(h=g,c=a.extended.urlId):(h=-1,c=-1)}}e(s)}};fw=hn([Le(0,Cs),Le(1,Ns),Le(2,nM)],fw);function $X(t,e){if(confirm(`Do you want to navigate to ${e}?

WARNING: This link could potentially be dangerous`)){let n=window.open();if(n){try{n.opener=null}catch{}n.location.href=e}else console.warn("Opening link blocked as opener could not be cleared")}}var ky=Kn("CharSizeService"),da=Kn("CoreBrowserService"),V2=Kn("MouseService"),fa=Kn("RenderService"),HX=Kn("SelectionService"),sM=Kn("CharacterJoinerService"),Cu=Kn("ThemeService"),rM=Kn("LinkProviderService"),UX=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(t){setTimeout(()=>{throw t.stack?L3.isErrorNoTelemetry(t)?new L3(t.message+`

`+t.stack):new Error(t.message+`

`+t.stack):t},0)}}addListener(t){return this.listeners.push(t),()=>{this._removeListener(t)}}emit(t){this.listeners.forEach(e=>{e(t)})}_removeListener(t){this.listeners.splice(this.listeners.indexOf(t),1)}setUnexpectedErrorHandler(t){this.unexpectedErrorHandler=t}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(t){this.unexpectedErrorHandler(t),this.emit(t)}onUnexpectedExternalError(t){this.unexpectedErrorHandler(t)}},VX=new UX;function Wm(t){FX(t)||VX.onUnexpectedError(t)}var pw="Canceled";function FX(t){return t instanceof qX?!0:t instanceof Error&&t.name===pw&&t.message===pw}var qX=class extends Error{constructor(){super(pw),this.name=this.message}};function KX(t){return new Error(`Illegal argument: ${t}`)}var L3=class mw extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof mw)return e;let n=new mw;return n.message=e.message,n.stack=e.stack,n}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}},gw=class iM extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,iM.prototype)}};function er(t,e=0){return t[t.length-(1+e)]}var WX;(t=>{function e(a){return a<0}t.isLessThan=e;function n(a){return a<=0}t.isLessThanOrEqual=n;function s(a){return a>0}t.isGreaterThan=s;function r(a){return a===0}t.isNeitherLessOrGreaterThan=r,t.greaterThan=1,t.lessThan=-1,t.neitherLessOrGreaterThan=0})(WX||={});function GX(t,e){let n=this,s=!1,r;return function(){return s||(s=!0,e||(r=t.apply(n,arguments))),r}}var aM;(t=>{function e(B){return B&&typeof B=="object"&&typeof B[Symbol.iterator]=="function"}t.is=e;let n=Object.freeze([]);function s(){return n}t.empty=s;function*r(B){yield B}t.single=r;function a(B){return e(B)?B:r(B)}t.wrap=a;function o(B){return B||n}t.from=o;function*c(B){for(let M=B.length-1;M>=0;M--)yield B[M]}t.reverse=c;function h(B){return!B||B[Symbol.iterator]().next().done===!0}t.isEmpty=h;function d(B){return B[Symbol.iterator]().next().value}t.first=d;function g(B,M){let T=0;for(let H of B)if(M(H,T++))return!0;return!1}t.some=g;function m(B,M){for(let T of B)if(M(T))return T}t.find=m;function*v(B,M){for(let T of B)M(T)&&(yield T)}t.filter=v;function*y(B,M){let T=0;for(let H of B)yield M(H,T++)}t.map=y;function*x(B,M){let T=0;for(let H of B)yield*M(H,T++)}t.flatMap=x;function*w(...B){for(let M of B)yield*M}t.concat=w;function S(B,M,T){let H=T;for(let $ of B)H=M(H,$);return H}t.reduce=S;function*k(B,M,T=B.length){for(M<0&&(M+=B.length),T<0?T+=B.length:T>B.length&&(T=B.length);M<T;M++)yield B[M]}t.slice=k;function C(B,M=Number.POSITIVE_INFINITY){let T=[];if(M===0)return[T,B];let H=B[Symbol.iterator]();for(let $=0;$<M;$++){let G=H.next();if(G.done)return[T,t.empty()];T.push(G.value)}return[T,{[Symbol.iterator](){return H}}]}t.consume=C;async function A(B){let M=[];for await(let T of B)M.push(T);return Promise.resolve(M)}t.asyncToArray=A})(aM||={});function ho(t){if(aM.is(t)){let e=[];for(let n of t)if(n)try{n.dispose()}catch(s){e.push(s)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}function YX(...t){return nn(()=>ho(t))}function nn(t){return{dispose:GX(()=>{t()})}}var lM=class oM{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{ho(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?oM.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),void 0)}};lM.DISABLE_DISPOSED_WARNING=!1;var tl=lM,bt=class{constructor(){this._store=new tl,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};bt.None=Object.freeze({dispose(){}});var nu=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(t){this._isDisposed||t===this._value||(this._value?.dispose(),this._value=t)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}clearAndLeak(){let t=this._value;return this._value=void 0,t}},Xi=typeof window=="object"?window:globalThis,yw=class vw{constructor(e){this.element=e,this.next=vw.Undefined,this.prev=vw.Undefined}};yw.Undefined=new yw(void 0);var an=yw,I3=class{constructor(){this._first=an.Undefined,this._last=an.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===an.Undefined}clear(){let t=this._first;for(;t!==an.Undefined;){let e=t.next;t.prev=an.Undefined,t.next=an.Undefined,t=e}this._first=an.Undefined,this._last=an.Undefined,this._size=0}unshift(t){return this._insert(t,!1)}push(t){return this._insert(t,!0)}_insert(t,e){let n=new an(t);if(this._first===an.Undefined)this._first=n,this._last=n;else if(e){let r=this._last;this._last=n,n.prev=r,r.next=n}else{let r=this._first;this._first=n,n.next=r,r.prev=n}this._size+=1;let s=!1;return()=>{s||(s=!0,this._remove(n))}}shift(){if(this._first!==an.Undefined){let t=this._first.element;return this._remove(this._first),t}}pop(){if(this._last!==an.Undefined){let t=this._last.element;return this._remove(this._last),t}}_remove(t){if(t.prev!==an.Undefined&&t.next!==an.Undefined){let e=t.prev;e.next=t.next,t.next.prev=e}else t.prev===an.Undefined&&t.next===an.Undefined?(this._first=an.Undefined,this._last=an.Undefined):t.next===an.Undefined?(this._last=this._last.prev,this._last.next=an.Undefined):t.prev===an.Undefined&&(this._first=this._first.next,this._first.prev=an.Undefined);this._size-=1}*[Symbol.iterator](){let t=this._first;for(;t!==an.Undefined;)yield t.element,t=t.next}},XX=globalThis.performance&&typeof globalThis.performance.now=="function",JX=class cM{static create(e){return new cM(e)}constructor(e){this._now=XX&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}},ns;(t=>{t.None=()=>bt.None;function e(F,K){return m(F,()=>{},0,void 0,!0,void 0,K)}t.defer=e;function n(F){return(K,J=null,q)=>{let P=!1,X;return X=F(U=>{if(!P)return X?X.dispose():P=!0,K.call(J,U)},null,q),P&&X.dispose(),X}}t.once=n;function s(F,K,J){return d((q,P=null,X)=>F(U=>q.call(P,K(U)),null,X),J)}t.map=s;function r(F,K,J){return d((q,P=null,X)=>F(U=>{K(U),q.call(P,U)},null,X),J)}t.forEach=r;function a(F,K,J){return d((q,P=null,X)=>F(U=>K(U)&&q.call(P,U),null,X),J)}t.filter=a;function o(F){return F}t.signal=o;function c(...F){return(K,J=null,q)=>{let P=YX(...F.map(X=>X(U=>K.call(J,U))));return g(P,q)}}t.any=c;function h(F,K,J,q){let P=J;return s(F,X=>(P=K(P,X),P),q)}t.reduce=h;function d(F,K){let J,q={onWillAddFirstListener(){J=F(P.fire,P)},onDidRemoveLastListener(){J?.dispose()}},P=new Ae(q);return K?.add(P),P.event}function g(F,K){return K instanceof Array?K.push(F):K&&K.add(F),F}function m(F,K,J=100,q=!1,P=!1,X,U){let D,O,R,V=0,E,Z={leakWarningThreshold:X,onWillAddFirstListener(){D=F(ne=>{V++,O=K(O,ne),q&&!R&&(ue.fire(O),O=void 0),E=()=>{let de=O;O=void 0,R=void 0,(!q||V>1)&&ue.fire(de),V=0},typeof J=="number"?(clearTimeout(R),R=setTimeout(E,J)):R===void 0&&(R=0,queueMicrotask(E))})},onWillRemoveListener(){P&&V>0&&E?.()},onDidRemoveLastListener(){E=void 0,D.dispose()}},ue=new Ae(Z);return U?.add(ue),ue.event}t.debounce=m;function v(F,K=0,J){return t.debounce(F,(q,P)=>q?(q.push(P),q):[P],K,void 0,!0,void 0,J)}t.accumulate=v;function y(F,K=(q,P)=>q===P,J){let q=!0,P;return a(F,X=>{let U=q||!K(X,P);return q=!1,P=X,U},J)}t.latch=y;function x(F,K,J){return[t.filter(F,K,J),t.filter(F,q=>!K(q),J)]}t.split=x;function w(F,K=!1,J=[],q){let P=J.slice(),X=F(O=>{P?P.push(O):D.fire(O)});q&&q.add(X);let U=()=>{P?.forEach(O=>D.fire(O)),P=null},D=new Ae({onWillAddFirstListener(){X||(X=F(O=>D.fire(O)),q&&q.add(X))},onDidAddFirstListener(){P&&(K?setTimeout(U):U())},onDidRemoveLastListener(){X&&X.dispose(),X=null}});return q&&q.add(D),D.event}t.buffer=w;function S(F,K){return(J,q,P)=>{let X=K(new C);return F(function(U){let D=X.evaluate(U);D!==k&&J.call(q,D)},void 0,P)}}t.chain=S;let k=Symbol("HaltChainable");class C{constructor(){this.steps=[]}map(K){return this.steps.push(K),this}forEach(K){return this.steps.push(J=>(K(J),J)),this}filter(K){return this.steps.push(J=>K(J)?J:k),this}reduce(K,J){let q=J;return this.steps.push(P=>(q=K(q,P),q)),this}latch(K=(J,q)=>J===q){let J=!0,q;return this.steps.push(P=>{let X=J||!K(P,q);return J=!1,q=P,X?P:k}),this}evaluate(K){for(let J of this.steps)if(K=J(K),K===k)break;return K}}function A(F,K,J=q=>q){let q=(...D)=>U.fire(J(...D)),P=()=>F.on(K,q),X=()=>F.removeListener(K,q),U=new Ae({onWillAddFirstListener:P,onDidRemoveLastListener:X});return U.event}t.fromNodeEventEmitter=A;function B(F,K,J=q=>q){let q=(...D)=>U.fire(J(...D)),P=()=>F.addEventListener(K,q),X=()=>F.removeEventListener(K,q),U=new Ae({onWillAddFirstListener:P,onDidRemoveLastListener:X});return U.event}t.fromDOMEventEmitter=B;function M(F){return new Promise(K=>n(F)(K))}t.toPromise=M;function T(F){let K=new Ae;return F.then(J=>{K.fire(J)},()=>{K.fire(void 0)}).finally(()=>{K.dispose()}),K.event}t.fromPromise=T;function H(F,K){return F(J=>K.fire(J))}t.forward=H;function $(F,K,J){return K(J),F(q=>K(q))}t.runAndSubscribe=$;class G{constructor(K,J){this._observable=K,this._counter=0,this._hasChanged=!1;let q={onWillAddFirstListener:()=>{K.addObserver(this)},onDidRemoveLastListener:()=>{K.removeObserver(this)}};this.emitter=new Ae(q),J&&J.add(this.emitter)}beginUpdate(K){this._counter++}handlePossibleChange(K){}handleChange(K,J){this._hasChanged=!0}endUpdate(K){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function z(F,K){return new G(F,K).emitter.event}t.fromObservable=z;function Q(F){return(K,J,q)=>{let P=0,X=!1,U={beginUpdate(){P++},endUpdate(){P--,P===0&&(F.reportChanges(),X&&(X=!1,K.call(J)))},handlePossibleChange(){},handleChange(){X=!0}};F.addObserver(U),F.reportChanges();let D={dispose(){F.removeObserver(U)}};return q instanceof tl?q.add(D):Array.isArray(q)&&q.push(D),D}}t.fromObservableLight=Q})(ns||={});var bw=class _w{constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${_w._idPool++}`,_w.all.add(this)}start(e){this._stopWatch=new JX,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}};bw.all=new Set,bw._idPool=0;var QX=bw,ZX=-1,uM=class hM{constructor(e,n,s=(hM._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e,this.threshold=n,this.name=s,this._warnCountdown=0}dispose(){this._stacks?.clear()}check(e,n){let s=this.threshold;if(s<=0||n<s)return;this._stacks||(this._stacks=new Map);let r=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,r+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=s*.5;let[a,o]=this.getMostFrequentStack(),c=`[${this.name}] potential listener LEAK detected, having ${n} listeners already. MOST frequent listener (${o}):`;console.warn(c),console.warn(a);let h=new nJ(c,a);this._errorHandler(h)}return()=>{let a=this._stacks.get(e.value)||0;this._stacks.set(e.value,a-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,n=0;for(let[s,r]of this._stacks)(!e||n<r)&&(e=[s,r],n=r);return e}};uM._idPool=1;var eJ=uM,tJ=class dM{constructor(e){this.value=e}static create(){let e=new Error;return new dM(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},nJ=class extends Error{constructor(t,e){super(t),this.name="ListenerLeakError",this.stack=e}},sJ=class extends Error{constructor(t,e){super(t),this.name="ListenerRefusalError",this.stack=e}},rJ=0,qb=class{constructor(t){this.value=t,this.id=rJ++}},iJ=2,aJ,Ae=class{constructor(e){this._size=0,this._options=e,this._leakageMon=this._options?.leakWarningThreshold?new eJ(e?.onListenerError??Wm,this._options?.leakWarningThreshold??ZX):void 0,this._perfMon=this._options?._profName?new QX(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){this._disposed||(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose())}get event(){return this._event??=(e,n,s)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let c=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(c);let h=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],d=new sJ(`${c}. HINT: Stack shows most frequent listener (${h[1]}-times)`,h[0]);return(this._options?.onListenerError||Wm)(d),bt.None}if(this._disposed)return bt.None;n&&(e=e.bind(n));let r=new qb(e),a;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(r.stack=tJ.create(),a=this._leakageMon.check(r.stack,this._size+1)),this._listeners?this._listeners instanceof qb?(this._deliveryQueue??=new lJ,this._listeners=[this._listeners,r]):this._listeners.push(r):(this._options?.onWillAddFirstListener?.(this),this._listeners=r,this._options?.onDidAddFirstListener?.(this)),this._size++;let o=nn(()=>{a?.(),this._removeListener(r)});return s instanceof tl?s.add(o):Array.isArray(s)&&s.push(o),o},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let n=this._listeners,s=n.indexOf(e);if(s===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,n[s]=void 0;let r=this._deliveryQueue.current===this;if(this._size*iJ<=n.length){let a=0;for(let o=0;o<n.length;o++)n[o]?n[a++]=n[o]:r&&(this._deliveryQueue.end--,a<this._deliveryQueue.i&&this._deliveryQueue.i--);n.length=a}}_deliver(e,n){if(!e)return;let s=this._options?.onListenerError||Wm;if(!s){e.value(n);return}try{e.value(n)}catch(r){s(r)}}_deliverQueue(e){let n=e.current._listeners;for(;e.i<e.end;)this._deliver(n[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof qb)this._deliver(this._listeners,e);else{let n=this._deliveryQueue;n.enqueue(this,e,this._listeners.length),this._deliverQueue(n)}this._perfMon?.stop()}hasListeners(){return this._size>0}},lJ=class{constructor(){this.i=-1,this.end=0}enqueue(t,e,n){this.i=0,this.end=n,this.current=t,this.value=e}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},xw=class{constructor(){this.mapWindowIdToZoomLevel=new Map,this._onDidChangeZoomLevel=new Ae,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this.mapWindowIdToZoomFactor=new Map,this._onDidChangeFullscreen=new Ae,this.onDidChangeFullscreen=this._onDidChangeFullscreen.event,this.mapWindowIdToFullScreen=new Map}getZoomLevel(e){return this.mapWindowIdToZoomLevel.get(this.getWindowId(e))??0}setZoomLevel(e,n){if(this.getZoomLevel(n)===e)return;let s=this.getWindowId(n);this.mapWindowIdToZoomLevel.set(s,e),this._onDidChangeZoomLevel.fire(s)}getZoomFactor(e){return this.mapWindowIdToZoomFactor.get(this.getWindowId(e))??1}setZoomFactor(e,n){this.mapWindowIdToZoomFactor.set(this.getWindowId(n),e)}setFullscreen(e,n){if(this.isFullscreen(n)===e)return;let s=this.getWindowId(n);this.mapWindowIdToFullScreen.set(s,e),this._onDidChangeFullscreen.fire(s)}isFullscreen(e){return!!this.mapWindowIdToFullScreen.get(this.getWindowId(e))}getWindowId(e){return e.vscodeWindowId}};xw.INSTANCE=new xw;var F2=xw;function oJ(t,e,n){typeof e=="string"&&(e=t.matchMedia(e)),e.addEventListener("change",n)}F2.INSTANCE.onDidChangeZoomLevel;function cJ(t){return F2.INSTANCE.getZoomFactor(t)}F2.INSTANCE.onDidChangeFullscreen;var Nu=typeof navigator=="object"?navigator.userAgent:"",ww=Nu.indexOf("Firefox")>=0,uJ=Nu.indexOf("AppleWebKit")>=0,q2=Nu.indexOf("Chrome")>=0,hJ=!q2&&Nu.indexOf("Safari")>=0;Nu.indexOf("Electron/")>=0;Nu.indexOf("Android")>=0;var Kb=!1;if(typeof Xi.matchMedia=="function"){let t=Xi.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),e=Xi.matchMedia("(display-mode: fullscreen)");Kb=t.matches,oJ(Xi,t,({matches:n})=>{Kb&&e.matches||(Kb=n)})}var Ac="en",Sw=!1,kw=!1,Gm=!1,fM=!1,bm,Ym=Ac,P3=Ac,dJ,Ki,Gl=globalThis,ar;typeof Gl.vscode<"u"&&typeof Gl.vscode.process<"u"?ar=Gl.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(ar=process);var fJ=typeof ar?.versions?.electron=="string",pJ=fJ&&ar?.type==="renderer";if(typeof ar=="object"){Sw=ar.platform==="win32",kw=ar.platform==="darwin",Gm=ar.platform==="linux",Gm&&ar.env.SNAP&&ar.env.SNAP_REVISION,ar.env.CI||ar.env.BUILD_ARTIFACTSTAGINGDIRECTORY,bm=Ac,Ym=Ac;let t=ar.env.VSCODE_NLS_CONFIG;if(t)try{let e=JSON.parse(t);bm=e.userLocale,P3=e.osLocale,Ym=e.resolvedLanguage||Ac,dJ=e.languagePack?.translationsConfigFile}catch{}fM=!0}else typeof navigator=="object"&&!pJ?(Ki=navigator.userAgent,Sw=Ki.indexOf("Windows")>=0,kw=Ki.indexOf("Macintosh")>=0,(Ki.indexOf("Macintosh")>=0||Ki.indexOf("iPad")>=0||Ki.indexOf("iPhone")>=0)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Gm=Ki.indexOf("Linux")>=0,Ki?.indexOf("Mobi")>=0,Ym=globalThis._VSCODE_NLS_LANGUAGE||Ac,bm=navigator.language.toLowerCase(),P3=bm):console.error("Unable to resolve platform.");var pM=Sw,pi=kw,mJ=Gm,z3=fM,yi=Ki,Ha=Ym,gJ;(t=>{function e(){return Ha}t.value=e;function n(){return Ha.length===2?Ha==="en":Ha.length>=3?Ha[0]==="e"&&Ha[1]==="n"&&Ha[2]==="-":!1}t.isDefaultVariant=n;function s(){return Ha==="en"}t.isDefault=s})(gJ||={});var yJ=typeof Gl.postMessage=="function"&&!Gl.importScripts;(()=>{if(yJ){let t=[];Gl.addEventListener("message",n=>{if(n.data&&n.data.vscodeScheduleAsyncWork)for(let s=0,r=t.length;s<r;s++){let a=t[s];if(a.id===n.data.vscodeScheduleAsyncWork){t.splice(s,1),a.callback();return}}});let e=0;return n=>{let s=++e;t.push({id:s,callback:n}),Gl.postMessage({vscodeScheduleAsyncWork:s},"*")}}return t=>setTimeout(t)})();var vJ=!!(yi&&yi.indexOf("Chrome")>=0);yi&&yi.indexOf("Firefox")>=0;!vJ&&yi&&yi.indexOf("Safari")>=0;yi&&yi.indexOf("Edg/")>=0;yi&&yi.indexOf("Android")>=0;var pc=typeof navigator=="object"?navigator:{};z3||document.queryCommandSupported&&document.queryCommandSupported("copy")||pc&&pc.clipboard&&pc.clipboard.writeText,z3||pc&&pc.clipboard&&pc.clipboard.readText;var K2=class{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(t,e){this._keyCodeToStr[t]=e,this._strToKeyCode[e.toLowerCase()]=t}keyCodeToStr(t){return this._keyCodeToStr[t]}strToKeyCode(t){return this._strToKeyCode[t.toLowerCase()]||0}},Wb=new K2,$3=new K2,H3=new K2,bJ=new Array(230),mM;(t=>{function e(c){return Wb.keyCodeToStr(c)}t.toString=e;function n(c){return Wb.strToKeyCode(c)}t.fromString=n;function s(c){return $3.keyCodeToStr(c)}t.toUserSettingsUS=s;function r(c){return H3.keyCodeToStr(c)}t.toUserSettingsGeneral=r;function a(c){return $3.strToKeyCode(c)||H3.strToKeyCode(c)}t.fromUserSettings=a;function o(c){if(c>=98&&c<=113)return null;switch(c){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return Wb.keyCodeToStr(c)}t.toElectronAccelerator=o})(mM||={});var _J=class gM{constructor(e,n,s,r,a){this.ctrlKey=e,this.shiftKey=n,this.altKey=s,this.metaKey=r,this.keyCode=a}equals(e){return e instanceof gM&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}getHashCode(){let e=this.ctrlKey?"1":"0",n=this.shiftKey?"1":"0",s=this.altKey?"1":"0",r=this.metaKey?"1":"0";return`K${e}${n}${s}${r}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new xJ([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},xJ=class{constructor(t){if(t.length===0)throw KX("chords");this.chords=t}getHashCode(){let t="";for(let e=0,n=this.chords.length;e<n;e++)e!==0&&(t+=";"),t+=this.chords[e].getHashCode();return t}equals(t){if(t===null||this.chords.length!==t.chords.length)return!1;for(let e=0;e<this.chords.length;e++)if(!this.chords[e].equals(t.chords[e]))return!1;return!0}};function wJ(t){if(t.charCode){let n=String.fromCharCode(t.charCode).toUpperCase();return mM.fromString(n)}let e=t.keyCode;if(e===3)return 7;if(ww)switch(e){case 59:return 85;case 60:if(mJ)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(pi)return 57;break}else if(uJ&&(pi&&e===93||!pi&&e===92))return 57;return bJ[e]||0}var SJ=pi?256:2048,kJ=512,CJ=1024,NJ=pi?2048:256,U3=class{constructor(t){this._standardKeyboardEventBrand=!0;let e=t;this.browserEvent=e,this.target=e.target,this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,this.altGraphKey=e.getModifierState?.("AltGraph"),this.keyCode=wJ(e),this.code=e.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(t){return this._asKeybinding===t}_computeKeybinding(){let t=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(t=this.keyCode);let e=0;return this.ctrlKey&&(e|=SJ),this.altKey&&(e|=kJ),this.shiftKey&&(e|=CJ),this.metaKey&&(e|=NJ),e|=t,e}_computeKeyCodeChord(){let t=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(t=this.keyCode),new _J(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,t)}},V3=new WeakMap;function EJ(t){if(!t.parent||t.parent===t)return null;try{let e=t.location,n=t.parent.location;if(e.origin!=="null"&&n.origin!=="null"&&e.origin!==n.origin)return null}catch{return null}return t.parent}var AJ=class{static getSameOriginWindowChain(t){let e=V3.get(t);if(!e){e=[],V3.set(t,e);let n=t,s;do s=EJ(n),s?e.push({window:new WeakRef(n),iframeElement:n.frameElement||null}):e.push({window:new WeakRef(n),iframeElement:null}),n=s;while(n)}return e.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(t,e){if(!e||t===e)return{top:0,left:0};let n=0,s=0,r=this.getSameOriginWindowChain(t);for(let a of r){let o=a.window.deref();if(n+=o?.scrollY??0,s+=o?.scrollX??0,o===e||!a.iframeElement)break;let c=a.iframeElement.getBoundingClientRect();n+=c.top,s+=c.left}return{top:n,left:s}}},_m=class{constructor(t,e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=e.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);let n=AJ.getPositionOfChildWindowRelativeToAncestorWindow(t,e.view);this.posx-=n.left,this.posy-=n.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}},F3=class{constructor(t,e=0,n=0){this.browserEvent=t||null,this.target=t?t.target||t.targetNode||t.srcElement:null,this.deltaY=n,this.deltaX=e;let s=!1;if(q2){let r=navigator.userAgent.match(/Chrome\/(\d+)/);s=(r?parseInt(r[1]):123)<=122}if(t){let r=t,a=t,o=t.view?.devicePixelRatio||1;if(typeof r.wheelDeltaY<"u")s?this.deltaY=r.wheelDeltaY/(120*o):this.deltaY=r.wheelDeltaY/120;else if(typeof a.VERTICAL_AXIS<"u"&&a.axis===a.VERTICAL_AXIS)this.deltaY=-a.detail/3;else if(t.type==="wheel"){let c=t;c.deltaMode===c.DOM_DELTA_LINE?ww&&!pi?this.deltaY=-t.deltaY/3:this.deltaY=-t.deltaY:this.deltaY=-t.deltaY/40}if(typeof r.wheelDeltaX<"u")hJ&&pM?this.deltaX=-(r.wheelDeltaX/120):s?this.deltaX=r.wheelDeltaX/(120*o):this.deltaX=r.wheelDeltaX/120;else if(typeof a.HORIZONTAL_AXIS<"u"&&a.axis===a.HORIZONTAL_AXIS)this.deltaX=-t.detail/3;else if(t.type==="wheel"){let c=t;c.deltaMode===c.DOM_DELTA_LINE?ww&&!pi?this.deltaX=-t.deltaX/3:this.deltaX=-t.deltaX:this.deltaX=-t.deltaX/40}this.deltaY===0&&this.deltaX===0&&t.wheelDelta&&(s?this.deltaY=t.wheelDelta/(120*o):this.deltaY=t.wheelDelta/120)}}preventDefault(){this.browserEvent?.preventDefault()}stopPropagation(){this.browserEvent?.stopPropagation()}},yM=Object.freeze(function(t,e){let n=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(n)}}}),jJ;(t=>{function e(n){return n===t.None||n===t.Cancelled||n instanceof TJ?!0:!n||typeof n!="object"?!1:typeof n.isCancellationRequested=="boolean"&&typeof n.onCancellationRequested=="function"}t.isCancellationToken=e,t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ns.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:yM})})(jJ||={});var TJ=class{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?yM:(this._emitter||(this._emitter=new Ae),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},W2=class{constructor(t,e){this._isDisposed=!1,this._token=-1,typeof t=="function"&&typeof e=="number"&&this.setIfNotSet(t,e)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(t,e){if(this._isDisposed)throw new gw("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,t()},e)}setIfNotSet(t,e){if(this._isDisposed)throw new gw("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,t()},e))}},OJ=class{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(t,e,n=globalThis){if(this.isDisposed)throw new gw("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();let s=n.setInterval(()=>{t()},e);this.disposable=nn(()=>{n.clearInterval(s),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}},RJ;(t=>{async function e(s){let r,a=await Promise.all(s.map(o=>o.then(c=>c,c=>{r||(r=c)})));if(typeof r<"u")throw r;return a}t.settled=e;function n(s){return new Promise(async(r,a)=>{try{await s(r,a)}catch(o){a(o)}})}t.withAsyncBody=n})(RJ||={});var q3=class Nr{static fromArray(e){return new Nr(n=>{n.emitMany(e)})}static fromPromise(e){return new Nr(async n=>{n.emitMany(await e)})}static fromPromises(e){return new Nr(async n=>{await Promise.all(e.map(async s=>n.emitOne(await s)))})}static merge(e){return new Nr(async n=>{await Promise.all(e.map(async s=>{for await(let r of s)n.emitOne(r)}))})}constructor(e,n){this._state=0,this._results=[],this._error=null,this._onReturn=n,this._onStateChanged=new Ae,queueMicrotask(async()=>{let s={emitOne:r=>this.emitOne(r),emitMany:r=>this.emitMany(r),reject:r=>this.reject(r)};try{await Promise.resolve(e(s)),this.resolve()}catch(r){this.reject(r)}finally{s.emitOne=void 0,s.emitMany=void 0,s.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await ns.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>(this._onReturn?.(),{done:!0,value:void 0})}}static map(e,n){return new Nr(async s=>{for await(let r of e)s.emitOne(n(r))})}map(e){return Nr.map(this,e)}static filter(e,n){return new Nr(async s=>{for await(let r of e)n(r)&&s.emitOne(r)})}filter(e){return Nr.filter(this,e)}static coalesce(e){return Nr.filter(e,n=>!!n)}coalesce(){return Nr.coalesce(this)}static async toPromise(e){let n=[];for await(let s of e)n.push(s);return n}toPromise(){return Nr.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};q3.EMPTY=q3.fromArray([]);var{getWindow:hi,getWindowId:BJ,onDidRegisterWindow:MJ}=(function(){let t=new Map,e={window:Xi,disposables:new tl};t.set(Xi.vscodeWindowId,e);let n=new Ae,s=new Ae,r=new Ae;function a(o,c){return(typeof o=="number"?t.get(o):void 0)??(c?e:void 0)}return{onDidRegisterWindow:n.event,onWillUnregisterWindow:r.event,onDidUnregisterWindow:s.event,registerWindow(o){if(t.has(o.vscodeWindowId))return bt.None;let c=new tl,h={window:o,disposables:c.add(new tl)};return t.set(o.vscodeWindowId,h),c.add(nn(()=>{t.delete(o.vscodeWindowId),s.fire(o)})),c.add(st(o,Un.BEFORE_UNLOAD,()=>{r.fire(o)})),n.fire(h),c},getWindows(){return t.values()},getWindowsCount(){return t.size},getWindowId(o){return o.vscodeWindowId},hasWindow(o){return t.has(o)},getWindowById:a,getWindow(o){let c=o;if(c?.ownerDocument?.defaultView)return c.ownerDocument.defaultView.window;let h=o;return h?.view?h.view.window:Xi},getDocument(o){return hi(o).document}}})(),DJ=class{constructor(t,e,n,s){this._node=t,this._type=e,this._handler=n,this._options=s||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}};function st(t,e,n,s){return new DJ(t,e,n,s)}var K3=function(t,e,n,s){return st(t,e,n,s)},G2,LJ=class extends OJ{constructor(t){super(),this.defaultTarget=t&&hi(t)}cancelAndSet(t,e,n){return super.cancelAndSet(t,e,n??this.defaultTarget)}},W3=class{constructor(t,e=0){this._runner=t,this.priority=e,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(t){Wm(t)}}static sort(t,e){return e.priority-t.priority}};(function(){let t=new Map,e=new Map,n=new Map,s=new Map,r=a=>{n.set(a,!1);let o=t.get(a)??[];for(e.set(a,o),t.set(a,[]),s.set(a,!0);o.length>0;)o.sort(W3.sort),o.shift().execute();s.set(a,!1)};G2=(a,o,c=0)=>{let h=BJ(a),d=new W3(o,c),g=t.get(h);return g||(g=[],t.set(h,g)),g.push(d),n.get(h)||(n.set(h,!0),a.requestAnimationFrame(()=>r(h))),d}})();function IJ(t){let e=t.getBoundingClientRect(),n=hi(t);return{left:e.left+n.scrollX,top:e.top+n.scrollY,width:e.width,height:e.height}}var Un={CLICK:"click",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",KEY_DOWN:"keydown",KEY_UP:"keyup",BEFORE_UNLOAD:"beforeunload",CHANGE:"change",FOCUS:"focus",BLUR:"blur",INPUT:"input"},PJ=class{constructor(t){this.domNode=t,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingTop="",this._paddingLeft="",this._paddingBottom="",this._paddingRight="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(t){let e=Is(t);this._maxWidth!==e&&(this._maxWidth=e,this.domNode.style.maxWidth=this._maxWidth)}setWidth(t){let e=Is(t);this._width!==e&&(this._width=e,this.domNode.style.width=this._width)}setHeight(t){let e=Is(t);this._height!==e&&(this._height=e,this.domNode.style.height=this._height)}setTop(t){let e=Is(t);this._top!==e&&(this._top=e,this.domNode.style.top=this._top)}setLeft(t){let e=Is(t);this._left!==e&&(this._left=e,this.domNode.style.left=this._left)}setBottom(t){let e=Is(t);this._bottom!==e&&(this._bottom=e,this.domNode.style.bottom=this._bottom)}setRight(t){let e=Is(t);this._right!==e&&(this._right=e,this.domNode.style.right=this._right)}setPaddingTop(t){let e=Is(t);this._paddingTop!==e&&(this._paddingTop=e,this.domNode.style.paddingTop=this._paddingTop)}setPaddingLeft(t){let e=Is(t);this._paddingLeft!==e&&(this._paddingLeft=e,this.domNode.style.paddingLeft=this._paddingLeft)}setPaddingBottom(t){let e=Is(t);this._paddingBottom!==e&&(this._paddingBottom=e,this.domNode.style.paddingBottom=this._paddingBottom)}setPaddingRight(t){let e=Is(t);this._paddingRight!==e&&(this._paddingRight=e,this.domNode.style.paddingRight=this._paddingRight)}setFontFamily(t){this._fontFamily!==t&&(this._fontFamily=t,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(t){let e=Is(t);this._fontSize!==e&&(this._fontSize=e,this.domNode.style.fontSize=this._fontSize)}setFontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(t){this._fontFeatureSettings!==t&&(this._fontFeatureSettings=t,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(t){this._fontVariationSettings!==t&&(this._fontVariationSettings=t,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(t){this._textDecoration!==t&&(this._textDecoration=t,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(t){let e=Is(t);this._lineHeight!==e&&(this._lineHeight=e,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(t){let e=Is(t);this._letterSpacing!==e&&(this._letterSpacing=e,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(t){this._className!==t&&(this._className=t,this.domNode.className=this._className)}toggleClassName(t,e){this.domNode.classList.toggle(t,e),this._className=this.domNode.className}setDisplay(t){this._display!==t&&(this._display=t,this.domNode.style.display=this._display)}setPosition(t){this._position!==t&&(this._position=t,this.domNode.style.position=this._position)}setVisibility(t){this._visibility!==t&&(this._visibility=t,this.domNode.style.visibility=this._visibility)}setColor(t){this._color!==t&&(this._color=t,this.domNode.style.color=this._color)}setBackgroundColor(t){this._backgroundColor!==t&&(this._backgroundColor=t,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(t){this._layerHint!==t&&(this._layerHint=t,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(t){this._boxShadow!==t&&(this._boxShadow=t,this.domNode.style.boxShadow=t)}setContain(t){this._contain!==t&&(this._contain=t,this.domNode.style.contain=this._contain)}setAttribute(t,e){this.domNode.setAttribute(t,e)}removeAttribute(t){this.domNode.removeAttribute(t)}appendChild(t){this.domNode.appendChild(t.domNode)}removeChild(t){this.domNode.removeChild(t.domNode)}};function Is(t){return typeof t=="number"?`${t}px`:t}function Dd(t){return new PJ(t)}var vM=class{constructor(){this._hooks=new tl,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(t,e){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let n=this._onStopCallback;this._onStopCallback=null,t&&n&&n(e)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(t,e,n,s,r){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=s,this._onStopCallback=r;let a=t;try{t.setPointerCapture(e),this._hooks.add(nn(()=>{try{t.releasePointerCapture(e)}catch{}}))}catch{a=hi(t)}this._hooks.add(st(a,Un.POINTER_MOVE,o=>{if(o.buttons!==n){this.stopMonitoring(!0);return}o.preventDefault(),this._pointerMoveCallback(o)})),this._hooks.add(st(a,Un.POINTER_UP,o=>this.stopMonitoring(!0)))}};function zJ(t,e,n){let s=null,r=null;if(typeof n.value=="function"?(s="value",r=n.value,r.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof n.get=="function"&&(s="get",r=n.get),!r)throw new Error("not supported");let a=`$memoize$${e}`;n[s]=function(...o){return this.hasOwnProperty(a)||Object.defineProperty(this,a,{configurable:!1,enumerable:!1,writable:!1,value:r.apply(this,o)}),this[a]}}var ai;(t=>(t.Tap="-xterm-gesturetap",t.Change="-xterm-gesturechange",t.Start="-xterm-gesturestart",t.End="-xterm-gesturesend",t.Contextmenu="-xterm-gesturecontextmenu"))(ai||={});var dd=class cs extends bt{constructor(){super(),this.dispatched=!1,this.targets=new I3,this.ignoreTargets=new I3,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(ns.runAndSubscribe(MJ,({window:e,disposables:n})=>{n.add(st(e.document,"touchstart",s=>this.onTouchStart(s),{passive:!1})),n.add(st(e.document,"touchend",s=>this.onTouchEnd(e,s))),n.add(st(e.document,"touchmove",s=>this.onTouchMove(s),{passive:!1}))},{window:Xi,disposables:this._store}))}static addTarget(e){if(!cs.isTouchDevice())return bt.None;cs.INSTANCE||(cs.INSTANCE=new cs);let n=cs.INSTANCE.targets.push(e);return nn(n)}static ignoreTarget(e){if(!cs.isTouchDevice())return bt.None;cs.INSTANCE||(cs.INSTANCE=new cs);let n=cs.INSTANCE.ignoreTargets.push(e);return nn(n)}static isTouchDevice(){return"ontouchstart"in Xi||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){let n=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let s=0,r=e.targetTouches.length;s<r;s++){let a=e.targetTouches.item(s);this.activeTouches[a.identifier]={id:a.identifier,initialTarget:a.target,initialTimeStamp:n,initialPageX:a.pageX,initialPageY:a.pageY,rollingTimestamps:[n],rollingPageX:[a.pageX],rollingPageY:[a.pageY]};let o=this.newGestureEvent(ai.Start,a.target);o.pageX=a.pageX,o.pageY=a.pageY,this.dispatchEvent(o)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e,n){let s=Date.now(),r=Object.keys(this.activeTouches).length;for(let a=0,o=n.changedTouches.length;a<o;a++){let c=n.changedTouches.item(a);if(!this.activeTouches.hasOwnProperty(String(c.identifier))){console.warn("move of an UNKNOWN touch",c);continue}let h=this.activeTouches[c.identifier],d=Date.now()-h.initialTimeStamp;if(d<cs.HOLD_DELAY&&Math.abs(h.initialPageX-er(h.rollingPageX))<30&&Math.abs(h.initialPageY-er(h.rollingPageY))<30){let g=this.newGestureEvent(ai.Tap,h.initialTarget);g.pageX=er(h.rollingPageX),g.pageY=er(h.rollingPageY),this.dispatchEvent(g)}else if(d>=cs.HOLD_DELAY&&Math.abs(h.initialPageX-er(h.rollingPageX))<30&&Math.abs(h.initialPageY-er(h.rollingPageY))<30){let g=this.newGestureEvent(ai.Contextmenu,h.initialTarget);g.pageX=er(h.rollingPageX),g.pageY=er(h.rollingPageY),this.dispatchEvent(g)}else if(r===1){let g=er(h.rollingPageX),m=er(h.rollingPageY),v=er(h.rollingTimestamps)-h.rollingTimestamps[0],y=g-h.rollingPageX[0],x=m-h.rollingPageY[0],w=[...this.targets].filter(S=>h.initialTarget instanceof Node&&S.contains(h.initialTarget));this.inertia(e,w,s,Math.abs(y)/v,y>0?1:-1,g,Math.abs(x)/v,x>0?1:-1,m)}this.dispatchEvent(this.newGestureEvent(ai.End,h.initialTarget)),delete this.activeTouches[c.identifier]}this.dispatched&&(n.preventDefault(),n.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,n){let s=document.createEvent("CustomEvent");return s.initEvent(e,!1,!0),s.initialTarget=n,s.tapCount=0,s}dispatchEvent(e){if(e.type===ai.Tap){let n=new Date().getTime(),s=0;n-this._lastSetTapCountTime>cs.CLEAR_TAP_COUNT_TIME?s=1:s=2,this._lastSetTapCountTime=n,e.tapCount=s}else(e.type===ai.Change||e.type===ai.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(let s of this.ignoreTargets)if(s.contains(e.initialTarget))return;let n=[];for(let s of this.targets)if(s.contains(e.initialTarget)){let r=0,a=e.initialTarget;for(;a&&a!==s;)r++,a=a.parentElement;n.push([r,s])}n.sort((s,r)=>s[0]-r[0]);for(let[s,r]of n)r.dispatchEvent(e),this.dispatched=!0}}inertia(e,n,s,r,a,o,c,h,d){this.handle=G2(e,()=>{let g=Date.now(),m=g-s,v=0,y=0,x=!0;r+=cs.SCROLL_FRICTION*m,c+=cs.SCROLL_FRICTION*m,r>0&&(x=!1,v=a*r*m),c>0&&(x=!1,y=h*c*m);let w=this.newGestureEvent(ai.Change);w.translationX=v,w.translationY=y,n.forEach(S=>S.dispatchEvent(w)),x||this.inertia(e,n,g,r,a,o+v,c,h,d+y)})}onTouchMove(e){let n=Date.now();for(let s=0,r=e.changedTouches.length;s<r;s++){let a=e.changedTouches.item(s);if(!this.activeTouches.hasOwnProperty(String(a.identifier))){console.warn("end of an UNKNOWN touch",a);continue}let o=this.activeTouches[a.identifier],c=this.newGestureEvent(ai.Change,o.initialTarget);c.translationX=a.pageX-er(o.rollingPageX),c.translationY=a.pageY-er(o.rollingPageY),c.pageX=a.pageX,c.pageY=a.pageY,this.dispatchEvent(c),o.rollingPageX.length>3&&(o.rollingPageX.shift(),o.rollingPageY.shift(),o.rollingTimestamps.shift()),o.rollingPageX.push(a.pageX),o.rollingPageY.push(a.pageY),o.rollingTimestamps.push(n)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}};dd.SCROLL_FRICTION=-.005,dd.HOLD_DELAY=700,dd.CLEAR_TAP_COUNT_TIME=400,hn([zJ],dd,"isTouchDevice",1);var $J=dd,Y2=class extends bt{onclick(t,e){this._register(st(t,Un.CLICK,n=>e(new _m(hi(t),n))))}onmousedown(t,e){this._register(st(t,Un.MOUSE_DOWN,n=>e(new _m(hi(t),n))))}onmouseover(t,e){this._register(st(t,Un.MOUSE_OVER,n=>e(new _m(hi(t),n))))}onmouseleave(t,e){this._register(st(t,Un.MOUSE_LEAVE,n=>e(new _m(hi(t),n))))}onkeydown(t,e){this._register(st(t,Un.KEY_DOWN,n=>e(new U3(n))))}onkeyup(t,e){this._register(st(t,Un.KEY_UP,n=>e(new U3(n))))}oninput(t,e){this._register(st(t,Un.INPUT,e))}onblur(t,e){this._register(st(t,Un.BLUR,e))}onfocus(t,e){this._register(st(t,Un.FOCUS,e))}onchange(t,e){this._register(st(t,Un.CHANGE,e))}ignoreGesture(t){return $J.ignoreTarget(t)}},G3=11,HJ=class extends Y2{constructor(t){super(),this._onActivate=t.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=t.bgWidth+"px",this.bgDomNode.style.height=t.bgHeight+"px",typeof t.top<"u"&&(this.bgDomNode.style.top="0px"),typeof t.left<"u"&&(this.bgDomNode.style.left="0px"),typeof t.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof t.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=t.className,this.domNode.style.position="absolute",this.domNode.style.width=G3+"px",this.domNode.style.height=G3+"px",typeof t.top<"u"&&(this.domNode.style.top=t.top+"px"),typeof t.left<"u"&&(this.domNode.style.left=t.left+"px"),typeof t.bottom<"u"&&(this.domNode.style.bottom=t.bottom+"px"),typeof t.right<"u"&&(this.domNode.style.right=t.right+"px"),this._pointerMoveMonitor=this._register(new vM),this._register(K3(this.bgDomNode,Un.POINTER_DOWN,e=>this._arrowPointerDown(e))),this._register(K3(this.domNode,Un.POINTER_DOWN,e=>this._arrowPointerDown(e))),this._pointerdownRepeatTimer=this._register(new LJ),this._pointerdownScheduleRepeatTimer=this._register(new W2)}_arrowPointerDown(t){if(!t.target||!(t.target instanceof Element))return;let e=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,hi(t))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(e,200),this._pointerMoveMonitor.startMonitoring(t.target,t.pointerId,t.buttons,n=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),t.preventDefault()}},UJ=class Cw{constructor(e,n,s,r,a,o,c){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(n=n|0,s=s|0,r=r|0,a=a|0,o=o|0,c=c|0),this.rawScrollLeft=r,this.rawScrollTop=c,n<0&&(n=0),r+n>s&&(r=s-n),r<0&&(r=0),a<0&&(a=0),c+a>o&&(c=o-a),c<0&&(c=0),this.width=n,this.scrollWidth=s,this.scrollLeft=r,this.height=a,this.scrollHeight=o,this.scrollTop=c}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,n){return new Cw(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,n?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,n?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new Cw(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,n){let s=this.width!==e.width,r=this.scrollWidth!==e.scrollWidth,a=this.scrollLeft!==e.scrollLeft,o=this.height!==e.height,c=this.scrollHeight!==e.scrollHeight,h=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:n,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:s,scrollWidthChanged:r,scrollLeftChanged:a,heightChanged:o,scrollHeightChanged:c,scrollTopChanged:h}}},VJ=class extends bt{constructor(t){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new Ae),this.onScroll=this._onScroll.event,this._smoothScrollDuration=t.smoothScrollDuration,this._scheduleAtNextAnimationFrame=t.scheduleAtNextAnimationFrame,this._state=new UJ(t.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(t){this._smoothScrollDuration=t}validateScrollPosition(t){return this._state.withScrollPosition(t)}getScrollDimensions(){return this._state}setScrollDimensions(t,e){let n=this._state.withScrollDimensions(t,e);this._setState(n,!!this._smoothScrolling),this._smoothScrolling?.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(t){let e=this._state.withScrollPosition(t);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(e,!1)}setScrollPositionSmooth(t,e){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(t);if(this._smoothScrolling){t={scrollLeft:typeof t.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:t.scrollLeft,scrollTop:typeof t.scrollTop>"u"?this._smoothScrolling.to.scrollTop:t.scrollTop};let n=this._state.withScrollPosition(t);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let s;e?s=new X3(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):s=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=s}else{let n=this._state.withScrollPosition(t);this._smoothScrolling=X3.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;let t=this._smoothScrolling.tick(),e=this._state.withScrollPosition(t);if(this._setState(e,!0),!!this._smoothScrolling){if(t.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(t,e){let n=this._state;n.equals(t)||(this._state=t,this._onScroll.fire(this._state.createScrollEvent(n,e)))}},Y3=class{constructor(t,e,n){this.scrollLeft=t,this.scrollTop=e,this.isDone=n}};function Gb(t,e){let n=e-t;return function(s){return t+n*KJ(s)}}function FJ(t,e,n){return function(s){return s<n?t(s/n):e((s-n)/(1-n))}}var X3=class Nw{constructor(e,n,s,r){this.from=e,this.to=n,this.duration=r,this.startTime=s,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,n,s){if(Math.abs(e-n)>2.5*s){let r,a;return e<n?(r=e+.75*s,a=n-.75*s):(r=e-.75*s,a=n+.75*s),FJ(Gb(e,r),Gb(a,n),.33)}return Gb(e,n)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){let n=(e-this.startTime)/this.duration;if(n<1){let s=this.scrollLeft(n),r=this.scrollTop(n);return new Y3(s,r,!1)}return new Y3(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,n,s){return Nw.start(e,n,s)}static start(e,n,s){s=s+10;let r=Date.now()-10;return new Nw(e,n,r,s)}};function qJ(t){return Math.pow(t,3)}function KJ(t){return 1-qJ(1-t)}var WJ=class extends bt{constructor(t,e,n){super(),this._visibility=t,this._visibleClassName=e,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new W2)}setVisibility(t){this._visibility!==t&&(this._visibility=t,this._updateShouldBeVisible())}setShouldBeVisible(t){this._rawShouldBeVisible=t,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){let t=this._applyVisibilitySetting();this._shouldBeVisible!==t&&(this._shouldBeVisible=t,this.ensureVisibility())}setIsNeeded(t){this._isNeeded!==t&&(this._isNeeded=t,this.ensureVisibility())}setDomNode(t){this._domNode=t,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode?.setClassName(this._visibleClassName)},0))}_hide(t){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode?.setClassName(this._invisibleClassName+(t?" fade":"")))}},GJ=140,bM=class extends Y2{constructor(t){super(),this._lazyRender=t.lazyRender,this._host=t.host,this._scrollable=t.scrollable,this._scrollByPage=t.scrollByPage,this._scrollbarState=t.scrollbarState,this._visibilityController=this._register(new WJ(t.visibility,"visible scrollbar "+t.extraScrollbarClassName,"invisible scrollbar "+t.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new vM),this._shouldRender=!0,this.domNode=Dd(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(st(this.domNode.domNode,Un.POINTER_DOWN,e=>this._domNodePointerDown(e)))}_createArrow(t){let e=this._register(new HJ(t));this.domNode.domNode.appendChild(e.bgDomNode),this.domNode.domNode.appendChild(e.domNode)}_createSlider(t,e,n,s){this.slider=Dd(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(t),this.slider.setLeft(e),typeof n=="number"&&this.slider.setWidth(n),typeof s=="number"&&this.slider.setHeight(s),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(st(this.slider.domNode,Un.POINTER_DOWN,r=>{r.button===0&&(r.preventDefault(),this._sliderPointerDown(r))})),this.onclick(this.slider.domNode,r=>{r.leftButton&&r.stopPropagation()})}_onElementSize(t){return this._scrollbarState.setVisibleSize(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(t){return this._scrollbarState.setScrollSize(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(t){return this._scrollbarState.setScrollPosition(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(t){t.target===this.domNode.domNode&&this._onPointerDown(t)}delegatePointerDown(t){let e=this.domNode.domNode.getClientRects()[0].top,n=e+this._scrollbarState.getSliderPosition(),s=e+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),r=this._sliderPointerPosition(t);n<=r&&r<=s?t.button===0&&(t.preventDefault(),this._sliderPointerDown(t)):this._onPointerDown(t)}_onPointerDown(t){let e,n;if(t.target===this.domNode.domNode&&typeof t.offsetX=="number"&&typeof t.offsetY=="number")e=t.offsetX,n=t.offsetY;else{let r=IJ(this.domNode.domNode);e=t.pageX-r.left,n=t.pageY-r.top}let s=this._pointerDownRelativePosition(e,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(s):this._scrollbarState.getDesiredScrollPositionFromOffset(s)),t.button===0&&(t.preventDefault(),this._sliderPointerDown(t))}_sliderPointerDown(t){if(!t.target||!(t.target instanceof Element))return;let e=this._sliderPointerPosition(t),n=this._sliderOrthogonalPointerPosition(t),s=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(t.target,t.pointerId,t.buttons,r=>{let a=this._sliderOrthogonalPointerPosition(r),o=Math.abs(a-n);if(pM&&o>GJ){this._setDesiredScrollPositionNow(s.getScrollPosition());return}let c=this._sliderPointerPosition(r)-e;this._setDesiredScrollPositionNow(s.getDesiredScrollPositionFromDelta(c))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(t){let e={};this.writeScrollPosition(e,t),this._scrollable.setScrollPositionNow(e)}updateScrollbarSize(t){this._updateScrollbarSize(t),this._scrollbarState.setScrollbarSize(t),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}},_M=class Ew{constructor(e,n,s,r,a,o){this._scrollbarSize=Math.round(n),this._oppositeScrollbarSize=Math.round(s),this._arrowSize=Math.round(e),this._visibleSize=r,this._scrollSize=a,this._scrollPosition=o,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new Ew(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){let n=Math.round(e);return this._visibleSize!==n?(this._visibleSize=n,this._refreshComputedValues(),!0):!1}setScrollSize(e){let n=Math.round(e);return this._scrollSize!==n?(this._scrollSize=n,this._refreshComputedValues(),!0):!1}setScrollPosition(e){let n=Math.round(e);return this._scrollPosition!==n?(this._scrollPosition=n,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,n,s,r,a){let o=Math.max(0,s-e),c=Math.max(0,o-2*n),h=r>0&&r>s;if(!h)return{computedAvailableSize:Math.round(o),computedIsNeeded:h,computedSliderSize:Math.round(c),computedSliderRatio:0,computedSliderPosition:0};let d=Math.round(Math.max(20,Math.floor(s*c/r))),g=(c-d)/(r-s),m=a*g;return{computedAvailableSize:Math.round(o),computedIsNeeded:h,computedSliderSize:Math.round(d),computedSliderRatio:g,computedSliderPosition:Math.round(m)}}_refreshComputedValues(){let e=Ew._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;let n=e-this._arrowSize-this._computedSliderSize/2;return Math.round(n/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;let n=e-this._arrowSize,s=this._scrollPosition;return n<this._computedSliderPosition?s-=this._visibleSize:s+=this._visibleSize,s}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;let n=this._computedSliderPosition+e;return Math.round(n/this._computedSliderRatio)}},YJ=class extends bM{constructor(t,e,n){let s=t.getScrollDimensions(),r=t.getCurrentScrollPosition();if(super({lazyRender:e.lazyRender,host:n,scrollbarState:new _M(e.horizontalHasArrows?e.arrowSize:0,e.horizontal===2?0:e.horizontalScrollbarSize,e.vertical===2?0:e.verticalScrollbarSize,s.width,s.scrollWidth,r.scrollLeft),visibility:e.horizontal,extraScrollbarClassName:"horizontal",scrollable:t,scrollByPage:e.scrollByPage}),e.horizontalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(Math.floor((e.horizontalScrollbarSize-e.horizontalSliderSize)/2),0,void 0,e.horizontalSliderSize)}_updateSlider(t,e){this.slider.setWidth(t),this.slider.setLeft(e)}_renderDomNode(t,e){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(t){return this._shouldRender=this._onElementScrollSize(t.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(t.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(t.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(t,e){return t}_sliderPointerPosition(t){return t.pageX}_sliderOrthogonalPointerPosition(t){return t.pageY}_updateScrollbarSize(t){this.slider.setHeight(t)}writeScrollPosition(t,e){t.scrollLeft=e}updateOptions(t){this.updateScrollbarSize(t.horizontal===2?0:t.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(t.vertical===2?0:t.verticalScrollbarSize),this._visibilityController.setVisibility(t.horizontal),this._scrollByPage=t.scrollByPage}},XJ=class extends bM{constructor(t,e,n){let s=t.getScrollDimensions(),r=t.getCurrentScrollPosition();if(super({lazyRender:e.lazyRender,host:n,scrollbarState:new _M(e.verticalHasArrows?e.arrowSize:0,e.vertical===2?0:e.verticalScrollbarSize,0,s.height,s.scrollHeight,r.scrollTop),visibility:e.vertical,extraScrollbarClassName:"vertical",scrollable:t,scrollByPage:e.scrollByPage}),e.verticalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(0,Math.floor((e.verticalScrollbarSize-e.verticalSliderSize)/2),e.verticalSliderSize,void 0)}_updateSlider(t,e){this.slider.setHeight(t),this.slider.setTop(e)}_renderDomNode(t,e){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(t){return this._shouldRender=this._onElementScrollSize(t.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(t.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(t.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(t,e){return e}_sliderPointerPosition(t){return t.pageY}_sliderOrthogonalPointerPosition(t){return t.pageX}_updateScrollbarSize(t){this.slider.setWidth(t)}writeScrollPosition(t,e){t.scrollTop=e}updateOptions(t){this.updateScrollbarSize(t.vertical===2?0:t.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(t.vertical),this._scrollByPage=t.scrollByPage}},JJ=500,J3=50,QJ=class{constructor(t,e,n){this.timestamp=t,this.deltaX=e,this.deltaY=n,this.score=0}},Aw=class{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,n=0,s=1,r=this._rear;do{let a=r===this._front?e:Math.pow(2,-s);if(e-=a,n+=this._memory[r].score*a,r===this._front)break;r=(this._capacity+r-1)%this._capacity,s++}while(!0);return n<=.5}acceptStandardWheelEvent(e){if(q2){let n=hi(e.browserEvent),s=cJ(n);this.accept(Date.now(),e.deltaX*s,e.deltaY*s)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,n,s){let r=null,a=new QJ(e,n,s);this._front===-1&&this._rear===-1?(this._memory[0]=a,this._front=0,this._rear=0):(r=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=a),a.score=this._computeScore(a,r)}_computeScore(e,n){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let s=.5;if((!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(s+=.25),n){let r=Math.abs(e.deltaX),a=Math.abs(e.deltaY),o=Math.abs(n.deltaX),c=Math.abs(n.deltaY),h=Math.max(Math.min(r,o),1),d=Math.max(Math.min(a,c),1),g=Math.max(r,o),m=Math.max(a,c);g%h===0&&m%d===0&&(s-=.5)}return Math.min(Math.max(s,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}};Aw.INSTANCE=new Aw;var ZJ=Aw,eQ=class extends Y2{constructor(t,e,n){super(),this._onScroll=this._register(new Ae),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new Ae),this.onWillScroll=this._onWillScroll.event,this._options=nQ(e),this._scrollable=n,this._register(this._scrollable.onScroll(r=>{this._onWillScroll.fire(r),this._onDidScroll(r),this._onScroll.fire(r)}));let s={onMouseWheel:r=>this._onMouseWheel(r),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new XJ(this._scrollable,this._options,s)),this._horizontalScrollbar=this._register(new YJ(this._scrollable,this._options,s)),this._domNode=document.createElement("div"),this._domNode.className="xterm-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.appendChild(t),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=Dd(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=Dd(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=Dd(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,r=>this._onMouseOver(r)),this.onmouseleave(this._listenOnDomNode,r=>this._onMouseLeave(r)),this._hideTimeout=this._register(new W2),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}get options(){return this._options}dispose(){this._mouseWheelToDispose=ho(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(t){this._verticalScrollbar.delegatePointerDown(t)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(t){this._scrollable.setScrollDimensions(t,!1)}updateClassName(t){this._options.className=t,pi&&(this._options.className+=" mac"),this._domNode.className="xterm-scrollable-element "+this._options.className}updateOptions(t){typeof t.handleMouseWheel<"u"&&(this._options.handleMouseWheel=t.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof t.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=t.mouseWheelScrollSensitivity),typeof t.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=t.fastScrollSensitivity),typeof t.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=t.scrollPredominantAxis),typeof t.horizontal<"u"&&(this._options.horizontal=t.horizontal),typeof t.vertical<"u"&&(this._options.vertical=t.vertical),typeof t.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=t.horizontalScrollbarSize),typeof t.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=t.verticalScrollbarSize),typeof t.scrollByPage<"u"&&(this._options.scrollByPage=t.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}setRevealOnScroll(t){this._revealOnScroll=t}delegateScrollFromMouseWheelEvent(t){this._onMouseWheel(new F3(t))}_setListeningToMouseWheel(t){if(this._mouseWheelToDispose.length>0!==t&&(this._mouseWheelToDispose=ho(this._mouseWheelToDispose),t)){let e=n=>{this._onMouseWheel(new F3(n))};this._mouseWheelToDispose.push(st(this._listenOnDomNode,Un.MOUSE_WHEEL,e,{passive:!1}))}}_onMouseWheel(t){if(t.browserEvent?.defaultPrevented)return;let e=ZJ.INSTANCE;e.acceptStandardWheelEvent(t);let n=!1;if(t.deltaY||t.deltaX){let r=t.deltaY*this._options.mouseWheelScrollSensitivity,a=t.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&a+r===0?a=r=0:Math.abs(r)>=Math.abs(a)?a=0:r=0),this._options.flipAxes&&([r,a]=[a,r]);let o=!pi&&t.browserEvent&&t.browserEvent.shiftKey;(this._options.scrollYToX||o)&&!a&&(a=r,r=0),t.browserEvent&&t.browserEvent.altKey&&(a=a*this._options.fastScrollSensitivity,r=r*this._options.fastScrollSensitivity);let c=this._scrollable.getFutureScrollPosition(),h={};if(r){let d=J3*r,g=c.scrollTop-(d<0?Math.floor(d):Math.ceil(d));this._verticalScrollbar.writeScrollPosition(h,g)}if(a){let d=J3*a,g=c.scrollLeft-(d<0?Math.floor(d):Math.ceil(d));this._horizontalScrollbar.writeScrollPosition(h,g)}h=this._scrollable.validateScrollPosition(h),(c.scrollLeft!==h.scrollLeft||c.scrollTop!==h.scrollTop)&&(this._options.mouseWheelSmoothScroll&&e.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(h):this._scrollable.setScrollPositionNow(h),n=!0)}let s=n;!s&&this._options.alwaysConsumeMouseWheel&&(s=!0),!s&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(s=!0),s&&(t.preventDefault(),t.stopPropagation())}_onDidScroll(t){this._shouldRender=this._horizontalScrollbar.onDidScroll(t)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(t)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let t=this._scrollable.getCurrentScrollPosition(),e=t.scrollTop>0,n=t.scrollLeft>0,s=n?" left":"",r=e?" top":"",a=n||e?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${s}`),this._topShadowDomNode.setClassName(`shadow${r}`),this._topLeftShadowDomNode.setClassName(`shadow${a}${r}${s}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(t){this._mouseIsOver=!1,this._hide()}_onMouseOver(t){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),JJ)}},tQ=class extends eQ{constructor(t,e,n){super(t,e,n)}setScrollPosition(t){t.reuseAnimation?this._scrollable.setScrollPositionSmooth(t,t.reuseAnimation):this._scrollable.setScrollPositionNow(t)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}};function nQ(t){let e={lazyRender:typeof t.lazyRender<"u"?t.lazyRender:!1,className:typeof t.className<"u"?t.className:"",useShadows:typeof t.useShadows<"u"?t.useShadows:!0,handleMouseWheel:typeof t.handleMouseWheel<"u"?t.handleMouseWheel:!0,flipAxes:typeof t.flipAxes<"u"?t.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof t.consumeMouseWheelIfScrollbarIsNeeded<"u"?t.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof t.alwaysConsumeMouseWheel<"u"?t.alwaysConsumeMouseWheel:!1,scrollYToX:typeof t.scrollYToX<"u"?t.scrollYToX:!1,mouseWheelScrollSensitivity:typeof t.mouseWheelScrollSensitivity<"u"?t.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof t.fastScrollSensitivity<"u"?t.fastScrollSensitivity:5,scrollPredominantAxis:typeof t.scrollPredominantAxis<"u"?t.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof t.mouseWheelSmoothScroll<"u"?t.mouseWheelSmoothScroll:!0,arrowSize:typeof t.arrowSize<"u"?t.arrowSize:11,listenOnDomNode:typeof t.listenOnDomNode<"u"?t.listenOnDomNode:null,horizontal:typeof t.horizontal<"u"?t.horizontal:1,horizontalScrollbarSize:typeof t.horizontalScrollbarSize<"u"?t.horizontalScrollbarSize:10,horizontalSliderSize:typeof t.horizontalSliderSize<"u"?t.horizontalSliderSize:0,horizontalHasArrows:typeof t.horizontalHasArrows<"u"?t.horizontalHasArrows:!1,vertical:typeof t.vertical<"u"?t.vertical:1,verticalScrollbarSize:typeof t.verticalScrollbarSize<"u"?t.verticalScrollbarSize:10,verticalHasArrows:typeof t.verticalHasArrows<"u"?t.verticalHasArrows:!1,verticalSliderSize:typeof t.verticalSliderSize<"u"?t.verticalSliderSize:0,scrollByPage:typeof t.scrollByPage<"u"?t.scrollByPage:!1};return e.horizontalSliderSize=typeof t.horizontalSliderSize<"u"?t.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof t.verticalSliderSize<"u"?t.verticalSliderSize:e.verticalScrollbarSize,pi&&(e.className+=" mac"),e}var jw=class extends bt{constructor(t,e,n,s,r,a,o,c){super(),this._bufferService=n,this._optionsService=o,this._renderService=c,this._onRequestScrollLines=this._register(new Ae),this.onRequestScrollLines=this._onRequestScrollLines.event,this._isSyncing=!1,this._isHandlingScroll=!1,this._suppressOnScrollHandler=!1;let h=this._register(new VJ({forceIntegerValues:!1,smoothScrollDuration:this._optionsService.rawOptions.smoothScrollDuration,scheduleAtNextAnimationFrame:d=>G2(s.window,d)}));this._register(this._optionsService.onSpecificOptionChange("smoothScrollDuration",()=>{h.setSmoothScrollDuration(this._optionsService.rawOptions.smoothScrollDuration)})),this._scrollableElement=this._register(new tQ(e,{vertical:1,horizontal:2,useShadows:!1,mouseWheelSmoothScroll:!0,...this._getChangeOptions()},h)),this._register(this._optionsService.onMultipleOptionChange(["scrollSensitivity","fastScrollSensitivity","overviewRuler"],()=>this._scrollableElement.updateOptions(this._getChangeOptions()))),this._register(r.onProtocolChange(d=>{this._scrollableElement.updateOptions({handleMouseWheel:!(d&16)})})),this._scrollableElement.setScrollDimensions({height:0,scrollHeight:0}),this._register(ns.runAndSubscribe(a.onChangeColors,()=>{this._scrollableElement.getDomNode().style.backgroundColor=a.colors.background.css})),t.appendChild(this._scrollableElement.getDomNode()),this._register(nn(()=>this._scrollableElement.getDomNode().remove())),this._styleElement=s.mainDocument.createElement("style"),e.appendChild(this._styleElement),this._register(nn(()=>this._styleElement.remove())),this._register(ns.runAndSubscribe(a.onChangeColors,()=>{this._styleElement.textContent=[".xterm .xterm-scrollable-element > .scrollbar > .slider {",`  background: ${a.colors.scrollbarSliderBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider:hover {",`  background: ${a.colors.scrollbarSliderHoverBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider.active {",`  background: ${a.colors.scrollbarSliderActiveBackground.css};`,"}"].join(`
`)})),this._register(this._bufferService.onResize(()=>this.queueSync())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._latestYDisp=void 0,this.queueSync()})),this._register(this._bufferService.onScroll(()=>this._sync())),this._register(this._scrollableElement.onScroll(d=>this._handleScroll(d)))}scrollLines(t){let e=this._scrollableElement.getScrollPosition();this._scrollableElement.setScrollPosition({reuseAnimation:!0,scrollTop:e.scrollTop+t*this._renderService.dimensions.css.cell.height})}scrollToLine(t,e){e&&(this._latestYDisp=t),this._scrollableElement.setScrollPosition({reuseAnimation:!e,scrollTop:t*this._renderService.dimensions.css.cell.height})}_getChangeOptions(){return{mouseWheelScrollSensitivity:this._optionsService.rawOptions.scrollSensitivity,fastScrollSensitivity:this._optionsService.rawOptions.fastScrollSensitivity,verticalScrollbarSize:this._optionsService.rawOptions.overviewRuler?.width||14}}queueSync(t){t!==void 0&&(this._latestYDisp=t),this._queuedAnimationFrame===void 0&&(this._queuedAnimationFrame=this._renderService.addRefreshCallback(()=>{this._queuedAnimationFrame=void 0,this._sync(this._latestYDisp)}))}_sync(t=this._bufferService.buffer.ydisp){!this._renderService||this._isSyncing||(this._isSyncing=!0,this._suppressOnScrollHandler=!0,this._scrollableElement.setScrollDimensions({height:this._renderService.dimensions.css.canvas.height,scrollHeight:this._renderService.dimensions.css.cell.height*this._bufferService.buffer.lines.length}),this._suppressOnScrollHandler=!1,t!==this._latestYDisp&&this._scrollableElement.setScrollPosition({scrollTop:t*this._renderService.dimensions.css.cell.height}),this._isSyncing=!1)}_handleScroll(t){if(!this._renderService||this._isHandlingScroll||this._suppressOnScrollHandler)return;this._isHandlingScroll=!0;let e=Math.round(t.scrollTop/this._renderService.dimensions.css.cell.height),n=e-this._bufferService.buffer.ydisp;n!==0&&(this._latestYDisp=e,this._onRequestScrollLines.fire(n)),this._isHandlingScroll=!1}};jw=hn([Le(2,Cs),Le(3,da),Le(4,eM),Le(5,Cu),Le(6,Ns),Le(7,fa)],jw);var Tw=class extends bt{constructor(t,e,n,s,r){super(),this._screenElement=t,this._bufferService=e,this._coreBrowserService=n,this._decorationService=s,this._renderService=r,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this._register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this._register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this._register(this._decorationService.onDecorationRemoved(a=>this._removeDecoration(a))),this._register(nn(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let t of this._decorationService.decorations)this._renderDecoration(t);this._dimensionsChanged=!1}_renderDecoration(t){this._refreshStyle(t),this._dimensionsChanged&&this._refreshXPosition(t)}_createElement(t){let e=this._coreBrowserService.mainDocument.createElement("div");e.classList.add("xterm-decoration"),e.classList.toggle("xterm-decoration-top-layer",t?.options?.layer==="top"),e.style.width=`${Math.round((t.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,e.style.height=`${(t.options.height||1)*this._renderService.dimensions.css.cell.height}px`,e.style.top=`${(t.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height}px`,e.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let n=t.options.x??0;return n&&n>this._bufferService.cols&&(e.style.display="none"),this._refreshXPosition(t,e),e}_refreshStyle(t){let e=t.marker.line-this._bufferService.buffers.active.ydisp;if(e<0||e>=this._bufferService.rows)t.element&&(t.element.style.display="none",t.onRenderEmitter.fire(t.element));else{let n=this._decorationElements.get(t);n||(n=this._createElement(t),t.element=n,this._decorationElements.set(t,n),this._container.appendChild(n),t.onDispose(()=>{this._decorationElements.delete(t),n.remove()})),n.style.display=this._altBufferIsActive?"none":"block",this._altBufferIsActive||(n.style.width=`${Math.round((t.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,n.style.height=`${(t.options.height||1)*this._renderService.dimensions.css.cell.height}px`,n.style.top=`${e*this._renderService.dimensions.css.cell.height}px`,n.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`),t.onRenderEmitter.fire(n)}}_refreshXPosition(t,e=t.element){if(!e)return;let n=t.options.x??0;(t.options.anchor||"left")==="right"?e.style.right=n?`${n*this._renderService.dimensions.css.cell.width}px`:"":e.style.left=n?`${n*this._renderService.dimensions.css.cell.width}px`:""}_removeDecoration(t){this._decorationElements.get(t)?.remove(),this._decorationElements.delete(t),t.dispose()}};Tw=hn([Le(1,Cs),Le(2,da),Le(3,Mf),Le(4,fa)],Tw);var sQ=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(t){if(t.options.overviewRulerOptions){for(let e of this._zones)if(e.color===t.options.overviewRulerOptions.color&&e.position===t.options.overviewRulerOptions.position){if(this._lineIntersectsZone(e,t.marker.line))return;if(this._lineAdjacentToZone(e,t.marker.line,t.options.overviewRulerOptions.position)){this._addLineToZone(e,t.marker.line);return}}if(this._zonePoolIndex<this._zonePool.length){this._zonePool[this._zonePoolIndex].color=t.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=t.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=t.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=t.marker.line,this._zones.push(this._zonePool[this._zonePoolIndex++]);return}this._zones.push({color:t.options.overviewRulerOptions.color,position:t.options.overviewRulerOptions.position,startBufferLine:t.marker.line,endBufferLine:t.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(t){this._linePadding=t}_lineIntersectsZone(t,e){return e>=t.startBufferLine&&e<=t.endBufferLine}_lineAdjacentToZone(t,e,n){return e>=t.startBufferLine-this._linePadding[n||"full"]&&e<=t.endBufferLine+this._linePadding[n||"full"]}_addLineToZone(t,e){t.startBufferLine=Math.min(t.startBufferLine,e),t.endBufferLine=Math.max(t.endBufferLine,e)}},ri={full:0,left:0,center:0,right:0},Ua={full:0,left:0,center:0,right:0},Th={full:0,left:0,center:0,right:0},tg=class extends bt{constructor(t,e,n,s,r,a,o,c){super(),this._viewportElement=t,this._screenElement=e,this._bufferService=n,this._decorationService=s,this._renderService=r,this._optionsService=a,this._themeService=o,this._coreBrowserService=c,this._colorZoneStore=new sQ,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement),this._register(nn(()=>this._canvas?.remove()));let h=this._canvas.getContext("2d");if(h)this._ctx=h;else throw new Error("Ctx cannot be null");this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this._register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0))),this._register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this._register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})),this._register(this._renderService.onRender(()=>{(!this._containerHeight||this._containerHeight!==this._screenElement.clientHeight)&&(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._register(this._optionsService.onSpecificOptionChange("overviewRuler",()=>this._queueRefresh(!0))),this._register(this._themeService.onChangeColors(()=>this._queueRefresh())),this._queueRefresh(!0)}get _width(){return this._optionsService.options.overviewRuler?.width||0}_refreshDrawConstants(){let t=Math.floor((this._canvas.width-1)/3),e=Math.ceil((this._canvas.width-1)/3);Ua.full=this._canvas.width,Ua.left=t,Ua.center=e,Ua.right=t,this._refreshDrawHeightConstants(),Th.full=1,Th.left=1,Th.center=1+Ua.left,Th.right=1+Ua.left+Ua.center}_refreshDrawHeightConstants(){ri.full=Math.round(2*this._coreBrowserService.dpr);let t=this._canvas.height/this._bufferService.buffer.lines.length,e=Math.round(Math.max(Math.min(t,12),6)*this._coreBrowserService.dpr);ri.left=e,ri.center=e,ri.right=e}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*ri.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*ri.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*ri.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*ri.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let e of this._decorationService.decorations)this._colorZoneStore.addDecoration(e);this._ctx.lineWidth=1,this._renderRulerOutline();let t=this._colorZoneStore.zones;for(let e of t)e.position!=="full"&&this._renderColorZone(e);for(let e of t)e.position==="full"&&this._renderColorZone(e);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderRulerOutline(){this._ctx.fillStyle=this._themeService.colors.overviewRulerBorder.css,this._ctx.fillRect(0,0,1,this._canvas.height),this._optionsService.rawOptions.overviewRuler.showTopBorder&&this._ctx.fillRect(1,0,this._canvas.width-1,1),this._optionsService.rawOptions.overviewRuler.showBottomBorder&&this._ctx.fillRect(1,this._canvas.height-1,this._canvas.width-1,this._canvas.height)}_renderColorZone(t){this._ctx.fillStyle=t.color,this._ctx.fillRect(Th[t.position||"full"],Math.round((this._canvas.height-1)*(t.startBufferLine/this._bufferService.buffers.active.lines.length)-ri[t.position||"full"]/2),Ua[t.position||"full"],Math.round((this._canvas.height-1)*((t.endBufferLine-t.startBufferLine)/this._bufferService.buffers.active.lines.length)+ri[t.position||"full"]))}_queueRefresh(t,e){this._shouldUpdateDimensions=t||this._shouldUpdateDimensions,this._shouldUpdateAnchor=e||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};tg=hn([Le(2,Cs),Le(3,Mf),Le(4,fa),Le(5,Ns),Le(6,Cu),Le(7,da)],tg);var ve;(t=>(t.NUL="\0",t.SOH="",t.STX="",t.ETX="",t.EOT="",t.ENQ="",t.ACK="",t.BEL="\x07",t.BS="\b",t.HT="	",t.LF=`
`,t.VT="\v",t.FF="\f",t.CR="\r",t.SO="",t.SI="",t.DLE="",t.DC1="",t.DC2="",t.DC3="",t.DC4="",t.NAK="",t.SYN="",t.ETB="",t.CAN="",t.EM="",t.SUB="",t.ESC="\x1B",t.FS="",t.GS="",t.RS="",t.US="",t.SP=" ",t.DEL=""))(ve||={});var Xm;(t=>(t.PAD="",t.HOP="",t.BPH="",t.NBH="",t.IND="",t.NEL="",t.SSA="",t.ESA="",t.HTS="",t.HTJ="",t.VTS="",t.PLD="",t.PLU="",t.RI="",t.SS2="",t.SS3="",t.DCS="",t.PU1="",t.PU2="",t.STS="",t.CCH="",t.MW="",t.SPA="",t.EPA="",t.SOS="",t.SGCI="",t.SCI="",t.CSI="",t.ST="",t.OSC="",t.PM="",t.APC=""))(Xm||={});var xM;(t=>t.ST=`${ve.ESC}\\`)(xM||={});var Ow=class{constructor(t,e,n,s,r,a){this._textarea=t,this._compositionView=e,this._bufferService=n,this._optionsService=s,this._coreService=r,this._renderService=a,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}get isComposing(){return this._isComposing}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(t){this._compositionView.textContent=t.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(t){if(this._isComposing||this._isSendingComposition){if(t.keyCode===20||t.keyCode===229||t.keyCode===16||t.keyCode===17||t.keyCode===18)return!1;this._finalizeComposition(!1)}return t.keyCode===229?(this._handleAnyTextareaChanges(),!1):!0}_finalizeComposition(t){if(this._compositionView.classList.remove("active"),this._isComposing=!1,t){let e={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){this._isSendingComposition=!1;let n;e.start+=this._dataAlreadySent.length,this._isComposing?n=this._textarea.value.substring(e.start,this._compositionPosition.start):n=this._textarea.value.substring(e.start),n.length>0&&this._coreService.triggerDataEvent(n,!0)}},0)}else{this._isSendingComposition=!1;let e=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(e,!0)}}_handleAnyTextareaChanges(){let t=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let e=this._textarea.value,n=e.replace(t,"");this._dataAlreadySent=n,e.length>t.length?this._coreService.triggerDataEvent(n,!0):e.length<t.length?this._coreService.triggerDataEvent(`${ve.DEL}`,!0):e.length===t.length&&e!==t&&this._coreService.triggerDataEvent(e,!0)}},0)}updateCompositionElements(t){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let e=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),n=this._renderService.dimensions.css.cell.height,s=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,r=e*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=r+"px",this._compositionView.style.top=s+"px",this._compositionView.style.height=n+"px",this._compositionView.style.lineHeight=n+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let a=this._compositionView.getBoundingClientRect();this._textarea.style.left=r+"px",this._textarea.style.top=s+"px",this._textarea.style.width=Math.max(a.width,1)+"px",this._textarea.style.height=Math.max(a.height,1)+"px",this._textarea.style.lineHeight=a.height+"px"}t||setTimeout(()=>this.updateCompositionElements(!0),0)}}};Ow=hn([Le(2,Cs),Le(3,Ns),Le(4,xo),Le(5,fa)],Ow);var Vn=0,Fn=0,qn=0,un=0,Q3={css:"#00000000",rgba:0},Nn;(t=>{function e(r,a,o,c){return c!==void 0?`#${Tl(r)}${Tl(a)}${Tl(o)}${Tl(c)}`:`#${Tl(r)}${Tl(a)}${Tl(o)}`}t.toCss=e;function n(r,a,o,c=255){return(r<<24|a<<16|o<<8|c)>>>0}t.toRgba=n;function s(r,a,o,c){return{css:t.toCss(r,a,o,c),rgba:t.toRgba(r,a,o,c)}}t.toColor=s})(Nn||={});var Jt;(t=>{function e(h,d){if(un=(d.rgba&255)/255,un===1)return{css:d.css,rgba:d.rgba};let g=d.rgba>>24&255,m=d.rgba>>16&255,v=d.rgba>>8&255,y=h.rgba>>24&255,x=h.rgba>>16&255,w=h.rgba>>8&255;Vn=y+Math.round((g-y)*un),Fn=x+Math.round((m-x)*un),qn=w+Math.round((v-w)*un);let S=Nn.toCss(Vn,Fn,qn),k=Nn.toRgba(Vn,Fn,qn);return{css:S,rgba:k}}t.blend=e;function n(h){return(h.rgba&255)===255}t.isOpaque=n;function s(h,d,g){let m=Jm.ensureContrastRatio(h.rgba,d.rgba,g);if(m)return Nn.toColor(m>>24&255,m>>16&255,m>>8&255)}t.ensureContrastRatio=s;function r(h){let d=(h.rgba|255)>>>0;return[Vn,Fn,qn]=Jm.toChannels(d),{css:Nn.toCss(Vn,Fn,qn),rgba:d}}t.opaque=r;function a(h,d){return un=Math.round(d*255),[Vn,Fn,qn]=Jm.toChannels(h.rgba),{css:Nn.toCss(Vn,Fn,qn,un),rgba:Nn.toRgba(Vn,Fn,qn,un)}}t.opacity=a;function o(h,d){return un=h.rgba&255,a(h,un*d/255)}t.multiplyOpacity=o;function c(h){return[h.rgba>>24&255,h.rgba>>16&255,h.rgba>>8&255]}t.toColorRGB=c})(Jt||={});var ln;(t=>{let e,n;try{let r=document.createElement("canvas");r.width=1,r.height=1;let a=r.getContext("2d",{willReadFrequently:!0});a&&(e=a,e.globalCompositeOperation="copy",n=e.createLinearGradient(0,0,1,1))}catch{}function s(r){if(r.match(/#[\da-f]{3,8}/i))switch(r.length){case 4:return Vn=parseInt(r.slice(1,2).repeat(2),16),Fn=parseInt(r.slice(2,3).repeat(2),16),qn=parseInt(r.slice(3,4).repeat(2),16),Nn.toColor(Vn,Fn,qn);case 5:return Vn=parseInt(r.slice(1,2).repeat(2),16),Fn=parseInt(r.slice(2,3).repeat(2),16),qn=parseInt(r.slice(3,4).repeat(2),16),un=parseInt(r.slice(4,5).repeat(2),16),Nn.toColor(Vn,Fn,qn,un);case 7:return{css:r,rgba:(parseInt(r.slice(1),16)<<8|255)>>>0};case 9:return{css:r,rgba:parseInt(r.slice(1),16)>>>0}}let a=r.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(a)return Vn=parseInt(a[1]),Fn=parseInt(a[2]),qn=parseInt(a[3]),un=Math.round((a[5]===void 0?1:parseFloat(a[5]))*255),Nn.toColor(Vn,Fn,qn,un);if(!e||!n)throw new Error("css.toColor: Unsupported css format");if(e.fillStyle=n,e.fillStyle=r,typeof e.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(e.fillRect(0,0,1,1),[Vn,Fn,qn,un]=e.getImageData(0,0,1,1).data,un!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:Nn.toRgba(Vn,Fn,qn,un),css:r}}t.toColor=s})(ln||={});var gs;(t=>{function e(s){return n(s>>16&255,s>>8&255,s&255)}t.relativeLuminance=e;function n(s,r,a){let o=s/255,c=r/255,h=a/255,d=o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4),g=c<=.03928?c/12.92:Math.pow((c+.055)/1.055,2.4),m=h<=.03928?h/12.92:Math.pow((h+.055)/1.055,2.4);return d*.2126+g*.7152+m*.0722}t.relativeLuminance2=n})(gs||={});var Jm;(t=>{function e(o,c){if(un=(c&255)/255,un===1)return c;let h=c>>24&255,d=c>>16&255,g=c>>8&255,m=o>>24&255,v=o>>16&255,y=o>>8&255;return Vn=m+Math.round((h-m)*un),Fn=v+Math.round((d-v)*un),qn=y+Math.round((g-y)*un),Nn.toRgba(Vn,Fn,qn)}t.blend=e;function n(o,c,h){let d=gs.relativeLuminance(o>>8),g=gs.relativeLuminance(c>>8);if(Fi(d,g)<h){if(g<d){let y=s(o,c,h),x=Fi(d,gs.relativeLuminance(y>>8));if(x<h){let w=r(o,c,h),S=Fi(d,gs.relativeLuminance(w>>8));return x>S?y:w}return y}let m=r(o,c,h),v=Fi(d,gs.relativeLuminance(m>>8));if(v<h){let y=s(o,c,h),x=Fi(d,gs.relativeLuminance(y>>8));return v>x?m:y}return m}}t.ensureContrastRatio=n;function s(o,c,h){let d=o>>24&255,g=o>>16&255,m=o>>8&255,v=c>>24&255,y=c>>16&255,x=c>>8&255,w=Fi(gs.relativeLuminance2(v,y,x),gs.relativeLuminance2(d,g,m));for(;w<h&&(v>0||y>0||x>0);)v-=Math.max(0,Math.ceil(v*.1)),y-=Math.max(0,Math.ceil(y*.1)),x-=Math.max(0,Math.ceil(x*.1)),w=Fi(gs.relativeLuminance2(v,y,x),gs.relativeLuminance2(d,g,m));return(v<<24|y<<16|x<<8|255)>>>0}t.reduceLuminance=s;function r(o,c,h){let d=o>>24&255,g=o>>16&255,m=o>>8&255,v=c>>24&255,y=c>>16&255,x=c>>8&255,w=Fi(gs.relativeLuminance2(v,y,x),gs.relativeLuminance2(d,g,m));for(;w<h&&(v<255||y<255||x<255);)v=Math.min(255,v+Math.ceil((255-v)*.1)),y=Math.min(255,y+Math.ceil((255-y)*.1)),x=Math.min(255,x+Math.ceil((255-x)*.1)),w=Fi(gs.relativeLuminance2(v,y,x),gs.relativeLuminance2(d,g,m));return(v<<24|y<<16|x<<8|255)>>>0}t.increaseLuminance=r;function a(o){return[o>>24&255,o>>16&255,o>>8&255,o&255]}t.toChannels=a})(Jm||={});function Tl(t){let e=t.toString(16);return e.length<2?"0"+e:e}function Fi(t,e){return t<e?(e+.05)/(t+.05):(t+.05)/(e+.05)}var rQ=class extends Bf{constructor(t,e,n){super(),this.content=0,this.combinedData="",this.fg=t.fg,this.bg=t.bg,this.combinedData=e,this._width=n}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(t){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},ng=class{constructor(t){this._bufferService=t,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new Br}register(t){let e={id:this._nextCharacterJoinerId++,handler:t};return this._characterJoiners.push(e),e.id}deregister(t){for(let e=0;e<this._characterJoiners.length;e++)if(this._characterJoiners[e].id===t)return this._characterJoiners.splice(e,1),!0;return!1}getJoinedCharacters(t){if(this._characterJoiners.length===0)return[];let e=this._bufferService.buffer.lines.get(t);if(!e||e.length===0)return[];let n=[],s=e.translateToString(!0),r=0,a=0,o=0,c=e.getFg(0),h=e.getBg(0);for(let d=0;d<e.getTrimmedLength();d++)if(e.loadCell(d,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==c||this._workCell.bg!==h){if(d-r>1){let g=this._getJoinedRanges(s,o,a,e,r);for(let m=0;m<g.length;m++)n.push(g[m])}r=d,o=a,c=this._workCell.fg,h=this._workCell.bg}a+=this._workCell.getChars().length||Ja.length}if(this._bufferService.cols-r>1){let d=this._getJoinedRanges(s,o,a,e,r);for(let g=0;g<d.length;g++)n.push(d[g])}return n}_getJoinedRanges(t,e,n,s,r){let a=t.substring(e,n),o=[];try{o=this._characterJoiners[0].handler(a)}catch(c){console.error(c)}for(let c=1;c<this._characterJoiners.length;c++)try{let h=this._characterJoiners[c].handler(a);for(let d=0;d<h.length;d++)ng._mergeRanges(o,h[d])}catch(h){console.error(h)}return this._stringRangesToCellRanges(o,s,r),o}_stringRangesToCellRanges(t,e,n){let s=0,r=!1,a=0,o=t[s];if(o){for(let c=n;c<this._bufferService.cols;c++){let h=e.getWidth(c),d=e.getString(c).length||Ja.length;if(h!==0){if(!r&&o[0]<=a&&(o[0]=c,r=!0),o[1]<=a){if(o[1]=c,o=t[++s],!o)break;o[0]<=a?(o[0]=c,r=!0):r=!1}a+=d}}o&&(o[1]=this._bufferService.cols)}}static _mergeRanges(t,e){let n=!1;for(let s=0;s<t.length;s++){let r=t[s];if(n){if(e[1]<=r[0])return t[s-1][1]=e[1],t;if(e[1]<=r[1])return t[s-1][1]=Math.max(e[1],r[1]),t.splice(s,1),t;t.splice(s,1),s--}else{if(e[1]<=r[0])return t.splice(s,0,e),t;if(e[1]<=r[1])return r[0]=Math.min(e[0],r[0]),t;e[0]<r[1]&&(r[0]=Math.min(e[0],r[0]),n=!0);continue}}return n?t[t.length-1][1]=e[1]:t.push(e),t}};ng=hn([Le(0,Cs)],ng);function iQ(t){return 57508<=t&&t<=57558}function aQ(t){return 9472<=t&&t<=9631}function lQ(t){return iQ(t)||aQ(t)}function oQ(){return{css:{canvas:xm(),cell:xm()},device:{canvas:xm(),cell:xm(),char:{width:0,height:0,left:0,top:0}}}}function xm(){return{width:0,height:0}}var Rw=class{constructor(t,e,n,s,r,a,o){this._document=t,this._characterJoinerService=e,this._optionsService=n,this._coreBrowserService=s,this._coreService=r,this._decorationService=a,this._themeService=o,this._workCell=new Br,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(t,e,n){this._selectionStart=t,this._selectionEnd=e,this._columnSelectMode=n}createRow(t,e,n,s,r,a,o,c,h,d,g){let m=[],v=this._characterJoinerService.getJoinedCharacters(e),y=this._themeService.colors,x=t.getNoBgTrimmedLength();n&&x<a+1&&(x=a+1);let w,S=0,k="",C=0,A=0,B=0,M=0,T=!1,H=0,$=!1,G=0,z=0,Q=[],F=d!==-1&&g!==-1;for(let K=0;K<x;K++){t.loadCell(K,this._workCell);let J=this._workCell.getWidth();if(J===0)continue;let q=!1,P=K>=z,X=K,U=this._workCell;if(v.length>0&&K===v[0][0]&&P){let Te=v.shift(),tt=this._isCellInSelection(Te[0],e);for(C=Te[0]+1;C<Te[1];C++)P&&=tt===this._isCellInSelection(C,e);P&&=!n||a<Te[0]||a>=Te[1],P?(q=!0,U=new rQ(this._workCell,t.translateToString(!0,Te[0],Te[1]),Te[1]-Te[0]),X=Te[1]-1,J=U.getWidth()):z=Te[1]}let D=this._isCellInSelection(K,e),O=n&&K===a,R=F&&K>=d&&K<=g,V=!1;this._decorationService.forEachDecorationAtCell(K,e,void 0,Te=>{V=!0});let E=U.getChars()||Ja;if(E===" "&&(U.isUnderline()||U.isOverline())&&(E=""),G=J*c-h.get(E,U.isBold(),U.isItalic()),!w)w=this._document.createElement("span");else if(S&&(D&&$||!D&&!$&&U.bg===A)&&(D&&$&&y.selectionForeground||U.fg===B)&&U.extended.ext===M&&R===T&&G===H&&!O&&!q&&!V&&P){U.isInvisible()?k+=Ja:k+=E,S++;continue}else S&&(w.textContent=k),w=this._document.createElement("span"),S=0,k="";if(A=U.bg,B=U.fg,M=U.extended.ext,T=R,H=G,$=D,q&&a>=K&&a<=X&&(a=K),!this._coreService.isCursorHidden&&O&&this._coreService.isCursorInitialized){if(Q.push("xterm-cursor"),this._coreBrowserService.isFocused)o&&Q.push("xterm-cursor-blink"),Q.push(s==="bar"?"xterm-cursor-bar":s==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(r)switch(r){case"outline":Q.push("xterm-cursor-outline");break;case"block":Q.push("xterm-cursor-block");break;case"bar":Q.push("xterm-cursor-bar");break;case"underline":Q.push("xterm-cursor-underline");break}}if(U.isBold()&&Q.push("xterm-bold"),U.isItalic()&&Q.push("xterm-italic"),U.isDim()&&Q.push("xterm-dim"),U.isInvisible()?k=Ja:k=U.getChars()||Ja,U.isUnderline()&&(Q.push(`xterm-underline-${U.extended.underlineStyle}`),k===" "&&(k=""),!U.isUnderlineColorDefault()))if(U.isUnderlineColorRGB())w.style.textDecorationColor=`rgb(${Bf.toColorRGB(U.getUnderlineColor()).join(",")})`;else{let Te=U.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&U.isBold()&&Te<8&&(Te+=8),w.style.textDecorationColor=y.ansi[Te].css}U.isOverline()&&(Q.push("xterm-overline"),k===" "&&(k="")),U.isStrikethrough()&&Q.push("xterm-strikethrough"),R&&(w.style.textDecoration="underline");let Z=U.getFgColor(),ue=U.getFgColorMode(),ne=U.getBgColor(),de=U.getBgColorMode(),we=!!U.isInverse();if(we){let Te=Z;Z=ne,ne=Te;let tt=ue;ue=de,de=tt}let Ee,et,Ce=!1;this._decorationService.forEachDecorationAtCell(K,e,void 0,Te=>{Te.options.layer!=="top"&&Ce||(Te.backgroundColorRGB&&(de=50331648,ne=Te.backgroundColorRGB.rgba>>8&16777215,Ee=Te.backgroundColorRGB),Te.foregroundColorRGB&&(ue=50331648,Z=Te.foregroundColorRGB.rgba>>8&16777215,et=Te.foregroundColorRGB),Ce=Te.options.layer==="top")}),!Ce&&D&&(Ee=this._coreBrowserService.isFocused?y.selectionBackgroundOpaque:y.selectionInactiveBackgroundOpaque,ne=Ee.rgba>>8&16777215,de=50331648,Ce=!0,y.selectionForeground&&(ue=50331648,Z=y.selectionForeground.rgba>>8&16777215,et=y.selectionForeground)),Ce&&Q.push("xterm-decoration-top");let Ge;switch(de){case 16777216:case 33554432:Ge=y.ansi[ne],Q.push(`xterm-bg-${ne}`);break;case 50331648:Ge=Nn.toColor(ne>>16,ne>>8&255,ne&255),this._addStyle(w,`background-color:#${Z3((ne>>>0).toString(16),"0",6)}`);break;default:we?(Ge=y.foreground,Q.push("xterm-bg-257")):Ge=y.background}switch(Ee||U.isDim()&&(Ee=Jt.multiplyOpacity(Ge,.5)),ue){case 16777216:case 33554432:U.isBold()&&Z<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Z+=8),this._applyMinimumContrast(w,Ge,y.ansi[Z],U,Ee,void 0)||Q.push(`xterm-fg-${Z}`);break;case 50331648:let Te=Nn.toColor(Z>>16&255,Z>>8&255,Z&255);this._applyMinimumContrast(w,Ge,Te,U,Ee,et)||this._addStyle(w,`color:#${Z3(Z.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(w,Ge,y.foreground,U,Ee,et)||we&&Q.push("xterm-fg-257")}Q.length&&(w.className=Q.join(" "),Q.length=0),!O&&!q&&!V&&P?S++:w.textContent=k,G!==this.defaultSpacing&&(w.style.letterSpacing=`${G}px`),m.push(w),K=X}return w&&S&&(w.textContent=k),m}_applyMinimumContrast(t,e,n,s,r,a){if(this._optionsService.rawOptions.minimumContrastRatio===1||lQ(s.getCode()))return!1;let o=this._getContrastCache(s),c;if(!r&&!a&&(c=o.getColor(e.rgba,n.rgba)),c===void 0){let h=this._optionsService.rawOptions.minimumContrastRatio/(s.isDim()?2:1);c=Jt.ensureContrastRatio(r||e,a||n,h),o.setColor((r||e).rgba,(a||n).rgba,c??null)}return c?(this._addStyle(t,`color:${c.css}`),!0):!1}_getContrastCache(t){return t.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(t,e){t.setAttribute("style",`${t.getAttribute("style")||""}${e};`)}_isCellInSelection(t,e){let n=this._selectionStart,s=this._selectionEnd;return!n||!s?!1:this._columnSelectMode?n[0]<=s[0]?t>=n[0]&&e>=n[1]&&t<s[0]&&e<=s[1]:t<n[0]&&e>=n[1]&&t>=s[0]&&e<=s[1]:e>n[1]&&e<s[1]||n[1]===s[1]&&e===n[1]&&t>=n[0]&&t<s[0]||n[1]<s[1]&&e===s[1]&&t<s[0]||n[1]<s[1]&&e===n[1]&&t>=n[0]}};Rw=hn([Le(1,sM),Le(2,Ns),Le(3,da),Le(4,xo),Le(5,Mf),Le(6,Cu)],Rw);function Z3(t,e,n){for(;t.length<n;)t=e+t;return t}var cQ=class{constructor(t,e){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=t.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let n=t.createElement("span");n.classList.add("xterm-char-measure-element");let s=t.createElement("span");s.classList.add("xterm-char-measure-element"),s.style.fontWeight="bold";let r=t.createElement("span");r.classList.add("xterm-char-measure-element"),r.style.fontStyle="italic";let a=t.createElement("span");a.classList.add("xterm-char-measure-element"),a.style.fontWeight="bold",a.style.fontStyle="italic",this._measureElements=[n,s,r,a],this._container.appendChild(n),this._container.appendChild(s),this._container.appendChild(r),this._container.appendChild(a),e.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(t,e,n,s){t===this._font&&e===this._fontSize&&n===this._weight&&s===this._weightBold||(this._font=t,this._fontSize=e,this._weight=n,this._weightBold=s,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${n}`,this._measureElements[1].style.fontWeight=`${s}`,this._measureElements[2].style.fontWeight=`${n}`,this._measureElements[3].style.fontWeight=`${s}`,this.clear())}get(t,e,n){let s=0;if(!e&&!n&&t.length===1&&(s=t.charCodeAt(0))<256){if(this._flat[s]!==-9999)return this._flat[s];let o=this._measure(t,0);return o>0&&(this._flat[s]=o),o}let r=t;e&&(r+="B"),n&&(r+="I");let a=this._holey.get(r);if(a===void 0){let o=0;e&&(o|=1),n&&(o|=2),a=this._measure(t,o),a>0&&this._holey.set(r,a)}return a}_measure(t,e){let n=this._measureElements[e];return n.textContent=t.repeat(32),n.offsetWidth/32}},uQ=class{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(t,e,n,s=!1){if(this.selectionStart=e,this.selectionEnd=n,!e||!n||e[0]===n[0]&&e[1]===n[1]){this.clear();return}let r=t.buffers.active.ydisp,a=e[1]-r,o=n[1]-r,c=Math.max(a,0),h=Math.min(o,t.rows-1);if(c>=t.rows||h<0){this.clear();return}this.hasSelection=!0,this.columnSelectMode=s,this.viewportStartRow=a,this.viewportEndRow=o,this.viewportCappedStartRow=c,this.viewportCappedEndRow=h,this.startCol=e[0],this.endCol=n[0]}isCellSelected(t,e,n){return this.hasSelection?(n-=t.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?e>=this.startCol&&n>=this.viewportCappedStartRow&&e<this.endCol&&n<=this.viewportCappedEndRow:e<this.startCol&&n>=this.viewportCappedStartRow&&e>=this.endCol&&n<=this.viewportCappedEndRow:n>this.viewportStartRow&&n<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&n===this.viewportStartRow&&e>=this.startCol&&e<this.endCol||this.viewportStartRow<this.viewportEndRow&&n===this.viewportEndRow&&e<this.endCol||this.viewportStartRow<this.viewportEndRow&&n===this.viewportStartRow&&e>=this.startCol):!1}};function hQ(){return new uQ}var Yb="xterm-dom-renderer-owner-",Cr="xterm-rows",wm="xterm-fg-",ej="xterm-bg-",Oh="xterm-focus",Sm="xterm-selection",dQ=1,Bw=class extends bt{constructor(t,e,n,s,r,a,o,c,h,d,g,m,v,y){super(),this._terminal=t,this._document=e,this._element=n,this._screenElement=s,this._viewportElement=r,this._helperContainer=a,this._linkifier2=o,this._charSizeService=h,this._optionsService=d,this._bufferService=g,this._coreService=m,this._coreBrowserService=v,this._themeService=y,this._terminalClass=dQ++,this._rowElements=[],this._selectionRenderModel=hQ(),this.onRequestRedraw=this._register(new Ae).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(Cr),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(Sm),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=oQ(),this._updateDimensions(),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._themeService.onChangeColors(x=>this._injectCss(x))),this._injectCss(this._themeService.colors),this._rowFactory=c.createInstance(Rw,document),this._element.classList.add(Yb+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this._register(this._linkifier2.onShowLinkUnderline(x=>this._handleLinkHover(x))),this._register(this._linkifier2.onHideLinkUnderline(x=>this._handleLinkLeave(x))),this._register(nn(()=>{this._element.classList.remove(Yb+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new cQ(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let t=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*t,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*t),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/t),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/t),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let n of this._rowElements)n.style.width=`${this.dimensions.css.canvas.width}px`,n.style.height=`${this.dimensions.css.cell.height}px`,n.style.lineHeight=`${this.dimensions.css.cell.height}px`,n.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let e=`${this._terminalSelector} .${Cr} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=e,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(t){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let e=`${this._terminalSelector} .${Cr} { pointer-events: none; color: ${t.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;e+=`${this._terminalSelector} .${Cr} .xterm-dim { color: ${Jt.multiplyOpacity(t.foreground,.5).css};}`,e+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;let n=`blink_underline_${this._terminalClass}`,s=`blink_bar_${this._terminalClass}`,r=`blink_block_${this._terminalClass}`;e+=`@keyframes ${n} { 50% {  border-bottom-style: hidden; }}`,e+=`@keyframes ${s} { 50% {  box-shadow: none; }}`,e+=`@keyframes ${r} { 0% {  background-color: ${t.cursor.css};  color: ${t.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${t.cursor.css}; }}`,e+=`${this._terminalSelector} .${Cr}.${Oh} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${n} 1s step-end infinite;}${this._terminalSelector} .${Cr}.${Oh} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${s} 1s step-end infinite;}${this._terminalSelector} .${Cr}.${Oh} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${r} 1s step-end infinite;}${this._terminalSelector} .${Cr} .xterm-cursor.xterm-cursor-block { background-color: ${t.cursor.css}; color: ${t.cursorAccent.css};}${this._terminalSelector} .${Cr} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${t.cursor.css} !important; color: ${t.cursorAccent.css} !important;}${this._terminalSelector} .${Cr} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${t.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${Cr} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${t.cursor.css} inset;}${this._terminalSelector} .${Cr} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${t.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,e+=`${this._terminalSelector} .${Sm} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${Sm} div { position: absolute; background-color: ${t.selectionBackgroundOpaque.css};}${this._terminalSelector} .${Sm} div { position: absolute; background-color: ${t.selectionInactiveBackgroundOpaque.css};}`;for(let[a,o]of t.ansi.entries())e+=`${this._terminalSelector} .${wm}${a} { color: ${o.css}; }${this._terminalSelector} .${wm}${a}.xterm-dim { color: ${Jt.multiplyOpacity(o,.5).css}; }${this._terminalSelector} .${ej}${a} { background-color: ${o.css}; }`;e+=`${this._terminalSelector} .${wm}257 { color: ${Jt.opaque(t.background).css}; }${this._terminalSelector} .${wm}257.xterm-dim { color: ${Jt.multiplyOpacity(Jt.opaque(t.background),.5).css}; }${this._terminalSelector} .${ej}257 { background-color: ${t.foreground.css}; }`,this._themeStyleElement.textContent=e}_setDefaultSpacing(){let t=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${t}px`,this._rowFactory.defaultSpacing=t}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(t,e){for(let n=this._rowElements.length;n<=e;n++){let s=this._document.createElement("div");this._rowContainer.appendChild(s),this._rowElements.push(s)}for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(t,e){this._refreshRowElements(t,e),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(Oh),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(Oh),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(t,e,n){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(t,e,n),this.renderRows(0,this._bufferService.rows-1),!t||!e||(this._selectionRenderModel.update(this._terminal,t,e,n),!this._selectionRenderModel.hasSelection))return;let s=this._selectionRenderModel.viewportStartRow,r=this._selectionRenderModel.viewportEndRow,a=this._selectionRenderModel.viewportCappedStartRow,o=this._selectionRenderModel.viewportCappedEndRow,c=this._document.createDocumentFragment();if(n){let h=t[0]>e[0];c.appendChild(this._createSelectionElement(a,h?e[0]:t[0],h?t[0]:e[0],o-a+1))}else{let h=s===a?t[0]:0,d=a===r?e[0]:this._bufferService.cols;c.appendChild(this._createSelectionElement(a,h,d));let g=o-a-1;if(c.appendChild(this._createSelectionElement(a+1,0,this._bufferService.cols,g)),a!==o){let m=r===o?e[0]:this._bufferService.cols;c.appendChild(this._createSelectionElement(o,0,m))}}this._selectionContainer.appendChild(c)}_createSelectionElement(t,e,n,s=1){let r=this._document.createElement("div"),a=e*this.dimensions.css.cell.width,o=this.dimensions.css.cell.width*(n-e);return a+o>this.dimensions.css.canvas.width&&(o=this.dimensions.css.canvas.width-a),r.style.height=`${s*this.dimensions.css.cell.height}px`,r.style.top=`${t*this.dimensions.css.cell.height}px`,r.style.left=`${a}px`,r.style.width=`${o}px`,r}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let t of this._rowElements)t.replaceChildren()}renderRows(t,e){let n=this._bufferService.buffer,s=n.ybase+n.y,r=Math.min(n.x,this._bufferService.cols-1),a=this._coreService.decPrivateModes.cursorBlink??this._optionsService.rawOptions.cursorBlink,o=this._coreService.decPrivateModes.cursorStyle??this._optionsService.rawOptions.cursorStyle,c=this._optionsService.rawOptions.cursorInactiveStyle;for(let h=t;h<=e;h++){let d=h+n.ydisp,g=this._rowElements[h],m=n.lines.get(d);if(!g||!m)break;g.replaceChildren(...this._rowFactory.createRow(m,d,d===s,o,c,r,a,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${Yb}${this._terminalClass}`}_handleLinkHover(t){this._setCellUnderline(t.x1,t.x2,t.y1,t.y2,t.cols,!0)}_handleLinkLeave(t){this._setCellUnderline(t.x1,t.x2,t.y1,t.y2,t.cols,!1)}_setCellUnderline(t,e,n,s,r,a){n<0&&(t=0),s<0&&(e=0);let o=this._bufferService.rows-1;n=Math.max(Math.min(n,o),0),s=Math.max(Math.min(s,o),0),r=Math.min(r,this._bufferService.cols);let c=this._bufferService.buffer,h=c.ybase+c.y,d=Math.min(c.x,r-1),g=this._optionsService.rawOptions.cursorBlink,m=this._optionsService.rawOptions.cursorStyle,v=this._optionsService.rawOptions.cursorInactiveStyle;for(let y=n;y<=s;++y){let x=y+c.ydisp,w=this._rowElements[y],S=c.lines.get(x);if(!w||!S)break;w.replaceChildren(...this._rowFactory.createRow(S,x,x===h,m,v,d,g,this.dimensions.css.cell.width,this._widthCache,a?y===n?t:0:-1,a?(y===s?e:r)-1:-1))}}};Bw=hn([Le(7,U2),Le(8,ky),Le(9,Ns),Le(10,Cs),Le(11,xo),Le(12,da),Le(13,Cu)],Bw);var Mw=class extends bt{constructor(t,e,n){super(),this._optionsService=n,this.width=0,this.height=0,this._onCharSizeChange=this._register(new Ae),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this._register(new pQ(this._optionsService))}catch{this._measureStrategy=this._register(new fQ(t,e,this._optionsService))}this._register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}get hasValidSize(){return this.width>0&&this.height>0}measure(){let t=this._measureStrategy.measure();(t.width!==this.width||t.height!==this.height)&&(this.width=t.width,this.height=t.height,this._onCharSizeChange.fire())}};Mw=hn([Le(2,Ns)],Mw);var wM=class extends bt{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(t,e){t!==void 0&&t>0&&e!==void 0&&e>0&&(this._result.width=t,this._result.height=e)}},fQ=class extends wM{constructor(t,e,n){super(),this._document=t,this._parentElement=e,this._optionsService=n,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}},pQ=class extends wM{constructor(t){super(),this._optionsService=t,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");let e=this._ctx.measureText("W");if(!("width"in e&&"fontBoundingBoxAscent"in e&&"fontBoundingBoxDescent"in e))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;let t=this._ctx.measureText("W");return this._validateAndSet(t.width,t.fontBoundingBoxAscent+t.fontBoundingBoxDescent),this._result}},mQ=class extends bt{constructor(t,e,n){super(),this._textarea=t,this._window=e,this.mainDocument=n,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=this._register(new gQ(this._window)),this._onDprChange=this._register(new Ae),this.onDprChange=this._onDprChange.event,this._onWindowChange=this._register(new Ae),this.onWindowChange=this._onWindowChange.event,this._register(this.onWindowChange(s=>this._screenDprMonitor.setWindow(s))),this._register(ns.forward(this._screenDprMonitor.onDprChange,this._onDprChange)),this._register(st(this._textarea,"focus",()=>this._isFocused=!0)),this._register(st(this._textarea,"blur",()=>this._isFocused=!1))}get window(){return this._window}set window(t){this._window!==t&&(this._window=t,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}},gQ=class extends bt{constructor(t){super(),this._parentWindow=t,this._windowResizeListener=this._register(new nu),this._onDprChange=this._register(new Ae),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this._register(nn(()=>this.clearListener()))}setWindow(t){this._parentWindow=t,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=st(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){!this._resolutionMediaMatchList||!this._outerListener||(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}},yQ=class extends bt{constructor(){super(),this.linkProviders=[],this._register(nn(()=>this.linkProviders.length=0))}registerLinkProvider(t){return this.linkProviders.push(t),{dispose:()=>{let e=this.linkProviders.indexOf(t);e!==-1&&this.linkProviders.splice(e,1)}}}};function X2(t,e,n){let s=n.getBoundingClientRect(),r=t.getComputedStyle(n),a=parseInt(r.getPropertyValue("padding-left")),o=parseInt(r.getPropertyValue("padding-top"));return[e.clientX-s.left-a,e.clientY-s.top-o]}function vQ(t,e,n,s,r,a,o,c,h){if(!a)return;let d=X2(t,e,n);if(d)return d[0]=Math.ceil((d[0]+(h?o/2:0))/o),d[1]=Math.ceil(d[1]/c),d[0]=Math.min(Math.max(d[0],1),s+(h?1:0)),d[1]=Math.min(Math.max(d[1],1),r),d}var Dw=class{constructor(t,e){this._renderService=t,this._charSizeService=e}getCoords(t,e,n,s,r){return vQ(window,t,e,n,s,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,r)}getMouseReportCoords(t,e){let n=X2(window,t,e);if(this._charSizeService.hasValidSize)return n[0]=Math.min(Math.max(n[0],0),this._renderService.dimensions.css.canvas.width-1),n[1]=Math.min(Math.max(n[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(n[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(n[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(n[0]),y:Math.floor(n[1])}}};Dw=hn([Le(0,fa),Le(1,ky)],Dw);var bQ=class{constructor(t,e){this._renderCallback=t,this._coreBrowserService=e,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(t){return this._refreshCallbacks.push(t),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(t,e,n){this._rowCount=n,t=t!==void 0?t:0,e=e!==void 0?e:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,t):t,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,e):e,!this._animationFrame&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0){this._runRefreshCallbacks();return}let t=Math.max(this._rowStart,0),e=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(t,e),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let t of this._refreshCallbacks)t(0);this._refreshCallbacks=[]}},SM={};jX(SM,{getSafariVersion:()=>xQ,isChromeOS:()=>EM,isFirefox:()=>kM,isIpad:()=>wQ,isIphone:()=>SQ,isLegacyEdge:()=>_Q,isLinux:()=>J2,isMac:()=>sg,isNode:()=>Cy,isSafari:()=>CM,isWindows:()=>NM});var Cy=typeof process<"u"&&"title"in process,Df=Cy?"node":navigator.userAgent,Lf=Cy?"node":navigator.platform,kM=Df.includes("Firefox"),_Q=Df.includes("Edge"),CM=/^((?!chrome|android).)*safari/i.test(Df);function xQ(){if(!CM)return 0;let t=Df.match(/Version\/(\d+)/);return t===null||t.length<2?0:parseInt(t[1])}var sg=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(Lf),wQ=Lf==="iPad",SQ=Lf==="iPhone",NM=["Windows","Win16","Win32","WinCE"].includes(Lf),J2=Lf.indexOf("Linux")>=0,EM=/\bCrOS\b/.test(Df),AM=class{constructor(){this._tasks=[],this._i=0}enqueue(t){this._tasks.push(t),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(t){this._idleCallback=void 0;let e=0,n=0,s=t.timeRemaining(),r=0;for(;this._i<this._tasks.length;){if(e=performance.now(),this._tasks[this._i]()||this._i++,e=Math.max(1,performance.now()-e),n=Math.max(e,n),r=t.timeRemaining(),n*1.5>r){s-e<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(s-e))}ms`),this._start();return}s=r}this.clear()}},kQ=class extends AM{_requestCallback(t){return setTimeout(()=>t(this._createDeadline(16)))}_cancelCallback(t){clearTimeout(t)}_createDeadline(t){let e=performance.now()+t;return{timeRemaining:()=>Math.max(0,e-performance.now())}}},CQ=class extends AM{_requestCallback(t){return requestIdleCallback(t)}_cancelCallback(t){cancelIdleCallback(t)}},rg=!Cy&&"requestIdleCallback"in window?CQ:kQ,NQ=class{constructor(){this._queue=new rg}set(t){this._queue.clear(),this._queue.enqueue(t)}flush(){this._queue.flush()}},Lw=class extends bt{constructor(t,e,n,s,r,a,o,c,h){super(),this._rowCount=t,this._optionsService=n,this._charSizeService=s,this._coreService=r,this._coreBrowserService=c,this._renderer=this._register(new nu),this._pausedResizeTask=new NQ,this._observerDisposable=this._register(new nu),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this._register(new Ae),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this._register(new Ae),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this._register(new Ae),this.onRender=this._onRender.event,this._onRefreshRequest=this._register(new Ae),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new bQ((d,g)=>this._renderRows(d,g),this._coreBrowserService),this._register(this._renderDebouncer),this._syncOutputHandler=new EQ(this._coreBrowserService,this._coreService,()=>this._fullRefresh()),this._register(nn(()=>this._syncOutputHandler.dispose())),this._register(this._coreBrowserService.onDprChange(()=>this.handleDevicePixelRatioChange())),this._register(o.onResize(()=>this._fullRefresh())),this._register(o.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this._register(a.onDecorationRegistered(()=>this._fullRefresh())),this._register(a.onDecorationRemoved(()=>this._fullRefresh())),this._register(this._optionsService.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(o.cols,o.rows),this._fullRefresh()})),this._register(this._optionsService.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(o.buffer.y,o.buffer.y,!0))),this._register(h.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(this._coreBrowserService.window,e),this._register(this._coreBrowserService.onWindowChange(d=>this._registerIntersectionObserver(d,e)))}get dimensions(){return this._renderer.value.dimensions}_registerIntersectionObserver(t,e){if("IntersectionObserver"in t){let n=new t.IntersectionObserver(s=>this._handleIntersectionChange(s[s.length-1]),{threshold:0});n.observe(e),this._observerDisposable.value=nn(()=>n.disconnect())}}_handleIntersectionChange(t){this._isPaused=t.isIntersecting===void 0?t.intersectionRatio===0:!t.isIntersecting,!this._isPaused&&!this._charSizeService.hasValidSize&&this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(t,e,n=!1){if(this._isPaused){this._needsFullRefresh=!0;return}if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(t,e);return}let s=this._syncOutputHandler.flush();s&&(t=Math.min(t,s.start),e=Math.max(e,s.end)),n||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(t,e,this._rowCount)}_renderRows(t,e){if(this._renderer.value){if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(t,e);return}t=Math.min(t,this._rowCount-1),e=Math.min(e,this._rowCount-1),this._renderer.value.renderRows(t,e),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:t,end:e}),this._onRender.fire({start:t,end:e}),this._isNextRenderRedrawOnly=!0}}resize(t,e){this._rowCount=e,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(t){this._renderer.value=t,this._renderer.value&&(this._renderer.value.onRequestRedraw(e=>this.refreshRows(e.start,e.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(t){return this._renderDebouncer.addRefreshCallback(t)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(t,e){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(t,e)):this._renderer.value.handleResize(t,e),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(t,e,n){this._selectionState.start=t,this._selectionState.end=e,this._selectionState.columnSelectMode=n,this._renderer.value?.handleSelectionChanged(t,e,n)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};Lw=hn([Le(2,Ns),Le(3,ky),Le(4,xo),Le(5,Mf),Le(6,Cs),Le(7,da),Le(8,Cu)],Lw);var EQ=class{constructor(t,e,n){this._coreBrowserService=t,this._coreService=e,this._onTimeout=n,this._start=0,this._end=0,this._isBuffering=!1}bufferRows(t,e){this._isBuffering?(this._start=Math.min(this._start,t),this._end=Math.max(this._end,e)):(this._start=t,this._end=e,this._isBuffering=!0),this._timeout===void 0&&(this._timeout=this._coreBrowserService.window.setTimeout(()=>{this._timeout=void 0,this._coreService.decPrivateModes.synchronizedOutput=!1,this._onTimeout()},1e3))}flush(){if(this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0),!this._isBuffering)return;let t={start:this._start,end:this._end};return this._isBuffering=!1,t}dispose(){this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0)}};function AQ(t,e,n,s){let r=n.buffer.x,a=n.buffer.y;if(!n.buffer.hasScrollback)return OQ(r,a,t,e,n,s)+Ny(a,e,n,s)+RQ(r,a,t,e,n,s);let o;if(a===e)return o=r>t?"D":"C",sf(Math.abs(r-t),nf(o,s));o=a>e?"D":"C";let c=Math.abs(a-e),h=TQ(a>e?t:r,n)+(c-1)*n.cols+1+jQ(a>e?r:t);return sf(h,nf(o,s))}function jQ(t,e){return t-1}function TQ(t,e){return e.cols-t}function OQ(t,e,n,s,r,a){return Ny(e,s,r,a).length===0?"":sf(TM(t,e,t,e-fo(e,r),!1,r).length,nf("D",a))}function Ny(t,e,n,s){let r=t-fo(t,n),a=e-fo(e,n),o=Math.abs(r-a)-BQ(t,e,n);return sf(o,nf(jM(t,e),s))}function RQ(t,e,n,s,r,a){let o;Ny(e,s,r,a).length>0?o=s-fo(s,r):o=e;let c=s,h=MQ(t,e,n,s,r,a);return sf(TM(t,o,n,c,h==="C",r).length,nf(h,a))}function BQ(t,e,n){let s=0,r=t-fo(t,n),a=e-fo(e,n);for(let o=0;o<Math.abs(r-a);o++){let c=jM(t,e)==="A"?-1:1;n.buffer.lines.get(r+c*o)?.isWrapped&&s++}return s}function fo(t,e){let n=0,s=e.buffer.lines.get(t),r=s?.isWrapped;for(;r&&t>=0&&t<e.rows;)n++,s=e.buffer.lines.get(--t),r=s?.isWrapped;return n}function MQ(t,e,n,s,r,a){let o;return Ny(n,s,r,a).length>0?o=s-fo(s,r):o=e,t<n&&o<=s||t>=n&&o<s?"C":"D"}function jM(t,e){return t>e?"A":"B"}function TM(t,e,n,s,r,a){let o=t,c=e,h="";for(;(o!==n||c!==s)&&c>=0&&c<a.buffer.lines.length;)o+=r?1:-1,r&&o>a.cols-1?(h+=a.buffer.translateBufferLineToString(c,!1,t,o),o=0,t=0,c++):!r&&o<0&&(h+=a.buffer.translateBufferLineToString(c,!1,0,t+1),o=a.cols-1,t=o,c--);return h+a.buffer.translateBufferLineToString(c,!1,t,o)}function nf(t,e){let n=e?"O":"[";return ve.ESC+n+t}function sf(t,e){t=Math.floor(t);let n="";for(let s=0;s<t;s++)n+=e;return n}var DQ=class{constructor(t){this._bufferService=t,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:!this.selectionEnd||!this.selectionStart?this.selectionStart:this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let t=this.selectionStart[0]+this.selectionStartLength;return t>this._bufferService.cols?t%this._bufferService.cols===0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(t/this._bufferService.cols)-1]:[t%this._bufferService.cols,this.selectionStart[1]+Math.floor(t/this._bufferService.cols)]:[t,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let t=this.selectionStart[0]+this.selectionStartLength;return t>this._bufferService.cols?[t%this._bufferService.cols,this.selectionStart[1]+Math.floor(t/this._bufferService.cols)]:[Math.max(t,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let t=this.selectionStart,e=this.selectionEnd;return!t||!e?!1:t[1]>e[1]||t[1]===e[1]&&t[0]>e[0]}handleTrim(t){return this.selectionStart&&(this.selectionStart[1]-=t),this.selectionEnd&&(this.selectionEnd[1]-=t),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}};function tj(t,e){if(t.start.y>t.end.y)throw new Error(`Buffer range end (${t.end.x}, ${t.end.y}) cannot be before start (${t.start.x}, ${t.start.y})`);return e*(t.end.y-t.start.y)+(t.end.x-t.start.x+1)}var Xb=50,LQ=15,IQ=50,PQ=500,zQ="",$Q=new RegExp(zQ,"g"),Iw=class extends bt{constructor(t,e,n,s,r,a,o,c,h){super(),this._element=t,this._screenElement=e,this._linkifier=n,this._bufferService=s,this._coreService=r,this._mouseService=a,this._optionsService=o,this._renderService=c,this._coreBrowserService=h,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new Br,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this._register(new Ae),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this._register(new Ae),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this._register(new Ae),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this._register(new Ae),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=d=>this._handleMouseMove(d),this._mouseUpListener=d=>this._handleMouseUp(d),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(d=>this._handleTrim(d)),this._register(this._bufferService.buffers.onBufferActivate(d=>this._handleBufferActivate(d))),this.enable(),this._model=new DQ(this._bufferService),this._activeSelectionMode=0,this._register(nn(()=>{this._removeMouseDownListeners()})),this._register(this._bufferService.onResize(d=>{d.rowsChanged&&this.clearSelection()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let t=this._model.finalSelectionStart,e=this._model.finalSelectionEnd;return!t||!e?!1:t[0]!==e[0]||t[1]!==e[1]}get selectionText(){let t=this._model.finalSelectionStart,e=this._model.finalSelectionEnd;if(!t||!e)return"";let n=this._bufferService.buffer,s=[];if(this._activeSelectionMode===3){if(t[0]===e[0])return"";let r=t[0]<e[0]?t[0]:e[0],a=t[0]<e[0]?e[0]:t[0];for(let o=t[1];o<=e[1];o++){let c=n.translateBufferLineToString(o,!0,r,a);s.push(c)}}else{let r=t[1]===e[1]?e[0]:void 0;s.push(n.translateBufferLineToString(t[1],!0,t[0],r));for(let a=t[1]+1;a<=e[1]-1;a++){let o=n.lines.get(a),c=n.translateBufferLineToString(a,!0);o?.isWrapped?s[s.length-1]+=c:s.push(c)}if(t[1]!==e[1]){let a=n.lines.get(e[1]),o=n.translateBufferLineToString(e[1],!0,0,e[0]);a&&a.isWrapped?s[s.length-1]+=o:s.push(o)}}return s.map(r=>r.replace($Q," ")).join(NM?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(t){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),J2&&t&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(t){let e=this._getMouseBufferCoords(t),n=this._model.finalSelectionStart,s=this._model.finalSelectionEnd;return!n||!s||!e?!1:this._areCoordsInSelection(e,n,s)}isCellInSelection(t,e){let n=this._model.finalSelectionStart,s=this._model.finalSelectionEnd;return!n||!s?!1:this._areCoordsInSelection([t,e],n,s)}_areCoordsInSelection(t,e,n){return t[1]>e[1]&&t[1]<n[1]||e[1]===n[1]&&t[1]===e[1]&&t[0]>=e[0]&&t[0]<n[0]||e[1]<n[1]&&t[1]===n[1]&&t[0]<n[0]||e[1]<n[1]&&t[1]===e[1]&&t[0]>=e[0]}_selectWordAtCursor(t,e){let n=this._linkifier.currentLink?.link?.range;if(n)return this._model.selectionStart=[n.start.x-1,n.start.y-1],this._model.selectionStartLength=tj(n,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let s=this._getMouseBufferCoords(t);return s?(this._selectWordAt(s,e),this._model.selectionEnd=void 0,!0):!1}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(t,e){this._model.clearSelection(),t=Math.max(t,0),e=Math.min(e,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,t],this._model.selectionEnd=[this._bufferService.cols,e],this.refresh(),this._onSelectionChange.fire()}_handleTrim(t){this._model.handleTrim(t)&&this.refresh()}_getMouseBufferCoords(t){let e=this._mouseService.getCoords(t,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(e)return e[0]--,e[1]--,e[1]+=this._bufferService.buffer.ydisp,e}_getMouseEventScrollAmount(t){let e=X2(this._coreBrowserService.window,t,this._screenElement)[1],n=this._renderService.dimensions.css.canvas.height;return e>=0&&e<=n?0:(e>n&&(e-=n),e=Math.min(Math.max(e,-Xb),Xb),e/=Xb,e/Math.abs(e)+Math.round(e*(LQ-1)))}shouldForceSelection(t){return sg?t.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:t.shiftKey}handleMouseDown(t){if(this._mouseDownTimeStamp=t.timeStamp,!(t.button===2&&this.hasSelection)&&t.button===0){if(!this._enabled){if(!this.shouldForceSelection(t))return;t.stopPropagation()}t.preventDefault(),this._dragScrollAmount=0,this._enabled&&t.shiftKey?this._handleIncrementalClick(t):t.detail===1?this._handleSingleClick(t):t.detail===2?this._handleDoubleClick(t):t.detail===3&&this._handleTripleClick(t),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),IQ)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(t){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(t))}_handleSingleClick(t){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(t)?3:0,this._model.selectionStart=this._getMouseBufferCoords(t),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let e=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);e&&e.length!==this._model.selectionStart[0]&&e.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(t){this._selectWordAtCursor(t,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(t){let e=this._getMouseBufferCoords(t);e&&(this._activeSelectionMode=2,this._selectLineAt(e[1]))}shouldColumnSelect(t){return t.altKey&&!(sg&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(t){if(t.stopImmediatePropagation(),!this._model.selectionStart)return;let e=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(t),!this._model.selectionEnd){this.refresh(!0);return}this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(t),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let n=this._bufferService.buffer;if(this._model.selectionEnd[1]<n.lines.length){let s=n.lines.get(this._model.selectionEnd[1]);s&&s.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}(!e||e[0]!==this._model.selectionEnd[0]||e[1]!==this._model.selectionEnd[1])&&this.refresh(!0)}_dragScroll(){if(!(!this._model.selectionEnd||!this._model.selectionStart)&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let t=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(t.ydisp+this._bufferService.rows,t.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=t.ydisp),this.refresh()}}_handleMouseUp(t){let e=t.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&e<PQ&&t.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let n=this._mouseService.getCoords(t,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(n&&n[0]!==void 0&&n[1]!==void 0){let s=AQ(n[0]-1,n[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(s,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let t=this._model.finalSelectionStart,e=this._model.finalSelectionEnd,n=!!t&&!!e&&(t[0]!==e[0]||t[1]!==e[1]);if(!n){this._oldHasSelection&&this._fireOnSelectionChange(t,e,n);return}!t||!e||(!this._oldSelectionStart||!this._oldSelectionEnd||t[0]!==this._oldSelectionStart[0]||t[1]!==this._oldSelectionStart[1]||e[0]!==this._oldSelectionEnd[0]||e[1]!==this._oldSelectionEnd[1])&&this._fireOnSelectionChange(t,e,n)}_fireOnSelectionChange(t,e,n){this._oldSelectionStart=t,this._oldSelectionEnd=e,this._oldHasSelection=n,this._onSelectionChange.fire()}_handleBufferActivate(t){this.clearSelection(),this._trimListener.dispose(),this._trimListener=t.activeBuffer.lines.onTrim(e=>this._handleTrim(e))}_convertViewportColToCharacterIndex(t,e){let n=e;for(let s=0;e>=s;s++){let r=t.loadCell(s,this._workCell).getChars().length;this._workCell.getWidth()===0?n--:r>1&&e!==s&&(n+=r-1)}return n}setSelection(t,e,n){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[t,e],this._model.selectionStartLength=n,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(t){this._isClickInSelection(t)||(this._selectWordAtCursor(t,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(t,e,n=!0,s=!0){if(t[0]>=this._bufferService.cols)return;let r=this._bufferService.buffer,a=r.lines.get(t[1]);if(!a)return;let o=r.translateBufferLineToString(t[1],!1),c=this._convertViewportColToCharacterIndex(a,t[0]),h=c,d=t[0]-c,g=0,m=0,v=0,y=0;if(o.charAt(c)===" "){for(;c>0&&o.charAt(c-1)===" ";)c--;for(;h<o.length&&o.charAt(h+1)===" ";)h++}else{let S=t[0],k=t[0];a.getWidth(S)===0&&(g++,S--),a.getWidth(k)===2&&(m++,k++);let C=a.getString(k).length;for(C>1&&(y+=C-1,h+=C-1);S>0&&c>0&&!this._isCharWordSeparator(a.loadCell(S-1,this._workCell));){a.loadCell(S-1,this._workCell);let A=this._workCell.getChars().length;this._workCell.getWidth()===0?(g++,S--):A>1&&(v+=A-1,c-=A-1),c--,S--}for(;k<a.length&&h+1<o.length&&!this._isCharWordSeparator(a.loadCell(k+1,this._workCell));){a.loadCell(k+1,this._workCell);let A=this._workCell.getChars().length;this._workCell.getWidth()===2?(m++,k++):A>1&&(y+=A-1,h+=A-1),h++,k++}}h++;let x=c+d-g+v,w=Math.min(this._bufferService.cols,h-c+g+m-v-y);if(!(!e&&o.slice(c,h).trim()==="")){if(n&&x===0&&a.getCodePoint(0)!==32){let S=r.lines.get(t[1]-1);if(S&&a.isWrapped&&S.getCodePoint(this._bufferService.cols-1)!==32){let k=this._getWordAt([this._bufferService.cols-1,t[1]-1],!1,!0,!1);if(k){let C=this._bufferService.cols-k.start;x-=C,w+=C}}}if(s&&x+w===this._bufferService.cols&&a.getCodePoint(this._bufferService.cols-1)!==32){let S=r.lines.get(t[1]+1);if(S?.isWrapped&&S.getCodePoint(0)!==32){let k=this._getWordAt([0,t[1]+1],!1,!1,!0);k&&(w+=k.length)}}return{start:x,length:w}}}_selectWordAt(t,e){let n=this._getWordAt(t,e);if(n){for(;n.start<0;)n.start+=this._bufferService.cols,t[1]--;this._model.selectionStart=[n.start,t[1]],this._model.selectionStartLength=n.length}}_selectToWordAt(t){let e=this._getWordAt(t,!0);if(e){let n=t[1];for(;e.start<0;)e.start+=this._bufferService.cols,n--;if(!this._model.areSelectionValuesReversed())for(;e.start+e.length>this._bufferService.cols;)e.length-=this._bufferService.cols,n++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?e.start:e.start+e.length,n]}}_isCharWordSeparator(t){return t.getWidth()===0?!1:this._optionsService.rawOptions.wordSeparator.indexOf(t.getChars())>=0}_selectLineAt(t){let e=this._bufferService.buffer.getWrappedRangeForLine(t),n={start:{x:0,y:e.first},end:{x:this._bufferService.cols-1,y:e.last}};this._model.selectionStart=[0,e.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=tj(n,this._bufferService.cols)}};Iw=hn([Le(3,Cs),Le(4,xo),Le(5,V2),Le(6,Ns),Le(7,fa),Le(8,da)],Iw);var nj=class{constructor(){this._data={}}set(t,e,n){this._data[t]||(this._data[t]={}),this._data[t][e]=n}get(t,e){return this._data[t]?this._data[t][e]:void 0}clear(){this._data={}}},sj=class{constructor(){this._color=new nj,this._css=new nj}setCss(t,e,n){this._css.set(t,e,n)}getCss(t,e){return this._css.get(t,e)}setColor(t,e,n){this._color.set(t,e,n)}getColor(t,e){return this._color.get(t,e)}clear(){this._color.clear(),this._css.clear()}},Rn=Object.freeze((()=>{let t=[ln.toColor("#2e3436"),ln.toColor("#cc0000"),ln.toColor("#4e9a06"),ln.toColor("#c4a000"),ln.toColor("#3465a4"),ln.toColor("#75507b"),ln.toColor("#06989a"),ln.toColor("#d3d7cf"),ln.toColor("#555753"),ln.toColor("#ef2929"),ln.toColor("#8ae234"),ln.toColor("#fce94f"),ln.toColor("#729fcf"),ln.toColor("#ad7fa8"),ln.toColor("#34e2e2"),ln.toColor("#eeeeec")],e=[0,95,135,175,215,255];for(let n=0;n<216;n++){let s=e[n/36%6|0],r=e[n/6%6|0],a=e[n%6];t.push({css:Nn.toCss(s,r,a),rgba:Nn.toRgba(s,r,a)})}for(let n=0;n<24;n++){let s=8+n*10;t.push({css:Nn.toCss(s,s,s),rgba:Nn.toRgba(s,s,s)})}return t})()),Rl=ln.toColor("#ffffff"),fd=ln.toColor("#000000"),rj=ln.toColor("#ffffff"),ij=fd,Rh={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117},HQ=Rl,Pw=class extends bt{constructor(t){super(),this._optionsService=t,this._contrastCache=new sj,this._halfContrastCache=new sj,this._onChangeColors=this._register(new Ae),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:Rl,background:fd,cursor:rj,cursorAccent:ij,selectionForeground:void 0,selectionBackgroundTransparent:Rh,selectionBackgroundOpaque:Jt.blend(fd,Rh),selectionInactiveBackgroundTransparent:Rh,selectionInactiveBackgroundOpaque:Jt.blend(fd,Rh),scrollbarSliderBackground:Jt.opacity(Rl,.2),scrollbarSliderHoverBackground:Jt.opacity(Rl,.4),scrollbarSliderActiveBackground:Jt.opacity(Rl,.5),overviewRulerBorder:Rl,ansi:Rn.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this._register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this._register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}get colors(){return this._colors}_setTheme(t={}){let e=this._colors;if(e.foreground=Ft(t.foreground,Rl),e.background=Ft(t.background,fd),e.cursor=Jt.blend(e.background,Ft(t.cursor,rj)),e.cursorAccent=Jt.blend(e.background,Ft(t.cursorAccent,ij)),e.selectionBackgroundTransparent=Ft(t.selectionBackground,Rh),e.selectionBackgroundOpaque=Jt.blend(e.background,e.selectionBackgroundTransparent),e.selectionInactiveBackgroundTransparent=Ft(t.selectionInactiveBackground,e.selectionBackgroundTransparent),e.selectionInactiveBackgroundOpaque=Jt.blend(e.background,e.selectionInactiveBackgroundTransparent),e.selectionForeground=t.selectionForeground?Ft(t.selectionForeground,Q3):void 0,e.selectionForeground===Q3&&(e.selectionForeground=void 0),Jt.isOpaque(e.selectionBackgroundTransparent)&&(e.selectionBackgroundTransparent=Jt.opacity(e.selectionBackgroundTransparent,.3)),Jt.isOpaque(e.selectionInactiveBackgroundTransparent)&&(e.selectionInactiveBackgroundTransparent=Jt.opacity(e.selectionInactiveBackgroundTransparent,.3)),e.scrollbarSliderBackground=Ft(t.scrollbarSliderBackground,Jt.opacity(e.foreground,.2)),e.scrollbarSliderHoverBackground=Ft(t.scrollbarSliderHoverBackground,Jt.opacity(e.foreground,.4)),e.scrollbarSliderActiveBackground=Ft(t.scrollbarSliderActiveBackground,Jt.opacity(e.foreground,.5)),e.overviewRulerBorder=Ft(t.overviewRulerBorder,HQ),e.ansi=Rn.slice(),e.ansi[0]=Ft(t.black,Rn[0]),e.ansi[1]=Ft(t.red,Rn[1]),e.ansi[2]=Ft(t.green,Rn[2]),e.ansi[3]=Ft(t.yellow,Rn[3]),e.ansi[4]=Ft(t.blue,Rn[4]),e.ansi[5]=Ft(t.magenta,Rn[5]),e.ansi[6]=Ft(t.cyan,Rn[6]),e.ansi[7]=Ft(t.white,Rn[7]),e.ansi[8]=Ft(t.brightBlack,Rn[8]),e.ansi[9]=Ft(t.brightRed,Rn[9]),e.ansi[10]=Ft(t.brightGreen,Rn[10]),e.ansi[11]=Ft(t.brightYellow,Rn[11]),e.ansi[12]=Ft(t.brightBlue,Rn[12]),e.ansi[13]=Ft(t.brightMagenta,Rn[13]),e.ansi[14]=Ft(t.brightCyan,Rn[14]),e.ansi[15]=Ft(t.brightWhite,Rn[15]),t.extendedAnsi){let n=Math.min(e.ansi.length-16,t.extendedAnsi.length);for(let s=0;s<n;s++)e.ansi[s+16]=Ft(t.extendedAnsi[s],Rn[s+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(t){this._restoreColor(t),this._onChangeColors.fire(this.colors)}_restoreColor(t){if(t===void 0){for(let e=0;e<this._restoreColors.ansi.length;++e)this._colors.ansi[e]=this._restoreColors.ansi[e];return}switch(t){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[t]=this._restoreColors.ansi[t]}}modifyColors(t){t(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};Pw=hn([Le(0,Ns)],Pw);function Ft(t,e){if(t!==void 0)try{return ln.toColor(t)}catch{}return e}var UQ=class{constructor(...t){this._entries=new Map;for(let[e,n]of t)this.set(e,n)}set(t,e){let n=this._entries.get(t);return this._entries.set(t,e),n}forEach(t){for(let[e,n]of this._entries.entries())t(e,n)}has(t){return this._entries.has(t)}get(t){return this._entries.get(t)}},VQ=class{constructor(){this._services=new UQ,this._services.set(U2,this)}setService(t,e){this._services.set(t,e)}getService(t){return this._services.get(t)}createInstance(t,...e){let n=LX(t).sort((a,o)=>a.index-o.index),s=[];for(let a of n){let o=this._services.get(a.id);if(!o)throw new Error(`[createInstance] ${t.name} depends on UNKNOWN service ${a.id._id}.`);s.push(o)}let r=n.length>0?n[0].index:e.length;if(e.length!==r)throw new Error(`[createInstance] First service dependency of ${t.name} at position ${r+1} conflicts with ${e.length} static arguments`);return new t(...e,...s)}},FQ={trace:0,debug:1,info:2,warn:3,error:4,off:5},qQ="xterm.js: ",zw=class extends bt{constructor(t){super(),this._optionsService=t,this._logLevel=5,this._updateLogLevel(),this._register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel()))}get logLevel(){return this._logLevel}_updateLogLevel(){this._logLevel=FQ[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(t){for(let e=0;e<t.length;e++)typeof t[e]=="function"&&(t[e]=t[e]())}_log(t,e,n){this._evalLazyOptionalParams(n),t.call(console,(this._optionsService.options.logger?"":qQ)+e,...n)}trace(t,...e){this._logLevel<=0&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,t,e)}debug(t,...e){this._logLevel<=1&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,t,e)}info(t,...e){this._logLevel<=2&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,t,e)}warn(t,...e){this._logLevel<=3&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,t,e)}error(t,...e){this._logLevel<=4&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,t,e)}};zw=hn([Le(0,Ns)],zw);var aj=class extends bt{constructor(t){super(),this._maxLength=t,this.onDeleteEmitter=this._register(new Ae),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this._register(new Ae),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this._register(new Ae),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(t){if(this._maxLength===t)return;let e=new Array(t);for(let n=0;n<Math.min(t,this.length);n++)e[n]=this._array[this._getCyclicIndex(n)];this._array=e,this._maxLength=t,this._startIndex=0}get length(){return this._length}set length(t){if(t>this._length)for(let e=this._length;e<t;e++)this._array[e]=void 0;this._length=t}get(t){return this._array[this._getCyclicIndex(t)]}set(t,e){this._array[this._getCyclicIndex(t)]=e}push(t){this._array[this._getCyclicIndex(this._length)]=t,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(t,e,...n){if(e){for(let s=t;s<this._length-e;s++)this._array[this._getCyclicIndex(s)]=this._array[this._getCyclicIndex(s+e)];this._length-=e,this.onDeleteEmitter.fire({index:t,amount:e})}for(let s=this._length-1;s>=t;s--)this._array[this._getCyclicIndex(s+n.length)]=this._array[this._getCyclicIndex(s)];for(let s=0;s<n.length;s++)this._array[this._getCyclicIndex(t+s)]=n[s];if(n.length&&this.onInsertEmitter.fire({index:t,amount:n.length}),this._length+n.length>this._maxLength){let s=this._length+n.length-this._maxLength;this._startIndex+=s,this._length=this._maxLength,this.onTrimEmitter.fire(s)}else this._length+=n.length}trimStart(t){t>this._length&&(t=this._length),this._startIndex+=t,this._length-=t,this.onTrimEmitter.fire(t)}shiftElements(t,e,n){if(!(e<=0)){if(t<0||t>=this._length)throw new Error("start argument out of range");if(t+n<0)throw new Error("Cannot shift elements in list beyond index 0");if(n>0){for(let r=e-1;r>=0;r--)this.set(t+r+n,this.get(t+r));let s=t+e+n-this._length;if(s>0)for(this._length+=s;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let s=0;s<e;s++)this.set(t+s+n,this.get(t+s))}}_getCyclicIndex(t){return(this._startIndex+t)%this._maxLength}},vt=3,Cn=Object.freeze(new Bf),km=0,Jb=2,pd=class OM{constructor(e,n,s=!1){this.isWrapped=s,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(e*vt);let r=n||Br.fromCharData([0,XB,1,0]);for(let a=0;a<e;++a)this.setCell(a,r);this.length=e}get(e){let n=this._data[e*vt+0],s=n&2097151;return[this._data[e*vt+1],n&2097152?this._combined[e]:s?qa(s):"",n>>22,n&2097152?this._combined[e].charCodeAt(this._combined[e].length-1):s]}set(e,n){this._data[e*vt+1]=n[0],n[1].length>1?(this._combined[e]=n[1],this._data[e*vt+0]=e|2097152|n[2]<<22):this._data[e*vt+0]=n[1].charCodeAt(0)|n[2]<<22}getWidth(e){return this._data[e*vt+0]>>22}hasWidth(e){return this._data[e*vt+0]&12582912}getFg(e){return this._data[e*vt+1]}getBg(e){return this._data[e*vt+2]}hasContent(e){return this._data[e*vt+0]&4194303}getCodePoint(e){let n=this._data[e*vt+0];return n&2097152?this._combined[e].charCodeAt(this._combined[e].length-1):n&2097151}isCombined(e){return this._data[e*vt+0]&2097152}getString(e){let n=this._data[e*vt+0];return n&2097152?this._combined[e]:n&2097151?qa(n&2097151):""}isProtected(e){return this._data[e*vt+2]&536870912}loadCell(e,n){return km=e*vt,n.content=this._data[km+0],n.fg=this._data[km+1],n.bg=this._data[km+2],n.content&2097152&&(n.combinedData=this._combined[e]),n.bg&268435456&&(n.extended=this._extendedAttrs[e]),n}setCell(e,n){n.content&2097152&&(this._combined[e]=n.combinedData),n.bg&268435456&&(this._extendedAttrs[e]=n.extended),this._data[e*vt+0]=n.content,this._data[e*vt+1]=n.fg,this._data[e*vt+2]=n.bg}setCellFromCodepoint(e,n,s,r){r.bg&268435456&&(this._extendedAttrs[e]=r.extended),this._data[e*vt+0]=n|s<<22,this._data[e*vt+1]=r.fg,this._data[e*vt+2]=r.bg}addCodepointToCell(e,n,s){let r=this._data[e*vt+0];r&2097152?this._combined[e]+=qa(n):r&2097151?(this._combined[e]=qa(r&2097151)+qa(n),r&=-2097152,r|=2097152):r=n|1<<22,s&&(r&=-12582913,r|=s<<22),this._data[e*vt+0]=r}insertCells(e,n,s){if(e%=this.length,e&&this.getWidth(e-1)===2&&this.setCellFromCodepoint(e-1,0,1,s),n<this.length-e){let r=new Br;for(let a=this.length-e-n-1;a>=0;--a)this.setCell(e+n+a,this.loadCell(e+a,r));for(let a=0;a<n;++a)this.setCell(e+a,s)}else for(let r=e;r<this.length;++r)this.setCell(r,s);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,s)}deleteCells(e,n,s){if(e%=this.length,n<this.length-e){let r=new Br;for(let a=0;a<this.length-e-n;++a)this.setCell(e+a,this.loadCell(e+n+a,r));for(let a=this.length-n;a<this.length;++a)this.setCell(a,s)}else for(let r=e;r<this.length;++r)this.setCell(r,s);e&&this.getWidth(e-1)===2&&this.setCellFromCodepoint(e-1,0,1,s),this.getWidth(e)===0&&!this.hasContent(e)&&this.setCellFromCodepoint(e,0,1,s)}replaceCells(e,n,s,r=!1){if(r){for(e&&this.getWidth(e-1)===2&&!this.isProtected(e-1)&&this.setCellFromCodepoint(e-1,0,1,s),n<this.length&&this.getWidth(n-1)===2&&!this.isProtected(n)&&this.setCellFromCodepoint(n,0,1,s);e<n&&e<this.length;)this.isProtected(e)||this.setCell(e,s),e++;return}for(e&&this.getWidth(e-1)===2&&this.setCellFromCodepoint(e-1,0,1,s),n<this.length&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n,0,1,s);e<n&&e<this.length;)this.setCell(e++,s)}resize(e,n){if(e===this.length)return this._data.length*4*Jb<this._data.buffer.byteLength;let s=e*vt;if(e>this.length){if(this._data.buffer.byteLength>=s*4)this._data=new Uint32Array(this._data.buffer,0,s);else{let r=new Uint32Array(s);r.set(this._data),this._data=r}for(let r=this.length;r<e;++r)this.setCell(r,n)}else{this._data=this._data.subarray(0,s);let r=Object.keys(this._combined);for(let o=0;o<r.length;o++){let c=parseInt(r[o],10);c>=e&&delete this._combined[c]}let a=Object.keys(this._extendedAttrs);for(let o=0;o<a.length;o++){let c=parseInt(a[o],10);c>=e&&delete this._extendedAttrs[c]}}return this.length=e,s*4*Jb<this._data.buffer.byteLength}cleanupMemory(){if(this._data.length*4*Jb<this._data.buffer.byteLength){let e=new Uint32Array(this._data.length);return e.set(this._data),this._data=e,1}return 0}fill(e,n=!1){if(n){for(let s=0;s<this.length;++s)this.isProtected(s)||this.setCell(s,e);return}this._combined={},this._extendedAttrs={};for(let s=0;s<this.length;++s)this.setCell(s,e)}copyFrom(e){this.length!==e.length?this._data=new Uint32Array(e._data):this._data.set(e._data),this.length=e.length,this._combined={};for(let n in e._combined)this._combined[n]=e._combined[n];this._extendedAttrs={};for(let n in e._extendedAttrs)this._extendedAttrs[n]=e._extendedAttrs[n];this.isWrapped=e.isWrapped}clone(){let e=new OM(0);e._data=new Uint32Array(this._data),e.length=this.length;for(let n in this._combined)e._combined[n]=this._combined[n];for(let n in this._extendedAttrs)e._extendedAttrs[n]=this._extendedAttrs[n];return e.isWrapped=this.isWrapped,e}getTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(this._data[e*vt+0]&4194303)return e+(this._data[e*vt+0]>>22);return 0}getNoBgTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(this._data[e*vt+0]&4194303||this._data[e*vt+2]&50331648)return e+(this._data[e*vt+0]>>22);return 0}copyCellsFrom(e,n,s,r,a){let o=e._data;if(a)for(let h=r-1;h>=0;h--){for(let d=0;d<vt;d++)this._data[(s+h)*vt+d]=o[(n+h)*vt+d];o[(n+h)*vt+2]&268435456&&(this._extendedAttrs[s+h]=e._extendedAttrs[n+h])}else for(let h=0;h<r;h++){for(let d=0;d<vt;d++)this._data[(s+h)*vt+d]=o[(n+h)*vt+d];o[(n+h)*vt+2]&268435456&&(this._extendedAttrs[s+h]=e._extendedAttrs[n+h])}let c=Object.keys(e._combined);for(let h=0;h<c.length;h++){let d=parseInt(c[h],10);d>=n&&(this._combined[d-n+s]=e._combined[d])}}translateToString(e,n,s,r){n=n??0,s=s??this.length,e&&(s=Math.min(s,this.getTrimmedLength())),r&&(r.length=0);let a="";for(;n<s;){let o=this._data[n*vt+0],c=o&2097151,h=o&2097152?this._combined[n]:c?qa(c):Ja;if(a+=h,r)for(let d=0;d<h.length;++d)r.push(n);n+=o>>22||1}return r&&r.push(n),a}};function KQ(t,e,n,s,r,a){let o=[];for(let c=0;c<t.length-1;c++){let h=c,d=t.get(++h);if(!d.isWrapped)continue;let g=[t.get(c)];for(;h<t.length&&d.isWrapped;)g.push(d),d=t.get(++h);if(!a&&s>=c&&s<h){c+=g.length-1;continue}let m=0,v=rf(g,m,e),y=1,x=0;for(;y<g.length;){let S=rf(g,y,e),k=S-x,C=n-v,A=Math.min(k,C);g[m].copyCellsFrom(g[y],x,v,A,!1),v+=A,v===n&&(m++,v=0),x+=A,x===S&&(y++,x=0),v===0&&m!==0&&g[m-1].getWidth(n-1)===2&&(g[m].copyCellsFrom(g[m-1],n-1,v++,1,!1),g[m-1].setCell(n-1,r))}g[m].replaceCells(v,n,r);let w=0;for(let S=g.length-1;S>0&&(S>m||g[S].getTrimmedLength()===0);S--)w++;w>0&&(o.push(c+g.length-w),o.push(w)),c+=g.length-1}return o}function WQ(t,e){let n=[],s=0,r=e[s],a=0;for(let o=0;o<t.length;o++)if(r===o){let c=e[++s];t.onDeleteEmitter.fire({index:o-a,amount:c}),o+=c-1,a+=c,r=e[++s]}else n.push(o);return{layout:n,countRemoved:a}}function GQ(t,e){let n=[];for(let s=0;s<e.length;s++)n.push(t.get(e[s]));for(let s=0;s<n.length;s++)t.set(s,n[s]);t.length=e.length}function YQ(t,e,n){let s=[],r=t.map((h,d)=>rf(t,d,e)).reduce((h,d)=>h+d),a=0,o=0,c=0;for(;c<r;){if(r-c<n){s.push(r-c);break}a+=n;let h=rf(t,o,e);a>h&&(a-=h,o++);let d=t[o].getWidth(a-1)===2;d&&a--;let g=d?n-1:n;s.push(g),c+=g}return s}function rf(t,e,n){if(e===t.length-1)return t[e].getTrimmedLength();let s=!t[e].hasContent(n-1)&&t[e].getWidth(n-1)===1,r=t[e+1].getWidth(0)===2;return s&&r?n-1:n}var RM=class BM{constructor(e){this.line=e,this.isDisposed=!1,this._disposables=[],this._id=BM._nextId++,this._onDispose=this.register(new Ae),this.onDispose=this._onDispose.event}get id(){return this._id}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),ho(this._disposables),this._disposables.length=0)}register(e){return this._disposables.push(e),e}};RM._nextId=1;var XQ=RM,In={},Bl=In.B;In[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""};In.A={"#":""};In.B=void 0;In[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""};In.C=In[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};In.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};In.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};In.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};In.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""};In.E=In[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};In.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""};In.H=In[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};In["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""};var lj=4294967295,oj=class{constructor(t,e,n){this._hasScrollback=t,this._optionsService=e,this._bufferService=n,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=Cn.clone(),this.savedCharset=Bl,this.markers=[],this._nullCell=Br.fromCharData([0,XB,1,0]),this._whitespaceCell=Br.fromCharData([0,Ja,1,32]),this._isClearing=!1,this._memoryCleanupQueue=new rg,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new aj(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(t){return t?(this._nullCell.fg=t.fg,this._nullCell.bg=t.bg,this._nullCell.extended=t.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new eg),this._nullCell}getWhitespaceCell(t){return t?(this._whitespaceCell.fg=t.fg,this._whitespaceCell.bg=t.bg,this._whitespaceCell.extended=t.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new eg),this._whitespaceCell}getBlankLine(t,e){return new pd(this._bufferService.cols,this.getNullCell(t),e)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let t=this.ybase+this.y-this.ydisp;return t>=0&&t<this._rows}_getCorrectBufferLength(t){if(!this._hasScrollback)return t;let e=t+this._optionsService.rawOptions.scrollback;return e>lj?lj:e}fillViewportRows(t){if(this.lines.length===0){t===void 0&&(t=Cn);let e=this._rows;for(;e--;)this.lines.push(this.getBlankLine(t))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new aj(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(t,e){let n=this.getNullCell(Cn),s=0,r=this._getCorrectBufferLength(e);if(r>this.lines.maxLength&&(this.lines.maxLength=r),this.lines.length>0){if(this._cols<t)for(let o=0;o<this.lines.length;o++)s+=+this.lines.get(o).resize(t,n);let a=0;if(this._rows<e)for(let o=this._rows;o<e;o++)this.lines.length<e+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new pd(t,n)):this.ybase>0&&this.lines.length<=this.ybase+this.y+a+1?(this.ybase--,a++,this.ydisp>0&&this.ydisp--):this.lines.push(new pd(t,n)));else for(let o=this._rows;o>e;o--)this.lines.length>e+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(r<this.lines.maxLength){let o=this.lines.length-r;o>0&&(this.lines.trimStart(o),this.ybase=Math.max(this.ybase-o,0),this.ydisp=Math.max(this.ydisp-o,0),this.savedY=Math.max(this.savedY-o,0)),this.lines.maxLength=r}this.x=Math.min(this.x,t-1),this.y=Math.min(this.y,e-1),a&&(this.y+=a),this.savedX=Math.min(this.savedX,t-1),this.scrollTop=0}if(this.scrollBottom=e-1,this._isReflowEnabled&&(this._reflow(t,e),this._cols>t))for(let a=0;a<this.lines.length;a++)s+=+this.lines.get(a).resize(t,n);this._cols=t,this._rows=e,this._memoryCleanupQueue.clear(),s>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let t=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,t=!1);let e=0;for(;this._memoryCleanupPosition<this.lines.length;)if(e+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),e>100)return!0;return t}get _isReflowEnabled(){let t=this._optionsService.rawOptions.windowsPty;return t&&t.buildNumber?this._hasScrollback&&t.backend==="conpty"&&t.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(t,e){this._cols!==t&&(t>this._cols?this._reflowLarger(t,e):this._reflowSmaller(t,e))}_reflowLarger(t,e){let n=this._optionsService.rawOptions.reflowCursorLine,s=KQ(this.lines,this._cols,t,this.ybase+this.y,this.getNullCell(Cn),n);if(s.length>0){let r=WQ(this.lines,s);GQ(this.lines,r.layout),this._reflowLargerAdjustViewport(t,e,r.countRemoved)}}_reflowLargerAdjustViewport(t,e,n){let s=this.getNullCell(Cn),r=n;for(;r-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<e&&this.lines.push(new pd(t,s))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-n,0)}_reflowSmaller(t,e){let n=this._optionsService.rawOptions.reflowCursorLine,s=this.getNullCell(Cn),r=[],a=0;for(let o=this.lines.length-1;o>=0;o--){let c=this.lines.get(o);if(!c||!c.isWrapped&&c.getTrimmedLength()<=t)continue;let h=[c];for(;c.isWrapped&&o>0;)c=this.lines.get(--o),h.unshift(c);if(!n){let A=this.ybase+this.y;if(A>=o&&A<o+h.length)continue}let d=h[h.length-1].getTrimmedLength(),g=YQ(h,this._cols,t),m=g.length-h.length,v;this.ybase===0&&this.y!==this.lines.length-1?v=Math.max(0,this.y-this.lines.maxLength+m):v=Math.max(0,this.lines.length-this.lines.maxLength+m);let y=[];for(let A=0;A<m;A++){let B=this.getBlankLine(Cn,!0);y.push(B)}y.length>0&&(r.push({start:o+h.length+a,newLines:y}),a+=y.length),h.push(...y);let x=g.length-1,w=g[x];w===0&&(x--,w=g[x]);let S=h.length-m-1,k=d;for(;S>=0;){let A=Math.min(k,w);if(h[x]===void 0)break;if(h[x].copyCellsFrom(h[S],k-A,w-A,A,!0),w-=A,w===0&&(x--,w=g[x]),k-=A,k===0){S--;let B=Math.max(S,0);k=rf(h,B,this._cols)}}for(let A=0;A<h.length;A++)g[A]<t&&h[A].setCell(g[A],s);let C=m-v;for(;C-- >0;)this.ybase===0?this.y<e-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+a)-e&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+m,this.ybase+e-1)}if(r.length>0){let o=[],c=[];for(let w=0;w<this.lines.length;w++)c.push(this.lines.get(w));let h=this.lines.length,d=h-1,g=0,m=r[g];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+a);let v=0;for(let w=Math.min(this.lines.maxLength-1,h+a-1);w>=0;w--)if(m&&m.start>d+v){for(let S=m.newLines.length-1;S>=0;S--)this.lines.set(w--,m.newLines[S]);w++,o.push({index:d+1,amount:m.newLines.length}),v+=m.newLines.length,m=r[++g]}else this.lines.set(w,c[d--]);let y=0;for(let w=o.length-1;w>=0;w--)o[w].index+=y,this.lines.onInsertEmitter.fire(o[w]),y+=o[w].amount;let x=Math.max(0,h+a-this.lines.maxLength);x>0&&this.lines.onTrimEmitter.fire(x)}}translateBufferLineToString(t,e,n=0,s){let r=this.lines.get(t);return r?r.translateToString(e,n,s):""}getWrappedRangeForLine(t){let e=t,n=t;for(;e>0&&this.lines.get(e).isWrapped;)e--;for(;n+1<this.lines.length&&this.lines.get(n+1).isWrapped;)n++;return{first:e,last:n}}setupTabStops(t){for(t!=null?this.tabs[t]||(t=this.prevStop(t)):(this.tabs={},t=0);t<this._cols;t+=this._optionsService.rawOptions.tabStopWidth)this.tabs[t]=!0}prevStop(t){for(t==null&&(t=this.x);!this.tabs[--t]&&t>0;);return t>=this._cols?this._cols-1:t<0?0:t}nextStop(t){for(t==null&&(t=this.x);!this.tabs[++t]&&t<this._cols;);return t>=this._cols?this._cols-1:t<0?0:t}clearMarkers(t){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].line===t&&(this.markers[e].dispose(),this.markers.splice(e--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].dispose();this.markers.length=0,this._isClearing=!1}addMarker(t){let e=new XQ(t);return this.markers.push(e),e.register(this.lines.onTrim(n=>{e.line-=n,e.line<0&&e.dispose()})),e.register(this.lines.onInsert(n=>{e.line>=n.index&&(e.line+=n.amount)})),e.register(this.lines.onDelete(n=>{e.line>=n.index&&e.line<n.index+n.amount&&e.dispose(),e.line>n.index&&(e.line-=n.amount)})),e.register(e.onDispose(()=>this._removeMarker(e))),e}_removeMarker(t){this._isClearing||this.markers.splice(this.markers.indexOf(t),1)}},JQ=class extends bt{constructor(t,e){super(),this._optionsService=t,this._bufferService=e,this._onBufferActivate=this._register(new Ae),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this._register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this._register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new oj(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new oj(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(t){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(t),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(t,e){this._normal.resize(t,e),this._alt.resize(t,e),this.setupTabStops(t)}setupTabStops(t){this._normal.setupTabStops(t),this._alt.setupTabStops(t)}},MM=2,DM=1,$w=class extends bt{constructor(t){super(),this.isUserScrolling=!1,this._onResize=this._register(new Ae),this.onResize=this._onResize.event,this._onScroll=this._register(new Ae),this.onScroll=this._onScroll.event,this.cols=Math.max(t.rawOptions.cols||0,MM),this.rows=Math.max(t.rawOptions.rows||0,DM),this.buffers=this._register(new JQ(t,this)),this._register(this.buffers.onBufferActivate(e=>{this._onScroll.fire(e.activeBuffer.ydisp)}))}get buffer(){return this.buffers.active}resize(t,e){let n=this.cols!==t,s=this.rows!==e;this.cols=t,this.rows=e,this.buffers.resize(t,e),this._onResize.fire({cols:t,rows:e,colsChanged:n,rowsChanged:s})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(t,e=!1){let n=this.buffer,s;s=this._cachedBlankLine,(!s||s.length!==this.cols||s.getFg(0)!==t.fg||s.getBg(0)!==t.bg)&&(s=n.getBlankLine(t,e),this._cachedBlankLine=s),s.isWrapped=e;let r=n.ybase+n.scrollTop,a=n.ybase+n.scrollBottom;if(n.scrollTop===0){let o=n.lines.isFull;a===n.lines.length-1?o?n.lines.recycle().copyFrom(s):n.lines.push(s.clone()):n.lines.splice(a+1,0,s.clone()),o?this.isUserScrolling&&(n.ydisp=Math.max(n.ydisp-1,0)):(n.ybase++,this.isUserScrolling||n.ydisp++)}else{let o=a-r+1;n.lines.shiftElements(r+1,o-1,-1),n.lines.set(a,s.clone())}this.isUserScrolling||(n.ydisp=n.ybase),this._onScroll.fire(n.ydisp)}scrollLines(t,e){let n=this.buffer;if(t<0){if(n.ydisp===0)return;this.isUserScrolling=!0}else t+n.ydisp>=n.ybase&&(this.isUserScrolling=!1);let s=n.ydisp;n.ydisp=Math.max(Math.min(n.ydisp+t,n.ybase),0),s!==n.ydisp&&(e||this._onScroll.fire(n.ydisp))}};$w=hn([Le(0,Ns)],$w);var mc={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnEraseInDisplay:!1,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},reflowCursorLine:!1,rescaleOverlappingGlyphs:!1,rightClickSelectsWord:sg,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRuler:{}},QQ=["normal","bold","100","200","300","400","500","600","700","800","900"],ZQ=class extends bt{constructor(t){super(),this._onOptionChange=this._register(new Ae),this.onOptionChange=this._onOptionChange.event;let e={...mc};for(let n in t)if(n in e)try{let s=t[n];e[n]=this._sanitizeAndValidateOption(n,s)}catch(s){console.error(s)}this.rawOptions=e,this.options={...e},this._setupOptions(),this._register(nn(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(t,e){return this.onOptionChange(n=>{n===t&&e(this.rawOptions[t])})}onMultipleOptionChange(t,e){return this.onOptionChange(n=>{t.indexOf(n)!==-1&&e()})}_setupOptions(){let t=n=>{if(!(n in mc))throw new Error(`No option with key "${n}"`);return this.rawOptions[n]},e=(n,s)=>{if(!(n in mc))throw new Error(`No option with key "${n}"`);s=this._sanitizeAndValidateOption(n,s),this.rawOptions[n]!==s&&(this.rawOptions[n]=s,this._onOptionChange.fire(n))};for(let n in this.rawOptions){let s={get:t.bind(this,n),set:e.bind(this,n)};Object.defineProperty(this.options,n,s)}}_sanitizeAndValidateOption(t,e){switch(t){case"cursorStyle":if(e||(e=mc[t]),!eZ(e))throw new Error(`"${e}" is not a valid value for ${t}`);break;case"wordSeparator":e||(e=mc[t]);break;case"fontWeight":case"fontWeightBold":if(typeof e=="number"&&1<=e&&e<=1e3)break;e=QQ.includes(e)?e:mc[t];break;case"cursorWidth":e=Math.floor(e);case"lineHeight":case"tabStopWidth":if(e<1)throw new Error(`${t} cannot be less than 1, value: ${e}`);break;case"minimumContrastRatio":e=Math.max(1,Math.min(21,Math.round(e*10)/10));break;case"scrollback":if(e=Math.min(e,4294967295),e<0)throw new Error(`${t} cannot be less than 0, value: ${e}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(e<=0)throw new Error(`${t} cannot be less than or equal to 0, value: ${e}`);break;case"rows":case"cols":if(!e&&e!==0)throw new Error(`${t} must be numeric, value: ${e}`);break;case"windowsPty":e=e??{};break}return e}};function eZ(t){return t==="block"||t==="underline"||t==="bar"}function md(t,e=5){if(typeof t!="object")return t;let n=Array.isArray(t)?[]:{};for(let s in t)n[s]=e<=1?t[s]:t[s]&&md(t[s],e-1);return n}var cj=Object.freeze({insertMode:!1}),uj=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,cursorBlink:void 0,cursorStyle:void 0,origin:!1,reverseWraparound:!1,sendFocus:!1,synchronizedOutput:!1,wraparound:!0}),Hw=class extends bt{constructor(t,e,n){super(),this._bufferService=t,this._logService=e,this._optionsService=n,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this._register(new Ae),this.onData=this._onData.event,this._onUserInput=this._register(new Ae),this.onUserInput=this._onUserInput.event,this._onBinary=this._register(new Ae),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this._register(new Ae),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=md(cj),this.decPrivateModes=md(uj)}reset(){this.modes=md(cj),this.decPrivateModes=md(uj)}triggerDataEvent(t,e=!1){if(this._optionsService.rawOptions.disableStdin)return;let n=this._bufferService.buffer;e&&this._optionsService.rawOptions.scrollOnUserInput&&n.ybase!==n.ydisp&&this._onRequestScrollToBottom.fire(),e&&this._onUserInput.fire(),this._logService.debug(`sending data "${t}"`),this._logService.trace("sending data (codes)",()=>t.split("").map(s=>s.charCodeAt(0))),this._onData.fire(t)}triggerBinaryEvent(t){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${t}"`),this._logService.trace("sending binary (codes)",()=>t.split("").map(e=>e.charCodeAt(0))),this._onBinary.fire(t))}};Hw=hn([Le(0,Cs),Le(1,tM),Le(2,Ns)],Hw);var hj={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:t=>t.button===4||t.action!==1?!1:(t.ctrl=!1,t.alt=!1,t.shift=!1,!0)},VT200:{events:19,restrict:t=>t.action!==32},DRAG:{events:23,restrict:t=>!(t.action===32&&t.button===3)},ANY:{events:31,restrict:t=>!0}};function Qb(t,e){let n=(t.ctrl?16:0)|(t.shift?4:0)|(t.alt?8:0);return t.button===4?(n|=64,n|=t.action):(n|=t.button&3,t.button&4&&(n|=64),t.button&8&&(n|=128),t.action===32?n|=32:t.action===0&&!e&&(n|=3)),n}var Zb=String.fromCharCode,dj={DEFAULT:t=>{let e=[Qb(t,!1)+32,t.col+32,t.row+32];return e[0]>255||e[1]>255||e[2]>255?"":`\x1B[M${Zb(e[0])}${Zb(e[1])}${Zb(e[2])}`},SGR:t=>{let e=t.action===0&&t.button!==4?"m":"M";return`\x1B[<${Qb(t,!0)};${t.col};${t.row}${e}`},SGR_PIXELS:t=>{let e=t.action===0&&t.button!==4?"m":"M";return`\x1B[<${Qb(t,!0)};${t.x};${t.y}${e}`}},Uw=class extends bt{constructor(t,e,n){super(),this._bufferService=t,this._coreService=e,this._optionsService=n,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._wheelPartialScroll=0,this._onProtocolChange=this._register(new Ae),this.onProtocolChange=this._onProtocolChange.event;for(let s of Object.keys(hj))this.addProtocol(s,hj[s]);for(let s of Object.keys(dj))this.addEncoding(s,dj[s]);this.reset()}addProtocol(t,e){this._protocols[t]=e}addEncoding(t,e){this._encodings[t]=e}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(t){if(!this._protocols[t])throw new Error(`unknown protocol "${t}"`);this._activeProtocol=t,this._onProtocolChange.fire(this._protocols[t].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(t){if(!this._encodings[t])throw new Error(`unknown encoding "${t}"`);this._activeEncoding=t}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null,this._wheelPartialScroll=0}consumeWheelEvent(t,e,n){if(t.deltaY===0||t.shiftKey||e===void 0||n===void 0)return 0;let s=e/n,r=this._applyScrollModifier(t.deltaY,t);return t.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(r/=s+0,Math.abs(t.deltaY)<50&&(r*=.3),this._wheelPartialScroll+=r,r=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(r*=this._bufferService.rows),r}_applyScrollModifier(t,e){return e.altKey||e.ctrlKey||e.shiftKey?t*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:t*this._optionsService.rawOptions.scrollSensitivity}triggerMouseEvent(t){if(t.col<0||t.col>=this._bufferService.cols||t.row<0||t.row>=this._bufferService.rows||t.button===4&&t.action===32||t.button===3&&t.action!==32||t.button!==4&&(t.action===2||t.action===3)||(t.col++,t.row++,t.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,t,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(t))return!1;let e=this._encodings[this._activeEncoding](t);return e&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(e):this._coreService.triggerDataEvent(e,!0)),this._lastEvent=t,!0}explainEvents(t){return{down:!!(t&1),up:!!(t&2),drag:!!(t&4),move:!!(t&8),wheel:!!(t&16)}}_equalEvents(t,e,n){if(n){if(t.x!==e.x||t.y!==e.y)return!1}else if(t.col!==e.col||t.row!==e.row)return!1;return!(t.button!==e.button||t.action!==e.action||t.ctrl!==e.ctrl||t.alt!==e.alt||t.shift!==e.shift)}};Uw=hn([Le(0,Cs),Le(1,xo),Le(2,Ns)],Uw);var e_=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],tZ=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],Bn;function nZ(t,e){let n=0,s=e.length-1,r;if(t<e[0][0]||t>e[s][1])return!1;for(;s>=n;)if(r=n+s>>1,t>e[r][1])n=r+1;else if(t<e[r][0])s=r-1;else return!0;return!1}var sZ=class{constructor(){if(this.version="6",!Bn){Bn=new Uint8Array(65536),Bn.fill(1),Bn[0]=0,Bn.fill(0,1,32),Bn.fill(0,127,160),Bn.fill(2,4352,4448),Bn[9001]=2,Bn[9002]=2,Bn.fill(2,11904,42192),Bn[12351]=1,Bn.fill(2,44032,55204),Bn.fill(2,63744,64256),Bn.fill(2,65040,65050),Bn.fill(2,65072,65136),Bn.fill(2,65280,65377),Bn.fill(2,65504,65511);for(let t=0;t<e_.length;++t)Bn.fill(0,e_[t][0],e_[t][1]+1)}}wcwidth(t){return t<32?0:t<127?1:t<65536?Bn[t]:nZ(t,tZ)?0:t>=131072&&t<=196605||t>=196608&&t<=262141?2:1}charProperties(t,e){let n=this.wcwidth(t),s=n===0&&e!==0;if(s){let r=$l.extractWidth(e);r===0?s=!1:r>n&&(n=r)}return $l.createPropertyValue(0,n,s)}},$l=class Qm{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new Ae,this.onChange=this._onChange.event;let e=new sZ;this.register(e),this._active=e.version,this._activeProvider=e}static extractShouldJoin(e){return(e&1)!==0}static extractWidth(e){return e>>1&3}static extractCharKind(e){return e>>3}static createPropertyValue(e,n,s=!1){return(e&16777215)<<3|(n&3)<<1|(s?1:0)}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(e){if(!this._providers[e])throw new Error(`unknown Unicode version "${e}"`);this._active=e,this._activeProvider=this._providers[e],this._onChange.fire(e)}register(e){this._providers[e.version]=e}wcwidth(e){return this._activeProvider.wcwidth(e)}getStringCellWidth(e){let n=0,s=0,r=e.length;for(let a=0;a<r;++a){let o=e.charCodeAt(a);if(55296<=o&&o<=56319){if(++a>=r)return n+this.wcwidth(o);let d=e.charCodeAt(a);56320<=d&&d<=57343?o=(o-55296)*1024+d-56320+65536:n+=this.wcwidth(d)}let c=this.charProperties(o,s),h=Qm.extractWidth(c);Qm.extractShouldJoin(c)&&(h-=Qm.extractWidth(s)),n+=h,s=c}return n}charProperties(e,n){return this._activeProvider.charProperties(e,n)}},rZ=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(t){this.glevel=t,this.charset=this._charsets[t]}setgCharset(t,e){this._charsets[t]=e,this.glevel===t&&(this.charset=e)}};function fj(t){let e=t.buffer.lines.get(t.buffer.ybase+t.buffer.y-1)?.get(t.cols-1),n=t.buffer.lines.get(t.buffer.ybase+t.buffer.y);n&&e&&(n.isWrapped=e[3]!==0&&e[3]!==32)}var Bh=2147483647,iZ=256,LM=class Vw{constructor(e=32,n=32){if(this.maxLength=e,this.maxSubParamsLength=n,n>iZ)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(e),this.length=0,this._subParams=new Int32Array(n),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(e),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}static fromArray(e){let n=new Vw;if(!e.length)return n;for(let s=Array.isArray(e[0])?1:0;s<e.length;++s){let r=e[s];if(Array.isArray(r))for(let a=0;a<r.length;++a)n.addSubParam(r[a]);else n.addParam(r)}return n}clone(){let e=new Vw(this.maxLength,this.maxSubParamsLength);return e.params.set(this.params),e.length=this.length,e._subParams.set(this._subParams),e._subParamsLength=this._subParamsLength,e._subParamsIdx.set(this._subParamsIdx),e._rejectDigits=this._rejectDigits,e._rejectSubDigits=this._rejectSubDigits,e._digitIsSub=this._digitIsSub,e}toArray(){let e=[];for(let n=0;n<this.length;++n){e.push(this.params[n]);let s=this._subParamsIdx[n]>>8,r=this._subParamsIdx[n]&255;r-s>0&&e.push(Array.prototype.slice.call(this._subParams,s,r))}return e}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(e){if(this._digitIsSub=!1,this.length>=this.maxLength){this._rejectDigits=!0;return}if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=e>Bh?Bh:e}addSubParam(e){if(this._digitIsSub=!0,!!this.length){if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength){this._rejectSubDigits=!0;return}if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=e>Bh?Bh:e,this._subParamsIdx[this.length-1]++}}hasSubParams(e){return(this._subParamsIdx[e]&255)-(this._subParamsIdx[e]>>8)>0}getSubParams(e){let n=this._subParamsIdx[e]>>8,s=this._subParamsIdx[e]&255;return s-n>0?this._subParams.subarray(n,s):null}getSubParamsAll(){let e={};for(let n=0;n<this.length;++n){let s=this._subParamsIdx[n]>>8,r=this._subParamsIdx[n]&255;r-s>0&&(e[n]=this._subParams.slice(s,r))}return e}addDigit(e){let n;if(this._rejectDigits||!(n=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let s=this._digitIsSub?this._subParams:this.params,r=s[n-1];s[n-1]=~r?Math.min(r*10+e,Bh):e}},Mh=[],aZ=class{constructor(){this._state=0,this._active=Mh,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(t,e){this._handlers[t]===void 0&&(this._handlers[t]=[]);let n=this._handlers[t];return n.push(e),{dispose:()=>{let s=n.indexOf(e);s!==-1&&n.splice(s,1)}}}clearHandler(t){this._handlers[t]&&delete this._handlers[t]}setHandlerFallback(t){this._handlerFb=t}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=Mh}reset(){if(this._state===2)for(let t=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;t>=0;--t)this._active[t].end(!1);this._stack.paused=!1,this._active=Mh,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||Mh,!this._active.length)this._handlerFb(this._id,"START");else for(let t=this._active.length-1;t>=0;t--)this._active[t].start()}_put(t,e,n){if(!this._active.length)this._handlerFb(this._id,"PUT",Sy(t,e,n));else for(let s=this._active.length-1;s>=0;s--)this._active[s].put(t,e,n)}start(){this.reset(),this._state=1}put(t,e,n){if(this._state!==3){if(this._state===1)for(;e<n;){let s=t[e++];if(s===59){this._state=2,this._start();break}if(s<48||57<s){this._state=3;return}this._id===-1&&(this._id=0),this._id=this._id*10+s-48}this._state===2&&n-e>0&&this._put(t,e,n)}}end(t,e=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),!this._active.length)this._handlerFb(this._id,"END",t);else{let n=!1,s=this._active.length-1,r=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,n=e,r=this._stack.fallThrough,this._stack.paused=!1),!r&&n===!1){for(;s>=0&&(n=this._active[s].end(t),n!==!0);s--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,n;s--}for(;s>=0;s--)if(n=this._active[s].end(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,n}this._active=Mh,this._id=-1,this._state=0}}},tr=class{constructor(t){this._handler=t,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(t,e,n){this._hitLimit||(this._data+=Sy(t,e,n),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}end(t){let e=!1;if(this._hitLimit)e=!1;else if(t&&(e=this._handler(this._data),e instanceof Promise))return e.then(n=>(this._data="",this._hitLimit=!1,n));return this._data="",this._hitLimit=!1,e}},Dh=[],lZ=class{constructor(){this._handlers=Object.create(null),this._active=Dh,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=Dh}registerHandler(t,e){this._handlers[t]===void 0&&(this._handlers[t]=[]);let n=this._handlers[t];return n.push(e),{dispose:()=>{let s=n.indexOf(e);s!==-1&&n.splice(s,1)}}}clearHandler(t){this._handlers[t]&&delete this._handlers[t]}setHandlerFallback(t){this._handlerFb=t}reset(){if(this._active.length)for(let t=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;t>=0;--t)this._active[t].unhook(!1);this._stack.paused=!1,this._active=Dh,this._ident=0}hook(t,e){if(this.reset(),this._ident=t,this._active=this._handlers[t]||Dh,!this._active.length)this._handlerFb(this._ident,"HOOK",e);else for(let n=this._active.length-1;n>=0;n--)this._active[n].hook(e)}put(t,e,n){if(!this._active.length)this._handlerFb(this._ident,"PUT",Sy(t,e,n));else for(let s=this._active.length-1;s>=0;s--)this._active[s].put(t,e,n)}unhook(t,e=!0){if(!this._active.length)this._handlerFb(this._ident,"UNHOOK",t);else{let n=!1,s=this._active.length-1,r=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,n=e,r=this._stack.fallThrough,this._stack.paused=!1),!r&&n===!1){for(;s>=0&&(n=this._active[s].unhook(t),n!==!0);s--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,n;s--}for(;s>=0;s--)if(n=this._active[s].unhook(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,n}this._active=Dh,this._ident=0}},gd=new LM;gd.addParam(0);var pj=class{constructor(t){this._handler=t,this._data="",this._params=gd,this._hitLimit=!1}hook(t){this._params=t.length>1||t.params[0]?t.clone():gd,this._data="",this._hitLimit=!1}put(t,e,n){this._hitLimit||(this._data+=Sy(t,e,n),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}unhook(t){let e=!1;if(this._hitLimit)e=!1;else if(t&&(e=this._handler(this._data,this._params),e instanceof Promise))return e.then(n=>(this._params=gd,this._data="",this._hitLimit=!1,n));return this._params=gd,this._data="",this._hitLimit=!1,e}},oZ=class{constructor(t){this.table=new Uint8Array(t)}setDefault(t,e){this.table.fill(t<<4|e)}add(t,e,n,s){this.table[e<<8|t]=n<<4|s}addMany(t,e,n,s){for(let r=0;r<t.length;r++)this.table[e<<8|t[r]]=n<<4|s}},Er=160,cZ=(function(){let t=new oZ(4095),e=Array.apply(null,Array(256)).map((c,h)=>h),n=(c,h)=>e.slice(c,h),s=n(32,127),r=n(0,24);r.push(25),r.push.apply(r,n(28,32));let a=n(0,14),o;t.setDefault(1,0),t.addMany(s,0,2,0);for(o in a)t.addMany([24,26,153,154],o,3,0),t.addMany(n(128,144),o,3,0),t.addMany(n(144,152),o,3,0),t.add(156,o,0,0),t.add(27,o,11,1),t.add(157,o,4,8),t.addMany([152,158,159],o,0,7),t.add(155,o,11,3),t.add(144,o,11,9);return t.addMany(r,0,3,0),t.addMany(r,1,3,1),t.add(127,1,0,1),t.addMany(r,8,0,8),t.addMany(r,3,3,3),t.add(127,3,0,3),t.addMany(r,4,3,4),t.add(127,4,0,4),t.addMany(r,6,3,6),t.addMany(r,5,3,5),t.add(127,5,0,5),t.addMany(r,2,3,2),t.add(127,2,0,2),t.add(93,1,4,8),t.addMany(s,8,5,8),t.add(127,8,5,8),t.addMany([156,27,24,26,7],8,6,0),t.addMany(n(28,32),8,0,8),t.addMany([88,94,95],1,0,7),t.addMany(s,7,0,7),t.addMany(r,7,0,7),t.add(156,7,0,0),t.add(127,7,0,7),t.add(91,1,11,3),t.addMany(n(64,127),3,7,0),t.addMany(n(48,60),3,8,4),t.addMany([60,61,62,63],3,9,4),t.addMany(n(48,60),4,8,4),t.addMany(n(64,127),4,7,0),t.addMany([60,61,62,63],4,0,6),t.addMany(n(32,64),6,0,6),t.add(127,6,0,6),t.addMany(n(64,127),6,0,0),t.addMany(n(32,48),3,9,5),t.addMany(n(32,48),5,9,5),t.addMany(n(48,64),5,0,6),t.addMany(n(64,127),5,7,0),t.addMany(n(32,48),4,9,5),t.addMany(n(32,48),1,9,2),t.addMany(n(32,48),2,9,2),t.addMany(n(48,127),2,10,0),t.addMany(n(48,80),1,10,0),t.addMany(n(81,88),1,10,0),t.addMany([89,90,92],1,10,0),t.addMany(n(96,127),1,10,0),t.add(80,1,11,9),t.addMany(r,9,0,9),t.add(127,9,0,9),t.addMany(n(28,32),9,0,9),t.addMany(n(32,48),9,9,12),t.addMany(n(48,60),9,8,10),t.addMany([60,61,62,63],9,9,10),t.addMany(r,11,0,11),t.addMany(n(32,128),11,0,11),t.addMany(n(28,32),11,0,11),t.addMany(r,10,0,10),t.add(127,10,0,10),t.addMany(n(28,32),10,0,10),t.addMany(n(48,60),10,8,10),t.addMany([60,61,62,63],10,0,11),t.addMany(n(32,48),10,9,12),t.addMany(r,12,0,12),t.add(127,12,0,12),t.addMany(n(28,32),12,0,12),t.addMany(n(32,48),12,9,12),t.addMany(n(48,64),12,0,11),t.addMany(n(64,127),12,12,13),t.addMany(n(64,127),10,12,13),t.addMany(n(64,127),9,12,13),t.addMany(r,13,13,13),t.addMany(s,13,13,13),t.add(127,13,0,13),t.addMany([27,156,24,26],13,14,0),t.add(Er,0,2,0),t.add(Er,8,5,8),t.add(Er,6,0,6),t.add(Er,11,0,11),t.add(Er,13,13,13),t})(),uZ=class extends bt{constructor(t=cZ){super(),this._transitions=t,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new LM,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(e,n,s)=>{},this._executeHandlerFb=e=>{},this._csiHandlerFb=(e,n)=>{},this._escHandlerFb=e=>{},this._errorHandlerFb=e=>e,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this._register(nn(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this._register(new aZ),this._dcsParser=this._register(new lZ),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(t,e=[64,126]){let n=0;if(t.prefix){if(t.prefix.length>1)throw new Error("only one byte as prefix supported");if(n=t.prefix.charCodeAt(0),n&&60>n||n>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(t.intermediates){if(t.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let r=0;r<t.intermediates.length;++r){let a=t.intermediates.charCodeAt(r);if(32>a||a>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");n<<=8,n|=a}}if(t.final.length!==1)throw new Error("final must be a single byte");let s=t.final.charCodeAt(0);if(e[0]>s||s>e[1])throw new Error(`final must be in range ${e[0]} .. ${e[1]}`);return n<<=8,n|=s,n}identToString(t){let e=[];for(;t;)e.push(String.fromCharCode(t&255)),t>>=8;return e.reverse().join("")}setPrintHandler(t){this._printHandler=t}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(t,e){let n=this._identifier(t,[48,126]);this._escHandlers[n]===void 0&&(this._escHandlers[n]=[]);let s=this._escHandlers[n];return s.push(e),{dispose:()=>{let r=s.indexOf(e);r!==-1&&s.splice(r,1)}}}clearEscHandler(t){this._escHandlers[this._identifier(t,[48,126])]&&delete this._escHandlers[this._identifier(t,[48,126])]}setEscHandlerFallback(t){this._escHandlerFb=t}setExecuteHandler(t,e){this._executeHandlers[t.charCodeAt(0)]=e}clearExecuteHandler(t){this._executeHandlers[t.charCodeAt(0)]&&delete this._executeHandlers[t.charCodeAt(0)]}setExecuteHandlerFallback(t){this._executeHandlerFb=t}registerCsiHandler(t,e){let n=this._identifier(t);this._csiHandlers[n]===void 0&&(this._csiHandlers[n]=[]);let s=this._csiHandlers[n];return s.push(e),{dispose:()=>{let r=s.indexOf(e);r!==-1&&s.splice(r,1)}}}clearCsiHandler(t){this._csiHandlers[this._identifier(t)]&&delete this._csiHandlers[this._identifier(t)]}setCsiHandlerFallback(t){this._csiHandlerFb=t}registerDcsHandler(t,e){return this._dcsParser.registerHandler(this._identifier(t),e)}clearDcsHandler(t){this._dcsParser.clearHandler(this._identifier(t))}setDcsHandlerFallback(t){this._dcsParser.setHandlerFallback(t)}registerOscHandler(t,e){return this._oscParser.registerHandler(t,e)}clearOscHandler(t){this._oscParser.clearHandler(t)}setOscHandlerFallback(t){this._oscParser.setHandlerFallback(t)}setErrorHandler(t){this._errorHandler=t}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(t,e,n,s,r){this._parseStack.state=t,this._parseStack.handlers=e,this._parseStack.handlerPos=n,this._parseStack.transition=s,this._parseStack.chunkPos=r}parse(t,e,n){let s=0,r=0,a=0,o;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,a=this._parseStack.chunkPos+1;else{if(n===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let c=this._parseStack.handlers,h=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(n===!1&&h>-1){for(;h>=0&&(o=c[h](this._params),o!==!0);h--)if(o instanceof Promise)return this._parseStack.handlerPos=h,o}this._parseStack.handlers=[];break;case 4:if(n===!1&&h>-1){for(;h>=0&&(o=c[h](),o!==!0);h--)if(o instanceof Promise)return this._parseStack.handlerPos=h,o}this._parseStack.handlers=[];break;case 6:if(s=t[this._parseStack.chunkPos],o=this._dcsParser.unhook(s!==24&&s!==26,n),o)return o;s===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(s=t[this._parseStack.chunkPos],o=this._oscParser.end(s!==24&&s!==26,n),o)return o;s===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break}this._parseStack.state=0,a=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=this._parseStack.transition&15}for(let c=a;c<e;++c){switch(s=t[c],r=this._transitions.table[this.currentState<<8|(s<160?s:Er)],r>>4){case 2:for(let v=c+1;;++v){if(v>=e||(s=t[v])<32||s>126&&s<Er){this._printHandler(t,c,v),c=v-1;break}if(++v>=e||(s=t[v])<32||s>126&&s<Er){this._printHandler(t,c,v),c=v-1;break}if(++v>=e||(s=t[v])<32||s>126&&s<Er){this._printHandler(t,c,v),c=v-1;break}if(++v>=e||(s=t[v])<32||s>126&&s<Er){this._printHandler(t,c,v),c=v-1;break}}break;case 3:this._executeHandlers[s]?this._executeHandlers[s]():this._executeHandlerFb(s),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:c,code:s,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let h=this._csiHandlers[this._collect<<8|s],d=h?h.length-1:-1;for(;d>=0&&(o=h[d](this._params),o!==!0);d--)if(o instanceof Promise)return this._preserveStack(3,h,d,r,c),o;d<0&&this._csiHandlerFb(this._collect<<8|s,this._params),this.precedingJoinState=0;break;case 8:do switch(s){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(s-48)}while(++c<e&&(s=t[c])>47&&s<60);c--;break;case 9:this._collect<<=8,this._collect|=s;break;case 10:let g=this._escHandlers[this._collect<<8|s],m=g?g.length-1:-1;for(;m>=0&&(o=g[m](),o!==!0);m--)if(o instanceof Promise)return this._preserveStack(4,g,m,r,c),o;m<0&&this._escHandlerFb(this._collect<<8|s),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|s,this._params);break;case 13:for(let v=c+1;;++v)if(v>=e||(s=t[v])===24||s===26||s===27||s>127&&s<Er){this._dcsParser.put(t,c,v),c=v-1;break}break;case 14:if(o=this._dcsParser.unhook(s!==24&&s!==26),o)return this._preserveStack(6,[],0,r,c),o;s===27&&(r|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let v=c+1;;v++)if(v>=e||(s=t[v])<32||s>127&&s<Er){this._oscParser.put(t,c,v),c=v-1;break}break;case 6:if(o=this._oscParser.end(s!==24&&s!==26),o)return this._preserveStack(5,[],0,r,c),o;s===27&&(r|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break}this.currentState=r&15}}},hZ=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,dZ=/^[\da-f]+$/;function mj(t){if(!t)return;let e=t.toLowerCase();if(e.indexOf("rgb:")===0){e=e.slice(4);let n=hZ.exec(e);if(n){let s=n[1]?15:n[4]?255:n[7]?4095:65535;return[Math.round(parseInt(n[1]||n[4]||n[7]||n[10],16)/s*255),Math.round(parseInt(n[2]||n[5]||n[8]||n[11],16)/s*255),Math.round(parseInt(n[3]||n[6]||n[9]||n[12],16)/s*255)]}}else if(e.indexOf("#")===0&&(e=e.slice(1),dZ.exec(e)&&[3,6,9,12].includes(e.length))){let n=e.length/3,s=[0,0,0];for(let r=0;r<3;++r){let a=parseInt(e.slice(n*r,n*r+n),16);s[r]=n===1?a<<4:n===2?a:n===3?a>>4:a>>8}return s}}function t_(t,e){let n=t.toString(16),s=n.length<2?"0"+n:n;switch(e){case 4:return n[0];case 8:return s;case 12:return(s+s).slice(0,3);default:return s+s}}function fZ(t,e=16){let[n,s,r]=t;return`rgb:${t_(n,e)}/${t_(s,e)}/${t_(r,e)}`}var pZ={"(":0,")":1,"*":2,"+":3,"-":1,".":2},Va=131072,gj=10;function yj(t,e){if(t>24)return e.setWinLines||!1;switch(t){case 1:return!!e.restoreWin;case 2:return!!e.minimizeWin;case 3:return!!e.setWinPosition;case 4:return!!e.setWinSizePixels;case 5:return!!e.raiseWin;case 6:return!!e.lowerWin;case 7:return!!e.refreshWin;case 8:return!!e.setWinSizeChars;case 9:return!!e.maximizeWin;case 10:return!!e.fullscreenWin;case 11:return!!e.getWinState;case 13:return!!e.getWinPosition;case 14:return!!e.getWinSizePixels;case 15:return!!e.getScreenSizePixels;case 16:return!!e.getCellSizePixels;case 18:return!!e.getWinSizeChars;case 19:return!!e.getScreenSizeChars;case 20:return!!e.getIconTitle;case 21:return!!e.getWinTitle;case 22:return!!e.pushTitle;case 23:return!!e.popTitle;case 24:return!!e.setWinLines}return!1}var vj=5e3,bj=0,mZ=class extends bt{constructor(t,e,n,s,r,a,o,c,h=new uZ){super(),this._bufferService=t,this._charsetService=e,this._coreService=n,this._logService=s,this._optionsService=r,this._oscLinkService=a,this._coreMouseService=o,this._unicodeService=c,this._parser=h,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new MX,this._utf8Decoder=new DX,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=Cn.clone(),this._eraseAttrDataInternal=Cn.clone(),this._onRequestBell=this._register(new Ae),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this._register(new Ae),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this._register(new Ae),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this._register(new Ae),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this._register(new Ae),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this._register(new Ae),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this._register(new Ae),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this._register(new Ae),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this._register(new Ae),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this._register(new Ae),this.onLineFeed=this._onLineFeed.event,this._onScroll=this._register(new Ae),this.onScroll=this._onScroll.event,this._onTitleChange=this._register(new Ae),this.onTitleChange=this._onTitleChange.event,this._onColor=this._register(new Ae),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this._register(this._parser),this._dirtyRowTracker=new Fw(this._bufferService),this._activeBuffer=this._bufferService.buffer,this._register(this._bufferService.buffers.onBufferActivate(d=>this._activeBuffer=d.activeBuffer)),this._parser.setCsiHandlerFallback((d,g)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(d),params:g.toArray()})}),this._parser.setEscHandlerFallback(d=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(d)})}),this._parser.setExecuteHandlerFallback(d=>{this._logService.debug("Unknown EXECUTE code: ",{code:d})}),this._parser.setOscHandlerFallback((d,g,m)=>{this._logService.debug("Unknown OSC code: ",{identifier:d,action:g,data:m})}),this._parser.setDcsHandlerFallback((d,g,m)=>{g==="HOOK"&&(m=m.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(d),action:g,payload:m})}),this._parser.setPrintHandler((d,g,m)=>this.print(d,g,m)),this._parser.registerCsiHandler({final:"@"},d=>this.insertChars(d)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},d=>this.scrollLeft(d)),this._parser.registerCsiHandler({final:"A"},d=>this.cursorUp(d)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},d=>this.scrollRight(d)),this._parser.registerCsiHandler({final:"B"},d=>this.cursorDown(d)),this._parser.registerCsiHandler({final:"C"},d=>this.cursorForward(d)),this._parser.registerCsiHandler({final:"D"},d=>this.cursorBackward(d)),this._parser.registerCsiHandler({final:"E"},d=>this.cursorNextLine(d)),this._parser.registerCsiHandler({final:"F"},d=>this.cursorPrecedingLine(d)),this._parser.registerCsiHandler({final:"G"},d=>this.cursorCharAbsolute(d)),this._parser.registerCsiHandler({final:"H"},d=>this.cursorPosition(d)),this._parser.registerCsiHandler({final:"I"},d=>this.cursorForwardTab(d)),this._parser.registerCsiHandler({final:"J"},d=>this.eraseInDisplay(d,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},d=>this.eraseInDisplay(d,!0)),this._parser.registerCsiHandler({final:"K"},d=>this.eraseInLine(d,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},d=>this.eraseInLine(d,!0)),this._parser.registerCsiHandler({final:"L"},d=>this.insertLines(d)),this._parser.registerCsiHandler({final:"M"},d=>this.deleteLines(d)),this._parser.registerCsiHandler({final:"P"},d=>this.deleteChars(d)),this._parser.registerCsiHandler({final:"S"},d=>this.scrollUp(d)),this._parser.registerCsiHandler({final:"T"},d=>this.scrollDown(d)),this._parser.registerCsiHandler({final:"X"},d=>this.eraseChars(d)),this._parser.registerCsiHandler({final:"Z"},d=>this.cursorBackwardTab(d)),this._parser.registerCsiHandler({final:"`"},d=>this.charPosAbsolute(d)),this._parser.registerCsiHandler({final:"a"},d=>this.hPositionRelative(d)),this._parser.registerCsiHandler({final:"b"},d=>this.repeatPrecedingCharacter(d)),this._parser.registerCsiHandler({final:"c"},d=>this.sendDeviceAttributesPrimary(d)),this._parser.registerCsiHandler({prefix:">",final:"c"},d=>this.sendDeviceAttributesSecondary(d)),this._parser.registerCsiHandler({final:"d"},d=>this.linePosAbsolute(d)),this._parser.registerCsiHandler({final:"e"},d=>this.vPositionRelative(d)),this._parser.registerCsiHandler({final:"f"},d=>this.hVPosition(d)),this._parser.registerCsiHandler({final:"g"},d=>this.tabClear(d)),this._parser.registerCsiHandler({final:"h"},d=>this.setMode(d)),this._parser.registerCsiHandler({prefix:"?",final:"h"},d=>this.setModePrivate(d)),this._parser.registerCsiHandler({final:"l"},d=>this.resetMode(d)),this._parser.registerCsiHandler({prefix:"?",final:"l"},d=>this.resetModePrivate(d)),this._parser.registerCsiHandler({final:"m"},d=>this.charAttributes(d)),this._parser.registerCsiHandler({final:"n"},d=>this.deviceStatus(d)),this._parser.registerCsiHandler({prefix:"?",final:"n"},d=>this.deviceStatusPrivate(d)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},d=>this.softReset(d)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},d=>this.setCursorStyle(d)),this._parser.registerCsiHandler({final:"r"},d=>this.setScrollRegion(d)),this._parser.registerCsiHandler({final:"s"},d=>this.saveCursor(d)),this._parser.registerCsiHandler({final:"t"},d=>this.windowOptions(d)),this._parser.registerCsiHandler({final:"u"},d=>this.restoreCursor(d)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},d=>this.insertColumns(d)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},d=>this.deleteColumns(d)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},d=>this.selectProtected(d)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},d=>this.requestMode(d,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},d=>this.requestMode(d,!1)),this._parser.setExecuteHandler(ve.BEL,()=>this.bell()),this._parser.setExecuteHandler(ve.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(ve.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(ve.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(ve.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(ve.BS,()=>this.backspace()),this._parser.setExecuteHandler(ve.HT,()=>this.tab()),this._parser.setExecuteHandler(ve.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(ve.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(Xm.IND,()=>this.index()),this._parser.setExecuteHandler(Xm.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(Xm.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new tr(d=>(this.setTitle(d),this.setIconName(d),!0))),this._parser.registerOscHandler(1,new tr(d=>this.setIconName(d))),this._parser.registerOscHandler(2,new tr(d=>this.setTitle(d))),this._parser.registerOscHandler(4,new tr(d=>this.setOrReportIndexedColor(d))),this._parser.registerOscHandler(8,new tr(d=>this.setHyperlink(d))),this._parser.registerOscHandler(10,new tr(d=>this.setOrReportFgColor(d))),this._parser.registerOscHandler(11,new tr(d=>this.setOrReportBgColor(d))),this._parser.registerOscHandler(12,new tr(d=>this.setOrReportCursorColor(d))),this._parser.registerOscHandler(104,new tr(d=>this.restoreIndexedColor(d))),this._parser.registerOscHandler(110,new tr(d=>this.restoreFgColor(d))),this._parser.registerOscHandler(111,new tr(d=>this.restoreBgColor(d))),this._parser.registerOscHandler(112,new tr(d=>this.restoreCursorColor(d))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let d in In)this._parser.registerEscHandler({intermediates:"(",final:d},()=>this.selectCharset("("+d)),this._parser.registerEscHandler({intermediates:")",final:d},()=>this.selectCharset(")"+d)),this._parser.registerEscHandler({intermediates:"*",final:d},()=>this.selectCharset("*"+d)),this._parser.registerEscHandler({intermediates:"+",final:d},()=>this.selectCharset("+"+d)),this._parser.registerEscHandler({intermediates:"-",final:d},()=>this.selectCharset("-"+d)),this._parser.registerEscHandler({intermediates:".",final:d},()=>this.selectCharset("."+d)),this._parser.registerEscHandler({intermediates:"/",final:d},()=>this.selectCharset("/"+d));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(d=>(this._logService.error("Parsing error: ",d),d)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new pj((d,g)=>this.requestStatusString(d,g)))}getAttrData(){return this._curAttrData}_preserveStack(t,e,n,s){this._parseStack.paused=!0,this._parseStack.cursorStartX=t,this._parseStack.cursorStartY=e,this._parseStack.decodedLength=n,this._parseStack.position=s}_logSlowResolvingAsync(t){this._logService.logLevel<=3&&Promise.race([t,new Promise((e,n)=>setTimeout(()=>n("#SLOW_TIMEOUT"),vj))]).catch(e=>{if(e!=="#SLOW_TIMEOUT")throw e;console.warn(`async parser handler taking longer than ${vj} ms`)})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(t,e){let n,s=this._activeBuffer.x,r=this._activeBuffer.y,a=0,o=this._parseStack.paused;if(o){if(n=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,e))return this._logSlowResolvingAsync(n),n;s=this._parseStack.cursorStartX,r=this._parseStack.cursorStartY,this._parseStack.paused=!1,t.length>Va&&(a=this._parseStack.position+Va)}if(this._logService.logLevel<=1&&this._logService.debug(`parsing data ${typeof t=="string"?` "${t}"`:` "${Array.prototype.map.call(t,d=>String.fromCharCode(d)).join("")}"`}`),this._logService.logLevel===0&&this._logService.trace("parsing data (codes)",typeof t=="string"?t.split("").map(d=>d.charCodeAt(0)):t),this._parseBuffer.length<t.length&&this._parseBuffer.length<Va&&(this._parseBuffer=new Uint32Array(Math.min(t.length,Va))),o||this._dirtyRowTracker.clearRange(),t.length>Va)for(let d=a;d<t.length;d+=Va){let g=d+Va<t.length?d+Va:t.length,m=typeof t=="string"?this._stringDecoder.decode(t.substring(d,g),this._parseBuffer):this._utf8Decoder.decode(t.subarray(d,g),this._parseBuffer);if(n=this._parser.parse(this._parseBuffer,m))return this._preserveStack(s,r,m,d),this._logSlowResolvingAsync(n),n}else if(!o){let d=typeof t=="string"?this._stringDecoder.decode(t,this._parseBuffer):this._utf8Decoder.decode(t,this._parseBuffer);if(n=this._parser.parse(this._parseBuffer,d))return this._preserveStack(s,r,d,0),this._logSlowResolvingAsync(n),n}(this._activeBuffer.x!==s||this._activeBuffer.y!==r)&&this._onCursorMove.fire();let c=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),h=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);h<this._bufferService.rows&&this._onRequestRefreshRows.fire({start:Math.min(h,this._bufferService.rows-1),end:Math.min(c,this._bufferService.rows-1)})}print(t,e,n){let s,r,a=this._charsetService.charset,o=this._optionsService.rawOptions.screenReaderMode,c=this._bufferService.cols,h=this._coreService.decPrivateModes.wraparound,d=this._coreService.modes.insertMode,g=this._curAttrData,m=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&n-e>0&&m.getWidth(this._activeBuffer.x-1)===2&&m.setCellFromCodepoint(this._activeBuffer.x-1,0,1,g);let v=this._parser.precedingJoinState;for(let y=e;y<n;++y){if(s=t[y],s<127&&a){let k=a[String.fromCharCode(s)];k&&(s=k.charCodeAt(0))}let x=this._unicodeService.charProperties(s,v);r=$l.extractWidth(x);let w=$l.extractShouldJoin(x),S=w?$l.extractWidth(v):0;if(v=x,o&&this._onA11yChar.fire(qa(s)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+r-S>c){if(h){let k=m,C=this._activeBuffer.x-S;for(this._activeBuffer.x=S,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),m=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),S>0&&m instanceof pd&&m.copyCellsFrom(k,C,0,S,!1);C<c;)k.setCellFromCodepoint(C++,0,1,g)}else if(this._activeBuffer.x=c-1,r===2)continue}if(w&&this._activeBuffer.x){let k=m.getWidth(this._activeBuffer.x-1)?1:2;m.addCodepointToCell(this._activeBuffer.x-k,s,r);for(let C=r-S;--C>=0;)m.setCellFromCodepoint(this._activeBuffer.x++,0,0,g);continue}if(d&&(m.insertCells(this._activeBuffer.x,r-S,this._activeBuffer.getNullCell(g)),m.getWidth(c-1)===2&&m.setCellFromCodepoint(c-1,0,1,g)),m.setCellFromCodepoint(this._activeBuffer.x++,s,r,g),r>0)for(;--r;)m.setCellFromCodepoint(this._activeBuffer.x++,0,0,g)}this._parser.precedingJoinState=v,this._activeBuffer.x<c&&n-e>0&&m.getWidth(this._activeBuffer.x)===0&&!m.hasContent(this._activeBuffer.x)&&m.setCellFromCodepoint(this._activeBuffer.x,0,1,g),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(t,e){return t.final==="t"&&!t.prefix&&!t.intermediates?this._parser.registerCsiHandler(t,n=>yj(n.params[0],this._optionsService.rawOptions.windowOptions)?e(n):!0):this._parser.registerCsiHandler(t,e)}registerDcsHandler(t,e){return this._parser.registerDcsHandler(t,new pj(e))}registerEscHandler(t,e){return this._parser.registerEscHandler(t,e)}registerOscHandler(t,e){return this._parser.registerOscHandler(t,new tr(e))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);t.hasWidth(this._activeBuffer.x)&&!t.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-t),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(t=this._bufferService.cols-1){this._activeBuffer.x=Math.min(t,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(t,e){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=t,this._activeBuffer.y=this._activeBuffer.scrollTop+e):(this._activeBuffer.x=t,this._activeBuffer.y=e),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(t,e){this._restrictCursor(),this._setCursor(this._activeBuffer.x+t,this._activeBuffer.y+e)}cursorUp(t){let e=this._activeBuffer.y-this._activeBuffer.scrollTop;return e>=0?this._moveCursor(0,-Math.min(e,t.params[0]||1)):this._moveCursor(0,-(t.params[0]||1)),!0}cursorDown(t){let e=this._activeBuffer.scrollBottom-this._activeBuffer.y;return e>=0?this._moveCursor(0,Math.min(e,t.params[0]||1)):this._moveCursor(0,t.params[0]||1),!0}cursorForward(t){return this._moveCursor(t.params[0]||1,0),!0}cursorBackward(t){return this._moveCursor(-(t.params[0]||1),0),!0}cursorNextLine(t){return this.cursorDown(t),this._activeBuffer.x=0,!0}cursorPrecedingLine(t){return this.cursorUp(t),this._activeBuffer.x=0,!0}cursorCharAbsolute(t){return this._setCursor((t.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(t){return this._setCursor(t.length>=2?(t.params[1]||1)-1:0,(t.params[0]||1)-1),!0}charPosAbsolute(t){return this._setCursor((t.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(t){return this._moveCursor(t.params[0]||1,0),!0}linePosAbsolute(t){return this._setCursor(this._activeBuffer.x,(t.params[0]||1)-1),!0}vPositionRelative(t){return this._moveCursor(0,t.params[0]||1),!0}hVPosition(t){return this.cursorPosition(t),!0}tabClear(t){let e=t.params[0];return e===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:e===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(t){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let e=t.params[0]||1;for(;e--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(t){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let e=t.params[0]||1;for(;e--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(t){let e=t.params[0];return e===1&&(this._curAttrData.bg|=536870912),(e===2||e===0)&&(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(t,e,n,s=!1,r=!1){let a=this._activeBuffer.lines.get(this._activeBuffer.ybase+t);a.replaceCells(e,n,this._activeBuffer.getNullCell(this._eraseAttrData()),r),s&&(a.isWrapped=!1)}_resetBufferLine(t,e=!1){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+t);n&&(n.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),e),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+t),n.isWrapped=!1)}eraseInDisplay(t,e=!1){this._restrictCursor(this._bufferService.cols);let n;switch(t.params[0]){case 0:for(n=this._activeBuffer.y,this._dirtyRowTracker.markDirty(n),this._eraseInBufferLine(n++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,e);n<this._bufferService.rows;n++)this._resetBufferLine(n,e);this._dirtyRowTracker.markDirty(n);break;case 1:for(n=this._activeBuffer.y,this._dirtyRowTracker.markDirty(n),this._eraseInBufferLine(n,0,this._activeBuffer.x+1,!0,e),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(n+1).isWrapped=!1);n--;)this._resetBufferLine(n,e);this._dirtyRowTracker.markDirty(0);break;case 2:if(this._optionsService.rawOptions.scrollOnEraseInDisplay){for(n=this._bufferService.rows,this._dirtyRowTracker.markRangeDirty(0,n-1);n--&&!this._activeBuffer.lines.get(this._activeBuffer.ybase+n)?.getTrimmedLength(););for(;n>=0;n--)this._bufferService.scroll(this._eraseAttrData())}else{for(n=this._bufferService.rows,this._dirtyRowTracker.markDirty(n-1);n--;)this._resetBufferLine(n,e);this._dirtyRowTracker.markDirty(0)}break;case 3:let s=this._activeBuffer.lines.length-this._bufferService.rows;s>0&&(this._activeBuffer.lines.trimStart(s),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-s,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-s,0),this._onScroll.fire(0));break}return!0}eraseInLine(t,e=!1){switch(this._restrictCursor(this._bufferService.cols),t.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,e);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,e);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,e);break}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(t){this._restrictCursor();let e=t.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let n=this._activeBuffer.ybase+this._activeBuffer.y,s=this._bufferService.rows-1-this._activeBuffer.scrollBottom,r=this._bufferService.rows-1+this._activeBuffer.ybase-s+1;for(;e--;)this._activeBuffer.lines.splice(r-1,1),this._activeBuffer.lines.splice(n,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(t){this._restrictCursor();let e=t.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let n=this._activeBuffer.ybase+this._activeBuffer.y,s;for(s=this._bufferService.rows-1-this._activeBuffer.scrollBottom,s=this._bufferService.rows-1+this._activeBuffer.ybase-s;e--;)this._activeBuffer.lines.splice(n,1),this._activeBuffer.lines.splice(s,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(t){this._restrictCursor();let e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return e&&(e.insertCells(this._activeBuffer.x,t.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(t){this._restrictCursor();let e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return e&&(e.deleteCells(this._activeBuffer.x,t.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(t){let e=t.params[0]||1;for(;e--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(t){let e=t.params[0]||1;for(;e--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(Cn));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(t){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let e=t.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);s.deleteCells(0,e,this._activeBuffer.getNullCell(this._eraseAttrData())),s.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(t){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let e=t.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);s.insertCells(0,e,this._activeBuffer.getNullCell(this._eraseAttrData())),s.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(t){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let e=t.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);s.insertCells(this._activeBuffer.x,e,this._activeBuffer.getNullCell(this._eraseAttrData())),s.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(t){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let e=t.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);s.deleteCells(this._activeBuffer.x,e,this._activeBuffer.getNullCell(this._eraseAttrData())),s.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(t){this._restrictCursor();let e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return e&&(e.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(t.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(t){let e=this._parser.precedingJoinState;if(!e)return!0;let n=t.params[0]||1,s=$l.extractWidth(e),r=this._activeBuffer.x-s,a=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(r),o=new Uint32Array(a.length*n),c=0;for(let d=0;d<a.length;){let g=a.codePointAt(d)||0;o[c++]=g,d+=g>65535?2:1}let h=c;for(let d=1;d<n;++d)o.copyWithin(h,0,c),h+=c;return this.print(o,0,h),!0}sendDeviceAttributesPrimary(t){return t.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(ve.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(ve.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(t){return t.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(ve.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(ve.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(t.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(ve.ESC+"[>83;40003;0c")),!0}_is(t){return(this._optionsService.rawOptions.termName+"").indexOf(t)===0}setMode(t){for(let e=0;e<t.length;e++)switch(t.params[e]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0;break}return!0}setModePrivate(t){for(let e=0;e<t.length;e++)switch(t.params[e]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,Bl),this._charsetService.setgCharset(1,Bl),this._charsetService.setgCharset(2,Bl),this._charsetService.setgCharset(3,Bl);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!0;break}return!0}resetMode(t){for(let e=0;e<t.length;e++)switch(t.params[e]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1;break}return!0}resetModePrivate(t){for(let e=0;e<t.length;e++)switch(t.params[e]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),t.params[e]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!1,this._onRequestRefreshRows.fire(void 0);break}return!0}requestMode(t,e){let n;(w=>(w[w.NOT_RECOGNIZED=0]="NOT_RECOGNIZED",w[w.SET=1]="SET",w[w.RESET=2]="RESET",w[w.PERMANENTLY_SET=3]="PERMANENTLY_SET",w[w.PERMANENTLY_RESET=4]="PERMANENTLY_RESET"))(n||={});let s=this._coreService.decPrivateModes,{activeProtocol:r,activeEncoding:a}=this._coreMouseService,o=this._coreService,{buffers:c,cols:h}=this._bufferService,{active:d,alt:g}=c,m=this._optionsService.rawOptions,v=(w,S)=>(o.triggerDataEvent(`${ve.ESC}[${e?"":"?"}${w};${S}$y`),!0),y=w=>w?1:2,x=t.params[0];return e?x===2?v(x,4):x===4?v(x,y(o.modes.insertMode)):x===12?v(x,3):x===20?v(x,y(m.convertEol)):v(x,0):x===1?v(x,y(s.applicationCursorKeys)):x===3?v(x,m.windowOptions.setWinLines?h===80?2:h===132?1:0:0):x===6?v(x,y(s.origin)):x===7?v(x,y(s.wraparound)):x===8?v(x,3):x===9?v(x,y(r==="X10")):x===12?v(x,y(m.cursorBlink)):x===25?v(x,y(!o.isCursorHidden)):x===45?v(x,y(s.reverseWraparound)):x===66?v(x,y(s.applicationKeypad)):x===67?v(x,4):x===1e3?v(x,y(r==="VT200")):x===1002?v(x,y(r==="DRAG")):x===1003?v(x,y(r==="ANY")):x===1004?v(x,y(s.sendFocus)):x===1005?v(x,4):x===1006?v(x,y(a==="SGR")):x===1015?v(x,4):x===1016?v(x,y(a==="SGR_PIXELS")):x===1048?v(x,1):x===47||x===1047||x===1049?v(x,y(d===g)):x===2004?v(x,y(s.bracketedPasteMode)):x===2026?v(x,y(s.synchronizedOutput)):v(x,0)}_updateAttrColor(t,e,n,s,r){return e===2?(t|=50331648,t&=-16777216,t|=Bf.fromColorRGB([n,s,r])):e===5&&(t&=-50331904,t|=33554432|n&255),t}_extractColor(t,e,n){let s=[0,0,-1,0,0,0],r=0,a=0;do{if(s[a+r]=t.params[e+a],t.hasSubParams(e+a)){let o=t.getSubParams(e+a),c=0;do s[1]===5&&(r=1),s[a+c+1+r]=o[c];while(++c<o.length&&c+a+1+r<s.length);break}if(s[1]===5&&a+r>=2||s[1]===2&&a+r>=5)break;s[1]&&(r=1)}while(++a+e<t.length&&a+r<s.length);for(let o=2;o<s.length;++o)s[o]===-1&&(s[o]=0);switch(s[0]){case 38:n.fg=this._updateAttrColor(n.fg,s[1],s[3],s[4],s[5]);break;case 48:n.bg=this._updateAttrColor(n.bg,s[1],s[3],s[4],s[5]);break;case 58:n.extended=n.extended.clone(),n.extended.underlineColor=this._updateAttrColor(n.extended.underlineColor,s[1],s[3],s[4],s[5])}return a}_processUnderline(t,e){e.extended=e.extended.clone(),(!~t||t>5)&&(t=1),e.extended.underlineStyle=t,e.fg|=268435456,t===0&&(e.fg&=-268435457),e.updateExtended()}_processSGR0(t){t.fg=Cn.fg,t.bg=Cn.bg,t.extended=t.extended.clone(),t.extended.underlineStyle=0,t.extended.underlineColor&=-67108864,t.updateExtended()}charAttributes(t){if(t.length===1&&t.params[0]===0)return this._processSGR0(this._curAttrData),!0;let e=t.length,n,s=this._curAttrData;for(let r=0;r<e;r++)n=t.params[r],n>=30&&n<=37?(s.fg&=-50331904,s.fg|=16777216|n-30):n>=40&&n<=47?(s.bg&=-50331904,s.bg|=16777216|n-40):n>=90&&n<=97?(s.fg&=-50331904,s.fg|=16777216|n-90|8):n>=100&&n<=107?(s.bg&=-50331904,s.bg|=16777216|n-100|8):n===0?this._processSGR0(s):n===1?s.fg|=134217728:n===3?s.bg|=67108864:n===4?(s.fg|=268435456,this._processUnderline(t.hasSubParams(r)?t.getSubParams(r)[0]:1,s)):n===5?s.fg|=536870912:n===7?s.fg|=67108864:n===8?s.fg|=1073741824:n===9?s.fg|=2147483648:n===2?s.bg|=134217728:n===21?this._processUnderline(2,s):n===22?(s.fg&=-134217729,s.bg&=-134217729):n===23?s.bg&=-67108865:n===24?(s.fg&=-268435457,this._processUnderline(0,s)):n===25?s.fg&=-536870913:n===27?s.fg&=-67108865:n===28?s.fg&=-1073741825:n===29?s.fg&=2147483647:n===39?(s.fg&=-67108864,s.fg|=Cn.fg&16777215):n===49?(s.bg&=-67108864,s.bg|=Cn.bg&16777215):n===38||n===48||n===58?r+=this._extractColor(t,r,s):n===53?s.bg|=1073741824:n===55?s.bg&=-1073741825:n===59?(s.extended=s.extended.clone(),s.extended.underlineColor=-1,s.updateExtended()):n===100?(s.fg&=-67108864,s.fg|=Cn.fg&16777215,s.bg&=-67108864,s.bg|=Cn.bg&16777215):this._logService.debug("Unknown SGR attribute: %d.",n);return!0}deviceStatus(t){switch(t.params[0]){case 5:this._coreService.triggerDataEvent(`${ve.ESC}[0n`);break;case 6:let e=this._activeBuffer.y+1,n=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${ve.ESC}[${e};${n}R`);break}return!0}deviceStatusPrivate(t){if(t.params[0]===6){let e=this._activeBuffer.y+1,n=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${ve.ESC}[?${e};${n}R`)}return!0}softReset(t){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=Cn.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(t){let e=t.length===0?1:t.params[0];if(e===0)this._coreService.decPrivateModes.cursorStyle=void 0,this._coreService.decPrivateModes.cursorBlink=void 0;else{switch(e){case 1:case 2:this._coreService.decPrivateModes.cursorStyle="block";break;case 3:case 4:this._coreService.decPrivateModes.cursorStyle="underline";break;case 5:case 6:this._coreService.decPrivateModes.cursorStyle="bar";break}let n=e%2===1;this._coreService.decPrivateModes.cursorBlink=n}return!0}setScrollRegion(t){let e=t.params[0]||1,n;return(t.length<2||(n=t.params[1])>this._bufferService.rows||n===0)&&(n=this._bufferService.rows),n>e&&(this._activeBuffer.scrollTop=e-1,this._activeBuffer.scrollBottom=n-1,this._setCursor(0,0)),!0}windowOptions(t){if(!yj(t.params[0],this._optionsService.rawOptions.windowOptions))return!0;let e=t.length>1?t.params[1]:0;switch(t.params[0]){case 14:e!==2&&this._onRequestWindowsOptionsReport.fire(0);break;case 16:this._onRequestWindowsOptionsReport.fire(1);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${ve.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:(e===0||e===2)&&(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>gj&&this._windowTitleStack.shift()),(e===0||e===1)&&(this._iconNameStack.push(this._iconName),this._iconNameStack.length>gj&&this._iconNameStack.shift());break;case 23:(e===0||e===2)&&this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),(e===0||e===1)&&this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop());break}return!0}saveCursor(t){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(t){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(t){return this._windowTitle=t,this._onTitleChange.fire(t),!0}setIconName(t){return this._iconName=t,!0}setOrReportIndexedColor(t){let e=[],n=t.split(";");for(;n.length>1;){let s=n.shift(),r=n.shift();if(/^\d+$/.exec(s)){let a=parseInt(s);if(_j(a))if(r==="?")e.push({type:0,index:a});else{let o=mj(r);o&&e.push({type:1,index:a,color:o})}}}return e.length&&this._onColor.fire(e),!0}setHyperlink(t){let e=t.indexOf(";");if(e===-1)return!0;let n=t.slice(0,e).trim(),s=t.slice(e+1);return s?this._createHyperlink(n,s):n.trim()?!1:this._finishHyperlink()}_createHyperlink(t,e){this._getCurrentLinkId()&&this._finishHyperlink();let n=t.split(":"),s,r=n.findIndex(a=>a.startsWith("id="));return r!==-1&&(s=n[r].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:s,uri:e}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(t,e){let n=t.split(";");for(let s=0;s<n.length&&!(e>=this._specialColors.length);++s,++e)if(n[s]==="?")this._onColor.fire([{type:0,index:this._specialColors[e]}]);else{let r=mj(n[s]);r&&this._onColor.fire([{type:1,index:this._specialColors[e],color:r}])}return!0}setOrReportFgColor(t){return this._setOrReportSpecialColor(t,0)}setOrReportBgColor(t){return this._setOrReportSpecialColor(t,1)}setOrReportCursorColor(t){return this._setOrReportSpecialColor(t,2)}restoreIndexedColor(t){if(!t)return this._onColor.fire([{type:2}]),!0;let e=[],n=t.split(";");for(let s=0;s<n.length;++s)if(/^\d+$/.exec(n[s])){let r=parseInt(n[s]);_j(r)&&e.push({type:2,index:r})}return e.length&&this._onColor.fire(e),!0}restoreFgColor(t){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(t){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(t){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,Bl),!0}selectCharset(t){return t.length!==2?(this.selectDefaultCharset(),!0):(t[0]==="/"||this._charsetService.setgCharset(pZ[t[0]],In[t[1]]||Bl),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let t=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,t,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=Cn.clone(),this._eraseAttrDataInternal=Cn.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=this._curAttrData.bg&67108863,this._eraseAttrDataInternal}setgLevel(t){return this._charsetService.setgLevel(t),!0}screenAlignmentPattern(){let t=new Br;t.content=1<<22|69,t.fg=this._curAttrData.fg,t.bg=this._curAttrData.bg,this._setCursor(0,0);for(let e=0;e<this._bufferService.rows;++e){let n=this._activeBuffer.ybase+this._activeBuffer.y+e,s=this._activeBuffer.lines.get(n);s&&(s.fill(t),s.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(t,e){let n=o=>(this._coreService.triggerDataEvent(`${ve.ESC}${o}${ve.ESC}\\`),!0),s=this._bufferService.buffer,r=this._optionsService.rawOptions;return n(t==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:t==='"p'?'P1$r61;1"p':t==="r"?`P1$r${s.scrollTop+1};${s.scrollBottom+1}r`:t==="m"?"P1$r0m":t===" q"?`P1$r${{block:2,underline:4,bar:6}[r.cursorStyle]-(r.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(t,e){this._dirtyRowTracker.markRangeDirty(t,e)}},Fw=class{constructor(t){this._bufferService=t,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(t){t<this.start?this.start=t:t>this.end&&(this.end=t)}markRangeDirty(t,e){t>e&&(bj=t,t=e,e=bj),t<this.start&&(this.start=t),e>this.end&&(this.end=e)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};Fw=hn([Le(0,Cs)],Fw);function _j(t){return 0<=t&&t<256}var gZ=5e7,xj=12,yZ=50,vZ=class extends bt{constructor(t){super(),this._action=t,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this._register(new Ae),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(t,e){if(e!==void 0&&this._syncCalls>e){this._syncCalls=0;return}if(this._pendingData+=t.length,this._writeBuffer.push(t),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;this._isSyncWriting=!0;let n;for(;n=this._writeBuffer.shift();){this._action(n);let s=this._callbacks.shift();s&&s()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(t,e){if(this._pendingData>gZ)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput){this._didUserInput=!1,this._pendingData+=t.length,this._writeBuffer.push(t),this._callbacks.push(e),this._innerWrite();return}setTimeout(()=>this._innerWrite())}this._pendingData+=t.length,this._writeBuffer.push(t),this._callbacks.push(e)}_innerWrite(t=0,e=!0){let n=t||performance.now();for(;this._writeBuffer.length>this._bufferOffset;){let s=this._writeBuffer[this._bufferOffset],r=this._action(s,e);if(r){let o=c=>performance.now()-n>=xj?setTimeout(()=>this._innerWrite(0,c)):this._innerWrite(n,c);r.catch(c=>(queueMicrotask(()=>{throw c}),Promise.resolve(!1))).then(o);return}let a=this._callbacks[this._bufferOffset];if(a&&a(),this._bufferOffset++,this._pendingData-=s.length,performance.now()-n>=xj)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>yZ&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}},qw=class{constructor(t){this._bufferService=t,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(t){let e=this._bufferService.buffer;if(t.id===void 0){let c=e.addMarker(e.ybase+e.y),h={data:t,id:this._nextId++,lines:[c]};return c.onDispose(()=>this._removeMarkerFromLink(h,c)),this._dataByLinkId.set(h.id,h),h.id}let n=t,s=this._getEntryIdKey(n),r=this._entriesWithId.get(s);if(r)return this.addLineToLink(r.id,e.ybase+e.y),r.id;let a=e.addMarker(e.ybase+e.y),o={id:this._nextId++,key:this._getEntryIdKey(n),data:n,lines:[a]};return a.onDispose(()=>this._removeMarkerFromLink(o,a)),this._entriesWithId.set(o.key,o),this._dataByLinkId.set(o.id,o),o.id}addLineToLink(t,e){let n=this._dataByLinkId.get(t);if(n&&n.lines.every(s=>s.line!==e)){let s=this._bufferService.buffer.addMarker(e);n.lines.push(s),s.onDispose(()=>this._removeMarkerFromLink(n,s))}}getLinkData(t){return this._dataByLinkId.get(t)?.data}_getEntryIdKey(t){return`${t.id};;${t.uri}`}_removeMarkerFromLink(t,e){let n=t.lines.indexOf(e);n!==-1&&(t.lines.splice(n,1),t.lines.length===0&&(t.data.id!==void 0&&this._entriesWithId.delete(t.key),this._dataByLinkId.delete(t.id)))}};qw=hn([Le(0,Cs)],qw);var wj=!1,bZ=class extends bt{constructor(t){super(),this._windowsWrappingHeuristics=this._register(new nu),this._onBinary=this._register(new Ae),this.onBinary=this._onBinary.event,this._onData=this._register(new Ae),this.onData=this._onData.event,this._onLineFeed=this._register(new Ae),this.onLineFeed=this._onLineFeed.event,this._onResize=this._register(new Ae),this.onResize=this._onResize.event,this._onWriteParsed=this._register(new Ae),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this._register(new Ae),this._instantiationService=new VQ,this.optionsService=this._register(new ZQ(t)),this._instantiationService.setService(Ns,this.optionsService),this._bufferService=this._register(this._instantiationService.createInstance($w)),this._instantiationService.setService(Cs,this._bufferService),this._logService=this._register(this._instantiationService.createInstance(zw)),this._instantiationService.setService(tM,this._logService),this.coreService=this._register(this._instantiationService.createInstance(Hw)),this._instantiationService.setService(xo,this.coreService),this.coreMouseService=this._register(this._instantiationService.createInstance(Uw)),this._instantiationService.setService(eM,this.coreMouseService),this.unicodeService=this._register(this._instantiationService.createInstance($l)),this._instantiationService.setService(zX,this.unicodeService),this._charsetService=this._instantiationService.createInstance(rZ),this._instantiationService.setService(PX,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(qw),this._instantiationService.setService(nM,this._oscLinkService),this._inputHandler=this._register(new mZ(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this._register(ns.forward(this._inputHandler.onLineFeed,this._onLineFeed)),this._register(this._inputHandler),this._register(ns.forward(this._bufferService.onResize,this._onResize)),this._register(ns.forward(this.coreService.onData,this._onData)),this._register(ns.forward(this.coreService.onBinary,this._onBinary)),this._register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom(!0))),this._register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this._register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this._register(this._bufferService.onScroll(()=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this._register(new vZ((e,n)=>this._inputHandler.parse(e,n))),this._register(ns.forward(this._writeBuffer.onWriteParsed,this._onWriteParsed))}get onScroll(){return this._onScrollApi||(this._onScrollApi=this._register(new Ae),this._onScroll.event(t=>{this._onScrollApi?.fire(t.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(t){for(let e in t)this.optionsService.options[e]=t[e]}write(t,e){this._writeBuffer.write(t,e)}writeSync(t,e){this._logService.logLevel<=3&&!wj&&(this._logService.warn("writeSync is unreliable and will be removed soon."),wj=!0),this._writeBuffer.writeSync(t,e)}input(t,e=!0){this.coreService.triggerDataEvent(t,e)}resize(t,e){isNaN(t)||isNaN(e)||(t=Math.max(t,MM),e=Math.max(e,DM),this._bufferService.resize(t,e))}scroll(t,e=!1){this._bufferService.scroll(t,e)}scrollLines(t,e){this._bufferService.scrollLines(t,e)}scrollPages(t){this.scrollLines(t*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(t){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(t){let e=t-this._bufferService.buffer.ydisp;e!==0&&this.scrollLines(e)}registerEscHandler(t,e){return this._inputHandler.registerEscHandler(t,e)}registerDcsHandler(t,e){return this._inputHandler.registerDcsHandler(t,e)}registerCsiHandler(t,e){return this._inputHandler.registerCsiHandler(t,e)}registerOscHandler(t,e){return this._inputHandler.registerOscHandler(t,e)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let t=!1,e=this.optionsService.rawOptions.windowsPty;e&&e.buildNumber!==void 0&&e.buildNumber!==void 0?t=e.backend==="conpty"&&e.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(t=!0),t?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let t=[];t.push(this.onLineFeed(fj.bind(null,this._bufferService))),t.push(this.registerCsiHandler({final:"H"},()=>(fj(this._bufferService),!1))),this._windowsWrappingHeuristics.value=nn(()=>{for(let e of t)e.dispose()})}}},_Z={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};function xZ(t,e,n,s){let r={type:0,cancel:!1,key:void 0},a=(t.shiftKey?1:0)|(t.altKey?2:0)|(t.ctrlKey?4:0)|(t.metaKey?8:0);switch(t.keyCode){case 0:t.key==="UIKeyInputUpArrow"?e?r.key=ve.ESC+"OA":r.key=ve.ESC+"[A":t.key==="UIKeyInputLeftArrow"?e?r.key=ve.ESC+"OD":r.key=ve.ESC+"[D":t.key==="UIKeyInputRightArrow"?e?r.key=ve.ESC+"OC":r.key=ve.ESC+"[C":t.key==="UIKeyInputDownArrow"&&(e?r.key=ve.ESC+"OB":r.key=ve.ESC+"[B");break;case 8:r.key=t.ctrlKey?"\b":ve.DEL,t.altKey&&(r.key=ve.ESC+r.key);break;case 9:if(t.shiftKey){r.key=ve.ESC+"[Z";break}r.key=ve.HT,r.cancel=!0;break;case 13:r.key=t.altKey?ve.ESC+ve.CR:ve.CR,r.cancel=!0;break;case 27:r.key=ve.ESC,t.altKey&&(r.key=ve.ESC+ve.ESC),r.cancel=!0;break;case 37:if(t.metaKey)break;a?r.key=ve.ESC+"[1;"+(a+1)+"D":e?r.key=ve.ESC+"OD":r.key=ve.ESC+"[D";break;case 39:if(t.metaKey)break;a?r.key=ve.ESC+"[1;"+(a+1)+"C":e?r.key=ve.ESC+"OC":r.key=ve.ESC+"[C";break;case 38:if(t.metaKey)break;a?r.key=ve.ESC+"[1;"+(a+1)+"A":e?r.key=ve.ESC+"OA":r.key=ve.ESC+"[A";break;case 40:if(t.metaKey)break;a?r.key=ve.ESC+"[1;"+(a+1)+"B":e?r.key=ve.ESC+"OB":r.key=ve.ESC+"[B";break;case 45:!t.shiftKey&&!t.ctrlKey&&(r.key=ve.ESC+"[2~");break;case 46:a?r.key=ve.ESC+"[3;"+(a+1)+"~":r.key=ve.ESC+"[3~";break;case 36:a?r.key=ve.ESC+"[1;"+(a+1)+"H":e?r.key=ve.ESC+"OH":r.key=ve.ESC+"[H";break;case 35:a?r.key=ve.ESC+"[1;"+(a+1)+"F":e?r.key=ve.ESC+"OF":r.key=ve.ESC+"[F";break;case 33:t.shiftKey?r.type=2:t.ctrlKey?r.key=ve.ESC+"[5;"+(a+1)+"~":r.key=ve.ESC+"[5~";break;case 34:t.shiftKey?r.type=3:t.ctrlKey?r.key=ve.ESC+"[6;"+(a+1)+"~":r.key=ve.ESC+"[6~";break;case 112:a?r.key=ve.ESC+"[1;"+(a+1)+"P":r.key=ve.ESC+"OP";break;case 113:a?r.key=ve.ESC+"[1;"+(a+1)+"Q":r.key=ve.ESC+"OQ";break;case 114:a?r.key=ve.ESC+"[1;"+(a+1)+"R":r.key=ve.ESC+"OR";break;case 115:a?r.key=ve.ESC+"[1;"+(a+1)+"S":r.key=ve.ESC+"OS";break;case 116:a?r.key=ve.ESC+"[15;"+(a+1)+"~":r.key=ve.ESC+"[15~";break;case 117:a?r.key=ve.ESC+"[17;"+(a+1)+"~":r.key=ve.ESC+"[17~";break;case 118:a?r.key=ve.ESC+"[18;"+(a+1)+"~":r.key=ve.ESC+"[18~";break;case 119:a?r.key=ve.ESC+"[19;"+(a+1)+"~":r.key=ve.ESC+"[19~";break;case 120:a?r.key=ve.ESC+"[20;"+(a+1)+"~":r.key=ve.ESC+"[20~";break;case 121:a?r.key=ve.ESC+"[21;"+(a+1)+"~":r.key=ve.ESC+"[21~";break;case 122:a?r.key=ve.ESC+"[23;"+(a+1)+"~":r.key=ve.ESC+"[23~";break;case 123:a?r.key=ve.ESC+"[24;"+(a+1)+"~":r.key=ve.ESC+"[24~";break;default:if(t.ctrlKey&&!t.shiftKey&&!t.altKey&&!t.metaKey)t.keyCode>=65&&t.keyCode<=90?r.key=String.fromCharCode(t.keyCode-64):t.keyCode===32?r.key=ve.NUL:t.keyCode>=51&&t.keyCode<=55?r.key=String.fromCharCode(t.keyCode-51+27):t.keyCode===56?r.key=ve.DEL:t.keyCode===219?r.key=ve.ESC:t.keyCode===220?r.key=ve.FS:t.keyCode===221&&(r.key=ve.GS);else if((!n||s)&&t.altKey&&!t.metaKey){let o=_Z[t.keyCode]?.[t.shiftKey?1:0];if(o)r.key=ve.ESC+o;else if(t.keyCode>=65&&t.keyCode<=90){let c=t.ctrlKey?t.keyCode-64:t.keyCode+32,h=String.fromCharCode(c);t.shiftKey&&(h=h.toUpperCase()),r.key=ve.ESC+h}else if(t.keyCode===32)r.key=ve.ESC+(t.ctrlKey?ve.NUL:" ");else if(t.key==="Dead"&&t.code.startsWith("Key")){let c=t.code.slice(3,4);t.shiftKey||(c=c.toLowerCase()),r.key=ve.ESC+c,r.cancel=!0}}else n&&!t.altKey&&!t.ctrlKey&&!t.shiftKey&&t.metaKey?t.keyCode===65&&(r.type=1):t.key&&!t.ctrlKey&&!t.altKey&&!t.metaKey&&t.keyCode>=48&&t.key.length===1?r.key=t.key:t.key&&t.ctrlKey&&(t.key==="_"&&(r.key=ve.US),t.key==="@"&&(r.key=ve.NUL));break}return r}var pn=0,wZ=class{constructor(t){this._getKey=t,this._array=[],this._insertedValues=[],this._flushInsertedTask=new rg,this._isFlushingInserted=!1,this._deletedIndices=[],this._flushDeletedTask=new rg,this._isFlushingDeleted=!1}clear(){this._array.length=0,this._insertedValues.length=0,this._flushInsertedTask.clear(),this._isFlushingInserted=!1,this._deletedIndices.length=0,this._flushDeletedTask.clear(),this._isFlushingDeleted=!1}insert(t){this._flushCleanupDeleted(),this._insertedValues.length===0&&this._flushInsertedTask.enqueue(()=>this._flushInserted()),this._insertedValues.push(t)}_flushInserted(){let t=this._insertedValues.sort((r,a)=>this._getKey(r)-this._getKey(a)),e=0,n=0,s=new Array(this._array.length+this._insertedValues.length);for(let r=0;r<s.length;r++)n>=this._array.length||this._getKey(t[e])<=this._getKey(this._array[n])?(s[r]=t[e],e++):s[r]=this._array[n++];this._array=s,this._insertedValues.length=0}_flushCleanupInserted(){!this._isFlushingInserted&&this._insertedValues.length>0&&this._flushInsertedTask.flush()}delete(t){if(this._flushCleanupInserted(),this._array.length===0)return!1;let e=this._getKey(t);if(e===void 0||(pn=this._search(e),pn===-1)||this._getKey(this._array[pn])!==e)return!1;do if(this._array[pn]===t)return this._deletedIndices.length===0&&this._flushDeletedTask.enqueue(()=>this._flushDeleted()),this._deletedIndices.push(pn),!0;while(++pn<this._array.length&&this._getKey(this._array[pn])===e);return!1}_flushDeleted(){this._isFlushingDeleted=!0;let t=this._deletedIndices.sort((r,a)=>r-a),e=0,n=new Array(this._array.length-t.length),s=0;for(let r=0;r<this._array.length;r++)t[e]===r?e++:n[s++]=this._array[r];this._array=n,this._deletedIndices.length=0,this._isFlushingDeleted=!1}_flushCleanupDeleted(){!this._isFlushingDeleted&&this._deletedIndices.length>0&&this._flushDeletedTask.flush()}*getKeyIterator(t){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(pn=this._search(t),!(pn<0||pn>=this._array.length)&&this._getKey(this._array[pn])===t))do yield this._array[pn];while(++pn<this._array.length&&this._getKey(this._array[pn])===t)}forEachByKey(t,e){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(pn=this._search(t),!(pn<0||pn>=this._array.length)&&this._getKey(this._array[pn])===t))do e(this._array[pn]);while(++pn<this._array.length&&this._getKey(this._array[pn])===t)}values(){return this._flushCleanupInserted(),this._flushCleanupDeleted(),[...this._array].values()}_search(t){let e=0,n=this._array.length-1;for(;n>=e;){let s=e+n>>1,r=this._getKey(this._array[s]);if(r>t)n=s-1;else if(r<t)e=s+1;else{for(;s>0&&this._getKey(this._array[s-1])===t;)s--;return s}}return e}},n_=0,Sj=0,SZ=class extends bt{constructor(){super(),this._decorations=new wZ(t=>t?.marker.line),this._onDecorationRegistered=this._register(new Ae),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this._register(new Ae),this.onDecorationRemoved=this._onDecorationRemoved.event,this._register(nn(()=>this.reset()))}get decorations(){return this._decorations.values()}registerDecoration(t){if(t.marker.isDisposed)return;let e=new kZ(t);if(e){let n=e.marker.onDispose(()=>e.dispose()),s=e.onDispose(()=>{s.dispose(),e&&(this._decorations.delete(e)&&this._onDecorationRemoved.fire(e),n.dispose())});this._decorations.insert(e),this._onDecorationRegistered.fire(e)}return e}reset(){for(let t of this._decorations.values())t.dispose();this._decorations.clear()}*getDecorationsAtCell(t,e,n){let s=0,r=0;for(let a of this._decorations.getKeyIterator(e))s=a.options.x??0,r=s+(a.options.width??1),t>=s&&t<r&&(!n||(a.options.layer??"bottom")===n)&&(yield a)}forEachDecorationAtCell(t,e,n,s){this._decorations.forEachByKey(e,r=>{n_=r.options.x??0,Sj=n_+(r.options.width??1),t>=n_&&t<Sj&&(!n||(r.options.layer??"bottom")===n)&&s(r)})}},kZ=class extends tl{constructor(t){super(),this.options=t,this.onRenderEmitter=this.add(new Ae),this.onRender=this.onRenderEmitter.event,this._onDispose=this.add(new Ae),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=t.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=ln.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=ln.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}dispose(){this._onDispose.fire(),super.dispose()}},CZ=1e3,NZ=class{constructor(t,e=CZ){this._renderCallback=t,this._debounceThresholdMS=e,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(t,e,n){this._rowCount=n,t=t!==void 0?t:0,e=e!==void 0?e:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,t):t,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,e):e;let s=performance.now();if(s-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=s,this._innerRefresh();else if(!this._additionalRefreshRequested){let r=s-this._lastRefreshMs,a=this._debounceThresholdMS-r;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=performance.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},a)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let t=Math.max(this._rowStart,0),e=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(t,e)}},kj=20,ig=class extends bt{constructor(t,e,n,s){super(),this._terminal=t,this._coreBrowserService=n,this._renderService=s,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="";let r=this._coreBrowserService.mainDocument;this._accessibilityContainer=r.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=r.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let a=0;a<this._terminal.rows;a++)this._rowElements[a]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[a]);if(this._topBoundaryFocusListener=a=>this._handleBoundaryFocus(a,0),this._bottomBoundaryFocusListener=a=>this._handleBoundaryFocus(a,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=r.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this._register(new NZ(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this._register(this._terminal.onResize(a=>this._handleResize(a.rows))),this._register(this._terminal.onRender(a=>this._refreshRows(a.start,a.end))),this._register(this._terminal.onScroll(()=>this._refreshRows())),this._register(this._terminal.onA11yChar(a=>this._handleChar(a))),this._register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this._register(this._terminal.onA11yTab(a=>this._handleTab(a))),this._register(this._terminal.onKey(a=>this._handleKey(a.key))),this._register(this._terminal.onBlur(()=>this._clearLiveRegion())),this._register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._register(st(r,"selectionchange",()=>this._handleSelectionChange())),this._register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRowsDimensions(),this._refreshRows(),this._register(nn(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(t){for(let e=0;e<t;e++)this._handleChar(" ")}_handleChar(t){this._liveRegionLineCount<kj+1&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==t&&(this._charsToAnnounce+=t):this._charsToAnnounce+=t,t===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===kj+1&&(this._liveRegion.textContent+=hw.get())))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(t){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(t)||this._charsToConsume.push(t)}_refreshRows(t,e){this._liveRegionDebouncer.refresh(t,e,this._terminal.rows)}_renderRows(t,e){let n=this._terminal.buffer,s=n.lines.length.toString();for(let r=t;r<=e;r++){let a=n.lines.get(n.ydisp+r),o=[],c=a?.translateToString(!0,void 0,void 0,o)||"",h=(n.ydisp+r+1).toString(),d=this._rowElements[r];d&&(c.length===0?(d.textContent="",this._rowColumns.set(d,[0,1])):(d.textContent=c,this._rowColumns.set(d,o)),d.setAttribute("aria-posinset",h),d.setAttribute("aria-setsize",s),this._alignRowWidth(d))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(t,e){let n=t.target,s=this._rowElements[e===0?1:this._rowElements.length-2],r=n.getAttribute("aria-posinset"),a=e===0?"1":`${this._terminal.buffer.lines.length}`;if(r===a||t.relatedTarget!==s)return;let o,c;if(e===0?(o=n,c=this._rowElements.pop(),this._rowContainer.removeChild(c)):(o=this._rowElements.shift(),c=n,this._rowContainer.removeChild(o)),o.removeEventListener("focus",this._topBoundaryFocusListener),c.removeEventListener("focus",this._bottomBoundaryFocusListener),e===0){let h=this._createAccessibilityTreeNode();this._rowElements.unshift(h),this._rowContainer.insertAdjacentElement("afterbegin",h)}else{let h=this._createAccessibilityTreeNode();this._rowElements.push(h),this._rowContainer.appendChild(h)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(e===0?-1:1),this._rowElements[e===0?1:this._rowElements.length-2].focus(),t.preventDefault(),t.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;let t=this._coreBrowserService.mainDocument.getSelection();if(!t)return;if(t.isCollapsed){this._rowContainer.contains(t.anchorNode)&&this._terminal.clearSelection();return}if(!t.anchorNode||!t.focusNode){console.error("anchorNode and/or focusNode are null");return}let e={node:t.anchorNode,offset:t.anchorOffset},n={node:t.focusNode,offset:t.focusOffset};if((e.node.compareDocumentPosition(n.node)&Node.DOCUMENT_POSITION_PRECEDING||e.node===n.node&&e.offset>n.offset)&&([e,n]=[n,e]),e.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(e={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(e.node))return;let s=this._rowElements.slice(-1)[0];if(n.node.compareDocumentPosition(s)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(n={node:s,offset:s.textContent?.length??0}),!this._rowContainer.contains(n.node))return;let r=({node:c,offset:h})=>{let d=c instanceof Text?c.parentNode:c,g=parseInt(d?.getAttribute("aria-posinset"),10)-1;if(isNaN(g))return console.warn("row is invalid. Race condition?"),null;let m=this._rowColumns.get(d);if(!m)return console.warn("columns is null. Race condition?"),null;let v=h<m.length?m[h]:m.slice(-1)[0]+1;return v>=this._terminal.cols&&(++g,v=0),{row:g,column:v}},a=r(e),o=r(n);if(!(!a||!o)){if(a.row>o.row||a.row===o.row&&a.column>=o.column)throw new Error("invalid range");this._terminal.select(a.column,a.row,(o.row-a.row)*this._terminal.cols-a.column+o.column)}}_handleResize(t){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let e=this._rowContainer.children.length;e<this._terminal.rows;e++)this._rowElements[e]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[e]);for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let t=this._coreBrowserService.mainDocument.createElement("div");return t.setAttribute("role","listitem"),t.tabIndex=-1,this._refreshRowDimensions(t),t}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){Object.assign(this._accessibilityContainer.style,{width:`${this._renderService.dimensions.css.canvas.width}px`,fontSize:`${this._terminal.options.fontSize}px`}),this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let t=0;t<this._terminal.rows;t++)this._refreshRowDimensions(this._rowElements[t]),this._alignRowWidth(this._rowElements[t])}}_refreshRowDimensions(t){t.style.height=`${this._renderService.dimensions.css.cell.height}px`}_alignRowWidth(t){t.style.transform="";let e=t.getBoundingClientRect().width,n=this._rowColumns.get(t)?.slice(-1)?.[0];if(!n)return;let s=n*this._renderService.dimensions.css.cell.width;t.style.transform=`scaleX(${s/e})`}};ig=hn([Le(1,U2),Le(2,da),Le(3,fa)],ig);var Kw=class extends bt{constructor(t,e,n,s,r){super(),this._element=t,this._mouseService=e,this._renderService=n,this._bufferService=s,this._linkProviderService=r,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this._register(new Ae),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this._register(new Ae),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this._register(nn(()=>{ho(this._linkCacheDisposables),this._linkCacheDisposables.length=0,this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this._register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this._register(st(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this._register(st(this._element,"mousemove",this._handleMouseMove.bind(this))),this._register(st(this._element,"mousedown",this._handleMouseDown.bind(this))),this._register(st(this._element,"mouseup",this._handleMouseUp.bind(this)))}get currentLink(){return this._currentLink}_handleMouseMove(t){this._lastMouseEvent=t;let e=this._positionFromMouseEvent(t,this._element,this._mouseService);if(!e)return;this._isMouseOut=!1;let n=t.composedPath();for(let s=0;s<n.length;s++){let r=n[s];if(r.classList.contains("xterm"))break;if(r.classList.contains("xterm-hover"))return}(!this._lastBufferCell||e.x!==this._lastBufferCell.x||e.y!==this._lastBufferCell.y)&&(this._handleHover(e),this._lastBufferCell=e)}_handleHover(t){if(this._activeLine!==t.y||this._wasResized){this._clearCurrentLink(),this._askForLink(t,!1),this._wasResized=!1;return}this._currentLink&&this._linkAtPosition(this._currentLink.link,t)||(this._clearCurrentLink(),this._askForLink(t,!0))}_askForLink(t,e){(!this._activeProviderReplies||!e)&&(this._activeProviderReplies?.forEach(s=>{s?.forEach(r=>{r.link.dispose&&r.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=t.y);let n=!1;for(let[s,r]of this._linkProviderService.linkProviders.entries())e?this._activeProviderReplies?.get(s)&&(n=this._checkLinkProviderResult(s,t,n)):r.provideLinks(t.y,a=>{if(this._isMouseOut)return;let o=a?.map(c=>({link:c}));this._activeProviderReplies?.set(s,o),n=this._checkLinkProviderResult(s,t,n),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(t.y,this._activeProviderReplies)})}_removeIntersectingLinks(t,e){let n=new Set;for(let s=0;s<e.size;s++){let r=e.get(s);if(r)for(let a=0;a<r.length;a++){let o=r[a],c=o.link.range.start.y<t?0:o.link.range.start.x,h=o.link.range.end.y>t?this._bufferService.cols:o.link.range.end.x;for(let d=c;d<=h;d++){if(n.has(d)){r.splice(a--,1);break}n.add(d)}}}}_checkLinkProviderResult(t,e,n){if(!this._activeProviderReplies)return n;let s=this._activeProviderReplies.get(t),r=!1;for(let a=0;a<t;a++)(!this._activeProviderReplies.has(a)||this._activeProviderReplies.get(a))&&(r=!0);if(!r&&s){let a=s.find(o=>this._linkAtPosition(o.link,e));a&&(n=!0,this._handleNewLink(a))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!n)for(let a=0;a<this._activeProviderReplies.size;a++){let o=this._activeProviderReplies.get(a)?.find(c=>this._linkAtPosition(c.link,e));if(o){n=!0,this._handleNewLink(o);break}}return n}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(t){if(!this._currentLink)return;let e=this._positionFromMouseEvent(t,this._element,this._mouseService);e&&this._mouseDownLink&&EZ(this._mouseDownLink.link,this._currentLink.link)&&this._linkAtPosition(this._currentLink.link,e)&&this._currentLink.link.activate(t,this._currentLink.link.text)}_clearCurrentLink(t,e){!this._currentLink||!this._lastMouseEvent||(!t||!e||this._currentLink.link.range.start.y>=t&&this._currentLink.link.range.end.y<=e)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,ho(this._linkCacheDisposables),this._linkCacheDisposables.length=0)}_handleNewLink(t){if(!this._lastMouseEvent)return;let e=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);e&&this._linkAtPosition(t.link,e)&&(this._currentLink=t,this._currentLink.state={decorations:{underline:t.link.decorations===void 0?!0:t.link.decorations.underline,pointerCursor:t.link.decorations===void 0?!0:t.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,t.link,this._lastMouseEvent),t.link.decorations={},Object.defineProperties(t.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:n=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==n&&(this._currentLink.state.decorations.pointerCursor=n,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",n))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:n=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==n&&(this._currentLink.state.decorations.underline=n,this._currentLink.state.isHovered&&this._fireUnderlineEvent(t.link,n))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(n=>{if(!this._currentLink)return;let s=n.start===0?0:n.start+1+this._bufferService.buffer.ydisp,r=this._bufferService.buffer.ydisp+1+n.end;if(this._currentLink.link.range.start.y>=s&&this._currentLink.link.range.end.y<=r&&(this._clearCurrentLink(s,r),this._lastMouseEvent)){let a=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);a&&this._askForLink(a,!1)}})))}_linkHover(t,e,n){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(e,!0),this._currentLink.state.decorations.pointerCursor&&t.classList.add("xterm-cursor-pointer")),e.hover&&e.hover(n,e.text)}_fireUnderlineEvent(t,e){let n=t.range,s=this._bufferService.buffer.ydisp,r=this._createLinkUnderlineEvent(n.start.x-1,n.start.y-s-1,n.end.x,n.end.y-s-1,void 0);(e?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(r)}_linkLeave(t,e,n){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(e,!1),this._currentLink.state.decorations.pointerCursor&&t.classList.remove("xterm-cursor-pointer")),e.leave&&e.leave(n,e.text)}_linkAtPosition(t,e){let n=t.range.start.y*this._bufferService.cols+t.range.start.x,s=t.range.end.y*this._bufferService.cols+t.range.end.x,r=e.y*this._bufferService.cols+e.x;return n<=r&&r<=s}_positionFromMouseEvent(t,e,n){let s=n.getCoords(t,e,this._bufferService.cols,this._bufferService.rows);if(s)return{x:s[0],y:s[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(t,e,n,s,r){return{x1:t,y1:e,x2:n,y2:s,cols:this._bufferService.cols,fg:r}}};Kw=hn([Le(1,V2),Le(2,fa),Le(3,Cs),Le(4,rM)],Kw);function EZ(t,e){return t.text===e.text&&t.range.start.x===e.range.start.x&&t.range.start.y===e.range.start.y&&t.range.end.x===e.range.end.x&&t.range.end.y===e.range.end.y}var AZ=class extends bZ{constructor(t={}){super(t),this._linkifier=this._register(new nu),this.browser=SM,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this._register(new nu),this._onCursorMove=this._register(new Ae),this.onCursorMove=this._onCursorMove.event,this._onKey=this._register(new Ae),this.onKey=this._onKey.event,this._onRender=this._register(new Ae),this.onRender=this._onRender.event,this._onSelectionChange=this._register(new Ae),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this._register(new Ae),this.onTitleChange=this._onTitleChange.event,this._onBell=this._register(new Ae),this.onBell=this._onBell.event,this._onFocus=this._register(new Ae),this._onBlur=this._register(new Ae),this._onA11yCharEmitter=this._register(new Ae),this._onA11yTabEmitter=this._register(new Ae),this._onWillOpen=this._register(new Ae),this._setup(),this._decorationService=this._instantiationService.createInstance(SZ),this._instantiationService.setService(Mf,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(yQ),this._instantiationService.setService(rM,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(fw)),this._register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this._register(this._inputHandler.onRequestRefreshRows(e=>this.refresh(e?.start??0,e?.end??this.rows-1))),this._register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this._register(this._inputHandler.onRequestReset(()=>this.reset())),this._register(this._inputHandler.onRequestWindowsOptionsReport(e=>this._reportWindowsOptions(e))),this._register(this._inputHandler.onColor(e=>this._handleColorEvent(e))),this._register(ns.forward(this._inputHandler.onCursorMove,this._onCursorMove)),this._register(ns.forward(this._inputHandler.onTitleChange,this._onTitleChange)),this._register(ns.forward(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this._register(ns.forward(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this._register(this._bufferService.onResize(e=>this._afterResize(e.cols,e.rows))),this._register(nn(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}get linkifier(){return this._linkifier.value}get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}_handleColorEvent(t){if(this._themeService)for(let e of t){let n,s="";switch(e.index){case 256:n="foreground",s="10";break;case 257:n="background",s="11";break;case 258:n="cursor",s="12";break;default:n="ansi",s="4;"+e.index}switch(e.type){case 0:let r=Jt.toColorRGB(n==="ansi"?this._themeService.colors.ansi[e.index]:this._themeService.colors[n]);this.coreService.triggerDataEvent(`${ve.ESC}]${s};${fZ(r)}${xM.ST}`);break;case 1:if(n==="ansi")this._themeService.modifyColors(a=>a.ansi[e.index]=Nn.toColor(...e.color));else{let a=n;this._themeService.modifyColors(o=>o[a]=Nn.toColor(...e.color))}break;case 2:this._themeService.restoreColor(e.index);break}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(t){t?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(ig,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(t){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(ve.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(ve.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let t=this.buffer.ybase+this.buffer.y,e=this.buffer.lines.get(t);if(!e)return;let n=Math.min(this.buffer.x,this.cols-1),s=this._renderService.dimensions.css.cell.height,r=e.getWidth(n),a=this._renderService.dimensions.css.cell.width*r,o=this.buffer.y*this._renderService.dimensions.css.cell.height,c=n*this._renderService.dimensions.css.cell.width;this.textarea.style.left=c+"px",this.textarea.style.top=o+"px",this.textarea.style.width=a+"px",this.textarea.style.height=s+"px",this.textarea.style.lineHeight=s+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this._register(st(this.element,"copy",e=>{this.hasSelection()&&RX(e,this._selectionService)}));let t=e=>BX(e,this.textarea,this.coreService,this.optionsService);this._register(st(this.textarea,"paste",t)),this._register(st(this.element,"paste",t)),kM?this._register(st(this.element,"mousedown",e=>{e.button===2&&M3(e,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this._register(st(this.element,"contextmenu",e=>{M3(e,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),J2&&this._register(st(this.element,"auxclick",e=>{e.button===1&&YB(e,this.textarea,this.screenElement)}))}_bindKeys(){this._register(st(this.textarea,"keyup",t=>this._keyUp(t),!0)),this._register(st(this.textarea,"keydown",t=>this._keyDown(t),!0)),this._register(st(this.textarea,"keypress",t=>this._keyPress(t),!0)),this._register(st(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this._register(st(this.textarea,"compositionupdate",t=>this._compositionHelper.compositionupdate(t))),this._register(st(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this._register(st(this.textarea,"input",t=>this._inputEvent(t),!0)),this._register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(t){if(!t)throw new Error("Terminal requires a parent element.");if(t.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService){this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView);return}this._document=t.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),t.appendChild(this.element);let e=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),e.appendChild(this._viewportElement),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._register(st(this.screenElement,"mousemove",r=>this.updateCursorStyle(r))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),e.appendChild(this.screenElement);let n=this.textarea=this._document.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",uw.get()),EM||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._register(this.optionsService.onSpecificOptionChange("disableStdin",()=>n.readOnly=this.optionsService.rawOptions.disableStdin)),this.textarea.readOnly=this.optionsService.rawOptions.disableStdin,this._coreBrowserService=this._register(this._instantiationService.createInstance(mQ,this.textarea,t.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(da,this._coreBrowserService),this._register(st(this.textarea,"focus",r=>this._handleTextAreaFocus(r))),this._register(st(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(Mw,this._document,this._helperContainer),this._instantiationService.setService(ky,this._charSizeService),this._themeService=this._instantiationService.createInstance(Pw),this._instantiationService.setService(Cu,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(ng),this._instantiationService.setService(sM,this._characterJoinerService),this._renderService=this._register(this._instantiationService.createInstance(Lw,this.rows,this.screenElement)),this._instantiationService.setService(fa,this._renderService),this._register(this._renderService.onRenderedViewportChange(r=>this._onRender.fire(r))),this.onResize(r=>this._renderService.resize(r.cols,r.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(Ow,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(Dw),this._instantiationService.setService(V2,this._mouseService);let s=this._linkifier.value=this._register(this._instantiationService.createInstance(Kw,this.screenElement));this.element.appendChild(e);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this._register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this._register(this.onBlur(()=>this._renderService.handleBlur())),this._register(this.onFocus(()=>this._renderService.handleFocus())),this._viewport=this._register(this._instantiationService.createInstance(jw,this.element,this.screenElement)),this._register(this._viewport.onRequestScrollLines(r=>{super.scrollLines(r,!1),this.refresh(0,this.rows-1)})),this._selectionService=this._register(this._instantiationService.createInstance(Iw,this.element,this.screenElement,s)),this._instantiationService.setService(HX,this._selectionService),this._register(this._selectionService.onRequestScrollLines(r=>this.scrollLines(r.amount,r.suppressScrollEvent))),this._register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this._register(this._selectionService.onRequestRedraw(r=>this._renderService.handleSelectionChanged(r.start,r.end,r.columnSelectMode))),this._register(this._selectionService.onLinuxMouseSelection(r=>{this.textarea.value=r,this.textarea.focus(),this.textarea.select()})),this._register(ns.any(this._onScroll.event,this._inputHandler.onScroll)(()=>{this._selectionService.refresh(),this._viewport?.queueSync()})),this._register(this._instantiationService.createInstance(Tw,this.screenElement)),this._register(st(this.element,"mousedown",r=>this._selectionService.handleMouseDown(r))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(ig,this)),this._register(this.optionsService.onSpecificOptionChange("screenReaderMode",r=>this._handleScreenReaderModeOptionChange(r))),this.options.overviewRuler.width&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(tg,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRuler",r=>{!this._overviewRulerRenderer&&r&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(tg,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(Bw,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){let t=this,e=this.element;function n(a){let o=t._mouseService.getMouseReportCoords(a,t.screenElement);if(!o)return!1;let c,h;switch(a.overrideType||a.type){case"mousemove":h=32,a.buttons===void 0?(c=3,a.button!==void 0&&(c=a.button<3?a.button:3)):c=a.buttons&1?0:a.buttons&4?1:a.buttons&2?2:3;break;case"mouseup":h=0,c=a.button<3?a.button:3;break;case"mousedown":h=1,c=a.button<3?a.button:3;break;case"wheel":if(t._customWheelEventHandler&&t._customWheelEventHandler(a)===!1)return!1;let d=a.deltaY;if(d===0||t.coreMouseService.consumeWheelEvent(a,t._renderService?.dimensions?.device?.cell?.height,t._coreBrowserService?.dpr)===0)return!1;h=d<0?0:1,c=4;break;default:return!1}return h===void 0||c===void 0||c>4?!1:t.coreMouseService.triggerMouseEvent({col:o.col,row:o.row,x:o.x,y:o.y,button:c,action:h,ctrl:a.ctrlKey,alt:a.altKey,shift:a.shiftKey})}let s={mouseup:null,wheel:null,mousedrag:null,mousemove:null},r={mouseup:a=>(n(a),a.buttons||(this._document.removeEventListener("mouseup",s.mouseup),s.mousedrag&&this._document.removeEventListener("mousemove",s.mousedrag)),this.cancel(a)),wheel:a=>(n(a),this.cancel(a,!0)),mousedrag:a=>{a.buttons&&n(a)},mousemove:a=>{a.buttons||n(a)}};this._register(this.coreMouseService.onProtocolChange(a=>{a?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(a)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),a&8?s.mousemove||(e.addEventListener("mousemove",r.mousemove),s.mousemove=r.mousemove):(e.removeEventListener("mousemove",s.mousemove),s.mousemove=null),a&16?s.wheel||(e.addEventListener("wheel",r.wheel,{passive:!1}),s.wheel=r.wheel):(e.removeEventListener("wheel",s.wheel),s.wheel=null),a&2?s.mouseup||(s.mouseup=r.mouseup):(this._document.removeEventListener("mouseup",s.mouseup),s.mouseup=null),a&4?s.mousedrag||(s.mousedrag=r.mousedrag):(this._document.removeEventListener("mousemove",s.mousedrag),s.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this._register(st(e,"mousedown",a=>{if(a.preventDefault(),this.focus(),!(!this.coreMouseService.areMouseEventsActive||this._selectionService.shouldForceSelection(a)))return n(a),s.mouseup&&this._document.addEventListener("mouseup",s.mouseup),s.mousedrag&&this._document.addEventListener("mousemove",s.mousedrag),this.cancel(a)})),this._register(st(e,"wheel",a=>{if(!s.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(a)===!1)return!1;if(!this.buffer.hasScrollback){if(a.deltaY===0)return!1;if(t.coreMouseService.consumeWheelEvent(a,t._renderService?.dimensions?.device?.cell?.height,t._coreBrowserService?.dpr)===0)return this.cancel(a,!0);let o=ve.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(a.deltaY<0?"A":"B");return this.coreService.triggerDataEvent(o,!0),this.cancel(a,!0)}}},{passive:!1}))}refresh(t,e){this._renderService?.refreshRows(t,e)}updateCursorStyle(t){this._selectionService?.shouldColumnSelect(t)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(t,e){this._viewport?this._viewport.scrollLines(t):super.scrollLines(t,e),this.refresh(0,this.rows-1)}scrollPages(t){this.scrollLines(t*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(t){t&&this._viewport?this._viewport.scrollToLine(this.buffer.ybase,!0):this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(t){let e=t-this._bufferService.buffer.ydisp;e!==0&&this.scrollLines(e)}paste(t){GB(t,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(t){this._customKeyEventHandler=t}attachCustomWheelEventHandler(t){this._customWheelEventHandler=t}registerLinkProvider(t){return this._linkProviderService.registerLinkProvider(t)}registerCharacterJoiner(t){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let e=this._characterJoinerService.register(t);return this.refresh(0,this.rows-1),e}deregisterCharacterJoiner(t){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(t)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(t){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+t)}registerDecoration(t){return this._decorationService.registerDecoration(t)}hasSelection(){return this._selectionService?this._selectionService.hasSelection:!1}select(t,e,n){this._selectionService.setSelection(t,e,n)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(!(!this._selectionService||!this._selectionService.hasSelection))return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(t,e){this._selectionService?.selectLines(t,e)}_keyDown(t){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(t)===!1)return!1;let e=this.browser.isMac&&this.options.macOptionIsMeta&&t.altKey;if(!e&&!this._compositionHelper.keydown(t))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(!0),!1;!e&&(t.key==="Dead"||t.key==="AltGraph")&&(this._unprocessedDeadKey=!0);let n=xZ(t,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(t),n.type===3||n.type===2){let s=this.rows-1;return this.scrollLines(n.type===2?-s:s),this.cancel(t,!0)}if(n.type===1&&this.selectAll(),this._isThirdLevelShift(this.browser,t)||(n.cancel&&this.cancel(t,!0),!n.key)||t.key&&!t.ctrlKey&&!t.altKey&&!t.metaKey&&t.key.length===1&&t.key.charCodeAt(0)>=65&&t.key.charCodeAt(0)<=90)return!0;if(this._unprocessedDeadKey)return this._unprocessedDeadKey=!1,!0;if((n.key===ve.ETX||n.key===ve.CR)&&(this.textarea.value=""),this._onKey.fire({key:n.key,domEvent:t}),this._showCursor(),this.coreService.triggerDataEvent(n.key,!0),!this.optionsService.rawOptions.screenReaderMode||t.altKey||t.ctrlKey)return this.cancel(t,!0);this._keyDownHandled=!0}_isThirdLevelShift(t,e){let n=t.isMac&&!this.options.macOptionIsMeta&&e.altKey&&!e.ctrlKey&&!e.metaKey||t.isWindows&&e.altKey&&e.ctrlKey&&!e.metaKey||t.isWindows&&e.getModifierState("AltGraph");return e.type==="keypress"?n:n&&(!e.keyCode||e.keyCode>47)}_keyUp(t){this._keyDownSeen=!1,!(this._customKeyEventHandler&&this._customKeyEventHandler(t)===!1)&&(jZ(t)||this.focus(),this.updateCursorStyle(t),this._keyPressHandled=!1)}_keyPress(t){let e;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(t)===!1)return!1;if(this.cancel(t),t.charCode)e=t.charCode;else if(t.which===null||t.which===void 0)e=t.keyCode;else if(t.which!==0&&t.charCode!==0)e=t.which;else return!1;return!e||(t.altKey||t.ctrlKey||t.metaKey)&&!this._isThirdLevelShift(this.browser,t)?!1:(e=String.fromCharCode(e),this._onKey.fire({key:e,domEvent:t}),this._showCursor(),this.coreService.triggerDataEvent(e,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,!0)}_inputEvent(t){if(t.data&&t.inputType==="insertText"&&(!t.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let e=t.data;return this.coreService.triggerDataEvent(e,!0),this.cancel(t),!0}return!1}resize(t,e){if(t===this.cols&&e===this.rows){this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure();return}super.resize(t,e)}_afterResize(t,e){this._charSizeService?.measure()}clear(){if(!(this.buffer.ybase===0&&this.buffer.y===0)){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let t=1;t<this.rows;t++)this.buffer.lines.push(this.buffer.getBlankLine(Cn));this._onScroll.fire({position:this.buffer.ydisp}),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;let t=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this._customKeyEventHandler=t,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(ve.ESC+"[I"):this.coreService.triggerDataEvent(ve.ESC+"[O")}_reportWindowsOptions(t){if(this._renderService)switch(t){case 0:let e=this._renderService.dimensions.css.canvas.width.toFixed(0),n=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${ve.ESC}[4;${n};${e}t`);break;case 1:let s=this._renderService.dimensions.css.cell.width.toFixed(0),r=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${ve.ESC}[6;${r};${s}t`);break}}cancel(t,e){if(!(!this.options.cancelEvents&&!e))return t.preventDefault(),t.stopPropagation(),!1}};function jZ(t){return t.keyCode===16||t.keyCode===17||t.keyCode===18}var TZ=class{constructor(){this._addons=[]}dispose(){for(let t=this._addons.length-1;t>=0;t--)this._addons[t].instance.dispose()}loadAddon(t,e){let n={instance:e,dispose:e.dispose,isDisposed:!1};this._addons.push(n),e.dispose=()=>this._wrappedAddonDispose(n),e.activate(t)}_wrappedAddonDispose(t){if(t.isDisposed)return;let e=-1;for(let n=0;n<this._addons.length;n++)if(this._addons[n]===t){e=n;break}if(e===-1)throw new Error("Could not dispose an addon that has not been loaded");t.isDisposed=!0,t.dispose.apply(t.instance),this._addons.splice(e,1)}},OZ=class{constructor(t){this._line=t}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(t,e){if(!(t<0||t>=this._line.length))return e?(this._line.loadCell(t,e),e):this._line.loadCell(t,new Br)}translateToString(t,e,n){return this._line.translateToString(t,e,n)}},Cj=class{constructor(t,e){this._buffer=t,this.type=e}init(t){return this._buffer=t,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(t){let e=this._buffer.lines.get(t);if(e)return new OZ(e)}getNullCell(){return new Br}},RZ=class extends bt{constructor(t){super(),this._core=t,this._onBufferChange=this._register(new Ae),this.onBufferChange=this._onBufferChange.event,this._normal=new Cj(this._core.buffers.normal,"normal"),this._alternate=new Cj(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}},BZ=class{constructor(t){this._core=t}registerCsiHandler(t,e){return this._core.registerCsiHandler(t,n=>e(n.toArray()))}addCsiHandler(t,e){return this.registerCsiHandler(t,e)}registerDcsHandler(t,e){return this._core.registerDcsHandler(t,(n,s)=>e(n,s.toArray()))}addDcsHandler(t,e){return this.registerDcsHandler(t,e)}registerEscHandler(t,e){return this._core.registerEscHandler(t,e)}addEscHandler(t,e){return this.registerEscHandler(t,e)}registerOscHandler(t,e){return this._core.registerOscHandler(t,e)}addOscHandler(t,e){return this.registerOscHandler(t,e)}},MZ=class{constructor(t){this._core=t}register(t){this._core.unicodeService.register(t)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(t){this._core.unicodeService.activeVersion=t}},DZ=["cols","rows"],ii=0,LZ=class extends bt{constructor(t){super(),this._core=this._register(new AZ(t)),this._addonManager=this._register(new TZ),this._publicOptions={...this._core.options};let e=s=>this._core.options[s],n=(s,r)=>{this._checkReadonlyOptions(s),this._core.options[s]=r};for(let s in this._core.options){let r={get:e.bind(this,s),set:n.bind(this,s)};Object.defineProperty(this._publicOptions,s,r)}}_checkReadonlyOptions(t){if(DZ.includes(t))throw new Error(`Option "${t}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new BZ(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new MZ(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this._register(new RZ(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let t=this._core.coreService.decPrivateModes,e="none";switch(this._core.coreMouseService.activeProtocol){case"X10":e="x10";break;case"VT200":e="vt200";break;case"DRAG":e="drag";break;case"ANY":e="any";break}return{applicationCursorKeysMode:t.applicationCursorKeys,applicationKeypadMode:t.applicationKeypad,bracketedPasteMode:t.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:e,originMode:t.origin,reverseWraparoundMode:t.reverseWraparound,sendFocusMode:t.sendFocus,synchronizedOutputMode:t.synchronizedOutput,wraparoundMode:t.wraparound}}get options(){return this._publicOptions}set options(t){for(let e in t)this._publicOptions[e]=t[e]}blur(){this._core.blur()}focus(){this._core.focus()}input(t,e=!0){this._core.input(t,e)}resize(t,e){this._verifyIntegers(t,e),this._core.resize(t,e)}open(t){this._core.open(t)}attachCustomKeyEventHandler(t){this._core.attachCustomKeyEventHandler(t)}attachCustomWheelEventHandler(t){this._core.attachCustomWheelEventHandler(t)}registerLinkProvider(t){return this._core.registerLinkProvider(t)}registerCharacterJoiner(t){return this._checkProposedApi(),this._core.registerCharacterJoiner(t)}deregisterCharacterJoiner(t){this._checkProposedApi(),this._core.deregisterCharacterJoiner(t)}registerMarker(t=0){return this._verifyIntegers(t),this._core.registerMarker(t)}registerDecoration(t){return this._checkProposedApi(),this._verifyPositiveIntegers(t.x??0,t.width??0,t.height??0),this._core.registerDecoration(t)}hasSelection(){return this._core.hasSelection()}select(t,e,n){this._verifyIntegers(t,e,n),this._core.select(t,e,n)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(t,e){this._verifyIntegers(t,e),this._core.selectLines(t,e)}dispose(){super.dispose()}scrollLines(t){this._verifyIntegers(t),this._core.scrollLines(t)}scrollPages(t){this._verifyIntegers(t),this._core.scrollPages(t)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(t){this._verifyIntegers(t),this._core.scrollToLine(t)}clear(){this._core.clear()}write(t,e){this._core.write(t,e)}writeln(t,e){this._core.write(t),this._core.write(`\r
`,e)}paste(t){this._core.paste(t)}refresh(t,e){this._verifyIntegers(t,e),this._core.refresh(t,e)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(t){this._addonManager.loadAddon(this,t)}static get strings(){return{get promptLabel(){return uw.get()},set promptLabel(t){uw.set(t)},get tooMuchOutput(){return hw.get()},set tooMuchOutput(t){hw.set(t)}}}_verifyIntegers(...t){for(ii of t)if(ii===1/0||isNaN(ii)||ii%1!==0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...t){for(ii of t)if(ii&&(ii===1/0||isNaN(ii)||ii%1!==0||ii<0))throw new Error("This API only accepts positive integers")}};var IZ=2,PZ=1,zZ=class{activate(t){this._terminal=t}dispose(){}fit(){let t=this.proposeDimensions();if(!t||!this._terminal||isNaN(t.cols)||isNaN(t.rows))return;let e=this._terminal._core;(this._terminal.rows!==t.rows||this._terminal.cols!==t.cols)&&(e._renderService.clear(),this._terminal.resize(t.cols,t.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let t=this._terminal._core._renderService.dimensions;if(t.css.cell.width===0||t.css.cell.height===0)return;let e=this._terminal.options.scrollback===0?0:this._terminal.options.overviewRuler?.width||14,n=window.getComputedStyle(this._terminal.element.parentElement),s=parseInt(n.getPropertyValue("height")),r=Math.max(0,parseInt(n.getPropertyValue("width"))),a=window.getComputedStyle(this._terminal.element),o={top:parseInt(a.getPropertyValue("padding-top")),bottom:parseInt(a.getPropertyValue("padding-bottom")),right:parseInt(a.getPropertyValue("padding-right")),left:parseInt(a.getPropertyValue("padding-left"))},c=o.top+o.bottom,h=o.right+o.left,d=s-c,g=r-h-e;return{cols:Math.max(IZ,Math.floor(g/t.css.cell.width)),rows:Math.max(PZ,Math.floor(d/t.css.cell.height))}}};var $Z=class{constructor(e,n,s,r={}){this._terminal=e,this._regex=n,this._handler=s,this._options=r}provideLinks(e,n){let s=UZ.computeLink(e,this._regex,this._terminal,this._handler);n(this._addCallbacks(s))}_addCallbacks(e){return e.map(n=>(n.leave=this._options.leave,n.hover=(s,r)=>{if(this._options.hover){let{range:a}=n;this._options.hover(s,r,a)}},n))}};function HZ(t){try{let e=new URL(t),n=e.password&&e.username?`${e.protocol}//${e.username}:${e.password}@${e.host}`:e.username?`${e.protocol}//${e.username}@${e.host}`:`${e.protocol}//${e.host}`;return t.toLocaleLowerCase().startsWith(n.toLocaleLowerCase())}catch{return!1}}var UZ=class Zm{static computeLink(e,n,s,r){let a=new RegExp(n.source,(n.flags||"")+"g"),[o,c]=Zm._getWindowedLineStrings(e-1,s),h=o.join(""),d,g=[];for(;d=a.exec(h);){let m=d[0];if(!HZ(m))continue;let[v,y]=Zm._mapStrIdx(s,c,0,d.index),[x,w]=Zm._mapStrIdx(s,v,y,m.length);if(v===-1||y===-1||x===-1||w===-1)continue;let S={start:{x:y+1,y:v+1},end:{x:w,y:x+1}};g.push({range:S,text:m,activate:r})}return g}static _getWindowedLineStrings(e,n){let s,r=e,a=e,o=0,c="",h=[];if(s=n.buffer.active.getLine(e)){let d=s.translateToString(!0);if(s.isWrapped&&d[0]!==" "){for(o=0;(s=n.buffer.active.getLine(--r))&&o<2048&&(c=s.translateToString(!0),o+=c.length,h.push(c),!(!s.isWrapped||c.indexOf(" ")!==-1)););h.reverse()}for(h.push(d),o=0;(s=n.buffer.active.getLine(++a))&&s.isWrapped&&o<2048&&(c=s.translateToString(!0),o+=c.length,h.push(c),c.indexOf(" ")===-1););}return[h,r]}static _mapStrIdx(e,n,s,r){let a=e.buffer.active,o=a.getNullCell(),c=s;for(;r;){let h=a.getLine(n);if(!h)return[-1,-1];for(let d=c;d<h.length;++d){h.getCell(d,o);let g=o.getChars();if(o.getWidth()&&(r-=g.length||1,d===h.length-1&&g==="")){let m=a.getLine(n+1);m&&m.isWrapped&&(m.getCell(0,o),o.getWidth()===2&&(r+=1))}if(r<0)return[n,d]}n++,c=0}return[n,c]}},VZ=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function FZ(t,e){let n=window.open();if(n){try{n.opener=null}catch{}n.location.href=e}else console.warn("Opening link blocked as opener could not be cleared")}var qZ=class{constructor(t=FZ,e={}){this._handler=t,this._options=e}activate(t){this._terminal=t;let e=this._options,n=e.urlRegex||VZ;this._linkProvider=this._terminal.registerLinkProvider(new $Z(this._terminal,n,this._handler,e))}dispose(){this._linkProvider?.dispose()}};const KZ=0,WZ=1,GZ=2,YZ=4,XZ=["/bin/bash","/bin/sh"];class JZ{ws=null;options;isClosing=!1;hasConnected=!1;constructor(e){this.options=e}async connect(){const e=this.options.command||XZ;for(const n of e)try{await this.tryConnect([n]),this.hasConnected=!0;return}catch{if(n===e[e.length-1])throw new Error(`No shell available (tried: ${e.join(", ")})`)}}tryConnect(e){return new Promise((n,s)=>{const{context:r,namespace:a,pod:o,container:c}=this.options,h=new URLSearchParams;h.set("container",c),h.set("stdin","true"),h.set("stdout","true"),h.set("stderr","true"),h.set("tty","true");for(const y of e)h.append("command",y);const g=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/contexts/${r}/api/v1/namespaces/${a}/pods/${o}/exec?${h.toString()}`;this.ws=new WebSocket(g,["v4.channel.k8s.io"]);let m=!1;const v=setTimeout(()=>{m||(m=!0,this.ws?.close(),s(new Error("Connection timeout")))},5e3);this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{setTimeout(()=>{!m&&this.ws?.readyState===WebSocket.OPEN&&(clearTimeout(v),m=!0,n())},200)},this.ws.onmessage=y=>{if(y.data instanceof ArrayBuffer){const x=new Uint8Array(y.data);if(x.length<1)return;const w=x[0],S=new TextDecoder().decode(x.slice(1));switch(w){case WZ:case GZ:S&&this.options.onData(S);break}}},this.ws.onerror=()=>{clearTimeout(v),m||(m=!0,s(new Error("WebSocket connection failed")))},this.ws.onclose=y=>{clearTimeout(v),m?!this.isClosing&&this.hasConnected&&this.options.onClose?.():(m=!0,s(new Error(y.reason||`Connection closed (code: ${y.code})`)))}})}send(e){if(this.ws?.readyState===WebSocket.OPEN){const s=new TextEncoder().encode(e),r=new Uint8Array(s.length+1);r[0]=KZ,r.set(s,1),this.ws.send(r)}}resize(e,n){if(this.ws?.readyState===WebSocket.OPEN){const s=JSON.stringify({Width:e,Height:n}),a=new TextEncoder().encode(s),o=new Uint8Array(a.length+1);o[0]=YZ,o.set(a,1),this.ws.send(o)}}disconnect(){this.isClosing=!0,this.ws&&(this.ws.close(),this.ws=null)}get isConnected(){return this.ws?.readyState===WebSocket.OPEN}}function QZ(t){const e=[],n=t.spec,s=t.status;if(n?.containers)for(const r of n.containers){const a=s?.containerStatuses?.find(o=>o.name===r.name);e.push({name:r.name,ready:a?.ready??!1})}return e}function ZZ({resource:t,toolbarRef:e}){const{context:n}=Ir(),s=W.useRef(null),r=W.useRef(null),a=W.useRef(null),o=W.useRef(null),[c,h]=W.useState(!1),[d,g]=W.useState(!1),[m,v]=W.useState(""),[y,x]=W.useState(!1),w=t.metadata?.namespace,S=t.metadata?.name,k=QZ(t);W.useEffect(()=>{k.length>0&&!m&&v(k[0].name)},[k,m]),W.useEffect(()=>{if(!s.current||r.current)return;const T=new LZ({cursorBlink:!0,fontSize:13,fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace',theme:{background:"#0a0a0a",foreground:"#e5e5e5",cursor:"#e5e5e5",cursorAccent:"#0a0a0a",selectionBackground:"#3b82f680",black:"#171717",red:"#ef4444",green:"#22c55e",yellow:"#eab308",blue:"#3b82f6",magenta:"#a855f7",cyan:"#06b6d4",white:"#e5e5e5",brightBlack:"#404040",brightRed:"#f87171",brightGreen:"#4ade80",brightYellow:"#facc15",brightBlue:"#60a5fa",brightMagenta:"#c084fc",brightCyan:"#22d3ee",brightWhite:"#ffffff"},allowProposedApi:!0}),H=new zZ,$=new qZ;T.loadAddon(H),T.loadAddon($),T.open(s.current),H.fit(),r.current=T,a.current=H;const G=()=>{H.fit(),o.current?.isConnected&&o.current.resize(T.cols,T.rows)},z=new ResizeObserver(G);return z.observe(s.current),window.addEventListener("resize",G),()=>{z.disconnect(),window.removeEventListener("resize",G),T.dispose(),r.current=null,a.current=null}},[]);const C=W.useCallback(async()=>{if(!w||!S||!m||!r.current)return;o.current?.disconnect(),g(!0);const T=r.current;T.clear(),T.writeln(`Connecting to ${S}/${m}...`);try{const H=new JZ({context:n,namespace:w,pod:S,container:m,onData:G=>{T.write(G)},onError:G=>{T.writeln(`\r
\x1B[31mError: ${G}\x1B[0m`)},onClose:()=>{h(!1),T.writeln(`\r
\x1B[33mConnection closed.\x1B[0m`)}});await H.connect(),o.current=H,h(!0);const $=a.current;$&&($.fit(),H.resize(T.cols,T.rows)),T.onData(G=>{H.send(G)})}catch(H){const $=H instanceof Error?H.message:"Failed to connect";T.writeln(`\r
\x1B[31mFailed to connect: ${$}\x1B[0m`)}finally{g(!1)}},[n,w,S,m]),A=W.useCallback(()=>{o.current?.disconnect(),o.current=null,h(!1)},[]),B=W.useRef(!1);W.useEffect(()=>{if(m&&!B.current&&r.current){B.current=!0;const T=setTimeout(()=>{C()},100);return()=>clearTimeout(T)}},[m,C]),W.useEffect(()=>()=>{o.current?.disconnect(),o.current=null},[]);const M=T=>{v(T),x(!1),A()};return f.jsxs("div",{className:"flex flex-col h-full bg-[#0a0a0a]",children:[e&&f.jsxs(H2,{toolbarRef:e,children:[k.length>1&&f.jsxs("div",{className:"relative",children:[f.jsxs("button",{onClick:()=>x(!y),className:"flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-200 dark:hover:bg-neutral-800 rounded transition-colors",children:[f.jsx("span",{className:"max-w-30 truncate",children:m}),f.jsx(Ln,{size:12})]}),y&&f.jsx("div",{className:"absolute right-0 top-full mt-1 z-50 bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg shadow-lg py-1 min-w-40",children:k.map(T=>f.jsxs("button",{onClick:()=>M(T.name),className:`w-full text-left px-3 py-1.5 text-xs hover:bg-neutral-100 dark:hover:bg-neutral-700 flex items-center gap-2 ${T.name===m?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-500/10":"text-neutral-700 dark:text-neutral-300"}`,children:[f.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${T.ready?"bg-emerald-500":"bg-neutral-400"}`}),T.name]},T.name))})]}),c?f.jsx("button",{onClick:A,className:"flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 hover:bg-neutral-200 dark:hover:bg-neutral-800 rounded transition-colors",title:"Disconnect",children:f.jsx(rP,{size:12})}):f.jsx("button",{onClick:C,disabled:d||!m,className:"flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-emerald-600 dark:text-emerald-400 hover:text-emerald-700 dark:hover:text-emerald-300 hover:bg-neutral-200 dark:hover:bg-neutral-800 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Connect",children:f.jsx(k7,{size:12})})]}),f.jsx("div",{ref:s,className:"flex-1 p-2",style:{minHeight:0}}),f.jsxs("div",{className:"shrink-0 px-4 py-1.5 border-t border-neutral-800 bg-neutral-900/50 flex items-center gap-3 text-xs text-neutral-500",children:[f.jsxs("span",{className:"flex items-center gap-1.5",children:[f.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${c?"bg-emerald-500":d?"bg-amber-500 animate-pulse":"bg-neutral-600"}`}),c?"Connected":d?"Connecting...":"Disconnected"]}),m&&f.jsxs("span",{className:"text-neutral-600",children:[S,"/",m]})]})]})}function eee(t){const e=He.c(13),{metadata:n}=t,s=n.labels,r=n.annotations;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=new Set(["pod-template-hash","controller-revision-hash","pod-template-generation"]),e[0]=a):a=e[0];const o=a;let c;e[1]===Symbol.for("react.memo_cache_sentinel")?(c=new Set(["kubectl.kubernetes.io/last-applied-configuration","deployment.kubernetes.io/revision","control-plane.alpha.kubernetes.io/leader","deprecated.daemonset.template.generation","kubernetes.io/description"]),e[1]=c):c=e[1];const h=c;let d;e[2]!==s?(d=s?Object.fromEntries(Object.entries(s).filter(S=>{const[k]=S;return!o.has(k)})):void 0,e[2]=s,e[3]=d):d=e[3];const g=d;let m;e[4]!==r?(m=r?Object.fromEntries(Object.entries(r).filter(S=>{const[k]=S;return!h.has(k)})):void 0,e[4]=r,e[5]=m):m=e[5];const v=m;let y;e[6]!==g?(y=g&&Object.keys(g).length>0&&f.jsxs("section",{className:"mb-4",children:[f.jsx("h4",{className:"text-xs font-medium uppercase tracking-wider text-neutral-600 dark:text-neutral-400 mb-2",children:"Labels"}),f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("table",{className:"w-full text-xs",children:f.jsx("tbody",{children:Object.entries(g).map(nee)})})})]}),e[6]=g,e[7]=y):y=e[7];let x;e[8]!==v?(x=v&&Object.keys(v).length>0&&f.jsxs("section",{className:"mb-4",children:[f.jsx("h4",{className:"text-xs font-medium uppercase tracking-wider text-neutral-600 dark:text-neutral-400 mb-2",children:"Annotations"}),f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("table",{className:"w-full text-xs",children:f.jsx("tbody",{children:Object.entries(v).map(tee)})})})]}),e[8]=v,e[9]=x):x=e[9];let w;return e[10]!==y||e[11]!==x?(w=f.jsxs("div",{className:"space-y-4",children:[y,x]}),e[10]=y,e[11]=x,e[12]=w):w=e[12],w}function tee(t){const[e,n]=t;return f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-1.5 pr-3 text-purple-600 dark:text-purple-400 align-top whitespace-nowrap",children:e}),f.jsx("td",{className:"py-1.5 text-neutral-600 dark:text-neutral-300 break-all",children:n})]},e)}function nee(t){const[e,n]=t;return f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-1.5 pr-3 text-sky-600 dark:text-sky-400 align-top whitespace-nowrap",children:e}),f.jsx("td",{className:"py-1.5 text-emerald-600 dark:text-emerald-400 break-all",children:n})]},e)}function see(t){const e=He.c(6),{events:n,loading:s}=t;if(s&&n.length===0){let o;return e[0]===Symbol.for("react.memo_cache_sentinel")?(o=f.jsxs("div",{className:"flex items-center gap-2 text-neutral-600 dark:text-neutral-500 text-sm",children:[f.jsx(Fl,{size:14,className:"animate-spin"}),"Loading events..."]}),e[0]=o):o=e[0],o}if(n.length===0){let o;return e[1]===Symbol.for("react.memo_cache_sentinel")?(o=f.jsx("div",{className:"text-neutral-600 dark:text-neutral-500 text-sm italic",children:"No events found for this resource"}),e[1]=o):o=e[1],o}let r;e[2]!==n?(r=n.map(ree),e[2]=n,e[3]=r):r=e[3];let a;return e[4]!==r?(a=f.jsx("div",{className:"space-y-2",children:r}),e[4]=r,e[5]=a):a=e[5],a}function ree(t){return f.jsx(iee,{event:t},t.metadata?.uid||`${t.reason}-${t.lastTimestamp}`)}function iee(t){const e=He.c(36),{event:n}=t;let s;e[0]!==n.eventTime||e[1]!==n.lastTimestamp||e[2]!==n.metadata?(s=()=>n.lastTimestamp?n.lastTimestamp instanceof Date?n.lastTimestamp.toISOString():String(n.lastTimestamp):n.eventTime?String(n.eventTime):n.metadata?.creationTimestamp?n.metadata.creationTimestamp instanceof Date?n.metadata.creationTimestamp.toISOString():String(n.metadata.creationTimestamp):new Date().toISOString(),e[0]=n.eventTime,e[1]=n.lastTimestamp,e[2]=n.metadata,e[3]=s):s=e[3];const r=s;let a,o,c,h,d;if(e[4]!==n.reason||e[5]!==n.type||e[6]!==r){const w=r(),S=n.type==="Warning";d=`p-3 rounded-lg border ${S?"bg-amber-500/5 border-amber-500/20":"bg-neutral-100 dark:bg-neutral-900/50 border-neutral-300 dark:border-neutral-700/50"}`,c="flex items-start justify-between gap-2 mb-1";const k=`px-1.5 py-0.5 rounded text-xs font-medium ${S?"bg-amber-500/20 text-amber-600 dark:text-amber-400":"bg-emerald-500/20 text-emerald-600 dark:text-emerald-400"}`;let C;e[12]!==n.type||e[13]!==k?(C=f.jsx("span",{className:k,children:n.type}),e[12]=n.type,e[13]=k,e[14]=C):C=e[14];let A;e[15]!==n.reason?(A=f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-200",children:n.reason}),e[15]=n.reason,e[16]=A):A=e[16],e[17]!==C||e[18]!==A?(h=f.jsxs("div",{className:"flex items-center gap-2",children:[C,A]}),e[17]=C,e[18]=A,e[19]=h):h=e[19],a="text-xs text-neutral-600 dark:text-neutral-500 whitespace-nowrap",o=aee(w),e[4]=n.reason,e[5]=n.type,e[6]=r,e[7]=a,e[8]=o,e[9]=c,e[10]=h,e[11]=d}else a=e[7],o=e[8],c=e[9],h=e[10],d=e[11];let g;e[20]!==a||e[21]!==o?(g=f.jsx("span",{className:a,children:o}),e[20]=a,e[21]=o,e[22]=g):g=e[22];let m;e[23]!==c||e[24]!==h||e[25]!==g?(m=f.jsxs("div",{className:c,children:[h,g]}),e[23]=c,e[24]=h,e[25]=g,e[26]=m):m=e[26];let v;e[27]!==n.message?(v=f.jsx("p",{className:"text-sm text-neutral-700 dark:text-neutral-400",children:n.message}),e[27]=n.message,e[28]=v):v=e[28];let y;e[29]!==n.count?(y=n.count&&n.count>1&&f.jsxs("p",{className:"text-xs text-neutral-600 dark:text-neutral-500 mt-1",children:["Occurred ",n.count," times"]}),e[29]=n.count,e[30]=y):y=e[30];let x;return e[31]!==y||e[32]!==d||e[33]!==m||e[34]!==v?(x=f.jsxs("div",{className:d,children:[m,v,y]}),e[31]=y,e[32]=d,e[33]=m,e[34]=v,e[35]=x):x=e[35],x}function aee(t){const e=new Date(t),s=new Date().getTime()-e.getTime(),r=Math.floor(s/1e3),a=Math.floor(r/60),o=Math.floor(a/60),c=Math.floor(o/24);return c>0?`${c}d ago`:o>0?`${o}h ago`:a>0?`${a}m ago`:`${r}s ago`}function Nj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=Array(e);n<e;n++)s[n]=t[n];return s}function lee(t){if(Array.isArray(t))return t}function oee(t,e,n){return(e=mee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cee(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s,r,a,o,c=[],h=!0,d=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(h=(s=a.call(n)).done)&&(c.push(s.value),c.length!==e);h=!0);}catch(g){d=!0,r=g}finally{try{if(!h&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw r}}return c}}function uee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ej(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Aj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ej(Object(n),!0).forEach(function(s){oee(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ej(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function hee(t,e){if(t==null)return{};var n,s,r=dee(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function dee(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)!==-1)continue;n[s]=t[s]}return n}function fee(t,e){return lee(t)||cee(t,e)||gee(t,e)||uee()}function pee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mee(t){var e=pee(t,"string");return typeof e=="symbol"?e:e+""}function gee(t,e){if(t){if(typeof t=="string")return Nj(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nj(t,e):void 0}}function yee(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Tj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jj(Object(n),!0).forEach(function(s){yee(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jj(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function vee(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(s){return e.reduceRight(function(r,a){return a(r)},s)}}function yd(t){return function e(){for(var n=this,s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return r.length>=t.length?t.apply(this,r):function(){for(var o=arguments.length,c=new Array(o),h=0;h<o;h++)c[h]=arguments[h];return e.apply(n,[].concat(r,c))}}}function ag(t){return{}.toString.call(t).includes("Object")}function bee(t){return!Object.keys(t).length}function af(t){return typeof t=="function"}function _ee(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function xee(t,e){return ag(e)||nl("changeType"),Object.keys(e).some(function(n){return!_ee(t,n)})&&nl("changeField"),e}function wee(t){af(t)||nl("selectorType")}function See(t){af(t)||ag(t)||nl("handlerType"),ag(t)&&Object.values(t).some(function(e){return!af(e)})&&nl("handlersType")}function kee(t){t||nl("initialIsRequired"),ag(t)||nl("initialType"),bee(t)&&nl("initialContent")}function Cee(t,e){throw new Error(t[e]||t.default)}var Nee={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},nl=yd(Cee)(Nee),Cm={changes:xee,selector:wee,handler:See,initial:kee};function Eee(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Cm.initial(t),Cm.handler(e);var n={current:t},s=yd(Tee)(n,e),r=yd(jee)(n),a=yd(Cm.changes)(t),o=yd(Aee)(n);function c(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(g){return g};return Cm.selector(d),d(n.current)}function h(d){vee(s,r,a,o)(d)}return[c,h]}function Aee(t,e){return af(e)?e(t.current):e}function jee(t,e){return t.current=Tj(Tj({},t.current),e),e}function Tee(t,e,n){return af(e)?e(t.current):Object.keys(n).forEach(function(s){var r;return(r=e[s])===null||r===void 0?void 0:r.call(e,t.current[s])}),n}var Oee={create:Eee},Ree={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function Bee(t){return function e(){for(var n=this,s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return r.length>=t.length?t.apply(this,r):function(){for(var o=arguments.length,c=new Array(o),h=0;h<o;h++)c[h]=arguments[h];return e.apply(n,[].concat(r,c))}}}function Mee(t){return{}.toString.call(t).includes("Object")}function Dee(t){return t||Oj("configIsRequired"),Mee(t)||Oj("configType"),t.urls?(Lee(),{paths:{vs:t.urls.monacoBase}}):t}function Lee(){console.warn(IM.deprecation)}function Iee(t,e){throw new Error(t[e]||t.default)}var IM={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Oj=Bee(Iee)(IM),Pee={config:Dee},zee=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return function(r){return n.reduceRight(function(a,o){return o(a)},r)}};function PM(t,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&t[n]&&Object.assign(e[n],PM(t[n],e[n]))}),Aj(Aj({},t),e)}var $ee={type:"cancelation",msg:"operation is manually canceled"};function s_(t){var e=!1,n=new Promise(function(s,r){t.then(function(a){return e?r($ee):s(a)}),t.catch(r)});return n.cancel=function(){return e=!0},n}var Hee=["monaco"],Uee=Oee.create({config:Ree,isInitialized:!1,resolve:null,reject:null,monaco:null}),zM=fee(Uee,2),If=zM[0],Ey=zM[1];function Vee(t){var e=Pee.config(t),n=e.monaco,s=hee(e,Hee);Ey(function(r){return{config:PM(r.config,s),monaco:n}})}function Fee(){var t=If(function(e){var n=e.monaco,s=e.isInitialized,r=e.resolve;return{monaco:n,isInitialized:s,resolve:r}});if(!t.isInitialized){if(Ey({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),s_(r_);if(window.monaco&&window.monaco.editor)return $M(window.monaco),t.resolve(window.monaco),s_(r_);zee(qee,Wee)(Gee)}return s_(r_)}function qee(t){return document.body.appendChild(t)}function Kee(t){var e=document.createElement("script");return t&&(e.src=t),e}function Wee(t){var e=If(function(s){var r=s.config,a=s.reject;return{config:r,reject:a}}),n=Kee("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=e.reject,n}function Gee(){var t=If(function(n){var s=n.config,r=n.resolve,a=n.reject;return{config:s,resolve:r,reject:a}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(n){var s=n.m||n;$M(s),t.resolve(s)},function(n){t.reject(n)})}function $M(t){If().monaco||Ey({monaco:t})}function Yee(){return If(function(t){var e=t.monaco;return e})}var r_=new Promise(function(t,e){return Ey({resolve:t,reject:e})}),HM={config:Vee,init:Fee,__getMonacoInstance:Yee},Xee={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},i_=Xee,Jee={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},Qee=Jee;function Zee({children:t}){return Rr.createElement("div",{style:Qee.container},t)}var ete=Zee,tte=ete;function nte({width:t,height:e,isEditorReady:n,loading:s,_ref:r,className:a,wrapperProps:o}){return Rr.createElement("section",{style:{...i_.wrapper,width:t,height:e},...o},!n&&Rr.createElement(tte,null,s),Rr.createElement("div",{ref:r,style:{...i_.fullWidth,...!n&&i_.hide},className:a}))}var ste=nte,UM=W.memo(ste);function rte(t){W.useEffect(t,[])}var VM=rte;function ite(t,e,n=!0){let s=W.useRef(!0);W.useEffect(s.current||!n?()=>{s.current=!1}:t,e)}var or=ite;function Ld(){}function jc(t,e,n,s){return ate(t,s)||lte(t,e,n,s)}function ate(t,e){return t.editor.getModel(FM(t,e))}function lte(t,e,n,s){return t.editor.createModel(e,n,s?FM(t,s):void 0)}function FM(t,e){return t.Uri.parse(e)}function ote({original:t,modified:e,language:n,originalLanguage:s,modifiedLanguage:r,originalModelPath:a,modifiedModelPath:o,keepCurrentOriginalModel:c=!1,keepCurrentModifiedModel:h=!1,theme:d="light",loading:g="Loading...",options:m={},height:v="100%",width:y="100%",className:x,wrapperProps:w={},beforeMount:S=Ld,onMount:k=Ld}){let[C,A]=W.useState(!1),[B,M]=W.useState(!0),T=W.useRef(null),H=W.useRef(null),$=W.useRef(null),G=W.useRef(k),z=W.useRef(S),Q=W.useRef(!1);VM(()=>{let q=HM.init();return q.then(P=>(H.current=P)&&M(!1)).catch(P=>P?.type!=="cancelation"&&console.error("Monaco initialization: error:",P)),()=>T.current?J():q.cancel()}),or(()=>{if(T.current&&H.current){let q=T.current.getOriginalEditor(),P=jc(H.current,t||"",s||n||"text",a||"");P!==q.getModel()&&q.setModel(P)}},[a],C),or(()=>{if(T.current&&H.current){let q=T.current.getModifiedEditor(),P=jc(H.current,e||"",r||n||"text",o||"");P!==q.getModel()&&q.setModel(P)}},[o],C),or(()=>{let q=T.current.getModifiedEditor();q.getOption(H.current.editor.EditorOption.readOnly)?q.setValue(e||""):e!==q.getValue()&&(q.executeEdits("",[{range:q.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),q.pushUndoStop())},[e],C),or(()=>{T.current?.getModel()?.original.setValue(t||"")},[t],C),or(()=>{let{original:q,modified:P}=T.current.getModel();H.current.editor.setModelLanguage(q,s||n||"text"),H.current.editor.setModelLanguage(P,r||n||"text")},[n,s,r],C),or(()=>{H.current?.editor.setTheme(d)},[d],C),or(()=>{T.current?.updateOptions(m)},[m],C);let F=W.useCallback(()=>{if(!H.current)return;z.current(H.current);let q=jc(H.current,t||"",s||n||"text",a||""),P=jc(H.current,e||"",r||n||"text",o||"");T.current?.setModel({original:q,modified:P})},[n,e,r,t,s,a,o]),K=W.useCallback(()=>{!Q.current&&$.current&&(T.current=H.current.editor.createDiffEditor($.current,{automaticLayout:!0,...m}),F(),H.current?.editor.setTheme(d),A(!0),Q.current=!0)},[m,d,F]);W.useEffect(()=>{C&&G.current(T.current,H.current)},[C]),W.useEffect(()=>{!B&&!C&&K()},[B,C,K]);function J(){let q=T.current?.getModel();c||q?.original?.dispose(),h||q?.modified?.dispose(),T.current?.dispose()}return Rr.createElement(UM,{width:y,height:v,isEditorReady:C,loading:g,_ref:$,className:x,wrapperProps:w})}var cte=ote;W.memo(cte);function ute(t){let e=W.useRef();return W.useEffect(()=>{e.current=t},[t]),e.current}var hte=ute,Nm=new Map;function dte({defaultValue:t,defaultLanguage:e,defaultPath:n,value:s,language:r,path:a,theme:o="light",line:c,loading:h="Loading...",options:d={},overrideServices:g={},saveViewState:m=!0,keepCurrentModel:v=!1,width:y="100%",height:x="100%",className:w,wrapperProps:S={},beforeMount:k=Ld,onMount:C=Ld,onChange:A,onValidate:B=Ld}){let[M,T]=W.useState(!1),[H,$]=W.useState(!0),G=W.useRef(null),z=W.useRef(null),Q=W.useRef(null),F=W.useRef(C),K=W.useRef(k),J=W.useRef(),q=W.useRef(s),P=hte(a),X=W.useRef(!1),U=W.useRef(!1);VM(()=>{let R=HM.init();return R.then(V=>(G.current=V)&&$(!1)).catch(V=>V?.type!=="cancelation"&&console.error("Monaco initialization: error:",V)),()=>z.current?O():R.cancel()}),or(()=>{let R=jc(G.current,t||s||"",e||r||"",a||n||"");R!==z.current?.getModel()&&(m&&Nm.set(P,z.current?.saveViewState()),z.current?.setModel(R),m&&z.current?.restoreViewState(Nm.get(a)))},[a],M),or(()=>{z.current?.updateOptions(d)},[d],M),or(()=>{!z.current||s===void 0||(z.current.getOption(G.current.editor.EditorOption.readOnly)?z.current.setValue(s):s!==z.current.getValue()&&(U.current=!0,z.current.executeEdits("",[{range:z.current.getModel().getFullModelRange(),text:s,forceMoveMarkers:!0}]),z.current.pushUndoStop(),U.current=!1))},[s],M),or(()=>{let R=z.current?.getModel();R&&r&&G.current?.editor.setModelLanguage(R,r)},[r],M),or(()=>{c!==void 0&&z.current?.revealLine(c)},[c],M),or(()=>{G.current?.editor.setTheme(o)},[o],M);let D=W.useCallback(()=>{if(!(!Q.current||!G.current)&&!X.current){K.current(G.current);let R=a||n,V=jc(G.current,s||t||"",e||r||"",R||"");z.current=G.current?.editor.create(Q.current,{model:V,automaticLayout:!0,...d},g),m&&z.current.restoreViewState(Nm.get(R)),G.current.editor.setTheme(o),c!==void 0&&z.current.revealLine(c),T(!0),X.current=!0}},[t,e,n,s,r,a,d,g,m,o,c]);W.useEffect(()=>{M&&F.current(z.current,G.current)},[M]),W.useEffect(()=>{!H&&!M&&D()},[H,M,D]),q.current=s,W.useEffect(()=>{M&&A&&(J.current?.dispose(),J.current=z.current?.onDidChangeModelContent(R=>{U.current||A(z.current.getValue(),R)}))},[M,A]),W.useEffect(()=>{if(M){let R=G.current.editor.onDidChangeMarkers(V=>{let E=z.current.getModel()?.uri;if(E&&V.find(Z=>Z.path===E.path)){let Z=G.current.editor.getModelMarkers({resource:E});B?.(Z)}});return()=>{R?.dispose()}}return()=>{}},[M,B]);function O(){J.current?.dispose(),v?m&&Nm.set(a,z.current.saveViewState()):z.current.getModel()?.dispose(),z.current.dispose()}return Rr.createElement(UM,{width:y,height:x,isEditorReady:M,loading:h,_ref:Q,className:w,wrapperProps:S})}var fte=dte,pte=W.memo(fte),mte=pte;const Q2=Symbol.for("yaml.alias"),Ww=Symbol.for("yaml.document"),sl=Symbol.for("yaml.map"),qM=Symbol.for("yaml.pair"),vi=Symbol.for("yaml.scalar"),Eu=Symbol.for("yaml.seq"),Dr=Symbol.for("yaml.node.type"),wo=t=>!!t&&typeof t=="object"&&t[Dr]===Q2,Pf=t=>!!t&&typeof t=="object"&&t[Dr]===Ww,zf=t=>!!t&&typeof t=="object"&&t[Dr]===sl,vn=t=>!!t&&typeof t=="object"&&t[Dr]===qM,Gt=t=>!!t&&typeof t=="object"&&t[Dr]===vi,$f=t=>!!t&&typeof t=="object"&&t[Dr]===Eu;function mn(t){if(t&&typeof t=="object")switch(t[Dr]){case sl:case Eu:return!0}return!1}function yn(t){if(t&&typeof t=="object")switch(t[Dr]){case Q2:case sl:case vi:case Eu:return!0}return!1}const KM=t=>(Gt(t)||mn(t))&&!!t.anchor,Ml=Symbol("break visit"),gte=Symbol("skip children"),Id=Symbol("remove node");function Au(t,e){const n=yte(e);Pf(t)?Tc(null,t.contents,n,Object.freeze([t]))===Id&&(t.contents=null):Tc(null,t,n,Object.freeze([]))}Au.BREAK=Ml;Au.SKIP=gte;Au.REMOVE=Id;function Tc(t,e,n,s){const r=vte(t,e,n,s);if(yn(r)||vn(r))return bte(t,s,r),Tc(t,r,n,s);if(typeof r!="symbol"){if(mn(e)){s=Object.freeze(s.concat(e));for(let a=0;a<e.items.length;++a){const o=Tc(a,e.items[a],n,s);if(typeof o=="number")a=o-1;else{if(o===Ml)return Ml;o===Id&&(e.items.splice(a,1),a-=1)}}}else if(vn(e)){s=Object.freeze(s.concat(e));const a=Tc("key",e.key,n,s);if(a===Ml)return Ml;a===Id&&(e.key=null);const o=Tc("value",e.value,n,s);if(o===Ml)return Ml;o===Id&&(e.value=null)}}return r}function yte(t){return typeof t=="object"&&(t.Collection||t.Node||t.Value)?Object.assign({Alias:t.Node,Map:t.Node,Scalar:t.Node,Seq:t.Node},t.Value&&{Map:t.Value,Scalar:t.Value,Seq:t.Value},t.Collection&&{Map:t.Collection,Seq:t.Collection},t):t}function vte(t,e,n,s){if(typeof n=="function")return n(t,e,s);if(zf(e))return n.Map?.(t,e,s);if($f(e))return n.Seq?.(t,e,s);if(vn(e))return n.Pair?.(t,e,s);if(Gt(e))return n.Scalar?.(t,e,s);if(wo(e))return n.Alias?.(t,e,s)}function bte(t,e,n){const s=e[e.length-1];if(mn(s))s.items[t]=n;else if(vn(s))t==="key"?s.key=n:s.value=n;else if(Pf(s))s.contents=n;else{const r=wo(s)?"alias":"scalar";throw new Error(`Cannot replace node with ${r} parent`)}}const _te={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},xte=t=>t.replace(/[!,[\]{}]/g,e=>_te[e]);class vs{constructor(e,n){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},vs.defaultYaml,e),this.tags=Object.assign({},vs.defaultTags,n)}clone(){const e=new vs(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new vs(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:vs.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},vs.defaultTags);break}return e}add(e,n){this.atNextDocument&&(this.yaml={explicit:vs.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},vs.defaultTags),this.atNextDocument=!1);const s=e.trim().split(/[ \t]+/),r=s.shift();switch(r){case"%TAG":{if(s.length!==2&&(n(0,"%TAG directive should contain exactly two parts"),s.length<2))return!1;const[a,o]=s;return this.tags[a]=o,!0}case"%YAML":{if(this.yaml.explicit=!0,s.length!==1)return n(0,"%YAML directive should contain exactly one part"),!1;const[a]=s;if(a==="1.1"||a==="1.2")return this.yaml.version=a,!0;{const o=/^\d+\.\d+$/.test(a);return n(6,`Unsupported YAML version ${a}`,o),!1}}default:return n(0,`Unknown directive ${r}`,!0),!1}}tagName(e,n){if(e==="!")return"!";if(e[0]!=="!")return n(`Not a valid tag: ${e}`),null;if(e[1]==="<"){const o=e.slice(2,-1);return o==="!"||o==="!!"?(n(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&n("Verbatim tags must end with a >"),o)}const[,s,r]=e.match(/^(.*!)([^!]*)$/s);r||n(`The ${e} tag has no suffix`);const a=this.tags[s];if(a)try{return a+decodeURIComponent(r)}catch(o){return n(String(o)),null}return s==="!"?e:(n(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[n,s]of Object.entries(this.tags))if(e.startsWith(s))return n+xte(e.substring(s.length));return e[0]==="!"?e:`!<${e}>`}toString(e){const n=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],s=Object.entries(this.tags);let r;if(e&&s.length>0&&yn(e.contents)){const a={};Au(e.contents,(o,c)=>{yn(c)&&c.tag&&(a[c.tag]=!0)}),r=Object.keys(a)}else r=[];for(const[a,o]of s)a==="!!"&&o==="tag:yaml.org,2002:"||(!e||r.some(c=>c.startsWith(o)))&&n.push(`%TAG ${a} ${o}`);return n.join(`
`)}}vs.defaultYaml={explicit:!1,version:"1.2"};vs.defaultTags={"!!":"tag:yaml.org,2002:"};function WM(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){const n=`Anchor must not contain whitespace or control characters: ${JSON.stringify(t)}`;throw new Error(n)}return!0}function GM(t){const e=new Set;return Au(t,{Value(n,s){s.anchor&&e.add(s.anchor)}}),e}function YM(t,e){for(let n=1;;++n){const s=`${t}${n}`;if(!e.has(s))return s}}function wte(t,e){const n=[],s=new Map;let r=null;return{onAnchor:a=>{n.push(a),r??(r=GM(t));const o=YM(e,r);return r.add(o),o},setAnchors:()=>{for(const a of n){const o=s.get(a);if(typeof o=="object"&&o.anchor&&(Gt(o.node)||mn(o.node)))o.node.anchor=o.anchor;else{const c=new Error("Failed to resolve repeated object (this should not happen)");throw c.source=a,c}}},sourceObjects:s}}function Oc(t,e,n,s){if(s&&typeof s=="object")if(Array.isArray(s))for(let r=0,a=s.length;r<a;++r){const o=s[r],c=Oc(t,s,String(r),o);c===void 0?delete s[r]:c!==o&&(s[r]=c)}else if(s instanceof Map)for(const r of Array.from(s.keys())){const a=s.get(r),o=Oc(t,s,r,a);o===void 0?s.delete(r):o!==a&&s.set(r,o)}else if(s instanceof Set)for(const r of Array.from(s)){const a=Oc(t,s,r,r);a===void 0?s.delete(r):a!==r&&(s.delete(r),s.add(a))}else for(const[r,a]of Object.entries(s)){const o=Oc(t,s,r,a);o===void 0?delete s[r]:o!==a&&(s[r]=o)}return t.call(e,n,s)}function Mr(t,e,n){if(Array.isArray(t))return t.map((s,r)=>Mr(s,String(r),n));if(t&&typeof t.toJSON=="function"){if(!n||!KM(t))return t.toJSON(e,n);const s={aliasCount:0,count:1,res:void 0};n.anchors.set(t,s),n.onCreate=a=>{s.res=a,delete n.onCreate};const r=t.toJSON(e,n);return n.onCreate&&n.onCreate(r),r}return typeof t=="bigint"&&!n?.keep?Number(t):t}class Z2{constructor(e){Object.defineProperty(this,Dr,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:n,maxAliasCount:s,onAnchor:r,reviver:a}={}){if(!Pf(e))throw new TypeError("A document argument is required");const o={anchors:new Map,doc:e,keep:!0,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof s=="number"?s:100},c=Mr(this,"",o);if(typeof r=="function")for(const{count:h,res:d}of o.anchors.values())r(d,h);return typeof a=="function"?Oc(a,{"":c},"",c):c}}class ek extends Z2{constructor(e){super(Q2),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e,n){let s;n?.aliasResolveCache?s=n.aliasResolveCache:(s=[],Au(e,{Node:(a,o)=>{(wo(o)||KM(o))&&s.push(o)}}),n&&(n.aliasResolveCache=s));let r;for(const a of s){if(a===this)break;a.anchor===this.source&&(r=a)}return r}toJSON(e,n){if(!n)return{source:this.source};const{anchors:s,doc:r,maxAliasCount:a}=n,o=this.resolve(r,n);if(!o){const h=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(h)}let c=s.get(o);if(c||(Mr(o,null,n),c=s.get(o)),c?.res===void 0){const h="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(h)}if(a>=0&&(c.count+=1,c.aliasCount===0&&(c.aliasCount=e0(r,o,s)),c.count*c.aliasCount>a)){const h="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(h)}return c.res}toString(e,n,s){const r=`*${this.source}`;if(e){if(WM(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const a=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(a)}if(e.implicitKey)return`${r} `}return r}}function e0(t,e,n){if(wo(e)){const s=e.resolve(t),r=n&&s&&n.get(s);return r?r.count*r.aliasCount:0}else if(mn(e)){let s=0;for(const r of e.items){const a=e0(t,r,n);a>s&&(s=a)}return s}else if(vn(e)){const s=e0(t,e.key,n),r=e0(t,e.value,n);return Math.max(s,r)}return 1}const XM=t=>!t||typeof t!="function"&&typeof t!="object";class ot extends Z2{constructor(e){super(vi),this.value=e}toJSON(e,n){return n?.keep?this.value:Mr(this.value,e,n)}toString(){return String(this.value)}}ot.BLOCK_FOLDED="BLOCK_FOLDED";ot.BLOCK_LITERAL="BLOCK_LITERAL";ot.PLAIN="PLAIN";ot.QUOTE_DOUBLE="QUOTE_DOUBLE";ot.QUOTE_SINGLE="QUOTE_SINGLE";const Ste="tag:yaml.org,2002:";function kte(t,e,n){if(e){const s=n.filter(a=>a.tag===e),r=s.find(a=>!a.format)??s[0];if(!r)throw new Error(`Tag ${e} not found`);return r}return n.find(s=>s.identify?.(t)&&!s.format)}function lf(t,e,n){if(Pf(t)&&(t=t.contents),yn(t))return t;if(vn(t)){const m=n.schema[sl].createNode?.(n.schema,null,n);return m.items.push(t),m}(t instanceof String||t instanceof Number||t instanceof Boolean||typeof BigInt<"u"&&t instanceof BigInt)&&(t=t.valueOf());const{aliasDuplicateObjects:s,onAnchor:r,onTagObj:a,schema:o,sourceObjects:c}=n;let h;if(s&&t&&typeof t=="object"){if(h=c.get(t),h)return h.anchor??(h.anchor=r(t)),new ek(h.anchor);h={anchor:null,node:null},c.set(t,h)}e?.startsWith("!!")&&(e=Ste+e.slice(2));let d=kte(t,e,o.tags);if(!d){if(t&&typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object"){const m=new ot(t);return h&&(h.node=m),m}d=t instanceof Map?o[sl]:Symbol.iterator in Object(t)?o[Eu]:o[sl]}a&&(a(d),delete n.onTagObj);const g=d?.createNode?d.createNode(n.schema,t,n):typeof d?.nodeClass?.from=="function"?d.nodeClass.from(n.schema,t,n):new ot(t);return e?g.tag=e:d.default||(g.tag=d.tag),h&&(h.node=g),g}function lg(t,e,n){let s=n;for(let r=e.length-1;r>=0;--r){const a=e[r];if(typeof a=="number"&&Number.isInteger(a)&&a>=0){const o=[];o[a]=s,s=o}else s=new Map([[a,s]])}return lf(s,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}const vd=t=>t==null||typeof t=="object"&&!!t[Symbol.iterator]().next().done;class JM extends Z2{constructor(e,n){super(e),Object.defineProperty(this,"schema",{value:n,configurable:!0,enumerable:!1,writable:!0})}clone(e){const n=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(n.schema=e),n.items=n.items.map(s=>yn(s)||vn(s)?s.clone(e):s),this.range&&(n.range=this.range.slice()),n}addIn(e,n){if(vd(e))this.add(n);else{const[s,...r]=e,a=this.get(s,!0);if(mn(a))a.addIn(r,n);else if(a===void 0&&this.schema)this.set(s,lg(this.schema,r,n));else throw new Error(`Expected YAML collection at ${s}. Remaining path: ${r}`)}}deleteIn(e){const[n,...s]=e;if(s.length===0)return this.delete(n);const r=this.get(n,!0);if(mn(r))return r.deleteIn(s);throw new Error(`Expected YAML collection at ${n}. Remaining path: ${s}`)}getIn(e,n){const[s,...r]=e,a=this.get(s,!0);return r.length===0?!n&&Gt(a)?a.value:a:mn(a)?a.getIn(r,n):void 0}hasAllNullValues(e){return this.items.every(n=>{if(!vn(n))return!1;const s=n.value;return s==null||e&&Gt(s)&&s.value==null&&!s.commentBefore&&!s.comment&&!s.tag})}hasIn(e){const[n,...s]=e;if(s.length===0)return this.has(n);const r=this.get(n,!0);return mn(r)?r.hasIn(s):!1}setIn(e,n){const[s,...r]=e;if(r.length===0)this.set(s,n);else{const a=this.get(s,!0);if(mn(a))a.setIn(r,n);else if(a===void 0&&this.schema)this.set(s,lg(this.schema,r,n));else throw new Error(`Expected YAML collection at ${s}. Remaining path: ${r}`)}}}const Cte=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function Ji(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}const Hl=(t,e,n)=>t.endsWith(`
`)?Ji(n,e):n.includes(`
`)?`
`+Ji(n,e):(t.endsWith(" ")?"":" ")+n,QM="flow",Gw="block",t0="quoted";function Ay(t,e,n="flow",{indentAtStart:s,lineWidth:r=80,minContentWidth:a=20,onFold:o,onOverflow:c}={}){if(!r||r<0)return t;r<a&&(a=0);const h=Math.max(1+a,1+r-e.length);if(t.length<=h)return t;const d=[],g={};let m=r-e.length;typeof s=="number"&&(s>r-Math.max(2,a)?d.push(0):m=r-s);let v,y,x=!1,w=-1,S=-1,k=-1;n===Gw&&(w=Rj(t,w,e.length),w!==-1&&(m=w+h));for(let A;A=t[w+=1];){if(n===t0&&A==="\\"){switch(S=w,t[w+1]){case"x":w+=3;break;case"u":w+=5;break;case"U":w+=9;break;default:w+=1}k=w}if(A===`
`)n===Gw&&(w=Rj(t,w,e.length)),m=w+e.length+h,v=void 0;else{if(A===" "&&y&&y!==" "&&y!==`
`&&y!=="	"){const B=t[w+1];B&&B!==" "&&B!==`
`&&B!=="	"&&(v=w)}if(w>=m)if(v)d.push(v),m=v+h,v=void 0;else if(n===t0){for(;y===" "||y==="	";)y=A,A=t[w+=1],x=!0;const B=w>k+1?w-2:S-1;if(g[B])return t;d.push(B),g[B]=!0,m=B+h,v=void 0}else x=!0}y=A}if(x&&c&&c(),d.length===0)return t;o&&o();let C=t.slice(0,d[0]);for(let A=0;A<d.length;++A){const B=d[A],M=d[A+1]||t.length;B===0?C=`
${e}${t.slice(0,M)}`:(n===t0&&g[B]&&(C+=`${t[B]}\\`),C+=`
${e}${t.slice(B+1,M)}`)}return C}function Rj(t,e,n){let s=e,r=e+1,a=t[r];for(;a===" "||a==="	";)if(e<r+n)a=t[++e];else{do a=t[++e];while(a&&a!==`
`);s=e,r=e+1,a=t[r]}return s}const jy=(t,e)=>({indentAtStart:e?t.indent.length:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),Ty=t=>/^(%|---|\.\.\.)/m.test(t);function Nte(t,e,n){if(!e||e<0)return!1;const s=e-n,r=t.length;if(r<=s)return!1;for(let a=0,o=0;a<r;++a)if(t[a]===`
`){if(a-o>s)return!0;if(o=a+1,r-o<=s)return!1}return!0}function Pd(t,e){const n=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return n;const{implicitKey:s}=e,r=e.options.doubleQuotedMinMultiLineLength,a=e.indent||(Ty(t)?"  ":"");let o="",c=0;for(let h=0,d=n[h];d;d=n[++h])if(d===" "&&n[h+1]==="\\"&&n[h+2]==="n"&&(o+=n.slice(c,h)+"\\ ",h+=1,c=h,d="\\"),d==="\\")switch(n[h+1]){case"u":{o+=n.slice(c,h);const g=n.substr(h+2,4);switch(g){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:g.substr(0,2)==="00"?o+="\\x"+g.substr(2):o+=n.substr(h,6)}h+=5,c=h+1}break;case"n":if(s||n[h+2]==='"'||n.length<r)h+=1;else{for(o+=n.slice(c,h)+`

`;n[h+2]==="\\"&&n[h+3]==="n"&&n[h+4]!=='"';)o+=`
`,h+=2;o+=a,n[h+2]===" "&&(o+="\\"),h+=1,c=h+1}break;default:h+=1}return o=c?o+n.slice(c):n,s?o:Ay(o,a,t0,jy(e,!1))}function Yw(t,e){if(e.options.singleQuote===!1||e.implicitKey&&t.includes(`
`)||/[ \t]\n|\n[ \t]/.test(t))return Pd(t,e);const n=e.indent||(Ty(t)?"  ":""),s="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return e.implicitKey?s:Ay(s,n,QM,jy(e,!1))}function Rc(t,e){const{singleQuote:n}=e.options;let s;if(n===!1)s=Pd;else{const r=t.includes('"'),a=t.includes("'");r&&!a?s=Yw:a&&!r?s=Pd:s=n?Yw:Pd}return s(t,e)}let Xw;try{Xw=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{Xw=/\n+(?!\n|$)/g}function n0({comment:t,type:e,value:n},s,r,a){const{blockQuote:o,commentString:c,lineWidth:h}=s.options;if(!o||/\n[\t ]+$/.test(n))return Rc(n,s);const d=s.indent||(s.forceBlockIndent||Ty(n)?"  ":""),g=o==="literal"?!0:o==="folded"||e===ot.BLOCK_FOLDED?!1:e===ot.BLOCK_LITERAL?!0:!Nte(n,h,d.length);if(!n)return g?`|
`:`>
`;let m,v;for(v=n.length;v>0;--v){const M=n[v-1];if(M!==`
`&&M!=="	"&&M!==" ")break}let y=n.substring(v);const x=y.indexOf(`
`);x===-1?m="-":n===y||x!==y.length-1?(m="+",a&&a()):m="",y&&(n=n.slice(0,-y.length),y[y.length-1]===`
`&&(y=y.slice(0,-1)),y=y.replace(Xw,`$&${d}`));let w=!1,S,k=-1;for(S=0;S<n.length;++S){const M=n[S];if(M===" ")w=!0;else if(M===`
`)k=S;else break}let C=n.substring(0,k<S?k+1:S);C&&(n=n.substring(C.length),C=C.replace(/\n+/g,`$&${d}`));let B=(w?d?"2":"1":"")+m;if(t&&(B+=" "+c(t.replace(/ ?[\r\n]+/g," ")),r&&r()),!g){const M=n.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${d}`);let T=!1;const H=jy(s,!0);o!=="folded"&&e!==ot.BLOCK_FOLDED&&(H.onOverflow=()=>{T=!0});const $=Ay(`${C}${M}${y}`,d,Gw,H);if(!T)return`>${B}
${d}${$}`}return n=n.replace(/\n+/g,`$&${d}`),`|${B}
${d}${C}${n}${y}`}function Ete(t,e,n,s){const{type:r,value:a}=t,{actualString:o,implicitKey:c,indent:h,indentStep:d,inFlow:g}=e;if(c&&a.includes(`
`)||g&&/[[\]{},]/.test(a))return Rc(a,e);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(a))return c||g||!a.includes(`
`)?Rc(a,e):n0(t,e,n,s);if(!c&&!g&&r!==ot.PLAIN&&a.includes(`
`))return n0(t,e,n,s);if(Ty(a)){if(h==="")return e.forceBlockIndent=!0,n0(t,e,n,s);if(c&&h===d)return Rc(a,e)}const m=a.replace(/\n+/g,`$&
${h}`);if(o){const v=w=>w.default&&w.tag!=="tag:yaml.org,2002:str"&&w.test?.test(m),{compat:y,tags:x}=e.doc.schema;if(x.some(v)||y?.some(v))return Rc(a,e)}return c?m:Ay(m,h,QM,jy(e,!1))}function tk(t,e,n,s){const{implicitKey:r,inFlow:a}=e,o=typeof t.value=="string"?t:Object.assign({},t,{value:String(t.value)});let{type:c}=t;c!==ot.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)&&(c=ot.QUOTE_DOUBLE);const h=g=>{switch(g){case ot.BLOCK_FOLDED:case ot.BLOCK_LITERAL:return r||a?Rc(o.value,e):n0(o,e,n,s);case ot.QUOTE_DOUBLE:return Pd(o.value,e);case ot.QUOTE_SINGLE:return Yw(o.value,e);case ot.PLAIN:return Ete(o,e,n,s);default:return null}};let d=h(c);if(d===null){const{defaultKeyType:g,defaultStringType:m}=e.options,v=r&&g||m;if(d=h(v),d===null)throw new Error(`Unsupported default string type ${v}`)}return d}function ZM(t,e){const n=Object.assign({blockQuote:!0,commentString:Cte,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e);let s;switch(n.collectionStyle){case"block":s=!1;break;case"flow":s=!0;break;default:s=null}return{anchors:new Set,doc:t,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:typeof n.indent=="number"?" ".repeat(n.indent):"  ",inFlow:s,options:n}}function Ate(t,e){if(e.tag){const r=t.filter(a=>a.tag===e.tag);if(r.length>0)return r.find(a=>a.format===e.format)??r[0]}let n,s;if(Gt(e)){s=e.value;let r=t.filter(a=>a.identify?.(s));if(r.length>1){const a=r.filter(o=>o.test);a.length>0&&(r=a)}n=r.find(a=>a.format===e.format)??r.find(a=>!a.format)}else s=e,n=t.find(r=>r.nodeClass&&s instanceof r.nodeClass);if(!n){const r=s?.constructor?.name??(s===null?"null":typeof s);throw new Error(`Tag not resolved for ${r} value`)}return n}function jte(t,e,{anchors:n,doc:s}){if(!s.directives)return"";const r=[],a=(Gt(t)||mn(t))&&t.anchor;a&&WM(a)&&(n.add(a),r.push(`&${a}`));const o=t.tag??(e.default?null:e.tag);return o&&r.push(s.directives.tagString(o)),r.join(" ")}function su(t,e,n,s){if(vn(t))return t.toString(e,n,s);if(wo(t)){if(e.doc.directives)return t.toString(e);if(e.resolvedAliases?.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let r;const a=yn(t)?t:e.doc.createNode(t,{onTagObj:h=>r=h});r??(r=Ate(e.doc.schema.tags,a));const o=jte(a,r,e);o.length>0&&(e.indentAtStart=(e.indentAtStart??0)+o.length+1);const c=typeof r.stringify=="function"?r.stringify(a,e,n,s):Gt(a)?tk(a,e,n,s):a.toString(e,n,s);return o?Gt(a)||c[0]==="{"||c[0]==="["?`${o} ${c}`:`${o}
${e.indent}${c}`:c}function Tte({key:t,value:e},n,s,r){const{allNullValues:a,doc:o,indent:c,indentStep:h,options:{commentString:d,indentSeq:g,simpleKeys:m}}=n;let v=yn(t)&&t.comment||null;if(m){if(v)throw new Error("With simple keys, key nodes cannot have comments");if(mn(t)||!yn(t)&&typeof t=="object"){const H="With simple keys, collection cannot be used as a key value";throw new Error(H)}}let y=!m&&(!t||v&&e==null&&!n.inFlow||mn(t)||(Gt(t)?t.type===ot.BLOCK_FOLDED||t.type===ot.BLOCK_LITERAL:typeof t=="object"));n=Object.assign({},n,{allNullValues:!1,implicitKey:!y&&(m||!a),indent:c+h});let x=!1,w=!1,S=su(t,n,()=>x=!0,()=>w=!0);if(!y&&!n.inFlow&&S.length>1024){if(m)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");y=!0}if(n.inFlow){if(a||e==null)return x&&s&&s(),S===""?"?":y?`? ${S}`:S}else if(a&&!m||e==null&&y)return S=`? ${S}`,v&&!x?S+=Hl(S,n.indent,d(v)):w&&r&&r(),S;x&&(v=null),y?(v&&(S+=Hl(S,n.indent,d(v))),S=`? ${S}
${c}:`):(S=`${S}:`,v&&(S+=Hl(S,n.indent,d(v))));let k,C,A;yn(e)?(k=!!e.spaceBefore,C=e.commentBefore,A=e.comment):(k=!1,C=null,A=null,e&&typeof e=="object"&&(e=o.createNode(e))),n.implicitKey=!1,!y&&!v&&Gt(e)&&(n.indentAtStart=S.length+1),w=!1,!g&&h.length>=2&&!n.inFlow&&!y&&$f(e)&&!e.flow&&!e.tag&&!e.anchor&&(n.indent=n.indent.substring(2));let B=!1;const M=su(e,n,()=>B=!0,()=>w=!0);let T=" ";if(v||k||C){if(T=k?`
`:"",C){const H=d(C);T+=`
${Ji(H,n.indent)}`}M===""&&!n.inFlow?T===`
`&&A&&(T=`

`):T+=`
${n.indent}`}else if(!y&&mn(e)){const H=M[0],$=M.indexOf(`
`),G=$!==-1,z=n.inFlow??e.flow??e.items.length===0;if(G||!z){let Q=!1;if(G&&(H==="&"||H==="!")){let F=M.indexOf(" ");H==="&"&&F!==-1&&F<$&&M[F+1]==="!"&&(F=M.indexOf(" ",F+1)),(F===-1||$<F)&&(Q=!0)}Q||(T=`
${n.indent}`)}}else(M===""||M[0]===`
`)&&(T="");return S+=T+M,n.inFlow?B&&s&&s():A&&!B?S+=Hl(S,n.indent,d(A)):w&&r&&r(),S}function eD(t,e){(t==="debug"||t==="warn")&&console.warn(e)}const Em="<<",Zi={identify:t=>t===Em||typeof t=="symbol"&&t.description===Em,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new ot(Symbol(Em)),{addToJSMap:tD}),stringify:()=>Em},Ote=(t,e)=>(Zi.identify(e)||Gt(e)&&(!e.type||e.type===ot.PLAIN)&&Zi.identify(e.value))&&t?.doc.schema.tags.some(n=>n.tag===Zi.tag&&n.default);function tD(t,e,n){if(n=t&&wo(n)?n.resolve(t.doc):n,$f(n))for(const s of n.items)a_(t,e,s);else if(Array.isArray(n))for(const s of n)a_(t,e,s);else a_(t,e,n)}function a_(t,e,n){const s=t&&wo(n)?n.resolve(t.doc):n;if(!zf(s))throw new Error("Merge sources must be maps or map aliases");const r=s.toJSON(null,t,Map);for(const[a,o]of r)e instanceof Map?e.has(a)||e.set(a,o):e instanceof Set?e.add(a):Object.prototype.hasOwnProperty.call(e,a)||Object.defineProperty(e,a,{value:o,writable:!0,enumerable:!0,configurable:!0});return e}function nD(t,e,{key:n,value:s}){if(yn(n)&&n.addToJSMap)n.addToJSMap(t,e,s);else if(Ote(t,n))tD(t,e,s);else{const r=Mr(n,"",t);if(e instanceof Map)e.set(r,Mr(s,r,t));else if(e instanceof Set)e.add(r);else{const a=Rte(n,r,t),o=Mr(s,a,t);a in e?Object.defineProperty(e,a,{value:o,writable:!0,enumerable:!0,configurable:!0}):e[a]=o}}return e}function Rte(t,e,n){if(e===null)return"";if(typeof e!="object")return String(e);if(yn(t)&&n?.doc){const s=ZM(n.doc,{});s.anchors=new Set;for(const a of n.anchors.keys())s.anchors.add(a.anchor);s.inFlow=!0,s.inStringifyKey=!0;const r=t.toString(s);if(!n.mapKeyWarned){let a=JSON.stringify(r);a.length>40&&(a=a.substring(0,36)+'..."'),eD(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${a}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return r}return JSON.stringify(e)}function nk(t,e,n){const s=lf(t,void 0,n),r=lf(e,void 0,n);return new ws(s,r)}class ws{constructor(e,n=null){Object.defineProperty(this,Dr,{value:qM}),this.key=e,this.value=n}clone(e){let{key:n,value:s}=this;return yn(n)&&(n=n.clone(e)),yn(s)&&(s=s.clone(e)),new ws(n,s)}toJSON(e,n){const s=n?.mapAsMap?new Map:{};return nD(n,s,this)}toString(e,n,s){return e?.doc?Tte(this,e,n,s):JSON.stringify(this)}}function sD(t,e,n){return(e.inFlow??t.flow?Mte:Bte)(t,e,n)}function Bte({comment:t,items:e},n,{blockItemPrefix:s,flowChars:r,itemIndent:a,onChompKeep:o,onComment:c}){const{indent:h,options:{commentString:d}}=n,g=Object.assign({},n,{indent:a,type:null});let m=!1;const v=[];for(let x=0;x<e.length;++x){const w=e[x];let S=null;if(yn(w))!m&&w.spaceBefore&&v.push(""),og(n,v,w.commentBefore,m),w.comment&&(S=w.comment);else if(vn(w)){const C=yn(w.key)?w.key:null;C&&(!m&&C.spaceBefore&&v.push(""),og(n,v,C.commentBefore,m))}m=!1;let k=su(w,g,()=>S=null,()=>m=!0);S&&(k+=Hl(k,a,d(S))),m&&S&&(m=!1),v.push(s+k)}let y;if(v.length===0)y=r.start+r.end;else{y=v[0];for(let x=1;x<v.length;++x){const w=v[x];y+=w?`
${h}${w}`:`
`}}return t?(y+=`
`+Ji(d(t),h),c&&c()):m&&o&&o(),y}function Mte({items:t},e,{flowChars:n,itemIndent:s}){const{indent:r,indentStep:a,flowCollectionPadding:o,options:{commentString:c}}=e;s+=a;const h=Object.assign({},e,{indent:s,inFlow:!0,type:null});let d=!1,g=0;const m=[];for(let x=0;x<t.length;++x){const w=t[x];let S=null;if(yn(w))w.spaceBefore&&m.push(""),og(e,m,w.commentBefore,!1),w.comment&&(S=w.comment);else if(vn(w)){const C=yn(w.key)?w.key:null;C&&(C.spaceBefore&&m.push(""),og(e,m,C.commentBefore,!1),C.comment&&(d=!0));const A=yn(w.value)?w.value:null;A?(A.comment&&(S=A.comment),A.commentBefore&&(d=!0)):w.value==null&&C?.comment&&(S=C.comment)}S&&(d=!0);let k=su(w,h,()=>S=null);x<t.length-1&&(k+=","),S&&(k+=Hl(k,s,c(S))),!d&&(m.length>g||k.includes(`
`))&&(d=!0),m.push(k),g=m.length}const{start:v,end:y}=n;if(m.length===0)return v+y;if(!d){const x=m.reduce((w,S)=>w+S.length+2,2);d=e.options.lineWidth>0&&x>e.options.lineWidth}if(d){let x=v;for(const w of m)x+=w?`
${a}${r}${w}`:`
`;return`${x}
${r}${y}`}else return`${v}${o}${m.join(" ")}${o}${y}`}function og({indent:t,options:{commentString:e}},n,s,r){if(s&&r&&(s=s.replace(/^\n+/,"")),s){const a=Ji(e(s),t);n.push(a.trimStart())}}function Ul(t,e){const n=Gt(e)?e.value:e;for(const s of t)if(vn(s)&&(s.key===e||s.key===n||Gt(s.key)&&s.key.value===n))return s}class jr extends JM{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(sl,e),this.items=[]}static from(e,n,s){const{keepUndefined:r,replacer:a}=s,o=new this(e),c=(h,d)=>{if(typeof a=="function")d=a.call(n,h,d);else if(Array.isArray(a)&&!a.includes(h))return;(d!==void 0||r)&&o.items.push(nk(h,d,s))};if(n instanceof Map)for(const[h,d]of n)c(h,d);else if(n&&typeof n=="object")for(const h of Object.keys(n))c(h,n[h]);return typeof e.sortMapEntries=="function"&&o.items.sort(e.sortMapEntries),o}add(e,n){let s;vn(e)?s=e:!e||typeof e!="object"||!("key"in e)?s=new ws(e,e?.value):s=new ws(e.key,e.value);const r=Ul(this.items,s.key),a=this.schema?.sortMapEntries;if(r){if(!n)throw new Error(`Key ${s.key} already set`);Gt(r.value)&&XM(s.value)?r.value.value=s.value:r.value=s.value}else if(a){const o=this.items.findIndex(c=>a(s,c)<0);o===-1?this.items.push(s):this.items.splice(o,0,s)}else this.items.push(s)}delete(e){const n=Ul(this.items,e);return n?this.items.splice(this.items.indexOf(n),1).length>0:!1}get(e,n){const r=Ul(this.items,e)?.value;return(!n&&Gt(r)?r.value:r)??void 0}has(e){return!!Ul(this.items,e)}set(e,n){this.add(new ws(e,n),!0)}toJSON(e,n,s){const r=s?new s:n?.mapAsMap?new Map:{};n?.onCreate&&n.onCreate(r);for(const a of this.items)nD(n,r,a);return r}toString(e,n,s){if(!e)return JSON.stringify(this);for(const r of this.items)if(!vn(r))throw new Error(`Map items must all be pairs; found ${JSON.stringify(r)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),sD(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:s,onComment:n})}}const ju={collection:"map",default:!0,nodeClass:jr,tag:"tag:yaml.org,2002:map",resolve(t,e){return zf(t)||e("Expected a mapping for this tag"),t},createNode:(t,e,n)=>jr.from(t,e,n)};class po extends JM{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(Eu,e),this.items=[]}add(e){this.items.push(e)}delete(e){const n=Am(e);return typeof n!="number"?!1:this.items.splice(n,1).length>0}get(e,n){const s=Am(e);if(typeof s!="number")return;const r=this.items[s];return!n&&Gt(r)?r.value:r}has(e){const n=Am(e);return typeof n=="number"&&n<this.items.length}set(e,n){const s=Am(e);if(typeof s!="number")throw new Error(`Expected a valid index, not ${e}.`);const r=this.items[s];Gt(r)&&XM(n)?r.value=n:this.items[s]=n}toJSON(e,n){const s=[];n?.onCreate&&n.onCreate(s);let r=0;for(const a of this.items)s.push(Mr(a,String(r++),n));return s}toString(e,n,s){return e?sD(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:s,onComment:n}):JSON.stringify(this)}static from(e,n,s){const{replacer:r}=s,a=new this(e);if(n&&Symbol.iterator in Object(n)){let o=0;for(let c of n){if(typeof r=="function"){const h=n instanceof Set?c:String(o++);c=r.call(n,h,c)}a.items.push(lf(c,void 0,s))}}return a}}function Am(t){let e=Gt(t)?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}const Tu={collection:"seq",default:!0,nodeClass:po,tag:"tag:yaml.org,2002:seq",resolve(t,e){return $f(t)||e("Expected a sequence for this tag"),t},createNode:(t,e,n)=>po.from(t,e,n)},Oy={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify(t,e,n,s){return e=Object.assign({actualString:!0},e),tk(t,e,n,s)}},Ry={identify:t=>t==null,createNode:()=>new ot(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new ot(null),stringify:({source:t},e)=>typeof t=="string"&&Ry.test.test(t)?t:e.options.nullStr},sk={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new ot(t[0]==="t"||t[0]==="T"),stringify({source:t,value:e},n){if(t&&sk.test.test(t)){const s=t[0]==="t"||t[0]==="T";if(e===s)return t}return e?n.options.trueStr:n.options.falseStr}};function Jr({format:t,minFractionDigits:e,tag:n,value:s}){if(typeof s=="bigint")return String(s);const r=typeof s=="number"?s:Number(s);if(!isFinite(r))return isNaN(r)?".nan":r<0?"-.inf":".inf";let a=Object.is(s,-0)?"-0":JSON.stringify(s);if(!t&&e&&(!n||n==="tag:yaml.org,2002:float")&&/^\d/.test(a)){let o=a.indexOf(".");o<0&&(o=a.length,a+=".");let c=e-(a.length-o-1);for(;c-- >0;)a+="0"}return a}const rD={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Jr},iD={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():Jr(t)}},aD={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){const e=new ot(parseFloat(t)),n=t.indexOf(".");return n!==-1&&t[t.length-1]==="0"&&(e.minFractionDigits=t.length-n-1),e},stringify:Jr},By=t=>typeof t=="bigint"||Number.isInteger(t),rk=(t,e,n,{intAsBigInt:s})=>s?BigInt(t):parseInt(t.substring(e),n);function lD(t,e,n){const{value:s}=t;return By(s)&&s>=0?n+s.toString(e):Jr(t)}const oD={identify:t=>By(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,n)=>rk(t,2,8,n),stringify:t=>lD(t,8,"0o")},cD={identify:By,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,n)=>rk(t,0,10,n),stringify:Jr},uD={identify:t=>By(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,n)=>rk(t,2,16,n),stringify:t=>lD(t,16,"0x")},Dte=[ju,Tu,Oy,Ry,sk,oD,cD,uD,rD,iD,aD];function Bj(t){return typeof t=="bigint"||Number.isInteger(t)}const jm=({value:t})=>JSON.stringify(t),Lte=[{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:jm},{identify:t=>t==null,createNode:()=>new ot(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:jm},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:t=>t==="true",stringify:jm},{identify:Bj,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:n})=>n?BigInt(t):parseInt(t,10),stringify:({value:t})=>Bj(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:jm}],Ite={default:!0,tag:"",test:/^/,resolve(t,e){return e(`Unresolved plain scalar ${JSON.stringify(t)}`),t}},Pte=[ju,Tu].concat(Lte,Ite),ik={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if(typeof atob=="function"){const n=atob(t.replace(/[\n\r]/g,"")),s=new Uint8Array(n.length);for(let r=0;r<n.length;++r)s[r]=n.charCodeAt(r);return s}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:n},s,r,a){if(!n)return"";const o=n;let c;if(typeof btoa=="function"){let h="";for(let d=0;d<o.length;++d)h+=String.fromCharCode(o[d]);c=btoa(h)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e??(e=ot.BLOCK_LITERAL),e!==ot.QUOTE_DOUBLE){const h=Math.max(s.options.lineWidth-s.indent.length,s.options.minContentWidth),d=Math.ceil(c.length/h),g=new Array(d);for(let m=0,v=0;m<d;++m,v+=h)g[m]=c.substr(v,h);c=g.join(e===ot.BLOCK_LITERAL?`
`:" ")}return tk({comment:t,type:e,value:c},s,r,a)}};function hD(t,e){if($f(t))for(let n=0;n<t.items.length;++n){let s=t.items[n];if(!vn(s)){if(zf(s)){s.items.length>1&&e("Each pair must have its own sequence indicator");const r=s.items[0]||new ws(new ot(null));if(s.commentBefore&&(r.key.commentBefore=r.key.commentBefore?`${s.commentBefore}
${r.key.commentBefore}`:s.commentBefore),s.comment){const a=r.value??r.key;a.comment=a.comment?`${s.comment}
${a.comment}`:s.comment}s=r}t.items[n]=vn(s)?s:new ws(s)}}else e("Expected a sequence for this tag");return t}function dD(t,e,n){const{replacer:s}=n,r=new po(t);r.tag="tag:yaml.org,2002:pairs";let a=0;if(e&&Symbol.iterator in Object(e))for(let o of e){typeof s=="function"&&(o=s.call(e,String(a++),o));let c,h;if(Array.isArray(o))if(o.length===2)c=o[0],h=o[1];else throw new TypeError(`Expected [key, value] tuple: ${o}`);else if(o&&o instanceof Object){const d=Object.keys(o);if(d.length===1)c=d[0],h=o[c];else throw new TypeError(`Expected tuple with one key, not ${d.length} keys`)}else c=o;r.items.push(nk(c,h,n))}return r}const ak={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:hD,createNode:dD};class zc extends po{constructor(){super(),this.add=jr.prototype.add.bind(this),this.delete=jr.prototype.delete.bind(this),this.get=jr.prototype.get.bind(this),this.has=jr.prototype.has.bind(this),this.set=jr.prototype.set.bind(this),this.tag=zc.tag}toJSON(e,n){if(!n)return super.toJSON(e);const s=new Map;n?.onCreate&&n.onCreate(s);for(const r of this.items){let a,o;if(vn(r)?(a=Mr(r.key,"",n),o=Mr(r.value,a,n)):a=Mr(r,"",n),s.has(a))throw new Error("Ordered maps must not include duplicate keys");s.set(a,o)}return s}static from(e,n,s){const r=dD(e,n,s),a=new this;return a.items=r.items,a}}zc.tag="tag:yaml.org,2002:omap";const lk={collection:"seq",identify:t=>t instanceof Map,nodeClass:zc,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){const n=hD(t,e),s=[];for(const{key:r}of n.items)Gt(r)&&(s.includes(r.value)?e(`Ordered maps must not include duplicate keys: ${r.value}`):s.push(r.value));return Object.assign(new zc,n)},createNode:(t,e,n)=>zc.from(t,e,n)};function fD({value:t,source:e},n){return e&&(t?pD:mD).test.test(e)?e:t?n.options.trueStr:n.options.falseStr}const pD={identify:t=>t===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new ot(!0),stringify:fD},mD={identify:t=>t===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new ot(!1),stringify:fD},zte={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Jr},$te={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():Jr(t)}},Hte={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){const e=new ot(parseFloat(t.replace(/_/g,""))),n=t.indexOf(".");if(n!==-1){const s=t.substring(n+1).replace(/_/g,"");s[s.length-1]==="0"&&(e.minFractionDigits=s.length)}return e},stringify:Jr},Hf=t=>typeof t=="bigint"||Number.isInteger(t);function My(t,e,n,{intAsBigInt:s}){const r=t[0];if((r==="-"||r==="+")&&(e+=1),t=t.substring(e).replace(/_/g,""),s){switch(n){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`;break}const o=BigInt(t);return r==="-"?BigInt(-1)*o:o}const a=parseInt(t,n);return r==="-"?-1*a:a}function ok(t,e,n){const{value:s}=t;if(Hf(s)){const r=s.toString(e);return s<0?"-"+n+r.substr(1):n+r}return Jr(t)}const Ute={identify:Hf,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,n)=>My(t,2,2,n),stringify:t=>ok(t,2,"0b")},Vte={identify:Hf,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,n)=>My(t,1,8,n),stringify:t=>ok(t,8,"0")},Fte={identify:Hf,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,n)=>My(t,0,10,n),stringify:Jr},qte={identify:Hf,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,n)=>My(t,2,16,n),stringify:t=>ok(t,16,"0x")};class $c extends jr{constructor(e){super(e),this.tag=$c.tag}add(e){let n;vn(e)?n=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?n=new ws(e.key,null):n=new ws(e,null),Ul(this.items,n.key)||this.items.push(n)}get(e,n){const s=Ul(this.items,e);return!n&&vn(s)?Gt(s.key)?s.key.value:s.key:s}set(e,n){if(typeof n!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof n}`);const s=Ul(this.items,e);s&&!n?this.items.splice(this.items.indexOf(s),1):!s&&n&&this.items.push(new ws(e))}toJSON(e,n){return super.toJSON(e,n,Set)}toString(e,n,s){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),n,s);throw new Error("Set items must all have null values")}static from(e,n,s){const{replacer:r}=s,a=new this(e);if(n&&Symbol.iterator in Object(n))for(let o of n)typeof r=="function"&&(o=r.call(n,o,o)),a.items.push(nk(o,null,s));return a}}$c.tag="tag:yaml.org,2002:set";const ck={collection:"map",identify:t=>t instanceof Set,nodeClass:$c,default:!1,tag:"tag:yaml.org,2002:set",createNode:(t,e,n)=>$c.from(t,e,n),resolve(t,e){if(zf(t)){if(t.hasAllNullValues(!0))return Object.assign(new $c,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t}};function uk(t,e){const n=t[0],s=n==="-"||n==="+"?t.substring(1):t,r=o=>e?BigInt(o):Number(o),a=s.replace(/_/g,"").split(":").reduce((o,c)=>o*r(60)+r(c),r(0));return n==="-"?r(-1)*a:a}function gD(t){let{value:e}=t,n=o=>o;if(typeof e=="bigint")n=o=>BigInt(o);else if(isNaN(e)||!isFinite(e))return Jr(t);let s="";e<0&&(s="-",e*=n(-1));const r=n(60),a=[e%r];return e<60?a.unshift(0):(e=(e-a[0])/r,a.unshift(e%r),e>=60&&(e=(e-a[0])/r,a.unshift(e))),s+a.map(o=>String(o).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const yD={identify:t=>typeof t=="bigint"||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:n})=>uk(t,n),stringify:gD},vD={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>uk(t,!1),stringify:gD},Dy={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){const e=t.match(Dy.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,s,r,a,o,c]=e.map(Number),h=e[7]?Number((e[7]+"00").substr(1,3)):0;let d=Date.UTC(n,s-1,r,a||0,o||0,c||0,h);const g=e[8];if(g&&g!=="Z"){let m=uk(g,!1);Math.abs(m)<30&&(m*=60),d-=6e4*m}return new Date(d)},stringify:({value:t})=>t?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""},Mj=[ju,Tu,Oy,Ry,pD,mD,Ute,Vte,Fte,qte,zte,$te,Hte,ik,Zi,lk,ak,ck,yD,vD,Dy],Dj=new Map([["core",Dte],["failsafe",[ju,Tu,Oy]],["json",Pte],["yaml11",Mj],["yaml-1.1",Mj]]),Lj={binary:ik,bool:sk,float:aD,floatExp:iD,floatNaN:rD,floatTime:vD,int:cD,intHex:uD,intOct:oD,intTime:yD,map:ju,merge:Zi,null:Ry,omap:lk,pairs:ak,seq:Tu,set:ck,timestamp:Dy},Kte={"tag:yaml.org,2002:binary":ik,"tag:yaml.org,2002:merge":Zi,"tag:yaml.org,2002:omap":lk,"tag:yaml.org,2002:pairs":ak,"tag:yaml.org,2002:set":ck,"tag:yaml.org,2002:timestamp":Dy};function l_(t,e,n){const s=Dj.get(e);if(s&&!t)return n&&!s.includes(Zi)?s.concat(Zi):s.slice();let r=s;if(!r)if(Array.isArray(t))r=[];else{const a=Array.from(Dj.keys()).filter(o=>o!=="yaml11").map(o=>JSON.stringify(o)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${a} or define customTags array`)}if(Array.isArray(t))for(const a of t)r=r.concat(a);else typeof t=="function"&&(r=t(r.slice()));return n&&(r=r.concat(Zi)),r.reduce((a,o)=>{const c=typeof o=="string"?Lj[o]:o;if(!c){const h=JSON.stringify(o),d=Object.keys(Lj).map(g=>JSON.stringify(g)).join(", ");throw new Error(`Unknown custom tag ${h}; use one of ${d}`)}return a.includes(c)||a.push(c),a},[])}const Wte=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0;class hk{constructor({compat:e,customTags:n,merge:s,resolveKnownTags:r,schema:a,sortMapEntries:o,toStringDefaults:c}){this.compat=Array.isArray(e)?l_(e,"compat"):e?l_(null,e):null,this.name=typeof a=="string"&&a||"core",this.knownTags=r?Kte:{},this.tags=l_(n,this.name,s),this.toStringOptions=c??null,Object.defineProperty(this,sl,{value:ju}),Object.defineProperty(this,vi,{value:Oy}),Object.defineProperty(this,Eu,{value:Tu}),this.sortMapEntries=typeof o=="function"?o:o===!0?Wte:null}clone(){const e=Object.create(hk.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}function Gte(t,e){const n=[];let s=e.directives===!0;if(e.directives!==!1&&t.directives){const h=t.directives.toString(t);h?(n.push(h),s=!0):t.directives.docStart&&(s=!0)}s&&n.push("---");const r=ZM(t,e),{commentString:a}=r.options;if(t.commentBefore){n.length!==1&&n.unshift("");const h=a(t.commentBefore);n.unshift(Ji(h,""))}let o=!1,c=null;if(t.contents){if(yn(t.contents)){if(t.contents.spaceBefore&&s&&n.push(""),t.contents.commentBefore){const g=a(t.contents.commentBefore);n.push(Ji(g,""))}r.forceBlockIndent=!!t.comment,c=t.contents.comment}const h=c?void 0:()=>o=!0;let d=su(t.contents,r,()=>c=null,h);c&&(d+=Hl(d,"",a(c))),(d[0]==="|"||d[0]===">")&&n[n.length-1]==="---"?n[n.length-1]=`--- ${d}`:n.push(d)}else n.push(su(t.contents,r));if(t.directives?.docEnd)if(t.comment){const h=a(t.comment);h.includes(`
`)?(n.push("..."),n.push(Ji(h,""))):n.push(`... ${h}`)}else n.push("...");else{let h=t.comment;h&&o&&(h=h.replace(/^\n+/,"")),h&&((!o||c)&&n[n.length-1]!==""&&n.push(""),n.push(Ji(a(h),"")))}return n.join(`
`)+`
`}let dk=class bD{constructor(e,n,s){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,Dr,{value:Ww});let r=null;typeof n=="function"||Array.isArray(n)?r=n:s===void 0&&n&&(s=n,n=void 0);const a=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},s);this.options=a;let{version:o}=a;s?._directives?(this.directives=s._directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new vs({version:o}),this.setSchema(o,s),this.contents=e===void 0?null:this.createNode(e,r,s)}clone(){const e=Object.create(bD.prototype,{[Dr]:{value:Ww}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=yn(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){gc(this.contents)&&this.contents.add(e)}addIn(e,n){gc(this.contents)&&this.contents.addIn(e,n)}createAlias(e,n){if(!e.anchor){const s=GM(this);e.anchor=!n||s.has(n)?YM(n||"a",s):n}return new ek(e.anchor)}createNode(e,n,s){let r;if(typeof n=="function")e=n.call({"":e},"",e),r=n;else if(Array.isArray(n)){const S=C=>typeof C=="number"||C instanceof String||C instanceof Number,k=n.filter(S).map(String);k.length>0&&(n=n.concat(k)),r=n}else s===void 0&&n&&(s=n,n=void 0);const{aliasDuplicateObjects:a,anchorPrefix:o,flow:c,keepUndefined:h,onTagObj:d,tag:g}=s??{},{onAnchor:m,setAnchors:v,sourceObjects:y}=wte(this,o||"a"),x={aliasDuplicateObjects:a??!0,keepUndefined:h??!1,onAnchor:m,onTagObj:d,replacer:r,schema:this.schema,sourceObjects:y},w=lf(e,g,x);return c&&mn(w)&&(w.flow=!0),v(),w}createPair(e,n,s={}){const r=this.createNode(e,null,s),a=this.createNode(n,null,s);return new ws(r,a)}delete(e){return gc(this.contents)?this.contents.delete(e):!1}deleteIn(e){return vd(e)?this.contents==null?!1:(this.contents=null,!0):gc(this.contents)?this.contents.deleteIn(e):!1}get(e,n){return mn(this.contents)?this.contents.get(e,n):void 0}getIn(e,n){return vd(e)?!n&&Gt(this.contents)?this.contents.value:this.contents:mn(this.contents)?this.contents.getIn(e,n):void 0}has(e){return mn(this.contents)?this.contents.has(e):!1}hasIn(e){return vd(e)?this.contents!==void 0:mn(this.contents)?this.contents.hasIn(e):!1}set(e,n){this.contents==null?this.contents=lg(this.schema,[e],n):gc(this.contents)&&this.contents.set(e,n)}setIn(e,n){vd(e)?this.contents=n:this.contents==null?this.contents=lg(this.schema,Array.from(e),n):gc(this.contents)&&this.contents.setIn(e,n)}setSchema(e,n={}){typeof e=="number"&&(e=String(e));let s;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new vs({version:"1.1"}),s={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new vs({version:e}),s={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,s=null;break;default:{const r=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${r}`)}}if(n.schema instanceof Object)this.schema=n.schema;else if(s)this.schema=new hk(Object.assign(s,n));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:n,mapAsMap:s,maxAliasCount:r,onAnchor:a,reviver:o}={}){const c={anchors:new Map,doc:this,keep:!e,mapAsMap:s===!0,mapKeyWarned:!1,maxAliasCount:typeof r=="number"?r:100},h=Mr(this.contents,n??"",c);if(typeof a=="function")for(const{count:d,res:g}of c.anchors.values())a(g,d);return typeof o=="function"?Oc(o,{"":h},"",h):h}toJSON(e,n){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:n})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const n=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${n}`)}return Gte(this,e)}};function gc(t){if(mn(t))return!0;throw new Error("Expected a YAML collection as document contents")}class _D extends Error{constructor(e,n,s,r){super(),this.name=e,this.code=s,this.message=r,this.pos=n}}class bd extends _D{constructor(e,n,s){super("YAMLParseError",e,n,s)}}class Yte extends _D{constructor(e,n,s){super("YAMLWarning",e,n,s)}}const Ij=(t,e)=>n=>{if(n.pos[0]===-1)return;n.linePos=n.pos.map(c=>e.linePos(c));const{line:s,col:r}=n.linePos[0];n.message+=` at line ${s}, column ${r}`;let a=r-1,o=t.substring(e.lineStarts[s-1],e.lineStarts[s]).replace(/[\n\r]+$/,"");if(a>=60&&o.length>80){const c=Math.min(a-39,o.length-79);o=""+o.substring(c),a-=c-1}if(o.length>80&&(o=o.substring(0,79)+""),s>1&&/^ *$/.test(o.substring(0,a))){let c=t.substring(e.lineStarts[s-2],e.lineStarts[s-1]);c.length>80&&(c=c.substring(0,79)+`
`),o=c+o}if(/[^ ]/.test(o)){let c=1;const h=n.linePos[1];h?.line===s&&h.col>r&&(c=Math.max(1,Math.min(h.col-r,80-a)));const d=" ".repeat(a)+"^".repeat(c);n.message+=`:

${o}
${d}
`}};function ru(t,{flow:e,indicator:n,next:s,offset:r,onError:a,parentIndent:o,startOnNewline:c}){let h=!1,d=c,g=c,m="",v="",y=!1,x=!1,w=null,S=null,k=null,C=null,A=null,B=null,M=null;for(const $ of t)switch(x&&($.type!=="space"&&$.type!=="newline"&&$.type!=="comma"&&a($.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),x=!1),w&&(d&&$.type!=="comment"&&$.type!=="newline"&&a(w,"TAB_AS_INDENT","Tabs are not allowed as indentation"),w=null),$.type){case"space":!e&&(n!=="doc-start"||s?.type!=="flow-collection")&&$.source.includes("	")&&(w=$),g=!0;break;case"comment":{g||a($,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const G=$.source.substring(1)||" ";m?m+=v+G:m=G,v="",d=!1;break}case"newline":d?m?m+=$.source:(!B||n!=="seq-item-ind")&&(h=!0):v+=$.source,d=!0,y=!0,(S||k)&&(C=$),g=!0;break;case"anchor":S&&a($,"MULTIPLE_ANCHORS","A node can have at most one anchor"),$.source.endsWith(":")&&a($.offset+$.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),S=$,M??(M=$.offset),d=!1,g=!1,x=!0;break;case"tag":{k&&a($,"MULTIPLE_TAGS","A node can have at most one tag"),k=$,M??(M=$.offset),d=!1,g=!1,x=!0;break}case n:(S||k)&&a($,"BAD_PROP_ORDER",`Anchors and tags must be after the ${$.source} indicator`),B&&a($,"UNEXPECTED_TOKEN",`Unexpected ${$.source} in ${e??"collection"}`),B=$,d=n==="seq-item-ind"||n==="explicit-key-ind",g=!1;break;case"comma":if(e){A&&a($,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),A=$,d=!1,g=!1;break}default:a($,"UNEXPECTED_TOKEN",`Unexpected ${$.type} token`),d=!1,g=!1}const T=t[t.length-1],H=T?T.offset+T.source.length:r;return x&&s&&s.type!=="space"&&s.type!=="newline"&&s.type!=="comma"&&(s.type!=="scalar"||s.source!=="")&&a(s.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),w&&(d&&w.indent<=o||s?.type==="block-map"||s?.type==="block-seq")&&a(w,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:A,found:B,spaceBefore:h,comment:m,hasNewline:y,anchor:S,tag:k,newlineAfterProp:C,end:H,start:M??H}}function of(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes(`
`))return!0;if(t.end){for(const e of t.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(const e of t.items){for(const n of e.start)if(n.type==="newline")return!0;if(e.sep){for(const n of e.sep)if(n.type==="newline")return!0}if(of(e.key)||of(e.value))return!0}return!1;default:return!0}}function Jw(t,e,n){if(e?.type==="flow-collection"){const s=e.end[0];s.indent===t&&(s.source==="]"||s.source==="}")&&of(e)&&n(s,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function xD(t,e,n){const{uniqueKeys:s}=t.options;if(s===!1)return!1;const r=typeof s=="function"?s:(a,o)=>a===o||Gt(a)&&Gt(o)&&a.value===o.value;return e.some(a=>r(a.key,n))}const Pj="All mapping items must start at the same column";function Xte({composeNode:t,composeEmptyNode:e},n,s,r,a){const o=a?.nodeClass??jr,c=new o(n.schema);n.atRoot&&(n.atRoot=!1);let h=s.offset,d=null;for(const g of s.items){const{start:m,key:v,sep:y,value:x}=g,w=ru(m,{indicator:"explicit-key-ind",next:v??y?.[0],offset:h,onError:r,parentIndent:s.indent,startOnNewline:!0}),S=!w.found;if(S){if(v&&(v.type==="block-seq"?r(h,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in v&&v.indent!==s.indent&&r(h,"BAD_INDENT",Pj)),!w.anchor&&!w.tag&&!y){d=w.end,w.comment&&(c.comment?c.comment+=`
`+w.comment:c.comment=w.comment);continue}(w.newlineAfterProp||of(v))&&r(v??m[m.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else w.found?.indent!==s.indent&&r(h,"BAD_INDENT",Pj);n.atKey=!0;const k=w.end,C=v?t(n,v,w,r):e(n,k,m,null,w,r);n.schema.compat&&Jw(s.indent,v,r),n.atKey=!1,xD(n,c.items,C)&&r(k,"DUPLICATE_KEY","Map keys must be unique");const A=ru(y??[],{indicator:"map-value-ind",next:x,offset:C.range[2],onError:r,parentIndent:s.indent,startOnNewline:!v||v.type==="block-scalar"});if(h=A.end,A.found){S&&(x?.type==="block-map"&&!A.hasNewline&&r(h,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&w.start<A.found.offset-1024&&r(C.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const B=x?t(n,x,A,r):e(n,h,y,null,A,r);n.schema.compat&&Jw(s.indent,x,r),h=B.range[2];const M=new ws(C,B);n.options.keepSourceTokens&&(M.srcToken=g),c.items.push(M)}else{S&&r(C.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),A.comment&&(C.comment?C.comment+=`
`+A.comment:C.comment=A.comment);const B=new ws(C);n.options.keepSourceTokens&&(B.srcToken=g),c.items.push(B)}}return d&&d<h&&r(d,"IMPOSSIBLE","Map comment with trailing content"),c.range=[s.offset,h,d??h],c}function Jte({composeNode:t,composeEmptyNode:e},n,s,r,a){const o=a?.nodeClass??po,c=new o(n.schema);n.atRoot&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let h=s.offset,d=null;for(const{start:g,value:m}of s.items){const v=ru(g,{indicator:"seq-item-ind",next:m,offset:h,onError:r,parentIndent:s.indent,startOnNewline:!0});if(!v.found)if(v.anchor||v.tag||m)m?.type==="block-seq"?r(v.end,"BAD_INDENT","All sequence items must start at the same column"):r(h,"MISSING_CHAR","Sequence item without - indicator");else{d=v.end,v.comment&&(c.comment=v.comment);continue}const y=m?t(n,m,v,r):e(n,v.end,g,null,v,r);n.schema.compat&&Jw(s.indent,m,r),h=y.range[2],c.items.push(y)}return c.range=[s.offset,h,d??h],c}function Uf(t,e,n,s){let r="";if(t){let a=!1,o="";for(const c of t){const{source:h,type:d}=c;switch(d){case"space":a=!0;break;case"comment":{n&&!a&&s(c,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const g=h.substring(1)||" ";r?r+=o+g:r=g,o="";break}case"newline":r&&(o+=h),a=!0;break;default:s(c,"UNEXPECTED_TOKEN",`Unexpected ${d} at node end`)}e+=h.length}}return{comment:r,offset:e}}const o_="Block collections are not allowed within flow collections",c_=t=>t&&(t.type==="block-map"||t.type==="block-seq");function Qte({composeNode:t,composeEmptyNode:e},n,s,r,a){const o=s.start.source==="{",c=o?"flow map":"flow sequence",h=a?.nodeClass??(o?jr:po),d=new h(n.schema);d.flow=!0;const g=n.atRoot;g&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let m=s.offset+s.start.source.length;for(let S=0;S<s.items.length;++S){const k=s.items[S],{start:C,key:A,sep:B,value:M}=k,T=ru(C,{flow:c,indicator:"explicit-key-ind",next:A??B?.[0],offset:m,onError:r,parentIndent:s.indent,startOnNewline:!1});if(!T.found){if(!T.anchor&&!T.tag&&!B&&!M){S===0&&T.comma?r(T.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${c}`):S<s.items.length-1&&r(T.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${c}`),T.comment&&(d.comment?d.comment+=`
`+T.comment:d.comment=T.comment),m=T.end;continue}!o&&n.options.strict&&of(A)&&r(A,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(S===0)T.comma&&r(T.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${c}`);else if(T.comma||r(T.start,"MISSING_CHAR",`Missing , between ${c} items`),T.comment){let H="";e:for(const $ of C)switch($.type){case"comma":case"space":break;case"comment":H=$.source.substring(1);break e;default:break e}if(H){let $=d.items[d.items.length-1];vn($)&&($=$.value??$.key),$.comment?$.comment+=`
`+H:$.comment=H,T.comment=T.comment.substring(H.length+1)}}if(!o&&!B&&!T.found){const H=M?t(n,M,T,r):e(n,T.end,B,null,T,r);d.items.push(H),m=H.range[2],c_(M)&&r(H.range,"BLOCK_IN_FLOW",o_)}else{n.atKey=!0;const H=T.end,$=A?t(n,A,T,r):e(n,H,C,null,T,r);c_(A)&&r($.range,"BLOCK_IN_FLOW",o_),n.atKey=!1;const G=ru(B??[],{flow:c,indicator:"map-value-ind",next:M,offset:$.range[2],onError:r,parentIndent:s.indent,startOnNewline:!1});if(G.found){if(!o&&!T.found&&n.options.strict){if(B)for(const F of B){if(F===G.found)break;if(F.type==="newline"){r(F,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}T.start<G.found.offset-1024&&r(G.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else M&&("source"in M&&M.source?.[0]===":"?r(M,"MISSING_CHAR",`Missing space after : in ${c}`):r(G.start,"MISSING_CHAR",`Missing , or : between ${c} items`));const z=M?t(n,M,G,r):G.found?e(n,G.end,B,null,G,r):null;z?c_(M)&&r(z.range,"BLOCK_IN_FLOW",o_):G.comment&&($.comment?$.comment+=`
`+G.comment:$.comment=G.comment);const Q=new ws($,z);if(n.options.keepSourceTokens&&(Q.srcToken=k),o){const F=d;xD(n,F.items,$)&&r(H,"DUPLICATE_KEY","Map keys must be unique"),F.items.push(Q)}else{const F=new jr(n.schema);F.flow=!0,F.items.push(Q);const K=(z??$).range;F.range=[$.range[0],K[1],K[2]],d.items.push(F)}m=z?z.range[2]:G.end}}const v=o?"}":"]",[y,...x]=s.end;let w=m;if(y?.source===v)w=y.offset+y.source.length;else{const S=c[0].toUpperCase()+c.substring(1),k=g?`${S} must end with a ${v}`:`${S} in block collection must be sufficiently indented and end with a ${v}`;r(m,g?"MISSING_CHAR":"BAD_INDENT",k),y&&y.source.length!==1&&x.unshift(y)}if(x.length>0){const S=Uf(x,w,n.options.strict,r);S.comment&&(d.comment?d.comment+=`
`+S.comment:d.comment=S.comment),d.range=[s.offset,w,S.offset]}else d.range=[s.offset,w,w];return d}function u_(t,e,n,s,r,a){const o=n.type==="block-map"?Xte(t,e,n,s,a):n.type==="block-seq"?Jte(t,e,n,s,a):Qte(t,e,n,s,a),c=o.constructor;return r==="!"||r===c.tagName?(o.tag=c.tagName,o):(r&&(o.tag=r),o)}function Zte(t,e,n,s,r){const a=s.tag,o=a?e.directives.tagName(a.source,v=>r(a,"TAG_RESOLVE_FAILED",v)):null;if(n.type==="block-seq"){const{anchor:v,newlineAfterProp:y}=s,x=v&&a?v.offset>a.offset?v:a:v??a;x&&(!y||y.offset<x.offset)&&r(x,"MISSING_CHAR","Missing newline after block sequence props")}const c=n.type==="block-map"?"map":n.type==="block-seq"?"seq":n.start.source==="{"?"map":"seq";if(!a||!o||o==="!"||o===jr.tagName&&c==="map"||o===po.tagName&&c==="seq")return u_(t,e,n,r,o);let h=e.schema.tags.find(v=>v.tag===o&&v.collection===c);if(!h){const v=e.schema.knownTags[o];if(v?.collection===c)e.schema.tags.push(Object.assign({},v,{default:!1})),h=v;else return v?r(a,"BAD_COLLECTION_TYPE",`${v.tag} used for ${c} collection, but expects ${v.collection??"scalar"}`,!0):r(a,"TAG_RESOLVE_FAILED",`Unresolved tag: ${o}`,!0),u_(t,e,n,r,o)}const d=u_(t,e,n,r,o,h),g=h.resolve?.(d,v=>r(a,"TAG_RESOLVE_FAILED",v),e.options)??d,m=yn(g)?g:new ot(g);return m.range=d.range,m.tag=o,h?.format&&(m.format=h.format),m}function ene(t,e,n){const s=e.offset,r=tne(e,t.options.strict,n);if(!r)return{value:"",type:null,comment:"",range:[s,s,s]};const a=r.mode===">"?ot.BLOCK_FOLDED:ot.BLOCK_LITERAL,o=e.source?nne(e.source):[];let c=o.length;for(let w=o.length-1;w>=0;--w){const S=o[w][1];if(S===""||S==="\r")c=w;else break}if(c===0){const w=r.chomp==="+"&&o.length>0?`
`.repeat(Math.max(1,o.length-1)):"";let S=s+r.length;return e.source&&(S+=e.source.length),{value:w,type:a,comment:r.comment,range:[s,S,S]}}let h=e.indent+r.indent,d=e.offset+r.length,g=0;for(let w=0;w<c;++w){const[S,k]=o[w];if(k===""||k==="\r")r.indent===0&&S.length>h&&(h=S.length);else{S.length<h&&n(d+S.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),r.indent===0&&(h=S.length),g=w,h===0&&!t.atRoot&&n(d,"BAD_INDENT","Block scalar values in collections must be indented");break}d+=S.length+k.length+1}for(let w=o.length-1;w>=c;--w)o[w][0].length>h&&(c=w+1);let m="",v="",y=!1;for(let w=0;w<g;++w)m+=o[w][0].slice(h)+`
`;for(let w=g;w<c;++w){let[S,k]=o[w];d+=S.length+k.length+1;const C=k[k.length-1]==="\r";if(C&&(k=k.slice(0,-1)),k&&S.length<h){const B=`Block scalar lines must not be less indented than their ${r.indent?"explicit indentation indicator":"first line"}`;n(d-k.length-(C?2:1),"BAD_INDENT",B),S=""}a===ot.BLOCK_LITERAL?(m+=v+S.slice(h)+k,v=`
`):S.length>h||k[0]==="	"?(v===" "?v=`
`:!y&&v===`
`&&(v=`

`),m+=v+S.slice(h)+k,v=`
`,y=!0):k===""?v===`
`?m+=`
`:v=`
`:(m+=v+k,v=" ",y=!1)}switch(r.chomp){case"-":break;case"+":for(let w=c;w<o.length;++w)m+=`
`+o[w][0].slice(h);m[m.length-1]!==`
`&&(m+=`
`);break;default:m+=`
`}const x=s+r.length+e.source.length;return{value:m,type:a,comment:r.comment,range:[s,x,x]}}function tne({offset:t,props:e},n,s){if(e[0].type!=="block-scalar-header")return s(e[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:r}=e[0],a=r[0];let o=0,c="",h=-1;for(let v=1;v<r.length;++v){const y=r[v];if(!c&&(y==="-"||y==="+"))c=y;else{const x=Number(y);!o&&x?o=x:h===-1&&(h=t+v)}}h!==-1&&s(h,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${r}`);let d=!1,g="",m=r.length;for(let v=1;v<e.length;++v){const y=e[v];switch(y.type){case"space":d=!0;case"newline":m+=y.source.length;break;case"comment":n&&!d&&s(y,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),m+=y.source.length,g=y.source.substring(1);break;case"error":s(y,"UNEXPECTED_TOKEN",y.message),m+=y.source.length;break;default:{const x=`Unexpected token in block scalar header: ${y.type}`;s(y,"UNEXPECTED_TOKEN",x);const w=y.source;w&&typeof w=="string"&&(m+=w.length)}}}return{mode:a,indent:o,chomp:c,comment:g,length:m}}function nne(t){const e=t.split(/\n( *)/),n=e[0],s=n.match(/^( *)/),a=[s?.[1]?[s[1],n.slice(s[1].length)]:["",n]];for(let o=1;o<e.length;o+=2)a.push([e[o],e[o+1]]);return a}function sne(t,e,n){const{offset:s,type:r,source:a,end:o}=t;let c,h;const d=(v,y,x)=>n(s+v,y,x);switch(r){case"scalar":c=ot.PLAIN,h=rne(a,d);break;case"single-quoted-scalar":c=ot.QUOTE_SINGLE,h=ine(a,d);break;case"double-quoted-scalar":c=ot.QUOTE_DOUBLE,h=ane(a,d);break;default:return n(t,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${r}`),{value:"",type:null,comment:"",range:[s,s+a.length,s+a.length]}}const g=s+a.length,m=Uf(o,g,e,n);return{value:h,type:c,comment:m.comment,range:[s,g,m.offset]}}function rne(t,e){let n="";switch(t[0]){case"	":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":{n=`block scalar indicator ${t[0]}`;break}case"@":case"`":{n=`reserved character ${t[0]}`;break}}return n&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`),wD(t)}function ine(t,e){return(t[t.length-1]!=="'"||t.length===1)&&e(t.length,"MISSING_CHAR","Missing closing 'quote"),wD(t.slice(1,-1)).replace(/''/g,"'")}function wD(t){let e,n;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),n=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let s=e.exec(t);if(!s)return t;let r=s[1],a=" ",o=e.lastIndex;for(n.lastIndex=o;s=n.exec(t);)s[1]===""?a===`
`?r+=a:a=`
`:(r+=a+s[1],a=" "),o=n.lastIndex;const c=/[ \t]*(.*)/sy;return c.lastIndex=o,s=c.exec(t),r+a+(s?.[1]??"")}function ane(t,e){let n="";for(let s=1;s<t.length-1;++s){const r=t[s];if(!(r==="\r"&&t[s+1]===`
`))if(r===`
`){const{fold:a,offset:o}=lne(t,s);n+=a,s=o}else if(r==="\\"){let a=t[++s];const o=one[a];if(o)n+=o;else if(a===`
`)for(a=t[s+1];a===" "||a==="	";)a=t[++s+1];else if(a==="\r"&&t[s+1]===`
`)for(a=t[++s+1];a===" "||a==="	";)a=t[++s+1];else if(a==="x"||a==="u"||a==="U"){const c={x:2,u:4,U:8}[a];n+=cne(t,s+1,c,e),s+=c}else{const c=t.substr(s-1,2);e(s-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${c}`),n+=c}}else if(r===" "||r==="	"){const a=s;let o=t[s+1];for(;o===" "||o==="	";)o=t[++s+1];o!==`
`&&!(o==="\r"&&t[s+2]===`
`)&&(n+=s>a?t.slice(a,s+1):r)}else n+=r}return(t[t.length-1]!=='"'||t.length===1)&&e(t.length,"MISSING_CHAR",'Missing closing "quote'),n}function lne(t,e){let n="",s=t[e+1];for(;(s===" "||s==="	"||s===`
`||s==="\r")&&!(s==="\r"&&t[e+2]!==`
`);)s===`
`&&(n+=`
`),e+=1,s=t[e+1];return n||(n=" "),{fold:n,offset:e}}const one={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"",_:"",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function cne(t,e,n,s){const r=t.substr(e,n),o=r.length===n&&/^[0-9a-fA-F]+$/.test(r)?parseInt(r,16):NaN;if(isNaN(o)){const c=t.substr(e-2,n+2);return s(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${c}`),c}return String.fromCodePoint(o)}function SD(t,e,n,s){const{value:r,type:a,comment:o,range:c}=e.type==="block-scalar"?ene(t,e,s):sne(e,t.options.strict,s),h=n?t.directives.tagName(n.source,m=>s(n,"TAG_RESOLVE_FAILED",m)):null;let d;t.options.stringKeys&&t.atKey?d=t.schema[vi]:h?d=une(t.schema,r,h,n,s):e.type==="scalar"?d=hne(t,r,e,s):d=t.schema[vi];let g;try{const m=d.resolve(r,v=>s(n??e,"TAG_RESOLVE_FAILED",v),t.options);g=Gt(m)?m:new ot(m)}catch(m){const v=m instanceof Error?m.message:String(m);s(n??e,"TAG_RESOLVE_FAILED",v),g=new ot(r)}return g.range=c,g.source=r,a&&(g.type=a),h&&(g.tag=h),d.format&&(g.format=d.format),o&&(g.comment=o),g}function une(t,e,n,s,r){if(n==="!")return t[vi];const a=[];for(const c of t.tags)if(!c.collection&&c.tag===n)if(c.default&&c.test)a.push(c);else return c;for(const c of a)if(c.test?.test(e))return c;const o=t.knownTags[n];return o&&!o.collection?(t.tags.push(Object.assign({},o,{default:!1,test:void 0})),o):(r(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,n!=="tag:yaml.org,2002:str"),t[vi])}function hne({atKey:t,directives:e,schema:n},s,r,a){const o=n.tags.find(c=>(c.default===!0||t&&c.default==="key")&&c.test?.test(s))||n[vi];if(n.compat){const c=n.compat.find(h=>h.default&&h.test?.test(s))??n[vi];if(o.tag!==c.tag){const h=e.tagString(o.tag),d=e.tagString(c.tag),g=`Value may be parsed as either ${h} or ${d}`;a(r,"TAG_RESOLVE_FAILED",g,!0)}}return o}function dne(t,e,n){if(e){n??(n=e.length);for(let s=n-1;s>=0;--s){let r=e[s];switch(r.type){case"space":case"comment":case"newline":t-=r.source.length;continue}for(r=e[++s];r?.type==="space";)t+=r.source.length,r=e[++s];break}}return t}const fne={composeNode:kD,composeEmptyNode:fk};function kD(t,e,n,s){const r=t.atKey,{spaceBefore:a,comment:o,anchor:c,tag:h}=n;let d,g=!0;switch(e.type){case"alias":d=pne(t,e,s),(c||h)&&s(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":d=SD(t,e,h,s),c&&(d.anchor=c.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":d=Zte(fne,t,e,n,s),c&&(d.anchor=c.source.substring(1));break;default:{const m=e.type==="error"?e.message:`Unsupported token (type: ${e.type})`;s(e,"UNEXPECTED_TOKEN",m),d=fk(t,e.offset,void 0,null,n,s),g=!1}}return c&&d.anchor===""&&s(c,"BAD_ALIAS","Anchor cannot be an empty string"),r&&t.options.stringKeys&&(!Gt(d)||typeof d.value!="string"||d.tag&&d.tag!=="tag:yaml.org,2002:str")&&s(h??e,"NON_STRING_KEY","With stringKeys, all keys must be strings"),a&&(d.spaceBefore=!0),o&&(e.type==="scalar"&&e.source===""?d.comment=o:d.commentBefore=o),t.options.keepSourceTokens&&g&&(d.srcToken=e),d}function fk(t,e,n,s,{spaceBefore:r,comment:a,anchor:o,tag:c,end:h},d){const g={type:"scalar",offset:dne(e,n,s),indent:-1,source:""},m=SD(t,g,c,d);return o&&(m.anchor=o.source.substring(1),m.anchor===""&&d(o,"BAD_ALIAS","Anchor cannot be an empty string")),r&&(m.spaceBefore=!0),a&&(m.comment=a,m.range[2]=h),m}function pne({options:t},{offset:e,source:n,end:s},r){const a=new ek(n.substring(1));a.source===""&&r(e,"BAD_ALIAS","Alias cannot be an empty string"),a.source.endsWith(":")&&r(e+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const o=e+n.length,c=Uf(s,o,t.strict,r);return a.range=[e,o,c.offset],c.comment&&(a.comment=c.comment),a}function mne(t,e,{offset:n,start:s,value:r,end:a},o){const c=Object.assign({_directives:e},t),h=new dk(void 0,c),d={atKey:!1,atRoot:!0,directives:h.directives,options:h.options,schema:h.schema},g=ru(s,{indicator:"doc-start",next:r??a?.[0],offset:n,onError:o,parentIndent:0,startOnNewline:!0});g.found&&(h.directives.docStart=!0,r&&(r.type==="block-map"||r.type==="block-seq")&&!g.hasNewline&&o(g.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),h.contents=r?kD(d,r,g,o):fk(d,g.end,s,null,g,o);const m=h.contents.range[2],v=Uf(a,m,!1,o);return v.comment&&(h.comment=v.comment),h.range=[n,m,v.offset],h}function Lh(t){if(typeof t=="number")return[t,t+1];if(Array.isArray(t))return t.length===2?t:[t[0],t[1]];const{offset:e,source:n}=t;return[e,e+(typeof n=="string"?n.length:1)]}function zj(t){let e="",n=!1,s=!1;for(let r=0;r<t.length;++r){const a=t[r];switch(a[0]){case"#":e+=(e===""?"":s?`

`:`
`)+(a.substring(1)||" "),n=!0,s=!1;break;case"%":t[r+1]?.[0]!=="#"&&(r+=1),n=!1;break;default:n||(s=!0),n=!1}}return{comment:e,afterEmptyLine:s}}class gne{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(n,s,r,a)=>{const o=Lh(n);a?this.warnings.push(new Yte(o,s,r)):this.errors.push(new bd(o,s,r))},this.directives=new vs({version:e.version||"1.2"}),this.options=e}decorate(e,n){const{comment:s,afterEmptyLine:r}=zj(this.prelude);if(s){const a=e.contents;if(n)e.comment=e.comment?`${e.comment}
${s}`:s;else if(r||e.directives.docStart||!a)e.commentBefore=s;else if(mn(a)&&!a.flow&&a.items.length>0){let o=a.items[0];vn(o)&&(o=o.key);const c=o.commentBefore;o.commentBefore=c?`${s}
${c}`:s}else{const o=a.commentBefore;a.commentBefore=o?`${s}
${o}`:s}}n?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:zj(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,n=!1,s=-1){for(const r of e)yield*this.next(r);yield*this.end(n,s)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,(n,s,r)=>{const a=Lh(e);a[0]+=n,this.onError(a,"BAD_DIRECTIVE",s,r)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{const n=mne(this.options,this.directives,e,this.onError);this.atDirectives&&!n.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(n,!1),this.doc&&(yield this.doc),this.doc=n,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const n=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,s=new bd(Lh(e),"UNEXPECTED_TOKEN",n);this.atDirectives||!this.doc?this.errors.push(s):this.doc.errors.push(s);break}case"doc-end":{if(!this.doc){const s="Unexpected doc-end without preceding document";this.errors.push(new bd(Lh(e),"UNEXPECTED_TOKEN",s));break}this.doc.directives.docEnd=!0;const n=Uf(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),n.comment){const s=this.doc.comment;this.doc.comment=s?`${s}
${n.comment}`:n.comment}this.doc.range[2]=n.offset;break}default:this.errors.push(new bd(Lh(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,n=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){const s=Object.assign({_directives:this.directives},this.options),r=new dk(void 0,s);this.atDirectives&&this.onError(n,"MISSING_CHAR","Missing directives-end indicator line"),r.range=[0,n,n],this.decorate(r,!1),yield r}}}const CD="\uFEFF",ND="",ED="",Qw="";function yne(t){switch(t){case CD:return"byte-order-mark";case ND:return"doc-mode";case ED:return"flow-error-end";case Qw:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}function Vr(t){switch(t){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}const $j=new Set("0123456789ABCDEFabcdef"),vne=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),Tm=new Set(",[]{}"),bne=new Set(` ,[]{}
\r	`),h_=t=>!t||bne.has(t);class _ne{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,n=!1){if(e){if(typeof e!="string")throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null}this.atEnd=!n;let s=this.next??"stream";for(;s&&(n||this.hasChars(1));)s=yield*this.parseNext(s)}atLineEnd(){let e=this.pos,n=this.buffer[e];for(;n===" "||n==="	";)n=this.buffer[++e];return!n||n==="#"||n===`
`?!0:n==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let n=this.buffer[e];if(this.indentNext>0){let s=0;for(;n===" ";)n=this.buffer[++s+e];if(n==="\r"){const r=this.buffer[s+e+1];if(r===`
`||!r&&!this.atEnd)return e+s+1}return n===`
`||s>=this.indentNext||!n&&!this.atEnd?e+s:-1}if(n==="-"||n==="."){const s=this.buffer.substr(e,3);if((s==="---"||s==="...")&&Vr(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===CD&&(yield*this.pushCount(1),e=e.substring(1)),e[0]==="%"){let n=e.length,s=e.indexOf("#");for(;s!==-1;){const a=e[s-1];if(a===" "||a==="	"){n=s-1;break}else s=e.indexOf("#",s+1)}for(;;){const a=e[n-1];if(a===" "||a==="	")n-=1;else break}const r=(yield*this.pushCount(n))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-r),this.pushNewline(),"stream"}if(this.atLineEnd()){const n=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-n),yield*this.pushNewline(),"stream"}return yield ND,yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const n=this.peek(3);if((n==="---"||n==="...")&&Vr(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,n==="---"?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!Vr(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[e,n]=this.peek(2);if(!n&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&Vr(n)){const s=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=s,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const e=this.getLine();if(e===null)return this.setNext("doc");let n=yield*this.pushIndicators();switch(e[n]){case"#":yield*this.pushCount(e.length-n);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(h_),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return n+=yield*this.parseBlockScalarHeader(),n+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-n),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,n,s=-1;do e=yield*this.pushNewline(),e>0?(n=yield*this.pushSpaces(!1),this.indentValue=s=n):n=0,n+=yield*this.pushSpaces(!0);while(e+n>0);const r=this.getLine();if(r===null)return this.setNext("flow");if((s!==-1&&s<this.indentNext&&r[0]!=="#"||s===0&&(r.startsWith("---")||r.startsWith("..."))&&Vr(r[3]))&&!(s===this.indentNext-1&&this.flowLevel===1&&(r[0]==="]"||r[0]==="}")))return this.flowLevel=0,yield ED,yield*this.parseLineStart();let a=0;for(;r[a]===",";)a+=yield*this.pushCount(1),a+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(a+=yield*this.pushIndicators(),r[a]){case void 0:return"flow";case"#":return yield*this.pushCount(r.length-a),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(h_),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const o=this.charAt(1);if(this.flowKey||Vr(o)||o===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let n=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;n!==-1&&this.buffer[n+1]==="'";)n=this.buffer.indexOf("'",n+2);else for(;n!==-1;){let a=0;for(;this.buffer[n-1-a]==="\\";)a+=1;if(a%2===0)break;n=this.buffer.indexOf('"',n+1)}const s=this.buffer.substring(0,n);let r=s.indexOf(`
`,this.pos);if(r!==-1){for(;r!==-1;){const a=this.continueScalar(r+1);if(a===-1)break;r=s.indexOf(`
`,a)}r!==-1&&(n=r-(s[r-1]==="\r"?2:1))}if(n===-1){if(!this.atEnd)return this.setNext("quoted-scalar");n=this.buffer.length}return yield*this.pushToIndex(n+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const n=this.buffer[++e];if(n==="+")this.blockScalarKeep=!0;else if(n>"0"&&n<="9")this.blockScalarIndent=Number(n)-1;else if(n!=="-")break}return yield*this.pushUntil(n=>Vr(n)||n==="#")}*parseBlockScalar(){let e=this.pos-1,n=0,s;e:for(let a=this.pos;s=this.buffer[a];++a)switch(s){case" ":n+=1;break;case`
`:e=a,n=0;break;case"\r":{const o=this.buffer[a+1];if(!o&&!this.atEnd)return this.setNext("block-scalar");if(o===`
`)break}default:break e}if(!s&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=n:this.indentNext=this.blockScalarIndent+(this.indentNext===0?1:this.indentNext);do{const a=this.continueScalar(e+1);if(a===-1)break;e=this.buffer.indexOf(`
`,a)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}let r=e+1;for(s=this.buffer[r];s===" ";)s=this.buffer[++r];if(s==="	"){for(;s==="	"||s===" "||s==="\r"||s===`
`;)s=this.buffer[++r];e=r-1}else if(!this.blockScalarKeep)do{let a=e-1,o=this.buffer[a];o==="\r"&&(o=this.buffer[--a]);const c=a;for(;o===" ";)o=this.buffer[--a];if(o===`
`&&a>=this.pos&&a+1+n>c)e=a;else break}while(!0);return yield Qw,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let n=this.pos-1,s=this.pos-1,r;for(;r=this.buffer[++s];)if(r===":"){const a=this.buffer[s+1];if(Vr(a)||e&&Tm.has(a))break;n=s}else if(Vr(r)){let a=this.buffer[s+1];if(r==="\r"&&(a===`
`?(s+=1,r=`
`,a=this.buffer[s+1]):n=s),a==="#"||e&&Tm.has(a))break;if(r===`
`){const o=this.continueScalar(s+1);if(o===-1)break;s=Math.max(s,o-2)}}else{if(e&&Tm.has(r))break;n=s}return!r&&!this.atEnd?this.setNext("plain-scalar"):(yield Qw,yield*this.pushToIndex(n+1,!0),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,n){const s=this.buffer.slice(this.pos,e);return s?(yield s,this.pos+=s.length,s.length):(n&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(h_))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const e=this.flowLevel>0,n=this.charAt(1);if(Vr(n)||e&&Tm.has(n))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,n=this.buffer[e];for(;!Vr(n)&&n!==">";)n=this.buffer[++e];return yield*this.pushToIndex(n===">"?e+1:e,!1)}else{let e=this.pos+1,n=this.buffer[e];for(;n;)if(vne.has(n))n=this.buffer[++e];else if(n==="%"&&$j.has(this.buffer[e+1])&&$j.has(this.buffer[e+2]))n=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){const e=this.buffer[this.pos];return e===`
`?yield*this.pushCount(1):e==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(e){let n=this.pos-1,s;do s=this.buffer[++n];while(s===" "||e&&s==="	");const r=n-this.pos;return r>0&&(yield this.buffer.substr(this.pos,r),this.pos=n),r}*pushUntil(e){let n=this.pos,s=this.buffer[n];for(;!e(s);)s=this.buffer[++n];return yield*this.pushToIndex(n,!1)}}class xne{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let n=0,s=this.lineStarts.length;for(;n<s;){const a=n+s>>1;this.lineStarts[a]<e?n=a+1:s=a}if(this.lineStarts[n]===e)return{line:n+1,col:1};if(n===0)return{line:0,col:e};const r=this.lineStarts[n-1];return{line:n,col:e-r+1}}}}function Ka(t,e){for(let n=0;n<t.length;++n)if(t[n].type===e)return!0;return!1}function Hj(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function AD(t){switch(t?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function Om(t){switch(t.type){case"document":return t.start;case"block-map":{const e=t.items[t.items.length-1];return e.sep??e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function yc(t){if(t.length===0)return[];let e=t.length;e:for(;--e>=0;)switch(t[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;t[++e]?.type==="space";);return t.splice(e,t.length)}function Uj(t){if(t.start.type==="flow-seq-start")for(const e of t.items)e.sep&&!e.value&&!Ka(e.start,"explicit-key-ind")&&!Ka(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,AD(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}class wne{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new _ne,this.onNewLine=e}*parse(e,n=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(const s of this.lexer.lex(e,n))yield*this.next(s);n||(yield*this.end())}*next(e){if(this.source=e,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}const n=yne(e);if(n)if(n==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=n,yield*this.step(),n){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{const s=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:s,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const e=this.peek(1);if(this.type==="doc-end"&&e?.type!=="doc-end"){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){const n=e??this.stack.pop();if(!n)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield n;else{const s=this.peek(1);switch(n.type==="block-scalar"?n.indent="indent"in s?s.indent:0:n.type==="flow-collection"&&s.type==="document"&&(n.indent=0),n.type==="flow-collection"&&Uj(n),s.type){case"document":s.value=n;break;case"block-scalar":s.props.push(n);break;case"block-map":{const r=s.items[s.items.length-1];if(r.value){s.items.push({start:[],key:n,sep:[]}),this.onKeyLine=!0;return}else if(r.sep)r.value=n;else{Object.assign(r,{key:n,sep:[]}),this.onKeyLine=!r.explicitKey;return}break}case"block-seq":{const r=s.items[s.items.length-1];r.value?s.items.push({start:[],value:n}):r.value=n;break}case"flow-collection":{const r=s.items[s.items.length-1];!r||r.value?s.items.push({start:[],key:n,sep:[]}):r.sep?r.value=n:Object.assign(r,{key:n,sep:[]});return}default:yield*this.pop(),yield*this.pop(n)}if((s.type==="document"||s.type==="block-map"||s.type==="block-seq")&&(n.type==="block-map"||n.type==="block-seq")){const r=n.items[n.items.length-1];r&&!r.sep&&!r.value&&r.start.length>0&&Hj(r.start)===-1&&(n.indent===0||r.start.every(a=>a.type!=="comment"||a.indent<n.indent))&&(s.type==="document"?s.end=r.start:s.items.push({start:r.start}),n.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{Hj(e.start)!==-1?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}const n=this.startBlockValue(e);n?this.stack.push(n):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){const n=Om(this.peek(2)),s=yc(n);let r;e.end?(r=e.end,r.push(this.sourceToken),delete e.end):r=[this.sourceToken];const a={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:s,key:e,sep:r}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=a}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){const n=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,n.value){const s="end"in n.value?n.value.end:void 0;(Array.isArray(s)?s[s.length-1]:void 0)?.type==="comment"?s?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else if(n.sep)n.sep.push(this.sourceToken);else{if(this.atIndentedComment(n.start,e.indent)){const r=e.items[e.items.length-2]?.value?.end;if(Array.isArray(r)){Array.prototype.push.apply(r,n.start),r.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return}if(this.indent>=e.indent){const s=!this.onKeyLine&&this.indent===e.indent,r=s&&(n.sep||n.explicitKey)&&this.type!=="seq-item-ind";let a=[];if(r&&n.sep&&!n.value){const o=[];for(let c=0;c<n.sep.length;++c){const h=n.sep[c];switch(h.type){case"newline":o.push(c);break;case"space":break;case"comment":h.indent>e.indent&&(o.length=0);break;default:o.length=0}}o.length>=2&&(a=n.sep.splice(o[1]))}switch(this.type){case"anchor":case"tag":r||n.value?(a.push(this.sourceToken),e.items.push({start:a}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"explicit-key-ind":!n.sep&&!n.explicitKey?(n.start.push(this.sourceToken),n.explicitKey=!0):r||n.value?(a.push(this.sourceToken),e.items.push({start:a,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}),this.onKeyLine=!0;return;case"map-value-ind":if(n.explicitKey)if(n.sep)if(n.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(Ka(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:a,key:null,sep:[this.sourceToken]}]});else if(AD(n.key)&&!Ka(n.sep,"newline")){const o=yc(n.start),c=n.key,h=n.sep;h.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:c,sep:h}]})}else a.length>0?n.sep=n.sep.concat(a,this.sourceToken):n.sep.push(this.sourceToken);else if(Ka(n.start,"newline"))Object.assign(n,{key:null,sep:[this.sourceToken]});else{const o=yc(n.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]})}else n.sep?n.value||r?e.items.push({start:a,key:null,sep:[this.sourceToken]}):Ka(n.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const o=this.flowScalar(this.type);r||n.value?(e.items.push({start:a,key:o,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(o):(Object.assign(n,{key:o,sep:[]}),this.onKeyLine=!0);return}default:{const o=this.startBlockValue(e);if(o){if(o.type==="block-seq"){if(!n.explicitKey&&n.sep&&!Ka(n.sep,"newline")){yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source});return}}else s&&e.items.push({start:a});this.stack.push(o);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){const n=e.items[e.items.length-1];switch(this.type){case"newline":if(n.value){const s="end"in n.value?n.value.end:void 0;(Array.isArray(s)?s[s.length-1]:void 0)?.type==="comment"?s?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(n.start,e.indent)){const r=e.items[e.items.length-2]?.value?.end;if(Array.isArray(r)){Array.prototype.push.apply(r,n.start),r.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return;case"anchor":case"tag":if(n.value||this.indent<=e.indent)break;n.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;n.value||Ka(n.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return}if(this.indent>e.indent){const s=this.startBlockValue(e);if(s){this.stack.push(s);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){const n=e.items[e.items.length-1];if(this.type==="flow-error-end"){let s;do yield*this.pop(),s=this.peek(1);while(s?.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!n||n.sep?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return;case"map-value-ind":!n||n.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!n||n.value?e.items.push({start:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const r=this.flowScalar(this.type);!n||n.value?e.items.push({start:[],key:r,sep:[]}):n.sep?this.stack.push(r):Object.assign(n,{key:r,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}const s=this.startBlockValue(e);s?this.stack.push(s):(yield*this.pop(),yield*this.step())}else{const s=this.peek(2);if(s.type==="block-map"&&(this.type==="map-value-ind"&&s.indent===e.indent||this.type==="newline"&&!s.items[s.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&s.type!=="flow-collection"){const r=Om(s),a=yc(r);Uj(e);const o=e.end.splice(1,e.end.length);o.push(this.sourceToken);const c={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:a,key:e,sep:o}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=c}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const n=Om(e),s=yc(n);return s.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;const n=Om(e),s=yc(n);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,n){return this.type!=="comment"||this.indent<=n?!1:e.every(s=>s.type==="newline"||s.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}}function Sne(t){const e=t.prettyErrors!==!1;return{lineCounter:t.lineCounter||e&&new xne||null,prettyErrors:e}}function kne(t,e={}){const{lineCounter:n,prettyErrors:s}=Sne(e),r=new wne(n?.addNewLine),a=new gne(e);let o=null;for(const c of a.compose(r.parse(t),!0,t.length))if(!o)o=c;else if(o.options.logLevel!=="silent"){o.errors.push(new bd(c.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return s&&n&&(o.errors.forEach(Ij(t,n)),o.warnings.forEach(Ij(t,n))),o}function d_(t,e,n){let s;const r=kne(t,n);if(!r)return null;if(r.warnings.forEach(a=>eD(r.options.logLevel,a)),r.errors.length>0){if(r.options.logLevel!=="silent")throw r.errors[0];r.errors=[]}return r.toJS(Object.assign({reviver:s},n))}function Vj(t,e,n){let s=null;if(typeof e=="function"||Array.isArray(e)?s=e:n===void 0&&e&&(n=e),typeof n=="string"&&(n=n.length),typeof n=="number"){const r=Math.round(n);n=r<1?void 0:r>8?{indent:8}:{indent:r}}if(t===void 0){const{keepUndefined:r}=n??e??{};if(!r)return}return Pf(t)&&!s?t.toString(n):new dk(t,s,n).toString(n)}function f_(){return document.documentElement.classList.contains("dark")||window.matchMedia("(prefers-color-scheme: dark)").matches}function Cne({resource:t,loading:e,error:n,onSave:s,toolbarRef:r}){const[a,o]=W.useState(""),[c,h]=W.useState(""),[d,g]=W.useState(!1),[m,v]=W.useState(null),[y,x]=W.useState(!1),[w,S]=W.useState(null),[k,C]=W.useState(f_),A=W.useRef(null),B=W.useRef(null),[M,T]=W.useState(!1);W.useEffect(()=>{const F=new MutationObserver(()=>{C(f_())});F.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]});const K=window.matchMedia("(prefers-color-scheme: dark)"),J=()=>C(f_());return K.addEventListener("change",J),()=>{F.disconnect(),K.removeEventListener("change",J)}},[]);const H=W.useCallback(async F=>{const K=F.getModel();if(!K)return T(!0);const J=K.getValue().split(`
`),q=/^(\s*)(managedFields|ownerReferences|kubectl\.kubernetes\.io\/last-applied-configuration|status):/,P=J.flatMap((X,U)=>{const D=X.match(q);if(!D)return[];const O=D[1].length,R=J.slice(U+1).findIndex(E=>E.trimStart().length>0&&E.length-E.trimStart().length<=O),V=R===-1?J.length:U+1+R;return V>U+1?[{start:U+1,end:V}]:[]});for(const{start:X,end:U}of P.reverse())F.setSelection({startLineNumber:X,startColumn:1,endLineNumber:U,endColumn:1}),await F.getAction("editor.fold")?.run();F.setPosition({lineNumber:1,column:1}),F.revealLine(1),T(!0)},[]);W.useEffect(()=>{if(t){const F=Vj(t,{lineWidth:0});F!==c&&(d?h(F):(o(F),h(F),v(null),S(null),A.current&&(T(!1),setTimeout(()=>H(A.current),100))))}},[t,c,d,H]),W.useEffect(()=>{if(!a){v(null);return}try{d_(a),v(null)}catch(F){v(F instanceof Error?F.message:"Invalid YAML")}},[a]);const $=(F,K)=>{A.current=F,B.current=K,K.languages.registerDocumentFormattingEditProvider("yaml",{provideDocumentFormattingEdits:J=>{try{const q=J.getValue(),P=d_(q),X=Vj(P,{lineWidth:0});return[{range:J.getFullModelRange(),text:X}]}catch{return[]}}}),T(!1),setTimeout(()=>H(F),100)},G=F=>{const K=F||"";o(K),g(K!==c),S(null)},z=W.useCallback(()=>{o(c),g(!1),v(null),S(null)},[c]),Q=W.useCallback(async()=>{if(!(m||!d))try{x(!0),S(null);const F=d_(a);await s(F),h(a),g(!1)}catch(F){S(F instanceof Error?F.message:"Failed to save")}finally{x(!1)}},[m,d,a,s]);return e?f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsxs("div",{className:"flex items-center gap-2 text-neutral-600 dark:text-neutral-400 text-sm",children:[f.jsx(Fl,{size:14,className:"animate-spin"}),"Loading resource..."]})}):n?f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsx("div",{className:"text-sm text-red-600 dark:text-red-400",children:n})}):t?f.jsxs("div",{className:"flex flex-col h-full",children:[r&&f.jsxs(H2,{toolbarRef:r,children:[f.jsx("button",{onClick:Q,disabled:!d||!!m||y,className:"flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 hover:bg-neutral-200 dark:hover:bg-neutral-800 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Save changes",children:y?f.jsx(Fl,{size:12,className:"animate-spin"}):f.jsx(I7,{size:12})}),f.jsx("button",{onClick:z,disabled:!d||y,className:"flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-200 dark:hover:bg-neutral-800 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Reset changes",children:f.jsx(M7,{size:12})})]}),(m||w)&&f.jsx("div",{className:"shrink-0 flex items-center gap-2 px-4 py-2 bg-red-50 dark:bg-red-500/10 border-b border-red-200 dark:border-red-500/20",children:m?f.jsxs(f.Fragment,{children:[f.jsx(mo,{size:14,className:"text-red-500 shrink-0"}),f.jsxs("span",{className:"text-xs text-red-700 dark:text-red-400",children:["Invalid YAML: ",m]})]}):f.jsxs(f.Fragment,{children:[f.jsx(aS,{size:14,className:"text-red-500 shrink-0"}),f.jsx("span",{className:"text-xs text-red-700 dark:text-red-400",children:w})]})}),f.jsx("div",{className:`flex-1 min-h-0 transition-opacity duration-150 ${M?"opacity-100":"opacity-0"}`,children:f.jsx(mte,{height:"100%",language:"yaml",theme:k?"vs-dark":"light",value:a,onChange:G,onMount:$,loading:f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsx(Fl,{size:20,className:"animate-spin text-neutral-400"})}),options:{minimap:{enabled:!1},fontSize:13,fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace',lineNumbers:"on",scrollBeyondLastLine:!1,wordWrap:"on",wrappingIndent:"indent",automaticLayout:!0,tabSize:2,insertSpaces:!0,renderWhitespace:"selection",bracketPairColorization:{enabled:!0},guides:{indentation:!0,bracketPairs:!0},padding:{top:12,bottom:12},scrollbar:{verticalScrollbarSize:10,horizontalScrollbarSize:10}}})})]}):f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"No resource loaded"})})}const Nne=new Set(["managedFields"]);function Ene(t){const e=t.metadata;if(!e)return t;const n=Object.fromEntries(Object.entries(e).filter(([s])=>!Nne.has(s)));return{...t,metadata:n}}function jD({isOpen:t,onClose:e,otherPanelOpen:n=!1,resource:s}){const{context:r}=Ir(),[a,o]=W.useState(null),[c,h]=W.useState(!1),[d,g]=W.useState(null),[m,v]=W.useState([]),[y,x]=W.useState(!1),[w,S]=W.useState("yaml"),[k,C]=W.useState(null),[A,B]=W.useState(null),[M,T]=W.useState(null),H=W.useRef(null),$=W.useRef(null),G=5e3,z=W.useCallback(async()=>{if(!(!s||!s.name||!s.kind))try{const Ce=await C5(r,s.kind,s.apiVersion);if(Ce){const Te=await y_(r,Ce,s.name,s.namespace);o(Te)}const Ge=await v_(r,s.name,s.namespace);v(Ge)}catch{}},[r,s]);W.useEffect(()=>{if(!t||!s?.name||!a)return;const Ce=setInterval(()=>{z()},G);return()=>clearInterval(Ce)},[t,s?.name,a,z]);const Q=a?FB(a):[],F=async Ce=>{B(null),C(Ce.id);try{await Ce.execute(r,a),z()}catch(Ge){B(Ge instanceof Error?Ge.message:"Action failed")}finally{C(null),T(null)}},K=Ce=>{Ce.confirm?T(Ce):F(Ce)},J=W.useCallback(async Ce=>{if(!s||!s.name||!H.current)throw new Error("Resource configuration not available");const Ge=await rT(r,H.current,s.name,Ce,s.namespace);o(Ge)},[r,s]);if(W.useEffect(()=>{const Ce=s?.kind||"";if(S(A3(Ce)?"overview":"yaml"),!s||!s.name||!s.kind){o(null),g(null),v([]);return}const Ge=s.name,Te=s.namespace,tt=s.apiVersion,mt=async()=>{h(!0),g(null);try{const Lt=await C5(r,Ce,tt);if(!Lt){g(`Unknown resource kind: ${Ce}`),h(!1);return}H.current=Lt;const bn=await y_(r,Lt,Ge,Te);o(bn)}catch(Lt){g(Lt instanceof Error?Lt.message:"Failed to fetch resource"),o(null)}finally{h(!1)}},ht=async()=>{x(!0);try{const Lt=await v_(r,Ge,Te);v(Lt)}catch(Lt){console.error("Failed to fetch events:",Lt),v([])}finally{x(!1)}};mt(),ht()},[r,s]),!t||!s||!s.name)return null;const q=a,P=q?Ene(q):null,X=s.name,U=s.kind||"Resource",D=A3(U),O=new Set(["pod-template-hash","controller-revision-hash","pod-template-generation"]),R=new Set(["kubectl.kubernetes.io/last-applied-configuration","deployment.kubernetes.io/revision","control-plane.alpha.kubernetes.io/leader","deprecated.daemonset.template.generation","kubernetes.io/description"]),V=P?.metadata,E=V?.labels,Z=V?.annotations,ue=E?Object.keys(E).filter(Ce=>!O.has(Ce)).length:0,ne=Z?Object.keys(Z).filter(Ce=>!R.has(Ce)).length:0,de=ue>0||ne>0,Ee=["Pod","Deployment","DaemonSet","ReplicaSet","StatefulSet","Job"].includes(U)&&!!s.namespace,et=U==="Pod"&&!!s.namespace;return f.jsxs("aside",{className:"fixed top-0 h-screen bg-white border-l border-neutral-200 dark:bg-neutral-900 dark:border-neutral-800 flex flex-col z-20 shadow-xl transition-all duration-300",style:{right:n?"28rem":"0",width:n?"28rem":"40rem"},children:["      ",f.jsxs("header",{className:"shrink-0 h-16 flex items-center justify-between pl-5 pr-4 border-b border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900",children:[f.jsx("div",{className:"flex items-center gap-3 min-w-0",children:f.jsxs("div",{className:"min-w-0",children:[f.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-neutral-100 truncate",children:X}),f.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-500",children:s.namespace||"cluster-scoped"})]})}),f.jsx("button",{onClick:e,className:"p-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-400 dark:hover:text-neutral-200 dark:hover:bg-neutral-800 rounded-md transition-colors",title:"Close",children:f.jsx(aS,{size:18})})]}),f.jsxs("div",{className:"shrink-0 flex items-center border-b border-neutral-200 dark:border-neutral-800 bg-neutral-50 dark:bg-neutral-900/50",children:[f.jsxs("div",{className:"flex",children:[D&&f.jsx("button",{onClick:()=>S("overview"),className:`px-4 py-2.5 text-sm font-medium transition-colors ${w==="overview"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 -mb-px":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200"}`,children:"Overview"}),de&&f.jsx("button",{onClick:()=>S("metadata"),className:`px-4 py-2.5 text-sm font-medium transition-colors ${w==="metadata"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 -mb-px":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200"}`,children:"Metadata"}),f.jsx("button",{onClick:()=>S("yaml"),className:`px-4 py-2.5 text-sm font-medium transition-colors ${w==="yaml"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 -mb-px":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200"}`,children:"Manifest"}),m.length>0&&f.jsx("button",{onClick:()=>S("events"),className:`px-4 py-2.5 text-sm font-medium transition-colors ${w==="events"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 -mb-px":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200"}`,children:"Events"}),Ee&&f.jsx("button",{onClick:()=>S("logs"),className:`px-4 py-2.5 text-sm font-medium transition-colors ${w==="logs"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 -mb-px":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200"}`,children:"Logs"}),et&&f.jsx("button",{onClick:()=>S("terminal"),className:`px-4 py-2.5 text-sm font-medium transition-colors ${w==="terminal"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 -mb-px":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200"}`,children:"Terminal"})]}),f.jsxs("div",{className:"ml-auto pr-4 flex items-center gap-1",children:[f.jsx("div",{ref:$,className:"flex items-center gap-1"}),w==="overview"&&Q.length>0&&f.jsx(f.Fragment,{children:Q.map(Ce=>{const Ge=Ce.isDisabled?.(a),Te=Ge===!0||typeof Ge=="string",tt=typeof Ge=="string"?Ge:void 0,mt=k===Ce.id;return f.jsx("button",{onClick:()=>K(Ce),disabled:Te||mt,title:tt||Ce.label,className:`
                      flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium rounded transition-colors
                      ${Te||mt?"opacity-50 cursor-not-allowed":""}
                      ${Ce.variant==="primary"?"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 hover:bg-neutral-200 dark:hover:bg-neutral-800":Ce.variant==="warning"?"text-amber-600 dark:text-amber-400 hover:text-amber-700 dark:hover:text-amber-300 hover:bg-neutral-200 dark:hover:bg-neutral-800":Ce.variant==="danger"?"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 hover:bg-neutral-200 dark:hover:bg-neutral-800":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-200 dark:hover:bg-neutral-800"}
                    `,children:mt?f.jsx(gn,{size:12,className:"animate-spin"}):Ce.icon},Ce.id)})})]})]}),A&&f.jsx("div",{className:"shrink-0 mx-4 mt-2 p-2 bg-red-500/10 border border-red-500/30 rounded text-red-600 dark:text-red-400 text-xs",children:A}),M&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:f.jsxs("div",{className:"bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg p-4 max-w-md mx-4 shadow-xl",children:[f.jsx("h3",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-200 mb-2",children:M.confirm?.title}),f.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400 mb-4",children:M.confirm?.message}),f.jsxs("div",{className:"flex justify-end gap-2",children:[f.jsx("button",{onClick:()=>T(null),className:"px-3 py-1.5 text-xs font-medium text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded transition-colors",children:"Cancel"}),f.jsxs("button",{onClick:()=>F(M),disabled:k===M.id,className:`
                  px-3 py-1.5 text-xs font-medium text-white rounded transition-colors
                  ${M.variant==="danger"?"bg-red-600 hover:bg-red-700":M.variant==="warning"?"bg-amber-600 hover:bg-amber-700":"bg-blue-600 hover:bg-blue-700"}
                  ${k===M.id?"opacity-50 cursor-not-allowed":""}
                `,children:[k===M.id?f.jsx(gn,{size:12,className:"animate-spin inline mr-1"}):null,M.confirm?.confirmLabel||"Confirm"]})]})]})}),w==="overview"&&D&&f.jsxs("div",{className:"flex-1 overflow-auto p-4",children:[c&&f.jsxs("div",{className:"flex items-center gap-2 text-neutral-600 dark:text-neutral-400 text-sm mb-4",children:[f.jsx(Fl,{size:14,className:"animate-spin"}),"Loading full resource..."]}),d&&f.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mb-4",children:d}),a&&!c&&f.jsx(uX,{resource:a,hideActions:!0})]}),w==="yaml"&&f.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:f.jsx(Cne,{resource:a,loading:c,error:d,onSave:J,toolbarRef:$})}),w==="metadata"&&f.jsx("div",{className:"flex-1 overflow-auto p-5",children:P&&f.jsx(eee,{metadata:P.metadata})}),w==="events"&&f.jsx("div",{className:"flex-1 overflow-auto p-5",children:f.jsx(see,{events:m,loading:y})}),w==="logs"&&Ee&&a&&f.jsx("div",{className:"flex-1 overflow-hidden",children:f.jsx(NX,{resource:a,toolbarRef:$})}),w==="terminal"&&et&&a&&f.jsx("div",{className:"flex-1 overflow-hidden",children:f.jsx(ZZ,{resource:a,toolbarRef:$})})]})}const p_="ai",Ih="detail";function Fj(t){return t.name.charAt(0).toUpperCase()+t.name.slice(1)}function Ane(t){const e=He.c(73),{resource:n}=t,{namespace:s}=Ir();let r;e[0]!==n?(r=()=>Fj(n),e[0]=n,e[1]=r):r=e[1];const[a,o]=W.useState(r);let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=[],e[2]=c):c=e[2];const[h,d]=W.useState(c),[g,m]=W.useState(null),{hiddenColumns:v,toggleColumn:y}=OP(),{isOpen:x,open:w,close:S,toggle:k}=BP(),C=x(p_),A=x(Ih);let B,M;e[3]!==n?(B=()=>{o(Fj(n))},M=[n],e[3]=n,e[4]=B,e[5]=M):(B=e[4],M=e[5]),W.useEffect(B,M);let T;e[6]!==S?(T=()=>{m(null),S(Ih)},e[6]=S,e[7]=T):T=e[7];let H;e[8]!==S||e[9]!==s||e[10]!==n?(H=[n,s,S],e[8]=S,e[9]=s,e[10]=n,e[11]=H):H=e[11],W.useEffect(T,H);let $;e[12]!==S||e[13]!==w?($=tt=>{m(tt),tt?w(Ih):S(Ih)},e[12]=S,e[13]=w,e[14]=$):$=e[14];const G=$;let z;e[15]===Symbol.for("react.memo_cache_sentinel")?(z=tt=>{d(tt)},e[15]=z):z=e[15];const Q=z,F=()=>{const tt=[A,C].filter(Boolean).length;return tt>=2?"pr-[56rem]":tt===1?"pr-[40rem]":""},K="flex-1 flex flex-col h-full min-w-0",J=`shrink-0 h-14 flex items-center justify-between px-5 mt-2 transition-all duration-300 ${F()}`;let q;e[16]!==a?(q=f.jsx("h2",{className:"text-lg font-medium text-neutral-900 dark:text-neutral-100",children:a}),e[16]=a,e[17]=q):q=e[17];let P;e[18]!==s?(P=s&&f.jsx("span",{className:"px-2.5 py-0.5 rounded-md text-xs bg-neutral-200/80 text-neutral-500 dark:bg-neutral-800 dark:text-neutral-400",children:s}),e[18]=s,e[19]=P):P=e[19];let X;e[20]!==q||e[21]!==P?(X=f.jsxs("div",{className:"flex items-center gap-4",children:[q,P]}),e[20]=q,e[21]=P,e[22]=X):X=e[22];let U;e[23]!==h||e[24]!==v||e[25]!==y?(U=f.jsx(zP,{columns:h,hiddenColumns:v,onToggleColumn:y}),e[23]=h,e[24]=v,e[25]=y,e[26]=U):U=e[26];let D;e[27]!==C||e[28]!==k?(D=Hd().ai&&f.jsx("button",{onClick:()=>k(p_),className:`p-2 rounded-md transition-colors ${C?"text-sky-400 hover:text-sky-300 hover:bg-neutral-100 dark:hover:bg-neutral-800":"text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800"}`,title:"AI Assistant",children:f.jsx(Y7,{size:18})}),e[27]=C,e[28]=k,e[29]=D):D=e[29];let O;e[30]!==U||e[31]!==D?(O=f.jsxs("div",{className:"flex items-center gap-2",children:[U,D]}),e[30]=U,e[31]=D,e[32]=O):O=e[32];let R;e[33]!==J||e[34]!==X||e[35]!==O?(R=f.jsxs("header",{className:J,children:[X,O]}),e[33]=J,e[34]=X,e[35]=O,e[36]=R):R=e[36];let V;e[37]!==Q||e[38]!==G||e[39]!==v||e[40]!==n||e[41]!==g?(V=f.jsx("section",{className:"flex-1 min-h-0 overflow-hidden",children:f.jsx(PP,{config:n,hiddenColumns:v,onColumnsLoaded:Q,selectedItem:g,onSelectItem:G})}),e[37]=Q,e[38]=G,e[39]=v,e[40]=n,e[41]=g,e[42]=V):V=e[42];let E;e[43]!==R||e[44]!==V?(E=f.jsxs("main",{className:K,children:[R,V]}),e[43]=R,e[44]=V,e[45]=E):E=e[45];let Z;e[46]!==S?(Z=()=>S(p_),e[46]=S,e[47]=Z):Z=e[47];const ue=g?.object.metadata.namespace||s||"all namespaces",ne=n.group?`${n.kind} (${n.group}/${n.version})`:`${n.kind} (${n.version})`,de=g?.object.metadata.name;let we;e[48]!==ue||e[49]!==ne||e[50]!==de?(we={currentNamespace:ue,selectedResourceKind:ne,selectedResourceName:de},e[48]=ue,e[49]=ne,e[50]=de,e[51]=we):we=e[51];let Ee;e[52]!==C||e[53]!==A||e[54]!==Z||e[55]!==we?(Ee=f.jsx(jq,{isOpen:C,onClose:Z,otherPanelOpen:A,environment:we}),e[52]=C,e[53]=A,e[54]=Z,e[55]=we,e[56]=Ee):Ee=e[56];let et;e[57]!==S?(et=()=>{m(null),S(Ih)},e[57]=S,e[58]=et):et=e[58];let Ce;e[59]!==n.group||e[60]!==n.kind||e[61]!==n.version||e[62]!==g?(Ce=g?{name:g.object.metadata.name,namespace:g.object.metadata.namespace,uid:g.object.metadata.uid,resourceVersion:g.object.metadata.resourceVersion,kind:n.kind,apiVersion:n.group?`${n.group}/${n.version}`:n.version}:null,e[59]=n.group,e[60]=n.kind,e[61]=n.version,e[62]=g,e[63]=Ce):Ce=e[63];let Ge;e[64]!==C||e[65]!==A||e[66]!==et||e[67]!==Ce?(Ge=f.jsx(jD,{isOpen:A,onClose:et,otherPanelOpen:C,resource:Ce}),e[64]=C,e[65]=A,e[66]=et,e[67]=Ce,e[68]=Ge):Ge=e[68];let Te;return e[69]!==E||e[70]!==Ee||e[71]!==Ge?(Te=f.jsxs(f.Fragment,{children:[E,Ee,Ge]}),e[69]=E,e[70]=Ee,e[71]=Ge,e[72]=Te):Te=e[72],Te}const iu={Pod:al,Deployment:nT,DaemonSet:eT,StatefulSet:go,Job:lS,CronJob:ll,Service:F7,Ingress:Qi,Gateway:ur,HTTPRoute:$d,GRPCRoute:$d,NetworkPolicy:lu,PersistentVolume:Us,PersistentVolumeClaim:Qj,ConfigMap:ea,Secret:dg,Node:mi},jne={Pod:{bg:"#dcfce7",bgDark:"#14532d",border:"#22c55e",borderDark:"#4ade80",text:"#166534",textDark:"#86efac"},Deployment:{bg:"#dbeafe",bgDark:"#1e3a8a",border:"#3b82f6",borderDark:"#60a5fa",text:"#1e40af",textDark:"#93c5fd"},DaemonSet:{bg:"#f3e8ff",bgDark:"#581c87",border:"#a855f7",borderDark:"#c084fc",text:"#6b21a8",textDark:"#d8b4fe"},StatefulSet:{bg:"#ede9fe",bgDark:"#5b21b6",border:"#8b5cf6",borderDark:"#a78bfa",text:"#5b21b6",textDark:"#c4b5fd"},Job:{bg:"#fef3c7",bgDark:"#78350f",border:"#f59e0b",borderDark:"#fbbf24",text:"#92400e",textDark:"#fcd34d"},CronJob:{bg:"#ffedd5",bgDark:"#7c2d12",border:"#f97316",borderDark:"#fb923c",text:"#9a3412",textDark:"#fdba74"},Service:{bg:"#cffafe",bgDark:"#164e63",border:"#06b6d4",borderDark:"#22d3ee",text:"#155e75",textDark:"#67e8f9"},Ingress:{bg:"#ccfbf1",bgDark:"#134e4a",border:"#14b8a6",borderDark:"#2dd4bf",text:"#115e59",textDark:"#5eead4"},Gateway:{bg:"#d1fae5",bgDark:"#065f46",border:"#10b981",borderDark:"#34d399",text:"#065f46",textDark:"#6ee7b7"},HTTPRoute:{bg:"#a7f3d0",bgDark:"#047857",border:"#34d399",borderDark:"#6ee7b7",text:"#047857",textDark:"#a7f3d0"},GRPCRoute:{bg:"#a7f3d0",bgDark:"#047857",border:"#34d399",borderDark:"#6ee7b7",text:"#047857",textDark:"#a7f3d0"},NetworkPolicy:{bg:"#fef3c7",bgDark:"#78350f",border:"#f59e0b",borderDark:"#fbbf24",text:"#92400e",textDark:"#fcd34d"},PersistentVolume:{bg:"#f1f5f9",bgDark:"#334155",border:"#64748b",borderDark:"#94a3b8",text:"#334155",textDark:"#cbd5e1"},PersistentVolumeClaim:{bg:"#f8fafc",bgDark:"#475569",border:"#94a3b8",borderDark:"#cbd5e1",text:"#475569",textDark:"#e2e8f0"},ConfigMap:{bg:"#fef9c3",bgDark:"#713f12",border:"#eab308",borderDark:"#facc15",text:"#854d0e",textDark:"#fde047"},Secret:{bg:"#fee2e2",bgDark:"#7f1d1d",border:"#ef4444",borderDark:"#f87171",text:"#991b1b",textDark:"#fca5a5"}},Tne={bg:"#f3f4f6",bgDark:"#374151",border:"#9ca3af",borderDark:"#6b7280",text:"#374151",textDark:"#d1d5db"};function Yl(t,e){const n=jne[t]||Tne;return{bg:e?n.bgDark:n.bg,border:e?n.borderDark:n.border,text:e?n.textDark:n.text}}function TD(t){let e="Unknown",n="#9ca3af",s="#6b7280";if(t.kind==="Pod"){const r=t.status?.phase||"Unknown";e=r,r==="Running"?(n="#22c55e",s="#4ade80"):r==="Pending"?(n="#eab308",s="#facc15"):r==="Failed"?(n="#ef4444",s="#f87171"):r==="Succeeded"&&(n="#22c55e",s="#4ade80")}else if(t.kind==="DaemonSet"){const r=t.status?.desiredNumberScheduled||0,a=t.status?.numberReady||0;e=`${a}/${r}`,a===r&&r>0?(n="#22c55e",s="#4ade80"):(n="#eab308",s="#facc15")}else if(["Deployment","StatefulSet"].includes(t.kind)){const r=t.status?.replicas||0,a=t.status?.readyReplicas||0;e=`${a}/${r}`,a===r&&r>0?(n="#22c55e",s="#4ade80"):(n="#eab308",s="#facc15")}else if(t.kind==="Service")e="Active",n="#22c55e",s="#4ade80";else if(t.kind==="Job"){const r=t.status?.succeeded||0,a=t.status?.failed||0;r>0?(e="Succeeded",n="#22c55e",s="#4ade80"):a>0?(e="Failed",n="#ef4444",s="#f87171"):(e="Running",n="#eab308",s="#facc15")}else t.kind==="PersistentVolumeClaim"?(e=t.status?.phase||"Unknown",e==="Bound"?(n="#22c55e",s="#4ade80"):(n="#eab308",s="#facc15")):["ConfigMap","Secret","Ingress","CronJob"].includes(t.kind)&&(e="Active",n="#22c55e",s="#4ade80");return{status:e,color:n,colorDark:s}}const Ph=160,m_=60,qj=48,cg=120,Vl=32,s0=6,Zw=32,Bc=8,Gi=20,Qa=4,zd=5,One=32,Rne=10,Fa=12,Kj=36,Rm=20;function Bne(){const{context:t,namespace:e}=Ir(),[n,s]=W.useState([]),[r,a]=W.useState([]),[o,c]=W.useState(!0),[h,d]=W.useState(null),[g,m]=W.useState({x:40,y:40,scale:1}),[v,y]=W.useState(!1),[x,w]=W.useState({x:0,y:0}),[S,k]=W.useState(null),[C,A]=W.useState(!1),B=W.useRef(null);W.useEffect(()=>{const U=()=>{const V=document.documentElement.classList.contains("dark"),E=window.matchMedia("(prefers-color-scheme: dark)");A(V||E.matches)};U();const D=new MutationObserver(U);D.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]});const O=window.matchMedia("(prefers-color-scheme: dark)"),R=()=>U();return O.addEventListener("change",R),()=>{D.disconnect(),O.removeEventListener("change",R)}},[]);const M=W.useCallback(async()=>{c(!0),d(null);try{const U=e?`/namespaces/${e}`:"",D=[{path:`/api/v1${U}/pods`,kind:"Pod"},{path:`/apis/apps/v1${U}/deployments`,kind:"Deployment"},{path:`/apis/apps/v1${U}/replicasets`,kind:"ReplicaSet"},{path:`/apis/apps/v1${U}/statefulsets`,kind:"StatefulSet"},{path:`/apis/apps/v1${U}/daemonsets`,kind:"DaemonSet"},{path:`/api/v1${U}/services`,kind:"Service"},{path:`/api/v1${U}/configmaps`,kind:"ConfigMap"},{path:`/api/v1${U}/secrets`,kind:"Secret"},{path:`/api/v1${U}/persistentvolumeclaims`,kind:"PersistentVolumeClaim"},{path:`/apis/batch/v1${U}/jobs`,kind:"Job"},{path:`/apis/batch/v1${U}/cronjobs`,kind:"CronJob"},{path:`/apis/networking.k8s.io/v1${U}/ingresses`,kind:"Ingress"},{path:`/apis/networking.k8s.io/v1${U}/networkpolicies`,kind:"NetworkPolicy"},{path:`/apis/gateway.networking.k8s.io/v1${U}/gateways`,kind:"Gateway"},{path:`/apis/gateway.networking.k8s.io/v1${U}/httproutes`,kind:"HTTPRoute"},{path:`/apis/gateway.networking.k8s.io/v1${U}/grpcroutes`,kind:"GRPCRoute"}],O=await Promise.allSettled(D.map(async({path:E,kind:Z})=>{try{return((await aa(E,t)).items||[]).map(ne=>({...ne,kind:Z}))}catch{return[]}})),R=[];O.forEach(E=>{E.status==="fulfilled"&&R.push(...E.value)}),a(R);const V=Fne(R);s(V)}catch(U){d(U instanceof Error?U.message:"Failed to load resources")}finally{c(!1)}},[t,e]);W.useEffect(()=>{M()},[M]);const T=W.useCallback(U=>{U.button===0&&(y(!0),w({x:U.clientX-g.x,y:U.clientY-g.y}))},[g.x,g.y]),H=W.useCallback(U=>{v&&m(D=>({...D,x:U.clientX-x.x,y:U.clientY-x.y}))},[v,x]),$=W.useCallback(()=>{y(!1)},[]),G=W.useCallback(U=>{U.preventDefault();const D=U.deltaY>0?.9:1.1,O=Math.min(Math.max(g.scale*D,.1),3),R=B.current?.getBoundingClientRect();if(R){const V=U.clientX-R.left,E=U.clientY-R.top,Z=V-(V-g.x)*(O/g.scale),ue=E-(E-g.y)*(O/g.scale);m({x:Z,y:ue,scale:O})}},[g]),z=()=>m(U=>({...U,scale:Math.min(U.scale*1.2,3)})),Q=()=>m(U=>({...U,scale:Math.max(U.scale/1.2,.1)})),F=()=>{if(!B.current||n.length===0)return;const U=B.current.getBoundingClientRect(),D=Math.max(...n.map(Z=>Z.x+Z.width),800),O=Math.max(...n.map(Z=>Z.y+Z.height),600),R=(U.width-80)/D,V=(U.height-80)/O,E=Math.min(R,V,1);m({x:40,y:40,scale:E})},K=W.useMemo(()=>{if(n.length===0)return{width:800,height:600};const U=Math.max(...n.map(O=>O.x+O.width)),D=Math.max(...n.map(O=>O.y+O.height));return{width:U+100,height:D+100}},[n]);W.useEffect(()=>{if(n.length>0&&B.current){const U=B.current.getBoundingClientRect(),D=(U.width-80)/K.width,O=(U.height-80)/K.height,R=Math.min(D,O,1);m({x:40,y:40,scale:R})}},[n,K]),W.useEffect(()=>{k(null)},[e]);const J=W.useCallback(U=>{k(U)},[]),q=W.useCallback((U,D,O)=>{const R=r.find(V=>V.kind===U&&V.metadata.name===D&&V.metadata.namespace===O);R&&k({uid:R.metadata.uid,resource:R,x:0,y:0,width:0,height:0})},[r]),P=S?{name:S.resource.metadata.name,namespace:S.resource.metadata.namespace,uid:S.resource.metadata.uid,kind:S.resource.kind,apiVersion:S.resource.apiVersion}:null,X=S!==null;return o?f.jsx("div",{className:"flex items-center justify-center h-full bg-white dark:bg-neutral-950",children:f.jsxs("div",{className:"flex items-center gap-2 text-neutral-500",children:[f.jsx(gn,{className:"animate-spin",size:20}),f.jsx("span",{children:"Loading resources..."})]})}):h?f.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4 bg-white dark:bg-neutral-950",children:[f.jsx("div",{className:"text-red-500",children:h}),f.jsxs("button",{onClick:M,className:"flex items-center gap-2 px-4 py-2 text-sm bg-neutral-100 hover:bg-neutral-200 dark:bg-neutral-800 dark:hover:bg-neutral-700 rounded-md transition-colors",children:[f.jsx(gn,{size:16}),"Retry"]})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:`h-full w-full relative bg-neutral-100 dark:bg-neutral-900 overflow-hidden transition-all duration-300 ${X?"mr-120":""}`,children:[f.jsxs("div",{className:"absolute top-4 right-4 z-10 flex items-center gap-1 bg-white dark:bg-neutral-800 rounded-lg shadow-sm border border-neutral-200 dark:border-neutral-700",children:[f.jsx("button",{onClick:M,className:"p-2 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-l-lg",title:"Refresh",children:f.jsx(gn,{size:16,className:"text-neutral-600 dark:text-neutral-400"})}),f.jsx("div",{className:"w-px h-5 bg-neutral-200 dark:bg-neutral-700"}),f.jsx("button",{onClick:z,className:"p-2 hover:bg-neutral-100 dark:hover:bg-neutral-700",title:"Zoom In",children:f.jsx(cP,{size:16,className:"text-neutral-600 dark:text-neutral-400"})}),f.jsx("button",{onClick:Q,className:"p-2 hover:bg-neutral-100 dark:hover:bg-neutral-700",title:"Zoom Out",children:f.jsx(hP,{size:16,className:"text-neutral-600 dark:text-neutral-400"})}),f.jsx("button",{onClick:F,className:"p-2 hover:bg-neutral-100 dark:hover:bg-neutral-700",title:"Fit View",children:f.jsx(g7,{size:16,className:"text-neutral-600 dark:text-neutral-400"})}),f.jsxs("div",{className:"px-2 text-xs text-neutral-500 border-l border-neutral-200 dark:border-neutral-700 rounded-r-lg",children:[Math.round(g.scale*100),"%"]})]}),f.jsxs("div",{className:"absolute bottom-4 right-4 z-10 px-3 py-2 bg-white dark:bg-neutral-800 rounded-lg shadow-sm border border-neutral-200 dark:border-neutral-700",children:[f.jsx("div",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-400 mb-2",children:"Connections"}),f.jsxs("div",{className:"flex flex-col gap-1 text-xs",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{width:"24",height:"8",children:f.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#64748b",strokeWidth:"2"})}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Owner"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{width:"24",height:"8",children:f.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#8b5cf6",strokeWidth:"2",strokeDasharray:"4,2"})}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Selector"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{width:"24",height:"8",children:f.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#06b6d4",strokeWidth:"2",strokeDasharray:"4,2"})}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Service"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{width:"24",height:"8",children:f.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#14b8a6",strokeWidth:"2",strokeDasharray:"4,2"})}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Ingress"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{width:"24",height:"8",children:f.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#10b981",strokeWidth:"2",strokeDasharray:"4,2"})}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Gateway"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{width:"24",height:"8",children:f.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#f59e0b",strokeWidth:"1.5",strokeDasharray:"2,2"})}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"NetworkPolicy"})]})]})]}),f.jsx("div",{ref:B,className:"w-full h-full cursor-grab active:cursor-grabbing overflow-hidden",onMouseDown:T,onMouseMove:H,onMouseUp:$,onMouseLeave:$,onWheel:G,children:f.jsxs("svg",{width:K.width,height:K.height,style:{transform:`translate(${g.x}px, ${g.y}px) scale(${g.scale})`,transformOrigin:"0 0"},children:[f.jsxs("defs",{children:[f.jsx("marker",{id:"arrow-owner",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#64748b"})}),f.jsx("marker",{id:"arrow-selector",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#8b5cf6"})}),f.jsx("marker",{id:"arrow-service",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#06b6d4"})}),f.jsx("marker",{id:"arrow-ingress",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#14b8a6"})}),f.jsx("marker",{id:"arrow-gateway",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#10b981"})}),f.jsx("marker",{id:"arrow-network-policy",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"5",markerHeight:"5",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#f59e0b"})}),f.jsx("marker",{id:"arrow-owner-dark",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#94a3b8"})}),f.jsx("marker",{id:"arrow-selector-dark",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#c084fc"})}),f.jsx("marker",{id:"arrow-service-dark",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#22d3ee"})}),f.jsx("marker",{id:"arrow-ingress-dark",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#2dd4bf"})}),f.jsx("marker",{id:"arrow-gateway-dark",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#34d399"})}),f.jsx("marker",{id:"arrow-network-policy-dark",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"5",markerHeight:"5",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#fbbf24"})})]}),n.map(U=>f.jsx(Mne,{application:U,onNodeClick:J,onConfigClick:q,isDarkMode:C},U.id))]})})]}),f.jsx(jD,{isOpen:X,onClose:()=>k(null),resource:P})]})}function Mne(t){const e=He.c(40),{application:n,onNodeClick:s,onConfigClick:r,isDarkMode:a}=t;let o;e[0]!==n.nodes?(o=new Map(n.nodes.map(Dne)),n.nodes.forEach(C=>{C.childPods&&C.childPods.forEach(A=>{o.set(A.uid,{...A,x:C.x+A.x,y:C.y+A.y})})}),e[0]=n.nodes,e[1]=o):o=e[1];const c=o;let h;e[2]!==n.nodes?(h=n.nodes.filter(C=>!C.resource.kind.match(/^Pod$/)||!n.nodes.some(A=>["Deployment","StatefulSet","DaemonSet","Job"].includes(A.resource.kind)&&A.childPods?.some(B=>B.uid===C.uid))),e[2]=n.nodes,e[3]=h):h=e[3];const d=h,g=n.name&&n.name.length>0,m=a?"#262626":"white",v=a?"#404040":"#e5e7eb";let y;e[4]!==n.height||e[5]!==n.width||e[6]!==n.x||e[7]!==n.y||e[8]!==m||e[9]!==v?(y=f.jsx("rect",{x:n.x,y:n.y,width:n.width,height:n.height,rx:12,fill:m,stroke:v,strokeWidth:1}),e[4]=n.height,e[5]=n.width,e[6]=n.x,e[7]=n.y,e[8]=m,e[9]=v,e[10]=y):y=e[10];let x;e[11]!==n.name||e[12]!==n.namespace||e[13]!==n.width||e[14]!==n.x||e[15]!==n.y||e[16]!==a||e[17]!==g?(x=g&&f.jsxs("g",{children:[f.jsx("text",{x:n.x+10,y:n.y+13,fontSize:12,fontWeight:600,fill:a?"#e5e5e5":"#374151",dominantBaseline:"hanging",children:n.name.length>Math.floor((n.width-20)/7)?n.name.slice(0,Math.floor((n.width-20)/7)-1)+"":n.name}),n.namespace&&f.jsx("text",{x:n.x+10,y:n.y+26,fontSize:10,fill:a?"#a3a3a3":"#6b7280",dominantBaseline:"hanging",children:n.namespace.length>Math.floor((n.width-20)/6)?n.namespace.slice(0,Math.floor((n.width-20)/6)-1)+"":n.namespace})]}),e[11]=n.name,e[12]=n.namespace,e[13]=n.width,e[14]=n.x,e[15]=n.y,e[16]=a,e[17]=g,e[18]=x):x=e[18];let w;if(e[19]!==n.edges||e[20]!==a||e[21]!==c){let C;e[23]!==a||e[24]!==c?(C=(A,B)=>{const M=c.get(A.from),T=c.get(A.to);return!M||!T||A.type==="owner"&&(M.childPods?.some($=>$.uid===T.uid)||T.childPods?.some($=>$.uid===M.uid))?null:f.jsx(Lne,{from:M,to:T,type:A.type,isDarkMode:a},B)},e[23]=a,e[24]=c,e[25]=C):C=e[25],w=n.edges.map(C),e[19]=n.edges,e[20]=a,e[21]=c,e[22]=w}else w=e[22];let S;if(e[26]!==a||e[27]!==r||e[28]!==s||e[29]!==d){let C;e[31]!==a||e[32]!==r||e[33]!==s?(C=A=>f.jsx(Ine,{node:A,onClick:()=>s(A),onPodClick:s,onConfigClick:r,isDarkMode:a},A.uid),e[31]=a,e[32]=r,e[33]=s,e[34]=C):C=e[34],S=d.map(C),e[26]=a,e[27]=r,e[28]=s,e[29]=d,e[30]=S}else S=e[30];let k;return e[35]!==y||e[36]!==x||e[37]!==w||e[38]!==S?(k=f.jsxs("g",{children:[y,x,w,S]}),e[35]=y,e[36]=x,e[37]=w,e[38]=S,e[39]=k):k=e[39],k}function Dne(t){return[t.uid,t]}function Lne(t){const e=He.c(14),{from:n,to:s,type:r,isDarkMode:a}=t,o=n.x+n.width,c=n.y+n.height/2,h=s.x,d=s.y+s.height/2,g=(o+h)/2,m=`M ${o} ${c} C ${g} ${c}, ${g} ${d}, ${h} ${d}`,v=a?"#94a3b8":"#64748b",y=a?"#c084fc":"#8b5cf6",x=a?"#22d3ee":"#06b6d4",w=a?"#2dd4bf":"#14b8a6",S=a?"#34d399":"#10b981",k=a?"#fbbf24":"#f59e0b";let C;e[0]!==v||e[1]!==y||e[2]!==x||e[3]!==w||e[4]!==S||e[5]!==k?(C={owner:v,selector:y,service:x,ingress:w,gateway:S,"network-policy":k},e[0]=v,e[1]=y,e[2]=x,e[3]=w,e[4]=S,e[5]=k,e[6]=C):C=e[6];const A=C;let B;e[7]===Symbol.for("react.memo_cache_sentinel")?(B={owner:void 0,selector:"6,3",service:"6,3",ingress:"4,2",gateway:"4,2","network-policy":"2,2"},e[7]=B):B=e[7];const M=B,T=A[r],H=r==="network-policy"?1.5:2,$=M[r],G=`url(#arrow-${r}${a?"-dark":""})`;let z;return e[8]!==m||e[9]!==H||e[10]!==$||e[11]!==G||e[12]!==T?(z=f.jsx("path",{d:m,fill:"none",stroke:T,strokeWidth:H,strokeDasharray:$,markerEnd:G}),e[8]=m,e[9]=H,e[10]=$,e[11]=G,e[12]=T,e[13]=z):z=e[13],z}function Ine(t){const e=He.c(62),{node:n,onClick:s,onPodClick:r,onConfigClick:a,isDarkMode:o}=t,{resource:c,x:h,y:d,width:g,height:m}=n;if(c.kind==="NetworkPolicy"){let D;return e[0]!==o||e[1]!==n||e[2]!==s?(D=f.jsx(Hne,{node:n,onClick:s,isDarkMode:o}),e[0]=o,e[1]=n,e[2]=s,e[3]=D):D=e[3],D}if(c.kind==="Service"){let D;return e[4]!==o||e[5]!==n||e[6]!==s?(D=f.jsx(Wj,{node:n,onClick:s,isDarkMode:o}),e[4]=o,e[5]=n,e[6]=s,e[7]=D):D=e[7],D}if(["Gateway","HTTPRoute","GRPCRoute"].includes(c.kind)){let D;return e[8]!==o||e[9]!==n||e[10]!==s?(D=f.jsx(Wj,{node:n,onClick:s,isDarkMode:o}),e[8]=o,e[9]=n,e[10]=s,e[11]=D):D=e[11],D}if(c.kind==="Ingress"){let D;return e[12]!==o||e[13]!==n||e[14]!==s?(D=f.jsx(zne,{node:n,onClick:s,isDarkMode:o}),e[12]=o,e[13]=n,e[14]=s,e[15]=D):D=e[15],D}if(["Deployment","StatefulSet","DaemonSet","Job"].includes(c.kind)&&n.childPods&&n.childPods.length>0){let D;return e[16]!==o||e[17]!==n||e[18]!==s||e[19]!==a||e[20]!==r?(D=f.jsx(Pne,{node:n,onClick:s,onPodClick:r,onConfigClick:a,isDarkMode:o}),e[16]=o,e[17]=n,e[18]=s,e[19]=a,e[20]=r,e[21]=D):D=e[21],D}let v;e[22]!==o||e[23]!==c.kind?(v=Yl(c.kind,o),e[22]=o,e[23]=c.kind,e[24]=v):v=e[24];const y=v,x=iu[c.kind]||hg;let w;e[25]!==c?(w=TD(c),e[25]=c,e[26]=w):w=e[26];const S=w,k=o?S.colorDark:S.color,C=Math.floor((g-20)/6.5),A=c.metadata.name.length>C?c.metadata.name.slice(0,C-2)+"":c.metadata.name,B=`translate(${h}, ${d})`;let M;e[27]!==s?(M=D=>{D.stopPropagation(),s()},e[27]=s,e[28]=M):M=e[28];let T;e[29]===Symbol.for("react.memo_cache_sentinel")?(T={cursor:"pointer"},e[29]=T):T=e[29];let H;e[30]!==y.bg||e[31]!==y.border||e[32]!==m||e[33]!==g?(H=f.jsx("rect",{width:g,height:m,rx:8,fill:y.bg,stroke:y.border,strokeWidth:2}),e[30]=y.bg,e[31]=y.border,e[32]=m,e[33]=g,e[34]=H):H=e[34];let $;e[35]!==y.text?($={color:y.text},e[35]=y.text,e[36]=$):$=e[36];let G;e[37]!==x?(G=f.jsx(x,{size:16}),e[37]=x,e[38]=G):G=e[38];let z;e[39]!==$||e[40]!==G?(z=f.jsx("foreignObject",{width:18,height:18,children:f.jsx("div",{style:$,children:G})}),e[39]=$,e[40]=G,e[41]=z):z=e[41];let Q;e[42]!==y.text||e[43]!==c.kind?(Q=f.jsx("text",{x:22,y:13,fontSize:11,fill:y.text,fontWeight:600,children:c.kind}),e[42]=y.text,e[43]=c.kind,e[44]=Q):Q=e[44];let F;e[45]!==Q||e[46]!==z?(F=f.jsxs("g",{transform:"translate(10, 10)",children:[z,Q]}),e[45]=Q,e[46]=z,e[47]=F):F=e[47];const K=g-12;let J;e[48]!==k||e[49]!==K?(J=f.jsx("circle",{cx:K,cy:14,r:5,fill:k}),e[48]=k,e[49]=K,e[50]=J):J=e[50];const q=m-12,P=o?"#e5e7eb":"#1f2937";let X;e[51]!==A||e[52]!==q||e[53]!==P?(X=f.jsx("text",{x:10,y:q,fontSize:12,fontWeight:600,fill:P,children:A}),e[51]=A,e[52]=q,e[53]=P,e[54]=X):X=e[54];let U;return e[55]!==F||e[56]!==J||e[57]!==X||e[58]!==B||e[59]!==M||e[60]!==H?(U=f.jsxs("g",{transform:B,onClick:M,style:T,className:"hover:opacity-80 transition-opacity",children:[H,F,J,X]}),e[55]=F,e[56]=J,e[57]=X,e[58]=B,e[59]=M,e[60]=H,e[61]=U):U=e[61],U}function Wj(t){const e=He.c(26),{node:n,onClick:s,isDarkMode:r}=t,{resource:a,x:o,y:c,width:h,height:d}=n;let g;e[0]!==r||e[1]!==a.kind?(g=Yl(a.kind,r),e[0]=r,e[1]=a.kind,e[2]=g):g=e[2];const m=g,v=iu[a.kind]||hg,y=`translate(${o}, ${c})`;let x;e[3]!==s?(x=H=>{H.stopPropagation(),s()},e[3]=s,e[4]=x):x=e[4];let w;e[5]===Symbol.for("react.memo_cache_sentinel")?(w={cursor:"pointer"},e[5]=w):w=e[5];let S;e[6]!==m.bg||e[7]!==m.border||e[8]!==d||e[9]!==h?(S=f.jsx("rect",{width:h,height:d,rx:8,fill:m.bg,stroke:m.border,strokeWidth:2}),e[6]=m.bg,e[7]=m.border,e[8]=d,e[9]=h,e[10]=S):S=e[10];const k=`translate(${h/2-12}, ${d/2-12})`;let C;e[11]!==m.text?(C={color:m.text},e[11]=m.text,e[12]=C):C=e[12];let A;e[13]!==v?(A=f.jsx(v,{size:22}),e[13]=v,e[14]=A):A=e[14];let B;e[15]!==C||e[16]!==A?(B=f.jsx("foreignObject",{width:24,height:24,children:f.jsx("div",{style:C,children:A})}),e[15]=C,e[16]=A,e[17]=B):B=e[17];let M;e[18]!==k||e[19]!==B?(M=f.jsx("g",{transform:k,children:B}),e[18]=k,e[19]=B,e[20]=M):M=e[20];let T;return e[21]!==M||e[22]!==y||e[23]!==x||e[24]!==S?(T=f.jsxs("g",{transform:y,onClick:x,style:w,className:"hover:opacity-80 transition-opacity",children:[S,M]}),e[21]=M,e[22]=y,e[23]=x,e[24]=S,e[25]=T):T=e[25],T}function Pne(t){const e=He.c(54),{node:n,onClick:s,onPodClick:r,onConfigClick:a,isDarkMode:o}=t,{resource:c,x:h,y:d,width:g,height:m,childPods:v}=n;let y;e[0]!==v?(y=v===void 0?[]:v,e[0]=v,e[1]=y):y=e[1];const x=y;let w;e[2]!==o||e[3]!==c.kind?(w=Yl(c.kind,o),e[2]=o,e[3]=c.kind,e[4]=w):w=e[4];const S=w,k=iu[c.kind]||hg,C=Math.floor((g-60)/6),A=c.metadata.name.length>C?c.metadata.name.slice(0,C-2)+"":c.metadata.name;let B;e[5]!==n?(B=n.configIcons||[],e[5]=n,e[6]=B):B=e[6];const M=B,T=`translate(${h}, ${d})`;let H;e[7]!==s?(H=R=>{R.stopPropagation(),s()},e[7]=s,e[8]=H):H=e[8];let $;e[9]===Symbol.for("react.memo_cache_sentinel")?($={cursor:"pointer"},e[9]=$):$=e[9];let G;e[10]!==S.bg||e[11]!==S.border||e[12]!==m||e[13]!==H||e[14]!==g?(G=f.jsx("rect",{width:g,height:m,rx:10,fill:S.bg,stroke:S.border,strokeWidth:2,onClick:H,style:$,className:"hover:opacity-90"}),e[10]=S.bg,e[11]=S.border,e[12]=m,e[13]=H,e[14]=g,e[15]=G):G=e[15];let z;e[16]!==s?(z=R=>{R.stopPropagation(),s()},e[16]=s,e[17]=z):z=e[17];let Q;e[18]===Symbol.for("react.memo_cache_sentinel")?(Q={cursor:"pointer"},e[18]=Q):Q=e[18];let F;e[19]!==S.text?(F={color:S.text},e[19]=S.text,e[20]=F):F=e[20];let K;e[21]!==k?(K=f.jsx(k,{size:16}),e[21]=k,e[22]=K):K=e[22];let J;e[23]!==F||e[24]!==K?(J=f.jsx("foreignObject",{width:18,height:18,children:f.jsx("div",{style:F,children:K})}),e[23]=F,e[24]=K,e[25]=J):J=e[25];let q;e[26]!==S.text||e[27]!==A?(q=f.jsx("text",{x:22,y:13,fontSize:11,fill:S.text,fontWeight:600,children:A}),e[26]=S.text,e[27]=A,e[28]=q):q=e[28];let P;e[29]!==J||e[30]!==q?(P=f.jsxs("g",{transform:"translate(8, 8)",children:[J,q]}),e[29]=J,e[30]=q,e[31]=P):P=e[31];let X;e[32]!==P||e[33]!==z?(X=f.jsx("g",{onClick:z,style:Q,children:P}),e[32]=P,e[33]=z,e[34]=X):X=e[34];let U;if(e[35]!==x||e[36]!==o||e[37]!==r){let R;e[39]!==o||e[40]!==r?(R=(V,E)=>{const Z=Yl("Pod",o),ue=TD(V.resource),ne=o?ue.colorDark:ue.color,de=Zw+E*(Vl+s0),we=Math.floor((cg-30)/5.5),Ee=V.resource.metadata.name.length>we?V.resource.metadata.name.slice(0,we-2)+"":V.resource.metadata.name;return f.jsxs("g",{transform:`translate(${Bc}, ${de})`,onClick:et=>{et.stopPropagation(),r?.(V)},style:{cursor:"pointer"},className:"hover:opacity-80",children:[f.jsx("rect",{width:cg,height:Vl,rx:4,fill:Z.bg,stroke:Z.border,strokeWidth:1.5}),f.jsx("circle",{cx:12,cy:Vl/2,r:4,fill:ne}),f.jsx("text",{x:22,y:Vl/2+4,fontSize:10,fill:o?"#e5e7eb":"#1f2937",fontWeight:500,children:Ee})]},V.uid)},e[39]=o,e[40]=r,e[41]=R):R=e[41],U=x.map(R),e[35]=x,e[36]=o,e[37]=r,e[38]=U}else U=e[38];let D;e[42]!==M||e[43]!==m||e[44]!==o||e[45]!==a||e[46]!==c.metadata.namespace?(D=M.length>0&&f.jsx("g",{transform:`translate(${Bc}, ${m-Math.ceil(M.length/zd)*(Gi+Qa)-Qa})`,children:M.map((R,V)=>{const E=iu[R.kind],Z=Yl(R.kind,o),ue=Math.floor(V/zd),de=V%zd*(Gi+Qa),we=ue*(Gi+Qa);return f.jsxs("g",{transform:`translate(${de}, ${we})`,onClick:Ee=>{Ee.stopPropagation(),a&&a(R.kind,R.name,c.metadata.namespace)},style:{cursor:"pointer"},className:"hover:opacity-80",children:[f.jsx("title",{children:R.name}),f.jsx("rect",{width:Gi,height:Gi,rx:3,fill:Z.bg,stroke:Z.border,strokeWidth:1}),f.jsx("g",{transform:`translate(${Gi/2-6}, ${Gi/2-6})`,children:f.jsx("foreignObject",{width:12,height:12,children:f.jsx("div",{style:{color:Z.text},children:f.jsx(E,{size:12})})})})]},`${R.kind}-${R.name}-${V}`)})}),e[42]=M,e[43]=m,e[44]=o,e[45]=a,e[46]=c.metadata.namespace,e[47]=D):D=e[47];let O;return e[48]!==X||e[49]!==U||e[50]!==D||e[51]!==T||e[52]!==G?(O=f.jsxs("g",{transform:T,children:[G,X,U,D]}),e[48]=X,e[49]=U,e[50]=D,e[51]=T,e[52]=G,e[53]=O):O=e[53],O}function zne(t){const e=He.c(52),{node:n,onClick:s,isDarkMode:r}=t,{resource:a,x:o,y:c,width:h,height:d}=n;let g;e[0]!==r?(g=Yl("Ingress",r),e[0]=r,e[1]=g):g=e[1];const m=g,v=iu.Ingress,y=a.spec;let x,w,S,k,C,A,B,M;if(e[2]!==m.bg||e[3]!==m.border||e[4]!==m.text||e[5]!==d||e[6]!==r||e[7]!==s||e[8]!==a.metadata.name||e[9]!==y.rules||e[10]!==h||e[11]!==o||e[12]!==c){const z=y.rules?.map($ne).filter(Boolean)||[],Q=Math.floor((h-20)/6.5);x=a.metadata.name.length>Q?a.metadata.name.slice(0,Q-2)+"":a.metadata.name,w=`translate(${o}, ${c})`,e[21]!==s?(S=P=>{P.stopPropagation(),s()},e[21]=s,e[22]=S):S=e[22],e[23]===Symbol.for("react.memo_cache_sentinel")?(k={cursor:"pointer"},e[23]=k):k=e[23],C="hover:opacity-80 transition-opacity",e[24]!==m.bg||e[25]!==m.border||e[26]!==d||e[27]!==h?(A=f.jsx("rect",{width:h,height:d,rx:8,fill:m.bg,stroke:m.border,strokeWidth:2}),e[24]=m.bg,e[25]=m.border,e[26]=d,e[27]=h,e[28]=A):A=e[28];let F;e[29]!==m.text?(F={color:m.text},e[29]=m.text,e[30]=F):F=e[30];let K;e[31]===Symbol.for("react.memo_cache_sentinel")?(K=f.jsx(v,{size:16}),e[31]=K):K=e[31];let J;e[32]!==F?(J=f.jsx("foreignObject",{width:18,height:18,children:f.jsx("div",{style:F,children:K})}),e[32]=F,e[33]=J):J=e[33];let q;e[34]!==m.text?(q=f.jsx("text",{x:22,y:13,fontSize:11,fill:m.text,fontWeight:600,children:"Ingress"}),e[34]=m.text,e[35]=q):q=e[35],e[36]!==J||e[37]!==q?(B=f.jsxs("g",{transform:"translate(10, 10)",children:[J,q]}),e[36]=J,e[37]=q,e[38]=B):B=e[38],M=z.length>0&&z[0]&&f.jsx("text",{x:h-10,y:18,fontSize:9,fill:r?"#5eead4":"#115e59",textAnchor:"end",children:z[0].length>18?z[0].slice(0,16)+"":z[0]}),e[2]=m.bg,e[3]=m.border,e[4]=m.text,e[5]=d,e[6]=r,e[7]=s,e[8]=a.metadata.name,e[9]=y.rules,e[10]=h,e[11]=o,e[12]=c,e[13]=x,e[14]=w,e[15]=S,e[16]=k,e[17]=C,e[18]=A,e[19]=B,e[20]=M}else x=e[13],w=e[14],S=e[15],k=e[16],C=e[17],A=e[18],B=e[19],M=e[20];const T=d-12,H=r?"#e5e7eb":"#1f2937";let $;e[39]!==x||e[40]!==H||e[41]!==T?($=f.jsx("text",{x:10,y:T,fontSize:12,fontWeight:600,fill:H,children:x}),e[39]=x,e[40]=H,e[41]=T,e[42]=$):$=e[42];let G;return e[43]!==$||e[44]!==w||e[45]!==S||e[46]!==k||e[47]!==C||e[48]!==A||e[49]!==B||e[50]!==M?(G=f.jsxs("g",{transform:w,onClick:S,style:k,className:C,children:[A,B,M,$]}),e[43]=$,e[44]=w,e[45]=S,e[46]=k,e[47]=C,e[48]=A,e[49]=B,e[50]=M,e[51]=G):G=e[51],G}function $ne(t){return t.host}function Hne(t){const e=He.c(55),{node:n,onClick:s,isDarkMode:r}=t,{resource:a,x:o,y:c,width:h,height:d}=n;let g;e[0]!==r?(g=Yl("NetworkPolicy",r),e[0]=r,e[1]=g):g=e[1];const m=g,v=iu.NetworkPolicy,y=a.spec;let x;e[2]!==y.policyTypes?(x=y.policyTypes||[],e[2]=y.policyTypes,e[3]=x):x=e[3];const w=x;let S;e[4]!==w||e[5]!==y.ingress?(S=w.includes("Ingress")||y.ingress,e[4]=w,e[5]=y.ingress,e[6]=S):S=e[6];const k=S;let C;e[7]!==w||e[8]!==y.egress?(C=w.includes("Egress")||y.egress,e[7]=w,e[8]=y.egress,e[9]=C):C=e[9];const A=C;let B;e[10]!==y.ingress?(B=y.ingress||[],e[10]=y.ingress,e[11]=B):B=e[11];const M=B;let T;e[12]!==y.egress?(T=y.egress||[],e[12]=y.egress,e[13]=T):T=e[13];const H=T,$=k&&M.length===0,G=A&&H.length===0,z=$&&G,Q=Math.floor((h-20)/6.5),F=a.metadata.name.length>Q?a.metadata.name.slice(0,Q-2)+"":a.metadata.name;let K;e[14]!==G||e[15]!==H||e[16]!==A||e[17]!==k||e[18]!==$||e[19]!==M||e[20]!==z?(K=()=>{const ht=[];return z?" Deny All":($?ht.push(" No Ingress"):k&&M.length>0&&ht.push(`${M.length}`),G?ht.push(" No Egress"):A&&H.length>0&&ht.push(`${H.length}`),ht.join(" ")||" Allow")},e[14]=G,e[15]=H,e[16]=A,e[17]=k,e[18]=$,e[19]=M,e[20]=z,e[21]=K):K=e[21];const J=K,q=`translate(${o}, ${c})`;let P;e[22]!==s?(P=ht=>{ht.stopPropagation(),s()},e[22]=s,e[23]=P):P=e[23];let X;e[24]===Symbol.for("react.memo_cache_sentinel")?(X={cursor:"pointer"},e[24]=X):X=e[24];const U=z?r?"#7f1d1d":"#fef2f2":m.bg,D=z?r?"#f87171":"#ef4444":m.border;let O;e[25]!==d||e[26]!==U||e[27]!==D||e[28]!==h?(O=f.jsx("rect",{width:h,height:d,rx:8,fill:U,stroke:D,strokeWidth:2}),e[25]=d,e[26]=U,e[27]=D,e[28]=h,e[29]=O):O=e[29];const R=z?r?"#f87171":"#ef4444":m.text;let V;e[30]!==R?(V={color:R},e[30]=R,e[31]=V):V=e[31];let E;e[32]===Symbol.for("react.memo_cache_sentinel")?(E=f.jsx(v,{size:16}),e[32]=E):E=e[32];let Z;e[33]!==V?(Z=f.jsx("foreignObject",{width:18,height:18,children:f.jsx("div",{style:V,children:E})}),e[33]=V,e[34]=Z):Z=e[34];const ue=z?r?"#f87171":"#ef4444":m.text;let ne;e[35]!==ue?(ne=f.jsx("text",{x:22,y:13,fontSize:10,fill:ue,fontWeight:600,children:"NetworkPolicy"}),e[35]=ue,e[36]=ne):ne=e[36];let de;e[37]!==Z||e[38]!==ne?(de=f.jsxs("g",{transform:"translate(10, 10)",children:[Z,ne]}),e[37]=Z,e[38]=ne,e[39]=de):de=e[39];const we=h-10,Ee=z?r?"#fca5a5":"#dc2626":r?"#fcd34d":"#92400e",et=J();let Ce;e[40]!==we||e[41]!==Ee||e[42]!==et?(Ce=f.jsx("text",{x:we,y:18,fontSize:9,fill:Ee,textAnchor:"end",fontWeight:500,children:et}),e[40]=we,e[41]=Ee,e[42]=et,e[43]=Ce):Ce=e[43];const Ge=d-12,Te=r?"#e5e7eb":"#1f2937";let tt;e[44]!==F||e[45]!==Ge||e[46]!==Te?(tt=f.jsx("text",{x:10,y:Ge,fontSize:12,fontWeight:600,fill:Te,children:F}),e[44]=F,e[45]=Ge,e[46]=Te,e[47]=tt):tt=e[47];let mt;return e[48]!==O||e[49]!==de||e[50]!==Ce||e[51]!==tt||e[52]!==q||e[53]!==P?(mt=f.jsxs("g",{transform:q,onClick:P,style:X,className:"hover:opacity-80 transition-opacity",children:[O,de,Ce,tt]}),e[48]=O,e[49]=de,e[50]=Ce,e[51]=tt,e[52]=q,e[53]=P,e[54]=mt):mt=e[54],mt}function Une(t){const e=t.metadata.labels||{};return e["app.kubernetes.io/instance"]||e.release||e.app||e["app.kubernetes.io/name"]||e["k8s-app"]||e.name||e["app.kubernetes.io/component"]||e["app.kubernetes.io/part-of"]}const Vne={Deployment:1,StatefulSet:2,DaemonSet:3,CronJob:4,Job:5,Pod:6};function Fne(t){const e=new Map;t.forEach(D=>{D.metadata.uid&&e.set(D.metadata.uid,D)});const n=new Map,s=new Map,r=(D,O)=>{n.has(D)||n.set(D,new Set),n.has(O)||n.set(O,new Set),n.get(D).add(O),n.get(O).add(D)},a=(D,O,R)=>{const V=`${D}-${O}`;s.has(V)||s.set(V,[]),s.get(V).push({from:D,to:O,type:R})},o=new Map,c=new Map;t.forEach(D=>{const O=(D.metadata.ownerReferences||[]).filter(R=>e.has(R.uid));if(O.length>0){const R=O[0];c.set(D.metadata.uid,R.uid),o.has(R.uid)||o.set(R.uid,[]),o.get(R.uid).push(D.metadata.uid),r(D.metadata.uid,R.uid),a(R.uid,D.metadata.uid,"owner")}});const h=["Deployment","StatefulSet","DaemonSet","Job"];t.forEach(D=>{if(!h.includes(D.kind))return;const O=D.spec?.selector?.matchLabels;!O||Object.keys(O).length===0||t.filter(R=>R.kind==="Pod"&&R.metadata.namespace===D.metadata.namespace).forEach(R=>{const V=R.metadata.labels||{};Object.entries(O).every(([E,Z])=>V[E]===Z)&&r(D.metadata.uid,R.metadata.uid)})});const d=new Map,g=new Map,m=new Set;t.filter(D=>D.kind==="Pod").forEach(D=>{const O=D.metadata.ownerReferences?.[0];if(!O)return;if(O.kind==="Node"){m.add(D.metadata.uid);return}const R=e.get(O.uid);if(R){if(h.includes(R.kind)){d.has(R.metadata.uid)||d.set(R.metadata.uid,[]),d.get(R.metadata.uid).push(D),g.set(D.metadata.uid,R.metadata.uid);return}if(R.kind==="ReplicaSet"){const V=R.metadata.ownerReferences?.[0];if(V){const E=e.get(V.uid);E&&E.kind==="Deployment"&&(d.has(E.metadata.uid)||d.set(E.metadata.uid,[]),d.get(E.metadata.uid).push(D),g.set(D.metadata.uid,E.metadata.uid))}}}}),d.forEach(D=>{D.sort((O,R)=>O.metadata.name.localeCompare(R.metadata.name))}),t.forEach(D=>{if(D.kind!=="Service")return;const O=D.spec?.selector;!O||Object.keys(O).length===0||t.filter(R=>R.kind==="Pod"&&R.metadata.namespace===D.metadata.namespace).forEach(R=>{const V=R.metadata.labels||{};Object.entries(O).every(([E,Z])=>V[E]===Z)&&(r(D.metadata.uid,R.metadata.uid),a(D.metadata.uid,R.metadata.uid,"service"))})}),t.forEach(D=>{if(D.kind!=="NetworkPolicy")return;const O=D.spec,R=D.metadata.namespace||"",V=O.podSelector?.matchLabels||{},E=Object.keys(V).length===0;t.filter(Z=>Z.kind==="Pod"&&Z.metadata.namespace===R).forEach(Z=>{const ue=Z.metadata.labels||{};if(E||Object.entries(V).every(([de,we])=>ue[de]===we)){const de=g.get(Z.metadata.uid);a(de||Z.metadata.uid,D.metadata.uid,"network-policy")}})});const v=new Map;t.forEach(D=>{if(D.kind==="Service"){const O=`${D.metadata.namespace||""}/${D.metadata.name}`;v.set(O,D)}}),t.forEach(D=>{if(D.kind!=="Ingress")return;const O=D.spec,R=D.metadata.namespace||"";if(O.defaultBackend?.service?.name){const V=v.get(`${R}/${O.defaultBackend.service.name}`);V&&(r(D.metadata.uid,V.metadata.uid),a(D.metadata.uid,V.metadata.uid,"ingress"))}O.rules?.forEach(V=>{V.http?.paths?.forEach(E=>{if(E.backend?.service?.name){const Z=v.get(`${R}/${E.backend.service.name}`);Z&&(r(D.metadata.uid,Z.metadata.uid),a(D.metadata.uid,Z.metadata.uid,"ingress"))}})})}),t.forEach(D=>{if(D.kind!=="HTTPRoute"&&D.kind!=="GRPCRoute")return;const O=D.spec,R=D.metadata.namespace||"";O.parentRefs?.forEach(V=>{if(!V.kind||V.kind==="Gateway"){const E=t.find(Z=>Z.kind==="Gateway"&&Z.metadata.name===V.name&&Z.metadata.namespace===R);E&&(r(E.metadata.uid,D.metadata.uid),a(E.metadata.uid,D.metadata.uid,"gateway"))}}),O.rules?.forEach(V=>{V.backendRefs?.forEach(E=>{if(!E.kind||E.kind==="Service"){const Z=v.get(`${R}/${E.name}`);Z&&(r(D.metadata.uid,Z.metadata.uid),a(D.metadata.uid,Z.metadata.uid,"gateway"))}})})});const y=new Map,x=new Map,w=new Map;t.forEach(D=>{const O=`${D.metadata.namespace||""}/${D.metadata.name}`;D.kind==="ConfigMap"?y.set(O,D):D.kind==="Secret"?x.set(O,D):D.kind==="PersistentVolumeClaim"&&w.set(O,D)});const S=(D,O,R)=>{D?.forEach(V=>{V.env?.forEach(E=>{E.valueFrom?.configMapKeyRef?.name&&O.add(E.valueFrom.configMapKeyRef.name),E.valueFrom?.secretKeyRef?.name&&R.add(E.valueFrom.secretKeyRef.name)}),V.envFrom?.forEach(E=>{E.configMapRef?.name&&O.add(E.configMapRef.name),E.secretRef?.name&&R.add(E.secretRef.name)})})},k=new Map;t.filter(D=>D.kind==="Pod").forEach(D=>{const O=g.get(D.metadata.uid);if(!O)return;const R=D.spec,V=new Set,E=new Set,Z=new Set;R.volumes?.forEach(ne=>{ne.configMap?.name&&V.add(ne.configMap.name),ne.secret?.secretName&&E.add(ne.secret.secretName),ne.persistentVolumeClaim?.claimName&&Z.add(ne.persistentVolumeClaim.claimName),ne.projected?.sources?.forEach(de=>{de.configMap?.name&&V.add(de.configMap.name),de.secret?.name&&E.add(de.secret.name)})}),S(R.containers,V,E),S(R.initContainers,V,E),k.has(O)||k.set(O,new Map);const ue=k.get(O);V.size>0&&(ue.has("ConfigMap")||ue.set("ConfigMap",new Set),V.forEach(ne=>ue.get("ConfigMap").add(ne))),E.size>0&&(ue.has("Secret")||ue.set("Secret",new Set),E.forEach(ne=>ue.get("Secret").add(ne))),Z.size>0&&(ue.has("PersistentVolumeClaim")||ue.set("PersistentVolumeClaim",new Set),Z.forEach(ne=>ue.get("PersistentVolumeClaim").add(ne)))});const C=D=>{const O=c.get(D);return O?C(O):D},A=new Map,B=new Map,M=new Map;t.forEach(D=>{if(D.kind!=="Pod")return;const O=D.metadata.namespace||"",R=C(D.metadata.uid),V=D.spec,E=new Set,Z=new Set,ue=new Set;V.volumes?.forEach(ne=>{ne.configMap?.name&&E.add(ne.configMap.name),ne.secret?.secretName&&Z.add(ne.secret.secretName),ne.persistentVolumeClaim?.claimName&&ue.add(ne.persistentVolumeClaim.claimName),ne.projected?.sources?.forEach(de=>{de.configMap?.name&&E.add(de.configMap.name),de.secret?.name&&Z.add(de.secret.name)})}),S(V.containers,E,Z),S(V.initContainers,E,Z),E.forEach(ne=>{const de=`${O}/${ne}`;A.has(de)||A.set(de,new Set),A.get(de).add(R)}),Z.forEach(ne=>{const de=`${O}/${ne}`;B.has(de)||B.set(de,new Set),B.get(de).add(R)}),ue.forEach(ne=>{const de=`${O}/${ne}`;M.has(de)||M.set(de,new Set),M.get(de).add(R)})});const T=new Set;A.forEach((D,O)=>{if(D.size>1){const R=y.get(O);R&&T.add(R.metadata.uid)}}),B.forEach((D,O)=>{if(D.size>1){const R=x.get(O);R&&T.add(R.metadata.uid)}}),M.forEach((D,O)=>{if(D.size>1){const R=w.get(O);R&&T.add(R.metadata.uid)}}),t.forEach(D=>{if(D.kind!=="Pod")return;const O=D.metadata.namespace||"",R=D.spec,V=new Set,E=new Set,Z=new Set;R.volumes?.forEach(ue=>{ue.configMap?.name&&V.add(ue.configMap.name),ue.secret?.secretName&&E.add(ue.secret.secretName),ue.persistentVolumeClaim?.claimName&&Z.add(ue.persistentVolumeClaim.claimName),ue.projected?.sources?.forEach(ne=>{ne.configMap?.name&&V.add(ne.configMap.name),ne.secret?.name&&E.add(ne.secret.name)})}),S(R.containers,V,E),S(R.initContainers,V,E),V.forEach(ue=>{const ne=y.get(`${O}/${ue}`);ne&&!T.has(ne.metadata.uid)&&(r(D.metadata.uid,ne.metadata.uid),a(ne.metadata.uid,D.metadata.uid,"owner"))}),E.forEach(ue=>{const ne=x.get(`${O}/${ue}`);ne&&!T.has(ne.metadata.uid)&&(r(D.metadata.uid,ne.metadata.uid),a(ne.metadata.uid,D.metadata.uid,"owner"))}),Z.forEach(ue=>{const ne=w.get(`${O}/${ue}`);ne&&!T.has(ne.metadata.uid)&&(r(D.metadata.uid,ne.metadata.uid),a(ne.metadata.uid,D.metadata.uid,"owner"))})});const H=new Set,$=[];function G(D,O){H.has(D)||m.has(D)||(H.add(D),O.push(D),(n.get(D)||new Set).forEach(R=>G(R,O)))}t.forEach(D=>{if(!m.has(D.metadata.uid)&&!H.has(D.metadata.uid)){const O=[];G(D.metadata.uid,O),O.length>0&&$.push(O)}}),$.sort((D,O)=>O.length-D.length);const z=[],Q={Gateway:0,Ingress:0,HTTPRoute:1,GRPCRoute:1,Service:2,Deployment:3,StatefulSet:3,DaemonSet:3,Job:3,CronJob:3,Pod:3,ConfigMap:4,Secret:4,PersistentVolumeClaim:4,NetworkPolicy:5};$.forEach((D,O)=>{const R=D.map(Qe=>e.get(Qe)).filter(Boolean);if(R.length===0)return;const V=R.filter(Qe=>!(Qe.kind==="ReplicaSet"||Qe.kind==="Pod"&&g.has(Qe.metadata.uid)||["ConfigMap","Secret","PersistentVolumeClaim"].includes(Qe.kind)));if(V.length===0)return;const E=new Map;V.forEach(Qe=>{const rt=Q[Qe.kind]??3;E.has(rt)||E.set(rt,[]),E.get(rt).push(Qe.metadata.uid)}),E.forEach(Qe=>{Qe.sort((rt,Zt)=>{const Rt=e.get(rt),Wn=e.get(Zt);return Rt.metadata.name.localeCompare(Wn.metadata.name)})});const Z=new Map;V.forEach(Qe=>{if(["Service","Gateway","HTTPRoute","GRPCRoute"].includes(Qe.kind)){Z.set(Qe.metadata.uid,{width:qj,height:qj});return}const rt=d.get(Qe.metadata.uid);if(rt&&rt.length>0){const Zt=k.get(Qe.metadata.uid);let Rt=0;Zt&&Zt.forEach(re=>Rt+=re.size);const Wn=cg+Bc*2,pe=Math.min(Rt,zd),_e=pe>0?pe*(Gi+Qa)-Qa+Bc*2:0,Ke=Math.max(Wn,_e),it=Rt>0?Math.ceil(Rt/zd):0,St=it>0?it*(Gi+Qa)+Qa:0,jn=Zw+rt.length*(Vl+s0)-s0+Bc+St;Z.set(Qe.metadata.uid,{width:Ke,height:jn})}else Z.set(Qe.metadata.uid,{width:Ph,height:m_})});const ue=new Map;let ne=0,de=Fa+Kj;const we=Array.from(E.keys()).sort((Qe,rt)=>Qe-rt),Ee=new Map;we.forEach(Qe=>{const rt=Math.max(...(E.get(Qe)||[]).map(Zt=>Z.get(Zt)?.width||Ph));Ee.set(Qe,rt)});let et=Fa;we.forEach(Qe=>{const rt=Ee.get(Qe)||Ph;let Zt=Fa+Kj;E.get(Qe).forEach(Rt=>{const Wn=Z.get(Rt)||{width:Ph,height:m_},pe=(rt-Wn.width)/2;ue.set(Rt,{x:et+pe,y:Zt}),de=Math.max(de,Zt+Wn.height),Zt+=Wn.height+Rne}),ne=Math.max(ne,et+rt),et+=rt+One});const Ce=ne+Fa,Ge=de+Fa,Te=V.map(Qe=>{const rt=ue.get(Qe.metadata.uid),Zt=Z.get(Qe.metadata.uid)||{width:Ph,height:m_},Wn=d.get(Qe.metadata.uid)?.map((Ke,it)=>({uid:Ke.metadata.uid,resource:Ke,x:Bc,y:Zw+it*(Vl+s0),width:cg,height:Vl})),pe=k.get(Qe.metadata.uid),_e=[];return pe&&pe.forEach((Ke,it)=>{Ke.forEach(St=>_e.push({kind:it,name:St}))}),{uid:Qe.metadata.uid,resource:Qe,x:rt.x,y:rt.y,width:Zt.width,height:Zt.height,childPods:Wn,configIcons:_e}}),tt=[],mt=new Set,ht=new Set;V.forEach(Qe=>{const rt=d.get(Qe.metadata.uid);rt&&rt.forEach(Zt=>ht.add(Zt.metadata.uid))}),s.forEach(Qe=>{Qe.forEach(rt=>{const Zt=V.some(_e=>_e.metadata.uid===rt.from),Rt=V.some(_e=>_e.metadata.uid===rt.to),Wn=ht.has(rt.to),pe=ht.has(rt.from);if(Zt&&Rt||Zt&&Wn||Rt&&pe){const _e=`${rt.from}-${rt.to}-${rt.type}`;mt.has(_e)||(mt.add(_e),tt.push(rt))}})});let Lt,bn=1/0;V.forEach(Qe=>{const rt=Vne[Qe.kind];rt!==void 0&&rt<bn&&(bn=rt,Lt=Qe)});const ls=Lt?Une(Lt)||Lt.metadata.name:void 0,Es=Lt?.metadata.namespace;z.push({id:`app-${O}`,name:ls||"",namespace:Es,nodes:Te,edges:tt,x:0,y:0,width:Ce,height:Ge})});const F=new Map;z.forEach(D=>{const O=D.namespace||"",R=D.name||"",V=`${O}/${R}`;F.has(V)||F.set(V,[]),F.get(V).push(D)});const K=[];F.forEach((D,O)=>{if(D.length===1)K.push(D[0]);else{D.sort((de,we)=>{const Ee=de.nodes[0]?.resource.metadata.name||"",et=we.nodes[0]?.resource.metadata.name||"";return Ee.localeCompare(et)});const R=[],V=[];let E=Fa,Z=0;D.forEach(de=>{de.nodes.forEach(we=>{R.push({...we,x:we.x+E-Fa,y:we.y})}),V.push(...de.edges),E+=de.width+Rm,Z=Math.max(Z,de.height)});const[ue,ne]=O.split("/");K.push({id:`app-${O}`,name:ne,namespace:ue,nodes:R,edges:V,x:0,y:0,width:E-Rm+Fa,height:Z})}}),K.sort((D,O)=>O.height-D.height);const J=1800;let q=0,P=[];const X=[];K.forEach(D=>{q+D.width>J&&P.length>0&&(X.push([...P]),q=0,P=[]),P.push({app:D,tempX:q}),q+=D.width+Rm}),P.length>0&&X.push(P);let U=0;return X.forEach(D=>{const O=Math.max(...D.map(R=>R.app.height));D.forEach(({app:R,tempX:V})=>{const E=V,Z=U+(O-R.height)/2;R.nodes.forEach(ue=>{ue.x+=E,ue.y+=Z}),R.x=E,R.y=Z}),U+=O+Rm}),K}function qne(){const t=He.c(4);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=f.jsxs("div",{className:"mb-8 relative",children:[f.jsx("img",{src:"/logo.png",alt:"Logo",className:"w-70 h-70 mx-auto dark:hidden"}),f.jsx("img",{src:"/logo_dark.png",alt:"Logo",className:"w-70 h-70 mx-auto hidden dark:block"})]}),t[0]=e):e=t[0];let n;t[1]===Symbol.for("react.memo_cache_sentinel")?(n=f.jsxs("div",{className:"p-4 rounded-xl bg-neutral-50 dark:bg-neutral-800/30",children:[f.jsx("div",{className:"w-9 h-9 mx-auto mb-2.5 rounded-lg bg-emerald-100 dark:bg-emerald-500/10 flex items-center justify-center",children:f.jsx(Xl,{size:18,className:"text-emerald-600 dark:text-emerald-400"})}),f.jsx("h3",{className:"font-medium text-sm text-neutral-900 dark:text-neutral-100 mb-0.5",children:"Topology"}),f.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"Resource relationships"})]}),t[1]=n):n=t[1];let s;t[2]===Symbol.for("react.memo_cache_sentinel")?(s=f.jsxs("div",{className:"p-4 rounded-xl bg-neutral-50 dark:bg-neutral-800/30",children:[f.jsx("div",{className:"w-9 h-9 mx-auto mb-2.5 rounded-lg bg-sky-100 dark:bg-sky-500/10 flex items-center justify-center",children:f.jsx(go,{size:18,className:"text-sky-600 dark:text-sky-400"})}),f.jsx("h3",{className:"font-medium text-sm text-neutral-900 dark:text-neutral-100 mb-0.5",children:"Browser"}),f.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"Browse any resource"})]}),t[2]=s):s=t[2];let r;return t[3]===Symbol.for("react.memo_cache_sentinel")?(r=f.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:f.jsxs("div",{className:"max-w-2xl mx-auto px-8 text-center",children:[e,f.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[n,s,f.jsxs("div",{className:"p-4 rounded-xl bg-neutral-50 dark:bg-neutral-800/30",children:[f.jsx("div",{className:"w-9 h-9 mx-auto mb-2.5 rounded-lg bg-purple-100 dark:bg-purple-500/10 flex items-center justify-center",children:f.jsx(lS,{size:18,className:"text-purple-600 dark:text-purple-400"})}),f.jsx("h3",{className:"font-medium text-sm text-neutral-900 dark:text-neutral-100 mb-0.5",children:"Details"}),f.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"Full specifications"})]})]})]})}),t[3]=r):r=t[3],r}function Kne(t){const e=He.c(12),{children:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=new Set,e[0]=s):s=e[0];const[r,a]=W.useState(s);let o;e[1]!==r?(o=k=>r.has(k),e[1]=r,e[2]=o):o=e[2];const c=o;let h;e[3]===Symbol.for("react.memo_cache_sentinel")?(h=k=>{a(C=>{const A=new Set(C);return A.add(k),A})},e[3]=h):h=e[3];const d=h;let g;e[4]===Symbol.for("react.memo_cache_sentinel")?(g=k=>{a(C=>{const A=new Set(C);return A.delete(k),A})},e[4]=g):g=e[4];const m=g;let v;e[5]===Symbol.for("react.memo_cache_sentinel")?(v=k=>{a(C=>{const A=new Set(C);return A.has(k)?A.delete(k):A.add(k),A})},e[5]=v):v=e[5];const y=v;let x;e[6]!==c||e[7]!==r?(x={openPanels:r,isOpen:c,open:d,close:m,toggle:y},e[6]=c,e[7]=r,e[8]=x):x=e[8];const w=x;let S;return e[9]!==n||e[10]!==w?(S=f.jsx(lT.Provider,{value:w,children:n}),e[9]=n,e[10]=w,e[11]=S):S=e[11],S}function Gj(t){return t.group?`${t.name}.${t.group}`:t.name}function Wne(t){const e=He.c(30),{children:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=Hd(),e[0]=s):s=e[0];const r=s;let a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a=()=>r.defaultContext||r.contexts[0]?.name||"",e[1]=a):a=e[1];const[o,c]=W.useState(a);let h;e[2]===Symbol.for("react.memo_cache_sentinel")?(h=()=>r.defaultNamespace,e[2]=h):h=e[2];const[d,g]=W.useState(h),[m,v]=W.useState(null),y=W.useRef(void 0),x=W.useRef(null);let w,S;e[3]!==o?(w=()=>o?yP(o):Promise.resolve({items:[]}),S=[o],e[3]=o,e[4]=w,e[5]=S):(w=e[4],S=e[5]);const{data:k}=oT(w,S);let C;e[6]!==k?.items?(C=k?.items||[],e[6]=k?.items,e[7]=C):C=e[7];const A=C;let B,M;e[8]!==A?(B=()=>{if(y.current&&A.length>0){const q=y.current;A.some(X=>X.metadata?.name===q)&&g(q),y.current=void 0}},M=[A],e[8]=A,e[9]=B,e[10]=M):(B=e[9],M=e[10]),W.useEffect(B,M),o&&mP(o);let T;e[11]!==o||e[12]!==d||e[13]!==m?(T=q=>{dP(o),Oq(o),y.current=d,x.current=m?Gj(m):null,c(q),g(void 0),v(null)},e[11]=o,e[12]=d,e[13]=m,e[14]=T):T=e[14];const H=T;let $,G;e[15]!==o?($=()=>{if(x.current&&o){const q=x.current;x.current=null,ou(o,q.split(".")[0]).then(P=>{P&&Gj(P)===q&&v(P)}).catch(Gne)}},G=[o],e[15]=o,e[16]=$,e[17]=G):($=e[16],G=e[17]),W.useEffect($,G);let z;e[18]!==o?(z={getResource:(q,P,X)=>y_(o,q,P,X),getResourceList:(q,P)=>mg(o,q,P),getResourceTable:(q,P)=>iT(o,q,P),getResourceEvents:(q,P)=>v_(o,q,P),updateResource:(q,P,X,U)=>rT(o,q,P,X,U)},e[18]=o,e[19]=z):z=e[19];const Q=z;let F;e[20]!==Q||e[21]!==H||e[22]!==A||e[23]!==o||e[24]!==d||e[25]!==m?(F={context:o,contexts:r.contexts,namespace:d,namespaces:A,selectedResource:m,setContext:H,setNamespace:g,setSelectedResource:v,api:Q},e[20]=Q,e[21]=H,e[22]=A,e[23]=o,e[24]=d,e[25]=m,e[26]=F):F=e[26];const K=F;let J;return e[27]!==n||e[28]!==K?(J=f.jsx(aT.Provider,{value:K,children:n}),e[27]=n,e[28]=K,e[29]=J):J=e[29],J}function Gne(){}function Yne(){const t=He.c(14),{namespace:e,selectedResource:n,setSelectedResource:s}=Ir();let r;t[0]!==s?(r=m=>{s(m)},t[0]=s,t[1]=r):r=t[1];const a=r,o=n===null,c=o?"overview":`${n.group||""}/${n.name}`;let h;t[2]!==a||t[3]!==o||t[4]!==n?(h=f.jsx("div",{className:"py-2 pl-2 shrink-0 h-full",children:f.jsx(kP,{selectedResource:n,onSelectResource:a,isOverviewSelected:o})}),t[2]=a,t[3]=o,t[4]=n,t[5]=h):h=t[5];let d;t[6]!==o||t[7]!==e||t[8]!==c||t[9]!==n?(d=o?f.jsxs("main",{className:"flex-1 flex flex-col h-full min-w-0",children:[f.jsx("header",{className:"shrink-0 h-14 flex items-center justify-between px-5 mt-2",children:f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("h2",{className:"text-lg font-medium text-neutral-900 dark:text-neutral-100",children:"Overview"}),e&&f.jsx("span",{className:"px-2.5 py-0.5 rounded-md text-xs bg-neutral-200/80 text-neutral-500 dark:bg-neutral-800 dark:text-neutral-400",children:e})]})}),f.jsx("section",{className:"flex-1 overflow-hidden min-h-0",children:e?f.jsx(Bne,{}):f.jsx(qne,{})})]}):f.jsx(Ane,{resource:n},c),t[6]=o,t[7]=e,t[8]=c,t[9]=n,t[10]=d):d=t[10];let g;return t[11]!==h||t[12]!==d?(g=f.jsxs("div",{className:"flex h-screen overflow-hidden bg-neutral-50 text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100",children:[h,d]}),t[11]=h,t[12]=d,t[13]=g):g=t[13],g}function Xne(){const t=He.c(3),{context:e}=Ir();if(!e){let s;return t[0]===Symbol.for("react.memo_cache_sentinel")?(s=f.jsx("div",{className:"flex h-screen items-center justify-center bg-neutral-50 text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100",children:f.jsx("p",{className:"text-neutral-500",children:"No Kubernetes contexts available"})}),t[0]=s):s=t[0],s}let n;return t[1]!==e?(n=f.jsx(Yne,{},e),t[1]=e,t[2]=n):n=t[2],n}function Jne(){const t=He.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=f.jsx(Wne,{children:f.jsx(Kne,{children:f.jsx(Xne,{})})}),t[0]=e):e=t[0],e}bP().then(()=>{XL.createRoot(document.getElementById("root")).render(f.jsx(W.StrictMode,{children:f.jsx(Jne,{})}))});
