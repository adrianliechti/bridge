(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();var m3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function L2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ix={exports:{}},Sd={};var g3;function _9(){if(g3)return Sd;g3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,r,i){var o=null;if(i!==void 0&&(o=""+i),r.key!==void 0&&(o=""+r.key),"key"in r){i={};for(var c in r)c!=="key"&&(i[c]=r[c])}else i=r;return r=i.ref,{$$typeof:t,type:s,key:o,ref:r!==void 0?r:null,props:i}}return Sd.Fragment=e,Sd.jsx=n,Sd.jsxs=n,Sd}var y3;function x9(){return y3||(y3=1,ix.exports=_9()),ix.exports}var f=x9(),ax={exports:{}},ft={};var v3;function w9(){if(v3)return ft;v3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),y=Symbol.iterator;function v(M){return M===null||typeof M!="object"?null:(M=y&&M[y]||M["@@iterator"],typeof M=="function"?M:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,S={};function k(M,F,A){this.props=M,this.context=F,this.refs=S,this.updater=A||x}k.prototype.isReactComponent={},k.prototype.setState=function(M,F){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,F,"setState")},k.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function C(){}C.prototype=k.prototype;function N(M,F,A){this.props=M,this.context=F,this.refs=S,this.updater=A||x}var R=N.prototype=new C;R.constructor=N,_(R,k.prototype),R.isPureReactComponent=!0;var O=Array.isArray;function E(){}var D={H:null,A:null,T:null,S:null},B=Object.prototype.hasOwnProperty;function q(M,F,A){var Q=A.ref;return{$$typeof:t,type:M,key:F,ref:Q!==void 0?Q:null,props:A}}function P(M,F){return q(M.type,F,M.props)}function G(M){return typeof M=="object"&&M!==null&&M.$$typeof===t}function z(M){var F={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(A){return F[A]})}var K=/\/+/g;function Z(M,F){return typeof M=="object"&&M!==null&&M.key!=null?z(""+M.key):F.toString(36)}function W(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(E,E):(M.status="pending",M.then(function(F){M.status==="pending"&&(M.status="fulfilled",M.value=F)},function(F){M.status==="pending"&&(M.status="rejected",M.reason=F)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function I(M,F,A,Q,se){var X=typeof M;(X==="undefined"||X==="boolean")&&(M=null);var ae=!1;if(M===null)ae=!0;else switch(X){case"bigint":case"string":case"number":ae=!0;break;case"object":switch(M.$$typeof){case t:case e:ae=!0;break;case m:return ae=M._init,I(ae(M._payload),F,A,Q,se)}}if(ae)return se=se(M),ae=Q===""?"."+Z(M,0):Q,O(se)?(A="",ae!=null&&(A=ae.replace(K,"$&/")+"/"),I(se,F,A,"",function(Ve){return Ve})):se!=null&&(G(se)&&(se=P(se,A+(se.key==null||M&&M.key===se.key?"":(""+se.key).replace(K,"$&/")+"/")+ae)),F.push(se)),1;ae=0;var ke=Q===""?".":Q+":";if(O(M))for(var Se=0;Se<M.length;Se++)Q=M[Se],X=ke+Z(Q,Se),ae+=I(Q,F,A,X,se);else if(Se=v(M),typeof Se=="function")for(M=Se.call(M),Se=0;!(Q=M.next()).done;)Q=Q.value,X=ke+Z(Q,Se++),ae+=I(Q,F,A,X,se);else if(X==="object"){if(typeof M.then=="function")return I(W(M),F,A,Q,se);throw F=String(M),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return ae}function Y(M,F,A){if(M==null)return M;var Q=[],se=0;return I(M,Q,"","",function(X){return F.call(A,X,se++)}),Q}function J(M){if(M._status===-1){var F=M._result;F=F(),F.then(function(A){(M._status===0||M._status===-1)&&(M._status=1,M._result=A)},function(A){(M._status===0||M._status===-1)&&(M._status=2,M._result=A)}),M._status===-1&&(M._status=0,M._result=F)}if(M._status===1)return M._result.default;throw M._result}var $=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},j={map:Y,forEach:function(M,F,A){Y(M,function(){F.apply(this,arguments)},A)},count:function(M){var F=0;return Y(M,function(){F++}),F},toArray:function(M){return Y(M,function(F){return F})||[]},only:function(M){if(!G(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return ft.Activity=p,ft.Children=j,ft.Component=k,ft.Fragment=n,ft.Profiler=r,ft.PureComponent=N,ft.StrictMode=s,ft.Suspense=u,ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,ft.__COMPILER_RUNTIME={__proto__:null,c:function(M){return D.H.useMemoCache(M)}},ft.cache=function(M){return function(){return M.apply(null,arguments)}},ft.cacheSignal=function(){return null},ft.cloneElement=function(M,F,A){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var Q=_({},M.props),se=M.key;if(F!=null)for(X in F.key!==void 0&&(se=""+F.key),F)!B.call(F,X)||X==="key"||X==="__self"||X==="__source"||X==="ref"&&F.ref===void 0||(Q[X]=F[X]);var X=arguments.length-2;if(X===1)Q.children=A;else if(1<X){for(var ae=Array(X),ke=0;ke<X;ke++)ae[ke]=arguments[ke+2];Q.children=ae}return q(M.type,se,Q)},ft.createContext=function(M){return M={$$typeof:o,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:i,_context:M},M},ft.createElement=function(M,F,A){var Q,se={},X=null;if(F!=null)for(Q in F.key!==void 0&&(X=""+F.key),F)B.call(F,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(se[Q]=F[Q]);var ae=arguments.length-2;if(ae===1)se.children=A;else if(1<ae){for(var ke=Array(ae),Se=0;Se<ae;Se++)ke[Se]=arguments[Se+2];se.children=ke}if(M&&M.defaultProps)for(Q in ae=M.defaultProps,ae)se[Q]===void 0&&(se[Q]=ae[Q]);return q(M,X,se)},ft.createRef=function(){return{current:null}},ft.forwardRef=function(M){return{$$typeof:c,render:M}},ft.isValidElement=G,ft.lazy=function(M){return{$$typeof:m,_payload:{_status:-1,_result:M},_init:J}},ft.memo=function(M,F){return{$$typeof:h,type:M,compare:F===void 0?null:F}},ft.startTransition=function(M){var F=D.T,A={};D.T=A;try{var Q=M(),se=D.S;se!==null&&se(A,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(E,$)}catch(X){$(X)}finally{F!==null&&A.types!==null&&(F.types=A.types),D.T=F}},ft.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},ft.use=function(M){return D.H.use(M)},ft.useActionState=function(M,F,A){return D.H.useActionState(M,F,A)},ft.useCallback=function(M,F){return D.H.useCallback(M,F)},ft.useContext=function(M){return D.H.useContext(M)},ft.useDebugValue=function(){},ft.useDeferredValue=function(M,F){return D.H.useDeferredValue(M,F)},ft.useEffect=function(M,F){return D.H.useEffect(M,F)},ft.useEffectEvent=function(M){return D.H.useEffectEvent(M)},ft.useId=function(){return D.H.useId()},ft.useImperativeHandle=function(M,F,A){return D.H.useImperativeHandle(M,F,A)},ft.useInsertionEffect=function(M,F){return D.H.useInsertionEffect(M,F)},ft.useLayoutEffect=function(M,F){return D.H.useLayoutEffect(M,F)},ft.useMemo=function(M,F){return D.H.useMemo(M,F)},ft.useOptimistic=function(M,F){return D.H.useOptimistic(M,F)},ft.useReducer=function(M,F,A){return D.H.useReducer(M,F,A)},ft.useRef=function(M){return D.H.useRef(M)},ft.useState=function(M){return D.H.useState(M)},ft.useSyncExternalStore=function(M,F,A){return D.H.useSyncExternalStore(M,F,A)},ft.useTransition=function(){return D.H.useTransition()},ft.version="19.2.3",ft}var b3;function ah(){return b3||(b3=1,ax.exports=w9()),ax.exports}var V=ah();const ks=L2(V);var ox={exports:{}},kd={},lx={exports:{}},cx={};var _3;function S9(){return _3||(_3=1,(function(t){function e(I,Y){var J=I.length;I.push(Y);e:for(;0<J;){var $=J-1>>>1,j=I[$];if(0<r(j,Y))I[$]=Y,I[J]=j,J=$;else break e}}function n(I){return I.length===0?null:I[0]}function s(I){if(I.length===0)return null;var Y=I[0],J=I.pop();if(J!==Y){I[0]=J;e:for(var $=0,j=I.length,M=j>>>1;$<M;){var F=2*($+1)-1,A=I[F],Q=F+1,se=I[Q];if(0>r(A,J))Q<j&&0>r(se,A)?(I[$]=se,I[Q]=J,$=Q):(I[$]=A,I[F]=J,$=F);else if(Q<j&&0>r(se,J))I[$]=se,I[Q]=J,$=Q;else break e}}return Y}function r(I,Y){var J=I.sortIndex-Y.sortIndex;return J!==0?J:I.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],h=[],m=1,p=null,y=3,v=!1,x=!1,_=!1,S=!1,k=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function R(I){for(var Y=n(h);Y!==null;){if(Y.callback===null)s(h);else if(Y.startTime<=I)s(h),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=n(h)}}function O(I){if(_=!1,R(I),!x)if(n(u)!==null)x=!0,E||(E=!0,z());else{var Y=n(h);Y!==null&&W(O,Y.startTime-I)}}var E=!1,D=-1,B=5,q=-1;function P(){return S?!0:!(t.unstable_now()-q<B)}function G(){if(S=!1,E){var I=t.unstable_now();q=I;var Y=!0;try{e:{x=!1,_&&(_=!1,C(D),D=-1),v=!0;var J=y;try{t:{for(R(I),p=n(u);p!==null&&!(p.expirationTime>I&&P());){var $=p.callback;if(typeof $=="function"){p.callback=null,y=p.priorityLevel;var j=$(p.expirationTime<=I);if(I=t.unstable_now(),typeof j=="function"){p.callback=j,R(I),Y=!0;break t}p===n(u)&&s(u),R(I)}else s(u);p=n(u)}if(p!==null)Y=!0;else{var M=n(h);M!==null&&W(O,M.startTime-I),Y=!1}}break e}finally{p=null,y=J,v=!1}Y=void 0}}finally{Y?z():E=!1}}}var z;if(typeof N=="function")z=function(){N(G)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,Z=K.port2;K.port1.onmessage=G,z=function(){Z.postMessage(null)}}else z=function(){k(G,0)};function W(I,Y){D=k(function(){I(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(I){switch(y){case 1:case 2:case 3:var Y=3;break;default:Y=y}var J=y;y=Y;try{return I()}finally{y=J}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(I,Y){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var J=y;y=I;try{return Y()}finally{y=J}},t.unstable_scheduleCallback=function(I,Y,J){var $=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?$+J:$):J=$,I){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=J+j,I={id:m++,callback:Y,priorityLevel:I,startTime:J,expirationTime:j,sortIndex:-1},J>$?(I.sortIndex=J,e(h,I),n(u)===null&&I===n(h)&&(_?(C(D),D=-1):_=!0,W(O,J-$))):(I.sortIndex=j,e(u,I),x||v||(x=!0,E||(E=!0,z()))),I},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(I){var Y=y;return function(){var J=y;y=Y;try{return I.apply(this,arguments)}finally{y=J}}}})(cx)),cx}var x3;function k9(){return x3||(x3=1,lx.exports=S9()),lx.exports}var ux={exports:{}},bs={};var w3;function C9(){if(w3)return bs;w3=1;var t=ah();function e(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function i(u,h,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:p==null?null:""+p,children:u,containerInfo:h,implementation:m}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return bs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,bs.createPortal=function(u,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return i(u,h,null,m)},bs.flushSync=function(u){var h=o.T,m=s.p;try{if(o.T=null,s.p=2,u)return u()}finally{o.T=h,s.p=m,s.d.f()}},bs.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(u,h))},bs.prefetchDNS=function(u){typeof u=="string"&&s.d.D(u)},bs.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var m=h.as,p=c(m,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?s.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:y,fetchPriority:v}):m==="script"&&s.d.X(u,{crossOrigin:p,integrity:y,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},bs.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=c(h.as,h.crossOrigin);s.d.M(u,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(u)},bs.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,p=c(m,h.crossOrigin);s.d.L(u,m,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},bs.preloadModule=function(u,h){if(typeof u=="string")if(h){var m=c(h.as,h.crossOrigin);s.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(u)},bs.requestFormReset=function(u){s.d.r(u)},bs.unstable_batchedUpdates=function(u,h){return u(h)},bs.useFormState=function(u,h,m){return o.H.useFormState(u,h,m)},bs.useFormStatus=function(){return o.H.useHostTransitionStatus()},bs.version="19.2.3",bs}var S3;function a6(){if(S3)return ux.exports;S3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ux.exports=C9(),ux.exports}var k3;function N9(){if(k3)return kd;k3=1;var t=k9(),e=ah(),n=a6();function s(a){var l="https://react.dev/errors/"+a;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function i(a){var l=a,d=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(d=l.return),a=l.return;while(a)}return l.tag===3?d:null}function o(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function c(a){if(a.tag===31){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function u(a){if(i(a)!==a)throw Error(s(188))}function h(a){var l=a.alternate;if(!l){if(l=i(a),l===null)throw Error(s(188));return l!==a?null:a}for(var d=a,g=l;;){var b=d.return;if(b===null)break;var w=b.alternate;if(w===null){if(g=b.return,g!==null){d=g;continue}break}if(b.child===w.child){for(w=b.child;w;){if(w===d)return u(b),a;if(w===g)return u(b),l;w=w.sibling}throw Error(s(188))}if(d.return!==g.return)d=b,g=w;else{for(var T=!1,U=b.child;U;){if(U===d){T=!0,d=b,g=w;break}if(U===g){T=!0,g=b,d=w;break}U=U.sibling}if(!T){for(U=w.child;U;){if(U===d){T=!0,d=w,g=b;break}if(U===g){T=!0,g=w,d=b;break}U=U.sibling}if(!T)throw Error(s(189))}}if(d.alternate!==g)throw Error(s(190))}if(d.tag!==3)throw Error(s(188));return d.stateNode.current===d?a:l}function m(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a;for(a=a.child;a!==null;){if(l=m(a),l!==null)return l;a=a.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),N=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function z(a){return a===null||typeof a!="object"?null:(a=G&&a[G]||a["@@iterator"],typeof a=="function"?a:null)}var K=Symbol.for("react.client.reference");function Z(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===K?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case _:return"Fragment";case k:return"Profiler";case S:return"StrictMode";case O:return"Suspense";case E:return"SuspenseList";case q:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case x:return"Portal";case N:return a.displayName||"Context";case C:return(a._context.displayName||"Context")+".Consumer";case R:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case D:return l=a.displayName||null,l!==null?l:Z(a.type)||"Memo";case B:l=a._payload,a=a._init;try{return Z(a(l))}catch{}}return null}var W=Array.isArray,I=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},$=[],j=-1;function M(a){return{current:a}}function F(a){0>j||(a.current=$[j],$[j]=null,j--)}function A(a,l){j++,$[j]=a.current,a.current=l}var Q=M(null),se=M(null),X=M(null),ae=M(null);function ke(a,l){switch(A(X,l),A(se,a),A(Q,null),l.nodeType){case 9:case 11:a=(a=l.documentElement)&&(a=a.namespaceURI)?P5(a):0;break;default:if(a=l.tagName,l=l.namespaceURI)l=P5(l),a=$5(l,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}F(Q),A(Q,a)}function Se(){F(Q),F(se),F(X)}function Ve(a){a.memoizedState!==null&&A(ae,a);var l=Q.current,d=$5(l,a.type);l!==d&&(A(se,a),A(Q,d))}function Le(a){se.current===a&&(F(Q),F(se)),ae.current===a&&(F(ae),bd._currentValue=J)}var rt,Ye;function Je(a){if(rt===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);rt=l&&l[1]||"",Ye=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+rt+a+Ye}var Rt=!1;function At(a,l){if(!a||Rt)return"";Rt=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(l){var ve=function(){throw Error()};if(Object.defineProperty(ve.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ve,[])}catch(pe){var he=pe}Reflect.construct(a,[],ve)}else{try{ve.call()}catch(pe){he=pe}a.call(ve.prototype)}}else{try{throw Error()}catch(pe){he=pe}(ve=a())&&typeof ve.catch=="function"&&ve.catch(function(){})}}catch(pe){if(pe&&he&&typeof pe.stack=="string")return[pe.stack,he.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=g.DetermineComponentFrameRoot(),T=w[0],U=w[1];if(T&&U){var ee=T.split(`
`),ce=U.split(`
`);for(b=g=0;g<ee.length&&!ee[g].includes("DetermineComponentFrameRoot");)g++;for(;b<ce.length&&!ce[b].includes("DetermineComponentFrameRoot");)b++;if(g===ee.length||b===ce.length)for(g=ee.length-1,b=ce.length-1;1<=g&&0<=b&&ee[g]!==ce[b];)b--;for(;1<=g&&0<=b;g--,b--)if(ee[g]!==ce[b]){if(g!==1||b!==1)do if(g--,b--,0>b||ee[g]!==ce[b]){var ge=`
`+ee[g].replace(" at new "," at ");return a.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",a.displayName)),ge}while(1<=g&&0<=b);break}}}finally{Rt=!1,Error.prepareStackTrace=d}return(d=a?a.displayName||a.name:"")?Je(d):""}function Zt(a,l){switch(a.tag){case 26:case 27:case 5:return Je(a.type);case 16:return Je("Lazy");case 13:return a.child!==l&&l!==null?Je("Suspense Fallback"):Je("Suspense");case 19:return Je("SuspenseList");case 0:case 15:return At(a.type,!1);case 11:return At(a.type.render,!1);case 1:return At(a.type,!0);case 31:return Je("Activity");default:return""}}function on(a){try{var l="",d=null;do l+=Zt(a,d),d=a,a=a.return;while(a);return l}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var qt=Object.prototype.hasOwnProperty,tn=t.unstable_scheduleCallback,je=t.unstable_cancelCallback,We=t.unstable_shouldYield,Qe=t.unstable_requestPaint,tt=t.unstable_now,Mt=t.unstable_getCurrentPriorityLevel,fe=t.unstable_ImmediatePriority,xe=t.unstable_UserBlockingPriority,Ge=t.unstable_NormalPriority,it=t.unstable_LowPriority,pt=t.unstable_IdlePriority,ln=t.log,re=t.unstable_setDisableYieldValue,oe=null,de=null;function Ce(a){if(typeof ln=="function"&&re(a),de&&typeof de.setStrictMode=="function")try{de.setStrictMode(oe,a)}catch{}}var me=Math.clz32?Math.clz32:ct,ze=Math.log,lt=Math.LN2;function ct(a){return a>>>=0,a===0?32:31-(ze(a)/lt|0)|0}var Oe=256,Ie=262144,Ue=4194304;function He(a){var l=a&42;if(l!==0)return l;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function bt(a,l,d){var g=a.pendingLanes;if(g===0)return 0;var b=0,w=a.suspendedLanes,T=a.pingedLanes;a=a.warmLanes;var U=g&134217727;return U!==0?(g=U&~w,g!==0?b=He(g):(T&=U,T!==0?b=He(T):d||(d=U&~a,d!==0&&(b=He(d))))):(U=g&~w,U!==0?b=He(U):T!==0?b=He(T):d||(d=g&~a,d!==0&&(b=He(d)))),b===0?0:l!==0&&l!==b&&(l&w)===0&&(w=b&-b,d=l&-l,w>=d||w===32&&(d&4194048)!==0)?l:b}function $t(a,l){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&l)===0}function fn(a,l){switch(a){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Us(){var a=Ue;return Ue<<=1,(Ue&62914560)===0&&(Ue=4194304),a}function yc(a){for(var l=[],d=0;31>d;d++)l.push(a);return l}function Wo(a,l){a.pendingLanes|=l,l!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Wb(a,l,d,g,b,w){var T=a.pendingLanes;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=d,a.entangledLanes&=d,a.errorRecoveryDisabledLanes&=d,a.shellSuspendCounter=0;var U=a.entanglements,ee=a.expirationTimes,ce=a.hiddenUpdates;for(d=T&~d;0<d;){var ge=31-me(d),ve=1<<ge;U[ge]=0,ee[ge]=-1;var he=ce[ge];if(he!==null)for(ce[ge]=null,ge=0;ge<he.length;ge++){var pe=he[ge];pe!==null&&(pe.lane&=-536870913)}d&=~ve}g!==0&&_4(a,g,0),w!==0&&b===0&&a.tag!==0&&(a.suspendedLanes|=w&~(T&~l))}function _4(a,l,d){a.pendingLanes|=l,a.suspendedLanes&=~l;var g=31-me(l);a.entangledLanes|=l,a.entanglements[g]=a.entanglements[g]|1073741824|d&261930}function x4(a,l){var d=a.entangledLanes|=l;for(a=a.entanglements;d;){var g=31-me(d),b=1<<g;b&l|a[g]&l&&(a[g]|=l),d&=~b}}function w4(a,l){var d=l&-l;return d=(d&42)!==0?1:Gb(d),(d&(a.suspendedLanes|l))!==0?0:d}function Gb(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Yb(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function S4(){var a=Y.p;return a!==0?a:(a=window.event,a===void 0?32:l3(a.type))}function k4(a,l){var d=Y.p;try{return Y.p=a,l()}finally{Y.p=d}}var Ua=Math.random().toString(36).slice(2),ss="__reactFiber$"+Ua,Hs="__reactProps$"+Ua,vc="__reactContainer$"+Ua,Zb="__reactEvents$"+Ua,cz="__reactListeners$"+Ua,uz="__reactHandles$"+Ua,C4="__reactResources$"+Ua,Dh="__reactMarker$"+Ua;function Xb(a){delete a[ss],delete a[Hs],delete a[Zb],delete a[cz],delete a[uz]}function bc(a){var l=a[ss];if(l)return l;for(var d=a.parentNode;d;){if(l=d[vc]||d[ss]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(a=K5(a);a!==null;){if(d=a[ss])return d;a=K5(a)}return l}a=d,d=a.parentNode}return null}function _c(a){if(a=a[ss]||a[vc]){var l=a.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return a}return null}function Bh(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a.stateNode;throw Error(s(33))}function xc(a){var l=a[C4];return l||(l=a[C4]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Yn(a){a[Dh]=!0}var N4=new Set,E4={};function Go(a,l){wc(a,l),wc(a+"Capture",l)}function wc(a,l){for(E4[a]=l,a=0;a<l.length;a++)N4.add(l[a])}var hz=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),A4={},j4={};function dz(a){return qt.call(j4,a)?!0:qt.call(A4,a)?!1:hz.test(a)?j4[a]=!0:(A4[a]=!0,!1)}function pm(a,l,d){if(dz(l))if(d===null)a.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":a.removeAttribute(l);return;case"boolean":var g=l.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){a.removeAttribute(l);return}}a.setAttribute(l,""+d)}}function mm(a,l,d){if(d===null)a.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttribute(l,""+d)}}function Zi(a,l,d,g){if(g===null)a.removeAttribute(d);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(d);return}a.setAttributeNS(l,d,""+g)}}function Rr(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function T4(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function fz(a,l,d){var g=Object.getOwnPropertyDescriptor(a.constructor.prototype,l);if(!a.hasOwnProperty(l)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var b=g.get,w=g.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return b.call(this)},set:function(T){d=""+T,w.call(this,T)}}),Object.defineProperty(a,l,{enumerable:g.enumerable}),{getValue:function(){return d},setValue:function(T){d=""+T},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function Jb(a){if(!a._valueTracker){var l=T4(a)?"checked":"value";a._valueTracker=fz(a,l,""+a[l])}}function R4(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var d=l.getValue(),g="";return a&&(g=T4(a)?a.checked?"true":"false":a.value),a=g,a!==d?(l.setValue(a),!0):!1}function gm(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var pz=/[\n"\\]/g;function Or(a){return a.replace(pz,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Qb(a,l,d,g,b,w,T,U){a.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?a.type=T:a.removeAttribute("type"),l!=null?T==="number"?(l===0&&a.value===""||a.value!=l)&&(a.value=""+Rr(l)):a.value!==""+Rr(l)&&(a.value=""+Rr(l)):T!=="submit"&&T!=="reset"||a.removeAttribute("value"),l!=null?e1(a,T,Rr(l)):d!=null?e1(a,T,Rr(d)):g!=null&&a.removeAttribute("value"),b==null&&w!=null&&(a.defaultChecked=!!w),b!=null&&(a.checked=b&&typeof b!="function"&&typeof b!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?a.name=""+Rr(U):a.removeAttribute("name")}function O4(a,l,d,g,b,w,T,U){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(a.type=w),l!=null||d!=null){if(!(w!=="submit"&&w!=="reset"||l!=null)){Jb(a);return}d=d!=null?""+Rr(d):"",l=l!=null?""+Rr(l):d,U||l===a.value||(a.value=l),a.defaultValue=l}g=g??b,g=typeof g!="function"&&typeof g!="symbol"&&!!g,a.checked=U?a.checked:!!g,a.defaultChecked=!!g,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(a.name=T),Jb(a)}function e1(a,l,d){l==="number"&&gm(a.ownerDocument)===a||a.defaultValue===""+d||(a.defaultValue=""+d)}function Sc(a,l,d,g){if(a=a.options,l){l={};for(var b=0;b<d.length;b++)l["$"+d[b]]=!0;for(d=0;d<a.length;d++)b=l.hasOwnProperty("$"+a[d].value),a[d].selected!==b&&(a[d].selected=b),b&&g&&(a[d].defaultSelected=!0)}else{for(d=""+Rr(d),l=null,b=0;b<a.length;b++){if(a[b].value===d){a[b].selected=!0,g&&(a[b].defaultSelected=!0);return}l!==null||a[b].disabled||(l=a[b])}l!==null&&(l.selected=!0)}}function M4(a,l,d){if(l!=null&&(l=""+Rr(l),l!==a.value&&(a.value=l),d==null)){a.defaultValue!==l&&(a.defaultValue=l);return}a.defaultValue=d!=null?""+Rr(d):""}function D4(a,l,d,g){if(l==null){if(g!=null){if(d!=null)throw Error(s(92));if(W(g)){if(1<g.length)throw Error(s(93));g=g[0]}d=g}d==null&&(d=""),l=d}d=Rr(l),a.defaultValue=d,g=a.textContent,g===d&&g!==""&&g!==null&&(a.value=g),Jb(a)}function kc(a,l){if(l){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=l;return}}a.textContent=l}var mz=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function B4(a,l,d){var g=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?g?a.setProperty(l,""):l==="float"?a.cssFloat="":a[l]="":g?a.setProperty(l,d):typeof d!="number"||d===0||mz.has(l)?l==="float"?a.cssFloat=d:a[l]=(""+d).trim():a[l]=d+"px"}function L4(a,l,d){if(l!=null&&typeof l!="object")throw Error(s(62));if(a=a.style,d!=null){for(var g in d)!d.hasOwnProperty(g)||l!=null&&l.hasOwnProperty(g)||(g.indexOf("--")===0?a.setProperty(g,""):g==="float"?a.cssFloat="":a[g]="");for(var b in l)g=l[b],l.hasOwnProperty(b)&&d[b]!==g&&B4(a,b,g)}else for(var w in l)l.hasOwnProperty(w)&&B4(a,w,l[w])}function t1(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gz=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yz=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ym(a){return yz.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function Xi(){}var n1=null;function s1(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Cc=null,Nc=null;function I4(a){var l=_c(a);if(l&&(a=l.stateNode)){var d=a[Hs]||null;e:switch(a=l.stateNode,l.type){case"input":if(Qb(a,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Or(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var g=d[l];if(g!==a&&g.form===a.form){var b=g[Hs]||null;if(!b)throw Error(s(90));Qb(g,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(l=0;l<d.length;l++)g=d[l],g.form===a.form&&R4(g)}break e;case"textarea":M4(a,d.value,d.defaultValue);break e;case"select":l=d.value,l!=null&&Sc(a,!!d.multiple,l,!1)}}}var r1=!1;function P4(a,l,d){if(r1)return a(l,d);r1=!0;try{var g=a(l);return g}finally{if(r1=!1,(Cc!==null||Nc!==null)&&(rg(),Cc&&(l=Cc,a=Nc,Nc=Cc=null,I4(l),a)))for(l=0;l<a.length;l++)I4(a[l])}}function Lh(a,l){var d=a.stateNode;if(d===null)return null;var g=d[Hs]||null;if(g===null)return null;d=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(s(231,l,typeof d));return d}var Ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),i1=!1;if(Ji)try{var Ih={};Object.defineProperty(Ih,"passive",{get:function(){i1=!0}}),window.addEventListener("test",Ih,Ih),window.removeEventListener("test",Ih,Ih)}catch{i1=!1}var Ha=null,a1=null,vm=null;function $4(){if(vm)return vm;var a,l=a1,d=l.length,g,b="value"in Ha?Ha.value:Ha.textContent,w=b.length;for(a=0;a<d&&l[a]===b[a];a++);var T=d-a;for(g=1;g<=T&&l[d-g]===b[w-g];g++);return vm=b.slice(a,1<g?1-g:void 0)}function bm(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function _m(){return!0}function z4(){return!1}function Fs(a){function l(d,g,b,w,T){this._reactName=d,this._targetInst=b,this.type=g,this.nativeEvent=w,this.target=T,this.currentTarget=null;for(var U in a)a.hasOwnProperty(U)&&(d=a[U],this[U]=d?d(w):w[U]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?_m:z4,this.isPropagationStopped=z4,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=_m)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=_m)},persist:function(){},isPersistent:_m}),l}var Yo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xm=Fs(Yo),Ph=p({},Yo,{view:0,detail:0}),vz=Fs(Ph),o1,l1,$h,wm=p({},Ph,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:u1,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==$h&&($h&&a.type==="mousemove"?(o1=a.screenX-$h.screenX,l1=a.screenY-$h.screenY):l1=o1=0,$h=a),o1)},movementY:function(a){return"movementY"in a?a.movementY:l1}}),U4=Fs(wm),bz=p({},wm,{dataTransfer:0}),_z=Fs(bz),xz=p({},Ph,{relatedTarget:0}),c1=Fs(xz),wz=p({},Yo,{animationName:0,elapsedTime:0,pseudoElement:0}),Sz=Fs(wz),kz=p({},Yo,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Cz=Fs(kz),Nz=p({},Yo,{data:0}),H4=Fs(Nz),Ez={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Az={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jz={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tz(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=jz[a])?!!l[a]:!1}function u1(){return Tz}var Rz=p({},Ph,{key:function(a){if(a.key){var l=Ez[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=bm(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Az[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:u1,charCode:function(a){return a.type==="keypress"?bm(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?bm(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Oz=Fs(Rz),Mz=p({},wm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),F4=Fs(Mz),Dz=p({},Ph,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:u1}),Bz=Fs(Dz),Lz=p({},Yo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Iz=Fs(Lz),Pz=p({},wm,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),$z=Fs(Pz),zz=p({},Yo,{newState:0,oldState:0}),Uz=Fs(zz),Hz=[9,13,27,32],h1=Ji&&"CompositionEvent"in window,zh=null;Ji&&"documentMode"in document&&(zh=document.documentMode);var Fz=Ji&&"TextEvent"in window&&!zh,V4=Ji&&(!h1||zh&&8<zh&&11>=zh),q4=" ",K4=!1;function W4(a,l){switch(a){case"keyup":return Hz.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function G4(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Ec=!1;function Vz(a,l){switch(a){case"compositionend":return G4(l);case"keypress":return l.which!==32?null:(K4=!0,q4);case"textInput":return a=l.data,a===q4&&K4?null:a;default:return null}}function qz(a,l){if(Ec)return a==="compositionend"||!h1&&W4(a,l)?(a=$4(),vm=a1=Ha=null,Ec=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return V4&&l.locale!=="ko"?null:l.data;default:return null}}var Kz={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Y4(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!Kz[a.type]:l==="textarea"}function Z4(a,l,d,g){Cc?Nc?Nc.push(g):Nc=[g]:Cc=g,l=hg(l,"onChange"),0<l.length&&(d=new xm("onChange","change",null,d,g),a.push({event:d,listeners:l}))}var Uh=null,Hh=null;function Wz(a){O5(a,0)}function Sm(a){var l=Bh(a);if(R4(l))return a}function X4(a,l){if(a==="change")return l}var J4=!1;if(Ji){var d1;if(Ji){var f1="oninput"in document;if(!f1){var Q4=document.createElement("div");Q4.setAttribute("oninput","return;"),f1=typeof Q4.oninput=="function"}d1=f1}else d1=!1;J4=d1&&(!document.documentMode||9<document.documentMode)}function eE(){Uh&&(Uh.detachEvent("onpropertychange",tE),Hh=Uh=null)}function tE(a){if(a.propertyName==="value"&&Sm(Hh)){var l=[];Z4(l,Hh,a,s1(a)),P4(Wz,l)}}function Gz(a,l,d){a==="focusin"?(eE(),Uh=l,Hh=d,Uh.attachEvent("onpropertychange",tE)):a==="focusout"&&eE()}function Yz(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Sm(Hh)}function Zz(a,l){if(a==="click")return Sm(l)}function Xz(a,l){if(a==="input"||a==="change")return Sm(l)}function Jz(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var ar=typeof Object.is=="function"?Object.is:Jz;function Fh(a,l){if(ar(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var d=Object.keys(a),g=Object.keys(l);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var b=d[g];if(!qt.call(l,b)||!ar(a[b],l[b]))return!1}return!0}function nE(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function sE(a,l){var d=nE(a);a=0;for(var g;d;){if(d.nodeType===3){if(g=a+d.textContent.length,a<=l&&g>=l)return{node:d,offset:l-a};a=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=nE(d)}}function rE(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?rE(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function iE(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var l=gm(a.document);l instanceof a.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)a=l.contentWindow;else break;l=gm(a.document)}return l}function p1(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}var Qz=Ji&&"documentMode"in document&&11>=document.documentMode,Ac=null,m1=null,Vh=null,g1=!1;function aE(a,l,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;g1||Ac==null||Ac!==gm(g)||(g=Ac,"selectionStart"in g&&p1(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Vh&&Fh(Vh,g)||(Vh=g,g=hg(m1,"onSelect"),0<g.length&&(l=new xm("onSelect","select",null,l,d),a.push({event:l,listeners:g}),l.target=Ac)))}function Zo(a,l){var d={};return d[a.toLowerCase()]=l.toLowerCase(),d["Webkit"+a]="webkit"+l,d["Moz"+a]="moz"+l,d}var jc={animationend:Zo("Animation","AnimationEnd"),animationiteration:Zo("Animation","AnimationIteration"),animationstart:Zo("Animation","AnimationStart"),transitionrun:Zo("Transition","TransitionRun"),transitionstart:Zo("Transition","TransitionStart"),transitioncancel:Zo("Transition","TransitionCancel"),transitionend:Zo("Transition","TransitionEnd")},y1={},oE={};Ji&&(oE=document.createElement("div").style,"AnimationEvent"in window||(delete jc.animationend.animation,delete jc.animationiteration.animation,delete jc.animationstart.animation),"TransitionEvent"in window||delete jc.transitionend.transition);function Xo(a){if(y1[a])return y1[a];if(!jc[a])return a;var l=jc[a],d;for(d in l)if(l.hasOwnProperty(d)&&d in oE)return y1[a]=l[d];return a}var lE=Xo("animationend"),cE=Xo("animationiteration"),uE=Xo("animationstart"),e7=Xo("transitionrun"),t7=Xo("transitionstart"),n7=Xo("transitioncancel"),hE=Xo("transitionend"),dE=new Map,v1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");v1.push("scrollEnd");function ii(a,l){dE.set(a,l),Go(l,[a])}var km=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Mr=[],Tc=0,b1=0;function Cm(){for(var a=Tc,l=b1=Tc=0;l<a;){var d=Mr[l];Mr[l++]=null;var g=Mr[l];Mr[l++]=null;var b=Mr[l];Mr[l++]=null;var w=Mr[l];if(Mr[l++]=null,g!==null&&b!==null){var T=g.pending;T===null?b.next=b:(b.next=T.next,T.next=b),g.pending=b}w!==0&&fE(d,b,w)}}function Nm(a,l,d,g){Mr[Tc++]=a,Mr[Tc++]=l,Mr[Tc++]=d,Mr[Tc++]=g,b1|=g,a.lanes|=g,a=a.alternate,a!==null&&(a.lanes|=g)}function _1(a,l,d,g){return Nm(a,l,d,g),Em(a)}function Jo(a,l){return Nm(a,null,null,l),Em(a)}function fE(a,l,d){a.lanes|=d;var g=a.alternate;g!==null&&(g.lanes|=d);for(var b=!1,w=a.return;w!==null;)w.childLanes|=d,g=w.alternate,g!==null&&(g.childLanes|=d),w.tag===22&&(a=w.stateNode,a===null||a._visibility&1||(b=!0)),a=w,w=w.return;return a.tag===3?(w=a.stateNode,b&&l!==null&&(b=31-me(d),a=w.hiddenUpdates,g=a[b],g===null?a[b]=[l]:g.push(l),l.lane=d|536870912),w):null}function Em(a){if(50<dd)throw dd=0,j_=null,Error(s(185));for(var l=a.return;l!==null;)a=l,l=a.return;return a.tag===3?a.stateNode:null}var Rc={};function s7(a,l,d,g){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function or(a,l,d,g){return new s7(a,l,d,g)}function x1(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Qi(a,l){var d=a.alternate;return d===null?(d=or(a.tag,l,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=l,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&65011712,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,l=a.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d.refCleanup=a.refCleanup,d}function pE(a,l){a.flags&=65011714;var d=a.alternate;return d===null?(a.childLanes=0,a.lanes=l,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=d.childLanes,a.lanes=d.lanes,a.child=d.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=d.memoizedProps,a.memoizedState=d.memoizedState,a.updateQueue=d.updateQueue,a.type=d.type,l=d.dependencies,a.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),a}function Am(a,l,d,g,b,w){var T=0;if(g=a,typeof a=="function")x1(a)&&(T=1);else if(typeof a=="string")T=l9(a,d,Q.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case q:return a=or(31,d,l,b),a.elementType=q,a.lanes=w,a;case _:return Qo(d.children,b,w,l);case S:T=8,b|=24;break;case k:return a=or(12,d,l,b|2),a.elementType=k,a.lanes=w,a;case O:return a=or(13,d,l,b),a.elementType=O,a.lanes=w,a;case E:return a=or(19,d,l,b),a.elementType=E,a.lanes=w,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case N:T=10;break e;case C:T=9;break e;case R:T=11;break e;case D:T=14;break e;case B:T=16,g=null;break e}T=29,d=Error(s(130,a===null?"null":typeof a,"")),g=null}return l=or(T,d,l,b),l.elementType=a,l.type=g,l.lanes=w,l}function Qo(a,l,d,g){return a=or(7,a,g,l),a.lanes=d,a}function w1(a,l,d){return a=or(6,a,null,l),a.lanes=d,a}function mE(a){var l=or(18,null,null,0);return l.stateNode=a,l}function S1(a,l,d){return l=or(4,a.children!==null?a.children:[],a.key,l),l.lanes=d,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}var gE=new WeakMap;function Dr(a,l){if(typeof a=="object"&&a!==null){var d=gE.get(a);return d!==void 0?d:(l={value:a,source:l,stack:on(l)},gE.set(a,l),l)}return{value:a,source:l,stack:on(l)}}var Oc=[],Mc=0,jm=null,qh=0,Br=[],Lr=0,Fa=null,xi=1,wi="";function ea(a,l){Oc[Mc++]=qh,Oc[Mc++]=jm,jm=a,qh=l}function yE(a,l,d){Br[Lr++]=xi,Br[Lr++]=wi,Br[Lr++]=Fa,Fa=a;var g=xi;a=wi;var b=32-me(g)-1;g&=~(1<<b),d+=1;var w=32-me(l)+b;if(30<w){var T=b-b%5;w=(g&(1<<T)-1).toString(32),g>>=T,b-=T,xi=1<<32-me(l)+b|d<<b|g,wi=w+a}else xi=1<<w|d<<b|g,wi=a}function k1(a){a.return!==null&&(ea(a,1),yE(a,1,0))}function C1(a){for(;a===jm;)jm=Oc[--Mc],Oc[Mc]=null,qh=Oc[--Mc],Oc[Mc]=null;for(;a===Fa;)Fa=Br[--Lr],Br[Lr]=null,wi=Br[--Lr],Br[Lr]=null,xi=Br[--Lr],Br[Lr]=null}function vE(a,l){Br[Lr++]=xi,Br[Lr++]=wi,Br[Lr++]=Fa,xi=l.id,wi=l.overflow,Fa=a}var rs=null,nn=null,Ot=!1,Va=null,Ir=!1,N1=Error(s(519));function qa(a){var l=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Kh(Dr(l,a)),N1}function bE(a){var l=a.stateNode,d=a.type,g=a.memoizedProps;switch(l[ss]=a,l[Hs]=g,d){case"dialog":Nt("cancel",l),Nt("close",l);break;case"iframe":case"object":case"embed":Nt("load",l);break;case"video":case"audio":for(d=0;d<pd.length;d++)Nt(pd[d],l);break;case"source":Nt("error",l);break;case"img":case"image":case"link":Nt("error",l),Nt("load",l);break;case"details":Nt("toggle",l);break;case"input":Nt("invalid",l),O4(l,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":Nt("invalid",l);break;case"textarea":Nt("invalid",l),D4(l,g.value,g.defaultValue,g.children)}d=g.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||g.suppressHydrationWarning===!0||L5(l.textContent,d)?(g.popover!=null&&(Nt("beforetoggle",l),Nt("toggle",l)),g.onScroll!=null&&Nt("scroll",l),g.onScrollEnd!=null&&Nt("scrollend",l),g.onClick!=null&&(l.onclick=Xi),l=!0):l=!1,l||qa(a,!0)}function _E(a){for(rs=a.return;rs;)switch(rs.tag){case 5:case 31:case 13:Ir=!1;return;case 27:case 3:Ir=!0;return;default:rs=rs.return}}function Dc(a){if(a!==rs)return!1;if(!Ot)return _E(a),Ot=!0,!1;var l=a.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=a.type,d=!(d!=="form"&&d!=="button")||V_(a.type,a.memoizedProps)),d=!d),d&&nn&&qa(a),_E(a),l===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(317));nn=q5(a)}else if(l===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(317));nn=q5(a)}else l===27?(l=nn,io(a.type)?(a=Y_,Y_=null,nn=a):nn=l):nn=rs?$r(a.stateNode.nextSibling):null;return!0}function el(){nn=rs=null,Ot=!1}function E1(){var a=Va;return a!==null&&(Ws===null?Ws=a:Ws.push.apply(Ws,a),Va=null),a}function Kh(a){Va===null?Va=[a]:Va.push(a)}var A1=M(null),tl=null,ta=null;function Ka(a,l,d){A(A1,l._currentValue),l._currentValue=d}function na(a){a._currentValue=A1.current,F(A1)}function j1(a,l,d){for(;a!==null;){var g=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),a===d)break;a=a.return}}function T1(a,l,d,g){var b=a.child;for(b!==null&&(b.return=a);b!==null;){var w=b.dependencies;if(w!==null){var T=b.child;w=w.firstContext;e:for(;w!==null;){var U=w;w=b;for(var ee=0;ee<l.length;ee++)if(U.context===l[ee]){w.lanes|=d,U=w.alternate,U!==null&&(U.lanes|=d),j1(w.return,d,a),g||(T=null);break e}w=U.next}}else if(b.tag===18){if(T=b.return,T===null)throw Error(s(341));T.lanes|=d,w=T.alternate,w!==null&&(w.lanes|=d),j1(T,d,a),T=null}else T=b.child;if(T!==null)T.return=b;else for(T=b;T!==null;){if(T===a){T=null;break}if(b=T.sibling,b!==null){b.return=T.return,T=b;break}T=T.return}b=T}}function Bc(a,l,d,g){a=null;for(var b=l,w=!1;b!==null;){if(!w){if((b.flags&524288)!==0)w=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var T=b.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var U=b.type;ar(b.pendingProps.value,T.value)||(a!==null?a.push(U):a=[U])}}else if(b===ae.current){if(T=b.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(a!==null?a.push(bd):a=[bd])}b=b.return}a!==null&&T1(l,a,d,g),l.flags|=262144}function Tm(a){for(a=a.firstContext;a!==null;){if(!ar(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function nl(a){tl=a,ta=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function is(a){return xE(tl,a)}function Rm(a,l){return tl===null&&nl(a),xE(a,l)}function xE(a,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},ta===null){if(a===null)throw Error(s(308));ta=l,a.dependencies={lanes:0,firstContext:l},a.flags|=524288}else ta=ta.next=l;return d}var r7=typeof AbortController<"u"?AbortController:function(){var a=[],l=this.signal={aborted:!1,addEventListener:function(d,g){a.push(g)}};this.abort=function(){l.aborted=!0,a.forEach(function(d){return d()})}},i7=t.unstable_scheduleCallback,a7=t.unstable_NormalPriority,jn={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function R1(){return{controller:new r7,data:new Map,refCount:0}}function Wh(a){a.refCount--,a.refCount===0&&i7(a7,function(){a.controller.abort()})}var Gh=null,O1=0,Lc=0,Ic=null;function o7(a,l){if(Gh===null){var d=Gh=[];O1=0,Lc=B_(),Ic={status:"pending",value:void 0,then:function(g){d.push(g)}}}return O1++,l.then(wE,wE),l}function wE(){if(--O1===0&&Gh!==null){Ic!==null&&(Ic.status="fulfilled");var a=Gh;Gh=null,Lc=0,Ic=null;for(var l=0;l<a.length;l++)(0,a[l])()}}function l7(a,l){var d=[],g={status:"pending",value:null,reason:null,then:function(b){d.push(b)}};return a.then(function(){g.status="fulfilled",g.value=l;for(var b=0;b<d.length;b++)(0,d[b])(l)},function(b){for(g.status="rejected",g.reason=b,b=0;b<d.length;b++)(0,d[b])(void 0)}),g}var SE=I.S;I.S=function(a,l){a5=tt(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&o7(a,l),SE!==null&&SE(a,l)};var sl=M(null);function M1(){var a=sl.current;return a!==null?a:Xt.pooledCache}function Om(a,l){l===null?A(sl,sl.current):A(sl,l.pool)}function kE(){var a=M1();return a===null?null:{parent:jn._currentValue,pool:a}}var Pc=Error(s(460)),D1=Error(s(474)),Mm=Error(s(542)),Dm={then:function(){}};function CE(a){return a=a.status,a==="fulfilled"||a==="rejected"}function NE(a,l,d){switch(d=a[d],d===void 0?a.push(l):d!==l&&(l.then(Xi,Xi),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,AE(a),a;default:if(typeof l.status=="string")l.then(Xi,Xi);else{if(a=Xt,a!==null&&100<a.shellSuspendCounter)throw Error(s(482));a=l,a.status="pending",a.then(function(g){if(l.status==="pending"){var b=l;b.status="fulfilled",b.value=g}},function(g){if(l.status==="pending"){var b=l;b.status="rejected",b.reason=g}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,AE(a),a}throw il=l,Pc}}function rl(a){try{var l=a._init;return l(a._payload)}catch(d){throw d!==null&&typeof d=="object"&&typeof d.then=="function"?(il=d,Pc):d}}var il=null;function EE(){if(il===null)throw Error(s(459));var a=il;return il=null,a}function AE(a){if(a===Pc||a===Mm)throw Error(s(483))}var $c=null,Yh=0;function Bm(a){var l=Yh;return Yh+=1,$c===null&&($c=[]),NE($c,a,l)}function Zh(a,l){l=l.props.ref,a.ref=l!==void 0?l:null}function Lm(a,l){throw l.$$typeof===y?Error(s(525)):(a=Object.prototype.toString.call(l),Error(s(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a)))}function jE(a){function l(ie,te){if(a){var le=ie.deletions;le===null?(ie.deletions=[te],ie.flags|=16):le.push(te)}}function d(ie,te){if(!a)return null;for(;te!==null;)l(ie,te),te=te.sibling;return null}function g(ie){for(var te=new Map;ie!==null;)ie.key!==null?te.set(ie.key,ie):te.set(ie.index,ie),ie=ie.sibling;return te}function b(ie,te){return ie=Qi(ie,te),ie.index=0,ie.sibling=null,ie}function w(ie,te,le){return ie.index=le,a?(le=ie.alternate,le!==null?(le=le.index,le<te?(ie.flags|=67108866,te):le):(ie.flags|=67108866,te)):(ie.flags|=1048576,te)}function T(ie){return a&&ie.alternate===null&&(ie.flags|=67108866),ie}function U(ie,te,le,ye){return te===null||te.tag!==6?(te=w1(le,ie.mode,ye),te.return=ie,te):(te=b(te,le),te.return=ie,te)}function ee(ie,te,le,ye){var nt=le.type;return nt===_?ge(ie,te,le.props.children,ye,le.key):te!==null&&(te.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===B&&rl(nt)===te.type)?(te=b(te,le.props),Zh(te,le),te.return=ie,te):(te=Am(le.type,le.key,le.props,null,ie.mode,ye),Zh(te,le),te.return=ie,te)}function ce(ie,te,le,ye){return te===null||te.tag!==4||te.stateNode.containerInfo!==le.containerInfo||te.stateNode.implementation!==le.implementation?(te=S1(le,ie.mode,ye),te.return=ie,te):(te=b(te,le.children||[]),te.return=ie,te)}function ge(ie,te,le,ye,nt){return te===null||te.tag!==7?(te=Qo(le,ie.mode,ye,nt),te.return=ie,te):(te=b(te,le),te.return=ie,te)}function ve(ie,te,le){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return te=w1(""+te,ie.mode,le),te.return=ie,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case v:return le=Am(te.type,te.key,te.props,null,ie.mode,le),Zh(le,te),le.return=ie,le;case x:return te=S1(te,ie.mode,le),te.return=ie,te;case B:return te=rl(te),ve(ie,te,le)}if(W(te)||z(te))return te=Qo(te,ie.mode,le,null),te.return=ie,te;if(typeof te.then=="function")return ve(ie,Bm(te),le);if(te.$$typeof===N)return ve(ie,Rm(ie,te),le);Lm(ie,te)}return null}function he(ie,te,le,ye){var nt=te!==null?te.key:null;if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return nt!==null?null:U(ie,te,""+le,ye);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case v:return le.key===nt?ee(ie,te,le,ye):null;case x:return le.key===nt?ce(ie,te,le,ye):null;case B:return le=rl(le),he(ie,te,le,ye)}if(W(le)||z(le))return nt!==null?null:ge(ie,te,le,ye,null);if(typeof le.then=="function")return he(ie,te,Bm(le),ye);if(le.$$typeof===N)return he(ie,te,Rm(ie,le),ye);Lm(ie,le)}return null}function pe(ie,te,le,ye,nt){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return ie=ie.get(le)||null,U(te,ie,""+ye,nt);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case v:return ie=ie.get(ye.key===null?le:ye.key)||null,ee(te,ie,ye,nt);case x:return ie=ie.get(ye.key===null?le:ye.key)||null,ce(te,ie,ye,nt);case B:return ye=rl(ye),pe(ie,te,le,ye,nt)}if(W(ye)||z(ye))return ie=ie.get(le)||null,ge(te,ie,ye,nt,null);if(typeof ye.then=="function")return pe(ie,te,le,Bm(ye),nt);if(ye.$$typeof===N)return pe(ie,te,le,Rm(te,ye),nt);Lm(te,ye)}return null}function qe(ie,te,le,ye){for(var nt=null,Lt=null,Xe=te,_t=te=0,Tt=null;Xe!==null&&_t<le.length;_t++){Xe.index>_t?(Tt=Xe,Xe=null):Tt=Xe.sibling;var It=he(ie,Xe,le[_t],ye);if(It===null){Xe===null&&(Xe=Tt);break}a&&Xe&&It.alternate===null&&l(ie,Xe),te=w(It,te,_t),Lt===null?nt=It:Lt.sibling=It,Lt=It,Xe=Tt}if(_t===le.length)return d(ie,Xe),Ot&&ea(ie,_t),nt;if(Xe===null){for(;_t<le.length;_t++)Xe=ve(ie,le[_t],ye),Xe!==null&&(te=w(Xe,te,_t),Lt===null?nt=Xe:Lt.sibling=Xe,Lt=Xe);return Ot&&ea(ie,_t),nt}for(Xe=g(Xe);_t<le.length;_t++)Tt=pe(Xe,ie,_t,le[_t],ye),Tt!==null&&(a&&Tt.alternate!==null&&Xe.delete(Tt.key===null?_t:Tt.key),te=w(Tt,te,_t),Lt===null?nt=Tt:Lt.sibling=Tt,Lt=Tt);return a&&Xe.forEach(function(uo){return l(ie,uo)}),Ot&&ea(ie,_t),nt}function ot(ie,te,le,ye){if(le==null)throw Error(s(151));for(var nt=null,Lt=null,Xe=te,_t=te=0,Tt=null,It=le.next();Xe!==null&&!It.done;_t++,It=le.next()){Xe.index>_t?(Tt=Xe,Xe=null):Tt=Xe.sibling;var uo=he(ie,Xe,It.value,ye);if(uo===null){Xe===null&&(Xe=Tt);break}a&&Xe&&uo.alternate===null&&l(ie,Xe),te=w(uo,te,_t),Lt===null?nt=uo:Lt.sibling=uo,Lt=uo,Xe=Tt}if(It.done)return d(ie,Xe),Ot&&ea(ie,_t),nt;if(Xe===null){for(;!It.done;_t++,It=le.next())It=ve(ie,It.value,ye),It!==null&&(te=w(It,te,_t),Lt===null?nt=It:Lt.sibling=It,Lt=It);return Ot&&ea(ie,_t),nt}for(Xe=g(Xe);!It.done;_t++,It=le.next())It=pe(Xe,ie,_t,It.value,ye),It!==null&&(a&&It.alternate!==null&&Xe.delete(It.key===null?_t:It.key),te=w(It,te,_t),Lt===null?nt=It:Lt.sibling=It,Lt=It);return a&&Xe.forEach(function(b9){return l(ie,b9)}),Ot&&ea(ie,_t),nt}function Gt(ie,te,le,ye){if(typeof le=="object"&&le!==null&&le.type===_&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case v:e:{for(var nt=le.key;te!==null;){if(te.key===nt){if(nt=le.type,nt===_){if(te.tag===7){d(ie,te.sibling),ye=b(te,le.props.children),ye.return=ie,ie=ye;break e}}else if(te.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===B&&rl(nt)===te.type){d(ie,te.sibling),ye=b(te,le.props),Zh(ye,le),ye.return=ie,ie=ye;break e}d(ie,te);break}else l(ie,te);te=te.sibling}le.type===_?(ye=Qo(le.props.children,ie.mode,ye,le.key),ye.return=ie,ie=ye):(ye=Am(le.type,le.key,le.props,null,ie.mode,ye),Zh(ye,le),ye.return=ie,ie=ye)}return T(ie);case x:e:{for(nt=le.key;te!==null;){if(te.key===nt)if(te.tag===4&&te.stateNode.containerInfo===le.containerInfo&&te.stateNode.implementation===le.implementation){d(ie,te.sibling),ye=b(te,le.children||[]),ye.return=ie,ie=ye;break e}else{d(ie,te);break}else l(ie,te);te=te.sibling}ye=S1(le,ie.mode,ye),ye.return=ie,ie=ye}return T(ie);case B:return le=rl(le),Gt(ie,te,le,ye)}if(W(le))return qe(ie,te,le,ye);if(z(le)){if(nt=z(le),typeof nt!="function")throw Error(s(150));return le=nt.call(le),ot(ie,te,le,ye)}if(typeof le.then=="function")return Gt(ie,te,Bm(le),ye);if(le.$$typeof===N)return Gt(ie,te,Rm(ie,le),ye);Lm(ie,le)}return typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint"?(le=""+le,te!==null&&te.tag===6?(d(ie,te.sibling),ye=b(te,le),ye.return=ie,ie=ye):(d(ie,te),ye=w1(le,ie.mode,ye),ye.return=ie,ie=ye),T(ie)):d(ie,te)}return function(ie,te,le,ye){try{Yh=0;var nt=Gt(ie,te,le,ye);return $c=null,nt}catch(Xe){if(Xe===Pc||Xe===Mm)throw Xe;var Lt=or(29,Xe,null,ie.mode);return Lt.lanes=ye,Lt.return=ie,Lt}}}var al=jE(!0),TE=jE(!1),Wa=!1;function B1(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function L1(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Ga(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Ya(a,l,d){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(zt&2)!==0){var b=g.pending;return b===null?l.next=l:(l.next=b.next,b.next=l),g.pending=l,l=Em(a),fE(a,null,d),l}return Nm(a,g,l,d),Em(a)}function Xh(a,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var g=l.lanes;g&=a.pendingLanes,d|=g,l.lanes=d,x4(a,d)}}function I1(a,l){var d=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var b=null,w=null;if(d=d.firstBaseUpdate,d!==null){do{var T={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};w===null?b=w=T:w=w.next=T,d=d.next}while(d!==null);w===null?b=w=l:w=w.next=l}else b=w=l;d={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:w,shared:g.shared,callbacks:g.callbacks},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=l:a.next=l,d.lastBaseUpdate=l}var P1=!1;function Jh(){if(P1){var a=Ic;if(a!==null)throw a}}function Qh(a,l,d,g){P1=!1;var b=a.updateQueue;Wa=!1;var w=b.firstBaseUpdate,T=b.lastBaseUpdate,U=b.shared.pending;if(U!==null){b.shared.pending=null;var ee=U,ce=ee.next;ee.next=null,T===null?w=ce:T.next=ce,T=ee;var ge=a.alternate;ge!==null&&(ge=ge.updateQueue,U=ge.lastBaseUpdate,U!==T&&(U===null?ge.firstBaseUpdate=ce:U.next=ce,ge.lastBaseUpdate=ee))}if(w!==null){var ve=b.baseState;T=0,ge=ce=ee=null,U=w;do{var he=U.lane&-536870913,pe=he!==U.lane;if(pe?(jt&he)===he:(g&he)===he){he!==0&&he===Lc&&(P1=!0),ge!==null&&(ge=ge.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var qe=a,ot=U;he=l;var Gt=d;switch(ot.tag){case 1:if(qe=ot.payload,typeof qe=="function"){ve=qe.call(Gt,ve,he);break e}ve=qe;break e;case 3:qe.flags=qe.flags&-65537|128;case 0:if(qe=ot.payload,he=typeof qe=="function"?qe.call(Gt,ve,he):qe,he==null)break e;ve=p({},ve,he);break e;case 2:Wa=!0}}he=U.callback,he!==null&&(a.flags|=64,pe&&(a.flags|=8192),pe=b.callbacks,pe===null?b.callbacks=[he]:pe.push(he))}else pe={lane:he,tag:U.tag,payload:U.payload,callback:U.callback,next:null},ge===null?(ce=ge=pe,ee=ve):ge=ge.next=pe,T|=he;if(U=U.next,U===null){if(U=b.shared.pending,U===null)break;pe=U,U=pe.next,pe.next=null,b.lastBaseUpdate=pe,b.shared.pending=null}}while(!0);ge===null&&(ee=ve),b.baseState=ee,b.firstBaseUpdate=ce,b.lastBaseUpdate=ge,w===null&&(b.shared.lanes=0),eo|=T,a.lanes=T,a.memoizedState=ve}}function RE(a,l){if(typeof a!="function")throw Error(s(191,a));a.call(l)}function OE(a,l){var d=a.callbacks;if(d!==null)for(a.callbacks=null,a=0;a<d.length;a++)RE(d[a],l)}var zc=M(null),Im=M(0);function ME(a,l){a=ha,A(Im,a),A(zc,l),ha=a|l.baseLanes}function $1(){A(Im,ha),A(zc,zc.current)}function z1(){ha=Im.current,F(zc),F(Im)}var lr=M(null),Pr=null;function Za(a){var l=a.alternate;A(wn,wn.current&1),A(lr,a),Pr===null&&(l===null||zc.current!==null||l.memoizedState!==null)&&(Pr=a)}function U1(a){A(wn,wn.current),A(lr,a),Pr===null&&(Pr=a)}function DE(a){a.tag===22?(A(wn,wn.current),A(lr,a),Pr===null&&(Pr=a)):Xa()}function Xa(){A(wn,wn.current),A(lr,lr.current)}function cr(a){F(lr),Pr===a&&(Pr=null),F(wn)}var wn=M(0);function Pm(a){for(var l=a;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||W_(d)||G_(d)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var sa=0,yt=null,Kt=null,Tn=null,$m=!1,Uc=!1,ol=!1,zm=0,ed=0,Hc=null,c7=0;function vn(){throw Error(s(321))}function H1(a,l){if(l===null)return!1;for(var d=0;d<l.length&&d<a.length;d++)if(!ar(a[d],l[d]))return!1;return!0}function F1(a,l,d,g,b,w){return sa=w,yt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,I.H=a===null||a.memoizedState===null?yA:r_,ol=!1,w=d(g,b),ol=!1,Uc&&(w=LE(l,d,g,b)),BE(a),w}function BE(a){I.H=sd;var l=Kt!==null&&Kt.next!==null;if(sa=0,Tn=Kt=yt=null,$m=!1,ed=0,Hc=null,l)throw Error(s(300));a===null||Rn||(a=a.dependencies,a!==null&&Tm(a)&&(Rn=!0))}function LE(a,l,d,g){yt=a;var b=0;do{if(Uc&&(Hc=null),ed=0,Uc=!1,25<=b)throw Error(s(301));if(b+=1,Tn=Kt=null,a.updateQueue!=null){var w=a.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}I.H=vA,w=l(d,g)}while(Uc);return w}function u7(){var a=I.H,l=a.useState()[0];return l=typeof l.then=="function"?td(l):l,a=a.useState()[0],(Kt!==null?Kt.memoizedState:null)!==a&&(yt.flags|=1024),l}function V1(){var a=zm!==0;return zm=0,a}function q1(a,l,d){l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~d}function K1(a){if($m){for(a=a.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}$m=!1}sa=0,Tn=Kt=yt=null,Uc=!1,ed=zm=0,Hc=null}function As(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?yt.memoizedState=Tn=a:Tn=Tn.next=a,Tn}function Sn(){if(Kt===null){var a=yt.alternate;a=a!==null?a.memoizedState:null}else a=Kt.next;var l=Tn===null?yt.memoizedState:Tn.next;if(l!==null)Tn=l,Kt=a;else{if(a===null)throw yt.alternate===null?Error(s(467)):Error(s(310));Kt=a,a={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},Tn===null?yt.memoizedState=Tn=a:Tn=Tn.next=a}return Tn}function Um(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function td(a){var l=ed;return ed+=1,Hc===null&&(Hc=[]),a=NE(Hc,a,l),l=yt,(Tn===null?l.memoizedState:Tn.next)===null&&(l=l.alternate,I.H=l===null||l.memoizedState===null?yA:r_),a}function Hm(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return td(a);if(a.$$typeof===N)return is(a)}throw Error(s(438,String(a)))}function W1(a){var l=null,d=yt.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var g=yt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(l={data:g.data.map(function(b){return b.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=Um(),yt.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(a),g=0;g<a;g++)d[g]=P;return l.index++,d}function ra(a,l){return typeof l=="function"?l(a):l}function Fm(a){var l=Sn();return G1(l,Kt,a)}function G1(a,l,d){var g=a.queue;if(g===null)throw Error(s(311));g.lastRenderedReducer=d;var b=a.baseQueue,w=g.pending;if(w!==null){if(b!==null){var T=b.next;b.next=w.next,w.next=T}l.baseQueue=b=w,g.pending=null}if(w=a.baseState,b===null)a.memoizedState=w;else{l=b.next;var U=T=null,ee=null,ce=l,ge=!1;do{var ve=ce.lane&-536870913;if(ve!==ce.lane?(jt&ve)===ve:(sa&ve)===ve){var he=ce.revertLane;if(he===0)ee!==null&&(ee=ee.next={lane:0,revertLane:0,gesture:null,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null}),ve===Lc&&(ge=!0);else if((sa&he)===he){ce=ce.next,he===Lc&&(ge=!0);continue}else ve={lane:0,revertLane:ce.revertLane,gesture:null,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null},ee===null?(U=ee=ve,T=w):ee=ee.next=ve,yt.lanes|=he,eo|=he;ve=ce.action,ol&&d(w,ve),w=ce.hasEagerState?ce.eagerState:d(w,ve)}else he={lane:ve,revertLane:ce.revertLane,gesture:ce.gesture,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null},ee===null?(U=ee=he,T=w):ee=ee.next=he,yt.lanes|=ve,eo|=ve;ce=ce.next}while(ce!==null&&ce!==l);if(ee===null?T=w:ee.next=U,!ar(w,a.memoizedState)&&(Rn=!0,ge&&(d=Ic,d!==null)))throw d;a.memoizedState=w,a.baseState=T,a.baseQueue=ee,g.lastRenderedState=w}return b===null&&(g.lanes=0),[a.memoizedState,g.dispatch]}function Y1(a){var l=Sn(),d=l.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=a;var g=d.dispatch,b=d.pending,w=l.memoizedState;if(b!==null){d.pending=null;var T=b=b.next;do w=a(w,T.action),T=T.next;while(T!==b);ar(w,l.memoizedState)||(Rn=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),d.lastRenderedState=w}return[w,g]}function IE(a,l,d){var g=yt,b=Sn(),w=Ot;if(w){if(d===void 0)throw Error(s(407));d=d()}else d=l();var T=!ar((Kt||b).memoizedState,d);if(T&&(b.memoizedState=d,Rn=!0),b=b.queue,J1(zE.bind(null,g,b,a),[a]),b.getSnapshot!==l||T||Tn!==null&&Tn.memoizedState.tag&1){if(g.flags|=2048,Fc(9,{destroy:void 0},$E.bind(null,g,b,d,l),null),Xt===null)throw Error(s(349));w||(sa&127)!==0||PE(g,l,d)}return d}function PE(a,l,d){a.flags|=16384,a={getSnapshot:l,value:d},l=yt.updateQueue,l===null?(l=Um(),yt.updateQueue=l,l.stores=[a]):(d=l.stores,d===null?l.stores=[a]:d.push(a))}function $E(a,l,d,g){l.value=d,l.getSnapshot=g,UE(l)&&HE(a)}function zE(a,l,d){return d(function(){UE(l)&&HE(a)})}function UE(a){var l=a.getSnapshot;a=a.value;try{var d=l();return!ar(a,d)}catch{return!0}}function HE(a){var l=Jo(a,2);l!==null&&Gs(l,a,2)}function Z1(a){var l=As();if(typeof a=="function"){var d=a;if(a=d(),ol){Ce(!0);try{d()}finally{Ce(!1)}}}return l.memoizedState=l.baseState=a,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:a},l}function FE(a,l,d,g){return a.baseState=d,G1(a,Kt,typeof g=="function"?g:ra)}function h7(a,l,d,g,b){if(Km(a))throw Error(s(485));if(a=l.action,a!==null){var w={payload:b,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){w.listeners.push(T)}};I.T!==null?d(!0):w.isTransition=!1,g(w),d=l.pending,d===null?(w.next=l.pending=w,VE(l,w)):(w.next=d.next,l.pending=d.next=w)}}function VE(a,l){var d=l.action,g=l.payload,b=a.state;if(l.isTransition){var w=I.T,T={};I.T=T;try{var U=d(b,g),ee=I.S;ee!==null&&ee(T,U),qE(a,l,U)}catch(ce){X1(a,l,ce)}finally{w!==null&&T.types!==null&&(w.types=T.types),I.T=w}}else try{w=d(b,g),qE(a,l,w)}catch(ce){X1(a,l,ce)}}function qE(a,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(g){KE(a,l,g)},function(g){return X1(a,l,g)}):KE(a,l,d)}function KE(a,l,d){l.status="fulfilled",l.value=d,WE(l),a.state=d,l=a.pending,l!==null&&(d=l.next,d===l?a.pending=null:(d=d.next,l.next=d,VE(a,d)))}function X1(a,l,d){var g=a.pending;if(a.pending=null,g!==null){g=g.next;do l.status="rejected",l.reason=d,WE(l),l=l.next;while(l!==g)}a.action=null}function WE(a){a=a.listeners;for(var l=0;l<a.length;l++)(0,a[l])()}function GE(a,l){return l}function YE(a,l){if(Ot){var d=Xt.formState;if(d!==null){e:{var g=yt;if(Ot){if(nn){t:{for(var b=nn,w=Ir;b.nodeType!==8;){if(!w){b=null;break t}if(b=$r(b.nextSibling),b===null){b=null;break t}}w=b.data,b=w==="F!"||w==="F"?b:null}if(b){nn=$r(b.nextSibling),g=b.data==="F!";break e}}qa(g)}g=!1}g&&(l=d[0])}}return d=As(),d.memoizedState=d.baseState=l,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:GE,lastRenderedState:l},d.queue=g,d=pA.bind(null,yt,g),g.dispatch=d,g=Z1(!1),w=s_.bind(null,yt,!1,g.queue),g=As(),b={state:l,dispatch:null,action:a,pending:null},g.queue=b,d=h7.bind(null,yt,b,w,d),b.dispatch=d,g.memoizedState=a,[l,d,!1]}function ZE(a){var l=Sn();return XE(l,Kt,a)}function XE(a,l,d){if(l=G1(a,l,GE)[0],a=Fm(ra)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var g=td(l)}catch(T){throw T===Pc?Mm:T}else g=l;l=Sn();var b=l.queue,w=b.dispatch;return d!==l.memoizedState&&(yt.flags|=2048,Fc(9,{destroy:void 0},d7.bind(null,b,d),null)),[g,w,a]}function d7(a,l){a.action=l}function JE(a){var l=Sn(),d=Kt;if(d!==null)return XE(l,d,a);Sn(),l=l.memoizedState,d=Sn();var g=d.queue.dispatch;return d.memoizedState=a,[l,g,!1]}function Fc(a,l,d,g){return a={tag:a,create:d,deps:g,inst:l,next:null},l=yt.updateQueue,l===null&&(l=Um(),yt.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=a.next=a:(g=d.next,d.next=a,a.next=g,l.lastEffect=a),a}function QE(){return Sn().memoizedState}function Vm(a,l,d,g){var b=As();yt.flags|=a,b.memoizedState=Fc(1|l,{destroy:void 0},d,g===void 0?null:g)}function qm(a,l,d,g){var b=Sn();g=g===void 0?null:g;var w=b.memoizedState.inst;Kt!==null&&g!==null&&H1(g,Kt.memoizedState.deps)?b.memoizedState=Fc(l,w,d,g):(yt.flags|=a,b.memoizedState=Fc(1|l,w,d,g))}function eA(a,l){Vm(8390656,8,a,l)}function J1(a,l){qm(2048,8,a,l)}function f7(a){yt.flags|=4;var l=yt.updateQueue;if(l===null)l=Um(),yt.updateQueue=l,l.events=[a];else{var d=l.events;d===null?l.events=[a]:d.push(a)}}function tA(a){var l=Sn().memoizedState;return f7({ref:l,nextImpl:a}),function(){if((zt&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}function nA(a,l){return qm(4,2,a,l)}function sA(a,l){return qm(4,4,a,l)}function rA(a,l){if(typeof l=="function"){a=a();var d=l(a);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function iA(a,l,d){d=d!=null?d.concat([a]):null,qm(4,4,rA.bind(null,l,a),d)}function Q1(){}function aA(a,l){var d=Sn();l=l===void 0?null:l;var g=d.memoizedState;return l!==null&&H1(l,g[1])?g[0]:(d.memoizedState=[a,l],a)}function oA(a,l){var d=Sn();l=l===void 0?null:l;var g=d.memoizedState;if(l!==null&&H1(l,g[1]))return g[0];if(g=a(),ol){Ce(!0);try{a()}finally{Ce(!1)}}return d.memoizedState=[g,l],g}function e_(a,l,d){return d===void 0||(sa&1073741824)!==0&&(jt&261930)===0?a.memoizedState=l:(a.memoizedState=d,a=l5(),yt.lanes|=a,eo|=a,d)}function lA(a,l,d,g){return ar(d,l)?d:zc.current!==null?(a=e_(a,d,g),ar(a,l)||(Rn=!0),a):(sa&42)===0||(sa&1073741824)!==0&&(jt&261930)===0?(Rn=!0,a.memoizedState=d):(a=l5(),yt.lanes|=a,eo|=a,l)}function cA(a,l,d,g,b){var w=Y.p;Y.p=w!==0&&8>w?w:8;var T=I.T,U={};I.T=U,s_(a,!1,l,d);try{var ee=b(),ce=I.S;if(ce!==null&&ce(U,ee),ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var ge=l7(ee,g);nd(a,l,ge,dr(a))}else nd(a,l,g,dr(a))}catch(ve){nd(a,l,{then:function(){},status:"rejected",reason:ve},dr())}finally{Y.p=w,T!==null&&U.types!==null&&(T.types=U.types),I.T=T}}function p7(){}function t_(a,l,d,g){if(a.tag!==5)throw Error(s(476));var b=uA(a).queue;cA(a,b,l,J,d===null?p7:function(){return hA(a),d(g)})}function uA(a){var l=a.memoizedState;if(l!==null)return l;l={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:J},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:d},next:null},a.memoizedState=l,a=a.alternate,a!==null&&(a.memoizedState=l),l}function hA(a){var l=uA(a);l.next===null&&(l=a.alternate.memoizedState),nd(a,l.next.queue,{},dr())}function n_(){return is(bd)}function dA(){return Sn().memoizedState}function fA(){return Sn().memoizedState}function m7(a){for(var l=a.return;l!==null;){switch(l.tag){case 24:case 3:var d=dr();a=Ga(d);var g=Ya(l,a,d);g!==null&&(Gs(g,l,d),Xh(g,l,d)),l={cache:R1()},a.payload=l;return}l=l.return}}function g7(a,l,d){var g=dr();d={lane:g,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Km(a)?mA(l,d):(d=_1(a,l,d,g),d!==null&&(Gs(d,a,g),gA(d,l,g)))}function pA(a,l,d){var g=dr();nd(a,l,d,g)}function nd(a,l,d,g){var b={lane:g,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null};if(Km(a))mA(l,b);else{var w=a.alternate;if(a.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var T=l.lastRenderedState,U=w(T,d);if(b.hasEagerState=!0,b.eagerState=U,ar(U,T))return Nm(a,l,b,0),Xt===null&&Cm(),!1}catch{}if(d=_1(a,l,b,g),d!==null)return Gs(d,a,g),gA(d,l,g),!0}return!1}function s_(a,l,d,g){if(g={lane:2,revertLane:B_(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Km(a)){if(l)throw Error(s(479))}else l=_1(a,d,g,2),l!==null&&Gs(l,a,2)}function Km(a){var l=a.alternate;return a===yt||l!==null&&l===yt}function mA(a,l){Uc=$m=!0;var d=a.pending;d===null?l.next=l:(l.next=d.next,d.next=l),a.pending=l}function gA(a,l,d){if((d&4194048)!==0){var g=l.lanes;g&=a.pendingLanes,d|=g,l.lanes=d,x4(a,d)}}var sd={readContext:is,use:Hm,useCallback:vn,useContext:vn,useEffect:vn,useImperativeHandle:vn,useLayoutEffect:vn,useInsertionEffect:vn,useMemo:vn,useReducer:vn,useRef:vn,useState:vn,useDebugValue:vn,useDeferredValue:vn,useTransition:vn,useSyncExternalStore:vn,useId:vn,useHostTransitionStatus:vn,useFormState:vn,useActionState:vn,useOptimistic:vn,useMemoCache:vn,useCacheRefresh:vn};sd.useEffectEvent=vn;var yA={readContext:is,use:Hm,useCallback:function(a,l){return As().memoizedState=[a,l===void 0?null:l],a},useContext:is,useEffect:eA,useImperativeHandle:function(a,l,d){d=d!=null?d.concat([a]):null,Vm(4194308,4,rA.bind(null,l,a),d)},useLayoutEffect:function(a,l){return Vm(4194308,4,a,l)},useInsertionEffect:function(a,l){Vm(4,2,a,l)},useMemo:function(a,l){var d=As();l=l===void 0?null:l;var g=a();if(ol){Ce(!0);try{a()}finally{Ce(!1)}}return d.memoizedState=[g,l],g},useReducer:function(a,l,d){var g=As();if(d!==void 0){var b=d(l);if(ol){Ce(!0);try{d(l)}finally{Ce(!1)}}}else b=l;return g.memoizedState=g.baseState=b,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:b},g.queue=a,a=a.dispatch=g7.bind(null,yt,a),[g.memoizedState,a]},useRef:function(a){var l=As();return a={current:a},l.memoizedState=a},useState:function(a){a=Z1(a);var l=a.queue,d=pA.bind(null,yt,l);return l.dispatch=d,[a.memoizedState,d]},useDebugValue:Q1,useDeferredValue:function(a,l){var d=As();return e_(d,a,l)},useTransition:function(){var a=Z1(!1);return a=cA.bind(null,yt,a.queue,!0,!1),As().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,l,d){var g=yt,b=As();if(Ot){if(d===void 0)throw Error(s(407));d=d()}else{if(d=l(),Xt===null)throw Error(s(349));(jt&127)!==0||PE(g,l,d)}b.memoizedState=d;var w={value:d,getSnapshot:l};return b.queue=w,eA(zE.bind(null,g,w,a),[a]),g.flags|=2048,Fc(9,{destroy:void 0},$E.bind(null,g,w,d,l),null),d},useId:function(){var a=As(),l=Xt.identifierPrefix;if(Ot){var d=wi,g=xi;d=(g&~(1<<32-me(g)-1)).toString(32)+d,l="_"+l+"R_"+d,d=zm++,0<d&&(l+="H"+d.toString(32)),l+="_"}else d=c7++,l="_"+l+"r_"+d.toString(32)+"_";return a.memoizedState=l},useHostTransitionStatus:n_,useFormState:YE,useActionState:YE,useOptimistic:function(a){var l=As();l.memoizedState=l.baseState=a;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=s_.bind(null,yt,!0,d),d.dispatch=l,[a,l]},useMemoCache:W1,useCacheRefresh:function(){return As().memoizedState=m7.bind(null,yt)},useEffectEvent:function(a){var l=As(),d={impl:a};return l.memoizedState=d,function(){if((zt&2)!==0)throw Error(s(440));return d.impl.apply(void 0,arguments)}}},r_={readContext:is,use:Hm,useCallback:aA,useContext:is,useEffect:J1,useImperativeHandle:iA,useInsertionEffect:nA,useLayoutEffect:sA,useMemo:oA,useReducer:Fm,useRef:QE,useState:function(){return Fm(ra)},useDebugValue:Q1,useDeferredValue:function(a,l){var d=Sn();return lA(d,Kt.memoizedState,a,l)},useTransition:function(){var a=Fm(ra)[0],l=Sn().memoizedState;return[typeof a=="boolean"?a:td(a),l]},useSyncExternalStore:IE,useId:dA,useHostTransitionStatus:n_,useFormState:ZE,useActionState:ZE,useOptimistic:function(a,l){var d=Sn();return FE(d,Kt,a,l)},useMemoCache:W1,useCacheRefresh:fA};r_.useEffectEvent=tA;var vA={readContext:is,use:Hm,useCallback:aA,useContext:is,useEffect:J1,useImperativeHandle:iA,useInsertionEffect:nA,useLayoutEffect:sA,useMemo:oA,useReducer:Y1,useRef:QE,useState:function(){return Y1(ra)},useDebugValue:Q1,useDeferredValue:function(a,l){var d=Sn();return Kt===null?e_(d,a,l):lA(d,Kt.memoizedState,a,l)},useTransition:function(){var a=Y1(ra)[0],l=Sn().memoizedState;return[typeof a=="boolean"?a:td(a),l]},useSyncExternalStore:IE,useId:dA,useHostTransitionStatus:n_,useFormState:JE,useActionState:JE,useOptimistic:function(a,l){var d=Sn();return Kt!==null?FE(d,Kt,a,l):(d.baseState=a,[a,d.queue.dispatch])},useMemoCache:W1,useCacheRefresh:fA};vA.useEffectEvent=tA;function i_(a,l,d,g){l=a.memoizedState,d=d(g,l),d=d==null?l:p({},l,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var a_={enqueueSetState:function(a,l,d){a=a._reactInternals;var g=dr(),b=Ga(g);b.payload=l,d!=null&&(b.callback=d),l=Ya(a,b,g),l!==null&&(Gs(l,a,g),Xh(l,a,g))},enqueueReplaceState:function(a,l,d){a=a._reactInternals;var g=dr(),b=Ga(g);b.tag=1,b.payload=l,d!=null&&(b.callback=d),l=Ya(a,b,g),l!==null&&(Gs(l,a,g),Xh(l,a,g))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var d=dr(),g=Ga(d);g.tag=2,l!=null&&(g.callback=l),l=Ya(a,g,d),l!==null&&(Gs(l,a,d),Xh(l,a,d))}};function bA(a,l,d,g,b,w,T){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,w,T):l.prototype&&l.prototype.isPureReactComponent?!Fh(d,g)||!Fh(b,w):!0}function _A(a,l,d,g){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,g),l.state!==a&&a_.enqueueReplaceState(l,l.state,null)}function ll(a,l){var d=l;if("ref"in l){d={};for(var g in l)g!=="ref"&&(d[g]=l[g])}if(a=a.defaultProps){d===l&&(d=p({},d));for(var b in a)d[b]===void 0&&(d[b]=a[b])}return d}function xA(a){km(a)}function wA(a){console.error(a)}function SA(a){km(a)}function Wm(a,l){try{var d=a.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(g){setTimeout(function(){throw g})}}function kA(a,l,d){try{var g=a.onCaughtError;g(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function o_(a,l,d){return d=Ga(d),d.tag=3,d.payload={element:null},d.callback=function(){Wm(a,l)},d}function CA(a){return a=Ga(a),a.tag=3,a}function NA(a,l,d,g){var b=d.type.getDerivedStateFromError;if(typeof b=="function"){var w=g.value;a.payload=function(){return b(w)},a.callback=function(){kA(l,d,g)}}var T=d.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(a.callback=function(){kA(l,d,g),typeof b!="function"&&(to===null?to=new Set([this]):to.add(this));var U=g.stack;this.componentDidCatch(g.value,{componentStack:U!==null?U:""})})}function y7(a,l,d,g,b){if(d.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(l=d.alternate,l!==null&&Bc(l,d,b,!0),d=lr.current,d!==null){switch(d.tag){case 31:case 13:return Pr===null?ig():d.alternate===null&&bn===0&&(bn=3),d.flags&=-257,d.flags|=65536,d.lanes=b,g===Dm?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([g]):l.add(g),O_(a,g,b)),!1;case 22:return d.flags|=65536,g===Dm?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([g])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([g]):d.add(g)),O_(a,g,b)),!1}throw Error(s(435,d.tag))}return O_(a,g,b),ig(),!1}if(Ot)return l=lr.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=b,g!==N1&&(a=Error(s(422),{cause:g}),Kh(Dr(a,d)))):(g!==N1&&(l=Error(s(423),{cause:g}),Kh(Dr(l,d))),a=a.current.alternate,a.flags|=65536,b&=-b,a.lanes|=b,g=Dr(g,d),b=o_(a.stateNode,g,b),I1(a,b),bn!==4&&(bn=2)),!1;var w=Error(s(520),{cause:g});if(w=Dr(w,d),hd===null?hd=[w]:hd.push(w),bn!==4&&(bn=2),l===null)return!0;g=Dr(g,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,a=b&-b,d.lanes|=a,a=o_(d.stateNode,g,a),I1(d,a),!1;case 1:if(l=d.type,w=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(to===null||!to.has(w))))return d.flags|=65536,b&=-b,d.lanes|=b,b=CA(b),NA(b,a,d,g),I1(d,b),!1}d=d.return}while(d!==null);return!1}var l_=Error(s(461)),Rn=!1;function as(a,l,d,g){l.child=a===null?TE(l,null,d,g):al(l,a.child,d,g)}function EA(a,l,d,g,b){d=d.render;var w=l.ref;if("ref"in g){var T={};for(var U in g)U!=="ref"&&(T[U]=g[U])}else T=g;return nl(l),g=F1(a,l,d,T,w,b),U=V1(),a!==null&&!Rn?(q1(a,l,b),ia(a,l,b)):(Ot&&U&&k1(l),l.flags|=1,as(a,l,g,b),l.child)}function AA(a,l,d,g,b){if(a===null){var w=d.type;return typeof w=="function"&&!x1(w)&&w.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=w,jA(a,l,w,g,b)):(a=Am(d.type,null,g,l,l.mode,b),a.ref=l.ref,a.return=l,l.child=a)}if(w=a.child,!g_(a,b)){var T=w.memoizedProps;if(d=d.compare,d=d!==null?d:Fh,d(T,g)&&a.ref===l.ref)return ia(a,l,b)}return l.flags|=1,a=Qi(w,g),a.ref=l.ref,a.return=l,l.child=a}function jA(a,l,d,g,b){if(a!==null){var w=a.memoizedProps;if(Fh(w,g)&&a.ref===l.ref)if(Rn=!1,l.pendingProps=g=w,g_(a,b))(a.flags&131072)!==0&&(Rn=!0);else return l.lanes=a.lanes,ia(a,l,b)}return c_(a,l,d,g,b)}function TA(a,l,d,g){var b=g.children,w=a!==null?a.memoizedState:null;if(a===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((l.flags&128)!==0){if(w=w!==null?w.baseLanes|d:d,a!==null){for(g=l.child=a.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;g=b&~w}else g=0,l.child=null;return RA(a,l,w,d,g)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},a!==null&&Om(l,w!==null?w.cachePool:null),w!==null?ME(l,w):$1(),DE(l);else return g=l.lanes=536870912,RA(a,l,w!==null?w.baseLanes|d:d,d,g)}else w!==null?(Om(l,w.cachePool),ME(l,w),Xa(),l.memoizedState=null):(a!==null&&Om(l,null),$1(),Xa());return as(a,l,b,d),l.child}function rd(a,l){return a!==null&&a.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function RA(a,l,d,g,b){var w=M1();return w=w===null?null:{parent:jn._currentValue,pool:w},l.memoizedState={baseLanes:d,cachePool:w},a!==null&&Om(l,null),$1(),DE(l),a!==null&&Bc(a,l,g,!0),l.childLanes=b,null}function Gm(a,l){return l=Zm({mode:l.mode,children:l.children},a.mode),l.ref=a.ref,a.child=l,l.return=a,l}function OA(a,l,d){return al(l,a.child,null,d),a=Gm(l,l.pendingProps),a.flags|=2,cr(l),l.memoizedState=null,a}function v7(a,l,d){var g=l.pendingProps,b=(l.flags&128)!==0;if(l.flags&=-129,a===null){if(Ot){if(g.mode==="hidden")return a=Gm(l,g),l.lanes=536870912,rd(null,a);if(U1(l),(a=nn)?(a=V5(a,Ir),a=a!==null&&a.data==="&"?a:null,a!==null&&(l.memoizedState={dehydrated:a,treeContext:Fa!==null?{id:xi,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},d=mE(a),d.return=l,l.child=d,rs=l,nn=null)):a=null,a===null)throw qa(l);return l.lanes=536870912,null}return Gm(l,g)}var w=a.memoizedState;if(w!==null){var T=w.dehydrated;if(U1(l),b)if(l.flags&256)l.flags&=-257,l=OA(a,l,d);else if(l.memoizedState!==null)l.child=a.child,l.flags|=128,l=null;else throw Error(s(558));else if(Rn||Bc(a,l,d,!1),b=(d&a.childLanes)!==0,Rn||b){if(g=Xt,g!==null&&(T=w4(g,d),T!==0&&T!==w.retryLane))throw w.retryLane=T,Jo(a,T),Gs(g,a,T),l_;ig(),l=OA(a,l,d)}else a=w.treeContext,nn=$r(T.nextSibling),rs=l,Ot=!0,Va=null,Ir=!1,a!==null&&vE(l,a),l=Gm(l,g),l.flags|=4096;return l}return a=Qi(a.child,{mode:g.mode,children:g.children}),a.ref=l.ref,l.child=a,a.return=l,a}function Ym(a,l){var d=l.ref;if(d===null)a!==null&&a.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(s(284));(a===null||a.ref!==d)&&(l.flags|=4194816)}}function c_(a,l,d,g,b){return nl(l),d=F1(a,l,d,g,void 0,b),g=V1(),a!==null&&!Rn?(q1(a,l,b),ia(a,l,b)):(Ot&&g&&k1(l),l.flags|=1,as(a,l,d,b),l.child)}function MA(a,l,d,g,b,w){return nl(l),l.updateQueue=null,d=LE(l,g,d,b),BE(a),g=V1(),a!==null&&!Rn?(q1(a,l,w),ia(a,l,w)):(Ot&&g&&k1(l),l.flags|=1,as(a,l,d,w),l.child)}function DA(a,l,d,g,b){if(nl(l),l.stateNode===null){var w=Rc,T=d.contextType;typeof T=="object"&&T!==null&&(w=is(T)),w=new d(g,w),l.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=a_,l.stateNode=w,w._reactInternals=l,w=l.stateNode,w.props=g,w.state=l.memoizedState,w.refs={},B1(l),T=d.contextType,w.context=typeof T=="object"&&T!==null?is(T):Rc,w.state=l.memoizedState,T=d.getDerivedStateFromProps,typeof T=="function"&&(i_(l,d,T,g),w.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(T=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),T!==w.state&&a_.enqueueReplaceState(w,w.state,null),Qh(l,g,w,b),Jh(),w.state=l.memoizedState),typeof w.componentDidMount=="function"&&(l.flags|=4194308),g=!0}else if(a===null){w=l.stateNode;var U=l.memoizedProps,ee=ll(d,U);w.props=ee;var ce=w.context,ge=d.contextType;T=Rc,typeof ge=="object"&&ge!==null&&(T=is(ge));var ve=d.getDerivedStateFromProps;ge=typeof ve=="function"||typeof w.getSnapshotBeforeUpdate=="function",U=l.pendingProps!==U,ge||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(U||ce!==T)&&_A(l,w,g,T),Wa=!1;var he=l.memoizedState;w.state=he,Qh(l,g,w,b),Jh(),ce=l.memoizedState,U||he!==ce||Wa?(typeof ve=="function"&&(i_(l,d,ve,g),ce=l.memoizedState),(ee=Wa||bA(l,d,ee,g,he,ce,T))?(ge||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(l.flags|=4194308)):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=ce),w.props=g,w.state=ce,w.context=T,g=ee):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{w=l.stateNode,L1(a,l),T=l.memoizedProps,ge=ll(d,T),w.props=ge,ve=l.pendingProps,he=w.context,ce=d.contextType,ee=Rc,typeof ce=="object"&&ce!==null&&(ee=is(ce)),U=d.getDerivedStateFromProps,(ce=typeof U=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(T!==ve||he!==ee)&&_A(l,w,g,ee),Wa=!1,he=l.memoizedState,w.state=he,Qh(l,g,w,b),Jh();var pe=l.memoizedState;T!==ve||he!==pe||Wa||a!==null&&a.dependencies!==null&&Tm(a.dependencies)?(typeof U=="function"&&(i_(l,d,U,g),pe=l.memoizedState),(ge=Wa||bA(l,d,ge,g,he,pe,ee)||a!==null&&a.dependencies!==null&&Tm(a.dependencies))?(ce||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(g,pe,ee),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(g,pe,ee)),typeof w.componentDidUpdate=="function"&&(l.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof w.componentDidUpdate!="function"||T===a.memoizedProps&&he===a.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||T===a.memoizedProps&&he===a.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=pe),w.props=g,w.state=pe,w.context=ee,g=ge):(typeof w.componentDidUpdate!="function"||T===a.memoizedProps&&he===a.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||T===a.memoizedProps&&he===a.memoizedState||(l.flags|=1024),g=!1)}return w=g,Ym(a,l),g=(l.flags&128)!==0,w||g?(w=l.stateNode,d=g&&typeof d.getDerivedStateFromError!="function"?null:w.render(),l.flags|=1,a!==null&&g?(l.child=al(l,a.child,null,b),l.child=al(l,null,d,b)):as(a,l,d,b),l.memoizedState=w.state,a=l.child):a=ia(a,l,b),a}function BA(a,l,d,g){return el(),l.flags|=256,as(a,l,d,g),l.child}var u_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function h_(a){return{baseLanes:a,cachePool:kE()}}function d_(a,l,d){return a=a!==null?a.childLanes&~d:0,l&&(a|=hr),a}function LA(a,l,d){var g=l.pendingProps,b=!1,w=(l.flags&128)!==0,T;if((T=w)||(T=a!==null&&a.memoizedState===null?!1:(wn.current&2)!==0),T&&(b=!0,l.flags&=-129),T=(l.flags&32)!==0,l.flags&=-33,a===null){if(Ot){if(b?Za(l):Xa(),(a=nn)?(a=V5(a,Ir),a=a!==null&&a.data!=="&"?a:null,a!==null&&(l.memoizedState={dehydrated:a,treeContext:Fa!==null?{id:xi,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},d=mE(a),d.return=l,l.child=d,rs=l,nn=null)):a=null,a===null)throw qa(l);return G_(a)?l.lanes=32:l.lanes=536870912,null}var U=g.children;return g=g.fallback,b?(Xa(),b=l.mode,U=Zm({mode:"hidden",children:U},b),g=Qo(g,b,d,null),U.return=l,g.return=l,U.sibling=g,l.child=U,g=l.child,g.memoizedState=h_(d),g.childLanes=d_(a,T,d),l.memoizedState=u_,rd(null,g)):(Za(l),f_(l,U))}var ee=a.memoizedState;if(ee!==null&&(U=ee.dehydrated,U!==null)){if(w)l.flags&256?(Za(l),l.flags&=-257,l=p_(a,l,d)):l.memoizedState!==null?(Xa(),l.child=a.child,l.flags|=128,l=null):(Xa(),U=g.fallback,b=l.mode,g=Zm({mode:"visible",children:g.children},b),U=Qo(U,b,d,null),U.flags|=2,g.return=l,U.return=l,g.sibling=U,l.child=g,al(l,a.child,null,d),g=l.child,g.memoizedState=h_(d),g.childLanes=d_(a,T,d),l.memoizedState=u_,l=rd(null,g));else if(Za(l),G_(U)){if(T=U.nextSibling&&U.nextSibling.dataset,T)var ce=T.dgst;T=ce,g=Error(s(419)),g.stack="",g.digest=T,Kh({value:g,source:null,stack:null}),l=p_(a,l,d)}else if(Rn||Bc(a,l,d,!1),T=(d&a.childLanes)!==0,Rn||T){if(T=Xt,T!==null&&(g=w4(T,d),g!==0&&g!==ee.retryLane))throw ee.retryLane=g,Jo(a,g),Gs(T,a,g),l_;W_(U)||ig(),l=p_(a,l,d)}else W_(U)?(l.flags|=192,l.child=a.child,l=null):(a=ee.treeContext,nn=$r(U.nextSibling),rs=l,Ot=!0,Va=null,Ir=!1,a!==null&&vE(l,a),l=f_(l,g.children),l.flags|=4096);return l}return b?(Xa(),U=g.fallback,b=l.mode,ee=a.child,ce=ee.sibling,g=Qi(ee,{mode:"hidden",children:g.children}),g.subtreeFlags=ee.subtreeFlags&65011712,ce!==null?U=Qi(ce,U):(U=Qo(U,b,d,null),U.flags|=2),U.return=l,g.return=l,g.sibling=U,l.child=g,rd(null,g),g=l.child,U=a.child.memoizedState,U===null?U=h_(d):(b=U.cachePool,b!==null?(ee=jn._currentValue,b=b.parent!==ee?{parent:ee,pool:ee}:b):b=kE(),U={baseLanes:U.baseLanes|d,cachePool:b}),g.memoizedState=U,g.childLanes=d_(a,T,d),l.memoizedState=u_,rd(a.child,g)):(Za(l),d=a.child,a=d.sibling,d=Qi(d,{mode:"visible",children:g.children}),d.return=l,d.sibling=null,a!==null&&(T=l.deletions,T===null?(l.deletions=[a],l.flags|=16):T.push(a)),l.child=d,l.memoizedState=null,d)}function f_(a,l){return l=Zm({mode:"visible",children:l},a.mode),l.return=a,a.child=l}function Zm(a,l){return a=or(22,a,null,l),a.lanes=0,a}function p_(a,l,d){return al(l,a.child,null,d),a=f_(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function IA(a,l,d){a.lanes|=l;var g=a.alternate;g!==null&&(g.lanes|=l),j1(a.return,l,d)}function m_(a,l,d,g,b,w){var T=a.memoizedState;T===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:b,treeForkCount:w}:(T.isBackwards=l,T.rendering=null,T.renderingStartTime=0,T.last=g,T.tail=d,T.tailMode=b,T.treeForkCount=w)}function PA(a,l,d){var g=l.pendingProps,b=g.revealOrder,w=g.tail;g=g.children;var T=wn.current,U=(T&2)!==0;if(U?(T=T&1|2,l.flags|=128):T&=1,A(wn,T),as(a,l,g,d),g=Ot?qh:0,!U&&a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&IA(a,d,l);else if(a.tag===19)IA(a,d,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(b){case"forwards":for(d=l.child,b=null;d!==null;)a=d.alternate,a!==null&&Pm(a)===null&&(b=d),d=d.sibling;d=b,d===null?(b=l.child,l.child=null):(b=d.sibling,d.sibling=null),m_(l,!1,b,d,w,g);break;case"backwards":case"unstable_legacy-backwards":for(d=null,b=l.child,l.child=null;b!==null;){if(a=b.alternate,a!==null&&Pm(a)===null){l.child=b;break}a=b.sibling,b.sibling=d,d=b,b=a}m_(l,!0,d,null,w,g);break;case"together":m_(l,!1,null,null,void 0,g);break;default:l.memoizedState=null}return l.child}function ia(a,l,d){if(a!==null&&(l.dependencies=a.dependencies),eo|=l.lanes,(d&l.childLanes)===0)if(a!==null){if(Bc(a,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(a!==null&&l.child!==a.child)throw Error(s(153));if(l.child!==null){for(a=l.child,d=Qi(a,a.pendingProps),l.child=d,d.return=l;a.sibling!==null;)a=a.sibling,d=d.sibling=Qi(a,a.pendingProps),d.return=l;d.sibling=null}return l.child}function g_(a,l){return(a.lanes&l)!==0?!0:(a=a.dependencies,!!(a!==null&&Tm(a)))}function b7(a,l,d){switch(l.tag){case 3:ke(l,l.stateNode.containerInfo),Ka(l,jn,a.memoizedState.cache),el();break;case 27:case 5:Ve(l);break;case 4:ke(l,l.stateNode.containerInfo);break;case 10:Ka(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,U1(l),null;break;case 13:var g=l.memoizedState;if(g!==null)return g.dehydrated!==null?(Za(l),l.flags|=128,null):(d&l.child.childLanes)!==0?LA(a,l,d):(Za(l),a=ia(a,l,d),a!==null?a.sibling:null);Za(l);break;case 19:var b=(a.flags&128)!==0;if(g=(d&l.childLanes)!==0,g||(Bc(a,l,d,!1),g=(d&l.childLanes)!==0),b){if(g)return PA(a,l,d);l.flags|=128}if(b=l.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),A(wn,wn.current),g)break;return null;case 22:return l.lanes=0,TA(a,l,d,l.pendingProps);case 24:Ka(l,jn,a.memoizedState.cache)}return ia(a,l,d)}function $A(a,l,d){if(a!==null)if(a.memoizedProps!==l.pendingProps)Rn=!0;else{if(!g_(a,d)&&(l.flags&128)===0)return Rn=!1,b7(a,l,d);Rn=(a.flags&131072)!==0}else Rn=!1,Ot&&(l.flags&1048576)!==0&&yE(l,qh,l.index);switch(l.lanes=0,l.tag){case 16:e:{var g=l.pendingProps;if(a=rl(l.elementType),l.type=a,typeof a=="function")x1(a)?(g=ll(a,g),l.tag=1,l=DA(null,l,a,g,d)):(l.tag=0,l=c_(null,l,a,g,d));else{if(a!=null){var b=a.$$typeof;if(b===R){l.tag=11,l=EA(null,l,a,g,d);break e}else if(b===D){l.tag=14,l=AA(null,l,a,g,d);break e}}throw l=Z(a)||a,Error(s(306,l,""))}}return l;case 0:return c_(a,l,l.type,l.pendingProps,d);case 1:return g=l.type,b=ll(g,l.pendingProps),DA(a,l,g,b,d);case 3:e:{if(ke(l,l.stateNode.containerInfo),a===null)throw Error(s(387));g=l.pendingProps;var w=l.memoizedState;b=w.element,L1(a,l),Qh(l,g,null,d);var T=l.memoizedState;if(g=T.cache,Ka(l,jn,g),g!==w.cache&&T1(l,[jn],d,!0),Jh(),g=T.element,w.isDehydrated)if(w={element:g,isDehydrated:!1,cache:T.cache},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){l=BA(a,l,g,d);break e}else if(g!==b){b=Dr(Error(s(424)),l),Kh(b),l=BA(a,l,g,d);break e}else for(a=l.stateNode.containerInfo,a.nodeType===9?a=a.body:a=a.nodeName==="HTML"?a.ownerDocument.body:a,nn=$r(a.firstChild),rs=l,Ot=!0,Va=null,Ir=!0,d=TE(l,null,g,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(el(),g===b){l=ia(a,l,d);break e}as(a,l,g,d)}l=l.child}return l;case 26:return Ym(a,l),a===null?(d=Z5(l.type,null,l.pendingProps,null))?l.memoizedState=d:Ot||(d=l.type,a=l.pendingProps,g=dg(X.current).createElement(d),g[ss]=l,g[Hs]=a,os(g,d,a),Yn(g),l.stateNode=g):l.memoizedState=Z5(l.type,a.memoizedProps,l.pendingProps,a.memoizedState),null;case 27:return Ve(l),a===null&&Ot&&(g=l.stateNode=W5(l.type,l.pendingProps,X.current),rs=l,Ir=!0,b=nn,io(l.type)?(Y_=b,nn=$r(g.firstChild)):nn=b),as(a,l,l.pendingProps.children,d),Ym(a,l),a===null&&(l.flags|=4194304),l.child;case 5:return a===null&&Ot&&((b=g=nn)&&(g=Y7(g,l.type,l.pendingProps,Ir),g!==null?(l.stateNode=g,rs=l,nn=$r(g.firstChild),Ir=!1,b=!0):b=!1),b||qa(l)),Ve(l),b=l.type,w=l.pendingProps,T=a!==null?a.memoizedProps:null,g=w.children,V_(b,w)?g=null:T!==null&&V_(b,T)&&(l.flags|=32),l.memoizedState!==null&&(b=F1(a,l,u7,null,null,d),bd._currentValue=b),Ym(a,l),as(a,l,g,d),l.child;case 6:return a===null&&Ot&&((a=d=nn)&&(d=Z7(d,l.pendingProps,Ir),d!==null?(l.stateNode=d,rs=l,nn=null,a=!0):a=!1),a||qa(l)),null;case 13:return LA(a,l,d);case 4:return ke(l,l.stateNode.containerInfo),g=l.pendingProps,a===null?l.child=al(l,null,g,d):as(a,l,g,d),l.child;case 11:return EA(a,l,l.type,l.pendingProps,d);case 7:return as(a,l,l.pendingProps,d),l.child;case 8:return as(a,l,l.pendingProps.children,d),l.child;case 12:return as(a,l,l.pendingProps.children,d),l.child;case 10:return g=l.pendingProps,Ka(l,l.type,g.value),as(a,l,g.children,d),l.child;case 9:return b=l.type._context,g=l.pendingProps.children,nl(l),b=is(b),g=g(b),l.flags|=1,as(a,l,g,d),l.child;case 14:return AA(a,l,l.type,l.pendingProps,d);case 15:return jA(a,l,l.type,l.pendingProps,d);case 19:return PA(a,l,d);case 31:return v7(a,l,d);case 22:return TA(a,l,d,l.pendingProps);case 24:return nl(l),g=is(jn),a===null?(b=M1(),b===null&&(b=Xt,w=R1(),b.pooledCache=w,w.refCount++,w!==null&&(b.pooledCacheLanes|=d),b=w),l.memoizedState={parent:g,cache:b},B1(l),Ka(l,jn,b)):((a.lanes&d)!==0&&(L1(a,l),Qh(l,null,null,d),Jh()),b=a.memoizedState,w=l.memoizedState,b.parent!==g?(b={parent:g,cache:g},l.memoizedState=b,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=b),Ka(l,jn,g)):(g=w.cache,Ka(l,jn,g),g!==b.cache&&T1(l,[jn],d,!0))),as(a,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(s(156,l.tag))}function aa(a){a.flags|=4}function y_(a,l,d,g,b){if((l=(a.mode&32)!==0)&&(l=!1),l){if(a.flags|=16777216,(b&335544128)===b)if(a.stateNode.complete)a.flags|=8192;else if(d5())a.flags|=8192;else throw il=Dm,D1}else a.flags&=-16777217}function zA(a,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!t3(l))if(d5())a.flags|=8192;else throw il=Dm,D1}function Xm(a,l){l!==null&&(a.flags|=4),a.flags&16384&&(l=a.tag!==22?Us():536870912,a.lanes|=l,Wc|=l)}function id(a,l){if(!Ot)switch(a.tailMode){case"hidden":l=a.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function sn(a){var l=a.alternate!==null&&a.alternate.child===a.child,d=0,g=0;if(l)for(var b=a.child;b!==null;)d|=b.lanes|b.childLanes,g|=b.subtreeFlags&65011712,g|=b.flags&65011712,b.return=a,b=b.sibling;else for(b=a.child;b!==null;)d|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=a,b=b.sibling;return a.subtreeFlags|=g,a.childLanes=d,l}function _7(a,l,d){var g=l.pendingProps;switch(C1(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(l),null;case 1:return sn(l),null;case 3:return d=l.stateNode,g=null,a!==null&&(g=a.memoizedState.cache),l.memoizedState.cache!==g&&(l.flags|=2048),na(jn),Se(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(a===null||a.child===null)&&(Dc(l)?aa(l):a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,E1())),sn(l),null;case 26:var b=l.type,w=l.memoizedState;return a===null?(aa(l),w!==null?(sn(l),zA(l,w)):(sn(l),y_(l,b,null,g,d))):w?w!==a.memoizedState?(aa(l),sn(l),zA(l,w)):(sn(l),l.flags&=-16777217):(a=a.memoizedProps,a!==g&&aa(l),sn(l),y_(l,b,a,g,d)),null;case 27:if(Le(l),d=X.current,b=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==g&&aa(l);else{if(!g){if(l.stateNode===null)throw Error(s(166));return sn(l),null}a=Q.current,Dc(l)?bE(l):(a=W5(b,g,d),l.stateNode=a,aa(l))}return sn(l),null;case 5:if(Le(l),b=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==g&&aa(l);else{if(!g){if(l.stateNode===null)throw Error(s(166));return sn(l),null}if(w=Q.current,Dc(l))bE(l);else{var T=dg(X.current);switch(w){case 1:w=T.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:w=T.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":w=T.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":w=T.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":w=T.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof g.is=="string"?T.createElement("select",{is:g.is}):T.createElement("select"),g.multiple?w.multiple=!0:g.size&&(w.size=g.size);break;default:w=typeof g.is=="string"?T.createElement(b,{is:g.is}):T.createElement(b)}}w[ss]=l,w[Hs]=g;e:for(T=l.child;T!==null;){if(T.tag===5||T.tag===6)w.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===l)break e;for(;T.sibling===null;){if(T.return===null||T.return===l)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}l.stateNode=w;e:switch(os(w,b,g),b){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&aa(l)}}return sn(l),y_(l,l.type,a===null?null:a.memoizedProps,l.pendingProps,d),null;case 6:if(a&&l.stateNode!=null)a.memoizedProps!==g&&aa(l);else{if(typeof g!="string"&&l.stateNode===null)throw Error(s(166));if(a=X.current,Dc(l)){if(a=l.stateNode,d=l.memoizedProps,g=null,b=rs,b!==null)switch(b.tag){case 27:case 5:g=b.memoizedProps}a[ss]=l,a=!!(a.nodeValue===d||g!==null&&g.suppressHydrationWarning===!0||L5(a.nodeValue,d)),a||qa(l,!0)}else a=dg(a).createTextNode(g),a[ss]=l,l.stateNode=a}return sn(l),null;case 31:if(d=l.memoizedState,a===null||a.memoizedState!==null){if(g=Dc(l),d!==null){if(a===null){if(!g)throw Error(s(318));if(a=l.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(557));a[ss]=l}else el(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;sn(l),a=!1}else d=E1(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=d),a=!0;if(!a)return l.flags&256?(cr(l),l):(cr(l),null);if((l.flags&128)!==0)throw Error(s(558))}return sn(l),null;case 13:if(g=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(b=Dc(l),g!==null&&g.dehydrated!==null){if(a===null){if(!b)throw Error(s(318));if(b=l.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(s(317));b[ss]=l}else el(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;sn(l),b=!1}else b=E1(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=b),b=!0;if(!b)return l.flags&256?(cr(l),l):(cr(l),null)}return cr(l),(l.flags&128)!==0?(l.lanes=d,l):(d=g!==null,a=a!==null&&a.memoizedState!==null,d&&(g=l.child,b=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(b=g.alternate.memoizedState.cachePool.pool),w=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(w=g.memoizedState.cachePool.pool),w!==b&&(g.flags|=2048)),d!==a&&d&&(l.child.flags|=8192),Xm(l,l.updateQueue),sn(l),null);case 4:return Se(),a===null&&$_(l.stateNode.containerInfo),sn(l),null;case 10:return na(l.type),sn(l),null;case 19:if(F(wn),g=l.memoizedState,g===null)return sn(l),null;if(b=(l.flags&128)!==0,w=g.rendering,w===null)if(b)id(g,!1);else{if(bn!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(w=Pm(a),w!==null){for(l.flags|=128,id(g,!1),a=w.updateQueue,l.updateQueue=a,Xm(l,a),l.subtreeFlags=0,a=d,d=l.child;d!==null;)pE(d,a),d=d.sibling;return A(wn,wn.current&1|2),Ot&&ea(l,g.treeForkCount),l.child}a=a.sibling}g.tail!==null&&tt()>ng&&(l.flags|=128,b=!0,id(g,!1),l.lanes=4194304)}else{if(!b)if(a=Pm(w),a!==null){if(l.flags|=128,b=!0,a=a.updateQueue,l.updateQueue=a,Xm(l,a),id(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!Ot)return sn(l),null}else 2*tt()-g.renderingStartTime>ng&&d!==536870912&&(l.flags|=128,b=!0,id(g,!1),l.lanes=4194304);g.isBackwards?(w.sibling=l.child,l.child=w):(a=g.last,a!==null?a.sibling=w:l.child=w,g.last=w)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=tt(),a.sibling=null,d=wn.current,A(wn,b?d&1|2:d&1),Ot&&ea(l,g.treeForkCount),a):(sn(l),null);case 22:case 23:return cr(l),z1(),g=l.memoizedState!==null,a!==null?a.memoizedState!==null!==g&&(l.flags|=8192):g&&(l.flags|=8192),g?(d&536870912)!==0&&(l.flags&128)===0&&(sn(l),l.subtreeFlags&6&&(l.flags|=8192)):sn(l),d=l.updateQueue,d!==null&&Xm(l,d.retryQueue),d=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),g=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==d&&(l.flags|=2048),a!==null&&F(sl),null;case 24:return d=null,a!==null&&(d=a.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),na(jn),sn(l),null;case 25:return null;case 30:return null}throw Error(s(156,l.tag))}function x7(a,l){switch(C1(l),l.tag){case 1:return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return na(jn),Se(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 26:case 27:case 5:return Le(l),null;case 31:if(l.memoizedState!==null){if(cr(l),l.alternate===null)throw Error(s(340));el()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 13:if(cr(l),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(s(340));el()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return F(wn),null;case 4:return Se(),null;case 10:return na(l.type),null;case 22:case 23:return cr(l),z1(),a!==null&&F(sl),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 24:return na(jn),null;case 25:return null;default:return null}}function UA(a,l){switch(C1(l),l.tag){case 3:na(jn),Se();break;case 26:case 27:case 5:Le(l);break;case 4:Se();break;case 31:l.memoizedState!==null&&cr(l);break;case 13:cr(l);break;case 19:F(wn);break;case 10:na(l.type);break;case 22:case 23:cr(l),z1(),a!==null&&F(sl);break;case 24:na(jn)}}function ad(a,l){try{var d=l.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var b=g.next;d=b;do{if((d.tag&a)===a){g=void 0;var w=d.create,T=d.inst;g=w(),T.destroy=g}d=d.next}while(d!==b)}}catch(U){Ft(l,l.return,U)}}function Ja(a,l,d){try{var g=l.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var w=b.next;g=w;do{if((g.tag&a)===a){var T=g.inst,U=T.destroy;if(U!==void 0){T.destroy=void 0,b=l;var ee=d,ce=U;try{ce()}catch(ge){Ft(b,ee,ge)}}}g=g.next}while(g!==w)}}catch(ge){Ft(l,l.return,ge)}}function HA(a){var l=a.updateQueue;if(l!==null){var d=a.stateNode;try{OE(l,d)}catch(g){Ft(a,a.return,g)}}}function FA(a,l,d){d.props=ll(a.type,a.memoizedProps),d.state=a.memoizedState;try{d.componentWillUnmount()}catch(g){Ft(a,l,g)}}function od(a,l){try{var d=a.ref;if(d!==null){switch(a.tag){case 26:case 27:case 5:var g=a.stateNode;break;case 30:g=a.stateNode;break;default:g=a.stateNode}typeof d=="function"?a.refCleanup=d(g):d.current=g}}catch(b){Ft(a,l,b)}}function Si(a,l){var d=a.ref,g=a.refCleanup;if(d!==null)if(typeof g=="function")try{g()}catch(b){Ft(a,l,b)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(b){Ft(a,l,b)}else d.current=null}function VA(a){var l=a.type,d=a.memoizedProps,g=a.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&g.focus();break e;case"img":d.src?g.src=d.src:d.srcSet&&(g.srcset=d.srcSet)}}catch(b){Ft(a,a.return,b)}}function v_(a,l,d){try{var g=a.stateNode;F7(g,a.type,d,l),g[Hs]=l}catch(b){Ft(a,a.return,b)}}function qA(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&io(a.type)||a.tag===4}function b_(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||qA(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&io(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function __(a,l,d){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(a,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(a),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Xi));else if(g!==4&&(g===27&&io(a.type)&&(d=a.stateNode,l=null),a=a.child,a!==null))for(__(a,l,d),a=a.sibling;a!==null;)__(a,l,d),a=a.sibling}function Jm(a,l,d){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?d.insertBefore(a,l):d.appendChild(a);else if(g!==4&&(g===27&&io(a.type)&&(d=a.stateNode),a=a.child,a!==null))for(Jm(a,l,d),a=a.sibling;a!==null;)Jm(a,l,d),a=a.sibling}function KA(a){var l=a.stateNode,d=a.memoizedProps;try{for(var g=a.type,b=l.attributes;b.length;)l.removeAttributeNode(b[0]);os(l,g,d),l[ss]=a,l[Hs]=d}catch(w){Ft(a,a.return,w)}}var oa=!1,On=!1,x_=!1,WA=typeof WeakSet=="function"?WeakSet:Set,Zn=null;function w7(a,l){if(a=a.containerInfo,H_=bg,a=iE(a),p1(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var b=g.anchorOffset,w=g.focusNode;g=g.focusOffset;try{d.nodeType,w.nodeType}catch{d=null;break e}var T=0,U=-1,ee=-1,ce=0,ge=0,ve=a,he=null;t:for(;;){for(var pe;ve!==d||b!==0&&ve.nodeType!==3||(U=T+b),ve!==w||g!==0&&ve.nodeType!==3||(ee=T+g),ve.nodeType===3&&(T+=ve.nodeValue.length),(pe=ve.firstChild)!==null;)he=ve,ve=pe;for(;;){if(ve===a)break t;if(he===d&&++ce===b&&(U=T),he===w&&++ge===g&&(ee=T),(pe=ve.nextSibling)!==null)break;ve=he,he=ve.parentNode}ve=pe}d=U===-1||ee===-1?null:{start:U,end:ee}}else d=null}d=d||{start:0,end:0}}else d=null;for(F_={focusedElem:a,selectionRange:d},bg=!1,Zn=l;Zn!==null;)if(l=Zn,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,Zn=a;else for(;Zn!==null;){switch(l=Zn,w=l.alternate,a=l.flags,l.tag){case 0:if((a&4)!==0&&(a=l.updateQueue,a=a!==null?a.events:null,a!==null))for(d=0;d<a.length;d++)b=a[d],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&w!==null){a=void 0,d=l,b=w.memoizedProps,w=w.memoizedState,g=d.stateNode;try{var qe=ll(d.type,b);a=g.getSnapshotBeforeUpdate(qe,w),g.__reactInternalSnapshotBeforeUpdate=a}catch(ot){Ft(d,d.return,ot)}}break;case 3:if((a&1024)!==0){if(a=l.stateNode.containerInfo,d=a.nodeType,d===9)K_(a);else if(d===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":K_(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(s(163))}if(a=l.sibling,a!==null){a.return=l.return,Zn=a;break}Zn=l.return}}function GA(a,l,d){var g=d.flags;switch(d.tag){case 0:case 11:case 15:ca(a,d),g&4&&ad(5,d);break;case 1:if(ca(a,d),g&4)if(a=d.stateNode,l===null)try{a.componentDidMount()}catch(T){Ft(d,d.return,T)}else{var b=ll(d.type,l.memoizedProps);l=l.memoizedState;try{a.componentDidUpdate(b,l,a.__reactInternalSnapshotBeforeUpdate)}catch(T){Ft(d,d.return,T)}}g&64&&HA(d),g&512&&od(d,d.return);break;case 3:if(ca(a,d),g&64&&(a=d.updateQueue,a!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{OE(a,l)}catch(T){Ft(d,d.return,T)}}break;case 27:l===null&&g&4&&KA(d);case 26:case 5:ca(a,d),l===null&&g&4&&VA(d),g&512&&od(d,d.return);break;case 12:ca(a,d);break;case 31:ca(a,d),g&4&&XA(a,d);break;case 13:ca(a,d),g&4&&JA(a,d),g&64&&(a=d.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(d=R7.bind(null,d),X7(a,d))));break;case 22:if(g=d.memoizedState!==null||oa,!g){l=l!==null&&l.memoizedState!==null||On,b=oa;var w=On;oa=g,(On=l)&&!w?ua(a,d,(d.subtreeFlags&8772)!==0):ca(a,d),oa=b,On=w}break;case 30:break;default:ca(a,d)}}function YA(a){var l=a.alternate;l!==null&&(a.alternate=null,YA(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&Xb(l)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var cn=null,Vs=!1;function la(a,l,d){for(d=d.child;d!==null;)ZA(a,l,d),d=d.sibling}function ZA(a,l,d){if(de&&typeof de.onCommitFiberUnmount=="function")try{de.onCommitFiberUnmount(oe,d)}catch{}switch(d.tag){case 26:On||Si(d,l),la(a,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:On||Si(d,l);var g=cn,b=Vs;io(d.type)&&(cn=d.stateNode,Vs=!1),la(a,l,d),gd(d.stateNode),cn=g,Vs=b;break;case 5:On||Si(d,l);case 6:if(g=cn,b=Vs,cn=null,la(a,l,d),cn=g,Vs=b,cn!==null)if(Vs)try{(cn.nodeType===9?cn.body:cn.nodeName==="HTML"?cn.ownerDocument.body:cn).removeChild(d.stateNode)}catch(w){Ft(d,l,w)}else try{cn.removeChild(d.stateNode)}catch(w){Ft(d,l,w)}break;case 18:cn!==null&&(Vs?(a=cn,H5(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,d.stateNode),tu(a)):H5(cn,d.stateNode));break;case 4:g=cn,b=Vs,cn=d.stateNode.containerInfo,Vs=!0,la(a,l,d),cn=g,Vs=b;break;case 0:case 11:case 14:case 15:Ja(2,d,l),On||Ja(4,d,l),la(a,l,d);break;case 1:On||(Si(d,l),g=d.stateNode,typeof g.componentWillUnmount=="function"&&FA(d,l,g)),la(a,l,d);break;case 21:la(a,l,d);break;case 22:On=(g=On)||d.memoizedState!==null,la(a,l,d),On=g;break;default:la(a,l,d)}}function XA(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{tu(a)}catch(d){Ft(l,l.return,d)}}}function JA(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{tu(a)}catch(d){Ft(l,l.return,d)}}function S7(a){switch(a.tag){case 31:case 13:case 19:var l=a.stateNode;return l===null&&(l=a.stateNode=new WA),l;case 22:return a=a.stateNode,l=a._retryCache,l===null&&(l=a._retryCache=new WA),l;default:throw Error(s(435,a.tag))}}function Qm(a,l){var d=S7(a);l.forEach(function(g){if(!d.has(g)){d.add(g);var b=O7.bind(null,a,g);g.then(b,b)}})}function qs(a,l){var d=l.deletions;if(d!==null)for(var g=0;g<d.length;g++){var b=d[g],w=a,T=l,U=T;e:for(;U!==null;){switch(U.tag){case 27:if(io(U.type)){cn=U.stateNode,Vs=!1;break e}break;case 5:cn=U.stateNode,Vs=!1;break e;case 3:case 4:cn=U.stateNode.containerInfo,Vs=!0;break e}U=U.return}if(cn===null)throw Error(s(160));ZA(w,T,b),cn=null,Vs=!1,w=b.alternate,w!==null&&(w.return=null),b.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)QA(l,a),l=l.sibling}var ai=null;function QA(a,l){var d=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:qs(l,a),Ks(a),g&4&&(Ja(3,a,a.return),ad(3,a),Ja(5,a,a.return));break;case 1:qs(l,a),Ks(a),g&512&&(On||d===null||Si(d,d.return)),g&64&&oa&&(a=a.updateQueue,a!==null&&(g=a.callbacks,g!==null&&(d=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=d===null?g:d.concat(g))));break;case 26:var b=ai;if(qs(l,a),Ks(a),g&512&&(On||d===null||Si(d,d.return)),g&4){var w=d!==null?d.memoizedState:null;if(g=a.memoizedState,d===null)if(g===null)if(a.stateNode===null){e:{g=a.type,d=a.memoizedProps,b=b.ownerDocument||b;t:switch(g){case"title":w=b.getElementsByTagName("title")[0],(!w||w[Dh]||w[ss]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=b.createElement(g),b.head.insertBefore(w,b.querySelector("head > title"))),os(w,g,d),w[ss]=a,Yn(w),g=w;break e;case"link":var T=Q5("link","href",b).get(g+(d.href||""));if(T){for(var U=0;U<T.length;U++)if(w=T[U],w.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&w.getAttribute("rel")===(d.rel==null?null:d.rel)&&w.getAttribute("title")===(d.title==null?null:d.title)&&w.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){T.splice(U,1);break t}}w=b.createElement(g),os(w,g,d),b.head.appendChild(w);break;case"meta":if(T=Q5("meta","content",b).get(g+(d.content||""))){for(U=0;U<T.length;U++)if(w=T[U],w.getAttribute("content")===(d.content==null?null:""+d.content)&&w.getAttribute("name")===(d.name==null?null:d.name)&&w.getAttribute("property")===(d.property==null?null:d.property)&&w.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&w.getAttribute("charset")===(d.charSet==null?null:d.charSet)){T.splice(U,1);break t}}w=b.createElement(g),os(w,g,d),b.head.appendChild(w);break;default:throw Error(s(468,g))}w[ss]=a,Yn(w),g=w}a.stateNode=g}else e3(b,a.type,a.stateNode);else a.stateNode=J5(b,g,a.memoizedProps);else w!==g?(w===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):w.count--,g===null?e3(b,a.type,a.stateNode):J5(b,g,a.memoizedProps)):g===null&&a.stateNode!==null&&v_(a,a.memoizedProps,d.memoizedProps)}break;case 27:qs(l,a),Ks(a),g&512&&(On||d===null||Si(d,d.return)),d!==null&&g&4&&v_(a,a.memoizedProps,d.memoizedProps);break;case 5:if(qs(l,a),Ks(a),g&512&&(On||d===null||Si(d,d.return)),a.flags&32){b=a.stateNode;try{kc(b,"")}catch(qe){Ft(a,a.return,qe)}}g&4&&a.stateNode!=null&&(b=a.memoizedProps,v_(a,b,d!==null?d.memoizedProps:b)),g&1024&&(x_=!0);break;case 6:if(qs(l,a),Ks(a),g&4){if(a.stateNode===null)throw Error(s(162));g=a.memoizedProps,d=a.stateNode;try{d.nodeValue=g}catch(qe){Ft(a,a.return,qe)}}break;case 3:if(mg=null,b=ai,ai=fg(l.containerInfo),qs(l,a),ai=b,Ks(a),g&4&&d!==null&&d.memoizedState.isDehydrated)try{tu(l.containerInfo)}catch(qe){Ft(a,a.return,qe)}x_&&(x_=!1,e5(a));break;case 4:g=ai,ai=fg(a.stateNode.containerInfo),qs(l,a),Ks(a),ai=g;break;case 12:qs(l,a),Ks(a);break;case 31:qs(l,a),Ks(a),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Qm(a,g)));break;case 13:qs(l,a),Ks(a),a.child.flags&8192&&a.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(tg=tt()),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Qm(a,g)));break;case 22:b=a.memoizedState!==null;var ee=d!==null&&d.memoizedState!==null,ce=oa,ge=On;if(oa=ce||b,On=ge||ee,qs(l,a),On=ge,oa=ce,Ks(a),g&8192)e:for(l=a.stateNode,l._visibility=b?l._visibility&-2:l._visibility|1,b&&(d===null||ee||oa||On||cl(a)),d=null,l=a;;){if(l.tag===5||l.tag===26){if(d===null){ee=d=l;try{if(w=ee.stateNode,b)T=w.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{U=ee.stateNode;var ve=ee.memoizedProps.style,he=ve!=null&&ve.hasOwnProperty("display")?ve.display:null;U.style.display=he==null||typeof he=="boolean"?"":(""+he).trim()}}catch(qe){Ft(ee,ee.return,qe)}}}else if(l.tag===6){if(d===null){ee=l;try{ee.stateNode.nodeValue=b?"":ee.memoizedProps}catch(qe){Ft(ee,ee.return,qe)}}}else if(l.tag===18){if(d===null){ee=l;try{var pe=ee.stateNode;b?F5(pe,!0):F5(ee.stateNode,!1)}catch(qe){Ft(ee,ee.return,qe)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===a)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}g&4&&(g=a.updateQueue,g!==null&&(d=g.retryQueue,d!==null&&(g.retryQueue=null,Qm(a,d))));break;case 19:qs(l,a),Ks(a),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Qm(a,g)));break;case 30:break;case 21:break;default:qs(l,a),Ks(a)}}function Ks(a){var l=a.flags;if(l&2){try{for(var d,g=a.return;g!==null;){if(qA(g)){d=g;break}g=g.return}if(d==null)throw Error(s(160));switch(d.tag){case 27:var b=d.stateNode,w=b_(a);Jm(a,w,b);break;case 5:var T=d.stateNode;d.flags&32&&(kc(T,""),d.flags&=-33);var U=b_(a);Jm(a,U,T);break;case 3:case 4:var ee=d.stateNode.containerInfo,ce=b_(a);__(a,ce,ee);break;default:throw Error(s(161))}}catch(ge){Ft(a,a.return,ge)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function e5(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var l=a;e5(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),a=a.sibling}}function ca(a,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)GA(a,l.alternate,l),l=l.sibling}function cl(a){for(a=a.child;a!==null;){var l=a;switch(l.tag){case 0:case 11:case 14:case 15:Ja(4,l,l.return),cl(l);break;case 1:Si(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&FA(l,l.return,d),cl(l);break;case 27:gd(l.stateNode);case 26:case 5:Si(l,l.return),cl(l);break;case 22:l.memoizedState===null&&cl(l);break;case 30:cl(l);break;default:cl(l)}a=a.sibling}}function ua(a,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var g=l.alternate,b=a,w=l,T=w.flags;switch(w.tag){case 0:case 11:case 15:ua(b,w,d),ad(4,w);break;case 1:if(ua(b,w,d),g=w,b=g.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(ce){Ft(g,g.return,ce)}if(g=w,b=g.updateQueue,b!==null){var U=g.stateNode;try{var ee=b.shared.hiddenCallbacks;if(ee!==null)for(b.shared.hiddenCallbacks=null,b=0;b<ee.length;b++)RE(ee[b],U)}catch(ce){Ft(g,g.return,ce)}}d&&T&64&&HA(w),od(w,w.return);break;case 27:KA(w);case 26:case 5:ua(b,w,d),d&&g===null&&T&4&&VA(w),od(w,w.return);break;case 12:ua(b,w,d);break;case 31:ua(b,w,d),d&&T&4&&XA(b,w);break;case 13:ua(b,w,d),d&&T&4&&JA(b,w);break;case 22:w.memoizedState===null&&ua(b,w,d),od(w,w.return);break;case 30:break;default:ua(b,w,d)}l=l.sibling}}function w_(a,l){var d=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),a=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(a=l.memoizedState.cachePool.pool),a!==d&&(a!=null&&a.refCount++,d!=null&&Wh(d))}function S_(a,l){a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&Wh(a))}function oi(a,l,d,g){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)t5(a,l,d,g),l=l.sibling}function t5(a,l,d,g){var b=l.flags;switch(l.tag){case 0:case 11:case 15:oi(a,l,d,g),b&2048&&ad(9,l);break;case 1:oi(a,l,d,g);break;case 3:oi(a,l,d,g),b&2048&&(a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&Wh(a)));break;case 12:if(b&2048){oi(a,l,d,g),a=l.stateNode;try{var w=l.memoizedProps,T=w.id,U=w.onPostCommit;typeof U=="function"&&U(T,l.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(ee){Ft(l,l.return,ee)}}else oi(a,l,d,g);break;case 31:oi(a,l,d,g);break;case 13:oi(a,l,d,g);break;case 23:break;case 22:w=l.stateNode,T=l.alternate,l.memoizedState!==null?w._visibility&2?oi(a,l,d,g):ld(a,l):w._visibility&2?oi(a,l,d,g):(w._visibility|=2,Vc(a,l,d,g,(l.subtreeFlags&10256)!==0||!1)),b&2048&&w_(T,l);break;case 24:oi(a,l,d,g),b&2048&&S_(l.alternate,l);break;default:oi(a,l,d,g)}}function Vc(a,l,d,g,b){for(b=b&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var w=a,T=l,U=d,ee=g,ce=T.flags;switch(T.tag){case 0:case 11:case 15:Vc(w,T,U,ee,b),ad(8,T);break;case 23:break;case 22:var ge=T.stateNode;T.memoizedState!==null?ge._visibility&2?Vc(w,T,U,ee,b):ld(w,T):(ge._visibility|=2,Vc(w,T,U,ee,b)),b&&ce&2048&&w_(T.alternate,T);break;case 24:Vc(w,T,U,ee,b),b&&ce&2048&&S_(T.alternate,T);break;default:Vc(w,T,U,ee,b)}l=l.sibling}}function ld(a,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=a,g=l,b=g.flags;switch(g.tag){case 22:ld(d,g),b&2048&&w_(g.alternate,g);break;case 24:ld(d,g),b&2048&&S_(g.alternate,g);break;default:ld(d,g)}l=l.sibling}}var cd=8192;function qc(a,l,d){if(a.subtreeFlags&cd)for(a=a.child;a!==null;)n5(a,l,d),a=a.sibling}function n5(a,l,d){switch(a.tag){case 26:qc(a,l,d),a.flags&cd&&a.memoizedState!==null&&c9(d,ai,a.memoizedState,a.memoizedProps);break;case 5:qc(a,l,d);break;case 3:case 4:var g=ai;ai=fg(a.stateNode.containerInfo),qc(a,l,d),ai=g;break;case 22:a.memoizedState===null&&(g=a.alternate,g!==null&&g.memoizedState!==null?(g=cd,cd=16777216,qc(a,l,d),cd=g):qc(a,l,d));break;default:qc(a,l,d)}}function s5(a){var l=a.alternate;if(l!==null&&(a=l.child,a!==null)){l.child=null;do l=a.sibling,a.sibling=null,a=l;while(a!==null)}}function ud(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var g=l[d];Zn=g,i5(g,a)}s5(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)r5(a),a=a.sibling}function r5(a){switch(a.tag){case 0:case 11:case 15:ud(a),a.flags&2048&&Ja(9,a,a.return);break;case 3:ud(a);break;case 12:ud(a);break;case 22:var l=a.stateNode;a.memoizedState!==null&&l._visibility&2&&(a.return===null||a.return.tag!==13)?(l._visibility&=-3,eg(a)):ud(a);break;default:ud(a)}}function eg(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var g=l[d];Zn=g,i5(g,a)}s5(a)}for(a=a.child;a!==null;){switch(l=a,l.tag){case 0:case 11:case 15:Ja(8,l,l.return),eg(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,eg(l));break;default:eg(l)}a=a.sibling}}function i5(a,l){for(;Zn!==null;){var d=Zn;switch(d.tag){case 0:case 11:case 15:Ja(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var g=d.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Wh(d.memoizedState.cache)}if(g=d.child,g!==null)g.return=d,Zn=g;else e:for(d=a;Zn!==null;){g=Zn;var b=g.sibling,w=g.return;if(YA(g),g===d){Zn=null;break e}if(b!==null){b.return=w,Zn=b;break e}Zn=w}}}var k7={getCacheForType:function(a){var l=is(jn),d=l.data.get(a);return d===void 0&&(d=a(),l.data.set(a,d)),d},cacheSignal:function(){return is(jn).controller.signal}},C7=typeof WeakMap=="function"?WeakMap:Map,zt=0,Xt=null,Ct=null,jt=0,Ht=0,ur=null,Qa=!1,Kc=!1,k_=!1,ha=0,bn=0,eo=0,ul=0,C_=0,hr=0,Wc=0,hd=null,Ws=null,N_=!1,tg=0,a5=0,ng=1/0,sg=null,to=null,Pn=0,no=null,Gc=null,da=0,E_=0,A_=null,o5=null,dd=0,j_=null;function dr(){return(zt&2)!==0&&jt!==0?jt&-jt:I.T!==null?B_():S4()}function l5(){if(hr===0)if((jt&536870912)===0||Ot){var a=Ie;Ie<<=1,(Ie&3932160)===0&&(Ie=262144),hr=a}else hr=536870912;return a=lr.current,a!==null&&(a.flags|=32),hr}function Gs(a,l,d){(a===Xt&&(Ht===2||Ht===9)||a.cancelPendingCommit!==null)&&(Yc(a,0),so(a,jt,hr,!1)),Wo(a,d),((zt&2)===0||a!==Xt)&&(a===Xt&&((zt&2)===0&&(ul|=d),bn===4&&so(a,jt,hr,!1)),ki(a))}function c5(a,l,d){if((zt&6)!==0)throw Error(s(327));var g=!d&&(l&127)===0&&(l&a.expiredLanes)===0||$t(a,l),b=g?A7(a,l):R_(a,l,!0),w=g;do{if(b===0){Kc&&!g&&so(a,l,0,!1);break}else{if(d=a.current.alternate,w&&!N7(d)){b=R_(a,l,!1),w=!1;continue}if(b===2){if(w=l,a.errorRecoveryDisabledLanes&w)var T=0;else T=a.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){l=T;e:{var U=a;b=hd;var ee=U.current.memoizedState.isDehydrated;if(ee&&(Yc(U,T).flags|=256),T=R_(U,T,!1),T!==2){if(k_&&!ee){U.errorRecoveryDisabledLanes|=w,ul|=w,b=4;break e}w=Ws,Ws=b,w!==null&&(Ws===null?Ws=w:Ws.push.apply(Ws,w))}b=T}if(w=!1,b!==2)continue}}if(b===1){Yc(a,0),so(a,l,0,!0);break}e:{switch(g=a,w=b,w){case 0:case 1:throw Error(s(345));case 4:if((l&4194048)!==l)break;case 6:so(g,l,hr,!Qa);break e;case 2:Ws=null;break;case 3:case 5:break;default:throw Error(s(329))}if((l&62914560)===l&&(b=tg+300-tt(),10<b)){if(so(g,l,hr,!Qa),bt(g,0,!0)!==0)break e;da=l,g.timeoutHandle=z5(u5.bind(null,g,d,Ws,sg,N_,l,hr,ul,Wc,Qa,w,"Throttled",-0,0),b);break e}u5(g,d,Ws,sg,N_,l,hr,ul,Wc,Qa,w,null,-0,0)}}break}while(!0);ki(a)}function u5(a,l,d,g,b,w,T,U,ee,ce,ge,ve,he,pe){if(a.timeoutHandle=-1,ve=l.subtreeFlags,ve&8192||(ve&16785408)===16785408){ve={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xi},n5(l,w,ve);var qe=(w&62914560)===w?tg-tt():(w&4194048)===w?a5-tt():0;if(qe=u9(ve,qe),qe!==null){da=w,a.cancelPendingCommit=qe(v5.bind(null,a,l,w,d,g,b,T,U,ee,ge,ve,null,he,pe)),so(a,w,T,!ce);return}}v5(a,l,w,d,g,b,T,U,ee)}function N7(a){for(var l=a;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var g=0;g<d.length;g++){var b=d[g],w=b.getSnapshot;b=b.value;try{if(!ar(w(),b))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function so(a,l,d,g){l&=~C_,l&=~ul,a.suspendedLanes|=l,a.pingedLanes&=~l,g&&(a.warmLanes|=l),g=a.expirationTimes;for(var b=l;0<b;){var w=31-me(b),T=1<<w;g[w]=-1,b&=~T}d!==0&&_4(a,d,l)}function rg(){return(zt&6)===0?(fd(0),!1):!0}function T_(){if(Ct!==null){if(Ht===0)var a=Ct.return;else a=Ct,ta=tl=null,K1(a),$c=null,Yh=0,a=Ct;for(;a!==null;)UA(a.alternate,a),a=a.return;Ct=null}}function Yc(a,l){var d=a.timeoutHandle;d!==-1&&(a.timeoutHandle=-1,K7(d)),d=a.cancelPendingCommit,d!==null&&(a.cancelPendingCommit=null,d()),da=0,T_(),Xt=a,Ct=d=Qi(a.current,null),jt=l,Ht=0,ur=null,Qa=!1,Kc=$t(a,l),k_=!1,Wc=hr=C_=ul=eo=bn=0,Ws=hd=null,N_=!1,(l&8)!==0&&(l|=l&32);var g=a.entangledLanes;if(g!==0)for(a=a.entanglements,g&=l;0<g;){var b=31-me(g),w=1<<b;l|=a[b],g&=~w}return ha=l,Cm(),d}function h5(a,l){yt=null,I.H=sd,l===Pc||l===Mm?(l=EE(),Ht=3):l===D1?(l=EE(),Ht=4):Ht=l===l_?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,ur=l,Ct===null&&(bn=1,Wm(a,Dr(l,a.current)))}function d5(){var a=lr.current;return a===null?!0:(jt&4194048)===jt?Pr===null:(jt&62914560)===jt||(jt&536870912)!==0?a===Pr:!1}function f5(){var a=I.H;return I.H=sd,a===null?sd:a}function p5(){var a=I.A;return I.A=k7,a}function ig(){bn=4,Qa||(jt&4194048)!==jt&&lr.current!==null||(Kc=!0),(eo&134217727)===0&&(ul&134217727)===0||Xt===null||so(Xt,jt,hr,!1)}function R_(a,l,d){var g=zt;zt|=2;var b=f5(),w=p5();(Xt!==a||jt!==l)&&(sg=null,Yc(a,l)),l=!1;var T=bn;e:do try{if(Ht!==0&&Ct!==null){var U=Ct,ee=ur;switch(Ht){case 8:T_(),T=6;break e;case 3:case 2:case 9:case 6:lr.current===null&&(l=!0);var ce=Ht;if(Ht=0,ur=null,Zc(a,U,ee,ce),d&&Kc){T=0;break e}break;default:ce=Ht,Ht=0,ur=null,Zc(a,U,ee,ce)}}E7(),T=bn;break}catch(ge){h5(a,ge)}while(!0);return l&&a.shellSuspendCounter++,ta=tl=null,zt=g,I.H=b,I.A=w,Ct===null&&(Xt=null,jt=0,Cm()),T}function E7(){for(;Ct!==null;)m5(Ct)}function A7(a,l){var d=zt;zt|=2;var g=f5(),b=p5();Xt!==a||jt!==l?(sg=null,ng=tt()+500,Yc(a,l)):Kc=$t(a,l);e:do try{if(Ht!==0&&Ct!==null){l=Ct;var w=ur;t:switch(Ht){case 1:Ht=0,ur=null,Zc(a,l,w,1);break;case 2:case 9:if(CE(w)){Ht=0,ur=null,g5(l);break}l=function(){Ht!==2&&Ht!==9||Xt!==a||(Ht=7),ki(a)},w.then(l,l);break e;case 3:Ht=7;break e;case 4:Ht=5;break e;case 7:CE(w)?(Ht=0,ur=null,g5(l)):(Ht=0,ur=null,Zc(a,l,w,7));break;case 5:var T=null;switch(Ct.tag){case 26:T=Ct.memoizedState;case 5:case 27:var U=Ct;if(T?t3(T):U.stateNode.complete){Ht=0,ur=null;var ee=U.sibling;if(ee!==null)Ct=ee;else{var ce=U.return;ce!==null?(Ct=ce,ag(ce)):Ct=null}break t}}Ht=0,ur=null,Zc(a,l,w,5);break;case 6:Ht=0,ur=null,Zc(a,l,w,6);break;case 8:T_(),bn=6;break e;default:throw Error(s(462))}}j7();break}catch(ge){h5(a,ge)}while(!0);return ta=tl=null,I.H=g,I.A=b,zt=d,Ct!==null?0:(Xt=null,jt=0,Cm(),bn)}function j7(){for(;Ct!==null&&!We();)m5(Ct)}function m5(a){var l=$A(a.alternate,a,ha);a.memoizedProps=a.pendingProps,l===null?ag(a):Ct=l}function g5(a){var l=a,d=l.alternate;switch(l.tag){case 15:case 0:l=MA(d,l,l.pendingProps,l.type,void 0,jt);break;case 11:l=MA(d,l,l.pendingProps,l.type.render,l.ref,jt);break;case 5:K1(l);default:UA(d,l),l=Ct=pE(l,ha),l=$A(d,l,ha)}a.memoizedProps=a.pendingProps,l===null?ag(a):Ct=l}function Zc(a,l,d,g){ta=tl=null,K1(l),$c=null,Yh=0;var b=l.return;try{if(y7(a,b,l,d,jt)){bn=1,Wm(a,Dr(d,a.current)),Ct=null;return}}catch(w){if(b!==null)throw Ct=b,w;bn=1,Wm(a,Dr(d,a.current)),Ct=null;return}l.flags&32768?(Ot||g===1?a=!0:Kc||(jt&536870912)!==0?a=!1:(Qa=a=!0,(g===2||g===9||g===3||g===6)&&(g=lr.current,g!==null&&g.tag===13&&(g.flags|=16384))),y5(l,a)):ag(l)}function ag(a){var l=a;do{if((l.flags&32768)!==0){y5(l,Qa);return}a=l.return;var d=_7(l.alternate,l,ha);if(d!==null){Ct=d;return}if(l=l.sibling,l!==null){Ct=l;return}Ct=l=a}while(l!==null);bn===0&&(bn=5)}function y5(a,l){do{var d=x7(a.alternate,a);if(d!==null){d.flags&=32767,Ct=d;return}if(d=a.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(a=a.sibling,a!==null)){Ct=a;return}Ct=a=d}while(a!==null);bn=6,Ct=null}function v5(a,l,d,g,b,w,T,U,ee){a.cancelPendingCommit=null;do og();while(Pn!==0);if((zt&6)!==0)throw Error(s(327));if(l!==null){if(l===a.current)throw Error(s(177));if(w=l.lanes|l.childLanes,w|=b1,Wb(a,d,w,T,U,ee),a===Xt&&(Ct=Xt=null,jt=0),Gc=l,no=a,da=d,E_=w,A_=b,o5=g,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,M7(Ge,function(){return S5(),null})):(a.callbackNode=null,a.callbackPriority=0),g=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||g){g=I.T,I.T=null,b=Y.p,Y.p=2,T=zt,zt|=4;try{w7(a,l,d)}finally{zt=T,Y.p=b,I.T=g}}Pn=1,b5(),_5(),x5()}}function b5(){if(Pn===1){Pn=0;var a=no,l=Gc,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=I.T,I.T=null;var g=Y.p;Y.p=2;var b=zt;zt|=4;try{QA(l,a);var w=F_,T=iE(a.containerInfo),U=w.focusedElem,ee=w.selectionRange;if(T!==U&&U&&U.ownerDocument&&rE(U.ownerDocument.documentElement,U)){if(ee!==null&&p1(U)){var ce=ee.start,ge=ee.end;if(ge===void 0&&(ge=ce),"selectionStart"in U)U.selectionStart=ce,U.selectionEnd=Math.min(ge,U.value.length);else{var ve=U.ownerDocument||document,he=ve&&ve.defaultView||window;if(he.getSelection){var pe=he.getSelection(),qe=U.textContent.length,ot=Math.min(ee.start,qe),Gt=ee.end===void 0?ot:Math.min(ee.end,qe);!pe.extend&&ot>Gt&&(T=Gt,Gt=ot,ot=T);var ie=sE(U,ot),te=sE(U,Gt);if(ie&&te&&(pe.rangeCount!==1||pe.anchorNode!==ie.node||pe.anchorOffset!==ie.offset||pe.focusNode!==te.node||pe.focusOffset!==te.offset)){var le=ve.createRange();le.setStart(ie.node,ie.offset),pe.removeAllRanges(),ot>Gt?(pe.addRange(le),pe.extend(te.node,te.offset)):(le.setEnd(te.node,te.offset),pe.addRange(le))}}}}for(ve=[],pe=U;pe=pe.parentNode;)pe.nodeType===1&&ve.push({element:pe,left:pe.scrollLeft,top:pe.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<ve.length;U++){var ye=ve[U];ye.element.scrollLeft=ye.left,ye.element.scrollTop=ye.top}}bg=!!H_,F_=H_=null}finally{zt=b,Y.p=g,I.T=d}}a.current=l,Pn=2}}function _5(){if(Pn===2){Pn=0;var a=no,l=Gc,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=I.T,I.T=null;var g=Y.p;Y.p=2;var b=zt;zt|=4;try{GA(a,l.alternate,l)}finally{zt=b,Y.p=g,I.T=d}}Pn=3}}function x5(){if(Pn===4||Pn===3){Pn=0,Qe();var a=no,l=Gc,d=da,g=o5;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Pn=5:(Pn=0,Gc=no=null,w5(a,a.pendingLanes));var b=a.pendingLanes;if(b===0&&(to=null),Yb(d),l=l.stateNode,de&&typeof de.onCommitFiberRoot=="function")try{de.onCommitFiberRoot(oe,l,void 0,(l.current.flags&128)===128)}catch{}if(g!==null){l=I.T,b=Y.p,Y.p=2,I.T=null;try{for(var w=a.onRecoverableError,T=0;T<g.length;T++){var U=g[T];w(U.value,{componentStack:U.stack})}}finally{I.T=l,Y.p=b}}(da&3)!==0&&og(),ki(a),b=a.pendingLanes,(d&261930)!==0&&(b&42)!==0?a===j_?dd++:(dd=0,j_=a):dd=0,fd(0)}}function w5(a,l){(a.pooledCacheLanes&=l)===0&&(l=a.pooledCache,l!=null&&(a.pooledCache=null,Wh(l)))}function og(){return b5(),_5(),x5(),S5()}function S5(){if(Pn!==5)return!1;var a=no,l=E_;E_=0;var d=Yb(da),g=I.T,b=Y.p;try{Y.p=32>d?32:d,I.T=null,d=A_,A_=null;var w=no,T=da;if(Pn=0,Gc=no=null,da=0,(zt&6)!==0)throw Error(s(331));var U=zt;if(zt|=4,r5(w.current),t5(w,w.current,T,d),zt=U,fd(0,!1),de&&typeof de.onPostCommitFiberRoot=="function")try{de.onPostCommitFiberRoot(oe,w)}catch{}return!0}finally{Y.p=b,I.T=g,w5(a,l)}}function k5(a,l,d){l=Dr(d,l),l=o_(a.stateNode,l,2),a=Ya(a,l,2),a!==null&&(Wo(a,2),ki(a))}function Ft(a,l,d){if(a.tag===3)k5(a,a,d);else for(;l!==null;){if(l.tag===3){k5(l,a,d);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(to===null||!to.has(g))){a=Dr(d,a),d=CA(2),g=Ya(l,d,2),g!==null&&(NA(d,g,l,a),Wo(g,2),ki(g));break}}l=l.return}}function O_(a,l,d){var g=a.pingCache;if(g===null){g=a.pingCache=new C7;var b=new Set;g.set(l,b)}else b=g.get(l),b===void 0&&(b=new Set,g.set(l,b));b.has(d)||(k_=!0,b.add(d),a=T7.bind(null,a,l,d),l.then(a,a))}function T7(a,l,d){var g=a.pingCache;g!==null&&g.delete(l),a.pingedLanes|=a.suspendedLanes&d,a.warmLanes&=~d,Xt===a&&(jt&d)===d&&(bn===4||bn===3&&(jt&62914560)===jt&&300>tt()-tg?(zt&2)===0&&Yc(a,0):C_|=d,Wc===jt&&(Wc=0)),ki(a)}function C5(a,l){l===0&&(l=Us()),a=Jo(a,l),a!==null&&(Wo(a,l),ki(a))}function R7(a){var l=a.memoizedState,d=0;l!==null&&(d=l.retryLane),C5(a,d)}function O7(a,l){var d=0;switch(a.tag){case 31:case 13:var g=a.stateNode,b=a.memoizedState;b!==null&&(d=b.retryLane);break;case 19:g=a.stateNode;break;case 22:g=a.stateNode._retryCache;break;default:throw Error(s(314))}g!==null&&g.delete(l),C5(a,d)}function M7(a,l){return tn(a,l)}var lg=null,Xc=null,M_=!1,cg=!1,D_=!1,ro=0;function ki(a){a!==Xc&&a.next===null&&(Xc===null?lg=Xc=a:Xc=Xc.next=a),cg=!0,M_||(M_=!0,B7())}function fd(a,l){if(!D_&&cg){D_=!0;do for(var d=!1,g=lg;g!==null;){if(a!==0){var b=g.pendingLanes;if(b===0)var w=0;else{var T=g.suspendedLanes,U=g.pingedLanes;w=(1<<31-me(42|a)+1)-1,w&=b&~(T&~U),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(d=!0,j5(g,w))}else w=jt,w=bt(g,g===Xt?w:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(w&3)===0||$t(g,w)||(d=!0,j5(g,w));g=g.next}while(d);D_=!1}}function D7(){N5()}function N5(){cg=M_=!1;var a=0;ro!==0&&q7()&&(a=ro);for(var l=tt(),d=null,g=lg;g!==null;){var b=g.next,w=E5(g,l);w===0?(g.next=null,d===null?lg=b:d.next=b,b===null&&(Xc=d)):(d=g,(a!==0||(w&3)!==0)&&(cg=!0)),g=b}Pn!==0&&Pn!==5||fd(a),ro!==0&&(ro=0)}function E5(a,l){for(var d=a.suspendedLanes,g=a.pingedLanes,b=a.expirationTimes,w=a.pendingLanes&-62914561;0<w;){var T=31-me(w),U=1<<T,ee=b[T];ee===-1?((U&d)===0||(U&g)!==0)&&(b[T]=fn(U,l)):ee<=l&&(a.expiredLanes|=U),w&=~U}if(l=Xt,d=jt,d=bt(a,a===l?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g=a.callbackNode,d===0||a===l&&(Ht===2||Ht===9)||a.cancelPendingCommit!==null)return g!==null&&g!==null&&je(g),a.callbackNode=null,a.callbackPriority=0;if((d&3)===0||$t(a,d)){if(l=d&-d,l===a.callbackPriority)return l;switch(g!==null&&je(g),Yb(d)){case 2:case 8:d=xe;break;case 32:d=Ge;break;case 268435456:d=pt;break;default:d=Ge}return g=A5.bind(null,a),d=tn(d,g),a.callbackPriority=l,a.callbackNode=d,l}return g!==null&&g!==null&&je(g),a.callbackPriority=2,a.callbackNode=null,2}function A5(a,l){if(Pn!==0&&Pn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var d=a.callbackNode;if(og()&&a.callbackNode!==d)return null;var g=jt;return g=bt(a,a===Xt?g:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g===0?null:(c5(a,g,l),E5(a,tt()),a.callbackNode!=null&&a.callbackNode===d?A5.bind(null,a):null)}function j5(a,l){if(og())return null;c5(a,l,!0)}function B7(){W7(function(){(zt&6)!==0?tn(fe,D7):N5()})}function B_(){if(ro===0){var a=Lc;a===0&&(a=Oe,Oe<<=1,(Oe&261888)===0&&(Oe=256)),ro=a}return ro}function T5(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:ym(""+a)}function R5(a,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,a.id&&d.setAttribute("form",a.id),l.parentNode.insertBefore(d,l),a=new FormData(a),d.parentNode.removeChild(d),a}function L7(a,l,d,g,b){if(l==="submit"&&d&&d.stateNode===b){var w=T5((b[Hs]||null).action),T=g.submitter;T&&(l=(l=T[Hs]||null)?T5(l.formAction):T.getAttribute("formAction"),l!==null&&(w=l,T=null));var U=new xm("action","action",null,g,b);a.push({event:U,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(ro!==0){var ee=T?R5(b,T):new FormData(b);t_(d,{pending:!0,data:ee,method:b.method,action:w},null,ee)}}else typeof w=="function"&&(U.preventDefault(),ee=T?R5(b,T):new FormData(b),t_(d,{pending:!0,data:ee,method:b.method,action:w},w,ee))},currentTarget:b}]})}}for(var L_=0;L_<v1.length;L_++){var I_=v1[L_],I7=I_.toLowerCase(),P7=I_[0].toUpperCase()+I_.slice(1);ii(I7,"on"+P7)}ii(lE,"onAnimationEnd"),ii(cE,"onAnimationIteration"),ii(uE,"onAnimationStart"),ii("dblclick","onDoubleClick"),ii("focusin","onFocus"),ii("focusout","onBlur"),ii(e7,"onTransitionRun"),ii(t7,"onTransitionStart"),ii(n7,"onTransitionCancel"),ii(hE,"onTransitionEnd"),wc("onMouseEnter",["mouseout","mouseover"]),wc("onMouseLeave",["mouseout","mouseover"]),wc("onPointerEnter",["pointerout","pointerover"]),wc("onPointerLeave",["pointerout","pointerover"]),Go("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Go("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Go("onBeforeInput",["compositionend","keypress","textInput","paste"]),Go("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Go("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Go("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$7=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pd));function O5(a,l){l=(l&4)!==0;for(var d=0;d<a.length;d++){var g=a[d],b=g.event;g=g.listeners;e:{var w=void 0;if(l)for(var T=g.length-1;0<=T;T--){var U=g[T],ee=U.instance,ce=U.currentTarget;if(U=U.listener,ee!==w&&b.isPropagationStopped())break e;w=U,b.currentTarget=ce;try{w(b)}catch(ge){km(ge)}b.currentTarget=null,w=ee}else for(T=0;T<g.length;T++){if(U=g[T],ee=U.instance,ce=U.currentTarget,U=U.listener,ee!==w&&b.isPropagationStopped())break e;w=U,b.currentTarget=ce;try{w(b)}catch(ge){km(ge)}b.currentTarget=null,w=ee}}}}function Nt(a,l){var d=l[Zb];d===void 0&&(d=l[Zb]=new Set);var g=a+"__bubble";d.has(g)||(M5(l,a,2,!1),d.add(g))}function P_(a,l,d){var g=0;l&&(g|=4),M5(d,a,g,l)}var ug="_reactListening"+Math.random().toString(36).slice(2);function $_(a){if(!a[ug]){a[ug]=!0,N4.forEach(function(d){d!=="selectionchange"&&($7.has(d)||P_(d,!1,a),P_(d,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[ug]||(l[ug]=!0,P_("selectionchange",!1,l))}}function M5(a,l,d,g){switch(l3(l)){case 2:var b=f9;break;case 8:b=p9;break;default:b=ex}d=b.bind(null,l,d,a),b=void 0,!i1||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(b=!0),g?b!==void 0?a.addEventListener(l,d,{capture:!0,passive:b}):a.addEventListener(l,d,!0):b!==void 0?a.addEventListener(l,d,{passive:b}):a.addEventListener(l,d,!1)}function z_(a,l,d,g,b){var w=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var T=g.tag;if(T===3||T===4){var U=g.stateNode.containerInfo;if(U===b)break;if(T===4)for(T=g.return;T!==null;){var ee=T.tag;if((ee===3||ee===4)&&T.stateNode.containerInfo===b)return;T=T.return}for(;U!==null;){if(T=bc(U),T===null)return;if(ee=T.tag,ee===5||ee===6||ee===26||ee===27){g=w=T;continue e}U=U.parentNode}}g=g.return}P4(function(){var ce=w,ge=s1(d),ve=[];e:{var he=dE.get(a);if(he!==void 0){var pe=xm,qe=a;switch(a){case"keypress":if(bm(d)===0)break e;case"keydown":case"keyup":pe=Oz;break;case"focusin":qe="focus",pe=c1;break;case"focusout":qe="blur",pe=c1;break;case"beforeblur":case"afterblur":pe=c1;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=U4;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=_z;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=Bz;break;case lE:case cE:case uE:pe=Sz;break;case hE:pe=Iz;break;case"scroll":case"scrollend":pe=vz;break;case"wheel":pe=$z;break;case"copy":case"cut":case"paste":pe=Cz;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=F4;break;case"toggle":case"beforetoggle":pe=Uz}var ot=(l&4)!==0,Gt=!ot&&(a==="scroll"||a==="scrollend"),ie=ot?he!==null?he+"Capture":null:he;ot=[];for(var te=ce,le;te!==null;){var ye=te;if(le=ye.stateNode,ye=ye.tag,ye!==5&&ye!==26&&ye!==27||le===null||ie===null||(ye=Lh(te,ie),ye!=null&&ot.push(md(te,ye,le))),Gt)break;te=te.return}0<ot.length&&(he=new pe(he,qe,null,d,ge),ve.push({event:he,listeners:ot}))}}if((l&7)===0){e:{if(he=a==="mouseover"||a==="pointerover",pe=a==="mouseout"||a==="pointerout",he&&d!==n1&&(qe=d.relatedTarget||d.fromElement)&&(bc(qe)||qe[vc]))break e;if((pe||he)&&(he=ge.window===ge?ge:(he=ge.ownerDocument)?he.defaultView||he.parentWindow:window,pe?(qe=d.relatedTarget||d.toElement,pe=ce,qe=qe?bc(qe):null,qe!==null&&(Gt=i(qe),ot=qe.tag,qe!==Gt||ot!==5&&ot!==27&&ot!==6)&&(qe=null)):(pe=null,qe=ce),pe!==qe)){if(ot=U4,ye="onMouseLeave",ie="onMouseEnter",te="mouse",(a==="pointerout"||a==="pointerover")&&(ot=F4,ye="onPointerLeave",ie="onPointerEnter",te="pointer"),Gt=pe==null?he:Bh(pe),le=qe==null?he:Bh(qe),he=new ot(ye,te+"leave",pe,d,ge),he.target=Gt,he.relatedTarget=le,ye=null,bc(ge)===ce&&(ot=new ot(ie,te+"enter",qe,d,ge),ot.target=le,ot.relatedTarget=Gt,ye=ot),Gt=ye,pe&&qe)t:{for(ot=z7,ie=pe,te=qe,le=0,ye=ie;ye;ye=ot(ye))le++;ye=0;for(var nt=te;nt;nt=ot(nt))ye++;for(;0<le-ye;)ie=ot(ie),le--;for(;0<ye-le;)te=ot(te),ye--;for(;le--;){if(ie===te||te!==null&&ie===te.alternate){ot=ie;break t}ie=ot(ie),te=ot(te)}ot=null}else ot=null;pe!==null&&D5(ve,he,pe,ot,!1),qe!==null&&Gt!==null&&D5(ve,Gt,qe,ot,!0)}}e:{if(he=ce?Bh(ce):window,pe=he.nodeName&&he.nodeName.toLowerCase(),pe==="select"||pe==="input"&&he.type==="file")var Lt=X4;else if(Y4(he))if(J4)Lt=Xz;else{Lt=Yz;var Xe=Gz}else pe=he.nodeName,!pe||pe.toLowerCase()!=="input"||he.type!=="checkbox"&&he.type!=="radio"?ce&&t1(ce.elementType)&&(Lt=X4):Lt=Zz;if(Lt&&(Lt=Lt(a,ce))){Z4(ve,Lt,d,ge);break e}Xe&&Xe(a,he,ce),a==="focusout"&&ce&&he.type==="number"&&ce.memoizedProps.value!=null&&e1(he,"number",he.value)}switch(Xe=ce?Bh(ce):window,a){case"focusin":(Y4(Xe)||Xe.contentEditable==="true")&&(Ac=Xe,m1=ce,Vh=null);break;case"focusout":Vh=m1=Ac=null;break;case"mousedown":g1=!0;break;case"contextmenu":case"mouseup":case"dragend":g1=!1,aE(ve,d,ge);break;case"selectionchange":if(Qz)break;case"keydown":case"keyup":aE(ve,d,ge)}var _t;if(h1)e:{switch(a){case"compositionstart":var Tt="onCompositionStart";break e;case"compositionend":Tt="onCompositionEnd";break e;case"compositionupdate":Tt="onCompositionUpdate";break e}Tt=void 0}else Ec?W4(a,d)&&(Tt="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(Tt="onCompositionStart");Tt&&(V4&&d.locale!=="ko"&&(Ec||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&Ec&&(_t=$4()):(Ha=ge,a1="value"in Ha?Ha.value:Ha.textContent,Ec=!0)),Xe=hg(ce,Tt),0<Xe.length&&(Tt=new H4(Tt,a,null,d,ge),ve.push({event:Tt,listeners:Xe}),_t?Tt.data=_t:(_t=G4(d),_t!==null&&(Tt.data=_t)))),(_t=Fz?Vz(a,d):qz(a,d))&&(Tt=hg(ce,"onBeforeInput"),0<Tt.length&&(Xe=new H4("onBeforeInput","beforeinput",null,d,ge),ve.push({event:Xe,listeners:Tt}),Xe.data=_t)),L7(ve,a,ce,d,ge)}O5(ve,l)})}function md(a,l,d){return{instance:a,listener:l,currentTarget:d}}function hg(a,l){for(var d=l+"Capture",g=[];a!==null;){var b=a,w=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||w===null||(b=Lh(a,d),b!=null&&g.unshift(md(a,b,w)),b=Lh(a,l),b!=null&&g.push(md(a,b,w))),a.tag===3)return g;a=a.return}return[]}function z7(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function D5(a,l,d,g,b){for(var w=l._reactName,T=[];d!==null&&d!==g;){var U=d,ee=U.alternate,ce=U.stateNode;if(U=U.tag,ee!==null&&ee===g)break;U!==5&&U!==26&&U!==27||ce===null||(ee=ce,b?(ce=Lh(d,w),ce!=null&&T.unshift(md(d,ce,ee))):b||(ce=Lh(d,w),ce!=null&&T.push(md(d,ce,ee)))),d=d.return}T.length!==0&&a.push({event:l,listeners:T})}var U7=/\r\n?/g,H7=/\u0000|\uFFFD/g;function B5(a){return(typeof a=="string"?a:""+a).replace(U7,`
`).replace(H7,"")}function L5(a,l){return l=B5(l),B5(a)===l}function Wt(a,l,d,g,b,w){switch(d){case"children":typeof g=="string"?l==="body"||l==="textarea"&&g===""||kc(a,g):(typeof g=="number"||typeof g=="bigint")&&l!=="body"&&kc(a,""+g);break;case"className":mm(a,"class",g);break;case"tabIndex":mm(a,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":mm(a,d,g);break;case"style":L4(a,g,w);break;case"data":if(l!=="object"){mm(a,"data",g);break}case"src":case"href":if(g===""&&(l!=="a"||d!=="href")){a.removeAttribute(d);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(d);break}g=ym(""+g),a.setAttribute(d,g);break;case"action":case"formAction":if(typeof g=="function"){a.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(d==="formAction"?(l!=="input"&&Wt(a,l,"name",b.name,b,null),Wt(a,l,"formEncType",b.formEncType,b,null),Wt(a,l,"formMethod",b.formMethod,b,null),Wt(a,l,"formTarget",b.formTarget,b,null)):(Wt(a,l,"encType",b.encType,b,null),Wt(a,l,"method",b.method,b,null),Wt(a,l,"target",b.target,b,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(d);break}g=ym(""+g),a.setAttribute(d,g);break;case"onClick":g!=null&&(a.onclick=Xi);break;case"onScroll":g!=null&&Nt("scroll",a);break;case"onScrollEnd":g!=null&&Nt("scrollend",a);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(s(61));if(d=g.__html,d!=null){if(b.children!=null)throw Error(s(60));a.innerHTML=d}}break;case"multiple":a.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":a.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){a.removeAttribute("xlink:href");break}d=ym(""+g),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(d,""+g):a.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(d,""):a.removeAttribute(d);break;case"capture":case"download":g===!0?a.setAttribute(d,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(d,g):a.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?a.setAttribute(d,g):a.removeAttribute(d);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?a.removeAttribute(d):a.setAttribute(d,g);break;case"popover":Nt("beforetoggle",a),Nt("toggle",a),pm(a,"popover",g);break;case"xlinkActuate":Zi(a,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Zi(a,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Zi(a,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Zi(a,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Zi(a,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Zi(a,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Zi(a,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Zi(a,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Zi(a,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":pm(a,"is",g);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=gz.get(d)||d,pm(a,d,g))}}function U_(a,l,d,g,b,w){switch(d){case"style":L4(a,g,w);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(s(61));if(d=g.__html,d!=null){if(b.children!=null)throw Error(s(60));a.innerHTML=d}}break;case"children":typeof g=="string"?kc(a,g):(typeof g=="number"||typeof g=="bigint")&&kc(a,""+g);break;case"onScroll":g!=null&&Nt("scroll",a);break;case"onScrollEnd":g!=null&&Nt("scrollend",a);break;case"onClick":g!=null&&(a.onclick=Xi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!E4.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(b=d.endsWith("Capture"),l=d.slice(2,b?d.length-7:void 0),w=a[Hs]||null,w=w!=null?w[d]:null,typeof w=="function"&&a.removeEventListener(l,w,b),typeof g=="function")){typeof w!="function"&&w!==null&&(d in a?a[d]=null:a.hasAttribute(d)&&a.removeAttribute(d)),a.addEventListener(l,g,b);break e}d in a?a[d]=g:g===!0?a.setAttribute(d,""):pm(a,d,g)}}}function os(a,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nt("error",a),Nt("load",a);var g=!1,b=!1,w;for(w in d)if(d.hasOwnProperty(w)){var T=d[w];if(T!=null)switch(w){case"src":g=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,l));default:Wt(a,l,w,T,d,null)}}b&&Wt(a,l,"srcSet",d.srcSet,d,null),g&&Wt(a,l,"src",d.src,d,null);return;case"input":Nt("invalid",a);var U=w=T=b=null,ee=null,ce=null;for(g in d)if(d.hasOwnProperty(g)){var ge=d[g];if(ge!=null)switch(g){case"name":b=ge;break;case"type":T=ge;break;case"checked":ee=ge;break;case"defaultChecked":ce=ge;break;case"value":w=ge;break;case"defaultValue":U=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(s(137,l));break;default:Wt(a,l,g,ge,d,null)}}O4(a,w,U,ee,ce,T,b,!1);return;case"select":Nt("invalid",a),g=T=w=null;for(b in d)if(d.hasOwnProperty(b)&&(U=d[b],U!=null))switch(b){case"value":w=U;break;case"defaultValue":T=U;break;case"multiple":g=U;default:Wt(a,l,b,U,d,null)}l=w,d=T,a.multiple=!!g,l!=null?Sc(a,!!g,l,!1):d!=null&&Sc(a,!!g,d,!0);return;case"textarea":Nt("invalid",a),w=b=g=null;for(T in d)if(d.hasOwnProperty(T)&&(U=d[T],U!=null))switch(T){case"value":g=U;break;case"defaultValue":b=U;break;case"children":w=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(s(91));break;default:Wt(a,l,T,U,d,null)}D4(a,g,b,w);return;case"option":for(ee in d)d.hasOwnProperty(ee)&&(g=d[ee],g!=null)&&(ee==="selected"?a.selected=g&&typeof g!="function"&&typeof g!="symbol":Wt(a,l,ee,g,d,null));return;case"dialog":Nt("beforetoggle",a),Nt("toggle",a),Nt("cancel",a),Nt("close",a);break;case"iframe":case"object":Nt("load",a);break;case"video":case"audio":for(g=0;g<pd.length;g++)Nt(pd[g],a);break;case"image":Nt("error",a),Nt("load",a);break;case"details":Nt("toggle",a);break;case"embed":case"source":case"link":Nt("error",a),Nt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ce in d)if(d.hasOwnProperty(ce)&&(g=d[ce],g!=null))switch(ce){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,l));default:Wt(a,l,ce,g,d,null)}return;default:if(t1(l)){for(ge in d)d.hasOwnProperty(ge)&&(g=d[ge],g!==void 0&&U_(a,l,ge,g,d,void 0));return}}for(U in d)d.hasOwnProperty(U)&&(g=d[U],g!=null&&Wt(a,l,U,g,d,null))}function F7(a,l,d,g){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,w=null,T=null,U=null,ee=null,ce=null,ge=null;for(pe in d){var ve=d[pe];if(d.hasOwnProperty(pe)&&ve!=null)switch(pe){case"checked":break;case"value":break;case"defaultValue":ee=ve;default:g.hasOwnProperty(pe)||Wt(a,l,pe,null,g,ve)}}for(var he in g){var pe=g[he];if(ve=d[he],g.hasOwnProperty(he)&&(pe!=null||ve!=null))switch(he){case"type":w=pe;break;case"name":b=pe;break;case"checked":ce=pe;break;case"defaultChecked":ge=pe;break;case"value":T=pe;break;case"defaultValue":U=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(s(137,l));break;default:pe!==ve&&Wt(a,l,he,pe,g,ve)}}Qb(a,T,U,ee,ce,ge,w,b);return;case"select":pe=T=U=he=null;for(w in d)if(ee=d[w],d.hasOwnProperty(w)&&ee!=null)switch(w){case"value":break;case"multiple":pe=ee;default:g.hasOwnProperty(w)||Wt(a,l,w,null,g,ee)}for(b in g)if(w=g[b],ee=d[b],g.hasOwnProperty(b)&&(w!=null||ee!=null))switch(b){case"value":he=w;break;case"defaultValue":U=w;break;case"multiple":T=w;default:w!==ee&&Wt(a,l,b,w,g,ee)}l=U,d=T,g=pe,he!=null?Sc(a,!!d,he,!1):!!g!=!!d&&(l!=null?Sc(a,!!d,l,!0):Sc(a,!!d,d?[]:"",!1));return;case"textarea":pe=he=null;for(U in d)if(b=d[U],d.hasOwnProperty(U)&&b!=null&&!g.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:Wt(a,l,U,null,g,b)}for(T in g)if(b=g[T],w=d[T],g.hasOwnProperty(T)&&(b!=null||w!=null))switch(T){case"value":he=b;break;case"defaultValue":pe=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:b!==w&&Wt(a,l,T,b,g,w)}M4(a,he,pe);return;case"option":for(var qe in d)he=d[qe],d.hasOwnProperty(qe)&&he!=null&&!g.hasOwnProperty(qe)&&(qe==="selected"?a.selected=!1:Wt(a,l,qe,null,g,he));for(ee in g)he=g[ee],pe=d[ee],g.hasOwnProperty(ee)&&he!==pe&&(he!=null||pe!=null)&&(ee==="selected"?a.selected=he&&typeof he!="function"&&typeof he!="symbol":Wt(a,l,ee,he,g,pe));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ot in d)he=d[ot],d.hasOwnProperty(ot)&&he!=null&&!g.hasOwnProperty(ot)&&Wt(a,l,ot,null,g,he);for(ce in g)if(he=g[ce],pe=d[ce],g.hasOwnProperty(ce)&&he!==pe&&(he!=null||pe!=null))switch(ce){case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(s(137,l));break;default:Wt(a,l,ce,he,g,pe)}return;default:if(t1(l)){for(var Gt in d)he=d[Gt],d.hasOwnProperty(Gt)&&he!==void 0&&!g.hasOwnProperty(Gt)&&U_(a,l,Gt,void 0,g,he);for(ge in g)he=g[ge],pe=d[ge],!g.hasOwnProperty(ge)||he===pe||he===void 0&&pe===void 0||U_(a,l,ge,he,g,pe);return}}for(var ie in d)he=d[ie],d.hasOwnProperty(ie)&&he!=null&&!g.hasOwnProperty(ie)&&Wt(a,l,ie,null,g,he);for(ve in g)he=g[ve],pe=d[ve],!g.hasOwnProperty(ve)||he===pe||he==null&&pe==null||Wt(a,l,ve,he,g,pe)}function I5(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function V7(){if(typeof performance.getEntriesByType=="function"){for(var a=0,l=0,d=performance.getEntriesByType("resource"),g=0;g<d.length;g++){var b=d[g],w=b.transferSize,T=b.initiatorType,U=b.duration;if(w&&U&&I5(T)){for(T=0,U=b.responseEnd,g+=1;g<d.length;g++){var ee=d[g],ce=ee.startTime;if(ce>U)break;var ge=ee.transferSize,ve=ee.initiatorType;ge&&I5(ve)&&(ee=ee.responseEnd,T+=ge*(ee<U?1:(U-ce)/(ee-ce)))}if(--g,l+=8*(w+T)/(b.duration/1e3),a++,10<a)break}}if(0<a)return l/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var H_=null,F_=null;function dg(a){return a.nodeType===9?a:a.ownerDocument}function P5(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $5(a,l){if(a===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&l==="foreignObject"?0:a}function V_(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var q_=null;function q7(){var a=window.event;return a&&a.type==="popstate"?a===q_?!1:(q_=a,!0):(q_=null,!1)}var z5=typeof setTimeout=="function"?setTimeout:void 0,K7=typeof clearTimeout=="function"?clearTimeout:void 0,U5=typeof Promise=="function"?Promise:void 0,W7=typeof queueMicrotask=="function"?queueMicrotask:typeof U5<"u"?function(a){return U5.resolve(null).then(a).catch(G7)}:z5;function G7(a){setTimeout(function(){throw a})}function io(a){return a==="head"}function H5(a,l){var d=l,g=0;do{var b=d.nextSibling;if(a.removeChild(d),b&&b.nodeType===8)if(d=b.data,d==="/$"||d==="/&"){if(g===0){a.removeChild(b),tu(l);return}g--}else if(d==="$"||d==="$?"||d==="$~"||d==="$!"||d==="&")g++;else if(d==="html")gd(a.ownerDocument.documentElement);else if(d==="head"){d=a.ownerDocument.head,gd(d);for(var w=d.firstChild;w;){var T=w.nextSibling,U=w.nodeName;w[Dh]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&w.rel.toLowerCase()==="stylesheet"||d.removeChild(w),w=T}}else d==="body"&&gd(a.ownerDocument.body);d=b}while(d);tu(l)}function F5(a,l){var d=a;a=0;do{var g=d.nextSibling;if(d.nodeType===1?l?(d._stashedDisplay=d.style.display,d.style.display="none"):(d.style.display=d._stashedDisplay||"",d.getAttribute("style")===""&&d.removeAttribute("style")):d.nodeType===3&&(l?(d._stashedText=d.nodeValue,d.nodeValue=""):d.nodeValue=d._stashedText||""),g&&g.nodeType===8)if(d=g.data,d==="/$"){if(a===0)break;a--}else d!=="$"&&d!=="$?"&&d!=="$~"&&d!=="$!"||a++;d=g}while(d)}function K_(a){var l=a.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":K_(d),Xb(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}a.removeChild(d)}}function Y7(a,l,d,g){for(;a.nodeType===1;){var b=d;if(a.nodeName.toLowerCase()!==l.toLowerCase()){if(!g&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(g){if(!a[Dh])switch(l){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(w=a.getAttribute("rel"),w==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(w!==b.rel||a.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||a.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||a.getAttribute("title")!==(b.title==null?null:b.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(w=a.getAttribute("src"),(w!==(b.src==null?null:b.src)||a.getAttribute("type")!==(b.type==null?null:b.type)||a.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&w&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(l==="input"&&a.type==="hidden"){var w=b.name==null?null:""+b.name;if(b.type==="hidden"&&a.getAttribute("name")===w)return a}else return a;if(a=$r(a.nextSibling),a===null)break}return null}function Z7(a,l,d){if(l==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!d||(a=$r(a.nextSibling),a===null))return null;return a}function V5(a,l){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!l||(a=$r(a.nextSibling),a===null))return null;return a}function W_(a){return a.data==="$?"||a.data==="$~"}function G_(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function X7(a,l){var d=a.ownerDocument;if(a.data==="$~")a._reactRetry=l;else if(a.data!=="$?"||d.readyState!=="loading")l();else{var g=function(){l(),d.removeEventListener("DOMContentLoaded",g)};d.addEventListener("DOMContentLoaded",g),a._reactRetry=g}}function $r(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return a}var Y_=null;function q5(a){a=a.nextSibling;for(var l=0;a;){if(a.nodeType===8){var d=a.data;if(d==="/$"||d==="/&"){if(l===0)return $r(a.nextSibling);l--}else d!=="$"&&d!=="$!"&&d!=="$?"&&d!=="$~"&&d!=="&"||l++}a=a.nextSibling}return null}function K5(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"){if(l===0)return a;l--}else d!=="/$"&&d!=="/&"||l++}a=a.previousSibling}return null}function W5(a,l,d){switch(l=dg(d),a){case"html":if(a=l.documentElement,!a)throw Error(s(452));return a;case"head":if(a=l.head,!a)throw Error(s(453));return a;case"body":if(a=l.body,!a)throw Error(s(454));return a;default:throw Error(s(451))}}function gd(a){for(var l=a.attributes;l.length;)a.removeAttributeNode(l[0]);Xb(a)}var zr=new Map,G5=new Set;function fg(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var fa=Y.d;Y.d={f:J7,r:Q7,D:e9,C:t9,L:n9,m:s9,X:i9,S:r9,M:a9};function J7(){var a=fa.f(),l=rg();return a||l}function Q7(a){var l=_c(a);l!==null&&l.tag===5&&l.type==="form"?hA(l):fa.r(a)}var Jc=typeof document>"u"?null:document;function Y5(a,l,d){var g=Jc;if(g&&typeof l=="string"&&l){var b=Or(l);b='link[rel="'+a+'"][href="'+b+'"]',typeof d=="string"&&(b+='[crossorigin="'+d+'"]'),G5.has(b)||(G5.add(b),a={rel:a,crossOrigin:d,href:l},g.querySelector(b)===null&&(l=g.createElement("link"),os(l,"link",a),Yn(l),g.head.appendChild(l)))}}function e9(a){fa.D(a),Y5("dns-prefetch",a,null)}function t9(a,l){fa.C(a,l),Y5("preconnect",a,l)}function n9(a,l,d){fa.L(a,l,d);var g=Jc;if(g&&a&&l){var b='link[rel="preload"][as="'+Or(l)+'"]';l==="image"&&d&&d.imageSrcSet?(b+='[imagesrcset="'+Or(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(b+='[imagesizes="'+Or(d.imageSizes)+'"]')):b+='[href="'+Or(a)+'"]';var w=b;switch(l){case"style":w=Qc(a);break;case"script":w=eu(a)}zr.has(w)||(a=p({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:a,as:l},d),zr.set(w,a),g.querySelector(b)!==null||l==="style"&&g.querySelector(yd(w))||l==="script"&&g.querySelector(vd(w))||(l=g.createElement("link"),os(l,"link",a),Yn(l),g.head.appendChild(l)))}}function s9(a,l){fa.m(a,l);var d=Jc;if(d&&a){var g=l&&typeof l.as=="string"?l.as:"script",b='link[rel="modulepreload"][as="'+Or(g)+'"][href="'+Or(a)+'"]',w=b;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=eu(a)}if(!zr.has(w)&&(a=p({rel:"modulepreload",href:a},l),zr.set(w,a),d.querySelector(b)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(vd(w)))return}g=d.createElement("link"),os(g,"link",a),Yn(g),d.head.appendChild(g)}}}function r9(a,l,d){fa.S(a,l,d);var g=Jc;if(g&&a){var b=xc(g).hoistableStyles,w=Qc(a);l=l||"default";var T=b.get(w);if(!T){var U={loading:0,preload:null};if(T=g.querySelector(yd(w)))U.loading=5;else{a=p({rel:"stylesheet",href:a,"data-precedence":l},d),(d=zr.get(w))&&Z_(a,d);var ee=T=g.createElement("link");Yn(ee),os(ee,"link",a),ee._p=new Promise(function(ce,ge){ee.onload=ce,ee.onerror=ge}),ee.addEventListener("load",function(){U.loading|=1}),ee.addEventListener("error",function(){U.loading|=2}),U.loading|=4,pg(T,l,g)}T={type:"stylesheet",instance:T,count:1,state:U},b.set(w,T)}}}function i9(a,l){fa.X(a,l);var d=Jc;if(d&&a){var g=xc(d).hoistableScripts,b=eu(a),w=g.get(b);w||(w=d.querySelector(vd(b)),w||(a=p({src:a,async:!0},l),(l=zr.get(b))&&X_(a,l),w=d.createElement("script"),Yn(w),os(w,"link",a),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},g.set(b,w))}}function a9(a,l){fa.M(a,l);var d=Jc;if(d&&a){var g=xc(d).hoistableScripts,b=eu(a),w=g.get(b);w||(w=d.querySelector(vd(b)),w||(a=p({src:a,async:!0,type:"module"},l),(l=zr.get(b))&&X_(a,l),w=d.createElement("script"),Yn(w),os(w,"link",a),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},g.set(b,w))}}function Z5(a,l,d,g){var b=(b=X.current)?fg(b):null;if(!b)throw Error(s(446));switch(a){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=Qc(d.href),d=xc(b).hoistableStyles,g=d.get(l),g||(g={type:"style",instance:null,count:0,state:null},d.set(l,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){a=Qc(d.href);var w=xc(b).hoistableStyles,T=w.get(a);if(T||(b=b.ownerDocument||b,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(a,T),(w=b.querySelector(yd(a)))&&!w._p&&(T.instance=w,T.state.loading=5),zr.has(a)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},zr.set(a,d),w||o9(b,a,d,T.state))),l&&g===null)throw Error(s(528,""));return T}if(l&&g!==null)throw Error(s(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=eu(d),d=xc(b).hoistableScripts,g=d.get(l),g||(g={type:"script",instance:null,count:0,state:null},d.set(l,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,a))}}function Qc(a){return'href="'+Or(a)+'"'}function yd(a){return'link[rel="stylesheet"]['+a+"]"}function X5(a){return p({},a,{"data-precedence":a.precedence,precedence:null})}function o9(a,l,d,g){a.querySelector('link[rel="preload"][as="style"]['+l+"]")?g.loading=1:(l=a.createElement("link"),g.preload=l,l.addEventListener("load",function(){return g.loading|=1}),l.addEventListener("error",function(){return g.loading|=2}),os(l,"link",d),Yn(l),a.head.appendChild(l))}function eu(a){return'[src="'+Or(a)+'"]'}function vd(a){return"script[async]"+a}function J5(a,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var g=a.querySelector('style[data-href~="'+Or(d.href)+'"]');if(g)return l.instance=g,Yn(g),g;var b=p({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return g=(a.ownerDocument||a).createElement("style"),Yn(g),os(g,"style",b),pg(g,d.precedence,a),l.instance=g;case"stylesheet":b=Qc(d.href);var w=a.querySelector(yd(b));if(w)return l.state.loading|=4,l.instance=w,Yn(w),w;g=X5(d),(b=zr.get(b))&&Z_(g,b),w=(a.ownerDocument||a).createElement("link"),Yn(w);var T=w;return T._p=new Promise(function(U,ee){T.onload=U,T.onerror=ee}),os(w,"link",g),l.state.loading|=4,pg(w,d.precedence,a),l.instance=w;case"script":return w=eu(d.src),(b=a.querySelector(vd(w)))?(l.instance=b,Yn(b),b):(g=d,(b=zr.get(w))&&(g=p({},d),X_(g,b)),a=a.ownerDocument||a,b=a.createElement("script"),Yn(b),os(b,"link",g),a.head.appendChild(b),l.instance=b);case"void":return null;default:throw Error(s(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(g=l.instance,l.state.loading|=4,pg(g,d.precedence,a));return l.instance}function pg(a,l,d){for(var g=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=g.length?g[g.length-1]:null,w=b,T=0;T<g.length;T++){var U=g[T];if(U.dataset.precedence===l)w=U;else if(w!==b)break}w?w.parentNode.insertBefore(a,w.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(a,l.firstChild))}function Z_(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.title==null&&(a.title=l.title)}function X_(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.integrity==null&&(a.integrity=l.integrity)}var mg=null;function Q5(a,l,d){if(mg===null){var g=new Map,b=mg=new Map;b.set(d,g)}else b=mg,g=b.get(d),g||(g=new Map,b.set(d,g));if(g.has(a))return g;for(g.set(a,null),d=d.getElementsByTagName(a),b=0;b<d.length;b++){var w=d[b];if(!(w[Dh]||w[ss]||a==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var T=w.getAttribute(l)||"";T=a+T;var U=g.get(T);U?U.push(w):g.set(T,[w])}}return g}function e3(a,l,d){a=a.ownerDocument||a,a.head.insertBefore(d,l==="title"?a.querySelector("head > title"):null)}function l9(a,l,d){if(d===1||l.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;return l.rel==="stylesheet"?(a=l.disabled,typeof l.precedence=="string"&&a==null):!0;case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function t3(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function c9(a,l,d,g){if(d.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var b=Qc(g.href),w=l.querySelector(yd(b));if(w){l=w._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(a.count++,a=gg.bind(a),l.then(a,a)),d.state.loading|=4,d.instance=w,Yn(w);return}w=l.ownerDocument||l,g=X5(g),(b=zr.get(b))&&Z_(g,b),w=w.createElement("link"),Yn(w);var T=w;T._p=new Promise(function(U,ee){T.onload=U,T.onerror=ee}),os(w,"link",g),d.instance=w}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(d,l),(l=d.state.preload)&&(d.state.loading&3)===0&&(a.count++,d=gg.bind(a),l.addEventListener("load",d),l.addEventListener("error",d))}}var J_=0;function u9(a,l){return a.stylesheets&&a.count===0&&vg(a,a.stylesheets),0<a.count||0<a.imgCount?function(d){var g=setTimeout(function(){if(a.stylesheets&&vg(a,a.stylesheets),a.unsuspend){var w=a.unsuspend;a.unsuspend=null,w()}},6e4+l);0<a.imgBytes&&J_===0&&(J_=62500*V7());var b=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&vg(a,a.stylesheets),a.unsuspend)){var w=a.unsuspend;a.unsuspend=null,w()}},(a.imgBytes>J_?50:800)+l);return a.unsuspend=d,function(){a.unsuspend=null,clearTimeout(g),clearTimeout(b)}}:null}function gg(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)vg(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var yg=null;function vg(a,l){a.stylesheets=null,a.unsuspend!==null&&(a.count++,yg=new Map,l.forEach(h9,a),yg=null,gg.call(a))}function h9(a,l){if(!(l.state.loading&4)){var d=yg.get(a);if(d)var g=d.get(null);else{d=new Map,yg.set(a,d);for(var b=a.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<b.length;w++){var T=b[w];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(d.set(T.dataset.precedence,T),g=T)}g&&d.set(null,g)}b=l.instance,T=b.getAttribute("data-precedence"),w=d.get(T)||g,w===g&&d.set(null,b),d.set(T,b),this.count++,g=gg.bind(this),b.addEventListener("load",g),b.addEventListener("error",g),w?w.parentNode.insertBefore(b,w.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(b,a.firstChild)),l.state.loading|=4}}var bd={$$typeof:N,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function d9(a,l,d,g,b,w,T,U,ee){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yc(0),this.hiddenUpdates=yc(null),this.identifierPrefix=g,this.onUncaughtError=b,this.onCaughtError=w,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ee,this.incompleteTransitions=new Map}function n3(a,l,d,g,b,w,T,U,ee,ce,ge,ve){return a=new d9(a,l,d,T,ee,ce,ge,ve,U),l=1,w===!0&&(l|=24),w=or(3,null,null,l),a.current=w,w.stateNode=a,l=R1(),l.refCount++,a.pooledCache=l,l.refCount++,w.memoizedState={element:g,isDehydrated:d,cache:l},B1(w),a}function s3(a){return a?(a=Rc,a):Rc}function r3(a,l,d,g,b,w){b=s3(b),g.context===null?g.context=b:g.pendingContext=b,g=Ga(l),g.payload={element:d},w=w===void 0?null:w,w!==null&&(g.callback=w),d=Ya(a,g,l),d!==null&&(Gs(d,a,l),Xh(d,a,l))}function i3(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<l?d:l}}function Q_(a,l){i3(a,l),(a=a.alternate)&&i3(a,l)}function a3(a){if(a.tag===13||a.tag===31){var l=Jo(a,67108864);l!==null&&Gs(l,a,67108864),Q_(a,67108864)}}function o3(a){if(a.tag===13||a.tag===31){var l=dr();l=Gb(l);var d=Jo(a,l);d!==null&&Gs(d,a,l),Q_(a,l)}}var bg=!0;function f9(a,l,d,g){var b=I.T;I.T=null;var w=Y.p;try{Y.p=2,ex(a,l,d,g)}finally{Y.p=w,I.T=b}}function p9(a,l,d,g){var b=I.T;I.T=null;var w=Y.p;try{Y.p=8,ex(a,l,d,g)}finally{Y.p=w,I.T=b}}function ex(a,l,d,g){if(bg){var b=tx(g);if(b===null)z_(a,l,g,_g,d),c3(a,g);else if(g9(b,a,l,d,g))g.stopPropagation();else if(c3(a,g),l&4&&-1<m9.indexOf(a)){for(;b!==null;){var w=_c(b);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var T=He(w.pendingLanes);if(T!==0){var U=w;for(U.pendingLanes|=2,U.entangledLanes|=2;T;){var ee=1<<31-me(T);U.entanglements[1]|=ee,T&=~ee}ki(w),(zt&6)===0&&(ng=tt()+500,fd(0))}}break;case 31:case 13:U=Jo(w,2),U!==null&&Gs(U,w,2),rg(),Q_(w,2)}if(w=tx(g),w===null&&z_(a,l,g,_g,d),w===b)break;b=w}b!==null&&g.stopPropagation()}else z_(a,l,g,null,d)}}function tx(a){return a=s1(a),nx(a)}var _g=null;function nx(a){if(_g=null,a=bc(a),a!==null){var l=i(a);if(l===null)a=null;else{var d=l.tag;if(d===13){if(a=o(l),a!==null)return a;a=null}else if(d===31){if(a=c(l),a!==null)return a;a=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null)}}return _g=a,null}function l3(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Mt()){case fe:return 2;case xe:return 8;case Ge:case it:return 32;case pt:return 268435456;default:return 32}default:return 32}}var sx=!1,ao=null,oo=null,lo=null,_d=new Map,xd=new Map,co=[],m9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function c3(a,l){switch(a){case"focusin":case"focusout":ao=null;break;case"dragenter":case"dragleave":oo=null;break;case"mouseover":case"mouseout":lo=null;break;case"pointerover":case"pointerout":_d.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":xd.delete(l.pointerId)}}function wd(a,l,d,g,b,w){return a===null||a.nativeEvent!==w?(a={blockedOn:l,domEventName:d,eventSystemFlags:g,nativeEvent:w,targetContainers:[b]},l!==null&&(l=_c(l),l!==null&&a3(l)),a):(a.eventSystemFlags|=g,l=a.targetContainers,b!==null&&l.indexOf(b)===-1&&l.push(b),a)}function g9(a,l,d,g,b){switch(l){case"focusin":return ao=wd(ao,a,l,d,g,b),!0;case"dragenter":return oo=wd(oo,a,l,d,g,b),!0;case"mouseover":return lo=wd(lo,a,l,d,g,b),!0;case"pointerover":var w=b.pointerId;return _d.set(w,wd(_d.get(w)||null,a,l,d,g,b)),!0;case"gotpointercapture":return w=b.pointerId,xd.set(w,wd(xd.get(w)||null,a,l,d,g,b)),!0}return!1}function u3(a){var l=bc(a.target);if(l!==null){var d=i(l);if(d!==null){if(l=d.tag,l===13){if(l=o(d),l!==null){a.blockedOn=l,k4(a.priority,function(){o3(d)});return}}else if(l===31){if(l=c(d),l!==null){a.blockedOn=l,k4(a.priority,function(){o3(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function xg(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var d=tx(a.nativeEvent);if(d===null){d=a.nativeEvent;var g=new d.constructor(d.type,d);n1=g,d.target.dispatchEvent(g),n1=null}else return l=_c(d),l!==null&&a3(l),a.blockedOn=d,!1;l.shift()}return!0}function h3(a,l,d){xg(a)&&d.delete(l)}function y9(){sx=!1,ao!==null&&xg(ao)&&(ao=null),oo!==null&&xg(oo)&&(oo=null),lo!==null&&xg(lo)&&(lo=null),_d.forEach(h3),xd.forEach(h3)}function wg(a,l){a.blockedOn===l&&(a.blockedOn=null,sx||(sx=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,y9)))}var Sg=null;function d3(a){Sg!==a&&(Sg=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Sg===a&&(Sg=null);for(var l=0;l<a.length;l+=3){var d=a[l],g=a[l+1],b=a[l+2];if(typeof g!="function"){if(nx(g||d)===null)continue;break}var w=_c(d);w!==null&&(a.splice(l,3),l-=3,t_(w,{pending:!0,data:b,method:d.method,action:g},g,b))}}))}function tu(a){function l(ee){return wg(ee,a)}ao!==null&&wg(ao,a),oo!==null&&wg(oo,a),lo!==null&&wg(lo,a),_d.forEach(l),xd.forEach(l);for(var d=0;d<co.length;d++){var g=co[d];g.blockedOn===a&&(g.blockedOn=null)}for(;0<co.length&&(d=co[0],d.blockedOn===null);)u3(d),d.blockedOn===null&&co.shift();if(d=(a.ownerDocument||a).$$reactFormReplay,d!=null)for(g=0;g<d.length;g+=3){var b=d[g],w=d[g+1],T=b[Hs]||null;if(typeof w=="function")T||d3(d);else if(T){var U=null;if(w&&w.hasAttribute("formAction")){if(b=w,T=w[Hs]||null)U=T.formAction;else if(nx(b)!==null)continue}else U=T.action;typeof U=="function"?d[g+1]=U:(d.splice(g,3),g-=3),d3(d)}}}function f3(){function a(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(T){return b=T})},focusReset:"manual",scroll:"manual"})}function l(){b!==null&&(b(),b=null),g||setTimeout(d,20)}function d(){if(!g&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,b=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(d,100),function(){g=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),b!==null&&(b(),b=null)}}}function rx(a){this._internalRoot=a}kg.prototype.render=rx.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(s(409));var d=l.current,g=dr();r3(d,g,a,l,null,null)},kg.prototype.unmount=rx.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;r3(a.current,2,null,a,null,null),rg(),l[vc]=null}};function kg(a){this._internalRoot=a}kg.prototype.unstable_scheduleHydration=function(a){if(a){var l=S4();a={blockedOn:null,target:a,priority:l};for(var d=0;d<co.length&&l!==0&&l<co[d].priority;d++);co.splice(d,0,a),d===0&&u3(a)}};var p3=e.version;if(p3!=="19.2.3")throw Error(s(527,p3,"19.2.3"));Y.findDOMNode=function(a){var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(s(188)):(a=Object.keys(a).join(","),Error(s(268,a)));return a=h(l),a=a!==null?m(a):null,a=a===null?null:a.stateNode,a};var v9={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cg.isDisabled&&Cg.supportsFiber)try{oe=Cg.inject(v9),de=Cg}catch{}}return kd.createRoot=function(a,l){if(!r(a))throw Error(s(299));var d=!1,g="",b=xA,w=wA,T=SA;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),l=n3(a,1,!1,null,null,d,g,null,b,w,T,f3),a[vc]=l.current,$_(a),new rx(l)},kd.hydrateRoot=function(a,l,d){if(!r(a))throw Error(s(299));var g=!1,b="",w=xA,T=wA,U=SA,ee=null;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onUncaughtError!==void 0&&(w=d.onUncaughtError),d.onCaughtError!==void 0&&(T=d.onCaughtError),d.onRecoverableError!==void 0&&(U=d.onRecoverableError),d.formState!==void 0&&(ee=d.formState)),l=n3(a,1,!0,l,d??null,g,b,ee,w,T,U,f3),l.context=s3(null),d=l.current,g=dr(),g=Gb(g),b=Ga(g),b.callback=null,Ya(d,b,g),d=g,l.current.lanes=d,Wo(l,d),ki(l),a[vc]=l.current,$_(a),new kg(l)},kd.version="19.2.3",kd}var C3;function E9(){if(C3)return ox.exports;C3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ox.exports=N9(),ox.exports}var A9=E9();const Hw=new WeakMap,j9=new WeakMap,H0={current:[]};let hx=!1,Rf=0;const Kd=new Set,Ng=new Map;function o6(t){for(const e of t){if(H0.current.includes(e))continue;H0.current.push(e),e.recompute();const n=j9.get(e);if(n)for(const s of n){const r=Hw.get(s);r?.length&&o6(r)}}}function T9(t){const e={prevVal:t.prevState,currentVal:t.state};for(const n of t.listeners)n(e)}function R9(t){const e={prevVal:t.prevState,currentVal:t.state};for(const n of t.listeners)n(e)}function l6(t){if(Rf>0&&!Ng.has(t)&&Ng.set(t,t.prevState),Kd.add(t),!(Rf>0)&&!hx)try{for(hx=!0;Kd.size>0;){const e=Array.from(Kd);Kd.clear();for(const n of e){const s=Ng.get(n)??n.prevState;n.prevState=s,T9(n)}for(const n of e){const s=Hw.get(n);s&&(H0.current.push(n),o6(s))}for(const n of e){const s=Hw.get(n);if(s)for(const r of s)R9(r)}}}finally{hx=!1,H0.current=[],Ng.clear()}}function Of(t){Rf++;try{t()}finally{if(Rf--,Rf===0){const e=Kd.values().next().value;e&&l6(e)}}}function O9(t){return typeof t=="function"}class M9{constructor(e,n){this.listeners=new Set,this.subscribe=s=>{var r,i;this.listeners.add(s);const o=(i=(r=this.options)==null?void 0:r.onSubscribe)==null?void 0:i.call(r,s,this);return()=>{this.listeners.delete(s),o?.()}},this.prevState=e,this.state=e,this.options=n}setState(e){var n,s,r;this.prevState=this.state,(n=this.options)!=null&&n.updateFn?this.state=this.options.updateFn(this.prevState)(e):O9(e)?this.state=e(this.prevState):this.state=e,(r=(s=this.options)==null?void 0:s.onUpdate)==null||r.call(s),l6(this)}}const Ao="__TSR_index",N3="popstate",E3="beforeunload";function D9(t){let e=t.getLocation();const n=new Set,s=o=>{e=t.getLocation(),n.forEach(c=>c({location:e,action:o}))},r=o=>{t.notifyOnIndexChange??!0?s(o):e=t.getLocation()},i=async({task:o,navigateOpts:c,...u})=>{if(c?.ignoreBlocker??!1){o();return}const m=t.getBlockers?.()??[],p=u.type==="PUSH"||u.type==="REPLACE";if(typeof document<"u"&&m.length&&p)for(const y of m){const v=F0(u.path,u.state);if(await y.blockerFn({currentLocation:e,nextLocation:v,action:u.type})){t.onBlocked?.();return}}o()};return{get location(){return e},get length(){return t.getLength()},subscribers:n,subscribe:o=>(n.add(o),()=>{n.delete(o)}),push:(o,c,u)=>{const h=e.state[Ao];c=A3(h+1,c),i({task:()=>{t.pushState(o,c),s({type:"PUSH"})},navigateOpts:u,type:"PUSH",path:o,state:c})},replace:(o,c,u)=>{const h=e.state[Ao];c=A3(h,c),i({task:()=>{t.replaceState(o,c),s({type:"REPLACE"})},navigateOpts:u,type:"REPLACE",path:o,state:c})},go:(o,c)=>{i({task:()=>{t.go(o),r({type:"GO",index:o})},navigateOpts:c,type:"GO"})},back:o=>{i({task:()=>{t.back(o?.ignoreBlocker??!1),r({type:"BACK"})},navigateOpts:o,type:"BACK"})},forward:o=>{i({task:()=>{t.forward(o?.ignoreBlocker??!1),r({type:"FORWARD"})},navigateOpts:o,type:"FORWARD"})},canGoBack:()=>e.state[Ao]!==0,createHref:o=>t.createHref(o),block:o=>{if(!t.setBlockers)return()=>{};const c=t.getBlockers?.()??[];return t.setBlockers([...c,o]),()=>{const u=t.getBlockers?.()??[];t.setBlockers?.(u.filter(h=>h!==o))}},flush:()=>t.flush?.(),destroy:()=>t.destroy?.(),notify:s}}function A3(t,e){e||(e={});const n=I2();return{...e,key:n,__TSR_key:n,[Ao]:t}}function B9(t){const e=typeof document<"u"?window:void 0,n=e.history.pushState,s=e.history.replaceState;let r=[];const i=()=>r,o=B=>r=B,c=(B=>B),u=(()=>F0(`${e.location.pathname}${e.location.search}${e.location.hash}`,e.history.state));if(!e.history.state?.__TSR_key&&!e.history.state?.key){const B=I2();e.history.replaceState({[Ao]:0,key:B,__TSR_key:B},"")}let h=u(),m,p=!1,y=!1,v=!1,x=!1;const _=()=>h;let S,k;const C=()=>{S&&(D._ignoreSubscribers=!0,(S.isPush?e.history.pushState:e.history.replaceState)(S.state,"",S.href),D._ignoreSubscribers=!1,S=void 0,k=void 0,m=void 0)},N=(B,q,P)=>{const G=c(q);k||(m=h),h=F0(q,P),S={href:G,state:P,isPush:S?.isPush||B==="push"},k||(k=Promise.resolve().then(()=>C()))},R=B=>{h=u(),D.notify({type:B})},O=async()=>{if(y){y=!1;return}const B=u(),q=B.state[Ao]-h.state[Ao],P=q===1,G=q===-1,z=!P&&!G||p;p=!1;const K=z?"GO":G?"BACK":"FORWARD",Z=z?{type:"GO",index:q}:{type:G?"BACK":"FORWARD"};if(v)v=!1;else{const W=i();if(typeof document<"u"&&W.length){for(const I of W)if(await I.blockerFn({currentLocation:h,nextLocation:B,action:K})){y=!0,e.history.go(1),D.notify(Z);return}}}h=u(),D.notify(Z)},E=B=>{if(x){x=!1;return}let q=!1;const P=i();if(typeof document<"u"&&P.length)for(const G of P){const z=G.enableBeforeUnload??!0;if(z===!0){q=!0;break}if(typeof z=="function"&&z()===!0){q=!0;break}}if(q)return B.preventDefault(),B.returnValue=""},D=D9({getLocation:_,getLength:()=>e.history.length,pushState:(B,q)=>N("push",B,q),replaceState:(B,q)=>N("replace",B,q),back:B=>(B&&(v=!0),x=!0,e.history.back()),forward:B=>{B&&(v=!0),x=!0,e.history.forward()},go:B=>{p=!0,e.history.go(B)},createHref:B=>c(B),flush:C,destroy:()=>{e.history.pushState=n,e.history.replaceState=s,e.removeEventListener(E3,E,{capture:!0}),e.removeEventListener(N3,O)},onBlocked:()=>{m&&h!==m&&(h=m)},getBlockers:i,setBlockers:o,notifyOnIndexChange:!1});return e.addEventListener(E3,E,{capture:!0}),e.addEventListener(N3,O),e.history.pushState=function(...B){const q=n.apply(e.history,B);return D._ignoreSubscribers||R("PUSH"),q},e.history.replaceState=function(...B){const q=s.apply(e.history,B);return D._ignoreSubscribers||R("REPLACE"),q},D}function F0(t,e){const n=t.indexOf("#"),s=t.indexOf("?"),r=I2();return{href:t,pathname:t.substring(0,n>0?s>0?Math.min(n,s):n:s>0?s:t.length),hash:n>-1?t.substring(n):"",search:s>-1?t.slice(s,n===-1?void 0:n):"",state:e||{[Ao]:0,key:r,__TSR_key:r}}}function I2(){return(Math.random()+1).toString(36).substring(7)}function V0(t){return t[t.length-1]}function L9(t){return typeof t=="function"}function xo(t,e){return L9(t)?t(e):t}const I9=Object.prototype.hasOwnProperty;function Fr(t,e){if(t===e)return t;const n=e,s=R3(t)&&R3(n);if(!s&&!(q0(t)&&q0(n)))return n;const r=s?t:j3(t);if(!r)return n;const i=s?n:j3(n);if(!i)return n;const o=r.length,c=i.length,u=s?new Array(c):{};let h=0;for(let m=0;m<c;m++){const p=s?m:i[m],y=t[p],v=n[p];if(y===v){u[p]=y,(s?m<o:I9.call(t,p))&&h++;continue}if(y===null||v===null||typeof y!="object"||typeof v!="object"){u[p]=v;continue}const x=Fr(y,v);u[p]=x,x===y&&h++}return o===c&&h===o?t:u}function j3(t){const e=[],n=Object.getOwnPropertyNames(t);for(const r of n){if(!Object.prototype.propertyIsEnumerable.call(t,r))return!1;e.push(r)}const s=Object.getOwnPropertySymbols(t);for(const r of s){if(!Object.prototype.propertyIsEnumerable.call(t,r))return!1;e.push(r)}return e}function q0(t){if(!T3(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!T3(n)||!n.hasOwnProperty("isPrototypeOf"))}function T3(t){return Object.prototype.toString.call(t)==="[object Object]"}function R3(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Tl(t,e,n){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(let s=0,r=t.length;s<r;s++)if(!Tl(t[s],e[s],n))return!1;return!0}if(q0(t)&&q0(e)){const s=n?.ignoreUndefined??!0;if(n?.partial){for(const o in e)if((!s||e[o]!==void 0)&&!Tl(t[o],e[o],n))return!1;return!0}let r=0;if(!s)r=Object.keys(t).length;else for(const o in t)t[o]!==void 0&&r++;let i=0;for(const o in e)if((!s||e[o]!==void 0)&&(i++,i>r||!Tl(t[o],e[o],n)))return!1;return r===i}return!1}function $u(t){let e,n;const s=new Promise((r,i)=>{e=r,n=i});return s.status="pending",s.resolve=r=>{s.status="resolved",s.value=r,e(r),t?.(r)},s.reject=r=>{s.status="rejected",n(r)},s}function jo(t){return!!(t&&typeof t=="object"&&typeof t.then=="function")}function O3(t){try{return decodeURI(t)}catch{return t.replaceAll(/%[0-9A-F]{2}/gi,e=>{try{return decodeURI(e)}catch{return e}})}}function M3(t,e){if(!t)return t;const n=/%25|%5C/gi;let s=0,r="",i;for(;(i=n.exec(t))!==null;)r+=O3(t.slice(s,i.index))+i[0],s=n.lastIndex;return r+O3(s?t.slice(s):t)}var P9="Invariant failed";function Ca(t,e){if(!t)throw new Error(P9)}function K0(t){const e=new Map;let n,s;const r=i=>{i.next&&(i.prev?(i.prev.next=i.next,i.next.prev=i.prev,i.next=void 0,s&&(s.next=i,i.prev=s)):(i.next.prev=void 0,n=i.next,i.next=void 0,s&&(i.prev=s,s.next=i)),s=i)};return{get(i){const o=e.get(i);if(o)return r(o),o.value},set(i,o){if(e.size>=t&&n){const u=n;e.delete(u.key),u.next&&(n=u.next,u.next.prev=void 0),u===s&&(s=void 0)}const c=e.get(i);if(c)c.value=o,r(c);else{const u={key:i,value:o,prev:s};s&&(s.next=u),s=u,n||(n=u),e.set(i,u)}},clear(){e.clear(),n=void 0,s=void 0}}}const zu=0,Pl=1,$l=2,ep=3,xu=4,$9=/^([^{]*)\{\$([a-zA-Z_$][a-zA-Z0-9_$]*)\}([^}]*)$/,z9=/^([^{]*)\{-\$([a-zA-Z_$][a-zA-Z0-9_$]*)\}([^}]*)$/,U9=/^([^{]*)\{\$\}([^}]*)$/;function P2(t,e,n=new Uint16Array(6)){const s=t.indexOf("/",e),r=s===-1?t.length:s,i=t.substring(e,r);if(!i||!i.includes("$"))return n[0]=zu,n[1]=e,n[2]=e,n[3]=r,n[4]=r,n[5]=r,n;if(i==="$"){const h=t.length;return n[0]=$l,n[1]=e,n[2]=e,n[3]=h,n[4]=h,n[5]=h,n}if(i.charCodeAt(0)===36)return n[0]=Pl,n[1]=e,n[2]=e+1,n[3]=r,n[4]=r,n[5]=r,n;const o=i.match(U9);if(o){const m=o[1].length;return n[0]=$l,n[1]=e+m,n[2]=e+m+1,n[3]=e+m+2,n[4]=e+m+3,n[5]=t.length,n}const c=i.match(z9);if(c){const h=c[1],m=c[2],p=c[3],y=h.length;return n[0]=ep,n[1]=e+y,n[2]=e+y+3,n[3]=e+y+3+m.length,n[4]=r-p.length,n[5]=r,n}const u=i.match($9);if(u){const h=u[1],m=u[2],p=u[3],y=h.length;return n[0]=Pl,n[1]=e+y,n[2]=e+y+2,n[3]=e+y+2+m.length,n[4]=r-p.length,n[5]=r,n}return n[0]=zu,n[1]=e,n[2]=e,n[3]=r,n[4]=r,n[5]=r,n}function uv(t,e,n,s,r,i,o){o?.(n);let c=s;{const u=n.fullPath??n.from,h=u.length,m=n.options?.caseSensitive??t;for(;c<h;){const y=P2(u,c,e);let v;const x=c,_=y[5];switch(c=_+1,i++,y[0]){case zu:{const k=u.substring(y[2],y[3]);if(m){const C=r.static?.get(k);if(C)v=C;else{r.static??=new Map;const N=Ru(n.fullPath??n.from);N.parent=r,N.depth=i,v=N,r.static.set(k,N)}}else{const C=k.toLowerCase(),N=r.staticInsensitive?.get(C);if(N)v=N;else{r.staticInsensitive??=new Map;const R=Ru(n.fullPath??n.from);R.parent=r,R.depth=i,v=R,r.staticInsensitive.set(C,R)}}break}case Pl:{const k=u.substring(x,y[1]),C=u.substring(y[4],_),N=m&&!!(k||C),R=k?N?k:k.toLowerCase():void 0,O=C?N?C:C.toLowerCase():void 0,E=r.dynamic?.find(D=>D.caseSensitive===N&&D.prefix===R&&D.suffix===O);if(E)v=E;else{const D=fx(Pl,n.fullPath??n.from,N,R,O);v=D,D.depth=i,D.parent=r,r.dynamic??=[],r.dynamic.push(D)}break}case ep:{const k=u.substring(x,y[1]),C=u.substring(y[4],_),N=m&&!!(k||C),R=k?N?k:k.toLowerCase():void 0,O=C?N?C:C.toLowerCase():void 0,E=r.optional?.find(D=>D.caseSensitive===N&&D.prefix===R&&D.suffix===O);if(E)v=E;else{const D=fx(ep,n.fullPath??n.from,N,R,O);v=D,D.parent=r,D.depth=i,r.optional??=[],r.optional.push(D)}break}case $l:{const k=u.substring(x,y[1]),C=u.substring(y[4],_),N=m&&!!(k||C),R=k?N?k:k.toLowerCase():void 0,O=C?N?C:C.toLowerCase():void 0,E=fx($l,n.fullPath??n.from,N,R,O);v=E,E.parent=r,E.depth=i,r.wildcard??=[],r.wildcard.push(E)}}r=v}const p=(n.path||!n.children)&&!n.isRoot;if(p&&u.endsWith("/")){const y=Ru(n.fullPath??n.from);y.kind=xu,y.parent=r,i++,y.depth=i,r.index=y,r=y}p&&!r.route&&(r.route=n,r.fullPath=n.fullPath??n.from)}if(n.children)for(const u of n.children)uv(t,e,u,c,r,i,o)}function dx(t,e){if(t.prefix&&e.prefix&&t.prefix!==e.prefix){if(t.prefix.startsWith(e.prefix))return-1;if(e.prefix.startsWith(t.prefix))return 1}if(t.suffix&&e.suffix&&t.suffix!==e.suffix){if(t.suffix.endsWith(e.suffix))return-1;if(e.suffix.endsWith(t.suffix))return 1}return t.prefix&&!e.prefix?-1:!t.prefix&&e.prefix?1:t.suffix&&!e.suffix?-1:!t.suffix&&e.suffix?1:t.caseSensitive&&!e.caseSensitive?-1:!t.caseSensitive&&e.caseSensitive?1:0}function vl(t){if(t.static)for(const e of t.static.values())vl(e);if(t.staticInsensitive)for(const e of t.staticInsensitive.values())vl(e);if(t.dynamic?.length){t.dynamic.sort(dx);for(const e of t.dynamic)vl(e)}if(t.optional?.length){t.optional.sort(dx);for(const e of t.optional)vl(e)}if(t.wildcard?.length){t.wildcard.sort(dx);for(const e of t.wildcard)vl(e)}}function Ru(t){return{kind:zu,depth:0,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:t,parent:null}}function fx(t,e,n,s,r){return{kind:t,depth:0,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:e,parent:null,caseSensitive:n,prefix:s,suffix:r}}function H9(t,e){const n=Ru("/"),s=new Uint16Array(6);for(const r of t)uv(!1,s,r,1,n,0);vl(n),e.masksTree=n,e.flatCache=K0(1e3)}function F9(t,e){t||="/";const n=e.flatCache.get(t);if(n)return n;const s=$2(t,e.masksTree);return e.flatCache.set(t,s),s}function V9(t,e,n,s,r){t||="/",s||="/";const i=e?`case\0${t}`:t;let o=r.singleCache.get(i);if(!o){o=Ru("/");const c=new Uint16Array(6);uv(e,c,{from:t},1,o,0),r.singleCache.set(i,o)}return $2(s,o,n)}function q9(t,e,n=!1){const s=n?t:`nofuzz\0${t}`,r=e.matchCache.get(s);if(r!==void 0)return r;t||="/";const i=$2(t,e.segmentTree,n);return i&&(i.branch=Y9(i.route)),e.matchCache.set(s,i),i}function K9(t){return t==="/"?t:t.replace(/\/{1,}$/,"")}function W9(t,e=!1,n){const s=Ru(t.fullPath),r=new Uint16Array(6),i={},o={};let c=0;return uv(e,r,t,1,s,0,h=>{if(n?.(h,c),Ca(!(h.id in i),`Duplicate routes found with id: ${String(h.id)}`),i[h.id]=h,c!==0&&h.path){const m=K9(h.fullPath);(!o[m]||h.fullPath.endsWith("/"))&&(o[m]=h)}c++}),vl(s),{processedTree:{segmentTree:s,singleCache:K0(1e3),matchCache:K0(1e3),flatCache:null,masksTree:null},routesById:i,routesByPath:o}}function $2(t,e,n=!1){const s=t.split("/"),r=X9(t,s,e,n);if(!r)return null;const i=G9(t,s,r);return"**"in r&&(i["**"]=r["**"]),{route:r.node.route,params:i}}function G9(t,e,n){const s=Z9(n.node);let r=null;const i={};for(let o=0,c=0,u=0;c<s.length;o++,c++,u++){const h=s[c],m=e[o],p=u;if(m&&(u+=m.length),h.kind===Pl){r??=n.node.fullPath.split("/");const y=r[c],v=h.prefix?.length??0;if(y.charCodeAt(v)===123){const _=h.suffix?.length??0,S=y.substring(v+2,y.length-_-1),k=m.substring(v,m.length-_);i[S]=decodeURIComponent(k)}else{const _=y.substring(1);i[_]=decodeURIComponent(m)}}else if(h.kind===ep){if(n.skipped&1<<c){o--;continue}r??=n.node.fullPath.split("/");const y=r[c],v=h.prefix?.length??0,x=h.suffix?.length??0,_=y.substring(v+3,y.length-x-1),S=h.suffix||h.prefix?m.substring(v,m.length-x):m;S&&(i[_]=decodeURIComponent(S))}else if(h.kind===$l){const y=h,v=t.substring(p+(y.prefix?.length??0),t.length-(y.suffix?.length??0)),x=decodeURIComponent(v);i["*"]=x,i._splat=x;break}}return i}function Y9(t){const e=[t];for(;t.parentRoute;)t=t.parentRoute,e.push(t);return e.reverse(),e}function Z9(t){const e=Array(t.depth+1);do e[t.depth]=t,t=t.parent;while(t);return e}function X9(t,e,n,s){if(t==="/"&&n.index)return{node:n.index,skipped:0};const r=!V0(e),i=r&&t!=="/",o=e.length-(r?1:0),c=[{node:n,index:1,skipped:0,depth:1,statics:1,dynamics:0,optionals:0}];let u=null,h=null,m=null;for(;c.length;){const p=c.pop();let{node:y,index:v,skipped:x,depth:_,statics:S,dynamics:k,optionals:C}=p;s&&y.route&&y.kind!==xu&&Cd(h,p)&&(h=p);const N=v===o;if(N&&(y.route&&!i&&Cd(m,p)&&(m=p),!y.optional&&!y.wildcard&&!y.index))continue;const R=N?void 0:e[v];let O;if(N&&y.index){const E={node:y.index,index:v,skipped:x,depth:_+1,statics:S,dynamics:k,optionals:C};if(S===o&&!k&&!C&&!x)return E;Cd(m,E)&&(m=E)}if(y.wildcard&&Cd(u,p))for(const E of y.wildcard){const{prefix:D,suffix:B}=E;if(!(D&&(N||!(E.caseSensitive?R:O??=R.toLowerCase()).startsWith(D)))){if(B){if(N)continue;const q=e.slice(v).join("/").slice(-B.length);if((E.caseSensitive?q:q.toLowerCase())!==B)continue}u={node:E,index:o,skipped:x,depth:_,statics:S,dynamics:k,optionals:C};break}}if(y.optional){const E=x|1<<_,D=_+1;for(let B=y.optional.length-1;B>=0;B--){const q=y.optional[B];c.push({node:q,index:v,skipped:E,depth:D,statics:S,dynamics:k,optionals:C})}if(!N)for(let B=y.optional.length-1;B>=0;B--){const q=y.optional[B],{prefix:P,suffix:G}=q;if(P||G){const z=q.caseSensitive?R:O??=R.toLowerCase();if(P&&!z.startsWith(P)||G&&!z.endsWith(G))continue}c.push({node:q,index:v+1,skipped:x,depth:D,statics:S,dynamics:k,optionals:C+1})}}if(!N&&y.dynamic&&R)for(let E=y.dynamic.length-1;E>=0;E--){const D=y.dynamic[E],{prefix:B,suffix:q}=D;if(B||q){const P=D.caseSensitive?R:O??=R.toLowerCase();if(B&&!P.startsWith(B)||q&&!P.endsWith(q))continue}c.push({node:D,index:v+1,skipped:x,depth:_+1,statics:S,dynamics:k+1,optionals:C})}if(!N&&y.staticInsensitive){const E=y.staticInsensitive.get(O??=R.toLowerCase());E&&c.push({node:E,index:v+1,skipped:x,depth:_+1,statics:S+1,dynamics:k,optionals:C})}if(!N&&y.static){const E=y.static.get(R);E&&c.push({node:E,index:v+1,skipped:x,depth:_+1,statics:S+1,dynamics:k,optionals:C})}}if(m&&u)return Cd(u,m)?m:u;if(m)return m;if(u)return u;if(s&&h){let p=h.index;for(let v=0;v<h.index;v++)p+=e[v].length;const y=p===t.length?"/":t.slice(p);return{node:h.node,skipped:h.skipped,"**":decodeURIComponent(y)}}return null}function Cd(t,e){return t?e.statics>t.statics||e.statics===t.statics&&(e.dynamics>t.dynamics||e.dynamics===t.dynamics&&(e.optionals>t.optionals||e.optionals===t.optionals&&((e.node.kind===xu)>(t.node.kind===xu)||e.node.kind===xu==(t.node.kind===xu)&&e.depth>t.depth))):!0}function p0(t){return z2(t.filter(e=>e!==void 0).join("/"))}function z2(t){return t.replace(/\/{2,}/g,"/")}function c6(t){return t==="/"?t:t.replace(/^\/{1,}/,"")}function Rl(t){const e=t.length;return e>1&&t[e-1]==="/"?t.replace(/\/{1,}$/,""):t}function u6(t){return Rl(c6(t))}function W0(t,e){return t?.endsWith("/")&&t!=="/"&&t!==`${e}/`?t.slice(0,-1):t}function J9(t,e,n){return W0(t,n)===W0(e,n)}function Q9({base:t,to:e,trailingSlash:n="never",cache:s}){const r=e.startsWith("/"),i=!r&&e===".";let o;if(s){o=r?e:i?t:t+"\0"+e;const p=s.get(o);if(p)return p}let c;if(i)c=t.split("/");else if(r)c=e.split("/");else{for(c=t.split("/");c.length>1&&V0(c)==="";)c.pop();const p=e.split("/");for(let y=0,v=p.length;y<v;y++){const x=p[y];x===""?y?y===v-1&&c.push(x):c=[x]:x===".."?c.pop():x==="."||c.push(x)}}c.length>1&&(V0(c)===""?n==="never"&&c.pop():n==="always"&&c.push(""));let u,h="";for(let p=0;p<c.length;p++){p>0&&(h+="/");const y=c[p];if(!y)continue;u=P2(y,0,u);const v=u[0];if(v===zu){h+=y;continue}const x=u[5],_=y.substring(0,u[1]),S=y.substring(u[4],x),k=y.substring(u[2],u[3]);v===Pl?h+=_||S?`${_}{$${k}}${S}`:`$${k}`:v===$l?h+=_||S?`${_}{$}${S}`:"$":h+=`${_}{-$${k}}${S}`}h=z2(h);const m=h||"/";return o&&s&&s.set(o,m),m}function px(t,e,n){const s=e[t];return typeof s!="string"?s:t==="_splat"?encodeURI(s):eU(s,n)}function mx({path:t,params:e,decodeCharMap:n}){let s=!1;const r={};if(!t||t==="/")return{interpolatedPath:"/",usedParams:r,isMissingParams:s};if(!t.includes("$"))return{interpolatedPath:t,usedParams:r,isMissingParams:s};const i=t.length;let o=0,c,u="";for(;o<i;){const m=o;c=P2(t,m,c);const p=c[5];if(o=p+1,m===p)continue;const y=c[0];if(y===zu){u+="/"+t.substring(m,p);continue}if(y===$l){const v=e._splat;r._splat=v,r["*"]=v;const x=t.substring(m,c[1]),_=t.substring(c[4],p);if(!v){s=!0,(x||_)&&(u+="/"+x+_);continue}const S=px("_splat",e,n);u+="/"+x+S+_;continue}if(y===Pl){const v=t.substring(c[2],c[3]);!s&&!(v in e)&&(s=!0),r[v]=e[v];const x=t.substring(m,c[1]),_=t.substring(c[4],p),S=px(v,e,n)??"undefined";u+="/"+x+S+_;continue}if(y===ep){const v=t.substring(c[2],c[3]),x=e[v];if(x==null)continue;r[v]=x;const _=t.substring(m,c[1]),S=t.substring(c[4],p),k=px(v,e,n)??"";u+="/"+_+k+S;continue}}return t.endsWith("/")&&(u+="/"),{usedParams:r,interpolatedPath:u||"/",isMissingParams:s}}function eU(t,e){let n=encodeURIComponent(t);if(e)for(const[s,r]of e)n=n.replaceAll(s,r);return n}function kr(t){return!!t?.isNotFound}function tU(){try{if(typeof window<"u"&&typeof window.sessionStorage=="object")return window.sessionStorage}catch{}}const G0="tsr-scroll-restoration-v1_3",nU=(t,e)=>{let n;return(...s)=>{n||(n=setTimeout(()=>{t(...s),n=null},e))}};function sU(){const t=tU();if(!t)return null;const e=t.getItem(G0);let n=e?JSON.parse(e):{};return{state:n,set:s=>(n=xo(s,n)||n,t.setItem(G0,JSON.stringify(n)))}}const Eg=sU(),Fw=t=>t.state.__TSR_key||t.href;function rU(t){const e=[];let n;for(;n=t.parentNode;)e.push(`${t.tagName}:nth-child(${Array.prototype.indexOf.call(n.children,t)+1})`),t=n;return`${e.reverse().join(" > ")}`.toLowerCase()}let Y0=!1;function h6({storageKey:t,key:e,behavior:n,shouldScrollRestoration:s,scrollToTopSelectors:r,location:i}){let o;try{o=JSON.parse(sessionStorage.getItem(t)||"{}")}catch(h){console.error(h);return}const c=e||window.history.state?.__TSR_key,u=o[c];Y0=!0;e:{if(s&&u&&Object.keys(u).length>0){for(const p in u){const y=u[p];if(p==="window")window.scrollTo({top:y.scrollY,left:y.scrollX,behavior:n});else if(p){const v=document.querySelector(p);v&&(v.scrollLeft=y.scrollX,v.scrollTop=y.scrollY)}}break e}const h=(i??window.location).hash.split("#",2)[1];if(h){const p=window.history.state?.__hashScrollIntoViewOptions??!0;if(p){const y=document.getElementById(h);y&&y.scrollIntoView(p)}break e}const m={top:0,left:0,behavior:n};if(window.scrollTo(m),r)for(const p of r){if(p==="window")continue;const y=typeof p=="function"?p():document.querySelector(p);y&&y.scrollTo(m)}}Y0=!1}function iU(t,e){if(!Eg&&!t.isServer||((t.options.scrollRestoration??!1)&&(t.isScrollRestoring=!0),t.isServer||t.isScrollRestorationSetup||!Eg))return;t.isScrollRestorationSetup=!0,Y0=!1;const s=t.options.getScrollRestorationKey||Fw;window.history.scrollRestoration="manual";const r=i=>{if(Y0||!t.isScrollRestoring)return;let o="";if(i.target===document||i.target===window)o="window";else{const u=i.target.getAttribute("data-scroll-restoration-id");u?o=`[data-scroll-restoration-id="${u}"]`:o=rU(i.target)}const c=s(t.state.location);Eg.set(u=>{const h=u[c]||={},m=h[o]||={};if(o==="window")m.scrollX=window.scrollX||0,m.scrollY=window.scrollY||0;else if(o){const p=document.querySelector(o);p&&(m.scrollX=p.scrollLeft||0,m.scrollY=p.scrollTop||0)}return u})};typeof document<"u"&&document.addEventListener("scroll",nU(r,100),!0),t.subscribe("onRendered",i=>{const o=s(i.toLocation);if(!t.resetNextScroll){t.resetNextScroll=!0;return}typeof t.options.scrollRestoration=="function"&&!t.options.scrollRestoration({location:t.latestLocation})||(h6({storageKey:G0,key:o,behavior:t.options.scrollRestorationBehavior,shouldScrollRestoration:t.isScrollRestoring,scrollToTopSelectors:t.options.scrollToTopSelectors,location:t.history.location}),t.isScrollRestoring&&Eg.set(c=>(c[o]||={},c)))})}function aU(t){if(typeof document<"u"&&document.querySelector){const e=t.state.location.state.__hashScrollIntoViewOptions??!0;if(e&&t.state.location.hash!==""){const n=document.getElementById(t.state.location.hash);n&&n.scrollIntoView(e)}}}function oU(t,e=String){const n=new URLSearchParams;for(const s in t){const r=t[s];r!==void 0&&n.set(s,e(r))}return n.toString()}function gx(t){return t?t==="false"?!1:t==="true"?!0:+t*0===0&&+t+""===t?+t:t:""}function lU(t){const e=new URLSearchParams(t),n={};for(const[s,r]of e.entries()){const i=n[s];i==null?n[s]=gx(r):Array.isArray(i)?i.push(gx(r)):n[s]=[i,gx(r)]}return n}const cU=hU(JSON.parse),uU=dU(JSON.stringify,JSON.parse);function hU(t){return e=>{e[0]==="?"&&(e=e.substring(1));const n=lU(e);for(const s in n){const r=n[s];if(typeof r=="string")try{n[s]=t(r)}catch{}}return n}}function dU(t,e){const n=typeof e=="function";function s(r){if(typeof r=="object"&&r!==null)try{return t(r)}catch{}else if(n&&typeof r=="string")try{return e(r),t(r)}catch{}return r}return r=>{const i=oU(r,s);return i?`?${i}`:""}}const _r="__root__";function U2(t){if(t.statusCode=t.statusCode||t.code||307,!t.reloadDocument&&typeof t.href=="string")try{new URL(t.href),t.reloadDocument=!0}catch{}const e=new Headers(t.headers);t.href&&e.get("Location")===null&&e.set("Location",t.href);const n=new Response(null,{status:t.statusCode,headers:e});if(n.options=t,t.throw)throw n;return n}function Gr(t){return t instanceof Response&&!!t.options}const m0=t=>{if(!t.rendered)return t.rendered=!0,t.onReady?.()},hv=(t,e)=>!!(t.preload&&!t.router.state.matches.some(n=>n.id===e)),H2=(t,e,n=!0)=>{const s={...t.router.options.context??{}},r=n?e:e-1;for(let i=0;i<=r;i++){const o=t.matches[i];if(!o)continue;const c=t.router.getMatch(o.id);c&&Object.assign(s,c.__routeContext,c.__beforeLoadContext)}return s},d6=(t,e)=>{const n=t.router.routesById[e.routeId??""]??t.router.routeTree;!n.options.notFoundComponent&&t.router.options?.defaultNotFoundComponent&&(n.options.notFoundComponent=t.router.options.defaultNotFoundComponent),Ca(n.options.notFoundComponent);const s=t.matches.find(r=>r.routeId===n.id);Ca(s,"Could not find match for route: "+n.id),t.updateMatch(s.id,r=>({...r,status:"notFound",error:e,isFetching:!1})),e.routerCode==="BEFORE_LOAD"&&n.parentRoute&&(e.routeId=n.parentRoute.id,d6(t,e))},wo=(t,e,n)=>{if(!(!Gr(n)&&!kr(n))){if(Gr(n)&&n.redirectHandled&&!n.options.reloadDocument)throw n;if(e){e._nonReactive.beforeLoadPromise?.resolve(),e._nonReactive.loaderPromise?.resolve(),e._nonReactive.beforeLoadPromise=void 0,e._nonReactive.loaderPromise=void 0;const s=Gr(n)?"redirected":"notFound";e._nonReactive.error=n,t.updateMatch(e.id,r=>({...r,status:s,isFetching:!1,error:n})),kr(n)&&!n.routeId&&(n.routeId=e.routeId),e._nonReactive.loadPromise?.resolve()}throw Gr(n)?(t.rendered=!0,n.options._fromLocation=t.location,n.redirectHandled=!0,n=t.router.resolveRedirect(n),n):(d6(t,n),n)}},f6=(t,e)=>{const n=t.router.getMatch(e);return!!(!t.router.isServer&&n._nonReactive.dehydrated||t.router.isServer&&n.ssr===!1)},Nd=(t,e,n,s)=>{const{id:r,routeId:i}=t.matches[e],o=t.router.looseRoutesById[i];if(n instanceof Promise)throw n;n.routerCode=s,t.firstBadMatchIndex??=e,wo(t,t.router.getMatch(r),n);try{o.options.onError?.(n)}catch(c){n=c,wo(t,t.router.getMatch(r),n)}t.updateMatch(r,c=>(c._nonReactive.beforeLoadPromise?.resolve(),c._nonReactive.beforeLoadPromise=void 0,c._nonReactive.loadPromise?.resolve(),{...c,error:n,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController}))},fU=(t,e,n,s)=>{const r=t.router.getMatch(e),i=t.matches[n-1]?.id,o=i?t.router.getMatch(i):void 0;if(t.router.isShell()){r.ssr=s.id===_r;return}if(o?.ssr===!1){r.ssr=!1;return}const c=v=>v===!0&&o?.ssr==="data-only"?"data-only":v,u=t.router.options.defaultSsr??!0;if(s.options.ssr===void 0){r.ssr=c(u);return}if(typeof s.options.ssr!="function"){r.ssr=c(s.options.ssr);return}const{search:h,params:m}=r,p={search:Ag(h,r.searchError),params:Ag(m,r.paramsError),location:t.location,matches:t.matches.map(v=>({index:v.index,pathname:v.pathname,fullPath:v.fullPath,staticData:v.staticData,id:v.id,routeId:v.routeId,search:Ag(v.search,v.searchError),params:Ag(v.params,v.paramsError),ssr:v.ssr}))},y=s.options.ssr(p);if(jo(y))return y.then(v=>{r.ssr=c(v??u)});r.ssr=c(y??u)},p6=(t,e,n,s)=>{if(s._nonReactive.pendingTimeout!==void 0)return;const r=n.options.pendingMs??t.router.options.defaultPendingMs;if(!!(t.onReady&&!t.router.isServer&&!hv(t,e)&&(n.options.loader||n.options.beforeLoad||y6(n))&&typeof r=="number"&&r!==1/0&&(n.options.pendingComponent??t.router.options?.defaultPendingComponent))){const o=setTimeout(()=>{m0(t)},r);s._nonReactive.pendingTimeout=o}},pU=(t,e,n)=>{const s=t.router.getMatch(e);if(!s._nonReactive.beforeLoadPromise&&!s._nonReactive.loaderPromise)return;p6(t,e,n,s);const r=()=>{const i=t.router.getMatch(e);i.preload&&(i.status==="redirected"||i.status==="notFound")&&wo(t,i,i.error)};return s._nonReactive.beforeLoadPromise?s._nonReactive.beforeLoadPromise.then(r):r()},mU=(t,e,n,s)=>{const r=t.router.getMatch(e),i=r._nonReactive.loadPromise;r._nonReactive.loadPromise=$u(()=>{i?.resolve()});const{paramsError:o,searchError:c}=r;o&&Nd(t,n,o,"PARSE_PARAMS"),c&&Nd(t,n,c,"VALIDATE_SEARCH"),p6(t,e,s,r);const u=new AbortController,h=t.matches[n-1]?.id;(h?t.router.getMatch(h):void 0)?.context??t.router.options.context;let p=!1;const y=()=>{p||(p=!0,t.updateMatch(e,E=>({...E,isFetching:"beforeLoad",fetchCount:E.fetchCount+1,abortController:u})))},v=()=>{r._nonReactive.beforeLoadPromise?.resolve(),r._nonReactive.beforeLoadPromise=void 0,t.updateMatch(e,E=>({...E,isFetching:!1}))};if(!s.options.beforeLoad){Of(()=>{y(),v()});return}r._nonReactive.beforeLoadPromise=$u();const x={...H2(t,n,!1),...r.__routeContext},{search:_,params:S,cause:k}=r,C=hv(t,e),N={search:_,abortController:u,params:S,preload:C,context:x,location:t.location,navigate:E=>t.router.navigate({...E,_fromLocation:t.location}),buildLocation:t.router.buildLocation,cause:C?"preload":k,matches:t.matches,...t.router.options.additionalContext},R=E=>{if(E===void 0){Of(()=>{y(),v()});return}(Gr(E)||kr(E))&&(y(),Nd(t,n,E,"BEFORE_LOAD")),Of(()=>{y(),t.updateMatch(e,D=>({...D,__beforeLoadContext:E})),v()})};let O;try{if(O=s.options.beforeLoad(N),jo(O))return y(),O.catch(E=>{Nd(t,n,E,"BEFORE_LOAD")}).then(R)}catch(E){y(),Nd(t,n,E,"BEFORE_LOAD")}R(O)},gU=(t,e)=>{const{id:n,routeId:s}=t.matches[e],r=t.router.looseRoutesById[s],i=()=>{if(t.router.isServer){const u=fU(t,n,e,r);if(jo(u))return u.then(c)}return c()},o=()=>mU(t,n,e,r),c=()=>{if(f6(t,n))return;const u=pU(t,n,r);return jo(u)?u.then(o):o()};return i()},yU=(t,e,n)=>{const s=t.router.getMatch(e);if(!s||!n.options.head&&!n.options.scripts&&!n.options.headers)return;const r={matches:t.matches,match:s,params:s.params,loaderData:s.loaderData};return Promise.all([n.options.head?.(r),n.options.scripts?.(r),n.options.headers?.(r)]).then(([i,o,c])=>{const u=i?.meta,h=i?.links,m=i?.scripts,p=i?.styles;return{meta:u,links:h,headScripts:m,headers:c,scripts:o,styles:p}})},m6=(t,e,n,s)=>{const r=t.matchPromises[n-1],{params:i,loaderDeps:o,abortController:c,cause:u}=t.router.getMatch(e),h=H2(t,n),m=hv(t,e);return{params:i,deps:o,preload:!!m,parentMatchPromise:r,abortController:c,context:h,location:t.location,navigate:p=>t.router.navigate({...p,_fromLocation:t.location}),cause:m?"preload":u,route:s,...t.router.options.additionalContext}},D3=async(t,e,n,s)=>{try{const r=t.router.getMatch(e);try{(!t.router.isServer||r.ssr===!0)&&g6(s);const i=s.options.loader?.(m6(t,e,n,s)),o=s.options.loader&&jo(i);if((o||s._lazyPromise||s._componentsPromise||s.options.head||s.options.scripts||s.options.headers||r._nonReactive.minPendingPromise)&&t.updateMatch(e,h=>({...h,isFetching:"loader"})),s.options.loader){const h=o?await i:i;wo(t,t.router.getMatch(e),h),h!==void 0&&t.updateMatch(e,m=>({...m,loaderData:h}))}s._lazyPromise&&await s._lazyPromise;const u=r._nonReactive.minPendingPromise;u&&await u,s._componentsPromise&&await s._componentsPromise,t.updateMatch(e,h=>({...h,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now()}))}catch(i){let o=i;const c=r._nonReactive.minPendingPromise;c&&await c,kr(i)&&await s.options.notFoundComponent?.preload?.(),wo(t,t.router.getMatch(e),i);try{s.options.onError?.(i)}catch(u){o=u,wo(t,t.router.getMatch(e),u)}t.updateMatch(e,u=>({...u,error:o,status:"error",isFetching:!1}))}}catch(r){const i=t.router.getMatch(e);i&&(i._nonReactive.loaderPromise=void 0),wo(t,i,r)}},vU=async(t,e)=>{const{id:n,routeId:s}=t.matches[e];let r=!1,i=!1;const o=t.router.looseRoutesById[s],c=()=>{t.updateMatch(n,m=>({...m,context:H2(t,e)}))};if(f6(t,n)){if(t.router.isServer)return t.router.getMatch(n)}else{const m=t.router.getMatch(n);if(m._nonReactive.loaderPromise){if(m.status==="success"&&!t.sync&&!m.preload)return m;await m._nonReactive.loaderPromise;const p=t.router.getMatch(n),y=p._nonReactive.error||p.error;y&&wo(t,p,y)}else{const p=Date.now()-m.updatedAt,y=hv(t,n),v=y?o.options.preloadStaleTime??t.router.options.defaultPreloadStaleTime??3e4:o.options.staleTime??t.router.options.defaultStaleTime??0,x=o.options.shouldReload,_=typeof x=="function"?x(m6(t,n,e,o)):x,S=!!y&&!t.router.state.matches.some(R=>R.id===n),k=t.router.getMatch(n);k._nonReactive.loaderPromise=$u(),S!==k.preload&&t.updateMatch(n,R=>({...R,preload:S}));const{status:C,invalid:N}=k;r=C==="success"&&(N||(_??p>v)),y&&o.options.preload===!1||(r&&!t.sync?(i=!0,(async()=>{try{await D3(t,n,e,o),c();const R=t.router.getMatch(n);R._nonReactive.loaderPromise?.resolve(),R._nonReactive.loadPromise?.resolve(),R._nonReactive.loaderPromise=void 0}catch(R){Gr(R)&&await t.router.navigate(R.options)}})()):(C!=="success"||r&&t.sync)&&await D3(t,n,e,o))}}const u=t.router.getMatch(n);i||(u._nonReactive.loaderPromise?.resolve(),u._nonReactive.loadPromise?.resolve()),clearTimeout(u._nonReactive.pendingTimeout),u._nonReactive.pendingTimeout=void 0,i||(u._nonReactive.loaderPromise=void 0),u._nonReactive.dehydrated=void 0,i||c();const h=i?u.isFetching:!1;return h!==u.isFetching||u.invalid!==!1?(t.updateMatch(n,m=>({...m,isFetching:h,invalid:!1})),t.router.getMatch(n)):u};async function B3(t){const e=Object.assign(t,{matchPromises:[]});!e.router.isServer&&e.router.state.matches.some(n=>n._forcePending)&&m0(e);try{for(let c=0;c<e.matches.length;c++){const u=gU(e,c);jo(u)&&await u}const n=e.firstBadMatchIndex??e.matches.length;for(let c=0;c<n;c++)e.matchPromises.push(vU(e,c));const r=(await Promise.allSettled(e.matchPromises)).filter(c=>c.status==="rejected").map(c=>c.reason);let i;for(const c of r){if(Gr(c))throw c;!i&&kr(c)&&(i=c)}for(const c of e.matches){const{id:u,routeId:h}=c,m=e.router.looseRoutesById[h];try{const p=yU(e,u,m);if(p){const y=await p;e.updateMatch(u,v=>({...v,...y}))}}catch(p){console.error(`Error executing head for route ${h}:`,p)}}if(i)throw i;const o=m0(e);jo(o)&&await o}catch(n){if(kr(n)&&!e.preload){const s=m0(e);throw jo(s)&&await s,n}if(Gr(n))throw n}return e.matches}async function g6(t){if(!t._lazyLoaded&&t._lazyPromise===void 0&&(t.lazyFn?t._lazyPromise=t.lazyFn().then(e=>{const{id:n,...s}=e.options;Object.assign(t.options,s),t._lazyLoaded=!0,t._lazyPromise=void 0}):t._lazyLoaded=!0),!t._componentsLoaded&&t._componentsPromise===void 0){const e=()=>{const n=[];for(const s of v6){const r=t.options[s]?.preload;r&&n.push(r())}if(n.length)return Promise.all(n).then(()=>{t._componentsLoaded=!0,t._componentsPromise=void 0});t._componentsLoaded=!0,t._componentsPromise=void 0};t._componentsPromise=t._lazyPromise?t._lazyPromise.then(e):e()}return t._componentsPromise}function Ag(t,e){return e?{status:"error",error:e}:{status:"success",value:t}}function y6(t){for(const e of v6)if(t.options[e]?.preload)return!0;return!1}const v6=["component","errorComponent","pendingComponent","notFoundComponent"];function bU(t){return{input:({url:e})=>{for(const n of t)e=b6(n,e);return e},output:({url:e})=>{for(let n=t.length-1;n>=0;n--)e=_6(t[n],e);return e}}}function _U(t){const e=u6(t.basepath),n=`/${e}`,s=`${n}/`,r=t.caseSensitive?n:n.toLowerCase(),i=t.caseSensitive?s:s.toLowerCase();return{input:({url:o})=>{const c=t.caseSensitive?o.pathname:o.pathname.toLowerCase();return c===r?o.pathname="/":c.startsWith(i)&&(o.pathname=o.pathname.slice(n.length)),o},output:({url:o})=>(o.pathname=p0(["/",e,o.pathname]),o)}}function b6(t,e){const n=t?.input?.({url:e});if(n){if(typeof n=="string")return new URL(n);if(n instanceof URL)return n}return e}function _6(t,e){const n=t?.output?.({url:e});if(n){if(typeof n=="string")return new URL(n);if(n instanceof URL)return n}return e}function Ol(t){const e=t.resolvedLocation,n=t.location,s=e?.pathname!==n.pathname,r=e?.href!==n.href,i=e?.hash!==n.hash;return{fromLocation:e,toLocation:n,pathChanged:s,hrefChanged:r,hashChanged:i}}class xU{constructor(e){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=n=>n(),this.update=n=>{n.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info.");const s=this.options,r=this.basepath??s?.basepath??"/",i=this.basepath===void 0,o=s?.rewrite;this.options={...s,...n},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(y=>[encodeURIComponent(y),y])):void 0,(!this.history||this.options.history&&this.options.history!==this.history)&&(this.options.history?this.history=this.options.history:this.isServer||(this.history=B9())),this.origin=this.options.origin,this.origin||(!this.isServer&&window?.origin&&window.origin!=="null"?this.origin=window.origin:this.origin="http://localhost"),this.history&&this.updateLatestLocation(),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),!this.__store&&this.latestLocation&&(this.__store=new M9(SU(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(y=>!["redirected"].includes(y.status))}}}),iU(this));let c=!1;const u=this.options.basepath??"/",h=this.options.rewrite;if(i||r!==u||o!==h){this.basepath=u;const y=[];u6(u)!==""&&y.push(_U({basepath:u})),h&&y.push(h),this.rewrite=y.length===0?void 0:y.length===1?y[0]:bU(y),this.history&&this.updateLatestLocation(),c=!0}c&&this.__store&&(this.__store.state={...this.state,location:this.latestLocation}),typeof window<"u"&&"CSS"in window&&typeof window.CSS?.supports=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.updateLatestLocation=()=>{this.latestLocation=this.parseLocation(this.history.location,this.latestLocation)},this.buildRouteTree=()=>{const{routesById:n,routesByPath:s,processedTree:r}=W9(this.routeTree,this.options.caseSensitive,(o,c)=>{o.init({originalIndex:c})});this.options.routeMasks&&H9(this.options.routeMasks,r),this.routesById=n,this.routesByPath=s,this.processedTree=r;const i=this.options.notFoundRoute;i&&(i.init({originalIndex:99999999999}),this.routesById[i.id]=i)},this.subscribe=(n,s)=>{const r={eventType:n,fn:s};return this.subscribers.add(r),()=>{this.subscribers.delete(r)}},this.emit=n=>{this.subscribers.forEach(s=>{s.eventType===n.type&&s.fn(n)})},this.parseLocation=(n,s)=>{const r=({href:u,state:h})=>{const m=new URL(u,this.origin),p=b6(this.rewrite,m),y=this.options.parseSearch(p.search),v=this.options.stringifySearch(y);return p.search=v,{href:p.href.replace(p.origin,""),publicHref:u,url:p,pathname:M3(p.pathname),searchStr:v,search:Fr(s?.search,y),hash:p.hash.split("#").reverse()[0]??"",state:Fr(s?.state,h)}},i=r(n),{__tempLocation:o,__tempKey:c}=i.state;if(o&&(!c||c===this.tempLocationKey)){const u=r(o);return u.state.key=i.state.key,u.state.__TSR_key=i.state.__TSR_key,delete u.state.__tempLocation,{...u,maskedLocation:i}}return i},this.resolvePathCache=K0(1e3),this.resolvePathWithBase=(n,s)=>Q9({base:n,to:z2(s),trailingSlash:this.options.trailingSlash,cache:this.resolvePathCache}),this.matchRoutes=(n,s,r)=>typeof n=="string"?this.matchRoutesInternal({pathname:n,search:s},r):this.matchRoutesInternal(n,s),this.getMatchedRoutes=n=>kU({pathname:n,routesById:this.routesById,processedTree:this.processedTree}),this.cancelMatch=n=>{const s=this.getMatch(n);s&&(s.abortController.abort(),clearTimeout(s._nonReactive.pendingTimeout),s._nonReactive.pendingTimeout=void 0)},this.cancelMatches=()=>{const n=this.state.matches.filter(i=>i.status==="pending"),s=this.state.matches.filter(i=>i.isFetching==="loader");new Set([...this.state.pendingMatches??[],...n,...s]).forEach(i=>{this.cancelMatch(i.id)})},this.buildLocation=n=>{const s=(i={})=>{const o=i._fromLocation||this.pendingBuiltLocation||this.latestLocation,c=this.matchRoutes(o,{_buildLocation:!0}),u=V0(c);i.from;const h=i.unsafeRelative==="path"?o.pathname:i.from??u.fullPath,m=this.resolvePathWithBase(h,"."),p=u.search,y={...u.params},v=i.to?this.resolvePathWithBase(m,`${i.to}`):this.resolvePathWithBase(m,"."),x=i.params===!1||i.params===null?{}:(i.params??!0)===!0?y:Object.assign(y,xo(i.params,y)),_=mx({path:v,params:x}).interpolatedPath,S=this.matchRoutes(_,void 0,{_buildLocation:!0}).map(P=>this.looseRoutesById[P.routeId]);if(Object.keys(x).length>0)for(const P of S){const G=P.options.params?.stringify??P.options.stringifyParams;G&&Object.assign(x,G(x))}const k=n.leaveParams?v:M3(mx({path:v,params:x,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath);let C=p;if(n._includeValidateSearch&&this.options.search?.strict){const P={};S.forEach(G=>{if(G.options.validateSearch)try{Object.assign(P,Vw(G.options.validateSearch,{...P,...C}))}catch{}}),C=P}C=CU({search:C,dest:i,destRoutes:S,_includeValidateSearch:n._includeValidateSearch}),C=Fr(p,C);const N=this.options.stringifySearch(C),R=i.hash===!0?o.hash:i.hash?xo(i.hash,o.hash):void 0,O=R?`#${R}`:"";let E=i.state===!0?o.state:i.state?xo(i.state,o.state):{};E=Fr(o.state,E);const D=`${k}${N}${O}`,B=new URL(D,this.origin),q=_6(this.rewrite,B);return{publicHref:q.pathname+q.search+q.hash,href:D,url:q,pathname:k,search:C,searchStr:N,state:E,hash:R??"",unmaskOnReload:i.unmaskOnReload}},r=(i={},o)=>{const c=s(i);let u=o?s(o):void 0;if(!u){const h={};if(this.options.routeMasks){const m=F9(c.pathname,this.processedTree);if(m){Object.assign(h,m.params);const{from:p,params:y,...v}=m.route,x=y===!1||y===null?{}:(y??!0)===!0?h:Object.assign(h,xo(y,h));o={from:n.from,...v,params:x},u=s(o)}}}return u&&(c.maskedLocation=u),c};return n.mask?r(n,{from:n.from,...n.mask}):r(n)},this.commitLocation=({viewTransition:n,ignoreBlocker:s,...r})=>{const i=()=>{const u=["key","__TSR_key","__TSR_index","__hashScrollIntoViewOptions"];u.forEach(m=>{r.state[m]=this.latestLocation.state[m]});const h=Tl(r.state,this.latestLocation.state);return u.forEach(m=>{delete r.state[m]}),h},o=Rl(this.latestLocation.href)===Rl(r.href),c=this.commitLocationPromise;if(this.commitLocationPromise=$u(()=>{c?.resolve()}),o&&i())this.load();else{let{maskedLocation:u,hashScrollIntoView:h,url:m,...p}=r;u&&(p={...u,state:{...u.state,__tempKey:void 0,__tempLocation:{...p,search:p.searchStr,state:{...p.state,__tempKey:void 0,__tempLocation:void 0,__TSR_key:void 0,key:void 0}}}},(p.unmaskOnReload??this.options.unmaskOnReload??!1)&&(p.state.__tempKey=this.tempLocationKey)),p.state.__hashScrollIntoViewOptions=h??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=n,this.history[r.replace?"replace":"push"](p.publicHref,p.state,{ignoreBlocker:s})}return this.resetNextScroll=r.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:n,resetScroll:s,hashScrollIntoView:r,viewTransition:i,ignoreBlocker:o,href:c,...u}={})=>{if(c){const p=this.history.location.state.__TSR_index,y=F0(c,{__TSR_index:n?p:p+1});u.to=y.pathname,u.search=this.options.parseSearch(y.search),u.hash=y.hash.slice(1)}const h=this.buildLocation({...u,_includeValidateSearch:!0});this.pendingBuiltLocation=h;const m=this.commitLocation({...h,viewTransition:i,replace:n,resetScroll:s,hashScrollIntoView:r,ignoreBlocker:o});return Promise.resolve().then(()=>{this.pendingBuiltLocation===h&&(this.pendingBuiltLocation=void 0)}),m},this.navigate=async({to:n,reloadDocument:s,href:r,publicHref:i,...o})=>{let c=!1;if(r)try{new URL(`${r}`),c=!0}catch{}if(c&&!s&&(s=!0),s){if(!r||!i&&!c){const h=this.buildLocation({to:n,...o});r=r??h.url.href,i=i??h.url.href}const u=!c&&i?i:r;if(!o.ignoreBlocker){const m=this.history.getBlockers?.()??[];for(const p of m)if(p?.blockerFn&&await p.blockerFn({currentLocation:this.latestLocation,nextLocation:this.latestLocation,action:"PUSH"}))return Promise.resolve()}return o.replace?window.location.replace(u):window.location.href=u,Promise.resolve()}return this.buildAndCommitLocation({...o,href:r,to:n,_isNavigate:!0})},this.beforeLoad=()=>{if(this.cancelMatches(),this.updateLatestLocation(),this.isServer){const s=this.buildLocation({to:this.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});if(this.latestLocation.publicHref!==s.publicHref||s.url.origin!==this.origin){const r=this.getParsedLocationHref(s);throw U2({href:r})}}const n=this.matchRoutes(this.latestLocation);this.__store.setState(s=>({...s,status:"pending",statusCode:200,isLoading:!0,location:this.latestLocation,pendingMatches:n,cachedMatches:s.cachedMatches.filter(r=>!n.some(i=>i.id===r.id))}))},this.load=async n=>{let s,r,i;for(i=new Promise(c=>{this.startTransition(async()=>{try{this.beforeLoad();const u=this.latestLocation,h=this.state.resolvedLocation;this.state.redirect||this.emit({type:"onBeforeNavigate",...Ol({resolvedLocation:h,location:u})}),this.emit({type:"onBeforeLoad",...Ol({resolvedLocation:h,location:u})}),await B3({router:this,sync:n?.sync,matches:this.state.pendingMatches,location:u,updateMatch:this.updateMatch,onReady:async()=>{this.startTransition(()=>{this.startViewTransition(async()=>{let m=[],p=[],y=[];Of(()=>{this.__store.setState(v=>{const x=v.matches,_=v.pendingMatches||v.matches;return m=x.filter(S=>!_.some(k=>k.id===S.id)),p=_.filter(S=>!x.some(k=>k.id===S.id)),y=_.filter(S=>x.some(k=>k.id===S.id)),{...v,isLoading:!1,loadedAt:Date.now(),matches:_,pendingMatches:void 0,cachedMatches:[...v.cachedMatches,...m.filter(S=>S.status!=="error"&&S.status!=="notFound")]}}),this.clearExpiredCache()}),[[m,"onLeave"],[p,"onEnter"],[y,"onStay"]].forEach(([v,x])=>{v.forEach(_=>{this.looseRoutesById[_.routeId].options[x]?.(_)})})})})}})}catch(u){Gr(u)?(s=u,this.isServer||this.navigate({...s.options,replace:!0,ignoreBlocker:!0})):kr(u)&&(r=u),this.__store.setState(h=>({...h,statusCode:s?s.status:r?404:h.matches.some(m=>m.status==="error")?500:200,redirect:s}))}this.latestLoadPromise===i&&(this.commitLocationPromise?.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),c()})}),this.latestLoadPromise=i,await i;this.latestLoadPromise&&i!==this.latestLoadPromise;)await this.latestLoadPromise;let o;this.hasNotFoundMatch()?o=404:this.__store.state.matches.some(c=>c.status==="error")&&(o=500),o!==void 0&&this.__store.setState(c=>({...c,statusCode:o}))},this.startViewTransition=n=>{const s=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,s&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let r;if(typeof s=="object"&&this.isViewTransitionTypesSupported){const i=this.latestLocation,o=this.state.resolvedLocation,c=typeof s.types=="function"?s.types(Ol({resolvedLocation:o,location:i})):s.types;if(c===!1){n();return}r={update:n,types:c}}else r=n;document.startViewTransition(r)}else n()},this.updateMatch=(n,s)=>{this.startTransition(()=>{const r=this.state.pendingMatches?.some(i=>i.id===n)?"pendingMatches":this.state.matches.some(i=>i.id===n)?"matches":this.state.cachedMatches.some(i=>i.id===n)?"cachedMatches":"";r&&this.__store.setState(i=>({...i,[r]:i[r]?.map(o=>o.id===n?s(o):o)}))})},this.getMatch=n=>{const s=r=>r.id===n;return this.state.cachedMatches.find(s)??this.state.pendingMatches?.find(s)??this.state.matches.find(s)},this.invalidate=n=>{const s=r=>n?.filter?.(r)??!0?{...r,invalid:!0,...n?.forcePending||r.status==="error"||r.status==="notFound"?{status:"pending",error:void 0}:void 0}:r;return this.__store.setState(r=>({...r,matches:r.matches.map(s),cachedMatches:r.cachedMatches.map(s),pendingMatches:r.pendingMatches?.map(s)})),this.shouldViewTransition=!1,this.load({sync:n?.sync})},this.getParsedLocationHref=n=>{let s=n.url.href;return this.origin&&n.url.origin===this.origin&&(s=s.replace(this.origin,"")||"/"),s},this.resolveRedirect=n=>{if(!n.options.href){const s=this.buildLocation(n.options),r=this.getParsedLocationHref(s);n.options.href=s.href,n.headers.set("Location",r)}return n.headers.get("Location")||n.headers.set("Location",n.options.href),n},this.clearCache=n=>{const s=n?.filter;s!==void 0?this.__store.setState(r=>({...r,cachedMatches:r.cachedMatches.filter(i=>!s(i))})):this.__store.setState(r=>({...r,cachedMatches:[]}))},this.clearExpiredCache=()=>{const n=s=>{const r=this.looseRoutesById[s.routeId];if(!r.options.loader)return!0;const i=(s.preload?r.options.preloadGcTime??this.options.defaultPreloadGcTime:r.options.gcTime??this.options.defaultGcTime)??300*1e3;return s.status==="error"?!0:Date.now()-s.updatedAt>=i};this.clearCache({filter:n})},this.loadRouteChunk=g6,this.preloadRoute=async n=>{const s=this.buildLocation(n);let r=this.matchRoutes(s,{throwOnError:!0,preload:!0,dest:n});const i=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(c=>c.id)),o=new Set([...i,...this.state.cachedMatches.map(c=>c.id)]);Of(()=>{r.forEach(c=>{o.has(c.id)||this.__store.setState(u=>({...u,cachedMatches:[...u.cachedMatches,c]}))})});try{return r=await B3({router:this,matches:r,location:s,preload:!0,updateMatch:(c,u)=>{i.has(c)?r=r.map(h=>h.id===c?u(h):h):this.updateMatch(c,u)}}),r}catch(c){if(Gr(c))return c.options.reloadDocument?void 0:await this.preloadRoute({...c.options,_fromLocation:s});kr(c)||console.error(c);return}},this.matchRoute=(n,s)=>{const r={...n,to:n.to?this.resolvePathWithBase(n.from||"",n.to):void 0,params:n.params||{},leaveParams:!0},i=this.buildLocation(r);if(s?.pending&&this.state.status!=="pending")return!1;const c=(s?.pending===void 0?!this.state.isLoading:s.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,u=V9(i.pathname,s?.caseSensitive??!1,s?.fuzzy??!1,c.pathname,this.processedTree);return!u||n.params&&!Tl(u.params,n.params,{partial:!0})?!1:s?.includeSearch??!0?Tl(c.search,i.search,{partial:!0})?u.params:!1:u.params},this.hasNotFoundMatch=()=>this.__store.state.matches.some(n=>n.status==="notFound"||n.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...e,caseSensitive:e.caseSensitive??!1,notFoundMode:e.notFoundMode??"fuzzy",stringifySearch:e.stringifySearch??uU,parseSearch:e.parseSearch??cU}),typeof document<"u"&&(self.__TSR_ROUTER__=this)}isShell(){return!!this.options.isShell}isPrerendering(){return!!this.options.isPrerendering}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(e,n){const s=this.getMatchedRoutes(e.pathname),{foundRoute:r,routeParams:i}=s;let{matchedRoutes:o}=s,c=!1;(r?r.path!=="/"&&i["**"]:Rl(e.pathname))&&(this.options.notFoundRoute?o=[...o,this.options.notFoundRoute]:c=!0);const u=(()=>{if(c){if(this.options.notFoundMode!=="root")for(let p=o.length-1;p>=0;p--){const y=o[p];if(y.children)return y.id}return _r}})(),h=[],m=p=>p?.id?p.context??this.options.context??void 0:this.options.context??void 0;return o.forEach((p,y)=>{const v=h[y-1],[x,_,S]=(()=>{const K=v?.search??e.search,Z=v?._strictSearch??void 0;try{const W=Vw(p.options.validateSearch,{...K})??void 0;return[{...K,...W},{...Z,...W},void 0]}catch(W){let I=W;if(W instanceof Z0||(I=new Z0(W.message,{cause:W})),n?.throwOnError)throw I;return[K,{},I]}})(),k=p.options.loaderDeps?.({search:x})??"",C=k?JSON.stringify(k):"",{interpolatedPath:N,usedParams:R}=mx({path:p.fullPath,params:i,decodeCharMap:this.pathParamsDecodeCharMap}),O=p.id+N+C,E=this.getMatch(O),D=this.state.matches.find(K=>K.routeId===p.id),B=E?._strictParams??R;let q;if(!E){const K=p.options.params?.parse??p.options.parseParams;if(K)try{Object.assign(B,K(B))}catch(Z){if(kr(Z)||Gr(Z)?q=Z:q=new wU(Z.message,{cause:Z}),n?.throwOnError)throw q}}Object.assign(i,B);const P=D?"stay":"enter";let G;if(E)G={...E,cause:P,params:D?Fr(D.params,i):i,_strictParams:B,search:Fr(D?D.search:E.search,x),_strictSearch:_};else{const K=p.options.loader||p.options.beforeLoad||p.lazyFn||y6(p)?"pending":"success";G={id:O,ssr:this.isServer?void 0:p.options.ssr,index:y,routeId:p.id,params:D?Fr(D.params,i):i,_strictParams:B,pathname:N,updatedAt:Date.now(),search:D?Fr(D.search,x):x,_strictSearch:_,searchError:void 0,status:K,isFetching:!1,error:void 0,paramsError:q,__routeContext:void 0,_nonReactive:{loadPromise:$u()},__beforeLoadContext:void 0,context:{},abortController:new AbortController,fetchCount:0,cause:P,loaderDeps:D?Fr(D.loaderDeps,k):k,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:p.options.staticData||{},fullPath:p.fullPath}}n?.preload||(G.globalNotFound=u===p.id),G.searchError=S;const z=m(v);G.context={...z,...G.__routeContext,...G.__beforeLoadContext},h.push(G)}),h.forEach((p,y)=>{const v=this.looseRoutesById[p.routeId];if(!this.getMatch(p.id)&&n?._buildLocation!==!0){const _=h[y-1],S=m(_);if(v.options.context){const k={deps:p.loaderDeps,params:p.params,context:S??{},location:e,navigate:C=>this.navigate({...C,_fromLocation:e}),buildLocation:this.buildLocation,cause:p.cause,abortController:p.abortController,preload:!!p.preload,matches:h};p.__routeContext=v.options.context(k)??void 0}p.context={...S,...p.__routeContext,...p.__beforeLoadContext}}}),h}}class Z0 extends Error{}class wU extends Error{}function SU(t){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:t,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function Vw(t,e){if(t==null)return{};if("~standard"in t){const n=t["~standard"].validate(e);if(n instanceof Promise)throw new Z0("Async validation not supported");if(n.issues)throw new Z0(JSON.stringify(n.issues,void 0,2),{cause:n});return n.value}return"parse"in t?t.parse(e):typeof t=="function"?t(e):{}}function kU({pathname:t,routesById:e,processedTree:n}){const s={},r=Rl(t);let i;const o=q9(r,n,!0);return o&&(i=o.route,Object.assign(s,o.params)),{matchedRoutes:o?.branch||[e[_r]],routeParams:s,foundRoute:i}}function CU({search:t,dest:e,destRoutes:n,_includeValidateSearch:s}){const r=n.reduce((c,u)=>{const h=[];if("search"in u.options)u.options.search?.middlewares&&h.push(...u.options.search.middlewares);else if(u.options.preSearchFilters||u.options.postSearchFilters){const m=({search:p,next:y})=>{let v=p;"preSearchFilters"in u.options&&u.options.preSearchFilters&&(v=u.options.preSearchFilters.reduce((_,S)=>S(_),p));const x=y(v);return"postSearchFilters"in u.options&&u.options.postSearchFilters?u.options.postSearchFilters.reduce((_,S)=>S(_),x):x};h.push(m)}if(s&&u.options.validateSearch){const m=({search:p,next:y})=>{const v=y(p);try{return{...v,...Vw(u.options.validateSearch,v)??void 0}}catch{return v}};h.push(m)}return c.concat(h)},[])??[],i=({search:c})=>e.search?e.search===!0?c:xo(e.search,c):{};r.push(i);const o=(c,u)=>{if(c>=r.length)return u;const h=r[c];return h({search:u,next:p=>o(c+1,p)})};return o(0,t)}const NU="Error preloading route! ";class x6{constructor(e){if(this.init=n=>{this.originalIndex=n.originalIndex;const s=this.options,r=!s?.path&&!s?.id;this.parentRoute=this.options.getParentRoute?.(),r?this._path=_r:this.parentRoute||Ca(!1);let i=r?_r:s?.path;i&&i!=="/"&&(i=c6(i));const o=s?.id||i;let c=r?_r:p0([this.parentRoute.id===_r?"":this.parentRoute.id,o]);i===_r&&(i="/"),c!==_r&&(c=p0(["/",c]));const u=c===_r?"/":p0([this.parentRoute.fullPath,i]);this._path=i,this._id=c,this._fullPath=u,this._to=u},this.addChildren=n=>this._addFileChildren(n),this._addFileChildren=n=>(Array.isArray(n)&&(this.children=n),typeof n=="object"&&n!==null&&(this.children=Object.values(n)),this),this._addFileTypes=()=>this,this.updateLoader=n=>(Object.assign(this.options,n),this),this.update=n=>(Object.assign(this.options,n),this),this.lazy=n=>(this.lazyFn=n,this),this.options=e||{},this.isRoot=!e?.getParentRoute,e?.id&&e?.path)throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}}class EU extends x6{constructor(e){super(e)}}function F2(t){const e=t.errorComponent??dv;return f.jsx(AU,{getResetKey:t.getResetKey,onCatch:t.onCatch,children:({error:n,reset:s})=>n?V.createElement(e,{error:n,reset:s}):t.children})}class AU extends V.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(e){return{resetKey:e.getResetKey()}}static getDerivedStateFromError(e){return{error:e}}reset(){this.setState({error:null})}componentDidUpdate(e,n){n.error&&n.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(e,n){this.props.onCatch&&this.props.onCatch(e,n)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function dv({error:t}){const[e,n]=V.useState(!1);return f.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[f.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),f.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>n(s=>!s),children:e?"Hide Error":"Show Error"})]}),f.jsx("div",{style:{height:".25rem"}}),e?f.jsx("div",{children:f.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:t.message?f.jsx("code",{children:t.message}):null})}):null]})}function jU({children:t,fallback:e=null}){return TU()?f.jsx(ks.Fragment,{children:t}):f.jsx(ks.Fragment,{children:e})}function TU(){return ks.useSyncExternalStore(RU,()=>!0,()=>!1)}function RU(){return()=>{}}var yx={exports:{}},vx={},bx={exports:{}},_x={};var L3;function OU(){if(L3)return _x;L3=1;var t=ah();function e(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var n=typeof Object.is=="function"?Object.is:e,s=t.useState,r=t.useEffect,i=t.useLayoutEffect,o=t.useDebugValue;function c(p,y){var v=y(),x=s({inst:{value:v,getSnapshot:y}}),_=x[0].inst,S=x[1];return i(function(){_.value=v,_.getSnapshot=y,u(_)&&S({inst:_})},[p,v,y]),r(function(){return u(_)&&S({inst:_}),p(function(){u(_)&&S({inst:_})})},[p]),o(v),v}function u(p){var y=p.getSnapshot;p=p.value;try{var v=y();return!n(p,v)}catch{return!0}}function h(p,y){return y()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:c;return _x.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,_x}var I3;function MU(){return I3||(I3=1,bx.exports=OU()),bx.exports}var P3;function DU(){if(P3)return vx;P3=1;var t=ah(),e=MU();function n(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var s=typeof Object.is=="function"?Object.is:n,r=e.useSyncExternalStore,i=t.useRef,o=t.useEffect,c=t.useMemo,u=t.useDebugValue;return vx.useSyncExternalStoreWithSelector=function(h,m,p,y,v){var x=i(null);if(x.current===null){var _={hasValue:!1,value:null};x.current=_}else _=x.current;x=c(function(){function k(E){if(!C){if(C=!0,N=E,E=y(E),v!==void 0&&_.hasValue){var D=_.value;if(v(D,E))return R=D}return R=E}if(D=R,s(N,E))return D;var B=y(E);return v!==void 0&&v(D,B)?(N=E,D):(N=E,R=B)}var C=!1,N,R,O=p===void 0?null:p;return[function(){return k(m())},O===null?void 0:function(){return k(O())}]},[m,p,y,v]);var S=r(h,x[0],x[1]);return o(function(){_.hasValue=!0,_.value=S},[S]),u(S),S},vx}var $3;function BU(){return $3||($3=1,yx.exports=DU()),yx.exports}var LU=BU();function IU(t,e=s=>s,n={}){const s=n.equal??PU;return LU.useSyncExternalStoreWithSelector(t.subscribe,()=>t.state,()=>t.state,e,s)}function PU(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[s,r]of t)if(!e.has(s)||!Object.is(r,e.get(s)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0}if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();const n=z3(t);if(n.length!==z3(e).length)return!1;for(let s=0;s<n.length;s++)if(!Object.prototype.hasOwnProperty.call(e,n[s])||!Object.is(t[n[s]],e[n[s]]))return!1;return!0}function z3(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}const xx=V.createContext(null);function w6(){return typeof document>"u"?xx:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=xx,xx)}function Er(t){const e=V.useContext(w6());return t?.warn,e}function tr(t){const e=Er({warn:t?.router===void 0}),n=t?.router||e,s=V.useRef(void 0);return IU(n.__store,r=>{if(t?.select){if(t.structuralSharing??n.options.defaultStructuralSharing){const i=Fr(s.current,t.select(r));return s.current=i,i}return t.select(r)}return r})}const fv=V.createContext(void 0),$U=V.createContext(void 0);function Pi(t){const e=V.useContext(t.from?$U:fv);return tr({select:s=>{const r=s.matches.find(i=>t.from?t.from===i.routeId:i.id===e);if(Ca(!((t.shouldThrow??!0)&&!r),`Could not find ${t.from?`an active match from "${t.from}"`:"a nearest match!"}`),r!==void 0)return t.select?t.select(r):r},structuralSharing:t.structuralSharing})}function V2(t){return Pi({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.loaderData):e.loaderData})}function q2(t){const{select:e,...n}=t;return Pi({...n,select:s=>e?e(s.loaderDeps):s.loaderDeps})}function jp(t){return Pi({from:t.from,shouldThrow:t.shouldThrow,structuralSharing:t.structuralSharing,strict:t.strict,select:e=>{const n=t.strict===!1?e.params:e._strictParams;return t.select?t.select(n):n}})}function pv(t){return Pi({from:t.from,strict:t.strict,shouldThrow:t.shouldThrow,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.search):e.search})}const jg=typeof window<"u"?V.useLayoutEffect:V.useEffect;function wx(t){const e=V.useRef({value:t,prev:null}),n=e.current.value;return t!==n&&(e.current={value:t,prev:n}),e.current.prev}function zU(t,e,n={},s={}){V.useEffect(()=>{if(!t.current||s.disabled||typeof IntersectionObserver!="function")return;const r=new IntersectionObserver(([i])=>{e(i)},n);return r.observe(t.current),()=>{r.disconnect()}},[e,n,s.disabled,t])}function UU(t){const e=V.useRef(null);return V.useImperativeHandle(t,()=>e.current,[]),e}function oh(t){const e=Er();return V.useCallback(n=>e.navigate({...n,from:n.from??t?.from}),[t?.from,e])}var K2=a6();function HU(t,e){const n=Er(),[s,r]=V.useState(!1),i=V.useRef(!1),o=UU(e),{activeProps:c,inactiveProps:u,activeOptions:h,to:m,preload:p,preloadDelay:y,hashScrollIntoView:v,replace:x,startTransition:_,resetScroll:S,viewTransition:k,children:C,target:N,disabled:R,style:O,className:E,onClick:D,onFocus:B,onMouseEnter:q,onMouseLeave:P,onTouchStart:G,ignoreBlocker:z,params:K,search:Z,hash:W,state:I,mask:Y,reloadDocument:J,unsafeRelative:$,from:j,_fromLocation:M,...F}=t,A=tr({select:Qe=>Qe.location.search,structuralSharing:!0}),Q=t.from,se=V.useMemo(()=>({...t,from:Q}),[n,A,Q,t._fromLocation,t.hash,t.to,t.search,t.params,t.state,t.mask,t.unsafeRelative]),X=V.useMemo(()=>n.buildLocation({...se}),[n,se]),ae=V.useMemo(()=>{if(R)return;let Qe=X.maskedLocation?X.maskedLocation.url.href:X.url.href,tt=!1;return n.origin&&(Qe.startsWith(n.origin)?Qe=n.history.createHref(Qe.replace(n.origin,""))||"/":tt=!0),{href:Qe,external:tt}},[R,X.maskedLocation,X.url,n.origin,n.history]),ke=V.useMemo(()=>{if(ae?.external)return ae.href;try{return new URL(m),m}catch{}},[m,ae]),Se=t.reloadDocument||ke?!1:p??n.options.defaultPreload,Ve=y??n.options.defaultPreloadDelay??0,Le=tr({select:Qe=>{if(ke)return!1;if(h?.exact){if(!J9(Qe.location.pathname,X.pathname,n.basepath))return!1}else{const tt=W0(Qe.location.pathname,n.basepath),Mt=W0(X.pathname,n.basepath);if(!(tt.startsWith(Mt)&&(tt.length===Mt.length||tt[Mt.length]==="/")))return!1}return(h?.includeSearch??!0)&&!Tl(Qe.location.search,X.search,{partial:!h?.exact,ignoreUndefined:!h?.explicitUndefined})?!1:h?.includeHash?Qe.location.hash===X.hash:!0}}),rt=V.useCallback(()=>{n.preloadRoute({...se}).catch(Qe=>{console.warn(Qe),console.warn(NU)})},[n,se]),Ye=V.useCallback(Qe=>{Qe?.isIntersecting&&rt()},[rt]);zU(o,Ye,WU,{disabled:!!R||Se!=="viewport"}),V.useEffect(()=>{i.current||!R&&Se==="render"&&(rt(),i.current=!0)},[R,rt,Se]);const Je=Qe=>{const tt=Qe.currentTarget.getAttribute("target"),Mt=N!==void 0?N:tt;if(!R&&!GU(Qe)&&!Qe.defaultPrevented&&(!Mt||Mt==="_self")&&Qe.button===0){Qe.preventDefault(),K2.flushSync(()=>{r(!0)});const fe=n.subscribe("onResolved",()=>{fe(),r(!1)});n.navigate({...se,replace:x,resetScroll:S,hashScrollIntoView:v,startTransition:_,viewTransition:k,ignoreBlocker:z})}};if(ke)return{...F,ref:o,href:ke,...C&&{children:C},...N&&{target:N},...R&&{disabled:R},...O&&{style:O},...E&&{className:E},...D&&{onClick:D},...B&&{onFocus:B},...q&&{onMouseEnter:q},...P&&{onMouseLeave:P},...G&&{onTouchStart:G}};const Rt=Qe=>{R||Se&&rt()},At=Rt,Zt=Qe=>{if(!(R||!Se))if(!Ve)rt();else{const tt=Qe.target;if(Ed.has(tt))return;const Mt=setTimeout(()=>{Ed.delete(tt),rt()},Ve);Ed.set(tt,Mt)}},on=Qe=>{if(R||!Se||!Ve)return;const tt=Qe.target,Mt=Ed.get(tt);Mt&&(clearTimeout(Mt),Ed.delete(tt))},qt=Le?xo(c,{})??FU:Sx,tn=Le?Sx:xo(u,{})??Sx,je=[E,qt.className,tn.className].filter(Boolean).join(" "),We=(O||qt.style||tn.style)&&{...O,...qt.style,...tn.style};return{...F,...qt,...tn,href:ae?.href,ref:o,onClick:Ad([D,Je]),onFocus:Ad([B,Rt]),onMouseEnter:Ad([q,Zt]),onMouseLeave:Ad([P,on]),onTouchStart:Ad([G,At]),disabled:!!R,target:N,...We&&{style:We},...je&&{className:je},...R&&VU,...Le&&qU,...s&&KU}}const Sx={},FU={className:"active"},VU={role:"link","aria-disabled":!0},qU={"data-status":"active","aria-current":"page"},KU={"data-transitioning":"transitioning"},Ed=new WeakMap,WU={rootMargin:"100px"},Ad=t=>e=>{for(const n of t)if(n){if(e.defaultPrevented)return;n(e)}},ac=V.forwardRef((t,e)=>{const{_asChild:n,...s}=t,{type:r,ref:i,...o}=HU(s,e),c=typeof s.children=="function"?s.children({isActive:o["data-status"]==="active"}):s.children;return n===void 0&&delete o.disabled,V.createElement(n||"a",{...o,ref:i},c)});function GU(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}let YU=class extends x6{constructor(e){super(e),this.useMatch=n=>Pi({select:n?.select,from:this.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Pi({...n,from:this.id,select:s=>n?.select?n.select(s.context):s.context}),this.useSearch=n=>pv({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useParams=n=>jp({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useLoaderDeps=n=>q2({...n,from:this.id}),this.useLoaderData=n=>V2({...n,from:this.id}),this.useNavigate=()=>oh({from:this.fullPath}),this.Link=ks.forwardRef((n,s)=>f.jsx(ac,{ref:s,from:this.fullPath,...n})),this.$$typeof=Symbol.for("react.memo")}};function Fi(t){return new YU(t)}class ZU extends EU{constructor(e){super(e),this.useMatch=n=>Pi({select:n?.select,from:this.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Pi({...n,from:this.id,select:s=>n?.select?n.select(s.context):s.context}),this.useSearch=n=>pv({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useParams=n=>jp({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useLoaderDeps=n=>q2({...n,from:this.id}),this.useLoaderData=n=>V2({...n,from:this.id}),this.useNavigate=()=>oh({from:this.fullPath}),this.Link=ks.forwardRef((n,s)=>f.jsx(ac,{ref:s,from:this.fullPath,...n})),this.$$typeof=Symbol.for("react.memo")}}function XU(t){return new ZU(t)}function U3(t){return typeof t=="object"?new H3(t,{silent:!0}).createRoute(t):new H3(t,{silent:!0}).createRoute}class H3{constructor(e,n){this.path=e,this.createRoute=s=>{this.silent;const r=Fi(s);return r.isRoot=!1,r},this.silent=n?.silent}}class F3{constructor(e){this.useMatch=n=>Pi({select:n?.select,from:this.options.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Pi({from:this.options.id,select:s=>n?.select?n.select(s.context):s.context}),this.useSearch=n=>pv({select:n?.select,structuralSharing:n?.structuralSharing,from:this.options.id}),this.useParams=n=>jp({select:n?.select,structuralSharing:n?.structuralSharing,from:this.options.id}),this.useLoaderDeps=n=>q2({...n,from:this.options.id}),this.useLoaderData=n=>V2({...n,from:this.options.id}),this.useNavigate=()=>{const n=Er();return oh({from:n.routesById[this.options.id].fullPath})},this.options=e,this.$$typeof=Symbol.for("react.memo")}}function V3(t){return typeof t=="object"?new F3(t):e=>new F3({id:t,...e})}function JU(){const t=Er(),e=V.useRef({router:t,mounted:!1}),[n,s]=V.useState(!1),{hasPendingMatches:r,isLoading:i}=tr({select:p=>({isLoading:p.isLoading,hasPendingMatches:p.matches.some(y=>y.status==="pending")}),structuralSharing:!0}),o=wx(i),c=i||n||r,u=wx(c),h=i||r,m=wx(h);return t.startTransition=p=>{s(!0),V.startTransition(()=>{p(),s(!1)})},V.useEffect(()=>{const p=t.history.subscribe(t.load),y=t.buildLocation({to:t.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return Rl(t.latestLocation.publicHref)!==Rl(y.publicHref)&&t.commitLocation({...y,replace:!0}),()=>{p()}},[t,t.history]),jg(()=>{if(typeof window<"u"&&t.ssr||e.current.router===t&&e.current.mounted)return;e.current={router:t,mounted:!0},(async()=>{try{await t.load()}catch(y){console.error(y)}})()},[t]),jg(()=>{o&&!i&&t.emit({type:"onLoad",...Ol(t.state)})},[o,t,i]),jg(()=>{m&&!h&&t.emit({type:"onBeforeRouteMount",...Ol(t.state)})},[h,m,t]),jg(()=>{if(u&&!c){const p=Ol(t.state);t.emit({type:"onResolved",...p}),t.__store.setState(y=>({...y,status:"idle",resolvedLocation:y.location})),p.hrefChanged&&aU(t)}},[c,u,t]),null}function QU(t){const e=tr({select:n=>`not-found-${n.location.pathname}-${n.status}`});return f.jsx(F2,{getResetKey:()=>e,onCatch:(n,s)=>{if(kr(n))t.onCatch?.(n,s);else throw n},errorComponent:({error:n})=>{if(kr(n))return t.fallback?.(n);throw n},children:t.children})}function eH(){return f.jsx("p",{children:"Not Found"})}function fu(t){return f.jsx(f.Fragment,{children:t.children})}function S6(t,e,n){return e.options.notFoundComponent?f.jsx(e.options.notFoundComponent,{...n}):t.options.defaultNotFoundComponent?f.jsx(t.options.defaultNotFoundComponent,{...n}):f.jsx(eH,{})}function tH({children:t}){const e=Er();return e.isServer?f.jsx("script",{nonce:e.options.ssr?.nonce,dangerouslySetInnerHTML:{__html:t+";document.currentScript.remove()"}}):null}function nH(){const t=Er();if(!t.isScrollRestoring||!t.isServer||typeof t.options.scrollRestoration=="function"&&!t.options.scrollRestoration({location:t.latestLocation}))return null;const n=(t.options.getScrollRestorationKey||Fw)(t.latestLocation),s=n!==Fw(t.latestLocation)?n:void 0,r={storageKey:G0,shouldScrollRestoration:!0};return s&&(r.key=s),f.jsx(tH,{children:`(${h6.toString()})(${JSON.stringify(r)})`})}const k6=V.memo(function({matchId:e}){const n=Er(),s=tr({select:k=>{const C=k.matches.find(N=>N.id===e);return Ca(C),{routeId:C.routeId,ssr:C.ssr,_displayPending:C._displayPending}},structuralSharing:!0}),r=n.routesById[s.routeId],i=r.options.pendingComponent??n.options.defaultPendingComponent,o=i?f.jsx(i,{}):null,c=r.options.errorComponent??n.options.defaultErrorComponent,u=r.options.onCatch??n.options.defaultOnCatch,h=r.isRoot?r.options.notFoundComponent??n.options.notFoundRoute?.options.component:r.options.notFoundComponent,m=s.ssr===!1||s.ssr==="data-only",p=(!r.isRoot||r.options.wrapInSuspense||m)&&(r.options.wrapInSuspense??i??(r.options.errorComponent?.preload||m))?V.Suspense:fu,y=c?F2:fu,v=h?QU:fu,x=tr({select:k=>k.loadedAt}),_=tr({select:k=>{const C=k.matches.findIndex(N=>N.id===e);return k.matches[C-1]?.routeId}}),S=r.isRoot?r.options.shellComponent??fu:fu;return f.jsxs(S,{children:[f.jsx(fv.Provider,{value:e,children:f.jsx(p,{fallback:o,children:f.jsx(y,{getResetKey:()=>x,errorComponent:c||dv,onCatch:(k,C)=>{if(kr(k))throw k;u?.(k,C)},children:f.jsx(v,{fallback:k=>{if(!h||k.routeId&&k.routeId!==s.routeId||!k.routeId&&!r.isRoot)throw k;return V.createElement(h,k)},children:m||s._displayPending?f.jsx(jU,{fallback:o,children:f.jsx(q3,{matchId:e})}):f.jsx(q3,{matchId:e})})})})}),_===_r&&n.options.scrollRestoration?f.jsxs(f.Fragment,{children:[f.jsx(sH,{}),f.jsx(nH,{})]}):null]})});function sH(){const t=Er(),e=V.useRef(void 0);return f.jsx("script",{suppressHydrationWarning:!0,ref:n=>{n&&(e.current===void 0||e.current.href!==t.latestLocation.href)&&(t.emit({type:"onRendered",...Ol(t.state)}),e.current=t.latestLocation)}},t.latestLocation.state.__TSR_key)}const q3=V.memo(function({matchId:e}){const n=Er(),{match:s,key:r,routeId:i}=tr({select:u=>{const h=u.matches.find(x=>x.id===e),m=h.routeId,y=(n.routesById[m].options.remountDeps??n.options.defaultRemountDeps)?.({routeId:m,loaderDeps:h.loaderDeps,params:h._strictParams,search:h._strictSearch});return{key:y?JSON.stringify(y):void 0,routeId:m,match:{id:h.id,status:h.status,error:h.error,invalid:h.invalid,_forcePending:h._forcePending,_displayPending:h._displayPending}}},structuralSharing:!0}),o=n.routesById[i],c=V.useMemo(()=>{const u=o.options.component??n.options.defaultComponent;return u?f.jsx(u,{},r):f.jsx(C6,{})},[r,o.options.component,n.options.defaultComponent]);if(s._displayPending)throw n.getMatch(s.id)?._nonReactive.displayPendingPromise;if(s._forcePending)throw n.getMatch(s.id)?._nonReactive.minPendingPromise;if(s.status==="pending"){const u=o.options.pendingMinMs??n.options.defaultPendingMinMs;if(u){const h=n.getMatch(s.id);if(h&&!h._nonReactive.minPendingPromise&&!n.isServer){const m=$u();h._nonReactive.minPendingPromise=m,setTimeout(()=>{m.resolve(),h._nonReactive.minPendingPromise=void 0},u)}}throw n.getMatch(s.id)?._nonReactive.loadPromise}if(s.status==="notFound")return Ca(kr(s.error)),S6(n,o,s.error);if(s.status==="redirected")throw Ca(Gr(s.error)),n.getMatch(s.id)?._nonReactive.loadPromise;if(s.status==="error"){if(n.isServer){const u=(o.options.errorComponent??n.options.defaultErrorComponent)||dv;return f.jsx(u,{error:s.error,reset:void 0,info:{componentStack:""}})}throw s.error}return c}),C6=V.memo(function(){const e=Er(),n=V.useContext(fv),s=tr({select:h=>h.matches.find(m=>m.id===n)?.routeId}),r=e.routesById[s],i=tr({select:h=>{const p=h.matches.find(y=>y.id===n);return Ca(p),p.globalNotFound}}),o=tr({select:h=>{const m=h.matches,p=m.findIndex(y=>y.id===n);return m[p+1]?.id}}),c=e.options.defaultPendingComponent?f.jsx(e.options.defaultPendingComponent,{}):null;if(i)return S6(e,r,void 0);if(!o)return null;const u=f.jsx(k6,{matchId:o});return s===_r?f.jsx(V.Suspense,{fallback:c,children:u}):u});function rH(){const t=Er(),n=t.routesById[_r].options.pendingComponent??t.options.defaultPendingComponent,s=n?f.jsx(n,{}):null,r=t.isServer||typeof document<"u"&&t.ssr?fu:V.Suspense,i=f.jsxs(r,{fallback:s,children:[!t.isServer&&f.jsx(JU,{}),f.jsx(iH,{})]});return t.options.InnerWrap?f.jsx(t.options.InnerWrap,{children:i}):i}function iH(){const t=Er(),e=tr({select:r=>r.matches[0]?.id}),n=tr({select:r=>r.loadedAt}),s=e?f.jsx(k6,{matchId:e}):null;return f.jsx(fv.Provider,{value:e,children:t.options.disableGlobalCatchBoundary?s:f.jsx(F2,{getResetKey:()=>n,errorComponent:dv,onCatch:r=>{r.message||r.toString()},children:s})})}const aH=t=>new oH(t);class oH extends xU{constructor(e){super(e)}}typeof globalThis<"u"?(globalThis.createFileRoute=U3,globalThis.createLazyFileRoute=V3):typeof window<"u"&&(window.createFileRoute=U3,window.createLazyFileRoute=V3);function lH({router:t,children:e,...n}){Object.keys(n).length>0&&t.update({...t.options,...n,context:{...t.options.context,...n.context}});const s=w6(),r=f.jsx(s.Provider,{value:t,children:e});return t.options.Wrap?f.jsx(t.options.Wrap,{children:r}):r}function cH({router:t,...e}){return f.jsx(lH,{router:t,...e,children:f.jsx(rH,{})})}let Wd={};async function uH(){try{const t=await fetch("/config.json");if(t.ok){const e=await t.json();Wd={...Wd,...e}}else console.warn("Failed to load config.json, using defaults");return Wd}catch(t){return console.warn("Error loading config:",t),Wd}}function $i(){return Wd}function hH(t,e){return e.some(n=>n.includes("*")?new RegExp(`^${n.replace(/\*/g,".*")}$`).test(t):n===t)}var Tp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},dH={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},fH=class{#e=dH;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},wl=new fH;function pH(t){setTimeout(t,0)}var zl=typeof window>"u"||"Deno"in globalThis;function Js(){}function mH(t,e){return typeof t=="function"?t(e):t}function qw(t){return typeof t=="number"&&t>=0&&t!==1/0}function N6(t,e){return Math.max(t+(e||0)-Date.now(),0)}function To(t,e){return typeof t=="function"?t(e):t}function Vr(t,e){return typeof t=="function"?t(e):t}function K3(t,e){const{type:n="all",exact:s,fetchStatus:r,predicate:i,queryKey:o,stale:c}=t;if(o){if(s){if(e.queryHash!==W2(o,e.options))return!1}else if(!np(e.queryKey,o))return!1}if(n!=="all"){const u=e.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||r&&r!==e.state.fetchStatus||i&&!i(e))}function W3(t,e){const{exact:n,status:s,predicate:r,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(tp(e.options.mutationKey)!==tp(i))return!1}else if(!np(e.options.mutationKey,i))return!1}return!(s&&e.state.status!==s||r&&!r(e))}function W2(t,e){return(e?.queryKeyHashFn||tp)(t)}function tp(t){return JSON.stringify(t,(e,n)=>Ww(n)?Object.keys(n).sort().reduce((s,r)=>(s[r]=n[r],s),{}):n)}function np(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>np(t[n],e[n])):!1}var gH=Object.prototype.hasOwnProperty;function E6(t,e){if(t===e)return t;const n=G3(t)&&G3(e);if(!n&&!(Ww(t)&&Ww(e)))return e;const r=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,c=n?new Array(o):{};let u=0;for(let h=0;h<o;h++){const m=n?h:i[h],p=t[m],y=e[m];if(p===y){c[m]=p,(n?h<r:gH.call(t,m))&&u++;continue}if(p===null||y===null||typeof p!="object"||typeof y!="object"){c[m]=y;continue}const v=E6(p,y);c[m]=v,v===p&&u++}return r===o&&u===r?t:c}function Kw(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function G3(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Ww(t){if(!Y3(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Y3(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Y3(t){return Object.prototype.toString.call(t)==="[object Object]"}function yH(t){return new Promise(e=>{wl.setTimeout(e,t)})}function Gw(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?E6(t,e):e}function Z3(t){return t}function vH(t,e,n=0){const s=[...t,e];return n&&s.length>n?s.slice(1):s}function bH(t,e,n=0){const s=[e,...t];return n&&s.length>n?s.slice(0,-1):s}var G2=Symbol();function A6(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===G2?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function j6(t,e){return typeof t=="function"?t(...e):!!t}function _H(t,e,n){let s=!1,r;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(r??=e(),s||(s=!0,r.aborted?n():r.addEventListener("abort",n,{once:!0})),r)}),t}var xH=class extends Tp{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!zl&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Y2=new xH;function Yw(){let t,e;const n=new Promise((r,i)=>{t=r,e=i});n.status="pending",n.catch(()=>{});function s(r){Object.assign(n,r),delete n.resolve,delete n.reject}return n.resolve=r=>{s({status:"fulfilled",value:r}),t(r)},n.reject=r=>{s({status:"rejected",reason:r}),e(r)},n}var wH=pH;function SH(){let t=[],e=0,n=c=>{c()},s=c=>{c()},r=wH;const i=c=>{e?t.push(c):r(()=>{n(c)})},o=()=>{const c=t;t=[],c.length&&r(()=>{s(()=>{c.forEach(u=>{n(u)})})})};return{batch:c=>{let u;e++;try{u=c()}finally{e--,e||o()}return u},batchCalls:c=>(...u)=>{i(()=>{c(...u)})},schedule:i,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{s=c},setScheduler:c=>{r=c}}}var hs=SH(),kH=class extends Tp{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!zl&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},X0=new kH;function CH(t){return Math.min(1e3*2**t,3e4)}function T6(t){return(t??"online")==="online"?X0.isOnline():!0}var Zw=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function R6(t){let e=!1,n=0,s;const r=Yw(),i=()=>r.status!=="pending",o=_=>{if(!i()){const S=new Zw(_);y(S),t.onCancel?.(S)}},c=()=>{e=!0},u=()=>{e=!1},h=()=>Y2.isFocused()&&(t.networkMode==="always"||X0.isOnline())&&t.canRun(),m=()=>T6(t.networkMode)&&t.canRun(),p=_=>{i()||(s?.(),r.resolve(_))},y=_=>{i()||(s?.(),r.reject(_))},v=()=>new Promise(_=>{s=S=>{(i()||h())&&_(S)},t.onPause?.()}).then(()=>{s=void 0,i()||t.onContinue?.()}),x=()=>{if(i())return;let _;const S=n===0?t.initialPromise:void 0;try{_=S??t.fn()}catch(k){_=Promise.reject(k)}Promise.resolve(_).then(p).catch(k=>{if(i())return;const C=t.retry??(zl?0:3),N=t.retryDelay??CH,R=typeof N=="function"?N(n,k):N,O=C===!0||typeof C=="number"&&n<C||typeof C=="function"&&C(n,k);if(e||!O){y(k);return}n++,t.onFail?.(n,k),yH(R).then(()=>h()?void 0:v()).then(()=>{e?y(k):x()})})};return{promise:r,status:()=>r.status,cancel:o,continue:()=>(s?.(),r),cancelRetry:c,continueRetry:u,canStart:m,start:()=>(m()?x():v().then(x),r)}}var O6=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),qw(this.gcTime)&&(this.#e=wl.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(zl?1/0:300*1e3))}clearGcTimeout(){this.#e&&(wl.clearTimeout(this.#e),this.#e=void 0)}},NH=class extends O6{#e;#t;#n;#r;#s;#o;#a;constructor(t){super(),this.#a=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.client,this.#n=this.#r.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=J3(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(t){if(this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=J3(this.options);e.data!==void 0&&(this.setState(X3(e.data,e.dataUpdatedAt)),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=Gw(this.state.data,t,this.options);return this.#i({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#i({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#s?.promise;return this.#s?.cancel(t),e?e.then(Js).catch(Js):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>Vr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===G2||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>To(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!N6(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#s&&(this.#a?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(t&&this.setOptions(t),!this.options.queryFn){const c=this.observers.find(u=>u.options.queryFn);c&&this.setOptions(c.options)}const n=new AbortController,s=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#a=!0,n.signal)})},r=()=>{const c=A6(this.options,e),h=(()=>{const m={client:this.#r,queryKey:this.queryKey,meta:this.meta};return s(m),m})();return this.#a=!1,this.options.persister?this.options.persister(c,h,this):c(h)},o=(()=>{const c={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:r};return s(c),c})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#i({type:"fetch",meta:o.fetchOptions?.meta}),this.#s=R6({initialPromise:e?.initialPromise,fn:o.fetchFn,onCancel:c=>{c instanceof Zw&&c.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(c,u)=>{this.#i({type:"failed",failureCount:c,error:u})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const c=await this.#s.start();if(c===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(c),this.#n.config.onSuccess?.(c,this),this.#n.config.onSettled?.(c,this.state.error,this),c}catch(c){if(c instanceof Zw){if(c.silent)return this.#s.promise;if(c.revert){if(this.state.data===void 0)throw c;return this.state.data}}throw this.#i({type:"error",error:c}),this.#n.config.onError?.(c,this),this.#n.config.onSettled?.(this.state.data,c,this),c}finally{this.scheduleGc()}}#i(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...M6(n.data,this.options),fetchMeta:t.meta??null};case"success":const s={...n,...X3(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?s:void 0,s;case"error":const r=t.error;return{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),hs.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function M6(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:T6(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function X3(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function J3(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,s=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var EH=class extends Tp{constructor(t,e){super(),this.options=e,this.#e=t,this.#i=null,this.#a=Yw(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#s;#o;#a;#i;#m;#d;#f;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Q3(this.#t,this.options)?this.#h():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Xw(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Xw(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#_(),this.#x(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Vr(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),e._defaulted&&!Kw(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const s=this.hasListeners();s&&ej(this.#t,n,this.options,e)&&this.#h(),this.updateResult(),s&&(this.#t!==n||Vr(this.options.enabled,this.#t)!==Vr(e.enabled,this.#t)||To(this.options.staleTime,this.#t)!==To(e.staleTime,this.#t))&&this.#g();const r=this.#y();s&&(this.#t!==n||Vr(this.options.enabled,this.#t)!==Vr(e.enabled,this.#t)||r!==this.#l)&&this.#v(r)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return jH(this,n)&&(this.#r=n,this.#o=this.options,this.#s=this.#t.state),n}getCurrentResult(){return this.#r}trackResult(t,e){return new Proxy(t,{get:(n,s)=>(this.trackProp(s),e?.(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#a.status==="pending"&&this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,s))})}trackProp(t){this.#p.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#h({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#h(t){this.#w();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(Js)),e}#g(){this.#_();const t=To(this.options.staleTime,this.#t);if(zl||this.#r.isStale||!qw(t))return;const n=N6(this.#r.dataUpdatedAt,t)+1;this.#c=wl.setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(t){this.#x(),this.#l=t,!(zl||Vr(this.options.enabled,this.#t)===!1||!qw(this.#l)||this.#l===0)&&(this.#u=wl.setInterval(()=>{(this.options.refetchIntervalInBackground||Y2.isFocused())&&this.#h()},this.#l))}#b(){this.#g(),this.#v(this.#y())}#_(){this.#c&&(wl.clearTimeout(this.#c),this.#c=void 0)}#x(){this.#u&&(wl.clearInterval(this.#u),this.#u=void 0)}createResult(t,e){const n=this.#t,s=this.options,r=this.#r,i=this.#s,o=this.#o,u=t!==n?t.state:this.#n,{state:h}=t;let m={...h},p=!1,y;if(e._optimisticResults){const B=this.hasListeners(),q=!B&&Q3(t,e),P=B&&ej(t,n,e,s);(q||P)&&(m={...m,...M6(h.data,t.options)}),e._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:v,errorUpdatedAt:x,status:_}=m;y=m.data;let S=!1;if(e.placeholderData!==void 0&&y===void 0&&_==="pending"){let B;r?.isPlaceholderData&&e.placeholderData===o?.placeholderData?(B=r.data,S=!0):B=typeof e.placeholderData=="function"?e.placeholderData(this.#f?.state.data,this.#f):e.placeholderData,B!==void 0&&(_="success",y=Gw(r?.data,B,e),p=!0)}if(e.select&&y!==void 0&&!S)if(r&&y===i?.data&&e.select===this.#m)y=this.#d;else try{this.#m=e.select,y=e.select(y),y=Gw(r?.data,y,e),this.#d=y,this.#i=null}catch(B){this.#i=B}this.#i&&(v=this.#i,y=this.#d,x=Date.now(),_="error");const k=m.fetchStatus==="fetching",C=_==="pending",N=_==="error",R=C&&k,O=y!==void 0,D={status:_,fetchStatus:m.fetchStatus,isPending:C,isSuccess:_==="success",isError:N,isInitialLoading:R,isLoading:R,data:y,dataUpdatedAt:m.dataUpdatedAt,error:v,errorUpdatedAt:x,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>u.dataUpdateCount||m.errorUpdateCount>u.errorUpdateCount,isFetching:k,isRefetching:k&&!C,isLoadingError:N&&!O,isPaused:m.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:N&&O,isStale:Z2(t,e),refetch:this.refetch,promise:this.#a,isEnabled:Vr(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const B=G=>{D.status==="error"?G.reject(D.error):D.data!==void 0&&G.resolve(D.data)},q=()=>{const G=this.#a=D.promise=Yw();B(G)},P=this.#a;switch(P.status){case"pending":t.queryHash===n.queryHash&&B(P);break;case"fulfilled":(D.status==="error"||D.data!==P.value)&&q();break;case"rejected":(D.status!=="error"||D.error!==P.reason)&&q();break}}return D}updateResult(){const t=this.#r,e=this.createResult(this.#t,this.options);if(this.#s=this.#t.state,this.#o=this.options,this.#s.data!==void 0&&(this.#f=this.#t),Kw(e,t))return;this.#r=e;const n=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,r=typeof s=="function"?s():s;if(r==="all"||!r&&!this.#p.size)return!0;const i=new Set(r??this.#p);return this.options.throwOnError&&i.add("error"),Object.keys(this.#r).some(o=>{const c=o;return this.#r[c]!==t[c]&&i.has(c)})};this.#S({listeners:n()})}#w(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#S(t){hs.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function AH(t,e){return Vr(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Q3(t,e){return AH(t,e)||t.state.data!==void 0&&Xw(t,e,e.refetchOnMount)}function Xw(t,e,n){if(Vr(e.enabled,t)!==!1&&To(e.staleTime,t)!=="static"){const s=typeof n=="function"?n(t):n;return s==="always"||s!==!1&&Z2(t,e)}return!1}function ej(t,e,n,s){return(t!==e||Vr(s.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Z2(t,n)}function Z2(t,e){return Vr(e.enabled,t)!==!1&&t.isStaleByTime(To(e.staleTime,t))}function jH(t,e){return!Kw(t.getCurrentResult(),e)}function tj(t){return{onFetch:(e,n)=>{const s=e.options,r=e.fetchOptions?.meta?.fetchMore?.direction,i=e.state.data?.pages||[],o=e.state.data?.pageParams||[];let c={pages:[],pageParams:[]},u=0;const h=async()=>{let m=!1;const p=x=>{_H(x,()=>e.signal,()=>m=!0)},y=A6(e.options,e.fetchOptions),v=async(x,_,S)=>{if(m)return Promise.reject();if(_==null&&x.pages.length)return Promise.resolve(x);const C=(()=>{const E={client:e.client,queryKey:e.queryKey,pageParam:_,direction:S?"backward":"forward",meta:e.options.meta};return p(E),E})(),N=await y(C),{maxPages:R}=e.options,O=S?bH:vH;return{pages:O(x.pages,N,R),pageParams:O(x.pageParams,_,R)}};if(r&&i.length){const x=r==="backward",_=x?TH:nj,S={pages:i,pageParams:o},k=_(s,S);c=await v(S,k,x)}else{const x=t??i.length;do{const _=u===0?o[0]??s.initialPageParam:nj(s,c);if(u>0&&_==null)break;c=await v(c,_),u++}while(u<x)}return c};e.options.persister?e.fetchFn=()=>e.options.persister?.(h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=h}}}function nj(t,{pages:e,pageParams:n}){const s=e.length-1;return e.length>0?t.getNextPageParam(e[s],e,n[s],n):void 0}function TH(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var RH=class extends O6{#e;#t;#n;#r;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#n=t.mutationCache,this.#t=[],this.state=t.state||OH(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#s({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=R6({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(i,o)=>{this.#s({type:"failed",failureCount:i,error:o})},onPause:()=>{this.#s({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const s=this.state.status==="pending",r=!this.#r.canStart();try{if(s)e();else{this.#s({type:"pending",variables:t,isPaused:r}),await this.#n.config.onMutate?.(t,this,n);const o=await this.options.onMutate?.(t,n);o!==this.state.context&&this.#s({type:"pending",context:o,variables:t,isPaused:r})}const i=await this.#r.start();return await this.#n.config.onSuccess?.(i,t,this.state.context,this,n),await this.options.onSuccess?.(i,t,this.state.context,n),await this.#n.config.onSettled?.(i,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(i,null,t,this.state.context,n),this.#s({type:"success",data:i}),i}catch(i){try{await this.#n.config.onError?.(i,t,this.state.context,this,n)}catch(o){Promise.reject(o)}try{await this.options.onError?.(i,t,this.state.context,n)}catch(o){Promise.reject(o)}try{await this.#n.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this,n)}catch(o){Promise.reject(o)}try{await this.options.onSettled?.(void 0,i,t,this.state.context,n)}catch(o){Promise.reject(o)}throw this.#s({type:"error",error:i}),i}finally{this.#n.runNext(this)}}#s(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),hs.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(t)}),this.#n.notify({mutation:this,type:"updated",action:t})})}};function OH(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var MH=class extends Tp{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const s=new RH({client:t,mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(s),s}add(t){this.#e.add(t);const e=Tg(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=Tg(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const s=n.indexOf(t);s!==-1&&n.splice(s,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=Tg(t);if(typeof e=="string"){const s=this.#t.get(e)?.find(r=>r.state.status==="pending");return!s||s===t}else return!0}runNext(t){const e=Tg(t);return typeof e=="string"?this.#t.get(e)?.find(s=>s!==t&&s.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){hs.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>W3(e,n))}findAll(t={}){return this.getAll().filter(e=>W3(t,e))}notify(t){hs.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return hs.batch(()=>Promise.all(t.map(e=>e.continue().catch(Js))))}};function Tg(t){return t.options.scope?.id}var DH=class extends Tp{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const s=e.queryKey,r=e.queryHash??W2(s,e);let i=this.get(r);return i||(i=new NH({client:t,queryKey:s,queryHash:r,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(i)),i}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){hs.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>K3(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>K3(t,n)):e}notify(t){hs.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){hs.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){hs.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},BH=class{#e;#t;#n;#r;#s;#o;#a;#i;constructor(t={}){this.#e=t.queryCache||new DH,this.#t=t.mutationCache||new MH,this.#n=t.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#a=Y2.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=X0.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#a?.(),this.#a=void 0,this.#i?.(),this.#i=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),s=n.state.data;return s===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(To(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const s=n.data;return[e,s]})}setQueryData(t,e,n){const s=this.defaultQueryOptions({queryKey:t}),i=this.#e.get(s.queryHash)?.state.data,o=mH(e,i);if(o!==void 0)return this.#e.build(this,s).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return hs.batch(()=>this.#e.findAll(t).map(({queryKey:s})=>[s,this.setQueryData(s,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;hs.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return hs.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},s=hs.batch(()=>this.#e.findAll(t).map(r=>r.cancel(n)));return Promise.all(s).then(Js).catch(Js)}invalidateQueries(t,e={}){return hs.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},s=hs.batch(()=>this.#e.findAll(t).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let i=r.fetch(void 0,n);return n.throwOnError||(i=i.catch(Js)),r.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(Js)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(To(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Js).catch(Js)}fetchInfiniteQuery(t){return t.behavior=tj(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Js).catch(Js)}ensureInfiniteQueryData(t){return t.behavior=tj(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return X0.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(tp(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(s=>{np(t,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(t,e){this.#s.set(tp(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#s.values()],n={};return e.forEach(s=>{np(t,s.mutationKey)&&Object.assign(n,s.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=W2(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===G2&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},D6=V.createContext(void 0),LH=t=>{const e=V.useContext(D6);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},IH=({client:t,children:e})=>(V.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),f.jsx(D6.Provider,{value:t,children:e})),B6=V.createContext(!1),PH=()=>V.useContext(B6);B6.Provider;function $H(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var zH=V.createContext($H()),UH=()=>V.useContext(zH),HH=(t,e,n)=>{const s=n?.state.error&&typeof t.throwOnError=="function"?j6(t.throwOnError,[n.state.error,n]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||s)&&(e.isReset()||(t.retryOnMount=!1))},FH=t=>{V.useEffect(()=>{t.clearReset()},[t])},VH=({result:t,errorResetBoundary:e,throwOnError:n,query:s,suspense:r})=>t.isError&&!e.isReset()&&!t.isFetching&&s&&(r&&t.data===void 0||j6(n,[t.error,s])),qH=t=>{if(t.suspense){const n=r=>r==="static"?r:Math.max(r??1e3,1e3),s=t.staleTime;t.staleTime=typeof s=="function"?(...r)=>n(s(...r)):n(s),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},KH=(t,e)=>t.isLoading&&t.isFetching&&!e,WH=(t,e)=>t?.suspense&&e.isPending,sj=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function GH(t,e,n){const s=PH(),r=UH(),i=LH(),o=i.defaultQueryOptions(t);i.getDefaultOptions().queries?._experimental_beforeQuery?.(o);const c=i.getQueryCache().get(o.queryHash);o._optimisticResults=s?"isRestoring":"optimistic",qH(o),HH(o,r,c),FH(r);const u=!i.getQueryCache().get(o.queryHash),[h]=V.useState(()=>new e(i,o)),m=h.getOptimisticResult(o),p=!s&&t.subscribed!==!1;if(V.useSyncExternalStore(V.useCallback(y=>{const v=p?h.subscribe(hs.batchCalls(y)):Js;return h.updateResult(),v},[h,p]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),V.useEffect(()=>{h.setOptions(o)},[o,h]),WH(o,m))throw sj(o,h,r);if(VH({result:m,errorResetBoundary:r,throwOnError:o.throwOnError,query:c,suspense:o.suspense}))throw m.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(o,m),o.experimental_prefetchInRender&&!zl&&KH(m,s)&&(u?sj(o,h,r):c?.promise)?.catch(Js).finally(()=>{h.updateResult()}),o.notifyOnChangeProps?m:h.trackResult(m)}function J0(t,e){return GH(t,EH)}function we(t,e,n){function s(c,u){if(c._zod||Object.defineProperty(c,"_zod",{value:{def:u,constr:o,traits:new Set},enumerable:!1}),c._zod.traits.has(t))return;c._zod.traits.add(t),e(c,u);const h=o.prototype,m=Object.keys(h);for(let p=0;p<m.length;p++){const y=m[p];y in c||(c[y]=h[y].bind(c))}}const r=n?.Parent??Object;class i extends r{}Object.defineProperty(i,"name",{value:t});function o(c){var u;const h=n?.Parent?new i:this;s(h,c),(u=h._zod).deferred??(u.deferred=[]);for(const m of h._zod.deferred)m();return h}return Object.defineProperty(o,"init",{value:s}),Object.defineProperty(o,Symbol.hasInstance,{value:c=>n?.Parent&&c instanceof n.Parent?!0:c?._zod?.traits?.has(t)}),Object.defineProperty(o,"name",{value:t}),o}class Ou extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class L6 extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const I6={};function Ul(t){return I6}function P6(t){const e=Object.values(t).filter(s=>typeof s=="number");return Object.entries(t).filter(([s,r])=>e.indexOf(+s)===-1).map(([s,r])=>r)}function Jw(t,e){return typeof e=="bigint"?e.toString():e}function X2(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function J2(t){return t==null}function Q2(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}const rj=Symbol("evaluating");function Vt(t,e,n){let s;Object.defineProperty(t,e,{get(){if(s!==rj)return s===void 0&&(s=rj,s=n()),s},set(r){Object.defineProperty(t,e,{value:r})},configurable:!0})}function oc(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Ho(...t){const e={};for(const n of t){const s=Object.getOwnPropertyDescriptors(n);Object.assign(e,s)}return Object.defineProperties({},e)}function ij(t){return JSON.stringify(t)}function YH(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const $6="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function Q0(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const ZH=X2(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function sp(t){if(Q0(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(Q0(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function z6(t){return sp(t)?{...t}:Array.isArray(t)?[...t]:t}const XH=new Set(["string","number","symbol"]);function mv(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Fo(t,e,n){const s=new t._zod.constr(e??t._zod.def);return(!e||n?.parent)&&(s._zod.parent=t),s}function dt(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function JH(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}function QH(t,e){const n=t._zod.def,s=n.checks;if(s&&s.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const i=Ho(t._zod.def,{get shape(){const o={};for(const c in e){if(!(c in n.shape))throw new Error(`Unrecognized key: "${c}"`);e[c]&&(o[c]=n.shape[c])}return oc(this,"shape",o),o},checks:[]});return Fo(t,i)}function eF(t,e){const n=t._zod.def,s=n.checks;if(s&&s.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const i=Ho(t._zod.def,{get shape(){const o={...t._zod.def.shape};for(const c in e){if(!(c in n.shape))throw new Error(`Unrecognized key: "${c}"`);e[c]&&delete o[c]}return oc(this,"shape",o),o},checks:[]});return Fo(t,i)}function tF(t,e){if(!sp(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0){const i=t._zod.def.shape;for(const o in e)if(Object.getOwnPropertyDescriptor(i,o)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const r=Ho(t._zod.def,{get shape(){const i={...t._zod.def.shape,...e};return oc(this,"shape",i),i}});return Fo(t,r)}function nF(t,e){if(!sp(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n=Ho(t._zod.def,{get shape(){const s={...t._zod.def.shape,...e};return oc(this,"shape",s),s}});return Fo(t,n)}function sF(t,e){const n=Ho(t._zod.def,{get shape(){const s={...t._zod.def.shape,...e._zod.def.shape};return oc(this,"shape",s),s},get catchall(){return e._zod.def.catchall},checks:[]});return Fo(t,n)}function rF(t,e,n){const r=e._zod.def.checks;if(r&&r.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const o=Ho(e._zod.def,{get shape(){const c=e._zod.def.shape,u={...c};if(n)for(const h in n){if(!(h in c))throw new Error(`Unrecognized key: "${h}"`);n[h]&&(u[h]=t?new t({type:"optional",innerType:c[h]}):c[h])}else for(const h in c)u[h]=t?new t({type:"optional",innerType:c[h]}):c[h];return oc(this,"shape",u),u},checks:[]});return Fo(e,o)}function iF(t,e,n){const s=Ho(e._zod.def,{get shape(){const r=e._zod.def.shape,i={...r};if(n)for(const o in n){if(!(o in i))throw new Error(`Unrecognized key: "${o}"`);n[o]&&(i[o]=new t({type:"nonoptional",innerType:r[o]}))}else for(const o in r)i[o]=new t({type:"nonoptional",innerType:r[o]});return oc(this,"shape",i),i}});return Fo(e,s)}function wu(t,e=0){if(t.aborted===!0)return!0;for(let n=e;n<t.issues.length;n++)if(t.issues[n]?.continue!==!0)return!0;return!1}function U6(t,e){return e.map(n=>{var s;return(s=n).path??(s.path=[]),n.path.unshift(t),n})}function Rg(t){return typeof t=="string"?t:t?.message}function Hl(t,e,n){const s={...t,path:t.path??[]};if(!t.message){const r=Rg(t.inst?._zod.def?.error?.(t))??Rg(e?.error?.(t))??Rg(n.customError?.(t))??Rg(n.localeError?.(t))??"Invalid input";s.message=r}return delete s.inst,delete s.continue,e?.reportInput||delete s.input,s}function eC(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function rp(...t){const[e,n,s]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:s}:{...e}}const H6=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,Jw,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},F6=we("$ZodError",H6),V6=we("$ZodError",H6,{Parent:Error});function aF(t,e=n=>n.message){const n={},s=[];for(const r of t.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(e(r))):s.push(e(r));return{formErrors:s,fieldErrors:n}}function oF(t,e=n=>n.message){const n={_errors:[]},s=r=>{for(const i of r.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(o=>s({issues:o}));else if(i.code==="invalid_key")s({issues:i.issues});else if(i.code==="invalid_element")s({issues:i.issues});else if(i.path.length===0)n._errors.push(e(i));else{let o=n,c=0;for(;c<i.path.length;){const u=i.path[c];c===i.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(e(i))):o[u]=o[u]||{_errors:[]},o=o[u],c++}}};return s(t),n}const tC=t=>(e,n,s,r)=>{const i=s?Object.assign(s,{async:!1}):{async:!1},o=e._zod.run({value:n,issues:[]},i);if(o instanceof Promise)throw new Ou;if(o.issues.length){const c=new(r?.Err??t)(o.issues.map(u=>Hl(u,i,Ul())));throw $6(c,r?.callee),c}return o.value},nC=t=>async(e,n,s,r)=>{const i=s?Object.assign(s,{async:!0}):{async:!0};let o=e._zod.run({value:n,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const c=new(r?.Err??t)(o.issues.map(u=>Hl(u,i,Ul())));throw $6(c,r?.callee),c}return o.value},gv=t=>(e,n,s)=>{const r=s?{...s,async:!1}:{async:!1},i=e._zod.run({value:n,issues:[]},r);if(i instanceof Promise)throw new Ou;return i.issues.length?{success:!1,error:new(t??F6)(i.issues.map(o=>Hl(o,r,Ul())))}:{success:!0,data:i.value}},lF=gv(V6),yv=t=>async(e,n,s)=>{const r=s?Object.assign(s,{async:!0}):{async:!0};let i=e._zod.run({value:n,issues:[]},r);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new t(i.issues.map(o=>Hl(o,r,Ul())))}:{success:!0,data:i.value}},cF=yv(V6),uF=t=>(e,n,s)=>{const r=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return tC(t)(e,n,r)},hF=t=>(e,n,s)=>tC(t)(e,n,s),dF=t=>async(e,n,s)=>{const r=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return nC(t)(e,n,r)},fF=t=>async(e,n,s)=>nC(t)(e,n,s),pF=t=>(e,n,s)=>{const r=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return gv(t)(e,n,r)},mF=t=>(e,n,s)=>gv(t)(e,n,s),gF=t=>async(e,n,s)=>{const r=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return yv(t)(e,n,r)},yF=t=>async(e,n,s)=>yv(t)(e,n,s),vF=/^[cC][^\s-]{8,}$/,bF=/^[0-9a-z]+$/,_F=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,xF=/^[0-9a-vA-V]{20}$/,wF=/^[A-Za-z0-9]{27}$/,SF=/^[a-zA-Z0-9_-]{21}$/,kF=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,CF=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,aj=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,NF=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,EF="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function AF(){return new RegExp(EF,"u")}const jF=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,TF=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,RF=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,OF=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,MF=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,q6=/^[A-Za-z0-9_-]*$/,DF=/^\+[1-9]\d{6,14}$/,K6="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",BF=new RegExp(`^${K6}$`);function W6(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function LF(t){return new RegExp(`^${W6(t)}$`)}function IF(t){const e=W6({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const s=`${e}(?:${n.join("|")})`;return new RegExp(`^${K6}T(?:${s})$`)}const PF=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},$F=/^[^A-Z]*$/,zF=/^[^a-z]*$/,Vi=we("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),UF=we("$ZodCheckMaxLength",(t,e)=>{var n;Vi.init(t,e),(n=t._zod.def).when??(n.when=s=>{const r=s.value;return!J2(r)&&r.length!==void 0}),t._zod.onattach.push(s=>{const r=s._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<r&&(s._zod.bag.maximum=e.maximum)}),t._zod.check=s=>{const r=s.value;if(r.length<=e.maximum)return;const o=eC(r);s.issues.push({origin:o,code:"too_big",maximum:e.maximum,inclusive:!0,input:r,inst:t,continue:!e.abort})}}),HF=we("$ZodCheckMinLength",(t,e)=>{var n;Vi.init(t,e),(n=t._zod.def).when??(n.when=s=>{const r=s.value;return!J2(r)&&r.length!==void 0}),t._zod.onattach.push(s=>{const r=s._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>r&&(s._zod.bag.minimum=e.minimum)}),t._zod.check=s=>{const r=s.value;if(r.length>=e.minimum)return;const o=eC(r);s.issues.push({origin:o,code:"too_small",minimum:e.minimum,inclusive:!0,input:r,inst:t,continue:!e.abort})}}),FF=we("$ZodCheckLengthEquals",(t,e)=>{var n;Vi.init(t,e),(n=t._zod.def).when??(n.when=s=>{const r=s.value;return!J2(r)&&r.length!==void 0}),t._zod.onattach.push(s=>{const r=s._zod.bag;r.minimum=e.length,r.maximum=e.length,r.length=e.length}),t._zod.check=s=>{const r=s.value,i=r.length;if(i===e.length)return;const o=eC(r),c=i>e.length;s.issues.push({origin:o,...c?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:s.value,inst:t,continue:!e.abort})}}),vv=we("$ZodCheckStringFormat",(t,e)=>{var n,s;Vi.init(t,e),t._zod.onattach.push(r=>{const i=r._zod.bag;i.format=e.format,e.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=r=>{e.pattern.lastIndex=0,!e.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:e.format,input:r.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(s=t._zod).check??(s.check=()=>{})}),VF=we("$ZodCheckRegex",(t,e)=>{vv.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),qF=we("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=$F),vv.init(t,e)}),KF=we("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=zF),vv.init(t,e)}),WF=we("$ZodCheckIncludes",(t,e)=>{Vi.init(t,e);const n=mv(e.includes),s=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=s,t._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(s)}),t._zod.check=r=>{r.value.includes(e.includes,e.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:r.value,inst:t,continue:!e.abort})}}),GF=we("$ZodCheckStartsWith",(t,e)=>{Vi.init(t,e);const n=new RegExp(`^${mv(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(s=>{const r=s._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),t._zod.check=s=>{s.value.startsWith(e.prefix)||s.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:s.value,inst:t,continue:!e.abort})}}),YF=we("$ZodCheckEndsWith",(t,e)=>{Vi.init(t,e);const n=new RegExp(`.*${mv(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(s=>{const r=s._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),t._zod.check=s=>{s.value.endsWith(e.suffix)||s.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:s.value,inst:t,continue:!e.abort})}}),ZF=we("$ZodCheckOverwrite",(t,e)=>{Vi.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class XF{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const s=e.split(`
`).filter(o=>o),r=Math.min(...s.map(o=>o.length-o.trimStart().length)),i=s.map(o=>o.slice(r)).map(o=>" ".repeat(this.indent*2)+o);for(const o of i)this.content.push(o)}compile(){const e=Function,n=this?.args,r=[...(this?.content??[""]).map(i=>`  ${i}`)];return new e(...n,r.join(`
`))}}const JF={major:4,minor:3,patch:4},Kn=we("$ZodType",(t,e)=>{var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=JF;const s=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&s.unshift(t);for(const r of s)for(const i of r._zod.onattach)i(t);if(s.length===0)(n=t._zod).deferred??(n.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const r=(o,c,u)=>{let h=wu(o),m;for(const p of c){if(p._zod.def.when){if(!p._zod.def.when(o))continue}else if(h)continue;const y=o.issues.length,v=p._zod.check(o);if(v instanceof Promise&&u?.async===!1)throw new Ou;if(m||v instanceof Promise)m=(m??Promise.resolve()).then(async()=>{await v,o.issues.length!==y&&(h||(h=wu(o,y)))});else{if(o.issues.length===y)continue;h||(h=wu(o,y))}}return m?m.then(()=>o):o},i=(o,c,u)=>{if(wu(o))return o.aborted=!0,o;const h=r(c,s,u);if(h instanceof Promise){if(u.async===!1)throw new Ou;return h.then(m=>t._zod.parse(m,u))}return t._zod.parse(h,u)};t._zod.run=(o,c)=>{if(c.skipChecks)return t._zod.parse(o,c);if(c.direction==="backward"){const h=t._zod.parse({value:o.value,issues:[]},{...c,skipChecks:!0});return h instanceof Promise?h.then(m=>i(m,o,c)):i(h,o,c)}const u=t._zod.parse(o,c);if(u instanceof Promise){if(c.async===!1)throw new Ou;return u.then(h=>r(h,s,c))}return r(u,s,c)}}Vt(t,"~standard",()=>({validate:r=>{try{const i=lF(t,r);return i.success?{value:i.data}:{issues:i.error?.issues}}catch{return cF(t,r).then(o=>o.success?{value:o.data}:{issues:o.error?.issues})}},vendor:"zod",version:1}))}),sC=we("$ZodString",(t,e)=>{Kn.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??PF(t._zod.bag),t._zod.parse=(n,s)=>{if(e.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:t}),n}}),dn=we("$ZodStringFormat",(t,e)=>{vv.init(t,e),sC.init(t,e)}),QF=we("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=CF),dn.init(t,e)}),eV=we("$ZodUUID",(t,e)=>{if(e.version){const s={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(s===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=aj(s))}else e.pattern??(e.pattern=aj());dn.init(t,e)}),tV=we("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=NF),dn.init(t,e)}),nV=we("$ZodURL",(t,e)=>{dn.init(t,e),t._zod.check=n=>{try{const s=n.value.trim(),r=new URL(s);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(r.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(r.protocol.endsWith(":")?r.protocol.slice(0,-1):r.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=r.href:n.value=s;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),sV=we("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=AF()),dn.init(t,e)}),rV=we("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=SF),dn.init(t,e)}),iV=we("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=vF),dn.init(t,e)}),aV=we("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=bF),dn.init(t,e)}),oV=we("$ZodULID",(t,e)=>{e.pattern??(e.pattern=_F),dn.init(t,e)}),lV=we("$ZodXID",(t,e)=>{e.pattern??(e.pattern=xF),dn.init(t,e)}),cV=we("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=wF),dn.init(t,e)}),uV=we("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=IF(e)),dn.init(t,e)}),hV=we("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=BF),dn.init(t,e)}),dV=we("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=LF(e)),dn.init(t,e)}),fV=we("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=kF),dn.init(t,e)}),pV=we("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=jF),dn.init(t,e),t._zod.bag.format="ipv4"}),mV=we("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=TF),dn.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),gV=we("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=RF),dn.init(t,e)}),yV=we("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=OF),dn.init(t,e),t._zod.check=n=>{const s=n.value.split("/");try{if(s.length!==2)throw new Error;const[r,i]=s;if(!i)throw new Error;const o=Number(i);if(`${o}`!==i)throw new Error;if(o<0||o>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function G6(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const vV=we("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=MF),dn.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{G6(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function bV(t){if(!q6.test(t))return!1;const e=t.replace(/[-_]/g,s=>s==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return G6(n)}const _V=we("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=q6),dn.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{bV(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),xV=we("$ZodE164",(t,e)=>{e.pattern??(e.pattern=DF),dn.init(t,e)});function wV(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[s]=n;if(!s)return!1;const r=JSON.parse(atob(s));return!("typ"in r&&r?.typ!=="JWT"||!r.alg||e&&(!("alg"in r)||r.alg!==e))}catch{return!1}}const SV=we("$ZodJWT",(t,e)=>{dn.init(t,e),t._zod.check=n=>{wV(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),kV=we("$ZodUnknown",(t,e)=>{Kn.init(t,e),t._zod.parse=n=>n}),CV=we("$ZodNever",(t,e)=>{Kn.init(t,e),t._zod.parse=(n,s)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});function oj(t,e,n){t.issues.length&&e.issues.push(...U6(n,t.issues)),e.value[n]=t.value}const NV=we("$ZodArray",(t,e)=>{Kn.init(t,e),t._zod.parse=(n,s)=>{const r=n.value;if(!Array.isArray(r))return n.issues.push({expected:"array",code:"invalid_type",input:r,inst:t}),n;n.value=Array(r.length);const i=[];for(let o=0;o<r.length;o++){const c=r[o],u=e.element._zod.run({value:c,issues:[]},s);u instanceof Promise?i.push(u.then(h=>oj(h,n,o))):oj(u,n,o)}return i.length?Promise.all(i).then(()=>n):n}});function ey(t,e,n,s,r){if(t.issues.length){if(r&&!(n in s))return;e.issues.push(...U6(n,t.issues))}t.value===void 0?n in s&&(e.value[n]=void 0):e.value[n]=t.value}function Y6(t){const e=Object.keys(t.shape);for(const s of e)if(!t.shape?.[s]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${s}": expected a Zod schema`);const n=JH(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function Z6(t,e,n,s,r,i){const o=[],c=r.keySet,u=r.catchall._zod,h=u.def.type,m=u.optout==="optional";for(const p in e){if(c.has(p))continue;if(h==="never"){o.push(p);continue}const y=u.run({value:e[p],issues:[]},s);y instanceof Promise?t.push(y.then(v=>ey(v,n,p,e,m))):ey(y,n,p,e,m)}return o.length&&n.issues.push({code:"unrecognized_keys",keys:o,input:e,inst:i}),t.length?Promise.all(t).then(()=>n):n}const EV=we("$ZodObject",(t,e)=>{if(Kn.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const c=e.shape;Object.defineProperty(e,"shape",{get:()=>{const u={...c};return Object.defineProperty(e,"shape",{value:u}),u}})}const s=X2(()=>Y6(e));Vt(t._zod,"propValues",()=>{const c=e.shape,u={};for(const h in c){const m=c[h]._zod;if(m.values){u[h]??(u[h]=new Set);for(const p of m.values)u[h].add(p)}}return u});const r=Q0,i=e.catchall;let o;t._zod.parse=(c,u)=>{o??(o=s.value);const h=c.value;if(!r(h))return c.issues.push({expected:"object",code:"invalid_type",input:h,inst:t}),c;c.value={};const m=[],p=o.shape;for(const y of o.keys){const v=p[y],x=v._zod.optout==="optional",_=v._zod.run({value:h[y],issues:[]},u);_ instanceof Promise?m.push(_.then(S=>ey(S,c,y,h,x))):ey(_,c,y,h,x)}return i?Z6(m,h,c,u,s.value,t):m.length?Promise.all(m).then(()=>c):c}}),AV=we("$ZodObjectJIT",(t,e)=>{EV.init(t,e);const n=t._zod.parse,s=X2(()=>Y6(e)),r=y=>{const v=new XF(["shape","payload","ctx"]),x=s.value,_=N=>{const R=ij(N);return`shape[${R}]._zod.run({ value: input[${R}], issues: [] }, ctx)`};v.write("const input = payload.value;");const S=Object.create(null);let k=0;for(const N of x.keys)S[N]=`key_${k++}`;v.write("const newResult = {};");for(const N of x.keys){const R=S[N],O=ij(N),D=y[N]?._zod?.optout==="optional";v.write(`const ${R} = ${_(N)};`),D?v.write(`
        if (${R}.issues.length) {
          if (${O} in input) {
            payload.issues = payload.issues.concat(${R}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${O}, ...iss.path] : [${O}]
            })));
          }
        }
        
        if (${R}.value === undefined) {
          if (${O} in input) {
            newResult[${O}] = undefined;
          }
        } else {
          newResult[${O}] = ${R}.value;
        }
        
      `):v.write(`
        if (${R}.issues.length) {
          payload.issues = payload.issues.concat(${R}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${O}, ...iss.path] : [${O}]
          })));
        }
        
        if (${R}.value === undefined) {
          if (${O} in input) {
            newResult[${O}] = undefined;
          }
        } else {
          newResult[${O}] = ${R}.value;
        }
        
      `)}v.write("payload.value = newResult;"),v.write("return payload;");const C=v.compile();return(N,R)=>C(y,N,R)};let i;const o=Q0,c=!I6.jitless,h=c&&ZH.value,m=e.catchall;let p;t._zod.parse=(y,v)=>{p??(p=s.value);const x=y.value;return o(x)?c&&h&&v?.async===!1&&v.jitless!==!0?(i||(i=r(e.shape)),y=i(y,v),m?Z6([],x,y,v,p,t):y):n(y,v):(y.issues.push({expected:"object",code:"invalid_type",input:x,inst:t}),y)}});function lj(t,e,n,s){for(const i of t)if(i.issues.length===0)return e.value=i.value,e;const r=t.filter(i=>!wu(i));return r.length===1?(e.value=r[0].value,r[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(i=>i.issues.map(o=>Hl(o,s,Ul())))}),e)}const jV=we("$ZodUnion",(t,e)=>{Kn.init(t,e),Vt(t._zod,"optin",()=>e.options.some(r=>r._zod.optin==="optional")?"optional":void 0),Vt(t._zod,"optout",()=>e.options.some(r=>r._zod.optout==="optional")?"optional":void 0),Vt(t._zod,"values",()=>{if(e.options.every(r=>r._zod.values))return new Set(e.options.flatMap(r=>Array.from(r._zod.values)))}),Vt(t._zod,"pattern",()=>{if(e.options.every(r=>r._zod.pattern)){const r=e.options.map(i=>i._zod.pattern);return new RegExp(`^(${r.map(i=>Q2(i.source)).join("|")})$`)}});const n=e.options.length===1,s=e.options[0]._zod.run;t._zod.parse=(r,i)=>{if(n)return s(r,i);let o=!1;const c=[];for(const u of e.options){const h=u._zod.run({value:r.value,issues:[]},i);if(h instanceof Promise)c.push(h),o=!0;else{if(h.issues.length===0)return h;c.push(h)}}return o?Promise.all(c).then(u=>lj(u,r,t,i)):lj(c,r,t,i)}}),TV=we("$ZodIntersection",(t,e)=>{Kn.init(t,e),t._zod.parse=(n,s)=>{const r=n.value,i=e.left._zod.run({value:r,issues:[]},s),o=e.right._zod.run({value:r,issues:[]},s);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([u,h])=>cj(n,u,h)):cj(n,i,o)}});function Qw(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(sp(t)&&sp(e)){const n=Object.keys(e),s=Object.keys(t).filter(i=>n.indexOf(i)!==-1),r={...t,...e};for(const i of s){const o=Qw(t[i],e[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};r[i]=o.data}return{valid:!0,data:r}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let s=0;s<t.length;s++){const r=t[s],i=e[s],o=Qw(r,i);if(!o.valid)return{valid:!1,mergeErrorPath:[s,...o.mergeErrorPath]};n.push(o.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function cj(t,e,n){const s=new Map;let r;for(const c of e.issues)if(c.code==="unrecognized_keys"){r??(r=c);for(const u of c.keys)s.has(u)||s.set(u,{}),s.get(u).l=!0}else t.issues.push(c);for(const c of n.issues)if(c.code==="unrecognized_keys")for(const u of c.keys)s.has(u)||s.set(u,{}),s.get(u).r=!0;else t.issues.push(c);const i=[...s].filter(([,c])=>c.l&&c.r).map(([c])=>c);if(i.length&&r&&t.issues.push({...r,keys:i}),wu(t))return t;const o=Qw(e.value,n.value);if(!o.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(o.mergeErrorPath)}`);return t.value=o.data,t}const RV=we("$ZodEnum",(t,e)=>{Kn.init(t,e);const n=P6(e.entries),s=new Set(n);t._zod.values=s,t._zod.pattern=new RegExp(`^(${n.filter(r=>XH.has(typeof r)).map(r=>typeof r=="string"?mv(r):r.toString()).join("|")})$`),t._zod.parse=(r,i)=>{const o=r.value;return s.has(o)||r.issues.push({code:"invalid_value",values:n,input:o,inst:t}),r}}),OV=we("$ZodTransform",(t,e)=>{Kn.init(t,e),t._zod.parse=(n,s)=>{if(s.direction==="backward")throw new L6(t.constructor.name);const r=e.transform(n.value,n);if(s.async)return(r instanceof Promise?r:Promise.resolve(r)).then(o=>(n.value=o,n));if(r instanceof Promise)throw new Ou;return n.value=r,n}});function uj(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const X6=we("$ZodOptional",(t,e)=>{Kn.init(t,e),t._zod.optin="optional",t._zod.optout="optional",Vt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),Vt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${Q2(n.source)})?$`):void 0}),t._zod.parse=(n,s)=>{if(e.innerType._zod.optin==="optional"){const r=e.innerType._zod.run(n,s);return r instanceof Promise?r.then(i=>uj(i,n.value)):uj(r,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,s)}}),MV=we("$ZodExactOptional",(t,e)=>{X6.init(t,e),Vt(t._zod,"values",()=>e.innerType._zod.values),Vt(t._zod,"pattern",()=>e.innerType._zod.pattern),t._zod.parse=(n,s)=>e.innerType._zod.run(n,s)}),DV=we("$ZodNullable",(t,e)=>{Kn.init(t,e),Vt(t._zod,"optin",()=>e.innerType._zod.optin),Vt(t._zod,"optout",()=>e.innerType._zod.optout),Vt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${Q2(n.source)}|null)$`):void 0}),Vt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,s)=>n.value===null?n:e.innerType._zod.run(n,s)}),BV=we("$ZodDefault",(t,e)=>{Kn.init(t,e),t._zod.optin="optional",Vt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,s)=>{if(s.direction==="backward")return e.innerType._zod.run(n,s);if(n.value===void 0)return n.value=e.defaultValue,n;const r=e.innerType._zod.run(n,s);return r instanceof Promise?r.then(i=>hj(i,e)):hj(r,e)}});function hj(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const LV=we("$ZodPrefault",(t,e)=>{Kn.init(t,e),t._zod.optin="optional",Vt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,s)=>(s.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,s))}),IV=we("$ZodNonOptional",(t,e)=>{Kn.init(t,e),Vt(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(s=>s!==void 0)):void 0}),t._zod.parse=(n,s)=>{const r=e.innerType._zod.run(n,s);return r instanceof Promise?r.then(i=>dj(i,t)):dj(r,t)}});function dj(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const PV=we("$ZodCatch",(t,e)=>{Kn.init(t,e),Vt(t._zod,"optin",()=>e.innerType._zod.optin),Vt(t._zod,"optout",()=>e.innerType._zod.optout),Vt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,s)=>{if(s.direction==="backward")return e.innerType._zod.run(n,s);const r=e.innerType._zod.run(n,s);return r instanceof Promise?r.then(i=>(n.value=i.value,i.issues.length&&(n.value=e.catchValue({...n,error:{issues:i.issues.map(o=>Hl(o,s,Ul()))},input:n.value}),n.issues=[]),n)):(n.value=r.value,r.issues.length&&(n.value=e.catchValue({...n,error:{issues:r.issues.map(i=>Hl(i,s,Ul()))},input:n.value}),n.issues=[]),n)}}),$V=we("$ZodPipe",(t,e)=>{Kn.init(t,e),Vt(t._zod,"values",()=>e.in._zod.values),Vt(t._zod,"optin",()=>e.in._zod.optin),Vt(t._zod,"optout",()=>e.out._zod.optout),Vt(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,s)=>{if(s.direction==="backward"){const i=e.out._zod.run(n,s);return i instanceof Promise?i.then(o=>Og(o,e.in,s)):Og(i,e.in,s)}const r=e.in._zod.run(n,s);return r instanceof Promise?r.then(i=>Og(i,e.out,s)):Og(r,e.out,s)}});function Og(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const zV=we("$ZodReadonly",(t,e)=>{Kn.init(t,e),Vt(t._zod,"propValues",()=>e.innerType._zod.propValues),Vt(t._zod,"values",()=>e.innerType._zod.values),Vt(t._zod,"optin",()=>e.innerType?._zod?.optin),Vt(t._zod,"optout",()=>e.innerType?._zod?.optout),t._zod.parse=(n,s)=>{if(s.direction==="backward")return e.innerType._zod.run(n,s);const r=e.innerType._zod.run(n,s);return r instanceof Promise?r.then(fj):fj(r)}});function fj(t){return t.value=Object.freeze(t.value),t}const UV=we("$ZodCustom",(t,e)=>{Vi.init(t,e),Kn.init(t,e),t._zod.parse=(n,s)=>n,t._zod.check=n=>{const s=n.value,r=e.fn(s);if(r instanceof Promise)return r.then(i=>pj(i,n,s,t));pj(r,n,s,t)}});function pj(t,e,n,s){if(!t){const r={code:"custom",input:n,inst:s,path:[...s._zod.def.path??[]],continue:!s._zod.def.abort};s._zod.def.params&&(r.params=s._zod.def.params),e.issues.push(rp(r))}}var mj;class HV{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const s=n[0];return this._map.set(e,s),s&&typeof s=="object"&&"id"in s&&this._idmap.set(s.id,e),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const s={...this.get(n)??{}};delete s.id;const r={...s,...this._map.get(e)};return Object.keys(r).length?r:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function FV(){return new HV}(mj=globalThis).__zod_globalRegistry??(mj.__zod_globalRegistry=FV());const Gd=globalThis.__zod_globalRegistry;function VV(t,e){return new t({type:"string",...dt(e)})}function qV(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...dt(e)})}function gj(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...dt(e)})}function KV(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...dt(e)})}function WV(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...dt(e)})}function GV(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...dt(e)})}function YV(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...dt(e)})}function ZV(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...dt(e)})}function XV(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...dt(e)})}function JV(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...dt(e)})}function QV(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...dt(e)})}function eq(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...dt(e)})}function tq(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...dt(e)})}function nq(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...dt(e)})}function sq(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...dt(e)})}function rq(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...dt(e)})}function iq(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...dt(e)})}function aq(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...dt(e)})}function oq(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...dt(e)})}function lq(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...dt(e)})}function cq(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...dt(e)})}function uq(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...dt(e)})}function hq(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...dt(e)})}function dq(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...dt(e)})}function fq(t,e){return new t({type:"string",format:"date",check:"string_format",...dt(e)})}function pq(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...dt(e)})}function mq(t,e){return new t({type:"string",format:"duration",check:"string_format",...dt(e)})}function gq(t){return new t({type:"unknown"})}function yq(t,e){return new t({type:"never",...dt(e)})}function J6(t,e){return new UF({check:"max_length",...dt(e),maximum:t})}function ty(t,e){return new HF({check:"min_length",...dt(e),minimum:t})}function Q6(t,e){return new FF({check:"length_equals",...dt(e),length:t})}function vq(t,e){return new VF({check:"string_format",format:"regex",...dt(e),pattern:t})}function bq(t){return new qF({check:"string_format",format:"lowercase",...dt(t)})}function _q(t){return new KF({check:"string_format",format:"uppercase",...dt(t)})}function xq(t,e){return new WF({check:"string_format",format:"includes",...dt(e),includes:t})}function wq(t,e){return new GF({check:"string_format",format:"starts_with",...dt(e),prefix:t})}function Sq(t,e){return new YF({check:"string_format",format:"ends_with",...dt(e),suffix:t})}function lh(t){return new ZF({check:"overwrite",tx:t})}function kq(t){return lh(e=>e.normalize(t))}function Cq(){return lh(t=>t.trim())}function Nq(){return lh(t=>t.toLowerCase())}function Eq(){return lh(t=>t.toUpperCase())}function Aq(){return lh(t=>YH(t))}function jq(t,e,n){return new t({type:"array",element:e,...dt(n)})}function Tq(t,e,n){return new t({type:"custom",check:"custom",fn:e,...dt(n)})}function Rq(t){const e=Oq(n=>(n.addIssue=s=>{if(typeof s=="string")n.issues.push(rp(s,n.value,e._zod.def));else{const r=s;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=n.value),r.inst??(r.inst=e),r.continue??(r.continue=!e._zod.def.abort),n.issues.push(rp(r))}},t(n.value,n)));return e}function Oq(t,e){const n=new Vi({check:"custom",...dt(e)});return n._zod.check=t,n}function eD(t){let e=t?.target??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:t?.metadata??Gd,target:e,unrepresentable:t?.unrepresentable??"throw",override:t?.override??(()=>{}),io:t?.io??"output",counter:0,seen:new Map,cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0}}function ms(t,e,n={path:[],schemaPath:[]}){var s;const r=t._zod.def,i=e.seen.get(t);if(i)return i.count++,n.schemaPath.includes(t)&&(i.cycle=n.path),i.schema;const o={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,o);const c=t._zod.toJSONSchema?.();if(c)o.schema=c;else{const m={...n,schemaPath:[...n.schemaPath,t],path:n.path};if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,o.schema,m);else{const y=o.schema,v=e.processors[r.type];if(!v)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${r.type}`);v(t,e,y,m)}const p=t._zod.parent;p&&(o.ref||(o.ref=p),ms(p,e,m),e.seen.get(p).isParent=!0)}const u=e.metadataRegistry.get(t);return u&&Object.assign(o.schema,u),e.io==="input"&&js(t)&&(delete o.schema.examples,delete o.schema.default),e.io==="input"&&o.schema._prefault&&((s=o.schema).default??(s.default=o.schema._prefault)),delete o.schema._prefault,e.seen.get(t).schema}function tD(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const s=new Map;for(const o of t.seen.entries()){const c=t.metadataRegistry.get(o[0])?.id;if(c){const u=s.get(c);if(u&&u!==o[0])throw new Error(`Duplicate schema id "${c}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);s.set(c,o[0])}}const r=o=>{const c=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const p=t.external.registry.get(o[0])?.id,y=t.external.uri??(x=>x);if(p)return{ref:y(p)};const v=o[1].defId??o[1].schema.id??`schema${t.counter++}`;return o[1].defId=v,{defId:v,ref:`${y("__shared")}#/${c}/${v}`}}if(o[1]===n)return{ref:"#"};const h=`#/${c}/`,m=o[1].schema.id??`__schema${t.counter++}`;return{defId:m,ref:h+m}},i=o=>{if(o[1].schema.$ref)return;const c=o[1],{ref:u,defId:h}=r(o);c.def={...c.schema},h&&(c.defId=h);const m=c.schema;for(const p in m)delete m[p];m.$ref=u};if(t.cycles==="throw")for(const o of t.seen.entries()){const c=o[1];if(c.cycle)throw new Error(`Cycle detected: #/${c.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const o of t.seen.entries()){const c=o[1];if(e===o[0]){i(o);continue}if(t.external){const h=t.external.registry.get(o[0])?.id;if(e!==o[0]&&h){i(o);continue}}if(t.metadataRegistry.get(o[0])?.id){i(o);continue}if(c.cycle){i(o);continue}if(c.count>1&&t.reused==="ref"){i(o);continue}}}function nD(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const s=o=>{const c=t.seen.get(o);if(c.ref===null)return;const u=c.def??c.schema,h={...u},m=c.ref;if(c.ref=null,m){s(m);const y=t.seen.get(m),v=y.schema;if(v.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(u.allOf=u.allOf??[],u.allOf.push(v)):Object.assign(u,v),Object.assign(u,h),o._zod.parent===m)for(const _ in u)_==="$ref"||_==="allOf"||_ in h||delete u[_];if(v.$ref)for(const _ in u)_==="$ref"||_==="allOf"||_ in y.def&&JSON.stringify(u[_])===JSON.stringify(y.def[_])&&delete u[_]}const p=o._zod.parent;if(p&&p!==m){s(p);const y=t.seen.get(p);if(y?.schema.$ref&&(u.$ref=y.schema.$ref,y.def))for(const v in u)v==="$ref"||v==="allOf"||v in y.def&&JSON.stringify(u[v])===JSON.stringify(y.def[v])&&delete u[v]}t.override({zodSchema:o,jsonSchema:u,path:c.path??[]})};for(const o of[...t.seen.entries()].reverse())s(o[0]);const r={};if(t.target==="draft-2020-12"?r.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?r.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?r.$schema="http://json-schema.org/draft-04/schema#":t.target,t.external?.uri){const o=t.external.registry.get(e)?.id;if(!o)throw new Error("Schema is missing an `id` property");r.$id=t.external.uri(o)}Object.assign(r,n.def??n.schema);const i=t.external?.defs??{};for(const o of t.seen.entries()){const c=o[1];c.def&&c.defId&&(i[c.defId]=c.def)}t.external||Object.keys(i).length>0&&(t.target==="draft-2020-12"?r.$defs=i:r.definitions=i);try{const o=JSON.parse(JSON.stringify(r));return Object.defineProperty(o,"~standard",{value:{...e["~standard"],jsonSchema:{input:ny(e,"input",t.processors),output:ny(e,"output",t.processors)}},enumerable:!1,writable:!1}),o}catch{throw new Error("Error converting schema to JSON.")}}function js(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const s=t._zod.def;if(s.type==="transform")return!0;if(s.type==="array")return js(s.element,n);if(s.type==="set")return js(s.valueType,n);if(s.type==="lazy")return js(s.getter(),n);if(s.type==="promise"||s.type==="optional"||s.type==="nonoptional"||s.type==="nullable"||s.type==="readonly"||s.type==="default"||s.type==="prefault")return js(s.innerType,n);if(s.type==="intersection")return js(s.left,n)||js(s.right,n);if(s.type==="record"||s.type==="map")return js(s.keyType,n)||js(s.valueType,n);if(s.type==="pipe")return js(s.in,n)||js(s.out,n);if(s.type==="object"){for(const r in s.shape)if(js(s.shape[r],n))return!0;return!1}if(s.type==="union"){for(const r of s.options)if(js(r,n))return!0;return!1}if(s.type==="tuple"){for(const r of s.items)if(js(r,n))return!0;return!!(s.rest&&js(s.rest,n))}return!1}const Mq=(t,e={})=>n=>{const s=eD({...n,processors:e});return ms(t,s),tD(s,t),nD(s,t)},ny=(t,e,n={})=>s=>{const{libraryOptions:r,target:i}=s??{},o=eD({...r??{},target:i,io:e,processors:n});return ms(t,o),tD(o,t),nD(o,t)},Dq={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},Bq=(t,e,n,s)=>{const r=n;r.type="string";const{minimum:i,maximum:o,format:c,patterns:u,contentEncoding:h}=t._zod.bag;if(typeof i=="number"&&(r.minLength=i),typeof o=="number"&&(r.maxLength=o),c&&(r.format=Dq[c]??c,r.format===""&&delete r.format,c==="time"&&delete r.format),h&&(r.contentEncoding=h),u&&u.size>0){const m=[...u];m.length===1?r.pattern=m[0].source:m.length>1&&(r.allOf=[...m.map(p=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:p.source}))])}},Lq=(t,e,n,s)=>{n.not={}},Iq=(t,e,n,s)=>{},Pq=(t,e,n,s)=>{const r=t._zod.def,i=P6(r.entries);i.every(o=>typeof o=="number")&&(n.type="number"),i.every(o=>typeof o=="string")&&(n.type="string"),n.enum=i},$q=(t,e,n,s)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},zq=(t,e,n,s)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},Uq=(t,e,n,s)=>{const r=n,i=t._zod.def,{minimum:o,maximum:c}=t._zod.bag;typeof o=="number"&&(r.minItems=o),typeof c=="number"&&(r.maxItems=c),r.type="array",r.items=ms(i.element,e,{...s,path:[...s.path,"items"]})},Hq=(t,e,n,s)=>{const r=n,i=t._zod.def;r.type="object",r.properties={};const o=i.shape;for(const h in o)r.properties[h]=ms(o[h],e,{...s,path:[...s.path,"properties",h]});const c=new Set(Object.keys(o)),u=new Set([...c].filter(h=>{const m=i.shape[h]._zod;return e.io==="input"?m.optin===void 0:m.optout===void 0}));u.size>0&&(r.required=Array.from(u)),i.catchall?._zod.def.type==="never"?r.additionalProperties=!1:i.catchall?i.catchall&&(r.additionalProperties=ms(i.catchall,e,{...s,path:[...s.path,"additionalProperties"]})):e.io==="output"&&(r.additionalProperties=!1)},Fq=(t,e,n,s)=>{const r=t._zod.def,i=r.inclusive===!1,o=r.options.map((c,u)=>ms(c,e,{...s,path:[...s.path,i?"oneOf":"anyOf",u]}));i?n.oneOf=o:n.anyOf=o},Vq=(t,e,n,s)=>{const r=t._zod.def,i=ms(r.left,e,{...s,path:[...s.path,"allOf",0]}),o=ms(r.right,e,{...s,path:[...s.path,"allOf",1]}),c=h=>"allOf"in h&&Object.keys(h).length===1,u=[...c(i)?i.allOf:[i],...c(o)?o.allOf:[o]];n.allOf=u},qq=(t,e,n,s)=>{const r=t._zod.def,i=ms(r.innerType,e,s),o=e.seen.get(t);e.target==="openapi-3.0"?(o.ref=r.innerType,n.nullable=!0):n.anyOf=[i,{type:"null"}]},Kq=(t,e,n,s)=>{const r=t._zod.def;ms(r.innerType,e,s);const i=e.seen.get(t);i.ref=r.innerType},Wq=(t,e,n,s)=>{const r=t._zod.def;ms(r.innerType,e,s);const i=e.seen.get(t);i.ref=r.innerType,n.default=JSON.parse(JSON.stringify(r.defaultValue))},Gq=(t,e,n,s)=>{const r=t._zod.def;ms(r.innerType,e,s);const i=e.seen.get(t);i.ref=r.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(r.defaultValue)))},Yq=(t,e,n,s)=>{const r=t._zod.def;ms(r.innerType,e,s);const i=e.seen.get(t);i.ref=r.innerType;let o;try{o=r.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=o},Zq=(t,e,n,s)=>{const r=t._zod.def,i=e.io==="input"?r.in._zod.def.type==="transform"?r.out:r.in:r.out;ms(i,e,s);const o=e.seen.get(t);o.ref=i},Xq=(t,e,n,s)=>{const r=t._zod.def;ms(r.innerType,e,s);const i=e.seen.get(t);i.ref=r.innerType,n.readOnly=!0},sD=(t,e,n,s)=>{const r=t._zod.def;ms(r.innerType,e,s);const i=e.seen.get(t);i.ref=r.innerType},Jq=we("ZodISODateTime",(t,e)=>{uV.init(t,e),yn.init(t,e)});function Qq(t){return dq(Jq,t)}const eK=we("ZodISODate",(t,e)=>{hV.init(t,e),yn.init(t,e)});function tK(t){return fq(eK,t)}const nK=we("ZodISOTime",(t,e)=>{dV.init(t,e),yn.init(t,e)});function sK(t){return pq(nK,t)}const rK=we("ZodISODuration",(t,e)=>{fV.init(t,e),yn.init(t,e)});function iK(t){return mq(rK,t)}const aK=(t,e)=>{F6.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>oF(t,n)},flatten:{value:n=>aF(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,Jw,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,Jw,2)}},isEmpty:{get(){return t.issues.length===0}}})},ni=we("ZodError",aK,{Parent:Error}),oK=tC(ni),lK=nC(ni),cK=gv(ni),uK=yv(ni),hK=uF(ni),dK=hF(ni),fK=dF(ni),pK=fF(ni),mK=pF(ni),gK=mF(ni),yK=gF(ni),vK=yF(ni),Wn=we("ZodType",(t,e)=>(Kn.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:ny(t,"input"),output:ny(t,"output")}}),t.toJSONSchema=Mq(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(Ho(e,{checks:[...e.checks??[],...n.map(s=>typeof s=="function"?{_zod:{check:s,def:{check:"custom"},onattach:[]}}:s)]}),{parent:!0}),t.with=t.check,t.clone=(n,s)=>Fo(t,n,s),t.brand=()=>t,t.register=((n,s)=>(n.add(t,s),t)),t.parse=(n,s)=>oK(t,n,s,{callee:t.parse}),t.safeParse=(n,s)=>cK(t,n,s),t.parseAsync=async(n,s)=>lK(t,n,s,{callee:t.parseAsync}),t.safeParseAsync=async(n,s)=>uK(t,n,s),t.spa=t.safeParseAsync,t.encode=(n,s)=>hK(t,n,s),t.decode=(n,s)=>dK(t,n,s),t.encodeAsync=async(n,s)=>fK(t,n,s),t.decodeAsync=async(n,s)=>pK(t,n,s),t.safeEncode=(n,s)=>mK(t,n,s),t.safeDecode=(n,s)=>gK(t,n,s),t.safeEncodeAsync=async(n,s)=>yK(t,n,s),t.safeDecodeAsync=async(n,s)=>vK(t,n,s),t.refine=(n,s)=>t.check(uW(n,s)),t.superRefine=n=>t.check(hW(n)),t.overwrite=n=>t.check(lh(n)),t.optional=()=>bj(t),t.exactOptional=()=>XK(t),t.nullable=()=>_j(t),t.nullish=()=>bj(_j(t)),t.nonoptional=n=>sW(t,n),t.array=()=>HK(t),t.or=n=>qK([t,n]),t.and=n=>WK(t,n),t.transform=n=>xj(t,YK(n)),t.default=n=>eW(t,n),t.prefault=n=>nW(t,n),t.catch=n=>iW(t,n),t.pipe=n=>xj(t,n),t.readonly=()=>lW(t),t.describe=n=>{const s=t.clone();return Gd.add(s,{description:n}),s},Object.defineProperty(t,"description",{get(){return Gd.get(t)?.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return Gd.get(t);const s=t.clone();return Gd.add(s,n[0]),s},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t.apply=n=>n(t),t)),rD=we("_ZodString",(t,e)=>{sC.init(t,e),Wn.init(t,e),t._zod.processJSONSchema=(s,r,i)=>Bq(t,s,r);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...s)=>t.check(vq(...s)),t.includes=(...s)=>t.check(xq(...s)),t.startsWith=(...s)=>t.check(wq(...s)),t.endsWith=(...s)=>t.check(Sq(...s)),t.min=(...s)=>t.check(ty(...s)),t.max=(...s)=>t.check(J6(...s)),t.length=(...s)=>t.check(Q6(...s)),t.nonempty=(...s)=>t.check(ty(1,...s)),t.lowercase=s=>t.check(bq(s)),t.uppercase=s=>t.check(_q(s)),t.trim=()=>t.check(Cq()),t.normalize=(...s)=>t.check(kq(...s)),t.toLowerCase=()=>t.check(Nq()),t.toUpperCase=()=>t.check(Eq()),t.slugify=()=>t.check(Aq())}),bK=we("ZodString",(t,e)=>{sC.init(t,e),rD.init(t,e),t.email=n=>t.check(qV(xK,n)),t.url=n=>t.check(ZV(wK,n)),t.jwt=n=>t.check(hq(IK,n)),t.emoji=n=>t.check(XV(SK,n)),t.guid=n=>t.check(gj(yj,n)),t.uuid=n=>t.check(KV(Mg,n)),t.uuidv4=n=>t.check(WV(Mg,n)),t.uuidv6=n=>t.check(GV(Mg,n)),t.uuidv7=n=>t.check(YV(Mg,n)),t.nanoid=n=>t.check(JV(kK,n)),t.guid=n=>t.check(gj(yj,n)),t.cuid=n=>t.check(QV(CK,n)),t.cuid2=n=>t.check(eq(NK,n)),t.ulid=n=>t.check(tq(EK,n)),t.base64=n=>t.check(lq(DK,n)),t.base64url=n=>t.check(cq(BK,n)),t.xid=n=>t.check(nq(AK,n)),t.ksuid=n=>t.check(sq(jK,n)),t.ipv4=n=>t.check(rq(TK,n)),t.ipv6=n=>t.check(iq(RK,n)),t.cidrv4=n=>t.check(aq(OK,n)),t.cidrv6=n=>t.check(oq(MK,n)),t.e164=n=>t.check(uq(LK,n)),t.datetime=n=>t.check(Qq(n)),t.date=n=>t.check(tK(n)),t.time=n=>t.check(sK(n)),t.duration=n=>t.check(iK(n))});function _K(t){return VV(bK,t)}const yn=we("ZodStringFormat",(t,e)=>{dn.init(t,e),rD.init(t,e)}),xK=we("ZodEmail",(t,e)=>{tV.init(t,e),yn.init(t,e)}),yj=we("ZodGUID",(t,e)=>{QF.init(t,e),yn.init(t,e)}),Mg=we("ZodUUID",(t,e)=>{eV.init(t,e),yn.init(t,e)}),wK=we("ZodURL",(t,e)=>{nV.init(t,e),yn.init(t,e)}),SK=we("ZodEmoji",(t,e)=>{sV.init(t,e),yn.init(t,e)}),kK=we("ZodNanoID",(t,e)=>{rV.init(t,e),yn.init(t,e)}),CK=we("ZodCUID",(t,e)=>{iV.init(t,e),yn.init(t,e)}),NK=we("ZodCUID2",(t,e)=>{aV.init(t,e),yn.init(t,e)}),EK=we("ZodULID",(t,e)=>{oV.init(t,e),yn.init(t,e)}),AK=we("ZodXID",(t,e)=>{lV.init(t,e),yn.init(t,e)}),jK=we("ZodKSUID",(t,e)=>{cV.init(t,e),yn.init(t,e)}),TK=we("ZodIPv4",(t,e)=>{pV.init(t,e),yn.init(t,e)}),RK=we("ZodIPv6",(t,e)=>{mV.init(t,e),yn.init(t,e)}),OK=we("ZodCIDRv4",(t,e)=>{gV.init(t,e),yn.init(t,e)}),MK=we("ZodCIDRv6",(t,e)=>{yV.init(t,e),yn.init(t,e)}),DK=we("ZodBase64",(t,e)=>{vV.init(t,e),yn.init(t,e)}),BK=we("ZodBase64URL",(t,e)=>{_V.init(t,e),yn.init(t,e)}),LK=we("ZodE164",(t,e)=>{xV.init(t,e),yn.init(t,e)}),IK=we("ZodJWT",(t,e)=>{SV.init(t,e),yn.init(t,e)}),PK=we("ZodUnknown",(t,e)=>{kV.init(t,e),Wn.init(t,e),t._zod.processJSONSchema=(n,s,r)=>Iq()});function vj(){return gq(PK)}const $K=we("ZodNever",(t,e)=>{CV.init(t,e),Wn.init(t,e),t._zod.processJSONSchema=(n,s,r)=>Lq(t,n,s)});function zK(t){return yq($K,t)}const UK=we("ZodArray",(t,e)=>{NV.init(t,e),Wn.init(t,e),t._zod.processJSONSchema=(n,s,r)=>Uq(t,n,s,r),t.element=e.element,t.min=(n,s)=>t.check(ty(n,s)),t.nonempty=n=>t.check(ty(1,n)),t.max=(n,s)=>t.check(J6(n,s)),t.length=(n,s)=>t.check(Q6(n,s)),t.unwrap=()=>t.element});function HK(t,e){return jq(UK,t,e)}const FK=we("ZodObject",(t,e)=>{AV.init(t,e),Wn.init(t,e),t._zod.processJSONSchema=(n,s,r)=>Hq(t,n,s,r),Vt(t,"shape",()=>e.shape),t.keyof=()=>rC(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:vj()}),t.loose=()=>t.clone({...t._zod.def,catchall:vj()}),t.strict=()=>t.clone({...t._zod.def,catchall:zK()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>tF(t,n),t.safeExtend=n=>nF(t,n),t.merge=n=>sF(t,n),t.pick=n=>QH(t,n),t.omit=n=>eF(t,n),t.partial=(...n)=>rF(aD,t,n[0]),t.required=(...n)=>iF(oD,t,n[0])});function iD(t,e){const n={type:"object",shape:t??{},...dt(e)};return new FK(n)}const VK=we("ZodUnion",(t,e)=>{jV.init(t,e),Wn.init(t,e),t._zod.processJSONSchema=(n,s,r)=>Fq(t,n,s,r),t.options=e.options});function qK(t,e){return new VK({type:"union",options:t,...dt(e)})}const KK=we("ZodIntersection",(t,e)=>{TV.init(t,e),Wn.init(t,e),t._zod.processJSONSchema=(n,s,r)=>Vq(t,n,s,r)});function WK(t,e){return new KK({type:"intersection",left:t,right:e})}const eS=we("ZodEnum",(t,e)=>{RV.init(t,e),Wn.init(t,e),t._zod.processJSONSchema=(s,r,i)=>Pq(t,s,r),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(s,r)=>{const i={};for(const o of s)if(n.has(o))i[o]=e.entries[o];else throw new Error(`Key ${o} not found in enum`);return new eS({...e,checks:[],...dt(r),entries:i})},t.exclude=(s,r)=>{const i={...e.entries};for(const o of s)if(n.has(o))delete i[o];else throw new Error(`Key ${o} not found in enum`);return new eS({...e,checks:[],...dt(r),entries:i})}});function rC(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(s=>[s,s])):t;return new eS({type:"enum",entries:n,...dt(e)})}const GK=we("ZodTransform",(t,e)=>{OV.init(t,e),Wn.init(t,e),t._zod.processJSONSchema=(n,s,r)=>zq(t,n),t._zod.parse=(n,s)=>{if(s.direction==="backward")throw new L6(t.constructor.name);n.addIssue=i=>{if(typeof i=="string")n.issues.push(rp(i,n.value,e));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=n.value),o.inst??(o.inst=t),n.issues.push(rp(o))}};const r=e.transform(n.value,n);return r instanceof Promise?r.then(i=>(n.value=i,n)):(n.value=r,n)}});function YK(t){return new GK({type:"transform",transform:t})}const aD=we("ZodOptional",(t,e)=>{X6.init(t,e),Wn.init(t,e),t._zod.processJSONSchema=(n,s,r)=>sD(t,n,s,r),t.unwrap=()=>t._zod.def.innerType});function bj(t){return new aD({type:"optional",innerType:t})}const ZK=we("ZodExactOptional",(t,e)=>{MV.init(t,e),Wn.init(t,e),t._zod.processJSONSchema=(n,s,r)=>sD(t,n,s,r),t.unwrap=()=>t._zod.def.innerType});function XK(t){return new ZK({type:"optional",innerType:t})}const JK=we("ZodNullable",(t,e)=>{DV.init(t,e),Wn.init(t,e),t._zod.processJSONSchema=(n,s,r)=>qq(t,n,s,r),t.unwrap=()=>t._zod.def.innerType});function _j(t){return new JK({type:"nullable",innerType:t})}const QK=we("ZodDefault",(t,e)=>{BV.init(t,e),Wn.init(t,e),t._zod.processJSONSchema=(n,s,r)=>Wq(t,n,s,r),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function eW(t,e){return new QK({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():z6(e)}})}const tW=we("ZodPrefault",(t,e)=>{LV.init(t,e),Wn.init(t,e),t._zod.processJSONSchema=(n,s,r)=>Gq(t,n,s,r),t.unwrap=()=>t._zod.def.innerType});function nW(t,e){return new tW({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():z6(e)}})}const oD=we("ZodNonOptional",(t,e)=>{IV.init(t,e),Wn.init(t,e),t._zod.processJSONSchema=(n,s,r)=>Kq(t,n,s,r),t.unwrap=()=>t._zod.def.innerType});function sW(t,e){return new oD({type:"nonoptional",innerType:t,...dt(e)})}const rW=we("ZodCatch",(t,e)=>{PV.init(t,e),Wn.init(t,e),t._zod.processJSONSchema=(n,s,r)=>Yq(t,n,s,r),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function iW(t,e){return new rW({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const aW=we("ZodPipe",(t,e)=>{$V.init(t,e),Wn.init(t,e),t._zod.processJSONSchema=(n,s,r)=>Zq(t,n,s,r),t.in=e.in,t.out=e.out});function xj(t,e){return new aW({type:"pipe",in:t,out:e})}const oW=we("ZodReadonly",(t,e)=>{zV.init(t,e),Wn.init(t,e),t._zod.processJSONSchema=(n,s,r)=>Xq(t,n,s,r),t.unwrap=()=>t._zod.def.innerType});function lW(t){return new oW({type:"readonly",innerType:t})}const cW=we("ZodCustom",(t,e)=>{UV.init(t,e),Wn.init(t,e),t._zod.processJSONSchema=(n,s,r)=>$q(t,n)});function uW(t,e={}){return Tq(cW,t,e)}function hW(t){return Rq(t)}const dW=new BH({defaultOptions:{queries:{staleTime:0,refetchInterval:5e3,refetchOnWindowFocus:!1,retry:!1}}});var kx={exports:{}},Cx={};var wj;function fW(){if(wj)return Cx;wj=1;var t=ah().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return Cx.c=function(e){return t.H.useMemoCache(e)},Cx}var Sj;function pW(){return Sj||(Sj=1,kx.exports=fW()),kx.exports}var De=pW();const mW=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gW=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),kj=t=>{const e=gW(t);return e.charAt(0).toUpperCase()+e.slice(1)},lD=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),yW=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var vW={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const bW=V.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:o,...c},u)=>V.createElement("svg",{ref:u,...vW,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:lD("lucide",r),...!i&&!yW(c)&&{"aria-hidden":"true"},...c},[...o.map(([h,m])=>V.createElement(h,m)),...Array.isArray(i)?i:[i]]));const Re=(t,e)=>{const n=V.forwardRef(({className:s,...r},i)=>V.createElement(bW,{ref:i,iconNode:e,className:lD(`lucide-${mW(kj(t))}`,`lucide-${t}`,s),...r}));return n.displayName=kj(t),n};const _W=[["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}],["path",{d:"M10 4v4",key:"pp8u80"}],["path",{d:"M2 8h20",key:"d11cs7"}],["path",{d:"M6 4v4",key:"1svtjw"}]],cD=Re("app-window",_W);const xW=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],yi=Re("box",xW);const wW=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],uD=Re("calendar",wW);const SW=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Nn=Re("check",SW);const kW=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ps=Re("chevron-down",kW);const CW=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Xr=Re("chevron-right",CW);const NW=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],EW=Re("chevron-up",NW);const AW=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],jW=Re("chevrons-up-down",AW);const TW=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ch=Re("circle-alert",TW);const RW=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],OW=Re("circle-check-big",RW);const MW=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],vi=Re("circle-check",MW);const DW=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Rp=Re("circle-question-mark",DW);const BW=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ra=Re("circle-x",BW);const LW=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Oa=Re("clock",LW);const IW=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],PW=Re("cloud",IW);const $W=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],zW=Re("columns-3",$W);const UW=[["path",{d:"M22 7.7c0-.6-.4-1.2-.8-1.5l-6.3-3.9a1.72 1.72 0 0 0-1.7 0l-10.3 6c-.5.2-.9.8-.9 1.4v6.6c0 .5.4 1.2.8 1.5l6.3 3.9a1.72 1.72 0 0 0 1.7 0l10.3-6c.5-.3.9-1 .9-1.5Z",key:"1t2lqe"}],["path",{d:"M10 21.9V14L2.1 9.1",key:"o7czzq"}],["path",{d:"m10 14 11.9-6.9",key:"zm5e20"}],["path",{d:"M14 19.8v-8.1",key:"159ecu"}],["path",{d:"M18 17.5V9.4",key:"11uown"}]],Cj=Re("container",UW);const HW=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],xs=Re("copy",HW);const FW=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],bv=Re("cpu",FW);const VW=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],lc=Re("database",VW);const qW=[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]],KW=Re("diamond",qW);const WW=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],iC=Re("disc",WW);const GW=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],aC=Re("external-link",GW);const YW=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],oC=Re("eye-off",YW);const ZW=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],lC=Re("eye",ZW);const XW=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],sy=Re("file-check",XW);const JW=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],QW=Re("file-down",JW);const eG=[["path",{d:"M10.65 22H18a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v10.1",key:"1a2hbp"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m10 15 1 1",key:"1h4vmv"}],["path",{d:"m11 14-4.586 4.586",key:"maylof"}],["circle",{cx:"5",cy:"20",r:"2",key:"860zyv"}]],hD=Re("file-key",eG);const tG=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ei=Re("file-text",tG);const nG=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],_v=Re("folder-open",nG);const sG=[["path",{d:"M2 9.35V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h7",key:"y8kt7d"}],["path",{d:"m8 16 3-3-3-3",key:"rlqrt1"}]],rG=Re("folder-symlink",sG);const iG=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],aG=Re("folder-tree",iG);const oG=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],lG=Re("funnel",oG);const cG=[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]],cC=Re("ghost",cG);const uG=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],ry=Re("git-branch",uG);const hG=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],dG=Re("git-compare",hG);const fG=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Cr=Re("globe",fG);const pG=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],Ns=Re("hard-drive",pG);const mG=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],tS=Re("hash",mG);const gG=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],xv=Re("hexagon",gG);const yG=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],vG=Re("info",yG);const bG=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],Op=Re("key-round",bG);const _G=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Mp=Re("key",_G);const xG=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],pi=Re("layers",xG);const wG=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],dD=Re("layout-grid",wG);const SG=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],uh=Re("link",SG);const kG=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],CG=Re("list",kG);const NG=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Sa=Re("loader-circle",NG);const EG=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Dp=Re("lock",EG);const AG=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],jG=Re("mail",AG);const TG=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],RG=Re("maximize-2",TG);const OG=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],Vn=Re("network",OG);const MG=[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]],DG=Re("newspaper",MG);const BG=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],fD=Re("package",BG);const LG=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],ip=Re("pause",LG);const IG=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Mu=Re("play",IG);const PG=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M17 8a1 1 0 0 1 1 1v4a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1z",key:"1xoxul"}],["path",{d:"M9 8V2",key:"14iosj"}]],pD=Re("plug",PG);const $G=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],zG=Re("puzzle",$G);const UG=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],HG=Re("radio",UG);const FG=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ln=Re("refresh-cw",FG);const VG=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],uC=Re("rocket",VG);const qG=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],KG=Re("rotate-ccw",qG);const WG=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],ap=Re("route",WG);const GG=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],YG=Re("save",GG);const ZG=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],hC=Re("search",ZG);const XG=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],JG=Re("send",XG);const QG=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],mi=Re("server",QG);const eY=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],tY=Re("settings",eY);const nY=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],sY=Re("share-2",nY);const rY=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],mD=Re("shield-check",rY);const iY=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],hh=Re("shield",iY);const aY=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],gD=Re("sparkles",aY);const oY=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Nj=Re("square",oY);const lY=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],yD=Re("tag",lY);const cY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],uY=Re("target",cY);const hY=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Bp=Re("trash-2",hY);const dY=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],iy=Re("triangle-alert",dY);const fY=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],vD=Re("user",fY);const pY=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],wv=Re("x",pY);const mY=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],dC=Re("zap",mY);const gY=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],yY=Re("zoom-in",gY);const vY=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],bY=Re("zoom-out",vY),ay=new Map,oy=new Map,Mf=new Map;function _Y(t){t?(ay.delete(t),oy.delete(t),Mf.delete(t)):(ay.clear(),oy.clear(),Mf.clear())}function Ej(t){return t===""?0:t==="apps"?1:t==="batch"?2:t==="networking.k8s.io"?3:t==="storage.k8s.io"?4:t==="rbac.authorization.k8s.io"?5:t.endsWith(".k8s.io")?10:100}function xY(t){const e=t.group||"";return e?`${t.name}.${e}`:t.name}function Ml(t){const e=t.group||"",n=t.version||"v1";return e?`/apis/${e}/${n}`:"/api/v1"}function Aj(t,e,n){const s=xY(n);t.set(s,n);const r=Ej(n.group||""),i=o=>{const c=e.get(o);if(!c)e.set(o,n);else{const u=Ej(c.group||"");r<u&&e.set(o,n)}};if(i(n.name),n.singularName&&i(n.singularName),n.shortNames)for(const o of n.shortNames)i(o)}async function Nx(t,e){const n=`/contexts/${e}${t}`,s=await fetch(n);if(!s.ok)throw new Error(`API request failed: ${s.status} ${s.statusText}`);return s.json()}async function Sv(t){const e=oy.get(t);if(e)return e;const n=Mf.get(t);if(n)return n;const s=(async()=>{const r=new Map,i=new Map;try{const o=await Nx("/api/v1",t);for(const c of o.resources){if(c.name.includes("/"))continue;const u={...c,group:"",version:"v1"};Aj(r,i,u)}}catch(o){console.warn("Failed to fetch core v1 resources:",o)}try{const o=await Nx("/apis",t);await Promise.all(o.groups.map(async c=>{const u=c.preferredVersion?.version||c.versions[0]?.version;if(!u)return;const h=`/apis/${c.name}/${u}`;try{const m=await Nx(h,t);for(const p of m.resources){if(p.name.includes("/"))continue;const y={...p,group:p.group||c.name,version:p.version||u};Aj(r,i,y)}}catch(m){console.warn(`Failed to fetch resources for ${h}:`,m)}}))}catch(o){console.warn("Failed to fetch API groups:",o)}return ay.set(t,r),oy.set(t,i),Mf.delete(t),i})();return Mf.set(t,s),s}async function $o(t,e){return(await Sv(t)).get(e)}async function bD(t,e){return await Sv(t),ay.get(t)?.get(e)}async function wY(t,e,n){const s=await Sv(t);let r="";n&&n.includes("/")&&(r=n.split("/")[0]);for(const i of s.values())if(i.kind===e)if(n){if((i.group||"")===r)return i}else return i;if(n){for(const i of s.values())if(i.kind===e)return i}}function SY(t){Sv(t).catch(console.error)}function kY(t){const e=t.spec;if(!e)throw new Error("CRD is missing spec");const n=e.versions.find(i=>i.storage),s=e.versions.find(i=>i.served),r=n?.name||s?.name||e.versions[0]?.name;return{name:e.names.plural,singularName:e.names.singular||"",namespaced:e.scope==="Namespaced",group:e.group,version:r,kind:e.names.kind,verbs:["get","list","watch","create","update","patch","delete"],shortNames:e.names.shortNames}}async function Ma(t,e){const n=e?`/contexts/${e}${t}`:t,s=await fetch(n);if(!s.ok)throw new Error(`API request failed: ${s.status} ${s.statusText}`);return s.json()}async function CY(t){return Ma("/api/v1/namespaces",t)}async function NY(t){return(await Ma("/apis/apiextensions.k8s.io/v1/customresourcedefinitions",t)).items}async function EY(t,e,n,s){const r=Ml(e),i=e.namespaced&&s?`${r}/namespaces/${s}/${e.name}/${n}`:`${r}/${e.name}/${n}`;return Ma(i,t)}async function AY(t,e,n,s,r){const i=Ml(e),o=e.namespaced&&r?`${i}/namespaces/${r}/${e.name}/${n}`:`${i}/${e.name}/${n}`,c=`/contexts/${t}${o}`,u=await fetch(c,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!u.ok){const h=await u.text();let m=`API request failed: ${u.status} ${u.statusText}`;try{const p=JSON.parse(h);p.message&&(m=p.message)}catch{}throw new Error(m)}return u.json()}async function fC(t,e,n){const s=Ml(e),r=e.namespaced&&n?`${s}/namespaces/${n}/${e.name}`:`${s}/${e.name}`;return(await Ma(r,t)).items}async function jY(t,e,n){const s=n?`involvedObject.name=${e},involvedObject.namespace=${n}`:`involvedObject.name=${e}`,r=n?`/api/v1/namespaces/${n}/events?fieldSelector=${encodeURIComponent(s)}`:`/api/v1/events?fieldSelector=${encodeURIComponent(s)}`;return(await Ma(r,t)).items.sort((o,c)=>{const u=o.lastTimestamp||o.eventTime||o.metadata?.creationTimestamp||"",h=c.lastTimestamp||c.eventTime||c.metadata?.creationTimestamp||"";return new Date(h).getTime()-new Date(u).getTime()})}const Df=new Map,Bf=new Map;function TY(t){t?(Df.delete(t),Bf.delete(t)):(Df.clear(),Bf.clear())}async function pC(t){const e=Df.get(t);if(e!==void 0)return e;const n=Bf.get(t);if(n)return n;const s=(async()=>{try{const i=await bD(t,"pods.metrics.k8s.io")!==void 0;return Df.set(t,i),i}catch(r){return console.warn("Failed to check metrics availability:",r),Df.set(t,!1),!1}finally{Bf.delete(t)}})();return Bf.set(t,s),s}function Ro(t){if(!t)return 0;if(t.endsWith("n"))return parseInt(t.slice(0,-1),10)||0;if(t.endsWith("m"))return(parseInt(t.slice(0,-1),10)||0)*1e6;const e=parseFloat(t);return isNaN(e)?0:e*1e9}function Oo(t){if(!t)return 0;const e=t.match(/^(\d+(?:\.\d+)?)(Ki|Mi|Gi|Ti|K|M|G|T|k|m|g|t)?$/);if(!e){const r=parseInt(t,10);return isNaN(r)?0:r}const n=parseFloat(e[1]),s=e[2];if(!s)return n;switch(s){case"Ki":return n*1024;case"Mi":return n*1024*1024;case"Gi":return n*1024*1024*1024;case"Ti":return n*1024*1024*1024*1024;case"K":case"k":return n*1e3;case"M":case"m":return n*1e3*1e3;case"G":case"g":return n*1e3*1e3*1e3;case"T":case"t":return n*1e3*1e3*1e3*1e3;default:return n}}function op(t){if(t>=1e9){const e=t/1e9;return e>=10?`${Math.round(e)}`:`${e.toFixed(1)}`}return`${Math.round(t/1e6)}m`}function lp(t){return t>=1024*1024*1024?`${(t/(1024*1024*1024)).toFixed(1)}Gi`:t>=1024*1024?`${(t/(1024*1024)).toFixed(0)}Mi`:t>=1024?`${(t/1024).toFixed(0)}Ki`:`${t}B`}async function RY(t,e,n){try{return await pC(t)?await Ma(`/apis/metrics.k8s.io/v1beta1/namespaces/${n}/pods/${e}`,t):null}catch{return null}}async function mC(t,e,n){try{if(!await pC(t))return[];const s=Object.entries(n).map(([i,o])=>`${i}=${o}`).join(",");return(await Ma(`/apis/metrics.k8s.io/v1beta1/namespaces/${e}/pods?labelSelector=${encodeURIComponent(s)}`,t)).items||[]}catch{return[]}}async function OY(t,e){try{return await pC(t)?await Ma(`/apis/metrics.k8s.io/v1beta1/nodes/${e}`,t):null}catch{return null}}function gC(t){const e=new Map;for(const s of t)for(const r of s.containers){const i=e.get(r.name)||{cpuNanos:0,memoryBytes:0,count:0};i.cpuNanos+=Ro(r.usage.cpu),i.memoryBytes+=Oo(r.usage.memory),i.count++,e.set(r.name,i)}const n=new Map;for(const[s,r]of e)n.set(s,{cpu:{usage:op(r.cpuNanos),usageNanoCores:r.cpuNanos},memory:{usage:lp(r.memoryBytes),usageBytes:r.memoryBytes}});return n}function MY({namespaces:t,selectedNamespace:e,onSelectNamespace:n,disabled:s=!1,spaceLabels:r=[],platformNamespaces:i=[]}){const[o,c]=V.useState(!1),[u,h]=V.useState(""),[m,p]=V.useState(-1),y=V.useRef(null),v=V.useRef(null),x=V.useRef(null),_=V.useMemo(()=>B=>hH(B,i),[i]),S=V.useMemo(()=>{const B=[],q=new Set;for(const z of r){const K=new Map;for(const Z of t){const W=Z.metadata?.name;if(!W||q.has(W))continue;const I=Z.metadata?.labels?.[z];I&&(K.has(I)||K.set(I,[]),K.get(I).push(Z),q.add(W))}for(const[Z,W]of Array.from(K.entries()).sort(([I],[Y])=>I.localeCompare(Y)))B.push({label:Z,namespaces:W.sort((I,Y)=>(I.metadata?.name||"").localeCompare(Y.metadata?.name||""))})}const P=t.filter(z=>{const K=z.metadata?.name;return K&&!q.has(K)&&!_(K)}).sort((z,K)=>(z.metadata?.name||"").localeCompare(K.metadata?.name||""));P.length>0&&B.push({label:"User",namespaces:P});const G=t.filter(z=>{const K=z.metadata?.name;return K&&!q.has(K)&&_(K)}).sort((z,K)=>(z.metadata?.name||"").localeCompare(K.metadata?.name||""));return G.length>0&&B.push({label:"Platform",namespaces:G}),B},[t,r,_]),k=V.useMemo(()=>u===""?S:S.map(B=>({...B,namespaces:B.namespaces.filter(q=>q.metadata?.name?.toLowerCase().includes(u.toLowerCase()))})).filter(B=>B.namespaces.length>0),[S,u]),C=V.useMemo(()=>{const B=[];(u===""||"all namespaces".includes(u.toLowerCase()))&&B.push({value:"",label:"All Namespaces"});for(const P of k)for(const G of P.namespaces){const z=G.metadata?.name;z&&B.push({value:z,label:z})}return B},[k,u]),N=k.some(B=>B.namespaces.length>0),R=u===""||"all namespaces".includes(u.toLowerCase());V.useEffect(()=>{if(!o)return;function B(q){y.current&&!y.current.contains(q.target)&&(c(!1),h(""))}return document.addEventListener("mousedown",B),()=>document.removeEventListener("mousedown",B)},[o]),V.useEffect(()=>{o&&(v.current?.focus(),p(-1))},[o]);const O=B=>{n(B||void 0),c(!1),h("")},E=B=>{switch(B.key){case"ArrowDown":B.preventDefault(),p(q=>Math.min(q+1,C.length-1));break;case"ArrowUp":B.preventDefault(),p(q=>Math.max(q-1,0));break;case"Enter":B.preventDefault(),m>=0&&m<C.length&&O(C[m].value);break;case"Escape":c(!1),h("");break}};V.useEffect(()=>{m>=0&&x.current&&x.current.querySelector(`[data-index="${m}"]`)?.scrollIntoView({block:"nearest"})},[m]);let D=-1;return f.jsxs("div",{className:"relative",ref:y,children:[f.jsxs("div",{className:"relative",children:[f.jsx("input",{ref:v,type:"text",className:"w-full px-3 py-1.5 pr-8 bg-neutral-50 dark:bg-neutral-950 border border-neutral-200 dark:border-neutral-700 text-neutral-900 dark:text-neutral-100 rounded-lg text-sm text-left disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-1 focus:ring-neutral-400/50 dark:focus:ring-neutral-500/50 cursor-default placeholder:text-neutral-400",value:o?u:s?"Cluster":e||"All Namespaces",onChange:B=>h(B.target.value),onFocus:()=>!s&&c(!0),onKeyDown:E,placeholder:o?"Search...":void 0,disabled:s,readOnly:!o}),f.jsx("button",{type:"button",onClick:()=>!s&&c(!o),className:"absolute inset-y-0 right-0 flex items-center pr-2",disabled:s,children:f.jsx(ps,{size:16,className:"text-neutral-400 dark:text-neutral-500"})})]}),o&&f.jsx("div",{ref:x,className:"absolute z-50 w-full mt-1 bg-white dark:bg-neutral-950 rounded-lg shadow-xl max-h-96 overflow-y-auto focus:outline-none border border-neutral-200 dark:border-neutral-700",children:!N&&!R?f.jsx("div",{className:"px-3 py-3 text-sm text-neutral-500 dark:text-neutral-400",children:"No namespaces found"}):f.jsxs(f.Fragment,{children:[R&&f.jsxs("div",{"data-index":++D,onClick:()=>O(""),className:`px-3 py-2 cursor-pointer text-sm flex items-center justify-between ${m===D?"bg-neutral-100 dark:bg-neutral-700":""} ${e===void 0?"text-neutral-900 dark:text-neutral-100":"text-neutral-600 dark:text-neutral-400"}`,children:[f.jsx("span",{className:"truncate",children:"All Namespaces"}),e===void 0&&f.jsx(Nn,{size:16,className:"text-neutral-500 dark:text-neutral-400"})]}),k.map(B=>f.jsxs("div",{className:"py-1",children:[f.jsx("div",{className:"px-3 py-1 text-[10px] font-semibold text-neutral-400 dark:text-neutral-500 uppercase tracking-wider",children:B.label}),B.namespaces.map(q=>{const P=q.metadata?.name;if(!P)return null;const G=++D,z=e===P,K=m===G;return f.jsxs("div",{"data-index":G,onClick:()=>O(P),className:`mx-1 px-2.5 py-1.5 rounded-md cursor-pointer text-sm flex items-center justify-between ${K?"bg-neutral-100 dark:bg-neutral-700":""} ${z?"text-neutral-900 dark:text-neutral-100":"text-neutral-600 dark:text-neutral-400"}`,children:[f.jsx("span",{className:"truncate",children:P}),z&&f.jsx(Nn,{size:16,className:"text-neutral-500 dark:text-neutral-400"})]},P)})]},B.label))]})})]})}async function DY(t,e){const n=`/contexts/${e}${t}`,s=await fetch(n,{headers:{Accept:"application/json;as=Table;v=v1;g=meta.k8s.io"}});if(!s.ok)throw new Error(`API request failed: ${s.status} ${s.statusText}`);return s.json()}async function _D(t,e,n){const s=Ml(e),r=e.namespaced&&n?`${s}/namespaces/${n}/${e.name}`:`${s}/${e.name}`;return DY(r,t)}function jj(t,e){return t.name===e.name&&(t.group||"")===(e.group||"")}const Tj=[{kind:"pods",label:"Pods",icon:yi,category:"workloads"},{kind:"deployments",label:"Deployments",icon:uC,category:"workloads"},{kind:"daemonsets",label:"DaemonSets",icon:cC,category:"workloads"},{kind:"statefulsets",label:"StatefulSets",icon:lc,category:"workloads"},{kind:"replicasets",label:"ReplicaSets",icon:pi,category:"workloads"},{kind:"jobs",label:"Jobs",icon:dC,category:"workloads"},{kind:"cronjobs",label:"CronJobs",icon:Oa,category:"workloads"},{kind:"secrets",label:"Secrets",icon:Op,category:"config"},{kind:"configmaps",label:"ConfigMaps",icon:ei,category:"config"},{kind:"applications",label:"Applications",icon:cD,category:"config"},{kind:"applicationsets",label:"ApplicationSets",icon:dD,category:"config"},{kind:"certificates",label:"Certificates",icon:mD,category:"config"},{kind:"certificaterequests",label:"CertificateRequests",icon:sy,category:"config"},{kind:"services",label:"Services",icon:pD,category:"network"},{kind:"ingresses",label:"Ingresses",icon:Cr,category:"network"},{kind:"gateways",label:"Gateways",icon:Vn,category:"network"},{kind:"httproutes",label:"HTTPRoutes",icon:Cr,category:"network"},{kind:"grpcroutes",label:"GRPCRoutes",icon:Cr,category:"network"},{kind:"tcproutes",label:"TCPRoutes",icon:Vn,category:"network"},{kind:"udproutes",label:"UDPRoutes",icon:Vn,category:"network"},{kind:"tlsroutes",label:"TLSRoutes",icon:Vn,category:"network"},{kind:"persistentvolumes",label:"PersistentVolumes",icon:Ns,category:"storage"},{kind:"persistentvolumeclaims",label:"PersistentVolumeClaims",icon:iC,category:"storage"},{kind:"namespaces",label:"Namespaces",icon:_v,category:"cluster"},{kind:"nodes",label:"Nodes",icon:mi,category:"cluster"},{kind:"events",label:"Events",icon:DG,category:"cluster"}],Rj={workloads:"Workloads",config:"Config",network:"Network",storage:"Storage",cluster:"Cluster",crd:"Custom Resources"};function BY(t){const e=De.c(47),{context:n,namespace:s,namespaces:r,selectedResource:i,onSelectResource:o,onSelectNamespace:c,isOverviewSelected:u,isWelcome:h}=t;let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m=new Map,e[0]=m):m=e[0];const[p,y]=V.useState(m);let v;e[1]===Symbol.for("react.memo_cache_sentinel")?(v=[],e[1]=v):v=e[1];const[x,_]=V.useState(v);let S;e[2]===Symbol.for("react.memo_cache_sentinel")?(S={workloads:!0,config:!0,network:!0,storage:!0,cluster:!0,crd:!1},e[2]=S):S=e[2];const[k,C]=V.useState(S);let N,R;e[3]!==n?(N=()=>{(async()=>{const Y=new Map;for(const J of Tj){const $=await $o(n,J.kind);$&&Y.set(J.kind,$)}y(Y)})()},R=[n],e[3]=n,e[4]=N,e[5]=R):(N=e[4],R=e[5]),V.useEffect(N,R);let O,E;e[6]!==n?(O=()=>{NY(n).then(I=>{const Y=I.map(kY);Y.sort(zY),_(Y)}).catch($Y)},E=[n],e[6]=n,e[7]=O,e[8]=E):(O=e[7],E=e[8]),V.useEffect(O,E);let D;e[9]===Symbol.for("react.memo_cache_sentinel")?(D=I=>{C(Y=>({...Y,[I]:!Y[I]}))},e[9]=D):D=e[9];const B=D;let q,P,G,z,K;if(e[10]!==p||e[11]!==x||e[12]!==k||e[13]!==u||e[14]!==h||e[15]!==s||e[16]!==r||e[17]!==c||e[18]!==o||e[19]!==i){const I=Tj.reduce(PY,{}),Y=x.reduce(IY,{}),J=Object.entries(Y).sort(LY),$=i!==null&&!i.namespaced;let j,M;e[25]===Symbol.for("react.memo_cache_sentinel")?(j=$i().kubernetes?.tenancyLabels,M=$i().kubernetes?.platformNamespaces,e[25]=j,e[26]=M):(j=e[25],M=e[26]),e[27]!==s||e[28]!==r||e[29]!==c||e[30]!==$?(z=f.jsx("div",{className:"shrink-0 px-3 pb-2",children:f.jsx(MY,{namespaces:r,selectedNamespace:s,onSelectNamespace:c,disabled:$,spaceLabels:j,platformNamespaces:M})}),e[27]=s,e[28]=r,e[29]=c,e[30]=$,e[31]=z):z=e[31],K="flex-1 py-1 overflow-y-auto overflow-x-hidden min-h-0";const F=`flex items-center w-full px-3 py-2 text-sm rounded-lg transition-colors ${u&&!h?"bg-white/90 text-neutral-900 shadow-sm dark:bg-neutral-800 dark:text-neutral-100":"text-neutral-600 hover:bg-white/50 hover:text-neutral-900 dark:text-neutral-400 dark:hover:bg-neutral-800/50 dark:hover:text-neutral-200"}`;let A;e[32]!==o?(A=()=>o(null),e[32]=o,e[33]=A):A=e[33];let Q,se;e[34]===Symbol.for("react.memo_cache_sentinel")?(Q=f.jsx(Vn,{size:16,className:"mr-2.5 shrink-0 opacity-70"}),se=f.jsx("span",{className:"font-medium",children:"Overview"}),e[34]=Q,e[35]=se):(Q=e[34],se=e[35]),e[36]!==F||e[37]!==A?(q=f.jsx("div",{className:"mb-2 px-2",children:f.jsxs("button",{className:F,onClick:A,children:[Q,se]})}),e[36]=F,e[37]=A,e[38]=q):q=e[38],P=Object.entries(I).map(X=>{const[ae,ke]=X;return f.jsxs("div",{className:"mb-1",children:[f.jsxs("button",{className:"flex items-center w-full px-4 py-1.5 text-[11px] font-semibold uppercase tracking-wider text-neutral-500 hover:text-neutral-700 dark:text-neutral-500 dark:hover:text-neutral-400 transition-colors",onClick:()=>B(ae),children:[f.jsx("span",{className:"mr-1.5 opacity-60",children:k[ae]?f.jsx(ps,{size:12}):f.jsx(Xr,{size:12})}),f.jsx("span",{children:Rj[ae]})]}),k[ae]&&f.jsx("ul",{className:"px-2",children:ke.map(Se=>{const Ve=p.get(Se.kind);if(!Ve)return null;const Le=i!==null&&jj(Ve,i);return f.jsx("li",{children:f.jsxs("button",{className:`flex items-center w-full px-3 py-2 text-sm rounded-lg transition-colors ${Le?"bg-white/90 text-neutral-900 shadow-sm dark:bg-neutral-800 dark:text-neutral-100":"text-neutral-600 hover:bg-white/50 hover:text-neutral-900 dark:text-neutral-400 dark:hover:bg-neutral-800/50 dark:hover:text-neutral-200"}`,onClick:()=>o(Ve),children:[f.jsx(Se.icon,{size:16,className:"mr-2.5 shrink-0 opacity-70"}),f.jsx("span",{className:"truncate",children:Se.label})]})},Se.kind)})})]},ae)}),G=x.length>0&&f.jsxs("div",{className:"mb-1",children:[f.jsxs("button",{className:"flex items-center w-full px-4 py-1.5 text-[11px] font-semibold uppercase tracking-wider text-neutral-500 hover:text-neutral-700 dark:text-neutral-500 dark:hover:text-neutral-400 transition-colors",onClick:()=>B("crd"),children:[f.jsx("span",{className:"mr-1.5 opacity-60",children:k.crd?f.jsx(ps,{size:12}):f.jsx(Xr,{size:12})}),f.jsx("span",{children:Rj.crd}),f.jsx("span",{className:"ml-auto px-1.5 py-0.5 bg-neutral-300/60 rounded text-[10px] text-neutral-500 dark:bg-neutral-700 dark:text-neutral-500",children:x.length})]}),k.crd&&f.jsx("div",{className:"px-2",children:J.map(X=>{const[ae,ke]=X;return f.jsxs("div",{className:"mb-1",children:[f.jsx("div",{className:"px-3 py-1 text-[10px] text-neutral-400 truncate lowercase dark:text-neutral-600",title:ae,children:ae}),f.jsx("ul",{children:ke.map(Se=>{const Ve=i!==null&&jj(Se,i);return f.jsx("li",{children:f.jsxs("button",{className:`flex items-center w-full px-3 py-2 text-sm rounded-lg transition-colors ${Ve?"bg-white/90 text-neutral-900 shadow-sm dark:bg-neutral-800 dark:text-neutral-100":"text-neutral-600 hover:bg-white/50 hover:text-neutral-900 dark:text-neutral-400 dark:hover:bg-neutral-800/50 dark:hover:text-neutral-200"}`,onClick:()=>o(Se),title:`${Se.kind} (${Se.group})`,children:[f.jsx(xv,{size:16,className:"mr-2.5 shrink-0 opacity-70"}),f.jsx("span",{className:"truncate",children:Se.kind})]})},`${Se.group||""}/${Se.name}`)})})]},ae)})})]}),e[10]=p,e[11]=x,e[12]=k,e[13]=u,e[14]=h,e[15]=s,e[16]=r,e[17]=c,e[18]=o,e[19]=i,e[20]=q,e[21]=P,e[22]=G,e[23]=z,e[24]=K}else q=e[20],P=e[21],G=e[22],z=e[23],K=e[24];let Z;e[39]!==q||e[40]!==P||e[41]!==G||e[42]!==K?(Z=f.jsxs("nav",{className:K,children:[q,P,G]}),e[39]=q,e[40]=P,e[41]=G,e[42]=K,e[43]=Z):Z=e[43];let W;return e[44]!==z||e[45]!==Z?(W=f.jsxs(f.Fragment,{children:[z,Z]}),e[44]=z,e[45]=Z,e[46]=W):W=e[46],W}function LY(t,e){const[n]=t,[s]=e,r=n.split(".").reverse().join("."),i=s.split(".").reverse().join(".");return r.localeCompare(i)}function IY(t,e){const n=e.group||"core";return t[n]||(t[n]=[]),t[n].push(e),t}function PY(t,e){return t[e.category]||(t[e.category]=[]),t[e.category].push(e),t}function $Y(t){console.error("Failed to load CRDs:",t)}function zY(t,e){return t.kind.localeCompare(e.kind)}const UY="docker";function xD(t){const e=De.c(32),{mode:n,contexts:s,selectedContext:r,onSelectContext:i,dockerContexts:o,selectedDockerContext:c,onSelectDockerContext:u}=t;let h;e[0]!==o?(h=o===void 0?[]:o,e[0]=o,e[1]=h):h=e[1];const m=h,[p,y]=V.useState(!1),v=V.useRef(null);let x,_;e[2]!==p?(x=()=>{if(!p)return;const I=function(J){v.current&&!v.current.contains(J.target)&&y(!1)};return document.addEventListener("mousedown",I),()=>document.removeEventListener("mousedown",I)},_=[p],e[2]=p,e[3]=x,e[4]=_):(x=e[3],_=e[4]),V.useEffect(x,_);let S;e[5]!==i||e[6]!==u?(S=(I,Y)=>{Y?u&&u(I):i(I),y(!1)},e[5]=i,e[6]=u,e[7]=S):S=e[7];const k=S,C=n==="docker",N=C?c||UY:r,R=C?Cj:mi,O=s.length,E=m.length;if(O+E<=1)return null;let B;e[8]!==p?(B=()=>y(!p),e[8]=p,e[9]=B):B=e[9];let q;e[10]!==R?(q=f.jsx(R,{size:12,className:"opacity-60 group-hover:opacity-80"}),e[10]=R,e[11]=q):q=e[11];let P;e[12]!==N?(P=f.jsx("span",{className:"truncate flex-1 text-left",children:N}),e[12]=N,e[13]=P):P=e[13];const G=`opacity-40 group-hover:opacity-60 transition-transform ${p?"rotate-180":""}`;let z;e[14]!==G?(z=f.jsx(ps,{size:12,className:G}),e[14]=G,e[15]=z):z=e[15];let K;e[16]!==z||e[17]!==B||e[18]!==q||e[19]!==P?(K=f.jsxs("button",{type:"button",onClick:B,className:"flex items-center gap-1.5 w-full px-1 py-0.5 text-xs text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-300 transition-colors rounded group",children:[q,P,z]}),e[16]=z,e[17]=B,e[18]=q,e[19]=P,e[20]=K):K=e[20];let Z;e[21]!==s||e[22]!==m||e[23]!==k||e[24]!==C||e[25]!==p||e[26]!==r||e[27]!==c?(Z=p&&f.jsx("div",{className:"absolute z-50 left-0 right-0 mt-1 bg-white dark:bg-neutral-950 rounded-lg shadow-xl max-h-64 overflow-y-auto border border-neutral-200 dark:border-neutral-700",children:f.jsxs("div",{className:"py-1",children:[m.length>0&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"px-3 py-1 text-[10px] font-semibold text-neutral-400 dark:text-neutral-500 uppercase tracking-wider",children:"Docker"}),m.map(I=>{const Y=C&&c===I;return f.jsxs("div",{onClick:()=>k(I,!0),className:`mx-1 px-2.5 py-1.5 rounded-md cursor-pointer text-sm flex items-center justify-between hover:bg-neutral-100 dark:hover:bg-neutral-800 ${Y?"text-neutral-900 dark:text-neutral-100":"text-neutral-600 dark:text-neutral-400"}`,children:[f.jsxs("div",{className:"flex items-center gap-2 truncate",children:[f.jsx(Cj,{size:14,className:"opacity-50 shrink-0"}),f.jsx("span",{className:"truncate",children:I})]}),Y&&f.jsx(Nn,{size:14,className:"text-neutral-500 dark:text-neutral-400 shrink-0"})]},`docker-${I}`)})]}),s.length>0&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:`px-3 py-1 text-[10px] font-semibold text-neutral-400 dark:text-neutral-500 uppercase tracking-wider ${m.length>0?"mt-1":""}`,children:"Kubernetes"}),s.map(I=>{const Y=!C&&r===I;return f.jsxs("div",{onClick:()=>k(I,!1),className:`mx-1 px-2.5 py-1.5 rounded-md cursor-pointer text-sm flex items-center justify-between hover:bg-neutral-100 dark:hover:bg-neutral-800 ${Y?"text-neutral-900 dark:text-neutral-100":"text-neutral-600 dark:text-neutral-400"}`,children:[f.jsxs("div",{className:"flex items-center gap-2 truncate",children:[f.jsx(mi,{size:14,className:"opacity-50 shrink-0"}),f.jsx("span",{className:"truncate",children:I})]}),Y&&f.jsx(Nn,{size:14,className:"text-neutral-500 dark:text-neutral-400 shrink-0"})]},I)})]})]})}),e[21]=s,e[22]=m,e[23]=k,e[24]=C,e[25]=p,e[26]=r,e[27]=c,e[28]=Z):Z=e[28];let W;return e[29]!==K||e[30]!==Z?(W=f.jsxs("div",{className:"relative",ref:v,children:[K,Z]}),e[29]=K,e[30]=Z,e[31]=W):W=e[31],W}function nu(t){return t.toLowerCase().replace(/[-_.]/g,"")}function wD(t){const e=De.c(92),{isOpen:n,onClose:s,adapter:r}=t,[i,o]=V.useState(""),[c,u]=V.useState(0);let h;e[0]===Symbol.for("react.memo_cache_sentinel")?(h=[],e[0]=h):h=e[0];const[m,p]=V.useState(h),[y,v]=V.useState(!1),[x,_]=V.useState(!1),[S,k]=V.useState(r.id),[C,N]=V.useState(!1),R=V.useRef(null),O=V.useRef(null),E=V.useRef(null);r.id!==S&&(k(r.id),_(!r.initialize));let D,B;e[1]!==r?(D=()=>{r.initialize&&r.initialize().then(()=>{_(qY)})},B=[r],e[1]=r,e[2]=D,e[3]=B):(D=e[2],B=e[3]),V.useEffect(D,B),n&&!C?(N(!0),o(""),u(0),p([])):!n&&C&&N(!1);let q;if(e[4]!==r.searchModePrefixes||e[5]!==i){e:{const me=[...r.searchModePrefixes].sort(VY);for(const{prefix:ct,mode:Oe}of me)if(i.startsWith(ct)){q={searchMode:Oe,searchQuery:i.slice(ct.length).trim()};break e}let ze;e[7]!==i?(ze=i.trim(),e[7]=i,e[8]=ze):ze=e[8];let lt;e[9]!==ze?(lt={searchMode:"search",searchQuery:ze},e[9]=ze,e[10]=lt):lt=e[10],q=lt}e[4]=r.searchModePrefixes,e[5]=i,e[6]=q}else q=e[6];const{searchMode:P,searchQuery:G}=q;let z;e:{if(!x){let ze;e[11]===Symbol.for("react.memo_cache_sentinel")?(ze=[],e[11]=ze):ze=e[11],z=ze;break e}let me;e[12]!==r?(me=r.getAvailableResourceTypes(),e[12]=r,e[13]=me):me=e[13],z=me}const K=z;let Z;if(e[14]!==K||e[15]!==G){const me=nu(G);Z=K.filter(ze=>nu(ze.label).includes(me)||nu(ze.kind).includes(me)||nu(ze.category).includes(me)),e[14]=K,e[15]=G,e[16]=Z}else Z=e[16];const W=Z;let I;e:{if(!r.supportsNamespaces){let ze;e[17]===Symbol.for("react.memo_cache_sentinel")?(ze=[],e[17]=ze):ze=e[17],I=ze;break e}let me;if(e[18]!==r||e[19]!==G){const ze=nu(G);me=r.getNamespaces().filter(lt=>nu(lt.name).includes(ze)),e[18]=r,e[19]=G,e[20]=me}else me=e[20];I=me}const Y=I;let J;e:{if(P==="resources"){let ze;if(e[21]!==r||e[22]!==W){let lt;e[24]!==r?(lt=ct=>r.resourceTypeToSearchResult(ct),e[24]=r,e[25]=lt):lt=e[25],ze=W.map(lt),e[21]=r,e[22]=W,e[23]=ze}else ze=e[23];J=ze;break e}if(P==="namespaces"&&r.supportsNamespaces&&r.namespaceToSearchResult){let ze;if(e[26]!==r.namespaceToSearchResult||e[27]!==Y){let lt;e[29]!==r.namespaceToSearchResult?(lt=ct=>r.namespaceToSearchResult(ct),e[29]=r.namespaceToSearchResult,e[30]=lt):lt=e[30],ze=Y.map(lt),e[26]=r.namespaceToSearchResult,e[27]=Y,e[28]=ze}else ze=e[28];J=ze;break e}let me;e[31]===Symbol.for("react.memo_cache_sentinel")?(me=[],e[31]=me):me=e[31],J=me}const $=J,j=P==="search"||P==="searchAll"?m:$,M=(P==="search"||P==="searchAll")&&G.length>=2&&x,[F,A]=V.useState(P),[Q,se]=V.useState($.length);P!==F?(A(P),se($.length),P!=="search"&&P!=="searchAll"&&u(0)):P!=="search"&&P!=="searchAll"&&$.length!==Q&&(se($.length),u(0));const[X,ae]=V.useState(M);M&&!X?(ae(!0),v(!0)):!M&&X&&ae(!1);let ke,Se;e[32]!==r||e[33]!==P||e[34]!==G||e[35]!==M?(Se=()=>(E.current&&clearTimeout(E.current),M&&(E.current=setTimeout(async()=>{const me=await r.searchResources(G,P==="searchAll");p(me),u(0),v(!1)},300)),()=>{E.current&&clearTimeout(E.current)}),ke=[M,P,G,r],e[32]=r,e[33]=P,e[34]=G,e[35]=M,e[36]=ke,e[37]=Se):(ke=e[36],Se=e[37]),V.useEffect(Se,ke),(P==="search"||P==="searchAll")&&G.length<2&&m.length>0&&(p([]),v(!1));let Le;e[38]!==r?(Le=me=>{r.handleSelect(me)},e[38]=r,e[39]=Le):Le=e[39];const rt=Le;let Ye;e[40]!==c||e[41]!==rt||e[42]!==s||e[43]!==j?(Ye=me=>{e:switch(me.key){case"ArrowDown":{me.preventDefault(),u(ze=>Math.min(ze+1,j.length-1));break e}case"ArrowUp":{me.preventDefault(),u(FY);break e}case"Enter":{me.preventDefault(),j[c]&&rt(j[c]);break e}case"Escape":me.preventDefault(),s()}},e[40]=c,e[41]=rt,e[42]=s,e[43]=j,e[44]=Ye):Ye=e[44];const Je=Ye;let Rt,At;e[45]!==n?(Rt=()=>{n&&setTimeout(()=>R.current?.focus(),0)},At=[n],e[45]=n,e[46]=Rt,e[47]=At):(Rt=e[46],At=e[47]),V.useEffect(Rt,At);let Zt,on;e[48]!==c?(Zt=()=>{c>=0&&O.current&&O.current.querySelector(`[data-index="${c}"]`)?.scrollIntoView({block:"nearest"})},on=[c],e[48]=c,e[49]=Zt,e[50]=on):(Zt=e[49],on=e[50]),V.useEffect(Zt,on);let qt;e[51]!==r||e[52]!==P?(qt=r.getPlaceholder(P,r.getCurrentScopeLabel?.()??void 0),e[51]=r,e[52]=P,e[53]=qt):qt=e[53];const tn=qt;let je;e[54]!==r?(je=r.getHelpItems(),e[54]=r,e[55]=je):je=e[55];const We=je;if(!n)return null;let Qe,tt;e[56]!==s?(Qe=me=>{me.target===me.currentTarget&&s()},tt=f.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:s}),e[56]=s,e[57]=Qe,e[58]=tt):(Qe=e[57],tt=e[58]);let Mt;e[59]===Symbol.for("react.memo_cache_sentinel")?(Mt=f.jsx(hC,{size:20,className:"text-neutral-400 dark:text-neutral-500 shrink-0"}),e[59]=Mt):Mt=e[59];let fe;e[60]===Symbol.for("react.memo_cache_sentinel")?(fe=me=>o(me.target.value),e[60]=fe):fe=e[60];let xe;e[61]!==Je||e[62]!==tn||e[63]!==i?(xe=f.jsx("input",{ref:R,type:"text",className:"flex-1 bg-transparent text-neutral-900 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 outline-none text-base",value:i,onChange:fe,onKeyDown:Je,placeholder:tn,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1}),e[61]=Je,e[62]=tn,e[63]=i,e[64]=xe):xe=e[64];let Ge;e[65]!==y?(Ge=y&&f.jsx("div",{className:"shrink-0 w-4 h-4 border-2 border-neutral-300 dark:border-neutral-600 border-t-neutral-500 dark:border-t-neutral-400 rounded-full animate-spin"}),e[65]=y,e[66]=Ge):Ge=e[66];let it;e[67]!==xe||e[68]!==Ge?(it=f.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 border-b border-neutral-200 dark:border-neutral-700",children:[Mt,xe,Ge]}),e[67]=xe,e[68]=Ge,e[69]=it):it=e[69];let pt;e[70]!==c||e[71]!==rt||e[72]!==We||e[73]!==y||e[74]!==j||e[75]!==P||e[76]!==G?(pt=f.jsx("div",{ref:O,className:"max-h-[60vh] overflow-y-auto",children:j.length===0?f.jsx("div",{className:"px-4 py-8 text-center text-neutral-500 dark:text-neutral-400",children:y?"Searching...":G.length>0&&(P==="search"||P==="searchAll")&&G.length<2?"Type at least 2 characters to search":G.length>0?"No results found":f.jsxs("div",{className:"space-y-2",children:[f.jsx("p",{children:"Type to search or use prefixes:"}),f.jsx("div",{className:"text-sm space-y-1",children:We.map(HY)})]})}):f.jsx("div",{className:"py-2",children:j.map((me,ze)=>{const lt=me.icon,ct=ze===c;return f.jsxs("div",{"data-index":ze,onClick:()=>rt(me),className:`flex items-center gap-3 px-4 py-2.5 cursor-pointer ${ct?"bg-neutral-100 dark:bg-neutral-800":"hover:bg-neutral-50 dark:hover:bg-neutral-800/50"}`,children:[f.jsx(lt,{size:18,className:`shrink-0 ${me.type==="namespace"?"text-blue-500":me.type==="resource"?"text-green-500":"text-neutral-400 dark:text-neutral-500"}`}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"text-sm text-neutral-900 dark:text-neutral-100 truncate",children:me.label}),me.sublabel&&f.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate",children:me.sublabel})]}),f.jsxs("div",{className:"shrink-0 text-xs text-neutral-400 dark:text-neutral-500",children:[me.type==="resource-type"&&"Type",me.type==="namespace"&&"Namespace",me.type==="resource"&&"Resource"]})]},me.id)})})}),e[70]=c,e[71]=rt,e[72]=We,e[73]=y,e[74]=j,e[75]=P,e[76]=G,e[77]=pt):pt=e[77];let ln;e[78]===Symbol.for("react.memo_cache_sentinel")?(ln=f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("span",{children:[f.jsx("kbd",{className:"px-1 py-0.5 bg-neutral-100 dark:bg-neutral-800 rounded",children:""})," Navigate"]}),f.jsxs("span",{children:[f.jsx("kbd",{className:"px-1 py-0.5 bg-neutral-100 dark:bg-neutral-800 rounded",children:""})," Select"]}),f.jsxs("span",{children:[f.jsx("kbd",{className:"px-1 py-0.5 bg-neutral-100 dark:bg-neutral-800 rounded",children:"esc"})," Close"]})]}),e[78]=ln):ln=e[78];let re;e[79]!==r||e[80]!==P?(re=r.getCurrentScopeLabel?.()&&P==="search"&&f.jsxs("span",{children:["Scope: ",r.getCurrentScopeLabel()]}),e[79]=r,e[80]=P,e[81]=re):re=e[81];let oe;e[82]!==re?(oe=f.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-t border-neutral-200 dark:border-neutral-700 text-xs text-neutral-400 dark:text-neutral-500",children:[ln,re]}),e[82]=re,e[83]=oe):oe=e[83];let de;e[84]!==it||e[85]!==pt||e[86]!==oe?(de=f.jsxs("div",{className:"relative w-full max-w-2xl mx-4 bg-white dark:bg-neutral-900 rounded-xl shadow-2xl border border-neutral-200 dark:border-neutral-700 overflow-hidden",children:[it,pt,oe]}),e[84]=it,e[85]=pt,e[86]=oe,e[87]=de):de=e[87];let Ce;return e[88]!==Qe||e[89]!==tt||e[90]!==de?(Ce=K2.createPortal(f.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-[15vh]",onClick:Qe,children:[tt,de]}),document.body),e[88]=Qe,e[89]=tt,e[90]=de,e[91]=Ce):Ce=e[91],Ce}function HY(t){return f.jsxs("p",{children:[f.jsx("kbd",{className:"px-1.5 py-0.5 bg-neutral-100 dark:bg-neutral-800 rounded text-xs",children:t.prefix})," ",t.label]},t.prefix)}function FY(t){return Math.max(t-1,0)}function VY(t,e){return e.prefix.length-t.prefix.length}function qY(t){return t||!0}function Dg(t){return t.toLowerCase().replace(/[-_.]/g,"")}const Bg=[{kind:"pods",label:"Pods",icon:yi,category:"Workloads"},{kind:"deployments",label:"Deployments",icon:uC,category:"Workloads"},{kind:"daemonsets",label:"DaemonSets",icon:cC,category:"Workloads"},{kind:"statefulsets",label:"StatefulSets",icon:lc,category:"Workloads"},{kind:"replicasets",label:"ReplicaSets",icon:pi,category:"Workloads"},{kind:"jobs",label:"Jobs",icon:dC,category:"Workloads"},{kind:"cronjobs",label:"CronJobs",icon:Oa,category:"Workloads"},{kind:"secrets",label:"Secrets",icon:Op,category:"Config"},{kind:"configmaps",label:"ConfigMaps",icon:ei,category:"Config"},{kind:"applications",label:"Applications",icon:cD,category:"Config"},{kind:"applicationsets",label:"ApplicationSets",icon:dD,category:"Config"},{kind:"certificates",label:"Certificates",icon:mD,category:"Config"},{kind:"certificaterequests",label:"CertificateRequests",icon:sy,category:"Config"},{kind:"services",label:"Services",icon:pD,category:"Network"},{kind:"ingresses",label:"Ingresses",icon:Cr,category:"Network"},{kind:"gateways",label:"Gateways",icon:Vn,category:"Network"},{kind:"httproutes",label:"HTTPRoutes",icon:Cr,category:"Network"},{kind:"grpcroutes",label:"GRPCRoutes",icon:Cr,category:"Network"},{kind:"tcproutes",label:"TCPRoutes",icon:Vn,category:"Network"},{kind:"udproutes",label:"UDPRoutes",icon:Vn,category:"Network"},{kind:"tlsroutes",label:"TLSRoutes",icon:Vn,category:"Network"},{kind:"persistentvolumes",label:"PersistentVolumes",icon:Ns,category:"Storage"},{kind:"persistentvolumeclaims",label:"PersistentVolumeClaims",icon:iC,category:"Storage"},{kind:"namespaces",label:"Namespaces",icon:_v,category:"Cluster"},{kind:"nodes",label:"Nodes",icon:mi,category:"Cluster"}];function KY(t){const{context:e,namespace:n,namespaces:s,setNamespace:r,setSelectedResource:i,onClose:o}=t;let c=new Map;return{id:"kubernetes",resourceTypes:Bg,supportsNamespaces:!0,searchModePrefixes:[{prefix:"@@",mode:"searchAll"},{prefix:">",mode:"resources"},{prefix:"@",mode:"namespaces"}],async initialize(){const h=new Map;for(const m of Bg)try{const p=await $o(e,m.kind);p&&h.set(m.kind,p)}catch{}c=h},getAvailableResourceTypes(){return Bg.filter(h=>c.has(h.kind))},getNamespaces(){return s.filter(h=>h.metadata?.name).map(h=>({name:h.metadata.name}))},resourceTypeToSearchResult(h){return{id:`type-${h.kind}`,type:"resource-type",label:h.label,sublabel:h.category,icon:h.icon,category:h.category,data:{resourceConfig:c.get(h.kind)}}},namespaceToSearchResult(h){return{id:`ns-${h.name}`,type:"namespace",label:h.name,icon:_v,data:{namespace:h.name}}},async searchResources(h,m){if(!h||h.length<2)return[];const p=[],y=Dg(h),v=m?void 0:n,x=Bg.filter(S=>c.has(S.kind)).map(async S=>{const k=c.get(S.kind);if(!k)return[];try{const C=await _D(e,k,v),N=[];for(const R of C.rows){if(!R.object.metadata)continue;const O=R.object.metadata.name,E=R.object.metadata.namespace;O&&Dg(O).includes(y)&&N.push({id:`${S.kind}/${E||""}/${O}`,type:"resource",label:O,sublabel:E?`${S.label} in ${E}`:S.label,icon:S.icon,category:S.category,data:{resourceConfig:k,namespace:E,resourceName:O}})}return N}catch{return[]}}),_=await Promise.all(x);for(const S of _)p.push(...S);return p.sort((S,k)=>{const C=Dg(S.label)===y,N=Dg(k.label)===y;return C&&!N?-1:!C&&N?1:S.label.localeCompare(k.label)}),p.slice(0,50)},handleSelect(h){if(h.type==="resource-type"){const m=h.data.resourceConfig;m&&i(m)}else if(h.type==="namespace")r(h.data.namespace);else if(h.type==="resource"){const m=h.data.resourceConfig,p=h.data.namespace;p&&p!==n&&r(p),m&&i(m)}o()},getPlaceholder(h,m){switch(h){case"resources":return"Search resource types...";case"namespaces":return"Search namespaces...";case"searchAll":return"Search resources across all namespaces...";default:return`Search resources in ${m||n||"current namespace"}... (> types, @ ns, @@ all)`}},getHelpItems(){return[{prefix:">",label:"Resource types"},{prefix:"@",label:"Namespaces"},{prefix:"@@",label:"Search all namespaces"}]},getCurrentScopeLabel(){return n||null}}}function Oj(t){const e=Math.floor((Date.now()-t.getTime())/1e3);if(e<60)return`${e}s ago`;const n=Math.floor(e/60);if(n<60)return`${n}m ago`;const s=Math.floor(n/60);return s<24?`${s}h ago`:`${Math.floor(s/24)}d ago`}function jd(t){const e=t.match(/^(\d+)(Ki|Mi|Gi|Ti|K|M|G|T)?$/);if(!e)return t;const n=parseInt(e[1],10),s=e[2];return s?s==="Ki"&&n>=1024*1024?`${(n/(1024*1024)).toFixed(1)}Gi`:s==="Ki"&&n>=1024?`${(n/1024).toFixed(1)}Mi`:s==="Mi"&&n>=1024?`${(n/1024).toFixed(1)}Gi`:t:n>=1024*1024*1024?`${(n/(1024*1024*1024)).toFixed(1)}Gi`:n>=1024*1024?`${(n/(1024*1024)).toFixed(1)}Mi`:n>=1024?`${(n/1024).toFixed(1)}Ki`:`${n}B`}function SD(t){switch(t){case"ReadWriteOnce":return"bg-blue-500/20 text-blue-400 border border-blue-500/30";case"ReadOnlyMany":return"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30";case"ReadWriteMany":return"bg-purple-500/20 text-purple-400 border border-purple-500/30";case"ReadWriteOncePod":return"bg-amber-500/20 text-amber-400 border border-amber-500/30";default:return"bg-gray-700 text-gray-300"}}function kD(t){switch(t){case"ReadWriteOnce":return"RWO";case"ReadOnlyMany":return"ROX";case"ReadWriteMany":return"RWX";case"ReadWriteOncePod":return"RWOP";default:return t}}function WY(t){const e=t.split(" ");if(e.length!==5)return t;const[n,s,r,i,o]=e;if(t==="* * * * *")return"Every minute";if(t==="0 * * * *")return"Every hour";if(t==="0 0 * * *")return"Every day at midnight";if(t==="0 0 * * 0")return"Every Sunday at midnight";if(t==="0 0 1 * *")return"First day of every month at midnight";const c=[];if(n!=="*"&&c.push(`at minute ${n}`),s!=="*"&&c.push(`at hour ${s}`),r!=="*"&&c.push(`on day ${r}`),i!=="*"&&c.push(`in month ${i}`),o!=="*"){const u=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],h=parseInt(o);c.push(`on ${isNaN(h)?o:u[h]||o}`)}return c.length>0?c.join(", "):"Custom schedule"}function Mj(t){return{name:t.name,image:t.image||"",resources:t.resources?{requests:t.resources.requests,limits:t.resources.limits}:void 0,ports:t.ports?.map(e=>({name:e.name,containerPort:e.containerPort,protocol:e.protocol})),command:t.command,args:t.args,mounts:t.volumeMounts?.map(e=>({name:e.name,mountPath:e.mountPath,readOnly:e.readOnly,subPath:e.subPath})),env:t.env?.map(CD),envFrom:t.envFrom?.map(ND).filter(e=>e!==null)}}function dh(t,e,n){const s=[];return e&&e.length>0&&s.push({id:"init-containers",title:"Init Containers",data:{type:"containers",items:e.map(Mj)}}),t&&t.length>0&&s.push({id:"containers",title:"Containers",data:{type:"containers",items:t.map(Mj),metricsLoader:n}}),s}function GY(t){if(!t||t.length===0)return null;let e=0,n=0,s=0,r=0,i=!1,o=!1,c=!1,u=!1;for(const h of t){const m=h.resources;if(!m)continue;const p=m.requests,y=m.limits;p?.cpu&&(e+=Ro(p.cpu),i=!0),y?.cpu&&(n+=Ro(y.cpu),o=!0),p?.memory&&(s+=Oo(p.memory),c=!0),y?.memory&&(r+=Oo(y.memory),u=!0)}return!i&&!o&&!c&&!u?null:{cpu:{requests:i?op(e):void 0,requestsNanoCores:i?e:void 0,limits:o?op(n):void 0,limitsNanoCores:o?n:void 0},memory:{requests:c?lp(s):void 0,requestsBytes:c?s:void 0,limits:u?lp(r):void 0,limitsBytes:u?r:void 0}}}function cc(t){const e=GY(t);return e?{id:"resource-quota",data:{type:"resource-quota",data:e}}:null}function CD(t){if(t.value!==void 0)return{name:t.name,value:t.value};if(t.valueFrom){if(t.valueFrom.secretKeyRef)return{name:t.name,valueFrom:{type:"secretKeyRef",source:t.valueFrom.secretKeyRef.name??"",key:t.valueFrom.secretKeyRef.key}};if(t.valueFrom.configMapKeyRef)return{name:t.name,valueFrom:{type:"configMapKeyRef",source:t.valueFrom.configMapKeyRef.name??"",key:t.valueFrom.configMapKeyRef.key}};if(t.valueFrom.fieldRef)return{name:t.name,valueFrom:{type:"fieldRef",source:t.valueFrom.fieldRef.fieldPath}};if(t.valueFrom.resourceFieldRef){const e=t.valueFrom.resourceFieldRef.resource,n=t.valueFrom.resourceFieldRef.containerName;return{name:t.name,valueFrom:{type:"resourceFieldRef",source:n?`${n}/${e}`:e}}}}return{name:t.name,value:""}}function ND(t){return t.configMapRef?{name:t.configMapRef.name??"",type:"configMap",prefix:t.prefix}:t.secretRef?{name:t.secretRef.name??"",type:"secret",prefix:t.prefix}:null}const YY={kinds:["Deployment","Deployments"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata,i=r?.namespace;if(!n)return{sections:[]};const o=n.replicas??1,c=s?.readyReplicas??0,u=s?.updatedReplicas??0,h=s?.availableReplicas??0,m=async()=>{const v=n.selector?.matchLabels;if(!i||!v||Object.keys(v).length===0)return null;const x=await mC(t,i,v);return x.length===0?null:gC(x)},p=[...n.template?.spec?.containers??[],...n.template?.spec?.initContainers??[]],y=cc(p);return{sections:[{id:"replicas",title:"Replica Status",data:{type:"gauges",items:[{label:"Ready",current:c,total:o,color:"emerald"},{label:"Updated",current:u,total:o,color:"blue"},{label:"Available",current:h,total:o,color:"cyan"}],showPodGrid:{total:o,ready:c,available:h,icon:"box"}}},{id:"strategy",data:{type:"info-grid",items:[{label:"Strategy",value:n.strategy?.type||"RollingUpdate"},...n.strategy?.rollingUpdate?[{label:"Max Surge",value:String(n.strategy.rollingUpdate.maxSurge??"25%"),color:"text-cyan-400"},{label:"Max Unavailable",value:String(n.strategy.rollingUpdate.maxUnavailable??"25%"),color:"text-amber-400"}]:[]],columns:3}},{id:"replicasets",data:{type:"related-replicasets",title:"ReplicaSets",loader:async()=>{if(!i||!r?.name)return[];try{const v=await $o(t,"replicasets");if(!v)return[];const x=await fC(t,v,i),_=r.name??"",S=r.uid;return x.filter(k=>{const C=k.metadata,N=C.name;if(C.ownerReferences?.some(O=>O.kind==="Deployment"&&O.name===_||O.uid===S))return!0;if(N.startsWith(_+"-")){const O=N.slice(_.length+1);return/^[a-z0-9]{7,10}$/.test(O)}return!1}).map(k=>{const C=k.metadata,N=k.spec,R=k.status;return{name:C.name,replicas:R?.replicas??0,readyReplicas:R?.readyReplicas??0,images:N?.template?.spec?.containers?.map(O=>O.image)??[],isCurrent:(R?.replicas??0)>0,namespace:i,context:t}}).sort((k,C)=>k.isCurrent&&!C.isCurrent?-1:!k.isCurrent&&C.isCurrent?1:C.name.localeCompare(k.name))}catch(v){return console.error("Failed to fetch ReplicaSets:",v),[]}}}},...dh(n.template?.spec?.containers,n.template?.spec?.initContainers,m),...y?[y]:[]]}}},ZY={kinds:["Pod","Pods"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata,i=r?.namespace;if(!n)return{sections:[]};const o=n.containers??[],c=n.initContainers??[],u=s?.containerStatuses??[],h=s?.initContainerStatuses??[],m=u.reduce((x,_)=>x+(_.restartCount??0),0),p=async()=>{const x=r?.name,_=i;if(!x||!_)return null;const S=await RY(t,x,_);if(!S)return null;const k=new Map;for(const C of S.containers)k.set(C.name,{cpu:{usage:op(Ro(C.usage.cpu)),usageNanoCores:Ro(C.usage.cpu)},memory:{usage:lp(Oo(C.usage.memory)),usageBytes:Oo(C.usage.memory)}});return k},y=[...o,...c],v=cc(y);return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Phase",value:s?.phase||"Unknown",status:JY(s?.phase)},{label:"Pod IP",value:s?.podIP||"Pending"},{label:"Node",value:n.nodeName||"Not scheduled"},{label:"Restarts",value:m,status:m>0?"warning":"success"}]}},...v?[v]:[],...c.length>0?[{id:"init-containers",title:"Init Containers",data:{type:"containers",items:c.map(x=>Dj(x,h))}}]:[],{id:"containers",title:"Containers",data:{type:"containers",items:o.map(x=>Dj(x,u)),metricsLoader:p}},...n.volumes?.length?[{id:"volumes",title:"Volumes",data:{type:"volumes",items:n.volumes.map(x=>XY(x,[...o,...c]))}}]:[]]}}};function Dj(t,e){const n=e.find(o=>o.name===t.name),s=QY(n),r=n?.lastState?.terminated,i=n?.state?.terminated;return{name:t.name,image:t.image||"",state:s.state,stateReason:s.reason,stateMessage:s.message,ready:n?.ready,restartCount:n?.restartCount,currentTermination:i?{reason:i.reason,message:i.message,exitCode:i.exitCode,signal:i.signal,startedAt:i.startedAt?.toISOString?.()??i.startedAt,finishedAt:i.finishedAt?.toISOString?.()??i.finishedAt}:void 0,lastTermination:r?{reason:r.reason,exitCode:r.exitCode,signal:r.signal,finishedAt:r.finishedAt?.toISOString?.()??r.finishedAt}:void 0,resources:t.resources?{requests:t.resources.requests,limits:t.resources.limits}:void 0,ports:t.ports?.map(o=>({name:o.name,containerPort:o.containerPort,protocol:o.protocol})),command:t.command,args:t.args,mounts:t.volumeMounts?.map(o=>({name:o.name,mountPath:o.mountPath,readOnly:o.readOnly,subPath:o.subPath})),env:t.env?.map(CD),envFrom:t.envFrom?.map(ND).filter(o=>o!==null)}}function XY(t,e){const n=eZ(t),s=[];for(const r of e)if(r.volumeMounts)for(const i of r.volumeMounts)i.name===t.name&&s.push({container:r.name,mountPath:i.mountPath,readOnly:i.readOnly??!1,subPath:i.subPath});return{name:t.name,type:n.type,source:n.detail,extra:n.extra,mounts:s}}function JY(t){switch(t?.toLowerCase()){case"running":return"success";case"succeeded":return"success";case"pending":return"warning";case"failed":return"error";default:return"neutral"}}function QY(t){return t?.state?t.state.running?{state:"running"}:t.state.waiting?{state:"waiting",reason:t.state.waiting.reason,message:t.state.waiting.message}:t.state.terminated?{state:"terminated",reason:t.state.terminated.reason,message:t.state.terminated.message}:{}:{}}function Lg(t){const e=t.toString(8).padStart(4,"0"),n=parseInt(e[e.length-4]||"0",10),s=parseInt(e[e.length-3],10),r=parseInt(e[e.length-2],10),i=parseInt(e[e.length-1],10),o=(n&4)!==0,c=(n&2)!==0,u=(n&1)!==0,h=x=>x&4?"r":"-",m=x=>x&2?"w":"-",p=s&1?o?"s":"x":o?"S":"-",y=r&1?c?"s":"x":c?"S":"-",v=i&1?u?"t":"x":u?"T":"-";return h(s)+m(s)+p+h(r)+m(r)+y+h(i)+m(i)+v}function eZ(t){if(t.configMap)return{type:"ConfigMap",detail:t.configMap.name||"",extra:{...t.configMap.optional!==void 0&&{optional:String(t.configMap.optional)},...t.configMap.defaultMode!==void 0&&{mode:Lg(t.configMap.defaultMode)}}};if(t.secret)return{type:"Secret",detail:t.secret.secretName||"",extra:{...t.secret.optional!==void 0&&{optional:String(t.secret.optional)},...t.secret.defaultMode!==void 0&&{mode:Lg(t.secret.defaultMode)}}};if(t.emptyDir)return{type:"EmptyDir",detail:t.emptyDir.medium||"default",extra:{...t.emptyDir.sizeLimit&&{sizeLimit:t.emptyDir.sizeLimit}}};if(t.hostPath)return{type:"HostPath",detail:t.hostPath.path,extra:{...t.hostPath.type&&{type:t.hostPath.type}}};if(t.persistentVolumeClaim)return{type:"PVC",detail:t.persistentVolumeClaim.claimName,extra:{...t.persistentVolumeClaim.readOnly&&{readOnly:"true"}}};if(t.projected){const e=t.projected.sources||[],n=e.map(s=>s.configMap?"ConfigMap":s.secret?"Secret":s.serviceAccountToken?"ServiceAccountToken":s.downwardAPI?"DownwardAPI":"Unknown");return{type:"Projected",detail:`${e.length} sources`,extra:{sources:n.join(", "),...t.projected.defaultMode!==void 0&&{mode:Lg(t.projected.defaultMode)}}}}return t.downwardAPI?{type:"DownwardAPI",detail:`${t.downwardAPI.items?.length||0} items`,extra:{...t.downwardAPI.defaultMode!==void 0&&{mode:Lg(t.downwardAPI.defaultMode)}}}:t.nfs?{type:"NFS",detail:`${t.nfs.server}:${t.nfs.path}`,extra:{...t.nfs.readOnly&&{readOnly:"true"}}}:t.csi?{type:"CSI",detail:t.csi.driver,extra:{...t.csi.fsType&&{fsType:t.csi.fsType},...t.csi.readOnly&&{readOnly:"true"}}}:{type:"Unknown",detail:""}}const tZ={kinds:["StatefulSet","StatefulSets"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata,i=r?.namespace;if(!n)return{sections:[]};const o=n.replicas??1,c=s?.readyReplicas??0,u=s?.currentReplicas??0,h=s?.updatedReplicas??0,m=s?.availableReplicas??0,p=Array.from({length:o},(_,S)=>`${r?.name}-${S}`),y=async()=>{const _=n.selector?.matchLabels;if(!i||!_||Object.keys(_).length===0)return null;const S=await mC(t,i,_);return S.length===0?null:gC(S)},v=[...n.template?.spec?.containers??[],...n.template?.spec?.initContainers??[]],x=cc(v);return{sections:[{id:"replicas",title:"Replica Status",data:{type:"gauges",items:[{label:"Ready",current:c,total:o,color:"emerald"},{label:"Current",current:u,total:o,color:"blue"},{label:"Updated",current:h,total:o,color:"cyan"}],showPodGrid:{total:o,ready:c,available:m,showOrdinal:!0,icon:"database",podTitles:p}}},{id:"config",data:{type:"info-grid",items:[{label:"Service Name",value:n.serviceName,color:"text-cyan-400"},{label:"Pod Management",value:n.podManagementPolicy||"OrderedReady"},{label:"Update Strategy",value:n.updateStrategy?.type||"RollingUpdate"},...n.updateStrategy?.rollingUpdate?.partition!==void 0?[{label:"Partition",value:n.updateStrategy.rollingUpdate.partition,color:"text-amber-400"}]:[]],columns:2}},...s?.currentRevision?[{id:"revisions",title:"Revisions",data:{type:"info-grid",items:[{label:"Current",value:s.currentRevision,color:"text-cyan-400"},...s.updateRevision&&s.updateRevision!==s.currentRevision?[{label:"Update",value:s.updateRevision,color:"text-amber-400"}]:[]],columns:1}}]:[],...n.volumeClaimTemplates?.length?[{id:"volume-templates",title:"Volume Claim Templates",data:{type:"volume-claim-templates",items:n.volumeClaimTemplates.map(_=>({name:_.metadata?.name||"",size:_.spec?.resources?.requests?.storage,storageClass:_.spec?.storageClassName,accessModes:_.spec?.accessModes}))}}]:[],{id:"pvcs",data:{type:"related-pvcs",title:"Persistent Volume Claims",loader:async()=>{if(!i||!r?.name)return[];try{const _=await $o(t,"persistentvolumeclaims");if(!_)return[];const S=await fC(t,_,i),k=r.name,C=n?.volumeClaimTemplates?.map(N=>N.metadata?.name)??[];return S.filter(N=>{const O=N.metadata.name;return C.some(E=>O.startsWith(`${E}-${k}-`))}).map(N=>{const R=N.metadata,O=N.spec,E=N.status;return{name:R.name,status:E?.phase??"Unknown",capacity:E?.capacity?.storage,storageClass:O?.storageClassName,namespace:i,context:t}})}catch(_){return console.error("Failed to fetch PVCs:",_),[]}}}},...dh(n.template?.spec?.containers,n.template?.spec?.initContainers,y),...x?[x]:[]]}}},nZ={kinds:["DaemonSet","DaemonSets"],adapt(t,e){const n=e.spec,s=e.status,i=e.metadata?.namespace;if(!n)return{sections:[]};const o=s?.desiredNumberScheduled??0,c=s?.currentNumberScheduled??0,u=s?.numberReady??0,h=s?.numberAvailable??0,m=s?.numberMisscheduled??0,p=s?.updatedNumberScheduled??0,y=async()=>{const _=n.selector?.matchLabels;if(!i||!_||Object.keys(_).length===0)return null;const S=await mC(t,i,_);return S.length===0?null:gC(S)},v=[...n.template?.spec?.containers??[],...n.template?.spec?.initContainers??[]],x=cc(v);return{sections:[{id:"distribution",title:"Node Distribution",data:{type:"gauges",items:[{label:"Scheduled",current:c,total:o,color:"blue"},{label:"Ready",current:u,total:o,color:"emerald"},{label:"Available",current:h,total:o,color:"cyan"}],showPodGrid:{total:o,ready:u,current:c,icon:"server"}}},{id:"status",data:{type:"info-grid",items:[{label:"Update Strategy",value:n.updateStrategy?.type||"RollingUpdate"},{label:"Updated",value:`${p}/${o}`,color:"text-cyan-400"},...m>0?[{label:"Misscheduled",value:`${m} pods on wrong nodes`,color:"text-red-400"}]:[]],columns:2}},...n.updateStrategy?.rollingUpdate?[{id:"rolling-update",title:"Rolling Update Config",data:{type:"info-grid",items:[{label:"Max Unavailable",value:String(n.updateStrategy.rollingUpdate.maxUnavailable??1),color:"text-amber-400"},...n.updateStrategy.rollingUpdate.maxSurge?[{label:"Max Surge",value:String(n.updateStrategy.rollingUpdate.maxSurge),color:"text-cyan-400"}]:[]],columns:2}}]:[],...n.template?.spec?.nodeSelector&&Object.keys(n.template.spec.nodeSelector).length>0?[{id:"node-selector",data:{type:"labels",labels:n.template.spec.nodeSelector,title:"Node Selector"}}]:[],...dh(n.template?.spec?.containers,n.template?.spec?.initContainers,y),...x?[x]:[]]}}},sZ={kinds:["Node","Nodes"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata;if(!s)return{sections:[]};const i=s.nodeInfo,o=s.conditions??[],c=s.addresses??[],u=s.capacity??{},h=s.allocatable??{},m=n?.taints??[],p=r?.labels??{},v=o.find(_=>_.type==="Ready")?.status==="True",x=Object.keys(p).filter(_=>_.startsWith("node-role.kubernetes.io/")).map(_=>_.replace("node-role.kubernetes.io/",""));return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Status",value:v?"Ready":"NotReady",status:v?"success":"error",icon:v?f.jsx(vi,{size:14}):f.jsx(Ra,{size:14})},{label:"Role",value:x.length>0?x.join(", "):"worker",icon:f.jsx(mi,{size:14,className:"text-purple-400"})}]}},{id:"metrics",data:{type:"node-metrics",title:"Resource Usage",loader:async()=>{const _=r?.name;if(!_)return null;const S=await OY(t,_);if(!S)return null;const k=h.cpu??"0",C=h.memory??"0";return{cpu:{usage:op(Ro(S.usage.cpu)),usageNanoCores:Ro(S.usage.cpu),allocatable:k,allocatableNanoCores:Ro(k)},memory:{usage:lp(Oo(S.usage.memory)),usageBytes:Oo(S.usage.memory),allocatable:jd(C),allocatableBytes:Oo(C)}}}}},...c.length>0?[{id:"addresses",title:"Addresses",data:{type:"addresses",addresses:c.map(_=>({type:_.type||"",address:_.address||""}))}}]:[],{id:"resources",title:"Resources",data:{type:"capacity-bars",items:[{label:"CPU",icon:f.jsx(bv,{size:14,className:"text-blue-400"}),capacity:u.cpu??"0",allocatable:h.cpu??"0"},{label:"Memory",icon:f.jsx(Ns,{size:14,className:"text-purple-400"}),capacity:jd(u.memory??"0"),allocatable:jd(h.memory??"0")},{label:"Pods",icon:f.jsx(yi,{size:14,className:"text-emerald-400"}),capacity:u.pods??"0",allocatable:h.pods??"0"},...u["ephemeral-storage"]?[{label:"Storage",icon:f.jsx(Ns,{size:14,className:"text-amber-400"}),capacity:jd(u["ephemeral-storage"]),allocatable:jd(h["ephemeral-storage"]??"0")}]:[]]}},...i?[{id:"system-info",title:"System Info",data:{type:"info-grid",items:[{label:"OS",value:i.operatingSystem},{label:"Arch",value:i.architecture},{label:"Kernel",value:i.kernelVersion},{label:"OS Image",value:i.osImage},{label:"Container Runtime",value:i.containerRuntimeVersion},{label:"Kubelet",value:i.kubeletVersion},{label:"Kube-Proxy",value:i.kubeProxyVersion}],columns:2}}]:[],...m.length>0?[{id:"taints",title:"Taints",data:{type:"taints",items:m.map(_=>({key:_.key||"",value:_.value,effect:_.effect||""}))}}]:[]]}}},rZ={kinds:["CronJob","CronJobs"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata,i=r?.namespace;if(!n)return{sections:[]};const o=n.suspend??!1,c=n.schedule,u=s?.lastScheduleTime?new Date(s.lastScheduleTime):null,h=s?.lastSuccessfulTime?new Date(s.lastSuccessfulTime):null,m=s?.active?.length??0,p=WY(c),y=[...n.jobTemplate?.spec?.template?.spec?.containers??[],...n.jobTemplate?.spec?.template?.spec?.initContainers??[]],v=cc(y);return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Status",value:o?"Suspended":"Active",status:o?"warning":"success",icon:o?f.jsx(ip,{size:14}):f.jsx(Mu,{size:14})},{label:"Active Jobs",value:String(m),status:m>0?"warning":"neutral",icon:f.jsx(Oa,{size:14,className:"text-blue-400"})}]}},...v?[v]:[],{id:"schedule",data:{type:"schedule",schedule:c,description:p}},{id:"timing",data:{type:"info-grid",items:[...u?[{label:"Last Scheduled",value:Oj(u),color:"text-purple-400"}]:[],...h?[{label:"Last Successful",value:Oj(h),color:"text-emerald-400"}]:[]],columns:2}},{id:"job-config",title:"Job Configuration",data:{type:"info-grid",items:[{label:"Concurrency Policy",value:n.concurrencyPolicy||"Allow",color:iZ(n.concurrencyPolicy)},...n.startingDeadlineSeconds?[{label:"Starting Deadline",value:`${n.startingDeadlineSeconds}s`}]:[],{label:"Successful History",value:n.successfulJobsHistoryLimit??3},{label:"Failed History",value:n.failedJobsHistoryLimit??1},...n.jobTemplate?.spec?.backoffLimit!==void 0?[{label:"Backoff Limit",value:n.jobTemplate.spec.backoffLimit}]:[],...n.jobTemplate?.spec?.activeDeadlineSeconds?[{label:"Job Deadline",value:`${n.jobTemplate.spec.activeDeadlineSeconds}s`,color:"text-amber-400"}]:[]],columns:2}},{id:"jobs",data:{type:"related-jobs",title:"Recent Jobs",loader:async()=>{if(!i||!r?.name)return[];try{const x=await $o(t,"jobs");if(!x)return[];const _=await fC(t,x,i),S=r.name??"",k=r.uid;return _.filter(C=>{const N=C.metadata,R=N.name;if(N.ownerReferences?.some(E=>E.kind==="CronJob"&&E.name===S||E.uid===k))return!0;if(R.startsWith(S+"-")){const E=R.slice(S.length+1);return/^\d{10}$/.test(E)}return!1}).map(C=>{const N=C.metadata,R=C.status,O=R?.conditions,E=O?.some(B=>B.type==="Complete"&&B.status==="True"),D=O?.some(B=>B.type==="Failed"&&B.status==="True");return{name:N.name,status:E?"Complete":D?"Failed":"Running",startTime:R?.startTime,completionTime:R?.completionTime,succeeded:R?.succeeded,failed:R?.failed,namespace:i,context:t}}).sort((C,N)=>{const R=C.startTime?new Date(C.startTime).getTime():0;return(N.startTime?new Date(N.startTime).getTime():0)-R})}catch(x){return console.error("Failed to fetch Jobs:",x),[]}}}},...dh(n.jobTemplate?.spec?.template?.spec?.containers,n.jobTemplate?.spec?.template?.spec?.initContainers)]}}};function iZ(t){switch(t){case"Forbid":return"text-red-400";case"Replace":return"text-amber-400";default:return"text-emerald-400"}}const aZ={kinds:["Job","Jobs"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=n.completions??1,i=n.parallelism??1,o=s?.succeeded??0,c=s?.failed??0,u=s?.active??0,h=n.backoffLimit??6,m=o>=r,p=s?.conditions?.some(k=>k.type==="Failed"&&k.status==="True"),y=m?"Complete":p?"Failed":u>0?"Running":"Pending",v=s?.startTime?new Date(s.startTime):void 0,x=s?.completionTime?new Date(s.completionTime):void 0,_=[...n.template?.spec?.containers??[],...n.template?.spec?.initContainers??[]],S=cc(_);return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Status",value:y,status:m?"success":p?"error":u>0?"warning":"neutral",icon:m?f.jsx(vi,{size:14}):p?f.jsx(Ra,{size:14}):f.jsx(Mu,{size:14})},...v?[{label:"Duration",value:oZ(v,x),icon:f.jsx(Oa,{size:14,className:"text-blue-400"})}]:[]]}},...S?[S]:[],{id:"progress",title:"Progress",data:{type:"job-progress",completions:r,succeeded:o,failed:c,active:u}},{id:"config",data:{type:"info-grid",items:[{label:"Parallelism",value:i,color:"text-cyan-400"},{label:"Backoff Limit",value:`${h}${c>0?` (${c} failures)`:""}`,color:c>=h?"text-red-400":c>0?"text-amber-400":void 0},...n.activeDeadlineSeconds?[{label:"Deadline",value:`${n.activeDeadlineSeconds}s`,color:"text-amber-400"}]:[],...n.ttlSecondsAfterFinished!==void 0?[{label:"TTL After Finished",value:`${n.ttlSecondsAfterFinished}s`}]:[],...n.completionMode?[{label:"Completion Mode",value:n.completionMode,color:"text-purple-400"}]:[]],columns:2}},...v?[{id:"timeline",title:"Timeline",data:{type:"timeline",startTime:v,completionTime:x}}]:[],...dh(n.template?.spec?.containers,n.template?.spec?.initContainers)]}}};function oZ(t,e){const s=(e??new Date).getTime()-t.getTime(),r=Math.floor(s/1e3),i=Math.floor(r/60),o=Math.floor(i/60),c=Math.floor(o/24);return c>0?`${c}d ${o%24}h`:o>0?`${o}h ${i%60}m`:i>0?`${i}m ${r%60}s`:`${r}s`}const lZ={kinds:["ReplicaSet","ReplicaSets"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata,i=r?.namespace;if(!n)return{sections:[]};const o=n.replicas??1,c=s?.replicas??0,u=s?.readyReplicas??0,h=s?.availableReplicas??0,m=r?.ownerReferences?.[0],p=[...n.template?.spec?.containers??[],...n.template?.spec?.initContainers??[]],y=cc(p),v=x=>({Deployment:"deployments",StatefulSet:"statefulsets",DaemonSet:"daemonsets",Job:"jobs"})[x]||x.toLowerCase()+"s";return{sections:[...m?[{id:"owner",data:{type:"custom",render:()=>{const x=f.jsxs("div",{className:`bg-blue-500/10 border border-blue-500/30 rounded-lg p-3 ${i?"hover:bg-blue-500/15 transition-colors cursor-pointer":""}`,children:[f.jsxs("div",{className:"text-xs text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(uh,{size:10})," Owned By"]}),f.jsxs("div",{className:"text-sm flex items-center gap-2",children:[f.jsxs("span",{className:"text-neutral-500",children:[m.kind,":"]}),f.jsx("span",{className:"text-cyan-400",children:m.name})]})]});return i?f.jsx(ac,{to:"/cluster/$context/$resourceType/$name",params:{context:t,resourceType:v(m.kind),name:m.name},search:_=>({..._,namespace:i}),children:x}):x}}}]:[],{id:"replicas",title:"Replica Status",data:{type:"gauges",items:[{label:"Ready",current:u,total:o,color:"emerald"},{label:"Current",current:c,total:o,color:"blue"},{label:"Available",current:h,total:o,color:"cyan"}],showPodGrid:{total:Math.max(o,c),ready:u,available:h,current:c,icon:"box"}}},...y?[y]:[],...n.selector?.matchLabels?[{id:"selector",data:{type:"labels",labels:n.selector.matchLabels,title:"Selector"}}]:[],...dh(n.template?.spec?.containers,n.template?.spec?.initContainers)]}}},cZ={kinds:["PersistentVolume","PersistentVolumes"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=s?.phase??"Unknown",i=n.capacity?.storage??"Unknown";return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Phase",value:r,status:uZ(r)},{label:"Capacity",value:i,icon:f.jsx(Ns,{size:14,className:"text-purple-400"})},{label:"Reclaim Policy",value:n.persistentVolumeReclaimPolicy??"Delete",status:n.persistentVolumeReclaimPolicy==="Retain"?"warning":"neutral"},{label:"Volume Mode",value:n.volumeMode??"Filesystem"}]}},...n.accessModes?.length?[{id:"access-modes",title:"Access Modes",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.accessModes.map((o,c)=>f.jsx("span",{className:`text-xs px-2 py-1 rounded ${SD(o)}`,children:kD(o)},c))})}}]:[],...n.storageClassName?[{id:"storage-class",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Storage Class"}),f.jsxs("div",{className:"text-sm text-purple-600 dark:text-purple-400 flex items-center gap-2",children:[f.jsx(lc,{size:14}),n.storageClassName]})]})}}]:[],...n.claimRef?[{id:"claim-ref",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(uh,{size:10})," Bound To"]}),f.jsxs("div",{className:"text-sm",children:[f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-500",children:[n.claimRef.namespace,"/"]}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:n.claimRef.name})]})]})}}]:[],{id:"source",title:"Volume Source",data:{type:"custom",render:()=>{const o=hZ(n),c=o.find(h=>h.label==="Type")?.value||"Unknown",u=o.filter(h=>h.label!=="Type");return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3 space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:"Type:"}),f.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-purple-500/20 text-purple-700 dark:text-purple-400",children:c})]}),u.length>0&&f.jsx("div",{className:"space-y-1 pl-1",children:u.map((h,m)=>f.jsxs("div",{className:"text-xs",children:[f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-500",children:[h.label,":"]})," ",f.jsx("span",{className:h.color?`${h.color.replace("text-cyan-400","text-cyan-600 dark:text-cyan-400").replace("text-purple-400","text-purple-600 dark:text-purple-400")}`:"text-neutral-900 dark:text-neutral-300",children:h.value})]},m))})]})}}},...n.nodeAffinity?.required?.nodeSelectorTerms?[{id:"node-affinity",title:"Node Affinity",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.nodeAffinity.required.nodeSelectorTerms.map((o,c)=>f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-2",children:o.matchExpressions?.map((u,h)=>f.jsxs("div",{className:"text-xs",children:[f.jsx("span",{className:"text-purple-400",children:u.key}),f.jsx("span",{className:"text-neutral-500 mx-1",children:u.operator}),u.values&&f.jsx("span",{className:"text-cyan-400",children:u.values.join(", ")})]},h))},c))})}}]:[],...n.mountOptions?.length?[{id:"mount-options",title:"Mount Options",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-1",children:n.mountOptions.map((o,c)=>f.jsx("span",{className:"text-xs bg-neutral-200 dark:bg-neutral-800 px-2 py-1 rounded text-neutral-800 dark:text-neutral-300",children:o},c))})}}]:[]]}}};function uZ(t){switch(t){case"Bound":return"success";case"Available":return"success";case"Released":return"warning";case"Failed":return"error";default:return"neutral"}}function hZ(t){if(!t)return[];const e=[];return t.hostPath?(e.push({label:"Type",value:"HostPath"}),e.push({label:"Path",value:t.hostPath.path,color:"text-cyan-400"})):t.nfs?(e.push({label:"Type",value:"NFS"}),e.push({label:"Server",value:t.nfs.server,color:"text-cyan-400"}),e.push({label:"Path",value:t.nfs.path,color:"text-cyan-400"})):t.csi?(e.push({label:"Type",value:"CSI"}),e.push({label:"Driver",value:t.csi.driver,color:"text-purple-400"}),t.csi.volumeHandle&&e.push({label:"Handle",value:t.csi.volumeHandle,color:"text-cyan-400"})):t.local?(e.push({label:"Type",value:"Local"}),e.push({label:"Path",value:t.local.path,color:"text-cyan-400"})):t.awsElasticBlockStore?(e.push({label:"Type",value:"AWS EBS"}),e.push({label:"Volume ID",value:t.awsElasticBlockStore.volumeID,color:"text-cyan-400"})):t.gcePersistentDisk?(e.push({label:"Type",value:"GCE PD"}),e.push({label:"PD Name",value:t.gcePersistentDisk.pdName,color:"text-cyan-400"})):t.azureDisk?(e.push({label:"Type",value:"Azure Disk"}),e.push({label:"Disk Name",value:t.azureDisk.diskName,color:"text-cyan-400"})):e.push({label:"Type",value:"Unknown"}),e}const dZ={kinds:["PersistentVolumeClaim","PersistentVolumeClaims"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=s?.phase??"Unknown",i=n.volumeName,o=n.resources?.requests?.storage,c=s?.capacity?.storage,u=[{id:"status",data:{type:"status-cards",items:[{label:"Phase",value:r,status:fZ(r)},{label:"Requested",value:o??"Not specified",icon:f.jsx(Ns,{size:14,className:"text-purple-400"})},...c?[{label:"Actual Capacity",value:c,status:"success"}]:[],{label:"Volume Mode",value:n.volumeMode??"Filesystem"}]}}];return n.accessModes?.length&&u.push({id:"access-modes",title:"Access Modes",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.accessModes.map((h,m)=>f.jsx("span",{className:`text-xs px-2 py-1 rounded ${SD(h)}`,children:kD(h)},m))})}}),n.storageClassName&&u.push({id:"storage-class",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Storage Class"}),f.jsxs("div",{className:"text-sm text-purple-600 dark:text-purple-400 flex items-center gap-2",children:[f.jsx(lc,{size:14}),n.storageClassName]})]})}}),i?u.push({id:"bound-volume",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(uh,{size:10})," Bound To"]}),f.jsxs("div",{className:"text-sm",children:[f.jsx("span",{className:"text-neutral-700 dark:text-neutral-400",children:"platform/"}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:i})]})]})}}):u.push({id:"no-volume",data:{type:"custom",render:()=>f.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3",children:f.jsxs("div",{className:"text-yellow-400 text-sm flex items-center gap-2",children:[f.jsx(aC,{size:14}),"Not bound to any volume"]})})}}),n.selector?.matchLabels&&Object.keys(n.selector.matchLabels).length>0&&u.push({id:"selector",title:"Volume Selector",data:{type:"labels",labels:n.selector.matchLabels}}),{sections:u}}};function fZ(t){switch(t){case"Bound":return"success";case"Pending":return"warning";case"Lost":return"error";default:return"neutral"}}const pZ="/apis/argoproj.io/v1alpha1";async function ED(t,e,n,s){const r=`/contexts/${t}${pZ}/namespaces/${n}/applications/${e}`,i=await fetch(r,{method:"PATCH",headers:{"Content-Type":"application/merge-patch+json"},body:JSON.stringify(s)});if(!i.ok){const o=await i.text();throw new Error(`Failed to patch application: ${i.status} ${i.statusText} - ${o}`)}return i}async function Bj(t,e,n="argocd",s={}){const i={operation:{sync:{syncStrategy:s.strategy==="apply"?{apply:{}}:{hook:{}},...s.revision&&{revision:s.revision},...s.prune!==void 0&&{prune:s.prune},...s.dryRun!==void 0&&{dryRun:s.dryRun}}}};await ED(t,e,n,i)}async function Lj(t,e,n="argocd",s=!1){await ED(t,e,n,{metadata:{annotations:{"argocd.argoproj.io/refresh":s?"hard":"normal"}}})}function mZ(t){switch(t){case"Synced":return"success";case"OutOfSync":return"warning";default:return"neutral"}}function gZ(t){switch(t){case"Healthy":return"success";case"Progressing":return"warning";case"Degraded":case"Missing":return"error";case"Suspended":return"warning";default:return"neutral"}}function yZ(t){switch(t){case"Synced":return f.jsx(vi,{size:14,className:"text-emerald-400"});case"OutOfSync":return f.jsx(Ln,{size:14,className:"text-amber-400"});default:return f.jsx(ch,{size:14,className:"text-gray-400"})}}function vZ(t){switch(t){case"Healthy":return f.jsx(vi,{size:14,className:"text-emerald-400"});case"Progressing":return f.jsx(Ln,{size:14,className:"text-blue-400 animate-spin"});case"Degraded":return f.jsx(Ra,{size:14,className:"text-red-400"});case"Missing":return f.jsx(ch,{size:14,className:"text-red-400"});case"Suspended":return f.jsx(ip,{size:14,className:"text-amber-400"});default:return f.jsx(Rp,{size:14,className:"text-gray-400"})}}function bZ(t,e=12){switch(t){case"Healthy":return f.jsx(vi,{size:e,className:"text-emerald-400 shrink-0"});case"Progressing":return f.jsx(Ln,{size:e,className:"text-blue-400 animate-spin shrink-0"});case"Degraded":return f.jsx(Ra,{size:e,className:"text-red-400 shrink-0"});case"Missing":return f.jsx(ch,{size:e,className:"text-red-400 shrink-0"});case"Suspended":return f.jsx(ip,{size:e,className:"text-amber-400 shrink-0"});default:return f.jsx(Rp,{size:e,className:"text-gray-400 shrink-0"})}}function _Z(t){const e={Synced:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",OutOfSync:"bg-amber-500/20 text-amber-400 border-amber-500/30",Unknown:"bg-gray-500/20 text-gray-400 border-gray-500/30"},n=e[t]||e.Unknown;return f.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${n}`,children:t||"Unknown"})}function Ex(t){if(!t)return"Unknown";const e=new Date(t),s=Math.floor((new Date().getTime()-e.getTime())/1e3);return s<60?`${s}s ago`:s<3600?`${Math.floor(s/60)}m ago`:s<86400?`${Math.floor(s/3600)}h ago`:`${Math.floor(s/86400)}d ago`}function xZ(t){if(!t)return"Unknown";const e=t.match(/[:/]([^/:]+\/[^/:]+?)(?:\.git)?$/);return e?e[1]:t}const wZ={kinds:["Application","Applications"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=n.source||n.sources?.[0],i=s?.sync?.status||"Unknown",o=s?.health?.status||"Unknown",c=s?.operationState?.phase,u={healthy:0,progressing:0,degraded:0,missing:0,suspended:0,unknown:0};s?.resources?.forEach(m=>{const p=m.health?.status;let y;p?y=p.toLowerCase():y=m.status==="Synced"?"healthy":"unknown",y in u&&u[y]++});const h=s?.resources?.length||0;return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Sync Status",value:i,status:mZ(i),icon:yZ(i)},{label:"Health",value:o,status:gZ(o),icon:vZ(o)},...c?[{label:"Operation",value:c,status:c==="Succeeded"?"success":c==="Failed"?"error":"warning",icon:c==="Running"?f.jsx(Ln,{size:14,className:"animate-spin"}):void 0}]:[]]}},...h>0?[{id:"resource-health",title:"Resource Health",data:{type:"gauges",items:[{label:"Healthy",current:u.healthy,total:h,color:"emerald"},{label:"Progressing",current:u.progressing,total:h,color:"blue"},{label:"Degraded",current:u.degraded+u.missing,total:h,color:"amber"}]}}]:[],...s?.resources?.length?[{id:"resources",title:"Managed Resources",data:{type:"custom",render:()=>{const m=new Map;s.resources.forEach(y=>{const v=y.kind||"Unknown";m.has(v)||m.set(v,[]),m.get(v).push(y)});const p=Array.from(m.keys()).sort((y,v)=>{const x=m.get(y),_=m.get(v),S=x.some(C=>C.health?.status!=="Healthy"),k=_.some(C=>C.health?.status!=="Healthy");return S&&!k?-1:!S&&k?1:y.localeCompare(v)});return f.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:p.map(y=>{const v=m.get(y),x=[...v].sort((_,S)=>{const k=_.health?.status==="Healthy",C=S.health?.status==="Healthy";return!k&&C?-1:k&&!C?1:(_.name||"").localeCompare(S.name||"")});return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-2",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[f.jsx(fD,{size:12,className:"text-neutral-500"}),f.jsx("span",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-400",children:y}),f.jsxs("span",{className:"text-[10px] text-neutral-500 dark:text-neutral-600",children:["(",v.length,")"]})]}),f.jsx("div",{className:"space-y-1",children:x.map((_,S)=>f.jsxs("div",{className:"flex items-center gap-2 text-xs pl-4",children:[bZ(_.health?.status),f.jsx("span",{className:"text-neutral-700 dark:text-neutral-300 truncate flex-1",title:_.name,children:_.name}),_.namespace&&f.jsx("span",{className:"text-neutral-500 dark:text-neutral-600 text-[10px]",children:_.namespace}),_Z(_.status),_.requiresPruning&&f.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded border bg-red-500/20 text-red-400 border-red-500/30",children:"Prune"})]},`${_.namespace}-${_.name}-${S}`))})]},y)})})}}}]:[],{id:"source",title:"Source",data:{type:"info-grid",items:[{label:"Repository",value:xZ(r?.repoURL),color:"text-cyan-400"},{label:"Path",value:r?.path||r?.chart||"/",color:"text-purple-400"},{label:"Target Revision",value:r?.targetRevision||"HEAD",color:"text-blue-400"},...s?.sync?.revision?[{label:"Current Revision",value:s.sync.revision.substring(0,7),color:"text-emerald-400"}]:[]],columns:2}},{id:"destination",title:"Destination",data:{type:"info-grid",items:[{label:"Server",value:n.destination?.name||n.destination?.server||"Unknown"},{label:"Namespace",value:n.destination?.namespace||"default",color:"text-cyan-400"},{label:"Project",value:n.project||"default",color:"text-purple-400"}],columns:2}},...n.syncPolicy?[{id:"sync-policy",title:"Sync Policy",data:{type:"info-grid",items:[...n.syncPolicy.automated?[{label:"Auto Sync",value:"Enabled",color:"text-emerald-400"},{label:"Prune",value:n.syncPolicy.automated.prune?"Yes":"No",color:n.syncPolicy.automated.prune?"text-amber-400":void 0},{label:"Self Heal",value:n.syncPolicy.automated.selfHeal?"Yes":"No",color:n.syncPolicy.automated.selfHeal?"text-emerald-400":void 0}]:[{label:"Auto Sync",value:"Disabled",color:"text-gray-400"}],...n.syncPolicy.retry?.limit?[{label:"Retry Limit",value:n.syncPolicy.retry.limit}]:[]],columns:2}}]:[],...n.syncPolicy?.syncOptions?.length?[{id:"sync-options",data:{type:"labels",labels:Object.fromEntries(n.syncPolicy.syncOptions.map(m=>{const[p,y]=m.split("=");return[p,y||"true"]})),title:"Sync Options"}}]:[],...s?.reconciledAt||s?.operationState?.finishedAt?[{id:"timing",data:{type:"info-grid",items:[...s?.reconciledAt?[{label:"Last Reconciled",value:Ex(s.reconciledAt)}]:[],...s?.operationState?.startedAt?[{label:"Operation Started",value:Ex(s.operationState.startedAt)}]:[],...s?.operationState?.finishedAt?[{label:"Operation Finished",value:Ex(s.operationState.finishedAt)}]:[]],columns:2}}]:[],...s?.health?.message?[{id:"health-message",title:"Health Message",data:{type:"info-grid",items:[{label:"Message",value:s.health.message}],columns:1}}]:[],...s?.operationState?.message?[{id:"operation-message",title:"Operation Message",data:{type:"info-grid",items:[{label:"Message",value:s.operationState.message}],columns:1}}]:[],...s?.summary?.images?.length?[{id:"images",title:"Images",data:{type:"container-images",containers:s.summary.images.map((m,p)=>({name:`image-${p+1}`,image:m}))}}]:[]]}},actions:[{id:"sync",label:"Sync",icon:f.jsx(Mu,{size:14}),variant:"primary",confirm:{title:"Sync Application",message:"This will sync the application to match the desired state in Git. Continue?",confirmLabel:"Sync"},execute:async(t,e)=>{const n=e.metadata?.name,s=e.metadata?.namespace||"argocd";if(!n)throw new Error("Application name is required");await Bj(t,n,s)},isDisabled:t=>t.status?.operationState?.phase==="Running"?"Sync already in progress":!1},{id:"sync-prune",label:"Sync (Prune)",icon:f.jsx(KW,{size:14}),variant:"warning",confirm:{title:"Sync with Prune",message:"This will sync the application and DELETE resources that are no longer in Git. This action cannot be undone. Continue?",confirmLabel:"Sync & Prune"},execute:async(t,e)=>{const n=e.metadata?.name,s=e.metadata?.namespace||"argocd";if(!n)throw new Error("Application name is required");await Bj(t,n,s,{prune:!0})},isDisabled:t=>t.status?.operationState?.phase==="Running"?"Sync already in progress":!1},{id:"refresh",label:"Refresh",icon:f.jsx(Ln,{size:14}),variant:"secondary",execute:async(t,e)=>{const n=e.metadata?.name,s=e.metadata?.namespace||"argocd";if(!n)throw new Error("Application name is required");await Lj(t,n,s)}},{id:"hard-refresh",label:"Hard Refresh",icon:f.jsx(dG,{size:14}),variant:"secondary",execute:async(t,e)=>{const n=e.metadata?.name,s=e.metadata?.namespace||"argocd";if(!n)throw new Error("Application name is required");await Lj(t,n,s,!0)}}]};function SZ(t){return!t||t.length===0?{status:"Unknown",level:"neutral"}:t.find(r=>r.type==="ErrorOccurred"&&r.status==="True")?{status:"Error",level:"error"}:t.find(r=>r.type==="ResourcesUpToDate")?.status==="True"?{status:"Healthy",level:"success"}:t.find(r=>r.type==="ParametersGenerated")?.status==="True"?{status:"Progressing",level:"warning"}:{status:"Unknown",level:"neutral"}}function kZ(t){switch(t){case"success":return f.jsx(vi,{size:14,className:"text-emerald-400"});case"warning":return f.jsx(Ln,{size:14,className:"text-amber-400"});case"error":return f.jsx(Ra,{size:14,className:"text-red-400"});default:return f.jsx(Rp,{size:14,className:"text-gray-400"})}}function CZ(t){if(t.list){const e=t.list.elements?.length||0;return{name:"List",icon:f.jsx(CG,{size:12,className:"text-blue-400"}),details:`${e} element${e!==1?"s":""}`}}if(t.clusters)return{name:"Clusters",icon:f.jsx(mi,{size:12,className:"text-purple-400"}),details:t.clusters.selector?.matchLabels?Object.entries(t.clusters.selector.matchLabels).map(([e,n])=>`${e}=${n}`).join(", "):"All clusters"};if(t.git){const e=t.git.directories&&t.git.directories.length>0,n=t.git.files&&t.git.files.length>0;return{name:n?"Git Files":"Git Directories",icon:f.jsx(ry,{size:12,className:"text-cyan-400"}),details:e?t.git.directories?.map(s=>s.path).join(", "):n?t.git.files?.map(s=>s.path).join(", "):t.git.revision||"HEAD"}}if(t.matrix){const e=t.matrix.generators?.length||0;return{name:"Matrix",icon:f.jsx(pi,{size:12,className:"text-amber-400"}),details:`${e} generator${e!==1?"s":""}`}}if(t.merge){const e=t.merge.generators?.length||0;return{name:"Merge",icon:f.jsx(pi,{size:12,className:"text-orange-400"}),details:`${e} generator${e!==1?"s":""}`}}return t.scmProvider?{name:`SCM Provider (${t.scmProvider.github?"GitHub":t.scmProvider.gitlab?"GitLab":t.scmProvider.bitbucket?"Bitbucket":t.scmProvider.bitbucketServer?"Bitbucket Server":t.scmProvider.gitea?"Gitea":t.scmProvider.azureDevOps?"Azure DevOps":"Unknown"})`,icon:f.jsx(PW,{size:12,className:"text-green-400"}),details:t.scmProvider.github?.organization||t.scmProvider.gitlab?.group||t.scmProvider.bitbucket?.owner||t.scmProvider.azureDevOps?.organization}:t.pullRequest?{name:`Pull Request (${t.pullRequest.github?"GitHub":t.pullRequest.gitlab?"GitLab":t.pullRequest.bitbucketServer?"Bitbucket Server":"Unknown"})`,icon:f.jsx(ry,{size:12,className:"text-pink-400"}),details:t.pullRequest.github?.repo||t.pullRequest.gitlab?.project||t.pullRequest.bitbucketServer?.repo}:t.clusterDecisionResource?{name:"Cluster Decision Resource",icon:f.jsx(aG,{size:12,className:"text-indigo-400"}),details:t.clusterDecisionResource.configMapRef}:{name:"Unknown",icon:f.jsx(Rp,{size:12,className:"text-gray-400"})}}function NZ(t){if(!t)return"Unknown";const e=t.match(/[:/]([^/:]+\/[^/:]+?)(?:\.git)?$/);return e?e[1]:t}function EZ(t){if(!t)return"Unknown";const e=new Date(t),s=Math.floor((new Date().getTime()-e.getTime())/1e3);return s<60?`${s}s ago`:s<3600?`${Math.floor(s/60)}m ago`:s<86400?`${Math.floor(s/3600)}h ago`:`${Math.floor(s/86400)}d ago`}const AZ={kinds:["ApplicationSet","ApplicationSets"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata;if(!n)return{sections:[]};const i=n.template,o=i?.spec?.source||i?.spec?.sources?.[0],c=SZ(s?.conditions),u=s?.applicationStatus?.length||0;return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Status",value:c.status,status:c.level,icon:kZ(c.level)},{label:"Applications",value:u,status:u>0?"success":"neutral",icon:f.jsx(fD,{size:14,className:u>0?"text-emerald-400":"text-gray-400"})},{label:"Generators",value:n.generators?.length||0,status:"neutral",icon:f.jsx(pi,{size:14,className:"text-blue-400"})}]}},...n.generators?.length?[{id:"generators",title:"Generators",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.generators.map((h,m)=>{const p=CZ(h);return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-2.5 flex items-center gap-3",children:[f.jsx("div",{className:"p-1.5 bg-neutral-200 dark:bg-neutral-700/50 rounded",children:p.icon}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"text-xs font-medium text-neutral-900 dark:text-neutral-200",children:p.name}),p.details&&f.jsx("div",{className:"text-[10px] text-neutral-500 truncate",title:p.details,children:p.details})]})]},m)})})}}]:[],...s?.applicationStatus?.length?[{id:"applications",title:"Generated Applications",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-1 max-h-60 overflow-y-auto",children:s.applicationStatus.map((h,m)=>{const p=h.status==="Successful"||h.status==="Healthy"?"success":h.status==="Waiting"||h.status==="Progressing"?"warning":h.status==="Error"||h.status==="Failed"?"error":"neutral";return f.jsxs("div",{className:"flex items-center gap-2 text-xs bg-neutral-100 dark:bg-neutral-800/30 rounded px-2 py-1.5",children:[p==="success"&&f.jsx(vi,{size:12,className:"text-emerald-400 shrink-0"}),p==="warning"&&f.jsx(Ln,{size:12,className:"text-amber-400 shrink-0"}),p==="error"&&f.jsx(Ra,{size:12,className:"text-red-400 shrink-0"}),p==="neutral"&&f.jsx(Rp,{size:12,className:"text-gray-400 shrink-0"}),f.jsx("span",{className:"text-neutral-700 dark:text-neutral-300 truncate flex-1",title:h.application,children:h.application||"Unknown"}),h.status&&f.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${p==="success"?"bg-emerald-500/20 text-emerald-400 border-emerald-500/30":p==="warning"?"bg-amber-500/20 text-amber-400 border-amber-500/30":p==="error"?"bg-red-500/20 text-red-400 border-red-500/30":"bg-gray-500/20 text-gray-400 border-gray-500/30"}`,children:h.status})]},h.application||m)})})}}]:[],...o?[{id:"template-source",title:"Template Source",data:{type:"info-grid",items:[{label:"Repository",value:NZ(o.repoURL),color:"text-cyan-400"},{label:"Path",value:o.path||o.chart||"/",color:"text-purple-400"},{label:"Revision",value:o.targetRevision||"HEAD",color:"text-blue-400"}],columns:2}}]:[],...i?.spec?.destination?[{id:"template-destination",title:"Template Destination",data:{type:"info-grid",items:[{label:"Server",value:i.spec.destination.name||i.spec.destination.server||"{{server}}"},{label:"Namespace",value:i.spec.destination.namespace||"{{namespace}}",color:"text-cyan-400"},{label:"Project",value:i.spec.project||"default",color:"text-purple-400"}],columns:2}}]:[],...n.syncPolicy?[{id:"sync-policy",title:"Sync Policy",data:{type:"info-grid",items:[{label:"Preserve Resources on Deletion",value:n.syncPolicy.preserveResourcesOnDeletion?"Yes":"No",color:n.syncPolicy.preserveResourcesOnDeletion?"text-amber-400":void 0},...n.syncPolicy.applicationsSync?[{label:"Applications Sync",value:n.syncPolicy.applicationsSync,color:"text-blue-400"}]:[]],columns:2}}]:[],...n.strategy?[{id:"strategy",title:"Rollout Strategy",data:{type:"info-grid",items:[{label:"Type",value:n.strategy.type||"AllAtOnce",color:n.strategy.type==="RollingSync"?"text-cyan-400":void 0},...n.strategy.rollingSync?.steps?.length?[{label:"Steps",value:n.strategy.rollingSync.steps.length}]:[]],columns:2}}]:[],...n.goTemplate!==void 0?[{id:"template-options",title:"Template Options",data:{type:"info-grid",items:[{label:"Go Template",value:n.goTemplate?"Enabled":"Disabled",color:n.goTemplate?"text-emerald-400":"text-gray-400"},...n.goTemplateOptions?.length?[{label:"Options",value:n.goTemplateOptions.join(", ")}]:[]],columns:2}}]:[],...r?.creationTimestamp?[{id:"timing",data:{type:"info-grid",items:[{label:"Created",value:EZ(r.creationTimestamp)}],columns:1}}]:[]]}}};function jZ(t){const e=t?.find(n=>n.type==="Ready");return e?{ready:e.status==="True",reason:e.reason,message:e.message}:{ready:!1}}function TZ(t,e){return t?"success":e==="Issuing"||e==="Pending"?"warning":"error"}function RZ(t,e){return t?f.jsx(vi,{size:14,className:"text-emerald-400"}):e==="Issuing"||e==="Pending"?f.jsx(Ln,{size:14,className:"text-amber-400 animate-spin"}):f.jsx(Ra,{size:14,className:"text-red-400"})}function OZ(t){if(!t)return"Default (90d)";const e=t.match(/^(\d+)h$/);if(e){const n=parseInt(e[1],10);return n>=8760?`${Math.round(n/8760)}y`:n>=720?`${Math.round(n/720)}mo`:n>=24?`${Math.round(n/24)}d`:`${n}h`}return t}function Ig(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function MZ(t){if(!t)return{text:"Unknown",status:"neutral"};const e=new Date,s=new Date(t).getTime()-e.getTime(),r=Math.floor(s/(1e3*60*60*24));return s<0?{text:"Expired",status:"error"}:r<7?{text:`${r}d remaining`,status:"error"}:r<30?{text:`${r}d remaining`,status:"warning"}:r>365?{text:`${Math.floor(r/365)}y remaining`,status:"success"}:r>30?{text:`${Math.floor(r/30)}mo remaining`,status:"success"}:{text:`${r}d remaining`,status:"success"}}function DZ(t){if(!t)return"RSA 2048";const e=t.algorithm??"RSA",n=t.size??(e==="ECDSA"?256:2048);return`${e} ${n}`}const BZ={kinds:["Certificate","Certificates"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const{ready:r,reason:i}=jZ(s?.conditions),o=MZ(s?.notAfter),c=[{id:"status",data:{type:"status-cards",items:[{label:"Status",value:r?"Ready":i??"Not Ready",status:TZ(r,i),icon:RZ(r,i)},{label:"Expires",value:o.text,status:o.status,icon:f.jsx(Oa,{size:14,className:o.status==="error"?"text-red-400":o.status==="warning"?"text-amber-400":"text-emerald-400"})},{label:"Type",value:n.isCA?"CA Certificate":"TLS Certificate",status:"neutral",icon:f.jsx(hh,{size:14,className:n.isCA?"text-purple-400":"text-blue-400"})},{label:"Revision",value:s?.revision??1,status:"neutral"}]}}];if(c.push({id:"details",title:"Certificate Details",data:{type:"info-grid",columns:2,items:[{label:"Secret Name",value:n.secretName},...n.commonName?[{label:"Common Name",value:n.commonName}]:[],{label:"Duration",value:OZ(n.duration)},{label:"Algorithm",value:DZ(n.privateKey)},...s?.notBefore?[{label:"Valid From",value:Ig(s.notBefore)}]:[],...s?.notAfter?[{label:"Valid Until",value:Ig(s.notAfter)}]:[],...s?.renewalTime?[{label:"Renewal Time",value:Ig(s.renewalTime)}]:[]]}}),c.push({id:"issuer",title:"Issuer",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(Mp,{size:14,className:"text-purple-400"}),f.jsx("span",{className:"text-sm font-medium text-purple-300",children:n.issuerRef.kind??"Issuer"})]}),f.jsx("div",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:n.issuerRef.name}),n.issuerRef.group&&f.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:n.issuerRef.group})]})}}),n.dnsNames?.length&&c.push({id:"dns-names",title:"DNS Names",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.dnsNames.map((u,h)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-blue-500/20 text-blue-300 border border-blue-500/30",children:u},h))})}}),n.ipAddresses?.length&&c.push({id:"ip-addresses",title:"IP Addresses",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.ipAddresses.map((u,h)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-cyan-500/20 text-cyan-300 border border-cyan-500/30",children:u},h))})}}),n.uris?.length&&c.push({id:"uris",title:"URIs",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-1",children:n.uris.map((u,h)=>f.jsx("div",{className:"text-xs text-neutral-700 dark:text-neutral-300 font-mono",children:u},h))})}}),n.emailAddresses?.length&&c.push({id:"email-addresses",title:"Email Addresses",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.emailAddresses.map((u,h)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-amber-500/20 text-amber-300 border border-amber-500/30",children:u},h))})}}),n.usages?.length&&c.push({id:"usages",title:"Key Usages",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.usages.map((u,h)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-neutral-200 dark:bg-neutral-700 text-neutral-700 dark:text-neutral-300",children:u},h))})}}),n.privateKey&&c.push({id:"private-key",title:"Private Key",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(Dp,{size:14,className:"text-neutral-400"}),f.jsx("span",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Configuration"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-500",children:"Algorithm:"}),f.jsx("span",{className:"ml-1 text-neutral-700 dark:text-neutral-300",children:n.privateKey.algorithm??"RSA"})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-500",children:"Size:"}),f.jsx("span",{className:"ml-1 text-neutral-700 dark:text-neutral-300",children:n.privateKey.size??2048})]}),n.privateKey.encoding&&f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-500",children:"Encoding:"}),f.jsx("span",{className:"ml-1 text-neutral-700 dark:text-neutral-300",children:n.privateKey.encoding})]}),n.privateKey.rotationPolicy&&f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-500",children:"Rotation:"}),f.jsx("span",{className:"ml-1 text-neutral-700 dark:text-neutral-300",children:n.privateKey.rotationPolicy})]})]})]})}}),n.subject&&Object.keys(n.subject).some(u=>{const h=n.subject[u];return Array.isArray(h)?h.length>0:!!h})){const u=[];n.subject.organizations?.length&&u.push(`O=${n.subject.organizations.join(", ")}`),n.subject.organizationalUnits?.length&&u.push(`OU=${n.subject.organizationalUnits.join(", ")}`),n.subject.countries?.length&&u.push(`C=${n.subject.countries.join(", ")}`),n.subject.localities?.length&&u.push(`L=${n.subject.localities.join(", ")}`),n.subject.provinces?.length&&u.push(`ST=${n.subject.provinces.join(", ")}`),c.push({id:"subject",title:"Subject",data:{type:"custom",render:()=>f.jsx("div",{className:"text-xs text-neutral-700 dark:text-neutral-300 font-mono bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:u.join(", ")})}})}if(n.keystores){const u=[];n.keystores.jks?.create&&u.push("JKS"),n.keystores.pkcs12?.create&&u.push("PKCS#12"),u.length>0&&c.push({id:"keystores",title:"Keystores",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:u.map((h,m)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-green-500/20 text-green-300 border border-green-500/30",children:h},m))})}})}return s?.failedIssuanceAttempts&&s.failedIssuanceAttempts>0&&c.push({id:"failed-issuance",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 text-red-400",children:[f.jsx(ch,{size:14}),f.jsxs("span",{className:"text-sm font-medium",children:["Failed Issuance Attempts: ",s.failedIssuanceAttempts]})]}),s.lastFailureTime&&f.jsxs("div",{className:"text-xs text-neutral-500 mt-1",children:["Last failure: ",Ig(s.lastFailureTime)]})]})}}),{sections:c}}};var Ij={};var Pj;function LZ(){if(Pj)return Ij;Pj=1;var t;return(function(e){(function(n){var s=typeof globalThis=="object"?globalThis:typeof m3=="object"?m3:typeof self=="object"?self:typeof this=="object"?this:u(),r=i(e);typeof s.Reflect<"u"&&(r=i(s.Reflect,r)),n(r,s),typeof s.Reflect>"u"&&(s.Reflect=e);function i(h,m){return function(p,y){Object.defineProperty(h,p,{configurable:!0,writable:!0,value:y}),m&&m(p,y)}}function o(){try{return Function("return this;")()}catch{}}function c(){try{return(0,eval)("(function() { return this; })()")}catch{}}function u(){return o()||c()}})(function(n,s){var r=Object.prototype.hasOwnProperty,i=typeof Symbol=="function",o=i&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",c=i&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",u=typeof Object.create=="function",h={__proto__:[]}instanceof Array,m=!u&&!h,p={create:u?function(){return ln(Object.create(null))}:h?function(){return ln({__proto__:null})}:function(){return ln({})},has:m?function(re,oe){return r.call(re,oe)}:function(re,oe){return oe in re},get:m?function(re,oe){return r.call(re,oe)?re[oe]:void 0}:function(re,oe){return re[oe]}},y=Object.getPrototypeOf(Function),v=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Ge(),x=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:it(),_=typeof WeakMap=="function"?WeakMap:pt(),S=i?Symbol.for("@reflect-metadata:registry"):void 0,k=tt(),C=Mt(k);function N(re,oe,de,Ce){if(A(de)){if(!rt(re))throw new TypeError;if(!Je(oe))throw new TypeError;return K(re,oe)}else{if(!rt(re))throw new TypeError;if(!X(oe))throw new TypeError;if(!X(Ce)&&!A(Ce)&&!Q(Ce))throw new TypeError;return Q(Ce)&&(Ce=void 0),de=Le(de),Z(re,oe,de,Ce)}}n("decorate",N);function R(re,oe){function de(Ce,me){if(!X(Ce))throw new TypeError;if(!A(me)&&!Rt(me))throw new TypeError;$(re,oe,Ce,me)}return de}n("metadata",R);function O(re,oe,de,Ce){if(!X(de))throw new TypeError;return A(Ce)||(Ce=Le(Ce)),$(re,oe,de,Ce)}n("defineMetadata",O);function E(re,oe,de){if(!X(oe))throw new TypeError;return A(de)||(de=Le(de)),W(re,oe,de)}n("hasMetadata",E);function D(re,oe,de){if(!X(oe))throw new TypeError;return A(de)||(de=Le(de)),I(re,oe,de)}n("hasOwnMetadata",D);function B(re,oe,de){if(!X(oe))throw new TypeError;return A(de)||(de=Le(de)),Y(re,oe,de)}n("getMetadata",B);function q(re,oe,de){if(!X(oe))throw new TypeError;return A(de)||(de=Le(de)),J(re,oe,de)}n("getOwnMetadata",q);function P(re,oe){if(!X(re))throw new TypeError;return A(oe)||(oe=Le(oe)),j(re,oe)}n("getMetadataKeys",P);function G(re,oe){if(!X(re))throw new TypeError;return A(oe)||(oe=Le(oe)),M(re,oe)}n("getOwnMetadataKeys",G);function z(re,oe,de){if(!X(oe))throw new TypeError;if(A(de)||(de=Le(de)),!X(oe))throw new TypeError;A(de)||(de=Le(de));var Ce=xe(oe,de,!1);return A(Ce)?!1:Ce.OrdinaryDeleteMetadata(re,oe,de)}n("deleteMetadata",z);function K(re,oe){for(var de=re.length-1;de>=0;--de){var Ce=re[de],me=Ce(oe);if(!A(me)&&!Q(me)){if(!Je(me))throw new TypeError;oe=me}}return oe}function Z(re,oe,de,Ce){for(var me=re.length-1;me>=0;--me){var ze=re[me],lt=ze(oe,de,Ce);if(!A(lt)&&!Q(lt)){if(!X(lt))throw new TypeError;Ce=lt}}return Ce}function W(re,oe,de){var Ce=I(re,oe,de);if(Ce)return!0;var me=We(oe);return Q(me)?!1:W(re,me,de)}function I(re,oe,de){var Ce=xe(oe,de,!1);return A(Ce)?!1:Se(Ce.OrdinaryHasOwnMetadata(re,oe,de))}function Y(re,oe,de){var Ce=I(re,oe,de);if(Ce)return J(re,oe,de);var me=We(oe);if(!Q(me))return Y(re,me,de)}function J(re,oe,de){var Ce=xe(oe,de,!1);if(!A(Ce))return Ce.OrdinaryGetOwnMetadata(re,oe,de)}function $(re,oe,de,Ce){var me=xe(de,Ce,!0);me.OrdinaryDefineOwnMetadata(re,oe,de,Ce)}function j(re,oe){var de=M(re,oe),Ce=We(re);if(Ce===null)return de;var me=j(Ce,oe);if(me.length<=0)return de;if(de.length<=0)return me;for(var ze=new x,lt=[],ct=0,Oe=de;ct<Oe.length;ct++){var Ie=Oe[ct],Ue=ze.has(Ie);Ue||(ze.add(Ie),lt.push(Ie))}for(var He=0,bt=me;He<bt.length;He++){var Ie=bt[He],Ue=ze.has(Ie);Ue||(ze.add(Ie),lt.push(Ie))}return lt}function M(re,oe){var de=xe(re,oe,!1);return de?de.OrdinaryOwnMetadataKeys(re,oe):[]}function F(re){if(re===null)return 1;switch(typeof re){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return re===null?1:6;default:return 6}}function A(re){return re===void 0}function Q(re){return re===null}function se(re){return typeof re=="symbol"}function X(re){return typeof re=="object"?re!==null:typeof re=="function"}function ae(re,oe){switch(F(re)){case 0:return re;case 1:return re;case 2:return re;case 3:return re;case 4:return re;case 5:return re}var de="string",Ce=Zt(re,o);if(Ce!==void 0){var me=Ce.call(re,de);if(X(me))throw new TypeError;return me}return ke(re)}function ke(re,oe){var de,Ce,me;{var ze=re.toString;if(Ye(ze)){var Ce=ze.call(re);if(!X(Ce))return Ce}var de=re.valueOf;if(Ye(de)){var Ce=de.call(re);if(!X(Ce))return Ce}}throw new TypeError}function Se(re){return!!re}function Ve(re){return""+re}function Le(re){var oe=ae(re);return se(oe)?oe:Ve(oe)}function rt(re){return Array.isArray?Array.isArray(re):re instanceof Object?re instanceof Array:Object.prototype.toString.call(re)==="[object Array]"}function Ye(re){return typeof re=="function"}function Je(re){return typeof re=="function"}function Rt(re){switch(F(re)){case 3:return!0;case 4:return!0;default:return!1}}function At(re,oe){return re===oe||re!==re&&oe!==oe}function Zt(re,oe){var de=re[oe];if(de!=null){if(!Ye(de))throw new TypeError;return de}}function on(re){var oe=Zt(re,c);if(!Ye(oe))throw new TypeError;var de=oe.call(re);if(!X(de))throw new TypeError;return de}function qt(re){return re.value}function tn(re){var oe=re.next();return oe.done?!1:oe}function je(re){var oe=re.return;oe&&oe.call(re)}function We(re){var oe=Object.getPrototypeOf(re);if(typeof re!="function"||re===y||oe!==y)return oe;var de=re.prototype,Ce=de&&Object.getPrototypeOf(de);if(Ce==null||Ce===Object.prototype)return oe;var me=Ce.constructor;return typeof me!="function"||me===re?oe:me}function Qe(){var re;!A(S)&&typeof s.Reflect<"u"&&!(S in s.Reflect)&&typeof s.Reflect.defineMetadata=="function"&&(re=fe(s.Reflect));var oe,de,Ce,me=new _,ze={registerProvider:lt,getProvider:Oe,setProvider:Ue};return ze;function lt(He){if(!Object.isExtensible(ze))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case re===He:break;case A(oe):oe=He;break;case oe===He:break;case A(de):de=He;break;case de===He:break;default:Ce===void 0&&(Ce=new x),Ce.add(He);break}}function ct(He,bt){if(!A(oe)){if(oe.isProviderFor(He,bt))return oe;if(!A(de)){if(de.isProviderFor(He,bt))return oe;if(!A(Ce))for(var $t=on(Ce);;){var fn=tn($t);if(!fn)return;var Us=qt(fn);if(Us.isProviderFor(He,bt))return je($t),Us}}}if(!A(re)&&re.isProviderFor(He,bt))return re}function Oe(He,bt){var $t=me.get(He),fn;return A($t)||(fn=$t.get(bt)),A(fn)&&(fn=ct(He,bt),A(fn)||(A($t)&&($t=new v,me.set(He,$t)),$t.set(bt,fn))),fn}function Ie(He){if(A(He))throw new TypeError;return oe===He||de===He||!A(Ce)&&Ce.has(He)}function Ue(He,bt,$t){if(!Ie($t))throw new Error("Metadata provider not registered.");var fn=Oe(He,bt);if(fn!==$t){if(!A(fn))return!1;var Us=me.get(He);A(Us)&&(Us=new v,me.set(He,Us)),Us.set(bt,$t)}return!0}}function tt(){var re;return!A(S)&&X(s.Reflect)&&Object.isExtensible(s.Reflect)&&(re=s.Reflect[S]),A(re)&&(re=Qe()),!A(S)&&X(s.Reflect)&&Object.isExtensible(s.Reflect)&&Object.defineProperty(s.Reflect,S,{enumerable:!1,configurable:!1,writable:!1,value:re}),re}function Mt(re){var oe=new _,de={isProviderFor:function(Ie,Ue){var He=oe.get(Ie);return A(He)?!1:He.has(Ue)},OrdinaryDefineOwnMetadata:lt,OrdinaryHasOwnMetadata:me,OrdinaryGetOwnMetadata:ze,OrdinaryOwnMetadataKeys:ct,OrdinaryDeleteMetadata:Oe};return k.registerProvider(de),de;function Ce(Ie,Ue,He){var bt=oe.get(Ie),$t=!1;if(A(bt)){if(!He)return;bt=new v,oe.set(Ie,bt),$t=!0}var fn=bt.get(Ue);if(A(fn)){if(!He)return;if(fn=new v,bt.set(Ue,fn),!re.setProvider(Ie,Ue,de))throw bt.delete(Ue),$t&&oe.delete(Ie),new Error("Wrong provider for target.")}return fn}function me(Ie,Ue,He){var bt=Ce(Ue,He,!1);return A(bt)?!1:Se(bt.has(Ie))}function ze(Ie,Ue,He){var bt=Ce(Ue,He,!1);if(!A(bt))return bt.get(Ie)}function lt(Ie,Ue,He,bt){var $t=Ce(He,bt,!0);$t.set(Ie,Ue)}function ct(Ie,Ue){var He=[],bt=Ce(Ie,Ue,!1);if(A(bt))return He;for(var $t=bt.keys(),fn=on($t),Us=0;;){var yc=tn(fn);if(!yc)return He.length=Us,He;var Wo=qt(yc);try{He[Us]=Wo}catch(Wb){try{je(fn)}finally{throw Wb}}Us++}}function Oe(Ie,Ue,He){var bt=Ce(Ue,He,!1);if(A(bt)||!bt.delete(Ie))return!1;if(bt.size===0){var $t=oe.get(Ue);A($t)||($t.delete(He),$t.size===0&&oe.delete($t))}return!0}}function fe(re){var oe=re.defineMetadata,de=re.hasOwnMetadata,Ce=re.getOwnMetadata,me=re.getOwnMetadataKeys,ze=re.deleteMetadata,lt=new _,ct={isProviderFor:function(Oe,Ie){var Ue=lt.get(Oe);return!A(Ue)&&Ue.has(Ie)?!0:me(Oe,Ie).length?(A(Ue)&&(Ue=new x,lt.set(Oe,Ue)),Ue.add(Ie),!0):!1},OrdinaryDefineOwnMetadata:oe,OrdinaryHasOwnMetadata:de,OrdinaryGetOwnMetadata:Ce,OrdinaryOwnMetadataKeys:me,OrdinaryDeleteMetadata:ze};return ct}function xe(re,oe,de){var Ce=k.getProvider(re,oe);if(!A(Ce))return Ce;if(de){if(k.setProvider(re,oe,C))return C;throw new Error("Illegal state.")}}function Ge(){var re={},oe=[],de=(function(){function ct(Oe,Ie,Ue){this._index=0,this._keys=Oe,this._values=Ie,this._selector=Ue}return ct.prototype["@@iterator"]=function(){return this},ct.prototype[c]=function(){return this},ct.prototype.next=function(){var Oe=this._index;if(Oe>=0&&Oe<this._keys.length){var Ie=this._selector(this._keys[Oe],this._values[Oe]);return Oe+1>=this._keys.length?(this._index=-1,this._keys=oe,this._values=oe):this._index++,{value:Ie,done:!1}}return{value:void 0,done:!0}},ct.prototype.throw=function(Oe){throw this._index>=0&&(this._index=-1,this._keys=oe,this._values=oe),Oe},ct.prototype.return=function(Oe){return this._index>=0&&(this._index=-1,this._keys=oe,this._values=oe),{value:Oe,done:!0}},ct})(),Ce=(function(){function ct(){this._keys=[],this._values=[],this._cacheKey=re,this._cacheIndex=-2}return Object.defineProperty(ct.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),ct.prototype.has=function(Oe){return this._find(Oe,!1)>=0},ct.prototype.get=function(Oe){var Ie=this._find(Oe,!1);return Ie>=0?this._values[Ie]:void 0},ct.prototype.set=function(Oe,Ie){var Ue=this._find(Oe,!0);return this._values[Ue]=Ie,this},ct.prototype.delete=function(Oe){var Ie=this._find(Oe,!1);if(Ie>=0){for(var Ue=this._keys.length,He=Ie+1;He<Ue;He++)this._keys[He-1]=this._keys[He],this._values[He-1]=this._values[He];return this._keys.length--,this._values.length--,At(Oe,this._cacheKey)&&(this._cacheKey=re,this._cacheIndex=-2),!0}return!1},ct.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=re,this._cacheIndex=-2},ct.prototype.keys=function(){return new de(this._keys,this._values,me)},ct.prototype.values=function(){return new de(this._keys,this._values,ze)},ct.prototype.entries=function(){return new de(this._keys,this._values,lt)},ct.prototype["@@iterator"]=function(){return this.entries()},ct.prototype[c]=function(){return this.entries()},ct.prototype._find=function(Oe,Ie){if(!At(this._cacheKey,Oe)){this._cacheIndex=-1;for(var Ue=0;Ue<this._keys.length;Ue++)if(At(this._keys[Ue],Oe)){this._cacheIndex=Ue;break}}return this._cacheIndex<0&&Ie&&(this._cacheIndex=this._keys.length,this._keys.push(Oe),this._values.push(void 0)),this._cacheIndex},ct})();return Ce;function me(ct,Oe){return ct}function ze(ct,Oe){return Oe}function lt(ct,Oe){return[ct,Oe]}}function it(){var re=(function(){function oe(){this._map=new v}return Object.defineProperty(oe.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),oe.prototype.has=function(de){return this._map.has(de)},oe.prototype.add=function(de){return this._map.set(de,de),this},oe.prototype.delete=function(de){return this._map.delete(de)},oe.prototype.clear=function(){this._map.clear()},oe.prototype.keys=function(){return this._map.keys()},oe.prototype.values=function(){return this._map.keys()},oe.prototype.entries=function(){return this._map.entries()},oe.prototype["@@iterator"]=function(){return this.keys()},oe.prototype[c]=function(){return this.keys()},oe})();return re}function pt(){var re=16,oe=p.create(),de=Ce();return(function(){function Oe(){this._key=Ce()}return Oe.prototype.has=function(Ie){var Ue=me(Ie,!1);return Ue!==void 0?p.has(Ue,this._key):!1},Oe.prototype.get=function(Ie){var Ue=me(Ie,!1);return Ue!==void 0?p.get(Ue,this._key):void 0},Oe.prototype.set=function(Ie,Ue){var He=me(Ie,!0);return He[this._key]=Ue,this},Oe.prototype.delete=function(Ie){var Ue=me(Ie,!1);return Ue!==void 0?delete Ue[this._key]:!1},Oe.prototype.clear=function(){this._key=Ce()},Oe})();function Ce(){var Oe;do Oe="@@WeakMap@@"+ct();while(p.has(oe,Oe));return oe[Oe]=!0,Oe}function me(Oe,Ie){if(!r.call(Oe,de)){if(!Ie)return;Object.defineProperty(Oe,de,{value:p.create()})}return Oe[de]}function ze(Oe,Ie){for(var Ue=0;Ue<Ie;++Ue)Oe[Ue]=Math.random()*255|0;return Oe}function lt(Oe){if(typeof Uint8Array=="function"){var Ie=new Uint8Array(Oe);return typeof crypto<"u"?crypto.getRandomValues(Ie):typeof msCrypto<"u"?msCrypto.getRandomValues(Ie):ze(Ie,Oe),Ie}return ze(new Array(Oe),Oe)}function ct(){var Oe=lt(re);Oe[6]=Oe[6]&79|64,Oe[8]=Oe[8]&191|128;for(var Ie="",Ue=0;Ue<re;++Ue){var He=Oe[Ue];(Ue===4||Ue===6||Ue===8)&&(Ie+="-"),He<16&&(Ie+="0"),Ie+=He.toString(16).toLowerCase()}return Ie}}function ln(re){return re.__=void 0,delete re.__,re}})})(t||(t={})),Ij}LZ();const IZ="[object ArrayBuffer]";class Me{static isArrayBuffer(e){return Object.prototype.toString.call(e)===IZ}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:e.byteLength===e.buffer.byteLength||e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,n){if(e.constructor===n)return e;if(this.isArrayBuffer(e))return new n(e);if(this.isArrayBufferView(e))return new n(e.buffer,e.byteOffset,e.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,n){const s=Me.toUint8Array(e),r=Me.toUint8Array(n);if(s.length!==r.byteLength)return!1;for(let i=0;i<s.length;i++)if(s[i]!==r[i])return!1;return!0}static concat(...e){let n;Array.isArray(e[0])&&!(e[1]instanceof Function)||Array.isArray(e[0])&&e[1]instanceof Function?n=e[0]:e[e.length-1]instanceof Function?n=e.slice(0,e.length-1):n=e;let s=0;for(const o of n)s+=o.byteLength;const r=new Uint8Array(s);let i=0;for(const o of n){const c=this.toUint8Array(o);r.set(c,i),i+=c.length}return e[e.length-1]instanceof Function?this.toView(r,e[e.length-1]):r.buffer}}const Ax="string",PZ=/^[0-9a-f\s]+$/i,$Z=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,zZ=/^[a-zA-Z0-9-_]+$/;class $j{static fromString(e){const n=unescape(encodeURIComponent(e)),s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s.buffer}static toString(e){const n=Me.toUint8Array(e);let s="";for(let i=0;i<n.length;i++)s+=String.fromCharCode(n[i]);return decodeURIComponent(escape(s))}}class Ci{static toString(e,n=!1){const s=Me.toArrayBuffer(e),r=new DataView(s);let i="";for(let o=0;o<s.byteLength;o+=2){const c=r.getUint16(o,n);i+=String.fromCharCode(c)}return i}static fromString(e,n=!1){const s=new ArrayBuffer(e.length*2),r=new DataView(s);for(let i=0;i<e.length;i++)r.setUint16(i*2,e.charCodeAt(i),n);return s}}class Ze{static isHex(e){return typeof e===Ax&&PZ.test(e)}static isBase64(e){return typeof e===Ax&&$Z.test(e)}static isBase64Url(e){return typeof e===Ax&&zZ.test(e)}static ToString(e,n="utf8"){const s=Me.toUint8Array(e);switch(n.toLowerCase()){case"utf8":return this.ToUtf8String(s);case"binary":return this.ToBinary(s);case"hex":return this.ToHex(s);case"base64":return this.ToBase64(s);case"base64url":return this.ToBase64Url(s);case"utf16le":return Ci.toString(s,!0);case"utf16":case"utf16be":return Ci.toString(s);default:throw new Error(`Unknown type of encoding '${n}'`)}}static FromString(e,n="utf8"){if(!e)return new ArrayBuffer(0);switch(n.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return Ci.fromString(e,!0);case"utf16":case"utf16be":return Ci.fromString(e);default:throw new Error(`Unknown type of encoding '${n}'`)}}static ToBase64(e){const n=Me.toUint8Array(e);if(typeof btoa<"u"){const s=this.ToString(n,"binary");return btoa(s)}else return Buffer.from(n).toString("base64")}static FromBase64(e){const n=this.formatString(e);if(!n)return new ArrayBuffer(0);if(!Ze.isBase64(n))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return typeof atob<"u"?this.FromBinary(atob(n)):new Uint8Array(Buffer.from(n,"base64")).buffer}static FromBase64Url(e){const n=this.formatString(e);if(!n)return new ArrayBuffer(0);if(!Ze.isBase64Url(n))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(n.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,n=Ze.DEFAULT_UTF8_ENCODING){switch(n){case"ascii":return this.FromBinary(e);case"utf8":return $j.fromString(e);case"utf16":case"utf16be":return Ci.fromString(e);case"utf16le":case"usc2":return Ci.fromString(e,!0);default:throw new Error(`Unknown type of encoding '${n}'`)}}static ToUtf8String(e,n=Ze.DEFAULT_UTF8_ENCODING){switch(n){case"ascii":return this.ToBinary(e);case"utf8":return $j.toString(e);case"utf16":case"utf16be":return Ci.toString(e);case"utf16le":case"usc2":return Ci.toString(e,!0);default:throw new Error(`Unknown type of encoding '${n}'`)}}static FromBinary(e){const n=e.length,s=new Uint8Array(n);for(let r=0;r<n;r++)s[r]=e.charCodeAt(r);return s.buffer}static ToBinary(e){const n=Me.toUint8Array(e);let s="";for(let r=0;r<n.length;r++)s+=String.fromCharCode(n[r]);return s}static ToHex(e){const n=Me.toUint8Array(e);let s="";const r=n.length;for(let i=0;i<r;i++){const o=n[i];o<16&&(s+="0"),s+=o.toString(16)}return s}static FromHex(e){let n=this.formatString(e);if(!n)return new ArrayBuffer(0);if(!Ze.isHex(n))throw new TypeError("Argument 'hexString' is not HEX encoded");n.length%2&&(n=`0${n}`);const s=new Uint8Array(n.length/2);for(let r=0;r<n.length;r=r+2){const i=n.slice(r,r+2);s[r/2]=parseInt(i,16)}return s.buffer}static ToUtf16String(e,n=!1){return Ci.toString(e,n)}static FromUtf16String(e,n=!1){return Ci.fromString(e,n)}static Base64Padding(e){const n=4-e.length%4;if(n<4)for(let s=0;s<n;s++)e+="=";return e}static formatString(e){return e?.replace(/[\n\r\t ]/g,"")||""}}Ze.DEFAULT_UTF8_ENCODING="utf8";function UZ(...t){const e=t.map(r=>r.byteLength).reduce((r,i)=>r+i),n=new Uint8Array(e);let s=0;return t.map(r=>new Uint8Array(r)).forEach(r=>{for(const i of r)n[s++]=i}),n.buffer}function AD(t,e){if(!(t&&e)||t.byteLength!==e.byteLength)return!1;const n=new Uint8Array(t),s=new Uint8Array(e);for(let r=0;r<t.byteLength;r++)if(n[r]!==s[r])return!1;return!0}function Uu(t,e){let n=0;if(t.length===1)return t[0];for(let s=t.length-1;s>=0;s--)n+=t[t.length-1-s]*Math.pow(2,e*s);return n}function Fl(t,e,n=-1){const s=n;let r=t,i=0,o=Math.pow(2,e);for(let c=1;c<8;c++){if(t<o){let u;if(s<0)u=new ArrayBuffer(c),i=c;else{if(s<c)return new ArrayBuffer(0);u=new ArrayBuffer(s),i=s}const h=new Uint8Array(u);for(let m=c-1;m>=0;m--){const p=Math.pow(2,m*e);h[i-m-1]=Math.floor(r/p),r-=h[i-m-1]*p}return u}o*=Math.pow(2,e)}return new ArrayBuffer(0)}function nS(...t){let e=0,n=0;for(const i of t)e+=i.length;const s=new ArrayBuffer(e),r=new Uint8Array(s);for(const i of t)r.set(i,n),n+=i.length;return r}function jD(){const t=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const c=t[0]===255&&t[1]&128,u=t[0]===0&&(t[1]&128)===0;(c||u)&&this.warnings.push("Needlessly long format")}const e=new ArrayBuffer(this.valueHex.byteLength),n=new Uint8Array(e);for(let c=0;c<this.valueHex.byteLength;c++)n[c]=0;n[0]=t[0]&128;const s=Uu(n,8),r=new ArrayBuffer(this.valueHex.byteLength),i=new Uint8Array(r);for(let c=0;c<this.valueHex.byteLength;c++)i[c]=t[c];return i[0]&=127,Uu(i,8)-s}function HZ(t){const e=t<0?t*-1:t;let n=128;for(let s=1;s<8;s++){if(e<=n){if(t<0){const o=n-e,c=Fl(o,8,s),u=new Uint8Array(c);return u[0]|=128,c}let r=Fl(e,8,s),i=new Uint8Array(r);if(i[0]&128){const o=r.slice(0),c=new Uint8Array(o);r=new ArrayBuffer(r.byteLength+1),i=new Uint8Array(r);for(let u=0;u<o.byteLength;u++)i[u+1]=c[u];i[0]=0}return r}n*=Math.pow(2,8)}return new ArrayBuffer(0)}function FZ(t,e){if(t.byteLength!==e.byteLength)return!1;const n=new Uint8Array(t),s=new Uint8Array(e);for(let r=0;r<n.length;r++)if(n[r]!==s[r])return!1;return!0}function xr(t,e){const n=t.toString(10);if(e<n.length)return"";const s=e-n.length,r=new Array(s);for(let o=0;o<s;o++)r[o]="0";return r.join("").concat(n)}function ly(){if(typeof BigInt>"u")throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function yC(t){let e=0,n=0;for(let r=0;r<t.length;r++){const i=t[r];e+=i.byteLength}const s=new Uint8Array(e);for(let r=0;r<t.length;r++){const i=t[r];s.set(new Uint8Array(i),n),n+=i.byteLength}return s.buffer}function Da(t,e,n,s){return e instanceof Uint8Array?e.byteLength?n<0?(t.error="Wrong parameter: inputOffset less than zero",!1):s<0?(t.error="Wrong parameter: inputLength less than zero",!1):e.byteLength-n-s<0?(t.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):!0:(t.error="Wrong parameter: inputBuffer has zero length",!1):(t.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class kv{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return yC(this.items)}}const Td=[new Uint8Array([1])],zj="0123456789",jx="name",Uj="valueHexView",VZ="isHexOnly",qZ="idBlock",KZ="tagClass",WZ="tagNumber",GZ="isConstructed",YZ="fromBER",ZZ="toBER",XZ="local",Qs="",qi=new ArrayBuffer(0),Cv=new Uint8Array(0),cp="EndOfContent",TD="OCTET STRING",RD="BIT STRING";function Ki(t){var e;return e=class extends t{get valueHex(){return this.valueHexView.slice().buffer}set valueHex(s){this.valueHexView=new Uint8Array(s)}constructor(...s){var r;super(...s);const i=s[0]||{};this.isHexOnly=(r=i.isHexOnly)!==null&&r!==void 0?r:!1,this.valueHexView=i.valueHex?Me.toUint8Array(i.valueHex):Cv}fromBER(s,r,i){const o=s instanceof ArrayBuffer?new Uint8Array(s):s;if(!Da(this,o,r,i))return-1;const c=r+i;return this.valueHexView=o.subarray(r,c),this.valueHexView.length?(this.blockLength=i,c):(this.warnings.push("Zero buffer length"),r)}toBER(s=!1){return this.isHexOnly?s?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",qi)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:Ze.ToHex(this.valueHexView)}}},e.NAME="hexBlock",e}class uc{static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}constructor({blockLength:e=0,error:n=Qs,warnings:s=[],valueBeforeDecode:r=Cv}={}){this.blockLength=e,this.error=n,this.warnings=s,this.valueBeforeDecodeView=Me.toUint8Array(r)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:Ze.ToHex(this.valueBeforeDecodeView)}}}uc.NAME="baseBlock";class Ps extends uc{fromBER(e,n,s){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,n){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}Ps.NAME="valueBlock";class OD extends Ki(uc){constructor({idBlock:e={}}={}){var n,s,r,i;super(),e?(this.isHexOnly=(n=e.isHexOnly)!==null&&n!==void 0?n:!1,this.valueHexView=e.valueHex?Me.toUint8Array(e.valueHex):Cv,this.tagClass=(s=e.tagClass)!==null&&s!==void 0?s:-1,this.tagNumber=(r=e.tagNumber)!==null&&r!==void 0?r:-1,this.isConstructed=(i=e.isConstructed)!==null&&i!==void 0?i:!1):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let n=0;switch(this.tagClass){case 1:n|=0;break;case 2:n|=64;break;case 3:n|=128;break;case 4:n|=192;break;default:return this.error="Unknown tag class",qi}if(this.isConstructed&&(n|=32),this.tagNumber<31&&!this.isHexOnly){const r=new Uint8Array(1);if(!e){let i=this.tagNumber;i&=31,n|=i,r[0]=n}return r.buffer}if(!this.isHexOnly){const r=Fl(this.tagNumber,7),i=new Uint8Array(r),o=r.byteLength,c=new Uint8Array(o+1);if(c[0]=n|31,!e){for(let u=0;u<o-1;u++)c[u+1]=i[u]|128;c[o]=i[o-1]}return c.buffer}const s=new Uint8Array(this.valueHexView.byteLength+1);if(s[0]=n|31,!e){const r=this.valueHexView;for(let i=0;i<r.length-1;i++)s[i+1]=r[i]|128;s[this.valueHexView.byteLength]=r[r.length-1]}return s.buffer}fromBER(e,n,s){const r=Me.toUint8Array(e);if(!Da(this,r,n,s))return-1;const i=r.subarray(n,n+s);if(i.length===0)return this.error="Zero buffer length",-1;switch(i[0]&192){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(i[0]&32)===32,this.isHexOnly=!1;const c=i[0]&31;if(c!==31)this.tagNumber=c,this.blockLength=1;else{let u=1,h=this.valueHexView=new Uint8Array(255),m=255;for(;i[u]&128;){if(h[u-1]=i[u]&127,u++,u>=i.length)return this.error="End of input reached before message was fully decoded",-1;if(u===m){m+=255;const y=new Uint8Array(m);for(let v=0;v<h.length;v++)y[v]=h[v];h=this.valueHexView=new Uint8Array(m)}}this.blockLength=u+1,h[u-1]=i[u]&127;const p=new Uint8Array(u);for(let y=0;y<u;y++)p[y]=h[y];h=this.valueHexView=new Uint8Array(u),h.set(p),this.blockLength<=9?this.tagNumber=Uu(h,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(this.tagClass===1&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return n+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}OD.NAME="identificationBlock";class MD extends uc{constructor({lenBlock:e={}}={}){var n,s,r;super(),this.isIndefiniteForm=(n=e.isIndefiniteForm)!==null&&n!==void 0?n:!1,this.longFormUsed=(s=e.longFormUsed)!==null&&s!==void 0?s:!1,this.length=(r=e.length)!==null&&r!==void 0?r:0}fromBER(e,n,s){const r=Me.toUint8Array(e);if(!Da(this,r,n,s))return-1;const i=r.subarray(n,n+s);if(i.length===0)return this.error="Zero buffer length",-1;if(i[0]===255)return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=i[0]===128,this.isIndefiniteForm)return this.blockLength=1,n+this.blockLength;if(this.longFormUsed=!!(i[0]&128),this.longFormUsed===!1)return this.length=i[0],this.blockLength=1,n+this.blockLength;const o=i[0]&127;if(o>8)return this.error="Too big integer",-1;if(o+1>i.length)return this.error="End of input reached before message was fully decoded",-1;const c=n+1,u=r.subarray(c,c+o);return u[o-1]===0&&this.warnings.push("Needlessly long encoded length"),this.length=Uu(u,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=o+1,n+this.blockLength}toBER(e=!1){let n,s;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return n=new ArrayBuffer(1),e===!1&&(s=new Uint8Array(n),s[0]=128),n;if(this.longFormUsed){const r=Fl(this.length,8);if(r.byteLength>127)return this.error="Too big length",qi;if(n=new ArrayBuffer(r.byteLength+1),e)return n;const i=new Uint8Array(r);s=new Uint8Array(n),s[0]=r.byteLength|128;for(let o=0;o<r.byteLength;o++)s[o+1]=i[o];return n}return n=new ArrayBuffer(1),e===!1&&(s=new Uint8Array(n),s[0]=this.length),n}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}MD.NAME="lengthBlock";const Fe={};class gs extends uc{constructor({name:e=Qs,optional:n=!1,primitiveSchema:s,...r}={},i){super(r),this.name=e,this.optional=n,s&&(this.primitiveSchema=s),this.idBlock=new OD(r),this.lenBlock=new MD(r),this.valueBlock=i?new i(r):new Ps(r)}fromBER(e,n,s){const r=this.valueBlock.fromBER(e,n,this.lenBlock.isIndefiniteForm?s:this.lenBlock.length);return r===-1?(this.error=this.valueBlock.error,r):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}toBER(e,n){const s=n||new kv;n||DD(this);const r=this.idBlock.toBER(e);if(s.write(r),this.lenBlock.isIndefiniteForm)s.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,s),s.write(new ArrayBuffer(2));else{const i=this.valueBlock.toBER(e);this.lenBlock.length=i.byteLength;const o=this.lenBlock.toBER(e);s.write(o),s.write(i)}return n?qi:s.final()}toJSON(){const e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return e==="ascii"?this.onAsciiEncoding():Ze.ToHex(this.toBER())}onAsciiEncoding(){const e=this.constructor.NAME,n=Ze.ToHex(this.valueBlock.valueBeforeDecodeView);return`${e} : ${n}`}isEqual(e){if(this===e)return!0;if(!(e instanceof this.constructor))return!1;const n=this.toBER(),s=e.toBER();return FZ(n,s)}}gs.NAME="BaseBlock";function DD(t){var e;if(t instanceof Fe.Constructed)for(const n of t.valueBlock.value)DD(n)&&(t.lenBlock.isIndefiniteForm=!0);return!!(!((e=t.lenBlock)===null||e===void 0)&&e.isIndefiniteForm)}class vC extends gs{getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}constructor({value:e=Qs,...n}={},s){super(n,s),e&&this.fromString(e)}fromBER(e,n,s){const r=this.valueBlock.fromBER(e,n,this.lenBlock.isIndefiniteForm?s:this.lenBlock.length);return r===-1?(this.error=this.valueBlock.error,r):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}vC.NAME="BaseStringBlock";class BD extends Ki(Ps){constructor({isHexOnly:e=!0,...n}={}){super(n),this.isHexOnly=e}}BD.NAME="PrimitiveValueBlock";var LD;class Lp extends gs{constructor(e={}){super(e,BD),this.idBlock.isConstructed=!1}}LD=Lp;Fe.Primitive=LD;Lp.NAME="PRIMITIVE";function JZ(t,e){if(t instanceof e)return t;const n=new e;return n.idBlock=t.idBlock,n.lenBlock=t.lenBlock,n.warnings=t.warnings,n.valueBeforeDecodeView=t.valueBeforeDecodeView,n}function fh(t,e=0,n=t.length){const s=e;let r=new gs({},Ps);const i=new uc;if(!Da(i,t,e,n))return r.error=i.error,{offset:-1,result:r};if(!t.subarray(e,e+n).length)return r.error="Zero buffer length",{offset:-1,result:r};let c=r.idBlock.fromBER(t,e,n);if(r.idBlock.warnings.length&&r.warnings.concat(r.idBlock.warnings),c===-1)return r.error=r.idBlock.error,{offset:-1,result:r};if(e=c,n-=r.idBlock.blockLength,c=r.lenBlock.fromBER(t,e,n),r.lenBlock.warnings.length&&r.warnings.concat(r.lenBlock.warnings),c===-1)return r.error=r.lenBlock.error,{offset:-1,result:r};if(e=c,n-=r.lenBlock.blockLength,!r.idBlock.isConstructed&&r.lenBlock.isIndefiniteForm)return r.error="Indefinite length form used for primitive encoding form",{offset:-1,result:r};let u=gs;switch(r.idBlock.tagClass){case 1:if(r.idBlock.tagNumber>=37&&r.idBlock.isHexOnly===!1)return r.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:r};switch(r.idBlock.tagNumber){case 0:if(r.idBlock.isConstructed&&r.lenBlock.length>0)return r.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:r};u=Fe.EndOfContent;break;case 1:u=Fe.Boolean;break;case 2:u=Fe.Integer;break;case 3:u=Fe.BitString;break;case 4:u=Fe.OctetString;break;case 5:u=Fe.Null;break;case 6:u=Fe.ObjectIdentifier;break;case 10:u=Fe.Enumerated;break;case 12:u=Fe.Utf8String;break;case 13:u=Fe.RelativeObjectIdentifier;break;case 14:u=Fe.TIME;break;case 15:return r.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:r};case 16:u=Fe.Sequence;break;case 17:u=Fe.Set;break;case 18:u=Fe.NumericString;break;case 19:u=Fe.PrintableString;break;case 20:u=Fe.TeletexString;break;case 21:u=Fe.VideotexString;break;case 22:u=Fe.IA5String;break;case 23:u=Fe.UTCTime;break;case 24:u=Fe.GeneralizedTime;break;case 25:u=Fe.GraphicString;break;case 26:u=Fe.VisibleString;break;case 27:u=Fe.GeneralString;break;case 28:u=Fe.UniversalString;break;case 29:u=Fe.CharacterString;break;case 30:u=Fe.BmpString;break;case 31:u=Fe.DATE;break;case 32:u=Fe.TimeOfDay;break;case 33:u=Fe.DateTime;break;case 34:u=Fe.Duration;break;default:{const h=r.idBlock.isConstructed?new Fe.Constructed:new Fe.Primitive;h.idBlock=r.idBlock,h.lenBlock=r.lenBlock,h.warnings=r.warnings,r=h}}break;default:u=r.idBlock.isConstructed?Fe.Constructed:Fe.Primitive}return r=JZ(r,u),c=r.fromBER(t,e,r.lenBlock.isIndefiniteForm?n:r.lenBlock.length),r.valueBeforeDecodeView=t.subarray(s,s+r.blockLength),{offset:c,result:r}}function Du(t){if(!t.byteLength){const e=new gs({},Ps);return e.error="Input buffer has zero length",{offset:-1,result:e}}return fh(Me.toUint8Array(t).slice(),0,t.byteLength)}function QZ(t,e){return t?1:e}class Mo extends Ps{constructor({value:e=[],isIndefiniteForm:n=!1,...s}={}){super(s),this.value=e,this.isIndefiniteForm=n}fromBER(e,n,s){const r=Me.toUint8Array(e);if(!Da(this,r,n,s))return-1;if(this.valueBeforeDecodeView=r.subarray(n,n+s),this.valueBeforeDecodeView.length===0)return this.warnings.push("Zero buffer length"),n;let i=n;for(;QZ(this.isIndefiniteForm,s)>0;){const o=fh(r,i,s);if(o.offset===-1)return this.error=o.result.error,this.warnings.concat(o.result.warnings),-1;if(i=o.offset,this.blockLength+=o.result.blockLength,s-=o.result.blockLength,this.value.push(o.result),this.isIndefiniteForm&&o.result.constructor.NAME===cp)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===cp?this.value.pop():this.warnings.push("No EndOfContent block encoded")),i}toBER(e,n){const s=n||new kv;for(let r=0;r<this.value.length;r++)this.value[r].toBER(e,s);return n?qi:s.final()}toJSON(){const e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const n of this.value)e.value.push(n.toJSON());return e}}Mo.NAME="ConstructedValueBlock";var ID;class Bs extends gs{constructor(e={}){super(e,Mo),this.idBlock.isConstructed=!0}fromBER(e,n,s){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const r=this.valueBlock.fromBER(e,n,this.lenBlock.isIndefiniteForm?s:this.lenBlock.length);return r===-1?(this.error=this.valueBlock.error,r):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}onAsciiEncoding(){const e=[];for(const s of this.valueBlock.value)e.push(s.toString("ascii").split(`
`).map(r=>`  ${r}`).join(`
`));const n=this.idBlock.tagClass===3?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${n} :
${e.join(`
`)}`:`${n} :`}}ID=Bs;Fe.Constructed=ID;Bs.NAME="CONSTRUCTED";class PD extends Ps{fromBER(e,n,s){return n}toBER(e){return qi}}PD.override="EndOfContentValueBlock";var $D;class bC extends gs{constructor(e={}){super(e,PD),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}$D=bC;Fe.EndOfContent=$D;bC.NAME=cp;var zD;class Vl extends gs{constructor(e={}){super(e,Ps),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,n,s){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=s,n+s>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):n+s}toBER(e,n){const s=new ArrayBuffer(2);if(!e){const r=new Uint8Array(s);r[0]=5,r[1]=0}return n&&n.write(s),s}onAsciiEncoding(){return`${this.constructor.NAME}`}}zD=Vl;Fe.Null=zD;Vl.NAME="NULL";class UD extends Ki(Ps){get value(){for(const e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}constructor({value:e,...n}={}){super(n),n.valueHex?this.valueHexView=Me.toUint8Array(n.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}fromBER(e,n,s){const r=Me.toUint8Array(e);return Da(this,r,n,s)?(this.valueHexView=r.subarray(n,n+s),s>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,jD.call(this),this.blockLength=s,n+s):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}UD.NAME="BooleanValueBlock";var HD;let Nv=class extends gs{getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}constructor(e={}){super(e,UD),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}};HD=Nv;Fe.Boolean=HD;Nv.NAME="BOOLEAN";class FD extends Ki(Mo){constructor({isConstructed:e=!1,...n}={}){super(n),this.isConstructed=e}fromBER(e,n,s){let r=0;if(this.isConstructed){if(this.isHexOnly=!1,r=Mo.prototype.fromBER.call(this,e,n,s),r===-1)return r;for(let i=0;i<this.value.length;i++){const o=this.value[i].constructor.NAME;if(o===cp){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(o!==TD)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,r=super.fromBER(e,n,s),this.blockLength=s;return r}toBER(e,n){return this.isConstructed?Mo.prototype.toBER.call(this,e,n):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}FD.NAME="OctetStringValueBlock";var _C;let Dl=class extends gs{constructor({idBlock:e={},lenBlock:n={},...s}={}){var r,i;(r=s.isConstructed)!==null&&r!==void 0||(s.isConstructed=!!(!((i=s.value)===null||i===void 0)&&i.length)),super({idBlock:{isConstructed:s.isConstructed,...e},lenBlock:{...n,isIndefiniteForm:!!s.isIndefiniteForm},...s},FD),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,n,s){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,s===0)return this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),n;if(!this.valueBlock.isConstructed){const i=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(n,n+s);try{if(i.byteLength){const o=fh(i,0,i.byteLength);o.offset!==-1&&o.offset===s&&(this.valueBlock.value=[o.result])}}catch{}}return super.fromBER(e,n,s)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return Bs.prototype.onAsciiEncoding.call(this);const e=this.constructor.NAME,n=Ze.ToHex(this.valueBlock.valueHexView);return`${e} : ${n}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const e=[];for(const n of this.valueBlock.value)n instanceof _C&&e.push(n.valueBlock.valueHexView);return Me.concat(e)}};_C=Dl;Fe.OctetString=_C;Dl.NAME=TD;class VD extends Ki(Mo){constructor({unusedBits:e=0,isConstructed:n=!1,...s}={}){super(s),this.unusedBits=e,this.isConstructed=n,this.blockLength=this.valueHexView.byteLength}fromBER(e,n,s){if(!s)return n;let r=-1;if(this.isConstructed){if(r=Mo.prototype.fromBER.call(this,e,n,s),r===-1)return r;for(const c of this.value){const u=c.constructor.NAME;if(u===cp){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(u!==RD)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const h=c.valueBlock;if(this.unusedBits>0&&h.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=h.unusedBits}return r}const i=Me.toUint8Array(e);if(!Da(this,i,n,s))return-1;const o=i.subarray(n,n+s);if(this.unusedBits=o[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const c=o.subarray(1);try{if(c.byteLength){const u=fh(c,0,c.byteLength);u.offset!==-1&&u.offset===s-1&&(this.value=[u.result])}}catch{}}return this.valueHexView=o.subarray(1),this.blockLength=o.length,n+s}toBER(e,n){if(this.isConstructed)return Mo.prototype.toBER.call(this,e,n);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength){const r=new Uint8Array(1);return r[0]=0,r.buffer}const s=new Uint8Array(this.valueHexView.length+1);return s[0]=this.unusedBits,s.set(this.valueHexView,1),s.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}VD.NAME="BitStringValueBlock";var qD;let Bl=class extends gs{constructor({idBlock:e={},lenBlock:n={},...s}={}){var r,i;(r=s.isConstructed)!==null&&r!==void 0||(s.isConstructed=!!(!((i=s.value)===null||i===void 0)&&i.length)),super({idBlock:{isConstructed:s.isConstructed,...e},lenBlock:{...n,isIndefiniteForm:!!s.isIndefiniteForm},...s},VD),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,n,s){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,n,s)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return Bs.prototype.onAsciiEncoding.call(this);{const e=[],n=this.valueBlock.valueHexView;for(const o of n)e.push(o.toString(2).padStart(8,"0"));const s=e.join(""),r=this.constructor.NAME,i=s.substring(0,s.length-this.valueBlock.unusedBits);return`${r} : ${i}`}}};qD=Bl;Fe.BitString=qD;Bl.NAME=RD;var KD;function eX(t,e){const n=new Uint8Array([0]),s=new Uint8Array(t),r=new Uint8Array(e);let i=s.slice(0);const o=i.length-1,c=r.slice(0),u=c.length-1;let h=0;const m=u<o?o:u;let p=0;for(let y=m;y>=0;y--,p++)!0===p<c.length?h=i[o-p]+c[u-p]+n[0]:h=i[o-p]+n[0],n[0]=h/10,!0===p>=i.length?i=nS(new Uint8Array([h%10]),i):i[o-p]=h%10;return n[0]>0&&(i=nS(n,i)),i}function Hj(t){if(t>=Td.length)for(let e=Td.length;e<=t;e++){const n=new Uint8Array([0]);let s=Td[e-1].slice(0);for(let r=s.length-1;r>=0;r--){const i=new Uint8Array([(s[r]<<1)+n[0]]);n[0]=i[0]/10,s[r]=i[0]%10}n[0]>0&&(s=nS(n,s)),Td.push(s)}return Td[t]}function tX(t,e){let n=0;const s=new Uint8Array(t),r=new Uint8Array(e),i=s.slice(0),o=i.length-1,c=r.slice(0),u=c.length-1;let h,m=0;for(let p=u;p>=0;p--,m++)h=i[o-m]-c[u-m]-n,!0===h<0?(n=1,i[o-m]=h+10):(n=0,i[o-m]=h);if(n>0)for(let p=o-u+1;p>=0;p--,m++)if(h=i[o-m]-n,h<0)n=1,i[o-m]=h+10;else{n=0,i[o-m]=h;break}return i.slice()}class xC extends Ki(Ps){setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=jD.call(this)))}constructor({value:e,...n}={}){super(n),this._valueDec=0,n.valueHex&&this.setValueHex(),e!==void 0&&(this.valueDec=e)}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(HZ(e))}get valueDec(){return this._valueDec}fromDER(e,n,s,r=0){const i=this.fromBER(e,n,s);if(i===-1)return i;const o=this.valueHexView;return o[0]===0&&(o[1]&128)!==0?this.valueHexView=o.subarray(1):r!==0&&o.length<r&&(r-o.length>1&&(r=o.length+1),this.valueHexView=o.subarray(r-o.length)),i}toDER(e=!1){const n=this.valueHexView;switch(!0){case(n[0]&128)!==0:{const s=new Uint8Array(this.valueHexView.length+1);s[0]=0,s.set(n,1),this.valueHexView=s}break;case(n[0]===0&&(n[1]&128)===0):this.valueHexView=this.valueHexView.subarray(1);break}return this.toBER(e)}fromBER(e,n,s){const r=super.fromBER(e,n,s);return r===-1||this.setValueHex(),r}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const e=this.valueHexView.length*8-1;let n=new Uint8Array(this.valueHexView.length*8/3),s=0,r;const i=this.valueHexView;let o="",c=!1;for(let u=i.byteLength-1;u>=0;u--){r=i[u];for(let h=0;h<8;h++)(r&1)===1&&(s===e?(n=tX(Hj(s),n),o="-"):n=eX(n,Hj(s))),s++,r>>=1}for(let u=0;u<n.length;u++)n[u]&&(c=!0),c&&(o+=zj.charAt(n[u]));return c===!1&&(o+=zj.charAt(0)),o}}KD=xC;xC.NAME="IntegerValueBlock";Object.defineProperty(KD.prototype,"valueHex",{set:function(t){this.valueHexView=new Uint8Array(t),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});var Lf;class ph extends gs{constructor(e={}){super(e,xC),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return ly(),BigInt(this.valueBlock.toString())}static fromBigInt(e){ly();const n=BigInt(e),s=new kv,r=n.toString(16).replace(/^-/,""),i=new Uint8Array(Ze.FromHex(r));if(n<0){const c=new Uint8Array(i.length+(i[0]&128?1:0));c[0]|=128;const h=BigInt(`0x${Ze.ToHex(c)}`)+n,m=Me.toUint8Array(Ze.FromHex(h.toString(16)));m[0]|=128,s.write(m)}else i[0]&128&&s.write(new Uint8Array([0])),s.write(i);return new Lf({valueHex:s.final()})}convertToDER(){const e=new Lf({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new Lf({valueHex:this.valueBlock.valueHexView[0]===0?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}Lf=ph;Fe.Integer=Lf;ph.NAME="INTEGER";var WD;class Ev extends ph{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}WD=Ev;Fe.Enumerated=WD;Ev.NAME="ENUMERATED";class sS extends Ki(Ps){constructor({valueDec:e=-1,isFirstSid:n=!1,...s}={}){super(s),this.valueDec=e,this.isFirstSid=n}fromBER(e,n,s){if(!s)return n;const r=Me.toUint8Array(e);if(!Da(this,r,n,s))return-1;const i=r.subarray(n,n+s);this.valueHexView=new Uint8Array(s);for(let c=0;c<s&&(this.valueHexView[c]=i[c]&127,this.blockLength++,(i[c]&128)!==0);c++);const o=new Uint8Array(this.blockLength);for(let c=0;c<this.blockLength;c++)o[c]=this.valueHexView[c];return this.valueHexView=o,(i[this.blockLength-1]&128)!==0?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=Uu(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),n+this.blockLength)}set valueBigInt(e){ly();let n=BigInt(e).toString(2);for(;n.length%7;)n="0"+n;const s=new Uint8Array(n.length/7);for(let r=0;r<s.length;r++)s[r]=parseInt(n.slice(r*7,r*7+7),2)+(r+1<s.length?128:0);this.fromBER(s.buffer,0,s.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const r=this.valueHexView,i=new Uint8Array(this.blockLength);for(let o=0;o<this.blockLength-1;o++)i[o]=r[o]|128;return i[this.blockLength-1]=r[this.blockLength-1],i.buffer}const n=Fl(this.valueDec,7);if(n.byteLength===0)return this.error="Error during encoding SID value",qi;const s=new Uint8Array(n.byteLength);if(!e){const r=new Uint8Array(n),i=n.byteLength-1;for(let o=0;o<i;o++)s[o]=r[o]|128;s[i]=r[i]}return s}toString(){let e="";if(this.isHexOnly)e=Ze.ToHex(this.valueHexView);else if(this.isFirstSid){let n=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",n-=40):(e="2.",n-=80),e+=n.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}sS.NAME="sidBlock";class GD extends Ps{constructor({value:e=Qs,...n}={}){super(n),this.value=[],e&&this.fromString(e)}fromBER(e,n,s){let r=n;for(;s>0;){const i=new sS;if(r=i.fromBER(e,r,s),r===-1)return this.blockLength=0,this.error=i.error,r;this.value.length===0&&(i.isFirstSid=!0),this.blockLength+=i.blockLength,s-=i.blockLength,this.value.push(i)}return r}toBER(e){const n=[];for(let s=0;s<this.value.length;s++){const r=this.value[s].toBER(e);if(r.byteLength===0)return this.error=this.value[s].error,qi;n.push(r)}return yC(n)}fromString(e){this.value=[];let n=0,s=0,r="",i=!1;do if(s=e.indexOf(".",n),s===-1?r=e.substring(n):r=e.substring(n,s),n=s+1,i){const o=this.value[0];let c=0;switch(o.valueDec){case 0:break;case 1:c=40;break;case 2:c=80;break;default:this.value=[];return}const u=parseInt(r,10);if(isNaN(u))return;o.valueDec=u+c,i=!1}else{const o=new sS;if(r>Number.MAX_SAFE_INTEGER){ly();const c=BigInt(r);o.valueBigInt=c}else if(o.valueDec=parseInt(r,10),isNaN(o.valueDec))return;this.value.length||(o.isFirstSid=!0,i=!0),this.value.push(o)}while(s!==-1)}toString(){let e="",n=!1;for(let s=0;s<this.value.length;s++){n=this.value[s].isHexOnly;let r=this.value[s].toString();s!==0&&(e=`${e}.`),n?(r=`{${r}}`,this.value[s].isFirstSid?e=`2.{${r} - 80}`:e+=r):e+=r}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let n=0;n<this.value.length;n++)e.sidArray.push(this.value[n].toJSON());return e}}GD.NAME="ObjectIdentifierValueBlock";var YD;class Av extends gs{getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}constructor(e={}){super(e,GD),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}YD=Av;Fe.ObjectIdentifier=YD;Av.NAME="OBJECT IDENTIFIER";class rS extends Ki(uc){constructor({valueDec:e=0,...n}={}){super(n),this.valueDec=e}fromBER(e,n,s){if(s===0)return n;const r=Me.toUint8Array(e);if(!Da(this,r,n,s))return-1;const i=r.subarray(n,n+s);this.valueHexView=new Uint8Array(s);for(let c=0;c<s&&(this.valueHexView[c]=i[c]&127,this.blockLength++,(i[c]&128)!==0);c++);const o=new Uint8Array(this.blockLength);for(let c=0;c<this.blockLength;c++)o[c]=this.valueHexView[c];return this.valueHexView=o,(i[this.blockLength-1]&128)!==0?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=Uu(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),n+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const r=this.valueHexView,i=new Uint8Array(this.blockLength);for(let o=0;o<this.blockLength-1;o++)i[o]=r[o]|128;return i[this.blockLength-1]=r[this.blockLength-1],i.buffer}const n=Fl(this.valueDec,7);if(n.byteLength===0)return this.error="Error during encoding SID value",qi;const s=new Uint8Array(n.byteLength);if(!e){const r=new Uint8Array(n),i=n.byteLength-1;for(let o=0;o<i;o++)s[o]=r[o]|128;s[i]=r[i]}return s.buffer}toString(){let e="";return this.isHexOnly?e=Ze.ToHex(this.valueHexView):e=this.valueDec.toString(),e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}rS.NAME="relativeSidBlock";class ZD extends Ps{constructor({value:e=Qs,...n}={}){super(n),this.value=[],e&&this.fromString(e)}fromBER(e,n,s){let r=n;for(;s>0;){const i=new rS;if(r=i.fromBER(e,r,s),r===-1)return this.blockLength=0,this.error=i.error,r;this.blockLength+=i.blockLength,s-=i.blockLength,this.value.push(i)}return r}toBER(e,n){const s=[];for(let r=0;r<this.value.length;r++){const i=this.value[r].toBER(e);if(i.byteLength===0)return this.error=this.value[r].error,qi;s.push(i)}return yC(s)}fromString(e){this.value=[];let n=0,s=0,r="";do{s=e.indexOf(".",n),s===-1?r=e.substring(n):r=e.substring(n,s),n=s+1;const i=new rS;if(i.valueDec=parseInt(r,10),isNaN(i.valueDec))return!0;this.value.push(i)}while(s!==-1);return!0}toString(){let e="",n=!1;for(let s=0;s<this.value.length;s++){n=this.value[s].isHexOnly;let r=this.value[s].toString();s!==0&&(e=`${e}.`),n&&(r=`{${r}}`),e+=r}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let n=0;n<this.value.length;n++)e.sidArray.push(this.value[n].toJSON());return e}}ZD.NAME="RelativeObjectIdentifierValueBlock";var XD;class wC extends gs{getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}constructor(e={}){super(e,ZD),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}XD=wC;Fe.RelativeObjectIdentifier=XD;wC.NAME="RelativeObjectIdentifier";var JD;class di extends Bs{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}JD=di;Fe.Sequence=JD;di.NAME="SEQUENCE";var QD;let Bi=class extends Bs{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}};QD=Bi;Fe.Set=QD;Bi.NAME="SET";class eB extends Ki(Ps){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=Qs}toJSON(){return{...super.toJSON(),value:this.value}}}eB.NAME="StringValueBlock";class tB extends eB{}tB.NAME="SimpleStringValueBlock";class Ar extends vC{constructor({...e}={}){super(e,tB)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,Me.toUint8Array(e))}fromString(e){const n=e.length,s=this.valueBlock.valueHexView=new Uint8Array(n);for(let r=0;r<n;r++)s[r]=e.charCodeAt(r);this.valueBlock.value=e}}Ar.NAME="SIMPLE STRING";class nB extends Ar{fromBuffer(e){this.valueBlock.valueHexView=Me.toUint8Array(e);try{this.valueBlock.value=Ze.ToUtf8String(e)}catch(n){this.warnings.push(`Error during "decodeURIComponent": ${n}, using raw string`),this.valueBlock.value=Ze.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(Ze.FromUtf8String(e)),this.valueBlock.value=e}}nB.NAME="Utf8StringValueBlock";var sB;class Ba extends nB{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}sB=Ba;Fe.Utf8String=sB;Ba.NAME="UTF8String";class rB extends Ar{fromBuffer(e){this.valueBlock.value=Ze.ToUtf16String(e),this.valueBlock.valueHexView=Me.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(Ze.FromUtf16String(e))}}rB.NAME="BmpStringValueBlock";var iB;class jv extends rB{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}iB=jv;Fe.BmpString=iB;jv.NAME="BMPString";class aB extends Ar{fromBuffer(e){const n=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),s=new Uint8Array(n);for(let r=0;r<s.length;r+=4)s[r]=s[r+3],s[r+1]=s[r+2],s[r+2]=0,s[r+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(n))}fromString(e){const n=e.length,s=this.valueBlock.valueHexView=new Uint8Array(n*4);for(let r=0;r<n;r++){const i=Fl(e.charCodeAt(r),8),o=new Uint8Array(i);if(o.length>4)continue;const c=4-o.length;for(let u=o.length-1;u>=0;u--)s[r*4+u+c]=o[u]}this.valueBlock.value=e}}aB.NAME="UniversalStringValueBlock";var oB;class Tv extends aB{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}oB=Tv;Fe.UniversalString=oB;Tv.NAME="UniversalString";var lB;class Rv extends Ar{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}lB=Rv;Fe.NumericString=lB;Rv.NAME="NumericString";var cB;class Ov extends Ar{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}cB=Ov;Fe.PrintableString=cB;Ov.NAME="PrintableString";var uB;class Mv extends Ar{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}uB=Mv;Fe.TeletexString=uB;Mv.NAME="TeletexString";var hB;class Dv extends Ar{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}hB=Dv;Fe.VideotexString=hB;Dv.NAME="VideotexString";var dB;class Bv extends Ar{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}dB=Bv;Fe.IA5String=dB;Bv.NAME="IA5String";var fB;class Lv extends Ar{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}fB=Lv;Fe.GraphicString=fB;Lv.NAME="GraphicString";var pB;class Ip extends Ar{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}pB=Ip;Fe.VisibleString=pB;Ip.NAME="VisibleString";var mB;class Iv extends Ar{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}mB=Iv;Fe.GeneralString=mB;Iv.NAME="GeneralString";var gB;class Pv extends Ar{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}gB=Pv;Fe.CharacterString=gB;Pv.NAME="CharacterString";var yB;class Pp extends Ip{constructor({value:e,valueDate:n,...s}={}){if(super(s),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let r=0;r<e.length;r++)this.valueBlock.valueHexView[r]=e.charCodeAt(r)}n&&(this.fromDate(n),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,Me.toUint8Array(e)))}toBuffer(){const e=this.toString(),n=new ArrayBuffer(e.length),s=new Uint8Array(n);for(let r=0;r<e.length;r++)s[r]=e.charCodeAt(r);return n}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){const s=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(e);if(s===null){this.error="Wrong input string for conversion";return}const r=parseInt(s[1],10);r>=50?this.year=1900+r:this.year=2e3+r,this.month=parseInt(s[2],10),this.day=parseInt(s[3],10),this.hour=parseInt(s[4],10),this.minute=parseInt(s[5],10),this.second=parseInt(s[6],10)}toString(e="iso"){if(e==="iso"){const n=new Array(7);return n[0]=xr(this.year<2e3?this.year-1900:this.year-2e3,2),n[1]=xr(this.month,2),n[2]=xr(this.day,2),n[3]=xr(this.hour,2),n[4]=xr(this.minute,2),n[5]=xr(this.second,2),n[6]="Z",n.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}yB=Pp;Fe.UTCTime=yB;Pp.NAME="UTCTime";var vB;class $v extends Pp{constructor(e={}){var n;super(e),(n=this.millisecond)!==null&&n!==void 0||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){const e=Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond);return new Date(e)}fromString(e){let n=!1,s="",r="",i=0,o,c=0,u=0;if(e[e.length-1]==="Z")s=e.substring(0,e.length-1),n=!0;else{const p=new Number(e[e.length-1]);if(isNaN(p.valueOf()))throw new Error("Wrong input string for conversion");s=e}if(n){if(s.indexOf("+")!==-1)throw new Error("Wrong input string for conversion");if(s.indexOf("-")!==-1)throw new Error("Wrong input string for conversion")}else{let p=1,y=s.indexOf("+"),v="";if(y===-1&&(y=s.indexOf("-"),p=-1),y!==-1){if(v=s.substring(y+1),s=s.substring(0,y),v.length!==2&&v.length!==4)throw new Error("Wrong input string for conversion");let x=parseInt(v.substring(0,2),10);if(isNaN(x.valueOf()))throw new Error("Wrong input string for conversion");if(c=p*x,v.length===4){if(x=parseInt(v.substring(2,4),10),isNaN(x.valueOf()))throw new Error("Wrong input string for conversion");u=p*x}}}let h=s.indexOf(".");if(h===-1&&(h=s.indexOf(",")),h!==-1){const p=new Number(`0${s.substring(h)}`);if(isNaN(p.valueOf()))throw new Error("Wrong input string for conversion");i=p.valueOf(),r=s.substring(0,h)}else r=s;switch(!0){case r.length===8:if(o=/(\d{4})(\d{2})(\d{2})/ig,h!==-1)throw new Error("Wrong input string for conversion");break;case r.length===10:if(o=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,h!==-1){let p=60*i;this.minute=Math.floor(p),p=60*(p-this.minute),this.second=Math.floor(p),p=1e3*(p-this.second),this.millisecond=Math.floor(p)}break;case r.length===12:if(o=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,h!==-1){let p=60*i;this.second=Math.floor(p),p=1e3*(p-this.second),this.millisecond=Math.floor(p)}break;case r.length===14:if(o=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,h!==-1){const p=1e3*i;this.millisecond=Math.floor(p)}break;default:throw new Error("Wrong input string for conversion")}const m=o.exec(r);if(m===null)throw new Error("Wrong input string for conversion");for(let p=1;p<m.length;p++)switch(p){case 1:this.year=parseInt(m[p],10);break;case 2:this.month=parseInt(m[p],10);break;case 3:this.day=parseInt(m[p],10);break;case 4:this.hour=parseInt(m[p],10)+c;break;case 5:this.minute=parseInt(m[p],10)+u;break;case 6:this.second=parseInt(m[p],10);break;default:throw new Error("Wrong input string for conversion")}if(n===!1){const p=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=p.getUTCFullYear(),this.month=p.getUTCMonth(),this.day=p.getUTCDay(),this.hour=p.getUTCHours(),this.minute=p.getUTCMinutes(),this.second=p.getUTCSeconds(),this.millisecond=p.getUTCMilliseconds()}}toString(e="iso"){if(e==="iso"){const n=[];return n.push(xr(this.year,4)),n.push(xr(this.month,2)),n.push(xr(this.day,2)),n.push(xr(this.hour,2)),n.push(xr(this.minute,2)),n.push(xr(this.second,2)),this.millisecond!==0&&(n.push("."),n.push(xr(this.millisecond,3))),n.push("Z"),n.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}vB=$v;Fe.GeneralizedTime=vB;$v.NAME="GeneralizedTime";var bB;let SC=class extends Ba{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}};bB=SC;Fe.DATE=bB;SC.NAME="DATE";var _B;class kC extends Ba{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}_B=kC;Fe.TimeOfDay=_B;kC.NAME="TimeOfDay";var xB;class CC extends Ba{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}xB=CC;Fe.DateTime=xB;CC.NAME="DateTime";var wB;class NC extends Ba{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}wB=NC;Fe.Duration=wB;NC.NAME="Duration";var SB;class EC extends Ba{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}SB=EC;Fe.TIME=SB;EC.NAME="TIME";class ql{constructor({name:e=Qs,optional:n=!1}={}){this.name=e,this.optional=n}}class AC extends ql{constructor({value:e=[],...n}={}){super(n),this.value=e}}class cy extends ql{constructor({value:e=new ql,local:n=!1,...s}={}){super(s),this.value=e,this.local=n}}class nX{get data(){return this.dataView.slice().buffer}set data(e){this.dataView=Me.toUint8Array(e)}constructor({data:e=Cv}={}){this.dataView=Me.toUint8Array(e)}fromBER(e,n,s){const r=n+s;return this.dataView=Me.toUint8Array(e).subarray(n,r),r}toBER(e){return this.dataView.slice().buffer}}function So(t,e,n){if(n instanceof AC){for(const i of n.value)if(So(t,e,i).verified)return{verified:!0,result:t};{const i={verified:!1,result:{error:"Wrong values for Choice type"}};return n.hasOwnProperty(jx)&&(i.name=n.name),i}}if(n instanceof ql)return n.hasOwnProperty(jx)&&(t[n.name]=e),{verified:!0,result:t};if(!(t instanceof Object))return{verified:!1,result:{error:"Wrong root object"}};if(!(e instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(!(n instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(qZ in n))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(YZ in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(ZZ in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const s=n.idBlock.toBER(!1);if(s.byteLength===0)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(n.idBlock.fromBER(s,0,s.byteLength)===-1)return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(n.idBlock.hasOwnProperty(KZ)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.tagClass!==e.idBlock.tagClass)return{verified:!1,result:t};if(n.idBlock.hasOwnProperty(WZ)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.tagNumber!==e.idBlock.tagNumber)return{verified:!1,result:t};if(n.idBlock.hasOwnProperty(GZ)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.isConstructed!==e.idBlock.isConstructed)return{verified:!1,result:t};if(!(VZ in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.isHexOnly!==e.idBlock.isHexOnly)return{verified:!1,result:t};if(n.idBlock.isHexOnly){if(!(Uj in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const i=n.idBlock.valueHexView,o=e.idBlock.valueHexView;if(i.length!==o.length)return{verified:!1,result:t};for(let c=0;c<i.length;c++)if(i[c]!==o[1])return{verified:!1,result:t}}if(n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,Qs),n.name&&(t[n.name]=e)),n instanceof Fe.Constructed){let i=0,o={verified:!1,result:{error:"Unknown error"}},c=n.valueBlock.value.length;if(c>0&&n.valueBlock.value[0]instanceof cy&&(c=e.valueBlock.value.length),c===0)return{verified:!0,result:t};if(e.valueBlock.value.length===0&&n.valueBlock.value.length!==0){let u=!0;for(let h=0;h<n.valueBlock.value.length;h++)u=u&&(n.valueBlock.value[h].optional||!1);return u?{verified:!0,result:t}:(n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,Qs),n.name&&delete t[n.name]),t.error="Inconsistent object length",{verified:!1,result:t})}for(let u=0;u<c;u++)if(u-i>=e.valueBlock.value.length){if(n.valueBlock.value[u].optional===!1){const h={verified:!1,result:t};return t.error="Inconsistent length between ASN.1 data and schema",n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,Qs),n.name&&(delete t[n.name],h.name=n.name)),h}}else if(n.valueBlock.value[0]instanceof cy){if(o=So(t,e.valueBlock.value[u],n.valueBlock.value[0].value),o.verified===!1)if(n.valueBlock.value[0].optional)i++;else return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,Qs),n.name&&delete t[n.name]),o;if(jx in n.valueBlock.value[0]&&n.valueBlock.value[0].name.length>0){let h={};XZ in n.valueBlock.value[0]&&n.valueBlock.value[0].local?h=e:h=t,typeof h[n.valueBlock.value[0].name]>"u"&&(h[n.valueBlock.value[0].name]=[]),h[n.valueBlock.value[0].name].push(e.valueBlock.value[u])}}else if(o=So(t,e.valueBlock.value[u-i],n.valueBlock.value[u]),o.verified===!1)if(n.valueBlock.value[u].optional)i++;else return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,Qs),n.name&&delete t[n.name]),o;if(o.verified===!1){const u={verified:!1,result:t};return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,Qs),n.name&&(delete t[n.name],u.name=n.name)),u}return{verified:!0,result:t}}if(n.primitiveSchema&&Uj in e.valueBlock){const i=fh(e.valueBlock.valueHexView);if(i.offset===-1){const o={verified:!1,result:i.result};return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,Qs),n.name&&(delete t[n.name],o.name=n.name)),o}return So(t,i.result,n.primitiveSchema)}return{verified:!0,result:t}}function sX(t,e){if(!(e instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};const n=fh(Me.toUint8Array(t));return n.offset===-1?{verified:!1,result:n.result}:So(n.result,n.result,e)}const kB=Object.freeze(Object.defineProperty({__proto__:null,Any:ql,BaseBlock:gs,BaseStringBlock:vC,BitString:Bl,BmpString:jv,Boolean:Nv,CharacterString:Pv,Choice:AC,Constructed:Bs,DATE:SC,DateTime:CC,Duration:NC,EndOfContent:bC,Enumerated:Ev,GeneralString:Iv,GeneralizedTime:$v,GraphicString:Lv,HexBlock:Ki,IA5String:Bv,Integer:ph,Null:Vl,NumericString:Rv,ObjectIdentifier:Av,OctetString:Dl,Primitive:Lp,PrintableString:Ov,RawData:nX,RelativeObjectIdentifier:wC,Repeated:cy,Sequence:di,Set:Bi,TIME:EC,TeletexString:Mv,TimeOfDay:kC,UTCTime:Pp,UniversalString:Tv,Utf8String:Ba,ValueBlock:Ps,VideotexString:Dv,ViewWriter:kv,VisibleString:Ip,compareSchema:So,fromBER:Du,verifySchema:sX},Symbol.toStringTag,{value:"Module"}));var _e;(function(t){t[t.Sequence=0]="Sequence",t[t.Set=1]="Set",t[t.Choice=2]="Choice"})(_e||(_e={}));var ne;(function(t){t[t.Any=1]="Any",t[t.Boolean=2]="Boolean",t[t.OctetString=3]="OctetString",t[t.BitString=4]="BitString",t[t.Integer=5]="Integer",t[t.Enumerated=6]="Enumerated",t[t.ObjectIdentifier=7]="ObjectIdentifier",t[t.Utf8String=8]="Utf8String",t[t.BmpString=9]="BmpString",t[t.UniversalString=10]="UniversalString",t[t.NumericString=11]="NumericString",t[t.PrintableString=12]="PrintableString",t[t.TeletexString=13]="TeletexString",t[t.VideotexString=14]="VideotexString",t[t.IA5String=15]="IA5String",t[t.GraphicString=16]="GraphicString",t[t.VisibleString=17]="VisibleString",t[t.GeneralString=18]="GeneralString",t[t.CharacterString=19]="CharacterString",t[t.UTCTime=20]="UTCTime",t[t.GeneralizedTime=21]="GeneralizedTime",t[t.DATE=22]="DATE",t[t.TimeOfDay=23]="TimeOfDay",t[t.DateTime=24]="DateTime",t[t.Duration=25]="Duration",t[t.TIME=26]="TIME",t[t.Null=27]="Null"})(ne||(ne={}));class zv{constructor(e,n=0){if(this.unusedBits=0,this.value=new ArrayBuffer(0),e)if(typeof e=="number")this.fromNumber(e);else if(Me.isBufferSource(e))this.unusedBits=n,this.value=Me.toArrayBuffer(e);else throw TypeError("Unsupported type of 'params' argument for BitString")}fromASN(e){if(!(e instanceof Bl))throw new TypeError("Argument 'asn' is not instance of ASN.1 BitString");return this.unusedBits=e.valueBlock.unusedBits,this.value=e.valueBlock.valueHex,this}toASN(){return new Bl({unusedBits:this.unusedBits,valueHex:this.value})}toSchema(e){return new Bl({name:e})}toNumber(){let e="";const n=new Uint8Array(this.value);for(const s of n)e+=s.toString(2).padStart(8,"0");return e=e.split("").reverse().join(""),this.unusedBits&&(e=e.slice(this.unusedBits).padStart(this.unusedBits,"0")),parseInt(e,2)}fromNumber(e){let n=e.toString(2);const s=n.length+7>>3;this.unusedBits=(s<<3)-n.length;const r=new Uint8Array(s);n=n.padStart(s<<3,"0").split("").reverse().join("");let i=0;for(;i<s;)r[i]=parseInt(n.slice(i<<3,(i<<3)+8),2),i++;this.value=r.buffer}}class Bt{get byteLength(){return this.buffer.byteLength}get byteOffset(){return 0}constructor(e){typeof e=="number"?this.buffer=new ArrayBuffer(e):Me.isBufferSource(e)?this.buffer=Me.toArrayBuffer(e):Array.isArray(e)?this.buffer=new Uint8Array(e):this.buffer=new ArrayBuffer(0)}fromASN(e){if(!(e instanceof Dl))throw new TypeError("Argument 'asn' is not instance of ASN.1 OctetString");return this.buffer=e.valueBlock.valueHex,this}toASN(){return new Dl({valueHex:this.buffer})}toSchema(e){return new Dl({name:e})}}const rX={fromASN:t=>t instanceof Vl?null:t.valueBeforeDecodeView,toASN:t=>{if(t===null)return new Vl;const e=Du(t);if(e.result.error)throw new Error(e.result.error);return e.result}},iX={fromASN:t=>t.valueBlock.valueHexView.byteLength>=4?t.valueBlock.toString():t.valueBlock.valueDec,toASN:t=>new ph({value:+t})},aX={fromASN:t=>t.valueBlock.valueDec,toASN:t=>new Ev({value:t})},an={fromASN:t=>t.valueBlock.valueHexView,toASN:t=>new ph({valueHex:t})},oX={fromASN:t=>t.valueBlock.valueHexView,toASN:t=>new Bl({valueHex:t})},lX={fromASN:t=>t.valueBlock.toString(),toASN:t=>new Av({value:t})},cX={fromASN:t=>t.valueBlock.value,toASN:t=>new Nv({value:t})},uy={fromASN:t=>t.valueBlock.valueHexView,toASN:t=>new Dl({valueHex:t})},uX={fromASN:t=>new Bt(t.getValue()),toASN:t=>t.toASN()};function si(t){return{fromASN:e=>e.valueBlock.value,toASN:e=>new t({value:e})}}const CB=si(Ba),hX=si(jv),dX=si(Tv),fX=si(Rv),pX=si(Ov),mX=si(Mv),gX=si(Dv),yX=si(Bv),vX=si(Lv),bX=si(Ip),_X=si(Iv),xX=si(Pv),wX={fromASN:t=>t.toDate(),toASN:t=>new Pp({valueDate:t})},SX={fromASN:t=>t.toDate(),toASN:t=>new $v({valueDate:t})},kX={fromASN:()=>null,toASN:()=>new Vl};function If(t){switch(t){case ne.Any:return rX;case ne.BitString:return oX;case ne.BmpString:return hX;case ne.Boolean:return cX;case ne.CharacterString:return xX;case ne.Enumerated:return aX;case ne.GeneralString:return _X;case ne.GeneralizedTime:return SX;case ne.GraphicString:return vX;case ne.IA5String:return yX;case ne.Integer:return iX;case ne.Null:return kX;case ne.NumericString:return fX;case ne.ObjectIdentifier:return lX;case ne.OctetString:return uy;case ne.PrintableString:return pX;case ne.TeletexString:return mX;case ne.UTCTime:return wX;case ne.UniversalString:return dX;case ne.Utf8String:return CB;case ne.VideotexString:return gX;case ne.VisibleString:return bX;default:return null}}function _a(t){return typeof t=="function"&&t.prototype?t.prototype.toASN&&t.prototype.fromASN?!0:_a(t.prototype):!!(t&&typeof t=="object"&&"toASN"in t&&"fromASN"in t)}function NB(t){var e;if(t){const n=Object.getPrototypeOf(t);return((e=n?.prototype)===null||e===void 0?void 0:e.constructor)===Array?!0:NB(n)}return!1}function CX(t,e){if(!(t&&e)||t.byteLength!==e.byteLength)return!1;const n=new Uint8Array(t),s=new Uint8Array(e);for(let r=0;r<t.byteLength;r++)if(n[r]!==s[r])return!1;return!0}class NX{constructor(){this.items=new WeakMap}has(e){return this.items.has(e)}get(e,n=!1){const s=this.items.get(e);if(!s)throw new Error(`Cannot get schema for '${e.prototype.constructor.name}' target`);if(n&&!s.schema)throw new Error(`Schema '${e.prototype.constructor.name}' doesn't contain ASN.1 schema. Call 'AsnSchemaStorage.cache'.`);return s}cache(e){const n=this.get(e);n.schema||(n.schema=this.create(e,!0))}createDefault(e){const n={type:_e.Sequence,items:{}},s=this.findParentSchema(e);return s&&(Object.assign(n,s),n.items=Object.assign({},n.items,s.items)),n}create(e,n){const s=this.items.get(e)||this.createDefault(e),r=[];for(const i in s.items){const o=s.items[i],c=n?i:"";let u;if(typeof o.type=="number"){const m=ne[o.type],p=kB[m];if(!p)throw new Error(`Cannot get ASN1 class by name '${m}'`);u=new p({name:c})}else _a(o.type)?u=new o.type().toSchema(c):o.optional?this.get(o.type).type===_e.Choice?u=new ql({name:c}):(u=this.create(o.type,!1),u.name=c):u=new ql({name:c});const h=!!o.optional||o.defaultValue!==void 0;if(o.repeated){u.name="";const m=o.repeated==="set"?Bi:di;u=new m({name:"",value:[new cy({name:c,value:u})]})}if(o.context!==null&&o.context!==void 0)if(o.implicit)if(typeof o.type=="number"||_a(o.type)){const m=o.repeated?Bs:Lp;r.push(new m({name:c,optional:h,idBlock:{tagClass:3,tagNumber:o.context}}))}else{this.cache(o.type);const m=!!o.repeated;let p=m?u:this.get(o.type,!0).schema;p="valueBlock"in p?p.valueBlock.value:p.value,r.push(new Bs({name:m?"":c,optional:h,idBlock:{tagClass:3,tagNumber:o.context},value:p}))}else r.push(new Bs({optional:h,idBlock:{tagClass:3,tagNumber:o.context},value:[u]}));else u.optional=h,r.push(u)}switch(s.type){case _e.Sequence:return new di({value:r,name:""});case _e.Set:return new Bi({value:r,name:""});case _e.Choice:return new AC({value:r,name:""});default:throw new Error("Unsupported ASN1 type in use")}}set(e,n){return this.items.set(e,n),this}findParentSchema(e){const n=Object.getPrototypeOf(e);return n?this.items.get(n)||this.findParentSchema(n):null}}const us=new NX,Ee=t=>e=>{let n;us.has(e)?n=us.get(e):(n=us.createDefault(e),us.set(e,n)),Object.assign(n,t)},H=t=>(e,n)=>{let s;us.has(e.constructor)?s=us.get(e.constructor):(s=us.createDefault(e.constructor),us.set(e.constructor,s));const r=Object.assign({},t);if(typeof r.type=="number"&&!r.converter){const i=If(t.type);if(!i)throw new Error(`Cannot get default converter for property '${n}' of ${e.constructor.name}`);r.converter=i}r.raw=t.raw,s.items[n]=r};class Rd extends Error{constructor(){super(...arguments),this.schemas=[]}}class EX{static parse(e,n){const s=Du(e);if(s.result.error)throw new Error(s.result.error);return this.fromASN(s.result,n)}static fromASN(e,n){try{if(_a(n))return new n().fromASN(e);const s=us.get(n);us.cache(n);let r=s.schema;const i=this.handleChoiceTypes(e,s,n,r);if(i?.result)return i.result;i?.targetSchema&&(r=i.targetSchema);const o=this.handleSequenceTypes(e,s,n,r),c=new n;return NB(n)?this.handleArrayTypes(e,s,n):(this.processSchemaItems(s,o,c),c)}catch(s){throw s instanceof Rd&&s.schemas.push(n.name),s}}static handleChoiceTypes(e,n,s,r){if(e.constructor===Bs&&n.type===_e.Choice&&e.idBlock.tagClass===3)for(const i in n.items){const o=n.items[i];if(o.context===e.idBlock.tagNumber&&o.implicit&&typeof o.type=="function"&&us.has(o.type)){const c=us.get(o.type);if(c&&c.type===_e.Sequence){const u=new di;if("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)&&"value"in u.valueBlock){u.valueBlock.value=e.valueBlock.value;const h=this.fromASN(u,o.type),m=new s;return m[i]=h,{result:m}}}}}else if(e.constructor===Bs&&n.type!==_e.Choice){const i=new Bs({idBlock:{tagClass:3,tagNumber:e.idBlock.tagNumber},value:n.schema.valueBlock.value});for(const o in n.items)delete e[o];return{targetSchema:i}}return null}static handleSequenceTypes(e,n,s,r){if(n.type===_e.Sequence){const i=So({},e,r);if(!i.verified)throw new Rd(`Data does not match to ${s.name} ASN1 schema.${i.result.error?` ${i.result.error}`:""}`);return i}else{const i=So({},e,r);if(!i.verified)throw new Rd(`Data does not match to ${s.name} ASN1 schema.${i.result.error?` ${i.result.error}`:""}`);return i}}static processRepeatedField(e,n,s){let r=e.slice(n);if(r.length===1&&r[0].constructor.name==="Sequence"){const i=r[0];i.valueBlock&&i.valueBlock.value&&Array.isArray(i.valueBlock.value)&&(r=i.valueBlock.value)}if(typeof s.type=="number"){const i=If(s.type);if(!i)throw new Error(`No converter for ASN.1 type ${s.type}`);return r.filter(o=>o&&o.valueBlock).map(o=>{try{return i.fromASN(o)}catch{return}}).filter(o=>o!==void 0)}else return r.filter(i=>i&&i.valueBlock).map(i=>{try{return this.fromASN(i,s.type)}catch{return}}).filter(i=>i!==void 0)}static processPrimitiveField(e,n){const s=If(n.type);if(!s)throw new Error(`No converter for ASN.1 type ${n.type}`);return s.fromASN(e)}static isOptionalChoiceField(e){return e.optional&&typeof e.type=="function"&&us.has(e.type)&&us.get(e.type).type===_e.Choice}static processOptionalChoiceField(e,n){try{return{processed:!0,value:this.fromASN(e,n.type)}}catch(s){if(s instanceof Rd&&/Wrong values for Choice type/.test(s.message))return{processed:!1};throw s}}static handleArrayTypes(e,n,s){if(!("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)))throw new Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");const r=n.itemType;if(typeof r=="number"){const i=If(r);if(!i)throw new Error(`Cannot get default converter for array item of ${s.name} ASN1 schema`);return s.from(e.valueBlock.value,o=>i.fromASN(o))}else return s.from(e.valueBlock.value,i=>this.fromASN(i,r))}static processSchemaItems(e,n,s){for(const r in e.items){const i=n.result[r];if(!i)continue;const o=e.items[r],c=o.type;let u;typeof c=="number"||_a(c)?u=this.processPrimitiveSchemaItem(i,o,c):u=this.processComplexSchemaItem(i,o,c),u&&typeof u=="object"&&"value"in u&&"raw"in u?(s[r]=u.value,s[`${r}Raw`]=u.raw):s[r]=u}}static processPrimitiveSchemaItem(e,n,s){var r;const i=(r=n.converter)!==null&&r!==void 0?r:_a(s)?new s:null;if(!i)throw new Error("Converter is empty");return n.repeated?this.processRepeatedPrimitiveItem(e,n,i):this.processSinglePrimitiveItem(e,n,s,i)}static processRepeatedPrimitiveItem(e,n,s){if(n.implicit){const r=n.repeated==="sequence"?di:Bi,i=new r;i.valueBlock=e.valueBlock;const o=Du(i.toBER(!1));if(o.offset===-1)throw new Error(`Cannot parse the child item. ${o.result.error}`);if(!("value"in o.result.valueBlock&&Array.isArray(o.result.valueBlock.value)))throw new Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");const c=o.result.valueBlock.value;return Array.from(c,u=>s.fromASN(u))}else return Array.from(e,r=>s.fromASN(r))}static processSinglePrimitiveItem(e,n,s,r){let i=e;if(n.implicit){let o;if(_a(s))o=new s().toSchema("");else{const c=ne[s],u=kB[c];if(!u)throw new Error(`Cannot get '${c}' class from asn1js module`);o=new u}o.valueBlock=i.valueBlock,i=Du(o.toBER(!1)).result}return r.fromASN(i)}static processComplexSchemaItem(e,n,s){if(n.repeated){if(!Array.isArray(e))throw new Error("Cannot get list of items from the ASN.1 parsed value. ASN.1 value should be iterable.");return Array.from(e,r=>this.fromASN(r,s))}else{const r=this.handleImplicitTagging(e,n,s);if(this.isOptionalChoiceField(n))try{return this.fromASN(r,s)}catch(i){if(i instanceof Rd&&/Wrong values for Choice type/.test(i.message))return;throw i}else{const i=this.fromASN(r,s);return n.raw?{value:i,raw:e.valueBeforeDecodeView}:i}}}static handleImplicitTagging(e,n,s){if(n.implicit&&typeof n.context=="number"){const r=us.get(s);if(r.type===_e.Sequence){const i=new di;if("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)&&"value"in i.valueBlock)return i.valueBlock.value=e.valueBlock.value,i}else if(r.type===_e.Set){const i=new Bi;if("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)&&"value"in i.valueBlock)return i.valueBlock.value=e.valueBlock.value,i}}return e}}class jC{static serialize(e){return e instanceof gs?e.toBER(!1):this.toASN(e).toBER(!1)}static toASN(e){if(e&&typeof e=="object"&&_a(e))return e.toASN();if(!(e&&typeof e=="object"))throw new TypeError("Parameter 1 should be type of Object.");const n=e.constructor,s=us.get(n);us.cache(n);let r=[];if(s.itemType){if(!Array.isArray(e))throw new TypeError("Parameter 1 should be type of Array.");if(typeof s.itemType=="number"){const o=If(s.itemType);if(!o)throw new Error(`Cannot get default converter for array item of ${n.name} ASN1 schema`);r=e.map(c=>o.toASN(c))}else r=e.map(o=>this.toAsnItem({type:s.itemType},"[]",n,o))}else for(const o in s.items){const c=s.items[o],u=e[o];if(u===void 0||c.defaultValue===u||typeof c.defaultValue=="object"&&typeof u=="object"&&CX(this.serialize(c.defaultValue),this.serialize(u)))continue;const h=jC.toAsnItem(c,o,n,u);if(typeof c.context=="number")if(c.implicit)if(!c.repeated&&(typeof c.type=="number"||_a(c.type))){const m={};m.valueHex=h instanceof Vl?h.valueBeforeDecodeView:h.valueBlock.toBER(),r.push(new Lp({optional:c.optional,idBlock:{tagClass:3,tagNumber:c.context},...m}))}else r.push(new Bs({optional:c.optional,idBlock:{tagClass:3,tagNumber:c.context},value:h.valueBlock.value}));else r.push(new Bs({optional:c.optional,idBlock:{tagClass:3,tagNumber:c.context},value:[h]}));else c.repeated?r=r.concat(h):r.push(h)}let i;switch(s.type){case _e.Sequence:i=new di({value:r});break;case _e.Set:i=new Bi({value:r});break;case _e.Choice:if(!r[0])throw new Error(`Schema '${n.name}' has wrong data. Choice cannot be empty.`);i=r[0];break}return i}static toAsnItem(e,n,s,r){let i;if(typeof e.type=="number"){const o=e.converter;if(!o)throw new Error(`Property '${n}' doesn't have converter for type ${ne[e.type]} in schema '${s.name}'`);if(e.repeated){if(!Array.isArray(r))throw new TypeError("Parameter 'objProp' should be type of Array.");const c=Array.from(r,h=>o.toASN(h)),u=e.repeated==="sequence"?di:Bi;i=new u({value:c})}else i=o.toASN(r)}else if(e.repeated){if(!Array.isArray(r))throw new TypeError("Parameter 'objProp' should be type of Array.");const o=Array.from(r,u=>this.toASN(u)),c=e.repeated==="sequence"?di:Bi;i=new c({value:o})}else i=this.toASN(r);return i}}class Ut extends Array{constructor(e=[]){if(typeof e=="number")super(e);else{super();for(const n of e)this.push(n)}}}class Be{static serialize(e){return jC.serialize(e)}static parse(e,n){return EX.parse(e,n)}static toString(e){const n=Me.isBufferSource(e)?Me.toArrayBuffer(e):Be.serialize(e),s=Du(n);if(s.offset===-1)throw new Error(`Cannot decode ASN.1 data. ${s.result.error}`);return s.result.toString()}}function L(t,e,n,s){var r=arguments.length,i=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,n):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,s);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(r<3?o(i):r>3?o(e,n,i):o(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i}function vt(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)}function un(t,e,n,s,r){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?r.call(t,n):r?r.value=n:e.set(t,n),n}class Fj{static isIPv4(e){return/^(\d{1,3}\.){3}\d{1,3}$/.test(e)}static parseIPv4(e){const n=e.split(".");if(n.length!==4)throw new Error("Invalid IPv4 address");return n.map(s=>{const r=parseInt(s,10);if(isNaN(r)||r<0||r>255)throw new Error("Invalid IPv4 address part");return r})}static parseIPv6(e){const s=this.expandIPv6(e).split(":");if(s.length!==8)throw new Error("Invalid IPv6 address");return s.reduce((r,i)=>{const o=parseInt(i,16);if(isNaN(o)||o<0||o>65535)throw new Error("Invalid IPv6 address part");return r.push(o>>8&255),r.push(o&255),r},[])}static expandIPv6(e){if(!e.includes("::"))return e;const n=e.split("::");if(n.length>2)throw new Error("Invalid IPv6 address");const s=n[0]?n[0].split(":"):[],r=n[1]?n[1].split(":"):[],i=8-(s.length+r.length);if(i<0)throw new Error("Invalid IPv6 address");return[...s,...Array(i).fill("0"),...r].join(":")}static formatIPv6(e){const n=[];for(let s=0;s<16;s+=2)n.push((e[s]<<8|e[s+1]).toString(16));return this.compressIPv6(n.join(":"))}static compressIPv6(e){const n=e.split(":");let s=-1,r=0,i=-1,o=0;for(let c=0;c<n.length;c++)n[c]==="0"?(i===-1&&(i=c),o++):(o>r&&(s=i,r=o),i=-1,o=0);if(o>r&&(s=i,r=o),r>1){const c=n.slice(0,s).join(":"),u=n.slice(s+r).join(":");return`${c}::${u}`}return e}static parseCIDR(e){const[n,s]=e.split("/"),r=parseInt(s,10);if(this.isIPv4(n)){if(r<0||r>32)throw new Error("Invalid IPv4 prefix length");return[this.parseIPv4(n),r]}else{if(r<0||r>128)throw new Error("Invalid IPv6 prefix length");return[this.parseIPv6(n),r]}}static decodeIP(e){if(e.length===64&&parseInt(e,16)===0)return"::/0";if(e.length!==16)return e;const n=parseInt(e.slice(8),16).toString(2).split("").reduce((r,i)=>r+ +i,0);let s=e.slice(0,8).replace(/(.{2})/g,r=>`${parseInt(r,16)}.`);return s=s.slice(0,-1),`${s}/${n}`}static toString(e){const n=new Uint8Array(e);if(n.length===4)return Array.from(n).join(".");if(n.length===16)return this.formatIPv6(n);if(n.length===8||n.length===32){const s=n.length/2,r=n.slice(0,s),i=n.slice(s);if(n.every(u=>u===0))return n.length===8?"0.0.0.0/0":"::/0";const c=i.reduce((u,h)=>u+(h.toString(2).match(/1/g)||[]).length,0);return n.length===8?`${Array.from(r).join(".")}/${c}`:`${this.formatIPv6(r)}/${c}`}return this.decodeIP(Ze.ToHex(e))}static fromString(e){if(e.includes("/")){const[s,r]=this.parseCIDR(e),i=new Uint8Array(s.length);let o=r;for(let u=0;u<i.length;u++)o>=8?(i[u]=255,o-=8):o>0&&(i[u]=255<<8-o,o=0);const c=new Uint8Array(s.length*2);return c.set(s,0),c.set(i,s.length),c.buffer}const n=this.isIPv4(e)?this.parseIPv4(e):this.parseIPv6(e);return new Uint8Array(n).buffer}}var iS,aS,oS;let ys=class{constructor(e={}){Object.assign(this,e)}toString(){return this.bmpString||this.printableString||this.teletexString||this.universalString||this.utf8String||""}};L([H({type:ne.TeletexString})],ys.prototype,"teletexString",void 0);L([H({type:ne.PrintableString})],ys.prototype,"printableString",void 0);L([H({type:ne.UniversalString})],ys.prototype,"universalString",void 0);L([H({type:ne.Utf8String})],ys.prototype,"utf8String",void 0);L([H({type:ne.BmpString})],ys.prototype,"bmpString",void 0);ys=L([Ee({type:_e.Choice})],ys);let Hu=class extends ys{constructor(e={}){super(e),Object.assign(this,e)}toString(){return this.ia5String||(this.anyValue?Ze.ToHex(this.anyValue):super.toString())}};L([H({type:ne.IA5String})],Hu.prototype,"ia5String",void 0);L([H({type:ne.Any})],Hu.prototype,"anyValue",void 0);Hu=L([Ee({type:_e.Choice})],Hu);class Uv{constructor(e={}){this.type="",this.value=new Hu,Object.assign(this,e)}}L([H({type:ne.ObjectIdentifier})],Uv.prototype,"type",void 0);L([H({type:Hu})],Uv.prototype,"value",void 0);let Fu=iS=class extends Ut{constructor(e){super(e),Object.setPrototypeOf(this,iS.prototype)}};Fu=iS=L([Ee({type:_e.Set,itemType:Uv})],Fu);let lS=aS=class extends Ut{constructor(e){super(e),Object.setPrototypeOf(this,aS.prototype)}};lS=aS=L([Ee({type:_e.Sequence,itemType:Fu})],lS);let Fn=oS=class extends lS{constructor(e){super(e),Object.setPrototypeOf(this,oS.prototype)}};Fn=oS=L([Ee({type:_e.Sequence})],Fn);const AX={fromASN:t=>Fj.toString(uy.fromASN(t)),toASN:t=>uy.toASN(Fj.fromString(t))};class up{constructor(e={}){this.typeId="",this.value=new ArrayBuffer(0),Object.assign(this,e)}}L([H({type:ne.ObjectIdentifier})],up.prototype,"typeId",void 0);L([H({type:ne.Any,context:0})],up.prototype,"value",void 0);class TC{constructor(e={}){this.partyName=new ys,Object.assign(this,e)}}L([H({type:ys,optional:!0,context:0,implicit:!0})],TC.prototype,"nameAssigner",void 0);L([H({type:ys,context:1,implicit:!0})],TC.prototype,"partyName",void 0);let mt=class{constructor(e={}){Object.assign(this,e)}};L([H({type:up,context:0,implicit:!0})],mt.prototype,"otherName",void 0);L([H({type:ne.IA5String,context:1,implicit:!0})],mt.prototype,"rfc822Name",void 0);L([H({type:ne.IA5String,context:2,implicit:!0})],mt.prototype,"dNSName",void 0);L([H({type:ne.Any,context:3,implicit:!0})],mt.prototype,"x400Address",void 0);L([H({type:Fn,context:4,implicit:!1})],mt.prototype,"directoryName",void 0);L([H({type:TC,context:5})],mt.prototype,"ediPartyName",void 0);L([H({type:ne.IA5String,context:6,implicit:!0})],mt.prototype,"uniformResourceIdentifier",void 0);L([H({type:ne.OctetString,context:7,implicit:!0,converter:AX})],mt.prototype,"iPAddress",void 0);L([H({type:ne.ObjectIdentifier,context:8,implicit:!0})],mt.prototype,"registeredID",void 0);mt=L([Ee({type:_e.Choice})],mt);const RC="1.3.6.1.5.5.7",jX=`${RC}.1`,mh=`${RC}.3`,Hv=`${RC}.48`,Vj=`${Hv}.1`,qj=`${Hv}.2`,Kj=`${Hv}.3`,Wj=`${Hv}.5`,La="2.5.29";var cS;const uS=`${jX}.1`;class $p{constructor(e={}){this.accessMethod="",this.accessLocation=new mt,Object.assign(this,e)}}L([H({type:ne.ObjectIdentifier})],$p.prototype,"accessMethod",void 0);L([H({type:mt})],$p.prototype,"accessLocation",void 0);let Su=cS=class extends Ut{constructor(e){super(e),Object.setPrototypeOf(this,cS.prototype)}};Su=cS=L([Ee({type:_e.Sequence,itemType:$p})],Su);const hS=`${La}.35`;class OC extends Bt{}class Sl{constructor(e={}){e&&Object.assign(this,e)}}L([H({type:OC,context:0,optional:!0,implicit:!0})],Sl.prototype,"keyIdentifier",void 0);L([H({type:mt,context:1,optional:!0,implicit:!0,repeated:"sequence"})],Sl.prototype,"authorityCertIssuer",void 0);L([H({type:ne.Integer,context:2,optional:!0,implicit:!0,converter:an})],Sl.prototype,"authorityCertSerialNumber",void 0);const EB=`${La}.19`;class hy{constructor(e={}){this.cA=!1,Object.assign(this,e)}}L([H({type:ne.Boolean,defaultValue:!1})],hy.prototype,"cA",void 0);L([H({type:ne.Integer,optional:!0})],hy.prototype,"pathLenConstraint",void 0);var dS;let Cs=dS=class extends Ut{constructor(e){super(e),Object.setPrototypeOf(this,dS.prototype)}};Cs=dS=L([Ee({type:_e.Sequence,itemType:mt})],Cs);var fS;let Gj=fS=class extends Cs{constructor(e){super(e),Object.setPrototypeOf(this,fS.prototype)}};Gj=fS=L([Ee({type:_e.Sequence})],Gj);var pS;const AB=`${La}.32`;let Na=class{constructor(e={}){Object.assign(this,e)}toString(){return this.ia5String||this.visibleString||this.bmpString||this.utf8String||""}};L([H({type:ne.IA5String})],Na.prototype,"ia5String",void 0);L([H({type:ne.VisibleString})],Na.prototype,"visibleString",void 0);L([H({type:ne.BmpString})],Na.prototype,"bmpString",void 0);L([H({type:ne.Utf8String})],Na.prototype,"utf8String",void 0);Na=L([Ee({type:_e.Choice})],Na);class MC{constructor(e={}){this.organization=new Na,this.noticeNumbers=[],Object.assign(this,e)}}L([H({type:Na})],MC.prototype,"organization",void 0);L([H({type:ne.Integer,repeated:"sequence"})],MC.prototype,"noticeNumbers",void 0);class DC{constructor(e={}){Object.assign(this,e)}}L([H({type:MC,optional:!0})],DC.prototype,"noticeRef",void 0);L([H({type:Na,optional:!0})],DC.prototype,"explicitText",void 0);let dy=class{constructor(e={}){Object.assign(this,e)}};L([H({type:ne.IA5String})],dy.prototype,"cPSuri",void 0);L([H({type:DC})],dy.prototype,"userNotice",void 0);dy=L([Ee({type:_e.Choice})],dy);class BC{constructor(e={}){this.policyQualifierId="",this.qualifier=new ArrayBuffer(0),Object.assign(this,e)}}L([H({type:ne.ObjectIdentifier})],BC.prototype,"policyQualifierId",void 0);L([H({type:ne.Any})],BC.prototype,"qualifier",void 0);class Fv{constructor(e={}){this.policyIdentifier="",Object.assign(this,e)}}L([H({type:ne.ObjectIdentifier})],Fv.prototype,"policyIdentifier",void 0);L([H({type:BC,repeated:"sequence",optional:!0})],Fv.prototype,"policyQualifiers",void 0);let fy=pS=class extends Ut{constructor(e){super(e),Object.setPrototypeOf(this,pS.prototype)}};fy=pS=L([Ee({type:_e.Sequence,itemType:Fv})],fy);let py=class{constructor(e=0){this.value=e}};L([H({type:ne.Integer})],py.prototype,"value",void 0);py=L([Ee({type:_e.Choice})],py);let Yj=class extends py{};Yj=L([Ee({type:_e.Choice})],Yj);var mS;const gS=`${La}.31`;var ci;(function(t){t[t.unused=1]="unused",t[t.keyCompromise=2]="keyCompromise",t[t.cACompromise=4]="cACompromise",t[t.affiliationChanged=8]="affiliationChanged",t[t.superseded=16]="superseded",t[t.cessationOfOperation=32]="cessationOfOperation",t[t.certificateHold=64]="certificateHold",t[t.privilegeWithdrawn=128]="privilegeWithdrawn",t[t.aACompromise=256]="aACompromise"})(ci||(ci={}));class jB extends zv{toJSON(){const e=[],n=this.toNumber();return n&ci.aACompromise&&e.push("aACompromise"),n&ci.affiliationChanged&&e.push("affiliationChanged"),n&ci.cACompromise&&e.push("cACompromise"),n&ci.certificateHold&&e.push("certificateHold"),n&ci.cessationOfOperation&&e.push("cessationOfOperation"),n&ci.keyCompromise&&e.push("keyCompromise"),n&ci.privilegeWithdrawn&&e.push("privilegeWithdrawn"),n&ci.superseded&&e.push("superseded"),n&ci.unused&&e.push("unused"),e}toString(){return`[${this.toJSON().join(", ")}]`}}let Kl=class{constructor(e={}){Object.assign(this,e)}};L([H({type:mt,context:0,repeated:"sequence",implicit:!0})],Kl.prototype,"fullName",void 0);L([H({type:Fu,context:1,implicit:!0})],Kl.prototype,"nameRelativeToCRLIssuer",void 0);Kl=L([Ee({type:_e.Choice})],Kl);class gh{constructor(e={}){Object.assign(this,e)}}L([H({type:Kl,context:0,optional:!0})],gh.prototype,"distributionPoint",void 0);L([H({type:jB,context:1,optional:!0,implicit:!0})],gh.prototype,"reasons",void 0);L([H({type:mt,context:2,optional:!0,repeated:"sequence",implicit:!0})],gh.prototype,"cRLIssuer",void 0);let Bu=mS=class extends Ut{constructor(e){super(e),Object.setPrototypeOf(this,mS.prototype)}};Bu=mS=L([Ee({type:_e.Sequence,itemType:gh})],Bu);var yS;let Zj=yS=class extends Bu{constructor(e){super(e),Object.setPrototypeOf(this,yS.prototype)}};Zj=yS=L([Ee({type:_e.Sequence,itemType:gh})],Zj);class ws{constructor(e={}){this.onlyContainsUserCerts=ws.ONLY,this.onlyContainsCACerts=ws.ONLY,this.indirectCRL=ws.ONLY,this.onlyContainsAttributeCerts=ws.ONLY,Object.assign(this,e)}}ws.ONLY=!1;L([H({type:Kl,context:0,optional:!0})],ws.prototype,"distributionPoint",void 0);L([H({type:ne.Boolean,context:1,defaultValue:ws.ONLY,implicit:!0})],ws.prototype,"onlyContainsUserCerts",void 0);L([H({type:ne.Boolean,context:2,defaultValue:ws.ONLY,implicit:!0})],ws.prototype,"onlyContainsCACerts",void 0);L([H({type:jB,context:3,optional:!0,implicit:!0})],ws.prototype,"onlySomeReasons",void 0);L([H({type:ne.Boolean,context:4,defaultValue:ws.ONLY,implicit:!0})],ws.prototype,"indirectCRL",void 0);L([H({type:ne.Boolean,context:5,defaultValue:ws.ONLY,implicit:!0})],ws.prototype,"onlyContainsAttributeCerts",void 0);var Pf;(function(t){t[t.unspecified=0]="unspecified",t[t.keyCompromise=1]="keyCompromise",t[t.cACompromise=2]="cACompromise",t[t.affiliationChanged=3]="affiliationChanged",t[t.superseded=4]="superseded",t[t.cessationOfOperation=5]="cessationOfOperation",t[t.certificateHold=6]="certificateHold",t[t.removeFromCRL=8]="removeFromCRL",t[t.privilegeWithdrawn=9]="privilegeWithdrawn",t[t.aACompromise=10]="aACompromise"})(Pf||(Pf={}));let vS=class{constructor(e=Pf.unspecified){this.reason=Pf.unspecified,this.reason=e}toJSON(){return Pf[this.reason]}toString(){return this.toJSON()}};L([H({type:ne.Enumerated})],vS.prototype,"reason",void 0);vS=L([Ee({type:_e.Choice})],vS);var bS;const TB=`${La}.37`;let my=bS=class extends Ut{constructor(e){super(e),Object.setPrototypeOf(this,bS.prototype)}};my=bS=L([Ee({type:_e.Sequence,itemType:ne.ObjectIdentifier})],my);const TX=`${mh}.1`,RX=`${mh}.2`,OX=`${mh}.3`,MX=`${mh}.4`,DX=`${mh}.8`,BX=`${mh}.9`;let _S=class{constructor(e=new ArrayBuffer(0)){this.value=e}};L([H({type:ne.Integer,converter:an})],_S.prototype,"value",void 0);_S=L([Ee({type:_e.Choice})],_S);let xS=class{constructor(e){this.value=new Date,e&&(this.value=e)}};L([H({type:ne.GeneralizedTime})],xS.prototype,"value",void 0);xS=L([Ee({type:_e.Choice})],xS);var wS;const RB=`${La}.18`;let Xj=wS=class extends Cs{constructor(e){super(e),Object.setPrototypeOf(this,wS.prototype)}};Xj=wS=L([Ee({type:_e.Sequence})],Xj);const OB=`${La}.15`;var ui;(function(t){t[t.digitalSignature=1]="digitalSignature",t[t.nonRepudiation=2]="nonRepudiation",t[t.keyEncipherment=4]="keyEncipherment",t[t.dataEncipherment=8]="dataEncipherment",t[t.keyAgreement=16]="keyAgreement",t[t.keyCertSign=32]="keyCertSign",t[t.cRLSign=64]="cRLSign",t[t.encipherOnly=128]="encipherOnly",t[t.decipherOnly=256]="decipherOnly"})(ui||(ui={}));class Tx extends zv{toJSON(){const e=this.toNumber(),n=[];return e&ui.cRLSign&&n.push("crlSign"),e&ui.dataEncipherment&&n.push("dataEncipherment"),e&ui.decipherOnly&&n.push("decipherOnly"),e&ui.digitalSignature&&n.push("digitalSignature"),e&ui.encipherOnly&&n.push("encipherOnly"),e&ui.keyAgreement&&n.push("keyAgreement"),e&ui.keyCertSign&&n.push("keyCertSign"),e&ui.keyEncipherment&&n.push("keyEncipherment"),e&ui.nonRepudiation&&n.push("nonRepudiation"),n}toString(){return`[${this.toJSON().join(", ")}]`}}var SS;class Vv{constructor(e={}){this.base=new mt,this.minimum=0,Object.assign(this,e)}}L([H({type:mt})],Vv.prototype,"base",void 0);L([H({type:ne.Integer,context:0,defaultValue:0,implicit:!0})],Vv.prototype,"minimum",void 0);L([H({type:ne.Integer,context:1,optional:!0,implicit:!0})],Vv.prototype,"maximum",void 0);let gy=SS=class extends Ut{constructor(e){super(e),Object.setPrototypeOf(this,SS.prototype)}};gy=SS=L([Ee({type:_e.Sequence,itemType:Vv})],gy);class MB{constructor(e={}){Object.assign(this,e)}}L([H({type:gy,context:0,optional:!0,implicit:!0})],MB.prototype,"permittedSubtrees",void 0);L([H({type:gy,context:1,optional:!0,implicit:!0})],MB.prototype,"excludedSubtrees",void 0);class DB{constructor(e={}){Object.assign(this,e)}}L([H({type:ne.Integer,context:0,implicit:!0,optional:!0,converter:an})],DB.prototype,"requireExplicitPolicy",void 0);L([H({type:ne.Integer,context:1,implicit:!0,optional:!0,converter:an})],DB.prototype,"inhibitPolicyMapping",void 0);var kS;class LC{constructor(e={}){this.issuerDomainPolicy="",this.subjectDomainPolicy="",Object.assign(this,e)}}L([H({type:ne.ObjectIdentifier})],LC.prototype,"issuerDomainPolicy",void 0);L([H({type:ne.ObjectIdentifier})],LC.prototype,"subjectDomainPolicy",void 0);let Jj=kS=class extends Ut{constructor(e){super(e),Object.setPrototypeOf(this,kS.prototype)}};Jj=kS=L([Ee({type:_e.Sequence,itemType:LC})],Jj);var CS;const BB=`${La}.17`;let NS=CS=class extends Cs{constructor(e){super(e),Object.setPrototypeOf(this,CS.prototype)}};NS=CS=L([Ee({type:_e.Sequence})],NS);let Ea=class{constructor(e={}){this.type="",this.values=[],Object.assign(this,e)}};L([H({type:ne.ObjectIdentifier})],Ea.prototype,"type",void 0);L([H({type:ne.Any,repeated:"set"})],Ea.prototype,"values",void 0);var ES;let Qj=ES=class extends Ut{constructor(e){super(e),Object.setPrototypeOf(this,ES.prototype)}};Qj=ES=L([Ee({type:_e.Sequence,itemType:Ea})],Qj);const LB=`${La}.14`;class Do extends OC{}class IB{constructor(e={}){Object.assign(this,e)}}L([H({type:ne.GeneralizedTime,context:0,implicit:!0,optional:!0})],IB.prototype,"notBefore",void 0);L([H({type:ne.GeneralizedTime,context:1,implicit:!0,optional:!0})],IB.prototype,"notAfter",void 0);var $f;(function(t){t[t.keyUpdateAllowed=1]="keyUpdateAllowed",t[t.newExtensions=2]="newExtensions",t[t.pKIXCertificate=4]="pKIXCertificate"})($f||($f={}));class PB extends zv{toJSON(){const e=[],n=this.toNumber();return n&$f.pKIXCertificate&&e.push("pKIXCertificate"),n&$f.newExtensions&&e.push("newExtensions"),n&$f.keyUpdateAllowed&&e.push("keyUpdateAllowed"),e}toString(){return`[${this.toJSON().join(", ")}]`}}class $B{constructor(e={}){this.entrustVers="",this.entrustInfoFlags=new PB,Object.assign(this,e)}}L([H({type:ne.GeneralString})],$B.prototype,"entrustVers",void 0);L([H({type:PB})],$B.prototype,"entrustInfoFlags",void 0);var AS;let eT=AS=class extends Ut{constructor(e){super(e),Object.setPrototypeOf(this,AS.prototype)}};eT=AS=L([Ee({type:_e.Sequence,itemType:$p})],eT);class $e{constructor(e={}){this.algorithm="",Object.assign(this,e)}isEqual(e){return e instanceof $e&&e.algorithm==this.algorithm&&(e.parameters&&this.parameters&&AD(e.parameters,this.parameters)||e.parameters===this.parameters)}}L([H({type:ne.ObjectIdentifier})],$e.prototype,"algorithm",void 0);L([H({type:ne.Any,optional:!0})],$e.prototype,"parameters",void 0);class Oi{constructor(e={}){this.algorithm=new $e,this.subjectPublicKey=new ArrayBuffer(0),Object.assign(this,e)}}L([H({type:$e})],Oi.prototype,"algorithm",void 0);L([H({type:ne.BitString})],Oi.prototype,"subjectPublicKey",void 0);let fs=class{constructor(e){if(e)if(typeof e=="string"||typeof e=="number"||e instanceof Date){const n=new Date(e);n.getUTCFullYear()>2049?this.generalTime=n:this.utcTime=n}else Object.assign(this,e)}getTime(){const e=this.utcTime||this.generalTime;if(!e)throw new Error("Cannot get time from CHOICE object");return e}};L([H({type:ne.UTCTime})],fs.prototype,"utcTime",void 0);L([H({type:ne.GeneralizedTime})],fs.prototype,"generalTime",void 0);fs=L([Ee({type:_e.Choice})],fs);class qv{constructor(e){this.notBefore=new fs(new Date),this.notAfter=new fs(new Date),e&&(this.notBefore=new fs(e.notBefore),this.notAfter=new fs(e.notAfter))}}L([H({type:fs})],qv.prototype,"notBefore",void 0);L([H({type:fs})],qv.prototype,"notAfter",void 0);var jS;let gi=class zB{constructor(e={}){this.extnID="",this.critical=zB.CRITICAL,this.extnValue=new Bt,Object.assign(this,e)}};gi.CRITICAL=!1;L([H({type:ne.ObjectIdentifier})],gi.prototype,"extnID",void 0);L([H({type:ne.Boolean,defaultValue:gi.CRITICAL})],gi.prototype,"critical",void 0);L([H({type:Bt})],gi.prototype,"extnValue",void 0);let Wl=jS=class extends Ut{constructor(e){super(e),Object.setPrototypeOf(this,jS.prototype)}};Wl=jS=L([Ee({type:_e.Sequence,itemType:gi})],Wl);var Vu;(function(t){t[t.v1=0]="v1",t[t.v2=1]="v2",t[t.v3=2]="v3"})(Vu||(Vu={}));class ri{constructor(e={}){this.version=Vu.v1,this.serialNumber=new ArrayBuffer(0),this.signature=new $e,this.issuer=new Fn,this.validity=new qv,this.subject=new Fn,this.subjectPublicKeyInfo=new Oi,Object.assign(this,e)}}L([H({type:ne.Integer,context:0,defaultValue:Vu.v1})],ri.prototype,"version",void 0);L([H({type:ne.Integer,converter:an})],ri.prototype,"serialNumber",void 0);L([H({type:$e})],ri.prototype,"signature",void 0);L([H({type:Fn})],ri.prototype,"issuer",void 0);L([H({type:qv})],ri.prototype,"validity",void 0);L([H({type:Fn})],ri.prototype,"subject",void 0);L([H({type:Oi})],ri.prototype,"subjectPublicKeyInfo",void 0);L([H({type:ne.BitString,context:1,implicit:!0,optional:!0})],ri.prototype,"issuerUniqueID",void 0);L([H({type:ne.BitString,context:2,implicit:!0,optional:!0})],ri.prototype,"subjectUniqueID",void 0);L([H({type:Wl,context:3,optional:!0})],ri.prototype,"extensions",void 0);class qu{constructor(e={}){this.tbsCertificate=new ri,this.signatureAlgorithm=new $e,this.signatureValue=new ArrayBuffer(0),Object.assign(this,e)}}L([H({type:ri,raw:!0})],qu.prototype,"tbsCertificate",void 0);L([H({type:$e})],qu.prototype,"signatureAlgorithm",void 0);L([H({type:ne.BitString})],qu.prototype,"signatureValue",void 0);class Kv{constructor(e={}){this.userCertificate=new ArrayBuffer(0),this.revocationDate=new fs,Object.assign(this,e)}}L([H({type:ne.Integer,converter:an})],Kv.prototype,"userCertificate",void 0);L([H({type:fs})],Kv.prototype,"revocationDate",void 0);L([H({type:gi,optional:!0,repeated:"sequence"})],Kv.prototype,"crlEntryExtensions",void 0);class Ia{constructor(e={}){this.signature=new $e,this.issuer=new Fn,this.thisUpdate=new fs,Object.assign(this,e)}}L([H({type:ne.Integer,optional:!0})],Ia.prototype,"version",void 0);L([H({type:$e})],Ia.prototype,"signature",void 0);L([H({type:Fn})],Ia.prototype,"issuer",void 0);L([H({type:fs})],Ia.prototype,"thisUpdate",void 0);L([H({type:fs,optional:!0})],Ia.prototype,"nextUpdate",void 0);L([H({type:Kv,repeated:"sequence",optional:!0})],Ia.prototype,"revokedCertificates",void 0);L([H({type:gi,optional:!0,context:0,repeated:"sequence"})],Ia.prototype,"crlExtensions",void 0);class IC{constructor(e={}){this.tbsCertList=new Ia,this.signatureAlgorithm=new $e,this.signature=new ArrayBuffer(0),Object.assign(this,e)}}L([H({type:Ia,raw:!0})],IC.prototype,"tbsCertList",void 0);L([H({type:$e})],IC.prototype,"signatureAlgorithm",void 0);L([H({type:ne.BitString})],IC.prototype,"signature",void 0);class yh{constructor(e={}){this.issuer=new Fn,this.serialNumber=new ArrayBuffer(0),Object.assign(this,e)}}L([H({type:Fn})],yh.prototype,"issuer",void 0);L([H({type:ne.Integer,converter:an})],yh.prototype,"serialNumber",void 0);let Ku=class{constructor(e={}){Object.assign(this,e)}};L([H({type:Do,context:0,implicit:!0})],Ku.prototype,"subjectKeyIdentifier",void 0);L([H({type:yh})],Ku.prototype,"issuerAndSerialNumber",void 0);Ku=L([Ee({type:_e.Choice})],Ku);var Aa;(function(t){t[t.v0=0]="v0",t[t.v1=1]="v1",t[t.v2=2]="v2",t[t.v3=3]="v3",t[t.v4=4]="v4",t[t.v5=5]="v5"})(Aa||(Aa={}));let hp=class extends $e{};hp=L([Ee({type:_e.Sequence})],hp);let yy=class extends $e{};yy=L([Ee({type:_e.Sequence})],yy);let zi=class extends $e{};zi=L([Ee({type:_e.Sequence})],zi);let vy=class extends $e{};vy=L([Ee({type:_e.Sequence})],vy);let tT=class extends $e{};tT=L([Ee({type:_e.Sequence})],tT);let TS=class extends $e{};TS=L([Ee({type:_e.Sequence})],TS);let vh=class{constructor(e={}){this.attrType="",this.attrValues=[],Object.assign(this,e)}};L([H({type:ne.ObjectIdentifier})],vh.prototype,"attrType",void 0);L([H({type:ne.Any,repeated:"set"})],vh.prototype,"attrValues",void 0);var RS;class Wi{constructor(e={}){this.version=Aa.v0,this.sid=new Ku,this.digestAlgorithm=new hp,this.signatureAlgorithm=new yy,this.signature=new Bt,Object.assign(this,e)}}L([H({type:ne.Integer})],Wi.prototype,"version",void 0);L([H({type:Ku})],Wi.prototype,"sid",void 0);L([H({type:hp})],Wi.prototype,"digestAlgorithm",void 0);L([H({type:vh,repeated:"set",context:0,implicit:!0,optional:!0,raw:!0})],Wi.prototype,"signedAttrs",void 0);L([H({type:yy})],Wi.prototype,"signatureAlgorithm",void 0);L([H({type:Bt})],Wi.prototype,"signature",void 0);L([H({type:vh,repeated:"set",context:1,implicit:!0,optional:!0})],Wi.prototype,"unsignedAttrs",void 0);let by=RS=class extends Ut{constructor(e){super(e),Object.setPrototypeOf(this,RS.prototype)}};by=RS=L([Ee({type:_e.Set,itemType:Wi})],by);let nT=class extends Wi{};nT=L([Ee({type:_e.Sequence})],nT);let sT=class extends fs{};sT=L([Ee({type:_e.Choice})],sT);class PC{constructor(e={}){this.acIssuer=new mt,this.acSerial=0,this.attrs=[],Object.assign(this,e)}}L([H({type:mt})],PC.prototype,"acIssuer",void 0);L([H({type:ne.Integer})],PC.prototype,"acSerial",void 0);L([H({type:Ea,repeated:"sequence"})],PC.prototype,"attrs",void 0);var OS;let _y=OS=class extends Ut{constructor(e){super(e),Object.setPrototypeOf(this,OS.prototype)}};_y=OS=L([Ee({type:_e.Sequence,itemType:ne.ObjectIdentifier})],_y);class Wv{constructor(e={}){this.permitUnSpecified=!0,Object.assign(this,e)}}L([H({type:ne.Integer,optional:!0})],Wv.prototype,"pathLenConstraint",void 0);L([H({type:_y,implicit:!0,context:0,optional:!0})],Wv.prototype,"permittedAttrs",void 0);L([H({type:_y,implicit:!0,context:1,optional:!0})],Wv.prototype,"excludedAttrs",void 0);L([H({type:ne.Boolean,defaultValue:!0})],Wv.prototype,"permitUnSpecified",void 0);class hc{constructor(e={}){this.issuer=new Cs,this.serial=new ArrayBuffer(0),this.issuerUID=new ArrayBuffer(0),Object.assign(this,e)}}L([H({type:Cs})],hc.prototype,"issuer",void 0);L([H({type:ne.Integer,converter:an})],hc.prototype,"serial",void 0);L([H({type:ne.BitString,optional:!0})],hc.prototype,"issuerUID",void 0);var MS;(function(t){t[t.publicKey=0]="publicKey",t[t.publicKeyCert=1]="publicKeyCert",t[t.otherObjectTypes=2]="otherObjectTypes"})(MS||(MS={}));class dc{constructor(e={}){this.digestedObjectType=MS.publicKey,this.digestAlgorithm=new $e,this.objectDigest=new ArrayBuffer(0),Object.assign(this,e)}}L([H({type:ne.Enumerated})],dc.prototype,"digestedObjectType",void 0);L([H({type:ne.ObjectIdentifier,optional:!0})],dc.prototype,"otherObjectTypeID",void 0);L([H({type:$e})],dc.prototype,"digestAlgorithm",void 0);L([H({type:ne.BitString})],dc.prototype,"objectDigest",void 0);class Gv{constructor(e={}){Object.assign(this,e)}}L([H({type:Cs,optional:!0})],Gv.prototype,"issuerName",void 0);L([H({type:hc,context:0,implicit:!0,optional:!0})],Gv.prototype,"baseCertificateID",void 0);L([H({type:dc,context:1,implicit:!0,optional:!0})],Gv.prototype,"objectDigestInfo",void 0);let Wu=class{constructor(e={}){Object.assign(this,e)}};L([H({type:mt,repeated:"sequence"})],Wu.prototype,"v1Form",void 0);L([H({type:Gv,context:0,implicit:!0})],Wu.prototype,"v2Form",void 0);Wu=L([Ee({type:_e.Choice})],Wu);class Yv{constructor(e={}){this.notBeforeTime=new Date,this.notAfterTime=new Date,Object.assign(this,e)}}L([H({type:ne.GeneralizedTime})],Yv.prototype,"notBeforeTime",void 0);L([H({type:ne.GeneralizedTime})],Yv.prototype,"notAfterTime",void 0);class zp{constructor(e={}){Object.assign(this,e)}}L([H({type:hc,implicit:!0,context:0,optional:!0})],zp.prototype,"baseCertificateID",void 0);L([H({type:Cs,implicit:!0,context:1,optional:!0})],zp.prototype,"entityName",void 0);L([H({type:dc,implicit:!0,context:2,optional:!0})],zp.prototype,"objectDigestInfo",void 0);var DS;(function(t){t[t.v2=1]="v2"})(DS||(DS={}));class bi{constructor(e={}){this.version=DS.v2,this.holder=new zp,this.issuer=new Wu,this.signature=new $e,this.serialNumber=new ArrayBuffer(0),this.attrCertValidityPeriod=new Yv,this.attributes=[],Object.assign(this,e)}}L([H({type:ne.Integer})],bi.prototype,"version",void 0);L([H({type:zp})],bi.prototype,"holder",void 0);L([H({type:Wu})],bi.prototype,"issuer",void 0);L([H({type:$e})],bi.prototype,"signature",void 0);L([H({type:ne.Integer,converter:an})],bi.prototype,"serialNumber",void 0);L([H({type:Yv})],bi.prototype,"attrCertValidityPeriod",void 0);L([H({type:Ea,repeated:"sequence"})],bi.prototype,"attributes",void 0);L([H({type:ne.BitString,optional:!0})],bi.prototype,"issuerUniqueID",void 0);L([H({type:Wl,optional:!0})],bi.prototype,"extensions",void 0);class Zv{constructor(e={}){this.acinfo=new bi,this.signatureAlgorithm=new $e,this.signatureValue=new ArrayBuffer(0),Object.assign(this,e)}}L([H({type:bi})],Zv.prototype,"acinfo",void 0);L([H({type:$e})],Zv.prototype,"signatureAlgorithm",void 0);L([H({type:ne.BitString})],Zv.prototype,"signatureValue",void 0);var xy;(function(t){t[t.unmarked=1]="unmarked",t[t.unclassified=2]="unclassified",t[t.restricted=4]="restricted",t[t.confidential=8]="confidential",t[t.secret=16]="secret",t[t.topSecret=32]="topSecret"})(xy||(xy={}));class BS extends zv{}class $C{constructor(e={}){this.type="",this.value=new ArrayBuffer(0),Object.assign(this,e)}}L([H({type:ne.ObjectIdentifier,implicit:!0,context:0})],$C.prototype,"type",void 0);L([H({type:ne.Any,implicit:!0,context:1})],$C.prototype,"value",void 0);class zC{constructor(e={}){this.policyId="",this.classList=new BS(xy.unclassified),Object.assign(this,e)}}L([H({type:ne.ObjectIdentifier})],zC.prototype,"policyId",void 0);L([H({type:BS,defaultValue:new BS(xy.unclassified)})],zC.prototype,"classList",void 0);L([H({type:$C,repeated:"set"})],zC.prototype,"securityCategories",void 0);class Xv{constructor(e={}){Object.assign(this,e)}}L([H({type:Bt})],Xv.prototype,"cotets",void 0);L([H({type:ne.ObjectIdentifier})],Xv.prototype,"oid",void 0);L([H({type:ne.Utf8String})],Xv.prototype,"string",void 0);class UB{constructor(e={}){this.values=[],Object.assign(this,e)}}L([H({type:Cs,implicit:!0,context:0,optional:!0})],UB.prototype,"policyAuthority",void 0);L([H({type:Xv,repeated:"sequence"})],UB.prototype,"values",void 0);var LS;class Jv{constructor(e={}){this.targetCertificate=new hc,Object.assign(this,e)}}L([H({type:hc})],Jv.prototype,"targetCertificate",void 0);L([H({type:mt,optional:!0})],Jv.prototype,"targetName",void 0);L([H({type:dc,optional:!0})],Jv.prototype,"certDigestInfo",void 0);let Gu=class{constructor(e={}){Object.assign(this,e)}};L([H({type:mt,context:0,implicit:!0})],Gu.prototype,"targetName",void 0);L([H({type:mt,context:1,implicit:!0})],Gu.prototype,"targetGroup",void 0);L([H({type:Jv,context:2,implicit:!0})],Gu.prototype,"targetCert",void 0);Gu=L([Ee({type:_e.Choice})],Gu);let IS=LS=class extends Ut{constructor(e){super(e),Object.setPrototypeOf(this,LS.prototype)}};IS=LS=L([Ee({type:_e.Sequence,itemType:Gu})],IS);var PS;let rT=PS=class extends Ut{constructor(e){super(e),Object.setPrototypeOf(this,PS.prototype)}};rT=PS=L([Ee({type:_e.Sequence,itemType:IS})],rT);class HB{constructor(e={}){Object.assign(this,e)}}L([H({type:Cs,implicit:!0,context:0,optional:!0})],HB.prototype,"roleAuthority",void 0);L([H({type:mt,implicit:!0,context:1})],HB.prototype,"roleName",void 0);class UC{constructor(e={}){this.service=new mt,this.ident=new mt,Object.assign(this,e)}}L([H({type:mt})],UC.prototype,"service",void 0);L([H({type:mt})],UC.prototype,"ident",void 0);L([H({type:Bt,optional:!0})],UC.prototype,"authInfo",void 0);var $S;class HC{constructor(e={}){this.otherCertFormat="",this.otherCert=new ArrayBuffer(0),Object.assign(this,e)}}L([H({type:ne.ObjectIdentifier})],HC.prototype,"otherCertFormat",void 0);L([H({type:ne.Any})],HC.prototype,"otherCert",void 0);let Yu=class{constructor(e={}){Object.assign(this,e)}};L([H({type:qu})],Yu.prototype,"certificate",void 0);L([H({type:Zv,context:2,implicit:!0})],Yu.prototype,"v2AttrCert",void 0);L([H({type:HC,context:3,implicit:!0})],Yu.prototype,"other",void 0);Yu=L([Ee({type:_e.Choice})],Yu);let wy=$S=class extends Ut{constructor(e){super(e),Object.setPrototypeOf(this,$S.prototype)}};wy=$S=L([Ee({type:_e.Set,itemType:Yu})],wy);class bh{constructor(e={}){this.contentType="",this.content=new ArrayBuffer(0),Object.assign(this,e)}}L([H({type:ne.ObjectIdentifier})],bh.prototype,"contentType",void 0);L([H({type:ne.Any,context:0})],bh.prototype,"content",void 0);let dp=class{constructor(e={}){Object.assign(this,e)}};L([H({type:Bt})],dp.prototype,"single",void 0);L([H({type:ne.Any})],dp.prototype,"any",void 0);dp=L([Ee({type:_e.Choice})],dp);class Qv{constructor(e={}){this.eContentType="",Object.assign(this,e)}}L([H({type:ne.ObjectIdentifier})],Qv.prototype,"eContentType",void 0);L([H({type:dp,context:0,optional:!0})],Qv.prototype,"eContent",void 0);let fp=class{constructor(e={}){Object.assign(this,e)}};L([H({type:Bt,context:0,implicit:!0,optional:!0})],fp.prototype,"value",void 0);L([H({type:Bt,converter:uX,context:0,implicit:!0,optional:!0,repeated:"sequence"})],fp.prototype,"constructedValue",void 0);fp=L([Ee({type:_e.Choice})],fp);class Up{constructor(e={}){this.contentType="",this.contentEncryptionAlgorithm=new vy,Object.assign(this,e)}}L([H({type:ne.ObjectIdentifier})],Up.prototype,"contentType",void 0);L([H({type:vy})],Up.prototype,"contentEncryptionAlgorithm",void 0);L([H({type:fp,optional:!0})],Up.prototype,"encryptedContent",void 0);class eb{constructor(e={}){this.keyAttrId="",Object.assign(this,e)}}L([H({type:ne.ObjectIdentifier})],eb.prototype,"keyAttrId",void 0);L([H({type:ne.Any,optional:!0})],eb.prototype,"keyAttr",void 0);var zS;class tb{constructor(e={}){this.subjectKeyIdentifier=new Do,Object.assign(this,e)}}L([H({type:Do})],tb.prototype,"subjectKeyIdentifier",void 0);L([H({type:ne.GeneralizedTime,optional:!0})],tb.prototype,"date",void 0);L([H({type:eb,optional:!0})],tb.prototype,"other",void 0);let Zu=class{constructor(e={}){Object.assign(this,e)}};L([H({type:tb,context:0,implicit:!0,optional:!0})],Zu.prototype,"rKeyId",void 0);L([H({type:yh,optional:!0})],Zu.prototype,"issuerAndSerialNumber",void 0);Zu=L([Ee({type:_e.Choice})],Zu);class FC{constructor(e={}){this.rid=new Zu,this.encryptedKey=new Bt,Object.assign(this,e)}}L([H({type:Zu})],FC.prototype,"rid",void 0);L([H({type:Bt})],FC.prototype,"encryptedKey",void 0);let Sy=zS=class extends Ut{constructor(e){super(e),Object.setPrototypeOf(this,zS.prototype)}};Sy=zS=L([Ee({type:_e.Sequence,itemType:FC})],Sy);class VC{constructor(e={}){this.algorithm=new $e,this.publicKey=new ArrayBuffer(0),Object.assign(this,e)}}L([H({type:$e})],VC.prototype,"algorithm",void 0);L([H({type:ne.BitString})],VC.prototype,"publicKey",void 0);let Gl=class{constructor(e={}){Object.assign(this,e)}};L([H({type:Do,context:0,implicit:!0,optional:!0})],Gl.prototype,"subjectKeyIdentifier",void 0);L([H({type:VC,context:1,implicit:!0,optional:!0})],Gl.prototype,"originatorKey",void 0);L([H({type:yh,optional:!0})],Gl.prototype,"issuerAndSerialNumber",void 0);Gl=L([Ee({type:_e.Choice})],Gl);class _h{constructor(e={}){this.version=Aa.v3,this.originator=new Gl,this.keyEncryptionAlgorithm=new zi,this.recipientEncryptedKeys=new Sy,Object.assign(this,e)}}L([H({type:ne.Integer})],_h.prototype,"version",void 0);L([H({type:Gl,context:0})],_h.prototype,"originator",void 0);L([H({type:Bt,context:1,optional:!0})],_h.prototype,"ukm",void 0);L([H({type:zi})],_h.prototype,"keyEncryptionAlgorithm",void 0);L([H({type:Sy})],_h.prototype,"recipientEncryptedKeys",void 0);let Xu=class{constructor(e={}){Object.assign(this,e)}};L([H({type:Do,context:0,implicit:!0})],Xu.prototype,"subjectKeyIdentifier",void 0);L([H({type:yh})],Xu.prototype,"issuerAndSerialNumber",void 0);Xu=L([Ee({type:_e.Choice})],Xu);class Hp{constructor(e={}){this.version=Aa.v0,this.rid=new Xu,this.keyEncryptionAlgorithm=new zi,this.encryptedKey=new Bt,Object.assign(this,e)}}L([H({type:ne.Integer})],Hp.prototype,"version",void 0);L([H({type:Xu})],Hp.prototype,"rid",void 0);L([H({type:zi})],Hp.prototype,"keyEncryptionAlgorithm",void 0);L([H({type:Bt})],Hp.prototype,"encryptedKey",void 0);class Fp{constructor(e={}){this.keyIdentifier=new Bt,Object.assign(this,e)}}L([H({type:Bt})],Fp.prototype,"keyIdentifier",void 0);L([H({type:ne.GeneralizedTime,optional:!0})],Fp.prototype,"date",void 0);L([H({type:eb,optional:!0})],Fp.prototype,"other",void 0);class Vp{constructor(e={}){this.version=Aa.v4,this.kekid=new Fp,this.keyEncryptionAlgorithm=new zi,this.encryptedKey=new Bt,Object.assign(this,e)}}L([H({type:ne.Integer})],Vp.prototype,"version",void 0);L([H({type:Fp})],Vp.prototype,"kekid",void 0);L([H({type:zi})],Vp.prototype,"keyEncryptionAlgorithm",void 0);L([H({type:Bt})],Vp.prototype,"encryptedKey",void 0);class qp{constructor(e={}){this.version=Aa.v0,this.keyEncryptionAlgorithm=new zi,this.encryptedKey=new Bt,Object.assign(this,e)}}L([H({type:ne.Integer})],qp.prototype,"version",void 0);L([H({type:TS,context:0,optional:!0})],qp.prototype,"keyDerivationAlgorithm",void 0);L([H({type:zi})],qp.prototype,"keyEncryptionAlgorithm",void 0);L([H({type:Bt})],qp.prototype,"encryptedKey",void 0);class qC{constructor(e={}){this.oriType="",this.oriValue=new ArrayBuffer(0),Object.assign(this,e)}}L([H({type:ne.ObjectIdentifier})],qC.prototype,"oriType",void 0);L([H({type:ne.Any})],qC.prototype,"oriValue",void 0);let zo=class{constructor(e={}){Object.assign(this,e)}};L([H({type:Hp,optional:!0})],zo.prototype,"ktri",void 0);L([H({type:_h,context:1,implicit:!0,optional:!0})],zo.prototype,"kari",void 0);L([H({type:Vp,context:2,implicit:!0,optional:!0})],zo.prototype,"kekri",void 0);L([H({type:qp,context:3,implicit:!0,optional:!0})],zo.prototype,"pwri",void 0);L([H({type:qC,context:4,implicit:!0,optional:!0})],zo.prototype,"ori",void 0);zo=L([Ee({type:_e.Choice})],zo);var US;let ky=US=class extends Ut{constructor(e){super(e),Object.setPrototypeOf(this,US.prototype)}};ky=US=L([Ee({type:_e.Set,itemType:zo})],ky);var HS;class nb{constructor(e={}){this.otherRevInfoFormat="",this.otherRevInfo=new ArrayBuffer(0),Object.assign(this,e)}}L([H({type:ne.ObjectIdentifier})],nb.prototype,"otherRevInfoFormat",void 0);L([H({type:ne.Any})],nb.prototype,"otherRevInfo",void 0);let Cy=class{constructor(e={}){this.other=new nb,Object.assign(this,e)}};L([H({type:nb,context:1,implicit:!0})],Cy.prototype,"other",void 0);Cy=L([Ee({type:_e.Choice})],Cy);let Ny=HS=class extends Ut{constructor(e){super(e),Object.setPrototypeOf(this,HS.prototype)}};Ny=HS=L([Ee({type:_e.Set,itemType:Cy})],Ny);class KC{constructor(e={}){Object.assign(this,e)}}L([H({type:wy,context:0,implicit:!0,optional:!0})],KC.prototype,"certs",void 0);L([H({type:Ny,context:1,implicit:!0,optional:!0})],KC.prototype,"crls",void 0);var FS;let VS=FS=class extends Ut{constructor(e){super(e),Object.setPrototypeOf(this,FS.prototype)}};VS=FS=L([Ee({type:_e.Set,itemType:vh})],VS);class Kp{constructor(e={}){this.version=Aa.v0,this.recipientInfos=new ky,this.encryptedContentInfo=new Up,Object.assign(this,e)}}L([H({type:ne.Integer})],Kp.prototype,"version",void 0);L([H({type:KC,context:0,implicit:!0,optional:!0})],Kp.prototype,"originatorInfo",void 0);L([H({type:ky})],Kp.prototype,"recipientInfos",void 0);L([H({type:Up})],Kp.prototype,"encryptedContentInfo",void 0);L([H({type:VS,context:1,implicit:!0,optional:!0})],Kp.prototype,"unprotectedAttrs",void 0);const LX="1.2.840.113549.1.7.2";var qS;let Ey=qS=class extends Ut{constructor(e){super(e),Object.setPrototypeOf(this,qS.prototype)}};Ey=qS=L([Ee({type:_e.Set,itemType:hp})],Ey);class xh{constructor(e={}){this.version=Aa.v0,this.digestAlgorithms=new Ey,this.encapContentInfo=new Qv,this.signerInfos=new by,Object.assign(this,e)}}L([H({type:ne.Integer})],xh.prototype,"version",void 0);L([H({type:Ey})],xh.prototype,"digestAlgorithms",void 0);L([H({type:Qv})],xh.prototype,"encapContentInfo",void 0);L([H({type:wy,context:0,implicit:!0,optional:!0})],xh.prototype,"certificates",void 0);L([H({type:Ny,context:1,implicit:!0,optional:!0})],xh.prototype,"crls",void 0);L([H({type:by})],xh.prototype,"signerInfos",void 0);const pp="1.2.840.10045.2.1",WC="1.2.840.10045.4.1",FB="1.2.840.10045.4.3.1",GC="1.2.840.10045.4.3.2",YC="1.2.840.10045.4.3.3",ZC="1.2.840.10045.4.3.4",iT="1.2.840.10045.3.1.7",aT="1.3.132.0.34",oT="1.3.132.0.35";function Wp(t){return new $e({algorithm:t})}const IX=Wp(WC);Wp(FB);const PX=Wp(GC),$X=Wp(YC),zX=Wp(ZC);let mp=class{constructor(e={}){Object.assign(this,e)}};L([H({type:ne.ObjectIdentifier})],mp.prototype,"fieldType",void 0);L([H({type:ne.Any})],mp.prototype,"parameters",void 0);mp=L([Ee({type:_e.Sequence})],mp);class UX extends Bt{}let Ju=class{constructor(e={}){Object.assign(this,e)}};L([H({type:ne.OctetString})],Ju.prototype,"a",void 0);L([H({type:ne.OctetString})],Ju.prototype,"b",void 0);L([H({type:ne.BitString,optional:!0})],Ju.prototype,"seed",void 0);Ju=L([Ee({type:_e.Sequence})],Ju);var KS;(function(t){t[t.ecpVer1=1]="ecpVer1"})(KS||(KS={}));let ja=class{constructor(e={}){this.version=KS.ecpVer1,Object.assign(this,e)}};L([H({type:ne.Integer})],ja.prototype,"version",void 0);L([H({type:mp})],ja.prototype,"fieldID",void 0);L([H({type:Ju})],ja.prototype,"curve",void 0);L([H({type:UX})],ja.prototype,"base",void 0);L([H({type:ne.Integer,converter:an})],ja.prototype,"order",void 0);L([H({type:ne.Integer,optional:!0})],ja.prototype,"cofactor",void 0);ja=L([Ee({type:_e.Sequence})],ja);let Uo=class{constructor(e={}){Object.assign(this,e)}};L([H({type:ne.ObjectIdentifier})],Uo.prototype,"namedCurve",void 0);L([H({type:ne.Null})],Uo.prototype,"implicitCurve",void 0);L([H({type:ja})],Uo.prototype,"specifiedCurve",void 0);Uo=L([Ee({type:_e.Choice})],Uo);class sb{constructor(e={}){this.version=1,this.privateKey=new Bt,Object.assign(this,e)}}L([H({type:ne.Integer})],sb.prototype,"version",void 0);L([H({type:Bt})],sb.prototype,"privateKey",void 0);L([H({type:Uo,context:0,optional:!0})],sb.prototype,"parameters",void 0);L([H({type:ne.BitString,context:1,optional:!0})],sb.prototype,"publicKey",void 0);class Ay{constructor(e={}){this.r=new ArrayBuffer(0),this.s=new ArrayBuffer(0),Object.assign(this,e)}}L([H({type:ne.Integer,converter:an})],Ay.prototype,"r",void 0);L([H({type:ne.Integer,converter:an})],Ay.prototype,"s",void 0);const sr="1.2.840.113549.1.1",Yl=`${sr}.1`,HX=`${sr}.7`,FX=`${sr}.9`,zf=`${sr}.10`,VX=`${sr}.2`,qX=`${sr}.4`,jy=`${sr}.5`,KX=`${sr}.14`,WS=`${sr}.11`,Ty=`${sr}.12`,Ry=`${sr}.13`,VB=`${sr}.15`,qB=`${sr}.16`,Oy="1.3.14.3.2.26",KB="2.16.840.1.101.3.4.2.4",My="2.16.840.1.101.3.4.2.1",Dy="2.16.840.1.101.3.4.2.2",By="2.16.840.1.101.3.4.2.3",WX="2.16.840.1.101.3.4.2.5",GX="2.16.840.1.101.3.4.2.6",YX="1.2.840.113549.2.2",ZX="1.2.840.113549.2.5",rb=`${sr}.8`;function Gn(t){return new $e({algorithm:t,parameters:null})}Gn(YX);Gn(ZX);const Zl=Gn(Oy);Gn(KB);Gn(My);Gn(Dy);Gn(By);Gn(WX);Gn(GX);const WB=new $e({algorithm:rb,parameters:Be.serialize(Zl)}),GB=new $e({algorithm:FX,parameters:Be.serialize(uy.toASN(new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer))});Gn(Yl);Gn(VX);Gn(qX);Gn(jy);Gn(VB);Gn(qB);Gn(Ty);Gn(Ry);Gn(VB);Gn(qB);class ib{constructor(e={}){this.hashAlgorithm=new $e(Zl),this.maskGenAlgorithm=new $e({algorithm:rb,parameters:Be.serialize(Zl)}),this.pSourceAlgorithm=new $e(GB),Object.assign(this,e)}}L([H({type:$e,context:0,defaultValue:Zl})],ib.prototype,"hashAlgorithm",void 0);L([H({type:$e,context:1,defaultValue:WB})],ib.prototype,"maskGenAlgorithm",void 0);L([H({type:$e,context:2,defaultValue:GB})],ib.prototype,"pSourceAlgorithm",void 0);new $e({algorithm:HX,parameters:Be.serialize(new ib)});class Xl{constructor(e={}){this.hashAlgorithm=new $e(Zl),this.maskGenAlgorithm=new $e({algorithm:rb,parameters:Be.serialize(Zl)}),this.saltLength=20,this.trailerField=1,Object.assign(this,e)}}L([H({type:$e,context:0,defaultValue:Zl})],Xl.prototype,"hashAlgorithm",void 0);L([H({type:$e,context:1,defaultValue:WB})],Xl.prototype,"maskGenAlgorithm",void 0);L([H({type:ne.Integer,context:2,defaultValue:20})],Xl.prototype,"saltLength",void 0);L([H({type:ne.Integer,context:3,defaultValue:1})],Xl.prototype,"trailerField",void 0);new $e({algorithm:zf,parameters:Be.serialize(new Xl)});class ab{constructor(e={}){this.digestAlgorithm=new $e,this.digest=new Bt,Object.assign(this,e)}}L([H({type:$e})],ab.prototype,"digestAlgorithm",void 0);L([H({type:Bt})],ab.prototype,"digest",void 0);var GS;class ob{constructor(e={}){this.prime=new ArrayBuffer(0),this.exponent=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0),Object.assign(this,e)}}L([H({type:ne.Integer,converter:an})],ob.prototype,"prime",void 0);L([H({type:ne.Integer,converter:an})],ob.prototype,"exponent",void 0);L([H({type:ne.Integer,converter:an})],ob.prototype,"coefficient",void 0);let YS=GS=class extends Ut{constructor(e){super(e),Object.setPrototypeOf(this,GS.prototype)}};YS=GS=L([Ee({type:_e.Sequence,itemType:ob})],YS);class Gi{constructor(e={}){this.version=0,this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),this.privateExponent=new ArrayBuffer(0),this.prime1=new ArrayBuffer(0),this.prime2=new ArrayBuffer(0),this.exponent1=new ArrayBuffer(0),this.exponent2=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0),Object.assign(this,e)}}L([H({type:ne.Integer})],Gi.prototype,"version",void 0);L([H({type:ne.Integer,converter:an})],Gi.prototype,"modulus",void 0);L([H({type:ne.Integer,converter:an})],Gi.prototype,"publicExponent",void 0);L([H({type:ne.Integer,converter:an})],Gi.prototype,"privateExponent",void 0);L([H({type:ne.Integer,converter:an})],Gi.prototype,"prime1",void 0);L([H({type:ne.Integer,converter:an})],Gi.prototype,"prime2",void 0);L([H({type:ne.Integer,converter:an})],Gi.prototype,"exponent1",void 0);L([H({type:ne.Integer,converter:an})],Gi.prototype,"exponent2",void 0);L([H({type:ne.Integer,converter:an})],Gi.prototype,"coefficient",void 0);L([H({type:YS,optional:!0})],Gi.prototype,"otherPrimeInfos",void 0);class XC{constructor(e={}){this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),Object.assign(this,e)}}L([H({type:ne.Integer,converter:an})],XC.prototype,"modulus",void 0);L([H({type:ne.Integer,converter:an})],XC.prototype,"publicExponent",void 0);var ZS;(function(t){t[t.Transient=0]="Transient",t[t.Singleton=1]="Singleton",t[t.ResolutionScoped=2]="ResolutionScoped",t[t.ContainerScoped=3]="ContainerScoped"})(ZS||(ZS={}));const Ys=ZS;var XS=function(t,e){return XS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var r in s)s.hasOwnProperty(r)&&(n[r]=s[r])},XS(t,e)};function JC(t,e){XS(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function XX(t,e,n,s){function r(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function c(m){try{h(s.next(m))}catch(p){o(p)}}function u(m){try{h(s.throw(m))}catch(p){o(p)}}function h(m){m.done?i(m.value):r(m.value).then(c,u)}h((s=s.apply(t,[])).next())})}function JX(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},s,r,i,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(h){return function(m){return u([h,m])}}function u(h){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,r&&(i=h[0]&2?r.return:h[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,h[1])).done)return i;switch(r=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,r=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){n.label=h[1];break}if(h[0]===6&&n.label<i[1]){n.label=i[1],i=h;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(h);break}i[2]&&n.ops.pop(),n.trys.pop();continue}h=e.call(t,n)}catch(m){h=[6,m],r=0}finally{s=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function Pg(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ly(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),r,i=[],o;try{for(;(e===void 0||e-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return i}function bl(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ly(arguments[e]));return t}var QX="injectionTokens";function eJ(t){var e=Reflect.getMetadata("design:paramtypes",t)||[],n=Reflect.getOwnMetadata(QX,t)||{};return Object.keys(n).forEach(function(s){e[+s]=n[s]}),e}function YB(t){return!!t.useClass}function JS(t){return!!t.useFactory}var ZB=(function(){function t(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return t.prototype.createProxy=function(e){var n=this,s={},r=!1,i,o=function(){return r||(i=e(n.wrap()),r=!0),i};return new Proxy(s,this.createHandler(o))},t.prototype.createHandler=function(e){var n={},s=function(r){n[r]=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];i[0]=e();var c=Reflect[r];return c.apply(void 0,bl(i))}};return this.reflectMethods.forEach(s),n},t})();function su(t){return typeof t=="string"||typeof t=="symbol"}function tJ(t){return typeof t=="object"&&"token"in t&&"multiple"in t}function lT(t){return typeof t=="object"&&"token"in t&&"transform"in t}function nJ(t){return typeof t=="function"||t instanceof ZB}function g0(t){return!!t.useToken}function y0(t){return t.useValue!=null}function sJ(t){return YB(t)||y0(t)||g0(t)||JS(t)}var QC=(function(){function t(){this._registryMap=new Map}return t.prototype.entries=function(){return this._registryMap.entries()},t.prototype.getAll=function(e){return this.ensure(e),this._registryMap.get(e)},t.prototype.get=function(e){this.ensure(e);var n=this._registryMap.get(e);return n[n.length-1]||null},t.prototype.set=function(e,n){this.ensure(e),this._registryMap.get(e).push(n)},t.prototype.setAll=function(e,n){this._registryMap.set(e,n)},t.prototype.has=function(e){return this.ensure(e),this._registryMap.get(e).length>0},t.prototype.clear=function(){this._registryMap.clear()},t.prototype.ensure=function(e){this._registryMap.has(e)||this._registryMap.set(e,[])},t})(),rJ=(function(t){JC(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(QC),$g=(function(){function t(){this.scopedResolutions=new Map}return t})();function iJ(t,e){if(t===null)return"at position #"+e;var n=t.split(",")[e].trim();return'"'+n+'" at position #'+e}function aJ(t,e,n){return n===void 0&&(n="    "),bl([t],e.message.split(`
`).map(function(s){return n+s})).join(`
`)}function oJ(t,e,n){var s=Ly(t.toString().match(/constructor\(([\w, ]+)\)/)||[],2),r=s[1],i=r===void 0?null:r,o=iJ(i,e);return aJ("Cannot inject the dependency "+o+' of "'+t.name+'" constructor. Reason:',n)}function lJ(t){if(typeof t.dispose!="function")return!1;var e=t.dispose;return!(e.length>0)}var cJ=(function(t){JC(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(QC),uJ=(function(t){JC(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(QC),hJ=(function(){function t(){this.preResolution=new cJ,this.postResolution=new uJ}return t})(),XB=new Map,dJ=(function(){function t(e){this.parent=e,this._registry=new rJ,this.interceptors=new hJ,this.disposed=!1,this.disposables=new Set}return t.prototype.register=function(e,n,s){s===void 0&&(s={lifecycle:Ys.Transient}),this.ensureNotDisposed();var r;if(sJ(n)?r=n:r={useClass:n},g0(r))for(var i=[e],o=r;o!=null;){var c=o.useToken;if(i.includes(c))throw new Error("Token registration cycle detected! "+bl(i,[c]).join(" -> "));i.push(c);var u=this._registry.get(c);u&&g0(u.provider)?o=u.provider:o=null}if((s.lifecycle===Ys.Singleton||s.lifecycle==Ys.ContainerScoped||s.lifecycle==Ys.ResolutionScoped)&&(y0(r)||JS(r)))throw new Error('Cannot use lifecycle "'+Ys[s.lifecycle]+'" with ValueProviders or FactoryProviders');return this._registry.set(e,{provider:r,options:s}),this},t.prototype.registerType=function(e,n){return this.ensureNotDisposed(),su(n)?this.register(e,{useToken:n}):this.register(e,{useClass:n})},t.prototype.registerInstance=function(e,n){return this.ensureNotDisposed(),this.register(e,{useValue:n})},t.prototype.registerSingleton=function(e,n){if(this.ensureNotDisposed(),su(e)){if(su(n))return this.register(e,{useToken:n},{lifecycle:Ys.Singleton});if(n)return this.register(e,{useClass:n},{lifecycle:Ys.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var s=e;return n&&!su(n)&&(s=n),this.register(e,{useClass:s},{lifecycle:Ys.Singleton})},t.prototype.resolve=function(e,n,s){n===void 0&&(n=new $g),s===void 0&&(s=!1),this.ensureNotDisposed();var r=this.getRegistration(e);if(!r&&su(e)){if(s)return;throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"')}if(this.executePreResolutionInterceptor(e,"Single"),r){var i=this.resolveRegistration(r,n);return this.executePostResolutionInterceptor(e,i,"Single"),i}if(nJ(e)){var i=this.construct(e,n);return this.executePostResolutionInterceptor(e,i,"Single"),i}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},t.prototype.executePreResolutionInterceptor=function(e,n){var s,r;if(this.interceptors.preResolution.has(e)){var i=[];try{for(var o=Pg(this.interceptors.preResolution.getAll(e)),c=o.next();!c.done;c=o.next()){var u=c.value;u.options.frequency!="Once"&&i.push(u),u.callback(e,n)}}catch(h){s={error:h}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(s)throw s.error}}this.interceptors.preResolution.setAll(e,i)}},t.prototype.executePostResolutionInterceptor=function(e,n,s){var r,i;if(this.interceptors.postResolution.has(e)){var o=[];try{for(var c=Pg(this.interceptors.postResolution.getAll(e)),u=c.next();!u.done;u=c.next()){var h=u.value;h.options.frequency!="Once"&&o.push(h),h.callback(e,n,s)}}catch(m){r={error:m}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}this.interceptors.postResolution.setAll(e,o)}},t.prototype.resolveRegistration=function(e,n){if(this.ensureNotDisposed(),e.options.lifecycle===Ys.ResolutionScoped&&n.scopedResolutions.has(e))return n.scopedResolutions.get(e);var s=e.options.lifecycle===Ys.Singleton,r=e.options.lifecycle===Ys.ContainerScoped,i=s||r,o;return y0(e.provider)?o=e.provider.useValue:g0(e.provider)?o=i?e.instance||(e.instance=this.resolve(e.provider.useToken,n)):this.resolve(e.provider.useToken,n):YB(e.provider)?o=i?e.instance||(e.instance=this.construct(e.provider.useClass,n)):this.construct(e.provider.useClass,n):JS(e.provider)?o=e.provider.useFactory(this):o=this.construct(e.provider,n),e.options.lifecycle===Ys.ResolutionScoped&&n.scopedResolutions.set(e,o),o},t.prototype.resolveAll=function(e,n,s){var r=this;n===void 0&&(n=new $g),s===void 0&&(s=!1),this.ensureNotDisposed();var i=this.getAllRegistrations(e);if(!i&&su(e)){if(s)return[];throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"')}if(this.executePreResolutionInterceptor(e,"All"),i){var o=i.map(function(u){return r.resolveRegistration(u,n)});return this.executePostResolutionInterceptor(e,o,"All"),o}var c=[this.construct(e,n)];return this.executePostResolutionInterceptor(e,c,"All"),c},t.prototype.isRegistered=function(e,n){return n===void 0&&(n=!1),this.ensureNotDisposed(),this._registry.has(e)||n&&(this.parent||!1)&&this.parent.isRegistered(e,!0)},t.prototype.reset=function(){this.ensureNotDisposed(),this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},t.prototype.clearInstances=function(){var e,n;this.ensureNotDisposed();try{for(var s=Pg(this._registry.entries()),r=s.next();!r.done;r=s.next()){var i=Ly(r.value,2),o=i[0],c=i[1];this._registry.setAll(o,c.filter(function(u){return!y0(u.provider)}).map(function(u){return u.instance=void 0,u}))}}catch(u){e={error:u}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}},t.prototype.createChildContainer=function(){var e,n;this.ensureNotDisposed();var s=new t(this);try{for(var r=Pg(this._registry.entries()),i=r.next();!i.done;i=r.next()){var o=Ly(i.value,2),c=o[0],u=o[1];u.some(function(h){var m=h.options;return m.lifecycle===Ys.ContainerScoped})&&s._registry.setAll(c,u.map(function(h){return h.options.lifecycle===Ys.ContainerScoped?{provider:h.provider,options:h.options}:h}))}}catch(h){e={error:h}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return s},t.prototype.beforeResolution=function(e,n,s){s===void 0&&(s={frequency:"Always"}),this.interceptors.preResolution.set(e,{callback:n,options:s})},t.prototype.afterResolution=function(e,n,s){s===void 0&&(s={frequency:"Always"}),this.interceptors.postResolution.set(e,{callback:n,options:s})},t.prototype.dispose=function(){return XX(this,void 0,void 0,function(){var e;return JX(this,function(n){switch(n.label){case 0:return this.disposed=!0,e=[],this.disposables.forEach(function(s){var r=s.dispose();r&&e.push(r)}),[4,Promise.all(e)];case 1:return n.sent(),[2]}})})},t.prototype.getRegistration=function(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null},t.prototype.getAllRegistrations=function(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null},t.prototype.construct=function(e,n){var s=this;if(e instanceof ZB)return e.createProxy(function(i){return s.resolve(i,n)});var r=(function(){var i=XB.get(e);if(!i||i.length===0){if(e.length===0)return new e;throw new Error('TypeInfo not known for "'+e.name+'"')}var o=i.map(s.resolveParams(n,e));return new(e.bind.apply(e,bl([void 0],o)))})();return lJ(r)&&this.disposables.add(r),r},t.prototype.resolveParams=function(e,n){var s=this;return function(r,i){var o,c,u;try{return tJ(r)?lT(r)?r.multiple?(o=s.resolve(r.transform)).transform.apply(o,bl([s.resolveAll(r.token,new $g,r.isOptional)],r.transformArgs)):(c=s.resolve(r.transform)).transform.apply(c,bl([s.resolve(r.token,e,r.isOptional)],r.transformArgs)):r.multiple?s.resolveAll(r.token,new $g,r.isOptional):s.resolve(r.token,e,r.isOptional):lT(r)?(u=s.resolve(r.transform,e)).transform.apply(u,bl([s.resolve(r.token,e)],r.transformArgs)):s.resolve(r,e)}catch(h){throw new Error(oJ(n,i,h))}}},t.prototype.ensureNotDisposed=function(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")},t})(),Is=new dJ;function lb(t){return function(e){XB.set(e,eJ(e))}}if(typeof Reflect>"u"||!Reflect.getMetadata)throw new Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`);var QS;class cb{constructor(e={}){this.attrId="",this.attrValues=[],Object.assign(e)}}L([H({type:ne.ObjectIdentifier})],cb.prototype,"attrId",void 0);L([H({type:ne.Any,repeated:"set"})],cb.prototype,"attrValues",void 0);let cT=QS=class extends Ut{constructor(e){super(e),Object.setPrototypeOf(this,QS.prototype)}};cT=QS=L([Ee({type:_e.Sequence,itemType:cb})],cT);var ek;let uT=ek=class extends Ut{constructor(e){super(e),Object.setPrototypeOf(this,ek.prototype)}};uT=ek=L([Ee({type:_e.Sequence,itemType:bh})],uT);class JB{constructor(e={}){this.certId="",this.certValue=new ArrayBuffer(0),Object.assign(this,e)}}L([H({type:ne.ObjectIdentifier})],JB.prototype,"certId",void 0);L([H({type:ne.Any,context:0})],JB.prototype,"certValue",void 0);class QB{constructor(e={}){this.crlId="",this.crltValue=new ArrayBuffer(0),Object.assign(this,e)}}L([H({type:ne.ObjectIdentifier})],QB.prototype,"crlId",void 0);L([H({type:ne.Any,context:0})],QB.prototype,"crltValue",void 0);class eL extends Bt{}let ub=class{constructor(e={}){this.encryptionAlgorithm=new $e,this.encryptedData=new eL,Object.assign(this,e)}};L([H({type:$e})],ub.prototype,"encryptionAlgorithm",void 0);L([H({type:eL})],ub.prototype,"encryptedData",void 0);var tk,nk;(function(t){t[t.v1=0]="v1"})(nk||(nk={}));class tL extends Bt{}let sk=tk=class extends Ut{constructor(e){super(e),Object.setPrototypeOf(this,tk.prototype)}};sk=tk=L([Ee({type:_e.Sequence,itemType:Ea})],sk);class Gp{constructor(e={}){this.version=nk.v1,this.privateKeyAlgorithm=new $e,this.privateKey=new tL,Object.assign(this,e)}}L([H({type:ne.Integer})],Gp.prototype,"version",void 0);L([H({type:$e})],Gp.prototype,"privateKeyAlgorithm",void 0);L([H({type:tL})],Gp.prototype,"privateKey",void 0);L([H({type:sk,implicit:!0,context:0,optional:!0})],Gp.prototype,"attributes",void 0);let hT=class extends Gp{};hT=L([Ee({type:_e.Sequence})],hT);let dT=class extends ub{};dT=L([Ee({type:_e.Sequence})],dT);class nL{constructor(e={}){this.secretTypeId="",this.secretValue=new ArrayBuffer(0),Object.assign(this,e)}}L([H({type:ne.ObjectIdentifier})],nL.prototype,"secretTypeId",void 0);L([H({type:ne.Any,context:0})],nL.prototype,"secretValue",void 0);class Yp{constructor(e={}){this.mac=new ab,this.macSalt=new Bt,this.iterations=1,Object.assign(this,e)}}L([H({type:ab})],Yp.prototype,"mac",void 0);L([H({type:Bt})],Yp.prototype,"macSalt",void 0);L([H({type:ne.Integer,defaultValue:1})],Yp.prototype,"iterations",void 0);class hb{constructor(e={}){this.version=3,this.authSafe=new bh,this.macData=new Yp,Object.assign(this,e)}}L([H({type:ne.Integer})],hb.prototype,"version",void 0);L([H({type:bh})],hb.prototype,"authSafe",void 0);L([H({type:Yp,optional:!0})],hb.prototype,"macData",void 0);var rk;class db{constructor(e={}){this.bagId="",this.bagValue=new ArrayBuffer(0),Object.assign(this,e)}}L([H({type:ne.ObjectIdentifier})],db.prototype,"bagId",void 0);L([H({type:ne.Any,context:0})],db.prototype,"bagValue",void 0);L([H({type:cb,repeated:"set",optional:!0})],db.prototype,"bagAttributes",void 0);let fT=rk=class extends Ut{constructor(e){super(e),Object.setPrototypeOf(this,rk.prototype)}};fT=rk=L([Ee({type:_e.Sequence,itemType:db})],fT);var ik,ak,ok;const sL="1.2.840.113549.1.9",rL=`${sL}.7`,eN=`${sL}.14`;let Iy=class extends ys{constructor(e={}){super(e)}toString(){return this.ia5String||super.toString()}};L([H({type:ne.IA5String})],Iy.prototype,"ia5String",void 0);Iy=L([Ee({type:_e.Choice})],Iy);let pT=class extends bh{};pT=L([Ee({type:_e.Sequence})],pT);let mT=class extends hb{};mT=L([Ee({type:_e.Sequence})],mT);let gT=class extends ub{};gT=L([Ee({type:_e.Sequence})],gT);let lk=class{constructor(e=""){this.value=e}toString(){return this.value}};L([H({type:ne.IA5String})],lk.prototype,"value",void 0);lk=L([Ee({type:_e.Choice})],lk);let yT=class extends Iy{};yT=L([Ee({type:_e.Choice})],yT);let vT=class extends ys{};vT=L([Ee({type:_e.Choice})],vT);let ck=class{constructor(e=new Date){this.value=e}};L([H({type:ne.GeneralizedTime})],ck.prototype,"value",void 0);ck=L([Ee({type:_e.Choice})],ck);let bT=class extends ys{};bT=L([Ee({type:_e.Choice})],bT);let uk=class{constructor(e="M"){this.value=e}toString(){return this.value}};L([H({type:ne.PrintableString})],uk.prototype,"value",void 0);uk=L([Ee({type:_e.Choice})],uk);let Py=class{constructor(e=""){this.value=e}toString(){return this.value}};L([H({type:ne.PrintableString})],Py.prototype,"value",void 0);Py=L([Ee({type:_e.Choice})],Py);let _T=class extends Py{};_T=L([Ee({type:_e.Choice})],_T);let xT=class extends ys{};xT=L([Ee({type:_e.Choice})],xT);let hk=class{constructor(e=""){this.value=e}toString(){return this.value}};L([H({type:ne.ObjectIdentifier})],hk.prototype,"value",void 0);hk=L([Ee({type:_e.Choice})],hk);let wT=class extends fs{};wT=L([Ee({type:_e.Choice})],wT);let dk=class{constructor(e=0){this.value=e}toString(){return this.value.toString()}};L([H({type:ne.Integer})],dk.prototype,"value",void 0);dk=L([Ee({type:_e.Choice})],dk);let ST=class extends Wi{};ST=L([Ee({type:_e.Sequence})],ST);let $y=class extends ys{};$y=L([Ee({type:_e.Choice})],$y);let kT=ik=class extends Wl{constructor(e){super(e),Object.setPrototypeOf(this,ik.prototype)}};kT=ik=L([Ee({type:_e.Sequence})],kT);let CT=ak=class extends Ut{constructor(e){super(e),Object.setPrototypeOf(this,ak.prototype)}};CT=ak=L([Ee({type:_e.Set,itemType:vh})],CT);let fk=class{constructor(e=""){this.value=e}toString(){return this.value}};L([H({type:ne.BmpString})],fk.prototype,"value",void 0);fk=L([Ee({type:_e.Choice})],fk);let pk=class extends $e{};pk=L([Ee({type:_e.Sequence})],pk);let NT=ok=class extends Ut{constructor(e){super(e),Object.setPrototypeOf(this,ok.prototype)}};NT=ok=L([Ee({type:_e.Sequence,itemType:pk})],NT);var mk;let zy=mk=class extends Ut{constructor(e){super(e),Object.setPrototypeOf(this,mk.prototype)}};zy=mk=L([Ee({type:_e.Sequence,itemType:Ea})],zy);class wh{constructor(e={}){this.version=0,this.subject=new Fn,this.subjectPKInfo=new Oi,this.attributes=new zy,Object.assign(this,e)}}L([H({type:ne.Integer})],wh.prototype,"version",void 0);L([H({type:Fn})],wh.prototype,"subject",void 0);L([H({type:Oi})],wh.prototype,"subjectPKInfo",void 0);L([H({type:zy,implicit:!0,context:0,optional:!0})],wh.prototype,"attributes",void 0);class gp{constructor(e={}){this.certificationRequestInfo=new wh,this.signatureAlgorithm=new $e,this.signature=new ArrayBuffer(0),Object.assign(this,e)}}L([H({type:wh,raw:!0})],gp.prototype,"certificationRequestInfo",void 0);L([H({type:$e})],gp.prototype,"signatureAlgorithm",void 0);L([H({type:ne.BitString})],gp.prototype,"signature",void 0);const Zp="crypto.algorithm";class fJ{getAlgorithms(){return Is.resolveAll(Zp)}toAsnAlgorithm(e){({...e});for(const n of this.getAlgorithms()){const s=n.toAsnAlgorithm(e);if(s)return s}if(/^[0-9.]+$/.test(e.name)){const n=new $e({algorithm:e.name});if("parameters"in e){const s=e;n.parameters=s.parameters}return n}throw new Error("Cannot convert WebCrypto algorithm to ASN.1 algorithm")}toWebAlgorithm(e){for(const s of this.getAlgorithms()){const r=s.toWebAlgorithm(e);if(r)return r}return{name:e.algorithm,parameters:e.parameters}}}const Qu="crypto.algorithmProvider";Is.registerSingleton(Qu,fJ);var v0;const rr="1.3.36.3.3.2.8.1.1",ET=`${rr}.1`,AT=`${rr}.2`,jT=`${rr}.3`,TT=`${rr}.4`,RT=`${rr}.5`,OT=`${rr}.6`,MT=`${rr}.7`,DT=`${rr}.8`,BT=`${rr}.9`,LT=`${rr}.10`,IT=`${rr}.11`,PT=`${rr}.12`,$T=`${rr}.13`,zT=`${rr}.14`,UT="brainpoolP160r1",HT="brainpoolP160t1",FT="brainpoolP192r1",VT="brainpoolP192t1",qT="brainpoolP224r1",KT="brainpoolP224t1",WT="brainpoolP256r1",GT="brainpoolP256t1",YT="brainpoolP320r1",ZT="brainpoolP320t1",XT="brainpoolP384r1",JT="brainpoolP384t1",QT="brainpoolP512r1",eR="brainpoolP512t1",pn="ECDSA";let yp=v0=class{toAsnAlgorithm(e){switch(e.name.toLowerCase()){case pn.toLowerCase():if("hash"in e)switch((typeof e.hash=="string"?e.hash:e.hash.name).toLowerCase()){case"sha-1":return IX;case"sha-256":return PX;case"sha-384":return $X;case"sha-512":return zX}else if("namedCurve"in e){let n="";switch(e.namedCurve){case"P-256":n=iT;break;case"K-256":n=v0.SECP256K1;break;case"P-384":n=aT;break;case"P-521":n=oT;break;case UT:n=ET;break;case HT:n=AT;break;case FT:n=jT;break;case VT:n=TT;break;case qT:n=RT;break;case KT:n=OT;break;case WT:n=MT;break;case GT:n=DT;break;case YT:n=BT;break;case ZT:n=LT;break;case XT:n=IT;break;case JT:n=PT;break;case QT:n=$T;break;case eR:n=zT;break}if(n)return new $e({algorithm:pp,parameters:Be.serialize(new Uo({namedCurve:n}))})}}return null}toWebAlgorithm(e){switch(e.algorithm){case WC:return{name:pn,hash:{name:"SHA-1"}};case GC:return{name:pn,hash:{name:"SHA-256"}};case YC:return{name:pn,hash:{name:"SHA-384"}};case ZC:return{name:pn,hash:{name:"SHA-512"}};case pp:{if(!e.parameters)throw new TypeError("Cannot get required parameters from EC algorithm");switch(Be.parse(e.parameters,Uo).namedCurve){case iT:return{name:pn,namedCurve:"P-256"};case v0.SECP256K1:return{name:pn,namedCurve:"K-256"};case aT:return{name:pn,namedCurve:"P-384"};case oT:return{name:pn,namedCurve:"P-521"};case ET:return{name:pn,namedCurve:UT};case AT:return{name:pn,namedCurve:HT};case jT:return{name:pn,namedCurve:FT};case TT:return{name:pn,namedCurve:VT};case RT:return{name:pn,namedCurve:qT};case OT:return{name:pn,namedCurve:KT};case MT:return{name:pn,namedCurve:WT};case DT:return{name:pn,namedCurve:GT};case BT:return{name:pn,namedCurve:YT};case LT:return{name:pn,namedCurve:ZT};case IT:return{name:pn,namedCurve:XT};case PT:return{name:pn,namedCurve:JT};case $T:return{name:pn,namedCurve:QT};case zT:return{name:pn,namedCurve:eR}}}}return null}};yp.SECP256K1="1.3.132.0.10";yp=v0=L([lb()],yp);Is.registerSingleton(Zp,yp);const iL=Symbol("name"),aL=Symbol("value");class Pt{constructor(e,n={},s=""){this[iL]=e,this[aL]=s;for(const r in n)this[r]=n[r]}}Pt.NAME=iL;Pt.VALUE=aL;class pJ{static toTextObject(e){const n=new Pt("Algorithm Identifier",{},Vo.toString(e.algorithm));if(e.parameters)if(e.algorithm===pp){const s=new yp().toWebAlgorithm(e);s&&"namedCurve"in s?n["Named Curve"]=s.namedCurve:n.Parameters=e.parameters}else n.Parameters=e.parameters;return n}}class Vo{static toString(e){const n=this.items[e];return n||e}}Vo.items={[Oy]:"sha1",[KB]:"sha224",[My]:"sha256",[Dy]:"sha384",[By]:"sha512",[Yl]:"rsaEncryption",[jy]:"sha1WithRSAEncryption",[KX]:"sha224WithRSAEncryption",[WS]:"sha256WithRSAEncryption",[Ty]:"sha384WithRSAEncryption",[Ry]:"sha512WithRSAEncryption",[pp]:"ecPublicKey",[WC]:"ecdsaWithSHA1",[FB]:"ecdsaWithSHA224",[GC]:"ecdsaWithSHA256",[YC]:"ecdsaWithSHA384",[ZC]:"ecdsaWithSHA512",[TX]:"TLS WWW server authentication",[RX]:"TLS WWW client authentication",[OX]:"Code Signing",[MX]:"E-mail Protection",[DX]:"Time Stamping",[BX]:"OCSP Signing",[LX]:"Signed Data"};class Jl{static serialize(e){return this.serializeObj(e).join(`
`)}static pad(e=0){return"".padStart(2*e," ")}static serializeObj(e,n=0){const s=[];let r=this.pad(n++),i="";const o=e[Pt.VALUE];o&&(i=` ${o}`),s.push(`${r}${e[Pt.NAME]}:${i}`),r=this.pad(n);for(const c in e){if(typeof c=="symbol")continue;const u=e[c],h=c?`${c}: `:"";if(typeof u=="string"||typeof u=="number"||typeof u=="boolean")s.push(`${r}${h}${u}`);else if(u instanceof Date)s.push(`${r}${h}${u.toUTCString()}`);else if(Array.isArray(u))for(const m of u)m[Pt.NAME]=c,s.push(...this.serializeObj(m,n));else if(u instanceof Pt)u[Pt.NAME]=c,s.push(...this.serializeObj(u,n));else if(Me.isBufferSource(u))c?(s.push(`${r}${h}`),s.push(...this.serializeBufferSource(u,n+1))):s.push(...this.serializeBufferSource(u,n));else if("toTextObject"in u){const m=u.toTextObject();m[Pt.NAME]=c,s.push(...this.serializeObj(m,n))}else throw new TypeError("Cannot serialize data in text format. Unsupported type.")}return s}static serializeBufferSource(e,n=0){const s=this.pad(n),r=Me.toUint8Array(e),i=[];for(let o=0;o<r.length;){const c=[];for(let u=0;u<16&&o<r.length;u++){u===8&&c.push("");const h=r[o++].toString(16).padStart(2,"0");c.push(h)}i.push(`${s}${c.join(" ")}`)}return i}static serializeAlgorithm(e){return this.algorithmSerializer.toTextObject(e)}}Jl.oidSerializer=Vo;Jl.algorithmSerializer=pJ;var pu;class qo{get rawData(){return vt(this,pu,"f")||un(this,pu,Be.serialize(this.asn),"f"),vt(this,pu,"f")}constructor(...e){pu.set(this,void 0),Me.isBufferSource(e[0])?(this.asn=Be.parse(e[0],e[1]),un(this,pu,Me.toArrayBuffer(e[0]),"f"),this.onInit(this.asn)):(this.asn=e[0],this.onInit(this.asn))}equal(e){return e instanceof qo?AD(e.rawData,this.rawData):!1}toString(e="text"){switch(e){case"asn":return Be.toString(this.rawData);case"text":return Jl.serialize(this.toTextObject());case"hex":return Ze.ToHex(this.rawData);case"base64":return Ze.ToBase64(this.rawData);case"base64url":return Ze.ToBase64Url(this.rawData);default:throw TypeError("Argument 'format' is unsupported value")}}getTextName(){return this.constructor.NAME}toTextObject(){const e=this.toTextObjectEmpty();return e[""]=this.rawData,e}toTextObjectEmpty(e){return new Pt(this.getTextName(),{},e)}}pu=new WeakMap;qo.NAME="ASN";class jr extends qo{constructor(...e){let n;Me.isBufferSource(e[0])?n=Me.toArrayBuffer(e[0]):n=Be.serialize(new gi({extnID:e[0],critical:e[1],extnValue:new Bt(Me.toArrayBuffer(e[2]))})),super(n,gi)}onInit(e){this.type=e.extnID,this.critical=e.critical,this.value=e.extnValue.buffer}toTextObject(){const e=this.toTextObjectWithoutValue();return e[""]=this.value,e}toTextObjectWithoutValue(){const e=this.toTextObjectEmpty(this.critical?"critical":void 0);return e[Pt.NAME]===jr.NAME&&(e[Pt.NAME]=Vo.toString(this.type)),e}}var oL;class ko{static isCryptoKeyPair(e){return e&&e.privateKey&&e.publicKey}static isCryptoKey(e){return e&&e.usages&&e.type&&e.algorithm&&e.extractable!==void 0}constructor(){this.items=new Map,this[oL]="CryptoProvider",typeof self<"u"&&typeof crypto<"u"?this.set(ko.DEFAULT,crypto):typeof global<"u"&&global.crypto&&global.crypto.subtle&&this.set(ko.DEFAULT,global.crypto)}clear(){this.items.clear()}delete(e){return this.items.delete(e)}forEach(e,n){return this.items.forEach(e,n)}has(e){return this.items.has(e)}get size(){return this.items.size}entries(){return this.items.entries()}keys(){return this.items.keys()}values(){return this.items.values()}[Symbol.iterator](){return this.items[Symbol.iterator]()}get(e=ko.DEFAULT){const n=this.items.get(e.toLowerCase());if(!n)throw new Error(`Cannot get Crypto by name '${e}'`);return n}set(e,n){if(typeof e=="string"){if(!n)throw new TypeError("Argument 'value' is required");this.items.set(e.toLowerCase(),n)}else this.items.set(ko.DEFAULT,e);return this}}oL=Symbol.toStringTag;ko.DEFAULT="default";const Ms=new ko,mJ=/^[0-2](?:\.[1-9][0-9]*)+$/;function gJ(t){return new RegExp(mJ).test(t)}class lL{constructor(e={}){this.items={};for(const n in e)this.register(n,e[n])}get(e){return this.items[e]||null}findId(e){return gJ(e)?e:this.get(e)}register(e,n){this.items[e]=n,this.items[n]=e}}const nr=new lL;nr.register("CN","2.5.4.3");nr.register("L","2.5.4.7");nr.register("ST","2.5.4.8");nr.register("O","2.5.4.10");nr.register("OU","2.5.4.11");nr.register("C","2.5.4.6");nr.register("DC","0.9.2342.19200300.100.1.25");nr.register("E","1.2.840.113549.1.9.1");nr.register("G","2.5.4.42");nr.register("I","2.5.4.43");nr.register("SN","2.5.4.4");nr.register("T","2.5.4.12");function yJ(t,e){return`\\${Ze.ToHex(Ze.FromUtf8String(e)).toUpperCase()}`}function vJ(t){return t.replace(/([,+"\\<>;])/g,"\\$1").replace(/^([ #])/,"\\$1").replace(/([ ]$)/,"\\$1").replace(/([\r\n\t])/,yJ)}class Ql{static isASCII(e){for(let n=0;n<e.length;n++)if(e.charCodeAt(n)>255)return!1;return!0}static isPrintableString(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/g.test(e)}constructor(e,n={}){this.extraNames=new lL,this.asn=new Fn;for(const s in n)if(Object.prototype.hasOwnProperty.call(n,s)){const r=n[s];this.extraNames.register(s,r)}typeof e=="string"?this.asn=this.fromString(e):e instanceof Fn?this.asn=e:Me.isBufferSource(e)?this.asn=Be.parse(e,Fn):this.asn=this.fromJSON(e)}getField(e){const n=this.extraNames.findId(e)||nr.findId(e),s=[];for(const r of this.asn)for(const i of r)i.type===n&&s.push(i.value.toString());return s}getName(e){return this.extraNames.get(e)||nr.get(e)}toString(){return this.asn.map(e=>e.map(n=>{const s=this.getName(n.type)||n.type,r=n.value.anyValue?`#${Ze.ToHex(n.value.anyValue)}`:vJ(n.value.toString());return`${s}=${r}`}).join("+")).join(", ")}toJSON(){var e;const n=[];for(const s of this.asn){const r={};for(const i of s){const o=this.getName(i.type)||i.type;(e=r[o])!==null&&e!==void 0||(r[o]=[]),r[o].push(i.value.anyValue?`#${Ze.ToHex(i.value.anyValue)}`:i.value.toString())}n.push(r)}return n}fromString(e){const n=new Fn,s=/(\d\.[\d.]*\d|[A-Za-z]+)=((?:"")|(?:".*?[^\\]")|(?:[^,+"\\](?=[,+]|$))|(?:[^,+].*?(?:[^\\][,+]))|(?:))([,+])?/g;let r=null,i=",";for(;r=s.exec(`${e},`);){let[,o,c]=r;const u=c[c.length-1];(u===","||u==="+")&&(c=c.slice(0,c.length-1),r[3]=u);const h=r[3];o=this.getTypeOid(o);const m=this.createAttribute(o,c);i==="+"?n[n.length-1].push(m):n.push(new Fu([m])),i=h}return n}fromJSON(e){const n=new Fn;for(const s of e){const r=new Fu;for(const i in s){const o=this.getTypeOid(i),c=s[i];for(const u of c){const h=this.createAttribute(o,u);r.push(h)}}n.push(r)}return n}getTypeOid(e){if(/[\d.]+/.test(e)||(e=this.getName(e)||""),!e)throw new Error(`Cannot get OID for name type '${e}'`);return e}createAttribute(e,n){const s=new Uv({type:e});if(typeof n=="object")for(const r in n)switch(r){case"ia5String":s.value.ia5String=n[r];break;case"utf8String":s.value.utf8String=n[r];break;case"universalString":s.value.universalString=n[r];break;case"bmpString":s.value.bmpString=n[r];break;case"printableString":s.value.printableString=n[r];break}else if(n[0]==="#")s.value.anyValue=Ze.FromHex(n.slice(1));else{const r=this.processStringValue(n);e===this.getName("E")||e===this.getName("DC")?s.value.ia5String=r:Ql.isPrintableString(r)?s.value.printableString=r:s.value.utf8String=r}return s}processStringValue(e){const n=/"(.*?[^\\])?"/.exec(e);return n&&(e=n[1]),e.replace(/\\0a/ig,`
`).replace(/\\0d/ig,"\r").replace(/\\0g/ig,"	").replace(/\\(.)/g,"$1")}toArrayBuffer(){return Be.serialize(this.asn)}async getThumbprint(...e){var n;let s,r="SHA-1";return e.length>=1&&!(!((n=e[0])===null||n===void 0)&&n.subtle)?(r=e[0]||r,s=e[1]||Ms.get()):s=e[0]||Ms.get(),await s.subtle.digest(r,this.toArrayBuffer())}}const cL="Cannot initialize GeneralName from ASN.1 data.",tR=`${cL} Unsupported string format in use.`,bJ=`${cL} Value doesn't match to GUID regular expression.`,nR=/^([0-9a-f]{8})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{12})$/i,sR="1.3.6.1.4.1.311.25.1",rR="1.3.6.1.4.1.311.20.2.3",Rx="dns",Ox="dn",Mx="email",Dx="ip",Bx="url",Lx="guid",Ix="upn",zg="id";class Co extends qo{constructor(...e){let n;if(e.length===2)switch(e[0]){case Ox:{const s=new Ql(e[1]).toArrayBuffer(),r=Be.parse(s,Fn);n=new mt({directoryName:r});break}case Rx:n=new mt({dNSName:e[1]});break;case Mx:n=new mt({rfc822Name:e[1]});break;case Lx:{const s=new RegExp(nR,"i").exec(e[1]);if(!s)throw new Error("Cannot parse GUID value. Value doesn't match to regular expression");const r=s.slice(1).map((i,o)=>o<3?Ze.ToHex(new Uint8Array(Ze.FromHex(i)).reverse()):i).join("");n=new mt({otherName:new up({typeId:sR,value:Be.serialize(new Bt(Ze.FromHex(r)))})});break}case Dx:n=new mt({iPAddress:e[1]});break;case zg:n=new mt({registeredID:e[1]});break;case Ix:{n=new mt({otherName:new up({typeId:rR,value:Be.serialize(CB.toASN(e[1]))})});break}case Bx:n=new mt({uniformResourceIdentifier:e[1]});break;default:throw new Error("Cannot create GeneralName. Unsupported type of the name")}else Me.isBufferSource(e[0])?n=Be.parse(e[0],mt):n=e[0];super(n)}onInit(e){if(e.dNSName!=null)this.type=Rx,this.value=e.dNSName;else if(e.rfc822Name!=null)this.type=Mx,this.value=e.rfc822Name;else if(e.iPAddress!=null)this.type=Dx,this.value=e.iPAddress;else if(e.uniformResourceIdentifier!=null)this.type=Bx,this.value=e.uniformResourceIdentifier;else if(e.registeredID!=null)this.type=zg,this.value=e.registeredID;else if(e.directoryName!=null)this.type=Ox,this.value=new Ql(e.directoryName).toString();else if(e.otherName!=null)if(e.otherName.typeId===sR){this.type=Lx;const n=Be.parse(e.otherName.value,Bt),s=new RegExp(nR,"i").exec(Ze.ToHex(n));if(!s)throw new Error(bJ);this.value=s.slice(1).map((r,i)=>i<3?Ze.ToHex(new Uint8Array(Ze.FromHex(r)).reverse()):r).join("-")}else if(e.otherName.typeId===rR)this.type=Ix,this.value=Be.parse(e.otherName.value,ys).toString();else throw new Error(tR);else throw new Error(tR)}toJSON(){return{type:this.type,value:this.value}}toTextObject(){let e;switch(this.type){case Ox:case Rx:case Lx:case Dx:case zg:case Ix:case Bx:e=this.type.toUpperCase();break;case Mx:e="Email";break;default:throw new Error("Unsupported GeneralName type")}let n=this.value;return this.type===zg&&(n=Vo.toString(n)),new Pt(e,void 0,n)}}class ec extends qo{constructor(e){let n;if(e instanceof Cs)n=e;else if(Array.isArray(e)){const s=[];for(const r of e)if(r instanceof mt)s.push(r);else{const i=Be.parse(new Co(r.type,r.value).rawData,mt);s.push(i)}n=new Cs(s)}else if(Me.isBufferSource(e))n=Be.parse(e,Cs);else throw new Error("Cannot initialize GeneralNames. Incorrect incoming arguments");super(n)}onInit(e){const n=[];for(const s of e){let r=null;try{r=new Co(s)}catch{continue}n.push(r)}this.items=n}toJSON(){return this.items.map(e=>e.toJSON())}toTextObject(){const e=super.toTextObjectEmpty();for(const n of this.items){const s=n.toTextObject();let r=e[s[Pt.NAME]];Array.isArray(r)||(r=[],e[s[Pt.NAME]]=r),r.push(s)}return e}}ec.NAME="GeneralNames";const Uf="-{5}",vp="\\n",_J=`[^${vp}]+`,xJ=`${Uf}BEGIN (${_J}(?=${Uf}))${Uf}`,wJ=`${Uf}END \\1${Uf}`,eh="\\n",SJ=`[^:${vp}]+`,kJ=`(?:[^${vp}]+${eh}(?: +[^${vp}]+${eh})*)`,CJ="[a-zA-Z0-9=+/]+",NJ=`(?:${CJ}${eh})+`,iR=`${xJ}${eh}(?:((?:${SJ}: ${kJ})+))?${eh}?(${NJ})${wJ}`;class Sr{static isPem(e){return typeof e=="string"&&new RegExp(iR,"g").test(e.replace(/\r/g,""))}static decodeWithHeaders(e){e=e.replace(/\r/g,"");const n=new RegExp(iR,"g"),s=[];let r=null;for(;r=n.exec(e);){const i=r[3].replace(new RegExp(`[${vp}]+`,"g"),""),o={type:r[1],headers:[],rawData:Ze.FromBase64(i)},c=r[2];if(c){const u=c.split(new RegExp(eh,"g"));let h=null;for(const m of u){const[p,y]=m.split(/:(.*)/);if(y===void 0){if(!h)throw new Error("Cannot parse PEM string. Incorrect header value");h.value+=p.trim()}else h&&o.headers.push(h),h={key:p,value:y.trim()}}h&&o.headers.push(h)}s.push(o)}return s}static decode(e){return this.decodeWithHeaders(e).map(s=>s.rawData)}static decodeFirst(e){const n=this.decode(e);if(!n.length)throw new RangeError("PEM string doesn't contain any objects");return n[0]}static encode(e,n){if(Array.isArray(e)){const s=new Array;return n?e.forEach(r=>{if(!Me.isBufferSource(r))throw new TypeError("Cannot encode array of BufferSource in PEM format. Not all items of the array are BufferSource");s.push(this.encodeStruct({type:n,rawData:Me.toArrayBuffer(r)}))}):e.forEach(r=>{if(!("type"in r))throw new TypeError("Cannot encode array of PemStruct in PEM format. Not all items of the array are PemStrut");s.push(this.encodeStruct(r))}),s.join(`
`)}else{if(!n)throw new Error("Required argument 'tag' is missed");return this.encodeStruct({type:n,rawData:Me.toArrayBuffer(e)})}}static encodeStruct(e){var n;const s=e.type.toLocaleUpperCase(),r=[];if(r.push(`-----BEGIN ${s}-----`),!((n=e.headers)===null||n===void 0)&&n.length){for(const h of e.headers)r.push(`${h.key}: ${h.value}`);r.push("")}const i=Ze.ToBase64(e.rawData);let o,c=0;const u=Array();for(;c<i.length&&(i.length-c<64?o=i.substring(c):(o=i.substring(c,c+64),c+=64),o.length!==0);)if(u.push(o),o.length<64)break;return r.push(...u),r.push(`-----END ${s}-----`),r.join(`
`)}}Sr.CertificateTag="CERTIFICATE";Sr.CrlTag="CRL";Sr.CertificateRequestTag="CERTIFICATE REQUEST";Sr.PublicKeyTag="PUBLIC KEY";Sr.PrivateKeyTag="PRIVATE KEY";class Ta extends qo{static isAsnEncoded(e){return Me.isBufferSource(e)||typeof e=="string"}static toArrayBuffer(e){if(typeof e=="string"){if(Sr.isPem(e))return Sr.decode(e)[0];if(Ze.isHex(e))return Ze.FromHex(e);if(Ze.isBase64(e))return Ze.FromBase64(e);if(Ze.isBase64Url(e))return Ze.FromBase64Url(e);throw new TypeError("Unsupported format of 'raw' argument. Must be one of DER, PEM, HEX, Base64, or Base4Url")}else{const n=Me.toUint8Array(e);if(n.length>0&&n[0]===48)return Me.toArrayBuffer(e);const s=Ze.ToBinary(e);if(Sr.isPem(s))return Sr.decode(s)[0];if(Ze.isHex(s))return Ze.FromHex(s);if(Ze.isBase64(s))return Ze.FromBase64(s);if(Ze.isBase64Url(s))return Ze.FromBase64Url(s);throw new TypeError("Unsupported format of 'raw' argument. Must be one of DER, PEM, HEX, Base64, or Base4Url")}}constructor(...e){Ta.isAsnEncoded(e[0])?super(Ta.toArrayBuffer(e[0]),e[1]):super(e[0])}toString(e="pem"){return e==="pem"?Sr.encode(this.rawData,this.tag):super.toString(e)}}class Li extends Ta{static async create(e,n=Ms.get()){if(e instanceof Li)return e;if(ko.isCryptoKey(e)){if(e.type!=="public")throw new TypeError("Public key is required");const s=await n.subtle.exportKey("spki",e);return new Li(s)}else{if(e.publicKey)return e.publicKey;if(Me.isBufferSource(e))return new Li(e);throw new TypeError("Unsupported PublicKeyType")}}constructor(e){Ta.isAsnEncoded(e)?super(e,Oi):super(e),this.tag=Sr.PublicKeyTag}async export(...e){let n,s=["verify"],r={hash:"SHA-256",...this.algorithm};e.length>1?(r=e[0]||r,s=e[1]||s,n=e[2]||Ms.get()):n=e[0]||Ms.get();let i=this.rawData;const o=Be.parse(this.rawData,Oi);return o.algorithm.algorithm===zf&&(i=EJ(o,i)),n.subtle.importKey("spki",i,r,!0,s)}onInit(e){const n=Is.resolve(Qu),s=this.algorithm=n.toWebAlgorithm(e.algorithm);if(e.algorithm.algorithm===Yl){const r=Be.parse(e.subjectPublicKey,XC),i=Me.toUint8Array(r.modulus);s.publicExponent=Me.toUint8Array(r.publicExponent),s.modulusLength=(i[0]?i:i.slice(1)).byteLength<<3}}async getThumbprint(...e){var n;let s,r="SHA-1";return e.length>=1&&!(!((n=e[0])===null||n===void 0)&&n.subtle)?(r=e[0]||r,s=e[1]||Ms.get()):s=e[0]||Ms.get(),await s.subtle.digest(r,this.rawData)}async getKeyIdentifier(...e){let n,s="SHA-1";e.length===1?typeof e[0]=="string"?(s=e[0],n=Ms.get()):n=e[0]:e.length===2?(s=e[0],n=e[1]):n=Ms.get();const r=Be.parse(this.rawData,Oi);return await n.subtle.digest(s,r.subjectPublicKey)}toTextObject(){const e=this.toTextObjectEmpty(),n=Be.parse(this.rawData,Oi);switch(e.Algorithm=Jl.serializeAlgorithm(n.algorithm),n.algorithm.algorithm){case pp:e["EC Point"]=n.subjectPublicKey;break;case Yl:default:e["Raw Data"]=n.subjectPublicKey}return e}}function EJ(t,e){return t.algorithm=new $e({algorithm:Yl,parameters:null}),e=Be.serialize(t),e}class bp extends jr{static async create(e,n=!1,s=Ms.get()){if("name"in e&&"serialNumber"in e)return new bp(e,n);const i=await(await Li.create(e,s)).getKeyIdentifier(s);return new bp(Ze.ToHex(i),n)}constructor(...e){if(Me.isBufferSource(e[0]))super(e[0]);else if(typeof e[0]=="string"){const n=new Sl({keyIdentifier:new OC(Ze.FromHex(e[0]))});super(hS,e[1],Be.serialize(n))}else{const n=e[0],s=n.name instanceof ec?Be.parse(n.name.rawData,Cs):n.name,r=new Sl({authorityCertIssuer:s,authorityCertSerialNumber:Ze.FromHex(n.serialNumber)});super(hS,e[1],Be.serialize(r))}}onInit(e){super.onInit(e);const n=Be.parse(e.extnValue,Sl);n.keyIdentifier&&(this.keyId=Ze.ToHex(n.keyIdentifier)),(n.authorityCertIssuer||n.authorityCertSerialNumber)&&(this.certId={name:n.authorityCertIssuer||[],serialNumber:n.authorityCertSerialNumber?Ze.ToHex(n.authorityCertSerialNumber):""})}toTextObject(){const e=this.toTextObjectWithoutValue(),n=Be.parse(this.value,Sl);return n.authorityCertIssuer&&(e["Authority Issuer"]=new ec(n.authorityCertIssuer).toTextObject()),n.authorityCertSerialNumber&&(e["Authority Serial Number"]=n.authorityCertSerialNumber),n.keyIdentifier&&(e[""]=n.keyIdentifier),e}}bp.NAME="Authority Key Identifier";class uL extends jr{constructor(...e){if(Me.isBufferSource(e[0])){super(e[0]);const n=Be.parse(this.value,hy);this.ca=n.cA,this.pathLength=n.pathLenConstraint}else{const n=new hy({cA:e[0],pathLenConstraint:e[1]});super(EB,e[2],Be.serialize(n)),this.ca=e[0],this.pathLength=e[1]}}toTextObject(){const e=this.toTextObjectWithoutValue();return this.ca&&(e.CA=this.ca),this.pathLength!==void 0&&(e["Path Length"]=this.pathLength),e}}uL.NAME="Basic Constraints";var aR;(function(t){t.serverAuth="1.3.6.1.5.5.7.3.1",t.clientAuth="1.3.6.1.5.5.7.3.2",t.codeSigning="1.3.6.1.5.5.7.3.3",t.emailProtection="1.3.6.1.5.5.7.3.4",t.timeStamping="1.3.6.1.5.5.7.3.8",t.ocspSigning="1.3.6.1.5.5.7.3.9"})(aR||(aR={}));class hL extends jr{constructor(...e){if(Me.isBufferSource(e[0])){super(e[0]);const n=Be.parse(this.value,my);this.usages=n.map(s=>s)}else{const n=new my(e[0]);super(TB,e[1],Be.serialize(n)),this.usages=e[0]}}toTextObject(){const e=this.toTextObjectWithoutValue();return e[""]=this.usages.map(n=>Vo.toString(n)).join(", "),e}}hL.NAME="Extended Key Usages";var va;(function(t){t[t.digitalSignature=1]="digitalSignature",t[t.nonRepudiation=2]="nonRepudiation",t[t.keyEncipherment=4]="keyEncipherment",t[t.dataEncipherment=8]="dataEncipherment",t[t.keyAgreement=16]="keyAgreement",t[t.keyCertSign=32]="keyCertSign",t[t.cRLSign=64]="cRLSign",t[t.encipherOnly=128]="encipherOnly",t[t.decipherOnly=256]="decipherOnly"})(va||(va={}));class dL extends jr{constructor(...e){if(Me.isBufferSource(e[0])){super(e[0]);const n=Be.parse(this.value,Tx);this.usages=n.toNumber()}else{const n=new Tx(e[0]);super(OB,e[1],Be.serialize(n)),this.usages=e[0]}}toTextObject(){const e=this.toTextObjectWithoutValue(),n=Be.parse(this.value,Tx);return e[""]=n.toJSON().join(", "),e}}dL.NAME="Key Usages";class fb extends jr{static async create(e,n=!1,s=Ms.get()){const i=await(await Li.create(e,s)).getKeyIdentifier(s);return new fb(Ze.ToHex(i),n)}constructor(...e){if(Me.isBufferSource(e[0])){super(e[0]);const n=Be.parse(this.value,Do);this.keyId=Ze.ToHex(n)}else{const n=typeof e[0]=="string"?Ze.FromHex(e[0]):e[0],s=new Do(n);super(LB,e[1],Be.serialize(s)),this.keyId=Ze.ToHex(n)}}toTextObject(){const e=this.toTextObjectWithoutValue(),n=Be.parse(this.value,Do);return e[""]=n,e}}fb.NAME="Subject Key Identifier";class fL extends jr{constructor(...e){Me.isBufferSource(e[0])?super(e[0]):super(BB,e[1],new ec(e[0]||[]).rawData)}onInit(e){super.onInit(e);const n=Be.parse(e.extnValue,NS);this.names=new ec(n)}toTextObject(){const e=this.toTextObjectWithoutValue(),n=this.names.toTextObject();for(const s in n)e[s]=n[s];return e}}fL.NAME="Subject Alternative Name";class Tr{static register(e,n){this.items.set(e,n)}static create(e){const n=new jr(e),s=this.items.get(n.type);return s?new s(e):n}}Tr.items=new Map;class pL extends jr{constructor(...e){var n;if(Me.isBufferSource(e[0])){super(e[0]);const s=Be.parse(this.value,fy);this.policies=s.map(r=>r.policyIdentifier)}else{const s=e[0],r=(n=e[1])!==null&&n!==void 0?n:!1,i=new fy(s.map(o=>new Fv({policyIdentifier:o})));super(AB,r,Be.serialize(i)),this.policies=s}}toTextObject(){const e=this.toTextObjectWithoutValue();return e.Policy=this.policies.map(n=>new Pt("",{},Vo.toString(n))),e}}pL.NAME="Certificate Policies";Tr.register(AB,pL);class mL extends jr{constructor(...e){var n;if(Me.isBufferSource(e[0]))super(e[0]);else if(Array.isArray(e[0])&&typeof e[0][0]=="string"){const r=e[0].map(o=>new gh({distributionPoint:new Kl({fullName:[new mt({uniformResourceIdentifier:o})]})})),i=new Bu(r);super(gS,e[1],Be.serialize(i))}else{const s=new Bu(e[0]);super(gS,e[1],Be.serialize(s))}(n=this.distributionPoints)!==null&&n!==void 0||(this.distributionPoints=[])}onInit(e){super.onInit(e);const n=Be.parse(e.extnValue,Bu);this.distributionPoints=n}toTextObject(){const e=this.toTextObjectWithoutValue();return e["Distribution Point"]=this.distributionPoints.map(n=>{var s;const r={};return n.distributionPoint&&(r[""]=(s=n.distributionPoint.fullName)===null||s===void 0?void 0:s.map(i=>new Co(i).toString()).join(", ")),n.reasons&&(r.Reasons=n.reasons.toString()),n.cRLIssuer&&(r["CRL Issuer"]=n.cRLIssuer.map(i=>i.toString()).join(", ")),r}),e}}mL.NAME="CRL Distribution Points";class gL extends jr{constructor(...e){var n,s,r,i;if(Me.isBufferSource(e[0]))super(e[0]);else if(e[0]instanceof Su){const o=new Su(e[0]);super(uS,e[1],Be.serialize(o))}else{const o=e[0],c=new Su;Hg(c,o,Vj,"ocsp"),Hg(c,o,qj,"caIssuers"),Hg(c,o,Kj,"timeStamping"),Hg(c,o,Wj,"caRepository"),super(uS,e[1],Be.serialize(c))}(n=this.ocsp)!==null&&n!==void 0||(this.ocsp=[]),(s=this.caIssuers)!==null&&s!==void 0||(this.caIssuers=[]),(r=this.timeStamping)!==null&&r!==void 0||(this.timeStamping=[]),(i=this.caRepository)!==null&&i!==void 0||(this.caRepository=[])}onInit(e){super.onInit(e),this.ocsp=[],this.caIssuers=[],this.timeStamping=[],this.caRepository=[],Be.parse(e.extnValue,Su).forEach(s=>{switch(s.accessMethod){case Vj:this.ocsp.push(new Co(s.accessLocation));break;case qj:this.caIssuers.push(new Co(s.accessLocation));break;case Kj:this.timeStamping.push(new Co(s.accessLocation));break;case Wj:this.caRepository.push(new Co(s.accessLocation));break}})}toTextObject(){const e=this.toTextObjectWithoutValue();return this.ocsp.length&&Ug(e,"OCSP",this.ocsp),this.caIssuers.length&&Ug(e,"CA Issuers",this.caIssuers),this.timeStamping.length&&Ug(e,"Time Stamping",this.timeStamping),this.caRepository.length&&Ug(e,"CA Repository",this.caRepository),e}}gL.NAME="Authority Info Access";function Ug(t,e,n){if(n.length===1)t[e]=n[0].toTextObject();else{const s=new Pt("");n.forEach((r,i)=>{const o=r.toTextObject(),c=`${o[Pt.NAME]} ${i+1}`;let u=s[c];Array.isArray(u)||(u=[],s[c]=u),u.push(o)}),t[e]=s}}function Hg(t,e,n,s){const r=e[s];r&&(Array.isArray(r)?r:[r]).forEach(o=>{typeof o=="string"&&(o=new Co("url",o)),t.push(new $p({accessMethod:n,accessLocation:Be.parse(o.rawData,mt)}))})}class yL extends jr{constructor(...e){Me.isBufferSource(e[0])?super(e[0]):super(RB,e[1],new ec(e[0]||[]).rawData)}onInit(e){super.onInit(e);const n=Be.parse(e.extnValue,Cs);this.names=new ec(n)}toTextObject(){const e=this.toTextObjectWithoutValue(),n=this.names.toTextObject();for(const s in n)e[s]=n[s];return e}}yL.NAME="Issuer Alternative Name";class Sh extends qo{constructor(...e){let n;if(Me.isBufferSource(e[0]))n=Me.toArrayBuffer(e[0]);else{const s=e[0],r=Array.isArray(e[1])?e[1].map(i=>Me.toArrayBuffer(i)):[];n=Be.serialize(new Ea({type:s,values:r}))}super(n,Ea)}onInit(e){this.type=e.type,this.values=e.values}toTextObject(){const e=this.toTextObjectWithoutValue();return e.Value=this.values.map(n=>new Pt("",{"":n})),e}toTextObjectWithoutValue(){const e=this.toTextObjectEmpty();return e[Pt.NAME]===Sh.NAME&&(e[Pt.NAME]=Vo.toString(this.type)),e}}Sh.NAME="Attribute";class vL extends Sh{constructor(...e){var n;if(Me.isBufferSource(e[0]))super(e[0]);else{const s=new $y({printableString:e[0]});super(rL,[Be.serialize(s)])}(n=this.password)!==null&&n!==void 0||(this.password="")}onInit(e){if(super.onInit(e),this.values[0]){const n=Be.parse(this.values[0],$y);this.password=n.toString()}}toTextObject(){const e=this.toTextObjectWithoutValue();return e[Pt.VALUE]=this.password,e}}vL.NAME="Challenge Password";class tN extends Sh{constructor(...e){var n;if(Me.isBufferSource(e[0]))super(e[0]);else{const s=e[0],r=new Wl;for(const i of s)r.push(Be.parse(i.rawData,gi));super(eN,[Be.serialize(r)])}(n=this.items)!==null&&n!==void 0||(this.items=[])}onInit(e){if(super.onInit(e),this.values[0]){const n=Be.parse(this.values[0],Wl);this.items=n.map(s=>Tr.create(Be.serialize(s)))}}toTextObject(){const e=this.toTextObjectWithoutValue(),n=this.items.map(s=>s.toTextObject());for(const s of n)e[s[Pt.NAME]]=s;return e}}tN.NAME="Extensions";class pb{static register(e,n){this.items.set(e,n)}static create(e){const n=new Sh(e),s=this.items.get(n.type);return s?new s(e):n}}pb.items=new Map;const mb="crypto.signatureFormatter";class AJ{toAsnSignature(e,n){return Me.toArrayBuffer(n)}toWebSignature(e,n){return Me.toArrayBuffer(n)}}var b0;let gk=b0=class{static createPssParams(e,n){const s=b0.getHashAlgorithm(e);return s?new Xl({hashAlgorithm:s,maskGenAlgorithm:new $e({algorithm:rb,parameters:Be.serialize(s)}),saltLength:n}):null}static getHashAlgorithm(e){const n=Is.resolve(Qu);return typeof e=="string"?n.toAsnAlgorithm({name:e}):typeof e=="object"&&e&&"name"in e?n.toAsnAlgorithm(e):null}toAsnAlgorithm(e){switch(e.name.toLowerCase()){case"rsassa-pkcs1-v1_5":if("hash"in e){let n;if(typeof e.hash=="string")n=e.hash;else if(e.hash&&typeof e.hash=="object"&&"name"in e.hash&&typeof e.hash.name=="string")n=e.hash.name.toUpperCase();else throw new Error("Cannot get hash algorithm name");switch(n.toLowerCase()){case"sha-1":return new $e({algorithm:jy,parameters:null});case"sha-256":return new $e({algorithm:WS,parameters:null});case"sha-384":return new $e({algorithm:Ty,parameters:null});case"sha-512":return new $e({algorithm:Ry,parameters:null})}}else return new $e({algorithm:Yl,parameters:null});break;case"rsa-pss":if("hash"in e){if(!("saltLength"in e&&typeof e.saltLength=="number"))throw new Error("Cannot get 'saltLength' from 'alg' argument");const n=b0.createPssParams(e.hash,e.saltLength);if(!n)throw new Error("Cannot create PSS parameters");return new $e({algorithm:zf,parameters:Be.serialize(n)})}else return new $e({algorithm:zf,parameters:null})}return null}toWebAlgorithm(e){switch(e.algorithm){case Yl:return{name:"RSASSA-PKCS1-v1_5"};case jy:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case WS:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case Ty:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case Ry:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case zf:if(e.parameters){const n=Be.parse(e.parameters,Xl);return{name:"RSA-PSS",hash:Is.resolve(Qu).toWebAlgorithm(n.hashAlgorithm),saltLength:n.saltLength}}else return{name:"RSA-PSS"}}return null}};gk=b0=L([lb()],gk);Is.registerSingleton(Zp,gk);let yk=class{toAsnAlgorithm(e){switch(e.name.toLowerCase()){case"sha-1":return new $e({algorithm:Oy});case"sha-256":return new $e({algorithm:My});case"sha-384":return new $e({algorithm:Dy});case"sha-512":return new $e({algorithm:By})}return null}toWebAlgorithm(e){switch(e.algorithm){case Oy:return{name:"SHA-1"};case My:return{name:"SHA-256"};case Dy:return{name:"SHA-384"};case By:return{name:"SHA-512"}}return null}};yk=L([lb()],yk);Is.registerSingleton(Zp,yk);class Yr{addPadding(e,n){const s=Me.toUint8Array(n),r=new Uint8Array(e);return r.set(s,e-s.length),r.buffer}removePadding(e,n=!1){let s=Me.toUint8Array(e);for(let r=0;r<s.length;r++)if(s[r]){s=s.slice(r);break}if(n&&s[0]>127){const r=new Uint8Array(s.length+1);return r.set(s,1),r.buffer}return s.buffer}toAsnSignature(e,n){if(e.name==="ECDSA"){const s=e.namedCurve,r=Yr.namedCurveSize.get(s)||Yr.defaultNamedCurveSize,i=new Ay,o=Me.toUint8Array(n);return i.r=this.removePadding(o.slice(0,r),!0),i.s=this.removePadding(o.slice(r,r+r),!0),Be.serialize(i)}return null}toWebSignature(e,n){if(e.name==="ECDSA"){const s=Be.parse(n,Ay),r=e.namedCurve,i=Yr.namedCurveSize.get(r)||Yr.defaultNamedCurveSize,o=this.addPadding(i,this.removePadding(s.r)),c=this.addPadding(i,this.removePadding(s.s));return UZ(o,c)}return null}}Yr.namedCurveSize=new Map;Yr.defaultNamedCurveSize=32;const Px="1.3.101.110",oR="1.3.101.111",$x="1.3.101.112",lR="1.3.101.113";let vk=class{toAsnAlgorithm(e){let n=null;switch(e.name.toLowerCase()){case"ed25519":n=$x;break;case"x25519":n=Px;break;case"eddsa":switch(e.namedCurve.toLowerCase()){case"ed25519":n=$x;break;case"ed448":n=lR;break}break;case"ecdh-es":switch(e.namedCurve.toLowerCase()){case"x25519":n=Px;break;case"x448":n=oR;break}}return n?new $e({algorithm:n}):null}toWebAlgorithm(e){switch(e.algorithm){case $x:return{name:"Ed25519"};case lR:return{name:"EdDSA",namedCurve:"Ed448"};case Px:return{name:"X25519"};case oR:return{name:"ECDH-ES",namedCurve:"X448"}}return null}};vk=L([lb()],vk);Is.registerSingleton(Zp,vk);var Yd,Zd,Xd,Jd,Qd,ef,tf,mu;class jJ extends Ta{get subjectName(){return vt(this,Zd,"f")||un(this,Zd,new Ql(this.asn.certificationRequestInfo.subject),"f"),vt(this,Zd,"f")}get subject(){return vt(this,Xd,"f")||un(this,Xd,this.subjectName.toString(),"f"),vt(this,Xd,"f")}get signatureAlgorithm(){if(!vt(this,Jd,"f")){const e=Is.resolve(Qu);un(this,Jd,e.toWebAlgorithm(this.asn.signatureAlgorithm),"f")}return vt(this,Jd,"f")}get signature(){return vt(this,Qd,"f")||un(this,Qd,this.asn.signature,"f"),vt(this,Qd,"f")}get publicKey(){return vt(this,ef,"f")||un(this,ef,new Li(this.asn.certificationRequestInfo.subjectPKInfo),"f"),vt(this,ef,"f")}get attributes(){return vt(this,tf,"f")||un(this,tf,this.asn.certificationRequestInfo.attributes.map(e=>pb.create(Be.serialize(e))),"f"),vt(this,tf,"f")}get extensions(){if(!vt(this,mu,"f")){un(this,mu,[],"f");const e=this.getAttribute(eN);e instanceof tN&&un(this,mu,e.items,"f")}return vt(this,mu,"f")}get tbs(){return vt(this,Yd,"f")||un(this,Yd,this.asn.certificationRequestInfoRaw||Be.serialize(this.asn.certificationRequestInfo),"f"),vt(this,Yd,"f")}constructor(e){const n=Ta.isAsnEncoded(e)?[e,gp]:[e];super(n[0],n[1]),Yd.set(this,void 0),Zd.set(this,void 0),Xd.set(this,void 0),Jd.set(this,void 0),Qd.set(this,void 0),ef.set(this,void 0),tf.set(this,void 0),mu.set(this,void 0),this.tag=Sr.CertificateRequestTag}onInit(e){}getAttribute(e){for(const n of this.attributes)if(n.type===e)return n;return null}getAttributes(e){return this.attributes.filter(n=>n.type===e)}getExtension(e){for(const n of this.extensions)if(n.type===e)return n;return null}getExtensions(e){return this.extensions.filter(n=>n.type===e)}async verify(e=Ms.get()){const n={...this.publicKey.algorithm,...this.signatureAlgorithm},s=await this.publicKey.export(n,["verify"],e),r=Is.resolveAll(mb).reverse();let i=null;for(const c of r)if(i=c.toWebSignature(n,this.signature),i)break;if(!i)throw Error("Cannot convert WebCrypto signature value to ASN.1 format");return await e.subtle.verify(this.signatureAlgorithm,s,i,this.tbs)}toTextObject(){const e=this.toTextObjectEmpty(),n=Be.parse(this.rawData,gp),s=n.certificationRequestInfo,r=new Pt("",{Version:`${Vu[s.version]} (${s.version})`,Subject:this.subject,"Subject Public Key Info":this.publicKey});if(this.attributes.length){const i=new Pt("");for(const o of this.attributes){const c=o.toTextObject();i[c[Pt.NAME]]=c}r.Attributes=i}return e.Data=r,e.Signature=new Pt("",{Algorithm:Jl.serializeAlgorithm(n.signatureAlgorithm),"":n.signature}),e}}Yd=new WeakMap,Zd=new WeakMap,Xd=new WeakMap,Jd=new WeakMap,Qd=new WeakMap,ef=new WeakMap,tf=new WeakMap,mu=new WeakMap;jJ.NAME="PKCS#10 Certificate Request";var nf,sf,rf,af,of,lf,cf,uf,hf,df,gu,ff;class bL extends Ta{get publicKey(){return vt(this,ff,"f")||un(this,ff,new Li(this.asn.tbsCertificate.subjectPublicKeyInfo),"f"),vt(this,ff,"f")}get serialNumber(){if(!vt(this,sf,"f")){const e=this.asn.tbsCertificate;let n=new Uint8Array(e.serialNumber);n.length>1&&n[0]===0&&n[1]>127&&(n=n.slice(1)),un(this,sf,Ze.ToHex(n),"f")}return vt(this,sf,"f")}get subjectName(){return vt(this,rf,"f")||un(this,rf,new Ql(this.asn.tbsCertificate.subject),"f"),vt(this,rf,"f")}get subject(){return vt(this,af,"f")||un(this,af,this.subjectName.toString(),"f"),vt(this,af,"f")}get issuerName(){return vt(this,of,"f")||un(this,of,new Ql(this.asn.tbsCertificate.issuer),"f"),vt(this,of,"f")}get issuer(){return vt(this,lf,"f")||un(this,lf,this.issuerName.toString(),"f"),vt(this,lf,"f")}get notBefore(){if(!vt(this,cf,"f")){const e=this.asn.tbsCertificate.validity.notBefore.utcTime||this.asn.tbsCertificate.validity.notBefore.generalTime;if(!e)throw new Error("Cannot get 'notBefore' value");un(this,cf,e,"f")}return vt(this,cf,"f")}get notAfter(){if(!vt(this,uf,"f")){const e=this.asn.tbsCertificate.validity.notAfter.utcTime||this.asn.tbsCertificate.validity.notAfter.generalTime;if(!e)throw new Error("Cannot get 'notAfter' value");un(this,uf,e,"f")}return vt(this,uf,"f")}get signatureAlgorithm(){if(!vt(this,hf,"f")){const e=Is.resolve(Qu);un(this,hf,e.toWebAlgorithm(this.asn.signatureAlgorithm),"f")}return vt(this,hf,"f")}get signature(){return vt(this,df,"f")||un(this,df,this.asn.signatureValue,"f"),vt(this,df,"f")}get extensions(){return vt(this,gu,"f")||(un(this,gu,[],"f"),this.asn.tbsCertificate.extensions&&un(this,gu,this.asn.tbsCertificate.extensions.map(e=>Tr.create(Be.serialize(e))),"f")),vt(this,gu,"f")}get tbs(){return vt(this,nf,"f")||un(this,nf,this.asn.tbsCertificateRaw||Be.serialize(this.asn.tbsCertificate),"f"),vt(this,nf,"f")}constructor(e){const n=Ta.isAsnEncoded(e)?[e,qu]:[e];super(n[0],n[1]),nf.set(this,void 0),sf.set(this,void 0),rf.set(this,void 0),af.set(this,void 0),of.set(this,void 0),lf.set(this,void 0),cf.set(this,void 0),uf.set(this,void 0),hf.set(this,void 0),df.set(this,void 0),gu.set(this,void 0),ff.set(this,void 0),this.tag=Sr.CertificateTag}onInit(e){}getExtension(e){for(const n of this.extensions)if(typeof e=="string"){if(n.type===e)return n}else if(n instanceof e)return n;return null}getExtensions(e){return this.extensions.filter(n=>typeof e=="string"?n.type===e:n instanceof e)}async verify(e={},n=Ms.get()){let s,r;const i=e.publicKey;try{if(!i)s={...this.publicKey.algorithm,...this.signatureAlgorithm},r=await this.publicKey.export(s,["verify"],n);else if("publicKey"in i)s={...i.publicKey.algorithm,...this.signatureAlgorithm},r=await i.publicKey.export(s,["verify"],n);else if(i instanceof Li)s={...i.algorithm,...this.signatureAlgorithm},r=await i.export(s,["verify"],n);else if(Me.isBufferSource(i)){const h=new Li(i);s={...h.algorithm,...this.signatureAlgorithm},r=await h.export(s,["verify"],n)}else s={...i.algorithm,...this.signatureAlgorithm},r=i}catch{return!1}const o=Is.resolveAll(mb).reverse();let c=null;for(const h of o)if(c=h.toWebSignature(s,this.signature),c)break;if(!c)throw Error("Cannot convert ASN.1 signature value to WebCrypto format");const u=await n.subtle.verify(this.signatureAlgorithm,r,c,this.tbs);if(e.signatureOnly)return u;{const m=(e.date||new Date).getTime();return u&&this.notBefore.getTime()<m&&m<this.notAfter.getTime()}}async getThumbprint(...e){let n,s="SHA-1";return e[0]&&(e[0].subtle?n=e[0]:(s=e[0]||s,n=e[1])),n??(n=Ms.get()),await n.subtle.digest(s,this.rawData)}async isSelfSigned(e=Ms.get()){return this.subject===this.issuer&&await this.verify({signatureOnly:!0},e)}toTextObject(){const e=this.toTextObjectEmpty(),n=Be.parse(this.rawData,qu),s=n.tbsCertificate,r=new Pt("",{Version:`${Vu[s.version]} (${s.version})`,"Serial Number":s.serialNumber,"Signature Algorithm":Jl.serializeAlgorithm(s.signature),Issuer:this.issuer,Validity:new Pt("",{"Not Before":s.validity.notBefore.getTime(),"Not After":s.validity.notAfter.getTime()}),Subject:this.subject,"Subject Public Key Info":this.publicKey});if(s.issuerUniqueID&&(r["Issuer Unique ID"]=s.issuerUniqueID),s.subjectUniqueID&&(r["Subject Unique ID"]=s.subjectUniqueID),this.extensions.length){const i=new Pt("");for(const o of this.extensions){const c=o.toTextObject();i[c[Pt.NAME]]=c}r.Extensions=i}return e.Data=r,e.Signature=new Pt("",{Algorithm:Jl.serializeAlgorithm(n.signatureAlgorithm),"":n.signatureValue}),e}}nf=new WeakMap,sf=new WeakMap,rf=new WeakMap,af=new WeakMap,of=new WeakMap,lf=new WeakMap,cf=new WeakMap,uf=new WeakMap,hf=new WeakMap,df=new WeakMap,gu=new WeakMap,ff=new WeakMap;bL.NAME="Certificate";var cR;(function(t){t[t.unspecified=0]="unspecified",t[t.keyCompromise=1]="keyCompromise",t[t.cACompromise=2]="cACompromise",t[t.affiliationChanged=3]="affiliationChanged",t[t.superseded=4]="superseded",t[t.cessationOfOperation=5]="cessationOfOperation",t[t.certificateHold=6]="certificateHold",t[t.removeFromCRL=8]="removeFromCRL",t[t.privilegeWithdrawn=9]="privilegeWithdrawn",t[t.aACompromise=10]="aACompromise"})(cR||(cR={}));Tr.register(EB,uL);Tr.register(TB,hL);Tr.register(OB,dL);Tr.register(LB,fb);Tr.register(hS,bp);Tr.register(BB,fL);Tr.register(gS,mL);Tr.register(uS,gL);Tr.register(RB,yL);pb.register(rL,vL);pb.register(eN,tN);Is.registerSingleton(mb,AJ);Is.registerSingleton(mb,Yr);Yr.namedCurveSize.set("P-256",32);Yr.namedCurveSize.set("K-256",32);Yr.namedCurveSize.set("P-384",48);Yr.namedCurveSize.set("P-521",66);const TJ=["-----BEGIN CERTIFICATE-----","-----BEGIN X509 CERTIFICATE-----","-----BEGIN TRUSTED CERTIFICATE-----"],RJ=["-----BEGIN PRIVATE KEY-----","-----BEGIN RSA PRIVATE KEY-----","-----BEGIN EC PRIVATE KEY-----","-----BEGIN ENCRYPTED PRIVATE KEY-----"],OJ=["-----BEGIN PUBLIC KEY-----","-----BEGIN RSA PUBLIC KEY-----"],MJ=["-----BEGIN CERTIFICATE REQUEST-----","-----BEGIN NEW CERTIFICATE REQUEST-----"];function DJ(t){const e=t.trim();for(const n of TJ)if(e.startsWith(n))return{type:"certificate",content:e};for(const n of RJ)if(e.startsWith(n))return{type:"private-key",content:e};for(const n of OJ)if(e.startsWith(n))return{type:"public-key",content:e};for(const n of MJ)if(e.startsWith(n))return{type:"csr",content:e};return null}function BJ(t){try{const e=new bL(t),n=new Date,s={};for(const k of e.subject.split(", ")){const[C,N]=k.split("=");C&&N&&(s[C]=N)}const r={};for(const k of e.issuer.split(", ")){const[C,N]=k.split("=");C&&N&&(r[C]=N)}const i=e.notBefore,o=e.notAfter,c=n>o,u=n<i,h=Math.ceil((o.getTime()-n.getTime())/(1e3*60*60*24)),m=e.subject===e.issuer;let p="Unknown";try{const k=e.publicKey;p=k.algorithm.name||"Unknown","namedCurve"in k.algorithm&&(p+=` (${k.algorithm.namedCurve})`),"modulusLength"in k.algorithm&&(p+=` ${k.algorithm.modulusLength}-bit`)}catch{}const y=e.signatureAlgorithm.name||"Unknown";let v,x,_,S=!1;for(const k of e.extensions){if(k.type==="2.5.29.15")try{const C=k;v=[],C.usages&va.digitalSignature&&v.push("Digital Signature"),C.usages&va.keyEncipherment&&v.push("Key Encipherment"),C.usages&va.dataEncipherment&&v.push("Data Encipherment"),C.usages&va.keyAgreement&&v.push("Key Agreement"),C.usages&va.keyCertSign&&v.push("Certificate Signing"),C.usages&va.cRLSign&&v.push("CRL Signing"),C.usages&va.nonRepudiation&&v.push("Non-Repudiation")}catch{}if(k.type==="2.5.29.37")try{x=k.usages.map(N=>{const R=String(N);return{"1.3.6.1.5.5.7.3.1":"Server Authentication","1.3.6.1.5.5.7.3.2":"Client Authentication","1.3.6.1.5.5.7.3.3":"Code Signing","1.3.6.1.5.5.7.3.4":"Email Protection","1.3.6.1.5.5.7.3.8":"Time Stamping","1.3.6.1.5.5.7.3.9":"OCSP Signing"}[R]||R})}catch{}if(k.type==="2.5.29.17")try{_=k.names.items.map(N=>N.type==="dns"?`DNS:${N.value}`:N.type==="ip"?`IP:${N.value}`:N.type==="email"?`Email:${N.value}`:N.type==="url"?`URI:${N.value}`:String(N.value))}catch{}if(k.type==="2.5.29.19")try{S=k.ca}catch{}}return{subject:s,issuer:r,serialNumber:e.serialNumber,notBefore:i,notAfter:o,isExpired:c,isNotYetValid:u,daysUntilExpiry:h,keyAlgorithm:p,signatureAlgorithm:y,keyUsage:v,extKeyUsage:x,subjectAltNames:_,isSelfSigned:m,isCA:S}}catch(e){return console.error("Failed to parse certificate:",e),null}}function uR(t){return t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",timeZoneName:"short"})}function zx(t){const e=["CN","O","OU","L","ST","C"],n=[];for(const s of e)t[s]&&n.push(`${s}=${t[s]}`);for(const[s,r]of Object.entries(t))e.includes(s)||n.push(`${s}=${r}`);return n.join(", ")}function bk(t){const e=De.c(33),{name:n,pem:s}=t,[r,i]=V.useState(!1);let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=()=>i($J),e[0]=o):o=e[0];const c=o,[u,h]=V.useState(!1);let m,p;if(e[1]!==u||e[2]!==r||e[3]!==n||e[4]!==s){p=Symbol.for("react.early_return_sentinel");e:{const y=BJ(s);let v;e[7]!==s?(v=async()=>{await navigator.clipboard.writeText(s),h(!0),setTimeout(()=>h(!1),2e3)},e[7]=s,e[8]=v):v=e[8];const x=v;if(!y){let G;e[9]===Symbol.for("react.memo_cache_sentinel")?(G=f.jsx(iy,{size:14,className:"text-amber-500"}),e[9]=G):G=e[9];let z;e[10]!==n?(z=f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n}),e[10]=n,e[11]=z):z=e[11];let K;e[12]===Symbol.for("react.memo_cache_sentinel")?(K=f.jsx("span",{className:"text-xs text-neutral-500",children:"Failed to parse certificate"}),e[12]=K):K=e[12];let Z;e[13]!==z?(Z=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-3",children:f.jsxs("div",{className:"flex items-center gap-2",children:[G,z,K]})}),e[13]=z,e[14]=Z):Z=e[14],p=Z;break e}let _="text-emerald-500",S="bg-emerald-100 dark:bg-emerald-500/20",k="Valid";y.isExpired?(_="text-red-500",S="bg-red-100 dark:bg-red-500/20",k="Expired"):y.isNotYetValid?(_="text-amber-500",S="bg-amber-100 dark:bg-amber-500/20",k="Not Yet Valid"):y.daysUntilExpiry<=30&&(_="text-amber-500",S="bg-amber-100 dark:bg-amber-500/20",k=`Expires in ${y.daysUntilExpiry} days`);let C;e[15]===Symbol.for("react.memo_cache_sentinel")?(C=f.jsx(hh,{size:14,className:"text-blue-500 dark:text-blue-400"}),e[15]=C):C=e[15];let N;e[16]!==n?(N=f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n}),e[16]=n,e[17]=N):N=e[17];const R=`text-xs px-1.5 py-0.5 rounded ${S} ${_}`;let O;e[18]!==k||e[19]!==R?(O=f.jsx("span",{className:R,children:k}),e[18]=k,e[19]=R,e[20]=O):O=e[20];let E;e[21]!==x?(E=G=>{G.stopPropagation(),x()},e[21]=x,e[22]=E):E=e[22];let D;e[23]!==u?(D=u?f.jsx(Nn,{size:14,className:"text-emerald-500"}):f.jsx(xs,{size:14,className:"text-neutral-400"}),e[23]=u,e[24]=D):D=e[24];let B;e[25]!==D||e[26]!==E?(B=f.jsx("button",{onClick:E,className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy certificate",children:D}),e[25]=D,e[26]=E,e[27]=B):B=e[27];let q;e[28]!==r?(q=r?f.jsx(ps,{size:14,className:"text-neutral-400"}):f.jsx(Xr,{size:14,className:"text-neutral-400"}),e[28]=r,e[29]=q):q=e[29];let P;e[30]!==B||e[31]!==q?(P=f.jsxs("div",{className:"flex items-center gap-1",children:[B,q]}),e[30]=B,e[31]=q,e[32]=P):P=e[32],m=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:c,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[C,N,O,y.isCA&&f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-purple-100 dark:bg-purple-500/20 text-purple-600 dark:text-purple-400",children:"CA"}),y.isSelfSigned&&f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-neutral-200 dark:bg-neutral-600/50 text-neutral-600 dark:text-neutral-400",children:"Self-Signed"})]}),P]}),r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3 space-y-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Subject"}),f.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300",children:y.subject.CN||zx(y.subject)}),y.subject.CN&&Object.keys(y.subject).length>1&&f.jsx("div",{className:"text-xs font-mono text-neutral-500 mt-0.5",children:zx(y.subject)})]}),!y.isSelfSigned&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Issuer"}),f.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300",children:y.issuer.CN||zx(y.issuer)})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Not Before"}),f.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300",children:uR(y.notBefore)})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Not After"}),f.jsxs("div",{className:`text-xs font-mono flex items-center gap-1 ${y.isExpired?"text-red-500":y.daysUntilExpiry<=30?"text-amber-500":"text-neutral-700 dark:text-neutral-300"}`,children:[y.isExpired?f.jsx(iy,{size:12}):y.daysUntilExpiry<=30?f.jsx(Oa,{size:12}):f.jsx(OW,{size:12,className:"text-emerald-500"}),uR(y.notAfter)]})]})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Serial Number"}),f.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300 break-all",children:y.serialNumber})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Key Algorithm"}),f.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300",children:y.keyAlgorithm})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Signature Algorithm"}),f.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300",children:y.signatureAlgorithm})]})]}),y.subjectAltNames&&y.subjectAltNames.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Subject Alternative Names"}),f.jsx("div",{className:"flex flex-wrap gap-1",children:y.subjectAltNames.map(PJ)})]}),y.keyUsage&&y.keyUsage.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Key Usage"}),f.jsx("div",{className:"flex flex-wrap gap-1",children:y.keyUsage.map(IJ)})]}),y.extKeyUsage&&y.extKeyUsage.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Extended Key Usage"}),f.jsx("div",{className:"flex flex-wrap gap-1",children:y.extKeyUsage.map(LJ)})]})]})]})}e[1]=u,e[2]=r,e[3]=n,e[4]=s,e[5]=m,e[6]=p}else m=e[5],p=e[6];return p!==Symbol.for("react.early_return_sentinel")?p:m}function LJ(t,e){return f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-neutral-200 dark:bg-neutral-600/50 text-neutral-600 dark:text-neutral-400",children:t},e)}function IJ(t,e){return f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-neutral-200 dark:bg-neutral-600/50 text-neutral-600 dark:text-neutral-400",children:t},e)}function PJ(t,e){return f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-blue-100 dark:bg-blue-500/20 text-blue-600 dark:text-blue-400 font-mono",children:t},e)}function $J(t){return!t}function zJ(t){const e=De.c(30),{name:n,pem:s}=t,[r,i]=V.useState(!1);let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=()=>i(UJ),e[0]=o):o=e[0];const c=o,[u,h]=V.useState(!1);let m;e[1]!==s?(m=async()=>{await navigator.clipboard.writeText(s),h(!0),setTimeout(()=>h(!1),2e3)},e[1]=s,e[2]=m):m=e[2];const p=m;let y;e[3]===Symbol.for("react.memo_cache_sentinel")?(y=f.jsx(hh,{size:14,className:"text-red-500 dark:text-red-400"}),e[3]=y):y=e[3];let v;e[4]!==n?(v=f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n}),e[4]=n,e[5]=v):v=e[5];let x;e[6]===Symbol.for("react.memo_cache_sentinel")?(x=f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-red-100 dark:bg-red-500/20 text-red-600 dark:text-red-400",children:"Private Key"}),e[6]=x):x=e[6];let _;e[7]!==v?(_=f.jsxs("div",{className:"flex items-center gap-2",children:[y,v,x]}),e[7]=v,e[8]=_):_=e[8];let S;e[9]!==p?(S=B=>{B.stopPropagation(),p()},e[9]=p,e[10]=S):S=e[10];let k;e[11]!==u?(k=u?f.jsx(Nn,{size:14,className:"text-emerald-500"}):f.jsx(xs,{size:14,className:"text-neutral-400"}),e[11]=u,e[12]=k):k=e[12];let C;e[13]!==S||e[14]!==k?(C=f.jsx("button",{onClick:S,className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy private key",children:k}),e[13]=S,e[14]=k,e[15]=C):C=e[15];let N;e[16]!==r?(N=r?f.jsx(ps,{size:14,className:"text-neutral-400"}):f.jsx(Xr,{size:14,className:"text-neutral-400"}),e[16]=r,e[17]=N):N=e[17];let R;e[18]!==N||e[19]!==C?(R=f.jsxs("div",{className:"flex items-center gap-1",children:[C,N]}),e[18]=N,e[19]=C,e[20]=R):R=e[20];let O;e[21]!==R||e[22]!==_?(O=f.jsxs("button",{onClick:c,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[_,R]}),e[21]=R,e[22]=_,e[23]=O):O=e[23];let E;e[24]!==r||e[25]!==s?(E=r&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:s})}),e[24]=r,e[25]=s,e[26]=E):E=e[26];let D;return e[27]!==O||e[28]!==E?(D=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[O,E]}),e[27]=O,e[28]=E,e[29]=D):D=e[29],D}function UJ(t){return!t}function _L(t){const e=De.c(30),{name:n,pem:s}=t,[r,i]=V.useState(!1);let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=()=>i(HJ),e[0]=o):o=e[0];const c=o,[u,h]=V.useState(!1);let m;e[1]!==s?(m=async()=>{await navigator.clipboard.writeText(s),h(!0),setTimeout(()=>h(!1),2e3)},e[1]=s,e[2]=m):m=e[2];const p=m;let y;e[3]===Symbol.for("react.memo_cache_sentinel")?(y=f.jsx(hh,{size:14,className:"text-amber-500 dark:text-amber-400"}),e[3]=y):y=e[3];let v;e[4]!==n?(v=f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n}),e[4]=n,e[5]=v):v=e[5];let x;e[6]===Symbol.for("react.memo_cache_sentinel")?(x=f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-amber-100 dark:bg-amber-500/20 text-amber-600 dark:text-amber-400",children:"Certificate Request"}),e[6]=x):x=e[6];let _;e[7]!==v?(_=f.jsxs("div",{className:"flex items-center gap-2",children:[y,v,x]}),e[7]=v,e[8]=_):_=e[8];let S;e[9]!==p?(S=B=>{B.stopPropagation(),p()},e[9]=p,e[10]=S):S=e[10];let k;e[11]!==u?(k=u?f.jsx(Nn,{size:14,className:"text-emerald-500"}):f.jsx(xs,{size:14,className:"text-neutral-400"}),e[11]=u,e[12]=k):k=e[12];let C;e[13]!==S||e[14]!==k?(C=f.jsx("button",{onClick:S,className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy CSR",children:k}),e[13]=S,e[14]=k,e[15]=C):C=e[15];let N;e[16]!==r?(N=r?f.jsx(ps,{size:14,className:"text-neutral-400"}):f.jsx(Xr,{size:14,className:"text-neutral-400"}),e[16]=r,e[17]=N):N=e[17];let R;e[18]!==N||e[19]!==C?(R=f.jsxs("div",{className:"flex items-center gap-1",children:[C,N]}),e[18]=N,e[19]=C,e[20]=R):R=e[20];let O;e[21]!==R||e[22]!==_?(O=f.jsxs("button",{onClick:c,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[_,R]}),e[21]=R,e[22]=_,e[23]=O):O=e[23];let E;e[24]!==r||e[25]!==s?(E=r&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:s})}),e[24]=r,e[25]=s,e[26]=E):E=e[26];let D;return e[27]!==O||e[28]!==E?(D=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[O,E]}),e[27]=O,e[28]=E,e[29]=D):D=e[29],D}function HJ(t){return!t}function FJ(t){const e=De.c(6),{name:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=f.jsx(hh,{size:14,className:"text-blue-500 dark:text-blue-400"}),e[0]=s):s=e[0];let r;e[1]!==n?(r=f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n}),e[1]=n,e[2]=r):r=e[2];let i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i=f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-blue-100 dark:bg-blue-500/20 text-blue-600 dark:text-blue-400",children:"Public Key"}),e[3]=i):i=e[3];let o;return e[4]!==r?(o=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-3",children:f.jsxs("div",{className:"flex items-center gap-2",children:[s,r,i]})}),e[4]=r,e[5]=o):o=e[5],o}function VJ(t){const e=t?.find(p=>p.type==="Approved"),n=t?.find(p=>p.type==="Denied"),s=t?.find(p=>p.type==="Ready"),r=t?.find(p=>p.type==="InvalidRequest"),i=e?.status==="True",o=n?.status==="True",c=s?.status==="True",u=s?.status==="False"||r?.status==="True";let h,m;return c?(h=s?.reason,m=s?.message):u?(h=s?.reason||r?.reason,m=s?.message||r?.message):o?(h=n?.reason,m=n?.message):i&&(h=e?.reason,m=e?.message),{approved:i,denied:o,ready:c,failed:u,reason:h,message:m}}function qJ(t){return t.ready?{text:"Issued",level:"success"}:t.failed||t.denied?{text:t.denied?"Denied":"Failed",level:"error"}:t.approved?{text:"Approved",level:"warning"}:{text:"Pending",level:"warning"}}function KJ(t){return t.ready?f.jsx(vi,{size:14,className:"text-emerald-400"}):t.failed||t.denied?f.jsx(Ra,{size:14,className:"text-red-400"}):t.approved?f.jsx(Ln,{size:14,className:"text-amber-400 animate-spin"}):f.jsx(ch,{size:14,className:"text-amber-400"})}function WJ(t){if(!t)return"Default (90d)";const e=t.match(/^(\d+)h/);if(e){const n=parseInt(e[1],10);return n>=8760?`${Math.round(n/8760)}y`:n>=720?`${Math.round(n/720)}mo`:n>=24?`${Math.round(n/24)}d`:`${n}h`}return t}function hR(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function Ux(t){if(!t)return null;try{return atob(t)}catch{return null}}const GJ={kinds:["CertificateRequest","CertificateRequests"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata,i=r?.namespace;if(!n)return{sections:[]};const o=VJ(s?.conditions),c=qJ(o),u=r?.annotations?.["cert-manager.io/certificate-name"],h=r?.annotations?.["cert-manager.io/certificate-revision"],m=[{id:"status",data:{type:"status-cards",items:[{label:"Status",value:c.text,status:c.level,icon:KJ(o)},...o.approved?[{label:"Approved",value:"Yes",status:"success",icon:f.jsx(vi,{size:14,className:"text-emerald-400"})}]:[],...n.isCA?[{label:"Type",value:"CA Certificate",status:"neutral",icon:f.jsx(sy,{size:14,className:"text-purple-400"})}]:[{label:"Type",value:"TLS Certificate",status:"neutral",icon:f.jsx(sy,{size:14,className:"text-blue-400"})}],...h?[{label:"Revision",value:h,status:"neutral"}]:[]]}}];if(u&&m.push({id:"parent-certificate",title:"Parent Certificate",data:{type:"custom",render:()=>{const p=f.jsx("div",{className:`bg-blue-500/10 border border-blue-500/30 rounded-lg p-3 ${i?"hover:bg-blue-500/15 transition-colors cursor-pointer":""}`,children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(uh,{size:14,className:"text-blue-400"}),f.jsx("span",{className:"text-sm text-blue-300",children:u})]})});return i?f.jsx(ac,{to:"/cluster/$context/$resourceType/$name",params:{context:t,resourceType:"certificates.cert-manager.io",name:u},search:y=>({...y,namespace:i}),children:p}):p}}}),m.push({id:"details",title:"Request Details",data:{type:"info-grid",columns:2,items:[{label:"Duration",value:WJ(n.duration)},...r?.creationTimestamp?[{label:"Created",value:hR(r.creationTimestamp)}]:[],...n.username?[{label:"Requested By",value:n.username.split(":").pop()||n.username}]:[]]}}),m.push({id:"issuer",title:"Issuer",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(Mp,{size:14,className:"text-purple-400"}),f.jsx("span",{className:"text-sm font-medium text-purple-300",children:n.issuerRef.kind??"Issuer"})]}),f.jsx("div",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:n.issuerRef.name}),n.issuerRef.group&&f.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:n.issuerRef.group})]})}}),(n.username||n.groups?.length)&&m.push({id:"requester",title:"Requester",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(vD,{size:14,className:"text-neutral-600 dark:text-neutral-400"}),f.jsx("span",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Identity"})]}),n.username&&f.jsxs("div",{className:"text-xs text-neutral-700 dark:text-neutral-400 mb-1",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"User:"})," ",f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-mono",children:n.username})]}),n.groups&&n.groups.length>0&&f.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:n.groups.map((p,y)=>f.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-neutral-200 dark:bg-neutral-700 text-neutral-700 dark:text-neutral-400",children:p},y))})]})}}),n.usages?.length&&m.push({id:"usages",title:"Key Usages",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.usages.map((p,y)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-neutral-200 dark:bg-neutral-700 text-neutral-700 dark:text-neutral-300",children:p},y))})}}),s?.certificate){const p=Ux(s.certificate),y=s.ca?Ux(s.ca):null;m.push({id:"certificate-issued",title:"Certificate",data:{type:"custom",render:()=>f.jsxs("div",{className:"space-y-3",children:[p&&f.jsx(bk,{name:"Issued Certificate",pem:p}),y&&f.jsx(bk,{name:"CA Certificate",pem:y})]})}})}if(n.request){const p=Ux(n.request);p&&m.push({id:"csr",title:"Certificate Signing Request",data:{type:"custom",render:()=>f.jsx(_L,{name:"Certificate Request",pem:p})}})}return s?.failureTime&&m.push({id:"failure",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 text-red-400",children:[f.jsx(Oa,{size:14}),f.jsx("span",{className:"text-sm font-medium",children:"Failed"})]}),f.jsxs("div",{className:"text-xs text-neutral-500 mt-1",children:["Failure time: ",hR(s.failureTime)]}),o.message&&f.jsx("div",{className:"text-xs text-red-400/70 mt-1",children:o.message})]})}}),{sections:m}}};function xL(t){if(t)return t instanceof Date?t.toISOString():t}function dR(t){const e=xL(t);return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"N/A"}function fR(t){const e=xL(t);if(!e)return"N/A";const n=new Date(e),r=new Date().getTime()-n.getTime(),i=Math.floor(r/1e3),o=Math.floor(i/60),c=Math.floor(o/60),u=Math.floor(c/24);return u>0?`${u}d ago`:c>0?`${c}h ago`:o>0?`${o}m ago`:i>0?`${i}s ago`:"just now"}const YJ={kinds:["Event","Events"],adapt(t,e){const n=e.metadata,s=e.involvedObject,r=e.source,i=e.type==="Warning",o=e.count??1,c=e.firstTimestamp||e.eventTime||n?.creationTimestamp,u=e.lastTimestamp||e.eventTime,h=[{id:"status",data:{type:"status-cards",items:[{label:"Type",value:e.type||"Normal",status:i?"warning":"success",icon:i?f.jsx(iy,{size:14,className:"text-amber-400"}):f.jsx(vG,{size:14,className:"text-emerald-400"})},{label:"Reason",value:e.reason||"Unknown",status:"neutral"},...o>1?[{label:"Count",value:o,status:"neutral",icon:f.jsx(tS,{size:14,className:"text-blue-400"})}]:[]]}}];return e.message&&h.push({id:"message",title:"Message",data:{type:"custom",render:()=>f.jsx("div",{className:`p-3 rounded-lg border ${i?"bg-amber-500/10 border-amber-500/30":"bg-neutral-100 dark:bg-neutral-900/50 border-neutral-200 dark:border-neutral-700"}`,children:f.jsx("p",{className:"text-sm text-neutral-700 dark:text-neutral-300 whitespace-pre-wrap",children:e.message})})}}),s&&s.name&&h.push({id:"involved-object",title:"Involved Object",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(uY,{size:14,className:"text-blue-400"}),f.jsx("span",{className:"text-sm font-medium text-blue-300",children:s.kind||"Resource"})]}),f.jsxs("div",{className:"space-y-1 text-xs",children:[f.jsxs("div",{className:"text-neutral-300",children:[f.jsx("span",{className:"text-neutral-500",children:"Name: "}),f.jsx("span",{className:"text-cyan-400 font-mono",children:s.name})]}),s.namespace&&f.jsxs("div",{className:"text-neutral-300",children:[f.jsx("span",{className:"text-neutral-500",children:"Namespace: "}),f.jsx("span",{className:"text-purple-400",children:s.namespace})]}),s.fieldPath&&f.jsxs("div",{className:"text-neutral-300",children:[f.jsx("span",{className:"text-neutral-500",children:"Field: "}),f.jsx("span",{className:"text-neutral-400 font-mono",children:s.fieldPath})]}),s.apiVersion&&f.jsxs("div",{className:"text-neutral-300",children:[f.jsx("span",{className:"text-neutral-500",children:"API Version: "}),f.jsx("span",{className:"text-neutral-400",children:s.apiVersion})]})]})]})}}),h.push({id:"timestamps",title:"Timestamps",data:{type:"custom",render:()=>f.jsxs("div",{className:"space-y-2",children:[c&&f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx(uD,{size:14,className:"text-neutral-500"}),f.jsx("span",{className:"text-neutral-500",children:"First seen:"}),f.jsx("span",{className:"text-neutral-300",children:dR(c)}),f.jsxs("span",{className:"text-neutral-500",children:["(",fR(c),")"]})]}),u&&o>1&&f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx(Ln,{size:14,className:"text-neutral-500"}),f.jsx("span",{className:"text-neutral-500",children:"Last seen:"}),f.jsx("span",{className:"text-neutral-300",children:dR(u)}),f.jsxs("span",{className:"text-neutral-500",children:["(",fR(u),")"]})]})]})}}),r&&(r.component||r.host)&&h.push({id:"source",title:"Source",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(mi,{size:14,className:"text-neutral-400"}),f.jsx("span",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Event Source"})]}),f.jsxs("div",{className:"space-y-1 text-xs",children:[r.component&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-300",children:[f.jsx("span",{className:"text-neutral-500",children:"Component: "}),f.jsx("span",{className:"text-cyan-400",children:r.component})]}),r.host&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-300",children:[f.jsx("span",{className:"text-neutral-500",children:"Host: "}),f.jsx("span",{className:"text-neutral-400 font-mono",children:r.host})]})]})]})}}),(e.reportingComponent||e.reportingInstance)&&h.push({id:"reporting",title:"Reporting",data:{type:"info-grid",columns:2,items:[...e.reportingComponent?[{label:"Component",value:e.reportingComponent}]:[],...e.reportingInstance?[{label:"Instance",value:e.reportingInstance}]:[],...e.action?[{label:"Action",value:e.action}]:[]]}}),e.related&&e.related.name&&e.related.name!==s?.name&&h.push({id:"related",title:"Related Object",data:{type:"info-grid",columns:2,items:[{label:"Kind",value:e.related.kind||"Unknown"},{label:"Name",value:e.related.name},...e.related.namespace?[{label:"Namespace",value:e.related.namespace}]:[]]}}),{sections:h}}};function ZJ(t){switch(t){case"LoadBalancer":return{label:"LoadBalancer",status:"success",icon:f.jsx(Cr,{size:14,className:"text-emerald-400"})};case"NodePort":return{label:"NodePort",status:"warning",icon:f.jsx(mi,{size:14,className:"text-amber-400"})};case"ExternalName":return{label:"ExternalName",status:"neutral",icon:f.jsx(aC,{size:14,className:"text-purple-400"})};default:return{label:t||"ClusterIP",status:"neutral",icon:f.jsx(Vn,{size:14,className:"text-blue-400"})}}}const XJ={kinds:["Service","Services"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=ZJ(n.type),i=n.type==="LoadBalancer",o=s?.loadBalancer?.ingress,c=i&&o&&o.length>0,u=[{id:"status",data:{type:"status-cards",items:[{label:"Type",value:r.label,status:r.status,icon:r.icon},...n.clusterIP&&n.clusterIP!=="None"?[{label:"Cluster IP",value:n.clusterIP,status:"neutral",icon:f.jsx(Vn,{size:14,className:"text-blue-400"})}]:[],...n.clusterIP==="None"?[{label:"Cluster IP",value:"Headless",status:"neutral",icon:f.jsx(Vn,{size:14,className:"text-neutral-400"})}]:[],...n.externalName?[{label:"External Name",value:n.externalName,status:"neutral",icon:f.jsx(aC,{size:14,className:"text-purple-400"})}]:[]]}}];return n.ports&&n.ports.length>0&&u.push({id:"ports",title:"Ports",data:{type:"custom",render:()=>f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsxs("table",{className:"w-full text-xs",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700",children:[f.jsx("th",{className:"pb-2 text-left text-neutral-500 font-medium",children:"Name"}),f.jsx("th",{className:"pb-2 text-left text-neutral-500 font-medium",children:"Protocol"}),f.jsx("th",{className:"pb-2 text-right text-neutral-500 font-medium",children:"Port"}),f.jsx("th",{className:"pb-2 text-right text-neutral-500 font-medium",children:"Target"}),f.jsx("th",{className:"pb-2 text-right text-neutral-500 font-medium",children:"NodePort"})]})}),f.jsx("tbody",{children:n.ports.map((m,p)=>f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-2 text-neutral-900 dark:text-neutral-300",children:m.name||f.jsx("span",{className:"text-neutral-400 italic",children:"unnamed"})}),f.jsx("td",{className:"py-2",children:f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-neutral-200 dark:bg-neutral-700 text-neutral-600 dark:text-neutral-400",children:m.protocol||"TCP"})}),f.jsx("td",{className:"py-2 text-right font-mono text-neutral-700 dark:text-neutral-300",children:m.port}),f.jsx("td",{className:"py-2 text-right font-mono text-neutral-700 dark:text-neutral-300",children:m.targetPort||f.jsx("span",{className:"text-neutral-400",children:""})}),f.jsx("td",{className:"py-2 text-right font-mono text-amber-500 dark:text-amber-400",children:m.nodePort||f.jsx("span",{className:"text-neutral-400",children:""})})]},p))})]})})}}),i&&u.push({id:"loadbalancer",title:"Load Balancer",data:{type:"custom",render:()=>f.jsx("div",{className:`rounded-lg p-3 border ${c?"bg-emerald-500/10 border-emerald-500/30":"bg-amber-500/10 border-amber-500/30"}`,children:c?f.jsx("div",{className:"space-y-2",children:o.map((m,p)=>f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Cr,{size:14,className:"text-emerald-400"}),f.jsx("span",{className:"text-sm font-mono text-emerald-300",children:m.ip||m.hostname||"N/A"})]},p))}):f.jsxs("div",{className:"flex items-center gap-2 text-amber-400",children:[f.jsx(Cr,{size:14}),f.jsx("span",{className:"text-sm",children:"Pending external IP assignment..."})]})})}}),n.externalIPs&&n.externalIPs.length>0&&u.push({id:"external-ips",title:"External IPs",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.externalIPs.map((m,p)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-purple-500/20 text-purple-300 font-mono",children:m},p))})}}),n.selector&&Object.keys(n.selector).length>0&&u.push({id:"selector",data:{type:"labels",labels:n.selector,title:"Selector"}}),(n.externalTrafficPolicy||n.internalTrafficPolicy||n.sessionAffinity!=="None")&&u.push({id:"traffic",title:"Traffic Configuration",data:{type:"info-grid",columns:2,items:[...n.externalTrafficPolicy?[{label:"External Traffic",value:n.externalTrafficPolicy,color:n.externalTrafficPolicy==="Local"?"text-amber-400":void 0}]:[],...n.internalTrafficPolicy?[{label:"Internal Traffic",value:n.internalTrafficPolicy}]:[],...n.sessionAffinity&&n.sessionAffinity!=="None"?[{label:"Session Affinity",value:n.sessionAffinity,color:"text-purple-400"}]:[],...n.sessionAffinityConfig?.clientIP?.timeoutSeconds?[{label:"Affinity Timeout",value:`${n.sessionAffinityConfig.clientIP.timeoutSeconds}s`}]:[],...n.healthCheckNodePort?[{label:"Health Check Port",value:n.healthCheckNodePort}]:[]]}}),i&&(n.loadBalancerIP||n.loadBalancerSourceRanges?.length||n.loadBalancerClass)&&u.push({id:"lb-config",title:"Load Balancer Configuration",data:{type:"custom",render:()=>f.jsxs("div",{className:"space-y-2",children:[n.loadBalancerIP&&f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx("span",{className:"text-neutral-500",children:"Requested IP:"}),f.jsx("span",{className:"text-neutral-300 font-mono",children:n.loadBalancerIP})]}),n.loadBalancerClass&&f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx("span",{className:"text-neutral-500",children:"Class:"}),f.jsx("span",{className:"text-neutral-300",children:n.loadBalancerClass})]}),n.loadBalancerSourceRanges&&n.loadBalancerSourceRanges.length>0&&f.jsxs("div",{className:"text-sm",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(Dp,{size:14,className:"text-neutral-500"}),f.jsx("span",{className:"text-neutral-500",children:"Source Ranges:"})]}),f.jsx("div",{className:"flex flex-wrap gap-1 ml-5",children:n.loadBalancerSourceRanges.map((m,p)=>f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-amber-500/20 text-amber-300 font-mono",children:m},p))})]}),n.allocateLoadBalancerNodePorts===!1&&f.jsx("div",{className:"text-xs text-neutral-500",children:"NodePort allocation disabled"})]})}}),{sections:u}}};async function JJ(t){try{const e=atob(t),n=atob(e),s=new Uint8Array(n.length);for(let y=0;y<n.length;y++)s[y]=n.charCodeAt(y);const r=new DecompressionStream("gzip"),i=r.writable.getWriter();i.write(s),i.close();const o=r.readable.getReader(),c=[];for(;;){const{done:y,value:v}=await o.read();if(y)break;c.push(v)}const u=c.reduce((y,v)=>y+v.length,0),h=new Uint8Array(u);let m=0;for(const y of c)h.set(y,m),m+=y.length;const p=new TextDecoder().decode(h);return JSON.parse(p)}catch(e){return console.error("Failed to decode Helm release:",e),null}}function QJ(t){switch(t?.toLowerCase()){case"deployed":return"text-emerald-400";case"failed":return"text-red-400";case"pending-install":case"pending-upgrade":case"pending-rollback":return"text-yellow-400";case"uninstalling":case"superseded":return"text-neutral-400";default:return"text-neutral-300"}}function eQ(t){const e=De.c(55),{encoded:n}=t,[s,r]=V.useState(null),[i,o]=V.useState(null),[c,u]=V.useState(!0),[h,m]=V.useState(!1),[p,y]=V.useState(!1),[v,x]=V.useState(!1);let _;e[0]===Symbol.for("react.memo_cache_sentinel")?(_=()=>m(sQ),e[0]=_):_=e[0];const S=_;let k;e[1]===Symbol.for("react.memo_cache_sentinel")?(k=()=>y(nQ),e[1]=k):k=e[1];const C=k;let N;e[2]===Symbol.for("react.memo_cache_sentinel")?(N=()=>x(tQ),e[2]=N):N=e[2];const R=N,[O,E]=V.useState(null);let D,B;e[3]!==n?(D=()=>{JJ(n).then(Je=>{r(Je),u(!1)}).catch(()=>{o("Failed to decode Helm release data"),u(!1)})},B=[n],e[3]=n,e[4]=D,e[5]=B):(D=e[4],B=e[5]),V.useEffect(D,B);let q;e[6]===Symbol.for("react.memo_cache_sentinel")?(q=async(Je,Rt)=>{await navigator.clipboard.writeText(Rt),E(Je),setTimeout(()=>E(null),2e3)},e[6]=q):q=e[6];const P=q;if(c){let Je;return e[7]===Symbol.for("react.memo_cache_sentinel")?(Je=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Decoding Helm release..."})}),e[7]=Je):Je=e[7],Je}if(i||!s){const Je=i||"Failed to decode release";let Rt;return e[8]!==Je?(Rt=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("span",{className:"text-xs text-red-600 dark:text-red-400",children:Je})}),e[8]=Je,e[9]=Rt):Rt=e[9],Rt}const G=s.chart?.metadata,z=s.info;let K;e[10]!==G?(K=G?.description&&f.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:G.description}),e[10]=G,e[11]=K):K=e[11];let Z;e[12]===Symbol.for("react.memo_cache_sentinel")?(Z=f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 dark:text-neutral-500 whitespace-nowrap",children:"Release"}),e[12]=Z):Z=e[12];const W=s.name||"Unknown";let I;e[13]!==W?(I=f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[Z,f.jsx("td",{className:"py-1.5 text-neutral-900 dark:text-neutral-300",children:W})]}),e[13]=W,e[14]=I):I=e[14];let Y;e[15]===Symbol.for("react.memo_cache_sentinel")?(Y=f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 dark:text-neutral-500 whitespace-nowrap",children:"Revision"}),e[15]=Y):Y=e[15];const J=s.version||1;let $;e[16]!==J?($=f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[Y,f.jsx("td",{className:"py-1.5 text-neutral-900 dark:text-neutral-300",children:J})]}),e[16]=J,e[17]=$):$=e[17];let j;e[18]===Symbol.for("react.memo_cache_sentinel")?(j=f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 dark:text-neutral-500 whitespace-nowrap",children:"Status"}),e[18]=j):j=e[18];const M=z?.status;let F;e[19]!==M?(F=QJ(M),e[19]=M,e[20]=F):F=e[20];const A=`py-1.5 font-medium ${F}`,Q=z?.status||"Unknown";let se;e[21]!==A||e[22]!==Q?(se=f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[j,f.jsx("td",{className:A,children:Q})]}),e[21]=A,e[22]=Q,e[23]=se):se=e[23];let X;e[24]!==G?(X=G&&f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 dark:text-neutral-500 whitespace-nowrap",children:"Chart"}),f.jsxs("td",{className:"py-1.5 text-neutral-900 dark:text-neutral-300",children:[G.name,"-",G.version]})]}),e[24]=G,e[25]=X):X=e[25];let ae;e[26]!==G?(ae=G?.appVersion&&f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 dark:text-neutral-500 whitespace-nowrap",children:"App Version"}),f.jsx("td",{className:"py-1.5 text-cyan-600 dark:text-cyan-400",children:G.appVersion})]}),e[26]=G,e[27]=ae):ae=e[27];let ke;e[28]!==z?(ke=z?.last_deployed&&f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 dark:text-neutral-500 whitespace-nowrap",children:"Last Deployed"}),f.jsx("td",{className:"py-1.5 text-neutral-900 dark:text-neutral-300",children:new Date(z.last_deployed).toLocaleString()})]}),e[28]=z,e[29]=ke):ke=e[29];let Se;e[30]!==I||e[31]!==$||e[32]!==se||e[33]!==X||e[34]!==ae||e[35]!==ke?(Se=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("table",{className:"w-full text-xs",children:f.jsxs("tbody",{children:[I,$,se,X,ae,ke]})})}),e[30]=I,e[31]=$,e[32]=se,e[33]=X,e[34]=ae,e[35]=ke,e[36]=Se):Se=e[36];let Ve;e[37]!==O||e[38]!==s.config||e[39]!==h?(Ve=s.config&&Object.keys(s.config).length>0&&f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:S,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Mp,{size:14,className:"text-amber-500 dark:text-amber-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:"User Values"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:Je=>{Je.stopPropagation(),P("values",JSON.stringify(s.config,null,2))},className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy values",children:O==="values"?f.jsx(Nn,{size:14,className:"text-emerald-500"}):f.jsx(xs,{size:14,className:"text-neutral-400"})}),h?f.jsx(ps,{size:14,className:"text-neutral-400"}):f.jsx(Xr,{size:14,className:"text-neutral-400"})]})]}),h&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:JSON.stringify(s.config,null,2)})})]}),e[37]=O,e[38]=s.config,e[39]=h,e[40]=Ve):Ve=e[40];let Le;e[41]!==O||e[42]!==z||e[43]!==v?(Le=z?.notes&&f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:R,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(ei,{size:14,className:"text-blue-500 dark:text-blue-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:"Release Notes"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:Je=>{Je.stopPropagation(),P("notes",z.notes||"")},className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy notes",children:O==="notes"?f.jsx(Nn,{size:14,className:"text-emerald-500"}):f.jsx(xs,{size:14,className:"text-neutral-400"})}),v?f.jsx(ps,{size:14,className:"text-neutral-400"}):f.jsx(Xr,{size:14,className:"text-neutral-400"})]})]}),v&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:z.notes})})]}),e[41]=O,e[42]=z,e[43]=v,e[44]=Le):Le=e[44];let rt;e[45]!==O||e[46]!==s.manifest||e[47]!==p?(rt=s.manifest&&f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:C,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(ei,{size:14,className:"text-purple-500 dark:text-purple-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:"Rendered Manifest"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:Je=>{Je.stopPropagation(),P("manifest",s.manifest||"")},className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy manifest",children:O==="manifest"?f.jsx(Nn,{size:14,className:"text-emerald-500"}):f.jsx(xs,{size:14,className:"text-neutral-400"})}),p?f.jsx(ps,{size:14,className:"text-neutral-400"}):f.jsx(Xr,{size:14,className:"text-neutral-400"})]})]}),p&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-96 overflow-y-auto",children:s.manifest})})]}),e[45]=O,e[46]=s.manifest,e[47]=p,e[48]=rt):rt=e[48];let Ye;return e[49]!==Se||e[50]!==Ve||e[51]!==Le||e[52]!==rt||e[53]!==K?(Ye=f.jsxs("div",{className:"space-y-4",children:[K,Se,Ve,Le,rt]}),e[49]=Se,e[50]=Ve,e[51]=Le,e[52]=rt,e[53]=K,e[54]=Ye):Ye=e[54],Ye}function tQ(t){return!t}function nQ(t){return!t}function sQ(t){return!t}function rQ(t){try{const e=atob(t);return JSON.parse(e)}catch{return null}}function iQ(t){try{const e=atob(t),[n,...s]=e.split(":");return{username:n,password:s.join(":")}}catch{return null}}function aQ(t){const e=De.c(21),{encoded:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=new Set,e[0]=s):s=e[0];const[r,i]=V.useState(s),[o,c]=V.useState(null),[u,h]=V.useState(!1);let m,p,y,v,x;if(e[1]!==o||e[2]!==n||e[3]!==r){x=Symbol.for("react.early_return_sentinel");e:{const k=rQ(n);p=k?JSON.stringify(k,null,2):null;let C;e[9]===Symbol.for("react.memo_cache_sentinel")?(C=async(O,E)=>{await navigator.clipboard.writeText(E),c(O),setTimeout(()=>c(null),2e3)},e[9]=C):C=e[9],m=C;const N=O=>{i(E=>{const D=new Set(E);return D.has(O)?D.delete(O):D.add(O),D})};if(!k||!k.auths){let O;e[10]===Symbol.for("react.memo_cache_sentinel")?(O=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("span",{className:"text-xs text-red-600 dark:text-red-400",children:"Failed to decode Docker config"})}),e[10]=O):O=e[10],x=O;break e}const R=Object.entries(k.auths);if(R.length===0){let O;e[11]===Symbol.for("react.memo_cache_sentinel")?(O=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"No registries configured"})}),e[11]=O):O=e[11],x=O;break e}y="space-y-3",v=R.map(O=>{const[E,D]=O;let B=D.username,q=D.password;if(!B&&D.auth){const G=iQ(D.auth);G&&(B=G.username,q=G.password)}const P=r.has(E);return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[f.jsx(mi,{size:14,className:"text-blue-500 dark:text-blue-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-900 dark:text-neutral-200 break-all",children:E})]}),f.jsx("table",{className:"w-full text-xs",children:f.jsxs("tbody",{children:[B&&f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 whitespace-nowrap w-1",children:f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(vD,{size:12}),"Username"]})}),f.jsx("td",{className:"py-1.5 text-neutral-900 dark:text-neutral-300",children:B}),f.jsx("td",{className:"py-1.5",children:f.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[f.jsx("div",{className:"w-7"}),f.jsx("button",{onClick:()=>m(`${E}-username`,B),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:"Copy username",children:o===`${E}-username`?f.jsx(Nn,{size:12,className:"text-emerald-500"}):f.jsx(xs,{size:12,className:"text-neutral-400"})})]})})]}),q&&f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 whitespace-nowrap w-1",children:f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(Mp,{size:12}),"Password"]})}),f.jsx("td",{className:"py-1.5 font-mono",children:P?f.jsx("span",{className:"text-neutral-900 dark:text-neutral-300 break-all",children:q}):f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:""})}),f.jsx("td",{className:"py-1.5",children:f.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[f.jsx("button",{onClick:()=>N(E),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:P?"Hide password":"Reveal password",children:P?f.jsx(oC,{size:12,className:"text-neutral-400"}):f.jsx(lC,{size:12,className:"text-neutral-400"})}),f.jsx("button",{onClick:()=>m(`${E}-password`,q),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:"Copy password",children:o===`${E}-password`?f.jsx(Nn,{size:12,className:"text-emerald-500"}):f.jsx(xs,{size:12,className:"text-neutral-400"})})]})})]}),D.email&&f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 whitespace-nowrap w-1",children:f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(jG,{size:12}),"Email"]})}),f.jsx("td",{className:"py-1.5 text-neutral-900 dark:text-neutral-300",children:D.email}),f.jsx("td",{className:"py-1.5",children:f.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[f.jsx("div",{className:"w-7"}),f.jsx("button",{onClick:()=>m(`${E}-email`,D.email),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:"Copy email",children:o===`${E}-email`?f.jsx(Nn,{size:12,className:"text-emerald-500"}):f.jsx(xs,{size:12,className:"text-neutral-400"})})]})})]})]})})]},E)})}e[1]=o,e[2]=n,e[3]=r,e[4]=m,e[5]=p,e[6]=y,e[7]=v,e[8]=x}else m=e[4],p=e[5],y=e[6],v=e[7],x=e[8];if(x!==Symbol.for("react.early_return_sentinel"))return x;let _;e[12]!==o||e[13]!==m||e[14]!==p||e[15]!==u?(_=p&&f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:()=>h(!u),className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(ei,{size:14,className:"text-purple-500 dark:text-purple-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:"Docker Config"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:k=>{k.stopPropagation(),m("raw",p)},className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy JSON",children:o==="raw"?f.jsx(Nn,{size:14,className:"text-emerald-500"}):f.jsx(xs,{size:14,className:"text-neutral-400"})}),u?f.jsx(ps,{size:14,className:"text-neutral-400"}):f.jsx(Xr,{size:14,className:"text-neutral-400"})]})]}),u&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:p})})]}),e[12]=o,e[13]=m,e[14]=p,e[15]=u,e[16]=_):_=e[16];let S;return e[17]!==y||e[18]!==v||e[19]!==_?(S=f.jsxs("div",{className:y,children:[v,_]}),e[17]=y,e[18]=v,e[19]=_,e[20]=S):S=e[20],S}function oQ(t){try{return atob(t)}catch{return null}}function lQ(t){let e=0;for(let n=0;n<Math.min(t.length,1e3);n++){const s=t.charCodeAt(n);(s===0||s<32&&s!==9&&s!==10&&s!==13)&&e++}return e>t.length*.1}function pR(t){return t.replace(/^[\r\n]+|[\r\n]+$/g,"").includes(`
`)}function cQ(t){return!t.endsWith(".crt")&&!t.endsWith(".pem")&&t!=="ca.crt"&&t!=="tls.crt"&&t!=="namespace"}function uQ(t){const e=De.c(12),{entries:n}=t,[s,r]=V.useState(null);let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=new Set,e[0]=i):i=e[0];const[o,c]=V.useState(i);let u;e[1]===Symbol.for("react.memo_cache_sentinel")?(u=async(x,_)=>{await navigator.clipboard.writeText(_),r(x),setTimeout(()=>r(null),2e3)},e[1]=u):u=e[1];const h=u;let m;e[2]===Symbol.for("react.memo_cache_sentinel")?(m=x=>{c(_=>{const S=new Set(_);return S.has(x)?S.delete(x):S.add(x),S})},e[2]=m):m=e[2];const p=m;let y;if(e[3]!==s||e[4]!==n||e[5]!==o){let x;e[7]!==s||e[8]!==o?(x=_=>{const{key:S,decoded:k,isSensitive:C}=_;return f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 whitespace-nowrap",children:S}),f.jsx("td",{className:"py-1.5 font-mono break-all",children:C&&!o.has(S)?f.jsx("span",{className:"text-neutral-400",children:""}):f.jsx("span",{className:"text-neutral-900 dark:text-neutral-300",children:k})}),f.jsx("td",{className:"py-1.5 w-1",children:f.jsxs("div",{className:"flex items-center gap-1",children:[C?f.jsx("button",{onClick:()=>p(S),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:o.has(S)?"Hide value":"Reveal value",children:o.has(S)?f.jsx(oC,{size:12,className:"text-neutral-400"}):f.jsx(lC,{size:12,className:"text-neutral-400"})}):f.jsx("div",{className:"w-7"}),f.jsx("button",{onClick:()=>h(S,k),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:"Copy value",children:s===S?f.jsx(Nn,{size:12,className:"text-emerald-500"}):f.jsx(xs,{size:12,className:"text-neutral-400"})})]})})]},S)},e[7]=s,e[8]=o,e[9]=x):x=e[9],y=n.map(x),e[3]=s,e[4]=n,e[5]=o,e[6]=y}else y=e[6];let v;return e[10]!==y?(v=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("table",{className:"w-full text-xs",children:f.jsx("tbody",{children:y})})}),e[10]=y,e[11]=v):v=e[11],v}function hQ(t){const e=De.c(35),{name:n,decoded:s,isSensitive:r}=t,[i,o]=V.useState(!1),[c,u]=V.useState(!1),[h,m]=V.useState(!1);let p;e[0]!==s?(p=async()=>{await navigator.clipboard.writeText(s),m(!0),setTimeout(()=>m(!1),2e3)},e[0]=s,e[1]=p):p=e[1];const y=p;let v;e[2]!==i?(v=()=>o(!i),e[2]=i,e[3]=v):v=e[3];let x;e[4]===Symbol.for("react.memo_cache_sentinel")?(x=f.jsx(Mp,{size:14,className:"text-amber-500 dark:text-amber-400"}),e[4]=x):x=e[4];let _;e[5]!==n?(_=f.jsxs("div",{className:"flex items-center gap-2",children:[x,f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n})]}),e[5]=n,e[6]=_):_=e[6];let S;e[7]!==y?(S=q=>{q.stopPropagation(),y()},e[7]=y,e[8]=S):S=e[8];let k;e[9]!==h?(k=h?f.jsx(Nn,{size:14,className:"text-emerald-500"}):f.jsx(xs,{size:14,className:"text-neutral-400"}),e[9]=h,e[10]=k):k=e[10];let C;e[11]!==S||e[12]!==k?(C=f.jsx("button",{onClick:S,className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy value",children:k}),e[11]=S,e[12]=k,e[13]=C):C=e[13];let N;e[14]!==r||e[15]!==c?(N=r&&f.jsx("button",{onClick:q=>{q.stopPropagation(),u(!c)},className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:c?"Hide value":"Reveal value",children:c?f.jsx(oC,{size:14,className:"text-neutral-400"}):f.jsx(lC,{size:14,className:"text-neutral-400"})}),e[14]=r,e[15]=c,e[16]=N):N=e[16];let R;e[17]!==i?(R=i?f.jsx(ps,{size:14,className:"text-neutral-400"}):f.jsx(Xr,{size:14,className:"text-neutral-400"}),e[17]=i,e[18]=R):R=e[18];let O;e[19]!==C||e[20]!==N||e[21]!==R?(O=f.jsxs("div",{className:"flex items-center gap-1",children:[C,N,R]}),e[19]=C,e[20]=N,e[21]=R,e[22]=O):O=e[22];let E;e[23]!==O||e[24]!==v||e[25]!==_?(E=f.jsxs("button",{onClick:v,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[_,O]}),e[23]=O,e[24]=v,e[25]=_,e[26]=E):E=e[26];let D;e[27]!==s||e[28]!==i||e[29]!==r||e[30]!==c?(D=i&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:r&&!c?f.jsx("span",{className:"text-xs text-neutral-400 font-mono",children:""}):f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:s})}),e[27]=s,e[28]=i,e[29]=r,e[30]=c,e[31]=D):D=e[31];let B;return e[32]!==E||e[33]!==D?(B=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[E,D]}),e[32]=E,e[33]=D,e[34]=B):B=e[34],B}const dQ={kinds:["Secret","Secrets"],adapt(t,e){const n=e.data||{},s=e.stringData||{},r=[...new Set([...Object.keys(n),...Object.keys(s)])];if(e.type==="helm.sh/release.v1"&&n.release)return{sections:[{id:"helm-release",data:{type:"custom",render:()=>f.jsx(eQ,{encoded:n.release})}}]};if(e.type==="kubernetes.io/dockerconfigjson"&&n[".dockerconfigjson"])return{sections:[{id:"docker-config",data:{type:"custom",render:()=>f.jsx(aQ,{encoded:n[".dockerconfigjson"]})}}]};const i=[];e.immutable&&i.push({id:"status",data:{type:"status-cards",items:[{label:"Immutable",value:"Yes",status:"warning",icon:f.jsx(Dp,{size:14,className:"text-amber-400"})}]}});const o=[],c=[],u=[],h=[],m=[],p=[],y=[];return r.forEach(v=>{const x=n[v]||btoa(s[v]||""),_=oQ(x),S=cQ(v);if(!_)u.push(v);else if(lQ(_))u.push(v);else{const k=DJ(_);if(k)switch(k.type){case"certificate":h.push({key:v,pem:k.content});break;case"private-key":m.push({key:v,pem:k.content});break;case"public-key":p.push(v);break;case"csr":y.push({key:v,pem:k.content});break;default:pR(_)?c.push({key:v,decoded:_,isSensitive:S}):o.push({key:v,decoded:_,isSensitive:S})}else pR(_)?c.push({key:v,decoded:_,isSensitive:S}):o.push({key:v,decoded:_,isSensitive:S})}}),h.length>0&&i.push({id:"certificates",title:"Certificates",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:h.map(({key:v,pem:x})=>f.jsx(bk,{name:v,pem:x},v))})}}),m.length>0&&i.push({id:"private-keys",title:"Private Keys",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:m.map(({key:v,pem:x})=>f.jsx(zJ,{name:v,pem:x},v))})}}),p.length>0&&i.push({id:"public-keys",title:"Public Keys",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:p.map(v=>f.jsx(FJ,{name:v},v))})}}),y.length>0&&i.push({id:"csrs",title:"Certificate Requests",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:y.map(({key:v,pem:x})=>f.jsx(_L,{name:v,pem:x},v))})}}),o.length>0&&i.push({id:"data-simple",title:"Data",data:{type:"custom",render:()=>f.jsx(uQ,{entries:o})}}),c.length>0&&i.push({id:"data-multiline",title:o.length>0?"Files":"Data",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:c.map(({key:v,decoded:x,isSensitive:_})=>f.jsx(hQ,{name:v,decoded:x,isSensitive:_},v))})}}),u.length>0&&i.push({id:"binary-data",title:"Binary Data",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:u.map(v=>f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-3",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(ei,{size:14,className:"text-purple-500 dark:text-purple-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:v}),f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-purple-100 dark:bg-purple-500/20 text-purple-600 dark:text-purple-400",children:"Binary"})]})},v))})}}),{sections:i}}};function fQ(t){return t.includes(`
`)}function pQ(t){const e=De.c(29),{name:n,value:s}=t,[r,i]=V.useState(!1),[o,c]=V.useState(!1);let u;e[0]!==s?(u=async()=>{await navigator.clipboard.writeText(s),c(!0),setTimeout(()=>c(!1),2e3)},e[0]=s,e[1]=u):u=e[1];const h=u;let m;e[2]!==r?(m=()=>i(!r),e[2]=r,e[3]=m):m=e[3];let p;e[4]===Symbol.for("react.memo_cache_sentinel")?(p=f.jsx(ei,{size:14,className:"text-blue-500 dark:text-blue-400"}),e[4]=p):p=e[4];let y;e[5]!==n?(y=f.jsxs("div",{className:"flex items-center gap-2",children:[p,f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n})]}),e[5]=n,e[6]=y):y=e[6];let v;e[7]!==h?(v=O=>{O.stopPropagation(),h()},e[7]=h,e[8]=v):v=e[8];let x;e[9]!==o?(x=o?f.jsx(Nn,{size:14,className:"text-emerald-500"}):f.jsx(xs,{size:14,className:"text-neutral-400"}),e[9]=o,e[10]=x):x=e[10];let _;e[11]!==v||e[12]!==x?(_=f.jsx("button",{onClick:v,className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy value",children:x}),e[11]=v,e[12]=x,e[13]=_):_=e[13];let S;e[14]!==r?(S=r?f.jsx(ps,{size:14,className:"text-neutral-400"}):f.jsx(Xr,{size:14,className:"text-neutral-400"}),e[14]=r,e[15]=S):S=e[15];let k;e[16]!==_||e[17]!==S?(k=f.jsxs("div",{className:"flex items-center gap-1",children:[_,S]}),e[16]=_,e[17]=S,e[18]=k):k=e[18];let C;e[19]!==m||e[20]!==y||e[21]!==k?(C=f.jsxs("button",{onClick:m,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[y,k]}),e[19]=m,e[20]=y,e[21]=k,e[22]=C):C=e[22];let N;e[23]!==r||e[24]!==s?(N=r&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-700 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:s})}),e[23]=r,e[24]=s,e[25]=N):N=e[25];let R;return e[26]!==C||e[27]!==N?(R=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[C,N]}),e[26]=C,e[27]=N,e[28]=R):R=e[28],R}function mQ(t){const e=De.c(8),{entries:n}=t,[s,r]=V.useState(null);let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=async(h,m)=>{await navigator.clipboard.writeText(m),r(h),setTimeout(()=>r(null),2e3)},e[0]=i):i=e[0];const o=i;let c;if(e[1]!==s||e[2]!==n){let h;e[4]!==s?(h=m=>{const[p,y]=m;return f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 whitespace-nowrap",children:p}),f.jsx("td",{className:"py-1.5 font-mono break-all text-neutral-900 dark:text-neutral-300",children:y}),f.jsx("td",{className:"py-1.5 w-1",children:f.jsx("button",{onClick:()=>o(p,y),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:"Copy value",children:s===p?f.jsx(Nn,{size:12,className:"text-emerald-500"}):f.jsx(xs,{size:12,className:"text-neutral-400"})})})]},p)},e[4]=s,e[5]=h):h=e[5],c=n.map(h),e[1]=s,e[2]=n,e[3]=c}else c=e[3];let u;return e[6]!==c?(u=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("table",{className:"w-full text-xs",children:f.jsx("tbody",{children:c})})}),e[6]=c,e[7]=u):u=e[7],u}function gQ(t){const e=De.c(16),{name:n,value:s}=t,[r,i]=V.useState(!1);let o;e[0]!==s?(o=async()=>{await navigator.clipboard.writeText(s),i(!0),setTimeout(()=>i(!1),2e3)},e[0]=s,e[1]=o):o=e[1];const c=o;let u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u=f.jsx(ei,{size:14,className:"text-purple-500 dark:text-purple-400"}),e[2]=u):u=e[2];let h;e[3]!==n?(h=f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n}),e[3]=n,e[4]=h):h=e[4];let m;e[5]===Symbol.for("react.memo_cache_sentinel")?(m=f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-purple-100 dark:bg-purple-500/20 text-purple-600 dark:text-purple-400",children:"Binary"}),e[5]=m):m=e[5];let p;e[6]!==h?(p=f.jsxs("div",{className:"flex items-center gap-2",children:[u,h,m]}),e[6]=h,e[7]=p):p=e[7];let y;e[8]!==r?(y=r?f.jsx(Nn,{size:12,className:"text-emerald-500"}):f.jsx(xs,{size:12,className:"text-neutral-400"}),e[8]=r,e[9]=y):y=e[9];let v;e[10]!==c||e[11]!==y?(v=f.jsx("button",{onClick:c,className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:"Copy base64 value",children:y}),e[10]=c,e[11]=y,e[12]=v):v=e[12];let x;return e[13]!==p||e[14]!==v?(x=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-3",children:f.jsxs("div",{className:"flex items-center justify-between",children:[p,v]})}),e[13]=p,e[14]=v,e[15]=x):x=e[15],x}const yQ={kinds:["ConfigMap","ConfigMaps"],adapt(t,e){const n=e.data||{},s=e.binaryData||{},r=Object.keys(n),i=Object.keys(s),o=r.length+i.length,c=[{id:"status",data:{type:"status-cards",items:[...e.immutable?[{label:"Immutable",value:"Yes",status:"warning",icon:f.jsx(Dp,{size:14,className:"text-amber-400"})}]:[]]}}],u=[],h=[];return r.forEach(m=>{fQ(n[m])?h.push([m,n[m]]):u.push([m,n[m]])}),u.length>0&&c.push({id:"data-simple",title:"Data",data:{type:"custom",render:()=>f.jsx(mQ,{entries:u})}}),h.length>0&&c.push({id:"data-multiline",title:u.length>0?"Files":"Data",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:h.map(([m,p])=>f.jsx(pQ,{name:m,value:p},m))})}}),i.length>0&&c.push({id:"binary-data",title:"Binary Data",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:i.map(m=>f.jsx(gQ,{name:m,value:s[m]},m))})}}),o===0&&c.push({id:"empty",data:{type:"custom",render:()=>f.jsxs("div",{className:"text-center py-8 text-neutral-400 dark:text-neutral-500",children:[f.jsx(ei,{size:32,className:"mx-auto mb-2 opacity-50"}),f.jsx("p",{className:"text-sm",children:"This ConfigMap is empty"})]})}}),{sections:c}}},vQ={kinds:["Gateway","Gateways"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=s?.conditions?.find(h=>h.type==="Accepted"),i=s?.conditions?.find(h=>h.type==="Programmed"),o=r?.status==="True",c=i?.status==="True",u=s?.listeners?.reduce((h,m)=>h+(m.attachedRoutes||0),0)||0;return{sections:[{id:"status",title:"Gateway Status",data:{type:"status-cards",items:[{label:"Gateway Class",value:n.gatewayClassName,status:"neutral"},{label:"Accepted",value:o?"Yes":"No",status:o?"success":"error"},{label:"Programmed",value:c?"Yes":"No",status:c?"success":"error"},{label:"Attached Routes",value:u,status:"neutral"}]}},...s?.addresses&&s.addresses.length>0?[{id:"addresses",title:"Addresses",data:{type:"info-grid",items:s.addresses.map(h=>({label:h.type||"IPAddress",value:h.value,color:"text-blue-400"})),columns:2}}]:[],{id:"listeners",title:"Listeners",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.listeners.map(h=>f.jsx(bQ,{listener:h,status:s},h.name))})}}]}}};function bQ(t){const e=De.c(32),{listener:n,status:s}=t,[r,i]=ks.useState(!1);let o;e[0]!==n.name||e[1]!==s?.listeners?(o=s?.listeners?.find(R=>R.name===n.name),e[0]=n.name,e[1]=s?.listeners,e[2]=o):o=e[2];const u=o?.attachedRoutes??0;let h;e[3]!==r?(h=()=>i(!r),e[3]=r,e[4]=h):h=e[4];let m;e[5]===Symbol.for("react.memo_cache_sentinel")?(m=f.jsx(HG,{size:14,className:"text-emerald-400"}),e[5]=m):m=e[5];let p;e[6]!==n.name?(p=f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:n.name}),e[6]=n.name,e[7]=p):p=e[7];let y;e[8]!==n.protocol?(y=f.jsx("span",{className:"px-1.5 py-0.5 rounded text-xs bg-blue-500/20 text-blue-400",children:n.protocol}),e[8]=n.protocol,e[9]=y):y=e[9];let v;e[10]!==p||e[11]!==y?(v=f.jsxs("div",{className:"flex items-center gap-2",children:[p,y]}),e[10]=p,e[11]=y,e[12]=v):v=e[12];const x=u!==1?"s":"";let _;e[13]!==u||e[14]!==n.port||e[15]!==x?(_=f.jsxs("div",{className:"text-xs text-neutral-500",children:["Port ",n.port,"  ",u," route",x]}),e[13]=u,e[14]=n.port,e[15]=x,e[16]=_):_=e[16];let S;e[17]!==v||e[18]!==_?(S=f.jsxs("div",{className:"flex-1 min-w-0",children:[v,_]}),e[17]=v,e[18]=_,e[19]=S):S=e[19];let k;e[20]!==h||e[21]!==S?(k=f.jsxs("button",{onClick:h,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[m,S]}),e[20]=h,e[21]=S,e[22]=k):k=e[22];let C;e[23]!==u||e[24]!==r||e[25]!==n.hostname||e[26]!==n.port||e[27]!==n.protocol?(C=r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Protocol & Port"}),f.jsxs("div",{className:"text-xs space-y-1",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Protocol:"}),f.jsx("span",{className:"text-blue-400",children:n.protocol})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Port:"}),f.jsx("span",{className:"text-cyan-400",children:n.port})]})]})]}),n.hostname&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Hostname"}),f.jsx("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Cr,{size:10,className:"text-cyan-400"}),f.jsx("span",{className:"text-cyan-400",children:n.hostname})]})})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Attached Routes"}),f.jsxs("div",{className:"text-xs",children:[f.jsx("span",{className:"text-emerald-400 font-medium",children:u}),f.jsxs("span",{className:"text-neutral-500 ml-1",children:["route",u!==1?"s":""," attached"]})]})]})]}),e[23]=u,e[24]=r,e[25]=n.hostname,e[26]=n.port,e[27]=n.protocol,e[28]=C):C=e[28];let N;return e[29]!==k||e[30]!==C?(N=f.jsxs("div",{className:"border border-emerald-500/30 bg-emerald-500/5 rounded-lg overflow-hidden",children:[k,C]}),e[29]=k,e[30]=C,e[31]=N):N=e[31],N}const _Q={kinds:["HTTPRoute","HTTPRoutes"],adapt(t,e){const n=e.spec,s=e.status;return n?{sections:[...n.parentRefs&&n.parentRefs.length>0?[{id:"parents",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(uh,{size:10})," Parent Gateway",n.parentRefs.length>1?"s":""]}),f.jsx("div",{className:"space-y-1",children:n.parentRefs.map((r,i)=>{const c=s?.parents?.find(h=>h.parentRef.name===r.name)?.conditions?.find(h=>h.type==="Accepted"),u=c?.status==="True";return f.jsxs("div",{className:"text-sm flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Gateway:"}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:r.name}),r.namespace&&f.jsxs("span",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:["(",r.namespace,")"]}),f.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${u?"bg-emerald-500/20 text-emerald-600 dark:text-emerald-400":"bg-amber-500/20 text-amber-700 dark:text-amber-400"}`,children:u?"Accepted":c?.reason||"Unknown"})]},i)})})]})}}]:[],...n.hostnames&&n.hostnames.length>0?[{id:"hostnames",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 border border-neutral-200 dark:border-neutral-700 rounded-lg p-3",children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-2",children:"Hostnames"}),f.jsx("div",{className:"flex flex-wrap gap-2",children:n.hostnames.map((r,i)=>f.jsx("div",{className:"bg-cyan-500/10 border border-cyan-500/30 rounded px-2.5 py-1 text-sm text-cyan-600 dark:text-cyan-400 font-mono",children:r},i))})]})}}]:[],...n.rules&&n.rules.length>0?[{id:"rules",title:"Routing Rules",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.rules.map((r,i)=>f.jsx(xQ,{rule:r,index:i},r.matches?.[0]?.path?.value||`rule-${i}`))})}}]:[]]}:{sections:[]}}};function xQ(t){const e=De.c(22),{rule:n,index:s}=t,[r,i]=ks.useState(!1),o=n.matches?.length||0,c=n.backendRefs?.length||0;let u;e[0]!==r?(u=()=>i(!r),e[0]=r,e[1]=u):u=e[1];let h;e[2]===Symbol.for("react.memo_cache_sentinel")?(h=f.jsx(ap,{size:14,className:"text-purple-400"}),e[2]=h):h=e[2];const m=s+1;let p;e[3]!==m?(p=f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:["Rule ",m]})}),e[3]=m,e[4]=p):p=e[4];const y=o>0?`${o} match${o!==1?"es":""}`:"All requests",v=c!==1?"s":"";let x;e[5]!==c||e[6]!==y||e[7]!==v?(x=f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:[y,"  ",c," backend",v]}),e[5]=c,e[6]=y,e[7]=v,e[8]=x):x=e[8];let _;e[9]!==p||e[10]!==x?(_=f.jsxs("div",{className:"flex-1 min-w-0",children:[p,x]}),e[9]=p,e[10]=x,e[11]=_):_=e[11];let S;e[12]!==u||e[13]!==_?(S=f.jsxs("button",{onClick:u,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[h,_]}),e[12]=u,e[13]=_,e[14]=S):S=e[14];let k;e[15]!==r||e[16]!==n.backendRefs||e[17]!==n.matches?(k=r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[n.matches&&n.matches.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Matches"}),f.jsx("div",{className:"space-y-2",children:n.matches.map(SQ)})]}),n.backendRefs&&n.backendRefs.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Backend Services"}),f.jsx("div",{className:"space-y-2",children:n.backendRefs.map(wQ)})]})]}),e[15]=r,e[16]=n.backendRefs,e[17]=n.matches,e[18]=k):k=e[18];let C;return e[19]!==k||e[20]!==S?(C=f.jsxs("div",{className:"border border-purple-500/30 bg-purple-500/5 rounded-lg overflow-hidden",children:[S,k]}),e[19]=k,e[20]=S,e[21]=C):C=e[21],C}function wQ(t,e){return f.jsx("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(ry,{size:10,className:"text-emerald-600 dark:text-emerald-400"}),f.jsx("span",{className:"text-emerald-600 dark:text-emerald-400",children:t.name}),t.port&&f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:":"}),f.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:t.port})]}),t.weight!==void 0&&f.jsxs("span",{className:"ml-auto px-1 py-0.5 rounded bg-amber-500/20 text-amber-400 text-[10px]",children:["weight: ",t.weight]})]})},e)}function SQ(t,e){return f.jsxs("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:[t.path?.value&&f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(ap,{size:10,className:"text-cyan-600 dark:text-cyan-400"}),f.jsx("span",{className:"text-neutral-600 dark:text-neutral-400",children:"Path:"}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-mono",children:t.path.value})]}),t.method&&f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400 ml-4",children:"Method:"}),f.jsx("span",{className:"px-1 py-0.5 rounded bg-blue-500/20 text-blue-400 text-[10px] font-mono",children:t.method})]})]},e)}const kQ={kinds:["GRPCRoute","GRPCRoutes"],adapt(t,e){const n=e.spec,s=e.status;return n?{sections:[...n.parentRefs&&n.parentRefs.length>0?[{id:"parents",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(uh,{size:10})," Parent Gateway",n.parentRefs.length>1?"s":""]}),f.jsx("div",{className:"space-y-1",children:n.parentRefs.map((r,i)=>{const c=s?.parents?.find(h=>h.parentRef.name===r.name)?.conditions?.find(h=>h.type==="Accepted"),u=c?.status==="True";return f.jsxs("div",{className:"text-sm flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Gateway:"}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:r.name}),r.namespace&&f.jsxs("span",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:["(",r.namespace,")"]}),f.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${u?"bg-emerald-500/20 text-emerald-600 dark:text-emerald-400":"bg-amber-500/20 text-amber-700 dark:text-amber-400"}`,children:u?"Accepted":c?.reason||"Unknown"})]},i)})})]})}}]:[],...n.hostnames&&n.hostnames.length>0?[{id:"hostnames",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 border border-neutral-200 dark:border-neutral-700 rounded-lg p-3",children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-2",children:"Hostnames"}),f.jsx("div",{className:"flex flex-wrap gap-2",children:n.hostnames.map((r,i)=>f.jsx("div",{className:"bg-cyan-500/10 border border-cyan-500/30 rounded px-2.5 py-1 text-sm text-cyan-600 dark:text-cyan-400 font-mono",children:r},i))})]})}}]:[],...n.rules&&n.rules.length>0?[{id:"rules",title:"Routing Rules",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.rules.map((r,i)=>f.jsx(CQ,{rule:r,index:i},r.matches?.[0]?.method?.service||`rule-${i}`))})}}]:[]]}:{sections:[]}}};function CQ(t){const e=De.c(22),{rule:n,index:s}=t,[r,i]=ks.useState(!1),o=n.matches?.length||0,c=n.backendRefs?.length||0;let u;e[0]!==r?(u=()=>i(!r),e[0]=r,e[1]=u):u=e[1];let h;e[2]===Symbol.for("react.memo_cache_sentinel")?(h=f.jsx(Vn,{size:14,className:"text-indigo-400"}),e[2]=h):h=e[2];const m=s+1;let p;e[3]!==m?(p=f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:["Rule ",m]})}),e[3]=m,e[4]=p):p=e[4];const y=o>0?`${o} match${o!==1?"es":""}`:"All methods",v=c!==1?"s":"";let x;e[5]!==c||e[6]!==y||e[7]!==v?(x=f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:[y,"  ",c," backend",v]}),e[5]=c,e[6]=y,e[7]=v,e[8]=x):x=e[8];let _;e[9]!==p||e[10]!==x?(_=f.jsxs("div",{className:"flex-1 min-w-0",children:[p,x]}),e[9]=p,e[10]=x,e[11]=_):_=e[11];let S;e[12]!==u||e[13]!==_?(S=f.jsxs("button",{onClick:u,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[h,_]}),e[12]=u,e[13]=_,e[14]=S):S=e[14];let k;e[15]!==r||e[16]!==n.backendRefs||e[17]!==n.matches?(k=r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[n.matches&&n.matches.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"gRPC Method Matches"}),f.jsx("div",{className:"space-y-2",children:n.matches.map(EQ)})]}),n.backendRefs&&n.backendRefs.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Backend Services"}),f.jsx("div",{className:"space-y-2",children:n.backendRefs.map(NQ)})]})]}),e[15]=r,e[16]=n.backendRefs,e[17]=n.matches,e[18]=k):k=e[18];let C;return e[19]!==k||e[20]!==S?(C=f.jsxs("div",{className:"border border-indigo-500/30 bg-indigo-500/5 rounded-lg overflow-hidden",children:[S,k]}),e[19]=k,e[20]=S,e[21]=C):C=e[21],C}function NQ(t,e){return f.jsx("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(ry,{size:10,className:"text-emerald-600 dark:text-emerald-400"}),f.jsx("span",{className:"text-emerald-600 dark:text-emerald-400",children:t.name}),t.port&&f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:":"}),f.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:t.port})]}),t.weight!==void 0&&f.jsxs("span",{className:"ml-auto px-1 py-0.5 rounded bg-amber-500/20 text-amber-400 text-[10px]",children:["weight: ",t.weight]})]})},e)}function EQ(t,e){return f.jsxs("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:[t.method?.service&&f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(Vn,{size:10,className:"text-purple-600 dark:text-purple-400"}),f.jsx("span",{className:"text-neutral-600 dark:text-neutral-400",children:"Service:"}),f.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-mono",children:t.method.service})]}),t.method?.method&&f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-400 ml-4",children:"Method:"}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-mono",children:t.method.method})]})]},e)}const AQ={kinds:["Ingress","Ingresses"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=s?.loadBalancer?.ingress&&s.loadBalancer.ingress.length>0;return{sections:[{id:"status",title:"Ingress Status",data:{type:"status-cards",items:[{label:"Ingress Class",value:n.ingressClassName||"default",status:"neutral"},{label:"Load Balancer",value:r?"Ready":"Pending",status:r?"success":"warning"}]}},...r?[{id:"load-balancer",title:"Load Balancer",data:{type:"info-grid",items:(s?.loadBalancer?.ingress||[]).map(i=>({label:i.hostname?"Hostname":"IP Address",value:i.hostname||i.ip||"Unknown",color:"text-blue-400"})),columns:2}}]:[],...n.tls&&n.tls.length>0?[{id:"tls",title:"TLS Configuration",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.tls.map((i,o)=>f.jsx(RQ,{tls:i,index:o},i.secretName||`tls-${o}`))})}}]:[],...n.rules&&n.rules.length>0?[{id:"rules",title:"Routing Rules",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.rules.map((i,o)=>f.jsx(jQ,{rule:i,index:o},i.host||`rule-${o}`))})}}]:[],...n.defaultBackend?.service?[{id:"default-backend",title:"Default Backend",data:{type:"info-grid",items:[{label:"Service",value:n.defaultBackend.service.name},{label:"Port",value:String(n.defaultBackend.service.port?.number||n.defaultBackend.service.port?.name||"unknown")}],columns:2}}]:[]]}}};function jQ(t){const e=De.c(21),{rule:n,index:s}=t,[r,i]=ks.useState(!1);let o;e[0]!==r?(o=()=>i(!r),e[0]=r,e[1]=o):o=e[1];let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=f.jsx(Vn,{size:14,className:"text-blue-400"}),e[2]=c):c=e[2];const u=n.host||`Rule ${s+1}`;let h;e[3]!==u?(h=f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:u})}),e[3]=u,e[4]=h):h=e[4];const m=n.http?.paths.length||0,p=n.http?.paths.length!==1?"s":"";let y;e[5]!==m||e[6]!==p?(y=f.jsxs("div",{className:"text-xs text-neutral-500",children:[m," path",p]}),e[5]=m,e[6]=p,e[7]=y):y=e[7];let v;e[8]!==h||e[9]!==y?(v=f.jsxs("div",{className:"flex-1 min-w-0",children:[h,y]}),e[8]=h,e[9]=y,e[10]=v):v=e[10];let x;e[11]!==o||e[12]!==v?(x=f.jsxs("button",{onClick:o,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[c,v]}),e[11]=o,e[12]=v,e[13]=x):x=e[13];let _;e[14]!==r||e[15]!==n.host||e[16]!==n.http?(_=r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[n.host&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Host"}),f.jsx("div",{className:"text-xs text-cyan-400",children:n.host})]}),n.http?.paths&&n.http.paths.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Paths"}),f.jsx("div",{className:"space-y-2",children:n.http.paths.map(TQ)})]})]}),e[14]=r,e[15]=n.host,e[16]=n.http,e[17]=_):_=e[17];let S;return e[18]!==_||e[19]!==x?(S=f.jsxs("div",{className:"border border-blue-500/30 bg-blue-500/5 rounded-lg overflow-hidden",children:[x,_]}),e[18]=_,e[19]=x,e[20]=S):S=e[20],S}function TQ(t,e){const n=t.backend.service?.port?.number||t.backend.service?.port?.name||"";return f.jsxs("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(ap,{size:10,className:"text-purple-400"}),f.jsx("span",{className:"text-neutral-700 dark:text-neutral-300 font-mono",children:t.path||"/"}),f.jsx("span",{className:"px-1 py-0.5 rounded bg-purple-500/20 text-purple-400 text-[10px]",children:t.pathType})]}),f.jsxs("div",{className:"ml-4 flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-600",children:""}),f.jsx("span",{className:"text-emerald-400",children:t.backend.service?.name||"unknown"}),f.jsx("span",{className:"text-neutral-600",children:":"}),f.jsx("span",{className:"text-blue-400",children:n})]})]},e)}function RQ(t){const e=De.c(22),{tls:n,index:s}=t,[r,i]=ks.useState(!1);let o;e[0]!==r?(o=()=>i(!r),e[0]=r,e[1]=o):o=e[1];let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=f.jsx(Op,{size:14,className:"text-amber-400"}),e[2]=c):c=e[2];const u=n.secretName||`TLS ${s+1}`;let h;e[3]!==u?(h=f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:u})}),e[3]=u,e[4]=h):h=e[4];let m;e[5]!==n.hosts?(m=n.hosts?.join(", ")||"All hosts",e[5]=n.hosts,e[6]=m):m=e[6];let p;e[7]!==m?(p=f.jsx("div",{className:"text-xs text-neutral-500 truncate",children:m}),e[7]=m,e[8]=p):p=e[8];let y;e[9]!==h||e[10]!==p?(y=f.jsxs("div",{className:"flex-1 min-w-0",children:[h,p]}),e[9]=h,e[10]=p,e[11]=y):y=e[11];let v;e[12]!==o||e[13]!==y?(v=f.jsxs("button",{onClick:o,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[c,y]}),e[12]=o,e[13]=y,e[14]=v):v=e[14];let x;e[15]!==r||e[16]!==n.hosts||e[17]!==n.secretName?(x=r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Secret"}),f.jsx("div",{className:"text-xs text-purple-400",children:n.secretName||"default"})]}),n.hosts&&n.hosts.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Hosts"}),f.jsx("div",{className:"space-y-1",children:n.hosts.map(OQ)})]})]}),e[15]=r,e[16]=n.hosts,e[17]=n.secretName,e[18]=x):x=e[18];let _;return e[19]!==v||e[20]!==x?(_=f.jsxs("div",{className:"border border-amber-500/30 bg-amber-500/5 rounded-lg overflow-hidden",children:[v,x]}),e[19]=v,e[20]=x,e[21]=_):_=e[21],_}function OQ(t,e){return f.jsx("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Cr,{size:10,className:"text-cyan-400"}),f.jsx("span",{className:"text-cyan-400",children:t})]})},e)}const MQ=[YY,ZY,tZ,nZ,sZ,rZ,aZ,lZ,cZ,dZ,wZ,AZ,BZ,GJ,YJ,XJ,dQ,yQ,vQ,_Q,kQ,AQ],nN=new Map;MQ.forEach(t=>{t.kinds.forEach(e=>{nN.set(e.toLowerCase(),t)})});function wL(t){return nN.get(t.toLowerCase())??null}function mR(t){return nN.has(t.toLowerCase())}function DQ(t,e){const n=e.kind;if(!n)return null;const s=wL(n);return s?s.adapt(t,e):null}function SL(t){const e=t.kind;if(!e)return[];const n=wL(e);return n?.actions?n.actions.filter(s=>!s.isVisible||s.isVisible(t)):[]}function kL({context:t,actions:e,resource:n,onActionComplete:s}){const[r,i]=V.useState(null),[o,c]=V.useState(null),[u,h]=V.useState(null);if(e.length===0)return null;const m=async v=>{h(null),i(v.id);try{await v.execute(t,n),s?.()}catch(x){h(x instanceof Error?x.message:"Action failed")}finally{i(null),c(null)}},p=v=>{v.confirm?c(v):m(v)},y=(v="secondary")=>{switch(v){case"primary":return"bg-blue-600 hover:bg-blue-700 text-white border-blue-600";case"danger":return"bg-red-600 hover:bg-red-700 text-white border-red-600";case"warning":return"bg-amber-600 hover:bg-amber-700 text-white border-amber-600";default:return"bg-neutral-700 hover:bg-neutral-600 text-neutral-200 border-neutral-600"}};return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.map(v=>{const x=v.isDisabled?.(n),_=x===!0||typeof x=="string",S=typeof x=="string"?x:void 0,k=r===v.id;return f.jsxs("button",{onClick:()=>p(v),disabled:_||k,title:S,className:`
                flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded border
                transition-colors duration-150
                ${y(v.variant)}
                ${_?"opacity-50 cursor-not-allowed":"cursor-pointer"}
                ${k?"opacity-75":""}
              `,children:[k?f.jsx(Ln,{size:14,className:"animate-spin"}):v.icon,v.label]},v.id)})}),u&&f.jsx("div",{className:"mb-4 p-2 bg-red-500/10 border border-red-500/30 rounded text-red-400 text-xs",children:u}),o&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:f.jsxs("div",{className:"bg-neutral-800 border border-neutral-700 rounded-lg p-4 max-w-md mx-4 shadow-xl",children:[f.jsx("h3",{className:"text-sm font-semibold text-neutral-200 mb-2",children:o.confirm?.title}),f.jsx("p",{className:"text-xs text-neutral-400 mb-4",children:o.confirm?.message}),f.jsxs("div",{className:"flex justify-end gap-2",children:[f.jsx("button",{onClick:()=>c(null),className:"px-3 py-1.5 text-xs font-medium rounded border border-neutral-600 bg-neutral-700 hover:bg-neutral-600 text-neutral-200",children:"Cancel"}),f.jsxs("button",{onClick:()=>m(o),disabled:r===o.id,className:`
                  flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded border
                  ${y(o.variant)}
                  ${r===o.id?"opacity-75":""}
                `,children:[r===o.id&&f.jsx(Ln,{size:14,className:"animate-spin"}),o.confirm?.confirmLabel||"Confirm"]})]})]})})]})}function BQ(t){const e=De.c(6),{items:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s={success:"text-emerald-400",warning:"text-amber-400",error:"text-red-400",neutral:"text-neutral-900 dark:text-neutral-100"},e[0]=s):s=e[0];const r=s;let i;if(e[1]!==n){let c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=(u,h)=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800 rounded-lg p-3",children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:u.label}),f.jsxs("div",{className:`text-sm font-medium flex items-center gap-2 ${r[u.status||"neutral"]}`,children:[u.icon,u.value]}),u.description&&f.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:u.description})]},h),e[3]=c):c=e[3],i=n.map(c),e[1]=n,e[2]=i}else i=e[2];let o;return e[4]!==i?(o=f.jsx("div",{className:"grid grid-cols-2 gap-3",children:i}),e[4]=i,e[5]=o):o=e[5],o}function LQ(t){const e=De.c(12),{items:n,podGrid:s}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r={emerald:"text-emerald-400",blue:"text-blue-400",cyan:"text-cyan-400",purple:"text-purple-400",amber:"text-amber-400"},e[0]=r):r=e[0];const i=r;let o;e[1]===Symbol.for("react.memo_cache_sentinel")?(o={emerald:"bg-emerald-500",blue:"bg-blue-500",cyan:"bg-cyan-500",purple:"bg-purple-500",amber:"bg-amber-500"},e[1]=o):o=e[1];const c=o;let u;if(e[2]!==n){let y;e[4]===Symbol.for("react.memo_cache_sentinel")?(y=(v,x)=>{const _=v.total>0?Math.min(v.current/v.total*100,100):0;return f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:v.label}),f.jsxs("span",{className:i[v.color],children:[v.current,"/",v.total]})]}),f.jsx("div",{className:"h-1 bg-neutral-300 dark:bg-neutral-700 rounded-full overflow-hidden",children:f.jsx("div",{className:`h-full ${c[v.color]}`,style:{width:`${_}%`}})})]},x)},e[4]=y):y=e[4],u=n.map(y),e[2]=n,e[3]=u}else u=e[3];let h;e[5]!==u?(h=f.jsx("div",{className:"flex items-center gap-4 mb-3",children:u}),e[5]=u,e[6]=h):h=e[6];let m;e[7]!==s?(m=s&&f.jsx(IQ,{data:s}),e[7]=s,e[8]=m):m=e[8];let p;return e[9]!==h||e[10]!==m?(p=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800 rounded-lg p-3",children:[h,m]}),e[9]=h,e[10]=m,e[11]=p):p=e[11],p}function IQ(t){const e=De.c(10),{data:n}=t,s=n.icon==="database"?lc:n.icon==="server"?mi:yi;let r;e[0]!==n.total?(r=Array.from({length:n.total}),e[0]=n.total,e[1]=r):r=e[1];let i;return e[2]!==s||e[3]!==n.available||e[4]!==n.current||e[5]!==n.podTitles||e[6]!==n.ready||e[7]!==n.showOrdinal||e[8]!==r?(i=f.jsx("div",{className:"flex flex-wrap gap-1",children:r.map((o,c)=>{const u=c<n.ready,h=n.available!==void 0?c<n.available:u,m=n.current!==void 0?c<n.current:h,p=n.podTitles?.[c]??`Pod ${c}`;return f.jsxs("div",{className:`${n.showOrdinal?"w-8 h-8":"w-6 h-6"} rounded flex flex-col items-center justify-center ${u?"bg-emerald-500/20 border border-emerald-500/50":h?"bg-cyan-500/20 border border-cyan-500/50":m?"bg-amber-500/20 border border-amber-500/50":"bg-neutral-300/50 dark:bg-neutral-700/50 border border-neutral-400 dark:border-neutral-600"}`,title:`${p}: ${u?"Ready":h?"Available":m?"Current":"Pending"}`,children:[f.jsx(s,{size:n.showOrdinal?10:12,className:u?"text-emerald-600 dark:text-emerald-400":h?"text-cyan-600 dark:text-cyan-400":m?"text-amber-600 dark:text-amber-400":"text-neutral-600 dark:text-neutral-500"}),n.showOrdinal&&f.jsx("span",{className:`text-[9px] ${u?"text-emerald-600 dark:text-emerald-400":h?"text-cyan-600 dark:text-cyan-400":m?"text-amber-600 dark:text-amber-400":"text-neutral-600 dark:text-neutral-500"}`,children:c})]},c)})}),e[2]=s,e[3]=n.available,e[4]=n.current,e[5]=n.podTitles,e[6]=n.ready,e[7]=n.showOrdinal,e[8]=r,e[9]=i):i=e[9],i}function PQ(t,e){if(t==="running")return{label:"Running",borderClass:"border-emerald-500/30 bg-emerald-500/5",badgeClass:"bg-emerald-500/20 text-emerald-400",iconClass:"text-emerald-400"};if(t==="waiting"){const n=e==="CrashLoopBackOff"||e==="Error";return{label:e||"Waiting",borderClass:n?"border-red-500/30 bg-red-500/5":"border-amber-500/30 bg-amber-500/5",badgeClass:n?"bg-red-500/20 text-red-400":"bg-amber-500/20 text-amber-400",iconClass:n?"text-red-400":"text-amber-400"}}return t==="terminated"?{label:e||"Terminated",borderClass:"border-neutral-300 bg-neutral-100 dark:border-neutral-700 dark:bg-neutral-900/50",badgeClass:"bg-neutral-200 text-neutral-600 dark:bg-neutral-700 dark:text-neutral-400",iconClass:"text-neutral-500 dark:text-neutral-400"}:{label:"Unknown",borderClass:"border-neutral-300 bg-neutral-100 dark:border-neutral-700 dark:bg-neutral-900/50",badgeClass:"bg-neutral-200 text-neutral-600 dark:bg-neutral-700 dark:text-neutral-400",iconClass:"text-neutral-500 dark:text-neutral-400"}}const $Q=15e3;function zQ(t){const e=De.c(10),{items:n,metricsLoader:s}=t,[r,i]=V.useState(null);let o,c;if(e[0]!==s?(o=()=>{if(!s)return;let m=!0;const p=async()=>{const v=await s();m&&i(v)};p();const y=setInterval(p,$Q);return()=>{m=!1,clearInterval(y)}},c=[s],e[0]=s,e[1]=o,e[2]=c):(o=e[1],c=e[2]),V.useEffect(o,c),n.length===0)return null;let u;if(e[3]!==n||e[4]!==r){let m;e[6]!==r?(m=p=>f.jsx(UQ,{container:p,metrics:r?.get(p.name)},p.name),e[6]=r,e[7]=m):m=e[7],u=n.map(m),e[3]=n,e[4]=r,e[5]=u}else u=e[5];let h;return e[8]!==u?(h=f.jsx("div",{className:"space-y-2",children:u}),e[8]=u,e[9]=h):h=e[9],h}function UQ(t){const e=De.c(49),{container:n,metrics:s}=t,[r,i]=V.useState(!1);let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=()=>i(KQ),e[0]=o):o=e[0];const c=o;let u;e[1]!==n.state||e[2]!==n.stateReason?(u=PQ(n.state,n.stateReason),e[1]=n.state,e[2]=n.stateReason,e[3]=u):u=e[3];const h=u,m=`border rounded-lg overflow-hidden ${h.borderClass}`;let p;e[4]!==h.iconClass?(p=f.jsx(yi,{size:16,className:h.iconClass}),e[4]=h.iconClass,e[5]=p):p=e[5];let y;e[6]!==n.name?(y=f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:n.name}),e[6]=n.name,e[7]=y):y=e[7];let v;e[8]!==n.state||e[9]!==h.badgeClass||e[10]!==h.label?(v=n.state&&f.jsx("span",{className:`px-1.5 py-0.5 rounded text-xs ${h.badgeClass}`,children:h.label}),e[8]=n.state,e[9]=h.badgeClass,e[10]=h.label,e[11]=v):v=e[11];let x;e[12]!==y||e[13]!==v?(x=f.jsxs("div",{className:"flex items-center gap-2",children:[y,v]}),e[12]=y,e[13]=v,e[14]=x):x=e[14];let _;e[15]!==n.image?(_=f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 truncate",children:n.image}),e[15]=n.image,e[16]=_):_=e[16];let S;e[17]!==x||e[18]!==_?(S=f.jsxs("div",{className:"flex-1 min-w-0",children:[x,_]}),e[17]=x,e[18]=_,e[19]=S):S=e[19];let k;e[20]!==s?(k=s&&f.jsxs("div",{className:"flex items-center gap-3 text-xs font-mono",children:[f.jsx("span",{className:"text-blue-400",title:"CPU",children:s.cpu.usage}),f.jsx("span",{className:"text-purple-400",title:"Memory",children:s.memory.usage})]}),e[20]=s,e[21]=k):k=e[21];let C;e[22]!==n.restartCount?(C=(n.restartCount??0)>0&&f.jsxs("div",{className:"text-xs text-amber-400",children:[n.restartCount," restarts"]}),e[22]=n.restartCount,e[23]=C):C=e[23];let N;e[24]!==k||e[25]!==C||e[26]!==p||e[27]!==S?(N=f.jsxs("button",{onClick:c,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[p,S,k,C]}),e[24]=k,e[25]=C,e[26]=p,e[27]=S,e[28]=N):N=e[28];let R;e[29]!==n.args||e[30]!==n.command||e[31]!==n.currentTermination||e[32]!==n.env||e[33]!==n.envFrom||e[34]!==n.image||e[35]!==n.lastTermination||e[36]!==n.mounts||e[37]!==n.ports||e[38]!==n.resources||e[39]!==n.state||e[40]!==n.stateMessage||e[41]!==n.stateReason||e[42]!==r||e[43]!==s?(R=r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[n.currentTermination&&f.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded p-2",children:[f.jsx("div",{className:"text-xs text-red-400 font-medium mb-1",children:"Terminated"}),f.jsxs("div",{className:"text-xs space-y-1",children:[n.currentTermination.reason&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Reason:"})," ",n.currentTermination.reason]}),n.currentTermination.exitCode!==void 0&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Exit Code:"})," ",n.currentTermination.exitCode]}),n.currentTermination.signal!==void 0&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Signal:"})," ",n.currentTermination.signal]}),n.currentTermination.finishedAt&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Finished:"})," ",new Date(n.currentTermination.finishedAt).toLocaleString()]}),n.currentTermination.message&&f.jsxs("div",{className:"mt-2 p-2 bg-neutral-900/50 rounded",children:[f.jsx("div",{className:"text-neutral-600 dark:text-neutral-500 mb-1",children:"Message:"}),f.jsx("div",{className:"text-red-300 text-[11px] font-mono break-all whitespace-pre-wrap",children:n.currentTermination.message})]})]})]}),n.state==="waiting"&&n.stateMessage&&f.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded p-2",children:[f.jsxs("div",{className:"text-xs text-amber-400 font-medium mb-1",children:["Waiting: ",n.stateReason]}),f.jsx("div",{className:"text-amber-300 text-[11px] font-mono break-all whitespace-pre-wrap",children:n.stateMessage})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Image"}),f.jsx("div",{className:"text-xs text-cyan-600 dark:text-cyan-400 break-all",children:n.image})]}),(n.command||n.args)&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Command"}),f.jsx("code",{className:"text-xs text-neutral-900 dark:text-neutral-300 bg-neutral-200 dark:bg-neutral-800 px-2 py-1 rounded block",children:[...n.command||[],...n.args||[]].join(" ")})]}),n.lastTermination&&f.jsxs("div",{className:"bg-red-500/5 border border-red-500/20 rounded p-2",children:[f.jsx("div",{className:"text-xs text-red-400 font-medium mb-1",children:"Last Termination"}),f.jsxs("div",{className:"text-xs space-y-0.5",children:[n.lastTermination.reason&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Reason:"})," ",n.lastTermination.reason]}),n.lastTermination.exitCode!==void 0&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Exit Code:"})," ",n.lastTermination.exitCode]}),n.lastTermination.signal!==void 0&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Signal:"})," ",n.lastTermination.signal]}),n.lastTermination.finishedAt&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Finished:"})," ",new Date(n.lastTermination.finishedAt).toLocaleString()]})]})]}),n.ports&&n.ports.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Ports"}),f.jsx("div",{className:"flex flex-wrap gap-1",children:n.ports.map(qQ)})]}),!s&&n.resources&&f.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.resources.requests&&f.jsxs("div",{children:[f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(bv,{size:10})," Requests"]}),f.jsx("div",{className:"text-xs space-y-0.5",children:Object.entries(n.resources.requests).map(VQ)})]}),n.resources.limits&&f.jsxs("div",{children:[f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(Ns,{size:10})," Limits"]}),f.jsx("div",{className:"text-xs space-y-0.5",children:Object.entries(n.resources.limits).map(FQ)})]})]}),(n.env&&n.env.length>0||n.envFrom&&n.envFrom.length>0)&&f.jsx(WQ,{env:n.env,envFrom:n.envFrom}),n.mounts&&n.mounts.length>0&&f.jsxs("div",{children:[f.jsxs("div",{className:"text-xs text-neutral-500 mb-2 flex items-center gap-1",children:[f.jsx(Ns,{size:10})," Volume Mounts"]}),f.jsx("div",{className:"text-xs space-y-1.5",children:n.mounts.map(HQ)})]})]}),e[29]=n.args,e[30]=n.command,e[31]=n.currentTermination,e[32]=n.env,e[33]=n.envFrom,e[34]=n.image,e[35]=n.lastTermination,e[36]=n.mounts,e[37]=n.ports,e[38]=n.resources,e[39]=n.state,e[40]=n.stateMessage,e[41]=n.stateReason,e[42]=r,e[43]=s,e[44]=R):R=e[44];let O;return e[45]!==N||e[46]!==R||e[47]!==m?(O=f.jsxs("div",{className:m,children:[N,R]}),e[45]=N,e[46]=R,e[47]=m,e[48]=O):O=e[48],O}function HQ(t,e){return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded p-2 flex items-center gap-2",children:[f.jsx("span",{className:"text-purple-400 truncate max-w-35",title:t.name,children:t.name}),f.jsx("span",{className:"text-neutral-600",children:""}),f.jsx("span",{className:"text-cyan-400 font-mono truncate flex-1",title:t.mountPath,children:t.mountPath}),t.readOnly&&f.jsx("span",{className:"text-amber-400 text-[10px] px-1 py-0.5 bg-amber-500/10 rounded",children:"(ro)"})]},e)}function FQ(t){const[e,n]=t;return f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-500",children:[e,":"]})," ",n]},e)}function VQ(t){const[e,n]=t;return f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-500",children:[e,":"]})," ",n]},e)}function qQ(t,e){return f.jsxs("span",{className:"text-xs text-neutral-900 dark:text-neutral-100 bg-neutral-200 dark:bg-neutral-800 px-2 py-1 rounded",children:[t.containerPort,"/",t.protocol||"TCP",t.name&&f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-500 ml-1",children:["(",t.name,")"]})]},e)}function KQ(t){return!t}function WQ(t){const e=De.c(9),{env:n,envFrom:s}=t,r=s&&s.length>0;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=f.jsx("div",{className:"text-xs text-neutral-500 mb-2",children:"Environment"}),e[0]=i):i=e[0];let o;e[1]!==s||e[2]!==r?(o=r&&f.jsx("div",{className:"mb-2 space-y-1",children:s.map(YQ)}),e[1]=s,e[2]=r,e[3]=o):o=e[3];let c;e[4]!==n?(c=n&&n.length>0&&f.jsx("table",{className:"w-full text-xs",children:f.jsx("tbody",{children:n.map(GQ)})}),e[4]=n,e[5]=c):c=e[5];let u;return e[6]!==o||e[7]!==c?(u=f.jsxs("div",{children:[i,o,c]}),e[6]=o,e[7]=c,e[8]=u):u=e[8],u}function GQ(t,e){return f.jsxs("tr",{className:e%2===0?"bg-neutral-50 dark:bg-neutral-800/30":"",children:[f.jsx("td",{className:"py-1 px-2 text-sky-600 dark:text-sky-400 font-mono truncate max-w-35",title:t.name,children:t.name}),f.jsx("td",{className:"py-1 px-2 truncate",children:f.jsx(ZQ,{env:t})})]},t.name)}function YQ(t,e){return f.jsxs("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 px-2 py-1.5 rounded flex items-center gap-2",children:[t.type==="secret"?f.jsx(hD,{size:12,className:"text-amber-500 shrink-0"}):f.jsx(ei,{size:12,className:"text-blue-400 shrink-0"}),f.jsx("span",{className:"text-neutral-500",children:"from"}),f.jsx("span",{className:t.type==="secret"?"text-amber-500":"text-blue-400",children:t.type==="secret"?"Secret":"ConfigMap"}),f.jsx("span",{className:"text-neutral-900 dark:text-neutral-300 font-mono",children:t.name}),t.prefix&&f.jsxs("span",{className:"text-neutral-500 ml-auto text-[10px]",children:["prefix: ",t.prefix]})]},e)}function ZQ(t){const e=De.c(29),{env:n}=t;if(n.value!==void 0){let r;return e[0]!==n.value?(r=f.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 font-mono",title:n.value,children:n.value}),e[0]=n.value,e[1]=r):r=e[1],r}if(n.valueFrom){const{type:r,source:i,key:o}=n.valueFrom;switch(r){case"secretKeyRef":{const c=`Secret: ${i}/${o}`;let u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u=f.jsx(hD,{size:10,className:"shrink-0"}),e[2]=u):u=e[2];let h;e[3]!==o||e[4]!==i?(h=f.jsxs("span",{className:"truncate font-mono",children:[i,"/",o]}),e[3]=o,e[4]=i,e[5]=h):h=e[5];let m;return e[6]!==c||e[7]!==h?(m=f.jsxs("span",{className:"flex items-center gap-1 text-amber-600 dark:text-amber-500",title:c,children:[u,h]}),e[6]=c,e[7]=h,e[8]=m):m=e[8],m}case"configMapKeyRef":{const c=`ConfigMap: ${i}/${o}`;let u;e[9]===Symbol.for("react.memo_cache_sentinel")?(u=f.jsx(ei,{size:10,className:"shrink-0"}),e[9]=u):u=e[9];let h;e[10]!==o||e[11]!==i?(h=f.jsxs("span",{className:"truncate font-mono",children:[i,"/",o]}),e[10]=o,e[11]=i,e[12]=h):h=e[12];let m;return e[13]!==c||e[14]!==h?(m=f.jsxs("span",{className:"flex items-center gap-1 text-blue-600 dark:text-blue-400",title:c,children:[u,h]}),e[13]=c,e[14]=h,e[15]=m):m=e[15],m}case"fieldRef":{const c=`Field: ${i}`;let u;e[16]===Symbol.for("react.memo_cache_sentinel")?(u=f.jsx(tS,{size:10,className:"shrink-0"}),e[16]=u):u=e[16];let h;e[17]!==i?(h=f.jsx("span",{className:"truncate font-mono",children:i}),e[17]=i,e[18]=h):h=e[18];let m;return e[19]!==c||e[20]!==h?(m=f.jsxs("span",{className:"flex items-center gap-1 text-purple-600 dark:text-purple-400",title:c,children:[u,h]}),e[19]=c,e[20]=h,e[21]=m):m=e[21],m}case"resourceFieldRef":{const c=`Resource: ${i}`;let u;e[22]===Symbol.for("react.memo_cache_sentinel")?(u=f.jsx(tS,{size:10,className:"shrink-0"}),e[22]=u):u=e[22];let h;e[23]!==i?(h=f.jsx("span",{className:"truncate font-mono",children:i}),e[23]=i,e[24]=h):h=e[24];let m;return e[25]!==c||e[26]!==h?(m=f.jsxs("span",{className:"flex items-center gap-1 text-cyan-600 dark:text-cyan-400",title:c,children:[u,h]}),e[25]=c,e[26]=h,e[27]=m):m=e[27],m}}}let s;return e[28]===Symbol.for("react.memo_cache_sentinel")?(s=f.jsx("span",{className:"text-neutral-500 italic",children:"not set"}),e[28]=s):s=e[28],s}function XQ(t){const e=De.c(4),{items:n}=t;if(n.length===0)return null;let s;e[0]!==n?(s=n.map(JQ),e[0]=n,e[1]=s):s=e[1];let r;return e[2]!==s?(r=f.jsx("div",{className:"space-y-2",children:s}),e[2]=s,e[3]=r):r=e[3],r}function JQ(t){return f.jsx(QQ,{volume:t},t.name)}function QQ(t){const e=De.c(31),{volume:n}=t,[s,r]=V.useState(!1);let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=()=>r(see),e[0]=i):i=e[0];const o=i;let c;e[1]===Symbol.for("react.memo_cache_sentinel")?(c={ConfigMap:"border-blue-500/30 bg-blue-500/5",Secret:"border-amber-500/30 bg-amber-500/5",PVC:"border-emerald-500/30 bg-emerald-500/5",EmptyDir:"border-neutral-500/30 bg-neutral-500/5",HostPath:"border-red-500/30 bg-red-500/5",Projected:"border-purple-500/30 bg-purple-500/5",DownwardAPI:"border-cyan-500/30 bg-cyan-500/5",NFS:"border-orange-500/30 bg-orange-500/5",CSI:"border-indigo-500/30 bg-indigo-500/5"},e[1]=c):c=e[1];const u=c;let h;e[2]===Symbol.for("react.memo_cache_sentinel")?(h={ConfigMap:f.jsx(tY,{size:14,className:"text-blue-400"}),Secret:f.jsx(Op,{size:14,className:"text-amber-400"}),PVC:f.jsx(lc,{size:14,className:"text-emerald-400"}),EmptyDir:f.jsx(_v,{size:14,className:"text-neutral-400"}),HostPath:f.jsx(rG,{size:14,className:"text-red-400"}),Projected:f.jsx(pi,{size:14,className:"text-purple-400"}),DownwardAPI:f.jsx(QW,{size:14,className:"text-cyan-400"}),NFS:f.jsx(Vn,{size:14,className:"text-orange-400"}),CSI:f.jsx(zG,{size:14,className:"text-indigo-400"})},e[2]=h):h=e[2];const m=h;let p;e[3]===Symbol.for("react.memo_cache_sentinel")?(p={ConfigMap:"bg-blue-500/20 text-blue-400",Secret:"bg-amber-500/20 text-amber-400",PVC:"bg-emerald-500/20 text-emerald-400",EmptyDir:"bg-neutral-500/20 text-neutral-400",HostPath:"bg-red-500/20 text-red-400",Projected:"bg-purple-500/20 text-purple-400",DownwardAPI:"bg-cyan-500/20 text-cyan-400",NFS:"bg-orange-500/20 text-orange-400",CSI:"bg-indigo-500/20 text-indigo-400"},e[3]=p):p=e[3];const y=p,v=`border rounded-lg overflow-hidden ${u[n.type]||"border-neutral-300 dark:border-neutral-700 bg-neutral-100 dark:bg-neutral-900/50"}`;let x;e[4]!==n.type?(x=m[n.type]||f.jsx(Ns,{size:14,className:"text-neutral-600 dark:text-neutral-400"}),e[4]=n.type,e[5]=x):x=e[5];let _;e[6]!==n.name?(_=f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:n.name})}),e[6]=n.name,e[7]=_):_=e[7];let S;e[8]!==n.source?(S=n.source&&f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400/70",children:n.source}),e[8]=n.source,e[9]=S):S=e[9];let k;e[10]!==n.mounts?(k=n.mounts.length>0&&f.jsxs("span",{className:"ml-2",children:[" ",n.mounts.map(nee).join(", ")]}),e[10]=n.mounts,e[11]=k):k=e[11];let C;e[12]!==S||e[13]!==k?(C=f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 truncate",children:[S,k]}),e[12]=S,e[13]=k,e[14]=C):C=e[14];let N;e[15]!==C||e[16]!==_?(N=f.jsxs("div",{className:"flex-1 min-w-0",children:[_,C]}),e[15]=C,e[16]=_,e[17]=N):N=e[17];let R;e[18]!==N||e[19]!==x?(R=f.jsxs("button",{onClick:o,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[x,N]}),e[18]=N,e[19]=x,e[20]=R):R=e[20];let O;e[21]!==s||e[22]!==n.extra||e[23]!==n.mounts||e[24]!==n.source||e[25]!==n.type?(O=s&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Source"}),f.jsxs("div",{className:"text-xs",children:[f.jsx("span",{className:`px-1.5 py-0.5 rounded ${y[n.type]||"bg-neutral-200 dark:bg-neutral-700 text-neutral-600 dark:text-neutral-400"}`,children:n.type}),n.source&&f.jsx("span",{className:"ml-2 text-cyan-600 dark:text-cyan-400",children:n.source})]}),n.extra&&Object.keys(n.extra).length>0&&f.jsx("div",{className:"mt-2 text-xs space-y-1",children:Object.entries(n.extra).map(tee)})]}),n.mounts.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Mount Points"}),f.jsx("div",{className:"space-y-2",children:n.mounts.map(eee)})]})]}),e[21]=s,e[22]=n.extra,e[23]=n.mounts,e[24]=n.source,e[25]=n.type,e[26]=O):O=e[26];let E;return e[27]!==R||e[28]!==O||e[29]!==v?(E=f.jsxs("div",{className:v,children:[R,O]}),e[27]=R,e[28]=O,e[29]=v,e[30]=E):E=e[30],E}function eee(t,e){return f.jsxs("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(yi,{size:10,className:"text-blue-400"}),f.jsx("span",{className:"text-neutral-900 dark:text-neutral-300",children:t.container}),f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:""}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-mono",children:t.mountPath}),t.readOnly&&f.jsx("span",{className:"px-1 py-0.5 rounded bg-amber-500/20 text-amber-400 text-[10px]",children:"read-only"})]}),t.subPath&&f.jsxs("div",{className:"ml-4 mt-1 text-neutral-600 dark:text-neutral-500",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"subPath:"})," ",f.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:t.subPath})]})]},e)}function tee(t){const[e,n]=t;return f.jsxs("div",{className:"text-neutral-600 dark:text-neutral-400",children:[f.jsxs("span",{className:"text-neutral-500",children:[e,":"]})," ",f.jsx("span",{className:"text-neutral-900 dark:text-neutral-300",children:String(n)})]},e)}function nee(t){return t.mountPath}function see(t){return!t}function ree(t){const e=De.c(4),{items:n}=t;if(n.length===0)return null;let s;e[0]!==n?(s=n.map(iee),e[0]=n,e[1]=s):s=e[1];let r;return e[2]!==s?(r=f.jsx("div",{className:"space-y-3",children:s}),e[2]=s,e[3]=r):r=e[3],r}function iee(t,e){return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsxs("div",{className:"flex items-center gap-2 text-sm text-neutral-900 dark:text-neutral-300",children:[t.icon,t.label]}),f.jsxs("div",{className:"text-xs",children:[f.jsx("span",{className:"text-cyan-400",children:t.allocatable}),f.jsx("span",{className:"text-neutral-500",children:" / "}),f.jsx("span",{className:"text-neutral-400",children:t.capacity})]})]}),f.jsxs("div",{className:"text-[10px] text-neutral-500 flex justify-between",children:[f.jsx("span",{children:"Allocatable"}),f.jsx("span",{children:"Capacity"})]})]},e)}function aee(t){const e=De.c(6),{items:n}=t;if(n.length===0)return null;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s={NoSchedule:"bg-red-500/20 text-red-400 border-red-500/30",PreferNoSchedule:"bg-amber-500/20 text-amber-400 border-amber-500/30",NoExecute:"bg-purple-500/20 text-purple-400 border-purple-500/30"},e[0]=s):s=e[0];const r=s;let i;if(e[1]!==n){let c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=(u,h)=>f.jsxs("span",{className:"text-xs bg-neutral-200 dark:bg-neutral-700 px-2 py-0.5 rounded flex items-center gap-1",title:`${u.key}=${u.value||""}:${u.effect}`,children:[f.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:u.key}),u.value&&f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"text-neutral-400",children:"="}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:u.value})]}),f.jsx("span",{className:`ml-1 px-1 py-0.5 rounded text-[10px] border ${r[u.effect]??"bg-neutral-700 text-neutral-300"}`,children:u.effect})]},h),e[3]=c):c=e[3],i=n.map(c),e[1]=n,e[2]=i}else i=e[2];let o;return e[4]!==i?(o=f.jsx("div",{className:"flex flex-wrap gap-1",children:i}),e[4]=i,e[5]=o):o=e[5],o}function gR(t,e){return e<=0?0:Math.min(100,Math.round(t/e*100))}function oee(t){const e=Math.floor((Date.now()-t.getTime())/1e3);if(e<60)return`${e}s ago`;const n=Math.floor(e/60);if(n<60)return`${n}m ago`;const s=Math.floor(n/60);return s<24?`${s}h ago`:`${Math.floor(s/24)}d ago`}function lee(t){const e=De.c(18),{loader:n,title:s}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],e[0]=r):r=e[0];const[i,o]=V.useState(r),[c,u]=V.useState(!0);let h,m;if(e[1]!==n?(h=()=>{n().then(o).finally(()=>u(!1))},m=[n],e[1]=n,e[2]=h,e[3]=m):(h=e[2],m=e[3]),V.useEffect(h,m),c){let _;e[4]!==s?(_=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[4]=s,e[5]=_):_=e[5];let S;e[6]===Symbol.for("react.memo_cache_sentinel")?(S=f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:"Loading ReplicaSets..."}),e[6]=S):S=e[6];let k;return e[7]!==_?(k=f.jsxs("div",{children:[_,S]}),e[7]=_,e[8]=k):k=e[8],k}if(i.length===0)return null;let p;e[9]!==s?(p=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[9]=s,e[10]=p):p=e[10];let y;e[11]!==i?(y=i.map(cee),e[11]=i,e[12]=y):y=e[12];let v;e[13]!==y?(v=f.jsx("div",{className:"space-y-2",children:y}),e[13]=y,e[14]=v):v=e[14];let x;return e[15]!==p||e[16]!==v?(x=f.jsxs("div",{children:[p,v]}),e[15]=p,e[16]=v,e[17]=x):x=e[17],x}function cee(t){const e=f.jsx("div",{className:`border rounded-lg p-3 ${t.isCurrent?"border-blue-500/30 bg-blue-500/5":"border-neutral-300 dark:border-neutral-700 bg-neutral-100 dark:bg-neutral-900/50 opacity-60"} ${t.context&&t.namespace?"hover:border-blue-500/50 transition-colors cursor-pointer":""}`,children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(pi,{size:16,className:t.isCurrent?"text-blue-400":"text-neutral-600 dark:text-neutral-500"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100 truncate",title:t.name,children:t.name})}),t.images.length>0&&f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 truncate",children:t.images.join(", ")})]}),f.jsxs("div",{className:"text-xs",children:[f.jsxs("span",{className:t.readyReplicas===t.replicas?"text-emerald-600 dark:text-emerald-400":"text-amber-600 dark:text-amber-400",children:[t.readyReplicas,"/",t.replicas]}),f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500 ml-1",children:"ready"})]})]})});return t.context&&t.namespace?f.jsx(ac,{to:"/cluster/$context/$resourceType/$name",params:{context:t.context,resourceType:"replicasets",name:t.name},search:n=>({...n,namespace:t.namespace}),children:e},t.name):f.jsx("div",{children:e},t.name)}function uee(t){const e=De.c(18),{loader:n,title:s}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],e[0]=r):r=e[0];const[i,o]=V.useState(r),[c,u]=V.useState(!0);let h,m;if(e[1]!==n?(h=()=>{n().then(o).finally(()=>u(!1))},m=[n],e[1]=n,e[2]=h,e[3]=m):(h=e[2],m=e[3]),V.useEffect(h,m),c){let _;e[4]!==s?(_=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[4]=s,e[5]=_):_=e[5];let S;e[6]===Symbol.for("react.memo_cache_sentinel")?(S=f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:"Loading PVCs..."}),e[6]=S):S=e[6];let k;return e[7]!==_?(k=f.jsxs("div",{children:[_,S]}),e[7]=_,e[8]=k):k=e[8],k}if(i.length===0)return null;let p;e[9]!==s?(p=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[9]=s,e[10]=p):p=e[10];let y;e[11]!==i?(y=i.map(hee),e[11]=i,e[12]=y):y=e[12];let v;e[13]!==y?(v=f.jsx("div",{className:"space-y-2",children:y}),e[13]=y,e[14]=v):v=e[14];let x;return e[15]!==p||e[16]!==v?(x=f.jsxs("div",{children:[p,v]}),e[15]=p,e[16]=v,e[17]=x):x=e[17],x}function hee(t){const e=f.jsx("div",{className:`border rounded-lg p-3 ${t.status==="Bound"?"border-emerald-500/30 bg-emerald-500/5":"border-neutral-300 dark:border-neutral-700 bg-neutral-100 dark:bg-neutral-900/50"} ${t.context&&t.namespace?"hover:border-emerald-500/50 transition-colors cursor-pointer":""}`,children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Ns,{size:16,className:t.status==="Bound"?"text-emerald-600 dark:text-emerald-400":"text-neutral-600 dark:text-neutral-500"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100 truncate",children:t.name})}),f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:[t.storageClass||"default"," storage class"]})]}),f.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[t.capacity&&f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:t.capacity}),f.jsx("span",{className:t.status==="Bound"?"text-emerald-600 dark:text-emerald-400":"text-amber-600 dark:text-amber-400",children:t.status})]})]})});return t.context&&t.namespace?f.jsx(ac,{to:"/cluster/$context/$resourceType/$name",params:{context:t.context,resourceType:"persistentvolumeclaims",name:t.name},search:n=>({...n,namespace:t.namespace}),children:e},t.name):f.jsx("div",{children:e},t.name)}function dee(t){const e=De.c(26),{loader:n,title:s}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],e[0]=r):r=e[0];const[i,o]=V.useState(r),[c,u]=V.useState(!0),[h,m]=V.useState(!1);let p;e[1]===Symbol.for("react.memo_cache_sentinel")?(p=()=>m(pee),e[1]=p):p=e[1];const y=p;let v,x;if(e[2]!==n?(v=()=>{n().then(o).finally(()=>u(!1))},x=[n],e[2]=n,e[3]=v,e[4]=x):(v=e[3],x=e[4]),V.useEffect(v,x),c){let E;e[5]!==s?(E=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[5]=s,e[6]=E):E=e[6];let D;e[7]===Symbol.for("react.memo_cache_sentinel")?(D=f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:"Loading jobs..."}),e[7]=D):D=e[7];let B;return e[8]!==E?(B=f.jsxs("div",{children:[E,D]}),e[8]=E,e[9]=B):B=e[9],B}if(i.length===0)return null;let _;e[10]!==h||e[11]!==i?(_=h?i:i.slice(0,3),e[10]=h,e[11]=i,e[12]=_):_=e[12];const S=_;let k;e[13]!==s?(k=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[13]=s,e[14]=k):k=e[14];let C;e[15]!==S?(C=S.map(fee),e[15]=S,e[16]=C):C=e[16];let N;e[17]!==h||e[18]!==i.length?(N=i.length>3&&f.jsxs("button",{onClick:y,className:"flex items-center gap-1 text-xs text-neutral-600 dark:text-neutral-500 hover:text-neutral-900 dark:hover:text-neutral-300 transition-colors mt-2",children:[h?f.jsx(ps,{size:12}):f.jsx(Xr,{size:12}),h?"Show less":`Show ${i.length-3} more`]}),e[17]=h,e[18]=i.length,e[19]=N):N=e[19];let R;e[20]!==C||e[21]!==N?(R=f.jsxs("div",{className:"space-y-2",children:[C,N]}),e[20]=C,e[21]=N,e[22]=R):R=e[22];let O;return e[23]!==k||e[24]!==R?(O=f.jsxs("div",{children:[k,R]}),e[23]=k,e[24]=R,e[25]=O):O=e[25],O}function fee(t){const e=f.jsx("div",{className:`border rounded-lg p-3 ${t.status==="Complete"?"border-emerald-500/30 bg-emerald-500/5":t.status==="Failed"?"border-red-500/30 bg-red-500/5":"border-amber-500/30 bg-amber-500/5"} ${t.context&&t.namespace?"hover:border-blue-500/50 transition-colors cursor-pointer":""}`,children:f.jsxs("div",{className:"flex items-center gap-3",children:[t.status==="Complete"?f.jsx(vi,{size:16,className:"text-emerald-400"}):t.status==="Failed"?f.jsx(Ra,{size:16,className:"text-red-400"}):f.jsx(Oa,{size:16,className:"text-amber-400"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100 truncate",title:t.name,children:t.name})}),t.startTime&&f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:["Started ",oee(new Date(t.startTime))]})]}),f.jsx("span",{className:`text-xs ${t.status==="Complete"?"text-emerald-600 dark:text-emerald-400":t.status==="Failed"?"text-red-600 dark:text-red-400":"text-amber-600 dark:text-amber-400"}`,children:t.status})]})});return t.context&&t.namespace?f.jsx(ac,{to:"/cluster/$context/$resourceType/$name",params:{context:t.context,resourceType:"jobs",name:t.name},search:n=>({...n,namespace:t.namespace}),children:e},t.name):f.jsx("div",{children:e},t.name)}function pee(t){return!t}function mee(t){const e=De.c(4),{items:n}=t;let s;e[0]!==n?(s=n.map(gee),e[0]=n,e[1]=s):s=e[1];let r;return e[2]!==s?(r=f.jsx("div",{className:"space-y-2",children:s}),e[2]=s,e[3]=r):r=e[3],r}function gee(t,e){return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(Ns,{size:14,className:"text-purple-400"}),f.jsx("span",{className:"text-sm text-neutral-900 dark:text-neutral-100",children:t.name})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[t.size&&f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Size:"})," ",f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:t.size})]}),t.storageClass&&f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Class:"})," ",f.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:t.storageClass})]}),t.accessModes&&f.jsxs("div",{className:"col-span-2",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Access:"})," ",f.jsx("span",{className:"text-neutral-900 dark:text-neutral-300",children:t.accessModes.join(", ")})]})]})]},e)}function yee(t){const e=De.c(8),{schedule:n,description:s}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(uD,{size:16,className:"text-purple-400"}),f.jsx("span",{className:"text-sm text-neutral-900 dark:text-neutral-100",children:"Schedule"})]}),e[0]=r):r=e[0];let i;e[1]!==n?(i=f.jsx("div",{className:"font-mono text-cyan-600 dark:text-cyan-400 text-lg mb-1",children:n}),e[1]=n,e[2]=i):i=e[2];let o;e[3]!==s?(o=f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:s}),e[3]=s,e[4]=o):o=e[4];let c;return e[5]!==i||e[6]!==o?(c=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[r,i,o]}),e[5]=i,e[6]=o,e[7]=c):c=e[7],c}function vee(t){const e=De.c(35),{completions:n,succeeded:s,failed:r,active:i}=t;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=f.jsx("span",{className:"text-sm text-neutral-900 dark:text-neutral-300",children:"Completions"}),e[0]=o):o=e[0];const c=s>=n?"text-emerald-600 dark:text-emerald-400":"text-cyan-600 dark:text-cyan-400";let u;e[1]!==s||e[2]!==c?(u=f.jsx("span",{className:c,children:s}),e[1]=s,e[2]=c,e[3]=u):u=e[3];let h;e[4]!==n?(h=f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-500",children:[" / ",n]}),e[4]=n,e[5]=h):h=e[5];let m;e[6]!==u||e[7]!==h?(m=f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o,f.jsxs("span",{className:"text-sm",children:[u,h]})]}),e[6]=u,e[7]=h,e[8]=m):m=e[8];let p;e[9]!==n||e[10]!==s?(p=s>0&&f.jsx("div",{className:"h-full bg-emerald-500",style:{width:`${s/n*100}%`}}),e[9]=n,e[10]=s,e[11]=p):p=e[11];let y;e[12]!==n||e[13]!==r?(y=r>0&&f.jsx("div",{className:"h-full bg-red-500",style:{width:`${r/(n+r)*100}%`}}),e[12]=n,e[13]=r,e[14]=y):y=e[14];let v;e[15]!==p||e[16]!==y?(v=f.jsxs("div",{className:"h-2 bg-neutral-300 dark:bg-neutral-700 rounded-full overflow-hidden flex",children:[p,y]}),e[15]=p,e[16]=y,e[17]=v):v=e[17];let x;e[18]===Symbol.for("react.memo_cache_sentinel")?(x=f.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),e[18]=x):x=e[18];let _;e[19]!==s?(_=f.jsxs("div",{className:"flex items-center gap-1",children:[x,f.jsxs("span",{className:"text-neutral-700 dark:text-neutral-400",children:["Succeeded: ",s]})]}),e[19]=s,e[20]=_):_=e[20];let S;e[21]===Symbol.for("react.memo_cache_sentinel")?(S=f.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"}),e[21]=S):S=e[21];let k;e[22]!==i?(k=f.jsxs("div",{className:"flex items-center gap-1",children:[S,f.jsxs("span",{className:"text-neutral-700 dark:text-neutral-400",children:["Active: ",i]})]}),e[22]=i,e[23]=k):k=e[23];let C;e[24]===Symbol.for("react.memo_cache_sentinel")?(C=f.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),e[24]=C):C=e[24];let N;e[25]!==r?(N=f.jsxs("div",{className:"flex items-center gap-1",children:[C,f.jsxs("span",{className:"text-neutral-700 dark:text-neutral-400",children:["Failed: ",r]})]}),e[25]=r,e[26]=N):N=e[26];let R;e[27]!==_||e[28]!==k||e[29]!==N?(R=f.jsxs("div",{className:"flex items-center gap-4 mt-3 text-xs",children:[_,k,N]}),e[27]=_,e[28]=k,e[29]=N,e[30]=R):R=e[30];let O;return e[31]!==R||e[32]!==m||e[33]!==v?(O=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[m,v,R]}),e[31]=R,e[32]=m,e[33]=v,e[34]=O):O=e[34],O}function bee(t){const e=De.c(7),{startTime:n,completionTime:s}=t;let r;e[0]!==n?(r=n&&f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Started:"})," ",f.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:n.toLocaleString()})]}),e[0]=n,e[1]=r):r=e[1];let i;e[2]!==s?(i=s&&f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Completed:"})," ",f.jsx("span",{className:"text-emerald-600 dark:text-emerald-400",children:s.toLocaleString()})]}),e[2]=s,e[3]=i):i=e[3];let o;return e[4]!==r||e[5]!==i?(o=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3 space-y-2 text-xs",children:[r,i]}),e[4]=r,e[5]=i,e[6]=o):o=e[6],o}function _ee(t){const e=De.c(11),{items:n,columns:s}=t,r=s===void 0?2:s;let i,o;if(e[0]!==r||e[1]!==n){const u=n.filter(xee),h=r===3?"grid-cols-3":r===2?"grid-cols-2":"grid-cols-1";let m;e[4]!==r?(m=v=>{if(r!==3)return"";const x=v%3;return x===0?"text-left":x===1?"text-center":"text-right"},e[4]=r,e[5]=m):m=e[5];const p=m;i=`bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3 grid gap-2 text-xs ${h}`;let y;e[6]!==p?(y=(v,x)=>f.jsxs("div",{className:`overflow-hidden ${p(x)}`,children:[f.jsxs("span",{className:"text-neutral-500 dark:text-neutral-500",children:[v.label,":"]})," ",f.jsx("span",{className:v.color||"text-neutral-900 dark:text-neutral-300",children:v.value})]},x),e[6]=p,e[7]=y):y=e[7],o=u.map(y),e[0]=r,e[1]=n,e[2]=i,e[3]=o}else i=e[2],o=e[3];let c;return e[8]!==i||e[9]!==o?(c=f.jsx("div",{className:i,children:o}),e[8]=i,e[9]=o,e[10]=c):c=e[10],c}function xee(t){return t.value!==void 0&&t.value!==null}function wee(t){const e=De.c(20),{labels:n,title:s}=t,r=s===void 0?"Labels":s;let i,o,c,u,h;if(e[0]!==n||e[1]!==r){h=Symbol.for("react.early_return_sentinel");e:{const v=Object.entries(n);if(v.length===0){h=null;break e}const x=["node-role.kubernetes.io/","kubernetes.io/os","kubernetes.io/arch","node.kubernetes.io/instance-type","topology.kubernetes.io/"],_=[...v].sort((k,C)=>{const N=x.some(O=>k[0].startsWith(O)),R=x.some(O=>C[0].startsWith(O));return N&&!R?-1:!N&&R?1:0});let S;e[7]===Symbol.for("react.memo_cache_sentinel")?(S=f.jsx(yD,{size:12}),e[7]=S):S=e[7],e[8]!==r?(u=f.jsxs("h5",{className:"flex items-center gap-2 text-xs font-medium text-neutral-500 uppercase tracking-wider mb-2",children:[S,r]}),e[8]=r,e[9]=u):u=e[9],o="w-full text-xs table-fixed",e[10]===Symbol.for("react.memo_cache_sentinel")?(c=f.jsxs("colgroup",{children:[f.jsx("col",{className:"w-[40%]"}),f.jsx("col",{className:"w-[60%]"})]}),e[10]=c):c=e[10],i=_.map((k,C)=>{const[N,R]=k,O=x.some(E=>N.startsWith(E));return f.jsxs("tr",{className:C%2===0?"bg-neutral-50 dark:bg-neutral-800/30":"",children:[f.jsx("td",{className:`py-1.5 px-2 truncate ${O?"text-blue-600 dark:text-blue-400":"text-sky-600 dark:text-sky-400"}`,title:N,children:N}),f.jsx("td",{className:"py-1.5 px-2 text-emerald-600 dark:text-emerald-400 truncate",title:R,children:R})]},N)})}e[0]=n,e[1]=r,e[2]=i,e[3]=o,e[4]=c,e[5]=u,e[6]=h}else i=e[2],o=e[3],c=e[4],u=e[5],h=e[6];if(h!==Symbol.for("react.early_return_sentinel"))return h;let m;e[11]!==i?(m=f.jsx("tbody",{children:i}),e[11]=i,e[12]=m):m=e[12];let p;e[13]!==o||e[14]!==c||e[15]!==m?(p=f.jsxs("table",{className:o,children:[c,m]}),e[13]=o,e[14]=c,e[15]=m,e[16]=p):p=e[16];let y;return e[17]!==u||e[18]!==p?(y=f.jsxs("div",{children:[u,p]}),e[17]=u,e[18]=p,e[19]=y):y=e[19],y}function See(t){const e=De.c(4),{containers:n}=t;let s;e[0]!==n?(s=n.map(kee),e[0]=n,e[1]=s):s=e[1];let r;return e[2]!==s?(r=f.jsx("div",{className:"space-y-1",children:s}),e[2]=s,e[3]=r):r=e[3],r}function kee(t){return f.jsxs("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 px-2 py-1.5 rounded flex items-center gap-2",children:[f.jsx(yi,{size:12,className:"text-blue-400"}),f.jsxs("span",{className:"text-neutral-900 dark:text-neutral-300",children:[t.name,":"]}),f.jsx("span",{className:"text-cyan-400 truncate",children:t.image})]},t.name)}function Cee(t){const e=De.c(4),{addresses:n}=t;let s;e[0]!==n?(s=n.map(Nee),e[0]=n,e[1]=s):s=e[1];let r;return e[2]!==s?(r=f.jsx("div",{className:"grid grid-cols-2 gap-2",children:s}),e[2]=s,e[3]=r):r=e[3],r}function Nee(t,e){return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-2",children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:t.type}),f.jsx("div",{className:"text-sm text-cyan-600 dark:text-cyan-400 font-mono",children:t.address})]},e)}const Eee=15e3;function Aee(t){const e=De.c(56),{loader:n,title:s}=t,[r,i]=V.useState(null),[o,c]=V.useState(!0);let u,h;if(e[0]!==n?(u=()=>{let M=!0;const F=async()=>{const Q=await n();M&&(i(Q),c(!1))};F();const A=setInterval(F,Eee);return()=>{M=!1,clearInterval(A)}},h=[n],e[0]=n,e[1]=u,e[2]=h):(u=e[1],h=e[2]),V.useEffect(u,h),!o&&r===null)return null;if(o){let M;e[3]!==s?(M=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[3]=s,e[4]=M):M=e[4];let F;e[5]===Symbol.for("react.memo_cache_sentinel")?(F=f.jsxs("div",{className:"flex items-center gap-2 text-xs text-neutral-500",children:[f.jsx(Ln,{size:12,className:"animate-spin"}),"Loading metrics..."]}),e[5]=F):F=e[5];let A;return e[6]!==M?(A=f.jsxs("div",{children:[M,F]}),e[6]=M,e[7]=A):A=e[7],A}if(!r)return null;const m=gR(r.cpu.usageNanoCores,r.cpu.allocatableNanoCores??0),p=gR(r.memory.usageBytes,r.memory.allocatableBytes??0);let y;e[8]!==s?(y=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[8]=s,e[9]=y):y=e[9];let v;e[10]===Symbol.for("react.memo_cache_sentinel")?(v=f.jsxs("span",{className:"text-xs text-neutral-400 flex items-center gap-1.5",children:[f.jsx(bv,{size:12}),"CPU Usage"]}),e[10]=v):v=e[10];const x=m>80?"text-amber-400":"text-blue-400";let _;e[11]!==r.cpu.usage||e[12]!==x?(_=f.jsx("span",{className:x,children:r.cpu.usage}),e[11]=r.cpu.usage,e[12]=x,e[13]=_):_=e[13];let S;e[14]!==r.cpu.allocatable?(S=f.jsxs("span",{className:"text-neutral-500",children:[" / ",r.cpu.allocatable]}),e[14]=r.cpu.allocatable,e[15]=S):S=e[15];let k;e[16]!==_||e[17]!==S?(k=f.jsxs("div",{className:"flex items-center justify-between",children:[v,f.jsxs("span",{className:"text-xs font-mono",children:[_,S]})]}),e[16]=_,e[17]=S,e[18]=k):k=e[18];const C=`h-full transition-all duration-300 ${m>80?"bg-amber-500":"bg-blue-500"}`,N=`${m}%`;let R;e[19]!==N?(R={width:N},e[19]=N,e[20]=R):R=e[20];let O;e[21]!==R||e[22]!==C?(O=f.jsx("div",{className:"h-2 bg-neutral-700 rounded-full overflow-hidden",children:f.jsx("div",{className:C,style:R})}),e[21]=R,e[22]=C,e[23]=O):O=e[23];let E;e[24]!==m?(E=f.jsxs("div",{className:"text-xs text-neutral-500 text-right",children:[m,"% utilized"]}),e[24]=m,e[25]=E):E=e[25];let D;e[26]!==O||e[27]!==E||e[28]!==k?(D=f.jsxs("div",{className:"bg-neutral-900/50 rounded-lg p-3 space-y-2",children:[k,O,E]}),e[26]=O,e[27]=E,e[28]=k,e[29]=D):D=e[29];let B;e[30]===Symbol.for("react.memo_cache_sentinel")?(B=f.jsxs("span",{className:"text-xs text-neutral-400 flex items-center gap-1.5",children:[f.jsx(Ns,{size:12}),"Memory Usage"]}),e[30]=B):B=e[30];const q=p>80?"text-amber-400":"text-purple-400";let P;e[31]!==r.memory.usage||e[32]!==q?(P=f.jsx("span",{className:q,children:r.memory.usage}),e[31]=r.memory.usage,e[32]=q,e[33]=P):P=e[33];let G;e[34]!==r.memory.allocatable?(G=f.jsxs("span",{className:"text-neutral-500",children:[" / ",r.memory.allocatable]}),e[34]=r.memory.allocatable,e[35]=G):G=e[35];let z;e[36]!==P||e[37]!==G?(z=f.jsxs("div",{className:"flex items-center justify-between",children:[B,f.jsxs("span",{className:"text-xs font-mono",children:[P,G]})]}),e[36]=P,e[37]=G,e[38]=z):z=e[38];const K=`h-full transition-all duration-300 ${p>80?"bg-amber-500":"bg-purple-500"}`,Z=`${p}%`;let W;e[39]!==Z?(W={width:Z},e[39]=Z,e[40]=W):W=e[40];let I;e[41]!==K||e[42]!==W?(I=f.jsx("div",{className:"h-2 bg-neutral-700 rounded-full overflow-hidden",children:f.jsx("div",{className:K,style:W})}),e[41]=K,e[42]=W,e[43]=I):I=e[43];let Y;e[44]!==p?(Y=f.jsxs("div",{className:"text-xs text-neutral-500 text-right",children:[p,"% utilized"]}),e[44]=p,e[45]=Y):Y=e[45];let J;e[46]!==z||e[47]!==I||e[48]!==Y?(J=f.jsxs("div",{className:"bg-neutral-900/50 rounded-lg p-3 space-y-2",children:[z,I,Y]}),e[46]=z,e[47]=I,e[48]=Y,e[49]=J):J=e[49];let $;e[50]!==D||e[51]!==J?($=f.jsxs("div",{className:"space-y-3",children:[D,J]}),e[50]=D,e[51]=J,e[52]=$):$=e[52];let j;return e[53]!==$||e[54]!==y?(j=f.jsxs("div",{children:[y,$]}),e[53]=$,e[54]=y,e[55]=j):j=e[55],j}function jee(t){const e=De.c(24),{data:n}=t,{cpu:s,memory:r}=n;if(!(s.requests||s.limits||r.requests||r.limits))return null;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=f.jsx("h5",{className:"text-xs font-medium text-neutral-500 uppercase tracking-wider mb-2",children:"Resource Quota"}),e[0]=o):o=e[0];let c;e[1]===Symbol.for("react.memo_cache_sentinel")?(c=f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(bv,{size:14,className:"text-blue-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"CPU"})]}),e[1]=c):c=e[1];let u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u=f.jsx("span",{className:"text-xs text-neutral-500",children:"Requests"}),e[2]=u):u=e[2];const h=s.requests||"";let m;e[3]!==h?(m=f.jsxs("div",{className:"flex items-center justify-between",children:[u,f.jsx("span",{className:"text-sm font-mono text-neutral-900 dark:text-neutral-100",children:h})]}),e[3]=h,e[4]=m):m=e[4];let p;e[5]===Symbol.for("react.memo_cache_sentinel")?(p=f.jsx("span",{className:"text-xs text-neutral-500",children:"Limits"}),e[5]=p):p=e[5];const y=s.limits||"";let v;e[6]!==y?(v=f.jsxs("div",{className:"flex items-center justify-between",children:[p,f.jsx("span",{className:"text-sm font-mono text-neutral-900 dark:text-neutral-100",children:y})]}),e[6]=y,e[7]=v):v=e[7];let x;e[8]!==m||e[9]!==v?(x=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800 rounded-lg p-3",children:[c,f.jsxs("div",{className:"space-y-1.5",children:[m,v]})]}),e[8]=m,e[9]=v,e[10]=x):x=e[10];let _;e[11]===Symbol.for("react.memo_cache_sentinel")?(_=f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(Ns,{size:14,className:"text-purple-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Memory"})]}),e[11]=_):_=e[11];let S;e[12]===Symbol.for("react.memo_cache_sentinel")?(S=f.jsx("span",{className:"text-xs text-neutral-500",children:"Requests"}),e[12]=S):S=e[12];const k=r.requests||"";let C;e[13]!==k?(C=f.jsxs("div",{className:"flex items-center justify-between",children:[S,f.jsx("span",{className:"text-sm font-mono text-neutral-900 dark:text-neutral-100",children:k})]}),e[13]=k,e[14]=C):C=e[14];let N;e[15]===Symbol.for("react.memo_cache_sentinel")?(N=f.jsx("span",{className:"text-xs text-neutral-500",children:"Limits"}),e[15]=N):N=e[15];const R=r.limits||"";let O;e[16]!==R?(O=f.jsxs("div",{className:"flex items-center justify-between",children:[N,f.jsx("span",{className:"text-sm font-mono text-neutral-900 dark:text-neutral-100",children:R})]}),e[16]=R,e[17]=O):O=e[17];let E;e[18]!==C||e[19]!==O?(E=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800 rounded-lg p-3",children:[_,f.jsxs("div",{className:"space-y-1.5",children:[C,O]})]}),e[18]=C,e[19]=O,e[20]=E):E=e[20];let D;return e[21]!==E||e[22]!==x?(D=f.jsxs("div",{children:[o,f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[x,E]})]}),e[21]=E,e[22]=x,e[23]=D):D=e[23],D}function CL(t){const e=De.c(9),{section:n}=t,{title:s,data:r}=n;let i;e[0]!==r?(i=Tee(r),e[0]=r,e[1]=i):i=e[1];const o=i;if(o===null)return null;if(!s){let h;return e[2]!==o?(h=f.jsx("div",{children:o}),e[2]=o,e[3]=h):h=e[3],h}let c;e[4]!==s?(c=f.jsx("h5",{className:"text-xs font-medium text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[4]=s,e[5]=c):c=e[5];let u;return e[6]!==o||e[7]!==c?(u=f.jsxs("div",{children:[c,o]}),e[6]=o,e[7]=c,e[8]=u):u=e[8],u}function Tee(t){switch(t.type){case"status-cards":return f.jsx(BQ,{items:t.items});case"gauges":return f.jsx(LQ,{items:t.items,podGrid:t.showPodGrid});case"info-grid":return f.jsx(_ee,{items:t.items,columns:t.columns});case"containers":return f.jsx(zQ,{items:t.items,metricsLoader:t.metricsLoader});case"volumes":return f.jsx(XQ,{items:t.items});case"labels":return f.jsx(wee,{labels:t.labels,title:t.title});case"capacity-bars":return f.jsx(ree,{items:t.items});case"taints":return f.jsx(aee,{items:t.items});case"container-images":return f.jsx(See,{containers:t.containers});case"related-replicasets":return f.jsx(lee,{loader:t.loader,title:t.title});case"related-pvcs":return f.jsx(uee,{loader:t.loader,title:t.title});case"related-jobs":return f.jsx(dee,{loader:t.loader,title:t.title});case"volume-claim-templates":return f.jsx(mee,{items:t.items});case"schedule":return f.jsx(yee,{schedule:t.schedule,description:t.description});case"job-progress":return f.jsx(vee,{...t});case"timeline":return f.jsx(bee,{startTime:t.startTime,completionTime:t.completionTime});case"addresses":return f.jsx(Cee,{addresses:t.addresses});case"node-metrics":return f.jsx(Aee,{loader:t.loader,title:t.title});case"resource-quota":return f.jsx(jee,{data:t.data});case"custom":return t.render();default:return null}}function Ree(t){const e=De.c(21),{context:n,resource:s,onActionComplete:r,hideActions:i}=t,o=i===void 0?!1:i;let c;e[0]!==n||e[1]!==s?(c=DQ(n,s),e[0]=n,e[1]=s,e[2]=c):c=e[2];const u=c;let h;e[3]!==s?(h=SL(s),e[3]=s,e[4]=h):h=e[4];const m=h,p=s.metadata?.annotations?.["kubernetes.io/description"];if(!u||u.sections.length===0){let S;return e[5]!==s.kind?(S=f.jsxs("div",{className:"text-neutral-500 text-sm",children:["No visualization available for ",s.kind]}),e[5]=s.kind,e[6]=S):S=e[6],S}let y;e[7]!==m||e[8]!==n||e[9]!==o||e[10]!==r||e[11]!==s?(y=!o&&f.jsx(kL,{context:n,actions:m,resource:s,onActionComplete:r}),e[7]=m,e[8]=n,e[9]=o,e[10]=r,e[11]=s,e[12]=y):y=e[12];let v;e[13]!==p?(v=p&&f.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:p}),e[13]=p,e[14]=v):v=e[14];let x;e[15]!==u.sections?(x=u.sections.map(Oee),e[15]=u.sections,e[16]=x):x=e[16];let _;return e[17]!==y||e[18]!==v||e[19]!==x?(_=f.jsxs("div",{className:"space-y-6",children:[y,v,x]}),e[17]=y,e[18]=v,e[19]=x,e[20]=_):_=e[20],_}function Oee(t){return f.jsx(CL,{section:t},t.id)}function sN(t){const e=De.c(6),{toolbarRef:n,children:s}=t,[r,i]=V.useState(null);let o,c;e[0]!==n?(o=()=>{i(n.current)},c=[n],e[0]=n,e[1]=o,e[2]=c):(o=e[1],c=e[2]),V.useEffect(o,c);let u;return e[3]!==s||e[4]!==r?(u=r?K2.createPortal(s,r):null,e[3]=s,e[4]=r,e[5]=u):u=e[5],u}const yR=["text-cyan-400","text-emerald-400","text-amber-400","text-purple-400","text-pink-400","text-blue-400","text-red-400","text-orange-400"];function Mee(t,e){const n=e.indexOf(t);return yR[n%yR.length]}function Dee(t){if(!t)return"";try{return new Date(t).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3})}catch{return t}}const Bee=/^([IWEF])(\d{4})\s+(\d{2}:\d{2}:\d{2}\.\d+)\s+\d+\s+([\w.]+:\d+)]\s*(.*)$/;function Lee(t){const e=t.match(Bee);if(!e)return null;const[,n,,,s,r]=e,i=n==="E"?"error":n==="W"?"warn":n==="F"?"error":"info",o=NL(r),c=[`source: ${s}`];for(const[u,h]of Object.entries(o))c.push(`${u}: ${h}`);return{format:"klog",formatted:c.join(`
`),level:i}}function NL(t){const e={},n=/(?:"([^"]*)"|([\w.]+)=(?:"([^"]*)"|([^\s]*)))/g;let s,r=0;for(;(s=n.exec(t))!==null;)if(s[1]!==void 0)e[`msg${r||""}`]=s[1],r++;else{const i=s[2],o=s[3]??s[4]??"";e[i]=o}return e}function Iee(t){const e=t.trim();if(!/\w+=/.test(e))return null;const n=NL(e),s=Object.keys(n);if(s.length<2)return null;let r="unknown";const i=(n.level??n.lvl??n.severity??"").toLowerCase();return i.includes("err")||i==="fatal"?r="error":i.includes("warn")?r="warn":i==="info"?r="info":i==="debug"&&(r="debug"),{format:"logfmt",formatted:s.map(c=>`${c}: ${n[c]}`).join(`
`),level:r}}function Pee(t){const e=t.trim();if(e.startsWith("{")||e.startsWith("["))try{const r=JSON.parse(e);return{format:"json",formatted:JSON.stringify(r,null,2),jsonData:r}}catch{}const n=Lee(e);if(n)return n;const s=Iee(e);return s||{format:"plain",formatted:t}}const $ee={error:"text-red-600 dark:text-red-400",warn:"text-yellow-600 dark:text-yellow-400",info:"text-blue-600 dark:text-blue-400",debug:"text-neutral-600 dark:text-neutral-400",trace:"text-neutral-500 dark:text-neutral-500",unknown:"text-neutral-700 dark:text-neutral-300"},zee={error:"bg-red-50 dark:bg-red-500/10 border-l-2 border-red-400 dark:border-red-500/50",warn:"bg-yellow-50 dark:bg-yellow-500/10 border-l-2 border-yellow-400 dark:border-yellow-500/50",info:"",debug:"",trace:"",unknown:""};function Uee(t,e,n){if(n&&n!=="unknown")return n;if(e){const i=e.level??e.severity??e.lvl??e.log_level??"",o=String(i).toLowerCase();if(o.includes("err")||o==="fatal"||o==="critical")return"error";if(o.includes("warn"))return"warn";if(o==="info")return"info";if(o==="debug")return"debug";if(o==="trace")return"trace"}const r=t.toLowerCase().slice(0,100);return/\b(error|err|fatal|critical|panic|exception)\b/.test(r)?"error":/\b(warn|warning)\b/.test(r)?"warn":/\binfo\b/.test(r)?"info":/\bdebug\b/.test(r)?"debug":/\btrace\b/.test(r)?"trace":"unknown"}function EL(t){const e=De.c(53),{logs:n,sources:s,isLoading:r,error:i,emptyMessage:o,unavailableMessage:c,toolbarRef:u}=t,h=r===void 0?!1:r,m=o===void 0?"Waiting for logs...":o,[p,y]=V.useState(!0),[v,x]=V.useState(!1),[_,S]=V.useState(!1),k=V.useRef(null),C=V.useRef(null);let N;e[0]!==n?(N=async()=>{const F=n.map(Hee).join(`
`);await navigator.clipboard.writeText(F),x(!0),setTimeout(()=>x(!1),2e3)},e[0]=n,e[1]=N):N=e[1];const R=N;let O;e[2]===Symbol.for("react.memo_cache_sentinel")?(O=()=>{if(!C.current)return;const{scrollTop:F,scrollHeight:A,clientHeight:Q}=C.current,se=A-F-Q<50;y(se)},e[2]=O):O=e[2];const E=O;let D;e[3]!==p?(D=()=>{p&&k.current&&k.current.scrollIntoView({behavior:"smooth"})},e[3]=p,e[4]=D):D=e[4];let B;e[5]!==p||e[6]!==n?(B=[n,p],e[5]=p,e[6]=n,e[7]=B):B=e[7],V.useEffect(D,B);let q;e[8]===Symbol.for("react.memo_cache_sentinel")?(q=()=>{y(!0),k.current?.scrollIntoView({behavior:"smooth"})},e[8]=q):q=e[8];const P=q;if(c){let F;return e[9]!==c?(F=f.jsx("div",{className:"h-full flex items-center justify-center text-neutral-500 dark:text-neutral-500",children:c}),e[9]=c,e[10]=F):F=e[10],F}let G;e[11]!==v||e[12]!==R||e[13]!==n.length||e[14]!==_||e[15]!==u?(G=u&&f.jsxs(sN,{toolbarRef:u,children:[f.jsx("button",{onClick:()=>S(!_),className:`flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium rounded transition-colors ${_?"text-amber-600 dark:text-amber-400 bg-amber-100 dark:bg-amber-500/20":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-200 dark:hover:bg-neutral-800"}`,title:_?"Show all logs":"Show only errors & warnings",children:f.jsx(lG,{size:12})}),f.jsx("button",{onClick:R,disabled:n.length===0,className:"flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-200 dark:hover:bg-neutral-800 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Copy logs",children:v?f.jsx(Nn,{size:12,className:"text-emerald-500"}):f.jsx(xs,{size:12})})]}),e[11]=v,e[12]=R,e[13]=n.length,e[14]=_,e[15]=u,e[16]=G):G=e[16];let z;e[17]!==h?(z=h&&f.jsx("div",{className:"p-4 text-neutral-500 dark:text-neutral-500",children:"Loading..."}),e[17]=h,e[18]=z):z=e[18];let K;e[19]!==i?(K=i&&f.jsx("div",{className:"p-4 text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-500/10 border-b border-red-300 dark:border-red-500/30",children:i}),e[19]=i,e[20]=K):K=e[20];let Z;e[21]!==h||e[22]!==s||e[23]!==c?(Z=!h&&s.length===0&&!c&&f.jsx("div",{className:"p-4 text-neutral-500 dark:text-neutral-500",children:"No sources found"}),e[21]=h,e[22]=s,e[23]=c,e[24]=Z):Z=e[24];let W;e[25]!==m||e[26]!==i||e[27]!==h||e[28]!==n.length||e[29]!==s?(W=n.length===0&&!h&&s.length>0&&!i&&f.jsx("div",{className:"p-4 text-neutral-500 dark:text-neutral-500",children:m}),e[25]=m,e[26]=i,e[27]=h,e[28]=n.length,e[29]=s,e[30]=W):W=e[30];let I;if(e[31]!==n||e[32]!==_||e[33]!==s){let F;e[35]!==_||e[36]!==s?(F=(A,Q)=>{const se=Pee(A.message),X=Uee(A.message,se.jsonData,se.level);if(_&&X!=="error"&&X!=="warn")return null;const ae=$ee[X],ke=zee[X],Se=se.format!=="plain";return f.jsxs("div",{className:`hover:bg-neutral-100 dark:hover:bg-neutral-900/50 rounded px-2 py-1 group ${ke}`,children:[f.jsxs("div",{className:"flex items-center gap-2 text-[10px] leading-tight mb-0.5",children:[f.jsx("span",{className:`${Mee(A.source,s)}`,title:A.source,children:A.source}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-600",children:Dee(A.timestamp)}),A.container&&A.container!==A.source&&f.jsx("span",{className:"text-neutral-500 dark:text-neutral-500",children:A.container})]}),Se?f.jsx("pre",{className:`${ae} whitespace-pre overflow-x-auto scrollbar-hide leading-snug text-[11px]`,children:se.formatted}):f.jsx("div",{className:`${ae} break-all whitespace-pre-wrap leading-snug`,children:se.formatted})]},Q)},e[35]=_,e[36]=s,e[37]=F):F=e[37],I=n.map(F),e[31]=n,e[32]=_,e[33]=s,e[34]=I}else I=e[34];let Y;e[38]===Symbol.for("react.memo_cache_sentinel")?(Y=f.jsx("div",{ref:k}),e[38]=Y):Y=e[38];let J;e[39]!==I?(J=f.jsxs("div",{className:"p-2 space-y-1",children:[I,Y]}),e[39]=I,e[40]=J):J=e[40];let $;e[41]!==K||e[42]!==Z||e[43]!==W||e[44]!==J||e[45]!==z?($=f.jsxs("div",{ref:C,onScroll:E,className:"flex-1 overflow-auto font-mono text-xs",children:[z,K,Z,W,J]}),e[41]=K,e[42]=Z,e[43]=W,e[44]=J,e[45]=z,e[46]=$):$=e[46];let j;e[47]!==p?(j=!p&&f.jsx("div",{className:"shrink-0 px-4 py-2 border-t border-neutral-200 dark:border-neutral-800 bg-neutral-100 dark:bg-neutral-900/50",children:f.jsxs("button",{onClick:P,className:"flex items-center gap-1 text-xs text-neutral-600 dark:text-neutral-500 hover:text-neutral-900 dark:hover:text-neutral-300",children:[f.jsx(ps,{size:12}),"Scroll to bottom"]})}),e[47]=p,e[48]=j):j=e[48];let M;return e[49]!==$||e[50]!==j||e[51]!==G?(M=f.jsxs("div",{className:"flex flex-col h-full bg-neutral-50 dark:bg-neutral-950",children:[G,$,j]}),e[49]=$,e[50]=j,e[51]=G,e[52]=M):M=e[52],M}function Hee(t){return`${t.timestamp??""} [${t.source}]${t.container?` [${t.container}]`:""} ${t.message}`}function vR(t,e,n){const s=t.match(/^(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d+Z)\s+(.*)$/);return s?{podName:e,container:n,timestamp:s[1],message:s[2]}:{podName:e,container:n,message:t}}async function Fee(t,e,n,s){const r=new URLSearchParams;s.container&&r.set("container",s.container),s.follow&&r.set("follow","true"),s.tailLines!==void 0&&r.set("tailLines",String(s.tailLines)),s.timestamps&&r.set("timestamps","true");const i=`/contexts/${t}/api/v1/namespaces/${e}/pods/${n}/log?${r.toString()}`;try{const o=await fetch(i,{signal:s.signal});if(!o.ok)throw new Error(`Failed to fetch logs: ${o.status} ${o.statusText}`);if(!o.body)throw new Error("No response body");const c=o.body.getReader(),u=new TextDecoder;let h="";for(;;){const{done:m,value:p}=await c.read();if(m)break;h+=u.decode(p,{stream:!0});const y=h.split(`
`);h=y.pop()||"";for(const v of y)v.trim()&&s.onLog(vR(v,n,s.container))}h.trim()&&s.onLog(vR(h,n,s.container))}catch(o){if(o.name==="AbortError")return;s.onError?.(o)}}function bR(t){const e=new AbortController;for(const n of t.podNames)Fee(t.context,t.namespace,n,{container:t.container,follow:t.follow,tailLines:t.tailLines,timestamps:t.timestamps,onLog:t.onLog,onError:t.onError,signal:e.signal});return e}async function Vee(t,e,n){const s=`/contexts/${t}/api/v1/namespaces/${e}/pods/${n}`,r=await fetch(s);if(!r.ok)throw new Error(`Failed to fetch pod: ${r.status}`);const i=await r.json(),o=[];if(i.spec?.initContainers)for(const c of i.spec.initContainers)o.push(c.name);if(i.spec?.containers)for(const c of i.spec.containers)o.push(c.name);return o}async function qee(t,e,n,s){let r;switch(n.toLowerCase()){case"deployment":r=`/apis/apps/v1/namespaces/${e}/deployments/${s}`;break;case"daemonset":r=`/apis/apps/v1/namespaces/${e}/daemonsets/${s}`;break;case"replicaset":r=`/apis/apps/v1/namespaces/${e}/replicasets/${s}`;break;case"statefulset":r=`/apis/apps/v1/namespaces/${e}/statefulsets/${s}`;break;case"job":r=`/apis/batch/v1/namespaces/${e}/jobs/${s}`;break;default:throw new Error(`Unsupported workload kind: ${n}`)}const i=await fetch(`/contexts/${t}${r}`);if(!i.ok)throw new Error(`Failed to fetch ${n}: ${i.status}`);const c=(await i.json()).spec?.selector?.matchLabels;if(!c)throw new Error("Workload has no selector labels");const u=Object.entries(c).map(([p,y])=>`${p}=${y}`).join(","),h=await fetch(`/contexts/${t}/api/v1/namespaces/${e}/pods?labelSelector=${encodeURIComponent(u)}`);if(!h.ok)throw new Error(`Failed to fetch pods: ${h.status}`);return(await h.json()).items.map(p=>p.metadata.name)}const Kee=4e3;function Wee(t){const e=De.c(44),{context:n,resource:s,tailLines:r}=t,i=r===void 0?Kee:r;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=[],e[0]=o):o=e[0];const[c,u]=V.useState(o);let h;e[1]===Symbol.for("react.memo_cache_sentinel")?(h=[],e[1]=h):h=e[1];const[m,p]=V.useState(h);let y;e[2]===Symbol.for("react.memo_cache_sentinel")?(y=[],e[2]=y):y=e[2];const[v,x]=V.useState(y),[_,S]=V.useState(!1),[k,C]=V.useState(null),[N,R]=V.useState(!1),O=V.useRef(null),E=s.kind,D=s.metadata?.name,B=s.metadata?.namespace;let q;e:{if(E==="Pod"&&D){let F;e[3]!==D?(F=[D],e[3]=D,e[4]=F):F=e[4],q=F;break e}q=m}const P=q;let G,z;e[5]!==n||e[6]!==E||e[7]!==D||e[8]!==B?(G=()=>{if(!E||!D||!B||E==="Pod")return;let F=!1;return async function(){S(!0);try{const se=await qee(n,B,E,D);F||(p(se),S(!1))}catch(se){F||(C(se.message),S(!1))}}(),()=>{F=!0}},z=[n,B,E,D],e[5]=n,e[6]=E,e[7]=D,e[8]=B,e[9]=G,e[10]=z):(G=e[9],z=e[10]),V.useEffect(G,z);let K,Z;e[11]!==n||e[12]!==E||e[13]!==D||e[14]!==B?(K=()=>{if(!E||!D||!B||E!=="Pod")return;let F=!1;return async function(){S(!0);try{const se=await Vee(n,B,D);F||(x(se),S(!1))}catch(se){F||(C(se.message),S(!1))}}(),()=>{F=!0}},Z=[n,B,E,D],e[11]=n,e[12]=E,e[13]=D,e[14]=B,e[15]=K,e[16]=Z):(K=e[15],Z=e[16]),V.useEffect(K,Z);const W=E==="Pod"&&v.length>1,I=P.length>0&&!N&&!_&&(E!=="Pod"||v.length>0);let Y;e[17]!==n||e[18]!==W||e[19]!==B||e[20]!==v||e[21]!==I||e[22]!==P||e[23]!==i?(Y=()=>{if(I&&B){const F=setTimeout(()=>{if(R(!0),W){const A=[];for(const Q of v){const se=bR({context:n,namespace:B,podNames:P,container:Q,follow:!0,tailLines:Math.ceil(i/v.length),timestamps:!0,onLog:X=>{const ae={timestamp:X.timestamp,message:X.message,source:X.podName,container:Q};u(ke=>[...ke,ae])},onError:X=>{C(X.message)}});A.push(se)}O.current={abort:()=>A.forEach(Gee),signal:A[0]?.signal}}else O.current=bR({context:n,namespace:B,podNames:P,container:v.length===1?v[0]:void 0,follow:!0,tailLines:i,timestamps:!0,onLog:A=>{const Q={timestamp:A.timestamp,message:A.message,source:A.podName,container:A.container};u(se=>[...se,Q])},onError:A=>{C(A.message)}})},0);return()=>clearTimeout(F)}},e[17]=n,e[18]=W,e[19]=B,e[20]=v,e[21]=I,e[22]=P,e[23]=i,e[24]=Y):Y=e[24];let J;e[25]!==n||e[26]!==W||e[27]!==E||e[28]!==B||e[29]!==v||e[30]!==I||e[31]!==P||e[32]!==i?(J=[I,n,B,P,i,W,v,E],e[25]=n,e[26]=W,e[27]=E,e[28]=B,e[29]=v,e[30]=I,e[31]=P,e[32]=i,e[33]=J):J=e[33],V.useEffect(Y,J);let $;e[34]===Symbol.for("react.memo_cache_sentinel")?($=()=>()=>{O.current?.abort(),O.current=null},e[34]=$):$=e[34];let j;e[35]!==E||e[36]!==D||e[37]!==B?(j=[E,D,B],e[35]=E,e[36]=D,e[37]=B,e[38]=j):j=e[38],V.useEffect($,j);let M;return e[39]!==k||e[40]!==_||e[41]!==c||e[42]!==P?(M={logs:c,sources:P,isLoading:_,error:k},e[39]=k,e[40]=_,e[41]=c,e[42]=P,e[43]=M):M=e[43],M}function Gee(t){return t.abort()}function Yee(t){const e=De.c(9),{context:n,resource:s,toolbarRef:r}=t;let i;e[0]!==n||e[1]!==s?(i={context:n,resource:s},e[0]=n,e[1]=s,e[2]=i):i=e[2];const{logs:o,sources:c,isLoading:u,error:h}=Wee(i);let m;return e[3]!==h||e[4]!==u||e[5]!==o||e[6]!==c||e[7]!==r?(m=f.jsx(EL,{logs:o,sources:c,isLoading:u,error:h,emptyMessage:"Waiting for logs...",toolbarRef:r}),e[3]=h,e[4]=u,e[5]=o,e[6]=c,e[7]=r,e[8]=m):m=e[8],m}function Zee(t){return`${t.kind}/${t.metadata?.namespace}/${t.metadata?.name}`}function Xee(t){const e=De.c(7),{context:n,resource:s,toolbarRef:r}=t;let i;e[0]!==s?(i=Zee(s),e[0]=s,e[1]=i):i=e[1];let o;return e[2]!==n||e[3]!==s||e[4]!==i||e[5]!==r?(o=f.jsx(Yee,{context:n,resource:s,toolbarRef:r},i),e[2]=n,e[3]=s,e[4]=i,e[5]=r,e[6]=o):o=e[6],o}var AL=Object.defineProperty,Jee=Object.getOwnPropertyDescriptor,Qee=(t,e)=>{for(var n in e)AL(t,n,{get:e[n],enumerable:!0})},xn=(t,e,n,s)=>{for(var r=s>1?void 0:s?Jee(e,n):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(r=(s?o(e,n,r):o(r))||r);return s&&r&&AL(e,n,r),r},Pe=(t,e)=>(n,s)=>e(n,s,t),_R="Terminal input",_k={get:()=>_R,set:t=>_R=t},xR="Too much output to announce, navigate to rows manually to read",xk={get:()=>xR,set:t=>xR=t};function ete(t){return t.replace(/\r?\n/g,"\r")}function tte(t,e){return e?"\x1B[200~"+t+"\x1B[201~":t}function nte(t,e){t.clipboardData&&t.clipboardData.setData("text/plain",e.selectionText),t.preventDefault()}function ste(t,e,n,s){if(t.stopPropagation(),t.clipboardData){let r=t.clipboardData.getData("text/plain");jL(r,e,n,s)}}function jL(t,e,n,s){t=ete(t),t=tte(t,n.decPrivateModes.bracketedPasteMode&&s.rawOptions.ignoreBracketedPasteMode!==!0),n.triggerDataEvent(t,!0),e.value=""}function TL(t,e,n){let s=n.getBoundingClientRect(),r=t.clientX-s.left-10,i=t.clientY-s.top-10;e.style.width="20px",e.style.height="20px",e.style.left=`${r}px`,e.style.top=`${i}px`,e.style.zIndex="1000",e.focus()}function wR(t,e,n,s,r){TL(t,e,n),r&&s.rightClickSelect(t),e.value=s.selectionText,e.select()}function bo(t){return t>65535?(t-=65536,String.fromCharCode((t>>10)+55296)+String.fromCharCode(t%1024+56320)):String.fromCharCode(t)}function gb(t,e=0,n=t.length){let s="";for(let r=e;r<n;++r){let i=t[r];i>65535?(i-=65536,s+=String.fromCharCode((i>>10)+55296)+String.fromCharCode(i%1024+56320)):s+=String.fromCharCode(i)}return s}var rte=class{constructor(){this._interim=0}clear(){this._interim=0}decode(t,e){let n=t.length;if(!n)return 0;let s=0,r=0;if(this._interim){let i=t.charCodeAt(r++);56320<=i&&i<=57343?e[s++]=(this._interim-55296)*1024+i-56320+65536:(e[s++]=this._interim,e[s++]=i),this._interim=0}for(let i=r;i<n;++i){let o=t.charCodeAt(i);if(55296<=o&&o<=56319){if(++i>=n)return this._interim=o,s;let c=t.charCodeAt(i);56320<=c&&c<=57343?e[s++]=(o-55296)*1024+c-56320+65536:(e[s++]=o,e[s++]=c);continue}o!==65279&&(e[s++]=o)}return s}},ite=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(t,e){let n=t.length;if(!n)return 0;let s=0,r,i,o,c,u=0,h=0;if(this.interim[0]){let y=!1,v=this.interim[0];v&=(v&224)===192?31:(v&240)===224?15:7;let x=0,_;for(;(_=this.interim[++x]&63)&&x<4;)v<<=6,v|=_;let S=(this.interim[0]&224)===192?2:(this.interim[0]&240)===224?3:4,k=S-x;for(;h<k;){if(h>=n)return 0;if(_=t[h++],(_&192)!==128){h--,y=!0;break}else this.interim[x++]=_,v<<=6,v|=_&63}y||(S===2?v<128?h--:e[s++]=v:S===3?v<2048||v>=55296&&v<=57343||v===65279||(e[s++]=v):v<65536||v>1114111||(e[s++]=v)),this.interim.fill(0)}let m=n-4,p=h;for(;p<n;){for(;p<m&&!((r=t[p])&128)&&!((i=t[p+1])&128)&&!((o=t[p+2])&128)&&!((c=t[p+3])&128);)e[s++]=r,e[s++]=i,e[s++]=o,e[s++]=c,p+=4;if(r=t[p++],r<128)e[s++]=r;else if((r&224)===192){if(p>=n)return this.interim[0]=r,s;if(i=t[p++],(i&192)!==128){p--;continue}if(u=(r&31)<<6|i&63,u<128){p--;continue}e[s++]=u}else if((r&240)===224){if(p>=n)return this.interim[0]=r,s;if(i=t[p++],(i&192)!==128){p--;continue}if(p>=n)return this.interim[0]=r,this.interim[1]=i,s;if(o=t[p++],(o&192)!==128){p--;continue}if(u=(r&15)<<12|(i&63)<<6|o&63,u<2048||u>=55296&&u<=57343||u===65279)continue;e[s++]=u}else if((r&248)===240){if(p>=n)return this.interim[0]=r,s;if(i=t[p++],(i&192)!==128){p--;continue}if(p>=n)return this.interim[0]=r,this.interim[1]=i,s;if(o=t[p++],(o&192)!==128){p--;continue}if(p>=n)return this.interim[0]=r,this.interim[1]=i,this.interim[2]=o,s;if(c=t[p++],(c&192)!==128){p--;continue}if(u=(r&7)<<18|(i&63)<<12|(o&63)<<6|c&63,u<65536||u>1114111)continue;e[s++]=u}}return s}},RL="",No=" ",Xp=class OL{constructor(){this.fg=0,this.bg=0,this.extended=new Uy}static toColorRGB(e){return[e>>>16&255,e>>>8&255,e&255]}static fromColorRGB(e){return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255}clone(){let e=new OL;return e.fg=this.fg,e.bg=this.bg,e.extended=this.extended.clone(),e}isInverse(){return this.fg&67108864}isBold(){return this.fg&134217728}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:this.fg&268435456}isBlink(){return this.fg&536870912}isInvisible(){return this.fg&1073741824}isItalic(){return this.bg&67108864}isDim(){return this.bg&134217728}isStrikethrough(){return this.fg&2147483648}isProtected(){return this.bg&536870912}isOverline(){return this.bg&1073741824}getFgColorMode(){return this.fg&50331648}getBgColorMode(){return this.bg&50331648}isFgRGB(){return(this.fg&50331648)===50331648}isBgRGB(){return(this.bg&50331648)===50331648}isFgPalette(){return(this.fg&50331648)===16777216||(this.fg&50331648)===33554432}isBgPalette(){return(this.bg&50331648)===16777216||(this.bg&50331648)===33554432}isFgDefault(){return(this.fg&50331648)===0}isBgDefault(){return(this.bg&50331648)===0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(this.fg&50331648){case 16777216:case 33554432:return this.fg&255;case 50331648:return this.fg&16777215;default:return-1}}getBgColor(){switch(this.bg&50331648){case 16777216:case 33554432:return this.bg&255;case 50331648:return this.bg&16777215;default:return-1}}hasExtendedAttrs(){return this.bg&268435456}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(this.bg&268435456&&~this.extended.underlineColor)switch(this.extended.underlineColor&50331648){case 16777216:case 33554432:return this.extended.underlineColor&255;case 50331648:return this.extended.underlineColor&16777215;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return this.bg&268435456&&~this.extended.underlineColor?this.extended.underlineColor&50331648:this.getFgColorMode()}isUnderlineColorRGB(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===50331648:this.isFgRGB()}isUnderlineColorPalette(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===16777216||(this.extended.underlineColor&50331648)===33554432:this.isFgPalette()}isUnderlineColorDefault(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===0:this.isFgDefault()}getUnderlineStyle(){return this.fg&268435456?this.bg&268435456?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}},Uy=class ML{constructor(e=0,n=0){this._ext=0,this._urlId=0,this._ext=e,this._urlId=n}get ext(){return this._urlId?this._ext&-469762049|this.underlineStyle<<26:this._ext}set ext(e){this._ext=e}get underlineStyle(){return this._urlId?5:(this._ext&469762048)>>26}set underlineStyle(e){this._ext&=-469762049,this._ext|=e<<26&469762048}get underlineColor(){return this._ext&67108863}set underlineColor(e){this._ext&=-67108864,this._ext|=e&67108863}get urlId(){return this._urlId}set urlId(e){this._urlId=e}get underlineVariantOffset(){let e=(this._ext&3758096384)>>29;return e<0?e^4294967288:e}set underlineVariantOffset(e){this._ext&=536870911,this._ext|=e<<29&3758096384}clone(){return new ML(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}},Jr=class DL extends Xp{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new Uy,this.combinedData=""}static fromCharData(e){let n=new DL;return n.setFromCharData(e),n}isCombined(){return this.content&2097152}getWidth(){return this.content>>22}getChars(){return this.content&2097152?this.combinedData:this.content&2097151?bo(this.content&2097151):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):this.content&2097151}setFromCharData(e){this.fg=e[0],this.bg=0;let n=!1;if(e[1].length>2)n=!0;else if(e[1].length===2){let s=e[1].charCodeAt(0);if(55296<=s&&s<=56319){let r=e[1].charCodeAt(1);56320<=r&&r<=57343?this.content=(s-55296)*1024+r-56320+65536|e[2]<<22:n=!0}else n=!0}else this.content=e[1].charCodeAt(0)|e[2]<<22;n&&(this.combinedData=e[1],this.content=2097152|e[2]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},SR="di$target",wk="di$dependencies",Hx=new Map;function ate(t){return t[wk]||[]}function ns(t){if(Hx.has(t))return Hx.get(t);let e=function(n,s,r){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");ote(e,n,r)};return e._id=t,Hx.set(t,e),e}function ote(t,e,n){e[SR]===e?e[wk].push({id:t,index:n}):(e[wk]=[{id:t,index:n}],e[SR]=e)}var $s=ns("BufferService"),BL=ns("CoreMouseService"),fc=ns("CoreService"),lte=ns("CharsetService"),rN=ns("InstantiationService"),LL=ns("LogService"),zs=ns("OptionsService"),IL=ns("OscLinkService"),cte=ns("UnicodeService"),Jp=ns("DecorationService"),Sk=class{constructor(t,e,n){this._bufferService=t,this._optionsService=e,this._oscLinkService=n}provideLinks(t,e){let n=this._bufferService.buffer.lines.get(t-1);if(!n){e(void 0);return}let s=[],r=this._optionsService.rawOptions.linkHandler,i=new Jr,o=n.getTrimmedLength(),c=-1,u=-1,h=!1;for(let m=0;m<o;m++)if(!(u===-1&&!n.hasContent(m))){if(n.loadCell(m,i),i.hasExtendedAttrs()&&i.extended.urlId)if(u===-1){u=m,c=i.extended.urlId;continue}else h=i.extended.urlId!==c;else u!==-1&&(h=!0);if(h||u!==-1&&m===o-1){let p=this._oscLinkService.getLinkData(c)?.uri;if(p){let y={start:{x:u+1,y:t},end:{x:m+(!h&&m===o-1?1:0),y:t}},v=!1;if(!r?.allowNonHttpProtocols)try{let x=new URL(p);["http:","https:"].includes(x.protocol)||(v=!0)}catch{v=!0}v||s.push({text:p,range:y,activate:(x,_)=>r?r.activate(x,_,y):ute(x,_),hover:(x,_)=>r?.hover?.(x,_,y),leave:(x,_)=>r?.leave?.(x,_,y)})}h=!1,i.hasExtendedAttrs()&&i.extended.urlId?(u=m,c=i.extended.urlId):(u=-1,c=-1)}}e(s)}};Sk=xn([Pe(0,$s),Pe(1,zs),Pe(2,IL)],Sk);function ute(t,e){if(confirm(`Do you want to navigate to ${e}?

WARNING: This link could potentially be dangerous`)){let n=window.open();if(n){try{n.opener=null}catch{}n.location.href=e}else console.warn("Opening link blocked as opener could not be cleared")}}var yb=ns("CharSizeService"),Pa=ns("CoreBrowserService"),iN=ns("MouseService"),$a=ns("RenderService"),hte=ns("SelectionService"),PL=ns("CharacterJoinerService"),kh=ns("ThemeService"),$L=ns("LinkProviderService"),dte=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(t){setTimeout(()=>{throw t.stack?kR.isErrorNoTelemetry(t)?new kR(t.message+`

`+t.stack):new Error(t.message+`

`+t.stack):t},0)}}addListener(t){return this.listeners.push(t),()=>{this._removeListener(t)}}emit(t){this.listeners.forEach(e=>{e(t)})}_removeListener(t){this.listeners.splice(this.listeners.indexOf(t),1)}setUnexpectedErrorHandler(t){this.unexpectedErrorHandler=t}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(t){this.unexpectedErrorHandler(t),this.emit(t)}onUnexpectedExternalError(t){this.unexpectedErrorHandler(t)}},fte=new dte;function _0(t){pte(t)||fte.onUnexpectedError(t)}var kk="Canceled";function pte(t){return t instanceof mte?!0:t instanceof Error&&t.name===kk&&t.message===kk}var mte=class extends Error{constructor(){super(kk),this.name=this.message}};function gte(t){return new Error(`Illegal argument: ${t}`)}var kR=class Ck extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof Ck)return e;let n=new Ck;return n.message=e.message,n.stack=e.stack,n}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}},Nk=class zL extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,zL.prototype)}};function fr(t,e=0){return t[t.length-(1+e)]}var yte;(t=>{function e(i){return i<0}t.isLessThan=e;function n(i){return i<=0}t.isLessThanOrEqual=n;function s(i){return i>0}t.isGreaterThan=s;function r(i){return i===0}t.isNeitherLessOrGreaterThan=r,t.greaterThan=1,t.lessThan=-1,t.neitherLessOrGreaterThan=0})(yte||={});function vte(t,e){let n=this,s=!1,r;return function(){return s||(s=!0,e||(r=t.apply(n,arguments))),r}}var UL;(t=>{function e(R){return R&&typeof R=="object"&&typeof R[Symbol.iterator]=="function"}t.is=e;let n=Object.freeze([]);function s(){return n}t.empty=s;function*r(R){yield R}t.single=r;function i(R){return e(R)?R:r(R)}t.wrap=i;function o(R){return R||n}t.from=o;function*c(R){for(let O=R.length-1;O>=0;O--)yield R[O]}t.reverse=c;function u(R){return!R||R[Symbol.iterator]().next().done===!0}t.isEmpty=u;function h(R){return R[Symbol.iterator]().next().value}t.first=h;function m(R,O){let E=0;for(let D of R)if(O(D,E++))return!0;return!1}t.some=m;function p(R,O){for(let E of R)if(O(E))return E}t.find=p;function*y(R,O){for(let E of R)O(E)&&(yield E)}t.filter=y;function*v(R,O){let E=0;for(let D of R)yield O(D,E++)}t.map=v;function*x(R,O){let E=0;for(let D of R)yield*O(D,E++)}t.flatMap=x;function*_(...R){for(let O of R)yield*O}t.concat=_;function S(R,O,E){let D=E;for(let B of R)D=O(D,B);return D}t.reduce=S;function*k(R,O,E=R.length){for(O<0&&(O+=R.length),E<0?E+=R.length:E>R.length&&(E=R.length);O<E;O++)yield R[O]}t.slice=k;function C(R,O=Number.POSITIVE_INFINITY){let E=[];if(O===0)return[E,R];let D=R[Symbol.iterator]();for(let B=0;B<O;B++){let q=D.next();if(q.done)return[E,t.empty()];E.push(q.value)}return[E,{[Symbol.iterator](){return D}}]}t.consume=C;async function N(R){let O=[];for await(let E of R)O.push(E);return Promise.resolve(O)}t.asyncToArray=N})(UL||={});function tc(t){if(UL.is(t)){let e=[];for(let n of t)if(n)try{n.dispose()}catch(s){e.push(s)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}function bte(...t){return hn(()=>tc(t))}function hn(t){return{dispose:vte(()=>{t()})}}var HL=class FL{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{tc(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?FL.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),void 0)}};HL.DISABLE_DISPOSED_WARNING=!1;var Bo=HL,kt=class{constructor(){this._store=new Bo,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};kt.None=Object.freeze({dispose(){}});var th=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(t){this._isDisposed||t===this._value||(this._value?.dispose(),this._value=t)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}clearAndLeak(){let t=this._value;return this._value=void 0,t}},xa=typeof window=="object"?window:globalThis,Ek=class Ak{constructor(e){this.element=e,this.next=Ak.Undefined,this.prev=Ak.Undefined}};Ek.Undefined=new Ek(void 0);var mn=Ek,CR=class{constructor(){this._first=mn.Undefined,this._last=mn.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===mn.Undefined}clear(){let t=this._first;for(;t!==mn.Undefined;){let e=t.next;t.prev=mn.Undefined,t.next=mn.Undefined,t=e}this._first=mn.Undefined,this._last=mn.Undefined,this._size=0}unshift(t){return this._insert(t,!1)}push(t){return this._insert(t,!0)}_insert(t,e){let n=new mn(t);if(this._first===mn.Undefined)this._first=n,this._last=n;else if(e){let r=this._last;this._last=n,n.prev=r,r.next=n}else{let r=this._first;this._first=n,n.next=r,r.prev=n}this._size+=1;let s=!1;return()=>{s||(s=!0,this._remove(n))}}shift(){if(this._first!==mn.Undefined){let t=this._first.element;return this._remove(this._first),t}}pop(){if(this._last!==mn.Undefined){let t=this._last.element;return this._remove(this._last),t}}_remove(t){if(t.prev!==mn.Undefined&&t.next!==mn.Undefined){let e=t.prev;e.next=t.next,t.next.prev=e}else t.prev===mn.Undefined&&t.next===mn.Undefined?(this._first=mn.Undefined,this._last=mn.Undefined):t.next===mn.Undefined?(this._last=this._last.prev,this._last.next=mn.Undefined):t.prev===mn.Undefined&&(this._first=this._first.next,this._first.prev=mn.Undefined);this._size-=1}*[Symbol.iterator](){let t=this._first;for(;t!==mn.Undefined;)yield t.element,t=t.next}},_te=globalThis.performance&&typeof globalThis.performance.now=="function",xte=class VL{static create(e){return new VL(e)}constructor(e){this._now=_te&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}},ds;(t=>{t.None=()=>kt.None;function e(z,K){return p(z,()=>{},0,void 0,!0,void 0,K)}t.defer=e;function n(z){return(K,Z=null,W)=>{let I=!1,Y;return Y=z(J=>{if(!I)return Y?Y.dispose():I=!0,K.call(Z,J)},null,W),I&&Y.dispose(),Y}}t.once=n;function s(z,K,Z){return h((W,I=null,Y)=>z(J=>W.call(I,K(J)),null,Y),Z)}t.map=s;function r(z,K,Z){return h((W,I=null,Y)=>z(J=>{K(J),W.call(I,J)},null,Y),Z)}t.forEach=r;function i(z,K,Z){return h((W,I=null,Y)=>z(J=>K(J)&&W.call(I,J),null,Y),Z)}t.filter=i;function o(z){return z}t.signal=o;function c(...z){return(K,Z=null,W)=>{let I=bte(...z.map(Y=>Y(J=>K.call(Z,J))));return m(I,W)}}t.any=c;function u(z,K,Z,W){let I=Z;return s(z,Y=>(I=K(I,Y),I),W)}t.reduce=u;function h(z,K){let Z,W={onWillAddFirstListener(){Z=z(I.fire,I)},onDidRemoveLastListener(){Z?.dispose()}},I=new Te(W);return K?.add(I),I.event}function m(z,K){return K instanceof Array?K.push(z):K&&K.add(z),z}function p(z,K,Z=100,W=!1,I=!1,Y,J){let $,j,M,F=0,A,Q={leakWarningThreshold:Y,onWillAddFirstListener(){$=z(X=>{F++,j=K(j,X),W&&!M&&(se.fire(j),j=void 0),A=()=>{let ae=j;j=void 0,M=void 0,(!W||F>1)&&se.fire(ae),F=0},typeof Z=="number"?(clearTimeout(M),M=setTimeout(A,Z)):M===void 0&&(M=0,queueMicrotask(A))})},onWillRemoveListener(){I&&F>0&&A?.()},onDidRemoveLastListener(){A=void 0,$.dispose()}},se=new Te(Q);return J?.add(se),se.event}t.debounce=p;function y(z,K=0,Z){return t.debounce(z,(W,I)=>W?(W.push(I),W):[I],K,void 0,!0,void 0,Z)}t.accumulate=y;function v(z,K=(W,I)=>W===I,Z){let W=!0,I;return i(z,Y=>{let J=W||!K(Y,I);return W=!1,I=Y,J},Z)}t.latch=v;function x(z,K,Z){return[t.filter(z,K,Z),t.filter(z,W=>!K(W),Z)]}t.split=x;function _(z,K=!1,Z=[],W){let I=Z.slice(),Y=z(j=>{I?I.push(j):$.fire(j)});W&&W.add(Y);let J=()=>{I?.forEach(j=>$.fire(j)),I=null},$=new Te({onWillAddFirstListener(){Y||(Y=z(j=>$.fire(j)),W&&W.add(Y))},onDidAddFirstListener(){I&&(K?setTimeout(J):J())},onDidRemoveLastListener(){Y&&Y.dispose(),Y=null}});return W&&W.add($),$.event}t.buffer=_;function S(z,K){return(Z,W,I)=>{let Y=K(new C);return z(function(J){let $=Y.evaluate(J);$!==k&&Z.call(W,$)},void 0,I)}}t.chain=S;let k=Symbol("HaltChainable");class C{constructor(){this.steps=[]}map(K){return this.steps.push(K),this}forEach(K){return this.steps.push(Z=>(K(Z),Z)),this}filter(K){return this.steps.push(Z=>K(Z)?Z:k),this}reduce(K,Z){let W=Z;return this.steps.push(I=>(W=K(W,I),W)),this}latch(K=(Z,W)=>Z===W){let Z=!0,W;return this.steps.push(I=>{let Y=Z||!K(I,W);return Z=!1,W=I,Y?I:k}),this}evaluate(K){for(let Z of this.steps)if(K=Z(K),K===k)break;return K}}function N(z,K,Z=W=>W){let W=(...$)=>J.fire(Z(...$)),I=()=>z.on(K,W),Y=()=>z.removeListener(K,W),J=new Te({onWillAddFirstListener:I,onDidRemoveLastListener:Y});return J.event}t.fromNodeEventEmitter=N;function R(z,K,Z=W=>W){let W=(...$)=>J.fire(Z(...$)),I=()=>z.addEventListener(K,W),Y=()=>z.removeEventListener(K,W),J=new Te({onWillAddFirstListener:I,onDidRemoveLastListener:Y});return J.event}t.fromDOMEventEmitter=R;function O(z){return new Promise(K=>n(z)(K))}t.toPromise=O;function E(z){let K=new Te;return z.then(Z=>{K.fire(Z)},()=>{K.fire(void 0)}).finally(()=>{K.dispose()}),K.event}t.fromPromise=E;function D(z,K){return z(Z=>K.fire(Z))}t.forward=D;function B(z,K,Z){return K(Z),z(W=>K(W))}t.runAndSubscribe=B;class q{constructor(K,Z){this._observable=K,this._counter=0,this._hasChanged=!1;let W={onWillAddFirstListener:()=>{K.addObserver(this)},onDidRemoveLastListener:()=>{K.removeObserver(this)}};this.emitter=new Te(W),Z&&Z.add(this.emitter)}beginUpdate(K){this._counter++}handlePossibleChange(K){}handleChange(K,Z){this._hasChanged=!0}endUpdate(K){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function P(z,K){return new q(z,K).emitter.event}t.fromObservable=P;function G(z){return(K,Z,W)=>{let I=0,Y=!1,J={beginUpdate(){I++},endUpdate(){I--,I===0&&(z.reportChanges(),Y&&(Y=!1,K.call(Z)))},handlePossibleChange(){},handleChange(){Y=!0}};z.addObserver(J),z.reportChanges();let $={dispose(){z.removeObserver(J)}};return W instanceof Bo?W.add($):Array.isArray(W)&&W.push($),$}}t.fromObservableLight=G})(ds||={});var jk=class Tk{constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${Tk._idPool++}`,Tk.all.add(this)}start(e){this._stopWatch=new xte,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}};jk.all=new Set,jk._idPool=0;var wte=jk,Ste=-1,qL=class KL{constructor(e,n,s=(KL._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e,this.threshold=n,this.name=s,this._warnCountdown=0}dispose(){this._stacks?.clear()}check(e,n){let s=this.threshold;if(s<=0||n<s)return;this._stacks||(this._stacks=new Map);let r=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,r+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=s*.5;let[i,o]=this.getMostFrequentStack(),c=`[${this.name}] potential listener LEAK detected, having ${n} listeners already. MOST frequent listener (${o}):`;console.warn(c),console.warn(i);let u=new Nte(c,i);this._errorHandler(u)}return()=>{let i=this._stacks.get(e.value)||0;this._stacks.set(e.value,i-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,n=0;for(let[s,r]of this._stacks)(!e||n<r)&&(e=[s,r],n=r);return e}};qL._idPool=1;var kte=qL,Cte=class WL{constructor(e){this.value=e}static create(){let e=new Error;return new WL(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},Nte=class extends Error{constructor(t,e){super(t),this.name="ListenerLeakError",this.stack=e}},Ete=class extends Error{constructor(t,e){super(t),this.name="ListenerRefusalError",this.stack=e}},Ate=0,Fx=class{constructor(t){this.value=t,this.id=Ate++}},jte=2,Tte,Te=class{constructor(e){this._size=0,this._options=e,this._leakageMon=this._options?.leakWarningThreshold?new kte(e?.onListenerError??_0,this._options?.leakWarningThreshold??Ste):void 0,this._perfMon=this._options?._profName?new wte(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){this._disposed||(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose())}get event(){return this._event??=(e,n,s)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let c=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(c);let u=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],h=new Ete(`${c}. HINT: Stack shows most frequent listener (${u[1]}-times)`,u[0]);return(this._options?.onListenerError||_0)(h),kt.None}if(this._disposed)return kt.None;n&&(e=e.bind(n));let r=new Fx(e),i;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(r.stack=Cte.create(),i=this._leakageMon.check(r.stack,this._size+1)),this._listeners?this._listeners instanceof Fx?(this._deliveryQueue??=new Rte,this._listeners=[this._listeners,r]):this._listeners.push(r):(this._options?.onWillAddFirstListener?.(this),this._listeners=r,this._options?.onDidAddFirstListener?.(this)),this._size++;let o=hn(()=>{i?.(),this._removeListener(r)});return s instanceof Bo?s.add(o):Array.isArray(s)&&s.push(o),o},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let n=this._listeners,s=n.indexOf(e);if(s===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,n[s]=void 0;let r=this._deliveryQueue.current===this;if(this._size*jte<=n.length){let i=0;for(let o=0;o<n.length;o++)n[o]?n[i++]=n[o]:r&&(this._deliveryQueue.end--,i<this._deliveryQueue.i&&this._deliveryQueue.i--);n.length=i}}_deliver(e,n){if(!e)return;let s=this._options?.onListenerError||_0;if(!s){e.value(n);return}try{e.value(n)}catch(r){s(r)}}_deliverQueue(e){let n=e.current._listeners;for(;e.i<e.end;)this._deliver(n[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof Fx)this._deliver(this._listeners,e);else{let n=this._deliveryQueue;n.enqueue(this,e,this._listeners.length),this._deliverQueue(n)}this._perfMon?.stop()}hasListeners(){return this._size>0}},Rte=class{constructor(){this.i=-1,this.end=0}enqueue(t,e,n){this.i=0,this.end=n,this.current=t,this.value=e}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},Rk=class{constructor(){this.mapWindowIdToZoomLevel=new Map,this._onDidChangeZoomLevel=new Te,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this.mapWindowIdToZoomFactor=new Map,this._onDidChangeFullscreen=new Te,this.onDidChangeFullscreen=this._onDidChangeFullscreen.event,this.mapWindowIdToFullScreen=new Map}getZoomLevel(e){return this.mapWindowIdToZoomLevel.get(this.getWindowId(e))??0}setZoomLevel(e,n){if(this.getZoomLevel(n)===e)return;let s=this.getWindowId(n);this.mapWindowIdToZoomLevel.set(s,e),this._onDidChangeZoomLevel.fire(s)}getZoomFactor(e){return this.mapWindowIdToZoomFactor.get(this.getWindowId(e))??1}setZoomFactor(e,n){this.mapWindowIdToZoomFactor.set(this.getWindowId(n),e)}setFullscreen(e,n){if(this.isFullscreen(n)===e)return;let s=this.getWindowId(n);this.mapWindowIdToFullScreen.set(s,e),this._onDidChangeFullscreen.fire(s)}isFullscreen(e){return!!this.mapWindowIdToFullScreen.get(this.getWindowId(e))}getWindowId(e){return e.vscodeWindowId}};Rk.INSTANCE=new Rk;var aN=Rk;function Ote(t,e,n){typeof e=="string"&&(e=t.matchMedia(e)),e.addEventListener("change",n)}aN.INSTANCE.onDidChangeZoomLevel;function Mte(t){return aN.INSTANCE.getZoomFactor(t)}aN.INSTANCE.onDidChangeFullscreen;var Ch=typeof navigator=="object"?navigator.userAgent:"",Ok=Ch.indexOf("Firefox")>=0,Dte=Ch.indexOf("AppleWebKit")>=0,oN=Ch.indexOf("Chrome")>=0,Bte=!oN&&Ch.indexOf("Safari")>=0;Ch.indexOf("Electron/")>=0;Ch.indexOf("Android")>=0;var Vx=!1;if(typeof xa.matchMedia=="function"){let t=xa.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),e=xa.matchMedia("(display-mode: fullscreen)");Vx=t.matches,Ote(xa,t,({matches:n})=>{Vx&&e.matches||(Vx=n)})}var ku="en",Mk=!1,Dk=!1,x0=!1,GL=!1,Fg,w0=ku,NR=ku,Lte,ga,Ll=globalThis,br;typeof Ll.vscode<"u"&&typeof Ll.vscode.process<"u"?br=Ll.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(br=process);var Ite=typeof br?.versions?.electron=="string",Pte=Ite&&br?.type==="renderer";if(typeof br=="object"){Mk=br.platform==="win32",Dk=br.platform==="darwin",x0=br.platform==="linux",x0&&br.env.SNAP&&br.env.SNAP_REVISION,br.env.CI||br.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Fg=ku,w0=ku;let t=br.env.VSCODE_NLS_CONFIG;if(t)try{let e=JSON.parse(t);Fg=e.userLocale,NR=e.osLocale,w0=e.resolvedLanguage||ku,Lte=e.languagePack?.translationsConfigFile}catch{}GL=!0}else typeof navigator=="object"&&!Pte?(ga=navigator.userAgent,Mk=ga.indexOf("Windows")>=0,Dk=ga.indexOf("Macintosh")>=0,(ga.indexOf("Macintosh")>=0||ga.indexOf("iPad")>=0||ga.indexOf("iPhone")>=0)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0,x0=ga.indexOf("Linux")>=0,ga?.indexOf("Mobi")>=0,w0=globalThis._VSCODE_NLS_LANGUAGE||ku,Fg=navigator.language.toLowerCase(),NR=Fg):console.error("Unable to resolve platform.");var YL=Mk,Ii=Dk,$te=x0,ER=GL,Ui=ga,ho=w0,zte;(t=>{function e(){return ho}t.value=e;function n(){return ho.length===2?ho==="en":ho.length>=3?ho[0]==="e"&&ho[1]==="n"&&ho[2]==="-":!1}t.isDefaultVariant=n;function s(){return ho==="en"}t.isDefault=s})(zte||={});var Ute=typeof Ll.postMessage=="function"&&!Ll.importScripts;(()=>{if(Ute){let t=[];Ll.addEventListener("message",n=>{if(n.data&&n.data.vscodeScheduleAsyncWork)for(let s=0,r=t.length;s<r;s++){let i=t[s];if(i.id===n.data.vscodeScheduleAsyncWork){t.splice(s,1),i.callback();return}}});let e=0;return n=>{let s=++e;t.push({id:s,callback:n}),Ll.postMessage({vscodeScheduleAsyncWork:s},"*")}}return t=>setTimeout(t)})();var Hte=!!(Ui&&Ui.indexOf("Chrome")>=0);Ui&&Ui.indexOf("Firefox")>=0;!Hte&&Ui&&Ui.indexOf("Safari")>=0;Ui&&Ui.indexOf("Edg/")>=0;Ui&&Ui.indexOf("Android")>=0;var ru=typeof navigator=="object"?navigator:{};ER||document.queryCommandSupported&&document.queryCommandSupported("copy")||ru&&ru.clipboard&&ru.clipboard.writeText,ER||ru&&ru.clipboard&&ru.clipboard.readText;var lN=class{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(t,e){this._keyCodeToStr[t]=e,this._strToKeyCode[e.toLowerCase()]=t}keyCodeToStr(t){return this._keyCodeToStr[t]}strToKeyCode(t){return this._strToKeyCode[t.toLowerCase()]||0}},qx=new lN,AR=new lN,jR=new lN,Fte=new Array(230),ZL;(t=>{function e(c){return qx.keyCodeToStr(c)}t.toString=e;function n(c){return qx.strToKeyCode(c)}t.fromString=n;function s(c){return AR.keyCodeToStr(c)}t.toUserSettingsUS=s;function r(c){return jR.keyCodeToStr(c)}t.toUserSettingsGeneral=r;function i(c){return AR.strToKeyCode(c)||jR.strToKeyCode(c)}t.fromUserSettings=i;function o(c){if(c>=98&&c<=113)return null;switch(c){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return qx.keyCodeToStr(c)}t.toElectronAccelerator=o})(ZL||={});var Vte=class XL{constructor(e,n,s,r,i){this.ctrlKey=e,this.shiftKey=n,this.altKey=s,this.metaKey=r,this.keyCode=i}equals(e){return e instanceof XL&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}getHashCode(){let e=this.ctrlKey?"1":"0",n=this.shiftKey?"1":"0",s=this.altKey?"1":"0",r=this.metaKey?"1":"0";return`K${e}${n}${s}${r}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new qte([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},qte=class{constructor(t){if(t.length===0)throw gte("chords");this.chords=t}getHashCode(){let t="";for(let e=0,n=this.chords.length;e<n;e++)e!==0&&(t+=";"),t+=this.chords[e].getHashCode();return t}equals(t){if(t===null||this.chords.length!==t.chords.length)return!1;for(let e=0;e<this.chords.length;e++)if(!this.chords[e].equals(t.chords[e]))return!1;return!0}};function Kte(t){if(t.charCode){let n=String.fromCharCode(t.charCode).toUpperCase();return ZL.fromString(n)}let e=t.keyCode;if(e===3)return 7;if(Ok)switch(e){case 59:return 85;case 60:if($te)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(Ii)return 57;break}else if(Dte&&(Ii&&e===93||!Ii&&e===92))return 57;return Fte[e]||0}var Wte=Ii?256:2048,Gte=512,Yte=1024,Zte=Ii?2048:256,TR=class{constructor(t){this._standardKeyboardEventBrand=!0;let e=t;this.browserEvent=e,this.target=e.target,this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,this.altGraphKey=e.getModifierState?.("AltGraph"),this.keyCode=Kte(e),this.code=e.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(t){return this._asKeybinding===t}_computeKeybinding(){let t=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(t=this.keyCode);let e=0;return this.ctrlKey&&(e|=Wte),this.altKey&&(e|=Gte),this.shiftKey&&(e|=Yte),this.metaKey&&(e|=Zte),e|=t,e}_computeKeyCodeChord(){let t=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(t=this.keyCode),new Vte(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,t)}},RR=new WeakMap;function Xte(t){if(!t.parent||t.parent===t)return null;try{let e=t.location,n=t.parent.location;if(e.origin!=="null"&&n.origin!=="null"&&e.origin!==n.origin)return null}catch{return null}return t.parent}var Jte=class{static getSameOriginWindowChain(t){let e=RR.get(t);if(!e){e=[],RR.set(t,e);let n=t,s;do s=Xte(n),s?e.push({window:new WeakRef(n),iframeElement:n.frameElement||null}):e.push({window:new WeakRef(n),iframeElement:null}),n=s;while(n)}return e.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(t,e){if(!e||t===e)return{top:0,left:0};let n=0,s=0,r=this.getSameOriginWindowChain(t);for(let i of r){let o=i.window.deref();if(n+=o?.scrollY??0,s+=o?.scrollX??0,o===e||!i.iframeElement)break;let c=i.iframeElement.getBoundingClientRect();n+=c.top,s+=c.left}return{top:n,left:s}}},Vg=class{constructor(t,e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=e.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);let n=Jte.getPositionOfChildWindowRelativeToAncestorWindow(t,e.view);this.posx-=n.left,this.posy-=n.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}},OR=class{constructor(t,e=0,n=0){this.browserEvent=t||null,this.target=t?t.target||t.targetNode||t.srcElement:null,this.deltaY=n,this.deltaX=e;let s=!1;if(oN){let r=navigator.userAgent.match(/Chrome\/(\d+)/);s=(r?parseInt(r[1]):123)<=122}if(t){let r=t,i=t,o=t.view?.devicePixelRatio||1;if(typeof r.wheelDeltaY<"u")s?this.deltaY=r.wheelDeltaY/(120*o):this.deltaY=r.wheelDeltaY/120;else if(typeof i.VERTICAL_AXIS<"u"&&i.axis===i.VERTICAL_AXIS)this.deltaY=-i.detail/3;else if(t.type==="wheel"){let c=t;c.deltaMode===c.DOM_DELTA_LINE?Ok&&!Ii?this.deltaY=-t.deltaY/3:this.deltaY=-t.deltaY:this.deltaY=-t.deltaY/40}if(typeof r.wheelDeltaX<"u")Bte&&YL?this.deltaX=-(r.wheelDeltaX/120):s?this.deltaX=r.wheelDeltaX/(120*o):this.deltaX=r.wheelDeltaX/120;else if(typeof i.HORIZONTAL_AXIS<"u"&&i.axis===i.HORIZONTAL_AXIS)this.deltaX=-t.detail/3;else if(t.type==="wheel"){let c=t;c.deltaMode===c.DOM_DELTA_LINE?Ok&&!Ii?this.deltaX=-t.deltaX/3:this.deltaX=-t.deltaX:this.deltaX=-t.deltaX/40}this.deltaY===0&&this.deltaX===0&&t.wheelDelta&&(s?this.deltaY=t.wheelDelta/(120*o):this.deltaY=t.wheelDelta/120)}}preventDefault(){this.browserEvent?.preventDefault()}stopPropagation(){this.browserEvent?.stopPropagation()}},JL=Object.freeze(function(t,e){let n=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(n)}}}),Qte;(t=>{function e(n){return n===t.None||n===t.Cancelled||n instanceof ene?!0:!n||typeof n!="object"?!1:typeof n.isCancellationRequested=="boolean"&&typeof n.onCancellationRequested=="function"}t.isCancellationToken=e,t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ds.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:JL})})(Qte||={});var ene=class{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?JL:(this._emitter||(this._emitter=new Te),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},cN=class{constructor(t,e){this._isDisposed=!1,this._token=-1,typeof t=="function"&&typeof e=="number"&&this.setIfNotSet(t,e)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(t,e){if(this._isDisposed)throw new Nk("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,t()},e)}setIfNotSet(t,e){if(this._isDisposed)throw new Nk("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,t()},e))}},tne=class{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(t,e,n=globalThis){if(this.isDisposed)throw new Nk("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();let s=n.setInterval(()=>{t()},e);this.disposable=hn(()=>{n.clearInterval(s),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}},nne;(t=>{async function e(s){let r,i=await Promise.all(s.map(o=>o.then(c=>c,c=>{r||(r=c)})));if(typeof r<"u")throw r;return i}t.settled=e;function n(s){return new Promise(async(r,i)=>{try{await s(r,i)}catch(o){i(o)}})}t.withAsyncBody=n})(nne||={});var MR=class Hr{static fromArray(e){return new Hr(n=>{n.emitMany(e)})}static fromPromise(e){return new Hr(async n=>{n.emitMany(await e)})}static fromPromises(e){return new Hr(async n=>{await Promise.all(e.map(async s=>n.emitOne(await s)))})}static merge(e){return new Hr(async n=>{await Promise.all(e.map(async s=>{for await(let r of s)n.emitOne(r)}))})}constructor(e,n){this._state=0,this._results=[],this._error=null,this._onReturn=n,this._onStateChanged=new Te,queueMicrotask(async()=>{let s={emitOne:r=>this.emitOne(r),emitMany:r=>this.emitMany(r),reject:r=>this.reject(r)};try{await Promise.resolve(e(s)),this.resolve()}catch(r){this.reject(r)}finally{s.emitOne=void 0,s.emitMany=void 0,s.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await ds.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>(this._onReturn?.(),{done:!0,value:void 0})}}static map(e,n){return new Hr(async s=>{for await(let r of e)s.emitOne(n(r))})}map(e){return Hr.map(this,e)}static filter(e,n){return new Hr(async s=>{for await(let r of e)n(r)&&s.emitOne(r)})}filter(e){return Hr.filter(this,e)}static coalesce(e){return Hr.filter(e,n=>!!n)}coalesce(){return Hr.coalesce(this)}static async toPromise(e){let n=[];for await(let s of e)n.push(s);return n}toPromise(){return Hr.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};MR.EMPTY=MR.fromArray([]);var{getWindow:Mi,getWindowId:sne,onDidRegisterWindow:rne}=(function(){let t=new Map,e={window:xa,disposables:new Bo};t.set(xa.vscodeWindowId,e);let n=new Te,s=new Te,r=new Te;function i(o,c){return(typeof o=="number"?t.get(o):void 0)??(c?e:void 0)}return{onDidRegisterWindow:n.event,onWillUnregisterWindow:r.event,onDidUnregisterWindow:s.event,registerWindow(o){if(t.has(o.vscodeWindowId))return kt.None;let c=new Bo,u={window:o,disposables:c.add(new Bo)};return t.set(o.vscodeWindowId,u),c.add(hn(()=>{t.delete(o.vscodeWindowId),s.fire(o)})),c.add(ht(o,Jn.BEFORE_UNLOAD,()=>{r.fire(o)})),n.fire(u),c},getWindows(){return t.values()},getWindowsCount(){return t.size},getWindowId(o){return o.vscodeWindowId},hasWindow(o){return t.has(o)},getWindowById:i,getWindow(o){let c=o;if(c?.ownerDocument?.defaultView)return c.ownerDocument.defaultView.window;let u=o;return u?.view?u.view.window:xa},getDocument(o){return Mi(o).document}}})(),ine=class{constructor(t,e,n,s){this._node=t,this._type=e,this._handler=n,this._options=s||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}};function ht(t,e,n,s){return new ine(t,e,n,s)}var DR=function(t,e,n,s){return ht(t,e,n,s)},uN,ane=class extends tne{constructor(t){super(),this.defaultTarget=t&&Mi(t)}cancelAndSet(t,e,n){return super.cancelAndSet(t,e,n??this.defaultTarget)}},BR=class{constructor(t,e=0){this._runner=t,this.priority=e,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(t){_0(t)}}static sort(t,e){return e.priority-t.priority}};(function(){let t=new Map,e=new Map,n=new Map,s=new Map,r=i=>{n.set(i,!1);let o=t.get(i)??[];for(e.set(i,o),t.set(i,[]),s.set(i,!0);o.length>0;)o.sort(BR.sort),o.shift().execute();s.set(i,!1)};uN=(i,o,c=0)=>{let u=sne(i),h=new BR(o,c),m=t.get(u);return m||(m=[],t.set(u,m)),m.push(h),n.get(u)||(n.set(u,!0),i.requestAnimationFrame(()=>r(u))),h}})();function one(t){let e=t.getBoundingClientRect(),n=Mi(t);return{left:e.left+n.scrollX,top:e.top+n.scrollY,width:e.width,height:e.height}}var Jn={CLICK:"click",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",KEY_DOWN:"keydown",KEY_UP:"keyup",BEFORE_UNLOAD:"beforeunload",CHANGE:"change",FOCUS:"focus",BLUR:"blur",INPUT:"input"},lne=class{constructor(t){this.domNode=t,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingTop="",this._paddingLeft="",this._paddingBottom="",this._paddingRight="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(t){let e=Zs(t);this._maxWidth!==e&&(this._maxWidth=e,this.domNode.style.maxWidth=this._maxWidth)}setWidth(t){let e=Zs(t);this._width!==e&&(this._width=e,this.domNode.style.width=this._width)}setHeight(t){let e=Zs(t);this._height!==e&&(this._height=e,this.domNode.style.height=this._height)}setTop(t){let e=Zs(t);this._top!==e&&(this._top=e,this.domNode.style.top=this._top)}setLeft(t){let e=Zs(t);this._left!==e&&(this._left=e,this.domNode.style.left=this._left)}setBottom(t){let e=Zs(t);this._bottom!==e&&(this._bottom=e,this.domNode.style.bottom=this._bottom)}setRight(t){let e=Zs(t);this._right!==e&&(this._right=e,this.domNode.style.right=this._right)}setPaddingTop(t){let e=Zs(t);this._paddingTop!==e&&(this._paddingTop=e,this.domNode.style.paddingTop=this._paddingTop)}setPaddingLeft(t){let e=Zs(t);this._paddingLeft!==e&&(this._paddingLeft=e,this.domNode.style.paddingLeft=this._paddingLeft)}setPaddingBottom(t){let e=Zs(t);this._paddingBottom!==e&&(this._paddingBottom=e,this.domNode.style.paddingBottom=this._paddingBottom)}setPaddingRight(t){let e=Zs(t);this._paddingRight!==e&&(this._paddingRight=e,this.domNode.style.paddingRight=this._paddingRight)}setFontFamily(t){this._fontFamily!==t&&(this._fontFamily=t,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(t){let e=Zs(t);this._fontSize!==e&&(this._fontSize=e,this.domNode.style.fontSize=this._fontSize)}setFontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(t){this._fontFeatureSettings!==t&&(this._fontFeatureSettings=t,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(t){this._fontVariationSettings!==t&&(this._fontVariationSettings=t,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(t){this._textDecoration!==t&&(this._textDecoration=t,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(t){let e=Zs(t);this._lineHeight!==e&&(this._lineHeight=e,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(t){let e=Zs(t);this._letterSpacing!==e&&(this._letterSpacing=e,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(t){this._className!==t&&(this._className=t,this.domNode.className=this._className)}toggleClassName(t,e){this.domNode.classList.toggle(t,e),this._className=this.domNode.className}setDisplay(t){this._display!==t&&(this._display=t,this.domNode.style.display=this._display)}setPosition(t){this._position!==t&&(this._position=t,this.domNode.style.position=this._position)}setVisibility(t){this._visibility!==t&&(this._visibility=t,this.domNode.style.visibility=this._visibility)}setColor(t){this._color!==t&&(this._color=t,this.domNode.style.color=this._color)}setBackgroundColor(t){this._backgroundColor!==t&&(this._backgroundColor=t,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(t){this._layerHint!==t&&(this._layerHint=t,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(t){this._boxShadow!==t&&(this._boxShadow=t,this.domNode.style.boxShadow=t)}setContain(t){this._contain!==t&&(this._contain=t,this.domNode.style.contain=this._contain)}setAttribute(t,e){this.domNode.setAttribute(t,e)}removeAttribute(t){this.domNode.removeAttribute(t)}appendChild(t){this.domNode.appendChild(t.domNode)}removeChild(t){this.domNode.removeChild(t.domNode)}};function Zs(t){return typeof t=="number"?`${t}px`:t}function Hf(t){return new lne(t)}var QL=class{constructor(){this._hooks=new Bo,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(t,e){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let n=this._onStopCallback;this._onStopCallback=null,t&&n&&n(e)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(t,e,n,s,r){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=s,this._onStopCallback=r;let i=t;try{t.setPointerCapture(e),this._hooks.add(hn(()=>{try{t.releasePointerCapture(e)}catch{}}))}catch{i=Mi(t)}this._hooks.add(ht(i,Jn.POINTER_MOVE,o=>{if(o.buttons!==n){this.stopMonitoring(!0);return}o.preventDefault(),this._pointerMoveCallback(o)})),this._hooks.add(ht(i,Jn.POINTER_UP,o=>this.stopMonitoring(!0)))}};function cne(t,e,n){let s=null,r=null;if(typeof n.value=="function"?(s="value",r=n.value,r.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof n.get=="function"&&(s="get",r=n.get),!r)throw new Error("not supported");let i=`$memoize$${e}`;n[s]=function(...o){return this.hasOwnProperty(i)||Object.defineProperty(this,i,{configurable:!1,enumerable:!1,writable:!1,value:r.apply(this,o)}),this[i]}}var ji;(t=>(t.Tap="-xterm-gesturetap",t.Change="-xterm-gesturechange",t.Start="-xterm-gesturestart",t.End="-xterm-gesturesend",t.Contextmenu="-xterm-gesturecontextmenu"))(ji||={});var pf=class _s extends kt{constructor(){super(),this.dispatched=!1,this.targets=new CR,this.ignoreTargets=new CR,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(ds.runAndSubscribe(rne,({window:e,disposables:n})=>{n.add(ht(e.document,"touchstart",s=>this.onTouchStart(s),{passive:!1})),n.add(ht(e.document,"touchend",s=>this.onTouchEnd(e,s))),n.add(ht(e.document,"touchmove",s=>this.onTouchMove(s),{passive:!1}))},{window:xa,disposables:this._store}))}static addTarget(e){if(!_s.isTouchDevice())return kt.None;_s.INSTANCE||(_s.INSTANCE=new _s);let n=_s.INSTANCE.targets.push(e);return hn(n)}static ignoreTarget(e){if(!_s.isTouchDevice())return kt.None;_s.INSTANCE||(_s.INSTANCE=new _s);let n=_s.INSTANCE.ignoreTargets.push(e);return hn(n)}static isTouchDevice(){return"ontouchstart"in xa||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){let n=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let s=0,r=e.targetTouches.length;s<r;s++){let i=e.targetTouches.item(s);this.activeTouches[i.identifier]={id:i.identifier,initialTarget:i.target,initialTimeStamp:n,initialPageX:i.pageX,initialPageY:i.pageY,rollingTimestamps:[n],rollingPageX:[i.pageX],rollingPageY:[i.pageY]};let o=this.newGestureEvent(ji.Start,i.target);o.pageX=i.pageX,o.pageY=i.pageY,this.dispatchEvent(o)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e,n){let s=Date.now(),r=Object.keys(this.activeTouches).length;for(let i=0,o=n.changedTouches.length;i<o;i++){let c=n.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(c.identifier))){console.warn("move of an UNKNOWN touch",c);continue}let u=this.activeTouches[c.identifier],h=Date.now()-u.initialTimeStamp;if(h<_s.HOLD_DELAY&&Math.abs(u.initialPageX-fr(u.rollingPageX))<30&&Math.abs(u.initialPageY-fr(u.rollingPageY))<30){let m=this.newGestureEvent(ji.Tap,u.initialTarget);m.pageX=fr(u.rollingPageX),m.pageY=fr(u.rollingPageY),this.dispatchEvent(m)}else if(h>=_s.HOLD_DELAY&&Math.abs(u.initialPageX-fr(u.rollingPageX))<30&&Math.abs(u.initialPageY-fr(u.rollingPageY))<30){let m=this.newGestureEvent(ji.Contextmenu,u.initialTarget);m.pageX=fr(u.rollingPageX),m.pageY=fr(u.rollingPageY),this.dispatchEvent(m)}else if(r===1){let m=fr(u.rollingPageX),p=fr(u.rollingPageY),y=fr(u.rollingTimestamps)-u.rollingTimestamps[0],v=m-u.rollingPageX[0],x=p-u.rollingPageY[0],_=[...this.targets].filter(S=>u.initialTarget instanceof Node&&S.contains(u.initialTarget));this.inertia(e,_,s,Math.abs(v)/y,v>0?1:-1,m,Math.abs(x)/y,x>0?1:-1,p)}this.dispatchEvent(this.newGestureEvent(ji.End,u.initialTarget)),delete this.activeTouches[c.identifier]}this.dispatched&&(n.preventDefault(),n.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,n){let s=document.createEvent("CustomEvent");return s.initEvent(e,!1,!0),s.initialTarget=n,s.tapCount=0,s}dispatchEvent(e){if(e.type===ji.Tap){let n=new Date().getTime(),s=0;n-this._lastSetTapCountTime>_s.CLEAR_TAP_COUNT_TIME?s=1:s=2,this._lastSetTapCountTime=n,e.tapCount=s}else(e.type===ji.Change||e.type===ji.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(let s of this.ignoreTargets)if(s.contains(e.initialTarget))return;let n=[];for(let s of this.targets)if(s.contains(e.initialTarget)){let r=0,i=e.initialTarget;for(;i&&i!==s;)r++,i=i.parentElement;n.push([r,s])}n.sort((s,r)=>s[0]-r[0]);for(let[s,r]of n)r.dispatchEvent(e),this.dispatched=!0}}inertia(e,n,s,r,i,o,c,u,h){this.handle=uN(e,()=>{let m=Date.now(),p=m-s,y=0,v=0,x=!0;r+=_s.SCROLL_FRICTION*p,c+=_s.SCROLL_FRICTION*p,r>0&&(x=!1,y=i*r*p),c>0&&(x=!1,v=u*c*p);let _=this.newGestureEvent(ji.Change);_.translationX=y,_.translationY=v,n.forEach(S=>S.dispatchEvent(_)),x||this.inertia(e,n,m,r,i,o+y,c,u,h+v)})}onTouchMove(e){let n=Date.now();for(let s=0,r=e.changedTouches.length;s<r;s++){let i=e.changedTouches.item(s);if(!this.activeTouches.hasOwnProperty(String(i.identifier))){console.warn("end of an UNKNOWN touch",i);continue}let o=this.activeTouches[i.identifier],c=this.newGestureEvent(ji.Change,o.initialTarget);c.translationX=i.pageX-fr(o.rollingPageX),c.translationY=i.pageY-fr(o.rollingPageY),c.pageX=i.pageX,c.pageY=i.pageY,this.dispatchEvent(c),o.rollingPageX.length>3&&(o.rollingPageX.shift(),o.rollingPageY.shift(),o.rollingTimestamps.shift()),o.rollingPageX.push(i.pageX),o.rollingPageY.push(i.pageY),o.rollingTimestamps.push(n)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}};pf.SCROLL_FRICTION=-.005,pf.HOLD_DELAY=700,pf.CLEAR_TAP_COUNT_TIME=400,xn([cne],pf,"isTouchDevice",1);var une=pf,hN=class extends kt{onclick(t,e){this._register(ht(t,Jn.CLICK,n=>e(new Vg(Mi(t),n))))}onmousedown(t,e){this._register(ht(t,Jn.MOUSE_DOWN,n=>e(new Vg(Mi(t),n))))}onmouseover(t,e){this._register(ht(t,Jn.MOUSE_OVER,n=>e(new Vg(Mi(t),n))))}onmouseleave(t,e){this._register(ht(t,Jn.MOUSE_LEAVE,n=>e(new Vg(Mi(t),n))))}onkeydown(t,e){this._register(ht(t,Jn.KEY_DOWN,n=>e(new TR(n))))}onkeyup(t,e){this._register(ht(t,Jn.KEY_UP,n=>e(new TR(n))))}oninput(t,e){this._register(ht(t,Jn.INPUT,e))}onblur(t,e){this._register(ht(t,Jn.BLUR,e))}onfocus(t,e){this._register(ht(t,Jn.FOCUS,e))}onchange(t,e){this._register(ht(t,Jn.CHANGE,e))}ignoreGesture(t){return une.ignoreTarget(t)}},LR=11,hne=class extends hN{constructor(t){super(),this._onActivate=t.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=t.bgWidth+"px",this.bgDomNode.style.height=t.bgHeight+"px",typeof t.top<"u"&&(this.bgDomNode.style.top="0px"),typeof t.left<"u"&&(this.bgDomNode.style.left="0px"),typeof t.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof t.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=t.className,this.domNode.style.position="absolute",this.domNode.style.width=LR+"px",this.domNode.style.height=LR+"px",typeof t.top<"u"&&(this.domNode.style.top=t.top+"px"),typeof t.left<"u"&&(this.domNode.style.left=t.left+"px"),typeof t.bottom<"u"&&(this.domNode.style.bottom=t.bottom+"px"),typeof t.right<"u"&&(this.domNode.style.right=t.right+"px"),this._pointerMoveMonitor=this._register(new QL),this._register(DR(this.bgDomNode,Jn.POINTER_DOWN,e=>this._arrowPointerDown(e))),this._register(DR(this.domNode,Jn.POINTER_DOWN,e=>this._arrowPointerDown(e))),this._pointerdownRepeatTimer=this._register(new ane),this._pointerdownScheduleRepeatTimer=this._register(new cN)}_arrowPointerDown(t){if(!t.target||!(t.target instanceof Element))return;let e=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,Mi(t))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(e,200),this._pointerMoveMonitor.startMonitoring(t.target,t.pointerId,t.buttons,n=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),t.preventDefault()}},dne=class Bk{constructor(e,n,s,r,i,o,c){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(n=n|0,s=s|0,r=r|0,i=i|0,o=o|0,c=c|0),this.rawScrollLeft=r,this.rawScrollTop=c,n<0&&(n=0),r+n>s&&(r=s-n),r<0&&(r=0),i<0&&(i=0),c+i>o&&(c=o-i),c<0&&(c=0),this.width=n,this.scrollWidth=s,this.scrollLeft=r,this.height=i,this.scrollHeight=o,this.scrollTop=c}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,n){return new Bk(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,n?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,n?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new Bk(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,n){let s=this.width!==e.width,r=this.scrollWidth!==e.scrollWidth,i=this.scrollLeft!==e.scrollLeft,o=this.height!==e.height,c=this.scrollHeight!==e.scrollHeight,u=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:n,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:s,scrollWidthChanged:r,scrollLeftChanged:i,heightChanged:o,scrollHeightChanged:c,scrollTopChanged:u}}},fne=class extends kt{constructor(t){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new Te),this.onScroll=this._onScroll.event,this._smoothScrollDuration=t.smoothScrollDuration,this._scheduleAtNextAnimationFrame=t.scheduleAtNextAnimationFrame,this._state=new dne(t.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(t){this._smoothScrollDuration=t}validateScrollPosition(t){return this._state.withScrollPosition(t)}getScrollDimensions(){return this._state}setScrollDimensions(t,e){let n=this._state.withScrollDimensions(t,e);this._setState(n,!!this._smoothScrolling),this._smoothScrolling?.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(t){let e=this._state.withScrollPosition(t);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(e,!1)}setScrollPositionSmooth(t,e){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(t);if(this._smoothScrolling){t={scrollLeft:typeof t.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:t.scrollLeft,scrollTop:typeof t.scrollTop>"u"?this._smoothScrolling.to.scrollTop:t.scrollTop};let n=this._state.withScrollPosition(t);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let s;e?s=new PR(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):s=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=s}else{let n=this._state.withScrollPosition(t);this._smoothScrolling=PR.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;let t=this._smoothScrolling.tick(),e=this._state.withScrollPosition(t);if(this._setState(e,!0),!!this._smoothScrolling){if(t.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(t,e){let n=this._state;n.equals(t)||(this._state=t,this._onScroll.fire(this._state.createScrollEvent(n,e)))}},IR=class{constructor(t,e,n){this.scrollLeft=t,this.scrollTop=e,this.isDone=n}};function Kx(t,e){let n=e-t;return function(s){return t+n*gne(s)}}function pne(t,e,n){return function(s){return s<n?t(s/n):e((s-n)/(1-n))}}var PR=class Lk{constructor(e,n,s,r){this.from=e,this.to=n,this.duration=r,this.startTime=s,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,n,s){if(Math.abs(e-n)>2.5*s){let r,i;return e<n?(r=e+.75*s,i=n-.75*s):(r=e-.75*s,i=n+.75*s),pne(Kx(e,r),Kx(i,n),.33)}return Kx(e,n)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){let n=(e-this.startTime)/this.duration;if(n<1){let s=this.scrollLeft(n),r=this.scrollTop(n);return new IR(s,r,!1)}return new IR(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,n,s){return Lk.start(e,n,s)}static start(e,n,s){s=s+10;let r=Date.now()-10;return new Lk(e,n,r,s)}};function mne(t){return Math.pow(t,3)}function gne(t){return 1-mne(1-t)}var yne=class extends kt{constructor(t,e,n){super(),this._visibility=t,this._visibleClassName=e,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new cN)}setVisibility(t){this._visibility!==t&&(this._visibility=t,this._updateShouldBeVisible())}setShouldBeVisible(t){this._rawShouldBeVisible=t,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){let t=this._applyVisibilitySetting();this._shouldBeVisible!==t&&(this._shouldBeVisible=t,this.ensureVisibility())}setIsNeeded(t){this._isNeeded!==t&&(this._isNeeded=t,this.ensureVisibility())}setDomNode(t){this._domNode=t,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode?.setClassName(this._visibleClassName)},0))}_hide(t){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode?.setClassName(this._invisibleClassName+(t?" fade":"")))}},vne=140,eI=class extends hN{constructor(t){super(),this._lazyRender=t.lazyRender,this._host=t.host,this._scrollable=t.scrollable,this._scrollByPage=t.scrollByPage,this._scrollbarState=t.scrollbarState,this._visibilityController=this._register(new yne(t.visibility,"visible scrollbar "+t.extraScrollbarClassName,"invisible scrollbar "+t.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new QL),this._shouldRender=!0,this.domNode=Hf(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(ht(this.domNode.domNode,Jn.POINTER_DOWN,e=>this._domNodePointerDown(e)))}_createArrow(t){let e=this._register(new hne(t));this.domNode.domNode.appendChild(e.bgDomNode),this.domNode.domNode.appendChild(e.domNode)}_createSlider(t,e,n,s){this.slider=Hf(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(t),this.slider.setLeft(e),typeof n=="number"&&this.slider.setWidth(n),typeof s=="number"&&this.slider.setHeight(s),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(ht(this.slider.domNode,Jn.POINTER_DOWN,r=>{r.button===0&&(r.preventDefault(),this._sliderPointerDown(r))})),this.onclick(this.slider.domNode,r=>{r.leftButton&&r.stopPropagation()})}_onElementSize(t){return this._scrollbarState.setVisibleSize(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(t){return this._scrollbarState.setScrollSize(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(t){return this._scrollbarState.setScrollPosition(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(t){t.target===this.domNode.domNode&&this._onPointerDown(t)}delegatePointerDown(t){let e=this.domNode.domNode.getClientRects()[0].top,n=e+this._scrollbarState.getSliderPosition(),s=e+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),r=this._sliderPointerPosition(t);n<=r&&r<=s?t.button===0&&(t.preventDefault(),this._sliderPointerDown(t)):this._onPointerDown(t)}_onPointerDown(t){let e,n;if(t.target===this.domNode.domNode&&typeof t.offsetX=="number"&&typeof t.offsetY=="number")e=t.offsetX,n=t.offsetY;else{let r=one(this.domNode.domNode);e=t.pageX-r.left,n=t.pageY-r.top}let s=this._pointerDownRelativePosition(e,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(s):this._scrollbarState.getDesiredScrollPositionFromOffset(s)),t.button===0&&(t.preventDefault(),this._sliderPointerDown(t))}_sliderPointerDown(t){if(!t.target||!(t.target instanceof Element))return;let e=this._sliderPointerPosition(t),n=this._sliderOrthogonalPointerPosition(t),s=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(t.target,t.pointerId,t.buttons,r=>{let i=this._sliderOrthogonalPointerPosition(r),o=Math.abs(i-n);if(YL&&o>vne){this._setDesiredScrollPositionNow(s.getScrollPosition());return}let c=this._sliderPointerPosition(r)-e;this._setDesiredScrollPositionNow(s.getDesiredScrollPositionFromDelta(c))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(t){let e={};this.writeScrollPosition(e,t),this._scrollable.setScrollPositionNow(e)}updateScrollbarSize(t){this._updateScrollbarSize(t),this._scrollbarState.setScrollbarSize(t),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}},tI=class Ik{constructor(e,n,s,r,i,o){this._scrollbarSize=Math.round(n),this._oppositeScrollbarSize=Math.round(s),this._arrowSize=Math.round(e),this._visibleSize=r,this._scrollSize=i,this._scrollPosition=o,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new Ik(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){let n=Math.round(e);return this._visibleSize!==n?(this._visibleSize=n,this._refreshComputedValues(),!0):!1}setScrollSize(e){let n=Math.round(e);return this._scrollSize!==n?(this._scrollSize=n,this._refreshComputedValues(),!0):!1}setScrollPosition(e){let n=Math.round(e);return this._scrollPosition!==n?(this._scrollPosition=n,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,n,s,r,i){let o=Math.max(0,s-e),c=Math.max(0,o-2*n),u=r>0&&r>s;if(!u)return{computedAvailableSize:Math.round(o),computedIsNeeded:u,computedSliderSize:Math.round(c),computedSliderRatio:0,computedSliderPosition:0};let h=Math.round(Math.max(20,Math.floor(s*c/r))),m=(c-h)/(r-s),p=i*m;return{computedAvailableSize:Math.round(o),computedIsNeeded:u,computedSliderSize:Math.round(h),computedSliderRatio:m,computedSliderPosition:Math.round(p)}}_refreshComputedValues(){let e=Ik._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;let n=e-this._arrowSize-this._computedSliderSize/2;return Math.round(n/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;let n=e-this._arrowSize,s=this._scrollPosition;return n<this._computedSliderPosition?s-=this._visibleSize:s+=this._visibleSize,s}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;let n=this._computedSliderPosition+e;return Math.round(n/this._computedSliderRatio)}},bne=class extends eI{constructor(t,e,n){let s=t.getScrollDimensions(),r=t.getCurrentScrollPosition();if(super({lazyRender:e.lazyRender,host:n,scrollbarState:new tI(e.horizontalHasArrows?e.arrowSize:0,e.horizontal===2?0:e.horizontalScrollbarSize,e.vertical===2?0:e.verticalScrollbarSize,s.width,s.scrollWidth,r.scrollLeft),visibility:e.horizontal,extraScrollbarClassName:"horizontal",scrollable:t,scrollByPage:e.scrollByPage}),e.horizontalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(Math.floor((e.horizontalScrollbarSize-e.horizontalSliderSize)/2),0,void 0,e.horizontalSliderSize)}_updateSlider(t,e){this.slider.setWidth(t),this.slider.setLeft(e)}_renderDomNode(t,e){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(t){return this._shouldRender=this._onElementScrollSize(t.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(t.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(t.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(t,e){return t}_sliderPointerPosition(t){return t.pageX}_sliderOrthogonalPointerPosition(t){return t.pageY}_updateScrollbarSize(t){this.slider.setHeight(t)}writeScrollPosition(t,e){t.scrollLeft=e}updateOptions(t){this.updateScrollbarSize(t.horizontal===2?0:t.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(t.vertical===2?0:t.verticalScrollbarSize),this._visibilityController.setVisibility(t.horizontal),this._scrollByPage=t.scrollByPage}},_ne=class extends eI{constructor(t,e,n){let s=t.getScrollDimensions(),r=t.getCurrentScrollPosition();if(super({lazyRender:e.lazyRender,host:n,scrollbarState:new tI(e.verticalHasArrows?e.arrowSize:0,e.vertical===2?0:e.verticalScrollbarSize,0,s.height,s.scrollHeight,r.scrollTop),visibility:e.vertical,extraScrollbarClassName:"vertical",scrollable:t,scrollByPage:e.scrollByPage}),e.verticalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(0,Math.floor((e.verticalScrollbarSize-e.verticalSliderSize)/2),e.verticalSliderSize,void 0)}_updateSlider(t,e){this.slider.setHeight(t),this.slider.setTop(e)}_renderDomNode(t,e){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(t){return this._shouldRender=this._onElementScrollSize(t.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(t.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(t.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(t,e){return e}_sliderPointerPosition(t){return t.pageY}_sliderOrthogonalPointerPosition(t){return t.pageX}_updateScrollbarSize(t){this.slider.setWidth(t)}writeScrollPosition(t,e){t.scrollTop=e}updateOptions(t){this.updateScrollbarSize(t.vertical===2?0:t.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(t.vertical),this._scrollByPage=t.scrollByPage}},xne=500,$R=50,wne=class{constructor(t,e,n){this.timestamp=t,this.deltaX=e,this.deltaY=n,this.score=0}},Pk=class{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,n=0,s=1,r=this._rear;do{let i=r===this._front?e:Math.pow(2,-s);if(e-=i,n+=this._memory[r].score*i,r===this._front)break;r=(this._capacity+r-1)%this._capacity,s++}while(!0);return n<=.5}acceptStandardWheelEvent(e){if(oN){let n=Mi(e.browserEvent),s=Mte(n);this.accept(Date.now(),e.deltaX*s,e.deltaY*s)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,n,s){let r=null,i=new wne(e,n,s);this._front===-1&&this._rear===-1?(this._memory[0]=i,this._front=0,this._rear=0):(r=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=i),i.score=this._computeScore(i,r)}_computeScore(e,n){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let s=.5;if((!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(s+=.25),n){let r=Math.abs(e.deltaX),i=Math.abs(e.deltaY),o=Math.abs(n.deltaX),c=Math.abs(n.deltaY),u=Math.max(Math.min(r,o),1),h=Math.max(Math.min(i,c),1),m=Math.max(r,o),p=Math.max(i,c);m%u===0&&p%h===0&&(s-=.5)}return Math.min(Math.max(s,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}};Pk.INSTANCE=new Pk;var Sne=Pk,kne=class extends hN{constructor(t,e,n){super(),this._onScroll=this._register(new Te),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new Te),this.onWillScroll=this._onWillScroll.event,this._options=Nne(e),this._scrollable=n,this._register(this._scrollable.onScroll(r=>{this._onWillScroll.fire(r),this._onDidScroll(r),this._onScroll.fire(r)}));let s={onMouseWheel:r=>this._onMouseWheel(r),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new _ne(this._scrollable,this._options,s)),this._horizontalScrollbar=this._register(new bne(this._scrollable,this._options,s)),this._domNode=document.createElement("div"),this._domNode.className="xterm-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.appendChild(t),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=Hf(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=Hf(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=Hf(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,r=>this._onMouseOver(r)),this.onmouseleave(this._listenOnDomNode,r=>this._onMouseLeave(r)),this._hideTimeout=this._register(new cN),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}get options(){return this._options}dispose(){this._mouseWheelToDispose=tc(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(t){this._verticalScrollbar.delegatePointerDown(t)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(t){this._scrollable.setScrollDimensions(t,!1)}updateClassName(t){this._options.className=t,Ii&&(this._options.className+=" mac"),this._domNode.className="xterm-scrollable-element "+this._options.className}updateOptions(t){typeof t.handleMouseWheel<"u"&&(this._options.handleMouseWheel=t.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof t.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=t.mouseWheelScrollSensitivity),typeof t.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=t.fastScrollSensitivity),typeof t.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=t.scrollPredominantAxis),typeof t.horizontal<"u"&&(this._options.horizontal=t.horizontal),typeof t.vertical<"u"&&(this._options.vertical=t.vertical),typeof t.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=t.horizontalScrollbarSize),typeof t.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=t.verticalScrollbarSize),typeof t.scrollByPage<"u"&&(this._options.scrollByPage=t.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}setRevealOnScroll(t){this._revealOnScroll=t}delegateScrollFromMouseWheelEvent(t){this._onMouseWheel(new OR(t))}_setListeningToMouseWheel(t){if(this._mouseWheelToDispose.length>0!==t&&(this._mouseWheelToDispose=tc(this._mouseWheelToDispose),t)){let e=n=>{this._onMouseWheel(new OR(n))};this._mouseWheelToDispose.push(ht(this._listenOnDomNode,Jn.MOUSE_WHEEL,e,{passive:!1}))}}_onMouseWheel(t){if(t.browserEvent?.defaultPrevented)return;let e=Sne.INSTANCE;e.acceptStandardWheelEvent(t);let n=!1;if(t.deltaY||t.deltaX){let r=t.deltaY*this._options.mouseWheelScrollSensitivity,i=t.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&i+r===0?i=r=0:Math.abs(r)>=Math.abs(i)?i=0:r=0),this._options.flipAxes&&([r,i]=[i,r]);let o=!Ii&&t.browserEvent&&t.browserEvent.shiftKey;(this._options.scrollYToX||o)&&!i&&(i=r,r=0),t.browserEvent&&t.browserEvent.altKey&&(i=i*this._options.fastScrollSensitivity,r=r*this._options.fastScrollSensitivity);let c=this._scrollable.getFutureScrollPosition(),u={};if(r){let h=$R*r,m=c.scrollTop-(h<0?Math.floor(h):Math.ceil(h));this._verticalScrollbar.writeScrollPosition(u,m)}if(i){let h=$R*i,m=c.scrollLeft-(h<0?Math.floor(h):Math.ceil(h));this._horizontalScrollbar.writeScrollPosition(u,m)}u=this._scrollable.validateScrollPosition(u),(c.scrollLeft!==u.scrollLeft||c.scrollTop!==u.scrollTop)&&(this._options.mouseWheelSmoothScroll&&e.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(u):this._scrollable.setScrollPositionNow(u),n=!0)}let s=n;!s&&this._options.alwaysConsumeMouseWheel&&(s=!0),!s&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(s=!0),s&&(t.preventDefault(),t.stopPropagation())}_onDidScroll(t){this._shouldRender=this._horizontalScrollbar.onDidScroll(t)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(t)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let t=this._scrollable.getCurrentScrollPosition(),e=t.scrollTop>0,n=t.scrollLeft>0,s=n?" left":"",r=e?" top":"",i=n||e?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${s}`),this._topShadowDomNode.setClassName(`shadow${r}`),this._topLeftShadowDomNode.setClassName(`shadow${i}${r}${s}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(t){this._mouseIsOver=!1,this._hide()}_onMouseOver(t){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),xne)}},Cne=class extends kne{constructor(t,e,n){super(t,e,n)}setScrollPosition(t){t.reuseAnimation?this._scrollable.setScrollPositionSmooth(t,t.reuseAnimation):this._scrollable.setScrollPositionNow(t)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}};function Nne(t){let e={lazyRender:typeof t.lazyRender<"u"?t.lazyRender:!1,className:typeof t.className<"u"?t.className:"",useShadows:typeof t.useShadows<"u"?t.useShadows:!0,handleMouseWheel:typeof t.handleMouseWheel<"u"?t.handleMouseWheel:!0,flipAxes:typeof t.flipAxes<"u"?t.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof t.consumeMouseWheelIfScrollbarIsNeeded<"u"?t.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof t.alwaysConsumeMouseWheel<"u"?t.alwaysConsumeMouseWheel:!1,scrollYToX:typeof t.scrollYToX<"u"?t.scrollYToX:!1,mouseWheelScrollSensitivity:typeof t.mouseWheelScrollSensitivity<"u"?t.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof t.fastScrollSensitivity<"u"?t.fastScrollSensitivity:5,scrollPredominantAxis:typeof t.scrollPredominantAxis<"u"?t.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof t.mouseWheelSmoothScroll<"u"?t.mouseWheelSmoothScroll:!0,arrowSize:typeof t.arrowSize<"u"?t.arrowSize:11,listenOnDomNode:typeof t.listenOnDomNode<"u"?t.listenOnDomNode:null,horizontal:typeof t.horizontal<"u"?t.horizontal:1,horizontalScrollbarSize:typeof t.horizontalScrollbarSize<"u"?t.horizontalScrollbarSize:10,horizontalSliderSize:typeof t.horizontalSliderSize<"u"?t.horizontalSliderSize:0,horizontalHasArrows:typeof t.horizontalHasArrows<"u"?t.horizontalHasArrows:!1,vertical:typeof t.vertical<"u"?t.vertical:1,verticalScrollbarSize:typeof t.verticalScrollbarSize<"u"?t.verticalScrollbarSize:10,verticalHasArrows:typeof t.verticalHasArrows<"u"?t.verticalHasArrows:!1,verticalSliderSize:typeof t.verticalSliderSize<"u"?t.verticalSliderSize:0,scrollByPage:typeof t.scrollByPage<"u"?t.scrollByPage:!1};return e.horizontalSliderSize=typeof t.horizontalSliderSize<"u"?t.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof t.verticalSliderSize<"u"?t.verticalSliderSize:e.verticalScrollbarSize,Ii&&(e.className+=" mac"),e}var $k=class extends kt{constructor(t,e,n,s,r,i,o,c){super(),this._bufferService=n,this._optionsService=o,this._renderService=c,this._onRequestScrollLines=this._register(new Te),this.onRequestScrollLines=this._onRequestScrollLines.event,this._isSyncing=!1,this._isHandlingScroll=!1,this._suppressOnScrollHandler=!1;let u=this._register(new fne({forceIntegerValues:!1,smoothScrollDuration:this._optionsService.rawOptions.smoothScrollDuration,scheduleAtNextAnimationFrame:h=>uN(s.window,h)}));this._register(this._optionsService.onSpecificOptionChange("smoothScrollDuration",()=>{u.setSmoothScrollDuration(this._optionsService.rawOptions.smoothScrollDuration)})),this._scrollableElement=this._register(new Cne(e,{vertical:1,horizontal:2,useShadows:!1,mouseWheelSmoothScroll:!0,...this._getChangeOptions()},u)),this._register(this._optionsService.onMultipleOptionChange(["scrollSensitivity","fastScrollSensitivity","overviewRuler"],()=>this._scrollableElement.updateOptions(this._getChangeOptions()))),this._register(r.onProtocolChange(h=>{this._scrollableElement.updateOptions({handleMouseWheel:!(h&16)})})),this._scrollableElement.setScrollDimensions({height:0,scrollHeight:0}),this._register(ds.runAndSubscribe(i.onChangeColors,()=>{this._scrollableElement.getDomNode().style.backgroundColor=i.colors.background.css})),t.appendChild(this._scrollableElement.getDomNode()),this._register(hn(()=>this._scrollableElement.getDomNode().remove())),this._styleElement=s.mainDocument.createElement("style"),e.appendChild(this._styleElement),this._register(hn(()=>this._styleElement.remove())),this._register(ds.runAndSubscribe(i.onChangeColors,()=>{this._styleElement.textContent=[".xterm .xterm-scrollable-element > .scrollbar > .slider {",`  background: ${i.colors.scrollbarSliderBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider:hover {",`  background: ${i.colors.scrollbarSliderHoverBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider.active {",`  background: ${i.colors.scrollbarSliderActiveBackground.css};`,"}"].join(`
`)})),this._register(this._bufferService.onResize(()=>this.queueSync())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._latestYDisp=void 0,this.queueSync()})),this._register(this._bufferService.onScroll(()=>this._sync())),this._register(this._scrollableElement.onScroll(h=>this._handleScroll(h)))}scrollLines(t){let e=this._scrollableElement.getScrollPosition();this._scrollableElement.setScrollPosition({reuseAnimation:!0,scrollTop:e.scrollTop+t*this._renderService.dimensions.css.cell.height})}scrollToLine(t,e){e&&(this._latestYDisp=t),this._scrollableElement.setScrollPosition({reuseAnimation:!e,scrollTop:t*this._renderService.dimensions.css.cell.height})}_getChangeOptions(){return{mouseWheelScrollSensitivity:this._optionsService.rawOptions.scrollSensitivity,fastScrollSensitivity:this._optionsService.rawOptions.fastScrollSensitivity,verticalScrollbarSize:this._optionsService.rawOptions.overviewRuler?.width||14}}queueSync(t){t!==void 0&&(this._latestYDisp=t),this._queuedAnimationFrame===void 0&&(this._queuedAnimationFrame=this._renderService.addRefreshCallback(()=>{this._queuedAnimationFrame=void 0,this._sync(this._latestYDisp)}))}_sync(t=this._bufferService.buffer.ydisp){!this._renderService||this._isSyncing||(this._isSyncing=!0,this._suppressOnScrollHandler=!0,this._scrollableElement.setScrollDimensions({height:this._renderService.dimensions.css.canvas.height,scrollHeight:this._renderService.dimensions.css.cell.height*this._bufferService.buffer.lines.length}),this._suppressOnScrollHandler=!1,t!==this._latestYDisp&&this._scrollableElement.setScrollPosition({scrollTop:t*this._renderService.dimensions.css.cell.height}),this._isSyncing=!1)}_handleScroll(t){if(!this._renderService||this._isHandlingScroll||this._suppressOnScrollHandler)return;this._isHandlingScroll=!0;let e=Math.round(t.scrollTop/this._renderService.dimensions.css.cell.height),n=e-this._bufferService.buffer.ydisp;n!==0&&(this._latestYDisp=e,this._onRequestScrollLines.fire(n)),this._isHandlingScroll=!1}};$k=xn([Pe(2,$s),Pe(3,Pa),Pe(4,BL),Pe(5,kh),Pe(6,zs),Pe(7,$a)],$k);var zk=class extends kt{constructor(t,e,n,s,r){super(),this._screenElement=t,this._bufferService=e,this._coreBrowserService=n,this._decorationService=s,this._renderService=r,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this._register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this._register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this._register(this._decorationService.onDecorationRemoved(i=>this._removeDecoration(i))),this._register(hn(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let t of this._decorationService.decorations)this._renderDecoration(t);this._dimensionsChanged=!1}_renderDecoration(t){this._refreshStyle(t),this._dimensionsChanged&&this._refreshXPosition(t)}_createElement(t){let e=this._coreBrowserService.mainDocument.createElement("div");e.classList.add("xterm-decoration"),e.classList.toggle("xterm-decoration-top-layer",t?.options?.layer==="top"),e.style.width=`${Math.round((t.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,e.style.height=`${(t.options.height||1)*this._renderService.dimensions.css.cell.height}px`,e.style.top=`${(t.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height}px`,e.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let n=t.options.x??0;return n&&n>this._bufferService.cols&&(e.style.display="none"),this._refreshXPosition(t,e),e}_refreshStyle(t){let e=t.marker.line-this._bufferService.buffers.active.ydisp;if(e<0||e>=this._bufferService.rows)t.element&&(t.element.style.display="none",t.onRenderEmitter.fire(t.element));else{let n=this._decorationElements.get(t);n||(n=this._createElement(t),t.element=n,this._decorationElements.set(t,n),this._container.appendChild(n),t.onDispose(()=>{this._decorationElements.delete(t),n.remove()})),n.style.display=this._altBufferIsActive?"none":"block",this._altBufferIsActive||(n.style.width=`${Math.round((t.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,n.style.height=`${(t.options.height||1)*this._renderService.dimensions.css.cell.height}px`,n.style.top=`${e*this._renderService.dimensions.css.cell.height}px`,n.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`),t.onRenderEmitter.fire(n)}}_refreshXPosition(t,e=t.element){if(!e)return;let n=t.options.x??0;(t.options.anchor||"left")==="right"?e.style.right=n?`${n*this._renderService.dimensions.css.cell.width}px`:"":e.style.left=n?`${n*this._renderService.dimensions.css.cell.width}px`:""}_removeDecoration(t){this._decorationElements.get(t)?.remove(),this._decorationElements.delete(t),t.dispose()}};zk=xn([Pe(1,$s),Pe(2,Pa),Pe(3,Jp),Pe(4,$a)],zk);var Ene=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(t){if(t.options.overviewRulerOptions){for(let e of this._zones)if(e.color===t.options.overviewRulerOptions.color&&e.position===t.options.overviewRulerOptions.position){if(this._lineIntersectsZone(e,t.marker.line))return;if(this._lineAdjacentToZone(e,t.marker.line,t.options.overviewRulerOptions.position)){this._addLineToZone(e,t.marker.line);return}}if(this._zonePoolIndex<this._zonePool.length){this._zonePool[this._zonePoolIndex].color=t.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=t.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=t.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=t.marker.line,this._zones.push(this._zonePool[this._zonePoolIndex++]);return}this._zones.push({color:t.options.overviewRulerOptions.color,position:t.options.overviewRulerOptions.position,startBufferLine:t.marker.line,endBufferLine:t.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(t){this._linePadding=t}_lineIntersectsZone(t,e){return e>=t.startBufferLine&&e<=t.endBufferLine}_lineAdjacentToZone(t,e,n){return e>=t.startBufferLine-this._linePadding[n||"full"]&&e<=t.endBufferLine+this._linePadding[n||"full"]}_addLineToZone(t,e){t.startBufferLine=Math.min(t.startBufferLine,e),t.endBufferLine=Math.max(t.endBufferLine,e)}},Ni={full:0,left:0,center:0,right:0},fo={full:0,left:0,center:0,right:0},Od={full:0,left:0,center:0,right:0},Hy=class extends kt{constructor(t,e,n,s,r,i,o,c){super(),this._viewportElement=t,this._screenElement=e,this._bufferService=n,this._decorationService=s,this._renderService=r,this._optionsService=i,this._themeService=o,this._coreBrowserService=c,this._colorZoneStore=new Ene,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement),this._register(hn(()=>this._canvas?.remove()));let u=this._canvas.getContext("2d");if(u)this._ctx=u;else throw new Error("Ctx cannot be null");this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this._register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0))),this._register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this._register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})),this._register(this._renderService.onRender(()=>{(!this._containerHeight||this._containerHeight!==this._screenElement.clientHeight)&&(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._register(this._optionsService.onSpecificOptionChange("overviewRuler",()=>this._queueRefresh(!0))),this._register(this._themeService.onChangeColors(()=>this._queueRefresh())),this._queueRefresh(!0)}get _width(){return this._optionsService.options.overviewRuler?.width||0}_refreshDrawConstants(){let t=Math.floor((this._canvas.width-1)/3),e=Math.ceil((this._canvas.width-1)/3);fo.full=this._canvas.width,fo.left=t,fo.center=e,fo.right=t,this._refreshDrawHeightConstants(),Od.full=1,Od.left=1,Od.center=1+fo.left,Od.right=1+fo.left+fo.center}_refreshDrawHeightConstants(){Ni.full=Math.round(2*this._coreBrowserService.dpr);let t=this._canvas.height/this._bufferService.buffer.lines.length,e=Math.round(Math.max(Math.min(t,12),6)*this._coreBrowserService.dpr);Ni.left=e,Ni.center=e,Ni.right=e}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Ni.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Ni.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Ni.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Ni.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let e of this._decorationService.decorations)this._colorZoneStore.addDecoration(e);this._ctx.lineWidth=1,this._renderRulerOutline();let t=this._colorZoneStore.zones;for(let e of t)e.position!=="full"&&this._renderColorZone(e);for(let e of t)e.position==="full"&&this._renderColorZone(e);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderRulerOutline(){this._ctx.fillStyle=this._themeService.colors.overviewRulerBorder.css,this._ctx.fillRect(0,0,1,this._canvas.height),this._optionsService.rawOptions.overviewRuler.showTopBorder&&this._ctx.fillRect(1,0,this._canvas.width-1,1),this._optionsService.rawOptions.overviewRuler.showBottomBorder&&this._ctx.fillRect(1,this._canvas.height-1,this._canvas.width-1,this._canvas.height)}_renderColorZone(t){this._ctx.fillStyle=t.color,this._ctx.fillRect(Od[t.position||"full"],Math.round((this._canvas.height-1)*(t.startBufferLine/this._bufferService.buffers.active.lines.length)-Ni[t.position||"full"]/2),fo[t.position||"full"],Math.round((this._canvas.height-1)*((t.endBufferLine-t.startBufferLine)/this._bufferService.buffers.active.lines.length)+Ni[t.position||"full"]))}_queueRefresh(t,e){this._shouldUpdateDimensions=t||this._shouldUpdateDimensions,this._shouldUpdateAnchor=e||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};Hy=xn([Pe(2,$s),Pe(3,Jp),Pe(4,$a),Pe(5,zs),Pe(6,kh),Pe(7,Pa)],Hy);var be;(t=>(t.NUL="\0",t.SOH="",t.STX="",t.ETX="",t.EOT="",t.ENQ="",t.ACK="",t.BEL="\x07",t.BS="\b",t.HT="	",t.LF=`
`,t.VT="\v",t.FF="\f",t.CR="\r",t.SO="",t.SI="",t.DLE="",t.DC1="",t.DC2="",t.DC3="",t.DC4="",t.NAK="",t.SYN="",t.ETB="",t.CAN="",t.EM="",t.SUB="",t.ESC="\x1B",t.FS="",t.GS="",t.RS="",t.US="",t.SP=" ",t.DEL=""))(be||={});var S0;(t=>(t.PAD="",t.HOP="",t.BPH="",t.NBH="",t.IND="",t.NEL="",t.SSA="",t.ESA="",t.HTS="",t.HTJ="",t.VTS="",t.PLD="",t.PLU="",t.RI="",t.SS2="",t.SS3="",t.DCS="",t.PU1="",t.PU2="",t.STS="",t.CCH="",t.MW="",t.SPA="",t.EPA="",t.SOS="",t.SGCI="",t.SCI="",t.CSI="",t.ST="",t.OSC="",t.PM="",t.APC=""))(S0||={});var nI;(t=>t.ST=`${be.ESC}\\`)(nI||={});var Uk=class{constructor(t,e,n,s,r,i){this._textarea=t,this._compositionView=e,this._bufferService=n,this._optionsService=s,this._coreService=r,this._renderService=i,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}get isComposing(){return this._isComposing}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(t){this._compositionView.textContent=t.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(t){if(this._isComposing||this._isSendingComposition){if(t.keyCode===20||t.keyCode===229||t.keyCode===16||t.keyCode===17||t.keyCode===18)return!1;this._finalizeComposition(!1)}return t.keyCode===229?(this._handleAnyTextareaChanges(),!1):!0}_finalizeComposition(t){if(this._compositionView.classList.remove("active"),this._isComposing=!1,t){let e={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){this._isSendingComposition=!1;let n;e.start+=this._dataAlreadySent.length,this._isComposing?n=this._textarea.value.substring(e.start,this._compositionPosition.start):n=this._textarea.value.substring(e.start),n.length>0&&this._coreService.triggerDataEvent(n,!0)}},0)}else{this._isSendingComposition=!1;let e=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(e,!0)}}_handleAnyTextareaChanges(){let t=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let e=this._textarea.value,n=e.replace(t,"");this._dataAlreadySent=n,e.length>t.length?this._coreService.triggerDataEvent(n,!0):e.length<t.length?this._coreService.triggerDataEvent(`${be.DEL}`,!0):e.length===t.length&&e!==t&&this._coreService.triggerDataEvent(e,!0)}},0)}updateCompositionElements(t){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let e=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),n=this._renderService.dimensions.css.cell.height,s=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,r=e*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=r+"px",this._compositionView.style.top=s+"px",this._compositionView.style.height=n+"px",this._compositionView.style.lineHeight=n+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let i=this._compositionView.getBoundingClientRect();this._textarea.style.left=r+"px",this._textarea.style.top=s+"px",this._textarea.style.width=Math.max(i.width,1)+"px",this._textarea.style.height=Math.max(i.height,1)+"px",this._textarea.style.lineHeight=i.height+"px"}t||setTimeout(()=>this.updateCompositionElements(!0),0)}}};Uk=xn([Pe(2,$s),Pe(3,zs),Pe(4,fc),Pe(5,$a)],Uk);var Qn=0,es=0,ts=0,_n=0,zR={css:"#00000000",rgba:0},Bn;(t=>{function e(r,i,o,c){return c!==void 0?`#${hl(r)}${hl(i)}${hl(o)}${hl(c)}`:`#${hl(r)}${hl(i)}${hl(o)}`}t.toCss=e;function n(r,i,o,c=255){return(r<<24|i<<16|o<<8|c)>>>0}t.toRgba=n;function s(r,i,o,c){return{css:t.toCss(r,i,o,c),rgba:t.toRgba(r,i,o,c)}}t.toColor=s})(Bn||={});var rn;(t=>{function e(u,h){if(_n=(h.rgba&255)/255,_n===1)return{css:h.css,rgba:h.rgba};let m=h.rgba>>24&255,p=h.rgba>>16&255,y=h.rgba>>8&255,v=u.rgba>>24&255,x=u.rgba>>16&255,_=u.rgba>>8&255;Qn=v+Math.round((m-v)*_n),es=x+Math.round((p-x)*_n),ts=_+Math.round((y-_)*_n);let S=Bn.toCss(Qn,es,ts),k=Bn.toRgba(Qn,es,ts);return{css:S,rgba:k}}t.blend=e;function n(u){return(u.rgba&255)===255}t.isOpaque=n;function s(u,h,m){let p=k0.ensureContrastRatio(u.rgba,h.rgba,m);if(p)return Bn.toColor(p>>24&255,p>>16&255,p>>8&255)}t.ensureContrastRatio=s;function r(u){let h=(u.rgba|255)>>>0;return[Qn,es,ts]=k0.toChannels(h),{css:Bn.toCss(Qn,es,ts),rgba:h}}t.opaque=r;function i(u,h){return _n=Math.round(h*255),[Qn,es,ts]=k0.toChannels(u.rgba),{css:Bn.toCss(Qn,es,ts,_n),rgba:Bn.toRgba(Qn,es,ts,_n)}}t.opacity=i;function o(u,h){return _n=u.rgba&255,i(u,_n*h/255)}t.multiplyOpacity=o;function c(u){return[u.rgba>>24&255,u.rgba>>16&255,u.rgba>>8&255]}t.toColorRGB=c})(rn||={});var gn;(t=>{let e,n;try{let r=document.createElement("canvas");r.width=1,r.height=1;let i=r.getContext("2d",{willReadFrequently:!0});i&&(e=i,e.globalCompositeOperation="copy",n=e.createLinearGradient(0,0,1,1))}catch{}function s(r){if(r.match(/#[\da-f]{3,8}/i))switch(r.length){case 4:return Qn=parseInt(r.slice(1,2).repeat(2),16),es=parseInt(r.slice(2,3).repeat(2),16),ts=parseInt(r.slice(3,4).repeat(2),16),Bn.toColor(Qn,es,ts);case 5:return Qn=parseInt(r.slice(1,2).repeat(2),16),es=parseInt(r.slice(2,3).repeat(2),16),ts=parseInt(r.slice(3,4).repeat(2),16),_n=parseInt(r.slice(4,5).repeat(2),16),Bn.toColor(Qn,es,ts,_n);case 7:return{css:r,rgba:(parseInt(r.slice(1),16)<<8|255)>>>0};case 9:return{css:r,rgba:parseInt(r.slice(1),16)>>>0}}let i=r.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(i)return Qn=parseInt(i[1]),es=parseInt(i[2]),ts=parseInt(i[3]),_n=Math.round((i[5]===void 0?1:parseFloat(i[5]))*255),Bn.toColor(Qn,es,ts,_n);if(!e||!n)throw new Error("css.toColor: Unsupported css format");if(e.fillStyle=n,e.fillStyle=r,typeof e.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(e.fillRect(0,0,1,1),[Qn,es,ts,_n]=e.getImageData(0,0,1,1).data,_n!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:Bn.toRgba(Qn,es,ts,_n),css:r}}t.toColor=s})(gn||={});var Ts;(t=>{function e(s){return n(s>>16&255,s>>8&255,s&255)}t.relativeLuminance=e;function n(s,r,i){let o=s/255,c=r/255,u=i/255,h=o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4),m=c<=.03928?c/12.92:Math.pow((c+.055)/1.055,2.4),p=u<=.03928?u/12.92:Math.pow((u+.055)/1.055,2.4);return h*.2126+m*.7152+p*.0722}t.relativeLuminance2=n})(Ts||={});var k0;(t=>{function e(o,c){if(_n=(c&255)/255,_n===1)return c;let u=c>>24&255,h=c>>16&255,m=c>>8&255,p=o>>24&255,y=o>>16&255,v=o>>8&255;return Qn=p+Math.round((u-p)*_n),es=y+Math.round((h-y)*_n),ts=v+Math.round((m-v)*_n),Bn.toRgba(Qn,es,ts)}t.blend=e;function n(o,c,u){let h=Ts.relativeLuminance(o>>8),m=Ts.relativeLuminance(c>>8);if(pa(h,m)<u){if(m<h){let v=s(o,c,u),x=pa(h,Ts.relativeLuminance(v>>8));if(x<u){let _=r(o,c,u),S=pa(h,Ts.relativeLuminance(_>>8));return x>S?v:_}return v}let p=r(o,c,u),y=pa(h,Ts.relativeLuminance(p>>8));if(y<u){let v=s(o,c,u),x=pa(h,Ts.relativeLuminance(v>>8));return y>x?p:v}return p}}t.ensureContrastRatio=n;function s(o,c,u){let h=o>>24&255,m=o>>16&255,p=o>>8&255,y=c>>24&255,v=c>>16&255,x=c>>8&255,_=pa(Ts.relativeLuminance2(y,v,x),Ts.relativeLuminance2(h,m,p));for(;_<u&&(y>0||v>0||x>0);)y-=Math.max(0,Math.ceil(y*.1)),v-=Math.max(0,Math.ceil(v*.1)),x-=Math.max(0,Math.ceil(x*.1)),_=pa(Ts.relativeLuminance2(y,v,x),Ts.relativeLuminance2(h,m,p));return(y<<24|v<<16|x<<8|255)>>>0}t.reduceLuminance=s;function r(o,c,u){let h=o>>24&255,m=o>>16&255,p=o>>8&255,y=c>>24&255,v=c>>16&255,x=c>>8&255,_=pa(Ts.relativeLuminance2(y,v,x),Ts.relativeLuminance2(h,m,p));for(;_<u&&(y<255||v<255||x<255);)y=Math.min(255,y+Math.ceil((255-y)*.1)),v=Math.min(255,v+Math.ceil((255-v)*.1)),x=Math.min(255,x+Math.ceil((255-x)*.1)),_=pa(Ts.relativeLuminance2(y,v,x),Ts.relativeLuminance2(h,m,p));return(y<<24|v<<16|x<<8|255)>>>0}t.increaseLuminance=r;function i(o){return[o>>24&255,o>>16&255,o>>8&255,o&255]}t.toChannels=i})(k0||={});function hl(t){let e=t.toString(16);return e.length<2?"0"+e:e}function pa(t,e){return t<e?(e+.05)/(t+.05):(t+.05)/(e+.05)}var Ane=class extends Xp{constructor(t,e,n){super(),this.content=0,this.combinedData="",this.fg=t.fg,this.bg=t.bg,this.combinedData=e,this._width=n}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(t){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},Fy=class{constructor(t){this._bufferService=t,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new Jr}register(t){let e={id:this._nextCharacterJoinerId++,handler:t};return this._characterJoiners.push(e),e.id}deregister(t){for(let e=0;e<this._characterJoiners.length;e++)if(this._characterJoiners[e].id===t)return this._characterJoiners.splice(e,1),!0;return!1}getJoinedCharacters(t){if(this._characterJoiners.length===0)return[];let e=this._bufferService.buffer.lines.get(t);if(!e||e.length===0)return[];let n=[],s=e.translateToString(!0),r=0,i=0,o=0,c=e.getFg(0),u=e.getBg(0);for(let h=0;h<e.getTrimmedLength();h++)if(e.loadCell(h,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==c||this._workCell.bg!==u){if(h-r>1){let m=this._getJoinedRanges(s,o,i,e,r);for(let p=0;p<m.length;p++)n.push(m[p])}r=h,o=i,c=this._workCell.fg,u=this._workCell.bg}i+=this._workCell.getChars().length||No.length}if(this._bufferService.cols-r>1){let h=this._getJoinedRanges(s,o,i,e,r);for(let m=0;m<h.length;m++)n.push(h[m])}return n}_getJoinedRanges(t,e,n,s,r){let i=t.substring(e,n),o=[];try{o=this._characterJoiners[0].handler(i)}catch(c){console.error(c)}for(let c=1;c<this._characterJoiners.length;c++)try{let u=this._characterJoiners[c].handler(i);for(let h=0;h<u.length;h++)Fy._mergeRanges(o,u[h])}catch(u){console.error(u)}return this._stringRangesToCellRanges(o,s,r),o}_stringRangesToCellRanges(t,e,n){let s=0,r=!1,i=0,o=t[s];if(o){for(let c=n;c<this._bufferService.cols;c++){let u=e.getWidth(c),h=e.getString(c).length||No.length;if(u!==0){if(!r&&o[0]<=i&&(o[0]=c,r=!0),o[1]<=i){if(o[1]=c,o=t[++s],!o)break;o[0]<=i?(o[0]=c,r=!0):r=!1}i+=h}}o&&(o[1]=this._bufferService.cols)}}static _mergeRanges(t,e){let n=!1;for(let s=0;s<t.length;s++){let r=t[s];if(n){if(e[1]<=r[0])return t[s-1][1]=e[1],t;if(e[1]<=r[1])return t[s-1][1]=Math.max(e[1],r[1]),t.splice(s,1),t;t.splice(s,1),s--}else{if(e[1]<=r[0])return t.splice(s,0,e),t;if(e[1]<=r[1])return r[0]=Math.min(e[0],r[0]),t;e[0]<r[1]&&(r[0]=Math.min(e[0],r[0]),n=!0);continue}}return n?t[t.length-1][1]=e[1]:t.push(e),t}};Fy=xn([Pe(0,$s)],Fy);function jne(t){return 57508<=t&&t<=57558}function Tne(t){return 9472<=t&&t<=9631}function Rne(t){return jne(t)||Tne(t)}function One(){return{css:{canvas:qg(),cell:qg()},device:{canvas:qg(),cell:qg(),char:{width:0,height:0,left:0,top:0}}}}function qg(){return{width:0,height:0}}var Hk=class{constructor(t,e,n,s,r,i,o){this._document=t,this._characterJoinerService=e,this._optionsService=n,this._coreBrowserService=s,this._coreService=r,this._decorationService=i,this._themeService=o,this._workCell=new Jr,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(t,e,n){this._selectionStart=t,this._selectionEnd=e,this._columnSelectMode=n}createRow(t,e,n,s,r,i,o,c,u,h,m){let p=[],y=this._characterJoinerService.getJoinedCharacters(e),v=this._themeService.colors,x=t.getNoBgTrimmedLength();n&&x<i+1&&(x=i+1);let _,S=0,k="",C=0,N=0,R=0,O=0,E=!1,D=0,B=!1,q=0,P=0,G=[],z=h!==-1&&m!==-1;for(let K=0;K<x;K++){t.loadCell(K,this._workCell);let Z=this._workCell.getWidth();if(Z===0)continue;let W=!1,I=K>=P,Y=K,J=this._workCell;if(y.length>0&&K===y[0][0]&&I){let Ye=y.shift(),Je=this._isCellInSelection(Ye[0],e);for(C=Ye[0]+1;C<Ye[1];C++)I&&=Je===this._isCellInSelection(C,e);I&&=!n||i<Ye[0]||i>=Ye[1],I?(W=!0,J=new Ane(this._workCell,t.translateToString(!0,Ye[0],Ye[1]),Ye[1]-Ye[0]),Y=Ye[1]-1,Z=J.getWidth()):P=Ye[1]}let $=this._isCellInSelection(K,e),j=n&&K===i,M=z&&K>=h&&K<=m,F=!1;this._decorationService.forEachDecorationAtCell(K,e,void 0,Ye=>{F=!0});let A=J.getChars()||No;if(A===" "&&(J.isUnderline()||J.isOverline())&&(A=""),q=Z*c-u.get(A,J.isBold(),J.isItalic()),!_)_=this._document.createElement("span");else if(S&&($&&B||!$&&!B&&J.bg===N)&&($&&B&&v.selectionForeground||J.fg===R)&&J.extended.ext===O&&M===E&&q===D&&!j&&!W&&!F&&I){J.isInvisible()?k+=No:k+=A,S++;continue}else S&&(_.textContent=k),_=this._document.createElement("span"),S=0,k="";if(N=J.bg,R=J.fg,O=J.extended.ext,E=M,D=q,B=$,W&&i>=K&&i<=Y&&(i=K),!this._coreService.isCursorHidden&&j&&this._coreService.isCursorInitialized){if(G.push("xterm-cursor"),this._coreBrowserService.isFocused)o&&G.push("xterm-cursor-blink"),G.push(s==="bar"?"xterm-cursor-bar":s==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(r)switch(r){case"outline":G.push("xterm-cursor-outline");break;case"block":G.push("xterm-cursor-block");break;case"bar":G.push("xterm-cursor-bar");break;case"underline":G.push("xterm-cursor-underline");break}}if(J.isBold()&&G.push("xterm-bold"),J.isItalic()&&G.push("xterm-italic"),J.isDim()&&G.push("xterm-dim"),J.isInvisible()?k=No:k=J.getChars()||No,J.isUnderline()&&(G.push(`xterm-underline-${J.extended.underlineStyle}`),k===" "&&(k=""),!J.isUnderlineColorDefault()))if(J.isUnderlineColorRGB())_.style.textDecorationColor=`rgb(${Xp.toColorRGB(J.getUnderlineColor()).join(",")})`;else{let Ye=J.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&J.isBold()&&Ye<8&&(Ye+=8),_.style.textDecorationColor=v.ansi[Ye].css}J.isOverline()&&(G.push("xterm-overline"),k===" "&&(k="")),J.isStrikethrough()&&G.push("xterm-strikethrough"),M&&(_.style.textDecoration="underline");let Q=J.getFgColor(),se=J.getFgColorMode(),X=J.getBgColor(),ae=J.getBgColorMode(),ke=!!J.isInverse();if(ke){let Ye=Q;Q=X,X=Ye;let Je=se;se=ae,ae=Je}let Se,Ve,Le=!1;this._decorationService.forEachDecorationAtCell(K,e,void 0,Ye=>{Ye.options.layer!=="top"&&Le||(Ye.backgroundColorRGB&&(ae=50331648,X=Ye.backgroundColorRGB.rgba>>8&16777215,Se=Ye.backgroundColorRGB),Ye.foregroundColorRGB&&(se=50331648,Q=Ye.foregroundColorRGB.rgba>>8&16777215,Ve=Ye.foregroundColorRGB),Le=Ye.options.layer==="top")}),!Le&&$&&(Se=this._coreBrowserService.isFocused?v.selectionBackgroundOpaque:v.selectionInactiveBackgroundOpaque,X=Se.rgba>>8&16777215,ae=50331648,Le=!0,v.selectionForeground&&(se=50331648,Q=v.selectionForeground.rgba>>8&16777215,Ve=v.selectionForeground)),Le&&G.push("xterm-decoration-top");let rt;switch(ae){case 16777216:case 33554432:rt=v.ansi[X],G.push(`xterm-bg-${X}`);break;case 50331648:rt=Bn.toColor(X>>16,X>>8&255,X&255),this._addStyle(_,`background-color:#${UR((X>>>0).toString(16),"0",6)}`);break;default:ke?(rt=v.foreground,G.push("xterm-bg-257")):rt=v.background}switch(Se||J.isDim()&&(Se=rn.multiplyOpacity(rt,.5)),se){case 16777216:case 33554432:J.isBold()&&Q<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Q+=8),this._applyMinimumContrast(_,rt,v.ansi[Q],J,Se,void 0)||G.push(`xterm-fg-${Q}`);break;case 50331648:let Ye=Bn.toColor(Q>>16&255,Q>>8&255,Q&255);this._applyMinimumContrast(_,rt,Ye,J,Se,Ve)||this._addStyle(_,`color:#${UR(Q.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(_,rt,v.foreground,J,Se,Ve)||ke&&G.push("xterm-fg-257")}G.length&&(_.className=G.join(" "),G.length=0),!j&&!W&&!F&&I?S++:_.textContent=k,q!==this.defaultSpacing&&(_.style.letterSpacing=`${q}px`),p.push(_),K=Y}return _&&S&&(_.textContent=k),p}_applyMinimumContrast(t,e,n,s,r,i){if(this._optionsService.rawOptions.minimumContrastRatio===1||Rne(s.getCode()))return!1;let o=this._getContrastCache(s),c;if(!r&&!i&&(c=o.getColor(e.rgba,n.rgba)),c===void 0){let u=this._optionsService.rawOptions.minimumContrastRatio/(s.isDim()?2:1);c=rn.ensureContrastRatio(r||e,i||n,u),o.setColor((r||e).rgba,(i||n).rgba,c??null)}return c?(this._addStyle(t,`color:${c.css}`),!0):!1}_getContrastCache(t){return t.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(t,e){t.setAttribute("style",`${t.getAttribute("style")||""}${e};`)}_isCellInSelection(t,e){let n=this._selectionStart,s=this._selectionEnd;return!n||!s?!1:this._columnSelectMode?n[0]<=s[0]?t>=n[0]&&e>=n[1]&&t<s[0]&&e<=s[1]:t<n[0]&&e>=n[1]&&t>=s[0]&&e<=s[1]:e>n[1]&&e<s[1]||n[1]===s[1]&&e===n[1]&&t>=n[0]&&t<s[0]||n[1]<s[1]&&e===s[1]&&t<s[0]||n[1]<s[1]&&e===n[1]&&t>=n[0]}};Hk=xn([Pe(1,PL),Pe(2,zs),Pe(3,Pa),Pe(4,fc),Pe(5,Jp),Pe(6,kh)],Hk);function UR(t,e,n){for(;t.length<n;)t=e+t;return t}var Mne=class{constructor(t,e){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=t.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let n=t.createElement("span");n.classList.add("xterm-char-measure-element");let s=t.createElement("span");s.classList.add("xterm-char-measure-element"),s.style.fontWeight="bold";let r=t.createElement("span");r.classList.add("xterm-char-measure-element"),r.style.fontStyle="italic";let i=t.createElement("span");i.classList.add("xterm-char-measure-element"),i.style.fontWeight="bold",i.style.fontStyle="italic",this._measureElements=[n,s,r,i],this._container.appendChild(n),this._container.appendChild(s),this._container.appendChild(r),this._container.appendChild(i),e.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(t,e,n,s){t===this._font&&e===this._fontSize&&n===this._weight&&s===this._weightBold||(this._font=t,this._fontSize=e,this._weight=n,this._weightBold=s,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${n}`,this._measureElements[1].style.fontWeight=`${s}`,this._measureElements[2].style.fontWeight=`${n}`,this._measureElements[3].style.fontWeight=`${s}`,this.clear())}get(t,e,n){let s=0;if(!e&&!n&&t.length===1&&(s=t.charCodeAt(0))<256){if(this._flat[s]!==-9999)return this._flat[s];let o=this._measure(t,0);return o>0&&(this._flat[s]=o),o}let r=t;e&&(r+="B"),n&&(r+="I");let i=this._holey.get(r);if(i===void 0){let o=0;e&&(o|=1),n&&(o|=2),i=this._measure(t,o),i>0&&this._holey.set(r,i)}return i}_measure(t,e){let n=this._measureElements[e];return n.textContent=t.repeat(32),n.offsetWidth/32}},Dne=class{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(t,e,n,s=!1){if(this.selectionStart=e,this.selectionEnd=n,!e||!n||e[0]===n[0]&&e[1]===n[1]){this.clear();return}let r=t.buffers.active.ydisp,i=e[1]-r,o=n[1]-r,c=Math.max(i,0),u=Math.min(o,t.rows-1);if(c>=t.rows||u<0){this.clear();return}this.hasSelection=!0,this.columnSelectMode=s,this.viewportStartRow=i,this.viewportEndRow=o,this.viewportCappedStartRow=c,this.viewportCappedEndRow=u,this.startCol=e[0],this.endCol=n[0]}isCellSelected(t,e,n){return this.hasSelection?(n-=t.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?e>=this.startCol&&n>=this.viewportCappedStartRow&&e<this.endCol&&n<=this.viewportCappedEndRow:e<this.startCol&&n>=this.viewportCappedStartRow&&e>=this.endCol&&n<=this.viewportCappedEndRow:n>this.viewportStartRow&&n<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&n===this.viewportStartRow&&e>=this.startCol&&e<this.endCol||this.viewportStartRow<this.viewportEndRow&&n===this.viewportEndRow&&e<this.endCol||this.viewportStartRow<this.viewportEndRow&&n===this.viewportStartRow&&e>=this.startCol):!1}};function Bne(){return new Dne}var Wx="xterm-dom-renderer-owner-",Ur="xterm-rows",Kg="xterm-fg-",HR="xterm-bg-",Md="xterm-focus",Wg="xterm-selection",Lne=1,Fk=class extends kt{constructor(t,e,n,s,r,i,o,c,u,h,m,p,y,v){super(),this._terminal=t,this._document=e,this._element=n,this._screenElement=s,this._viewportElement=r,this._helperContainer=i,this._linkifier2=o,this._charSizeService=u,this._optionsService=h,this._bufferService=m,this._coreService=p,this._coreBrowserService=y,this._themeService=v,this._terminalClass=Lne++,this._rowElements=[],this._selectionRenderModel=Bne(),this.onRequestRedraw=this._register(new Te).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(Ur),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(Wg),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=One(),this._updateDimensions(),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._themeService.onChangeColors(x=>this._injectCss(x))),this._injectCss(this._themeService.colors),this._rowFactory=c.createInstance(Hk,document),this._element.classList.add(Wx+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this._register(this._linkifier2.onShowLinkUnderline(x=>this._handleLinkHover(x))),this._register(this._linkifier2.onHideLinkUnderline(x=>this._handleLinkLeave(x))),this._register(hn(()=>{this._element.classList.remove(Wx+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new Mne(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let t=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*t,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*t),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/t),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/t),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let n of this._rowElements)n.style.width=`${this.dimensions.css.canvas.width}px`,n.style.height=`${this.dimensions.css.cell.height}px`,n.style.lineHeight=`${this.dimensions.css.cell.height}px`,n.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let e=`${this._terminalSelector} .${Ur} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=e,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(t){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let e=`${this._terminalSelector} .${Ur} { pointer-events: none; color: ${t.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;e+=`${this._terminalSelector} .${Ur} .xterm-dim { color: ${rn.multiplyOpacity(t.foreground,.5).css};}`,e+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;let n=`blink_underline_${this._terminalClass}`,s=`blink_bar_${this._terminalClass}`,r=`blink_block_${this._terminalClass}`;e+=`@keyframes ${n} { 50% {  border-bottom-style: hidden; }}`,e+=`@keyframes ${s} { 50% {  box-shadow: none; }}`,e+=`@keyframes ${r} { 0% {  background-color: ${t.cursor.css};  color: ${t.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${t.cursor.css}; }}`,e+=`${this._terminalSelector} .${Ur}.${Md} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${n} 1s step-end infinite;}${this._terminalSelector} .${Ur}.${Md} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${s} 1s step-end infinite;}${this._terminalSelector} .${Ur}.${Md} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${r} 1s step-end infinite;}${this._terminalSelector} .${Ur} .xterm-cursor.xterm-cursor-block { background-color: ${t.cursor.css}; color: ${t.cursorAccent.css};}${this._terminalSelector} .${Ur} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${t.cursor.css} !important; color: ${t.cursorAccent.css} !important;}${this._terminalSelector} .${Ur} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${t.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${Ur} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${t.cursor.css} inset;}${this._terminalSelector} .${Ur} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${t.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,e+=`${this._terminalSelector} .${Wg} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${Wg} div { position: absolute; background-color: ${t.selectionBackgroundOpaque.css};}${this._terminalSelector} .${Wg} div { position: absolute; background-color: ${t.selectionInactiveBackgroundOpaque.css};}`;for(let[i,o]of t.ansi.entries())e+=`${this._terminalSelector} .${Kg}${i} { color: ${o.css}; }${this._terminalSelector} .${Kg}${i}.xterm-dim { color: ${rn.multiplyOpacity(o,.5).css}; }${this._terminalSelector} .${HR}${i} { background-color: ${o.css}; }`;e+=`${this._terminalSelector} .${Kg}257 { color: ${rn.opaque(t.background).css}; }${this._terminalSelector} .${Kg}257.xterm-dim { color: ${rn.multiplyOpacity(rn.opaque(t.background),.5).css}; }${this._terminalSelector} .${HR}257 { background-color: ${t.foreground.css}; }`,this._themeStyleElement.textContent=e}_setDefaultSpacing(){let t=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${t}px`,this._rowFactory.defaultSpacing=t}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(t,e){for(let n=this._rowElements.length;n<=e;n++){let s=this._document.createElement("div");this._rowContainer.appendChild(s),this._rowElements.push(s)}for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(t,e){this._refreshRowElements(t,e),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(Md),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(Md),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(t,e,n){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(t,e,n),this.renderRows(0,this._bufferService.rows-1),!t||!e||(this._selectionRenderModel.update(this._terminal,t,e,n),!this._selectionRenderModel.hasSelection))return;let s=this._selectionRenderModel.viewportStartRow,r=this._selectionRenderModel.viewportEndRow,i=this._selectionRenderModel.viewportCappedStartRow,o=this._selectionRenderModel.viewportCappedEndRow,c=this._document.createDocumentFragment();if(n){let u=t[0]>e[0];c.appendChild(this._createSelectionElement(i,u?e[0]:t[0],u?t[0]:e[0],o-i+1))}else{let u=s===i?t[0]:0,h=i===r?e[0]:this._bufferService.cols;c.appendChild(this._createSelectionElement(i,u,h));let m=o-i-1;if(c.appendChild(this._createSelectionElement(i+1,0,this._bufferService.cols,m)),i!==o){let p=r===o?e[0]:this._bufferService.cols;c.appendChild(this._createSelectionElement(o,0,p))}}this._selectionContainer.appendChild(c)}_createSelectionElement(t,e,n,s=1){let r=this._document.createElement("div"),i=e*this.dimensions.css.cell.width,o=this.dimensions.css.cell.width*(n-e);return i+o>this.dimensions.css.canvas.width&&(o=this.dimensions.css.canvas.width-i),r.style.height=`${s*this.dimensions.css.cell.height}px`,r.style.top=`${t*this.dimensions.css.cell.height}px`,r.style.left=`${i}px`,r.style.width=`${o}px`,r}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let t of this._rowElements)t.replaceChildren()}renderRows(t,e){let n=this._bufferService.buffer,s=n.ybase+n.y,r=Math.min(n.x,this._bufferService.cols-1),i=this._coreService.decPrivateModes.cursorBlink??this._optionsService.rawOptions.cursorBlink,o=this._coreService.decPrivateModes.cursorStyle??this._optionsService.rawOptions.cursorStyle,c=this._optionsService.rawOptions.cursorInactiveStyle;for(let u=t;u<=e;u++){let h=u+n.ydisp,m=this._rowElements[u],p=n.lines.get(h);if(!m||!p)break;m.replaceChildren(...this._rowFactory.createRow(p,h,h===s,o,c,r,i,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${Wx}${this._terminalClass}`}_handleLinkHover(t){this._setCellUnderline(t.x1,t.x2,t.y1,t.y2,t.cols,!0)}_handleLinkLeave(t){this._setCellUnderline(t.x1,t.x2,t.y1,t.y2,t.cols,!1)}_setCellUnderline(t,e,n,s,r,i){n<0&&(t=0),s<0&&(e=0);let o=this._bufferService.rows-1;n=Math.max(Math.min(n,o),0),s=Math.max(Math.min(s,o),0),r=Math.min(r,this._bufferService.cols);let c=this._bufferService.buffer,u=c.ybase+c.y,h=Math.min(c.x,r-1),m=this._optionsService.rawOptions.cursorBlink,p=this._optionsService.rawOptions.cursorStyle,y=this._optionsService.rawOptions.cursorInactiveStyle;for(let v=n;v<=s;++v){let x=v+c.ydisp,_=this._rowElements[v],S=c.lines.get(x);if(!_||!S)break;_.replaceChildren(...this._rowFactory.createRow(S,x,x===u,p,y,h,m,this.dimensions.css.cell.width,this._widthCache,i?v===n?t:0:-1,i?(v===s?e:r)-1:-1))}}};Fk=xn([Pe(7,rN),Pe(8,yb),Pe(9,zs),Pe(10,$s),Pe(11,fc),Pe(12,Pa),Pe(13,kh)],Fk);var Vk=class extends kt{constructor(t,e,n){super(),this._optionsService=n,this.width=0,this.height=0,this._onCharSizeChange=this._register(new Te),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this._register(new Pne(this._optionsService))}catch{this._measureStrategy=this._register(new Ine(t,e,this._optionsService))}this._register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}get hasValidSize(){return this.width>0&&this.height>0}measure(){let t=this._measureStrategy.measure();(t.width!==this.width||t.height!==this.height)&&(this.width=t.width,this.height=t.height,this._onCharSizeChange.fire())}};Vk=xn([Pe(2,zs)],Vk);var sI=class extends kt{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(t,e){t!==void 0&&t>0&&e!==void 0&&e>0&&(this._result.width=t,this._result.height=e)}},Ine=class extends sI{constructor(t,e,n){super(),this._document=t,this._parentElement=e,this._optionsService=n,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}},Pne=class extends sI{constructor(t){super(),this._optionsService=t,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");let e=this._ctx.measureText("W");if(!("width"in e&&"fontBoundingBoxAscent"in e&&"fontBoundingBoxDescent"in e))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;let t=this._ctx.measureText("W");return this._validateAndSet(t.width,t.fontBoundingBoxAscent+t.fontBoundingBoxDescent),this._result}},$ne=class extends kt{constructor(t,e,n){super(),this._textarea=t,this._window=e,this.mainDocument=n,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=this._register(new zne(this._window)),this._onDprChange=this._register(new Te),this.onDprChange=this._onDprChange.event,this._onWindowChange=this._register(new Te),this.onWindowChange=this._onWindowChange.event,this._register(this.onWindowChange(s=>this._screenDprMonitor.setWindow(s))),this._register(ds.forward(this._screenDprMonitor.onDprChange,this._onDprChange)),this._register(ht(this._textarea,"focus",()=>this._isFocused=!0)),this._register(ht(this._textarea,"blur",()=>this._isFocused=!1))}get window(){return this._window}set window(t){this._window!==t&&(this._window=t,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}},zne=class extends kt{constructor(t){super(),this._parentWindow=t,this._windowResizeListener=this._register(new th),this._onDprChange=this._register(new Te),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this._register(hn(()=>this.clearListener()))}setWindow(t){this._parentWindow=t,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=ht(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){!this._resolutionMediaMatchList||!this._outerListener||(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}},Une=class extends kt{constructor(){super(),this.linkProviders=[],this._register(hn(()=>this.linkProviders.length=0))}registerLinkProvider(t){return this.linkProviders.push(t),{dispose:()=>{let e=this.linkProviders.indexOf(t);e!==-1&&this.linkProviders.splice(e,1)}}}};function dN(t,e,n){let s=n.getBoundingClientRect(),r=t.getComputedStyle(n),i=parseInt(r.getPropertyValue("padding-left")),o=parseInt(r.getPropertyValue("padding-top"));return[e.clientX-s.left-i,e.clientY-s.top-o]}function Hne(t,e,n,s,r,i,o,c,u){if(!i)return;let h=dN(t,e,n);if(h)return h[0]=Math.ceil((h[0]+(u?o/2:0))/o),h[1]=Math.ceil(h[1]/c),h[0]=Math.min(Math.max(h[0],1),s+(u?1:0)),h[1]=Math.min(Math.max(h[1],1),r),h}var qk=class{constructor(t,e){this._renderService=t,this._charSizeService=e}getCoords(t,e,n,s,r){return Hne(window,t,e,n,s,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,r)}getMouseReportCoords(t,e){let n=dN(window,t,e);if(this._charSizeService.hasValidSize)return n[0]=Math.min(Math.max(n[0],0),this._renderService.dimensions.css.canvas.width-1),n[1]=Math.min(Math.max(n[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(n[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(n[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(n[0]),y:Math.floor(n[1])}}};qk=xn([Pe(0,$a),Pe(1,yb)],qk);var Fne=class{constructor(t,e){this._renderCallback=t,this._coreBrowserService=e,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(t){return this._refreshCallbacks.push(t),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(t,e,n){this._rowCount=n,t=t!==void 0?t:0,e=e!==void 0?e:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,t):t,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,e):e,!this._animationFrame&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0){this._runRefreshCallbacks();return}let t=Math.max(this._rowStart,0),e=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(t,e),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let t of this._refreshCallbacks)t(0);this._refreshCallbacks=[]}},rI={};Qee(rI,{getSafariVersion:()=>qne,isChromeOS:()=>lI,isFirefox:()=>iI,isIpad:()=>Kne,isIphone:()=>Wne,isLegacyEdge:()=>Vne,isLinux:()=>fN,isMac:()=>Vy,isNode:()=>vb,isSafari:()=>aI,isWindows:()=>oI});var vb=typeof process<"u"&&"title"in process,Qp=vb?"node":navigator.userAgent,em=vb?"node":navigator.platform,iI=Qp.includes("Firefox"),Vne=Qp.includes("Edge"),aI=/^((?!chrome|android).)*safari/i.test(Qp);function qne(){if(!aI)return 0;let t=Qp.match(/Version\/(\d+)/);return t===null||t.length<2?0:parseInt(t[1])}var Vy=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(em),Kne=em==="iPad",Wne=em==="iPhone",oI=["Windows","Win16","Win32","WinCE"].includes(em),fN=em.indexOf("Linux")>=0,lI=/\bCrOS\b/.test(Qp),cI=class{constructor(){this._tasks=[],this._i=0}enqueue(t){this._tasks.push(t),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(t){this._idleCallback=void 0;let e=0,n=0,s=t.timeRemaining(),r=0;for(;this._i<this._tasks.length;){if(e=performance.now(),this._tasks[this._i]()||this._i++,e=Math.max(1,performance.now()-e),n=Math.max(e,n),r=t.timeRemaining(),n*1.5>r){s-e<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(s-e))}ms`),this._start();return}s=r}this.clear()}},Gne=class extends cI{_requestCallback(t){return setTimeout(()=>t(this._createDeadline(16)))}_cancelCallback(t){clearTimeout(t)}_createDeadline(t){let e=performance.now()+t;return{timeRemaining:()=>Math.max(0,e-performance.now())}}},Yne=class extends cI{_requestCallback(t){return requestIdleCallback(t)}_cancelCallback(t){cancelIdleCallback(t)}},qy=!vb&&"requestIdleCallback"in window?Yne:Gne,Zne=class{constructor(){this._queue=new qy}set(t){this._queue.clear(),this._queue.enqueue(t)}flush(){this._queue.flush()}},Kk=class extends kt{constructor(t,e,n,s,r,i,o,c,u){super(),this._rowCount=t,this._optionsService=n,this._charSizeService=s,this._coreService=r,this._coreBrowserService=c,this._renderer=this._register(new th),this._pausedResizeTask=new Zne,this._observerDisposable=this._register(new th),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this._register(new Te),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this._register(new Te),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this._register(new Te),this.onRender=this._onRender.event,this._onRefreshRequest=this._register(new Te),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new Fne((h,m)=>this._renderRows(h,m),this._coreBrowserService),this._register(this._renderDebouncer),this._syncOutputHandler=new Xne(this._coreBrowserService,this._coreService,()=>this._fullRefresh()),this._register(hn(()=>this._syncOutputHandler.dispose())),this._register(this._coreBrowserService.onDprChange(()=>this.handleDevicePixelRatioChange())),this._register(o.onResize(()=>this._fullRefresh())),this._register(o.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this._register(i.onDecorationRegistered(()=>this._fullRefresh())),this._register(i.onDecorationRemoved(()=>this._fullRefresh())),this._register(this._optionsService.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(o.cols,o.rows),this._fullRefresh()})),this._register(this._optionsService.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(o.buffer.y,o.buffer.y,!0))),this._register(u.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(this._coreBrowserService.window,e),this._register(this._coreBrowserService.onWindowChange(h=>this._registerIntersectionObserver(h,e)))}get dimensions(){return this._renderer.value.dimensions}_registerIntersectionObserver(t,e){if("IntersectionObserver"in t){let n=new t.IntersectionObserver(s=>this._handleIntersectionChange(s[s.length-1]),{threshold:0});n.observe(e),this._observerDisposable.value=hn(()=>n.disconnect())}}_handleIntersectionChange(t){this._isPaused=t.isIntersecting===void 0?t.intersectionRatio===0:!t.isIntersecting,!this._isPaused&&!this._charSizeService.hasValidSize&&this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(t,e,n=!1){if(this._isPaused){this._needsFullRefresh=!0;return}if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(t,e);return}let s=this._syncOutputHandler.flush();s&&(t=Math.min(t,s.start),e=Math.max(e,s.end)),n||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(t,e,this._rowCount)}_renderRows(t,e){if(this._renderer.value){if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(t,e);return}t=Math.min(t,this._rowCount-1),e=Math.min(e,this._rowCount-1),this._renderer.value.renderRows(t,e),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:t,end:e}),this._onRender.fire({start:t,end:e}),this._isNextRenderRedrawOnly=!0}}resize(t,e){this._rowCount=e,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(t){this._renderer.value=t,this._renderer.value&&(this._renderer.value.onRequestRedraw(e=>this.refreshRows(e.start,e.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(t){return this._renderDebouncer.addRefreshCallback(t)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(t,e){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(t,e)):this._renderer.value.handleResize(t,e),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(t,e,n){this._selectionState.start=t,this._selectionState.end=e,this._selectionState.columnSelectMode=n,this._renderer.value?.handleSelectionChanged(t,e,n)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};Kk=xn([Pe(2,zs),Pe(3,yb),Pe(4,fc),Pe(5,Jp),Pe(6,$s),Pe(7,Pa),Pe(8,kh)],Kk);var Xne=class{constructor(t,e,n){this._coreBrowserService=t,this._coreService=e,this._onTimeout=n,this._start=0,this._end=0,this._isBuffering=!1}bufferRows(t,e){this._isBuffering?(this._start=Math.min(this._start,t),this._end=Math.max(this._end,e)):(this._start=t,this._end=e,this._isBuffering=!0),this._timeout===void 0&&(this._timeout=this._coreBrowserService.window.setTimeout(()=>{this._timeout=void 0,this._coreService.decPrivateModes.synchronizedOutput=!1,this._onTimeout()},1e3))}flush(){if(this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0),!this._isBuffering)return;let t={start:this._start,end:this._end};return this._isBuffering=!1,t}dispose(){this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0)}};function Jne(t,e,n,s){let r=n.buffer.x,i=n.buffer.y;if(!n.buffer.hasScrollback)return tse(r,i,t,e,n,s)+bb(i,e,n,s)+nse(r,i,t,e,n,s);let o;if(i===e)return o=r>t?"D":"C",xp(Math.abs(r-t),_p(o,s));o=i>e?"D":"C";let c=Math.abs(i-e),u=ese(i>e?t:r,n)+(c-1)*n.cols+1+Qne(i>e?r:t);return xp(u,_p(o,s))}function Qne(t,e){return t-1}function ese(t,e){return e.cols-t}function tse(t,e,n,s,r,i){return bb(e,s,r,i).length===0?"":xp(hI(t,e,t,e-nc(e,r),!1,r).length,_p("D",i))}function bb(t,e,n,s){let r=t-nc(t,n),i=e-nc(e,n),o=Math.abs(r-i)-sse(t,e,n);return xp(o,_p(uI(t,e),s))}function nse(t,e,n,s,r,i){let o;bb(e,s,r,i).length>0?o=s-nc(s,r):o=e;let c=s,u=rse(t,e,n,s,r,i);return xp(hI(t,o,n,c,u==="C",r).length,_p(u,i))}function sse(t,e,n){let s=0,r=t-nc(t,n),i=e-nc(e,n);for(let o=0;o<Math.abs(r-i);o++){let c=uI(t,e)==="A"?-1:1;n.buffer.lines.get(r+c*o)?.isWrapped&&s++}return s}function nc(t,e){let n=0,s=e.buffer.lines.get(t),r=s?.isWrapped;for(;r&&t>=0&&t<e.rows;)n++,s=e.buffer.lines.get(--t),r=s?.isWrapped;return n}function rse(t,e,n,s,r,i){let o;return bb(n,s,r,i).length>0?o=s-nc(s,r):o=e,t<n&&o<=s||t>=n&&o<s?"C":"D"}function uI(t,e){return t>e?"A":"B"}function hI(t,e,n,s,r,i){let o=t,c=e,u="";for(;(o!==n||c!==s)&&c>=0&&c<i.buffer.lines.length;)o+=r?1:-1,r&&o>i.cols-1?(u+=i.buffer.translateBufferLineToString(c,!1,t,o),o=0,t=0,c++):!r&&o<0&&(u+=i.buffer.translateBufferLineToString(c,!1,0,t+1),o=i.cols-1,t=o,c--);return u+i.buffer.translateBufferLineToString(c,!1,t,o)}function _p(t,e){let n=e?"O":"[";return be.ESC+n+t}function xp(t,e){t=Math.floor(t);let n="";for(let s=0;s<t;s++)n+=e;return n}var ise=class{constructor(t){this._bufferService=t,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:!this.selectionEnd||!this.selectionStart?this.selectionStart:this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let t=this.selectionStart[0]+this.selectionStartLength;return t>this._bufferService.cols?t%this._bufferService.cols===0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(t/this._bufferService.cols)-1]:[t%this._bufferService.cols,this.selectionStart[1]+Math.floor(t/this._bufferService.cols)]:[t,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let t=this.selectionStart[0]+this.selectionStartLength;return t>this._bufferService.cols?[t%this._bufferService.cols,this.selectionStart[1]+Math.floor(t/this._bufferService.cols)]:[Math.max(t,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let t=this.selectionStart,e=this.selectionEnd;return!t||!e?!1:t[1]>e[1]||t[1]===e[1]&&t[0]>e[0]}handleTrim(t){return this.selectionStart&&(this.selectionStart[1]-=t),this.selectionEnd&&(this.selectionEnd[1]-=t),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}};function FR(t,e){if(t.start.y>t.end.y)throw new Error(`Buffer range end (${t.end.x}, ${t.end.y}) cannot be before start (${t.start.x}, ${t.start.y})`);return e*(t.end.y-t.start.y)+(t.end.x-t.start.x+1)}var Gx=50,ase=15,ose=50,lse=500,cse="",use=new RegExp(cse,"g"),Wk=class extends kt{constructor(t,e,n,s,r,i,o,c,u){super(),this._element=t,this._screenElement=e,this._linkifier=n,this._bufferService=s,this._coreService=r,this._mouseService=i,this._optionsService=o,this._renderService=c,this._coreBrowserService=u,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new Jr,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this._register(new Te),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this._register(new Te),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this._register(new Te),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this._register(new Te),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=h=>this._handleMouseMove(h),this._mouseUpListener=h=>this._handleMouseUp(h),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(h=>this._handleTrim(h)),this._register(this._bufferService.buffers.onBufferActivate(h=>this._handleBufferActivate(h))),this.enable(),this._model=new ise(this._bufferService),this._activeSelectionMode=0,this._register(hn(()=>{this._removeMouseDownListeners()})),this._register(this._bufferService.onResize(h=>{h.rowsChanged&&this.clearSelection()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let t=this._model.finalSelectionStart,e=this._model.finalSelectionEnd;return!t||!e?!1:t[0]!==e[0]||t[1]!==e[1]}get selectionText(){let t=this._model.finalSelectionStart,e=this._model.finalSelectionEnd;if(!t||!e)return"";let n=this._bufferService.buffer,s=[];if(this._activeSelectionMode===3){if(t[0]===e[0])return"";let r=t[0]<e[0]?t[0]:e[0],i=t[0]<e[0]?e[0]:t[0];for(let o=t[1];o<=e[1];o++){let c=n.translateBufferLineToString(o,!0,r,i);s.push(c)}}else{let r=t[1]===e[1]?e[0]:void 0;s.push(n.translateBufferLineToString(t[1],!0,t[0],r));for(let i=t[1]+1;i<=e[1]-1;i++){let o=n.lines.get(i),c=n.translateBufferLineToString(i,!0);o?.isWrapped?s[s.length-1]+=c:s.push(c)}if(t[1]!==e[1]){let i=n.lines.get(e[1]),o=n.translateBufferLineToString(e[1],!0,0,e[0]);i&&i.isWrapped?s[s.length-1]+=o:s.push(o)}}return s.map(r=>r.replace(use," ")).join(oI?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(t){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),fN&&t&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(t){let e=this._getMouseBufferCoords(t),n=this._model.finalSelectionStart,s=this._model.finalSelectionEnd;return!n||!s||!e?!1:this._areCoordsInSelection(e,n,s)}isCellInSelection(t,e){let n=this._model.finalSelectionStart,s=this._model.finalSelectionEnd;return!n||!s?!1:this._areCoordsInSelection([t,e],n,s)}_areCoordsInSelection(t,e,n){return t[1]>e[1]&&t[1]<n[1]||e[1]===n[1]&&t[1]===e[1]&&t[0]>=e[0]&&t[0]<n[0]||e[1]<n[1]&&t[1]===n[1]&&t[0]<n[0]||e[1]<n[1]&&t[1]===e[1]&&t[0]>=e[0]}_selectWordAtCursor(t,e){let n=this._linkifier.currentLink?.link?.range;if(n)return this._model.selectionStart=[n.start.x-1,n.start.y-1],this._model.selectionStartLength=FR(n,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let s=this._getMouseBufferCoords(t);return s?(this._selectWordAt(s,e),this._model.selectionEnd=void 0,!0):!1}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(t,e){this._model.clearSelection(),t=Math.max(t,0),e=Math.min(e,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,t],this._model.selectionEnd=[this._bufferService.cols,e],this.refresh(),this._onSelectionChange.fire()}_handleTrim(t){this._model.handleTrim(t)&&this.refresh()}_getMouseBufferCoords(t){let e=this._mouseService.getCoords(t,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(e)return e[0]--,e[1]--,e[1]+=this._bufferService.buffer.ydisp,e}_getMouseEventScrollAmount(t){let e=dN(this._coreBrowserService.window,t,this._screenElement)[1],n=this._renderService.dimensions.css.canvas.height;return e>=0&&e<=n?0:(e>n&&(e-=n),e=Math.min(Math.max(e,-Gx),Gx),e/=Gx,e/Math.abs(e)+Math.round(e*(ase-1)))}shouldForceSelection(t){return Vy?t.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:t.shiftKey}handleMouseDown(t){if(this._mouseDownTimeStamp=t.timeStamp,!(t.button===2&&this.hasSelection)&&t.button===0){if(!this._enabled){if(!this.shouldForceSelection(t))return;t.stopPropagation()}t.preventDefault(),this._dragScrollAmount=0,this._enabled&&t.shiftKey?this._handleIncrementalClick(t):t.detail===1?this._handleSingleClick(t):t.detail===2?this._handleDoubleClick(t):t.detail===3&&this._handleTripleClick(t),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),ose)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(t){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(t))}_handleSingleClick(t){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(t)?3:0,this._model.selectionStart=this._getMouseBufferCoords(t),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let e=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);e&&e.length!==this._model.selectionStart[0]&&e.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(t){this._selectWordAtCursor(t,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(t){let e=this._getMouseBufferCoords(t);e&&(this._activeSelectionMode=2,this._selectLineAt(e[1]))}shouldColumnSelect(t){return t.altKey&&!(Vy&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(t){if(t.stopImmediatePropagation(),!this._model.selectionStart)return;let e=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(t),!this._model.selectionEnd){this.refresh(!0);return}this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(t),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let n=this._bufferService.buffer;if(this._model.selectionEnd[1]<n.lines.length){let s=n.lines.get(this._model.selectionEnd[1]);s&&s.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}(!e||e[0]!==this._model.selectionEnd[0]||e[1]!==this._model.selectionEnd[1])&&this.refresh(!0)}_dragScroll(){if(!(!this._model.selectionEnd||!this._model.selectionStart)&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let t=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(t.ydisp+this._bufferService.rows,t.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=t.ydisp),this.refresh()}}_handleMouseUp(t){let e=t.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&e<lse&&t.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let n=this._mouseService.getCoords(t,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(n&&n[0]!==void 0&&n[1]!==void 0){let s=Jne(n[0]-1,n[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(s,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let t=this._model.finalSelectionStart,e=this._model.finalSelectionEnd,n=!!t&&!!e&&(t[0]!==e[0]||t[1]!==e[1]);if(!n){this._oldHasSelection&&this._fireOnSelectionChange(t,e,n);return}!t||!e||(!this._oldSelectionStart||!this._oldSelectionEnd||t[0]!==this._oldSelectionStart[0]||t[1]!==this._oldSelectionStart[1]||e[0]!==this._oldSelectionEnd[0]||e[1]!==this._oldSelectionEnd[1])&&this._fireOnSelectionChange(t,e,n)}_fireOnSelectionChange(t,e,n){this._oldSelectionStart=t,this._oldSelectionEnd=e,this._oldHasSelection=n,this._onSelectionChange.fire()}_handleBufferActivate(t){this.clearSelection(),this._trimListener.dispose(),this._trimListener=t.activeBuffer.lines.onTrim(e=>this._handleTrim(e))}_convertViewportColToCharacterIndex(t,e){let n=e;for(let s=0;e>=s;s++){let r=t.loadCell(s,this._workCell).getChars().length;this._workCell.getWidth()===0?n--:r>1&&e!==s&&(n+=r-1)}return n}setSelection(t,e,n){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[t,e],this._model.selectionStartLength=n,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(t){this._isClickInSelection(t)||(this._selectWordAtCursor(t,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(t,e,n=!0,s=!0){if(t[0]>=this._bufferService.cols)return;let r=this._bufferService.buffer,i=r.lines.get(t[1]);if(!i)return;let o=r.translateBufferLineToString(t[1],!1),c=this._convertViewportColToCharacterIndex(i,t[0]),u=c,h=t[0]-c,m=0,p=0,y=0,v=0;if(o.charAt(c)===" "){for(;c>0&&o.charAt(c-1)===" ";)c--;for(;u<o.length&&o.charAt(u+1)===" ";)u++}else{let S=t[0],k=t[0];i.getWidth(S)===0&&(m++,S--),i.getWidth(k)===2&&(p++,k++);let C=i.getString(k).length;for(C>1&&(v+=C-1,u+=C-1);S>0&&c>0&&!this._isCharWordSeparator(i.loadCell(S-1,this._workCell));){i.loadCell(S-1,this._workCell);let N=this._workCell.getChars().length;this._workCell.getWidth()===0?(m++,S--):N>1&&(y+=N-1,c-=N-1),c--,S--}for(;k<i.length&&u+1<o.length&&!this._isCharWordSeparator(i.loadCell(k+1,this._workCell));){i.loadCell(k+1,this._workCell);let N=this._workCell.getChars().length;this._workCell.getWidth()===2?(p++,k++):N>1&&(v+=N-1,u+=N-1),u++,k++}}u++;let x=c+h-m+y,_=Math.min(this._bufferService.cols,u-c+m+p-y-v);if(!(!e&&o.slice(c,u).trim()==="")){if(n&&x===0&&i.getCodePoint(0)!==32){let S=r.lines.get(t[1]-1);if(S&&i.isWrapped&&S.getCodePoint(this._bufferService.cols-1)!==32){let k=this._getWordAt([this._bufferService.cols-1,t[1]-1],!1,!0,!1);if(k){let C=this._bufferService.cols-k.start;x-=C,_+=C}}}if(s&&x+_===this._bufferService.cols&&i.getCodePoint(this._bufferService.cols-1)!==32){let S=r.lines.get(t[1]+1);if(S?.isWrapped&&S.getCodePoint(0)!==32){let k=this._getWordAt([0,t[1]+1],!1,!1,!0);k&&(_+=k.length)}}return{start:x,length:_}}}_selectWordAt(t,e){let n=this._getWordAt(t,e);if(n){for(;n.start<0;)n.start+=this._bufferService.cols,t[1]--;this._model.selectionStart=[n.start,t[1]],this._model.selectionStartLength=n.length}}_selectToWordAt(t){let e=this._getWordAt(t,!0);if(e){let n=t[1];for(;e.start<0;)e.start+=this._bufferService.cols,n--;if(!this._model.areSelectionValuesReversed())for(;e.start+e.length>this._bufferService.cols;)e.length-=this._bufferService.cols,n++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?e.start:e.start+e.length,n]}}_isCharWordSeparator(t){return t.getWidth()===0?!1:this._optionsService.rawOptions.wordSeparator.indexOf(t.getChars())>=0}_selectLineAt(t){let e=this._bufferService.buffer.getWrappedRangeForLine(t),n={start:{x:0,y:e.first},end:{x:this._bufferService.cols-1,y:e.last}};this._model.selectionStart=[0,e.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=FR(n,this._bufferService.cols)}};Wk=xn([Pe(3,$s),Pe(4,fc),Pe(5,iN),Pe(6,zs),Pe(7,$a),Pe(8,Pa)],Wk);var VR=class{constructor(){this._data={}}set(t,e,n){this._data[t]||(this._data[t]={}),this._data[t][e]=n}get(t,e){return this._data[t]?this._data[t][e]:void 0}clear(){this._data={}}},qR=class{constructor(){this._color=new VR,this._css=new VR}setCss(t,e,n){this._css.set(t,e,n)}getCss(t,e){return this._css.get(t,e)}setColor(t,e,n){this._color.set(t,e,n)}getColor(t,e){return this._color.get(t,e)}clear(){this._color.clear(),this._css.clear()}},$n=Object.freeze((()=>{let t=[gn.toColor("#2e3436"),gn.toColor("#cc0000"),gn.toColor("#4e9a06"),gn.toColor("#c4a000"),gn.toColor("#3465a4"),gn.toColor("#75507b"),gn.toColor("#06989a"),gn.toColor("#d3d7cf"),gn.toColor("#555753"),gn.toColor("#ef2929"),gn.toColor("#8ae234"),gn.toColor("#fce94f"),gn.toColor("#729fcf"),gn.toColor("#ad7fa8"),gn.toColor("#34e2e2"),gn.toColor("#eeeeec")],e=[0,95,135,175,215,255];for(let n=0;n<216;n++){let s=e[n/36%6|0],r=e[n/6%6|0],i=e[n%6];t.push({css:Bn.toCss(s,r,i),rgba:Bn.toRgba(s,r,i)})}for(let n=0;n<24;n++){let s=8+n*10;t.push({css:Bn.toCss(s,s,s),rgba:Bn.toRgba(s,s,s)})}return t})()),pl=gn.toColor("#ffffff"),mf=gn.toColor("#000000"),KR=gn.toColor("#ffffff"),WR=mf,Dd={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117},hse=pl,Gk=class extends kt{constructor(t){super(),this._optionsService=t,this._contrastCache=new qR,this._halfContrastCache=new qR,this._onChangeColors=this._register(new Te),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:pl,background:mf,cursor:KR,cursorAccent:WR,selectionForeground:void 0,selectionBackgroundTransparent:Dd,selectionBackgroundOpaque:rn.blend(mf,Dd),selectionInactiveBackgroundTransparent:Dd,selectionInactiveBackgroundOpaque:rn.blend(mf,Dd),scrollbarSliderBackground:rn.opacity(pl,.2),scrollbarSliderHoverBackground:rn.opacity(pl,.4),scrollbarSliderActiveBackground:rn.opacity(pl,.5),overviewRulerBorder:pl,ansi:$n.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this._register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this._register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}get colors(){return this._colors}_setTheme(t={}){let e=this._colors;if(e.foreground=Yt(t.foreground,pl),e.background=Yt(t.background,mf),e.cursor=rn.blend(e.background,Yt(t.cursor,KR)),e.cursorAccent=rn.blend(e.background,Yt(t.cursorAccent,WR)),e.selectionBackgroundTransparent=Yt(t.selectionBackground,Dd),e.selectionBackgroundOpaque=rn.blend(e.background,e.selectionBackgroundTransparent),e.selectionInactiveBackgroundTransparent=Yt(t.selectionInactiveBackground,e.selectionBackgroundTransparent),e.selectionInactiveBackgroundOpaque=rn.blend(e.background,e.selectionInactiveBackgroundTransparent),e.selectionForeground=t.selectionForeground?Yt(t.selectionForeground,zR):void 0,e.selectionForeground===zR&&(e.selectionForeground=void 0),rn.isOpaque(e.selectionBackgroundTransparent)&&(e.selectionBackgroundTransparent=rn.opacity(e.selectionBackgroundTransparent,.3)),rn.isOpaque(e.selectionInactiveBackgroundTransparent)&&(e.selectionInactiveBackgroundTransparent=rn.opacity(e.selectionInactiveBackgroundTransparent,.3)),e.scrollbarSliderBackground=Yt(t.scrollbarSliderBackground,rn.opacity(e.foreground,.2)),e.scrollbarSliderHoverBackground=Yt(t.scrollbarSliderHoverBackground,rn.opacity(e.foreground,.4)),e.scrollbarSliderActiveBackground=Yt(t.scrollbarSliderActiveBackground,rn.opacity(e.foreground,.5)),e.overviewRulerBorder=Yt(t.overviewRulerBorder,hse),e.ansi=$n.slice(),e.ansi[0]=Yt(t.black,$n[0]),e.ansi[1]=Yt(t.red,$n[1]),e.ansi[2]=Yt(t.green,$n[2]),e.ansi[3]=Yt(t.yellow,$n[3]),e.ansi[4]=Yt(t.blue,$n[4]),e.ansi[5]=Yt(t.magenta,$n[5]),e.ansi[6]=Yt(t.cyan,$n[6]),e.ansi[7]=Yt(t.white,$n[7]),e.ansi[8]=Yt(t.brightBlack,$n[8]),e.ansi[9]=Yt(t.brightRed,$n[9]),e.ansi[10]=Yt(t.brightGreen,$n[10]),e.ansi[11]=Yt(t.brightYellow,$n[11]),e.ansi[12]=Yt(t.brightBlue,$n[12]),e.ansi[13]=Yt(t.brightMagenta,$n[13]),e.ansi[14]=Yt(t.brightCyan,$n[14]),e.ansi[15]=Yt(t.brightWhite,$n[15]),t.extendedAnsi){let n=Math.min(e.ansi.length-16,t.extendedAnsi.length);for(let s=0;s<n;s++)e.ansi[s+16]=Yt(t.extendedAnsi[s],$n[s+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(t){this._restoreColor(t),this._onChangeColors.fire(this.colors)}_restoreColor(t){if(t===void 0){for(let e=0;e<this._restoreColors.ansi.length;++e)this._colors.ansi[e]=this._restoreColors.ansi[e];return}switch(t){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[t]=this._restoreColors.ansi[t]}}modifyColors(t){t(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};Gk=xn([Pe(0,zs)],Gk);function Yt(t,e){if(t!==void 0)try{return gn.toColor(t)}catch{}return e}var dse=class{constructor(...t){this._entries=new Map;for(let[e,n]of t)this.set(e,n)}set(t,e){let n=this._entries.get(t);return this._entries.set(t,e),n}forEach(t){for(let[e,n]of this._entries.entries())t(e,n)}has(t){return this._entries.has(t)}get(t){return this._entries.get(t)}},fse=class{constructor(){this._services=new dse,this._services.set(rN,this)}setService(t,e){this._services.set(t,e)}getService(t){return this._services.get(t)}createInstance(t,...e){let n=ate(t).sort((i,o)=>i.index-o.index),s=[];for(let i of n){let o=this._services.get(i.id);if(!o)throw new Error(`[createInstance] ${t.name} depends on UNKNOWN service ${i.id._id}.`);s.push(o)}let r=n.length>0?n[0].index:e.length;if(e.length!==r)throw new Error(`[createInstance] First service dependency of ${t.name} at position ${r+1} conflicts with ${e.length} static arguments`);return new t(...e,...s)}},pse={trace:0,debug:1,info:2,warn:3,error:4,off:5},mse="xterm.js: ",Yk=class extends kt{constructor(t){super(),this._optionsService=t,this._logLevel=5,this._updateLogLevel(),this._register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel()))}get logLevel(){return this._logLevel}_updateLogLevel(){this._logLevel=pse[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(t){for(let e=0;e<t.length;e++)typeof t[e]=="function"&&(t[e]=t[e]())}_log(t,e,n){this._evalLazyOptionalParams(n),t.call(console,(this._optionsService.options.logger?"":mse)+e,...n)}trace(t,...e){this._logLevel<=0&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,t,e)}debug(t,...e){this._logLevel<=1&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,t,e)}info(t,...e){this._logLevel<=2&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,t,e)}warn(t,...e){this._logLevel<=3&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,t,e)}error(t,...e){this._logLevel<=4&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,t,e)}};Yk=xn([Pe(0,zs)],Yk);var GR=class extends kt{constructor(t){super(),this._maxLength=t,this.onDeleteEmitter=this._register(new Te),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this._register(new Te),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this._register(new Te),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(t){if(this._maxLength===t)return;let e=new Array(t);for(let n=0;n<Math.min(t,this.length);n++)e[n]=this._array[this._getCyclicIndex(n)];this._array=e,this._maxLength=t,this._startIndex=0}get length(){return this._length}set length(t){if(t>this._length)for(let e=this._length;e<t;e++)this._array[e]=void 0;this._length=t}get(t){return this._array[this._getCyclicIndex(t)]}set(t,e){this._array[this._getCyclicIndex(t)]=e}push(t){this._array[this._getCyclicIndex(this._length)]=t,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(t,e,...n){if(e){for(let s=t;s<this._length-e;s++)this._array[this._getCyclicIndex(s)]=this._array[this._getCyclicIndex(s+e)];this._length-=e,this.onDeleteEmitter.fire({index:t,amount:e})}for(let s=this._length-1;s>=t;s--)this._array[this._getCyclicIndex(s+n.length)]=this._array[this._getCyclicIndex(s)];for(let s=0;s<n.length;s++)this._array[this._getCyclicIndex(t+s)]=n[s];if(n.length&&this.onInsertEmitter.fire({index:t,amount:n.length}),this._length+n.length>this._maxLength){let s=this._length+n.length-this._maxLength;this._startIndex+=s,this._length=this._maxLength,this.onTrimEmitter.fire(s)}else this._length+=n.length}trimStart(t){t>this._length&&(t=this._length),this._startIndex+=t,this._length-=t,this.onTrimEmitter.fire(t)}shiftElements(t,e,n){if(!(e<=0)){if(t<0||t>=this._length)throw new Error("start argument out of range");if(t+n<0)throw new Error("Cannot shift elements in list beyond index 0");if(n>0){for(let r=e-1;r>=0;r--)this.set(t+r+n,this.get(t+r));let s=t+e+n-this._length;if(s>0)for(this._length+=s;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let s=0;s<e;s++)this.set(t+s+n,this.get(t+s))}}_getCyclicIndex(t){return(this._startIndex+t)%this._maxLength}},St=3,Dn=Object.freeze(new Xp),Gg=0,Yx=2,gf=class dI{constructor(e,n,s=!1){this.isWrapped=s,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(e*St);let r=n||Jr.fromCharData([0,RL,1,0]);for(let i=0;i<e;++i)this.setCell(i,r);this.length=e}get(e){let n=this._data[e*St+0],s=n&2097151;return[this._data[e*St+1],n&2097152?this._combined[e]:s?bo(s):"",n>>22,n&2097152?this._combined[e].charCodeAt(this._combined[e].length-1):s]}set(e,n){this._data[e*St+1]=n[0],n[1].length>1?(this._combined[e]=n[1],this._data[e*St+0]=e|2097152|n[2]<<22):this._data[e*St+0]=n[1].charCodeAt(0)|n[2]<<22}getWidth(e){return this._data[e*St+0]>>22}hasWidth(e){return this._data[e*St+0]&12582912}getFg(e){return this._data[e*St+1]}getBg(e){return this._data[e*St+2]}hasContent(e){return this._data[e*St+0]&4194303}getCodePoint(e){let n=this._data[e*St+0];return n&2097152?this._combined[e].charCodeAt(this._combined[e].length-1):n&2097151}isCombined(e){return this._data[e*St+0]&2097152}getString(e){let n=this._data[e*St+0];return n&2097152?this._combined[e]:n&2097151?bo(n&2097151):""}isProtected(e){return this._data[e*St+2]&536870912}loadCell(e,n){return Gg=e*St,n.content=this._data[Gg+0],n.fg=this._data[Gg+1],n.bg=this._data[Gg+2],n.content&2097152&&(n.combinedData=this._combined[e]),n.bg&268435456&&(n.extended=this._extendedAttrs[e]),n}setCell(e,n){n.content&2097152&&(this._combined[e]=n.combinedData),n.bg&268435456&&(this._extendedAttrs[e]=n.extended),this._data[e*St+0]=n.content,this._data[e*St+1]=n.fg,this._data[e*St+2]=n.bg}setCellFromCodepoint(e,n,s,r){r.bg&268435456&&(this._extendedAttrs[e]=r.extended),this._data[e*St+0]=n|s<<22,this._data[e*St+1]=r.fg,this._data[e*St+2]=r.bg}addCodepointToCell(e,n,s){let r=this._data[e*St+0];r&2097152?this._combined[e]+=bo(n):r&2097151?(this._combined[e]=bo(r&2097151)+bo(n),r&=-2097152,r|=2097152):r=n|1<<22,s&&(r&=-12582913,r|=s<<22),this._data[e*St+0]=r}insertCells(e,n,s){if(e%=this.length,e&&this.getWidth(e-1)===2&&this.setCellFromCodepoint(e-1,0,1,s),n<this.length-e){let r=new Jr;for(let i=this.length-e-n-1;i>=0;--i)this.setCell(e+n+i,this.loadCell(e+i,r));for(let i=0;i<n;++i)this.setCell(e+i,s)}else for(let r=e;r<this.length;++r)this.setCell(r,s);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,s)}deleteCells(e,n,s){if(e%=this.length,n<this.length-e){let r=new Jr;for(let i=0;i<this.length-e-n;++i)this.setCell(e+i,this.loadCell(e+n+i,r));for(let i=this.length-n;i<this.length;++i)this.setCell(i,s)}else for(let r=e;r<this.length;++r)this.setCell(r,s);e&&this.getWidth(e-1)===2&&this.setCellFromCodepoint(e-1,0,1,s),this.getWidth(e)===0&&!this.hasContent(e)&&this.setCellFromCodepoint(e,0,1,s)}replaceCells(e,n,s,r=!1){if(r){for(e&&this.getWidth(e-1)===2&&!this.isProtected(e-1)&&this.setCellFromCodepoint(e-1,0,1,s),n<this.length&&this.getWidth(n-1)===2&&!this.isProtected(n)&&this.setCellFromCodepoint(n,0,1,s);e<n&&e<this.length;)this.isProtected(e)||this.setCell(e,s),e++;return}for(e&&this.getWidth(e-1)===2&&this.setCellFromCodepoint(e-1,0,1,s),n<this.length&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n,0,1,s);e<n&&e<this.length;)this.setCell(e++,s)}resize(e,n){if(e===this.length)return this._data.length*4*Yx<this._data.buffer.byteLength;let s=e*St;if(e>this.length){if(this._data.buffer.byteLength>=s*4)this._data=new Uint32Array(this._data.buffer,0,s);else{let r=new Uint32Array(s);r.set(this._data),this._data=r}for(let r=this.length;r<e;++r)this.setCell(r,n)}else{this._data=this._data.subarray(0,s);let r=Object.keys(this._combined);for(let o=0;o<r.length;o++){let c=parseInt(r[o],10);c>=e&&delete this._combined[c]}let i=Object.keys(this._extendedAttrs);for(let o=0;o<i.length;o++){let c=parseInt(i[o],10);c>=e&&delete this._extendedAttrs[c]}}return this.length=e,s*4*Yx<this._data.buffer.byteLength}cleanupMemory(){if(this._data.length*4*Yx<this._data.buffer.byteLength){let e=new Uint32Array(this._data.length);return e.set(this._data),this._data=e,1}return 0}fill(e,n=!1){if(n){for(let s=0;s<this.length;++s)this.isProtected(s)||this.setCell(s,e);return}this._combined={},this._extendedAttrs={};for(let s=0;s<this.length;++s)this.setCell(s,e)}copyFrom(e){this.length!==e.length?this._data=new Uint32Array(e._data):this._data.set(e._data),this.length=e.length,this._combined={};for(let n in e._combined)this._combined[n]=e._combined[n];this._extendedAttrs={};for(let n in e._extendedAttrs)this._extendedAttrs[n]=e._extendedAttrs[n];this.isWrapped=e.isWrapped}clone(){let e=new dI(0);e._data=new Uint32Array(this._data),e.length=this.length;for(let n in this._combined)e._combined[n]=this._combined[n];for(let n in this._extendedAttrs)e._extendedAttrs[n]=this._extendedAttrs[n];return e.isWrapped=this.isWrapped,e}getTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(this._data[e*St+0]&4194303)return e+(this._data[e*St+0]>>22);return 0}getNoBgTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(this._data[e*St+0]&4194303||this._data[e*St+2]&50331648)return e+(this._data[e*St+0]>>22);return 0}copyCellsFrom(e,n,s,r,i){let o=e._data;if(i)for(let u=r-1;u>=0;u--){for(let h=0;h<St;h++)this._data[(s+u)*St+h]=o[(n+u)*St+h];o[(n+u)*St+2]&268435456&&(this._extendedAttrs[s+u]=e._extendedAttrs[n+u])}else for(let u=0;u<r;u++){for(let h=0;h<St;h++)this._data[(s+u)*St+h]=o[(n+u)*St+h];o[(n+u)*St+2]&268435456&&(this._extendedAttrs[s+u]=e._extendedAttrs[n+u])}let c=Object.keys(e._combined);for(let u=0;u<c.length;u++){let h=parseInt(c[u],10);h>=n&&(this._combined[h-n+s]=e._combined[h])}}translateToString(e,n,s,r){n=n??0,s=s??this.length,e&&(s=Math.min(s,this.getTrimmedLength())),r&&(r.length=0);let i="";for(;n<s;){let o=this._data[n*St+0],c=o&2097151,u=o&2097152?this._combined[n]:c?bo(c):No;if(i+=u,r)for(let h=0;h<u.length;++h)r.push(n);n+=o>>22||1}return r&&r.push(n),i}};function gse(t,e,n,s,r,i){let o=[];for(let c=0;c<t.length-1;c++){let u=c,h=t.get(++u);if(!h.isWrapped)continue;let m=[t.get(c)];for(;u<t.length&&h.isWrapped;)m.push(h),h=t.get(++u);if(!i&&s>=c&&s<u){c+=m.length-1;continue}let p=0,y=wp(m,p,e),v=1,x=0;for(;v<m.length;){let S=wp(m,v,e),k=S-x,C=n-y,N=Math.min(k,C);m[p].copyCellsFrom(m[v],x,y,N,!1),y+=N,y===n&&(p++,y=0),x+=N,x===S&&(v++,x=0),y===0&&p!==0&&m[p-1].getWidth(n-1)===2&&(m[p].copyCellsFrom(m[p-1],n-1,y++,1,!1),m[p-1].setCell(n-1,r))}m[p].replaceCells(y,n,r);let _=0;for(let S=m.length-1;S>0&&(S>p||m[S].getTrimmedLength()===0);S--)_++;_>0&&(o.push(c+m.length-_),o.push(_)),c+=m.length-1}return o}function yse(t,e){let n=[],s=0,r=e[s],i=0;for(let o=0;o<t.length;o++)if(r===o){let c=e[++s];t.onDeleteEmitter.fire({index:o-i,amount:c}),o+=c-1,i+=c,r=e[++s]}else n.push(o);return{layout:n,countRemoved:i}}function vse(t,e){let n=[];for(let s=0;s<e.length;s++)n.push(t.get(e[s]));for(let s=0;s<n.length;s++)t.set(s,n[s]);t.length=e.length}function bse(t,e,n){let s=[],r=t.map((u,h)=>wp(t,h,e)).reduce((u,h)=>u+h),i=0,o=0,c=0;for(;c<r;){if(r-c<n){s.push(r-c);break}i+=n;let u=wp(t,o,e);i>u&&(i-=u,o++);let h=t[o].getWidth(i-1)===2;h&&i--;let m=h?n-1:n;s.push(m),c+=m}return s}function wp(t,e,n){if(e===t.length-1)return t[e].getTrimmedLength();let s=!t[e].hasContent(n-1)&&t[e].getWidth(n-1)===1,r=t[e+1].getWidth(0)===2;return s&&r?n-1:n}var fI=class pI{constructor(e){this.line=e,this.isDisposed=!1,this._disposables=[],this._id=pI._nextId++,this._onDispose=this.register(new Te),this.onDispose=this._onDispose.event}get id(){return this._id}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),tc(this._disposables),this._disposables.length=0)}register(e){return this._disposables.push(e),e}};fI._nextId=1;var _se=fI,qn={},ml=qn.B;qn[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""};qn.A={"#":""};qn.B=void 0;qn[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""};qn.C=qn[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};qn.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};qn.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};qn.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};qn.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""};qn.E=qn[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};qn.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""};qn.H=qn[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};qn["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""};var YR=4294967295,ZR=class{constructor(t,e,n){this._hasScrollback=t,this._optionsService=e,this._bufferService=n,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=Dn.clone(),this.savedCharset=ml,this.markers=[],this._nullCell=Jr.fromCharData([0,RL,1,0]),this._whitespaceCell=Jr.fromCharData([0,No,1,32]),this._isClearing=!1,this._memoryCleanupQueue=new qy,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new GR(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(t){return t?(this._nullCell.fg=t.fg,this._nullCell.bg=t.bg,this._nullCell.extended=t.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new Uy),this._nullCell}getWhitespaceCell(t){return t?(this._whitespaceCell.fg=t.fg,this._whitespaceCell.bg=t.bg,this._whitespaceCell.extended=t.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new Uy),this._whitespaceCell}getBlankLine(t,e){return new gf(this._bufferService.cols,this.getNullCell(t),e)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let t=this.ybase+this.y-this.ydisp;return t>=0&&t<this._rows}_getCorrectBufferLength(t){if(!this._hasScrollback)return t;let e=t+this._optionsService.rawOptions.scrollback;return e>YR?YR:e}fillViewportRows(t){if(this.lines.length===0){t===void 0&&(t=Dn);let e=this._rows;for(;e--;)this.lines.push(this.getBlankLine(t))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new GR(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(t,e){let n=this.getNullCell(Dn),s=0,r=this._getCorrectBufferLength(e);if(r>this.lines.maxLength&&(this.lines.maxLength=r),this.lines.length>0){if(this._cols<t)for(let o=0;o<this.lines.length;o++)s+=+this.lines.get(o).resize(t,n);let i=0;if(this._rows<e)for(let o=this._rows;o<e;o++)this.lines.length<e+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new gf(t,n)):this.ybase>0&&this.lines.length<=this.ybase+this.y+i+1?(this.ybase--,i++,this.ydisp>0&&this.ydisp--):this.lines.push(new gf(t,n)));else for(let o=this._rows;o>e;o--)this.lines.length>e+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(r<this.lines.maxLength){let o=this.lines.length-r;o>0&&(this.lines.trimStart(o),this.ybase=Math.max(this.ybase-o,0),this.ydisp=Math.max(this.ydisp-o,0),this.savedY=Math.max(this.savedY-o,0)),this.lines.maxLength=r}this.x=Math.min(this.x,t-1),this.y=Math.min(this.y,e-1),i&&(this.y+=i),this.savedX=Math.min(this.savedX,t-1),this.scrollTop=0}if(this.scrollBottom=e-1,this._isReflowEnabled&&(this._reflow(t,e),this._cols>t))for(let i=0;i<this.lines.length;i++)s+=+this.lines.get(i).resize(t,n);this._cols=t,this._rows=e,this._memoryCleanupQueue.clear(),s>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let t=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,t=!1);let e=0;for(;this._memoryCleanupPosition<this.lines.length;)if(e+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),e>100)return!0;return t}get _isReflowEnabled(){let t=this._optionsService.rawOptions.windowsPty;return t&&t.buildNumber?this._hasScrollback&&t.backend==="conpty"&&t.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(t,e){this._cols!==t&&(t>this._cols?this._reflowLarger(t,e):this._reflowSmaller(t,e))}_reflowLarger(t,e){let n=this._optionsService.rawOptions.reflowCursorLine,s=gse(this.lines,this._cols,t,this.ybase+this.y,this.getNullCell(Dn),n);if(s.length>0){let r=yse(this.lines,s);vse(this.lines,r.layout),this._reflowLargerAdjustViewport(t,e,r.countRemoved)}}_reflowLargerAdjustViewport(t,e,n){let s=this.getNullCell(Dn),r=n;for(;r-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<e&&this.lines.push(new gf(t,s))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-n,0)}_reflowSmaller(t,e){let n=this._optionsService.rawOptions.reflowCursorLine,s=this.getNullCell(Dn),r=[],i=0;for(let o=this.lines.length-1;o>=0;o--){let c=this.lines.get(o);if(!c||!c.isWrapped&&c.getTrimmedLength()<=t)continue;let u=[c];for(;c.isWrapped&&o>0;)c=this.lines.get(--o),u.unshift(c);if(!n){let N=this.ybase+this.y;if(N>=o&&N<o+u.length)continue}let h=u[u.length-1].getTrimmedLength(),m=bse(u,this._cols,t),p=m.length-u.length,y;this.ybase===0&&this.y!==this.lines.length-1?y=Math.max(0,this.y-this.lines.maxLength+p):y=Math.max(0,this.lines.length-this.lines.maxLength+p);let v=[];for(let N=0;N<p;N++){let R=this.getBlankLine(Dn,!0);v.push(R)}v.length>0&&(r.push({start:o+u.length+i,newLines:v}),i+=v.length),u.push(...v);let x=m.length-1,_=m[x];_===0&&(x--,_=m[x]);let S=u.length-p-1,k=h;for(;S>=0;){let N=Math.min(k,_);if(u[x]===void 0)break;if(u[x].copyCellsFrom(u[S],k-N,_-N,N,!0),_-=N,_===0&&(x--,_=m[x]),k-=N,k===0){S--;let R=Math.max(S,0);k=wp(u,R,this._cols)}}for(let N=0;N<u.length;N++)m[N]<t&&u[N].setCell(m[N],s);let C=p-y;for(;C-- >0;)this.ybase===0?this.y<e-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+i)-e&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+p,this.ybase+e-1)}if(r.length>0){let o=[],c=[];for(let _=0;_<this.lines.length;_++)c.push(this.lines.get(_));let u=this.lines.length,h=u-1,m=0,p=r[m];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+i);let y=0;for(let _=Math.min(this.lines.maxLength-1,u+i-1);_>=0;_--)if(p&&p.start>h+y){for(let S=p.newLines.length-1;S>=0;S--)this.lines.set(_--,p.newLines[S]);_++,o.push({index:h+1,amount:p.newLines.length}),y+=p.newLines.length,p=r[++m]}else this.lines.set(_,c[h--]);let v=0;for(let _=o.length-1;_>=0;_--)o[_].index+=v,this.lines.onInsertEmitter.fire(o[_]),v+=o[_].amount;let x=Math.max(0,u+i-this.lines.maxLength);x>0&&this.lines.onTrimEmitter.fire(x)}}translateBufferLineToString(t,e,n=0,s){let r=this.lines.get(t);return r?r.translateToString(e,n,s):""}getWrappedRangeForLine(t){let e=t,n=t;for(;e>0&&this.lines.get(e).isWrapped;)e--;for(;n+1<this.lines.length&&this.lines.get(n+1).isWrapped;)n++;return{first:e,last:n}}setupTabStops(t){for(t!=null?this.tabs[t]||(t=this.prevStop(t)):(this.tabs={},t=0);t<this._cols;t+=this._optionsService.rawOptions.tabStopWidth)this.tabs[t]=!0}prevStop(t){for(t==null&&(t=this.x);!this.tabs[--t]&&t>0;);return t>=this._cols?this._cols-1:t<0?0:t}nextStop(t){for(t==null&&(t=this.x);!this.tabs[++t]&&t<this._cols;);return t>=this._cols?this._cols-1:t<0?0:t}clearMarkers(t){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].line===t&&(this.markers[e].dispose(),this.markers.splice(e--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].dispose();this.markers.length=0,this._isClearing=!1}addMarker(t){let e=new _se(t);return this.markers.push(e),e.register(this.lines.onTrim(n=>{e.line-=n,e.line<0&&e.dispose()})),e.register(this.lines.onInsert(n=>{e.line>=n.index&&(e.line+=n.amount)})),e.register(this.lines.onDelete(n=>{e.line>=n.index&&e.line<n.index+n.amount&&e.dispose(),e.line>n.index&&(e.line-=n.amount)})),e.register(e.onDispose(()=>this._removeMarker(e))),e}_removeMarker(t){this._isClearing||this.markers.splice(this.markers.indexOf(t),1)}},xse=class extends kt{constructor(t,e){super(),this._optionsService=t,this._bufferService=e,this._onBufferActivate=this._register(new Te),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this._register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this._register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new ZR(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new ZR(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(t){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(t),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(t,e){this._normal.resize(t,e),this._alt.resize(t,e),this.setupTabStops(t)}setupTabStops(t){this._normal.setupTabStops(t),this._alt.setupTabStops(t)}},mI=2,gI=1,Zk=class extends kt{constructor(t){super(),this.isUserScrolling=!1,this._onResize=this._register(new Te),this.onResize=this._onResize.event,this._onScroll=this._register(new Te),this.onScroll=this._onScroll.event,this.cols=Math.max(t.rawOptions.cols||0,mI),this.rows=Math.max(t.rawOptions.rows||0,gI),this.buffers=this._register(new xse(t,this)),this._register(this.buffers.onBufferActivate(e=>{this._onScroll.fire(e.activeBuffer.ydisp)}))}get buffer(){return this.buffers.active}resize(t,e){let n=this.cols!==t,s=this.rows!==e;this.cols=t,this.rows=e,this.buffers.resize(t,e),this._onResize.fire({cols:t,rows:e,colsChanged:n,rowsChanged:s})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(t,e=!1){let n=this.buffer,s;s=this._cachedBlankLine,(!s||s.length!==this.cols||s.getFg(0)!==t.fg||s.getBg(0)!==t.bg)&&(s=n.getBlankLine(t,e),this._cachedBlankLine=s),s.isWrapped=e;let r=n.ybase+n.scrollTop,i=n.ybase+n.scrollBottom;if(n.scrollTop===0){let o=n.lines.isFull;i===n.lines.length-1?o?n.lines.recycle().copyFrom(s):n.lines.push(s.clone()):n.lines.splice(i+1,0,s.clone()),o?this.isUserScrolling&&(n.ydisp=Math.max(n.ydisp-1,0)):(n.ybase++,this.isUserScrolling||n.ydisp++)}else{let o=i-r+1;n.lines.shiftElements(r+1,o-1,-1),n.lines.set(i,s.clone())}this.isUserScrolling||(n.ydisp=n.ybase),this._onScroll.fire(n.ydisp)}scrollLines(t,e){let n=this.buffer;if(t<0){if(n.ydisp===0)return;this.isUserScrolling=!0}else t+n.ydisp>=n.ybase&&(this.isUserScrolling=!1);let s=n.ydisp;n.ydisp=Math.max(Math.min(n.ydisp+t,n.ybase),0),s!==n.ydisp&&(e||this._onScroll.fire(n.ydisp))}};Zk=xn([Pe(0,zs)],Zk);var iu={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnEraseInDisplay:!1,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},reflowCursorLine:!1,rescaleOverlappingGlyphs:!1,rightClickSelectsWord:Vy,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRuler:{}},wse=["normal","bold","100","200","300","400","500","600","700","800","900"],Sse=class extends kt{constructor(t){super(),this._onOptionChange=this._register(new Te),this.onOptionChange=this._onOptionChange.event;let e={...iu};for(let n in t)if(n in e)try{let s=t[n];e[n]=this._sanitizeAndValidateOption(n,s)}catch(s){console.error(s)}this.rawOptions=e,this.options={...e},this._setupOptions(),this._register(hn(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(t,e){return this.onOptionChange(n=>{n===t&&e(this.rawOptions[t])})}onMultipleOptionChange(t,e){return this.onOptionChange(n=>{t.indexOf(n)!==-1&&e()})}_setupOptions(){let t=n=>{if(!(n in iu))throw new Error(`No option with key "${n}"`);return this.rawOptions[n]},e=(n,s)=>{if(!(n in iu))throw new Error(`No option with key "${n}"`);s=this._sanitizeAndValidateOption(n,s),this.rawOptions[n]!==s&&(this.rawOptions[n]=s,this._onOptionChange.fire(n))};for(let n in this.rawOptions){let s={get:t.bind(this,n),set:e.bind(this,n)};Object.defineProperty(this.options,n,s)}}_sanitizeAndValidateOption(t,e){switch(t){case"cursorStyle":if(e||(e=iu[t]),!kse(e))throw new Error(`"${e}" is not a valid value for ${t}`);break;case"wordSeparator":e||(e=iu[t]);break;case"fontWeight":case"fontWeightBold":if(typeof e=="number"&&1<=e&&e<=1e3)break;e=wse.includes(e)?e:iu[t];break;case"cursorWidth":e=Math.floor(e);case"lineHeight":case"tabStopWidth":if(e<1)throw new Error(`${t} cannot be less than 1, value: ${e}`);break;case"minimumContrastRatio":e=Math.max(1,Math.min(21,Math.round(e*10)/10));break;case"scrollback":if(e=Math.min(e,4294967295),e<0)throw new Error(`${t} cannot be less than 0, value: ${e}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(e<=0)throw new Error(`${t} cannot be less than or equal to 0, value: ${e}`);break;case"rows":case"cols":if(!e&&e!==0)throw new Error(`${t} must be numeric, value: ${e}`);break;case"windowsPty":e=e??{};break}return e}};function kse(t){return t==="block"||t==="underline"||t==="bar"}function yf(t,e=5){if(typeof t!="object")return t;let n=Array.isArray(t)?[]:{};for(let s in t)n[s]=e<=1?t[s]:t[s]&&yf(t[s],e-1);return n}var XR=Object.freeze({insertMode:!1}),JR=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,cursorBlink:void 0,cursorStyle:void 0,origin:!1,reverseWraparound:!1,sendFocus:!1,synchronizedOutput:!1,wraparound:!0}),Xk=class extends kt{constructor(t,e,n){super(),this._bufferService=t,this._logService=e,this._optionsService=n,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this._register(new Te),this.onData=this._onData.event,this._onUserInput=this._register(new Te),this.onUserInput=this._onUserInput.event,this._onBinary=this._register(new Te),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this._register(new Te),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=yf(XR),this.decPrivateModes=yf(JR)}reset(){this.modes=yf(XR),this.decPrivateModes=yf(JR)}triggerDataEvent(t,e=!1){if(this._optionsService.rawOptions.disableStdin)return;let n=this._bufferService.buffer;e&&this._optionsService.rawOptions.scrollOnUserInput&&n.ybase!==n.ydisp&&this._onRequestScrollToBottom.fire(),e&&this._onUserInput.fire(),this._logService.debug(`sending data "${t}"`),this._logService.trace("sending data (codes)",()=>t.split("").map(s=>s.charCodeAt(0))),this._onData.fire(t)}triggerBinaryEvent(t){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${t}"`),this._logService.trace("sending binary (codes)",()=>t.split("").map(e=>e.charCodeAt(0))),this._onBinary.fire(t))}};Xk=xn([Pe(0,$s),Pe(1,LL),Pe(2,zs)],Xk);var QR={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:t=>t.button===4||t.action!==1?!1:(t.ctrl=!1,t.alt=!1,t.shift=!1,!0)},VT200:{events:19,restrict:t=>t.action!==32},DRAG:{events:23,restrict:t=>!(t.action===32&&t.button===3)},ANY:{events:31,restrict:t=>!0}};function Zx(t,e){let n=(t.ctrl?16:0)|(t.shift?4:0)|(t.alt?8:0);return t.button===4?(n|=64,n|=t.action):(n|=t.button&3,t.button&4&&(n|=64),t.button&8&&(n|=128),t.action===32?n|=32:t.action===0&&!e&&(n|=3)),n}var Xx=String.fromCharCode,eO={DEFAULT:t=>{let e=[Zx(t,!1)+32,t.col+32,t.row+32];return e[0]>255||e[1]>255||e[2]>255?"":`\x1B[M${Xx(e[0])}${Xx(e[1])}${Xx(e[2])}`},SGR:t=>{let e=t.action===0&&t.button!==4?"m":"M";return`\x1B[<${Zx(t,!0)};${t.col};${t.row}${e}`},SGR_PIXELS:t=>{let e=t.action===0&&t.button!==4?"m":"M";return`\x1B[<${Zx(t,!0)};${t.x};${t.y}${e}`}},Jk=class extends kt{constructor(t,e,n){super(),this._bufferService=t,this._coreService=e,this._optionsService=n,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._wheelPartialScroll=0,this._onProtocolChange=this._register(new Te),this.onProtocolChange=this._onProtocolChange.event;for(let s of Object.keys(QR))this.addProtocol(s,QR[s]);for(let s of Object.keys(eO))this.addEncoding(s,eO[s]);this.reset()}addProtocol(t,e){this._protocols[t]=e}addEncoding(t,e){this._encodings[t]=e}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(t){if(!this._protocols[t])throw new Error(`unknown protocol "${t}"`);this._activeProtocol=t,this._onProtocolChange.fire(this._protocols[t].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(t){if(!this._encodings[t])throw new Error(`unknown encoding "${t}"`);this._activeEncoding=t}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null,this._wheelPartialScroll=0}consumeWheelEvent(t,e,n){if(t.deltaY===0||t.shiftKey||e===void 0||n===void 0)return 0;let s=e/n,r=this._applyScrollModifier(t.deltaY,t);return t.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(r/=s+0,Math.abs(t.deltaY)<50&&(r*=.3),this._wheelPartialScroll+=r,r=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(r*=this._bufferService.rows),r}_applyScrollModifier(t,e){return e.altKey||e.ctrlKey||e.shiftKey?t*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:t*this._optionsService.rawOptions.scrollSensitivity}triggerMouseEvent(t){if(t.col<0||t.col>=this._bufferService.cols||t.row<0||t.row>=this._bufferService.rows||t.button===4&&t.action===32||t.button===3&&t.action!==32||t.button!==4&&(t.action===2||t.action===3)||(t.col++,t.row++,t.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,t,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(t))return!1;let e=this._encodings[this._activeEncoding](t);return e&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(e):this._coreService.triggerDataEvent(e,!0)),this._lastEvent=t,!0}explainEvents(t){return{down:!!(t&1),up:!!(t&2),drag:!!(t&4),move:!!(t&8),wheel:!!(t&16)}}_equalEvents(t,e,n){if(n){if(t.x!==e.x||t.y!==e.y)return!1}else if(t.col!==e.col||t.row!==e.row)return!1;return!(t.button!==e.button||t.action!==e.action||t.ctrl!==e.ctrl||t.alt!==e.alt||t.shift!==e.shift)}};Jk=xn([Pe(0,$s),Pe(1,fc),Pe(2,zs)],Jk);var Jx=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],Cse=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],zn;function Nse(t,e){let n=0,s=e.length-1,r;if(t<e[0][0]||t>e[s][1])return!1;for(;s>=n;)if(r=n+s>>1,t>e[r][1])n=r+1;else if(t<e[r][0])s=r-1;else return!0;return!1}var Ese=class{constructor(){if(this.version="6",!zn){zn=new Uint8Array(65536),zn.fill(1),zn[0]=0,zn.fill(0,1,32),zn.fill(0,127,160),zn.fill(2,4352,4448),zn[9001]=2,zn[9002]=2,zn.fill(2,11904,42192),zn[12351]=1,zn.fill(2,44032,55204),zn.fill(2,63744,64256),zn.fill(2,65040,65050),zn.fill(2,65072,65136),zn.fill(2,65280,65377),zn.fill(2,65504,65511);for(let t=0;t<Jx.length;++t)zn.fill(0,Jx[t][0],Jx[t][1]+1)}}wcwidth(t){return t<32?0:t<127?1:t<65536?zn[t]:Nse(t,Cse)?0:t>=131072&&t<=196605||t>=196608&&t<=262141?2:1}charProperties(t,e){let n=this.wcwidth(t),s=n===0&&e!==0;if(s){let r=kl.extractWidth(e);r===0?s=!1:r>n&&(n=r)}return kl.createPropertyValue(0,n,s)}},kl=class C0{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new Te,this.onChange=this._onChange.event;let e=new Ese;this.register(e),this._active=e.version,this._activeProvider=e}static extractShouldJoin(e){return(e&1)!==0}static extractWidth(e){return e>>1&3}static extractCharKind(e){return e>>3}static createPropertyValue(e,n,s=!1){return(e&16777215)<<3|(n&3)<<1|(s?1:0)}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(e){if(!this._providers[e])throw new Error(`unknown Unicode version "${e}"`);this._active=e,this._activeProvider=this._providers[e],this._onChange.fire(e)}register(e){this._providers[e.version]=e}wcwidth(e){return this._activeProvider.wcwidth(e)}getStringCellWidth(e){let n=0,s=0,r=e.length;for(let i=0;i<r;++i){let o=e.charCodeAt(i);if(55296<=o&&o<=56319){if(++i>=r)return n+this.wcwidth(o);let h=e.charCodeAt(i);56320<=h&&h<=57343?o=(o-55296)*1024+h-56320+65536:n+=this.wcwidth(h)}let c=this.charProperties(o,s),u=C0.extractWidth(c);C0.extractShouldJoin(c)&&(u-=C0.extractWidth(s)),n+=u,s=c}return n}charProperties(e,n){return this._activeProvider.charProperties(e,n)}},Ase=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(t){this.glevel=t,this.charset=this._charsets[t]}setgCharset(t,e){this._charsets[t]=e,this.glevel===t&&(this.charset=e)}};function tO(t){let e=t.buffer.lines.get(t.buffer.ybase+t.buffer.y-1)?.get(t.cols-1),n=t.buffer.lines.get(t.buffer.ybase+t.buffer.y);n&&e&&(n.isWrapped=e[3]!==0&&e[3]!==32)}var Bd=2147483647,jse=256,yI=class Qk{constructor(e=32,n=32){if(this.maxLength=e,this.maxSubParamsLength=n,n>jse)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(e),this.length=0,this._subParams=new Int32Array(n),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(e),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}static fromArray(e){let n=new Qk;if(!e.length)return n;for(let s=Array.isArray(e[0])?1:0;s<e.length;++s){let r=e[s];if(Array.isArray(r))for(let i=0;i<r.length;++i)n.addSubParam(r[i]);else n.addParam(r)}return n}clone(){let e=new Qk(this.maxLength,this.maxSubParamsLength);return e.params.set(this.params),e.length=this.length,e._subParams.set(this._subParams),e._subParamsLength=this._subParamsLength,e._subParamsIdx.set(this._subParamsIdx),e._rejectDigits=this._rejectDigits,e._rejectSubDigits=this._rejectSubDigits,e._digitIsSub=this._digitIsSub,e}toArray(){let e=[];for(let n=0;n<this.length;++n){e.push(this.params[n]);let s=this._subParamsIdx[n]>>8,r=this._subParamsIdx[n]&255;r-s>0&&e.push(Array.prototype.slice.call(this._subParams,s,r))}return e}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(e){if(this._digitIsSub=!1,this.length>=this.maxLength){this._rejectDigits=!0;return}if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=e>Bd?Bd:e}addSubParam(e){if(this._digitIsSub=!0,!!this.length){if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength){this._rejectSubDigits=!0;return}if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=e>Bd?Bd:e,this._subParamsIdx[this.length-1]++}}hasSubParams(e){return(this._subParamsIdx[e]&255)-(this._subParamsIdx[e]>>8)>0}getSubParams(e){let n=this._subParamsIdx[e]>>8,s=this._subParamsIdx[e]&255;return s-n>0?this._subParams.subarray(n,s):null}getSubParamsAll(){let e={};for(let n=0;n<this.length;++n){let s=this._subParamsIdx[n]>>8,r=this._subParamsIdx[n]&255;r-s>0&&(e[n]=this._subParams.slice(s,r))}return e}addDigit(e){let n;if(this._rejectDigits||!(n=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let s=this._digitIsSub?this._subParams:this.params,r=s[n-1];s[n-1]=~r?Math.min(r*10+e,Bd):e}},Ld=[],Tse=class{constructor(){this._state=0,this._active=Ld,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(t,e){this._handlers[t]===void 0&&(this._handlers[t]=[]);let n=this._handlers[t];return n.push(e),{dispose:()=>{let s=n.indexOf(e);s!==-1&&n.splice(s,1)}}}clearHandler(t){this._handlers[t]&&delete this._handlers[t]}setHandlerFallback(t){this._handlerFb=t}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=Ld}reset(){if(this._state===2)for(let t=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;t>=0;--t)this._active[t].end(!1);this._stack.paused=!1,this._active=Ld,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||Ld,!this._active.length)this._handlerFb(this._id,"START");else for(let t=this._active.length-1;t>=0;t--)this._active[t].start()}_put(t,e,n){if(!this._active.length)this._handlerFb(this._id,"PUT",gb(t,e,n));else for(let s=this._active.length-1;s>=0;s--)this._active[s].put(t,e,n)}start(){this.reset(),this._state=1}put(t,e,n){if(this._state!==3){if(this._state===1)for(;e<n;){let s=t[e++];if(s===59){this._state=2,this._start();break}if(s<48||57<s){this._state=3;return}this._id===-1&&(this._id=0),this._id=this._id*10+s-48}this._state===2&&n-e>0&&this._put(t,e,n)}}end(t,e=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),!this._active.length)this._handlerFb(this._id,"END",t);else{let n=!1,s=this._active.length-1,r=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,n=e,r=this._stack.fallThrough,this._stack.paused=!1),!r&&n===!1){for(;s>=0&&(n=this._active[s].end(t),n!==!0);s--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,n;s--}for(;s>=0;s--)if(n=this._active[s].end(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,n}this._active=Ld,this._id=-1,this._state=0}}},pr=class{constructor(t){this._handler=t,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(t,e,n){this._hitLimit||(this._data+=gb(t,e,n),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}end(t){let e=!1;if(this._hitLimit)e=!1;else if(t&&(e=this._handler(this._data),e instanceof Promise))return e.then(n=>(this._data="",this._hitLimit=!1,n));return this._data="",this._hitLimit=!1,e}},Id=[],Rse=class{constructor(){this._handlers=Object.create(null),this._active=Id,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=Id}registerHandler(t,e){this._handlers[t]===void 0&&(this._handlers[t]=[]);let n=this._handlers[t];return n.push(e),{dispose:()=>{let s=n.indexOf(e);s!==-1&&n.splice(s,1)}}}clearHandler(t){this._handlers[t]&&delete this._handlers[t]}setHandlerFallback(t){this._handlerFb=t}reset(){if(this._active.length)for(let t=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;t>=0;--t)this._active[t].unhook(!1);this._stack.paused=!1,this._active=Id,this._ident=0}hook(t,e){if(this.reset(),this._ident=t,this._active=this._handlers[t]||Id,!this._active.length)this._handlerFb(this._ident,"HOOK",e);else for(let n=this._active.length-1;n>=0;n--)this._active[n].hook(e)}put(t,e,n){if(!this._active.length)this._handlerFb(this._ident,"PUT",gb(t,e,n));else for(let s=this._active.length-1;s>=0;s--)this._active[s].put(t,e,n)}unhook(t,e=!0){if(!this._active.length)this._handlerFb(this._ident,"UNHOOK",t);else{let n=!1,s=this._active.length-1,r=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,n=e,r=this._stack.fallThrough,this._stack.paused=!1),!r&&n===!1){for(;s>=0&&(n=this._active[s].unhook(t),n!==!0);s--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,n;s--}for(;s>=0;s--)if(n=this._active[s].unhook(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,n}this._active=Id,this._ident=0}},vf=new yI;vf.addParam(0);var nO=class{constructor(t){this._handler=t,this._data="",this._params=vf,this._hitLimit=!1}hook(t){this._params=t.length>1||t.params[0]?t.clone():vf,this._data="",this._hitLimit=!1}put(t,e,n){this._hitLimit||(this._data+=gb(t,e,n),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}unhook(t){let e=!1;if(this._hitLimit)e=!1;else if(t&&(e=this._handler(this._data,this._params),e instanceof Promise))return e.then(n=>(this._params=vf,this._data="",this._hitLimit=!1,n));return this._params=vf,this._data="",this._hitLimit=!1,e}},Ose=class{constructor(t){this.table=new Uint8Array(t)}setDefault(t,e){this.table.fill(t<<4|e)}add(t,e,n,s){this.table[e<<8|t]=n<<4|s}addMany(t,e,n,s){for(let r=0;r<t.length;r++)this.table[e<<8|t[r]]=n<<4|s}},qr=160,Mse=(function(){let t=new Ose(4095),e=Array.apply(null,Array(256)).map((c,u)=>u),n=(c,u)=>e.slice(c,u),s=n(32,127),r=n(0,24);r.push(25),r.push.apply(r,n(28,32));let i=n(0,14),o;t.setDefault(1,0),t.addMany(s,0,2,0);for(o in i)t.addMany([24,26,153,154],o,3,0),t.addMany(n(128,144),o,3,0),t.addMany(n(144,152),o,3,0),t.add(156,o,0,0),t.add(27,o,11,1),t.add(157,o,4,8),t.addMany([152,158,159],o,0,7),t.add(155,o,11,3),t.add(144,o,11,9);return t.addMany(r,0,3,0),t.addMany(r,1,3,1),t.add(127,1,0,1),t.addMany(r,8,0,8),t.addMany(r,3,3,3),t.add(127,3,0,3),t.addMany(r,4,3,4),t.add(127,4,0,4),t.addMany(r,6,3,6),t.addMany(r,5,3,5),t.add(127,5,0,5),t.addMany(r,2,3,2),t.add(127,2,0,2),t.add(93,1,4,8),t.addMany(s,8,5,8),t.add(127,8,5,8),t.addMany([156,27,24,26,7],8,6,0),t.addMany(n(28,32),8,0,8),t.addMany([88,94,95],1,0,7),t.addMany(s,7,0,7),t.addMany(r,7,0,7),t.add(156,7,0,0),t.add(127,7,0,7),t.add(91,1,11,3),t.addMany(n(64,127),3,7,0),t.addMany(n(48,60),3,8,4),t.addMany([60,61,62,63],3,9,4),t.addMany(n(48,60),4,8,4),t.addMany(n(64,127),4,7,0),t.addMany([60,61,62,63],4,0,6),t.addMany(n(32,64),6,0,6),t.add(127,6,0,6),t.addMany(n(64,127),6,0,0),t.addMany(n(32,48),3,9,5),t.addMany(n(32,48),5,9,5),t.addMany(n(48,64),5,0,6),t.addMany(n(64,127),5,7,0),t.addMany(n(32,48),4,9,5),t.addMany(n(32,48),1,9,2),t.addMany(n(32,48),2,9,2),t.addMany(n(48,127),2,10,0),t.addMany(n(48,80),1,10,0),t.addMany(n(81,88),1,10,0),t.addMany([89,90,92],1,10,0),t.addMany(n(96,127),1,10,0),t.add(80,1,11,9),t.addMany(r,9,0,9),t.add(127,9,0,9),t.addMany(n(28,32),9,0,9),t.addMany(n(32,48),9,9,12),t.addMany(n(48,60),9,8,10),t.addMany([60,61,62,63],9,9,10),t.addMany(r,11,0,11),t.addMany(n(32,128),11,0,11),t.addMany(n(28,32),11,0,11),t.addMany(r,10,0,10),t.add(127,10,0,10),t.addMany(n(28,32),10,0,10),t.addMany(n(48,60),10,8,10),t.addMany([60,61,62,63],10,0,11),t.addMany(n(32,48),10,9,12),t.addMany(r,12,0,12),t.add(127,12,0,12),t.addMany(n(28,32),12,0,12),t.addMany(n(32,48),12,9,12),t.addMany(n(48,64),12,0,11),t.addMany(n(64,127),12,12,13),t.addMany(n(64,127),10,12,13),t.addMany(n(64,127),9,12,13),t.addMany(r,13,13,13),t.addMany(s,13,13,13),t.add(127,13,0,13),t.addMany([27,156,24,26],13,14,0),t.add(qr,0,2,0),t.add(qr,8,5,8),t.add(qr,6,0,6),t.add(qr,11,0,11),t.add(qr,13,13,13),t})(),Dse=class extends kt{constructor(t=Mse){super(),this._transitions=t,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new yI,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(e,n,s)=>{},this._executeHandlerFb=e=>{},this._csiHandlerFb=(e,n)=>{},this._escHandlerFb=e=>{},this._errorHandlerFb=e=>e,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this._register(hn(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this._register(new Tse),this._dcsParser=this._register(new Rse),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(t,e=[64,126]){let n=0;if(t.prefix){if(t.prefix.length>1)throw new Error("only one byte as prefix supported");if(n=t.prefix.charCodeAt(0),n&&60>n||n>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(t.intermediates){if(t.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let r=0;r<t.intermediates.length;++r){let i=t.intermediates.charCodeAt(r);if(32>i||i>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");n<<=8,n|=i}}if(t.final.length!==1)throw new Error("final must be a single byte");let s=t.final.charCodeAt(0);if(e[0]>s||s>e[1])throw new Error(`final must be in range ${e[0]} .. ${e[1]}`);return n<<=8,n|=s,n}identToString(t){let e=[];for(;t;)e.push(String.fromCharCode(t&255)),t>>=8;return e.reverse().join("")}setPrintHandler(t){this._printHandler=t}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(t,e){let n=this._identifier(t,[48,126]);this._escHandlers[n]===void 0&&(this._escHandlers[n]=[]);let s=this._escHandlers[n];return s.push(e),{dispose:()=>{let r=s.indexOf(e);r!==-1&&s.splice(r,1)}}}clearEscHandler(t){this._escHandlers[this._identifier(t,[48,126])]&&delete this._escHandlers[this._identifier(t,[48,126])]}setEscHandlerFallback(t){this._escHandlerFb=t}setExecuteHandler(t,e){this._executeHandlers[t.charCodeAt(0)]=e}clearExecuteHandler(t){this._executeHandlers[t.charCodeAt(0)]&&delete this._executeHandlers[t.charCodeAt(0)]}setExecuteHandlerFallback(t){this._executeHandlerFb=t}registerCsiHandler(t,e){let n=this._identifier(t);this._csiHandlers[n]===void 0&&(this._csiHandlers[n]=[]);let s=this._csiHandlers[n];return s.push(e),{dispose:()=>{let r=s.indexOf(e);r!==-1&&s.splice(r,1)}}}clearCsiHandler(t){this._csiHandlers[this._identifier(t)]&&delete this._csiHandlers[this._identifier(t)]}setCsiHandlerFallback(t){this._csiHandlerFb=t}registerDcsHandler(t,e){return this._dcsParser.registerHandler(this._identifier(t),e)}clearDcsHandler(t){this._dcsParser.clearHandler(this._identifier(t))}setDcsHandlerFallback(t){this._dcsParser.setHandlerFallback(t)}registerOscHandler(t,e){return this._oscParser.registerHandler(t,e)}clearOscHandler(t){this._oscParser.clearHandler(t)}setOscHandlerFallback(t){this._oscParser.setHandlerFallback(t)}setErrorHandler(t){this._errorHandler=t}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(t,e,n,s,r){this._parseStack.state=t,this._parseStack.handlers=e,this._parseStack.handlerPos=n,this._parseStack.transition=s,this._parseStack.chunkPos=r}parse(t,e,n){let s=0,r=0,i=0,o;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,i=this._parseStack.chunkPos+1;else{if(n===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let c=this._parseStack.handlers,u=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(n===!1&&u>-1){for(;u>=0&&(o=c[u](this._params),o!==!0);u--)if(o instanceof Promise)return this._parseStack.handlerPos=u,o}this._parseStack.handlers=[];break;case 4:if(n===!1&&u>-1){for(;u>=0&&(o=c[u](),o!==!0);u--)if(o instanceof Promise)return this._parseStack.handlerPos=u,o}this._parseStack.handlers=[];break;case 6:if(s=t[this._parseStack.chunkPos],o=this._dcsParser.unhook(s!==24&&s!==26,n),o)return o;s===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(s=t[this._parseStack.chunkPos],o=this._oscParser.end(s!==24&&s!==26,n),o)return o;s===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break}this._parseStack.state=0,i=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=this._parseStack.transition&15}for(let c=i;c<e;++c){switch(s=t[c],r=this._transitions.table[this.currentState<<8|(s<160?s:qr)],r>>4){case 2:for(let y=c+1;;++y){if(y>=e||(s=t[y])<32||s>126&&s<qr){this._printHandler(t,c,y),c=y-1;break}if(++y>=e||(s=t[y])<32||s>126&&s<qr){this._printHandler(t,c,y),c=y-1;break}if(++y>=e||(s=t[y])<32||s>126&&s<qr){this._printHandler(t,c,y),c=y-1;break}if(++y>=e||(s=t[y])<32||s>126&&s<qr){this._printHandler(t,c,y),c=y-1;break}}break;case 3:this._executeHandlers[s]?this._executeHandlers[s]():this._executeHandlerFb(s),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:c,code:s,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let u=this._csiHandlers[this._collect<<8|s],h=u?u.length-1:-1;for(;h>=0&&(o=u[h](this._params),o!==!0);h--)if(o instanceof Promise)return this._preserveStack(3,u,h,r,c),o;h<0&&this._csiHandlerFb(this._collect<<8|s,this._params),this.precedingJoinState=0;break;case 8:do switch(s){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(s-48)}while(++c<e&&(s=t[c])>47&&s<60);c--;break;case 9:this._collect<<=8,this._collect|=s;break;case 10:let m=this._escHandlers[this._collect<<8|s],p=m?m.length-1:-1;for(;p>=0&&(o=m[p](),o!==!0);p--)if(o instanceof Promise)return this._preserveStack(4,m,p,r,c),o;p<0&&this._escHandlerFb(this._collect<<8|s),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|s,this._params);break;case 13:for(let y=c+1;;++y)if(y>=e||(s=t[y])===24||s===26||s===27||s>127&&s<qr){this._dcsParser.put(t,c,y),c=y-1;break}break;case 14:if(o=this._dcsParser.unhook(s!==24&&s!==26),o)return this._preserveStack(6,[],0,r,c),o;s===27&&(r|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let y=c+1;;y++)if(y>=e||(s=t[y])<32||s>127&&s<qr){this._oscParser.put(t,c,y),c=y-1;break}break;case 6:if(o=this._oscParser.end(s!==24&&s!==26),o)return this._preserveStack(5,[],0,r,c),o;s===27&&(r|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break}this.currentState=r&15}}},Bse=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,Lse=/^[\da-f]+$/;function sO(t){if(!t)return;let e=t.toLowerCase();if(e.indexOf("rgb:")===0){e=e.slice(4);let n=Bse.exec(e);if(n){let s=n[1]?15:n[4]?255:n[7]?4095:65535;return[Math.round(parseInt(n[1]||n[4]||n[7]||n[10],16)/s*255),Math.round(parseInt(n[2]||n[5]||n[8]||n[11],16)/s*255),Math.round(parseInt(n[3]||n[6]||n[9]||n[12],16)/s*255)]}}else if(e.indexOf("#")===0&&(e=e.slice(1),Lse.exec(e)&&[3,6,9,12].includes(e.length))){let n=e.length/3,s=[0,0,0];for(let r=0;r<3;++r){let i=parseInt(e.slice(n*r,n*r+n),16);s[r]=n===1?i<<4:n===2?i:n===3?i>>4:i>>8}return s}}function Qx(t,e){let n=t.toString(16),s=n.length<2?"0"+n:n;switch(e){case 4:return n[0];case 8:return s;case 12:return(s+s).slice(0,3);default:return s+s}}function Ise(t,e=16){let[n,s,r]=t;return`rgb:${Qx(n,e)}/${Qx(s,e)}/${Qx(r,e)}`}var Pse={"(":0,")":1,"*":2,"+":3,"-":1,".":2},po=131072,rO=10;function iO(t,e){if(t>24)return e.setWinLines||!1;switch(t){case 1:return!!e.restoreWin;case 2:return!!e.minimizeWin;case 3:return!!e.setWinPosition;case 4:return!!e.setWinSizePixels;case 5:return!!e.raiseWin;case 6:return!!e.lowerWin;case 7:return!!e.refreshWin;case 8:return!!e.setWinSizeChars;case 9:return!!e.maximizeWin;case 10:return!!e.fullscreenWin;case 11:return!!e.getWinState;case 13:return!!e.getWinPosition;case 14:return!!e.getWinSizePixels;case 15:return!!e.getScreenSizePixels;case 16:return!!e.getCellSizePixels;case 18:return!!e.getWinSizeChars;case 19:return!!e.getScreenSizeChars;case 20:return!!e.getIconTitle;case 21:return!!e.getWinTitle;case 22:return!!e.pushTitle;case 23:return!!e.popTitle;case 24:return!!e.setWinLines}return!1}var aO=5e3,oO=0,$se=class extends kt{constructor(t,e,n,s,r,i,o,c,u=new Dse){super(),this._bufferService=t,this._charsetService=e,this._coreService=n,this._logService=s,this._optionsService=r,this._oscLinkService=i,this._coreMouseService=o,this._unicodeService=c,this._parser=u,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new rte,this._utf8Decoder=new ite,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=Dn.clone(),this._eraseAttrDataInternal=Dn.clone(),this._onRequestBell=this._register(new Te),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this._register(new Te),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this._register(new Te),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this._register(new Te),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this._register(new Te),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this._register(new Te),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this._register(new Te),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this._register(new Te),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this._register(new Te),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this._register(new Te),this.onLineFeed=this._onLineFeed.event,this._onScroll=this._register(new Te),this.onScroll=this._onScroll.event,this._onTitleChange=this._register(new Te),this.onTitleChange=this._onTitleChange.event,this._onColor=this._register(new Te),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this._register(this._parser),this._dirtyRowTracker=new e2(this._bufferService),this._activeBuffer=this._bufferService.buffer,this._register(this._bufferService.buffers.onBufferActivate(h=>this._activeBuffer=h.activeBuffer)),this._parser.setCsiHandlerFallback((h,m)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(h),params:m.toArray()})}),this._parser.setEscHandlerFallback(h=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(h)})}),this._parser.setExecuteHandlerFallback(h=>{this._logService.debug("Unknown EXECUTE code: ",{code:h})}),this._parser.setOscHandlerFallback((h,m,p)=>{this._logService.debug("Unknown OSC code: ",{identifier:h,action:m,data:p})}),this._parser.setDcsHandlerFallback((h,m,p)=>{m==="HOOK"&&(p=p.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(h),action:m,payload:p})}),this._parser.setPrintHandler((h,m,p)=>this.print(h,m,p)),this._parser.registerCsiHandler({final:"@"},h=>this.insertChars(h)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},h=>this.scrollLeft(h)),this._parser.registerCsiHandler({final:"A"},h=>this.cursorUp(h)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},h=>this.scrollRight(h)),this._parser.registerCsiHandler({final:"B"},h=>this.cursorDown(h)),this._parser.registerCsiHandler({final:"C"},h=>this.cursorForward(h)),this._parser.registerCsiHandler({final:"D"},h=>this.cursorBackward(h)),this._parser.registerCsiHandler({final:"E"},h=>this.cursorNextLine(h)),this._parser.registerCsiHandler({final:"F"},h=>this.cursorPrecedingLine(h)),this._parser.registerCsiHandler({final:"G"},h=>this.cursorCharAbsolute(h)),this._parser.registerCsiHandler({final:"H"},h=>this.cursorPosition(h)),this._parser.registerCsiHandler({final:"I"},h=>this.cursorForwardTab(h)),this._parser.registerCsiHandler({final:"J"},h=>this.eraseInDisplay(h,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},h=>this.eraseInDisplay(h,!0)),this._parser.registerCsiHandler({final:"K"},h=>this.eraseInLine(h,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},h=>this.eraseInLine(h,!0)),this._parser.registerCsiHandler({final:"L"},h=>this.insertLines(h)),this._parser.registerCsiHandler({final:"M"},h=>this.deleteLines(h)),this._parser.registerCsiHandler({final:"P"},h=>this.deleteChars(h)),this._parser.registerCsiHandler({final:"S"},h=>this.scrollUp(h)),this._parser.registerCsiHandler({final:"T"},h=>this.scrollDown(h)),this._parser.registerCsiHandler({final:"X"},h=>this.eraseChars(h)),this._parser.registerCsiHandler({final:"Z"},h=>this.cursorBackwardTab(h)),this._parser.registerCsiHandler({final:"`"},h=>this.charPosAbsolute(h)),this._parser.registerCsiHandler({final:"a"},h=>this.hPositionRelative(h)),this._parser.registerCsiHandler({final:"b"},h=>this.repeatPrecedingCharacter(h)),this._parser.registerCsiHandler({final:"c"},h=>this.sendDeviceAttributesPrimary(h)),this._parser.registerCsiHandler({prefix:">",final:"c"},h=>this.sendDeviceAttributesSecondary(h)),this._parser.registerCsiHandler({final:"d"},h=>this.linePosAbsolute(h)),this._parser.registerCsiHandler({final:"e"},h=>this.vPositionRelative(h)),this._parser.registerCsiHandler({final:"f"},h=>this.hVPosition(h)),this._parser.registerCsiHandler({final:"g"},h=>this.tabClear(h)),this._parser.registerCsiHandler({final:"h"},h=>this.setMode(h)),this._parser.registerCsiHandler({prefix:"?",final:"h"},h=>this.setModePrivate(h)),this._parser.registerCsiHandler({final:"l"},h=>this.resetMode(h)),this._parser.registerCsiHandler({prefix:"?",final:"l"},h=>this.resetModePrivate(h)),this._parser.registerCsiHandler({final:"m"},h=>this.charAttributes(h)),this._parser.registerCsiHandler({final:"n"},h=>this.deviceStatus(h)),this._parser.registerCsiHandler({prefix:"?",final:"n"},h=>this.deviceStatusPrivate(h)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},h=>this.softReset(h)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},h=>this.setCursorStyle(h)),this._parser.registerCsiHandler({final:"r"},h=>this.setScrollRegion(h)),this._parser.registerCsiHandler({final:"s"},h=>this.saveCursor(h)),this._parser.registerCsiHandler({final:"t"},h=>this.windowOptions(h)),this._parser.registerCsiHandler({final:"u"},h=>this.restoreCursor(h)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},h=>this.insertColumns(h)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},h=>this.deleteColumns(h)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},h=>this.selectProtected(h)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},h=>this.requestMode(h,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},h=>this.requestMode(h,!1)),this._parser.setExecuteHandler(be.BEL,()=>this.bell()),this._parser.setExecuteHandler(be.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(be.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(be.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(be.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(be.BS,()=>this.backspace()),this._parser.setExecuteHandler(be.HT,()=>this.tab()),this._parser.setExecuteHandler(be.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(be.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(S0.IND,()=>this.index()),this._parser.setExecuteHandler(S0.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(S0.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new pr(h=>(this.setTitle(h),this.setIconName(h),!0))),this._parser.registerOscHandler(1,new pr(h=>this.setIconName(h))),this._parser.registerOscHandler(2,new pr(h=>this.setTitle(h))),this._parser.registerOscHandler(4,new pr(h=>this.setOrReportIndexedColor(h))),this._parser.registerOscHandler(8,new pr(h=>this.setHyperlink(h))),this._parser.registerOscHandler(10,new pr(h=>this.setOrReportFgColor(h))),this._parser.registerOscHandler(11,new pr(h=>this.setOrReportBgColor(h))),this._parser.registerOscHandler(12,new pr(h=>this.setOrReportCursorColor(h))),this._parser.registerOscHandler(104,new pr(h=>this.restoreIndexedColor(h))),this._parser.registerOscHandler(110,new pr(h=>this.restoreFgColor(h))),this._parser.registerOscHandler(111,new pr(h=>this.restoreBgColor(h))),this._parser.registerOscHandler(112,new pr(h=>this.restoreCursorColor(h))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let h in qn)this._parser.registerEscHandler({intermediates:"(",final:h},()=>this.selectCharset("("+h)),this._parser.registerEscHandler({intermediates:")",final:h},()=>this.selectCharset(")"+h)),this._parser.registerEscHandler({intermediates:"*",final:h},()=>this.selectCharset("*"+h)),this._parser.registerEscHandler({intermediates:"+",final:h},()=>this.selectCharset("+"+h)),this._parser.registerEscHandler({intermediates:"-",final:h},()=>this.selectCharset("-"+h)),this._parser.registerEscHandler({intermediates:".",final:h},()=>this.selectCharset("."+h)),this._parser.registerEscHandler({intermediates:"/",final:h},()=>this.selectCharset("/"+h));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(h=>(this._logService.error("Parsing error: ",h),h)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new nO((h,m)=>this.requestStatusString(h,m)))}getAttrData(){return this._curAttrData}_preserveStack(t,e,n,s){this._parseStack.paused=!0,this._parseStack.cursorStartX=t,this._parseStack.cursorStartY=e,this._parseStack.decodedLength=n,this._parseStack.position=s}_logSlowResolvingAsync(t){this._logService.logLevel<=3&&Promise.race([t,new Promise((e,n)=>setTimeout(()=>n("#SLOW_TIMEOUT"),aO))]).catch(e=>{if(e!=="#SLOW_TIMEOUT")throw e;console.warn(`async parser handler taking longer than ${aO} ms`)})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(t,e){let n,s=this._activeBuffer.x,r=this._activeBuffer.y,i=0,o=this._parseStack.paused;if(o){if(n=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,e))return this._logSlowResolvingAsync(n),n;s=this._parseStack.cursorStartX,r=this._parseStack.cursorStartY,this._parseStack.paused=!1,t.length>po&&(i=this._parseStack.position+po)}if(this._logService.logLevel<=1&&this._logService.debug(`parsing data ${typeof t=="string"?` "${t}"`:` "${Array.prototype.map.call(t,h=>String.fromCharCode(h)).join("")}"`}`),this._logService.logLevel===0&&this._logService.trace("parsing data (codes)",typeof t=="string"?t.split("").map(h=>h.charCodeAt(0)):t),this._parseBuffer.length<t.length&&this._parseBuffer.length<po&&(this._parseBuffer=new Uint32Array(Math.min(t.length,po))),o||this._dirtyRowTracker.clearRange(),t.length>po)for(let h=i;h<t.length;h+=po){let m=h+po<t.length?h+po:t.length,p=typeof t=="string"?this._stringDecoder.decode(t.substring(h,m),this._parseBuffer):this._utf8Decoder.decode(t.subarray(h,m),this._parseBuffer);if(n=this._parser.parse(this._parseBuffer,p))return this._preserveStack(s,r,p,h),this._logSlowResolvingAsync(n),n}else if(!o){let h=typeof t=="string"?this._stringDecoder.decode(t,this._parseBuffer):this._utf8Decoder.decode(t,this._parseBuffer);if(n=this._parser.parse(this._parseBuffer,h))return this._preserveStack(s,r,h,0),this._logSlowResolvingAsync(n),n}(this._activeBuffer.x!==s||this._activeBuffer.y!==r)&&this._onCursorMove.fire();let c=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),u=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);u<this._bufferService.rows&&this._onRequestRefreshRows.fire({start:Math.min(u,this._bufferService.rows-1),end:Math.min(c,this._bufferService.rows-1)})}print(t,e,n){let s,r,i=this._charsetService.charset,o=this._optionsService.rawOptions.screenReaderMode,c=this._bufferService.cols,u=this._coreService.decPrivateModes.wraparound,h=this._coreService.modes.insertMode,m=this._curAttrData,p=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&n-e>0&&p.getWidth(this._activeBuffer.x-1)===2&&p.setCellFromCodepoint(this._activeBuffer.x-1,0,1,m);let y=this._parser.precedingJoinState;for(let v=e;v<n;++v){if(s=t[v],s<127&&i){let k=i[String.fromCharCode(s)];k&&(s=k.charCodeAt(0))}let x=this._unicodeService.charProperties(s,y);r=kl.extractWidth(x);let _=kl.extractShouldJoin(x),S=_?kl.extractWidth(y):0;if(y=x,o&&this._onA11yChar.fire(bo(s)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+r-S>c){if(u){let k=p,C=this._activeBuffer.x-S;for(this._activeBuffer.x=S,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),p=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),S>0&&p instanceof gf&&p.copyCellsFrom(k,C,0,S,!1);C<c;)k.setCellFromCodepoint(C++,0,1,m)}else if(this._activeBuffer.x=c-1,r===2)continue}if(_&&this._activeBuffer.x){let k=p.getWidth(this._activeBuffer.x-1)?1:2;p.addCodepointToCell(this._activeBuffer.x-k,s,r);for(let C=r-S;--C>=0;)p.setCellFromCodepoint(this._activeBuffer.x++,0,0,m);continue}if(h&&(p.insertCells(this._activeBuffer.x,r-S,this._activeBuffer.getNullCell(m)),p.getWidth(c-1)===2&&p.setCellFromCodepoint(c-1,0,1,m)),p.setCellFromCodepoint(this._activeBuffer.x++,s,r,m),r>0)for(;--r;)p.setCellFromCodepoint(this._activeBuffer.x++,0,0,m)}this._parser.precedingJoinState=y,this._activeBuffer.x<c&&n-e>0&&p.getWidth(this._activeBuffer.x)===0&&!p.hasContent(this._activeBuffer.x)&&p.setCellFromCodepoint(this._activeBuffer.x,0,1,m),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(t,e){return t.final==="t"&&!t.prefix&&!t.intermediates?this._parser.registerCsiHandler(t,n=>iO(n.params[0],this._optionsService.rawOptions.windowOptions)?e(n):!0):this._parser.registerCsiHandler(t,e)}registerDcsHandler(t,e){return this._parser.registerDcsHandler(t,new nO(e))}registerEscHandler(t,e){return this._parser.registerEscHandler(t,e)}registerOscHandler(t,e){return this._parser.registerOscHandler(t,new pr(e))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);t.hasWidth(this._activeBuffer.x)&&!t.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-t),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(t=this._bufferService.cols-1){this._activeBuffer.x=Math.min(t,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(t,e){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=t,this._activeBuffer.y=this._activeBuffer.scrollTop+e):(this._activeBuffer.x=t,this._activeBuffer.y=e),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(t,e){this._restrictCursor(),this._setCursor(this._activeBuffer.x+t,this._activeBuffer.y+e)}cursorUp(t){let e=this._activeBuffer.y-this._activeBuffer.scrollTop;return e>=0?this._moveCursor(0,-Math.min(e,t.params[0]||1)):this._moveCursor(0,-(t.params[0]||1)),!0}cursorDown(t){let e=this._activeBuffer.scrollBottom-this._activeBuffer.y;return e>=0?this._moveCursor(0,Math.min(e,t.params[0]||1)):this._moveCursor(0,t.params[0]||1),!0}cursorForward(t){return this._moveCursor(t.params[0]||1,0),!0}cursorBackward(t){return this._moveCursor(-(t.params[0]||1),0),!0}cursorNextLine(t){return this.cursorDown(t),this._activeBuffer.x=0,!0}cursorPrecedingLine(t){return this.cursorUp(t),this._activeBuffer.x=0,!0}cursorCharAbsolute(t){return this._setCursor((t.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(t){return this._setCursor(t.length>=2?(t.params[1]||1)-1:0,(t.params[0]||1)-1),!0}charPosAbsolute(t){return this._setCursor((t.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(t){return this._moveCursor(t.params[0]||1,0),!0}linePosAbsolute(t){return this._setCursor(this._activeBuffer.x,(t.params[0]||1)-1),!0}vPositionRelative(t){return this._moveCursor(0,t.params[0]||1),!0}hVPosition(t){return this.cursorPosition(t),!0}tabClear(t){let e=t.params[0];return e===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:e===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(t){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let e=t.params[0]||1;for(;e--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(t){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let e=t.params[0]||1;for(;e--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(t){let e=t.params[0];return e===1&&(this._curAttrData.bg|=536870912),(e===2||e===0)&&(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(t,e,n,s=!1,r=!1){let i=this._activeBuffer.lines.get(this._activeBuffer.ybase+t);i.replaceCells(e,n,this._activeBuffer.getNullCell(this._eraseAttrData()),r),s&&(i.isWrapped=!1)}_resetBufferLine(t,e=!1){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+t);n&&(n.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),e),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+t),n.isWrapped=!1)}eraseInDisplay(t,e=!1){this._restrictCursor(this._bufferService.cols);let n;switch(t.params[0]){case 0:for(n=this._activeBuffer.y,this._dirtyRowTracker.markDirty(n),this._eraseInBufferLine(n++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,e);n<this._bufferService.rows;n++)this._resetBufferLine(n,e);this._dirtyRowTracker.markDirty(n);break;case 1:for(n=this._activeBuffer.y,this._dirtyRowTracker.markDirty(n),this._eraseInBufferLine(n,0,this._activeBuffer.x+1,!0,e),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(n+1).isWrapped=!1);n--;)this._resetBufferLine(n,e);this._dirtyRowTracker.markDirty(0);break;case 2:if(this._optionsService.rawOptions.scrollOnEraseInDisplay){for(n=this._bufferService.rows,this._dirtyRowTracker.markRangeDirty(0,n-1);n--&&!this._activeBuffer.lines.get(this._activeBuffer.ybase+n)?.getTrimmedLength(););for(;n>=0;n--)this._bufferService.scroll(this._eraseAttrData())}else{for(n=this._bufferService.rows,this._dirtyRowTracker.markDirty(n-1);n--;)this._resetBufferLine(n,e);this._dirtyRowTracker.markDirty(0)}break;case 3:let s=this._activeBuffer.lines.length-this._bufferService.rows;s>0&&(this._activeBuffer.lines.trimStart(s),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-s,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-s,0),this._onScroll.fire(0));break}return!0}eraseInLine(t,e=!1){switch(this._restrictCursor(this._bufferService.cols),t.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,e);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,e);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,e);break}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(t){this._restrictCursor();let e=t.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let n=this._activeBuffer.ybase+this._activeBuffer.y,s=this._bufferService.rows-1-this._activeBuffer.scrollBottom,r=this._bufferService.rows-1+this._activeBuffer.ybase-s+1;for(;e--;)this._activeBuffer.lines.splice(r-1,1),this._activeBuffer.lines.splice(n,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(t){this._restrictCursor();let e=t.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let n=this._activeBuffer.ybase+this._activeBuffer.y,s;for(s=this._bufferService.rows-1-this._activeBuffer.scrollBottom,s=this._bufferService.rows-1+this._activeBuffer.ybase-s;e--;)this._activeBuffer.lines.splice(n,1),this._activeBuffer.lines.splice(s,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(t){this._restrictCursor();let e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return e&&(e.insertCells(this._activeBuffer.x,t.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(t){this._restrictCursor();let e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return e&&(e.deleteCells(this._activeBuffer.x,t.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(t){let e=t.params[0]||1;for(;e--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(t){let e=t.params[0]||1;for(;e--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(Dn));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(t){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let e=t.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);s.deleteCells(0,e,this._activeBuffer.getNullCell(this._eraseAttrData())),s.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(t){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let e=t.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);s.insertCells(0,e,this._activeBuffer.getNullCell(this._eraseAttrData())),s.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(t){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let e=t.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);s.insertCells(this._activeBuffer.x,e,this._activeBuffer.getNullCell(this._eraseAttrData())),s.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(t){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let e=t.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);s.deleteCells(this._activeBuffer.x,e,this._activeBuffer.getNullCell(this._eraseAttrData())),s.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(t){this._restrictCursor();let e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return e&&(e.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(t.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(t){let e=this._parser.precedingJoinState;if(!e)return!0;let n=t.params[0]||1,s=kl.extractWidth(e),r=this._activeBuffer.x-s,i=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(r),o=new Uint32Array(i.length*n),c=0;for(let h=0;h<i.length;){let m=i.codePointAt(h)||0;o[c++]=m,h+=m>65535?2:1}let u=c;for(let h=1;h<n;++h)o.copyWithin(u,0,c),u+=c;return this.print(o,0,u),!0}sendDeviceAttributesPrimary(t){return t.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(be.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(be.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(t){return t.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(be.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(be.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(t.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(be.ESC+"[>83;40003;0c")),!0}_is(t){return(this._optionsService.rawOptions.termName+"").indexOf(t)===0}setMode(t){for(let e=0;e<t.length;e++)switch(t.params[e]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0;break}return!0}setModePrivate(t){for(let e=0;e<t.length;e++)switch(t.params[e]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,ml),this._charsetService.setgCharset(1,ml),this._charsetService.setgCharset(2,ml),this._charsetService.setgCharset(3,ml);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!0;break}return!0}resetMode(t){for(let e=0;e<t.length;e++)switch(t.params[e]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1;break}return!0}resetModePrivate(t){for(let e=0;e<t.length;e++)switch(t.params[e]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),t.params[e]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!1,this._onRequestRefreshRows.fire(void 0);break}return!0}requestMode(t,e){let n;(_=>(_[_.NOT_RECOGNIZED=0]="NOT_RECOGNIZED",_[_.SET=1]="SET",_[_.RESET=2]="RESET",_[_.PERMANENTLY_SET=3]="PERMANENTLY_SET",_[_.PERMANENTLY_RESET=4]="PERMANENTLY_RESET"))(n||={});let s=this._coreService.decPrivateModes,{activeProtocol:r,activeEncoding:i}=this._coreMouseService,o=this._coreService,{buffers:c,cols:u}=this._bufferService,{active:h,alt:m}=c,p=this._optionsService.rawOptions,y=(_,S)=>(o.triggerDataEvent(`${be.ESC}[${e?"":"?"}${_};${S}$y`),!0),v=_=>_?1:2,x=t.params[0];return e?x===2?y(x,4):x===4?y(x,v(o.modes.insertMode)):x===12?y(x,3):x===20?y(x,v(p.convertEol)):y(x,0):x===1?y(x,v(s.applicationCursorKeys)):x===3?y(x,p.windowOptions.setWinLines?u===80?2:u===132?1:0:0):x===6?y(x,v(s.origin)):x===7?y(x,v(s.wraparound)):x===8?y(x,3):x===9?y(x,v(r==="X10")):x===12?y(x,v(p.cursorBlink)):x===25?y(x,v(!o.isCursorHidden)):x===45?y(x,v(s.reverseWraparound)):x===66?y(x,v(s.applicationKeypad)):x===67?y(x,4):x===1e3?y(x,v(r==="VT200")):x===1002?y(x,v(r==="DRAG")):x===1003?y(x,v(r==="ANY")):x===1004?y(x,v(s.sendFocus)):x===1005?y(x,4):x===1006?y(x,v(i==="SGR")):x===1015?y(x,4):x===1016?y(x,v(i==="SGR_PIXELS")):x===1048?y(x,1):x===47||x===1047||x===1049?y(x,v(h===m)):x===2004?y(x,v(s.bracketedPasteMode)):x===2026?y(x,v(s.synchronizedOutput)):y(x,0)}_updateAttrColor(t,e,n,s,r){return e===2?(t|=50331648,t&=-16777216,t|=Xp.fromColorRGB([n,s,r])):e===5&&(t&=-50331904,t|=33554432|n&255),t}_extractColor(t,e,n){let s=[0,0,-1,0,0,0],r=0,i=0;do{if(s[i+r]=t.params[e+i],t.hasSubParams(e+i)){let o=t.getSubParams(e+i),c=0;do s[1]===5&&(r=1),s[i+c+1+r]=o[c];while(++c<o.length&&c+i+1+r<s.length);break}if(s[1]===5&&i+r>=2||s[1]===2&&i+r>=5)break;s[1]&&(r=1)}while(++i+e<t.length&&i+r<s.length);for(let o=2;o<s.length;++o)s[o]===-1&&(s[o]=0);switch(s[0]){case 38:n.fg=this._updateAttrColor(n.fg,s[1],s[3],s[4],s[5]);break;case 48:n.bg=this._updateAttrColor(n.bg,s[1],s[3],s[4],s[5]);break;case 58:n.extended=n.extended.clone(),n.extended.underlineColor=this._updateAttrColor(n.extended.underlineColor,s[1],s[3],s[4],s[5])}return i}_processUnderline(t,e){e.extended=e.extended.clone(),(!~t||t>5)&&(t=1),e.extended.underlineStyle=t,e.fg|=268435456,t===0&&(e.fg&=-268435457),e.updateExtended()}_processSGR0(t){t.fg=Dn.fg,t.bg=Dn.bg,t.extended=t.extended.clone(),t.extended.underlineStyle=0,t.extended.underlineColor&=-67108864,t.updateExtended()}charAttributes(t){if(t.length===1&&t.params[0]===0)return this._processSGR0(this._curAttrData),!0;let e=t.length,n,s=this._curAttrData;for(let r=0;r<e;r++)n=t.params[r],n>=30&&n<=37?(s.fg&=-50331904,s.fg|=16777216|n-30):n>=40&&n<=47?(s.bg&=-50331904,s.bg|=16777216|n-40):n>=90&&n<=97?(s.fg&=-50331904,s.fg|=16777216|n-90|8):n>=100&&n<=107?(s.bg&=-50331904,s.bg|=16777216|n-100|8):n===0?this._processSGR0(s):n===1?s.fg|=134217728:n===3?s.bg|=67108864:n===4?(s.fg|=268435456,this._processUnderline(t.hasSubParams(r)?t.getSubParams(r)[0]:1,s)):n===5?s.fg|=536870912:n===7?s.fg|=67108864:n===8?s.fg|=1073741824:n===9?s.fg|=2147483648:n===2?s.bg|=134217728:n===21?this._processUnderline(2,s):n===22?(s.fg&=-134217729,s.bg&=-134217729):n===23?s.bg&=-67108865:n===24?(s.fg&=-268435457,this._processUnderline(0,s)):n===25?s.fg&=-536870913:n===27?s.fg&=-67108865:n===28?s.fg&=-1073741825:n===29?s.fg&=2147483647:n===39?(s.fg&=-67108864,s.fg|=Dn.fg&16777215):n===49?(s.bg&=-67108864,s.bg|=Dn.bg&16777215):n===38||n===48||n===58?r+=this._extractColor(t,r,s):n===53?s.bg|=1073741824:n===55?s.bg&=-1073741825:n===59?(s.extended=s.extended.clone(),s.extended.underlineColor=-1,s.updateExtended()):n===100?(s.fg&=-67108864,s.fg|=Dn.fg&16777215,s.bg&=-67108864,s.bg|=Dn.bg&16777215):this._logService.debug("Unknown SGR attribute: %d.",n);return!0}deviceStatus(t){switch(t.params[0]){case 5:this._coreService.triggerDataEvent(`${be.ESC}[0n`);break;case 6:let e=this._activeBuffer.y+1,n=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${be.ESC}[${e};${n}R`);break}return!0}deviceStatusPrivate(t){if(t.params[0]===6){let e=this._activeBuffer.y+1,n=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${be.ESC}[?${e};${n}R`)}return!0}softReset(t){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=Dn.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(t){let e=t.length===0?1:t.params[0];if(e===0)this._coreService.decPrivateModes.cursorStyle=void 0,this._coreService.decPrivateModes.cursorBlink=void 0;else{switch(e){case 1:case 2:this._coreService.decPrivateModes.cursorStyle="block";break;case 3:case 4:this._coreService.decPrivateModes.cursorStyle="underline";break;case 5:case 6:this._coreService.decPrivateModes.cursorStyle="bar";break}let n=e%2===1;this._coreService.decPrivateModes.cursorBlink=n}return!0}setScrollRegion(t){let e=t.params[0]||1,n;return(t.length<2||(n=t.params[1])>this._bufferService.rows||n===0)&&(n=this._bufferService.rows),n>e&&(this._activeBuffer.scrollTop=e-1,this._activeBuffer.scrollBottom=n-1,this._setCursor(0,0)),!0}windowOptions(t){if(!iO(t.params[0],this._optionsService.rawOptions.windowOptions))return!0;let e=t.length>1?t.params[1]:0;switch(t.params[0]){case 14:e!==2&&this._onRequestWindowsOptionsReport.fire(0);break;case 16:this._onRequestWindowsOptionsReport.fire(1);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${be.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:(e===0||e===2)&&(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>rO&&this._windowTitleStack.shift()),(e===0||e===1)&&(this._iconNameStack.push(this._iconName),this._iconNameStack.length>rO&&this._iconNameStack.shift());break;case 23:(e===0||e===2)&&this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),(e===0||e===1)&&this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop());break}return!0}saveCursor(t){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(t){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(t){return this._windowTitle=t,this._onTitleChange.fire(t),!0}setIconName(t){return this._iconName=t,!0}setOrReportIndexedColor(t){let e=[],n=t.split(";");for(;n.length>1;){let s=n.shift(),r=n.shift();if(/^\d+$/.exec(s)){let i=parseInt(s);if(lO(i))if(r==="?")e.push({type:0,index:i});else{let o=sO(r);o&&e.push({type:1,index:i,color:o})}}}return e.length&&this._onColor.fire(e),!0}setHyperlink(t){let e=t.indexOf(";");if(e===-1)return!0;let n=t.slice(0,e).trim(),s=t.slice(e+1);return s?this._createHyperlink(n,s):n.trim()?!1:this._finishHyperlink()}_createHyperlink(t,e){this._getCurrentLinkId()&&this._finishHyperlink();let n=t.split(":"),s,r=n.findIndex(i=>i.startsWith("id="));return r!==-1&&(s=n[r].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:s,uri:e}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(t,e){let n=t.split(";");for(let s=0;s<n.length&&!(e>=this._specialColors.length);++s,++e)if(n[s]==="?")this._onColor.fire([{type:0,index:this._specialColors[e]}]);else{let r=sO(n[s]);r&&this._onColor.fire([{type:1,index:this._specialColors[e],color:r}])}return!0}setOrReportFgColor(t){return this._setOrReportSpecialColor(t,0)}setOrReportBgColor(t){return this._setOrReportSpecialColor(t,1)}setOrReportCursorColor(t){return this._setOrReportSpecialColor(t,2)}restoreIndexedColor(t){if(!t)return this._onColor.fire([{type:2}]),!0;let e=[],n=t.split(";");for(let s=0;s<n.length;++s)if(/^\d+$/.exec(n[s])){let r=parseInt(n[s]);lO(r)&&e.push({type:2,index:r})}return e.length&&this._onColor.fire(e),!0}restoreFgColor(t){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(t){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(t){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,ml),!0}selectCharset(t){return t.length!==2?(this.selectDefaultCharset(),!0):(t[0]==="/"||this._charsetService.setgCharset(Pse[t[0]],qn[t[1]]||ml),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let t=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,t,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=Dn.clone(),this._eraseAttrDataInternal=Dn.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=this._curAttrData.bg&67108863,this._eraseAttrDataInternal}setgLevel(t){return this._charsetService.setgLevel(t),!0}screenAlignmentPattern(){let t=new Jr;t.content=1<<22|69,t.fg=this._curAttrData.fg,t.bg=this._curAttrData.bg,this._setCursor(0,0);for(let e=0;e<this._bufferService.rows;++e){let n=this._activeBuffer.ybase+this._activeBuffer.y+e,s=this._activeBuffer.lines.get(n);s&&(s.fill(t),s.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(t,e){let n=o=>(this._coreService.triggerDataEvent(`${be.ESC}${o}${be.ESC}\\`),!0),s=this._bufferService.buffer,r=this._optionsService.rawOptions;return n(t==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:t==='"p'?'P1$r61;1"p':t==="r"?`P1$r${s.scrollTop+1};${s.scrollBottom+1}r`:t==="m"?"P1$r0m":t===" q"?`P1$r${{block:2,underline:4,bar:6}[r.cursorStyle]-(r.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(t,e){this._dirtyRowTracker.markRangeDirty(t,e)}},e2=class{constructor(t){this._bufferService=t,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(t){t<this.start?this.start=t:t>this.end&&(this.end=t)}markRangeDirty(t,e){t>e&&(oO=t,t=e,e=oO),t<this.start&&(this.start=t),e>this.end&&(this.end=e)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};e2=xn([Pe(0,$s)],e2);function lO(t){return 0<=t&&t<256}var zse=5e7,cO=12,Use=50,Hse=class extends kt{constructor(t){super(),this._action=t,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this._register(new Te),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(t,e){if(e!==void 0&&this._syncCalls>e){this._syncCalls=0;return}if(this._pendingData+=t.length,this._writeBuffer.push(t),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;this._isSyncWriting=!0;let n;for(;n=this._writeBuffer.shift();){this._action(n);let s=this._callbacks.shift();s&&s()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(t,e){if(this._pendingData>zse)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput){this._didUserInput=!1,this._pendingData+=t.length,this._writeBuffer.push(t),this._callbacks.push(e),this._innerWrite();return}setTimeout(()=>this._innerWrite())}this._pendingData+=t.length,this._writeBuffer.push(t),this._callbacks.push(e)}_innerWrite(t=0,e=!0){let n=t||performance.now();for(;this._writeBuffer.length>this._bufferOffset;){let s=this._writeBuffer[this._bufferOffset],r=this._action(s,e);if(r){let o=c=>performance.now()-n>=cO?setTimeout(()=>this._innerWrite(0,c)):this._innerWrite(n,c);r.catch(c=>(queueMicrotask(()=>{throw c}),Promise.resolve(!1))).then(o);return}let i=this._callbacks[this._bufferOffset];if(i&&i(),this._bufferOffset++,this._pendingData-=s.length,performance.now()-n>=cO)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>Use&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}},t2=class{constructor(t){this._bufferService=t,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(t){let e=this._bufferService.buffer;if(t.id===void 0){let c=e.addMarker(e.ybase+e.y),u={data:t,id:this._nextId++,lines:[c]};return c.onDispose(()=>this._removeMarkerFromLink(u,c)),this._dataByLinkId.set(u.id,u),u.id}let n=t,s=this._getEntryIdKey(n),r=this._entriesWithId.get(s);if(r)return this.addLineToLink(r.id,e.ybase+e.y),r.id;let i=e.addMarker(e.ybase+e.y),o={id:this._nextId++,key:this._getEntryIdKey(n),data:n,lines:[i]};return i.onDispose(()=>this._removeMarkerFromLink(o,i)),this._entriesWithId.set(o.key,o),this._dataByLinkId.set(o.id,o),o.id}addLineToLink(t,e){let n=this._dataByLinkId.get(t);if(n&&n.lines.every(s=>s.line!==e)){let s=this._bufferService.buffer.addMarker(e);n.lines.push(s),s.onDispose(()=>this._removeMarkerFromLink(n,s))}}getLinkData(t){return this._dataByLinkId.get(t)?.data}_getEntryIdKey(t){return`${t.id};;${t.uri}`}_removeMarkerFromLink(t,e){let n=t.lines.indexOf(e);n!==-1&&(t.lines.splice(n,1),t.lines.length===0&&(t.data.id!==void 0&&this._entriesWithId.delete(t.key),this._dataByLinkId.delete(t.id)))}};t2=xn([Pe(0,$s)],t2);var uO=!1,Fse=class extends kt{constructor(t){super(),this._windowsWrappingHeuristics=this._register(new th),this._onBinary=this._register(new Te),this.onBinary=this._onBinary.event,this._onData=this._register(new Te),this.onData=this._onData.event,this._onLineFeed=this._register(new Te),this.onLineFeed=this._onLineFeed.event,this._onResize=this._register(new Te),this.onResize=this._onResize.event,this._onWriteParsed=this._register(new Te),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this._register(new Te),this._instantiationService=new fse,this.optionsService=this._register(new Sse(t)),this._instantiationService.setService(zs,this.optionsService),this._bufferService=this._register(this._instantiationService.createInstance(Zk)),this._instantiationService.setService($s,this._bufferService),this._logService=this._register(this._instantiationService.createInstance(Yk)),this._instantiationService.setService(LL,this._logService),this.coreService=this._register(this._instantiationService.createInstance(Xk)),this._instantiationService.setService(fc,this.coreService),this.coreMouseService=this._register(this._instantiationService.createInstance(Jk)),this._instantiationService.setService(BL,this.coreMouseService),this.unicodeService=this._register(this._instantiationService.createInstance(kl)),this._instantiationService.setService(cte,this.unicodeService),this._charsetService=this._instantiationService.createInstance(Ase),this._instantiationService.setService(lte,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(t2),this._instantiationService.setService(IL,this._oscLinkService),this._inputHandler=this._register(new $se(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this._register(ds.forward(this._inputHandler.onLineFeed,this._onLineFeed)),this._register(this._inputHandler),this._register(ds.forward(this._bufferService.onResize,this._onResize)),this._register(ds.forward(this.coreService.onData,this._onData)),this._register(ds.forward(this.coreService.onBinary,this._onBinary)),this._register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom(!0))),this._register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this._register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this._register(this._bufferService.onScroll(()=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this._register(new Hse((e,n)=>this._inputHandler.parse(e,n))),this._register(ds.forward(this._writeBuffer.onWriteParsed,this._onWriteParsed))}get onScroll(){return this._onScrollApi||(this._onScrollApi=this._register(new Te),this._onScroll.event(t=>{this._onScrollApi?.fire(t.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(t){for(let e in t)this.optionsService.options[e]=t[e]}write(t,e){this._writeBuffer.write(t,e)}writeSync(t,e){this._logService.logLevel<=3&&!uO&&(this._logService.warn("writeSync is unreliable and will be removed soon."),uO=!0),this._writeBuffer.writeSync(t,e)}input(t,e=!0){this.coreService.triggerDataEvent(t,e)}resize(t,e){isNaN(t)||isNaN(e)||(t=Math.max(t,mI),e=Math.max(e,gI),this._bufferService.resize(t,e))}scroll(t,e=!1){this._bufferService.scroll(t,e)}scrollLines(t,e){this._bufferService.scrollLines(t,e)}scrollPages(t){this.scrollLines(t*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(t){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(t){let e=t-this._bufferService.buffer.ydisp;e!==0&&this.scrollLines(e)}registerEscHandler(t,e){return this._inputHandler.registerEscHandler(t,e)}registerDcsHandler(t,e){return this._inputHandler.registerDcsHandler(t,e)}registerCsiHandler(t,e){return this._inputHandler.registerCsiHandler(t,e)}registerOscHandler(t,e){return this._inputHandler.registerOscHandler(t,e)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let t=!1,e=this.optionsService.rawOptions.windowsPty;e&&e.buildNumber!==void 0&&e.buildNumber!==void 0?t=e.backend==="conpty"&&e.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(t=!0),t?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let t=[];t.push(this.onLineFeed(tO.bind(null,this._bufferService))),t.push(this.registerCsiHandler({final:"H"},()=>(tO(this._bufferService),!1))),this._windowsWrappingHeuristics.value=hn(()=>{for(let e of t)e.dispose()})}}},Vse={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};function qse(t,e,n,s){let r={type:0,cancel:!1,key:void 0},i=(t.shiftKey?1:0)|(t.altKey?2:0)|(t.ctrlKey?4:0)|(t.metaKey?8:0);switch(t.keyCode){case 0:t.key==="UIKeyInputUpArrow"?e?r.key=be.ESC+"OA":r.key=be.ESC+"[A":t.key==="UIKeyInputLeftArrow"?e?r.key=be.ESC+"OD":r.key=be.ESC+"[D":t.key==="UIKeyInputRightArrow"?e?r.key=be.ESC+"OC":r.key=be.ESC+"[C":t.key==="UIKeyInputDownArrow"&&(e?r.key=be.ESC+"OB":r.key=be.ESC+"[B");break;case 8:r.key=t.ctrlKey?"\b":be.DEL,t.altKey&&(r.key=be.ESC+r.key);break;case 9:if(t.shiftKey){r.key=be.ESC+"[Z";break}r.key=be.HT,r.cancel=!0;break;case 13:r.key=t.altKey?be.ESC+be.CR:be.CR,r.cancel=!0;break;case 27:r.key=be.ESC,t.altKey&&(r.key=be.ESC+be.ESC),r.cancel=!0;break;case 37:if(t.metaKey)break;i?r.key=be.ESC+"[1;"+(i+1)+"D":e?r.key=be.ESC+"OD":r.key=be.ESC+"[D";break;case 39:if(t.metaKey)break;i?r.key=be.ESC+"[1;"+(i+1)+"C":e?r.key=be.ESC+"OC":r.key=be.ESC+"[C";break;case 38:if(t.metaKey)break;i?r.key=be.ESC+"[1;"+(i+1)+"A":e?r.key=be.ESC+"OA":r.key=be.ESC+"[A";break;case 40:if(t.metaKey)break;i?r.key=be.ESC+"[1;"+(i+1)+"B":e?r.key=be.ESC+"OB":r.key=be.ESC+"[B";break;case 45:!t.shiftKey&&!t.ctrlKey&&(r.key=be.ESC+"[2~");break;case 46:i?r.key=be.ESC+"[3;"+(i+1)+"~":r.key=be.ESC+"[3~";break;case 36:i?r.key=be.ESC+"[1;"+(i+1)+"H":e?r.key=be.ESC+"OH":r.key=be.ESC+"[H";break;case 35:i?r.key=be.ESC+"[1;"+(i+1)+"F":e?r.key=be.ESC+"OF":r.key=be.ESC+"[F";break;case 33:t.shiftKey?r.type=2:t.ctrlKey?r.key=be.ESC+"[5;"+(i+1)+"~":r.key=be.ESC+"[5~";break;case 34:t.shiftKey?r.type=3:t.ctrlKey?r.key=be.ESC+"[6;"+(i+1)+"~":r.key=be.ESC+"[6~";break;case 112:i?r.key=be.ESC+"[1;"+(i+1)+"P":r.key=be.ESC+"OP";break;case 113:i?r.key=be.ESC+"[1;"+(i+1)+"Q":r.key=be.ESC+"OQ";break;case 114:i?r.key=be.ESC+"[1;"+(i+1)+"R":r.key=be.ESC+"OR";break;case 115:i?r.key=be.ESC+"[1;"+(i+1)+"S":r.key=be.ESC+"OS";break;case 116:i?r.key=be.ESC+"[15;"+(i+1)+"~":r.key=be.ESC+"[15~";break;case 117:i?r.key=be.ESC+"[17;"+(i+1)+"~":r.key=be.ESC+"[17~";break;case 118:i?r.key=be.ESC+"[18;"+(i+1)+"~":r.key=be.ESC+"[18~";break;case 119:i?r.key=be.ESC+"[19;"+(i+1)+"~":r.key=be.ESC+"[19~";break;case 120:i?r.key=be.ESC+"[20;"+(i+1)+"~":r.key=be.ESC+"[20~";break;case 121:i?r.key=be.ESC+"[21;"+(i+1)+"~":r.key=be.ESC+"[21~";break;case 122:i?r.key=be.ESC+"[23;"+(i+1)+"~":r.key=be.ESC+"[23~";break;case 123:i?r.key=be.ESC+"[24;"+(i+1)+"~":r.key=be.ESC+"[24~";break;default:if(t.ctrlKey&&!t.shiftKey&&!t.altKey&&!t.metaKey)t.keyCode>=65&&t.keyCode<=90?r.key=String.fromCharCode(t.keyCode-64):t.keyCode===32?r.key=be.NUL:t.keyCode>=51&&t.keyCode<=55?r.key=String.fromCharCode(t.keyCode-51+27):t.keyCode===56?r.key=be.DEL:t.keyCode===219?r.key=be.ESC:t.keyCode===220?r.key=be.FS:t.keyCode===221&&(r.key=be.GS);else if((!n||s)&&t.altKey&&!t.metaKey){let o=Vse[t.keyCode]?.[t.shiftKey?1:0];if(o)r.key=be.ESC+o;else if(t.keyCode>=65&&t.keyCode<=90){let c=t.ctrlKey?t.keyCode-64:t.keyCode+32,u=String.fromCharCode(c);t.shiftKey&&(u=u.toUpperCase()),r.key=be.ESC+u}else if(t.keyCode===32)r.key=be.ESC+(t.ctrlKey?be.NUL:" ");else if(t.key==="Dead"&&t.code.startsWith("Key")){let c=t.code.slice(3,4);t.shiftKey||(c=c.toLowerCase()),r.key=be.ESC+c,r.cancel=!0}}else n&&!t.altKey&&!t.ctrlKey&&!t.shiftKey&&t.metaKey?t.keyCode===65&&(r.type=1):t.key&&!t.ctrlKey&&!t.altKey&&!t.metaKey&&t.keyCode>=48&&t.key.length===1?r.key=t.key:t.key&&t.ctrlKey&&(t.key==="_"&&(r.key=be.US),t.key==="@"&&(r.key=be.NUL));break}return r}var kn=0,Kse=class{constructor(t){this._getKey=t,this._array=[],this._insertedValues=[],this._flushInsertedTask=new qy,this._isFlushingInserted=!1,this._deletedIndices=[],this._flushDeletedTask=new qy,this._isFlushingDeleted=!1}clear(){this._array.length=0,this._insertedValues.length=0,this._flushInsertedTask.clear(),this._isFlushingInserted=!1,this._deletedIndices.length=0,this._flushDeletedTask.clear(),this._isFlushingDeleted=!1}insert(t){this._flushCleanupDeleted(),this._insertedValues.length===0&&this._flushInsertedTask.enqueue(()=>this._flushInserted()),this._insertedValues.push(t)}_flushInserted(){let t=this._insertedValues.sort((r,i)=>this._getKey(r)-this._getKey(i)),e=0,n=0,s=new Array(this._array.length+this._insertedValues.length);for(let r=0;r<s.length;r++)n>=this._array.length||this._getKey(t[e])<=this._getKey(this._array[n])?(s[r]=t[e],e++):s[r]=this._array[n++];this._array=s,this._insertedValues.length=0}_flushCleanupInserted(){!this._isFlushingInserted&&this._insertedValues.length>0&&this._flushInsertedTask.flush()}delete(t){if(this._flushCleanupInserted(),this._array.length===0)return!1;let e=this._getKey(t);if(e===void 0||(kn=this._search(e),kn===-1)||this._getKey(this._array[kn])!==e)return!1;do if(this._array[kn]===t)return this._deletedIndices.length===0&&this._flushDeletedTask.enqueue(()=>this._flushDeleted()),this._deletedIndices.push(kn),!0;while(++kn<this._array.length&&this._getKey(this._array[kn])===e);return!1}_flushDeleted(){this._isFlushingDeleted=!0;let t=this._deletedIndices.sort((r,i)=>r-i),e=0,n=new Array(this._array.length-t.length),s=0;for(let r=0;r<this._array.length;r++)t[e]===r?e++:n[s++]=this._array[r];this._array=n,this._deletedIndices.length=0,this._isFlushingDeleted=!1}_flushCleanupDeleted(){!this._isFlushingDeleted&&this._deletedIndices.length>0&&this._flushDeletedTask.flush()}*getKeyIterator(t){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(kn=this._search(t),!(kn<0||kn>=this._array.length)&&this._getKey(this._array[kn])===t))do yield this._array[kn];while(++kn<this._array.length&&this._getKey(this._array[kn])===t)}forEachByKey(t,e){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(kn=this._search(t),!(kn<0||kn>=this._array.length)&&this._getKey(this._array[kn])===t))do e(this._array[kn]);while(++kn<this._array.length&&this._getKey(this._array[kn])===t)}values(){return this._flushCleanupInserted(),this._flushCleanupDeleted(),[...this._array].values()}_search(t){let e=0,n=this._array.length-1;for(;n>=e;){let s=e+n>>1,r=this._getKey(this._array[s]);if(r>t)n=s-1;else if(r<t)e=s+1;else{for(;s>0&&this._getKey(this._array[s-1])===t;)s--;return s}}return e}},ew=0,hO=0,Wse=class extends kt{constructor(){super(),this._decorations=new Kse(t=>t?.marker.line),this._onDecorationRegistered=this._register(new Te),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this._register(new Te),this.onDecorationRemoved=this._onDecorationRemoved.event,this._register(hn(()=>this.reset()))}get decorations(){return this._decorations.values()}registerDecoration(t){if(t.marker.isDisposed)return;let e=new Gse(t);if(e){let n=e.marker.onDispose(()=>e.dispose()),s=e.onDispose(()=>{s.dispose(),e&&(this._decorations.delete(e)&&this._onDecorationRemoved.fire(e),n.dispose())});this._decorations.insert(e),this._onDecorationRegistered.fire(e)}return e}reset(){for(let t of this._decorations.values())t.dispose();this._decorations.clear()}*getDecorationsAtCell(t,e,n){let s=0,r=0;for(let i of this._decorations.getKeyIterator(e))s=i.options.x??0,r=s+(i.options.width??1),t>=s&&t<r&&(!n||(i.options.layer??"bottom")===n)&&(yield i)}forEachDecorationAtCell(t,e,n,s){this._decorations.forEachByKey(e,r=>{ew=r.options.x??0,hO=ew+(r.options.width??1),t>=ew&&t<hO&&(!n||(r.options.layer??"bottom")===n)&&s(r)})}},Gse=class extends Bo{constructor(t){super(),this.options=t,this.onRenderEmitter=this.add(new Te),this.onRender=this.onRenderEmitter.event,this._onDispose=this.add(new Te),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=t.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=gn.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=gn.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}dispose(){this._onDispose.fire(),super.dispose()}},Yse=1e3,Zse=class{constructor(t,e=Yse){this._renderCallback=t,this._debounceThresholdMS=e,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(t,e,n){this._rowCount=n,t=t!==void 0?t:0,e=e!==void 0?e:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,t):t,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,e):e;let s=performance.now();if(s-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=s,this._innerRefresh();else if(!this._additionalRefreshRequested){let r=s-this._lastRefreshMs,i=this._debounceThresholdMS-r;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=performance.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},i)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let t=Math.max(this._rowStart,0),e=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(t,e)}},dO=20,Ky=class extends kt{constructor(t,e,n,s){super(),this._terminal=t,this._coreBrowserService=n,this._renderService=s,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="";let r=this._coreBrowserService.mainDocument;this._accessibilityContainer=r.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=r.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let i=0;i<this._terminal.rows;i++)this._rowElements[i]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[i]);if(this._topBoundaryFocusListener=i=>this._handleBoundaryFocus(i,0),this._bottomBoundaryFocusListener=i=>this._handleBoundaryFocus(i,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=r.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this._register(new Zse(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this._register(this._terminal.onResize(i=>this._handleResize(i.rows))),this._register(this._terminal.onRender(i=>this._refreshRows(i.start,i.end))),this._register(this._terminal.onScroll(()=>this._refreshRows())),this._register(this._terminal.onA11yChar(i=>this._handleChar(i))),this._register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this._register(this._terminal.onA11yTab(i=>this._handleTab(i))),this._register(this._terminal.onKey(i=>this._handleKey(i.key))),this._register(this._terminal.onBlur(()=>this._clearLiveRegion())),this._register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._register(ht(r,"selectionchange",()=>this._handleSelectionChange())),this._register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRowsDimensions(),this._refreshRows(),this._register(hn(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(t){for(let e=0;e<t;e++)this._handleChar(" ")}_handleChar(t){this._liveRegionLineCount<dO+1&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==t&&(this._charsToAnnounce+=t):this._charsToAnnounce+=t,t===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===dO+1&&(this._liveRegion.textContent+=xk.get())))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(t){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(t)||this._charsToConsume.push(t)}_refreshRows(t,e){this._liveRegionDebouncer.refresh(t,e,this._terminal.rows)}_renderRows(t,e){let n=this._terminal.buffer,s=n.lines.length.toString();for(let r=t;r<=e;r++){let i=n.lines.get(n.ydisp+r),o=[],c=i?.translateToString(!0,void 0,void 0,o)||"",u=(n.ydisp+r+1).toString(),h=this._rowElements[r];h&&(c.length===0?(h.textContent="",this._rowColumns.set(h,[0,1])):(h.textContent=c,this._rowColumns.set(h,o)),h.setAttribute("aria-posinset",u),h.setAttribute("aria-setsize",s),this._alignRowWidth(h))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(t,e){let n=t.target,s=this._rowElements[e===0?1:this._rowElements.length-2],r=n.getAttribute("aria-posinset"),i=e===0?"1":`${this._terminal.buffer.lines.length}`;if(r===i||t.relatedTarget!==s)return;let o,c;if(e===0?(o=n,c=this._rowElements.pop(),this._rowContainer.removeChild(c)):(o=this._rowElements.shift(),c=n,this._rowContainer.removeChild(o)),o.removeEventListener("focus",this._topBoundaryFocusListener),c.removeEventListener("focus",this._bottomBoundaryFocusListener),e===0){let u=this._createAccessibilityTreeNode();this._rowElements.unshift(u),this._rowContainer.insertAdjacentElement("afterbegin",u)}else{let u=this._createAccessibilityTreeNode();this._rowElements.push(u),this._rowContainer.appendChild(u)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(e===0?-1:1),this._rowElements[e===0?1:this._rowElements.length-2].focus(),t.preventDefault(),t.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;let t=this._coreBrowserService.mainDocument.getSelection();if(!t)return;if(t.isCollapsed){this._rowContainer.contains(t.anchorNode)&&this._terminal.clearSelection();return}if(!t.anchorNode||!t.focusNode){console.error("anchorNode and/or focusNode are null");return}let e={node:t.anchorNode,offset:t.anchorOffset},n={node:t.focusNode,offset:t.focusOffset};if((e.node.compareDocumentPosition(n.node)&Node.DOCUMENT_POSITION_PRECEDING||e.node===n.node&&e.offset>n.offset)&&([e,n]=[n,e]),e.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(e={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(e.node))return;let s=this._rowElements.slice(-1)[0];if(n.node.compareDocumentPosition(s)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(n={node:s,offset:s.textContent?.length??0}),!this._rowContainer.contains(n.node))return;let r=({node:c,offset:u})=>{let h=c instanceof Text?c.parentNode:c,m=parseInt(h?.getAttribute("aria-posinset"),10)-1;if(isNaN(m))return console.warn("row is invalid. Race condition?"),null;let p=this._rowColumns.get(h);if(!p)return console.warn("columns is null. Race condition?"),null;let y=u<p.length?p[u]:p.slice(-1)[0]+1;return y>=this._terminal.cols&&(++m,y=0),{row:m,column:y}},i=r(e),o=r(n);if(!(!i||!o)){if(i.row>o.row||i.row===o.row&&i.column>=o.column)throw new Error("invalid range");this._terminal.select(i.column,i.row,(o.row-i.row)*this._terminal.cols-i.column+o.column)}}_handleResize(t){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let e=this._rowContainer.children.length;e<this._terminal.rows;e++)this._rowElements[e]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[e]);for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let t=this._coreBrowserService.mainDocument.createElement("div");return t.setAttribute("role","listitem"),t.tabIndex=-1,this._refreshRowDimensions(t),t}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){Object.assign(this._accessibilityContainer.style,{width:`${this._renderService.dimensions.css.canvas.width}px`,fontSize:`${this._terminal.options.fontSize}px`}),this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let t=0;t<this._terminal.rows;t++)this._refreshRowDimensions(this._rowElements[t]),this._alignRowWidth(this._rowElements[t])}}_refreshRowDimensions(t){t.style.height=`${this._renderService.dimensions.css.cell.height}px`}_alignRowWidth(t){t.style.transform="";let e=t.getBoundingClientRect().width,n=this._rowColumns.get(t)?.slice(-1)?.[0];if(!n)return;let s=n*this._renderService.dimensions.css.cell.width;t.style.transform=`scaleX(${s/e})`}};Ky=xn([Pe(1,rN),Pe(2,Pa),Pe(3,$a)],Ky);var n2=class extends kt{constructor(t,e,n,s,r){super(),this._element=t,this._mouseService=e,this._renderService=n,this._bufferService=s,this._linkProviderService=r,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this._register(new Te),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this._register(new Te),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this._register(hn(()=>{tc(this._linkCacheDisposables),this._linkCacheDisposables.length=0,this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this._register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this._register(ht(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this._register(ht(this._element,"mousemove",this._handleMouseMove.bind(this))),this._register(ht(this._element,"mousedown",this._handleMouseDown.bind(this))),this._register(ht(this._element,"mouseup",this._handleMouseUp.bind(this)))}get currentLink(){return this._currentLink}_handleMouseMove(t){this._lastMouseEvent=t;let e=this._positionFromMouseEvent(t,this._element,this._mouseService);if(!e)return;this._isMouseOut=!1;let n=t.composedPath();for(let s=0;s<n.length;s++){let r=n[s];if(r.classList.contains("xterm"))break;if(r.classList.contains("xterm-hover"))return}(!this._lastBufferCell||e.x!==this._lastBufferCell.x||e.y!==this._lastBufferCell.y)&&(this._handleHover(e),this._lastBufferCell=e)}_handleHover(t){if(this._activeLine!==t.y||this._wasResized){this._clearCurrentLink(),this._askForLink(t,!1),this._wasResized=!1;return}this._currentLink&&this._linkAtPosition(this._currentLink.link,t)||(this._clearCurrentLink(),this._askForLink(t,!0))}_askForLink(t,e){(!this._activeProviderReplies||!e)&&(this._activeProviderReplies?.forEach(s=>{s?.forEach(r=>{r.link.dispose&&r.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=t.y);let n=!1;for(let[s,r]of this._linkProviderService.linkProviders.entries())e?this._activeProviderReplies?.get(s)&&(n=this._checkLinkProviderResult(s,t,n)):r.provideLinks(t.y,i=>{if(this._isMouseOut)return;let o=i?.map(c=>({link:c}));this._activeProviderReplies?.set(s,o),n=this._checkLinkProviderResult(s,t,n),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(t.y,this._activeProviderReplies)})}_removeIntersectingLinks(t,e){let n=new Set;for(let s=0;s<e.size;s++){let r=e.get(s);if(r)for(let i=0;i<r.length;i++){let o=r[i],c=o.link.range.start.y<t?0:o.link.range.start.x,u=o.link.range.end.y>t?this._bufferService.cols:o.link.range.end.x;for(let h=c;h<=u;h++){if(n.has(h)){r.splice(i--,1);break}n.add(h)}}}}_checkLinkProviderResult(t,e,n){if(!this._activeProviderReplies)return n;let s=this._activeProviderReplies.get(t),r=!1;for(let i=0;i<t;i++)(!this._activeProviderReplies.has(i)||this._activeProviderReplies.get(i))&&(r=!0);if(!r&&s){let i=s.find(o=>this._linkAtPosition(o.link,e));i&&(n=!0,this._handleNewLink(i))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!n)for(let i=0;i<this._activeProviderReplies.size;i++){let o=this._activeProviderReplies.get(i)?.find(c=>this._linkAtPosition(c.link,e));if(o){n=!0,this._handleNewLink(o);break}}return n}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(t){if(!this._currentLink)return;let e=this._positionFromMouseEvent(t,this._element,this._mouseService);e&&this._mouseDownLink&&Xse(this._mouseDownLink.link,this._currentLink.link)&&this._linkAtPosition(this._currentLink.link,e)&&this._currentLink.link.activate(t,this._currentLink.link.text)}_clearCurrentLink(t,e){!this._currentLink||!this._lastMouseEvent||(!t||!e||this._currentLink.link.range.start.y>=t&&this._currentLink.link.range.end.y<=e)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,tc(this._linkCacheDisposables),this._linkCacheDisposables.length=0)}_handleNewLink(t){if(!this._lastMouseEvent)return;let e=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);e&&this._linkAtPosition(t.link,e)&&(this._currentLink=t,this._currentLink.state={decorations:{underline:t.link.decorations===void 0?!0:t.link.decorations.underline,pointerCursor:t.link.decorations===void 0?!0:t.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,t.link,this._lastMouseEvent),t.link.decorations={},Object.defineProperties(t.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:n=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==n&&(this._currentLink.state.decorations.pointerCursor=n,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",n))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:n=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==n&&(this._currentLink.state.decorations.underline=n,this._currentLink.state.isHovered&&this._fireUnderlineEvent(t.link,n))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(n=>{if(!this._currentLink)return;let s=n.start===0?0:n.start+1+this._bufferService.buffer.ydisp,r=this._bufferService.buffer.ydisp+1+n.end;if(this._currentLink.link.range.start.y>=s&&this._currentLink.link.range.end.y<=r&&(this._clearCurrentLink(s,r),this._lastMouseEvent)){let i=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);i&&this._askForLink(i,!1)}})))}_linkHover(t,e,n){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(e,!0),this._currentLink.state.decorations.pointerCursor&&t.classList.add("xterm-cursor-pointer")),e.hover&&e.hover(n,e.text)}_fireUnderlineEvent(t,e){let n=t.range,s=this._bufferService.buffer.ydisp,r=this._createLinkUnderlineEvent(n.start.x-1,n.start.y-s-1,n.end.x,n.end.y-s-1,void 0);(e?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(r)}_linkLeave(t,e,n){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(e,!1),this._currentLink.state.decorations.pointerCursor&&t.classList.remove("xterm-cursor-pointer")),e.leave&&e.leave(n,e.text)}_linkAtPosition(t,e){let n=t.range.start.y*this._bufferService.cols+t.range.start.x,s=t.range.end.y*this._bufferService.cols+t.range.end.x,r=e.y*this._bufferService.cols+e.x;return n<=r&&r<=s}_positionFromMouseEvent(t,e,n){let s=n.getCoords(t,e,this._bufferService.cols,this._bufferService.rows);if(s)return{x:s[0],y:s[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(t,e,n,s,r){return{x1:t,y1:e,x2:n,y2:s,cols:this._bufferService.cols,fg:r}}};n2=xn([Pe(1,iN),Pe(2,$a),Pe(3,$s),Pe(4,$L)],n2);function Xse(t,e){return t.text===e.text&&t.range.start.x===e.range.start.x&&t.range.start.y===e.range.start.y&&t.range.end.x===e.range.end.x&&t.range.end.y===e.range.end.y}var Jse=class extends Fse{constructor(t={}){super(t),this._linkifier=this._register(new th),this.browser=rI,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this._register(new th),this._onCursorMove=this._register(new Te),this.onCursorMove=this._onCursorMove.event,this._onKey=this._register(new Te),this.onKey=this._onKey.event,this._onRender=this._register(new Te),this.onRender=this._onRender.event,this._onSelectionChange=this._register(new Te),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this._register(new Te),this.onTitleChange=this._onTitleChange.event,this._onBell=this._register(new Te),this.onBell=this._onBell.event,this._onFocus=this._register(new Te),this._onBlur=this._register(new Te),this._onA11yCharEmitter=this._register(new Te),this._onA11yTabEmitter=this._register(new Te),this._onWillOpen=this._register(new Te),this._setup(),this._decorationService=this._instantiationService.createInstance(Wse),this._instantiationService.setService(Jp,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(Une),this._instantiationService.setService($L,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(Sk)),this._register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this._register(this._inputHandler.onRequestRefreshRows(e=>this.refresh(e?.start??0,e?.end??this.rows-1))),this._register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this._register(this._inputHandler.onRequestReset(()=>this.reset())),this._register(this._inputHandler.onRequestWindowsOptionsReport(e=>this._reportWindowsOptions(e))),this._register(this._inputHandler.onColor(e=>this._handleColorEvent(e))),this._register(ds.forward(this._inputHandler.onCursorMove,this._onCursorMove)),this._register(ds.forward(this._inputHandler.onTitleChange,this._onTitleChange)),this._register(ds.forward(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this._register(ds.forward(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this._register(this._bufferService.onResize(e=>this._afterResize(e.cols,e.rows))),this._register(hn(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}get linkifier(){return this._linkifier.value}get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}_handleColorEvent(t){if(this._themeService)for(let e of t){let n,s="";switch(e.index){case 256:n="foreground",s="10";break;case 257:n="background",s="11";break;case 258:n="cursor",s="12";break;default:n="ansi",s="4;"+e.index}switch(e.type){case 0:let r=rn.toColorRGB(n==="ansi"?this._themeService.colors.ansi[e.index]:this._themeService.colors[n]);this.coreService.triggerDataEvent(`${be.ESC}]${s};${Ise(r)}${nI.ST}`);break;case 1:if(n==="ansi")this._themeService.modifyColors(i=>i.ansi[e.index]=Bn.toColor(...e.color));else{let i=n;this._themeService.modifyColors(o=>o[i]=Bn.toColor(...e.color))}break;case 2:this._themeService.restoreColor(e.index);break}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(t){t?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(Ky,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(t){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(be.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(be.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let t=this.buffer.ybase+this.buffer.y,e=this.buffer.lines.get(t);if(!e)return;let n=Math.min(this.buffer.x,this.cols-1),s=this._renderService.dimensions.css.cell.height,r=e.getWidth(n),i=this._renderService.dimensions.css.cell.width*r,o=this.buffer.y*this._renderService.dimensions.css.cell.height,c=n*this._renderService.dimensions.css.cell.width;this.textarea.style.left=c+"px",this.textarea.style.top=o+"px",this.textarea.style.width=i+"px",this.textarea.style.height=s+"px",this.textarea.style.lineHeight=s+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this._register(ht(this.element,"copy",e=>{this.hasSelection()&&nte(e,this._selectionService)}));let t=e=>ste(e,this.textarea,this.coreService,this.optionsService);this._register(ht(this.textarea,"paste",t)),this._register(ht(this.element,"paste",t)),iI?this._register(ht(this.element,"mousedown",e=>{e.button===2&&wR(e,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this._register(ht(this.element,"contextmenu",e=>{wR(e,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),fN&&this._register(ht(this.element,"auxclick",e=>{e.button===1&&TL(e,this.textarea,this.screenElement)}))}_bindKeys(){this._register(ht(this.textarea,"keyup",t=>this._keyUp(t),!0)),this._register(ht(this.textarea,"keydown",t=>this._keyDown(t),!0)),this._register(ht(this.textarea,"keypress",t=>this._keyPress(t),!0)),this._register(ht(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this._register(ht(this.textarea,"compositionupdate",t=>this._compositionHelper.compositionupdate(t))),this._register(ht(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this._register(ht(this.textarea,"input",t=>this._inputEvent(t),!0)),this._register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(t){if(!t)throw new Error("Terminal requires a parent element.");if(t.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService){this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView);return}this._document=t.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),t.appendChild(this.element);let e=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),e.appendChild(this._viewportElement),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._register(ht(this.screenElement,"mousemove",r=>this.updateCursorStyle(r))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),e.appendChild(this.screenElement);let n=this.textarea=this._document.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",_k.get()),lI||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._register(this.optionsService.onSpecificOptionChange("disableStdin",()=>n.readOnly=this.optionsService.rawOptions.disableStdin)),this.textarea.readOnly=this.optionsService.rawOptions.disableStdin,this._coreBrowserService=this._register(this._instantiationService.createInstance($ne,this.textarea,t.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(Pa,this._coreBrowserService),this._register(ht(this.textarea,"focus",r=>this._handleTextAreaFocus(r))),this._register(ht(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(Vk,this._document,this._helperContainer),this._instantiationService.setService(yb,this._charSizeService),this._themeService=this._instantiationService.createInstance(Gk),this._instantiationService.setService(kh,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(Fy),this._instantiationService.setService(PL,this._characterJoinerService),this._renderService=this._register(this._instantiationService.createInstance(Kk,this.rows,this.screenElement)),this._instantiationService.setService($a,this._renderService),this._register(this._renderService.onRenderedViewportChange(r=>this._onRender.fire(r))),this.onResize(r=>this._renderService.resize(r.cols,r.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(Uk,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(qk),this._instantiationService.setService(iN,this._mouseService);let s=this._linkifier.value=this._register(this._instantiationService.createInstance(n2,this.screenElement));this.element.appendChild(e);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this._register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this._register(this.onBlur(()=>this._renderService.handleBlur())),this._register(this.onFocus(()=>this._renderService.handleFocus())),this._viewport=this._register(this._instantiationService.createInstance($k,this.element,this.screenElement)),this._register(this._viewport.onRequestScrollLines(r=>{super.scrollLines(r,!1),this.refresh(0,this.rows-1)})),this._selectionService=this._register(this._instantiationService.createInstance(Wk,this.element,this.screenElement,s)),this._instantiationService.setService(hte,this._selectionService),this._register(this._selectionService.onRequestScrollLines(r=>this.scrollLines(r.amount,r.suppressScrollEvent))),this._register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this._register(this._selectionService.onRequestRedraw(r=>this._renderService.handleSelectionChanged(r.start,r.end,r.columnSelectMode))),this._register(this._selectionService.onLinuxMouseSelection(r=>{this.textarea.value=r,this.textarea.focus(),this.textarea.select()})),this._register(ds.any(this._onScroll.event,this._inputHandler.onScroll)(()=>{this._selectionService.refresh(),this._viewport?.queueSync()})),this._register(this._instantiationService.createInstance(zk,this.screenElement)),this._register(ht(this.element,"mousedown",r=>this._selectionService.handleMouseDown(r))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(Ky,this)),this._register(this.optionsService.onSpecificOptionChange("screenReaderMode",r=>this._handleScreenReaderModeOptionChange(r))),this.options.overviewRuler.width&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(Hy,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRuler",r=>{!this._overviewRulerRenderer&&r&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(Hy,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(Fk,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){let t=this,e=this.element;function n(i){let o=t._mouseService.getMouseReportCoords(i,t.screenElement);if(!o)return!1;let c,u;switch(i.overrideType||i.type){case"mousemove":u=32,i.buttons===void 0?(c=3,i.button!==void 0&&(c=i.button<3?i.button:3)):c=i.buttons&1?0:i.buttons&4?1:i.buttons&2?2:3;break;case"mouseup":u=0,c=i.button<3?i.button:3;break;case"mousedown":u=1,c=i.button<3?i.button:3;break;case"wheel":if(t._customWheelEventHandler&&t._customWheelEventHandler(i)===!1)return!1;let h=i.deltaY;if(h===0||t.coreMouseService.consumeWheelEvent(i,t._renderService?.dimensions?.device?.cell?.height,t._coreBrowserService?.dpr)===0)return!1;u=h<0?0:1,c=4;break;default:return!1}return u===void 0||c===void 0||c>4?!1:t.coreMouseService.triggerMouseEvent({col:o.col,row:o.row,x:o.x,y:o.y,button:c,action:u,ctrl:i.ctrlKey,alt:i.altKey,shift:i.shiftKey})}let s={mouseup:null,wheel:null,mousedrag:null,mousemove:null},r={mouseup:i=>(n(i),i.buttons||(this._document.removeEventListener("mouseup",s.mouseup),s.mousedrag&&this._document.removeEventListener("mousemove",s.mousedrag)),this.cancel(i)),wheel:i=>(n(i),this.cancel(i,!0)),mousedrag:i=>{i.buttons&&n(i)},mousemove:i=>{i.buttons||n(i)}};this._register(this.coreMouseService.onProtocolChange(i=>{i?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(i)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),i&8?s.mousemove||(e.addEventListener("mousemove",r.mousemove),s.mousemove=r.mousemove):(e.removeEventListener("mousemove",s.mousemove),s.mousemove=null),i&16?s.wheel||(e.addEventListener("wheel",r.wheel,{passive:!1}),s.wheel=r.wheel):(e.removeEventListener("wheel",s.wheel),s.wheel=null),i&2?s.mouseup||(s.mouseup=r.mouseup):(this._document.removeEventListener("mouseup",s.mouseup),s.mouseup=null),i&4?s.mousedrag||(s.mousedrag=r.mousedrag):(this._document.removeEventListener("mousemove",s.mousedrag),s.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this._register(ht(e,"mousedown",i=>{if(i.preventDefault(),this.focus(),!(!this.coreMouseService.areMouseEventsActive||this._selectionService.shouldForceSelection(i)))return n(i),s.mouseup&&this._document.addEventListener("mouseup",s.mouseup),s.mousedrag&&this._document.addEventListener("mousemove",s.mousedrag),this.cancel(i)})),this._register(ht(e,"wheel",i=>{if(!s.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(i)===!1)return!1;if(!this.buffer.hasScrollback){if(i.deltaY===0)return!1;if(t.coreMouseService.consumeWheelEvent(i,t._renderService?.dimensions?.device?.cell?.height,t._coreBrowserService?.dpr)===0)return this.cancel(i,!0);let o=be.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(i.deltaY<0?"A":"B");return this.coreService.triggerDataEvent(o,!0),this.cancel(i,!0)}}},{passive:!1}))}refresh(t,e){this._renderService?.refreshRows(t,e)}updateCursorStyle(t){this._selectionService?.shouldColumnSelect(t)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(t,e){this._viewport?this._viewport.scrollLines(t):super.scrollLines(t,e),this.refresh(0,this.rows-1)}scrollPages(t){this.scrollLines(t*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(t){t&&this._viewport?this._viewport.scrollToLine(this.buffer.ybase,!0):this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(t){let e=t-this._bufferService.buffer.ydisp;e!==0&&this.scrollLines(e)}paste(t){jL(t,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(t){this._customKeyEventHandler=t}attachCustomWheelEventHandler(t){this._customWheelEventHandler=t}registerLinkProvider(t){return this._linkProviderService.registerLinkProvider(t)}registerCharacterJoiner(t){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let e=this._characterJoinerService.register(t);return this.refresh(0,this.rows-1),e}deregisterCharacterJoiner(t){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(t)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(t){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+t)}registerDecoration(t){return this._decorationService.registerDecoration(t)}hasSelection(){return this._selectionService?this._selectionService.hasSelection:!1}select(t,e,n){this._selectionService.setSelection(t,e,n)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(!(!this._selectionService||!this._selectionService.hasSelection))return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(t,e){this._selectionService?.selectLines(t,e)}_keyDown(t){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(t)===!1)return!1;let e=this.browser.isMac&&this.options.macOptionIsMeta&&t.altKey;if(!e&&!this._compositionHelper.keydown(t))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(!0),!1;!e&&(t.key==="Dead"||t.key==="AltGraph")&&(this._unprocessedDeadKey=!0);let n=qse(t,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(t),n.type===3||n.type===2){let s=this.rows-1;return this.scrollLines(n.type===2?-s:s),this.cancel(t,!0)}if(n.type===1&&this.selectAll(),this._isThirdLevelShift(this.browser,t)||(n.cancel&&this.cancel(t,!0),!n.key)||t.key&&!t.ctrlKey&&!t.altKey&&!t.metaKey&&t.key.length===1&&t.key.charCodeAt(0)>=65&&t.key.charCodeAt(0)<=90)return!0;if(this._unprocessedDeadKey)return this._unprocessedDeadKey=!1,!0;if((n.key===be.ETX||n.key===be.CR)&&(this.textarea.value=""),this._onKey.fire({key:n.key,domEvent:t}),this._showCursor(),this.coreService.triggerDataEvent(n.key,!0),!this.optionsService.rawOptions.screenReaderMode||t.altKey||t.ctrlKey)return this.cancel(t,!0);this._keyDownHandled=!0}_isThirdLevelShift(t,e){let n=t.isMac&&!this.options.macOptionIsMeta&&e.altKey&&!e.ctrlKey&&!e.metaKey||t.isWindows&&e.altKey&&e.ctrlKey&&!e.metaKey||t.isWindows&&e.getModifierState("AltGraph");return e.type==="keypress"?n:n&&(!e.keyCode||e.keyCode>47)}_keyUp(t){this._keyDownSeen=!1,!(this._customKeyEventHandler&&this._customKeyEventHandler(t)===!1)&&(Qse(t)||this.focus(),this.updateCursorStyle(t),this._keyPressHandled=!1)}_keyPress(t){let e;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(t)===!1)return!1;if(this.cancel(t),t.charCode)e=t.charCode;else if(t.which===null||t.which===void 0)e=t.keyCode;else if(t.which!==0&&t.charCode!==0)e=t.which;else return!1;return!e||(t.altKey||t.ctrlKey||t.metaKey)&&!this._isThirdLevelShift(this.browser,t)?!1:(e=String.fromCharCode(e),this._onKey.fire({key:e,domEvent:t}),this._showCursor(),this.coreService.triggerDataEvent(e,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,!0)}_inputEvent(t){if(t.data&&t.inputType==="insertText"&&(!t.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let e=t.data;return this.coreService.triggerDataEvent(e,!0),this.cancel(t),!0}return!1}resize(t,e){if(t===this.cols&&e===this.rows){this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure();return}super.resize(t,e)}_afterResize(t,e){this._charSizeService?.measure()}clear(){if(!(this.buffer.ybase===0&&this.buffer.y===0)){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let t=1;t<this.rows;t++)this.buffer.lines.push(this.buffer.getBlankLine(Dn));this._onScroll.fire({position:this.buffer.ydisp}),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;let t=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this._customKeyEventHandler=t,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(be.ESC+"[I"):this.coreService.triggerDataEvent(be.ESC+"[O")}_reportWindowsOptions(t){if(this._renderService)switch(t){case 0:let e=this._renderService.dimensions.css.canvas.width.toFixed(0),n=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${be.ESC}[4;${n};${e}t`);break;case 1:let s=this._renderService.dimensions.css.cell.width.toFixed(0),r=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${be.ESC}[6;${r};${s}t`);break}}cancel(t,e){if(!(!this.options.cancelEvents&&!e))return t.preventDefault(),t.stopPropagation(),!1}};function Qse(t){return t.keyCode===16||t.keyCode===17||t.keyCode===18}var ere=class{constructor(){this._addons=[]}dispose(){for(let t=this._addons.length-1;t>=0;t--)this._addons[t].instance.dispose()}loadAddon(t,e){let n={instance:e,dispose:e.dispose,isDisposed:!1};this._addons.push(n),e.dispose=()=>this._wrappedAddonDispose(n),e.activate(t)}_wrappedAddonDispose(t){if(t.isDisposed)return;let e=-1;for(let n=0;n<this._addons.length;n++)if(this._addons[n]===t){e=n;break}if(e===-1)throw new Error("Could not dispose an addon that has not been loaded");t.isDisposed=!0,t.dispose.apply(t.instance),this._addons.splice(e,1)}},tre=class{constructor(t){this._line=t}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(t,e){if(!(t<0||t>=this._line.length))return e?(this._line.loadCell(t,e),e):this._line.loadCell(t,new Jr)}translateToString(t,e,n){return this._line.translateToString(t,e,n)}},fO=class{constructor(t,e){this._buffer=t,this.type=e}init(t){return this._buffer=t,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(t){let e=this._buffer.lines.get(t);if(e)return new tre(e)}getNullCell(){return new Jr}},nre=class extends kt{constructor(t){super(),this._core=t,this._onBufferChange=this._register(new Te),this.onBufferChange=this._onBufferChange.event,this._normal=new fO(this._core.buffers.normal,"normal"),this._alternate=new fO(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}},sre=class{constructor(t){this._core=t}registerCsiHandler(t,e){return this._core.registerCsiHandler(t,n=>e(n.toArray()))}addCsiHandler(t,e){return this.registerCsiHandler(t,e)}registerDcsHandler(t,e){return this._core.registerDcsHandler(t,(n,s)=>e(n,s.toArray()))}addDcsHandler(t,e){return this.registerDcsHandler(t,e)}registerEscHandler(t,e){return this._core.registerEscHandler(t,e)}addEscHandler(t,e){return this.registerEscHandler(t,e)}registerOscHandler(t,e){return this._core.registerOscHandler(t,e)}addOscHandler(t,e){return this.registerOscHandler(t,e)}},rre=class{constructor(t){this._core=t}register(t){this._core.unicodeService.register(t)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(t){this._core.unicodeService.activeVersion=t}},ire=["cols","rows"],Ei=0,are=class extends kt{constructor(t){super(),this._core=this._register(new Jse(t)),this._addonManager=this._register(new ere),this._publicOptions={...this._core.options};let e=s=>this._core.options[s],n=(s,r)=>{this._checkReadonlyOptions(s),this._core.options[s]=r};for(let s in this._core.options){let r={get:e.bind(this,s),set:n.bind(this,s)};Object.defineProperty(this._publicOptions,s,r)}}_checkReadonlyOptions(t){if(ire.includes(t))throw new Error(`Option "${t}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new sre(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new rre(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this._register(new nre(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let t=this._core.coreService.decPrivateModes,e="none";switch(this._core.coreMouseService.activeProtocol){case"X10":e="x10";break;case"VT200":e="vt200";break;case"DRAG":e="drag";break;case"ANY":e="any";break}return{applicationCursorKeysMode:t.applicationCursorKeys,applicationKeypadMode:t.applicationKeypad,bracketedPasteMode:t.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:e,originMode:t.origin,reverseWraparoundMode:t.reverseWraparound,sendFocusMode:t.sendFocus,synchronizedOutputMode:t.synchronizedOutput,wraparoundMode:t.wraparound}}get options(){return this._publicOptions}set options(t){for(let e in t)this._publicOptions[e]=t[e]}blur(){this._core.blur()}focus(){this._core.focus()}input(t,e=!0){this._core.input(t,e)}resize(t,e){this._verifyIntegers(t,e),this._core.resize(t,e)}open(t){this._core.open(t)}attachCustomKeyEventHandler(t){this._core.attachCustomKeyEventHandler(t)}attachCustomWheelEventHandler(t){this._core.attachCustomWheelEventHandler(t)}registerLinkProvider(t){return this._core.registerLinkProvider(t)}registerCharacterJoiner(t){return this._checkProposedApi(),this._core.registerCharacterJoiner(t)}deregisterCharacterJoiner(t){this._checkProposedApi(),this._core.deregisterCharacterJoiner(t)}registerMarker(t=0){return this._verifyIntegers(t),this._core.registerMarker(t)}registerDecoration(t){return this._checkProposedApi(),this._verifyPositiveIntegers(t.x??0,t.width??0,t.height??0),this._core.registerDecoration(t)}hasSelection(){return this._core.hasSelection()}select(t,e,n){this._verifyIntegers(t,e,n),this._core.select(t,e,n)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(t,e){this._verifyIntegers(t,e),this._core.selectLines(t,e)}dispose(){super.dispose()}scrollLines(t){this._verifyIntegers(t),this._core.scrollLines(t)}scrollPages(t){this._verifyIntegers(t),this._core.scrollPages(t)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(t){this._verifyIntegers(t),this._core.scrollToLine(t)}clear(){this._core.clear()}write(t,e){this._core.write(t,e)}writeln(t,e){this._core.write(t),this._core.write(`\r
`,e)}paste(t){this._core.paste(t)}refresh(t,e){this._verifyIntegers(t,e),this._core.refresh(t,e)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(t){this._addonManager.loadAddon(this,t)}static get strings(){return{get promptLabel(){return _k.get()},set promptLabel(t){_k.set(t)},get tooMuchOutput(){return xk.get()},set tooMuchOutput(t){xk.set(t)}}}_verifyIntegers(...t){for(Ei of t)if(Ei===1/0||isNaN(Ei)||Ei%1!==0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...t){for(Ei of t)if(Ei&&(Ei===1/0||isNaN(Ei)||Ei%1!==0||Ei<0))throw new Error("This API only accepts positive integers")}};var ore=2,lre=1,cre=class{activate(t){this._terminal=t}dispose(){}fit(){let t=this.proposeDimensions();if(!t||!this._terminal||isNaN(t.cols)||isNaN(t.rows))return;let e=this._terminal._core;(this._terminal.rows!==t.rows||this._terminal.cols!==t.cols)&&(e._renderService.clear(),this._terminal.resize(t.cols,t.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let t=this._terminal._core._renderService.dimensions;if(t.css.cell.width===0||t.css.cell.height===0)return;let e=this._terminal.options.scrollback===0?0:this._terminal.options.overviewRuler?.width||14,n=window.getComputedStyle(this._terminal.element.parentElement),s=parseInt(n.getPropertyValue("height")),r=Math.max(0,parseInt(n.getPropertyValue("width"))),i=window.getComputedStyle(this._terminal.element),o={top:parseInt(i.getPropertyValue("padding-top")),bottom:parseInt(i.getPropertyValue("padding-bottom")),right:parseInt(i.getPropertyValue("padding-right")),left:parseInt(i.getPropertyValue("padding-left"))},c=o.top+o.bottom,u=o.right+o.left,h=s-c,m=r-u-e;return{cols:Math.max(ore,Math.floor(m/t.css.cell.width)),rows:Math.max(lre,Math.floor(h/t.css.cell.height))}}};var ure=class{constructor(e,n,s,r={}){this._terminal=e,this._regex=n,this._handler=s,this._options=r}provideLinks(e,n){let s=dre.computeLink(e,this._regex,this._terminal,this._handler);n(this._addCallbacks(s))}_addCallbacks(e){return e.map(n=>(n.leave=this._options.leave,n.hover=(s,r)=>{if(this._options.hover){let{range:i}=n;this._options.hover(s,r,i)}},n))}};function hre(t){try{let e=new URL(t),n=e.password&&e.username?`${e.protocol}//${e.username}:${e.password}@${e.host}`:e.username?`${e.protocol}//${e.username}@${e.host}`:`${e.protocol}//${e.host}`;return t.toLocaleLowerCase().startsWith(n.toLocaleLowerCase())}catch{return!1}}var dre=class N0{static computeLink(e,n,s,r){let i=new RegExp(n.source,(n.flags||"")+"g"),[o,c]=N0._getWindowedLineStrings(e-1,s),u=o.join(""),h,m=[];for(;h=i.exec(u);){let p=h[0];if(!hre(p))continue;let[y,v]=N0._mapStrIdx(s,c,0,h.index),[x,_]=N0._mapStrIdx(s,y,v,p.length);if(y===-1||v===-1||x===-1||_===-1)continue;let S={start:{x:v+1,y:y+1},end:{x:_,y:x+1}};m.push({range:S,text:p,activate:r})}return m}static _getWindowedLineStrings(e,n){let s,r=e,i=e,o=0,c="",u=[];if(s=n.buffer.active.getLine(e)){let h=s.translateToString(!0);if(s.isWrapped&&h[0]!==" "){for(o=0;(s=n.buffer.active.getLine(--r))&&o<2048&&(c=s.translateToString(!0),o+=c.length,u.push(c),!(!s.isWrapped||c.indexOf(" ")!==-1)););u.reverse()}for(u.push(h),o=0;(s=n.buffer.active.getLine(++i))&&s.isWrapped&&o<2048&&(c=s.translateToString(!0),o+=c.length,u.push(c),c.indexOf(" ")===-1););}return[u,r]}static _mapStrIdx(e,n,s,r){let i=e.buffer.active,o=i.getNullCell(),c=s;for(;r;){let u=i.getLine(n);if(!u)return[-1,-1];for(let h=c;h<u.length;++h){u.getCell(h,o);let m=o.getChars();if(o.getWidth()&&(r-=m.length||1,h===u.length-1&&m==="")){let p=i.getLine(n+1);p&&p.isWrapped&&(p.getCell(0,o),o.getWidth()===2&&(r+=1))}if(r<0)return[n,h]}n++,c=0}return[n,c]}},fre=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function pre(t,e){let n=window.open();if(n){try{n.opener=null}catch{}n.location.href=e}else console.warn("Opening link blocked as opener could not be cleared")}var mre=class{constructor(t=pre,e={}){this._handler=t,this._options=e}activate(t){this._terminal=t;let e=this._options,n=e.urlRegex||fre;this._linkProvider=this._terminal.registerLinkProvider(new ure(this._terminal,n,this._handler,e))}dispose(){this._linkProvider?.dispose()}};const gre=0,yre=1,vre=2,bre=4,_re=["/bin/bash","/bin/sh"];class xre{ws=null;options;isClosing=!1;hasConnected=!1;constructor(e){this.options=e}async connect(){const e=this.options.command||_re;for(const n of e)try{await this.tryConnect([n]),this.hasConnected=!0;return}catch{if(n===e[e.length-1])throw new Error(`No shell available (tried: ${e.join(", ")})`)}}tryConnect(e){return new Promise((n,s)=>{const{context:r,namespace:i,pod:o,container:c}=this.options,u=new URLSearchParams;u.set("container",c),u.set("stdin","true"),u.set("stdout","true"),u.set("stderr","true"),u.set("tty","true");for(const v of e)u.append("command",v);const m=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/contexts/${r}/api/v1/namespaces/${i}/pods/${o}/exec?${u.toString()}`;this.ws=new WebSocket(m,["v4.channel.k8s.io"]);let p=!1;const y=setTimeout(()=>{p||(p=!0,this.ws?.close(),s(new Error("Connection timeout")))},5e3);this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{setTimeout(()=>{!p&&this.ws?.readyState===WebSocket.OPEN&&(clearTimeout(y),p=!0,n())},200)},this.ws.onmessage=v=>{if(v.data instanceof ArrayBuffer){const x=new Uint8Array(v.data);if(x.length<1)return;const _=x[0],S=new TextDecoder().decode(x.slice(1));switch(_){case yre:case vre:S&&this.options.onData(S);break}}},this.ws.onerror=()=>{clearTimeout(y),p||(p=!0,s(new Error("WebSocket connection failed")))},this.ws.onclose=v=>{clearTimeout(y),p?!this.isClosing&&this.hasConnected&&this.options.onClose?.():(p=!0,s(new Error(v.reason||`Connection closed (code: ${v.code})`)))}})}send(e){if(this.ws?.readyState===WebSocket.OPEN){const s=new TextEncoder().encode(e),r=new Uint8Array(s.length+1);r[0]=gre,r.set(s,1),this.ws.send(r)}}resize(e,n){if(this.ws?.readyState===WebSocket.OPEN){const s=JSON.stringify({Width:e,Height:n}),i=new TextEncoder().encode(s),o=new Uint8Array(i.length+1);o[0]=bre,o.set(i,1),this.ws.send(o)}}disconnect(){this.isClosing=!0,this.ws&&(this.ws.close(),this.ws=null)}get isConnected(){return this.ws?.readyState===WebSocket.OPEN}}function wre(t){const e=[],n=t.spec,s=t.status;if(n?.containers)for(const r of n.containers){const i=s?.containerStatuses?.find(o=>o.name===r.name);e.push({name:r.name,ready:i?.ready??!1})}return e}function Sre({context:t,resource:e,toolbarRef:n}){const s=V.useRef(null),r=V.useRef(null),i=V.useRef(null),o=V.useRef(null),[c,u]=V.useState(!1),[h,m]=V.useState(!1),[p,y]=V.useState(""),[v,x]=V.useState(!1),_=e.metadata?.namespace,S=e.metadata?.name,k=wre(e);V.useEffect(()=>{k.length>0&&!p&&y(k[0].name)},[k,p]),V.useEffect(()=>{if(!s.current||r.current)return;const E=new are({cursorBlink:!0,fontSize:13,fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace',theme:{background:"#0a0a0a",foreground:"#e5e5e5",cursor:"#e5e5e5",cursorAccent:"#0a0a0a",selectionBackground:"#3b82f680",black:"#171717",red:"#ef4444",green:"#22c55e",yellow:"#eab308",blue:"#3b82f6",magenta:"#a855f7",cyan:"#06b6d4",white:"#e5e5e5",brightBlack:"#404040",brightRed:"#f87171",brightGreen:"#4ade80",brightYellow:"#facc15",brightBlue:"#60a5fa",brightMagenta:"#c084fc",brightCyan:"#22d3ee",brightWhite:"#ffffff"},allowProposedApi:!0}),D=new cre,B=new mre;E.loadAddon(D),E.loadAddon(B),E.open(s.current),D.fit(),r.current=E,i.current=D;const q=()=>{D.fit(),o.current?.isConnected&&o.current.resize(E.cols,E.rows)},P=new ResizeObserver(q);return P.observe(s.current),window.addEventListener("resize",q),()=>{P.disconnect(),window.removeEventListener("resize",q),E.dispose(),r.current=null,i.current=null}},[]);const C=V.useCallback(async()=>{if(!_||!S||!p||!r.current)return;o.current?.disconnect(),m(!0);const E=r.current;E.clear(),E.writeln(`Connecting to ${S}/${p}...`),E.writeln("");try{const D=new xre({context:t,namespace:_,pod:S,container:p,onData:q=>{E.write(q)},onError:q=>{E.writeln(`\r
\x1B[31mError: ${q}\x1B[0m`)},onClose:()=>{u(!1),E.writeln(`\r
\x1B[33mConnection closed.\x1B[0m`)}});await D.connect(),o.current=D,u(!0);const B=i.current;B&&(B.fit(),D.resize(E.cols,E.rows)),E.onData(q=>{D.send(q)})}catch(D){const B=D instanceof Error?D.message:"Failed to connect";E.writeln(`\r
\x1B[31mFailed to connect: ${B}\x1B[0m`)}finally{m(!1)}},[t,_,S,p]),N=V.useCallback(()=>{o.current?.disconnect(),o.current=null,u(!1)},[]),R=V.useRef(!1);V.useEffect(()=>{if(p&&!R.current&&r.current){R.current=!0;const E=setTimeout(()=>{C()},100);return()=>clearTimeout(E)}},[p,C]),V.useEffect(()=>()=>{o.current?.disconnect(),o.current=null},[]);const O=E=>{y(E),x(!1),N()};return f.jsxs("div",{className:"flex flex-col h-full bg-[#0a0a0a]",children:[n&&f.jsx(sN,{toolbarRef:n,children:k.length>1&&f.jsxs("div",{className:"relative",children:[f.jsxs("button",{onClick:()=>x(!v),className:"flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-200 dark:hover:bg-neutral-800 rounded transition-colors",children:[f.jsx("span",{className:"max-w-30 truncate",children:p}),f.jsx(ps,{size:12})]}),v&&f.jsx("div",{className:"absolute right-0 top-full mt-1 z-50 bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg shadow-lg py-1 min-w-40",children:k.map(E=>f.jsxs("button",{onClick:()=>O(E.name),className:`w-full text-left px-3 py-1.5 text-xs hover:bg-neutral-100 dark:hover:bg-neutral-700 flex items-center gap-2 ${E.name===p?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-500/10":"text-neutral-700 dark:text-neutral-300"}`,children:[f.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${E.ready?"bg-emerald-500":"bg-neutral-400"}`}),E.name]},E.name))})]})}),f.jsx("div",{ref:s,className:"flex-1 p-2",style:{minHeight:0}}),f.jsxs("div",{className:"shrink-0 px-4 py-1.5 border-t border-neutral-800 bg-neutral-900/50 flex items-center gap-3 text-xs text-neutral-500",children:[f.jsxs("span",{className:"flex items-center gap-1.5",children:[f.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${c?"bg-emerald-500":h?"bg-amber-500 animate-pulse":"bg-neutral-600"}`}),c?"Connected":h?"Connecting...":"Disconnected"]}),p&&f.jsxs("span",{className:"text-neutral-600",children:[S,"/",p]})]})]})}function kre(t){const e=De.c(20),{metadata:n}=t,s=n.labels,r=n.annotations;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=new Set(["pod-template-hash","controller-revision-hash","pod-template-generation"]),e[0]=i):i=e[0];const o=i;let c;e[1]===Symbol.for("react.memo_cache_sentinel")?(c=new Set(["kubectl.kubernetes.io/last-applied-configuration","deployment.kubernetes.io/revision","control-plane.alpha.kubernetes.io/leader","deprecated.daemonset.template.generation","kubernetes.io/description"]),e[1]=c):c=e[1];const u=c;let h;e[2]!==s?(h=s?Object.fromEntries(Object.entries(s).filter(O=>{const[E]=O;return!o.has(E)})):void 0,e[2]=s,e[3]=h):h=e[3];const m=h;let p;e[4]!==r?(p=r?Object.fromEntries(Object.entries(r).filter(O=>{const[E]=O;return!u.has(E)})):void 0,e[4]=r,e[5]=p):p=e[5];const y=p,v=[...Object.entries(m??{}).map(Are),...Object.entries(y??{}).map(Ere)];let x;e[6]!==m?(x=m&&Object.keys(m).length>0,e[6]=m,e[7]=x):x=e[7];const _=x;let S;e[8]!==y?(S=y&&Object.keys(y).length>0,e[8]=y,e[9]=S):S=e[9];const k=S;if(v.length===0)return null;let C;e[10]!==m||e[11]!==_?(C=_&&f.jsxs(f.Fragment,{children:[f.jsx("tr",{children:f.jsx("td",{colSpan:2,className:"pb-2",children:f.jsx("span",{className:"text-[10px] font-medium uppercase tracking-wider text-neutral-500 dark:text-neutral-500",children:"Labels"})})}),Object.entries(m).map(Nre)]}),e[10]=m,e[11]=_,e[12]=C):C=e[12];let N;e[13]!==y||e[14]!==k||e[15]!==_?(N=k&&f.jsxs(f.Fragment,{children:[f.jsx("tr",{children:f.jsx("td",{colSpan:2,className:_?"pt-4 pb-2":"pb-2",children:f.jsx("span",{className:"text-[10px] font-medium uppercase tracking-wider text-neutral-500 dark:text-neutral-500",children:"Annotations"})})}),Object.entries(y).map(Cre)]}),e[13]=y,e[14]=k,e[15]=_,e[16]=N):N=e[16];let R;return e[17]!==C||e[18]!==N?(R=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("table",{className:"w-full text-xs",children:f.jsxs("tbody",{children:[C,N]})})}),e[17]=C,e[18]=N,e[19]=R):R=e[19],R}function Cre(t,e,n){const[s,r]=t;return f.jsxs("tr",{className:e<n.length-1?"border-b border-neutral-200 dark:border-neutral-700/50":"",children:[f.jsx("td",{className:"py-1.5 pr-3 text-purple-600 dark:text-purple-400 align-top whitespace-nowrap w-[1%]",children:s}),f.jsx("td",{className:"py-1.5 text-neutral-600 dark:text-neutral-300 break-all",children:r})]},`annotation-${s}`)}function Nre(t){const[e,n]=t;return f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[f.jsx("td",{className:"py-1.5 pr-3 text-sky-600 dark:text-sky-400 align-top whitespace-nowrap w-[1%]",children:e}),f.jsx("td",{className:"py-1.5 text-emerald-600 dark:text-emerald-400 break-all",children:n})]},`label-${e}`)}function Ere(t){const[e,n]=t;return{key:e,value:n,type:"annotation"}}function Are(t){const[e,n]=t;return{key:e,value:n,type:"label"}}function jre(t){const e=De.c(6),{events:n,loading:s}=t;if(s&&n.length===0){let o;return e[0]===Symbol.for("react.memo_cache_sentinel")?(o=f.jsxs("div",{className:"flex items-center gap-2 text-neutral-600 dark:text-neutral-500 text-sm",children:[f.jsx(Sa,{size:14,className:"animate-spin"}),"Loading events..."]}),e[0]=o):o=e[0],o}if(n.length===0){let o;return e[1]===Symbol.for("react.memo_cache_sentinel")?(o=f.jsx("div",{className:"text-neutral-600 dark:text-neutral-500 text-sm italic",children:"No events found for this resource"}),e[1]=o):o=e[1],o}let r;e[2]!==n?(r=n.map(Tre),e[2]=n,e[3]=r):r=e[3];let i;return e[4]!==r?(i=f.jsx("div",{className:"space-y-2",children:r}),e[4]=r,e[5]=i):i=e[5],i}function Tre(t){return f.jsx(Rre,{event:t},t.metadata?.uid||`${t.reason}-${t.lastTimestamp}`)}function Rre(t){const e=De.c(36),{event:n}=t;let s;e[0]!==n.eventTime||e[1]!==n.lastTimestamp||e[2]!==n.metadata?(s=()=>n.lastTimestamp?n.lastTimestamp instanceof Date?n.lastTimestamp.toISOString():String(n.lastTimestamp):n.eventTime?String(n.eventTime):n.metadata?.creationTimestamp?n.metadata.creationTimestamp instanceof Date?n.metadata.creationTimestamp.toISOString():String(n.metadata.creationTimestamp):new Date().toISOString(),e[0]=n.eventTime,e[1]=n.lastTimestamp,e[2]=n.metadata,e[3]=s):s=e[3];const r=s;let i,o,c,u,h;if(e[4]!==n.reason||e[5]!==n.type||e[6]!==r){const _=r(),S=n.type==="Warning";h=`p-3 rounded-lg border ${S?"bg-amber-500/5 border-amber-500/20":"bg-neutral-100 dark:bg-neutral-900/50 border-neutral-300 dark:border-neutral-700/50"}`,c="flex items-start justify-between gap-2 mb-1";const k=`px-1.5 py-0.5 rounded text-xs font-medium ${S?"bg-amber-500/20 text-amber-600 dark:text-amber-400":"bg-emerald-500/20 text-emerald-600 dark:text-emerald-400"}`;let C;e[12]!==n.type||e[13]!==k?(C=f.jsx("span",{className:k,children:n.type}),e[12]=n.type,e[13]=k,e[14]=C):C=e[14];let N;e[15]!==n.reason?(N=f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-200",children:n.reason}),e[15]=n.reason,e[16]=N):N=e[16],e[17]!==C||e[18]!==N?(u=f.jsxs("div",{className:"flex items-center gap-2",children:[C,N]}),e[17]=C,e[18]=N,e[19]=u):u=e[19],i="text-xs text-neutral-600 dark:text-neutral-500 whitespace-nowrap",o=Ore(_),e[4]=n.reason,e[5]=n.type,e[6]=r,e[7]=i,e[8]=o,e[9]=c,e[10]=u,e[11]=h}else i=e[7],o=e[8],c=e[9],u=e[10],h=e[11];let m;e[20]!==i||e[21]!==o?(m=f.jsx("span",{className:i,children:o}),e[20]=i,e[21]=o,e[22]=m):m=e[22];let p;e[23]!==c||e[24]!==u||e[25]!==m?(p=f.jsxs("div",{className:c,children:[u,m]}),e[23]=c,e[24]=u,e[25]=m,e[26]=p):p=e[26];let y;e[27]!==n.message?(y=f.jsx("p",{className:"text-sm text-neutral-700 dark:text-neutral-400",children:n.message}),e[27]=n.message,e[28]=y):y=e[28];let v;e[29]!==n.count?(v=n.count&&n.count>1&&f.jsxs("p",{className:"text-xs text-neutral-600 dark:text-neutral-500 mt-1",children:["Occurred ",n.count," times"]}),e[29]=n.count,e[30]=v):v=e[30];let x;return e[31]!==v||e[32]!==h||e[33]!==p||e[34]!==y?(x=f.jsxs("div",{className:h,children:[p,y,v]}),e[31]=v,e[32]=h,e[33]=p,e[34]=y,e[35]=x):x=e[35],x}function Ore(t){const e=new Date(t),s=new Date().getTime()-e.getTime(),r=Math.floor(s/1e3),i=Math.floor(r/60),o=Math.floor(i/60),c=Math.floor(o/24);return c>0?`${c}d ago`:o>0?`${o}h ago`:i>0?`${i}m ago`:`${r}s ago`}function pO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=Array(e);n<e;n++)s[n]=t[n];return s}function Mre(t){if(Array.isArray(t))return t}function Dre(t,e,n){return(e=Ure(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bre(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s,r,i,o,c=[],u=!0,h=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(u=(s=i.call(n)).done)&&(c.push(s.value),c.length!==e);u=!0);}catch(m){h=!0,r=m}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(h)throw r}}return c}}function Lre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function gO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mO(Object(n),!0).forEach(function(s){Dre(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mO(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function Ire(t,e){if(t==null)return{};var n,s,r=Pre(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Pre(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)!==-1)continue;n[s]=t[s]}return n}function $re(t,e){return Mre(t)||Bre(t,e)||Hre(t,e)||Lre()}function zre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ure(t){var e=zre(t,"string");return typeof e=="symbol"?e:e+""}function Hre(t,e){if(t){if(typeof t=="string")return pO(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pO(t,e):void 0}}function Fre(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function vO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yO(Object(n),!0).forEach(function(s){Fre(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yO(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function Vre(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(s){return e.reduceRight(function(r,i){return i(r)},s)}}function bf(t){return function e(){for(var n=this,s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return r.length>=t.length?t.apply(this,r):function(){for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];return e.apply(n,[].concat(r,c))}}}function Wy(t){return{}.toString.call(t).includes("Object")}function qre(t){return!Object.keys(t).length}function Sp(t){return typeof t=="function"}function Kre(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Wre(t,e){return Wy(e)||Lo("changeType"),Object.keys(e).some(function(n){return!Kre(t,n)})&&Lo("changeField"),e}function Gre(t){Sp(t)||Lo("selectorType")}function Yre(t){Sp(t)||Wy(t)||Lo("handlerType"),Wy(t)&&Object.values(t).some(function(e){return!Sp(e)})&&Lo("handlersType")}function Zre(t){t||Lo("initialIsRequired"),Wy(t)||Lo("initialType"),qre(t)&&Lo("initialContent")}function Xre(t,e){throw new Error(t[e]||t.default)}var Jre={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Lo=bf(Xre)(Jre),Yg={changes:Wre,selector:Gre,handler:Yre,initial:Zre};function Qre(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Yg.initial(t),Yg.handler(e);var n={current:t},s=bf(nie)(n,e),r=bf(tie)(n),i=bf(Yg.changes)(t),o=bf(eie)(n);function c(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(m){return m};return Yg.selector(h),h(n.current)}function u(h){Vre(s,r,i,o)(h)}return[c,u]}function eie(t,e){return Sp(e)?e(t.current):e}function tie(t,e){return t.current=vO(vO({},t.current),e),e}function nie(t,e,n){return Sp(e)?e(t.current):Object.keys(n).forEach(function(s){var r;return(r=e[s])===null||r===void 0?void 0:r.call(e,t.current[s])}),n}var sie={create:Qre},rie={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function iie(t){return function e(){for(var n=this,s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return r.length>=t.length?t.apply(this,r):function(){for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];return e.apply(n,[].concat(r,c))}}}function aie(t){return{}.toString.call(t).includes("Object")}function oie(t){return t||bO("configIsRequired"),aie(t)||bO("configType"),t.urls?(lie(),{paths:{vs:t.urls.monacoBase}}):t}function lie(){console.warn(vI.deprecation)}function cie(t,e){throw new Error(t[e]||t.default)}var vI={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},bO=iie(cie)(vI),uie={config:oie},hie=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return function(r){return n.reduceRight(function(i,o){return o(i)},r)}};function bI(t,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&t[n]&&Object.assign(e[n],bI(t[n],e[n]))}),gO(gO({},t),e)}var die={type:"cancelation",msg:"operation is manually canceled"};function tw(t){var e=!1,n=new Promise(function(s,r){t.then(function(i){return e?r(die):s(i)}),t.catch(r)});return n.cancel=function(){return e=!0},n}var fie=["monaco"],pie=sie.create({config:rie,isInitialized:!1,resolve:null,reject:null,monaco:null}),_I=$re(pie,2),tm=_I[0],_b=_I[1];function mie(t){var e=uie.config(t),n=e.monaco,s=Ire(e,fie);_b(function(r){return{config:bI(r.config,s),monaco:n}})}function gie(){var t=tm(function(e){var n=e.monaco,s=e.isInitialized,r=e.resolve;return{monaco:n,isInitialized:s,resolve:r}});if(!t.isInitialized){if(_b({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),tw(nw);if(window.monaco&&window.monaco.editor)return xI(window.monaco),t.resolve(window.monaco),tw(nw);hie(yie,bie)(_ie)}return tw(nw)}function yie(t){return document.body.appendChild(t)}function vie(t){var e=document.createElement("script");return t&&(e.src=t),e}function bie(t){var e=tm(function(s){var r=s.config,i=s.reject;return{config:r,reject:i}}),n=vie("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=e.reject,n}function _ie(){var t=tm(function(n){var s=n.config,r=n.resolve,i=n.reject;return{config:s,resolve:r,reject:i}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(n){var s=n.m||n;xI(s),t.resolve(s)},function(n){t.reject(n)})}function xI(t){tm().monaco||_b({monaco:t})}function xie(){return tm(function(t){var e=t.monaco;return e})}var nw=new Promise(function(t,e){return _b({resolve:t,reject:e})}),wI={config:mie,init:gie,__getMonacoInstance:xie},wie={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},sw=wie,Sie={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},kie=Sie;function Cie({children:t}){return ks.createElement("div",{style:kie.container},t)}var Nie=Cie,Eie=Nie;function Aie({width:t,height:e,isEditorReady:n,loading:s,_ref:r,className:i,wrapperProps:o}){return ks.createElement("section",{style:{...sw.wrapper,width:t,height:e},...o},!n&&ks.createElement(Eie,null,s),ks.createElement("div",{ref:r,style:{...sw.fullWidth,...!n&&sw.hide},className:i}))}var jie=Aie,SI=V.memo(jie);function Tie(t){V.useEffect(t,[])}var kI=Tie;function Rie(t,e,n=!0){let s=V.useRef(!0);V.useEffect(s.current||!n?()=>{s.current=!1}:t,e)}var wr=Rie;function Ff(){}function Cu(t,e,n,s){return Oie(t,s)||Mie(t,e,n,s)}function Oie(t,e){return t.editor.getModel(CI(t,e))}function Mie(t,e,n,s){return t.editor.createModel(e,n,s?CI(t,s):void 0)}function CI(t,e){return t.Uri.parse(e)}function Die({original:t,modified:e,language:n,originalLanguage:s,modifiedLanguage:r,originalModelPath:i,modifiedModelPath:o,keepCurrentOriginalModel:c=!1,keepCurrentModifiedModel:u=!1,theme:h="light",loading:m="Loading...",options:p={},height:y="100%",width:v="100%",className:x,wrapperProps:_={},beforeMount:S=Ff,onMount:k=Ff}){let[C,N]=V.useState(!1),[R,O]=V.useState(!0),E=V.useRef(null),D=V.useRef(null),B=V.useRef(null),q=V.useRef(k),P=V.useRef(S),G=V.useRef(!1);kI(()=>{let W=wI.init();return W.then(I=>(D.current=I)&&O(!1)).catch(I=>I?.type!=="cancelation"&&console.error("Monaco initialization: error:",I)),()=>E.current?Z():W.cancel()}),wr(()=>{if(E.current&&D.current){let W=E.current.getOriginalEditor(),I=Cu(D.current,t||"",s||n||"text",i||"");I!==W.getModel()&&W.setModel(I)}},[i],C),wr(()=>{if(E.current&&D.current){let W=E.current.getModifiedEditor(),I=Cu(D.current,e||"",r||n||"text",o||"");I!==W.getModel()&&W.setModel(I)}},[o],C),wr(()=>{let W=E.current.getModifiedEditor();W.getOption(D.current.editor.EditorOption.readOnly)?W.setValue(e||""):e!==W.getValue()&&(W.executeEdits("",[{range:W.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),W.pushUndoStop())},[e],C),wr(()=>{E.current?.getModel()?.original.setValue(t||"")},[t],C),wr(()=>{let{original:W,modified:I}=E.current.getModel();D.current.editor.setModelLanguage(W,s||n||"text"),D.current.editor.setModelLanguage(I,r||n||"text")},[n,s,r],C),wr(()=>{D.current?.editor.setTheme(h)},[h],C),wr(()=>{E.current?.updateOptions(p)},[p],C);let z=V.useCallback(()=>{if(!D.current)return;P.current(D.current);let W=Cu(D.current,t||"",s||n||"text",i||""),I=Cu(D.current,e||"",r||n||"text",o||"");E.current?.setModel({original:W,modified:I})},[n,e,r,t,s,i,o]),K=V.useCallback(()=>{!G.current&&B.current&&(E.current=D.current.editor.createDiffEditor(B.current,{automaticLayout:!0,...p}),z(),D.current?.editor.setTheme(h),N(!0),G.current=!0)},[p,h,z]);V.useEffect(()=>{C&&q.current(E.current,D.current)},[C]),V.useEffect(()=>{!R&&!C&&K()},[R,C,K]);function Z(){let W=E.current?.getModel();c||W?.original?.dispose(),u||W?.modified?.dispose(),E.current?.dispose()}return ks.createElement(SI,{width:v,height:y,isEditorReady:C,loading:m,_ref:B,className:x,wrapperProps:_})}var Bie=Die;V.memo(Bie);function Lie(t){let e=V.useRef();return V.useEffect(()=>{e.current=t},[t]),e.current}var Iie=Lie,Zg=new Map;function Pie({defaultValue:t,defaultLanguage:e,defaultPath:n,value:s,language:r,path:i,theme:o="light",line:c,loading:u="Loading...",options:h={},overrideServices:m={},saveViewState:p=!0,keepCurrentModel:y=!1,width:v="100%",height:x="100%",className:_,wrapperProps:S={},beforeMount:k=Ff,onMount:C=Ff,onChange:N,onValidate:R=Ff}){let[O,E]=V.useState(!1),[D,B]=V.useState(!0),q=V.useRef(null),P=V.useRef(null),G=V.useRef(null),z=V.useRef(C),K=V.useRef(k),Z=V.useRef(),W=V.useRef(s),I=Iie(i),Y=V.useRef(!1),J=V.useRef(!1);kI(()=>{let M=wI.init();return M.then(F=>(q.current=F)&&B(!1)).catch(F=>F?.type!=="cancelation"&&console.error("Monaco initialization: error:",F)),()=>P.current?j():M.cancel()}),wr(()=>{let M=Cu(q.current,t||s||"",e||r||"",i||n||"");M!==P.current?.getModel()&&(p&&Zg.set(I,P.current?.saveViewState()),P.current?.setModel(M),p&&P.current?.restoreViewState(Zg.get(i)))},[i],O),wr(()=>{P.current?.updateOptions(h)},[h],O),wr(()=>{!P.current||s===void 0||(P.current.getOption(q.current.editor.EditorOption.readOnly)?P.current.setValue(s):s!==P.current.getValue()&&(J.current=!0,P.current.executeEdits("",[{range:P.current.getModel().getFullModelRange(),text:s,forceMoveMarkers:!0}]),P.current.pushUndoStop(),J.current=!1))},[s],O),wr(()=>{let M=P.current?.getModel();M&&r&&q.current?.editor.setModelLanguage(M,r)},[r],O),wr(()=>{c!==void 0&&P.current?.revealLine(c)},[c],O),wr(()=>{q.current?.editor.setTheme(o)},[o],O);let $=V.useCallback(()=>{if(!(!G.current||!q.current)&&!Y.current){K.current(q.current);let M=i||n,F=Cu(q.current,s||t||"",e||r||"",M||"");P.current=q.current?.editor.create(G.current,{model:F,automaticLayout:!0,...h},m),p&&P.current.restoreViewState(Zg.get(M)),q.current.editor.setTheme(o),c!==void 0&&P.current.revealLine(c),E(!0),Y.current=!0}},[t,e,n,s,r,i,h,m,p,o,c]);V.useEffect(()=>{O&&z.current(P.current,q.current)},[O]),V.useEffect(()=>{!D&&!O&&$()},[D,O,$]),W.current=s,V.useEffect(()=>{O&&N&&(Z.current?.dispose(),Z.current=P.current?.onDidChangeModelContent(M=>{J.current||N(P.current.getValue(),M)}))},[O,N]),V.useEffect(()=>{if(O){let M=q.current.editor.onDidChangeMarkers(F=>{let A=P.current.getModel()?.uri;if(A&&F.find(Q=>Q.path===A.path)){let Q=q.current.editor.getModelMarkers({resource:A});R?.(Q)}});return()=>{M?.dispose()}}return()=>{}},[O,R]);function j(){Z.current?.dispose(),y?p&&Zg.set(i,P.current.saveViewState()):P.current.getModel()?.dispose(),P.current.dispose()}return ks.createElement(SI,{width:v,height:x,isEditorReady:O,loading:u,_ref:G,className:_,wrapperProps:S})}var $ie=Pie,zie=V.memo($ie),Uie=zie;const pN=Symbol.for("yaml.alias"),s2=Symbol.for("yaml.document"),Io=Symbol.for("yaml.map"),NI=Symbol.for("yaml.pair"),Hi=Symbol.for("yaml.scalar"),Nh=Symbol.for("yaml.seq"),ti=Symbol.for("yaml.node.type"),pc=t=>!!t&&typeof t=="object"&&t[ti]===pN,nm=t=>!!t&&typeof t=="object"&&t[ti]===s2,sm=t=>!!t&&typeof t=="object"&&t[ti]===Io,An=t=>!!t&&typeof t=="object"&&t[ti]===NI,en=t=>!!t&&typeof t=="object"&&t[ti]===Hi,rm=t=>!!t&&typeof t=="object"&&t[ti]===Nh;function Cn(t){if(t&&typeof t=="object")switch(t[ti]){case Io:case Nh:return!0}return!1}function En(t){if(t&&typeof t=="object")switch(t[ti]){case pN:case Io:case Hi:case Nh:return!0}return!1}const EI=t=>(en(t)||Cn(t))&&!!t.anchor,gl=Symbol("break visit"),Hie=Symbol("skip children"),Vf=Symbol("remove node");function Eh(t,e){const n=Fie(e);nm(t)?Nu(null,t.contents,n,Object.freeze([t]))===Vf&&(t.contents=null):Nu(null,t,n,Object.freeze([]))}Eh.BREAK=gl;Eh.SKIP=Hie;Eh.REMOVE=Vf;function Nu(t,e,n,s){const r=Vie(t,e,n,s);if(En(r)||An(r))return qie(t,s,r),Nu(t,r,n,s);if(typeof r!="symbol"){if(Cn(e)){s=Object.freeze(s.concat(e));for(let i=0;i<e.items.length;++i){const o=Nu(i,e.items[i],n,s);if(typeof o=="number")i=o-1;else{if(o===gl)return gl;o===Vf&&(e.items.splice(i,1),i-=1)}}}else if(An(e)){s=Object.freeze(s.concat(e));const i=Nu("key",e.key,n,s);if(i===gl)return gl;i===Vf&&(e.key=null);const o=Nu("value",e.value,n,s);if(o===gl)return gl;o===Vf&&(e.value=null)}}return r}function Fie(t){return typeof t=="object"&&(t.Collection||t.Node||t.Value)?Object.assign({Alias:t.Node,Map:t.Node,Scalar:t.Node,Seq:t.Node},t.Value&&{Map:t.Value,Scalar:t.Value,Seq:t.Value},t.Collection&&{Map:t.Collection,Seq:t.Collection},t):t}function Vie(t,e,n,s){if(typeof n=="function")return n(t,e,s);if(sm(e))return n.Map?.(t,e,s);if(rm(e))return n.Seq?.(t,e,s);if(An(e))return n.Pair?.(t,e,s);if(en(e))return n.Scalar?.(t,e,s);if(pc(e))return n.Alias?.(t,e,s)}function qie(t,e,n){const s=e[e.length-1];if(Cn(s))s.items[t]=n;else if(An(s))t==="key"?s.key=n:s.value=n;else if(nm(s))s.contents=n;else{const r=pc(s)?"alias":"scalar";throw new Error(`Cannot replace node with ${r} parent`)}}const Kie={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},Wie=t=>t.replace(/[!,[\]{}]/g,e=>Kie[e]);class Os{constructor(e,n){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},Os.defaultYaml,e),this.tags=Object.assign({},Os.defaultTags,n)}clone(){const e=new Os(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new Os(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Os.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Os.defaultTags);break}return e}add(e,n){this.atNextDocument&&(this.yaml={explicit:Os.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Os.defaultTags),this.atNextDocument=!1);const s=e.trim().split(/[ \t]+/),r=s.shift();switch(r){case"%TAG":{if(s.length!==2&&(n(0,"%TAG directive should contain exactly two parts"),s.length<2))return!1;const[i,o]=s;return this.tags[i]=o,!0}case"%YAML":{if(this.yaml.explicit=!0,s.length!==1)return n(0,"%YAML directive should contain exactly one part"),!1;const[i]=s;if(i==="1.1"||i==="1.2")return this.yaml.version=i,!0;{const o=/^\d+\.\d+$/.test(i);return n(6,`Unsupported YAML version ${i}`,o),!1}}default:return n(0,`Unknown directive ${r}`,!0),!1}}tagName(e,n){if(e==="!")return"!";if(e[0]!=="!")return n(`Not a valid tag: ${e}`),null;if(e[1]==="<"){const o=e.slice(2,-1);return o==="!"||o==="!!"?(n(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&n("Verbatim tags must end with a >"),o)}const[,s,r]=e.match(/^(.*!)([^!]*)$/s);r||n(`The ${e} tag has no suffix`);const i=this.tags[s];if(i)try{return i+decodeURIComponent(r)}catch(o){return n(String(o)),null}return s==="!"?e:(n(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[n,s]of Object.entries(this.tags))if(e.startsWith(s))return n+Wie(e.substring(s.length));return e[0]==="!"?e:`!<${e}>`}toString(e){const n=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],s=Object.entries(this.tags);let r;if(e&&s.length>0&&En(e.contents)){const i={};Eh(e.contents,(o,c)=>{En(c)&&c.tag&&(i[c.tag]=!0)}),r=Object.keys(i)}else r=[];for(const[i,o]of s)i==="!!"&&o==="tag:yaml.org,2002:"||(!e||r.some(c=>c.startsWith(o)))&&n.push(`%TAG ${i} ${o}`);return n.join(`
`)}}Os.defaultYaml={explicit:!1,version:"1.2"};Os.defaultTags={"!!":"tag:yaml.org,2002:"};function AI(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){const n=`Anchor must not contain whitespace or control characters: ${JSON.stringify(t)}`;throw new Error(n)}return!0}function jI(t){const e=new Set;return Eh(t,{Value(n,s){s.anchor&&e.add(s.anchor)}}),e}function TI(t,e){for(let n=1;;++n){const s=`${t}${n}`;if(!e.has(s))return s}}function Gie(t,e){const n=[],s=new Map;let r=null;return{onAnchor:i=>{n.push(i),r??(r=jI(t));const o=TI(e,r);return r.add(o),o},setAnchors:()=>{for(const i of n){const o=s.get(i);if(typeof o=="object"&&o.anchor&&(en(o.node)||Cn(o.node)))o.node.anchor=o.anchor;else{const c=new Error("Failed to resolve repeated object (this should not happen)");throw c.source=i,c}}},sourceObjects:s}}function Eu(t,e,n,s){if(s&&typeof s=="object")if(Array.isArray(s))for(let r=0,i=s.length;r<i;++r){const o=s[r],c=Eu(t,s,String(r),o);c===void 0?delete s[r]:c!==o&&(s[r]=c)}else if(s instanceof Map)for(const r of Array.from(s.keys())){const i=s.get(r),o=Eu(t,s,r,i);o===void 0?s.delete(r):o!==i&&s.set(r,o)}else if(s instanceof Set)for(const r of Array.from(s)){const i=Eu(t,s,r,r);i===void 0?s.delete(r):i!==r&&(s.delete(r),s.add(i))}else for(const[r,i]of Object.entries(s)){const o=Eu(t,s,r,i);o===void 0?delete s[r]:o!==i&&(s[r]=o)}return t.call(e,n,s)}function Qr(t,e,n){if(Array.isArray(t))return t.map((s,r)=>Qr(s,String(r),n));if(t&&typeof t.toJSON=="function"){if(!n||!EI(t))return t.toJSON(e,n);const s={aliasCount:0,count:1,res:void 0};n.anchors.set(t,s),n.onCreate=i=>{s.res=i,delete n.onCreate};const r=t.toJSON(e,n);return n.onCreate&&n.onCreate(r),r}return typeof t=="bigint"&&!n?.keep?Number(t):t}class mN{constructor(e){Object.defineProperty(this,ti,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:n,maxAliasCount:s,onAnchor:r,reviver:i}={}){if(!nm(e))throw new TypeError("A document argument is required");const o={anchors:new Map,doc:e,keep:!0,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof s=="number"?s:100},c=Qr(this,"",o);if(typeof r=="function")for(const{count:u,res:h}of o.anchors.values())r(h,u);return typeof i=="function"?Eu(i,{"":c},"",c):c}}class gN extends mN{constructor(e){super(pN),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e,n){let s;n?.aliasResolveCache?s=n.aliasResolveCache:(s=[],Eh(e,{Node:(i,o)=>{(pc(o)||EI(o))&&s.push(o)}}),n&&(n.aliasResolveCache=s));let r;for(const i of s){if(i===this)break;i.anchor===this.source&&(r=i)}return r}toJSON(e,n){if(!n)return{source:this.source};const{anchors:s,doc:r,maxAliasCount:i}=n,o=this.resolve(r,n);if(!o){const u=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(u)}let c=s.get(o);if(c||(Qr(o,null,n),c=s.get(o)),c?.res===void 0){const u="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(u)}if(i>=0&&(c.count+=1,c.aliasCount===0&&(c.aliasCount=E0(r,o,s)),c.count*c.aliasCount>i)){const u="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(u)}return c.res}toString(e,n,s){const r=`*${this.source}`;if(e){if(AI(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const i=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(i)}if(e.implicitKey)return`${r} `}return r}}function E0(t,e,n){if(pc(e)){const s=e.resolve(t),r=n&&s&&n.get(s);return r?r.count*r.aliasCount:0}else if(Cn(e)){let s=0;for(const r of e.items){const i=E0(t,r,n);i>s&&(s=i)}return s}else if(An(e)){const s=E0(t,e.key,n),r=E0(t,e.value,n);return Math.max(s,r)}return 1}const RI=t=>!t||typeof t!="function"&&typeof t!="object";class gt extends mN{constructor(e){super(Hi),this.value=e}toJSON(e,n){return n?.keep?this.value:Qr(this.value,e,n)}toString(){return String(this.value)}}gt.BLOCK_FOLDED="BLOCK_FOLDED";gt.BLOCK_LITERAL="BLOCK_LITERAL";gt.PLAIN="PLAIN";gt.QUOTE_DOUBLE="QUOTE_DOUBLE";gt.QUOTE_SINGLE="QUOTE_SINGLE";const Yie="tag:yaml.org,2002:";function Zie(t,e,n){if(e){const s=n.filter(i=>i.tag===e),r=s.find(i=>!i.format)??s[0];if(!r)throw new Error(`Tag ${e} not found`);return r}return n.find(s=>s.identify?.(t)&&!s.format)}function kp(t,e,n){if(nm(t)&&(t=t.contents),En(t))return t;if(An(t)){const p=n.schema[Io].createNode?.(n.schema,null,n);return p.items.push(t),p}(t instanceof String||t instanceof Number||t instanceof Boolean||typeof BigInt<"u"&&t instanceof BigInt)&&(t=t.valueOf());const{aliasDuplicateObjects:s,onAnchor:r,onTagObj:i,schema:o,sourceObjects:c}=n;let u;if(s&&t&&typeof t=="object"){if(u=c.get(t),u)return u.anchor??(u.anchor=r(t)),new gN(u.anchor);u={anchor:null,node:null},c.set(t,u)}e?.startsWith("!!")&&(e=Yie+e.slice(2));let h=Zie(t,e,o.tags);if(!h){if(t&&typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object"){const p=new gt(t);return u&&(u.node=p),p}h=t instanceof Map?o[Io]:Symbol.iterator in Object(t)?o[Nh]:o[Io]}i&&(i(h),delete n.onTagObj);const m=h?.createNode?h.createNode(n.schema,t,n):typeof h?.nodeClass?.from=="function"?h.nodeClass.from(n.schema,t,n):new gt(t);return e?m.tag=e:h.default||(m.tag=h.tag),u&&(u.node=m),m}function Gy(t,e,n){let s=n;for(let r=e.length-1;r>=0;--r){const i=e[r];if(typeof i=="number"&&Number.isInteger(i)&&i>=0){const o=[];o[i]=s,s=o}else s=new Map([[i,s]])}return kp(s,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}const _f=t=>t==null||typeof t=="object"&&!!t[Symbol.iterator]().next().done;class OI extends mN{constructor(e,n){super(e),Object.defineProperty(this,"schema",{value:n,configurable:!0,enumerable:!1,writable:!0})}clone(e){const n=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(n.schema=e),n.items=n.items.map(s=>En(s)||An(s)?s.clone(e):s),this.range&&(n.range=this.range.slice()),n}addIn(e,n){if(_f(e))this.add(n);else{const[s,...r]=e,i=this.get(s,!0);if(Cn(i))i.addIn(r,n);else if(i===void 0&&this.schema)this.set(s,Gy(this.schema,r,n));else throw new Error(`Expected YAML collection at ${s}. Remaining path: ${r}`)}}deleteIn(e){const[n,...s]=e;if(s.length===0)return this.delete(n);const r=this.get(n,!0);if(Cn(r))return r.deleteIn(s);throw new Error(`Expected YAML collection at ${n}. Remaining path: ${s}`)}getIn(e,n){const[s,...r]=e,i=this.get(s,!0);return r.length===0?!n&&en(i)?i.value:i:Cn(i)?i.getIn(r,n):void 0}hasAllNullValues(e){return this.items.every(n=>{if(!An(n))return!1;const s=n.value;return s==null||e&&en(s)&&s.value==null&&!s.commentBefore&&!s.comment&&!s.tag})}hasIn(e){const[n,...s]=e;if(s.length===0)return this.has(n);const r=this.get(n,!0);return Cn(r)?r.hasIn(s):!1}setIn(e,n){const[s,...r]=e;if(r.length===0)this.set(s,n);else{const i=this.get(s,!0);if(Cn(i))i.setIn(r,n);else if(i===void 0&&this.schema)this.set(s,Gy(this.schema,r,n));else throw new Error(`Expected YAML collection at ${s}. Remaining path: ${r}`)}}}const Xie=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function wa(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}const Cl=(t,e,n)=>t.endsWith(`
`)?wa(n,e):n.includes(`
`)?`
`+wa(n,e):(t.endsWith(" ")?"":" ")+n,MI="flow",r2="block",A0="quoted";function xb(t,e,n="flow",{indentAtStart:s,lineWidth:r=80,minContentWidth:i=20,onFold:o,onOverflow:c}={}){if(!r||r<0)return t;r<i&&(i=0);const u=Math.max(1+i,1+r-e.length);if(t.length<=u)return t;const h=[],m={};let p=r-e.length;typeof s=="number"&&(s>r-Math.max(2,i)?h.push(0):p=r-s);let y,v,x=!1,_=-1,S=-1,k=-1;n===r2&&(_=_O(t,_,e.length),_!==-1&&(p=_+u));for(let N;N=t[_+=1];){if(n===A0&&N==="\\"){switch(S=_,t[_+1]){case"x":_+=3;break;case"u":_+=5;break;case"U":_+=9;break;default:_+=1}k=_}if(N===`
`)n===r2&&(_=_O(t,_,e.length)),p=_+e.length+u,y=void 0;else{if(N===" "&&v&&v!==" "&&v!==`
`&&v!=="	"){const R=t[_+1];R&&R!==" "&&R!==`
`&&R!=="	"&&(y=_)}if(_>=p)if(y)h.push(y),p=y+u,y=void 0;else if(n===A0){for(;v===" "||v==="	";)v=N,N=t[_+=1],x=!0;const R=_>k+1?_-2:S-1;if(m[R])return t;h.push(R),m[R]=!0,p=R+u,y=void 0}else x=!0}v=N}if(x&&c&&c(),h.length===0)return t;o&&o();let C=t.slice(0,h[0]);for(let N=0;N<h.length;++N){const R=h[N],O=h[N+1]||t.length;R===0?C=`
${e}${t.slice(0,O)}`:(n===A0&&m[R]&&(C+=`${t[R]}\\`),C+=`
${e}${t.slice(R+1,O)}`)}return C}function _O(t,e,n){let s=e,r=e+1,i=t[r];for(;i===" "||i==="	";)if(e<r+n)i=t[++e];else{do i=t[++e];while(i&&i!==`
`);s=e,r=e+1,i=t[r]}return s}const wb=(t,e)=>({indentAtStart:e?t.indent.length:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),Sb=t=>/^(%|---|\.\.\.)/m.test(t);function Jie(t,e,n){if(!e||e<0)return!1;const s=e-n,r=t.length;if(r<=s)return!1;for(let i=0,o=0;i<r;++i)if(t[i]===`
`){if(i-o>s)return!0;if(o=i+1,r-o<=s)return!1}return!0}function qf(t,e){const n=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return n;const{implicitKey:s}=e,r=e.options.doubleQuotedMinMultiLineLength,i=e.indent||(Sb(t)?"  ":"");let o="",c=0;for(let u=0,h=n[u];h;h=n[++u])if(h===" "&&n[u+1]==="\\"&&n[u+2]==="n"&&(o+=n.slice(c,u)+"\\ ",u+=1,c=u,h="\\"),h==="\\")switch(n[u+1]){case"u":{o+=n.slice(c,u);const m=n.substr(u+2,4);switch(m){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:m.substr(0,2)==="00"?o+="\\x"+m.substr(2):o+=n.substr(u,6)}u+=5,c=u+1}break;case"n":if(s||n[u+2]==='"'||n.length<r)u+=1;else{for(o+=n.slice(c,u)+`

`;n[u+2]==="\\"&&n[u+3]==="n"&&n[u+4]!=='"';)o+=`
`,u+=2;o+=i,n[u+2]===" "&&(o+="\\"),u+=1,c=u+1}break;default:u+=1}return o=c?o+n.slice(c):n,s?o:xb(o,i,A0,wb(e,!1))}function i2(t,e){if(e.options.singleQuote===!1||e.implicitKey&&t.includes(`
`)||/[ \t]\n|\n[ \t]/.test(t))return qf(t,e);const n=e.indent||(Sb(t)?"  ":""),s="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return e.implicitKey?s:xb(s,n,MI,wb(e,!1))}function Au(t,e){const{singleQuote:n}=e.options;let s;if(n===!1)s=qf;else{const r=t.includes('"'),i=t.includes("'");r&&!i?s=i2:i&&!r?s=qf:s=n?i2:qf}return s(t,e)}let a2;try{a2=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{a2=/\n+(?!\n|$)/g}function j0({comment:t,type:e,value:n},s,r,i){const{blockQuote:o,commentString:c,lineWidth:u}=s.options;if(!o||/\n[\t ]+$/.test(n))return Au(n,s);const h=s.indent||(s.forceBlockIndent||Sb(n)?"  ":""),m=o==="literal"?!0:o==="folded"||e===gt.BLOCK_FOLDED?!1:e===gt.BLOCK_LITERAL?!0:!Jie(n,u,h.length);if(!n)return m?`|
`:`>
`;let p,y;for(y=n.length;y>0;--y){const O=n[y-1];if(O!==`
`&&O!=="	"&&O!==" ")break}let v=n.substring(y);const x=v.indexOf(`
`);x===-1?p="-":n===v||x!==v.length-1?(p="+",i&&i()):p="",v&&(n=n.slice(0,-v.length),v[v.length-1]===`
`&&(v=v.slice(0,-1)),v=v.replace(a2,`$&${h}`));let _=!1,S,k=-1;for(S=0;S<n.length;++S){const O=n[S];if(O===" ")_=!0;else if(O===`
`)k=S;else break}let C=n.substring(0,k<S?k+1:S);C&&(n=n.substring(C.length),C=C.replace(/\n+/g,`$&${h}`));let R=(_?h?"2":"1":"")+p;if(t&&(R+=" "+c(t.replace(/ ?[\r\n]+/g," ")),r&&r()),!m){const O=n.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${h}`);let E=!1;const D=wb(s,!0);o!=="folded"&&e!==gt.BLOCK_FOLDED&&(D.onOverflow=()=>{E=!0});const B=xb(`${C}${O}${v}`,h,r2,D);if(!E)return`>${R}
${h}${B}`}return n=n.replace(/\n+/g,`$&${h}`),`|${R}
${h}${C}${n}${v}`}function Qie(t,e,n,s){const{type:r,value:i}=t,{actualString:o,implicitKey:c,indent:u,indentStep:h,inFlow:m}=e;if(c&&i.includes(`
`)||m&&/[[\]{},]/.test(i))return Au(i,e);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(i))return c||m||!i.includes(`
`)?Au(i,e):j0(t,e,n,s);if(!c&&!m&&r!==gt.PLAIN&&i.includes(`
`))return j0(t,e,n,s);if(Sb(i)){if(u==="")return e.forceBlockIndent=!0,j0(t,e,n,s);if(c&&u===h)return Au(i,e)}const p=i.replace(/\n+/g,`$&
${u}`);if(o){const y=_=>_.default&&_.tag!=="tag:yaml.org,2002:str"&&_.test?.test(p),{compat:v,tags:x}=e.doc.schema;if(x.some(y)||v?.some(y))return Au(i,e)}return c?p:xb(p,u,MI,wb(e,!1))}function yN(t,e,n,s){const{implicitKey:r,inFlow:i}=e,o=typeof t.value=="string"?t:Object.assign({},t,{value:String(t.value)});let{type:c}=t;c!==gt.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)&&(c=gt.QUOTE_DOUBLE);const u=m=>{switch(m){case gt.BLOCK_FOLDED:case gt.BLOCK_LITERAL:return r||i?Au(o.value,e):j0(o,e,n,s);case gt.QUOTE_DOUBLE:return qf(o.value,e);case gt.QUOTE_SINGLE:return i2(o.value,e);case gt.PLAIN:return Qie(o,e,n,s);default:return null}};let h=u(c);if(h===null){const{defaultKeyType:m,defaultStringType:p}=e.options,y=r&&m||p;if(h=u(y),h===null)throw new Error(`Unsupported default string type ${y}`)}return h}function DI(t,e){const n=Object.assign({blockQuote:!0,commentString:Xie,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e);let s;switch(n.collectionStyle){case"block":s=!1;break;case"flow":s=!0;break;default:s=null}return{anchors:new Set,doc:t,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:typeof n.indent=="number"?" ".repeat(n.indent):"  ",inFlow:s,options:n}}function eae(t,e){if(e.tag){const r=t.filter(i=>i.tag===e.tag);if(r.length>0)return r.find(i=>i.format===e.format)??r[0]}let n,s;if(en(e)){s=e.value;let r=t.filter(i=>i.identify?.(s));if(r.length>1){const i=r.filter(o=>o.test);i.length>0&&(r=i)}n=r.find(i=>i.format===e.format)??r.find(i=>!i.format)}else s=e,n=t.find(r=>r.nodeClass&&s instanceof r.nodeClass);if(!n){const r=s?.constructor?.name??(s===null?"null":typeof s);throw new Error(`Tag not resolved for ${r} value`)}return n}function tae(t,e,{anchors:n,doc:s}){if(!s.directives)return"";const r=[],i=(en(t)||Cn(t))&&t.anchor;i&&AI(i)&&(n.add(i),r.push(`&${i}`));const o=t.tag??(e.default?null:e.tag);return o&&r.push(s.directives.tagString(o)),r.join(" ")}function nh(t,e,n,s){if(An(t))return t.toString(e,n,s);if(pc(t)){if(e.doc.directives)return t.toString(e);if(e.resolvedAliases?.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let r;const i=En(t)?t:e.doc.createNode(t,{onTagObj:u=>r=u});r??(r=eae(e.doc.schema.tags,i));const o=tae(i,r,e);o.length>0&&(e.indentAtStart=(e.indentAtStart??0)+o.length+1);const c=typeof r.stringify=="function"?r.stringify(i,e,n,s):en(i)?yN(i,e,n,s):i.toString(e,n,s);return o?en(i)||c[0]==="{"||c[0]==="["?`${o} ${c}`:`${o}
${e.indent}${c}`:c}function nae({key:t,value:e},n,s,r){const{allNullValues:i,doc:o,indent:c,indentStep:u,options:{commentString:h,indentSeq:m,simpleKeys:p}}=n;let y=En(t)&&t.comment||null;if(p){if(y)throw new Error("With simple keys, key nodes cannot have comments");if(Cn(t)||!En(t)&&typeof t=="object"){const D="With simple keys, collection cannot be used as a key value";throw new Error(D)}}let v=!p&&(!t||y&&e==null&&!n.inFlow||Cn(t)||(en(t)?t.type===gt.BLOCK_FOLDED||t.type===gt.BLOCK_LITERAL:typeof t=="object"));n=Object.assign({},n,{allNullValues:!1,implicitKey:!v&&(p||!i),indent:c+u});let x=!1,_=!1,S=nh(t,n,()=>x=!0,()=>_=!0);if(!v&&!n.inFlow&&S.length>1024){if(p)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");v=!0}if(n.inFlow){if(i||e==null)return x&&s&&s(),S===""?"?":v?`? ${S}`:S}else if(i&&!p||e==null&&v)return S=`? ${S}`,y&&!x?S+=Cl(S,n.indent,h(y)):_&&r&&r(),S;x&&(y=null),v?(y&&(S+=Cl(S,n.indent,h(y))),S=`? ${S}
${c}:`):(S=`${S}:`,y&&(S+=Cl(S,n.indent,h(y))));let k,C,N;En(e)?(k=!!e.spaceBefore,C=e.commentBefore,N=e.comment):(k=!1,C=null,N=null,e&&typeof e=="object"&&(e=o.createNode(e))),n.implicitKey=!1,!v&&!y&&en(e)&&(n.indentAtStart=S.length+1),_=!1,!m&&u.length>=2&&!n.inFlow&&!v&&rm(e)&&!e.flow&&!e.tag&&!e.anchor&&(n.indent=n.indent.substring(2));let R=!1;const O=nh(e,n,()=>R=!0,()=>_=!0);let E=" ";if(y||k||C){if(E=k?`
`:"",C){const D=h(C);E+=`
${wa(D,n.indent)}`}O===""&&!n.inFlow?E===`
`&&N&&(E=`

`):E+=`
${n.indent}`}else if(!v&&Cn(e)){const D=O[0],B=O.indexOf(`
`),q=B!==-1,P=n.inFlow??e.flow??e.items.length===0;if(q||!P){let G=!1;if(q&&(D==="&"||D==="!")){let z=O.indexOf(" ");D==="&"&&z!==-1&&z<B&&O[z+1]==="!"&&(z=O.indexOf(" ",z+1)),(z===-1||B<z)&&(G=!0)}G||(E=`
${n.indent}`)}}else(O===""||O[0]===`
`)&&(E="");return S+=E+O,n.inFlow?R&&s&&s():N&&!R?S+=Cl(S,n.indent,h(N)):_&&r&&r(),S}function BI(t,e){(t==="debug"||t==="warn")&&console.warn(e)}const Xg="<<",ka={identify:t=>t===Xg||typeof t=="symbol"&&t.description===Xg,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new gt(Symbol(Xg)),{addToJSMap:LI}),stringify:()=>Xg},sae=(t,e)=>(ka.identify(e)||en(e)&&(!e.type||e.type===gt.PLAIN)&&ka.identify(e.value))&&t?.doc.schema.tags.some(n=>n.tag===ka.tag&&n.default);function LI(t,e,n){if(n=t&&pc(n)?n.resolve(t.doc):n,rm(n))for(const s of n.items)rw(t,e,s);else if(Array.isArray(n))for(const s of n)rw(t,e,s);else rw(t,e,n)}function rw(t,e,n){const s=t&&pc(n)?n.resolve(t.doc):n;if(!sm(s))throw new Error("Merge sources must be maps or map aliases");const r=s.toJSON(null,t,Map);for(const[i,o]of r)e instanceof Map?e.has(i)||e.set(i,o):e instanceof Set?e.add(i):Object.prototype.hasOwnProperty.call(e,i)||Object.defineProperty(e,i,{value:o,writable:!0,enumerable:!0,configurable:!0});return e}function II(t,e,{key:n,value:s}){if(En(n)&&n.addToJSMap)n.addToJSMap(t,e,s);else if(sae(t,n))LI(t,e,s);else{const r=Qr(n,"",t);if(e instanceof Map)e.set(r,Qr(s,r,t));else if(e instanceof Set)e.add(r);else{const i=rae(n,r,t),o=Qr(s,i,t);i in e?Object.defineProperty(e,i,{value:o,writable:!0,enumerable:!0,configurable:!0}):e[i]=o}}return e}function rae(t,e,n){if(e===null)return"";if(typeof e!="object")return String(e);if(En(t)&&n?.doc){const s=DI(n.doc,{});s.anchors=new Set;for(const i of n.anchors.keys())s.anchors.add(i.anchor);s.inFlow=!0,s.inStringifyKey=!0;const r=t.toString(s);if(!n.mapKeyWarned){let i=JSON.stringify(r);i.length>40&&(i=i.substring(0,36)+'..."'),BI(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${i}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return r}return JSON.stringify(e)}function vN(t,e,n){const s=kp(t,void 0,n),r=kp(e,void 0,n);return new Ls(s,r)}class Ls{constructor(e,n=null){Object.defineProperty(this,ti,{value:NI}),this.key=e,this.value=n}clone(e){let{key:n,value:s}=this;return En(n)&&(n=n.clone(e)),En(s)&&(s=s.clone(e)),new Ls(n,s)}toJSON(e,n){const s=n?.mapAsMap?new Map:{};return II(n,s,this)}toString(e,n,s){return e?.doc?nae(this,e,n,s):JSON.stringify(this)}}function PI(t,e,n){return(e.inFlow??t.flow?aae:iae)(t,e,n)}function iae({comment:t,items:e},n,{blockItemPrefix:s,flowChars:r,itemIndent:i,onChompKeep:o,onComment:c}){const{indent:u,options:{commentString:h}}=n,m=Object.assign({},n,{indent:i,type:null});let p=!1;const y=[];for(let x=0;x<e.length;++x){const _=e[x];let S=null;if(En(_))!p&&_.spaceBefore&&y.push(""),Yy(n,y,_.commentBefore,p),_.comment&&(S=_.comment);else if(An(_)){const C=En(_.key)?_.key:null;C&&(!p&&C.spaceBefore&&y.push(""),Yy(n,y,C.commentBefore,p))}p=!1;let k=nh(_,m,()=>S=null,()=>p=!0);S&&(k+=Cl(k,i,h(S))),p&&S&&(p=!1),y.push(s+k)}let v;if(y.length===0)v=r.start+r.end;else{v=y[0];for(let x=1;x<y.length;++x){const _=y[x];v+=_?`
${u}${_}`:`
`}}return t?(v+=`
`+wa(h(t),u),c&&c()):p&&o&&o(),v}function aae({items:t},e,{flowChars:n,itemIndent:s}){const{indent:r,indentStep:i,flowCollectionPadding:o,options:{commentString:c}}=e;s+=i;const u=Object.assign({},e,{indent:s,inFlow:!0,type:null});let h=!1,m=0;const p=[];for(let x=0;x<t.length;++x){const _=t[x];let S=null;if(En(_))_.spaceBefore&&p.push(""),Yy(e,p,_.commentBefore,!1),_.comment&&(S=_.comment);else if(An(_)){const C=En(_.key)?_.key:null;C&&(C.spaceBefore&&p.push(""),Yy(e,p,C.commentBefore,!1),C.comment&&(h=!0));const N=En(_.value)?_.value:null;N?(N.comment&&(S=N.comment),N.commentBefore&&(h=!0)):_.value==null&&C?.comment&&(S=C.comment)}S&&(h=!0);let k=nh(_,u,()=>S=null);x<t.length-1&&(k+=","),S&&(k+=Cl(k,s,c(S))),!h&&(p.length>m||k.includes(`
`))&&(h=!0),p.push(k),m=p.length}const{start:y,end:v}=n;if(p.length===0)return y+v;if(!h){const x=p.reduce((_,S)=>_+S.length+2,2);h=e.options.lineWidth>0&&x>e.options.lineWidth}if(h){let x=y;for(const _ of p)x+=_?`
${i}${r}${_}`:`
`;return`${x}
${r}${v}`}else return`${y}${o}${p.join(" ")}${o}${v}`}function Yy({indent:t,options:{commentString:e}},n,s,r){if(s&&r&&(s=s.replace(/^\n+/,"")),s){const i=wa(e(s),t);n.push(i.trimStart())}}function Nl(t,e){const n=en(e)?e.value:e;for(const s of t)if(An(s)&&(s.key===e||s.key===n||en(s.key)&&s.key.value===n))return s}class Wr extends OI{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(Io,e),this.items=[]}static from(e,n,s){const{keepUndefined:r,replacer:i}=s,o=new this(e),c=(u,h)=>{if(typeof i=="function")h=i.call(n,u,h);else if(Array.isArray(i)&&!i.includes(u))return;(h!==void 0||r)&&o.items.push(vN(u,h,s))};if(n instanceof Map)for(const[u,h]of n)c(u,h);else if(n&&typeof n=="object")for(const u of Object.keys(n))c(u,n[u]);return typeof e.sortMapEntries=="function"&&o.items.sort(e.sortMapEntries),o}add(e,n){let s;An(e)?s=e:!e||typeof e!="object"||!("key"in e)?s=new Ls(e,e?.value):s=new Ls(e.key,e.value);const r=Nl(this.items,s.key),i=this.schema?.sortMapEntries;if(r){if(!n)throw new Error(`Key ${s.key} already set`);en(r.value)&&RI(s.value)?r.value.value=s.value:r.value=s.value}else if(i){const o=this.items.findIndex(c=>i(s,c)<0);o===-1?this.items.push(s):this.items.splice(o,0,s)}else this.items.push(s)}delete(e){const n=Nl(this.items,e);return n?this.items.splice(this.items.indexOf(n),1).length>0:!1}get(e,n){const r=Nl(this.items,e)?.value;return(!n&&en(r)?r.value:r)??void 0}has(e){return!!Nl(this.items,e)}set(e,n){this.add(new Ls(e,n),!0)}toJSON(e,n,s){const r=s?new s:n?.mapAsMap?new Map:{};n?.onCreate&&n.onCreate(r);for(const i of this.items)II(n,r,i);return r}toString(e,n,s){if(!e)return JSON.stringify(this);for(const r of this.items)if(!An(r))throw new Error(`Map items must all be pairs; found ${JSON.stringify(r)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),PI(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:s,onComment:n})}}const Ah={collection:"map",default:!0,nodeClass:Wr,tag:"tag:yaml.org,2002:map",resolve(t,e){return sm(t)||e("Expected a mapping for this tag"),t},createNode:(t,e,n)=>Wr.from(t,e,n)};class sc extends OI{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(Nh,e),this.items=[]}add(e){this.items.push(e)}delete(e){const n=Jg(e);return typeof n!="number"?!1:this.items.splice(n,1).length>0}get(e,n){const s=Jg(e);if(typeof s!="number")return;const r=this.items[s];return!n&&en(r)?r.value:r}has(e){const n=Jg(e);return typeof n=="number"&&n<this.items.length}set(e,n){const s=Jg(e);if(typeof s!="number")throw new Error(`Expected a valid index, not ${e}.`);const r=this.items[s];en(r)&&RI(n)?r.value=n:this.items[s]=n}toJSON(e,n){const s=[];n?.onCreate&&n.onCreate(s);let r=0;for(const i of this.items)s.push(Qr(i,String(r++),n));return s}toString(e,n,s){return e?PI(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:s,onComment:n}):JSON.stringify(this)}static from(e,n,s){const{replacer:r}=s,i=new this(e);if(n&&Symbol.iterator in Object(n)){let o=0;for(let c of n){if(typeof r=="function"){const u=n instanceof Set?c:String(o++);c=r.call(n,u,c)}i.items.push(kp(c,void 0,s))}}return i}}function Jg(t){let e=en(t)?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}const jh={collection:"seq",default:!0,nodeClass:sc,tag:"tag:yaml.org,2002:seq",resolve(t,e){return rm(t)||e("Expected a sequence for this tag"),t},createNode:(t,e,n)=>sc.from(t,e,n)},kb={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify(t,e,n,s){return e=Object.assign({actualString:!0},e),yN(t,e,n,s)}},Cb={identify:t=>t==null,createNode:()=>new gt(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new gt(null),stringify:({source:t},e)=>typeof t=="string"&&Cb.test.test(t)?t:e.options.nullStr},bN={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new gt(t[0]==="t"||t[0]==="T"),stringify({source:t,value:e},n){if(t&&bN.test.test(t)){const s=t[0]==="t"||t[0]==="T";if(e===s)return t}return e?n.options.trueStr:n.options.falseStr}};function _i({format:t,minFractionDigits:e,tag:n,value:s}){if(typeof s=="bigint")return String(s);const r=typeof s=="number"?s:Number(s);if(!isFinite(r))return isNaN(r)?".nan":r<0?"-.inf":".inf";let i=Object.is(s,-0)?"-0":JSON.stringify(s);if(!t&&e&&(!n||n==="tag:yaml.org,2002:float")&&/^\d/.test(i)){let o=i.indexOf(".");o<0&&(o=i.length,i+=".");let c=e-(i.length-o-1);for(;c-- >0;)i+="0"}return i}const $I={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:_i},zI={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():_i(t)}},UI={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){const e=new gt(parseFloat(t)),n=t.indexOf(".");return n!==-1&&t[t.length-1]==="0"&&(e.minFractionDigits=t.length-n-1),e},stringify:_i},Nb=t=>typeof t=="bigint"||Number.isInteger(t),_N=(t,e,n,{intAsBigInt:s})=>s?BigInt(t):parseInt(t.substring(e),n);function HI(t,e,n){const{value:s}=t;return Nb(s)&&s>=0?n+s.toString(e):_i(t)}const FI={identify:t=>Nb(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,n)=>_N(t,2,8,n),stringify:t=>HI(t,8,"0o")},VI={identify:Nb,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,n)=>_N(t,0,10,n),stringify:_i},qI={identify:t=>Nb(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,n)=>_N(t,2,16,n),stringify:t=>HI(t,16,"0x")},oae=[Ah,jh,kb,Cb,bN,FI,VI,qI,$I,zI,UI];function xO(t){return typeof t=="bigint"||Number.isInteger(t)}const Qg=({value:t})=>JSON.stringify(t),lae=[{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:Qg},{identify:t=>t==null,createNode:()=>new gt(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:Qg},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:t=>t==="true",stringify:Qg},{identify:xO,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:n})=>n?BigInt(t):parseInt(t,10),stringify:({value:t})=>xO(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:Qg}],cae={default:!0,tag:"",test:/^/,resolve(t,e){return e(`Unresolved plain scalar ${JSON.stringify(t)}`),t}},uae=[Ah,jh].concat(lae,cae),xN={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if(typeof atob=="function"){const n=atob(t.replace(/[\n\r]/g,"")),s=new Uint8Array(n.length);for(let r=0;r<n.length;++r)s[r]=n.charCodeAt(r);return s}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:n},s,r,i){if(!n)return"";const o=n;let c;if(typeof btoa=="function"){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);c=btoa(u)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e??(e=gt.BLOCK_LITERAL),e!==gt.QUOTE_DOUBLE){const u=Math.max(s.options.lineWidth-s.indent.length,s.options.minContentWidth),h=Math.ceil(c.length/u),m=new Array(h);for(let p=0,y=0;p<h;++p,y+=u)m[p]=c.substr(y,u);c=m.join(e===gt.BLOCK_LITERAL?`
`:" ")}return yN({comment:t,type:e,value:c},s,r,i)}};function KI(t,e){if(rm(t))for(let n=0;n<t.items.length;++n){let s=t.items[n];if(!An(s)){if(sm(s)){s.items.length>1&&e("Each pair must have its own sequence indicator");const r=s.items[0]||new Ls(new gt(null));if(s.commentBefore&&(r.key.commentBefore=r.key.commentBefore?`${s.commentBefore}
${r.key.commentBefore}`:s.commentBefore),s.comment){const i=r.value??r.key;i.comment=i.comment?`${s.comment}
${i.comment}`:s.comment}s=r}t.items[n]=An(s)?s:new Ls(s)}}else e("Expected a sequence for this tag");return t}function WI(t,e,n){const{replacer:s}=n,r=new sc(t);r.tag="tag:yaml.org,2002:pairs";let i=0;if(e&&Symbol.iterator in Object(e))for(let o of e){typeof s=="function"&&(o=s.call(e,String(i++),o));let c,u;if(Array.isArray(o))if(o.length===2)c=o[0],u=o[1];else throw new TypeError(`Expected [key, value] tuple: ${o}`);else if(o&&o instanceof Object){const h=Object.keys(o);if(h.length===1)c=h[0],u=o[c];else throw new TypeError(`Expected tuple with one key, not ${h.length} keys`)}else c=o;r.items.push(vN(c,u,n))}return r}const wN={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:KI,createNode:WI};class Lu extends sc{constructor(){super(),this.add=Wr.prototype.add.bind(this),this.delete=Wr.prototype.delete.bind(this),this.get=Wr.prototype.get.bind(this),this.has=Wr.prototype.has.bind(this),this.set=Wr.prototype.set.bind(this),this.tag=Lu.tag}toJSON(e,n){if(!n)return super.toJSON(e);const s=new Map;n?.onCreate&&n.onCreate(s);for(const r of this.items){let i,o;if(An(r)?(i=Qr(r.key,"",n),o=Qr(r.value,i,n)):i=Qr(r,"",n),s.has(i))throw new Error("Ordered maps must not include duplicate keys");s.set(i,o)}return s}static from(e,n,s){const r=WI(e,n,s),i=new this;return i.items=r.items,i}}Lu.tag="tag:yaml.org,2002:omap";const SN={collection:"seq",identify:t=>t instanceof Map,nodeClass:Lu,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){const n=KI(t,e),s=[];for(const{key:r}of n.items)en(r)&&(s.includes(r.value)?e(`Ordered maps must not include duplicate keys: ${r.value}`):s.push(r.value));return Object.assign(new Lu,n)},createNode:(t,e,n)=>Lu.from(t,e,n)};function GI({value:t,source:e},n){return e&&(t?YI:ZI).test.test(e)?e:t?n.options.trueStr:n.options.falseStr}const YI={identify:t=>t===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new gt(!0),stringify:GI},ZI={identify:t=>t===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new gt(!1),stringify:GI},hae={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:_i},dae={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():_i(t)}},fae={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){const e=new gt(parseFloat(t.replace(/_/g,""))),n=t.indexOf(".");if(n!==-1){const s=t.substring(n+1).replace(/_/g,"");s[s.length-1]==="0"&&(e.minFractionDigits=s.length)}return e},stringify:_i},im=t=>typeof t=="bigint"||Number.isInteger(t);function Eb(t,e,n,{intAsBigInt:s}){const r=t[0];if((r==="-"||r==="+")&&(e+=1),t=t.substring(e).replace(/_/g,""),s){switch(n){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`;break}const o=BigInt(t);return r==="-"?BigInt(-1)*o:o}const i=parseInt(t,n);return r==="-"?-1*i:i}function kN(t,e,n){const{value:s}=t;if(im(s)){const r=s.toString(e);return s<0?"-"+n+r.substr(1):n+r}return _i(t)}const pae={identify:im,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,n)=>Eb(t,2,2,n),stringify:t=>kN(t,2,"0b")},mae={identify:im,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,n)=>Eb(t,1,8,n),stringify:t=>kN(t,8,"0")},gae={identify:im,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,n)=>Eb(t,0,10,n),stringify:_i},yae={identify:im,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,n)=>Eb(t,2,16,n),stringify:t=>kN(t,16,"0x")};class Iu extends Wr{constructor(e){super(e),this.tag=Iu.tag}add(e){let n;An(e)?n=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?n=new Ls(e.key,null):n=new Ls(e,null),Nl(this.items,n.key)||this.items.push(n)}get(e,n){const s=Nl(this.items,e);return!n&&An(s)?en(s.key)?s.key.value:s.key:s}set(e,n){if(typeof n!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof n}`);const s=Nl(this.items,e);s&&!n?this.items.splice(this.items.indexOf(s),1):!s&&n&&this.items.push(new Ls(e))}toJSON(e,n){return super.toJSON(e,n,Set)}toString(e,n,s){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),n,s);throw new Error("Set items must all have null values")}static from(e,n,s){const{replacer:r}=s,i=new this(e);if(n&&Symbol.iterator in Object(n))for(let o of n)typeof r=="function"&&(o=r.call(n,o,o)),i.items.push(vN(o,null,s));return i}}Iu.tag="tag:yaml.org,2002:set";const CN={collection:"map",identify:t=>t instanceof Set,nodeClass:Iu,default:!1,tag:"tag:yaml.org,2002:set",createNode:(t,e,n)=>Iu.from(t,e,n),resolve(t,e){if(sm(t)){if(t.hasAllNullValues(!0))return Object.assign(new Iu,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t}};function NN(t,e){const n=t[0],s=n==="-"||n==="+"?t.substring(1):t,r=o=>e?BigInt(o):Number(o),i=s.replace(/_/g,"").split(":").reduce((o,c)=>o*r(60)+r(c),r(0));return n==="-"?r(-1)*i:i}function XI(t){let{value:e}=t,n=o=>o;if(typeof e=="bigint")n=o=>BigInt(o);else if(isNaN(e)||!isFinite(e))return _i(t);let s="";e<0&&(s="-",e*=n(-1));const r=n(60),i=[e%r];return e<60?i.unshift(0):(e=(e-i[0])/r,i.unshift(e%r),e>=60&&(e=(e-i[0])/r,i.unshift(e))),s+i.map(o=>String(o).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const JI={identify:t=>typeof t=="bigint"||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:n})=>NN(t,n),stringify:XI},QI={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>NN(t,!1),stringify:XI},Ab={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){const e=t.match(Ab.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,s,r,i,o,c]=e.map(Number),u=e[7]?Number((e[7]+"00").substr(1,3)):0;let h=Date.UTC(n,s-1,r,i||0,o||0,c||0,u);const m=e[8];if(m&&m!=="Z"){let p=NN(m,!1);Math.abs(p)<30&&(p*=60),h-=6e4*p}return new Date(h)},stringify:({value:t})=>t?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""},wO=[Ah,jh,kb,Cb,YI,ZI,pae,mae,gae,yae,hae,dae,fae,xN,ka,SN,wN,CN,JI,QI,Ab],SO=new Map([["core",oae],["failsafe",[Ah,jh,kb]],["json",uae],["yaml11",wO],["yaml-1.1",wO]]),kO={binary:xN,bool:bN,float:UI,floatExp:zI,floatNaN:$I,floatTime:QI,int:VI,intHex:qI,intOct:FI,intTime:JI,map:Ah,merge:ka,null:Cb,omap:SN,pairs:wN,seq:jh,set:CN,timestamp:Ab},vae={"tag:yaml.org,2002:binary":xN,"tag:yaml.org,2002:merge":ka,"tag:yaml.org,2002:omap":SN,"tag:yaml.org,2002:pairs":wN,"tag:yaml.org,2002:set":CN,"tag:yaml.org,2002:timestamp":Ab};function iw(t,e,n){const s=SO.get(e);if(s&&!t)return n&&!s.includes(ka)?s.concat(ka):s.slice();let r=s;if(!r)if(Array.isArray(t))r=[];else{const i=Array.from(SO.keys()).filter(o=>o!=="yaml11").map(o=>JSON.stringify(o)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${i} or define customTags array`)}if(Array.isArray(t))for(const i of t)r=r.concat(i);else typeof t=="function"&&(r=t(r.slice()));return n&&(r=r.concat(ka)),r.reduce((i,o)=>{const c=typeof o=="string"?kO[o]:o;if(!c){const u=JSON.stringify(o),h=Object.keys(kO).map(m=>JSON.stringify(m)).join(", ");throw new Error(`Unknown custom tag ${u}; use one of ${h}`)}return i.includes(c)||i.push(c),i},[])}const bae=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0;let _ae=class eP{constructor({compat:e,customTags:n,merge:s,resolveKnownTags:r,schema:i,sortMapEntries:o,toStringDefaults:c}){this.compat=Array.isArray(e)?iw(e,"compat"):e?iw(null,e):null,this.name=typeof i=="string"&&i||"core",this.knownTags=r?vae:{},this.tags=iw(n,this.name,s),this.toStringOptions=c??null,Object.defineProperty(this,Io,{value:Ah}),Object.defineProperty(this,Hi,{value:kb}),Object.defineProperty(this,Nh,{value:jh}),this.sortMapEntries=typeof o=="function"?o:o===!0?bae:null}clone(){const e=Object.create(eP.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}};function xae(t,e){const n=[];let s=e.directives===!0;if(e.directives!==!1&&t.directives){const u=t.directives.toString(t);u?(n.push(u),s=!0):t.directives.docStart&&(s=!0)}s&&n.push("---");const r=DI(t,e),{commentString:i}=r.options;if(t.commentBefore){n.length!==1&&n.unshift("");const u=i(t.commentBefore);n.unshift(wa(u,""))}let o=!1,c=null;if(t.contents){if(En(t.contents)){if(t.contents.spaceBefore&&s&&n.push(""),t.contents.commentBefore){const m=i(t.contents.commentBefore);n.push(wa(m,""))}r.forceBlockIndent=!!t.comment,c=t.contents.comment}const u=c?void 0:()=>o=!0;let h=nh(t.contents,r,()=>c=null,u);c&&(h+=Cl(h,"",i(c))),(h[0]==="|"||h[0]===">")&&n[n.length-1]==="---"?n[n.length-1]=`--- ${h}`:n.push(h)}else n.push(nh(t.contents,r));if(t.directives?.docEnd)if(t.comment){const u=i(t.comment);u.includes(`
`)?(n.push("..."),n.push(wa(u,""))):n.push(`... ${u}`)}else n.push("...");else{let u=t.comment;u&&o&&(u=u.replace(/^\n+/,"")),u&&((!o||c)&&n[n.length-1]!==""&&n.push(""),n.push(wa(i(u),"")))}return n.join(`
`)+`
`}let EN=class tP{constructor(e,n,s){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,ti,{value:s2});let r=null;typeof n=="function"||Array.isArray(n)?r=n:s===void 0&&n&&(s=n,n=void 0);const i=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},s);this.options=i;let{version:o}=i;s?._directives?(this.directives=s._directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new Os({version:o}),this.setSchema(o,s),this.contents=e===void 0?null:this.createNode(e,r,s)}clone(){const e=Object.create(tP.prototype,{[ti]:{value:s2}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=En(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){au(this.contents)&&this.contents.add(e)}addIn(e,n){au(this.contents)&&this.contents.addIn(e,n)}createAlias(e,n){if(!e.anchor){const s=jI(this);e.anchor=!n||s.has(n)?TI(n||"a",s):n}return new gN(e.anchor)}createNode(e,n,s){let r;if(typeof n=="function")e=n.call({"":e},"",e),r=n;else if(Array.isArray(n)){const S=C=>typeof C=="number"||C instanceof String||C instanceof Number,k=n.filter(S).map(String);k.length>0&&(n=n.concat(k)),r=n}else s===void 0&&n&&(s=n,n=void 0);const{aliasDuplicateObjects:i,anchorPrefix:o,flow:c,keepUndefined:u,onTagObj:h,tag:m}=s??{},{onAnchor:p,setAnchors:y,sourceObjects:v}=Gie(this,o||"a"),x={aliasDuplicateObjects:i??!0,keepUndefined:u??!1,onAnchor:p,onTagObj:h,replacer:r,schema:this.schema,sourceObjects:v},_=kp(e,m,x);return c&&Cn(_)&&(_.flow=!0),y(),_}createPair(e,n,s={}){const r=this.createNode(e,null,s),i=this.createNode(n,null,s);return new Ls(r,i)}delete(e){return au(this.contents)?this.contents.delete(e):!1}deleteIn(e){return _f(e)?this.contents==null?!1:(this.contents=null,!0):au(this.contents)?this.contents.deleteIn(e):!1}get(e,n){return Cn(this.contents)?this.contents.get(e,n):void 0}getIn(e,n){return _f(e)?!n&&en(this.contents)?this.contents.value:this.contents:Cn(this.contents)?this.contents.getIn(e,n):void 0}has(e){return Cn(this.contents)?this.contents.has(e):!1}hasIn(e){return _f(e)?this.contents!==void 0:Cn(this.contents)?this.contents.hasIn(e):!1}set(e,n){this.contents==null?this.contents=Gy(this.schema,[e],n):au(this.contents)&&this.contents.set(e,n)}setIn(e,n){_f(e)?this.contents=n:this.contents==null?this.contents=Gy(this.schema,Array.from(e),n):au(this.contents)&&this.contents.setIn(e,n)}setSchema(e,n={}){typeof e=="number"&&(e=String(e));let s;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new Os({version:"1.1"}),s={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new Os({version:e}),s={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,s=null;break;default:{const r=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${r}`)}}if(n.schema instanceof Object)this.schema=n.schema;else if(s)this.schema=new _ae(Object.assign(s,n));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:n,mapAsMap:s,maxAliasCount:r,onAnchor:i,reviver:o}={}){const c={anchors:new Map,doc:this,keep:!e,mapAsMap:s===!0,mapKeyWarned:!1,maxAliasCount:typeof r=="number"?r:100},u=Qr(this.contents,n??"",c);if(typeof i=="function")for(const{count:h,res:m}of c.anchors.values())i(m,h);return typeof o=="function"?Eu(o,{"":u},"",u):u}toJSON(e,n){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:n})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const n=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${n}`)}return xae(this,e)}};function au(t){if(Cn(t))return!0;throw new Error("Expected a YAML collection as document contents")}class nP extends Error{constructor(e,n,s,r){super(),this.name=e,this.code=s,this.message=r,this.pos=n}}class xf extends nP{constructor(e,n,s){super("YAMLParseError",e,n,s)}}class wae extends nP{constructor(e,n,s){super("YAMLWarning",e,n,s)}}const CO=(t,e)=>n=>{if(n.pos[0]===-1)return;n.linePos=n.pos.map(c=>e.linePos(c));const{line:s,col:r}=n.linePos[0];n.message+=` at line ${s}, column ${r}`;let i=r-1,o=t.substring(e.lineStarts[s-1],e.lineStarts[s]).replace(/[\n\r]+$/,"");if(i>=60&&o.length>80){const c=Math.min(i-39,o.length-79);o=""+o.substring(c),i-=c-1}if(o.length>80&&(o=o.substring(0,79)+""),s>1&&/^ *$/.test(o.substring(0,i))){let c=t.substring(e.lineStarts[s-2],e.lineStarts[s-1]);c.length>80&&(c=c.substring(0,79)+`
`),o=c+o}if(/[^ ]/.test(o)){let c=1;const u=n.linePos[1];u?.line===s&&u.col>r&&(c=Math.max(1,Math.min(u.col-r,80-i)));const h=" ".repeat(i)+"^".repeat(c);n.message+=`:

${o}
${h}
`}};function sh(t,{flow:e,indicator:n,next:s,offset:r,onError:i,parentIndent:o,startOnNewline:c}){let u=!1,h=c,m=c,p="",y="",v=!1,x=!1,_=null,S=null,k=null,C=null,N=null,R=null,O=null;for(const B of t)switch(x&&(B.type!=="space"&&B.type!=="newline"&&B.type!=="comma"&&i(B.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),x=!1),_&&(h&&B.type!=="comment"&&B.type!=="newline"&&i(_,"TAB_AS_INDENT","Tabs are not allowed as indentation"),_=null),B.type){case"space":!e&&(n!=="doc-start"||s?.type!=="flow-collection")&&B.source.includes("	")&&(_=B),m=!0;break;case"comment":{m||i(B,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const q=B.source.substring(1)||" ";p?p+=y+q:p=q,y="",h=!1;break}case"newline":h?p?p+=B.source:(!R||n!=="seq-item-ind")&&(u=!0):y+=B.source,h=!0,v=!0,(S||k)&&(C=B),m=!0;break;case"anchor":S&&i(B,"MULTIPLE_ANCHORS","A node can have at most one anchor"),B.source.endsWith(":")&&i(B.offset+B.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),S=B,O??(O=B.offset),h=!1,m=!1,x=!0;break;case"tag":{k&&i(B,"MULTIPLE_TAGS","A node can have at most one tag"),k=B,O??(O=B.offset),h=!1,m=!1,x=!0;break}case n:(S||k)&&i(B,"BAD_PROP_ORDER",`Anchors and tags must be after the ${B.source} indicator`),R&&i(B,"UNEXPECTED_TOKEN",`Unexpected ${B.source} in ${e??"collection"}`),R=B,h=n==="seq-item-ind"||n==="explicit-key-ind",m=!1;break;case"comma":if(e){N&&i(B,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),N=B,h=!1,m=!1;break}default:i(B,"UNEXPECTED_TOKEN",`Unexpected ${B.type} token`),h=!1,m=!1}const E=t[t.length-1],D=E?E.offset+E.source.length:r;return x&&s&&s.type!=="space"&&s.type!=="newline"&&s.type!=="comma"&&(s.type!=="scalar"||s.source!=="")&&i(s.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),_&&(h&&_.indent<=o||s?.type==="block-map"||s?.type==="block-seq")&&i(_,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:N,found:R,spaceBefore:u,comment:p,hasNewline:v,anchor:S,tag:k,newlineAfterProp:C,end:D,start:O??D}}function Cp(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes(`
`))return!0;if(t.end){for(const e of t.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(const e of t.items){for(const n of e.start)if(n.type==="newline")return!0;if(e.sep){for(const n of e.sep)if(n.type==="newline")return!0}if(Cp(e.key)||Cp(e.value))return!0}return!1;default:return!0}}function o2(t,e,n){if(e?.type==="flow-collection"){const s=e.end[0];s.indent===t&&(s.source==="]"||s.source==="}")&&Cp(e)&&n(s,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function sP(t,e,n){const{uniqueKeys:s}=t.options;if(s===!1)return!1;const r=typeof s=="function"?s:(i,o)=>i===o||en(i)&&en(o)&&i.value===o.value;return e.some(i=>r(i.key,n))}const NO="All mapping items must start at the same column";function Sae({composeNode:t,composeEmptyNode:e},n,s,r,i){const o=i?.nodeClass??Wr,c=new o(n.schema);n.atRoot&&(n.atRoot=!1);let u=s.offset,h=null;for(const m of s.items){const{start:p,key:y,sep:v,value:x}=m,_=sh(p,{indicator:"explicit-key-ind",next:y??v?.[0],offset:u,onError:r,parentIndent:s.indent,startOnNewline:!0}),S=!_.found;if(S){if(y&&(y.type==="block-seq"?r(u,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in y&&y.indent!==s.indent&&r(u,"BAD_INDENT",NO)),!_.anchor&&!_.tag&&!v){h=_.end,_.comment&&(c.comment?c.comment+=`
`+_.comment:c.comment=_.comment);continue}(_.newlineAfterProp||Cp(y))&&r(y??p[p.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else _.found?.indent!==s.indent&&r(u,"BAD_INDENT",NO);n.atKey=!0;const k=_.end,C=y?t(n,y,_,r):e(n,k,p,null,_,r);n.schema.compat&&o2(s.indent,y,r),n.atKey=!1,sP(n,c.items,C)&&r(k,"DUPLICATE_KEY","Map keys must be unique");const N=sh(v??[],{indicator:"map-value-ind",next:x,offset:C.range[2],onError:r,parentIndent:s.indent,startOnNewline:!y||y.type==="block-scalar"});if(u=N.end,N.found){S&&(x?.type==="block-map"&&!N.hasNewline&&r(u,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&_.start<N.found.offset-1024&&r(C.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const R=x?t(n,x,N,r):e(n,u,v,null,N,r);n.schema.compat&&o2(s.indent,x,r),u=R.range[2];const O=new Ls(C,R);n.options.keepSourceTokens&&(O.srcToken=m),c.items.push(O)}else{S&&r(C.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),N.comment&&(C.comment?C.comment+=`
`+N.comment:C.comment=N.comment);const R=new Ls(C);n.options.keepSourceTokens&&(R.srcToken=m),c.items.push(R)}}return h&&h<u&&r(h,"IMPOSSIBLE","Map comment with trailing content"),c.range=[s.offset,u,h??u],c}function kae({composeNode:t,composeEmptyNode:e},n,s,r,i){const o=i?.nodeClass??sc,c=new o(n.schema);n.atRoot&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let u=s.offset,h=null;for(const{start:m,value:p}of s.items){const y=sh(m,{indicator:"seq-item-ind",next:p,offset:u,onError:r,parentIndent:s.indent,startOnNewline:!0});if(!y.found)if(y.anchor||y.tag||p)p?.type==="block-seq"?r(y.end,"BAD_INDENT","All sequence items must start at the same column"):r(u,"MISSING_CHAR","Sequence item without - indicator");else{h=y.end,y.comment&&(c.comment=y.comment);continue}const v=p?t(n,p,y,r):e(n,y.end,m,null,y,r);n.schema.compat&&o2(s.indent,p,r),u=v.range[2],c.items.push(v)}return c.range=[s.offset,u,h??u],c}function am(t,e,n,s){let r="";if(t){let i=!1,o="";for(const c of t){const{source:u,type:h}=c;switch(h){case"space":i=!0;break;case"comment":{n&&!i&&s(c,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const m=u.substring(1)||" ";r?r+=o+m:r=m,o="";break}case"newline":r&&(o+=u),i=!0;break;default:s(c,"UNEXPECTED_TOKEN",`Unexpected ${h} at node end`)}e+=u.length}}return{comment:r,offset:e}}const aw="Block collections are not allowed within flow collections",ow=t=>t&&(t.type==="block-map"||t.type==="block-seq");function Cae({composeNode:t,composeEmptyNode:e},n,s,r,i){const o=s.start.source==="{",c=o?"flow map":"flow sequence",u=i?.nodeClass??(o?Wr:sc),h=new u(n.schema);h.flow=!0;const m=n.atRoot;m&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let p=s.offset+s.start.source.length;for(let S=0;S<s.items.length;++S){const k=s.items[S],{start:C,key:N,sep:R,value:O}=k,E=sh(C,{flow:c,indicator:"explicit-key-ind",next:N??R?.[0],offset:p,onError:r,parentIndent:s.indent,startOnNewline:!1});if(!E.found){if(!E.anchor&&!E.tag&&!R&&!O){S===0&&E.comma?r(E.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${c}`):S<s.items.length-1&&r(E.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${c}`),E.comment&&(h.comment?h.comment+=`
`+E.comment:h.comment=E.comment),p=E.end;continue}!o&&n.options.strict&&Cp(N)&&r(N,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(S===0)E.comma&&r(E.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${c}`);else if(E.comma||r(E.start,"MISSING_CHAR",`Missing , between ${c} items`),E.comment){let D="";e:for(const B of C)switch(B.type){case"comma":case"space":break;case"comment":D=B.source.substring(1);break e;default:break e}if(D){let B=h.items[h.items.length-1];An(B)&&(B=B.value??B.key),B.comment?B.comment+=`
`+D:B.comment=D,E.comment=E.comment.substring(D.length+1)}}if(!o&&!R&&!E.found){const D=O?t(n,O,E,r):e(n,E.end,R,null,E,r);h.items.push(D),p=D.range[2],ow(O)&&r(D.range,"BLOCK_IN_FLOW",aw)}else{n.atKey=!0;const D=E.end,B=N?t(n,N,E,r):e(n,D,C,null,E,r);ow(N)&&r(B.range,"BLOCK_IN_FLOW",aw),n.atKey=!1;const q=sh(R??[],{flow:c,indicator:"map-value-ind",next:O,offset:B.range[2],onError:r,parentIndent:s.indent,startOnNewline:!1});if(q.found){if(!o&&!E.found&&n.options.strict){if(R)for(const z of R){if(z===q.found)break;if(z.type==="newline"){r(z,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}E.start<q.found.offset-1024&&r(q.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else O&&("source"in O&&O.source?.[0]===":"?r(O,"MISSING_CHAR",`Missing space after : in ${c}`):r(q.start,"MISSING_CHAR",`Missing , or : between ${c} items`));const P=O?t(n,O,q,r):q.found?e(n,q.end,R,null,q,r):null;P?ow(O)&&r(P.range,"BLOCK_IN_FLOW",aw):q.comment&&(B.comment?B.comment+=`
`+q.comment:B.comment=q.comment);const G=new Ls(B,P);if(n.options.keepSourceTokens&&(G.srcToken=k),o){const z=h;sP(n,z.items,B)&&r(D,"DUPLICATE_KEY","Map keys must be unique"),z.items.push(G)}else{const z=new Wr(n.schema);z.flow=!0,z.items.push(G);const K=(P??B).range;z.range=[B.range[0],K[1],K[2]],h.items.push(z)}p=P?P.range[2]:q.end}}const y=o?"}":"]",[v,...x]=s.end;let _=p;if(v?.source===y)_=v.offset+v.source.length;else{const S=c[0].toUpperCase()+c.substring(1),k=m?`${S} must end with a ${y}`:`${S} in block collection must be sufficiently indented and end with a ${y}`;r(p,m?"MISSING_CHAR":"BAD_INDENT",k),v&&v.source.length!==1&&x.unshift(v)}if(x.length>0){const S=am(x,_,n.options.strict,r);S.comment&&(h.comment?h.comment+=`
`+S.comment:h.comment=S.comment),h.range=[s.offset,_,S.offset]}else h.range=[s.offset,_,_];return h}function lw(t,e,n,s,r,i){const o=n.type==="block-map"?Sae(t,e,n,s,i):n.type==="block-seq"?kae(t,e,n,s,i):Cae(t,e,n,s,i),c=o.constructor;return r==="!"||r===c.tagName?(o.tag=c.tagName,o):(r&&(o.tag=r),o)}function Nae(t,e,n,s,r){const i=s.tag,o=i?e.directives.tagName(i.source,y=>r(i,"TAG_RESOLVE_FAILED",y)):null;if(n.type==="block-seq"){const{anchor:y,newlineAfterProp:v}=s,x=y&&i?y.offset>i.offset?y:i:y??i;x&&(!v||v.offset<x.offset)&&r(x,"MISSING_CHAR","Missing newline after block sequence props")}const c=n.type==="block-map"?"map":n.type==="block-seq"?"seq":n.start.source==="{"?"map":"seq";if(!i||!o||o==="!"||o===Wr.tagName&&c==="map"||o===sc.tagName&&c==="seq")return lw(t,e,n,r,o);let u=e.schema.tags.find(y=>y.tag===o&&y.collection===c);if(!u){const y=e.schema.knownTags[o];if(y?.collection===c)e.schema.tags.push(Object.assign({},y,{default:!1})),u=y;else return y?r(i,"BAD_COLLECTION_TYPE",`${y.tag} used for ${c} collection, but expects ${y.collection??"scalar"}`,!0):r(i,"TAG_RESOLVE_FAILED",`Unresolved tag: ${o}`,!0),lw(t,e,n,r,o)}const h=lw(t,e,n,r,o,u),m=u.resolve?.(h,y=>r(i,"TAG_RESOLVE_FAILED",y),e.options)??h,p=En(m)?m:new gt(m);return p.range=h.range,p.tag=o,u?.format&&(p.format=u.format),p}function Eae(t,e,n){const s=e.offset,r=Aae(e,t.options.strict,n);if(!r)return{value:"",type:null,comment:"",range:[s,s,s]};const i=r.mode===">"?gt.BLOCK_FOLDED:gt.BLOCK_LITERAL,o=e.source?jae(e.source):[];let c=o.length;for(let _=o.length-1;_>=0;--_){const S=o[_][1];if(S===""||S==="\r")c=_;else break}if(c===0){const _=r.chomp==="+"&&o.length>0?`
`.repeat(Math.max(1,o.length-1)):"";let S=s+r.length;return e.source&&(S+=e.source.length),{value:_,type:i,comment:r.comment,range:[s,S,S]}}let u=e.indent+r.indent,h=e.offset+r.length,m=0;for(let _=0;_<c;++_){const[S,k]=o[_];if(k===""||k==="\r")r.indent===0&&S.length>u&&(u=S.length);else{S.length<u&&n(h+S.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),r.indent===0&&(u=S.length),m=_,u===0&&!t.atRoot&&n(h,"BAD_INDENT","Block scalar values in collections must be indented");break}h+=S.length+k.length+1}for(let _=o.length-1;_>=c;--_)o[_][0].length>u&&(c=_+1);let p="",y="",v=!1;for(let _=0;_<m;++_)p+=o[_][0].slice(u)+`
`;for(let _=m;_<c;++_){let[S,k]=o[_];h+=S.length+k.length+1;const C=k[k.length-1]==="\r";if(C&&(k=k.slice(0,-1)),k&&S.length<u){const R=`Block scalar lines must not be less indented than their ${r.indent?"explicit indentation indicator":"first line"}`;n(h-k.length-(C?2:1),"BAD_INDENT",R),S=""}i===gt.BLOCK_LITERAL?(p+=y+S.slice(u)+k,y=`
`):S.length>u||k[0]==="	"?(y===" "?y=`
`:!v&&y===`
`&&(y=`

`),p+=y+S.slice(u)+k,y=`
`,v=!0):k===""?y===`
`?p+=`
`:y=`
`:(p+=y+k,y=" ",v=!1)}switch(r.chomp){case"-":break;case"+":for(let _=c;_<o.length;++_)p+=`
`+o[_][0].slice(u);p[p.length-1]!==`
`&&(p+=`
`);break;default:p+=`
`}const x=s+r.length+e.source.length;return{value:p,type:i,comment:r.comment,range:[s,x,x]}}function Aae({offset:t,props:e},n,s){if(e[0].type!=="block-scalar-header")return s(e[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:r}=e[0],i=r[0];let o=0,c="",u=-1;for(let y=1;y<r.length;++y){const v=r[y];if(!c&&(v==="-"||v==="+"))c=v;else{const x=Number(v);!o&&x?o=x:u===-1&&(u=t+y)}}u!==-1&&s(u,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${r}`);let h=!1,m="",p=r.length;for(let y=1;y<e.length;++y){const v=e[y];switch(v.type){case"space":h=!0;case"newline":p+=v.source.length;break;case"comment":n&&!h&&s(v,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),p+=v.source.length,m=v.source.substring(1);break;case"error":s(v,"UNEXPECTED_TOKEN",v.message),p+=v.source.length;break;default:{const x=`Unexpected token in block scalar header: ${v.type}`;s(v,"UNEXPECTED_TOKEN",x);const _=v.source;_&&typeof _=="string"&&(p+=_.length)}}}return{mode:i,indent:o,chomp:c,comment:m,length:p}}function jae(t){const e=t.split(/\n( *)/),n=e[0],s=n.match(/^( *)/),i=[s?.[1]?[s[1],n.slice(s[1].length)]:["",n]];for(let o=1;o<e.length;o+=2)i.push([e[o],e[o+1]]);return i}function Tae(t,e,n){const{offset:s,type:r,source:i,end:o}=t;let c,u;const h=(y,v,x)=>n(s+y,v,x);switch(r){case"scalar":c=gt.PLAIN,u=Rae(i,h);break;case"single-quoted-scalar":c=gt.QUOTE_SINGLE,u=Oae(i,h);break;case"double-quoted-scalar":c=gt.QUOTE_DOUBLE,u=Mae(i,h);break;default:return n(t,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${r}`),{value:"",type:null,comment:"",range:[s,s+i.length,s+i.length]}}const m=s+i.length,p=am(o,m,e,n);return{value:u,type:c,comment:p.comment,range:[s,m,p.offset]}}function Rae(t,e){let n="";switch(t[0]){case"	":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":{n=`block scalar indicator ${t[0]}`;break}case"@":case"`":{n=`reserved character ${t[0]}`;break}}return n&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`),rP(t)}function Oae(t,e){return(t[t.length-1]!=="'"||t.length===1)&&e(t.length,"MISSING_CHAR","Missing closing 'quote"),rP(t.slice(1,-1)).replace(/''/g,"'")}function rP(t){let e,n;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),n=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let s=e.exec(t);if(!s)return t;let r=s[1],i=" ",o=e.lastIndex;for(n.lastIndex=o;s=n.exec(t);)s[1]===""?i===`
`?r+=i:i=`
`:(r+=i+s[1],i=" "),o=n.lastIndex;const c=/[ \t]*(.*)/sy;return c.lastIndex=o,s=c.exec(t),r+i+(s?.[1]??"")}function Mae(t,e){let n="";for(let s=1;s<t.length-1;++s){const r=t[s];if(!(r==="\r"&&t[s+1]===`
`))if(r===`
`){const{fold:i,offset:o}=Dae(t,s);n+=i,s=o}else if(r==="\\"){let i=t[++s];const o=Bae[i];if(o)n+=o;else if(i===`
`)for(i=t[s+1];i===" "||i==="	";)i=t[++s+1];else if(i==="\r"&&t[s+1]===`
`)for(i=t[++s+1];i===" "||i==="	";)i=t[++s+1];else if(i==="x"||i==="u"||i==="U"){const c={x:2,u:4,U:8}[i];n+=Lae(t,s+1,c,e),s+=c}else{const c=t.substr(s-1,2);e(s-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${c}`),n+=c}}else if(r===" "||r==="	"){const i=s;let o=t[s+1];for(;o===" "||o==="	";)o=t[++s+1];o!==`
`&&!(o==="\r"&&t[s+2]===`
`)&&(n+=s>i?t.slice(i,s+1):r)}else n+=r}return(t[t.length-1]!=='"'||t.length===1)&&e(t.length,"MISSING_CHAR",'Missing closing "quote'),n}function Dae(t,e){let n="",s=t[e+1];for(;(s===" "||s==="	"||s===`
`||s==="\r")&&!(s==="\r"&&t[e+2]!==`
`);)s===`
`&&(n+=`
`),e+=1,s=t[e+1];return n||(n=" "),{fold:n,offset:e}}const Bae={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"",_:"",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function Lae(t,e,n,s){const r=t.substr(e,n),o=r.length===n&&/^[0-9a-fA-F]+$/.test(r)?parseInt(r,16):NaN;if(isNaN(o)){const c=t.substr(e-2,n+2);return s(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${c}`),c}return String.fromCodePoint(o)}function iP(t,e,n,s){const{value:r,type:i,comment:o,range:c}=e.type==="block-scalar"?Eae(t,e,s):Tae(e,t.options.strict,s),u=n?t.directives.tagName(n.source,p=>s(n,"TAG_RESOLVE_FAILED",p)):null;let h;t.options.stringKeys&&t.atKey?h=t.schema[Hi]:u?h=Iae(t.schema,r,u,n,s):e.type==="scalar"?h=Pae(t,r,e,s):h=t.schema[Hi];let m;try{const p=h.resolve(r,y=>s(n??e,"TAG_RESOLVE_FAILED",y),t.options);m=en(p)?p:new gt(p)}catch(p){const y=p instanceof Error?p.message:String(p);s(n??e,"TAG_RESOLVE_FAILED",y),m=new gt(r)}return m.range=c,m.source=r,i&&(m.type=i),u&&(m.tag=u),h.format&&(m.format=h.format),o&&(m.comment=o),m}function Iae(t,e,n,s,r){if(n==="!")return t[Hi];const i=[];for(const c of t.tags)if(!c.collection&&c.tag===n)if(c.default&&c.test)i.push(c);else return c;for(const c of i)if(c.test?.test(e))return c;const o=t.knownTags[n];return o&&!o.collection?(t.tags.push(Object.assign({},o,{default:!1,test:void 0})),o):(r(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,n!=="tag:yaml.org,2002:str"),t[Hi])}function Pae({atKey:t,directives:e,schema:n},s,r,i){const o=n.tags.find(c=>(c.default===!0||t&&c.default==="key")&&c.test?.test(s))||n[Hi];if(n.compat){const c=n.compat.find(u=>u.default&&u.test?.test(s))??n[Hi];if(o.tag!==c.tag){const u=e.tagString(o.tag),h=e.tagString(c.tag),m=`Value may be parsed as either ${u} or ${h}`;i(r,"TAG_RESOLVE_FAILED",m,!0)}}return o}function $ae(t,e,n){if(e){n??(n=e.length);for(let s=n-1;s>=0;--s){let r=e[s];switch(r.type){case"space":case"comment":case"newline":t-=r.source.length;continue}for(r=e[++s];r?.type==="space";)t+=r.source.length,r=e[++s];break}}return t}const zae={composeNode:aP,composeEmptyNode:AN};function aP(t,e,n,s){const r=t.atKey,{spaceBefore:i,comment:o,anchor:c,tag:u}=n;let h,m=!0;switch(e.type){case"alias":h=Uae(t,e,s),(c||u)&&s(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":h=iP(t,e,u,s),c&&(h.anchor=c.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":h=Nae(zae,t,e,n,s),c&&(h.anchor=c.source.substring(1));break;default:{const p=e.type==="error"?e.message:`Unsupported token (type: ${e.type})`;s(e,"UNEXPECTED_TOKEN",p),h=AN(t,e.offset,void 0,null,n,s),m=!1}}return c&&h.anchor===""&&s(c,"BAD_ALIAS","Anchor cannot be an empty string"),r&&t.options.stringKeys&&(!en(h)||typeof h.value!="string"||h.tag&&h.tag!=="tag:yaml.org,2002:str")&&s(u??e,"NON_STRING_KEY","With stringKeys, all keys must be strings"),i&&(h.spaceBefore=!0),o&&(e.type==="scalar"&&e.source===""?h.comment=o:h.commentBefore=o),t.options.keepSourceTokens&&m&&(h.srcToken=e),h}function AN(t,e,n,s,{spaceBefore:r,comment:i,anchor:o,tag:c,end:u},h){const m={type:"scalar",offset:$ae(e,n,s),indent:-1,source:""},p=iP(t,m,c,h);return o&&(p.anchor=o.source.substring(1),p.anchor===""&&h(o,"BAD_ALIAS","Anchor cannot be an empty string")),r&&(p.spaceBefore=!0),i&&(p.comment=i,p.range[2]=u),p}function Uae({options:t},{offset:e,source:n,end:s},r){const i=new gN(n.substring(1));i.source===""&&r(e,"BAD_ALIAS","Alias cannot be an empty string"),i.source.endsWith(":")&&r(e+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const o=e+n.length,c=am(s,o,t.strict,r);return i.range=[e,o,c.offset],c.comment&&(i.comment=c.comment),i}function Hae(t,e,{offset:n,start:s,value:r,end:i},o){const c=Object.assign({_directives:e},t),u=new EN(void 0,c),h={atKey:!1,atRoot:!0,directives:u.directives,options:u.options,schema:u.schema},m=sh(s,{indicator:"doc-start",next:r??i?.[0],offset:n,onError:o,parentIndent:0,startOnNewline:!0});m.found&&(u.directives.docStart=!0,r&&(r.type==="block-map"||r.type==="block-seq")&&!m.hasNewline&&o(m.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),u.contents=r?aP(h,r,m,o):AN(h,m.end,s,null,m,o);const p=u.contents.range[2],y=am(i,p,!1,o);return y.comment&&(u.comment=y.comment),u.range=[n,p,y.offset],u}function Pd(t){if(typeof t=="number")return[t,t+1];if(Array.isArray(t))return t.length===2?t:[t[0],t[1]];const{offset:e,source:n}=t;return[e,e+(typeof n=="string"?n.length:1)]}function EO(t){let e="",n=!1,s=!1;for(let r=0;r<t.length;++r){const i=t[r];switch(i[0]){case"#":e+=(e===""?"":s?`

`:`
`)+(i.substring(1)||" "),n=!0,s=!1;break;case"%":t[r+1]?.[0]!=="#"&&(r+=1),n=!1;break;default:n||(s=!0),n=!1}}return{comment:e,afterEmptyLine:s}}class Fae{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(n,s,r,i)=>{const o=Pd(n);i?this.warnings.push(new wae(o,s,r)):this.errors.push(new xf(o,s,r))},this.directives=new Os({version:e.version||"1.2"}),this.options=e}decorate(e,n){const{comment:s,afterEmptyLine:r}=EO(this.prelude);if(s){const i=e.contents;if(n)e.comment=e.comment?`${e.comment}
${s}`:s;else if(r||e.directives.docStart||!i)e.commentBefore=s;else if(Cn(i)&&!i.flow&&i.items.length>0){let o=i.items[0];An(o)&&(o=o.key);const c=o.commentBefore;o.commentBefore=c?`${s}
${c}`:s}else{const o=i.commentBefore;i.commentBefore=o?`${s}
${o}`:s}}n?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:EO(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,n=!1,s=-1){for(const r of e)yield*this.next(r);yield*this.end(n,s)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,(n,s,r)=>{const i=Pd(e);i[0]+=n,this.onError(i,"BAD_DIRECTIVE",s,r)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{const n=Hae(this.options,this.directives,e,this.onError);this.atDirectives&&!n.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(n,!1),this.doc&&(yield this.doc),this.doc=n,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const n=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,s=new xf(Pd(e),"UNEXPECTED_TOKEN",n);this.atDirectives||!this.doc?this.errors.push(s):this.doc.errors.push(s);break}case"doc-end":{if(!this.doc){const s="Unexpected doc-end without preceding document";this.errors.push(new xf(Pd(e),"UNEXPECTED_TOKEN",s));break}this.doc.directives.docEnd=!0;const n=am(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),n.comment){const s=this.doc.comment;this.doc.comment=s?`${s}
${n.comment}`:n.comment}this.doc.range[2]=n.offset;break}default:this.errors.push(new xf(Pd(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,n=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){const s=Object.assign({_directives:this.directives},this.options),r=new EN(void 0,s);this.atDirectives&&this.onError(n,"MISSING_CHAR","Missing directives-end indicator line"),r.range=[0,n,n],this.decorate(r,!1),yield r}}}const oP="\uFEFF",lP="",cP="",l2="";function Vae(t){switch(t){case oP:return"byte-order-mark";case lP:return"doc-mode";case cP:return"flow-error-end";case l2:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}function li(t){switch(t){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}const AO=new Set("0123456789ABCDEFabcdef"),qae=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),e0=new Set(",[]{}"),Kae=new Set(` ,[]{}
\r	`),cw=t=>!t||Kae.has(t);class Wae{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,n=!1){if(e){if(typeof e!="string")throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null}this.atEnd=!n;let s=this.next??"stream";for(;s&&(n||this.hasChars(1));)s=yield*this.parseNext(s)}atLineEnd(){let e=this.pos,n=this.buffer[e];for(;n===" "||n==="	";)n=this.buffer[++e];return!n||n==="#"||n===`
`?!0:n==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let n=this.buffer[e];if(this.indentNext>0){let s=0;for(;n===" ";)n=this.buffer[++s+e];if(n==="\r"){const r=this.buffer[s+e+1];if(r===`
`||!r&&!this.atEnd)return e+s+1}return n===`
`||s>=this.indentNext||!n&&!this.atEnd?e+s:-1}if(n==="-"||n==="."){const s=this.buffer.substr(e,3);if((s==="---"||s==="...")&&li(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===oP&&(yield*this.pushCount(1),e=e.substring(1)),e[0]==="%"){let n=e.length,s=e.indexOf("#");for(;s!==-1;){const i=e[s-1];if(i===" "||i==="	"){n=s-1;break}else s=e.indexOf("#",s+1)}for(;;){const i=e[n-1];if(i===" "||i==="	")n-=1;else break}const r=(yield*this.pushCount(n))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-r),this.pushNewline(),"stream"}if(this.atLineEnd()){const n=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-n),yield*this.pushNewline(),"stream"}return yield lP,yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const n=this.peek(3);if((n==="---"||n==="...")&&li(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,n==="---"?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!li(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[e,n]=this.peek(2);if(!n&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&li(n)){const s=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=s,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const e=this.getLine();if(e===null)return this.setNext("doc");let n=yield*this.pushIndicators();switch(e[n]){case"#":yield*this.pushCount(e.length-n);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(cw),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return n+=yield*this.parseBlockScalarHeader(),n+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-n),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,n,s=-1;do e=yield*this.pushNewline(),e>0?(n=yield*this.pushSpaces(!1),this.indentValue=s=n):n=0,n+=yield*this.pushSpaces(!0);while(e+n>0);const r=this.getLine();if(r===null)return this.setNext("flow");if((s!==-1&&s<this.indentNext&&r[0]!=="#"||s===0&&(r.startsWith("---")||r.startsWith("..."))&&li(r[3]))&&!(s===this.indentNext-1&&this.flowLevel===1&&(r[0]==="]"||r[0]==="}")))return this.flowLevel=0,yield cP,yield*this.parseLineStart();let i=0;for(;r[i]===",";)i+=yield*this.pushCount(1),i+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(i+=yield*this.pushIndicators(),r[i]){case void 0:return"flow";case"#":return yield*this.pushCount(r.length-i),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(cw),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const o=this.charAt(1);if(this.flowKey||li(o)||o===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let n=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;n!==-1&&this.buffer[n+1]==="'";)n=this.buffer.indexOf("'",n+2);else for(;n!==-1;){let i=0;for(;this.buffer[n-1-i]==="\\";)i+=1;if(i%2===0)break;n=this.buffer.indexOf('"',n+1)}const s=this.buffer.substring(0,n);let r=s.indexOf(`
`,this.pos);if(r!==-1){for(;r!==-1;){const i=this.continueScalar(r+1);if(i===-1)break;r=s.indexOf(`
`,i)}r!==-1&&(n=r-(s[r-1]==="\r"?2:1))}if(n===-1){if(!this.atEnd)return this.setNext("quoted-scalar");n=this.buffer.length}return yield*this.pushToIndex(n+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const n=this.buffer[++e];if(n==="+")this.blockScalarKeep=!0;else if(n>"0"&&n<="9")this.blockScalarIndent=Number(n)-1;else if(n!=="-")break}return yield*this.pushUntil(n=>li(n)||n==="#")}*parseBlockScalar(){let e=this.pos-1,n=0,s;e:for(let i=this.pos;s=this.buffer[i];++i)switch(s){case" ":n+=1;break;case`
`:e=i,n=0;break;case"\r":{const o=this.buffer[i+1];if(!o&&!this.atEnd)return this.setNext("block-scalar");if(o===`
`)break}default:break e}if(!s&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=n:this.indentNext=this.blockScalarIndent+(this.indentNext===0?1:this.indentNext);do{const i=this.continueScalar(e+1);if(i===-1)break;e=this.buffer.indexOf(`
`,i)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}let r=e+1;for(s=this.buffer[r];s===" ";)s=this.buffer[++r];if(s==="	"){for(;s==="	"||s===" "||s==="\r"||s===`
`;)s=this.buffer[++r];e=r-1}else if(!this.blockScalarKeep)do{let i=e-1,o=this.buffer[i];o==="\r"&&(o=this.buffer[--i]);const c=i;for(;o===" ";)o=this.buffer[--i];if(o===`
`&&i>=this.pos&&i+1+n>c)e=i;else break}while(!0);return yield l2,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let n=this.pos-1,s=this.pos-1,r;for(;r=this.buffer[++s];)if(r===":"){const i=this.buffer[s+1];if(li(i)||e&&e0.has(i))break;n=s}else if(li(r)){let i=this.buffer[s+1];if(r==="\r"&&(i===`
`?(s+=1,r=`
`,i=this.buffer[s+1]):n=s),i==="#"||e&&e0.has(i))break;if(r===`
`){const o=this.continueScalar(s+1);if(o===-1)break;s=Math.max(s,o-2)}}else{if(e&&e0.has(r))break;n=s}return!r&&!this.atEnd?this.setNext("plain-scalar"):(yield l2,yield*this.pushToIndex(n+1,!0),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,n){const s=this.buffer.slice(this.pos,e);return s?(yield s,this.pos+=s.length,s.length):(n&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(cw))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const e=this.flowLevel>0,n=this.charAt(1);if(li(n)||e&&e0.has(n))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,n=this.buffer[e];for(;!li(n)&&n!==">";)n=this.buffer[++e];return yield*this.pushToIndex(n===">"?e+1:e,!1)}else{let e=this.pos+1,n=this.buffer[e];for(;n;)if(qae.has(n))n=this.buffer[++e];else if(n==="%"&&AO.has(this.buffer[e+1])&&AO.has(this.buffer[e+2]))n=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){const e=this.buffer[this.pos];return e===`
`?yield*this.pushCount(1):e==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(e){let n=this.pos-1,s;do s=this.buffer[++n];while(s===" "||e&&s==="	");const r=n-this.pos;return r>0&&(yield this.buffer.substr(this.pos,r),this.pos=n),r}*pushUntil(e){let n=this.pos,s=this.buffer[n];for(;!e(s);)s=this.buffer[++n];return yield*this.pushToIndex(n,!1)}}class Gae{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let n=0,s=this.lineStarts.length;for(;n<s;){const i=n+s>>1;this.lineStarts[i]<e?n=i+1:s=i}if(this.lineStarts[n]===e)return{line:n+1,col:1};if(n===0)return{line:0,col:e};const r=this.lineStarts[n-1];return{line:n,col:e-r+1}}}}function _o(t,e){for(let n=0;n<t.length;++n)if(t[n].type===e)return!0;return!1}function jO(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function uP(t){switch(t?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function t0(t){switch(t.type){case"document":return t.start;case"block-map":{const e=t.items[t.items.length-1];return e.sep??e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function ou(t){if(t.length===0)return[];let e=t.length;e:for(;--e>=0;)switch(t[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;t[++e]?.type==="space";);return t.splice(e,t.length)}function TO(t){if(t.start.type==="flow-seq-start")for(const e of t.items)e.sep&&!e.value&&!_o(e.start,"explicit-key-ind")&&!_o(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,uP(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}class Yae{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Wae,this.onNewLine=e}*parse(e,n=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(const s of this.lexer.lex(e,n))yield*this.next(s);n||(yield*this.end())}*next(e){if(this.source=e,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}const n=Vae(e);if(n)if(n==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=n,yield*this.step(),n){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{const s=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:s,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const e=this.peek(1);if(this.type==="doc-end"&&e?.type!=="doc-end"){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){const n=e??this.stack.pop();if(!n)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield n;else{const s=this.peek(1);switch(n.type==="block-scalar"?n.indent="indent"in s?s.indent:0:n.type==="flow-collection"&&s.type==="document"&&(n.indent=0),n.type==="flow-collection"&&TO(n),s.type){case"document":s.value=n;break;case"block-scalar":s.props.push(n);break;case"block-map":{const r=s.items[s.items.length-1];if(r.value){s.items.push({start:[],key:n,sep:[]}),this.onKeyLine=!0;return}else if(r.sep)r.value=n;else{Object.assign(r,{key:n,sep:[]}),this.onKeyLine=!r.explicitKey;return}break}case"block-seq":{const r=s.items[s.items.length-1];r.value?s.items.push({start:[],value:n}):r.value=n;break}case"flow-collection":{const r=s.items[s.items.length-1];!r||r.value?s.items.push({start:[],key:n,sep:[]}):r.sep?r.value=n:Object.assign(r,{key:n,sep:[]});return}default:yield*this.pop(),yield*this.pop(n)}if((s.type==="document"||s.type==="block-map"||s.type==="block-seq")&&(n.type==="block-map"||n.type==="block-seq")){const r=n.items[n.items.length-1];r&&!r.sep&&!r.value&&r.start.length>0&&jO(r.start)===-1&&(n.indent===0||r.start.every(i=>i.type!=="comment"||i.indent<n.indent))&&(s.type==="document"?s.end=r.start:s.items.push({start:r.start}),n.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{jO(e.start)!==-1?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}const n=this.startBlockValue(e);n?this.stack.push(n):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){const n=t0(this.peek(2)),s=ou(n);let r;e.end?(r=e.end,r.push(this.sourceToken),delete e.end):r=[this.sourceToken];const i={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:s,key:e,sep:r}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=i}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){const n=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,n.value){const s="end"in n.value?n.value.end:void 0;(Array.isArray(s)?s[s.length-1]:void 0)?.type==="comment"?s?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else if(n.sep)n.sep.push(this.sourceToken);else{if(this.atIndentedComment(n.start,e.indent)){const r=e.items[e.items.length-2]?.value?.end;if(Array.isArray(r)){Array.prototype.push.apply(r,n.start),r.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return}if(this.indent>=e.indent){const s=!this.onKeyLine&&this.indent===e.indent,r=s&&(n.sep||n.explicitKey)&&this.type!=="seq-item-ind";let i=[];if(r&&n.sep&&!n.value){const o=[];for(let c=0;c<n.sep.length;++c){const u=n.sep[c];switch(u.type){case"newline":o.push(c);break;case"space":break;case"comment":u.indent>e.indent&&(o.length=0);break;default:o.length=0}}o.length>=2&&(i=n.sep.splice(o[1]))}switch(this.type){case"anchor":case"tag":r||n.value?(i.push(this.sourceToken),e.items.push({start:i}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"explicit-key-ind":!n.sep&&!n.explicitKey?(n.start.push(this.sourceToken),n.explicitKey=!0):r||n.value?(i.push(this.sourceToken),e.items.push({start:i,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}),this.onKeyLine=!0;return;case"map-value-ind":if(n.explicitKey)if(n.sep)if(n.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(_o(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:i,key:null,sep:[this.sourceToken]}]});else if(uP(n.key)&&!_o(n.sep,"newline")){const o=ou(n.start),c=n.key,u=n.sep;u.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:c,sep:u}]})}else i.length>0?n.sep=n.sep.concat(i,this.sourceToken):n.sep.push(this.sourceToken);else if(_o(n.start,"newline"))Object.assign(n,{key:null,sep:[this.sourceToken]});else{const o=ou(n.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]})}else n.sep?n.value||r?e.items.push({start:i,key:null,sep:[this.sourceToken]}):_o(n.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const o=this.flowScalar(this.type);r||n.value?(e.items.push({start:i,key:o,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(o):(Object.assign(n,{key:o,sep:[]}),this.onKeyLine=!0);return}default:{const o=this.startBlockValue(e);if(o){if(o.type==="block-seq"){if(!n.explicitKey&&n.sep&&!_o(n.sep,"newline")){yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source});return}}else s&&e.items.push({start:i});this.stack.push(o);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){const n=e.items[e.items.length-1];switch(this.type){case"newline":if(n.value){const s="end"in n.value?n.value.end:void 0;(Array.isArray(s)?s[s.length-1]:void 0)?.type==="comment"?s?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(n.start,e.indent)){const r=e.items[e.items.length-2]?.value?.end;if(Array.isArray(r)){Array.prototype.push.apply(r,n.start),r.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return;case"anchor":case"tag":if(n.value||this.indent<=e.indent)break;n.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;n.value||_o(n.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return}if(this.indent>e.indent){const s=this.startBlockValue(e);if(s){this.stack.push(s);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){const n=e.items[e.items.length-1];if(this.type==="flow-error-end"){let s;do yield*this.pop(),s=this.peek(1);while(s?.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!n||n.sep?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return;case"map-value-ind":!n||n.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!n||n.value?e.items.push({start:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const r=this.flowScalar(this.type);!n||n.value?e.items.push({start:[],key:r,sep:[]}):n.sep?this.stack.push(r):Object.assign(n,{key:r,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}const s=this.startBlockValue(e);s?this.stack.push(s):(yield*this.pop(),yield*this.step())}else{const s=this.peek(2);if(s.type==="block-map"&&(this.type==="map-value-ind"&&s.indent===e.indent||this.type==="newline"&&!s.items[s.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&s.type!=="flow-collection"){const r=t0(s),i=ou(r);TO(e);const o=e.end.splice(1,e.end.length);o.push(this.sourceToken);const c={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:i,key:e,sep:o}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=c}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const n=t0(e),s=ou(n);return s.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;const n=t0(e),s=ou(n);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,n){return this.type!=="comment"||this.indent<=n?!1:e.every(s=>s.type==="newline"||s.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}}function Zae(t){const e=t.prettyErrors!==!1;return{lineCounter:t.lineCounter||e&&new Gae||null,prettyErrors:e}}function Xae(t,e={}){const{lineCounter:n,prettyErrors:s}=Zae(e),r=new Yae(n?.addNewLine),i=new Fae(e);let o=null;for(const c of i.compose(r.parse(t),!0,t.length))if(!o)o=c;else if(o.options.logLevel!=="silent"){o.errors.push(new xf(c.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return s&&n&&(o.errors.forEach(CO(t,n)),o.warnings.forEach(CO(t,n))),o}function uw(t,e,n){let s;const r=Xae(t,n);if(!r)return null;if(r.warnings.forEach(i=>BI(r.options.logLevel,i)),r.errors.length>0){if(r.options.logLevel!=="silent")throw r.errors[0];r.errors=[]}return r.toJS(Object.assign({reviver:s},n))}function RO(t,e,n){let s=null;if(typeof e=="function"||Array.isArray(e)?s=e:n===void 0&&e&&(n=e),typeof n=="string"&&(n=n.length),typeof n=="number"){const r=Math.round(n);n=r<1?void 0:r>8?{indent:8}:{indent:r}}if(t===void 0){const{keepUndefined:r}=n??e??{};if(!r)return}return nm(t)&&!s?t.toString(n):new EN(t,s,n).toString(n)}function hw(){return document.documentElement.classList.contains("dark")||window.matchMedia("(prefers-color-scheme: dark)").matches}function Jae({resource:t,loading:e,error:n,onSave:s,toolbarRef:r}){const[i,o]=V.useState(""),[c,u]=V.useState(""),[h,m]=V.useState(!1),[p,y]=V.useState(null),[v,x]=V.useState(!1),[_,S]=V.useState(null),[k,C]=V.useState(hw),N=V.useRef(null),R=V.useRef(null),[O,E]=V.useState(!1);V.useEffect(()=>{const z=new MutationObserver(()=>{C(hw())});z.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]});const K=window.matchMedia("(prefers-color-scheme: dark)"),Z=()=>C(hw());return K.addEventListener("change",Z),()=>{z.disconnect(),K.removeEventListener("change",Z)}},[]);const D=V.useCallback(async z=>{const K=z.getModel();if(!K)return E(!0);const Z=K.getValue().split(`
`),W=/^(\s*)(managedFields|ownerReferences|kubectl\.kubernetes\.io\/last-applied-configuration):/,I=Z.flatMap((Y,J)=>{const $=Y.match(W);if(!$)return[];const j=$[1].length,M=Z.slice(J+1).findIndex(A=>A.trimStart().length>0&&A.length-A.trimStart().length<=j),F=M===-1?Z.length:J+1+M;return F>J+1?[{start:J+1,end:F}]:[]});for(const{start:Y,end:J}of I.reverse())z.setSelection({startLineNumber:Y,startColumn:1,endLineNumber:J,endColumn:1}),await z.getAction("editor.fold")?.run();z.setPosition({lineNumber:1,column:1}),z.revealLine(1),E(!0)},[]);V.useEffect(()=>{if(t){const z=RO(t,{lineWidth:0});z!==c&&(h?u(z):(o(z),u(z),y(null),S(null),N.current&&(E(!1),setTimeout(()=>D(N.current),100))))}},[t,c,h,D]),V.useEffect(()=>{if(!i){y(null);return}try{uw(i),y(null)}catch(z){y(z instanceof Error?z.message:"Invalid YAML")}},[i]);const B=(z,K)=>{N.current=z,R.current=K,K.languages.registerDocumentFormattingEditProvider("yaml",{provideDocumentFormattingEdits:Z=>{try{const W=Z.getValue(),I=uw(W),Y=RO(I,{lineWidth:0});return[{range:Z.getFullModelRange(),text:Y}]}catch{return[]}}}),E(!1),setTimeout(()=>D(z),100)},q=z=>{const K=z||"";o(K),m(K!==c),S(null)},P=V.useCallback(()=>{o(c),m(!1),y(null),S(null)},[c]),G=V.useCallback(async()=>{if(!(p||!h))try{x(!0),S(null);const z=uw(i);await s(z),u(i),m(!1)}catch(z){S(z instanceof Error?z.message:"Failed to save")}finally{x(!1)}},[p,h,i,s]);return e?f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsxs("div",{className:"flex items-center gap-2 text-neutral-600 dark:text-neutral-400 text-sm",children:[f.jsx(Sa,{size:14,className:"animate-spin"}),"Loading resource..."]})}):n?f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsx("div",{className:"text-sm text-red-600 dark:text-red-400",children:n})}):t?f.jsxs("div",{className:"flex flex-col h-full",children:[r&&f.jsxs(sN,{toolbarRef:r,children:[f.jsx("button",{onClick:G,disabled:!h||!!p||v,className:"flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 hover:bg-neutral-200 dark:hover:bg-neutral-800 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Save changes",children:v?f.jsx(Sa,{size:12,className:"animate-spin"}):f.jsx(YG,{size:12})}),f.jsx("button",{onClick:P,disabled:!h||v,className:"flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-200 dark:hover:bg-neutral-800 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Reset changes",children:f.jsx(KG,{size:12})})]}),(p||_)&&f.jsx("div",{className:"shrink-0 flex items-center gap-2 px-4 py-2 bg-red-50 dark:bg-red-500/10 border-b border-red-200 dark:border-red-500/20",children:p?f.jsxs(f.Fragment,{children:[f.jsx(ch,{size:14,className:"text-red-500 shrink-0"}),f.jsxs("span",{className:"text-xs text-red-700 dark:text-red-400",children:["Invalid YAML: ",p]})]}):f.jsxs(f.Fragment,{children:[f.jsx(wv,{size:14,className:"text-red-500 shrink-0"}),f.jsx("span",{className:"text-xs text-red-700 dark:text-red-400",children:_})]})}),f.jsx("div",{className:`flex-1 min-h-0 transition-opacity duration-150 ${O?"opacity-100":"opacity-0"}`,children:f.jsx(Uie,{height:"100%",language:"yaml",theme:k?"vs-dark":"light",value:i,onChange:q,onMount:B,loading:f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsx(Sa,{size:20,className:"animate-spin text-neutral-400"})}),options:{minimap:{enabled:!1},fontSize:13,fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace',lineNumbers:"on",scrollBeyondLastLine:!1,wordWrap:"on",wrappingIndent:"indent",automaticLayout:!0,tabSize:2,insertSpaces:!0,renderWhitespace:"selection",bracketPairColorization:{enabled:!0},guides:{indentation:!0,bracketPairs:!0},padding:{top:12,bottom:12},scrollbar:{verticalScrollbarSize:10,horizontalScrollbarSize:10}}})})]}):f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"No resource loaded"})})}const Qae=new Set(["managedFields"]);function eoe(t){const e=t.metadata;if(!e)return t;const n=Object.fromEntries(Object.entries(e).filter(([s])=>!Qae.has(s)));return{...t,metadata:n}}function hP({context:t,isOpen:e,onClose:n,otherPanelOpen:s=!1,resource:r}){const[i,o]=V.useState("yaml"),[c,u]=V.useState(null),[h,m]=V.useState(null),[p,y]=V.useState(null),v=V.useRef(null),x=V.useRef(null),{data:_,isLoading:S,error:k,refetch:C}=J0({queryKey:["kubernetes","resource",t,r?.kind,r?.apiVersion,r?.name,r?.namespace],queryFn:async()=>{if(!r||!r.name||!r.kind)return null;const X=await wY(t,r.kind,r.apiVersion);if(!X)throw new Error(`Unknown resource kind: ${r.kind}`);return v.current=X,EY(t,X,r.name,r.namespace)},enabled:e&&!!r?.name&&!!r?.kind,placeholderData:Z3}),{data:N=[],isLoading:R}=J0({queryKey:["kubernetes","events",t,r?.name,r?.namespace],queryFn:async()=>r?.name?jY(t,r.name,r.namespace):[],enabled:e&&!!r?.name,placeholderData:Z3}),O=k instanceof Error?k.message:k?String(k):null,E=_?SL(_):[],D=async X=>{m(null),u(X.id);try{await X.execute(t,_),C()}catch(ae){m(ae instanceof Error?ae.message:"Action failed")}finally{u(null),y(null)}},B=X=>{X.confirm?y(X):D(X)},q=V.useCallback(async X=>{if(!r||!r.name||!v.current)throw new Error("Resource configuration not available");await AY(t,v.current,r.name,X,r.namespace),C()},[t,r,C]);if(V.useEffect(()=>{const X=r?.kind||"";o(mR(X)?"overview":"yaml")},[r?.kind,r?.name,r?.namespace]),!e||!r||!r.name)return null;const P=_,G=P?eoe(P):null,z=r.name,K=r.kind||"Resource",Z=mR(K),W=new Set(["pod-template-hash","controller-revision-hash","pod-template-generation"]),I=new Set(["kubectl.kubernetes.io/last-applied-configuration","deployment.kubernetes.io/revision","control-plane.alpha.kubernetes.io/leader","deprecated.daemonset.template.generation","kubernetes.io/description"]),Y=G?.metadata,J=Y?.labels,$=Y?.annotations,j=J?Object.keys(J).filter(X=>!W.has(X)).length:0,M=$?Object.keys($).filter(X=>!I.has(X)).length:0,F=j>0||M>0,Q=["Pod","Deployment","DaemonSet","ReplicaSet","StatefulSet","Job"].includes(K)&&!!r.namespace,se=K==="Pod"&&!!r.namespace;return f.jsxs("aside",{className:"fixed top-0 h-screen bg-white border-l border-neutral-200 dark:bg-neutral-900 dark:border-neutral-800 flex flex-col z-20 shadow-xl transition-all duration-300",style:{right:s?"28rem":"0",width:s?"28rem":"40rem"},children:["      ",f.jsxs("header",{className:"shrink-0 h-16 flex items-center justify-between pl-5 pr-4 border-b border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900",children:[f.jsx("div",{className:"flex items-center gap-3 min-w-0",children:f.jsxs("div",{className:"min-w-0",children:[f.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-neutral-100 truncate",children:z}),f.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-500",children:r.namespace||"cluster-scoped"})]})}),f.jsx("button",{onClick:n,className:"p-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-400 dark:hover:text-neutral-200 dark:hover:bg-neutral-800 rounded-md transition-colors",title:"Close",children:f.jsx(wv,{size:18})})]}),f.jsxs("div",{className:"shrink-0 flex items-center border-b border-neutral-200 dark:border-neutral-800 bg-neutral-50 dark:bg-neutral-900/50",children:[f.jsxs("div",{className:"flex",children:[Z&&f.jsx("button",{onClick:()=>o("overview"),className:`px-4 py-2.5 text-sm font-medium transition-colors ${i==="overview"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 -mb-px":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200"}`,children:"Overview"}),F&&f.jsx("button",{onClick:()=>o("metadata"),className:`px-4 py-2.5 text-sm font-medium transition-colors ${i==="metadata"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 -mb-px":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200"}`,children:"Metadata"}),f.jsx("button",{onClick:()=>o("yaml"),className:`px-4 py-2.5 text-sm font-medium transition-colors ${i==="yaml"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 -mb-px":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200"}`,children:"Manifest"}),N.length>0&&f.jsx("button",{onClick:()=>o("events"),className:`px-4 py-2.5 text-sm font-medium transition-colors ${i==="events"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 -mb-px":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200"}`,children:"Events"}),Q&&f.jsx("button",{onClick:()=>o("logs"),className:`px-4 py-2.5 text-sm font-medium transition-colors ${i==="logs"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 -mb-px":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200"}`,children:"Logs"}),se&&f.jsx("button",{onClick:()=>o("terminal"),className:`px-4 py-2.5 text-sm font-medium transition-colors ${i==="terminal"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 -mb-px":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200"}`,children:"Terminal"})]}),f.jsxs("div",{className:"ml-auto pr-4 flex items-center gap-1",children:[f.jsx("div",{ref:x,className:"flex items-center gap-1"}),i==="overview"&&E.length>0&&f.jsx(f.Fragment,{children:E.map(X=>{const ae=X.isDisabled?.(_),ke=ae===!0||typeof ae=="string",Se=typeof ae=="string"?ae:void 0,Ve=c===X.id;return f.jsx("button",{onClick:()=>B(X),disabled:ke||Ve,title:Se||X.label,className:`
                      flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium rounded transition-colors
                      ${ke||Ve?"opacity-50 cursor-not-allowed":""}
                      ${X.variant==="primary"?"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 hover:bg-neutral-200 dark:hover:bg-neutral-800":X.variant==="warning"?"text-amber-600 dark:text-amber-400 hover:text-amber-700 dark:hover:text-amber-300 hover:bg-neutral-200 dark:hover:bg-neutral-800":X.variant==="danger"?"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 hover:bg-neutral-200 dark:hover:bg-neutral-800":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-200 dark:hover:bg-neutral-800"}
                    `,children:Ve?f.jsx(Ln,{size:12,className:"animate-spin"}):X.icon},X.id)})})]})]}),h&&f.jsx("div",{className:"shrink-0 mx-4 mt-2 p-2 bg-red-500/10 border border-red-500/30 rounded text-red-600 dark:text-red-400 text-xs",children:h}),p&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:f.jsxs("div",{className:"bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg p-4 max-w-md mx-4 shadow-xl",children:[f.jsx("h3",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-200 mb-2",children:p.confirm?.title}),f.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400 mb-4",children:p.confirm?.message}),f.jsxs("div",{className:"flex justify-end gap-2",children:[f.jsx("button",{onClick:()=>y(null),className:"px-3 py-1.5 text-xs font-medium text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded transition-colors",children:"Cancel"}),f.jsxs("button",{onClick:()=>D(p),disabled:c===p.id,className:`
                  px-3 py-1.5 text-xs font-medium text-white rounded transition-colors
                  ${p.variant==="danger"?"bg-red-600 hover:bg-red-700":p.variant==="warning"?"bg-amber-600 hover:bg-amber-700":"bg-blue-600 hover:bg-blue-700"}
                  ${c===p.id?"opacity-50 cursor-not-allowed":""}
                `,children:[c===p.id?f.jsx(Ln,{size:12,className:"animate-spin inline mr-1"}):null,p.confirm?.confirmLabel||"Confirm"]})]})]})}),i==="overview"&&Z&&f.jsxs("div",{className:"flex-1 overflow-auto p-4",children:[S&&f.jsxs("div",{className:"flex items-center gap-2 text-neutral-600 dark:text-neutral-400 text-sm mb-4",children:[f.jsx(Sa,{size:14,className:"animate-spin"}),"Loading full resource..."]}),O&&f.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mb-4",children:O}),_&&!S&&f.jsx(Ree,{context:t,resource:_,hideActions:!0})]}),i==="yaml"&&f.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:f.jsx(Jae,{resource:_??null,loading:S,error:O,onSave:q,toolbarRef:x})}),i==="metadata"&&f.jsx("div",{className:"flex-1 overflow-auto p-5",children:G&&f.jsx(kre,{metadata:G.metadata})}),i==="events"&&f.jsx("div",{className:"flex-1 overflow-auto p-5",children:f.jsx(jre,{events:N,loading:R})}),i==="logs"&&Q&&_&&f.jsx("div",{className:"flex-1 overflow-hidden",children:f.jsx(Xee,{context:t,resource:_,toolbarRef:x})}),i==="terminal"&&se&&_&&f.jsx("div",{className:"flex-1 overflow-hidden",children:f.jsx(Sre,{context:t,resource:_,toolbarRef:x})})]})}const rh={Pod:yi,Deployment:uC,DaemonSet:cC,StatefulSet:lc,Job:dC,CronJob:Oa,Service:sY,Ingress:Cr,Gateway:Vn,HTTPRoute:ap,GRPCRoute:ap,NetworkPolicy:hh,PersistentVolume:Ns,PersistentVolumeClaim:iC,ConfigMap:ei,Secret:Op,Node:mi},toe={Pod:{bg:"#dcfce7",bgDark:"#14532d",border:"#22c55e",borderDark:"#4ade80",text:"#166534",textDark:"#86efac"},Deployment:{bg:"#dbeafe",bgDark:"#1e3a8a",border:"#3b82f6",borderDark:"#60a5fa",text:"#1e40af",textDark:"#93c5fd"},DaemonSet:{bg:"#f3e8ff",bgDark:"#581c87",border:"#a855f7",borderDark:"#c084fc",text:"#6b21a8",textDark:"#d8b4fe"},StatefulSet:{bg:"#ede9fe",bgDark:"#5b21b6",border:"#8b5cf6",borderDark:"#a78bfa",text:"#5b21b6",textDark:"#c4b5fd"},Job:{bg:"#fef3c7",bgDark:"#78350f",border:"#f59e0b",borderDark:"#fbbf24",text:"#92400e",textDark:"#fcd34d"},CronJob:{bg:"#ffedd5",bgDark:"#7c2d12",border:"#f97316",borderDark:"#fb923c",text:"#9a3412",textDark:"#fdba74"},Service:{bg:"#cffafe",bgDark:"#164e63",border:"#06b6d4",borderDark:"#22d3ee",text:"#155e75",textDark:"#67e8f9"},Ingress:{bg:"#ccfbf1",bgDark:"#134e4a",border:"#14b8a6",borderDark:"#2dd4bf",text:"#115e59",textDark:"#5eead4"},Gateway:{bg:"#d1fae5",bgDark:"#065f46",border:"#10b981",borderDark:"#34d399",text:"#065f46",textDark:"#6ee7b7"},HTTPRoute:{bg:"#a7f3d0",bgDark:"#047857",border:"#34d399",borderDark:"#6ee7b7",text:"#047857",textDark:"#a7f3d0"},GRPCRoute:{bg:"#a7f3d0",bgDark:"#047857",border:"#34d399",borderDark:"#6ee7b7",text:"#047857",textDark:"#a7f3d0"},NetworkPolicy:{bg:"#fef3c7",bgDark:"#78350f",border:"#f59e0b",borderDark:"#fbbf24",text:"#92400e",textDark:"#fcd34d"},PersistentVolume:{bg:"#f1f5f9",bgDark:"#334155",border:"#64748b",borderDark:"#94a3b8",text:"#334155",textDark:"#cbd5e1"},PersistentVolumeClaim:{bg:"#f8fafc",bgDark:"#475569",border:"#94a3b8",borderDark:"#cbd5e1",text:"#475569",textDark:"#e2e8f0"},ConfigMap:{bg:"#fef9c3",bgDark:"#713f12",border:"#eab308",borderDark:"#facc15",text:"#854d0e",textDark:"#fde047"},Secret:{bg:"#fee2e2",bgDark:"#7f1d1d",border:"#ef4444",borderDark:"#f87171",text:"#991b1b",textDark:"#fca5a5"}},noe={bg:"#f3f4f6",bgDark:"#374151",border:"#9ca3af",borderDark:"#6b7280",text:"#374151",textDark:"#d1d5db"};function Il(t,e){const n=toe[t]||noe;return{bg:e?n.bgDark:n.bg,border:e?n.borderDark:n.border,text:e?n.textDark:n.text}}function dP(t){let e="Unknown",n="#9ca3af",s="#6b7280";if(t.kind==="Pod"){const r=t.status?.phase||"Unknown";e=r,r==="Running"?(n="#22c55e",s="#4ade80"):r==="Pending"?(n="#eab308",s="#facc15"):r==="Failed"?(n="#ef4444",s="#f87171"):r==="Succeeded"&&(n="#22c55e",s="#4ade80")}else if(t.kind==="DaemonSet"){const r=t.status?.desiredNumberScheduled||0,i=t.status?.numberReady||0;e=`${i}/${r}`,i===r&&r>0?(n="#22c55e",s="#4ade80"):(n="#eab308",s="#facc15")}else if(["Deployment","StatefulSet"].includes(t.kind)){const r=t.status?.replicas||0,i=t.status?.readyReplicas||0;e=`${i}/${r}`,i===r&&r>0?(n="#22c55e",s="#4ade80"):(n="#eab308",s="#facc15")}else if(t.kind==="Service")e="Active",n="#22c55e",s="#4ade80";else if(t.kind==="Job"){const r=t.status?.succeeded||0,i=t.status?.failed||0;r>0?(e="Succeeded",n="#22c55e",s="#4ade80"):i>0?(e="Failed",n="#ef4444",s="#f87171"):(e="Running",n="#eab308",s="#facc15")}else t.kind==="PersistentVolumeClaim"?(e=t.status?.phase||"Unknown",e==="Bound"?(n="#22c55e",s="#4ade80"):(n="#eab308",s="#facc15")):["ConfigMap","Secret","Ingress","CronJob"].includes(t.kind)&&(e="Active",n="#22c55e",s="#4ade80");return{status:e,color:n,colorDark:s}}const $d=160,dw=60,OO=48,Zy=120,El=32,T0=6,c2=32,ju=8,ba=20,Eo=4,Kf=5,soe=32,roe=10,mo=12,MO=36,n0=20;function ioe({context:t,namespace:e}){const n=t||"",s=e,[r,i]=V.useState([]),[o,c]=V.useState([]),[u,h]=V.useState(!0),[m,p]=V.useState(null),[y,v]=V.useState({x:40,y:40,scale:1}),[x,_]=V.useState(!1),[S,k]=V.useState({x:0,y:0}),[C,N]=V.useState(null),[R,O]=V.useState(!1),E=V.useRef(null);V.useEffect(()=>{const j=()=>{const Q=document.documentElement.classList.contains("dark"),se=window.matchMedia("(prefers-color-scheme: dark)");O(Q||se.matches)};j();const M=new MutationObserver(j);M.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]});const F=window.matchMedia("(prefers-color-scheme: dark)"),A=()=>j();return F.addEventListener("change",A),()=>{M.disconnect(),F.removeEventListener("change",A)}},[]);const D=V.useCallback(async()=>{h(!0),p(null);try{const j=s?`/namespaces/${s}`:"",M=[{path:`/api/v1${j}/pods`,kind:"Pod"},{path:`/apis/apps/v1${j}/deployments`,kind:"Deployment"},{path:`/apis/apps/v1${j}/replicasets`,kind:"ReplicaSet"},{path:`/apis/apps/v1${j}/statefulsets`,kind:"StatefulSet"},{path:`/apis/apps/v1${j}/daemonsets`,kind:"DaemonSet"},{path:`/api/v1${j}/services`,kind:"Service"},{path:`/api/v1${j}/configmaps`,kind:"ConfigMap"},{path:`/api/v1${j}/secrets`,kind:"Secret"},{path:`/api/v1${j}/persistentvolumeclaims`,kind:"PersistentVolumeClaim"},{path:`/apis/batch/v1${j}/jobs`,kind:"Job"},{path:`/apis/batch/v1${j}/cronjobs`,kind:"CronJob"},{path:`/apis/networking.k8s.io/v1${j}/ingresses`,kind:"Ingress"},{path:`/apis/networking.k8s.io/v1${j}/networkpolicies`,kind:"NetworkPolicy"},{path:`/apis/gateway.networking.k8s.io/v1${j}/gateways`,kind:"Gateway"},{path:`/apis/gateway.networking.k8s.io/v1${j}/httproutes`,kind:"HTTPRoute"},{path:`/apis/gateway.networking.k8s.io/v1${j}/grpcroutes`,kind:"GRPCRoute"}],F=await Promise.allSettled(M.map(async({path:se,kind:X})=>{try{return((await Ma(se,n)).items||[]).map(ke=>({...ke,kind:X}))}catch{return[]}})),A=[];F.forEach(se=>{se.status==="fulfilled"&&A.push(...se.value)}),c(A);const Q=goe(A);i(Q)}catch(j){p(j instanceof Error?j.message:"Failed to load resources")}finally{h(!1)}},[n,s]);V.useEffect(()=>{D()},[D]);const B=V.useCallback(j=>{j.button===0&&(_(!0),k({x:j.clientX-y.x,y:j.clientY-y.y}))},[y.x,y.y]),q=V.useCallback(j=>{x&&v(M=>({...M,x:j.clientX-S.x,y:j.clientY-S.y}))},[x,S]),P=V.useCallback(()=>{_(!1)},[]),G=V.useCallback(j=>{j.preventDefault();const M=j.deltaY>0?.9:1.1,F=Math.min(Math.max(y.scale*M,.1),3),A=E.current?.getBoundingClientRect();if(A){const Q=j.clientX-A.left,se=j.clientY-A.top,X=Q-(Q-y.x)*(F/y.scale),ae=se-(se-y.y)*(F/y.scale);v({x:X,y:ae,scale:F})}},[y]),z=()=>v(j=>({...j,scale:Math.min(j.scale*1.2,3)})),K=()=>v(j=>({...j,scale:Math.max(j.scale/1.2,.1)})),Z=()=>{if(!E.current||r.length===0)return;const j=E.current.getBoundingClientRect(),M=Math.max(...r.map(X=>X.x+X.width),800),F=Math.max(...r.map(X=>X.y+X.height),600),A=(j.width-80)/M,Q=(j.height-80)/F,se=Math.min(A,Q,1);v({x:40,y:40,scale:se})},W=V.useMemo(()=>{if(r.length===0)return{width:800,height:600};const j=Math.max(...r.map(F=>F.x+F.width)),M=Math.max(...r.map(F=>F.y+F.height));return{width:j+100,height:M+100}},[r]);V.useEffect(()=>{if(r.length>0&&E.current){const j=E.current.getBoundingClientRect(),M=(j.width-80)/W.width,F=(j.height-80)/W.height,A=Math.min(M,F,1);v({x:40,y:40,scale:A})}},[r,W]),V.useEffect(()=>{N(null)},[s]);const I=V.useCallback(j=>{N(j)},[]),Y=V.useCallback((j,M,F)=>{const A=o.find(Q=>Q.kind===j&&Q.metadata.name===M&&Q.metadata.namespace===F);A&&N({uid:A.metadata.uid,resource:A,x:0,y:0,width:0,height:0})},[o]),J=C?{name:C.resource.metadata.name,namespace:C.resource.metadata.namespace,uid:C.resource.metadata.uid,kind:C.resource.kind,apiVersion:C.resource.apiVersion}:null,$=C!==null;return u?f.jsx("div",{className:"flex items-center justify-center h-full bg-white dark:bg-neutral-950",children:f.jsxs("div",{className:"flex items-center gap-2 text-neutral-500",children:[f.jsx(Ln,{className:"animate-spin",size:20}),f.jsx("span",{children:"Loading resources..."})]})}):m?f.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4 bg-white dark:bg-neutral-950",children:[f.jsx("div",{className:"text-red-500",children:m}),f.jsxs("button",{onClick:D,className:"flex items-center gap-2 px-4 py-2 text-sm bg-neutral-100 hover:bg-neutral-200 dark:bg-neutral-800 dark:hover:bg-neutral-700 rounded-md transition-colors",children:[f.jsx(Ln,{size:16}),"Retry"]})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:`h-full w-full relative bg-neutral-100 dark:bg-neutral-900 overflow-hidden transition-all duration-300 ${$?"mr-120":""}`,children:[f.jsxs("div",{className:"absolute top-4 right-4 z-10 flex items-center gap-1 bg-white dark:bg-neutral-800 rounded-lg shadow-sm border border-neutral-200 dark:border-neutral-700",children:[f.jsx("button",{onClick:D,className:"p-2 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-l-lg",title:"Refresh",children:f.jsx(Ln,{size:16,className:"text-neutral-600 dark:text-neutral-400"})}),f.jsx("div",{className:"w-px h-5 bg-neutral-200 dark:bg-neutral-700"}),f.jsx("button",{onClick:z,className:"p-2 hover:bg-neutral-100 dark:hover:bg-neutral-700",title:"Zoom In",children:f.jsx(yY,{size:16,className:"text-neutral-600 dark:text-neutral-400"})}),f.jsx("button",{onClick:K,className:"p-2 hover:bg-neutral-100 dark:hover:bg-neutral-700",title:"Zoom Out",children:f.jsx(bY,{size:16,className:"text-neutral-600 dark:text-neutral-400"})}),f.jsx("button",{onClick:Z,className:"p-2 hover:bg-neutral-100 dark:hover:bg-neutral-700",title:"Fit View",children:f.jsx(RG,{size:16,className:"text-neutral-600 dark:text-neutral-400"})}),f.jsxs("div",{className:"px-2 text-xs text-neutral-500 border-l border-neutral-200 dark:border-neutral-700 rounded-r-lg",children:[Math.round(y.scale*100),"%"]})]}),f.jsxs("div",{className:"absolute bottom-4 right-4 z-10 px-3 py-2 bg-white dark:bg-neutral-800 rounded-lg shadow-sm border border-neutral-200 dark:border-neutral-700",children:[f.jsx("div",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-400 mb-2",children:"Connections"}),f.jsxs("div",{className:"flex flex-col gap-1 text-xs",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{width:"24",height:"8",children:f.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#64748b",strokeWidth:"2"})}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Owner"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{width:"24",height:"8",children:f.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#8b5cf6",strokeWidth:"2",strokeDasharray:"4,2"})}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Selector"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{width:"24",height:"8",children:f.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#06b6d4",strokeWidth:"2",strokeDasharray:"4,2"})}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Service"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{width:"24",height:"8",children:f.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#14b8a6",strokeWidth:"2",strokeDasharray:"4,2"})}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Ingress"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{width:"24",height:"8",children:f.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#10b981",strokeWidth:"2",strokeDasharray:"4,2"})}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Gateway"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{width:"24",height:"8",children:f.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#f59e0b",strokeWidth:"1.5",strokeDasharray:"2,2"})}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"NetworkPolicy"})]})]})]}),f.jsx("div",{ref:E,className:"w-full h-full cursor-grab active:cursor-grabbing overflow-hidden",onMouseDown:B,onMouseMove:q,onMouseUp:P,onMouseLeave:P,onWheel:G,children:f.jsxs("svg",{width:W.width,height:W.height,style:{transform:`translate(${y.x}px, ${y.y}px) scale(${y.scale})`,transformOrigin:"0 0"},children:[f.jsxs("defs",{children:[f.jsx("marker",{id:"arrow-owner",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#64748b"})}),f.jsx("marker",{id:"arrow-selector",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#8b5cf6"})}),f.jsx("marker",{id:"arrow-service",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#06b6d4"})}),f.jsx("marker",{id:"arrow-ingress",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#14b8a6"})}),f.jsx("marker",{id:"arrow-gateway",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#10b981"})}),f.jsx("marker",{id:"arrow-network-policy",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"5",markerHeight:"5",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#f59e0b"})}),f.jsx("marker",{id:"arrow-owner-dark",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#94a3b8"})}),f.jsx("marker",{id:"arrow-selector-dark",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#c084fc"})}),f.jsx("marker",{id:"arrow-service-dark",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#22d3ee"})}),f.jsx("marker",{id:"arrow-ingress-dark",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#2dd4bf"})}),f.jsx("marker",{id:"arrow-gateway-dark",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#34d399"})}),f.jsx("marker",{id:"arrow-network-policy-dark",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"5",markerHeight:"5",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#fbbf24"})})]}),r.map(j=>f.jsx(aoe,{application:j,onNodeClick:I,onConfigClick:Y,isDarkMode:R},j.id))]})})]}),f.jsx(hP,{context:n,isOpen:$,onClose:()=>N(null),resource:J})]})}function aoe(t){const e=De.c(40),{application:n,onNodeClick:s,onConfigClick:r,isDarkMode:i}=t;let o;e[0]!==n.nodes?(o=new Map(n.nodes.map(ooe)),n.nodes.forEach(C=>{C.childPods&&C.childPods.forEach(N=>{o.set(N.uid,{...N,x:C.x+N.x,y:C.y+N.y})})}),e[0]=n.nodes,e[1]=o):o=e[1];const c=o;let u;e[2]!==n.nodes?(u=n.nodes.filter(C=>!C.resource.kind.match(/^Pod$/)||!n.nodes.some(N=>["Deployment","StatefulSet","DaemonSet","Job"].includes(N.resource.kind)&&N.childPods?.some(R=>R.uid===C.uid))),e[2]=n.nodes,e[3]=u):u=e[3];const h=u,m=n.name&&n.name.length>0,p=i?"#262626":"white",y=i?"#404040":"#e5e7eb";let v;e[4]!==n.height||e[5]!==n.width||e[6]!==n.x||e[7]!==n.y||e[8]!==p||e[9]!==y?(v=f.jsx("rect",{x:n.x,y:n.y,width:n.width,height:n.height,rx:12,fill:p,stroke:y,strokeWidth:1}),e[4]=n.height,e[5]=n.width,e[6]=n.x,e[7]=n.y,e[8]=p,e[9]=y,e[10]=v):v=e[10];let x;e[11]!==n.name||e[12]!==n.namespace||e[13]!==n.width||e[14]!==n.x||e[15]!==n.y||e[16]!==i||e[17]!==m?(x=m&&f.jsxs("g",{children:[f.jsx("text",{x:n.x+10,y:n.y+13,fontSize:12,fontWeight:600,fill:i?"#e5e5e5":"#374151",dominantBaseline:"hanging",children:n.name.length>Math.floor((n.width-20)/7)?n.name.slice(0,Math.floor((n.width-20)/7)-1)+"":n.name}),n.namespace&&f.jsx("text",{x:n.x+10,y:n.y+26,fontSize:10,fill:i?"#a3a3a3":"#6b7280",dominantBaseline:"hanging",children:n.namespace.length>Math.floor((n.width-20)/6)?n.namespace.slice(0,Math.floor((n.width-20)/6)-1)+"":n.namespace})]}),e[11]=n.name,e[12]=n.namespace,e[13]=n.width,e[14]=n.x,e[15]=n.y,e[16]=i,e[17]=m,e[18]=x):x=e[18];let _;if(e[19]!==n.edges||e[20]!==i||e[21]!==c){let C;e[23]!==i||e[24]!==c?(C=(N,R)=>{const O=c.get(N.from),E=c.get(N.to);return!O||!E||N.type==="owner"&&(O.childPods?.some(B=>B.uid===E.uid)||E.childPods?.some(B=>B.uid===O.uid))?null:f.jsx(loe,{from:O,to:E,type:N.type,isDarkMode:i},R)},e[23]=i,e[24]=c,e[25]=C):C=e[25],_=n.edges.map(C),e[19]=n.edges,e[20]=i,e[21]=c,e[22]=_}else _=e[22];let S;if(e[26]!==i||e[27]!==r||e[28]!==s||e[29]!==h){let C;e[31]!==i||e[32]!==r||e[33]!==s?(C=N=>f.jsx(coe,{node:N,onClick:()=>s(N),onPodClick:s,onConfigClick:r,isDarkMode:i},N.uid),e[31]=i,e[32]=r,e[33]=s,e[34]=C):C=e[34],S=h.map(C),e[26]=i,e[27]=r,e[28]=s,e[29]=h,e[30]=S}else S=e[30];let k;return e[35]!==v||e[36]!==x||e[37]!==_||e[38]!==S?(k=f.jsxs("g",{children:[v,x,_,S]}),e[35]=v,e[36]=x,e[37]=_,e[38]=S,e[39]=k):k=e[39],k}function ooe(t){return[t.uid,t]}function loe(t){const e=De.c(14),{from:n,to:s,type:r,isDarkMode:i}=t,o=n.x+n.width,c=n.y+n.height/2,u=s.x,h=s.y+s.height/2,m=(o+u)/2,p=`M ${o} ${c} C ${m} ${c}, ${m} ${h}, ${u} ${h}`,y=i?"#94a3b8":"#64748b",v=i?"#c084fc":"#8b5cf6",x=i?"#22d3ee":"#06b6d4",_=i?"#2dd4bf":"#14b8a6",S=i?"#34d399":"#10b981",k=i?"#fbbf24":"#f59e0b";let C;e[0]!==y||e[1]!==v||e[2]!==x||e[3]!==_||e[4]!==S||e[5]!==k?(C={owner:y,selector:v,service:x,ingress:_,gateway:S,"network-policy":k},e[0]=y,e[1]=v,e[2]=x,e[3]=_,e[4]=S,e[5]=k,e[6]=C):C=e[6];const N=C;let R;e[7]===Symbol.for("react.memo_cache_sentinel")?(R={owner:void 0,selector:"6,3",service:"6,3",ingress:"4,2",gateway:"4,2","network-policy":"2,2"},e[7]=R):R=e[7];const O=R,E=N[r],D=r==="network-policy"?1.5:2,B=O[r],q=`url(#arrow-${r}${i?"-dark":""})`;let P;return e[8]!==p||e[9]!==D||e[10]!==B||e[11]!==q||e[12]!==E?(P=f.jsx("path",{d:p,fill:"none",stroke:E,strokeWidth:D,strokeDasharray:B,markerEnd:q}),e[8]=p,e[9]=D,e[10]=B,e[11]=q,e[12]=E,e[13]=P):P=e[13],P}function coe(t){const e=De.c(62),{node:n,onClick:s,onPodClick:r,onConfigClick:i,isDarkMode:o}=t,{resource:c,x:u,y:h,width:m,height:p}=n;if(c.kind==="NetworkPolicy"){let $;return e[0]!==o||e[1]!==n||e[2]!==s?($=f.jsx(foe,{node:n,onClick:s,isDarkMode:o}),e[0]=o,e[1]=n,e[2]=s,e[3]=$):$=e[3],$}if(c.kind==="Service"){let $;return e[4]!==o||e[5]!==n||e[6]!==s?($=f.jsx(DO,{node:n,onClick:s,isDarkMode:o}),e[4]=o,e[5]=n,e[6]=s,e[7]=$):$=e[7],$}if(["Gateway","HTTPRoute","GRPCRoute"].includes(c.kind)){let $;return e[8]!==o||e[9]!==n||e[10]!==s?($=f.jsx(DO,{node:n,onClick:s,isDarkMode:o}),e[8]=o,e[9]=n,e[10]=s,e[11]=$):$=e[11],$}if(c.kind==="Ingress"){let $;return e[12]!==o||e[13]!==n||e[14]!==s?($=f.jsx(hoe,{node:n,onClick:s,isDarkMode:o}),e[12]=o,e[13]=n,e[14]=s,e[15]=$):$=e[15],$}if(["Deployment","StatefulSet","DaemonSet","Job"].includes(c.kind)&&n.childPods&&n.childPods.length>0){let $;return e[16]!==o||e[17]!==n||e[18]!==s||e[19]!==i||e[20]!==r?($=f.jsx(uoe,{node:n,onClick:s,onPodClick:r,onConfigClick:i,isDarkMode:o}),e[16]=o,e[17]=n,e[18]=s,e[19]=i,e[20]=r,e[21]=$):$=e[21],$}let y;e[22]!==o||e[23]!==c.kind?(y=Il(c.kind,o),e[22]=o,e[23]=c.kind,e[24]=y):y=e[24];const v=y,x=rh[c.kind]||xv;let _;e[25]!==c?(_=dP(c),e[25]=c,e[26]=_):_=e[26];const S=_,k=o?S.colorDark:S.color,C=Math.floor((m-20)/6.5),N=c.metadata.name.length>C?c.metadata.name.slice(0,C-2)+"":c.metadata.name,R=`translate(${u}, ${h})`;let O;e[27]!==s?(O=$=>{$.stopPropagation(),s()},e[27]=s,e[28]=O):O=e[28];let E;e[29]===Symbol.for("react.memo_cache_sentinel")?(E={cursor:"pointer"},e[29]=E):E=e[29];let D;e[30]!==v.bg||e[31]!==v.border||e[32]!==p||e[33]!==m?(D=f.jsx("rect",{width:m,height:p,rx:8,fill:v.bg,stroke:v.border,strokeWidth:2}),e[30]=v.bg,e[31]=v.border,e[32]=p,e[33]=m,e[34]=D):D=e[34];let B;e[35]!==v.text?(B={color:v.text},e[35]=v.text,e[36]=B):B=e[36];let q;e[37]!==x?(q=f.jsx(x,{size:16}),e[37]=x,e[38]=q):q=e[38];let P;e[39]!==B||e[40]!==q?(P=f.jsx("foreignObject",{width:18,height:18,children:f.jsx("div",{style:B,children:q})}),e[39]=B,e[40]=q,e[41]=P):P=e[41];let G;e[42]!==v.text||e[43]!==c.kind?(G=f.jsx("text",{x:22,y:13,fontSize:11,fill:v.text,fontWeight:600,children:c.kind}),e[42]=v.text,e[43]=c.kind,e[44]=G):G=e[44];let z;e[45]!==G||e[46]!==P?(z=f.jsxs("g",{transform:"translate(10, 10)",children:[P,G]}),e[45]=G,e[46]=P,e[47]=z):z=e[47];const K=m-12;let Z;e[48]!==k||e[49]!==K?(Z=f.jsx("circle",{cx:K,cy:14,r:5,fill:k}),e[48]=k,e[49]=K,e[50]=Z):Z=e[50];const W=p-12,I=o?"#e5e7eb":"#1f2937";let Y;e[51]!==N||e[52]!==W||e[53]!==I?(Y=f.jsx("text",{x:10,y:W,fontSize:12,fontWeight:600,fill:I,children:N}),e[51]=N,e[52]=W,e[53]=I,e[54]=Y):Y=e[54];let J;return e[55]!==z||e[56]!==Z||e[57]!==Y||e[58]!==R||e[59]!==O||e[60]!==D?(J=f.jsxs("g",{transform:R,onClick:O,style:E,className:"hover:opacity-80 transition-opacity",children:[D,z,Z,Y]}),e[55]=z,e[56]=Z,e[57]=Y,e[58]=R,e[59]=O,e[60]=D,e[61]=J):J=e[61],J}function DO(t){const e=De.c(26),{node:n,onClick:s,isDarkMode:r}=t,{resource:i,x:o,y:c,width:u,height:h}=n;let m;e[0]!==r||e[1]!==i.kind?(m=Il(i.kind,r),e[0]=r,e[1]=i.kind,e[2]=m):m=e[2];const p=m,y=rh[i.kind]||xv,v=`translate(${o}, ${c})`;let x;e[3]!==s?(x=D=>{D.stopPropagation(),s()},e[3]=s,e[4]=x):x=e[4];let _;e[5]===Symbol.for("react.memo_cache_sentinel")?(_={cursor:"pointer"},e[5]=_):_=e[5];let S;e[6]!==p.bg||e[7]!==p.border||e[8]!==h||e[9]!==u?(S=f.jsx("rect",{width:u,height:h,rx:8,fill:p.bg,stroke:p.border,strokeWidth:2}),e[6]=p.bg,e[7]=p.border,e[8]=h,e[9]=u,e[10]=S):S=e[10];const k=`translate(${u/2-12}, ${h/2-12})`;let C;e[11]!==p.text?(C={color:p.text},e[11]=p.text,e[12]=C):C=e[12];let N;e[13]!==y?(N=f.jsx(y,{size:22}),e[13]=y,e[14]=N):N=e[14];let R;e[15]!==C||e[16]!==N?(R=f.jsx("foreignObject",{width:24,height:24,children:f.jsx("div",{style:C,children:N})}),e[15]=C,e[16]=N,e[17]=R):R=e[17];let O;e[18]!==k||e[19]!==R?(O=f.jsx("g",{transform:k,children:R}),e[18]=k,e[19]=R,e[20]=O):O=e[20];let E;return e[21]!==O||e[22]!==v||e[23]!==x||e[24]!==S?(E=f.jsxs("g",{transform:v,onClick:x,style:_,className:"hover:opacity-80 transition-opacity",children:[S,O]}),e[21]=O,e[22]=v,e[23]=x,e[24]=S,e[25]=E):E=e[25],E}function uoe(t){const e=De.c(54),{node:n,onClick:s,onPodClick:r,onConfigClick:i,isDarkMode:o}=t,{resource:c,x:u,y:h,width:m,height:p,childPods:y}=n;let v;e[0]!==y?(v=y===void 0?[]:y,e[0]=y,e[1]=v):v=e[1];const x=v;let _;e[2]!==o||e[3]!==c.kind?(_=Il(c.kind,o),e[2]=o,e[3]=c.kind,e[4]=_):_=e[4];const S=_,k=rh[c.kind]||xv,C=Math.floor((m-60)/6),N=c.metadata.name.length>C?c.metadata.name.slice(0,C-2)+"":c.metadata.name;let R;e[5]!==n?(R=n.configIcons||[],e[5]=n,e[6]=R):R=e[6];const O=R,E=`translate(${u}, ${h})`;let D;e[7]!==s?(D=M=>{M.stopPropagation(),s()},e[7]=s,e[8]=D):D=e[8];let B;e[9]===Symbol.for("react.memo_cache_sentinel")?(B={cursor:"pointer"},e[9]=B):B=e[9];let q;e[10]!==S.bg||e[11]!==S.border||e[12]!==p||e[13]!==D||e[14]!==m?(q=f.jsx("rect",{width:m,height:p,rx:10,fill:S.bg,stroke:S.border,strokeWidth:2,onClick:D,style:B,className:"hover:opacity-90"}),e[10]=S.bg,e[11]=S.border,e[12]=p,e[13]=D,e[14]=m,e[15]=q):q=e[15];let P;e[16]!==s?(P=M=>{M.stopPropagation(),s()},e[16]=s,e[17]=P):P=e[17];let G;e[18]===Symbol.for("react.memo_cache_sentinel")?(G={cursor:"pointer"},e[18]=G):G=e[18];let z;e[19]!==S.text?(z={color:S.text},e[19]=S.text,e[20]=z):z=e[20];let K;e[21]!==k?(K=f.jsx(k,{size:16}),e[21]=k,e[22]=K):K=e[22];let Z;e[23]!==z||e[24]!==K?(Z=f.jsx("foreignObject",{width:18,height:18,children:f.jsx("div",{style:z,children:K})}),e[23]=z,e[24]=K,e[25]=Z):Z=e[25];let W;e[26]!==S.text||e[27]!==N?(W=f.jsx("text",{x:22,y:13,fontSize:11,fill:S.text,fontWeight:600,children:N}),e[26]=S.text,e[27]=N,e[28]=W):W=e[28];let I;e[29]!==Z||e[30]!==W?(I=f.jsxs("g",{transform:"translate(8, 8)",children:[Z,W]}),e[29]=Z,e[30]=W,e[31]=I):I=e[31];let Y;e[32]!==I||e[33]!==P?(Y=f.jsx("g",{onClick:P,style:G,children:I}),e[32]=I,e[33]=P,e[34]=Y):Y=e[34];let J;if(e[35]!==x||e[36]!==o||e[37]!==r){let M;e[39]!==o||e[40]!==r?(M=(F,A)=>{const Q=Il("Pod",o),se=dP(F.resource),X=o?se.colorDark:se.color,ae=c2+A*(El+T0),ke=Math.floor((Zy-30)/5.5),Se=F.resource.metadata.name.length>ke?F.resource.metadata.name.slice(0,ke-2)+"":F.resource.metadata.name;return f.jsxs("g",{transform:`translate(${ju}, ${ae})`,onClick:Ve=>{Ve.stopPropagation(),r?.(F)},style:{cursor:"pointer"},className:"hover:opacity-80",children:[f.jsx("rect",{width:Zy,height:El,rx:4,fill:Q.bg,stroke:Q.border,strokeWidth:1.5}),f.jsx("circle",{cx:12,cy:El/2,r:4,fill:X}),f.jsx("text",{x:22,y:El/2+4,fontSize:10,fill:o?"#e5e7eb":"#1f2937",fontWeight:500,children:Se})]},F.uid)},e[39]=o,e[40]=r,e[41]=M):M=e[41],J=x.map(M),e[35]=x,e[36]=o,e[37]=r,e[38]=J}else J=e[38];let $;e[42]!==O||e[43]!==p||e[44]!==o||e[45]!==i||e[46]!==c.metadata.namespace?($=O.length>0&&f.jsx("g",{transform:`translate(${ju}, ${p-Math.ceil(O.length/Kf)*(ba+Eo)-Eo})`,children:O.map((M,F)=>{const A=rh[M.kind],Q=Il(M.kind,o),se=Math.floor(F/Kf),ae=F%Kf*(ba+Eo),ke=se*(ba+Eo);return f.jsxs("g",{transform:`translate(${ae}, ${ke})`,onClick:Se=>{Se.stopPropagation(),i&&i(M.kind,M.name,c.metadata.namespace)},style:{cursor:"pointer"},className:"hover:opacity-80",children:[f.jsx("title",{children:M.name}),f.jsx("rect",{width:ba,height:ba,rx:3,fill:Q.bg,stroke:Q.border,strokeWidth:1}),f.jsx("g",{transform:`translate(${ba/2-6}, ${ba/2-6})`,children:f.jsx("foreignObject",{width:12,height:12,children:f.jsx("div",{style:{color:Q.text},children:f.jsx(A,{size:12})})})})]},`${M.kind}-${M.name}-${F}`)})}),e[42]=O,e[43]=p,e[44]=o,e[45]=i,e[46]=c.metadata.namespace,e[47]=$):$=e[47];let j;return e[48]!==Y||e[49]!==J||e[50]!==$||e[51]!==E||e[52]!==q?(j=f.jsxs("g",{transform:E,children:[q,Y,J,$]}),e[48]=Y,e[49]=J,e[50]=$,e[51]=E,e[52]=q,e[53]=j):j=e[53],j}function hoe(t){const e=De.c(52),{node:n,onClick:s,isDarkMode:r}=t,{resource:i,x:o,y:c,width:u,height:h}=n;let m;e[0]!==r?(m=Il("Ingress",r),e[0]=r,e[1]=m):m=e[1];const p=m,y=rh.Ingress,v=i.spec;let x,_,S,k,C,N,R,O;if(e[2]!==p.bg||e[3]!==p.border||e[4]!==p.text||e[5]!==h||e[6]!==r||e[7]!==s||e[8]!==i.metadata.name||e[9]!==v.rules||e[10]!==u||e[11]!==o||e[12]!==c){const P=v.rules?.map(doe).filter(Boolean)||[],G=Math.floor((u-20)/6.5);x=i.metadata.name.length>G?i.metadata.name.slice(0,G-2)+"":i.metadata.name,_=`translate(${o}, ${c})`,e[21]!==s?(S=I=>{I.stopPropagation(),s()},e[21]=s,e[22]=S):S=e[22],e[23]===Symbol.for("react.memo_cache_sentinel")?(k={cursor:"pointer"},e[23]=k):k=e[23],C="hover:opacity-80 transition-opacity",e[24]!==p.bg||e[25]!==p.border||e[26]!==h||e[27]!==u?(N=f.jsx("rect",{width:u,height:h,rx:8,fill:p.bg,stroke:p.border,strokeWidth:2}),e[24]=p.bg,e[25]=p.border,e[26]=h,e[27]=u,e[28]=N):N=e[28];let z;e[29]!==p.text?(z={color:p.text},e[29]=p.text,e[30]=z):z=e[30];let K;e[31]===Symbol.for("react.memo_cache_sentinel")?(K=f.jsx(y,{size:16}),e[31]=K):K=e[31];let Z;e[32]!==z?(Z=f.jsx("foreignObject",{width:18,height:18,children:f.jsx("div",{style:z,children:K})}),e[32]=z,e[33]=Z):Z=e[33];let W;e[34]!==p.text?(W=f.jsx("text",{x:22,y:13,fontSize:11,fill:p.text,fontWeight:600,children:"Ingress"}),e[34]=p.text,e[35]=W):W=e[35],e[36]!==Z||e[37]!==W?(R=f.jsxs("g",{transform:"translate(10, 10)",children:[Z,W]}),e[36]=Z,e[37]=W,e[38]=R):R=e[38],O=P.length>0&&P[0]&&f.jsx("text",{x:u-10,y:18,fontSize:9,fill:r?"#5eead4":"#115e59",textAnchor:"end",children:P[0].length>18?P[0].slice(0,16)+"":P[0]}),e[2]=p.bg,e[3]=p.border,e[4]=p.text,e[5]=h,e[6]=r,e[7]=s,e[8]=i.metadata.name,e[9]=v.rules,e[10]=u,e[11]=o,e[12]=c,e[13]=x,e[14]=_,e[15]=S,e[16]=k,e[17]=C,e[18]=N,e[19]=R,e[20]=O}else x=e[13],_=e[14],S=e[15],k=e[16],C=e[17],N=e[18],R=e[19],O=e[20];const E=h-12,D=r?"#e5e7eb":"#1f2937";let B;e[39]!==x||e[40]!==D||e[41]!==E?(B=f.jsx("text",{x:10,y:E,fontSize:12,fontWeight:600,fill:D,children:x}),e[39]=x,e[40]=D,e[41]=E,e[42]=B):B=e[42];let q;return e[43]!==B||e[44]!==_||e[45]!==S||e[46]!==k||e[47]!==C||e[48]!==N||e[49]!==R||e[50]!==O?(q=f.jsxs("g",{transform:_,onClick:S,style:k,className:C,children:[N,R,O,B]}),e[43]=B,e[44]=_,e[45]=S,e[46]=k,e[47]=C,e[48]=N,e[49]=R,e[50]=O,e[51]=q):q=e[51],q}function doe(t){return t.host}function foe(t){const e=De.c(55),{node:n,onClick:s,isDarkMode:r}=t,{resource:i,x:o,y:c,width:u,height:h}=n;let m;e[0]!==r?(m=Il("NetworkPolicy",r),e[0]=r,e[1]=m):m=e[1];const p=m,y=rh.NetworkPolicy,v=i.spec;let x;e[2]!==v.policyTypes?(x=v.policyTypes||[],e[2]=v.policyTypes,e[3]=x):x=e[3];const _=x;let S;e[4]!==_||e[5]!==v.ingress?(S=_.includes("Ingress")||v.ingress,e[4]=_,e[5]=v.ingress,e[6]=S):S=e[6];const k=S;let C;e[7]!==_||e[8]!==v.egress?(C=_.includes("Egress")||v.egress,e[7]=_,e[8]=v.egress,e[9]=C):C=e[9];const N=C;let R;e[10]!==v.ingress?(R=v.ingress||[],e[10]=v.ingress,e[11]=R):R=e[11];const O=R;let E;e[12]!==v.egress?(E=v.egress||[],e[12]=v.egress,e[13]=E):E=e[13];const D=E,B=k&&O.length===0,q=N&&D.length===0,P=B&&q,G=Math.floor((u-20)/6.5),z=i.metadata.name.length>G?i.metadata.name.slice(0,G-2)+"":i.metadata.name;let K;e[14]!==q||e[15]!==D||e[16]!==N||e[17]!==k||e[18]!==B||e[19]!==O||e[20]!==P?(K=()=>{const At=[];return P?" Deny All":(B?At.push(" No Ingress"):k&&O.length>0&&At.push(`${O.length}`),q?At.push(" No Egress"):N&&D.length>0&&At.push(`${D.length}`),At.join(" ")||" Allow")},e[14]=q,e[15]=D,e[16]=N,e[17]=k,e[18]=B,e[19]=O,e[20]=P,e[21]=K):K=e[21];const Z=K,W=`translate(${o}, ${c})`;let I;e[22]!==s?(I=At=>{At.stopPropagation(),s()},e[22]=s,e[23]=I):I=e[23];let Y;e[24]===Symbol.for("react.memo_cache_sentinel")?(Y={cursor:"pointer"},e[24]=Y):Y=e[24];const J=P?r?"#7f1d1d":"#fef2f2":p.bg,$=P?r?"#f87171":"#ef4444":p.border;let j;e[25]!==h||e[26]!==J||e[27]!==$||e[28]!==u?(j=f.jsx("rect",{width:u,height:h,rx:8,fill:J,stroke:$,strokeWidth:2}),e[25]=h,e[26]=J,e[27]=$,e[28]=u,e[29]=j):j=e[29];const M=P?r?"#f87171":"#ef4444":p.text;let F;e[30]!==M?(F={color:M},e[30]=M,e[31]=F):F=e[31];let A;e[32]===Symbol.for("react.memo_cache_sentinel")?(A=f.jsx(y,{size:16}),e[32]=A):A=e[32];let Q;e[33]!==F?(Q=f.jsx("foreignObject",{width:18,height:18,children:f.jsx("div",{style:F,children:A})}),e[33]=F,e[34]=Q):Q=e[34];const se=P?r?"#f87171":"#ef4444":p.text;let X;e[35]!==se?(X=f.jsx("text",{x:22,y:13,fontSize:10,fill:se,fontWeight:600,children:"NetworkPolicy"}),e[35]=se,e[36]=X):X=e[36];let ae;e[37]!==Q||e[38]!==X?(ae=f.jsxs("g",{transform:"translate(10, 10)",children:[Q,X]}),e[37]=Q,e[38]=X,e[39]=ae):ae=e[39];const ke=u-10,Se=P?r?"#fca5a5":"#dc2626":r?"#fcd34d":"#92400e",Ve=Z();let Le;e[40]!==ke||e[41]!==Se||e[42]!==Ve?(Le=f.jsx("text",{x:ke,y:18,fontSize:9,fill:Se,textAnchor:"end",fontWeight:500,children:Ve}),e[40]=ke,e[41]=Se,e[42]=Ve,e[43]=Le):Le=e[43];const rt=h-12,Ye=r?"#e5e7eb":"#1f2937";let Je;e[44]!==z||e[45]!==rt||e[46]!==Ye?(Je=f.jsx("text",{x:10,y:rt,fontSize:12,fontWeight:600,fill:Ye,children:z}),e[44]=z,e[45]=rt,e[46]=Ye,e[47]=Je):Je=e[47];let Rt;return e[48]!==j||e[49]!==ae||e[50]!==Le||e[51]!==Je||e[52]!==W||e[53]!==I?(Rt=f.jsxs("g",{transform:W,onClick:I,style:Y,className:"hover:opacity-80 transition-opacity",children:[j,ae,Le,Je]}),e[48]=j,e[49]=ae,e[50]=Le,e[51]=Je,e[52]=W,e[53]=I,e[54]=Rt):Rt=e[54],Rt}function poe(t){const e=t.metadata.labels||{};return e["app.kubernetes.io/instance"]||e.release||e.app||e["app.kubernetes.io/name"]||e["k8s-app"]||e.name||e["app.kubernetes.io/component"]||e["app.kubernetes.io/part-of"]}const moe={Deployment:1,StatefulSet:2,DaemonSet:3,CronJob:4,Job:5,Pod:6};function goe(t){const e=new Map;t.forEach($=>{$.metadata.uid&&e.set($.metadata.uid,$)});const n=new Map,s=new Map,r=($,j)=>{n.has($)||n.set($,new Set),n.has(j)||n.set(j,new Set),n.get($).add(j),n.get(j).add($)},i=($,j,M)=>{const F=`${$}-${j}`;s.has(F)||s.set(F,[]),s.get(F).push({from:$,to:j,type:M})},o=new Map,c=new Map;t.forEach($=>{const j=($.metadata.ownerReferences||[]).filter(M=>e.has(M.uid));if(j.length>0){const M=j[0];c.set($.metadata.uid,M.uid),o.has(M.uid)||o.set(M.uid,[]),o.get(M.uid).push($.metadata.uid),r($.metadata.uid,M.uid),i(M.uid,$.metadata.uid,"owner")}});const u=["Deployment","StatefulSet","DaemonSet","Job"];t.forEach($=>{if(!u.includes($.kind))return;const j=$.spec?.selector?.matchLabels;!j||Object.keys(j).length===0||t.filter(M=>M.kind==="Pod"&&M.metadata.namespace===$.metadata.namespace).forEach(M=>{const F=M.metadata.labels||{};Object.entries(j).every(([A,Q])=>F[A]===Q)&&r($.metadata.uid,M.metadata.uid)})});const h=new Map,m=new Map,p=new Set;t.filter($=>$.kind==="Pod").forEach($=>{const j=$.metadata.ownerReferences?.[0];if(!j)return;if(j.kind==="Node"){p.add($.metadata.uid);return}const M=e.get(j.uid);if(M){if(u.includes(M.kind)){h.has(M.metadata.uid)||h.set(M.metadata.uid,[]),h.get(M.metadata.uid).push($),m.set($.metadata.uid,M.metadata.uid);return}if(M.kind==="ReplicaSet"){const F=M.metadata.ownerReferences?.[0];if(F){const A=e.get(F.uid);A&&A.kind==="Deployment"&&(h.has(A.metadata.uid)||h.set(A.metadata.uid,[]),h.get(A.metadata.uid).push($),m.set($.metadata.uid,A.metadata.uid))}}}}),h.forEach($=>{$.sort((j,M)=>j.metadata.name.localeCompare(M.metadata.name))}),t.forEach($=>{if($.kind!=="Service")return;const j=$.spec?.selector;!j||Object.keys(j).length===0||t.filter(M=>M.kind==="Pod"&&M.metadata.namespace===$.metadata.namespace).forEach(M=>{const F=M.metadata.labels||{};Object.entries(j).every(([A,Q])=>F[A]===Q)&&(r($.metadata.uid,M.metadata.uid),i($.metadata.uid,M.metadata.uid,"service"))})}),t.forEach($=>{if($.kind!=="NetworkPolicy")return;const j=$.spec,M=$.metadata.namespace||"",F=j.podSelector?.matchLabels||{},A=Object.keys(F).length===0;t.filter(Q=>Q.kind==="Pod"&&Q.metadata.namespace===M).forEach(Q=>{const se=Q.metadata.labels||{};if(A||Object.entries(F).every(([ae,ke])=>se[ae]===ke)){const ae=m.get(Q.metadata.uid);i(ae||Q.metadata.uid,$.metadata.uid,"network-policy")}})});const y=new Map;t.forEach($=>{if($.kind==="Service"){const j=`${$.metadata.namespace||""}/${$.metadata.name}`;y.set(j,$)}}),t.forEach($=>{if($.kind!=="Ingress")return;const j=$.spec,M=$.metadata.namespace||"";if(j.defaultBackend?.service?.name){const F=y.get(`${M}/${j.defaultBackend.service.name}`);F&&(r($.metadata.uid,F.metadata.uid),i($.metadata.uid,F.metadata.uid,"ingress"))}j.rules?.forEach(F=>{F.http?.paths?.forEach(A=>{if(A.backend?.service?.name){const Q=y.get(`${M}/${A.backend.service.name}`);Q&&(r($.metadata.uid,Q.metadata.uid),i($.metadata.uid,Q.metadata.uid,"ingress"))}})})}),t.forEach($=>{if($.kind!=="HTTPRoute"&&$.kind!=="GRPCRoute")return;const j=$.spec,M=$.metadata.namespace||"";j.parentRefs?.forEach(F=>{if(!F.kind||F.kind==="Gateway"){const A=t.find(Q=>Q.kind==="Gateway"&&Q.metadata.name===F.name&&Q.metadata.namespace===M);A&&(r(A.metadata.uid,$.metadata.uid),i(A.metadata.uid,$.metadata.uid,"gateway"))}}),j.rules?.forEach(F=>{F.backendRefs?.forEach(A=>{if(!A.kind||A.kind==="Service"){const Q=y.get(`${M}/${A.name}`);Q&&(r($.metadata.uid,Q.metadata.uid),i($.metadata.uid,Q.metadata.uid,"gateway"))}})})});const v=new Map,x=new Map,_=new Map;t.forEach($=>{const j=`${$.metadata.namespace||""}/${$.metadata.name}`;$.kind==="ConfigMap"?v.set(j,$):$.kind==="Secret"?x.set(j,$):$.kind==="PersistentVolumeClaim"&&_.set(j,$)});const S=($,j,M)=>{$?.forEach(F=>{F.env?.forEach(A=>{A.valueFrom?.configMapKeyRef?.name&&j.add(A.valueFrom.configMapKeyRef.name),A.valueFrom?.secretKeyRef?.name&&M.add(A.valueFrom.secretKeyRef.name)}),F.envFrom?.forEach(A=>{A.configMapRef?.name&&j.add(A.configMapRef.name),A.secretRef?.name&&M.add(A.secretRef.name)})})},k=new Map;t.filter($=>$.kind==="Pod").forEach($=>{const j=m.get($.metadata.uid);if(!j)return;const M=$.spec,F=new Set,A=new Set,Q=new Set;M.volumes?.forEach(X=>{X.configMap?.name&&F.add(X.configMap.name),X.secret?.secretName&&A.add(X.secret.secretName),X.persistentVolumeClaim?.claimName&&Q.add(X.persistentVolumeClaim.claimName),X.projected?.sources?.forEach(ae=>{ae.configMap?.name&&F.add(ae.configMap.name),ae.secret?.name&&A.add(ae.secret.name)})}),S(M.containers,F,A),S(M.initContainers,F,A),k.has(j)||k.set(j,new Map);const se=k.get(j);F.size>0&&(se.has("ConfigMap")||se.set("ConfigMap",new Set),F.forEach(X=>se.get("ConfigMap").add(X))),A.size>0&&(se.has("Secret")||se.set("Secret",new Set),A.forEach(X=>se.get("Secret").add(X))),Q.size>0&&(se.has("PersistentVolumeClaim")||se.set("PersistentVolumeClaim",new Set),Q.forEach(X=>se.get("PersistentVolumeClaim").add(X)))});const C=$=>{const j=c.get($);return j?C(j):$},N=new Map,R=new Map,O=new Map;t.forEach($=>{if($.kind!=="Pod")return;const j=$.metadata.namespace||"",M=C($.metadata.uid),F=$.spec,A=new Set,Q=new Set,se=new Set;F.volumes?.forEach(X=>{X.configMap?.name&&A.add(X.configMap.name),X.secret?.secretName&&Q.add(X.secret.secretName),X.persistentVolumeClaim?.claimName&&se.add(X.persistentVolumeClaim.claimName),X.projected?.sources?.forEach(ae=>{ae.configMap?.name&&A.add(ae.configMap.name),ae.secret?.name&&Q.add(ae.secret.name)})}),S(F.containers,A,Q),S(F.initContainers,A,Q),A.forEach(X=>{const ae=`${j}/${X}`;N.has(ae)||N.set(ae,new Set),N.get(ae).add(M)}),Q.forEach(X=>{const ae=`${j}/${X}`;R.has(ae)||R.set(ae,new Set),R.get(ae).add(M)}),se.forEach(X=>{const ae=`${j}/${X}`;O.has(ae)||O.set(ae,new Set),O.get(ae).add(M)})});const E=new Set;N.forEach(($,j)=>{if($.size>1){const M=v.get(j);M&&E.add(M.metadata.uid)}}),R.forEach(($,j)=>{if($.size>1){const M=x.get(j);M&&E.add(M.metadata.uid)}}),O.forEach(($,j)=>{if($.size>1){const M=_.get(j);M&&E.add(M.metadata.uid)}}),t.forEach($=>{if($.kind!=="Pod")return;const j=$.metadata.namespace||"",M=$.spec,F=new Set,A=new Set,Q=new Set;M.volumes?.forEach(se=>{se.configMap?.name&&F.add(se.configMap.name),se.secret?.secretName&&A.add(se.secret.secretName),se.persistentVolumeClaim?.claimName&&Q.add(se.persistentVolumeClaim.claimName),se.projected?.sources?.forEach(X=>{X.configMap?.name&&F.add(X.configMap.name),X.secret?.name&&A.add(X.secret.name)})}),S(M.containers,F,A),S(M.initContainers,F,A),F.forEach(se=>{const X=v.get(`${j}/${se}`);X&&!E.has(X.metadata.uid)&&(r($.metadata.uid,X.metadata.uid),i(X.metadata.uid,$.metadata.uid,"owner"))}),A.forEach(se=>{const X=x.get(`${j}/${se}`);X&&!E.has(X.metadata.uid)&&(r($.metadata.uid,X.metadata.uid),i(X.metadata.uid,$.metadata.uid,"owner"))}),Q.forEach(se=>{const X=_.get(`${j}/${se}`);X&&!E.has(X.metadata.uid)&&(r($.metadata.uid,X.metadata.uid),i(X.metadata.uid,$.metadata.uid,"owner"))})});const D=new Set,B=[];function q($,j){D.has($)||p.has($)||(D.add($),j.push($),(n.get($)||new Set).forEach(M=>q(M,j)))}t.forEach($=>{if(!p.has($.metadata.uid)&&!D.has($.metadata.uid)){const j=[];q($.metadata.uid,j),j.length>0&&B.push(j)}}),B.sort(($,j)=>j.length-$.length);const P=[],G={Gateway:0,Ingress:0,HTTPRoute:1,GRPCRoute:1,Service:2,Deployment:3,StatefulSet:3,DaemonSet:3,Job:3,CronJob:3,Pod:3,ConfigMap:4,Secret:4,PersistentVolumeClaim:4,NetworkPolicy:5};B.forEach(($,j)=>{const M=$.map(je=>e.get(je)).filter(Boolean);if(M.length===0)return;const F=M.filter(je=>!(je.kind==="ReplicaSet"||je.kind==="Pod"&&m.has(je.metadata.uid)||["ConfigMap","Secret","PersistentVolumeClaim"].includes(je.kind)));if(F.length===0)return;const A=new Map;F.forEach(je=>{const We=G[je.kind]??3;A.has(We)||A.set(We,[]),A.get(We).push(je.metadata.uid)}),A.forEach(je=>{je.sort((We,Qe)=>{const tt=e.get(We),Mt=e.get(Qe);return tt.metadata.name.localeCompare(Mt.metadata.name)})});const Q=new Map;F.forEach(je=>{if(["Service","Gateway","HTTPRoute","GRPCRoute"].includes(je.kind)){Q.set(je.metadata.uid,{width:OO,height:OO});return}const We=h.get(je.metadata.uid);if(We&&We.length>0){const Qe=k.get(je.metadata.uid);let tt=0;Qe&&Qe.forEach(re=>tt+=re.size);const Mt=Zy+ju*2,fe=Math.min(tt,Kf),xe=fe>0?fe*(ba+Eo)-Eo+ju*2:0,Ge=Math.max(Mt,xe),it=tt>0?Math.ceil(tt/Kf):0,pt=it>0?it*(ba+Eo)+Eo:0,ln=c2+We.length*(El+T0)-T0+ju+pt;Q.set(je.metadata.uid,{width:Ge,height:ln})}else Q.set(je.metadata.uid,{width:$d,height:dw})});const se=new Map;let X=0,ae=mo+MO;const ke=Array.from(A.keys()).sort((je,We)=>je-We),Se=new Map;ke.forEach(je=>{const We=Math.max(...(A.get(je)||[]).map(Qe=>Q.get(Qe)?.width||$d));Se.set(je,We)});let Ve=mo;ke.forEach(je=>{const We=Se.get(je)||$d;let Qe=mo+MO;A.get(je).forEach(tt=>{const Mt=Q.get(tt)||{width:$d,height:dw},fe=(We-Mt.width)/2;se.set(tt,{x:Ve+fe,y:Qe}),ae=Math.max(ae,Qe+Mt.height),Qe+=Mt.height+roe}),X=Math.max(X,Ve+We),Ve+=We+soe});const Le=X+mo,rt=ae+mo,Ye=F.map(je=>{const We=se.get(je.metadata.uid),Qe=Q.get(je.metadata.uid)||{width:$d,height:dw},Mt=h.get(je.metadata.uid)?.map((Ge,it)=>({uid:Ge.metadata.uid,resource:Ge,x:ju,y:c2+it*(El+T0),width:Zy,height:El})),fe=k.get(je.metadata.uid),xe=[];return fe&&fe.forEach((Ge,it)=>{Ge.forEach(pt=>xe.push({kind:it,name:pt}))}),{uid:je.metadata.uid,resource:je,x:We.x,y:We.y,width:Qe.width,height:Qe.height,childPods:Mt,configIcons:xe}}),Je=[],Rt=new Set,At=new Set;F.forEach(je=>{const We=h.get(je.metadata.uid);We&&We.forEach(Qe=>At.add(Qe.metadata.uid))}),s.forEach(je=>{je.forEach(We=>{const Qe=F.some(xe=>xe.metadata.uid===We.from),tt=F.some(xe=>xe.metadata.uid===We.to),Mt=At.has(We.to),fe=At.has(We.from);if(Qe&&tt||Qe&&Mt||tt&&fe){const xe=`${We.from}-${We.to}-${We.type}`;Rt.has(xe)||(Rt.add(xe),Je.push(We))}})});let Zt,on=1/0;F.forEach(je=>{const We=moe[je.kind];We!==void 0&&We<on&&(on=We,Zt=je)});const qt=Zt?poe(Zt)||Zt.metadata.name:void 0,tn=Zt?.metadata.namespace;P.push({id:`app-${j}`,name:qt||"",namespace:tn,nodes:Ye,edges:Je,x:0,y:0,width:Le,height:rt})});const z=new Map;P.forEach($=>{const j=$.namespace||"",M=$.name||"",F=`${j}/${M}`;z.has(F)||z.set(F,[]),z.get(F).push($)});const K=[];z.forEach(($,j)=>{if($.length===1)K.push($[0]);else{$.sort((ae,ke)=>{const Se=ae.nodes[0]?.resource.metadata.name||"",Ve=ke.nodes[0]?.resource.metadata.name||"";return Se.localeCompare(Ve)});const M=[],F=[];let A=mo,Q=0;$.forEach(ae=>{ae.nodes.forEach(ke=>{M.push({...ke,x:ke.x+A-mo,y:ke.y})}),F.push(...ae.edges),A+=ae.width+n0,Q=Math.max(Q,ae.height)});const[se,X]=j.split("/");K.push({id:`app-${j}`,name:X,namespace:se,nodes:M,edges:F,x:0,y:0,width:A-n0+mo,height:Q})}}),K.sort(($,j)=>j.height-$.height);const Z=1800;let W=0,I=[];const Y=[];K.forEach($=>{W+$.width>Z&&I.length>0&&(Y.push([...I]),W=0,I=[]),I.push({app:$,tempX:W}),W+=$.width+n0}),I.length>0&&Y.push(I);let J=0;return Y.forEach($=>{const j=Math.max(...$.map(M=>M.app.height));$.forEach(({app:M,tempX:F})=>{const A=F,Q=J+(j-M.height)/2;M.nodes.forEach(se=>{se.x+=A,se.y+=Q}),M.x=A,M.y=Q}),J+=j+n0}),K}const yoe=5e3;function fP(t,e,n){const s=De.c(13);let r;s[0]!==n?(r=n===void 0?{}:n,s[0]=n,s[1]=r):r=s[1];const i=r,{refetchInterval:o,enabled:c}=i,u=o===void 0?yoe:o,h=c===void 0?!0:c,m=u>0?u:!1;let p;s[2]!==h||s[3]!==e||s[4]!==t||s[5]!==m?(p={queryKey:t,queryFn:e,refetchInterval:m,enabled:h},s[2]=h,s[3]=e,s[4]=t,s[5]=m,s[6]=p):p=s[6];const v=J0(p),x=v.data??null,_=v.isFetching&&!v.isLoading;let S;return s[7]!==v.error||s[8]!==v.isLoading||s[9]!==v.refetch||s[10]!==x||s[11]!==_?(S={data:x,loading:v.isLoading,error:v.error,refetch:v.refetch,isRefetching:_},s[7]=v.error,s[8]=v.isLoading,s[9]=v.refetch,s[10]=x,s[11]=_,s[12]=S):S=s[12],S}function jN(){const t=De.c(9);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=new Set,t[0]=e):e=t[0];const[n,s]=V.useState(e);let r;t[1]!==n?(r=v=>n.has(v),t[1]=n,t[2]=r):r=t[2];const i=r;let o;t[3]===Symbol.for("react.memo_cache_sentinel")?(o=v=>{s(x=>{const _=new Set(x);return _.add(v),_})},t[3]=o):o=t[3];const c=o;let u;t[4]===Symbol.for("react.memo_cache_sentinel")?(u=v=>{s(x=>{const _=new Set(x);return _.delete(v),_})},t[4]=u):u=t[4];const h=u;let m;t[5]===Symbol.for("react.memo_cache_sentinel")?(m=v=>{s(x=>{const _=new Set(x);return _.has(v)?_.delete(v):_.add(v),_})},t[5]=m):m=t[5];const p=m;let y;return t[6]!==i||t[7]!==n?(y={openPanels:n,isOpen:i,open:c,close:h,toggle:p},t[6]=i,t[7]=n,t[8]=y):y=t[8],y}const voe=["selector","containers","images","labels","annotations","nominated node","readiness gates","node selector"];function boe(){const t=De.c(3),[e,n]=V.useState(_oe);let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=o=>{const c=o.toLowerCase();n(u=>{const h=new Set(u);return h.has(c)?h.delete(c):h.add(c),h})},t[0]=s):s=t[0];const r=s;let i;return t[1]!==e?(i={hiddenColumns:e,toggleColumn:r},t[1]=e,t[2]=i):i=t[2],i}function _oe(){return new Set(voe)}function BO(t){return t?.metadata?.uid?t.metadata.uid:t?.Id?t.Id:t?.Name?t.Name:JSON.stringify(t)}function fw(t){if(t?.metadata?.namespace)return t.metadata.namespace}function xoe(t,e){return t==null?"<none>":e.format==="date-time"&&typeof t=="string"?woe(t):Array.isArray(t)?t.length>0?t.join(", "):"<none>":typeof t=="object"?JSON.stringify(t):String(t)}function woe(t){const e=new Date(t),s=new Date().getTime()-e.getTime(),r=Math.floor(s/1e3),i=Math.floor(r/60),o=Math.floor(i/60),c=Math.floor(o/24);return c>0?`${c}d`:o>0?`${o}h`:i>0?`${i}m`:`${r}s`}function Soe(t){const e=t.name.toLowerCase();return e==="status"||e==="phase"||e==="ready"||e==="condition"}function koe(t){const e=De.c(77),{config:n,data:s,loading:r,error:i,refetch:o,isRefetching:c,hiddenColumns:u,onColumnsLoaded:h,selectedItem:m,onSelectItem:p,namespace:y}=t,v=c===void 0?!1:c;let x;e[0]===Symbol.for("react.memo_cache_sentinel")?(x={column:null,direction:null},e[0]=x):x=e[0];const[_,S]=V.useState(x),k=y===void 0&&n.namespaced===!0;let C;e[1]===Symbol.for("react.memo_cache_sentinel")?(C={name:"Namespace",type:"string",format:"",description:"Namespace of the resource",priority:0},e[1]=C):C=e[1];const N=C;let R;if(e[2]!==s||e[3]!==u||e[4]!==k){e:{if(!s?.columnDefinitions){let M;e[6]===Symbol.for("react.memo_cache_sentinel")?(M=[],e[6]=M):M=e[6],R=M;break e}let $;e[7]!==u?($=M=>!u.has(M.name.toLowerCase()),e[7]=u,e[8]=$):$=e[8];const j=s.columnDefinitions.filter($);if(k&&!u.has("namespace")){const M=j.findIndex(Coe);if(M!==-1){R=[...j.slice(0,M+1),N,...j.slice(M+1)];break e}}R=j}e[2]=s,e[3]=u,e[4]=k,e[5]=R}else R=e[5];const O=R;let E;e:{if(!s?.rows||!_.column||!_.direction){let Q;e[9]!==s?.rows?(Q=s?.rows??[],e[9]=s?.rows,e[10]=Q):Q=e[10],E=Q;break e}if(_.column==="Namespace"&&k){let Q;if(e[11]!==s.rows||e[12]!==_.direction){let se;e[14]!==_.direction?(se=(X,ae)=>{const ke=fw(X.object)||"",Se=fw(ae.object)||"",Ve=ke.localeCompare(Se);return _.direction==="asc"?Ve:-Ve},e[14]=_.direction,e[15]=se):se=e[15],Q=[...s.rows].sort(se),e[11]=s.rows,e[12]=_.direction,e[13]=Q}else Q=e[13];E=Q;break e}let j;if(e[16]!==s.columnDefinitions||e[17]!==_.column){let Q;e[19]!==_.column?(Q=se=>se.name===_.column,e[19]=_.column,e[20]=Q):Q=e[20],j=s.columnDefinitions.findIndex(Q),e[16]=s.columnDefinitions,e[17]=_.column,e[18]=j}else j=e[18];const M=j;if(M===-1){E=s.rows;break e}const F=s.columnDefinitions[M];let A;if(e[21]!==F||e[22]!==M||e[23]!==s.rows||e[24]!==_.direction){let Q;e[26]!==F||e[27]!==M||e[28]!==_.direction?(Q=(se,X)=>{const ae=se.cells[M],ke=X.cells[M];if(ae==null&&ke==null)return 0;if(ae==null)return _.direction==="asc"?-1:1;if(ke==null)return _.direction==="asc"?1:-1;let Se;if(F.format==="date-time"){const Ve=new Date(String(ae)).getTime(),Le=new Date(String(ke)).getTime();Se=Ve-Le}else typeof ae=="number"&&typeof ke=="number"?Se=ae-ke:Se=String(ae).localeCompare(String(ke));return _.direction==="asc"?Se:-Se},e[26]=F,e[27]=M,e[28]=_.direction,e[29]=Q):Q=e[29],A=[...s.rows].sort(Q),e[21]=F,e[22]=M,e[23]=s.rows,e[24]=_.direction,e[25]=A}else A=e[25];E=A}const D=E;let B;e[30]===Symbol.for("react.memo_cache_sentinel")?(B=$=>{S(j=>j.column!==$?{column:$,direction:"asc"}:j.direction==="asc"?{column:$,direction:"desc"}:{column:null,direction:null})},e[30]=B):B=e[30];const q=B;let P,G;if(e[31]!==s||e[32]!==h?(P=()=>{s?.columnDefinitions&&h&&h(s.columnDefinitions)},G=[s,h],e[31]=s,e[32]=h,e[33]=P,e[34]=G):(P=e[33],G=e[34]),V.useEffect(P,G),r){let $;e[35]===Symbol.for("react.memo_cache_sentinel")?($=f.jsx("div",{className:"w-6 h-6 border-2 border-neutral-200 border-t-neutral-400 dark:border-neutral-700 dark:border-t-neutral-500 rounded-full animate-spin"}),e[35]=$):$=e[35];let j;return e[36]!==n.name?(j=f.jsx("div",{className:"h-full flex items-center justify-center",children:f.jsxs("div",{className:"flex flex-col items-center gap-3 text-neutral-400 dark:text-neutral-500",children:[$,f.jsxs("span",{className:"text-sm",children:["Loading ",n.name,"..."]})]})}),e[36]=n.name,e[37]=j):j=e[37],j}if(i){let $;e[38]===Symbol.for("react.memo_cache_sentinel")?($=f.jsx(iy,{size:18}),e[38]=$):$=e[38];let j;e[39]!==i.message?(j=f.jsx("span",{className:"text-sm",children:i.message}),e[39]=i.message,e[40]=j):j=e[40];let M;e[41]!==o?(M=f.jsx("button",{onClick:o,className:"px-3 py-1.5 text-sm text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 underline underline-offset-2",children:"Retry"}),e[41]=o,e[42]=M):M=e[42];let F;return e[43]!==j||e[44]!==M?(F=f.jsx("div",{className:"h-full flex items-center justify-center",children:f.jsxs("div",{className:"flex items-center gap-3 text-red-500 dark:text-red-400",children:[$,j,M]})}),e[43]=j,e[44]=M,e[45]=F):F=e[45],F}if(!s||!s.columnDefinitions||s.rows.length===0){let $;return e[46]===Symbol.for("react.memo_cache_sentinel")?($=f.jsx("div",{className:"h-full flex items-center justify-center",children:f.jsxs("div",{className:"flex flex-col items-center text-neutral-400 dark:text-neutral-500",children:[f.jsx("svg",{className:"w-8 h-8 mb-2 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),f.jsx("span",{className:"text-sm",children:"No resources found"})]})}),e[46]=$):$=e[46],$}let z;e[47]!==v?(z=v&&f.jsx("div",{className:"absolute top-2 right-4 z-20",children:f.jsx(Ln,{size:14,className:"text-neutral-400 dark:text-neutral-500 animate-spin"})}),e[47]=v,e[48]=z):z=e[48];let K;if(e[49]!==_||e[50]!==O){let $;e[52]!==_?($=(j,M)=>{const F=_.column===j.name;return f.jsx("th",{title:j.description,onClick:()=>q(j.name),className:`text-left px-4 py-2 text-[11px] font-medium whitespace-nowrap cursor-pointer transition-colors select-none group bg-neutral-100 dark:bg-neutral-950 ${F?"text-neutral-900 dark:text-neutral-200":"text-neutral-500 dark:text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-400"}`,children:f.jsxs("div",{className:"flex items-center gap-1",children:[j.name,f.jsx("span",{className:`transition-opacity ${F?"opacity-100":"opacity-0 group-hover:opacity-40"}`,children:F&&_.direction==="asc"?f.jsx(EW,{size:12}):F&&_.direction==="desc"?f.jsx(ps,{size:12}):f.jsx(jW,{size:12})})]})},M)},e[52]=_,e[53]=$):$=e[53],K=O.map($),e[49]=_,e[50]=O,e[51]=K}else K=e[51];let Z;e[54]!==K?(Z=f.jsx("thead",{className:"sticky top-0 z-10 bg-neutral-100 dark:bg-neutral-950",children:f.jsx("tr",{children:K})}),e[54]=K,e[55]=Z):Z=e[55];let W;if(e[56]!==s||e[57]!==p||e[58]!==m||e[59]!==k||e[60]!==D||e[61]!==O){let $;e[63]!==s||e[64]!==p||e[65]!==m||e[66]!==k||e[67]!==O?($=(j,M)=>{const F=BO(j.object),Q=(m?BO(m.object):null)===F,se=M%2===1;return f.jsx("tr",{onClick:()=>p?.(Q?null:j),className:`transition-colors cursor-pointer ${Q?"bg-blue-500/20 dark:bg-blue-500/20":se?"bg-neutral-200/40 dark:bg-neutral-800/30 hover:bg-neutral-200/70 dark:hover:bg-neutral-800/50":"hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30"}`,children:O.map((X,ae)=>{const ke=X.name==="Namespace"&&k,Se=ke?-1:s.columnDefinitions.findIndex(Ye=>Ye.name===X.name),Ve=ke?fw(j.object):j.cells[Se],Le=xoe(Ve,X),rt=X.name.toLowerCase()==="name";return Soe(X)?f.jsx("td",{className:`px-4 py-2 whitespace-nowrap ${ae===0?"rounded-l-lg":""} ${ae===O.length-1?"rounded-r-lg":""}`,children:f.jsxs("span",{className:`inline-flex items-center gap-1.5 text-xs font-medium capitalize ${Le.toLowerCase().match(/running|active|ready|available|bound|succeeded|complete|healthy|true/)?"text-emerald-600 dark:text-emerald-400":Le.toLowerCase().match(/pending|creating|waiting|progressing|scheduled/)?"text-amber-600 dark:text-amber-400":Le.toLowerCase().match(/failed|error|crashloopbackoff|terminated|unknown|lost|false/)?"text-red-600 dark:text-red-400":"text-neutral-500 dark:text-neutral-400"}`,children:[f.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${Le.toLowerCase().match(/running|active|ready|available|bound|succeeded|complete|healthy|true/)?"bg-emerald-500":Le.toLowerCase().match(/pending|creating|waiting|progressing|scheduled/)?"bg-amber-500":Le.toLowerCase().match(/failed|error|crashloopbackoff|terminated|unknown|lost|false/)?"bg-red-500":"bg-neutral-400"}`}),Le]})},ae):f.jsx("td",{className:`px-4 py-2 whitespace-nowrap ${ae===0?"rounded-l-lg":""} ${ae===O.length-1?"rounded-r-lg":""} ${rt?"text-neutral-900 dark:text-neutral-300":"text-neutral-500 dark:text-neutral-500"}`,children:Le},ae)})},F)},e[63]=s,e[64]=p,e[65]=m,e[66]=k,e[67]=O,e[68]=$):$=e[68],W=D.map($),e[56]=s,e[57]=p,e[58]=m,e[59]=k,e[60]=D,e[61]=O,e[62]=W}else W=e[62];let I;e[69]!==W?(I=f.jsx("tbody",{children:W}),e[69]=W,e[70]=I):I=e[70];let Y;e[71]!==Z||e[72]!==I?(Y=f.jsx("div",{className:"overflow-auto h-full",children:f.jsxs("table",{className:"w-full text-[13px]",children:[Z,I]})}),e[71]=Z,e[72]=I,e[73]=Y):Y=e[73];let J;return e[74]!==Y||e[75]!==z?(J=f.jsxs("div",{className:"pl-2 h-full relative",children:[z,Y]}),e[74]=Y,e[75]=z,e[76]=J):J=e[76],J}function Coe(t){return t.name.toLowerCase()==="name"}function Noe(t){const e=De.c(19),{columns:n,hiddenColumns:s,onToggleColumn:r}=t,[i,o]=V.useState(!1),c=V.useRef(null);let u,h;e[0]!==i?(u=()=>{if(!i)return;const k=function(N){c.current&&!c.current.contains(N.target)&&o(!1)};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},h=[i],e[0]=i,e[1]=u,e[2]=h):(u=e[1],h=e[2]),V.useEffect(u,h);let m,p;if(e[3]!==i?(m=()=>{if(!i)return;const k=function(N){N.key==="Escape"&&o(!1)};return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)},p=[i],e[3]=i,e[4]=m,e[5]=p):(m=e[4],p=e[5]),V.useEffect(m,p),n.length===0)return null;let y;e[6]!==i?(y=()=>o(!i),e[6]=i,e[7]=y):y=e[7];let v;e[8]===Symbol.for("react.memo_cache_sentinel")?(v=f.jsx(zW,{size:18}),e[8]=v):v=e[8];let x;e[9]!==y?(x=f.jsx("button",{onClick:y,className:"p-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded-md transition-colors focus:outline-none",title:"Toggle columns",children:v}),e[9]=y,e[10]=x):x=e[10];let _;e[11]!==n||e[12]!==s||e[13]!==i||e[14]!==r?(_=i&&f.jsx("div",{className:"absolute right-0 z-50 mt-1 p-2 bg-white border border-neutral-300 dark:bg-neutral-900 dark:border-neutral-700 rounded-lg shadow-xl min-w-45 max-h-75 overflow-y-auto",children:n.map(k=>{const C=!s.has(k.name.toLowerCase());return f.jsxs("label",{className:"flex items-center gap-2 px-2 py-1.5 cursor-pointer rounded hover:bg-neutral-100 dark:hover:bg-neutral-800",children:[f.jsx("span",{onClick:()=>r(k.name),className:`size-4 rounded border flex items-center justify-center cursor-pointer transition-colors ${C?"bg-neutral-500 border-neutral-500 dark:bg-neutral-600 dark:border-neutral-500":"border-neutral-300 bg-white dark:border-neutral-600 dark:bg-neutral-800"}`,children:C&&f.jsx(Nn,{size:12,className:"text-white dark:text-neutral-300"})}),f.jsx("span",{onClick:()=>r(k.name),className:"text-sm text-neutral-700 dark:text-neutral-400 cursor-pointer",children:k.name})]},k.name)})}),e[11]=n,e[12]=s,e[13]=i,e[14]=r,e[15]=_):_=e[15];let S;return e[16]!==x||e[17]!==_?(S=f.jsxs("div",{className:"relative",ref:c,children:[x,_]}),e[16]=x,e[17]=_,e[18]=S):S=e[18],S}const dl="detail";function pP({config:t,title:e,namespace:n,data:s,loading:r,error:i,refetch:o,isRefetching:c=!1,showDetailPanel:u=!0,renderDetailPanel:h,renderHeaderActions:m,renderExtraPanels:p,selectedItemName:y,onSelectItemName:v,getItemName:x}){const[_,S]=V.useState([]),[k,C]=V.useState(null),[N,R]=V.useState(t),[O,E]=V.useState(n),{hiddenColumns:D,toggleColumn:B}=boe(),{isOpen:q,open:P,close:G}=jN(),z=q(dl),K=V.useRef(void 0),Z=V.useRef(!1);(t!==N||n!==O)&&(R(t),E(n),C(null),G(dl),Z.current=!1),V.useEffect(()=>{const J=K.current;K.current=y,queueMicrotask(()=>{if(y&&s?.rows&&x){const $=s.rows.find(M=>x(M)===y);$&&(J!==y||!Z.current)&&(Z.current=!0,C($),u&&P(dl))}else!y&&J&&(C(null),G(dl))})},[y,s,x,u,P,G]);const W=V.useCallback(J=>{C(J),J&&u?(P(dl),v&&x&&v(x(J))):(G(dl),v&&v(void 0))},[P,G,u,v,x]),I=V.useCallback(J=>{S(J)},[]),Y=()=>z?"pr-[40rem]":"";return f.jsxs(f.Fragment,{children:[f.jsxs("main",{className:"flex-1 flex flex-col h-full min-w-0",children:[f.jsxs("header",{className:`shrink-0 h-14 flex items-center justify-between px-5 mt-2 transition-all duration-300 ${Y()}`,children:[f.jsx("div",{className:"flex items-center gap-4",children:f.jsx("h2",{className:"text-lg font-medium text-neutral-900 dark:text-neutral-100",children:e})}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>{const J=new KeyboardEvent("keydown",{key:"k",metaKey:!0,ctrlKey:!0,bubbles:!0});document.dispatchEvent(J)},className:"p-2 rounded-md text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 transition-colors",title:"Command Palette (K)",children:f.jsx(hC,{size:18})}),f.jsx(Noe,{columns:_,hiddenColumns:D,onToggleColumn:B}),m?.(_)]})]}),f.jsx("section",{className:"flex-1 min-h-0 overflow-hidden",children:f.jsx(koe,{config:t,data:s,loading:r,error:i,refetch:o,isRefetching:c,hiddenColumns:D,onColumnsLoaded:I,selectedItem:k,onSelectItem:W,namespace:n})})]}),p?.(k,z),h&&k&&h(k,()=>{C(null),G(dl),v&&v(void 0)},!1)]})}function ut(t,e,n,s,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function ue(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)}let mP=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return mP=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^n()&15>>+s/4).toString(16))};function u2(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const h2=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class st extends Error{}class vs extends st{constructor(e,n,s,r){super(`${vs.makeMessage(e,n,s)}`),this.status=e,this.headers=r,this.requestID=r?.get("x-request-id"),this.error=n;const i=n;this.code=i?.code,this.param=i?.param,this.type=i?.type}static makeMessage(e,n,s){const r=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):s;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,s,r){if(!e||!r)return new jb({message:s,cause:h2(n)});const i=n?.error;return e===400?new gP(e,i,s,r):e===401?new yP(e,i,s,r):e===403?new vP(e,i,s,r):e===404?new bP(e,i,s,r):e===409?new _P(e,i,s,r):e===422?new xP(e,i,s,r):e===429?new wP(e,i,s,r):e>=500?new SP(e,i,s,r):new vs(e,i,s,r)}}class Zr extends vs{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class jb extends vs{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class TN extends jb{constructor({message:e}={}){super({message:e??"Request timed out."})}}class gP extends vs{}class yP extends vs{}class vP extends vs{}class bP extends vs{}class _P extends vs{}class xP extends vs{}class wP extends vs{}class SP extends vs{}class kP extends st{constructor(){super("Could not parse response content as the length limit was reached")}}class CP extends st{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class wf extends Error{constructor(e){super(e)}}const Eoe=/^[a-z][a-z0-9+.-]*:/i,Aoe=t=>Eoe.test(t);let er=t=>(er=Array.isArray,er(t)),LO=er;function NP(t){return typeof t!="object"?{}:t??{}}function joe(t){if(!t)return!0;for(const e in t)return!1;return!0}function Toe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function pw(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const Roe=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new st(`${t} must be an integer`);if(e<0)throw new st(`${t} must be a positive integer`);return e},Ooe=t=>{try{return JSON.parse(t)}catch{return}},om=t=>new Promise(e=>setTimeout(e,t)),yu="6.15.0",Moe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function Doe(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Boe=()=>{const t=Doe();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":yu,"X-Stainless-OS":PO(Deno.build.os),"X-Stainless-Arch":IO(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":yu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":yu,"X-Stainless-OS":PO(globalThis.process.platform??"unknown"),"X-Stainless-Arch":IO(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=Loe();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":yu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":yu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Loe(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const s=n.exec(navigator.userAgent);if(s){const r=s[1]||0,i=s[2]||0,o=s[3]||0;return{browser:e,version:`${r}.${i}.${o}`}}}return null}const IO=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",PO=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let $O;const Ioe=()=>$O??($O=Boe());function Poe(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function EP(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function AP(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return EP({start(){},async pull(n){const{done:s,value:r}=await e.next();s?n.close():n.enqueue(r)},async cancel(){await e.return?.()}})}function jP(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function $oe(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const zoe=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),TP="RFC3986",RP=t=>String(t),zO={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:RP},Uoe="RFC1738";let d2=(t,e)=>(d2=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),d2(t,e));const Ai=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),mw=1024,Hoe=(t,e,n,s,r)=>{if(t.length===0)return t;let i=t;if(typeof t=="symbol"?i=Symbol.prototype.toString.call(t):typeof t!="string"&&(i=String(t)),n==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});let o="";for(let c=0;c<i.length;c+=mw){const u=i.length>=mw?i.slice(c,c+mw):i,h=[];for(let m=0;m<u.length;++m){let p=u.charCodeAt(m);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||r===Uoe&&(p===40||p===41)){h[h.length]=u.charAt(m);continue}if(p<128){h[h.length]=Ai[p];continue}if(p<2048){h[h.length]=Ai[192|p>>6]+Ai[128|p&63];continue}if(p<55296||p>=57344){h[h.length]=Ai[224|p>>12]+Ai[128|p>>6&63]+Ai[128|p&63];continue}m+=1,p=65536+((p&1023)<<10|u.charCodeAt(m)&1023),h[h.length]=Ai[240|p>>18]+Ai[128|p>>12&63]+Ai[128|p>>6&63]+Ai[128|p&63]}o+=h.join("")}return o};function Foe(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function UO(t,e){if(er(t)){const n=[];for(let s=0;s<t.length;s+=1)n.push(e(t[s]));return n}return e(t)}const OP={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},MP=function(t,e){Array.prototype.push.apply(t,er(e)?e:[e])};let HO;const Hn={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Hoe,encodeValuesOnly:!1,format:TP,formatter:RP,indices:!1,serializeDate(t){return(HO??(HO=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function Voe(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const gw={};function DP(t,e,n,s,r,i,o,c,u,h,m,p,y,v,x,_,S,k){let C=t,N=k,R=0,O=!1;for(;(N=N.get(gw))!==void 0&&!O;){const P=N.get(t);if(R+=1,typeof P<"u"){if(P===R)throw new RangeError("Cyclic object value");O=!0}typeof N.get(gw)>"u"&&(R=0)}if(typeof h=="function"?C=h(e,C):C instanceof Date?C=y?.(C):n==="comma"&&er(C)&&(C=UO(C,function(P){return P instanceof Date?y?.(P):P})),C===null){if(i)return u&&!_?u(e,Hn.encoder,S,"key",v):e;C=""}if(Voe(C)||Foe(C)){if(u){const P=_?e:u(e,Hn.encoder,S,"key",v);return[x?.(P)+"="+x?.(u(C,Hn.encoder,S,"value",v))]}return[x?.(e)+"="+x?.(String(C))]}const E=[];if(typeof C>"u")return E;let D;if(n==="comma"&&er(C))_&&u&&(C=UO(C,u)),D=[{value:C.length>0?C.join(",")||null:void 0}];else if(er(h))D=h;else{const P=Object.keys(C);D=m?P.sort(m):P}const B=c?String(e).replace(/\./g,"%2E"):String(e),q=s&&er(C)&&C.length===1?B+"[]":B;if(r&&er(C)&&C.length===0)return q+"[]";for(let P=0;P<D.length;++P){const G=D[P],z=typeof G=="object"&&typeof G.value<"u"?G.value:C[G];if(o&&z===null)continue;const K=p&&c?G.replace(/\./g,"%2E"):G,Z=er(C)?typeof n=="function"?n(q,K):q:q+(p?"."+K:"["+K+"]");k.set(t,R);const W=new WeakMap;W.set(gw,k),MP(E,DP(z,Z,n,s,r,i,o,c,n==="comma"&&_&&er(C)?null:u,h,m,p,y,v,x,_,S,W))}return E}function qoe(t=Hn){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Hn.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=TP;if(typeof t.format<"u"){if(!d2(zO,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const s=zO[n];let r=Hn.filter;(typeof t.filter=="function"||er(t.filter))&&(r=t.filter);let i;if(t.arrayFormat&&t.arrayFormat in OP?i=t.arrayFormat:"indices"in t?i=t.indices?"indices":"repeat":i=Hn.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Hn.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Hn.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Hn.allowEmptyArrays,arrayFormat:i,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Hn.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Hn.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Hn.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Hn.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Hn.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Hn.encodeValuesOnly,filter:r,format:n,formatter:s,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Hn.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Hn.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Hn.strictNullHandling}}function Koe(t,e={}){let n=t;const s=qoe(e);let r,i;typeof s.filter=="function"?(i=s.filter,n=i("",n)):er(s.filter)&&(i=s.filter,r=i);const o=[];if(typeof n!="object"||n===null)return"";const c=OP[s.arrayFormat],u=c==="comma"&&s.commaRoundTrip;r||(r=Object.keys(n)),s.sort&&r.sort(s.sort);const h=new WeakMap;for(let y=0;y<r.length;++y){const v=r[y];s.skipNulls&&n[v]===null||MP(o,DP(n[v],v,c,u,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,h))}const m=o.join(s.delimiter);let p=s.addQueryPrefix===!0?"?":"";return s.charsetSentinel&&(s.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),m.length>0?p+m:""}function Woe(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let s=0;for(const r of t)n.set(r,s),s+=r.length;return n}let FO;function RN(t){let e;return(FO??(e=new globalThis.TextEncoder,FO=e.encode.bind(e)))(t)}let VO;function qO(t){let e;return(VO??(e=new globalThis.TextDecoder,VO=e.decode.bind(e)))(t)}var mr,gr;class Tb{constructor(){mr.set(this,void 0),gr.set(this,void 0),ut(this,mr,new Uint8Array),ut(this,gr,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?RN(e):e;ut(this,mr,Woe([ue(this,mr,"f"),n]));const s=[];let r;for(;(r=Goe(ue(this,mr,"f"),ue(this,gr,"f")))!=null;){if(r.carriage&&ue(this,gr,"f")==null){ut(this,gr,r.index);continue}if(ue(this,gr,"f")!=null&&(r.index!==ue(this,gr,"f")+1||r.carriage)){s.push(qO(ue(this,mr,"f").subarray(0,ue(this,gr,"f")-1))),ut(this,mr,ue(this,mr,"f").subarray(ue(this,gr,"f"))),ut(this,gr,null);continue}const i=ue(this,gr,"f")!==null?r.preceding-1:r.preceding,o=qO(ue(this,mr,"f").subarray(0,i));s.push(o),ut(this,mr,ue(this,mr,"f").subarray(r.index)),ut(this,gr,null)}return s}flush(){return ue(this,mr,"f").length?this.decode(`
`):[]}}mr=new WeakMap,gr=new WeakMap;Tb.NEWLINE_CHARS=new Set([`
`,"\r"]);Tb.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Goe(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function Yoe(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}const Xy={off:0,error:200,warn:300,info:400,debug:500},KO=(t,e,n)=>{if(t){if(Toe(Xy,t))return t;ls(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Xy))}`)}};function Sf(){}function s0(t,e,n){return!e||Xy[t]>Xy[n]?Sf:e[t].bind(e)}const Zoe={error:Sf,warn:Sf,info:Sf,debug:Sf};let WO=new WeakMap;function ls(t){const e=t.logger,n=t.logLevel??"off";if(!e)return Zoe;const s=WO.get(e);if(s&&s[0]===n)return s[1];const r={error:s0("error",e,n),warn:s0("warn",e,n),info:s0("info",e,n),debug:s0("debug",e,n)};return WO.set(e,[n,r]),r}const yl=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var zd;class Di{constructor(e,n,s){this.iterator=e,zd.set(this,void 0),this.controller=n,ut(this,zd,s)}static fromSSEResponse(e,n,s){let r=!1;const i=s?ls(s):console;async function*o(){if(r)throw new st("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let c=!1;try{for await(const u of Xoe(e,n))if(!c){if(u.data.startsWith("[DONE]")){c=!0;continue}if(u.event===null||!u.event.startsWith("thread.")){let h;try{h=JSON.parse(u.data)}catch(m){throw i.error("Could not parse message into JSON:",u.data),i.error("From chunk:",u.raw),m}if(h&&h.error)throw new vs(void 0,h.error,void 0,e.headers);yield h}else{let h;try{h=JSON.parse(u.data)}catch(m){throw console.error("Could not parse message into JSON:",u.data),console.error("From chunk:",u.raw),m}if(u.event=="error")throw new vs(void 0,h.error,h.message,void 0);yield{event:u.event,data:h}}}c=!0}catch(u){if(u2(u))return;throw u}finally{c||n.abort()}}return new Di(o,n,s)}static fromReadableStream(e,n,s){let r=!1;async function*i(){const c=new Tb,u=jP(e);for await(const h of u)for(const m of c.decode(h))yield m;for(const h of c.flush())yield h}async function*o(){if(r)throw new st("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let c=!1;try{for await(const u of i())c||u&&(yield JSON.parse(u));c=!0}catch(u){if(u2(u))return;throw u}finally{c||n.abort()}}return new Di(o,n,s)}[(zd=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],s=this.iterator(),r=i=>({next:()=>{if(i.length===0){const o=s.next();e.push(o),n.push(o)}return i.shift()}});return[new Di(()=>r(e),this.controller,ue(this,zd,"f")),new Di(()=>r(n),this.controller,ue(this,zd,"f"))]}toReadableStream(){const e=this;let n;return EP({async start(){n=e[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:i}=await n.next();if(i)return s.close();const o=RN(JSON.stringify(r)+`
`);s.enqueue(o)}catch(r){s.error(r)}},async cancel(){await n.return?.()}})}}async function*Xoe(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new st("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new st("Attempted to iterate over a response with no body");const n=new Qoe,s=new Tb,r=jP(t.body);for await(const i of Joe(r))for(const o of s.decode(i)){const c=n.decode(o);c&&(yield c)}for(const i of s.flush()){const o=n.decode(i);o&&(yield o)}}async function*Joe(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const s=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?RN(n):n;let r=new Uint8Array(e.length+s.length);r.set(e),r.set(s,e.length),e=r;let i;for(;(i=Yoe(e))!==-1;)yield e.slice(0,i),e=e.slice(i)}e.length>0&&(yield e)}class Qoe{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,s,r]=ele(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function ele(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function BP(t,e){const{response:n,requestLogID:s,retryOfRequestLogID:r,startTime:i}=e,o=await(async()=>{if(e.options.stream)return ls(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Di.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const u=n.headers.get("content-type")?.split(";")[0]?.trim();if(u?.includes("application/json")||u?.endsWith("+json")){const p=await n.json();return LP(p,n)}return await n.text()})();return ls(t).debug(`[${s}] response parsed`,yl({retryOfRequestLogID:r,url:n.url,status:n.status,body:o,durationMs:Date.now()-i})),o}function LP(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var kf;class Rb extends Promise{constructor(e,n,s=BP){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=s,kf.set(this,void 0),ut(this,kf,e)}_thenUnwrap(e){return new Rb(ue(this,kf,"f"),this.responsePromise,async(n,s)=>LP(e(await this.parseResponse(n,s),s),s.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(ue(this,kf,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}kf=new WeakMap;var r0;class ON{constructor(e,n,s,r){r0.set(this,void 0),ut(this,r0,e),this.options=r,this.response=n,this.body=s}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new st("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await ue(this,r0,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(r0=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class tle extends Rb{constructor(e,n,s){super(e,n,async(r,i)=>new s(r,i.response,await BP(r,i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class Ob extends ON{constructor(e,n,s,r){super(e,n,s,r),this.data=s.data||[],this.object=s.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class In extends ON{constructor(e,n,s,r){super(e,n,s,r),this.data=s.data||[],this.has_more=s.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),n=e[e.length-1]?.id;return n?{...this.options,query:{...NP(this.options.query),after:n}}:null}}class Jy extends ON{constructor(e,n,s,r){super(e,n,s,r),this.data=s.data||[],this.has_more=s.has_more||!1,this.last_id=s.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...NP(this.options.query),after:e}}:null}}const IP=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Wf(t,e,n){return IP(),new File(t,e??"unknown_file",n)}function R0(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const MN=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",GO=async(t,e)=>f2(t.body)?{...t,body:await PP(t.body,e)}:t,rc=async(t,e)=>({...t,body:await PP(t.body,e)}),YO=new WeakMap;function nle(t){const e=typeof t=="function"?t:t.fetch,n=YO.get(e);if(n)return n;const s=(async()=>{try{const r="Response"in e?e.Response:(await e("data:,")).constructor,i=new FormData;return i.toString()!==await new r(i).text()}catch{return!0}})();return YO.set(e,s),s}const PP=async(t,e)=>{if(!await nle(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([s,r])=>p2(n,s,r))),n},$P=t=>t instanceof Blob&&"name"in t,sle=t=>typeof t=="object"&&t!==null&&(t instanceof Response||MN(t)||$P(t)),f2=t=>{if(sle(t))return!0;if(Array.isArray(t))return t.some(f2);if(t&&typeof t=="object"){for(const e in t)if(f2(t[e]))return!0}return!1},p2=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,Wf([await n.blob()],R0(n)));else if(MN(n))t.append(e,Wf([await new Response(AP(n)).blob()],R0(n)));else if($P(n))t.append(e,n,R0(n));else if(Array.isArray(n))await Promise.all(n.map(s=>p2(t,e+"[]",s)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([s,r])=>p2(t,`${e}[${s}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},zP=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",rle=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&zP(t),ile=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function ale(t,e,n){if(IP(),t=await t,rle(t))return t instanceof File?t:Wf([await t.arrayBuffer()],t.name);if(ile(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Wf(await m2(r),e,n)}const s=await m2(t);if(e||(e=R0(t)),!n?.type){const r=s.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof r=="string"&&(n={...n,type:r})}return Wf(s,e,n)}async function m2(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(zP(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(MN(t))for await(const n of t)e.push(...await m2(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${ole(t)}`)}return e}function ole(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class et{constructor(e){this._client=e}}function UP(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const ZO=Object.freeze(Object.create(null)),lle=(t=UP)=>function(n,...s){if(n.length===1)return n[0];let r=!1;const i=[],o=n.reduce((m,p,y)=>{/[?#]/.test(p)&&(r=!0);const v=s[y];let x=(r?encodeURIComponent:t)(""+v);return y!==s.length&&(v==null||typeof v=="object"&&v.toString===Object.getPrototypeOf(Object.getPrototypeOf(v.hasOwnProperty??ZO)??ZO)?.toString)&&(x=v+"",i.push({start:m.length+p.length,length:x.length,error:`Value of type ${Object.prototype.toString.call(v).slice(8,-1)} is not a valid path parameter`})),m+p+(y===s.length?"":x)},""),c=o.split(/[?#]/,1)[0],u=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=u.exec(c))!==null;)i.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(i.sort((m,p)=>m.start-p.start),i.length>0){let m=0;const p=i.reduce((y,v)=>{const x=" ".repeat(v.start-m),_="^".repeat(v.length);return m=v.start+v.length,y+x+_},"");throw new st(`Path parameters result in path with invalid segments:
${i.map(y=>y.error).join(`
`)}
${o}
${p}`)}return o},Ne=lle(UP);let HP=class extends et{list(e,n={},s){return this._client.getAPIList(Ne`/chat/completions/${e}/messages`,In,{query:n,...s})}};function Qy(t){return t!==void 0&&"function"in t&&t.function!==void 0}function DN(t){return t?.$brand==="auto-parseable-response-format"}function lm(t){return t?.$brand==="auto-parseable-tool"}function cle(t,e){return!e||!FP(e)?{...t,choices:t.choices.map(n=>(VP(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:BN(t,e)}function BN(t,e){const n=t.choices.map(s=>{if(s.finish_reason==="length")throw new kP;if(s.finish_reason==="content_filter")throw new CP;return VP(s.message.tool_calls),{...s,message:{...s.message,...s.message.tool_calls?{tool_calls:s.message.tool_calls?.map(r=>hle(e,r))??void 0}:void 0,parsed:s.message.content&&!s.message.refusal?ule(e,s.message.content):null}}});return{...t,choices:n}}function ule(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function hle(t,e){const n=t.tools?.find(s=>Qy(s)&&s.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:lm(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function dle(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const n=t.tools?.find(s=>Qy(s)&&s.function?.name===e.function.name);return Qy(n)&&(lm(n)||n?.function.strict||!1)}function FP(t){return DN(t.response_format)?!0:t.tools?.some(e=>lm(e)||e.type==="function"&&e.function.strict===!0)??!1}function VP(t){for(const e of t||[])if(e.type!=="function")throw new st(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function fle(t){for(const e of t??[]){if(e.type!=="function")throw new st(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new st(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const ev=t=>t?.role==="assistant",qP=t=>t?.role==="tool";var g2,O0,M0,Cf,Nf,D0,Ef,ya,Af,tv,nv,vu,KP;class LN{constructor(){g2.add(this),this.controller=new AbortController,O0.set(this,void 0),M0.set(this,()=>{}),Cf.set(this,()=>{}),Nf.set(this,void 0),D0.set(this,()=>{}),Ef.set(this,()=>{}),ya.set(this,{}),Af.set(this,!1),tv.set(this,!1),nv.set(this,!1),vu.set(this,!1),ut(this,O0,new Promise((e,n)=>{ut(this,M0,e,"f"),ut(this,Cf,n,"f")})),ut(this,Nf,new Promise((e,n)=>{ut(this,D0,e,"f"),ut(this,Ef,n,"f")})),ue(this,O0,"f").catch(()=>{}),ue(this,Nf,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},ue(this,g2,"m",KP).bind(this))},0)}_connected(){this.ended||(ue(this,M0,"f").call(this),this._emit("connect"))}get ended(){return ue(this,Af,"f")}get errored(){return ue(this,tv,"f")}get aborted(){return ue(this,nv,"f")}abort(){this.controller.abort()}on(e,n){return(ue(this,ya,"f")[e]||(ue(this,ya,"f")[e]=[])).push({listener:n}),this}off(e,n){const s=ue(this,ya,"f")[e];if(!s)return this;const r=s.findIndex(i=>i.listener===n);return r>=0&&s.splice(r,1),this}once(e,n){return(ue(this,ya,"f")[e]||(ue(this,ya,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,s)=>{ut(this,vu,!0),e!=="error"&&this.once("error",s),this.once(e,n)})}async done(){ut(this,vu,!0),await ue(this,Nf,"f")}_emit(e,...n){if(ue(this,Af,"f"))return;e==="end"&&(ut(this,Af,!0),ue(this,D0,"f").call(this));const s=ue(this,ya,"f")[e];if(s&&(ue(this,ya,"f")[e]=s.filter(r=>!r.once),s.forEach(({listener:r})=>r(...n))),e==="abort"){const r=n[0];!ue(this,vu,"f")&&!s?.length&&Promise.reject(r),ue(this,Cf,"f").call(this,r),ue(this,Ef,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=n[0];!ue(this,vu,"f")&&!s?.length&&Promise.reject(r),ue(this,Cf,"f").call(this,r),ue(this,Ef,"f").call(this,r),this._emit("end")}}_emitFinal(){}}O0=new WeakMap,M0=new WeakMap,Cf=new WeakMap,Nf=new WeakMap,D0=new WeakMap,Ef=new WeakMap,ya=new WeakMap,Af=new WeakMap,tv=new WeakMap,nv=new WeakMap,vu=new WeakMap,g2=new WeakSet,KP=function(e){if(ut(this,tv,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Zr),e instanceof Zr)return ut(this,nv,!0),this._emit("abort",e);if(e instanceof st)return this._emit("error",e);if(e instanceof Error){const n=new st(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new st(String(e)))};function ple(t){return typeof t.parse=="function"}var Rs,y2,sv,v2,b2,_2,WP,GP;const mle=10;class YP extends LN{constructor(){super(...arguments),Rs.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),qP(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(ev(e)&&e.tool_calls)for(const s of e.tool_calls)s.type==="function"&&this._emit("functionToolCall",s.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new st("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),ue(this,Rs,"m",y2).call(this)}async finalMessage(){return await this.done(),ue(this,Rs,"m",sv).call(this)}async finalFunctionToolCall(){return await this.done(),ue(this,Rs,"m",v2).call(this)}async finalFunctionToolCallResult(){return await this.done(),ue(this,Rs,"m",b2).call(this)}async totalUsage(){return await this.done(),ue(this,Rs,"m",_2).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=ue(this,Rs,"m",sv).call(this);n&&this._emit("finalMessage",n);const s=ue(this,Rs,"m",y2).call(this);s&&this._emit("finalContent",s);const r=ue(this,Rs,"m",v2).call(this);r&&this._emit("finalFunctionToolCall",r);const i=ue(this,Rs,"m",b2).call(this);i!=null&&this._emit("finalFunctionToolCallResult",i),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",ue(this,Rs,"m",_2).call(this))}async _createChatCompletion(e,n,s){const r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),ue(this,Rs,"m",WP).call(this,n);const i=await e.chat.completions.create({...n,stream:!1},{...s,signal:this.controller.signal});return this._connected(),this._addChatCompletion(BN(i,n))}async _runChatCompletion(e,n,s){for(const r of n.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,n,s)}async _runTools(e,n,s){const r="tool",{tool_choice:i="auto",stream:o,...c}=n,u=typeof i!="string"&&i.type==="function"&&i?.function?.name,{maxChatCompletions:h=mle}=s||{},m=n.tools.map(v=>{if(lm(v)){if(!v.$callback)throw new st("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:v.$callback,name:v.function.name,description:v.function.description||"",parameters:v.function.parameters,parse:v.$parseRaw,strict:!0}}}return v}),p={};for(const v of m)v.type==="function"&&(p[v.function.name||v.function.function.name]=v.function);const y="tools"in n?m.map(v=>v.type==="function"?{type:"function",function:{name:v.function.name||v.function.function.name,parameters:v.function.parameters,description:v.function.description,strict:v.function.strict}}:v):void 0;for(const v of n.messages)this._addMessage(v,!1);for(let v=0;v<h;++v){const _=(await this._createChatCompletion(e,{...c,tool_choice:i,tools:y,messages:[...this.messages]},s)).choices[0]?.message;if(!_)throw new st("missing message in ChatCompletion response");if(!_.tool_calls?.length)return;for(const S of _.tool_calls){if(S.type!=="function")continue;const k=S.id,{name:C,arguments:N}=S.function,R=p[C];if(R){if(u&&u!==C){const B=`Invalid tool_call: ${JSON.stringify(C)}. ${JSON.stringify(u)} requested. Please try again`;this._addMessage({role:r,tool_call_id:k,content:B});continue}}else{const B=`Invalid tool_call: ${JSON.stringify(C)}. Available options are: ${Object.keys(p).map(q=>JSON.stringify(q)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:k,content:B});continue}let O;try{O=ple(R)?await R.parse(N):N}catch(B){const q=B instanceof Error?B.message:String(B);this._addMessage({role:r,tool_call_id:k,content:q});continue}const E=await R.function(O,this),D=ue(this,Rs,"m",GP).call(this,E);if(this._addMessage({role:r,tool_call_id:k,content:D}),u)return}}}}Rs=new WeakSet,y2=function(){return ue(this,Rs,"m",sv).call(this).content??null},sv=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(ev(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new st("stream ended without producing a ChatCompletionMessage with role=assistant")},v2=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(ev(n)&&n?.tool_calls?.length)return n.tool_calls.filter(s=>s.type==="function").at(-1)?.function}},b2=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(qP(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(s=>s.role==="assistant"&&s.tool_calls?.some(r=>r.type==="function"&&r.id===n.tool_call_id)))return n.content}},_2=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},WP=function(e){if(e.n!=null&&e.n>1)throw new st("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},GP=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class IN extends YP{static runTools(e,n,s){const r=new IN,i={...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,n,i)),r}_addMessage(e,n=!0){super._addMessage(e,n),ev(e)&&e.content&&this._emit("content",e.content)}}const ZP=1,XP=2,JP=4,QP=8,e8=16,t8=32,n8=64,s8=128,r8=256,i8=s8|r8,a8=e8|t8|i8|n8,o8=ZP|XP|a8,l8=JP|QP,gle=o8|l8,Xn={STR:ZP,NUM:XP,ARR:JP,OBJ:QP,NULL:e8,BOOL:t8,NAN:n8,INFINITY:s8,MINUS_INFINITY:r8,INF:i8,SPECIAL:a8,ATOM:o8,COLLECTION:l8,ALL:gle};class yle extends Error{}class vle extends Error{}function ble(t,e=Xn.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return _le(t.trim(),e)}const _le=(t,e)=>{const n=t.length;let s=0;const r=y=>{throw new yle(`${y} at position ${s}`)},i=y=>{throw new vle(`${y} at position ${s}`)},o=()=>(p(),s>=n&&r("Unexpected end of input"),t[s]==='"'?c():t[s]==="{"?u():t[s]==="["?h():t.substring(s,s+4)==="null"||Xn.NULL&e&&n-s<4&&"null".startsWith(t.substring(s))?(s+=4,null):t.substring(s,s+4)==="true"||Xn.BOOL&e&&n-s<4&&"true".startsWith(t.substring(s))?(s+=4,!0):t.substring(s,s+5)==="false"||Xn.BOOL&e&&n-s<5&&"false".startsWith(t.substring(s))?(s+=5,!1):t.substring(s,s+8)==="Infinity"||Xn.INFINITY&e&&n-s<8&&"Infinity".startsWith(t.substring(s))?(s+=8,1/0):t.substring(s,s+9)==="-Infinity"||Xn.MINUS_INFINITY&e&&1<n-s&&n-s<9&&"-Infinity".startsWith(t.substring(s))?(s+=9,-1/0):t.substring(s,s+3)==="NaN"||Xn.NAN&e&&n-s<3&&"NaN".startsWith(t.substring(s))?(s+=3,NaN):m()),c=()=>{const y=s;let v=!1;for(s++;s<n&&(t[s]!=='"'||v&&t[s-1]==="\\");)v=t[s]==="\\"?!v:!1,s++;if(t.charAt(s)=='"')try{return JSON.parse(t.substring(y,++s-Number(v)))}catch(x){i(String(x))}else if(Xn.STR&e)try{return JSON.parse(t.substring(y,s-Number(v))+'"')}catch{return JSON.parse(t.substring(y,t.lastIndexOf("\\"))+'"')}r("Unterminated string literal")},u=()=>{s++,p();const y={};try{for(;t[s]!=="}";){if(p(),s>=n&&Xn.OBJ&e)return y;const v=c();p(),s++;try{const x=o();Object.defineProperty(y,v,{value:x,writable:!0,enumerable:!0,configurable:!0})}catch(x){if(Xn.OBJ&e)return y;throw x}p(),t[s]===","&&s++}}catch{if(Xn.OBJ&e)return y;r("Expected '}' at end of object")}return s++,y},h=()=>{s++;const y=[];try{for(;t[s]!=="]";)y.push(o()),p(),t[s]===","&&s++}catch{if(Xn.ARR&e)return y;r("Expected ']' at end of array")}return s++,y},m=()=>{if(s===0){t==="-"&&Xn.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(t)}catch(v){if(Xn.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}i(String(v))}}const y=s;for(t[s]==="-"&&s++;t[s]&&!",]}".includes(t[s]);)s++;s==n&&!(Xn.NUM&e)&&r("Unterminated number literal");try{return JSON.parse(t.substring(y,s))}catch{t.substring(y,s)==="-"&&Xn.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(t.substring(y,t.lastIndexOf("e")))}catch(x){i(String(x))}}},p=()=>{for(;s<n&&` 
\r	`.includes(t[s]);)s++};return o()},XO=t=>ble(t,Xn.ALL^Xn.NUM);var Un,ma,lu,go,yw,i0,vw,bw,_w,a0,xw,JO;class Np extends YP{constructor(e){super(),Un.add(this),ma.set(this,void 0),lu.set(this,void 0),go.set(this,void 0),ut(this,ma,e),ut(this,lu,[])}get currentChatCompletionSnapshot(){return ue(this,go,"f")}static fromReadableStream(e){const n=new Np(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,s){const r=new Np(n);return r._run(()=>r._runChatCompletion(e,{...n,stream:!0},{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,n,s){super._createChatCompletion;const r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),ue(this,Un,"m",yw).call(this);const i=await e.chat.completions.create({...n,stream:!0},{...s,signal:this.controller.signal});this._connected();for await(const o of i)ue(this,Un,"m",vw).call(this,o);if(i.controller.signal?.aborted)throw new Zr;return this._addChatCompletion(ue(this,Un,"m",a0).call(this))}async _fromReadableStream(e,n){const s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),ue(this,Un,"m",yw).call(this),this._connected();const r=Di.fromReadableStream(e,this.controller);let i;for await(const o of r)i&&i!==o.id&&this._addChatCompletion(ue(this,Un,"m",a0).call(this)),ue(this,Un,"m",vw).call(this,o),i=o.id;if(r.controller.signal?.aborted)throw new Zr;return this._addChatCompletion(ue(this,Un,"m",a0).call(this))}[(ma=new WeakMap,lu=new WeakMap,go=new WeakMap,Un=new WeakSet,yw=function(){this.ended||ut(this,go,void 0)},i0=function(n){let s=ue(this,lu,"f")[n.index];return s||(s={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},ue(this,lu,"f")[n.index]=s,s)},vw=function(n){if(this.ended)return;const s=ue(this,Un,"m",JO).call(this,n);this._emit("chunk",n,s);for(const r of n.choices){const i=s.choices[r.index];r.delta.content!=null&&i.message?.role==="assistant"&&i.message?.content&&(this._emit("content",r.delta.content,i.message.content),this._emit("content.delta",{delta:r.delta.content,snapshot:i.message.content,parsed:i.message.parsed})),r.delta.refusal!=null&&i.message?.role==="assistant"&&i.message?.refusal&&this._emit("refusal.delta",{delta:r.delta.refusal,snapshot:i.message.refusal}),r.logprobs?.content!=null&&i.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:r.logprobs?.content,snapshot:i.logprobs?.content??[]}),r.logprobs?.refusal!=null&&i.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:r.logprobs?.refusal,snapshot:i.logprobs?.refusal??[]});const o=ue(this,Un,"m",i0).call(this,i);i.finish_reason&&(ue(this,Un,"m",_w).call(this,i),o.current_tool_call_index!=null&&ue(this,Un,"m",bw).call(this,i,o.current_tool_call_index));for(const c of r.delta.tool_calls??[])o.current_tool_call_index!==c.index&&(ue(this,Un,"m",_w).call(this,i),o.current_tool_call_index!=null&&ue(this,Un,"m",bw).call(this,i,o.current_tool_call_index)),o.current_tool_call_index=c.index;for(const c of r.delta.tool_calls??[]){const u=i.message.tool_calls?.[c.index];u?.type&&(u?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:u.function?.name,index:c.index,arguments:u.function.arguments,parsed_arguments:u.function.parsed_arguments,arguments_delta:c.function?.arguments??""}):(u?.type,void 0))}}},bw=function(n,s){if(ue(this,Un,"m",i0).call(this,n).done_tool_calls.has(s))return;const i=n.message.tool_calls?.[s];if(!i)throw new Error("no tool call snapshot");if(!i.type)throw new Error("tool call snapshot missing `type`");if(i.type==="function"){const o=ue(this,ma,"f")?.tools?.find(c=>Qy(c)&&c.function.name===i.function.name);this._emit("tool_calls.function.arguments.done",{name:i.function.name,index:s,arguments:i.function.arguments,parsed_arguments:lm(o)?o.$parseRaw(i.function.arguments):o?.function.strict?JSON.parse(i.function.arguments):null})}else i.type},_w=function(n){const s=ue(this,Un,"m",i0).call(this,n);if(n.message.content&&!s.content_done){s.content_done=!0;const r=ue(this,Un,"m",xw).call(this);this._emit("content.done",{content:n.message.content,parsed:r?r.$parseRaw(n.message.content):null})}n.message.refusal&&!s.refusal_done&&(s.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!s.logprobs_content_done&&(s.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!s.logprobs_refusal_done&&(s.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},a0=function(){if(this.ended)throw new st("stream has ended, this shouldn't happen");const n=ue(this,go,"f");if(!n)throw new st("request ended without sending any chunks");return ut(this,go,void 0),ut(this,lu,[]),xle(n,ue(this,ma,"f"))},xw=function(){const n=ue(this,ma,"f")?.response_format;return DN(n)?n:null},JO=function(n){var s,r,i,o;let c=ue(this,go,"f");const{choices:u,...h}=n;c?Object.assign(c,h):c=ut(this,go,{...h,choices:[]});for(const{delta:m,finish_reason:p,index:y,logprobs:v=null,...x}of n.choices){let _=c.choices[y];if(_||(_=c.choices[y]={finish_reason:p,index:y,message:{},logprobs:v,...x}),v)if(!_.logprobs)_.logprobs=Object.assign({},v);else{const{content:E,refusal:D,...B}=v;Object.assign(_.logprobs,B),E&&((s=_.logprobs).content??(s.content=[]),_.logprobs.content.push(...E)),D&&((r=_.logprobs).refusal??(r.refusal=[]),_.logprobs.refusal.push(...D))}if(p&&(_.finish_reason=p,ue(this,ma,"f")&&FP(ue(this,ma,"f")))){if(p==="length")throw new kP;if(p==="content_filter")throw new CP}if(Object.assign(_,x),!m)continue;const{content:S,refusal:k,function_call:C,role:N,tool_calls:R,...O}=m;if(Object.assign(_.message,O),k&&(_.message.refusal=(_.message.refusal||"")+k),N&&(_.message.role=N),C&&(_.message.function_call?(C.name&&(_.message.function_call.name=C.name),C.arguments&&((i=_.message.function_call).arguments??(i.arguments=""),_.message.function_call.arguments+=C.arguments)):_.message.function_call=C),S&&(_.message.content=(_.message.content||"")+S,!_.message.refusal&&ue(this,Un,"m",xw).call(this)&&(_.message.parsed=XO(_.message.content))),R){_.message.tool_calls||(_.message.tool_calls=[]);for(const{index:E,id:D,type:B,function:q,...P}of R){const G=(o=_.message.tool_calls)[E]??(o[E]={});Object.assign(G,P),D&&(G.id=D),B&&(G.type=B),q&&(G.function??(G.function={name:q.name??"",arguments:""})),q?.name&&(G.function.name=q.name),q?.arguments&&(G.function.arguments+=q.arguments,dle(ue(this,ma,"f"),G)&&(G.function.parsed_arguments=XO(G.function.arguments)))}}}return c},Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("chunk",r=>{const i=n.shift();i?i.resolve(r):e.push(r)}),this.on("end",()=>{s=!0;for(const r of n)r.resolve(void 0);n.length=0}),this.on("abort",r=>{s=!0;for(const i of n)i.reject(r);n.length=0}),this.on("error",r=>{s=!0;for(const i of n)i.reject(r);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((i,o)=>n.push({resolve:i,reject:o})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Di(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function xle(t,e){const{id:n,choices:s,created:r,model:i,system_fingerprint:o,...c}=t,u={...c,id:n,choices:s.map(({message:h,finish_reason:m,index:p,logprobs:y,...v})=>{if(!m)throw new st(`missing finish_reason for choice ${p}`);const{content:x=null,function_call:_,tool_calls:S,...k}=h,C=h.role;if(!C)throw new st(`missing role for choice ${p}`);if(_){const{arguments:N,name:R}=_;if(N==null)throw new st(`missing function_call.arguments for choice ${p}`);if(!R)throw new st(`missing function_call.name for choice ${p}`);return{...v,message:{content:x,function_call:{arguments:N,name:R},role:C,refusal:h.refusal??null},finish_reason:m,index:p,logprobs:y}}return S?{...v,index:p,finish_reason:m,logprobs:y,message:{...k,role:C,content:x,refusal:h.refusal??null,tool_calls:S.map((N,R)=>{const{function:O,type:E,id:D,...B}=N,{arguments:q,name:P,...G}=O||{};if(D==null)throw new st(`missing choices[${p}].tool_calls[${R}].id
${o0(t)}`);if(E==null)throw new st(`missing choices[${p}].tool_calls[${R}].type
${o0(t)}`);if(P==null)throw new st(`missing choices[${p}].tool_calls[${R}].function.name
${o0(t)}`);if(q==null)throw new st(`missing choices[${p}].tool_calls[${R}].function.arguments
${o0(t)}`);return{...B,id:D,type:E,function:{...G,name:P,arguments:q}}})}}:{...v,message:{...k,content:x,role:C,refusal:h.refusal??null},finish_reason:m,index:p,logprobs:y}}),created:r,model:i,object:"chat.completion",...o?{system_fingerprint:o}:{}};return cle(u,e)}function o0(t){return JSON.stringify(t)}class rv extends Np{static fromReadableStream(e){const n=new rv(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,s){const r=new rv(n),i={...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,n,i)),r}}let PN=class extends et{constructor(){super(...arguments),this.messages=new HP(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(Ne`/chat/completions/${e}`,n)}update(e,n,s){return this._client.post(Ne`/chat/completions/${e}`,{body:n,...s})}list(e={},n){return this._client.getAPIList("/chat/completions",In,{query:e,...n})}delete(e,n){return this._client.delete(Ne`/chat/completions/${e}`,n)}parse(e,n){return fle(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(s=>BN(s,e))}runTools(e,n){return e.stream?rv.runTools(this._client,e,n):IN.runTools(this._client,e,n)}stream(e,n){return Np.createChatCompletion(this._client,e,n)}};PN.Messages=HP;class $N extends et{constructor(){super(...arguments),this.completions=new PN(this._client)}}$N.Completions=PN;const c8=Symbol("brand.privateNullableHeaders");function*wle(t){if(!t)return;if(c8 in t){const{values:s,nulls:r}=t;yield*s.entries();for(const i of r)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():LO(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let s of n){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const i=LO(s[1])?s[1]:[s[1]];let o=!1;for(const c of i)c!==void 0&&(e&&!o&&(o=!0,yield[r,null]),yield[r,c])}}const Ke=t=>{const e=new Headers,n=new Set;for(const s of t){const r=new Set;for(const[i,o]of wle(s)){const c=i.toLowerCase();r.has(c)||(e.delete(i),r.add(c)),o===null?(e.delete(i),n.add(c)):(e.append(i,o),n.delete(c))}}return{[c8]:!0,values:e,nulls:n}};class u8 extends et{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:Ke([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class h8 extends et{create(e,n){return this._client.post("/audio/transcriptions",rc({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class d8 extends et{create(e,n){return this._client.post("/audio/translations",rc({body:e,...n,__metadata:{model:e.model}},this._client))}}class cm extends et{constructor(){super(...arguments),this.transcriptions=new h8(this._client),this.translations=new d8(this._client),this.speech=new u8(this._client)}}cm.Transcriptions=h8;cm.Translations=d8;cm.Speech=u8;class f8 extends et{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(Ne`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",In,{query:e,...n})}cancel(e,n){return this._client.post(Ne`/batches/${e}/cancel`,n)}}class p8 extends et{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:Ke([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(Ne`/assistants/${e}`,{...n,headers:Ke([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,s){return this._client.post(Ne`/assistants/${e}`,{body:n,...s,headers:Ke([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e={},n){return this._client.getAPIList("/assistants",In,{query:e,...n,headers:Ke([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(Ne`/assistants/${e}`,{...n,headers:Ke([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let m8=class extends et{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:Ke([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class g8 extends et{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:Ke([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let Mb=class extends et{constructor(){super(...arguments),this.sessions=new m8(this._client),this.transcriptionSessions=new g8(this._client)}};Mb.Sessions=m8;Mb.TranscriptionSessions=g8;class y8 extends et{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:Ke([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(e,n){return this._client.post(Ne`/chatkit/sessions/${e}/cancel`,{...n,headers:Ke([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let v8=class extends et{retrieve(e,n){return this._client.get(Ne`/chatkit/threads/${e}`,{...n,headers:Ke([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",Jy,{query:e,...n,headers:Ke([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(e,n){return this._client.delete(Ne`/chatkit/threads/${e}`,{...n,headers:Ke([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(e,n={},s){return this._client.getAPIList(Ne`/chatkit/threads/${e}/items`,Jy,{query:n,...s,headers:Ke([{"OpenAI-Beta":"chatkit_beta=v1"},s?.headers])})}};class Db extends et{constructor(){super(...arguments),this.sessions=new y8(this._client),this.threads=new v8(this._client)}}Db.Sessions=y8;Db.Threads=v8;class b8 extends et{create(e,n,s){return this._client.post(Ne`/threads/${e}/messages`,{body:n,...s,headers:Ke([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}retrieve(e,n,s){const{thread_id:r}=n;return this._client.get(Ne`/threads/${r}/messages/${e}`,{...s,headers:Ke([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}update(e,n,s){const{thread_id:r,...i}=n;return this._client.post(Ne`/threads/${r}/messages/${e}`,{body:i,...s,headers:Ke([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n={},s){return this._client.getAPIList(Ne`/threads/${e}/messages`,In,{query:n,...s,headers:Ke([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}delete(e,n,s){const{thread_id:r}=n;return this._client.delete(Ne`/threads/${r}/messages/${e}`,{...s,headers:Ke([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}class _8 extends et{retrieve(e,n,s){const{thread_id:r,run_id:i,...o}=n;return this._client.get(Ne`/threads/${r}/runs/${i}/steps/${e}`,{query:o,...s,headers:Ke([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n,s){const{thread_id:r,...i}=n;return this._client.getAPIList(Ne`/threads/${r}/runs/${e}/steps`,In,{query:i,...s,headers:Ke([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}const Sle=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,s=new Uint8Array(n);for(let r=0;r<n;r++)s[r]=e.charCodeAt(r);return Array.from(new Float32Array(s.buffer))}};var kle={};const cu=t=>{if(typeof globalThis.process<"u")return kle?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var cs,Al,x2,Ri,B0,hi,jl,Tu,_l,iv,vr,L0,I0,Gf,jf,Tf,QO,eM,tM,nM,sM,rM,iM;class Yf extends LN{constructor(){super(...arguments),cs.add(this),x2.set(this,[]),Ri.set(this,{}),B0.set(this,{}),hi.set(this,void 0),jl.set(this,void 0),Tu.set(this,void 0),_l.set(this,void 0),iv.set(this,void 0),vr.set(this,void 0),L0.set(this,void 0),I0.set(this,void 0),Gf.set(this,void 0)}[(x2=new WeakMap,Ri=new WeakMap,B0=new WeakMap,hi=new WeakMap,jl=new WeakMap,Tu=new WeakMap,_l=new WeakMap,iv=new WeakMap,vr=new WeakMap,L0=new WeakMap,I0=new WeakMap,Gf=new WeakMap,cs=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("event",r=>{const i=n.shift();i?i.resolve(r):e.push(r)}),this.on("end",()=>{s=!0;for(const r of n)r.resolve(void 0);n.length=0}),this.on("abort",r=>{s=!0;for(const i of n)i.reject(r);n.length=0}),this.on("error",r=>{s=!0;for(const i of n)i.reject(r);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((i,o)=>n.push({resolve:i,reject:o})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new Al;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=Di.fromReadableStream(e,this.controller);for await(const i of r)ue(this,cs,"m",jf).call(this,i);if(r.controller.signal?.aborted)throw new Zr;return this._addRun(ue(this,cs,"m",Tf).call(this))}toReadableStream(){return new Di(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,s,r){const i=new Al;return i._run(()=>i._runToolAssistantStream(e,n,s,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createToolAssistantStream(e,n,s,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const o={...s,stream:!0},c=await e.submitToolOutputs(n,o,{...r,signal:this.controller.signal});this._connected();for await(const u of c)ue(this,cs,"m",jf).call(this,u);if(c.controller.signal?.aborted)throw new Zr;return this._addRun(ue(this,cs,"m",Tf).call(this))}static createThreadAssistantStream(e,n,s){const r=new Al;return r._run(()=>r._threadAssistantStream(e,n,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,n,s,r){const i=new Al;return i._run(()=>i._runAssistantStream(e,n,s,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}currentEvent(){return ue(this,L0,"f")}currentRun(){return ue(this,I0,"f")}currentMessageSnapshot(){return ue(this,hi,"f")}currentRunStepSnapshot(){return ue(this,Gf,"f")}async finalRunSteps(){return await this.done(),Object.values(ue(this,Ri,"f"))}async finalMessages(){return await this.done(),Object.values(ue(this,B0,"f"))}async finalRun(){if(await this.done(),!ue(this,jl,"f"))throw Error("Final run was not received.");return ue(this,jl,"f")}async _createThreadAssistantStream(e,n,s){const r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const i={...n,stream:!0},o=await e.createAndRun(i,{...s,signal:this.controller.signal});this._connected();for await(const c of o)ue(this,cs,"m",jf).call(this,c);if(o.controller.signal?.aborted)throw new Zr;return this._addRun(ue(this,cs,"m",Tf).call(this))}async _createAssistantStream(e,n,s,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const o={...s,stream:!0},c=await e.create(n,o,{...r,signal:this.controller.signal});this._connected();for await(const u of c)ue(this,cs,"m",jf).call(this,u);if(c.controller.signal?.aborted)throw new Zr;return this._addRun(ue(this,cs,"m",Tf).call(this))}static accumulateDelta(e,n){for(const[s,r]of Object.entries(n)){if(!e.hasOwnProperty(s)){e[s]=r;continue}let i=e[s];if(i==null){e[s]=r;continue}if(s==="index"||s==="type"){e[s]=r;continue}if(typeof i=="string"&&typeof r=="string")i+=r;else if(typeof i=="number"&&typeof r=="number")i+=r;else if(pw(i)&&pw(r))i=this.accumulateDelta(i,r);else if(Array.isArray(i)&&Array.isArray(r)){if(i.every(o=>typeof o=="string"||typeof o=="number")){i.push(...r);continue}for(const o of r){if(!pw(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const c=o.index;if(c==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof c!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${c}`);const u=i[c];u==null?i.push(o):i[c]=this.accumulateDelta(u,o)}continue}else throw Error(`Unhandled record type: ${s}, deltaValue: ${r}, accValue: ${i}`);e[s]=i}return e}_addRun(e){return e}async _threadAssistantStream(e,n,s){return await this._createThreadAssistantStream(n,e,s)}async _runAssistantStream(e,n,s,r){return await this._createAssistantStream(n,e,s,r)}async _runToolAssistantStream(e,n,s,r){return await this._createToolAssistantStream(n,e,s,r)}}Al=Yf,jf=function(e){if(!this.ended)switch(ut(this,L0,e),ue(this,cs,"m",tM).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":ue(this,cs,"m",iM).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ue(this,cs,"m",eM).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":ue(this,cs,"m",QO).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Tf=function(){if(this.ended)throw new st("stream has ended, this shouldn't happen");if(!ue(this,jl,"f"))throw Error("Final run has not been received");return ue(this,jl,"f")},QO=function(e){const[n,s]=ue(this,cs,"m",sM).call(this,e,ue(this,hi,"f"));ut(this,hi,n),ue(this,B0,"f")[n.id]=n;for(const r of s){const i=n.content[r.index];i?.type=="text"&&this._emit("textCreated",i.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const r of e.data.delta.content){if(r.type=="text"&&r.text){let i=r.text,o=n.content[r.index];if(o&&o.type=="text")this._emit("textDelta",i,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=ue(this,Tu,"f")){if(ue(this,_l,"f"))switch(ue(this,_l,"f").type){case"text":this._emit("textDone",ue(this,_l,"f").text,ue(this,hi,"f"));break;case"image_file":this._emit("imageFileDone",ue(this,_l,"f").image_file,ue(this,hi,"f"));break}ut(this,Tu,r.index)}ut(this,_l,n.content[r.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(ue(this,Tu,"f")!==void 0){const r=e.data.content[ue(this,Tu,"f")];if(r)switch(r.type){case"image_file":this._emit("imageFileDone",r.image_file,ue(this,hi,"f"));break;case"text":this._emit("textDone",r.text,ue(this,hi,"f"));break}}ue(this,hi,"f")&&this._emit("messageDone",e.data),ut(this,hi,void 0)}},eM=function(e){const n=ue(this,cs,"m",nM).call(this,e);switch(ut(this,Gf,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const s=e.data.delta;if(s.step_details&&s.step_details.type=="tool_calls"&&s.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const i of s.step_details.tool_calls)i.index==ue(this,iv,"f")?this._emit("toolCallDelta",i,n.step_details.tool_calls[i.index]):(ue(this,vr,"f")&&this._emit("toolCallDone",ue(this,vr,"f")),ut(this,iv,i.index),ut(this,vr,n.step_details.tool_calls[i.index]),ue(this,vr,"f")&&this._emit("toolCallCreated",ue(this,vr,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ut(this,Gf,void 0),e.data.step_details.type=="tool_calls"&&ue(this,vr,"f")&&(this._emit("toolCallDone",ue(this,vr,"f")),ut(this,vr,void 0)),this._emit("runStepDone",e.data,n);break}},tM=function(e){ue(this,x2,"f").push(e),this._emit("event",e)},nM=function(e){switch(e.event){case"thread.run.step.created":return ue(this,Ri,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=ue(this,Ri,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let s=e.data;if(s.delta){const r=Al.accumulateDelta(n,s.delta);ue(this,Ri,"f")[e.data.id]=r}return ue(this,Ri,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":ue(this,Ri,"f")[e.data.id]=e.data;break}if(ue(this,Ri,"f")[e.data.id])return ue(this,Ri,"f")[e.data.id];throw new Error("No snapshot available")},sM=function(e,n){let s=[];switch(e.event){case"thread.message.created":return[e.data,s];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const i of r.delta.content)if(i.index in n.content){let o=n.content[i.index];n.content[i.index]=ue(this,cs,"m",rM).call(this,i,o)}else n.content[i.index]=i,s.push(i);return[n,s];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,s];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},rM=function(e,n){return Al.accumulateDelta(n,e)},iM=function(e){switch(ut(this,I0,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":ut(this,jl,e.data),ue(this,vr,"f")&&(this._emit("toolCallDone",ue(this,vr,"f")),ut(this,vr,void 0));break}};let zN=class extends et{constructor(){super(...arguments),this.steps=new _8(this._client)}create(e,n,s){const{include:r,...i}=n;return this._client.post(Ne`/threads/${e}/runs`,{query:{include:r},body:i,...s,headers:Ke([{"OpenAI-Beta":"assistants=v2"},s?.headers]),stream:n.stream??!1})}retrieve(e,n,s){const{thread_id:r}=n;return this._client.get(Ne`/threads/${r}/runs/${e}`,{...s,headers:Ke([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}update(e,n,s){const{thread_id:r,...i}=n;return this._client.post(Ne`/threads/${r}/runs/${e}`,{body:i,...s,headers:Ke([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n={},s){return this._client.getAPIList(Ne`/threads/${e}/runs`,In,{query:n,...s,headers:Ke([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}cancel(e,n,s){const{thread_id:r}=n;return this._client.post(Ne`/threads/${r}/runs/${e}/cancel`,{...s,headers:Ke([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async createAndPoll(e,n,s){const r=await this.create(e,n,s);return await this.poll(r.id,{thread_id:e},s)}createAndStream(e,n,s){return Yf.createAssistantStream(e,this._client.beta.threads.runs,n,s)}async poll(e,n,s){const r=Ke([s?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":s?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:i,response:o}=await this.retrieve(e,n,{...s,headers:{...s?.headers,...r}}).withResponse();switch(i.status){case"queued":case"in_progress":case"cancelling":let c=5e3;if(s?.pollIntervalMs)c=s.pollIntervalMs;else{const u=o.headers.get("openai-poll-after-ms");if(u){const h=parseInt(u);isNaN(h)||(c=h)}}await om(c);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return i}}}stream(e,n,s){return Yf.createAssistantStream(e,this._client.beta.threads.runs,n,s)}submitToolOutputs(e,n,s){const{thread_id:r,...i}=n;return this._client.post(Ne`/threads/${r}/runs/${e}/submit_tool_outputs`,{body:i,...s,headers:Ke([{"OpenAI-Beta":"assistants=v2"},s?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,s){const r=await this.submitToolOutputs(e,n,s);return await this.poll(r.id,n,s)}submitToolOutputsStream(e,n,s){return Yf.createToolAssistantStream(e,this._client.beta.threads.runs,n,s)}};zN.Steps=_8;class Bb extends et{constructor(){super(...arguments),this.runs=new zN(this._client),this.messages=new b8(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:Ke([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(Ne`/threads/${e}`,{...n,headers:Ke([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,s){return this._client.post(Ne`/threads/${e}`,{body:n,...s,headers:Ke([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}delete(e,n){return this._client.delete(Ne`/threads/${e}`,{...n,headers:Ke([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:Ke([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const s=await this.createAndRun(e,n);return await this.runs.poll(s.id,{thread_id:s.thread_id},n)}createAndRunStream(e,n){return Yf.createThreadAssistantStream(e,this._client.beta.threads,n)}}Bb.Runs=zN;Bb.Messages=b8;class Th extends et{constructor(){super(...arguments),this.realtime=new Mb(this._client),this.chatkit=new Db(this._client),this.assistants=new p8(this._client),this.threads=new Bb(this._client)}}Th.Realtime=Mb;Th.ChatKit=Db;Th.Assistants=p8;Th.Threads=Bb;class x8 extends et{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class w8 extends et{retrieve(e,n,s){const{container_id:r}=n;return this._client.get(Ne`/containers/${r}/files/${e}/content`,{...s,headers:Ke([{Accept:"application/binary"},s?.headers]),__binaryResponse:!0})}}let UN=class extends et{constructor(){super(...arguments),this.content=new w8(this._client)}create(e,n,s){return this._client.post(Ne`/containers/${e}/files`,rc({body:n,...s},this._client))}retrieve(e,n,s){const{container_id:r}=n;return this._client.get(Ne`/containers/${r}/files/${e}`,s)}list(e,n={},s){return this._client.getAPIList(Ne`/containers/${e}/files`,In,{query:n,...s})}delete(e,n,s){const{container_id:r}=n;return this._client.delete(Ne`/containers/${r}/files/${e}`,{...s,headers:Ke([{Accept:"*/*"},s?.headers])})}};UN.Content=w8;class HN extends et{constructor(){super(...arguments),this.files=new UN(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(Ne`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",In,{query:e,...n})}delete(e,n){return this._client.delete(Ne`/containers/${e}`,{...n,headers:Ke([{Accept:"*/*"},n?.headers])})}}HN.Files=UN;class S8 extends et{create(e,n,s){const{include:r,...i}=n;return this._client.post(Ne`/conversations/${e}/items`,{query:{include:r},body:i,...s})}retrieve(e,n,s){const{conversation_id:r,...i}=n;return this._client.get(Ne`/conversations/${r}/items/${e}`,{query:i,...s})}list(e,n={},s){return this._client.getAPIList(Ne`/conversations/${e}/items`,Jy,{query:n,...s})}delete(e,n,s){const{conversation_id:r}=n;return this._client.delete(Ne`/conversations/${r}/items/${e}`,s)}}class FN extends et{constructor(){super(...arguments),this.items=new S8(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(Ne`/conversations/${e}`,n)}update(e,n,s){return this._client.post(Ne`/conversations/${e}`,{body:n,...s})}delete(e,n){return this._client.delete(Ne`/conversations/${e}`,n)}}FN.Items=S8;class k8 extends et{create(e,n){const s=!!e.encoding_format;let r=s?e.encoding_format:"base64";s&&ls(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const i=this._client.post("/embeddings",{body:{...e,encoding_format:r},...n});return s?i:(ls(this._client).debug("embeddings/decoding base64 embeddings from base64"),i._thenUnwrap(o=>(o&&o.data&&o.data.forEach(c=>{const u=c.embedding;c.embedding=Sle(u)}),o)))}}class C8 extends et{retrieve(e,n,s){const{eval_id:r,run_id:i}=n;return this._client.get(Ne`/evals/${r}/runs/${i}/output_items/${e}`,s)}list(e,n,s){const{eval_id:r,...i}=n;return this._client.getAPIList(Ne`/evals/${r}/runs/${e}/output_items`,In,{query:i,...s})}}class VN extends et{constructor(){super(...arguments),this.outputItems=new C8(this._client)}create(e,n,s){return this._client.post(Ne`/evals/${e}/runs`,{body:n,...s})}retrieve(e,n,s){const{eval_id:r}=n;return this._client.get(Ne`/evals/${r}/runs/${e}`,s)}list(e,n={},s){return this._client.getAPIList(Ne`/evals/${e}/runs`,In,{query:n,...s})}delete(e,n,s){const{eval_id:r}=n;return this._client.delete(Ne`/evals/${r}/runs/${e}`,s)}cancel(e,n,s){const{eval_id:r}=n;return this._client.post(Ne`/evals/${r}/runs/${e}`,s)}}VN.OutputItems=C8;class qN extends et{constructor(){super(...arguments),this.runs=new VN(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(Ne`/evals/${e}`,n)}update(e,n,s){return this._client.post(Ne`/evals/${e}`,{body:n,...s})}list(e={},n){return this._client.getAPIList("/evals",In,{query:e,...n})}delete(e,n){return this._client.delete(Ne`/evals/${e}`,n)}}qN.Runs=VN;let N8=class extends et{create(e,n){return this._client.post("/files",rc({body:e,...n},this._client))}retrieve(e,n){return this._client.get(Ne`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",In,{query:e,...n})}delete(e,n){return this._client.delete(Ne`/files/${e}`,n)}content(e,n){return this._client.get(Ne`/files/${e}/content`,{...n,headers:Ke([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:s=1800*1e3}={}){const r=new Set(["processed","error","deleted"]),i=Date.now();let o=await this.retrieve(e);for(;!o.status||!r.has(o.status);)if(await om(n),o=await this.retrieve(e),Date.now()-i>s)throw new TN({message:`Giving up on waiting for file ${e} to finish processing after ${s} milliseconds.`});return o}};class E8 extends et{}let A8=class extends et{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class KN extends et{constructor(){super(...arguments),this.graders=new A8(this._client)}}KN.Graders=A8;class j8 extends et{create(e,n,s){return this._client.getAPIList(Ne`/fine_tuning/checkpoints/${e}/permissions`,Ob,{body:n,method:"post",...s})}retrieve(e,n={},s){return this._client.get(Ne`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...s})}delete(e,n,s){const{fine_tuned_model_checkpoint:r}=n;return this._client.delete(Ne`/fine_tuning/checkpoints/${r}/permissions/${e}`,s)}}let WN=class extends et{constructor(){super(...arguments),this.permissions=new j8(this._client)}};WN.Permissions=j8;class T8 extends et{list(e,n={},s){return this._client.getAPIList(Ne`/fine_tuning/jobs/${e}/checkpoints`,In,{query:n,...s})}}class GN extends et{constructor(){super(...arguments),this.checkpoints=new T8(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(Ne`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",In,{query:e,...n})}cancel(e,n){return this._client.post(Ne`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},s){return this._client.getAPIList(Ne`/fine_tuning/jobs/${e}/events`,In,{query:n,...s})}pause(e,n){return this._client.post(Ne`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(Ne`/fine_tuning/jobs/${e}/resume`,n)}}GN.Checkpoints=T8;class Rh extends et{constructor(){super(...arguments),this.methods=new E8(this._client),this.jobs=new GN(this._client),this.checkpoints=new WN(this._client),this.alpha=new KN(this._client)}}Rh.Methods=E8;Rh.Jobs=GN;Rh.Checkpoints=WN;Rh.Alpha=KN;class R8 extends et{}class YN extends et{constructor(){super(...arguments),this.graderModels=new R8(this._client)}}YN.GraderModels=R8;class O8 extends et{createVariation(e,n){return this._client.post("/images/variations",rc({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",rc({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class M8 extends et{retrieve(e,n){return this._client.get(Ne`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",Ob,e)}delete(e,n){return this._client.delete(Ne`/models/${e}`,n)}}class D8 extends et{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class B8 extends et{accept(e,n,s){return this._client.post(Ne`/realtime/calls/${e}/accept`,{body:n,...s,headers:Ke([{Accept:"*/*"},s?.headers])})}hangup(e,n){return this._client.post(Ne`/realtime/calls/${e}/hangup`,{...n,headers:Ke([{Accept:"*/*"},n?.headers])})}refer(e,n,s){return this._client.post(Ne`/realtime/calls/${e}/refer`,{body:n,...s,headers:Ke([{Accept:"*/*"},s?.headers])})}reject(e,n={},s){return this._client.post(Ne`/realtime/calls/${e}/reject`,{body:n,...s,headers:Ke([{Accept:"*/*"},s?.headers])})}}class L8 extends et{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class Lb extends et{constructor(){super(...arguments),this.clientSecrets=new L8(this._client),this.calls=new B8(this._client)}}Lb.ClientSecrets=L8;Lb.Calls=B8;function Cle(t,e){return!e||!Ele(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(s=>({...s,parsed:null}))}:n)}:I8(t,e)}function I8(t,e){const n=t.output.map(r=>{if(r.type==="function_call")return{...r,parsed_arguments:Tle(e,r)};if(r.type==="message"){const i=r.content.map(o=>o.type==="output_text"?{...o,parsed:Nle(e,o.text)}:o);return{...r,content:i}}return r}),s=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||w2(s),Object.defineProperty(s,"output_parsed",{enumerable:!0,get(){for(const r of s.output)if(r.type==="message"){for(const i of r.content)if(i.type==="output_text"&&i.parsed!==null)return i.parsed}return null}}),s}function Nle(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function Ele(t){return!!DN(t.text?.format)}function Ale(t){return t?.$brand==="auto-parseable-tool"}function jle(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function Tle(t,e){const n=jle(t.tools??[],e.name);return{...e,...e,parsed_arguments:Ale(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function w2(t){const e=[];for(const n of t.output)if(n.type==="message")for(const s of n.content)s.type==="output_text"&&e.push(s.text);t.output_text=e.join("")}var uu,l0,yo,c0,aM,oM,lM,cM;class ZN extends LN{constructor(e){super(),uu.add(this),l0.set(this,void 0),yo.set(this,void 0),c0.set(this,void 0),ut(this,l0,e)}static createResponse(e,n,s){const r=new ZN(n);return r._run(()=>r._createOrRetrieveResponse(e,n,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createOrRetrieveResponse(e,n,s){const r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),ue(this,uu,"m",aM).call(this);let i,o=null;"response_id"in n?(i=await e.responses.retrieve(n.response_id,{stream:!0},{...s,signal:this.controller.signal,stream:!0}),o=n.starting_after??null):i=await e.responses.create({...n,stream:!0},{...s,signal:this.controller.signal}),this._connected();for await(const c of i)ue(this,uu,"m",oM).call(this,c,o);if(i.controller.signal?.aborted)throw new Zr;return ue(this,uu,"m",lM).call(this)}[(l0=new WeakMap,yo=new WeakMap,c0=new WeakMap,uu=new WeakSet,aM=function(){this.ended||ut(this,yo,void 0)},oM=function(n,s){if(this.ended)return;const r=(o,c)=>{(s==null||c.sequence_number>s)&&this._emit(o,c)},i=ue(this,uu,"m",cM).call(this,n);switch(r("event",n),n.type){case"response.output_text.delta":{const o=i.output[n.output_index];if(!o)throw new st(`missing output at index ${n.output_index}`);if(o.type==="message"){const c=o.content[n.content_index];if(!c)throw new st(`missing content at index ${n.content_index}`);if(c.type!=="output_text")throw new st(`expected content to be 'output_text', got ${c.type}`);r("response.output_text.delta",{...n,snapshot:c.text})}break}case"response.function_call_arguments.delta":{const o=i.output[n.output_index];if(!o)throw new st(`missing output at index ${n.output_index}`);o.type==="function_call"&&r("response.function_call_arguments.delta",{...n,snapshot:o.arguments});break}default:r(n.type,n);break}},lM=function(){if(this.ended)throw new st("stream has ended, this shouldn't happen");const n=ue(this,yo,"f");if(!n)throw new st("request ended without sending any events");ut(this,yo,void 0);const s=Rle(n,ue(this,l0,"f"));return ut(this,c0,s),s},cM=function(n){let s=ue(this,yo,"f");if(!s){if(n.type!=="response.created")throw new st(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return s=ut(this,yo,n.response),s}switch(n.type){case"response.output_item.added":{s.output.push(n.item);break}case"response.content_part.added":{const r=s.output[n.output_index];if(!r)throw new st(`missing output at index ${n.output_index}`);const i=r.type,o=n.part;i==="message"&&o.type!=="reasoning_text"?r.content.push(o):i==="reasoning"&&o.type==="reasoning_text"&&(r.content||(r.content=[]),r.content.push(o));break}case"response.output_text.delta":{const r=s.output[n.output_index];if(!r)throw new st(`missing output at index ${n.output_index}`);if(r.type==="message"){const i=r.content[n.content_index];if(!i)throw new st(`missing content at index ${n.content_index}`);if(i.type!=="output_text")throw new st(`expected content to be 'output_text', got ${i.type}`);i.text+=n.delta}break}case"response.function_call_arguments.delta":{const r=s.output[n.output_index];if(!r)throw new st(`missing output at index ${n.output_index}`);r.type==="function_call"&&(r.arguments+=n.delta);break}case"response.reasoning_text.delta":{const r=s.output[n.output_index];if(!r)throw new st(`missing output at index ${n.output_index}`);if(r.type==="reasoning"){const i=r.content?.[n.content_index];if(!i)throw new st(`missing content at index ${n.content_index}`);if(i.type!=="reasoning_text")throw new st(`expected content to be 'reasoning_text', got ${i.type}`);i.text+=n.delta}break}case"response.completed":{ut(this,yo,n.response);break}}return s},Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("event",r=>{const i=n.shift();i?i.resolve(r):e.push(r)}),this.on("end",()=>{s=!0;for(const r of n)r.resolve(void 0);n.length=0}),this.on("abort",r=>{s=!0;for(const i of n)i.reject(r);n.length=0}),this.on("error",r=>{s=!0;for(const i of n)i.reject(r);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((i,o)=>n.push({resolve:i,reject:o})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=ue(this,c0,"f");if(!e)throw new st("stream ended without producing a ChatCompletion");return e}}function Rle(t,e){return Cle(t,e)}class P8 extends et{list(e,n={},s){return this._client.getAPIList(Ne`/responses/${e}/input_items`,In,{query:n,...s})}}class $8 extends et{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class Ib extends et{constructor(){super(...arguments),this.inputItems=new P8(this._client),this.inputTokens=new $8(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&w2(s),s))}retrieve(e,n={},s){return this._client.get(Ne`/responses/${e}`,{query:n,...s,stream:n?.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&w2(r),r))}delete(e,n){return this._client.delete(Ne`/responses/${e}`,{...n,headers:Ke([{Accept:"*/*"},n?.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(s=>I8(s,e))}stream(e,n){return ZN.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(Ne`/responses/${e}/cancel`,n)}compact(e,n){return this._client.post("/responses/compact",{body:e,...n})}}Ib.InputItems=P8;Ib.InputTokens=$8;class z8 extends et{create(e,n,s){return this._client.post(Ne`/uploads/${e}/parts`,rc({body:n,...s},this._client))}}class XN extends et{constructor(){super(...arguments),this.parts=new z8(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(Ne`/uploads/${e}/cancel`,n)}complete(e,n,s){return this._client.post(Ne`/uploads/${e}/complete`,{body:n,...s})}}XN.Parts=z8;const Ole=async t=>{const e=await Promise.allSettled(t),n=e.filter(r=>r.status==="rejected");if(n.length){for(const r of n)console.error(r.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const s=[];for(const r of e)r.status==="fulfilled"&&s.push(r.value);return s};class U8 extends et{create(e,n,s){return this._client.post(Ne`/vector_stores/${e}/file_batches`,{body:n,...s,headers:Ke([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}retrieve(e,n,s){const{vector_store_id:r}=n;return this._client.get(Ne`/vector_stores/${r}/file_batches/${e}`,{...s,headers:Ke([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}cancel(e,n,s){const{vector_store_id:r}=n;return this._client.post(Ne`/vector_stores/${r}/file_batches/${e}/cancel`,{...s,headers:Ke([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async createAndPoll(e,n,s){const r=await this.create(e,n);return await this.poll(e,r.id,s)}listFiles(e,n,s){const{vector_store_id:r,...i}=n;return this._client.getAPIList(Ne`/vector_stores/${r}/file_batches/${e}/files`,In,{query:i,...s,headers:Ke([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async poll(e,n,s){const r=Ke([s?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":s?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:i,response:o}=await this.retrieve(n,{vector_store_id:e},{...s,headers:r}).withResponse();switch(i.status){case"in_progress":let c=5e3;if(s?.pollIntervalMs)c=s.pollIntervalMs;else{const u=o.headers.get("openai-poll-after-ms");if(u){const h=parseInt(u);isNaN(h)||(c=h)}}await om(c);break;case"failed":case"cancelled":case"completed":return i}}}async uploadAndPoll(e,{files:n,fileIds:s=[]},r){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const i=r?.maxConcurrency??5,o=Math.min(i,n.length),c=this._client,u=n.values(),h=[...s];async function m(y){for(let v of y){const x=await c.files.create({file:v,purpose:"assistants"},r);h.push(x.id)}}const p=Array(o).fill(u).map(m);return await Ole(p),await this.createAndPoll(e,{file_ids:h})}}class H8 extends et{create(e,n,s){return this._client.post(Ne`/vector_stores/${e}/files`,{body:n,...s,headers:Ke([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}retrieve(e,n,s){const{vector_store_id:r}=n;return this._client.get(Ne`/vector_stores/${r}/files/${e}`,{...s,headers:Ke([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}update(e,n,s){const{vector_store_id:r,...i}=n;return this._client.post(Ne`/vector_stores/${r}/files/${e}`,{body:i,...s,headers:Ke([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n={},s){return this._client.getAPIList(Ne`/vector_stores/${e}/files`,In,{query:n,...s,headers:Ke([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}delete(e,n,s){const{vector_store_id:r}=n;return this._client.delete(Ne`/vector_stores/${r}/files/${e}`,{...s,headers:Ke([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async createAndPoll(e,n,s){const r=await this.create(e,n,s);return await this.poll(e,r.id,s)}async poll(e,n,s){const r=Ke([s?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":s?.pollIntervalMs?.toString()??void 0}]);for(;;){const i=await this.retrieve(n,{vector_store_id:e},{...s,headers:r}).withResponse(),o=i.data;switch(o.status){case"in_progress":let c=5e3;if(s?.pollIntervalMs)c=s.pollIntervalMs;else{const u=i.response.headers.get("openai-poll-after-ms");if(u){const h=parseInt(u);isNaN(h)||(c=h)}}await om(c);break;case"failed":case"completed":return o}}}async upload(e,n,s){const r=await this._client.files.create({file:n,purpose:"assistants"},s);return this.create(e,{file_id:r.id},s)}async uploadAndPoll(e,n,s){const r=await this.upload(e,n,s);return await this.poll(e,r.id,s)}content(e,n,s){const{vector_store_id:r}=n;return this._client.getAPIList(Ne`/vector_stores/${r}/files/${e}/content`,Ob,{...s,headers:Ke([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}class Pb extends et{constructor(){super(...arguments),this.files=new H8(this._client),this.fileBatches=new U8(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:Ke([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(Ne`/vector_stores/${e}`,{...n,headers:Ke([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,s){return this._client.post(Ne`/vector_stores/${e}`,{body:n,...s,headers:Ke([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",In,{query:e,...n,headers:Ke([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(Ne`/vector_stores/${e}`,{...n,headers:Ke([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(e,n,s){return this._client.getAPIList(Ne`/vector_stores/${e}/search`,Ob,{body:n,method:"post",...s,headers:Ke([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}Pb.Files=H8;Pb.FileBatches=U8;class F8 extends et{create(e,n){return this._client.post("/videos",GO({body:e,...n},this._client))}retrieve(e,n){return this._client.get(Ne`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",Jy,{query:e,...n})}delete(e,n){return this._client.delete(Ne`/videos/${e}`,n)}downloadContent(e,n={},s){return this._client.get(Ne`/videos/${e}/content`,{query:n,...s,headers:Ke([{Accept:"application/binary"},s?.headers]),__binaryResponse:!0})}remix(e,n,s){return this._client.post(Ne`/videos/${e}/remix`,GO({body:n,...s},this._client))}}var bu,V8,P0;class q8 extends et{constructor(){super(...arguments),bu.add(this)}async unwrap(e,n,s=this._client.webhookSecret,r=300){return await this.verifySignature(e,n,s,r),JSON.parse(e)}async verifySignature(e,n,s=this._client.webhookSecret,r=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");ue(this,bu,"m",V8).call(this,s);const i=Ke([n]).values,o=ue(this,bu,"m",P0).call(this,i,"webhook-signature"),c=ue(this,bu,"m",P0).call(this,i,"webhook-timestamp"),u=ue(this,bu,"m",P0).call(this,i,"webhook-id"),h=parseInt(c,10);if(isNaN(h))throw new wf("Invalid webhook timestamp format");const m=Math.floor(Date.now()/1e3);if(m-h>r)throw new wf("Webhook timestamp is too old");if(h>m+r)throw new wf("Webhook timestamp is too new");const p=o.split(" ").map(_=>_.startsWith("v1,")?_.substring(3):_),y=s.startsWith("whsec_")?Buffer.from(s.replace("whsec_",""),"base64"):Buffer.from(s,"utf-8"),v=u?`${u}.${c}.${e}`:`${c}.${e}`,x=await crypto.subtle.importKey("raw",y,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const _ of p)try{const S=Buffer.from(_,"base64");if(await crypto.subtle.verify("HMAC",x,S,new TextEncoder().encode(v)))return}catch{continue}throw new wf("The given webhook signature does not match the expected signature")}}bu=new WeakSet,V8=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},P0=function(e,n){if(!e)throw new Error("Headers are required");const s=e.get(n);if(s==null)throw new Error(`Missing required header: ${n}`);return s};var S2,JN,$0,K8;class wt{constructor({baseURL:e=cu("OPENAI_BASE_URL"),apiKey:n=cu("OPENAI_API_KEY"),organization:s=cu("OPENAI_ORG_ID")??null,project:r=cu("OPENAI_PROJECT_ID")??null,webhookSecret:i=cu("OPENAI_WEBHOOK_SECRET")??null,...o}={}){if(S2.add(this),$0.set(this,void 0),this.completions=new x8(this),this.chat=new $N(this),this.embeddings=new k8(this),this.files=new N8(this),this.images=new O8(this),this.audio=new cm(this),this.moderations=new D8(this),this.models=new M8(this),this.fineTuning=new Rh(this),this.graders=new YN(this),this.vectorStores=new Pb(this),this.webhooks=new q8(this),this.beta=new Th(this),this.batches=new f8(this),this.uploads=new XN(this),this.responses=new Ib(this),this.realtime=new Lb(this),this.conversations=new FN(this),this.evals=new qN(this),this.containers=new HN(this),this.videos=new F8(this),n===void 0)throw new st("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const c={apiKey:n,organization:s,project:r,webhookSecret:i,...o,baseURL:e||"https://api.openai.com/v1"};if(!c.dangerouslyAllowBrowser&&Moe())throw new st(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=c.baseURL,this.timeout=c.timeout??JN.DEFAULT_TIMEOUT,this.logger=c.logger??console;const u="warn";this.logLevel=u,this.logLevel=KO(c.logLevel,"ClientOptions.logLevel",this)??KO(cu("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??u,this.fetchOptions=c.fetchOptions,this.maxRetries=c.maxRetries??2,this.fetch=c.fetch??Poe(),ut(this,$0,zoe),this._options=c,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=s,this.project=r,this.webhookSecret=i}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return Ke([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return Koe(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${yu}`}defaultIdempotencyKey(){return`stainless-node-retry-${mP()}`}makeStatusError(e,n,s,r){return vs.generate(e,n,s,r)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(s){throw s instanceof st?s:new st(`Failed to get token from 'apiKey' function: ${s.message}`,{cause:s})}if(typeof n!="string"||!n)throw new st(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,s){const r=!ue(this,S2,"m",K8).call(this)&&s||this.baseURL,i=Aoe(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return joe(o)||(n={...o,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:s}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,s){return this.request(Promise.resolve(s).then(r=>({method:e,path:n,...r})))}request(e,n=null){return new Rb(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,s){const r=await e,i=r.maxRetries??this.maxRetries;n==null&&(n=i),await this.prepareOptions(r);const{req:o,url:c,timeout:u}=await this.buildRequest(r,{retryCount:i-n});await this.prepareRequest(o,{url:c,options:r});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=s===void 0?"":`, retryOf: ${s}`,p=Date.now();if(ls(this).debug(`[${h}] sending request`,yl({retryOfRequestLogID:s,method:r.method,url:c,options:r,headers:o.headers})),r.signal?.aborted)throw new Zr;const y=new AbortController,v=await this.fetchWithTimeout(c,o,u,y).catch(h2),x=Date.now();if(v instanceof globalThis.Error){const k=`retrying, ${n} attempts remaining`;if(r.signal?.aborted)throw new Zr;const C=u2(v)||/timed? ?out/i.test(String(v)+("cause"in v?String(v.cause):""));if(n)return ls(this).info(`[${h}] connection ${C?"timed out":"failed"} - ${k}`),ls(this).debug(`[${h}] connection ${C?"timed out":"failed"} (${k})`,yl({retryOfRequestLogID:s,url:c,durationMs:x-p,message:v.message})),this.retryRequest(r,n,s??h);throw ls(this).info(`[${h}] connection ${C?"timed out":"failed"} - error; no more retries left`),ls(this).debug(`[${h}] connection ${C?"timed out":"failed"} (error; no more retries left)`,yl({retryOfRequestLogID:s,url:c,durationMs:x-p,message:v.message})),C?new TN:new jb({cause:v})}const _=[...v.headers.entries()].filter(([k])=>k==="x-request-id").map(([k,C])=>", "+k+": "+JSON.stringify(C)).join(""),S=`[${h}${m}${_}] ${o.method} ${c} ${v.ok?"succeeded":"failed"} with status ${v.status} in ${x-p}ms`;if(!v.ok){const k=await this.shouldRetry(v);if(n&&k){const D=`retrying, ${n} attempts remaining`;return await $oe(v.body),ls(this).info(`${S} - ${D}`),ls(this).debug(`[${h}] response error (${D})`,yl({retryOfRequestLogID:s,url:v.url,status:v.status,headers:v.headers,durationMs:x-p})),this.retryRequest(r,n,s??h,v.headers)}const C=k?"error; no more retries left":"error; not retryable";ls(this).info(`${S} - ${C}`);const N=await v.text().catch(D=>h2(D).message),R=Ooe(N),O=R?void 0:N;throw ls(this).debug(`[${h}] response error (${C})`,yl({retryOfRequestLogID:s,url:v.url,status:v.status,headers:v.headers,message:O,durationMs:Date.now()-p})),this.makeStatusError(v.status,R,O,v.headers)}return ls(this).info(S),ls(this).debug(`[${h}] response start`,yl({retryOfRequestLogID:s,url:v.url,status:v.status,headers:v.headers,durationMs:x-p})),{response:v,options:r,controller:y,requestLogID:h,retryOfRequestLogID:s,startTime:p}}getAPIList(e,n,s){return this.requestAPIList(n,{method:"get",path:e,...s})}requestAPIList(e,n){const s=this.makeRequest(n,null,void 0);return new tle(this,s,e)}async fetchWithTimeout(e,n,s,r){const{signal:i,method:o,...c}=n||{};i&&i.addEventListener("abort",()=>r.abort());const u=setTimeout(()=>r.abort(),s),h=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,m={signal:r.signal,...h?{duplex:"half"}:{},method:"GET",...c};o&&(m.method=o.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(u)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,s,r){let i;const o=r?.get("retry-after-ms");if(o){const u=parseFloat(o);Number.isNaN(u)||(i=u)}const c=r?.get("retry-after");if(c&&!i){const u=parseFloat(c);Number.isNaN(u)?i=Date.parse(c)-Date.now():i=u*1e3}if(!(i&&0<=i&&i<60*1e3)){const u=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,u)}return await om(i),this.makeRequest(e,n-1,s)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,o=Math.min(.5*Math.pow(2,i),8),c=1-Math.random()*.25;return o*c*1e3}async buildRequest(e,{retryCount:n=0}={}){const s={...e},{method:r,path:i,query:o,defaultBaseURL:c}=s,u=this.buildURL(i,o,c);"timeout"in s&&Roe("timeout",s.timeout),s.timeout=s.timeout??this.timeout;const{bodyHeaders:h,body:m}=this.buildBody({options:s}),p=await this.buildHeaders({options:e,method:r,bodyHeaders:h,retryCount:n});return{req:{method:r,headers:p,...s.signal&&{signal:s.signal},...globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"},...m&&{body:m},...this.fetchOptions??{},...s.fetchOptions??{}},url:u,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:s,retryCount:r}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const o=Ke([i,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...Ioe(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,s,e.headers]);return this.validateHeaders(o),o.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Ke([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:AP(e)}:ue(this,$0,"f").call(this,{body:e,headers:s})}}JN=wt,$0=new WeakMap,S2=new WeakSet,K8=function(){return this.baseURL!=="https://api.openai.com/v1"};wt.OpenAI=JN;wt.DEFAULT_TIMEOUT=6e5;wt.OpenAIError=st;wt.APIError=vs;wt.APIConnectionError=jb;wt.APIConnectionTimeoutError=TN;wt.APIUserAbortError=Zr;wt.NotFoundError=bP;wt.ConflictError=_P;wt.RateLimitError=wP;wt.BadRequestError=gP;wt.AuthenticationError=yP;wt.InternalServerError=SP;wt.PermissionDeniedError=vP;wt.UnprocessableEntityError=xP;wt.InvalidWebhookSignatureError=wf;wt.toFile=ale;wt.Completions=x8;wt.Chat=$N;wt.Embeddings=k8;wt.Files=N8;wt.Images=O8;wt.Audio=cm;wt.Moderations=D8;wt.Models=M8;wt.FineTuning=Rh;wt.Graders=YN;wt.VectorStores=Pb;wt.Webhooks=q8;wt.Beta=Th;wt.Batches=f8;wt.Uploads=XN;wt.Responses=Ib;wt.Realtime=Lb;wt.Conversations=FN;wt.Evals=qN;wt.Containers=HN;wt.Videos=F8;const Mle=new wt({baseURL:`${window.location.origin}/openai/v1`,apiKey:"not-needed",dangerouslyAllowBrowser:!0}),xl={User:"user",Assistant:"assistant",Tool:"tool"};function Dle(t){return t.map(e=>({type:"function",name:e.name,description:e.description,parameters:e.parameters,strict:!1}))}async function Ble(t,e,n,s,r){const i=[];for(const m of n)switch(m.role){case xl.User:{i.push({type:"message",role:"user",content:[{type:"input_text",text:m.content}]});break}case xl.Tool:{if(m.toolResult){const p=typeof m.toolResult.data=="string"?m.toolResult.data:JSON.stringify(m.toolResult.data);i.push({type:"function_call_output",call_id:m.toolResult.id,output:p})}break}case xl.Assistant:{if(m.toolCalls&&m.toolCalls.length>0)for(const p of m.toolCalls)i.push({type:"function_call",call_id:p.id,name:p.name,arguments:p.arguments});else i.push({type:"message",role:"assistant",content:m.content});break}}const o=Mle.responses.stream({model:t,tools:Dle(s),input:i,instructions:e});if(r){let m="";o.on("response.output_text.delta",p=>{const y=p.delta;m+=y,r(y,m)})}const c=await o.finalResponse();if(!c.output)return{role:xl.Assistant,content:""};let u="";const h=[];for(const m of c.output)if(m.type==="message"){if(m.content)for(const p of m.content)p.type==="output_text"&&(u=p.text)}else m.type==="function_call"&&m.call_id&&h.push({id:m.call_id,name:m.name,arguments:m.arguments});return{role:xl.Assistant,content:u,toolCalls:h.length>0?h:void 0}}function Lle(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Ile=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Ple=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,$le={};function uM(t,e){return($le.jsx?Ple:Ile).test(t)}const zle=/[ \t\n\f\r]/g;function Ule(t){return typeof t=="object"?t.type==="text"?hM(t.value):!1:hM(t)}function hM(t){return t.replace(zle,"")===""}class um{constructor(e,n,s){this.normal=n,this.property=e,s&&(this.space=s)}}um.prototype.normal={};um.prototype.property={};um.prototype.space=void 0;function W8(t,e){const n={},s={};for(const r of t)Object.assign(n,r.property),Object.assign(s,r.normal);return new um(n,s,e)}function k2(t){return t.toLowerCase()}class ir{constructor(e,n){this.attribute=n,this.property=e}}ir.prototype.attribute="";ir.prototype.booleanish=!1;ir.prototype.boolean=!1;ir.prototype.commaOrSpaceSeparated=!1;ir.prototype.commaSeparated=!1;ir.prototype.defined=!1;ir.prototype.mustUseProperty=!1;ir.prototype.number=!1;ir.prototype.overloadedBoolean=!1;ir.prototype.property="";ir.prototype.spaceSeparated=!1;ir.prototype.space=void 0;let Hle=0;const xt=mc(),Mn=mc(),C2=mc(),Ae=mc(),Qt=mc(),Pu=mc(),yr=mc();function mc(){return 2**++Hle}const N2=Object.freeze(Object.defineProperty({__proto__:null,boolean:xt,booleanish:Mn,commaOrSpaceSeparated:yr,commaSeparated:Pu,number:Ae,overloadedBoolean:C2,spaceSeparated:Qt},Symbol.toStringTag,{value:"Module"})),ww=Object.keys(N2);class QN extends ir{constructor(e,n,s,r){let i=-1;if(super(e,n),dM(this,"space",r),typeof s=="number")for(;++i<ww.length;){const o=ww[i];dM(this,ww[i],(s&N2[o])===N2[o])}}}QN.prototype.defined=!0;function dM(t,e,n){n&&(t[e]=n)}function Oh(t){const e={},n={};for(const[s,r]of Object.entries(t.properties)){const i=new QN(s,t.transform(t.attributes||{},s),r,t.space);t.mustUseProperty&&t.mustUseProperty.includes(s)&&(i.mustUseProperty=!0),e[s]=i,n[k2(s)]=s,n[k2(i.attribute)]=s}return new um(e,n,t.space)}const G8=Oh({properties:{ariaActiveDescendant:null,ariaAtomic:Mn,ariaAutoComplete:null,ariaBusy:Mn,ariaChecked:Mn,ariaColCount:Ae,ariaColIndex:Ae,ariaColSpan:Ae,ariaControls:Qt,ariaCurrent:null,ariaDescribedBy:Qt,ariaDetails:null,ariaDisabled:Mn,ariaDropEffect:Qt,ariaErrorMessage:null,ariaExpanded:Mn,ariaFlowTo:Qt,ariaGrabbed:Mn,ariaHasPopup:null,ariaHidden:Mn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Qt,ariaLevel:Ae,ariaLive:null,ariaModal:Mn,ariaMultiLine:Mn,ariaMultiSelectable:Mn,ariaOrientation:null,ariaOwns:Qt,ariaPlaceholder:null,ariaPosInSet:Ae,ariaPressed:Mn,ariaReadOnly:Mn,ariaRelevant:null,ariaRequired:Mn,ariaRoleDescription:Qt,ariaRowCount:Ae,ariaRowIndex:Ae,ariaRowSpan:Ae,ariaSelected:Mn,ariaSetSize:Ae,ariaSort:null,ariaValueMax:Ae,ariaValueMin:Ae,ariaValueNow:Ae,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Y8(t,e){return e in t?t[e]:e}function Z8(t,e){return Y8(t,e.toLowerCase())}const Fle=Oh({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Pu,acceptCharset:Qt,accessKey:Qt,action:null,allow:null,allowFullScreen:xt,allowPaymentRequest:xt,allowUserMedia:xt,alt:null,as:null,async:xt,autoCapitalize:null,autoComplete:Qt,autoFocus:xt,autoPlay:xt,blocking:Qt,capture:null,charSet:null,checked:xt,cite:null,className:Qt,cols:Ae,colSpan:null,content:null,contentEditable:Mn,controls:xt,controlsList:Qt,coords:Ae|Pu,crossOrigin:null,data:null,dateTime:null,decoding:null,default:xt,defer:xt,dir:null,dirName:null,disabled:xt,download:C2,draggable:Mn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:xt,formTarget:null,headers:Qt,height:Ae,hidden:C2,high:Ae,href:null,hrefLang:null,htmlFor:Qt,httpEquiv:Qt,id:null,imageSizes:null,imageSrcSet:null,inert:xt,inputMode:null,integrity:null,is:null,isMap:xt,itemId:null,itemProp:Qt,itemRef:Qt,itemScope:xt,itemType:Qt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:xt,low:Ae,manifest:null,max:null,maxLength:Ae,media:null,method:null,min:null,minLength:Ae,multiple:xt,muted:xt,name:null,nonce:null,noModule:xt,noValidate:xt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:xt,optimum:Ae,pattern:null,ping:Qt,placeholder:null,playsInline:xt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:xt,referrerPolicy:null,rel:Qt,required:xt,reversed:xt,rows:Ae,rowSpan:Ae,sandbox:Qt,scope:null,scoped:xt,seamless:xt,selected:xt,shadowRootClonable:xt,shadowRootDelegatesFocus:xt,shadowRootMode:null,shape:null,size:Ae,sizes:null,slot:null,span:Ae,spellCheck:Mn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ae,step:null,style:null,tabIndex:Ae,target:null,title:null,translate:null,type:null,typeMustMatch:xt,useMap:null,value:Mn,width:Ae,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Qt,axis:null,background:null,bgColor:null,border:Ae,borderColor:null,bottomMargin:Ae,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:xt,declare:xt,event:null,face:null,frame:null,frameBorder:null,hSpace:Ae,leftMargin:Ae,link:null,longDesc:null,lowSrc:null,marginHeight:Ae,marginWidth:Ae,noResize:xt,noHref:xt,noShade:xt,noWrap:xt,object:null,profile:null,prompt:null,rev:null,rightMargin:Ae,rules:null,scheme:null,scrolling:Mn,standby:null,summary:null,text:null,topMargin:Ae,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ae,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:xt,disableRemotePlayback:xt,prefix:null,property:null,results:Ae,security:null,unselectable:null},space:"html",transform:Z8}),Vle=Oh({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:yr,accentHeight:Ae,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ae,amplitude:Ae,arabicForm:null,ascent:Ae,attributeName:null,attributeType:null,azimuth:Ae,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ae,by:null,calcMode:null,capHeight:Ae,className:Qt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ae,diffuseConstant:Ae,direction:null,display:null,dur:null,divisor:Ae,dominantBaseline:null,download:xt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ae,enableBackground:null,end:null,event:null,exponent:Ae,externalResourcesRequired:null,fill:null,fillOpacity:Ae,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Pu,g2:Pu,glyphName:Pu,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ae,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ae,horizOriginX:Ae,horizOriginY:Ae,id:null,ideographic:Ae,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ae,k:Ae,k1:Ae,k2:Ae,k3:Ae,k4:Ae,kernelMatrix:yr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ae,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ae,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ae,overlineThickness:Ae,paintOrder:null,panose1:null,path:null,pathLength:Ae,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Qt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ae,pointsAtY:Ae,pointsAtZ:Ae,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:yr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:yr,rev:yr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:yr,requiredFeatures:yr,requiredFonts:yr,requiredFormats:yr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ae,specularExponent:Ae,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ae,strikethroughThickness:Ae,string:null,stroke:null,strokeDashArray:yr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ae,strokeOpacity:Ae,strokeWidth:null,style:null,surfaceScale:Ae,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:yr,tabIndex:Ae,tableValues:null,target:null,targetX:Ae,targetY:Ae,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:yr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ae,underlineThickness:Ae,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ae,values:null,vAlphabetic:Ae,vMathematical:Ae,vectorEffect:null,vHanging:Ae,vIdeographic:Ae,version:null,vertAdvY:Ae,vertOriginX:Ae,vertOriginY:Ae,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ae,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Y8}),X8=Oh({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),J8=Oh({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Z8}),Q8=Oh({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),qle={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Kle=/[A-Z]/g,fM=/-[a-z]/g,Wle=/^data[-\w.:]+$/i;function Gle(t,e){const n=k2(e);let s=e,r=ir;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Wle.test(e)){if(e.charAt(4)==="-"){const i=e.slice(5).replace(fM,Zle);s="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=e.slice(4);if(!fM.test(i)){let o=i.replace(Kle,Yle);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}r=QN}return new r(s,e)}function Yle(t){return"-"+t.toLowerCase()}function Zle(t){return t.charAt(1).toUpperCase()}const Xle=W8([G8,Fle,X8,J8,Q8],"html"),e4=W8([G8,Vle,X8,J8,Q8],"svg");function Jle(t){return t.join(" ").trim()}var hu={},Sw,pM;function Qle(){if(pM)return Sw;pM=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,s=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,i=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,c=/^\s+|\s+$/g,u=`
`,h="/",m="*",p="",y="comment",v="declaration";function x(S,k){if(typeof S!="string")throw new TypeError("First argument must be a string");if(!S)return[];k=k||{};var C=1,N=1;function R(Z){var W=Z.match(e);W&&(C+=W.length);var I=Z.lastIndexOf(u);N=~I?Z.length-I:N+Z.length}function O(){var Z={line:C,column:N};return function(W){return W.position=new E(Z),q(),W}}function E(Z){this.start=Z,this.end={line:C,column:N},this.source=k.source}E.prototype.content=S;function D(Z){var W=new Error(k.source+":"+C+":"+N+": "+Z);if(W.reason=Z,W.filename=k.source,W.line=C,W.column=N,W.source=S,!k.silent)throw W}function B(Z){var W=Z.exec(S);if(W){var I=W[0];return R(I),S=S.slice(I.length),W}}function q(){B(n)}function P(Z){var W;for(Z=Z||[];W=G();)W!==!1&&Z.push(W);return Z}function G(){var Z=O();if(!(h!=S.charAt(0)||m!=S.charAt(1))){for(var W=2;p!=S.charAt(W)&&(m!=S.charAt(W)||h!=S.charAt(W+1));)++W;if(W+=2,p===S.charAt(W-1))return D("End of comment missing");var I=S.slice(2,W-2);return N+=2,R(I),S=S.slice(W),N+=2,Z({type:y,comment:I})}}function z(){var Z=O(),W=B(s);if(W){if(G(),!B(r))return D("property missing ':'");var I=B(i),Y=Z({type:v,property:_(W[0].replace(t,p)),value:I?_(I[0].replace(t,p)):p});return B(o),Y}}function K(){var Z=[];P(Z);for(var W;W=z();)W!==!1&&(Z.push(W),P(Z));return Z}return q(),K()}function _(S){return S?S.replace(c,p):p}return Sw=x,Sw}var mM;function ece(){if(mM)return hu;mM=1;var t=hu&&hu.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(hu,"__esModule",{value:!0}),hu.default=n;const e=t(Qle());function n(s,r){let i=null;if(!s||typeof s!="string")return i;const o=(0,e.default)(s),c=typeof r=="function";return o.forEach(u=>{if(u.type!=="declaration")return;const{property:h,value:m}=u;c?r(h,m,u):m&&(i=i||{},i[h]=m)}),i}return hu}var Ud={},gM;function tce(){if(gM)return Ud;gM=1,Object.defineProperty(Ud,"__esModule",{value:!0}),Ud.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,s=/^-(webkit|moz|ms|o|khtml)-/,r=/^-(ms)-/,i=function(h){return!h||n.test(h)||t.test(h)},o=function(h,m){return m.toUpperCase()},c=function(h,m){return"".concat(m,"-")},u=function(h,m){return m===void 0&&(m={}),i(h)?h:(h=h.toLowerCase(),m.reactCompat?h=h.replace(r,c):h=h.replace(s,c),h.replace(e,o))};return Ud.camelCase=u,Ud}var Hd,yM;function nce(){if(yM)return Hd;yM=1;var t=Hd&&Hd.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},e=t(ece()),n=tce();function s(r,i){var o={};return!r||typeof r!="string"||(0,e.default)(r,function(c,u){c&&u&&(o[(0,n.camelCase)(c,i)]=u)}),o}return s.default=s,Hd=s,Hd}var sce=nce();const rce=L2(sce),e$=t$("end"),t4=t$("start");function t$(t){return e;function e(n){const s=n&&n.position&&n.position[t]||{};if(typeof s.line=="number"&&s.line>0&&typeof s.column=="number"&&s.column>0)return{line:s.line,column:s.column,offset:typeof s.offset=="number"&&s.offset>-1?s.offset:void 0}}}function ice(t){const e=t4(t),n=e$(t);if(e&&n)return{start:e,end:n}}function Zf(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?vM(t.position):"start"in t||"end"in t?vM(t):"line"in t||"column"in t?E2(t):""}function E2(t){return bM(t&&t.line)+":"+bM(t&&t.column)}function vM(t){return E2(t&&t.start)+"-"+E2(t&&t.end)}function bM(t){return t&&typeof t=="number"?t:1}class Es extends Error{constructor(e,n,s){super(),typeof n=="string"&&(s=n,n=void 0);let r="",i={},o=!1;if(n&&("line"in n&&"column"in n?i={place:n}:"start"in n&&"end"in n?i={place:n}:"type"in n?i={ancestors:[n],place:n.position}:i={...n}),typeof e=="string"?r=e:!i.cause&&e&&(o=!0,r=e.message,i.cause=e),!i.ruleId&&!i.source&&typeof s=="string"){const u=s.indexOf(":");u===-1?i.ruleId=s:(i.source=s.slice(0,u),i.ruleId=s.slice(u+1))}if(!i.place&&i.ancestors&&i.ancestors){const u=i.ancestors[i.ancestors.length-1];u&&(i.place=u.position)}const c=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=c?c.line:void 0,this.name=Zf(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=o&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Es.prototype.file="";Es.prototype.name="";Es.prototype.reason="";Es.prototype.message="";Es.prototype.stack="";Es.prototype.column=void 0;Es.prototype.line=void 0;Es.prototype.ancestors=void 0;Es.prototype.cause=void 0;Es.prototype.fatal=void 0;Es.prototype.place=void 0;Es.prototype.ruleId=void 0;Es.prototype.source=void 0;const n4={}.hasOwnProperty,ace=new Map,oce=/[A-Z]/g,lce=new Set(["table","tbody","thead","tfoot","tr"]),cce=new Set(["td","th"]),n$="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function uce(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let s;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");s=vce(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");s=yce(n,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:s,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?e4:Xle,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},i=s$(r,t,void 0);return i&&typeof i!="string"?i:r.create(t,r.Fragment,{children:i||void 0},void 0)}function s$(t,e,n){if(e.type==="element")return hce(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return dce(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return pce(t,e,n);if(e.type==="mdxjsEsm")return fce(t,e);if(e.type==="root")return mce(t,e,n);if(e.type==="text")return gce(t,e)}function hce(t,e,n){const s=t.schema;let r=s;e.tagName.toLowerCase()==="svg"&&s.space==="html"&&(r=e4,t.schema=r),t.ancestors.push(e);const i=i$(t,e.tagName,!1),o=bce(t,e);let c=r4(t,e);return lce.has(e.tagName)&&(c=c.filter(function(u){return typeof u=="string"?!Ule(u):!0})),r$(t,o,i,e),s4(o,c),t.ancestors.pop(),t.schema=s,t.create(e,i,o,n)}function dce(t,e){if(e.data&&e.data.estree&&t.evaluater){const s=e.data.estree.body[0];return s.type,t.evaluater.evaluateExpression(s.expression)}Ep(t,e.position)}function fce(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Ep(t,e.position)}function pce(t,e,n){const s=t.schema;let r=s;e.name==="svg"&&s.space==="html"&&(r=e4,t.schema=r),t.ancestors.push(e);const i=e.name===null?t.Fragment:i$(t,e.name,!0),o=_ce(t,e),c=r4(t,e);return r$(t,o,i,e),s4(o,c),t.ancestors.pop(),t.schema=s,t.create(e,i,o,n)}function mce(t,e,n){const s={};return s4(s,r4(t,e)),t.create(e,t.Fragment,s,n)}function gce(t,e){return e.value}function r$(t,e,n,s){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=s)}function s4(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function yce(t,e,n){return s;function s(r,i,o,c){const h=Array.isArray(o.children)?n:e;return c?h(i,o,c):h(i,o)}}function vce(t,e){return n;function n(s,r,i,o){const c=Array.isArray(i.children),u=t4(s);return e(r,i,o,c,{columnNumber:u?u.column-1:void 0,fileName:t,lineNumber:u?u.line:void 0},void 0)}}function bce(t,e){const n={};let s,r;for(r in e.properties)if(r!=="children"&&n4.call(e.properties,r)){const i=xce(t,r,e.properties[r]);if(i){const[o,c]=i;t.tableCellAlignToStyle&&o==="align"&&typeof c=="string"&&cce.has(e.tagName)?s=c:n[o]=c}}if(s){const i=n.style||(n.style={});i[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=s}return n}function _ce(t,e){const n={};for(const s of e.attributes)if(s.type==="mdxJsxExpressionAttribute")if(s.data&&s.data.estree&&t.evaluater){const i=s.data.estree.body[0];i.type;const o=i.expression;o.type;const c=o.properties[0];c.type,Object.assign(n,t.evaluater.evaluateExpression(c.argument))}else Ep(t,e.position);else{const r=s.name;let i;if(s.value&&typeof s.value=="object")if(s.value.data&&s.value.data.estree&&t.evaluater){const c=s.value.data.estree.body[0];c.type,i=t.evaluater.evaluateExpression(c.expression)}else Ep(t,e.position);else i=s.value===null?!0:s.value;n[r]=i}return n}function r4(t,e){const n=[];let s=-1;const r=t.passKeys?new Map:ace;for(;++s<e.children.length;){const i=e.children[s];let o;if(t.passKeys){const u=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(u){const h=r.get(u)||0;o=u+"-"+h,r.set(u,h+1)}}const c=s$(t,i,o);c!==void 0&&n.push(c)}return n}function xce(t,e,n){const s=Gle(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=s.commaSeparated?Lle(n):Jle(n)),s.property==="style"){let r=typeof n=="object"?n:wce(t,String(n));return t.stylePropertyNameCase==="css"&&(r=Sce(r)),["style",r]}return[t.elementAttributeNameCase==="react"&&s.space?qle[s.property]||s.property:s.attribute,n]}}function wce(t,e){try{return rce(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const s=n,r=new Es("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=t.filePath||void 0,r.url=n$+"#cannot-parse-style-attribute",r}}function i$(t,e,n){let s;if(!n)s={type:"Literal",value:e};else if(e.includes(".")){const r=e.split(".");let i=-1,o;for(;++i<r.length;){const c=uM(r[i])?{type:"Identifier",name:r[i]}:{type:"Literal",value:r[i]};o=o?{type:"MemberExpression",object:o,property:c,computed:!!(i&&c.type==="Literal"),optional:!1}:c}s=o}else s=uM(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(s.type==="Literal"){const r=s.value;return n4.call(t.components,r)?t.components[r]:r}if(t.evaluater)return t.evaluater.evaluateExpression(s);Ep(t)}function Ep(t,e){const n=new Es("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=n$+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Sce(t){const e={};let n;for(n in t)n4.call(t,n)&&(e[kce(n)]=t[n]);return e}function kce(t){let e=t.replace(oce,Cce);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function Cce(t){return"-"+t.toLowerCase()}const kw={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Nce={};function i4(t,e){const n=Nce,s=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,r=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return a$(t,s,r)}function a$(t,e,n){if(Ece(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return _M(t.children,e,n)}return Array.isArray(t)?_M(t,e,n):""}function _M(t,e,n){const s=[];let r=-1;for(;++r<t.length;)s[r]=a$(t[r],e,n);return s.join("")}function Ece(t){return!!(t&&typeof t=="object")}const xM=document.createElement("i");function a4(t){const e="&"+t+";";xM.innerHTML=e;const n=xM.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Nr(t,e,n,s){const r=t.length;let i=0,o;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,n=n>0?n:0,s.length<1e4)o=Array.from(s),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);i<s.length;)o=s.slice(i,i+1e4),o.unshift(e,0),t.splice(...o),i+=1e4,e+=1e4}function Kr(t,e){return t.length>0?(Nr(t,t.length,0,e),t):e}const wM={}.hasOwnProperty;function o$(t){const e={};let n=-1;for(;++n<t.length;)Ace(e,t[n]);return e}function Ace(t,e){let n;for(n in e){const r=(wM.call(t,n)?t[n]:void 0)||(t[n]={}),i=e[n];let o;if(i)for(o in i){wM.call(r,o)||(r[o]=[]);const c=i[o];jce(r[o],Array.isArray(c)?c:c?[c]:[])}}}function jce(t,e){let n=-1;const s=[];for(;++n<e.length;)(e[n].add==="after"?t:s).push(e[n]);Nr(t,0,0,s)}function l$(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function fi(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ds=Ko(/[A-Za-z]/),Ss=Ko(/[\dA-Za-z]/),Tce=Ko(/[#-'*+\--9=?A-Z^-~]/);function av(t){return t!==null&&(t<32||t===127)}const A2=Ko(/\d/),Rce=Ko(/[\dA-Fa-f]/),Oce=Ko(/[!-/:-@[-`{-~]/);function at(t){return t!==null&&t<-2}function Jt(t){return t!==null&&(t<0||t===32)}function Et(t){return t===-2||t===-1||t===32}const $b=Ko(new RegExp("\\p{P}|\\p{S}","u")),ic=Ko(/\s/);function Ko(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Mh(t){const e=[];let n=-1,s=0,r=0;for(;++n<t.length;){const i=t.charCodeAt(n);let o="";if(i===37&&Ss(t.charCodeAt(n+1))&&Ss(t.charCodeAt(n+2)))r=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(o=String.fromCharCode(i));else if(i>55295&&i<57344){const c=t.charCodeAt(n+1);i<56320&&c>56319&&c<57344?(o=String.fromCharCode(i,c),r=1):o=""}else o=String.fromCharCode(i);o&&(e.push(t.slice(s,n),encodeURIComponent(o)),s=n+r+1,o=""),r&&(n+=r,r=0)}return e.join("")+t.slice(s)}function Dt(t,e,n,s){const r=s?s-1:Number.POSITIVE_INFINITY;let i=0;return o;function o(u){return Et(u)?(t.enter(n),c(u)):e(u)}function c(u){return Et(u)&&i++<r?(t.consume(u),c):(t.exit(n),e(u))}}const Mce={tokenize:Dce};function Dce(t){const e=t.attempt(this.parser.constructs.contentInitial,s,r);let n;return e;function s(c){if(c===null){t.consume(c);return}return t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),Dt(t,e,"linePrefix")}function r(c){return t.enter("paragraph"),i(c)}function i(c){const u=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(c)}function o(c){if(c===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(c);return}return at(c)?(t.consume(c),t.exit("chunkText"),i):(t.consume(c),o)}}const Bce={tokenize:Lce},SM={tokenize:Ice};function Lce(t){const e=this,n=[];let s=0,r,i,o;return c;function c(N){if(s<n.length){const R=n[s];return e.containerState=R[1],t.attempt(R[0].continuation,u,h)(N)}return h(N)}function u(N){if(s++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&C();const R=e.events.length;let O=R,E;for(;O--;)if(e.events[O][0]==="exit"&&e.events[O][1].type==="chunkFlow"){E=e.events[O][1].end;break}k(s);let D=R;for(;D<e.events.length;)e.events[D][1].end={...E},D++;return Nr(e.events,O+1,0,e.events.slice(R)),e.events.length=D,h(N)}return c(N)}function h(N){if(s===n.length){if(!r)return y(N);if(r.currentConstruct&&r.currentConstruct.concrete)return x(N);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(SM,m,p)(N)}function m(N){return r&&C(),k(s),y(N)}function p(N){return e.parser.lazy[e.now().line]=s!==n.length,o=e.now().offset,x(N)}function y(N){return e.containerState={},t.attempt(SM,v,x)(N)}function v(N){return s++,n.push([e.currentConstruct,e.containerState]),y(N)}function x(N){if(N===null){r&&C(),k(0),t.consume(N);return}return r=r||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:i}),_(N)}function _(N){if(N===null){S(t.exit("chunkFlow"),!0),k(0),t.consume(N);return}return at(N)?(t.consume(N),S(t.exit("chunkFlow")),s=0,e.interrupt=void 0,c):(t.consume(N),_)}function S(N,R){const O=e.sliceStream(N);if(R&&O.push(null),N.previous=i,i&&(i.next=N),i=N,r.defineSkip(N.start),r.write(O),e.parser.lazy[N.start.line]){let E=r.events.length;for(;E--;)if(r.events[E][1].start.offset<o&&(!r.events[E][1].end||r.events[E][1].end.offset>o))return;const D=e.events.length;let B=D,q,P;for(;B--;)if(e.events[B][0]==="exit"&&e.events[B][1].type==="chunkFlow"){if(q){P=e.events[B][1].end;break}q=!0}for(k(s),E=D;E<e.events.length;)e.events[E][1].end={...P},E++;Nr(e.events,B+1,0,e.events.slice(D)),e.events.length=E}}function k(N){let R=n.length;for(;R-- >N;){const O=n[R];e.containerState=O[1],O[0].exit.call(e,t)}n.length=N}function C(){r.write([null]),i=void 0,r=void 0,e.containerState._closeFlow=void 0}}function Ice(t,e,n){return Dt(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function ih(t){if(t===null||Jt(t)||ic(t))return 1;if($b(t))return 2}function zb(t,e,n){const s=[];let r=-1;for(;++r<t.length;){const i=t[r].resolveAll;i&&!s.includes(i)&&(e=i(e,n),s.push(i))}return e}const j2={name:"attention",resolveAll:Pce,tokenize:$ce};function Pce(t,e){let n=-1,s,r,i,o,c,u,h,m;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(s=n;s--;)if(t[s][0]==="exit"&&t[s][1].type==="attentionSequence"&&t[s][1]._open&&e.sliceSerialize(t[s][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[s][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[s][1].end.offset-t[s][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;u=t[s][1].end.offset-t[s][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const p={...t[s][1].end},y={...t[n][1].start};kM(p,-u),kM(y,u),o={type:u>1?"strongSequence":"emphasisSequence",start:p,end:{...t[s][1].end}},c={type:u>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:y},i={type:u>1?"strongText":"emphasisText",start:{...t[s][1].end},end:{...t[n][1].start}},r={type:u>1?"strong":"emphasis",start:{...o.start},end:{...c.end}},t[s][1].end={...o.start},t[n][1].start={...c.end},h=[],t[s][1].end.offset-t[s][1].start.offset&&(h=Kr(h,[["enter",t[s][1],e],["exit",t[s][1],e]])),h=Kr(h,[["enter",r,e],["enter",o,e],["exit",o,e],["enter",i,e]]),h=Kr(h,zb(e.parser.constructs.insideSpan.null,t.slice(s+1,n),e)),h=Kr(h,[["exit",i,e],["enter",c,e],["exit",c,e],["exit",r,e]]),t[n][1].end.offset-t[n][1].start.offset?(m=2,h=Kr(h,[["enter",t[n][1],e],["exit",t[n][1],e]])):m=0,Nr(t,s-1,n-s+3,h),n=s+h.length-m-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function $ce(t,e){const n=this.parser.constructs.attentionMarkers.null,s=this.previous,r=ih(s);let i;return o;function o(u){return i=u,t.enter("attentionSequence"),c(u)}function c(u){if(u===i)return t.consume(u),c;const h=t.exit("attentionSequence"),m=ih(u),p=!m||m===2&&r||n.includes(u),y=!r||r===2&&m||n.includes(s);return h._open=!!(i===42?p:p&&(r||!y)),h._close=!!(i===42?y:y&&(m||!p)),e(u)}}function kM(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const zce={name:"autolink",tokenize:Uce};function Uce(t,e,n){let s=0;return r;function r(v){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(v),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),i}function i(v){return Ds(v)?(t.consume(v),o):v===64?n(v):h(v)}function o(v){return v===43||v===45||v===46||Ss(v)?(s=1,c(v)):h(v)}function c(v){return v===58?(t.consume(v),s=0,u):(v===43||v===45||v===46||Ss(v))&&s++<32?(t.consume(v),c):(s=0,h(v))}function u(v){return v===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(v),t.exit("autolinkMarker"),t.exit("autolink"),e):v===null||v===32||v===60||av(v)?n(v):(t.consume(v),u)}function h(v){return v===64?(t.consume(v),m):Tce(v)?(t.consume(v),h):n(v)}function m(v){return Ss(v)?p(v):n(v)}function p(v){return v===46?(t.consume(v),s=0,m):v===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(v),t.exit("autolinkMarker"),t.exit("autolink"),e):y(v)}function y(v){if((v===45||Ss(v))&&s++<63){const x=v===45?y:p;return t.consume(v),x}return n(v)}}const hm={partial:!0,tokenize:Hce};function Hce(t,e,n){return s;function s(i){return Et(i)?Dt(t,r,"linePrefix")(i):r(i)}function r(i){return i===null||at(i)?e(i):n(i)}}const c$={continuation:{tokenize:Vce},exit:qce,name:"blockQuote",tokenize:Fce};function Fce(t,e,n){const s=this;return r;function r(o){if(o===62){const c=s.containerState;return c.open||(t.enter("blockQuote",{_container:!0}),c.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),i}return n(o)}function i(o){return Et(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function Vce(t,e,n){const s=this;return r;function r(o){return Et(o)?Dt(t,i,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):i(o)}function i(o){return t.attempt(c$,e,n)(o)}}function qce(t){t.exit("blockQuote")}const u$={name:"characterEscape",tokenize:Kce};function Kce(t,e,n){return s;function s(i){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(i),t.exit("escapeMarker"),r}function r(i){return Oce(i)?(t.enter("characterEscapeValue"),t.consume(i),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(i)}}const h$={name:"characterReference",tokenize:Wce};function Wce(t,e,n){const s=this;let r=0,i,o;return c;function c(p){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),u}function u(p){return p===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(p),t.exit("characterReferenceMarkerNumeric"),h):(t.enter("characterReferenceValue"),i=31,o=Ss,m(p))}function h(p){return p===88||p===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(p),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),i=6,o=Rce,m):(t.enter("characterReferenceValue"),i=7,o=A2,m(p))}function m(p){if(p===59&&r){const y=t.exit("characterReferenceValue");return o===Ss&&!a4(s.sliceSerialize(y))?n(p):(t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(p)&&r++<i?(t.consume(p),m):n(p)}}const CM={partial:!0,tokenize:Yce},NM={concrete:!0,name:"codeFenced",tokenize:Gce};function Gce(t,e,n){const s=this,r={partial:!0,tokenize:O};let i=0,o=0,c;return u;function u(E){return h(E)}function h(E){const D=s.events[s.events.length-1];return i=D&&D[1].type==="linePrefix"?D[2].sliceSerialize(D[1],!0).length:0,c=E,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),m(E)}function m(E){return E===c?(o++,t.consume(E),m):o<3?n(E):(t.exit("codeFencedFenceSequence"),Et(E)?Dt(t,p,"whitespace")(E):p(E))}function p(E){return E===null||at(E)?(t.exit("codeFencedFence"),s.interrupt?e(E):t.check(CM,_,R)(E)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),y(E))}function y(E){return E===null||at(E)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),p(E)):Et(E)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Dt(t,v,"whitespace")(E)):E===96&&E===c?n(E):(t.consume(E),y)}function v(E){return E===null||at(E)?p(E):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),x(E))}function x(E){return E===null||at(E)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),p(E)):E===96&&E===c?n(E):(t.consume(E),x)}function _(E){return t.attempt(r,R,S)(E)}function S(E){return t.enter("lineEnding"),t.consume(E),t.exit("lineEnding"),k}function k(E){return i>0&&Et(E)?Dt(t,C,"linePrefix",i+1)(E):C(E)}function C(E){return E===null||at(E)?t.check(CM,_,R)(E):(t.enter("codeFlowValue"),N(E))}function N(E){return E===null||at(E)?(t.exit("codeFlowValue"),C(E)):(t.consume(E),N)}function R(E){return t.exit("codeFenced"),e(E)}function O(E,D,B){let q=0;return P;function P(W){return E.enter("lineEnding"),E.consume(W),E.exit("lineEnding"),G}function G(W){return E.enter("codeFencedFence"),Et(W)?Dt(E,z,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(W):z(W)}function z(W){return W===c?(E.enter("codeFencedFenceSequence"),K(W)):B(W)}function K(W){return W===c?(q++,E.consume(W),K):q>=o?(E.exit("codeFencedFenceSequence"),Et(W)?Dt(E,Z,"whitespace")(W):Z(W)):B(W)}function Z(W){return W===null||at(W)?(E.exit("codeFencedFence"),D(W)):B(W)}}}function Yce(t,e,n){const s=this;return r;function r(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i)}function i(o){return s.parser.lazy[s.now().line]?n(o):e(o)}}const Cw={name:"codeIndented",tokenize:Xce},Zce={partial:!0,tokenize:Jce};function Xce(t,e,n){const s=this;return r;function r(h){return t.enter("codeIndented"),Dt(t,i,"linePrefix",5)(h)}function i(h){const m=s.events[s.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?o(h):n(h)}function o(h){return h===null?u(h):at(h)?t.attempt(Zce,o,u)(h):(t.enter("codeFlowValue"),c(h))}function c(h){return h===null||at(h)?(t.exit("codeFlowValue"),o(h)):(t.consume(h),c)}function u(h){return t.exit("codeIndented"),e(h)}}function Jce(t,e,n){const s=this;return r;function r(o){return s.parser.lazy[s.now().line]?n(o):at(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),r):Dt(t,i,"linePrefix",5)(o)}function i(o){const c=s.events[s.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(o):at(o)?r(o):n(o)}}const Qce={name:"codeText",previous:tue,resolve:eue,tokenize:nue};function eue(t){let e=t.length-4,n=3,s,r;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(s=n;++s<e;)if(t[s][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(s=n-1,e++;++s<=e;)r===void 0?s!==e&&t[s][1].type!=="lineEnding"&&(r=s):(s===e||t[s][1].type==="lineEnding")&&(t[r][1].type="codeTextData",s!==r+2&&(t[r][1].end=t[s-1][1].end,t.splice(r+2,s-r-2),e-=s-r-2,s=r+2),r=void 0);return t}function tue(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function nue(t,e,n){let s=0,r,i;return o;function o(p){return t.enter("codeText"),t.enter("codeTextSequence"),c(p)}function c(p){return p===96?(t.consume(p),s++,c):(t.exit("codeTextSequence"),u(p))}function u(p){return p===null?n(p):p===32?(t.enter("space"),t.consume(p),t.exit("space"),u):p===96?(i=t.enter("codeTextSequence"),r=0,m(p)):at(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),u):(t.enter("codeTextData"),h(p))}function h(p){return p===null||p===32||p===96||at(p)?(t.exit("codeTextData"),u(p)):(t.consume(p),h)}function m(p){return p===96?(t.consume(p),r++,m):r===s?(t.exit("codeTextSequence"),t.exit("codeText"),e(p)):(i.type="codeTextData",h(p))}}class sue{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const s=n??Number.POSITIVE_INFINITY;return s<this.left.length?this.left.slice(e,s):e>this.left.length?this.right.slice(this.right.length-s+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-s+this.left.length).reverse())}splice(e,n,s){const r=n||0;this.setCursor(Math.trunc(e));const i=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return s&&Fd(this.left,s),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Fd(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Fd(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Fd(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Fd(this.left,n.reverse())}}}function Fd(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function d$(t){const e={};let n=-1,s,r,i,o,c,u,h;const m=new sue(t);for(;++n<m.length;){for(;n in e;)n=e[n];if(s=m.get(n),n&&s[1].type==="chunkFlow"&&m.get(n-1)[1].type==="listItemPrefix"&&(u=s[1]._tokenizer.events,i=0,i<u.length&&u[i][1].type==="lineEndingBlank"&&(i+=2),i<u.length&&u[i][1].type==="content"))for(;++i<u.length&&u[i][1].type!=="content";)u[i][1].type==="chunkText"&&(u[i][1]._isInFirstContentOfListItem=!0,i++);if(s[0]==="enter")s[1].contentType&&(Object.assign(e,rue(m,n)),n=e[n],h=!0);else if(s[1]._container){for(i=n,r=void 0;i--;)if(o=m.get(i),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(r&&(m.get(r)[1].type="lineEndingBlank"),o[1].type="lineEnding",r=i);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;r&&(s[1].end={...m.get(r)[1].start},c=m.slice(r,n),c.unshift(s),m.splice(r,n-r+1,c))}}return Nr(t,0,Number.POSITIVE_INFINITY,m.slice(0)),!h}function rue(t,e){const n=t.get(e)[1],s=t.get(e)[2];let r=e-1;const i=[];let o=n._tokenizer;o||(o=s.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const c=o.events,u=[],h={};let m,p,y=-1,v=n,x=0,_=0;const S=[_];for(;v;){for(;t.get(++r)[1]!==v;);i.push(r),v._tokenizer||(m=s.sliceStream(v),v.next||m.push(null),p&&o.defineSkip(v.start),v._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(m),v._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),p=v,v=v.next}for(v=n;++y<c.length;)c[y][0]==="exit"&&c[y-1][0]==="enter"&&c[y][1].type===c[y-1][1].type&&c[y][1].start.line!==c[y][1].end.line&&(_=y+1,S.push(_),v._tokenizer=void 0,v.previous=void 0,v=v.next);for(o.events=[],v?(v._tokenizer=void 0,v.previous=void 0):S.pop(),y=S.length;y--;){const k=c.slice(S[y],S[y+1]),C=i.pop();u.push([C,C+k.length-1]),t.splice(C,2,k)}for(u.reverse(),y=-1;++y<u.length;)h[x+u[y][0]]=x+u[y][1],x+=u[y][1]-u[y][0]-1;return h}const iue={resolve:oue,tokenize:lue},aue={partial:!0,tokenize:cue};function oue(t){return d$(t),t}function lue(t,e){let n;return s;function s(c){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),r(c)}function r(c){return c===null?i(c):at(c)?t.check(aue,o,i)(c):(t.consume(c),r)}function i(c){return t.exit("chunkContent"),t.exit("content"),e(c)}function o(c){return t.consume(c),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}function cue(t,e,n){const s=this;return r;function r(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Dt(t,i,"linePrefix")}function i(o){if(o===null||at(o))return n(o);const c=s.events[s.events.length-1];return!s.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(o):t.interrupt(s.parser.constructs.flow,n,e)(o)}}function f$(t,e,n,s,r,i,o,c,u){const h=u||Number.POSITIVE_INFINITY;let m=0;return p;function p(k){return k===60?(t.enter(s),t.enter(r),t.enter(i),t.consume(k),t.exit(i),y):k===null||k===32||k===41||av(k)?n(k):(t.enter(s),t.enter(o),t.enter(c),t.enter("chunkString",{contentType:"string"}),_(k))}function y(k){return k===62?(t.enter(i),t.consume(k),t.exit(i),t.exit(r),t.exit(s),e):(t.enter(c),t.enter("chunkString",{contentType:"string"}),v(k))}function v(k){return k===62?(t.exit("chunkString"),t.exit(c),y(k)):k===null||k===60||at(k)?n(k):(t.consume(k),k===92?x:v)}function x(k){return k===60||k===62||k===92?(t.consume(k),v):v(k)}function _(k){return!m&&(k===null||k===41||Jt(k))?(t.exit("chunkString"),t.exit(c),t.exit(o),t.exit(s),e(k)):m<h&&k===40?(t.consume(k),m++,_):k===41?(t.consume(k),m--,_):k===null||k===32||k===40||av(k)?n(k):(t.consume(k),k===92?S:_)}function S(k){return k===40||k===41||k===92?(t.consume(k),_):_(k)}}function p$(t,e,n,s,r,i){const o=this;let c=0,u;return h;function h(v){return t.enter(s),t.enter(r),t.consume(v),t.exit(r),t.enter(i),m}function m(v){return c>999||v===null||v===91||v===93&&!u||v===94&&!c&&"_hiddenFootnoteSupport"in o.parser.constructs?n(v):v===93?(t.exit(i),t.enter(r),t.consume(v),t.exit(r),t.exit(s),e):at(v)?(t.enter("lineEnding"),t.consume(v),t.exit("lineEnding"),m):(t.enter("chunkString",{contentType:"string"}),p(v))}function p(v){return v===null||v===91||v===93||at(v)||c++>999?(t.exit("chunkString"),m(v)):(t.consume(v),u||(u=!Et(v)),v===92?y:p)}function y(v){return v===91||v===92||v===93?(t.consume(v),c++,p):p(v)}}function m$(t,e,n,s,r,i){let o;return c;function c(y){return y===34||y===39||y===40?(t.enter(s),t.enter(r),t.consume(y),t.exit(r),o=y===40?41:y,u):n(y)}function u(y){return y===o?(t.enter(r),t.consume(y),t.exit(r),t.exit(s),e):(t.enter(i),h(y))}function h(y){return y===o?(t.exit(i),u(o)):y===null?n(y):at(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),Dt(t,h,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),m(y))}function m(y){return y===o||y===null||at(y)?(t.exit("chunkString"),h(y)):(t.consume(y),y===92?p:m)}function p(y){return y===o||y===92?(t.consume(y),m):m(y)}}function Xf(t,e){let n;return s;function s(r){return at(r)?(t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),n=!0,s):Et(r)?Dt(t,s,n?"linePrefix":"lineSuffix")(r):e(r)}}const uue={name:"definition",tokenize:due},hue={partial:!0,tokenize:fue};function due(t,e,n){const s=this;let r;return i;function i(v){return t.enter("definition"),o(v)}function o(v){return p$.call(s,t,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(v)}function c(v){return r=fi(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)),v===58?(t.enter("definitionMarker"),t.consume(v),t.exit("definitionMarker"),u):n(v)}function u(v){return Jt(v)?Xf(t,h)(v):h(v)}function h(v){return f$(t,m,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(v)}function m(v){return t.attempt(hue,p,p)(v)}function p(v){return Et(v)?Dt(t,y,"whitespace")(v):y(v)}function y(v){return v===null||at(v)?(t.exit("definition"),s.parser.defined.push(r),e(v)):n(v)}}function fue(t,e,n){return s;function s(c){return Jt(c)?Xf(t,r)(c):n(c)}function r(c){return m$(t,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function i(c){return Et(c)?Dt(t,o,"whitespace")(c):o(c)}function o(c){return c===null||at(c)?e(c):n(c)}}const pue={name:"hardBreakEscape",tokenize:mue};function mue(t,e,n){return s;function s(i){return t.enter("hardBreakEscape"),t.consume(i),r}function r(i){return at(i)?(t.exit("hardBreakEscape"),e(i)):n(i)}}const gue={name:"headingAtx",resolve:yue,tokenize:vue};function yue(t,e){let n=t.length-2,s=3,r,i;return t[s][1].type==="whitespace"&&(s+=2),n-2>s&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(s===n-1||n-4>s&&t[n-2][1].type==="whitespace")&&(n-=s+1===n?2:4),n>s&&(r={type:"atxHeadingText",start:t[s][1].start,end:t[n][1].end},i={type:"chunkText",start:t[s][1].start,end:t[n][1].end,contentType:"text"},Nr(t,s,n-s+1,[["enter",r,e],["enter",i,e],["exit",i,e],["exit",r,e]])),t}function vue(t,e,n){let s=0;return r;function r(m){return t.enter("atxHeading"),i(m)}function i(m){return t.enter("atxHeadingSequence"),o(m)}function o(m){return m===35&&s++<6?(t.consume(m),o):m===null||Jt(m)?(t.exit("atxHeadingSequence"),c(m)):n(m)}function c(m){return m===35?(t.enter("atxHeadingSequence"),u(m)):m===null||at(m)?(t.exit("atxHeading"),e(m)):Et(m)?Dt(t,c,"whitespace")(m):(t.enter("atxHeadingText"),h(m))}function u(m){return m===35?(t.consume(m),u):(t.exit("atxHeadingSequence"),c(m))}function h(m){return m===null||m===35||Jt(m)?(t.exit("atxHeadingText"),c(m)):(t.consume(m),h)}}const bue=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],EM=["pre","script","style","textarea"],_ue={concrete:!0,name:"htmlFlow",resolveTo:Sue,tokenize:kue},xue={partial:!0,tokenize:Nue},wue={partial:!0,tokenize:Cue};function Sue(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function kue(t,e,n){const s=this;let r,i,o,c,u;return h;function h(A){return m(A)}function m(A){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(A),p}function p(A){return A===33?(t.consume(A),y):A===47?(t.consume(A),i=!0,_):A===63?(t.consume(A),r=3,s.interrupt?e:j):Ds(A)?(t.consume(A),o=String.fromCharCode(A),S):n(A)}function y(A){return A===45?(t.consume(A),r=2,v):A===91?(t.consume(A),r=5,c=0,x):Ds(A)?(t.consume(A),r=4,s.interrupt?e:j):n(A)}function v(A){return A===45?(t.consume(A),s.interrupt?e:j):n(A)}function x(A){const Q="CDATA[";return A===Q.charCodeAt(c++)?(t.consume(A),c===Q.length?s.interrupt?e:z:x):n(A)}function _(A){return Ds(A)?(t.consume(A),o=String.fromCharCode(A),S):n(A)}function S(A){if(A===null||A===47||A===62||Jt(A)){const Q=A===47,se=o.toLowerCase();return!Q&&!i&&EM.includes(se)?(r=1,s.interrupt?e(A):z(A)):bue.includes(o.toLowerCase())?(r=6,Q?(t.consume(A),k):s.interrupt?e(A):z(A)):(r=7,s.interrupt&&!s.parser.lazy[s.now().line]?n(A):i?C(A):N(A))}return A===45||Ss(A)?(t.consume(A),o+=String.fromCharCode(A),S):n(A)}function k(A){return A===62?(t.consume(A),s.interrupt?e:z):n(A)}function C(A){return Et(A)?(t.consume(A),C):P(A)}function N(A){return A===47?(t.consume(A),P):A===58||A===95||Ds(A)?(t.consume(A),R):Et(A)?(t.consume(A),N):P(A)}function R(A){return A===45||A===46||A===58||A===95||Ss(A)?(t.consume(A),R):O(A)}function O(A){return A===61?(t.consume(A),E):Et(A)?(t.consume(A),O):N(A)}function E(A){return A===null||A===60||A===61||A===62||A===96?n(A):A===34||A===39?(t.consume(A),u=A,D):Et(A)?(t.consume(A),E):B(A)}function D(A){return A===u?(t.consume(A),u=null,q):A===null||at(A)?n(A):(t.consume(A),D)}function B(A){return A===null||A===34||A===39||A===47||A===60||A===61||A===62||A===96||Jt(A)?O(A):(t.consume(A),B)}function q(A){return A===47||A===62||Et(A)?N(A):n(A)}function P(A){return A===62?(t.consume(A),G):n(A)}function G(A){return A===null||at(A)?z(A):Et(A)?(t.consume(A),G):n(A)}function z(A){return A===45&&r===2?(t.consume(A),I):A===60&&r===1?(t.consume(A),Y):A===62&&r===4?(t.consume(A),M):A===63&&r===3?(t.consume(A),j):A===93&&r===5?(t.consume(A),$):at(A)&&(r===6||r===7)?(t.exit("htmlFlowData"),t.check(xue,F,K)(A)):A===null||at(A)?(t.exit("htmlFlowData"),K(A)):(t.consume(A),z)}function K(A){return t.check(wue,Z,F)(A)}function Z(A){return t.enter("lineEnding"),t.consume(A),t.exit("lineEnding"),W}function W(A){return A===null||at(A)?K(A):(t.enter("htmlFlowData"),z(A))}function I(A){return A===45?(t.consume(A),j):z(A)}function Y(A){return A===47?(t.consume(A),o="",J):z(A)}function J(A){if(A===62){const Q=o.toLowerCase();return EM.includes(Q)?(t.consume(A),M):z(A)}return Ds(A)&&o.length<8?(t.consume(A),o+=String.fromCharCode(A),J):z(A)}function $(A){return A===93?(t.consume(A),j):z(A)}function j(A){return A===62?(t.consume(A),M):A===45&&r===2?(t.consume(A),j):z(A)}function M(A){return A===null||at(A)?(t.exit("htmlFlowData"),F(A)):(t.consume(A),M)}function F(A){return t.exit("htmlFlow"),e(A)}}function Cue(t,e,n){const s=this;return r;function r(o){return at(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):n(o)}function i(o){return s.parser.lazy[s.now().line]?n(o):e(o)}}function Nue(t,e,n){return s;function s(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),t.attempt(hm,e,n)}}const Eue={name:"htmlText",tokenize:Aue};function Aue(t,e,n){const s=this;let r,i,o;return c;function c(j){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(j),u}function u(j){return j===33?(t.consume(j),h):j===47?(t.consume(j),O):j===63?(t.consume(j),N):Ds(j)?(t.consume(j),B):n(j)}function h(j){return j===45?(t.consume(j),m):j===91?(t.consume(j),i=0,x):Ds(j)?(t.consume(j),C):n(j)}function m(j){return j===45?(t.consume(j),v):n(j)}function p(j){return j===null?n(j):j===45?(t.consume(j),y):at(j)?(o=p,Y(j)):(t.consume(j),p)}function y(j){return j===45?(t.consume(j),v):p(j)}function v(j){return j===62?I(j):j===45?y(j):p(j)}function x(j){const M="CDATA[";return j===M.charCodeAt(i++)?(t.consume(j),i===M.length?_:x):n(j)}function _(j){return j===null?n(j):j===93?(t.consume(j),S):at(j)?(o=_,Y(j)):(t.consume(j),_)}function S(j){return j===93?(t.consume(j),k):_(j)}function k(j){return j===62?I(j):j===93?(t.consume(j),k):_(j)}function C(j){return j===null||j===62?I(j):at(j)?(o=C,Y(j)):(t.consume(j),C)}function N(j){return j===null?n(j):j===63?(t.consume(j),R):at(j)?(o=N,Y(j)):(t.consume(j),N)}function R(j){return j===62?I(j):N(j)}function O(j){return Ds(j)?(t.consume(j),E):n(j)}function E(j){return j===45||Ss(j)?(t.consume(j),E):D(j)}function D(j){return at(j)?(o=D,Y(j)):Et(j)?(t.consume(j),D):I(j)}function B(j){return j===45||Ss(j)?(t.consume(j),B):j===47||j===62||Jt(j)?q(j):n(j)}function q(j){return j===47?(t.consume(j),I):j===58||j===95||Ds(j)?(t.consume(j),P):at(j)?(o=q,Y(j)):Et(j)?(t.consume(j),q):I(j)}function P(j){return j===45||j===46||j===58||j===95||Ss(j)?(t.consume(j),P):G(j)}function G(j){return j===61?(t.consume(j),z):at(j)?(o=G,Y(j)):Et(j)?(t.consume(j),G):q(j)}function z(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(t.consume(j),r=j,K):at(j)?(o=z,Y(j)):Et(j)?(t.consume(j),z):(t.consume(j),Z)}function K(j){return j===r?(t.consume(j),r=void 0,W):j===null?n(j):at(j)?(o=K,Y(j)):(t.consume(j),K)}function Z(j){return j===null||j===34||j===39||j===60||j===61||j===96?n(j):j===47||j===62||Jt(j)?q(j):(t.consume(j),Z)}function W(j){return j===47||j===62||Jt(j)?q(j):n(j)}function I(j){return j===62?(t.consume(j),t.exit("htmlTextData"),t.exit("htmlText"),e):n(j)}function Y(j){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(j),t.exit("lineEnding"),J}function J(j){return Et(j)?Dt(t,$,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(j):$(j)}function $(j){return t.enter("htmlTextData"),o(j)}}const o4={name:"labelEnd",resolveAll:Oue,resolveTo:Mue,tokenize:Due},jue={tokenize:Bue},Tue={tokenize:Lue},Rue={tokenize:Iue};function Oue(t){let e=-1;const n=[];for(;++e<t.length;){const s=t[e][1];if(n.push(t[e]),s.type==="labelImage"||s.type==="labelLink"||s.type==="labelEnd"){const r=s.type==="labelImage"?4:2;s.type="data",e+=r}}return t.length!==n.length&&Nr(t,0,t.length,n),t}function Mue(t,e){let n=t.length,s=0,r,i,o,c;for(;n--;)if(r=t[n][1],i){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;t[n][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(i=n,r.type!=="labelLink")){s=2;break}}else r.type==="labelEnd"&&(o=n);const u={type:t[i][1].type==="labelLink"?"link":"image",start:{...t[i][1].start},end:{...t[t.length-1][1].end}},h={type:"label",start:{...t[i][1].start},end:{...t[o][1].end}},m={type:"labelText",start:{...t[i+s+2][1].end},end:{...t[o-2][1].start}};return c=[["enter",u,e],["enter",h,e]],c=Kr(c,t.slice(i+1,i+s+3)),c=Kr(c,[["enter",m,e]]),c=Kr(c,zb(e.parser.constructs.insideSpan.null,t.slice(i+s+4,o-3),e)),c=Kr(c,[["exit",m,e],t[o-2],t[o-1],["exit",h,e]]),c=Kr(c,t.slice(o+1)),c=Kr(c,[["exit",u,e]]),Nr(t,i,t.length,c),t}function Due(t,e,n){const s=this;let r=s.events.length,i,o;for(;r--;)if((s.events[r][1].type==="labelImage"||s.events[r][1].type==="labelLink")&&!s.events[r][1]._balanced){i=s.events[r][1];break}return c;function c(y){return i?i._inactive?p(y):(o=s.parser.defined.includes(fi(s.sliceSerialize({start:i.end,end:s.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(y),t.exit("labelMarker"),t.exit("labelEnd"),u):n(y)}function u(y){return y===40?t.attempt(jue,m,o?m:p)(y):y===91?t.attempt(Tue,m,o?h:p)(y):o?m(y):p(y)}function h(y){return t.attempt(Rue,m,p)(y)}function m(y){return e(y)}function p(y){return i._balanced=!0,n(y)}}function Bue(t,e,n){return s;function s(p){return t.enter("resource"),t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),r}function r(p){return Jt(p)?Xf(t,i)(p):i(p)}function i(p){return p===41?m(p):f$(t,o,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function o(p){return Jt(p)?Xf(t,u)(p):m(p)}function c(p){return n(p)}function u(p){return p===34||p===39||p===40?m$(t,h,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):m(p)}function h(p){return Jt(p)?Xf(t,m)(p):m(p)}function m(p){return p===41?(t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),t.exit("resource"),e):n(p)}}function Lue(t,e,n){const s=this;return r;function r(c){return p$.call(s,t,i,o,"reference","referenceMarker","referenceString")(c)}function i(c){return s.parser.defined.includes(fi(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)))?e(c):n(c)}function o(c){return n(c)}}function Iue(t,e,n){return s;function s(i){return t.enter("reference"),t.enter("referenceMarker"),t.consume(i),t.exit("referenceMarker"),r}function r(i){return i===93?(t.enter("referenceMarker"),t.consume(i),t.exit("referenceMarker"),t.exit("reference"),e):n(i)}}const Pue={name:"labelStartImage",resolveAll:o4.resolveAll,tokenize:$ue};function $ue(t,e,n){const s=this;return r;function r(c){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(c),t.exit("labelImageMarker"),i}function i(c){return c===91?(t.enter("labelMarker"),t.consume(c),t.exit("labelMarker"),t.exit("labelImage"),o):n(c)}function o(c){return c===94&&"_hiddenFootnoteSupport"in s.parser.constructs?n(c):e(c)}}const zue={name:"labelStartLink",resolveAll:o4.resolveAll,tokenize:Uue};function Uue(t,e,n){const s=this;return r;function r(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),i}function i(o){return o===94&&"_hiddenFootnoteSupport"in s.parser.constructs?n(o):e(o)}}const Nw={name:"lineEnding",tokenize:Hue};function Hue(t,e){return n;function n(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),Dt(t,e,"linePrefix")}}const z0={name:"thematicBreak",tokenize:Fue};function Fue(t,e,n){let s=0,r;return i;function i(h){return t.enter("thematicBreak"),o(h)}function o(h){return r=h,c(h)}function c(h){return h===r?(t.enter("thematicBreakSequence"),u(h)):s>=3&&(h===null||at(h))?(t.exit("thematicBreak"),e(h)):n(h)}function u(h){return h===r?(t.consume(h),s++,u):(t.exit("thematicBreakSequence"),Et(h)?Dt(t,c,"whitespace")(h):c(h))}}const Xs={continuation:{tokenize:Wue},exit:Yue,name:"list",tokenize:Kue},Vue={partial:!0,tokenize:Zue},que={partial:!0,tokenize:Gue};function Kue(t,e,n){const s=this,r=s.events[s.events.length-1];let i=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,o=0;return c;function c(v){const x=s.containerState.type||(v===42||v===43||v===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!s.containerState.marker||v===s.containerState.marker:A2(v)){if(s.containerState.type||(s.containerState.type=x,t.enter(x,{_container:!0})),x==="listUnordered")return t.enter("listItemPrefix"),v===42||v===45?t.check(z0,n,h)(v):h(v);if(!s.interrupt||v===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),u(v)}return n(v)}function u(v){return A2(v)&&++o<10?(t.consume(v),u):(!s.interrupt||o<2)&&(s.containerState.marker?v===s.containerState.marker:v===41||v===46)?(t.exit("listItemValue"),h(v)):n(v)}function h(v){return t.enter("listItemMarker"),t.consume(v),t.exit("listItemMarker"),s.containerState.marker=s.containerState.marker||v,t.check(hm,s.interrupt?n:m,t.attempt(Vue,y,p))}function m(v){return s.containerState.initialBlankLine=!0,i++,y(v)}function p(v){return Et(v)?(t.enter("listItemPrefixWhitespace"),t.consume(v),t.exit("listItemPrefixWhitespace"),y):n(v)}function y(v){return s.containerState.size=i+s.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(v)}}function Wue(t,e,n){const s=this;return s.containerState._closeFlow=void 0,t.check(hm,r,i);function r(c){return s.containerState.furtherBlankLines=s.containerState.furtherBlankLines||s.containerState.initialBlankLine,Dt(t,e,"listItemIndent",s.containerState.size+1)(c)}function i(c){return s.containerState.furtherBlankLines||!Et(c)?(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,o(c)):(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,t.attempt(que,e,o)(c))}function o(c){return s.containerState._closeFlow=!0,s.interrupt=void 0,Dt(t,t.attempt(Xs,e,n),"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function Gue(t,e,n){const s=this;return Dt(t,r,"listItemIndent",s.containerState.size+1);function r(i){const o=s.events[s.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===s.containerState.size?e(i):n(i)}}function Yue(t){t.exit(this.containerState.type)}function Zue(t,e,n){const s=this;return Dt(t,r,"listItemPrefixWhitespace",s.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(i){const o=s.events[s.events.length-1];return!Et(i)&&o&&o[1].type==="listItemPrefixWhitespace"?e(i):n(i)}}const AM={name:"setextUnderline",resolveTo:Xue,tokenize:Jue};function Xue(t,e){let n=t.length,s,r,i;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){s=n;break}t[n][1].type==="paragraph"&&(r=n)}else t[n][1].type==="content"&&t.splice(n,1),!i&&t[n][1].type==="definition"&&(i=n);const o={type:"setextHeading",start:{...t[s][1].start},end:{...t[t.length-1][1].end}};return t[r][1].type="setextHeadingText",i?(t.splice(r,0,["enter",o,e]),t.splice(i+1,0,["exit",t[s][1],e]),t[s][1].end={...t[i][1].end}):t[s][1]=o,t.push(["exit",o,e]),t}function Jue(t,e,n){const s=this;let r;return i;function i(h){let m=s.events.length,p;for(;m--;)if(s.events[m][1].type!=="lineEnding"&&s.events[m][1].type!=="linePrefix"&&s.events[m][1].type!=="content"){p=s.events[m][1].type==="paragraph";break}return!s.parser.lazy[s.now().line]&&(s.interrupt||p)?(t.enter("setextHeadingLine"),r=h,o(h)):n(h)}function o(h){return t.enter("setextHeadingLineSequence"),c(h)}function c(h){return h===r?(t.consume(h),c):(t.exit("setextHeadingLineSequence"),Et(h)?Dt(t,u,"lineSuffix")(h):u(h))}function u(h){return h===null||at(h)?(t.exit("setextHeadingLine"),e(h)):n(h)}}const Que={tokenize:ehe};function ehe(t){const e=this,n=t.attempt(hm,s,t.attempt(this.parser.constructs.flowInitial,r,Dt(t,t.attempt(this.parser.constructs.flow,r,t.attempt(iue,r)),"linePrefix")));return n;function s(i){if(i===null){t.consume(i);return}return t.enter("lineEndingBlank"),t.consume(i),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function r(i){if(i===null){t.consume(i);return}return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const the={resolveAll:y$()},nhe=g$("string"),she=g$("text");function g$(t){return{resolveAll:y$(t==="text"?rhe:void 0),tokenize:e};function e(n){const s=this,r=this.parser.constructs[t],i=n.attempt(r,o,c);return o;function o(m){return h(m)?i(m):c(m)}function c(m){if(m===null){n.consume(m);return}return n.enter("data"),n.consume(m),u}function u(m){return h(m)?(n.exit("data"),i(m)):(n.consume(m),u)}function h(m){if(m===null)return!0;const p=r[m];let y=-1;if(p)for(;++y<p.length;){const v=p[y];if(!v.previous||v.previous.call(s,s.previous))return!0}return!1}}}function y$(t){return e;function e(n,s){let r=-1,i;for(;++r<=n.length;)i===void 0?n[r]&&n[r][1].type==="data"&&(i=r,r++):(!n[r]||n[r][1].type!=="data")&&(r!==i+2&&(n[i][1].end=n[r-1][1].end,n.splice(i+2,r-i-2),r=i+2),i=void 0);return t?t(n,s):n}}function rhe(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const s=t[n-1][1],r=e.sliceStream(s);let i=r.length,o=-1,c=0,u;for(;i--;){const h=r[i];if(typeof h=="string"){for(o=h.length;h.charCodeAt(o-1)===32;)c++,o--;if(o)break;o=-1}else if(h===-2)u=!0,c++;else if(h!==-1){i++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(c=0),c){const h={type:n===t.length||u||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?o:s.start._bufferIndex+o,_index:s.start._index+i,line:s.end.line,column:s.end.column-c,offset:s.end.offset-c},end:{...s.end}};s.end={...h.start},s.start.offset===s.end.offset?Object.assign(s,h):(t.splice(n,0,["enter",h,e],["exit",h,e]),n+=2)}n++}return t}const ihe={42:Xs,43:Xs,45:Xs,48:Xs,49:Xs,50:Xs,51:Xs,52:Xs,53:Xs,54:Xs,55:Xs,56:Xs,57:Xs,62:c$},ahe={91:uue},ohe={[-2]:Cw,[-1]:Cw,32:Cw},lhe={35:gue,42:z0,45:[AM,z0],60:_ue,61:AM,95:z0,96:NM,126:NM},che={38:h$,92:u$},uhe={[-5]:Nw,[-4]:Nw,[-3]:Nw,33:Pue,38:h$,42:j2,60:[zce,Eue],91:zue,92:[pue,u$],93:o4,95:j2,96:Qce},hhe={null:[j2,the]},dhe={null:[42,95]},fhe={null:[]},phe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:dhe,contentInitial:ahe,disable:fhe,document:ihe,flow:lhe,flowInitial:ohe,insideSpan:hhe,string:che,text:uhe},Symbol.toStringTag,{value:"Module"}));function mhe(t,e,n){let s={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const r={},i=[];let o=[],c=[];const u={attempt:D(O),check:D(E),consume:C,enter:N,exit:R,interrupt:D(E,{interrupt:!0})},h={code:null,containerState:{},defineSkip:_,events:[],now:x,parser:t,previous:null,sliceSerialize:y,sliceStream:v,write:p};let m=e.tokenize.call(h,u);return e.resolveAll&&i.push(e),h;function p(G){return o=Kr(o,G),S(),o[o.length-1]!==null?[]:(B(e,0),h.events=zb(i,h.events,h),h.events)}function y(G,z){return yhe(v(G),z)}function v(G){return ghe(o,G)}function x(){const{_bufferIndex:G,_index:z,line:K,column:Z,offset:W}=s;return{_bufferIndex:G,_index:z,line:K,column:Z,offset:W}}function _(G){r[G.line]=G.column,P()}function S(){let G;for(;s._index<o.length;){const z=o[s._index];if(typeof z=="string")for(G=s._index,s._bufferIndex<0&&(s._bufferIndex=0);s._index===G&&s._bufferIndex<z.length;)k(z.charCodeAt(s._bufferIndex));else k(z)}}function k(G){m=m(G)}function C(G){at(G)?(s.line++,s.column=1,s.offset+=G===-3?2:1,P()):G!==-1&&(s.column++,s.offset++),s._bufferIndex<0?s._index++:(s._bufferIndex++,s._bufferIndex===o[s._index].length&&(s._bufferIndex=-1,s._index++)),h.previous=G}function N(G,z){const K=z||{};return K.type=G,K.start=x(),h.events.push(["enter",K,h]),c.push(K),K}function R(G){const z=c.pop();return z.end=x(),h.events.push(["exit",z,h]),z}function O(G,z){B(G,z.from)}function E(G,z){z.restore()}function D(G,z){return K;function K(Z,W,I){let Y,J,$,j;return Array.isArray(Z)?F(Z):"tokenize"in Z?F([Z]):M(Z);function M(X){return ae;function ae(ke){const Se=ke!==null&&X[ke],Ve=ke!==null&&X.null,Le=[...Array.isArray(Se)?Se:Se?[Se]:[],...Array.isArray(Ve)?Ve:Ve?[Ve]:[]];return F(Le)(ke)}}function F(X){return Y=X,J=0,X.length===0?I:A(X[J])}function A(X){return ae;function ae(ke){return j=q(),$=X,X.partial||(h.currentConstruct=X),X.name&&h.parser.constructs.disable.null.includes(X.name)?se():X.tokenize.call(z?Object.assign(Object.create(h),z):h,u,Q,se)(ke)}}function Q(X){return G($,j),W}function se(X){return j.restore(),++J<Y.length?A(Y[J]):I}}}function B(G,z){G.resolveAll&&!i.includes(G)&&i.push(G),G.resolve&&Nr(h.events,z,h.events.length-z,G.resolve(h.events.slice(z),h)),G.resolveTo&&(h.events=G.resolveTo(h.events,h))}function q(){const G=x(),z=h.previous,K=h.currentConstruct,Z=h.events.length,W=Array.from(c);return{from:Z,restore:I};function I(){s=G,h.previous=z,h.currentConstruct=K,h.events.length=Z,c=W,P()}}function P(){s.line in r&&s.column<2&&(s.column=r[s.line],s.offset+=r[s.line]-1)}}function ghe(t,e){const n=e.start._index,s=e.start._bufferIndex,r=e.end._index,i=e.end._bufferIndex;let o;if(n===r)o=[t[n].slice(s,i)];else{if(o=t.slice(n,r),s>-1){const c=o[0];typeof c=="string"?o[0]=c.slice(s):o.shift()}i>0&&o.push(t[r].slice(0,i))}return o}function yhe(t,e){let n=-1;const s=[];let r;for(;++n<t.length;){const i=t[n];let o;if(typeof i=="string")o=i;else switch(i){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&r)continue;o=" ";break}default:o=String.fromCharCode(i)}r=i===-2,s.push(o)}return s.join("")}function vhe(t){const s={constructs:o$([phe,...(t||{}).extensions||[]]),content:r(Mce),defined:[],document:r(Bce),flow:r(Que),lazy:{},string:r(nhe),text:r(she)};return s;function r(i){return o;function o(c){return mhe(s,i,c)}}}function bhe(t){for(;!d$(t););return t}const jM=/[\0\t\n\r]/g;function _he(){let t=1,e="",n=!0,s;return r;function r(i,o,c){const u=[];let h,m,p,y,v;for(i=e+(typeof i=="string"?i.toString():new TextDecoder(o||void 0).decode(i)),p=0,e="",n&&(i.charCodeAt(0)===65279&&p++,n=void 0);p<i.length;){if(jM.lastIndex=p,h=jM.exec(i),y=h&&h.index!==void 0?h.index:i.length,v=i.charCodeAt(y),!h){e=i.slice(p);break}if(v===10&&p===y&&s)u.push(-3),s=void 0;else switch(s&&(u.push(-5),s=void 0),p<y&&(u.push(i.slice(p,y)),t+=y-p),v){case 0:{u.push(65533),t++;break}case 9:{for(m=Math.ceil(t/4)*4,u.push(-2);t++<m;)u.push(-1);break}case 10:{u.push(-4),t=1;break}default:s=!0,t=1}p=y+1}return c&&(s&&u.push(-5),e&&u.push(e),u.push(null)),u}}const xhe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function whe(t){return t.replace(xhe,She)}function She(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const r=n.charCodeAt(1),i=r===120||r===88;return l$(n.slice(i?2:1),i?16:10)}return a4(n)||t}const v$={}.hasOwnProperty;function khe(t,e,n){return typeof e!="string"&&(n=e,e=void 0),Che(n)(bhe(vhe(n).document().write(_he()(t,e,!0))))}function Che(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(qt),autolinkProtocol:q,autolinkEmail:q,atxHeading:i(Rt),blockQuote:i(Ve),characterEscape:q,characterReference:q,codeFenced:i(Le),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:i(Le,o),codeText:i(rt,o),codeTextData:q,data:q,codeFlowValue:q,definition:i(Ye),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:i(Je),hardBreakEscape:i(At),hardBreakTrailing:i(At),htmlFlow:i(Zt,o),htmlFlowData:q,htmlText:i(Zt,o),htmlTextData:q,image:i(on),label:o,link:i(qt),listItem:i(je),listItemValue:y,listOrdered:i(tn,p),listUnordered:i(tn),paragraph:i(We),reference:A,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:i(Rt),strong:i(Qe),thematicBreak:i(Mt)},exit:{atxHeading:u(),atxHeadingSequence:O,autolink:u(),autolinkEmail:Se,autolinkProtocol:ke,blockQuote:u(),characterEscapeValue:P,characterReferenceMarkerHexadecimal:se,characterReferenceMarkerNumeric:se,characterReferenceValue:X,characterReference:ae,codeFenced:u(S),codeFencedFence:_,codeFencedFenceInfo:v,codeFencedFenceMeta:x,codeFlowValue:P,codeIndented:u(k),codeText:u(W),codeTextData:P,data:P,definition:u(),definitionDestinationString:R,definitionLabelString:C,definitionTitleString:N,emphasis:u(),hardBreakEscape:u(z),hardBreakTrailing:u(z),htmlFlow:u(K),htmlFlowData:P,htmlText:u(Z),htmlTextData:P,image:u(Y),label:$,labelText:J,lineEnding:G,link:u(I),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:Q,resourceDestinationString:j,resourceTitleString:M,resource:F,setextHeading:u(B),setextHeadingLineSequence:D,setextHeadingText:E,strong:u(),thematicBreak:u()}};b$(e,(t||{}).mdastExtensions||[]);const n={};return s;function s(fe){let xe={type:"root",children:[]};const Ge={stack:[xe],tokenStack:[],config:e,enter:c,exit:h,buffer:o,resume:m,data:n},it=[];let pt=-1;for(;++pt<fe.length;)if(fe[pt][1].type==="listOrdered"||fe[pt][1].type==="listUnordered")if(fe[pt][0]==="enter")it.push(pt);else{const ln=it.pop();pt=r(fe,ln,pt)}for(pt=-1;++pt<fe.length;){const ln=e[fe[pt][0]];v$.call(ln,fe[pt][1].type)&&ln[fe[pt][1].type].call(Object.assign({sliceSerialize:fe[pt][2].sliceSerialize},Ge),fe[pt][1])}if(Ge.tokenStack.length>0){const ln=Ge.tokenStack[Ge.tokenStack.length-1];(ln[1]||TM).call(Ge,void 0,ln[0])}for(xe.position={start:vo(fe.length>0?fe[0][1].start:{line:1,column:1,offset:0}),end:vo(fe.length>0?fe[fe.length-2][1].end:{line:1,column:1,offset:0})},pt=-1;++pt<e.transforms.length;)xe=e.transforms[pt](xe)||xe;return xe}function r(fe,xe,Ge){let it=xe-1,pt=-1,ln=!1,re,oe,de,Ce;for(;++it<=Ge;){const me=fe[it];switch(me[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{me[0]==="enter"?pt++:pt--,Ce=void 0;break}case"lineEndingBlank":{me[0]==="enter"&&(re&&!Ce&&!pt&&!de&&(de=it),Ce=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ce=void 0}if(!pt&&me[0]==="enter"&&me[1].type==="listItemPrefix"||pt===-1&&me[0]==="exit"&&(me[1].type==="listUnordered"||me[1].type==="listOrdered")){if(re){let ze=it;for(oe=void 0;ze--;){const lt=fe[ze];if(lt[1].type==="lineEnding"||lt[1].type==="lineEndingBlank"){if(lt[0]==="exit")continue;oe&&(fe[oe][1].type="lineEndingBlank",ln=!0),lt[1].type="lineEnding",oe=ze}else if(!(lt[1].type==="linePrefix"||lt[1].type==="blockQuotePrefix"||lt[1].type==="blockQuotePrefixWhitespace"||lt[1].type==="blockQuoteMarker"||lt[1].type==="listItemIndent"))break}de&&(!oe||de<oe)&&(re._spread=!0),re.end=Object.assign({},oe?fe[oe][1].start:me[1].end),fe.splice(oe||it,0,["exit",re,me[2]]),it++,Ge++}if(me[1].type==="listItemPrefix"){const ze={type:"listItem",_spread:!1,start:Object.assign({},me[1].start),end:void 0};re=ze,fe.splice(it,0,["enter",ze,me[2]]),it++,Ge++,de=void 0,Ce=!0}}}return fe[xe][1]._spread=ln,Ge}function i(fe,xe){return Ge;function Ge(it){c.call(this,fe(it),it),xe&&xe.call(this,it)}}function o(){this.stack.push({type:"fragment",children:[]})}function c(fe,xe,Ge){this.stack[this.stack.length-1].children.push(fe),this.stack.push(fe),this.tokenStack.push([xe,Ge||void 0]),fe.position={start:vo(xe.start),end:void 0}}function u(fe){return xe;function xe(Ge){fe&&fe.call(this,Ge),h.call(this,Ge)}}function h(fe,xe){const Ge=this.stack.pop(),it=this.tokenStack.pop();if(it)it[0].type!==fe.type&&(xe?xe.call(this,fe,it[0]):(it[1]||TM).call(this,fe,it[0]));else throw new Error("Cannot close `"+fe.type+"` ("+Zf({start:fe.start,end:fe.end})+"): its not open");Ge.position.end=vo(fe.end)}function m(){return i4(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function y(fe){if(this.data.expectingFirstListItemValue){const xe=this.stack[this.stack.length-2];xe.start=Number.parseInt(this.sliceSerialize(fe),10),this.data.expectingFirstListItemValue=void 0}}function v(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.lang=fe}function x(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.meta=fe}function _(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function S(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.value=fe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function k(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.value=fe.replace(/(\r?\n|\r)$/g,"")}function C(fe){const xe=this.resume(),Ge=this.stack[this.stack.length-1];Ge.label=xe,Ge.identifier=fi(this.sliceSerialize(fe)).toLowerCase()}function N(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.title=fe}function R(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.url=fe}function O(fe){const xe=this.stack[this.stack.length-1];if(!xe.depth){const Ge=this.sliceSerialize(fe).length;xe.depth=Ge}}function E(){this.data.setextHeadingSlurpLineEnding=!0}function D(fe){const xe=this.stack[this.stack.length-1];xe.depth=this.sliceSerialize(fe).codePointAt(0)===61?1:2}function B(){this.data.setextHeadingSlurpLineEnding=void 0}function q(fe){const Ge=this.stack[this.stack.length-1].children;let it=Ge[Ge.length-1];(!it||it.type!=="text")&&(it=tt(),it.position={start:vo(fe.start),end:void 0},Ge.push(it)),this.stack.push(it)}function P(fe){const xe=this.stack.pop();xe.value+=this.sliceSerialize(fe),xe.position.end=vo(fe.end)}function G(fe){const xe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ge=xe.children[xe.children.length-1];Ge.position.end=vo(fe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(xe.type)&&(q.call(this,fe),P.call(this,fe))}function z(){this.data.atHardBreak=!0}function K(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.value=fe}function Z(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.value=fe}function W(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.value=fe}function I(){const fe=this.stack[this.stack.length-1];if(this.data.inReference){const xe=this.data.referenceType||"shortcut";fe.type+="Reference",fe.referenceType=xe,delete fe.url,delete fe.title}else delete fe.identifier,delete fe.label;this.data.referenceType=void 0}function Y(){const fe=this.stack[this.stack.length-1];if(this.data.inReference){const xe=this.data.referenceType||"shortcut";fe.type+="Reference",fe.referenceType=xe,delete fe.url,delete fe.title}else delete fe.identifier,delete fe.label;this.data.referenceType=void 0}function J(fe){const xe=this.sliceSerialize(fe),Ge=this.stack[this.stack.length-2];Ge.label=whe(xe),Ge.identifier=fi(xe).toLowerCase()}function $(){const fe=this.stack[this.stack.length-1],xe=this.resume(),Ge=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ge.type==="link"){const it=fe.children;Ge.children=it}else Ge.alt=xe}function j(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.url=fe}function M(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.title=fe}function F(){this.data.inReference=void 0}function A(){this.data.referenceType="collapsed"}function Q(fe){const xe=this.resume(),Ge=this.stack[this.stack.length-1];Ge.label=xe,Ge.identifier=fi(this.sliceSerialize(fe)).toLowerCase(),this.data.referenceType="full"}function se(fe){this.data.characterReferenceType=fe.type}function X(fe){const xe=this.sliceSerialize(fe),Ge=this.data.characterReferenceType;let it;Ge?(it=l$(xe,Ge==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):it=a4(xe);const pt=this.stack[this.stack.length-1];pt.value+=it}function ae(fe){const xe=this.stack.pop();xe.position.end=vo(fe.end)}function ke(fe){P.call(this,fe);const xe=this.stack[this.stack.length-1];xe.url=this.sliceSerialize(fe)}function Se(fe){P.call(this,fe);const xe=this.stack[this.stack.length-1];xe.url="mailto:"+this.sliceSerialize(fe)}function Ve(){return{type:"blockquote",children:[]}}function Le(){return{type:"code",lang:null,meta:null,value:""}}function rt(){return{type:"inlineCode",value:""}}function Ye(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Je(){return{type:"emphasis",children:[]}}function Rt(){return{type:"heading",depth:0,children:[]}}function At(){return{type:"break"}}function Zt(){return{type:"html",value:""}}function on(){return{type:"image",title:null,url:"",alt:null}}function qt(){return{type:"link",title:null,url:"",children:[]}}function tn(fe){return{type:"list",ordered:fe.type==="listOrdered",start:null,spread:fe._spread,children:[]}}function je(fe){return{type:"listItem",spread:fe._spread,checked:null,children:[]}}function We(){return{type:"paragraph",children:[]}}function Qe(){return{type:"strong",children:[]}}function tt(){return{type:"text",value:""}}function Mt(){return{type:"thematicBreak"}}}function vo(t){return{line:t.line,column:t.column,offset:t.offset}}function b$(t,e){let n=-1;for(;++n<e.length;){const s=e[n];Array.isArray(s)?b$(t,s):Nhe(t,s)}}function Nhe(t,e){let n;for(n in e)if(v$.call(e,n))switch(n){case"canContainEols":{const s=e[n];s&&t[n].push(...s);break}case"transforms":{const s=e[n];s&&t[n].push(...s);break}case"enter":case"exit":{const s=e[n];s&&Object.assign(t[n],s);break}}}function TM(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Zf({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Zf({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Zf({start:e.start,end:e.end})+") is still open")}function Ehe(t){const e=this;e.parser=n;function n(s){return khe(s,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function Ahe(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function jhe(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function The(t,e){const n=e.value?e.value+`
`:"",s={},r=e.lang?e.lang.split(/\s+/):[];r.length>0&&(s.className=["language-"+r[0]]);let i={type:"element",tagName:"code",properties:s,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function Rhe(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Ohe(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Mhe(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",s=String(e.identifier).toUpperCase(),r=Mh(s.toLowerCase()),i=t.footnoteOrder.indexOf(s);let o,c=t.footnoteCounts.get(s);c===void 0?(c=0,t.footnoteOrder.push(s),o=t.footnoteOrder.length):o=i+1,c+=1,t.footnoteCounts.set(s,c);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+r,id:n+"fnref-"+r+(c>1?"-"+c:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,u);const h={type:"element",tagName:"sup",properties:{},children:[u]};return t.patch(e,h),t.applyData(e,h)}function Dhe(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Bhe(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function _$(t,e){const n=e.referenceType;let s="]";if(n==="collapsed"?s+="[]":n==="full"&&(s+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+s}];const r=t.all(e),i=r[0];i&&i.type==="text"?i.value="["+i.value:r.unshift({type:"text",value:"["});const o=r[r.length-1];return o&&o.type==="text"?o.value+=s:r.push({type:"text",value:s}),r}function Lhe(t,e){const n=String(e.identifier).toUpperCase(),s=t.definitionById.get(n);if(!s)return _$(t,e);const r={src:Mh(s.url||""),alt:e.alt};s.title!==null&&s.title!==void 0&&(r.title=s.title);const i={type:"element",tagName:"img",properties:r,children:[]};return t.patch(e,i),t.applyData(e,i)}function Ihe(t,e){const n={src:Mh(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const s={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,s),t.applyData(e,s)}function Phe(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const s={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,s),t.applyData(e,s)}function $he(t,e){const n=String(e.identifier).toUpperCase(),s=t.definitionById.get(n);if(!s)return _$(t,e);const r={href:Mh(s.url||"")};s.title!==null&&s.title!==void 0&&(r.title=s.title);const i={type:"element",tagName:"a",properties:r,children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function zhe(t,e){const n={href:Mh(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const s={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function Uhe(t,e,n){const s=t.all(e),r=n?Hhe(n):x$(e),i={},o=[];if(typeof e.checked=="boolean"){const m=s[0];let p;m&&m.type==="element"&&m.tagName==="p"?p=m:(p={type:"element",tagName:"p",properties:{},children:[]},s.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let c=-1;for(;++c<s.length;){const m=s[c];(r||c!==0||m.type!=="element"||m.tagName!=="p")&&o.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!r?o.push(...m.children):o.push(m)}const u=s[s.length-1];u&&(r||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:i,children:o};return t.patch(e,h),t.applyData(e,h)}function Hhe(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let s=-1;for(;!e&&++s<n.length;)e=x$(n[s])}return e}function x$(t){const e=t.spread;return e??t.children.length>1}function Fhe(t,e){const n={},s=t.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++r<s.length;){const o=s[r];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(s,!0)};return t.patch(e,i),t.applyData(e,i)}function Vhe(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function qhe(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function Khe(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Whe(t,e){const n=t.all(e),s=n.shift(),r=[];if(s){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([s],!0)};t.patch(e.children[0],o),r.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},c=t4(e.children[1]),u=e$(e.children[e.children.length-1]);c&&u&&(o.position={start:c,end:u}),r.push(o)}const i={type:"element",tagName:"table",properties:{},children:t.wrap(r,!0)};return t.patch(e,i),t.applyData(e,i)}function Ghe(t,e,n){const s=n?n.children:void 0,i=(s?s.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,c=o?o.length:e.children.length;let u=-1;const h=[];for(;++u<c;){const p=e.children[u],y={},v=o?o[u]:void 0;v&&(y.align=v);let x={type:"element",tagName:i,properties:y,children:[]};p&&(x.children=t.all(p),t.patch(p,x),x=t.applyData(p,x)),h.push(x)}const m={type:"element",tagName:"tr",properties:{},children:t.wrap(h,!0)};return t.patch(e,m),t.applyData(e,m)}function Yhe(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const RM=9,OM=32;function Zhe(t){const e=String(t),n=/\r?\n|\r/g;let s=n.exec(e),r=0;const i=[];for(;s;)i.push(MM(e.slice(r,s.index),r>0,!0),s[0]),r=s.index+s[0].length,s=n.exec(e);return i.push(MM(e.slice(r),r>0,!1)),i.join("")}function MM(t,e,n){let s=0,r=t.length;if(e){let i=t.codePointAt(s);for(;i===RM||i===OM;)s++,i=t.codePointAt(s)}if(n){let i=t.codePointAt(r-1);for(;i===RM||i===OM;)r--,i=t.codePointAt(r-1)}return r>s?t.slice(s,r):""}function Xhe(t,e){const n={type:"text",value:Zhe(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function Jhe(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const Qhe={blockquote:Ahe,break:jhe,code:The,delete:Rhe,emphasis:Ohe,footnoteReference:Mhe,heading:Dhe,html:Bhe,imageReference:Lhe,image:Ihe,inlineCode:Phe,linkReference:$he,link:zhe,listItem:Uhe,list:Fhe,paragraph:Vhe,root:qhe,strong:Khe,table:Whe,tableCell:Yhe,tableRow:Ghe,text:Xhe,thematicBreak:Jhe,toml:u0,yaml:u0,definition:u0,footnoteDefinition:u0};function u0(){}const w$=-1,Ub=0,Jf=1,ov=2,l4=3,c4=4,u4=5,h4=6,S$=7,k$=8,DM=typeof self=="object"?self:globalThis,ede=(t,e)=>{const n=(r,i)=>(t.set(i,r),r),s=r=>{if(t.has(r))return t.get(r);const[i,o]=e[r];switch(i){case Ub:case w$:return n(o,r);case Jf:{const c=n([],r);for(const u of o)c.push(s(u));return c}case ov:{const c=n({},r);for(const[u,h]of o)c[s(u)]=s(h);return c}case l4:return n(new Date(o),r);case c4:{const{source:c,flags:u}=o;return n(new RegExp(c,u),r)}case u4:{const c=n(new Map,r);for(const[u,h]of o)c.set(s(u),s(h));return c}case h4:{const c=n(new Set,r);for(const u of o)c.add(s(u));return c}case S$:{const{name:c,message:u}=o;return n(new DM[c](u),r)}case k$:return n(BigInt(o),r);case"BigInt":return n(Object(BigInt(o)),r);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:c}=new Uint8Array(o);return n(new DataView(c),o)}}return n(new DM[i](o),r)};return s},BM=t=>ede(new Map,t)(0),du="",{toString:tde}={},{keys:nde}=Object,Vd=t=>{const e=typeof t;if(e!=="object"||!t)return[Ub,e];const n=tde.call(t).slice(8,-1);switch(n){case"Array":return[Jf,du];case"Object":return[ov,du];case"Date":return[l4,du];case"RegExp":return[c4,du];case"Map":return[u4,du];case"Set":return[h4,du];case"DataView":return[Jf,n]}return n.includes("Array")?[Jf,n]:n.includes("Error")?[S$,n]:[ov,n]},h0=([t,e])=>t===Ub&&(e==="function"||e==="symbol"),sde=(t,e,n,s)=>{const r=(o,c)=>{const u=s.push(o)-1;return n.set(c,u),u},i=o=>{if(n.has(o))return n.get(o);let[c,u]=Vd(o);switch(c){case Ub:{let m=o;switch(u){case"bigint":c=k$,m=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+u);m=null;break;case"undefined":return r([w$],o)}return r([c,m],o)}case Jf:{if(u){let y=o;return u==="DataView"?y=new Uint8Array(o.buffer):u==="ArrayBuffer"&&(y=new Uint8Array(o)),r([u,[...y]],o)}const m=[],p=r([c,m],o);for(const y of o)m.push(i(y));return p}case ov:{if(u)switch(u){case"BigInt":return r([u,o.toString()],o);case"Boolean":case"Number":case"String":return r([u,o.valueOf()],o)}if(e&&"toJSON"in o)return i(o.toJSON());const m=[],p=r([c,m],o);for(const y of nde(o))(t||!h0(Vd(o[y])))&&m.push([i(y),i(o[y])]);return p}case l4:return r([c,o.toISOString()],o);case c4:{const{source:m,flags:p}=o;return r([c,{source:m,flags:p}],o)}case u4:{const m=[],p=r([c,m],o);for(const[y,v]of o)(t||!(h0(Vd(y))||h0(Vd(v))))&&m.push([i(y),i(v)]);return p}case h4:{const m=[],p=r([c,m],o);for(const y of o)(t||!h0(Vd(y)))&&m.push(i(y));return p}}const{message:h}=o;return r([c,{name:u,message:h}],o)};return i},LM=(t,{json:e,lossy:n}={})=>{const s=[];return sde(!(e||n),!!e,new Map,s)(t),s},lv=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?BM(LM(t,e)):structuredClone(t):(t,e)=>BM(LM(t,e));function rde(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function ide(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function ade(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||rde,s=t.options.footnoteBackLabel||ide,r=t.options.footnoteLabel||"Footnotes",i=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},c=[];let u=-1;for(;++u<t.footnoteOrder.length;){const h=t.footnoteById.get(t.footnoteOrder[u]);if(!h)continue;const m=t.all(h),p=String(h.identifier).toUpperCase(),y=Mh(p.toLowerCase());let v=0;const x=[],_=t.footnoteCounts.get(p);for(;_!==void 0&&++v<=_;){x.length>0&&x.push({type:"text",value:" "});let C=typeof n=="string"?n:n(u,v);typeof C=="string"&&(C={type:"text",value:C}),x.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+y+(v>1?"-"+v:""),dataFootnoteBackref:"",ariaLabel:typeof s=="string"?s:s(u,v),className:["data-footnote-backref"]},children:Array.isArray(C)?C:[C]})}const S=m[m.length-1];if(S&&S.type==="element"&&S.tagName==="p"){const C=S.children[S.children.length-1];C&&C.type==="text"?C.value+=" ":S.children.push({type:"text",value:" "}),S.children.push(...x)}else m.push(...x);const k={type:"element",tagName:"li",properties:{id:e+"fn-"+y},children:t.wrap(m,!0)};t.patch(h,k),c.push(k)}if(c.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...lv(o),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(c,!0)},{type:"text",value:`
`}]}}const Hb=(function(t){if(t==null)return ude;if(typeof t=="function")return Fb(t);if(typeof t=="object")return Array.isArray(t)?ode(t):lde(t);if(typeof t=="string")return cde(t);throw new Error("Expected function, string, or object as test")});function ode(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=Hb(t[n]);return Fb(s);function s(...r){let i=-1;for(;++i<e.length;)if(e[i].apply(this,r))return!0;return!1}}function lde(t){const e=t;return Fb(n);function n(s){const r=s;let i;for(i in t)if(r[i]!==e[i])return!1;return!0}}function cde(t){return Fb(e);function e(n){return n&&n.type===t}}function Fb(t){return e;function e(n,s,r){return!!(hde(n)&&t.call(this,n,typeof s=="number"?s:void 0,r||void 0))}}function ude(){return!0}function hde(t){return t!==null&&typeof t=="object"&&"type"in t}const C$=[],dde=!0,T2=!1,fde="skip";function N$(t,e,n,s){let r;typeof e=="function"&&typeof n!="function"?(s=n,n=e):r=e;const i=Hb(r),o=s?-1:1;c(t,void 0,[])();function c(u,h,m){const p=u&&typeof u=="object"?u:{};if(typeof p.type=="string"){const v=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(y,"name",{value:"node ("+(u.type+(v?"<"+v+">":""))+")"})}return y;function y(){let v=C$,x,_,S;if((!e||i(u,h,m[m.length-1]||void 0))&&(v=pde(n(u,m)),v[0]===T2))return v;if("children"in u&&u.children){const k=u;if(k.children&&v[0]!==fde)for(_=(s?k.children.length:-1)+o,S=m.concat(k);_>-1&&_<k.children.length;){const C=k.children[_];if(x=c(C,_,S)(),x[0]===T2)return x;_=typeof x[1]=="number"?x[1]:_+o}}return v}}}function pde(t){return Array.isArray(t)?t:typeof t=="number"?[dde,t]:t==null?C$:[t]}function d4(t,e,n,s){let r,i,o;typeof e=="function"&&typeof n!="function"?(i=void 0,o=e,r=n):(i=e,o=n,r=s),N$(t,i,c,r);function c(u,h){const m=h[h.length-1],p=m?m.children.indexOf(u):void 0;return o(u,p,m)}}const R2={}.hasOwnProperty,mde={};function gde(t,e){const n=e||mde,s=new Map,r=new Map,i=new Map,o={...Qhe,...n.handlers},c={all:h,applyData:vde,definitionById:s,footnoteById:r,footnoteCounts:i,footnoteOrder:[],handlers:o,one:u,options:n,patch:yde,wrap:_de};return d4(t,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const p=m.type==="definition"?s:r,y=String(m.identifier).toUpperCase();p.has(y)||p.set(y,m)}}),c;function u(m,p){const y=m.type,v=c.handlers[y];if(R2.call(c.handlers,y)&&v)return v(c,m,p);if(c.options.passThrough&&c.options.passThrough.includes(y)){if("children"in m){const{children:_,...S}=m,k=lv(S);return k.children=c.all(m),k}return lv(m)}return(c.options.unknownHandler||bde)(c,m,p)}function h(m){const p=[];if("children"in m){const y=m.children;let v=-1;for(;++v<y.length;){const x=c.one(y[v],m);if(x){if(v&&y[v-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=IM(x.value)),!Array.isArray(x)&&x.type==="element")){const _=x.children[0];_&&_.type==="text"&&(_.value=IM(_.value))}Array.isArray(x)?p.push(...x):p.push(x)}}}return p}}function yde(t,e){t.position&&(e.position=ice(t))}function vde(t,e){let n=e;if(t&&t.data){const s=t.data.hName,r=t.data.hChildren,i=t.data.hProperties;if(typeof s=="string")if(n.type==="element")n.tagName=s;else{const o="children"in n?n.children:[n];n={type:"element",tagName:s,properties:{},children:o}}n.type==="element"&&i&&Object.assign(n.properties,lv(i)),"children"in n&&n.children&&r!==null&&r!==void 0&&(n.children=r)}return n}function bde(t,e){const n=e.data||{},s="value"in e&&!(R2.call(n,"hProperties")||R2.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function _de(t,e){const n=[];let s=-1;for(e&&n.push({type:"text",value:`
`});++s<t.length;)s&&n.push({type:"text",value:`
`}),n.push(t[s]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function IM(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function PM(t,e){const n=gde(t,e),s=n.one(t,void 0),r=ade(n),i=Array.isArray(s)?{type:"root",children:s}:s||{type:"root",children:[]};return r&&i.children.push({type:"text",value:`
`},r),i}function xde(t,e){return t&&"run"in t?async function(n,s){const r=PM(n,{file:s,...e});await t.run(r,s)}:function(n,s){return PM(n,{file:s,...t||e})}}function $M(t){if(t)throw t}var Ew,zM;function wde(){if(zM)return Ew;zM=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,s=Object.getOwnPropertyDescriptor,r=function(h){return typeof Array.isArray=="function"?Array.isArray(h):e.call(h)==="[object Array]"},i=function(h){if(!h||e.call(h)!=="[object Object]")return!1;var m=t.call(h,"constructor"),p=h.constructor&&h.constructor.prototype&&t.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!m&&!p)return!1;var y;for(y in h);return typeof y>"u"||t.call(h,y)},o=function(h,m){n&&m.name==="__proto__"?n(h,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):h[m.name]=m.newValue},c=function(h,m){if(m==="__proto__")if(t.call(h,m)){if(s)return s(h,m).value}else return;return h[m]};return Ew=function u(){var h,m,p,y,v,x,_=arguments[0],S=1,k=arguments.length,C=!1;for(typeof _=="boolean"&&(C=_,_=arguments[1]||{},S=2),(_==null||typeof _!="object"&&typeof _!="function")&&(_={});S<k;++S)if(h=arguments[S],h!=null)for(m in h)p=c(_,m),y=c(h,m),_!==y&&(C&&y&&(i(y)||(v=r(y)))?(v?(v=!1,x=p&&r(p)?p:[]):x=p&&i(p)?p:{},o(_,{name:m,newValue:u(C,x,y)})):typeof y<"u"&&o(_,{name:m,newValue:y}));return _},Ew}var Sde=wde();const Aw=L2(Sde);function O2(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function kde(){const t=[],e={run:n,use:s};return e;function n(...r){let i=-1;const o=r.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);c(null,...r);function c(u,...h){const m=t[++i];let p=-1;if(u){o(u);return}for(;++p<r.length;)(h[p]===null||h[p]===void 0)&&(h[p]=r[p]);r=h,m?Cde(m,c)(...h):o(null,...h)}}function s(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return t.push(r),e}}function Cde(t,e){let n;return s;function s(...o){const c=t.length>o.length;let u;c&&o.push(r);try{u=t.apply(this,o)}catch(h){const m=h;if(c&&n)throw m;return r(m)}c||(u&&u.then&&typeof u.then=="function"?u.then(i,r):u instanceof Error?r(u):i(u))}function r(o,...c){n||(n=!0,e(o,...c))}function i(o){r(null,o)}}const Ti={basename:Nde,dirname:Ede,extname:Ade,join:jde,sep:"/"};function Nde(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');dm(t);let n=0,s=-1,r=t.length,i;if(e===void 0||e.length===0||e.length>t.length){for(;r--;)if(t.codePointAt(r)===47){if(i){n=r+1;break}}else s<0&&(i=!0,s=r+1);return s<0?"":t.slice(n,s)}if(e===t)return"";let o=-1,c=e.length-1;for(;r--;)if(t.codePointAt(r)===47){if(i){n=r+1;break}}else o<0&&(i=!0,o=r+1),c>-1&&(t.codePointAt(r)===e.codePointAt(c--)?c<0&&(s=r):(c=-1,s=o));return n===s?s=o:s<0&&(s=t.length),t.slice(n,s)}function Ede(t){if(dm(t),t.length===0)return".";let e=-1,n=t.length,s;for(;--n;)if(t.codePointAt(n)===47){if(s){e=n;break}}else s||(s=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function Ade(t){dm(t);let e=t.length,n=-1,s=0,r=-1,i=0,o;for(;e--;){const c=t.codePointAt(e);if(c===47){if(o){s=e+1;break}continue}n<0&&(o=!0,n=e+1),c===46?r<0?r=e:i!==1&&(i=1):r>-1&&(i=-1)}return r<0||n<0||i===0||i===1&&r===n-1&&r===s+1?"":t.slice(r,n)}function jde(...t){let e=-1,n;for(;++e<t.length;)dm(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":Tde(n)}function Tde(t){dm(t);const e=t.codePointAt(0)===47;let n=Rde(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function Rde(t,e){let n="",s=0,r=-1,i=0,o=-1,c,u;for(;++o<=t.length;){if(o<t.length)c=t.codePointAt(o);else{if(c===47)break;c=47}if(c===47){if(!(r===o-1||i===1))if(r!==o-1&&i===2){if(n.length<2||s!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",s=0):(n=n.slice(0,u),s=n.length-1-n.lastIndexOf("/")),r=o,i=0;continue}}else if(n.length>0){n="",s=0,r=o,i=0;continue}}e&&(n=n.length>0?n+"/..":"..",s=2)}else n.length>0?n+="/"+t.slice(r+1,o):n=t.slice(r+1,o),s=o-r-1;r=o,i=0}else c===46&&i>-1?i++:i=-1}return n}function dm(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const Ode={cwd:Mde};function Mde(){return"/"}function M2(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function Dde(t){if(typeof t=="string")t=new URL(t);else if(!M2(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return Bde(t)}function Bde(t){if(t.hostname!==""){const s=new TypeError('File URL host must be "localhost" or empty on darwin');throw s.code="ERR_INVALID_FILE_URL_HOST",s}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const s=e.codePointAt(n+2);if(s===70||s===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const jw=["history","path","basename","stem","extname","dirname"];class E${constructor(e){let n;e?M2(e)?n={path:e}:typeof e=="string"||Lde(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":Ode.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let s=-1;for(;++s<jw.length;){const i=jw[s];i in n&&n[i]!==void 0&&n[i]!==null&&(this[i]=i==="history"?[...n[i]]:n[i])}let r;for(r in n)jw.includes(r)||(this[r]=n[r])}get basename(){return typeof this.path=="string"?Ti.basename(this.path):void 0}set basename(e){Rw(e,"basename"),Tw(e,"basename"),this.path=Ti.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Ti.dirname(this.path):void 0}set dirname(e){UM(this.basename,"dirname"),this.path=Ti.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Ti.extname(this.path):void 0}set extname(e){if(Tw(e,"extname"),UM(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ti.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){M2(e)&&(e=Dde(e)),Rw(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Ti.basename(this.path,this.extname):void 0}set stem(e){Rw(e,"stem"),Tw(e,"stem"),this.path=Ti.join(this.dirname||"",e+(this.extname||""))}fail(e,n,s){const r=this.message(e,n,s);throw r.fatal=!0,r}info(e,n,s){const r=this.message(e,n,s);return r.fatal=void 0,r}message(e,n,s){const r=new Es(e,n,s);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Tw(t,e){if(t&&t.includes(Ti.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Ti.sep+"`")}function Rw(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function UM(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function Lde(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Ide=(function(t){const s=this.constructor.prototype,r=s[t],i=function(){return r.apply(i,arguments)};return Object.setPrototypeOf(i,s),i}),Pde={}.hasOwnProperty;class f4 extends Ide{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=kde()}copy(){const e=new f4;let n=-1;for(;++n<this.attachers.length;){const s=this.attachers[n];e.use(...s)}return e.data(Aw(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Dw("data",this.frozen),this.namespace[e]=n,this):Pde.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Dw("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...s]=this.attachers[this.freezeIndex];if(s[0]===!1)continue;s[0]===!0&&(s[0]=void 0);const r=n.call(e,...s);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=d0(e),s=this.parser||this.Parser;return Ow("parse",s),s(String(n),n)}process(e,n){const s=this;return this.freeze(),Ow("process",this.parser||this.Parser),Mw("process",this.compiler||this.Compiler),n?r(void 0,n):new Promise(r);function r(i,o){const c=d0(e),u=s.parse(c);s.run(u,c,function(m,p,y){if(m||!p||!y)return h(m);const v=p,x=s.stringify(v,y);Ude(x)?y.value=x:y.result=x,h(m,y)});function h(m,p){m||!p?o(m):i?i(p):n(void 0,p)}}}processSync(e){let n=!1,s;return this.freeze(),Ow("processSync",this.parser||this.Parser),Mw("processSync",this.compiler||this.Compiler),this.process(e,r),FM("processSync","process",n),s;function r(i,o){n=!0,$M(i),s=o}}run(e,n,s){HM(e),this.freeze();const r=this.transformers;return!s&&typeof n=="function"&&(s=n,n=void 0),s?i(void 0,s):new Promise(i);function i(o,c){const u=d0(n);r.run(e,u,h);function h(m,p,y){const v=p||e;m?c(m):o?o(v):s(void 0,v,y)}}}runSync(e,n){let s=!1,r;return this.run(e,n,i),FM("runSync","run",s),r;function i(o,c){$M(o),r=c,s=!0}}stringify(e,n){this.freeze();const s=d0(n),r=this.compiler||this.Compiler;return Mw("stringify",r),HM(e),r(e,s)}use(e,...n){const s=this.attachers,r=this.namespace;if(Dw("use",this.frozen),e!=null)if(typeof e=="function")u(e,n);else if(typeof e=="object")Array.isArray(e)?c(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function i(h){if(typeof h=="function")u(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[m,...p]=h;u(m,p)}else o(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function o(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(h.plugins),h.settings&&(r.settings=Aw(!0,r.settings,h.settings))}function c(h){let m=-1;if(h!=null)if(Array.isArray(h))for(;++m<h.length;){const p=h[m];i(p)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function u(h,m){let p=-1,y=-1;for(;++p<s.length;)if(s[p][0]===h){y=p;break}if(y===-1)s.push([h,...m]);else if(m.length>0){let[v,...x]=m;const _=s[y][1];O2(_)&&O2(v)&&(v=Aw(!0,_,v)),s[y]=[h,v,...x]}}}}const $de=new f4().freeze();function Ow(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Mw(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Dw(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function HM(t){if(!O2(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function FM(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function d0(t){return zde(t)?t:new E$(t)}function zde(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function Ude(t){return typeof t=="string"||Hde(t)}function Hde(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Fde="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",VM=[],qM={allowDangerousHtml:!0},Vde=/^(https?|ircs?|mailto|xmpp)$/i,qde=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Kde(t){const e=Wde(t),n=Gde(t);return Yde(e.runSync(e.parse(n),n),t)}function Wde(t){const e=t.rehypePlugins||VM,n=t.remarkPlugins||VM,s=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...qM}:qM;return $de().use(Ehe).use(n).use(xde,s).use(e)}function Gde(t){const e=t.children||"",n=new E$;return typeof e=="string"&&(n.value=e),n}function Yde(t,e){const n=e.allowedElements,s=e.allowElement,r=e.components,i=e.disallowedElements,o=e.skipHtml,c=e.unwrapDisallowed,u=e.urlTransform||Zde;for(const m of qde)Object.hasOwn(e,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+Fde+m.id,void 0);return d4(t,h),uce(t,{Fragment:f.Fragment,components:r,ignoreInvalidStyle:!0,jsx:f.jsx,jsxs:f.jsxs,passKeys:!0,passNode:!0});function h(m,p,y){if(m.type==="raw"&&y&&typeof p=="number")return o?y.children.splice(p,1):y.children[p]={type:"text",value:m.value},p;if(m.type==="element"){let v;for(v in kw)if(Object.hasOwn(kw,v)&&Object.hasOwn(m.properties,v)){const x=m.properties[v],_=kw[v];(_===null||_.includes(m.tagName))&&(m.properties[v]=u(String(x||""),v,m))}}if(m.type==="element"){let v=n?!n.includes(m.tagName):i?i.includes(m.tagName):!1;if(!v&&s&&typeof p=="number"&&(v=!s(m,p,y)),v&&y&&typeof p=="number")return c&&m.children?y.children.splice(p,1,...m.children):y.children.splice(p,1),p}}}function Zde(t){const e=t.indexOf(":"),n=t.indexOf("?"),s=t.indexOf("#"),r=t.indexOf("/");return e===-1||r!==-1&&e>r||n!==-1&&e>n||s!==-1&&e>s||Vde.test(t.slice(0,e))?t:""}function KM(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let s=0,r=n.indexOf(e);for(;r!==-1;)s++,r=n.indexOf(e,r+e.length);return s}function Xde(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function A$(t,e,n){const r=Hb((n||{}).ignore||[]),i=Jde(e);let o=-1;for(;++o<i.length;)N$(t,"text",c);function c(h,m){let p=-1,y;for(;++p<m.length;){const v=m[p],x=y?y.children:void 0;if(r(v,x?x.indexOf(v):void 0,y))return;y=v}if(y)return u(h,m)}function u(h,m){const p=m[m.length-1],y=i[o][0],v=i[o][1];let x=0;const S=p.children.indexOf(h);let k=!1,C=[];y.lastIndex=0;let N=y.exec(h.value);for(;N;){const R=N.index,O={index:N.index,input:N.input,stack:[...m,h]};let E=v(...N,O);if(typeof E=="string"&&(E=E.length>0?{type:"text",value:E}:void 0),E===!1?y.lastIndex=R+1:(x!==R&&C.push({type:"text",value:h.value.slice(x,R)}),Array.isArray(E)?C.push(...E):E&&C.push(E),x=R+N[0].length,k=!0),!y.global)break;N=y.exec(h.value)}return k?(x<h.value.length&&C.push({type:"text",value:h.value.slice(x)}),p.children.splice(S,1,...C)):C=[h],S+C.length}}function Jde(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let s=-1;for(;++s<n.length;){const r=n[s];e.push([Qde(r[0]),efe(r[1])])}return e}function Qde(t){return typeof t=="string"?new RegExp(Xde(t),"g"):t}function efe(t){return typeof t=="function"?t:function(){return t}}const Bw="phrasing",Lw=["autolink","link","image","label"];function tfe(){return{transforms:[lfe],enter:{literalAutolink:sfe,literalAutolinkEmail:Iw,literalAutolinkHttp:Iw,literalAutolinkWww:Iw},exit:{literalAutolink:ofe,literalAutolinkEmail:afe,literalAutolinkHttp:rfe,literalAutolinkWww:ife}}}function nfe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Bw,notInConstruct:Lw},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Bw,notInConstruct:Lw},{character:":",before:"[ps]",after:"\\/",inConstruct:Bw,notInConstruct:Lw}]}}function sfe(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Iw(t){this.config.enter.autolinkProtocol.call(this,t)}function rfe(t){this.config.exit.autolinkProtocol.call(this,t)}function ife(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function afe(t){this.config.exit.autolinkEmail.call(this,t)}function ofe(t){this.exit(t)}function lfe(t){A$(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,cfe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),ufe]],{ignore:["link","linkReference"]})}function cfe(t,e,n,s,r){let i="";if(!j$(r)||(/^w/i.test(e)&&(n=e+n,e="",i="http://"),!hfe(n)))return!1;const o=dfe(n+s);if(!o[0])return!1;const c={type:"link",title:null,url:i+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[c,{type:"text",value:o[1]}]:c}function ufe(t,e,n,s){return!j$(s,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function hfe(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function dfe(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],s=n.indexOf(")");const r=KM(t,"(");let i=KM(t,")");for(;s!==-1&&r>i;)t+=n.slice(0,s+1),n=n.slice(s+1),s=n.indexOf(")"),i++;return[t,n]}function j$(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||ic(n)||$b(n))&&(!e||n!==47)}T$.peek=xfe;function ffe(){this.buffer()}function pfe(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function mfe(){this.buffer()}function gfe(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function yfe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=fi(this.sliceSerialize(t)).toLowerCase(),n.label=e}function vfe(t){this.exit(t)}function bfe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=fi(this.sliceSerialize(t)).toLowerCase(),n.label=e}function _fe(t){this.exit(t)}function xfe(){return"["}function T$(t,e,n,s){const r=n.createTracker(s);let i=r.move("[^");const o=n.enter("footnoteReference"),c=n.enter("reference");return i+=r.move(n.safe(n.associationId(t),{after:"]",before:i})),c(),o(),i+=r.move("]"),i}function wfe(){return{enter:{gfmFootnoteCallString:ffe,gfmFootnoteCall:pfe,gfmFootnoteDefinitionLabelString:mfe,gfmFootnoteDefinition:gfe},exit:{gfmFootnoteCallString:yfe,gfmFootnoteCall:vfe,gfmFootnoteDefinitionLabelString:bfe,gfmFootnoteDefinition:_fe}}}function Sfe(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:T$},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(s,r,i,o){const c=i.createTracker(o);let u=c.move("[^");const h=i.enter("footnoteDefinition"),m=i.enter("label");return u+=c.move(i.safe(i.associationId(s),{before:u,after:"]"})),m(),u+=c.move("]:"),s.children&&s.children.length>0&&(c.shift(4),u+=c.move((e?`
`:" ")+i.indentLines(i.containerFlow(s,c.current()),e?R$:kfe))),h(),u}}function kfe(t,e,n){return e===0?t:R$(t,e,n)}function R$(t,e,n){return(n?"":"    ")+t}const Cfe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];O$.peek=Tfe;function Nfe(){return{canContainEols:["delete"],enter:{strikethrough:Afe},exit:{strikethrough:jfe}}}function Efe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:Cfe}],handlers:{delete:O$}}}function Afe(t){this.enter({type:"delete",children:[]},t)}function jfe(t){this.exit(t)}function O$(t,e,n,s){const r=n.createTracker(s),i=n.enter("strikethrough");let o=r.move("~~");return o+=n.containerPhrasing(t,{...r.current(),before:o,after:"~"}),o+=r.move("~~"),i(),o}function Tfe(){return"~"}function Rfe(t){return t.length}function Ofe(t,e){const n=e||{},s=(n.align||[]).concat(),r=n.stringLength||Rfe,i=[],o=[],c=[],u=[];let h=0,m=-1;for(;++m<t.length;){const _=[],S=[];let k=-1;for(t[m].length>h&&(h=t[m].length);++k<t[m].length;){const C=Mfe(t[m][k]);if(n.alignDelimiters!==!1){const N=r(C);S[k]=N,(u[k]===void 0||N>u[k])&&(u[k]=N)}_.push(C)}o[m]=_,c[m]=S}let p=-1;if(typeof s=="object"&&"length"in s)for(;++p<h;)i[p]=WM(s[p]);else{const _=WM(s);for(;++p<h;)i[p]=_}p=-1;const y=[],v=[];for(;++p<h;){const _=i[p];let S="",k="";_===99?(S=":",k=":"):_===108?S=":":_===114&&(k=":");let C=n.alignDelimiters===!1?1:Math.max(1,u[p]-S.length-k.length);const N=S+"-".repeat(C)+k;n.alignDelimiters!==!1&&(C=S.length+C+k.length,C>u[p]&&(u[p]=C),v[p]=C),y[p]=N}o.splice(1,0,y),c.splice(1,0,v),m=-1;const x=[];for(;++m<o.length;){const _=o[m],S=c[m];p=-1;const k=[];for(;++p<h;){const C=_[p]||"";let N="",R="";if(n.alignDelimiters!==!1){const O=u[p]-(S[p]||0),E=i[p];E===114?N=" ".repeat(O):E===99?O%2?(N=" ".repeat(O/2+.5),R=" ".repeat(O/2-.5)):(N=" ".repeat(O/2),R=N):R=" ".repeat(O)}n.delimiterStart!==!1&&!p&&k.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&C==="")&&(n.delimiterStart!==!1||p)&&k.push(" "),n.alignDelimiters!==!1&&k.push(N),k.push(C),n.alignDelimiters!==!1&&k.push(R),n.padding!==!1&&k.push(" "),(n.delimiterEnd!==!1||p!==h-1)&&k.push("|")}x.push(n.delimiterEnd===!1?k.join("").replace(/ +$/,""):k.join(""))}return x.join(`
`)}function Mfe(t){return t==null?"":String(t)}function WM(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function Dfe(t,e,n,s){const r=n.enter("blockquote"),i=n.createTracker(s);i.move("> "),i.shift(2);const o=n.indentLines(n.containerFlow(t,i.current()),Bfe);return r(),o}function Bfe(t,e,n){return">"+(n?"":" ")+t}function Lfe(t,e){return GM(t,e.inConstruct,!0)&&!GM(t,e.notInConstruct,!1)}function GM(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let s=-1;for(;++s<e.length;)if(t.includes(e[s]))return!0;return!1}function YM(t,e,n,s){let r=-1;for(;++r<n.unsafe.length;)if(n.unsafe[r].character===`
`&&Lfe(n.stack,n.unsafe[r]))return/[ \t]/.test(s.before)?"":" ";return`\\
`}function Ife(t,e){const n=String(t);let s=n.indexOf(e),r=s,i=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;s!==-1;)s===r?++i>o&&(o=i):i=1,r=s+e.length,s=n.indexOf(e,r);return o}function Pfe(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function $fe(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function zfe(t,e,n,s){const r=$fe(n),i=t.value||"",o=r==="`"?"GraveAccent":"Tilde";if(Pfe(t,n)){const p=n.enter("codeIndented"),y=n.indentLines(i,Ufe);return p(),y}const c=n.createTracker(s),u=r.repeat(Math.max(Ife(i,r)+1,3)),h=n.enter("codeFenced");let m=c.move(u);if(t.lang){const p=n.enter(`codeFencedLang${o}`);m+=c.move(n.safe(t.lang,{before:m,after:" ",encode:["`"],...c.current()})),p()}if(t.lang&&t.meta){const p=n.enter(`codeFencedMeta${o}`);m+=c.move(" "),m+=c.move(n.safe(t.meta,{before:m,after:`
`,encode:["`"],...c.current()})),p()}return m+=c.move(`
`),i&&(m+=c.move(i+`
`)),m+=c.move(u),h(),m}function Ufe(t,e,n){return(n?"":"    ")+t}function p4(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function Hfe(t,e,n,s){const r=p4(n),i=r==='"'?"Quote":"Apostrophe",o=n.enter("definition");let c=n.enter("label");const u=n.createTracker(s);let h=u.move("[");return h+=u.move(n.safe(n.associationId(t),{before:h,after:"]",...u.current()})),h+=u.move("]: "),c(),!t.url||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),h+=u.move("<"),h+=u.move(n.safe(t.url,{before:h,after:">",...u.current()})),h+=u.move(">")):(c=n.enter("destinationRaw"),h+=u.move(n.safe(t.url,{before:h,after:t.title?" ":`
`,...u.current()}))),c(),t.title&&(c=n.enter(`title${i}`),h+=u.move(" "+r),h+=u.move(n.safe(t.title,{before:h,after:r,...u.current()})),h+=u.move(r),c()),o(),h}function Ffe(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Ap(t){return"&#x"+t.toString(16).toUpperCase()+";"}function cv(t,e,n){const s=ih(t),r=ih(e);return s===void 0?r===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:s===1?r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}M$.peek=Vfe;function M$(t,e,n,s){const r=Ffe(n),i=n.enter("emphasis"),o=n.createTracker(s),c=o.move(r);let u=o.move(n.containerPhrasing(t,{after:r,before:c,...o.current()}));const h=u.charCodeAt(0),m=cv(s.before.charCodeAt(s.before.length-1),h,r);m.inside&&(u=Ap(h)+u.slice(1));const p=u.charCodeAt(u.length-1),y=cv(s.after.charCodeAt(0),p,r);y.inside&&(u=u.slice(0,-1)+Ap(p));const v=o.move(r);return i(),n.attentionEncodeSurroundingInfo={after:y.outside,before:m.outside},c+u+v}function Vfe(t,e,n){return n.options.emphasis||"*"}function qfe(t,e){let n=!1;return d4(t,function(s){if("value"in s&&/\r?\n|\r/.test(s.value)||s.type==="break")return n=!0,T2}),!!((!t.depth||t.depth<3)&&i4(t)&&(e.options.setext||n))}function Kfe(t,e,n,s){const r=Math.max(Math.min(6,t.depth||1),1),i=n.createTracker(s);if(qfe(t,n)){const m=n.enter("headingSetext"),p=n.enter("phrasing"),y=n.containerPhrasing(t,{...i.current(),before:`
`,after:`
`});return p(),m(),y+`
`+(r===1?"=":"-").repeat(y.length-(Math.max(y.lastIndexOf("\r"),y.lastIndexOf(`
`))+1))}const o="#".repeat(r),c=n.enter("headingAtx"),u=n.enter("phrasing");i.move(o+" ");let h=n.containerPhrasing(t,{before:"# ",after:`
`,...i.current()});return/^[\t ]/.test(h)&&(h=Ap(h.charCodeAt(0))+h.slice(1)),h=h?o+" "+h:o,n.options.closeAtx&&(h+=" "+o),u(),c(),h}D$.peek=Wfe;function D$(t){return t.value||""}function Wfe(){return"<"}B$.peek=Gfe;function B$(t,e,n,s){const r=p4(n),i=r==='"'?"Quote":"Apostrophe",o=n.enter("image");let c=n.enter("label");const u=n.createTracker(s);let h=u.move("![");return h+=u.move(n.safe(t.alt,{before:h,after:"]",...u.current()})),h+=u.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),h+=u.move("<"),h+=u.move(n.safe(t.url,{before:h,after:">",...u.current()})),h+=u.move(">")):(c=n.enter("destinationRaw"),h+=u.move(n.safe(t.url,{before:h,after:t.title?" ":")",...u.current()}))),c(),t.title&&(c=n.enter(`title${i}`),h+=u.move(" "+r),h+=u.move(n.safe(t.title,{before:h,after:r,...u.current()})),h+=u.move(r),c()),h+=u.move(")"),o(),h}function Gfe(){return"!"}L$.peek=Yfe;function L$(t,e,n,s){const r=t.referenceType,i=n.enter("imageReference");let o=n.enter("label");const c=n.createTracker(s);let u=c.move("![");const h=n.safe(t.alt,{before:u,after:"]",...c.current()});u+=c.move(h+"]["),o();const m=n.stack;n.stack=[],o=n.enter("reference");const p=n.safe(n.associationId(t),{before:u,after:"]",...c.current()});return o(),n.stack=m,i(),r==="full"||!h||h!==p?u+=c.move(p+"]"):r==="shortcut"?u=u.slice(0,-1):u+=c.move("]"),u}function Yfe(){return"!"}I$.peek=Zfe;function I$(t,e,n){let s=t.value||"",r="`",i=-1;for(;new RegExp("(^|[^`])"+r+"([^`]|$)").test(s);)r+="`";for(/[^ \r\n]/.test(s)&&(/^[ \r\n]/.test(s)&&/[ \r\n]$/.test(s)||/^`|`$/.test(s))&&(s=" "+s+" ");++i<n.unsafe.length;){const o=n.unsafe[i],c=n.compilePattern(o);let u;if(o.atBreak)for(;u=c.exec(s);){let h=u.index;s.charCodeAt(h)===10&&s.charCodeAt(h-1)===13&&h--,s=s.slice(0,h)+" "+s.slice(u.index+1)}}return r+s+r}function Zfe(){return"`"}function P$(t,e){const n=i4(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}$$.peek=Xfe;function $$(t,e,n,s){const r=p4(n),i=r==='"'?"Quote":"Apostrophe",o=n.createTracker(s);let c,u;if(P$(t,n)){const m=n.stack;n.stack=[],c=n.enter("autolink");let p=o.move("<");return p+=o.move(n.containerPhrasing(t,{before:p,after:">",...o.current()})),p+=o.move(">"),c(),n.stack=m,p}c=n.enter("link"),u=n.enter("label");let h=o.move("[");return h+=o.move(n.containerPhrasing(t,{before:h,after:"](",...o.current()})),h+=o.move("]("),u(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(u=n.enter("destinationLiteral"),h+=o.move("<"),h+=o.move(n.safe(t.url,{before:h,after:">",...o.current()})),h+=o.move(">")):(u=n.enter("destinationRaw"),h+=o.move(n.safe(t.url,{before:h,after:t.title?" ":")",...o.current()}))),u(),t.title&&(u=n.enter(`title${i}`),h+=o.move(" "+r),h+=o.move(n.safe(t.title,{before:h,after:r,...o.current()})),h+=o.move(r),u()),h+=o.move(")"),c(),h}function Xfe(t,e,n){return P$(t,n)?"<":"["}z$.peek=Jfe;function z$(t,e,n,s){const r=t.referenceType,i=n.enter("linkReference");let o=n.enter("label");const c=n.createTracker(s);let u=c.move("[");const h=n.containerPhrasing(t,{before:u,after:"]",...c.current()});u+=c.move(h+"]["),o();const m=n.stack;n.stack=[],o=n.enter("reference");const p=n.safe(n.associationId(t),{before:u,after:"]",...c.current()});return o(),n.stack=m,i(),r==="full"||!h||h!==p?u+=c.move(p+"]"):r==="shortcut"?u=u.slice(0,-1):u+=c.move("]"),u}function Jfe(){return"["}function m4(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function Qfe(t){const e=m4(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function epe(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function U$(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function tpe(t,e,n,s){const r=n.enter("list"),i=n.bulletCurrent;let o=t.ordered?epe(n):m4(n);const c=t.ordered?o==="."?")":".":Qfe(n);let u=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const m=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&m&&(!m.children||!m.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(u=!0),U$(n)===o&&m){let p=-1;for(;++p<t.children.length;){const y=t.children[p];if(y&&y.type==="listItem"&&y.children&&y.children[0]&&y.children[0].type==="thematicBreak"){u=!0;break}}}}u&&(o=c),n.bulletCurrent=o;const h=n.containerFlow(t,s);return n.bulletLastUsed=o,n.bulletCurrent=i,r(),h}function npe(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function spe(t,e,n,s){const r=npe(n);let i=n.bulletCurrent||m4(n);e&&e.type==="list"&&e.ordered&&(i=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+i);let o=i.length+1;(r==="tab"||r==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const c=n.createTracker(s);c.move(i+" ".repeat(o-i.length)),c.shift(o);const u=n.enter("listItem"),h=n.indentLines(n.containerFlow(t,c.current()),m);return u(),h;function m(p,y,v){return y?(v?"":" ".repeat(o))+p:(v?i:i+" ".repeat(o-i.length))+p}}function rpe(t,e,n,s){const r=n.enter("paragraph"),i=n.enter("phrasing"),o=n.containerPhrasing(t,s);return i(),r(),o}const ipe=Hb(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function ape(t,e,n,s){return(t.children.some(function(o){return ipe(o)})?n.containerPhrasing:n.containerFlow).call(n,t,s)}function ope(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}H$.peek=lpe;function H$(t,e,n,s){const r=ope(n),i=n.enter("strong"),o=n.createTracker(s),c=o.move(r+r);let u=o.move(n.containerPhrasing(t,{after:r,before:c,...o.current()}));const h=u.charCodeAt(0),m=cv(s.before.charCodeAt(s.before.length-1),h,r);m.inside&&(u=Ap(h)+u.slice(1));const p=u.charCodeAt(u.length-1),y=cv(s.after.charCodeAt(0),p,r);y.inside&&(u=u.slice(0,-1)+Ap(p));const v=o.move(r+r);return i(),n.attentionEncodeSurroundingInfo={after:y.outside,before:m.outside},c+u+v}function lpe(t,e,n){return n.options.strong||"*"}function cpe(t,e,n,s){return n.safe(t.value,s)}function upe(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function hpe(t,e,n){const s=(U$(n)+(n.options.ruleSpaces?" ":"")).repeat(upe(n));return n.options.ruleSpaces?s.slice(0,-1):s}const F$={blockquote:Dfe,break:YM,code:zfe,definition:Hfe,emphasis:M$,hardBreak:YM,heading:Kfe,html:D$,image:B$,imageReference:L$,inlineCode:I$,link:$$,linkReference:z$,list:tpe,listItem:spe,paragraph:rpe,root:ape,strong:H$,text:cpe,thematicBreak:hpe};function dpe(){return{enter:{table:fpe,tableData:ZM,tableHeader:ZM,tableRow:mpe},exit:{codeText:gpe,table:ppe,tableData:Pw,tableHeader:Pw,tableRow:Pw}}}function fpe(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function ppe(t){this.exit(t),this.data.inTable=void 0}function mpe(t){this.enter({type:"tableRow",children:[]},t)}function Pw(t){this.exit(t)}function ZM(t){this.enter({type:"tableCell",children:[]},t)}function gpe(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,ype));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function ype(t,e){return e==="|"?e:t}function vpe(t){const e=t||{},n=e.tableCellPadding,s=e.tablePipeAlign,r=e.stringLength,i=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:y,table:o,tableCell:u,tableRow:c}};function o(v,x,_,S){return h(m(v,_,S),v.align)}function c(v,x,_,S){const k=p(v,_,S),C=h([k]);return C.slice(0,C.indexOf(`
`))}function u(v,x,_,S){const k=_.enter("tableCell"),C=_.enter("phrasing"),N=_.containerPhrasing(v,{...S,before:i,after:i});return C(),k(),N}function h(v,x){return Ofe(v,{align:x,alignDelimiters:s,padding:n,stringLength:r})}function m(v,x,_){const S=v.children;let k=-1;const C=[],N=x.enter("table");for(;++k<S.length;)C[k]=p(S[k],x,_);return N(),C}function p(v,x,_){const S=v.children;let k=-1;const C=[],N=x.enter("tableRow");for(;++k<S.length;)C[k]=u(S[k],v,x,_);return N(),C}function y(v,x,_){let S=F$.inlineCode(v,x,_);return _.stack.includes("tableCell")&&(S=S.replace(/\|/g,"\\$&")),S}}function bpe(){return{exit:{taskListCheckValueChecked:XM,taskListCheckValueUnchecked:XM,paragraph:xpe}}}function _pe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:wpe}}}function XM(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function xpe(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const s=n.children[0];if(s&&s.type==="text"){const r=e.children;let i=-1,o;for(;++i<r.length;){const c=r[i];if(c.type==="paragraph"){o=c;break}}o===n&&(s.value=s.value.slice(1),s.value.length===0?n.children.shift():n.position&&s.position&&typeof s.position.start.offset=="number"&&(s.position.start.column++,s.position.start.offset++,n.position.start=Object.assign({},s.position.start)))}}this.exit(t)}function wpe(t,e,n,s){const r=t.children[0],i=typeof t.checked=="boolean"&&r&&r.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",c=n.createTracker(s);i&&c.move(o);let u=F$.listItem(t,e,n,{...s,...c.current()});return i&&(u=u.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,h)),u;function h(m){return m+o}}function Spe(){return[tfe(),wfe(),Nfe(),dpe(),bpe()]}function kpe(t){return{extensions:[nfe(),Sfe(t),Efe(),vpe(t),_pe()]}}const Cpe={tokenize:Rpe,partial:!0},V$={tokenize:Ope,partial:!0},q$={tokenize:Mpe,partial:!0},K$={tokenize:Dpe,partial:!0},Npe={tokenize:Bpe,partial:!0},W$={name:"wwwAutolink",tokenize:jpe,previous:Y$},G$={name:"protocolAutolink",tokenize:Tpe,previous:Z$},za={name:"emailAutolink",tokenize:Ape,previous:X$},Yi={};function Epe(){return{text:Yi}}let fl=48;for(;fl<123;)Yi[fl]=za,fl++,fl===58?fl=65:fl===91&&(fl=97);Yi[43]=za;Yi[45]=za;Yi[46]=za;Yi[95]=za;Yi[72]=[za,G$];Yi[104]=[za,G$];Yi[87]=[za,W$];Yi[119]=[za,W$];function Ape(t,e,n){const s=this;let r,i;return o;function o(p){return!D2(p)||!X$.call(s,s.previous)||g4(s.events)?n(p):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),c(p))}function c(p){return D2(p)?(t.consume(p),c):p===64?(t.consume(p),u):n(p)}function u(p){return p===46?t.check(Npe,m,h)(p):p===45||p===95||Ss(p)?(i=!0,t.consume(p),u):m(p)}function h(p){return t.consume(p),r=!0,u}function m(p){return i&&r&&Ds(s.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(p)):n(p)}}function jpe(t,e,n){const s=this;return r;function r(o){return o!==87&&o!==119||!Y$.call(s,s.previous)||g4(s.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(Cpe,t.attempt(V$,t.attempt(q$,i),n),n)(o))}function i(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function Tpe(t,e,n){const s=this;let r="",i=!1;return o;function o(p){return(p===72||p===104)&&Z$.call(s,s.previous)&&!g4(s.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),r+=String.fromCodePoint(p),t.consume(p),c):n(p)}function c(p){if(Ds(p)&&r.length<5)return r+=String.fromCodePoint(p),t.consume(p),c;if(p===58){const y=r.toLowerCase();if(y==="http"||y==="https")return t.consume(p),u}return n(p)}function u(p){return p===47?(t.consume(p),i?h:(i=!0,u)):n(p)}function h(p){return p===null||av(p)||Jt(p)||ic(p)||$b(p)?n(p):t.attempt(V$,t.attempt(q$,m),n)(p)}function m(p){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(p)}}function Rpe(t,e,n){let s=0;return r;function r(o){return(o===87||o===119)&&s<3?(s++,t.consume(o),r):o===46&&s===3?(t.consume(o),i):n(o)}function i(o){return o===null?n(o):e(o)}}function Ope(t,e,n){let s,r,i;return o;function o(h){return h===46||h===95?t.check(K$,u,c)(h):h===null||Jt(h)||ic(h)||h!==45&&$b(h)?u(h):(i=!0,t.consume(h),o)}function c(h){return h===95?s=!0:(r=s,s=void 0),t.consume(h),o}function u(h){return r||s||!i?n(h):e(h)}}function Mpe(t,e){let n=0,s=0;return r;function r(o){return o===40?(n++,t.consume(o),r):o===41&&s<n?i(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(K$,e,i)(o):o===null||Jt(o)||ic(o)?e(o):(t.consume(o),r)}function i(o){return o===41&&s++,t.consume(o),r}}function Dpe(t,e,n){return s;function s(c){return c===33||c===34||c===39||c===41||c===42||c===44||c===46||c===58||c===59||c===63||c===95||c===126?(t.consume(c),s):c===38?(t.consume(c),i):c===93?(t.consume(c),r):c===60||c===null||Jt(c)||ic(c)?e(c):n(c)}function r(c){return c===null||c===40||c===91||Jt(c)||ic(c)?e(c):s(c)}function i(c){return Ds(c)?o(c):n(c)}function o(c){return c===59?(t.consume(c),s):Ds(c)?(t.consume(c),o):n(c)}}function Bpe(t,e,n){return s;function s(i){return t.consume(i),r}function r(i){return Ss(i)?n(i):e(i)}}function Y$(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||Jt(t)}function Z$(t){return!Ds(t)}function X$(t){return!(t===47||D2(t))}function D2(t){return t===43||t===45||t===46||t===95||Ss(t)}function g4(t){let e=t.length,n=!1;for(;e--;){const s=t[e][1];if((s.type==="labelLink"||s.type==="labelImage")&&!s._balanced){n=!0;break}if(s._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const Lpe={tokenize:Vpe,partial:!0};function Ipe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Upe,continuation:{tokenize:Hpe},exit:Fpe}},text:{91:{name:"gfmFootnoteCall",tokenize:zpe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Ppe,resolveTo:$pe}}}}function Ppe(t,e,n){const s=this;let r=s.events.length;const i=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let o;for(;r--;){const u=s.events[r][1];if(u.type==="labelImage"){o=u;break}if(u.type==="gfmFootnoteCall"||u.type==="labelLink"||u.type==="label"||u.type==="image"||u.type==="link")break}return c;function c(u){if(!o||!o._balanced)return n(u);const h=fi(s.sliceSerialize({start:o.end,end:s.now()}));return h.codePointAt(0)!==94||!i.includes(h.slice(1))?n(u):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(u),t.exit("gfmFootnoteCallLabelMarker"),e(u))}}function $pe(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const s={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},r={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};r.end.column++,r.end.offset++,r.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},r.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},c=[t[n+1],t[n+2],["enter",s,e],t[n+3],t[n+4],["enter",r,e],["exit",r,e],["enter",i,e],["enter",o,e],["exit",o,e],["exit",i,e],t[t.length-2],t[t.length-1],["exit",s,e]];return t.splice(n,t.length-n+1,...c),t}function zpe(t,e,n){const s=this,r=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let i=0,o;return c;function c(p){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),u}function u(p){return p!==94?n(p):(t.enter("gfmFootnoteCallMarker"),t.consume(p),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",h)}function h(p){if(i>999||p===93&&!o||p===null||p===91||Jt(p))return n(p);if(p===93){t.exit("chunkString");const y=t.exit("gfmFootnoteCallString");return r.includes(fi(s.sliceSerialize(y)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(p)}return Jt(p)||(o=!0),i++,t.consume(p),p===92?m:h}function m(p){return p===91||p===92||p===93?(t.consume(p),i++,h):h(p)}}function Upe(t,e,n){const s=this,r=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let i,o=0,c;return u;function u(x){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionLabelMarker"),h}function h(x){return x===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",m):n(x)}function m(x){if(o>999||x===93&&!c||x===null||x===91||Jt(x))return n(x);if(x===93){t.exit("chunkString");const _=t.exit("gfmFootnoteDefinitionLabelString");return i=fi(s.sliceSerialize(_)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),y}return Jt(x)||(c=!0),o++,t.consume(x),x===92?p:m}function p(x){return x===91||x===92||x===93?(t.consume(x),o++,m):m(x)}function y(x){return x===58?(t.enter("definitionMarker"),t.consume(x),t.exit("definitionMarker"),r.includes(i)||r.push(i),Dt(t,v,"gfmFootnoteDefinitionWhitespace")):n(x)}function v(x){return e(x)}}function Hpe(t,e,n){return t.check(hm,e,t.attempt(Lpe,e,n))}function Fpe(t){t.exit("gfmFootnoteDefinition")}function Vpe(t,e,n){const s=this;return Dt(t,r,"gfmFootnoteDefinitionIndent",5);function r(i){const o=s.events[s.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(i):n(i)}}function qpe(t){let n=(t||{}).singleTilde;const s={name:"strikethrough",tokenize:i,resolveAll:r};return n==null&&(n=!0),{text:{126:s},insideSpan:{null:[s]},attentionMarkers:{null:[126]}};function r(o,c){let u=-1;for(;++u<o.length;)if(o[u][0]==="enter"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._close){let h=u;for(;h--;)if(o[h][0]==="exit"&&o[h][1].type==="strikethroughSequenceTemporary"&&o[h][1]._open&&o[u][1].end.offset-o[u][1].start.offset===o[h][1].end.offset-o[h][1].start.offset){o[u][1].type="strikethroughSequence",o[h][1].type="strikethroughSequence";const m={type:"strikethrough",start:Object.assign({},o[h][1].start),end:Object.assign({},o[u][1].end)},p={type:"strikethroughText",start:Object.assign({},o[h][1].end),end:Object.assign({},o[u][1].start)},y=[["enter",m,c],["enter",o[h][1],c],["exit",o[h][1],c],["enter",p,c]],v=c.parser.constructs.insideSpan.null;v&&Nr(y,y.length,0,zb(v,o.slice(h+1,u),c)),Nr(y,y.length,0,[["exit",p,c],["enter",o[u][1],c],["exit",o[u][1],c],["exit",m,c]]),Nr(o,h-1,u-h+3,y),u=h+y.length-2;break}}for(u=-1;++u<o.length;)o[u][1].type==="strikethroughSequenceTemporary"&&(o[u][1].type="data");return o}function i(o,c,u){const h=this.previous,m=this.events;let p=0;return y;function y(x){return h===126&&m[m.length-1][1].type!=="characterEscape"?u(x):(o.enter("strikethroughSequenceTemporary"),v(x))}function v(x){const _=ih(h);if(x===126)return p>1?u(x):(o.consume(x),p++,v);if(p<2&&!n)return u(x);const S=o.exit("strikethroughSequenceTemporary"),k=ih(x);return S._open=!k||k===2&&!!_,S._close=!_||_===2&&!!k,c(x)}}}class Kpe{constructor(){this.map=[]}add(e,n,s){Wpe(this,e,n,s)}consume(e){if(this.map.sort(function(i,o){return i[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const s=[];for(;n>0;)n-=1,s.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];s.push(e.slice()),e.length=0;let r=s.pop();for(;r;){for(const i of r)e.push(i);r=s.pop()}this.map.length=0}}function Wpe(t,e,n,s){let r=0;if(!(n===0&&s.length===0)){for(;r<t.map.length;){if(t.map[r][0]===e){t.map[r][1]+=n,t.map[r][2].push(...s);return}r+=1}t.map.push([e,n,s])}}function Gpe(t,e){let n=!1;const s=[];for(;e<t.length;){const r=t[e];if(n){if(r[0]==="enter")r[1].type==="tableContent"&&s.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(r[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const i=s.length-1;s[i]=s[i]==="left"?"center":"right"}}else if(r[1].type==="tableDelimiterRow")break}else r[0]==="enter"&&r[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return s}function Ype(){return{flow:{null:{name:"table",tokenize:Zpe,resolveAll:Xpe}}}}function Zpe(t,e,n){const s=this;let r=0,i=0,o;return c;function c(P){let G=s.events.length-1;for(;G>-1;){const Z=s.events[G][1].type;if(Z==="lineEnding"||Z==="linePrefix")G--;else break}const z=G>-1?s.events[G][1].type:null,K=z==="tableHead"||z==="tableRow"?E:u;return K===E&&s.parser.lazy[s.now().line]?n(P):K(P)}function u(P){return t.enter("tableHead"),t.enter("tableRow"),h(P)}function h(P){return P===124||(o=!0,i+=1),m(P)}function m(P){return P===null?n(P):at(P)?i>1?(i=0,s.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(P),t.exit("lineEnding"),v):n(P):Et(P)?Dt(t,m,"whitespace")(P):(i+=1,o&&(o=!1,r+=1),P===124?(t.enter("tableCellDivider"),t.consume(P),t.exit("tableCellDivider"),o=!0,m):(t.enter("data"),p(P)))}function p(P){return P===null||P===124||Jt(P)?(t.exit("data"),m(P)):(t.consume(P),P===92?y:p)}function y(P){return P===92||P===124?(t.consume(P),p):p(P)}function v(P){return s.interrupt=!1,s.parser.lazy[s.now().line]?n(P):(t.enter("tableDelimiterRow"),o=!1,Et(P)?Dt(t,x,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):x(P))}function x(P){return P===45||P===58?S(P):P===124?(o=!0,t.enter("tableCellDivider"),t.consume(P),t.exit("tableCellDivider"),_):O(P)}function _(P){return Et(P)?Dt(t,S,"whitespace")(P):S(P)}function S(P){return P===58?(i+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(P),t.exit("tableDelimiterMarker"),k):P===45?(i+=1,k(P)):P===null||at(P)?R(P):O(P)}function k(P){return P===45?(t.enter("tableDelimiterFiller"),C(P)):O(P)}function C(P){return P===45?(t.consume(P),C):P===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(P),t.exit("tableDelimiterMarker"),N):(t.exit("tableDelimiterFiller"),N(P))}function N(P){return Et(P)?Dt(t,R,"whitespace")(P):R(P)}function R(P){return P===124?x(P):P===null||at(P)?!o||r!==i?O(P):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(P)):O(P)}function O(P){return n(P)}function E(P){return t.enter("tableRow"),D(P)}function D(P){return P===124?(t.enter("tableCellDivider"),t.consume(P),t.exit("tableCellDivider"),D):P===null||at(P)?(t.exit("tableRow"),e(P)):Et(P)?Dt(t,D,"whitespace")(P):(t.enter("data"),B(P))}function B(P){return P===null||P===124||Jt(P)?(t.exit("data"),D(P)):(t.consume(P),P===92?q:B)}function q(P){return P===92||P===124?(t.consume(P),B):B(P)}}function Xpe(t,e){let n=-1,s=!0,r=0,i=[0,0,0,0],o=[0,0,0,0],c=!1,u=0,h,m,p;const y=new Kpe;for(;++n<t.length;){const v=t[n],x=v[1];v[0]==="enter"?x.type==="tableHead"?(c=!1,u!==0&&(JM(y,e,u,h,m),m=void 0,u=0),h={type:"table",start:Object.assign({},x.start),end:Object.assign({},x.end)},y.add(n,0,[["enter",h,e]])):x.type==="tableRow"||x.type==="tableDelimiterRow"?(s=!0,p=void 0,i=[0,0,0,0],o=[0,n+1,0,0],c&&(c=!1,m={type:"tableBody",start:Object.assign({},x.start),end:Object.assign({},x.end)},y.add(n,0,[["enter",m,e]])),r=x.type==="tableDelimiterRow"?2:m?3:1):r&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")?(s=!1,o[2]===0&&(i[1]!==0&&(o[0]=o[1],p=f0(y,e,i,r,void 0,p),i=[0,0,0,0]),o[2]=n)):x.type==="tableCellDivider"&&(s?s=!1:(i[1]!==0&&(o[0]=o[1],p=f0(y,e,i,r,void 0,p)),i=o,o=[i[1],n,0,0])):x.type==="tableHead"?(c=!0,u=n):x.type==="tableRow"||x.type==="tableDelimiterRow"?(u=n,i[1]!==0?(o[0]=o[1],p=f0(y,e,i,r,n,p)):o[1]!==0&&(p=f0(y,e,o,r,n,p)),r=0):r&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")&&(o[3]=n)}for(u!==0&&JM(y,e,u,h,m),y.consume(e.events),n=-1;++n<e.events.length;){const v=e.events[n];v[0]==="enter"&&v[1].type==="table"&&(v[1]._align=Gpe(e.events,n))}return t}function f0(t,e,n,s,r,i){const o=s===1?"tableHeader":s===2?"tableDelimiter":"tableData",c="tableContent";n[0]!==0&&(i.end=Object.assign({},_u(e.events,n[0])),t.add(n[0],0,[["exit",i,e]]));const u=_u(e.events,n[1]);if(i={type:o,start:Object.assign({},u),end:Object.assign({},u)},t.add(n[1],0,[["enter",i,e]]),n[2]!==0){const h=_u(e.events,n[2]),m=_u(e.events,n[3]),p={type:c,start:Object.assign({},h),end:Object.assign({},m)};if(t.add(n[2],0,[["enter",p,e]]),s!==2){const y=e.events[n[2]],v=e.events[n[3]];if(y[1].end=Object.assign({},v[1].end),y[1].type="chunkText",y[1].contentType="text",n[3]>n[2]+1){const x=n[2]+1,_=n[3]-n[2]-1;t.add(x,_,[])}}t.add(n[3]+1,0,[["exit",p,e]])}return r!==void 0&&(i.end=Object.assign({},_u(e.events,r)),t.add(r,0,[["exit",i,e]]),i=void 0),i}function JM(t,e,n,s,r){const i=[],o=_u(e.events,n);r&&(r.end=Object.assign({},o),i.push(["exit",r,e])),s.end=Object.assign({},o),i.push(["exit",s,e]),t.add(n+1,0,i)}function _u(t,e){const n=t[e],s=n[0]==="enter"?"start":"end";return n[1][s]}const Jpe={name:"tasklistCheck",tokenize:eme};function Qpe(){return{text:{91:Jpe}}}function eme(t,e,n){const s=this;return r;function r(u){return s.previous!==null||!s._gfmTasklistFirstContentOfListItem?n(u):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(u),t.exit("taskListCheckMarker"),i)}function i(u){return Jt(u)?(t.enter("taskListCheckValueUnchecked"),t.consume(u),t.exit("taskListCheckValueUnchecked"),o):u===88||u===120?(t.enter("taskListCheckValueChecked"),t.consume(u),t.exit("taskListCheckValueChecked"),o):n(u)}function o(u){return u===93?(t.enter("taskListCheckMarker"),t.consume(u),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),c):n(u)}function c(u){return at(u)?e(u):Et(u)?t.check({tokenize:tme},e,n)(u):n(u)}}function tme(t,e,n){return Dt(t,s,"whitespace");function s(r){return r===null?n(r):e(r)}}function nme(t){return o$([Epe(),Ipe(),qpe(t),Ype(),Qpe()])}const sme={};function rme(t){const e=this,n=t||sme,s=e.data(),r=s.micromarkExtensions||(s.micromarkExtensions=[]),i=s.fromMarkdownExtensions||(s.fromMarkdownExtensions=[]),o=s.toMarkdownExtensions||(s.toMarkdownExtensions=[]);r.push(nme(n)),i.push(Spe()),o.push(kpe(n))}function ime(t){A$(t,[/\r?\n|\r/g,ame])}function ame(){return{type:"break"}}function ome(){return function(t){ime(t)}}const lme={pre:({children:t})=>f.jsx(f.Fragment,{children:t}),li:({children:t,...e})=>f.jsx("li",{className:"py-0.5 ml-0",...e,children:t}),ul:({children:t,...e})=>f.jsx("ul",{className:"list-disc list-outside ml-5 pl-0 my-2",...e,children:t}),ol:({children:t,...e})=>f.jsx("ol",{className:"list-decimal list-outside ml-5 pl-0 my-2",...e,children:t}),strong:({children:t,...e})=>f.jsx("span",{className:"font-semibold",...e,children:t}),a:({children:t,href:e,...n})=>{let s=e||"";return s&&!s.startsWith("http")&&!s.startsWith("#")&&(s=`https://${s}`),f.jsx("a",{className:"text-sky-400 hover:underline",href:s,target:"_blank",rel:"noreferrer noopener",...n,children:t})},h1:({children:t,...e})=>f.jsx("h1",{className:"text-xl font-semibold mt-4 mb-2",...e,children:t}),h2:({children:t,...e})=>f.jsx("h2",{className:"text-lg font-semibold mt-4 mb-2",...e,children:t}),h3:({children:t,...e})=>f.jsx("h3",{className:"text-base font-semibold mt-3 mb-1",...e,children:t}),h4:({children:t,...e})=>f.jsx("h4",{className:"text-sm font-semibold mt-3 mb-1",...e,children:t}),h5:({children:t,...e})=>f.jsx("h5",{className:"text-sm font-semibold mt-2 mb-1",...e,children:t}),h6:({children:t,...e})=>f.jsx("h6",{className:"text-xs font-semibold mt-2 mb-1",...e,children:t}),p:({children:t,...e})=>f.jsx("p",{className:"my-2 leading-relaxed",...e,children:t}),table:({children:t,...e})=>f.jsx("div",{className:"overflow-x-auto my-3",children:f.jsx("table",{className:"w-full border-collapse border border-neutral-600 text-xs",...e,children:t})}),thead:({children:t,...e})=>f.jsx("thead",{className:"bg-neutral-700",...e,children:t}),tbody:({children:t,...e})=>f.jsx("tbody",{...e,children:t}),tr:({children:t,...e})=>f.jsx("tr",{className:"border-b border-neutral-600",...e,children:t}),th:({children:t,...e})=>f.jsx("th",{className:"p-2 text-left font-semibold border-r last:border-r-0 border-neutral-600",...e,children:t}),td:({children:t,...e})=>f.jsx("td",{className:"p-2 border-r last:border-r-0 border-neutral-600",...e,children:t}),blockquote:({children:t,...e})=>f.jsx("blockquote",{className:"border-l-4 border-neutral-500 pl-3 py-1 my-2 italic text-neutral-300",...e,children:t}),hr:({...t})=>f.jsx("hr",{className:"my-4 border-neutral-600",...t}),code({children:t,className:e,...n}){const s=/language-(\w+)/.exec(e||""),r=String(t).replace(/\n$/,""),i=r.includes(`
`);if(!s&&!i)return f.jsx("code",{...n,className:`${e||""} bg-neutral-700 px-1.5 py-0.5 rounded text-xs font-mono text-sky-300`,children:t});const o=s?.[1]||"text";return f.jsxs("div",{className:"my-3",children:[f.jsx("div",{className:"flex items-center justify-between bg-neutral-700 px-3 py-1 rounded-t text-xs text-neutral-400",children:f.jsx("span",{children:o})}),f.jsx("pre",{className:"bg-neutral-800 p-3 rounded-b overflow-x-auto",children:f.jsx("code",{className:"text-xs font-mono text-neutral-200",children:r})})]})}},cme=[rme,ome],ume=t=>{const e=De.c(6),{children:n}=t;if(!n)return null;let s=n,r;if(e[0]!==s){s=s.replace(/^(#{1,6}\s+.+)\n```/gm,"$1\n\n```");let o;e[3]===Symbol.for("react.memo_cache_sentinel")?(o=/```\n(#{1,6}\s+)/gm,e[3]=o):o=e[3],r=s.replace(o,"```\n\n$1"),e[0]=s,e[1]=r,e[2]=s}else r=e[1],s=e[2];s=r;let i;return e[4]!==s?(i=f.jsx(Kde,{remarkPlugins:cme,components:lme,children:s}),e[4]=s,e[5]=i):i=e[5],i},hme=V.memo(ume,(t,e)=>t.children===e.children);function J$({isOpen:t,onClose:e,otherPanelOpen:n=!1,adapter:s,environment:r}){const[i,o]=V.useState([]),[c,u]=V.useState([]),[h,m]=V.useState(""),[p,y]=V.useState(!1),v=V.useRef(null),x=V.useRef(null),_=V.useRef(s.id);V.useEffect(()=>{_.current!==s.id&&(o([]),u([]),_.current=s.id)},[s.id]),V.useEffect(()=>{v.current?.scrollIntoView({behavior:"smooth"})},[i]),V.useEffect(()=>{t&&x.current?.focus()},[t]);const S=async N=>{if(N.preventDefault(),!h.trim()||p)return;const R={id:Date.now().toString(),role:"user",content:h.trim()},O=(Date.now()+1).toString();o(E=>[...E,R]),m(""),y(!0),o(E=>[...E,{id:O,role:"assistant",content:"",isStreaming:!0}]);try{const E=$i().ai?.model||"",D=s.buildInstructions(r);let q=[...c,{role:xl.User,content:R.content}],P=0;const G=10;for(;P<G;){P++;const z=await Ble(E,D,q,s.tools,(K,Z)=>{o(W=>W.map(I=>I.id===O?{...I,content:Z}:I))});if(!z.toolCalls||z.toolCalls.length===0){u([...q,z]),o(K=>K.map(Z=>Z.id===O?{...Z,content:z.content,isStreaming:!1}:Z));break}q=[...q,z];for(const K of z.toolCalls){console.log("Tool call:",K.name,JSON.parse(K.arguments));const Z=await s.executeTool(K,r);q.push({role:xl.Tool,content:"",toolResult:Z})}}}catch(E){console.error("Chat error:",E),o(D=>D.map(B=>B.id===O?{...B,content:"Sorry, I encountered an error. Please try again.",isStreaming:!1}:B))}finally{y(!1)}},k=N=>{N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),S(N))},C=()=>{o([]),u([])};return f.jsxs("div",{className:`fixed top-0 right-0 h-screen bg-white border-l border-neutral-200 dark:bg-neutral-900 dark:border-neutral-800 flex flex-col transition-all duration-300 ease-in-out z-30 ${t?"opacity-100 translate-x-0":"opacity-0 translate-x-full pointer-events-none"}`,style:{width:n?"28rem":"40rem"},children:[f.jsxs("div",{className:"shrink-0 h-16 px-4 flex items-center justify-between border-b border-neutral-200 dark:border-neutral-800",children:[f.jsx("h3",{className:"font-semibold text-neutral-900 dark:text-neutral-100",children:s.name}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:C,className:"p-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded-md transition-colors",title:"Clear chat",children:f.jsx(Bp,{size:18})}),f.jsx("button",{onClick:e,className:"p-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded-md transition-colors",children:f.jsx(wv,{size:18})})]})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0",children:[i.map(N=>f.jsx("div",{className:`text-sm ${N.role==="user"?"bg-neutral-100 dark:bg-neutral-800/50 -mx-4 px-4 py-3 border-l-2 border-sky-500":""}`,children:f.jsx("div",{className:N.role==="user"?"text-neutral-900 dark:text-neutral-100":"text-neutral-800 dark:text-neutral-200",children:N.content?N.role==="assistant"?f.jsx(hme,{children:N.content}):f.jsx("span",{className:"whitespace-pre-wrap",children:N.content}):N.isStreaming&&f.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[f.jsx(Sa,{size:14,className:"animate-spin"}),"Thinking..."]})})},N.id)),f.jsx("div",{ref:v})]}),f.jsx("form",{onSubmit:S,className:"shrink-0 p-4 border-t border-neutral-200 dark:border-neutral-800",children:f.jsxs("div",{className:"flex items-end gap-2",children:[f.jsx("textarea",{ref:x,value:h,onChange:N=>m(N.target.value),onKeyDown:k,placeholder:s.placeholder,rows:1,disabled:p,className:"flex-1 px-4 py-2.5 bg-neutral-50 border border-neutral-300 dark:bg-neutral-800 dark:border-neutral-700 rounded-xl text-neutral-900 dark:text-neutral-100 text-sm placeholder-neutral-500 resize-none focus:outline-none focus:ring-2 focus:ring-sky-600 focus:border-transparent disabled:opacity-50",style:{maxHeight:"120px"}}),f.jsx("button",{type:"submit",disabled:!h.trim()||p,className:"p-2.5 bg-sky-600 hover:bg-sky-500 disabled:bg-neutral-300 dark:disabled:bg-neutral-700 disabled:text-neutral-500 text-white rounded-xl transition-colors",children:p?f.jsx(Sa,{size:18,className:"animate-spin"}):f.jsx(JG,{size:18})})]})})]})}const dme=[{name:"list_resources",description:"List Kubernetes resources of a specific type in a namespace or cluster-wide",parameters:{type:"object",properties:{resource:{type:"string",description:"The type of resource to list (e.g., pods, deployments, services, configmaps, secrets, ingresses, gateways, httproutes, grpcroutes, tcproutes, udproutes, tlsroutes, jobs, cronjobs, daemonsets, statefulsets, replicasets, nodes, namespaces, persistentvolumes, persistentvolumeclaims, events)"},namespace:{type:"string",description:'The namespace to list resources from. Use "all" for all namespaces, or omit for cluster-scoped resources'}},required:["resource"]}},{name:"get_resource",description:"Get detailed information about a specific Kubernetes resource",parameters:{type:"object",properties:{resource:{type:"string",description:"The type of resource (e.g., pod, deployment, service)"},name:{type:"string",description:"The name of the resource"},namespace:{type:"string",description:"The namespace of the resource (required for namespaced resources)"}},required:["resource","name"]}},{name:"get_pod_logs",description:"Get logs from a specific pod",parameters:{type:"object",properties:{name:{type:"string",description:"The name of the pod"},namespace:{type:"string",description:"The namespace of the pod"},container:{type:"string",description:"The container name (optional, defaults to first container)"},tailLines:{type:"string",description:"Number of lines to return from the end of the logs (default: 100)"}},required:["name","namespace"]}},{name:"describe_resource",description:"Get events and status conditions for a Kubernetes resource",parameters:{type:"object",properties:{resource:{type:"string",description:"The type of resource (e.g., pod, deployment, service)"},name:{type:"string",description:"The name of the resource"},namespace:{type:"string",description:"The namespace of the resource"}},required:["resource","name","namespace"]}}];async function $w(t,e){const n=e.toLowerCase(),s=await $o(t,n);return s?{config:s,plural:s.name}:null}async function fme(t,e,n){switch(e){case"list_resources":{const s=await $w(t,n.resource);if(!s)return{error:`Unknown resource type: ${n.resource}`};const{config:r,plural:i}=s,o=Ml(r);let c;r.namespaced&&n.namespace&&n.namespace!=="all"?c=`${o}/namespaces/${n.namespace}/${i}`:c=`${o}/${i}`;const u=await fetch(`/contexts/${t}${c}`);if(!u.ok)return{error:`Failed to list ${i}: ${u.status} ${u.statusText}`};const h=await u.json();return{kind:h.kind,items:h.items?.map(m=>({name:m.metadata?.name,namespace:m.metadata?.namespace,createdAt:m.metadata?.creationTimestamp,status:m.status}))||[]}}case"get_resource":{const s=await $w(t,n.resource);if(!s)return{error:`Unknown resource type: ${n.resource}`};const{config:r,plural:i}=s,o=Ml(r);let c;r.namespaced&&n.namespace?c=`${o}/namespaces/${n.namespace}/${i}/${n.name}`:c=`${o}/${i}/${n.name}`;const u=await fetch(`/contexts/${t}${c}`);return u.ok?u.json():{error:`Failed to get ${n.resource} ${n.name}: ${u.status} ${u.statusText}`}}case"get_pod_logs":{const s=n.tailLines||"100";let r=`/api/v1/namespaces/${n.namespace}/pods/${n.name}/log?tailLines=${s}`;n.container&&(r+=`&container=${n.container}`);const i=await fetch(`/contexts/${t}${r}`);return i.ok?{logs:await i.text()||"(no logs available)"}:{error:`Failed to get logs: ${i.status} ${i.statusText}`}}case"describe_resource":{const s=await $w(t,n.resource);if(!s)return{error:`Unknown resource type: ${n.resource}`};const{config:r,plural:i}=s,o=Ml(r);let c;r.namespaced&&n.namespace?c=`${o}/namespaces/${n.namespace}/${i}/${n.name}`:c=`${o}/${i}/${n.name}`;const u=await fetch(`/contexts/${t}${c}`);if(!u.ok)return{error:`Failed to get ${n.resource} ${n.name}: ${u.status}`};const h=await u.json(),m=`/api/v1/namespaces/${n.namespace}/events?fieldSelector=involvedObject.name=${n.name}`,p=await fetch(`/contexts/${t}${m}`);let y=[];return p.ok&&(y=(await p.json()).items?.map(x=>({type:x.type,reason:x.reason,message:x.message,lastTimestamp:x.lastTimestamp}))||[]),{metadata:h.metadata,spec:h.spec,status:h.status,events:y}}default:return{error:`Unknown tool: ${e}`}}}function pme(){return{id:"kubernetes",name:"Kubernetes Assistant",placeholder:"Ask about your Kubernetes resources...",tools:dme,async executeTool(t,e){const n=e,s=JSON.parse(t.arguments),r=await fme(n.currentContext,t.name,s);return{id:t.id,data:r}},buildInstructions(t){const e=t;let n="";const s=[];return e.currentNamespace&&s.push(`- Current namespace: ${e.currentNamespace}`),e.selectedResourceKind&&s.push(`- Currently viewing resource type: ${e.selectedResourceKind}`),e.selectedResourceName&&s.push(`- Currently selected resource: ${e.selectedResourceName}`),s.length>0&&(n=`

The user is currently viewing:
${s.join(`
`)}

Use this context to provide more relevant answers. When the user asks about resources without specifying a namespace, use the current namespace.`),`You are a helpful Kubernetes assistant. You can help users understand and manage their Kubernetes clusters.
When users ask about resources, use the available tools to fetch real data from the cluster.
Provide clear, concise explanations and highlight any issues or warnings you find.
Format your responses using markdown for better readability.${n}`}}}const zw="ai";function mme(t){const e=De.c(46),{resource:n,context:s,namespace:r,selectedItem:i,onSelectItem:o}=t,{isOpen:c,toggle:u,close:h}=jN();let m;e[0]!==c?(m=c(zw),e[0]=c,e[1]=m):m=e[1];const p=m;let y;e[2]!==s||e[3]!==r||e[4]!==n.group||e[5]!==n.name?(y=["kubernetes","resources",s,n.group,n.name,r],e[2]=s,e[3]=r,e[4]=n.group,e[5]=n.name,e[6]=y):y=e[6];let v;e[7]!==s||e[8]!==r||e[9]!==n?(v=()=>_D(s,n,r),e[7]=s,e[8]=r,e[9]=n,e[10]=v):v=e[10];const{data:x,loading:_,error:S,refetch:k,isRefetching:C}=fP(y,v);let N;e[11]!==n.group||e[12]!==n.kind||e[13]!==n.version?(N=Y=>Y.object.metadata?{name:Y.object.metadata.name||"",namespace:Y.object.metadata.namespace,uid:Y.object.metadata.uid||"",resourceVersion:Y.object.metadata.resourceVersion||"",kind:n.kind,apiVersion:n.group?`${n.group}/${n.version}`:n.version||""}:null,e[11]=n.group,e[12]=n.kind,e[13]=n.version,e[14]=N):N=e[14];const R=N;let O;e[15]===Symbol.for("react.memo_cache_sentinel")?(O=pme(),e[15]=O):O=e[15];const E=O;let D;e[16]!==s||e[17]!==r||e[18]!==n.group||e[19]!==n.kind||e[20]!==n.version?(D=Y=>({currentContext:s,currentNamespace:Y?.object.metadata?.namespace||r||"all namespaces",selectedResourceKind:n.group?`${n.kind} (${n.group}/${n.version})`:`${n.kind} (${n.version})`,selectedResourceName:Y?.object.metadata?.name}),e[16]=s,e[17]=r,e[18]=n.group,e[19]=n.kind,e[20]=n.version,e[21]=D):D=e[21];const B=D;let q;e[22]!==p||e[23]!==u?(q=()=>$i().ai?f.jsx("button",{onClick:()=>u(zw),className:`p-2 rounded-md transition-colors ${p?"text-sky-400 hover:text-sky-300 hover:bg-neutral-100 dark:hover:bg-neutral-800":"text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800"}`,title:"AI Assistant",children:f.jsx(gD,{size:18})}):null,e[22]=p,e[23]=u,e[24]=q):q=e[24];const P=q;let G;e[25]!==h||e[26]!==B||e[27]!==p?(G=(Y,J)=>{const $=B(Y);return f.jsx(J$,{isOpen:p,onClose:()=>h(zw),otherPanelOpen:J,adapter:E,environment:$})},e[25]=h,e[26]=B,e[27]=p,e[28]=G):G=e[28];const z=G;let K;e[29]!==s||e[30]!==R||e[31]!==p?(K=(Y,J,$)=>{const j=R(Y);return f.jsx(hP,{context:s,isOpen:!0,onClose:J,otherPanelOpen:$||p,resource:j})},e[29]=s,e[30]=R,e[31]=p,e[32]=K):K=e[32];const Z=K,W=gme;let I;return e[33]!==x||e[34]!==S||e[35]!==C||e[36]!==_||e[37]!==r||e[38]!==o||e[39]!==k||e[40]!==Z||e[41]!==z||e[42]!==P||e[43]!==n||e[44]!==i?(I=f.jsx(pP,{config:n,title:n.kind,namespace:r,data:x,loading:_,error:S,refetch:k,isRefetching:C,renderDetailPanel:Z,renderHeaderActions:P,renderExtraPanels:z,selectedItemName:i,onSelectItemName:o,getItemName:W}),e[33]=x,e[34]=S,e[35]=C,e[36]=_,e[37]=r,e[38]=o,e[39]=k,e[40]=Z,e[41]=z,e[42]=P,e[43]=n,e[44]=i,e[45]=I):I=e[45],I}function gme(t){return t.object.metadata?.name||""}const yme=new Set(["apps","batch","networking.k8s.io","storage.k8s.io","rbac.authorization.k8s.io","policy","autoscaling","coordination.k8s.io","discovery.k8s.io","events.k8s.io","node.k8s.io","scheduling.k8s.io"]),vme=t=>{const e=t.group||"";return e===""||yme.has(e)};function bme(){const t=De.c(75);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e={strict:!1},t[0]=e):e=t[0];const{context:n,resourceType:s,name:r}=jp(e);let i;t[1]===Symbol.for("react.memo_cache_sentinel")?(i={from:Kb.id},t[1]=i):i=t[1];const o=pv(i),c=oh();let u;t[2]===Symbol.for("react.memo_cache_sentinel")?(u=$i(),t[2]=u):u=t[2];const h=u,[m,p]=V.useState(!1),[y,v]=V.useState(null);let x;t[3]===Symbol.for("react.memo_cache_sentinel")?(x=h.kubernetes?.contexts||[],t[3]=x):x=t[3];const _=x;let S;t[4]===Symbol.for("react.memo_cache_sentinel")?(S=h.docker?.contexts||[],t[4]=S):S=t[4];const k=S;let C,N;t[5]!==n?(C=["kubernetes","namespaces",n],N=()=>n?CY(n):Promise.resolve({items:[]}),t[5]=n,t[6]=C,t[7]=N):(C=t[6],N=t[7]);const R=!!n;let O;t[8]!==R?(O={enabled:R},t[8]=R,t[9]=O):O=t[9];const{data:E}=fP(C,N,O);let D;t[10]!==E?.items?(D=E?.items||[],t[10]=E?.items,t[11]=D):D=t[11];const B=D;let q,P;t[12]!==n?(q=()=>{n&&SY(n)},P=[n],t[12]=n,t[13]=q,t[14]=P):(q=t[13],P=t[14]),V.useEffect(q,P);let G,z;t[15]!==n||t[16]!==s?(G=()=>{n&&s&&$o(n,s).then(je=>{if(je)v(je);else if(s.includes("."))return bD(n,s);return null}).then(je=>{je&&v(je)}).catch(()=>{v(null)})},z=[n,s],t[15]=n,t[16]=s,t[17]=G,t[18]=z):(G=t[17],z=t[18]),V.useEffect(G,z);const K=s?y:null;let Z;t[19]!==n||t[20]!==c||t[21]!==s||t[22]!==o.namespace?(Z=je=>{n&&(_Y(n),TY(n)),s?$o(je,s).then(We=>{c(We?{to:"/cluster/$context/$resourceType",params:{context:je,resourceType:s},search:{namespace:o.namespace}}:{to:"/cluster/$context",params:{context:je}})}).catch(()=>{c({to:"/cluster/$context",params:{context:je}})}):c({to:"/cluster/$context",params:{context:je},search:We=>({...We,namespace:o.namespace})})},t[19]=n,t[20]=c,t[21]=s,t[22]=o.namespace,t[23]=Z):Z=t[23];const W=Z;let I;t[24]!==c?(I=je=>{c({to:".",search:We=>({...We,namespace:je})})},t[24]=c,t[25]=I):I=t[25];const Y=I;let J;t[26]!==n||t[27]!==c?(J=je=>{if(je){const We=vme(je)?je.name:`${je.name}.${je.group}`;c({to:"/cluster/$context/$resourceType",params:{context:n,resourceType:We},search:kme})}else c({to:"/cluster/$context/$resourceType",params:{context:n,resourceType:"overview"},search:Sme})},t[26]=n,t[27]=c,t[28]=J):J=t[28];const $=J;let j;t[29]!==n||t[30]!==c||t[31]!==s?(j=je=>{je&&s?c({to:"/cluster/$context/$resourceType/$name",params:{context:n,resourceType:s,name:je},search:wme}):s&&c({to:"/cluster/$context/$resourceType",params:{context:n,resourceType:s},search:xme})},t[29]=n,t[30]=c,t[31]=s,t[32]=j):j=t[32];const M=j;let F;t[33]!==c?(F=je=>{c({to:"/docker/$context/$resourceType",params:{context:je,resourceType:"containers"}})},t[33]=c,t[34]=F):F=t[34];const A=F;let Q;t[35]===Symbol.for("react.memo_cache_sentinel")?(Q=()=>{p(!1)},t[35]=Q):Q=t[35];const se=Q,X=n||"";let ae;t[36]!==B||t[37]!==o.namespace||t[38]!==Y||t[39]!==$||t[40]!==X?(ae=KY({context:X,namespace:o.namespace,namespaces:B,setNamespace:Y,setSelectedResource:$,onClose:se}),t[36]=B,t[37]=o.namespace,t[38]=Y,t[39]=$,t[40]=X,t[41]=ae):ae=t[41];const ke=ae;let Se,Ve;t[42]===Symbol.for("react.memo_cache_sentinel")?(Se=()=>{const je=We=>{(We.metaKey||We.ctrlKey)&&We.key==="k"&&(We.preventDefault(),p(_me))};return document.addEventListener("keydown",je),()=>document.removeEventListener("keydown",je)},Ve=[],t[42]=Se,t[43]=Ve):(Se=t[42],Ve=t[43]),V.useEffect(Se,Ve);const Le=s==="overview",rt=!s,Ye=n||"";let Je;t[44]!==W||t[45]!==A||t[46]!==Ye?(Je=f.jsx("div",{className:"shrink-0 px-3 pt-3 pb-2",children:f.jsx(xD,{mode:"cluster",contexts:_,selectedContext:Ye,onSelectContext:W,dockerContexts:k,selectedDockerContext:"",onSelectDockerContext:A})}),t[44]=W,t[45]=A,t[46]=Ye,t[47]=Je):Je=t[47];const Rt=n||"";let At;t[48]!==Le||t[49]!==rt||t[50]!==B||t[51]!==y||t[52]!==o.namespace||t[53]!==Y||t[54]!==$||t[55]!==Rt?(At=f.jsx(BY,{context:Rt,namespace:o.namespace,namespaces:B,selectedResource:y,onSelectResource:$,onSelectNamespace:Y,isOverviewSelected:Le,isWelcome:rt}),t[48]=Le,t[49]=rt,t[50]=B,t[51]=y,t[52]=o.namespace,t[53]=Y,t[54]=$,t[55]=Rt,t[56]=At):At=t[56];let Zt;t[57]!==Je||t[58]!==At?(Zt=f.jsx("div",{className:"py-2 pl-2 shrink-0 h-full",children:f.jsxs("aside",{className:"w-56 h-full shrink-0 bg-white dark:bg-black/40 backdrop-blur-xl flex flex-col rounded-xl border border-neutral-300/50 dark:border-neutral-700/50",children:[Je,At]})}),t[57]=Je,t[58]=At,t[59]=Zt):Zt=t[59];let on;t[60]!==n||t[61]!==K||t[62]!==Le||t[63]!==rt||t[64]!==r||t[65]!==o.namespace||t[66]!==M?(on=rt?f.jsx("main",{className:"flex-1 flex flex-col h-full min-w-0 items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("img",{src:"/logo.png",alt:"Logo",className:"w-48 h-48 mx-auto dark:hidden"}),f.jsx("img",{src:"/logo_dark.png",alt:"Logo",className:"w-48 h-48 mx-auto hidden dark:block"}),f.jsxs("p",{className:"mt-4 text-sm text-neutral-500 dark:text-neutral-400",children:["Select a resource from the sidebar or press ",f.jsx("kbd",{className:"px-1.5 py-0.5 rounded bg-neutral-200 dark:bg-neutral-700 text-xs",children:"K"})," to search"]})]})}):Le?f.jsxs("main",{className:"flex-1 flex flex-col h-full min-w-0",children:[f.jsxs("header",{className:"shrink-0 h-14 flex items-center justify-between px-5 mt-2",children:[f.jsx("div",{className:"flex items-center gap-4",children:f.jsx("h2",{className:"text-lg font-medium text-neutral-900 dark:text-neutral-100",children:"Overview"})}),f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("button",{onClick:()=>p(!0),className:"p-2 rounded-md text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 transition-colors",title:"Command Palette (K)",children:f.jsx(hC,{size:18})})})]}),f.jsx("section",{className:"flex-1 overflow-hidden min-h-0",children:f.jsx(ioe,{context:n||"",namespace:o.namespace})})]}):K?f.jsx(mme,{context:n||"",namespace:o.namespace,resource:K,selectedItem:r,onSelectItem:M},`${K.group||""}/${K.name}`):f.jsx("div",{className:"flex-1 flex items-center justify-center text-neutral-500",children:"Loading resource..."}),t[60]=n,t[61]=K,t[62]=Le,t[63]=rt,t[64]=r,t[65]=o.namespace,t[66]=M,t[67]=on):on=t[67];let qt;t[68]!==ke||t[69]!==m?(qt=f.jsx(wD,{isOpen:m,onClose:se,adapter:ke}),t[68]=ke,t[69]=m,t[70]=qt):qt=t[70];let tn;return t[71]!==Zt||t[72]!==on||t[73]!==qt?(tn=f.jsxs("div",{className:"flex h-screen overflow-hidden bg-neutral-50 text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100",children:[Zt,on,qt]}),t[71]=Zt,t[72]=on,t[73]=qt,t[74]=tn):tn=t[74],tn}function _me(t){return!t}function xme(t){return t}function wme(t){return t}function Sme(t){return t}function kme(t){return t}const Cme=[{id:"containers",label:"Containers",icon:yi},{id:"images",label:"Images",icon:pi},{id:"volumes",label:"Volumes",icon:Ns},{id:"networks",label:"Networks",icon:Vn}];function Nme(t){const e=De.c(6),{selectedResource:n,onSelectResource:s,isWelcome:r}=t;let i;e[0]!==r||e[1]!==s||e[2]!==n?(i=Cme.map(c=>{const u=!r&&n===c.id;return f.jsx("li",{children:f.jsxs("button",{className:`flex items-center w-full px-3 py-2 text-sm rounded-lg transition-colors ${u?"bg-white/90 text-neutral-900 shadow-sm dark:bg-neutral-800 dark:text-neutral-100":"text-neutral-600 hover:bg-white/50 hover:text-neutral-900 dark:text-neutral-400 dark:hover:bg-neutral-800/50 dark:hover:text-neutral-200"}`,onClick:()=>s(c.id),children:[f.jsx(c.icon,{size:16,className:"mr-2.5 shrink-0 opacity-70"}),f.jsx("span",{className:"truncate",children:c.label})]})},c.id)}),e[0]=r,e[1]=s,e[2]=n,e[3]=i):i=e[3];let o;return e[4]!==i?(o=f.jsx("nav",{className:"flex-1 py-1 overflow-y-auto overflow-x-hidden min-h-0",children:f.jsx("ul",{className:"px-2",children:i})}),e[4]=i,e[5]=o):o=e[5],o}async function gc(t,e){const n=await fetch(`/contexts/${e}${t}`);if(!n.ok)throw new Error(`Docker API request failed: ${n.status} ${n.statusText}`);return n.json()}async function Qf(t,e=!0){return gc(`/containers/json?all=${e}`,t)}async function B2(t,e){return gc(`/containers/${e}/json`,t)}async function y4(t){return gc("/images/json",t)}async function Eme(t,e,n=!1){return Vb(`/images/${e}?force=${n}`,t)}async function Ame(t){return(await gc("/volumes",t)).Volumes??[]}async function QM(t,e){return gc(`/volumes/${encodeURIComponent(e)}`,t)}async function jme(t,e,n=!1){return Vb(`/volumes/${encodeURIComponent(e)}?force=${n}`,t)}async function Tme(t){return gc("/networks",t)}async function e6(t,e){return gc(`/networks/${e}`,t)}async function Rme(t,e){return Vb(`/networks/${e}`,t)}async function fm(t,e){const n=await fetch(`/contexts/${e}${t}`,{method:"POST"});if(!n.ok){const s=await n.text();throw new Error(s||`Docker API request failed: ${n.status} ${n.statusText}`)}}async function Vb(t,e){const n=await fetch(`/contexts/${e}${t}`,{method:"DELETE"});if(!n.ok){const s=await n.text();throw new Error(s||`Docker API request failed: ${n.status} ${n.statusText}`)}}async function Ome(t,e){return fm(`/containers/${e}/start`,t)}async function Mme(t,e){return fm(`/containers/${e}/stop`,t)}async function Dme(t,e){return fm(`/containers/${e}/restart`,t)}async function Bme(t,e){return fm(`/containers/${e}/pause`,t)}async function Lme(t,e){return fm(`/containers/${e}/unpause`,t)}async function Ime(t,e,n=!1){return Vb(`/containers/${e}?force=${n}`,t)}function Q$(t,e,n={}){const s=new URLSearchParams;return s.set("stdout",String(n.stdout??!0)),s.set("stderr",String(n.stderr??!0)),s.set("timestamps",String(n.timestamps??!0)),n.follow&&s.set("follow","true"),n.tail!==void 0&&s.set("tail",String(n.tail)),n.since!==void 0&&s.set("since",String(n.since)),n.until!==void 0&&s.set("until",String(n.until)),`/contexts/${t}/containers/${e}/logs?${s.toString()}`}async function Pme(t,e,n={}){const s=Q$(t,e,{...n,follow:!1}),r=await fetch(s);if(!r.ok)throw new Error(`Failed to fetch logs: ${r.status} ${r.statusText}`);return r.text()}async function $me(t,e,n,s,r){const i=Q$(t,e,{...n,follow:!0}),o=await fetch(i,{signal:r});if(!o.ok)throw new Error(`Failed to stream logs: ${o.status} ${o.statusText}`);const c=o.body?.getReader();if(!c)throw new Error("No response body");const u=new TextDecoder;let h=[],m="",p=null;const y=_=>{m+=_;const S=m.split(`
`);m=S.pop()||"";for(const k of S)k.trim()&&s(k)},v=_=>{const S=u.decode(_,{stream:!0});y(S)},x=()=>{for(;h.length>=8;){const _=h[4]<<24|h[5]<<16|h[6]<<8|h[7];if(h.length<8+_)break;const S=new Uint8Array(h.slice(8,8+_));h=h.slice(8+_);const k=u.decode(S,{stream:!0});y(k)}};try{for(;;){const{done:_,value:S}=await c.read();if(_)break;if(p===null&&S.length>0){const k=S[0];S.length>=4&&k<=2&&S[1]===0&&S[2]===0&&S[3]===0?p=!0:p=!1}p?(h.push(...S),x()):v(S)}m.trim()&&s(m)}finally{c.releaseLock()}}function Po(t){return!t||t.length===0?"unnamed":t[0].replace(/^\//,"")}function zme(t){if(t==="<none>:<none>")return{repository:"<none>",tag:"<none>"};if(t.includes("@")){const[r,i]=t.split("@");return{repository:r,tag:i}}const e=t.lastIndexOf("/"),s=(e>=0?t.substring(e+1):t).lastIndexOf(":");if(s>=0){const r=e>=0?e+1+s:s;return{repository:t.substring(0,r),tag:t.substring(r+1)}}return{repository:t,tag:"latest"}}function U0(t){return t<1024?`${t} B`:t<1024*1024?`${(t/1024).toFixed(1)} KB`:t<1024*1024*1024?`${(t/(1024*1024)).toFixed(1)} MB`:`${(t/(1024*1024*1024)).toFixed(2)} GB`}function Ume(t){return!t||t.length===0?"-":t.filter(e=>e.PublicPort).map(e=>`${e.PublicPort}:${e.PrivatePort}/${e.Type}`).join(", ")||"-"}function ez(t){if(!t||t<=0)return"-";const e=new Date(t*1e3),s=new Date().getTime()-e.getTime(),r=Math.floor(s/1e3),i=Math.floor(r/60),o=Math.floor(i/60),c=Math.floor(o/24);return c>0?`${c}d`:o>0?`${o}h`:i>0?`${i}m`:`${r}s`}function tz(t){const e=[{name:"Name",type:"string",format:"",description:"Container name",priority:0},{name:"Image",type:"string",format:"",description:"Container image",priority:0},{name:"Status",type:"string",format:"",description:"Container status",priority:0},{name:"State",type:"string",format:"",description:"Container state",priority:1},{name:"Ports",type:"string",format:"",description:"Published ports",priority:1},{name:"Age",type:"string",format:"",description:"Time since created",priority:1}],n=t.map(s=>({cells:[Po(s.Names??[]),s.Image??"",s.Status??"",s.State??"",Ume(s.Ports??[]),ez(s.Created??0)],object:s}));return{columnDefinitions:e,rows:n}}function nz(t){const e=[{name:"Repository",type:"string",format:"",description:"Image repository",priority:0},{name:"Tag",type:"string",format:"",description:"Image tag",priority:0},{name:"Image ID",type:"string",format:"",description:"Image identifier",priority:0},{name:"Size",type:"string",format:"",description:"Image size",priority:1},{name:"Age",type:"string",format:"",description:"Time since created",priority:1}],n=t.map(s=>{const r=s.RepoTags?.[0]||"<none>:<none>",{repository:i,tag:o}=zme(r);return{cells:[i||"<none>",o||"<none>",s.Id?.replace("sha256:","").substring(0,12)??"<none>",U0(s.Size),ez(s.Created??0)],object:s}});return{columnDefinitions:e,rows:n}}function sz(t){const e=[{name:"Name",type:"string",format:"",description:"Volume name",priority:0},{name:"Driver",type:"string",format:"",description:"Volume driver",priority:0},{name:"Scope",type:"string",format:"",description:"Volume scope",priority:1},{name:"Mountpoint",type:"string",format:"",description:"Mount location",priority:2}],n=t.map(s=>({cells:[s.Name??"",s.Driver??"local",s.Scope??"local",s.Mountpoint??""],object:s}));return{columnDefinitions:e,rows:n}}function rz(t){const e=[{name:"Name",type:"string",format:"",description:"Network name",priority:0},{name:"Driver",type:"string",format:"",description:"Network driver",priority:0},{name:"Scope",type:"string",format:"",description:"Network scope",priority:1},{name:"ID",type:"string",format:"",description:"Network identifier",priority:2}],n=t.map(s=>({cells:[s.Name??"",s.Driver??"bridge",s.Scope??"local",s.Id?.substring(0,12)??""],object:s}));return{columnDefinitions:e,rows:n}}function qd(t){return t.toLowerCase().replace(/[-_.]/g,"")}const t6=[{kind:"containers",label:"Containers",icon:yi,category:"Docker"},{kind:"images",label:"Images",icon:pi,category:"Docker"}];function Hme(t){const{context:e,onSelectResource:n,onClose:s}=t;return{id:"docker",resourceTypes:t6,supportsNamespaces:!1,searchModePrefixes:[{prefix:">",mode:"resources"}],getAvailableResourceTypes(){return t6},getNamespaces(){return[]},resourceTypeToSearchResult(i){return{id:`type-${i.kind}`,type:"resource-type",label:i.label,sublabel:i.category,icon:i.icon,category:i.category,data:{dockerResourceType:i.kind}}},async searchResources(i){if(!i||i.length<2)return[];const o=[],c=qd(i);try{const[u,h]=await Promise.all([Qf(e,!0),y4(e)]);for(const m of u){const y=(m.Names||[])[0]?.replace(/^\//,"")||m.Id?.substring(0,12)||"";qd(y).includes(c)&&o.push({id:`container/${m.Id}`,type:"resource",label:y,sublabel:`Container  ${m.State||"unknown"}`,icon:yi,category:"Docker",data:{dockerResourceType:"containers",resourceId:m.Id,resourceName:y}})}for(const m of h){const y=(m.RepoTags||[])[0]||m.Id?.substring(7,19)||"";qd(y).includes(c)&&o.push({id:`image/${m.Id}`,type:"resource",label:y,sublabel:"Image",icon:pi,category:"Docker",data:{dockerResourceType:"images",resourceId:m.Id,resourceName:y}})}}catch{}return o.sort((u,h)=>{const m=qd(u.label)===c,p=qd(h.label)===c;return m&&!p?-1:!m&&p?1:u.label.localeCompare(h.label)}),o.slice(0,50)},handleSelect(i){if(i.type==="resource-type"||i.type==="resource"){const o=i.data.dockerResourceType;o&&n(o)}s()},getPlaceholder(i){return i==="resources"?"Search resource types...":"Search containers and images... (> types)"},getHelpItems(){return[{prefix:">",label:"Resource types"}]},getCurrentScopeLabel(){return null}}}const Fme=[{name:"list_containers",description:"List all Docker containers (running and stopped)",parameters:{type:"object",properties:{all:{type:"string",description:"Whether to include stopped containers (default: true)"}},required:[]}},{name:"list_images",description:"List all Docker images on the system",parameters:{type:"object",properties:{},required:[]}},{name:"inspect_container",description:"Get detailed information about a specific container",parameters:{type:"object",properties:{container:{type:"string",description:"The container name or ID"}},required:["container"]}},{name:"get_container_logs",description:"Get logs from a specific container",parameters:{type:"object",properties:{container:{type:"string",description:"The container name or ID"},tail:{type:"string",description:"Number of lines to return from the end of the logs (default: 100)"}},required:["container"]}}];async function Vme(t,e,n){switch(e){case"list_containers":{const s=n.all!=="false";return{containers:(await Qf(t,s)).map(i=>({id:i.Id?.substring(0,12),name:Po(i.Names??[]),image:i.Image,state:i.State,status:i.Status,ports:i.Ports?.filter(o=>o.PublicPort).map(o=>`${o.PublicPort}:${o.PrivatePort}/${o.Type}`)}))}}case"list_images":return{images:(await y4(t)).map(r=>{const i=r.RepoTags?.[0]||"<none>:<none>",[o,c]=i.split(":");return{id:r.Id.replace("sha256:","").substring(0,12),repository:o,tag:c,size:qme(r.Size),created:new Date(r.Created*1e3).toISOString()}})};case"inspect_container":try{const r=(await Qf(t,!0)).find(o=>o.Id?.startsWith(n.container)||Po(o.Names??[]).toLowerCase()===n.container.toLowerCase());if(!r?.Id)return{error:`Container not found: ${n.container}`};const i=await B2(t,r.Id);return{id:i.Id?.substring(0,12),name:i.Name?.replace(/^\//,""),image:i.Config?.Image,state:{status:i.State?.Status,running:i.State?.Running,startedAt:i.State?.StartedAt,finishedAt:i.State?.FinishedAt,exitCode:i.State?.ExitCode},config:{env:i.Config?.Env,cmd:i.Config?.Cmd,workingDir:i.Config?.WorkingDir,exposedPorts:i.Config?.ExposedPorts?Object.keys(i.Config.ExposedPorts):[]},hostConfig:{portBindings:i.HostConfig?.PortBindings,binds:i.HostConfig?.Binds,networkMode:i.HostConfig?.NetworkMode,restartPolicy:i.HostConfig?.RestartPolicy},networkSettings:{ipAddress:i.NetworkSettings?.IPAddress,networks:i.NetworkSettings?.Networks?Object.keys(i.NetworkSettings.Networks):[]},mounts:i.Mounts?.map(o=>({type:o.Type,source:o.Source,destination:o.Destination,mode:o.Mode}))}}catch(s){return{error:`Failed to inspect container: ${s}`}}case"get_container_logs":try{const r=(await Qf(t,!0)).find(c=>c.Id?.startsWith(n.container)||Po(c.Names??[]).toLowerCase()===n.container.toLowerCase());if(!r?.Id)return{error:`Container not found: ${n.container}`};const i=parseInt(n.tail||"100",10);return{logs:await Pme(t,r.Id,{tail:i})||"(no logs available)"}}catch(s){return{error:`Failed to get logs: ${s}`}}default:return{error:`Unknown tool: ${e}`}}}function qme(t){return t<1024?`${t} B`:t<1024*1024?`${(t/1024).toFixed(1)} KB`:t<1024*1024*1024?`${(t/(1024*1024)).toFixed(1)} MB`:`${(t/(1024*1024*1024)).toFixed(2)} GB`}function Kme(){return{id:"docker",name:"Docker Assistant",placeholder:"Ask about your containers and images...",tools:Fme,async executeTool(t,e){const n=e,s=JSON.parse(t.arguments),r=await Vme(n.context,t.name,s);return{id:t.id,data:r}},buildInstructions(t){const e=t;let n="";const s=[];return e.selectedResourceType&&s.push(`- Currently viewing: ${e.selectedResourceType}`),e.selectedContainerName&&s.push(`- Currently selected container: ${e.selectedContainerName}`),s.length>0&&(n=`

The user is currently viewing:
${s.join(`
`)}

Use this context to provide more relevant answers.`),`You are a helpful Docker assistant. You can help users understand and manage their Docker containers and images.
When users ask about containers or images, use the available tools to fetch real data from the Docker daemon.
Provide clear, concise explanations and highlight any issues or warnings you find.
Format your responses using markdown for better readability.${n}`}}}function Wme(t){switch(t?.toLowerCase()){case"running":return"running";case"paused":return"paused";case"exited":return"exited";case"created":return"created";case"dead":return"dead";case"removing":return"removing";case"restarting":return"restarting";default:return}}function Gme(t){switch(t?.toLowerCase()){case"running":return"success";case"paused":return"warning";case"restarting":return"warning";case"exited":case"dead":return"error";default:return"neutral"}}const Yme={types:["container"],adapt(t){const e=[],n=t.State,s=t.Config,r=t.NetworkSettings,i=[{label:"Status",value:n?.Status??"Unknown",status:Gme(n?.Status),icon:n?.Running?V.createElement(Mu,{size:14}):n?.Paused?V.createElement(ip,{size:14}):V.createElement(Nj,{size:14})}];n?.Running&&i.push({label:"PID",value:n.Pid??0,status:"neutral"}),n?.ExitCode!==void 0&&n.ExitCode!==0&&i.push({label:"Exit Code",value:n.ExitCode,status:"error"}),e.push({id:"status",data:{type:"status-cards",items:i}});const o=[{label:"ID",value:t.Id?.substring(0,12)},{label:"Name",value:t.Name?.replace(/^\//,"")},{label:"Image",value:s?.Image},{label:"Created",value:t.Created?new Date(t.Created).toLocaleString():void 0},{label:"Platform",value:t.Platform},{label:"Driver",value:t.Driver}];n?.StartedAt&&n.StartedAt!=="0001-01-01T00:00:00Z"&&o.push({label:"Started",value:new Date(n.StartedAt).toLocaleString()}),n?.FinishedAt&&n.FinishedAt!=="0001-01-01T00:00:00Z"&&o.push({label:"Finished",value:new Date(n.FinishedAt).toLocaleString()}),e.push({id:"info",title:"Container",data:{type:"info-grid",items:o,columns:2}});const c=(s?.Env??[]).map(h=>{const[m,...p]=h.split("=");return{name:m,value:p.join("=")}}),u=[{name:t.Name?.replace(/^\//,"")??"container",image:s?.Image??"",state:Wme(n?.Status),stateReason:n?.Error||void 0,command:s?.Cmd??void 0,args:void 0,ports:Object.entries(s?.ExposedPorts??{}).map(([h])=>{const[m,p]=h.split("/");return{containerPort:parseInt(m,10),protocol:p?.toUpperCase()}}),mounts:t.Mounts?.map(h=>({name:h.Name??h.Type??"mount",mountPath:h.Destination??"",readOnly:!h.RW})),env:c.length>0?c:void 0}];if(e.push({id:"containers",title:"Configuration",data:{type:"containers",items:u}}),r?.Networks&&Object.keys(r.Networks).length>0){const h=[],m=[];for(const[p,y]of Object.entries(r.Networks))y.IPAddress&&h.push({type:`${p} IP`,address:y.IPAddress}),y.Gateway&&h.push({type:`${p} Gateway`,address:y.Gateway}),y.MacAddress&&m.push({label:`${p} MAC`,value:y.MacAddress});h.length>0&&e.push({id:"network-addresses",title:"Network",data:{type:"addresses",addresses:h}}),m.length>0&&e.push({id:"network-info",data:{type:"info-grid",items:m,columns:2}})}if(r?.Ports&&Object.keys(r.Ports).length>0){const h=[];for(const[m,p]of Object.entries(r.Ports))if(p&&p.length>0)for(const y of p)h.push({label:m,value:`${y.HostIp||"0.0.0.0"}:${y.HostPort}`});else h.push({label:m,value:"not published"});e.push({id:"ports",title:"Ports",data:{type:"info-grid",items:h,columns:2}})}if(t.Mounts&&t.Mounts.length>0){const h=t.Mounts.map(m=>({name:m.Name??m.Source??"volume",type:m.Type??"unknown",source:m.Source??"",extra:m.Driver?{Driver:m.Driver}:void 0,mounts:[{container:t.Name?.replace(/^\//,"")??"container",mountPath:m.Destination??"",readOnly:!m.RW}]}));e.push({id:"volumes",title:"Mounts",data:{type:"volumes",items:h}})}return s?.Labels&&Object.keys(s.Labels).length>0&&e.push({id:"labels",data:{type:"labels",labels:s.Labels}}),{sections:e}},actions:[{id:"start",label:"Start",icon:V.createElement(Mu,{size:14}),variant:"primary",execute:async(t,e)=>{await Ome(t,e.Id)},isVisible:t=>!t.State?.Running},{id:"stop",label:"Stop",icon:V.createElement(Nj,{size:14}),variant:"warning",execute:async(t,e)=>{await Mme(t,e.Id)},isVisible:t=>t.State?.Running===!0},{id:"restart",label:"Restart",icon:V.createElement(Ln,{size:14}),variant:"secondary",execute:async(t,e)=>{await Dme(t,e.Id)},isVisible:t=>t.State?.Running===!0},{id:"pause",label:"Pause",icon:V.createElement(ip,{size:14}),variant:"secondary",execute:async(t,e)=>{await Bme(t,e.Id)},isVisible:t=>{const e=t;return e.State?.Running===!0&&!e.State?.Paused}},{id:"unpause",label:"Unpause",icon:V.createElement(Mu,{size:14}),variant:"secondary",execute:async(t,e)=>{await Lme(t,e.Id)},isVisible:t=>t.State?.Paused===!0},{id:"delete",label:"Delete",icon:V.createElement(Bp,{size:14}),variant:"danger",confirm:{title:"Delete Container",message:"Are you sure you want to delete this container? This action cannot be undone.",confirmLabel:"Delete"},execute:async(t,e)=>{await Ime(t,e.Id)},isVisible:t=>!t.State?.Running}]};function Zme(t){return t?new Date(t*1e3).toLocaleString():"Unknown"}function n6(t){if(!t||t==="<none>:<none>")return{repository:"<none>",tag:"<none>"};if(t.includes("@")){const[r,i]=t.split("@");return{repository:r,tag:i}}const e=t.lastIndexOf("/"),s=(e>=0?t.substring(e+1):t).lastIndexOf(":");if(s>=0){const r=e>=0?e+1+s:s;return{repository:t.substring(0,r),tag:t.substring(r+1)}}return{repository:t,tag:"latest"}}const Xme={types:["image"],adapt(t){const e=[],n=t.RepoTags??[],s=t.RepoDigests??[],r=n[0]||"<none>:<none>",{repository:i,tag:o}=n6(r),c=[{label:"Size",value:U0(t.Size),status:"neutral",icon:V.createElement(pi,{size:14})}];n.length>0&&c.push({label:"Tags",value:n.length,status:"neutral",icon:V.createElement(yD,{size:14})}),t.Containers!==void 0&&t.Containers>=0&&c.push({label:"Containers",value:t.Containers,status:t.Containers>0?"success":"neutral"}),e.push({id:"status",data:{type:"status-cards",items:c}});const u=[{label:"Repository",value:i!=="<none>"?i:void 0},{label:"Tag",value:o!=="<none>"?o:void 0},{label:"Image ID",value:t.Id?.replace("sha256:","").substring(0,12)},{label:"Full ID",value:t.Id?.replace("sha256:","")},{label:"Size",value:U0(t.Size)},{label:"Virtual Size",value:t.VirtualSize?U0(t.VirtualSize):void 0},{label:"Created",value:Zme(t.Created)}];if(t.ParentId&&u.push({label:"Parent",value:t.ParentId.replace("sha256:","").substring(0,12)}),e.push({id:"info",title:"Information",data:{type:"info-grid",items:u.filter(m=>m.value)}}),n.length>1){const m=n.map(p=>{const y=n6(p);return{label:y.repository,value:y.tag}});e.push({id:"tags",title:"Tags",data:{type:"info-grid",items:m}})}if(s.length>0){const m=s.map(p=>{const[y,v]=p.split("@");return{label:y,value:v?.substring(7,19)+"..."}});e.push({id:"digests",title:"Digests",data:{type:"info-grid",items:m}})}const h=t.Labels;return h&&Object.keys(h).length>0&&e.push({id:"labels",data:{type:"labels",labels:h}}),{sections:e}},actions:[{id:"delete",label:"Delete",icon:V.createElement(Bp,{size:14}),variant:"danger",confirm:{title:"Delete Image",message:"Are you sure you want to delete this image? This action cannot be undone.",confirmLabel:"Delete"},execute:async(t,e)=>{await Eme(t,e.Id)},isDisabled:t=>{const e=t;return e.Containers&&e.Containers>0?"Image is used by containers":!1}}]};function Jme(t){if(t==null||t<0)return"Unknown";if(t===0)return"0 B";const e=["B","KB","MB","GB","TB"],n=Math.floor(Math.log(t)/Math.log(1024));return`${(t/Math.pow(1024,n)).toFixed(n>0?1:0)} ${e[n]}`}const Qme={types:["volume"],adapt(t){const e=[],n=[{label:"Driver",value:t.Driver??"local",status:"neutral",icon:V.createElement(Ns,{size:14})}];t.UsageData?.Size!==void 0&&t.UsageData.Size>=0&&n.push({label:"Size",value:Jme(t.UsageData.Size),status:"neutral"}),t.UsageData?.RefCount!==void 0&&t.UsageData.RefCount>=0&&n.push({label:"Containers",value:t.UsageData.RefCount,status:t.UsageData.RefCount>0?"success":"neutral"}),e.push({id:"status",data:{type:"status-cards",items:n}});const s=[{label:"Name",value:t.Name},{label:"Driver",value:t.Driver},{label:"Scope",value:t.Scope},{label:"Mountpoint",value:t.Mountpoint}];t.CreatedAt&&s.push({label:"Created",value:new Date(t.CreatedAt).toLocaleString()}),e.push({id:"info",title:"Information",data:{type:"info-grid",items:s.filter(o=>o.value)}});const r=t.Labels;r&&Object.keys(r).length>0&&e.push({id:"labels",data:{type:"labels",labels:r}});const i=t.Options;if(i&&Object.keys(i).length>0){const o=Object.entries(i).map(([c,u])=>({label:c,value:u}));e.push({id:"options",title:"Driver Options",data:{type:"info-grid",items:o}})}return{sections:e}},actions:[{id:"delete",label:"Delete",icon:V.createElement(Bp,{size:14}),variant:"danger",confirm:{title:"Delete Volume",message:"Are you sure you want to delete this volume? This action cannot be undone and all data will be lost.",confirmLabel:"Delete"},execute:async(t,e)=>{await jme(t,e.Name)},isDisabled:t=>{const e=t;return e.UsageData?.RefCount&&e.UsageData.RefCount>0?"Volume is in use by containers":!1}}]},s6=["bridge","host","none"],ege={types:["network"],adapt(t){const e=[],n=t.IPAM,s=t.Containers,r=[{label:"Driver",value:t.Driver??"bridge",status:"neutral",icon:V.createElement(Vn,{size:14})},{label:"Scope",value:t.Scope??"local",status:"neutral",icon:V.createElement(Cr,{size:14})}];t.Internal&&r.push({label:"Internal",value:"Yes",status:"warning",icon:V.createElement(Dp,{size:14})});const i=s?Object.keys(s).length:0;r.push({label:"Containers",value:i,status:i>0?"success":"neutral"}),e.push({id:"status",data:{type:"status-cards",items:r}});const o=[{label:"Name",value:t.Name},{label:"ID",value:t.Id?.substring(0,12)},{label:"Driver",value:t.Driver},{label:"Scope",value:t.Scope}];if(t.Created&&o.push({label:"Created",value:new Date(t.Created).toLocaleString()}),t.EnableIPv6&&o.push({label:"IPv6",value:"Enabled"}),t.Internal&&o.push({label:"Internal",value:"Yes"}),t.Attachable&&o.push({label:"Attachable",value:"Yes"}),t.Ingress&&o.push({label:"Ingress",value:"Yes"}),e.push({id:"info",title:"Information",data:{type:"info-grid",items:o.filter(u=>u.value)}}),n?.Config&&n.Config.length>0){const u=[];u.push({label:"Driver",value:n.Driver??"default"}),n.Config.forEach((h,m)=>{const p=n.Config.length>1?`[${m+1}] `:"";h.Subnet&&u.push({label:`${p}Subnet`,value:h.Subnet}),h.Gateway&&u.push({label:`${p}Gateway`,value:h.Gateway}),h.IPRange&&u.push({label:`${p}IP Range`,value:h.IPRange})}),e.push({id:"ipam",title:"IPAM Configuration",data:{type:"info-grid",items:u}})}if(s&&Object.keys(s).length>0){const u=Object.entries(s).map(([h,m])=>({label:m.Name||h.substring(0,12),value:m.IPv4Address||m.IPv6Address||"No IP"}));e.push({id:"containers",title:"Connected Containers",data:{type:"info-grid",items:u}})}const c=t.Labels;return c&&Object.keys(c).length>0&&e.push({id:"labels",data:{type:"labels",labels:c}}),{sections:e}},actions:[{id:"delete",label:"Delete",icon:V.createElement(Bp,{size:14}),variant:"danger",confirm:{title:"Delete Network",message:"Are you sure you want to delete this network? This action cannot be undone.",confirmLabel:"Delete"},execute:async(t,e)=>{await Rme(t,e.Id)},isDisabled:t=>{const e=t;return e.Name&&s6.includes(e.Name)?"Cannot delete built-in network":e.Containers&&Object.keys(e.Containers).length>0?"Network has connected containers":!1},isVisible:t=>{const e=t;return!e.Name||!s6.includes(e.Name)}}]},tge=[Yme,Xme,Qme,ege],v4=new Map;tge.forEach(t=>{t.types.forEach(e=>{v4.set(e.toLowerCase(),t)})});function iz(t){return v4.get(t.toLowerCase())??null}function nge(t){return v4.has(t.toLowerCase())}function sge(t,e){const n=iz(e);return n?n.adapt(t):null}function az(t,e="container"){const n=iz(e);return n?.actions?n.actions.filter(s=>!s.isVisible||s.isVisible(t)):[]}function rge(t){return"Config"in t&&"State"in t?"container":"RepoTags"in t||"RepoDigests"in t?"image":"Mountpoint"in t&&"Driver"in t&&!("IPAM"in t)?"volume":"IPAM"in t?"network":"container"}function ige(t){const e=De.c(13),{context:n,resource:s,onActionComplete:r,hideActions:i}=t,o=i===void 0?!1:i;let c,u,h,m;if(e[0]!==n||e[1]!==o||e[2]!==r||e[3]!==s){m=Symbol.for("react.early_return_sentinel");e:{const y=rge(s),v=sge(s,y),x=az(s,y);if(!v||v.sections.length===0){let _;e[8]===Symbol.for("react.memo_cache_sentinel")?(_=f.jsx("div",{className:"text-neutral-500 text-sm",children:"No visualization available"}),e[8]=_):_=e[8],m=_;break e}c="space-y-4",u=!o&&x.length>0&&f.jsx(kL,{context:n,actions:x,resource:s,onActionComplete:r}),h=v.sections.map(age)}e[0]=n,e[1]=o,e[2]=r,e[3]=s,e[4]=c,e[5]=u,e[6]=h,e[7]=m}else c=e[4],u=e[5],h=e[6],m=e[7];if(m!==Symbol.for("react.early_return_sentinel"))return m;let p;return e[9]!==c||e[10]!==u||e[11]!==h?(p=f.jsxs("div",{className:c,children:[u,h]}),e[9]=c,e[10]=u,e[11]=h,e[12]=p):p=e[12],p}function age(t){return f.jsx(CL,{section:t},t.id)}const oge=1e3;function r6(t){return t.replace(/\x1b\[[0-9;]*[a-zA-Z]/g,"")}function lge(t){const e=t.replace(/\r/g,""),n=e.match(/^(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?Z)\s*(.*)$/);if(n){const[,s,r]=n;return{timestamp:s,message:r6(r)}}return{message:r6(e)}}function cge(t){const e=De.c(21),{context:n,container:s,tailLines:r}=t,i=r===void 0?oge:r;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=[],e[0]=o):o=e[0];const[c,u]=V.useState(o),[h,m]=V.useState(null),p=V.useRef(null),y=s.Id;let v;e[1]!==s.Names?(v=s.Names??[],e[1]=s.Names,e[2]=v):v=e[2];let x;e[3]!==v?(x=Po(v),e[3]=v,e[4]=x):x=e[4];const _=x,S=s.State==="running";let k,C;e[5]!==y||e[6]!==_||e[7]!==n||e[8]!==S||e[9]!==i?(k=()=>{if(!S||!y)return;const D=new AbortController;return p.current=D,$me(n,y,{follow:!0,stdout:!0,stderr:!0,timestamps:!0,tail:i},B=>{const q=lge(B),P={timestamp:q.timestamp,message:q.message,source:_};u(G=>[...G,P])},D.signal).catch(B=>{B.name!=="AbortError"&&m(B.message)}),()=>{D.abort()}},C=[n,y,_,S,i],e[5]=y,e[6]=_,e[7]=n,e[8]=S,e[9]=i,e[10]=k,e[11]=C):(k=e[10],C=e[11]),V.useEffect(k,C);const N=S,R=S?void 0:"Container is not running. Start the container to view logs.";let O;e[12]!==_||e[13]!==N?(O=N?[_]:[],e[12]=_,e[13]=N,e[14]=O):O=e[14];let E;return e[15]!==h||e[16]!==N||e[17]!==c||e[18]!==O||e[19]!==R?(E={logs:c,sources:O,isLoading:!1,error:h,isAvailable:N,unavailableMessage:R},e[15]=h,e[16]=N,e[17]=c,e[18]=O,e[19]=R,e[20]=E):E=e[20],E}function uge(t){const e=De.c(10),{context:n,container:s,toolbarRef:r}=t;let i;e[0]!==s||e[1]!==n?(i={context:n,container:s},e[0]=s,e[1]=n,e[2]=i):i=e[2];const{logs:o,sources:c,isLoading:u,error:h,unavailableMessage:m}=cge(i);let p;return e[3]!==h||e[4]!==u||e[5]!==o||e[6]!==c||e[7]!==r||e[8]!==m?(p=f.jsx(EL,{logs:o,sources:c,isLoading:u,error:h,emptyMessage:"Waiting for logs...",unavailableMessage:m,toolbarRef:r}),e[3]=h,e[4]=u,e[5]=o,e[6]=c,e[7]=r,e[8]=m,e[9]=p):p=e[9],p}function hge(t){const e=De.c(4),{context:n,container:s,toolbarRef:r}=t;let i;return e[0]!==s||e[1]!==n||e[2]!==r?(i=f.jsx(uge,{context:n,container:s,toolbarRef:r},s.Id),e[0]=s,e[1]=n,e[2]=r,e[3]=i):i=e[3],i}function dge({context:t,isOpen:e,onClose:n,otherPanelOpen:s=!1,resource:r,resourceType:i="containers"}){const[o,c]=V.useState(null),[u,h]=V.useState(!1),[m,p]=V.useState(null),[y,v]=V.useState("overview"),[x,_]=V.useState(null),[S,k]=V.useState(null),C=V.useRef(null),N=5e3,O=V.useCallback(I=>I?i==="containers"||i==="images"?I.Id??"":i==="volumes"?I.Name??"":i==="networks"?I.Id??"":"":"",[i])(r),D=V.useCallback(I=>{if(!I)return"";if(i==="containers")return Po(I.Names??[]);if(i==="images"){const Y=I,J=Y.RepoTags?.[0];return J||(Y.Id?.replace("sha256:","").substring(0,12)??"")}return i==="volumes"||i==="networks"?I.Name??"":""},[i])(r),B=V.useCallback(async()=>{if(O)try{let I;if(i==="containers")I=await B2(t,O);else{if(i==="images")return;i==="volumes"?I=await QM(t,O):i==="networks"&&(I=await e6(t,O))}I&&c(I)}catch{}},[O,i,t]);V.useEffect(()=>{if(!e||!O||!o||i==="images")return;const I=setInterval(()=>{B()},N);return()=>clearInterval(I)},[e,O,o,B,i]),V.useEffect(()=>{if(v("overview"),!O){c(null),p(null);return}if(i==="images"){c(r);return}(async()=>{h(!0),p(null);try{let Y;i==="containers"?Y=await B2(t,O):i==="volumes"?Y=await QM(t,O):i==="networks"&&(Y=await e6(t,O)),Y&&c(Y)}catch(Y){p(Y instanceof Error?Y.message:"Failed to fetch resource details")}finally{h(!1)}})()},[O,i,r,t]);const q=i==="containers"?"container":i==="images"?"image":i==="volumes"?"volume":"network",P=o?az(o,q).filter(I=>!(I.isVisible&&!I.isVisible(o))):[],G=async I=>{if(I.confirm){k(I);return}await z(I)},z=async I=>{if(o){_(I.id),k(null);try{await I.execute(t,o),await B()}catch(Y){console.error("Action failed:",Y)}finally{_(null)}}};if(!e)return null;const Z=i==="containers"?[{id:"overview",label:"Overview"},{id:"logs",label:"Logs"}]:[{id:"overview",label:"Overview"}],W=nge(q);return f.jsxs("div",{className:`fixed right-0 top-0 h-full bg-white dark:bg-neutral-900 border-l border-neutral-200 dark:border-neutral-700 shadow-xl z-30 flex flex-col transition-all duration-300 ${s?"w-md":"w-xl"}`,children:[f.jsxs("div",{className:"shrink-0 h-14 flex items-center justify-between px-4 border-b border-neutral-200 dark:border-neutral-800",children:[f.jsx("div",{className:"flex items-center gap-3 min-w-0",children:f.jsxs("div",{className:"min-w-0",children:[f.jsx("h2",{className:"font-semibold text-sm text-neutral-900 dark:text-neutral-100 truncate",children:D||"Resource"}),r&&f.jsx("span",{className:"text-xs text-neutral-400 font-mono mt-0.5",children:O.substring(0,12)})]})}),f.jsx("div",{className:"flex items-center gap-1",children:f.jsx("button",{onClick:n,className:"p-2 rounded-lg text-neutral-500 hover:text-neutral-700 hover:bg-neutral-100 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 transition-colors",title:"Close",children:f.jsx(wv,{size:16})})})]}),f.jsxs("div",{className:"shrink-0 border-b border-neutral-200 dark:border-neutral-800 flex items-center",children:[f.jsx("div",{className:"flex",children:Z.filter(I=>I.id!=="overview"||W).map(I=>f.jsx("button",{onClick:()=>v(I.id),className:`px-4 py-2.5 text-sm font-medium transition-colors ${y===I.id?"text-neutral-900 dark:text-neutral-100 border-b-2 border-neutral-900 dark:border-neutral-100":"text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300"}`,children:I.label},I.id))}),f.jsxs("div",{className:"ml-auto pr-4 flex items-center gap-1",children:[f.jsx("div",{ref:C,className:"flex items-center gap-1"}),y==="overview"&&P.map(I=>{const Y=I.isDisabled?.(o),J=Y===!0||typeof Y=="string",$=typeof Y=="string"?Y:void 0,j=x===I.id;return f.jsx("button",{onClick:()=>G(I),disabled:J||j,title:$||I.label,className:`
                  flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium rounded transition-colors
                  ${J||j?"opacity-50 cursor-not-allowed":""}
                  ${I.variant==="primary"?"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 hover:bg-neutral-200 dark:hover:bg-neutral-800":I.variant==="warning"?"text-amber-600 dark:text-amber-400 hover:text-amber-700 dark:hover:text-amber-300 hover:bg-neutral-200 dark:hover:bg-neutral-800":I.variant==="danger"?"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 hover:bg-neutral-200 dark:hover:bg-neutral-800":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-200 dark:hover:bg-neutral-800"}
                `,children:j?f.jsx(Sa,{size:14,className:"animate-spin"}):I.icon},I.id)})]})]}),S&&f.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-lg shadow-xl max-w-md w-full mx-4 p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-neutral-100 mb-2",children:S.confirm?.title}),f.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mb-6",children:S.confirm?.message}),f.jsxs("div",{className:"flex justify-end gap-3",children:[f.jsx("button",{onClick:()=>k(null),className:"px-4 py-2 text-sm font-medium text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 transition-colors",children:"Cancel"}),f.jsx("button",{onClick:()=>z(S),className:`px-4 py-2 text-sm font-medium rounded transition-colors ${S.variant==="danger"?"bg-red-600 hover:bg-red-700 text-white":S.variant==="warning"?"bg-amber-600 hover:bg-amber-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:S.confirm?.confirmLabel||"Confirm"})]})]})}),f.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:u&&!o?f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsx(Sa,{className:"w-6 h-6 text-neutral-400 animate-spin"})}):m?f.jsx("div",{className:"p-4 text-red-500 text-sm",children:m}):r?f.jsxs(f.Fragment,{children:[y==="overview"&&o&&f.jsx("div",{className:"h-full overflow-auto p-4",children:f.jsx(ige,{context:t,resource:o,onActionComplete:B,hideActions:!0})}),y==="logs"&&i==="containers"&&r&&f.jsx(hge,{context:t,container:r,toolbarRef:C})]}):f.jsx("div",{className:"p-4 text-neutral-500 text-sm",children:"No resource selected"})})]})}const Uw="ai";function i6(t,e){switch(e){case"containers":return t.Id??"";case"images":return t.Id??"";case"volumes":return t.Name??"";case"networks":return t.Id??"";default:return""}}function fge(t,e){switch(e){case"containers":{const n=t;return n.Names?Po(n.Names):n.Id?.substring(0,12)??""}case"images":{const n=t;return n.RepoTags?.[0]?.replace(/:/g,"-")??n.Id?.substring(7,19)??""}case"volumes":return t.Name??"";case"networks":return t.Name??"";default:return""}}async function pge(t,e){let n;switch(e){case"containers":{const s=await Qf(t,!0);n=tz(s);break}case"images":{const s=await y4(t);n=nz(s);break}case"volumes":{const s=await Ame(t);n=sz(s);break}case"networks":{const s=await Tme(t);n=rz(s);break}}return[...n.rows].sort((s,r)=>{const i=i6(s.object,e),o=i6(r.object,e);return i.localeCompare(o)})}function mge(t){const e=De.c(51),{resourceType:n,context:s,selectedItem:r,onSelectItem:i}=t,{isOpen:o,toggle:c,close:u}=jN();let h;e[0]!==o?(h=o(Uw),e[0]=o,e[1]=h):h=e[1];const m=h;let p;e[2]!==s||e[3]!==n?(p={queryKey:["docker",s,n],queryFn:()=>pge(s,n),refetchInterval:5e3},e[2]=s,e[3]=n,e[4]=p):p=e[4];const{data:y,isLoading:v,error:x,refetch:_,isFetching:S}=J0(p);let k;e[5]!==y?(k=y===void 0?[]:y,e[5]=y,e[6]=k):k=e[6];const C=k,N=S&&!v;let R;e[7]===Symbol.for("react.memo_cache_sentinel")?(R=Kme(),e[7]=R):R=e[7];const O=R;let E;e[8]!==n?(E={name:n,namespaced:!1},e[8]=n,e[9]=E):E=e[9];const D=E;let B;e:{switch(n){case"containers":{let X;e[10]!==C?(X=tz(C.map(bge)),e[10]=C,e[11]=X):X=e[11],B=X;break e}case"images":{let X;e[12]!==C?(X=nz(C.map(vge)),e[12]=C,e[13]=X):X=e[13],B=X;break e}case"volumes":{let X;e[14]!==C?(X=sz(C.map(yge)),e[14]=C,e[15]=X):X=e[15],B=X;break e}case"networks":{let X;e[16]!==C?(X=rz(C.map(gge)),e[16]=C,e[17]=X):X=e[17],B=X;break e}}B=void 0}const q=B;let P;e[18]===Symbol.for("react.memo_cache_sentinel")?(P={containers:"Containers",images:"Images",volumes:"Volumes",networks:"Networks"},e[18]=P):P=e[18];const z=P[n];let K;e[19]!==s||e[20]!==n?(K=X=>{const ae=X?.object;return{context:s,selectedResourceType:n,selectedContainerId:n==="containers"?ae?.Id?.substring(0,12):void 0,selectedContainerName:n==="containers"&&ae?.Names?Po(ae.Names):void 0}},e[19]=s,e[20]=n,e[21]=K):K=e[21];const Z=K;let W;e[22]!==m||e[23]!==c?(W=()=>$i().ai?f.jsx("button",{onClick:()=>c(Uw),className:`p-2 rounded-md transition-colors ${m?"text-sky-400 hover:text-sky-300 hover:bg-neutral-100 dark:hover:bg-neutral-800":"text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800"}`,title:"AI Assistant",children:f.jsx(gD,{size:18})}):null,e[22]=m,e[23]=c,e[24]=W):W=e[24];const I=W;let Y;e[25]!==u||e[26]!==Z||e[27]!==m?(Y=(X,ae)=>{const ke=Z(X);return f.jsx(J$,{isOpen:m,onClose:()=>u(Uw),otherPanelOpen:ae,adapter:O,environment:ke})},e[25]=u,e[26]=Z,e[27]=m,e[28]=Y):Y=e[28];const J=Y,$=n==="containers"||n==="images"||n==="volumes"||n==="networks";let j;e[29]!==s||e[30]!==m||e[31]!==n||e[32]!==$?(j=$?(X,ae,ke)=>f.jsx(dge,{context:s,isOpen:!0,onClose:ae,otherPanelOpen:ke||m,resource:X.object,resourceType:n}):void 0,e[29]=s,e[30]=m,e[31]=n,e[32]=$,e[33]=j):j=e[33];const M=j;let F;e[34]!==n?(F=X=>fge(X.object,n),e[34]=n,e[35]=F):F=e[35];const A=F,Q=q;let se;return e[36]!==D||e[37]!==x||e[38]!==A||e[39]!==N||e[40]!==v||e[41]!==i||e[42]!==_||e[43]!==M||e[44]!==J||e[45]!==I||e[46]!==r||e[47]!==$||e[48]!==Q||e[49]!==z?(se=f.jsx(pP,{config:D,title:z,data:Q,loading:v,error:x,refetch:_,isRefetching:N,showDetailPanel:$,renderDetailPanel:M,renderHeaderActions:I,renderExtraPanels:J,selectedItemName:r,onSelectItemName:i,getItemName:A}),e[36]=D,e[37]=x,e[38]=A,e[39]=N,e[40]=v,e[41]=i,e[42]=_,e[43]=M,e[44]=J,e[45]=I,e[46]=r,e[47]=$,e[48]=Q,e[49]=z,e[50]=se):se=e[50],se}function gge(t){return t.object}function yge(t){return t.object}function vge(t){return t.object}function bge(t){return t.object}const _ge=["containers","images","volumes","networks"];function xge(t){return _ge.includes(t)}function wge(){const t=De.c(48);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e={strict:!1},t[0]=e):e=t[0];const{context:n,resourceType:s,name:r}=jp(e),i=oh();let o;t[1]===Symbol.for("react.memo_cache_sentinel")?(o=$i(),t[1]=o):o=t[1];const c=o,[u,h]=V.useState(!1);let m;t[2]===Symbol.for("react.memo_cache_sentinel")?(m=c.kubernetes?.contexts||[],t[2]=m):m=t[2];const p=m;let y;t[3]===Symbol.for("react.memo_cache_sentinel")?(y=c.docker?.contexts||[],t[3]=y):y=t[3];const v=y,x=!s;let _;t[4]!==s?(_=s&&xge(s)?s:null,t[4]=s,t[5]=_):_=t[5];const S=_;let k;t[6]!==S||t[7]!==i?(k=A=>{i(S?{to:"/docker/$context/$resourceType",params:{context:A,resourceType:S}}:{to:"/docker/$context",params:{context:A}})},t[6]=S,t[7]=i,t[8]=k):k=t[8];const C=k;let N;t[9]!==n||t[10]!==i?(N=A=>{i({to:"/docker/$context/$resourceType",params:{context:n,resourceType:A}})},t[9]=n,t[10]=i,t[11]=N):N=t[11];const R=N;let O;t[12]!==n||t[13]!==S||t[14]!==i?(O=A=>{S&&i(A?{to:"/docker/$context/$resourceType/$name",params:{context:n,resourceType:S,name:A}}:{to:"/docker/$context/$resourceType",params:{context:n,resourceType:S}})},t[12]=n,t[13]=S,t[14]=i,t[15]=O):O=t[15];const E=O;let D;t[16]!==i?(D=A=>{i({to:"/cluster/$context",params:{context:A}})},t[16]=i,t[17]=D):D=t[17];const B=D;let q;t[18]===Symbol.for("react.memo_cache_sentinel")?(q=()=>{h(!1)},t[18]=q):q=t[18];const P=q,G=n||"";let z;t[19]!==R||t[20]!==G?(z=Hme({context:G,onSelectResource:R,onClose:P}),t[19]=R,t[20]=G,t[21]=z):z=t[21];const K=z;let Z,W;t[22]===Symbol.for("react.memo_cache_sentinel")?(Z=()=>{const A=Q=>{(Q.metaKey||Q.ctrlKey)&&Q.key==="k"&&(Q.preventDefault(),h(Sge))};return document.addEventListener("keydown",A),()=>document.removeEventListener("keydown",A)},W=[],t[22]=Z,t[23]=W):(Z=t[22],W=t[23]),V.useEffect(Z,W);const I=n||"";let Y;t[24]!==B||t[25]!==C||t[26]!==I?(Y=f.jsx("div",{className:"shrink-0 px-3 pt-3 pb-2",children:f.jsx(xD,{mode:"docker",contexts:p,selectedContext:"",onSelectContext:B,dockerContexts:v,selectedDockerContext:I,onSelectDockerContext:C})}),t[24]=B,t[25]=C,t[26]=I,t[27]=Y):Y=t[27];let J;t[28]!==S||t[29]!==x||t[30]!==R?(J=f.jsx(Nme,{selectedResource:S,onSelectResource:R,isWelcome:x}),t[28]=S,t[29]=x,t[30]=R,t[31]=J):J=t[31];let $;t[32]!==Y||t[33]!==J?($=f.jsx("div",{className:"py-2 pl-2 shrink-0 h-full",children:f.jsxs("aside",{className:"w-56 h-full shrink-0 bg-white dark:bg-black/40 backdrop-blur-xl flex flex-col rounded-xl border border-neutral-300/50 dark:border-neutral-700/50",children:[Y,J]})}),t[32]=Y,t[33]=J,t[34]=$):$=t[34];let j;t[35]!==n||t[36]!==S||t[37]!==x||t[38]!==r||t[39]!==E?(j=x?f.jsx("main",{className:"flex-1 flex flex-col h-full min-w-0 items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("img",{src:"/logo.png",alt:"Logo",className:"w-48 h-48 mx-auto dark:hidden"}),f.jsx("img",{src:"/logo_dark.png",alt:"Logo",className:"w-48 h-48 mx-auto hidden dark:block"}),f.jsxs("p",{className:"mt-4 text-sm text-neutral-500 dark:text-neutral-400",children:["Select a resource from the sidebar or press ",f.jsx("kbd",{className:"px-1.5 py-0.5 rounded bg-neutral-200 dark:bg-neutral-700 text-xs",children:"K"})," to search"]})]})}):S?f.jsx(mge,{context:n||"",resourceType:S,selectedItem:r,onSelectItem:E},S):null,t[35]=n,t[36]=S,t[37]=x,t[38]=r,t[39]=E,t[40]=j):j=t[40];let M;t[41]!==K||t[42]!==u?(M=f.jsx(wD,{isOpen:u,onClose:P,adapter:K}),t[41]=K,t[42]=u,t[43]=M):M=t[43];let F;return t[44]!==$||t[45]!==j||t[46]!==M?(F=f.jsxs("div",{className:"flex h-screen overflow-hidden bg-neutral-50 text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100",children:[$,j,M]}),t[44]=$,t[45]=j,t[46]=M,t[47]=F):F=t[47],F}function Sge(t){return!t}function kge(){const t=De.c(14);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=$i(),t[0]=e):e=t[0];const n=e,s=oh();n.kubernetes?.contexts;let r;t[1]===Symbol.for("react.memo_cache_sentinel")?(r=n.kubernetes?.contexts||[],t[1]=r):r=t[1];const i=r;let o;t[2]===Symbol.for("react.memo_cache_sentinel")?(o=()=>n.docker?.contexts||[],t[2]=o):o=t[2],n.docker?.contexts;let c;t[3]===Symbol.for("react.memo_cache_sentinel")?(c=o(),t[3]=c):c=t[3];const u=c,h=i.length>0,m=u.length>0;let p;t[4]!==s?(p=()=>{if(h){const x=n.kubernetes?.defaultContext||i[0];s({to:"/cluster/$context",params:{context:x},replace:!0});return}if(m){const x=n.docker?.defaultContext||u[0];s({to:"/docker/$context",params:{context:x},replace:!0});return}},t[4]=s,t[5]=p):p=t[5];let y;if(t[6]!==s?(y=[h,m,n.kubernetes?.defaultContext,n.docker?.defaultContext,i,u,s],t[6]=s,t[7]=y):y=t[7],V.useEffect(p,y),!h&&!m){let x,_,S;t[8]===Symbol.for("react.memo_cache_sentinel")?(x=f.jsxs("div",{className:"mb-6",children:[f.jsx("img",{src:"/logo.png",alt:"Logo",className:"w-32 h-32 mx-auto dark:hidden opacity-50"}),f.jsx("img",{src:"/logo_dark.png",alt:"Logo",className:"w-32 h-32 mx-auto hidden dark:block opacity-50"})]}),_=f.jsx("h1",{className:"text-xl font-semibold text-neutral-700 dark:text-neutral-300 mb-3",children:"No Contexts Available"}),S=f.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-6",children:"No Kubernetes or Docker contexts were found. Make sure your kubeconfig or Docker configuration is set up correctly."}),t[8]=x,t[9]=_,t[10]=S):(x=t[8],_=t[9],S=t[10]);let k;t[11]===Symbol.for("react.memo_cache_sentinel")?(k=f.jsx("p",{className:"font-medium text-neutral-500 dark:text-neutral-400",children:"Quick setup:"}),t[11]=k):k=t[11];let C;return t[12]===Symbol.for("react.memo_cache_sentinel")?(C=f.jsx("div",{className:"flex h-screen overflow-hidden bg-neutral-50 text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100",children:f.jsx("div",{className:"flex-1 flex flex-col items-center justify-center",children:f.jsxs("div",{className:"max-w-md mx-auto px-8 text-center",children:[x,_,S,f.jsxs("div",{className:"text-left text-xs text-neutral-400 dark:text-neutral-500 space-y-2 bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:[k,f.jsxs("p",{children:[" For Kubernetes: ensure ",f.jsx("code",{className:"bg-neutral-200 dark:bg-neutral-700 px-1 rounded",children:"~/.kube/config"})," exists"]}),f.jsx("p",{children:" For Docker: ensure Docker Desktop or Docker Engine is running"})]})]})})}),t[12]=C):C=t[12],C}let v;return t[13]===Symbol.for("react.memo_cache_sentinel")?(v=f.jsx("div",{className:"flex h-screen overflow-hidden bg-neutral-50 text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100",children:f.jsx("div",{className:"flex-1 flex flex-col items-center justify-center",children:f.jsxs("div",{className:"mb-8",children:[f.jsx("img",{src:"/logo.png",alt:"Logo",className:"w-32 h-32 mx-auto dark:hidden opacity-50"}),f.jsx("img",{src:"/logo_dark.png",alt:"Logo",className:"w-32 h-32 mx-auto hidden dark:block opacity-50"})]})})}),t[13]=v):v=t[13],v}const Cge=iD({namespace:_K().optional(),panel:rC(["ai"]).optional()}),Nge=iD({panel:rC(["ai"]).optional()}),qb=XU({component:()=>f.jsx(IH,{client:dW,children:f.jsx(C6,{})})}),Ege=Fi({getParentRoute:()=>qb,path:"/",component:kge}),Kb=Fi({getParentRoute:()=>qb,path:"cluster/$context",validateSearch:Cge,component:bme,beforeLoad:({params:t})=>{if(!($i().kubernetes?.contexts||[]).includes(t.context))throw U2({to:"/"})}}),Age=Fi({getParentRoute:()=>Kb,path:"/"}),oz=Fi({getParentRoute:()=>Kb,path:"$resourceType"}),jge=Fi({getParentRoute:()=>oz,path:"$name"}),b4=Fi({getParentRoute:()=>qb,path:"docker/$context",validateSearch:Nge,component:wge,beforeLoad:({params:t})=>{if(!($i().docker?.contexts||[]).includes(t.context))throw U2({to:"/"})}}),Tge=Fi({getParentRoute:()=>b4,path:"/"}),lz=Fi({getParentRoute:()=>b4,path:"$resourceType"}),Rge=Fi({getParentRoute:()=>lz,path:"$name"}),Oge=qb.addChildren([Ege,Kb.addChildren([Age,oz.addChildren([jge])]),b4.addChildren([Tge,lz.addChildren([Rge])])]),Mge=aH({routeTree:Oge,defaultPreload:"intent"});uH().then(()=>{A9.createRoot(document.getElementById("root")).render(f.jsx(V.StrictMode,{children:f.jsx(cH,{router:Mge})}))});
