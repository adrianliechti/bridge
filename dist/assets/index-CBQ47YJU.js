(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();var MA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var mv={exports:{}},Ah={};var BA;function PI(){if(BA)return Ah;BA=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,r,i){var o=null;if(i!==void 0&&(o=""+i),r.key!==void 0&&(o=""+r.key),"key"in r){i={};for(var c in r)c!=="key"&&(i[c]=r[c])}else i=r;return r=i.ref,{$$typeof:t,type:s,key:o,ref:r!==void 0?r:null,props:i}}return Ah.Fragment=e,Ah.jsx=n,Ah.jsxs=n,Ah}var DA;function $I(){return DA||(DA=1,mv.exports=PI()),mv.exports}var f=$I(),gv={exports:{}},lt={};var LA;function zI(){if(LA)return lt;LA=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),b=Symbol.iterator;function y(O){return O===null||typeof O!="object"?null:(O=b&&O[b]||O["@@iterator"],typeof O=="function"?O:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,S={};function k(O,K,j){this.props=O,this.context=K,this.refs=S,this.updater=j||w}k.prototype.isReactComponent={},k.prototype.setState=function(O,K){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,K,"setState")},k.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function C(){}C.prototype=k.prototype;function N(O,K,j){this.props=O,this.context=K,this.refs=S,this.updater=j||w}var R=N.prototype=new C;R.constructor=N,x(R,k.prototype),R.isPureReactComponent=!0;var B=Array.isArray;function E(){}var z={H:null,A:null,T:null,S:null},U=Object.prototype.hasOwnProperty;function Y(O,K,j){var Z=j.ref;return{$$typeof:t,type:O,key:K,ref:Z!==void 0?Z:null,props:j}}function D(O,K){return Y(O.type,K,O.props)}function W(O){return typeof O=="object"&&O!==null&&O.$$typeof===t}function V(O){var K={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(j){return K[j]})}var q=/\/+/g;function X(O,K){return typeof O=="object"&&O!==null&&O.key!=null?V(""+O.key):K.toString(36)}function I(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(E,E):(O.status="pending",O.then(function(K){O.status==="pending"&&(O.status="fulfilled",O.value=K)},function(K){O.status==="pending"&&(O.status="rejected",O.reason=K)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function L(O,K,j,Z,le){var te=typeof O;(te==="undefined"||te==="boolean")&&(O=null);var pe=!1;if(O===null)pe=!0;else switch(te){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(O.$$typeof){case t:case e:pe=!0;break;case g:return pe=O._init,L(pe(O._payload),K,j,Z,le)}}if(pe)return le=le(O),pe=Z===""?"."+X(O,0):Z,B(le)?(j="",pe!=null&&(j=pe.replace(q,"$&/")+"/"),L(le,K,j,"",function(tt){return tt})):le!=null&&(W(le)&&(le=D(le,j+(le.key==null||O&&O.key===le.key?"":(""+le.key).replace(q,"$&/")+"/")+pe)),K.push(le)),1;pe=0;var _e=Z===""?".":Z+":";if(B(O))for(var Ce=0;Ce<O.length;Ce++)Z=O[Ce],te=_e+X(Z,Ce),pe+=L(Z,K,j,te,le);else if(Ce=y(O),typeof Ce=="function")for(O=Ce.call(O),Ce=0;!(Z=O.next()).done;)Z=Z.value,te=_e+X(Z,Ce++),pe+=L(Z,K,j,te,le);else if(te==="object"){if(typeof O.then=="function")return L(I(O),K,j,Z,le);throw K=String(O),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return pe}function J(O,K,j){if(O==null)return O;var Z=[],le=0;return L(O,Z,"","",function(te){return K.call(j,te,le++)}),Z}function G(O){if(O._status===-1){var K=O._result;K=K(),K.then(function(j){(O._status===0||O._status===-1)&&(O._status=1,O._result=j)},function(j){(O._status===0||O._status===-1)&&(O._status=2,O._result=j)}),O._status===-1&&(O._status=0,O._result=K)}if(O._status===1)return O._result.default;throw O._result}var P=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},T={map:J,forEach:function(O,K,j){J(O,function(){K.apply(this,arguments)},j)},count:function(O){var K=0;return J(O,function(){K++}),K},toArray:function(O){return J(O,function(K){return K})||[]},only:function(O){if(!W(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return lt.Activity=m,lt.Children=T,lt.Component=k,lt.Fragment=n,lt.Profiler=r,lt.PureComponent=N,lt.StrictMode=s,lt.Suspense=d,lt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,lt.__COMPILER_RUNTIME={__proto__:null,c:function(O){return z.H.useMemoCache(O)}},lt.cache=function(O){return function(){return O.apply(null,arguments)}},lt.cacheSignal=function(){return null},lt.cloneElement=function(O,K,j){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var Z=x({},O.props),le=O.key;if(K!=null)for(te in K.key!==void 0&&(le=""+K.key),K)!U.call(K,te)||te==="key"||te==="__self"||te==="__source"||te==="ref"&&K.ref===void 0||(Z[te]=K[te]);var te=arguments.length-2;if(te===1)Z.children=j;else if(1<te){for(var pe=Array(te),_e=0;_e<te;_e++)pe[_e]=arguments[_e+2];Z.children=pe}return Y(O.type,le,Z)},lt.createContext=function(O){return O={$$typeof:o,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:i,_context:O},O},lt.createElement=function(O,K,j){var Z,le={},te=null;if(K!=null)for(Z in K.key!==void 0&&(te=""+K.key),K)U.call(K,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(le[Z]=K[Z]);var pe=arguments.length-2;if(pe===1)le.children=j;else if(1<pe){for(var _e=Array(pe),Ce=0;Ce<pe;Ce++)_e[Ce]=arguments[Ce+2];le.children=_e}if(O&&O.defaultProps)for(Z in pe=O.defaultProps,pe)le[Z]===void 0&&(le[Z]=pe[Z]);return Y(O,te,le)},lt.createRef=function(){return{current:null}},lt.forwardRef=function(O){return{$$typeof:c,render:O}},lt.isValidElement=W,lt.lazy=function(O){return{$$typeof:g,_payload:{_status:-1,_result:O},_init:G}},lt.memo=function(O,K){return{$$typeof:h,type:O,compare:K===void 0?null:K}},lt.startTransition=function(O){var K=z.T,j={};z.T=j;try{var Z=O(),le=z.S;le!==null&&le(j,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(E,P)}catch(te){P(te)}finally{K!==null&&j.types!==null&&(K.types=j.types),z.T=K}},lt.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},lt.use=function(O){return z.H.use(O)},lt.useActionState=function(O,K,j){return z.H.useActionState(O,K,j)},lt.useCallback=function(O,K){return z.H.useCallback(O,K)},lt.useContext=function(O){return z.H.useContext(O)},lt.useDebugValue=function(){},lt.useDeferredValue=function(O,K){return z.H.useDeferredValue(O,K)},lt.useEffect=function(O,K){return z.H.useEffect(O,K)},lt.useEffectEvent=function(O){return z.H.useEffectEvent(O)},lt.useId=function(){return z.H.useId()},lt.useImperativeHandle=function(O,K,j){return z.H.useImperativeHandle(O,K,j)},lt.useInsertionEffect=function(O,K){return z.H.useInsertionEffect(O,K)},lt.useLayoutEffect=function(O,K){return z.H.useLayoutEffect(O,K)},lt.useMemo=function(O,K){return z.H.useMemo(O,K)},lt.useOptimistic=function(O,K){return z.H.useOptimistic(O,K)},lt.useReducer=function(O,K,j){return z.H.useReducer(O,K,j)},lt.useRef=function(O){return z.H.useRef(O)},lt.useState=function(O){return z.H.useState(O)},lt.useSyncExternalStore=function(O,K,j){return z.H.useSyncExternalStore(O,K,j)},lt.useTransition=function(){return z.H.useTransition()},lt.version="19.2.3",lt}var IA;function Eg(){return IA||(IA=1,gv.exports=zI()),gv.exports}var F=Eg();const Wr=wS(F);var yv={exports:{}},Eh={},bv={exports:{}},vv={};var PA;function HI(){return PA||(PA=1,(function(t){function e(L,J){var G=L.length;L.push(J);e:for(;0<G;){var P=G-1>>>1,T=L[P];if(0<r(T,J))L[P]=J,L[G]=T,G=P;else break e}}function n(L){return L.length===0?null:L[0]}function s(L){if(L.length===0)return null;var J=L[0],G=L.pop();if(G!==J){L[0]=G;e:for(var P=0,T=L.length,O=T>>>1;P<O;){var K=2*(P+1)-1,j=L[K],Z=K+1,le=L[Z];if(0>r(j,G))Z<T&&0>r(le,j)?(L[P]=le,L[Z]=G,P=Z):(L[P]=j,L[K]=G,P=K);else if(Z<T&&0>r(le,G))L[P]=le,L[Z]=G,P=Z;else break e}}return J}function r(L,J){var G=L.sortIndex-J.sortIndex;return G!==0?G:L.id-J.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var d=[],h=[],g=1,m=null,b=3,y=!1,w=!1,x=!1,S=!1,k=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function R(L){for(var J=n(h);J!==null;){if(J.callback===null)s(h);else if(J.startTime<=L)s(h),J.sortIndex=J.expirationTime,e(d,J);else break;J=n(h)}}function B(L){if(x=!1,R(L),!w)if(n(d)!==null)w=!0,E||(E=!0,V());else{var J=n(h);J!==null&&I(B,J.startTime-L)}}var E=!1,z=-1,U=5,Y=-1;function D(){return S?!0:!(t.unstable_now()-Y<U)}function W(){if(S=!1,E){var L=t.unstable_now();Y=L;var J=!0;try{e:{w=!1,x&&(x=!1,C(z),z=-1),y=!0;var G=b;try{t:{for(R(L),m=n(d);m!==null&&!(m.expirationTime>L&&D());){var P=m.callback;if(typeof P=="function"){m.callback=null,b=m.priorityLevel;var T=P(m.expirationTime<=L);if(L=t.unstable_now(),typeof T=="function"){m.callback=T,R(L),J=!0;break t}m===n(d)&&s(d),R(L)}else s(d);m=n(d)}if(m!==null)J=!0;else{var O=n(h);O!==null&&I(B,O.startTime-L),J=!1}}break e}finally{m=null,b=G,y=!1}J=void 0}}finally{J?V():E=!1}}}var V;if(typeof N=="function")V=function(){N(W)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,X=q.port2;q.port1.onmessage=W,V=function(){X.postMessage(null)}}else V=function(){k(W,0)};function I(L,J){z=k(function(){L(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(L){switch(b){case 1:case 2:case 3:var J=3;break;default:J=b}var G=b;b=J;try{return L()}finally{b=G}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(L,J){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var G=b;b=L;try{return J()}finally{b=G}},t.unstable_scheduleCallback=function(L,J,G){var P=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?P+G:P):G=P,L){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=G+T,L={id:g++,callback:J,priorityLevel:L,startTime:G,expirationTime:T,sortIndex:-1},G>P?(L.sortIndex=G,e(h,L),n(d)===null&&L===n(h)&&(x?(C(z),z=-1):x=!0,I(B,G-P))):(L.sortIndex=T,e(d,L),w||y||(w=!0,E||(E=!0,V()))),L},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(L){var J=b;return function(){var G=b;b=J;try{return L.apply(this,arguments)}finally{b=G}}}})(vv)),vv}var $A;function UI(){return $A||($A=1,bv.exports=HI()),bv.exports}var xv={exports:{}},cs={};var zA;function VI(){if(zA)return cs;zA=1;var t=Eg();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function i(d,h,g){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:m==null?null:""+m,children:d,containerInfo:h,implementation:g}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return cs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,cs.createPortal=function(d,h){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return i(d,h,null,g)},cs.flushSync=function(d){var h=o.T,g=s.p;try{if(o.T=null,s.p=2,d)return d()}finally{o.T=h,s.p=g,s.d.f()}},cs.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(d,h))},cs.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},cs.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var g=h.as,m=c(g,h.crossOrigin),b=typeof h.integrity=="string"?h.integrity:void 0,y=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;g==="style"?s.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:b,fetchPriority:y}):g==="script"&&s.d.X(d,{crossOrigin:m,integrity:b,fetchPriority:y,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},cs.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var g=c(h.as,h.crossOrigin);s.d.M(d,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(d)},cs.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var g=h.as,m=c(g,h.crossOrigin);s.d.L(d,g,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},cs.preloadModule=function(d,h){if(typeof d=="string")if(h){var g=c(h.as,h.crossOrigin);s.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(d)},cs.requestFormReset=function(d){s.d.r(d)},cs.unstable_batchedUpdates=function(d,h){return d(h)},cs.useFormState=function(d,h,g){return o.H.useFormState(d,h,g)},cs.useFormStatus=function(){return o.H.useHostTransitionStatus()},cs.version="19.2.3",cs}var HA;function BT(){if(HA)return xv.exports;HA=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),xv.exports=VI(),xv.exports}var UA;function FI(){if(UA)return Eh;UA=1;var t=UI(),e=Eg(),n=BT();function s(a){var l="https://react.dev/errors/"+a;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)l+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function i(a){var l=a,u=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(u=l.return),a=l.return;while(a)}return l.tag===3?u:null}function o(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function c(a){if(a.tag===31){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function d(a){if(i(a)!==a)throw Error(s(188))}function h(a){var l=a.alternate;if(!l){if(l=i(a),l===null)throw Error(s(188));return l!==a?null:a}for(var u=a,p=l;;){var v=u.return;if(v===null)break;var _=v.alternate;if(_===null){if(p=v.return,p!==null){u=p;continue}break}if(v.child===_.child){for(_=v.child;_;){if(_===u)return d(v),a;if(_===p)return d(v),l;_=_.sibling}throw Error(s(188))}if(u.return!==p.return)u=v,p=_;else{for(var A=!1,$=v.child;$;){if($===u){A=!0,u=v,p=_;break}if($===p){A=!0,p=v,u=_;break}$=$.sibling}if(!A){for($=_.child;$;){if($===u){A=!0,u=_,p=v;break}if($===p){A=!0,p=_,u=v;break}$=$.sibling}if(!A)throw Error(s(189))}}if(u.alternate!==p)throw Error(s(190))}if(u.tag!==3)throw Error(s(188));return u.stateNode.current===u?a:l}function g(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a;for(a=a.child;a!==null;){if(l=g(a),l!==null)return l;a=a.sibling}return null}var m=Object.assign,b=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),N=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function V(a){return a===null||typeof a!="object"?null:(a=W&&a[W]||a["@@iterator"],typeof a=="function"?a:null)}var q=Symbol.for("react.client.reference");function X(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===q?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case x:return"Fragment";case k:return"Profiler";case S:return"StrictMode";case B:return"Suspense";case E:return"SuspenseList";case Y:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case w:return"Portal";case N:return a.displayName||"Context";case C:return(a._context.displayName||"Context")+".Consumer";case R:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case z:return l=a.displayName||null,l!==null?l:X(a.type)||"Memo";case U:l=a._payload,a=a._init;try{return X(a(l))}catch{}}return null}var I=Array.isArray,L=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},P=[],T=-1;function O(a){return{current:a}}function K(a){0>T||(a.current=P[T],P[T]=null,T--)}function j(a,l){T++,P[T]=a.current,a.current=l}var Z=O(null),le=O(null),te=O(null),pe=O(null);function _e(a,l){switch(j(te,l),j(le,a),j(Z,null),l.nodeType){case 9:case 11:a=(a=l.documentElement)&&(a=a.namespaceURI)?nA(a):0;break;default:if(a=l.tagName,l=l.namespaceURI)l=nA(l),a=sA(l,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}K(Z),j(Z,a)}function Ce(){K(Z),K(le),K(te)}function tt(a){a.memoizedState!==null&&j(pe,a);var l=Z.current,u=sA(l,a.type);l!==u&&(j(le,a),j(Z,u))}function Ee(a){le.current===a&&(K(Z),K(le)),pe.current===a&&(K(pe),Sh._currentValue=G)}var Je,Ue;function bt(a){if(Je===void 0)try{throw Error()}catch(u){var l=u.stack.trim().match(/\n( *(at )?)/);Je=l&&l[1]||"",Ue=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Je+a+Ue}var qt=!1;function It(a,l){if(!a||qt)return"";qt=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(l){var be=function(){throw Error()};if(Object.defineProperty(be.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(be,[])}catch(de){var ue=de}Reflect.construct(a,[],be)}else{try{be.call()}catch(de){ue=de}a.call(be.prototype)}}else{try{throw Error()}catch(de){ue=de}(be=a())&&typeof be.catch=="function"&&be.catch(function(){})}}catch(de){if(de&&ue&&typeof de.stack=="string")return[de.stack,ue.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=p.DetermineComponentFrameRoot(),A=_[0],$=_[1];if(A&&$){var Q=A.split(`
`),oe=$.split(`
`);for(v=p=0;p<Q.length&&!Q[p].includes("DetermineComponentFrameRoot");)p++;for(;v<oe.length&&!oe[v].includes("DetermineComponentFrameRoot");)v++;if(p===Q.length||v===oe.length)for(p=Q.length-1,v=oe.length-1;1<=p&&0<=v&&Q[p]!==oe[v];)v--;for(;1<=p&&0<=v;p--,v--)if(Q[p]!==oe[v]){if(p!==1||v!==1)do if(p--,v--,0>v||Q[p]!==oe[v]){var ge=`
`+Q[p].replace(" at new "," at ");return a.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",a.displayName)),ge}while(1<=p&&0<=v);break}}}finally{qt=!1,Error.prepareStackTrace=u}return(u=a?a.displayName||a.name:"")?bt(u):""}function Pt(a,l){switch(a.tag){case 26:case 27:case 5:return bt(a.type);case 16:return bt("Lazy");case 13:return a.child!==l&&l!==null?bt("Suspense Fallback"):bt("Suspense");case 19:return bt("SuspenseList");case 0:case 15:return It(a.type,!1);case 11:return It(a.type.render,!1);case 1:return It(a.type,!0);case 31:return bt("Activity");default:return""}}function Wn(a){try{var l="",u=null;do l+=Pt(a,u),u=a,a=a.return;while(a);return l}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var ls=Object.prototype.hasOwnProperty,ys=t.unstable_scheduleCallback,Qe=t.unstable_cancelCallback,rt=t.unstable_shouldYield,Mt=t.unstable_requestPaint,_t=t.unstable_now,cn=t.unstable_getCurrentPriorityLevel,fe=t.unstable_ImmediatePriority,we=t.unstable_UserBlockingPriority,qe=t.unstable_NormalPriority,Ze=t.unstable_LowPriority,ct=t.unstable_IdlePriority,en=t.log,se=t.unstable_setDisableYieldValue,ie=null,he=null;function Se(a){if(typeof en=="function"&&se(a),he&&typeof he.setStrictMode=="function")try{he.setStrictMode(ie,a)}catch{}}var me=Math.clz32?Math.clz32:it,Pe=Math.log,st=Math.LN2;function it(a){return a>>>=0,a===0?32:31-(Pe(a)/st|0)|0}var Re=256,De=262144,$e=4194304;function ze(a){var l=a&42;if(l!==0)return l;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function pt(a,l,u){var p=a.pendingLanes;if(p===0)return 0;var v=0,_=a.suspendedLanes,A=a.pingedLanes;a=a.warmLanes;var $=p&134217727;return $!==0?(p=$&~_,p!==0?v=ze(p):(A&=$,A!==0?v=ze(A):u||(u=$&~a,u!==0&&(v=ze(u))))):($=p&~_,$!==0?v=ze($):A!==0?v=ze(A):u||(u=p&~a,u!==0&&(v=ze(u)))),v===0?0:l!==0&&l!==v&&(l&_)===0&&(_=v&-v,u=l&-l,_>=u||_===32&&(u&4194048)!==0)?l:v}function Bt(a,l){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&l)===0}function rn(a,l){switch(a){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ts(){var a=$e;return $e<<=1,($e&62914560)===0&&($e=4194304),a}function Tl(a){for(var l=[],u=0;31>u;u++)l.push(a);return l}function yo(a,l){a.pendingLanes|=l,l!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function s1(a,l,u,p,v,_){var A=a.pendingLanes;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=u,a.entangledLanes&=u,a.errorRecoveryDisabledLanes&=u,a.shellSuspendCounter=0;var $=a.entanglements,Q=a.expirationTimes,oe=a.hiddenUpdates;for(u=A&~u;0<u;){var ge=31-me(u),be=1<<ge;$[ge]=0,Q[ge]=-1;var ue=oe[ge];if(ue!==null)for(oe[ge]=null,ge=0;ge<ue.length;ge++){var de=ue[ge];de!==null&&(de.lane&=-536870913)}u&=~be}p!==0&&Pk(a,p,0),_!==0&&v===0&&a.tag!==0&&(a.suspendedLanes|=_&~(A&~l))}function Pk(a,l,u){a.pendingLanes|=l,a.suspendedLanes&=~l;var p=31-me(l);a.entangledLanes|=l,a.entanglements[p]=a.entanglements[p]|1073741824|u&261930}function $k(a,l){var u=a.entangledLanes|=l;for(a=a.entanglements;u;){var p=31-me(u),v=1<<p;v&l|a[p]&l&&(a[p]|=l),u&=~v}}function zk(a,l){var u=l&-l;return u=(u&42)!==0?1:r1(u),(u&(a.suspendedLanes|l))!==0?0:u}function r1(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function i1(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Hk(){var a=J.p;return a!==0?a:(a=window.event,a===void 0?32:NA(a.type))}function Uk(a,l){var u=J.p;try{return J.p=a,l()}finally{J.p=u}}var va=Math.random().toString(36).slice(2),Gn="__reactFiber$"+va,Rs="__reactProps$"+va,Rl="__reactContainer$"+va,a1="__reactEvents$"+va,A8="__reactListeners$"+va,E8="__reactHandles$"+va,Vk="__reactResources$"+va,Pu="__reactMarker$"+va;function o1(a){delete a[Gn],delete a[Rs],delete a[a1],delete a[A8],delete a[E8]}function Ol(a){var l=a[Gn];if(l)return l;for(var u=a.parentNode;u;){if(l=u[Rl]||u[Gn]){if(u=l.alternate,l.child!==null||u!==null&&u.child!==null)for(a=uA(a);a!==null;){if(u=a[Gn])return u;a=uA(a)}return l}a=u,u=a.parentNode}return null}function Ml(a){if(a=a[Gn]||a[Rl]){var l=a.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return a}return null}function $u(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a.stateNode;throw Error(s(33))}function Bl(a){var l=a[Vk];return l||(l=a[Vk]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function $n(a){a[Pu]=!0}var Fk=new Set,qk={};function bo(a,l){Dl(a,l),Dl(a+"Capture",l)}function Dl(a,l){for(qk[a]=l,a=0;a<l.length;a++)Fk.add(l[a])}var j8=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Kk={},Wk={};function T8(a){return ls.call(Wk,a)?!0:ls.call(Kk,a)?!1:j8.test(a)?Wk[a]=!0:(Kk[a]=!0,!1)}function sp(a,l,u){if(T8(l))if(u===null)a.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":a.removeAttribute(l);return;case"boolean":var p=l.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){a.removeAttribute(l);return}}a.setAttribute(l,""+u)}}function rp(a,l,u){if(u===null)a.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttribute(l,""+u)}}function ji(a,l,u,p){if(p===null)a.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(u);return}a.setAttributeNS(l,u,""+p)}}function mr(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Gk(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function R8(a,l,u){var p=Object.getOwnPropertyDescriptor(a.constructor.prototype,l);if(!a.hasOwnProperty(l)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var v=p.get,_=p.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return v.call(this)},set:function(A){u=""+A,_.call(this,A)}}),Object.defineProperty(a,l,{enumerable:p.enumerable}),{getValue:function(){return u},setValue:function(A){u=""+A},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function l1(a){if(!a._valueTracker){var l=Gk(a)?"checked":"value";a._valueTracker=R8(a,l,""+a[l])}}function Yk(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var u=l.getValue(),p="";return a&&(p=Gk(a)?a.checked?"true":"false":a.value),a=p,a!==u?(l.setValue(a),!0):!1}function ip(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var O8=/[\n"\\]/g;function gr(a){return a.replace(O8,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function c1(a,l,u,p,v,_,A,$){a.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?a.type=A:a.removeAttribute("type"),l!=null?A==="number"?(l===0&&a.value===""||a.value!=l)&&(a.value=""+mr(l)):a.value!==""+mr(l)&&(a.value=""+mr(l)):A!=="submit"&&A!=="reset"||a.removeAttribute("value"),l!=null?u1(a,A,mr(l)):u!=null?u1(a,A,mr(u)):p!=null&&a.removeAttribute("value"),v==null&&_!=null&&(a.defaultChecked=!!_),v!=null&&(a.checked=v&&typeof v!="function"&&typeof v!="symbol"),$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?a.name=""+mr($):a.removeAttribute("name")}function Xk(a,l,u,p,v,_,A,$){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(a.type=_),l!=null||u!=null){if(!(_!=="submit"&&_!=="reset"||l!=null)){l1(a);return}u=u!=null?""+mr(u):"",l=l!=null?""+mr(l):u,$||l===a.value||(a.value=l),a.defaultValue=l}p=p??v,p=typeof p!="function"&&typeof p!="symbol"&&!!p,a.checked=$?a.checked:!!p,a.defaultChecked=!!p,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(a.name=A),l1(a)}function u1(a,l,u){l==="number"&&ip(a.ownerDocument)===a||a.defaultValue===""+u||(a.defaultValue=""+u)}function Ll(a,l,u,p){if(a=a.options,l){l={};for(var v=0;v<u.length;v++)l["$"+u[v]]=!0;for(u=0;u<a.length;u++)v=l.hasOwnProperty("$"+a[u].value),a[u].selected!==v&&(a[u].selected=v),v&&p&&(a[u].defaultSelected=!0)}else{for(u=""+mr(u),l=null,v=0;v<a.length;v++){if(a[v].value===u){a[v].selected=!0,p&&(a[v].defaultSelected=!0);return}l!==null||a[v].disabled||(l=a[v])}l!==null&&(l.selected=!0)}}function Jk(a,l,u){if(l!=null&&(l=""+mr(l),l!==a.value&&(a.value=l),u==null)){a.defaultValue!==l&&(a.defaultValue=l);return}a.defaultValue=u!=null?""+mr(u):""}function Qk(a,l,u,p){if(l==null){if(p!=null){if(u!=null)throw Error(s(92));if(I(p)){if(1<p.length)throw Error(s(93));p=p[0]}u=p}u==null&&(u=""),l=u}u=mr(l),a.defaultValue=u,p=a.textContent,p===u&&p!==""&&p!==null&&(a.value=p),l1(a)}function Il(a,l){if(l){var u=a.firstChild;if(u&&u===a.lastChild&&u.nodeType===3){u.nodeValue=l;return}}a.textContent=l}var M8=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zk(a,l,u){var p=l.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?p?a.setProperty(l,""):l==="float"?a.cssFloat="":a[l]="":p?a.setProperty(l,u):typeof u!="number"||u===0||M8.has(l)?l==="float"?a.cssFloat=u:a[l]=(""+u).trim():a[l]=u+"px"}function eC(a,l,u){if(l!=null&&typeof l!="object")throw Error(s(62));if(a=a.style,u!=null){for(var p in u)!u.hasOwnProperty(p)||l!=null&&l.hasOwnProperty(p)||(p.indexOf("--")===0?a.setProperty(p,""):p==="float"?a.cssFloat="":a[p]="");for(var v in l)p=l[v],l.hasOwnProperty(v)&&u[v]!==p&&Zk(a,v,p)}else for(var _ in l)l.hasOwnProperty(_)&&Zk(a,_,l[_])}function h1(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var B8=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),D8=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ap(a){return D8.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function Ti(){}var d1=null;function f1(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Pl=null,$l=null;function tC(a){var l=Ml(a);if(l&&(a=l.stateNode)){var u=a[Rs]||null;e:switch(a=l.stateNode,l.type){case"input":if(c1(a,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),l=u.name,u.type==="radio"&&l!=null){for(u=a;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+gr(""+l)+'"][type="radio"]'),l=0;l<u.length;l++){var p=u[l];if(p!==a&&p.form===a.form){var v=p[Rs]||null;if(!v)throw Error(s(90));c1(p,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(l=0;l<u.length;l++)p=u[l],p.form===a.form&&Yk(p)}break e;case"textarea":Jk(a,u.value,u.defaultValue);break e;case"select":l=u.value,l!=null&&Ll(a,!!u.multiple,l,!1)}}}var p1=!1;function nC(a,l,u){if(p1)return a(l,u);p1=!0;try{var p=a(l);return p}finally{if(p1=!1,(Pl!==null||$l!==null)&&(Wp(),Pl&&(l=Pl,a=$l,$l=Pl=null,tC(l),a)))for(l=0;l<a.length;l++)tC(a[l])}}function zu(a,l){var u=a.stateNode;if(u===null)return null;var p=u[Rs]||null;if(p===null)return null;u=p[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(a=a.type,p=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!p;break e;default:a=!1}if(a)return null;if(u&&typeof u!="function")throw Error(s(231,l,typeof u));return u}var Ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m1=!1;if(Ri)try{var Hu={};Object.defineProperty(Hu,"passive",{get:function(){m1=!0}}),window.addEventListener("test",Hu,Hu),window.removeEventListener("test",Hu,Hu)}catch{m1=!1}var xa=null,g1=null,op=null;function sC(){if(op)return op;var a,l=g1,u=l.length,p,v="value"in xa?xa.value:xa.textContent,_=v.length;for(a=0;a<u&&l[a]===v[a];a++);var A=u-a;for(p=1;p<=A&&l[u-p]===v[_-p];p++);return op=v.slice(a,1<p?1-p:void 0)}function lp(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function cp(){return!0}function rC(){return!1}function Os(a){function l(u,p,v,_,A){this._reactName=u,this._targetInst=v,this.type=p,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var $ in a)a.hasOwnProperty($)&&(u=a[$],this[$]=u?u(_):_[$]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?cp:rC,this.isPropagationStopped=rC,this}return m(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=cp)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=cp)},persist:function(){},isPersistent:cp}),l}var vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},up=Os(vo),Uu=m({},vo,{view:0,detail:0}),L8=Os(Uu),y1,b1,Vu,hp=m({},Uu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:x1,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Vu&&(Vu&&a.type==="mousemove"?(y1=a.screenX-Vu.screenX,b1=a.screenY-Vu.screenY):b1=y1=0,Vu=a),y1)},movementY:function(a){return"movementY"in a?a.movementY:b1}}),iC=Os(hp),I8=m({},hp,{dataTransfer:0}),P8=Os(I8),$8=m({},Uu,{relatedTarget:0}),v1=Os($8),z8=m({},vo,{animationName:0,elapsedTime:0,pseudoElement:0}),H8=Os(z8),U8=m({},vo,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),V8=Os(U8),F8=m({},vo,{data:0}),aC=Os(F8),q8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},K8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},W8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function G8(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=W8[a])?!!l[a]:!1}function x1(){return G8}var Y8=m({},Uu,{key:function(a){if(a.key){var l=q8[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=lp(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?K8[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:x1,charCode:function(a){return a.type==="keypress"?lp(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?lp(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),X8=Os(Y8),J8=m({},hp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oC=Os(J8),Q8=m({},Uu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:x1}),Z8=Os(Q8),eL=m({},vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),tL=Os(eL),nL=m({},hp,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),sL=Os(nL),rL=m({},vo,{newState:0,oldState:0}),iL=Os(rL),aL=[9,13,27,32],_1=Ri&&"CompositionEvent"in window,Fu=null;Ri&&"documentMode"in document&&(Fu=document.documentMode);var oL=Ri&&"TextEvent"in window&&!Fu,lC=Ri&&(!_1||Fu&&8<Fu&&11>=Fu),cC=" ",uC=!1;function hC(a,l){switch(a){case"keyup":return aL.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dC(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var zl=!1;function lL(a,l){switch(a){case"compositionend":return dC(l);case"keypress":return l.which!==32?null:(uC=!0,cC);case"textInput":return a=l.data,a===cC&&uC?null:a;default:return null}}function cL(a,l){if(zl)return a==="compositionend"||!_1&&hC(a,l)?(a=sC(),op=g1=xa=null,zl=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return lC&&l.locale!=="ko"?null:l.data;default:return null}}var uL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fC(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!uL[a.type]:l==="textarea"}function pC(a,l,u,p){Pl?$l?$l.push(p):$l=[p]:Pl=p,l=em(l,"onChange"),0<l.length&&(u=new up("onChange","change",null,u,p),a.push({event:u,listeners:l}))}var qu=null,Ku=null;function hL(a){X4(a,0)}function dp(a){var l=$u(a);if(Yk(l))return a}function mC(a,l){if(a==="change")return l}var gC=!1;if(Ri){var w1;if(Ri){var S1="oninput"in document;if(!S1){var yC=document.createElement("div");yC.setAttribute("oninput","return;"),S1=typeof yC.oninput=="function"}w1=S1}else w1=!1;gC=w1&&(!document.documentMode||9<document.documentMode)}function bC(){qu&&(qu.detachEvent("onpropertychange",vC),Ku=qu=null)}function vC(a){if(a.propertyName==="value"&&dp(Ku)){var l=[];pC(l,Ku,a,f1(a)),nC(hL,l)}}function dL(a,l,u){a==="focusin"?(bC(),qu=l,Ku=u,qu.attachEvent("onpropertychange",vC)):a==="focusout"&&bC()}function fL(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return dp(Ku)}function pL(a,l){if(a==="click")return dp(l)}function mL(a,l){if(a==="input"||a==="change")return dp(l)}function gL(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var Ws=typeof Object.is=="function"?Object.is:gL;function Wu(a,l){if(Ws(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var u=Object.keys(a),p=Object.keys(l);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var v=u[p];if(!ls.call(l,v)||!Ws(a[v],l[v]))return!1}return!0}function xC(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function _C(a,l){var u=xC(a);a=0;for(var p;u;){if(u.nodeType===3){if(p=a+u.textContent.length,a<=l&&p>=l)return{node:u,offset:l-a};a=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=xC(u)}}function wC(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?wC(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function SC(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var l=ip(a.document);l instanceof a.HTMLIFrameElement;){try{var u=typeof l.contentWindow.location.href=="string"}catch{u=!1}if(u)a=l.contentWindow;else break;l=ip(a.document)}return l}function k1(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}var yL=Ri&&"documentMode"in document&&11>=document.documentMode,Hl=null,C1=null,Gu=null,N1=!1;function kC(a,l,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;N1||Hl==null||Hl!==ip(p)||(p=Hl,"selectionStart"in p&&k1(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Gu&&Wu(Gu,p)||(Gu=p,p=em(C1,"onSelect"),0<p.length&&(l=new up("onSelect","select",null,l,u),a.push({event:l,listeners:p}),l.target=Hl)))}function xo(a,l){var u={};return u[a.toLowerCase()]=l.toLowerCase(),u["Webkit"+a]="webkit"+l,u["Moz"+a]="moz"+l,u}var Ul={animationend:xo("Animation","AnimationEnd"),animationiteration:xo("Animation","AnimationIteration"),animationstart:xo("Animation","AnimationStart"),transitionrun:xo("Transition","TransitionRun"),transitionstart:xo("Transition","TransitionStart"),transitioncancel:xo("Transition","TransitionCancel"),transitionend:xo("Transition","TransitionEnd")},A1={},CC={};Ri&&(CC=document.createElement("div").style,"AnimationEvent"in window||(delete Ul.animationend.animation,delete Ul.animationiteration.animation,delete Ul.animationstart.animation),"TransitionEvent"in window||delete Ul.transitionend.transition);function _o(a){if(A1[a])return A1[a];if(!Ul[a])return a;var l=Ul[a],u;for(u in l)if(l.hasOwnProperty(u)&&u in CC)return A1[a]=l[u];return a}var NC=_o("animationend"),AC=_o("animationiteration"),EC=_o("animationstart"),bL=_o("transitionrun"),vL=_o("transitionstart"),xL=_o("transitioncancel"),jC=_o("transitionend"),TC=new Map,E1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");E1.push("scrollEnd");function zr(a,l){TC.set(a,l),bo(l,[a])}var fp=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},yr=[],Vl=0,j1=0;function pp(){for(var a=Vl,l=j1=Vl=0;l<a;){var u=yr[l];yr[l++]=null;var p=yr[l];yr[l++]=null;var v=yr[l];yr[l++]=null;var _=yr[l];if(yr[l++]=null,p!==null&&v!==null){var A=p.pending;A===null?v.next=v:(v.next=A.next,A.next=v),p.pending=v}_!==0&&RC(u,v,_)}}function mp(a,l,u,p){yr[Vl++]=a,yr[Vl++]=l,yr[Vl++]=u,yr[Vl++]=p,j1|=p,a.lanes|=p,a=a.alternate,a!==null&&(a.lanes|=p)}function T1(a,l,u,p){return mp(a,l,u,p),gp(a)}function wo(a,l){return mp(a,null,null,l),gp(a)}function RC(a,l,u){a.lanes|=u;var p=a.alternate;p!==null&&(p.lanes|=u);for(var v=!1,_=a.return;_!==null;)_.childLanes|=u,p=_.alternate,p!==null&&(p.childLanes|=u),_.tag===22&&(a=_.stateNode,a===null||a._visibility&1||(v=!0)),a=_,_=_.return;return a.tag===3?(_=a.stateNode,v&&l!==null&&(v=31-me(u),a=_.hiddenUpdates,p=a[v],p===null?a[v]=[l]:p.push(l),l.lane=u|536870912),_):null}function gp(a){if(50<gh)throw gh=0,$b=null,Error(s(185));for(var l=a.return;l!==null;)a=l,l=a.return;return a.tag===3?a.stateNode:null}var Fl={};function _L(a,l,u,p){this.tag=a,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gs(a,l,u,p){return new _L(a,l,u,p)}function R1(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Oi(a,l){var u=a.alternate;return u===null?(u=Gs(a.tag,l,a.key,a.mode),u.elementType=a.elementType,u.type=a.type,u.stateNode=a.stateNode,u.alternate=a,a.alternate=u):(u.pendingProps=l,u.type=a.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=a.flags&65011712,u.childLanes=a.childLanes,u.lanes=a.lanes,u.child=a.child,u.memoizedProps=a.memoizedProps,u.memoizedState=a.memoizedState,u.updateQueue=a.updateQueue,l=a.dependencies,u.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},u.sibling=a.sibling,u.index=a.index,u.ref=a.ref,u.refCleanup=a.refCleanup,u}function OC(a,l){a.flags&=65011714;var u=a.alternate;return u===null?(a.childLanes=0,a.lanes=l,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,l=u.dependencies,a.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),a}function yp(a,l,u,p,v,_){var A=0;if(p=a,typeof a=="function")R1(a)&&(A=1);else if(typeof a=="string")A=NI(a,u,Z.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case Y:return a=Gs(31,u,l,v),a.elementType=Y,a.lanes=_,a;case x:return So(u.children,v,_,l);case S:A=8,v|=24;break;case k:return a=Gs(12,u,l,v|2),a.elementType=k,a.lanes=_,a;case B:return a=Gs(13,u,l,v),a.elementType=B,a.lanes=_,a;case E:return a=Gs(19,u,l,v),a.elementType=E,a.lanes=_,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case N:A=10;break e;case C:A=9;break e;case R:A=11;break e;case z:A=14;break e;case U:A=16,p=null;break e}A=29,u=Error(s(130,a===null?"null":typeof a,"")),p=null}return l=Gs(A,u,l,v),l.elementType=a,l.type=p,l.lanes=_,l}function So(a,l,u,p){return a=Gs(7,a,p,l),a.lanes=u,a}function O1(a,l,u){return a=Gs(6,a,null,l),a.lanes=u,a}function MC(a){var l=Gs(18,null,null,0);return l.stateNode=a,l}function M1(a,l,u){return l=Gs(4,a.children!==null?a.children:[],a.key,l),l.lanes=u,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}var BC=new WeakMap;function br(a,l){if(typeof a=="object"&&a!==null){var u=BC.get(a);return u!==void 0?u:(l={value:a,source:l,stack:Wn(l)},BC.set(a,l),l)}return{value:a,source:l,stack:Wn(l)}}var ql=[],Kl=0,bp=null,Yu=0,vr=[],xr=0,_a=null,si=1,ri="";function Mi(a,l){ql[Kl++]=Yu,ql[Kl++]=bp,bp=a,Yu=l}function DC(a,l,u){vr[xr++]=si,vr[xr++]=ri,vr[xr++]=_a,_a=a;var p=si;a=ri;var v=32-me(p)-1;p&=~(1<<v),u+=1;var _=32-me(l)+v;if(30<_){var A=v-v%5;_=(p&(1<<A)-1).toString(32),p>>=A,v-=A,si=1<<32-me(l)+v|u<<v|p,ri=_+a}else si=1<<_|u<<v|p,ri=a}function B1(a){a.return!==null&&(Mi(a,1),DC(a,1,0))}function D1(a){for(;a===bp;)bp=ql[--Kl],ql[Kl]=null,Yu=ql[--Kl],ql[Kl]=null;for(;a===_a;)_a=vr[--xr],vr[xr]=null,ri=vr[--xr],vr[xr]=null,si=vr[--xr],vr[xr]=null}function LC(a,l){vr[xr++]=si,vr[xr++]=ri,vr[xr++]=_a,si=l.id,ri=l.overflow,_a=a}var Yn=null,Xt=null,At=!1,wa=null,_r=!1,L1=Error(s(519));function Sa(a){var l=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Xu(br(l,a)),L1}function IC(a){var l=a.stateNode,u=a.type,p=a.memoizedProps;switch(l[Gn]=a,l[Rs]=p,u){case"dialog":St("cancel",l),St("close",l);break;case"iframe":case"object":case"embed":St("load",l);break;case"video":case"audio":for(u=0;u<bh.length;u++)St(bh[u],l);break;case"source":St("error",l);break;case"img":case"image":case"link":St("error",l),St("load",l);break;case"details":St("toggle",l);break;case"input":St("invalid",l),Xk(l,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":St("invalid",l);break;case"textarea":St("invalid",l),Qk(l,p.value,p.defaultValue,p.children)}u=p.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||l.textContent===""+u||p.suppressHydrationWarning===!0||eA(l.textContent,u)?(p.popover!=null&&(St("beforetoggle",l),St("toggle",l)),p.onScroll!=null&&St("scroll",l),p.onScrollEnd!=null&&St("scrollend",l),p.onClick!=null&&(l.onclick=Ti),l=!0):l=!1,l||Sa(a,!0)}function PC(a){for(Yn=a.return;Yn;)switch(Yn.tag){case 5:case 31:case 13:_r=!1;return;case 27:case 3:_r=!0;return;default:Yn=Yn.return}}function Wl(a){if(a!==Yn)return!1;if(!At)return PC(a),At=!0,!1;var l=a.tag,u;if((u=l!==3&&l!==27)&&((u=l===5)&&(u=a.type,u=!(u!=="form"&&u!=="button")||ev(a.type,a.memoizedProps)),u=!u),u&&Xt&&Sa(a),PC(a),l===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(317));Xt=cA(a)}else if(l===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(317));Xt=cA(a)}else l===27?(l=Xt,Ia(a.type)?(a=iv,iv=null,Xt=a):Xt=l):Xt=Yn?Sr(a.stateNode.nextSibling):null;return!0}function ko(){Xt=Yn=null,At=!1}function I1(){var a=wa;return a!==null&&(Ls===null?Ls=a:Ls.push.apply(Ls,a),wa=null),a}function Xu(a){wa===null?wa=[a]:wa.push(a)}var P1=O(null),Co=null,Bi=null;function ka(a,l,u){j(P1,l._currentValue),l._currentValue=u}function Di(a){a._currentValue=P1.current,K(P1)}function $1(a,l,u){for(;a!==null;){var p=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),a===u)break;a=a.return}}function z1(a,l,u,p){var v=a.child;for(v!==null&&(v.return=a);v!==null;){var _=v.dependencies;if(_!==null){var A=v.child;_=_.firstContext;e:for(;_!==null;){var $=_;_=v;for(var Q=0;Q<l.length;Q++)if($.context===l[Q]){_.lanes|=u,$=_.alternate,$!==null&&($.lanes|=u),$1(_.return,u,a),p||(A=null);break e}_=$.next}}else if(v.tag===18){if(A=v.return,A===null)throw Error(s(341));A.lanes|=u,_=A.alternate,_!==null&&(_.lanes|=u),$1(A,u,a),A=null}else A=v.child;if(A!==null)A.return=v;else for(A=v;A!==null;){if(A===a){A=null;break}if(v=A.sibling,v!==null){v.return=A.return,A=v;break}A=A.return}v=A}}function Gl(a,l,u,p){a=null;for(var v=l,_=!1;v!==null;){if(!_){if((v.flags&524288)!==0)_=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var A=v.alternate;if(A===null)throw Error(s(387));if(A=A.memoizedProps,A!==null){var $=v.type;Ws(v.pendingProps.value,A.value)||(a!==null?a.push($):a=[$])}}else if(v===pe.current){if(A=v.alternate,A===null)throw Error(s(387));A.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(a!==null?a.push(Sh):a=[Sh])}v=v.return}a!==null&&z1(l,a,u,p),l.flags|=262144}function vp(a){for(a=a.firstContext;a!==null;){if(!Ws(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function No(a){Co=a,Bi=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Xn(a){return $C(Co,a)}function xp(a,l){return Co===null&&No(a),$C(a,l)}function $C(a,l){var u=l._currentValue;if(l={context:l,memoizedValue:u,next:null},Bi===null){if(a===null)throw Error(s(308));Bi=l,a.dependencies={lanes:0,firstContext:l},a.flags|=524288}else Bi=Bi.next=l;return u}var wL=typeof AbortController<"u"?AbortController:function(){var a=[],l=this.signal={aborted:!1,addEventListener:function(u,p){a.push(p)}};this.abort=function(){l.aborted=!0,a.forEach(function(u){return u()})}},SL=t.unstable_scheduleCallback,kL=t.unstable_NormalPriority,_n={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function H1(){return{controller:new wL,data:new Map,refCount:0}}function Ju(a){a.refCount--,a.refCount===0&&SL(kL,function(){a.controller.abort()})}var Qu=null,U1=0,Yl=0,Xl=null;function CL(a,l){if(Qu===null){var u=Qu=[];U1=0,Yl=qb(),Xl={status:"pending",value:void 0,then:function(p){u.push(p)}}}return U1++,l.then(zC,zC),l}function zC(){if(--U1===0&&Qu!==null){Xl!==null&&(Xl.status="fulfilled");var a=Qu;Qu=null,Yl=0,Xl=null;for(var l=0;l<a.length;l++)(0,a[l])()}}function NL(a,l){var u=[],p={status:"pending",value:null,reason:null,then:function(v){u.push(v)}};return a.then(function(){p.status="fulfilled",p.value=l;for(var v=0;v<u.length;v++)(0,u[v])(l)},function(v){for(p.status="rejected",p.reason=v,v=0;v<u.length;v++)(0,u[v])(void 0)}),p}var HC=L.S;L.S=function(a,l){k4=_t(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&CL(a,l),HC!==null&&HC(a,l)};var Ao=O(null);function V1(){var a=Ao.current;return a!==null?a:Kt.pooledCache}function _p(a,l){l===null?j(Ao,Ao.current):j(Ao,l.pool)}function UC(){var a=V1();return a===null?null:{parent:_n._currentValue,pool:a}}var Jl=Error(s(460)),F1=Error(s(474)),wp=Error(s(542)),Sp={then:function(){}};function VC(a){return a=a.status,a==="fulfilled"||a==="rejected"}function FC(a,l,u){switch(u=a[u],u===void 0?a.push(l):u!==l&&(l.then(Ti,Ti),l=u),l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,KC(a),a;default:if(typeof l.status=="string")l.then(Ti,Ti);else{if(a=Kt,a!==null&&100<a.shellSuspendCounter)throw Error(s(482));a=l,a.status="pending",a.then(function(p){if(l.status==="pending"){var v=l;v.status="fulfilled",v.value=p}},function(p){if(l.status==="pending"){var v=l;v.status="rejected",v.reason=p}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,KC(a),a}throw jo=l,Jl}}function Eo(a){try{var l=a._init;return l(a._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(jo=u,Jl):u}}var jo=null;function qC(){if(jo===null)throw Error(s(459));var a=jo;return jo=null,a}function KC(a){if(a===Jl||a===wp)throw Error(s(483))}var Ql=null,Zu=0;function kp(a){var l=Zu;return Zu+=1,Ql===null&&(Ql=[]),FC(Ql,a,l)}function eh(a,l){l=l.props.ref,a.ref=l!==void 0?l:null}function Cp(a,l){throw l.$$typeof===b?Error(s(525)):(a=Object.prototype.toString.call(l),Error(s(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a)))}function WC(a){function l(re,ee){if(a){var ae=re.deletions;ae===null?(re.deletions=[ee],re.flags|=16):ae.push(ee)}}function u(re,ee){if(!a)return null;for(;ee!==null;)l(re,ee),ee=ee.sibling;return null}function p(re){for(var ee=new Map;re!==null;)re.key!==null?ee.set(re.key,re):ee.set(re.index,re),re=re.sibling;return ee}function v(re,ee){return re=Oi(re,ee),re.index=0,re.sibling=null,re}function _(re,ee,ae){return re.index=ae,a?(ae=re.alternate,ae!==null?(ae=ae.index,ae<ee?(re.flags|=67108866,ee):ae):(re.flags|=67108866,ee)):(re.flags|=1048576,ee)}function A(re){return a&&re.alternate===null&&(re.flags|=67108866),re}function $(re,ee,ae,ye){return ee===null||ee.tag!==6?(ee=O1(ae,re.mode,ye),ee.return=re,ee):(ee=v(ee,ae),ee.return=re,ee)}function Q(re,ee,ae,ye){var Ye=ae.type;return Ye===x?ge(re,ee,ae.props.children,ye,ae.key):ee!==null&&(ee.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===U&&Eo(Ye)===ee.type)?(ee=v(ee,ae.props),eh(ee,ae),ee.return=re,ee):(ee=yp(ae.type,ae.key,ae.props,null,re.mode,ye),eh(ee,ae),ee.return=re,ee)}function oe(re,ee,ae,ye){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==ae.containerInfo||ee.stateNode.implementation!==ae.implementation?(ee=M1(ae,re.mode,ye),ee.return=re,ee):(ee=v(ee,ae.children||[]),ee.return=re,ee)}function ge(re,ee,ae,ye,Ye){return ee===null||ee.tag!==7?(ee=So(ae,re.mode,ye,Ye),ee.return=re,ee):(ee=v(ee,ae),ee.return=re,ee)}function be(re,ee,ae){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ee=O1(""+ee,re.mode,ae),ee.return=re,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case y:return ae=yp(ee.type,ee.key,ee.props,null,re.mode,ae),eh(ae,ee),ae.return=re,ae;case w:return ee=M1(ee,re.mode,ae),ee.return=re,ee;case U:return ee=Eo(ee),be(re,ee,ae)}if(I(ee)||V(ee))return ee=So(ee,re.mode,ae,null),ee.return=re,ee;if(typeof ee.then=="function")return be(re,kp(ee),ae);if(ee.$$typeof===N)return be(re,xp(re,ee),ae);Cp(re,ee)}return null}function ue(re,ee,ae,ye){var Ye=ee!==null?ee.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return Ye!==null?null:$(re,ee,""+ae,ye);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case y:return ae.key===Ye?Q(re,ee,ae,ye):null;case w:return ae.key===Ye?oe(re,ee,ae,ye):null;case U:return ae=Eo(ae),ue(re,ee,ae,ye)}if(I(ae)||V(ae))return Ye!==null?null:ge(re,ee,ae,ye,null);if(typeof ae.then=="function")return ue(re,ee,kp(ae),ye);if(ae.$$typeof===N)return ue(re,ee,xp(re,ae),ye);Cp(re,ae)}return null}function de(re,ee,ae,ye,Ye){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return re=re.get(ae)||null,$(ee,re,""+ye,Ye);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case y:return re=re.get(ye.key===null?ae:ye.key)||null,Q(ee,re,ye,Ye);case w:return re=re.get(ye.key===null?ae:ye.key)||null,oe(ee,re,ye,Ye);case U:return ye=Eo(ye),de(re,ee,ae,ye,Ye)}if(I(ye)||V(ye))return re=re.get(ae)||null,ge(ee,re,ye,Ye,null);if(typeof ye.then=="function")return de(re,ee,ae,kp(ye),Ye);if(ye.$$typeof===N)return de(re,ee,ae,xp(ee,ye),Ye);Cp(ee,ye)}return null}function Ve(re,ee,ae,ye){for(var Ye=null,Tt=null,We=ee,mt=ee=0,Nt=null;We!==null&&mt<ae.length;mt++){We.index>mt?(Nt=We,We=null):Nt=We.sibling;var Rt=ue(re,We,ae[mt],ye);if(Rt===null){We===null&&(We=Nt);break}a&&We&&Rt.alternate===null&&l(re,We),ee=_(Rt,ee,mt),Tt===null?Ye=Rt:Tt.sibling=Rt,Tt=Rt,We=Nt}if(mt===ae.length)return u(re,We),At&&Mi(re,mt),Ye;if(We===null){for(;mt<ae.length;mt++)We=be(re,ae[mt],ye),We!==null&&(ee=_(We,ee,mt),Tt===null?Ye=We:Tt.sibling=We,Tt=We);return At&&Mi(re,mt),Ye}for(We=p(We);mt<ae.length;mt++)Nt=de(We,re,mt,ae[mt],ye),Nt!==null&&(a&&Nt.alternate!==null&&We.delete(Nt.key===null?mt:Nt.key),ee=_(Nt,ee,mt),Tt===null?Ye=Nt:Tt.sibling=Nt,Tt=Nt);return a&&We.forEach(function(Ua){return l(re,Ua)}),At&&Mi(re,mt),Ye}function nt(re,ee,ae,ye){if(ae==null)throw Error(s(151));for(var Ye=null,Tt=null,We=ee,mt=ee=0,Nt=null,Rt=ae.next();We!==null&&!Rt.done;mt++,Rt=ae.next()){We.index>mt?(Nt=We,We=null):Nt=We.sibling;var Ua=ue(re,We,Rt.value,ye);if(Ua===null){We===null&&(We=Nt);break}a&&We&&Ua.alternate===null&&l(re,We),ee=_(Ua,ee,mt),Tt===null?Ye=Ua:Tt.sibling=Ua,Tt=Ua,We=Nt}if(Rt.done)return u(re,We),At&&Mi(re,mt),Ye;if(We===null){for(;!Rt.done;mt++,Rt=ae.next())Rt=be(re,Rt.value,ye),Rt!==null&&(ee=_(Rt,ee,mt),Tt===null?Ye=Rt:Tt.sibling=Rt,Tt=Rt);return At&&Mi(re,mt),Ye}for(We=p(We);!Rt.done;mt++,Rt=ae.next())Rt=de(We,re,mt,Rt.value,ye),Rt!==null&&(a&&Rt.alternate!==null&&We.delete(Rt.key===null?mt:Rt.key),ee=_(Rt,ee,mt),Tt===null?Ye=Rt:Tt.sibling=Rt,Tt=Rt);return a&&We.forEach(function(II){return l(re,II)}),At&&Mi(re,mt),Ye}function Vt(re,ee,ae,ye){if(typeof ae=="object"&&ae!==null&&ae.type===x&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case y:e:{for(var Ye=ae.key;ee!==null;){if(ee.key===Ye){if(Ye=ae.type,Ye===x){if(ee.tag===7){u(re,ee.sibling),ye=v(ee,ae.props.children),ye.return=re,re=ye;break e}}else if(ee.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===U&&Eo(Ye)===ee.type){u(re,ee.sibling),ye=v(ee,ae.props),eh(ye,ae),ye.return=re,re=ye;break e}u(re,ee);break}else l(re,ee);ee=ee.sibling}ae.type===x?(ye=So(ae.props.children,re.mode,ye,ae.key),ye.return=re,re=ye):(ye=yp(ae.type,ae.key,ae.props,null,re.mode,ye),eh(ye,ae),ye.return=re,re=ye)}return A(re);case w:e:{for(Ye=ae.key;ee!==null;){if(ee.key===Ye)if(ee.tag===4&&ee.stateNode.containerInfo===ae.containerInfo&&ee.stateNode.implementation===ae.implementation){u(re,ee.sibling),ye=v(ee,ae.children||[]),ye.return=re,re=ye;break e}else{u(re,ee);break}else l(re,ee);ee=ee.sibling}ye=M1(ae,re.mode,ye),ye.return=re,re=ye}return A(re);case U:return ae=Eo(ae),Vt(re,ee,ae,ye)}if(I(ae))return Ve(re,ee,ae,ye);if(V(ae)){if(Ye=V(ae),typeof Ye!="function")throw Error(s(150));return ae=Ye.call(ae),nt(re,ee,ae,ye)}if(typeof ae.then=="function")return Vt(re,ee,kp(ae),ye);if(ae.$$typeof===N)return Vt(re,ee,xp(re,ae),ye);Cp(re,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint"?(ae=""+ae,ee!==null&&ee.tag===6?(u(re,ee.sibling),ye=v(ee,ae),ye.return=re,re=ye):(u(re,ee),ye=O1(ae,re.mode,ye),ye.return=re,re=ye),A(re)):u(re,ee)}return function(re,ee,ae,ye){try{Zu=0;var Ye=Vt(re,ee,ae,ye);return Ql=null,Ye}catch(We){if(We===Jl||We===wp)throw We;var Tt=Gs(29,We,null,re.mode);return Tt.lanes=ye,Tt.return=re,Tt}}}var To=WC(!0),GC=WC(!1),Ca=!1;function q1(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function K1(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Na(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Aa(a,l,u){var p=a.updateQueue;if(p===null)return null;if(p=p.shared,(Dt&2)!==0){var v=p.pending;return v===null?l.next=l:(l.next=v.next,v.next=l),p.pending=l,l=gp(a),RC(a,null,u),l}return mp(a,p,l,u),gp(a)}function th(a,l,u){if(l=l.updateQueue,l!==null&&(l=l.shared,(u&4194048)!==0)){var p=l.lanes;p&=a.pendingLanes,u|=p,l.lanes=u,$k(a,u)}}function W1(a,l){var u=a.updateQueue,p=a.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var v=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var A={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};_===null?v=_=A:_=_.next=A,u=u.next}while(u!==null);_===null?v=_=l:_=_.next=l}else v=_=l;u={baseState:p.baseState,firstBaseUpdate:v,lastBaseUpdate:_,shared:p.shared,callbacks:p.callbacks},a.updateQueue=u;return}a=u.lastBaseUpdate,a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=l}var G1=!1;function nh(){if(G1){var a=Xl;if(a!==null)throw a}}function sh(a,l,u,p){G1=!1;var v=a.updateQueue;Ca=!1;var _=v.firstBaseUpdate,A=v.lastBaseUpdate,$=v.shared.pending;if($!==null){v.shared.pending=null;var Q=$,oe=Q.next;Q.next=null,A===null?_=oe:A.next=oe,A=Q;var ge=a.alternate;ge!==null&&(ge=ge.updateQueue,$=ge.lastBaseUpdate,$!==A&&($===null?ge.firstBaseUpdate=oe:$.next=oe,ge.lastBaseUpdate=Q))}if(_!==null){var be=v.baseState;A=0,ge=oe=Q=null,$=_;do{var ue=$.lane&-536870913,de=ue!==$.lane;if(de?(Ct&ue)===ue:(p&ue)===ue){ue!==0&&ue===Yl&&(G1=!0),ge!==null&&(ge=ge.next={lane:0,tag:$.tag,payload:$.payload,callback:null,next:null});e:{var Ve=a,nt=$;ue=l;var Vt=u;switch(nt.tag){case 1:if(Ve=nt.payload,typeof Ve=="function"){be=Ve.call(Vt,be,ue);break e}be=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=nt.payload,ue=typeof Ve=="function"?Ve.call(Vt,be,ue):Ve,ue==null)break e;be=m({},be,ue);break e;case 2:Ca=!0}}ue=$.callback,ue!==null&&(a.flags|=64,de&&(a.flags|=8192),de=v.callbacks,de===null?v.callbacks=[ue]:de.push(ue))}else de={lane:ue,tag:$.tag,payload:$.payload,callback:$.callback,next:null},ge===null?(oe=ge=de,Q=be):ge=ge.next=de,A|=ue;if($=$.next,$===null){if($=v.shared.pending,$===null)break;de=$,$=de.next,de.next=null,v.lastBaseUpdate=de,v.shared.pending=null}}while(!0);ge===null&&(Q=be),v.baseState=Q,v.firstBaseUpdate=oe,v.lastBaseUpdate=ge,_===null&&(v.shared.lanes=0),Oa|=A,a.lanes=A,a.memoizedState=be}}function YC(a,l){if(typeof a!="function")throw Error(s(191,a));a.call(l)}function XC(a,l){var u=a.callbacks;if(u!==null)for(a.callbacks=null,a=0;a<u.length;a++)YC(u[a],l)}var Zl=O(null),Np=O(0);function JC(a,l){a=Fi,j(Np,a),j(Zl,l),Fi=a|l.baseLanes}function Y1(){j(Np,Fi),j(Zl,Zl.current)}function X1(){Fi=Np.current,K(Zl),K(Np)}var Ys=O(null),wr=null;function Ea(a){var l=a.alternate;j(pn,pn.current&1),j(Ys,a),wr===null&&(l===null||Zl.current!==null||l.memoizedState!==null)&&(wr=a)}function J1(a){j(pn,pn.current),j(Ys,a),wr===null&&(wr=a)}function QC(a){a.tag===22?(j(pn,pn.current),j(Ys,a),wr===null&&(wr=a)):ja()}function ja(){j(pn,pn.current),j(Ys,Ys.current)}function Xs(a){K(Ys),wr===a&&(wr=null),K(pn)}var pn=O(0);function Ap(a){for(var l=a;l!==null;){if(l.tag===13){var u=l.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||sv(u)||rv(u)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Li=0,dt=null,Ht=null,wn=null,Ep=!1,ec=!1,Ro=!1,jp=0,rh=0,tc=null,AL=0;function un(){throw Error(s(321))}function Q1(a,l){if(l===null)return!1;for(var u=0;u<l.length&&u<a.length;u++)if(!Ws(a[u],l[u]))return!1;return!0}function Z1(a,l,u,p,v,_){return Li=_,dt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,L.H=a===null||a.memoizedState===null?DN:pb,Ro=!1,_=u(p,v),Ro=!1,ec&&(_=eN(l,u,p,v)),ZC(a),_}function ZC(a){L.H=oh;var l=Ht!==null&&Ht.next!==null;if(Li=0,wn=Ht=dt=null,Ep=!1,rh=0,tc=null,l)throw Error(s(300));a===null||Sn||(a=a.dependencies,a!==null&&vp(a)&&(Sn=!0))}function eN(a,l,u,p){dt=a;var v=0;do{if(ec&&(tc=null),rh=0,ec=!1,25<=v)throw Error(s(301));if(v+=1,wn=Ht=null,a.updateQueue!=null){var _=a.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}L.H=LN,_=l(u,p)}while(ec);return _}function EL(){var a=L.H,l=a.useState()[0];return l=typeof l.then=="function"?ih(l):l,a=a.useState()[0],(Ht!==null?Ht.memoizedState:null)!==a&&(dt.flags|=1024),l}function eb(){var a=jp!==0;return jp=0,a}function tb(a,l,u){l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~u}function nb(a){if(Ep){for(a=a.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}Ep=!1}Li=0,wn=Ht=dt=null,ec=!1,rh=jp=0,tc=null}function bs(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wn===null?dt.memoizedState=wn=a:wn=wn.next=a,wn}function mn(){if(Ht===null){var a=dt.alternate;a=a!==null?a.memoizedState:null}else a=Ht.next;var l=wn===null?dt.memoizedState:wn.next;if(l!==null)wn=l,Ht=a;else{if(a===null)throw dt.alternate===null?Error(s(467)):Error(s(310));Ht=a,a={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},wn===null?dt.memoizedState=wn=a:wn=wn.next=a}return wn}function Tp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ih(a){var l=rh;return rh+=1,tc===null&&(tc=[]),a=FC(tc,a,l),l=dt,(wn===null?l.memoizedState:wn.next)===null&&(l=l.alternate,L.H=l===null||l.memoizedState===null?DN:pb),a}function Rp(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return ih(a);if(a.$$typeof===N)return Xn(a)}throw Error(s(438,String(a)))}function sb(a){var l=null,u=dt.updateQueue;if(u!==null&&(l=u.memoCache),l==null){var p=dt.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(l={data:p.data.map(function(v){return v.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),u===null&&(u=Tp(),dt.updateQueue=u),u.memoCache=l,u=l.data[l.index],u===void 0)for(u=l.data[l.index]=Array(a),p=0;p<a;p++)u[p]=D;return l.index++,u}function Ii(a,l){return typeof l=="function"?l(a):l}function Op(a){var l=mn();return rb(l,Ht,a)}function rb(a,l,u){var p=a.queue;if(p===null)throw Error(s(311));p.lastRenderedReducer=u;var v=a.baseQueue,_=p.pending;if(_!==null){if(v!==null){var A=v.next;v.next=_.next,_.next=A}l.baseQueue=v=_,p.pending=null}if(_=a.baseState,v===null)a.memoizedState=_;else{l=v.next;var $=A=null,Q=null,oe=l,ge=!1;do{var be=oe.lane&-536870913;if(be!==oe.lane?(Ct&be)===be:(Li&be)===be){var ue=oe.revertLane;if(ue===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),be===Yl&&(ge=!0);else if((Li&ue)===ue){oe=oe.next,ue===Yl&&(ge=!0);continue}else be={lane:0,revertLane:oe.revertLane,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},Q===null?($=Q=be,A=_):Q=Q.next=be,dt.lanes|=ue,Oa|=ue;be=oe.action,Ro&&u(_,be),_=oe.hasEagerState?oe.eagerState:u(_,be)}else ue={lane:be,revertLane:oe.revertLane,gesture:oe.gesture,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},Q===null?($=Q=ue,A=_):Q=Q.next=ue,dt.lanes|=be,Oa|=be;oe=oe.next}while(oe!==null&&oe!==l);if(Q===null?A=_:Q.next=$,!Ws(_,a.memoizedState)&&(Sn=!0,ge&&(u=Xl,u!==null)))throw u;a.memoizedState=_,a.baseState=A,a.baseQueue=Q,p.lastRenderedState=_}return v===null&&(p.lanes=0),[a.memoizedState,p.dispatch]}function ib(a){var l=mn(),u=l.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var p=u.dispatch,v=u.pending,_=l.memoizedState;if(v!==null){u.pending=null;var A=v=v.next;do _=a(_,A.action),A=A.next;while(A!==v);Ws(_,l.memoizedState)||(Sn=!0),l.memoizedState=_,l.baseQueue===null&&(l.baseState=_),u.lastRenderedState=_}return[_,p]}function tN(a,l,u){var p=dt,v=mn(),_=At;if(_){if(u===void 0)throw Error(s(407));u=u()}else u=l();var A=!Ws((Ht||v).memoizedState,u);if(A&&(v.memoizedState=u,Sn=!0),v=v.queue,lb(rN.bind(null,p,v,a),[a]),v.getSnapshot!==l||A||wn!==null&&wn.memoizedState.tag&1){if(p.flags|=2048,nc(9,{destroy:void 0},sN.bind(null,p,v,u,l),null),Kt===null)throw Error(s(349));_||(Li&127)!==0||nN(p,l,u)}return u}function nN(a,l,u){a.flags|=16384,a={getSnapshot:l,value:u},l=dt.updateQueue,l===null?(l=Tp(),dt.updateQueue=l,l.stores=[a]):(u=l.stores,u===null?l.stores=[a]:u.push(a))}function sN(a,l,u,p){l.value=u,l.getSnapshot=p,iN(l)&&aN(a)}function rN(a,l,u){return u(function(){iN(l)&&aN(a)})}function iN(a){var l=a.getSnapshot;a=a.value;try{var u=l();return!Ws(a,u)}catch{return!0}}function aN(a){var l=wo(a,2);l!==null&&Is(l,a,2)}function ab(a){var l=bs();if(typeof a=="function"){var u=a;if(a=u(),Ro){Se(!0);try{u()}finally{Se(!1)}}}return l.memoizedState=l.baseState=a,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:a},l}function oN(a,l,u,p){return a.baseState=u,rb(a,Ht,typeof p=="function"?p:Ii)}function jL(a,l,u,p,v){if(Dp(a))throw Error(s(485));if(a=l.action,a!==null){var _={payload:v,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};L.T!==null?u(!0):_.isTransition=!1,p(_),u=l.pending,u===null?(_.next=l.pending=_,lN(l,_)):(_.next=u.next,l.pending=u.next=_)}}function lN(a,l){var u=l.action,p=l.payload,v=a.state;if(l.isTransition){var _=L.T,A={};L.T=A;try{var $=u(v,p),Q=L.S;Q!==null&&Q(A,$),cN(a,l,$)}catch(oe){ob(a,l,oe)}finally{_!==null&&A.types!==null&&(_.types=A.types),L.T=_}}else try{_=u(v,p),cN(a,l,_)}catch(oe){ob(a,l,oe)}}function cN(a,l,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(p){uN(a,l,p)},function(p){return ob(a,l,p)}):uN(a,l,u)}function uN(a,l,u){l.status="fulfilled",l.value=u,hN(l),a.state=u,l=a.pending,l!==null&&(u=l.next,u===l?a.pending=null:(u=u.next,l.next=u,lN(a,u)))}function ob(a,l,u){var p=a.pending;if(a.pending=null,p!==null){p=p.next;do l.status="rejected",l.reason=u,hN(l),l=l.next;while(l!==p)}a.action=null}function hN(a){a=a.listeners;for(var l=0;l<a.length;l++)(0,a[l])()}function dN(a,l){return l}function fN(a,l){if(At){var u=Kt.formState;if(u!==null){e:{var p=dt;if(At){if(Xt){t:{for(var v=Xt,_=_r;v.nodeType!==8;){if(!_){v=null;break t}if(v=Sr(v.nextSibling),v===null){v=null;break t}}_=v.data,v=_==="F!"||_==="F"?v:null}if(v){Xt=Sr(v.nextSibling),p=v.data==="F!";break e}}Sa(p)}p=!1}p&&(l=u[0])}}return u=bs(),u.memoizedState=u.baseState=l,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dN,lastRenderedState:l},u.queue=p,u=ON.bind(null,dt,p),p.dispatch=u,p=ab(!1),_=fb.bind(null,dt,!1,p.queue),p=bs(),v={state:l,dispatch:null,action:a,pending:null},p.queue=v,u=jL.bind(null,dt,v,_,u),v.dispatch=u,p.memoizedState=a,[l,u,!1]}function pN(a){var l=mn();return mN(l,Ht,a)}function mN(a,l,u){if(l=rb(a,l,dN)[0],a=Op(Ii)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var p=ih(l)}catch(A){throw A===Jl?wp:A}else p=l;l=mn();var v=l.queue,_=v.dispatch;return u!==l.memoizedState&&(dt.flags|=2048,nc(9,{destroy:void 0},TL.bind(null,v,u),null)),[p,_,a]}function TL(a,l){a.action=l}function gN(a){var l=mn(),u=Ht;if(u!==null)return mN(l,u,a);mn(),l=l.memoizedState,u=mn();var p=u.queue.dispatch;return u.memoizedState=a,[l,p,!1]}function nc(a,l,u,p){return a={tag:a,create:u,deps:p,inst:l,next:null},l=dt.updateQueue,l===null&&(l=Tp(),dt.updateQueue=l),u=l.lastEffect,u===null?l.lastEffect=a.next=a:(p=u.next,u.next=a,a.next=p,l.lastEffect=a),a}function yN(){return mn().memoizedState}function Mp(a,l,u,p){var v=bs();dt.flags|=a,v.memoizedState=nc(1|l,{destroy:void 0},u,p===void 0?null:p)}function Bp(a,l,u,p){var v=mn();p=p===void 0?null:p;var _=v.memoizedState.inst;Ht!==null&&p!==null&&Q1(p,Ht.memoizedState.deps)?v.memoizedState=nc(l,_,u,p):(dt.flags|=a,v.memoizedState=nc(1|l,_,u,p))}function bN(a,l){Mp(8390656,8,a,l)}function lb(a,l){Bp(2048,8,a,l)}function RL(a){dt.flags|=4;var l=dt.updateQueue;if(l===null)l=Tp(),dt.updateQueue=l,l.events=[a];else{var u=l.events;u===null?l.events=[a]:u.push(a)}}function vN(a){var l=mn().memoizedState;return RL({ref:l,nextImpl:a}),function(){if((Dt&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}function xN(a,l){return Bp(4,2,a,l)}function _N(a,l){return Bp(4,4,a,l)}function wN(a,l){if(typeof l=="function"){a=a();var u=l(a);return function(){typeof u=="function"?u():l(null)}}if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function SN(a,l,u){u=u!=null?u.concat([a]):null,Bp(4,4,wN.bind(null,l,a),u)}function cb(){}function kN(a,l){var u=mn();l=l===void 0?null:l;var p=u.memoizedState;return l!==null&&Q1(l,p[1])?p[0]:(u.memoizedState=[a,l],a)}function CN(a,l){var u=mn();l=l===void 0?null:l;var p=u.memoizedState;if(l!==null&&Q1(l,p[1]))return p[0];if(p=a(),Ro){Se(!0);try{a()}finally{Se(!1)}}return u.memoizedState=[p,l],p}function ub(a,l,u){return u===void 0||(Li&1073741824)!==0&&(Ct&261930)===0?a.memoizedState=l:(a.memoizedState=u,a=N4(),dt.lanes|=a,Oa|=a,u)}function NN(a,l,u,p){return Ws(u,l)?u:Zl.current!==null?(a=ub(a,u,p),Ws(a,l)||(Sn=!0),a):(Li&42)===0||(Li&1073741824)!==0&&(Ct&261930)===0?(Sn=!0,a.memoizedState=u):(a=N4(),dt.lanes|=a,Oa|=a,l)}function AN(a,l,u,p,v){var _=J.p;J.p=_!==0&&8>_?_:8;var A=L.T,$={};L.T=$,fb(a,!1,l,u);try{var Q=v(),oe=L.S;if(oe!==null&&oe($,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var ge=NL(Q,p);ah(a,l,ge,Zs(a))}else ah(a,l,p,Zs(a))}catch(be){ah(a,l,{then:function(){},status:"rejected",reason:be},Zs())}finally{J.p=_,A!==null&&$.types!==null&&(A.types=$.types),L.T=A}}function OL(){}function hb(a,l,u,p){if(a.tag!==5)throw Error(s(476));var v=EN(a).queue;AN(a,v,l,G,u===null?OL:function(){return jN(a),u(p)})}function EN(a){var l=a.memoizedState;if(l!==null)return l;l={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:G},next:null};var u={};return l.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:u},next:null},a.memoizedState=l,a=a.alternate,a!==null&&(a.memoizedState=l),l}function jN(a){var l=EN(a);l.next===null&&(l=a.alternate.memoizedState),ah(a,l.next.queue,{},Zs())}function db(){return Xn(Sh)}function TN(){return mn().memoizedState}function RN(){return mn().memoizedState}function ML(a){for(var l=a.return;l!==null;){switch(l.tag){case 24:case 3:var u=Zs();a=Na(u);var p=Aa(l,a,u);p!==null&&(Is(p,l,u),th(p,l,u)),l={cache:H1()},a.payload=l;return}l=l.return}}function BL(a,l,u){var p=Zs();u={lane:p,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Dp(a)?MN(l,u):(u=T1(a,l,u,p),u!==null&&(Is(u,a,p),BN(u,l,p)))}function ON(a,l,u){var p=Zs();ah(a,l,u,p)}function ah(a,l,u,p){var v={lane:p,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Dp(a))MN(l,v);else{var _=a.alternate;if(a.lanes===0&&(_===null||_.lanes===0)&&(_=l.lastRenderedReducer,_!==null))try{var A=l.lastRenderedState,$=_(A,u);if(v.hasEagerState=!0,v.eagerState=$,Ws($,A))return mp(a,l,v,0),Kt===null&&pp(),!1}catch{}if(u=T1(a,l,v,p),u!==null)return Is(u,a,p),BN(u,l,p),!0}return!1}function fb(a,l,u,p){if(p={lane:2,revertLane:qb(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Dp(a)){if(l)throw Error(s(479))}else l=T1(a,u,p,2),l!==null&&Is(l,a,2)}function Dp(a){var l=a.alternate;return a===dt||l!==null&&l===dt}function MN(a,l){ec=Ep=!0;var u=a.pending;u===null?l.next=l:(l.next=u.next,u.next=l),a.pending=l}function BN(a,l,u){if((u&4194048)!==0){var p=l.lanes;p&=a.pendingLanes,u|=p,l.lanes=u,$k(a,u)}}var oh={readContext:Xn,use:Rp,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useLayoutEffect:un,useInsertionEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useSyncExternalStore:un,useId:un,useHostTransitionStatus:un,useFormState:un,useActionState:un,useOptimistic:un,useMemoCache:un,useCacheRefresh:un};oh.useEffectEvent=un;var DN={readContext:Xn,use:Rp,useCallback:function(a,l){return bs().memoizedState=[a,l===void 0?null:l],a},useContext:Xn,useEffect:bN,useImperativeHandle:function(a,l,u){u=u!=null?u.concat([a]):null,Mp(4194308,4,wN.bind(null,l,a),u)},useLayoutEffect:function(a,l){return Mp(4194308,4,a,l)},useInsertionEffect:function(a,l){Mp(4,2,a,l)},useMemo:function(a,l){var u=bs();l=l===void 0?null:l;var p=a();if(Ro){Se(!0);try{a()}finally{Se(!1)}}return u.memoizedState=[p,l],p},useReducer:function(a,l,u){var p=bs();if(u!==void 0){var v=u(l);if(Ro){Se(!0);try{u(l)}finally{Se(!1)}}}else v=l;return p.memoizedState=p.baseState=v,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:v},p.queue=a,a=a.dispatch=BL.bind(null,dt,a),[p.memoizedState,a]},useRef:function(a){var l=bs();return a={current:a},l.memoizedState=a},useState:function(a){a=ab(a);var l=a.queue,u=ON.bind(null,dt,l);return l.dispatch=u,[a.memoizedState,u]},useDebugValue:cb,useDeferredValue:function(a,l){var u=bs();return ub(u,a,l)},useTransition:function(){var a=ab(!1);return a=AN.bind(null,dt,a.queue,!0,!1),bs().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,l,u){var p=dt,v=bs();if(At){if(u===void 0)throw Error(s(407));u=u()}else{if(u=l(),Kt===null)throw Error(s(349));(Ct&127)!==0||nN(p,l,u)}v.memoizedState=u;var _={value:u,getSnapshot:l};return v.queue=_,bN(rN.bind(null,p,_,a),[a]),p.flags|=2048,nc(9,{destroy:void 0},sN.bind(null,p,_,u,l),null),u},useId:function(){var a=bs(),l=Kt.identifierPrefix;if(At){var u=ri,p=si;u=(p&~(1<<32-me(p)-1)).toString(32)+u,l="_"+l+"R_"+u,u=jp++,0<u&&(l+="H"+u.toString(32)),l+="_"}else u=AL++,l="_"+l+"r_"+u.toString(32)+"_";return a.memoizedState=l},useHostTransitionStatus:db,useFormState:fN,useActionState:fN,useOptimistic:function(a){var l=bs();l.memoizedState=l.baseState=a;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=u,l=fb.bind(null,dt,!0,u),u.dispatch=l,[a,l]},useMemoCache:sb,useCacheRefresh:function(){return bs().memoizedState=ML.bind(null,dt)},useEffectEvent:function(a){var l=bs(),u={impl:a};return l.memoizedState=u,function(){if((Dt&2)!==0)throw Error(s(440));return u.impl.apply(void 0,arguments)}}},pb={readContext:Xn,use:Rp,useCallback:kN,useContext:Xn,useEffect:lb,useImperativeHandle:SN,useInsertionEffect:xN,useLayoutEffect:_N,useMemo:CN,useReducer:Op,useRef:yN,useState:function(){return Op(Ii)},useDebugValue:cb,useDeferredValue:function(a,l){var u=mn();return NN(u,Ht.memoizedState,a,l)},useTransition:function(){var a=Op(Ii)[0],l=mn().memoizedState;return[typeof a=="boolean"?a:ih(a),l]},useSyncExternalStore:tN,useId:TN,useHostTransitionStatus:db,useFormState:pN,useActionState:pN,useOptimistic:function(a,l){var u=mn();return oN(u,Ht,a,l)},useMemoCache:sb,useCacheRefresh:RN};pb.useEffectEvent=vN;var LN={readContext:Xn,use:Rp,useCallback:kN,useContext:Xn,useEffect:lb,useImperativeHandle:SN,useInsertionEffect:xN,useLayoutEffect:_N,useMemo:CN,useReducer:ib,useRef:yN,useState:function(){return ib(Ii)},useDebugValue:cb,useDeferredValue:function(a,l){var u=mn();return Ht===null?ub(u,a,l):NN(u,Ht.memoizedState,a,l)},useTransition:function(){var a=ib(Ii)[0],l=mn().memoizedState;return[typeof a=="boolean"?a:ih(a),l]},useSyncExternalStore:tN,useId:TN,useHostTransitionStatus:db,useFormState:gN,useActionState:gN,useOptimistic:function(a,l){var u=mn();return Ht!==null?oN(u,Ht,a,l):(u.baseState=a,[a,u.queue.dispatch])},useMemoCache:sb,useCacheRefresh:RN};LN.useEffectEvent=vN;function mb(a,l,u,p){l=a.memoizedState,u=u(p,l),u=u==null?l:m({},l,u),a.memoizedState=u,a.lanes===0&&(a.updateQueue.baseState=u)}var gb={enqueueSetState:function(a,l,u){a=a._reactInternals;var p=Zs(),v=Na(p);v.payload=l,u!=null&&(v.callback=u),l=Aa(a,v,p),l!==null&&(Is(l,a,p),th(l,a,p))},enqueueReplaceState:function(a,l,u){a=a._reactInternals;var p=Zs(),v=Na(p);v.tag=1,v.payload=l,u!=null&&(v.callback=u),l=Aa(a,v,p),l!==null&&(Is(l,a,p),th(l,a,p))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var u=Zs(),p=Na(u);p.tag=2,l!=null&&(p.callback=l),l=Aa(a,p,u),l!==null&&(Is(l,a,u),th(l,a,u))}};function IN(a,l,u,p,v,_,A){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(p,_,A):l.prototype&&l.prototype.isPureReactComponent?!Wu(u,p)||!Wu(v,_):!0}function PN(a,l,u,p){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(u,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(u,p),l.state!==a&&gb.enqueueReplaceState(l,l.state,null)}function Oo(a,l){var u=l;if("ref"in l){u={};for(var p in l)p!=="ref"&&(u[p]=l[p])}if(a=a.defaultProps){u===l&&(u=m({},u));for(var v in a)u[v]===void 0&&(u[v]=a[v])}return u}function $N(a){fp(a)}function zN(a){console.error(a)}function HN(a){fp(a)}function Lp(a,l){try{var u=a.onUncaughtError;u(l.value,{componentStack:l.stack})}catch(p){setTimeout(function(){throw p})}}function UN(a,l,u){try{var p=a.onCaughtError;p(u.value,{componentStack:u.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function yb(a,l,u){return u=Na(u),u.tag=3,u.payload={element:null},u.callback=function(){Lp(a,l)},u}function VN(a){return a=Na(a),a.tag=3,a}function FN(a,l,u,p){var v=u.type.getDerivedStateFromError;if(typeof v=="function"){var _=p.value;a.payload=function(){return v(_)},a.callback=function(){UN(l,u,p)}}var A=u.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(a.callback=function(){UN(l,u,p),typeof v!="function"&&(Ma===null?Ma=new Set([this]):Ma.add(this));var $=p.stack;this.componentDidCatch(p.value,{componentStack:$!==null?$:""})})}function DL(a,l,u,p,v){if(u.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(l=u.alternate,l!==null&&Gl(l,u,v,!0),u=Ys.current,u!==null){switch(u.tag){case 31:case 13:return wr===null?Gp():u.alternate===null&&hn===0&&(hn=3),u.flags&=-257,u.flags|=65536,u.lanes=v,p===Sp?u.flags|=16384:(l=u.updateQueue,l===null?u.updateQueue=new Set([p]):l.add(p),Ub(a,p,v)),!1;case 22:return u.flags|=65536,p===Sp?u.flags|=16384:(l=u.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([p])},u.updateQueue=l):(u=l.retryQueue,u===null?l.retryQueue=new Set([p]):u.add(p)),Ub(a,p,v)),!1}throw Error(s(435,u.tag))}return Ub(a,p,v),Gp(),!1}if(At)return l=Ys.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=v,p!==L1&&(a=Error(s(422),{cause:p}),Xu(br(a,u)))):(p!==L1&&(l=Error(s(423),{cause:p}),Xu(br(l,u))),a=a.current.alternate,a.flags|=65536,v&=-v,a.lanes|=v,p=br(p,u),v=yb(a.stateNode,p,v),W1(a,v),hn!==4&&(hn=2)),!1;var _=Error(s(520),{cause:p});if(_=br(_,u),mh===null?mh=[_]:mh.push(_),hn!==4&&(hn=2),l===null)return!0;p=br(p,u),u=l;do{switch(u.tag){case 3:return u.flags|=65536,a=v&-v,u.lanes|=a,a=yb(u.stateNode,p,a),W1(u,a),!1;case 1:if(l=u.type,_=u.stateNode,(u.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ma===null||!Ma.has(_))))return u.flags|=65536,v&=-v,u.lanes|=v,v=VN(v),FN(v,a,u,p),W1(u,v),!1}u=u.return}while(u!==null);return!1}var bb=Error(s(461)),Sn=!1;function Jn(a,l,u,p){l.child=a===null?GC(l,null,u,p):To(l,a.child,u,p)}function qN(a,l,u,p,v){u=u.render;var _=l.ref;if("ref"in p){var A={};for(var $ in p)$!=="ref"&&(A[$]=p[$])}else A=p;return No(l),p=Z1(a,l,u,A,_,v),$=eb(),a!==null&&!Sn?(tb(a,l,v),Pi(a,l,v)):(At&&$&&B1(l),l.flags|=1,Jn(a,l,p,v),l.child)}function KN(a,l,u,p,v){if(a===null){var _=u.type;return typeof _=="function"&&!R1(_)&&_.defaultProps===void 0&&u.compare===null?(l.tag=15,l.type=_,WN(a,l,_,p,v)):(a=yp(u.type,null,p,l,l.mode,v),a.ref=l.ref,a.return=l,l.child=a)}if(_=a.child,!Nb(a,v)){var A=_.memoizedProps;if(u=u.compare,u=u!==null?u:Wu,u(A,p)&&a.ref===l.ref)return Pi(a,l,v)}return l.flags|=1,a=Oi(_,p),a.ref=l.ref,a.return=l,l.child=a}function WN(a,l,u,p,v){if(a!==null){var _=a.memoizedProps;if(Wu(_,p)&&a.ref===l.ref)if(Sn=!1,l.pendingProps=p=_,Nb(a,v))(a.flags&131072)!==0&&(Sn=!0);else return l.lanes=a.lanes,Pi(a,l,v)}return vb(a,l,u,p,v)}function GN(a,l,u,p){var v=p.children,_=a!==null?a.memoizedState:null;if(a===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((l.flags&128)!==0){if(_=_!==null?_.baseLanes|u:u,a!==null){for(p=l.child=a.child,v=0;p!==null;)v=v|p.lanes|p.childLanes,p=p.sibling;p=v&~_}else p=0,l.child=null;return YN(a,l,_,u,p)}if((u&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},a!==null&&_p(l,_!==null?_.cachePool:null),_!==null?JC(l,_):Y1(),QC(l);else return p=l.lanes=536870912,YN(a,l,_!==null?_.baseLanes|u:u,u,p)}else _!==null?(_p(l,_.cachePool),JC(l,_),ja(),l.memoizedState=null):(a!==null&&_p(l,null),Y1(),ja());return Jn(a,l,v,u),l.child}function lh(a,l){return a!==null&&a.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function YN(a,l,u,p,v){var _=V1();return _=_===null?null:{parent:_n._currentValue,pool:_},l.memoizedState={baseLanes:u,cachePool:_},a!==null&&_p(l,null),Y1(),QC(l),a!==null&&Gl(a,l,p,!0),l.childLanes=v,null}function Ip(a,l){return l=$p({mode:l.mode,children:l.children},a.mode),l.ref=a.ref,a.child=l,l.return=a,l}function XN(a,l,u){return To(l,a.child,null,u),a=Ip(l,l.pendingProps),a.flags|=2,Xs(l),l.memoizedState=null,a}function LL(a,l,u){var p=l.pendingProps,v=(l.flags&128)!==0;if(l.flags&=-129,a===null){if(At){if(p.mode==="hidden")return a=Ip(l,p),l.lanes=536870912,lh(null,a);if(J1(l),(a=Xt)?(a=lA(a,_r),a=a!==null&&a.data==="&"?a:null,a!==null&&(l.memoizedState={dehydrated:a,treeContext:_a!==null?{id:si,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},u=MC(a),u.return=l,l.child=u,Yn=l,Xt=null)):a=null,a===null)throw Sa(l);return l.lanes=536870912,null}return Ip(l,p)}var _=a.memoizedState;if(_!==null){var A=_.dehydrated;if(J1(l),v)if(l.flags&256)l.flags&=-257,l=XN(a,l,u);else if(l.memoizedState!==null)l.child=a.child,l.flags|=128,l=null;else throw Error(s(558));else if(Sn||Gl(a,l,u,!1),v=(u&a.childLanes)!==0,Sn||v){if(p=Kt,p!==null&&(A=zk(p,u),A!==0&&A!==_.retryLane))throw _.retryLane=A,wo(a,A),Is(p,a,A),bb;Gp(),l=XN(a,l,u)}else a=_.treeContext,Xt=Sr(A.nextSibling),Yn=l,At=!0,wa=null,_r=!1,a!==null&&LC(l,a),l=Ip(l,p),l.flags|=4096;return l}return a=Oi(a.child,{mode:p.mode,children:p.children}),a.ref=l.ref,l.child=a,a.return=l,a}function Pp(a,l){var u=l.ref;if(u===null)a!==null&&a.ref!==null&&(l.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(s(284));(a===null||a.ref!==u)&&(l.flags|=4194816)}}function vb(a,l,u,p,v){return No(l),u=Z1(a,l,u,p,void 0,v),p=eb(),a!==null&&!Sn?(tb(a,l,v),Pi(a,l,v)):(At&&p&&B1(l),l.flags|=1,Jn(a,l,u,v),l.child)}function JN(a,l,u,p,v,_){return No(l),l.updateQueue=null,u=eN(l,p,u,v),ZC(a),p=eb(),a!==null&&!Sn?(tb(a,l,_),Pi(a,l,_)):(At&&p&&B1(l),l.flags|=1,Jn(a,l,u,_),l.child)}function QN(a,l,u,p,v){if(No(l),l.stateNode===null){var _=Fl,A=u.contextType;typeof A=="object"&&A!==null&&(_=Xn(A)),_=new u(p,_),l.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=gb,l.stateNode=_,_._reactInternals=l,_=l.stateNode,_.props=p,_.state=l.memoizedState,_.refs={},q1(l),A=u.contextType,_.context=typeof A=="object"&&A!==null?Xn(A):Fl,_.state=l.memoizedState,A=u.getDerivedStateFromProps,typeof A=="function"&&(mb(l,u,A,p),_.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&gb.enqueueReplaceState(_,_.state,null),sh(l,p,_,v),nh(),_.state=l.memoizedState),typeof _.componentDidMount=="function"&&(l.flags|=4194308),p=!0}else if(a===null){_=l.stateNode;var $=l.memoizedProps,Q=Oo(u,$);_.props=Q;var oe=_.context,ge=u.contextType;A=Fl,typeof ge=="object"&&ge!==null&&(A=Xn(ge));var be=u.getDerivedStateFromProps;ge=typeof be=="function"||typeof _.getSnapshotBeforeUpdate=="function",$=l.pendingProps!==$,ge||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||($||oe!==A)&&PN(l,_,p,A),Ca=!1;var ue=l.memoizedState;_.state=ue,sh(l,p,_,v),nh(),oe=l.memoizedState,$||ue!==oe||Ca?(typeof be=="function"&&(mb(l,u,be,p),oe=l.memoizedState),(Q=Ca||IN(l,u,Q,p,ue,oe,A))?(ge||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(l.flags|=4194308)):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=oe),_.props=p,_.state=oe,_.context=A,p=Q):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{_=l.stateNode,K1(a,l),A=l.memoizedProps,ge=Oo(u,A),_.props=ge,be=l.pendingProps,ue=_.context,oe=u.contextType,Q=Fl,typeof oe=="object"&&oe!==null&&(Q=Xn(oe)),$=u.getDerivedStateFromProps,(oe=typeof $=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==be||ue!==Q)&&PN(l,_,p,Q),Ca=!1,ue=l.memoizedState,_.state=ue,sh(l,p,_,v),nh();var de=l.memoizedState;A!==be||ue!==de||Ca||a!==null&&a.dependencies!==null&&vp(a.dependencies)?(typeof $=="function"&&(mb(l,u,$,p),de=l.memoizedState),(ge=Ca||IN(l,u,ge,p,ue,de,Q)||a!==null&&a.dependencies!==null&&vp(a.dependencies))?(oe||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(p,de,Q),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(p,de,Q)),typeof _.componentDidUpdate=="function"&&(l.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===a.memoizedProps&&ue===a.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===a.memoizedProps&&ue===a.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=de),_.props=p,_.state=de,_.context=Q,p=ge):(typeof _.componentDidUpdate!="function"||A===a.memoizedProps&&ue===a.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===a.memoizedProps&&ue===a.memoizedState||(l.flags|=1024),p=!1)}return _=p,Pp(a,l),p=(l.flags&128)!==0,_||p?(_=l.stateNode,u=p&&typeof u.getDerivedStateFromError!="function"?null:_.render(),l.flags|=1,a!==null&&p?(l.child=To(l,a.child,null,v),l.child=To(l,null,u,v)):Jn(a,l,u,v),l.memoizedState=_.state,a=l.child):a=Pi(a,l,v),a}function ZN(a,l,u,p){return ko(),l.flags|=256,Jn(a,l,u,p),l.child}var xb={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _b(a){return{baseLanes:a,cachePool:UC()}}function wb(a,l,u){return a=a!==null?a.childLanes&~u:0,l&&(a|=Qs),a}function e4(a,l,u){var p=l.pendingProps,v=!1,_=(l.flags&128)!==0,A;if((A=_)||(A=a!==null&&a.memoizedState===null?!1:(pn.current&2)!==0),A&&(v=!0,l.flags&=-129),A=(l.flags&32)!==0,l.flags&=-33,a===null){if(At){if(v?Ea(l):ja(),(a=Xt)?(a=lA(a,_r),a=a!==null&&a.data!=="&"?a:null,a!==null&&(l.memoizedState={dehydrated:a,treeContext:_a!==null?{id:si,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},u=MC(a),u.return=l,l.child=u,Yn=l,Xt=null)):a=null,a===null)throw Sa(l);return rv(a)?l.lanes=32:l.lanes=536870912,null}var $=p.children;return p=p.fallback,v?(ja(),v=l.mode,$=$p({mode:"hidden",children:$},v),p=So(p,v,u,null),$.return=l,p.return=l,$.sibling=p,l.child=$,p=l.child,p.memoizedState=_b(u),p.childLanes=wb(a,A,u),l.memoizedState=xb,lh(null,p)):(Ea(l),Sb(l,$))}var Q=a.memoizedState;if(Q!==null&&($=Q.dehydrated,$!==null)){if(_)l.flags&256?(Ea(l),l.flags&=-257,l=kb(a,l,u)):l.memoizedState!==null?(ja(),l.child=a.child,l.flags|=128,l=null):(ja(),$=p.fallback,v=l.mode,p=$p({mode:"visible",children:p.children},v),$=So($,v,u,null),$.flags|=2,p.return=l,$.return=l,p.sibling=$,l.child=p,To(l,a.child,null,u),p=l.child,p.memoizedState=_b(u),p.childLanes=wb(a,A,u),l.memoizedState=xb,l=lh(null,p));else if(Ea(l),rv($)){if(A=$.nextSibling&&$.nextSibling.dataset,A)var oe=A.dgst;A=oe,p=Error(s(419)),p.stack="",p.digest=A,Xu({value:p,source:null,stack:null}),l=kb(a,l,u)}else if(Sn||Gl(a,l,u,!1),A=(u&a.childLanes)!==0,Sn||A){if(A=Kt,A!==null&&(p=zk(A,u),p!==0&&p!==Q.retryLane))throw Q.retryLane=p,wo(a,p),Is(A,a,p),bb;sv($)||Gp(),l=kb(a,l,u)}else sv($)?(l.flags|=192,l.child=a.child,l=null):(a=Q.treeContext,Xt=Sr($.nextSibling),Yn=l,At=!0,wa=null,_r=!1,a!==null&&LC(l,a),l=Sb(l,p.children),l.flags|=4096);return l}return v?(ja(),$=p.fallback,v=l.mode,Q=a.child,oe=Q.sibling,p=Oi(Q,{mode:"hidden",children:p.children}),p.subtreeFlags=Q.subtreeFlags&65011712,oe!==null?$=Oi(oe,$):($=So($,v,u,null),$.flags|=2),$.return=l,p.return=l,p.sibling=$,l.child=p,lh(null,p),p=l.child,$=a.child.memoizedState,$===null?$=_b(u):(v=$.cachePool,v!==null?(Q=_n._currentValue,v=v.parent!==Q?{parent:Q,pool:Q}:v):v=UC(),$={baseLanes:$.baseLanes|u,cachePool:v}),p.memoizedState=$,p.childLanes=wb(a,A,u),l.memoizedState=xb,lh(a.child,p)):(Ea(l),u=a.child,a=u.sibling,u=Oi(u,{mode:"visible",children:p.children}),u.return=l,u.sibling=null,a!==null&&(A=l.deletions,A===null?(l.deletions=[a],l.flags|=16):A.push(a)),l.child=u,l.memoizedState=null,u)}function Sb(a,l){return l=$p({mode:"visible",children:l},a.mode),l.return=a,a.child=l}function $p(a,l){return a=Gs(22,a,null,l),a.lanes=0,a}function kb(a,l,u){return To(l,a.child,null,u),a=Sb(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function t4(a,l,u){a.lanes|=l;var p=a.alternate;p!==null&&(p.lanes|=l),$1(a.return,l,u)}function Cb(a,l,u,p,v,_){var A=a.memoizedState;A===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:v,treeForkCount:_}:(A.isBackwards=l,A.rendering=null,A.renderingStartTime=0,A.last=p,A.tail=u,A.tailMode=v,A.treeForkCount=_)}function n4(a,l,u){var p=l.pendingProps,v=p.revealOrder,_=p.tail;p=p.children;var A=pn.current,$=(A&2)!==0;if($?(A=A&1|2,l.flags|=128):A&=1,j(pn,A),Jn(a,l,p,u),p=At?Yu:0,!$&&a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&t4(a,u,l);else if(a.tag===19)t4(a,u,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(v){case"forwards":for(u=l.child,v=null;u!==null;)a=u.alternate,a!==null&&Ap(a)===null&&(v=u),u=u.sibling;u=v,u===null?(v=l.child,l.child=null):(v=u.sibling,u.sibling=null),Cb(l,!1,v,u,_,p);break;case"backwards":case"unstable_legacy-backwards":for(u=null,v=l.child,l.child=null;v!==null;){if(a=v.alternate,a!==null&&Ap(a)===null){l.child=v;break}a=v.sibling,v.sibling=u,u=v,v=a}Cb(l,!0,u,null,_,p);break;case"together":Cb(l,!1,null,null,void 0,p);break;default:l.memoizedState=null}return l.child}function Pi(a,l,u){if(a!==null&&(l.dependencies=a.dependencies),Oa|=l.lanes,(u&l.childLanes)===0)if(a!==null){if(Gl(a,l,u,!1),(u&l.childLanes)===0)return null}else return null;if(a!==null&&l.child!==a.child)throw Error(s(153));if(l.child!==null){for(a=l.child,u=Oi(a,a.pendingProps),l.child=u,u.return=l;a.sibling!==null;)a=a.sibling,u=u.sibling=Oi(a,a.pendingProps),u.return=l;u.sibling=null}return l.child}function Nb(a,l){return(a.lanes&l)!==0?!0:(a=a.dependencies,!!(a!==null&&vp(a)))}function IL(a,l,u){switch(l.tag){case 3:_e(l,l.stateNode.containerInfo),ka(l,_n,a.memoizedState.cache),ko();break;case 27:case 5:tt(l);break;case 4:_e(l,l.stateNode.containerInfo);break;case 10:ka(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,J1(l),null;break;case 13:var p=l.memoizedState;if(p!==null)return p.dehydrated!==null?(Ea(l),l.flags|=128,null):(u&l.child.childLanes)!==0?e4(a,l,u):(Ea(l),a=Pi(a,l,u),a!==null?a.sibling:null);Ea(l);break;case 19:var v=(a.flags&128)!==0;if(p=(u&l.childLanes)!==0,p||(Gl(a,l,u,!1),p=(u&l.childLanes)!==0),v){if(p)return n4(a,l,u);l.flags|=128}if(v=l.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),j(pn,pn.current),p)break;return null;case 22:return l.lanes=0,GN(a,l,u,l.pendingProps);case 24:ka(l,_n,a.memoizedState.cache)}return Pi(a,l,u)}function s4(a,l,u){if(a!==null)if(a.memoizedProps!==l.pendingProps)Sn=!0;else{if(!Nb(a,u)&&(l.flags&128)===0)return Sn=!1,IL(a,l,u);Sn=(a.flags&131072)!==0}else Sn=!1,At&&(l.flags&1048576)!==0&&DC(l,Yu,l.index);switch(l.lanes=0,l.tag){case 16:e:{var p=l.pendingProps;if(a=Eo(l.elementType),l.type=a,typeof a=="function")R1(a)?(p=Oo(a,p),l.tag=1,l=QN(null,l,a,p,u)):(l.tag=0,l=vb(null,l,a,p,u));else{if(a!=null){var v=a.$$typeof;if(v===R){l.tag=11,l=qN(null,l,a,p,u);break e}else if(v===z){l.tag=14,l=KN(null,l,a,p,u);break e}}throw l=X(a)||a,Error(s(306,l,""))}}return l;case 0:return vb(a,l,l.type,l.pendingProps,u);case 1:return p=l.type,v=Oo(p,l.pendingProps),QN(a,l,p,v,u);case 3:e:{if(_e(l,l.stateNode.containerInfo),a===null)throw Error(s(387));p=l.pendingProps;var _=l.memoizedState;v=_.element,K1(a,l),sh(l,p,null,u);var A=l.memoizedState;if(p=A.cache,ka(l,_n,p),p!==_.cache&&z1(l,[_n],u,!0),nh(),p=A.element,_.isDehydrated)if(_={element:p,isDehydrated:!1,cache:A.cache},l.updateQueue.baseState=_,l.memoizedState=_,l.flags&256){l=ZN(a,l,p,u);break e}else if(p!==v){v=br(Error(s(424)),l),Xu(v),l=ZN(a,l,p,u);break e}else for(a=l.stateNode.containerInfo,a.nodeType===9?a=a.body:a=a.nodeName==="HTML"?a.ownerDocument.body:a,Xt=Sr(a.firstChild),Yn=l,At=!0,wa=null,_r=!0,u=GC(l,null,p,u),l.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(ko(),p===v){l=Pi(a,l,u);break e}Jn(a,l,p,u)}l=l.child}return l;case 26:return Pp(a,l),a===null?(u=pA(l.type,null,l.pendingProps,null))?l.memoizedState=u:At||(u=l.type,a=l.pendingProps,p=tm(te.current).createElement(u),p[Gn]=l,p[Rs]=a,Qn(p,u,a),$n(p),l.stateNode=p):l.memoizedState=pA(l.type,a.memoizedProps,l.pendingProps,a.memoizedState),null;case 27:return tt(l),a===null&&At&&(p=l.stateNode=hA(l.type,l.pendingProps,te.current),Yn=l,_r=!0,v=Xt,Ia(l.type)?(iv=v,Xt=Sr(p.firstChild)):Xt=v),Jn(a,l,l.pendingProps.children,u),Pp(a,l),a===null&&(l.flags|=4194304),l.child;case 5:return a===null&&At&&((v=p=Xt)&&(p=fI(p,l.type,l.pendingProps,_r),p!==null?(l.stateNode=p,Yn=l,Xt=Sr(p.firstChild),_r=!1,v=!0):v=!1),v||Sa(l)),tt(l),v=l.type,_=l.pendingProps,A=a!==null?a.memoizedProps:null,p=_.children,ev(v,_)?p=null:A!==null&&ev(v,A)&&(l.flags|=32),l.memoizedState!==null&&(v=Z1(a,l,EL,null,null,u),Sh._currentValue=v),Pp(a,l),Jn(a,l,p,u),l.child;case 6:return a===null&&At&&((a=u=Xt)&&(u=pI(u,l.pendingProps,_r),u!==null?(l.stateNode=u,Yn=l,Xt=null,a=!0):a=!1),a||Sa(l)),null;case 13:return e4(a,l,u);case 4:return _e(l,l.stateNode.containerInfo),p=l.pendingProps,a===null?l.child=To(l,null,p,u):Jn(a,l,p,u),l.child;case 11:return qN(a,l,l.type,l.pendingProps,u);case 7:return Jn(a,l,l.pendingProps,u),l.child;case 8:return Jn(a,l,l.pendingProps.children,u),l.child;case 12:return Jn(a,l,l.pendingProps.children,u),l.child;case 10:return p=l.pendingProps,ka(l,l.type,p.value),Jn(a,l,p.children,u),l.child;case 9:return v=l.type._context,p=l.pendingProps.children,No(l),v=Xn(v),p=p(v),l.flags|=1,Jn(a,l,p,u),l.child;case 14:return KN(a,l,l.type,l.pendingProps,u);case 15:return WN(a,l,l.type,l.pendingProps,u);case 19:return n4(a,l,u);case 31:return LL(a,l,u);case 22:return GN(a,l,u,l.pendingProps);case 24:return No(l),p=Xn(_n),a===null?(v=V1(),v===null&&(v=Kt,_=H1(),v.pooledCache=_,_.refCount++,_!==null&&(v.pooledCacheLanes|=u),v=_),l.memoizedState={parent:p,cache:v},q1(l),ka(l,_n,v)):((a.lanes&u)!==0&&(K1(a,l),sh(l,null,null,u),nh()),v=a.memoizedState,_=l.memoizedState,v.parent!==p?(v={parent:p,cache:p},l.memoizedState=v,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=v),ka(l,_n,p)):(p=_.cache,ka(l,_n,p),p!==v.cache&&z1(l,[_n],u,!0))),Jn(a,l,l.pendingProps.children,u),l.child;case 29:throw l.pendingProps}throw Error(s(156,l.tag))}function $i(a){a.flags|=4}function Ab(a,l,u,p,v){if((l=(a.mode&32)!==0)&&(l=!1),l){if(a.flags|=16777216,(v&335544128)===v)if(a.stateNode.complete)a.flags|=8192;else if(T4())a.flags|=8192;else throw jo=Sp,F1}else a.flags&=-16777217}function r4(a,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!vA(l))if(T4())a.flags|=8192;else throw jo=Sp,F1}function zp(a,l){l!==null&&(a.flags|=4),a.flags&16384&&(l=a.tag!==22?Ts():536870912,a.lanes|=l,ac|=l)}function ch(a,l){if(!At)switch(a.tailMode){case"hidden":l=a.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?a.tail=null:u.sibling=null;break;case"collapsed":u=a.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:p.sibling=null}}function Jt(a){var l=a.alternate!==null&&a.alternate.child===a.child,u=0,p=0;if(l)for(var v=a.child;v!==null;)u|=v.lanes|v.childLanes,p|=v.subtreeFlags&65011712,p|=v.flags&65011712,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)u|=v.lanes|v.childLanes,p|=v.subtreeFlags,p|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=p,a.childLanes=u,l}function PL(a,l,u){var p=l.pendingProps;switch(D1(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(l),null;case 1:return Jt(l),null;case 3:return u=l.stateNode,p=null,a!==null&&(p=a.memoizedState.cache),l.memoizedState.cache!==p&&(l.flags|=2048),Di(_n),Ce(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(a===null||a.child===null)&&(Wl(l)?$i(l):a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,I1())),Jt(l),null;case 26:var v=l.type,_=l.memoizedState;return a===null?($i(l),_!==null?(Jt(l),r4(l,_)):(Jt(l),Ab(l,v,null,p,u))):_?_!==a.memoizedState?($i(l),Jt(l),r4(l,_)):(Jt(l),l.flags&=-16777217):(a=a.memoizedProps,a!==p&&$i(l),Jt(l),Ab(l,v,a,p,u)),null;case 27:if(Ee(l),u=te.current,v=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==p&&$i(l);else{if(!p){if(l.stateNode===null)throw Error(s(166));return Jt(l),null}a=Z.current,Wl(l)?IC(l):(a=hA(v,p,u),l.stateNode=a,$i(l))}return Jt(l),null;case 5:if(Ee(l),v=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==p&&$i(l);else{if(!p){if(l.stateNode===null)throw Error(s(166));return Jt(l),null}if(_=Z.current,Wl(l))IC(l);else{var A=tm(te.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof p.is=="string"?A.createElement("select",{is:p.is}):A.createElement("select"),p.multiple?_.multiple=!0:p.size&&(_.size=p.size);break;default:_=typeof p.is=="string"?A.createElement(v,{is:p.is}):A.createElement(v)}}_[Gn]=l,_[Rs]=p;e:for(A=l.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===l)break e;for(;A.sibling===null;){if(A.return===null||A.return===l)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}l.stateNode=_;e:switch(Qn(_,v,p),v){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&$i(l)}}return Jt(l),Ab(l,l.type,a===null?null:a.memoizedProps,l.pendingProps,u),null;case 6:if(a&&l.stateNode!=null)a.memoizedProps!==p&&$i(l);else{if(typeof p!="string"&&l.stateNode===null)throw Error(s(166));if(a=te.current,Wl(l)){if(a=l.stateNode,u=l.memoizedProps,p=null,v=Yn,v!==null)switch(v.tag){case 27:case 5:p=v.memoizedProps}a[Gn]=l,a=!!(a.nodeValue===u||p!==null&&p.suppressHydrationWarning===!0||eA(a.nodeValue,u)),a||Sa(l,!0)}else a=tm(a).createTextNode(p),a[Gn]=l,l.stateNode=a}return Jt(l),null;case 31:if(u=l.memoizedState,a===null||a.memoizedState!==null){if(p=Wl(l),u!==null){if(a===null){if(!p)throw Error(s(318));if(a=l.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(557));a[Gn]=l}else ko(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Jt(l),a=!1}else u=I1(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=u),a=!0;if(!a)return l.flags&256?(Xs(l),l):(Xs(l),null);if((l.flags&128)!==0)throw Error(s(558))}return Jt(l),null;case 13:if(p=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(v=Wl(l),p!==null&&p.dehydrated!==null){if(a===null){if(!v)throw Error(s(318));if(v=l.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(s(317));v[Gn]=l}else ko(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Jt(l),v=!1}else v=I1(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=v),v=!0;if(!v)return l.flags&256?(Xs(l),l):(Xs(l),null)}return Xs(l),(l.flags&128)!==0?(l.lanes=u,l):(u=p!==null,a=a!==null&&a.memoizedState!==null,u&&(p=l.child,v=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(v=p.alternate.memoizedState.cachePool.pool),_=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(_=p.memoizedState.cachePool.pool),_!==v&&(p.flags|=2048)),u!==a&&u&&(l.child.flags|=8192),zp(l,l.updateQueue),Jt(l),null);case 4:return Ce(),a===null&&Yb(l.stateNode.containerInfo),Jt(l),null;case 10:return Di(l.type),Jt(l),null;case 19:if(K(pn),p=l.memoizedState,p===null)return Jt(l),null;if(v=(l.flags&128)!==0,_=p.rendering,_===null)if(v)ch(p,!1);else{if(hn!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(_=Ap(a),_!==null){for(l.flags|=128,ch(p,!1),a=_.updateQueue,l.updateQueue=a,zp(l,a),l.subtreeFlags=0,a=u,u=l.child;u!==null;)OC(u,a),u=u.sibling;return j(pn,pn.current&1|2),At&&Mi(l,p.treeForkCount),l.child}a=a.sibling}p.tail!==null&&_t()>qp&&(l.flags|=128,v=!0,ch(p,!1),l.lanes=4194304)}else{if(!v)if(a=Ap(_),a!==null){if(l.flags|=128,v=!0,a=a.updateQueue,l.updateQueue=a,zp(l,a),ch(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!At)return Jt(l),null}else 2*_t()-p.renderingStartTime>qp&&u!==536870912&&(l.flags|=128,v=!0,ch(p,!1),l.lanes=4194304);p.isBackwards?(_.sibling=l.child,l.child=_):(a=p.last,a!==null?a.sibling=_:l.child=_,p.last=_)}return p.tail!==null?(a=p.tail,p.rendering=a,p.tail=a.sibling,p.renderingStartTime=_t(),a.sibling=null,u=pn.current,j(pn,v?u&1|2:u&1),At&&Mi(l,p.treeForkCount),a):(Jt(l),null);case 22:case 23:return Xs(l),X1(),p=l.memoizedState!==null,a!==null?a.memoizedState!==null!==p&&(l.flags|=8192):p&&(l.flags|=8192),p?(u&536870912)!==0&&(l.flags&128)===0&&(Jt(l),l.subtreeFlags&6&&(l.flags|=8192)):Jt(l),u=l.updateQueue,u!==null&&zp(l,u.retryQueue),u=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==u&&(l.flags|=2048),a!==null&&K(Ao),null;case 24:return u=null,a!==null&&(u=a.memoizedState.cache),l.memoizedState.cache!==u&&(l.flags|=2048),Di(_n),Jt(l),null;case 25:return null;case 30:return null}throw Error(s(156,l.tag))}function $L(a,l){switch(D1(l),l.tag){case 1:return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return Di(_n),Ce(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 26:case 27:case 5:return Ee(l),null;case 31:if(l.memoizedState!==null){if(Xs(l),l.alternate===null)throw Error(s(340));ko()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 13:if(Xs(l),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(s(340));ko()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return K(pn),null;case 4:return Ce(),null;case 10:return Di(l.type),null;case 22:case 23:return Xs(l),X1(),a!==null&&K(Ao),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 24:return Di(_n),null;case 25:return null;default:return null}}function i4(a,l){switch(D1(l),l.tag){case 3:Di(_n),Ce();break;case 26:case 27:case 5:Ee(l);break;case 4:Ce();break;case 31:l.memoizedState!==null&&Xs(l);break;case 13:Xs(l);break;case 19:K(pn);break;case 10:Di(l.type);break;case 22:case 23:Xs(l),X1(),a!==null&&K(Ao);break;case 24:Di(_n)}}function uh(a,l){try{var u=l.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var v=p.next;u=v;do{if((u.tag&a)===a){p=void 0;var _=u.create,A=u.inst;p=_(),A.destroy=p}u=u.next}while(u!==v)}}catch($){zt(l,l.return,$)}}function Ta(a,l,u){try{var p=l.updateQueue,v=p!==null?p.lastEffect:null;if(v!==null){var _=v.next;p=_;do{if((p.tag&a)===a){var A=p.inst,$=A.destroy;if($!==void 0){A.destroy=void 0,v=l;var Q=u,oe=$;try{oe()}catch(ge){zt(v,Q,ge)}}}p=p.next}while(p!==_)}}catch(ge){zt(l,l.return,ge)}}function a4(a){var l=a.updateQueue;if(l!==null){var u=a.stateNode;try{XC(l,u)}catch(p){zt(a,a.return,p)}}}function o4(a,l,u){u.props=Oo(a.type,a.memoizedProps),u.state=a.memoizedState;try{u.componentWillUnmount()}catch(p){zt(a,l,p)}}function hh(a,l){try{var u=a.ref;if(u!==null){switch(a.tag){case 26:case 27:case 5:var p=a.stateNode;break;case 30:p=a.stateNode;break;default:p=a.stateNode}typeof u=="function"?a.refCleanup=u(p):u.current=p}}catch(v){zt(a,l,v)}}function ii(a,l){var u=a.ref,p=a.refCleanup;if(u!==null)if(typeof p=="function")try{p()}catch(v){zt(a,l,v)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(v){zt(a,l,v)}else u.current=null}function l4(a){var l=a.type,u=a.memoizedProps,p=a.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":u.autoFocus&&p.focus();break e;case"img":u.src?p.src=u.src:u.srcSet&&(p.srcset=u.srcSet)}}catch(v){zt(a,a.return,v)}}function Eb(a,l,u){try{var p=a.stateNode;oI(p,a.type,u,l),p[Rs]=l}catch(v){zt(a,a.return,v)}}function c4(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Ia(a.type)||a.tag===4}function jb(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||c4(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Ia(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Tb(a,l,u){var p=a.tag;if(p===5||p===6)a=a.stateNode,l?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(a,l):(l=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,l.appendChild(a),u=u._reactRootContainer,u!=null||l.onclick!==null||(l.onclick=Ti));else if(p!==4&&(p===27&&Ia(a.type)&&(u=a.stateNode,l=null),a=a.child,a!==null))for(Tb(a,l,u),a=a.sibling;a!==null;)Tb(a,l,u),a=a.sibling}function Hp(a,l,u){var p=a.tag;if(p===5||p===6)a=a.stateNode,l?u.insertBefore(a,l):u.appendChild(a);else if(p!==4&&(p===27&&Ia(a.type)&&(u=a.stateNode),a=a.child,a!==null))for(Hp(a,l,u),a=a.sibling;a!==null;)Hp(a,l,u),a=a.sibling}function u4(a){var l=a.stateNode,u=a.memoizedProps;try{for(var p=a.type,v=l.attributes;v.length;)l.removeAttributeNode(v[0]);Qn(l,p,u),l[Gn]=a,l[Rs]=u}catch(_){zt(a,a.return,_)}}var zi=!1,kn=!1,Rb=!1,h4=typeof WeakSet=="function"?WeakSet:Set,zn=null;function zL(a,l){if(a=a.containerInfo,Qb=lm,a=SC(a),k1(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else e:{u=(u=a.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var v=p.anchorOffset,_=p.focusNode;p=p.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var A=0,$=-1,Q=-1,oe=0,ge=0,be=a,ue=null;t:for(;;){for(var de;be!==u||v!==0&&be.nodeType!==3||($=A+v),be!==_||p!==0&&be.nodeType!==3||(Q=A+p),be.nodeType===3&&(A+=be.nodeValue.length),(de=be.firstChild)!==null;)ue=be,be=de;for(;;){if(be===a)break t;if(ue===u&&++oe===v&&($=A),ue===_&&++ge===p&&(Q=A),(de=be.nextSibling)!==null)break;be=ue,ue=be.parentNode}be=de}u=$===-1||Q===-1?null:{start:$,end:Q}}else u=null}u=u||{start:0,end:0}}else u=null;for(Zb={focusedElem:a,selectionRange:u},lm=!1,zn=l;zn!==null;)if(l=zn,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,zn=a;else for(;zn!==null;){switch(l=zn,_=l.alternate,a=l.flags,l.tag){case 0:if((a&4)!==0&&(a=l.updateQueue,a=a!==null?a.events:null,a!==null))for(u=0;u<a.length;u++)v=a[u],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&_!==null){a=void 0,u=l,v=_.memoizedProps,_=_.memoizedState,p=u.stateNode;try{var Ve=Oo(u.type,v);a=p.getSnapshotBeforeUpdate(Ve,_),p.__reactInternalSnapshotBeforeUpdate=a}catch(nt){zt(u,u.return,nt)}}break;case 3:if((a&1024)!==0){if(a=l.stateNode.containerInfo,u=a.nodeType,u===9)nv(a);else if(u===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":nv(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(s(163))}if(a=l.sibling,a!==null){a.return=l.return,zn=a;break}zn=l.return}}function d4(a,l,u){var p=u.flags;switch(u.tag){case 0:case 11:case 15:Ui(a,u),p&4&&uh(5,u);break;case 1:if(Ui(a,u),p&4)if(a=u.stateNode,l===null)try{a.componentDidMount()}catch(A){zt(u,u.return,A)}else{var v=Oo(u.type,l.memoizedProps);l=l.memoizedState;try{a.componentDidUpdate(v,l,a.__reactInternalSnapshotBeforeUpdate)}catch(A){zt(u,u.return,A)}}p&64&&a4(u),p&512&&hh(u,u.return);break;case 3:if(Ui(a,u),p&64&&(a=u.updateQueue,a!==null)){if(l=null,u.child!==null)switch(u.child.tag){case 27:case 5:l=u.child.stateNode;break;case 1:l=u.child.stateNode}try{XC(a,l)}catch(A){zt(u,u.return,A)}}break;case 27:l===null&&p&4&&u4(u);case 26:case 5:Ui(a,u),l===null&&p&4&&l4(u),p&512&&hh(u,u.return);break;case 12:Ui(a,u);break;case 31:Ui(a,u),p&4&&m4(a,u);break;case 13:Ui(a,u),p&4&&g4(a,u),p&64&&(a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(u=YL.bind(null,u),mI(a,u))));break;case 22:if(p=u.memoizedState!==null||zi,!p){l=l!==null&&l.memoizedState!==null||kn,v=zi;var _=kn;zi=p,(kn=l)&&!_?Vi(a,u,(u.subtreeFlags&8772)!==0):Ui(a,u),zi=v,kn=_}break;case 30:break;default:Ui(a,u)}}function f4(a){var l=a.alternate;l!==null&&(a.alternate=null,f4(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&o1(l)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var tn=null,Ms=!1;function Hi(a,l,u){for(u=u.child;u!==null;)p4(a,l,u),u=u.sibling}function p4(a,l,u){if(he&&typeof he.onCommitFiberUnmount=="function")try{he.onCommitFiberUnmount(ie,u)}catch{}switch(u.tag){case 26:kn||ii(u,l),Hi(a,l,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:kn||ii(u,l);var p=tn,v=Ms;Ia(u.type)&&(tn=u.stateNode,Ms=!1),Hi(a,l,u),xh(u.stateNode),tn=p,Ms=v;break;case 5:kn||ii(u,l);case 6:if(p=tn,v=Ms,tn=null,Hi(a,l,u),tn=p,Ms=v,tn!==null)if(Ms)try{(tn.nodeType===9?tn.body:tn.nodeName==="HTML"?tn.ownerDocument.body:tn).removeChild(u.stateNode)}catch(_){zt(u,l,_)}else try{tn.removeChild(u.stateNode)}catch(_){zt(u,l,_)}break;case 18:tn!==null&&(Ms?(a=tn,aA(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,u.stateNode),pc(a)):aA(tn,u.stateNode));break;case 4:p=tn,v=Ms,tn=u.stateNode.containerInfo,Ms=!0,Hi(a,l,u),tn=p,Ms=v;break;case 0:case 11:case 14:case 15:Ta(2,u,l),kn||Ta(4,u,l),Hi(a,l,u);break;case 1:kn||(ii(u,l),p=u.stateNode,typeof p.componentWillUnmount=="function"&&o4(u,l,p)),Hi(a,l,u);break;case 21:Hi(a,l,u);break;case 22:kn=(p=kn)||u.memoizedState!==null,Hi(a,l,u),kn=p;break;default:Hi(a,l,u)}}function m4(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{pc(a)}catch(u){zt(l,l.return,u)}}}function g4(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{pc(a)}catch(u){zt(l,l.return,u)}}function HL(a){switch(a.tag){case 31:case 13:case 19:var l=a.stateNode;return l===null&&(l=a.stateNode=new h4),l;case 22:return a=a.stateNode,l=a._retryCache,l===null&&(l=a._retryCache=new h4),l;default:throw Error(s(435,a.tag))}}function Up(a,l){var u=HL(a);l.forEach(function(p){if(!u.has(p)){u.add(p);var v=XL.bind(null,a,p);p.then(v,v)}})}function Bs(a,l){var u=l.deletions;if(u!==null)for(var p=0;p<u.length;p++){var v=u[p],_=a,A=l,$=A;e:for(;$!==null;){switch($.tag){case 27:if(Ia($.type)){tn=$.stateNode,Ms=!1;break e}break;case 5:tn=$.stateNode,Ms=!1;break e;case 3:case 4:tn=$.stateNode.containerInfo,Ms=!0;break e}$=$.return}if(tn===null)throw Error(s(160));p4(_,A,v),tn=null,Ms=!1,_=v.alternate,_!==null&&(_.return=null),v.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)y4(l,a),l=l.sibling}var Hr=null;function y4(a,l){var u=a.alternate,p=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Bs(l,a),Ds(a),p&4&&(Ta(3,a,a.return),uh(3,a),Ta(5,a,a.return));break;case 1:Bs(l,a),Ds(a),p&512&&(kn||u===null||ii(u,u.return)),p&64&&zi&&(a=a.updateQueue,a!==null&&(p=a.callbacks,p!==null&&(u=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=u===null?p:u.concat(p))));break;case 26:var v=Hr;if(Bs(l,a),Ds(a),p&512&&(kn||u===null||ii(u,u.return)),p&4){var _=u!==null?u.memoizedState:null;if(p=a.memoizedState,u===null)if(p===null)if(a.stateNode===null){e:{p=a.type,u=a.memoizedProps,v=v.ownerDocument||v;t:switch(p){case"title":_=v.getElementsByTagName("title")[0],(!_||_[Pu]||_[Gn]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=v.createElement(p),v.head.insertBefore(_,v.querySelector("head > title"))),Qn(_,p,u),_[Gn]=a,$n(_),p=_;break e;case"link":var A=yA("link","href",v).get(p+(u.href||""));if(A){for(var $=0;$<A.length;$++)if(_=A[$],_.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&_.getAttribute("rel")===(u.rel==null?null:u.rel)&&_.getAttribute("title")===(u.title==null?null:u.title)&&_.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){A.splice($,1);break t}}_=v.createElement(p),Qn(_,p,u),v.head.appendChild(_);break;case"meta":if(A=yA("meta","content",v).get(p+(u.content||""))){for($=0;$<A.length;$++)if(_=A[$],_.getAttribute("content")===(u.content==null?null:""+u.content)&&_.getAttribute("name")===(u.name==null?null:u.name)&&_.getAttribute("property")===(u.property==null?null:u.property)&&_.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&_.getAttribute("charset")===(u.charSet==null?null:u.charSet)){A.splice($,1);break t}}_=v.createElement(p),Qn(_,p,u),v.head.appendChild(_);break;default:throw Error(s(468,p))}_[Gn]=a,$n(_),p=_}a.stateNode=p}else bA(v,a.type,a.stateNode);else a.stateNode=gA(v,p,a.memoizedProps);else _!==p?(_===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):_.count--,p===null?bA(v,a.type,a.stateNode):gA(v,p,a.memoizedProps)):p===null&&a.stateNode!==null&&Eb(a,a.memoizedProps,u.memoizedProps)}break;case 27:Bs(l,a),Ds(a),p&512&&(kn||u===null||ii(u,u.return)),u!==null&&p&4&&Eb(a,a.memoizedProps,u.memoizedProps);break;case 5:if(Bs(l,a),Ds(a),p&512&&(kn||u===null||ii(u,u.return)),a.flags&32){v=a.stateNode;try{Il(v,"")}catch(Ve){zt(a,a.return,Ve)}}p&4&&a.stateNode!=null&&(v=a.memoizedProps,Eb(a,v,u!==null?u.memoizedProps:v)),p&1024&&(Rb=!0);break;case 6:if(Bs(l,a),Ds(a),p&4){if(a.stateNode===null)throw Error(s(162));p=a.memoizedProps,u=a.stateNode;try{u.nodeValue=p}catch(Ve){zt(a,a.return,Ve)}}break;case 3:if(rm=null,v=Hr,Hr=nm(l.containerInfo),Bs(l,a),Hr=v,Ds(a),p&4&&u!==null&&u.memoizedState.isDehydrated)try{pc(l.containerInfo)}catch(Ve){zt(a,a.return,Ve)}Rb&&(Rb=!1,b4(a));break;case 4:p=Hr,Hr=nm(a.stateNode.containerInfo),Bs(l,a),Ds(a),Hr=p;break;case 12:Bs(l,a),Ds(a);break;case 31:Bs(l,a),Ds(a),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,Up(a,p)));break;case 13:Bs(l,a),Ds(a),a.child.flags&8192&&a.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Fp=_t()),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,Up(a,p)));break;case 22:v=a.memoizedState!==null;var Q=u!==null&&u.memoizedState!==null,oe=zi,ge=kn;if(zi=oe||v,kn=ge||Q,Bs(l,a),kn=ge,zi=oe,Ds(a),p&8192)e:for(l=a.stateNode,l._visibility=v?l._visibility&-2:l._visibility|1,v&&(u===null||Q||zi||kn||Mo(a)),u=null,l=a;;){if(l.tag===5||l.tag===26){if(u===null){Q=u=l;try{if(_=Q.stateNode,v)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{$=Q.stateNode;var be=Q.memoizedProps.style,ue=be!=null&&be.hasOwnProperty("display")?be.display:null;$.style.display=ue==null||typeof ue=="boolean"?"":(""+ue).trim()}}catch(Ve){zt(Q,Q.return,Ve)}}}else if(l.tag===6){if(u===null){Q=l;try{Q.stateNode.nodeValue=v?"":Q.memoizedProps}catch(Ve){zt(Q,Q.return,Ve)}}}else if(l.tag===18){if(u===null){Q=l;try{var de=Q.stateNode;v?oA(de,!0):oA(Q.stateNode,!1)}catch(Ve){zt(Q,Q.return,Ve)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===a)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;u===l&&(u=null),l=l.return}u===l&&(u=null),l.sibling.return=l.return,l=l.sibling}p&4&&(p=a.updateQueue,p!==null&&(u=p.retryQueue,u!==null&&(p.retryQueue=null,Up(a,u))));break;case 19:Bs(l,a),Ds(a),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,Up(a,p)));break;case 30:break;case 21:break;default:Bs(l,a),Ds(a)}}function Ds(a){var l=a.flags;if(l&2){try{for(var u,p=a.return;p!==null;){if(c4(p)){u=p;break}p=p.return}if(u==null)throw Error(s(160));switch(u.tag){case 27:var v=u.stateNode,_=jb(a);Hp(a,_,v);break;case 5:var A=u.stateNode;u.flags&32&&(Il(A,""),u.flags&=-33);var $=jb(a);Hp(a,$,A);break;case 3:case 4:var Q=u.stateNode.containerInfo,oe=jb(a);Tb(a,oe,Q);break;default:throw Error(s(161))}}catch(ge){zt(a,a.return,ge)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function b4(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var l=a;b4(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),a=a.sibling}}function Ui(a,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)d4(a,l.alternate,l),l=l.sibling}function Mo(a){for(a=a.child;a!==null;){var l=a;switch(l.tag){case 0:case 11:case 14:case 15:Ta(4,l,l.return),Mo(l);break;case 1:ii(l,l.return);var u=l.stateNode;typeof u.componentWillUnmount=="function"&&o4(l,l.return,u),Mo(l);break;case 27:xh(l.stateNode);case 26:case 5:ii(l,l.return),Mo(l);break;case 22:l.memoizedState===null&&Mo(l);break;case 30:Mo(l);break;default:Mo(l)}a=a.sibling}}function Vi(a,l,u){for(u=u&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var p=l.alternate,v=a,_=l,A=_.flags;switch(_.tag){case 0:case 11:case 15:Vi(v,_,u),uh(4,_);break;case 1:if(Vi(v,_,u),p=_,v=p.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(oe){zt(p,p.return,oe)}if(p=_,v=p.updateQueue,v!==null){var $=p.stateNode;try{var Q=v.shared.hiddenCallbacks;if(Q!==null)for(v.shared.hiddenCallbacks=null,v=0;v<Q.length;v++)YC(Q[v],$)}catch(oe){zt(p,p.return,oe)}}u&&A&64&&a4(_),hh(_,_.return);break;case 27:u4(_);case 26:case 5:Vi(v,_,u),u&&p===null&&A&4&&l4(_),hh(_,_.return);break;case 12:Vi(v,_,u);break;case 31:Vi(v,_,u),u&&A&4&&m4(v,_);break;case 13:Vi(v,_,u),u&&A&4&&g4(v,_);break;case 22:_.memoizedState===null&&Vi(v,_,u),hh(_,_.return);break;case 30:break;default:Vi(v,_,u)}l=l.sibling}}function Ob(a,l){var u=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),a=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(a=l.memoizedState.cachePool.pool),a!==u&&(a!=null&&a.refCount++,u!=null&&Ju(u))}function Mb(a,l){a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&Ju(a))}function Ur(a,l,u,p){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)v4(a,l,u,p),l=l.sibling}function v4(a,l,u,p){var v=l.flags;switch(l.tag){case 0:case 11:case 15:Ur(a,l,u,p),v&2048&&uh(9,l);break;case 1:Ur(a,l,u,p);break;case 3:Ur(a,l,u,p),v&2048&&(a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&Ju(a)));break;case 12:if(v&2048){Ur(a,l,u,p),a=l.stateNode;try{var _=l.memoizedProps,A=_.id,$=_.onPostCommit;typeof $=="function"&&$(A,l.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(Q){zt(l,l.return,Q)}}else Ur(a,l,u,p);break;case 31:Ur(a,l,u,p);break;case 13:Ur(a,l,u,p);break;case 23:break;case 22:_=l.stateNode,A=l.alternate,l.memoizedState!==null?_._visibility&2?Ur(a,l,u,p):dh(a,l):_._visibility&2?Ur(a,l,u,p):(_._visibility|=2,sc(a,l,u,p,(l.subtreeFlags&10256)!==0||!1)),v&2048&&Ob(A,l);break;case 24:Ur(a,l,u,p),v&2048&&Mb(l.alternate,l);break;default:Ur(a,l,u,p)}}function sc(a,l,u,p,v){for(v=v&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var _=a,A=l,$=u,Q=p,oe=A.flags;switch(A.tag){case 0:case 11:case 15:sc(_,A,$,Q,v),uh(8,A);break;case 23:break;case 22:var ge=A.stateNode;A.memoizedState!==null?ge._visibility&2?sc(_,A,$,Q,v):dh(_,A):(ge._visibility|=2,sc(_,A,$,Q,v)),v&&oe&2048&&Ob(A.alternate,A);break;case 24:sc(_,A,$,Q,v),v&&oe&2048&&Mb(A.alternate,A);break;default:sc(_,A,$,Q,v)}l=l.sibling}}function dh(a,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var u=a,p=l,v=p.flags;switch(p.tag){case 22:dh(u,p),v&2048&&Ob(p.alternate,p);break;case 24:dh(u,p),v&2048&&Mb(p.alternate,p);break;default:dh(u,p)}l=l.sibling}}var fh=8192;function rc(a,l,u){if(a.subtreeFlags&fh)for(a=a.child;a!==null;)x4(a,l,u),a=a.sibling}function x4(a,l,u){switch(a.tag){case 26:rc(a,l,u),a.flags&fh&&a.memoizedState!==null&&AI(u,Hr,a.memoizedState,a.memoizedProps);break;case 5:rc(a,l,u);break;case 3:case 4:var p=Hr;Hr=nm(a.stateNode.containerInfo),rc(a,l,u),Hr=p;break;case 22:a.memoizedState===null&&(p=a.alternate,p!==null&&p.memoizedState!==null?(p=fh,fh=16777216,rc(a,l,u),fh=p):rc(a,l,u));break;default:rc(a,l,u)}}function _4(a){var l=a.alternate;if(l!==null&&(a=l.child,a!==null)){l.child=null;do l=a.sibling,a.sibling=null,a=l;while(a!==null)}}function ph(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var p=l[u];zn=p,S4(p,a)}_4(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)w4(a),a=a.sibling}function w4(a){switch(a.tag){case 0:case 11:case 15:ph(a),a.flags&2048&&Ta(9,a,a.return);break;case 3:ph(a);break;case 12:ph(a);break;case 22:var l=a.stateNode;a.memoizedState!==null&&l._visibility&2&&(a.return===null||a.return.tag!==13)?(l._visibility&=-3,Vp(a)):ph(a);break;default:ph(a)}}function Vp(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var p=l[u];zn=p,S4(p,a)}_4(a)}for(a=a.child;a!==null;){switch(l=a,l.tag){case 0:case 11:case 15:Ta(8,l,l.return),Vp(l);break;case 22:u=l.stateNode,u._visibility&2&&(u._visibility&=-3,Vp(l));break;default:Vp(l)}a=a.sibling}}function S4(a,l){for(;zn!==null;){var u=zn;switch(u.tag){case 0:case 11:case 15:Ta(8,u,l);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var p=u.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Ju(u.memoizedState.cache)}if(p=u.child,p!==null)p.return=u,zn=p;else e:for(u=a;zn!==null;){p=zn;var v=p.sibling,_=p.return;if(f4(p),p===u){zn=null;break e}if(v!==null){v.return=_,zn=v;break e}zn=_}}}var UL={getCacheForType:function(a){var l=Xn(_n),u=l.data.get(a);return u===void 0&&(u=a(),l.data.set(a,u)),u},cacheSignal:function(){return Xn(_n).controller.signal}},VL=typeof WeakMap=="function"?WeakMap:Map,Dt=0,Kt=null,wt=null,Ct=0,$t=0,Js=null,Ra=!1,ic=!1,Bb=!1,Fi=0,hn=0,Oa=0,Bo=0,Db=0,Qs=0,ac=0,mh=null,Ls=null,Lb=!1,Fp=0,k4=0,qp=1/0,Kp=null,Ma=null,Tn=0,Ba=null,oc=null,qi=0,Ib=0,Pb=null,C4=null,gh=0,$b=null;function Zs(){return(Dt&2)!==0&&Ct!==0?Ct&-Ct:L.T!==null?qb():Hk()}function N4(){if(Qs===0)if((Ct&536870912)===0||At){var a=De;De<<=1,(De&3932160)===0&&(De=262144),Qs=a}else Qs=536870912;return a=Ys.current,a!==null&&(a.flags|=32),Qs}function Is(a,l,u){(a===Kt&&($t===2||$t===9)||a.cancelPendingCommit!==null)&&(lc(a,0),Da(a,Ct,Qs,!1)),yo(a,u),((Dt&2)===0||a!==Kt)&&(a===Kt&&((Dt&2)===0&&(Bo|=u),hn===4&&Da(a,Ct,Qs,!1)),ai(a))}function A4(a,l,u){if((Dt&6)!==0)throw Error(s(327));var p=!u&&(l&127)===0&&(l&a.expiredLanes)===0||Bt(a,l),v=p?KL(a,l):Hb(a,l,!0),_=p;do{if(v===0){ic&&!p&&Da(a,l,0,!1);break}else{if(u=a.current.alternate,_&&!FL(u)){v=Hb(a,l,!1),_=!1;continue}if(v===2){if(_=l,a.errorRecoveryDisabledLanes&_)var A=0;else A=a.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){l=A;e:{var $=a;v=mh;var Q=$.current.memoizedState.isDehydrated;if(Q&&(lc($,A).flags|=256),A=Hb($,A,!1),A!==2){if(Bb&&!Q){$.errorRecoveryDisabledLanes|=_,Bo|=_,v=4;break e}_=Ls,Ls=v,_!==null&&(Ls===null?Ls=_:Ls.push.apply(Ls,_))}v=A}if(_=!1,v!==2)continue}}if(v===1){lc(a,0),Da(a,l,0,!0);break}e:{switch(p=a,_=v,_){case 0:case 1:throw Error(s(345));case 4:if((l&4194048)!==l)break;case 6:Da(p,l,Qs,!Ra);break e;case 2:Ls=null;break;case 3:case 5:break;default:throw Error(s(329))}if((l&62914560)===l&&(v=Fp+300-_t(),10<v)){if(Da(p,l,Qs,!Ra),pt(p,0,!0)!==0)break e;qi=l,p.timeoutHandle=rA(E4.bind(null,p,u,Ls,Kp,Lb,l,Qs,Bo,ac,Ra,_,"Throttled",-0,0),v);break e}E4(p,u,Ls,Kp,Lb,l,Qs,Bo,ac,Ra,_,null,-0,0)}}break}while(!0);ai(a)}function E4(a,l,u,p,v,_,A,$,Q,oe,ge,be,ue,de){if(a.timeoutHandle=-1,be=l.subtreeFlags,be&8192||(be&16785408)===16785408){be={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ti},x4(l,_,be);var Ve=(_&62914560)===_?Fp-_t():(_&4194048)===_?k4-_t():0;if(Ve=EI(be,Ve),Ve!==null){qi=_,a.cancelPendingCommit=Ve(L4.bind(null,a,l,_,u,p,v,A,$,Q,ge,be,null,ue,de)),Da(a,_,A,!oe);return}}L4(a,l,_,u,p,v,A,$,Q)}function FL(a){for(var l=a;;){var u=l.tag;if((u===0||u===11||u===15)&&l.flags&16384&&(u=l.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var p=0;p<u.length;p++){var v=u[p],_=v.getSnapshot;v=v.value;try{if(!Ws(_(),v))return!1}catch{return!1}}if(u=l.child,l.subtreeFlags&16384&&u!==null)u.return=l,l=u;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Da(a,l,u,p){l&=~Db,l&=~Bo,a.suspendedLanes|=l,a.pingedLanes&=~l,p&&(a.warmLanes|=l),p=a.expirationTimes;for(var v=l;0<v;){var _=31-me(v),A=1<<_;p[_]=-1,v&=~A}u!==0&&Pk(a,u,l)}function Wp(){return(Dt&6)===0?(yh(0),!1):!0}function zb(){if(wt!==null){if($t===0)var a=wt.return;else a=wt,Bi=Co=null,nb(a),Ql=null,Zu=0,a=wt;for(;a!==null;)i4(a.alternate,a),a=a.return;wt=null}}function lc(a,l){var u=a.timeoutHandle;u!==-1&&(a.timeoutHandle=-1,uI(u)),u=a.cancelPendingCommit,u!==null&&(a.cancelPendingCommit=null,u()),qi=0,zb(),Kt=a,wt=u=Oi(a.current,null),Ct=l,$t=0,Js=null,Ra=!1,ic=Bt(a,l),Bb=!1,ac=Qs=Db=Bo=Oa=hn=0,Ls=mh=null,Lb=!1,(l&8)!==0&&(l|=l&32);var p=a.entangledLanes;if(p!==0)for(a=a.entanglements,p&=l;0<p;){var v=31-me(p),_=1<<v;l|=a[v],p&=~_}return Fi=l,pp(),u}function j4(a,l){dt=null,L.H=oh,l===Jl||l===wp?(l=qC(),$t=3):l===F1?(l=qC(),$t=4):$t=l===bb?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Js=l,wt===null&&(hn=1,Lp(a,br(l,a.current)))}function T4(){var a=Ys.current;return a===null?!0:(Ct&4194048)===Ct?wr===null:(Ct&62914560)===Ct||(Ct&536870912)!==0?a===wr:!1}function R4(){var a=L.H;return L.H=oh,a===null?oh:a}function O4(){var a=L.A;return L.A=UL,a}function Gp(){hn=4,Ra||(Ct&4194048)!==Ct&&Ys.current!==null||(ic=!0),(Oa&134217727)===0&&(Bo&134217727)===0||Kt===null||Da(Kt,Ct,Qs,!1)}function Hb(a,l,u){var p=Dt;Dt|=2;var v=R4(),_=O4();(Kt!==a||Ct!==l)&&(Kp=null,lc(a,l)),l=!1;var A=hn;e:do try{if($t!==0&&wt!==null){var $=wt,Q=Js;switch($t){case 8:zb(),A=6;break e;case 3:case 2:case 9:case 6:Ys.current===null&&(l=!0);var oe=$t;if($t=0,Js=null,cc(a,$,Q,oe),u&&ic){A=0;break e}break;default:oe=$t,$t=0,Js=null,cc(a,$,Q,oe)}}qL(),A=hn;break}catch(ge){j4(a,ge)}while(!0);return l&&a.shellSuspendCounter++,Bi=Co=null,Dt=p,L.H=v,L.A=_,wt===null&&(Kt=null,Ct=0,pp()),A}function qL(){for(;wt!==null;)M4(wt)}function KL(a,l){var u=Dt;Dt|=2;var p=R4(),v=O4();Kt!==a||Ct!==l?(Kp=null,qp=_t()+500,lc(a,l)):ic=Bt(a,l);e:do try{if($t!==0&&wt!==null){l=wt;var _=Js;t:switch($t){case 1:$t=0,Js=null,cc(a,l,_,1);break;case 2:case 9:if(VC(_)){$t=0,Js=null,B4(l);break}l=function(){$t!==2&&$t!==9||Kt!==a||($t=7),ai(a)},_.then(l,l);break e;case 3:$t=7;break e;case 4:$t=5;break e;case 7:VC(_)?($t=0,Js=null,B4(l)):($t=0,Js=null,cc(a,l,_,7));break;case 5:var A=null;switch(wt.tag){case 26:A=wt.memoizedState;case 5:case 27:var $=wt;if(A?vA(A):$.stateNode.complete){$t=0,Js=null;var Q=$.sibling;if(Q!==null)wt=Q;else{var oe=$.return;oe!==null?(wt=oe,Yp(oe)):wt=null}break t}}$t=0,Js=null,cc(a,l,_,5);break;case 6:$t=0,Js=null,cc(a,l,_,6);break;case 8:zb(),hn=6;break e;default:throw Error(s(462))}}WL();break}catch(ge){j4(a,ge)}while(!0);return Bi=Co=null,L.H=p,L.A=v,Dt=u,wt!==null?0:(Kt=null,Ct=0,pp(),hn)}function WL(){for(;wt!==null&&!rt();)M4(wt)}function M4(a){var l=s4(a.alternate,a,Fi);a.memoizedProps=a.pendingProps,l===null?Yp(a):wt=l}function B4(a){var l=a,u=l.alternate;switch(l.tag){case 15:case 0:l=JN(u,l,l.pendingProps,l.type,void 0,Ct);break;case 11:l=JN(u,l,l.pendingProps,l.type.render,l.ref,Ct);break;case 5:nb(l);default:i4(u,l),l=wt=OC(l,Fi),l=s4(u,l,Fi)}a.memoizedProps=a.pendingProps,l===null?Yp(a):wt=l}function cc(a,l,u,p){Bi=Co=null,nb(l),Ql=null,Zu=0;var v=l.return;try{if(DL(a,v,l,u,Ct)){hn=1,Lp(a,br(u,a.current)),wt=null;return}}catch(_){if(v!==null)throw wt=v,_;hn=1,Lp(a,br(u,a.current)),wt=null;return}l.flags&32768?(At||p===1?a=!0:ic||(Ct&536870912)!==0?a=!1:(Ra=a=!0,(p===2||p===9||p===3||p===6)&&(p=Ys.current,p!==null&&p.tag===13&&(p.flags|=16384))),D4(l,a)):Yp(l)}function Yp(a){var l=a;do{if((l.flags&32768)!==0){D4(l,Ra);return}a=l.return;var u=PL(l.alternate,l,Fi);if(u!==null){wt=u;return}if(l=l.sibling,l!==null){wt=l;return}wt=l=a}while(l!==null);hn===0&&(hn=5)}function D4(a,l){do{var u=$L(a.alternate,a);if(u!==null){u.flags&=32767,wt=u;return}if(u=a.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!l&&(a=a.sibling,a!==null)){wt=a;return}wt=a=u}while(a!==null);hn=6,wt=null}function L4(a,l,u,p,v,_,A,$,Q){a.cancelPendingCommit=null;do Xp();while(Tn!==0);if((Dt&6)!==0)throw Error(s(327));if(l!==null){if(l===a.current)throw Error(s(177));if(_=l.lanes|l.childLanes,_|=j1,s1(a,u,_,A,$,Q),a===Kt&&(wt=Kt=null,Ct=0),oc=l,Ba=a,qi=u,Ib=_,Pb=v,C4=p,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,JL(qe,function(){return H4(),null})):(a.callbackNode=null,a.callbackPriority=0),p=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||p){p=L.T,L.T=null,v=J.p,J.p=2,A=Dt,Dt|=4;try{zL(a,l,u)}finally{Dt=A,J.p=v,L.T=p}}Tn=1,I4(),P4(),$4()}}function I4(){if(Tn===1){Tn=0;var a=Ba,l=oc,u=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||u){u=L.T,L.T=null;var p=J.p;J.p=2;var v=Dt;Dt|=4;try{y4(l,a);var _=Zb,A=SC(a.containerInfo),$=_.focusedElem,Q=_.selectionRange;if(A!==$&&$&&$.ownerDocument&&wC($.ownerDocument.documentElement,$)){if(Q!==null&&k1($)){var oe=Q.start,ge=Q.end;if(ge===void 0&&(ge=oe),"selectionStart"in $)$.selectionStart=oe,$.selectionEnd=Math.min(ge,$.value.length);else{var be=$.ownerDocument||document,ue=be&&be.defaultView||window;if(ue.getSelection){var de=ue.getSelection(),Ve=$.textContent.length,nt=Math.min(Q.start,Ve),Vt=Q.end===void 0?nt:Math.min(Q.end,Ve);!de.extend&&nt>Vt&&(A=Vt,Vt=nt,nt=A);var re=_C($,nt),ee=_C($,Vt);if(re&&ee&&(de.rangeCount!==1||de.anchorNode!==re.node||de.anchorOffset!==re.offset||de.focusNode!==ee.node||de.focusOffset!==ee.offset)){var ae=be.createRange();ae.setStart(re.node,re.offset),de.removeAllRanges(),nt>Vt?(de.addRange(ae),de.extend(ee.node,ee.offset)):(ae.setEnd(ee.node,ee.offset),de.addRange(ae))}}}}for(be=[],de=$;de=de.parentNode;)de.nodeType===1&&be.push({element:de,left:de.scrollLeft,top:de.scrollTop});for(typeof $.focus=="function"&&$.focus(),$=0;$<be.length;$++){var ye=be[$];ye.element.scrollLeft=ye.left,ye.element.scrollTop=ye.top}}lm=!!Qb,Zb=Qb=null}finally{Dt=v,J.p=p,L.T=u}}a.current=l,Tn=2}}function P4(){if(Tn===2){Tn=0;var a=Ba,l=oc,u=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||u){u=L.T,L.T=null;var p=J.p;J.p=2;var v=Dt;Dt|=4;try{d4(a,l.alternate,l)}finally{Dt=v,J.p=p,L.T=u}}Tn=3}}function $4(){if(Tn===4||Tn===3){Tn=0,Mt();var a=Ba,l=oc,u=qi,p=C4;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Tn=5:(Tn=0,oc=Ba=null,z4(a,a.pendingLanes));var v=a.pendingLanes;if(v===0&&(Ma=null),i1(u),l=l.stateNode,he&&typeof he.onCommitFiberRoot=="function")try{he.onCommitFiberRoot(ie,l,void 0,(l.current.flags&128)===128)}catch{}if(p!==null){l=L.T,v=J.p,J.p=2,L.T=null;try{for(var _=a.onRecoverableError,A=0;A<p.length;A++){var $=p[A];_($.value,{componentStack:$.stack})}}finally{L.T=l,J.p=v}}(qi&3)!==0&&Xp(),ai(a),v=a.pendingLanes,(u&261930)!==0&&(v&42)!==0?a===$b?gh++:(gh=0,$b=a):gh=0,yh(0)}}function z4(a,l){(a.pooledCacheLanes&=l)===0&&(l=a.pooledCache,l!=null&&(a.pooledCache=null,Ju(l)))}function Xp(){return I4(),P4(),$4(),H4()}function H4(){if(Tn!==5)return!1;var a=Ba,l=Ib;Ib=0;var u=i1(qi),p=L.T,v=J.p;try{J.p=32>u?32:u,L.T=null,u=Pb,Pb=null;var _=Ba,A=qi;if(Tn=0,oc=Ba=null,qi=0,(Dt&6)!==0)throw Error(s(331));var $=Dt;if(Dt|=4,w4(_.current),v4(_,_.current,A,u),Dt=$,yh(0,!1),he&&typeof he.onPostCommitFiberRoot=="function")try{he.onPostCommitFiberRoot(ie,_)}catch{}return!0}finally{J.p=v,L.T=p,z4(a,l)}}function U4(a,l,u){l=br(u,l),l=yb(a.stateNode,l,2),a=Aa(a,l,2),a!==null&&(yo(a,2),ai(a))}function zt(a,l,u){if(a.tag===3)U4(a,a,u);else for(;l!==null;){if(l.tag===3){U4(l,a,u);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Ma===null||!Ma.has(p))){a=br(u,a),u=VN(2),p=Aa(l,u,2),p!==null&&(FN(u,p,l,a),yo(p,2),ai(p));break}}l=l.return}}function Ub(a,l,u){var p=a.pingCache;if(p===null){p=a.pingCache=new VL;var v=new Set;p.set(l,v)}else v=p.get(l),v===void 0&&(v=new Set,p.set(l,v));v.has(u)||(Bb=!0,v.add(u),a=GL.bind(null,a,l,u),l.then(a,a))}function GL(a,l,u){var p=a.pingCache;p!==null&&p.delete(l),a.pingedLanes|=a.suspendedLanes&u,a.warmLanes&=~u,Kt===a&&(Ct&u)===u&&(hn===4||hn===3&&(Ct&62914560)===Ct&&300>_t()-Fp?(Dt&2)===0&&lc(a,0):Db|=u,ac===Ct&&(ac=0)),ai(a)}function V4(a,l){l===0&&(l=Ts()),a=wo(a,l),a!==null&&(yo(a,l),ai(a))}function YL(a){var l=a.memoizedState,u=0;l!==null&&(u=l.retryLane),V4(a,u)}function XL(a,l){var u=0;switch(a.tag){case 31:case 13:var p=a.stateNode,v=a.memoizedState;v!==null&&(u=v.retryLane);break;case 19:p=a.stateNode;break;case 22:p=a.stateNode._retryCache;break;default:throw Error(s(314))}p!==null&&p.delete(l),V4(a,u)}function JL(a,l){return ys(a,l)}var Jp=null,uc=null,Vb=!1,Qp=!1,Fb=!1,La=0;function ai(a){a!==uc&&a.next===null&&(uc===null?Jp=uc=a:uc=uc.next=a),Qp=!0,Vb||(Vb=!0,ZL())}function yh(a,l){if(!Fb&&Qp){Fb=!0;do for(var u=!1,p=Jp;p!==null;){if(a!==0){var v=p.pendingLanes;if(v===0)var _=0;else{var A=p.suspendedLanes,$=p.pingedLanes;_=(1<<31-me(42|a)+1)-1,_&=v&~(A&~$),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(u=!0,W4(p,_))}else _=Ct,_=pt(p,p===Kt?_:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(_&3)===0||Bt(p,_)||(u=!0,W4(p,_));p=p.next}while(u);Fb=!1}}function QL(){F4()}function F4(){Qp=Vb=!1;var a=0;La!==0&&cI()&&(a=La);for(var l=_t(),u=null,p=Jp;p!==null;){var v=p.next,_=q4(p,l);_===0?(p.next=null,u===null?Jp=v:u.next=v,v===null&&(uc=u)):(u=p,(a!==0||(_&3)!==0)&&(Qp=!0)),p=v}Tn!==0&&Tn!==5||yh(a),La!==0&&(La=0)}function q4(a,l){for(var u=a.suspendedLanes,p=a.pingedLanes,v=a.expirationTimes,_=a.pendingLanes&-62914561;0<_;){var A=31-me(_),$=1<<A,Q=v[A];Q===-1?(($&u)===0||($&p)!==0)&&(v[A]=rn($,l)):Q<=l&&(a.expiredLanes|=$),_&=~$}if(l=Kt,u=Ct,u=pt(a,a===l?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),p=a.callbackNode,u===0||a===l&&($t===2||$t===9)||a.cancelPendingCommit!==null)return p!==null&&p!==null&&Qe(p),a.callbackNode=null,a.callbackPriority=0;if((u&3)===0||Bt(a,u)){if(l=u&-u,l===a.callbackPriority)return l;switch(p!==null&&Qe(p),i1(u)){case 2:case 8:u=we;break;case 32:u=qe;break;case 268435456:u=ct;break;default:u=qe}return p=K4.bind(null,a),u=ys(u,p),a.callbackPriority=l,a.callbackNode=u,l}return p!==null&&p!==null&&Qe(p),a.callbackPriority=2,a.callbackNode=null,2}function K4(a,l){if(Tn!==0&&Tn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var u=a.callbackNode;if(Xp()&&a.callbackNode!==u)return null;var p=Ct;return p=pt(a,a===Kt?p:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),p===0?null:(A4(a,p,l),q4(a,_t()),a.callbackNode!=null&&a.callbackNode===u?K4.bind(null,a):null)}function W4(a,l){if(Xp())return null;A4(a,l,!0)}function ZL(){hI(function(){(Dt&6)!==0?ys(fe,QL):F4()})}function qb(){if(La===0){var a=Yl;a===0&&(a=Re,Re<<=1,(Re&261888)===0&&(Re=256)),La=a}return La}function G4(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:ap(""+a)}function Y4(a,l){var u=l.ownerDocument.createElement("input");return u.name=l.name,u.value=l.value,a.id&&u.setAttribute("form",a.id),l.parentNode.insertBefore(u,l),a=new FormData(a),u.parentNode.removeChild(u),a}function eI(a,l,u,p,v){if(l==="submit"&&u&&u.stateNode===v){var _=G4((v[Rs]||null).action),A=p.submitter;A&&(l=(l=A[Rs]||null)?G4(l.formAction):A.getAttribute("formAction"),l!==null&&(_=l,A=null));var $=new up("action","action",null,p,v);a.push({event:$,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(La!==0){var Q=A?Y4(v,A):new FormData(v);hb(u,{pending:!0,data:Q,method:v.method,action:_},null,Q)}}else typeof _=="function"&&($.preventDefault(),Q=A?Y4(v,A):new FormData(v),hb(u,{pending:!0,data:Q,method:v.method,action:_},_,Q))},currentTarget:v}]})}}for(var Kb=0;Kb<E1.length;Kb++){var Wb=E1[Kb],tI=Wb.toLowerCase(),nI=Wb[0].toUpperCase()+Wb.slice(1);zr(tI,"on"+nI)}zr(NC,"onAnimationEnd"),zr(AC,"onAnimationIteration"),zr(EC,"onAnimationStart"),zr("dblclick","onDoubleClick"),zr("focusin","onFocus"),zr("focusout","onBlur"),zr(bL,"onTransitionRun"),zr(vL,"onTransitionStart"),zr(xL,"onTransitionCancel"),zr(jC,"onTransitionEnd"),Dl("onMouseEnter",["mouseout","mouseover"]),Dl("onMouseLeave",["mouseout","mouseover"]),Dl("onPointerEnter",["pointerout","pointerover"]),Dl("onPointerLeave",["pointerout","pointerover"]),bo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bo("onBeforeInput",["compositionend","keypress","textInput","paste"]),bo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bh));function X4(a,l){l=(l&4)!==0;for(var u=0;u<a.length;u++){var p=a[u],v=p.event;p=p.listeners;e:{var _=void 0;if(l)for(var A=p.length-1;0<=A;A--){var $=p[A],Q=$.instance,oe=$.currentTarget;if($=$.listener,Q!==_&&v.isPropagationStopped())break e;_=$,v.currentTarget=oe;try{_(v)}catch(ge){fp(ge)}v.currentTarget=null,_=Q}else for(A=0;A<p.length;A++){if($=p[A],Q=$.instance,oe=$.currentTarget,$=$.listener,Q!==_&&v.isPropagationStopped())break e;_=$,v.currentTarget=oe;try{_(v)}catch(ge){fp(ge)}v.currentTarget=null,_=Q}}}}function St(a,l){var u=l[a1];u===void 0&&(u=l[a1]=new Set);var p=a+"__bubble";u.has(p)||(J4(l,a,2,!1),u.add(p))}function Gb(a,l,u){var p=0;l&&(p|=4),J4(u,a,p,l)}var Zp="_reactListening"+Math.random().toString(36).slice(2);function Yb(a){if(!a[Zp]){a[Zp]=!0,Fk.forEach(function(u){u!=="selectionchange"&&(sI.has(u)||Gb(u,!1,a),Gb(u,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[Zp]||(l[Zp]=!0,Gb("selectionchange",!1,l))}}function J4(a,l,u,p){switch(NA(l)){case 2:var v=RI;break;case 8:v=OI;break;default:v=uv}u=v.bind(null,l,u,a),v=void 0,!m1||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(v=!0),p?v!==void 0?a.addEventListener(l,u,{capture:!0,passive:v}):a.addEventListener(l,u,!0):v!==void 0?a.addEventListener(l,u,{passive:v}):a.addEventListener(l,u,!1)}function Xb(a,l,u,p,v){var _=p;if((l&1)===0&&(l&2)===0&&p!==null)e:for(;;){if(p===null)return;var A=p.tag;if(A===3||A===4){var $=p.stateNode.containerInfo;if($===v)break;if(A===4)for(A=p.return;A!==null;){var Q=A.tag;if((Q===3||Q===4)&&A.stateNode.containerInfo===v)return;A=A.return}for(;$!==null;){if(A=Ol($),A===null)return;if(Q=A.tag,Q===5||Q===6||Q===26||Q===27){p=_=A;continue e}$=$.parentNode}}p=p.return}nC(function(){var oe=_,ge=f1(u),be=[];e:{var ue=TC.get(a);if(ue!==void 0){var de=up,Ve=a;switch(a){case"keypress":if(lp(u)===0)break e;case"keydown":case"keyup":de=X8;break;case"focusin":Ve="focus",de=v1;break;case"focusout":Ve="blur",de=v1;break;case"beforeblur":case"afterblur":de=v1;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=iC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=P8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=Z8;break;case NC:case AC:case EC:de=H8;break;case jC:de=tL;break;case"scroll":case"scrollend":de=L8;break;case"wheel":de=sL;break;case"copy":case"cut":case"paste":de=V8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=oC;break;case"toggle":case"beforetoggle":de=iL}var nt=(l&4)!==0,Vt=!nt&&(a==="scroll"||a==="scrollend"),re=nt?ue!==null?ue+"Capture":null:ue;nt=[];for(var ee=oe,ae;ee!==null;){var ye=ee;if(ae=ye.stateNode,ye=ye.tag,ye!==5&&ye!==26&&ye!==27||ae===null||re===null||(ye=zu(ee,re),ye!=null&&nt.push(vh(ee,ye,ae))),Vt)break;ee=ee.return}0<nt.length&&(ue=new de(ue,Ve,null,u,ge),be.push({event:ue,listeners:nt}))}}if((l&7)===0){e:{if(ue=a==="mouseover"||a==="pointerover",de=a==="mouseout"||a==="pointerout",ue&&u!==d1&&(Ve=u.relatedTarget||u.fromElement)&&(Ol(Ve)||Ve[Rl]))break e;if((de||ue)&&(ue=ge.window===ge?ge:(ue=ge.ownerDocument)?ue.defaultView||ue.parentWindow:window,de?(Ve=u.relatedTarget||u.toElement,de=oe,Ve=Ve?Ol(Ve):null,Ve!==null&&(Vt=i(Ve),nt=Ve.tag,Ve!==Vt||nt!==5&&nt!==27&&nt!==6)&&(Ve=null)):(de=null,Ve=oe),de!==Ve)){if(nt=iC,ye="onMouseLeave",re="onMouseEnter",ee="mouse",(a==="pointerout"||a==="pointerover")&&(nt=oC,ye="onPointerLeave",re="onPointerEnter",ee="pointer"),Vt=de==null?ue:$u(de),ae=Ve==null?ue:$u(Ve),ue=new nt(ye,ee+"leave",de,u,ge),ue.target=Vt,ue.relatedTarget=ae,ye=null,Ol(ge)===oe&&(nt=new nt(re,ee+"enter",Ve,u,ge),nt.target=ae,nt.relatedTarget=Vt,ye=nt),Vt=ye,de&&Ve)t:{for(nt=rI,re=de,ee=Ve,ae=0,ye=re;ye;ye=nt(ye))ae++;ye=0;for(var Ye=ee;Ye;Ye=nt(Ye))ye++;for(;0<ae-ye;)re=nt(re),ae--;for(;0<ye-ae;)ee=nt(ee),ye--;for(;ae--;){if(re===ee||ee!==null&&re===ee.alternate){nt=re;break t}re=nt(re),ee=nt(ee)}nt=null}else nt=null;de!==null&&Q4(be,ue,de,nt,!1),Ve!==null&&Vt!==null&&Q4(be,Vt,Ve,nt,!0)}}e:{if(ue=oe?$u(oe):window,de=ue.nodeName&&ue.nodeName.toLowerCase(),de==="select"||de==="input"&&ue.type==="file")var Tt=mC;else if(fC(ue))if(gC)Tt=mL;else{Tt=fL;var We=dL}else de=ue.nodeName,!de||de.toLowerCase()!=="input"||ue.type!=="checkbox"&&ue.type!=="radio"?oe&&h1(oe.elementType)&&(Tt=mC):Tt=pL;if(Tt&&(Tt=Tt(a,oe))){pC(be,Tt,u,ge);break e}We&&We(a,ue,oe),a==="focusout"&&oe&&ue.type==="number"&&oe.memoizedProps.value!=null&&u1(ue,"number",ue.value)}switch(We=oe?$u(oe):window,a){case"focusin":(fC(We)||We.contentEditable==="true")&&(Hl=We,C1=oe,Gu=null);break;case"focusout":Gu=C1=Hl=null;break;case"mousedown":N1=!0;break;case"contextmenu":case"mouseup":case"dragend":N1=!1,kC(be,u,ge);break;case"selectionchange":if(yL)break;case"keydown":case"keyup":kC(be,u,ge)}var mt;if(_1)e:{switch(a){case"compositionstart":var Nt="onCompositionStart";break e;case"compositionend":Nt="onCompositionEnd";break e;case"compositionupdate":Nt="onCompositionUpdate";break e}Nt=void 0}else zl?hC(a,u)&&(Nt="onCompositionEnd"):a==="keydown"&&u.keyCode===229&&(Nt="onCompositionStart");Nt&&(lC&&u.locale!=="ko"&&(zl||Nt!=="onCompositionStart"?Nt==="onCompositionEnd"&&zl&&(mt=sC()):(xa=ge,g1="value"in xa?xa.value:xa.textContent,zl=!0)),We=em(oe,Nt),0<We.length&&(Nt=new aC(Nt,a,null,u,ge),be.push({event:Nt,listeners:We}),mt?Nt.data=mt:(mt=dC(u),mt!==null&&(Nt.data=mt)))),(mt=oL?lL(a,u):cL(a,u))&&(Nt=em(oe,"onBeforeInput"),0<Nt.length&&(We=new aC("onBeforeInput","beforeinput",null,u,ge),be.push({event:We,listeners:Nt}),We.data=mt)),eI(be,a,oe,u,ge)}X4(be,l)})}function vh(a,l,u){return{instance:a,listener:l,currentTarget:u}}function em(a,l){for(var u=l+"Capture",p=[];a!==null;){var v=a,_=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||_===null||(v=zu(a,u),v!=null&&p.unshift(vh(a,v,_)),v=zu(a,l),v!=null&&p.push(vh(a,v,_))),a.tag===3)return p;a=a.return}return[]}function rI(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function Q4(a,l,u,p,v){for(var _=l._reactName,A=[];u!==null&&u!==p;){var $=u,Q=$.alternate,oe=$.stateNode;if($=$.tag,Q!==null&&Q===p)break;$!==5&&$!==26&&$!==27||oe===null||(Q=oe,v?(oe=zu(u,_),oe!=null&&A.unshift(vh(u,oe,Q))):v||(oe=zu(u,_),oe!=null&&A.push(vh(u,oe,Q)))),u=u.return}A.length!==0&&a.push({event:l,listeners:A})}var iI=/\r\n?/g,aI=/\u0000|\uFFFD/g;function Z4(a){return(typeof a=="string"?a:""+a).replace(iI,`
`).replace(aI,"")}function eA(a,l){return l=Z4(l),Z4(a)===l}function Ut(a,l,u,p,v,_){switch(u){case"children":typeof p=="string"?l==="body"||l==="textarea"&&p===""||Il(a,p):(typeof p=="number"||typeof p=="bigint")&&l!=="body"&&Il(a,""+p);break;case"className":rp(a,"class",p);break;case"tabIndex":rp(a,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":rp(a,u,p);break;case"style":eC(a,p,_);break;case"data":if(l!=="object"){rp(a,"data",p);break}case"src":case"href":if(p===""&&(l!=="a"||u!=="href")){a.removeAttribute(u);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){a.removeAttribute(u);break}p=ap(""+p),a.setAttribute(u,p);break;case"action":case"formAction":if(typeof p=="function"){a.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(u==="formAction"?(l!=="input"&&Ut(a,l,"name",v.name,v,null),Ut(a,l,"formEncType",v.formEncType,v,null),Ut(a,l,"formMethod",v.formMethod,v,null),Ut(a,l,"formTarget",v.formTarget,v,null)):(Ut(a,l,"encType",v.encType,v,null),Ut(a,l,"method",v.method,v,null),Ut(a,l,"target",v.target,v,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){a.removeAttribute(u);break}p=ap(""+p),a.setAttribute(u,p);break;case"onClick":p!=null&&(a.onclick=Ti);break;case"onScroll":p!=null&&St("scroll",a);break;case"onScrollEnd":p!=null&&St("scrollend",a);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(s(61));if(u=p.__html,u!=null){if(v.children!=null)throw Error(s(60));a.innerHTML=u}}break;case"multiple":a.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":a.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){a.removeAttribute("xlink:href");break}u=ap(""+p),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(u,""+p):a.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(u,""):a.removeAttribute(u);break;case"capture":case"download":p===!0?a.setAttribute(u,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(u,p):a.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?a.setAttribute(u,p):a.removeAttribute(u);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?a.removeAttribute(u):a.setAttribute(u,p);break;case"popover":St("beforetoggle",a),St("toggle",a),sp(a,"popover",p);break;case"xlinkActuate":ji(a,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":ji(a,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":ji(a,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":ji(a,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":ji(a,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":ji(a,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":ji(a,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":ji(a,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":ji(a,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":sp(a,"is",p);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=B8.get(u)||u,sp(a,u,p))}}function Jb(a,l,u,p,v,_){switch(u){case"style":eC(a,p,_);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(s(61));if(u=p.__html,u!=null){if(v.children!=null)throw Error(s(60));a.innerHTML=u}}break;case"children":typeof p=="string"?Il(a,p):(typeof p=="number"||typeof p=="bigint")&&Il(a,""+p);break;case"onScroll":p!=null&&St("scroll",a);break;case"onScrollEnd":p!=null&&St("scrollend",a);break;case"onClick":p!=null&&(a.onclick=Ti);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qk.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(v=u.endsWith("Capture"),l=u.slice(2,v?u.length-7:void 0),_=a[Rs]||null,_=_!=null?_[u]:null,typeof _=="function"&&a.removeEventListener(l,_,v),typeof p=="function")){typeof _!="function"&&_!==null&&(u in a?a[u]=null:a.hasAttribute(u)&&a.removeAttribute(u)),a.addEventListener(l,p,v);break e}u in a?a[u]=p:p===!0?a.setAttribute(u,""):sp(a,u,p)}}}function Qn(a,l,u){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":St("error",a),St("load",a);var p=!1,v=!1,_;for(_ in u)if(u.hasOwnProperty(_)){var A=u[_];if(A!=null)switch(_){case"src":p=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,l));default:Ut(a,l,_,A,u,null)}}v&&Ut(a,l,"srcSet",u.srcSet,u,null),p&&Ut(a,l,"src",u.src,u,null);return;case"input":St("invalid",a);var $=_=A=v=null,Q=null,oe=null;for(p in u)if(u.hasOwnProperty(p)){var ge=u[p];if(ge!=null)switch(p){case"name":v=ge;break;case"type":A=ge;break;case"checked":Q=ge;break;case"defaultChecked":oe=ge;break;case"value":_=ge;break;case"defaultValue":$=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(s(137,l));break;default:Ut(a,l,p,ge,u,null)}}Xk(a,_,$,Q,oe,A,v,!1);return;case"select":St("invalid",a),p=A=_=null;for(v in u)if(u.hasOwnProperty(v)&&($=u[v],$!=null))switch(v){case"value":_=$;break;case"defaultValue":A=$;break;case"multiple":p=$;default:Ut(a,l,v,$,u,null)}l=_,u=A,a.multiple=!!p,l!=null?Ll(a,!!p,l,!1):u!=null&&Ll(a,!!p,u,!0);return;case"textarea":St("invalid",a),_=v=p=null;for(A in u)if(u.hasOwnProperty(A)&&($=u[A],$!=null))switch(A){case"value":p=$;break;case"defaultValue":v=$;break;case"children":_=$;break;case"dangerouslySetInnerHTML":if($!=null)throw Error(s(91));break;default:Ut(a,l,A,$,u,null)}Qk(a,p,v,_);return;case"option":for(Q in u)u.hasOwnProperty(Q)&&(p=u[Q],p!=null)&&(Q==="selected"?a.selected=p&&typeof p!="function"&&typeof p!="symbol":Ut(a,l,Q,p,u,null));return;case"dialog":St("beforetoggle",a),St("toggle",a),St("cancel",a),St("close",a);break;case"iframe":case"object":St("load",a);break;case"video":case"audio":for(p=0;p<bh.length;p++)St(bh[p],a);break;case"image":St("error",a),St("load",a);break;case"details":St("toggle",a);break;case"embed":case"source":case"link":St("error",a),St("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in u)if(u.hasOwnProperty(oe)&&(p=u[oe],p!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,l));default:Ut(a,l,oe,p,u,null)}return;default:if(h1(l)){for(ge in u)u.hasOwnProperty(ge)&&(p=u[ge],p!==void 0&&Jb(a,l,ge,p,u,void 0));return}}for($ in u)u.hasOwnProperty($)&&(p=u[$],p!=null&&Ut(a,l,$,p,u,null))}function oI(a,l,u,p){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,_=null,A=null,$=null,Q=null,oe=null,ge=null;for(de in u){var be=u[de];if(u.hasOwnProperty(de)&&be!=null)switch(de){case"checked":break;case"value":break;case"defaultValue":Q=be;default:p.hasOwnProperty(de)||Ut(a,l,de,null,p,be)}}for(var ue in p){var de=p[ue];if(be=u[ue],p.hasOwnProperty(ue)&&(de!=null||be!=null))switch(ue){case"type":_=de;break;case"name":v=de;break;case"checked":oe=de;break;case"defaultChecked":ge=de;break;case"value":A=de;break;case"defaultValue":$=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(s(137,l));break;default:de!==be&&Ut(a,l,ue,de,p,be)}}c1(a,A,$,Q,oe,ge,_,v);return;case"select":de=A=$=ue=null;for(_ in u)if(Q=u[_],u.hasOwnProperty(_)&&Q!=null)switch(_){case"value":break;case"multiple":de=Q;default:p.hasOwnProperty(_)||Ut(a,l,_,null,p,Q)}for(v in p)if(_=p[v],Q=u[v],p.hasOwnProperty(v)&&(_!=null||Q!=null))switch(v){case"value":ue=_;break;case"defaultValue":$=_;break;case"multiple":A=_;default:_!==Q&&Ut(a,l,v,_,p,Q)}l=$,u=A,p=de,ue!=null?Ll(a,!!u,ue,!1):!!p!=!!u&&(l!=null?Ll(a,!!u,l,!0):Ll(a,!!u,u?[]:"",!1));return;case"textarea":de=ue=null;for($ in u)if(v=u[$],u.hasOwnProperty($)&&v!=null&&!p.hasOwnProperty($))switch($){case"value":break;case"children":break;default:Ut(a,l,$,null,p,v)}for(A in p)if(v=p[A],_=u[A],p.hasOwnProperty(A)&&(v!=null||_!=null))switch(A){case"value":ue=v;break;case"defaultValue":de=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(s(91));break;default:v!==_&&Ut(a,l,A,v,p,_)}Jk(a,ue,de);return;case"option":for(var Ve in u)ue=u[Ve],u.hasOwnProperty(Ve)&&ue!=null&&!p.hasOwnProperty(Ve)&&(Ve==="selected"?a.selected=!1:Ut(a,l,Ve,null,p,ue));for(Q in p)ue=p[Q],de=u[Q],p.hasOwnProperty(Q)&&ue!==de&&(ue!=null||de!=null)&&(Q==="selected"?a.selected=ue&&typeof ue!="function"&&typeof ue!="symbol":Ut(a,l,Q,ue,p,de));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in u)ue=u[nt],u.hasOwnProperty(nt)&&ue!=null&&!p.hasOwnProperty(nt)&&Ut(a,l,nt,null,p,ue);for(oe in p)if(ue=p[oe],de=u[oe],p.hasOwnProperty(oe)&&ue!==de&&(ue!=null||de!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(s(137,l));break;default:Ut(a,l,oe,ue,p,de)}return;default:if(h1(l)){for(var Vt in u)ue=u[Vt],u.hasOwnProperty(Vt)&&ue!==void 0&&!p.hasOwnProperty(Vt)&&Jb(a,l,Vt,void 0,p,ue);for(ge in p)ue=p[ge],de=u[ge],!p.hasOwnProperty(ge)||ue===de||ue===void 0&&de===void 0||Jb(a,l,ge,ue,p,de);return}}for(var re in u)ue=u[re],u.hasOwnProperty(re)&&ue!=null&&!p.hasOwnProperty(re)&&Ut(a,l,re,null,p,ue);for(be in p)ue=p[be],de=u[be],!p.hasOwnProperty(be)||ue===de||ue==null&&de==null||Ut(a,l,be,ue,p,de)}function tA(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function lI(){if(typeof performance.getEntriesByType=="function"){for(var a=0,l=0,u=performance.getEntriesByType("resource"),p=0;p<u.length;p++){var v=u[p],_=v.transferSize,A=v.initiatorType,$=v.duration;if(_&&$&&tA(A)){for(A=0,$=v.responseEnd,p+=1;p<u.length;p++){var Q=u[p],oe=Q.startTime;if(oe>$)break;var ge=Q.transferSize,be=Q.initiatorType;ge&&tA(be)&&(Q=Q.responseEnd,A+=ge*(Q<$?1:($-oe)/(Q-oe)))}if(--p,l+=8*(_+A)/(v.duration/1e3),a++,10<a)break}}if(0<a)return l/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var Qb=null,Zb=null;function tm(a){return a.nodeType===9?a:a.ownerDocument}function nA(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sA(a,l){if(a===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&l==="foreignObject"?0:a}function ev(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var tv=null;function cI(){var a=window.event;return a&&a.type==="popstate"?a===tv?!1:(tv=a,!0):(tv=null,!1)}var rA=typeof setTimeout=="function"?setTimeout:void 0,uI=typeof clearTimeout=="function"?clearTimeout:void 0,iA=typeof Promise=="function"?Promise:void 0,hI=typeof queueMicrotask=="function"?queueMicrotask:typeof iA<"u"?function(a){return iA.resolve(null).then(a).catch(dI)}:rA;function dI(a){setTimeout(function(){throw a})}function Ia(a){return a==="head"}function aA(a,l){var u=l,p=0;do{var v=u.nextSibling;if(a.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"||u==="/&"){if(p===0){a.removeChild(v),pc(l);return}p--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")p++;else if(u==="html")xh(a.ownerDocument.documentElement);else if(u==="head"){u=a.ownerDocument.head,xh(u);for(var _=u.firstChild;_;){var A=_.nextSibling,$=_.nodeName;_[Pu]||$==="SCRIPT"||$==="STYLE"||$==="LINK"&&_.rel.toLowerCase()==="stylesheet"||u.removeChild(_),_=A}}else u==="body"&&xh(a.ownerDocument.body);u=v}while(u);pc(l)}function oA(a,l){var u=a;a=0;do{var p=u.nextSibling;if(u.nodeType===1?l?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(l?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),p&&p.nodeType===8)if(u=p.data,u==="/$"){if(a===0)break;a--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||a++;u=p}while(u)}function nv(a){var l=a.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var u=l;switch(l=l.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":nv(u),o1(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}a.removeChild(u)}}function fI(a,l,u,p){for(;a.nodeType===1;){var v=u;if(a.nodeName.toLowerCase()!==l.toLowerCase()){if(!p&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(p){if(!a[Pu])switch(l){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(_=a.getAttribute("rel"),_==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(_!==v.rel||a.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||a.getAttribute("title")!==(v.title==null?null:v.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(_=a.getAttribute("src"),(_!==(v.src==null?null:v.src)||a.getAttribute("type")!==(v.type==null?null:v.type)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&_&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(l==="input"&&a.type==="hidden"){var _=v.name==null?null:""+v.name;if(v.type==="hidden"&&a.getAttribute("name")===_)return a}else return a;if(a=Sr(a.nextSibling),a===null)break}return null}function pI(a,l,u){if(l==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!u||(a=Sr(a.nextSibling),a===null))return null;return a}function lA(a,l){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!l||(a=Sr(a.nextSibling),a===null))return null;return a}function sv(a){return a.data==="$?"||a.data==="$~"}function rv(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function mI(a,l){var u=a.ownerDocument;if(a.data==="$~")a._reactRetry=l;else if(a.data!=="$?"||u.readyState!=="loading")l();else{var p=function(){l(),u.removeEventListener("DOMContentLoaded",p)};u.addEventListener("DOMContentLoaded",p),a._reactRetry=p}}function Sr(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return a}var iv=null;function cA(a){a=a.nextSibling;for(var l=0;a;){if(a.nodeType===8){var u=a.data;if(u==="/$"||u==="/&"){if(l===0)return Sr(a.nextSibling);l--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||l++}a=a.nextSibling}return null}function uA(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var u=a.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(l===0)return a;l--}else u!=="/$"&&u!=="/&"||l++}a=a.previousSibling}return null}function hA(a,l,u){switch(l=tm(u),a){case"html":if(a=l.documentElement,!a)throw Error(s(452));return a;case"head":if(a=l.head,!a)throw Error(s(453));return a;case"body":if(a=l.body,!a)throw Error(s(454));return a;default:throw Error(s(451))}}function xh(a){for(var l=a.attributes;l.length;)a.removeAttributeNode(l[0]);o1(a)}var kr=new Map,dA=new Set;function nm(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Ki=J.d;J.d={f:gI,r:yI,D:bI,C:vI,L:xI,m:_I,X:SI,S:wI,M:kI};function gI(){var a=Ki.f(),l=Wp();return a||l}function yI(a){var l=Ml(a);l!==null&&l.tag===5&&l.type==="form"?jN(l):Ki.r(a)}var hc=typeof document>"u"?null:document;function fA(a,l,u){var p=hc;if(p&&typeof l=="string"&&l){var v=gr(l);v='link[rel="'+a+'"][href="'+v+'"]',typeof u=="string"&&(v+='[crossorigin="'+u+'"]'),dA.has(v)||(dA.add(v),a={rel:a,crossOrigin:u,href:l},p.querySelector(v)===null&&(l=p.createElement("link"),Qn(l,"link",a),$n(l),p.head.appendChild(l)))}}function bI(a){Ki.D(a),fA("dns-prefetch",a,null)}function vI(a,l){Ki.C(a,l),fA("preconnect",a,l)}function xI(a,l,u){Ki.L(a,l,u);var p=hc;if(p&&a&&l){var v='link[rel="preload"][as="'+gr(l)+'"]';l==="image"&&u&&u.imageSrcSet?(v+='[imagesrcset="'+gr(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(v+='[imagesizes="'+gr(u.imageSizes)+'"]')):v+='[href="'+gr(a)+'"]';var _=v;switch(l){case"style":_=dc(a);break;case"script":_=fc(a)}kr.has(_)||(a=m({rel:"preload",href:l==="image"&&u&&u.imageSrcSet?void 0:a,as:l},u),kr.set(_,a),p.querySelector(v)!==null||l==="style"&&p.querySelector(_h(_))||l==="script"&&p.querySelector(wh(_))||(l=p.createElement("link"),Qn(l,"link",a),$n(l),p.head.appendChild(l)))}}function _I(a,l){Ki.m(a,l);var u=hc;if(u&&a){var p=l&&typeof l.as=="string"?l.as:"script",v='link[rel="modulepreload"][as="'+gr(p)+'"][href="'+gr(a)+'"]',_=v;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=fc(a)}if(!kr.has(_)&&(a=m({rel:"modulepreload",href:a},l),kr.set(_,a),u.querySelector(v)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(wh(_)))return}p=u.createElement("link"),Qn(p,"link",a),$n(p),u.head.appendChild(p)}}}function wI(a,l,u){Ki.S(a,l,u);var p=hc;if(p&&a){var v=Bl(p).hoistableStyles,_=dc(a);l=l||"default";var A=v.get(_);if(!A){var $={loading:0,preload:null};if(A=p.querySelector(_h(_)))$.loading=5;else{a=m({rel:"stylesheet",href:a,"data-precedence":l},u),(u=kr.get(_))&&av(a,u);var Q=A=p.createElement("link");$n(Q),Qn(Q,"link",a),Q._p=new Promise(function(oe,ge){Q.onload=oe,Q.onerror=ge}),Q.addEventListener("load",function(){$.loading|=1}),Q.addEventListener("error",function(){$.loading|=2}),$.loading|=4,sm(A,l,p)}A={type:"stylesheet",instance:A,count:1,state:$},v.set(_,A)}}}function SI(a,l){Ki.X(a,l);var u=hc;if(u&&a){var p=Bl(u).hoistableScripts,v=fc(a),_=p.get(v);_||(_=u.querySelector(wh(v)),_||(a=m({src:a,async:!0},l),(l=kr.get(v))&&ov(a,l),_=u.createElement("script"),$n(_),Qn(_,"link",a),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},p.set(v,_))}}function kI(a,l){Ki.M(a,l);var u=hc;if(u&&a){var p=Bl(u).hoistableScripts,v=fc(a),_=p.get(v);_||(_=u.querySelector(wh(v)),_||(a=m({src:a,async:!0,type:"module"},l),(l=kr.get(v))&&ov(a,l),_=u.createElement("script"),$n(_),Qn(_,"link",a),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},p.set(v,_))}}function pA(a,l,u,p){var v=(v=te.current)?nm(v):null;if(!v)throw Error(s(446));switch(a){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(l=dc(u.href),u=Bl(v).hoistableStyles,p=u.get(l),p||(p={type:"style",instance:null,count:0,state:null},u.set(l,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){a=dc(u.href);var _=Bl(v).hoistableStyles,A=_.get(a);if(A||(v=v.ownerDocument||v,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(a,A),(_=v.querySelector(_h(a)))&&!_._p&&(A.instance=_,A.state.loading=5),kr.has(a)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},kr.set(a,u),_||CI(v,a,u,A.state))),l&&p===null)throw Error(s(528,""));return A}if(l&&p!==null)throw Error(s(529,""));return null;case"script":return l=u.async,u=u.src,typeof u=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=fc(u),u=Bl(v).hoistableScripts,p=u.get(l),p||(p={type:"script",instance:null,count:0,state:null},u.set(l,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,a))}}function dc(a){return'href="'+gr(a)+'"'}function _h(a){return'link[rel="stylesheet"]['+a+"]"}function mA(a){return m({},a,{"data-precedence":a.precedence,precedence:null})}function CI(a,l,u,p){a.querySelector('link[rel="preload"][as="style"]['+l+"]")?p.loading=1:(l=a.createElement("link"),p.preload=l,l.addEventListener("load",function(){return p.loading|=1}),l.addEventListener("error",function(){return p.loading|=2}),Qn(l,"link",u),$n(l),a.head.appendChild(l))}function fc(a){return'[src="'+gr(a)+'"]'}function wh(a){return"script[async]"+a}function gA(a,l,u){if(l.count++,l.instance===null)switch(l.type){case"style":var p=a.querySelector('style[data-href~="'+gr(u.href)+'"]');if(p)return l.instance=p,$n(p),p;var v=m({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return p=(a.ownerDocument||a).createElement("style"),$n(p),Qn(p,"style",v),sm(p,u.precedence,a),l.instance=p;case"stylesheet":v=dc(u.href);var _=a.querySelector(_h(v));if(_)return l.state.loading|=4,l.instance=_,$n(_),_;p=mA(u),(v=kr.get(v))&&av(p,v),_=(a.ownerDocument||a).createElement("link"),$n(_);var A=_;return A._p=new Promise(function($,Q){A.onload=$,A.onerror=Q}),Qn(_,"link",p),l.state.loading|=4,sm(_,u.precedence,a),l.instance=_;case"script":return _=fc(u.src),(v=a.querySelector(wh(_)))?(l.instance=v,$n(v),v):(p=u,(v=kr.get(_))&&(p=m({},u),ov(p,v)),a=a.ownerDocument||a,v=a.createElement("script"),$n(v),Qn(v,"link",p),a.head.appendChild(v),l.instance=v);case"void":return null;default:throw Error(s(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(p=l.instance,l.state.loading|=4,sm(p,u.precedence,a));return l.instance}function sm(a,l,u){for(var p=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=p.length?p[p.length-1]:null,_=v,A=0;A<p.length;A++){var $=p[A];if($.dataset.precedence===l)_=$;else if(_!==v)break}_?_.parentNode.insertBefore(a,_.nextSibling):(l=u.nodeType===9?u.head:u,l.insertBefore(a,l.firstChild))}function av(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.title==null&&(a.title=l.title)}function ov(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.integrity==null&&(a.integrity=l.integrity)}var rm=null;function yA(a,l,u){if(rm===null){var p=new Map,v=rm=new Map;v.set(u,p)}else v=rm,p=v.get(u),p||(p=new Map,v.set(u,p));if(p.has(a))return p;for(p.set(a,null),u=u.getElementsByTagName(a),v=0;v<u.length;v++){var _=u[v];if(!(_[Pu]||_[Gn]||a==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(l)||"";A=a+A;var $=p.get(A);$?$.push(_):p.set(A,[_])}}return p}function bA(a,l,u){a=a.ownerDocument||a,a.head.insertBefore(u,l==="title"?a.querySelector("head > title"):null)}function NI(a,l,u){if(u===1||l.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;return l.rel==="stylesheet"?(a=l.disabled,typeof l.precedence=="string"&&a==null):!0;case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function vA(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function AI(a,l,u,p){if(u.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var v=dc(p.href),_=l.querySelector(_h(v));if(_){l=_._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(a.count++,a=im.bind(a),l.then(a,a)),u.state.loading|=4,u.instance=_,$n(_);return}_=l.ownerDocument||l,p=mA(p),(v=kr.get(v))&&av(p,v),_=_.createElement("link"),$n(_);var A=_;A._p=new Promise(function($,Q){A.onload=$,A.onerror=Q}),Qn(_,"link",p),u.instance=_}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(u,l),(l=u.state.preload)&&(u.state.loading&3)===0&&(a.count++,u=im.bind(a),l.addEventListener("load",u),l.addEventListener("error",u))}}var lv=0;function EI(a,l){return a.stylesheets&&a.count===0&&om(a,a.stylesheets),0<a.count||0<a.imgCount?function(u){var p=setTimeout(function(){if(a.stylesheets&&om(a,a.stylesheets),a.unsuspend){var _=a.unsuspend;a.unsuspend=null,_()}},6e4+l);0<a.imgBytes&&lv===0&&(lv=62500*lI());var v=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&om(a,a.stylesheets),a.unsuspend)){var _=a.unsuspend;a.unsuspend=null,_()}},(a.imgBytes>lv?50:800)+l);return a.unsuspend=u,function(){a.unsuspend=null,clearTimeout(p),clearTimeout(v)}}:null}function im(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)om(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var am=null;function om(a,l){a.stylesheets=null,a.unsuspend!==null&&(a.count++,am=new Map,l.forEach(jI,a),am=null,im.call(a))}function jI(a,l){if(!(l.state.loading&4)){var u=am.get(a);if(u)var p=u.get(null);else{u=new Map,am.set(a,u);for(var v=a.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<v.length;_++){var A=v[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(u.set(A.dataset.precedence,A),p=A)}p&&u.set(null,p)}v=l.instance,A=v.getAttribute("data-precedence"),_=u.get(A)||p,_===p&&u.set(null,v),u.set(A,v),this.count++,p=im.bind(this),v.addEventListener("load",p),v.addEventListener("error",p),_?_.parentNode.insertBefore(v,_.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(v,a.firstChild)),l.state.loading|=4}}var Sh={$$typeof:N,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function TI(a,l,u,p,v,_,A,$,Q){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Tl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tl(0),this.hiddenUpdates=Tl(null),this.identifierPrefix=p,this.onUncaughtError=v,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Q,this.incompleteTransitions=new Map}function xA(a,l,u,p,v,_,A,$,Q,oe,ge,be){return a=new TI(a,l,u,A,Q,oe,ge,be,$),l=1,_===!0&&(l|=24),_=Gs(3,null,null,l),a.current=_,_.stateNode=a,l=H1(),l.refCount++,a.pooledCache=l,l.refCount++,_.memoizedState={element:p,isDehydrated:u,cache:l},q1(_),a}function _A(a){return a?(a=Fl,a):Fl}function wA(a,l,u,p,v,_){v=_A(v),p.context===null?p.context=v:p.pendingContext=v,p=Na(l),p.payload={element:u},_=_===void 0?null:_,_!==null&&(p.callback=_),u=Aa(a,p,l),u!==null&&(Is(u,a,l),th(u,a,l))}function SA(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var u=a.retryLane;a.retryLane=u!==0&&u<l?u:l}}function cv(a,l){SA(a,l),(a=a.alternate)&&SA(a,l)}function kA(a){if(a.tag===13||a.tag===31){var l=wo(a,67108864);l!==null&&Is(l,a,67108864),cv(a,67108864)}}function CA(a){if(a.tag===13||a.tag===31){var l=Zs();l=r1(l);var u=wo(a,l);u!==null&&Is(u,a,l),cv(a,l)}}var lm=!0;function RI(a,l,u,p){var v=L.T;L.T=null;var _=J.p;try{J.p=2,uv(a,l,u,p)}finally{J.p=_,L.T=v}}function OI(a,l,u,p){var v=L.T;L.T=null;var _=J.p;try{J.p=8,uv(a,l,u,p)}finally{J.p=_,L.T=v}}function uv(a,l,u,p){if(lm){var v=hv(p);if(v===null)Xb(a,l,p,cm,u),AA(a,p);else if(BI(v,a,l,u,p))p.stopPropagation();else if(AA(a,p),l&4&&-1<MI.indexOf(a)){for(;v!==null;){var _=Ml(v);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=ze(_.pendingLanes);if(A!==0){var $=_;for($.pendingLanes|=2,$.entangledLanes|=2;A;){var Q=1<<31-me(A);$.entanglements[1]|=Q,A&=~Q}ai(_),(Dt&6)===0&&(qp=_t()+500,yh(0))}}break;case 31:case 13:$=wo(_,2),$!==null&&Is($,_,2),Wp(),cv(_,2)}if(_=hv(p),_===null&&Xb(a,l,p,cm,u),_===v)break;v=_}v!==null&&p.stopPropagation()}else Xb(a,l,p,null,u)}}function hv(a){return a=f1(a),dv(a)}var cm=null;function dv(a){if(cm=null,a=Ol(a),a!==null){var l=i(a);if(l===null)a=null;else{var u=l.tag;if(u===13){if(a=o(l),a!==null)return a;a=null}else if(u===31){if(a=c(l),a!==null)return a;a=null}else if(u===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null)}}return cm=a,null}function NA(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(cn()){case fe:return 2;case we:return 8;case qe:case Ze:return 32;case ct:return 268435456;default:return 32}default:return 32}}var fv=!1,Pa=null,$a=null,za=null,kh=new Map,Ch=new Map,Ha=[],MI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function AA(a,l){switch(a){case"focusin":case"focusout":Pa=null;break;case"dragenter":case"dragleave":$a=null;break;case"mouseover":case"mouseout":za=null;break;case"pointerover":case"pointerout":kh.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ch.delete(l.pointerId)}}function Nh(a,l,u,p,v,_){return a===null||a.nativeEvent!==_?(a={blockedOn:l,domEventName:u,eventSystemFlags:p,nativeEvent:_,targetContainers:[v]},l!==null&&(l=Ml(l),l!==null&&kA(l)),a):(a.eventSystemFlags|=p,l=a.targetContainers,v!==null&&l.indexOf(v)===-1&&l.push(v),a)}function BI(a,l,u,p,v){switch(l){case"focusin":return Pa=Nh(Pa,a,l,u,p,v),!0;case"dragenter":return $a=Nh($a,a,l,u,p,v),!0;case"mouseover":return za=Nh(za,a,l,u,p,v),!0;case"pointerover":var _=v.pointerId;return kh.set(_,Nh(kh.get(_)||null,a,l,u,p,v)),!0;case"gotpointercapture":return _=v.pointerId,Ch.set(_,Nh(Ch.get(_)||null,a,l,u,p,v)),!0}return!1}function EA(a){var l=Ol(a.target);if(l!==null){var u=i(l);if(u!==null){if(l=u.tag,l===13){if(l=o(u),l!==null){a.blockedOn=l,Uk(a.priority,function(){CA(u)});return}}else if(l===31){if(l=c(u),l!==null){a.blockedOn=l,Uk(a.priority,function(){CA(u)});return}}else if(l===3&&u.stateNode.current.memoizedState.isDehydrated){a.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}a.blockedOn=null}function um(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var u=hv(a.nativeEvent);if(u===null){u=a.nativeEvent;var p=new u.constructor(u.type,u);d1=p,u.target.dispatchEvent(p),d1=null}else return l=Ml(u),l!==null&&kA(l),a.blockedOn=u,!1;l.shift()}return!0}function jA(a,l,u){um(a)&&u.delete(l)}function DI(){fv=!1,Pa!==null&&um(Pa)&&(Pa=null),$a!==null&&um($a)&&($a=null),za!==null&&um(za)&&(za=null),kh.forEach(jA),Ch.forEach(jA)}function hm(a,l){a.blockedOn===l&&(a.blockedOn=null,fv||(fv=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,DI)))}var dm=null;function TA(a){dm!==a&&(dm=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){dm===a&&(dm=null);for(var l=0;l<a.length;l+=3){var u=a[l],p=a[l+1],v=a[l+2];if(typeof p!="function"){if(dv(p||u)===null)continue;break}var _=Ml(u);_!==null&&(a.splice(l,3),l-=3,hb(_,{pending:!0,data:v,method:u.method,action:p},p,v))}}))}function pc(a){function l(Q){return hm(Q,a)}Pa!==null&&hm(Pa,a),$a!==null&&hm($a,a),za!==null&&hm(za,a),kh.forEach(l),Ch.forEach(l);for(var u=0;u<Ha.length;u++){var p=Ha[u];p.blockedOn===a&&(p.blockedOn=null)}for(;0<Ha.length&&(u=Ha[0],u.blockedOn===null);)EA(u),u.blockedOn===null&&Ha.shift();if(u=(a.ownerDocument||a).$$reactFormReplay,u!=null)for(p=0;p<u.length;p+=3){var v=u[p],_=u[p+1],A=v[Rs]||null;if(typeof _=="function")A||TA(u);else if(A){var $=null;if(_&&_.hasAttribute("formAction")){if(v=_,A=_[Rs]||null)$=A.formAction;else if(dv(v)!==null)continue}else $=A.action;typeof $=="function"?u[p+1]=$:(u.splice(p,3),p-=3),TA(u)}}}function RA(){function a(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return v=A})},focusReset:"manual",scroll:"manual"})}function l(){v!==null&&(v(),v=null),p||setTimeout(u,20)}function u(){if(!p&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,v=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(u,100),function(){p=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),v!==null&&(v(),v=null)}}}function pv(a){this._internalRoot=a}fm.prototype.render=pv.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(s(409));var u=l.current,p=Zs();wA(u,p,a,l,null,null)},fm.prototype.unmount=pv.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;wA(a.current,2,null,a,null,null),Wp(),l[Rl]=null}};function fm(a){this._internalRoot=a}fm.prototype.unstable_scheduleHydration=function(a){if(a){var l=Hk();a={blockedOn:null,target:a,priority:l};for(var u=0;u<Ha.length&&l!==0&&l<Ha[u].priority;u++);Ha.splice(u,0,a),u===0&&EA(a)}};var OA=e.version;if(OA!=="19.2.3")throw Error(s(527,OA,"19.2.3"));J.findDOMNode=function(a){var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(s(188)):(a=Object.keys(a).join(","),Error(s(268,a)));return a=h(l),a=a!==null?g(a):null,a=a===null?null:a.stateNode,a};var LI={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pm.isDisabled&&pm.supportsFiber)try{ie=pm.inject(LI),he=pm}catch{}}return Eh.createRoot=function(a,l){if(!r(a))throw Error(s(299));var u=!1,p="",v=$N,_=zN,A=HN;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(_=l.onCaughtError),l.onRecoverableError!==void 0&&(A=l.onRecoverableError)),l=xA(a,1,!1,null,null,u,p,null,v,_,A,RA),a[Rl]=l.current,Yb(a),new pv(l)},Eh.hydrateRoot=function(a,l,u){if(!r(a))throw Error(s(299));var p=!1,v="",_=$N,A=zN,$=HN,Q=null;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(A=u.onCaughtError),u.onRecoverableError!==void 0&&($=u.onRecoverableError),u.formState!==void 0&&(Q=u.formState)),l=xA(a,1,!0,l,u??null,p,v,Q,_,A,$,RA),l.context=_A(null),u=l.current,p=Zs(),p=r1(p),v=Na(p),v.callback=null,Aa(u,v,p),u=p,l.current.lanes=u,yo(l,u),ai(l),a[Rl]=l.current,Yb(a),new fm(l)},Eh.version="19.2.3",Eh}var VA;function qI(){if(VA)return yv.exports;VA=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),yv.exports=FI(),yv.exports}var KI=qI(),_v={exports:{}},wv={};var FA;function WI(){if(FA)return wv;FA=1;var t=Eg().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return wv.c=function(e){return t.H.useMemoCache(e)},wv}var qA;function GI(){return qA||(qA=1,_v.exports=WI()),_v.exports}var Me=GI();const YI=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),XI=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),KA=t=>{const e=XI(t);return e.charAt(0).toUpperCase()+e.slice(1)},DT=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),JI=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var QI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ZI=F.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:o,...c},d)=>F.createElement("svg",{ref:d,...QI,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:DT("lucide",r),...!i&&!JI(c)&&{"aria-hidden":"true"},...c},[...o.map(([h,g])=>F.createElement(h,g)),...Array.isArray(i)?i:[i]]));const Te=(t,e)=>{const n=F.forwardRef(({className:s,...r},i)=>F.createElement(ZI,{ref:i,iconNode:e,className:DT(`lucide-${YI(KA(t))}`,`lucide-${t}`,s),...r}));return n.displayName=KA(t),n};const e7=[["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}],["path",{d:"M10 4v4",key:"pp8u80"}],["path",{d:"M2 8h20",key:"d11cs7"}],["path",{d:"M6 4v4",key:"1svtjw"}]],LT=Te("app-window",e7);const t7=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Qr=Te("box",t7);const n7=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],IT=Te("calendar",n7);const s7=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],bn=Te("check",s7);const r7=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],rs=Te("chevron-down",r7);const i7=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Or=Te("chevron-right",i7);const a7=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],o7=Te("chevron-up",a7);const l7=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],c7=Te("chevrons-up-down",l7);const u7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],fu=Te("circle-alert",u7);const h7=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],d7=Te("circle-check-big",h7);const f7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Zr=Te("circle-check",f7);const p7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],xf=Te("circle-question-mark",p7);const m7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ca=Te("circle-x",m7);const g7=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ua=Te("clock",g7);const y7=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],b7=Te("cloud",y7);const v7=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],x7=Te("columns-3",v7);const _7=[["path",{d:"M22 7.7c0-.6-.4-1.2-.8-1.5l-6.3-3.9a1.72 1.72 0 0 0-1.7 0l-10.3 6c-.5.2-.9.8-.9 1.4v6.6c0 .5.4 1.2.8 1.5l6.3 3.9a1.72 1.72 0 0 0 1.7 0l10.3-6c.5-.3.9-1 .9-1.5Z",key:"1t2lqe"}],["path",{d:"M10 21.9V14L2.1 9.1",key:"o7czzq"}],["path",{d:"m10 14 11.9-6.9",key:"zm5e20"}],["path",{d:"M14 19.8v-8.1",key:"159ecu"}],["path",{d:"M18 17.5V9.4",key:"11uown"}]],WA=Te("container",_7);const w7=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],hs=Te("copy",w7);const S7=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],jg=Te("cpu",S7);const k7=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],fo=Te("database",k7);const C7=[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]],N7=Te("diamond",C7);const A7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],SS=Te("disc",A7);const E7=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],kS=Te("external-link",E7);const j7=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],CS=Te("eye-off",j7);const T7=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],NS=Te("eye",T7);const R7=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],_0=Te("file-check",R7);const O7=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],M7=Te("file-down",O7);const B7=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],xi=Te("file-text",B7);const D7=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Tg=Te("folder-open",D7);const L7=[["path",{d:"M2 9.35V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h7",key:"y8kt7d"}],["path",{d:"m8 16 3-3-3-3",key:"rlqrt1"}]],I7=Te("folder-symlink",L7);const P7=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],$7=Te("folder-tree",P7);const z7=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],H7=Te("funnel",z7);const U7=[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]],AS=Te("ghost",U7);const V7=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],w0=Te("git-branch",V7);const F7=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],q7=Te("git-compare",F7);const K7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],ur=Te("globe",K7);const W7=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],ms=Te("hard-drive",W7);const G7=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Y7=Te("hash",G7);const X7=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],Rg=Te("hexagon",X7);const J7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Q7=Te("info",J7);const Z7=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],_f=Te("key-round",Z7);const eP=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],wf=Te("key",eP);const tP=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Dr=Te("layers",tP);const nP=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],PT=Te("layout-grid",nP);const sP=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],pu=Te("link",sP);const rP=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],iP=Te("list",rP);const aP=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],na=Te("loader-circle",aP);const oP=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Sf=Te("lock",oP);const lP=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],cP=Te("mail",lP);const uP=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],hP=Te("maximize-2",uP);const dP=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],Ln=Te("network",dP);const fP=[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]],pP=Te("newspaper",fP);const mP=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],$T=Te("package",mP);const gP=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Yd=Te("pause",gP);const yP=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Uc=Te("play",yP);const bP=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M17 8a1 1 0 0 1 1 1v4a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1z",key:"1xoxul"}],["path",{d:"M9 8V2",key:"14iosj"}]],zT=Te("plug",bP);const vP=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],xP=Te("puzzle",vP);const _P=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],wP=Te("radio",_P);const SP=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],En=Te("refresh-cw",SP);const kP=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],ES=Te("rocket",kP);const CP=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],NP=Te("rotate-ccw",CP);const AP=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],Xd=Te("route",AP);const EP=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],jP=Te("save",EP);const TP=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],jS=Te("search",TP);const RP=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],OP=Te("send",RP);const MP=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],Xr=Te("server",MP);const BP=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],DP=Te("settings",BP);const LP=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],IP=Te("share-2",LP);const PP=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],HT=Te("shield-check",PP);const $P=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],mu=Te("shield",$P);const zP=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],UT=Te("sparkles",zP);const HP=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],GA=Te("square",HP);const UP=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],VT=Te("tag",UP);const VP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],FP=Te("target",VP);const qP=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],kf=Te("trash-2",qP);const KP=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],S0=Te("triangle-alert",KP);const WP=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],FT=Te("user",WP);const GP=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Og=Te("x",GP);const YP=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Mg=Te("zap",YP);const XP=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],JP=Te("zoom-in",XP);const QP=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],ZP=Te("zoom-out",QP),qT=F.createContext(null);function TS(){const t=F.useContext(qT);if(!t)throw new Error("useAppMode must be used within an AppModeProvider");return t}const Sv="docker";function e$(t){const e=Me.c(30),{contexts:n,selectedContext:s,onSelectContext:r}=t,[i,o]=F.useState(!1),c=F.useRef(null),{mode:d,setMode:h,dockerAvailable:g}=TS();let m,b;e[0]!==i?(m=()=>{if(!i)return;const D=function(V){c.current&&!c.current.contains(V.target)&&o(!1)};return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},b=[i],e[0]=i,e[1]=m,e[2]=b):(m=e[1],b=e[2]),F.useEffect(m,b);let y;e[3]!==d||e[4]!==r||e[5]!==h?(y=D=>{D===Sv?h("docker"):(d==="docker"&&h("kubernetes"),r(D)),o(!1)},e[3]=d,e[4]=r,e[5]=h,e[6]=y):y=e[6];const w=y,x=d==="docker",S=x?Sv:s,k=x?WA:Xr;if(n.length<=1&&!g)return null;let C;e[7]!==i?(C=()=>o(!i),e[7]=i,e[8]=C):C=e[8];let N;e[9]!==k?(N=f.jsx(k,{size:12,className:"opacity-60 group-hover:opacity-80"}),e[9]=k,e[10]=N):N=e[10];let R;e[11]!==S?(R=f.jsx("span",{className:"truncate flex-1 text-left",children:S}),e[11]=S,e[12]=R):R=e[12];const B=`opacity-40 group-hover:opacity-60 transition-transform ${i?"rotate-180":""}`;let E;e[13]!==B?(E=f.jsx(rs,{size:12,className:B}),e[13]=B,e[14]=E):E=e[14];let z;e[15]!==C||e[16]!==N||e[17]!==R||e[18]!==E?(z=f.jsxs("button",{type:"button",onClick:C,className:"flex items-center gap-1.5 w-full px-1 py-0.5 text-xs text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-300 transition-colors rounded group",children:[N,R,E]}),e[15]=C,e[16]=N,e[17]=R,e[18]=E,e[19]=z):z=e[19];let U;e[20]!==n||e[21]!==g||e[22]!==w||e[23]!==x||e[24]!==i||e[25]!==s?(U=i&&f.jsx("div",{className:"absolute z-50 left-0 right-0 mt-1 bg-white dark:bg-neutral-950 rounded-lg shadow-xl max-h-64 overflow-y-auto border border-neutral-200 dark:border-neutral-700",children:f.jsxs("div",{className:"py-1",children:[n.length>0&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"px-3 py-1 text-[10px] font-semibold text-neutral-400 dark:text-neutral-500 uppercase tracking-wider",children:"Clusters"}),n.map(D=>{const W=!x&&s===D.name;return f.jsxs("div",{onClick:()=>w(D.name),className:`mx-1 px-2.5 py-1.5 rounded-md cursor-pointer text-sm flex items-center justify-between hover:bg-neutral-100 dark:hover:bg-neutral-800 ${W?"text-neutral-900 dark:text-neutral-100":"text-neutral-600 dark:text-neutral-400"}`,children:[f.jsxs("div",{className:"flex items-center gap-2 truncate",children:[f.jsx(Xr,{size:14,className:"opacity-50 shrink-0"}),f.jsx("span",{className:"truncate",children:D.name})]}),W&&f.jsx(bn,{size:14,className:"text-neutral-500 dark:text-neutral-400 shrink-0"})]},D.name)})]}),g&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"px-3 py-1 text-[10px] font-semibold text-neutral-400 dark:text-neutral-500 uppercase tracking-wider mt-1",children:"Local"}),f.jsxs("div",{onClick:()=>w(Sv),className:`mx-1 px-2.5 py-1.5 rounded-md cursor-pointer text-sm flex items-center justify-between hover:bg-neutral-100 dark:hover:bg-neutral-800 ${x?"text-neutral-900 dark:text-neutral-100":"text-neutral-600 dark:text-neutral-400"}`,children:[f.jsxs("div",{className:"flex items-center gap-2 truncate",children:[f.jsx(WA,{size:14,className:"opacity-50 shrink-0"}),f.jsx("span",{className:"truncate",children:"docker"})]}),x&&f.jsx(bn,{size:14,className:"text-neutral-500 dark:text-neutral-400 shrink-0"})]})]})]})}),e[20]=n,e[21]=g,e[22]=w,e[23]=x,e[24]=i,e[25]=s,e[26]=U):U=e[26];let Y;return e[27]!==U||e[28]!==z?(Y=f.jsxs("div",{className:"relative",ref:c,children:[z,U]}),e[27]=U,e[28]=z,e[29]=Y):Y=e[29],Y}const k0=new Map,C0=new Map,Ed=new Map;function t$(t){t?(k0.delete(t),C0.delete(t),Ed.delete(t)):(k0.clear(),C0.clear(),Ed.clear())}function YA(t){return t===""?0:t==="apps"?1:t==="batch"?2:t==="networking.k8s.io"?3:t==="storage.k8s.io"?4:t==="rbac.authorization.k8s.io"?5:t.endsWith(".k8s.io")?10:100}function n$(t){const e=t.group||"";return e?`${t.name}.${e}`:t.name}function Jo(t){const e=t.group||"",n=t.version||"v1";return e?`/apis/${e}/${n}`:"/api/v1"}function XA(t,e,n){const s=n$(n);t.set(s,n);const r=YA(n.group||""),i=o=>{const c=e.get(o);if(!c)e.set(o,n);else{const d=YA(c.group||"");r<d&&e.set(o,n)}};if(i(n.name),n.singularName&&i(n.singularName),n.shortNames)for(const o of n.shortNames)i(o)}async function kv(t,e){const n=`/contexts/${e}${t}`,s=await fetch(n);if(!s.ok)throw new Error(`API request failed: ${s.status} ${s.statusText}`);return s.json()}async function Bg(t){const e=C0.get(t);if(e)return e;const n=Ed.get(t);if(n)return n;const s=(async()=>{const r=new Map,i=new Map;try{const o=await kv("/api/v1",t);for(const c of o.resources){if(c.name.includes("/"))continue;const d={...c,group:"",version:"v1"};XA(r,i,d)}}catch(o){console.warn("Failed to fetch core v1 resources:",o)}try{const o=await kv("/apis",t);await Promise.all(o.groups.map(async c=>{const d=c.preferredVersion?.version||c.versions[0]?.version;if(!d)return;const h=`/apis/${c.name}/${d}`;try{const g=await kv(h,t);for(const m of g.resources){if(m.name.includes("/"))continue;const b={...m,group:m.group||c.name,version:m.version||d};XA(r,i,b)}}catch(g){console.warn(`Failed to fetch resources for ${h}:`,g)}}))}catch(o){console.warn("Failed to fetch API groups:",o)}return k0.set(t,r),C0.set(t,i),Ed.delete(t),i})();return Ed.set(t,s),s}async function _l(t,e){return(await Bg(t)).get(e)}async function s$(t,e){return await Bg(t),k0.get(t)?.get(e)}async function JA(t,e,n){const s=await Bg(t);let r="";n&&n.includes("/")&&(r=n.split("/")[0]);for(const i of s.values())if(i.kind===e)if(n){if((i.group||"")===r)return i}else return i;if(n){for(const i of s.values())if(i.kind===e)return i}}function r$(t){Bg(t).catch(console.error)}function i$(t){const e=t.spec;if(!e)throw new Error("CRD is missing spec");const n=e.versions.find(i=>i.storage),s=e.versions.find(i=>i.served),r=n?.name||s?.name||e.versions[0]?.name;return{name:e.names.plural,singularName:e.names.singular||"",namespaced:e.scope==="Namespaced",group:e.group,version:r,kind:e.names.kind,verbs:["get","list","watch","create","update","patch","delete"],shortNames:e.names.shortNames}}async function ha(t,e){const n=e?`/contexts/${e}${t}`:t,s=await fetch(n);if(!s.ok)throw new Error(`API request failed: ${s.status} ${s.statusText}`);return s.json()}async function a$(t){return ha("/api/v1/namespaces",t)}async function o$(t){return(await ha("/apis/apiextensions.k8s.io/v1/customresourcedefinitions",t)).items}async function zx(t,e,n,s){const r=Jo(e),i=e.namespaced&&s?`${r}/namespaces/${s}/${e.name}/${n}`:`${r}/${e.name}/${n}`;return ha(i,t)}async function KT(t,e,n,s,r){const i=Jo(e),o=e.namespaced&&r?`${i}/namespaces/${r}/${e.name}/${n}`:`${i}/${e.name}/${n}`,c=`/contexts/${t}${o}`,d=await fetch(c,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!d.ok){const h=await d.text();let g=`API request failed: ${d.status} ${d.statusText}`;try{const m=JSON.parse(h);m.message&&(g=m.message)}catch{}throw new Error(g)}return d.json()}async function Dg(t,e,n){const s=Jo(e),r=e.namespaced&&n?`${s}/namespaces/${n}/${e.name}`:`${s}/${e.name}`;return(await ha(r,t)).items}async function Hx(t,e,n){const s=n?`involvedObject.name=${e},involvedObject.namespace=${n}`:`involvedObject.name=${e}`,r=n?`/api/v1/namespaces/${n}/events?fieldSelector=${encodeURIComponent(s)}`:`/api/v1/events?fieldSelector=${encodeURIComponent(s)}`;return(await ha(r,t)).items.sort((o,c)=>{const d=o.lastTimestamp||o.eventTime||o.metadata?.creationTimestamp||"",h=c.lastTimestamp||c.eventTime||c.metadata?.creationTimestamp||"";return new Date(h).getTime()-new Date(d).getTime()})}let Nc={contexts:[]};async function l$(){try{const[t,e]=await Promise.all([fetch("/config.json"),fetch("/contexts")]);if(t.ok){const n=await t.json();Nc={...Nc,...n}}else console.warn("Failed to load config.json, using defaults");if(e.ok){const n=await e.json();Nc.contexts=n}else console.warn("Failed to load contexts, using defaults");return Nc}catch(t){return console.warn("Error loading config:",t),Nc}}function sl(){return Nc}function c$(t,e){return e.some(n=>n.includes("*")?new RegExp(`^${n.replace(/\*/g,".*")}$`).test(t):n===t)}function u$({namespaces:t,selectedNamespace:e,onSelectNamespace:n,disabled:s=!1,spaceLabels:r=[],platformNamespaces:i=[]}){const[o,c]=F.useState(!1),[d,h]=F.useState(""),[g,m]=F.useState(-1),b=F.useRef(null),y=F.useRef(null),w=F.useRef(null),x=F.useMemo(()=>U=>c$(U,i),[i]),S=F.useMemo(()=>{const U=[],Y=new Set;for(const V of r){const q=new Map;for(const X of t){const I=X.metadata?.name;if(!I||Y.has(I))continue;const L=X.metadata?.labels?.[V];L&&(q.has(L)||q.set(L,[]),q.get(L).push(X),Y.add(I))}for(const[X,I]of Array.from(q.entries()).sort(([L],[J])=>L.localeCompare(J)))U.push({label:X,namespaces:I.sort((L,J)=>(L.metadata?.name||"").localeCompare(J.metadata?.name||""))})}const D=t.filter(V=>{const q=V.metadata?.name;return q&&!Y.has(q)&&!x(q)}).sort((V,q)=>(V.metadata?.name||"").localeCompare(q.metadata?.name||""));D.length>0&&U.push({label:"User",namespaces:D});const W=t.filter(V=>{const q=V.metadata?.name;return q&&!Y.has(q)&&x(q)}).sort((V,q)=>(V.metadata?.name||"").localeCompare(q.metadata?.name||""));return W.length>0&&U.push({label:"Platform",namespaces:W}),U},[t,r,x]),k=F.useMemo(()=>d===""?S:S.map(U=>({...U,namespaces:U.namespaces.filter(Y=>Y.metadata?.name?.toLowerCase().includes(d.toLowerCase()))})).filter(U=>U.namespaces.length>0),[S,d]),C=F.useMemo(()=>{const U=[];(d===""||"all namespaces".includes(d.toLowerCase()))&&U.push({value:"",label:"All Namespaces"});for(const D of k)for(const W of D.namespaces){const V=W.metadata?.name;V&&U.push({value:V,label:V})}return U},[k,d]),N=k.some(U=>U.namespaces.length>0),R=d===""||"all namespaces".includes(d.toLowerCase());F.useEffect(()=>{if(!o)return;function U(Y){b.current&&!b.current.contains(Y.target)&&(c(!1),h(""))}return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[o]),F.useEffect(()=>{o&&(y.current?.focus(),m(-1))},[o]);const B=U=>{n(U||void 0),c(!1),h("")},E=U=>{switch(U.key){case"ArrowDown":U.preventDefault(),m(Y=>Math.min(Y+1,C.length-1));break;case"ArrowUp":U.preventDefault(),m(Y=>Math.max(Y-1,0));break;case"Enter":U.preventDefault(),g>=0&&g<C.length&&B(C[g].value);break;case"Escape":c(!1),h("");break}};F.useEffect(()=>{g>=0&&w.current&&w.current.querySelector(`[data-index="${g}"]`)?.scrollIntoView({block:"nearest"})},[g]);let z=-1;return f.jsxs("div",{className:"relative",ref:b,children:[f.jsxs("div",{className:"relative",children:[f.jsx("input",{ref:y,type:"text",className:"w-full px-3 py-1.5 pr-8 bg-neutral-50 dark:bg-neutral-950 border border-neutral-200 dark:border-neutral-700 text-neutral-900 dark:text-neutral-100 rounded-lg text-sm text-left disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-1 focus:ring-neutral-400/50 dark:focus:ring-neutral-500/50 cursor-default placeholder:text-neutral-400",value:o?d:s?"Cluster":e||"All Namespaces",onChange:U=>h(U.target.value),onFocus:()=>!s&&c(!0),onKeyDown:E,placeholder:o?"Search...":void 0,disabled:s,readOnly:!o}),f.jsx("button",{type:"button",onClick:()=>!s&&c(!o),className:"absolute inset-y-0 right-0 flex items-center pr-2",disabled:s,children:f.jsx(rs,{size:16,className:"text-neutral-400 dark:text-neutral-500"})})]}),o&&f.jsx("div",{ref:w,className:"absolute z-50 w-full mt-1 bg-white dark:bg-neutral-950 rounded-lg shadow-xl max-h-96 overflow-y-auto focus:outline-none border border-neutral-200 dark:border-neutral-700",children:!N&&!R?f.jsx("div",{className:"px-3 py-3 text-sm text-neutral-500 dark:text-neutral-400",children:"No namespaces found"}):f.jsxs(f.Fragment,{children:[R&&f.jsxs("div",{"data-index":++z,onClick:()=>B(""),className:`px-3 py-2 cursor-pointer text-sm flex items-center justify-between ${g===z?"bg-neutral-100 dark:bg-neutral-700":""} ${e===void 0?"text-neutral-900 dark:text-neutral-100":"text-neutral-600 dark:text-neutral-400"}`,children:[f.jsx("span",{className:"truncate",children:"All Namespaces"}),e===void 0&&f.jsx(bn,{size:16,className:"text-neutral-500 dark:text-neutral-400"})]}),k.map(U=>f.jsxs("div",{className:"py-1",children:[f.jsx("div",{className:"px-3 py-1 text-[10px] font-semibold text-neutral-400 dark:text-neutral-500 uppercase tracking-wider",children:U.label}),U.namespaces.map(Y=>{const D=Y.metadata?.name;if(!D)return null;const W=++z,V=e===D,q=g===W;return f.jsxs("div",{"data-index":W,onClick:()=>B(D),className:`mx-1 px-2.5 py-1.5 rounded-md cursor-pointer text-sm flex items-center justify-between ${q?"bg-neutral-100 dark:bg-neutral-700":""} ${V?"text-neutral-900 dark:text-neutral-100":"text-neutral-600 dark:text-neutral-400"}`,children:[f.jsx("span",{className:"truncate",children:D}),V&&f.jsx(bn,{size:16,className:"text-neutral-500 dark:text-neutral-400"})]},D)})]},U.label))]})})]})}async function h$(t,e){const n=`/contexts/${e}${t}`,s=await fetch(n,{headers:{Accept:"application/json;as=Table;v=v1;g=meta.k8s.io"}});if(!s.ok)throw new Error(`API request failed: ${s.status} ${s.statusText}`);return s.json()}async function RS(t,e,n){const s=Jo(e),r=e.namespaced&&n?`${s}/namespaces/${n}/${e.name}`:`${s}/${e.name}`;return h$(r,t)}const WT=F.createContext(null);function ei(){const t=F.useContext(WT);if(!t)throw new Error("useCluster must be used within a ClusterProvider");return t}function QA(t,e){return t.name===e.name&&(t.group||"")===(e.group||"")}const ZA=[{kind:"pods",label:"Pods",icon:Qr,category:"workloads"},{kind:"deployments",label:"Deployments",icon:ES,category:"workloads"},{kind:"daemonsets",label:"DaemonSets",icon:AS,category:"workloads"},{kind:"statefulsets",label:"StatefulSets",icon:fo,category:"workloads"},{kind:"replicasets",label:"ReplicaSets",icon:Dr,category:"workloads"},{kind:"jobs",label:"Jobs",icon:Mg,category:"workloads"},{kind:"cronjobs",label:"CronJobs",icon:ua,category:"workloads"},{kind:"secrets",label:"Secrets",icon:_f,category:"config"},{kind:"configmaps",label:"ConfigMaps",icon:xi,category:"config"},{kind:"applications",label:"Applications",icon:LT,category:"config"},{kind:"applicationsets",label:"ApplicationSets",icon:PT,category:"config"},{kind:"certificates",label:"Certificates",icon:HT,category:"config"},{kind:"certificaterequests",label:"CertificateRequests",icon:_0,category:"config"},{kind:"services",label:"Services",icon:zT,category:"network"},{kind:"ingresses",label:"Ingresses",icon:ur,category:"network"},{kind:"gateways",label:"Gateways",icon:Ln,category:"network"},{kind:"httproutes",label:"HTTPRoutes",icon:ur,category:"network"},{kind:"grpcroutes",label:"GRPCRoutes",icon:ur,category:"network"},{kind:"tcproutes",label:"TCPRoutes",icon:Ln,category:"network"},{kind:"udproutes",label:"UDPRoutes",icon:Ln,category:"network"},{kind:"tlsroutes",label:"TLSRoutes",icon:Ln,category:"network"},{kind:"persistentvolumes",label:"PersistentVolumes",icon:ms,category:"storage"},{kind:"persistentvolumeclaims",label:"PersistentVolumeClaims",icon:SS,category:"storage"},{kind:"namespaces",label:"Namespaces",icon:Tg,category:"cluster"},{kind:"nodes",label:"Nodes",icon:Xr,category:"cluster"},{kind:"events",label:"Events",icon:pP,category:"cluster"}],e5={workloads:"Workloads",config:"Config",network:"Network",storage:"Storage",cluster:"Cluster",crd:"Custom Resources"};function d$(t){const e=Me.c(46),{selectedResource:n,onSelectResource:s,isOverviewSelected:r}=t,{context:i,namespace:o,namespaces:c,setNamespace:d}=ei();let h;e[0]===Symbol.for("react.memo_cache_sentinel")?(h=new Map,e[0]=h):h=e[0];const[g,m]=F.useState(h);let b;e[1]===Symbol.for("react.memo_cache_sentinel")?(b=[],e[1]=b):b=e[1];const[y,w]=F.useState(b);let x;e[2]===Symbol.for("react.memo_cache_sentinel")?(x={workloads:!0,config:!0,network:!0,storage:!0,cluster:!0,crd:!1},e[2]=x):x=e[2];const[S,k]=F.useState(x);let C,N;e[3]!==i?(C=()=>{(async()=>{const L=new Map;for(const J of ZA){const G=await _l(i,J.kind);G&&L.set(J.kind,G)}m(L)})()},N=[i],e[3]=i,e[4]=C,e[5]=N):(C=e[4],N=e[5]),F.useEffect(C,N);let R,B;e[6]!==i?(R=()=>{o$(i).then(I=>{const L=I.map(i$);L.sort(y$),w(L)}).catch(g$)},B=[i],e[6]=i,e[7]=R,e[8]=B):(R=e[7],B=e[8]),F.useEffect(R,B);let E;e[9]===Symbol.for("react.memo_cache_sentinel")?(E=I=>{k(L=>({...L,[I]:!L[I]}))},e[9]=E):E=e[9];const z=E;let U,Y,D,W,V;if(e[10]!==g||e[11]!==y||e[12]!==S||e[13]!==r||e[14]!==o||e[15]!==c||e[16]!==s||e[17]!==n||e[18]!==d){const I=ZA.reduce(m$,{}),L=y.reduce(p$,{}),J=Object.entries(L).sort(f$),G=n!==null&&!n.namespaced;let P,T;e[24]===Symbol.for("react.memo_cache_sentinel")?(P=sl().platform?.spaces?.labels,T=sl().platform?.namespaces,e[24]=P,e[25]=T):(P=e[24],T=e[25]),e[26]!==o||e[27]!==c||e[28]!==d||e[29]!==G?(W=f.jsx("div",{className:"shrink-0 px-3 pb-2",children:f.jsx(u$,{namespaces:c,selectedNamespace:o,onSelectNamespace:d,disabled:G,spaceLabels:P,platformNamespaces:T})}),e[26]=o,e[27]=c,e[28]=d,e[29]=G,e[30]=W):W=e[30],V="flex-1 py-1 overflow-y-auto overflow-x-hidden min-h-0";const O=`flex items-center w-full px-3 py-2 text-sm rounded-lg transition-colors ${r?"bg-white/90 text-neutral-900 shadow-sm dark:bg-neutral-800 dark:text-neutral-100":"text-neutral-600 hover:bg-white/50 hover:text-neutral-900 dark:text-neutral-400 dark:hover:bg-neutral-800/50 dark:hover:text-neutral-200"}`;let K;e[31]!==s?(K=()=>s(null),e[31]=s,e[32]=K):K=e[32];let j,Z;e[33]===Symbol.for("react.memo_cache_sentinel")?(j=f.jsx(Ln,{size:16,className:"mr-2.5 shrink-0 opacity-70"}),Z=f.jsx("span",{className:"font-medium",children:"Overview"}),e[33]=j,e[34]=Z):(j=e[33],Z=e[34]),e[35]!==O||e[36]!==K?(U=f.jsx("div",{className:"mb-2 px-2",children:f.jsxs("button",{className:O,onClick:K,children:[j,Z]})}),e[35]=O,e[36]=K,e[37]=U):U=e[37],Y=Object.entries(I).map(le=>{const[te,pe]=le;return f.jsxs("div",{className:"mb-1",children:[f.jsxs("button",{className:"flex items-center w-full px-4 py-1.5 text-[11px] font-semibold uppercase tracking-wider text-neutral-500 hover:text-neutral-700 dark:text-neutral-500 dark:hover:text-neutral-400 transition-colors",onClick:()=>z(te),children:[f.jsx("span",{className:"mr-1.5 opacity-60",children:S[te]?f.jsx(rs,{size:12}):f.jsx(Or,{size:12})}),f.jsx("span",{children:e5[te]})]}),S[te]&&f.jsx("ul",{className:"px-2",children:pe.map(_e=>{const Ce=g.get(_e.kind);if(!Ce)return null;const tt=n!==null&&QA(Ce,n);return f.jsx("li",{children:f.jsxs("button",{className:`flex items-center w-full px-3 py-2 text-sm rounded-lg transition-colors ${tt?"bg-white/90 text-neutral-900 shadow-sm dark:bg-neutral-800 dark:text-neutral-100":"text-neutral-600 hover:bg-white/50 hover:text-neutral-900 dark:text-neutral-400 dark:hover:bg-neutral-800/50 dark:hover:text-neutral-200"}`,onClick:()=>s(Ce),children:[f.jsx(_e.icon,{size:16,className:"mr-2.5 shrink-0 opacity-70"}),f.jsx("span",{className:"truncate",children:_e.label})]})},_e.kind)})})]},te)}),D=y.length>0&&f.jsxs("div",{className:"mb-1",children:[f.jsxs("button",{className:"flex items-center w-full px-4 py-1.5 text-[11px] font-semibold uppercase tracking-wider text-neutral-500 hover:text-neutral-700 dark:text-neutral-500 dark:hover:text-neutral-400 transition-colors",onClick:()=>z("crd"),children:[f.jsx("span",{className:"mr-1.5 opacity-60",children:S.crd?f.jsx(rs,{size:12}):f.jsx(Or,{size:12})}),f.jsx("span",{children:e5.crd}),f.jsx("span",{className:"ml-auto px-1.5 py-0.5 bg-neutral-300/60 rounded text-[10px] text-neutral-500 dark:bg-neutral-700 dark:text-neutral-500",children:y.length})]}),S.crd&&f.jsx("div",{className:"px-2",children:J.map(le=>{const[te,pe]=le;return f.jsxs("div",{className:"mb-1",children:[f.jsx("div",{className:"px-3 py-1 text-[10px] text-neutral-400 truncate lowercase dark:text-neutral-600",title:te,children:te}),f.jsx("ul",{children:pe.map(_e=>{const Ce=n!==null&&QA(_e,n);return f.jsx("li",{children:f.jsxs("button",{className:`flex items-center w-full px-3 py-2 text-sm rounded-lg transition-colors ${Ce?"bg-white/90 text-neutral-900 shadow-sm dark:bg-neutral-800 dark:text-neutral-100":"text-neutral-600 hover:bg-white/50 hover:text-neutral-900 dark:text-neutral-400 dark:hover:bg-neutral-800/50 dark:hover:text-neutral-200"}`,onClick:()=>s(_e),title:`${_e.kind} (${_e.group})`,children:[f.jsx(Rg,{size:16,className:"mr-2.5 shrink-0 opacity-70"}),f.jsx("span",{className:"truncate",children:_e.kind})]})},`${_e.group||""}/${_e.name}`)})})]},te)})})]}),e[10]=g,e[11]=y,e[12]=S,e[13]=r,e[14]=o,e[15]=c,e[16]=s,e[17]=n,e[18]=d,e[19]=U,e[20]=Y,e[21]=D,e[22]=W,e[23]=V}else U=e[19],Y=e[20],D=e[21],W=e[22],V=e[23];let q;e[38]!==U||e[39]!==Y||e[40]!==D||e[41]!==V?(q=f.jsxs("nav",{className:V,children:[U,Y,D]}),e[38]=U,e[39]=Y,e[40]=D,e[41]=V,e[42]=q):q=e[42];let X;return e[43]!==W||e[44]!==q?(X=f.jsxs(f.Fragment,{children:[W,q]}),e[43]=W,e[44]=q,e[45]=X):X=e[45],X}function f$(t,e){const[n]=t,[s]=e,r=n.split(".").reverse().join("."),i=s.split(".").reverse().join(".");return r.localeCompare(i)}function p$(t,e){const n=e.group||"core";return t[n]||(t[n]=[]),t[n].push(e),t}function m$(t,e){return t[e.category]||(t[e.category]=[]),t[e.category].push(e),t}function g$(t){console.error("Failed to load CRDs:",t)}function y$(t,e){return t.kind.localeCompare(e.kind)}const b$=[{id:"containers",label:"Containers",icon:Qr},{id:"images",label:"Images",icon:Dr},{id:"volumes",label:"Volumes",icon:ms},{id:"networks",label:"Networks",icon:Ln}];function v$(t){const e=Me.c(5),{selectedResource:n,onSelectResource:s}=t;let r;e[0]!==s||e[1]!==n?(r=b$.map(o=>{const c=n===o.id;return f.jsx("li",{children:f.jsxs("button",{className:`flex items-center w-full px-3 py-2 text-sm rounded-lg transition-colors ${c?"bg-white/90 text-neutral-900 shadow-sm dark:bg-neutral-800 dark:text-neutral-100":"text-neutral-600 hover:bg-white/50 hover:text-neutral-900 dark:text-neutral-400 dark:hover:bg-neutral-800/50 dark:hover:text-neutral-200"}`,onClick:()=>s(o.id),children:[f.jsx(o.icon,{size:16,className:"mr-2.5 shrink-0 opacity-70"}),f.jsx("span",{className:"truncate",children:o.label})]})},o.id)}),e[0]=s,e[1]=n,e[2]=r):r=e[2];let i;return e[3]!==r?(i=f.jsx("nav",{className:"flex-1 py-1 overflow-y-auto overflow-x-hidden min-h-0",children:f.jsx("ul",{className:"px-2",children:r})}),e[3]=r,e[4]=i):i=e[4],i}function x$(t){const e=Me.c(17),{selectedResource:n,onSelectResource:s,isOverviewSelected:r,selectedDockerResource:i,onSelectDockerResource:o}=t,{mode:c}=TS(),{context:d,contexts:h,setContext:g}=ei();let m;e[0]!==d||e[1]!==h||e[2]!==g?(m=f.jsx("div",{className:"shrink-0 px-3 pt-3 pb-2",children:f.jsx(e$,{contexts:h,selectedContext:d,onSelectContext:g})}),e[0]=d,e[1]=h,e[2]=g,e[3]=m):m=e[3];let b;e[4]!==r||e[5]!==c||e[6]!==s||e[7]!==n?(b=c==="kubernetes"&&s&&f.jsx(d$,{selectedResource:n??null,onSelectResource:s,isOverviewSelected:r}),e[4]=r,e[5]=c,e[6]=s,e[7]=n,e[8]=b):b=e[8];let y;e[9]!==c||e[10]!==o||e[11]!==i?(y=c==="docker"&&o&&f.jsx(v$,{selectedResource:i??"containers",onSelectResource:o}),e[9]=c,e[10]=o,e[11]=i,e[12]=y):y=e[12];let w;return e[13]!==m||e[14]!==b||e[15]!==y?(w=f.jsxs("aside",{className:"w-56 h-full shrink-0 bg-white dark:bg-black/40 backdrop-blur-xl flex flex-col rounded-xl border border-neutral-300/50 dark:border-neutral-700/50",children:[m,b,y]}),e[13]=m,e[14]=b,e[15]=y,e[16]=w):w=e[16],w}const _$=5e3;function GT(t,e=[],n={}){const{refetchInterval:s=_$,refetchShowLoading:r=!1}=n,[i,o]=F.useState(null),[c,d]=F.useState(!0),[h,g]=F.useState(null),[m,b]=F.useState(!1),y=F.useRef(!0),w=F.useCallback(async(S=!1)=>{(!S||r)&&d(!0),S&&b(!0);try{const k=await t();o(k),g(null)}catch(k){S||g(k instanceof Error?k:new Error("Unknown error"))}finally{d(!1),b(!1)}},[t,r,...e]);F.useEffect(()=>{y.current=!0,w(!1)},[w]),F.useEffect(()=>{if(!s||s<=0)return;const S=setInterval(()=>{(!y.current||i!==null)&&w(!0),y.current=!1},s);return()=>clearInterval(S)},[w,s,i]);const x=F.useCallback(()=>{w(!1)},[w]);return{data:i,loading:c,error:h,refetch:x,isRefetching:m}}const YT=F.createContext(null);function OS(){const t=F.useContext(YT);if(!t)throw new Error("usePanels must be used within a PanelProvider");return t}const w$=["selector","containers","images","labels","annotations","nominated node","readiness gates","node selector"];function S$(){const t=Me.c(3),[e,n]=F.useState(k$);let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=o=>{const c=o.toLowerCase();n(d=>{const h=new Set(d);return h.has(c)?h.delete(c):h.add(c),h})},t[0]=s):s=t[0];const r=s;let i;return t[1]!==e?(i={hiddenColumns:e,toggleColumn:r},t[1]=e,t[2]=i):i=t[2],i}function k$(){return new Set(w$)}function t5(t){return t?.metadata?.uid?t.metadata.uid:t?.Id?t.Id:t?.Name?t.Name:JSON.stringify(t)}function Cv(t){if(t?.metadata?.namespace)return t.metadata.namespace}function C$(t,e){return t==null?"<none>":e.format==="date-time"&&typeof t=="string"?N$(t):Array.isArray(t)?t.length>0?t.join(", "):"<none>":typeof t=="object"?JSON.stringify(t):String(t)}function N$(t){const e=new Date(t),s=new Date().getTime()-e.getTime(),r=Math.floor(s/1e3),i=Math.floor(r/60),o=Math.floor(i/60),c=Math.floor(o/24);return c>0?`${c}d`:o>0?`${o}h`:i>0?`${i}m`:`${r}s`}function A$(t){const e=t.name.toLowerCase();return e==="status"||e==="phase"||e==="ready"||e==="condition"}function E$(t){const e=Me.c(79),{config:n,data:s,loading:r,error:i,refetch:o,isRefetching:c,hiddenColumns:d,onColumnsLoaded:h,selectedItem:g,onSelectItem:m,namespace:b}=t,y=c===void 0?!1:c;let w;e[0]===Symbol.for("react.memo_cache_sentinel")?(w={column:null,direction:null},e[0]=w):w=e[0];const[x,S]=F.useState(w),k=b===void 0&&n.namespaced===!0;let C;e[1]===Symbol.for("react.memo_cache_sentinel")?(C={name:"Namespace",type:"string",format:"",description:"Namespace of the resource",priority:0},e[1]=C):C=e[1];const N=C;let R;if(e[2]!==s||e[3]!==d||e[4]!==k){e:{if(!s?.columnDefinitions){let O;e[6]===Symbol.for("react.memo_cache_sentinel")?(O=[],e[6]=O):O=e[6],R=O;break e}let P;e[7]!==d?(P=O=>!d.has(O.name.toLowerCase()),e[7]=d,e[8]=P):P=e[8];const T=s.columnDefinitions.filter(P);if(k&&!d.has("namespace")){const O=T.findIndex(j$);if(O!==-1){R=[...T.slice(0,O+1),N,...T.slice(O+1)];break e}}R=T}e[2]=s,e[3]=d,e[4]=k,e[5]=R}else R=e[5];const B=R;let E;e:{if(!s?.rows||!x.column||!x.direction){let Z;e[9]!==s?.rows?(Z=s?.rows??[],e[9]=s?.rows,e[10]=Z):Z=e[10],E=Z;break e}if(x.column==="Namespace"&&k){let Z;if(e[11]!==s.rows||e[12]!==x.direction){let le;e[14]!==x.direction?(le=(te,pe)=>{const _e=Cv(te.object)||"",Ce=Cv(pe.object)||"",tt=_e.localeCompare(Ce);return x.direction==="asc"?tt:-tt},e[14]=x.direction,e[15]=le):le=e[15],Z=[...s.rows].sort(le),e[11]=s.rows,e[12]=x.direction,e[13]=Z}else Z=e[13];E=Z;break e}let T;if(e[16]!==s.columnDefinitions||e[17]!==x.column){let Z;e[19]!==x.column?(Z=le=>le.name===x.column,e[19]=x.column,e[20]=Z):Z=e[20],T=s.columnDefinitions.findIndex(Z),e[16]=s.columnDefinitions,e[17]=x.column,e[18]=T}else T=e[18];const O=T;if(O===-1){E=s.rows;break e}const K=s.columnDefinitions[O];let j;if(e[21]!==K||e[22]!==O||e[23]!==s.rows||e[24]!==x.direction){let Z;e[26]!==K||e[27]!==O||e[28]!==x.direction?(Z=(le,te)=>{const pe=le.cells[O],_e=te.cells[O];if(pe==null&&_e==null)return 0;if(pe==null)return x.direction==="asc"?-1:1;if(_e==null)return x.direction==="asc"?1:-1;let Ce;if(K.format==="date-time"){const tt=new Date(String(pe)).getTime(),Ee=new Date(String(_e)).getTime();Ce=tt-Ee}else typeof pe=="number"&&typeof _e=="number"?Ce=pe-_e:Ce=String(pe).localeCompare(String(_e));return x.direction==="asc"?Ce:-Ce},e[26]=K,e[27]=O,e[28]=x.direction,e[29]=Z):Z=e[29],j=[...s.rows].sort(Z),e[21]=K,e[22]=O,e[23]=s.rows,e[24]=x.direction,e[25]=j}else j=e[25];E=j}const z=E;let U;e[30]===Symbol.for("react.memo_cache_sentinel")?(U=P=>{S(T=>T.column!==P?{column:P,direction:"asc"}:T.direction==="asc"?{column:P,direction:"desc"}:{column:null,direction:null})},e[30]=U):U=e[30];const Y=U;let D,W;if(e[31]!==s||e[32]!==h?(D=()=>{s?.columnDefinitions&&h&&h(s.columnDefinitions)},W=[s,h],e[31]=s,e[32]=h,e[33]=D,e[34]=W):(D=e[33],W=e[34]),F.useEffect(D,W),r){let P;e[35]===Symbol.for("react.memo_cache_sentinel")?(P=f.jsx("div",{className:"w-6 h-6 border-2 border-neutral-200 border-t-neutral-400 dark:border-neutral-700 dark:border-t-neutral-500 rounded-full animate-spin"}),e[35]=P):P=e[35];let T;return e[36]!==n.name?(T=f.jsx("div",{className:"h-full flex items-center justify-center",children:f.jsxs("div",{className:"flex flex-col items-center gap-3 text-neutral-400 dark:text-neutral-500",children:[P,f.jsxs("span",{className:"text-sm",children:["Loading ",n.name,"..."]})]})}),e[36]=n.name,e[37]=T):T=e[37],T}if(i){let P;e[38]===Symbol.for("react.memo_cache_sentinel")?(P=f.jsx(S0,{size:18}),e[38]=P):P=e[38];let T;e[39]!==i.message?(T=f.jsx("span",{className:"text-sm",children:i.message}),e[39]=i.message,e[40]=T):T=e[40];let O;e[41]!==o?(O=f.jsx("button",{onClick:o,className:"px-3 py-1.5 text-sm text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 underline underline-offset-2",children:"Retry"}),e[41]=o,e[42]=O):O=e[42];let K;return e[43]!==T||e[44]!==O?(K=f.jsx("div",{className:"h-full flex items-center justify-center",children:f.jsxs("div",{className:"flex items-center gap-3 text-red-500 dark:text-red-400",children:[P,T,O]})}),e[43]=T,e[44]=O,e[45]=K):K=e[45],K}if(!s||!s.columnDefinitions||s.rows.length===0){let P;e[46]===Symbol.for("react.memo_cache_sentinel")?(P=f.jsx("svg",{className:"w-8 h-8 mb-2 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),e[46]=P):P=e[46];let T;return e[47]!==n.name?(T=f.jsx("div",{className:"h-full flex items-center justify-center",children:f.jsxs("div",{className:"flex flex-col items-center text-neutral-400 dark:text-neutral-500",children:[P,f.jsxs("span",{className:"text-sm",children:["No ",n.name," found"]})]})}),e[47]=n.name,e[48]=T):T=e[48],T}let V;e[49]!==y?(V=y&&f.jsx("div",{className:"absolute top-2 right-4 z-20",children:f.jsx(En,{size:14,className:"text-neutral-400 dark:text-neutral-500 animate-spin"})}),e[49]=y,e[50]=V):V=e[50];let q;if(e[51]!==x||e[52]!==B){let P;e[54]!==x?(P=(T,O)=>{const K=x.column===T.name;return f.jsx("th",{title:T.description,onClick:()=>Y(T.name),className:`text-left px-4 py-2 text-[11px] font-medium whitespace-nowrap cursor-pointer transition-colors select-none group bg-neutral-100 dark:bg-neutral-950 ${K?"text-neutral-900 dark:text-neutral-200":"text-neutral-500 dark:text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-400"}`,children:f.jsxs("div",{className:"flex items-center gap-1",children:[T.name,f.jsx("span",{className:`transition-opacity ${K?"opacity-100":"opacity-0 group-hover:opacity-40"}`,children:K&&x.direction==="asc"?f.jsx(o7,{size:12}):K&&x.direction==="desc"?f.jsx(rs,{size:12}):f.jsx(c7,{size:12})})]})},O)},e[54]=x,e[55]=P):P=e[55],q=B.map(P),e[51]=x,e[52]=B,e[53]=q}else q=e[53];let X;e[56]!==q?(X=f.jsx("thead",{className:"sticky top-0 z-10 bg-neutral-100 dark:bg-neutral-950",children:f.jsx("tr",{children:q})}),e[56]=q,e[57]=X):X=e[57];let I;if(e[58]!==s||e[59]!==m||e[60]!==g||e[61]!==k||e[62]!==z||e[63]!==B){let P;e[65]!==s||e[66]!==m||e[67]!==g||e[68]!==k||e[69]!==B?(P=(T,O)=>{const K=t5(T.object),Z=(g?t5(g.object):null)===K,le=O%2===1;return f.jsx("tr",{onClick:()=>m?.(Z?null:T),className:`transition-colors cursor-pointer ${Z?"bg-blue-500/20 dark:bg-blue-500/20":le?"bg-neutral-200/40 dark:bg-neutral-800/30 hover:bg-neutral-200/70 dark:hover:bg-neutral-800/50":"hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30"}`,children:B.map((te,pe)=>{const _e=te.name==="Namespace"&&k,Ce=_e?-1:s.columnDefinitions.findIndex(Ue=>Ue.name===te.name),tt=_e?Cv(T.object):T.cells[Ce],Ee=C$(tt,te),Je=te.name.toLowerCase()==="name";return A$(te)?f.jsx("td",{className:`px-4 py-2 whitespace-nowrap ${pe===0?"rounded-l-lg":""} ${pe===B.length-1?"rounded-r-lg":""}`,children:f.jsxs("span",{className:`inline-flex items-center gap-1.5 text-xs font-medium capitalize ${Ee.toLowerCase().match(/running|active|ready|available|bound|succeeded|complete|healthy|true/)?"text-emerald-600 dark:text-emerald-400":Ee.toLowerCase().match(/pending|creating|waiting|progressing|scheduled/)?"text-amber-600 dark:text-amber-400":Ee.toLowerCase().match(/failed|error|crashloopbackoff|terminated|unknown|lost|false/)?"text-red-600 dark:text-red-400":"text-neutral-500 dark:text-neutral-400"}`,children:[f.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${Ee.toLowerCase().match(/running|active|ready|available|bound|succeeded|complete|healthy|true/)?"bg-emerald-500":Ee.toLowerCase().match(/pending|creating|waiting|progressing|scheduled/)?"bg-amber-500":Ee.toLowerCase().match(/failed|error|crashloopbackoff|terminated|unknown|lost|false/)?"bg-red-500":"bg-neutral-400"}`}),Ee]})},pe):f.jsx("td",{className:`px-4 py-2 whitespace-nowrap ${pe===0?"rounded-l-lg":""} ${pe===B.length-1?"rounded-r-lg":""} ${Je?"text-neutral-900 dark:text-neutral-300":"text-neutral-500 dark:text-neutral-500"}`,children:Ee},pe)})},K)},e[65]=s,e[66]=m,e[67]=g,e[68]=k,e[69]=B,e[70]=P):P=e[70],I=z.map(P),e[58]=s,e[59]=m,e[60]=g,e[61]=k,e[62]=z,e[63]=B,e[64]=I}else I=e[64];let L;e[71]!==I?(L=f.jsx("tbody",{children:I}),e[71]=I,e[72]=L):L=e[72];let J;e[73]!==X||e[74]!==L?(J=f.jsx("div",{className:"overflow-auto h-full",children:f.jsxs("table",{className:"w-full text-[13px]",children:[X,L]})}),e[73]=X,e[74]=L,e[75]=J):J=e[75];let G;return e[76]!==J||e[77]!==V?(G=f.jsxs("div",{className:"pl-2 h-full relative",children:[V,J]}),e[76]=J,e[77]=V,e[78]=G):G=e[78],G}function j$(t){return t.name.toLowerCase()==="name"}function T$(t){const e=Me.c(19),{columns:n,hiddenColumns:s,onToggleColumn:r}=t,[i,o]=F.useState(!1),c=F.useRef(null);let d,h;e[0]!==i?(d=()=>{if(!i)return;const k=function(N){c.current&&!c.current.contains(N.target)&&o(!1)};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},h=[i],e[0]=i,e[1]=d,e[2]=h):(d=e[1],h=e[2]),F.useEffect(d,h);let g,m;if(e[3]!==i?(g=()=>{if(!i)return;const k=function(N){N.key==="Escape"&&o(!1)};return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)},m=[i],e[3]=i,e[4]=g,e[5]=m):(g=e[4],m=e[5]),F.useEffect(g,m),n.length===0)return null;let b;e[6]!==i?(b=()=>o(!i),e[6]=i,e[7]=b):b=e[7];let y;e[8]===Symbol.for("react.memo_cache_sentinel")?(y=f.jsx(x7,{size:18}),e[8]=y):y=e[8];let w;e[9]!==b?(w=f.jsx("button",{onClick:b,className:"p-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded-md transition-colors focus:outline-none",title:"Toggle columns",children:y}),e[9]=b,e[10]=w):w=e[10];let x;e[11]!==n||e[12]!==s||e[13]!==i||e[14]!==r?(x=i&&f.jsx("div",{className:"absolute right-0 z-50 mt-1 p-2 bg-white border border-neutral-300 dark:bg-neutral-900 dark:border-neutral-700 rounded-lg shadow-xl min-w-45 max-h-75 overflow-y-auto",children:n.map(k=>{const C=!s.has(k.name.toLowerCase());return f.jsxs("label",{className:"flex items-center gap-2 px-2 py-1.5 cursor-pointer rounded hover:bg-neutral-100 dark:hover:bg-neutral-800",children:[f.jsx("span",{onClick:()=>r(k.name),className:`size-4 rounded border flex items-center justify-center cursor-pointer transition-colors ${C?"bg-neutral-500 border-neutral-500 dark:bg-neutral-600 dark:border-neutral-500":"border-neutral-300 bg-white dark:border-neutral-600 dark:bg-neutral-800"}`,children:C&&f.jsx(bn,{size:12,className:"text-white dark:text-neutral-300"})}),f.jsx("span",{onClick:()=>r(k.name),className:"text-sm text-neutral-700 dark:text-neutral-400 cursor-pointer",children:k.name})]},k.name)})}),e[11]=n,e[12]=s,e[13]=i,e[14]=r,e[15]=x):x=e[15];let S;return e[16]!==w||e[17]!==x?(S=f.jsxs("div",{className:"relative",ref:c,children:[w,x]}),e[16]=w,e[17]=x,e[18]=S):S=e[18],S}const jh="detail";function XT(t){const e=Me.c(72),{config:n,title:s,namespace:r,data:i,loading:o,error:c,refetch:d,isRefetching:h,showDetailPanel:g,renderDetailPanel:m,renderHeaderActions:b,renderExtraPanels:y}=t,w=h===void 0?!1:h,x=g===void 0?!0:g;let S;e[0]===Symbol.for("react.memo_cache_sentinel")?(S=[],e[0]=S):S=e[0];const[k,C]=F.useState(S),[N,R]=F.useState(null),[B,E]=F.useState(n),[z,U]=F.useState(r),{hiddenColumns:Y,toggleColumn:D}=S$(),{isOpen:W,open:V,close:q}=OS();let X,I;if(e[1]!==q||e[2]!==k||e[3]!==n||e[4]!==i||e[5]!==c||e[6]!==Y||e[7]!==W||e[8]!==w||e[9]!==o||e[10]!==r||e[11]!==V||e[12]!==d||e[13]!==y||e[14]!==b||e[15]!==N||e[16]!==x||e[17]!==s||e[18]!==D||e[19]!==B||e[20]!==z){const G=W(jh);(n!==B||r!==z)&&(E(n),U(r),R(null),q(jh));let P;e[23]!==q||e[24]!==V||e[25]!==x?(P=bt=>{R(bt),bt&&x?V(jh):q(jh)},e[23]=q,e[24]=V,e[25]=x,e[26]=P):P=e[26];const T=P;let O;e[27]===Symbol.for("react.memo_cache_sentinel")?(O=bt=>{C(bt)},e[27]=O):O=e[27];const K=O,Z=`shrink-0 h-14 flex items-center justify-between px-5 mt-2 transition-all duration-300 ${G?"pr-[40rem]":""}`;let le;e[28]!==s?(le=f.jsx("h2",{className:"text-lg font-medium text-neutral-900 dark:text-neutral-100",children:s}),e[28]=s,e[29]=le):le=e[29];let te;e[30]!==r?(te=r&&f.jsx("span",{className:"px-2.5 py-0.5 rounded-md text-xs bg-neutral-200/80 text-neutral-500 dark:bg-neutral-800 dark:text-neutral-400",children:r}),e[30]=r,e[31]=te):te=e[31];let pe;e[32]!==te||e[33]!==le?(pe=f.jsxs("div",{className:"flex items-center gap-4",children:[le,te]}),e[32]=te,e[33]=le,e[34]=pe):pe=e[34];let _e;e[35]===Symbol.for("react.memo_cache_sentinel")?(_e=f.jsx("button",{onClick:R$,className:"p-2 rounded-md text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 transition-colors",title:"Command Palette (K)",children:f.jsx(jS,{size:18})}),e[35]=_e):_e=e[35];let Ce;e[36]!==k||e[37]!==Y||e[38]!==D?(Ce=f.jsx(T$,{columns:k,hiddenColumns:Y,onToggleColumn:D}),e[36]=k,e[37]=Y,e[38]=D,e[39]=Ce):Ce=e[39];let tt;e[40]!==k||e[41]!==b?(tt=b?.(k),e[40]=k,e[41]=b,e[42]=tt):tt=e[42];let Ee;e[43]!==Ce||e[44]!==tt?(Ee=f.jsxs("div",{className:"flex items-center gap-2",children:[_e,Ce,tt]}),e[43]=Ce,e[44]=tt,e[45]=Ee):Ee=e[45];let Je;e[46]!==pe||e[47]!==Ee||e[48]!==Z?(Je=f.jsxs("header",{className:Z,children:[pe,Ee]}),e[46]=pe,e[47]=Ee,e[48]=Z,e[49]=Je):Je=e[49];let Ue;e[50]!==n||e[51]!==i||e[52]!==c||e[53]!==T||e[54]!==Y||e[55]!==w||e[56]!==o||e[57]!==r||e[58]!==d||e[59]!==N?(Ue=f.jsx("section",{className:"flex-1 min-h-0 overflow-hidden",children:f.jsx(E$,{config:n,data:i,loading:o,error:c,refetch:d,isRefetching:w,hiddenColumns:Y,onColumnsLoaded:K,selectedItem:N,onSelectItem:T,namespace:r})}),e[50]=n,e[51]=i,e[52]=c,e[53]=T,e[54]=Y,e[55]=w,e[56]=o,e[57]=r,e[58]=d,e[59]=N,e[60]=Ue):Ue=e[60],e[61]!==Je||e[62]!==Ue?(X=f.jsxs("main",{className:"flex-1 flex flex-col h-full min-w-0",children:[Je,Ue]}),e[61]=Je,e[62]=Ue,e[63]=X):X=e[63],I=y?.(N,G),e[1]=q,e[2]=k,e[3]=n,e[4]=i,e[5]=c,e[6]=Y,e[7]=W,e[8]=w,e[9]=o,e[10]=r,e[11]=V,e[12]=d,e[13]=y,e[14]=b,e[15]=N,e[16]=x,e[17]=s,e[18]=D,e[19]=B,e[20]=z,e[21]=X,e[22]=I}else X=e[21],I=e[22];let L;e[64]!==q||e[65]!==m||e[66]!==N?(L=m&&N&&m(N,()=>{R(null),q(jh)},!1),e[64]=q,e[65]=m,e[66]=N,e[67]=L):L=e[67];let J;return e[68]!==X||e[69]!==I||e[70]!==L?(J=f.jsxs(f.Fragment,{children:[X,I,L]}),e[68]=X,e[69]=I,e[70]=L,e[71]=J):J=e[71],J}function R$(){const t=new KeyboardEvent("keydown",{key:"k",metaKey:!0,ctrlKey:!0,bubbles:!0});document.dispatchEvent(t)}function at(t,e,n,s,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function ce(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)}let JT=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return JT=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^n()&15>>+s/4).toString(16))};function Ux(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Vx=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Xe extends Error{}class is extends Xe{constructor(e,n,s,r){super(`${is.makeMessage(e,n,s)}`),this.status=e,this.headers=r,this.requestID=r?.get("x-request-id"),this.error=n;const i=n;this.code=i?.code,this.param=i?.param,this.type=i?.type}static makeMessage(e,n,s){const r=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):s;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,s,r){if(!e||!r)return new Lg({message:s,cause:Vx(n)});const i=n?.error;return e===400?new QT(e,i,s,r):e===401?new ZT(e,i,s,r):e===403?new eR(e,i,s,r):e===404?new tR(e,i,s,r):e===409?new nR(e,i,s,r):e===422?new sR(e,i,s,r):e===429?new rR(e,i,s,r):e>=500?new iR(e,i,s,r):new is(e,i,s,r)}}class Tr extends is{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Lg extends is{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class MS extends Lg{constructor({message:e}={}){super({message:e??"Request timed out."})}}class QT extends is{}class ZT extends is{}class eR extends is{}class tR extends is{}class nR extends is{}class sR extends is{}class rR extends is{}class iR extends is{}class aR extends Xe{constructor(){super("Could not parse response content as the length limit was reached")}}class oR extends Xe{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Wh extends Error{constructor(e){super(e)}}const O$=/^[a-z][a-z0-9+.-]*:/i,M$=t=>O$.test(t);let Hs=t=>(Hs=Array.isArray,Hs(t)),n5=Hs;function lR(t){return typeof t!="object"?{}:t??{}}function B$(t){if(!t)return!0;for(const e in t)return!1;return!0}function D$(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Nv(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const L$=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Xe(`${t} must be an integer`);if(e<0)throw new Xe(`${t} must be a positive integer`);return e},I$=t=>{try{return JSON.parse(t)}catch{return}},Cf=t=>new Promise(e=>setTimeout(e,t)),Ac="6.15.0",P$=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function $$(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const z$=()=>{const t=$$();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ac,"X-Stainless-OS":r5(Deno.build.os),"X-Stainless-Arch":s5(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ac,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ac,"X-Stainless-OS":r5(globalThis.process.platform??"unknown"),"X-Stainless-Arch":s5(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=H$();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ac,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ac,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function H$(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const s=n.exec(navigator.userAgent);if(s){const r=s[1]||0,i=s[2]||0,o=s[3]||0;return{browser:e,version:`${r}.${i}.${o}`}}}return null}const s5=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",r5=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let i5;const U$=()=>i5??(i5=z$());function V$(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function cR(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function uR(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return cR({start(){},async pull(n){const{done:s,value:r}=await e.next();s?n.close():n.enqueue(r)},async cancel(){await e.return?.()}})}function hR(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function F$(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const q$=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),dR="RFC3986",fR=t=>String(t),a5={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:fR},K$="RFC1738";let Fx=(t,e)=>(Fx=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Fx(t,e));const oi=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),Av=1024,W$=(t,e,n,s,r)=>{if(t.length===0)return t;let i=t;if(typeof t=="symbol"?i=Symbol.prototype.toString.call(t):typeof t!="string"&&(i=String(t)),n==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});let o="";for(let c=0;c<i.length;c+=Av){const d=i.length>=Av?i.slice(c,c+Av):i,h=[];for(let g=0;g<d.length;++g){let m=d.charCodeAt(g);if(m===45||m===46||m===95||m===126||m>=48&&m<=57||m>=65&&m<=90||m>=97&&m<=122||r===K$&&(m===40||m===41)){h[h.length]=d.charAt(g);continue}if(m<128){h[h.length]=oi[m];continue}if(m<2048){h[h.length]=oi[192|m>>6]+oi[128|m&63];continue}if(m<55296||m>=57344){h[h.length]=oi[224|m>>12]+oi[128|m>>6&63]+oi[128|m&63];continue}g+=1,m=65536+((m&1023)<<10|d.charCodeAt(g)&1023),h[h.length]=oi[240|m>>18]+oi[128|m>>12&63]+oi[128|m>>6&63]+oi[128|m&63]}o+=h.join("")}return o};function G$(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function o5(t,e){if(Hs(t)){const n=[];for(let s=0;s<t.length;s+=1)n.push(e(t[s]));return n}return e(t)}const pR={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},mR=function(t,e){Array.prototype.push.apply(t,Hs(e)?e:[e])};let l5;const Bn={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:W$,encodeValuesOnly:!1,format:dR,formatter:fR,indices:!1,serializeDate(t){return(l5??(l5=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function Y$(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const Ev={};function gR(t,e,n,s,r,i,o,c,d,h,g,m,b,y,w,x,S,k){let C=t,N=k,R=0,B=!1;for(;(N=N.get(Ev))!==void 0&&!B;){const D=N.get(t);if(R+=1,typeof D<"u"){if(D===R)throw new RangeError("Cyclic object value");B=!0}typeof N.get(Ev)>"u"&&(R=0)}if(typeof h=="function"?C=h(e,C):C instanceof Date?C=b?.(C):n==="comma"&&Hs(C)&&(C=o5(C,function(D){return D instanceof Date?b?.(D):D})),C===null){if(i)return d&&!x?d(e,Bn.encoder,S,"key",y):e;C=""}if(Y$(C)||G$(C)){if(d){const D=x?e:d(e,Bn.encoder,S,"key",y);return[w?.(D)+"="+w?.(d(C,Bn.encoder,S,"value",y))]}return[w?.(e)+"="+w?.(String(C))]}const E=[];if(typeof C>"u")return E;let z;if(n==="comma"&&Hs(C))x&&d&&(C=o5(C,d)),z=[{value:C.length>0?C.join(",")||null:void 0}];else if(Hs(h))z=h;else{const D=Object.keys(C);z=g?D.sort(g):D}const U=c?String(e).replace(/\./g,"%2E"):String(e),Y=s&&Hs(C)&&C.length===1?U+"[]":U;if(r&&Hs(C)&&C.length===0)return Y+"[]";for(let D=0;D<z.length;++D){const W=z[D],V=typeof W=="object"&&typeof W.value<"u"?W.value:C[W];if(o&&V===null)continue;const q=m&&c?W.replace(/\./g,"%2E"):W,X=Hs(C)?typeof n=="function"?n(Y,q):Y:Y+(m?"."+q:"["+q+"]");k.set(t,R);const I=new WeakMap;I.set(Ev,k),mR(E,gR(V,X,n,s,r,i,o,c,n==="comma"&&x&&Hs(C)?null:d,h,g,m,b,y,w,x,S,I))}return E}function X$(t=Bn){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Bn.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=dR;if(typeof t.format<"u"){if(!Fx(a5,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const s=a5[n];let r=Bn.filter;(typeof t.filter=="function"||Hs(t.filter))&&(r=t.filter);let i;if(t.arrayFormat&&t.arrayFormat in pR?i=t.arrayFormat:"indices"in t?i=t.indices?"indices":"repeat":i=Bn.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Bn.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Bn.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Bn.allowEmptyArrays,arrayFormat:i,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Bn.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Bn.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Bn.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Bn.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Bn.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Bn.encodeValuesOnly,filter:r,format:n,formatter:s,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Bn.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Bn.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Bn.strictNullHandling}}function J$(t,e={}){let n=t;const s=X$(e);let r,i;typeof s.filter=="function"?(i=s.filter,n=i("",n)):Hs(s.filter)&&(i=s.filter,r=i);const o=[];if(typeof n!="object"||n===null)return"";const c=pR[s.arrayFormat],d=c==="comma"&&s.commaRoundTrip;r||(r=Object.keys(n)),s.sort&&r.sort(s.sort);const h=new WeakMap;for(let b=0;b<r.length;++b){const y=r[b];s.skipNulls&&n[y]===null||mR(o,gR(n[y],y,c,d,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,h))}const g=o.join(s.delimiter);let m=s.addQueryPrefix===!0?"?":"";return s.charsetSentinel&&(s.charset==="iso-8859-1"?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),g.length>0?m+g:""}function Q$(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let s=0;for(const r of t)n.set(r,s),s+=r.length;return n}let c5;function BS(t){let e;return(c5??(e=new globalThis.TextEncoder,c5=e.encode.bind(e)))(t)}let u5;function h5(t){let e;return(u5??(e=new globalThis.TextDecoder,u5=e.decode.bind(e)))(t)}var nr,sr;class Ig{constructor(){nr.set(this,void 0),sr.set(this,void 0),at(this,nr,new Uint8Array),at(this,sr,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?BS(e):e;at(this,nr,Q$([ce(this,nr,"f"),n]));const s=[];let r;for(;(r=Z$(ce(this,nr,"f"),ce(this,sr,"f")))!=null;){if(r.carriage&&ce(this,sr,"f")==null){at(this,sr,r.index);continue}if(ce(this,sr,"f")!=null&&(r.index!==ce(this,sr,"f")+1||r.carriage)){s.push(h5(ce(this,nr,"f").subarray(0,ce(this,sr,"f")-1))),at(this,nr,ce(this,nr,"f").subarray(ce(this,sr,"f"))),at(this,sr,null);continue}const i=ce(this,sr,"f")!==null?r.preceding-1:r.preceding,o=h5(ce(this,nr,"f").subarray(0,i));s.push(o),at(this,nr,ce(this,nr,"f").subarray(r.index)),at(this,sr,null)}return s}flush(){return ce(this,nr,"f").length?this.decode(`
`):[]}}nr=new WeakMap,sr=new WeakMap;Ig.NEWLINE_CHARS=new Set([`
`,"\r"]);Ig.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Z$(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function ez(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}const N0={off:0,error:200,warn:300,info:400,debug:500},d5=(t,e,n)=>{if(t){if(D$(N0,t))return t;Zn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(N0))}`)}};function Gh(){}function mm(t,e,n){return!e||N0[t]>N0[n]?Gh:e[t].bind(e)}const tz={error:Gh,warn:Gh,info:Gh,debug:Gh};let f5=new WeakMap;function Zn(t){const e=t.logger,n=t.logLevel??"off";if(!e)return tz;const s=f5.get(e);if(s&&s[0]===n)return s[1];const r={error:mm("error",e,n),warn:mm("warn",e,n),info:mm("info",e,n),debug:mm("debug",e,n)};return f5.set(e,[n,r]),r}const Io=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Th;class pi{constructor(e,n,s){this.iterator=e,Th.set(this,void 0),this.controller=n,at(this,Th,s)}static fromSSEResponse(e,n,s){let r=!1;const i=s?Zn(s):console;async function*o(){if(r)throw new Xe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let c=!1;try{for await(const d of nz(e,n))if(!c){if(d.data.startsWith("[DONE]")){c=!0;continue}if(d.event===null||!d.event.startsWith("thread.")){let h;try{h=JSON.parse(d.data)}catch(g){throw i.error("Could not parse message into JSON:",d.data),i.error("From chunk:",d.raw),g}if(h&&h.error)throw new is(void 0,h.error,void 0,e.headers);yield h}else{let h;try{h=JSON.parse(d.data)}catch(g){throw console.error("Could not parse message into JSON:",d.data),console.error("From chunk:",d.raw),g}if(d.event=="error")throw new is(void 0,h.error,h.message,void 0);yield{event:d.event,data:h}}}c=!0}catch(d){if(Ux(d))return;throw d}finally{c||n.abort()}}return new pi(o,n,s)}static fromReadableStream(e,n,s){let r=!1;async function*i(){const c=new Ig,d=hR(e);for await(const h of d)for(const g of c.decode(h))yield g;for(const h of c.flush())yield h}async function*o(){if(r)throw new Xe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let c=!1;try{for await(const d of i())c||d&&(yield JSON.parse(d));c=!0}catch(d){if(Ux(d))return;throw d}finally{c||n.abort()}}return new pi(o,n,s)}[(Th=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],s=this.iterator(),r=i=>({next:()=>{if(i.length===0){const o=s.next();e.push(o),n.push(o)}return i.shift()}});return[new pi(()=>r(e),this.controller,ce(this,Th,"f")),new pi(()=>r(n),this.controller,ce(this,Th,"f"))]}toReadableStream(){const e=this;let n;return cR({async start(){n=e[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:i}=await n.next();if(i)return s.close();const o=BS(JSON.stringify(r)+`
`);s.enqueue(o)}catch(r){s.error(r)}},async cancel(){await n.return?.()}})}}async function*nz(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Xe("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Xe("Attempted to iterate over a response with no body");const n=new rz,s=new Ig,r=hR(t.body);for await(const i of sz(r))for(const o of s.decode(i)){const c=n.decode(o);c&&(yield c)}for(const i of s.flush()){const o=n.decode(i);o&&(yield o)}}async function*sz(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const s=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?BS(n):n;let r=new Uint8Array(e.length+s.length);r.set(e),r.set(s,e.length),e=r;let i;for(;(i=ez(e))!==-1;)yield e.slice(0,i),e=e.slice(i)}e.length>0&&(yield e)}class rz{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,s,r]=iz(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function iz(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function yR(t,e){const{response:n,requestLogID:s,retryOfRequestLogID:r,startTime:i}=e,o=await(async()=>{if(e.options.stream)return Zn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):pi.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const d=n.headers.get("content-type")?.split(";")[0]?.trim();if(d?.includes("application/json")||d?.endsWith("+json")){const m=await n.json();return bR(m,n)}return await n.text()})();return Zn(t).debug(`[${s}] response parsed`,Io({retryOfRequestLogID:r,url:n.url,status:n.status,body:o,durationMs:Date.now()-i})),o}function bR(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var Yh;class Pg extends Promise{constructor(e,n,s=yR){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=s,Yh.set(this,void 0),at(this,Yh,e)}_thenUnwrap(e){return new Pg(ce(this,Yh,"f"),this.responsePromise,async(n,s)=>bR(e(await this.parseResponse(n,s),s),s.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(ce(this,Yh,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}Yh=new WeakMap;var gm;class DS{constructor(e,n,s,r){gm.set(this,void 0),at(this,gm,e),this.options=r,this.response=n,this.body=s}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Xe("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await ce(this,gm,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(gm=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class az extends Pg{constructor(e,n,s){super(e,n,async(r,i)=>new s(r,i.response,await yR(r,i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class $g extends DS{constructor(e,n,s,r){super(e,n,s,r),this.data=s.data||[],this.object=s.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class jn extends DS{constructor(e,n,s,r){super(e,n,s,r),this.data=s.data||[],this.has_more=s.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),n=e[e.length-1]?.id;return n?{...this.options,query:{...lR(this.options.query),after:n}}:null}}class A0 extends DS{constructor(e,n,s,r){super(e,n,s,r),this.data=s.data||[],this.has_more=s.has_more||!1,this.last_id=s.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...lR(this.options.query),after:e}}:null}}const vR=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function jd(t,e,n){return vR(),new File(t,e??"unknown_file",n)}function Ym(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const LS=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",p5=async(t,e)=>qx(t.body)?{...t,body:await xR(t.body,e)}:t,rl=async(t,e)=>({...t,body:await xR(t.body,e)}),m5=new WeakMap;function oz(t){const e=typeof t=="function"?t:t.fetch,n=m5.get(e);if(n)return n;const s=(async()=>{try{const r="Response"in e?e.Response:(await e("data:,")).constructor,i=new FormData;return i.toString()!==await new r(i).text()}catch{return!0}})();return m5.set(e,s),s}const xR=async(t,e)=>{if(!await oz(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([s,r])=>Kx(n,s,r))),n},_R=t=>t instanceof Blob&&"name"in t,lz=t=>typeof t=="object"&&t!==null&&(t instanceof Response||LS(t)||_R(t)),qx=t=>{if(lz(t))return!0;if(Array.isArray(t))return t.some(qx);if(t&&typeof t=="object"){for(const e in t)if(qx(t[e]))return!0}return!1},Kx=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,jd([await n.blob()],Ym(n)));else if(LS(n))t.append(e,jd([await new Response(uR(n)).blob()],Ym(n)));else if(_R(n))t.append(e,n,Ym(n));else if(Array.isArray(n))await Promise.all(n.map(s=>Kx(t,e+"[]",s)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([s,r])=>Kx(t,`${e}[${s}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},wR=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",cz=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&wR(t),uz=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function hz(t,e,n){if(vR(),t=await t,cz(t))return t instanceof File?t:jd([await t.arrayBuffer()],t.name);if(uz(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),jd(await Wx(r),e,n)}const s=await Wx(t);if(e||(e=Ym(t)),!n?.type){const r=s.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof r=="string"&&(n={...n,type:r})}return jd(s,e,n)}async function Wx(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(wR(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(LS(t))for await(const n of t)e.push(...await Wx(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${dz(t)}`)}return e}function dz(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class Ge{constructor(e){this._client=e}}function SR(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const g5=Object.freeze(Object.create(null)),fz=(t=SR)=>function(n,...s){if(n.length===1)return n[0];let r=!1;const i=[],o=n.reduce((g,m,b)=>{/[?#]/.test(m)&&(r=!0);const y=s[b];let w=(r?encodeURIComponent:t)(""+y);return b!==s.length&&(y==null||typeof y=="object"&&y.toString===Object.getPrototypeOf(Object.getPrototypeOf(y.hasOwnProperty??g5)??g5)?.toString)&&(w=y+"",i.push({start:g.length+m.length,length:w.length,error:`Value of type ${Object.prototype.toString.call(y).slice(8,-1)} is not a valid path parameter`})),g+m+(b===s.length?"":w)},""),c=o.split(/[?#]/,1)[0],d=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=d.exec(c))!==null;)i.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(i.sort((g,m)=>g.start-m.start),i.length>0){let g=0;const m=i.reduce((b,y)=>{const w=" ".repeat(y.start-g),x="^".repeat(y.length);return g=y.start+y.length,b+w+x},"");throw new Xe(`Path parameters result in path with invalid segments:
${i.map(b=>b.error).join(`
`)}
${o}
${m}`)}return o},ke=fz(SR);let kR=class extends Ge{list(e,n={},s){return this._client.getAPIList(ke`/chat/completions/${e}/messages`,jn,{query:n,...s})}};function E0(t){return t!==void 0&&"function"in t&&t.function!==void 0}function IS(t){return t?.$brand==="auto-parseable-response-format"}function Nf(t){return t?.$brand==="auto-parseable-tool"}function pz(t,e){return!e||!CR(e)?{...t,choices:t.choices.map(n=>(NR(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:PS(t,e)}function PS(t,e){const n=t.choices.map(s=>{if(s.finish_reason==="length")throw new aR;if(s.finish_reason==="content_filter")throw new oR;return NR(s.message.tool_calls),{...s,message:{...s.message,...s.message.tool_calls?{tool_calls:s.message.tool_calls?.map(r=>gz(e,r))??void 0}:void 0,parsed:s.message.content&&!s.message.refusal?mz(e,s.message.content):null}}});return{...t,choices:n}}function mz(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function gz(t,e){const n=t.tools?.find(s=>E0(s)&&s.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:Nf(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function yz(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const n=t.tools?.find(s=>E0(s)&&s.function?.name===e.function.name);return E0(n)&&(Nf(n)||n?.function.strict||!1)}function CR(t){return IS(t.response_format)?!0:t.tools?.some(e=>Nf(e)||e.type==="function"&&e.function.strict===!0)??!1}function NR(t){for(const e of t||[])if(e.type!=="function")throw new Xe(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function bz(t){for(const e of t??[]){if(e.type!=="function")throw new Xe(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Xe(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const j0=t=>t?.role==="assistant",AR=t=>t?.role==="tool";var Gx,Xm,Jm,Xh,Jh,Qm,Qh,Yi,Zh,T0,R0,Ec,ER;class $S{constructor(){Gx.add(this),this.controller=new AbortController,Xm.set(this,void 0),Jm.set(this,()=>{}),Xh.set(this,()=>{}),Jh.set(this,void 0),Qm.set(this,()=>{}),Qh.set(this,()=>{}),Yi.set(this,{}),Zh.set(this,!1),T0.set(this,!1),R0.set(this,!1),Ec.set(this,!1),at(this,Xm,new Promise((e,n)=>{at(this,Jm,e,"f"),at(this,Xh,n,"f")})),at(this,Jh,new Promise((e,n)=>{at(this,Qm,e,"f"),at(this,Qh,n,"f")})),ce(this,Xm,"f").catch(()=>{}),ce(this,Jh,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},ce(this,Gx,"m",ER).bind(this))},0)}_connected(){this.ended||(ce(this,Jm,"f").call(this),this._emit("connect"))}get ended(){return ce(this,Zh,"f")}get errored(){return ce(this,T0,"f")}get aborted(){return ce(this,R0,"f")}abort(){this.controller.abort()}on(e,n){return(ce(this,Yi,"f")[e]||(ce(this,Yi,"f")[e]=[])).push({listener:n}),this}off(e,n){const s=ce(this,Yi,"f")[e];if(!s)return this;const r=s.findIndex(i=>i.listener===n);return r>=0&&s.splice(r,1),this}once(e,n){return(ce(this,Yi,"f")[e]||(ce(this,Yi,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,s)=>{at(this,Ec,!0),e!=="error"&&this.once("error",s),this.once(e,n)})}async done(){at(this,Ec,!0),await ce(this,Jh,"f")}_emit(e,...n){if(ce(this,Zh,"f"))return;e==="end"&&(at(this,Zh,!0),ce(this,Qm,"f").call(this));const s=ce(this,Yi,"f")[e];if(s&&(ce(this,Yi,"f")[e]=s.filter(r=>!r.once),s.forEach(({listener:r})=>r(...n))),e==="abort"){const r=n[0];!ce(this,Ec,"f")&&!s?.length&&Promise.reject(r),ce(this,Xh,"f").call(this,r),ce(this,Qh,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=n[0];!ce(this,Ec,"f")&&!s?.length&&Promise.reject(r),ce(this,Xh,"f").call(this,r),ce(this,Qh,"f").call(this,r),this._emit("end")}}_emitFinal(){}}Xm=new WeakMap,Jm=new WeakMap,Xh=new WeakMap,Jh=new WeakMap,Qm=new WeakMap,Qh=new WeakMap,Yi=new WeakMap,Zh=new WeakMap,T0=new WeakMap,R0=new WeakMap,Ec=new WeakMap,Gx=new WeakSet,ER=function(e){if(at(this,T0,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Tr),e instanceof Tr)return at(this,R0,!0),this._emit("abort",e);if(e instanceof Xe)return this._emit("error",e);if(e instanceof Error){const n=new Xe(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Xe(String(e)))};function vz(t){return typeof t.parse=="function"}var xs,Yx,O0,Xx,Jx,Qx,jR,TR;const xz=10;class RR extends $S{constructor(){super(...arguments),xs.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),AR(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(j0(e)&&e.tool_calls)for(const s of e.tool_calls)s.type==="function"&&this._emit("functionToolCall",s.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Xe("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),ce(this,xs,"m",Yx).call(this)}async finalMessage(){return await this.done(),ce(this,xs,"m",O0).call(this)}async finalFunctionToolCall(){return await this.done(),ce(this,xs,"m",Xx).call(this)}async finalFunctionToolCallResult(){return await this.done(),ce(this,xs,"m",Jx).call(this)}async totalUsage(){return await this.done(),ce(this,xs,"m",Qx).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=ce(this,xs,"m",O0).call(this);n&&this._emit("finalMessage",n);const s=ce(this,xs,"m",Yx).call(this);s&&this._emit("finalContent",s);const r=ce(this,xs,"m",Xx).call(this);r&&this._emit("finalFunctionToolCall",r);const i=ce(this,xs,"m",Jx).call(this);i!=null&&this._emit("finalFunctionToolCallResult",i),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",ce(this,xs,"m",Qx).call(this))}async _createChatCompletion(e,n,s){const r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),ce(this,xs,"m",jR).call(this,n);const i=await e.chat.completions.create({...n,stream:!1},{...s,signal:this.controller.signal});return this._connected(),this._addChatCompletion(PS(i,n))}async _runChatCompletion(e,n,s){for(const r of n.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,n,s)}async _runTools(e,n,s){const r="tool",{tool_choice:i="auto",stream:o,...c}=n,d=typeof i!="string"&&i.type==="function"&&i?.function?.name,{maxChatCompletions:h=xz}=s||{},g=n.tools.map(y=>{if(Nf(y)){if(!y.$callback)throw new Xe("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:y.$callback,name:y.function.name,description:y.function.description||"",parameters:y.function.parameters,parse:y.$parseRaw,strict:!0}}}return y}),m={};for(const y of g)y.type==="function"&&(m[y.function.name||y.function.function.name]=y.function);const b="tools"in n?g.map(y=>y.type==="function"?{type:"function",function:{name:y.function.name||y.function.function.name,parameters:y.function.parameters,description:y.function.description,strict:y.function.strict}}:y):void 0;for(const y of n.messages)this._addMessage(y,!1);for(let y=0;y<h;++y){const x=(await this._createChatCompletion(e,{...c,tool_choice:i,tools:b,messages:[...this.messages]},s)).choices[0]?.message;if(!x)throw new Xe("missing message in ChatCompletion response");if(!x.tool_calls?.length)return;for(const S of x.tool_calls){if(S.type!=="function")continue;const k=S.id,{name:C,arguments:N}=S.function,R=m[C];if(R){if(d&&d!==C){const U=`Invalid tool_call: ${JSON.stringify(C)}. ${JSON.stringify(d)} requested. Please try again`;this._addMessage({role:r,tool_call_id:k,content:U});continue}}else{const U=`Invalid tool_call: ${JSON.stringify(C)}. Available options are: ${Object.keys(m).map(Y=>JSON.stringify(Y)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:k,content:U});continue}let B;try{B=vz(R)?await R.parse(N):N}catch(U){const Y=U instanceof Error?U.message:String(U);this._addMessage({role:r,tool_call_id:k,content:Y});continue}const E=await R.function(B,this),z=ce(this,xs,"m",TR).call(this,E);if(this._addMessage({role:r,tool_call_id:k,content:z}),d)return}}}}xs=new WeakSet,Yx=function(){return ce(this,xs,"m",O0).call(this).content??null},O0=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(j0(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new Xe("stream ended without producing a ChatCompletionMessage with role=assistant")},Xx=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(j0(n)&&n?.tool_calls?.length)return n.tool_calls.filter(s=>s.type==="function").at(-1)?.function}},Jx=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(AR(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(s=>s.role==="assistant"&&s.tool_calls?.some(r=>r.type==="function"&&r.id===n.tool_call_id)))return n.content}},Qx=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},jR=function(e){if(e.n!=null&&e.n>1)throw new Xe("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},TR=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class zS extends RR{static runTools(e,n,s){const r=new zS,i={...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,n,i)),r}_addMessage(e,n=!0){super._addMessage(e,n),j0(e)&&e.content&&this._emit("content",e.content)}}const OR=1,MR=2,BR=4,DR=8,LR=16,IR=32,PR=64,$R=128,zR=256,HR=$R|zR,UR=LR|IR|HR|PR,VR=OR|MR|UR,FR=BR|DR,_z=VR|FR,Hn={STR:OR,NUM:MR,ARR:BR,OBJ:DR,NULL:LR,BOOL:IR,NAN:PR,INFINITY:$R,MINUS_INFINITY:zR,INF:HR,SPECIAL:UR,ATOM:VR,COLLECTION:FR,ALL:_z};class wz extends Error{}class Sz extends Error{}function kz(t,e=Hn.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return Cz(t.trim(),e)}const Cz=(t,e)=>{const n=t.length;let s=0;const r=b=>{throw new wz(`${b} at position ${s}`)},i=b=>{throw new Sz(`${b} at position ${s}`)},o=()=>(m(),s>=n&&r("Unexpected end of input"),t[s]==='"'?c():t[s]==="{"?d():t[s]==="["?h():t.substring(s,s+4)==="null"||Hn.NULL&e&&n-s<4&&"null".startsWith(t.substring(s))?(s+=4,null):t.substring(s,s+4)==="true"||Hn.BOOL&e&&n-s<4&&"true".startsWith(t.substring(s))?(s+=4,!0):t.substring(s,s+5)==="false"||Hn.BOOL&e&&n-s<5&&"false".startsWith(t.substring(s))?(s+=5,!1):t.substring(s,s+8)==="Infinity"||Hn.INFINITY&e&&n-s<8&&"Infinity".startsWith(t.substring(s))?(s+=8,1/0):t.substring(s,s+9)==="-Infinity"||Hn.MINUS_INFINITY&e&&1<n-s&&n-s<9&&"-Infinity".startsWith(t.substring(s))?(s+=9,-1/0):t.substring(s,s+3)==="NaN"||Hn.NAN&e&&n-s<3&&"NaN".startsWith(t.substring(s))?(s+=3,NaN):g()),c=()=>{const b=s;let y=!1;for(s++;s<n&&(t[s]!=='"'||y&&t[s-1]==="\\");)y=t[s]==="\\"?!y:!1,s++;if(t.charAt(s)=='"')try{return JSON.parse(t.substring(b,++s-Number(y)))}catch(w){i(String(w))}else if(Hn.STR&e)try{return JSON.parse(t.substring(b,s-Number(y))+'"')}catch{return JSON.parse(t.substring(b,t.lastIndexOf("\\"))+'"')}r("Unterminated string literal")},d=()=>{s++,m();const b={};try{for(;t[s]!=="}";){if(m(),s>=n&&Hn.OBJ&e)return b;const y=c();m(),s++;try{const w=o();Object.defineProperty(b,y,{value:w,writable:!0,enumerable:!0,configurable:!0})}catch(w){if(Hn.OBJ&e)return b;throw w}m(),t[s]===","&&s++}}catch{if(Hn.OBJ&e)return b;r("Expected '}' at end of object")}return s++,b},h=()=>{s++;const b=[];try{for(;t[s]!=="]";)b.push(o()),m(),t[s]===","&&s++}catch{if(Hn.ARR&e)return b;r("Expected ']' at end of array")}return s++,b},g=()=>{if(s===0){t==="-"&&Hn.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(t)}catch(y){if(Hn.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}i(String(y))}}const b=s;for(t[s]==="-"&&s++;t[s]&&!",]}".includes(t[s]);)s++;s==n&&!(Hn.NUM&e)&&r("Unterminated number literal");try{return JSON.parse(t.substring(b,s))}catch{t.substring(b,s)==="-"&&Hn.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(t.substring(b,t.lastIndexOf("e")))}catch(w){i(String(w))}}},m=()=>{for(;s<n&&` 
\r	`.includes(t[s]);)s++};return o()},y5=t=>kz(t,Hn.ALL^Hn.NUM);var Rn,Wi,mc,Va,jv,ym,Tv,Rv,Ov,bm,Mv,b5;class Jd extends RR{constructor(e){super(),Rn.add(this),Wi.set(this,void 0),mc.set(this,void 0),Va.set(this,void 0),at(this,Wi,e),at(this,mc,[])}get currentChatCompletionSnapshot(){return ce(this,Va,"f")}static fromReadableStream(e){const n=new Jd(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,s){const r=new Jd(n);return r._run(()=>r._runChatCompletion(e,{...n,stream:!0},{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,n,s){super._createChatCompletion;const r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),ce(this,Rn,"m",jv).call(this);const i=await e.chat.completions.create({...n,stream:!0},{...s,signal:this.controller.signal});this._connected();for await(const o of i)ce(this,Rn,"m",Tv).call(this,o);if(i.controller.signal?.aborted)throw new Tr;return this._addChatCompletion(ce(this,Rn,"m",bm).call(this))}async _fromReadableStream(e,n){const s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),ce(this,Rn,"m",jv).call(this),this._connected();const r=pi.fromReadableStream(e,this.controller);let i;for await(const o of r)i&&i!==o.id&&this._addChatCompletion(ce(this,Rn,"m",bm).call(this)),ce(this,Rn,"m",Tv).call(this,o),i=o.id;if(r.controller.signal?.aborted)throw new Tr;return this._addChatCompletion(ce(this,Rn,"m",bm).call(this))}[(Wi=new WeakMap,mc=new WeakMap,Va=new WeakMap,Rn=new WeakSet,jv=function(){this.ended||at(this,Va,void 0)},ym=function(n){let s=ce(this,mc,"f")[n.index];return s||(s={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},ce(this,mc,"f")[n.index]=s,s)},Tv=function(n){if(this.ended)return;const s=ce(this,Rn,"m",b5).call(this,n);this._emit("chunk",n,s);for(const r of n.choices){const i=s.choices[r.index];r.delta.content!=null&&i.message?.role==="assistant"&&i.message?.content&&(this._emit("content",r.delta.content,i.message.content),this._emit("content.delta",{delta:r.delta.content,snapshot:i.message.content,parsed:i.message.parsed})),r.delta.refusal!=null&&i.message?.role==="assistant"&&i.message?.refusal&&this._emit("refusal.delta",{delta:r.delta.refusal,snapshot:i.message.refusal}),r.logprobs?.content!=null&&i.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:r.logprobs?.content,snapshot:i.logprobs?.content??[]}),r.logprobs?.refusal!=null&&i.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:r.logprobs?.refusal,snapshot:i.logprobs?.refusal??[]});const o=ce(this,Rn,"m",ym).call(this,i);i.finish_reason&&(ce(this,Rn,"m",Ov).call(this,i),o.current_tool_call_index!=null&&ce(this,Rn,"m",Rv).call(this,i,o.current_tool_call_index));for(const c of r.delta.tool_calls??[])o.current_tool_call_index!==c.index&&(ce(this,Rn,"m",Ov).call(this,i),o.current_tool_call_index!=null&&ce(this,Rn,"m",Rv).call(this,i,o.current_tool_call_index)),o.current_tool_call_index=c.index;for(const c of r.delta.tool_calls??[]){const d=i.message.tool_calls?.[c.index];d?.type&&(d?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:d.function?.name,index:c.index,arguments:d.function.arguments,parsed_arguments:d.function.parsed_arguments,arguments_delta:c.function?.arguments??""}):(d?.type,void 0))}}},Rv=function(n,s){if(ce(this,Rn,"m",ym).call(this,n).done_tool_calls.has(s))return;const i=n.message.tool_calls?.[s];if(!i)throw new Error("no tool call snapshot");if(!i.type)throw new Error("tool call snapshot missing `type`");if(i.type==="function"){const o=ce(this,Wi,"f")?.tools?.find(c=>E0(c)&&c.function.name===i.function.name);this._emit("tool_calls.function.arguments.done",{name:i.function.name,index:s,arguments:i.function.arguments,parsed_arguments:Nf(o)?o.$parseRaw(i.function.arguments):o?.function.strict?JSON.parse(i.function.arguments):null})}else i.type},Ov=function(n){const s=ce(this,Rn,"m",ym).call(this,n);if(n.message.content&&!s.content_done){s.content_done=!0;const r=ce(this,Rn,"m",Mv).call(this);this._emit("content.done",{content:n.message.content,parsed:r?r.$parseRaw(n.message.content):null})}n.message.refusal&&!s.refusal_done&&(s.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!s.logprobs_content_done&&(s.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!s.logprobs_refusal_done&&(s.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},bm=function(){if(this.ended)throw new Xe("stream has ended, this shouldn't happen");const n=ce(this,Va,"f");if(!n)throw new Xe("request ended without sending any chunks");return at(this,Va,void 0),at(this,mc,[]),Nz(n,ce(this,Wi,"f"))},Mv=function(){const n=ce(this,Wi,"f")?.response_format;return IS(n)?n:null},b5=function(n){var s,r,i,o;let c=ce(this,Va,"f");const{choices:d,...h}=n;c?Object.assign(c,h):c=at(this,Va,{...h,choices:[]});for(const{delta:g,finish_reason:m,index:b,logprobs:y=null,...w}of n.choices){let x=c.choices[b];if(x||(x=c.choices[b]={finish_reason:m,index:b,message:{},logprobs:y,...w}),y)if(!x.logprobs)x.logprobs=Object.assign({},y);else{const{content:E,refusal:z,...U}=y;Object.assign(x.logprobs,U),E&&((s=x.logprobs).content??(s.content=[]),x.logprobs.content.push(...E)),z&&((r=x.logprobs).refusal??(r.refusal=[]),x.logprobs.refusal.push(...z))}if(m&&(x.finish_reason=m,ce(this,Wi,"f")&&CR(ce(this,Wi,"f")))){if(m==="length")throw new aR;if(m==="content_filter")throw new oR}if(Object.assign(x,w),!g)continue;const{content:S,refusal:k,function_call:C,role:N,tool_calls:R,...B}=g;if(Object.assign(x.message,B),k&&(x.message.refusal=(x.message.refusal||"")+k),N&&(x.message.role=N),C&&(x.message.function_call?(C.name&&(x.message.function_call.name=C.name),C.arguments&&((i=x.message.function_call).arguments??(i.arguments=""),x.message.function_call.arguments+=C.arguments)):x.message.function_call=C),S&&(x.message.content=(x.message.content||"")+S,!x.message.refusal&&ce(this,Rn,"m",Mv).call(this)&&(x.message.parsed=y5(x.message.content))),R){x.message.tool_calls||(x.message.tool_calls=[]);for(const{index:E,id:z,type:U,function:Y,...D}of R){const W=(o=x.message.tool_calls)[E]??(o[E]={});Object.assign(W,D),z&&(W.id=z),U&&(W.type=U),Y&&(W.function??(W.function={name:Y.name??"",arguments:""})),Y?.name&&(W.function.name=Y.name),Y?.arguments&&(W.function.arguments+=Y.arguments,yz(ce(this,Wi,"f"),W)&&(W.function.parsed_arguments=y5(W.function.arguments)))}}}return c},Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("chunk",r=>{const i=n.shift();i?i.resolve(r):e.push(r)}),this.on("end",()=>{s=!0;for(const r of n)r.resolve(void 0);n.length=0}),this.on("abort",r=>{s=!0;for(const i of n)i.reject(r);n.length=0}),this.on("error",r=>{s=!0;for(const i of n)i.reject(r);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((i,o)=>n.push({resolve:i,reject:o})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new pi(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Nz(t,e){const{id:n,choices:s,created:r,model:i,system_fingerprint:o,...c}=t,d={...c,id:n,choices:s.map(({message:h,finish_reason:g,index:m,logprobs:b,...y})=>{if(!g)throw new Xe(`missing finish_reason for choice ${m}`);const{content:w=null,function_call:x,tool_calls:S,...k}=h,C=h.role;if(!C)throw new Xe(`missing role for choice ${m}`);if(x){const{arguments:N,name:R}=x;if(N==null)throw new Xe(`missing function_call.arguments for choice ${m}`);if(!R)throw new Xe(`missing function_call.name for choice ${m}`);return{...y,message:{content:w,function_call:{arguments:N,name:R},role:C,refusal:h.refusal??null},finish_reason:g,index:m,logprobs:b}}return S?{...y,index:m,finish_reason:g,logprobs:b,message:{...k,role:C,content:w,refusal:h.refusal??null,tool_calls:S.map((N,R)=>{const{function:B,type:E,id:z,...U}=N,{arguments:Y,name:D,...W}=B||{};if(z==null)throw new Xe(`missing choices[${m}].tool_calls[${R}].id
${vm(t)}`);if(E==null)throw new Xe(`missing choices[${m}].tool_calls[${R}].type
${vm(t)}`);if(D==null)throw new Xe(`missing choices[${m}].tool_calls[${R}].function.name
${vm(t)}`);if(Y==null)throw new Xe(`missing choices[${m}].tool_calls[${R}].function.arguments
${vm(t)}`);return{...U,id:z,type:E,function:{...W,name:D,arguments:Y}}})}}:{...y,message:{...k,content:w,role:C,refusal:h.refusal??null},finish_reason:g,index:m,logprobs:b}}),created:r,model:i,object:"chat.completion",...o?{system_fingerprint:o}:{}};return pz(d,e)}function vm(t){return JSON.stringify(t)}class M0 extends Jd{static fromReadableStream(e){const n=new M0(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,s){const r=new M0(n),i={...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,n,i)),r}}let HS=class extends Ge{constructor(){super(...arguments),this.messages=new kR(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(ke`/chat/completions/${e}`,n)}update(e,n,s){return this._client.post(ke`/chat/completions/${e}`,{body:n,...s})}list(e={},n){return this._client.getAPIList("/chat/completions",jn,{query:e,...n})}delete(e,n){return this._client.delete(ke`/chat/completions/${e}`,n)}parse(e,n){return bz(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(s=>PS(s,e))}runTools(e,n){return e.stream?M0.runTools(this._client,e,n):zS.runTools(this._client,e,n)}stream(e,n){return Jd.createChatCompletion(this._client,e,n)}};HS.Messages=kR;class US extends Ge{constructor(){super(...arguments),this.completions=new HS(this._client)}}US.Completions=HS;const qR=Symbol("brand.privateNullableHeaders");function*Az(t){if(!t)return;if(qR in t){const{values:s,nulls:r}=t;yield*s.entries();for(const i of r)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():n5(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let s of n){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const i=n5(s[1])?s[1]:[s[1]];let o=!1;for(const c of i)c!==void 0&&(e&&!o&&(o=!0,yield[r,null]),yield[r,c])}}const Fe=t=>{const e=new Headers,n=new Set;for(const s of t){const r=new Set;for(const[i,o]of Az(s)){const c=i.toLowerCase();r.has(c)||(e.delete(i),r.add(c)),o===null?(e.delete(i),n.add(c)):(e.append(i,o),n.delete(c))}}return{[qR]:!0,values:e,nulls:n}};class KR extends Ge{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:Fe([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class WR extends Ge{create(e,n){return this._client.post("/audio/transcriptions",rl({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class GR extends Ge{create(e,n){return this._client.post("/audio/translations",rl({body:e,...n,__metadata:{model:e.model}},this._client))}}class Af extends Ge{constructor(){super(...arguments),this.transcriptions=new WR(this._client),this.translations=new GR(this._client),this.speech=new KR(this._client)}}Af.Transcriptions=WR;Af.Translations=GR;Af.Speech=KR;class YR extends Ge{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(ke`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",jn,{query:e,...n})}cancel(e,n){return this._client.post(ke`/batches/${e}/cancel`,n)}}class XR extends Ge{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:Fe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(ke`/assistants/${e}`,{...n,headers:Fe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,s){return this._client.post(ke`/assistants/${e}`,{body:n,...s,headers:Fe([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e={},n){return this._client.getAPIList("/assistants",jn,{query:e,...n,headers:Fe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(ke`/assistants/${e}`,{...n,headers:Fe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let JR=class extends Ge{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:Fe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class QR extends Ge{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:Fe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let zg=class extends Ge{constructor(){super(...arguments),this.sessions=new JR(this._client),this.transcriptionSessions=new QR(this._client)}};zg.Sessions=JR;zg.TranscriptionSessions=QR;class ZR extends Ge{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:Fe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(e,n){return this._client.post(ke`/chatkit/sessions/${e}/cancel`,{...n,headers:Fe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let e6=class extends Ge{retrieve(e,n){return this._client.get(ke`/chatkit/threads/${e}`,{...n,headers:Fe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",A0,{query:e,...n,headers:Fe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(e,n){return this._client.delete(ke`/chatkit/threads/${e}`,{...n,headers:Fe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(e,n={},s){return this._client.getAPIList(ke`/chatkit/threads/${e}/items`,A0,{query:n,...s,headers:Fe([{"OpenAI-Beta":"chatkit_beta=v1"},s?.headers])})}};class Hg extends Ge{constructor(){super(...arguments),this.sessions=new ZR(this._client),this.threads=new e6(this._client)}}Hg.Sessions=ZR;Hg.Threads=e6;class t6 extends Ge{create(e,n,s){return this._client.post(ke`/threads/${e}/messages`,{body:n,...s,headers:Fe([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}retrieve(e,n,s){const{thread_id:r}=n;return this._client.get(ke`/threads/${r}/messages/${e}`,{...s,headers:Fe([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}update(e,n,s){const{thread_id:r,...i}=n;return this._client.post(ke`/threads/${r}/messages/${e}`,{body:i,...s,headers:Fe([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n={},s){return this._client.getAPIList(ke`/threads/${e}/messages`,jn,{query:n,...s,headers:Fe([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}delete(e,n,s){const{thread_id:r}=n;return this._client.delete(ke`/threads/${r}/messages/${e}`,{...s,headers:Fe([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}class n6 extends Ge{retrieve(e,n,s){const{thread_id:r,run_id:i,...o}=n;return this._client.get(ke`/threads/${r}/runs/${i}/steps/${e}`,{query:o,...s,headers:Fe([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n,s){const{thread_id:r,...i}=n;return this._client.getAPIList(ke`/threads/${r}/runs/${e}/steps`,jn,{query:i,...s,headers:Fe([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}const Ez=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,s=new Uint8Array(n);for(let r=0;r<n;r++)s[r]=e.charCodeAt(r);return Array.from(new Float32Array(s.buffer))}};var jz={};const gc=t=>{if(typeof globalThis.process<"u")return jz?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var es,Fo,Zx,fi,Zm,Kr,qo,Bc,Ho,B0,ir,e0,t0,Td,ed,td,v5,x5,_5,w5,S5,k5,C5;class Rd extends $S{constructor(){super(...arguments),es.add(this),Zx.set(this,[]),fi.set(this,{}),Zm.set(this,{}),Kr.set(this,void 0),qo.set(this,void 0),Bc.set(this,void 0),Ho.set(this,void 0),B0.set(this,void 0),ir.set(this,void 0),e0.set(this,void 0),t0.set(this,void 0),Td.set(this,void 0)}[(Zx=new WeakMap,fi=new WeakMap,Zm=new WeakMap,Kr=new WeakMap,qo=new WeakMap,Bc=new WeakMap,Ho=new WeakMap,B0=new WeakMap,ir=new WeakMap,e0=new WeakMap,t0=new WeakMap,Td=new WeakMap,es=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("event",r=>{const i=n.shift();i?i.resolve(r):e.push(r)}),this.on("end",()=>{s=!0;for(const r of n)r.resolve(void 0);n.length=0}),this.on("abort",r=>{s=!0;for(const i of n)i.reject(r);n.length=0}),this.on("error",r=>{s=!0;for(const i of n)i.reject(r);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((i,o)=>n.push({resolve:i,reject:o})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new Fo;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=pi.fromReadableStream(e,this.controller);for await(const i of r)ce(this,es,"m",ed).call(this,i);if(r.controller.signal?.aborted)throw new Tr;return this._addRun(ce(this,es,"m",td).call(this))}toReadableStream(){return new pi(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,s,r){const i=new Fo;return i._run(()=>i._runToolAssistantStream(e,n,s,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createToolAssistantStream(e,n,s,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const o={...s,stream:!0},c=await e.submitToolOutputs(n,o,{...r,signal:this.controller.signal});this._connected();for await(const d of c)ce(this,es,"m",ed).call(this,d);if(c.controller.signal?.aborted)throw new Tr;return this._addRun(ce(this,es,"m",td).call(this))}static createThreadAssistantStream(e,n,s){const r=new Fo;return r._run(()=>r._threadAssistantStream(e,n,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,n,s,r){const i=new Fo;return i._run(()=>i._runAssistantStream(e,n,s,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}currentEvent(){return ce(this,e0,"f")}currentRun(){return ce(this,t0,"f")}currentMessageSnapshot(){return ce(this,Kr,"f")}currentRunStepSnapshot(){return ce(this,Td,"f")}async finalRunSteps(){return await this.done(),Object.values(ce(this,fi,"f"))}async finalMessages(){return await this.done(),Object.values(ce(this,Zm,"f"))}async finalRun(){if(await this.done(),!ce(this,qo,"f"))throw Error("Final run was not received.");return ce(this,qo,"f")}async _createThreadAssistantStream(e,n,s){const r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const i={...n,stream:!0},o=await e.createAndRun(i,{...s,signal:this.controller.signal});this._connected();for await(const c of o)ce(this,es,"m",ed).call(this,c);if(o.controller.signal?.aborted)throw new Tr;return this._addRun(ce(this,es,"m",td).call(this))}async _createAssistantStream(e,n,s,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const o={...s,stream:!0},c=await e.create(n,o,{...r,signal:this.controller.signal});this._connected();for await(const d of c)ce(this,es,"m",ed).call(this,d);if(c.controller.signal?.aborted)throw new Tr;return this._addRun(ce(this,es,"m",td).call(this))}static accumulateDelta(e,n){for(const[s,r]of Object.entries(n)){if(!e.hasOwnProperty(s)){e[s]=r;continue}let i=e[s];if(i==null){e[s]=r;continue}if(s==="index"||s==="type"){e[s]=r;continue}if(typeof i=="string"&&typeof r=="string")i+=r;else if(typeof i=="number"&&typeof r=="number")i+=r;else if(Nv(i)&&Nv(r))i=this.accumulateDelta(i,r);else if(Array.isArray(i)&&Array.isArray(r)){if(i.every(o=>typeof o=="string"||typeof o=="number")){i.push(...r);continue}for(const o of r){if(!Nv(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const c=o.index;if(c==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof c!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${c}`);const d=i[c];d==null?i.push(o):i[c]=this.accumulateDelta(d,o)}continue}else throw Error(`Unhandled record type: ${s}, deltaValue: ${r}, accValue: ${i}`);e[s]=i}return e}_addRun(e){return e}async _threadAssistantStream(e,n,s){return await this._createThreadAssistantStream(n,e,s)}async _runAssistantStream(e,n,s,r){return await this._createAssistantStream(n,e,s,r)}async _runToolAssistantStream(e,n,s,r){return await this._createToolAssistantStream(n,e,s,r)}}Fo=Rd,ed=function(e){if(!this.ended)switch(at(this,e0,e),ce(this,es,"m",_5).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":ce(this,es,"m",C5).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ce(this,es,"m",x5).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":ce(this,es,"m",v5).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},td=function(){if(this.ended)throw new Xe("stream has ended, this shouldn't happen");if(!ce(this,qo,"f"))throw Error("Final run has not been received");return ce(this,qo,"f")},v5=function(e){const[n,s]=ce(this,es,"m",S5).call(this,e,ce(this,Kr,"f"));at(this,Kr,n),ce(this,Zm,"f")[n.id]=n;for(const r of s){const i=n.content[r.index];i?.type=="text"&&this._emit("textCreated",i.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const r of e.data.delta.content){if(r.type=="text"&&r.text){let i=r.text,o=n.content[r.index];if(o&&o.type=="text")this._emit("textDelta",i,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=ce(this,Bc,"f")){if(ce(this,Ho,"f"))switch(ce(this,Ho,"f").type){case"text":this._emit("textDone",ce(this,Ho,"f").text,ce(this,Kr,"f"));break;case"image_file":this._emit("imageFileDone",ce(this,Ho,"f").image_file,ce(this,Kr,"f"));break}at(this,Bc,r.index)}at(this,Ho,n.content[r.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(ce(this,Bc,"f")!==void 0){const r=e.data.content[ce(this,Bc,"f")];if(r)switch(r.type){case"image_file":this._emit("imageFileDone",r.image_file,ce(this,Kr,"f"));break;case"text":this._emit("textDone",r.text,ce(this,Kr,"f"));break}}ce(this,Kr,"f")&&this._emit("messageDone",e.data),at(this,Kr,void 0)}},x5=function(e){const n=ce(this,es,"m",w5).call(this,e);switch(at(this,Td,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const s=e.data.delta;if(s.step_details&&s.step_details.type=="tool_calls"&&s.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const i of s.step_details.tool_calls)i.index==ce(this,B0,"f")?this._emit("toolCallDelta",i,n.step_details.tool_calls[i.index]):(ce(this,ir,"f")&&this._emit("toolCallDone",ce(this,ir,"f")),at(this,B0,i.index),at(this,ir,n.step_details.tool_calls[i.index]),ce(this,ir,"f")&&this._emit("toolCallCreated",ce(this,ir,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":at(this,Td,void 0),e.data.step_details.type=="tool_calls"&&ce(this,ir,"f")&&(this._emit("toolCallDone",ce(this,ir,"f")),at(this,ir,void 0)),this._emit("runStepDone",e.data,n);break}},_5=function(e){ce(this,Zx,"f").push(e),this._emit("event",e)},w5=function(e){switch(e.event){case"thread.run.step.created":return ce(this,fi,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=ce(this,fi,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let s=e.data;if(s.delta){const r=Fo.accumulateDelta(n,s.delta);ce(this,fi,"f")[e.data.id]=r}return ce(this,fi,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":ce(this,fi,"f")[e.data.id]=e.data;break}if(ce(this,fi,"f")[e.data.id])return ce(this,fi,"f")[e.data.id];throw new Error("No snapshot available")},S5=function(e,n){let s=[];switch(e.event){case"thread.message.created":return[e.data,s];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const i of r.delta.content)if(i.index in n.content){let o=n.content[i.index];n.content[i.index]=ce(this,es,"m",k5).call(this,i,o)}else n.content[i.index]=i,s.push(i);return[n,s];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,s];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},k5=function(e,n){return Fo.accumulateDelta(n,e)},C5=function(e){switch(at(this,t0,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":at(this,qo,e.data),ce(this,ir,"f")&&(this._emit("toolCallDone",ce(this,ir,"f")),at(this,ir,void 0));break}};let VS=class extends Ge{constructor(){super(...arguments),this.steps=new n6(this._client)}create(e,n,s){const{include:r,...i}=n;return this._client.post(ke`/threads/${e}/runs`,{query:{include:r},body:i,...s,headers:Fe([{"OpenAI-Beta":"assistants=v2"},s?.headers]),stream:n.stream??!1})}retrieve(e,n,s){const{thread_id:r}=n;return this._client.get(ke`/threads/${r}/runs/${e}`,{...s,headers:Fe([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}update(e,n,s){const{thread_id:r,...i}=n;return this._client.post(ke`/threads/${r}/runs/${e}`,{body:i,...s,headers:Fe([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n={},s){return this._client.getAPIList(ke`/threads/${e}/runs`,jn,{query:n,...s,headers:Fe([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}cancel(e,n,s){const{thread_id:r}=n;return this._client.post(ke`/threads/${r}/runs/${e}/cancel`,{...s,headers:Fe([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async createAndPoll(e,n,s){const r=await this.create(e,n,s);return await this.poll(r.id,{thread_id:e},s)}createAndStream(e,n,s){return Rd.createAssistantStream(e,this._client.beta.threads.runs,n,s)}async poll(e,n,s){const r=Fe([s?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":s?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:i,response:o}=await this.retrieve(e,n,{...s,headers:{...s?.headers,...r}}).withResponse();switch(i.status){case"queued":case"in_progress":case"cancelling":let c=5e3;if(s?.pollIntervalMs)c=s.pollIntervalMs;else{const d=o.headers.get("openai-poll-after-ms");if(d){const h=parseInt(d);isNaN(h)||(c=h)}}await Cf(c);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return i}}}stream(e,n,s){return Rd.createAssistantStream(e,this._client.beta.threads.runs,n,s)}submitToolOutputs(e,n,s){const{thread_id:r,...i}=n;return this._client.post(ke`/threads/${r}/runs/${e}/submit_tool_outputs`,{body:i,...s,headers:Fe([{"OpenAI-Beta":"assistants=v2"},s?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,s){const r=await this.submitToolOutputs(e,n,s);return await this.poll(r.id,n,s)}submitToolOutputsStream(e,n,s){return Rd.createToolAssistantStream(e,this._client.beta.threads.runs,n,s)}};VS.Steps=n6;class Ug extends Ge{constructor(){super(...arguments),this.runs=new VS(this._client),this.messages=new t6(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:Fe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(ke`/threads/${e}`,{...n,headers:Fe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,s){return this._client.post(ke`/threads/${e}`,{body:n,...s,headers:Fe([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}delete(e,n){return this._client.delete(ke`/threads/${e}`,{...n,headers:Fe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:Fe([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const s=await this.createAndRun(e,n);return await this.runs.poll(s.id,{thread_id:s.thread_id},n)}createAndRunStream(e,n){return Rd.createThreadAssistantStream(e,this._client.beta.threads,n)}}Ug.Runs=VS;Ug.Messages=t6;class gu extends Ge{constructor(){super(...arguments),this.realtime=new zg(this._client),this.chatkit=new Hg(this._client),this.assistants=new XR(this._client),this.threads=new Ug(this._client)}}gu.Realtime=zg;gu.ChatKit=Hg;gu.Assistants=XR;gu.Threads=Ug;class s6 extends Ge{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class r6 extends Ge{retrieve(e,n,s){const{container_id:r}=n;return this._client.get(ke`/containers/${r}/files/${e}/content`,{...s,headers:Fe([{Accept:"application/binary"},s?.headers]),__binaryResponse:!0})}}let FS=class extends Ge{constructor(){super(...arguments),this.content=new r6(this._client)}create(e,n,s){return this._client.post(ke`/containers/${e}/files`,rl({body:n,...s},this._client))}retrieve(e,n,s){const{container_id:r}=n;return this._client.get(ke`/containers/${r}/files/${e}`,s)}list(e,n={},s){return this._client.getAPIList(ke`/containers/${e}/files`,jn,{query:n,...s})}delete(e,n,s){const{container_id:r}=n;return this._client.delete(ke`/containers/${r}/files/${e}`,{...s,headers:Fe([{Accept:"*/*"},s?.headers])})}};FS.Content=r6;class qS extends Ge{constructor(){super(...arguments),this.files=new FS(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(ke`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",jn,{query:e,...n})}delete(e,n){return this._client.delete(ke`/containers/${e}`,{...n,headers:Fe([{Accept:"*/*"},n?.headers])})}}qS.Files=FS;class i6 extends Ge{create(e,n,s){const{include:r,...i}=n;return this._client.post(ke`/conversations/${e}/items`,{query:{include:r},body:i,...s})}retrieve(e,n,s){const{conversation_id:r,...i}=n;return this._client.get(ke`/conversations/${r}/items/${e}`,{query:i,...s})}list(e,n={},s){return this._client.getAPIList(ke`/conversations/${e}/items`,A0,{query:n,...s})}delete(e,n,s){const{conversation_id:r}=n;return this._client.delete(ke`/conversations/${r}/items/${e}`,s)}}class KS extends Ge{constructor(){super(...arguments),this.items=new i6(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(ke`/conversations/${e}`,n)}update(e,n,s){return this._client.post(ke`/conversations/${e}`,{body:n,...s})}delete(e,n){return this._client.delete(ke`/conversations/${e}`,n)}}KS.Items=i6;class a6 extends Ge{create(e,n){const s=!!e.encoding_format;let r=s?e.encoding_format:"base64";s&&Zn(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const i=this._client.post("/embeddings",{body:{...e,encoding_format:r},...n});return s?i:(Zn(this._client).debug("embeddings/decoding base64 embeddings from base64"),i._thenUnwrap(o=>(o&&o.data&&o.data.forEach(c=>{const d=c.embedding;c.embedding=Ez(d)}),o)))}}class o6 extends Ge{retrieve(e,n,s){const{eval_id:r,run_id:i}=n;return this._client.get(ke`/evals/${r}/runs/${i}/output_items/${e}`,s)}list(e,n,s){const{eval_id:r,...i}=n;return this._client.getAPIList(ke`/evals/${r}/runs/${e}/output_items`,jn,{query:i,...s})}}class WS extends Ge{constructor(){super(...arguments),this.outputItems=new o6(this._client)}create(e,n,s){return this._client.post(ke`/evals/${e}/runs`,{body:n,...s})}retrieve(e,n,s){const{eval_id:r}=n;return this._client.get(ke`/evals/${r}/runs/${e}`,s)}list(e,n={},s){return this._client.getAPIList(ke`/evals/${e}/runs`,jn,{query:n,...s})}delete(e,n,s){const{eval_id:r}=n;return this._client.delete(ke`/evals/${r}/runs/${e}`,s)}cancel(e,n,s){const{eval_id:r}=n;return this._client.post(ke`/evals/${r}/runs/${e}`,s)}}WS.OutputItems=o6;class GS extends Ge{constructor(){super(...arguments),this.runs=new WS(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(ke`/evals/${e}`,n)}update(e,n,s){return this._client.post(ke`/evals/${e}`,{body:n,...s})}list(e={},n){return this._client.getAPIList("/evals",jn,{query:e,...n})}delete(e,n){return this._client.delete(ke`/evals/${e}`,n)}}GS.Runs=WS;let l6=class extends Ge{create(e,n){return this._client.post("/files",rl({body:e,...n},this._client))}retrieve(e,n){return this._client.get(ke`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",jn,{query:e,...n})}delete(e,n){return this._client.delete(ke`/files/${e}`,n)}content(e,n){return this._client.get(ke`/files/${e}/content`,{...n,headers:Fe([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:s=1800*1e3}={}){const r=new Set(["processed","error","deleted"]),i=Date.now();let o=await this.retrieve(e);for(;!o.status||!r.has(o.status);)if(await Cf(n),o=await this.retrieve(e),Date.now()-i>s)throw new MS({message:`Giving up on waiting for file ${e} to finish processing after ${s} milliseconds.`});return o}};class c6 extends Ge{}let u6=class extends Ge{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class YS extends Ge{constructor(){super(...arguments),this.graders=new u6(this._client)}}YS.Graders=u6;class h6 extends Ge{create(e,n,s){return this._client.getAPIList(ke`/fine_tuning/checkpoints/${e}/permissions`,$g,{body:n,method:"post",...s})}retrieve(e,n={},s){return this._client.get(ke`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...s})}delete(e,n,s){const{fine_tuned_model_checkpoint:r}=n;return this._client.delete(ke`/fine_tuning/checkpoints/${r}/permissions/${e}`,s)}}let XS=class extends Ge{constructor(){super(...arguments),this.permissions=new h6(this._client)}};XS.Permissions=h6;class d6 extends Ge{list(e,n={},s){return this._client.getAPIList(ke`/fine_tuning/jobs/${e}/checkpoints`,jn,{query:n,...s})}}class JS extends Ge{constructor(){super(...arguments),this.checkpoints=new d6(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(ke`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",jn,{query:e,...n})}cancel(e,n){return this._client.post(ke`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},s){return this._client.getAPIList(ke`/fine_tuning/jobs/${e}/events`,jn,{query:n,...s})}pause(e,n){return this._client.post(ke`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(ke`/fine_tuning/jobs/${e}/resume`,n)}}JS.Checkpoints=d6;class yu extends Ge{constructor(){super(...arguments),this.methods=new c6(this._client),this.jobs=new JS(this._client),this.checkpoints=new XS(this._client),this.alpha=new YS(this._client)}}yu.Methods=c6;yu.Jobs=JS;yu.Checkpoints=XS;yu.Alpha=YS;class f6 extends Ge{}class QS extends Ge{constructor(){super(...arguments),this.graderModels=new f6(this._client)}}QS.GraderModels=f6;class p6 extends Ge{createVariation(e,n){return this._client.post("/images/variations",rl({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",rl({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class m6 extends Ge{retrieve(e,n){return this._client.get(ke`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",$g,e)}delete(e,n){return this._client.delete(ke`/models/${e}`,n)}}class g6 extends Ge{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class y6 extends Ge{accept(e,n,s){return this._client.post(ke`/realtime/calls/${e}/accept`,{body:n,...s,headers:Fe([{Accept:"*/*"},s?.headers])})}hangup(e,n){return this._client.post(ke`/realtime/calls/${e}/hangup`,{...n,headers:Fe([{Accept:"*/*"},n?.headers])})}refer(e,n,s){return this._client.post(ke`/realtime/calls/${e}/refer`,{body:n,...s,headers:Fe([{Accept:"*/*"},s?.headers])})}reject(e,n={},s){return this._client.post(ke`/realtime/calls/${e}/reject`,{body:n,...s,headers:Fe([{Accept:"*/*"},s?.headers])})}}class b6 extends Ge{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class Vg extends Ge{constructor(){super(...arguments),this.clientSecrets=new b6(this._client),this.calls=new y6(this._client)}}Vg.ClientSecrets=b6;Vg.Calls=y6;function Tz(t,e){return!e||!Oz(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(s=>({...s,parsed:null}))}:n)}:v6(t,e)}function v6(t,e){const n=t.output.map(r=>{if(r.type==="function_call")return{...r,parsed_arguments:Dz(e,r)};if(r.type==="message"){const i=r.content.map(o=>o.type==="output_text"?{...o,parsed:Rz(e,o.text)}:o);return{...r,content:i}}return r}),s=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||e_(s),Object.defineProperty(s,"output_parsed",{enumerable:!0,get(){for(const r of s.output)if(r.type==="message"){for(const i of r.content)if(i.type==="output_text"&&i.parsed!==null)return i.parsed}return null}}),s}function Rz(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function Oz(t){return!!IS(t.text?.format)}function Mz(t){return t?.$brand==="auto-parseable-tool"}function Bz(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function Dz(t,e){const n=Bz(t.tools??[],e.name);return{...e,...e,parsed_arguments:Mz(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function e_(t){const e=[];for(const n of t.output)if(n.type==="message")for(const s of n.content)s.type==="output_text"&&e.push(s.text);t.output_text=e.join("")}var yc,xm,Fa,_m,N5,A5,E5,j5;class ZS extends $S{constructor(e){super(),yc.add(this),xm.set(this,void 0),Fa.set(this,void 0),_m.set(this,void 0),at(this,xm,e)}static createResponse(e,n,s){const r=new ZS(n);return r._run(()=>r._createOrRetrieveResponse(e,n,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createOrRetrieveResponse(e,n,s){const r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),ce(this,yc,"m",N5).call(this);let i,o=null;"response_id"in n?(i=await e.responses.retrieve(n.response_id,{stream:!0},{...s,signal:this.controller.signal,stream:!0}),o=n.starting_after??null):i=await e.responses.create({...n,stream:!0},{...s,signal:this.controller.signal}),this._connected();for await(const c of i)ce(this,yc,"m",A5).call(this,c,o);if(i.controller.signal?.aborted)throw new Tr;return ce(this,yc,"m",E5).call(this)}[(xm=new WeakMap,Fa=new WeakMap,_m=new WeakMap,yc=new WeakSet,N5=function(){this.ended||at(this,Fa,void 0)},A5=function(n,s){if(this.ended)return;const r=(o,c)=>{(s==null||c.sequence_number>s)&&this._emit(o,c)},i=ce(this,yc,"m",j5).call(this,n);switch(r("event",n),n.type){case"response.output_text.delta":{const o=i.output[n.output_index];if(!o)throw new Xe(`missing output at index ${n.output_index}`);if(o.type==="message"){const c=o.content[n.content_index];if(!c)throw new Xe(`missing content at index ${n.content_index}`);if(c.type!=="output_text")throw new Xe(`expected content to be 'output_text', got ${c.type}`);r("response.output_text.delta",{...n,snapshot:c.text})}break}case"response.function_call_arguments.delta":{const o=i.output[n.output_index];if(!o)throw new Xe(`missing output at index ${n.output_index}`);o.type==="function_call"&&r("response.function_call_arguments.delta",{...n,snapshot:o.arguments});break}default:r(n.type,n);break}},E5=function(){if(this.ended)throw new Xe("stream has ended, this shouldn't happen");const n=ce(this,Fa,"f");if(!n)throw new Xe("request ended without sending any events");at(this,Fa,void 0);const s=Lz(n,ce(this,xm,"f"));return at(this,_m,s),s},j5=function(n){let s=ce(this,Fa,"f");if(!s){if(n.type!=="response.created")throw new Xe(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return s=at(this,Fa,n.response),s}switch(n.type){case"response.output_item.added":{s.output.push(n.item);break}case"response.content_part.added":{const r=s.output[n.output_index];if(!r)throw new Xe(`missing output at index ${n.output_index}`);const i=r.type,o=n.part;i==="message"&&o.type!=="reasoning_text"?r.content.push(o):i==="reasoning"&&o.type==="reasoning_text"&&(r.content||(r.content=[]),r.content.push(o));break}case"response.output_text.delta":{const r=s.output[n.output_index];if(!r)throw new Xe(`missing output at index ${n.output_index}`);if(r.type==="message"){const i=r.content[n.content_index];if(!i)throw new Xe(`missing content at index ${n.content_index}`);if(i.type!=="output_text")throw new Xe(`expected content to be 'output_text', got ${i.type}`);i.text+=n.delta}break}case"response.function_call_arguments.delta":{const r=s.output[n.output_index];if(!r)throw new Xe(`missing output at index ${n.output_index}`);r.type==="function_call"&&(r.arguments+=n.delta);break}case"response.reasoning_text.delta":{const r=s.output[n.output_index];if(!r)throw new Xe(`missing output at index ${n.output_index}`);if(r.type==="reasoning"){const i=r.content?.[n.content_index];if(!i)throw new Xe(`missing content at index ${n.content_index}`);if(i.type!=="reasoning_text")throw new Xe(`expected content to be 'reasoning_text', got ${i.type}`);i.text+=n.delta}break}case"response.completed":{at(this,Fa,n.response);break}}return s},Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("event",r=>{const i=n.shift();i?i.resolve(r):e.push(r)}),this.on("end",()=>{s=!0;for(const r of n)r.resolve(void 0);n.length=0}),this.on("abort",r=>{s=!0;for(const i of n)i.reject(r);n.length=0}),this.on("error",r=>{s=!0;for(const i of n)i.reject(r);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((i,o)=>n.push({resolve:i,reject:o})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=ce(this,_m,"f");if(!e)throw new Xe("stream ended without producing a ChatCompletion");return e}}function Lz(t,e){return Tz(t,e)}class x6 extends Ge{list(e,n={},s){return this._client.getAPIList(ke`/responses/${e}/input_items`,jn,{query:n,...s})}}class _6 extends Ge{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class Fg extends Ge{constructor(){super(...arguments),this.inputItems=new x6(this._client),this.inputTokens=new _6(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&e_(s),s))}retrieve(e,n={},s){return this._client.get(ke`/responses/${e}`,{query:n,...s,stream:n?.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&e_(r),r))}delete(e,n){return this._client.delete(ke`/responses/${e}`,{...n,headers:Fe([{Accept:"*/*"},n?.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(s=>v6(s,e))}stream(e,n){return ZS.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(ke`/responses/${e}/cancel`,n)}compact(e,n){return this._client.post("/responses/compact",{body:e,...n})}}Fg.InputItems=x6;Fg.InputTokens=_6;class w6 extends Ge{create(e,n,s){return this._client.post(ke`/uploads/${e}/parts`,rl({body:n,...s},this._client))}}class e2 extends Ge{constructor(){super(...arguments),this.parts=new w6(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(ke`/uploads/${e}/cancel`,n)}complete(e,n,s){return this._client.post(ke`/uploads/${e}/complete`,{body:n,...s})}}e2.Parts=w6;const Iz=async t=>{const e=await Promise.allSettled(t),n=e.filter(r=>r.status==="rejected");if(n.length){for(const r of n)console.error(r.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const s=[];for(const r of e)r.status==="fulfilled"&&s.push(r.value);return s};class S6 extends Ge{create(e,n,s){return this._client.post(ke`/vector_stores/${e}/file_batches`,{body:n,...s,headers:Fe([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}retrieve(e,n,s){const{vector_store_id:r}=n;return this._client.get(ke`/vector_stores/${r}/file_batches/${e}`,{...s,headers:Fe([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}cancel(e,n,s){const{vector_store_id:r}=n;return this._client.post(ke`/vector_stores/${r}/file_batches/${e}/cancel`,{...s,headers:Fe([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async createAndPoll(e,n,s){const r=await this.create(e,n);return await this.poll(e,r.id,s)}listFiles(e,n,s){const{vector_store_id:r,...i}=n;return this._client.getAPIList(ke`/vector_stores/${r}/file_batches/${e}/files`,jn,{query:i,...s,headers:Fe([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async poll(e,n,s){const r=Fe([s?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":s?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:i,response:o}=await this.retrieve(n,{vector_store_id:e},{...s,headers:r}).withResponse();switch(i.status){case"in_progress":let c=5e3;if(s?.pollIntervalMs)c=s.pollIntervalMs;else{const d=o.headers.get("openai-poll-after-ms");if(d){const h=parseInt(d);isNaN(h)||(c=h)}}await Cf(c);break;case"failed":case"cancelled":case"completed":return i}}}async uploadAndPoll(e,{files:n,fileIds:s=[]},r){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const i=r?.maxConcurrency??5,o=Math.min(i,n.length),c=this._client,d=n.values(),h=[...s];async function g(b){for(let y of b){const w=await c.files.create({file:y,purpose:"assistants"},r);h.push(w.id)}}const m=Array(o).fill(d).map(g);return await Iz(m),await this.createAndPoll(e,{file_ids:h})}}class k6 extends Ge{create(e,n,s){return this._client.post(ke`/vector_stores/${e}/files`,{body:n,...s,headers:Fe([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}retrieve(e,n,s){const{vector_store_id:r}=n;return this._client.get(ke`/vector_stores/${r}/files/${e}`,{...s,headers:Fe([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}update(e,n,s){const{vector_store_id:r,...i}=n;return this._client.post(ke`/vector_stores/${r}/files/${e}`,{body:i,...s,headers:Fe([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n={},s){return this._client.getAPIList(ke`/vector_stores/${e}/files`,jn,{query:n,...s,headers:Fe([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}delete(e,n,s){const{vector_store_id:r}=n;return this._client.delete(ke`/vector_stores/${r}/files/${e}`,{...s,headers:Fe([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async createAndPoll(e,n,s){const r=await this.create(e,n,s);return await this.poll(e,r.id,s)}async poll(e,n,s){const r=Fe([s?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":s?.pollIntervalMs?.toString()??void 0}]);for(;;){const i=await this.retrieve(n,{vector_store_id:e},{...s,headers:r}).withResponse(),o=i.data;switch(o.status){case"in_progress":let c=5e3;if(s?.pollIntervalMs)c=s.pollIntervalMs;else{const d=i.response.headers.get("openai-poll-after-ms");if(d){const h=parseInt(d);isNaN(h)||(c=h)}}await Cf(c);break;case"failed":case"completed":return o}}}async upload(e,n,s){const r=await this._client.files.create({file:n,purpose:"assistants"},s);return this.create(e,{file_id:r.id},s)}async uploadAndPoll(e,n,s){const r=await this.upload(e,n,s);return await this.poll(e,r.id,s)}content(e,n,s){const{vector_store_id:r}=n;return this._client.getAPIList(ke`/vector_stores/${r}/files/${e}/content`,$g,{...s,headers:Fe([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}class qg extends Ge{constructor(){super(...arguments),this.files=new k6(this._client),this.fileBatches=new S6(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:Fe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(ke`/vector_stores/${e}`,{...n,headers:Fe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,s){return this._client.post(ke`/vector_stores/${e}`,{body:n,...s,headers:Fe([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",jn,{query:e,...n,headers:Fe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(ke`/vector_stores/${e}`,{...n,headers:Fe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(e,n,s){return this._client.getAPIList(ke`/vector_stores/${e}/search`,$g,{body:n,method:"post",...s,headers:Fe([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}qg.Files=k6;qg.FileBatches=S6;class C6 extends Ge{create(e,n){return this._client.post("/videos",p5({body:e,...n},this._client))}retrieve(e,n){return this._client.get(ke`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",A0,{query:e,...n})}delete(e,n){return this._client.delete(ke`/videos/${e}`,n)}downloadContent(e,n={},s){return this._client.get(ke`/videos/${e}/content`,{query:n,...s,headers:Fe([{Accept:"application/binary"},s?.headers]),__binaryResponse:!0})}remix(e,n,s){return this._client.post(ke`/videos/${e}/remix`,p5({body:n,...s},this._client))}}var jc,N6,n0;class A6 extends Ge{constructor(){super(...arguments),jc.add(this)}async unwrap(e,n,s=this._client.webhookSecret,r=300){return await this.verifySignature(e,n,s,r),JSON.parse(e)}async verifySignature(e,n,s=this._client.webhookSecret,r=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");ce(this,jc,"m",N6).call(this,s);const i=Fe([n]).values,o=ce(this,jc,"m",n0).call(this,i,"webhook-signature"),c=ce(this,jc,"m",n0).call(this,i,"webhook-timestamp"),d=ce(this,jc,"m",n0).call(this,i,"webhook-id"),h=parseInt(c,10);if(isNaN(h))throw new Wh("Invalid webhook timestamp format");const g=Math.floor(Date.now()/1e3);if(g-h>r)throw new Wh("Webhook timestamp is too old");if(h>g+r)throw new Wh("Webhook timestamp is too new");const m=o.split(" ").map(x=>x.startsWith("v1,")?x.substring(3):x),b=s.startsWith("whsec_")?Buffer.from(s.replace("whsec_",""),"base64"):Buffer.from(s,"utf-8"),y=d?`${d}.${c}.${e}`:`${c}.${e}`,w=await crypto.subtle.importKey("raw",b,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const x of m)try{const S=Buffer.from(x,"base64");if(await crypto.subtle.verify("HMAC",w,S,new TextEncoder().encode(y)))return}catch{continue}throw new Wh("The given webhook signature does not match the expected signature")}}jc=new WeakSet,N6=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},n0=function(e,n){if(!e)throw new Error("Headers are required");const s=e.get(n);if(s==null)throw new Error(`Missing required header: ${n}`);return s};var t_,t2,s0,E6;class yt{constructor({baseURL:e=gc("OPENAI_BASE_URL"),apiKey:n=gc("OPENAI_API_KEY"),organization:s=gc("OPENAI_ORG_ID")??null,project:r=gc("OPENAI_PROJECT_ID")??null,webhookSecret:i=gc("OPENAI_WEBHOOK_SECRET")??null,...o}={}){if(t_.add(this),s0.set(this,void 0),this.completions=new s6(this),this.chat=new US(this),this.embeddings=new a6(this),this.files=new l6(this),this.images=new p6(this),this.audio=new Af(this),this.moderations=new g6(this),this.models=new m6(this),this.fineTuning=new yu(this),this.graders=new QS(this),this.vectorStores=new qg(this),this.webhooks=new A6(this),this.beta=new gu(this),this.batches=new YR(this),this.uploads=new e2(this),this.responses=new Fg(this),this.realtime=new Vg(this),this.conversations=new KS(this),this.evals=new GS(this),this.containers=new qS(this),this.videos=new C6(this),n===void 0)throw new Xe("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const c={apiKey:n,organization:s,project:r,webhookSecret:i,...o,baseURL:e||"https://api.openai.com/v1"};if(!c.dangerouslyAllowBrowser&&P$())throw new Xe(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=c.baseURL,this.timeout=c.timeout??t2.DEFAULT_TIMEOUT,this.logger=c.logger??console;const d="warn";this.logLevel=d,this.logLevel=d5(c.logLevel,"ClientOptions.logLevel",this)??d5(gc("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??d,this.fetchOptions=c.fetchOptions,this.maxRetries=c.maxRetries??2,this.fetch=c.fetch??V$(),at(this,s0,q$),this._options=c,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=s,this.project=r,this.webhookSecret=i}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return Fe([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return J$(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Ac}`}defaultIdempotencyKey(){return`stainless-node-retry-${JT()}`}makeStatusError(e,n,s,r){return is.generate(e,n,s,r)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(s){throw s instanceof Xe?s:new Xe(`Failed to get token from 'apiKey' function: ${s.message}`,{cause:s})}if(typeof n!="string"||!n)throw new Xe(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,s){const r=!ce(this,t_,"m",E6).call(this)&&s||this.baseURL,i=M$(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return B$(o)||(n={...o,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:s}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,s){return this.request(Promise.resolve(s).then(r=>({method:e,path:n,...r})))}request(e,n=null){return new Pg(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,s){const r=await e,i=r.maxRetries??this.maxRetries;n==null&&(n=i),await this.prepareOptions(r);const{req:o,url:c,timeout:d}=await this.buildRequest(r,{retryCount:i-n});await this.prepareRequest(o,{url:c,options:r});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=s===void 0?"":`, retryOf: ${s}`,m=Date.now();if(Zn(this).debug(`[${h}] sending request`,Io({retryOfRequestLogID:s,method:r.method,url:c,options:r,headers:o.headers})),r.signal?.aborted)throw new Tr;const b=new AbortController,y=await this.fetchWithTimeout(c,o,d,b).catch(Vx),w=Date.now();if(y instanceof globalThis.Error){const k=`retrying, ${n} attempts remaining`;if(r.signal?.aborted)throw new Tr;const C=Ux(y)||/timed? ?out/i.test(String(y)+("cause"in y?String(y.cause):""));if(n)return Zn(this).info(`[${h}] connection ${C?"timed out":"failed"} - ${k}`),Zn(this).debug(`[${h}] connection ${C?"timed out":"failed"} (${k})`,Io({retryOfRequestLogID:s,url:c,durationMs:w-m,message:y.message})),this.retryRequest(r,n,s??h);throw Zn(this).info(`[${h}] connection ${C?"timed out":"failed"} - error; no more retries left`),Zn(this).debug(`[${h}] connection ${C?"timed out":"failed"} (error; no more retries left)`,Io({retryOfRequestLogID:s,url:c,durationMs:w-m,message:y.message})),C?new MS:new Lg({cause:y})}const x=[...y.headers.entries()].filter(([k])=>k==="x-request-id").map(([k,C])=>", "+k+": "+JSON.stringify(C)).join(""),S=`[${h}${g}${x}] ${o.method} ${c} ${y.ok?"succeeded":"failed"} with status ${y.status} in ${w-m}ms`;if(!y.ok){const k=await this.shouldRetry(y);if(n&&k){const z=`retrying, ${n} attempts remaining`;return await F$(y.body),Zn(this).info(`${S} - ${z}`),Zn(this).debug(`[${h}] response error (${z})`,Io({retryOfRequestLogID:s,url:y.url,status:y.status,headers:y.headers,durationMs:w-m})),this.retryRequest(r,n,s??h,y.headers)}const C=k?"error; no more retries left":"error; not retryable";Zn(this).info(`${S} - ${C}`);const N=await y.text().catch(z=>Vx(z).message),R=I$(N),B=R?void 0:N;throw Zn(this).debug(`[${h}] response error (${C})`,Io({retryOfRequestLogID:s,url:y.url,status:y.status,headers:y.headers,message:B,durationMs:Date.now()-m})),this.makeStatusError(y.status,R,B,y.headers)}return Zn(this).info(S),Zn(this).debug(`[${h}] response start`,Io({retryOfRequestLogID:s,url:y.url,status:y.status,headers:y.headers,durationMs:w-m})),{response:y,options:r,controller:b,requestLogID:h,retryOfRequestLogID:s,startTime:m}}getAPIList(e,n,s){return this.requestAPIList(n,{method:"get",path:e,...s})}requestAPIList(e,n){const s=this.makeRequest(n,null,void 0);return new az(this,s,e)}async fetchWithTimeout(e,n,s,r){const{signal:i,method:o,...c}=n||{};i&&i.addEventListener("abort",()=>r.abort());const d=setTimeout(()=>r.abort(),s),h=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,g={signal:r.signal,...h?{duplex:"half"}:{},method:"GET",...c};o&&(g.method=o.toUpperCase());try{return await this.fetch.call(void 0,e,g)}finally{clearTimeout(d)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,s,r){let i;const o=r?.get("retry-after-ms");if(o){const d=parseFloat(o);Number.isNaN(d)||(i=d)}const c=r?.get("retry-after");if(c&&!i){const d=parseFloat(c);Number.isNaN(d)?i=Date.parse(c)-Date.now():i=d*1e3}if(!(i&&0<=i&&i<60*1e3)){const d=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,d)}return await Cf(i),this.makeRequest(e,n-1,s)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,o=Math.min(.5*Math.pow(2,i),8),c=1-Math.random()*.25;return o*c*1e3}async buildRequest(e,{retryCount:n=0}={}){const s={...e},{method:r,path:i,query:o,defaultBaseURL:c}=s,d=this.buildURL(i,o,c);"timeout"in s&&L$("timeout",s.timeout),s.timeout=s.timeout??this.timeout;const{bodyHeaders:h,body:g}=this.buildBody({options:s}),m=await this.buildHeaders({options:e,method:r,bodyHeaders:h,retryCount:n});return{req:{method:r,headers:m,...s.signal&&{signal:s.signal},...globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"},...g&&{body:g},...this.fetchOptions??{},...s.fetchOptions??{}},url:d,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:s,retryCount:r}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const o=Fe([i,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...U$(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,s,e.headers]);return this.validateHeaders(o),o.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Fe([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:uR(e)}:ce(this,s0,"f").call(this,{body:e,headers:s})}}t2=yt,s0=new WeakMap,t_=new WeakSet,E6=function(){return this.baseURL!=="https://api.openai.com/v1"};yt.OpenAI=t2;yt.DEFAULT_TIMEOUT=6e5;yt.OpenAIError=Xe;yt.APIError=is;yt.APIConnectionError=Lg;yt.APIConnectionTimeoutError=MS;yt.APIUserAbortError=Tr;yt.NotFoundError=tR;yt.ConflictError=nR;yt.RateLimitError=rR;yt.BadRequestError=QT;yt.AuthenticationError=ZT;yt.InternalServerError=iR;yt.PermissionDeniedError=eR;yt.UnprocessableEntityError=sR;yt.InvalidWebhookSignatureError=Wh;yt.toFile=hz;yt.Completions=s6;yt.Chat=US;yt.Embeddings=a6;yt.Files=l6;yt.Images=p6;yt.Audio=Af;yt.Moderations=g6;yt.Models=m6;yt.FineTuning=yu;yt.Graders=QS;yt.VectorStores=qg;yt.Webhooks=A6;yt.Beta=gu;yt.Batches=YR;yt.Uploads=e2;yt.Responses=Fg;yt.Realtime=Vg;yt.Conversations=KS;yt.Evals=GS;yt.Containers=qS;yt.Videos=C6;const Pz=new yt({baseURL:`${window.location.origin}/openai/v1`,apiKey:"not-needed",dangerouslyAllowBrowser:!0}),Uo={User:"user",Assistant:"assistant",Tool:"tool"};function $z(t){return t.map(e=>({type:"function",name:e.name,description:e.description,parameters:e.parameters,strict:!1}))}async function zz(t,e,n,s,r){const i=[];for(const g of n)switch(g.role){case Uo.User:{i.push({type:"message",role:"user",content:[{type:"input_text",text:g.content}]});break}case Uo.Tool:{if(g.toolResult){const m=typeof g.toolResult.data=="string"?g.toolResult.data:JSON.stringify(g.toolResult.data);i.push({type:"function_call_output",call_id:g.toolResult.id,output:m})}break}case Uo.Assistant:{if(g.toolCalls&&g.toolCalls.length>0)for(const m of g.toolCalls)i.push({type:"function_call",call_id:m.id,name:m.name,arguments:m.arguments});else i.push({type:"message",role:"assistant",content:g.content});break}}const o=Pz.responses.stream({model:t,tools:$z(s),input:i,instructions:e});if(r){let g="";o.on("response.output_text.delta",m=>{const b=m.delta;g+=b,r(b,g)})}const c=await o.finalResponse();if(!c.output)return{role:Uo.Assistant,content:""};let d="";const h=[];for(const g of c.output)if(g.type==="message"){if(g.content)for(const m of g.content)m.type==="output_text"&&(d=m.text)}else g.type==="function_call"&&g.call_id&&h.push({id:g.call_id,name:g.name,arguments:g.arguments});return{role:Uo.Assistant,content:d,toolCalls:h.length>0?h:void 0}}function Hz(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Uz=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Vz=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Fz={};function T5(t,e){return(Fz.jsx?Vz:Uz).test(t)}const qz=/[ \t\n\f\r]/g;function Kz(t){return typeof t=="object"?t.type==="text"?R5(t.value):!1:R5(t)}function R5(t){return t.replace(qz,"")===""}let Ef=class{constructor(e,n,s){this.normal=n,this.property=e,s&&(this.space=s)}};Ef.prototype.normal={};Ef.prototype.property={};Ef.prototype.space=void 0;function j6(t,e){const n={},s={};for(const r of t)Object.assign(n,r.property),Object.assign(s,r.normal);return new Ef(n,s,e)}function n_(t){return t.toLowerCase()}class Fs{constructor(e,n){this.attribute=n,this.property=e}}Fs.prototype.attribute="";Fs.prototype.booleanish=!1;Fs.prototype.boolean=!1;Fs.prototype.commaOrSpaceSeparated=!1;Fs.prototype.commaSeparated=!1;Fs.prototype.defined=!1;Fs.prototype.mustUseProperty=!1;Fs.prototype.number=!1;Fs.prototype.overloadedBoolean=!1;Fs.prototype.property="";Fs.prototype.spaceSeparated=!1;Fs.prototype.space=void 0;let Wz=0;const gt=wl(),Cn=wl(),s_=wl(),Ae=wl(),Gt=wl(),Vc=wl(),rr=wl();function wl(){return 2**++Wz}const r_=Object.freeze(Object.defineProperty({__proto__:null,boolean:gt,booleanish:Cn,commaOrSpaceSeparated:rr,commaSeparated:Vc,number:Ae,overloadedBoolean:s_,spaceSeparated:Gt},Symbol.toStringTag,{value:"Module"})),Bv=Object.keys(r_);class n2 extends Fs{constructor(e,n,s,r){let i=-1;if(super(e,n),O5(this,"space",r),typeof s=="number")for(;++i<Bv.length;){const o=Bv[i];O5(this,Bv[i],(s&r_[o])===r_[o])}}}n2.prototype.defined=!0;function O5(t,e,n){n&&(t[e]=n)}function bu(t){const e={},n={};for(const[s,r]of Object.entries(t.properties)){const i=new n2(s,t.transform(t.attributes||{},s),r,t.space);t.mustUseProperty&&t.mustUseProperty.includes(s)&&(i.mustUseProperty=!0),e[s]=i,n[n_(s)]=s,n[n_(i.attribute)]=s}return new Ef(e,n,t.space)}const T6=bu({properties:{ariaActiveDescendant:null,ariaAtomic:Cn,ariaAutoComplete:null,ariaBusy:Cn,ariaChecked:Cn,ariaColCount:Ae,ariaColIndex:Ae,ariaColSpan:Ae,ariaControls:Gt,ariaCurrent:null,ariaDescribedBy:Gt,ariaDetails:null,ariaDisabled:Cn,ariaDropEffect:Gt,ariaErrorMessage:null,ariaExpanded:Cn,ariaFlowTo:Gt,ariaGrabbed:Cn,ariaHasPopup:null,ariaHidden:Cn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Gt,ariaLevel:Ae,ariaLive:null,ariaModal:Cn,ariaMultiLine:Cn,ariaMultiSelectable:Cn,ariaOrientation:null,ariaOwns:Gt,ariaPlaceholder:null,ariaPosInSet:Ae,ariaPressed:Cn,ariaReadOnly:Cn,ariaRelevant:null,ariaRequired:Cn,ariaRoleDescription:Gt,ariaRowCount:Ae,ariaRowIndex:Ae,ariaRowSpan:Ae,ariaSelected:Cn,ariaSetSize:Ae,ariaSort:null,ariaValueMax:Ae,ariaValueMin:Ae,ariaValueNow:Ae,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function R6(t,e){return e in t?t[e]:e}function O6(t,e){return R6(t,e.toLowerCase())}const Gz=bu({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Vc,acceptCharset:Gt,accessKey:Gt,action:null,allow:null,allowFullScreen:gt,allowPaymentRequest:gt,allowUserMedia:gt,alt:null,as:null,async:gt,autoCapitalize:null,autoComplete:Gt,autoFocus:gt,autoPlay:gt,blocking:Gt,capture:null,charSet:null,checked:gt,cite:null,className:Gt,cols:Ae,colSpan:null,content:null,contentEditable:Cn,controls:gt,controlsList:Gt,coords:Ae|Vc,crossOrigin:null,data:null,dateTime:null,decoding:null,default:gt,defer:gt,dir:null,dirName:null,disabled:gt,download:s_,draggable:Cn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:gt,formTarget:null,headers:Gt,height:Ae,hidden:s_,high:Ae,href:null,hrefLang:null,htmlFor:Gt,httpEquiv:Gt,id:null,imageSizes:null,imageSrcSet:null,inert:gt,inputMode:null,integrity:null,is:null,isMap:gt,itemId:null,itemProp:Gt,itemRef:Gt,itemScope:gt,itemType:Gt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:gt,low:Ae,manifest:null,max:null,maxLength:Ae,media:null,method:null,min:null,minLength:Ae,multiple:gt,muted:gt,name:null,nonce:null,noModule:gt,noValidate:gt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:gt,optimum:Ae,pattern:null,ping:Gt,placeholder:null,playsInline:gt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:gt,referrerPolicy:null,rel:Gt,required:gt,reversed:gt,rows:Ae,rowSpan:Ae,sandbox:Gt,scope:null,scoped:gt,seamless:gt,selected:gt,shadowRootClonable:gt,shadowRootDelegatesFocus:gt,shadowRootMode:null,shape:null,size:Ae,sizes:null,slot:null,span:Ae,spellCheck:Cn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ae,step:null,style:null,tabIndex:Ae,target:null,title:null,translate:null,type:null,typeMustMatch:gt,useMap:null,value:Cn,width:Ae,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Gt,axis:null,background:null,bgColor:null,border:Ae,borderColor:null,bottomMargin:Ae,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:gt,declare:gt,event:null,face:null,frame:null,frameBorder:null,hSpace:Ae,leftMargin:Ae,link:null,longDesc:null,lowSrc:null,marginHeight:Ae,marginWidth:Ae,noResize:gt,noHref:gt,noShade:gt,noWrap:gt,object:null,profile:null,prompt:null,rev:null,rightMargin:Ae,rules:null,scheme:null,scrolling:Cn,standby:null,summary:null,text:null,topMargin:Ae,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ae,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:gt,disableRemotePlayback:gt,prefix:null,property:null,results:Ae,security:null,unselectable:null},space:"html",transform:O6}),Yz=bu({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:rr,accentHeight:Ae,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ae,amplitude:Ae,arabicForm:null,ascent:Ae,attributeName:null,attributeType:null,azimuth:Ae,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ae,by:null,calcMode:null,capHeight:Ae,className:Gt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ae,diffuseConstant:Ae,direction:null,display:null,dur:null,divisor:Ae,dominantBaseline:null,download:gt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ae,enableBackground:null,end:null,event:null,exponent:Ae,externalResourcesRequired:null,fill:null,fillOpacity:Ae,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Vc,g2:Vc,glyphName:Vc,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ae,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ae,horizOriginX:Ae,horizOriginY:Ae,id:null,ideographic:Ae,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ae,k:Ae,k1:Ae,k2:Ae,k3:Ae,k4:Ae,kernelMatrix:rr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ae,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ae,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ae,overlineThickness:Ae,paintOrder:null,panose1:null,path:null,pathLength:Ae,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Gt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ae,pointsAtY:Ae,pointsAtZ:Ae,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:rr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:rr,rev:rr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:rr,requiredFeatures:rr,requiredFonts:rr,requiredFormats:rr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ae,specularExponent:Ae,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ae,strikethroughThickness:Ae,string:null,stroke:null,strokeDashArray:rr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ae,strokeOpacity:Ae,strokeWidth:null,style:null,surfaceScale:Ae,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:rr,tabIndex:Ae,tableValues:null,target:null,targetX:Ae,targetY:Ae,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:rr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ae,underlineThickness:Ae,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ae,values:null,vAlphabetic:Ae,vMathematical:Ae,vectorEffect:null,vHanging:Ae,vIdeographic:Ae,version:null,vertAdvY:Ae,vertOriginX:Ae,vertOriginY:Ae,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ae,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:R6}),M6=bu({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),B6=bu({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:O6}),D6=bu({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),Xz={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Jz=/[A-Z]/g,M5=/-[a-z]/g,Qz=/^data[-\w.:]+$/i;function Zz(t,e){const n=n_(e);let s=e,r=Fs;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Qz.test(e)){if(e.charAt(4)==="-"){const i=e.slice(5).replace(M5,t9);s="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=e.slice(4);if(!M5.test(i)){let o=i.replace(Jz,e9);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}r=n2}return new r(s,e)}function e9(t){return"-"+t.toLowerCase()}function t9(t){return t.charAt(1).toUpperCase()}const n9=j6([T6,Gz,M6,B6,D6],"html"),s2=j6([T6,Yz,M6,B6,D6],"svg");function s9(t){return t.join(" ").trim()}var bc={},Dv,B5;function r9(){if(B5)return Dv;B5=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,s=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,i=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,c=/^\s+|\s+$/g,d=`
`,h="/",g="*",m="",b="comment",y="declaration";function w(S,k){if(typeof S!="string")throw new TypeError("First argument must be a string");if(!S)return[];k=k||{};var C=1,N=1;function R(X){var I=X.match(e);I&&(C+=I.length);var L=X.lastIndexOf(d);N=~L?X.length-L:N+X.length}function B(){var X={line:C,column:N};return function(I){return I.position=new E(X),Y(),I}}function E(X){this.start=X,this.end={line:C,column:N},this.source=k.source}E.prototype.content=S;function z(X){var I=new Error(k.source+":"+C+":"+N+": "+X);if(I.reason=X,I.filename=k.source,I.line=C,I.column=N,I.source=S,!k.silent)throw I}function U(X){var I=X.exec(S);if(I){var L=I[0];return R(L),S=S.slice(L.length),I}}function Y(){U(n)}function D(X){var I;for(X=X||[];I=W();)I!==!1&&X.push(I);return X}function W(){var X=B();if(!(h!=S.charAt(0)||g!=S.charAt(1))){for(var I=2;m!=S.charAt(I)&&(g!=S.charAt(I)||h!=S.charAt(I+1));)++I;if(I+=2,m===S.charAt(I-1))return z("End of comment missing");var L=S.slice(2,I-2);return N+=2,R(L),S=S.slice(I),N+=2,X({type:b,comment:L})}}function V(){var X=B(),I=U(s);if(I){if(W(),!U(r))return z("property missing ':'");var L=U(i),J=X({type:y,property:x(I[0].replace(t,m)),value:L?x(L[0].replace(t,m)):m});return U(o),J}}function q(){var X=[];D(X);for(var I;I=V();)I!==!1&&(X.push(I),D(X));return X}return Y(),q()}function x(S){return S?S.replace(c,m):m}return Dv=w,Dv}var D5;function i9(){if(D5)return bc;D5=1;var t=bc&&bc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(bc,"__esModule",{value:!0}),bc.default=n;const e=t(r9());function n(s,r){let i=null;if(!s||typeof s!="string")return i;const o=(0,e.default)(s),c=typeof r=="function";return o.forEach(d=>{if(d.type!=="declaration")return;const{property:h,value:g}=d;c?r(h,g,d):g&&(i=i||{},i[h]=g)}),i}return bc}var Rh={},L5;function a9(){if(L5)return Rh;L5=1,Object.defineProperty(Rh,"__esModule",{value:!0}),Rh.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,s=/^-(webkit|moz|ms|o|khtml)-/,r=/^-(ms)-/,i=function(h){return!h||n.test(h)||t.test(h)},o=function(h,g){return g.toUpperCase()},c=function(h,g){return"".concat(g,"-")},d=function(h,g){return g===void 0&&(g={}),i(h)?h:(h=h.toLowerCase(),g.reactCompat?h=h.replace(r,c):h=h.replace(s,c),h.replace(e,o))};return Rh.camelCase=d,Rh}var Oh,I5;function o9(){if(I5)return Oh;I5=1;var t=Oh&&Oh.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},e=t(i9()),n=a9();function s(r,i){var o={};return!r||typeof r!="string"||(0,e.default)(r,function(c,d){c&&d&&(o[(0,n.camelCase)(c,i)]=d)}),o}return s.default=s,Oh=s,Oh}var l9=o9();const c9=wS(l9),L6=I6("end"),r2=I6("start");function I6(t){return e;function e(n){const s=n&&n.position&&n.position[t]||{};if(typeof s.line=="number"&&s.line>0&&typeof s.column=="number"&&s.column>0)return{line:s.line,column:s.column,offset:typeof s.offset=="number"&&s.offset>-1?s.offset:void 0}}}function u9(t){const e=r2(t),n=L6(t);if(e&&n)return{start:e,end:n}}function Od(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?P5(t.position):"start"in t||"end"in t?P5(t):"line"in t||"column"in t?i_(t):""}function i_(t){return $5(t&&t.line)+":"+$5(t&&t.column)}function P5(t){return i_(t&&t.start)+"-"+i_(t&&t.end)}function $5(t){return t&&typeof t=="number"?t:1}class gs extends Error{constructor(e,n,s){super(),typeof n=="string"&&(s=n,n=void 0);let r="",i={},o=!1;if(n&&("line"in n&&"column"in n?i={place:n}:"start"in n&&"end"in n?i={place:n}:"type"in n?i={ancestors:[n],place:n.position}:i={...n}),typeof e=="string"?r=e:!i.cause&&e&&(o=!0,r=e.message,i.cause=e),!i.ruleId&&!i.source&&typeof s=="string"){const d=s.indexOf(":");d===-1?i.ruleId=s:(i.source=s.slice(0,d),i.ruleId=s.slice(d+1))}if(!i.place&&i.ancestors&&i.ancestors){const d=i.ancestors[i.ancestors.length-1];d&&(i.place=d.position)}const c=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=c?c.line:void 0,this.name=Od(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=o&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}gs.prototype.file="";gs.prototype.name="";gs.prototype.reason="";gs.prototype.message="";gs.prototype.stack="";gs.prototype.column=void 0;gs.prototype.line=void 0;gs.prototype.ancestors=void 0;gs.prototype.cause=void 0;gs.prototype.fatal=void 0;gs.prototype.place=void 0;gs.prototype.ruleId=void 0;gs.prototype.source=void 0;const i2={}.hasOwnProperty,h9=new Map,d9=/[A-Z]/g,f9=new Set(["table","tbody","thead","tfoot","tr"]),p9=new Set(["td","th"]),P6="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function m9(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let s;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");s=S9(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");s=w9(n,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:s,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?s2:n9,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},i=$6(r,t,void 0);return i&&typeof i!="string"?i:r.create(t,r.Fragment,{children:i||void 0},void 0)}function $6(t,e,n){if(e.type==="element")return g9(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return y9(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return v9(t,e,n);if(e.type==="mdxjsEsm")return b9(t,e);if(e.type==="root")return x9(t,e,n);if(e.type==="text")return _9(t,e)}function g9(t,e,n){const s=t.schema;let r=s;e.tagName.toLowerCase()==="svg"&&s.space==="html"&&(r=s2,t.schema=r),t.ancestors.push(e);const i=H6(t,e.tagName,!1),o=k9(t,e);let c=o2(t,e);return f9.has(e.tagName)&&(c=c.filter(function(d){return typeof d=="string"?!Kz(d):!0})),z6(t,o,i,e),a2(o,c),t.ancestors.pop(),t.schema=s,t.create(e,i,o,n)}function y9(t,e){if(e.data&&e.data.estree&&t.evaluater){const s=e.data.estree.body[0];return s.type,t.evaluater.evaluateExpression(s.expression)}Qd(t,e.position)}function b9(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Qd(t,e.position)}function v9(t,e,n){const s=t.schema;let r=s;e.name==="svg"&&s.space==="html"&&(r=s2,t.schema=r),t.ancestors.push(e);const i=e.name===null?t.Fragment:H6(t,e.name,!0),o=C9(t,e),c=o2(t,e);return z6(t,o,i,e),a2(o,c),t.ancestors.pop(),t.schema=s,t.create(e,i,o,n)}function x9(t,e,n){const s={};return a2(s,o2(t,e)),t.create(e,t.Fragment,s,n)}function _9(t,e){return e.value}function z6(t,e,n,s){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=s)}function a2(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function w9(t,e,n){return s;function s(r,i,o,c){const h=Array.isArray(o.children)?n:e;return c?h(i,o,c):h(i,o)}}function S9(t,e){return n;function n(s,r,i,o){const c=Array.isArray(i.children),d=r2(s);return e(r,i,o,c,{columnNumber:d?d.column-1:void 0,fileName:t,lineNumber:d?d.line:void 0},void 0)}}function k9(t,e){const n={};let s,r;for(r in e.properties)if(r!=="children"&&i2.call(e.properties,r)){const i=N9(t,r,e.properties[r]);if(i){const[o,c]=i;t.tableCellAlignToStyle&&o==="align"&&typeof c=="string"&&p9.has(e.tagName)?s=c:n[o]=c}}if(s){const i=n.style||(n.style={});i[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=s}return n}function C9(t,e){const n={};for(const s of e.attributes)if(s.type==="mdxJsxExpressionAttribute")if(s.data&&s.data.estree&&t.evaluater){const i=s.data.estree.body[0];i.type;const o=i.expression;o.type;const c=o.properties[0];c.type,Object.assign(n,t.evaluater.evaluateExpression(c.argument))}else Qd(t,e.position);else{const r=s.name;let i;if(s.value&&typeof s.value=="object")if(s.value.data&&s.value.data.estree&&t.evaluater){const c=s.value.data.estree.body[0];c.type,i=t.evaluater.evaluateExpression(c.expression)}else Qd(t,e.position);else i=s.value===null?!0:s.value;n[r]=i}return n}function o2(t,e){const n=[];let s=-1;const r=t.passKeys?new Map:h9;for(;++s<e.children.length;){const i=e.children[s];let o;if(t.passKeys){const d=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(d){const h=r.get(d)||0;o=d+"-"+h,r.set(d,h+1)}}const c=$6(t,i,o);c!==void 0&&n.push(c)}return n}function N9(t,e,n){const s=Zz(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=s.commaSeparated?Hz(n):s9(n)),s.property==="style"){let r=typeof n=="object"?n:A9(t,String(n));return t.stylePropertyNameCase==="css"&&(r=E9(r)),["style",r]}return[t.elementAttributeNameCase==="react"&&s.space?Xz[s.property]||s.property:s.attribute,n]}}function A9(t,e){try{return c9(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const s=n,r=new gs("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=t.filePath||void 0,r.url=P6+"#cannot-parse-style-attribute",r}}function H6(t,e,n){let s;if(!n)s={type:"Literal",value:e};else if(e.includes(".")){const r=e.split(".");let i=-1,o;for(;++i<r.length;){const c=T5(r[i])?{type:"Identifier",name:r[i]}:{type:"Literal",value:r[i]};o=o?{type:"MemberExpression",object:o,property:c,computed:!!(i&&c.type==="Literal"),optional:!1}:c}s=o}else s=T5(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(s.type==="Literal"){const r=s.value;return i2.call(t.components,r)?t.components[r]:r}if(t.evaluater)return t.evaluater.evaluateExpression(s);Qd(t)}function Qd(t,e){const n=new gs("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=P6+"#cannot-handle-mdx-estrees-without-createevaluater",n}function E9(t){const e={};let n;for(n in t)i2.call(t,n)&&(e[j9(n)]=t[n]);return e}function j9(t){let e=t.replace(d9,T9);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function T9(t){return"-"+t.toLowerCase()}const Lv={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},R9={};function l2(t,e){const n=R9,s=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,r=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return U6(t,s,r)}function U6(t,e,n){if(O9(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return z5(t.children,e,n)}return Array.isArray(t)?z5(t,e,n):""}function z5(t,e,n){const s=[];let r=-1;for(;++r<t.length;)s[r]=U6(t[r],e,n);return s.join("")}function O9(t){return!!(t&&typeof t=="object")}const H5=document.createElement("i");function c2(t){const e="&"+t+";";H5.innerHTML=e;const n=H5.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function hr(t,e,n,s){const r=t.length;let i=0,o;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,n=n>0?n:0,s.length<1e4)o=Array.from(s),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);i<s.length;)o=s.slice(i,i+1e4),o.unshift(e,0),t.splice(...o),i+=1e4,e+=1e4}function Er(t,e){return t.length>0?(hr(t,t.length,0,e),t):e}const U5={}.hasOwnProperty;function V6(t){const e={};let n=-1;for(;++n<t.length;)M9(e,t[n]);return e}function M9(t,e){let n;for(n in e){const r=(U5.call(t,n)?t[n]:void 0)||(t[n]={}),i=e[n];let o;if(i)for(o in i){U5.call(r,o)||(r[o]=[]);const c=i[o];B9(r[o],Array.isArray(c)?c:c?[c]:[])}}}function B9(t,e){let n=-1;const s=[];for(;++n<e.length;)(e[n].add==="after"?t:s).push(e[n]);hr(t,0,0,s)}function F6(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Gr(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ss=po(/[A-Za-z]/),ds=po(/[\dA-Za-z]/),D9=po(/[#-'*+\--9=?A-Z^-~]/);function D0(t){return t!==null&&(t<32||t===127)}const a_=po(/\d/),L9=po(/[\dA-Fa-f]/),I9=po(/[!-/:-@[-`{-~]/);function et(t){return t!==null&&t<-2}function Wt(t){return t!==null&&(t<0||t===32)}function kt(t){return t===-2||t===-1||t===32}const Kg=po(new RegExp("\\p{P}|\\p{S}","u")),il=po(/\s/);function po(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function vu(t){const e=[];let n=-1,s=0,r=0;for(;++n<t.length;){const i=t.charCodeAt(n);let o="";if(i===37&&ds(t.charCodeAt(n+1))&&ds(t.charCodeAt(n+2)))r=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(o=String.fromCharCode(i));else if(i>55295&&i<57344){const c=t.charCodeAt(n+1);i<56320&&c>56319&&c<57344?(o=String.fromCharCode(i,c),r=1):o=""}else o=String.fromCharCode(i);o&&(e.push(t.slice(s,n),encodeURIComponent(o)),s=n+r+1,o=""),r&&(n+=r,r=0)}return e.join("")+t.slice(s)}function Et(t,e,n,s){const r=s?s-1:Number.POSITIVE_INFINITY;let i=0;return o;function o(d){return kt(d)?(t.enter(n),c(d)):e(d)}function c(d){return kt(d)&&i++<r?(t.consume(d),c):(t.exit(n),e(d))}}const P9={tokenize:$9};function $9(t){const e=t.attempt(this.parser.constructs.contentInitial,s,r);let n;return e;function s(c){if(c===null){t.consume(c);return}return t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),Et(t,e,"linePrefix")}function r(c){return t.enter("paragraph"),i(c)}function i(c){const d=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=d),n=d,o(c)}function o(c){if(c===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(c);return}return et(c)?(t.consume(c),t.exit("chunkText"),i):(t.consume(c),o)}}const z9={tokenize:H9},V5={tokenize:U9};function H9(t){const e=this,n=[];let s=0,r,i,o;return c;function c(N){if(s<n.length){const R=n[s];return e.containerState=R[1],t.attempt(R[0].continuation,d,h)(N)}return h(N)}function d(N){if(s++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&C();const R=e.events.length;let B=R,E;for(;B--;)if(e.events[B][0]==="exit"&&e.events[B][1].type==="chunkFlow"){E=e.events[B][1].end;break}k(s);let z=R;for(;z<e.events.length;)e.events[z][1].end={...E},z++;return hr(e.events,B+1,0,e.events.slice(R)),e.events.length=z,h(N)}return c(N)}function h(N){if(s===n.length){if(!r)return b(N);if(r.currentConstruct&&r.currentConstruct.concrete)return w(N);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(V5,g,m)(N)}function g(N){return r&&C(),k(s),b(N)}function m(N){return e.parser.lazy[e.now().line]=s!==n.length,o=e.now().offset,w(N)}function b(N){return e.containerState={},t.attempt(V5,y,w)(N)}function y(N){return s++,n.push([e.currentConstruct,e.containerState]),b(N)}function w(N){if(N===null){r&&C(),k(0),t.consume(N);return}return r=r||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:i}),x(N)}function x(N){if(N===null){S(t.exit("chunkFlow"),!0),k(0),t.consume(N);return}return et(N)?(t.consume(N),S(t.exit("chunkFlow")),s=0,e.interrupt=void 0,c):(t.consume(N),x)}function S(N,R){const B=e.sliceStream(N);if(R&&B.push(null),N.previous=i,i&&(i.next=N),i=N,r.defineSkip(N.start),r.write(B),e.parser.lazy[N.start.line]){let E=r.events.length;for(;E--;)if(r.events[E][1].start.offset<o&&(!r.events[E][1].end||r.events[E][1].end.offset>o))return;const z=e.events.length;let U=z,Y,D;for(;U--;)if(e.events[U][0]==="exit"&&e.events[U][1].type==="chunkFlow"){if(Y){D=e.events[U][1].end;break}Y=!0}for(k(s),E=z;E<e.events.length;)e.events[E][1].end={...D},E++;hr(e.events,U+1,0,e.events.slice(z)),e.events.length=E}}function k(N){let R=n.length;for(;R-- >N;){const B=n[R];e.containerState=B[1],B[0].exit.call(e,t)}n.length=N}function C(){r.write([null]),i=void 0,r=void 0,e.containerState._closeFlow=void 0}}function U9(t,e,n){return Et(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Gc(t){if(t===null||Wt(t)||il(t))return 1;if(Kg(t))return 2}function Wg(t,e,n){const s=[];let r=-1;for(;++r<t.length;){const i=t[r].resolveAll;i&&!s.includes(i)&&(e=i(e,n),s.push(i))}return e}const o_={name:"attention",resolveAll:V9,tokenize:F9};function V9(t,e){let n=-1,s,r,i,o,c,d,h,g;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(s=n;s--;)if(t[s][0]==="exit"&&t[s][1].type==="attentionSequence"&&t[s][1]._open&&e.sliceSerialize(t[s][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[s][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[s][1].end.offset-t[s][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;d=t[s][1].end.offset-t[s][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const m={...t[s][1].end},b={...t[n][1].start};F5(m,-d),F5(b,d),o={type:d>1?"strongSequence":"emphasisSequence",start:m,end:{...t[s][1].end}},c={type:d>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:b},i={type:d>1?"strongText":"emphasisText",start:{...t[s][1].end},end:{...t[n][1].start}},r={type:d>1?"strong":"emphasis",start:{...o.start},end:{...c.end}},t[s][1].end={...o.start},t[n][1].start={...c.end},h=[],t[s][1].end.offset-t[s][1].start.offset&&(h=Er(h,[["enter",t[s][1],e],["exit",t[s][1],e]])),h=Er(h,[["enter",r,e],["enter",o,e],["exit",o,e],["enter",i,e]]),h=Er(h,Wg(e.parser.constructs.insideSpan.null,t.slice(s+1,n),e)),h=Er(h,[["exit",i,e],["enter",c,e],["exit",c,e],["exit",r,e]]),t[n][1].end.offset-t[n][1].start.offset?(g=2,h=Er(h,[["enter",t[n][1],e],["exit",t[n][1],e]])):g=0,hr(t,s-1,n-s+3,h),n=s+h.length-g-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function F9(t,e){const n=this.parser.constructs.attentionMarkers.null,s=this.previous,r=Gc(s);let i;return o;function o(d){return i=d,t.enter("attentionSequence"),c(d)}function c(d){if(d===i)return t.consume(d),c;const h=t.exit("attentionSequence"),g=Gc(d),m=!g||g===2&&r||n.includes(d),b=!r||r===2&&g||n.includes(s);return h._open=!!(i===42?m:m&&(r||!b)),h._close=!!(i===42?b:b&&(g||!m)),e(d)}}function F5(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const q9={name:"autolink",tokenize:K9};function K9(t,e,n){let s=0;return r;function r(y){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),i}function i(y){return Ss(y)?(t.consume(y),o):y===64?n(y):h(y)}function o(y){return y===43||y===45||y===46||ds(y)?(s=1,c(y)):h(y)}function c(y){return y===58?(t.consume(y),s=0,d):(y===43||y===45||y===46||ds(y))&&s++<32?(t.consume(y),c):(s=0,h(y))}function d(y){return y===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),e):y===null||y===32||y===60||D0(y)?n(y):(t.consume(y),d)}function h(y){return y===64?(t.consume(y),g):D9(y)?(t.consume(y),h):n(y)}function g(y){return ds(y)?m(y):n(y)}function m(y){return y===46?(t.consume(y),s=0,g):y===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),e):b(y)}function b(y){if((y===45||ds(y))&&s++<63){const w=y===45?b:m;return t.consume(y),w}return n(y)}}const jf={partial:!0,tokenize:W9};function W9(t,e,n){return s;function s(i){return kt(i)?Et(t,r,"linePrefix")(i):r(i)}function r(i){return i===null||et(i)?e(i):n(i)}}const q6={continuation:{tokenize:Y9},exit:X9,name:"blockQuote",tokenize:G9};function G9(t,e,n){const s=this;return r;function r(o){if(o===62){const c=s.containerState;return c.open||(t.enter("blockQuote",{_container:!0}),c.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),i}return n(o)}function i(o){return kt(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function Y9(t,e,n){const s=this;return r;function r(o){return kt(o)?Et(t,i,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):i(o)}function i(o){return t.attempt(q6,e,n)(o)}}function X9(t){t.exit("blockQuote")}const K6={name:"characterEscape",tokenize:J9};function J9(t,e,n){return s;function s(i){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(i),t.exit("escapeMarker"),r}function r(i){return I9(i)?(t.enter("characterEscapeValue"),t.consume(i),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(i)}}const W6={name:"characterReference",tokenize:Q9};function Q9(t,e,n){const s=this;let r=0,i,o;return c;function c(m){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(m),t.exit("characterReferenceMarker"),d}function d(m){return m===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(m),t.exit("characterReferenceMarkerNumeric"),h):(t.enter("characterReferenceValue"),i=31,o=ds,g(m))}function h(m){return m===88||m===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(m),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),i=6,o=L9,g):(t.enter("characterReferenceValue"),i=7,o=a_,g(m))}function g(m){if(m===59&&r){const b=t.exit("characterReferenceValue");return o===ds&&!c2(s.sliceSerialize(b))?n(m):(t.enter("characterReferenceMarker"),t.consume(m),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(m)&&r++<i?(t.consume(m),g):n(m)}}const q5={partial:!0,tokenize:eH},K5={concrete:!0,name:"codeFenced",tokenize:Z9};function Z9(t,e,n){const s=this,r={partial:!0,tokenize:B};let i=0,o=0,c;return d;function d(E){return h(E)}function h(E){const z=s.events[s.events.length-1];return i=z&&z[1].type==="linePrefix"?z[2].sliceSerialize(z[1],!0).length:0,c=E,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),g(E)}function g(E){return E===c?(o++,t.consume(E),g):o<3?n(E):(t.exit("codeFencedFenceSequence"),kt(E)?Et(t,m,"whitespace")(E):m(E))}function m(E){return E===null||et(E)?(t.exit("codeFencedFence"),s.interrupt?e(E):t.check(q5,x,R)(E)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),b(E))}function b(E){return E===null||et(E)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),m(E)):kt(E)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Et(t,y,"whitespace")(E)):E===96&&E===c?n(E):(t.consume(E),b)}function y(E){return E===null||et(E)?m(E):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),w(E))}function w(E){return E===null||et(E)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),m(E)):E===96&&E===c?n(E):(t.consume(E),w)}function x(E){return t.attempt(r,R,S)(E)}function S(E){return t.enter("lineEnding"),t.consume(E),t.exit("lineEnding"),k}function k(E){return i>0&&kt(E)?Et(t,C,"linePrefix",i+1)(E):C(E)}function C(E){return E===null||et(E)?t.check(q5,x,R)(E):(t.enter("codeFlowValue"),N(E))}function N(E){return E===null||et(E)?(t.exit("codeFlowValue"),C(E)):(t.consume(E),N)}function R(E){return t.exit("codeFenced"),e(E)}function B(E,z,U){let Y=0;return D;function D(I){return E.enter("lineEnding"),E.consume(I),E.exit("lineEnding"),W}function W(I){return E.enter("codeFencedFence"),kt(I)?Et(E,V,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):V(I)}function V(I){return I===c?(E.enter("codeFencedFenceSequence"),q(I)):U(I)}function q(I){return I===c?(Y++,E.consume(I),q):Y>=o?(E.exit("codeFencedFenceSequence"),kt(I)?Et(E,X,"whitespace")(I):X(I)):U(I)}function X(I){return I===null||et(I)?(E.exit("codeFencedFence"),z(I)):U(I)}}}function eH(t,e,n){const s=this;return r;function r(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i)}function i(o){return s.parser.lazy[s.now().line]?n(o):e(o)}}const Iv={name:"codeIndented",tokenize:nH},tH={partial:!0,tokenize:sH};function nH(t,e,n){const s=this;return r;function r(h){return t.enter("codeIndented"),Et(t,i,"linePrefix",5)(h)}function i(h){const g=s.events[s.events.length-1];return g&&g[1].type==="linePrefix"&&g[2].sliceSerialize(g[1],!0).length>=4?o(h):n(h)}function o(h){return h===null?d(h):et(h)?t.attempt(tH,o,d)(h):(t.enter("codeFlowValue"),c(h))}function c(h){return h===null||et(h)?(t.exit("codeFlowValue"),o(h)):(t.consume(h),c)}function d(h){return t.exit("codeIndented"),e(h)}}function sH(t,e,n){const s=this;return r;function r(o){return s.parser.lazy[s.now().line]?n(o):et(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),r):Et(t,i,"linePrefix",5)(o)}function i(o){const c=s.events[s.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(o):et(o)?r(o):n(o)}}const rH={name:"codeText",previous:aH,resolve:iH,tokenize:oH};function iH(t){let e=t.length-4,n=3,s,r;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(s=n;++s<e;)if(t[s][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(s=n-1,e++;++s<=e;)r===void 0?s!==e&&t[s][1].type!=="lineEnding"&&(r=s):(s===e||t[s][1].type==="lineEnding")&&(t[r][1].type="codeTextData",s!==r+2&&(t[r][1].end=t[s-1][1].end,t.splice(r+2,s-r-2),e-=s-r-2,s=r+2),r=void 0);return t}function aH(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function oH(t,e,n){let s=0,r,i;return o;function o(m){return t.enter("codeText"),t.enter("codeTextSequence"),c(m)}function c(m){return m===96?(t.consume(m),s++,c):(t.exit("codeTextSequence"),d(m))}function d(m){return m===null?n(m):m===32?(t.enter("space"),t.consume(m),t.exit("space"),d):m===96?(i=t.enter("codeTextSequence"),r=0,g(m)):et(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),d):(t.enter("codeTextData"),h(m))}function h(m){return m===null||m===32||m===96||et(m)?(t.exit("codeTextData"),d(m)):(t.consume(m),h)}function g(m){return m===96?(t.consume(m),r++,g):r===s?(t.exit("codeTextSequence"),t.exit("codeText"),e(m)):(i.type="codeTextData",h(m))}}class lH{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const s=n??Number.POSITIVE_INFINITY;return s<this.left.length?this.left.slice(e,s):e>this.left.length?this.right.slice(this.right.length-s+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-s+this.left.length).reverse())}splice(e,n,s){const r=n||0;this.setCursor(Math.trunc(e));const i=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return s&&Mh(this.left,s),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Mh(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Mh(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Mh(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Mh(this.left,n.reverse())}}}function Mh(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function G6(t){const e={};let n=-1,s,r,i,o,c,d,h;const g=new lH(t);for(;++n<g.length;){for(;n in e;)n=e[n];if(s=g.get(n),n&&s[1].type==="chunkFlow"&&g.get(n-1)[1].type==="listItemPrefix"&&(d=s[1]._tokenizer.events,i=0,i<d.length&&d[i][1].type==="lineEndingBlank"&&(i+=2),i<d.length&&d[i][1].type==="content"))for(;++i<d.length&&d[i][1].type!=="content";)d[i][1].type==="chunkText"&&(d[i][1]._isInFirstContentOfListItem=!0,i++);if(s[0]==="enter")s[1].contentType&&(Object.assign(e,cH(g,n)),n=e[n],h=!0);else if(s[1]._container){for(i=n,r=void 0;i--;)if(o=g.get(i),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(r&&(g.get(r)[1].type="lineEndingBlank"),o[1].type="lineEnding",r=i);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;r&&(s[1].end={...g.get(r)[1].start},c=g.slice(r,n),c.unshift(s),g.splice(r,n-r+1,c))}}return hr(t,0,Number.POSITIVE_INFINITY,g.slice(0)),!h}function cH(t,e){const n=t.get(e)[1],s=t.get(e)[2];let r=e-1;const i=[];let o=n._tokenizer;o||(o=s.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const c=o.events,d=[],h={};let g,m,b=-1,y=n,w=0,x=0;const S=[x];for(;y;){for(;t.get(++r)[1]!==y;);i.push(r),y._tokenizer||(g=s.sliceStream(y),y.next||g.push(null),m&&o.defineSkip(y.start),y._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(g),y._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),m=y,y=y.next}for(y=n;++b<c.length;)c[b][0]==="exit"&&c[b-1][0]==="enter"&&c[b][1].type===c[b-1][1].type&&c[b][1].start.line!==c[b][1].end.line&&(x=b+1,S.push(x),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(o.events=[],y?(y._tokenizer=void 0,y.previous=void 0):S.pop(),b=S.length;b--;){const k=c.slice(S[b],S[b+1]),C=i.pop();d.push([C,C+k.length-1]),t.splice(C,2,k)}for(d.reverse(),b=-1;++b<d.length;)h[w+d[b][0]]=w+d[b][1],w+=d[b][1]-d[b][0]-1;return h}const uH={resolve:dH,tokenize:fH},hH={partial:!0,tokenize:pH};function dH(t){return G6(t),t}function fH(t,e){let n;return s;function s(c){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),r(c)}function r(c){return c===null?i(c):et(c)?t.check(hH,o,i)(c):(t.consume(c),r)}function i(c){return t.exit("chunkContent"),t.exit("content"),e(c)}function o(c){return t.consume(c),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}function pH(t,e,n){const s=this;return r;function r(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Et(t,i,"linePrefix")}function i(o){if(o===null||et(o))return n(o);const c=s.events[s.events.length-1];return!s.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(o):t.interrupt(s.parser.constructs.flow,n,e)(o)}}function Y6(t,e,n,s,r,i,o,c,d){const h=d||Number.POSITIVE_INFINITY;let g=0;return m;function m(k){return k===60?(t.enter(s),t.enter(r),t.enter(i),t.consume(k),t.exit(i),b):k===null||k===32||k===41||D0(k)?n(k):(t.enter(s),t.enter(o),t.enter(c),t.enter("chunkString",{contentType:"string"}),x(k))}function b(k){return k===62?(t.enter(i),t.consume(k),t.exit(i),t.exit(r),t.exit(s),e):(t.enter(c),t.enter("chunkString",{contentType:"string"}),y(k))}function y(k){return k===62?(t.exit("chunkString"),t.exit(c),b(k)):k===null||k===60||et(k)?n(k):(t.consume(k),k===92?w:y)}function w(k){return k===60||k===62||k===92?(t.consume(k),y):y(k)}function x(k){return!g&&(k===null||k===41||Wt(k))?(t.exit("chunkString"),t.exit(c),t.exit(o),t.exit(s),e(k)):g<h&&k===40?(t.consume(k),g++,x):k===41?(t.consume(k),g--,x):k===null||k===32||k===40||D0(k)?n(k):(t.consume(k),k===92?S:x)}function S(k){return k===40||k===41||k===92?(t.consume(k),x):x(k)}}function X6(t,e,n,s,r,i){const o=this;let c=0,d;return h;function h(y){return t.enter(s),t.enter(r),t.consume(y),t.exit(r),t.enter(i),g}function g(y){return c>999||y===null||y===91||y===93&&!d||y===94&&!c&&"_hiddenFootnoteSupport"in o.parser.constructs?n(y):y===93?(t.exit(i),t.enter(r),t.consume(y),t.exit(r),t.exit(s),e):et(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),g):(t.enter("chunkString",{contentType:"string"}),m(y))}function m(y){return y===null||y===91||y===93||et(y)||c++>999?(t.exit("chunkString"),g(y)):(t.consume(y),d||(d=!kt(y)),y===92?b:m)}function b(y){return y===91||y===92||y===93?(t.consume(y),c++,m):m(y)}}function J6(t,e,n,s,r,i){let o;return c;function c(b){return b===34||b===39||b===40?(t.enter(s),t.enter(r),t.consume(b),t.exit(r),o=b===40?41:b,d):n(b)}function d(b){return b===o?(t.enter(r),t.consume(b),t.exit(r),t.exit(s),e):(t.enter(i),h(b))}function h(b){return b===o?(t.exit(i),d(o)):b===null?n(b):et(b)?(t.enter("lineEnding"),t.consume(b),t.exit("lineEnding"),Et(t,h,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),g(b))}function g(b){return b===o||b===null||et(b)?(t.exit("chunkString"),h(b)):(t.consume(b),b===92?m:g)}function m(b){return b===o||b===92?(t.consume(b),g):g(b)}}function Md(t,e){let n;return s;function s(r){return et(r)?(t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),n=!0,s):kt(r)?Et(t,s,n?"linePrefix":"lineSuffix")(r):e(r)}}const mH={name:"definition",tokenize:yH},gH={partial:!0,tokenize:bH};function yH(t,e,n){const s=this;let r;return i;function i(y){return t.enter("definition"),o(y)}function o(y){return X6.call(s,t,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function c(y){return r=Gr(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)),y===58?(t.enter("definitionMarker"),t.consume(y),t.exit("definitionMarker"),d):n(y)}function d(y){return Wt(y)?Md(t,h)(y):h(y)}function h(y){return Y6(t,g,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function g(y){return t.attempt(gH,m,m)(y)}function m(y){return kt(y)?Et(t,b,"whitespace")(y):b(y)}function b(y){return y===null||et(y)?(t.exit("definition"),s.parser.defined.push(r),e(y)):n(y)}}function bH(t,e,n){return s;function s(c){return Wt(c)?Md(t,r)(c):n(c)}function r(c){return J6(t,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function i(c){return kt(c)?Et(t,o,"whitespace")(c):o(c)}function o(c){return c===null||et(c)?e(c):n(c)}}const vH={name:"hardBreakEscape",tokenize:xH};function xH(t,e,n){return s;function s(i){return t.enter("hardBreakEscape"),t.consume(i),r}function r(i){return et(i)?(t.exit("hardBreakEscape"),e(i)):n(i)}}const _H={name:"headingAtx",resolve:wH,tokenize:SH};function wH(t,e){let n=t.length-2,s=3,r,i;return t[s][1].type==="whitespace"&&(s+=2),n-2>s&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(s===n-1||n-4>s&&t[n-2][1].type==="whitespace")&&(n-=s+1===n?2:4),n>s&&(r={type:"atxHeadingText",start:t[s][1].start,end:t[n][1].end},i={type:"chunkText",start:t[s][1].start,end:t[n][1].end,contentType:"text"},hr(t,s,n-s+1,[["enter",r,e],["enter",i,e],["exit",i,e],["exit",r,e]])),t}function SH(t,e,n){let s=0;return r;function r(g){return t.enter("atxHeading"),i(g)}function i(g){return t.enter("atxHeadingSequence"),o(g)}function o(g){return g===35&&s++<6?(t.consume(g),o):g===null||Wt(g)?(t.exit("atxHeadingSequence"),c(g)):n(g)}function c(g){return g===35?(t.enter("atxHeadingSequence"),d(g)):g===null||et(g)?(t.exit("atxHeading"),e(g)):kt(g)?Et(t,c,"whitespace")(g):(t.enter("atxHeadingText"),h(g))}function d(g){return g===35?(t.consume(g),d):(t.exit("atxHeadingSequence"),c(g))}function h(g){return g===null||g===35||Wt(g)?(t.exit("atxHeadingText"),c(g)):(t.consume(g),h)}}const kH=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],W5=["pre","script","style","textarea"],CH={concrete:!0,name:"htmlFlow",resolveTo:EH,tokenize:jH},NH={partial:!0,tokenize:RH},AH={partial:!0,tokenize:TH};function EH(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function jH(t,e,n){const s=this;let r,i,o,c,d;return h;function h(j){return g(j)}function g(j){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(j),m}function m(j){return j===33?(t.consume(j),b):j===47?(t.consume(j),i=!0,x):j===63?(t.consume(j),r=3,s.interrupt?e:T):Ss(j)?(t.consume(j),o=String.fromCharCode(j),S):n(j)}function b(j){return j===45?(t.consume(j),r=2,y):j===91?(t.consume(j),r=5,c=0,w):Ss(j)?(t.consume(j),r=4,s.interrupt?e:T):n(j)}function y(j){return j===45?(t.consume(j),s.interrupt?e:T):n(j)}function w(j){const Z="CDATA[";return j===Z.charCodeAt(c++)?(t.consume(j),c===Z.length?s.interrupt?e:V:w):n(j)}function x(j){return Ss(j)?(t.consume(j),o=String.fromCharCode(j),S):n(j)}function S(j){if(j===null||j===47||j===62||Wt(j)){const Z=j===47,le=o.toLowerCase();return!Z&&!i&&W5.includes(le)?(r=1,s.interrupt?e(j):V(j)):kH.includes(o.toLowerCase())?(r=6,Z?(t.consume(j),k):s.interrupt?e(j):V(j)):(r=7,s.interrupt&&!s.parser.lazy[s.now().line]?n(j):i?C(j):N(j))}return j===45||ds(j)?(t.consume(j),o+=String.fromCharCode(j),S):n(j)}function k(j){return j===62?(t.consume(j),s.interrupt?e:V):n(j)}function C(j){return kt(j)?(t.consume(j),C):D(j)}function N(j){return j===47?(t.consume(j),D):j===58||j===95||Ss(j)?(t.consume(j),R):kt(j)?(t.consume(j),N):D(j)}function R(j){return j===45||j===46||j===58||j===95||ds(j)?(t.consume(j),R):B(j)}function B(j){return j===61?(t.consume(j),E):kt(j)?(t.consume(j),B):N(j)}function E(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(t.consume(j),d=j,z):kt(j)?(t.consume(j),E):U(j)}function z(j){return j===d?(t.consume(j),d=null,Y):j===null||et(j)?n(j):(t.consume(j),z)}function U(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||Wt(j)?B(j):(t.consume(j),U)}function Y(j){return j===47||j===62||kt(j)?N(j):n(j)}function D(j){return j===62?(t.consume(j),W):n(j)}function W(j){return j===null||et(j)?V(j):kt(j)?(t.consume(j),W):n(j)}function V(j){return j===45&&r===2?(t.consume(j),L):j===60&&r===1?(t.consume(j),J):j===62&&r===4?(t.consume(j),O):j===63&&r===3?(t.consume(j),T):j===93&&r===5?(t.consume(j),P):et(j)&&(r===6||r===7)?(t.exit("htmlFlowData"),t.check(NH,K,q)(j)):j===null||et(j)?(t.exit("htmlFlowData"),q(j)):(t.consume(j),V)}function q(j){return t.check(AH,X,K)(j)}function X(j){return t.enter("lineEnding"),t.consume(j),t.exit("lineEnding"),I}function I(j){return j===null||et(j)?q(j):(t.enter("htmlFlowData"),V(j))}function L(j){return j===45?(t.consume(j),T):V(j)}function J(j){return j===47?(t.consume(j),o="",G):V(j)}function G(j){if(j===62){const Z=o.toLowerCase();return W5.includes(Z)?(t.consume(j),O):V(j)}return Ss(j)&&o.length<8?(t.consume(j),o+=String.fromCharCode(j),G):V(j)}function P(j){return j===93?(t.consume(j),T):V(j)}function T(j){return j===62?(t.consume(j),O):j===45&&r===2?(t.consume(j),T):V(j)}function O(j){return j===null||et(j)?(t.exit("htmlFlowData"),K(j)):(t.consume(j),O)}function K(j){return t.exit("htmlFlow"),e(j)}}function TH(t,e,n){const s=this;return r;function r(o){return et(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):n(o)}function i(o){return s.parser.lazy[s.now().line]?n(o):e(o)}}function RH(t,e,n){return s;function s(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),t.attempt(jf,e,n)}}const OH={name:"htmlText",tokenize:MH};function MH(t,e,n){const s=this;let r,i,o;return c;function c(T){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(T),d}function d(T){return T===33?(t.consume(T),h):T===47?(t.consume(T),B):T===63?(t.consume(T),N):Ss(T)?(t.consume(T),U):n(T)}function h(T){return T===45?(t.consume(T),g):T===91?(t.consume(T),i=0,w):Ss(T)?(t.consume(T),C):n(T)}function g(T){return T===45?(t.consume(T),y):n(T)}function m(T){return T===null?n(T):T===45?(t.consume(T),b):et(T)?(o=m,J(T)):(t.consume(T),m)}function b(T){return T===45?(t.consume(T),y):m(T)}function y(T){return T===62?L(T):T===45?b(T):m(T)}function w(T){const O="CDATA[";return T===O.charCodeAt(i++)?(t.consume(T),i===O.length?x:w):n(T)}function x(T){return T===null?n(T):T===93?(t.consume(T),S):et(T)?(o=x,J(T)):(t.consume(T),x)}function S(T){return T===93?(t.consume(T),k):x(T)}function k(T){return T===62?L(T):T===93?(t.consume(T),k):x(T)}function C(T){return T===null||T===62?L(T):et(T)?(o=C,J(T)):(t.consume(T),C)}function N(T){return T===null?n(T):T===63?(t.consume(T),R):et(T)?(o=N,J(T)):(t.consume(T),N)}function R(T){return T===62?L(T):N(T)}function B(T){return Ss(T)?(t.consume(T),E):n(T)}function E(T){return T===45||ds(T)?(t.consume(T),E):z(T)}function z(T){return et(T)?(o=z,J(T)):kt(T)?(t.consume(T),z):L(T)}function U(T){return T===45||ds(T)?(t.consume(T),U):T===47||T===62||Wt(T)?Y(T):n(T)}function Y(T){return T===47?(t.consume(T),L):T===58||T===95||Ss(T)?(t.consume(T),D):et(T)?(o=Y,J(T)):kt(T)?(t.consume(T),Y):L(T)}function D(T){return T===45||T===46||T===58||T===95||ds(T)?(t.consume(T),D):W(T)}function W(T){return T===61?(t.consume(T),V):et(T)?(o=W,J(T)):kt(T)?(t.consume(T),W):Y(T)}function V(T){return T===null||T===60||T===61||T===62||T===96?n(T):T===34||T===39?(t.consume(T),r=T,q):et(T)?(o=V,J(T)):kt(T)?(t.consume(T),V):(t.consume(T),X)}function q(T){return T===r?(t.consume(T),r=void 0,I):T===null?n(T):et(T)?(o=q,J(T)):(t.consume(T),q)}function X(T){return T===null||T===34||T===39||T===60||T===61||T===96?n(T):T===47||T===62||Wt(T)?Y(T):(t.consume(T),X)}function I(T){return T===47||T===62||Wt(T)?Y(T):n(T)}function L(T){return T===62?(t.consume(T),t.exit("htmlTextData"),t.exit("htmlText"),e):n(T)}function J(T){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(T),t.exit("lineEnding"),G}function G(T){return kt(T)?Et(t,P,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(T):P(T)}function P(T){return t.enter("htmlTextData"),o(T)}}const u2={name:"labelEnd",resolveAll:IH,resolveTo:PH,tokenize:$H},BH={tokenize:zH},DH={tokenize:HH},LH={tokenize:UH};function IH(t){let e=-1;const n=[];for(;++e<t.length;){const s=t[e][1];if(n.push(t[e]),s.type==="labelImage"||s.type==="labelLink"||s.type==="labelEnd"){const r=s.type==="labelImage"?4:2;s.type="data",e+=r}}return t.length!==n.length&&hr(t,0,t.length,n),t}function PH(t,e){let n=t.length,s=0,r,i,o,c;for(;n--;)if(r=t[n][1],i){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;t[n][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(i=n,r.type!=="labelLink")){s=2;break}}else r.type==="labelEnd"&&(o=n);const d={type:t[i][1].type==="labelLink"?"link":"image",start:{...t[i][1].start},end:{...t[t.length-1][1].end}},h={type:"label",start:{...t[i][1].start},end:{...t[o][1].end}},g={type:"labelText",start:{...t[i+s+2][1].end},end:{...t[o-2][1].start}};return c=[["enter",d,e],["enter",h,e]],c=Er(c,t.slice(i+1,i+s+3)),c=Er(c,[["enter",g,e]]),c=Er(c,Wg(e.parser.constructs.insideSpan.null,t.slice(i+s+4,o-3),e)),c=Er(c,[["exit",g,e],t[o-2],t[o-1],["exit",h,e]]),c=Er(c,t.slice(o+1)),c=Er(c,[["exit",d,e]]),hr(t,i,t.length,c),t}function $H(t,e,n){const s=this;let r=s.events.length,i,o;for(;r--;)if((s.events[r][1].type==="labelImage"||s.events[r][1].type==="labelLink")&&!s.events[r][1]._balanced){i=s.events[r][1];break}return c;function c(b){return i?i._inactive?m(b):(o=s.parser.defined.includes(Gr(s.sliceSerialize({start:i.end,end:s.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(b),t.exit("labelMarker"),t.exit("labelEnd"),d):n(b)}function d(b){return b===40?t.attempt(BH,g,o?g:m)(b):b===91?t.attempt(DH,g,o?h:m)(b):o?g(b):m(b)}function h(b){return t.attempt(LH,g,m)(b)}function g(b){return e(b)}function m(b){return i._balanced=!0,n(b)}}function zH(t,e,n){return s;function s(m){return t.enter("resource"),t.enter("resourceMarker"),t.consume(m),t.exit("resourceMarker"),r}function r(m){return Wt(m)?Md(t,i)(m):i(m)}function i(m){return m===41?g(m):Y6(t,o,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(m)}function o(m){return Wt(m)?Md(t,d)(m):g(m)}function c(m){return n(m)}function d(m){return m===34||m===39||m===40?J6(t,h,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(m):g(m)}function h(m){return Wt(m)?Md(t,g)(m):g(m)}function g(m){return m===41?(t.enter("resourceMarker"),t.consume(m),t.exit("resourceMarker"),t.exit("resource"),e):n(m)}}function HH(t,e,n){const s=this;return r;function r(c){return X6.call(s,t,i,o,"reference","referenceMarker","referenceString")(c)}function i(c){return s.parser.defined.includes(Gr(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)))?e(c):n(c)}function o(c){return n(c)}}function UH(t,e,n){return s;function s(i){return t.enter("reference"),t.enter("referenceMarker"),t.consume(i),t.exit("referenceMarker"),r}function r(i){return i===93?(t.enter("referenceMarker"),t.consume(i),t.exit("referenceMarker"),t.exit("reference"),e):n(i)}}const VH={name:"labelStartImage",resolveAll:u2.resolveAll,tokenize:FH};function FH(t,e,n){const s=this;return r;function r(c){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(c),t.exit("labelImageMarker"),i}function i(c){return c===91?(t.enter("labelMarker"),t.consume(c),t.exit("labelMarker"),t.exit("labelImage"),o):n(c)}function o(c){return c===94&&"_hiddenFootnoteSupport"in s.parser.constructs?n(c):e(c)}}const qH={name:"labelStartLink",resolveAll:u2.resolveAll,tokenize:KH};function KH(t,e,n){const s=this;return r;function r(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),i}function i(o){return o===94&&"_hiddenFootnoteSupport"in s.parser.constructs?n(o):e(o)}}const Pv={name:"lineEnding",tokenize:WH};function WH(t,e){return n;function n(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),Et(t,e,"linePrefix")}}const r0={name:"thematicBreak",tokenize:GH};function GH(t,e,n){let s=0,r;return i;function i(h){return t.enter("thematicBreak"),o(h)}function o(h){return r=h,c(h)}function c(h){return h===r?(t.enter("thematicBreakSequence"),d(h)):s>=3&&(h===null||et(h))?(t.exit("thematicBreak"),e(h)):n(h)}function d(h){return h===r?(t.consume(h),s++,d):(t.exit("thematicBreakSequence"),kt(h)?Et(t,c,"whitespace")(h):c(h))}}const zs={continuation:{tokenize:QH},exit:eU,name:"list",tokenize:JH},YH={partial:!0,tokenize:tU},XH={partial:!0,tokenize:ZH};function JH(t,e,n){const s=this,r=s.events[s.events.length-1];let i=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,o=0;return c;function c(y){const w=s.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(w==="listUnordered"?!s.containerState.marker||y===s.containerState.marker:a_(y)){if(s.containerState.type||(s.containerState.type=w,t.enter(w,{_container:!0})),w==="listUnordered")return t.enter("listItemPrefix"),y===42||y===45?t.check(r0,n,h)(y):h(y);if(!s.interrupt||y===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),d(y)}return n(y)}function d(y){return a_(y)&&++o<10?(t.consume(y),d):(!s.interrupt||o<2)&&(s.containerState.marker?y===s.containerState.marker:y===41||y===46)?(t.exit("listItemValue"),h(y)):n(y)}function h(y){return t.enter("listItemMarker"),t.consume(y),t.exit("listItemMarker"),s.containerState.marker=s.containerState.marker||y,t.check(jf,s.interrupt?n:g,t.attempt(YH,b,m))}function g(y){return s.containerState.initialBlankLine=!0,i++,b(y)}function m(y){return kt(y)?(t.enter("listItemPrefixWhitespace"),t.consume(y),t.exit("listItemPrefixWhitespace"),b):n(y)}function b(y){return s.containerState.size=i+s.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(y)}}function QH(t,e,n){const s=this;return s.containerState._closeFlow=void 0,t.check(jf,r,i);function r(c){return s.containerState.furtherBlankLines=s.containerState.furtherBlankLines||s.containerState.initialBlankLine,Et(t,e,"listItemIndent",s.containerState.size+1)(c)}function i(c){return s.containerState.furtherBlankLines||!kt(c)?(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,o(c)):(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,t.attempt(XH,e,o)(c))}function o(c){return s.containerState._closeFlow=!0,s.interrupt=void 0,Et(t,t.attempt(zs,e,n),"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function ZH(t,e,n){const s=this;return Et(t,r,"listItemIndent",s.containerState.size+1);function r(i){const o=s.events[s.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===s.containerState.size?e(i):n(i)}}function eU(t){t.exit(this.containerState.type)}function tU(t,e,n){const s=this;return Et(t,r,"listItemPrefixWhitespace",s.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(i){const o=s.events[s.events.length-1];return!kt(i)&&o&&o[1].type==="listItemPrefixWhitespace"?e(i):n(i)}}const G5={name:"setextUnderline",resolveTo:nU,tokenize:sU};function nU(t,e){let n=t.length,s,r,i;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){s=n;break}t[n][1].type==="paragraph"&&(r=n)}else t[n][1].type==="content"&&t.splice(n,1),!i&&t[n][1].type==="definition"&&(i=n);const o={type:"setextHeading",start:{...t[s][1].start},end:{...t[t.length-1][1].end}};return t[r][1].type="setextHeadingText",i?(t.splice(r,0,["enter",o,e]),t.splice(i+1,0,["exit",t[s][1],e]),t[s][1].end={...t[i][1].end}):t[s][1]=o,t.push(["exit",o,e]),t}function sU(t,e,n){const s=this;let r;return i;function i(h){let g=s.events.length,m;for(;g--;)if(s.events[g][1].type!=="lineEnding"&&s.events[g][1].type!=="linePrefix"&&s.events[g][1].type!=="content"){m=s.events[g][1].type==="paragraph";break}return!s.parser.lazy[s.now().line]&&(s.interrupt||m)?(t.enter("setextHeadingLine"),r=h,o(h)):n(h)}function o(h){return t.enter("setextHeadingLineSequence"),c(h)}function c(h){return h===r?(t.consume(h),c):(t.exit("setextHeadingLineSequence"),kt(h)?Et(t,d,"lineSuffix")(h):d(h))}function d(h){return h===null||et(h)?(t.exit("setextHeadingLine"),e(h)):n(h)}}const rU={tokenize:iU};function iU(t){const e=this,n=t.attempt(jf,s,t.attempt(this.parser.constructs.flowInitial,r,Et(t,t.attempt(this.parser.constructs.flow,r,t.attempt(uH,r)),"linePrefix")));return n;function s(i){if(i===null){t.consume(i);return}return t.enter("lineEndingBlank"),t.consume(i),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function r(i){if(i===null){t.consume(i);return}return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const aU={resolveAll:Z6()},oU=Q6("string"),lU=Q6("text");function Q6(t){return{resolveAll:Z6(t==="text"?cU:void 0),tokenize:e};function e(n){const s=this,r=this.parser.constructs[t],i=n.attempt(r,o,c);return o;function o(g){return h(g)?i(g):c(g)}function c(g){if(g===null){n.consume(g);return}return n.enter("data"),n.consume(g),d}function d(g){return h(g)?(n.exit("data"),i(g)):(n.consume(g),d)}function h(g){if(g===null)return!0;const m=r[g];let b=-1;if(m)for(;++b<m.length;){const y=m[b];if(!y.previous||y.previous.call(s,s.previous))return!0}return!1}}}function Z6(t){return e;function e(n,s){let r=-1,i;for(;++r<=n.length;)i===void 0?n[r]&&n[r][1].type==="data"&&(i=r,r++):(!n[r]||n[r][1].type!=="data")&&(r!==i+2&&(n[i][1].end=n[r-1][1].end,n.splice(i+2,r-i-2),r=i+2),i=void 0);return t?t(n,s):n}}function cU(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const s=t[n-1][1],r=e.sliceStream(s);let i=r.length,o=-1,c=0,d;for(;i--;){const h=r[i];if(typeof h=="string"){for(o=h.length;h.charCodeAt(o-1)===32;)c++,o--;if(o)break;o=-1}else if(h===-2)d=!0,c++;else if(h!==-1){i++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(c=0),c){const h={type:n===t.length||d||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?o:s.start._bufferIndex+o,_index:s.start._index+i,line:s.end.line,column:s.end.column-c,offset:s.end.offset-c},end:{...s.end}};s.end={...h.start},s.start.offset===s.end.offset?Object.assign(s,h):(t.splice(n,0,["enter",h,e],["exit",h,e]),n+=2)}n++}return t}const uU={42:zs,43:zs,45:zs,48:zs,49:zs,50:zs,51:zs,52:zs,53:zs,54:zs,55:zs,56:zs,57:zs,62:q6},hU={91:mH},dU={[-2]:Iv,[-1]:Iv,32:Iv},fU={35:_H,42:r0,45:[G5,r0],60:CH,61:G5,95:r0,96:K5,126:K5},pU={38:W6,92:K6},mU={[-5]:Pv,[-4]:Pv,[-3]:Pv,33:VH,38:W6,42:o_,60:[q9,OH],91:qH,92:[vH,K6],93:u2,95:o_,96:rH},gU={null:[o_,aU]},yU={null:[42,95]},bU={null:[]},vU=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:yU,contentInitial:hU,disable:bU,document:uU,flow:fU,flowInitial:dU,insideSpan:gU,string:pU,text:mU},Symbol.toStringTag,{value:"Module"}));function xU(t,e,n){let s={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const r={},i=[];let o=[],c=[];const d={attempt:z(B),check:z(E),consume:C,enter:N,exit:R,interrupt:z(E,{interrupt:!0})},h={code:null,containerState:{},defineSkip:x,events:[],now:w,parser:t,previous:null,sliceSerialize:b,sliceStream:y,write:m};let g=e.tokenize.call(h,d);return e.resolveAll&&i.push(e),h;function m(W){return o=Er(o,W),S(),o[o.length-1]!==null?[]:(U(e,0),h.events=Wg(i,h.events,h),h.events)}function b(W,V){return wU(y(W),V)}function y(W){return _U(o,W)}function w(){const{_bufferIndex:W,_index:V,line:q,column:X,offset:I}=s;return{_bufferIndex:W,_index:V,line:q,column:X,offset:I}}function x(W){r[W.line]=W.column,D()}function S(){let W;for(;s._index<o.length;){const V=o[s._index];if(typeof V=="string")for(W=s._index,s._bufferIndex<0&&(s._bufferIndex=0);s._index===W&&s._bufferIndex<V.length;)k(V.charCodeAt(s._bufferIndex));else k(V)}}function k(W){g=g(W)}function C(W){et(W)?(s.line++,s.column=1,s.offset+=W===-3?2:1,D()):W!==-1&&(s.column++,s.offset++),s._bufferIndex<0?s._index++:(s._bufferIndex++,s._bufferIndex===o[s._index].length&&(s._bufferIndex=-1,s._index++)),h.previous=W}function N(W,V){const q=V||{};return q.type=W,q.start=w(),h.events.push(["enter",q,h]),c.push(q),q}function R(W){const V=c.pop();return V.end=w(),h.events.push(["exit",V,h]),V}function B(W,V){U(W,V.from)}function E(W,V){V.restore()}function z(W,V){return q;function q(X,I,L){let J,G,P,T;return Array.isArray(X)?K(X):"tokenize"in X?K([X]):O(X);function O(te){return pe;function pe(_e){const Ce=_e!==null&&te[_e],tt=_e!==null&&te.null,Ee=[...Array.isArray(Ce)?Ce:Ce?[Ce]:[],...Array.isArray(tt)?tt:tt?[tt]:[]];return K(Ee)(_e)}}function K(te){return J=te,G=0,te.length===0?L:j(te[G])}function j(te){return pe;function pe(_e){return T=Y(),P=te,te.partial||(h.currentConstruct=te),te.name&&h.parser.constructs.disable.null.includes(te.name)?le():te.tokenize.call(V?Object.assign(Object.create(h),V):h,d,Z,le)(_e)}}function Z(te){return W(P,T),I}function le(te){return T.restore(),++G<J.length?j(J[G]):L}}}function U(W,V){W.resolveAll&&!i.includes(W)&&i.push(W),W.resolve&&hr(h.events,V,h.events.length-V,W.resolve(h.events.slice(V),h)),W.resolveTo&&(h.events=W.resolveTo(h.events,h))}function Y(){const W=w(),V=h.previous,q=h.currentConstruct,X=h.events.length,I=Array.from(c);return{from:X,restore:L};function L(){s=W,h.previous=V,h.currentConstruct=q,h.events.length=X,c=I,D()}}function D(){s.line in r&&s.column<2&&(s.column=r[s.line],s.offset+=r[s.line]-1)}}function _U(t,e){const n=e.start._index,s=e.start._bufferIndex,r=e.end._index,i=e.end._bufferIndex;let o;if(n===r)o=[t[n].slice(s,i)];else{if(o=t.slice(n,r),s>-1){const c=o[0];typeof c=="string"?o[0]=c.slice(s):o.shift()}i>0&&o.push(t[r].slice(0,i))}return o}function wU(t,e){let n=-1;const s=[];let r;for(;++n<t.length;){const i=t[n];let o;if(typeof i=="string")o=i;else switch(i){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&r)continue;o=" ";break}default:o=String.fromCharCode(i)}r=i===-2,s.push(o)}return s.join("")}function SU(t){const s={constructs:V6([vU,...(t||{}).extensions||[]]),content:r(P9),defined:[],document:r(z9),flow:r(rU),lazy:{},string:r(oU),text:r(lU)};return s;function r(i){return o;function o(c){return xU(s,i,c)}}}function kU(t){for(;!G6(t););return t}const Y5=/[\0\t\n\r]/g;function CU(){let t=1,e="",n=!0,s;return r;function r(i,o,c){const d=[];let h,g,m,b,y;for(i=e+(typeof i=="string"?i.toString():new TextDecoder(o||void 0).decode(i)),m=0,e="",n&&(i.charCodeAt(0)===65279&&m++,n=void 0);m<i.length;){if(Y5.lastIndex=m,h=Y5.exec(i),b=h&&h.index!==void 0?h.index:i.length,y=i.charCodeAt(b),!h){e=i.slice(m);break}if(y===10&&m===b&&s)d.push(-3),s=void 0;else switch(s&&(d.push(-5),s=void 0),m<b&&(d.push(i.slice(m,b)),t+=b-m),y){case 0:{d.push(65533),t++;break}case 9:{for(g=Math.ceil(t/4)*4,d.push(-2);t++<g;)d.push(-1);break}case 10:{d.push(-4),t=1;break}default:s=!0,t=1}m=b+1}return c&&(s&&d.push(-5),e&&d.push(e),d.push(null)),d}}const NU=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function AU(t){return t.replace(NU,EU)}function EU(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const r=n.charCodeAt(1),i=r===120||r===88;return F6(n.slice(i?2:1),i?16:10)}return c2(n)||t}const eO={}.hasOwnProperty;function jU(t,e,n){return typeof e!="string"&&(n=e,e=void 0),TU(n)(kU(SU(n).document().write(CU()(t,e,!0))))}function TU(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(ls),autolinkProtocol:Y,autolinkEmail:Y,atxHeading:i(qt),blockQuote:i(tt),characterEscape:Y,characterReference:Y,codeFenced:i(Ee),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:i(Ee,o),codeText:i(Je,o),codeTextData:Y,data:Y,codeFlowValue:Y,definition:i(Ue),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:i(bt),hardBreakEscape:i(It),hardBreakTrailing:i(It),htmlFlow:i(Pt,o),htmlFlowData:Y,htmlText:i(Pt,o),htmlTextData:Y,image:i(Wn),label:o,link:i(ls),listItem:i(Qe),listItemValue:b,listOrdered:i(ys,m),listUnordered:i(ys),paragraph:i(rt),reference:j,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:i(qt),strong:i(Mt),thematicBreak:i(cn)},exit:{atxHeading:d(),atxHeadingSequence:B,autolink:d(),autolinkEmail:Ce,autolinkProtocol:_e,blockQuote:d(),characterEscapeValue:D,characterReferenceMarkerHexadecimal:le,characterReferenceMarkerNumeric:le,characterReferenceValue:te,characterReference:pe,codeFenced:d(S),codeFencedFence:x,codeFencedFenceInfo:y,codeFencedFenceMeta:w,codeFlowValue:D,codeIndented:d(k),codeText:d(I),codeTextData:D,data:D,definition:d(),definitionDestinationString:R,definitionLabelString:C,definitionTitleString:N,emphasis:d(),hardBreakEscape:d(V),hardBreakTrailing:d(V),htmlFlow:d(q),htmlFlowData:D,htmlText:d(X),htmlTextData:D,image:d(J),label:P,labelText:G,lineEnding:W,link:d(L),listItem:d(),listOrdered:d(),listUnordered:d(),paragraph:d(),referenceString:Z,resourceDestinationString:T,resourceTitleString:O,resource:K,setextHeading:d(U),setextHeadingLineSequence:z,setextHeadingText:E,strong:d(),thematicBreak:d()}};tO(e,(t||{}).mdastExtensions||[]);const n={};return s;function s(fe){let we={type:"root",children:[]};const qe={stack:[we],tokenStack:[],config:e,enter:c,exit:h,buffer:o,resume:g,data:n},Ze=[];let ct=-1;for(;++ct<fe.length;)if(fe[ct][1].type==="listOrdered"||fe[ct][1].type==="listUnordered")if(fe[ct][0]==="enter")Ze.push(ct);else{const en=Ze.pop();ct=r(fe,en,ct)}for(ct=-1;++ct<fe.length;){const en=e[fe[ct][0]];eO.call(en,fe[ct][1].type)&&en[fe[ct][1].type].call(Object.assign({sliceSerialize:fe[ct][2].sliceSerialize},qe),fe[ct][1])}if(qe.tokenStack.length>0){const en=qe.tokenStack[qe.tokenStack.length-1];(en[1]||X5).call(qe,void 0,en[0])}for(we.position={start:qa(fe.length>0?fe[0][1].start:{line:1,column:1,offset:0}),end:qa(fe.length>0?fe[fe.length-2][1].end:{line:1,column:1,offset:0})},ct=-1;++ct<e.transforms.length;)we=e.transforms[ct](we)||we;return we}function r(fe,we,qe){let Ze=we-1,ct=-1,en=!1,se,ie,he,Se;for(;++Ze<=qe;){const me=fe[Ze];switch(me[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{me[0]==="enter"?ct++:ct--,Se=void 0;break}case"lineEndingBlank":{me[0]==="enter"&&(se&&!Se&&!ct&&!he&&(he=Ze),Se=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Se=void 0}if(!ct&&me[0]==="enter"&&me[1].type==="listItemPrefix"||ct===-1&&me[0]==="exit"&&(me[1].type==="listUnordered"||me[1].type==="listOrdered")){if(se){let Pe=Ze;for(ie=void 0;Pe--;){const st=fe[Pe];if(st[1].type==="lineEnding"||st[1].type==="lineEndingBlank"){if(st[0]==="exit")continue;ie&&(fe[ie][1].type="lineEndingBlank",en=!0),st[1].type="lineEnding",ie=Pe}else if(!(st[1].type==="linePrefix"||st[1].type==="blockQuotePrefix"||st[1].type==="blockQuotePrefixWhitespace"||st[1].type==="blockQuoteMarker"||st[1].type==="listItemIndent"))break}he&&(!ie||he<ie)&&(se._spread=!0),se.end=Object.assign({},ie?fe[ie][1].start:me[1].end),fe.splice(ie||Ze,0,["exit",se,me[2]]),Ze++,qe++}if(me[1].type==="listItemPrefix"){const Pe={type:"listItem",_spread:!1,start:Object.assign({},me[1].start),end:void 0};se=Pe,fe.splice(Ze,0,["enter",Pe,me[2]]),Ze++,qe++,he=void 0,Se=!0}}}return fe[we][1]._spread=en,qe}function i(fe,we){return qe;function qe(Ze){c.call(this,fe(Ze),Ze),we&&we.call(this,Ze)}}function o(){this.stack.push({type:"fragment",children:[]})}function c(fe,we,qe){this.stack[this.stack.length-1].children.push(fe),this.stack.push(fe),this.tokenStack.push([we,qe||void 0]),fe.position={start:qa(we.start),end:void 0}}function d(fe){return we;function we(qe){fe&&fe.call(this,qe),h.call(this,qe)}}function h(fe,we){const qe=this.stack.pop(),Ze=this.tokenStack.pop();if(Ze)Ze[0].type!==fe.type&&(we?we.call(this,fe,Ze[0]):(Ze[1]||X5).call(this,fe,Ze[0]));else throw new Error("Cannot close `"+fe.type+"` ("+Od({start:fe.start,end:fe.end})+"): its not open");qe.position.end=qa(fe.end)}function g(){return l2(this.stack.pop())}function m(){this.data.expectingFirstListItemValue=!0}function b(fe){if(this.data.expectingFirstListItemValue){const we=this.stack[this.stack.length-2];we.start=Number.parseInt(this.sliceSerialize(fe),10),this.data.expectingFirstListItemValue=void 0}}function y(){const fe=this.resume(),we=this.stack[this.stack.length-1];we.lang=fe}function w(){const fe=this.resume(),we=this.stack[this.stack.length-1];we.meta=fe}function x(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function S(){const fe=this.resume(),we=this.stack[this.stack.length-1];we.value=fe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function k(){const fe=this.resume(),we=this.stack[this.stack.length-1];we.value=fe.replace(/(\r?\n|\r)$/g,"")}function C(fe){const we=this.resume(),qe=this.stack[this.stack.length-1];qe.label=we,qe.identifier=Gr(this.sliceSerialize(fe)).toLowerCase()}function N(){const fe=this.resume(),we=this.stack[this.stack.length-1];we.title=fe}function R(){const fe=this.resume(),we=this.stack[this.stack.length-1];we.url=fe}function B(fe){const we=this.stack[this.stack.length-1];if(!we.depth){const qe=this.sliceSerialize(fe).length;we.depth=qe}}function E(){this.data.setextHeadingSlurpLineEnding=!0}function z(fe){const we=this.stack[this.stack.length-1];we.depth=this.sliceSerialize(fe).codePointAt(0)===61?1:2}function U(){this.data.setextHeadingSlurpLineEnding=void 0}function Y(fe){const qe=this.stack[this.stack.length-1].children;let Ze=qe[qe.length-1];(!Ze||Ze.type!=="text")&&(Ze=_t(),Ze.position={start:qa(fe.start),end:void 0},qe.push(Ze)),this.stack.push(Ze)}function D(fe){const we=this.stack.pop();we.value+=this.sliceSerialize(fe),we.position.end=qa(fe.end)}function W(fe){const we=this.stack[this.stack.length-1];if(this.data.atHardBreak){const qe=we.children[we.children.length-1];qe.position.end=qa(fe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(we.type)&&(Y.call(this,fe),D.call(this,fe))}function V(){this.data.atHardBreak=!0}function q(){const fe=this.resume(),we=this.stack[this.stack.length-1];we.value=fe}function X(){const fe=this.resume(),we=this.stack[this.stack.length-1];we.value=fe}function I(){const fe=this.resume(),we=this.stack[this.stack.length-1];we.value=fe}function L(){const fe=this.stack[this.stack.length-1];if(this.data.inReference){const we=this.data.referenceType||"shortcut";fe.type+="Reference",fe.referenceType=we,delete fe.url,delete fe.title}else delete fe.identifier,delete fe.label;this.data.referenceType=void 0}function J(){const fe=this.stack[this.stack.length-1];if(this.data.inReference){const we=this.data.referenceType||"shortcut";fe.type+="Reference",fe.referenceType=we,delete fe.url,delete fe.title}else delete fe.identifier,delete fe.label;this.data.referenceType=void 0}function G(fe){const we=this.sliceSerialize(fe),qe=this.stack[this.stack.length-2];qe.label=AU(we),qe.identifier=Gr(we).toLowerCase()}function P(){const fe=this.stack[this.stack.length-1],we=this.resume(),qe=this.stack[this.stack.length-1];if(this.data.inReference=!0,qe.type==="link"){const Ze=fe.children;qe.children=Ze}else qe.alt=we}function T(){const fe=this.resume(),we=this.stack[this.stack.length-1];we.url=fe}function O(){const fe=this.resume(),we=this.stack[this.stack.length-1];we.title=fe}function K(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function Z(fe){const we=this.resume(),qe=this.stack[this.stack.length-1];qe.label=we,qe.identifier=Gr(this.sliceSerialize(fe)).toLowerCase(),this.data.referenceType="full"}function le(fe){this.data.characterReferenceType=fe.type}function te(fe){const we=this.sliceSerialize(fe),qe=this.data.characterReferenceType;let Ze;qe?(Ze=F6(we,qe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ze=c2(we);const ct=this.stack[this.stack.length-1];ct.value+=Ze}function pe(fe){const we=this.stack.pop();we.position.end=qa(fe.end)}function _e(fe){D.call(this,fe);const we=this.stack[this.stack.length-1];we.url=this.sliceSerialize(fe)}function Ce(fe){D.call(this,fe);const we=this.stack[this.stack.length-1];we.url="mailto:"+this.sliceSerialize(fe)}function tt(){return{type:"blockquote",children:[]}}function Ee(){return{type:"code",lang:null,meta:null,value:""}}function Je(){return{type:"inlineCode",value:""}}function Ue(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function bt(){return{type:"emphasis",children:[]}}function qt(){return{type:"heading",depth:0,children:[]}}function It(){return{type:"break"}}function Pt(){return{type:"html",value:""}}function Wn(){return{type:"image",title:null,url:"",alt:null}}function ls(){return{type:"link",title:null,url:"",children:[]}}function ys(fe){return{type:"list",ordered:fe.type==="listOrdered",start:null,spread:fe._spread,children:[]}}function Qe(fe){return{type:"listItem",spread:fe._spread,checked:null,children:[]}}function rt(){return{type:"paragraph",children:[]}}function Mt(){return{type:"strong",children:[]}}function _t(){return{type:"text",value:""}}function cn(){return{type:"thematicBreak"}}}function qa(t){return{line:t.line,column:t.column,offset:t.offset}}function tO(t,e){let n=-1;for(;++n<e.length;){const s=e[n];Array.isArray(s)?tO(t,s):RU(t,s)}}function RU(t,e){let n;for(n in e)if(eO.call(e,n))switch(n){case"canContainEols":{const s=e[n];s&&t[n].push(...s);break}case"transforms":{const s=e[n];s&&t[n].push(...s);break}case"enter":case"exit":{const s=e[n];s&&Object.assign(t[n],s);break}}}function X5(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Od({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Od({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Od({start:e.start,end:e.end})+") is still open")}function OU(t){const e=this;e.parser=n;function n(s){return jU(s,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function MU(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function BU(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function DU(t,e){const n=e.value?e.value+`
`:"",s={},r=e.lang?e.lang.split(/\s+/):[];r.length>0&&(s.className=["language-"+r[0]]);let i={type:"element",tagName:"code",properties:s,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function LU(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function IU(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function PU(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",s=String(e.identifier).toUpperCase(),r=vu(s.toLowerCase()),i=t.footnoteOrder.indexOf(s);let o,c=t.footnoteCounts.get(s);c===void 0?(c=0,t.footnoteOrder.push(s),o=t.footnoteOrder.length):o=i+1,c+=1,t.footnoteCounts.set(s,c);const d={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+r,id:n+"fnref-"+r+(c>1?"-"+c:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,d);const h={type:"element",tagName:"sup",properties:{},children:[d]};return t.patch(e,h),t.applyData(e,h)}function $U(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function zU(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function nO(t,e){const n=e.referenceType;let s="]";if(n==="collapsed"?s+="[]":n==="full"&&(s+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+s}];const r=t.all(e),i=r[0];i&&i.type==="text"?i.value="["+i.value:r.unshift({type:"text",value:"["});const o=r[r.length-1];return o&&o.type==="text"?o.value+=s:r.push({type:"text",value:s}),r}function HU(t,e){const n=String(e.identifier).toUpperCase(),s=t.definitionById.get(n);if(!s)return nO(t,e);const r={src:vu(s.url||""),alt:e.alt};s.title!==null&&s.title!==void 0&&(r.title=s.title);const i={type:"element",tagName:"img",properties:r,children:[]};return t.patch(e,i),t.applyData(e,i)}function UU(t,e){const n={src:vu(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const s={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,s),t.applyData(e,s)}function VU(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const s={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,s),t.applyData(e,s)}function FU(t,e){const n=String(e.identifier).toUpperCase(),s=t.definitionById.get(n);if(!s)return nO(t,e);const r={href:vu(s.url||"")};s.title!==null&&s.title!==void 0&&(r.title=s.title);const i={type:"element",tagName:"a",properties:r,children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function qU(t,e){const n={href:vu(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const s={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function KU(t,e,n){const s=t.all(e),r=n?WU(n):sO(e),i={},o=[];if(typeof e.checked=="boolean"){const g=s[0];let m;g&&g.type==="element"&&g.tagName==="p"?m=g:(m={type:"element",tagName:"p",properties:{},children:[]},s.unshift(m)),m.children.length>0&&m.children.unshift({type:"text",value:" "}),m.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let c=-1;for(;++c<s.length;){const g=s[c];(r||c!==0||g.type!=="element"||g.tagName!=="p")&&o.push({type:"text",value:`
`}),g.type==="element"&&g.tagName==="p"&&!r?o.push(...g.children):o.push(g)}const d=s[s.length-1];d&&(r||d.type!=="element"||d.tagName!=="p")&&o.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:i,children:o};return t.patch(e,h),t.applyData(e,h)}function WU(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let s=-1;for(;!e&&++s<n.length;)e=sO(n[s])}return e}function sO(t){const e=t.spread;return e??t.children.length>1}function GU(t,e){const n={},s=t.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++r<s.length;){const o=s[r];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(s,!0)};return t.patch(e,i),t.applyData(e,i)}function YU(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function XU(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function JU(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function QU(t,e){const n=t.all(e),s=n.shift(),r=[];if(s){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([s],!0)};t.patch(e.children[0],o),r.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},c=r2(e.children[1]),d=L6(e.children[e.children.length-1]);c&&d&&(o.position={start:c,end:d}),r.push(o)}const i={type:"element",tagName:"table",properties:{},children:t.wrap(r,!0)};return t.patch(e,i),t.applyData(e,i)}function ZU(t,e,n){const s=n?n.children:void 0,i=(s?s.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,c=o?o.length:e.children.length;let d=-1;const h=[];for(;++d<c;){const m=e.children[d],b={},y=o?o[d]:void 0;y&&(b.align=y);let w={type:"element",tagName:i,properties:b,children:[]};m&&(w.children=t.all(m),t.patch(m,w),w=t.applyData(m,w)),h.push(w)}const g={type:"element",tagName:"tr",properties:{},children:t.wrap(h,!0)};return t.patch(e,g),t.applyData(e,g)}function eV(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const J5=9,Q5=32;function tV(t){const e=String(t),n=/\r?\n|\r/g;let s=n.exec(e),r=0;const i=[];for(;s;)i.push(Z5(e.slice(r,s.index),r>0,!0),s[0]),r=s.index+s[0].length,s=n.exec(e);return i.push(Z5(e.slice(r),r>0,!1)),i.join("")}function Z5(t,e,n){let s=0,r=t.length;if(e){let i=t.codePointAt(s);for(;i===J5||i===Q5;)s++,i=t.codePointAt(s)}if(n){let i=t.codePointAt(r-1);for(;i===J5||i===Q5;)r--,i=t.codePointAt(r-1)}return r>s?t.slice(s,r):""}function nV(t,e){const n={type:"text",value:tV(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function sV(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const rV={blockquote:MU,break:BU,code:DU,delete:LU,emphasis:IU,footnoteReference:PU,heading:$U,html:zU,imageReference:HU,image:UU,inlineCode:VU,linkReference:FU,link:qU,listItem:KU,list:GU,paragraph:YU,root:XU,strong:JU,table:QU,tableCell:eV,tableRow:ZU,text:nV,thematicBreak:sV,toml:wm,yaml:wm,definition:wm,footnoteDefinition:wm};function wm(){}const rO=-1,Gg=0,Bd=1,L0=2,h2=3,d2=4,f2=5,p2=6,iO=7,aO=8,eE=typeof self=="object"?self:globalThis,iV=(t,e)=>{const n=(r,i)=>(t.set(i,r),r),s=r=>{if(t.has(r))return t.get(r);const[i,o]=e[r];switch(i){case Gg:case rO:return n(o,r);case Bd:{const c=n([],r);for(const d of o)c.push(s(d));return c}case L0:{const c=n({},r);for(const[d,h]of o)c[s(d)]=s(h);return c}case h2:return n(new Date(o),r);case d2:{const{source:c,flags:d}=o;return n(new RegExp(c,d),r)}case f2:{const c=n(new Map,r);for(const[d,h]of o)c.set(s(d),s(h));return c}case p2:{const c=n(new Set,r);for(const d of o)c.add(s(d));return c}case iO:{const{name:c,message:d}=o;return n(new eE[c](d),r)}case aO:return n(BigInt(o),r);case"BigInt":return n(Object(BigInt(o)),r);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:c}=new Uint8Array(o);return n(new DataView(c),o)}}return n(new eE[i](o),r)};return s},tE=t=>iV(new Map,t)(0),vc="",{toString:aV}={},{keys:oV}=Object,Bh=t=>{const e=typeof t;if(e!=="object"||!t)return[Gg,e];const n=aV.call(t).slice(8,-1);switch(n){case"Array":return[Bd,vc];case"Object":return[L0,vc];case"Date":return[h2,vc];case"RegExp":return[d2,vc];case"Map":return[f2,vc];case"Set":return[p2,vc];case"DataView":return[Bd,n]}return n.includes("Array")?[Bd,n]:n.includes("Error")?[iO,n]:[L0,n]},Sm=([t,e])=>t===Gg&&(e==="function"||e==="symbol"),lV=(t,e,n,s)=>{const r=(o,c)=>{const d=s.push(o)-1;return n.set(c,d),d},i=o=>{if(n.has(o))return n.get(o);let[c,d]=Bh(o);switch(c){case Gg:{let g=o;switch(d){case"bigint":c=aO,g=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+d);g=null;break;case"undefined":return r([rO],o)}return r([c,g],o)}case Bd:{if(d){let b=o;return d==="DataView"?b=new Uint8Array(o.buffer):d==="ArrayBuffer"&&(b=new Uint8Array(o)),r([d,[...b]],o)}const g=[],m=r([c,g],o);for(const b of o)g.push(i(b));return m}case L0:{if(d)switch(d){case"BigInt":return r([d,o.toString()],o);case"Boolean":case"Number":case"String":return r([d,o.valueOf()],o)}if(e&&"toJSON"in o)return i(o.toJSON());const g=[],m=r([c,g],o);for(const b of oV(o))(t||!Sm(Bh(o[b])))&&g.push([i(b),i(o[b])]);return m}case h2:return r([c,o.toISOString()],o);case d2:{const{source:g,flags:m}=o;return r([c,{source:g,flags:m}],o)}case f2:{const g=[],m=r([c,g],o);for(const[b,y]of o)(t||!(Sm(Bh(b))||Sm(Bh(y))))&&g.push([i(b),i(y)]);return m}case p2:{const g=[],m=r([c,g],o);for(const b of o)(t||!Sm(Bh(b)))&&g.push(i(b));return m}}const{message:h}=o;return r([c,{name:d,message:h}],o)};return i},nE=(t,{json:e,lossy:n}={})=>{const s=[];return lV(!(e||n),!!e,new Map,s)(t),s},I0=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?tE(nE(t,e)):structuredClone(t):(t,e)=>tE(nE(t,e));function cV(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function uV(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function hV(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||cV,s=t.options.footnoteBackLabel||uV,r=t.options.footnoteLabel||"Footnotes",i=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},c=[];let d=-1;for(;++d<t.footnoteOrder.length;){const h=t.footnoteById.get(t.footnoteOrder[d]);if(!h)continue;const g=t.all(h),m=String(h.identifier).toUpperCase(),b=vu(m.toLowerCase());let y=0;const w=[],x=t.footnoteCounts.get(m);for(;x!==void 0&&++y<=x;){w.length>0&&w.push({type:"text",value:" "});let C=typeof n=="string"?n:n(d,y);typeof C=="string"&&(C={type:"text",value:C}),w.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+b+(y>1?"-"+y:""),dataFootnoteBackref:"",ariaLabel:typeof s=="string"?s:s(d,y),className:["data-footnote-backref"]},children:Array.isArray(C)?C:[C]})}const S=g[g.length-1];if(S&&S.type==="element"&&S.tagName==="p"){const C=S.children[S.children.length-1];C&&C.type==="text"?C.value+=" ":S.children.push({type:"text",value:" "}),S.children.push(...w)}else g.push(...w);const k={type:"element",tagName:"li",properties:{id:e+"fn-"+b},children:t.wrap(g,!0)};t.patch(h,k),c.push(k)}if(c.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...I0(o),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(c,!0)},{type:"text",value:`
`}]}}const Yg=(function(t){if(t==null)return mV;if(typeof t=="function")return Xg(t);if(typeof t=="object")return Array.isArray(t)?dV(t):fV(t);if(typeof t=="string")return pV(t);throw new Error("Expected function, string, or object as test")});function dV(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=Yg(t[n]);return Xg(s);function s(...r){let i=-1;for(;++i<e.length;)if(e[i].apply(this,r))return!0;return!1}}function fV(t){const e=t;return Xg(n);function n(s){const r=s;let i;for(i in t)if(r[i]!==e[i])return!1;return!0}}function pV(t){return Xg(e);function e(n){return n&&n.type===t}}function Xg(t){return e;function e(n,s,r){return!!(gV(n)&&t.call(this,n,typeof s=="number"?s:void 0,r||void 0))}}function mV(){return!0}function gV(t){return t!==null&&typeof t=="object"&&"type"in t}const oO=[],yV=!0,l_=!1,bV="skip";function lO(t,e,n,s){let r;typeof e=="function"&&typeof n!="function"?(s=n,n=e):r=e;const i=Yg(r),o=s?-1:1;c(t,void 0,[])();function c(d,h,g){const m=d&&typeof d=="object"?d:{};if(typeof m.type=="string"){const y=typeof m.tagName=="string"?m.tagName:typeof m.name=="string"?m.name:void 0;Object.defineProperty(b,"name",{value:"node ("+(d.type+(y?"<"+y+">":""))+")"})}return b;function b(){let y=oO,w,x,S;if((!e||i(d,h,g[g.length-1]||void 0))&&(y=vV(n(d,g)),y[0]===l_))return y;if("children"in d&&d.children){const k=d;if(k.children&&y[0]!==bV)for(x=(s?k.children.length:-1)+o,S=g.concat(k);x>-1&&x<k.children.length;){const C=k.children[x];if(w=c(C,x,S)(),w[0]===l_)return w;x=typeof w[1]=="number"?w[1]:x+o}}return y}}}function vV(t){return Array.isArray(t)?t:typeof t=="number"?[yV,t]:t==null?oO:[t]}function m2(t,e,n,s){let r,i,o;typeof e=="function"&&typeof n!="function"?(i=void 0,o=e,r=n):(i=e,o=n,r=s),lO(t,i,c,r);function c(d,h){const g=h[h.length-1],m=g?g.children.indexOf(d):void 0;return o(d,m,g)}}const c_={}.hasOwnProperty,xV={};function _V(t,e){const n=e||xV,s=new Map,r=new Map,i=new Map,o={...rV,...n.handlers},c={all:h,applyData:SV,definitionById:s,footnoteById:r,footnoteCounts:i,footnoteOrder:[],handlers:o,one:d,options:n,patch:wV,wrap:CV};return m2(t,function(g){if(g.type==="definition"||g.type==="footnoteDefinition"){const m=g.type==="definition"?s:r,b=String(g.identifier).toUpperCase();m.has(b)||m.set(b,g)}}),c;function d(g,m){const b=g.type,y=c.handlers[b];if(c_.call(c.handlers,b)&&y)return y(c,g,m);if(c.options.passThrough&&c.options.passThrough.includes(b)){if("children"in g){const{children:x,...S}=g,k=I0(S);return k.children=c.all(g),k}return I0(g)}return(c.options.unknownHandler||kV)(c,g,m)}function h(g){const m=[];if("children"in g){const b=g.children;let y=-1;for(;++y<b.length;){const w=c.one(b[y],g);if(w){if(y&&b[y-1].type==="break"&&(!Array.isArray(w)&&w.type==="text"&&(w.value=sE(w.value)),!Array.isArray(w)&&w.type==="element")){const x=w.children[0];x&&x.type==="text"&&(x.value=sE(x.value))}Array.isArray(w)?m.push(...w):m.push(w)}}}return m}}function wV(t,e){t.position&&(e.position=u9(t))}function SV(t,e){let n=e;if(t&&t.data){const s=t.data.hName,r=t.data.hChildren,i=t.data.hProperties;if(typeof s=="string")if(n.type==="element")n.tagName=s;else{const o="children"in n?n.children:[n];n={type:"element",tagName:s,properties:{},children:o}}n.type==="element"&&i&&Object.assign(n.properties,I0(i)),"children"in n&&n.children&&r!==null&&r!==void 0&&(n.children=r)}return n}function kV(t,e){const n=e.data||{},s="value"in e&&!(c_.call(n,"hProperties")||c_.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function CV(t,e){const n=[];let s=-1;for(e&&n.push({type:"text",value:`
`});++s<t.length;)s&&n.push({type:"text",value:`
`}),n.push(t[s]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function sE(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function rE(t,e){const n=_V(t,e),s=n.one(t,void 0),r=hV(n),i=Array.isArray(s)?{type:"root",children:s}:s||{type:"root",children:[]};return r&&i.children.push({type:"text",value:`
`},r),i}function NV(t,e){return t&&"run"in t?async function(n,s){const r=rE(n,{file:s,...e});await t.run(r,s)}:function(n,s){return rE(n,{file:s,...t||e})}}function iE(t){if(t)throw t}var $v,aE;function AV(){if(aE)return $v;aE=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,s=Object.getOwnPropertyDescriptor,r=function(h){return typeof Array.isArray=="function"?Array.isArray(h):e.call(h)==="[object Array]"},i=function(h){if(!h||e.call(h)!=="[object Object]")return!1;var g=t.call(h,"constructor"),m=h.constructor&&h.constructor.prototype&&t.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!g&&!m)return!1;var b;for(b in h);return typeof b>"u"||t.call(h,b)},o=function(h,g){n&&g.name==="__proto__"?n(h,g.name,{enumerable:!0,configurable:!0,value:g.newValue,writable:!0}):h[g.name]=g.newValue},c=function(h,g){if(g==="__proto__")if(t.call(h,g)){if(s)return s(h,g).value}else return;return h[g]};return $v=function d(){var h,g,m,b,y,w,x=arguments[0],S=1,k=arguments.length,C=!1;for(typeof x=="boolean"&&(C=x,x=arguments[1]||{},S=2),(x==null||typeof x!="object"&&typeof x!="function")&&(x={});S<k;++S)if(h=arguments[S],h!=null)for(g in h)m=c(x,g),b=c(h,g),x!==b&&(C&&b&&(i(b)||(y=r(b)))?(y?(y=!1,w=m&&r(m)?m:[]):w=m&&i(m)?m:{},o(x,{name:g,newValue:d(C,w,b)})):typeof b<"u"&&o(x,{name:g,newValue:b}));return x},$v}var EV=AV();const zv=wS(EV);function u_(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function jV(){const t=[],e={run:n,use:s};return e;function n(...r){let i=-1;const o=r.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);c(null,...r);function c(d,...h){const g=t[++i];let m=-1;if(d){o(d);return}for(;++m<r.length;)(h[m]===null||h[m]===void 0)&&(h[m]=r[m]);r=h,g?TV(g,c)(...h):o(null,...h)}}function s(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return t.push(r),e}}function TV(t,e){let n;return s;function s(...o){const c=t.length>o.length;let d;c&&o.push(r);try{d=t.apply(this,o)}catch(h){const g=h;if(c&&n)throw g;return r(g)}c||(d&&d.then&&typeof d.then=="function"?d.then(i,r):d instanceof Error?r(d):i(d))}function r(o,...c){n||(n=!0,e(o,...c))}function i(o){r(null,o)}}const di={basename:RV,dirname:OV,extname:MV,join:BV,sep:"/"};function RV(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Tf(t);let n=0,s=-1,r=t.length,i;if(e===void 0||e.length===0||e.length>t.length){for(;r--;)if(t.codePointAt(r)===47){if(i){n=r+1;break}}else s<0&&(i=!0,s=r+1);return s<0?"":t.slice(n,s)}if(e===t)return"";let o=-1,c=e.length-1;for(;r--;)if(t.codePointAt(r)===47){if(i){n=r+1;break}}else o<0&&(i=!0,o=r+1),c>-1&&(t.codePointAt(r)===e.codePointAt(c--)?c<0&&(s=r):(c=-1,s=o));return n===s?s=o:s<0&&(s=t.length),t.slice(n,s)}function OV(t){if(Tf(t),t.length===0)return".";let e=-1,n=t.length,s;for(;--n;)if(t.codePointAt(n)===47){if(s){e=n;break}}else s||(s=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function MV(t){Tf(t);let e=t.length,n=-1,s=0,r=-1,i=0,o;for(;e--;){const c=t.codePointAt(e);if(c===47){if(o){s=e+1;break}continue}n<0&&(o=!0,n=e+1),c===46?r<0?r=e:i!==1&&(i=1):r>-1&&(i=-1)}return r<0||n<0||i===0||i===1&&r===n-1&&r===s+1?"":t.slice(r,n)}function BV(...t){let e=-1,n;for(;++e<t.length;)Tf(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":DV(n)}function DV(t){Tf(t);const e=t.codePointAt(0)===47;let n=LV(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function LV(t,e){let n="",s=0,r=-1,i=0,o=-1,c,d;for(;++o<=t.length;){if(o<t.length)c=t.codePointAt(o);else{if(c===47)break;c=47}if(c===47){if(!(r===o-1||i===1))if(r!==o-1&&i===2){if(n.length<2||s!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(d=n.lastIndexOf("/"),d!==n.length-1){d<0?(n="",s=0):(n=n.slice(0,d),s=n.length-1-n.lastIndexOf("/")),r=o,i=0;continue}}else if(n.length>0){n="",s=0,r=o,i=0;continue}}e&&(n=n.length>0?n+"/..":"..",s=2)}else n.length>0?n+="/"+t.slice(r+1,o):n=t.slice(r+1,o),s=o-r-1;r=o,i=0}else c===46&&i>-1?i++:i=-1}return n}function Tf(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const IV={cwd:PV};function PV(){return"/"}function h_(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function $V(t){if(typeof t=="string")t=new URL(t);else if(!h_(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return zV(t)}function zV(t){if(t.hostname!==""){const s=new TypeError('File URL host must be "localhost" or empty on darwin');throw s.code="ERR_INVALID_FILE_URL_HOST",s}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const s=e.codePointAt(n+2);if(s===70||s===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const Hv=["history","path","basename","stem","extname","dirname"];class cO{constructor(e){let n;e?h_(e)?n={path:e}:typeof e=="string"||HV(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":IV.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let s=-1;for(;++s<Hv.length;){const i=Hv[s];i in n&&n[i]!==void 0&&n[i]!==null&&(this[i]=i==="history"?[...n[i]]:n[i])}let r;for(r in n)Hv.includes(r)||(this[r]=n[r])}get basename(){return typeof this.path=="string"?di.basename(this.path):void 0}set basename(e){Vv(e,"basename"),Uv(e,"basename"),this.path=di.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?di.dirname(this.path):void 0}set dirname(e){oE(this.basename,"dirname"),this.path=di.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?di.extname(this.path):void 0}set extname(e){if(Uv(e,"extname"),oE(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=di.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){h_(e)&&(e=$V(e)),Vv(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?di.basename(this.path,this.extname):void 0}set stem(e){Vv(e,"stem"),Uv(e,"stem"),this.path=di.join(this.dirname||"",e+(this.extname||""))}fail(e,n,s){const r=this.message(e,n,s);throw r.fatal=!0,r}info(e,n,s){const r=this.message(e,n,s);return r.fatal=void 0,r}message(e,n,s){const r=new gs(e,n,s);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Uv(t,e){if(t&&t.includes(di.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+di.sep+"`")}function Vv(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function oE(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function HV(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const UV=(function(t){const s=this.constructor.prototype,r=s[t],i=function(){return r.apply(i,arguments)};return Object.setPrototypeOf(i,s),i}),VV={}.hasOwnProperty;class g2 extends UV{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=jV()}copy(){const e=new g2;let n=-1;for(;++n<this.attachers.length;){const s=this.attachers[n];e.use(...s)}return e.data(zv(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Kv("data",this.frozen),this.namespace[e]=n,this):VV.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Kv("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...s]=this.attachers[this.freezeIndex];if(s[0]===!1)continue;s[0]===!0&&(s[0]=void 0);const r=n.call(e,...s);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=km(e),s=this.parser||this.Parser;return Fv("parse",s),s(String(n),n)}process(e,n){const s=this;return this.freeze(),Fv("process",this.parser||this.Parser),qv("process",this.compiler||this.Compiler),n?r(void 0,n):new Promise(r);function r(i,o){const c=km(e),d=s.parse(c);s.run(d,c,function(g,m,b){if(g||!m||!b)return h(g);const y=m,w=s.stringify(y,b);KV(w)?b.value=w:b.result=w,h(g,b)});function h(g,m){g||!m?o(g):i?i(m):n(void 0,m)}}}processSync(e){let n=!1,s;return this.freeze(),Fv("processSync",this.parser||this.Parser),qv("processSync",this.compiler||this.Compiler),this.process(e,r),cE("processSync","process",n),s;function r(i,o){n=!0,iE(i),s=o}}run(e,n,s){lE(e),this.freeze();const r=this.transformers;return!s&&typeof n=="function"&&(s=n,n=void 0),s?i(void 0,s):new Promise(i);function i(o,c){const d=km(n);r.run(e,d,h);function h(g,m,b){const y=m||e;g?c(g):o?o(y):s(void 0,y,b)}}}runSync(e,n){let s=!1,r;return this.run(e,n,i),cE("runSync","run",s),r;function i(o,c){iE(o),r=c,s=!0}}stringify(e,n){this.freeze();const s=km(n),r=this.compiler||this.Compiler;return qv("stringify",r),lE(e),r(e,s)}use(e,...n){const s=this.attachers,r=this.namespace;if(Kv("use",this.frozen),e!=null)if(typeof e=="function")d(e,n);else if(typeof e=="object")Array.isArray(e)?c(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function i(h){if(typeof h=="function")d(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[g,...m]=h;d(g,m)}else o(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function o(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(h.plugins),h.settings&&(r.settings=zv(!0,r.settings,h.settings))}function c(h){let g=-1;if(h!=null)if(Array.isArray(h))for(;++g<h.length;){const m=h[g];i(m)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function d(h,g){let m=-1,b=-1;for(;++m<s.length;)if(s[m][0]===h){b=m;break}if(b===-1)s.push([h,...g]);else if(g.length>0){let[y,...w]=g;const x=s[b][1];u_(x)&&u_(y)&&(y=zv(!0,x,y)),s[b]=[h,y,...w]}}}}const FV=new g2().freeze();function Fv(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function qv(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Kv(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function lE(t){if(!u_(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function cE(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function km(t){return qV(t)?t:new cO(t)}function qV(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function KV(t){return typeof t=="string"||WV(t)}function WV(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const GV="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",uE=[],hE={allowDangerousHtml:!0},YV=/^(https?|ircs?|mailto|xmpp)$/i,XV=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function JV(t){const e=QV(t),n=ZV(t);return eF(e.runSync(e.parse(n),n),t)}function QV(t){const e=t.rehypePlugins||uE,n=t.remarkPlugins||uE,s=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...hE}:hE;return FV().use(OU).use(n).use(NV,s).use(e)}function ZV(t){const e=t.children||"",n=new cO;return typeof e=="string"&&(n.value=e),n}function eF(t,e){const n=e.allowedElements,s=e.allowElement,r=e.components,i=e.disallowedElements,o=e.skipHtml,c=e.unwrapDisallowed,d=e.urlTransform||tF;for(const g of XV)Object.hasOwn(e,g.from)&&(""+g.from+(g.to?"use `"+g.to+"` instead":"remove it")+GV+g.id,void 0);return m2(t,h),m9(t,{Fragment:f.Fragment,components:r,ignoreInvalidStyle:!0,jsx:f.jsx,jsxs:f.jsxs,passKeys:!0,passNode:!0});function h(g,m,b){if(g.type==="raw"&&b&&typeof m=="number")return o?b.children.splice(m,1):b.children[m]={type:"text",value:g.value},m;if(g.type==="element"){let y;for(y in Lv)if(Object.hasOwn(Lv,y)&&Object.hasOwn(g.properties,y)){const w=g.properties[y],x=Lv[y];(x===null||x.includes(g.tagName))&&(g.properties[y]=d(String(w||""),y,g))}}if(g.type==="element"){let y=n?!n.includes(g.tagName):i?i.includes(g.tagName):!1;if(!y&&s&&typeof m=="number"&&(y=!s(g,m,b)),y&&b&&typeof m=="number")return c&&g.children?b.children.splice(m,1,...g.children):b.children.splice(m,1),m}}}function tF(t){const e=t.indexOf(":"),n=t.indexOf("?"),s=t.indexOf("#"),r=t.indexOf("/");return e===-1||r!==-1&&e>r||n!==-1&&e>n||s!==-1&&e>s||YV.test(t.slice(0,e))?t:""}function dE(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let s=0,r=n.indexOf(e);for(;r!==-1;)s++,r=n.indexOf(e,r+e.length);return s}function nF(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function uO(t,e,n){const r=Yg((n||{}).ignore||[]),i=sF(e);let o=-1;for(;++o<i.length;)lO(t,"text",c);function c(h,g){let m=-1,b;for(;++m<g.length;){const y=g[m],w=b?b.children:void 0;if(r(y,w?w.indexOf(y):void 0,b))return;b=y}if(b)return d(h,g)}function d(h,g){const m=g[g.length-1],b=i[o][0],y=i[o][1];let w=0;const S=m.children.indexOf(h);let k=!1,C=[];b.lastIndex=0;let N=b.exec(h.value);for(;N;){const R=N.index,B={index:N.index,input:N.input,stack:[...g,h]};let E=y(...N,B);if(typeof E=="string"&&(E=E.length>0?{type:"text",value:E}:void 0),E===!1?b.lastIndex=R+1:(w!==R&&C.push({type:"text",value:h.value.slice(w,R)}),Array.isArray(E)?C.push(...E):E&&C.push(E),w=R+N[0].length,k=!0),!b.global)break;N=b.exec(h.value)}return k?(w<h.value.length&&C.push({type:"text",value:h.value.slice(w)}),m.children.splice(S,1,...C)):C=[h],S+C.length}}function sF(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let s=-1;for(;++s<n.length;){const r=n[s];e.push([rF(r[0]),iF(r[1])])}return e}function rF(t){return typeof t=="string"?new RegExp(nF(t),"g"):t}function iF(t){return typeof t=="function"?t:function(){return t}}const Wv="phrasing",Gv=["autolink","link","image","label"];function aF(){return{transforms:[fF],enter:{literalAutolink:lF,literalAutolinkEmail:Yv,literalAutolinkHttp:Yv,literalAutolinkWww:Yv},exit:{literalAutolink:dF,literalAutolinkEmail:hF,literalAutolinkHttp:cF,literalAutolinkWww:uF}}}function oF(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Wv,notInConstruct:Gv},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Wv,notInConstruct:Gv},{character:":",before:"[ps]",after:"\\/",inConstruct:Wv,notInConstruct:Gv}]}}function lF(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Yv(t){this.config.enter.autolinkProtocol.call(this,t)}function cF(t){this.config.exit.autolinkProtocol.call(this,t)}function uF(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function hF(t){this.config.exit.autolinkEmail.call(this,t)}function dF(t){this.exit(t)}function fF(t){uO(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,pF],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),mF]],{ignore:["link","linkReference"]})}function pF(t,e,n,s,r){let i="";if(!hO(r)||(/^w/i.test(e)&&(n=e+n,e="",i="http://"),!gF(n)))return!1;const o=yF(n+s);if(!o[0])return!1;const c={type:"link",title:null,url:i+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[c,{type:"text",value:o[1]}]:c}function mF(t,e,n,s){return!hO(s,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function gF(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function yF(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],s=n.indexOf(")");const r=dE(t,"(");let i=dE(t,")");for(;s!==-1&&r>i;)t+=n.slice(0,s+1),n=n.slice(s+1),s=n.indexOf(")"),i++;return[t,n]}function hO(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||il(n)||Kg(n))&&(!e||n!==47)}dO.peek=NF;function bF(){this.buffer()}function vF(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function xF(){this.buffer()}function _F(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function wF(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Gr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function SF(t){this.exit(t)}function kF(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Gr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function CF(t){this.exit(t)}function NF(){return"["}function dO(t,e,n,s){const r=n.createTracker(s);let i=r.move("[^");const o=n.enter("footnoteReference"),c=n.enter("reference");return i+=r.move(n.safe(n.associationId(t),{after:"]",before:i})),c(),o(),i+=r.move("]"),i}function AF(){return{enter:{gfmFootnoteCallString:bF,gfmFootnoteCall:vF,gfmFootnoteDefinitionLabelString:xF,gfmFootnoteDefinition:_F},exit:{gfmFootnoteCallString:wF,gfmFootnoteCall:SF,gfmFootnoteDefinitionLabelString:kF,gfmFootnoteDefinition:CF}}}function EF(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:dO},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(s,r,i,o){const c=i.createTracker(o);let d=c.move("[^");const h=i.enter("footnoteDefinition"),g=i.enter("label");return d+=c.move(i.safe(i.associationId(s),{before:d,after:"]"})),g(),d+=c.move("]:"),s.children&&s.children.length>0&&(c.shift(4),d+=c.move((e?`
`:" ")+i.indentLines(i.containerFlow(s,c.current()),e?fO:jF))),h(),d}}function jF(t,e,n){return e===0?t:fO(t,e,n)}function fO(t,e,n){return(n?"":"    ")+t}const TF=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];pO.peek=DF;function RF(){return{canContainEols:["delete"],enter:{strikethrough:MF},exit:{strikethrough:BF}}}function OF(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:TF}],handlers:{delete:pO}}}function MF(t){this.enter({type:"delete",children:[]},t)}function BF(t){this.exit(t)}function pO(t,e,n,s){const r=n.createTracker(s),i=n.enter("strikethrough");let o=r.move("~~");return o+=n.containerPhrasing(t,{...r.current(),before:o,after:"~"}),o+=r.move("~~"),i(),o}function DF(){return"~"}function LF(t){return t.length}function IF(t,e){const n=e||{},s=(n.align||[]).concat(),r=n.stringLength||LF,i=[],o=[],c=[],d=[];let h=0,g=-1;for(;++g<t.length;){const x=[],S=[];let k=-1;for(t[g].length>h&&(h=t[g].length);++k<t[g].length;){const C=PF(t[g][k]);if(n.alignDelimiters!==!1){const N=r(C);S[k]=N,(d[k]===void 0||N>d[k])&&(d[k]=N)}x.push(C)}o[g]=x,c[g]=S}let m=-1;if(typeof s=="object"&&"length"in s)for(;++m<h;)i[m]=fE(s[m]);else{const x=fE(s);for(;++m<h;)i[m]=x}m=-1;const b=[],y=[];for(;++m<h;){const x=i[m];let S="",k="";x===99?(S=":",k=":"):x===108?S=":":x===114&&(k=":");let C=n.alignDelimiters===!1?1:Math.max(1,d[m]-S.length-k.length);const N=S+"-".repeat(C)+k;n.alignDelimiters!==!1&&(C=S.length+C+k.length,C>d[m]&&(d[m]=C),y[m]=C),b[m]=N}o.splice(1,0,b),c.splice(1,0,y),g=-1;const w=[];for(;++g<o.length;){const x=o[g],S=c[g];m=-1;const k=[];for(;++m<h;){const C=x[m]||"";let N="",R="";if(n.alignDelimiters!==!1){const B=d[m]-(S[m]||0),E=i[m];E===114?N=" ".repeat(B):E===99?B%2?(N=" ".repeat(B/2+.5),R=" ".repeat(B/2-.5)):(N=" ".repeat(B/2),R=N):R=" ".repeat(B)}n.delimiterStart!==!1&&!m&&k.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&C==="")&&(n.delimiterStart!==!1||m)&&k.push(" "),n.alignDelimiters!==!1&&k.push(N),k.push(C),n.alignDelimiters!==!1&&k.push(R),n.padding!==!1&&k.push(" "),(n.delimiterEnd!==!1||m!==h-1)&&k.push("|")}w.push(n.delimiterEnd===!1?k.join("").replace(/ +$/,""):k.join(""))}return w.join(`
`)}function PF(t){return t==null?"":String(t)}function fE(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function $F(t,e,n,s){const r=n.enter("blockquote"),i=n.createTracker(s);i.move("> "),i.shift(2);const o=n.indentLines(n.containerFlow(t,i.current()),zF);return r(),o}function zF(t,e,n){return">"+(n?"":" ")+t}function HF(t,e){return pE(t,e.inConstruct,!0)&&!pE(t,e.notInConstruct,!1)}function pE(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let s=-1;for(;++s<e.length;)if(t.includes(e[s]))return!0;return!1}function mE(t,e,n,s){let r=-1;for(;++r<n.unsafe.length;)if(n.unsafe[r].character===`
`&&HF(n.stack,n.unsafe[r]))return/[ \t]/.test(s.before)?"":" ";return`\\
`}function UF(t,e){const n=String(t);let s=n.indexOf(e),r=s,i=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;s!==-1;)s===r?++i>o&&(o=i):i=1,r=s+e.length,s=n.indexOf(e,r);return o}function VF(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function FF(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function qF(t,e,n,s){const r=FF(n),i=t.value||"",o=r==="`"?"GraveAccent":"Tilde";if(VF(t,n)){const m=n.enter("codeIndented"),b=n.indentLines(i,KF);return m(),b}const c=n.createTracker(s),d=r.repeat(Math.max(UF(i,r)+1,3)),h=n.enter("codeFenced");let g=c.move(d);if(t.lang){const m=n.enter(`codeFencedLang${o}`);g+=c.move(n.safe(t.lang,{before:g,after:" ",encode:["`"],...c.current()})),m()}if(t.lang&&t.meta){const m=n.enter(`codeFencedMeta${o}`);g+=c.move(" "),g+=c.move(n.safe(t.meta,{before:g,after:`
`,encode:["`"],...c.current()})),m()}return g+=c.move(`
`),i&&(g+=c.move(i+`
`)),g+=c.move(d),h(),g}function KF(t,e,n){return(n?"":"    ")+t}function y2(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function WF(t,e,n,s){const r=y2(n),i=r==='"'?"Quote":"Apostrophe",o=n.enter("definition");let c=n.enter("label");const d=n.createTracker(s);let h=d.move("[");return h+=d.move(n.safe(n.associationId(t),{before:h,after:"]",...d.current()})),h+=d.move("]: "),c(),!t.url||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),h+=d.move("<"),h+=d.move(n.safe(t.url,{before:h,after:">",...d.current()})),h+=d.move(">")):(c=n.enter("destinationRaw"),h+=d.move(n.safe(t.url,{before:h,after:t.title?" ":`
`,...d.current()}))),c(),t.title&&(c=n.enter(`title${i}`),h+=d.move(" "+r),h+=d.move(n.safe(t.title,{before:h,after:r,...d.current()})),h+=d.move(r),c()),o(),h}function GF(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Zd(t){return"&#x"+t.toString(16).toUpperCase()+";"}function P0(t,e,n){const s=Gc(t),r=Gc(e);return s===void 0?r===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:s===1?r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}mO.peek=YF;function mO(t,e,n,s){const r=GF(n),i=n.enter("emphasis"),o=n.createTracker(s),c=o.move(r);let d=o.move(n.containerPhrasing(t,{after:r,before:c,...o.current()}));const h=d.charCodeAt(0),g=P0(s.before.charCodeAt(s.before.length-1),h,r);g.inside&&(d=Zd(h)+d.slice(1));const m=d.charCodeAt(d.length-1),b=P0(s.after.charCodeAt(0),m,r);b.inside&&(d=d.slice(0,-1)+Zd(m));const y=o.move(r);return i(),n.attentionEncodeSurroundingInfo={after:b.outside,before:g.outside},c+d+y}function YF(t,e,n){return n.options.emphasis||"*"}function XF(t,e){let n=!1;return m2(t,function(s){if("value"in s&&/\r?\n|\r/.test(s.value)||s.type==="break")return n=!0,l_}),!!((!t.depth||t.depth<3)&&l2(t)&&(e.options.setext||n))}function JF(t,e,n,s){const r=Math.max(Math.min(6,t.depth||1),1),i=n.createTracker(s);if(XF(t,n)){const g=n.enter("headingSetext"),m=n.enter("phrasing"),b=n.containerPhrasing(t,{...i.current(),before:`
`,after:`
`});return m(),g(),b+`
`+(r===1?"=":"-").repeat(b.length-(Math.max(b.lastIndexOf("\r"),b.lastIndexOf(`
`))+1))}const o="#".repeat(r),c=n.enter("headingAtx"),d=n.enter("phrasing");i.move(o+" ");let h=n.containerPhrasing(t,{before:"# ",after:`
`,...i.current()});return/^[\t ]/.test(h)&&(h=Zd(h.charCodeAt(0))+h.slice(1)),h=h?o+" "+h:o,n.options.closeAtx&&(h+=" "+o),d(),c(),h}gO.peek=QF;function gO(t){return t.value||""}function QF(){return"<"}yO.peek=ZF;function yO(t,e,n,s){const r=y2(n),i=r==='"'?"Quote":"Apostrophe",o=n.enter("image");let c=n.enter("label");const d=n.createTracker(s);let h=d.move("![");return h+=d.move(n.safe(t.alt,{before:h,after:"]",...d.current()})),h+=d.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),h+=d.move("<"),h+=d.move(n.safe(t.url,{before:h,after:">",...d.current()})),h+=d.move(">")):(c=n.enter("destinationRaw"),h+=d.move(n.safe(t.url,{before:h,after:t.title?" ":")",...d.current()}))),c(),t.title&&(c=n.enter(`title${i}`),h+=d.move(" "+r),h+=d.move(n.safe(t.title,{before:h,after:r,...d.current()})),h+=d.move(r),c()),h+=d.move(")"),o(),h}function ZF(){return"!"}bO.peek=eq;function bO(t,e,n,s){const r=t.referenceType,i=n.enter("imageReference");let o=n.enter("label");const c=n.createTracker(s);let d=c.move("![");const h=n.safe(t.alt,{before:d,after:"]",...c.current()});d+=c.move(h+"]["),o();const g=n.stack;n.stack=[],o=n.enter("reference");const m=n.safe(n.associationId(t),{before:d,after:"]",...c.current()});return o(),n.stack=g,i(),r==="full"||!h||h!==m?d+=c.move(m+"]"):r==="shortcut"?d=d.slice(0,-1):d+=c.move("]"),d}function eq(){return"!"}vO.peek=tq;function vO(t,e,n){let s=t.value||"",r="`",i=-1;for(;new RegExp("(^|[^`])"+r+"([^`]|$)").test(s);)r+="`";for(/[^ \r\n]/.test(s)&&(/^[ \r\n]/.test(s)&&/[ \r\n]$/.test(s)||/^`|`$/.test(s))&&(s=" "+s+" ");++i<n.unsafe.length;){const o=n.unsafe[i],c=n.compilePattern(o);let d;if(o.atBreak)for(;d=c.exec(s);){let h=d.index;s.charCodeAt(h)===10&&s.charCodeAt(h-1)===13&&h--,s=s.slice(0,h)+" "+s.slice(d.index+1)}}return r+s+r}function tq(){return"`"}function xO(t,e){const n=l2(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}_O.peek=nq;function _O(t,e,n,s){const r=y2(n),i=r==='"'?"Quote":"Apostrophe",o=n.createTracker(s);let c,d;if(xO(t,n)){const g=n.stack;n.stack=[],c=n.enter("autolink");let m=o.move("<");return m+=o.move(n.containerPhrasing(t,{before:m,after:">",...o.current()})),m+=o.move(">"),c(),n.stack=g,m}c=n.enter("link"),d=n.enter("label");let h=o.move("[");return h+=o.move(n.containerPhrasing(t,{before:h,after:"](",...o.current()})),h+=o.move("]("),d(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(d=n.enter("destinationLiteral"),h+=o.move("<"),h+=o.move(n.safe(t.url,{before:h,after:">",...o.current()})),h+=o.move(">")):(d=n.enter("destinationRaw"),h+=o.move(n.safe(t.url,{before:h,after:t.title?" ":")",...o.current()}))),d(),t.title&&(d=n.enter(`title${i}`),h+=o.move(" "+r),h+=o.move(n.safe(t.title,{before:h,after:r,...o.current()})),h+=o.move(r),d()),h+=o.move(")"),c(),h}function nq(t,e,n){return xO(t,n)?"<":"["}wO.peek=sq;function wO(t,e,n,s){const r=t.referenceType,i=n.enter("linkReference");let o=n.enter("label");const c=n.createTracker(s);let d=c.move("[");const h=n.containerPhrasing(t,{before:d,after:"]",...c.current()});d+=c.move(h+"]["),o();const g=n.stack;n.stack=[],o=n.enter("reference");const m=n.safe(n.associationId(t),{before:d,after:"]",...c.current()});return o(),n.stack=g,i(),r==="full"||!h||h!==m?d+=c.move(m+"]"):r==="shortcut"?d=d.slice(0,-1):d+=c.move("]"),d}function sq(){return"["}function b2(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function rq(t){const e=b2(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function iq(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function SO(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function aq(t,e,n,s){const r=n.enter("list"),i=n.bulletCurrent;let o=t.ordered?iq(n):b2(n);const c=t.ordered?o==="."?")":".":rq(n);let d=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const g=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&g&&(!g.children||!g.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(d=!0),SO(n)===o&&g){let m=-1;for(;++m<t.children.length;){const b=t.children[m];if(b&&b.type==="listItem"&&b.children&&b.children[0]&&b.children[0].type==="thematicBreak"){d=!0;break}}}}d&&(o=c),n.bulletCurrent=o;const h=n.containerFlow(t,s);return n.bulletLastUsed=o,n.bulletCurrent=i,r(),h}function oq(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function lq(t,e,n,s){const r=oq(n);let i=n.bulletCurrent||b2(n);e&&e.type==="list"&&e.ordered&&(i=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+i);let o=i.length+1;(r==="tab"||r==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const c=n.createTracker(s);c.move(i+" ".repeat(o-i.length)),c.shift(o);const d=n.enter("listItem"),h=n.indentLines(n.containerFlow(t,c.current()),g);return d(),h;function g(m,b,y){return b?(y?"":" ".repeat(o))+m:(y?i:i+" ".repeat(o-i.length))+m}}function cq(t,e,n,s){const r=n.enter("paragraph"),i=n.enter("phrasing"),o=n.containerPhrasing(t,s);return i(),r(),o}const uq=Yg(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function hq(t,e,n,s){return(t.children.some(function(o){return uq(o)})?n.containerPhrasing:n.containerFlow).call(n,t,s)}function dq(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}kO.peek=fq;function kO(t,e,n,s){const r=dq(n),i=n.enter("strong"),o=n.createTracker(s),c=o.move(r+r);let d=o.move(n.containerPhrasing(t,{after:r,before:c,...o.current()}));const h=d.charCodeAt(0),g=P0(s.before.charCodeAt(s.before.length-1),h,r);g.inside&&(d=Zd(h)+d.slice(1));const m=d.charCodeAt(d.length-1),b=P0(s.after.charCodeAt(0),m,r);b.inside&&(d=d.slice(0,-1)+Zd(m));const y=o.move(r+r);return i(),n.attentionEncodeSurroundingInfo={after:b.outside,before:g.outside},c+d+y}function fq(t,e,n){return n.options.strong||"*"}function pq(t,e,n,s){return n.safe(t.value,s)}function mq(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function gq(t,e,n){const s=(SO(n)+(n.options.ruleSpaces?" ":"")).repeat(mq(n));return n.options.ruleSpaces?s.slice(0,-1):s}const CO={blockquote:$F,break:mE,code:qF,definition:WF,emphasis:mO,hardBreak:mE,heading:JF,html:gO,image:yO,imageReference:bO,inlineCode:vO,link:_O,linkReference:wO,list:aq,listItem:lq,paragraph:cq,root:hq,strong:kO,text:pq,thematicBreak:gq};function yq(){return{enter:{table:bq,tableData:gE,tableHeader:gE,tableRow:xq},exit:{codeText:_q,table:vq,tableData:Xv,tableHeader:Xv,tableRow:Xv}}}function bq(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function vq(t){this.exit(t),this.data.inTable=void 0}function xq(t){this.enter({type:"tableRow",children:[]},t)}function Xv(t){this.exit(t)}function gE(t){this.enter({type:"tableCell",children:[]},t)}function _q(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,wq));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function wq(t,e){return e==="|"?e:t}function Sq(t){const e=t||{},n=e.tableCellPadding,s=e.tablePipeAlign,r=e.stringLength,i=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:b,table:o,tableCell:d,tableRow:c}};function o(y,w,x,S){return h(g(y,x,S),y.align)}function c(y,w,x,S){const k=m(y,x,S),C=h([k]);return C.slice(0,C.indexOf(`
`))}function d(y,w,x,S){const k=x.enter("tableCell"),C=x.enter("phrasing"),N=x.containerPhrasing(y,{...S,before:i,after:i});return C(),k(),N}function h(y,w){return IF(y,{align:w,alignDelimiters:s,padding:n,stringLength:r})}function g(y,w,x){const S=y.children;let k=-1;const C=[],N=w.enter("table");for(;++k<S.length;)C[k]=m(S[k],w,x);return N(),C}function m(y,w,x){const S=y.children;let k=-1;const C=[],N=w.enter("tableRow");for(;++k<S.length;)C[k]=d(S[k],y,w,x);return N(),C}function b(y,w,x){let S=CO.inlineCode(y,w,x);return x.stack.includes("tableCell")&&(S=S.replace(/\|/g,"\\$&")),S}}function kq(){return{exit:{taskListCheckValueChecked:yE,taskListCheckValueUnchecked:yE,paragraph:Nq}}}function Cq(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Aq}}}function yE(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function Nq(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const s=n.children[0];if(s&&s.type==="text"){const r=e.children;let i=-1,o;for(;++i<r.length;){const c=r[i];if(c.type==="paragraph"){o=c;break}}o===n&&(s.value=s.value.slice(1),s.value.length===0?n.children.shift():n.position&&s.position&&typeof s.position.start.offset=="number"&&(s.position.start.column++,s.position.start.offset++,n.position.start=Object.assign({},s.position.start)))}}this.exit(t)}function Aq(t,e,n,s){const r=t.children[0],i=typeof t.checked=="boolean"&&r&&r.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",c=n.createTracker(s);i&&c.move(o);let d=CO.listItem(t,e,n,{...s,...c.current()});return i&&(d=d.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,h)),d;function h(g){return g+o}}function Eq(){return[aF(),AF(),RF(),yq(),kq()]}function jq(t){return{extensions:[oF(),EF(t),OF(),Sq(t),Cq()]}}const Tq={tokenize:Lq,partial:!0},NO={tokenize:Iq,partial:!0},AO={tokenize:Pq,partial:!0},EO={tokenize:$q,partial:!0},Rq={tokenize:zq,partial:!0},jO={name:"wwwAutolink",tokenize:Bq,previous:RO},TO={name:"protocolAutolink",tokenize:Dq,previous:OO},da={name:"emailAutolink",tokenize:Mq,previous:MO},ki={};function Oq(){return{text:ki}}let Do=48;for(;Do<123;)ki[Do]=da,Do++,Do===58?Do=65:Do===91&&(Do=97);ki[43]=da;ki[45]=da;ki[46]=da;ki[95]=da;ki[72]=[da,TO];ki[104]=[da,TO];ki[87]=[da,jO];ki[119]=[da,jO];function Mq(t,e,n){const s=this;let r,i;return o;function o(m){return!d_(m)||!MO.call(s,s.previous)||v2(s.events)?n(m):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),c(m))}function c(m){return d_(m)?(t.consume(m),c):m===64?(t.consume(m),d):n(m)}function d(m){return m===46?t.check(Rq,g,h)(m):m===45||m===95||ds(m)?(i=!0,t.consume(m),d):g(m)}function h(m){return t.consume(m),r=!0,d}function g(m){return i&&r&&Ss(s.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(m)):n(m)}}function Bq(t,e,n){const s=this;return r;function r(o){return o!==87&&o!==119||!RO.call(s,s.previous)||v2(s.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(Tq,t.attempt(NO,t.attempt(AO,i),n),n)(o))}function i(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function Dq(t,e,n){const s=this;let r="",i=!1;return o;function o(m){return(m===72||m===104)&&OO.call(s,s.previous)&&!v2(s.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),r+=String.fromCodePoint(m),t.consume(m),c):n(m)}function c(m){if(Ss(m)&&r.length<5)return r+=String.fromCodePoint(m),t.consume(m),c;if(m===58){const b=r.toLowerCase();if(b==="http"||b==="https")return t.consume(m),d}return n(m)}function d(m){return m===47?(t.consume(m),i?h:(i=!0,d)):n(m)}function h(m){return m===null||D0(m)||Wt(m)||il(m)||Kg(m)?n(m):t.attempt(NO,t.attempt(AO,g),n)(m)}function g(m){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(m)}}function Lq(t,e,n){let s=0;return r;function r(o){return(o===87||o===119)&&s<3?(s++,t.consume(o),r):o===46&&s===3?(t.consume(o),i):n(o)}function i(o){return o===null?n(o):e(o)}}function Iq(t,e,n){let s,r,i;return o;function o(h){return h===46||h===95?t.check(EO,d,c)(h):h===null||Wt(h)||il(h)||h!==45&&Kg(h)?d(h):(i=!0,t.consume(h),o)}function c(h){return h===95?s=!0:(r=s,s=void 0),t.consume(h),o}function d(h){return r||s||!i?n(h):e(h)}}function Pq(t,e){let n=0,s=0;return r;function r(o){return o===40?(n++,t.consume(o),r):o===41&&s<n?i(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(EO,e,i)(o):o===null||Wt(o)||il(o)?e(o):(t.consume(o),r)}function i(o){return o===41&&s++,t.consume(o),r}}function $q(t,e,n){return s;function s(c){return c===33||c===34||c===39||c===41||c===42||c===44||c===46||c===58||c===59||c===63||c===95||c===126?(t.consume(c),s):c===38?(t.consume(c),i):c===93?(t.consume(c),r):c===60||c===null||Wt(c)||il(c)?e(c):n(c)}function r(c){return c===null||c===40||c===91||Wt(c)||il(c)?e(c):s(c)}function i(c){return Ss(c)?o(c):n(c)}function o(c){return c===59?(t.consume(c),s):Ss(c)?(t.consume(c),o):n(c)}}function zq(t,e,n){return s;function s(i){return t.consume(i),r}function r(i){return ds(i)?n(i):e(i)}}function RO(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||Wt(t)}function OO(t){return!Ss(t)}function MO(t){return!(t===47||d_(t))}function d_(t){return t===43||t===45||t===46||t===95||ds(t)}function v2(t){let e=t.length,n=!1;for(;e--;){const s=t[e][1];if((s.type==="labelLink"||s.type==="labelImage")&&!s._balanced){n=!0;break}if(s._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const Hq={tokenize:Yq,partial:!0};function Uq(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Kq,continuation:{tokenize:Wq},exit:Gq}},text:{91:{name:"gfmFootnoteCall",tokenize:qq},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Vq,resolveTo:Fq}}}}function Vq(t,e,n){const s=this;let r=s.events.length;const i=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let o;for(;r--;){const d=s.events[r][1];if(d.type==="labelImage"){o=d;break}if(d.type==="gfmFootnoteCall"||d.type==="labelLink"||d.type==="label"||d.type==="image"||d.type==="link")break}return c;function c(d){if(!o||!o._balanced)return n(d);const h=Gr(s.sliceSerialize({start:o.end,end:s.now()}));return h.codePointAt(0)!==94||!i.includes(h.slice(1))?n(d):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),e(d))}}function Fq(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const s={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},r={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};r.end.column++,r.end.offset++,r.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},r.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},c=[t[n+1],t[n+2],["enter",s,e],t[n+3],t[n+4],["enter",r,e],["exit",r,e],["enter",i,e],["enter",o,e],["exit",o,e],["exit",i,e],t[t.length-2],t[t.length-1],["exit",s,e]];return t.splice(n,t.length-n+1,...c),t}function qq(t,e,n){const s=this,r=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let i=0,o;return c;function c(m){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(m),t.exit("gfmFootnoteCallLabelMarker"),d}function d(m){return m!==94?n(m):(t.enter("gfmFootnoteCallMarker"),t.consume(m),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",h)}function h(m){if(i>999||m===93&&!o||m===null||m===91||Wt(m))return n(m);if(m===93){t.exit("chunkString");const b=t.exit("gfmFootnoteCallString");return r.includes(Gr(s.sliceSerialize(b)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(m),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(m)}return Wt(m)||(o=!0),i++,t.consume(m),m===92?g:h}function g(m){return m===91||m===92||m===93?(t.consume(m),i++,h):h(m)}}function Kq(t,e,n){const s=this,r=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let i,o=0,c;return d;function d(w){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(w),t.exit("gfmFootnoteDefinitionLabelMarker"),h}function h(w){return w===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(w),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",g):n(w)}function g(w){if(o>999||w===93&&!c||w===null||w===91||Wt(w))return n(w);if(w===93){t.exit("chunkString");const x=t.exit("gfmFootnoteDefinitionLabelString");return i=Gr(s.sliceSerialize(x)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(w),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),b}return Wt(w)||(c=!0),o++,t.consume(w),w===92?m:g}function m(w){return w===91||w===92||w===93?(t.consume(w),o++,g):g(w)}function b(w){return w===58?(t.enter("definitionMarker"),t.consume(w),t.exit("definitionMarker"),r.includes(i)||r.push(i),Et(t,y,"gfmFootnoteDefinitionWhitespace")):n(w)}function y(w){return e(w)}}function Wq(t,e,n){return t.check(jf,e,t.attempt(Hq,e,n))}function Gq(t){t.exit("gfmFootnoteDefinition")}function Yq(t,e,n){const s=this;return Et(t,r,"gfmFootnoteDefinitionIndent",5);function r(i){const o=s.events[s.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(i):n(i)}}function Xq(t){let n=(t||{}).singleTilde;const s={name:"strikethrough",tokenize:i,resolveAll:r};return n==null&&(n=!0),{text:{126:s},insideSpan:{null:[s]},attentionMarkers:{null:[126]}};function r(o,c){let d=-1;for(;++d<o.length;)if(o[d][0]==="enter"&&o[d][1].type==="strikethroughSequenceTemporary"&&o[d][1]._close){let h=d;for(;h--;)if(o[h][0]==="exit"&&o[h][1].type==="strikethroughSequenceTemporary"&&o[h][1]._open&&o[d][1].end.offset-o[d][1].start.offset===o[h][1].end.offset-o[h][1].start.offset){o[d][1].type="strikethroughSequence",o[h][1].type="strikethroughSequence";const g={type:"strikethrough",start:Object.assign({},o[h][1].start),end:Object.assign({},o[d][1].end)},m={type:"strikethroughText",start:Object.assign({},o[h][1].end),end:Object.assign({},o[d][1].start)},b=[["enter",g,c],["enter",o[h][1],c],["exit",o[h][1],c],["enter",m,c]],y=c.parser.constructs.insideSpan.null;y&&hr(b,b.length,0,Wg(y,o.slice(h+1,d),c)),hr(b,b.length,0,[["exit",m,c],["enter",o[d][1],c],["exit",o[d][1],c],["exit",g,c]]),hr(o,h-1,d-h+3,b),d=h+b.length-2;break}}for(d=-1;++d<o.length;)o[d][1].type==="strikethroughSequenceTemporary"&&(o[d][1].type="data");return o}function i(o,c,d){const h=this.previous,g=this.events;let m=0;return b;function b(w){return h===126&&g[g.length-1][1].type!=="characterEscape"?d(w):(o.enter("strikethroughSequenceTemporary"),y(w))}function y(w){const x=Gc(h);if(w===126)return m>1?d(w):(o.consume(w),m++,y);if(m<2&&!n)return d(w);const S=o.exit("strikethroughSequenceTemporary"),k=Gc(w);return S._open=!k||k===2&&!!x,S._close=!x||x===2&&!!k,c(w)}}}class Jq{constructor(){this.map=[]}add(e,n,s){Qq(this,e,n,s)}consume(e){if(this.map.sort(function(i,o){return i[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const s=[];for(;n>0;)n-=1,s.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];s.push(e.slice()),e.length=0;let r=s.pop();for(;r;){for(const i of r)e.push(i);r=s.pop()}this.map.length=0}}function Qq(t,e,n,s){let r=0;if(!(n===0&&s.length===0)){for(;r<t.map.length;){if(t.map[r][0]===e){t.map[r][1]+=n,t.map[r][2].push(...s);return}r+=1}t.map.push([e,n,s])}}function Zq(t,e){let n=!1;const s=[];for(;e<t.length;){const r=t[e];if(n){if(r[0]==="enter")r[1].type==="tableContent"&&s.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(r[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const i=s.length-1;s[i]=s[i]==="left"?"center":"right"}}else if(r[1].type==="tableDelimiterRow")break}else r[0]==="enter"&&r[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return s}function eK(){return{flow:{null:{name:"table",tokenize:tK,resolveAll:nK}}}}function tK(t,e,n){const s=this;let r=0,i=0,o;return c;function c(D){let W=s.events.length-1;for(;W>-1;){const X=s.events[W][1].type;if(X==="lineEnding"||X==="linePrefix")W--;else break}const V=W>-1?s.events[W][1].type:null,q=V==="tableHead"||V==="tableRow"?E:d;return q===E&&s.parser.lazy[s.now().line]?n(D):q(D)}function d(D){return t.enter("tableHead"),t.enter("tableRow"),h(D)}function h(D){return D===124||(o=!0,i+=1),g(D)}function g(D){return D===null?n(D):et(D)?i>1?(i=0,s.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(D),t.exit("lineEnding"),y):n(D):kt(D)?Et(t,g,"whitespace")(D):(i+=1,o&&(o=!1,r+=1),D===124?(t.enter("tableCellDivider"),t.consume(D),t.exit("tableCellDivider"),o=!0,g):(t.enter("data"),m(D)))}function m(D){return D===null||D===124||Wt(D)?(t.exit("data"),g(D)):(t.consume(D),D===92?b:m)}function b(D){return D===92||D===124?(t.consume(D),m):m(D)}function y(D){return s.interrupt=!1,s.parser.lazy[s.now().line]?n(D):(t.enter("tableDelimiterRow"),o=!1,kt(D)?Et(t,w,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):w(D))}function w(D){return D===45||D===58?S(D):D===124?(o=!0,t.enter("tableCellDivider"),t.consume(D),t.exit("tableCellDivider"),x):B(D)}function x(D){return kt(D)?Et(t,S,"whitespace")(D):S(D)}function S(D){return D===58?(i+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(D),t.exit("tableDelimiterMarker"),k):D===45?(i+=1,k(D)):D===null||et(D)?R(D):B(D)}function k(D){return D===45?(t.enter("tableDelimiterFiller"),C(D)):B(D)}function C(D){return D===45?(t.consume(D),C):D===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(D),t.exit("tableDelimiterMarker"),N):(t.exit("tableDelimiterFiller"),N(D))}function N(D){return kt(D)?Et(t,R,"whitespace")(D):R(D)}function R(D){return D===124?w(D):D===null||et(D)?!o||r!==i?B(D):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(D)):B(D)}function B(D){return n(D)}function E(D){return t.enter("tableRow"),z(D)}function z(D){return D===124?(t.enter("tableCellDivider"),t.consume(D),t.exit("tableCellDivider"),z):D===null||et(D)?(t.exit("tableRow"),e(D)):kt(D)?Et(t,z,"whitespace")(D):(t.enter("data"),U(D))}function U(D){return D===null||D===124||Wt(D)?(t.exit("data"),z(D)):(t.consume(D),D===92?Y:U)}function Y(D){return D===92||D===124?(t.consume(D),U):U(D)}}function nK(t,e){let n=-1,s=!0,r=0,i=[0,0,0,0],o=[0,0,0,0],c=!1,d=0,h,g,m;const b=new Jq;for(;++n<t.length;){const y=t[n],w=y[1];y[0]==="enter"?w.type==="tableHead"?(c=!1,d!==0&&(bE(b,e,d,h,g),g=void 0,d=0),h={type:"table",start:Object.assign({},w.start),end:Object.assign({},w.end)},b.add(n,0,[["enter",h,e]])):w.type==="tableRow"||w.type==="tableDelimiterRow"?(s=!0,m=void 0,i=[0,0,0,0],o=[0,n+1,0,0],c&&(c=!1,g={type:"tableBody",start:Object.assign({},w.start),end:Object.assign({},w.end)},b.add(n,0,[["enter",g,e]])),r=w.type==="tableDelimiterRow"?2:g?3:1):r&&(w.type==="data"||w.type==="tableDelimiterMarker"||w.type==="tableDelimiterFiller")?(s=!1,o[2]===0&&(i[1]!==0&&(o[0]=o[1],m=Cm(b,e,i,r,void 0,m),i=[0,0,0,0]),o[2]=n)):w.type==="tableCellDivider"&&(s?s=!1:(i[1]!==0&&(o[0]=o[1],m=Cm(b,e,i,r,void 0,m)),i=o,o=[i[1],n,0,0])):w.type==="tableHead"?(c=!0,d=n):w.type==="tableRow"||w.type==="tableDelimiterRow"?(d=n,i[1]!==0?(o[0]=o[1],m=Cm(b,e,i,r,n,m)):o[1]!==0&&(m=Cm(b,e,o,r,n,m)),r=0):r&&(w.type==="data"||w.type==="tableDelimiterMarker"||w.type==="tableDelimiterFiller")&&(o[3]=n)}for(d!==0&&bE(b,e,d,h,g),b.consume(e.events),n=-1;++n<e.events.length;){const y=e.events[n];y[0]==="enter"&&y[1].type==="table"&&(y[1]._align=Zq(e.events,n))}return t}function Cm(t,e,n,s,r,i){const o=s===1?"tableHeader":s===2?"tableDelimiter":"tableData",c="tableContent";n[0]!==0&&(i.end=Object.assign({},Tc(e.events,n[0])),t.add(n[0],0,[["exit",i,e]]));const d=Tc(e.events,n[1]);if(i={type:o,start:Object.assign({},d),end:Object.assign({},d)},t.add(n[1],0,[["enter",i,e]]),n[2]!==0){const h=Tc(e.events,n[2]),g=Tc(e.events,n[3]),m={type:c,start:Object.assign({},h),end:Object.assign({},g)};if(t.add(n[2],0,[["enter",m,e]]),s!==2){const b=e.events[n[2]],y=e.events[n[3]];if(b[1].end=Object.assign({},y[1].end),b[1].type="chunkText",b[1].contentType="text",n[3]>n[2]+1){const w=n[2]+1,x=n[3]-n[2]-1;t.add(w,x,[])}}t.add(n[3]+1,0,[["exit",m,e]])}return r!==void 0&&(i.end=Object.assign({},Tc(e.events,r)),t.add(r,0,[["exit",i,e]]),i=void 0),i}function bE(t,e,n,s,r){const i=[],o=Tc(e.events,n);r&&(r.end=Object.assign({},o),i.push(["exit",r,e])),s.end=Object.assign({},o),i.push(["exit",s,e]),t.add(n+1,0,i)}function Tc(t,e){const n=t[e],s=n[0]==="enter"?"start":"end";return n[1][s]}const sK={name:"tasklistCheck",tokenize:iK};function rK(){return{text:{91:sK}}}function iK(t,e,n){const s=this;return r;function r(d){return s.previous!==null||!s._gfmTasklistFirstContentOfListItem?n(d):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(d),t.exit("taskListCheckMarker"),i)}function i(d){return Wt(d)?(t.enter("taskListCheckValueUnchecked"),t.consume(d),t.exit("taskListCheckValueUnchecked"),o):d===88||d===120?(t.enter("taskListCheckValueChecked"),t.consume(d),t.exit("taskListCheckValueChecked"),o):n(d)}function o(d){return d===93?(t.enter("taskListCheckMarker"),t.consume(d),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),c):n(d)}function c(d){return et(d)?e(d):kt(d)?t.check({tokenize:aK},e,n)(d):n(d)}}function aK(t,e,n){return Et(t,s,"whitespace");function s(r){return r===null?n(r):e(r)}}function oK(t){return V6([Oq(),Uq(),Xq(t),eK(),rK()])}const lK={};function cK(t){const e=this,n=t||lK,s=e.data(),r=s.micromarkExtensions||(s.micromarkExtensions=[]),i=s.fromMarkdownExtensions||(s.fromMarkdownExtensions=[]),o=s.toMarkdownExtensions||(s.toMarkdownExtensions=[]);r.push(oK(n)),i.push(Eq()),o.push(jq(n))}function uK(t){uO(t,[/\r?\n|\r/g,hK])}function hK(){return{type:"break"}}function dK(){return function(t){uK(t)}}const fK={pre:({children:t})=>f.jsx(f.Fragment,{children:t}),li:({children:t,...e})=>f.jsx("li",{className:"py-0.5 ml-0",...e,children:t}),ul:({children:t,...e})=>f.jsx("ul",{className:"list-disc list-outside ml-5 pl-0 my-2",...e,children:t}),ol:({children:t,...e})=>f.jsx("ol",{className:"list-decimal list-outside ml-5 pl-0 my-2",...e,children:t}),strong:({children:t,...e})=>f.jsx("span",{className:"font-semibold",...e,children:t}),a:({children:t,href:e,...n})=>{let s=e||"";return s&&!s.startsWith("http")&&!s.startsWith("#")&&(s=`https://${s}`),f.jsx("a",{className:"text-sky-400 hover:underline",href:s,target:"_blank",rel:"noreferrer noopener",...n,children:t})},h1:({children:t,...e})=>f.jsx("h1",{className:"text-xl font-semibold mt-4 mb-2",...e,children:t}),h2:({children:t,...e})=>f.jsx("h2",{className:"text-lg font-semibold mt-4 mb-2",...e,children:t}),h3:({children:t,...e})=>f.jsx("h3",{className:"text-base font-semibold mt-3 mb-1",...e,children:t}),h4:({children:t,...e})=>f.jsx("h4",{className:"text-sm font-semibold mt-3 mb-1",...e,children:t}),h5:({children:t,...e})=>f.jsx("h5",{className:"text-sm font-semibold mt-2 mb-1",...e,children:t}),h6:({children:t,...e})=>f.jsx("h6",{className:"text-xs font-semibold mt-2 mb-1",...e,children:t}),p:({children:t,...e})=>f.jsx("p",{className:"my-2 leading-relaxed",...e,children:t}),table:({children:t,...e})=>f.jsx("div",{className:"overflow-x-auto my-3",children:f.jsx("table",{className:"w-full border-collapse border border-neutral-600 text-xs",...e,children:t})}),thead:({children:t,...e})=>f.jsx("thead",{className:"bg-neutral-700",...e,children:t}),tbody:({children:t,...e})=>f.jsx("tbody",{...e,children:t}),tr:({children:t,...e})=>f.jsx("tr",{className:"border-b border-neutral-600",...e,children:t}),th:({children:t,...e})=>f.jsx("th",{className:"p-2 text-left font-semibold border-r last:border-r-0 border-neutral-600",...e,children:t}),td:({children:t,...e})=>f.jsx("td",{className:"p-2 border-r last:border-r-0 border-neutral-600",...e,children:t}),blockquote:({children:t,...e})=>f.jsx("blockquote",{className:"border-l-4 border-neutral-500 pl-3 py-1 my-2 italic text-neutral-300",...e,children:t}),hr:({...t})=>f.jsx("hr",{className:"my-4 border-neutral-600",...t}),code({children:t,className:e,...n}){const s=/language-(\w+)/.exec(e||""),r=String(t).replace(/\n$/,""),i=r.includes(`
`);if(!s&&!i)return f.jsx("code",{...n,className:`${e||""} bg-neutral-700 px-1.5 py-0.5 rounded text-xs font-mono text-sky-300`,children:t});const o=s?.[1]||"text";return f.jsxs("div",{className:"my-3",children:[f.jsx("div",{className:"flex items-center justify-between bg-neutral-700 px-3 py-1 rounded-t text-xs text-neutral-400",children:f.jsx("span",{children:o})}),f.jsx("pre",{className:"bg-neutral-800 p-3 rounded-b overflow-x-auto",children:f.jsx("code",{className:"text-xs font-mono text-neutral-200",children:r})})]})}},pK=[cK,dK],mK=t=>{const e=Me.c(6),{children:n}=t;if(!n)return null;let s=n,r;if(e[0]!==s){s=s.replace(/^(#{1,6}\s+.+)\n```/gm,"$1\n\n```");let o;e[3]===Symbol.for("react.memo_cache_sentinel")?(o=/```\n(#{1,6}\s+)/gm,e[3]=o):o=e[3],r=s.replace(o,"```\n\n$1"),e[0]=s,e[1]=r,e[2]=s}else r=e[1],s=e[2];s=r;let i;return e[4]!==s?(i=f.jsx(JV,{remarkPlugins:pK,components:fK,children:s}),e[4]=s,e[5]=i):i=e[5],i},gK=F.memo(mK,(t,e)=>t.children===e.children);function BO({isOpen:t,onClose:e,otherPanelOpen:n=!1,adapter:s,environment:r}){const[i,o]=F.useState([]),[c,d]=F.useState([]),[h,g]=F.useState(""),[m,b]=F.useState(!1),y=F.useRef(null),w=F.useRef(null),x=F.useRef(s.id);F.useEffect(()=>{x.current!==s.id&&(o([]),d([]),x.current=s.id)},[s.id]),F.useEffect(()=>{y.current?.scrollIntoView({behavior:"smooth"})},[i]),F.useEffect(()=>{t&&w.current?.focus()},[t]);const S=async N=>{if(N.preventDefault(),!h.trim()||m)return;const R={id:Date.now().toString(),role:"user",content:h.trim()},B=(Date.now()+1).toString();o(E=>[...E,R]),g(""),b(!0),o(E=>[...E,{id:B,role:"assistant",content:"",isStreaming:!0}]);try{const E=sl().ai?.model||"",z=s.buildInstructions(r);let Y=[...c,{role:Uo.User,content:R.content}],D=0;const W=10;for(;D<W;){D++;const V=await zz(E,z,Y,s.tools,(q,X)=>{o(I=>I.map(L=>L.id===B?{...L,content:X}:L))});if(!V.toolCalls||V.toolCalls.length===0){d([...Y,V]),o(q=>q.map(X=>X.id===B?{...X,content:V.content,isStreaming:!1}:X));break}Y=[...Y,V];for(const q of V.toolCalls){console.log("Tool call:",q.name,JSON.parse(q.arguments));const X=await s.executeTool(q,r);Y.push({role:Uo.Tool,content:"",toolResult:X})}}}catch(E){console.error("Chat error:",E),o(z=>z.map(U=>U.id===B?{...U,content:"Sorry, I encountered an error. Please try again.",isStreaming:!1}:U))}finally{b(!1)}},k=N=>{N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),S(N))},C=()=>{o([]),d([])};return f.jsxs("div",{className:`fixed top-0 right-0 h-screen bg-white border-l border-neutral-200 dark:bg-neutral-900 dark:border-neutral-800 flex flex-col transition-all duration-300 ease-in-out z-30 ${t?"opacity-100 translate-x-0":"opacity-0 translate-x-full pointer-events-none"}`,style:{width:n?"28rem":"40rem"},children:[f.jsxs("div",{className:"shrink-0 h-16 px-4 flex items-center justify-between border-b border-neutral-200 dark:border-neutral-800",children:[f.jsx("h3",{className:"font-semibold text-neutral-900 dark:text-neutral-100",children:s.name}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:C,className:"p-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded-md transition-colors",title:"Clear chat",children:f.jsx(kf,{size:18})}),f.jsx("button",{onClick:e,className:"p-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded-md transition-colors",children:f.jsx(Og,{size:18})})]})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0",children:[i.map(N=>f.jsx("div",{className:`text-sm ${N.role==="user"?"bg-neutral-100 dark:bg-neutral-800/50 -mx-4 px-4 py-3 border-l-2 border-sky-500":""}`,children:f.jsx("div",{className:N.role==="user"?"text-neutral-900 dark:text-neutral-100":"text-neutral-800 dark:text-neutral-200",children:N.content?N.role==="assistant"?f.jsx(gK,{children:N.content}):f.jsx("span",{className:"whitespace-pre-wrap",children:N.content}):N.isStreaming&&f.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[f.jsx(na,{size:14,className:"animate-spin"}),"Thinking..."]})})},N.id)),f.jsx("div",{ref:y})]}),f.jsx("form",{onSubmit:S,className:"shrink-0 p-4 border-t border-neutral-200 dark:border-neutral-800",children:f.jsxs("div",{className:"flex items-end gap-2",children:[f.jsx("textarea",{ref:w,value:h,onChange:N=>g(N.target.value),onKeyDown:k,placeholder:s.placeholder,rows:1,disabled:m,className:"flex-1 px-4 py-2.5 bg-neutral-50 border border-neutral-300 dark:bg-neutral-800 dark:border-neutral-700 rounded-xl text-neutral-900 dark:text-neutral-100 text-sm placeholder-neutral-500 resize-none focus:outline-none focus:ring-2 focus:ring-sky-600 focus:border-transparent disabled:opacity-50",style:{maxHeight:"120px"}}),f.jsx("button",{type:"submit",disabled:!h.trim()||m,className:"p-2.5 bg-sky-600 hover:bg-sky-500 disabled:bg-neutral-300 dark:disabled:bg-neutral-700 disabled:text-neutral-500 text-white rounded-xl transition-colors",children:m?f.jsx(na,{size:18,className:"animate-spin"}):f.jsx(OP,{size:18})})]})})]})}const yK=[{name:"list_resources",description:"List Kubernetes resources of a specific type in a namespace or cluster-wide",parameters:{type:"object",properties:{resource:{type:"string",description:"The type of resource to list (e.g., pods, deployments, services, configmaps, secrets, ingresses, gateways, httproutes, grpcroutes, tcproutes, udproutes, tlsroutes, jobs, cronjobs, daemonsets, statefulsets, replicasets, nodes, namespaces, persistentvolumes, persistentvolumeclaims, events)"},namespace:{type:"string",description:'The namespace to list resources from. Use "all" for all namespaces, or omit for cluster-scoped resources'}},required:["resource"]}},{name:"get_resource",description:"Get detailed information about a specific Kubernetes resource",parameters:{type:"object",properties:{resource:{type:"string",description:"The type of resource (e.g., pod, deployment, service)"},name:{type:"string",description:"The name of the resource"},namespace:{type:"string",description:"The namespace of the resource (required for namespaced resources)"}},required:["resource","name"]}},{name:"get_pod_logs",description:"Get logs from a specific pod",parameters:{type:"object",properties:{name:{type:"string",description:"The name of the pod"},namespace:{type:"string",description:"The namespace of the pod"},container:{type:"string",description:"The container name (optional, defaults to first container)"},tailLines:{type:"string",description:"Number of lines to return from the end of the logs (default: 100)"}},required:["name","namespace"]}},{name:"describe_resource",description:"Get events and status conditions for a Kubernetes resource",parameters:{type:"object",properties:{resource:{type:"string",description:"The type of resource (e.g., pod, deployment, service)"},name:{type:"string",description:"The name of the resource"},namespace:{type:"string",description:"The namespace of the resource"}},required:["resource","name","namespace"]}}];async function Jv(t,e){const n=e.toLowerCase(),s=await _l(t,n);return s?{config:s,plural:s.name}:null}async function bK(t,e,n){switch(e){case"list_resources":{const s=await Jv(t,n.resource);if(!s)return{error:`Unknown resource type: ${n.resource}`};const{config:r,plural:i}=s,o=Jo(r);let c;r.namespaced&&n.namespace&&n.namespace!=="all"?c=`${o}/namespaces/${n.namespace}/${i}`:c=`${o}/${i}`;const d=await fetch(`/contexts/${t}${c}`);if(!d.ok)return{error:`Failed to list ${i}: ${d.status} ${d.statusText}`};const h=await d.json();return{kind:h.kind,items:h.items?.map(g=>({name:g.metadata?.name,namespace:g.metadata?.namespace,createdAt:g.metadata?.creationTimestamp,status:g.status}))||[]}}case"get_resource":{const s=await Jv(t,n.resource);if(!s)return{error:`Unknown resource type: ${n.resource}`};const{config:r,plural:i}=s,o=Jo(r);let c;r.namespaced&&n.namespace?c=`${o}/namespaces/${n.namespace}/${i}/${n.name}`:c=`${o}/${i}/${n.name}`;const d=await fetch(`/contexts/${t}${c}`);return d.ok?d.json():{error:`Failed to get ${n.resource} ${n.name}: ${d.status} ${d.statusText}`}}case"get_pod_logs":{const s=n.tailLines||"100";let r=`/api/v1/namespaces/${n.namespace}/pods/${n.name}/log?tailLines=${s}`;n.container&&(r+=`&container=${n.container}`);const i=await fetch(`/contexts/${t}${r}`);return i.ok?{logs:await i.text()||"(no logs available)"}:{error:`Failed to get logs: ${i.status} ${i.statusText}`}}case"describe_resource":{const s=await Jv(t,n.resource);if(!s)return{error:`Unknown resource type: ${n.resource}`};const{config:r,plural:i}=s,o=Jo(r);let c;r.namespaced&&n.namespace?c=`${o}/namespaces/${n.namespace}/${i}/${n.name}`:c=`${o}/${i}/${n.name}`;const d=await fetch(`/contexts/${t}${c}`);if(!d.ok)return{error:`Failed to get ${n.resource} ${n.name}: ${d.status}`};const h=await d.json(),g=`/api/v1/namespaces/${n.namespace}/events?fieldSelector=involvedObject.name=${n.name}`,m=await fetch(`/contexts/${t}${g}`);let b=[];return m.ok&&(b=(await m.json()).items?.map(w=>({type:w.type,reason:w.reason,message:w.message,lastTimestamp:w.lastTimestamp}))||[]),{metadata:h.metadata,spec:h.spec,status:h.status,events:b}}default:return{error:`Unknown tool: ${e}`}}}function vK(){return{id:"kubernetes",name:"Kubernetes Assistant",placeholder:"Ask about your Kubernetes resources...",tools:yK,async executeTool(t,e){const n=e,s=JSON.parse(t.arguments),r=await bK(n.currentContext,t.name,s);return{id:t.id,data:r}},buildInstructions(t){const e=t;let n="";const s=[];return e.currentNamespace&&s.push(`- Current namespace: ${e.currentNamespace}`),e.selectedResourceKind&&s.push(`- Currently viewing resource type: ${e.selectedResourceKind}`),e.selectedResourceName&&s.push(`- Currently selected resource: ${e.selectedResourceName}`),s.length>0&&(n=`

The user is currently viewing:
${s.join(`
`)}

Use this context to provide more relevant answers. When the user asks about resources without specifying a namespace, use the current namespace.`),`You are a helpful Kubernetes assistant. You can help users understand and manage their Kubernetes clusters.
When users ask about resources, use the available tools to fetch real data from the cluster.
Provide clear, concise explanations and highlight any issues or warnings you find.
Format your responses using markdown for better readability.${n}`}}}const Dd=new Map,Ld=new Map;function xK(t){t?(Dd.delete(t),Ld.delete(t)):(Dd.clear(),Ld.clear())}async function x2(t){const e=Dd.get(t);if(e!==void 0)return e;const n=Ld.get(t);if(n)return n;const s=(async()=>{try{const i=await s$(t,"pods.metrics.k8s.io")!==void 0;return Dd.set(t,i),i}catch(r){return console.warn("Failed to check metrics availability:",r),Dd.set(t,!1),!1}finally{Ld.delete(t)}})();return Ld.set(t,s),s}function so(t){if(!t)return 0;if(t.endsWith("n"))return parseInt(t.slice(0,-1),10)||0;if(t.endsWith("m"))return(parseInt(t.slice(0,-1),10)||0)*1e6;const e=parseFloat(t);return isNaN(e)?0:e*1e9}function ro(t){if(!t)return 0;const e=t.match(/^(\d+(?:\.\d+)?)(Ki|Mi|Gi|Ti|K|M|G|T|k|m|g|t)?$/);if(!e){const r=parseInt(t,10);return isNaN(r)?0:r}const n=parseFloat(e[1]),s=e[2];if(!s)return n;switch(s){case"Ki":return n*1024;case"Mi":return n*1024*1024;case"Gi":return n*1024*1024*1024;case"Ti":return n*1024*1024*1024*1024;case"K":case"k":return n*1e3;case"M":case"m":return n*1e3*1e3;case"G":case"g":return n*1e3*1e3*1e3;case"T":case"t":return n*1e3*1e3*1e3*1e3;default:return n}}function ef(t){if(t>=1e9){const e=t/1e9;return e>=10?`${Math.round(e)}`:`${e.toFixed(1)}`}return`${Math.round(t/1e6)}m`}function tf(t){return t>=1024*1024*1024?`${(t/(1024*1024*1024)).toFixed(1)}Gi`:t>=1024*1024?`${(t/(1024*1024)).toFixed(0)}Mi`:t>=1024?`${(t/1024).toFixed(0)}Ki`:`${t}B`}async function _K(t,e,n){try{return await x2(t)?await ha(`/apis/metrics.k8s.io/v1beta1/namespaces/${n}/pods/${e}`,t):null}catch{return null}}async function _2(t,e,n){try{if(!await x2(t))return[];const s=Object.entries(n).map(([i,o])=>`${i}=${o}`).join(",");return(await ha(`/apis/metrics.k8s.io/v1beta1/namespaces/${e}/pods?labelSelector=${encodeURIComponent(s)}`,t)).items||[]}catch{return[]}}async function wK(t,e){try{return await x2(t)?await ha(`/apis/metrics.k8s.io/v1beta1/nodes/${e}`,t):null}catch{return null}}function w2(t){const e=new Map;for(const s of t)for(const r of s.containers){const i=e.get(r.name)||{cpuNanos:0,memoryBytes:0,count:0};i.cpuNanos+=so(r.usage.cpu),i.memoryBytes+=ro(r.usage.memory),i.count++,e.set(r.name,i)}const n=new Map;for(const[s,r]of e)n.set(s,{cpu:{usage:ef(r.cpuNanos),usageNanoCores:r.cpuNanos},memory:{usage:tf(r.memoryBytes),usageBytes:r.memoryBytes}});return n}function vE(t){const e=Math.floor((Date.now()-t.getTime())/1e3);if(e<60)return`${e}s ago`;const n=Math.floor(e/60);if(n<60)return`${n}m ago`;const s=Math.floor(n/60);return s<24?`${s}h ago`:`${Math.floor(s/24)}d ago`}function Dh(t){const e=t.match(/^(\d+)(Ki|Mi|Gi|Ti|K|M|G|T)?$/);if(!e)return t;const n=parseInt(e[1],10),s=e[2];return s?s==="Ki"&&n>=1024*1024?`${(n/(1024*1024)).toFixed(1)}Gi`:s==="Ki"&&n>=1024?`${(n/1024).toFixed(1)}Mi`:s==="Mi"&&n>=1024?`${(n/1024).toFixed(1)}Gi`:t:n>=1024*1024*1024?`${(n/(1024*1024*1024)).toFixed(1)}Gi`:n>=1024*1024?`${(n/(1024*1024)).toFixed(1)}Mi`:n>=1024?`${(n/1024).toFixed(1)}Ki`:`${n}B`}function DO(t){switch(t){case"ReadWriteOnce":return"bg-blue-500/20 text-blue-400 border border-blue-500/30";case"ReadOnlyMany":return"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30";case"ReadWriteMany":return"bg-purple-500/20 text-purple-400 border border-purple-500/30";case"ReadWriteOncePod":return"bg-amber-500/20 text-amber-400 border border-amber-500/30";default:return"bg-gray-700 text-gray-300"}}function LO(t){switch(t){case"ReadWriteOnce":return"RWO";case"ReadOnlyMany":return"ROX";case"ReadWriteMany":return"RWX";case"ReadWriteOncePod":return"RWOP";default:return t}}function SK(t){const e=t.split(" ");if(e.length!==5)return t;const[n,s,r,i,o]=e;if(t==="* * * * *")return"Every minute";if(t==="0 * * * *")return"Every hour";if(t==="0 0 * * *")return"Every day at midnight";if(t==="0 0 * * 0")return"Every Sunday at midnight";if(t==="0 0 1 * *")return"First day of every month at midnight";const c=[];if(n!=="*"&&c.push(`at minute ${n}`),s!=="*"&&c.push(`at hour ${s}`),r!=="*"&&c.push(`on day ${r}`),i!=="*"&&c.push(`in month ${i}`),o!=="*"){const d=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],h=parseInt(o);c.push(`on ${isNaN(h)?o:d[h]||o}`)}return c.length>0?c.join(", "):"Custom schedule"}function xE(t){return{name:t.name,image:t.image||"",resources:t.resources?{requests:t.resources.requests,limits:t.resources.limits}:void 0,ports:t.ports?.map(e=>({name:e.name,containerPort:e.containerPort,protocol:e.protocol})),command:t.command,args:t.args,mounts:t.volumeMounts?.map(e=>({name:e.name,mountPath:e.mountPath,readOnly:e.readOnly,subPath:e.subPath}))}}function xu(t,e,n){const s=[];return e&&e.length>0&&s.push({id:"init-containers",title:"Init Containers",data:{type:"containers",items:e.map(xE)}}),t&&t.length>0&&s.push({id:"containers",title:"Containers",data:{type:"containers",items:t.map(xE),metricsLoader:n}}),s}function kK(t){if(!t||t.length===0)return null;let e=0,n=0,s=0,r=0,i=!1,o=!1,c=!1,d=!1;for(const h of t){const g=h.resources;if(!g)continue;const m=g.requests,b=g.limits;m?.cpu&&(e+=so(m.cpu),i=!0),b?.cpu&&(n+=so(b.cpu),o=!0),m?.memory&&(s+=ro(m.memory),c=!0),b?.memory&&(r+=ro(b.memory),d=!0)}return!i&&!o&&!c&&!d?null:{cpu:{requests:i?ef(e):void 0,requestsNanoCores:i?e:void 0,limits:o?ef(n):void 0,limitsNanoCores:o?n:void 0},memory:{requests:c?tf(s):void 0,requestsBytes:c?s:void 0,limits:d?tf(r):void 0,limitsBytes:d?r:void 0}}}function Sl(t){const e=kK(t);return e?{id:"resource-quota",data:{type:"resource-quota",data:e}}:null}function Lr(t,e){const n=[...e??[],...t??[]];if(n.length===0)return null;const s=new Set,r=[];for(const i of n)s.has(i.image??"")||(s.add(i.image??""),r.push({name:i.name,image:i.image}));return{id:"images",title:"Container Images",data:{type:"container-images",containers:r}}}const CK={kinds:["Deployment","Deployments"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata,i=r?.namespace;if(!n)return{sections:[]};const o=n.replicas??1,c=s?.readyReplicas??0,d=s?.updatedReplicas??0,h=s?.availableReplicas??0,g=async()=>{const y=n.selector?.matchLabels;if(!i||!y||Object.keys(y).length===0)return null;const w=await _2(t,i,y);return w.length===0?null:w2(w)},m=[...n.template?.spec?.containers??[],...n.template?.spec?.initContainers??[]],b=Sl(m);return{sections:[{id:"replicas",title:"Replica Status",data:{type:"gauges",items:[{label:"Ready",current:c,total:o,color:"emerald"},{label:"Updated",current:d,total:o,color:"blue"},{label:"Available",current:h,total:o,color:"cyan"}],showPodGrid:{total:o,ready:c,available:h,icon:"box"}}},{id:"strategy",data:{type:"info-grid",items:[{label:"Strategy",value:n.strategy?.type||"RollingUpdate"},...n.strategy?.rollingUpdate?[{label:"Max Surge",value:String(n.strategy.rollingUpdate.maxSurge??"25%"),color:"text-cyan-400"},{label:"Max Unavailable",value:String(n.strategy.rollingUpdate.maxUnavailable??"25%"),color:"text-amber-400"}]:[]],columns:3}},{id:"replicasets",data:{type:"related-replicasets",title:"ReplicaSets",loader:async()=>{if(!i||!r?.name)return[];try{const y=await _l(t,"replicasets");if(!y)return[];const w=await Dg(t,y,i),x=r.name??"",S=r.uid;return w.filter(k=>{const C=k.metadata,N=C.name;if(C.ownerReferences?.some(B=>B.kind==="Deployment"&&B.name===x||B.uid===S))return!0;if(N.startsWith(x+"-")){const B=N.slice(x.length+1);return/^[a-z0-9]{7,10}$/.test(B)}return!1}).map(k=>{const C=k.metadata,N=k.spec,R=k.status,B=C.annotations;return{name:C.name,replicas:R?.replicas??0,readyReplicas:R?.readyReplicas??0,revision:B?.["deployment.kubernetes.io/revision"],images:N?.template?.spec?.containers?.map(E=>E.image)??[],isCurrent:(R?.replicas??0)>0}}).sort((k,C)=>{const N=parseInt(k.revision??"0");return parseInt(C.revision??"0")-N})}catch(y){return console.error("Failed to fetch ReplicaSets:",y),[]}}}},...Lr(n.template?.spec?.containers,n.template?.spec?.initContainers)?[Lr(n.template?.spec?.containers,n.template?.spec?.initContainers)]:[],...xu(n.template?.spec?.containers,n.template?.spec?.initContainers,g),...b?[b]:[]]}}},NK={kinds:["Pod","Pods"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata,i=r?.namespace;if(!n)return{sections:[]};const o=n.containers??[],c=n.initContainers??[],d=s?.containerStatuses??[],h=s?.initContainerStatuses??[],g=d.reduce((w,x)=>w+(x.restartCount??0),0),m=async()=>{const w=r?.name,x=i;if(!w||!x)return null;const S=await _K(t,w,x);if(!S)return null;const k=new Map;for(const C of S.containers)k.set(C.name,{cpu:{usage:ef(so(C.usage.cpu)),usageNanoCores:so(C.usage.cpu)},memory:{usage:tf(ro(C.usage.memory)),usageBytes:ro(C.usage.memory)}});return k},b=[...o,...c],y=Sl(b);return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Phase",value:s?.phase||"Unknown",status:EK(s?.phase)},{label:"Pod IP",value:s?.podIP||"Pending"},{label:"Node",value:n.nodeName||"Not scheduled"},{label:"Restarts",value:g,status:g>0?"warning":"success"}]}},...y?[y]:[],...c.length>0?[{id:"init-containers",title:"Init Containers",data:{type:"containers",items:c.map(w=>_E(w,h))}}]:[],{id:"containers",title:"Containers",data:{type:"containers",items:o.map(w=>_E(w,d)),metricsLoader:m}},...n.volumes?.length?[{id:"volumes",title:"Volumes",data:{type:"volumes",items:n.volumes.map(w=>AK(w,[...o,...c]))}}]:[]]}}};function _E(t,e){const n=e.find(o=>o.name===t.name),s=jK(n),r=n?.lastState?.terminated,i=n?.state?.terminated;return{name:t.name,image:t.image||"",state:s.state,stateReason:s.reason,stateMessage:s.message,ready:n?.ready,restartCount:n?.restartCount,currentTermination:i?{reason:i.reason,message:i.message,exitCode:i.exitCode,signal:i.signal,startedAt:i.startedAt?.toISOString?.()??i.startedAt,finishedAt:i.finishedAt?.toISOString?.()??i.finishedAt}:void 0,lastTermination:r?{reason:r.reason,exitCode:r.exitCode,signal:r.signal,finishedAt:r.finishedAt?.toISOString?.()??r.finishedAt}:void 0,resources:t.resources?{requests:t.resources.requests,limits:t.resources.limits}:void 0,ports:t.ports?.map(o=>({name:o.name,containerPort:o.containerPort,protocol:o.protocol})),command:t.command,args:t.args,mounts:t.volumeMounts?.map(o=>({name:o.name,mountPath:o.mountPath,readOnly:o.readOnly,subPath:o.subPath}))}}function AK(t,e){const n=TK(t),s=[];for(const r of e)if(r.volumeMounts)for(const i of r.volumeMounts)i.name===t.name&&s.push({container:r.name,mountPath:i.mountPath,readOnly:i.readOnly??!1,subPath:i.subPath});return{name:t.name,type:n.type,source:n.detail,extra:n.extra,mounts:s}}function EK(t){switch(t?.toLowerCase()){case"running":return"success";case"succeeded":return"success";case"pending":return"warning";case"failed":return"error";default:return"neutral"}}function jK(t){return t?.state?t.state.running?{state:"running"}:t.state.waiting?{state:"waiting",reason:t.state.waiting.reason,message:t.state.waiting.message}:t.state.terminated?{state:"terminated",reason:t.state.terminated.reason,message:t.state.terminated.message}:{}:{}}function Nm(t){const e=t.toString(8).padStart(4,"0"),n=parseInt(e[e.length-4]||"0",10),s=parseInt(e[e.length-3],10),r=parseInt(e[e.length-2],10),i=parseInt(e[e.length-1],10),o=(n&4)!==0,c=(n&2)!==0,d=(n&1)!==0,h=w=>w&4?"r":"-",g=w=>w&2?"w":"-",m=s&1?o?"s":"x":o?"S":"-",b=r&1?c?"s":"x":c?"S":"-",y=i&1?d?"t":"x":d?"T":"-";return h(s)+g(s)+m+h(r)+g(r)+b+h(i)+g(i)+y}function TK(t){if(t.configMap)return{type:"ConfigMap",detail:t.configMap.name||"",extra:{...t.configMap.optional!==void 0&&{optional:String(t.configMap.optional)},...t.configMap.defaultMode!==void 0&&{mode:Nm(t.configMap.defaultMode)}}};if(t.secret)return{type:"Secret",detail:t.secret.secretName||"",extra:{...t.secret.optional!==void 0&&{optional:String(t.secret.optional)},...t.secret.defaultMode!==void 0&&{mode:Nm(t.secret.defaultMode)}}};if(t.emptyDir)return{type:"EmptyDir",detail:t.emptyDir.medium||"default",extra:{...t.emptyDir.sizeLimit&&{sizeLimit:t.emptyDir.sizeLimit}}};if(t.hostPath)return{type:"HostPath",detail:t.hostPath.path,extra:{...t.hostPath.type&&{type:t.hostPath.type}}};if(t.persistentVolumeClaim)return{type:"PVC",detail:t.persistentVolumeClaim.claimName,extra:{...t.persistentVolumeClaim.readOnly&&{readOnly:"true"}}};if(t.projected){const e=t.projected.sources||[],n=e.map(s=>s.configMap?"ConfigMap":s.secret?"Secret":s.serviceAccountToken?"ServiceAccountToken":s.downwardAPI?"DownwardAPI":"Unknown");return{type:"Projected",detail:`${e.length} sources`,extra:{sources:n.join(", "),...t.projected.defaultMode!==void 0&&{mode:Nm(t.projected.defaultMode)}}}}return t.downwardAPI?{type:"DownwardAPI",detail:`${t.downwardAPI.items?.length||0} items`,extra:{...t.downwardAPI.defaultMode!==void 0&&{mode:Nm(t.downwardAPI.defaultMode)}}}:t.nfs?{type:"NFS",detail:`${t.nfs.server}:${t.nfs.path}`,extra:{...t.nfs.readOnly&&{readOnly:"true"}}}:t.csi?{type:"CSI",detail:t.csi.driver,extra:{...t.csi.fsType&&{fsType:t.csi.fsType},...t.csi.readOnly&&{readOnly:"true"}}}:{type:"Unknown",detail:""}}const RK={kinds:["StatefulSet","StatefulSets"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata,i=r?.namespace;if(!n)return{sections:[]};const o=n.replicas??1,c=s?.readyReplicas??0,d=s?.currentReplicas??0,h=s?.updatedReplicas??0,g=s?.availableReplicas??0,m=Array.from({length:o},(x,S)=>`${r?.name}-${S}`),b=async()=>{const x=n.selector?.matchLabels;if(!i||!x||Object.keys(x).length===0)return null;const S=await _2(t,i,x);return S.length===0?null:w2(S)},y=[...n.template?.spec?.containers??[],...n.template?.spec?.initContainers??[]],w=Sl(y);return{sections:[{id:"replicas",title:"Replica Status",data:{type:"gauges",items:[{label:"Ready",current:c,total:o,color:"emerald"},{label:"Current",current:d,total:o,color:"blue"},{label:"Updated",current:h,total:o,color:"cyan"}],showPodGrid:{total:o,ready:c,available:g,showOrdinal:!0,icon:"database",podTitles:m}}},{id:"config",data:{type:"info-grid",items:[{label:"Service Name",value:n.serviceName,color:"text-cyan-400"},{label:"Pod Management",value:n.podManagementPolicy||"OrderedReady"},{label:"Update Strategy",value:n.updateStrategy?.type||"RollingUpdate"},...n.updateStrategy?.rollingUpdate?.partition!==void 0?[{label:"Partition",value:n.updateStrategy.rollingUpdate.partition,color:"text-amber-400"}]:[]],columns:2}},...s?.currentRevision?[{id:"revisions",title:"Revisions",data:{type:"info-grid",items:[{label:"Current",value:s.currentRevision,color:"text-cyan-400"},...s.updateRevision&&s.updateRevision!==s.currentRevision?[{label:"Update",value:s.updateRevision,color:"text-amber-400"}]:[]],columns:1}}]:[],...n.volumeClaimTemplates?.length?[{id:"volume-templates",title:"Volume Claim Templates",data:{type:"volume-claim-templates",items:n.volumeClaimTemplates.map(x=>({name:x.metadata?.name||"",size:x.spec?.resources?.requests?.storage,storageClass:x.spec?.storageClassName,accessModes:x.spec?.accessModes}))}}]:[],{id:"pvcs",data:{type:"related-pvcs",title:"Persistent Volume Claims",loader:async()=>{if(!i||!r?.name)return[];try{const x=await _l(t,"persistentvolumeclaims");if(!x)return[];const S=await Dg(t,x,i),k=r.name,C=n?.volumeClaimTemplates?.map(N=>N.metadata?.name)??[];return S.filter(N=>{const B=N.metadata.name;return C.some(E=>B.startsWith(`${E}-${k}-`))}).map(N=>{const R=N.metadata,B=N.spec,E=N.status;return{name:R.name,status:E?.phase??"Unknown",capacity:E?.capacity?.storage,storageClass:B?.storageClassName}})}catch(x){return console.error("Failed to fetch PVCs:",x),[]}}}},...Lr(n.template?.spec?.containers,n.template?.spec?.initContainers)?[Lr(n.template?.spec?.containers,n.template?.spec?.initContainers)]:[],...xu(n.template?.spec?.containers,n.template?.spec?.initContainers,b),...w?[w]:[]]}}},OK={kinds:["DaemonSet","DaemonSets"],adapt(t,e){const n=e.spec,s=e.status,i=e.metadata?.namespace;if(!n)return{sections:[]};const o=s?.desiredNumberScheduled??0,c=s?.currentNumberScheduled??0,d=s?.numberReady??0,h=s?.numberAvailable??0,g=s?.numberMisscheduled??0,m=s?.updatedNumberScheduled??0,b=async()=>{const x=n.selector?.matchLabels;if(!i||!x||Object.keys(x).length===0)return null;const S=await _2(t,i,x);return S.length===0?null:w2(S)},y=[...n.template?.spec?.containers??[],...n.template?.spec?.initContainers??[]],w=Sl(y);return{sections:[{id:"distribution",title:"Node Distribution",data:{type:"gauges",items:[{label:"Scheduled",current:c,total:o,color:"blue"},{label:"Ready",current:d,total:o,color:"emerald"},{label:"Available",current:h,total:o,color:"cyan"}],showPodGrid:{total:o,ready:d,current:c,icon:"server"}}},{id:"status",data:{type:"info-grid",items:[{label:"Update Strategy",value:n.updateStrategy?.type||"RollingUpdate"},{label:"Updated",value:`${m}/${o}`,color:"text-cyan-400"},...g>0?[{label:"Misscheduled",value:`${g} pods on wrong nodes`,color:"text-red-400"}]:[]],columns:2}},...n.updateStrategy?.rollingUpdate?[{id:"rolling-update",title:"Rolling Update Config",data:{type:"info-grid",items:[{label:"Max Unavailable",value:String(n.updateStrategy.rollingUpdate.maxUnavailable??1),color:"text-amber-400"},...n.updateStrategy.rollingUpdate.maxSurge?[{label:"Max Surge",value:String(n.updateStrategy.rollingUpdate.maxSurge),color:"text-cyan-400"}]:[]],columns:2}}]:[],...n.template?.spec?.nodeSelector&&Object.keys(n.template.spec.nodeSelector).length>0?[{id:"node-selector",data:{type:"labels",labels:n.template.spec.nodeSelector,title:"Node Selector"}}]:[],...Lr(n.template?.spec?.containers,n.template?.spec?.initContainers)?[Lr(n.template?.spec?.containers,n.template?.spec?.initContainers)]:[],...xu(n.template?.spec?.containers,n.template?.spec?.initContainers,b),...w?[w]:[]]}}},MK={kinds:["Node","Nodes"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata;if(!s)return{sections:[]};const i=s.nodeInfo,o=s.conditions??[],c=s.addresses??[],d=s.capacity??{},h=s.allocatable??{},g=n?.taints??[],m=r?.labels??{},y=o.find(x=>x.type==="Ready")?.status==="True",w=Object.keys(m).filter(x=>x.startsWith("node-role.kubernetes.io/")).map(x=>x.replace("node-role.kubernetes.io/",""));return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Status",value:y?"Ready":"NotReady",status:y?"success":"error",icon:y?f.jsx(Zr,{size:14}):f.jsx(ca,{size:14})},{label:"Role",value:w.length>0?w.join(", "):"worker",icon:f.jsx(Xr,{size:14,className:"text-purple-400"})}]}},{id:"metrics",data:{type:"node-metrics",title:"Resource Usage",loader:async()=>{const x=r?.name;if(!x)return null;const S=await wK(t,x);if(!S)return null;const k=h.cpu??"0",C=h.memory??"0";return{cpu:{usage:ef(so(S.usage.cpu)),usageNanoCores:so(S.usage.cpu),allocatable:k,allocatableNanoCores:so(k)},memory:{usage:tf(ro(S.usage.memory)),usageBytes:ro(S.usage.memory),allocatable:Dh(C),allocatableBytes:ro(C)}}}}},...c.length>0?[{id:"addresses",title:"Addresses",data:{type:"addresses",addresses:c.map(x=>({type:x.type||"",address:x.address||""}))}}]:[],{id:"resources",title:"Resources",data:{type:"capacity-bars",items:[{label:"CPU",icon:f.jsx(jg,{size:14,className:"text-blue-400"}),capacity:d.cpu??"0",allocatable:h.cpu??"0"},{label:"Memory",icon:f.jsx(ms,{size:14,className:"text-purple-400"}),capacity:Dh(d.memory??"0"),allocatable:Dh(h.memory??"0")},{label:"Pods",icon:f.jsx(Qr,{size:14,className:"text-emerald-400"}),capacity:d.pods??"0",allocatable:h.pods??"0"},...d["ephemeral-storage"]?[{label:"Storage",icon:f.jsx(ms,{size:14,className:"text-amber-400"}),capacity:Dh(d["ephemeral-storage"]),allocatable:Dh(h["ephemeral-storage"]??"0")}]:[]]}},...i?[{id:"system-info",title:"System Info",data:{type:"info-grid",items:[{label:"OS",value:i.operatingSystem},{label:"Arch",value:i.architecture},{label:"Kernel",value:i.kernelVersion},{label:"OS Image",value:i.osImage},{label:"Container Runtime",value:i.containerRuntimeVersion},{label:"Kubelet",value:i.kubeletVersion},{label:"Kube-Proxy",value:i.kubeProxyVersion}],columns:2}}]:[],...g.length>0?[{id:"taints",title:"Taints",data:{type:"taints",items:g.map(x=>({key:x.key||"",value:x.value,effect:x.effect||""}))}}]:[]]}}},BK={kinds:["CronJob","CronJobs"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata,i=r?.namespace;if(!n)return{sections:[]};const o=n.suspend??!1,c=n.schedule,d=s?.lastScheduleTime?new Date(s.lastScheduleTime):null,h=s?.lastSuccessfulTime?new Date(s.lastSuccessfulTime):null,g=s?.active?.length??0,m=SK(c),b=[...n.jobTemplate?.spec?.template?.spec?.containers??[],...n.jobTemplate?.spec?.template?.spec?.initContainers??[]],y=Sl(b);return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Status",value:o?"Suspended":"Active",status:o?"warning":"success",icon:o?f.jsx(Yd,{size:14}):f.jsx(Uc,{size:14})},{label:"Active Jobs",value:String(g),status:g>0?"warning":"neutral",icon:f.jsx(ua,{size:14,className:"text-blue-400"})}]}},...y?[y]:[],{id:"schedule",data:{type:"schedule",schedule:c,description:m}},{id:"timing",data:{type:"info-grid",items:[...d?[{label:"Last Scheduled",value:vE(d),color:"text-purple-400"}]:[],...h?[{label:"Last Successful",value:vE(h),color:"text-emerald-400"}]:[]],columns:2}},{id:"job-config",title:"Job Configuration",data:{type:"info-grid",items:[{label:"Concurrency Policy",value:n.concurrencyPolicy||"Allow",color:DK(n.concurrencyPolicy)},...n.startingDeadlineSeconds?[{label:"Starting Deadline",value:`${n.startingDeadlineSeconds}s`}]:[],{label:"Successful History",value:n.successfulJobsHistoryLimit??3},{label:"Failed History",value:n.failedJobsHistoryLimit??1},...n.jobTemplate?.spec?.backoffLimit!==void 0?[{label:"Backoff Limit",value:n.jobTemplate.spec.backoffLimit}]:[],...n.jobTemplate?.spec?.activeDeadlineSeconds?[{label:"Job Deadline",value:`${n.jobTemplate.spec.activeDeadlineSeconds}s`,color:"text-amber-400"}]:[]],columns:2}},{id:"jobs",data:{type:"related-jobs",title:"Recent Jobs",loader:async()=>{if(!i||!r?.name)return[];try{const w=await _l(t,"jobs");if(!w)return[];const x=await Dg(t,w,i),S=r.name??"",k=r.uid;return x.filter(C=>{const N=C.metadata,R=N.name;if(N.ownerReferences?.some(E=>E.kind==="CronJob"&&E.name===S||E.uid===k))return!0;if(R.startsWith(S+"-")){const E=R.slice(S.length+1);return/^\d{10}$/.test(E)}return!1}).map(C=>{const N=C.metadata,R=C.status,B=R?.conditions,E=B?.some(U=>U.type==="Complete"&&U.status==="True"),z=B?.some(U=>U.type==="Failed"&&U.status==="True");return{name:N.name,status:E?"Complete":z?"Failed":"Running",startTime:R?.startTime,completionTime:R?.completionTime,succeeded:R?.succeeded,failed:R?.failed}}).sort((C,N)=>{const R=C.startTime?new Date(C.startTime).getTime():0;return(N.startTime?new Date(N.startTime).getTime():0)-R})}catch(w){return console.error("Failed to fetch Jobs:",w),[]}}}},...Lr(n.jobTemplate?.spec?.template?.spec?.containers,n.jobTemplate?.spec?.template?.spec?.initContainers)?[Lr(n.jobTemplate?.spec?.template?.spec?.containers,n.jobTemplate?.spec?.template?.spec?.initContainers)]:[],...xu(n.jobTemplate?.spec?.template?.spec?.containers,n.jobTemplate?.spec?.template?.spec?.initContainers)]}}};function DK(t){switch(t){case"Forbid":return"text-red-400";case"Replace":return"text-amber-400";default:return"text-emerald-400"}}const LK={kinds:["Job","Jobs"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=n.completions??1,i=n.parallelism??1,o=s?.succeeded??0,c=s?.failed??0,d=s?.active??0,h=n.backoffLimit??6,g=o>=r,m=s?.conditions?.some(k=>k.type==="Failed"&&k.status==="True"),b=g?"Complete":m?"Failed":d>0?"Running":"Pending",y=s?.startTime?new Date(s.startTime):void 0,w=s?.completionTime?new Date(s.completionTime):void 0,x=[...n.template?.spec?.containers??[],...n.template?.spec?.initContainers??[]],S=Sl(x);return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Status",value:b,status:g?"success":m?"error":d>0?"warning":"neutral",icon:g?f.jsx(Zr,{size:14}):m?f.jsx(ca,{size:14}):f.jsx(Uc,{size:14})},...y?[{label:"Duration",value:IK(y,w),icon:f.jsx(ua,{size:14,className:"text-blue-400"})}]:[]]}},...S?[S]:[],{id:"progress",title:"Progress",data:{type:"job-progress",completions:r,succeeded:o,failed:c,active:d}},{id:"config",data:{type:"info-grid",items:[{label:"Parallelism",value:i,color:"text-cyan-400"},{label:"Backoff Limit",value:`${h}${c>0?` (${c} failures)`:""}`,color:c>=h?"text-red-400":c>0?"text-amber-400":void 0},...n.activeDeadlineSeconds?[{label:"Deadline",value:`${n.activeDeadlineSeconds}s`,color:"text-amber-400"}]:[],...n.ttlSecondsAfterFinished!==void 0?[{label:"TTL After Finished",value:`${n.ttlSecondsAfterFinished}s`}]:[],...n.completionMode?[{label:"Completion Mode",value:n.completionMode,color:"text-purple-400"}]:[]],columns:2}},...y?[{id:"timeline",title:"Timeline",data:{type:"timeline",startTime:y,completionTime:w}}]:[],...Lr(n.template?.spec?.containers,n.template?.spec?.initContainers)?[Lr(n.template?.spec?.containers,n.template?.spec?.initContainers)]:[],...xu(n.template?.spec?.containers,n.template?.spec?.initContainers)]}}};function IK(t,e){const s=(e??new Date).getTime()-t.getTime(),r=Math.floor(s/1e3),i=Math.floor(r/60),o=Math.floor(i/60),c=Math.floor(o/24);return c>0?`${c}d ${o%24}h`:o>0?`${o}h ${i%60}m`:i>0?`${i}m ${r%60}s`:`${r}s`}const PK={kinds:["ReplicaSet","ReplicaSets"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata;if(!n)return{sections:[]};const i=n.replicas??1,o=s?.replicas??0,c=s?.readyReplicas??0,d=s?.availableReplicas??0,h=r?.ownerReferences?.[0],g=r?.annotations?.["deployment.kubernetes.io/revision"],m=[...n.template?.spec?.containers??[],...n.template?.spec?.initContainers??[]],b=Sl(m);return{sections:[...h?[{id:"owner",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"text-xs text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(pu,{size:10})," Owned By"]}),f.jsxs("div",{className:"text-sm flex items-center gap-2",children:[f.jsxs("span",{className:"text-neutral-500",children:[h.kind,":"]}),f.jsx("span",{className:"text-cyan-400",children:h.name}),g&&f.jsxs("span",{className:"text-xs bg-neutral-700 px-1.5 py-0.5 rounded text-neutral-400",children:["rev ",g]})]})]})}}]:[],{id:"replicas",title:"Replica Status",data:{type:"gauges",items:[{label:"Ready",current:c,total:i,color:"emerald"},{label:"Current",current:o,total:i,color:"blue"},{label:"Available",current:d,total:i,color:"cyan"}],showPodGrid:{total:Math.max(i,o),ready:c,available:d,current:o,icon:"box"}}},...b?[b]:[],...n.selector?.matchLabels?[{id:"selector",data:{type:"labels",labels:n.selector.matchLabels,title:"Selector"}}]:[],...Lr(n.template?.spec?.containers,n.template?.spec?.initContainers)?[Lr(n.template?.spec?.containers,n.template?.spec?.initContainers)]:[],...xu(n.template?.spec?.containers,n.template?.spec?.initContainers)]}}},$K={kinds:["PersistentVolume","PersistentVolumes"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=s?.phase??"Unknown",i=n.capacity?.storage??"Unknown";return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Phase",value:r,status:zK(r)},{label:"Capacity",value:i,icon:f.jsx(ms,{size:14,className:"text-purple-400"})},{label:"Reclaim Policy",value:n.persistentVolumeReclaimPolicy??"Delete",status:n.persistentVolumeReclaimPolicy==="Retain"?"warning":"neutral"},{label:"Volume Mode",value:n.volumeMode??"Filesystem"}]}},...n.accessModes?.length?[{id:"access-modes",title:"Access Modes",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.accessModes.map((o,c)=>f.jsx("span",{className:`text-xs px-2 py-1 rounded ${DO(o)}`,children:LO(o)},c))})}}]:[],...n.storageClassName?[{id:"storage-class",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Storage Class"}),f.jsxs("div",{className:"text-sm text-purple-600 dark:text-purple-400 flex items-center gap-2",children:[f.jsx(fo,{size:14}),n.storageClassName]})]})}}]:[],...n.claimRef?[{id:"claim-ref",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(pu,{size:10})," Bound To"]}),f.jsxs("div",{className:"text-sm",children:[f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-500",children:[n.claimRef.namespace,"/"]}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:n.claimRef.name})]})]})}}]:[],{id:"source",title:"Volume Source",data:{type:"custom",render:()=>{const o=HK(n),c=o.find(h=>h.label==="Type")?.value||"Unknown",d=o.filter(h=>h.label!=="Type");return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3 space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:"Type:"}),f.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-purple-500/20 text-purple-700 dark:text-purple-400",children:c})]}),d.length>0&&f.jsx("div",{className:"space-y-1 pl-1",children:d.map((h,g)=>f.jsxs("div",{className:"text-xs",children:[f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-500",children:[h.label,":"]})," ",f.jsx("span",{className:h.color?`${h.color.replace("text-cyan-400","text-cyan-600 dark:text-cyan-400").replace("text-purple-400","text-purple-600 dark:text-purple-400")}`:"text-neutral-900 dark:text-neutral-300",children:h.value})]},g))})]})}}},...n.nodeAffinity?.required?.nodeSelectorTerms?[{id:"node-affinity",title:"Node Affinity",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.nodeAffinity.required.nodeSelectorTerms.map((o,c)=>f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-2",children:o.matchExpressions?.map((d,h)=>f.jsxs("div",{className:"text-xs",children:[f.jsx("span",{className:"text-purple-400",children:d.key}),f.jsx("span",{className:"text-neutral-500 mx-1",children:d.operator}),d.values&&f.jsx("span",{className:"text-cyan-400",children:d.values.join(", ")})]},h))},c))})}}]:[],...n.mountOptions?.length?[{id:"mount-options",title:"Mount Options",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-1",children:n.mountOptions.map((o,c)=>f.jsx("span",{className:"text-xs bg-neutral-200 dark:bg-neutral-800 px-2 py-1 rounded text-neutral-800 dark:text-neutral-300",children:o},c))})}}]:[]]}}};function zK(t){switch(t){case"Bound":return"success";case"Available":return"success";case"Released":return"warning";case"Failed":return"error";default:return"neutral"}}function HK(t){if(!t)return[];const e=[];return t.hostPath?(e.push({label:"Type",value:"HostPath"}),e.push({label:"Path",value:t.hostPath.path,color:"text-cyan-400"})):t.nfs?(e.push({label:"Type",value:"NFS"}),e.push({label:"Server",value:t.nfs.server,color:"text-cyan-400"}),e.push({label:"Path",value:t.nfs.path,color:"text-cyan-400"})):t.csi?(e.push({label:"Type",value:"CSI"}),e.push({label:"Driver",value:t.csi.driver,color:"text-purple-400"}),t.csi.volumeHandle&&e.push({label:"Handle",value:t.csi.volumeHandle,color:"text-cyan-400"})):t.local?(e.push({label:"Type",value:"Local"}),e.push({label:"Path",value:t.local.path,color:"text-cyan-400"})):t.awsElasticBlockStore?(e.push({label:"Type",value:"AWS EBS"}),e.push({label:"Volume ID",value:t.awsElasticBlockStore.volumeID,color:"text-cyan-400"})):t.gcePersistentDisk?(e.push({label:"Type",value:"GCE PD"}),e.push({label:"PD Name",value:t.gcePersistentDisk.pdName,color:"text-cyan-400"})):t.azureDisk?(e.push({label:"Type",value:"Azure Disk"}),e.push({label:"Disk Name",value:t.azureDisk.diskName,color:"text-cyan-400"})):e.push({label:"Type",value:"Unknown"}),e}const UK={kinds:["PersistentVolumeClaim","PersistentVolumeClaims"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=s?.phase??"Unknown",i=n.volumeName,o=n.resources?.requests?.storage,c=s?.capacity?.storage,d=[{id:"status",data:{type:"status-cards",items:[{label:"Phase",value:r,status:VK(r)},{label:"Requested",value:o??"Not specified",icon:f.jsx(ms,{size:14,className:"text-purple-400"})},...c?[{label:"Actual Capacity",value:c,status:"success"}]:[],{label:"Volume Mode",value:n.volumeMode??"Filesystem"}]}}];return n.accessModes?.length&&d.push({id:"access-modes",title:"Access Modes",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.accessModes.map((h,g)=>f.jsx("span",{className:`text-xs px-2 py-1 rounded ${DO(h)}`,children:LO(h)},g))})}}),n.storageClassName&&d.push({id:"storage-class",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Storage Class"}),f.jsxs("div",{className:"text-sm text-purple-600 dark:text-purple-400 flex items-center gap-2",children:[f.jsx(fo,{size:14}),n.storageClassName]})]})}}),i?d.push({id:"bound-volume",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(pu,{size:10})," Bound To"]}),f.jsxs("div",{className:"text-sm",children:[f.jsx("span",{className:"text-neutral-700 dark:text-neutral-400",children:"platform/"}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:i})]})]})}}):d.push({id:"no-volume",data:{type:"custom",render:()=>f.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3",children:f.jsxs("div",{className:"text-yellow-400 text-sm flex items-center gap-2",children:[f.jsx(kS,{size:14}),"Not bound to any volume"]})})}}),n.selector?.matchLabels&&Object.keys(n.selector.matchLabels).length>0&&d.push({id:"selector",title:"Volume Selector",data:{type:"labels",labels:n.selector.matchLabels}}),{sections:d}}};function VK(t){switch(t){case"Bound":return"success";case"Pending":return"warning";case"Lost":return"error";default:return"neutral"}}const FK="/apis/argoproj.io/v1alpha1";async function IO(t,e,n,s){const r=`/contexts/${t}${FK}/namespaces/${n}/applications/${e}`,i=await fetch(r,{method:"PATCH",headers:{"Content-Type":"application/merge-patch+json"},body:JSON.stringify(s)});if(!i.ok){const o=await i.text();throw new Error(`Failed to patch application: ${i.status} ${i.statusText} - ${o}`)}return i}async function wE(t,e,n="argocd",s={}){const i={operation:{sync:{syncStrategy:s.strategy==="apply"?{apply:{}}:{hook:{}},...s.revision&&{revision:s.revision},...s.prune!==void 0&&{prune:s.prune},...s.dryRun!==void 0&&{dryRun:s.dryRun}}}};await IO(t,e,n,i)}async function SE(t,e,n="argocd",s=!1){await IO(t,e,n,{metadata:{annotations:{"argocd.argoproj.io/refresh":s?"hard":"normal"}}})}function qK(t){switch(t){case"Synced":return"success";case"OutOfSync":return"warning";default:return"neutral"}}function KK(t){switch(t){case"Healthy":return"success";case"Progressing":return"warning";case"Degraded":case"Missing":return"error";case"Suspended":return"warning";default:return"neutral"}}function WK(t){switch(t){case"Synced":return f.jsx(Zr,{size:14,className:"text-emerald-400"});case"OutOfSync":return f.jsx(En,{size:14,className:"text-amber-400"});default:return f.jsx(fu,{size:14,className:"text-gray-400"})}}function GK(t){switch(t){case"Healthy":return f.jsx(Zr,{size:14,className:"text-emerald-400"});case"Progressing":return f.jsx(En,{size:14,className:"text-blue-400 animate-spin"});case"Degraded":return f.jsx(ca,{size:14,className:"text-red-400"});case"Missing":return f.jsx(fu,{size:14,className:"text-red-400"});case"Suspended":return f.jsx(Yd,{size:14,className:"text-amber-400"});default:return f.jsx(xf,{size:14,className:"text-gray-400"})}}function YK(t,e=12){switch(t){case"Healthy":return f.jsx(Zr,{size:e,className:"text-emerald-400 shrink-0"});case"Progressing":return f.jsx(En,{size:e,className:"text-blue-400 animate-spin shrink-0"});case"Degraded":return f.jsx(ca,{size:e,className:"text-red-400 shrink-0"});case"Missing":return f.jsx(fu,{size:e,className:"text-red-400 shrink-0"});case"Suspended":return f.jsx(Yd,{size:e,className:"text-amber-400 shrink-0"});default:return f.jsx(xf,{size:e,className:"text-gray-400 shrink-0"})}}function XK(t){const e={Synced:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",OutOfSync:"bg-amber-500/20 text-amber-400 border-amber-500/30",Unknown:"bg-gray-500/20 text-gray-400 border-gray-500/30"},n=e[t]||e.Unknown;return f.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${n}`,children:t||"Unknown"})}function Qv(t){if(!t)return"Unknown";const e=new Date(t),s=Math.floor((new Date().getTime()-e.getTime())/1e3);return s<60?`${s}s ago`:s<3600?`${Math.floor(s/60)}m ago`:s<86400?`${Math.floor(s/3600)}h ago`:`${Math.floor(s/86400)}d ago`}function JK(t){if(!t)return"Unknown";const e=t.match(/[:/]([^/:]+\/[^/:]+?)(?:\.git)?$/);return e?e[1]:t}const QK={kinds:["Application","Applications"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=n.source||n.sources?.[0],i=s?.sync?.status||"Unknown",o=s?.health?.status||"Unknown",c=s?.operationState?.phase,d={healthy:0,progressing:0,degraded:0,missing:0,suspended:0,unknown:0};s?.resources?.forEach(g=>{const m=g.health?.status;let b;m?b=m.toLowerCase():b=g.status==="Synced"?"healthy":"unknown",b in d&&d[b]++});const h=s?.resources?.length||0;return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Sync Status",value:i,status:qK(i),icon:WK(i)},{label:"Health",value:o,status:KK(o),icon:GK(o)},...c?[{label:"Operation",value:c,status:c==="Succeeded"?"success":c==="Failed"?"error":"warning",icon:c==="Running"?f.jsx(En,{size:14,className:"animate-spin"}):void 0}]:[]]}},...h>0?[{id:"resource-health",title:"Resource Health",data:{type:"gauges",items:[{label:"Healthy",current:d.healthy,total:h,color:"emerald"},{label:"Progressing",current:d.progressing,total:h,color:"blue"},{label:"Degraded",current:d.degraded+d.missing,total:h,color:"amber"}]}}]:[],...s?.resources?.length?[{id:"resources",title:"Managed Resources",data:{type:"custom",render:()=>{const g=new Map;s.resources.forEach(b=>{const y=b.kind||"Unknown";g.has(y)||g.set(y,[]),g.get(y).push(b)});const m=Array.from(g.keys()).sort((b,y)=>{const w=g.get(b),x=g.get(y),S=w.some(C=>C.health?.status!=="Healthy"),k=x.some(C=>C.health?.status!=="Healthy");return S&&!k?-1:!S&&k?1:b.localeCompare(y)});return f.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:m.map(b=>{const y=g.get(b),w=[...y].sort((x,S)=>{const k=x.health?.status==="Healthy",C=S.health?.status==="Healthy";return!k&&C?-1:k&&!C?1:(x.name||"").localeCompare(S.name||"")});return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-2",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[f.jsx($T,{size:12,className:"text-neutral-500"}),f.jsx("span",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-400",children:b}),f.jsxs("span",{className:"text-[10px] text-neutral-500 dark:text-neutral-600",children:["(",y.length,")"]})]}),f.jsx("div",{className:"space-y-1",children:w.map((x,S)=>f.jsxs("div",{className:"flex items-center gap-2 text-xs pl-4",children:[YK(x.health?.status),f.jsx("span",{className:"text-neutral-700 dark:text-neutral-300 truncate flex-1",title:x.name,children:x.name}),x.namespace&&f.jsx("span",{className:"text-neutral-500 dark:text-neutral-600 text-[10px]",children:x.namespace}),XK(x.status),x.requiresPruning&&f.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded border bg-red-500/20 text-red-400 border-red-500/30",children:"Prune"})]},`${x.namespace}-${x.name}-${S}`))})]},b)})})}}}]:[],{id:"source",title:"Source",data:{type:"info-grid",items:[{label:"Repository",value:JK(r?.repoURL),color:"text-cyan-400"},{label:"Path",value:r?.path||r?.chart||"/",color:"text-purple-400"},{label:"Target Revision",value:r?.targetRevision||"HEAD",color:"text-blue-400"},...s?.sync?.revision?[{label:"Current Revision",value:s.sync.revision.substring(0,7),color:"text-emerald-400"}]:[]],columns:2}},{id:"destination",title:"Destination",data:{type:"info-grid",items:[{label:"Server",value:n.destination?.name||n.destination?.server||"Unknown"},{label:"Namespace",value:n.destination?.namespace||"default",color:"text-cyan-400"},{label:"Project",value:n.project||"default",color:"text-purple-400"}],columns:2}},...n.syncPolicy?[{id:"sync-policy",title:"Sync Policy",data:{type:"info-grid",items:[...n.syncPolicy.automated?[{label:"Auto Sync",value:"Enabled",color:"text-emerald-400"},{label:"Prune",value:n.syncPolicy.automated.prune?"Yes":"No",color:n.syncPolicy.automated.prune?"text-amber-400":void 0},{label:"Self Heal",value:n.syncPolicy.automated.selfHeal?"Yes":"No",color:n.syncPolicy.automated.selfHeal?"text-emerald-400":void 0}]:[{label:"Auto Sync",value:"Disabled",color:"text-gray-400"}],...n.syncPolicy.retry?.limit?[{label:"Retry Limit",value:n.syncPolicy.retry.limit}]:[]],columns:2}}]:[],...n.syncPolicy?.syncOptions?.length?[{id:"sync-options",data:{type:"labels",labels:Object.fromEntries(n.syncPolicy.syncOptions.map(g=>{const[m,b]=g.split("=");return[m,b||"true"]})),title:"Sync Options"}}]:[],...s?.reconciledAt||s?.operationState?.finishedAt?[{id:"timing",data:{type:"info-grid",items:[...s?.reconciledAt?[{label:"Last Reconciled",value:Qv(s.reconciledAt)}]:[],...s?.operationState?.startedAt?[{label:"Operation Started",value:Qv(s.operationState.startedAt)}]:[],...s?.operationState?.finishedAt?[{label:"Operation Finished",value:Qv(s.operationState.finishedAt)}]:[]],columns:2}}]:[],...s?.health?.message?[{id:"health-message",title:"Health Message",data:{type:"info-grid",items:[{label:"Message",value:s.health.message}],columns:1}}]:[],...s?.operationState?.message?[{id:"operation-message",title:"Operation Message",data:{type:"info-grid",items:[{label:"Message",value:s.operationState.message}],columns:1}}]:[],...s?.summary?.images?.length?[{id:"images",title:"Images",data:{type:"container-images",containers:s.summary.images.map((g,m)=>({name:`image-${m+1}`,image:g}))}}]:[]]}},actions:[{id:"sync",label:"Sync",icon:f.jsx(Uc,{size:14}),variant:"primary",confirm:{title:"Sync Application",message:"This will sync the application to match the desired state in Git. Continue?",confirmLabel:"Sync"},execute:async(t,e)=>{const n=e.metadata?.name,s=e.metadata?.namespace||"argocd";if(!n)throw new Error("Application name is required");await wE(t,n,s)},isDisabled:t=>t.status?.operationState?.phase==="Running"?"Sync already in progress":!1},{id:"sync-prune",label:"Sync (Prune)",icon:f.jsx(N7,{size:14}),variant:"warning",confirm:{title:"Sync with Prune",message:"This will sync the application and DELETE resources that are no longer in Git. This action cannot be undone. Continue?",confirmLabel:"Sync & Prune"},execute:async(t,e)=>{const n=e.metadata?.name,s=e.metadata?.namespace||"argocd";if(!n)throw new Error("Application name is required");await wE(t,n,s,{prune:!0})},isDisabled:t=>t.status?.operationState?.phase==="Running"?"Sync already in progress":!1},{id:"refresh",label:"Refresh",icon:f.jsx(En,{size:14}),variant:"secondary",execute:async(t,e)=>{const n=e.metadata?.name,s=e.metadata?.namespace||"argocd";if(!n)throw new Error("Application name is required");await SE(t,n,s)}},{id:"hard-refresh",label:"Hard Refresh",icon:f.jsx(q7,{size:14}),variant:"secondary",execute:async(t,e)=>{const n=e.metadata?.name,s=e.metadata?.namespace||"argocd";if(!n)throw new Error("Application name is required");await SE(t,n,s,!0)}}]};function ZK(t){return!t||t.length===0?{status:"Unknown",level:"neutral"}:t.find(r=>r.type==="ErrorOccurred"&&r.status==="True")?{status:"Error",level:"error"}:t.find(r=>r.type==="ResourcesUpToDate")?.status==="True"?{status:"Healthy",level:"success"}:t.find(r=>r.type==="ParametersGenerated")?.status==="True"?{status:"Progressing",level:"warning"}:{status:"Unknown",level:"neutral"}}function eW(t){switch(t){case"success":return f.jsx(Zr,{size:14,className:"text-emerald-400"});case"warning":return f.jsx(En,{size:14,className:"text-amber-400"});case"error":return f.jsx(ca,{size:14,className:"text-red-400"});default:return f.jsx(xf,{size:14,className:"text-gray-400"})}}function tW(t){if(t.list){const e=t.list.elements?.length||0;return{name:"List",icon:f.jsx(iP,{size:12,className:"text-blue-400"}),details:`${e} element${e!==1?"s":""}`}}if(t.clusters)return{name:"Clusters",icon:f.jsx(Xr,{size:12,className:"text-purple-400"}),details:t.clusters.selector?.matchLabels?Object.entries(t.clusters.selector.matchLabels).map(([e,n])=>`${e}=${n}`).join(", "):"All clusters"};if(t.git){const e=t.git.directories&&t.git.directories.length>0,n=t.git.files&&t.git.files.length>0;return{name:n?"Git Files":"Git Directories",icon:f.jsx(w0,{size:12,className:"text-cyan-400"}),details:e?t.git.directories?.map(s=>s.path).join(", "):n?t.git.files?.map(s=>s.path).join(", "):t.git.revision||"HEAD"}}if(t.matrix){const e=t.matrix.generators?.length||0;return{name:"Matrix",icon:f.jsx(Dr,{size:12,className:"text-amber-400"}),details:`${e} generator${e!==1?"s":""}`}}if(t.merge){const e=t.merge.generators?.length||0;return{name:"Merge",icon:f.jsx(Dr,{size:12,className:"text-orange-400"}),details:`${e} generator${e!==1?"s":""}`}}return t.scmProvider?{name:`SCM Provider (${t.scmProvider.github?"GitHub":t.scmProvider.gitlab?"GitLab":t.scmProvider.bitbucket?"Bitbucket":t.scmProvider.bitbucketServer?"Bitbucket Server":t.scmProvider.gitea?"Gitea":t.scmProvider.azureDevOps?"Azure DevOps":"Unknown"})`,icon:f.jsx(b7,{size:12,className:"text-green-400"}),details:t.scmProvider.github?.organization||t.scmProvider.gitlab?.group||t.scmProvider.bitbucket?.owner||t.scmProvider.azureDevOps?.organization}:t.pullRequest?{name:`Pull Request (${t.pullRequest.github?"GitHub":t.pullRequest.gitlab?"GitLab":t.pullRequest.bitbucketServer?"Bitbucket Server":"Unknown"})`,icon:f.jsx(w0,{size:12,className:"text-pink-400"}),details:t.pullRequest.github?.repo||t.pullRequest.gitlab?.project||t.pullRequest.bitbucketServer?.repo}:t.clusterDecisionResource?{name:"Cluster Decision Resource",icon:f.jsx($7,{size:12,className:"text-indigo-400"}),details:t.clusterDecisionResource.configMapRef}:{name:"Unknown",icon:f.jsx(xf,{size:12,className:"text-gray-400"})}}function nW(t){if(!t)return"Unknown";const e=t.match(/[:/]([^/:]+\/[^/:]+?)(?:\.git)?$/);return e?e[1]:t}function sW(t){if(!t)return"Unknown";const e=new Date(t),s=Math.floor((new Date().getTime()-e.getTime())/1e3);return s<60?`${s}s ago`:s<3600?`${Math.floor(s/60)}m ago`:s<86400?`${Math.floor(s/3600)}h ago`:`${Math.floor(s/86400)}d ago`}const rW={kinds:["ApplicationSet","ApplicationSets"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata;if(!n)return{sections:[]};const i=n.template,o=i?.spec?.source||i?.spec?.sources?.[0],c=ZK(s?.conditions),d=s?.applicationStatus?.length||0;return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Status",value:c.status,status:c.level,icon:eW(c.level)},{label:"Applications",value:d,status:d>0?"success":"neutral",icon:f.jsx($T,{size:14,className:d>0?"text-emerald-400":"text-gray-400"})},{label:"Generators",value:n.generators?.length||0,status:"neutral",icon:f.jsx(Dr,{size:14,className:"text-blue-400"})}]}},...n.generators?.length?[{id:"generators",title:"Generators",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.generators.map((h,g)=>{const m=tW(h);return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-2.5 flex items-center gap-3",children:[f.jsx("div",{className:"p-1.5 bg-neutral-200 dark:bg-neutral-700/50 rounded",children:m.icon}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"text-xs font-medium text-neutral-900 dark:text-neutral-200",children:m.name}),m.details&&f.jsx("div",{className:"text-[10px] text-neutral-500 truncate",title:m.details,children:m.details})]})]},g)})})}}]:[],...s?.applicationStatus?.length?[{id:"applications",title:"Generated Applications",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-1 max-h-60 overflow-y-auto",children:s.applicationStatus.map((h,g)=>{const m=h.status==="Successful"||h.status==="Healthy"?"success":h.status==="Waiting"||h.status==="Progressing"?"warning":h.status==="Error"||h.status==="Failed"?"error":"neutral";return f.jsxs("div",{className:"flex items-center gap-2 text-xs bg-neutral-100 dark:bg-neutral-800/30 rounded px-2 py-1.5",children:[m==="success"&&f.jsx(Zr,{size:12,className:"text-emerald-400 shrink-0"}),m==="warning"&&f.jsx(En,{size:12,className:"text-amber-400 shrink-0"}),m==="error"&&f.jsx(ca,{size:12,className:"text-red-400 shrink-0"}),m==="neutral"&&f.jsx(xf,{size:12,className:"text-gray-400 shrink-0"}),f.jsx("span",{className:"text-neutral-700 dark:text-neutral-300 truncate flex-1",title:h.application,children:h.application||"Unknown"}),h.status&&f.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${m==="success"?"bg-emerald-500/20 text-emerald-400 border-emerald-500/30":m==="warning"?"bg-amber-500/20 text-amber-400 border-amber-500/30":m==="error"?"bg-red-500/20 text-red-400 border-red-500/30":"bg-gray-500/20 text-gray-400 border-gray-500/30"}`,children:h.status})]},h.application||g)})})}}]:[],...o?[{id:"template-source",title:"Template Source",data:{type:"info-grid",items:[{label:"Repository",value:nW(o.repoURL),color:"text-cyan-400"},{label:"Path",value:o.path||o.chart||"/",color:"text-purple-400"},{label:"Revision",value:o.targetRevision||"HEAD",color:"text-blue-400"}],columns:2}}]:[],...i?.spec?.destination?[{id:"template-destination",title:"Template Destination",data:{type:"info-grid",items:[{label:"Server",value:i.spec.destination.name||i.spec.destination.server||"{{server}}"},{label:"Namespace",value:i.spec.destination.namespace||"{{namespace}}",color:"text-cyan-400"},{label:"Project",value:i.spec.project||"default",color:"text-purple-400"}],columns:2}}]:[],...n.syncPolicy?[{id:"sync-policy",title:"Sync Policy",data:{type:"info-grid",items:[{label:"Preserve Resources on Deletion",value:n.syncPolicy.preserveResourcesOnDeletion?"Yes":"No",color:n.syncPolicy.preserveResourcesOnDeletion?"text-amber-400":void 0},...n.syncPolicy.applicationsSync?[{label:"Applications Sync",value:n.syncPolicy.applicationsSync,color:"text-blue-400"}]:[]],columns:2}}]:[],...n.strategy?[{id:"strategy",title:"Rollout Strategy",data:{type:"info-grid",items:[{label:"Type",value:n.strategy.type||"AllAtOnce",color:n.strategy.type==="RollingSync"?"text-cyan-400":void 0},...n.strategy.rollingSync?.steps?.length?[{label:"Steps",value:n.strategy.rollingSync.steps.length}]:[]],columns:2}}]:[],...n.goTemplate!==void 0?[{id:"template-options",title:"Template Options",data:{type:"info-grid",items:[{label:"Go Template",value:n.goTemplate?"Enabled":"Disabled",color:n.goTemplate?"text-emerald-400":"text-gray-400"},...n.goTemplateOptions?.length?[{label:"Options",value:n.goTemplateOptions.join(", ")}]:[]],columns:2}}]:[],...r?.creationTimestamp?[{id:"timing",data:{type:"info-grid",items:[{label:"Created",value:sW(r.creationTimestamp)}],columns:1}}]:[]]}}};function iW(t){const e=t?.find(n=>n.type==="Ready");return e?{ready:e.status==="True",reason:e.reason,message:e.message}:{ready:!1}}function aW(t,e){return t?"success":e==="Issuing"||e==="Pending"?"warning":"error"}function oW(t,e){return t?f.jsx(Zr,{size:14,className:"text-emerald-400"}):e==="Issuing"||e==="Pending"?f.jsx(En,{size:14,className:"text-amber-400 animate-spin"}):f.jsx(ca,{size:14,className:"text-red-400"})}function lW(t){if(!t)return"Default (90d)";const e=t.match(/^(\d+)h$/);if(e){const n=parseInt(e[1],10);return n>=8760?`${Math.round(n/8760)}y`:n>=720?`${Math.round(n/720)}mo`:n>=24?`${Math.round(n/24)}d`:`${n}h`}return t}function Am(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function cW(t){if(!t)return{text:"Unknown",status:"neutral"};const e=new Date,s=new Date(t).getTime()-e.getTime(),r=Math.floor(s/(1e3*60*60*24));return s<0?{text:"Expired",status:"error"}:r<7?{text:`${r}d remaining`,status:"error"}:r<30?{text:`${r}d remaining`,status:"warning"}:r>365?{text:`${Math.floor(r/365)}y remaining`,status:"success"}:r>30?{text:`${Math.floor(r/30)}mo remaining`,status:"success"}:{text:`${r}d remaining`,status:"success"}}function uW(t){if(!t)return"RSA 2048";const e=t.algorithm??"RSA",n=t.size??(e==="ECDSA"?256:2048);return`${e} ${n}`}const hW={kinds:["Certificate","Certificates"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const{ready:r,reason:i}=iW(s?.conditions),o=cW(s?.notAfter),c=[{id:"status",data:{type:"status-cards",items:[{label:"Status",value:r?"Ready":i??"Not Ready",status:aW(r,i),icon:oW(r,i)},{label:"Expires",value:o.text,status:o.status,icon:f.jsx(ua,{size:14,className:o.status==="error"?"text-red-400":o.status==="warning"?"text-amber-400":"text-emerald-400"})},{label:"Type",value:n.isCA?"CA Certificate":"TLS Certificate",status:"neutral",icon:f.jsx(mu,{size:14,className:n.isCA?"text-purple-400":"text-blue-400"})},{label:"Revision",value:s?.revision??1,status:"neutral"}]}}];if(c.push({id:"details",title:"Certificate Details",data:{type:"info-grid",columns:2,items:[{label:"Secret Name",value:n.secretName},...n.commonName?[{label:"Common Name",value:n.commonName}]:[],{label:"Duration",value:lW(n.duration)},{label:"Algorithm",value:uW(n.privateKey)},...s?.notBefore?[{label:"Valid From",value:Am(s.notBefore)}]:[],...s?.notAfter?[{label:"Valid Until",value:Am(s.notAfter)}]:[],...s?.renewalTime?[{label:"Renewal Time",value:Am(s.renewalTime)}]:[]]}}),c.push({id:"issuer",title:"Issuer",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(wf,{size:14,className:"text-purple-400"}),f.jsx("span",{className:"text-sm font-medium text-purple-300",children:n.issuerRef.kind??"Issuer"})]}),f.jsx("div",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:n.issuerRef.name}),n.issuerRef.group&&f.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:n.issuerRef.group})]})}}),n.dnsNames?.length&&c.push({id:"dns-names",title:"DNS Names",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.dnsNames.map((d,h)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-blue-500/20 text-blue-300 border border-blue-500/30",children:d},h))})}}),n.ipAddresses?.length&&c.push({id:"ip-addresses",title:"IP Addresses",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.ipAddresses.map((d,h)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-cyan-500/20 text-cyan-300 border border-cyan-500/30",children:d},h))})}}),n.uris?.length&&c.push({id:"uris",title:"URIs",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-1",children:n.uris.map((d,h)=>f.jsx("div",{className:"text-xs text-neutral-700 dark:text-neutral-300 font-mono",children:d},h))})}}),n.emailAddresses?.length&&c.push({id:"email-addresses",title:"Email Addresses",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.emailAddresses.map((d,h)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-amber-500/20 text-amber-300 border border-amber-500/30",children:d},h))})}}),n.usages?.length&&c.push({id:"usages",title:"Key Usages",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.usages.map((d,h)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-neutral-200 dark:bg-neutral-700 text-neutral-700 dark:text-neutral-300",children:d},h))})}}),n.privateKey&&c.push({id:"private-key",title:"Private Key",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(Sf,{size:14,className:"text-neutral-400"}),f.jsx("span",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Configuration"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-500",children:"Algorithm:"}),f.jsx("span",{className:"ml-1 text-neutral-700 dark:text-neutral-300",children:n.privateKey.algorithm??"RSA"})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-500",children:"Size:"}),f.jsx("span",{className:"ml-1 text-neutral-700 dark:text-neutral-300",children:n.privateKey.size??2048})]}),n.privateKey.encoding&&f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-500",children:"Encoding:"}),f.jsx("span",{className:"ml-1 text-neutral-700 dark:text-neutral-300",children:n.privateKey.encoding})]}),n.privateKey.rotationPolicy&&f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-500",children:"Rotation:"}),f.jsx("span",{className:"ml-1 text-neutral-700 dark:text-neutral-300",children:n.privateKey.rotationPolicy})]})]})]})}}),n.subject&&Object.keys(n.subject).some(d=>{const h=n.subject[d];return Array.isArray(h)?h.length>0:!!h})){const d=[];n.subject.organizations?.length&&d.push(`O=${n.subject.organizations.join(", ")}`),n.subject.organizationalUnits?.length&&d.push(`OU=${n.subject.organizationalUnits.join(", ")}`),n.subject.countries?.length&&d.push(`C=${n.subject.countries.join(", ")}`),n.subject.localities?.length&&d.push(`L=${n.subject.localities.join(", ")}`),n.subject.provinces?.length&&d.push(`ST=${n.subject.provinces.join(", ")}`),c.push({id:"subject",title:"Subject",data:{type:"custom",render:()=>f.jsx("div",{className:"text-xs text-neutral-700 dark:text-neutral-300 font-mono bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:d.join(", ")})}})}if(n.keystores){const d=[];n.keystores.jks?.create&&d.push("JKS"),n.keystores.pkcs12?.create&&d.push("PKCS#12"),d.length>0&&c.push({id:"keystores",title:"Keystores",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:d.map((h,g)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-green-500/20 text-green-300 border border-green-500/30",children:h},g))})}})}return s?.failedIssuanceAttempts&&s.failedIssuanceAttempts>0&&c.push({id:"failed-issuance",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 text-red-400",children:[f.jsx(fu,{size:14}),f.jsxs("span",{className:"text-sm font-medium",children:["Failed Issuance Attempts: ",s.failedIssuanceAttempts]})]}),s.lastFailureTime&&f.jsxs("div",{className:"text-xs text-neutral-500 mt-1",children:["Last failure: ",Am(s.lastFailureTime)]})]})}}),{sections:c}}};var kE={};var CE;function dW(){if(CE)return kE;CE=1;var t;return(function(e){(function(n){var s=typeof globalThis=="object"?globalThis:typeof MA=="object"?MA:typeof self=="object"?self:typeof this=="object"?this:d(),r=i(e);typeof s.Reflect<"u"&&(r=i(s.Reflect,r)),n(r,s),typeof s.Reflect>"u"&&(s.Reflect=e);function i(h,g){return function(m,b){Object.defineProperty(h,m,{configurable:!0,writable:!0,value:b}),g&&g(m,b)}}function o(){try{return Function("return this;")()}catch{}}function c(){try{return(0,eval)("(function() { return this; })()")}catch{}}function d(){return o()||c()}})(function(n,s){var r=Object.prototype.hasOwnProperty,i=typeof Symbol=="function",o=i&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",c=i&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",d=typeof Object.create=="function",h={__proto__:[]}instanceof Array,g=!d&&!h,m={create:d?function(){return en(Object.create(null))}:h?function(){return en({__proto__:null})}:function(){return en({})},has:g?function(se,ie){return r.call(se,ie)}:function(se,ie){return ie in se},get:g?function(se,ie){return r.call(se,ie)?se[ie]:void 0}:function(se,ie){return se[ie]}},b=Object.getPrototypeOf(Function),y=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:qe(),w=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Ze(),x=typeof WeakMap=="function"?WeakMap:ct(),S=i?Symbol.for("@reflect-metadata:registry"):void 0,k=_t(),C=cn(k);function N(se,ie,he,Se){if(j(he)){if(!Je(se))throw new TypeError;if(!bt(ie))throw new TypeError;return q(se,ie)}else{if(!Je(se))throw new TypeError;if(!te(ie))throw new TypeError;if(!te(Se)&&!j(Se)&&!Z(Se))throw new TypeError;return Z(Se)&&(Se=void 0),he=Ee(he),X(se,ie,he,Se)}}n("decorate",N);function R(se,ie){function he(Se,me){if(!te(Se))throw new TypeError;if(!j(me)&&!qt(me))throw new TypeError;P(se,ie,Se,me)}return he}n("metadata",R);function B(se,ie,he,Se){if(!te(he))throw new TypeError;return j(Se)||(Se=Ee(Se)),P(se,ie,he,Se)}n("defineMetadata",B);function E(se,ie,he){if(!te(ie))throw new TypeError;return j(he)||(he=Ee(he)),I(se,ie,he)}n("hasMetadata",E);function z(se,ie,he){if(!te(ie))throw new TypeError;return j(he)||(he=Ee(he)),L(se,ie,he)}n("hasOwnMetadata",z);function U(se,ie,he){if(!te(ie))throw new TypeError;return j(he)||(he=Ee(he)),J(se,ie,he)}n("getMetadata",U);function Y(se,ie,he){if(!te(ie))throw new TypeError;return j(he)||(he=Ee(he)),G(se,ie,he)}n("getOwnMetadata",Y);function D(se,ie){if(!te(se))throw new TypeError;return j(ie)||(ie=Ee(ie)),T(se,ie)}n("getMetadataKeys",D);function W(se,ie){if(!te(se))throw new TypeError;return j(ie)||(ie=Ee(ie)),O(se,ie)}n("getOwnMetadataKeys",W);function V(se,ie,he){if(!te(ie))throw new TypeError;if(j(he)||(he=Ee(he)),!te(ie))throw new TypeError;j(he)||(he=Ee(he));var Se=we(ie,he,!1);return j(Se)?!1:Se.OrdinaryDeleteMetadata(se,ie,he)}n("deleteMetadata",V);function q(se,ie){for(var he=se.length-1;he>=0;--he){var Se=se[he],me=Se(ie);if(!j(me)&&!Z(me)){if(!bt(me))throw new TypeError;ie=me}}return ie}function X(se,ie,he,Se){for(var me=se.length-1;me>=0;--me){var Pe=se[me],st=Pe(ie,he,Se);if(!j(st)&&!Z(st)){if(!te(st))throw new TypeError;Se=st}}return Se}function I(se,ie,he){var Se=L(se,ie,he);if(Se)return!0;var me=rt(ie);return Z(me)?!1:I(se,me,he)}function L(se,ie,he){var Se=we(ie,he,!1);return j(Se)?!1:Ce(Se.OrdinaryHasOwnMetadata(se,ie,he))}function J(se,ie,he){var Se=L(se,ie,he);if(Se)return G(se,ie,he);var me=rt(ie);if(!Z(me))return J(se,me,he)}function G(se,ie,he){var Se=we(ie,he,!1);if(!j(Se))return Se.OrdinaryGetOwnMetadata(se,ie,he)}function P(se,ie,he,Se){var me=we(he,Se,!0);me.OrdinaryDefineOwnMetadata(se,ie,he,Se)}function T(se,ie){var he=O(se,ie),Se=rt(se);if(Se===null)return he;var me=T(Se,ie);if(me.length<=0)return he;if(he.length<=0)return me;for(var Pe=new w,st=[],it=0,Re=he;it<Re.length;it++){var De=Re[it],$e=Pe.has(De);$e||(Pe.add(De),st.push(De))}for(var ze=0,pt=me;ze<pt.length;ze++){var De=pt[ze],$e=Pe.has(De);$e||(Pe.add(De),st.push(De))}return st}function O(se,ie){var he=we(se,ie,!1);return he?he.OrdinaryOwnMetadataKeys(se,ie):[]}function K(se){if(se===null)return 1;switch(typeof se){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return se===null?1:6;default:return 6}}function j(se){return se===void 0}function Z(se){return se===null}function le(se){return typeof se=="symbol"}function te(se){return typeof se=="object"?se!==null:typeof se=="function"}function pe(se,ie){switch(K(se)){case 0:return se;case 1:return se;case 2:return se;case 3:return se;case 4:return se;case 5:return se}var he="string",Se=Pt(se,o);if(Se!==void 0){var me=Se.call(se,he);if(te(me))throw new TypeError;return me}return _e(se)}function _e(se,ie){var he,Se,me;{var Pe=se.toString;if(Ue(Pe)){var Se=Pe.call(se);if(!te(Se))return Se}var he=se.valueOf;if(Ue(he)){var Se=he.call(se);if(!te(Se))return Se}}throw new TypeError}function Ce(se){return!!se}function tt(se){return""+se}function Ee(se){var ie=pe(se);return le(ie)?ie:tt(ie)}function Je(se){return Array.isArray?Array.isArray(se):se instanceof Object?se instanceof Array:Object.prototype.toString.call(se)==="[object Array]"}function Ue(se){return typeof se=="function"}function bt(se){return typeof se=="function"}function qt(se){switch(K(se)){case 3:return!0;case 4:return!0;default:return!1}}function It(se,ie){return se===ie||se!==se&&ie!==ie}function Pt(se,ie){var he=se[ie];if(he!=null){if(!Ue(he))throw new TypeError;return he}}function Wn(se){var ie=Pt(se,c);if(!Ue(ie))throw new TypeError;var he=ie.call(se);if(!te(he))throw new TypeError;return he}function ls(se){return se.value}function ys(se){var ie=se.next();return ie.done?!1:ie}function Qe(se){var ie=se.return;ie&&ie.call(se)}function rt(se){var ie=Object.getPrototypeOf(se);if(typeof se!="function"||se===b||ie!==b)return ie;var he=se.prototype,Se=he&&Object.getPrototypeOf(he);if(Se==null||Se===Object.prototype)return ie;var me=Se.constructor;return typeof me!="function"||me===se?ie:me}function Mt(){var se;!j(S)&&typeof s.Reflect<"u"&&!(S in s.Reflect)&&typeof s.Reflect.defineMetadata=="function"&&(se=fe(s.Reflect));var ie,he,Se,me=new x,Pe={registerProvider:st,getProvider:Re,setProvider:$e};return Pe;function st(ze){if(!Object.isExtensible(Pe))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case se===ze:break;case j(ie):ie=ze;break;case ie===ze:break;case j(he):he=ze;break;case he===ze:break;default:Se===void 0&&(Se=new w),Se.add(ze);break}}function it(ze,pt){if(!j(ie)){if(ie.isProviderFor(ze,pt))return ie;if(!j(he)){if(he.isProviderFor(ze,pt))return ie;if(!j(Se))for(var Bt=Wn(Se);;){var rn=ys(Bt);if(!rn)return;var Ts=ls(rn);if(Ts.isProviderFor(ze,pt))return Qe(Bt),Ts}}}if(!j(se)&&se.isProviderFor(ze,pt))return se}function Re(ze,pt){var Bt=me.get(ze),rn;return j(Bt)||(rn=Bt.get(pt)),j(rn)&&(rn=it(ze,pt),j(rn)||(j(Bt)&&(Bt=new y,me.set(ze,Bt)),Bt.set(pt,rn))),rn}function De(ze){if(j(ze))throw new TypeError;return ie===ze||he===ze||!j(Se)&&Se.has(ze)}function $e(ze,pt,Bt){if(!De(Bt))throw new Error("Metadata provider not registered.");var rn=Re(ze,pt);if(rn!==Bt){if(!j(rn))return!1;var Ts=me.get(ze);j(Ts)&&(Ts=new y,me.set(ze,Ts)),Ts.set(pt,Bt)}return!0}}function _t(){var se;return!j(S)&&te(s.Reflect)&&Object.isExtensible(s.Reflect)&&(se=s.Reflect[S]),j(se)&&(se=Mt()),!j(S)&&te(s.Reflect)&&Object.isExtensible(s.Reflect)&&Object.defineProperty(s.Reflect,S,{enumerable:!1,configurable:!1,writable:!1,value:se}),se}function cn(se){var ie=new x,he={isProviderFor:function(De,$e){var ze=ie.get(De);return j(ze)?!1:ze.has($e)},OrdinaryDefineOwnMetadata:st,OrdinaryHasOwnMetadata:me,OrdinaryGetOwnMetadata:Pe,OrdinaryOwnMetadataKeys:it,OrdinaryDeleteMetadata:Re};return k.registerProvider(he),he;function Se(De,$e,ze){var pt=ie.get(De),Bt=!1;if(j(pt)){if(!ze)return;pt=new y,ie.set(De,pt),Bt=!0}var rn=pt.get($e);if(j(rn)){if(!ze)return;if(rn=new y,pt.set($e,rn),!se.setProvider(De,$e,he))throw pt.delete($e),Bt&&ie.delete(De),new Error("Wrong provider for target.")}return rn}function me(De,$e,ze){var pt=Se($e,ze,!1);return j(pt)?!1:Ce(pt.has(De))}function Pe(De,$e,ze){var pt=Se($e,ze,!1);if(!j(pt))return pt.get(De)}function st(De,$e,ze,pt){var Bt=Se(ze,pt,!0);Bt.set(De,$e)}function it(De,$e){var ze=[],pt=Se(De,$e,!1);if(j(pt))return ze;for(var Bt=pt.keys(),rn=Wn(Bt),Ts=0;;){var Tl=ys(rn);if(!Tl)return ze.length=Ts,ze;var yo=ls(Tl);try{ze[Ts]=yo}catch(s1){try{Qe(rn)}finally{throw s1}}Ts++}}function Re(De,$e,ze){var pt=Se($e,ze,!1);if(j(pt)||!pt.delete(De))return!1;if(pt.size===0){var Bt=ie.get($e);j(Bt)||(Bt.delete(ze),Bt.size===0&&ie.delete(Bt))}return!0}}function fe(se){var ie=se.defineMetadata,he=se.hasOwnMetadata,Se=se.getOwnMetadata,me=se.getOwnMetadataKeys,Pe=se.deleteMetadata,st=new x,it={isProviderFor:function(Re,De){var $e=st.get(Re);return!j($e)&&$e.has(De)?!0:me(Re,De).length?(j($e)&&($e=new w,st.set(Re,$e)),$e.add(De),!0):!1},OrdinaryDefineOwnMetadata:ie,OrdinaryHasOwnMetadata:he,OrdinaryGetOwnMetadata:Se,OrdinaryOwnMetadataKeys:me,OrdinaryDeleteMetadata:Pe};return it}function we(se,ie,he){var Se=k.getProvider(se,ie);if(!j(Se))return Se;if(he){if(k.setProvider(se,ie,C))return C;throw new Error("Illegal state.")}}function qe(){var se={},ie=[],he=(function(){function it(Re,De,$e){this._index=0,this._keys=Re,this._values=De,this._selector=$e}return it.prototype["@@iterator"]=function(){return this},it.prototype[c]=function(){return this},it.prototype.next=function(){var Re=this._index;if(Re>=0&&Re<this._keys.length){var De=this._selector(this._keys[Re],this._values[Re]);return Re+1>=this._keys.length?(this._index=-1,this._keys=ie,this._values=ie):this._index++,{value:De,done:!1}}return{value:void 0,done:!0}},it.prototype.throw=function(Re){throw this._index>=0&&(this._index=-1,this._keys=ie,this._values=ie),Re},it.prototype.return=function(Re){return this._index>=0&&(this._index=-1,this._keys=ie,this._values=ie),{value:Re,done:!0}},it})(),Se=(function(){function it(){this._keys=[],this._values=[],this._cacheKey=se,this._cacheIndex=-2}return Object.defineProperty(it.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),it.prototype.has=function(Re){return this._find(Re,!1)>=0},it.prototype.get=function(Re){var De=this._find(Re,!1);return De>=0?this._values[De]:void 0},it.prototype.set=function(Re,De){var $e=this._find(Re,!0);return this._values[$e]=De,this},it.prototype.delete=function(Re){var De=this._find(Re,!1);if(De>=0){for(var $e=this._keys.length,ze=De+1;ze<$e;ze++)this._keys[ze-1]=this._keys[ze],this._values[ze-1]=this._values[ze];return this._keys.length--,this._values.length--,It(Re,this._cacheKey)&&(this._cacheKey=se,this._cacheIndex=-2),!0}return!1},it.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=se,this._cacheIndex=-2},it.prototype.keys=function(){return new he(this._keys,this._values,me)},it.prototype.values=function(){return new he(this._keys,this._values,Pe)},it.prototype.entries=function(){return new he(this._keys,this._values,st)},it.prototype["@@iterator"]=function(){return this.entries()},it.prototype[c]=function(){return this.entries()},it.prototype._find=function(Re,De){if(!It(this._cacheKey,Re)){this._cacheIndex=-1;for(var $e=0;$e<this._keys.length;$e++)if(It(this._keys[$e],Re)){this._cacheIndex=$e;break}}return this._cacheIndex<0&&De&&(this._cacheIndex=this._keys.length,this._keys.push(Re),this._values.push(void 0)),this._cacheIndex},it})();return Se;function me(it,Re){return it}function Pe(it,Re){return Re}function st(it,Re){return[it,Re]}}function Ze(){var se=(function(){function ie(){this._map=new y}return Object.defineProperty(ie.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),ie.prototype.has=function(he){return this._map.has(he)},ie.prototype.add=function(he){return this._map.set(he,he),this},ie.prototype.delete=function(he){return this._map.delete(he)},ie.prototype.clear=function(){this._map.clear()},ie.prototype.keys=function(){return this._map.keys()},ie.prototype.values=function(){return this._map.keys()},ie.prototype.entries=function(){return this._map.entries()},ie.prototype["@@iterator"]=function(){return this.keys()},ie.prototype[c]=function(){return this.keys()},ie})();return se}function ct(){var se=16,ie=m.create(),he=Se();return(function(){function Re(){this._key=Se()}return Re.prototype.has=function(De){var $e=me(De,!1);return $e!==void 0?m.has($e,this._key):!1},Re.prototype.get=function(De){var $e=me(De,!1);return $e!==void 0?m.get($e,this._key):void 0},Re.prototype.set=function(De,$e){var ze=me(De,!0);return ze[this._key]=$e,this},Re.prototype.delete=function(De){var $e=me(De,!1);return $e!==void 0?delete $e[this._key]:!1},Re.prototype.clear=function(){this._key=Se()},Re})();function Se(){var Re;do Re="@@WeakMap@@"+it();while(m.has(ie,Re));return ie[Re]=!0,Re}function me(Re,De){if(!r.call(Re,he)){if(!De)return;Object.defineProperty(Re,he,{value:m.create()})}return Re[he]}function Pe(Re,De){for(var $e=0;$e<De;++$e)Re[$e]=Math.random()*255|0;return Re}function st(Re){if(typeof Uint8Array=="function"){var De=new Uint8Array(Re);return typeof crypto<"u"?crypto.getRandomValues(De):typeof msCrypto<"u"?msCrypto.getRandomValues(De):Pe(De,Re),De}return Pe(new Array(Re),Re)}function it(){var Re=st(se);Re[6]=Re[6]&79|64,Re[8]=Re[8]&191|128;for(var De="",$e=0;$e<se;++$e){var ze=Re[$e];($e===4||$e===6||$e===8)&&(De+="-"),ze<16&&(De+="0"),De+=ze.toString(16).toLowerCase()}return De}}function en(se){return se.__=void 0,delete se.__,se}})})(t||(t={})),kE}dW();const fW="[object ArrayBuffer]";class Oe{static isArrayBuffer(e){return Object.prototype.toString.call(e)===fW}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:e.byteLength===e.buffer.byteLength||e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,n){if(e.constructor===n)return e;if(this.isArrayBuffer(e))return new n(e);if(this.isArrayBufferView(e))return new n(e.buffer,e.byteOffset,e.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,n){const s=Oe.toUint8Array(e),r=Oe.toUint8Array(n);if(s.length!==r.byteLength)return!1;for(let i=0;i<s.length;i++)if(s[i]!==r[i])return!1;return!0}static concat(...e){let n;Array.isArray(e[0])&&!(e[1]instanceof Function)||Array.isArray(e[0])&&e[1]instanceof Function?n=e[0]:e[e.length-1]instanceof Function?n=e.slice(0,e.length-1):n=e;let s=0;for(const o of n)s+=o.byteLength;const r=new Uint8Array(s);let i=0;for(const o of n){const c=this.toUint8Array(o);r.set(c,i),i+=c.length}return e[e.length-1]instanceof Function?this.toView(r,e[e.length-1]):r.buffer}}const Zv="string",pW=/^[0-9a-f\s]+$/i,mW=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,gW=/^[a-zA-Z0-9-_]+$/;class NE{static fromString(e){const n=unescape(encodeURIComponent(e)),s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s.buffer}static toString(e){const n=Oe.toUint8Array(e);let s="";for(let i=0;i<n.length;i++)s+=String.fromCharCode(n[i]);return decodeURIComponent(escape(s))}}class li{static toString(e,n=!1){const s=Oe.toArrayBuffer(e),r=new DataView(s);let i="";for(let o=0;o<s.byteLength;o+=2){const c=r.getUint16(o,n);i+=String.fromCharCode(c)}return i}static fromString(e,n=!1){const s=new ArrayBuffer(e.length*2),r=new DataView(s);for(let i=0;i<e.length;i++)r.setUint16(i*2,e.charCodeAt(i),n);return s}}class Ke{static isHex(e){return typeof e===Zv&&pW.test(e)}static isBase64(e){return typeof e===Zv&&mW.test(e)}static isBase64Url(e){return typeof e===Zv&&gW.test(e)}static ToString(e,n="utf8"){const s=Oe.toUint8Array(e);switch(n.toLowerCase()){case"utf8":return this.ToUtf8String(s);case"binary":return this.ToBinary(s);case"hex":return this.ToHex(s);case"base64":return this.ToBase64(s);case"base64url":return this.ToBase64Url(s);case"utf16le":return li.toString(s,!0);case"utf16":case"utf16be":return li.toString(s);default:throw new Error(`Unknown type of encoding '${n}'`)}}static FromString(e,n="utf8"){if(!e)return new ArrayBuffer(0);switch(n.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return li.fromString(e,!0);case"utf16":case"utf16be":return li.fromString(e);default:throw new Error(`Unknown type of encoding '${n}'`)}}static ToBase64(e){const n=Oe.toUint8Array(e);if(typeof btoa<"u"){const s=this.ToString(n,"binary");return btoa(s)}else return Buffer.from(n).toString("base64")}static FromBase64(e){const n=this.formatString(e);if(!n)return new ArrayBuffer(0);if(!Ke.isBase64(n))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return typeof atob<"u"?this.FromBinary(atob(n)):new Uint8Array(Buffer.from(n,"base64")).buffer}static FromBase64Url(e){const n=this.formatString(e);if(!n)return new ArrayBuffer(0);if(!Ke.isBase64Url(n))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(n.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,n=Ke.DEFAULT_UTF8_ENCODING){switch(n){case"ascii":return this.FromBinary(e);case"utf8":return NE.fromString(e);case"utf16":case"utf16be":return li.fromString(e);case"utf16le":case"usc2":return li.fromString(e,!0);default:throw new Error(`Unknown type of encoding '${n}'`)}}static ToUtf8String(e,n=Ke.DEFAULT_UTF8_ENCODING){switch(n){case"ascii":return this.ToBinary(e);case"utf8":return NE.toString(e);case"utf16":case"utf16be":return li.toString(e);case"utf16le":case"usc2":return li.toString(e,!0);default:throw new Error(`Unknown type of encoding '${n}'`)}}static FromBinary(e){const n=e.length,s=new Uint8Array(n);for(let r=0;r<n;r++)s[r]=e.charCodeAt(r);return s.buffer}static ToBinary(e){const n=Oe.toUint8Array(e);let s="";for(let r=0;r<n.length;r++)s+=String.fromCharCode(n[r]);return s}static ToHex(e){const n=Oe.toUint8Array(e);let s="";const r=n.length;for(let i=0;i<r;i++){const o=n[i];o<16&&(s+="0"),s+=o.toString(16)}return s}static FromHex(e){let n=this.formatString(e);if(!n)return new ArrayBuffer(0);if(!Ke.isHex(n))throw new TypeError("Argument 'hexString' is not HEX encoded");n.length%2&&(n=`0${n}`);const s=new Uint8Array(n.length/2);for(let r=0;r<n.length;r=r+2){const i=n.slice(r,r+2);s[r/2]=parseInt(i,16)}return s.buffer}static ToUtf16String(e,n=!1){return li.toString(e,n)}static FromUtf16String(e,n=!1){return li.fromString(e,n)}static Base64Padding(e){const n=4-e.length%4;if(n<4)for(let s=0;s<n;s++)e+="=";return e}static formatString(e){return e?.replace(/[\n\r\t ]/g,"")||""}}Ke.DEFAULT_UTF8_ENCODING="utf8";function yW(...t){const e=t.map(r=>r.byteLength).reduce((r,i)=>r+i),n=new Uint8Array(e);let s=0;return t.map(r=>new Uint8Array(r)).forEach(r=>{for(const i of r)n[s++]=i}),n.buffer}function PO(t,e){if(!(t&&e)||t.byteLength!==e.byteLength)return!1;const n=new Uint8Array(t),s=new Uint8Array(e);for(let r=0;r<t.byteLength;r++)if(n[r]!==s[r])return!1;return!0}function Yc(t,e){let n=0;if(t.length===1)return t[0];for(let s=t.length-1;s>=0;s--)n+=t[t.length-1-s]*Math.pow(2,e*s);return n}function al(t,e,n=-1){const s=n;let r=t,i=0,o=Math.pow(2,e);for(let c=1;c<8;c++){if(t<o){let d;if(s<0)d=new ArrayBuffer(c),i=c;else{if(s<c)return new ArrayBuffer(0);d=new ArrayBuffer(s),i=s}const h=new Uint8Array(d);for(let g=c-1;g>=0;g--){const m=Math.pow(2,g*e);h[i-g-1]=Math.floor(r/m),r-=h[i-g-1]*m}return d}o*=Math.pow(2,e)}return new ArrayBuffer(0)}function f_(...t){let e=0,n=0;for(const i of t)e+=i.length;const s=new ArrayBuffer(e),r=new Uint8Array(s);for(const i of t)r.set(i,n),n+=i.length;return r}function $O(){const t=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const c=t[0]===255&&t[1]&128,d=t[0]===0&&(t[1]&128)===0;(c||d)&&this.warnings.push("Needlessly long format")}const e=new ArrayBuffer(this.valueHex.byteLength),n=new Uint8Array(e);for(let c=0;c<this.valueHex.byteLength;c++)n[c]=0;n[0]=t[0]&128;const s=Yc(n,8),r=new ArrayBuffer(this.valueHex.byteLength),i=new Uint8Array(r);for(let c=0;c<this.valueHex.byteLength;c++)i[c]=t[c];return i[0]&=127,Yc(i,8)-s}function bW(t){const e=t<0?t*-1:t;let n=128;for(let s=1;s<8;s++){if(e<=n){if(t<0){const o=n-e,c=al(o,8,s),d=new Uint8Array(c);return d[0]|=128,c}let r=al(e,8,s),i=new Uint8Array(r);if(i[0]&128){const o=r.slice(0),c=new Uint8Array(o);r=new ArrayBuffer(r.byteLength+1),i=new Uint8Array(r);for(let d=0;d<o.byteLength;d++)i[d+1]=c[d];i[0]=0}return r}n*=Math.pow(2,8)}return new ArrayBuffer(0)}function vW(t,e){if(t.byteLength!==e.byteLength)return!1;const n=new Uint8Array(t),s=new Uint8Array(e);for(let r=0;r<n.length;r++)if(n[r]!==s[r])return!1;return!0}function or(t,e){const n=t.toString(10);if(e<n.length)return"";const s=e-n.length,r=new Array(s);for(let o=0;o<s;o++)r[o]="0";return r.join("").concat(n)}function $0(){if(typeof BigInt>"u")throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function S2(t){let e=0,n=0;for(let r=0;r<t.length;r++){const i=t[r];e+=i.byteLength}const s=new Uint8Array(e);for(let r=0;r<t.length;r++){const i=t[r];s.set(new Uint8Array(i),n),n+=i.byteLength}return s.buffer}function fa(t,e,n,s){return e instanceof Uint8Array?e.byteLength?n<0?(t.error="Wrong parameter: inputOffset less than zero",!1):s<0?(t.error="Wrong parameter: inputLength less than zero",!1):e.byteLength-n-s<0?(t.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):!0:(t.error="Wrong parameter: inputBuffer has zero length",!1):(t.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class Jg{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return S2(this.items)}}const Lh=[new Uint8Array([1])],AE="0123456789",ex="name",EE="valueHexView",xW="isHexOnly",_W="idBlock",wW="tagClass",SW="tagNumber",kW="isConstructed",CW="fromBER",NW="toBER",AW="local",Us="",Ci=new ArrayBuffer(0),Qg=new Uint8Array(0),nf="EndOfContent",zO="OCTET STRING",HO="BIT STRING";function Ni(t){var e;return e=class extends t{get valueHex(){return this.valueHexView.slice().buffer}set valueHex(s){this.valueHexView=new Uint8Array(s)}constructor(...s){var r;super(...s);const i=s[0]||{};this.isHexOnly=(r=i.isHexOnly)!==null&&r!==void 0?r:!1,this.valueHexView=i.valueHex?Oe.toUint8Array(i.valueHex):Qg}fromBER(s,r,i){const o=s instanceof ArrayBuffer?new Uint8Array(s):s;if(!fa(this,o,r,i))return-1;const c=r+i;return this.valueHexView=o.subarray(r,c),this.valueHexView.length?(this.blockLength=i,c):(this.warnings.push("Zero buffer length"),r)}toBER(s=!1){return this.isHexOnly?s?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",Ci)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:Ke.ToHex(this.valueHexView)}}},e.NAME="hexBlock",e}class kl{static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}constructor({blockLength:e=0,error:n=Us,warnings:s=[],valueBeforeDecode:r=Qg}={}){this.blockLength=e,this.error=n,this.warnings=s,this.valueBeforeDecodeView=Oe.toUint8Array(r)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:Ke.ToHex(this.valueBeforeDecodeView)}}}kl.NAME="baseBlock";class As extends kl{fromBER(e,n,s){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,n){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}As.NAME="valueBlock";class UO extends Ni(kl){constructor({idBlock:e={}}={}){var n,s,r,i;super(),e?(this.isHexOnly=(n=e.isHexOnly)!==null&&n!==void 0?n:!1,this.valueHexView=e.valueHex?Oe.toUint8Array(e.valueHex):Qg,this.tagClass=(s=e.tagClass)!==null&&s!==void 0?s:-1,this.tagNumber=(r=e.tagNumber)!==null&&r!==void 0?r:-1,this.isConstructed=(i=e.isConstructed)!==null&&i!==void 0?i:!1):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let n=0;switch(this.tagClass){case 1:n|=0;break;case 2:n|=64;break;case 3:n|=128;break;case 4:n|=192;break;default:return this.error="Unknown tag class",Ci}if(this.isConstructed&&(n|=32),this.tagNumber<31&&!this.isHexOnly){const r=new Uint8Array(1);if(!e){let i=this.tagNumber;i&=31,n|=i,r[0]=n}return r.buffer}if(!this.isHexOnly){const r=al(this.tagNumber,7),i=new Uint8Array(r),o=r.byteLength,c=new Uint8Array(o+1);if(c[0]=n|31,!e){for(let d=0;d<o-1;d++)c[d+1]=i[d]|128;c[o]=i[o-1]}return c.buffer}const s=new Uint8Array(this.valueHexView.byteLength+1);if(s[0]=n|31,!e){const r=this.valueHexView;for(let i=0;i<r.length-1;i++)s[i+1]=r[i]|128;s[this.valueHexView.byteLength]=r[r.length-1]}return s.buffer}fromBER(e,n,s){const r=Oe.toUint8Array(e);if(!fa(this,r,n,s))return-1;const i=r.subarray(n,n+s);if(i.length===0)return this.error="Zero buffer length",-1;switch(i[0]&192){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(i[0]&32)===32,this.isHexOnly=!1;const c=i[0]&31;if(c!==31)this.tagNumber=c,this.blockLength=1;else{let d=1,h=this.valueHexView=new Uint8Array(255),g=255;for(;i[d]&128;){if(h[d-1]=i[d]&127,d++,d>=i.length)return this.error="End of input reached before message was fully decoded",-1;if(d===g){g+=255;const b=new Uint8Array(g);for(let y=0;y<h.length;y++)b[y]=h[y];h=this.valueHexView=new Uint8Array(g)}}this.blockLength=d+1,h[d-1]=i[d]&127;const m=new Uint8Array(d);for(let b=0;b<d;b++)m[b]=h[b];h=this.valueHexView=new Uint8Array(d),h.set(m),this.blockLength<=9?this.tagNumber=Yc(h,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(this.tagClass===1&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return n+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}UO.NAME="identificationBlock";class VO extends kl{constructor({lenBlock:e={}}={}){var n,s,r;super(),this.isIndefiniteForm=(n=e.isIndefiniteForm)!==null&&n!==void 0?n:!1,this.longFormUsed=(s=e.longFormUsed)!==null&&s!==void 0?s:!1,this.length=(r=e.length)!==null&&r!==void 0?r:0}fromBER(e,n,s){const r=Oe.toUint8Array(e);if(!fa(this,r,n,s))return-1;const i=r.subarray(n,n+s);if(i.length===0)return this.error="Zero buffer length",-1;if(i[0]===255)return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=i[0]===128,this.isIndefiniteForm)return this.blockLength=1,n+this.blockLength;if(this.longFormUsed=!!(i[0]&128),this.longFormUsed===!1)return this.length=i[0],this.blockLength=1,n+this.blockLength;const o=i[0]&127;if(o>8)return this.error="Too big integer",-1;if(o+1>i.length)return this.error="End of input reached before message was fully decoded",-1;const c=n+1,d=r.subarray(c,c+o);return d[o-1]===0&&this.warnings.push("Needlessly long encoded length"),this.length=Yc(d,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=o+1,n+this.blockLength}toBER(e=!1){let n,s;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return n=new ArrayBuffer(1),e===!1&&(s=new Uint8Array(n),s[0]=128),n;if(this.longFormUsed){const r=al(this.length,8);if(r.byteLength>127)return this.error="Too big length",Ci;if(n=new ArrayBuffer(r.byteLength+1),e)return n;const i=new Uint8Array(r);s=new Uint8Array(n),s[0]=r.byteLength|128;for(let o=0;o<r.byteLength;o++)s[o+1]=i[o];return n}return n=new ArrayBuffer(1),e===!1&&(s=new Uint8Array(n),s[0]=this.length),n}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}VO.NAME="lengthBlock";const He={};class as extends kl{constructor({name:e=Us,optional:n=!1,primitiveSchema:s,...r}={},i){super(r),this.name=e,this.optional=n,s&&(this.primitiveSchema=s),this.idBlock=new UO(r),this.lenBlock=new VO(r),this.valueBlock=i?new i(r):new As(r)}fromBER(e,n,s){const r=this.valueBlock.fromBER(e,n,this.lenBlock.isIndefiniteForm?s:this.lenBlock.length);return r===-1?(this.error=this.valueBlock.error,r):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}toBER(e,n){const s=n||new Jg;n||FO(this);const r=this.idBlock.toBER(e);if(s.write(r),this.lenBlock.isIndefiniteForm)s.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,s),s.write(new ArrayBuffer(2));else{const i=this.valueBlock.toBER(e);this.lenBlock.length=i.byteLength;const o=this.lenBlock.toBER(e);s.write(o),s.write(i)}return n?Ci:s.final()}toJSON(){const e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return e==="ascii"?this.onAsciiEncoding():Ke.ToHex(this.toBER())}onAsciiEncoding(){const e=this.constructor.NAME,n=Ke.ToHex(this.valueBlock.valueBeforeDecodeView);return`${e} : ${n}`}isEqual(e){if(this===e)return!0;if(!(e instanceof this.constructor))return!1;const n=this.toBER(),s=e.toBER();return vW(n,s)}}as.NAME="BaseBlock";function FO(t){var e;if(t instanceof He.Constructed)for(const n of t.valueBlock.value)FO(n)&&(t.lenBlock.isIndefiniteForm=!0);return!!(!((e=t.lenBlock)===null||e===void 0)&&e.isIndefiniteForm)}class k2 extends as{getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}constructor({value:e=Us,...n}={},s){super(n,s),e&&this.fromString(e)}fromBER(e,n,s){const r=this.valueBlock.fromBER(e,n,this.lenBlock.isIndefiniteForm?s:this.lenBlock.length);return r===-1?(this.error=this.valueBlock.error,r):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}k2.NAME="BaseStringBlock";class qO extends Ni(As){constructor({isHexOnly:e=!0,...n}={}){super(n),this.isHexOnly=e}}qO.NAME="PrimitiveValueBlock";var KO;class Rf extends as{constructor(e={}){super(e,qO),this.idBlock.isConstructed=!1}}KO=Rf;He.Primitive=KO;Rf.NAME="PRIMITIVE";function EW(t,e){if(t instanceof e)return t;const n=new e;return n.idBlock=t.idBlock,n.lenBlock=t.lenBlock,n.warnings=t.warnings,n.valueBeforeDecodeView=t.valueBeforeDecodeView,n}function _u(t,e=0,n=t.length){const s=e;let r=new as({},As);const i=new kl;if(!fa(i,t,e,n))return r.error=i.error,{offset:-1,result:r};if(!t.subarray(e,e+n).length)return r.error="Zero buffer length",{offset:-1,result:r};let c=r.idBlock.fromBER(t,e,n);if(r.idBlock.warnings.length&&r.warnings.concat(r.idBlock.warnings),c===-1)return r.error=r.idBlock.error,{offset:-1,result:r};if(e=c,n-=r.idBlock.blockLength,c=r.lenBlock.fromBER(t,e,n),r.lenBlock.warnings.length&&r.warnings.concat(r.lenBlock.warnings),c===-1)return r.error=r.lenBlock.error,{offset:-1,result:r};if(e=c,n-=r.lenBlock.blockLength,!r.idBlock.isConstructed&&r.lenBlock.isIndefiniteForm)return r.error="Indefinite length form used for primitive encoding form",{offset:-1,result:r};let d=as;switch(r.idBlock.tagClass){case 1:if(r.idBlock.tagNumber>=37&&r.idBlock.isHexOnly===!1)return r.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:r};switch(r.idBlock.tagNumber){case 0:if(r.idBlock.isConstructed&&r.lenBlock.length>0)return r.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:r};d=He.EndOfContent;break;case 1:d=He.Boolean;break;case 2:d=He.Integer;break;case 3:d=He.BitString;break;case 4:d=He.OctetString;break;case 5:d=He.Null;break;case 6:d=He.ObjectIdentifier;break;case 10:d=He.Enumerated;break;case 12:d=He.Utf8String;break;case 13:d=He.RelativeObjectIdentifier;break;case 14:d=He.TIME;break;case 15:return r.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:r};case 16:d=He.Sequence;break;case 17:d=He.Set;break;case 18:d=He.NumericString;break;case 19:d=He.PrintableString;break;case 20:d=He.TeletexString;break;case 21:d=He.VideotexString;break;case 22:d=He.IA5String;break;case 23:d=He.UTCTime;break;case 24:d=He.GeneralizedTime;break;case 25:d=He.GraphicString;break;case 26:d=He.VisibleString;break;case 27:d=He.GeneralString;break;case 28:d=He.UniversalString;break;case 29:d=He.CharacterString;break;case 30:d=He.BmpString;break;case 31:d=He.DATE;break;case 32:d=He.TimeOfDay;break;case 33:d=He.DateTime;break;case 34:d=He.Duration;break;default:{const h=r.idBlock.isConstructed?new He.Constructed:new He.Primitive;h.idBlock=r.idBlock,h.lenBlock=r.lenBlock,h.warnings=r.warnings,r=h}}break;default:d=r.idBlock.isConstructed?He.Constructed:He.Primitive}return r=EW(r,d),c=r.fromBER(t,e,r.lenBlock.isIndefiniteForm?n:r.lenBlock.length),r.valueBeforeDecodeView=t.subarray(s,s+r.blockLength),{offset:c,result:r}}function Fc(t){if(!t.byteLength){const e=new as({},As);return e.error="Input buffer has zero length",{offset:-1,result:e}}return _u(Oe.toUint8Array(t).slice(),0,t.byteLength)}function jW(t,e){return t?1:e}class io extends As{constructor({value:e=[],isIndefiniteForm:n=!1,...s}={}){super(s),this.value=e,this.isIndefiniteForm=n}fromBER(e,n,s){const r=Oe.toUint8Array(e);if(!fa(this,r,n,s))return-1;if(this.valueBeforeDecodeView=r.subarray(n,n+s),this.valueBeforeDecodeView.length===0)return this.warnings.push("Zero buffer length"),n;let i=n;for(;jW(this.isIndefiniteForm,s)>0;){const o=_u(r,i,s);if(o.offset===-1)return this.error=o.result.error,this.warnings.concat(o.result.warnings),-1;if(i=o.offset,this.blockLength+=o.result.blockLength,s-=o.result.blockLength,this.value.push(o.result),this.isIndefiniteForm&&o.result.constructor.NAME===nf)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===nf?this.value.pop():this.warnings.push("No EndOfContent block encoded")),i}toBER(e,n){const s=n||new Jg;for(let r=0;r<this.value.length;r++)this.value[r].toBER(e,s);return n?Ci:s.final()}toJSON(){const e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const n of this.value)e.value.push(n.toJSON());return e}}io.NAME="ConstructedValueBlock";var WO;class ks extends as{constructor(e={}){super(e,io),this.idBlock.isConstructed=!0}fromBER(e,n,s){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const r=this.valueBlock.fromBER(e,n,this.lenBlock.isIndefiniteForm?s:this.lenBlock.length);return r===-1?(this.error=this.valueBlock.error,r):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}onAsciiEncoding(){const e=[];for(const s of this.valueBlock.value)e.push(s.toString("ascii").split(`
`).map(r=>`  ${r}`).join(`
`));const n=this.idBlock.tagClass===3?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${n} :
${e.join(`
`)}`:`${n} :`}}WO=ks;He.Constructed=WO;ks.NAME="CONSTRUCTED";class GO extends As{fromBER(e,n,s){return n}toBER(e){return Ci}}GO.override="EndOfContentValueBlock";var YO;class C2 extends as{constructor(e={}){super(e,GO),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}YO=C2;He.EndOfContent=YO;C2.NAME=nf;var XO;class ol extends as{constructor(e={}){super(e,As),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,n,s){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=s,n+s>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):n+s}toBER(e,n){const s=new ArrayBuffer(2);if(!e){const r=new Uint8Array(s);r[0]=5,r[1]=0}return n&&n.write(s),s}onAsciiEncoding(){return`${this.constructor.NAME}`}}XO=ol;He.Null=XO;ol.NAME="NULL";class JO extends Ni(As){get value(){for(const e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}constructor({value:e,...n}={}){super(n),n.valueHex?this.valueHexView=Oe.toUint8Array(n.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}fromBER(e,n,s){const r=Oe.toUint8Array(e);return fa(this,r,n,s)?(this.valueHexView=r.subarray(n,n+s),s>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,$O.call(this),this.blockLength=s,n+s):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}JO.NAME="BooleanValueBlock";var QO;let Zg=class extends as{getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}constructor(e={}){super(e,JO),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}};QO=Zg;He.Boolean=QO;Zg.NAME="BOOLEAN";class ZO extends Ni(io){constructor({isConstructed:e=!1,...n}={}){super(n),this.isConstructed=e}fromBER(e,n,s){let r=0;if(this.isConstructed){if(this.isHexOnly=!1,r=io.prototype.fromBER.call(this,e,n,s),r===-1)return r;for(let i=0;i<this.value.length;i++){const o=this.value[i].constructor.NAME;if(o===nf){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(o!==zO)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,r=super.fromBER(e,n,s),this.blockLength=s;return r}toBER(e,n){return this.isConstructed?io.prototype.toBER.call(this,e,n):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}ZO.NAME="OctetStringValueBlock";var N2;let Qo=class extends as{constructor({idBlock:e={},lenBlock:n={},...s}={}){var r,i;(r=s.isConstructed)!==null&&r!==void 0||(s.isConstructed=!!(!((i=s.value)===null||i===void 0)&&i.length)),super({idBlock:{isConstructed:s.isConstructed,...e},lenBlock:{...n,isIndefiniteForm:!!s.isIndefiniteForm},...s},ZO),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,n,s){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,s===0)return this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),n;if(!this.valueBlock.isConstructed){const i=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(n,n+s);try{if(i.byteLength){const o=_u(i,0,i.byteLength);o.offset!==-1&&o.offset===s&&(this.valueBlock.value=[o.result])}}catch{}}return super.fromBER(e,n,s)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return ks.prototype.onAsciiEncoding.call(this);const e=this.constructor.NAME,n=Ke.ToHex(this.valueBlock.valueHexView);return`${e} : ${n}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const e=[];for(const n of this.valueBlock.value)n instanceof N2&&e.push(n.valueBlock.valueHexView);return Oe.concat(e)}};N2=Qo;He.OctetString=N2;Qo.NAME=zO;class eM extends Ni(io){constructor({unusedBits:e=0,isConstructed:n=!1,...s}={}){super(s),this.unusedBits=e,this.isConstructed=n,this.blockLength=this.valueHexView.byteLength}fromBER(e,n,s){if(!s)return n;let r=-1;if(this.isConstructed){if(r=io.prototype.fromBER.call(this,e,n,s),r===-1)return r;for(const c of this.value){const d=c.constructor.NAME;if(d===nf){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(d!==HO)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const h=c.valueBlock;if(this.unusedBits>0&&h.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=h.unusedBits}return r}const i=Oe.toUint8Array(e);if(!fa(this,i,n,s))return-1;const o=i.subarray(n,n+s);if(this.unusedBits=o[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const c=o.subarray(1);try{if(c.byteLength){const d=_u(c,0,c.byteLength);d.offset!==-1&&d.offset===s-1&&(this.value=[d.result])}}catch{}}return this.valueHexView=o.subarray(1),this.blockLength=o.length,n+s}toBER(e,n){if(this.isConstructed)return io.prototype.toBER.call(this,e,n);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength){const r=new Uint8Array(1);return r[0]=0,r.buffer}const s=new Uint8Array(this.valueHexView.length+1);return s[0]=this.unusedBits,s.set(this.valueHexView,1),s.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}eM.NAME="BitStringValueBlock";var tM;let Zo=class extends as{constructor({idBlock:e={},lenBlock:n={},...s}={}){var r,i;(r=s.isConstructed)!==null&&r!==void 0||(s.isConstructed=!!(!((i=s.value)===null||i===void 0)&&i.length)),super({idBlock:{isConstructed:s.isConstructed,...e},lenBlock:{...n,isIndefiniteForm:!!s.isIndefiniteForm},...s},eM),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,n,s){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,n,s)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return ks.prototype.onAsciiEncoding.call(this);{const e=[],n=this.valueBlock.valueHexView;for(const o of n)e.push(o.toString(2).padStart(8,"0"));const s=e.join(""),r=this.constructor.NAME,i=s.substring(0,s.length-this.valueBlock.unusedBits);return`${r} : ${i}`}}};tM=Zo;He.BitString=tM;Zo.NAME=HO;var nM;function TW(t,e){const n=new Uint8Array([0]),s=new Uint8Array(t),r=new Uint8Array(e);let i=s.slice(0);const o=i.length-1,c=r.slice(0),d=c.length-1;let h=0;const g=d<o?o:d;let m=0;for(let b=g;b>=0;b--,m++)!0===m<c.length?h=i[o-m]+c[d-m]+n[0]:h=i[o-m]+n[0],n[0]=h/10,!0===m>=i.length?i=f_(new Uint8Array([h%10]),i):i[o-m]=h%10;return n[0]>0&&(i=f_(n,i)),i}function jE(t){if(t>=Lh.length)for(let e=Lh.length;e<=t;e++){const n=new Uint8Array([0]);let s=Lh[e-1].slice(0);for(let r=s.length-1;r>=0;r--){const i=new Uint8Array([(s[r]<<1)+n[0]]);n[0]=i[0]/10,s[r]=i[0]%10}n[0]>0&&(s=f_(n,s)),Lh.push(s)}return Lh[t]}function RW(t,e){let n=0;const s=new Uint8Array(t),r=new Uint8Array(e),i=s.slice(0),o=i.length-1,c=r.slice(0),d=c.length-1;let h,g=0;for(let m=d;m>=0;m--,g++)h=i[o-g]-c[d-g]-n,!0===h<0?(n=1,i[o-g]=h+10):(n=0,i[o-g]=h);if(n>0)for(let m=o-d+1;m>=0;m--,g++)if(h=i[o-g]-n,h<0)n=1,i[o-g]=h+10;else{n=0,i[o-g]=h;break}return i.slice()}class A2 extends Ni(As){setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=$O.call(this)))}constructor({value:e,...n}={}){super(n),this._valueDec=0,n.valueHex&&this.setValueHex(),e!==void 0&&(this.valueDec=e)}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(bW(e))}get valueDec(){return this._valueDec}fromDER(e,n,s,r=0){const i=this.fromBER(e,n,s);if(i===-1)return i;const o=this.valueHexView;return o[0]===0&&(o[1]&128)!==0?this.valueHexView=o.subarray(1):r!==0&&o.length<r&&(r-o.length>1&&(r=o.length+1),this.valueHexView=o.subarray(r-o.length)),i}toDER(e=!1){const n=this.valueHexView;switch(!0){case(n[0]&128)!==0:{const s=new Uint8Array(this.valueHexView.length+1);s[0]=0,s.set(n,1),this.valueHexView=s}break;case(n[0]===0&&(n[1]&128)===0):this.valueHexView=this.valueHexView.subarray(1);break}return this.toBER(e)}fromBER(e,n,s){const r=super.fromBER(e,n,s);return r===-1||this.setValueHex(),r}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const e=this.valueHexView.length*8-1;let n=new Uint8Array(this.valueHexView.length*8/3),s=0,r;const i=this.valueHexView;let o="",c=!1;for(let d=i.byteLength-1;d>=0;d--){r=i[d];for(let h=0;h<8;h++)(r&1)===1&&(s===e?(n=RW(jE(s),n),o="-"):n=TW(n,jE(s))),s++,r>>=1}for(let d=0;d<n.length;d++)n[d]&&(c=!0),c&&(o+=AE.charAt(n[d]));return c===!1&&(o+=AE.charAt(0)),o}}nM=A2;A2.NAME="IntegerValueBlock";Object.defineProperty(nM.prototype,"valueHex",{set:function(t){this.valueHexView=new Uint8Array(t),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});var Id;class wu extends as{constructor(e={}){super(e,A2),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return $0(),BigInt(this.valueBlock.toString())}static fromBigInt(e){$0();const n=BigInt(e),s=new Jg,r=n.toString(16).replace(/^-/,""),i=new Uint8Array(Ke.FromHex(r));if(n<0){const c=new Uint8Array(i.length+(i[0]&128?1:0));c[0]|=128;const h=BigInt(`0x${Ke.ToHex(c)}`)+n,g=Oe.toUint8Array(Ke.FromHex(h.toString(16)));g[0]|=128,s.write(g)}else i[0]&128&&s.write(new Uint8Array([0])),s.write(i);return new Id({valueHex:s.final()})}convertToDER(){const e=new Id({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new Id({valueHex:this.valueBlock.valueHexView[0]===0?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}Id=wu;He.Integer=Id;wu.NAME="INTEGER";var sM;class ey extends wu{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}sM=ey;He.Enumerated=sM;ey.NAME="ENUMERATED";class p_ extends Ni(As){constructor({valueDec:e=-1,isFirstSid:n=!1,...s}={}){super(s),this.valueDec=e,this.isFirstSid=n}fromBER(e,n,s){if(!s)return n;const r=Oe.toUint8Array(e);if(!fa(this,r,n,s))return-1;const i=r.subarray(n,n+s);this.valueHexView=new Uint8Array(s);for(let c=0;c<s&&(this.valueHexView[c]=i[c]&127,this.blockLength++,(i[c]&128)!==0);c++);const o=new Uint8Array(this.blockLength);for(let c=0;c<this.blockLength;c++)o[c]=this.valueHexView[c];return this.valueHexView=o,(i[this.blockLength-1]&128)!==0?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=Yc(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),n+this.blockLength)}set valueBigInt(e){$0();let n=BigInt(e).toString(2);for(;n.length%7;)n="0"+n;const s=new Uint8Array(n.length/7);for(let r=0;r<s.length;r++)s[r]=parseInt(n.slice(r*7,r*7+7),2)+(r+1<s.length?128:0);this.fromBER(s.buffer,0,s.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const r=this.valueHexView,i=new Uint8Array(this.blockLength);for(let o=0;o<this.blockLength-1;o++)i[o]=r[o]|128;return i[this.blockLength-1]=r[this.blockLength-1],i.buffer}const n=al(this.valueDec,7);if(n.byteLength===0)return this.error="Error during encoding SID value",Ci;const s=new Uint8Array(n.byteLength);if(!e){const r=new Uint8Array(n),i=n.byteLength-1;for(let o=0;o<i;o++)s[o]=r[o]|128;s[i]=r[i]}return s}toString(){let e="";if(this.isHexOnly)e=Ke.ToHex(this.valueHexView);else if(this.isFirstSid){let n=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",n-=40):(e="2.",n-=80),e+=n.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}p_.NAME="sidBlock";class rM extends As{constructor({value:e=Us,...n}={}){super(n),this.value=[],e&&this.fromString(e)}fromBER(e,n,s){let r=n;for(;s>0;){const i=new p_;if(r=i.fromBER(e,r,s),r===-1)return this.blockLength=0,this.error=i.error,r;this.value.length===0&&(i.isFirstSid=!0),this.blockLength+=i.blockLength,s-=i.blockLength,this.value.push(i)}return r}toBER(e){const n=[];for(let s=0;s<this.value.length;s++){const r=this.value[s].toBER(e);if(r.byteLength===0)return this.error=this.value[s].error,Ci;n.push(r)}return S2(n)}fromString(e){this.value=[];let n=0,s=0,r="",i=!1;do if(s=e.indexOf(".",n),s===-1?r=e.substring(n):r=e.substring(n,s),n=s+1,i){const o=this.value[0];let c=0;switch(o.valueDec){case 0:break;case 1:c=40;break;case 2:c=80;break;default:this.value=[];return}const d=parseInt(r,10);if(isNaN(d))return;o.valueDec=d+c,i=!1}else{const o=new p_;if(r>Number.MAX_SAFE_INTEGER){$0();const c=BigInt(r);o.valueBigInt=c}else if(o.valueDec=parseInt(r,10),isNaN(o.valueDec))return;this.value.length||(o.isFirstSid=!0,i=!0),this.value.push(o)}while(s!==-1)}toString(){let e="",n=!1;for(let s=0;s<this.value.length;s++){n=this.value[s].isHexOnly;let r=this.value[s].toString();s!==0&&(e=`${e}.`),n?(r=`{${r}}`,this.value[s].isFirstSid?e=`2.{${r} - 80}`:e+=r):e+=r}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let n=0;n<this.value.length;n++)e.sidArray.push(this.value[n].toJSON());return e}}rM.NAME="ObjectIdentifierValueBlock";var iM;class ty extends as{getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}constructor(e={}){super(e,rM),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}iM=ty;He.ObjectIdentifier=iM;ty.NAME="OBJECT IDENTIFIER";class m_ extends Ni(kl){constructor({valueDec:e=0,...n}={}){super(n),this.valueDec=e}fromBER(e,n,s){if(s===0)return n;const r=Oe.toUint8Array(e);if(!fa(this,r,n,s))return-1;const i=r.subarray(n,n+s);this.valueHexView=new Uint8Array(s);for(let c=0;c<s&&(this.valueHexView[c]=i[c]&127,this.blockLength++,(i[c]&128)!==0);c++);const o=new Uint8Array(this.blockLength);for(let c=0;c<this.blockLength;c++)o[c]=this.valueHexView[c];return this.valueHexView=o,(i[this.blockLength-1]&128)!==0?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=Yc(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),n+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const r=this.valueHexView,i=new Uint8Array(this.blockLength);for(let o=0;o<this.blockLength-1;o++)i[o]=r[o]|128;return i[this.blockLength-1]=r[this.blockLength-1],i.buffer}const n=al(this.valueDec,7);if(n.byteLength===0)return this.error="Error during encoding SID value",Ci;const s=new Uint8Array(n.byteLength);if(!e){const r=new Uint8Array(n),i=n.byteLength-1;for(let o=0;o<i;o++)s[o]=r[o]|128;s[i]=r[i]}return s.buffer}toString(){let e="";return this.isHexOnly?e=Ke.ToHex(this.valueHexView):e=this.valueDec.toString(),e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}m_.NAME="relativeSidBlock";class aM extends As{constructor({value:e=Us,...n}={}){super(n),this.value=[],e&&this.fromString(e)}fromBER(e,n,s){let r=n;for(;s>0;){const i=new m_;if(r=i.fromBER(e,r,s),r===-1)return this.blockLength=0,this.error=i.error,r;this.blockLength+=i.blockLength,s-=i.blockLength,this.value.push(i)}return r}toBER(e,n){const s=[];for(let r=0;r<this.value.length;r++){const i=this.value[r].toBER(e);if(i.byteLength===0)return this.error=this.value[r].error,Ci;s.push(i)}return S2(s)}fromString(e){this.value=[];let n=0,s=0,r="";do{s=e.indexOf(".",n),s===-1?r=e.substring(n):r=e.substring(n,s),n=s+1;const i=new m_;if(i.valueDec=parseInt(r,10),isNaN(i.valueDec))return!0;this.value.push(i)}while(s!==-1);return!0}toString(){let e="",n=!1;for(let s=0;s<this.value.length;s++){n=this.value[s].isHexOnly;let r=this.value[s].toString();s!==0&&(e=`${e}.`),n&&(r=`{${r}}`),e+=r}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let n=0;n<this.value.length;n++)e.sidArray.push(this.value[n].toJSON());return e}}aM.NAME="RelativeObjectIdentifierValueBlock";var oM;class E2 extends as{getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}constructor(e={}){super(e,aM),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}oM=E2;He.RelativeObjectIdentifier=oM;E2.NAME="RelativeObjectIdentifier";var lM;class Yr extends ks{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}lM=Yr;He.Sequence=lM;Yr.NAME="SEQUENCE";var cM;let yi=class extends ks{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}};cM=yi;He.Set=cM;yi.NAME="SET";class uM extends Ni(As){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=Us}toJSON(){return{...super.toJSON(),value:this.value}}}uM.NAME="StringValueBlock";class hM extends uM{}hM.NAME="SimpleStringValueBlock";class dr extends k2{constructor({...e}={}){super(e,hM)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,Oe.toUint8Array(e))}fromString(e){const n=e.length,s=this.valueBlock.valueHexView=new Uint8Array(n);for(let r=0;r<n;r++)s[r]=e.charCodeAt(r);this.valueBlock.value=e}}dr.NAME="SIMPLE STRING";class dM extends dr{fromBuffer(e){this.valueBlock.valueHexView=Oe.toUint8Array(e);try{this.valueBlock.value=Ke.ToUtf8String(e)}catch(n){this.warnings.push(`Error during "decodeURIComponent": ${n}, using raw string`),this.valueBlock.value=Ke.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(Ke.FromUtf8String(e)),this.valueBlock.value=e}}dM.NAME="Utf8StringValueBlock";var fM;class pa extends dM{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}fM=pa;He.Utf8String=fM;pa.NAME="UTF8String";class pM extends dr{fromBuffer(e){this.valueBlock.value=Ke.ToUtf16String(e),this.valueBlock.valueHexView=Oe.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(Ke.FromUtf16String(e))}}pM.NAME="BmpStringValueBlock";var mM;class ny extends pM{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}mM=ny;He.BmpString=mM;ny.NAME="BMPString";class gM extends dr{fromBuffer(e){const n=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),s=new Uint8Array(n);for(let r=0;r<s.length;r+=4)s[r]=s[r+3],s[r+1]=s[r+2],s[r+2]=0,s[r+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(n))}fromString(e){const n=e.length,s=this.valueBlock.valueHexView=new Uint8Array(n*4);for(let r=0;r<n;r++){const i=al(e.charCodeAt(r),8),o=new Uint8Array(i);if(o.length>4)continue;const c=4-o.length;for(let d=o.length-1;d>=0;d--)s[r*4+d+c]=o[d]}this.valueBlock.value=e}}gM.NAME="UniversalStringValueBlock";var yM;class sy extends gM{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}yM=sy;He.UniversalString=yM;sy.NAME="UniversalString";var bM;class ry extends dr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}bM=ry;He.NumericString=bM;ry.NAME="NumericString";var vM;class iy extends dr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}vM=iy;He.PrintableString=vM;iy.NAME="PrintableString";var xM;class ay extends dr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}xM=ay;He.TeletexString=xM;ay.NAME="TeletexString";var _M;class oy extends dr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}_M=oy;He.VideotexString=_M;oy.NAME="VideotexString";var wM;class ly extends dr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}wM=ly;He.IA5String=wM;ly.NAME="IA5String";var SM;class cy extends dr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}SM=cy;He.GraphicString=SM;cy.NAME="GraphicString";var kM;class Of extends dr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}kM=Of;He.VisibleString=kM;Of.NAME="VisibleString";var CM;class uy extends dr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}CM=uy;He.GeneralString=CM;uy.NAME="GeneralString";var NM;class hy extends dr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}NM=hy;He.CharacterString=NM;hy.NAME="CharacterString";var AM;class Mf extends Of{constructor({value:e,valueDate:n,...s}={}){if(super(s),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let r=0;r<e.length;r++)this.valueBlock.valueHexView[r]=e.charCodeAt(r)}n&&(this.fromDate(n),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,Oe.toUint8Array(e)))}toBuffer(){const e=this.toString(),n=new ArrayBuffer(e.length),s=new Uint8Array(n);for(let r=0;r<e.length;r++)s[r]=e.charCodeAt(r);return n}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){const s=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(e);if(s===null){this.error="Wrong input string for conversion";return}const r=parseInt(s[1],10);r>=50?this.year=1900+r:this.year=2e3+r,this.month=parseInt(s[2],10),this.day=parseInt(s[3],10),this.hour=parseInt(s[4],10),this.minute=parseInt(s[5],10),this.second=parseInt(s[6],10)}toString(e="iso"){if(e==="iso"){const n=new Array(7);return n[0]=or(this.year<2e3?this.year-1900:this.year-2e3,2),n[1]=or(this.month,2),n[2]=or(this.day,2),n[3]=or(this.hour,2),n[4]=or(this.minute,2),n[5]=or(this.second,2),n[6]="Z",n.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}AM=Mf;He.UTCTime=AM;Mf.NAME="UTCTime";var EM;class dy extends Mf{constructor(e={}){var n;super(e),(n=this.millisecond)!==null&&n!==void 0||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){const e=Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond);return new Date(e)}fromString(e){let n=!1,s="",r="",i=0,o,c=0,d=0;if(e[e.length-1]==="Z")s=e.substring(0,e.length-1),n=!0;else{const m=new Number(e[e.length-1]);if(isNaN(m.valueOf()))throw new Error("Wrong input string for conversion");s=e}if(n){if(s.indexOf("+")!==-1)throw new Error("Wrong input string for conversion");if(s.indexOf("-")!==-1)throw new Error("Wrong input string for conversion")}else{let m=1,b=s.indexOf("+"),y="";if(b===-1&&(b=s.indexOf("-"),m=-1),b!==-1){if(y=s.substring(b+1),s=s.substring(0,b),y.length!==2&&y.length!==4)throw new Error("Wrong input string for conversion");let w=parseInt(y.substring(0,2),10);if(isNaN(w.valueOf()))throw new Error("Wrong input string for conversion");if(c=m*w,y.length===4){if(w=parseInt(y.substring(2,4),10),isNaN(w.valueOf()))throw new Error("Wrong input string for conversion");d=m*w}}}let h=s.indexOf(".");if(h===-1&&(h=s.indexOf(",")),h!==-1){const m=new Number(`0${s.substring(h)}`);if(isNaN(m.valueOf()))throw new Error("Wrong input string for conversion");i=m.valueOf(),r=s.substring(0,h)}else r=s;switch(!0){case r.length===8:if(o=/(\d{4})(\d{2})(\d{2})/ig,h!==-1)throw new Error("Wrong input string for conversion");break;case r.length===10:if(o=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,h!==-1){let m=60*i;this.minute=Math.floor(m),m=60*(m-this.minute),this.second=Math.floor(m),m=1e3*(m-this.second),this.millisecond=Math.floor(m)}break;case r.length===12:if(o=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,h!==-1){let m=60*i;this.second=Math.floor(m),m=1e3*(m-this.second),this.millisecond=Math.floor(m)}break;case r.length===14:if(o=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,h!==-1){const m=1e3*i;this.millisecond=Math.floor(m)}break;default:throw new Error("Wrong input string for conversion")}const g=o.exec(r);if(g===null)throw new Error("Wrong input string for conversion");for(let m=1;m<g.length;m++)switch(m){case 1:this.year=parseInt(g[m],10);break;case 2:this.month=parseInt(g[m],10);break;case 3:this.day=parseInt(g[m],10);break;case 4:this.hour=parseInt(g[m],10)+c;break;case 5:this.minute=parseInt(g[m],10)+d;break;case 6:this.second=parseInt(g[m],10);break;default:throw new Error("Wrong input string for conversion")}if(n===!1){const m=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=m.getUTCFullYear(),this.month=m.getUTCMonth(),this.day=m.getUTCDay(),this.hour=m.getUTCHours(),this.minute=m.getUTCMinutes(),this.second=m.getUTCSeconds(),this.millisecond=m.getUTCMilliseconds()}}toString(e="iso"){if(e==="iso"){const n=[];return n.push(or(this.year,4)),n.push(or(this.month,2)),n.push(or(this.day,2)),n.push(or(this.hour,2)),n.push(or(this.minute,2)),n.push(or(this.second,2)),this.millisecond!==0&&(n.push("."),n.push(or(this.millisecond,3))),n.push("Z"),n.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}EM=dy;He.GeneralizedTime=EM;dy.NAME="GeneralizedTime";var jM;class j2 extends pa{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}jM=j2;He.DATE=jM;j2.NAME="DATE";var TM;class T2 extends pa{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}TM=T2;He.TimeOfDay=TM;T2.NAME="TimeOfDay";var RM;class R2 extends pa{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}RM=R2;He.DateTime=RM;R2.NAME="DateTime";var OM;class O2 extends pa{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}OM=O2;He.Duration=OM;O2.NAME="Duration";var MM;class M2 extends pa{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}MM=M2;He.TIME=MM;M2.NAME="TIME";class ll{constructor({name:e=Us,optional:n=!1}={}){this.name=e,this.optional=n}}class B2 extends ll{constructor({value:e=[],...n}={}){super(n),this.value=e}}class z0 extends ll{constructor({value:e=new ll,local:n=!1,...s}={}){super(s),this.value=e,this.local=n}}class OW{get data(){return this.dataView.slice().buffer}set data(e){this.dataView=Oe.toUint8Array(e)}constructor({data:e=Qg}={}){this.dataView=Oe.toUint8Array(e)}fromBER(e,n,s){const r=n+s;return this.dataView=Oe.toUint8Array(e).subarray(n,r),r}toBER(e){return this.dataView.slice().buffer}}function Qa(t,e,n){if(n instanceof B2){for(const i of n.value)if(Qa(t,e,i).verified)return{verified:!0,result:t};{const i={verified:!1,result:{error:"Wrong values for Choice type"}};return n.hasOwnProperty(ex)&&(i.name=n.name),i}}if(n instanceof ll)return n.hasOwnProperty(ex)&&(t[n.name]=e),{verified:!0,result:t};if(!(t instanceof Object))return{verified:!1,result:{error:"Wrong root object"}};if(!(e instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(!(n instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(_W in n))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(CW in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(NW in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const s=n.idBlock.toBER(!1);if(s.byteLength===0)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(n.idBlock.fromBER(s,0,s.byteLength)===-1)return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(n.idBlock.hasOwnProperty(wW)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.tagClass!==e.idBlock.tagClass)return{verified:!1,result:t};if(n.idBlock.hasOwnProperty(SW)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.tagNumber!==e.idBlock.tagNumber)return{verified:!1,result:t};if(n.idBlock.hasOwnProperty(kW)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.isConstructed!==e.idBlock.isConstructed)return{verified:!1,result:t};if(!(xW in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.isHexOnly!==e.idBlock.isHexOnly)return{verified:!1,result:t};if(n.idBlock.isHexOnly){if(!(EE in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const i=n.idBlock.valueHexView,o=e.idBlock.valueHexView;if(i.length!==o.length)return{verified:!1,result:t};for(let c=0;c<i.length;c++)if(i[c]!==o[1])return{verified:!1,result:t}}if(n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,Us),n.name&&(t[n.name]=e)),n instanceof He.Constructed){let i=0,o={verified:!1,result:{error:"Unknown error"}},c=n.valueBlock.value.length;if(c>0&&n.valueBlock.value[0]instanceof z0&&(c=e.valueBlock.value.length),c===0)return{verified:!0,result:t};if(e.valueBlock.value.length===0&&n.valueBlock.value.length!==0){let d=!0;for(let h=0;h<n.valueBlock.value.length;h++)d=d&&(n.valueBlock.value[h].optional||!1);return d?{verified:!0,result:t}:(n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,Us),n.name&&delete t[n.name]),t.error="Inconsistent object length",{verified:!1,result:t})}for(let d=0;d<c;d++)if(d-i>=e.valueBlock.value.length){if(n.valueBlock.value[d].optional===!1){const h={verified:!1,result:t};return t.error="Inconsistent length between ASN.1 data and schema",n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,Us),n.name&&(delete t[n.name],h.name=n.name)),h}}else if(n.valueBlock.value[0]instanceof z0){if(o=Qa(t,e.valueBlock.value[d],n.valueBlock.value[0].value),o.verified===!1)if(n.valueBlock.value[0].optional)i++;else return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,Us),n.name&&delete t[n.name]),o;if(ex in n.valueBlock.value[0]&&n.valueBlock.value[0].name.length>0){let h={};AW in n.valueBlock.value[0]&&n.valueBlock.value[0].local?h=e:h=t,typeof h[n.valueBlock.value[0].name]>"u"&&(h[n.valueBlock.value[0].name]=[]),h[n.valueBlock.value[0].name].push(e.valueBlock.value[d])}}else if(o=Qa(t,e.valueBlock.value[d-i],n.valueBlock.value[d]),o.verified===!1)if(n.valueBlock.value[d].optional)i++;else return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,Us),n.name&&delete t[n.name]),o;if(o.verified===!1){const d={verified:!1,result:t};return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,Us),n.name&&(delete t[n.name],d.name=n.name)),d}return{verified:!0,result:t}}if(n.primitiveSchema&&EE in e.valueBlock){const i=_u(e.valueBlock.valueHexView);if(i.offset===-1){const o={verified:!1,result:i.result};return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,Us),n.name&&(delete t[n.name],o.name=n.name)),o}return Qa(t,i.result,n.primitiveSchema)}return{verified:!0,result:t}}function MW(t,e){if(!(e instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};const n=_u(Oe.toUint8Array(t));return n.offset===-1?{verified:!1,result:n.result}:Qa(n.result,n.result,e)}const BM=Object.freeze(Object.defineProperty({__proto__:null,Any:ll,BaseBlock:as,BaseStringBlock:k2,BitString:Zo,BmpString:ny,Boolean:Zg,CharacterString:hy,Choice:B2,Constructed:ks,DATE:j2,DateTime:R2,Duration:O2,EndOfContent:C2,Enumerated:ey,GeneralString:uy,GeneralizedTime:dy,GraphicString:cy,HexBlock:Ni,IA5String:ly,Integer:wu,Null:ol,NumericString:ry,ObjectIdentifier:ty,OctetString:Qo,Primitive:Rf,PrintableString:iy,RawData:OW,RelativeObjectIdentifier:E2,Repeated:z0,Sequence:Yr,Set:yi,TIME:M2,TeletexString:ay,TimeOfDay:T2,UTCTime:Mf,UniversalString:sy,Utf8String:pa,ValueBlock:As,VideotexString:oy,ViewWriter:Jg,VisibleString:Of,compareSchema:Qa,fromBER:Fc,verifySchema:MW},Symbol.toStringTag,{value:"Module"}));var xe;(function(t){t[t.Sequence=0]="Sequence",t[t.Set=1]="Set",t[t.Choice=2]="Choice"})(xe||(xe={}));var ne;(function(t){t[t.Any=1]="Any",t[t.Boolean=2]="Boolean",t[t.OctetString=3]="OctetString",t[t.BitString=4]="BitString",t[t.Integer=5]="Integer",t[t.Enumerated=6]="Enumerated",t[t.ObjectIdentifier=7]="ObjectIdentifier",t[t.Utf8String=8]="Utf8String",t[t.BmpString=9]="BmpString",t[t.UniversalString=10]="UniversalString",t[t.NumericString=11]="NumericString",t[t.PrintableString=12]="PrintableString",t[t.TeletexString=13]="TeletexString",t[t.VideotexString=14]="VideotexString",t[t.IA5String=15]="IA5String",t[t.GraphicString=16]="GraphicString",t[t.VisibleString=17]="VisibleString",t[t.GeneralString=18]="GeneralString",t[t.CharacterString=19]="CharacterString",t[t.UTCTime=20]="UTCTime",t[t.GeneralizedTime=21]="GeneralizedTime",t[t.DATE=22]="DATE",t[t.TimeOfDay=23]="TimeOfDay",t[t.DateTime=24]="DateTime",t[t.Duration=25]="Duration",t[t.TIME=26]="TIME",t[t.Null=27]="Null"})(ne||(ne={}));class fy{constructor(e,n=0){if(this.unusedBits=0,this.value=new ArrayBuffer(0),e)if(typeof e=="number")this.fromNumber(e);else if(Oe.isBufferSource(e))this.unusedBits=n,this.value=Oe.toArrayBuffer(e);else throw TypeError("Unsupported type of 'params' argument for BitString")}fromASN(e){if(!(e instanceof Zo))throw new TypeError("Argument 'asn' is not instance of ASN.1 BitString");return this.unusedBits=e.valueBlock.unusedBits,this.value=e.valueBlock.valueHex,this}toASN(){return new Zo({unusedBits:this.unusedBits,valueHex:this.value})}toSchema(e){return new Zo({name:e})}toNumber(){let e="";const n=new Uint8Array(this.value);for(const s of n)e+=s.toString(2).padStart(8,"0");return e=e.split("").reverse().join(""),this.unusedBits&&(e=e.slice(this.unusedBits).padStart(this.unusedBits,"0")),parseInt(e,2)}fromNumber(e){let n=e.toString(2);const s=n.length+7>>3;this.unusedBits=(s<<3)-n.length;const r=new Uint8Array(s);n=n.padStart(s<<3,"0").split("").reverse().join("");let i=0;for(;i<s;)r[i]=parseInt(n.slice(i<<3,(i<<3)+8),2),i++;this.value=r.buffer}}class jt{get byteLength(){return this.buffer.byteLength}get byteOffset(){return 0}constructor(e){typeof e=="number"?this.buffer=new ArrayBuffer(e):Oe.isBufferSource(e)?this.buffer=Oe.toArrayBuffer(e):Array.isArray(e)?this.buffer=new Uint8Array(e):this.buffer=new ArrayBuffer(0)}fromASN(e){if(!(e instanceof Qo))throw new TypeError("Argument 'asn' is not instance of ASN.1 OctetString");return this.buffer=e.valueBlock.valueHex,this}toASN(){return new Qo({valueHex:this.buffer})}toSchema(e){return new Qo({name:e})}}const BW={fromASN:t=>t instanceof ol?null:t.valueBeforeDecodeView,toASN:t=>{if(t===null)return new ol;const e=Fc(t);if(e.result.error)throw new Error(e.result.error);return e.result}},DW={fromASN:t=>t.valueBlock.valueHexView.byteLength>=4?t.valueBlock.toString():t.valueBlock.valueDec,toASN:t=>new wu({value:+t})},LW={fromASN:t=>t.valueBlock.valueDec,toASN:t=>new ey({value:t})},Zt={fromASN:t=>t.valueBlock.valueHexView,toASN:t=>new wu({valueHex:t})},IW={fromASN:t=>t.valueBlock.valueHexView,toASN:t=>new Zo({valueHex:t})},PW={fromASN:t=>t.valueBlock.toString(),toASN:t=>new ty({value:t})},$W={fromASN:t=>t.valueBlock.value,toASN:t=>new Zg({value:t})},H0={fromASN:t=>t.valueBlock.valueHexView,toASN:t=>new Qo({valueHex:t})},zW={fromASN:t=>new jt(t.getValue()),toASN:t=>t.toASN()};function Pr(t){return{fromASN:e=>e.valueBlock.value,toASN:e=>new t({value:e})}}const DM=Pr(pa),HW=Pr(ny),UW=Pr(sy),VW=Pr(ry),FW=Pr(iy),qW=Pr(ay),KW=Pr(oy),WW=Pr(ly),GW=Pr(cy),YW=Pr(Of),XW=Pr(uy),JW=Pr(hy),QW={fromASN:t=>t.toDate(),toASN:t=>new Mf({valueDate:t})},ZW={fromASN:t=>t.toDate(),toASN:t=>new dy({valueDate:t})},eG={fromASN:()=>null,toASN:()=>new ol};function Pd(t){switch(t){case ne.Any:return BW;case ne.BitString:return IW;case ne.BmpString:return HW;case ne.Boolean:return $W;case ne.CharacterString:return JW;case ne.Enumerated:return LW;case ne.GeneralString:return XW;case ne.GeneralizedTime:return ZW;case ne.GraphicString:return GW;case ne.IA5String:return WW;case ne.Integer:return DW;case ne.Null:return eG;case ne.NumericString:return VW;case ne.ObjectIdentifier:return PW;case ne.OctetString:return H0;case ne.PrintableString:return FW;case ne.TeletexString:return qW;case ne.UTCTime:return QW;case ne.UniversalString:return UW;case ne.Utf8String:return DM;case ne.VideotexString:return KW;case ne.VisibleString:return YW;default:return null}}function Zi(t){return typeof t=="function"&&t.prototype?t.prototype.toASN&&t.prototype.fromASN?!0:Zi(t.prototype):!!(t&&typeof t=="object"&&"toASN"in t&&"fromASN"in t)}function LM(t){var e;if(t){const n=Object.getPrototypeOf(t);return((e=n?.prototype)===null||e===void 0?void 0:e.constructor)===Array?!0:LM(n)}return!1}function tG(t,e){if(!(t&&e)||t.byteLength!==e.byteLength)return!1;const n=new Uint8Array(t),s=new Uint8Array(e);for(let r=0;r<t.byteLength;r++)if(n[r]!==s[r])return!1;return!0}class nG{constructor(){this.items=new WeakMap}has(e){return this.items.has(e)}get(e,n=!1){const s=this.items.get(e);if(!s)throw new Error(`Cannot get schema for '${e.prototype.constructor.name}' target`);if(n&&!s.schema)throw new Error(`Schema '${e.prototype.constructor.name}' doesn't contain ASN.1 schema. Call 'AsnSchemaStorage.cache'.`);return s}cache(e){const n=this.get(e);n.schema||(n.schema=this.create(e,!0))}createDefault(e){const n={type:xe.Sequence,items:{}},s=this.findParentSchema(e);return s&&(Object.assign(n,s),n.items=Object.assign({},n.items,s.items)),n}create(e,n){const s=this.items.get(e)||this.createDefault(e),r=[];for(const i in s.items){const o=s.items[i],c=n?i:"";let d;if(typeof o.type=="number"){const g=ne[o.type],m=BM[g];if(!m)throw new Error(`Cannot get ASN1 class by name '${g}'`);d=new m({name:c})}else Zi(o.type)?d=new o.type().toSchema(c):o.optional?this.get(o.type).type===xe.Choice?d=new ll({name:c}):(d=this.create(o.type,!1),d.name=c):d=new ll({name:c});const h=!!o.optional||o.defaultValue!==void 0;if(o.repeated){d.name="";const g=o.repeated==="set"?yi:Yr;d=new g({name:"",value:[new z0({name:c,value:d})]})}if(o.context!==null&&o.context!==void 0)if(o.implicit)if(typeof o.type=="number"||Zi(o.type)){const g=o.repeated?ks:Rf;r.push(new g({name:c,optional:h,idBlock:{tagClass:3,tagNumber:o.context}}))}else{this.cache(o.type);const g=!!o.repeated;let m=g?d:this.get(o.type,!0).schema;m="valueBlock"in m?m.valueBlock.value:m.value,r.push(new ks({name:g?"":c,optional:h,idBlock:{tagClass:3,tagNumber:o.context},value:m}))}else r.push(new ks({optional:h,idBlock:{tagClass:3,tagNumber:o.context},value:[d]}));else d.optional=h,r.push(d)}switch(s.type){case xe.Sequence:return new Yr({value:r,name:""});case xe.Set:return new yi({value:r,name:""});case xe.Choice:return new B2({value:r,name:""});default:throw new Error("Unsupported ASN1 type in use")}}set(e,n){return this.items.set(e,n),this}findParentSchema(e){const n=Object.getPrototypeOf(e);return n?this.items.get(n)||this.findParentSchema(n):null}}const ts=new nG,Ne=t=>e=>{let n;ts.has(e)?n=ts.get(e):(n=ts.createDefault(e),ts.set(e,n)),Object.assign(n,t)},H=t=>(e,n)=>{let s;ts.has(e.constructor)?s=ts.get(e.constructor):(s=ts.createDefault(e.constructor),ts.set(e.constructor,s));const r=Object.assign({},t);if(typeof r.type=="number"&&!r.converter){const i=Pd(t.type);if(!i)throw new Error(`Cannot get default converter for property '${n}' of ${e.constructor.name}`);r.converter=i}r.raw=t.raw,s.items[n]=r};class Ih extends Error{constructor(){super(...arguments),this.schemas=[]}}class sG{static parse(e,n){const s=Fc(e);if(s.result.error)throw new Error(s.result.error);return this.fromASN(s.result,n)}static fromASN(e,n){try{if(Zi(n))return new n().fromASN(e);const s=ts.get(n);ts.cache(n);let r=s.schema;const i=this.handleChoiceTypes(e,s,n,r);if(i?.result)return i.result;i?.targetSchema&&(r=i.targetSchema);const o=this.handleSequenceTypes(e,s,n,r),c=new n;return LM(n)?this.handleArrayTypes(e,s,n):(this.processSchemaItems(s,o,c),c)}catch(s){throw s instanceof Ih&&s.schemas.push(n.name),s}}static handleChoiceTypes(e,n,s,r){if(e.constructor===ks&&n.type===xe.Choice&&e.idBlock.tagClass===3)for(const i in n.items){const o=n.items[i];if(o.context===e.idBlock.tagNumber&&o.implicit&&typeof o.type=="function"&&ts.has(o.type)){const c=ts.get(o.type);if(c&&c.type===xe.Sequence){const d=new Yr;if("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)&&"value"in d.valueBlock){d.valueBlock.value=e.valueBlock.value;const h=this.fromASN(d,o.type),g=new s;return g[i]=h,{result:g}}}}}else if(e.constructor===ks&&n.type!==xe.Choice){const i=new ks({idBlock:{tagClass:3,tagNumber:e.idBlock.tagNumber},value:n.schema.valueBlock.value});for(const o in n.items)delete e[o];return{targetSchema:i}}return null}static handleSequenceTypes(e,n,s,r){if(n.type===xe.Sequence){const i=Qa({},e,r);if(!i.verified)throw new Ih(`Data does not match to ${s.name} ASN1 schema.${i.result.error?` ${i.result.error}`:""}`);return i}else{const i=Qa({},e,r);if(!i.verified)throw new Ih(`Data does not match to ${s.name} ASN1 schema.${i.result.error?` ${i.result.error}`:""}`);return i}}static processRepeatedField(e,n,s){let r=e.slice(n);if(r.length===1&&r[0].constructor.name==="Sequence"){const i=r[0];i.valueBlock&&i.valueBlock.value&&Array.isArray(i.valueBlock.value)&&(r=i.valueBlock.value)}if(typeof s.type=="number"){const i=Pd(s.type);if(!i)throw new Error(`No converter for ASN.1 type ${s.type}`);return r.filter(o=>o&&o.valueBlock).map(o=>{try{return i.fromASN(o)}catch{return}}).filter(o=>o!==void 0)}else return r.filter(i=>i&&i.valueBlock).map(i=>{try{return this.fromASN(i,s.type)}catch{return}}).filter(i=>i!==void 0)}static processPrimitiveField(e,n){const s=Pd(n.type);if(!s)throw new Error(`No converter for ASN.1 type ${n.type}`);return s.fromASN(e)}static isOptionalChoiceField(e){return e.optional&&typeof e.type=="function"&&ts.has(e.type)&&ts.get(e.type).type===xe.Choice}static processOptionalChoiceField(e,n){try{return{processed:!0,value:this.fromASN(e,n.type)}}catch(s){if(s instanceof Ih&&/Wrong values for Choice type/.test(s.message))return{processed:!1};throw s}}static handleArrayTypes(e,n,s){if(!("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)))throw new Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");const r=n.itemType;if(typeof r=="number"){const i=Pd(r);if(!i)throw new Error(`Cannot get default converter for array item of ${s.name} ASN1 schema`);return s.from(e.valueBlock.value,o=>i.fromASN(o))}else return s.from(e.valueBlock.value,i=>this.fromASN(i,r))}static processSchemaItems(e,n,s){for(const r in e.items){const i=n.result[r];if(!i)continue;const o=e.items[r],c=o.type;let d;typeof c=="number"||Zi(c)?d=this.processPrimitiveSchemaItem(i,o,c):d=this.processComplexSchemaItem(i,o,c),d&&typeof d=="object"&&"value"in d&&"raw"in d?(s[r]=d.value,s[`${r}Raw`]=d.raw):s[r]=d}}static processPrimitiveSchemaItem(e,n,s){var r;const i=(r=n.converter)!==null&&r!==void 0?r:Zi(s)?new s:null;if(!i)throw new Error("Converter is empty");return n.repeated?this.processRepeatedPrimitiveItem(e,n,i):this.processSinglePrimitiveItem(e,n,s,i)}static processRepeatedPrimitiveItem(e,n,s){if(n.implicit){const r=n.repeated==="sequence"?Yr:yi,i=new r;i.valueBlock=e.valueBlock;const o=Fc(i.toBER(!1));if(o.offset===-1)throw new Error(`Cannot parse the child item. ${o.result.error}`);if(!("value"in o.result.valueBlock&&Array.isArray(o.result.valueBlock.value)))throw new Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");const c=o.result.valueBlock.value;return Array.from(c,d=>s.fromASN(d))}else return Array.from(e,r=>s.fromASN(r))}static processSinglePrimitiveItem(e,n,s,r){let i=e;if(n.implicit){let o;if(Zi(s))o=new s().toSchema("");else{const c=ne[s],d=BM[c];if(!d)throw new Error(`Cannot get '${c}' class from asn1js module`);o=new d}o.valueBlock=i.valueBlock,i=Fc(o.toBER(!1)).result}return r.fromASN(i)}static processComplexSchemaItem(e,n,s){if(n.repeated){if(!Array.isArray(e))throw new Error("Cannot get list of items from the ASN.1 parsed value. ASN.1 value should be iterable.");return Array.from(e,r=>this.fromASN(r,s))}else{const r=this.handleImplicitTagging(e,n,s);if(this.isOptionalChoiceField(n))try{return this.fromASN(r,s)}catch(i){if(i instanceof Ih&&/Wrong values for Choice type/.test(i.message))return;throw i}else{const i=this.fromASN(r,s);return n.raw?{value:i,raw:e.valueBeforeDecodeView}:i}}}static handleImplicitTagging(e,n,s){if(n.implicit&&typeof n.context=="number"){const r=ts.get(s);if(r.type===xe.Sequence){const i=new Yr;if("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)&&"value"in i.valueBlock)return i.valueBlock.value=e.valueBlock.value,i}else if(r.type===xe.Set){const i=new yi;if("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)&&"value"in i.valueBlock)return i.valueBlock.value=e.valueBlock.value,i}}return e}}class D2{static serialize(e){return e instanceof as?e.toBER(!1):this.toASN(e).toBER(!1)}static toASN(e){if(e&&typeof e=="object"&&Zi(e))return e.toASN();if(!(e&&typeof e=="object"))throw new TypeError("Parameter 1 should be type of Object.");const n=e.constructor,s=ts.get(n);ts.cache(n);let r=[];if(s.itemType){if(!Array.isArray(e))throw new TypeError("Parameter 1 should be type of Array.");if(typeof s.itemType=="number"){const o=Pd(s.itemType);if(!o)throw new Error(`Cannot get default converter for array item of ${n.name} ASN1 schema`);r=e.map(c=>o.toASN(c))}else r=e.map(o=>this.toAsnItem({type:s.itemType},"[]",n,o))}else for(const o in s.items){const c=s.items[o],d=e[o];if(d===void 0||c.defaultValue===d||typeof c.defaultValue=="object"&&typeof d=="object"&&tG(this.serialize(c.defaultValue),this.serialize(d)))continue;const h=D2.toAsnItem(c,o,n,d);if(typeof c.context=="number")if(c.implicit)if(!c.repeated&&(typeof c.type=="number"||Zi(c.type))){const g={};g.valueHex=h instanceof ol?h.valueBeforeDecodeView:h.valueBlock.toBER(),r.push(new Rf({optional:c.optional,idBlock:{tagClass:3,tagNumber:c.context},...g}))}else r.push(new ks({optional:c.optional,idBlock:{tagClass:3,tagNumber:c.context},value:h.valueBlock.value}));else r.push(new ks({optional:c.optional,idBlock:{tagClass:3,tagNumber:c.context},value:[h]}));else c.repeated?r=r.concat(h):r.push(h)}let i;switch(s.type){case xe.Sequence:i=new Yr({value:r});break;case xe.Set:i=new yi({value:r});break;case xe.Choice:if(!r[0])throw new Error(`Schema '${n.name}' has wrong data. Choice cannot be empty.`);i=r[0];break}return i}static toAsnItem(e,n,s,r){let i;if(typeof e.type=="number"){const o=e.converter;if(!o)throw new Error(`Property '${n}' doesn't have converter for type ${ne[e.type]} in schema '${s.name}'`);if(e.repeated){if(!Array.isArray(r))throw new TypeError("Parameter 'objProp' should be type of Array.");const c=Array.from(r,h=>o.toASN(h)),d=e.repeated==="sequence"?Yr:yi;i=new d({value:c})}else i=o.toASN(r)}else if(e.repeated){if(!Array.isArray(r))throw new TypeError("Parameter 'objProp' should be type of Array.");const o=Array.from(r,d=>this.toASN(d)),c=e.repeated==="sequence"?Yr:yi;i=new c({value:o})}else i=this.toASN(r);return i}}class Lt extends Array{constructor(e=[]){if(typeof e=="number")super(e);else{super();for(const n of e)this.push(n)}}}class Be{static serialize(e){return D2.serialize(e)}static parse(e,n){return sG.parse(e,n)}static toString(e){const n=Oe.isBufferSource(e)?Oe.toArrayBuffer(e):Be.serialize(e),s=Fc(n);if(s.offset===-1)throw new Error(`Cannot decode ASN.1 data. ${s.result.error}`);return s.result.toString()}}function M(t,e,n,s){var r=arguments.length,i=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,n):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,s);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(r<3?o(i):r>3?o(e,n,i):o(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i}function ft(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)}function nn(t,e,n,s,r){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?r.call(t,n):r?r.value=n:e.set(t,n),n}class TE{static isIPv4(e){return/^(\d{1,3}\.){3}\d{1,3}$/.test(e)}static parseIPv4(e){const n=e.split(".");if(n.length!==4)throw new Error("Invalid IPv4 address");return n.map(s=>{const r=parseInt(s,10);if(isNaN(r)||r<0||r>255)throw new Error("Invalid IPv4 address part");return r})}static parseIPv6(e){const s=this.expandIPv6(e).split(":");if(s.length!==8)throw new Error("Invalid IPv6 address");return s.reduce((r,i)=>{const o=parseInt(i,16);if(isNaN(o)||o<0||o>65535)throw new Error("Invalid IPv6 address part");return r.push(o>>8&255),r.push(o&255),r},[])}static expandIPv6(e){if(!e.includes("::"))return e;const n=e.split("::");if(n.length>2)throw new Error("Invalid IPv6 address");const s=n[0]?n[0].split(":"):[],r=n[1]?n[1].split(":"):[],i=8-(s.length+r.length);if(i<0)throw new Error("Invalid IPv6 address");return[...s,...Array(i).fill("0"),...r].join(":")}static formatIPv6(e){const n=[];for(let s=0;s<16;s+=2)n.push((e[s]<<8|e[s+1]).toString(16));return this.compressIPv6(n.join(":"))}static compressIPv6(e){const n=e.split(":");let s=-1,r=0,i=-1,o=0;for(let c=0;c<n.length;c++)n[c]==="0"?(i===-1&&(i=c),o++):(o>r&&(s=i,r=o),i=-1,o=0);if(o>r&&(s=i,r=o),r>1){const c=n.slice(0,s).join(":"),d=n.slice(s+r).join(":");return`${c}::${d}`}return e}static parseCIDR(e){const[n,s]=e.split("/"),r=parseInt(s,10);if(this.isIPv4(n)){if(r<0||r>32)throw new Error("Invalid IPv4 prefix length");return[this.parseIPv4(n),r]}else{if(r<0||r>128)throw new Error("Invalid IPv6 prefix length");return[this.parseIPv6(n),r]}}static decodeIP(e){if(e.length===64&&parseInt(e,16)===0)return"::/0";if(e.length!==16)return e;const n=parseInt(e.slice(8),16).toString(2).split("").reduce((r,i)=>r+ +i,0);let s=e.slice(0,8).replace(/(.{2})/g,r=>`${parseInt(r,16)}.`);return s=s.slice(0,-1),`${s}/${n}`}static toString(e){const n=new Uint8Array(e);if(n.length===4)return Array.from(n).join(".");if(n.length===16)return this.formatIPv6(n);if(n.length===8||n.length===32){const s=n.length/2,r=n.slice(0,s),i=n.slice(s);if(n.every(d=>d===0))return n.length===8?"0.0.0.0/0":"::/0";const c=i.reduce((d,h)=>d+(h.toString(2).match(/1/g)||[]).length,0);return n.length===8?`${Array.from(r).join(".")}/${c}`:`${this.formatIPv6(r)}/${c}`}return this.decodeIP(Ke.ToHex(e))}static fromString(e){if(e.includes("/")){const[s,r]=this.parseCIDR(e),i=new Uint8Array(s.length);let o=r;for(let d=0;d<i.length;d++)o>=8?(i[d]=255,o-=8):o>0&&(i[d]=255<<8-o,o=0);const c=new Uint8Array(s.length*2);return c.set(s,0),c.set(i,s.length),c.buffer}const n=this.isIPv4(e)?this.parseIPv4(e):this.parseIPv6(e);return new Uint8Array(n).buffer}}var g_,y_,b_;let os=class{constructor(e={}){Object.assign(this,e)}toString(){return this.bmpString||this.printableString||this.teletexString||this.universalString||this.utf8String||""}};M([H({type:ne.TeletexString})],os.prototype,"teletexString",void 0);M([H({type:ne.PrintableString})],os.prototype,"printableString",void 0);M([H({type:ne.UniversalString})],os.prototype,"universalString",void 0);M([H({type:ne.Utf8String})],os.prototype,"utf8String",void 0);M([H({type:ne.BmpString})],os.prototype,"bmpString",void 0);os=M([Ne({type:xe.Choice})],os);let Xc=class extends os{constructor(e={}){super(e),Object.assign(this,e)}toString(){return this.ia5String||(this.anyValue?Ke.ToHex(this.anyValue):super.toString())}};M([H({type:ne.IA5String})],Xc.prototype,"ia5String",void 0);M([H({type:ne.Any})],Xc.prototype,"anyValue",void 0);Xc=M([Ne({type:xe.Choice})],Xc);class py{constructor(e={}){this.type="",this.value=new Xc,Object.assign(this,e)}}M([H({type:ne.ObjectIdentifier})],py.prototype,"type",void 0);M([H({type:Xc})],py.prototype,"value",void 0);let Jc=g_=class extends Lt{constructor(e){super(e),Object.setPrototypeOf(this,g_.prototype)}};Jc=g_=M([Ne({type:xe.Set,itemType:py})],Jc);let v_=y_=class extends Lt{constructor(e){super(e),Object.setPrototypeOf(this,y_.prototype)}};v_=y_=M([Ne({type:xe.Sequence,itemType:Jc})],v_);let Dn=b_=class extends v_{constructor(e){super(e),Object.setPrototypeOf(this,b_.prototype)}};Dn=b_=M([Ne({type:xe.Sequence})],Dn);const rG={fromASN:t=>TE.toString(H0.fromASN(t)),toASN:t=>H0.toASN(TE.fromString(t))};class sf{constructor(e={}){this.typeId="",this.value=new ArrayBuffer(0),Object.assign(this,e)}}M([H({type:ne.ObjectIdentifier})],sf.prototype,"typeId",void 0);M([H({type:ne.Any,context:0})],sf.prototype,"value",void 0);class L2{constructor(e={}){this.partyName=new os,Object.assign(this,e)}}M([H({type:os,optional:!0,context:0,implicit:!0})],L2.prototype,"nameAssigner",void 0);M([H({type:os,context:1,implicit:!0})],L2.prototype,"partyName",void 0);let ut=class{constructor(e={}){Object.assign(this,e)}};M([H({type:sf,context:0,implicit:!0})],ut.prototype,"otherName",void 0);M([H({type:ne.IA5String,context:1,implicit:!0})],ut.prototype,"rfc822Name",void 0);M([H({type:ne.IA5String,context:2,implicit:!0})],ut.prototype,"dNSName",void 0);M([H({type:ne.Any,context:3,implicit:!0})],ut.prototype,"x400Address",void 0);M([H({type:Dn,context:4,implicit:!1})],ut.prototype,"directoryName",void 0);M([H({type:L2,context:5})],ut.prototype,"ediPartyName",void 0);M([H({type:ne.IA5String,context:6,implicit:!0})],ut.prototype,"uniformResourceIdentifier",void 0);M([H({type:ne.OctetString,context:7,implicit:!0,converter:rG})],ut.prototype,"iPAddress",void 0);M([H({type:ne.ObjectIdentifier,context:8,implicit:!0})],ut.prototype,"registeredID",void 0);ut=M([Ne({type:xe.Choice})],ut);const I2="1.3.6.1.5.5.7",iG=`${I2}.1`,Su=`${I2}.3`,my=`${I2}.48`,RE=`${my}.1`,OE=`${my}.2`,ME=`${my}.3`,BE=`${my}.5`,ma="2.5.29";var x_;const __=`${iG}.1`;class Bf{constructor(e={}){this.accessMethod="",this.accessLocation=new ut,Object.assign(this,e)}}M([H({type:ne.ObjectIdentifier})],Bf.prototype,"accessMethod",void 0);M([H({type:ut})],Bf.prototype,"accessLocation",void 0);let Dc=x_=class extends Lt{constructor(e){super(e),Object.setPrototypeOf(this,x_.prototype)}};Dc=x_=M([Ne({type:xe.Sequence,itemType:Bf})],Dc);const w_=`${ma}.35`;class P2 extends jt{}class Ko{constructor(e={}){e&&Object.assign(this,e)}}M([H({type:P2,context:0,optional:!0,implicit:!0})],Ko.prototype,"keyIdentifier",void 0);M([H({type:ut,context:1,optional:!0,implicit:!0,repeated:"sequence"})],Ko.prototype,"authorityCertIssuer",void 0);M([H({type:ne.Integer,context:2,optional:!0,implicit:!0,converter:Zt})],Ko.prototype,"authorityCertSerialNumber",void 0);const IM=`${ma}.19`;class U0{constructor(e={}){this.cA=!1,Object.assign(this,e)}}M([H({type:ne.Boolean,defaultValue:!1})],U0.prototype,"cA",void 0);M([H({type:ne.Integer,optional:!0})],U0.prototype,"pathLenConstraint",void 0);var S_;let ps=S_=class extends Lt{constructor(e){super(e),Object.setPrototypeOf(this,S_.prototype)}};ps=S_=M([Ne({type:xe.Sequence,itemType:ut})],ps);var k_;let DE=k_=class extends ps{constructor(e){super(e),Object.setPrototypeOf(this,k_.prototype)}};DE=k_=M([Ne({type:xe.Sequence})],DE);var C_;const PM=`${ma}.32`;let ra=class{constructor(e={}){Object.assign(this,e)}toString(){return this.ia5String||this.visibleString||this.bmpString||this.utf8String||""}};M([H({type:ne.IA5String})],ra.prototype,"ia5String",void 0);M([H({type:ne.VisibleString})],ra.prototype,"visibleString",void 0);M([H({type:ne.BmpString})],ra.prototype,"bmpString",void 0);M([H({type:ne.Utf8String})],ra.prototype,"utf8String",void 0);ra=M([Ne({type:xe.Choice})],ra);class $2{constructor(e={}){this.organization=new ra,this.noticeNumbers=[],Object.assign(this,e)}}M([H({type:ra})],$2.prototype,"organization",void 0);M([H({type:ne.Integer,repeated:"sequence"})],$2.prototype,"noticeNumbers",void 0);class z2{constructor(e={}){Object.assign(this,e)}}M([H({type:$2,optional:!0})],z2.prototype,"noticeRef",void 0);M([H({type:ra,optional:!0})],z2.prototype,"explicitText",void 0);let V0=class{constructor(e={}){Object.assign(this,e)}};M([H({type:ne.IA5String})],V0.prototype,"cPSuri",void 0);M([H({type:z2})],V0.prototype,"userNotice",void 0);V0=M([Ne({type:xe.Choice})],V0);class H2{constructor(e={}){this.policyQualifierId="",this.qualifier=new ArrayBuffer(0),Object.assign(this,e)}}M([H({type:ne.ObjectIdentifier})],H2.prototype,"policyQualifierId",void 0);M([H({type:ne.Any})],H2.prototype,"qualifier",void 0);class gy{constructor(e={}){this.policyIdentifier="",Object.assign(this,e)}}M([H({type:ne.ObjectIdentifier})],gy.prototype,"policyIdentifier",void 0);M([H({type:H2,repeated:"sequence",optional:!0})],gy.prototype,"policyQualifiers",void 0);let F0=C_=class extends Lt{constructor(e){super(e),Object.setPrototypeOf(this,C_.prototype)}};F0=C_=M([Ne({type:xe.Sequence,itemType:gy})],F0);let q0=class{constructor(e=0){this.value=e}};M([H({type:ne.Integer})],q0.prototype,"value",void 0);q0=M([Ne({type:xe.Choice})],q0);let LE=class extends q0{};LE=M([Ne({type:xe.Choice})],LE);var N_;const A_=`${ma}.31`;var Fr;(function(t){t[t.unused=1]="unused",t[t.keyCompromise=2]="keyCompromise",t[t.cACompromise=4]="cACompromise",t[t.affiliationChanged=8]="affiliationChanged",t[t.superseded=16]="superseded",t[t.cessationOfOperation=32]="cessationOfOperation",t[t.certificateHold=64]="certificateHold",t[t.privilegeWithdrawn=128]="privilegeWithdrawn",t[t.aACompromise=256]="aACompromise"})(Fr||(Fr={}));class $M extends fy{toJSON(){const e=[],n=this.toNumber();return n&Fr.aACompromise&&e.push("aACompromise"),n&Fr.affiliationChanged&&e.push("affiliationChanged"),n&Fr.cACompromise&&e.push("cACompromise"),n&Fr.certificateHold&&e.push("certificateHold"),n&Fr.cessationOfOperation&&e.push("cessationOfOperation"),n&Fr.keyCompromise&&e.push("keyCompromise"),n&Fr.privilegeWithdrawn&&e.push("privilegeWithdrawn"),n&Fr.superseded&&e.push("superseded"),n&Fr.unused&&e.push("unused"),e}toString(){return`[${this.toJSON().join(", ")}]`}}let cl=class{constructor(e={}){Object.assign(this,e)}};M([H({type:ut,context:0,repeated:"sequence",implicit:!0})],cl.prototype,"fullName",void 0);M([H({type:Jc,context:1,implicit:!0})],cl.prototype,"nameRelativeToCRLIssuer",void 0);cl=M([Ne({type:xe.Choice})],cl);class ku{constructor(e={}){Object.assign(this,e)}}M([H({type:cl,context:0,optional:!0})],ku.prototype,"distributionPoint",void 0);M([H({type:$M,context:1,optional:!0,implicit:!0})],ku.prototype,"reasons",void 0);M([H({type:ut,context:2,optional:!0,repeated:"sequence",implicit:!0})],ku.prototype,"cRLIssuer",void 0);let qc=N_=class extends Lt{constructor(e){super(e),Object.setPrototypeOf(this,N_.prototype)}};qc=N_=M([Ne({type:xe.Sequence,itemType:ku})],qc);var E_;let IE=E_=class extends qc{constructor(e){super(e),Object.setPrototypeOf(this,E_.prototype)}};IE=E_=M([Ne({type:xe.Sequence,itemType:ku})],IE);class fs{constructor(e={}){this.onlyContainsUserCerts=fs.ONLY,this.onlyContainsCACerts=fs.ONLY,this.indirectCRL=fs.ONLY,this.onlyContainsAttributeCerts=fs.ONLY,Object.assign(this,e)}}fs.ONLY=!1;M([H({type:cl,context:0,optional:!0})],fs.prototype,"distributionPoint",void 0);M([H({type:ne.Boolean,context:1,defaultValue:fs.ONLY,implicit:!0})],fs.prototype,"onlyContainsUserCerts",void 0);M([H({type:ne.Boolean,context:2,defaultValue:fs.ONLY,implicit:!0})],fs.prototype,"onlyContainsCACerts",void 0);M([H({type:$M,context:3,optional:!0,implicit:!0})],fs.prototype,"onlySomeReasons",void 0);M([H({type:ne.Boolean,context:4,defaultValue:fs.ONLY,implicit:!0})],fs.prototype,"indirectCRL",void 0);M([H({type:ne.Boolean,context:5,defaultValue:fs.ONLY,implicit:!0})],fs.prototype,"onlyContainsAttributeCerts",void 0);var $d;(function(t){t[t.unspecified=0]="unspecified",t[t.keyCompromise=1]="keyCompromise",t[t.cACompromise=2]="cACompromise",t[t.affiliationChanged=3]="affiliationChanged",t[t.superseded=4]="superseded",t[t.cessationOfOperation=5]="cessationOfOperation",t[t.certificateHold=6]="certificateHold",t[t.removeFromCRL=8]="removeFromCRL",t[t.privilegeWithdrawn=9]="privilegeWithdrawn",t[t.aACompromise=10]="aACompromise"})($d||($d={}));let j_=class{constructor(e=$d.unspecified){this.reason=$d.unspecified,this.reason=e}toJSON(){return $d[this.reason]}toString(){return this.toJSON()}};M([H({type:ne.Enumerated})],j_.prototype,"reason",void 0);j_=M([Ne({type:xe.Choice})],j_);var T_;const zM=`${ma}.37`;let K0=T_=class extends Lt{constructor(e){super(e),Object.setPrototypeOf(this,T_.prototype)}};K0=T_=M([Ne({type:xe.Sequence,itemType:ne.ObjectIdentifier})],K0);const aG=`${Su}.1`,oG=`${Su}.2`,lG=`${Su}.3`,cG=`${Su}.4`,uG=`${Su}.8`,hG=`${Su}.9`;let R_=class{constructor(e=new ArrayBuffer(0)){this.value=e}};M([H({type:ne.Integer,converter:Zt})],R_.prototype,"value",void 0);R_=M([Ne({type:xe.Choice})],R_);let O_=class{constructor(e){this.value=new Date,e&&(this.value=e)}};M([H({type:ne.GeneralizedTime})],O_.prototype,"value",void 0);O_=M([Ne({type:xe.Choice})],O_);var M_;const HM=`${ma}.18`;let PE=M_=class extends ps{constructor(e){super(e),Object.setPrototypeOf(this,M_.prototype)}};PE=M_=M([Ne({type:xe.Sequence})],PE);const UM=`${ma}.15`;var qr;(function(t){t[t.digitalSignature=1]="digitalSignature",t[t.nonRepudiation=2]="nonRepudiation",t[t.keyEncipherment=4]="keyEncipherment",t[t.dataEncipherment=8]="dataEncipherment",t[t.keyAgreement=16]="keyAgreement",t[t.keyCertSign=32]="keyCertSign",t[t.cRLSign=64]="cRLSign",t[t.encipherOnly=128]="encipherOnly",t[t.decipherOnly=256]="decipherOnly"})(qr||(qr={}));class tx extends fy{toJSON(){const e=this.toNumber(),n=[];return e&qr.cRLSign&&n.push("crlSign"),e&qr.dataEncipherment&&n.push("dataEncipherment"),e&qr.decipherOnly&&n.push("decipherOnly"),e&qr.digitalSignature&&n.push("digitalSignature"),e&qr.encipherOnly&&n.push("encipherOnly"),e&qr.keyAgreement&&n.push("keyAgreement"),e&qr.keyCertSign&&n.push("keyCertSign"),e&qr.keyEncipherment&&n.push("keyEncipherment"),e&qr.nonRepudiation&&n.push("nonRepudiation"),n}toString(){return`[${this.toJSON().join(", ")}]`}}var B_;class yy{constructor(e={}){this.base=new ut,this.minimum=0,Object.assign(this,e)}}M([H({type:ut})],yy.prototype,"base",void 0);M([H({type:ne.Integer,context:0,defaultValue:0,implicit:!0})],yy.prototype,"minimum",void 0);M([H({type:ne.Integer,context:1,optional:!0,implicit:!0})],yy.prototype,"maximum",void 0);let W0=B_=class extends Lt{constructor(e){super(e),Object.setPrototypeOf(this,B_.prototype)}};W0=B_=M([Ne({type:xe.Sequence,itemType:yy})],W0);class VM{constructor(e={}){Object.assign(this,e)}}M([H({type:W0,context:0,optional:!0,implicit:!0})],VM.prototype,"permittedSubtrees",void 0);M([H({type:W0,context:1,optional:!0,implicit:!0})],VM.prototype,"excludedSubtrees",void 0);class FM{constructor(e={}){Object.assign(this,e)}}M([H({type:ne.Integer,context:0,implicit:!0,optional:!0,converter:Zt})],FM.prototype,"requireExplicitPolicy",void 0);M([H({type:ne.Integer,context:1,implicit:!0,optional:!0,converter:Zt})],FM.prototype,"inhibitPolicyMapping",void 0);var D_;class U2{constructor(e={}){this.issuerDomainPolicy="",this.subjectDomainPolicy="",Object.assign(this,e)}}M([H({type:ne.ObjectIdentifier})],U2.prototype,"issuerDomainPolicy",void 0);M([H({type:ne.ObjectIdentifier})],U2.prototype,"subjectDomainPolicy",void 0);let $E=D_=class extends Lt{constructor(e){super(e),Object.setPrototypeOf(this,D_.prototype)}};$E=D_=M([Ne({type:xe.Sequence,itemType:U2})],$E);var L_;const qM=`${ma}.17`;let I_=L_=class extends ps{constructor(e){super(e),Object.setPrototypeOf(this,L_.prototype)}};I_=L_=M([Ne({type:xe.Sequence})],I_);let ia=class{constructor(e={}){this.type="",this.values=[],Object.assign(this,e)}};M([H({type:ne.ObjectIdentifier})],ia.prototype,"type",void 0);M([H({type:ne.Any,repeated:"set"})],ia.prototype,"values",void 0);var P_;let zE=P_=class extends Lt{constructor(e){super(e),Object.setPrototypeOf(this,P_.prototype)}};zE=P_=M([Ne({type:xe.Sequence,itemType:ia})],zE);const KM=`${ma}.14`;class ao extends P2{}class WM{constructor(e={}){Object.assign(this,e)}}M([H({type:ne.GeneralizedTime,context:0,implicit:!0,optional:!0})],WM.prototype,"notBefore",void 0);M([H({type:ne.GeneralizedTime,context:1,implicit:!0,optional:!0})],WM.prototype,"notAfter",void 0);var zd;(function(t){t[t.keyUpdateAllowed=1]="keyUpdateAllowed",t[t.newExtensions=2]="newExtensions",t[t.pKIXCertificate=4]="pKIXCertificate"})(zd||(zd={}));class GM extends fy{toJSON(){const e=[],n=this.toNumber();return n&zd.pKIXCertificate&&e.push("pKIXCertificate"),n&zd.newExtensions&&e.push("newExtensions"),n&zd.keyUpdateAllowed&&e.push("keyUpdateAllowed"),e}toString(){return`[${this.toJSON().join(", ")}]`}}class YM{constructor(e={}){this.entrustVers="",this.entrustInfoFlags=new GM,Object.assign(this,e)}}M([H({type:ne.GeneralString})],YM.prototype,"entrustVers",void 0);M([H({type:GM})],YM.prototype,"entrustInfoFlags",void 0);var $_;let HE=$_=class extends Lt{constructor(e){super(e),Object.setPrototypeOf(this,$_.prototype)}};HE=$_=M([Ne({type:xe.Sequence,itemType:Bf})],HE);class Ie{constructor(e={}){this.algorithm="",Object.assign(this,e)}isEqual(e){return e instanceof Ie&&e.algorithm==this.algorithm&&(e.parameters&&this.parameters&&PO(e.parameters,this.parameters)||e.parameters===this.parameters)}}M([H({type:ne.ObjectIdentifier})],Ie.prototype,"algorithm",void 0);M([H({type:ne.Any,optional:!0})],Ie.prototype,"parameters",void 0);class mi{constructor(e={}){this.algorithm=new Ie,this.subjectPublicKey=new ArrayBuffer(0),Object.assign(this,e)}}M([H({type:Ie})],mi.prototype,"algorithm",void 0);M([H({type:ne.BitString})],mi.prototype,"subjectPublicKey",void 0);let ss=class{constructor(e){if(e)if(typeof e=="string"||typeof e=="number"||e instanceof Date){const n=new Date(e);n.getUTCFullYear()>2049?this.generalTime=n:this.utcTime=n}else Object.assign(this,e)}getTime(){const e=this.utcTime||this.generalTime;if(!e)throw new Error("Cannot get time from CHOICE object");return e}};M([H({type:ne.UTCTime})],ss.prototype,"utcTime",void 0);M([H({type:ne.GeneralizedTime})],ss.prototype,"generalTime",void 0);ss=M([Ne({type:xe.Choice})],ss);class by{constructor(e){this.notBefore=new ss(new Date),this.notAfter=new ss(new Date),e&&(this.notBefore=new ss(e.notBefore),this.notAfter=new ss(e.notAfter))}}M([H({type:ss})],by.prototype,"notBefore",void 0);M([H({type:ss})],by.prototype,"notAfter",void 0);var z_;let Jr=class XM{constructor(e={}){this.extnID="",this.critical=XM.CRITICAL,this.extnValue=new jt,Object.assign(this,e)}};Jr.CRITICAL=!1;M([H({type:ne.ObjectIdentifier})],Jr.prototype,"extnID",void 0);M([H({type:ne.Boolean,defaultValue:Jr.CRITICAL})],Jr.prototype,"critical",void 0);M([H({type:jt})],Jr.prototype,"extnValue",void 0);let ul=z_=class extends Lt{constructor(e){super(e),Object.setPrototypeOf(this,z_.prototype)}};ul=z_=M([Ne({type:xe.Sequence,itemType:Jr})],ul);var Qc;(function(t){t[t.v1=0]="v1",t[t.v2=1]="v2",t[t.v3=2]="v3"})(Qc||(Qc={}));class $r{constructor(e={}){this.version=Qc.v1,this.serialNumber=new ArrayBuffer(0),this.signature=new Ie,this.issuer=new Dn,this.validity=new by,this.subject=new Dn,this.subjectPublicKeyInfo=new mi,Object.assign(this,e)}}M([H({type:ne.Integer,context:0,defaultValue:Qc.v1})],$r.prototype,"version",void 0);M([H({type:ne.Integer,converter:Zt})],$r.prototype,"serialNumber",void 0);M([H({type:Ie})],$r.prototype,"signature",void 0);M([H({type:Dn})],$r.prototype,"issuer",void 0);M([H({type:by})],$r.prototype,"validity",void 0);M([H({type:Dn})],$r.prototype,"subject",void 0);M([H({type:mi})],$r.prototype,"subjectPublicKeyInfo",void 0);M([H({type:ne.BitString,context:1,implicit:!0,optional:!0})],$r.prototype,"issuerUniqueID",void 0);M([H({type:ne.BitString,context:2,implicit:!0,optional:!0})],$r.prototype,"subjectUniqueID",void 0);M([H({type:ul,context:3,optional:!0})],$r.prototype,"extensions",void 0);class Zc{constructor(e={}){this.tbsCertificate=new $r,this.signatureAlgorithm=new Ie,this.signatureValue=new ArrayBuffer(0),Object.assign(this,e)}}M([H({type:$r,raw:!0})],Zc.prototype,"tbsCertificate",void 0);M([H({type:Ie})],Zc.prototype,"signatureAlgorithm",void 0);M([H({type:ne.BitString})],Zc.prototype,"signatureValue",void 0);class vy{constructor(e={}){this.userCertificate=new ArrayBuffer(0),this.revocationDate=new ss,Object.assign(this,e)}}M([H({type:ne.Integer,converter:Zt})],vy.prototype,"userCertificate",void 0);M([H({type:ss})],vy.prototype,"revocationDate",void 0);M([H({type:Jr,optional:!0,repeated:"sequence"})],vy.prototype,"crlEntryExtensions",void 0);class ga{constructor(e={}){this.signature=new Ie,this.issuer=new Dn,this.thisUpdate=new ss,Object.assign(this,e)}}M([H({type:ne.Integer,optional:!0})],ga.prototype,"version",void 0);M([H({type:Ie})],ga.prototype,"signature",void 0);M([H({type:Dn})],ga.prototype,"issuer",void 0);M([H({type:ss})],ga.prototype,"thisUpdate",void 0);M([H({type:ss,optional:!0})],ga.prototype,"nextUpdate",void 0);M([H({type:vy,repeated:"sequence",optional:!0})],ga.prototype,"revokedCertificates",void 0);M([H({type:Jr,optional:!0,context:0,repeated:"sequence"})],ga.prototype,"crlExtensions",void 0);class V2{constructor(e={}){this.tbsCertList=new ga,this.signatureAlgorithm=new Ie,this.signature=new ArrayBuffer(0),Object.assign(this,e)}}M([H({type:ga,raw:!0})],V2.prototype,"tbsCertList",void 0);M([H({type:Ie})],V2.prototype,"signatureAlgorithm",void 0);M([H({type:ne.BitString})],V2.prototype,"signature",void 0);class Cu{constructor(e={}){this.issuer=new Dn,this.serialNumber=new ArrayBuffer(0),Object.assign(this,e)}}M([H({type:Dn})],Cu.prototype,"issuer",void 0);M([H({type:ne.Integer,converter:Zt})],Cu.prototype,"serialNumber",void 0);let eu=class{constructor(e={}){Object.assign(this,e)}};M([H({type:ao,context:0,implicit:!0})],eu.prototype,"subjectKeyIdentifier",void 0);M([H({type:Cu})],eu.prototype,"issuerAndSerialNumber",void 0);eu=M([Ne({type:xe.Choice})],eu);var aa;(function(t){t[t.v0=0]="v0",t[t.v1=1]="v1",t[t.v2=2]="v2",t[t.v3=3]="v3",t[t.v4=4]="v4",t[t.v5=5]="v5"})(aa||(aa={}));let rf=class extends Ie{};rf=M([Ne({type:xe.Sequence})],rf);let G0=class extends Ie{};G0=M([Ne({type:xe.Sequence})],G0);let _i=class extends Ie{};_i=M([Ne({type:xe.Sequence})],_i);let Y0=class extends Ie{};Y0=M([Ne({type:xe.Sequence})],Y0);let UE=class extends Ie{};UE=M([Ne({type:xe.Sequence})],UE);let H_=class extends Ie{};H_=M([Ne({type:xe.Sequence})],H_);let Nu=class{constructor(e={}){this.attrType="",this.attrValues=[],Object.assign(this,e)}};M([H({type:ne.ObjectIdentifier})],Nu.prototype,"attrType",void 0);M([H({type:ne.Any,repeated:"set"})],Nu.prototype,"attrValues",void 0);var U_;class Ai{constructor(e={}){this.version=aa.v0,this.sid=new eu,this.digestAlgorithm=new rf,this.signatureAlgorithm=new G0,this.signature=new jt,Object.assign(this,e)}}M([H({type:ne.Integer})],Ai.prototype,"version",void 0);M([H({type:eu})],Ai.prototype,"sid",void 0);M([H({type:rf})],Ai.prototype,"digestAlgorithm",void 0);M([H({type:Nu,repeated:"set",context:0,implicit:!0,optional:!0,raw:!0})],Ai.prototype,"signedAttrs",void 0);M([H({type:G0})],Ai.prototype,"signatureAlgorithm",void 0);M([H({type:jt})],Ai.prototype,"signature",void 0);M([H({type:Nu,repeated:"set",context:1,implicit:!0,optional:!0})],Ai.prototype,"unsignedAttrs",void 0);let X0=U_=class extends Lt{constructor(e){super(e),Object.setPrototypeOf(this,U_.prototype)}};X0=U_=M([Ne({type:xe.Set,itemType:Ai})],X0);let VE=class extends Ai{};VE=M([Ne({type:xe.Sequence})],VE);let FE=class extends ss{};FE=M([Ne({type:xe.Choice})],FE);class F2{constructor(e={}){this.acIssuer=new ut,this.acSerial=0,this.attrs=[],Object.assign(this,e)}}M([H({type:ut})],F2.prototype,"acIssuer",void 0);M([H({type:ne.Integer})],F2.prototype,"acSerial",void 0);M([H({type:ia,repeated:"sequence"})],F2.prototype,"attrs",void 0);var V_;let J0=V_=class extends Lt{constructor(e){super(e),Object.setPrototypeOf(this,V_.prototype)}};J0=V_=M([Ne({type:xe.Sequence,itemType:ne.ObjectIdentifier})],J0);class xy{constructor(e={}){this.permitUnSpecified=!0,Object.assign(this,e)}}M([H({type:ne.Integer,optional:!0})],xy.prototype,"pathLenConstraint",void 0);M([H({type:J0,implicit:!0,context:0,optional:!0})],xy.prototype,"permittedAttrs",void 0);M([H({type:J0,implicit:!0,context:1,optional:!0})],xy.prototype,"excludedAttrs",void 0);M([H({type:ne.Boolean,defaultValue:!0})],xy.prototype,"permitUnSpecified",void 0);class Cl{constructor(e={}){this.issuer=new ps,this.serial=new ArrayBuffer(0),this.issuerUID=new ArrayBuffer(0),Object.assign(this,e)}}M([H({type:ps})],Cl.prototype,"issuer",void 0);M([H({type:ne.Integer,converter:Zt})],Cl.prototype,"serial",void 0);M([H({type:ne.BitString,optional:!0})],Cl.prototype,"issuerUID",void 0);var F_;(function(t){t[t.publicKey=0]="publicKey",t[t.publicKeyCert=1]="publicKeyCert",t[t.otherObjectTypes=2]="otherObjectTypes"})(F_||(F_={}));class Nl{constructor(e={}){this.digestedObjectType=F_.publicKey,this.digestAlgorithm=new Ie,this.objectDigest=new ArrayBuffer(0),Object.assign(this,e)}}M([H({type:ne.Enumerated})],Nl.prototype,"digestedObjectType",void 0);M([H({type:ne.ObjectIdentifier,optional:!0})],Nl.prototype,"otherObjectTypeID",void 0);M([H({type:Ie})],Nl.prototype,"digestAlgorithm",void 0);M([H({type:ne.BitString})],Nl.prototype,"objectDigest",void 0);class _y{constructor(e={}){Object.assign(this,e)}}M([H({type:ps,optional:!0})],_y.prototype,"issuerName",void 0);M([H({type:Cl,context:0,implicit:!0,optional:!0})],_y.prototype,"baseCertificateID",void 0);M([H({type:Nl,context:1,implicit:!0,optional:!0})],_y.prototype,"objectDigestInfo",void 0);let tu=class{constructor(e={}){Object.assign(this,e)}};M([H({type:ut,repeated:"sequence"})],tu.prototype,"v1Form",void 0);M([H({type:_y,context:0,implicit:!0})],tu.prototype,"v2Form",void 0);tu=M([Ne({type:xe.Choice})],tu);class wy{constructor(e={}){this.notBeforeTime=new Date,this.notAfterTime=new Date,Object.assign(this,e)}}M([H({type:ne.GeneralizedTime})],wy.prototype,"notBeforeTime",void 0);M([H({type:ne.GeneralizedTime})],wy.prototype,"notAfterTime",void 0);class Df{constructor(e={}){Object.assign(this,e)}}M([H({type:Cl,implicit:!0,context:0,optional:!0})],Df.prototype,"baseCertificateID",void 0);M([H({type:ps,implicit:!0,context:1,optional:!0})],Df.prototype,"entityName",void 0);M([H({type:Nl,implicit:!0,context:2,optional:!0})],Df.prototype,"objectDigestInfo",void 0);var q_;(function(t){t[t.v2=1]="v2"})(q_||(q_={}));class ti{constructor(e={}){this.version=q_.v2,this.holder=new Df,this.issuer=new tu,this.signature=new Ie,this.serialNumber=new ArrayBuffer(0),this.attrCertValidityPeriod=new wy,this.attributes=[],Object.assign(this,e)}}M([H({type:ne.Integer})],ti.prototype,"version",void 0);M([H({type:Df})],ti.prototype,"holder",void 0);M([H({type:tu})],ti.prototype,"issuer",void 0);M([H({type:Ie})],ti.prototype,"signature",void 0);M([H({type:ne.Integer,converter:Zt})],ti.prototype,"serialNumber",void 0);M([H({type:wy})],ti.prototype,"attrCertValidityPeriod",void 0);M([H({type:ia,repeated:"sequence"})],ti.prototype,"attributes",void 0);M([H({type:ne.BitString,optional:!0})],ti.prototype,"issuerUniqueID",void 0);M([H({type:ul,optional:!0})],ti.prototype,"extensions",void 0);class Sy{constructor(e={}){this.acinfo=new ti,this.signatureAlgorithm=new Ie,this.signatureValue=new ArrayBuffer(0),Object.assign(this,e)}}M([H({type:ti})],Sy.prototype,"acinfo",void 0);M([H({type:Ie})],Sy.prototype,"signatureAlgorithm",void 0);M([H({type:ne.BitString})],Sy.prototype,"signatureValue",void 0);var Q0;(function(t){t[t.unmarked=1]="unmarked",t[t.unclassified=2]="unclassified",t[t.restricted=4]="restricted",t[t.confidential=8]="confidential",t[t.secret=16]="secret",t[t.topSecret=32]="topSecret"})(Q0||(Q0={}));class K_ extends fy{}class q2{constructor(e={}){this.type="",this.value=new ArrayBuffer(0),Object.assign(this,e)}}M([H({type:ne.ObjectIdentifier,implicit:!0,context:0})],q2.prototype,"type",void 0);M([H({type:ne.Any,implicit:!0,context:1})],q2.prototype,"value",void 0);class K2{constructor(e={}){this.policyId="",this.classList=new K_(Q0.unclassified),Object.assign(this,e)}}M([H({type:ne.ObjectIdentifier})],K2.prototype,"policyId",void 0);M([H({type:K_,defaultValue:new K_(Q0.unclassified)})],K2.prototype,"classList",void 0);M([H({type:q2,repeated:"set"})],K2.prototype,"securityCategories",void 0);class ky{constructor(e={}){Object.assign(this,e)}}M([H({type:jt})],ky.prototype,"cotets",void 0);M([H({type:ne.ObjectIdentifier})],ky.prototype,"oid",void 0);M([H({type:ne.Utf8String})],ky.prototype,"string",void 0);class JM{constructor(e={}){this.values=[],Object.assign(this,e)}}M([H({type:ps,implicit:!0,context:0,optional:!0})],JM.prototype,"policyAuthority",void 0);M([H({type:ky,repeated:"sequence"})],JM.prototype,"values",void 0);var W_;class Cy{constructor(e={}){this.targetCertificate=new Cl,Object.assign(this,e)}}M([H({type:Cl})],Cy.prototype,"targetCertificate",void 0);M([H({type:ut,optional:!0})],Cy.prototype,"targetName",void 0);M([H({type:Nl,optional:!0})],Cy.prototype,"certDigestInfo",void 0);let nu=class{constructor(e={}){Object.assign(this,e)}};M([H({type:ut,context:0,implicit:!0})],nu.prototype,"targetName",void 0);M([H({type:ut,context:1,implicit:!0})],nu.prototype,"targetGroup",void 0);M([H({type:Cy,context:2,implicit:!0})],nu.prototype,"targetCert",void 0);nu=M([Ne({type:xe.Choice})],nu);let G_=W_=class extends Lt{constructor(e){super(e),Object.setPrototypeOf(this,W_.prototype)}};G_=W_=M([Ne({type:xe.Sequence,itemType:nu})],G_);var Y_;let qE=Y_=class extends Lt{constructor(e){super(e),Object.setPrototypeOf(this,Y_.prototype)}};qE=Y_=M([Ne({type:xe.Sequence,itemType:G_})],qE);class QM{constructor(e={}){Object.assign(this,e)}}M([H({type:ps,implicit:!0,context:0,optional:!0})],QM.prototype,"roleAuthority",void 0);M([H({type:ut,implicit:!0,context:1})],QM.prototype,"roleName",void 0);class W2{constructor(e={}){this.service=new ut,this.ident=new ut,Object.assign(this,e)}}M([H({type:ut})],W2.prototype,"service",void 0);M([H({type:ut})],W2.prototype,"ident",void 0);M([H({type:jt,optional:!0})],W2.prototype,"authInfo",void 0);var X_;class G2{constructor(e={}){this.otherCertFormat="",this.otherCert=new ArrayBuffer(0),Object.assign(this,e)}}M([H({type:ne.ObjectIdentifier})],G2.prototype,"otherCertFormat",void 0);M([H({type:ne.Any})],G2.prototype,"otherCert",void 0);let su=class{constructor(e={}){Object.assign(this,e)}};M([H({type:Zc})],su.prototype,"certificate",void 0);M([H({type:Sy,context:2,implicit:!0})],su.prototype,"v2AttrCert",void 0);M([H({type:G2,context:3,implicit:!0})],su.prototype,"other",void 0);su=M([Ne({type:xe.Choice})],su);let Z0=X_=class extends Lt{constructor(e){super(e),Object.setPrototypeOf(this,X_.prototype)}};Z0=X_=M([Ne({type:xe.Set,itemType:su})],Z0);class Au{constructor(e={}){this.contentType="",this.content=new ArrayBuffer(0),Object.assign(this,e)}}M([H({type:ne.ObjectIdentifier})],Au.prototype,"contentType",void 0);M([H({type:ne.Any,context:0})],Au.prototype,"content",void 0);let af=class{constructor(e={}){Object.assign(this,e)}};M([H({type:jt})],af.prototype,"single",void 0);M([H({type:ne.Any})],af.prototype,"any",void 0);af=M([Ne({type:xe.Choice})],af);class Ny{constructor(e={}){this.eContentType="",Object.assign(this,e)}}M([H({type:ne.ObjectIdentifier})],Ny.prototype,"eContentType",void 0);M([H({type:af,context:0,optional:!0})],Ny.prototype,"eContent",void 0);let of=class{constructor(e={}){Object.assign(this,e)}};M([H({type:jt,context:0,implicit:!0,optional:!0})],of.prototype,"value",void 0);M([H({type:jt,converter:zW,context:0,implicit:!0,optional:!0,repeated:"sequence"})],of.prototype,"constructedValue",void 0);of=M([Ne({type:xe.Choice})],of);class Lf{constructor(e={}){this.contentType="",this.contentEncryptionAlgorithm=new Y0,Object.assign(this,e)}}M([H({type:ne.ObjectIdentifier})],Lf.prototype,"contentType",void 0);M([H({type:Y0})],Lf.prototype,"contentEncryptionAlgorithm",void 0);M([H({type:of,optional:!0})],Lf.prototype,"encryptedContent",void 0);class Ay{constructor(e={}){this.keyAttrId="",Object.assign(this,e)}}M([H({type:ne.ObjectIdentifier})],Ay.prototype,"keyAttrId",void 0);M([H({type:ne.Any,optional:!0})],Ay.prototype,"keyAttr",void 0);var J_;class Ey{constructor(e={}){this.subjectKeyIdentifier=new ao,Object.assign(this,e)}}M([H({type:ao})],Ey.prototype,"subjectKeyIdentifier",void 0);M([H({type:ne.GeneralizedTime,optional:!0})],Ey.prototype,"date",void 0);M([H({type:Ay,optional:!0})],Ey.prototype,"other",void 0);let ru=class{constructor(e={}){Object.assign(this,e)}};M([H({type:Ey,context:0,implicit:!0,optional:!0})],ru.prototype,"rKeyId",void 0);M([H({type:Cu,optional:!0})],ru.prototype,"issuerAndSerialNumber",void 0);ru=M([Ne({type:xe.Choice})],ru);class Y2{constructor(e={}){this.rid=new ru,this.encryptedKey=new jt,Object.assign(this,e)}}M([H({type:ru})],Y2.prototype,"rid",void 0);M([H({type:jt})],Y2.prototype,"encryptedKey",void 0);let eg=J_=class extends Lt{constructor(e){super(e),Object.setPrototypeOf(this,J_.prototype)}};eg=J_=M([Ne({type:xe.Sequence,itemType:Y2})],eg);class X2{constructor(e={}){this.algorithm=new Ie,this.publicKey=new ArrayBuffer(0),Object.assign(this,e)}}M([H({type:Ie})],X2.prototype,"algorithm",void 0);M([H({type:ne.BitString})],X2.prototype,"publicKey",void 0);let hl=class{constructor(e={}){Object.assign(this,e)}};M([H({type:ao,context:0,implicit:!0,optional:!0})],hl.prototype,"subjectKeyIdentifier",void 0);M([H({type:X2,context:1,implicit:!0,optional:!0})],hl.prototype,"originatorKey",void 0);M([H({type:Cu,optional:!0})],hl.prototype,"issuerAndSerialNumber",void 0);hl=M([Ne({type:xe.Choice})],hl);class Eu{constructor(e={}){this.version=aa.v3,this.originator=new hl,this.keyEncryptionAlgorithm=new _i,this.recipientEncryptedKeys=new eg,Object.assign(this,e)}}M([H({type:ne.Integer})],Eu.prototype,"version",void 0);M([H({type:hl,context:0})],Eu.prototype,"originator",void 0);M([H({type:jt,context:1,optional:!0})],Eu.prototype,"ukm",void 0);M([H({type:_i})],Eu.prototype,"keyEncryptionAlgorithm",void 0);M([H({type:eg})],Eu.prototype,"recipientEncryptedKeys",void 0);let iu=class{constructor(e={}){Object.assign(this,e)}};M([H({type:ao,context:0,implicit:!0})],iu.prototype,"subjectKeyIdentifier",void 0);M([H({type:Cu})],iu.prototype,"issuerAndSerialNumber",void 0);iu=M([Ne({type:xe.Choice})],iu);class If{constructor(e={}){this.version=aa.v0,this.rid=new iu,this.keyEncryptionAlgorithm=new _i,this.encryptedKey=new jt,Object.assign(this,e)}}M([H({type:ne.Integer})],If.prototype,"version",void 0);M([H({type:iu})],If.prototype,"rid",void 0);M([H({type:_i})],If.prototype,"keyEncryptionAlgorithm",void 0);M([H({type:jt})],If.prototype,"encryptedKey",void 0);class Pf{constructor(e={}){this.keyIdentifier=new jt,Object.assign(this,e)}}M([H({type:jt})],Pf.prototype,"keyIdentifier",void 0);M([H({type:ne.GeneralizedTime,optional:!0})],Pf.prototype,"date",void 0);M([H({type:Ay,optional:!0})],Pf.prototype,"other",void 0);class $f{constructor(e={}){this.version=aa.v4,this.kekid=new Pf,this.keyEncryptionAlgorithm=new _i,this.encryptedKey=new jt,Object.assign(this,e)}}M([H({type:ne.Integer})],$f.prototype,"version",void 0);M([H({type:Pf})],$f.prototype,"kekid",void 0);M([H({type:_i})],$f.prototype,"keyEncryptionAlgorithm",void 0);M([H({type:jt})],$f.prototype,"encryptedKey",void 0);class zf{constructor(e={}){this.version=aa.v0,this.keyEncryptionAlgorithm=new _i,this.encryptedKey=new jt,Object.assign(this,e)}}M([H({type:ne.Integer})],zf.prototype,"version",void 0);M([H({type:H_,context:0,optional:!0})],zf.prototype,"keyDerivationAlgorithm",void 0);M([H({type:_i})],zf.prototype,"keyEncryptionAlgorithm",void 0);M([H({type:jt})],zf.prototype,"encryptedKey",void 0);class J2{constructor(e={}){this.oriType="",this.oriValue=new ArrayBuffer(0),Object.assign(this,e)}}M([H({type:ne.ObjectIdentifier})],J2.prototype,"oriType",void 0);M([H({type:ne.Any})],J2.prototype,"oriValue",void 0);let uo=class{constructor(e={}){Object.assign(this,e)}};M([H({type:If,optional:!0})],uo.prototype,"ktri",void 0);M([H({type:Eu,context:1,implicit:!0,optional:!0})],uo.prototype,"kari",void 0);M([H({type:$f,context:2,implicit:!0,optional:!0})],uo.prototype,"kekri",void 0);M([H({type:zf,context:3,implicit:!0,optional:!0})],uo.prototype,"pwri",void 0);M([H({type:J2,context:4,implicit:!0,optional:!0})],uo.prototype,"ori",void 0);uo=M([Ne({type:xe.Choice})],uo);var Q_;let tg=Q_=class extends Lt{constructor(e){super(e),Object.setPrototypeOf(this,Q_.prototype)}};tg=Q_=M([Ne({type:xe.Set,itemType:uo})],tg);var Z_;class jy{constructor(e={}){this.otherRevInfoFormat="",this.otherRevInfo=new ArrayBuffer(0),Object.assign(this,e)}}M([H({type:ne.ObjectIdentifier})],jy.prototype,"otherRevInfoFormat",void 0);M([H({type:ne.Any})],jy.prototype,"otherRevInfo",void 0);let ng=class{constructor(e={}){this.other=new jy,Object.assign(this,e)}};M([H({type:jy,context:1,implicit:!0})],ng.prototype,"other",void 0);ng=M([Ne({type:xe.Choice})],ng);let sg=Z_=class extends Lt{constructor(e){super(e),Object.setPrototypeOf(this,Z_.prototype)}};sg=Z_=M([Ne({type:xe.Set,itemType:ng})],sg);class Q2{constructor(e={}){Object.assign(this,e)}}M([H({type:Z0,context:0,implicit:!0,optional:!0})],Q2.prototype,"certs",void 0);M([H({type:sg,context:1,implicit:!0,optional:!0})],Q2.prototype,"crls",void 0);var ew;let tw=ew=class extends Lt{constructor(e){super(e),Object.setPrototypeOf(this,ew.prototype)}};tw=ew=M([Ne({type:xe.Set,itemType:Nu})],tw);class Hf{constructor(e={}){this.version=aa.v0,this.recipientInfos=new tg,this.encryptedContentInfo=new Lf,Object.assign(this,e)}}M([H({type:ne.Integer})],Hf.prototype,"version",void 0);M([H({type:Q2,context:0,implicit:!0,optional:!0})],Hf.prototype,"originatorInfo",void 0);M([H({type:tg})],Hf.prototype,"recipientInfos",void 0);M([H({type:Lf})],Hf.prototype,"encryptedContentInfo",void 0);M([H({type:tw,context:1,implicit:!0,optional:!0})],Hf.prototype,"unprotectedAttrs",void 0);const dG="1.2.840.113549.1.7.2";var nw;let rg=nw=class extends Lt{constructor(e){super(e),Object.setPrototypeOf(this,nw.prototype)}};rg=nw=M([Ne({type:xe.Set,itemType:rf})],rg);class ju{constructor(e={}){this.version=aa.v0,this.digestAlgorithms=new rg,this.encapContentInfo=new Ny,this.signerInfos=new X0,Object.assign(this,e)}}M([H({type:ne.Integer})],ju.prototype,"version",void 0);M([H({type:rg})],ju.prototype,"digestAlgorithms",void 0);M([H({type:Ny})],ju.prototype,"encapContentInfo",void 0);M([H({type:Z0,context:0,implicit:!0,optional:!0})],ju.prototype,"certificates",void 0);M([H({type:sg,context:1,implicit:!0,optional:!0})],ju.prototype,"crls",void 0);M([H({type:X0})],ju.prototype,"signerInfos",void 0);const lf="1.2.840.10045.2.1",Z2="1.2.840.10045.4.1",ZM="1.2.840.10045.4.3.1",ek="1.2.840.10045.4.3.2",tk="1.2.840.10045.4.3.3",nk="1.2.840.10045.4.3.4",KE="1.2.840.10045.3.1.7",WE="1.3.132.0.34",GE="1.3.132.0.35";function Uf(t){return new Ie({algorithm:t})}const fG=Uf(Z2);Uf(ZM);const pG=Uf(ek),mG=Uf(tk),gG=Uf(nk);let cf=class{constructor(e={}){Object.assign(this,e)}};M([H({type:ne.ObjectIdentifier})],cf.prototype,"fieldType",void 0);M([H({type:ne.Any})],cf.prototype,"parameters",void 0);cf=M([Ne({type:xe.Sequence})],cf);class yG extends jt{}let au=class{constructor(e={}){Object.assign(this,e)}};M([H({type:ne.OctetString})],au.prototype,"a",void 0);M([H({type:ne.OctetString})],au.prototype,"b",void 0);M([H({type:ne.BitString,optional:!0})],au.prototype,"seed",void 0);au=M([Ne({type:xe.Sequence})],au);var sw;(function(t){t[t.ecpVer1=1]="ecpVer1"})(sw||(sw={}));let oa=class{constructor(e={}){this.version=sw.ecpVer1,Object.assign(this,e)}};M([H({type:ne.Integer})],oa.prototype,"version",void 0);M([H({type:cf})],oa.prototype,"fieldID",void 0);M([H({type:au})],oa.prototype,"curve",void 0);M([H({type:yG})],oa.prototype,"base",void 0);M([H({type:ne.Integer,converter:Zt})],oa.prototype,"order",void 0);M([H({type:ne.Integer,optional:!0})],oa.prototype,"cofactor",void 0);oa=M([Ne({type:xe.Sequence})],oa);let ho=class{constructor(e={}){Object.assign(this,e)}};M([H({type:ne.ObjectIdentifier})],ho.prototype,"namedCurve",void 0);M([H({type:ne.Null})],ho.prototype,"implicitCurve",void 0);M([H({type:oa})],ho.prototype,"specifiedCurve",void 0);ho=M([Ne({type:xe.Choice})],ho);class Ty{constructor(e={}){this.version=1,this.privateKey=new jt,Object.assign(this,e)}}M([H({type:ne.Integer})],Ty.prototype,"version",void 0);M([H({type:jt})],Ty.prototype,"privateKey",void 0);M([H({type:ho,context:0,optional:!0})],Ty.prototype,"parameters",void 0);M([H({type:ne.BitString,context:1,optional:!0})],Ty.prototype,"publicKey",void 0);class ig{constructor(e={}){this.r=new ArrayBuffer(0),this.s=new ArrayBuffer(0),Object.assign(this,e)}}M([H({type:ne.Integer,converter:Zt})],ig.prototype,"r",void 0);M([H({type:ne.Integer,converter:Zt})],ig.prototype,"s",void 0);const qs="1.2.840.113549.1.1",dl=`${qs}.1`,bG=`${qs}.7`,vG=`${qs}.9`,Hd=`${qs}.10`,xG=`${qs}.2`,_G=`${qs}.4`,ag=`${qs}.5`,wG=`${qs}.14`,rw=`${qs}.11`,og=`${qs}.12`,lg=`${qs}.13`,eB=`${qs}.15`,tB=`${qs}.16`,cg="1.3.14.3.2.26",nB="2.16.840.1.101.3.4.2.4",ug="2.16.840.1.101.3.4.2.1",hg="2.16.840.1.101.3.4.2.2",dg="2.16.840.1.101.3.4.2.3",SG="2.16.840.1.101.3.4.2.5",kG="2.16.840.1.101.3.4.2.6",CG="1.2.840.113549.2.2",NG="1.2.840.113549.2.5",Ry=`${qs}.8`;function Pn(t){return new Ie({algorithm:t,parameters:null})}Pn(CG);Pn(NG);const fl=Pn(cg);Pn(nB);Pn(ug);Pn(hg);Pn(dg);Pn(SG);Pn(kG);const sB=new Ie({algorithm:Ry,parameters:Be.serialize(fl)}),rB=new Ie({algorithm:vG,parameters:Be.serialize(H0.toASN(new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer))});Pn(dl);Pn(xG);Pn(_G);Pn(ag);Pn(eB);Pn(tB);Pn(og);Pn(lg);Pn(eB);Pn(tB);class Oy{constructor(e={}){this.hashAlgorithm=new Ie(fl),this.maskGenAlgorithm=new Ie({algorithm:Ry,parameters:Be.serialize(fl)}),this.pSourceAlgorithm=new Ie(rB),Object.assign(this,e)}}M([H({type:Ie,context:0,defaultValue:fl})],Oy.prototype,"hashAlgorithm",void 0);M([H({type:Ie,context:1,defaultValue:sB})],Oy.prototype,"maskGenAlgorithm",void 0);M([H({type:Ie,context:2,defaultValue:rB})],Oy.prototype,"pSourceAlgorithm",void 0);new Ie({algorithm:bG,parameters:Be.serialize(new Oy)});class pl{constructor(e={}){this.hashAlgorithm=new Ie(fl),this.maskGenAlgorithm=new Ie({algorithm:Ry,parameters:Be.serialize(fl)}),this.saltLength=20,this.trailerField=1,Object.assign(this,e)}}M([H({type:Ie,context:0,defaultValue:fl})],pl.prototype,"hashAlgorithm",void 0);M([H({type:Ie,context:1,defaultValue:sB})],pl.prototype,"maskGenAlgorithm",void 0);M([H({type:ne.Integer,context:2,defaultValue:20})],pl.prototype,"saltLength",void 0);M([H({type:ne.Integer,context:3,defaultValue:1})],pl.prototype,"trailerField",void 0);new Ie({algorithm:Hd,parameters:Be.serialize(new pl)});class My{constructor(e={}){this.digestAlgorithm=new Ie,this.digest=new jt,Object.assign(this,e)}}M([H({type:Ie})],My.prototype,"digestAlgorithm",void 0);M([H({type:jt})],My.prototype,"digest",void 0);var iw;class By{constructor(e={}){this.prime=new ArrayBuffer(0),this.exponent=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0),Object.assign(this,e)}}M([H({type:ne.Integer,converter:Zt})],By.prototype,"prime",void 0);M([H({type:ne.Integer,converter:Zt})],By.prototype,"exponent",void 0);M([H({type:ne.Integer,converter:Zt})],By.prototype,"coefficient",void 0);let aw=iw=class extends Lt{constructor(e){super(e),Object.setPrototypeOf(this,iw.prototype)}};aw=iw=M([Ne({type:xe.Sequence,itemType:By})],aw);class Ei{constructor(e={}){this.version=0,this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),this.privateExponent=new ArrayBuffer(0),this.prime1=new ArrayBuffer(0),this.prime2=new ArrayBuffer(0),this.exponent1=new ArrayBuffer(0),this.exponent2=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0),Object.assign(this,e)}}M([H({type:ne.Integer})],Ei.prototype,"version",void 0);M([H({type:ne.Integer,converter:Zt})],Ei.prototype,"modulus",void 0);M([H({type:ne.Integer,converter:Zt})],Ei.prototype,"publicExponent",void 0);M([H({type:ne.Integer,converter:Zt})],Ei.prototype,"privateExponent",void 0);M([H({type:ne.Integer,converter:Zt})],Ei.prototype,"prime1",void 0);M([H({type:ne.Integer,converter:Zt})],Ei.prototype,"prime2",void 0);M([H({type:ne.Integer,converter:Zt})],Ei.prototype,"exponent1",void 0);M([H({type:ne.Integer,converter:Zt})],Ei.prototype,"exponent2",void 0);M([H({type:ne.Integer,converter:Zt})],Ei.prototype,"coefficient",void 0);M([H({type:aw,optional:!0})],Ei.prototype,"otherPrimeInfos",void 0);class sk{constructor(e={}){this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),Object.assign(this,e)}}M([H({type:ne.Integer,converter:Zt})],sk.prototype,"modulus",void 0);M([H({type:ne.Integer,converter:Zt})],sk.prototype,"publicExponent",void 0);var ow;(function(t){t[t.Transient=0]="Transient",t[t.Singleton=1]="Singleton",t[t.ResolutionScoped=2]="ResolutionScoped",t[t.ContainerScoped=3]="ContainerScoped"})(ow||(ow={}));const Ps=ow;var lw=function(t,e){return lw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var r in s)s.hasOwnProperty(r)&&(n[r]=s[r])},lw(t,e)};function rk(t,e){lw(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function AG(t,e,n,s){function r(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function c(g){try{h(s.next(g))}catch(m){o(m)}}function d(g){try{h(s.throw(g))}catch(m){o(m)}}function h(g){g.done?i(g.value):r(g.value).then(c,d)}h((s=s.apply(t,[])).next())})}function EG(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},s,r,i,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(h){return function(g){return d([h,g])}}function d(h){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,r&&(i=h[0]&2?r.return:h[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,h[1])).done)return i;switch(r=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,r=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){n.label=h[1];break}if(h[0]===6&&n.label<i[1]){n.label=i[1],i=h;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(h);break}i[2]&&n.ops.pop(),n.trys.pop();continue}h=e.call(t,n)}catch(g){h=[6,g],r=0}finally{s=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function Em(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function fg(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),r,i=[],o;try{for(;(e===void 0||e-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return i}function Vo(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(fg(arguments[e]));return t}var jG="injectionTokens";function TG(t){var e=Reflect.getMetadata("design:paramtypes",t)||[],n=Reflect.getOwnMetadata(jG,t)||{};return Object.keys(n).forEach(function(s){e[+s]=n[s]}),e}function iB(t){return!!t.useClass}function cw(t){return!!t.useFactory}var aB=(function(){function t(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return t.prototype.createProxy=function(e){var n=this,s={},r=!1,i,o=function(){return r||(i=e(n.wrap()),r=!0),i};return new Proxy(s,this.createHandler(o))},t.prototype.createHandler=function(e){var n={},s=function(r){n[r]=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];i[0]=e();var c=Reflect[r];return c.apply(void 0,Vo(i))}};return this.reflectMethods.forEach(s),n},t})();function xc(t){return typeof t=="string"||typeof t=="symbol"}function RG(t){return typeof t=="object"&&"token"in t&&"multiple"in t}function YE(t){return typeof t=="object"&&"token"in t&&"transform"in t}function OG(t){return typeof t=="function"||t instanceof aB}function i0(t){return!!t.useToken}function a0(t){return t.useValue!=null}function MG(t){return iB(t)||a0(t)||i0(t)||cw(t)}var ik=(function(){function t(){this._registryMap=new Map}return t.prototype.entries=function(){return this._registryMap.entries()},t.prototype.getAll=function(e){return this.ensure(e),this._registryMap.get(e)},t.prototype.get=function(e){this.ensure(e);var n=this._registryMap.get(e);return n[n.length-1]||null},t.prototype.set=function(e,n){this.ensure(e),this._registryMap.get(e).push(n)},t.prototype.setAll=function(e,n){this._registryMap.set(e,n)},t.prototype.has=function(e){return this.ensure(e),this._registryMap.get(e).length>0},t.prototype.clear=function(){this._registryMap.clear()},t.prototype.ensure=function(e){this._registryMap.has(e)||this._registryMap.set(e,[])},t})(),BG=(function(t){rk(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(ik),jm=(function(){function t(){this.scopedResolutions=new Map}return t})();function DG(t,e){if(t===null)return"at position #"+e;var n=t.split(",")[e].trim();return'"'+n+'" at position #'+e}function LG(t,e,n){return n===void 0&&(n="    "),Vo([t],e.message.split(`
`).map(function(s){return n+s})).join(`
`)}function IG(t,e,n){var s=fg(t.toString().match(/constructor\(([\w, ]+)\)/)||[],2),r=s[1],i=r===void 0?null:r,o=DG(i,e);return LG("Cannot inject the dependency "+o+' of "'+t.name+'" constructor. Reason:',n)}function PG(t){if(typeof t.dispose!="function")return!1;var e=t.dispose;return!(e.length>0)}var $G=(function(t){rk(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(ik),zG=(function(t){rk(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(ik),HG=(function(){function t(){this.preResolution=new $G,this.postResolution=new zG}return t})(),oB=new Map,UG=(function(){function t(e){this.parent=e,this._registry=new BG,this.interceptors=new HG,this.disposed=!1,this.disposables=new Set}return t.prototype.register=function(e,n,s){s===void 0&&(s={lifecycle:Ps.Transient}),this.ensureNotDisposed();var r;if(MG(n)?r=n:r={useClass:n},i0(r))for(var i=[e],o=r;o!=null;){var c=o.useToken;if(i.includes(c))throw new Error("Token registration cycle detected! "+Vo(i,[c]).join(" -> "));i.push(c);var d=this._registry.get(c);d&&i0(d.provider)?o=d.provider:o=null}if((s.lifecycle===Ps.Singleton||s.lifecycle==Ps.ContainerScoped||s.lifecycle==Ps.ResolutionScoped)&&(a0(r)||cw(r)))throw new Error('Cannot use lifecycle "'+Ps[s.lifecycle]+'" with ValueProviders or FactoryProviders');return this._registry.set(e,{provider:r,options:s}),this},t.prototype.registerType=function(e,n){return this.ensureNotDisposed(),xc(n)?this.register(e,{useToken:n}):this.register(e,{useClass:n})},t.prototype.registerInstance=function(e,n){return this.ensureNotDisposed(),this.register(e,{useValue:n})},t.prototype.registerSingleton=function(e,n){if(this.ensureNotDisposed(),xc(e)){if(xc(n))return this.register(e,{useToken:n},{lifecycle:Ps.Singleton});if(n)return this.register(e,{useClass:n},{lifecycle:Ps.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var s=e;return n&&!xc(n)&&(s=n),this.register(e,{useClass:s},{lifecycle:Ps.Singleton})},t.prototype.resolve=function(e,n,s){n===void 0&&(n=new jm),s===void 0&&(s=!1),this.ensureNotDisposed();var r=this.getRegistration(e);if(!r&&xc(e)){if(s)return;throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"')}if(this.executePreResolutionInterceptor(e,"Single"),r){var i=this.resolveRegistration(r,n);return this.executePostResolutionInterceptor(e,i,"Single"),i}if(OG(e)){var i=this.construct(e,n);return this.executePostResolutionInterceptor(e,i,"Single"),i}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},t.prototype.executePreResolutionInterceptor=function(e,n){var s,r;if(this.interceptors.preResolution.has(e)){var i=[];try{for(var o=Em(this.interceptors.preResolution.getAll(e)),c=o.next();!c.done;c=o.next()){var d=c.value;d.options.frequency!="Once"&&i.push(d),d.callback(e,n)}}catch(h){s={error:h}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(s)throw s.error}}this.interceptors.preResolution.setAll(e,i)}},t.prototype.executePostResolutionInterceptor=function(e,n,s){var r,i;if(this.interceptors.postResolution.has(e)){var o=[];try{for(var c=Em(this.interceptors.postResolution.getAll(e)),d=c.next();!d.done;d=c.next()){var h=d.value;h.options.frequency!="Once"&&o.push(h),h.callback(e,n,s)}}catch(g){r={error:g}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}this.interceptors.postResolution.setAll(e,o)}},t.prototype.resolveRegistration=function(e,n){if(this.ensureNotDisposed(),e.options.lifecycle===Ps.ResolutionScoped&&n.scopedResolutions.has(e))return n.scopedResolutions.get(e);var s=e.options.lifecycle===Ps.Singleton,r=e.options.lifecycle===Ps.ContainerScoped,i=s||r,o;return a0(e.provider)?o=e.provider.useValue:i0(e.provider)?o=i?e.instance||(e.instance=this.resolve(e.provider.useToken,n)):this.resolve(e.provider.useToken,n):iB(e.provider)?o=i?e.instance||(e.instance=this.construct(e.provider.useClass,n)):this.construct(e.provider.useClass,n):cw(e.provider)?o=e.provider.useFactory(this):o=this.construct(e.provider,n),e.options.lifecycle===Ps.ResolutionScoped&&n.scopedResolutions.set(e,o),o},t.prototype.resolveAll=function(e,n,s){var r=this;n===void 0&&(n=new jm),s===void 0&&(s=!1),this.ensureNotDisposed();var i=this.getAllRegistrations(e);if(!i&&xc(e)){if(s)return[];throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"')}if(this.executePreResolutionInterceptor(e,"All"),i){var o=i.map(function(d){return r.resolveRegistration(d,n)});return this.executePostResolutionInterceptor(e,o,"All"),o}var c=[this.construct(e,n)];return this.executePostResolutionInterceptor(e,c,"All"),c},t.prototype.isRegistered=function(e,n){return n===void 0&&(n=!1),this.ensureNotDisposed(),this._registry.has(e)||n&&(this.parent||!1)&&this.parent.isRegistered(e,!0)},t.prototype.reset=function(){this.ensureNotDisposed(),this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},t.prototype.clearInstances=function(){var e,n;this.ensureNotDisposed();try{for(var s=Em(this._registry.entries()),r=s.next();!r.done;r=s.next()){var i=fg(r.value,2),o=i[0],c=i[1];this._registry.setAll(o,c.filter(function(d){return!a0(d.provider)}).map(function(d){return d.instance=void 0,d}))}}catch(d){e={error:d}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}},t.prototype.createChildContainer=function(){var e,n;this.ensureNotDisposed();var s=new t(this);try{for(var r=Em(this._registry.entries()),i=r.next();!i.done;i=r.next()){var o=fg(i.value,2),c=o[0],d=o[1];d.some(function(h){var g=h.options;return g.lifecycle===Ps.ContainerScoped})&&s._registry.setAll(c,d.map(function(h){return h.options.lifecycle===Ps.ContainerScoped?{provider:h.provider,options:h.options}:h}))}}catch(h){e={error:h}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return s},t.prototype.beforeResolution=function(e,n,s){s===void 0&&(s={frequency:"Always"}),this.interceptors.preResolution.set(e,{callback:n,options:s})},t.prototype.afterResolution=function(e,n,s){s===void 0&&(s={frequency:"Always"}),this.interceptors.postResolution.set(e,{callback:n,options:s})},t.prototype.dispose=function(){return AG(this,void 0,void 0,function(){var e;return EG(this,function(n){switch(n.label){case 0:return this.disposed=!0,e=[],this.disposables.forEach(function(s){var r=s.dispose();r&&e.push(r)}),[4,Promise.all(e)];case 1:return n.sent(),[2]}})})},t.prototype.getRegistration=function(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null},t.prototype.getAllRegistrations=function(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null},t.prototype.construct=function(e,n){var s=this;if(e instanceof aB)return e.createProxy(function(i){return s.resolve(i,n)});var r=(function(){var i=oB.get(e);if(!i||i.length===0){if(e.length===0)return new e;throw new Error('TypeInfo not known for "'+e.name+'"')}var o=i.map(s.resolveParams(n,e));return new(e.bind.apply(e,Vo([void 0],o)))})();return PG(r)&&this.disposables.add(r),r},t.prototype.resolveParams=function(e,n){var s=this;return function(r,i){var o,c,d;try{return RG(r)?YE(r)?r.multiple?(o=s.resolve(r.transform)).transform.apply(o,Vo([s.resolveAll(r.token,new jm,r.isOptional)],r.transformArgs)):(c=s.resolve(r.transform)).transform.apply(c,Vo([s.resolve(r.token,e,r.isOptional)],r.transformArgs)):r.multiple?s.resolveAll(r.token,new jm,r.isOptional):s.resolve(r.token,e,r.isOptional):YE(r)?(d=s.resolve(r.transform,e)).transform.apply(d,Vo([s.resolve(r.token,e)],r.transformArgs)):s.resolve(r,e)}catch(h){throw new Error(IG(n,i,h))}}},t.prototype.ensureNotDisposed=function(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")},t})(),Ns=new UG;function Dy(t){return function(e){oB.set(e,TG(e))}}if(typeof Reflect>"u"||!Reflect.getMetadata)throw new Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`);var uw;class Ly{constructor(e={}){this.attrId="",this.attrValues=[],Object.assign(e)}}M([H({type:ne.ObjectIdentifier})],Ly.prototype,"attrId",void 0);M([H({type:ne.Any,repeated:"set"})],Ly.prototype,"attrValues",void 0);let XE=uw=class extends Lt{constructor(e){super(e),Object.setPrototypeOf(this,uw.prototype)}};XE=uw=M([Ne({type:xe.Sequence,itemType:Ly})],XE);var hw;let JE=hw=class extends Lt{constructor(e){super(e),Object.setPrototypeOf(this,hw.prototype)}};JE=hw=M([Ne({type:xe.Sequence,itemType:Au})],JE);class lB{constructor(e={}){this.certId="",this.certValue=new ArrayBuffer(0),Object.assign(this,e)}}M([H({type:ne.ObjectIdentifier})],lB.prototype,"certId",void 0);M([H({type:ne.Any,context:0})],lB.prototype,"certValue",void 0);class cB{constructor(e={}){this.crlId="",this.crltValue=new ArrayBuffer(0),Object.assign(this,e)}}M([H({type:ne.ObjectIdentifier})],cB.prototype,"crlId",void 0);M([H({type:ne.Any,context:0})],cB.prototype,"crltValue",void 0);class uB extends jt{}let Iy=class{constructor(e={}){this.encryptionAlgorithm=new Ie,this.encryptedData=new uB,Object.assign(this,e)}};M([H({type:Ie})],Iy.prototype,"encryptionAlgorithm",void 0);M([H({type:uB})],Iy.prototype,"encryptedData",void 0);var dw,fw;(function(t){t[t.v1=0]="v1"})(fw||(fw={}));class hB extends jt{}let pw=dw=class extends Lt{constructor(e){super(e),Object.setPrototypeOf(this,dw.prototype)}};pw=dw=M([Ne({type:xe.Sequence,itemType:ia})],pw);class Vf{constructor(e={}){this.version=fw.v1,this.privateKeyAlgorithm=new Ie,this.privateKey=new hB,Object.assign(this,e)}}M([H({type:ne.Integer})],Vf.prototype,"version",void 0);M([H({type:Ie})],Vf.prototype,"privateKeyAlgorithm",void 0);M([H({type:hB})],Vf.prototype,"privateKey",void 0);M([H({type:pw,implicit:!0,context:0,optional:!0})],Vf.prototype,"attributes",void 0);let QE=class extends Vf{};QE=M([Ne({type:xe.Sequence})],QE);let ZE=class extends Iy{};ZE=M([Ne({type:xe.Sequence})],ZE);class dB{constructor(e={}){this.secretTypeId="",this.secretValue=new ArrayBuffer(0),Object.assign(this,e)}}M([H({type:ne.ObjectIdentifier})],dB.prototype,"secretTypeId",void 0);M([H({type:ne.Any,context:0})],dB.prototype,"secretValue",void 0);class Ff{constructor(e={}){this.mac=new My,this.macSalt=new jt,this.iterations=1,Object.assign(this,e)}}M([H({type:My})],Ff.prototype,"mac",void 0);M([H({type:jt})],Ff.prototype,"macSalt",void 0);M([H({type:ne.Integer,defaultValue:1})],Ff.prototype,"iterations",void 0);class Py{constructor(e={}){this.version=3,this.authSafe=new Au,this.macData=new Ff,Object.assign(this,e)}}M([H({type:ne.Integer})],Py.prototype,"version",void 0);M([H({type:Au})],Py.prototype,"authSafe",void 0);M([H({type:Ff,optional:!0})],Py.prototype,"macData",void 0);var mw;class $y{constructor(e={}){this.bagId="",this.bagValue=new ArrayBuffer(0),Object.assign(this,e)}}M([H({type:ne.ObjectIdentifier})],$y.prototype,"bagId",void 0);M([H({type:ne.Any,context:0})],$y.prototype,"bagValue",void 0);M([H({type:Ly,repeated:"set",optional:!0})],$y.prototype,"bagAttributes",void 0);let e3=mw=class extends Lt{constructor(e){super(e),Object.setPrototypeOf(this,mw.prototype)}};e3=mw=M([Ne({type:xe.Sequence,itemType:$y})],e3);var gw,yw,bw;const fB="1.2.840.113549.1.9",pB=`${fB}.7`,ak=`${fB}.14`;let pg=class extends os{constructor(e={}){super(e)}toString(){return this.ia5String||super.toString()}};M([H({type:ne.IA5String})],pg.prototype,"ia5String",void 0);pg=M([Ne({type:xe.Choice})],pg);let t3=class extends Au{};t3=M([Ne({type:xe.Sequence})],t3);let n3=class extends Py{};n3=M([Ne({type:xe.Sequence})],n3);let s3=class extends Iy{};s3=M([Ne({type:xe.Sequence})],s3);let vw=class{constructor(e=""){this.value=e}toString(){return this.value}};M([H({type:ne.IA5String})],vw.prototype,"value",void 0);vw=M([Ne({type:xe.Choice})],vw);let r3=class extends pg{};r3=M([Ne({type:xe.Choice})],r3);let i3=class extends os{};i3=M([Ne({type:xe.Choice})],i3);let xw=class{constructor(e=new Date){this.value=e}};M([H({type:ne.GeneralizedTime})],xw.prototype,"value",void 0);xw=M([Ne({type:xe.Choice})],xw);let a3=class extends os{};a3=M([Ne({type:xe.Choice})],a3);let _w=class{constructor(e="M"){this.value=e}toString(){return this.value}};M([H({type:ne.PrintableString})],_w.prototype,"value",void 0);_w=M([Ne({type:xe.Choice})],_w);let mg=class{constructor(e=""){this.value=e}toString(){return this.value}};M([H({type:ne.PrintableString})],mg.prototype,"value",void 0);mg=M([Ne({type:xe.Choice})],mg);let o3=class extends mg{};o3=M([Ne({type:xe.Choice})],o3);let l3=class extends os{};l3=M([Ne({type:xe.Choice})],l3);let ww=class{constructor(e=""){this.value=e}toString(){return this.value}};M([H({type:ne.ObjectIdentifier})],ww.prototype,"value",void 0);ww=M([Ne({type:xe.Choice})],ww);let c3=class extends ss{};c3=M([Ne({type:xe.Choice})],c3);let Sw=class{constructor(e=0){this.value=e}toString(){return this.value.toString()}};M([H({type:ne.Integer})],Sw.prototype,"value",void 0);Sw=M([Ne({type:xe.Choice})],Sw);let u3=class extends Ai{};u3=M([Ne({type:xe.Sequence})],u3);let gg=class extends os{};gg=M([Ne({type:xe.Choice})],gg);let h3=gw=class extends ul{constructor(e){super(e),Object.setPrototypeOf(this,gw.prototype)}};h3=gw=M([Ne({type:xe.Sequence})],h3);let d3=yw=class extends Lt{constructor(e){super(e),Object.setPrototypeOf(this,yw.prototype)}};d3=yw=M([Ne({type:xe.Set,itemType:Nu})],d3);let kw=class{constructor(e=""){this.value=e}toString(){return this.value}};M([H({type:ne.BmpString})],kw.prototype,"value",void 0);kw=M([Ne({type:xe.Choice})],kw);let Cw=class extends Ie{};Cw=M([Ne({type:xe.Sequence})],Cw);let f3=bw=class extends Lt{constructor(e){super(e),Object.setPrototypeOf(this,bw.prototype)}};f3=bw=M([Ne({type:xe.Sequence,itemType:Cw})],f3);var Nw;let yg=Nw=class extends Lt{constructor(e){super(e),Object.setPrototypeOf(this,Nw.prototype)}};yg=Nw=M([Ne({type:xe.Sequence,itemType:ia})],yg);class Tu{constructor(e={}){this.version=0,this.subject=new Dn,this.subjectPKInfo=new mi,this.attributes=new yg,Object.assign(this,e)}}M([H({type:ne.Integer})],Tu.prototype,"version",void 0);M([H({type:Dn})],Tu.prototype,"subject",void 0);M([H({type:mi})],Tu.prototype,"subjectPKInfo",void 0);M([H({type:yg,implicit:!0,context:0,optional:!0})],Tu.prototype,"attributes",void 0);class uf{constructor(e={}){this.certificationRequestInfo=new Tu,this.signatureAlgorithm=new Ie,this.signature=new ArrayBuffer(0),Object.assign(this,e)}}M([H({type:Tu,raw:!0})],uf.prototype,"certificationRequestInfo",void 0);M([H({type:Ie})],uf.prototype,"signatureAlgorithm",void 0);M([H({type:ne.BitString})],uf.prototype,"signature",void 0);const qf="crypto.algorithm";class VG{getAlgorithms(){return Ns.resolveAll(qf)}toAsnAlgorithm(e){({...e});for(const n of this.getAlgorithms()){const s=n.toAsnAlgorithm(e);if(s)return s}if(/^[0-9.]+$/.test(e.name)){const n=new Ie({algorithm:e.name});if("parameters"in e){const s=e;n.parameters=s.parameters}return n}throw new Error("Cannot convert WebCrypto algorithm to ASN.1 algorithm")}toWebAlgorithm(e){for(const s of this.getAlgorithms()){const r=s.toWebAlgorithm(e);if(r)return r}return{name:e.algorithm,parameters:e.parameters}}}const ou="crypto.algorithmProvider";Ns.registerSingleton(ou,VG);var o0;const Ks="1.3.36.3.3.2.8.1.1",p3=`${Ks}.1`,m3=`${Ks}.2`,g3=`${Ks}.3`,y3=`${Ks}.4`,b3=`${Ks}.5`,v3=`${Ks}.6`,x3=`${Ks}.7`,_3=`${Ks}.8`,w3=`${Ks}.9`,S3=`${Ks}.10`,k3=`${Ks}.11`,C3=`${Ks}.12`,N3=`${Ks}.13`,A3=`${Ks}.14`,E3="brainpoolP160r1",j3="brainpoolP160t1",T3="brainpoolP192r1",R3="brainpoolP192t1",O3="brainpoolP224r1",M3="brainpoolP224t1",B3="brainpoolP256r1",D3="brainpoolP256t1",L3="brainpoolP320r1",I3="brainpoolP320t1",P3="brainpoolP384r1",$3="brainpoolP384t1",z3="brainpoolP512r1",H3="brainpoolP512t1",an="ECDSA";let hf=o0=class{toAsnAlgorithm(e){switch(e.name.toLowerCase()){case an.toLowerCase():if("hash"in e)switch((typeof e.hash=="string"?e.hash:e.hash.name).toLowerCase()){case"sha-1":return fG;case"sha-256":return pG;case"sha-384":return mG;case"sha-512":return gG}else if("namedCurve"in e){let n="";switch(e.namedCurve){case"P-256":n=KE;break;case"K-256":n=o0.SECP256K1;break;case"P-384":n=WE;break;case"P-521":n=GE;break;case E3:n=p3;break;case j3:n=m3;break;case T3:n=g3;break;case R3:n=y3;break;case O3:n=b3;break;case M3:n=v3;break;case B3:n=x3;break;case D3:n=_3;break;case L3:n=w3;break;case I3:n=S3;break;case P3:n=k3;break;case $3:n=C3;break;case z3:n=N3;break;case H3:n=A3;break}if(n)return new Ie({algorithm:lf,parameters:Be.serialize(new ho({namedCurve:n}))})}}return null}toWebAlgorithm(e){switch(e.algorithm){case Z2:return{name:an,hash:{name:"SHA-1"}};case ek:return{name:an,hash:{name:"SHA-256"}};case tk:return{name:an,hash:{name:"SHA-384"}};case nk:return{name:an,hash:{name:"SHA-512"}};case lf:{if(!e.parameters)throw new TypeError("Cannot get required parameters from EC algorithm");switch(Be.parse(e.parameters,ho).namedCurve){case KE:return{name:an,namedCurve:"P-256"};case o0.SECP256K1:return{name:an,namedCurve:"K-256"};case WE:return{name:an,namedCurve:"P-384"};case GE:return{name:an,namedCurve:"P-521"};case p3:return{name:an,namedCurve:E3};case m3:return{name:an,namedCurve:j3};case g3:return{name:an,namedCurve:T3};case y3:return{name:an,namedCurve:R3};case b3:return{name:an,namedCurve:O3};case v3:return{name:an,namedCurve:M3};case x3:return{name:an,namedCurve:B3};case _3:return{name:an,namedCurve:D3};case w3:return{name:an,namedCurve:L3};case S3:return{name:an,namedCurve:I3};case k3:return{name:an,namedCurve:P3};case C3:return{name:an,namedCurve:$3};case N3:return{name:an,namedCurve:z3};case A3:return{name:an,namedCurve:H3}}}}return null}};hf.SECP256K1="1.3.132.0.10";hf=o0=M([Dy()],hf);Ns.registerSingleton(qf,hf);const mB=Symbol("name"),gB=Symbol("value");class Ot{constructor(e,n={},s=""){this[mB]=e,this[gB]=s;for(const r in n)this[r]=n[r]}}Ot.NAME=mB;Ot.VALUE=gB;class FG{static toTextObject(e){const n=new Ot("Algorithm Identifier",{},mo.toString(e.algorithm));if(e.parameters)if(e.algorithm===lf){const s=new hf().toWebAlgorithm(e);s&&"namedCurve"in s?n["Named Curve"]=s.namedCurve:n.Parameters=e.parameters}else n.Parameters=e.parameters;return n}}class mo{static toString(e){const n=this.items[e];return n||e}}mo.items={[cg]:"sha1",[nB]:"sha224",[ug]:"sha256",[hg]:"sha384",[dg]:"sha512",[dl]:"rsaEncryption",[ag]:"sha1WithRSAEncryption",[wG]:"sha224WithRSAEncryption",[rw]:"sha256WithRSAEncryption",[og]:"sha384WithRSAEncryption",[lg]:"sha512WithRSAEncryption",[lf]:"ecPublicKey",[Z2]:"ecdsaWithSHA1",[ZM]:"ecdsaWithSHA224",[ek]:"ecdsaWithSHA256",[tk]:"ecdsaWithSHA384",[nk]:"ecdsaWithSHA512",[aG]:"TLS WWW server authentication",[oG]:"TLS WWW client authentication",[lG]:"Code Signing",[cG]:"E-mail Protection",[uG]:"Time Stamping",[hG]:"OCSP Signing",[dG]:"Signed Data"};class ml{static serialize(e){return this.serializeObj(e).join(`
`)}static pad(e=0){return"".padStart(2*e," ")}static serializeObj(e,n=0){const s=[];let r=this.pad(n++),i="";const o=e[Ot.VALUE];o&&(i=` ${o}`),s.push(`${r}${e[Ot.NAME]}:${i}`),r=this.pad(n);for(const c in e){if(typeof c=="symbol")continue;const d=e[c],h=c?`${c}: `:"";if(typeof d=="string"||typeof d=="number"||typeof d=="boolean")s.push(`${r}${h}${d}`);else if(d instanceof Date)s.push(`${r}${h}${d.toUTCString()}`);else if(Array.isArray(d))for(const g of d)g[Ot.NAME]=c,s.push(...this.serializeObj(g,n));else if(d instanceof Ot)d[Ot.NAME]=c,s.push(...this.serializeObj(d,n));else if(Oe.isBufferSource(d))c?(s.push(`${r}${h}`),s.push(...this.serializeBufferSource(d,n+1))):s.push(...this.serializeBufferSource(d,n));else if("toTextObject"in d){const g=d.toTextObject();g[Ot.NAME]=c,s.push(...this.serializeObj(g,n))}else throw new TypeError("Cannot serialize data in text format. Unsupported type.")}return s}static serializeBufferSource(e,n=0){const s=this.pad(n),r=Oe.toUint8Array(e),i=[];for(let o=0;o<r.length;){const c=[];for(let d=0;d<16&&o<r.length;d++){d===8&&c.push("");const h=r[o++].toString(16).padStart(2,"0");c.push(h)}i.push(`${s}${c.join(" ")}`)}return i}static serializeAlgorithm(e){return this.algorithmSerializer.toTextObject(e)}}ml.oidSerializer=mo;ml.algorithmSerializer=FG;var Rc;class go{get rawData(){return ft(this,Rc,"f")||nn(this,Rc,Be.serialize(this.asn),"f"),ft(this,Rc,"f")}constructor(...e){Rc.set(this,void 0),Oe.isBufferSource(e[0])?(this.asn=Be.parse(e[0],e[1]),nn(this,Rc,Oe.toArrayBuffer(e[0]),"f"),this.onInit(this.asn)):(this.asn=e[0],this.onInit(this.asn))}equal(e){return e instanceof go?PO(e.rawData,this.rawData):!1}toString(e="text"){switch(e){case"asn":return Be.toString(this.rawData);case"text":return ml.serialize(this.toTextObject());case"hex":return Ke.ToHex(this.rawData);case"base64":return Ke.ToBase64(this.rawData);case"base64url":return Ke.ToBase64Url(this.rawData);default:throw TypeError("Argument 'format' is unsupported value")}}getTextName(){return this.constructor.NAME}toTextObject(){const e=this.toTextObjectEmpty();return e[""]=this.rawData,e}toTextObjectEmpty(e){return new Ot(this.getTextName(),{},e)}}Rc=new WeakMap;go.NAME="ASN";class fr extends go{constructor(...e){let n;Oe.isBufferSource(e[0])?n=Oe.toArrayBuffer(e[0]):n=Be.serialize(new Jr({extnID:e[0],critical:e[1],extnValue:new jt(Oe.toArrayBuffer(e[2]))})),super(n,Jr)}onInit(e){this.type=e.extnID,this.critical=e.critical,this.value=e.extnValue.buffer}toTextObject(){const e=this.toTextObjectWithoutValue();return e[""]=this.value,e}toTextObjectWithoutValue(){const e=this.toTextObjectEmpty(this.critical?"critical":void 0);return e[Ot.NAME]===fr.NAME&&(e[Ot.NAME]=mo.toString(this.type)),e}}var yB;class Za{static isCryptoKeyPair(e){return e&&e.privateKey&&e.publicKey}static isCryptoKey(e){return e&&e.usages&&e.type&&e.algorithm&&e.extractable!==void 0}constructor(){this.items=new Map,this[yB]="CryptoProvider",typeof self<"u"&&typeof crypto<"u"?this.set(Za.DEFAULT,crypto):typeof global<"u"&&global.crypto&&global.crypto.subtle&&this.set(Za.DEFAULT,global.crypto)}clear(){this.items.clear()}delete(e){return this.items.delete(e)}forEach(e,n){return this.items.forEach(e,n)}has(e){return this.items.has(e)}get size(){return this.items.size}entries(){return this.items.entries()}keys(){return this.items.keys()}values(){return this.items.values()}[Symbol.iterator](){return this.items[Symbol.iterator]()}get(e=Za.DEFAULT){const n=this.items.get(e.toLowerCase());if(!n)throw new Error(`Cannot get Crypto by name '${e}'`);return n}set(e,n){if(typeof e=="string"){if(!n)throw new TypeError("Argument 'value' is required");this.items.set(e.toLowerCase(),n)}else this.items.set(Za.DEFAULT,e);return this}}yB=Symbol.toStringTag;Za.DEFAULT="default";const ws=new Za,qG=/^[0-2](?:\.[1-9][0-9]*)+$/;function KG(t){return new RegExp(qG).test(t)}class bB{constructor(e={}){this.items={};for(const n in e)this.register(n,e[n])}get(e){return this.items[e]||null}findId(e){return KG(e)?e:this.get(e)}register(e,n){this.items[e]=n,this.items[n]=e}}const Vs=new bB;Vs.register("CN","2.5.4.3");Vs.register("L","2.5.4.7");Vs.register("ST","2.5.4.8");Vs.register("O","2.5.4.10");Vs.register("OU","2.5.4.11");Vs.register("C","2.5.4.6");Vs.register("DC","0.9.2342.19200300.100.1.25");Vs.register("E","1.2.840.113549.1.9.1");Vs.register("G","2.5.4.42");Vs.register("I","2.5.4.43");Vs.register("SN","2.5.4.4");Vs.register("T","2.5.4.12");function WG(t,e){return`\\${Ke.ToHex(Ke.FromUtf8String(e)).toUpperCase()}`}function GG(t){return t.replace(/([,+"\\<>;])/g,"\\$1").replace(/^([ #])/,"\\$1").replace(/([ ]$)/,"\\$1").replace(/([\r\n\t])/,WG)}class gl{static isASCII(e){for(let n=0;n<e.length;n++)if(e.charCodeAt(n)>255)return!1;return!0}static isPrintableString(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/g.test(e)}constructor(e,n={}){this.extraNames=new bB,this.asn=new Dn;for(const s in n)if(Object.prototype.hasOwnProperty.call(n,s)){const r=n[s];this.extraNames.register(s,r)}typeof e=="string"?this.asn=this.fromString(e):e instanceof Dn?this.asn=e:Oe.isBufferSource(e)?this.asn=Be.parse(e,Dn):this.asn=this.fromJSON(e)}getField(e){const n=this.extraNames.findId(e)||Vs.findId(e),s=[];for(const r of this.asn)for(const i of r)i.type===n&&s.push(i.value.toString());return s}getName(e){return this.extraNames.get(e)||Vs.get(e)}toString(){return this.asn.map(e=>e.map(n=>{const s=this.getName(n.type)||n.type,r=n.value.anyValue?`#${Ke.ToHex(n.value.anyValue)}`:GG(n.value.toString());return`${s}=${r}`}).join("+")).join(", ")}toJSON(){var e;const n=[];for(const s of this.asn){const r={};for(const i of s){const o=this.getName(i.type)||i.type;(e=r[o])!==null&&e!==void 0||(r[o]=[]),r[o].push(i.value.anyValue?`#${Ke.ToHex(i.value.anyValue)}`:i.value.toString())}n.push(r)}return n}fromString(e){const n=new Dn,s=/(\d\.[\d.]*\d|[A-Za-z]+)=((?:"")|(?:".*?[^\\]")|(?:[^,+"\\](?=[,+]|$))|(?:[^,+].*?(?:[^\\][,+]))|(?:))([,+])?/g;let r=null,i=",";for(;r=s.exec(`${e},`);){let[,o,c]=r;const d=c[c.length-1];(d===","||d==="+")&&(c=c.slice(0,c.length-1),r[3]=d);const h=r[3];o=this.getTypeOid(o);const g=this.createAttribute(o,c);i==="+"?n[n.length-1].push(g):n.push(new Jc([g])),i=h}return n}fromJSON(e){const n=new Dn;for(const s of e){const r=new Jc;for(const i in s){const o=this.getTypeOid(i),c=s[i];for(const d of c){const h=this.createAttribute(o,d);r.push(h)}}n.push(r)}return n}getTypeOid(e){if(/[\d.]+/.test(e)||(e=this.getName(e)||""),!e)throw new Error(`Cannot get OID for name type '${e}'`);return e}createAttribute(e,n){const s=new py({type:e});if(typeof n=="object")for(const r in n)switch(r){case"ia5String":s.value.ia5String=n[r];break;case"utf8String":s.value.utf8String=n[r];break;case"universalString":s.value.universalString=n[r];break;case"bmpString":s.value.bmpString=n[r];break;case"printableString":s.value.printableString=n[r];break}else if(n[0]==="#")s.value.anyValue=Ke.FromHex(n.slice(1));else{const r=this.processStringValue(n);e===this.getName("E")||e===this.getName("DC")?s.value.ia5String=r:gl.isPrintableString(r)?s.value.printableString=r:s.value.utf8String=r}return s}processStringValue(e){const n=/"(.*?[^\\])?"/.exec(e);return n&&(e=n[1]),e.replace(/\\0a/ig,`
`).replace(/\\0d/ig,"\r").replace(/\\0g/ig,"	").replace(/\\(.)/g,"$1")}toArrayBuffer(){return Be.serialize(this.asn)}async getThumbprint(...e){var n;let s,r="SHA-1";return e.length>=1&&!(!((n=e[0])===null||n===void 0)&&n.subtle)?(r=e[0]||r,s=e[1]||ws.get()):s=e[0]||ws.get(),await s.subtle.digest(r,this.toArrayBuffer())}}const vB="Cannot initialize GeneralName from ASN.1 data.",U3=`${vB} Unsupported string format in use.`,YG=`${vB} Value doesn't match to GUID regular expression.`,V3=/^([0-9a-f]{8})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{12})$/i,F3="1.3.6.1.4.1.311.25.1",q3="1.3.6.1.4.1.311.20.2.3",nx="dns",sx="dn",rx="email",ix="ip",ax="url",ox="guid",lx="upn",Tm="id";class eo extends go{constructor(...e){let n;if(e.length===2)switch(e[0]){case sx:{const s=new gl(e[1]).toArrayBuffer(),r=Be.parse(s,Dn);n=new ut({directoryName:r});break}case nx:n=new ut({dNSName:e[1]});break;case rx:n=new ut({rfc822Name:e[1]});break;case ox:{const s=new RegExp(V3,"i").exec(e[1]);if(!s)throw new Error("Cannot parse GUID value. Value doesn't match to regular expression");const r=s.slice(1).map((i,o)=>o<3?Ke.ToHex(new Uint8Array(Ke.FromHex(i)).reverse()):i).join("");n=new ut({otherName:new sf({typeId:F3,value:Be.serialize(new jt(Ke.FromHex(r)))})});break}case ix:n=new ut({iPAddress:e[1]});break;case Tm:n=new ut({registeredID:e[1]});break;case lx:{n=new ut({otherName:new sf({typeId:q3,value:Be.serialize(DM.toASN(e[1]))})});break}case ax:n=new ut({uniformResourceIdentifier:e[1]});break;default:throw new Error("Cannot create GeneralName. Unsupported type of the name")}else Oe.isBufferSource(e[0])?n=Be.parse(e[0],ut):n=e[0];super(n)}onInit(e){if(e.dNSName!=null)this.type=nx,this.value=e.dNSName;else if(e.rfc822Name!=null)this.type=rx,this.value=e.rfc822Name;else if(e.iPAddress!=null)this.type=ix,this.value=e.iPAddress;else if(e.uniformResourceIdentifier!=null)this.type=ax,this.value=e.uniformResourceIdentifier;else if(e.registeredID!=null)this.type=Tm,this.value=e.registeredID;else if(e.directoryName!=null)this.type=sx,this.value=new gl(e.directoryName).toString();else if(e.otherName!=null)if(e.otherName.typeId===F3){this.type=ox;const n=Be.parse(e.otherName.value,jt),s=new RegExp(V3,"i").exec(Ke.ToHex(n));if(!s)throw new Error(YG);this.value=s.slice(1).map((r,i)=>i<3?Ke.ToHex(new Uint8Array(Ke.FromHex(r)).reverse()):r).join("-")}else if(e.otherName.typeId===q3)this.type=lx,this.value=Be.parse(e.otherName.value,os).toString();else throw new Error(U3);else throw new Error(U3)}toJSON(){return{type:this.type,value:this.value}}toTextObject(){let e;switch(this.type){case sx:case nx:case ox:case ix:case Tm:case lx:case ax:e=this.type.toUpperCase();break;case rx:e="Email";break;default:throw new Error("Unsupported GeneralName type")}let n=this.value;return this.type===Tm&&(n=mo.toString(n)),new Ot(e,void 0,n)}}class yl extends go{constructor(e){let n;if(e instanceof ps)n=e;else if(Array.isArray(e)){const s=[];for(const r of e)if(r instanceof ut)s.push(r);else{const i=Be.parse(new eo(r.type,r.value).rawData,ut);s.push(i)}n=new ps(s)}else if(Oe.isBufferSource(e))n=Be.parse(e,ps);else throw new Error("Cannot initialize GeneralNames. Incorrect incoming arguments");super(n)}onInit(e){const n=[];for(const s of e){let r=null;try{r=new eo(s)}catch{continue}n.push(r)}this.items=n}toJSON(){return this.items.map(e=>e.toJSON())}toTextObject(){const e=super.toTextObjectEmpty();for(const n of this.items){const s=n.toTextObject();let r=e[s[Ot.NAME]];Array.isArray(r)||(r=[],e[s[Ot.NAME]]=r),r.push(s)}return e}}yl.NAME="GeneralNames";const Ud="-{5}",df="\\n",XG=`[^${df}]+`,JG=`${Ud}BEGIN (${XG}(?=${Ud}))${Ud}`,QG=`${Ud}END \\1${Ud}`,lu="\\n",ZG=`[^:${df}]+`,eY=`(?:[^${df}]+${lu}(?: +[^${df}]+${lu})*)`,tY="[a-zA-Z0-9=+/]+",nY=`(?:${tY}${lu})+`,K3=`${JG}${lu}(?:((?:${ZG}: ${eY})+))?${lu}?(${nY})${QG}`;class cr{static isPem(e){return typeof e=="string"&&new RegExp(K3,"g").test(e.replace(/\r/g,""))}static decodeWithHeaders(e){e=e.replace(/\r/g,"");const n=new RegExp(K3,"g"),s=[];let r=null;for(;r=n.exec(e);){const i=r[3].replace(new RegExp(`[${df}]+`,"g"),""),o={type:r[1],headers:[],rawData:Ke.FromBase64(i)},c=r[2];if(c){const d=c.split(new RegExp(lu,"g"));let h=null;for(const g of d){const[m,b]=g.split(/:(.*)/);if(b===void 0){if(!h)throw new Error("Cannot parse PEM string. Incorrect header value");h.value+=m.trim()}else h&&o.headers.push(h),h={key:m,value:b.trim()}}h&&o.headers.push(h)}s.push(o)}return s}static decode(e){return this.decodeWithHeaders(e).map(s=>s.rawData)}static decodeFirst(e){const n=this.decode(e);if(!n.length)throw new RangeError("PEM string doesn't contain any objects");return n[0]}static encode(e,n){if(Array.isArray(e)){const s=new Array;return n?e.forEach(r=>{if(!Oe.isBufferSource(r))throw new TypeError("Cannot encode array of BufferSource in PEM format. Not all items of the array are BufferSource");s.push(this.encodeStruct({type:n,rawData:Oe.toArrayBuffer(r)}))}):e.forEach(r=>{if(!("type"in r))throw new TypeError("Cannot encode array of PemStruct in PEM format. Not all items of the array are PemStrut");s.push(this.encodeStruct(r))}),s.join(`
`)}else{if(!n)throw new Error("Required argument 'tag' is missed");return this.encodeStruct({type:n,rawData:Oe.toArrayBuffer(e)})}}static encodeStruct(e){var n;const s=e.type.toLocaleUpperCase(),r=[];if(r.push(`-----BEGIN ${s}-----`),!((n=e.headers)===null||n===void 0)&&n.length){for(const h of e.headers)r.push(`${h.key}: ${h.value}`);r.push("")}const i=Ke.ToBase64(e.rawData);let o,c=0;const d=Array();for(;c<i.length&&(i.length-c<64?o=i.substring(c):(o=i.substring(c,c+64),c+=64),o.length!==0);)if(d.push(o),o.length<64)break;return r.push(...d),r.push(`-----END ${s}-----`),r.join(`
`)}}cr.CertificateTag="CERTIFICATE";cr.CrlTag="CRL";cr.CertificateRequestTag="CERTIFICATE REQUEST";cr.PublicKeyTag="PUBLIC KEY";cr.PrivateKeyTag="PRIVATE KEY";class la extends go{static isAsnEncoded(e){return Oe.isBufferSource(e)||typeof e=="string"}static toArrayBuffer(e){if(typeof e=="string"){if(cr.isPem(e))return cr.decode(e)[0];if(Ke.isHex(e))return Ke.FromHex(e);if(Ke.isBase64(e))return Ke.FromBase64(e);if(Ke.isBase64Url(e))return Ke.FromBase64Url(e);throw new TypeError("Unsupported format of 'raw' argument. Must be one of DER, PEM, HEX, Base64, or Base4Url")}else{const n=Oe.toUint8Array(e);if(n.length>0&&n[0]===48)return Oe.toArrayBuffer(e);const s=Ke.ToBinary(e);if(cr.isPem(s))return cr.decode(s)[0];if(Ke.isHex(s))return Ke.FromHex(s);if(Ke.isBase64(s))return Ke.FromBase64(s);if(Ke.isBase64Url(s))return Ke.FromBase64Url(s);throw new TypeError("Unsupported format of 'raw' argument. Must be one of DER, PEM, HEX, Base64, or Base4Url")}}constructor(...e){la.isAsnEncoded(e[0])?super(la.toArrayBuffer(e[0]),e[1]):super(e[0])}toString(e="pem"){return e==="pem"?cr.encode(this.rawData,this.tag):super.toString(e)}}class bi extends la{static async create(e,n=ws.get()){if(e instanceof bi)return e;if(Za.isCryptoKey(e)){if(e.type!=="public")throw new TypeError("Public key is required");const s=await n.subtle.exportKey("spki",e);return new bi(s)}else{if(e.publicKey)return e.publicKey;if(Oe.isBufferSource(e))return new bi(e);throw new TypeError("Unsupported PublicKeyType")}}constructor(e){la.isAsnEncoded(e)?super(e,mi):super(e),this.tag=cr.PublicKeyTag}async export(...e){let n,s=["verify"],r={hash:"SHA-256",...this.algorithm};e.length>1?(r=e[0]||r,s=e[1]||s,n=e[2]||ws.get()):n=e[0]||ws.get();let i=this.rawData;const o=Be.parse(this.rawData,mi);return o.algorithm.algorithm===Hd&&(i=sY(o,i)),n.subtle.importKey("spki",i,r,!0,s)}onInit(e){const n=Ns.resolve(ou),s=this.algorithm=n.toWebAlgorithm(e.algorithm);if(e.algorithm.algorithm===dl){const r=Be.parse(e.subjectPublicKey,sk),i=Oe.toUint8Array(r.modulus);s.publicExponent=Oe.toUint8Array(r.publicExponent),s.modulusLength=(i[0]?i:i.slice(1)).byteLength<<3}}async getThumbprint(...e){var n;let s,r="SHA-1";return e.length>=1&&!(!((n=e[0])===null||n===void 0)&&n.subtle)?(r=e[0]||r,s=e[1]||ws.get()):s=e[0]||ws.get(),await s.subtle.digest(r,this.rawData)}async getKeyIdentifier(...e){let n,s="SHA-1";e.length===1?typeof e[0]=="string"?(s=e[0],n=ws.get()):n=e[0]:e.length===2?(s=e[0],n=e[1]):n=ws.get();const r=Be.parse(this.rawData,mi);return await n.subtle.digest(s,r.subjectPublicKey)}toTextObject(){const e=this.toTextObjectEmpty(),n=Be.parse(this.rawData,mi);switch(e.Algorithm=ml.serializeAlgorithm(n.algorithm),n.algorithm.algorithm){case lf:e["EC Point"]=n.subjectPublicKey;break;case dl:default:e["Raw Data"]=n.subjectPublicKey}return e}}function sY(t,e){return t.algorithm=new Ie({algorithm:dl,parameters:null}),e=Be.serialize(t),e}class ff extends fr{static async create(e,n=!1,s=ws.get()){if("name"in e&&"serialNumber"in e)return new ff(e,n);const i=await(await bi.create(e,s)).getKeyIdentifier(s);return new ff(Ke.ToHex(i),n)}constructor(...e){if(Oe.isBufferSource(e[0]))super(e[0]);else if(typeof e[0]=="string"){const n=new Ko({keyIdentifier:new P2(Ke.FromHex(e[0]))});super(w_,e[1],Be.serialize(n))}else{const n=e[0],s=n.name instanceof yl?Be.parse(n.name.rawData,ps):n.name,r=new Ko({authorityCertIssuer:s,authorityCertSerialNumber:Ke.FromHex(n.serialNumber)});super(w_,e[1],Be.serialize(r))}}onInit(e){super.onInit(e);const n=Be.parse(e.extnValue,Ko);n.keyIdentifier&&(this.keyId=Ke.ToHex(n.keyIdentifier)),(n.authorityCertIssuer||n.authorityCertSerialNumber)&&(this.certId={name:n.authorityCertIssuer||[],serialNumber:n.authorityCertSerialNumber?Ke.ToHex(n.authorityCertSerialNumber):""})}toTextObject(){const e=this.toTextObjectWithoutValue(),n=Be.parse(this.value,Ko);return n.authorityCertIssuer&&(e["Authority Issuer"]=new yl(n.authorityCertIssuer).toTextObject()),n.authorityCertSerialNumber&&(e["Authority Serial Number"]=n.authorityCertSerialNumber),n.keyIdentifier&&(e[""]=n.keyIdentifier),e}}ff.NAME="Authority Key Identifier";class xB extends fr{constructor(...e){if(Oe.isBufferSource(e[0])){super(e[0]);const n=Be.parse(this.value,U0);this.ca=n.cA,this.pathLength=n.pathLenConstraint}else{const n=new U0({cA:e[0],pathLenConstraint:e[1]});super(IM,e[2],Be.serialize(n)),this.ca=e[0],this.pathLength=e[1]}}toTextObject(){const e=this.toTextObjectWithoutValue();return this.ca&&(e.CA=this.ca),this.pathLength!==void 0&&(e["Path Length"]=this.pathLength),e}}xB.NAME="Basic Constraints";var W3;(function(t){t.serverAuth="1.3.6.1.5.5.7.3.1",t.clientAuth="1.3.6.1.5.5.7.3.2",t.codeSigning="1.3.6.1.5.5.7.3.3",t.emailProtection="1.3.6.1.5.5.7.3.4",t.timeStamping="1.3.6.1.5.5.7.3.8",t.ocspSigning="1.3.6.1.5.5.7.3.9"})(W3||(W3={}));class _B extends fr{constructor(...e){if(Oe.isBufferSource(e[0])){super(e[0]);const n=Be.parse(this.value,K0);this.usages=n.map(s=>s)}else{const n=new K0(e[0]);super(zM,e[1],Be.serialize(n)),this.usages=e[0]}}toTextObject(){const e=this.toTextObjectWithoutValue();return e[""]=this.usages.map(n=>mo.toString(n)).join(", "),e}}_B.NAME="Extended Key Usages";var Ji;(function(t){t[t.digitalSignature=1]="digitalSignature",t[t.nonRepudiation=2]="nonRepudiation",t[t.keyEncipherment=4]="keyEncipherment",t[t.dataEncipherment=8]="dataEncipherment",t[t.keyAgreement=16]="keyAgreement",t[t.keyCertSign=32]="keyCertSign",t[t.cRLSign=64]="cRLSign",t[t.encipherOnly=128]="encipherOnly",t[t.decipherOnly=256]="decipherOnly"})(Ji||(Ji={}));class wB extends fr{constructor(...e){if(Oe.isBufferSource(e[0])){super(e[0]);const n=Be.parse(this.value,tx);this.usages=n.toNumber()}else{const n=new tx(e[0]);super(UM,e[1],Be.serialize(n)),this.usages=e[0]}}toTextObject(){const e=this.toTextObjectWithoutValue(),n=Be.parse(this.value,tx);return e[""]=n.toJSON().join(", "),e}}wB.NAME="Key Usages";class zy extends fr{static async create(e,n=!1,s=ws.get()){const i=await(await bi.create(e,s)).getKeyIdentifier(s);return new zy(Ke.ToHex(i),n)}constructor(...e){if(Oe.isBufferSource(e[0])){super(e[0]);const n=Be.parse(this.value,ao);this.keyId=Ke.ToHex(n)}else{const n=typeof e[0]=="string"?Ke.FromHex(e[0]):e[0],s=new ao(n);super(KM,e[1],Be.serialize(s)),this.keyId=Ke.ToHex(n)}}toTextObject(){const e=this.toTextObjectWithoutValue(),n=Be.parse(this.value,ao);return e[""]=n,e}}zy.NAME="Subject Key Identifier";class SB extends fr{constructor(...e){Oe.isBufferSource(e[0])?super(e[0]):super(qM,e[1],new yl(e[0]||[]).rawData)}onInit(e){super.onInit(e);const n=Be.parse(e.extnValue,I_);this.names=new yl(n)}toTextObject(){const e=this.toTextObjectWithoutValue(),n=this.names.toTextObject();for(const s in n)e[s]=n[s];return e}}SB.NAME="Subject Alternative Name";class pr{static register(e,n){this.items.set(e,n)}static create(e){const n=new fr(e),s=this.items.get(n.type);return s?new s(e):n}}pr.items=new Map;class kB extends fr{constructor(...e){var n;if(Oe.isBufferSource(e[0])){super(e[0]);const s=Be.parse(this.value,F0);this.policies=s.map(r=>r.policyIdentifier)}else{const s=e[0],r=(n=e[1])!==null&&n!==void 0?n:!1,i=new F0(s.map(o=>new gy({policyIdentifier:o})));super(PM,r,Be.serialize(i)),this.policies=s}}toTextObject(){const e=this.toTextObjectWithoutValue();return e.Policy=this.policies.map(n=>new Ot("",{},mo.toString(n))),e}}kB.NAME="Certificate Policies";pr.register(PM,kB);class CB extends fr{constructor(...e){var n;if(Oe.isBufferSource(e[0]))super(e[0]);else if(Array.isArray(e[0])&&typeof e[0][0]=="string"){const r=e[0].map(o=>new ku({distributionPoint:new cl({fullName:[new ut({uniformResourceIdentifier:o})]})})),i=new qc(r);super(A_,e[1],Be.serialize(i))}else{const s=new qc(e[0]);super(A_,e[1],Be.serialize(s))}(n=this.distributionPoints)!==null&&n!==void 0||(this.distributionPoints=[])}onInit(e){super.onInit(e);const n=Be.parse(e.extnValue,qc);this.distributionPoints=n}toTextObject(){const e=this.toTextObjectWithoutValue();return e["Distribution Point"]=this.distributionPoints.map(n=>{var s;const r={};return n.distributionPoint&&(r[""]=(s=n.distributionPoint.fullName)===null||s===void 0?void 0:s.map(i=>new eo(i).toString()).join(", ")),n.reasons&&(r.Reasons=n.reasons.toString()),n.cRLIssuer&&(r["CRL Issuer"]=n.cRLIssuer.map(i=>i.toString()).join(", ")),r}),e}}CB.NAME="CRL Distribution Points";class NB extends fr{constructor(...e){var n,s,r,i;if(Oe.isBufferSource(e[0]))super(e[0]);else if(e[0]instanceof Dc){const o=new Dc(e[0]);super(__,e[1],Be.serialize(o))}else{const o=e[0],c=new Dc;Om(c,o,RE,"ocsp"),Om(c,o,OE,"caIssuers"),Om(c,o,ME,"timeStamping"),Om(c,o,BE,"caRepository"),super(__,e[1],Be.serialize(c))}(n=this.ocsp)!==null&&n!==void 0||(this.ocsp=[]),(s=this.caIssuers)!==null&&s!==void 0||(this.caIssuers=[]),(r=this.timeStamping)!==null&&r!==void 0||(this.timeStamping=[]),(i=this.caRepository)!==null&&i!==void 0||(this.caRepository=[])}onInit(e){super.onInit(e),this.ocsp=[],this.caIssuers=[],this.timeStamping=[],this.caRepository=[],Be.parse(e.extnValue,Dc).forEach(s=>{switch(s.accessMethod){case RE:this.ocsp.push(new eo(s.accessLocation));break;case OE:this.caIssuers.push(new eo(s.accessLocation));break;case ME:this.timeStamping.push(new eo(s.accessLocation));break;case BE:this.caRepository.push(new eo(s.accessLocation));break}})}toTextObject(){const e=this.toTextObjectWithoutValue();return this.ocsp.length&&Rm(e,"OCSP",this.ocsp),this.caIssuers.length&&Rm(e,"CA Issuers",this.caIssuers),this.timeStamping.length&&Rm(e,"Time Stamping",this.timeStamping),this.caRepository.length&&Rm(e,"CA Repository",this.caRepository),e}}NB.NAME="Authority Info Access";function Rm(t,e,n){if(n.length===1)t[e]=n[0].toTextObject();else{const s=new Ot("");n.forEach((r,i)=>{const o=r.toTextObject(),c=`${o[Ot.NAME]} ${i+1}`;let d=s[c];Array.isArray(d)||(d=[],s[c]=d),d.push(o)}),t[e]=s}}function Om(t,e,n,s){const r=e[s];r&&(Array.isArray(r)?r:[r]).forEach(o=>{typeof o=="string"&&(o=new eo("url",o)),t.push(new Bf({accessMethod:n,accessLocation:Be.parse(o.rawData,ut)}))})}class AB extends fr{constructor(...e){Oe.isBufferSource(e[0])?super(e[0]):super(HM,e[1],new yl(e[0]||[]).rawData)}onInit(e){super.onInit(e);const n=Be.parse(e.extnValue,ps);this.names=new yl(n)}toTextObject(){const e=this.toTextObjectWithoutValue(),n=this.names.toTextObject();for(const s in n)e[s]=n[s];return e}}AB.NAME="Issuer Alternative Name";class Ru extends go{constructor(...e){let n;if(Oe.isBufferSource(e[0]))n=Oe.toArrayBuffer(e[0]);else{const s=e[0],r=Array.isArray(e[1])?e[1].map(i=>Oe.toArrayBuffer(i)):[];n=Be.serialize(new ia({type:s,values:r}))}super(n,ia)}onInit(e){this.type=e.type,this.values=e.values}toTextObject(){const e=this.toTextObjectWithoutValue();return e.Value=this.values.map(n=>new Ot("",{"":n})),e}toTextObjectWithoutValue(){const e=this.toTextObjectEmpty();return e[Ot.NAME]===Ru.NAME&&(e[Ot.NAME]=mo.toString(this.type)),e}}Ru.NAME="Attribute";class EB extends Ru{constructor(...e){var n;if(Oe.isBufferSource(e[0]))super(e[0]);else{const s=new gg({printableString:e[0]});super(pB,[Be.serialize(s)])}(n=this.password)!==null&&n!==void 0||(this.password="")}onInit(e){if(super.onInit(e),this.values[0]){const n=Be.parse(this.values[0],gg);this.password=n.toString()}}toTextObject(){const e=this.toTextObjectWithoutValue();return e[Ot.VALUE]=this.password,e}}EB.NAME="Challenge Password";class ok extends Ru{constructor(...e){var n;if(Oe.isBufferSource(e[0]))super(e[0]);else{const s=e[0],r=new ul;for(const i of s)r.push(Be.parse(i.rawData,Jr));super(ak,[Be.serialize(r)])}(n=this.items)!==null&&n!==void 0||(this.items=[])}onInit(e){if(super.onInit(e),this.values[0]){const n=Be.parse(this.values[0],ul);this.items=n.map(s=>pr.create(Be.serialize(s)))}}toTextObject(){const e=this.toTextObjectWithoutValue(),n=this.items.map(s=>s.toTextObject());for(const s of n)e[s[Ot.NAME]]=s;return e}}ok.NAME="Extensions";class Hy{static register(e,n){this.items.set(e,n)}static create(e){const n=new Ru(e),s=this.items.get(n.type);return s?new s(e):n}}Hy.items=new Map;const Uy="crypto.signatureFormatter";class rY{toAsnSignature(e,n){return Oe.toArrayBuffer(n)}toWebSignature(e,n){return Oe.toArrayBuffer(n)}}var l0;let Aw=l0=class{static createPssParams(e,n){const s=l0.getHashAlgorithm(e);return s?new pl({hashAlgorithm:s,maskGenAlgorithm:new Ie({algorithm:Ry,parameters:Be.serialize(s)}),saltLength:n}):null}static getHashAlgorithm(e){const n=Ns.resolve(ou);return typeof e=="string"?n.toAsnAlgorithm({name:e}):typeof e=="object"&&e&&"name"in e?n.toAsnAlgorithm(e):null}toAsnAlgorithm(e){switch(e.name.toLowerCase()){case"rsassa-pkcs1-v1_5":if("hash"in e){let n;if(typeof e.hash=="string")n=e.hash;else if(e.hash&&typeof e.hash=="object"&&"name"in e.hash&&typeof e.hash.name=="string")n=e.hash.name.toUpperCase();else throw new Error("Cannot get hash algorithm name");switch(n.toLowerCase()){case"sha-1":return new Ie({algorithm:ag,parameters:null});case"sha-256":return new Ie({algorithm:rw,parameters:null});case"sha-384":return new Ie({algorithm:og,parameters:null});case"sha-512":return new Ie({algorithm:lg,parameters:null})}}else return new Ie({algorithm:dl,parameters:null});break;case"rsa-pss":if("hash"in e){if(!("saltLength"in e&&typeof e.saltLength=="number"))throw new Error("Cannot get 'saltLength' from 'alg' argument");const n=l0.createPssParams(e.hash,e.saltLength);if(!n)throw new Error("Cannot create PSS parameters");return new Ie({algorithm:Hd,parameters:Be.serialize(n)})}else return new Ie({algorithm:Hd,parameters:null})}return null}toWebAlgorithm(e){switch(e.algorithm){case dl:return{name:"RSASSA-PKCS1-v1_5"};case ag:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case rw:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case og:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case lg:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case Hd:if(e.parameters){const n=Be.parse(e.parameters,pl);return{name:"RSA-PSS",hash:Ns.resolve(ou).toWebAlgorithm(n.hashAlgorithm),saltLength:n.saltLength}}else return{name:"RSA-PSS"}}return null}};Aw=l0=M([Dy()],Aw);Ns.registerSingleton(qf,Aw);let Ew=class{toAsnAlgorithm(e){switch(e.name.toLowerCase()){case"sha-1":return new Ie({algorithm:cg});case"sha-256":return new Ie({algorithm:ug});case"sha-384":return new Ie({algorithm:hg});case"sha-512":return new Ie({algorithm:dg})}return null}toWebAlgorithm(e){switch(e.algorithm){case cg:return{name:"SHA-1"};case ug:return{name:"SHA-256"};case hg:return{name:"SHA-384"};case dg:return{name:"SHA-512"}}return null}};Ew=M([Dy()],Ew);Ns.registerSingleton(qf,Ew);class Rr{addPadding(e,n){const s=Oe.toUint8Array(n),r=new Uint8Array(e);return r.set(s,e-s.length),r.buffer}removePadding(e,n=!1){let s=Oe.toUint8Array(e);for(let r=0;r<s.length;r++)if(s[r]){s=s.slice(r);break}if(n&&s[0]>127){const r=new Uint8Array(s.length+1);return r.set(s,1),r.buffer}return s.buffer}toAsnSignature(e,n){if(e.name==="ECDSA"){const s=e.namedCurve,r=Rr.namedCurveSize.get(s)||Rr.defaultNamedCurveSize,i=new ig,o=Oe.toUint8Array(n);return i.r=this.removePadding(o.slice(0,r),!0),i.s=this.removePadding(o.slice(r,r+r),!0),Be.serialize(i)}return null}toWebSignature(e,n){if(e.name==="ECDSA"){const s=Be.parse(n,ig),r=e.namedCurve,i=Rr.namedCurveSize.get(r)||Rr.defaultNamedCurveSize,o=this.addPadding(i,this.removePadding(s.r)),c=this.addPadding(i,this.removePadding(s.s));return yW(o,c)}return null}}Rr.namedCurveSize=new Map;Rr.defaultNamedCurveSize=32;const cx="1.3.101.110",G3="1.3.101.111",ux="1.3.101.112",Y3="1.3.101.113";let jw=class{toAsnAlgorithm(e){let n=null;switch(e.name.toLowerCase()){case"ed25519":n=ux;break;case"x25519":n=cx;break;case"eddsa":switch(e.namedCurve.toLowerCase()){case"ed25519":n=ux;break;case"ed448":n=Y3;break}break;case"ecdh-es":switch(e.namedCurve.toLowerCase()){case"x25519":n=cx;break;case"x448":n=G3;break}}return n?new Ie({algorithm:n}):null}toWebAlgorithm(e){switch(e.algorithm){case ux:return{name:"Ed25519"};case Y3:return{name:"EdDSA",namedCurve:"Ed448"};case cx:return{name:"X25519"};case G3:return{name:"ECDH-ES",namedCurve:"X448"}}return null}};jw=M([Dy()],jw);Ns.registerSingleton(qf,jw);var nd,sd,rd,id,ad,od,ld,Oc;class iY extends la{get subjectName(){return ft(this,sd,"f")||nn(this,sd,new gl(this.asn.certificationRequestInfo.subject),"f"),ft(this,sd,"f")}get subject(){return ft(this,rd,"f")||nn(this,rd,this.subjectName.toString(),"f"),ft(this,rd,"f")}get signatureAlgorithm(){if(!ft(this,id,"f")){const e=Ns.resolve(ou);nn(this,id,e.toWebAlgorithm(this.asn.signatureAlgorithm),"f")}return ft(this,id,"f")}get signature(){return ft(this,ad,"f")||nn(this,ad,this.asn.signature,"f"),ft(this,ad,"f")}get publicKey(){return ft(this,od,"f")||nn(this,od,new bi(this.asn.certificationRequestInfo.subjectPKInfo),"f"),ft(this,od,"f")}get attributes(){return ft(this,ld,"f")||nn(this,ld,this.asn.certificationRequestInfo.attributes.map(e=>Hy.create(Be.serialize(e))),"f"),ft(this,ld,"f")}get extensions(){if(!ft(this,Oc,"f")){nn(this,Oc,[],"f");const e=this.getAttribute(ak);e instanceof ok&&nn(this,Oc,e.items,"f")}return ft(this,Oc,"f")}get tbs(){return ft(this,nd,"f")||nn(this,nd,this.asn.certificationRequestInfoRaw||Be.serialize(this.asn.certificationRequestInfo),"f"),ft(this,nd,"f")}constructor(e){const n=la.isAsnEncoded(e)?[e,uf]:[e];super(n[0],n[1]),nd.set(this,void 0),sd.set(this,void 0),rd.set(this,void 0),id.set(this,void 0),ad.set(this,void 0),od.set(this,void 0),ld.set(this,void 0),Oc.set(this,void 0),this.tag=cr.CertificateRequestTag}onInit(e){}getAttribute(e){for(const n of this.attributes)if(n.type===e)return n;return null}getAttributes(e){return this.attributes.filter(n=>n.type===e)}getExtension(e){for(const n of this.extensions)if(n.type===e)return n;return null}getExtensions(e){return this.extensions.filter(n=>n.type===e)}async verify(e=ws.get()){const n={...this.publicKey.algorithm,...this.signatureAlgorithm},s=await this.publicKey.export(n,["verify"],e),r=Ns.resolveAll(Uy).reverse();let i=null;for(const c of r)if(i=c.toWebSignature(n,this.signature),i)break;if(!i)throw Error("Cannot convert WebCrypto signature value to ASN.1 format");return await e.subtle.verify(this.signatureAlgorithm,s,i,this.tbs)}toTextObject(){const e=this.toTextObjectEmpty(),n=Be.parse(this.rawData,uf),s=n.certificationRequestInfo,r=new Ot("",{Version:`${Qc[s.version]} (${s.version})`,Subject:this.subject,"Subject Public Key Info":this.publicKey});if(this.attributes.length){const i=new Ot("");for(const o of this.attributes){const c=o.toTextObject();i[c[Ot.NAME]]=c}r.Attributes=i}return e.Data=r,e.Signature=new Ot("",{Algorithm:ml.serializeAlgorithm(n.signatureAlgorithm),"":n.signature}),e}}nd=new WeakMap,sd=new WeakMap,rd=new WeakMap,id=new WeakMap,ad=new WeakMap,od=new WeakMap,ld=new WeakMap,Oc=new WeakMap;iY.NAME="PKCS#10 Certificate Request";var cd,ud,hd,dd,fd,pd,md,gd,yd,bd,Mc,vd;class jB extends la{get publicKey(){return ft(this,vd,"f")||nn(this,vd,new bi(this.asn.tbsCertificate.subjectPublicKeyInfo),"f"),ft(this,vd,"f")}get serialNumber(){if(!ft(this,ud,"f")){const e=this.asn.tbsCertificate;let n=new Uint8Array(e.serialNumber);n.length>1&&n[0]===0&&n[1]>127&&(n=n.slice(1)),nn(this,ud,Ke.ToHex(n),"f")}return ft(this,ud,"f")}get subjectName(){return ft(this,hd,"f")||nn(this,hd,new gl(this.asn.tbsCertificate.subject),"f"),ft(this,hd,"f")}get subject(){return ft(this,dd,"f")||nn(this,dd,this.subjectName.toString(),"f"),ft(this,dd,"f")}get issuerName(){return ft(this,fd,"f")||nn(this,fd,new gl(this.asn.tbsCertificate.issuer),"f"),ft(this,fd,"f")}get issuer(){return ft(this,pd,"f")||nn(this,pd,this.issuerName.toString(),"f"),ft(this,pd,"f")}get notBefore(){if(!ft(this,md,"f")){const e=this.asn.tbsCertificate.validity.notBefore.utcTime||this.asn.tbsCertificate.validity.notBefore.generalTime;if(!e)throw new Error("Cannot get 'notBefore' value");nn(this,md,e,"f")}return ft(this,md,"f")}get notAfter(){if(!ft(this,gd,"f")){const e=this.asn.tbsCertificate.validity.notAfter.utcTime||this.asn.tbsCertificate.validity.notAfter.generalTime;if(!e)throw new Error("Cannot get 'notAfter' value");nn(this,gd,e,"f")}return ft(this,gd,"f")}get signatureAlgorithm(){if(!ft(this,yd,"f")){const e=Ns.resolve(ou);nn(this,yd,e.toWebAlgorithm(this.asn.signatureAlgorithm),"f")}return ft(this,yd,"f")}get signature(){return ft(this,bd,"f")||nn(this,bd,this.asn.signatureValue,"f"),ft(this,bd,"f")}get extensions(){return ft(this,Mc,"f")||(nn(this,Mc,[],"f"),this.asn.tbsCertificate.extensions&&nn(this,Mc,this.asn.tbsCertificate.extensions.map(e=>pr.create(Be.serialize(e))),"f")),ft(this,Mc,"f")}get tbs(){return ft(this,cd,"f")||nn(this,cd,this.asn.tbsCertificateRaw||Be.serialize(this.asn.tbsCertificate),"f"),ft(this,cd,"f")}constructor(e){const n=la.isAsnEncoded(e)?[e,Zc]:[e];super(n[0],n[1]),cd.set(this,void 0),ud.set(this,void 0),hd.set(this,void 0),dd.set(this,void 0),fd.set(this,void 0),pd.set(this,void 0),md.set(this,void 0),gd.set(this,void 0),yd.set(this,void 0),bd.set(this,void 0),Mc.set(this,void 0),vd.set(this,void 0),this.tag=cr.CertificateTag}onInit(e){}getExtension(e){for(const n of this.extensions)if(typeof e=="string"){if(n.type===e)return n}else if(n instanceof e)return n;return null}getExtensions(e){return this.extensions.filter(n=>typeof e=="string"?n.type===e:n instanceof e)}async verify(e={},n=ws.get()){let s,r;const i=e.publicKey;try{if(!i)s={...this.publicKey.algorithm,...this.signatureAlgorithm},r=await this.publicKey.export(s,["verify"],n);else if("publicKey"in i)s={...i.publicKey.algorithm,...this.signatureAlgorithm},r=await i.publicKey.export(s,["verify"],n);else if(i instanceof bi)s={...i.algorithm,...this.signatureAlgorithm},r=await i.export(s,["verify"],n);else if(Oe.isBufferSource(i)){const h=new bi(i);s={...h.algorithm,...this.signatureAlgorithm},r=await h.export(s,["verify"],n)}else s={...i.algorithm,...this.signatureAlgorithm},r=i}catch{return!1}const o=Ns.resolveAll(Uy).reverse();let c=null;for(const h of o)if(c=h.toWebSignature(s,this.signature),c)break;if(!c)throw Error("Cannot convert ASN.1 signature value to WebCrypto format");const d=await n.subtle.verify(this.signatureAlgorithm,r,c,this.tbs);if(e.signatureOnly)return d;{const g=(e.date||new Date).getTime();return d&&this.notBefore.getTime()<g&&g<this.notAfter.getTime()}}async getThumbprint(...e){let n,s="SHA-1";return e[0]&&(e[0].subtle?n=e[0]:(s=e[0]||s,n=e[1])),n??(n=ws.get()),await n.subtle.digest(s,this.rawData)}async isSelfSigned(e=ws.get()){return this.subject===this.issuer&&await this.verify({signatureOnly:!0},e)}toTextObject(){const e=this.toTextObjectEmpty(),n=Be.parse(this.rawData,Zc),s=n.tbsCertificate,r=new Ot("",{Version:`${Qc[s.version]} (${s.version})`,"Serial Number":s.serialNumber,"Signature Algorithm":ml.serializeAlgorithm(s.signature),Issuer:this.issuer,Validity:new Ot("",{"Not Before":s.validity.notBefore.getTime(),"Not After":s.validity.notAfter.getTime()}),Subject:this.subject,"Subject Public Key Info":this.publicKey});if(s.issuerUniqueID&&(r["Issuer Unique ID"]=s.issuerUniqueID),s.subjectUniqueID&&(r["Subject Unique ID"]=s.subjectUniqueID),this.extensions.length){const i=new Ot("");for(const o of this.extensions){const c=o.toTextObject();i[c[Ot.NAME]]=c}r.Extensions=i}return e.Data=r,e.Signature=new Ot("",{Algorithm:ml.serializeAlgorithm(n.signatureAlgorithm),"":n.signatureValue}),e}}cd=new WeakMap,ud=new WeakMap,hd=new WeakMap,dd=new WeakMap,fd=new WeakMap,pd=new WeakMap,md=new WeakMap,gd=new WeakMap,yd=new WeakMap,bd=new WeakMap,Mc=new WeakMap,vd=new WeakMap;jB.NAME="Certificate";var X3;(function(t){t[t.unspecified=0]="unspecified",t[t.keyCompromise=1]="keyCompromise",t[t.cACompromise=2]="cACompromise",t[t.affiliationChanged=3]="affiliationChanged",t[t.superseded=4]="superseded",t[t.cessationOfOperation=5]="cessationOfOperation",t[t.certificateHold=6]="certificateHold",t[t.removeFromCRL=8]="removeFromCRL",t[t.privilegeWithdrawn=9]="privilegeWithdrawn",t[t.aACompromise=10]="aACompromise"})(X3||(X3={}));pr.register(IM,xB);pr.register(zM,_B);pr.register(UM,wB);pr.register(KM,zy);pr.register(w_,ff);pr.register(qM,SB);pr.register(A_,CB);pr.register(__,NB);pr.register(HM,AB);Hy.register(pB,EB);Hy.register(ak,ok);Ns.registerSingleton(Uy,rY);Ns.registerSingleton(Uy,Rr);Rr.namedCurveSize.set("P-256",32);Rr.namedCurveSize.set("K-256",32);Rr.namedCurveSize.set("P-384",48);Rr.namedCurveSize.set("P-521",66);const aY=["-----BEGIN CERTIFICATE-----","-----BEGIN X509 CERTIFICATE-----","-----BEGIN TRUSTED CERTIFICATE-----"],oY=["-----BEGIN PRIVATE KEY-----","-----BEGIN RSA PRIVATE KEY-----","-----BEGIN EC PRIVATE KEY-----","-----BEGIN ENCRYPTED PRIVATE KEY-----"],lY=["-----BEGIN PUBLIC KEY-----","-----BEGIN RSA PUBLIC KEY-----"],cY=["-----BEGIN CERTIFICATE REQUEST-----","-----BEGIN NEW CERTIFICATE REQUEST-----"];function uY(t){const e=t.trim();for(const n of aY)if(e.startsWith(n))return{type:"certificate",content:e};for(const n of oY)if(e.startsWith(n))return{type:"private-key",content:e};for(const n of lY)if(e.startsWith(n))return{type:"public-key",content:e};for(const n of cY)if(e.startsWith(n))return{type:"csr",content:e};return null}function hY(t){try{const e=new jB(t),n=new Date,s={};for(const k of e.subject.split(", ")){const[C,N]=k.split("=");C&&N&&(s[C]=N)}const r={};for(const k of e.issuer.split(", ")){const[C,N]=k.split("=");C&&N&&(r[C]=N)}const i=e.notBefore,o=e.notAfter,c=n>o,d=n<i,h=Math.ceil((o.getTime()-n.getTime())/(1e3*60*60*24)),g=e.subject===e.issuer;let m="Unknown";try{const k=e.publicKey;m=k.algorithm.name||"Unknown","namedCurve"in k.algorithm&&(m+=` (${k.algorithm.namedCurve})`),"modulusLength"in k.algorithm&&(m+=` ${k.algorithm.modulusLength}-bit`)}catch{}const b=e.signatureAlgorithm.name||"Unknown";let y,w,x,S=!1;for(const k of e.extensions){if(k.type==="2.5.29.15")try{const C=k;y=[],C.usages&Ji.digitalSignature&&y.push("Digital Signature"),C.usages&Ji.keyEncipherment&&y.push("Key Encipherment"),C.usages&Ji.dataEncipherment&&y.push("Data Encipherment"),C.usages&Ji.keyAgreement&&y.push("Key Agreement"),C.usages&Ji.keyCertSign&&y.push("Certificate Signing"),C.usages&Ji.cRLSign&&y.push("CRL Signing"),C.usages&Ji.nonRepudiation&&y.push("Non-Repudiation")}catch{}if(k.type==="2.5.29.37")try{w=k.usages.map(N=>{const R=String(N);return{"1.3.6.1.5.5.7.3.1":"Server Authentication","1.3.6.1.5.5.7.3.2":"Client Authentication","1.3.6.1.5.5.7.3.3":"Code Signing","1.3.6.1.5.5.7.3.4":"Email Protection","1.3.6.1.5.5.7.3.8":"Time Stamping","1.3.6.1.5.5.7.3.9":"OCSP Signing"}[R]||R})}catch{}if(k.type==="2.5.29.17")try{x=k.names.items.map(N=>N.type==="dns"?`DNS:${N.value}`:N.type==="ip"?`IP:${N.value}`:N.type==="email"?`Email:${N.value}`:N.type==="url"?`URI:${N.value}`:String(N.value))}catch{}if(k.type==="2.5.29.19")try{S=k.ca}catch{}}return{subject:s,issuer:r,serialNumber:e.serialNumber,notBefore:i,notAfter:o,isExpired:c,isNotYetValid:d,daysUntilExpiry:h,keyAlgorithm:m,signatureAlgorithm:b,keyUsage:y,extKeyUsage:w,subjectAltNames:x,isSelfSigned:g,isCA:S}}catch(e){return console.error("Failed to parse certificate:",e),null}}function J3(t){return t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",timeZoneName:"short"})}function hx(t){const e=["CN","O","OU","L","ST","C"],n=[];for(const s of e)t[s]&&n.push(`${s}=${t[s]}`);for(const[s,r]of Object.entries(t))e.includes(s)||n.push(`${s}=${r}`);return n.join(", ")}function Tw(t){const e=Me.c(34),{name:n,pem:s}=t,[r,i]=F.useState(!0),[o,c]=F.useState(!1);let d,h;if(e[0]!==o||e[1]!==r||e[2]!==n||e[3]!==s){h=Symbol.for("react.early_return_sentinel");e:{const g=hY(s);let m;e[6]!==s?(m=async()=>{await navigator.clipboard.writeText(s),c(!0),setTimeout(()=>c(!1),2e3)},e[6]=s,e[7]=m):m=e[7];const b=m;if(!g){let D;e[8]===Symbol.for("react.memo_cache_sentinel")?(D=f.jsx(S0,{size:14,className:"text-amber-500"}),e[8]=D):D=e[8];let W;e[9]!==n?(W=f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n}),e[9]=n,e[10]=W):W=e[10];let V;e[11]===Symbol.for("react.memo_cache_sentinel")?(V=f.jsx("span",{className:"text-xs text-neutral-500",children:"Failed to parse certificate"}),e[11]=V):V=e[11];let q;e[12]!==W?(q=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-3",children:f.jsxs("div",{className:"flex items-center gap-2",children:[D,W,V]})}),e[12]=W,e[13]=q):q=e[13],h=q;break e}let y="text-emerald-500",w="bg-emerald-100 dark:bg-emerald-500/20",x="Valid";g.isExpired?(y="text-red-500",w="bg-red-100 dark:bg-red-500/20",x="Expired"):g.isNotYetValid?(y="text-amber-500",w="bg-amber-100 dark:bg-amber-500/20",x="Not Yet Valid"):g.daysUntilExpiry<=30&&(y="text-amber-500",w="bg-amber-100 dark:bg-amber-500/20",x=`Expires in ${g.daysUntilExpiry} days`);let S;e[14]!==r?(S=()=>i(!r),e[14]=r,e[15]=S):S=e[15];let k;e[16]===Symbol.for("react.memo_cache_sentinel")?(k=f.jsx(mu,{size:14,className:"text-blue-500 dark:text-blue-400"}),e[16]=k):k=e[16];let C;e[17]!==n?(C=f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n}),e[17]=n,e[18]=C):C=e[18];const N=`text-xs px-1.5 py-0.5 rounded ${w} ${y}`;let R;e[19]!==x||e[20]!==N?(R=f.jsx("span",{className:N,children:x}),e[19]=x,e[20]=N,e[21]=R):R=e[21];let B;e[22]!==b?(B=D=>{D.stopPropagation(),b()},e[22]=b,e[23]=B):B=e[23];let E;e[24]!==o?(E=o?f.jsx(bn,{size:14,className:"text-emerald-500"}):f.jsx(hs,{size:14,className:"text-neutral-400"}),e[24]=o,e[25]=E):E=e[25];let z;e[26]!==E||e[27]!==B?(z=f.jsx("button",{onClick:B,className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy certificate",children:E}),e[26]=E,e[27]=B,e[28]=z):z=e[28];let U;e[29]!==r?(U=r?f.jsx(rs,{size:14,className:"text-neutral-400"}):f.jsx(Or,{size:14,className:"text-neutral-400"}),e[29]=r,e[30]=U):U=e[30];let Y;e[31]!==z||e[32]!==U?(Y=f.jsxs("div",{className:"flex items-center gap-1",children:[z,U]}),e[31]=z,e[32]=U,e[33]=Y):Y=e[33],d=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:S,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[k,C,R,g.isCA&&f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-purple-100 dark:bg-purple-500/20 text-purple-600 dark:text-purple-400",children:"CA"}),g.isSelfSigned&&f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-neutral-200 dark:bg-neutral-600/50 text-neutral-600 dark:text-neutral-400",children:"Self-Signed"})]}),Y]}),r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3 space-y-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Subject"}),f.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300",children:g.subject.CN||hx(g.subject)}),g.subject.CN&&Object.keys(g.subject).length>1&&f.jsx("div",{className:"text-xs font-mono text-neutral-500 mt-0.5",children:hx(g.subject)})]}),!g.isSelfSigned&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Issuer"}),f.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300",children:g.issuer.CN||hx(g.issuer)})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Not Before"}),f.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300",children:J3(g.notBefore)})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Not After"}),f.jsxs("div",{className:`text-xs font-mono flex items-center gap-1 ${g.isExpired?"text-red-500":g.daysUntilExpiry<=30?"text-amber-500":"text-neutral-700 dark:text-neutral-300"}`,children:[g.isExpired?f.jsx(S0,{size:12}):g.daysUntilExpiry<=30?f.jsx(ua,{size:12}):f.jsx(d7,{size:12,className:"text-emerald-500"}),J3(g.notAfter)]})]})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Serial Number"}),f.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300 break-all",children:g.serialNumber})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Key Algorithm"}),f.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300",children:g.keyAlgorithm})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Signature Algorithm"}),f.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300",children:g.signatureAlgorithm})]})]}),g.subjectAltNames&&g.subjectAltNames.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Subject Alternative Names"}),f.jsx("div",{className:"flex flex-wrap gap-1",children:g.subjectAltNames.map(pY)})]}),g.keyUsage&&g.keyUsage.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Key Usage"}),f.jsx("div",{className:"flex flex-wrap gap-1",children:g.keyUsage.map(fY)})]}),g.extKeyUsage&&g.extKeyUsage.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Extended Key Usage"}),f.jsx("div",{className:"flex flex-wrap gap-1",children:g.extKeyUsage.map(dY)})]})]})]})}e[0]=o,e[1]=r,e[2]=n,e[3]=s,e[4]=d,e[5]=h}else d=e[4],h=e[5];return h!==Symbol.for("react.early_return_sentinel")?h:d}function dY(t,e){return f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-neutral-200 dark:bg-neutral-600/50 text-neutral-600 dark:text-neutral-400",children:t},e)}function fY(t,e){return f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-neutral-200 dark:bg-neutral-600/50 text-neutral-600 dark:text-neutral-400",children:t},e)}function pY(t,e){return f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-blue-100 dark:bg-blue-500/20 text-blue-600 dark:text-blue-400 font-mono",children:t},e)}function mY(t){const e=Me.c(32),{name:n,pem:s}=t,[r,i]=F.useState(!1),[o,c]=F.useState(!1);let d;e[0]!==s?(d=async()=>{await navigator.clipboard.writeText(s),c(!0),setTimeout(()=>c(!1),2e3)},e[0]=s,e[1]=d):d=e[1];const h=d;let g;e[2]!==r?(g=()=>i(!r),e[2]=r,e[3]=g):g=e[3];let m;e[4]===Symbol.for("react.memo_cache_sentinel")?(m=f.jsx(mu,{size:14,className:"text-red-500 dark:text-red-400"}),e[4]=m):m=e[4];let b;e[5]!==n?(b=f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n}),e[5]=n,e[6]=b):b=e[6];let y;e[7]===Symbol.for("react.memo_cache_sentinel")?(y=f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-red-100 dark:bg-red-500/20 text-red-600 dark:text-red-400",children:"Private Key"}),e[7]=y):y=e[7];let w;e[8]!==b?(w=f.jsxs("div",{className:"flex items-center gap-2",children:[m,b,y]}),e[8]=b,e[9]=w):w=e[9];let x;e[10]!==h?(x=z=>{z.stopPropagation(),h()},e[10]=h,e[11]=x):x=e[11];let S;e[12]!==o?(S=o?f.jsx(bn,{size:14,className:"text-emerald-500"}):f.jsx(hs,{size:14,className:"text-neutral-400"}),e[12]=o,e[13]=S):S=e[13];let k;e[14]!==x||e[15]!==S?(k=f.jsx("button",{onClick:x,className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy private key",children:S}),e[14]=x,e[15]=S,e[16]=k):k=e[16];let C;e[17]!==r?(C=r?f.jsx(rs,{size:14,className:"text-neutral-400"}):f.jsx(Or,{size:14,className:"text-neutral-400"}),e[17]=r,e[18]=C):C=e[18];let N;e[19]!==C||e[20]!==k?(N=f.jsxs("div",{className:"flex items-center gap-1",children:[k,C]}),e[19]=C,e[20]=k,e[21]=N):N=e[21];let R;e[22]!==N||e[23]!==g||e[24]!==w?(R=f.jsxs("button",{onClick:g,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[w,N]}),e[22]=N,e[23]=g,e[24]=w,e[25]=R):R=e[25];let B;e[26]!==r||e[27]!==s?(B=r&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:s})}),e[26]=r,e[27]=s,e[28]=B):B=e[28];let E;return e[29]!==R||e[30]!==B?(E=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[R,B]}),e[29]=R,e[30]=B,e[31]=E):E=e[31],E}function TB(t){const e=Me.c(32),{name:n,pem:s}=t,[r,i]=F.useState(!1),[o,c]=F.useState(!1);let d;e[0]!==s?(d=async()=>{await navigator.clipboard.writeText(s),c(!0),setTimeout(()=>c(!1),2e3)},e[0]=s,e[1]=d):d=e[1];const h=d;let g;e[2]!==r?(g=()=>i(!r),e[2]=r,e[3]=g):g=e[3];let m;e[4]===Symbol.for("react.memo_cache_sentinel")?(m=f.jsx(mu,{size:14,className:"text-amber-500 dark:text-amber-400"}),e[4]=m):m=e[4];let b;e[5]!==n?(b=f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n}),e[5]=n,e[6]=b):b=e[6];let y;e[7]===Symbol.for("react.memo_cache_sentinel")?(y=f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-amber-100 dark:bg-amber-500/20 text-amber-600 dark:text-amber-400",children:"Certificate Request"}),e[7]=y):y=e[7];let w;e[8]!==b?(w=f.jsxs("div",{className:"flex items-center gap-2",children:[m,b,y]}),e[8]=b,e[9]=w):w=e[9];let x;e[10]!==h?(x=z=>{z.stopPropagation(),h()},e[10]=h,e[11]=x):x=e[11];let S;e[12]!==o?(S=o?f.jsx(bn,{size:14,className:"text-emerald-500"}):f.jsx(hs,{size:14,className:"text-neutral-400"}),e[12]=o,e[13]=S):S=e[13];let k;e[14]!==x||e[15]!==S?(k=f.jsx("button",{onClick:x,className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy CSR",children:S}),e[14]=x,e[15]=S,e[16]=k):k=e[16];let C;e[17]!==r?(C=r?f.jsx(rs,{size:14,className:"text-neutral-400"}):f.jsx(Or,{size:14,className:"text-neutral-400"}),e[17]=r,e[18]=C):C=e[18];let N;e[19]!==C||e[20]!==k?(N=f.jsxs("div",{className:"flex items-center gap-1",children:[k,C]}),e[19]=C,e[20]=k,e[21]=N):N=e[21];let R;e[22]!==N||e[23]!==g||e[24]!==w?(R=f.jsxs("button",{onClick:g,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[w,N]}),e[22]=N,e[23]=g,e[24]=w,e[25]=R):R=e[25];let B;e[26]!==r||e[27]!==s?(B=r&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:s})}),e[26]=r,e[27]=s,e[28]=B):B=e[28];let E;return e[29]!==R||e[30]!==B?(E=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[R,B]}),e[29]=R,e[30]=B,e[31]=E):E=e[31],E}function gY(t){const e=Me.c(6),{name:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=f.jsx(mu,{size:14,className:"text-blue-500 dark:text-blue-400"}),e[0]=s):s=e[0];let r;e[1]!==n?(r=f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n}),e[1]=n,e[2]=r):r=e[2];let i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i=f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-blue-100 dark:bg-blue-500/20 text-blue-600 dark:text-blue-400",children:"Public Key"}),e[3]=i):i=e[3];let o;return e[4]!==r?(o=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-3",children:f.jsxs("div",{className:"flex items-center gap-2",children:[s,r,i]})}),e[4]=r,e[5]=o):o=e[5],o}function yY(t){const e=t?.find(m=>m.type==="Approved"),n=t?.find(m=>m.type==="Denied"),s=t?.find(m=>m.type==="Ready"),r=t?.find(m=>m.type==="InvalidRequest"),i=e?.status==="True",o=n?.status==="True",c=s?.status==="True",d=s?.status==="False"||r?.status==="True";let h,g;return c?(h=s?.reason,g=s?.message):d?(h=s?.reason||r?.reason,g=s?.message||r?.message):o?(h=n?.reason,g=n?.message):i&&(h=e?.reason,g=e?.message),{approved:i,denied:o,ready:c,failed:d,reason:h,message:g}}function bY(t){return t.ready?{text:"Issued",level:"success"}:t.failed||t.denied?{text:t.denied?"Denied":"Failed",level:"error"}:t.approved?{text:"Approved",level:"warning"}:{text:"Pending",level:"warning"}}function vY(t){return t.ready?f.jsx(Zr,{size:14,className:"text-emerald-400"}):t.failed||t.denied?f.jsx(ca,{size:14,className:"text-red-400"}):t.approved?f.jsx(En,{size:14,className:"text-amber-400 animate-spin"}):f.jsx(fu,{size:14,className:"text-amber-400"})}function xY(t){if(!t)return"Default (90d)";const e=t.match(/^(\d+)h/);if(e){const n=parseInt(e[1],10);return n>=8760?`${Math.round(n/8760)}y`:n>=720?`${Math.round(n/720)}mo`:n>=24?`${Math.round(n/24)}d`:`${n}h`}return t}function Q3(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function dx(t){if(!t)return null;try{return atob(t)}catch{return null}}const _Y={kinds:["CertificateRequest","CertificateRequests"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata;if(!n)return{sections:[]};const i=yY(s?.conditions),o=bY(i),c=r?.annotations?.["cert-manager.io/certificate-name"],d=r?.annotations?.["cert-manager.io/certificate-revision"],h=[{id:"status",data:{type:"status-cards",items:[{label:"Status",value:o.text,status:o.level,icon:vY(i)},...i.approved?[{label:"Approved",value:"Yes",status:"success",icon:f.jsx(Zr,{size:14,className:"text-emerald-400"})}]:[],...n.isCA?[{label:"Type",value:"CA Certificate",status:"neutral",icon:f.jsx(_0,{size:14,className:"text-purple-400"})}]:[{label:"Type",value:"TLS Certificate",status:"neutral",icon:f.jsx(_0,{size:14,className:"text-blue-400"})}],...d?[{label:"Revision",value:d,status:"neutral"}]:[]]}}];if(c&&h.push({id:"parent-certificate",title:"Parent Certificate",data:{type:"custom",render:()=>f.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(pu,{size:14,className:"text-blue-400"}),f.jsx("span",{className:"text-sm text-blue-300",children:c})]})})}}),h.push({id:"details",title:"Request Details",data:{type:"info-grid",columns:2,items:[{label:"Duration",value:xY(n.duration)},...r?.creationTimestamp?[{label:"Created",value:Q3(r.creationTimestamp)}]:[],...n.username?[{label:"Requested By",value:n.username.split(":").pop()||n.username}]:[]]}}),h.push({id:"issuer",title:"Issuer",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(wf,{size:14,className:"text-purple-400"}),f.jsx("span",{className:"text-sm font-medium text-purple-300",children:n.issuerRef.kind??"Issuer"})]}),f.jsx("div",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:n.issuerRef.name}),n.issuerRef.group&&f.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:n.issuerRef.group})]})}}),(n.username||n.groups?.length)&&h.push({id:"requester",title:"Requester",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(FT,{size:14,className:"text-neutral-600 dark:text-neutral-400"}),f.jsx("span",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Identity"})]}),n.username&&f.jsxs("div",{className:"text-xs text-neutral-700 dark:text-neutral-400 mb-1",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"User:"})," ",f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-mono",children:n.username})]}),n.groups&&n.groups.length>0&&f.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:n.groups.map((g,m)=>f.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-neutral-200 dark:bg-neutral-700 text-neutral-700 dark:text-neutral-400",children:g},m))})]})}}),n.usages?.length&&h.push({id:"usages",title:"Key Usages",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.usages.map((g,m)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-neutral-200 dark:bg-neutral-700 text-neutral-700 dark:text-neutral-300",children:g},m))})}}),s?.certificate){const g=dx(s.certificate),m=s.ca?dx(s.ca):null;h.push({id:"certificate-issued",title:"Certificate",data:{type:"custom",render:()=>f.jsxs("div",{className:"space-y-3",children:[g&&f.jsx(Tw,{name:"Issued Certificate",pem:g}),m&&f.jsx(Tw,{name:"CA Certificate",pem:m})]})}})}if(n.request){const g=dx(n.request);g&&h.push({id:"csr",title:"Certificate Signing Request",data:{type:"custom",render:()=>f.jsx(TB,{name:"Certificate Request",pem:g})}})}return s?.failureTime&&h.push({id:"failure",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 text-red-400",children:[f.jsx(ua,{size:14}),f.jsx("span",{className:"text-sm font-medium",children:"Failed"})]}),f.jsxs("div",{className:"text-xs text-neutral-500 mt-1",children:["Failure time: ",Q3(s.failureTime)]}),i.message&&f.jsx("div",{className:"text-xs text-red-400/70 mt-1",children:i.message})]})}}),{sections:h}}};function RB(t){if(t)return t instanceof Date?t.toISOString():t}function Z3(t){const e=RB(t);return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"N/A"}function ej(t){const e=RB(t);if(!e)return"N/A";const n=new Date(e),r=new Date().getTime()-n.getTime(),i=Math.floor(r/1e3),o=Math.floor(i/60),c=Math.floor(o/60),d=Math.floor(c/24);return d>0?`${d}d ago`:c>0?`${c}h ago`:o>0?`${o}m ago`:i>0?`${i}s ago`:"just now"}const wY={kinds:["Event","Events"],adapt(t,e){const n=e.metadata,s=e.involvedObject,r=e.source,i=e.type==="Warning",o=e.count??1,c=e.firstTimestamp||e.eventTime||n?.creationTimestamp,d=e.lastTimestamp||e.eventTime,h=[{id:"status",data:{type:"status-cards",items:[{label:"Type",value:e.type||"Normal",status:i?"warning":"success",icon:i?f.jsx(S0,{size:14,className:"text-amber-400"}):f.jsx(Q7,{size:14,className:"text-emerald-400"})},{label:"Reason",value:e.reason||"Unknown",status:"neutral"},...o>1?[{label:"Count",value:o,status:"neutral",icon:f.jsx(Y7,{size:14,className:"text-blue-400"})}]:[]]}}];return e.message&&h.push({id:"message",title:"Message",data:{type:"custom",render:()=>f.jsx("div",{className:`p-3 rounded-lg border ${i?"bg-amber-500/10 border-amber-500/30":"bg-neutral-100 dark:bg-neutral-900/50 border-neutral-200 dark:border-neutral-700"}`,children:f.jsx("p",{className:"text-sm text-neutral-700 dark:text-neutral-300 whitespace-pre-wrap",children:e.message})})}}),s&&s.name&&h.push({id:"involved-object",title:"Involved Object",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(FP,{size:14,className:"text-blue-400"}),f.jsx("span",{className:"text-sm font-medium text-blue-300",children:s.kind||"Resource"})]}),f.jsxs("div",{className:"space-y-1 text-xs",children:[f.jsxs("div",{className:"text-neutral-300",children:[f.jsx("span",{className:"text-neutral-500",children:"Name: "}),f.jsx("span",{className:"text-cyan-400 font-mono",children:s.name})]}),s.namespace&&f.jsxs("div",{className:"text-neutral-300",children:[f.jsx("span",{className:"text-neutral-500",children:"Namespace: "}),f.jsx("span",{className:"text-purple-400",children:s.namespace})]}),s.fieldPath&&f.jsxs("div",{className:"text-neutral-300",children:[f.jsx("span",{className:"text-neutral-500",children:"Field: "}),f.jsx("span",{className:"text-neutral-400 font-mono",children:s.fieldPath})]}),s.apiVersion&&f.jsxs("div",{className:"text-neutral-300",children:[f.jsx("span",{className:"text-neutral-500",children:"API Version: "}),f.jsx("span",{className:"text-neutral-400",children:s.apiVersion})]})]})]})}}),h.push({id:"timestamps",title:"Timestamps",data:{type:"custom",render:()=>f.jsxs("div",{className:"space-y-2",children:[c&&f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx(IT,{size:14,className:"text-neutral-500"}),f.jsx("span",{className:"text-neutral-500",children:"First seen:"}),f.jsx("span",{className:"text-neutral-300",children:Z3(c)}),f.jsxs("span",{className:"text-neutral-500",children:["(",ej(c),")"]})]}),d&&o>1&&f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx(En,{size:14,className:"text-neutral-500"}),f.jsx("span",{className:"text-neutral-500",children:"Last seen:"}),f.jsx("span",{className:"text-neutral-300",children:Z3(d)}),f.jsxs("span",{className:"text-neutral-500",children:["(",ej(d),")"]})]})]})}}),r&&(r.component||r.host)&&h.push({id:"source",title:"Source",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(Xr,{size:14,className:"text-neutral-400"}),f.jsx("span",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Event Source"})]}),f.jsxs("div",{className:"space-y-1 text-xs",children:[r.component&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-300",children:[f.jsx("span",{className:"text-neutral-500",children:"Component: "}),f.jsx("span",{className:"text-cyan-400",children:r.component})]}),r.host&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-300",children:[f.jsx("span",{className:"text-neutral-500",children:"Host: "}),f.jsx("span",{className:"text-neutral-400 font-mono",children:r.host})]})]})]})}}),(e.reportingComponent||e.reportingInstance)&&h.push({id:"reporting",title:"Reporting",data:{type:"info-grid",columns:2,items:[...e.reportingComponent?[{label:"Component",value:e.reportingComponent}]:[],...e.reportingInstance?[{label:"Instance",value:e.reportingInstance}]:[],...e.action?[{label:"Action",value:e.action}]:[]]}}),e.related&&e.related.name&&e.related.name!==s?.name&&h.push({id:"related",title:"Related Object",data:{type:"info-grid",columns:2,items:[{label:"Kind",value:e.related.kind||"Unknown"},{label:"Name",value:e.related.name},...e.related.namespace?[{label:"Namespace",value:e.related.namespace}]:[]]}}),{sections:h}}};function SY(t){switch(t){case"LoadBalancer":return{label:"LoadBalancer",status:"success",icon:f.jsx(ur,{size:14,className:"text-emerald-400"})};case"NodePort":return{label:"NodePort",status:"warning",icon:f.jsx(Xr,{size:14,className:"text-amber-400"})};case"ExternalName":return{label:"ExternalName",status:"neutral",icon:f.jsx(kS,{size:14,className:"text-purple-400"})};default:return{label:t||"ClusterIP",status:"neutral",icon:f.jsx(Ln,{size:14,className:"text-blue-400"})}}}const kY={kinds:["Service","Services"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=SY(n.type),i=n.type==="LoadBalancer",o=s?.loadBalancer?.ingress,c=i&&o&&o.length>0,d=[{id:"status",data:{type:"status-cards",items:[{label:"Type",value:r.label,status:r.status,icon:r.icon},...n.clusterIP&&n.clusterIP!=="None"?[{label:"Cluster IP",value:n.clusterIP,status:"neutral",icon:f.jsx(Ln,{size:14,className:"text-blue-400"})}]:[],...n.clusterIP==="None"?[{label:"Cluster IP",value:"Headless",status:"neutral",icon:f.jsx(Ln,{size:14,className:"text-neutral-400"})}]:[],...n.externalName?[{label:"External Name",value:n.externalName,status:"neutral",icon:f.jsx(kS,{size:14,className:"text-purple-400"})}]:[]]}}];return n.ports&&n.ports.length>0&&d.push({id:"ports",title:"Ports",data:{type:"custom",render:()=>f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsxs("table",{className:"w-full text-xs",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700",children:[f.jsx("th",{className:"pb-2 text-left text-neutral-500 font-medium",children:"Name"}),f.jsx("th",{className:"pb-2 text-left text-neutral-500 font-medium",children:"Protocol"}),f.jsx("th",{className:"pb-2 text-right text-neutral-500 font-medium",children:"Port"}),f.jsx("th",{className:"pb-2 text-right text-neutral-500 font-medium",children:"Target"}),f.jsx("th",{className:"pb-2 text-right text-neutral-500 font-medium",children:"NodePort"})]})}),f.jsx("tbody",{children:n.ports.map((g,m)=>f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-2 text-neutral-900 dark:text-neutral-300",children:g.name||f.jsx("span",{className:"text-neutral-400 italic",children:"unnamed"})}),f.jsx("td",{className:"py-2",children:f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-neutral-200 dark:bg-neutral-700 text-neutral-600 dark:text-neutral-400",children:g.protocol||"TCP"})}),f.jsx("td",{className:"py-2 text-right font-mono text-neutral-700 dark:text-neutral-300",children:g.port}),f.jsx("td",{className:"py-2 text-right font-mono text-neutral-700 dark:text-neutral-300",children:g.targetPort||f.jsx("span",{className:"text-neutral-400",children:""})}),f.jsx("td",{className:"py-2 text-right font-mono text-amber-500 dark:text-amber-400",children:g.nodePort||f.jsx("span",{className:"text-neutral-400",children:""})})]},m))})]})})}}),i&&d.push({id:"loadbalancer",title:"Load Balancer",data:{type:"custom",render:()=>f.jsx("div",{className:`rounded-lg p-3 border ${c?"bg-emerald-500/10 border-emerald-500/30":"bg-amber-500/10 border-amber-500/30"}`,children:c?f.jsx("div",{className:"space-y-2",children:o.map((g,m)=>f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(ur,{size:14,className:"text-emerald-400"}),f.jsx("span",{className:"text-sm font-mono text-emerald-300",children:g.ip||g.hostname||"N/A"})]},m))}):f.jsxs("div",{className:"flex items-center gap-2 text-amber-400",children:[f.jsx(ur,{size:14}),f.jsx("span",{className:"text-sm",children:"Pending external IP assignment..."})]})})}}),n.externalIPs&&n.externalIPs.length>0&&d.push({id:"external-ips",title:"External IPs",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.externalIPs.map((g,m)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-purple-500/20 text-purple-300 font-mono",children:g},m))})}}),n.selector&&Object.keys(n.selector).length>0&&d.push({id:"selector",data:{type:"labels",labels:n.selector,title:"Selector"}}),(n.externalTrafficPolicy||n.internalTrafficPolicy||n.sessionAffinity!=="None")&&d.push({id:"traffic",title:"Traffic Configuration",data:{type:"info-grid",columns:2,items:[...n.externalTrafficPolicy?[{label:"External Traffic",value:n.externalTrafficPolicy,color:n.externalTrafficPolicy==="Local"?"text-amber-400":void 0}]:[],...n.internalTrafficPolicy?[{label:"Internal Traffic",value:n.internalTrafficPolicy}]:[],...n.sessionAffinity&&n.sessionAffinity!=="None"?[{label:"Session Affinity",value:n.sessionAffinity,color:"text-purple-400"}]:[],...n.sessionAffinityConfig?.clientIP?.timeoutSeconds?[{label:"Affinity Timeout",value:`${n.sessionAffinityConfig.clientIP.timeoutSeconds}s`}]:[],...n.healthCheckNodePort?[{label:"Health Check Port",value:n.healthCheckNodePort}]:[]]}}),i&&(n.loadBalancerIP||n.loadBalancerSourceRanges?.length||n.loadBalancerClass)&&d.push({id:"lb-config",title:"Load Balancer Configuration",data:{type:"custom",render:()=>f.jsxs("div",{className:"space-y-2",children:[n.loadBalancerIP&&f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx("span",{className:"text-neutral-500",children:"Requested IP:"}),f.jsx("span",{className:"text-neutral-300 font-mono",children:n.loadBalancerIP})]}),n.loadBalancerClass&&f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx("span",{className:"text-neutral-500",children:"Class:"}),f.jsx("span",{className:"text-neutral-300",children:n.loadBalancerClass})]}),n.loadBalancerSourceRanges&&n.loadBalancerSourceRanges.length>0&&f.jsxs("div",{className:"text-sm",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(Sf,{size:14,className:"text-neutral-500"}),f.jsx("span",{className:"text-neutral-500",children:"Source Ranges:"})]}),f.jsx("div",{className:"flex flex-wrap gap-1 ml-5",children:n.loadBalancerSourceRanges.map((g,m)=>f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-amber-500/20 text-amber-300 font-mono",children:g},m))})]}),n.allocateLoadBalancerNodePorts===!1&&f.jsx("div",{className:"text-xs text-neutral-500",children:"NodePort allocation disabled"})]})}}),{sections:d}}};async function CY(t){try{const e=atob(t),n=atob(e),s=new Uint8Array(n.length);for(let b=0;b<n.length;b++)s[b]=n.charCodeAt(b);const r=new DecompressionStream("gzip"),i=r.writable.getWriter();i.write(s),i.close();const o=r.readable.getReader(),c=[];for(;;){const{done:b,value:y}=await o.read();if(b)break;c.push(y)}const d=c.reduce((b,y)=>b+y.length,0),h=new Uint8Array(d);let g=0;for(const b of c)h.set(b,g),g+=b.length;const m=new TextDecoder().decode(h);return JSON.parse(m)}catch(e){return console.error("Failed to decode Helm release:",e),null}}function NY(t){switch(t?.toLowerCase()){case"deployed":return"text-emerald-400";case"failed":return"text-red-400";case"pending-install":case"pending-upgrade":case"pending-rollback":return"text-yellow-400";case"uninstalling":case"superseded":return"text-neutral-400";default:return"text-neutral-300"}}function AY(t){const e=Me.c(52),{encoded:n}=t,[s,r]=F.useState(null),[i,o]=F.useState(null),[c,d]=F.useState(!0),[h,g]=F.useState(!1),[m,b]=F.useState(!1),[y,w]=F.useState(!1),[x,S]=F.useState(null);let k,C;e[0]!==n?(k=()=>{CY(n).then(_e=>{r(_e),d(!1)}).catch(()=>{o("Failed to decode Helm release data"),d(!1)})},C=[n],e[0]=n,e[1]=k,e[2]=C):(k=e[1],C=e[2]),F.useEffect(k,C);let N;e[3]===Symbol.for("react.memo_cache_sentinel")?(N=async(_e,Ce)=>{await navigator.clipboard.writeText(Ce),S(_e),setTimeout(()=>S(null),2e3)},e[3]=N):N=e[3];const R=N;if(c){let _e;return e[4]===Symbol.for("react.memo_cache_sentinel")?(_e=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Decoding Helm release..."})}),e[4]=_e):_e=e[4],_e}if(i||!s){const _e=i||"Failed to decode release";let Ce;return e[5]!==_e?(Ce=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("span",{className:"text-xs text-red-600 dark:text-red-400",children:_e})}),e[5]=_e,e[6]=Ce):Ce=e[6],Ce}const B=s.chart?.metadata,E=s.info;let z;e[7]!==B?(z=B?.description&&f.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:B.description}),e[7]=B,e[8]=z):z=e[8];let U;e[9]===Symbol.for("react.memo_cache_sentinel")?(U=f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 dark:text-neutral-500 whitespace-nowrap",children:"Release"}),e[9]=U):U=e[9];const Y=s.name||"Unknown";let D;e[10]!==Y?(D=f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[U,f.jsx("td",{className:"py-1.5 text-neutral-900 dark:text-neutral-300",children:Y})]}),e[10]=Y,e[11]=D):D=e[11];let W;e[12]===Symbol.for("react.memo_cache_sentinel")?(W=f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 dark:text-neutral-500 whitespace-nowrap",children:"Revision"}),e[12]=W):W=e[12];const V=s.version||1;let q;e[13]!==V?(q=f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[W,f.jsx("td",{className:"py-1.5 text-neutral-900 dark:text-neutral-300",children:V})]}),e[13]=V,e[14]=q):q=e[14];let X;e[15]===Symbol.for("react.memo_cache_sentinel")?(X=f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 dark:text-neutral-500 whitespace-nowrap",children:"Status"}),e[15]=X):X=e[15];const I=E?.status;let L;e[16]!==I?(L=NY(I),e[16]=I,e[17]=L):L=e[17];const J=`py-1.5 font-medium ${L}`,G=E?.status||"Unknown";let P;e[18]!==J||e[19]!==G?(P=f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[X,f.jsx("td",{className:J,children:G})]}),e[18]=J,e[19]=G,e[20]=P):P=e[20];let T;e[21]!==B?(T=B&&f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 dark:text-neutral-500 whitespace-nowrap",children:"Chart"}),f.jsxs("td",{className:"py-1.5 text-neutral-900 dark:text-neutral-300",children:[B.name,"-",B.version]})]}),e[21]=B,e[22]=T):T=e[22];let O;e[23]!==B?(O=B?.appVersion&&f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 dark:text-neutral-500 whitespace-nowrap",children:"App Version"}),f.jsx("td",{className:"py-1.5 text-cyan-600 dark:text-cyan-400",children:B.appVersion})]}),e[23]=B,e[24]=O):O=e[24];let K;e[25]!==E?(K=E?.last_deployed&&f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 dark:text-neutral-500 whitespace-nowrap",children:"Last Deployed"}),f.jsx("td",{className:"py-1.5 text-neutral-900 dark:text-neutral-300",children:new Date(E.last_deployed).toLocaleString()})]}),e[25]=E,e[26]=K):K=e[26];let j;e[27]!==q||e[28]!==P||e[29]!==T||e[30]!==O||e[31]!==K||e[32]!==D?(j=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("table",{className:"w-full text-xs",children:f.jsxs("tbody",{children:[D,q,P,T,O,K]})})}),e[27]=q,e[28]=P,e[29]=T,e[30]=O,e[31]=K,e[32]=D,e[33]=j):j=e[33];let Z;e[34]!==x||e[35]!==s.config||e[36]!==h?(Z=s.config&&Object.keys(s.config).length>0&&f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:()=>g(!h),className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(wf,{size:14,className:"text-amber-500 dark:text-amber-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:"User Values"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:_e=>{_e.stopPropagation(),R("values",JSON.stringify(s.config,null,2))},className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy values",children:x==="values"?f.jsx(bn,{size:14,className:"text-emerald-500"}):f.jsx(hs,{size:14,className:"text-neutral-400"})}),h?f.jsx(rs,{size:14,className:"text-neutral-400"}):f.jsx(Or,{size:14,className:"text-neutral-400"})]})]}),h&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:JSON.stringify(s.config,null,2)})})]}),e[34]=x,e[35]=s.config,e[36]=h,e[37]=Z):Z=e[37];let le;e[38]!==x||e[39]!==E||e[40]!==y?(le=E?.notes&&f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:()=>w(!y),className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(xi,{size:14,className:"text-blue-500 dark:text-blue-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:"Release Notes"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:_e=>{_e.stopPropagation(),R("notes",E.notes||"")},className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy notes",children:x==="notes"?f.jsx(bn,{size:14,className:"text-emerald-500"}):f.jsx(hs,{size:14,className:"text-neutral-400"})}),y?f.jsx(rs,{size:14,className:"text-neutral-400"}):f.jsx(Or,{size:14,className:"text-neutral-400"})]})]}),y&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:E.notes})})]}),e[38]=x,e[39]=E,e[40]=y,e[41]=le):le=e[41];let te;e[42]!==x||e[43]!==s.manifest||e[44]!==m?(te=s.manifest&&f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:()=>b(!m),className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(xi,{size:14,className:"text-purple-500 dark:text-purple-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:"Rendered Manifest"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:_e=>{_e.stopPropagation(),R("manifest",s.manifest||"")},className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy manifest",children:x==="manifest"?f.jsx(bn,{size:14,className:"text-emerald-500"}):f.jsx(hs,{size:14,className:"text-neutral-400"})}),m?f.jsx(rs,{size:14,className:"text-neutral-400"}):f.jsx(Or,{size:14,className:"text-neutral-400"})]})]}),m&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-96 overflow-y-auto",children:s.manifest})})]}),e[42]=x,e[43]=s.manifest,e[44]=m,e[45]=te):te=e[45];let pe;return e[46]!==j||e[47]!==Z||e[48]!==le||e[49]!==te||e[50]!==z?(pe=f.jsxs("div",{className:"space-y-4",children:[z,j,Z,le,te]}),e[46]=j,e[47]=Z,e[48]=le,e[49]=te,e[50]=z,e[51]=pe):pe=e[51],pe}function EY(t){try{const e=atob(t);return JSON.parse(e)}catch{return null}}function jY(t){try{const e=atob(t),[n,...s]=e.split(":");return{username:n,password:s.join(":")}}catch{return null}}function TY(t){const e=Me.c(21),{encoded:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=new Set,e[0]=s):s=e[0];const[r,i]=F.useState(s),[o,c]=F.useState(null),[d,h]=F.useState(!1);let g,m,b,y,w;if(e[1]!==o||e[2]!==n||e[3]!==r){w=Symbol.for("react.early_return_sentinel");e:{const k=EY(n);m=k?JSON.stringify(k,null,2):null;let C;e[9]===Symbol.for("react.memo_cache_sentinel")?(C=async(B,E)=>{await navigator.clipboard.writeText(E),c(B),setTimeout(()=>c(null),2e3)},e[9]=C):C=e[9],g=C;const N=B=>{i(E=>{const z=new Set(E);return z.has(B)?z.delete(B):z.add(B),z})};if(!k||!k.auths){let B;e[10]===Symbol.for("react.memo_cache_sentinel")?(B=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("span",{className:"text-xs text-red-600 dark:text-red-400",children:"Failed to decode Docker config"})}),e[10]=B):B=e[10],w=B;break e}const R=Object.entries(k.auths);if(R.length===0){let B;e[11]===Symbol.for("react.memo_cache_sentinel")?(B=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"No registries configured"})}),e[11]=B):B=e[11],w=B;break e}b="space-y-3",y=R.map(B=>{const[E,z]=B;let U=z.username,Y=z.password;if(!U&&z.auth){const W=jY(z.auth);W&&(U=W.username,Y=W.password)}const D=r.has(E);return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[f.jsx(Xr,{size:14,className:"text-blue-500 dark:text-blue-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-900 dark:text-neutral-200 break-all",children:E})]}),f.jsx("table",{className:"w-full text-xs",children:f.jsxs("tbody",{children:[U&&f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 whitespace-nowrap w-1",children:f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(FT,{size:12}),"Username"]})}),f.jsx("td",{className:"py-1.5 text-neutral-900 dark:text-neutral-300",children:U}),f.jsx("td",{className:"py-1.5",children:f.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[f.jsx("div",{className:"w-7"}),f.jsx("button",{onClick:()=>g(`${E}-username`,U),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:"Copy username",children:o===`${E}-username`?f.jsx(bn,{size:12,className:"text-emerald-500"}):f.jsx(hs,{size:12,className:"text-neutral-400"})})]})})]}),Y&&f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 whitespace-nowrap w-1",children:f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(wf,{size:12}),"Password"]})}),f.jsx("td",{className:"py-1.5 font-mono",children:D?f.jsx("span",{className:"text-neutral-900 dark:text-neutral-300 break-all",children:Y}):f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:""})}),f.jsx("td",{className:"py-1.5",children:f.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[f.jsx("button",{onClick:()=>N(E),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:D?"Hide password":"Reveal password",children:D?f.jsx(CS,{size:12,className:"text-neutral-400"}):f.jsx(NS,{size:12,className:"text-neutral-400"})}),f.jsx("button",{onClick:()=>g(`${E}-password`,Y),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:"Copy password",children:o===`${E}-password`?f.jsx(bn,{size:12,className:"text-emerald-500"}):f.jsx(hs,{size:12,className:"text-neutral-400"})})]})})]}),z.email&&f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 whitespace-nowrap w-1",children:f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(cP,{size:12}),"Email"]})}),f.jsx("td",{className:"py-1.5 text-neutral-900 dark:text-neutral-300",children:z.email}),f.jsx("td",{className:"py-1.5",children:f.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[f.jsx("div",{className:"w-7"}),f.jsx("button",{onClick:()=>g(`${E}-email`,z.email),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:"Copy email",children:o===`${E}-email`?f.jsx(bn,{size:12,className:"text-emerald-500"}):f.jsx(hs,{size:12,className:"text-neutral-400"})})]})})]})]})})]},E)})}e[1]=o,e[2]=n,e[3]=r,e[4]=g,e[5]=m,e[6]=b,e[7]=y,e[8]=w}else g=e[4],m=e[5],b=e[6],y=e[7],w=e[8];if(w!==Symbol.for("react.early_return_sentinel"))return w;let x;e[12]!==o||e[13]!==g||e[14]!==m||e[15]!==d?(x=m&&f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:()=>h(!d),className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(xi,{size:14,className:"text-purple-500 dark:text-purple-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:"Docker Config"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:k=>{k.stopPropagation(),g("raw",m)},className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy JSON",children:o==="raw"?f.jsx(bn,{size:14,className:"text-emerald-500"}):f.jsx(hs,{size:14,className:"text-neutral-400"})}),d?f.jsx(rs,{size:14,className:"text-neutral-400"}):f.jsx(Or,{size:14,className:"text-neutral-400"})]})]}),d&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:m})})]}),e[12]=o,e[13]=g,e[14]=m,e[15]=d,e[16]=x):x=e[16];let S;return e[17]!==b||e[18]!==y||e[19]!==x?(S=f.jsxs("div",{className:b,children:[y,x]}),e[17]=b,e[18]=y,e[19]=x,e[20]=S):S=e[20],S}function RY(t){try{return atob(t)}catch{return null}}function OY(t){let e=0;for(let n=0;n<Math.min(t.length,1e3);n++){const s=t.charCodeAt(n);(s===0||s<32&&s!==9&&s!==10&&s!==13)&&e++}return e>t.length*.1}function tj(t){return t.replace(/^[\r\n]+|[\r\n]+$/g,"").includes(`
`)}function MY(t){return!t.endsWith(".crt")&&!t.endsWith(".pem")&&t!=="ca.crt"&&t!=="tls.crt"&&t!=="namespace"}function BY(t){const e=Me.c(12),{entries:n}=t,[s,r]=F.useState(null);let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=new Set,e[0]=i):i=e[0];const[o,c]=F.useState(i);let d;e[1]===Symbol.for("react.memo_cache_sentinel")?(d=async(w,x)=>{await navigator.clipboard.writeText(x),r(w),setTimeout(()=>r(null),2e3)},e[1]=d):d=e[1];const h=d;let g;e[2]===Symbol.for("react.memo_cache_sentinel")?(g=w=>{c(x=>{const S=new Set(x);return S.has(w)?S.delete(w):S.add(w),S})},e[2]=g):g=e[2];const m=g;let b;if(e[3]!==s||e[4]!==n||e[5]!==o){let w;e[7]!==s||e[8]!==o?(w=x=>{const{key:S,decoded:k,isSensitive:C}=x;return f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 whitespace-nowrap",children:S}),f.jsx("td",{className:"py-1.5 font-mono break-all",children:C&&!o.has(S)?f.jsx("span",{className:"text-neutral-400",children:""}):f.jsx("span",{className:"text-neutral-900 dark:text-neutral-300",children:k})}),f.jsx("td",{className:"py-1.5 w-1",children:f.jsxs("div",{className:"flex items-center gap-1",children:[C?f.jsx("button",{onClick:()=>m(S),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:o.has(S)?"Hide value":"Reveal value",children:o.has(S)?f.jsx(CS,{size:12,className:"text-neutral-400"}):f.jsx(NS,{size:12,className:"text-neutral-400"})}):f.jsx("div",{className:"w-7"}),f.jsx("button",{onClick:()=>h(S,k),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:"Copy value",children:s===S?f.jsx(bn,{size:12,className:"text-emerald-500"}):f.jsx(hs,{size:12,className:"text-neutral-400"})})]})})]},S)},e[7]=s,e[8]=o,e[9]=w):w=e[9],b=n.map(w),e[3]=s,e[4]=n,e[5]=o,e[6]=b}else b=e[6];let y;return e[10]!==b?(y=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("table",{className:"w-full text-xs",children:f.jsx("tbody",{children:b})})}),e[10]=b,e[11]=y):y=e[11],y}function DY(t){const e=Me.c(35),{name:n,decoded:s,isSensitive:r}=t,[i,o]=F.useState(!1),[c,d]=F.useState(!1),[h,g]=F.useState(!1);let m;e[0]!==s?(m=async()=>{await navigator.clipboard.writeText(s),g(!0),setTimeout(()=>g(!1),2e3)},e[0]=s,e[1]=m):m=e[1];const b=m;let y;e[2]!==i?(y=()=>o(!i),e[2]=i,e[3]=y):y=e[3];let w;e[4]===Symbol.for("react.memo_cache_sentinel")?(w=f.jsx(wf,{size:14,className:"text-amber-500 dark:text-amber-400"}),e[4]=w):w=e[4];let x;e[5]!==n?(x=f.jsxs("div",{className:"flex items-center gap-2",children:[w,f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n})]}),e[5]=n,e[6]=x):x=e[6];let S;e[7]!==b?(S=Y=>{Y.stopPropagation(),b()},e[7]=b,e[8]=S):S=e[8];let k;e[9]!==h?(k=h?f.jsx(bn,{size:14,className:"text-emerald-500"}):f.jsx(hs,{size:14,className:"text-neutral-400"}),e[9]=h,e[10]=k):k=e[10];let C;e[11]!==S||e[12]!==k?(C=f.jsx("button",{onClick:S,className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy value",children:k}),e[11]=S,e[12]=k,e[13]=C):C=e[13];let N;e[14]!==r||e[15]!==c?(N=r&&f.jsx("button",{onClick:Y=>{Y.stopPropagation(),d(!c)},className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:c?"Hide value":"Reveal value",children:c?f.jsx(CS,{size:14,className:"text-neutral-400"}):f.jsx(NS,{size:14,className:"text-neutral-400"})}),e[14]=r,e[15]=c,e[16]=N):N=e[16];let R;e[17]!==i?(R=i?f.jsx(rs,{size:14,className:"text-neutral-400"}):f.jsx(Or,{size:14,className:"text-neutral-400"}),e[17]=i,e[18]=R):R=e[18];let B;e[19]!==C||e[20]!==N||e[21]!==R?(B=f.jsxs("div",{className:"flex items-center gap-1",children:[C,N,R]}),e[19]=C,e[20]=N,e[21]=R,e[22]=B):B=e[22];let E;e[23]!==B||e[24]!==y||e[25]!==x?(E=f.jsxs("button",{onClick:y,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[x,B]}),e[23]=B,e[24]=y,e[25]=x,e[26]=E):E=e[26];let z;e[27]!==s||e[28]!==i||e[29]!==r||e[30]!==c?(z=i&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:r&&!c?f.jsx("span",{className:"text-xs text-neutral-400 font-mono",children:""}):f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:s})}),e[27]=s,e[28]=i,e[29]=r,e[30]=c,e[31]=z):z=e[31];let U;return e[32]!==E||e[33]!==z?(U=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[E,z]}),e[32]=E,e[33]=z,e[34]=U):U=e[34],U}const LY={kinds:["Secret","Secrets"],adapt(t,e){const n=e.data||{},s=e.stringData||{},r=[...new Set([...Object.keys(n),...Object.keys(s)])];if(e.type==="helm.sh/release.v1"&&n.release)return{sections:[{id:"helm-release",data:{type:"custom",render:()=>f.jsx(AY,{encoded:n.release})}}]};if(e.type==="kubernetes.io/dockerconfigjson"&&n[".dockerconfigjson"])return{sections:[{id:"docker-config",data:{type:"custom",render:()=>f.jsx(TY,{encoded:n[".dockerconfigjson"]})}}]};const i=[];e.immutable&&i.push({id:"status",data:{type:"status-cards",items:[{label:"Immutable",value:"Yes",status:"warning",icon:f.jsx(Sf,{size:14,className:"text-amber-400"})}]}});const o=[],c=[],d=[],h=[],g=[],m=[],b=[];return r.forEach(y=>{const w=n[y]||btoa(s[y]||""),x=RY(w),S=MY(y);if(!x)d.push(y);else if(OY(x))d.push(y);else{const k=uY(x);if(k)switch(k.type){case"certificate":h.push({key:y,pem:k.content});break;case"private-key":g.push({key:y,pem:k.content});break;case"public-key":m.push(y);break;case"csr":b.push({key:y,pem:k.content});break;default:tj(x)?c.push({key:y,decoded:x,isSensitive:S}):o.push({key:y,decoded:x,isSensitive:S})}else tj(x)?c.push({key:y,decoded:x,isSensitive:S}):o.push({key:y,decoded:x,isSensitive:S})}}),h.length>0&&i.push({id:"certificates",title:"Certificates",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:h.map(({key:y,pem:w})=>f.jsx(Tw,{name:y,pem:w},y))})}}),g.length>0&&i.push({id:"private-keys",title:"Private Keys",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:g.map(({key:y,pem:w})=>f.jsx(mY,{name:y,pem:w},y))})}}),m.length>0&&i.push({id:"public-keys",title:"Public Keys",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:m.map(y=>f.jsx(gY,{name:y},y))})}}),b.length>0&&i.push({id:"csrs",title:"Certificate Requests",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:b.map(({key:y,pem:w})=>f.jsx(TB,{name:y,pem:w},y))})}}),o.length>0&&i.push({id:"data-simple",title:"Data",data:{type:"custom",render:()=>f.jsx(BY,{entries:o})}}),c.length>0&&i.push({id:"data-multiline",title:o.length>0?"Files":"Data",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:c.map(({key:y,decoded:w,isSensitive:x})=>f.jsx(DY,{name:y,decoded:w,isSensitive:x},y))})}}),d.length>0&&i.push({id:"binary-data",title:"Binary Data",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:d.map(y=>f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-3",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(xi,{size:14,className:"text-purple-500 dark:text-purple-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:y}),f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-purple-100 dark:bg-purple-500/20 text-purple-600 dark:text-purple-400",children:"Binary"})]})},y))})}}),{sections:i}}};function IY(t){return t.includes(`
`)}function PY(t){const e=Me.c(29),{name:n,value:s}=t,[r,i]=F.useState(!1),[o,c]=F.useState(!1);let d;e[0]!==s?(d=async()=>{await navigator.clipboard.writeText(s),c(!0),setTimeout(()=>c(!1),2e3)},e[0]=s,e[1]=d):d=e[1];const h=d;let g;e[2]!==r?(g=()=>i(!r),e[2]=r,e[3]=g):g=e[3];let m;e[4]===Symbol.for("react.memo_cache_sentinel")?(m=f.jsx(xi,{size:14,className:"text-blue-500 dark:text-blue-400"}),e[4]=m):m=e[4];let b;e[5]!==n?(b=f.jsxs("div",{className:"flex items-center gap-2",children:[m,f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n})]}),e[5]=n,e[6]=b):b=e[6];let y;e[7]!==h?(y=B=>{B.stopPropagation(),h()},e[7]=h,e[8]=y):y=e[8];let w;e[9]!==o?(w=o?f.jsx(bn,{size:14,className:"text-emerald-500"}):f.jsx(hs,{size:14,className:"text-neutral-400"}),e[9]=o,e[10]=w):w=e[10];let x;e[11]!==y||e[12]!==w?(x=f.jsx("button",{onClick:y,className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy value",children:w}),e[11]=y,e[12]=w,e[13]=x):x=e[13];let S;e[14]!==r?(S=r?f.jsx(rs,{size:14,className:"text-neutral-400"}):f.jsx(Or,{size:14,className:"text-neutral-400"}),e[14]=r,e[15]=S):S=e[15];let k;e[16]!==x||e[17]!==S?(k=f.jsxs("div",{className:"flex items-center gap-1",children:[x,S]}),e[16]=x,e[17]=S,e[18]=k):k=e[18];let C;e[19]!==g||e[20]!==b||e[21]!==k?(C=f.jsxs("button",{onClick:g,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[b,k]}),e[19]=g,e[20]=b,e[21]=k,e[22]=C):C=e[22];let N;e[23]!==r||e[24]!==s?(N=r&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-700 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:s})}),e[23]=r,e[24]=s,e[25]=N):N=e[25];let R;return e[26]!==C||e[27]!==N?(R=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[C,N]}),e[26]=C,e[27]=N,e[28]=R):R=e[28],R}function $Y(t){const e=Me.c(8),{entries:n}=t,[s,r]=F.useState(null);let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=async(h,g)=>{await navigator.clipboard.writeText(g),r(h),setTimeout(()=>r(null),2e3)},e[0]=i):i=e[0];const o=i;let c;if(e[1]!==s||e[2]!==n){let h;e[4]!==s?(h=g=>{const[m,b]=g;return f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 whitespace-nowrap",children:m}),f.jsx("td",{className:"py-1.5 font-mono break-all text-neutral-900 dark:text-neutral-300",children:b}),f.jsx("td",{className:"py-1.5 w-1",children:f.jsx("button",{onClick:()=>o(m,b),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:"Copy value",children:s===m?f.jsx(bn,{size:12,className:"text-emerald-500"}):f.jsx(hs,{size:12,className:"text-neutral-400"})})})]},m)},e[4]=s,e[5]=h):h=e[5],c=n.map(h),e[1]=s,e[2]=n,e[3]=c}else c=e[3];let d;return e[6]!==c?(d=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("table",{className:"w-full text-xs",children:f.jsx("tbody",{children:c})})}),e[6]=c,e[7]=d):d=e[7],d}function zY(t){const e=Me.c(16),{name:n,value:s}=t,[r,i]=F.useState(!1);let o;e[0]!==s?(o=async()=>{await navigator.clipboard.writeText(s),i(!0),setTimeout(()=>i(!1),2e3)},e[0]=s,e[1]=o):o=e[1];const c=o;let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=f.jsx(xi,{size:14,className:"text-purple-500 dark:text-purple-400"}),e[2]=d):d=e[2];let h;e[3]!==n?(h=f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n}),e[3]=n,e[4]=h):h=e[4];let g;e[5]===Symbol.for("react.memo_cache_sentinel")?(g=f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-purple-100 dark:bg-purple-500/20 text-purple-600 dark:text-purple-400",children:"Binary"}),e[5]=g):g=e[5];let m;e[6]!==h?(m=f.jsxs("div",{className:"flex items-center gap-2",children:[d,h,g]}),e[6]=h,e[7]=m):m=e[7];let b;e[8]!==r?(b=r?f.jsx(bn,{size:12,className:"text-emerald-500"}):f.jsx(hs,{size:12,className:"text-neutral-400"}),e[8]=r,e[9]=b):b=e[9];let y;e[10]!==c||e[11]!==b?(y=f.jsx("button",{onClick:c,className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:"Copy base64 value",children:b}),e[10]=c,e[11]=b,e[12]=y):y=e[12];let w;return e[13]!==m||e[14]!==y?(w=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-3",children:f.jsxs("div",{className:"flex items-center justify-between",children:[m,y]})}),e[13]=m,e[14]=y,e[15]=w):w=e[15],w}const HY={kinds:["ConfigMap","ConfigMaps"],adapt(t,e){const n=e.data||{},s=e.binaryData||{},r=Object.keys(n),i=Object.keys(s),o=r.length+i.length,c=[{id:"status",data:{type:"status-cards",items:[...e.immutable?[{label:"Immutable",value:"Yes",status:"warning",icon:f.jsx(Sf,{size:14,className:"text-amber-400"})}]:[]]}}],d=[],h=[];return r.forEach(g=>{IY(n[g])?h.push([g,n[g]]):d.push([g,n[g]])}),d.length>0&&c.push({id:"data-simple",title:"Data",data:{type:"custom",render:()=>f.jsx($Y,{entries:d})}}),h.length>0&&c.push({id:"data-multiline",title:d.length>0?"Files":"Data",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:h.map(([g,m])=>f.jsx(PY,{name:g,value:m},g))})}}),i.length>0&&c.push({id:"binary-data",title:"Binary Data",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:i.map(g=>f.jsx(zY,{name:g,value:s[g]},g))})}}),o===0&&c.push({id:"empty",data:{type:"custom",render:()=>f.jsxs("div",{className:"text-center py-8 text-neutral-400 dark:text-neutral-500",children:[f.jsx(xi,{size:32,className:"mx-auto mb-2 opacity-50"}),f.jsx("p",{className:"text-sm",children:"This ConfigMap is empty"})]})}}),{sections:c}}},UY={kinds:["Gateway","Gateways"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=s?.conditions?.find(h=>h.type==="Accepted"),i=s?.conditions?.find(h=>h.type==="Programmed"),o=r?.status==="True",c=i?.status==="True",d=s?.listeners?.reduce((h,g)=>h+(g.attachedRoutes||0),0)||0;return{sections:[{id:"status",title:"Gateway Status",data:{type:"status-cards",items:[{label:"Gateway Class",value:n.gatewayClassName,status:"neutral"},{label:"Accepted",value:o?"Yes":"No",status:o?"success":"error"},{label:"Programmed",value:c?"Yes":"No",status:c?"success":"error"},{label:"Attached Routes",value:d,status:"neutral"}]}},...s?.addresses&&s.addresses.length>0?[{id:"addresses",title:"Addresses",data:{type:"info-grid",items:s.addresses.map(h=>({label:h.type||"IPAddress",value:h.value,color:"text-blue-400"})),columns:2}}]:[],{id:"listeners",title:"Listeners",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.listeners.map(h=>f.jsx(VY,{listener:h,status:s},h.name))})}}]}}};function VY(t){const e=Me.c(32),{listener:n,status:s}=t,[r,i]=Wr.useState(!1);let o;e[0]!==n.name||e[1]!==s?.listeners?(o=s?.listeners?.find(R=>R.name===n.name),e[0]=n.name,e[1]=s?.listeners,e[2]=o):o=e[2];const d=o?.attachedRoutes??0;let h;e[3]!==r?(h=()=>i(!r),e[3]=r,e[4]=h):h=e[4];let g;e[5]===Symbol.for("react.memo_cache_sentinel")?(g=f.jsx(wP,{size:14,className:"text-emerald-400"}),e[5]=g):g=e[5];let m;e[6]!==n.name?(m=f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:n.name}),e[6]=n.name,e[7]=m):m=e[7];let b;e[8]!==n.protocol?(b=f.jsx("span",{className:"px-1.5 py-0.5 rounded text-xs bg-blue-500/20 text-blue-400",children:n.protocol}),e[8]=n.protocol,e[9]=b):b=e[9];let y;e[10]!==m||e[11]!==b?(y=f.jsxs("div",{className:"flex items-center gap-2",children:[m,b]}),e[10]=m,e[11]=b,e[12]=y):y=e[12];const w=d!==1?"s":"";let x;e[13]!==d||e[14]!==n.port||e[15]!==w?(x=f.jsxs("div",{className:"text-xs text-neutral-500",children:["Port ",n.port,"  ",d," route",w]}),e[13]=d,e[14]=n.port,e[15]=w,e[16]=x):x=e[16];let S;e[17]!==y||e[18]!==x?(S=f.jsxs("div",{className:"flex-1 min-w-0",children:[y,x]}),e[17]=y,e[18]=x,e[19]=S):S=e[19];let k;e[20]!==h||e[21]!==S?(k=f.jsxs("button",{onClick:h,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[g,S]}),e[20]=h,e[21]=S,e[22]=k):k=e[22];let C;e[23]!==d||e[24]!==r||e[25]!==n.hostname||e[26]!==n.port||e[27]!==n.protocol?(C=r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Protocol & Port"}),f.jsxs("div",{className:"text-xs space-y-1",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Protocol:"}),f.jsx("span",{className:"text-blue-400",children:n.protocol})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Port:"}),f.jsx("span",{className:"text-cyan-400",children:n.port})]})]})]}),n.hostname&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Hostname"}),f.jsx("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(ur,{size:10,className:"text-cyan-400"}),f.jsx("span",{className:"text-cyan-400",children:n.hostname})]})})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Attached Routes"}),f.jsxs("div",{className:"text-xs",children:[f.jsx("span",{className:"text-emerald-400 font-medium",children:d}),f.jsxs("span",{className:"text-neutral-500 ml-1",children:["route",d!==1?"s":""," attached"]})]})]})]}),e[23]=d,e[24]=r,e[25]=n.hostname,e[26]=n.port,e[27]=n.protocol,e[28]=C):C=e[28];let N;return e[29]!==k||e[30]!==C?(N=f.jsxs("div",{className:"border border-emerald-500/30 bg-emerald-500/5 rounded-lg overflow-hidden",children:[k,C]}),e[29]=k,e[30]=C,e[31]=N):N=e[31],N}const FY={kinds:["HTTPRoute","HTTPRoutes"],adapt(t,e){const n=e.spec,s=e.status;return n?{sections:[...n.parentRefs&&n.parentRefs.length>0?[{id:"parents",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(pu,{size:10})," Parent Gateway",n.parentRefs.length>1?"s":""]}),f.jsx("div",{className:"space-y-1",children:n.parentRefs.map((r,i)=>{const c=s?.parents?.find(h=>h.parentRef.name===r.name)?.conditions?.find(h=>h.type==="Accepted"),d=c?.status==="True";return f.jsxs("div",{className:"text-sm flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Gateway:"}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:r.name}),r.namespace&&f.jsxs("span",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:["(",r.namespace,")"]}),f.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${d?"bg-emerald-500/20 text-emerald-600 dark:text-emerald-400":"bg-amber-500/20 text-amber-700 dark:text-amber-400"}`,children:d?"Accepted":c?.reason||"Unknown"})]},i)})})]})}}]:[],...n.hostnames&&n.hostnames.length>0?[{id:"hostnames",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 border border-neutral-200 dark:border-neutral-700 rounded-lg p-3",children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-2",children:"Hostnames"}),f.jsx("div",{className:"flex flex-wrap gap-2",children:n.hostnames.map((r,i)=>f.jsx("div",{className:"bg-cyan-500/10 border border-cyan-500/30 rounded px-2.5 py-1 text-sm text-cyan-600 dark:text-cyan-400 font-mono",children:r},i))})]})}}]:[],...n.rules&&n.rules.length>0?[{id:"rules",title:"Routing Rules",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.rules.map((r,i)=>f.jsx(qY,{rule:r,index:i},r.matches?.[0]?.path?.value||`rule-${i}`))})}}]:[]]}:{sections:[]}}};function qY(t){const e=Me.c(22),{rule:n,index:s}=t,[r,i]=Wr.useState(!1),o=n.matches?.length||0,c=n.backendRefs?.length||0;let d;e[0]!==r?(d=()=>i(!r),e[0]=r,e[1]=d):d=e[1];let h;e[2]===Symbol.for("react.memo_cache_sentinel")?(h=f.jsx(Xd,{size:14,className:"text-purple-400"}),e[2]=h):h=e[2];const g=s+1;let m;e[3]!==g?(m=f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:["Rule ",g]})}),e[3]=g,e[4]=m):m=e[4];const b=o>0?`${o} match${o!==1?"es":""}`:"All requests",y=c!==1?"s":"";let w;e[5]!==c||e[6]!==b||e[7]!==y?(w=f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:[b,"  ",c," backend",y]}),e[5]=c,e[6]=b,e[7]=y,e[8]=w):w=e[8];let x;e[9]!==m||e[10]!==w?(x=f.jsxs("div",{className:"flex-1 min-w-0",children:[m,w]}),e[9]=m,e[10]=w,e[11]=x):x=e[11];let S;e[12]!==d||e[13]!==x?(S=f.jsxs("button",{onClick:d,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[h,x]}),e[12]=d,e[13]=x,e[14]=S):S=e[14];let k;e[15]!==r||e[16]!==n.backendRefs||e[17]!==n.matches?(k=r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[n.matches&&n.matches.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Matches"}),f.jsx("div",{className:"space-y-2",children:n.matches.map(WY)})]}),n.backendRefs&&n.backendRefs.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Backend Services"}),f.jsx("div",{className:"space-y-2",children:n.backendRefs.map(KY)})]})]}),e[15]=r,e[16]=n.backendRefs,e[17]=n.matches,e[18]=k):k=e[18];let C;return e[19]!==k||e[20]!==S?(C=f.jsxs("div",{className:"border border-purple-500/30 bg-purple-500/5 rounded-lg overflow-hidden",children:[S,k]}),e[19]=k,e[20]=S,e[21]=C):C=e[21],C}function KY(t,e){return f.jsx("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(w0,{size:10,className:"text-emerald-600 dark:text-emerald-400"}),f.jsx("span",{className:"text-emerald-600 dark:text-emerald-400",children:t.name}),t.port&&f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:":"}),f.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:t.port})]}),t.weight!==void 0&&f.jsxs("span",{className:"ml-auto px-1 py-0.5 rounded bg-amber-500/20 text-amber-400 text-[10px]",children:["weight: ",t.weight]})]})},e)}function WY(t,e){return f.jsxs("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:[t.path?.value&&f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(Xd,{size:10,className:"text-cyan-600 dark:text-cyan-400"}),f.jsx("span",{className:"text-neutral-600 dark:text-neutral-400",children:"Path:"}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-mono",children:t.path.value})]}),t.method&&f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400 ml-4",children:"Method:"}),f.jsx("span",{className:"px-1 py-0.5 rounded bg-blue-500/20 text-blue-400 text-[10px] font-mono",children:t.method})]})]},e)}const GY={kinds:["GRPCRoute","GRPCRoutes"],adapt(t,e){const n=e.spec,s=e.status;return n?{sections:[...n.parentRefs&&n.parentRefs.length>0?[{id:"parents",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(pu,{size:10})," Parent Gateway",n.parentRefs.length>1?"s":""]}),f.jsx("div",{className:"space-y-1",children:n.parentRefs.map((r,i)=>{const c=s?.parents?.find(h=>h.parentRef.name===r.name)?.conditions?.find(h=>h.type==="Accepted"),d=c?.status==="True";return f.jsxs("div",{className:"text-sm flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Gateway:"}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:r.name}),r.namespace&&f.jsxs("span",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:["(",r.namespace,")"]}),f.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${d?"bg-emerald-500/20 text-emerald-600 dark:text-emerald-400":"bg-amber-500/20 text-amber-700 dark:text-amber-400"}`,children:d?"Accepted":c?.reason||"Unknown"})]},i)})})]})}}]:[],...n.hostnames&&n.hostnames.length>0?[{id:"hostnames",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 border border-neutral-200 dark:border-neutral-700 rounded-lg p-3",children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-2",children:"Hostnames"}),f.jsx("div",{className:"flex flex-wrap gap-2",children:n.hostnames.map((r,i)=>f.jsx("div",{className:"bg-cyan-500/10 border border-cyan-500/30 rounded px-2.5 py-1 text-sm text-cyan-600 dark:text-cyan-400 font-mono",children:r},i))})]})}}]:[],...n.rules&&n.rules.length>0?[{id:"rules",title:"Routing Rules",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.rules.map((r,i)=>f.jsx(YY,{rule:r,index:i},r.matches?.[0]?.method?.service||`rule-${i}`))})}}]:[]]}:{sections:[]}}};function YY(t){const e=Me.c(22),{rule:n,index:s}=t,[r,i]=Wr.useState(!1),o=n.matches?.length||0,c=n.backendRefs?.length||0;let d;e[0]!==r?(d=()=>i(!r),e[0]=r,e[1]=d):d=e[1];let h;e[2]===Symbol.for("react.memo_cache_sentinel")?(h=f.jsx(Ln,{size:14,className:"text-indigo-400"}),e[2]=h):h=e[2];const g=s+1;let m;e[3]!==g?(m=f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:["Rule ",g]})}),e[3]=g,e[4]=m):m=e[4];const b=o>0?`${o} match${o!==1?"es":""}`:"All methods",y=c!==1?"s":"";let w;e[5]!==c||e[6]!==b||e[7]!==y?(w=f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:[b,"  ",c," backend",y]}),e[5]=c,e[6]=b,e[7]=y,e[8]=w):w=e[8];let x;e[9]!==m||e[10]!==w?(x=f.jsxs("div",{className:"flex-1 min-w-0",children:[m,w]}),e[9]=m,e[10]=w,e[11]=x):x=e[11];let S;e[12]!==d||e[13]!==x?(S=f.jsxs("button",{onClick:d,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[h,x]}),e[12]=d,e[13]=x,e[14]=S):S=e[14];let k;e[15]!==r||e[16]!==n.backendRefs||e[17]!==n.matches?(k=r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[n.matches&&n.matches.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"gRPC Method Matches"}),f.jsx("div",{className:"space-y-2",children:n.matches.map(JY)})]}),n.backendRefs&&n.backendRefs.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Backend Services"}),f.jsx("div",{className:"space-y-2",children:n.backendRefs.map(XY)})]})]}),e[15]=r,e[16]=n.backendRefs,e[17]=n.matches,e[18]=k):k=e[18];let C;return e[19]!==k||e[20]!==S?(C=f.jsxs("div",{className:"border border-indigo-500/30 bg-indigo-500/5 rounded-lg overflow-hidden",children:[S,k]}),e[19]=k,e[20]=S,e[21]=C):C=e[21],C}function XY(t,e){return f.jsx("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(w0,{size:10,className:"text-emerald-600 dark:text-emerald-400"}),f.jsx("span",{className:"text-emerald-600 dark:text-emerald-400",children:t.name}),t.port&&f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:":"}),f.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:t.port})]}),t.weight!==void 0&&f.jsxs("span",{className:"ml-auto px-1 py-0.5 rounded bg-amber-500/20 text-amber-400 text-[10px]",children:["weight: ",t.weight]})]})},e)}function JY(t,e){return f.jsxs("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:[t.method?.service&&f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(Ln,{size:10,className:"text-purple-600 dark:text-purple-400"}),f.jsx("span",{className:"text-neutral-600 dark:text-neutral-400",children:"Service:"}),f.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-mono",children:t.method.service})]}),t.method?.method&&f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-400 ml-4",children:"Method:"}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-mono",children:t.method.method})]})]},e)}const QY={kinds:["Ingress","Ingresses"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=s?.loadBalancer?.ingress&&s.loadBalancer.ingress.length>0;return{sections:[{id:"status",title:"Ingress Status",data:{type:"status-cards",items:[{label:"Ingress Class",value:n.ingressClassName||"default",status:"neutral"},{label:"Load Balancer",value:r?"Ready":"Pending",status:r?"success":"warning"}]}},...r?[{id:"load-balancer",title:"Load Balancer",data:{type:"info-grid",items:(s?.loadBalancer?.ingress||[]).map(i=>({label:i.hostname?"Hostname":"IP Address",value:i.hostname||i.ip||"Unknown",color:"text-blue-400"})),columns:2}}]:[],...n.tls&&n.tls.length>0?[{id:"tls",title:"TLS Configuration",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.tls.map((i,o)=>f.jsx(tX,{tls:i,index:o},i.secretName||`tls-${o}`))})}}]:[],...n.rules&&n.rules.length>0?[{id:"rules",title:"Routing Rules",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.rules.map((i,o)=>f.jsx(ZY,{rule:i,index:o},i.host||`rule-${o}`))})}}]:[],...n.defaultBackend?.service?[{id:"default-backend",title:"Default Backend",data:{type:"info-grid",items:[{label:"Service",value:n.defaultBackend.service.name},{label:"Port",value:String(n.defaultBackend.service.port?.number||n.defaultBackend.service.port?.name||"unknown")}],columns:2}}]:[]]}}};function ZY(t){const e=Me.c(21),{rule:n,index:s}=t,[r,i]=Wr.useState(!1);let o;e[0]!==r?(o=()=>i(!r),e[0]=r,e[1]=o):o=e[1];let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=f.jsx(Ln,{size:14,className:"text-blue-400"}),e[2]=c):c=e[2];const d=n.host||`Rule ${s+1}`;let h;e[3]!==d?(h=f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:d})}),e[3]=d,e[4]=h):h=e[4];const g=n.http?.paths.length||0,m=n.http?.paths.length!==1?"s":"";let b;e[5]!==g||e[6]!==m?(b=f.jsxs("div",{className:"text-xs text-neutral-500",children:[g," path",m]}),e[5]=g,e[6]=m,e[7]=b):b=e[7];let y;e[8]!==h||e[9]!==b?(y=f.jsxs("div",{className:"flex-1 min-w-0",children:[h,b]}),e[8]=h,e[9]=b,e[10]=y):y=e[10];let w;e[11]!==o||e[12]!==y?(w=f.jsxs("button",{onClick:o,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[c,y]}),e[11]=o,e[12]=y,e[13]=w):w=e[13];let x;e[14]!==r||e[15]!==n.host||e[16]!==n.http?(x=r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[n.host&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Host"}),f.jsx("div",{className:"text-xs text-cyan-400",children:n.host})]}),n.http?.paths&&n.http.paths.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Paths"}),f.jsx("div",{className:"space-y-2",children:n.http.paths.map(eX)})]})]}),e[14]=r,e[15]=n.host,e[16]=n.http,e[17]=x):x=e[17];let S;return e[18]!==x||e[19]!==w?(S=f.jsxs("div",{className:"border border-blue-500/30 bg-blue-500/5 rounded-lg overflow-hidden",children:[w,x]}),e[18]=x,e[19]=w,e[20]=S):S=e[20],S}function eX(t,e){const n=t.backend.service?.port?.number||t.backend.service?.port?.name||"";return f.jsxs("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(Xd,{size:10,className:"text-purple-400"}),f.jsx("span",{className:"text-neutral-700 dark:text-neutral-300 font-mono",children:t.path||"/"}),f.jsx("span",{className:"px-1 py-0.5 rounded bg-purple-500/20 text-purple-400 text-[10px]",children:t.pathType})]}),f.jsxs("div",{className:"ml-4 flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-600",children:""}),f.jsx("span",{className:"text-emerald-400",children:t.backend.service?.name||"unknown"}),f.jsx("span",{className:"text-neutral-600",children:":"}),f.jsx("span",{className:"text-blue-400",children:n})]})]},e)}function tX(t){const e=Me.c(22),{tls:n,index:s}=t,[r,i]=Wr.useState(!1);let o;e[0]!==r?(o=()=>i(!r),e[0]=r,e[1]=o):o=e[1];let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=f.jsx(_f,{size:14,className:"text-amber-400"}),e[2]=c):c=e[2];const d=n.secretName||`TLS ${s+1}`;let h;e[3]!==d?(h=f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:d})}),e[3]=d,e[4]=h):h=e[4];let g;e[5]!==n.hosts?(g=n.hosts?.join(", ")||"All hosts",e[5]=n.hosts,e[6]=g):g=e[6];let m;e[7]!==g?(m=f.jsx("div",{className:"text-xs text-neutral-500 truncate",children:g}),e[7]=g,e[8]=m):m=e[8];let b;e[9]!==h||e[10]!==m?(b=f.jsxs("div",{className:"flex-1 min-w-0",children:[h,m]}),e[9]=h,e[10]=m,e[11]=b):b=e[11];let y;e[12]!==o||e[13]!==b?(y=f.jsxs("button",{onClick:o,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[c,b]}),e[12]=o,e[13]=b,e[14]=y):y=e[14];let w;e[15]!==r||e[16]!==n.hosts||e[17]!==n.secretName?(w=r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Secret"}),f.jsx("div",{className:"text-xs text-purple-400",children:n.secretName||"default"})]}),n.hosts&&n.hosts.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Hosts"}),f.jsx("div",{className:"space-y-1",children:n.hosts.map(nX)})]})]}),e[15]=r,e[16]=n.hosts,e[17]=n.secretName,e[18]=w):w=e[18];let x;return e[19]!==y||e[20]!==w?(x=f.jsxs("div",{className:"border border-amber-500/30 bg-amber-500/5 rounded-lg overflow-hidden",children:[y,w]}),e[19]=y,e[20]=w,e[21]=x):x=e[21],x}function nX(t,e){return f.jsx("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(ur,{size:10,className:"text-cyan-400"}),f.jsx("span",{className:"text-cyan-400",children:t})]})},e)}function Mm(t){return t.toLowerCase().replace(/[-_.]/g,"")}const Bm=[{kind:"pods",label:"Pods",icon:Qr,category:"Workloads"},{kind:"deployments",label:"Deployments",icon:ES,category:"Workloads"},{kind:"daemonsets",label:"DaemonSets",icon:AS,category:"Workloads"},{kind:"statefulsets",label:"StatefulSets",icon:fo,category:"Workloads"},{kind:"replicasets",label:"ReplicaSets",icon:Dr,category:"Workloads"},{kind:"jobs",label:"Jobs",icon:Mg,category:"Workloads"},{kind:"cronjobs",label:"CronJobs",icon:ua,category:"Workloads"},{kind:"secrets",label:"Secrets",icon:_f,category:"Config"},{kind:"configmaps",label:"ConfigMaps",icon:xi,category:"Config"},{kind:"applications",label:"Applications",icon:LT,category:"Config"},{kind:"applicationsets",label:"ApplicationSets",icon:PT,category:"Config"},{kind:"certificates",label:"Certificates",icon:HT,category:"Config"},{kind:"certificaterequests",label:"CertificateRequests",icon:_0,category:"Config"},{kind:"services",label:"Services",icon:zT,category:"Network"},{kind:"ingresses",label:"Ingresses",icon:ur,category:"Network"},{kind:"gateways",label:"Gateways",icon:Ln,category:"Network"},{kind:"httproutes",label:"HTTPRoutes",icon:ur,category:"Network"},{kind:"grpcroutes",label:"GRPCRoutes",icon:ur,category:"Network"},{kind:"tcproutes",label:"TCPRoutes",icon:Ln,category:"Network"},{kind:"udproutes",label:"UDPRoutes",icon:Ln,category:"Network"},{kind:"tlsroutes",label:"TLSRoutes",icon:Ln,category:"Network"},{kind:"persistentvolumes",label:"PersistentVolumes",icon:ms,category:"Storage"},{kind:"persistentvolumeclaims",label:"PersistentVolumeClaims",icon:SS,category:"Storage"},{kind:"namespaces",label:"Namespaces",icon:Tg,category:"Cluster"},{kind:"nodes",label:"Nodes",icon:Xr,category:"Cluster"}];function sX(t){const{context:e,namespace:n,namespaces:s,setNamespace:r,setSelectedResource:i,onClose:o}=t;let c=new Map;return{id:"kubernetes",resourceTypes:Bm,supportsNamespaces:!0,searchModePrefixes:[{prefix:"@@",mode:"searchAll"},{prefix:">",mode:"resources"},{prefix:"@",mode:"namespaces"}],async initialize(){const h=new Map;for(const g of Bm)try{const m=await _l(e,g.kind);m&&h.set(g.kind,m)}catch{}c=h},getAvailableResourceTypes(){return Bm.filter(h=>c.has(h.kind))},getNamespaces(){return s.filter(h=>h.metadata?.name).map(h=>({name:h.metadata.name}))},resourceTypeToSearchResult(h){return{id:`type-${h.kind}`,type:"resource-type",label:h.label,sublabel:h.category,icon:h.icon,category:h.category,data:{resourceConfig:c.get(h.kind)}}},namespaceToSearchResult(h){return{id:`ns-${h.name}`,type:"namespace",label:h.name,icon:Tg,data:{namespace:h.name}}},async searchResources(h,g){if(!h||h.length<2)return[];const m=[],b=Mm(h),y=g?void 0:n,w=Bm.filter(S=>c.has(S.kind)).map(async S=>{const k=c.get(S.kind);if(!k)return[];try{const C=await RS(e,k,y),N=[];for(const R of C.rows){if(!R.object.metadata)continue;const B=R.object.metadata.name,E=R.object.metadata.namespace;B&&Mm(B).includes(b)&&N.push({id:`${S.kind}/${E||""}/${B}`,type:"resource",label:B,sublabel:E?`${S.label} in ${E}`:S.label,icon:S.icon,category:S.category,data:{resourceConfig:k,namespace:E,resourceName:B}})}return N}catch{return[]}}),x=await Promise.all(w);for(const S of x)m.push(...S);return m.sort((S,k)=>{const C=Mm(S.label)===b,N=Mm(k.label)===b;return C&&!N?-1:!C&&N?1:S.label.localeCompare(k.label)}),m.slice(0,50)},handleSelect(h){if(h.type==="resource-type"){const g=h.data.resourceConfig;g&&i(g)}else if(h.type==="namespace")r(h.data.namespace);else if(h.type==="resource"){const g=h.data.resourceConfig,m=h.data.namespace;m&&m!==n&&r(m),g&&i(g)}o()},getPlaceholder(h,g){switch(h){case"resources":return"Search resource types...";case"namespaces":return"Search namespaces...";case"searchAll":return"Search resources across all namespaces...";default:return`Search resources in ${g||n||"current namespace"}... (> types, @ ns, @@ all)`}},getHelpItems(){return[{prefix:">",label:"Resource types"},{prefix:"@",label:"Namespaces"},{prefix:"@@",label:"Search all namespaces"}]},getCurrentScopeLabel(){return n||null}}}const rX=[CK,NK,RK,OK,MK,BK,LK,PK,$K,UK,QK,rW,hW,_Y,wY,kY,LY,HY,UY,FY,GY,QY],lk=new Map;rX.forEach(t=>{t.kinds.forEach(e=>{lk.set(e.toLowerCase(),t)})});function OB(t){return lk.get(t.toLowerCase())??null}function nj(t){return lk.has(t.toLowerCase())}function iX(t,e){const n=e.kind;if(!n)return null;const s=OB(n);return s?s.adapt(t,e):null}function MB(t){const e=t.kind;if(!e)return[];const n=OB(e);return n?.actions?n.actions.filter(s=>!s.isVisible||s.isVisible(t)):[]}function BB({actions:t,resource:e,onActionComplete:n}){const{context:s}=ei(),[r,i]=F.useState(null),[o,c]=F.useState(null),[d,h]=F.useState(null);if(t.length===0)return null;const g=async y=>{h(null),i(y.id);try{await y.execute(s,e),n?.()}catch(w){h(w instanceof Error?w.message:"Action failed")}finally{i(null),c(null)}},m=y=>{y.confirm?c(y):g(y)},b=(y="secondary")=>{switch(y){case"primary":return"bg-blue-600 hover:bg-blue-700 text-white border-blue-600";case"danger":return"bg-red-600 hover:bg-red-700 text-white border-red-600";case"warning":return"bg-amber-600 hover:bg-amber-700 text-white border-amber-600";default:return"bg-neutral-700 hover:bg-neutral-600 text-neutral-200 border-neutral-600"}};return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:t.map(y=>{const w=y.isDisabled?.(e),x=w===!0||typeof w=="string",S=typeof w=="string"?w:void 0,k=r===y.id;return f.jsxs("button",{onClick:()=>m(y),disabled:x||k,title:S,className:`
                flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded border
                transition-colors duration-150
                ${b(y.variant)}
                ${x?"opacity-50 cursor-not-allowed":"cursor-pointer"}
                ${k?"opacity-75":""}
              `,children:[k?f.jsx(En,{size:14,className:"animate-spin"}):y.icon,y.label]},y.id)})}),d&&f.jsx("div",{className:"mb-4 p-2 bg-red-500/10 border border-red-500/30 rounded text-red-400 text-xs",children:d}),o&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:f.jsxs("div",{className:"bg-neutral-800 border border-neutral-700 rounded-lg p-4 max-w-md mx-4 shadow-xl",children:[f.jsx("h3",{className:"text-sm font-semibold text-neutral-200 mb-2",children:o.confirm?.title}),f.jsx("p",{className:"text-xs text-neutral-400 mb-4",children:o.confirm?.message}),f.jsxs("div",{className:"flex justify-end gap-2",children:[f.jsx("button",{onClick:()=>c(null),className:"px-3 py-1.5 text-xs font-medium rounded border border-neutral-600 bg-neutral-700 hover:bg-neutral-600 text-neutral-200",children:"Cancel"}),f.jsxs("button",{onClick:()=>g(o),disabled:r===o.id,className:`
                  flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded border
                  ${b(o.variant)}
                  ${r===o.id?"opacity-75":""}
                `,children:[r===o.id&&f.jsx(En,{size:14,className:"animate-spin"}),o.confirm?.confirmLabel||"Confirm"]})]})]})})]})}function aX(t){const e=Me.c(6),{items:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s={success:"text-emerald-400",warning:"text-amber-400",error:"text-red-400",neutral:"text-neutral-900 dark:text-neutral-100"},e[0]=s):s=e[0];const r=s;let i;if(e[1]!==n){let c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=(d,h)=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800 rounded-lg p-3",children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:d.label}),f.jsxs("div",{className:`text-sm font-medium flex items-center gap-2 ${r[d.status||"neutral"]}`,children:[d.icon,d.value]}),d.description&&f.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:d.description})]},h),e[3]=c):c=e[3],i=n.map(c),e[1]=n,e[2]=i}else i=e[2];let o;return e[4]!==i?(o=f.jsx("div",{className:"grid grid-cols-2 gap-3",children:i}),e[4]=i,e[5]=o):o=e[5],o}function oX(t){const e=Me.c(12),{items:n,podGrid:s}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r={emerald:"text-emerald-400",blue:"text-blue-400",cyan:"text-cyan-400",purple:"text-purple-400",amber:"text-amber-400"},e[0]=r):r=e[0];const i=r;let o;e[1]===Symbol.for("react.memo_cache_sentinel")?(o={emerald:"bg-emerald-500",blue:"bg-blue-500",cyan:"bg-cyan-500",purple:"bg-purple-500",amber:"bg-amber-500"},e[1]=o):o=e[1];const c=o;let d;if(e[2]!==n){let b;e[4]===Symbol.for("react.memo_cache_sentinel")?(b=(y,w)=>{const x=y.total>0?Math.min(y.current/y.total*100,100):0;return f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:y.label}),f.jsxs("span",{className:i[y.color],children:[y.current,"/",y.total]})]}),f.jsx("div",{className:"h-1 bg-neutral-300 dark:bg-neutral-700 rounded-full overflow-hidden",children:f.jsx("div",{className:`h-full ${c[y.color]}`,style:{width:`${x}%`}})})]},w)},e[4]=b):b=e[4],d=n.map(b),e[2]=n,e[3]=d}else d=e[3];let h;e[5]!==d?(h=f.jsx("div",{className:"flex items-center gap-4 mb-3",children:d}),e[5]=d,e[6]=h):h=e[6];let g;e[7]!==s?(g=s&&f.jsx(lX,{data:s}),e[7]=s,e[8]=g):g=e[8];let m;return e[9]!==h||e[10]!==g?(m=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800 rounded-lg p-3",children:[h,g]}),e[9]=h,e[10]=g,e[11]=m):m=e[11],m}function lX(t){const e=Me.c(10),{data:n}=t,s=n.icon==="database"?fo:n.icon==="server"?Xr:Qr;let r;e[0]!==n.total?(r=Array.from({length:n.total}),e[0]=n.total,e[1]=r):r=e[1];let i;return e[2]!==s||e[3]!==n.available||e[4]!==n.current||e[5]!==n.podTitles||e[6]!==n.ready||e[7]!==n.showOrdinal||e[8]!==r?(i=f.jsx("div",{className:"flex flex-wrap gap-1",children:r.map((o,c)=>{const d=c<n.ready,h=n.available!==void 0?c<n.available:d,g=n.current!==void 0?c<n.current:h,m=n.podTitles?.[c]??`Pod ${c}`;return f.jsxs("div",{className:`${n.showOrdinal?"w-8 h-8":"w-6 h-6"} rounded flex flex-col items-center justify-center ${d?"bg-emerald-500/20 border border-emerald-500/50":h?"bg-cyan-500/20 border border-cyan-500/50":g?"bg-amber-500/20 border border-amber-500/50":"bg-neutral-300/50 dark:bg-neutral-700/50 border border-neutral-400 dark:border-neutral-600"}`,title:`${m}: ${d?"Ready":h?"Available":g?"Current":"Pending"}`,children:[f.jsx(s,{size:n.showOrdinal?10:12,className:d?"text-emerald-600 dark:text-emerald-400":h?"text-cyan-600 dark:text-cyan-400":g?"text-amber-600 dark:text-amber-400":"text-neutral-600 dark:text-neutral-500"}),n.showOrdinal&&f.jsx("span",{className:`text-[9px] ${d?"text-emerald-600 dark:text-emerald-400":h?"text-cyan-600 dark:text-cyan-400":g?"text-amber-600 dark:text-amber-400":"text-neutral-600 dark:text-neutral-500"}`,children:c})]},c)})}),e[2]=s,e[3]=n.available,e[4]=n.current,e[5]=n.podTitles,e[6]=n.ready,e[7]=n.showOrdinal,e[8]=r,e[9]=i):i=e[9],i}function cX(t,e){if(t==="running")return{label:"Running",borderClass:"border-emerald-500/30 bg-emerald-500/5",badgeClass:"bg-emerald-500/20 text-emerald-400",iconClass:"text-emerald-400"};if(t==="waiting"){const n=e==="CrashLoopBackOff"||e==="Error";return{label:e||"Waiting",borderClass:n?"border-red-500/30 bg-red-500/5":"border-amber-500/30 bg-amber-500/5",badgeClass:n?"bg-red-500/20 text-red-400":"bg-amber-500/20 text-amber-400",iconClass:n?"text-red-400":"text-amber-400"}}return t==="terminated"?{label:e||"Terminated",borderClass:"border-neutral-300 bg-neutral-100 dark:border-neutral-700 dark:bg-neutral-900/50",badgeClass:"bg-neutral-200 text-neutral-600 dark:bg-neutral-700 dark:text-neutral-400",iconClass:"text-neutral-500 dark:text-neutral-400"}:{label:"Unknown",borderClass:"border-neutral-300 bg-neutral-100 dark:border-neutral-700 dark:bg-neutral-900/50",badgeClass:"bg-neutral-200 text-neutral-600 dark:bg-neutral-700 dark:text-neutral-400",iconClass:"text-neutral-500 dark:text-neutral-400"}}const uX=15e3;function hX(t){const e=Me.c(10),{items:n,metricsLoader:s}=t,[r,i]=F.useState(null);let o,c;if(e[0]!==s?(o=()=>{if(!s)return;let g=!0;const m=async()=>{const y=await s();g&&i(y)};m();const b=setInterval(m,uX);return()=>{g=!1,clearInterval(b)}},c=[s],e[0]=s,e[1]=o,e[2]=c):(o=e[1],c=e[2]),F.useEffect(o,c),n.length===0)return null;let d;if(e[3]!==n||e[4]!==r){let g;e[6]!==r?(g=m=>f.jsx(dX,{container:m,metrics:r?.get(m.name)},m.name),e[6]=r,e[7]=g):g=e[7],d=n.map(g),e[3]=n,e[4]=r,e[5]=d}else d=e[5];let h;return e[8]!==d?(h=f.jsx("div",{className:"space-y-2",children:d}),e[8]=d,e[9]=h):h=e[9],h}function dX(t){const e=Me.c(49),{container:n,metrics:s}=t,[r,i]=F.useState(!1);let o;e[0]!==n.state||e[1]!==n.stateReason?(o=cX(n.state,n.stateReason),e[0]=n.state,e[1]=n.stateReason,e[2]=o):o=e[2];const c=o,d=`border rounded-lg overflow-hidden ${c.borderClass}`;let h;e[3]!==r?(h=()=>i(!r),e[3]=r,e[4]=h):h=e[4];let g;e[5]!==c.iconClass?(g=f.jsx(Qr,{size:16,className:c.iconClass}),e[5]=c.iconClass,e[6]=g):g=e[6];let m;e[7]!==n.name?(m=f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:n.name}),e[7]=n.name,e[8]=m):m=e[8];let b;e[9]!==n.state||e[10]!==c.badgeClass||e[11]!==c.label?(b=n.state&&f.jsx("span",{className:`px-1.5 py-0.5 rounded text-xs ${c.badgeClass}`,children:c.label}),e[9]=n.state,e[10]=c.badgeClass,e[11]=c.label,e[12]=b):b=e[12];let y;e[13]!==m||e[14]!==b?(y=f.jsxs("div",{className:"flex items-center gap-2",children:[m,b]}),e[13]=m,e[14]=b,e[15]=y):y=e[15];let w;e[16]!==n.image?(w=f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 truncate",children:n.image}),e[16]=n.image,e[17]=w):w=e[17];let x;e[18]!==y||e[19]!==w?(x=f.jsxs("div",{className:"flex-1 min-w-0",children:[y,w]}),e[18]=y,e[19]=w,e[20]=x):x=e[20];let S;e[21]!==s?(S=s&&f.jsxs("div",{className:"flex items-center gap-3 text-xs font-mono",children:[f.jsx("span",{className:"text-blue-400",title:"CPU",children:s.cpu.usage}),f.jsx("span",{className:"text-purple-400",title:"Memory",children:s.memory.usage})]}),e[21]=s,e[22]=S):S=e[22];let k;e[23]!==n.restartCount?(k=(n.restartCount??0)>0&&f.jsxs("div",{className:"text-xs text-amber-400",children:[n.restartCount," restarts"]}),e[23]=n.restartCount,e[24]=k):k=e[24];let C;e[25]!==S||e[26]!==k||e[27]!==h||e[28]!==g||e[29]!==x?(C=f.jsxs("button",{onClick:h,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[g,x,S,k]}),e[25]=S,e[26]=k,e[27]=h,e[28]=g,e[29]=x,e[30]=C):C=e[30];let N;e[31]!==n.args||e[32]!==n.command||e[33]!==n.currentTermination||e[34]!==n.image||e[35]!==n.lastTermination||e[36]!==n.mounts||e[37]!==n.ports||e[38]!==n.resources||e[39]!==n.state||e[40]!==n.stateMessage||e[41]!==n.stateReason||e[42]!==r||e[43]!==s?(N=r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[n.currentTermination&&f.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded p-2",children:[f.jsx("div",{className:"text-xs text-red-400 font-medium mb-1",children:"Terminated"}),f.jsxs("div",{className:"text-xs space-y-1",children:[n.currentTermination.reason&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Reason:"})," ",n.currentTermination.reason]}),n.currentTermination.exitCode!==void 0&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Exit Code:"})," ",n.currentTermination.exitCode]}),n.currentTermination.signal!==void 0&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Signal:"})," ",n.currentTermination.signal]}),n.currentTermination.finishedAt&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Finished:"})," ",new Date(n.currentTermination.finishedAt).toLocaleString()]}),n.currentTermination.message&&f.jsxs("div",{className:"mt-2 p-2 bg-neutral-900/50 rounded",children:[f.jsx("div",{className:"text-neutral-600 dark:text-neutral-500 mb-1",children:"Message:"}),f.jsx("div",{className:"text-red-300 text-[11px] font-mono break-all whitespace-pre-wrap",children:n.currentTermination.message})]})]})]}),n.state==="waiting"&&n.stateMessage&&f.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded p-2",children:[f.jsxs("div",{className:"text-xs text-amber-400 font-medium mb-1",children:["Waiting: ",n.stateReason]}),f.jsx("div",{className:"text-amber-300 text-[11px] font-mono break-all whitespace-pre-wrap",children:n.stateMessage})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Image"}),f.jsx("div",{className:"text-xs text-cyan-600 dark:text-cyan-400 break-all",children:n.image})]}),(n.command||n.args)&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Command"}),f.jsx("code",{className:"text-xs text-neutral-900 dark:text-neutral-300 bg-neutral-200 dark:bg-neutral-800 px-2 py-1 rounded block",children:[...n.command||[],...n.args||[]].join(" ")})]}),n.lastTermination&&f.jsxs("div",{className:"bg-red-500/5 border border-red-500/20 rounded p-2",children:[f.jsx("div",{className:"text-xs text-red-400 font-medium mb-1",children:"Last Termination"}),f.jsxs("div",{className:"text-xs space-y-0.5",children:[n.lastTermination.reason&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Reason:"})," ",n.lastTermination.reason]}),n.lastTermination.exitCode!==void 0&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Exit Code:"})," ",n.lastTermination.exitCode]}),n.lastTermination.signal!==void 0&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Signal:"})," ",n.lastTermination.signal]}),n.lastTermination.finishedAt&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Finished:"})," ",new Date(n.lastTermination.finishedAt).toLocaleString()]})]})]}),n.ports&&n.ports.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Ports"}),f.jsx("div",{className:"flex flex-wrap gap-1",children:n.ports.map(gX)})]}),!s&&n.resources&&f.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.resources.requests&&f.jsxs("div",{children:[f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(jg,{size:10})," Requests"]}),f.jsx("div",{className:"text-xs space-y-0.5",children:Object.entries(n.resources.requests).map(mX)})]}),n.resources.limits&&f.jsxs("div",{children:[f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(ms,{size:10})," Limits"]}),f.jsx("div",{className:"text-xs space-y-0.5",children:Object.entries(n.resources.limits).map(pX)})]})]}),n.mounts&&n.mounts.length>0&&f.jsxs("div",{children:[f.jsxs("div",{className:"text-xs text-neutral-500 mb-2 flex items-center gap-1",children:[f.jsx(ms,{size:10})," Volume Mounts"]}),f.jsx("div",{className:"text-xs space-y-1.5",children:n.mounts.map(fX)})]})]}),e[31]=n.args,e[32]=n.command,e[33]=n.currentTermination,e[34]=n.image,e[35]=n.lastTermination,e[36]=n.mounts,e[37]=n.ports,e[38]=n.resources,e[39]=n.state,e[40]=n.stateMessage,e[41]=n.stateReason,e[42]=r,e[43]=s,e[44]=N):N=e[44];let R;return e[45]!==C||e[46]!==N||e[47]!==d?(R=f.jsxs("div",{className:d,children:[C,N]}),e[45]=C,e[46]=N,e[47]=d,e[48]=R):R=e[48],R}function fX(t,e){return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded p-2 flex items-center gap-2",children:[f.jsx("span",{className:"text-purple-400 truncate max-w-35",title:t.name,children:t.name}),f.jsx("span",{className:"text-neutral-600",children:""}),f.jsx("span",{className:"text-cyan-400 font-mono truncate flex-1",title:t.mountPath,children:t.mountPath}),t.readOnly&&f.jsx("span",{className:"text-amber-400 text-[10px] px-1 py-0.5 bg-amber-500/10 rounded",children:"(ro)"})]},e)}function pX(t){const[e,n]=t;return f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-500",children:[e,":"]})," ",n]},e)}function mX(t){const[e,n]=t;return f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-500",children:[e,":"]})," ",n]},e)}function gX(t,e){return f.jsxs("span",{className:"text-xs text-neutral-900 dark:text-neutral-100 bg-neutral-200 dark:bg-neutral-800 px-2 py-1 rounded",children:[t.containerPort,"/",t.protocol||"TCP",t.name&&f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-500 ml-1",children:["(",t.name,")"]})]},e)}function yX(t){const e=Me.c(4),{items:n}=t;if(n.length===0)return null;let s;e[0]!==n?(s=n.map(bX),e[0]=n,e[1]=s):s=e[1];let r;return e[2]!==s?(r=f.jsx("div",{className:"space-y-2",children:s}),e[2]=s,e[3]=r):r=e[3],r}function bX(t){return f.jsx(vX,{volume:t},t.name)}function vX(t){const e=Me.c(33),{volume:n}=t,[s,r]=F.useState(!1);let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i={ConfigMap:"border-blue-500/30 bg-blue-500/5",Secret:"border-amber-500/30 bg-amber-500/5",PVC:"border-emerald-500/30 bg-emerald-500/5",EmptyDir:"border-neutral-500/30 bg-neutral-500/5",HostPath:"border-red-500/30 bg-red-500/5",Projected:"border-purple-500/30 bg-purple-500/5",DownwardAPI:"border-cyan-500/30 bg-cyan-500/5",NFS:"border-orange-500/30 bg-orange-500/5",CSI:"border-indigo-500/30 bg-indigo-500/5"},e[0]=i):i=e[0];const o=i;let c;e[1]===Symbol.for("react.memo_cache_sentinel")?(c={ConfigMap:f.jsx(DP,{size:14,className:"text-blue-400"}),Secret:f.jsx(_f,{size:14,className:"text-amber-400"}),PVC:f.jsx(fo,{size:14,className:"text-emerald-400"}),EmptyDir:f.jsx(Tg,{size:14,className:"text-neutral-400"}),HostPath:f.jsx(I7,{size:14,className:"text-red-400"}),Projected:f.jsx(Dr,{size:14,className:"text-purple-400"}),DownwardAPI:f.jsx(M7,{size:14,className:"text-cyan-400"}),NFS:f.jsx(Ln,{size:14,className:"text-orange-400"}),CSI:f.jsx(xP,{size:14,className:"text-indigo-400"})},e[1]=c):c=e[1];const d=c;let h;e[2]===Symbol.for("react.memo_cache_sentinel")?(h={ConfigMap:"bg-blue-500/20 text-blue-400",Secret:"bg-amber-500/20 text-amber-400",PVC:"bg-emerald-500/20 text-emerald-400",EmptyDir:"bg-neutral-500/20 text-neutral-400",HostPath:"bg-red-500/20 text-red-400",Projected:"bg-purple-500/20 text-purple-400",DownwardAPI:"bg-cyan-500/20 text-cyan-400",NFS:"bg-orange-500/20 text-orange-400",CSI:"bg-indigo-500/20 text-indigo-400"},e[2]=h):h=e[2];const g=h,m=`border rounded-lg overflow-hidden ${o[n.type]||"border-neutral-300 dark:border-neutral-700 bg-neutral-100 dark:bg-neutral-900/50"}`;let b;e[3]!==s?(b=()=>r(!s),e[3]=s,e[4]=b):b=e[4];let y;e[5]!==n.type?(y=d[n.type]||f.jsx(ms,{size:14,className:"text-neutral-600 dark:text-neutral-400"}),e[5]=n.type,e[6]=y):y=e[6];let w;e[7]!==n.name?(w=f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:n.name})}),e[7]=n.name,e[8]=w):w=e[8];let x;e[9]!==n.source?(x=n.source&&f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400/70",children:n.source}),e[9]=n.source,e[10]=x):x=e[10];let S;e[11]!==n.mounts?(S=n.mounts.length>0&&f.jsxs("span",{className:"ml-2",children:[" ",n.mounts.map(wX).join(", ")]}),e[11]=n.mounts,e[12]=S):S=e[12];let k;e[13]!==x||e[14]!==S?(k=f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 truncate",children:[x,S]}),e[13]=x,e[14]=S,e[15]=k):k=e[15];let C;e[16]!==k||e[17]!==w?(C=f.jsxs("div",{className:"flex-1 min-w-0",children:[w,k]}),e[16]=k,e[17]=w,e[18]=C):C=e[18];let N;e[19]!==C||e[20]!==b||e[21]!==y?(N=f.jsxs("button",{onClick:b,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[y,C]}),e[19]=C,e[20]=b,e[21]=y,e[22]=N):N=e[22];let R;e[23]!==s||e[24]!==n.extra||e[25]!==n.mounts||e[26]!==n.source||e[27]!==n.type?(R=s&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Source"}),f.jsxs("div",{className:"text-xs",children:[f.jsx("span",{className:`px-1.5 py-0.5 rounded ${g[n.type]||"bg-neutral-200 dark:bg-neutral-700 text-neutral-600 dark:text-neutral-400"}`,children:n.type}),n.source&&f.jsx("span",{className:"ml-2 text-cyan-600 dark:text-cyan-400",children:n.source})]}),n.extra&&Object.keys(n.extra).length>0&&f.jsx("div",{className:"mt-2 text-xs space-y-1",children:Object.entries(n.extra).map(_X)})]}),n.mounts.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Mount Points"}),f.jsx("div",{className:"space-y-2",children:n.mounts.map(xX)})]})]}),e[23]=s,e[24]=n.extra,e[25]=n.mounts,e[26]=n.source,e[27]=n.type,e[28]=R):R=e[28];let B;return e[29]!==N||e[30]!==R||e[31]!==m?(B=f.jsxs("div",{className:m,children:[N,R]}),e[29]=N,e[30]=R,e[31]=m,e[32]=B):B=e[32],B}function xX(t,e){return f.jsxs("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Qr,{size:10,className:"text-blue-400"}),f.jsx("span",{className:"text-neutral-900 dark:text-neutral-300",children:t.container}),f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:""}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-mono",children:t.mountPath}),t.readOnly&&f.jsx("span",{className:"px-1 py-0.5 rounded bg-amber-500/20 text-amber-400 text-[10px]",children:"read-only"})]}),t.subPath&&f.jsxs("div",{className:"ml-4 mt-1 text-neutral-600 dark:text-neutral-500",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"subPath:"})," ",f.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:t.subPath})]})]},e)}function _X(t){const[e,n]=t;return f.jsxs("div",{className:"text-neutral-600 dark:text-neutral-400",children:[f.jsxs("span",{className:"text-neutral-500",children:[e,":"]})," ",f.jsx("span",{className:"text-neutral-900 dark:text-neutral-300",children:String(n)})]},e)}function wX(t){return t.mountPath}function SX(t){const e=Me.c(4),{items:n}=t;if(n.length===0)return null;let s;e[0]!==n?(s=n.map(kX),e[0]=n,e[1]=s):s=e[1];let r;return e[2]!==s?(r=f.jsx("div",{className:"space-y-3",children:s}),e[2]=s,e[3]=r):r=e[3],r}function kX(t,e){return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsxs("div",{className:"flex items-center gap-2 text-sm text-neutral-900 dark:text-neutral-300",children:[t.icon,t.label]}),f.jsxs("div",{className:"text-xs",children:[f.jsx("span",{className:"text-cyan-400",children:t.allocatable}),f.jsx("span",{className:"text-neutral-500",children:" / "}),f.jsx("span",{className:"text-neutral-400",children:t.capacity})]})]}),f.jsxs("div",{className:"text-[10px] text-neutral-500 flex justify-between",children:[f.jsx("span",{children:"Allocatable"}),f.jsx("span",{children:"Capacity"})]})]},e)}function CX(t){const e=Me.c(6),{items:n}=t;if(n.length===0)return null;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s={NoSchedule:"bg-red-500/20 text-red-400 border-red-500/30",PreferNoSchedule:"bg-amber-500/20 text-amber-400 border-amber-500/30",NoExecute:"bg-purple-500/20 text-purple-400 border-purple-500/30"},e[0]=s):s=e[0];const r=s;let i;if(e[1]!==n){let c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=(d,h)=>f.jsxs("span",{className:"text-xs bg-neutral-200 dark:bg-neutral-700 px-2 py-0.5 rounded flex items-center gap-1",title:`${d.key}=${d.value||""}:${d.effect}`,children:[f.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:d.key}),d.value&&f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"text-neutral-400",children:"="}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:d.value})]}),f.jsx("span",{className:`ml-1 px-1 py-0.5 rounded text-[10px] border ${r[d.effect]??"bg-neutral-700 text-neutral-300"}`,children:d.effect})]},h),e[3]=c):c=e[3],i=n.map(c),e[1]=n,e[2]=i}else i=e[2];let o;return e[4]!==i?(o=f.jsx("div",{className:"flex flex-wrap gap-1",children:i}),e[4]=i,e[5]=o):o=e[5],o}function sj(t,e){return e<=0?0:Math.min(100,Math.round(t/e*100))}function NX(t){const e=Math.floor((Date.now()-t.getTime())/1e3);if(e<60)return`${e}s ago`;const n=Math.floor(e/60);if(n<60)return`${n}m ago`;const s=Math.floor(n/60);return s<24?`${s}h ago`:`${Math.floor(s/24)}d ago`}function AX(t){const e=Me.c(18),{loader:n,title:s}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],e[0]=r):r=e[0];const[i,o]=F.useState(r),[c,d]=F.useState(!0);let h,g;if(e[1]!==n?(h=()=>{n().then(o).finally(()=>d(!1))},g=[n],e[1]=n,e[2]=h,e[3]=g):(h=e[2],g=e[3]),F.useEffect(h,g),c){let x;e[4]!==s?(x=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[4]=s,e[5]=x):x=e[5];let S;e[6]===Symbol.for("react.memo_cache_sentinel")?(S=f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:"Loading ReplicaSets..."}),e[6]=S):S=e[6];let k;return e[7]!==x?(k=f.jsxs("div",{children:[x,S]}),e[7]=x,e[8]=k):k=e[8],k}if(i.length===0)return null;let m;e[9]!==s?(m=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[9]=s,e[10]=m):m=e[10];let b;e[11]!==i?(b=i.map(EX),e[11]=i,e[12]=b):b=e[12];let y;e[13]!==b?(y=f.jsx("div",{className:"space-y-2",children:b}),e[13]=b,e[14]=y):y=e[14];let w;return e[15]!==m||e[16]!==y?(w=f.jsxs("div",{children:[m,y]}),e[15]=m,e[16]=y,e[17]=w):w=e[17],w}function EX(t){return f.jsx("div",{className:`border rounded-lg p-3 ${t.isCurrent?"border-blue-500/30 bg-blue-500/5":"border-neutral-300 dark:border-neutral-700 bg-neutral-100 dark:bg-neutral-900/50 opacity-60"}`,children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Dr,{size:16,className:t.isCurrent?"text-blue-400":"text-neutral-600 dark:text-neutral-500"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100 truncate",title:t.name,children:t.name}),t.revision&&f.jsxs("span",{className:"text-xs bg-neutral-200 dark:bg-neutral-700 px-1.5 py-0.5 rounded text-neutral-700 dark:text-neutral-400",children:["rev ",t.revision]})]}),t.images.length>0&&f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 truncate",children:t.images.join(", ")})]}),f.jsxs("div",{className:"text-xs",children:[f.jsxs("span",{className:t.readyReplicas===t.replicas?"text-emerald-600 dark:text-emerald-400":"text-amber-600 dark:text-amber-400",children:[t.readyReplicas,"/",t.replicas]}),f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500 ml-1",children:"ready"})]})]})},t.name)}function jX(t){const e=Me.c(18),{loader:n,title:s}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],e[0]=r):r=e[0];const[i,o]=F.useState(r),[c,d]=F.useState(!0);let h,g;if(e[1]!==n?(h=()=>{n().then(o).finally(()=>d(!1))},g=[n],e[1]=n,e[2]=h,e[3]=g):(h=e[2],g=e[3]),F.useEffect(h,g),c){let x;e[4]!==s?(x=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[4]=s,e[5]=x):x=e[5];let S;e[6]===Symbol.for("react.memo_cache_sentinel")?(S=f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:"Loading PVCs..."}),e[6]=S):S=e[6];let k;return e[7]!==x?(k=f.jsxs("div",{children:[x,S]}),e[7]=x,e[8]=k):k=e[8],k}if(i.length===0)return null;let m;e[9]!==s?(m=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[9]=s,e[10]=m):m=e[10];let b;e[11]!==i?(b=i.map(TX),e[11]=i,e[12]=b):b=e[12];let y;e[13]!==b?(y=f.jsx("div",{className:"space-y-2",children:b}),e[13]=b,e[14]=y):y=e[14];let w;return e[15]!==m||e[16]!==y?(w=f.jsxs("div",{children:[m,y]}),e[15]=m,e[16]=y,e[17]=w):w=e[17],w}function TX(t){return f.jsx("div",{className:`border rounded-lg p-3 ${t.status==="Bound"?"border-emerald-500/30 bg-emerald-500/5":"border-neutral-300 dark:border-neutral-700 bg-neutral-100 dark:bg-neutral-900/50"}`,children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(ms,{size:16,className:t.status==="Bound"?"text-emerald-600 dark:text-emerald-400":"text-neutral-600 dark:text-neutral-500"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100 truncate",children:t.name})}),f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:[t.storageClass||"default"," storage class"]})]}),f.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[t.capacity&&f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:t.capacity}),f.jsx("span",{className:t.status==="Bound"?"text-emerald-600 dark:text-emerald-400":"text-amber-600 dark:text-amber-400",children:t.status})]})]})},t.name)}function RX(t){const e=Me.c(25),{loader:n,title:s}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],e[0]=r):r=e[0];const[i,o]=F.useState(r),[c,d]=F.useState(!0),[h,g]=F.useState(!0);let m,b;if(e[1]!==n?(m=()=>{n().then(o).finally(()=>d(!1))},b=[n],e[1]=n,e[2]=m,e[3]=b):(m=e[2],b=e[3]),F.useEffect(m,b),c){let R;e[4]!==s?(R=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[4]=s,e[5]=R):R=e[5];let B;e[6]===Symbol.for("react.memo_cache_sentinel")?(B=f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:"Loading jobs..."}),e[6]=B):B=e[6];let E;return e[7]!==R?(E=f.jsxs("div",{children:[R,B]}),e[7]=R,e[8]=E):E=e[8],E}if(i.length===0)return null;let y;e[9]!==h||e[10]!==i?(y=h?i:i.slice(0,3),e[9]=h,e[10]=i,e[11]=y):y=e[11];const w=y;let x;e[12]!==s?(x=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[12]=s,e[13]=x):x=e[13];let S;e[14]!==w?(S=w.map(OX),e[14]=w,e[15]=S):S=e[15];let k;e[16]!==h||e[17]!==i.length?(k=i.length>3&&f.jsxs("button",{onClick:()=>g(!h),className:"flex items-center gap-1 text-xs text-neutral-600 dark:text-neutral-500 hover:text-neutral-900 dark:hover:text-neutral-300 transition-colors mt-2",children:[h?f.jsx(rs,{size:12}):f.jsx(Or,{size:12}),h?"Show less":`Show ${i.length-3} more`]}),e[16]=h,e[17]=i.length,e[18]=k):k=e[18];let C;e[19]!==S||e[20]!==k?(C=f.jsxs("div",{className:"space-y-2",children:[S,k]}),e[19]=S,e[20]=k,e[21]=C):C=e[21];let N;return e[22]!==x||e[23]!==C?(N=f.jsxs("div",{children:[x,C]}),e[22]=x,e[23]=C,e[24]=N):N=e[24],N}function OX(t){return f.jsx("div",{className:`border rounded-lg p-3 ${t.status==="Complete"?"border-emerald-500/30 bg-emerald-500/5":t.status==="Failed"?"border-red-500/30 bg-red-500/5":"border-amber-500/30 bg-amber-500/5"}`,children:f.jsxs("div",{className:"flex items-center gap-3",children:[t.status==="Complete"?f.jsx(Zr,{size:16,className:"text-emerald-400"}):t.status==="Failed"?f.jsx(ca,{size:16,className:"text-red-400"}):f.jsx(ua,{size:16,className:"text-amber-400"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100 truncate",title:t.name,children:t.name})}),t.startTime&&f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:["Started ",NX(new Date(t.startTime))]})]}),f.jsx("span",{className:`text-xs ${t.status==="Complete"?"text-emerald-600 dark:text-emerald-400":t.status==="Failed"?"text-red-600 dark:text-red-400":"text-amber-600 dark:text-amber-400"}`,children:t.status})]})},t.name)}function MX(t){const e=Me.c(4),{items:n}=t;let s;e[0]!==n?(s=n.map(BX),e[0]=n,e[1]=s):s=e[1];let r;return e[2]!==s?(r=f.jsx("div",{className:"space-y-2",children:s}),e[2]=s,e[3]=r):r=e[3],r}function BX(t,e){return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(ms,{size:14,className:"text-purple-400"}),f.jsx("span",{className:"text-sm text-neutral-900 dark:text-neutral-100",children:t.name})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[t.size&&f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Size:"})," ",f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:t.size})]}),t.storageClass&&f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Class:"})," ",f.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:t.storageClass})]}),t.accessModes&&f.jsxs("div",{className:"col-span-2",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Access:"})," ",f.jsx("span",{className:"text-neutral-900 dark:text-neutral-300",children:t.accessModes.join(", ")})]})]})]},e)}function DX(t){const e=Me.c(8),{schedule:n,description:s}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(IT,{size:16,className:"text-purple-400"}),f.jsx("span",{className:"text-sm text-neutral-900 dark:text-neutral-100",children:"Schedule"})]}),e[0]=r):r=e[0];let i;e[1]!==n?(i=f.jsx("div",{className:"font-mono text-cyan-600 dark:text-cyan-400 text-lg mb-1",children:n}),e[1]=n,e[2]=i):i=e[2];let o;e[3]!==s?(o=f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:s}),e[3]=s,e[4]=o):o=e[4];let c;return e[5]!==i||e[6]!==o?(c=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[r,i,o]}),e[5]=i,e[6]=o,e[7]=c):c=e[7],c}function LX(t){const e=Me.c(35),{completions:n,succeeded:s,failed:r,active:i}=t;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=f.jsx("span",{className:"text-sm text-neutral-900 dark:text-neutral-300",children:"Completions"}),e[0]=o):o=e[0];const c=s>=n?"text-emerald-600 dark:text-emerald-400":"text-cyan-600 dark:text-cyan-400";let d;e[1]!==s||e[2]!==c?(d=f.jsx("span",{className:c,children:s}),e[1]=s,e[2]=c,e[3]=d):d=e[3];let h;e[4]!==n?(h=f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-500",children:[" / ",n]}),e[4]=n,e[5]=h):h=e[5];let g;e[6]!==d||e[7]!==h?(g=f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o,f.jsxs("span",{className:"text-sm",children:[d,h]})]}),e[6]=d,e[7]=h,e[8]=g):g=e[8];let m;e[9]!==n||e[10]!==s?(m=s>0&&f.jsx("div",{className:"h-full bg-emerald-500",style:{width:`${s/n*100}%`}}),e[9]=n,e[10]=s,e[11]=m):m=e[11];let b;e[12]!==n||e[13]!==r?(b=r>0&&f.jsx("div",{className:"h-full bg-red-500",style:{width:`${r/(n+r)*100}%`}}),e[12]=n,e[13]=r,e[14]=b):b=e[14];let y;e[15]!==m||e[16]!==b?(y=f.jsxs("div",{className:"h-2 bg-neutral-300 dark:bg-neutral-700 rounded-full overflow-hidden flex",children:[m,b]}),e[15]=m,e[16]=b,e[17]=y):y=e[17];let w;e[18]===Symbol.for("react.memo_cache_sentinel")?(w=f.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),e[18]=w):w=e[18];let x;e[19]!==s?(x=f.jsxs("div",{className:"flex items-center gap-1",children:[w,f.jsxs("span",{className:"text-neutral-700 dark:text-neutral-400",children:["Succeeded: ",s]})]}),e[19]=s,e[20]=x):x=e[20];let S;e[21]===Symbol.for("react.memo_cache_sentinel")?(S=f.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"}),e[21]=S):S=e[21];let k;e[22]!==i?(k=f.jsxs("div",{className:"flex items-center gap-1",children:[S,f.jsxs("span",{className:"text-neutral-700 dark:text-neutral-400",children:["Active: ",i]})]}),e[22]=i,e[23]=k):k=e[23];let C;e[24]===Symbol.for("react.memo_cache_sentinel")?(C=f.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),e[24]=C):C=e[24];let N;e[25]!==r?(N=f.jsxs("div",{className:"flex items-center gap-1",children:[C,f.jsxs("span",{className:"text-neutral-700 dark:text-neutral-400",children:["Failed: ",r]})]}),e[25]=r,e[26]=N):N=e[26];let R;e[27]!==x||e[28]!==k||e[29]!==N?(R=f.jsxs("div",{className:"flex items-center gap-4 mt-3 text-xs",children:[x,k,N]}),e[27]=x,e[28]=k,e[29]=N,e[30]=R):R=e[30];let B;return e[31]!==R||e[32]!==g||e[33]!==y?(B=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[g,y,R]}),e[31]=R,e[32]=g,e[33]=y,e[34]=B):B=e[34],B}function IX(t){const e=Me.c(7),{startTime:n,completionTime:s}=t;let r;e[0]!==n?(r=n&&f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Started:"})," ",f.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:n.toLocaleString()})]}),e[0]=n,e[1]=r):r=e[1];let i;e[2]!==s?(i=s&&f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Completed:"})," ",f.jsx("span",{className:"text-emerald-600 dark:text-emerald-400",children:s.toLocaleString()})]}),e[2]=s,e[3]=i):i=e[3];let o;return e[4]!==r||e[5]!==i?(o=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3 space-y-2 text-xs",children:[r,i]}),e[4]=r,e[5]=i,e[6]=o):o=e[6],o}function PX(t){const e=Me.c(11),{items:n,columns:s}=t,r=s===void 0?2:s;let i,o;if(e[0]!==r||e[1]!==n){const d=n.filter($X),h=r===3?"grid-cols-3":r===2?"grid-cols-2":"grid-cols-1";let g;e[4]!==r?(g=y=>{if(r!==3)return"";const w=y%3;return w===0?"text-left":w===1?"text-center":"text-right"},e[4]=r,e[5]=g):g=e[5];const m=g;i=`bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3 grid gap-2 text-xs ${h}`;let b;e[6]!==m?(b=(y,w)=>f.jsxs("div",{className:`overflow-hidden ${m(w)}`,children:[f.jsxs("span",{className:"text-neutral-500 dark:text-neutral-500",children:[y.label,":"]})," ",f.jsx("span",{className:y.color||"text-neutral-900 dark:text-neutral-300",children:y.value})]},w),e[6]=m,e[7]=b):b=e[7],o=d.map(b),e[0]=r,e[1]=n,e[2]=i,e[3]=o}else i=e[2],o=e[3];let c;return e[8]!==i||e[9]!==o?(c=f.jsx("div",{className:i,children:o}),e[8]=i,e[9]=o,e[10]=c):c=e[10],c}function $X(t){return t.value!==void 0&&t.value!==null}function zX(t){const e=Me.c(20),{labels:n,title:s}=t,r=s===void 0?"Labels":s;let i,o,c,d,h;if(e[0]!==n||e[1]!==r){h=Symbol.for("react.early_return_sentinel");e:{const y=Object.entries(n);if(y.length===0){h=null;break e}const w=["node-role.kubernetes.io/","kubernetes.io/os","kubernetes.io/arch","node.kubernetes.io/instance-type","topology.kubernetes.io/"],x=[...y].sort((k,C)=>{const N=w.some(B=>k[0].startsWith(B)),R=w.some(B=>C[0].startsWith(B));return N&&!R?-1:!N&&R?1:0});let S;e[7]===Symbol.for("react.memo_cache_sentinel")?(S=f.jsx(VT,{size:12}),e[7]=S):S=e[7],e[8]!==r?(d=f.jsxs("h5",{className:"flex items-center gap-2 text-xs font-medium text-neutral-500 uppercase tracking-wider mb-2",children:[S,r]}),e[8]=r,e[9]=d):d=e[9],o="w-full text-xs table-fixed",e[10]===Symbol.for("react.memo_cache_sentinel")?(c=f.jsxs("colgroup",{children:[f.jsx("col",{className:"w-[40%]"}),f.jsx("col",{className:"w-[60%]"})]}),e[10]=c):c=e[10],i=x.map((k,C)=>{const[N,R]=k,B=w.some(E=>N.startsWith(E));return f.jsxs("tr",{className:C%2===0?"bg-neutral-50 dark:bg-neutral-800/30":"",children:[f.jsx("td",{className:`py-1.5 px-2 truncate ${B?"text-blue-600 dark:text-blue-400":"text-sky-600 dark:text-sky-400"}`,title:N,children:N}),f.jsx("td",{className:"py-1.5 px-2 text-emerald-600 dark:text-emerald-400 truncate",title:R,children:R})]},N)})}e[0]=n,e[1]=r,e[2]=i,e[3]=o,e[4]=c,e[5]=d,e[6]=h}else i=e[2],o=e[3],c=e[4],d=e[5],h=e[6];if(h!==Symbol.for("react.early_return_sentinel"))return h;let g;e[11]!==i?(g=f.jsx("tbody",{children:i}),e[11]=i,e[12]=g):g=e[12];let m;e[13]!==o||e[14]!==c||e[15]!==g?(m=f.jsxs("table",{className:o,children:[c,g]}),e[13]=o,e[14]=c,e[15]=g,e[16]=m):m=e[16];let b;return e[17]!==d||e[18]!==m?(b=f.jsxs("div",{children:[d,m]}),e[17]=d,e[18]=m,e[19]=b):b=e[19],b}function HX(t){const e=Me.c(4),{containers:n}=t;let s;e[0]!==n?(s=n.map(UX),e[0]=n,e[1]=s):s=e[1];let r;return e[2]!==s?(r=f.jsx("div",{className:"space-y-1",children:s}),e[2]=s,e[3]=r):r=e[3],r}function UX(t){return f.jsxs("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 px-2 py-1.5 rounded flex items-center gap-2",children:[f.jsx(Qr,{size:12,className:"text-blue-400"}),f.jsxs("span",{className:"text-neutral-900 dark:text-neutral-300",children:[t.name,":"]}),f.jsx("span",{className:"text-cyan-400 truncate",children:t.image})]},t.name)}function VX(t){const e=Me.c(4),{addresses:n}=t;let s;e[0]!==n?(s=n.map(FX),e[0]=n,e[1]=s):s=e[1];let r;return e[2]!==s?(r=f.jsx("div",{className:"grid grid-cols-2 gap-2",children:s}),e[2]=s,e[3]=r):r=e[3],r}function FX(t,e){return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-2",children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:t.type}),f.jsx("div",{className:"text-sm text-cyan-600 dark:text-cyan-400 font-mono",children:t.address})]},e)}const qX=15e3;function KX(t){const e=Me.c(56),{loader:n,title:s}=t,[r,i]=F.useState(null),[o,c]=F.useState(!0);let d,h;if(e[0]!==n?(d=()=>{let O=!0;const K=async()=>{const Z=await n();O&&(i(Z),c(!1))};K();const j=setInterval(K,qX);return()=>{O=!1,clearInterval(j)}},h=[n],e[0]=n,e[1]=d,e[2]=h):(d=e[1],h=e[2]),F.useEffect(d,h),!o&&r===null)return null;if(o){let O;e[3]!==s?(O=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[3]=s,e[4]=O):O=e[4];let K;e[5]===Symbol.for("react.memo_cache_sentinel")?(K=f.jsxs("div",{className:"flex items-center gap-2 text-xs text-neutral-500",children:[f.jsx(En,{size:12,className:"animate-spin"}),"Loading metrics..."]}),e[5]=K):K=e[5];let j;return e[6]!==O?(j=f.jsxs("div",{children:[O,K]}),e[6]=O,e[7]=j):j=e[7],j}if(!r)return null;const g=sj(r.cpu.usageNanoCores,r.cpu.allocatableNanoCores??0),m=sj(r.memory.usageBytes,r.memory.allocatableBytes??0);let b;e[8]!==s?(b=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[8]=s,e[9]=b):b=e[9];let y;e[10]===Symbol.for("react.memo_cache_sentinel")?(y=f.jsxs("span",{className:"text-xs text-neutral-400 flex items-center gap-1.5",children:[f.jsx(jg,{size:12}),"CPU Usage"]}),e[10]=y):y=e[10];const w=g>80?"text-amber-400":"text-blue-400";let x;e[11]!==r.cpu.usage||e[12]!==w?(x=f.jsx("span",{className:w,children:r.cpu.usage}),e[11]=r.cpu.usage,e[12]=w,e[13]=x):x=e[13];let S;e[14]!==r.cpu.allocatable?(S=f.jsxs("span",{className:"text-neutral-500",children:[" / ",r.cpu.allocatable]}),e[14]=r.cpu.allocatable,e[15]=S):S=e[15];let k;e[16]!==x||e[17]!==S?(k=f.jsxs("div",{className:"flex items-center justify-between",children:[y,f.jsxs("span",{className:"text-xs font-mono",children:[x,S]})]}),e[16]=x,e[17]=S,e[18]=k):k=e[18];const C=`h-full transition-all duration-300 ${g>80?"bg-amber-500":"bg-blue-500"}`,N=`${g}%`;let R;e[19]!==N?(R={width:N},e[19]=N,e[20]=R):R=e[20];let B;e[21]!==R||e[22]!==C?(B=f.jsx("div",{className:"h-2 bg-neutral-700 rounded-full overflow-hidden",children:f.jsx("div",{className:C,style:R})}),e[21]=R,e[22]=C,e[23]=B):B=e[23];let E;e[24]!==g?(E=f.jsxs("div",{className:"text-xs text-neutral-500 text-right",children:[g,"% utilized"]}),e[24]=g,e[25]=E):E=e[25];let z;e[26]!==B||e[27]!==E||e[28]!==k?(z=f.jsxs("div",{className:"bg-neutral-900/50 rounded-lg p-3 space-y-2",children:[k,B,E]}),e[26]=B,e[27]=E,e[28]=k,e[29]=z):z=e[29];let U;e[30]===Symbol.for("react.memo_cache_sentinel")?(U=f.jsxs("span",{className:"text-xs text-neutral-400 flex items-center gap-1.5",children:[f.jsx(ms,{size:12}),"Memory Usage"]}),e[30]=U):U=e[30];const Y=m>80?"text-amber-400":"text-purple-400";let D;e[31]!==r.memory.usage||e[32]!==Y?(D=f.jsx("span",{className:Y,children:r.memory.usage}),e[31]=r.memory.usage,e[32]=Y,e[33]=D):D=e[33];let W;e[34]!==r.memory.allocatable?(W=f.jsxs("span",{className:"text-neutral-500",children:[" / ",r.memory.allocatable]}),e[34]=r.memory.allocatable,e[35]=W):W=e[35];let V;e[36]!==D||e[37]!==W?(V=f.jsxs("div",{className:"flex items-center justify-between",children:[U,f.jsxs("span",{className:"text-xs font-mono",children:[D,W]})]}),e[36]=D,e[37]=W,e[38]=V):V=e[38];const q=`h-full transition-all duration-300 ${m>80?"bg-amber-500":"bg-purple-500"}`,X=`${m}%`;let I;e[39]!==X?(I={width:X},e[39]=X,e[40]=I):I=e[40];let L;e[41]!==q||e[42]!==I?(L=f.jsx("div",{className:"h-2 bg-neutral-700 rounded-full overflow-hidden",children:f.jsx("div",{className:q,style:I})}),e[41]=q,e[42]=I,e[43]=L):L=e[43];let J;e[44]!==m?(J=f.jsxs("div",{className:"text-xs text-neutral-500 text-right",children:[m,"% utilized"]}),e[44]=m,e[45]=J):J=e[45];let G;e[46]!==V||e[47]!==L||e[48]!==J?(G=f.jsxs("div",{className:"bg-neutral-900/50 rounded-lg p-3 space-y-2",children:[V,L,J]}),e[46]=V,e[47]=L,e[48]=J,e[49]=G):G=e[49];let P;e[50]!==z||e[51]!==G?(P=f.jsxs("div",{className:"space-y-3",children:[z,G]}),e[50]=z,e[51]=G,e[52]=P):P=e[52];let T;return e[53]!==P||e[54]!==b?(T=f.jsxs("div",{children:[b,P]}),e[53]=P,e[54]=b,e[55]=T):T=e[55],T}function WX(t){const e=Me.c(24),{data:n}=t,{cpu:s,memory:r}=n;if(!(s.requests||s.limits||r.requests||r.limits))return null;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=f.jsx("h5",{className:"text-xs font-medium text-neutral-500 uppercase tracking-wider mb-2",children:"Resource Quota"}),e[0]=o):o=e[0];let c;e[1]===Symbol.for("react.memo_cache_sentinel")?(c=f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(jg,{size:14,className:"text-blue-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"CPU"})]}),e[1]=c):c=e[1];let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=f.jsx("span",{className:"text-xs text-neutral-500",children:"Requests"}),e[2]=d):d=e[2];const h=s.requests||"";let g;e[3]!==h?(g=f.jsxs("div",{className:"flex items-center justify-between",children:[d,f.jsx("span",{className:"text-sm font-mono text-neutral-900 dark:text-neutral-100",children:h})]}),e[3]=h,e[4]=g):g=e[4];let m;e[5]===Symbol.for("react.memo_cache_sentinel")?(m=f.jsx("span",{className:"text-xs text-neutral-500",children:"Limits"}),e[5]=m):m=e[5];const b=s.limits||"";let y;e[6]!==b?(y=f.jsxs("div",{className:"flex items-center justify-between",children:[m,f.jsx("span",{className:"text-sm font-mono text-neutral-900 dark:text-neutral-100",children:b})]}),e[6]=b,e[7]=y):y=e[7];let w;e[8]!==g||e[9]!==y?(w=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800 rounded-lg p-3",children:[c,f.jsxs("div",{className:"space-y-1.5",children:[g,y]})]}),e[8]=g,e[9]=y,e[10]=w):w=e[10];let x;e[11]===Symbol.for("react.memo_cache_sentinel")?(x=f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(ms,{size:14,className:"text-purple-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Memory"})]}),e[11]=x):x=e[11];let S;e[12]===Symbol.for("react.memo_cache_sentinel")?(S=f.jsx("span",{className:"text-xs text-neutral-500",children:"Requests"}),e[12]=S):S=e[12];const k=r.requests||"";let C;e[13]!==k?(C=f.jsxs("div",{className:"flex items-center justify-between",children:[S,f.jsx("span",{className:"text-sm font-mono text-neutral-900 dark:text-neutral-100",children:k})]}),e[13]=k,e[14]=C):C=e[14];let N;e[15]===Symbol.for("react.memo_cache_sentinel")?(N=f.jsx("span",{className:"text-xs text-neutral-500",children:"Limits"}),e[15]=N):N=e[15];const R=r.limits||"";let B;e[16]!==R?(B=f.jsxs("div",{className:"flex items-center justify-between",children:[N,f.jsx("span",{className:"text-sm font-mono text-neutral-900 dark:text-neutral-100",children:R})]}),e[16]=R,e[17]=B):B=e[17];let E;e[18]!==C||e[19]!==B?(E=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800 rounded-lg p-3",children:[x,f.jsxs("div",{className:"space-y-1.5",children:[C,B]})]}),e[18]=C,e[19]=B,e[20]=E):E=e[20];let z;return e[21]!==E||e[22]!==w?(z=f.jsxs("div",{children:[o,f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[w,E]})]}),e[21]=E,e[22]=w,e[23]=z):z=e[23],z}function DB(t){const e=Me.c(9),{section:n}=t,{title:s,data:r}=n;let i;e[0]!==r?(i=GX(r),e[0]=r,e[1]=i):i=e[1];const o=i;if(o===null)return null;if(!s){let h;return e[2]!==o?(h=f.jsx(f.Fragment,{children:o}),e[2]=o,e[3]=h):h=e[3],h}let c;e[4]!==s?(c=f.jsx("h5",{className:"text-xs font-medium text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[4]=s,e[5]=c):c=e[5];let d;return e[6]!==o||e[7]!==c?(d=f.jsxs("div",{children:[c,o]}),e[6]=o,e[7]=c,e[8]=d):d=e[8],d}function GX(t){switch(t.type){case"status-cards":return f.jsx(aX,{items:t.items});case"gauges":return f.jsx(oX,{items:t.items,podGrid:t.showPodGrid});case"info-grid":return f.jsx(PX,{items:t.items,columns:t.columns});case"containers":return f.jsx(hX,{items:t.items,metricsLoader:t.metricsLoader});case"volumes":return f.jsx(yX,{items:t.items});case"labels":return f.jsx(zX,{labels:t.labels,title:t.title});case"capacity-bars":return f.jsx(SX,{items:t.items});case"taints":return f.jsx(CX,{items:t.items});case"container-images":return f.jsx(HX,{containers:t.containers});case"related-replicasets":return f.jsx(AX,{loader:t.loader,title:t.title});case"related-pvcs":return f.jsx(jX,{loader:t.loader,title:t.title});case"related-jobs":return f.jsx(RX,{loader:t.loader,title:t.title});case"volume-claim-templates":return f.jsx(MX,{items:t.items});case"schedule":return f.jsx(DX,{schedule:t.schedule,description:t.description});case"job-progress":return f.jsx(LX,{...t});case"timeline":return f.jsx(IX,{startTime:t.startTime,completionTime:t.completionTime});case"addresses":return f.jsx(VX,{addresses:t.addresses});case"node-metrics":return f.jsx(KX,{loader:t.loader,title:t.title});case"resource-quota":return f.jsx(WX,{data:t.data});case"custom":return t.render();default:return null}}function YX(t){const e=Me.c(25),{resource:n,onActionComplete:s,hideActions:r}=t,i=r===void 0?!1:r,{context:o}=ei();let c,d,h,g,m;if(e[0]!==o||e[1]!==i||e[2]!==s||e[3]!==n){m=Symbol.for("react.early_return_sentinel");e:{const y=iX(o,n);let w;e[9]!==n?(w=MB(n),e[9]=n,e[10]=w):w=e[10];const x=w,S=n.metadata?.annotations?.["kubernetes.io/description"];if(!y||y.sections.length===0){let k;e[11]!==n.kind?(k=f.jsxs("div",{className:"text-neutral-500 text-sm",children:["No visualization available for ",n.kind]}),e[11]=n.kind,e[12]=k):k=e[12],m=k;break e}c="space-y-4",e[13]!==x||e[14]!==i||e[15]!==s||e[16]!==n?(d=!i&&f.jsx(BB,{actions:x,resource:n,onActionComplete:s}),e[13]=x,e[14]=i,e[15]=s,e[16]=n,e[17]=d):d=e[17],e[18]!==S?(h=S&&f.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:S}),e[18]=S,e[19]=h):h=e[19],g=y.sections.map(XX)}e[0]=o,e[1]=i,e[2]=s,e[3]=n,e[4]=c,e[5]=d,e[6]=h,e[7]=g,e[8]=m}else c=e[4],d=e[5],h=e[6],g=e[7],m=e[8];if(m!==Symbol.for("react.early_return_sentinel"))return m;let b;return e[20]!==c||e[21]!==d||e[22]!==h||e[23]!==g?(b=f.jsxs("div",{className:c,children:[d,h,g]}),e[20]=c,e[21]=d,e[22]=h,e[23]=g,e[24]=b):b=e[24],b}function XX(t){return f.jsx(DB,{section:t},t.id)}var LB=BT();function ck(t){const e=Me.c(6),{toolbarRef:n,children:s}=t,[r,i]=F.useState(null);let o,c;e[0]!==n?(o=()=>{i(n.current)},c=[n],e[0]=n,e[1]=o,e[2]=c):(o=e[1],c=e[2]),F.useEffect(o,c);let d;return e[3]!==s||e[4]!==r?(d=r?LB.createPortal(s,r):null,e[3]=s,e[4]=r,e[5]=d):d=e[5],d}const rj=["text-cyan-400","text-emerald-400","text-amber-400","text-purple-400","text-pink-400","text-blue-400","text-red-400","text-orange-400"];function JX(t,e){const n=e.indexOf(t);return rj[n%rj.length]}function QX(t){if(!t)return"";try{return new Date(t).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3})}catch{return t}}const ZX=/^([IWEF])(\d{4})\s+(\d{2}:\d{2}:\d{2}\.\d+)\s+\d+\s+([\w.]+:\d+)]\s*(.*)$/;function eJ(t){const e=t.match(ZX);if(!e)return null;const[,n,,,s,r]=e,i=n==="E"?"error":n==="W"?"warn":n==="F"?"error":"info",o=IB(r),c=[`source: ${s}`];for(const[d,h]of Object.entries(o))c.push(`${d}: ${h}`);return{format:"klog",formatted:c.join(`
`),level:i}}function IB(t){const e={},n=/(?:"([^"]*)"|([\w.]+)=(?:"([^"]*)"|([^\s]*)))/g;let s,r=0;for(;(s=n.exec(t))!==null;)if(s[1]!==void 0)e[`msg${r||""}`]=s[1],r++;else{const i=s[2],o=s[3]??s[4]??"";e[i]=o}return e}function tJ(t){const e=t.trim();if(!/\w+=/.test(e))return null;const n=IB(e),s=Object.keys(n);if(s.length<2)return null;let r="unknown";const i=(n.level??n.lvl??n.severity??"").toLowerCase();return i.includes("err")||i==="fatal"?r="error":i.includes("warn")?r="warn":i==="info"?r="info":i==="debug"&&(r="debug"),{format:"logfmt",formatted:s.map(c=>`${c}: ${n[c]}`).join(`
`),level:r}}function nJ(t){const e=t.trim();if(e.startsWith("{")||e.startsWith("["))try{const r=JSON.parse(e);return{format:"json",formatted:JSON.stringify(r,null,2),jsonData:r}}catch{}const n=eJ(e);if(n)return n;const s=tJ(e);return s||{format:"plain",formatted:t}}const sJ={error:"text-red-600 dark:text-red-400",warn:"text-yellow-600 dark:text-yellow-400",info:"text-blue-600 dark:text-blue-400",debug:"text-neutral-600 dark:text-neutral-400",trace:"text-neutral-500 dark:text-neutral-500",unknown:"text-neutral-700 dark:text-neutral-300"},rJ={error:"bg-red-50 dark:bg-red-500/10 border-l-2 border-red-400 dark:border-red-500/50",warn:"bg-yellow-50 dark:bg-yellow-500/10 border-l-2 border-yellow-400 dark:border-yellow-500/50",info:"",debug:"",trace:"",unknown:""};function iJ(t,e,n){if(n&&n!=="unknown")return n;if(e){const i=e.level??e.severity??e.lvl??e.log_level??"",o=String(i).toLowerCase();if(o.includes("err")||o==="fatal"||o==="critical")return"error";if(o.includes("warn"))return"warn";if(o==="info")return"info";if(o==="debug")return"debug";if(o==="trace")return"trace"}const r=t.toLowerCase().slice(0,100);return/\b(error|err|fatal|critical|panic|exception)\b/.test(r)?"error":/\b(warn|warning)\b/.test(r)?"warn":/\binfo\b/.test(r)?"info":/\bdebug\b/.test(r)?"debug":/\btrace\b/.test(r)?"trace":"unknown"}function PB(t){const e=Me.c(53),{logs:n,sources:s,isLoading:r,error:i,emptyMessage:o,unavailableMessage:c,toolbarRef:d}=t,h=r===void 0?!1:r,g=o===void 0?"Waiting for logs...":o,[m,b]=F.useState(!0),[y,w]=F.useState(!1),[x,S]=F.useState(!1),k=F.useRef(null),C=F.useRef(null);let N;e[0]!==n?(N=async()=>{const K=n.map(aJ).join(`
`);await navigator.clipboard.writeText(K),w(!0),setTimeout(()=>w(!1),2e3)},e[0]=n,e[1]=N):N=e[1];const R=N;let B;e[2]===Symbol.for("react.memo_cache_sentinel")?(B=()=>{if(!C.current)return;const{scrollTop:K,scrollHeight:j,clientHeight:Z}=C.current,le=j-K-Z<50;b(le)},e[2]=B):B=e[2];const E=B;let z;e[3]!==m?(z=()=>{m&&k.current&&k.current.scrollIntoView({behavior:"smooth"})},e[3]=m,e[4]=z):z=e[4];let U;e[5]!==m||e[6]!==n?(U=[n,m],e[5]=m,e[6]=n,e[7]=U):U=e[7],F.useEffect(z,U);let Y;e[8]===Symbol.for("react.memo_cache_sentinel")?(Y=()=>{b(!0),k.current?.scrollIntoView({behavior:"smooth"})},e[8]=Y):Y=e[8];const D=Y;if(c){let K;return e[9]!==c?(K=f.jsx("div",{className:"h-full flex items-center justify-center text-neutral-500 dark:text-neutral-500",children:c}),e[9]=c,e[10]=K):K=e[10],K}let W;e[11]!==y||e[12]!==R||e[13]!==n.length||e[14]!==x||e[15]!==d?(W=d&&f.jsxs(ck,{toolbarRef:d,children:[f.jsx("button",{onClick:()=>S(!x),className:`flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium rounded transition-colors ${x?"text-amber-600 dark:text-amber-400 bg-amber-100 dark:bg-amber-500/20":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-200 dark:hover:bg-neutral-800"}`,title:x?"Show all logs":"Show only errors & warnings",children:f.jsx(H7,{size:12})}),f.jsx("button",{onClick:R,disabled:n.length===0,className:"flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-200 dark:hover:bg-neutral-800 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Copy logs",children:y?f.jsx(bn,{size:12,className:"text-emerald-500"}):f.jsx(hs,{size:12})})]}),e[11]=y,e[12]=R,e[13]=n.length,e[14]=x,e[15]=d,e[16]=W):W=e[16];let V;e[17]!==h?(V=h&&f.jsx("div",{className:"p-4 text-neutral-500 dark:text-neutral-500",children:"Loading..."}),e[17]=h,e[18]=V):V=e[18];let q;e[19]!==i?(q=i&&f.jsx("div",{className:"p-4 text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-500/10 border-b border-red-300 dark:border-red-500/30",children:i}),e[19]=i,e[20]=q):q=e[20];let X;e[21]!==h||e[22]!==s||e[23]!==c?(X=!h&&s.length===0&&!c&&f.jsx("div",{className:"p-4 text-neutral-500 dark:text-neutral-500",children:"No sources found"}),e[21]=h,e[22]=s,e[23]=c,e[24]=X):X=e[24];let I;e[25]!==g||e[26]!==i||e[27]!==h||e[28]!==n.length||e[29]!==s?(I=n.length===0&&!h&&s.length>0&&!i&&f.jsx("div",{className:"p-4 text-neutral-500 dark:text-neutral-500",children:g}),e[25]=g,e[26]=i,e[27]=h,e[28]=n.length,e[29]=s,e[30]=I):I=e[30];let L;if(e[31]!==n||e[32]!==x||e[33]!==s){let K;e[35]!==x||e[36]!==s?(K=(j,Z)=>{const le=nJ(j.message),te=iJ(j.message,le.jsonData,le.level);if(x&&te!=="error"&&te!=="warn")return null;const pe=sJ[te],_e=rJ[te],Ce=le.format!=="plain";return f.jsxs("div",{className:`hover:bg-neutral-100 dark:hover:bg-neutral-900/50 rounded px-2 py-1 group ${_e}`,children:[f.jsxs("div",{className:"flex items-center gap-2 text-[10px] leading-tight mb-0.5",children:[f.jsx("span",{className:`${JX(j.source,s)}`,title:j.source,children:j.source}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-600",children:QX(j.timestamp)}),j.container&&j.container!==j.source&&f.jsx("span",{className:"text-neutral-500 dark:text-neutral-500",children:j.container})]}),Ce?f.jsx("pre",{className:`${pe} whitespace-pre overflow-x-auto scrollbar-hide leading-snug text-[11px]`,children:le.formatted}):f.jsx("div",{className:`${pe} break-all whitespace-pre-wrap leading-snug`,children:le.formatted})]},Z)},e[35]=x,e[36]=s,e[37]=K):K=e[37],L=n.map(K),e[31]=n,e[32]=x,e[33]=s,e[34]=L}else L=e[34];let J;e[38]===Symbol.for("react.memo_cache_sentinel")?(J=f.jsx("div",{ref:k}),e[38]=J):J=e[38];let G;e[39]!==L?(G=f.jsxs("div",{className:"p-2 space-y-1",children:[L,J]}),e[39]=L,e[40]=G):G=e[40];let P;e[41]!==q||e[42]!==X||e[43]!==I||e[44]!==G||e[45]!==V?(P=f.jsxs("div",{ref:C,onScroll:E,className:"flex-1 overflow-auto font-mono text-xs",children:[V,q,X,I,G]}),e[41]=q,e[42]=X,e[43]=I,e[44]=G,e[45]=V,e[46]=P):P=e[46];let T;e[47]!==m?(T=!m&&f.jsx("div",{className:"shrink-0 px-4 py-2 border-t border-neutral-200 dark:border-neutral-800 bg-neutral-100 dark:bg-neutral-900/50",children:f.jsxs("button",{onClick:D,className:"flex items-center gap-1 text-xs text-neutral-600 dark:text-neutral-500 hover:text-neutral-900 dark:hover:text-neutral-300",children:[f.jsx(rs,{size:12}),"Scroll to bottom"]})}),e[47]=m,e[48]=T):T=e[48];let O;return e[49]!==P||e[50]!==T||e[51]!==W?(O=f.jsxs("div",{className:"flex flex-col h-full bg-neutral-50 dark:bg-neutral-950",children:[W,P,T]}),e[49]=P,e[50]=T,e[51]=W,e[52]=O):O=e[52],O}function aJ(t){return`${t.timestamp??""} [${t.source}]${t.container?` [${t.container}]`:""} ${t.message}`}function ij(t,e,n){const s=t.match(/^(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d+Z)\s+(.*)$/);return s?{podName:e,container:n,timestamp:s[1],message:s[2]}:{podName:e,container:n,message:t}}async function oJ(t,e,n,s){const r=new URLSearchParams;s.container&&r.set("container",s.container),r.set("follow","true"),s.tailLines!==void 0&&r.set("tailLines",String(s.tailLines)),r.set("timestamps","true");const i=`/contexts/${t}/api/v1/namespaces/${e}/pods/${n}/log?${r.toString()}`;try{const o=await fetch(i,{signal:s.signal});if(!o.ok)throw new Error(`Failed to fetch logs: ${o.status} ${o.statusText}`);if(!o.body)throw new Error("No response body");const c=o.body.getReader(),d=new TextDecoder;let h="";for(;;){const{done:g,value:m}=await c.read();if(g)break;h+=d.decode(m,{stream:!0});const b=h.split(`
`);h=b.pop()||"";for(const y of b)y.trim()&&s.onLog(ij(y,n,s.container))}h.trim()&&s.onLog(ij(h,n,s.container))}catch(o){if(o.name==="AbortError")return;s.onError?.(o)}}function lJ(t){const e=new AbortController;for(const n of t.podNames)oJ(t.context,t.namespace,n,{container:t.container,follow:t.follow,tailLines:t.tailLines,timestamps:t.timestamps,onLog:t.onLog,onError:t.onError,signal:e.signal});return e}async function cJ(t,e,n,s){let r;switch(n.toLowerCase()){case"deployment":r=`/apis/apps/v1/namespaces/${e}/deployments/${s}`;break;case"daemonset":r=`/apis/apps/v1/namespaces/${e}/daemonsets/${s}`;break;case"replicaset":r=`/apis/apps/v1/namespaces/${e}/replicasets/${s}`;break;case"statefulset":r=`/apis/apps/v1/namespaces/${e}/statefulsets/${s}`;break;case"job":r=`/apis/batch/v1/namespaces/${e}/jobs/${s}`;break;default:throw new Error(`Unsupported workload kind: ${n}`)}const i=await fetch(`/contexts/${t}${r}`);if(!i.ok)throw new Error(`Failed to fetch ${n}: ${i.status}`);const c=(await i.json()).spec?.selector?.matchLabels;if(!c)throw new Error("Workload has no selector labels");const d=Object.entries(c).map(([m,b])=>`${m}=${b}`).join(","),h=await fetch(`/contexts/${t}/api/v1/namespaces/${e}/pods?labelSelector=${encodeURIComponent(d)}`);if(!h.ok)throw new Error(`Failed to fetch pods: ${h.status}`);return(await h.json()).items.map(m=>m.metadata.name)}const uJ=4e3;function hJ(t){const e=Me.c(27),{context:n,resource:s,tailLines:r}=t,i=r===void 0?uJ:r;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=[],e[0]=o):o=e[0];const[c,d]=F.useState(o);let h;e[1]===Symbol.for("react.memo_cache_sentinel")?(h=[],e[1]=h):h=e[1];const[g,m]=F.useState(h),[b,y]=F.useState(!1),[w,x]=F.useState(null),[S,k]=F.useState(!1),C=F.useRef(null),N=s.kind,R=s.metadata?.name,B=s.metadata?.namespace;let E;e:{if(N==="Pod"&&R){let L;e[2]!==R?(L=[R],e[2]=R,e[3]=L):L=e[3],E=L;break e}E=g}const z=E;let U,Y;e[4]!==n||e[5]!==N||e[6]!==R||e[7]!==B?(U=()=>{if(!N||!R||!B||N==="Pod")return;let L=!1;return async function(){y(!0);try{const P=await cJ(n,B,N,R);L||(m(P),y(!1))}catch(P){L||(x(P.message),y(!1))}}(),()=>{L=!0}},Y=[n,B,N,R],e[4]=n,e[5]=N,e[6]=R,e[7]=B,e[8]=U,e[9]=Y):(U=e[8],Y=e[9]),F.useEffect(U,Y);const D=z.length>0&&!S&&!b;let W,V;e[10]!==n||e[11]!==B||e[12]!==D||e[13]!==z||e[14]!==i?(W=()=>{if(D&&B){const L=setTimeout(()=>{k(!0),C.current=lJ({context:n,namespace:B,podNames:z,follow:!0,tailLines:i,timestamps:!0,onLog:J=>{const G={timestamp:J.timestamp,message:J.message,source:J.podName,container:J.container};d(P=>[...P,G])},onError:J=>{x(J.message)}})},0);return()=>clearTimeout(L)}},V=[D,n,B,z,i],e[10]=n,e[11]=B,e[12]=D,e[13]=z,e[14]=i,e[15]=W,e[16]=V):(W=e[15],V=e[16]),F.useEffect(W,V);let q;e[17]===Symbol.for("react.memo_cache_sentinel")?(q=()=>()=>{C.current?.abort(),C.current=null},e[17]=q):q=e[17];let X;e[18]!==N||e[19]!==R||e[20]!==B?(X=[N,R,B],e[18]=N,e[19]=R,e[20]=B,e[21]=X):X=e[21],F.useEffect(q,X);let I;return e[22]!==w||e[23]!==b||e[24]!==c||e[25]!==z?(I={logs:c,sources:z,isLoading:b,error:w},e[22]=w,e[23]=b,e[24]=c,e[25]=z,e[26]=I):I=e[26],I}function dJ(t){const e=Me.c(9),{resource:n,toolbarRef:s}=t,{context:r}=ei();let i;e[0]!==r||e[1]!==n?(i={context:r,resource:n},e[0]=r,e[1]=n,e[2]=i):i=e[2];const{logs:o,sources:c,isLoading:d,error:h}=hJ(i);let g;return e[3]!==h||e[4]!==d||e[5]!==o||e[6]!==c||e[7]!==s?(g=f.jsx(PB,{logs:o,sources:c,isLoading:d,error:h,emptyMessage:"Waiting for logs...",toolbarRef:s}),e[3]=h,e[4]=d,e[5]=o,e[6]=c,e[7]=s,e[8]=g):g=e[8],g}function fJ(t){return`${t.kind}/${t.metadata?.namespace}/${t.metadata?.name}`}function pJ(t){const e=Me.c(6),{resource:n,toolbarRef:s}=t;let r;e[0]!==n?(r=fJ(n),e[0]=n,e[1]=r):r=e[1];let i;return e[2]!==n||e[3]!==r||e[4]!==s?(i=f.jsx(dJ,{resource:n,toolbarRef:s},r),e[2]=n,e[3]=r,e[4]=s,e[5]=i):i=e[5],i}var $B=Object.defineProperty,mJ=Object.getOwnPropertyDescriptor,gJ=(t,e)=>{for(var n in e)$B(t,n,{get:e[n],enumerable:!0})},fn=(t,e,n,s)=>{for(var r=s>1?void 0:s?mJ(e,n):e,i=t.length-1,o;i>=0;i--)(o=t[i])&&(r=(s?o(e,n,r):o(r))||r);return s&&r&&$B(e,n,r),r},Le=(t,e)=>(n,s)=>e(n,s,t),aj="Terminal input",Rw={get:()=>aj,set:t=>aj=t},oj="Too much output to announce, navigate to rows manually to read",Ow={get:()=>oj,set:t=>oj=t};function yJ(t){return t.replace(/\r?\n/g,"\r")}function bJ(t,e){return e?"\x1B[200~"+t+"\x1B[201~":t}function vJ(t,e){t.clipboardData&&t.clipboardData.setData("text/plain",e.selectionText),t.preventDefault()}function xJ(t,e,n,s){if(t.stopPropagation(),t.clipboardData){let r=t.clipboardData.getData("text/plain");zB(r,e,n,s)}}function zB(t,e,n,s){t=yJ(t),t=bJ(t,n.decPrivateModes.bracketedPasteMode&&s.rawOptions.ignoreBracketedPasteMode!==!0),n.triggerDataEvent(t,!0),e.value=""}function HB(t,e,n){let s=n.getBoundingClientRect(),r=t.clientX-s.left-10,i=t.clientY-s.top-10;e.style.width="20px",e.style.height="20px",e.style.left=`${r}px`,e.style.top=`${i}px`,e.style.zIndex="1000",e.focus()}function lj(t,e,n,s,r){HB(t,e,n),r&&s.rightClickSelect(t),e.value=s.selectionText,e.select()}function Xa(t){return t>65535?(t-=65536,String.fromCharCode((t>>10)+55296)+String.fromCharCode(t%1024+56320)):String.fromCharCode(t)}function Vy(t,e=0,n=t.length){let s="";for(let r=e;r<n;++r){let i=t[r];i>65535?(i-=65536,s+=String.fromCharCode((i>>10)+55296)+String.fromCharCode(i%1024+56320)):s+=String.fromCharCode(i)}return s}var _J=class{constructor(){this._interim=0}clear(){this._interim=0}decode(t,e){let n=t.length;if(!n)return 0;let s=0,r=0;if(this._interim){let i=t.charCodeAt(r++);56320<=i&&i<=57343?e[s++]=(this._interim-55296)*1024+i-56320+65536:(e[s++]=this._interim,e[s++]=i),this._interim=0}for(let i=r;i<n;++i){let o=t.charCodeAt(i);if(55296<=o&&o<=56319){if(++i>=n)return this._interim=o,s;let c=t.charCodeAt(i);56320<=c&&c<=57343?e[s++]=(o-55296)*1024+c-56320+65536:(e[s++]=o,e[s++]=c);continue}o!==65279&&(e[s++]=o)}return s}},wJ=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(t,e){let n=t.length;if(!n)return 0;let s=0,r,i,o,c,d=0,h=0;if(this.interim[0]){let b=!1,y=this.interim[0];y&=(y&224)===192?31:(y&240)===224?15:7;let w=0,x;for(;(x=this.interim[++w]&63)&&w<4;)y<<=6,y|=x;let S=(this.interim[0]&224)===192?2:(this.interim[0]&240)===224?3:4,k=S-w;for(;h<k;){if(h>=n)return 0;if(x=t[h++],(x&192)!==128){h--,b=!0;break}else this.interim[w++]=x,y<<=6,y|=x&63}b||(S===2?y<128?h--:e[s++]=y:S===3?y<2048||y>=55296&&y<=57343||y===65279||(e[s++]=y):y<65536||y>1114111||(e[s++]=y)),this.interim.fill(0)}let g=n-4,m=h;for(;m<n;){for(;m<g&&!((r=t[m])&128)&&!((i=t[m+1])&128)&&!((o=t[m+2])&128)&&!((c=t[m+3])&128);)e[s++]=r,e[s++]=i,e[s++]=o,e[s++]=c,m+=4;if(r=t[m++],r<128)e[s++]=r;else if((r&224)===192){if(m>=n)return this.interim[0]=r,s;if(i=t[m++],(i&192)!==128){m--;continue}if(d=(r&31)<<6|i&63,d<128){m--;continue}e[s++]=d}else if((r&240)===224){if(m>=n)return this.interim[0]=r,s;if(i=t[m++],(i&192)!==128){m--;continue}if(m>=n)return this.interim[0]=r,this.interim[1]=i,s;if(o=t[m++],(o&192)!==128){m--;continue}if(d=(r&15)<<12|(i&63)<<6|o&63,d<2048||d>=55296&&d<=57343||d===65279)continue;e[s++]=d}else if((r&248)===240){if(m>=n)return this.interim[0]=r,s;if(i=t[m++],(i&192)!==128){m--;continue}if(m>=n)return this.interim[0]=r,this.interim[1]=i,s;if(o=t[m++],(o&192)!==128){m--;continue}if(m>=n)return this.interim[0]=r,this.interim[1]=i,this.interim[2]=o,s;if(c=t[m++],(c&192)!==128){m--;continue}if(d=(r&7)<<18|(i&63)<<12|(o&63)<<6|c&63,d<65536||d>1114111)continue;e[s++]=d}}return s}},UB="",to=" ",Kf=class VB{constructor(){this.fg=0,this.bg=0,this.extended=new bg}static toColorRGB(e){return[e>>>16&255,e>>>8&255,e&255]}static fromColorRGB(e){return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255}clone(){let e=new VB;return e.fg=this.fg,e.bg=this.bg,e.extended=this.extended.clone(),e}isInverse(){return this.fg&67108864}isBold(){return this.fg&134217728}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:this.fg&268435456}isBlink(){return this.fg&536870912}isInvisible(){return this.fg&1073741824}isItalic(){return this.bg&67108864}isDim(){return this.bg&134217728}isStrikethrough(){return this.fg&2147483648}isProtected(){return this.bg&536870912}isOverline(){return this.bg&1073741824}getFgColorMode(){return this.fg&50331648}getBgColorMode(){return this.bg&50331648}isFgRGB(){return(this.fg&50331648)===50331648}isBgRGB(){return(this.bg&50331648)===50331648}isFgPalette(){return(this.fg&50331648)===16777216||(this.fg&50331648)===33554432}isBgPalette(){return(this.bg&50331648)===16777216||(this.bg&50331648)===33554432}isFgDefault(){return(this.fg&50331648)===0}isBgDefault(){return(this.bg&50331648)===0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(this.fg&50331648){case 16777216:case 33554432:return this.fg&255;case 50331648:return this.fg&16777215;default:return-1}}getBgColor(){switch(this.bg&50331648){case 16777216:case 33554432:return this.bg&255;case 50331648:return this.bg&16777215;default:return-1}}hasExtendedAttrs(){return this.bg&268435456}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(this.bg&268435456&&~this.extended.underlineColor)switch(this.extended.underlineColor&50331648){case 16777216:case 33554432:return this.extended.underlineColor&255;case 50331648:return this.extended.underlineColor&16777215;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return this.bg&268435456&&~this.extended.underlineColor?this.extended.underlineColor&50331648:this.getFgColorMode()}isUnderlineColorRGB(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===50331648:this.isFgRGB()}isUnderlineColorPalette(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===16777216||(this.extended.underlineColor&50331648)===33554432:this.isFgPalette()}isUnderlineColorDefault(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===0:this.isFgDefault()}getUnderlineStyle(){return this.fg&268435456?this.bg&268435456?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}},bg=class FB{constructor(e=0,n=0){this._ext=0,this._urlId=0,this._ext=e,this._urlId=n}get ext(){return this._urlId?this._ext&-469762049|this.underlineStyle<<26:this._ext}set ext(e){this._ext=e}get underlineStyle(){return this._urlId?5:(this._ext&469762048)>>26}set underlineStyle(e){this._ext&=-469762049,this._ext|=e<<26&469762048}get underlineColor(){return this._ext&67108863}set underlineColor(e){this._ext&=-67108864,this._ext|=e&67108863}get urlId(){return this._urlId}set urlId(e){this._urlId=e}get underlineVariantOffset(){let e=(this._ext&3758096384)>>29;return e<0?e^4294967288:e}set underlineVariantOffset(e){this._ext&=536870911,this._ext|=e<<29&3758096384}clone(){return new FB(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}},Mr=class qB extends Kf{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new bg,this.combinedData=""}static fromCharData(e){let n=new qB;return n.setFromCharData(e),n}isCombined(){return this.content&2097152}getWidth(){return this.content>>22}getChars(){return this.content&2097152?this.combinedData:this.content&2097151?Xa(this.content&2097151):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):this.content&2097151}setFromCharData(e){this.fg=e[0],this.bg=0;let n=!1;if(e[1].length>2)n=!0;else if(e[1].length===2){let s=e[1].charCodeAt(0);if(55296<=s&&s<=56319){let r=e[1].charCodeAt(1);56320<=r&&r<=57343?this.content=(s-55296)*1024+r-56320+65536|e[2]<<22:n=!0}else n=!0}else this.content=e[1].charCodeAt(0)|e[2]<<22;n&&(this.combinedData=e[1],this.content=2097152|e[2]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},cj="di$target",Mw="di$dependencies",fx=new Map;function SJ(t){return t[Mw]||[]}function Kn(t){if(fx.has(t))return fx.get(t);let e=function(n,s,r){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");kJ(e,n,r)};return e._id=t,fx.set(t,e),e}function kJ(t,e,n){e[cj]===e?e[Mw].push({id:t,index:n}):(e[Mw]=[{id:t,index:n}],e[cj]=e)}var Es=Kn("BufferService"),KB=Kn("CoreMouseService"),Al=Kn("CoreService"),CJ=Kn("CharsetService"),uk=Kn("InstantiationService"),WB=Kn("LogService"),js=Kn("OptionsService"),GB=Kn("OscLinkService"),NJ=Kn("UnicodeService"),Wf=Kn("DecorationService"),Bw=class{constructor(t,e,n){this._bufferService=t,this._optionsService=e,this._oscLinkService=n}provideLinks(t,e){let n=this._bufferService.buffer.lines.get(t-1);if(!n){e(void 0);return}let s=[],r=this._optionsService.rawOptions.linkHandler,i=new Mr,o=n.getTrimmedLength(),c=-1,d=-1,h=!1;for(let g=0;g<o;g++)if(!(d===-1&&!n.hasContent(g))){if(n.loadCell(g,i),i.hasExtendedAttrs()&&i.extended.urlId)if(d===-1){d=g,c=i.extended.urlId;continue}else h=i.extended.urlId!==c;else d!==-1&&(h=!0);if(h||d!==-1&&g===o-1){let m=this._oscLinkService.getLinkData(c)?.uri;if(m){let b={start:{x:d+1,y:t},end:{x:g+(!h&&g===o-1?1:0),y:t}},y=!1;if(!r?.allowNonHttpProtocols)try{let w=new URL(m);["http:","https:"].includes(w.protocol)||(y=!0)}catch{y=!0}y||s.push({text:m,range:b,activate:(w,x)=>r?r.activate(w,x,b):AJ(w,x),hover:(w,x)=>r?.hover?.(w,x,b),leave:(w,x)=>r?.leave?.(w,x,b)})}h=!1,i.hasExtendedAttrs()&&i.extended.urlId?(d=g,c=i.extended.urlId):(d=-1,c=-1)}}e(s)}};Bw=fn([Le(0,Es),Le(1,js),Le(2,GB)],Bw);function AJ(t,e){if(confirm(`Do you want to navigate to ${e}?

WARNING: This link could potentially be dangerous`)){let n=window.open();if(n){try{n.opener=null}catch{}n.location.href=e}else console.warn("Opening link blocked as opener could not be cleared")}}var Fy=Kn("CharSizeService"),ya=Kn("CoreBrowserService"),hk=Kn("MouseService"),ba=Kn("RenderService"),EJ=Kn("SelectionService"),YB=Kn("CharacterJoinerService"),Ou=Kn("ThemeService"),XB=Kn("LinkProviderService"),jJ=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(t){setTimeout(()=>{throw t.stack?uj.isErrorNoTelemetry(t)?new uj(t.message+`

`+t.stack):new Error(t.message+`

`+t.stack):t},0)}}addListener(t){return this.listeners.push(t),()=>{this._removeListener(t)}}emit(t){this.listeners.forEach(e=>{e(t)})}_removeListener(t){this.listeners.splice(this.listeners.indexOf(t),1)}setUnexpectedErrorHandler(t){this.unexpectedErrorHandler=t}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(t){this.unexpectedErrorHandler(t),this.emit(t)}onUnexpectedExternalError(t){this.unexpectedErrorHandler(t)}},TJ=new jJ;function c0(t){RJ(t)||TJ.onUnexpectedError(t)}var Dw="Canceled";function RJ(t){return t instanceof OJ?!0:t instanceof Error&&t.name===Dw&&t.message===Dw}var OJ=class extends Error{constructor(){super(Dw),this.name=this.message}};function MJ(t){return new Error(`Illegal argument: ${t}`)}var uj=class Lw extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof Lw)return e;let n=new Lw;return n.message=e.message,n.stack=e.stack,n}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}},Iw=class JB extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,JB.prototype)}};function er(t,e=0){return t[t.length-(1+e)]}var BJ;(t=>{function e(i){return i<0}t.isLessThan=e;function n(i){return i<=0}t.isLessThanOrEqual=n;function s(i){return i>0}t.isGreaterThan=s;function r(i){return i===0}t.isNeitherLessOrGreaterThan=r,t.greaterThan=1,t.lessThan=-1,t.neitherLessOrGreaterThan=0})(BJ||={});function DJ(t,e){let n=this,s=!1,r;return function(){return s||(s=!0,e||(r=t.apply(n,arguments))),r}}var QB;(t=>{function e(R){return R&&typeof R=="object"&&typeof R[Symbol.iterator]=="function"}t.is=e;let n=Object.freeze([]);function s(){return n}t.empty=s;function*r(R){yield R}t.single=r;function i(R){return e(R)?R:r(R)}t.wrap=i;function o(R){return R||n}t.from=o;function*c(R){for(let B=R.length-1;B>=0;B--)yield R[B]}t.reverse=c;function d(R){return!R||R[Symbol.iterator]().next().done===!0}t.isEmpty=d;function h(R){return R[Symbol.iterator]().next().value}t.first=h;function g(R,B){let E=0;for(let z of R)if(B(z,E++))return!0;return!1}t.some=g;function m(R,B){for(let E of R)if(B(E))return E}t.find=m;function*b(R,B){for(let E of R)B(E)&&(yield E)}t.filter=b;function*y(R,B){let E=0;for(let z of R)yield B(z,E++)}t.map=y;function*w(R,B){let E=0;for(let z of R)yield*B(z,E++)}t.flatMap=w;function*x(...R){for(let B of R)yield*B}t.concat=x;function S(R,B,E){let z=E;for(let U of R)z=B(z,U);return z}t.reduce=S;function*k(R,B,E=R.length){for(B<0&&(B+=R.length),E<0?E+=R.length:E>R.length&&(E=R.length);B<E;B++)yield R[B]}t.slice=k;function C(R,B=Number.POSITIVE_INFINITY){let E=[];if(B===0)return[E,R];let z=R[Symbol.iterator]();for(let U=0;U<B;U++){let Y=z.next();if(Y.done)return[E,t.empty()];E.push(Y.value)}return[E,{[Symbol.iterator](){return z}}]}t.consume=C;async function N(R){let B=[];for await(let E of R)B.push(E);return Promise.resolve(B)}t.asyncToArray=N})(QB||={});function bl(t){if(QB.is(t)){let e=[];for(let n of t)if(n)try{n.dispose()}catch(s){e.push(s)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}function LJ(...t){return sn(()=>bl(t))}function sn(t){return{dispose:DJ(()=>{t()})}}var ZB=class eD{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{bl(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?eD.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),void 0)}};ZB.DISABLE_DISPOSED_WARNING=!1;var oo=ZB,xt=class{constructor(){this._store=new oo,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};xt.None=Object.freeze({dispose(){}});var cu=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(t){this._isDisposed||t===this._value||(this._value?.dispose(),this._value=t)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}clearAndLeak(){let t=this._value;return this._value=void 0,t}},ea=typeof window=="object"?window:globalThis,Pw=class $w{constructor(e){this.element=e,this.next=$w.Undefined,this.prev=$w.Undefined}};Pw.Undefined=new Pw(void 0);var on=Pw,hj=class{constructor(){this._first=on.Undefined,this._last=on.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===on.Undefined}clear(){let t=this._first;for(;t!==on.Undefined;){let e=t.next;t.prev=on.Undefined,t.next=on.Undefined,t=e}this._first=on.Undefined,this._last=on.Undefined,this._size=0}unshift(t){return this._insert(t,!1)}push(t){return this._insert(t,!0)}_insert(t,e){let n=new on(t);if(this._first===on.Undefined)this._first=n,this._last=n;else if(e){let r=this._last;this._last=n,n.prev=r,r.next=n}else{let r=this._first;this._first=n,n.next=r,r.prev=n}this._size+=1;let s=!1;return()=>{s||(s=!0,this._remove(n))}}shift(){if(this._first!==on.Undefined){let t=this._first.element;return this._remove(this._first),t}}pop(){if(this._last!==on.Undefined){let t=this._last.element;return this._remove(this._last),t}}_remove(t){if(t.prev!==on.Undefined&&t.next!==on.Undefined){let e=t.prev;e.next=t.next,t.next.prev=e}else t.prev===on.Undefined&&t.next===on.Undefined?(this._first=on.Undefined,this._last=on.Undefined):t.next===on.Undefined?(this._last=this._last.prev,this._last.next=on.Undefined):t.prev===on.Undefined&&(this._first=this._first.next,this._first.prev=on.Undefined);this._size-=1}*[Symbol.iterator](){let t=this._first;for(;t!==on.Undefined;)yield t.element,t=t.next}},IJ=globalThis.performance&&typeof globalThis.performance.now=="function",PJ=class tD{static create(e){return new tD(e)}constructor(e){this._now=IJ&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}},ns;(t=>{t.None=()=>xt.None;function e(V,q){return m(V,()=>{},0,void 0,!0,void 0,q)}t.defer=e;function n(V){return(q,X=null,I)=>{let L=!1,J;return J=V(G=>{if(!L)return J?J.dispose():L=!0,q.call(X,G)},null,I),L&&J.dispose(),J}}t.once=n;function s(V,q,X){return h((I,L=null,J)=>V(G=>I.call(L,q(G)),null,J),X)}t.map=s;function r(V,q,X){return h((I,L=null,J)=>V(G=>{q(G),I.call(L,G)},null,J),X)}t.forEach=r;function i(V,q,X){return h((I,L=null,J)=>V(G=>q(G)&&I.call(L,G),null,J),X)}t.filter=i;function o(V){return V}t.signal=o;function c(...V){return(q,X=null,I)=>{let L=LJ(...V.map(J=>J(G=>q.call(X,G))));return g(L,I)}}t.any=c;function d(V,q,X,I){let L=X;return s(V,J=>(L=q(L,J),L),I)}t.reduce=d;function h(V,q){let X,I={onWillAddFirstListener(){X=V(L.fire,L)},onDidRemoveLastListener(){X?.dispose()}},L=new je(I);return q?.add(L),L.event}function g(V,q){return q instanceof Array?q.push(V):q&&q.add(V),V}function m(V,q,X=100,I=!1,L=!1,J,G){let P,T,O,K=0,j,Z={leakWarningThreshold:J,onWillAddFirstListener(){P=V(te=>{K++,T=q(T,te),I&&!O&&(le.fire(T),T=void 0),j=()=>{let pe=T;T=void 0,O=void 0,(!I||K>1)&&le.fire(pe),K=0},typeof X=="number"?(clearTimeout(O),O=setTimeout(j,X)):O===void 0&&(O=0,queueMicrotask(j))})},onWillRemoveListener(){L&&K>0&&j?.()},onDidRemoveLastListener(){j=void 0,P.dispose()}},le=new je(Z);return G?.add(le),le.event}t.debounce=m;function b(V,q=0,X){return t.debounce(V,(I,L)=>I?(I.push(L),I):[L],q,void 0,!0,void 0,X)}t.accumulate=b;function y(V,q=(I,L)=>I===L,X){let I=!0,L;return i(V,J=>{let G=I||!q(J,L);return I=!1,L=J,G},X)}t.latch=y;function w(V,q,X){return[t.filter(V,q,X),t.filter(V,I=>!q(I),X)]}t.split=w;function x(V,q=!1,X=[],I){let L=X.slice(),J=V(T=>{L?L.push(T):P.fire(T)});I&&I.add(J);let G=()=>{L?.forEach(T=>P.fire(T)),L=null},P=new je({onWillAddFirstListener(){J||(J=V(T=>P.fire(T)),I&&I.add(J))},onDidAddFirstListener(){L&&(q?setTimeout(G):G())},onDidRemoveLastListener(){J&&J.dispose(),J=null}});return I&&I.add(P),P.event}t.buffer=x;function S(V,q){return(X,I,L)=>{let J=q(new C);return V(function(G){let P=J.evaluate(G);P!==k&&X.call(I,P)},void 0,L)}}t.chain=S;let k=Symbol("HaltChainable");class C{constructor(){this.steps=[]}map(q){return this.steps.push(q),this}forEach(q){return this.steps.push(X=>(q(X),X)),this}filter(q){return this.steps.push(X=>q(X)?X:k),this}reduce(q,X){let I=X;return this.steps.push(L=>(I=q(I,L),I)),this}latch(q=(X,I)=>X===I){let X=!0,I;return this.steps.push(L=>{let J=X||!q(L,I);return X=!1,I=L,J?L:k}),this}evaluate(q){for(let X of this.steps)if(q=X(q),q===k)break;return q}}function N(V,q,X=I=>I){let I=(...P)=>G.fire(X(...P)),L=()=>V.on(q,I),J=()=>V.removeListener(q,I),G=new je({onWillAddFirstListener:L,onDidRemoveLastListener:J});return G.event}t.fromNodeEventEmitter=N;function R(V,q,X=I=>I){let I=(...P)=>G.fire(X(...P)),L=()=>V.addEventListener(q,I),J=()=>V.removeEventListener(q,I),G=new je({onWillAddFirstListener:L,onDidRemoveLastListener:J});return G.event}t.fromDOMEventEmitter=R;function B(V){return new Promise(q=>n(V)(q))}t.toPromise=B;function E(V){let q=new je;return V.then(X=>{q.fire(X)},()=>{q.fire(void 0)}).finally(()=>{q.dispose()}),q.event}t.fromPromise=E;function z(V,q){return V(X=>q.fire(X))}t.forward=z;function U(V,q,X){return q(X),V(I=>q(I))}t.runAndSubscribe=U;class Y{constructor(q,X){this._observable=q,this._counter=0,this._hasChanged=!1;let I={onWillAddFirstListener:()=>{q.addObserver(this)},onDidRemoveLastListener:()=>{q.removeObserver(this)}};this.emitter=new je(I),X&&X.add(this.emitter)}beginUpdate(q){this._counter++}handlePossibleChange(q){}handleChange(q,X){this._hasChanged=!0}endUpdate(q){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function D(V,q){return new Y(V,q).emitter.event}t.fromObservable=D;function W(V){return(q,X,I)=>{let L=0,J=!1,G={beginUpdate(){L++},endUpdate(){L--,L===0&&(V.reportChanges(),J&&(J=!1,q.call(X)))},handlePossibleChange(){},handleChange(){J=!0}};V.addObserver(G),V.reportChanges();let P={dispose(){V.removeObserver(G)}};return I instanceof oo?I.add(P):Array.isArray(I)&&I.push(P),P}}t.fromObservableLight=W})(ns||={});var zw=class Hw{constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${Hw._idPool++}`,Hw.all.add(this)}start(e){this._stopWatch=new PJ,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}};zw.all=new Set,zw._idPool=0;var $J=zw,zJ=-1,nD=class sD{constructor(e,n,s=(sD._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e,this.threshold=n,this.name=s,this._warnCountdown=0}dispose(){this._stacks?.clear()}check(e,n){let s=this.threshold;if(s<=0||n<s)return;this._stacks||(this._stacks=new Map);let r=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,r+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=s*.5;let[i,o]=this.getMostFrequentStack(),c=`[${this.name}] potential listener LEAK detected, having ${n} listeners already. MOST frequent listener (${o}):`;console.warn(c),console.warn(i);let d=new VJ(c,i);this._errorHandler(d)}return()=>{let i=this._stacks.get(e.value)||0;this._stacks.set(e.value,i-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,n=0;for(let[s,r]of this._stacks)(!e||n<r)&&(e=[s,r],n=r);return e}};nD._idPool=1;var HJ=nD,UJ=class rD{constructor(e){this.value=e}static create(){let e=new Error;return new rD(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},VJ=class extends Error{constructor(t,e){super(t),this.name="ListenerLeakError",this.stack=e}},FJ=class extends Error{constructor(t,e){super(t),this.name="ListenerRefusalError",this.stack=e}},qJ=0,px=class{constructor(t){this.value=t,this.id=qJ++}},KJ=2,WJ,je=class{constructor(e){this._size=0,this._options=e,this._leakageMon=this._options?.leakWarningThreshold?new HJ(e?.onListenerError??c0,this._options?.leakWarningThreshold??zJ):void 0,this._perfMon=this._options?._profName?new $J(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){this._disposed||(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose())}get event(){return this._event??=(e,n,s)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let c=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(c);let d=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],h=new FJ(`${c}. HINT: Stack shows most frequent listener (${d[1]}-times)`,d[0]);return(this._options?.onListenerError||c0)(h),xt.None}if(this._disposed)return xt.None;n&&(e=e.bind(n));let r=new px(e),i;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(r.stack=UJ.create(),i=this._leakageMon.check(r.stack,this._size+1)),this._listeners?this._listeners instanceof px?(this._deliveryQueue??=new GJ,this._listeners=[this._listeners,r]):this._listeners.push(r):(this._options?.onWillAddFirstListener?.(this),this._listeners=r,this._options?.onDidAddFirstListener?.(this)),this._size++;let o=sn(()=>{i?.(),this._removeListener(r)});return s instanceof oo?s.add(o):Array.isArray(s)&&s.push(o),o},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let n=this._listeners,s=n.indexOf(e);if(s===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,n[s]=void 0;let r=this._deliveryQueue.current===this;if(this._size*KJ<=n.length){let i=0;for(let o=0;o<n.length;o++)n[o]?n[i++]=n[o]:r&&(this._deliveryQueue.end--,i<this._deliveryQueue.i&&this._deliveryQueue.i--);n.length=i}}_deliver(e,n){if(!e)return;let s=this._options?.onListenerError||c0;if(!s){e.value(n);return}try{e.value(n)}catch(r){s(r)}}_deliverQueue(e){let n=e.current._listeners;for(;e.i<e.end;)this._deliver(n[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof px)this._deliver(this._listeners,e);else{let n=this._deliveryQueue;n.enqueue(this,e,this._listeners.length),this._deliverQueue(n)}this._perfMon?.stop()}hasListeners(){return this._size>0}},GJ=class{constructor(){this.i=-1,this.end=0}enqueue(t,e,n){this.i=0,this.end=n,this.current=t,this.value=e}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},Uw=class{constructor(){this.mapWindowIdToZoomLevel=new Map,this._onDidChangeZoomLevel=new je,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this.mapWindowIdToZoomFactor=new Map,this._onDidChangeFullscreen=new je,this.onDidChangeFullscreen=this._onDidChangeFullscreen.event,this.mapWindowIdToFullScreen=new Map}getZoomLevel(e){return this.mapWindowIdToZoomLevel.get(this.getWindowId(e))??0}setZoomLevel(e,n){if(this.getZoomLevel(n)===e)return;let s=this.getWindowId(n);this.mapWindowIdToZoomLevel.set(s,e),this._onDidChangeZoomLevel.fire(s)}getZoomFactor(e){return this.mapWindowIdToZoomFactor.get(this.getWindowId(e))??1}setZoomFactor(e,n){this.mapWindowIdToZoomFactor.set(this.getWindowId(n),e)}setFullscreen(e,n){if(this.isFullscreen(n)===e)return;let s=this.getWindowId(n);this.mapWindowIdToFullScreen.set(s,e),this._onDidChangeFullscreen.fire(s)}isFullscreen(e){return!!this.mapWindowIdToFullScreen.get(this.getWindowId(e))}getWindowId(e){return e.vscodeWindowId}};Uw.INSTANCE=new Uw;var dk=Uw;function YJ(t,e,n){typeof e=="string"&&(e=t.matchMedia(e)),e.addEventListener("change",n)}dk.INSTANCE.onDidChangeZoomLevel;function XJ(t){return dk.INSTANCE.getZoomFactor(t)}dk.INSTANCE.onDidChangeFullscreen;var Mu=typeof navigator=="object"?navigator.userAgent:"",Vw=Mu.indexOf("Firefox")>=0,JJ=Mu.indexOf("AppleWebKit")>=0,fk=Mu.indexOf("Chrome")>=0,QJ=!fk&&Mu.indexOf("Safari")>=0;Mu.indexOf("Electron/")>=0;Mu.indexOf("Android")>=0;var mx=!1;if(typeof ea.matchMedia=="function"){let t=ea.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),e=ea.matchMedia("(display-mode: fullscreen)");mx=t.matches,YJ(ea,t,({matches:n})=>{mx&&e.matches||(mx=n)})}var Lc="en",Fw=!1,qw=!1,u0=!1,iD=!1,Dm,h0=Lc,dj=Lc,ZJ,Xi,el=globalThis,ar;typeof el.vscode<"u"&&typeof el.vscode.process<"u"?ar=el.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(ar=process);var eQ=typeof ar?.versions?.electron=="string",tQ=eQ&&ar?.type==="renderer";if(typeof ar=="object"){Fw=ar.platform==="win32",qw=ar.platform==="darwin",u0=ar.platform==="linux",u0&&ar.env.SNAP&&ar.env.SNAP_REVISION,ar.env.CI||ar.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Dm=Lc,h0=Lc;let t=ar.env.VSCODE_NLS_CONFIG;if(t)try{let e=JSON.parse(t);Dm=e.userLocale,dj=e.osLocale,h0=e.resolvedLanguage||Lc,ZJ=e.languagePack?.translationsConfigFile}catch{}iD=!0}else typeof navigator=="object"&&!tQ?(Xi=navigator.userAgent,Fw=Xi.indexOf("Windows")>=0,qw=Xi.indexOf("Macintosh")>=0,(Xi.indexOf("Macintosh")>=0||Xi.indexOf("iPad")>=0||Xi.indexOf("iPhone")>=0)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0,u0=Xi.indexOf("Linux")>=0,Xi?.indexOf("Mobi")>=0,h0=globalThis._VSCODE_NLS_LANGUAGE||Lc,Dm=navigator.language.toLowerCase(),dj=Dm):console.error("Unable to resolve platform.");var aD=Fw,vi=qw,nQ=u0,fj=iD,wi=Xi,Ka=h0,sQ;(t=>{function e(){return Ka}t.value=e;function n(){return Ka.length===2?Ka==="en":Ka.length>=3?Ka[0]==="e"&&Ka[1]==="n"&&Ka[2]==="-":!1}t.isDefaultVariant=n;function s(){return Ka==="en"}t.isDefault=s})(sQ||={});var rQ=typeof el.postMessage=="function"&&!el.importScripts;(()=>{if(rQ){let t=[];el.addEventListener("message",n=>{if(n.data&&n.data.vscodeScheduleAsyncWork)for(let s=0,r=t.length;s<r;s++){let i=t[s];if(i.id===n.data.vscodeScheduleAsyncWork){t.splice(s,1),i.callback();return}}});let e=0;return n=>{let s=++e;t.push({id:s,callback:n}),el.postMessage({vscodeScheduleAsyncWork:s},"*")}}return t=>setTimeout(t)})();var iQ=!!(wi&&wi.indexOf("Chrome")>=0);wi&&wi.indexOf("Firefox")>=0;!iQ&&wi&&wi.indexOf("Safari")>=0;wi&&wi.indexOf("Edg/")>=0;wi&&wi.indexOf("Android")>=0;var _c=typeof navigator=="object"?navigator:{};fj||document.queryCommandSupported&&document.queryCommandSupported("copy")||_c&&_c.clipboard&&_c.clipboard.writeText,fj||_c&&_c.clipboard&&_c.clipboard.readText;var pk=class{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(t,e){this._keyCodeToStr[t]=e,this._strToKeyCode[e.toLowerCase()]=t}keyCodeToStr(t){return this._keyCodeToStr[t]}strToKeyCode(t){return this._strToKeyCode[t.toLowerCase()]||0}},gx=new pk,pj=new pk,mj=new pk,aQ=new Array(230),oD;(t=>{function e(c){return gx.keyCodeToStr(c)}t.toString=e;function n(c){return gx.strToKeyCode(c)}t.fromString=n;function s(c){return pj.keyCodeToStr(c)}t.toUserSettingsUS=s;function r(c){return mj.keyCodeToStr(c)}t.toUserSettingsGeneral=r;function i(c){return pj.strToKeyCode(c)||mj.strToKeyCode(c)}t.fromUserSettings=i;function o(c){if(c>=98&&c<=113)return null;switch(c){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return gx.keyCodeToStr(c)}t.toElectronAccelerator=o})(oD||={});var oQ=class lD{constructor(e,n,s,r,i){this.ctrlKey=e,this.shiftKey=n,this.altKey=s,this.metaKey=r,this.keyCode=i}equals(e){return e instanceof lD&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}getHashCode(){let e=this.ctrlKey?"1":"0",n=this.shiftKey?"1":"0",s=this.altKey?"1":"0",r=this.metaKey?"1":"0";return`K${e}${n}${s}${r}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new lQ([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},lQ=class{constructor(t){if(t.length===0)throw MJ("chords");this.chords=t}getHashCode(){let t="";for(let e=0,n=this.chords.length;e<n;e++)e!==0&&(t+=";"),t+=this.chords[e].getHashCode();return t}equals(t){if(t===null||this.chords.length!==t.chords.length)return!1;for(let e=0;e<this.chords.length;e++)if(!this.chords[e].equals(t.chords[e]))return!1;return!0}};function cQ(t){if(t.charCode){let n=String.fromCharCode(t.charCode).toUpperCase();return oD.fromString(n)}let e=t.keyCode;if(e===3)return 7;if(Vw)switch(e){case 59:return 85;case 60:if(nQ)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(vi)return 57;break}else if(JJ&&(vi&&e===93||!vi&&e===92))return 57;return aQ[e]||0}var uQ=vi?256:2048,hQ=512,dQ=1024,fQ=vi?2048:256,gj=class{constructor(t){this._standardKeyboardEventBrand=!0;let e=t;this.browserEvent=e,this.target=e.target,this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,this.altGraphKey=e.getModifierState?.("AltGraph"),this.keyCode=cQ(e),this.code=e.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(t){return this._asKeybinding===t}_computeKeybinding(){let t=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(t=this.keyCode);let e=0;return this.ctrlKey&&(e|=uQ),this.altKey&&(e|=hQ),this.shiftKey&&(e|=dQ),this.metaKey&&(e|=fQ),e|=t,e}_computeKeyCodeChord(){let t=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(t=this.keyCode),new oQ(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,t)}},yj=new WeakMap;function pQ(t){if(!t.parent||t.parent===t)return null;try{let e=t.location,n=t.parent.location;if(e.origin!=="null"&&n.origin!=="null"&&e.origin!==n.origin)return null}catch{return null}return t.parent}var mQ=class{static getSameOriginWindowChain(t){let e=yj.get(t);if(!e){e=[],yj.set(t,e);let n=t,s;do s=pQ(n),s?e.push({window:new WeakRef(n),iframeElement:n.frameElement||null}):e.push({window:new WeakRef(n),iframeElement:null}),n=s;while(n)}return e.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(t,e){if(!e||t===e)return{top:0,left:0};let n=0,s=0,r=this.getSameOriginWindowChain(t);for(let i of r){let o=i.window.deref();if(n+=o?.scrollY??0,s+=o?.scrollX??0,o===e||!i.iframeElement)break;let c=i.iframeElement.getBoundingClientRect();n+=c.top,s+=c.left}return{top:n,left:s}}},Lm=class{constructor(t,e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=e.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);let n=mQ.getPositionOfChildWindowRelativeToAncestorWindow(t,e.view);this.posx-=n.left,this.posy-=n.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}},bj=class{constructor(t,e=0,n=0){this.browserEvent=t||null,this.target=t?t.target||t.targetNode||t.srcElement:null,this.deltaY=n,this.deltaX=e;let s=!1;if(fk){let r=navigator.userAgent.match(/Chrome\/(\d+)/);s=(r?parseInt(r[1]):123)<=122}if(t){let r=t,i=t,o=t.view?.devicePixelRatio||1;if(typeof r.wheelDeltaY<"u")s?this.deltaY=r.wheelDeltaY/(120*o):this.deltaY=r.wheelDeltaY/120;else if(typeof i.VERTICAL_AXIS<"u"&&i.axis===i.VERTICAL_AXIS)this.deltaY=-i.detail/3;else if(t.type==="wheel"){let c=t;c.deltaMode===c.DOM_DELTA_LINE?Vw&&!vi?this.deltaY=-t.deltaY/3:this.deltaY=-t.deltaY:this.deltaY=-t.deltaY/40}if(typeof r.wheelDeltaX<"u")QJ&&aD?this.deltaX=-(r.wheelDeltaX/120):s?this.deltaX=r.wheelDeltaX/(120*o):this.deltaX=r.wheelDeltaX/120;else if(typeof i.HORIZONTAL_AXIS<"u"&&i.axis===i.HORIZONTAL_AXIS)this.deltaX=-t.detail/3;else if(t.type==="wheel"){let c=t;c.deltaMode===c.DOM_DELTA_LINE?Vw&&!vi?this.deltaX=-t.deltaX/3:this.deltaX=-t.deltaX:this.deltaX=-t.deltaX/40}this.deltaY===0&&this.deltaX===0&&t.wheelDelta&&(s?this.deltaY=t.wheelDelta/(120*o):this.deltaY=t.wheelDelta/120)}}preventDefault(){this.browserEvent?.preventDefault()}stopPropagation(){this.browserEvent?.stopPropagation()}},cD=Object.freeze(function(t,e){let n=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(n)}}}),gQ;(t=>{function e(n){return n===t.None||n===t.Cancelled||n instanceof yQ?!0:!n||typeof n!="object"?!1:typeof n.isCancellationRequested=="boolean"&&typeof n.onCancellationRequested=="function"}t.isCancellationToken=e,t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ns.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:cD})})(gQ||={});var yQ=class{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?cD:(this._emitter||(this._emitter=new je),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},mk=class{constructor(t,e){this._isDisposed=!1,this._token=-1,typeof t=="function"&&typeof e=="number"&&this.setIfNotSet(t,e)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(t,e){if(this._isDisposed)throw new Iw("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,t()},e)}setIfNotSet(t,e){if(this._isDisposed)throw new Iw("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,t()},e))}},bQ=class{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(t,e,n=globalThis){if(this.isDisposed)throw new Iw("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();let s=n.setInterval(()=>{t()},e);this.disposable=sn(()=>{n.clearInterval(s),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}},vQ;(t=>{async function e(s){let r,i=await Promise.all(s.map(o=>o.then(c=>c,c=>{r||(r=c)})));if(typeof r<"u")throw r;return i}t.settled=e;function n(s){return new Promise(async(r,i)=>{try{await s(r,i)}catch(o){i(o)}})}t.withAsyncBody=n})(vQ||={});var vj=class Nr{static fromArray(e){return new Nr(n=>{n.emitMany(e)})}static fromPromise(e){return new Nr(async n=>{n.emitMany(await e)})}static fromPromises(e){return new Nr(async n=>{await Promise.all(e.map(async s=>n.emitOne(await s)))})}static merge(e){return new Nr(async n=>{await Promise.all(e.map(async s=>{for await(let r of s)n.emitOne(r)}))})}constructor(e,n){this._state=0,this._results=[],this._error=null,this._onReturn=n,this._onStateChanged=new je,queueMicrotask(async()=>{let s={emitOne:r=>this.emitOne(r),emitMany:r=>this.emitMany(r),reject:r=>this.reject(r)};try{await Promise.resolve(e(s)),this.resolve()}catch(r){this.reject(r)}finally{s.emitOne=void 0,s.emitMany=void 0,s.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await ns.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>(this._onReturn?.(),{done:!0,value:void 0})}}static map(e,n){return new Nr(async s=>{for await(let r of e)s.emitOne(n(r))})}map(e){return Nr.map(this,e)}static filter(e,n){return new Nr(async s=>{for await(let r of e)n(r)&&s.emitOne(r)})}filter(e){return Nr.filter(this,e)}static coalesce(e){return Nr.filter(e,n=>!!n)}coalesce(){return Nr.coalesce(this)}static async toPromise(e){let n=[];for await(let s of e)n.push(s);return n}toPromise(){return Nr.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};vj.EMPTY=vj.fromArray([]);var{getWindow:gi,getWindowId:xQ,onDidRegisterWindow:_Q}=(function(){let t=new Map,e={window:ea,disposables:new oo};t.set(ea.vscodeWindowId,e);let n=new je,s=new je,r=new je;function i(o,c){return(typeof o=="number"?t.get(o):void 0)??(c?e:void 0)}return{onDidRegisterWindow:n.event,onWillUnregisterWindow:r.event,onDidUnregisterWindow:s.event,registerWindow(o){if(t.has(o.vscodeWindowId))return xt.None;let c=new oo,d={window:o,disposables:c.add(new oo)};return t.set(o.vscodeWindowId,d),c.add(sn(()=>{t.delete(o.vscodeWindowId),s.fire(o)})),c.add(ot(o,Un.BEFORE_UNLOAD,()=>{r.fire(o)})),n.fire(d),c},getWindows(){return t.values()},getWindowsCount(){return t.size},getWindowId(o){return o.vscodeWindowId},hasWindow(o){return t.has(o)},getWindowById:i,getWindow(o){let c=o;if(c?.ownerDocument?.defaultView)return c.ownerDocument.defaultView.window;let d=o;return d?.view?d.view.window:ea},getDocument(o){return gi(o).document}}})(),wQ=class{constructor(t,e,n,s){this._node=t,this._type=e,this._handler=n,this._options=s||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}};function ot(t,e,n,s){return new wQ(t,e,n,s)}var xj=function(t,e,n,s){return ot(t,e,n,s)},gk,SQ=class extends bQ{constructor(t){super(),this.defaultTarget=t&&gi(t)}cancelAndSet(t,e,n){return super.cancelAndSet(t,e,n??this.defaultTarget)}},_j=class{constructor(t,e=0){this._runner=t,this.priority=e,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(t){c0(t)}}static sort(t,e){return e.priority-t.priority}};(function(){let t=new Map,e=new Map,n=new Map,s=new Map,r=i=>{n.set(i,!1);let o=t.get(i)??[];for(e.set(i,o),t.set(i,[]),s.set(i,!0);o.length>0;)o.sort(_j.sort),o.shift().execute();s.set(i,!1)};gk=(i,o,c=0)=>{let d=xQ(i),h=new _j(o,c),g=t.get(d);return g||(g=[],t.set(d,g)),g.push(h),n.get(d)||(n.set(d,!0),i.requestAnimationFrame(()=>r(d))),h}})();function kQ(t){let e=t.getBoundingClientRect(),n=gi(t);return{left:e.left+n.scrollX,top:e.top+n.scrollY,width:e.width,height:e.height}}var Un={CLICK:"click",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",KEY_DOWN:"keydown",KEY_UP:"keyup",BEFORE_UNLOAD:"beforeunload",CHANGE:"change",FOCUS:"focus",BLUR:"blur",INPUT:"input"},CQ=class{constructor(t){this.domNode=t,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingTop="",this._paddingLeft="",this._paddingBottom="",this._paddingRight="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(t){let e=$s(t);this._maxWidth!==e&&(this._maxWidth=e,this.domNode.style.maxWidth=this._maxWidth)}setWidth(t){let e=$s(t);this._width!==e&&(this._width=e,this.domNode.style.width=this._width)}setHeight(t){let e=$s(t);this._height!==e&&(this._height=e,this.domNode.style.height=this._height)}setTop(t){let e=$s(t);this._top!==e&&(this._top=e,this.domNode.style.top=this._top)}setLeft(t){let e=$s(t);this._left!==e&&(this._left=e,this.domNode.style.left=this._left)}setBottom(t){let e=$s(t);this._bottom!==e&&(this._bottom=e,this.domNode.style.bottom=this._bottom)}setRight(t){let e=$s(t);this._right!==e&&(this._right=e,this.domNode.style.right=this._right)}setPaddingTop(t){let e=$s(t);this._paddingTop!==e&&(this._paddingTop=e,this.domNode.style.paddingTop=this._paddingTop)}setPaddingLeft(t){let e=$s(t);this._paddingLeft!==e&&(this._paddingLeft=e,this.domNode.style.paddingLeft=this._paddingLeft)}setPaddingBottom(t){let e=$s(t);this._paddingBottom!==e&&(this._paddingBottom=e,this.domNode.style.paddingBottom=this._paddingBottom)}setPaddingRight(t){let e=$s(t);this._paddingRight!==e&&(this._paddingRight=e,this.domNode.style.paddingRight=this._paddingRight)}setFontFamily(t){this._fontFamily!==t&&(this._fontFamily=t,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(t){let e=$s(t);this._fontSize!==e&&(this._fontSize=e,this.domNode.style.fontSize=this._fontSize)}setFontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(t){this._fontFeatureSettings!==t&&(this._fontFeatureSettings=t,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(t){this._fontVariationSettings!==t&&(this._fontVariationSettings=t,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(t){this._textDecoration!==t&&(this._textDecoration=t,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(t){let e=$s(t);this._lineHeight!==e&&(this._lineHeight=e,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(t){let e=$s(t);this._letterSpacing!==e&&(this._letterSpacing=e,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(t){this._className!==t&&(this._className=t,this.domNode.className=this._className)}toggleClassName(t,e){this.domNode.classList.toggle(t,e),this._className=this.domNode.className}setDisplay(t){this._display!==t&&(this._display=t,this.domNode.style.display=this._display)}setPosition(t){this._position!==t&&(this._position=t,this.domNode.style.position=this._position)}setVisibility(t){this._visibility!==t&&(this._visibility=t,this.domNode.style.visibility=this._visibility)}setColor(t){this._color!==t&&(this._color=t,this.domNode.style.color=this._color)}setBackgroundColor(t){this._backgroundColor!==t&&(this._backgroundColor=t,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(t){this._layerHint!==t&&(this._layerHint=t,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(t){this._boxShadow!==t&&(this._boxShadow=t,this.domNode.style.boxShadow=t)}setContain(t){this._contain!==t&&(this._contain=t,this.domNode.style.contain=this._contain)}setAttribute(t,e){this.domNode.setAttribute(t,e)}removeAttribute(t){this.domNode.removeAttribute(t)}appendChild(t){this.domNode.appendChild(t.domNode)}removeChild(t){this.domNode.removeChild(t.domNode)}};function $s(t){return typeof t=="number"?`${t}px`:t}function Vd(t){return new CQ(t)}var uD=class{constructor(){this._hooks=new oo,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(t,e){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let n=this._onStopCallback;this._onStopCallback=null,t&&n&&n(e)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(t,e,n,s,r){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=s,this._onStopCallback=r;let i=t;try{t.setPointerCapture(e),this._hooks.add(sn(()=>{try{t.releasePointerCapture(e)}catch{}}))}catch{i=gi(t)}this._hooks.add(ot(i,Un.POINTER_MOVE,o=>{if(o.buttons!==n){this.stopMonitoring(!0);return}o.preventDefault(),this._pointerMoveCallback(o)})),this._hooks.add(ot(i,Un.POINTER_UP,o=>this.stopMonitoring(!0)))}};function NQ(t,e,n){let s=null,r=null;if(typeof n.value=="function"?(s="value",r=n.value,r.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof n.get=="function"&&(s="get",r=n.get),!r)throw new Error("not supported");let i=`$memoize$${e}`;n[s]=function(...o){return this.hasOwnProperty(i)||Object.defineProperty(this,i,{configurable:!1,enumerable:!1,writable:!1,value:r.apply(this,o)}),this[i]}}var hi;(t=>(t.Tap="-xterm-gesturetap",t.Change="-xterm-gesturechange",t.Start="-xterm-gesturestart",t.End="-xterm-gesturesend",t.Contextmenu="-xterm-gesturecontextmenu"))(hi||={});var xd=class us extends xt{constructor(){super(),this.dispatched=!1,this.targets=new hj,this.ignoreTargets=new hj,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(ns.runAndSubscribe(_Q,({window:e,disposables:n})=>{n.add(ot(e.document,"touchstart",s=>this.onTouchStart(s),{passive:!1})),n.add(ot(e.document,"touchend",s=>this.onTouchEnd(e,s))),n.add(ot(e.document,"touchmove",s=>this.onTouchMove(s),{passive:!1}))},{window:ea,disposables:this._store}))}static addTarget(e){if(!us.isTouchDevice())return xt.None;us.INSTANCE||(us.INSTANCE=new us);let n=us.INSTANCE.targets.push(e);return sn(n)}static ignoreTarget(e){if(!us.isTouchDevice())return xt.None;us.INSTANCE||(us.INSTANCE=new us);let n=us.INSTANCE.ignoreTargets.push(e);return sn(n)}static isTouchDevice(){return"ontouchstart"in ea||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){let n=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let s=0,r=e.targetTouches.length;s<r;s++){let i=e.targetTouches.item(s);this.activeTouches[i.identifier]={id:i.identifier,initialTarget:i.target,initialTimeStamp:n,initialPageX:i.pageX,initialPageY:i.pageY,rollingTimestamps:[n],rollingPageX:[i.pageX],rollingPageY:[i.pageY]};let o=this.newGestureEvent(hi.Start,i.target);o.pageX=i.pageX,o.pageY=i.pageY,this.dispatchEvent(o)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e,n){let s=Date.now(),r=Object.keys(this.activeTouches).length;for(let i=0,o=n.changedTouches.length;i<o;i++){let c=n.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(c.identifier))){console.warn("move of an UNKNOWN touch",c);continue}let d=this.activeTouches[c.identifier],h=Date.now()-d.initialTimeStamp;if(h<us.HOLD_DELAY&&Math.abs(d.initialPageX-er(d.rollingPageX))<30&&Math.abs(d.initialPageY-er(d.rollingPageY))<30){let g=this.newGestureEvent(hi.Tap,d.initialTarget);g.pageX=er(d.rollingPageX),g.pageY=er(d.rollingPageY),this.dispatchEvent(g)}else if(h>=us.HOLD_DELAY&&Math.abs(d.initialPageX-er(d.rollingPageX))<30&&Math.abs(d.initialPageY-er(d.rollingPageY))<30){let g=this.newGestureEvent(hi.Contextmenu,d.initialTarget);g.pageX=er(d.rollingPageX),g.pageY=er(d.rollingPageY),this.dispatchEvent(g)}else if(r===1){let g=er(d.rollingPageX),m=er(d.rollingPageY),b=er(d.rollingTimestamps)-d.rollingTimestamps[0],y=g-d.rollingPageX[0],w=m-d.rollingPageY[0],x=[...this.targets].filter(S=>d.initialTarget instanceof Node&&S.contains(d.initialTarget));this.inertia(e,x,s,Math.abs(y)/b,y>0?1:-1,g,Math.abs(w)/b,w>0?1:-1,m)}this.dispatchEvent(this.newGestureEvent(hi.End,d.initialTarget)),delete this.activeTouches[c.identifier]}this.dispatched&&(n.preventDefault(),n.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,n){let s=document.createEvent("CustomEvent");return s.initEvent(e,!1,!0),s.initialTarget=n,s.tapCount=0,s}dispatchEvent(e){if(e.type===hi.Tap){let n=new Date().getTime(),s=0;n-this._lastSetTapCountTime>us.CLEAR_TAP_COUNT_TIME?s=1:s=2,this._lastSetTapCountTime=n,e.tapCount=s}else(e.type===hi.Change||e.type===hi.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(let s of this.ignoreTargets)if(s.contains(e.initialTarget))return;let n=[];for(let s of this.targets)if(s.contains(e.initialTarget)){let r=0,i=e.initialTarget;for(;i&&i!==s;)r++,i=i.parentElement;n.push([r,s])}n.sort((s,r)=>s[0]-r[0]);for(let[s,r]of n)r.dispatchEvent(e),this.dispatched=!0}}inertia(e,n,s,r,i,o,c,d,h){this.handle=gk(e,()=>{let g=Date.now(),m=g-s,b=0,y=0,w=!0;r+=us.SCROLL_FRICTION*m,c+=us.SCROLL_FRICTION*m,r>0&&(w=!1,b=i*r*m),c>0&&(w=!1,y=d*c*m);let x=this.newGestureEvent(hi.Change);x.translationX=b,x.translationY=y,n.forEach(S=>S.dispatchEvent(x)),w||this.inertia(e,n,g,r,i,o+b,c,d,h+y)})}onTouchMove(e){let n=Date.now();for(let s=0,r=e.changedTouches.length;s<r;s++){let i=e.changedTouches.item(s);if(!this.activeTouches.hasOwnProperty(String(i.identifier))){console.warn("end of an UNKNOWN touch",i);continue}let o=this.activeTouches[i.identifier],c=this.newGestureEvent(hi.Change,o.initialTarget);c.translationX=i.pageX-er(o.rollingPageX),c.translationY=i.pageY-er(o.rollingPageY),c.pageX=i.pageX,c.pageY=i.pageY,this.dispatchEvent(c),o.rollingPageX.length>3&&(o.rollingPageX.shift(),o.rollingPageY.shift(),o.rollingTimestamps.shift()),o.rollingPageX.push(i.pageX),o.rollingPageY.push(i.pageY),o.rollingTimestamps.push(n)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}};xd.SCROLL_FRICTION=-.005,xd.HOLD_DELAY=700,xd.CLEAR_TAP_COUNT_TIME=400,fn([NQ],xd,"isTouchDevice",1);var AQ=xd,yk=class extends xt{onclick(t,e){this._register(ot(t,Un.CLICK,n=>e(new Lm(gi(t),n))))}onmousedown(t,e){this._register(ot(t,Un.MOUSE_DOWN,n=>e(new Lm(gi(t),n))))}onmouseover(t,e){this._register(ot(t,Un.MOUSE_OVER,n=>e(new Lm(gi(t),n))))}onmouseleave(t,e){this._register(ot(t,Un.MOUSE_LEAVE,n=>e(new Lm(gi(t),n))))}onkeydown(t,e){this._register(ot(t,Un.KEY_DOWN,n=>e(new gj(n))))}onkeyup(t,e){this._register(ot(t,Un.KEY_UP,n=>e(new gj(n))))}oninput(t,e){this._register(ot(t,Un.INPUT,e))}onblur(t,e){this._register(ot(t,Un.BLUR,e))}onfocus(t,e){this._register(ot(t,Un.FOCUS,e))}onchange(t,e){this._register(ot(t,Un.CHANGE,e))}ignoreGesture(t){return AQ.ignoreTarget(t)}},wj=11,EQ=class extends yk{constructor(t){super(),this._onActivate=t.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=t.bgWidth+"px",this.bgDomNode.style.height=t.bgHeight+"px",typeof t.top<"u"&&(this.bgDomNode.style.top="0px"),typeof t.left<"u"&&(this.bgDomNode.style.left="0px"),typeof t.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof t.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=t.className,this.domNode.style.position="absolute",this.domNode.style.width=wj+"px",this.domNode.style.height=wj+"px",typeof t.top<"u"&&(this.domNode.style.top=t.top+"px"),typeof t.left<"u"&&(this.domNode.style.left=t.left+"px"),typeof t.bottom<"u"&&(this.domNode.style.bottom=t.bottom+"px"),typeof t.right<"u"&&(this.domNode.style.right=t.right+"px"),this._pointerMoveMonitor=this._register(new uD),this._register(xj(this.bgDomNode,Un.POINTER_DOWN,e=>this._arrowPointerDown(e))),this._register(xj(this.domNode,Un.POINTER_DOWN,e=>this._arrowPointerDown(e))),this._pointerdownRepeatTimer=this._register(new SQ),this._pointerdownScheduleRepeatTimer=this._register(new mk)}_arrowPointerDown(t){if(!t.target||!(t.target instanceof Element))return;let e=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,gi(t))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(e,200),this._pointerMoveMonitor.startMonitoring(t.target,t.pointerId,t.buttons,n=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),t.preventDefault()}},jQ=class Kw{constructor(e,n,s,r,i,o,c){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(n=n|0,s=s|0,r=r|0,i=i|0,o=o|0,c=c|0),this.rawScrollLeft=r,this.rawScrollTop=c,n<0&&(n=0),r+n>s&&(r=s-n),r<0&&(r=0),i<0&&(i=0),c+i>o&&(c=o-i),c<0&&(c=0),this.width=n,this.scrollWidth=s,this.scrollLeft=r,this.height=i,this.scrollHeight=o,this.scrollTop=c}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,n){return new Kw(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,n?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,n?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new Kw(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,n){let s=this.width!==e.width,r=this.scrollWidth!==e.scrollWidth,i=this.scrollLeft!==e.scrollLeft,o=this.height!==e.height,c=this.scrollHeight!==e.scrollHeight,d=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:n,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:s,scrollWidthChanged:r,scrollLeftChanged:i,heightChanged:o,scrollHeightChanged:c,scrollTopChanged:d}}},TQ=class extends xt{constructor(t){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new je),this.onScroll=this._onScroll.event,this._smoothScrollDuration=t.smoothScrollDuration,this._scheduleAtNextAnimationFrame=t.scheduleAtNextAnimationFrame,this._state=new jQ(t.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(t){this._smoothScrollDuration=t}validateScrollPosition(t){return this._state.withScrollPosition(t)}getScrollDimensions(){return this._state}setScrollDimensions(t,e){let n=this._state.withScrollDimensions(t,e);this._setState(n,!!this._smoothScrolling),this._smoothScrolling?.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(t){let e=this._state.withScrollPosition(t);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(e,!1)}setScrollPositionSmooth(t,e){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(t);if(this._smoothScrolling){t={scrollLeft:typeof t.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:t.scrollLeft,scrollTop:typeof t.scrollTop>"u"?this._smoothScrolling.to.scrollTop:t.scrollTop};let n=this._state.withScrollPosition(t);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let s;e?s=new kj(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):s=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=s}else{let n=this._state.withScrollPosition(t);this._smoothScrolling=kj.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;let t=this._smoothScrolling.tick(),e=this._state.withScrollPosition(t);if(this._setState(e,!0),!!this._smoothScrolling){if(t.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(t,e){let n=this._state;n.equals(t)||(this._state=t,this._onScroll.fire(this._state.createScrollEvent(n,e)))}},Sj=class{constructor(t,e,n){this.scrollLeft=t,this.scrollTop=e,this.isDone=n}};function yx(t,e){let n=e-t;return function(s){return t+n*MQ(s)}}function RQ(t,e,n){return function(s){return s<n?t(s/n):e((s-n)/(1-n))}}var kj=class Ww{constructor(e,n,s,r){this.from=e,this.to=n,this.duration=r,this.startTime=s,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,n,s){if(Math.abs(e-n)>2.5*s){let r,i;return e<n?(r=e+.75*s,i=n-.75*s):(r=e-.75*s,i=n+.75*s),RQ(yx(e,r),yx(i,n),.33)}return yx(e,n)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){let n=(e-this.startTime)/this.duration;if(n<1){let s=this.scrollLeft(n),r=this.scrollTop(n);return new Sj(s,r,!1)}return new Sj(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,n,s){return Ww.start(e,n,s)}static start(e,n,s){s=s+10;let r=Date.now()-10;return new Ww(e,n,r,s)}};function OQ(t){return Math.pow(t,3)}function MQ(t){return 1-OQ(1-t)}var BQ=class extends xt{constructor(t,e,n){super(),this._visibility=t,this._visibleClassName=e,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new mk)}setVisibility(t){this._visibility!==t&&(this._visibility=t,this._updateShouldBeVisible())}setShouldBeVisible(t){this._rawShouldBeVisible=t,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){let t=this._applyVisibilitySetting();this._shouldBeVisible!==t&&(this._shouldBeVisible=t,this.ensureVisibility())}setIsNeeded(t){this._isNeeded!==t&&(this._isNeeded=t,this.ensureVisibility())}setDomNode(t){this._domNode=t,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode?.setClassName(this._visibleClassName)},0))}_hide(t){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode?.setClassName(this._invisibleClassName+(t?" fade":"")))}},DQ=140,hD=class extends yk{constructor(t){super(),this._lazyRender=t.lazyRender,this._host=t.host,this._scrollable=t.scrollable,this._scrollByPage=t.scrollByPage,this._scrollbarState=t.scrollbarState,this._visibilityController=this._register(new BQ(t.visibility,"visible scrollbar "+t.extraScrollbarClassName,"invisible scrollbar "+t.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new uD),this._shouldRender=!0,this.domNode=Vd(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(ot(this.domNode.domNode,Un.POINTER_DOWN,e=>this._domNodePointerDown(e)))}_createArrow(t){let e=this._register(new EQ(t));this.domNode.domNode.appendChild(e.bgDomNode),this.domNode.domNode.appendChild(e.domNode)}_createSlider(t,e,n,s){this.slider=Vd(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(t),this.slider.setLeft(e),typeof n=="number"&&this.slider.setWidth(n),typeof s=="number"&&this.slider.setHeight(s),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(ot(this.slider.domNode,Un.POINTER_DOWN,r=>{r.button===0&&(r.preventDefault(),this._sliderPointerDown(r))})),this.onclick(this.slider.domNode,r=>{r.leftButton&&r.stopPropagation()})}_onElementSize(t){return this._scrollbarState.setVisibleSize(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(t){return this._scrollbarState.setScrollSize(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(t){return this._scrollbarState.setScrollPosition(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(t){t.target===this.domNode.domNode&&this._onPointerDown(t)}delegatePointerDown(t){let e=this.domNode.domNode.getClientRects()[0].top,n=e+this._scrollbarState.getSliderPosition(),s=e+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),r=this._sliderPointerPosition(t);n<=r&&r<=s?t.button===0&&(t.preventDefault(),this._sliderPointerDown(t)):this._onPointerDown(t)}_onPointerDown(t){let e,n;if(t.target===this.domNode.domNode&&typeof t.offsetX=="number"&&typeof t.offsetY=="number")e=t.offsetX,n=t.offsetY;else{let r=kQ(this.domNode.domNode);e=t.pageX-r.left,n=t.pageY-r.top}let s=this._pointerDownRelativePosition(e,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(s):this._scrollbarState.getDesiredScrollPositionFromOffset(s)),t.button===0&&(t.preventDefault(),this._sliderPointerDown(t))}_sliderPointerDown(t){if(!t.target||!(t.target instanceof Element))return;let e=this._sliderPointerPosition(t),n=this._sliderOrthogonalPointerPosition(t),s=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(t.target,t.pointerId,t.buttons,r=>{let i=this._sliderOrthogonalPointerPosition(r),o=Math.abs(i-n);if(aD&&o>DQ){this._setDesiredScrollPositionNow(s.getScrollPosition());return}let c=this._sliderPointerPosition(r)-e;this._setDesiredScrollPositionNow(s.getDesiredScrollPositionFromDelta(c))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(t){let e={};this.writeScrollPosition(e,t),this._scrollable.setScrollPositionNow(e)}updateScrollbarSize(t){this._updateScrollbarSize(t),this._scrollbarState.setScrollbarSize(t),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}},dD=class Gw{constructor(e,n,s,r,i,o){this._scrollbarSize=Math.round(n),this._oppositeScrollbarSize=Math.round(s),this._arrowSize=Math.round(e),this._visibleSize=r,this._scrollSize=i,this._scrollPosition=o,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new Gw(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){let n=Math.round(e);return this._visibleSize!==n?(this._visibleSize=n,this._refreshComputedValues(),!0):!1}setScrollSize(e){let n=Math.round(e);return this._scrollSize!==n?(this._scrollSize=n,this._refreshComputedValues(),!0):!1}setScrollPosition(e){let n=Math.round(e);return this._scrollPosition!==n?(this._scrollPosition=n,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,n,s,r,i){let o=Math.max(0,s-e),c=Math.max(0,o-2*n),d=r>0&&r>s;if(!d)return{computedAvailableSize:Math.round(o),computedIsNeeded:d,computedSliderSize:Math.round(c),computedSliderRatio:0,computedSliderPosition:0};let h=Math.round(Math.max(20,Math.floor(s*c/r))),g=(c-h)/(r-s),m=i*g;return{computedAvailableSize:Math.round(o),computedIsNeeded:d,computedSliderSize:Math.round(h),computedSliderRatio:g,computedSliderPosition:Math.round(m)}}_refreshComputedValues(){let e=Gw._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;let n=e-this._arrowSize-this._computedSliderSize/2;return Math.round(n/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;let n=e-this._arrowSize,s=this._scrollPosition;return n<this._computedSliderPosition?s-=this._visibleSize:s+=this._visibleSize,s}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;let n=this._computedSliderPosition+e;return Math.round(n/this._computedSliderRatio)}},LQ=class extends hD{constructor(t,e,n){let s=t.getScrollDimensions(),r=t.getCurrentScrollPosition();if(super({lazyRender:e.lazyRender,host:n,scrollbarState:new dD(e.horizontalHasArrows?e.arrowSize:0,e.horizontal===2?0:e.horizontalScrollbarSize,e.vertical===2?0:e.verticalScrollbarSize,s.width,s.scrollWidth,r.scrollLeft),visibility:e.horizontal,extraScrollbarClassName:"horizontal",scrollable:t,scrollByPage:e.scrollByPage}),e.horizontalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(Math.floor((e.horizontalScrollbarSize-e.horizontalSliderSize)/2),0,void 0,e.horizontalSliderSize)}_updateSlider(t,e){this.slider.setWidth(t),this.slider.setLeft(e)}_renderDomNode(t,e){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(t){return this._shouldRender=this._onElementScrollSize(t.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(t.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(t.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(t,e){return t}_sliderPointerPosition(t){return t.pageX}_sliderOrthogonalPointerPosition(t){return t.pageY}_updateScrollbarSize(t){this.slider.setHeight(t)}writeScrollPosition(t,e){t.scrollLeft=e}updateOptions(t){this.updateScrollbarSize(t.horizontal===2?0:t.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(t.vertical===2?0:t.verticalScrollbarSize),this._visibilityController.setVisibility(t.horizontal),this._scrollByPage=t.scrollByPage}},IQ=class extends hD{constructor(t,e,n){let s=t.getScrollDimensions(),r=t.getCurrentScrollPosition();if(super({lazyRender:e.lazyRender,host:n,scrollbarState:new dD(e.verticalHasArrows?e.arrowSize:0,e.vertical===2?0:e.verticalScrollbarSize,0,s.height,s.scrollHeight,r.scrollTop),visibility:e.vertical,extraScrollbarClassName:"vertical",scrollable:t,scrollByPage:e.scrollByPage}),e.verticalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(0,Math.floor((e.verticalScrollbarSize-e.verticalSliderSize)/2),e.verticalSliderSize,void 0)}_updateSlider(t,e){this.slider.setHeight(t),this.slider.setTop(e)}_renderDomNode(t,e){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(t){return this._shouldRender=this._onElementScrollSize(t.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(t.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(t.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(t,e){return e}_sliderPointerPosition(t){return t.pageY}_sliderOrthogonalPointerPosition(t){return t.pageX}_updateScrollbarSize(t){this.slider.setWidth(t)}writeScrollPosition(t,e){t.scrollTop=e}updateOptions(t){this.updateScrollbarSize(t.vertical===2?0:t.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(t.vertical),this._scrollByPage=t.scrollByPage}},PQ=500,Cj=50,$Q=class{constructor(t,e,n){this.timestamp=t,this.deltaX=e,this.deltaY=n,this.score=0}},Yw=class{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,n=0,s=1,r=this._rear;do{let i=r===this._front?e:Math.pow(2,-s);if(e-=i,n+=this._memory[r].score*i,r===this._front)break;r=(this._capacity+r-1)%this._capacity,s++}while(!0);return n<=.5}acceptStandardWheelEvent(e){if(fk){let n=gi(e.browserEvent),s=XJ(n);this.accept(Date.now(),e.deltaX*s,e.deltaY*s)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,n,s){let r=null,i=new $Q(e,n,s);this._front===-1&&this._rear===-1?(this._memory[0]=i,this._front=0,this._rear=0):(r=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=i),i.score=this._computeScore(i,r)}_computeScore(e,n){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let s=.5;if((!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(s+=.25),n){let r=Math.abs(e.deltaX),i=Math.abs(e.deltaY),o=Math.abs(n.deltaX),c=Math.abs(n.deltaY),d=Math.max(Math.min(r,o),1),h=Math.max(Math.min(i,c),1),g=Math.max(r,o),m=Math.max(i,c);g%d===0&&m%h===0&&(s-=.5)}return Math.min(Math.max(s,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}};Yw.INSTANCE=new Yw;var zQ=Yw,HQ=class extends yk{constructor(t,e,n){super(),this._onScroll=this._register(new je),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new je),this.onWillScroll=this._onWillScroll.event,this._options=VQ(e),this._scrollable=n,this._register(this._scrollable.onScroll(r=>{this._onWillScroll.fire(r),this._onDidScroll(r),this._onScroll.fire(r)}));let s={onMouseWheel:r=>this._onMouseWheel(r),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new IQ(this._scrollable,this._options,s)),this._horizontalScrollbar=this._register(new LQ(this._scrollable,this._options,s)),this._domNode=document.createElement("div"),this._domNode.className="xterm-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.appendChild(t),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=Vd(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=Vd(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=Vd(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,r=>this._onMouseOver(r)),this.onmouseleave(this._listenOnDomNode,r=>this._onMouseLeave(r)),this._hideTimeout=this._register(new mk),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}get options(){return this._options}dispose(){this._mouseWheelToDispose=bl(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(t){this._verticalScrollbar.delegatePointerDown(t)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(t){this._scrollable.setScrollDimensions(t,!1)}updateClassName(t){this._options.className=t,vi&&(this._options.className+=" mac"),this._domNode.className="xterm-scrollable-element "+this._options.className}updateOptions(t){typeof t.handleMouseWheel<"u"&&(this._options.handleMouseWheel=t.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof t.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=t.mouseWheelScrollSensitivity),typeof t.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=t.fastScrollSensitivity),typeof t.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=t.scrollPredominantAxis),typeof t.horizontal<"u"&&(this._options.horizontal=t.horizontal),typeof t.vertical<"u"&&(this._options.vertical=t.vertical),typeof t.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=t.horizontalScrollbarSize),typeof t.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=t.verticalScrollbarSize),typeof t.scrollByPage<"u"&&(this._options.scrollByPage=t.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}setRevealOnScroll(t){this._revealOnScroll=t}delegateScrollFromMouseWheelEvent(t){this._onMouseWheel(new bj(t))}_setListeningToMouseWheel(t){if(this._mouseWheelToDispose.length>0!==t&&(this._mouseWheelToDispose=bl(this._mouseWheelToDispose),t)){let e=n=>{this._onMouseWheel(new bj(n))};this._mouseWheelToDispose.push(ot(this._listenOnDomNode,Un.MOUSE_WHEEL,e,{passive:!1}))}}_onMouseWheel(t){if(t.browserEvent?.defaultPrevented)return;let e=zQ.INSTANCE;e.acceptStandardWheelEvent(t);let n=!1;if(t.deltaY||t.deltaX){let r=t.deltaY*this._options.mouseWheelScrollSensitivity,i=t.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&i+r===0?i=r=0:Math.abs(r)>=Math.abs(i)?i=0:r=0),this._options.flipAxes&&([r,i]=[i,r]);let o=!vi&&t.browserEvent&&t.browserEvent.shiftKey;(this._options.scrollYToX||o)&&!i&&(i=r,r=0),t.browserEvent&&t.browserEvent.altKey&&(i=i*this._options.fastScrollSensitivity,r=r*this._options.fastScrollSensitivity);let c=this._scrollable.getFutureScrollPosition(),d={};if(r){let h=Cj*r,g=c.scrollTop-(h<0?Math.floor(h):Math.ceil(h));this._verticalScrollbar.writeScrollPosition(d,g)}if(i){let h=Cj*i,g=c.scrollLeft-(h<0?Math.floor(h):Math.ceil(h));this._horizontalScrollbar.writeScrollPosition(d,g)}d=this._scrollable.validateScrollPosition(d),(c.scrollLeft!==d.scrollLeft||c.scrollTop!==d.scrollTop)&&(this._options.mouseWheelSmoothScroll&&e.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(d):this._scrollable.setScrollPositionNow(d),n=!0)}let s=n;!s&&this._options.alwaysConsumeMouseWheel&&(s=!0),!s&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(s=!0),s&&(t.preventDefault(),t.stopPropagation())}_onDidScroll(t){this._shouldRender=this._horizontalScrollbar.onDidScroll(t)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(t)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let t=this._scrollable.getCurrentScrollPosition(),e=t.scrollTop>0,n=t.scrollLeft>0,s=n?" left":"",r=e?" top":"",i=n||e?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${s}`),this._topShadowDomNode.setClassName(`shadow${r}`),this._topLeftShadowDomNode.setClassName(`shadow${i}${r}${s}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(t){this._mouseIsOver=!1,this._hide()}_onMouseOver(t){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),PQ)}},UQ=class extends HQ{constructor(t,e,n){super(t,e,n)}setScrollPosition(t){t.reuseAnimation?this._scrollable.setScrollPositionSmooth(t,t.reuseAnimation):this._scrollable.setScrollPositionNow(t)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}};function VQ(t){let e={lazyRender:typeof t.lazyRender<"u"?t.lazyRender:!1,className:typeof t.className<"u"?t.className:"",useShadows:typeof t.useShadows<"u"?t.useShadows:!0,handleMouseWheel:typeof t.handleMouseWheel<"u"?t.handleMouseWheel:!0,flipAxes:typeof t.flipAxes<"u"?t.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof t.consumeMouseWheelIfScrollbarIsNeeded<"u"?t.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof t.alwaysConsumeMouseWheel<"u"?t.alwaysConsumeMouseWheel:!1,scrollYToX:typeof t.scrollYToX<"u"?t.scrollYToX:!1,mouseWheelScrollSensitivity:typeof t.mouseWheelScrollSensitivity<"u"?t.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof t.fastScrollSensitivity<"u"?t.fastScrollSensitivity:5,scrollPredominantAxis:typeof t.scrollPredominantAxis<"u"?t.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof t.mouseWheelSmoothScroll<"u"?t.mouseWheelSmoothScroll:!0,arrowSize:typeof t.arrowSize<"u"?t.arrowSize:11,listenOnDomNode:typeof t.listenOnDomNode<"u"?t.listenOnDomNode:null,horizontal:typeof t.horizontal<"u"?t.horizontal:1,horizontalScrollbarSize:typeof t.horizontalScrollbarSize<"u"?t.horizontalScrollbarSize:10,horizontalSliderSize:typeof t.horizontalSliderSize<"u"?t.horizontalSliderSize:0,horizontalHasArrows:typeof t.horizontalHasArrows<"u"?t.horizontalHasArrows:!1,vertical:typeof t.vertical<"u"?t.vertical:1,verticalScrollbarSize:typeof t.verticalScrollbarSize<"u"?t.verticalScrollbarSize:10,verticalHasArrows:typeof t.verticalHasArrows<"u"?t.verticalHasArrows:!1,verticalSliderSize:typeof t.verticalSliderSize<"u"?t.verticalSliderSize:0,scrollByPage:typeof t.scrollByPage<"u"?t.scrollByPage:!1};return e.horizontalSliderSize=typeof t.horizontalSliderSize<"u"?t.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof t.verticalSliderSize<"u"?t.verticalSliderSize:e.verticalScrollbarSize,vi&&(e.className+=" mac"),e}var Xw=class extends xt{constructor(t,e,n,s,r,i,o,c){super(),this._bufferService=n,this._optionsService=o,this._renderService=c,this._onRequestScrollLines=this._register(new je),this.onRequestScrollLines=this._onRequestScrollLines.event,this._isSyncing=!1,this._isHandlingScroll=!1,this._suppressOnScrollHandler=!1;let d=this._register(new TQ({forceIntegerValues:!1,smoothScrollDuration:this._optionsService.rawOptions.smoothScrollDuration,scheduleAtNextAnimationFrame:h=>gk(s.window,h)}));this._register(this._optionsService.onSpecificOptionChange("smoothScrollDuration",()=>{d.setSmoothScrollDuration(this._optionsService.rawOptions.smoothScrollDuration)})),this._scrollableElement=this._register(new UQ(e,{vertical:1,horizontal:2,useShadows:!1,mouseWheelSmoothScroll:!0,...this._getChangeOptions()},d)),this._register(this._optionsService.onMultipleOptionChange(["scrollSensitivity","fastScrollSensitivity","overviewRuler"],()=>this._scrollableElement.updateOptions(this._getChangeOptions()))),this._register(r.onProtocolChange(h=>{this._scrollableElement.updateOptions({handleMouseWheel:!(h&16)})})),this._scrollableElement.setScrollDimensions({height:0,scrollHeight:0}),this._register(ns.runAndSubscribe(i.onChangeColors,()=>{this._scrollableElement.getDomNode().style.backgroundColor=i.colors.background.css})),t.appendChild(this._scrollableElement.getDomNode()),this._register(sn(()=>this._scrollableElement.getDomNode().remove())),this._styleElement=s.mainDocument.createElement("style"),e.appendChild(this._styleElement),this._register(sn(()=>this._styleElement.remove())),this._register(ns.runAndSubscribe(i.onChangeColors,()=>{this._styleElement.textContent=[".xterm .xterm-scrollable-element > .scrollbar > .slider {",`  background: ${i.colors.scrollbarSliderBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider:hover {",`  background: ${i.colors.scrollbarSliderHoverBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider.active {",`  background: ${i.colors.scrollbarSliderActiveBackground.css};`,"}"].join(`
`)})),this._register(this._bufferService.onResize(()=>this.queueSync())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._latestYDisp=void 0,this.queueSync()})),this._register(this._bufferService.onScroll(()=>this._sync())),this._register(this._scrollableElement.onScroll(h=>this._handleScroll(h)))}scrollLines(t){let e=this._scrollableElement.getScrollPosition();this._scrollableElement.setScrollPosition({reuseAnimation:!0,scrollTop:e.scrollTop+t*this._renderService.dimensions.css.cell.height})}scrollToLine(t,e){e&&(this._latestYDisp=t),this._scrollableElement.setScrollPosition({reuseAnimation:!e,scrollTop:t*this._renderService.dimensions.css.cell.height})}_getChangeOptions(){return{mouseWheelScrollSensitivity:this._optionsService.rawOptions.scrollSensitivity,fastScrollSensitivity:this._optionsService.rawOptions.fastScrollSensitivity,verticalScrollbarSize:this._optionsService.rawOptions.overviewRuler?.width||14}}queueSync(t){t!==void 0&&(this._latestYDisp=t),this._queuedAnimationFrame===void 0&&(this._queuedAnimationFrame=this._renderService.addRefreshCallback(()=>{this._queuedAnimationFrame=void 0,this._sync(this._latestYDisp)}))}_sync(t=this._bufferService.buffer.ydisp){!this._renderService||this._isSyncing||(this._isSyncing=!0,this._suppressOnScrollHandler=!0,this._scrollableElement.setScrollDimensions({height:this._renderService.dimensions.css.canvas.height,scrollHeight:this._renderService.dimensions.css.cell.height*this._bufferService.buffer.lines.length}),this._suppressOnScrollHandler=!1,t!==this._latestYDisp&&this._scrollableElement.setScrollPosition({scrollTop:t*this._renderService.dimensions.css.cell.height}),this._isSyncing=!1)}_handleScroll(t){if(!this._renderService||this._isHandlingScroll||this._suppressOnScrollHandler)return;this._isHandlingScroll=!0;let e=Math.round(t.scrollTop/this._renderService.dimensions.css.cell.height),n=e-this._bufferService.buffer.ydisp;n!==0&&(this._latestYDisp=e,this._onRequestScrollLines.fire(n)),this._isHandlingScroll=!1}};Xw=fn([Le(2,Es),Le(3,ya),Le(4,KB),Le(5,Ou),Le(6,js),Le(7,ba)],Xw);var Jw=class extends xt{constructor(t,e,n,s,r){super(),this._screenElement=t,this._bufferService=e,this._coreBrowserService=n,this._decorationService=s,this._renderService=r,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this._register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this._register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this._register(this._decorationService.onDecorationRemoved(i=>this._removeDecoration(i))),this._register(sn(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let t of this._decorationService.decorations)this._renderDecoration(t);this._dimensionsChanged=!1}_renderDecoration(t){this._refreshStyle(t),this._dimensionsChanged&&this._refreshXPosition(t)}_createElement(t){let e=this._coreBrowserService.mainDocument.createElement("div");e.classList.add("xterm-decoration"),e.classList.toggle("xterm-decoration-top-layer",t?.options?.layer==="top"),e.style.width=`${Math.round((t.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,e.style.height=`${(t.options.height||1)*this._renderService.dimensions.css.cell.height}px`,e.style.top=`${(t.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height}px`,e.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let n=t.options.x??0;return n&&n>this._bufferService.cols&&(e.style.display="none"),this._refreshXPosition(t,e),e}_refreshStyle(t){let e=t.marker.line-this._bufferService.buffers.active.ydisp;if(e<0||e>=this._bufferService.rows)t.element&&(t.element.style.display="none",t.onRenderEmitter.fire(t.element));else{let n=this._decorationElements.get(t);n||(n=this._createElement(t),t.element=n,this._decorationElements.set(t,n),this._container.appendChild(n),t.onDispose(()=>{this._decorationElements.delete(t),n.remove()})),n.style.display=this._altBufferIsActive?"none":"block",this._altBufferIsActive||(n.style.width=`${Math.round((t.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,n.style.height=`${(t.options.height||1)*this._renderService.dimensions.css.cell.height}px`,n.style.top=`${e*this._renderService.dimensions.css.cell.height}px`,n.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`),t.onRenderEmitter.fire(n)}}_refreshXPosition(t,e=t.element){if(!e)return;let n=t.options.x??0;(t.options.anchor||"left")==="right"?e.style.right=n?`${n*this._renderService.dimensions.css.cell.width}px`:"":e.style.left=n?`${n*this._renderService.dimensions.css.cell.width}px`:""}_removeDecoration(t){this._decorationElements.get(t)?.remove(),this._decorationElements.delete(t),t.dispose()}};Jw=fn([Le(1,Es),Le(2,ya),Le(3,Wf),Le(4,ba)],Jw);var FQ=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(t){if(t.options.overviewRulerOptions){for(let e of this._zones)if(e.color===t.options.overviewRulerOptions.color&&e.position===t.options.overviewRulerOptions.position){if(this._lineIntersectsZone(e,t.marker.line))return;if(this._lineAdjacentToZone(e,t.marker.line,t.options.overviewRulerOptions.position)){this._addLineToZone(e,t.marker.line);return}}if(this._zonePoolIndex<this._zonePool.length){this._zonePool[this._zonePoolIndex].color=t.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=t.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=t.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=t.marker.line,this._zones.push(this._zonePool[this._zonePoolIndex++]);return}this._zones.push({color:t.options.overviewRulerOptions.color,position:t.options.overviewRulerOptions.position,startBufferLine:t.marker.line,endBufferLine:t.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(t){this._linePadding=t}_lineIntersectsZone(t,e){return e>=t.startBufferLine&&e<=t.endBufferLine}_lineAdjacentToZone(t,e,n){return e>=t.startBufferLine-this._linePadding[n||"full"]&&e<=t.endBufferLine+this._linePadding[n||"full"]}_addLineToZone(t,e){t.startBufferLine=Math.min(t.startBufferLine,e),t.endBufferLine=Math.max(t.endBufferLine,e)}},ci={full:0,left:0,center:0,right:0},Wa={full:0,left:0,center:0,right:0},Ph={full:0,left:0,center:0,right:0},vg=class extends xt{constructor(t,e,n,s,r,i,o,c){super(),this._viewportElement=t,this._screenElement=e,this._bufferService=n,this._decorationService=s,this._renderService=r,this._optionsService=i,this._themeService=o,this._coreBrowserService=c,this._colorZoneStore=new FQ,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement),this._register(sn(()=>this._canvas?.remove()));let d=this._canvas.getContext("2d");if(d)this._ctx=d;else throw new Error("Ctx cannot be null");this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this._register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0))),this._register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this._register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})),this._register(this._renderService.onRender(()=>{(!this._containerHeight||this._containerHeight!==this._screenElement.clientHeight)&&(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._register(this._optionsService.onSpecificOptionChange("overviewRuler",()=>this._queueRefresh(!0))),this._register(this._themeService.onChangeColors(()=>this._queueRefresh())),this._queueRefresh(!0)}get _width(){return this._optionsService.options.overviewRuler?.width||0}_refreshDrawConstants(){let t=Math.floor((this._canvas.width-1)/3),e=Math.ceil((this._canvas.width-1)/3);Wa.full=this._canvas.width,Wa.left=t,Wa.center=e,Wa.right=t,this._refreshDrawHeightConstants(),Ph.full=1,Ph.left=1,Ph.center=1+Wa.left,Ph.right=1+Wa.left+Wa.center}_refreshDrawHeightConstants(){ci.full=Math.round(2*this._coreBrowserService.dpr);let t=this._canvas.height/this._bufferService.buffer.lines.length,e=Math.round(Math.max(Math.min(t,12),6)*this._coreBrowserService.dpr);ci.left=e,ci.center=e,ci.right=e}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*ci.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*ci.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*ci.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*ci.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let e of this._decorationService.decorations)this._colorZoneStore.addDecoration(e);this._ctx.lineWidth=1,this._renderRulerOutline();let t=this._colorZoneStore.zones;for(let e of t)e.position!=="full"&&this._renderColorZone(e);for(let e of t)e.position==="full"&&this._renderColorZone(e);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderRulerOutline(){this._ctx.fillStyle=this._themeService.colors.overviewRulerBorder.css,this._ctx.fillRect(0,0,1,this._canvas.height),this._optionsService.rawOptions.overviewRuler.showTopBorder&&this._ctx.fillRect(1,0,this._canvas.width-1,1),this._optionsService.rawOptions.overviewRuler.showBottomBorder&&this._ctx.fillRect(1,this._canvas.height-1,this._canvas.width-1,this._canvas.height)}_renderColorZone(t){this._ctx.fillStyle=t.color,this._ctx.fillRect(Ph[t.position||"full"],Math.round((this._canvas.height-1)*(t.startBufferLine/this._bufferService.buffers.active.lines.length)-ci[t.position||"full"]/2),Wa[t.position||"full"],Math.round((this._canvas.height-1)*((t.endBufferLine-t.startBufferLine)/this._bufferService.buffers.active.lines.length)+ci[t.position||"full"]))}_queueRefresh(t,e){this._shouldUpdateDimensions=t||this._shouldUpdateDimensions,this._shouldUpdateAnchor=e||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};vg=fn([Le(2,Es),Le(3,Wf),Le(4,ba),Le(5,js),Le(6,Ou),Le(7,ya)],vg);var ve;(t=>(t.NUL="\0",t.SOH="",t.STX="",t.ETX="",t.EOT="",t.ENQ="",t.ACK="",t.BEL="\x07",t.BS="\b",t.HT="	",t.LF=`
`,t.VT="\v",t.FF="\f",t.CR="\r",t.SO="",t.SI="",t.DLE="",t.DC1="",t.DC2="",t.DC3="",t.DC4="",t.NAK="",t.SYN="",t.ETB="",t.CAN="",t.EM="",t.SUB="",t.ESC="\x1B",t.FS="",t.GS="",t.RS="",t.US="",t.SP=" ",t.DEL=""))(ve||={});var d0;(t=>(t.PAD="",t.HOP="",t.BPH="",t.NBH="",t.IND="",t.NEL="",t.SSA="",t.ESA="",t.HTS="",t.HTJ="",t.VTS="",t.PLD="",t.PLU="",t.RI="",t.SS2="",t.SS3="",t.DCS="",t.PU1="",t.PU2="",t.STS="",t.CCH="",t.MW="",t.SPA="",t.EPA="",t.SOS="",t.SGCI="",t.SCI="",t.CSI="",t.ST="",t.OSC="",t.PM="",t.APC=""))(d0||={});var fD;(t=>t.ST=`${ve.ESC}\\`)(fD||={});var Qw=class{constructor(t,e,n,s,r,i){this._textarea=t,this._compositionView=e,this._bufferService=n,this._optionsService=s,this._coreService=r,this._renderService=i,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}get isComposing(){return this._isComposing}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(t){this._compositionView.textContent=t.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(t){if(this._isComposing||this._isSendingComposition){if(t.keyCode===20||t.keyCode===229||t.keyCode===16||t.keyCode===17||t.keyCode===18)return!1;this._finalizeComposition(!1)}return t.keyCode===229?(this._handleAnyTextareaChanges(),!1):!0}_finalizeComposition(t){if(this._compositionView.classList.remove("active"),this._isComposing=!1,t){let e={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){this._isSendingComposition=!1;let n;e.start+=this._dataAlreadySent.length,this._isComposing?n=this._textarea.value.substring(e.start,this._compositionPosition.start):n=this._textarea.value.substring(e.start),n.length>0&&this._coreService.triggerDataEvent(n,!0)}},0)}else{this._isSendingComposition=!1;let e=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(e,!0)}}_handleAnyTextareaChanges(){let t=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let e=this._textarea.value,n=e.replace(t,"");this._dataAlreadySent=n,e.length>t.length?this._coreService.triggerDataEvent(n,!0):e.length<t.length?this._coreService.triggerDataEvent(`${ve.DEL}`,!0):e.length===t.length&&e!==t&&this._coreService.triggerDataEvent(e,!0)}},0)}updateCompositionElements(t){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let e=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),n=this._renderService.dimensions.css.cell.height,s=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,r=e*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=r+"px",this._compositionView.style.top=s+"px",this._compositionView.style.height=n+"px",this._compositionView.style.lineHeight=n+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let i=this._compositionView.getBoundingClientRect();this._textarea.style.left=r+"px",this._textarea.style.top=s+"px",this._textarea.style.width=Math.max(i.width,1)+"px",this._textarea.style.height=Math.max(i.height,1)+"px",this._textarea.style.lineHeight=i.height+"px"}t||setTimeout(()=>this.updateCompositionElements(!0),0)}}};Qw=fn([Le(2,Es),Le(3,js),Le(4,Al),Le(5,ba)],Qw);var Vn=0,Fn=0,qn=0,dn=0,Nj={css:"#00000000",rgba:0},An;(t=>{function e(r,i,o,c){return c!==void 0?`#${Lo(r)}${Lo(i)}${Lo(o)}${Lo(c)}`:`#${Lo(r)}${Lo(i)}${Lo(o)}`}t.toCss=e;function n(r,i,o,c=255){return(r<<24|i<<16|o<<8|c)>>>0}t.toRgba=n;function s(r,i,o,c){return{css:t.toCss(r,i,o,c),rgba:t.toRgba(r,i,o,c)}}t.toColor=s})(An||={});var Qt;(t=>{function e(d,h){if(dn=(h.rgba&255)/255,dn===1)return{css:h.css,rgba:h.rgba};let g=h.rgba>>24&255,m=h.rgba>>16&255,b=h.rgba>>8&255,y=d.rgba>>24&255,w=d.rgba>>16&255,x=d.rgba>>8&255;Vn=y+Math.round((g-y)*dn),Fn=w+Math.round((m-w)*dn),qn=x+Math.round((b-x)*dn);let S=An.toCss(Vn,Fn,qn),k=An.toRgba(Vn,Fn,qn);return{css:S,rgba:k}}t.blend=e;function n(d){return(d.rgba&255)===255}t.isOpaque=n;function s(d,h,g){let m=f0.ensureContrastRatio(d.rgba,h.rgba,g);if(m)return An.toColor(m>>24&255,m>>16&255,m>>8&255)}t.ensureContrastRatio=s;function r(d){let h=(d.rgba|255)>>>0;return[Vn,Fn,qn]=f0.toChannels(h),{css:An.toCss(Vn,Fn,qn),rgba:h}}t.opaque=r;function i(d,h){return dn=Math.round(h*255),[Vn,Fn,qn]=f0.toChannels(d.rgba),{css:An.toCss(Vn,Fn,qn,dn),rgba:An.toRgba(Vn,Fn,qn,dn)}}t.opacity=i;function o(d,h){return dn=d.rgba&255,i(d,dn*h/255)}t.multiplyOpacity=o;function c(d){return[d.rgba>>24&255,d.rgba>>16&255,d.rgba>>8&255]}t.toColorRGB=c})(Qt||={});var ln;(t=>{let e,n;try{let r=document.createElement("canvas");r.width=1,r.height=1;let i=r.getContext("2d",{willReadFrequently:!0});i&&(e=i,e.globalCompositeOperation="copy",n=e.createLinearGradient(0,0,1,1))}catch{}function s(r){if(r.match(/#[\da-f]{3,8}/i))switch(r.length){case 4:return Vn=parseInt(r.slice(1,2).repeat(2),16),Fn=parseInt(r.slice(2,3).repeat(2),16),qn=parseInt(r.slice(3,4).repeat(2),16),An.toColor(Vn,Fn,qn);case 5:return Vn=parseInt(r.slice(1,2).repeat(2),16),Fn=parseInt(r.slice(2,3).repeat(2),16),qn=parseInt(r.slice(3,4).repeat(2),16),dn=parseInt(r.slice(4,5).repeat(2),16),An.toColor(Vn,Fn,qn,dn);case 7:return{css:r,rgba:(parseInt(r.slice(1),16)<<8|255)>>>0};case 9:return{css:r,rgba:parseInt(r.slice(1),16)>>>0}}let i=r.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(i)return Vn=parseInt(i[1]),Fn=parseInt(i[2]),qn=parseInt(i[3]),dn=Math.round((i[5]===void 0?1:parseFloat(i[5]))*255),An.toColor(Vn,Fn,qn,dn);if(!e||!n)throw new Error("css.toColor: Unsupported css format");if(e.fillStyle=n,e.fillStyle=r,typeof e.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(e.fillRect(0,0,1,1),[Vn,Fn,qn,dn]=e.getImageData(0,0,1,1).data,dn!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:An.toRgba(Vn,Fn,qn,dn),css:r}}t.toColor=s})(ln||={});var vs;(t=>{function e(s){return n(s>>16&255,s>>8&255,s&255)}t.relativeLuminance=e;function n(s,r,i){let o=s/255,c=r/255,d=i/255,h=o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4),g=c<=.03928?c/12.92:Math.pow((c+.055)/1.055,2.4),m=d<=.03928?d/12.92:Math.pow((d+.055)/1.055,2.4);return h*.2126+g*.7152+m*.0722}t.relativeLuminance2=n})(vs||={});var f0;(t=>{function e(o,c){if(dn=(c&255)/255,dn===1)return c;let d=c>>24&255,h=c>>16&255,g=c>>8&255,m=o>>24&255,b=o>>16&255,y=o>>8&255;return Vn=m+Math.round((d-m)*dn),Fn=b+Math.round((h-b)*dn),qn=y+Math.round((g-y)*dn),An.toRgba(Vn,Fn,qn)}t.blend=e;function n(o,c,d){let h=vs.relativeLuminance(o>>8),g=vs.relativeLuminance(c>>8);if(Gi(h,g)<d){if(g<h){let y=s(o,c,d),w=Gi(h,vs.relativeLuminance(y>>8));if(w<d){let x=r(o,c,d),S=Gi(h,vs.relativeLuminance(x>>8));return w>S?y:x}return y}let m=r(o,c,d),b=Gi(h,vs.relativeLuminance(m>>8));if(b<d){let y=s(o,c,d),w=Gi(h,vs.relativeLuminance(y>>8));return b>w?m:y}return m}}t.ensureContrastRatio=n;function s(o,c,d){let h=o>>24&255,g=o>>16&255,m=o>>8&255,b=c>>24&255,y=c>>16&255,w=c>>8&255,x=Gi(vs.relativeLuminance2(b,y,w),vs.relativeLuminance2(h,g,m));for(;x<d&&(b>0||y>0||w>0);)b-=Math.max(0,Math.ceil(b*.1)),y-=Math.max(0,Math.ceil(y*.1)),w-=Math.max(0,Math.ceil(w*.1)),x=Gi(vs.relativeLuminance2(b,y,w),vs.relativeLuminance2(h,g,m));return(b<<24|y<<16|w<<8|255)>>>0}t.reduceLuminance=s;function r(o,c,d){let h=o>>24&255,g=o>>16&255,m=o>>8&255,b=c>>24&255,y=c>>16&255,w=c>>8&255,x=Gi(vs.relativeLuminance2(b,y,w),vs.relativeLuminance2(h,g,m));for(;x<d&&(b<255||y<255||w<255);)b=Math.min(255,b+Math.ceil((255-b)*.1)),y=Math.min(255,y+Math.ceil((255-y)*.1)),w=Math.min(255,w+Math.ceil((255-w)*.1)),x=Gi(vs.relativeLuminance2(b,y,w),vs.relativeLuminance2(h,g,m));return(b<<24|y<<16|w<<8|255)>>>0}t.increaseLuminance=r;function i(o){return[o>>24&255,o>>16&255,o>>8&255,o&255]}t.toChannels=i})(f0||={});function Lo(t){let e=t.toString(16);return e.length<2?"0"+e:e}function Gi(t,e){return t<e?(e+.05)/(t+.05):(t+.05)/(e+.05)}var qQ=class extends Kf{constructor(t,e,n){super(),this.content=0,this.combinedData="",this.fg=t.fg,this.bg=t.bg,this.combinedData=e,this._width=n}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(t){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},xg=class{constructor(t){this._bufferService=t,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new Mr}register(t){let e={id:this._nextCharacterJoinerId++,handler:t};return this._characterJoiners.push(e),e.id}deregister(t){for(let e=0;e<this._characterJoiners.length;e++)if(this._characterJoiners[e].id===t)return this._characterJoiners.splice(e,1),!0;return!1}getJoinedCharacters(t){if(this._characterJoiners.length===0)return[];let e=this._bufferService.buffer.lines.get(t);if(!e||e.length===0)return[];let n=[],s=e.translateToString(!0),r=0,i=0,o=0,c=e.getFg(0),d=e.getBg(0);for(let h=0;h<e.getTrimmedLength();h++)if(e.loadCell(h,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==c||this._workCell.bg!==d){if(h-r>1){let g=this._getJoinedRanges(s,o,i,e,r);for(let m=0;m<g.length;m++)n.push(g[m])}r=h,o=i,c=this._workCell.fg,d=this._workCell.bg}i+=this._workCell.getChars().length||to.length}if(this._bufferService.cols-r>1){let h=this._getJoinedRanges(s,o,i,e,r);for(let g=0;g<h.length;g++)n.push(h[g])}return n}_getJoinedRanges(t,e,n,s,r){let i=t.substring(e,n),o=[];try{o=this._characterJoiners[0].handler(i)}catch(c){console.error(c)}for(let c=1;c<this._characterJoiners.length;c++)try{let d=this._characterJoiners[c].handler(i);for(let h=0;h<d.length;h++)xg._mergeRanges(o,d[h])}catch(d){console.error(d)}return this._stringRangesToCellRanges(o,s,r),o}_stringRangesToCellRanges(t,e,n){let s=0,r=!1,i=0,o=t[s];if(o){for(let c=n;c<this._bufferService.cols;c++){let d=e.getWidth(c),h=e.getString(c).length||to.length;if(d!==0){if(!r&&o[0]<=i&&(o[0]=c,r=!0),o[1]<=i){if(o[1]=c,o=t[++s],!o)break;o[0]<=i?(o[0]=c,r=!0):r=!1}i+=h}}o&&(o[1]=this._bufferService.cols)}}static _mergeRanges(t,e){let n=!1;for(let s=0;s<t.length;s++){let r=t[s];if(n){if(e[1]<=r[0])return t[s-1][1]=e[1],t;if(e[1]<=r[1])return t[s-1][1]=Math.max(e[1],r[1]),t.splice(s,1),t;t.splice(s,1),s--}else{if(e[1]<=r[0])return t.splice(s,0,e),t;if(e[1]<=r[1])return r[0]=Math.min(e[0],r[0]),t;e[0]<r[1]&&(r[0]=Math.min(e[0],r[0]),n=!0);continue}}return n?t[t.length-1][1]=e[1]:t.push(e),t}};xg=fn([Le(0,Es)],xg);function KQ(t){return 57508<=t&&t<=57558}function WQ(t){return 9472<=t&&t<=9631}function GQ(t){return KQ(t)||WQ(t)}function YQ(){return{css:{canvas:Im(),cell:Im()},device:{canvas:Im(),cell:Im(),char:{width:0,height:0,left:0,top:0}}}}function Im(){return{width:0,height:0}}var Zw=class{constructor(t,e,n,s,r,i,o){this._document=t,this._characterJoinerService=e,this._optionsService=n,this._coreBrowserService=s,this._coreService=r,this._decorationService=i,this._themeService=o,this._workCell=new Mr,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(t,e,n){this._selectionStart=t,this._selectionEnd=e,this._columnSelectMode=n}createRow(t,e,n,s,r,i,o,c,d,h,g){let m=[],b=this._characterJoinerService.getJoinedCharacters(e),y=this._themeService.colors,w=t.getNoBgTrimmedLength();n&&w<i+1&&(w=i+1);let x,S=0,k="",C=0,N=0,R=0,B=0,E=!1,z=0,U=!1,Y=0,D=0,W=[],V=h!==-1&&g!==-1;for(let q=0;q<w;q++){t.loadCell(q,this._workCell);let X=this._workCell.getWidth();if(X===0)continue;let I=!1,L=q>=D,J=q,G=this._workCell;if(b.length>0&&q===b[0][0]&&L){let Ue=b.shift(),bt=this._isCellInSelection(Ue[0],e);for(C=Ue[0]+1;C<Ue[1];C++)L&&=bt===this._isCellInSelection(C,e);L&&=!n||i<Ue[0]||i>=Ue[1],L?(I=!0,G=new qQ(this._workCell,t.translateToString(!0,Ue[0],Ue[1]),Ue[1]-Ue[0]),J=Ue[1]-1,X=G.getWidth()):D=Ue[1]}let P=this._isCellInSelection(q,e),T=n&&q===i,O=V&&q>=h&&q<=g,K=!1;this._decorationService.forEachDecorationAtCell(q,e,void 0,Ue=>{K=!0});let j=G.getChars()||to;if(j===" "&&(G.isUnderline()||G.isOverline())&&(j=""),Y=X*c-d.get(j,G.isBold(),G.isItalic()),!x)x=this._document.createElement("span");else if(S&&(P&&U||!P&&!U&&G.bg===N)&&(P&&U&&y.selectionForeground||G.fg===R)&&G.extended.ext===B&&O===E&&Y===z&&!T&&!I&&!K&&L){G.isInvisible()?k+=to:k+=j,S++;continue}else S&&(x.textContent=k),x=this._document.createElement("span"),S=0,k="";if(N=G.bg,R=G.fg,B=G.extended.ext,E=O,z=Y,U=P,I&&i>=q&&i<=J&&(i=q),!this._coreService.isCursorHidden&&T&&this._coreService.isCursorInitialized){if(W.push("xterm-cursor"),this._coreBrowserService.isFocused)o&&W.push("xterm-cursor-blink"),W.push(s==="bar"?"xterm-cursor-bar":s==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(r)switch(r){case"outline":W.push("xterm-cursor-outline");break;case"block":W.push("xterm-cursor-block");break;case"bar":W.push("xterm-cursor-bar");break;case"underline":W.push("xterm-cursor-underline");break}}if(G.isBold()&&W.push("xterm-bold"),G.isItalic()&&W.push("xterm-italic"),G.isDim()&&W.push("xterm-dim"),G.isInvisible()?k=to:k=G.getChars()||to,G.isUnderline()&&(W.push(`xterm-underline-${G.extended.underlineStyle}`),k===" "&&(k=""),!G.isUnderlineColorDefault()))if(G.isUnderlineColorRGB())x.style.textDecorationColor=`rgb(${Kf.toColorRGB(G.getUnderlineColor()).join(",")})`;else{let Ue=G.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&G.isBold()&&Ue<8&&(Ue+=8),x.style.textDecorationColor=y.ansi[Ue].css}G.isOverline()&&(W.push("xterm-overline"),k===" "&&(k="")),G.isStrikethrough()&&W.push("xterm-strikethrough"),O&&(x.style.textDecoration="underline");let Z=G.getFgColor(),le=G.getFgColorMode(),te=G.getBgColor(),pe=G.getBgColorMode(),_e=!!G.isInverse();if(_e){let Ue=Z;Z=te,te=Ue;let bt=le;le=pe,pe=bt}let Ce,tt,Ee=!1;this._decorationService.forEachDecorationAtCell(q,e,void 0,Ue=>{Ue.options.layer!=="top"&&Ee||(Ue.backgroundColorRGB&&(pe=50331648,te=Ue.backgroundColorRGB.rgba>>8&16777215,Ce=Ue.backgroundColorRGB),Ue.foregroundColorRGB&&(le=50331648,Z=Ue.foregroundColorRGB.rgba>>8&16777215,tt=Ue.foregroundColorRGB),Ee=Ue.options.layer==="top")}),!Ee&&P&&(Ce=this._coreBrowserService.isFocused?y.selectionBackgroundOpaque:y.selectionInactiveBackgroundOpaque,te=Ce.rgba>>8&16777215,pe=50331648,Ee=!0,y.selectionForeground&&(le=50331648,Z=y.selectionForeground.rgba>>8&16777215,tt=y.selectionForeground)),Ee&&W.push("xterm-decoration-top");let Je;switch(pe){case 16777216:case 33554432:Je=y.ansi[te],W.push(`xterm-bg-${te}`);break;case 50331648:Je=An.toColor(te>>16,te>>8&255,te&255),this._addStyle(x,`background-color:#${Aj((te>>>0).toString(16),"0",6)}`);break;default:_e?(Je=y.foreground,W.push("xterm-bg-257")):Je=y.background}switch(Ce||G.isDim()&&(Ce=Qt.multiplyOpacity(Je,.5)),le){case 16777216:case 33554432:G.isBold()&&Z<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Z+=8),this._applyMinimumContrast(x,Je,y.ansi[Z],G,Ce,void 0)||W.push(`xterm-fg-${Z}`);break;case 50331648:let Ue=An.toColor(Z>>16&255,Z>>8&255,Z&255);this._applyMinimumContrast(x,Je,Ue,G,Ce,tt)||this._addStyle(x,`color:#${Aj(Z.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(x,Je,y.foreground,G,Ce,tt)||_e&&W.push("xterm-fg-257")}W.length&&(x.className=W.join(" "),W.length=0),!T&&!I&&!K&&L?S++:x.textContent=k,Y!==this.defaultSpacing&&(x.style.letterSpacing=`${Y}px`),m.push(x),q=J}return x&&S&&(x.textContent=k),m}_applyMinimumContrast(t,e,n,s,r,i){if(this._optionsService.rawOptions.minimumContrastRatio===1||GQ(s.getCode()))return!1;let o=this._getContrastCache(s),c;if(!r&&!i&&(c=o.getColor(e.rgba,n.rgba)),c===void 0){let d=this._optionsService.rawOptions.minimumContrastRatio/(s.isDim()?2:1);c=Qt.ensureContrastRatio(r||e,i||n,d),o.setColor((r||e).rgba,(i||n).rgba,c??null)}return c?(this._addStyle(t,`color:${c.css}`),!0):!1}_getContrastCache(t){return t.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(t,e){t.setAttribute("style",`${t.getAttribute("style")||""}${e};`)}_isCellInSelection(t,e){let n=this._selectionStart,s=this._selectionEnd;return!n||!s?!1:this._columnSelectMode?n[0]<=s[0]?t>=n[0]&&e>=n[1]&&t<s[0]&&e<=s[1]:t<n[0]&&e>=n[1]&&t>=s[0]&&e<=s[1]:e>n[1]&&e<s[1]||n[1]===s[1]&&e===n[1]&&t>=n[0]&&t<s[0]||n[1]<s[1]&&e===s[1]&&t<s[0]||n[1]<s[1]&&e===n[1]&&t>=n[0]}};Zw=fn([Le(1,YB),Le(2,js),Le(3,ya),Le(4,Al),Le(5,Wf),Le(6,Ou)],Zw);function Aj(t,e,n){for(;t.length<n;)t=e+t;return t}var XQ=class{constructor(t,e){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=t.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let n=t.createElement("span");n.classList.add("xterm-char-measure-element");let s=t.createElement("span");s.classList.add("xterm-char-measure-element"),s.style.fontWeight="bold";let r=t.createElement("span");r.classList.add("xterm-char-measure-element"),r.style.fontStyle="italic";let i=t.createElement("span");i.classList.add("xterm-char-measure-element"),i.style.fontWeight="bold",i.style.fontStyle="italic",this._measureElements=[n,s,r,i],this._container.appendChild(n),this._container.appendChild(s),this._container.appendChild(r),this._container.appendChild(i),e.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(t,e,n,s){t===this._font&&e===this._fontSize&&n===this._weight&&s===this._weightBold||(this._font=t,this._fontSize=e,this._weight=n,this._weightBold=s,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${n}`,this._measureElements[1].style.fontWeight=`${s}`,this._measureElements[2].style.fontWeight=`${n}`,this._measureElements[3].style.fontWeight=`${s}`,this.clear())}get(t,e,n){let s=0;if(!e&&!n&&t.length===1&&(s=t.charCodeAt(0))<256){if(this._flat[s]!==-9999)return this._flat[s];let o=this._measure(t,0);return o>0&&(this._flat[s]=o),o}let r=t;e&&(r+="B"),n&&(r+="I");let i=this._holey.get(r);if(i===void 0){let o=0;e&&(o|=1),n&&(o|=2),i=this._measure(t,o),i>0&&this._holey.set(r,i)}return i}_measure(t,e){let n=this._measureElements[e];return n.textContent=t.repeat(32),n.offsetWidth/32}},JQ=class{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(t,e,n,s=!1){if(this.selectionStart=e,this.selectionEnd=n,!e||!n||e[0]===n[0]&&e[1]===n[1]){this.clear();return}let r=t.buffers.active.ydisp,i=e[1]-r,o=n[1]-r,c=Math.max(i,0),d=Math.min(o,t.rows-1);if(c>=t.rows||d<0){this.clear();return}this.hasSelection=!0,this.columnSelectMode=s,this.viewportStartRow=i,this.viewportEndRow=o,this.viewportCappedStartRow=c,this.viewportCappedEndRow=d,this.startCol=e[0],this.endCol=n[0]}isCellSelected(t,e,n){return this.hasSelection?(n-=t.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?e>=this.startCol&&n>=this.viewportCappedStartRow&&e<this.endCol&&n<=this.viewportCappedEndRow:e<this.startCol&&n>=this.viewportCappedStartRow&&e>=this.endCol&&n<=this.viewportCappedEndRow:n>this.viewportStartRow&&n<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&n===this.viewportStartRow&&e>=this.startCol&&e<this.endCol||this.viewportStartRow<this.viewportEndRow&&n===this.viewportEndRow&&e<this.endCol||this.viewportStartRow<this.viewportEndRow&&n===this.viewportStartRow&&e>=this.startCol):!1}};function QQ(){return new JQ}var bx="xterm-dom-renderer-owner-",Cr="xterm-rows",Pm="xterm-fg-",Ej="xterm-bg-",$h="xterm-focus",$m="xterm-selection",ZQ=1,eS=class extends xt{constructor(t,e,n,s,r,i,o,c,d,h,g,m,b,y){super(),this._terminal=t,this._document=e,this._element=n,this._screenElement=s,this._viewportElement=r,this._helperContainer=i,this._linkifier2=o,this._charSizeService=d,this._optionsService=h,this._bufferService=g,this._coreService=m,this._coreBrowserService=b,this._themeService=y,this._terminalClass=ZQ++,this._rowElements=[],this._selectionRenderModel=QQ(),this.onRequestRedraw=this._register(new je).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(Cr),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add($m),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=YQ(),this._updateDimensions(),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._themeService.onChangeColors(w=>this._injectCss(w))),this._injectCss(this._themeService.colors),this._rowFactory=c.createInstance(Zw,document),this._element.classList.add(bx+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this._register(this._linkifier2.onShowLinkUnderline(w=>this._handleLinkHover(w))),this._register(this._linkifier2.onHideLinkUnderline(w=>this._handleLinkLeave(w))),this._register(sn(()=>{this._element.classList.remove(bx+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new XQ(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let t=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*t,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*t),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/t),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/t),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let n of this._rowElements)n.style.width=`${this.dimensions.css.canvas.width}px`,n.style.height=`${this.dimensions.css.cell.height}px`,n.style.lineHeight=`${this.dimensions.css.cell.height}px`,n.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let e=`${this._terminalSelector} .${Cr} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=e,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(t){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let e=`${this._terminalSelector} .${Cr} { pointer-events: none; color: ${t.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;e+=`${this._terminalSelector} .${Cr} .xterm-dim { color: ${Qt.multiplyOpacity(t.foreground,.5).css};}`,e+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;let n=`blink_underline_${this._terminalClass}`,s=`blink_bar_${this._terminalClass}`,r=`blink_block_${this._terminalClass}`;e+=`@keyframes ${n} { 50% {  border-bottom-style: hidden; }}`,e+=`@keyframes ${s} { 50% {  box-shadow: none; }}`,e+=`@keyframes ${r} { 0% {  background-color: ${t.cursor.css};  color: ${t.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${t.cursor.css}; }}`,e+=`${this._terminalSelector} .${Cr}.${$h} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${n} 1s step-end infinite;}${this._terminalSelector} .${Cr}.${$h} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${s} 1s step-end infinite;}${this._terminalSelector} .${Cr}.${$h} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${r} 1s step-end infinite;}${this._terminalSelector} .${Cr} .xterm-cursor.xterm-cursor-block { background-color: ${t.cursor.css}; color: ${t.cursorAccent.css};}${this._terminalSelector} .${Cr} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${t.cursor.css} !important; color: ${t.cursorAccent.css} !important;}${this._terminalSelector} .${Cr} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${t.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${Cr} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${t.cursor.css} inset;}${this._terminalSelector} .${Cr} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${t.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,e+=`${this._terminalSelector} .${$m} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${$m} div { position: absolute; background-color: ${t.selectionBackgroundOpaque.css};}${this._terminalSelector} .${$m} div { position: absolute; background-color: ${t.selectionInactiveBackgroundOpaque.css};}`;for(let[i,o]of t.ansi.entries())e+=`${this._terminalSelector} .${Pm}${i} { color: ${o.css}; }${this._terminalSelector} .${Pm}${i}.xterm-dim { color: ${Qt.multiplyOpacity(o,.5).css}; }${this._terminalSelector} .${Ej}${i} { background-color: ${o.css}; }`;e+=`${this._terminalSelector} .${Pm}257 { color: ${Qt.opaque(t.background).css}; }${this._terminalSelector} .${Pm}257.xterm-dim { color: ${Qt.multiplyOpacity(Qt.opaque(t.background),.5).css}; }${this._terminalSelector} .${Ej}257 { background-color: ${t.foreground.css}; }`,this._themeStyleElement.textContent=e}_setDefaultSpacing(){let t=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${t}px`,this._rowFactory.defaultSpacing=t}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(t,e){for(let n=this._rowElements.length;n<=e;n++){let s=this._document.createElement("div");this._rowContainer.appendChild(s),this._rowElements.push(s)}for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(t,e){this._refreshRowElements(t,e),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove($h),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add($h),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(t,e,n){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(t,e,n),this.renderRows(0,this._bufferService.rows-1),!t||!e||(this._selectionRenderModel.update(this._terminal,t,e,n),!this._selectionRenderModel.hasSelection))return;let s=this._selectionRenderModel.viewportStartRow,r=this._selectionRenderModel.viewportEndRow,i=this._selectionRenderModel.viewportCappedStartRow,o=this._selectionRenderModel.viewportCappedEndRow,c=this._document.createDocumentFragment();if(n){let d=t[0]>e[0];c.appendChild(this._createSelectionElement(i,d?e[0]:t[0],d?t[0]:e[0],o-i+1))}else{let d=s===i?t[0]:0,h=i===r?e[0]:this._bufferService.cols;c.appendChild(this._createSelectionElement(i,d,h));let g=o-i-1;if(c.appendChild(this._createSelectionElement(i+1,0,this._bufferService.cols,g)),i!==o){let m=r===o?e[0]:this._bufferService.cols;c.appendChild(this._createSelectionElement(o,0,m))}}this._selectionContainer.appendChild(c)}_createSelectionElement(t,e,n,s=1){let r=this._document.createElement("div"),i=e*this.dimensions.css.cell.width,o=this.dimensions.css.cell.width*(n-e);return i+o>this.dimensions.css.canvas.width&&(o=this.dimensions.css.canvas.width-i),r.style.height=`${s*this.dimensions.css.cell.height}px`,r.style.top=`${t*this.dimensions.css.cell.height}px`,r.style.left=`${i}px`,r.style.width=`${o}px`,r}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let t of this._rowElements)t.replaceChildren()}renderRows(t,e){let n=this._bufferService.buffer,s=n.ybase+n.y,r=Math.min(n.x,this._bufferService.cols-1),i=this._coreService.decPrivateModes.cursorBlink??this._optionsService.rawOptions.cursorBlink,o=this._coreService.decPrivateModes.cursorStyle??this._optionsService.rawOptions.cursorStyle,c=this._optionsService.rawOptions.cursorInactiveStyle;for(let d=t;d<=e;d++){let h=d+n.ydisp,g=this._rowElements[d],m=n.lines.get(h);if(!g||!m)break;g.replaceChildren(...this._rowFactory.createRow(m,h,h===s,o,c,r,i,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${bx}${this._terminalClass}`}_handleLinkHover(t){this._setCellUnderline(t.x1,t.x2,t.y1,t.y2,t.cols,!0)}_handleLinkLeave(t){this._setCellUnderline(t.x1,t.x2,t.y1,t.y2,t.cols,!1)}_setCellUnderline(t,e,n,s,r,i){n<0&&(t=0),s<0&&(e=0);let o=this._bufferService.rows-1;n=Math.max(Math.min(n,o),0),s=Math.max(Math.min(s,o),0),r=Math.min(r,this._bufferService.cols);let c=this._bufferService.buffer,d=c.ybase+c.y,h=Math.min(c.x,r-1),g=this._optionsService.rawOptions.cursorBlink,m=this._optionsService.rawOptions.cursorStyle,b=this._optionsService.rawOptions.cursorInactiveStyle;for(let y=n;y<=s;++y){let w=y+c.ydisp,x=this._rowElements[y],S=c.lines.get(w);if(!x||!S)break;x.replaceChildren(...this._rowFactory.createRow(S,w,w===d,m,b,h,g,this.dimensions.css.cell.width,this._widthCache,i?y===n?t:0:-1,i?(y===s?e:r)-1:-1))}}};eS=fn([Le(7,uk),Le(8,Fy),Le(9,js),Le(10,Es),Le(11,Al),Le(12,ya),Le(13,Ou)],eS);var tS=class extends xt{constructor(t,e,n){super(),this._optionsService=n,this.width=0,this.height=0,this._onCharSizeChange=this._register(new je),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this._register(new tZ(this._optionsService))}catch{this._measureStrategy=this._register(new eZ(t,e,this._optionsService))}this._register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}get hasValidSize(){return this.width>0&&this.height>0}measure(){let t=this._measureStrategy.measure();(t.width!==this.width||t.height!==this.height)&&(this.width=t.width,this.height=t.height,this._onCharSizeChange.fire())}};tS=fn([Le(2,js)],tS);var pD=class extends xt{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(t,e){t!==void 0&&t>0&&e!==void 0&&e>0&&(this._result.width=t,this._result.height=e)}},eZ=class extends pD{constructor(t,e,n){super(),this._document=t,this._parentElement=e,this._optionsService=n,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}},tZ=class extends pD{constructor(t){super(),this._optionsService=t,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");let e=this._ctx.measureText("W");if(!("width"in e&&"fontBoundingBoxAscent"in e&&"fontBoundingBoxDescent"in e))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;let t=this._ctx.measureText("W");return this._validateAndSet(t.width,t.fontBoundingBoxAscent+t.fontBoundingBoxDescent),this._result}},nZ=class extends xt{constructor(t,e,n){super(),this._textarea=t,this._window=e,this.mainDocument=n,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=this._register(new sZ(this._window)),this._onDprChange=this._register(new je),this.onDprChange=this._onDprChange.event,this._onWindowChange=this._register(new je),this.onWindowChange=this._onWindowChange.event,this._register(this.onWindowChange(s=>this._screenDprMonitor.setWindow(s))),this._register(ns.forward(this._screenDprMonitor.onDprChange,this._onDprChange)),this._register(ot(this._textarea,"focus",()=>this._isFocused=!0)),this._register(ot(this._textarea,"blur",()=>this._isFocused=!1))}get window(){return this._window}set window(t){this._window!==t&&(this._window=t,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}},sZ=class extends xt{constructor(t){super(),this._parentWindow=t,this._windowResizeListener=this._register(new cu),this._onDprChange=this._register(new je),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this._register(sn(()=>this.clearListener()))}setWindow(t){this._parentWindow=t,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=ot(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){!this._resolutionMediaMatchList||!this._outerListener||(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}},rZ=class extends xt{constructor(){super(),this.linkProviders=[],this._register(sn(()=>this.linkProviders.length=0))}registerLinkProvider(t){return this.linkProviders.push(t),{dispose:()=>{let e=this.linkProviders.indexOf(t);e!==-1&&this.linkProviders.splice(e,1)}}}};function bk(t,e,n){let s=n.getBoundingClientRect(),r=t.getComputedStyle(n),i=parseInt(r.getPropertyValue("padding-left")),o=parseInt(r.getPropertyValue("padding-top"));return[e.clientX-s.left-i,e.clientY-s.top-o]}function iZ(t,e,n,s,r,i,o,c,d){if(!i)return;let h=bk(t,e,n);if(h)return h[0]=Math.ceil((h[0]+(d?o/2:0))/o),h[1]=Math.ceil(h[1]/c),h[0]=Math.min(Math.max(h[0],1),s+(d?1:0)),h[1]=Math.min(Math.max(h[1],1),r),h}var nS=class{constructor(t,e){this._renderService=t,this._charSizeService=e}getCoords(t,e,n,s,r){return iZ(window,t,e,n,s,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,r)}getMouseReportCoords(t,e){let n=bk(window,t,e);if(this._charSizeService.hasValidSize)return n[0]=Math.min(Math.max(n[0],0),this._renderService.dimensions.css.canvas.width-1),n[1]=Math.min(Math.max(n[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(n[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(n[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(n[0]),y:Math.floor(n[1])}}};nS=fn([Le(0,ba),Le(1,Fy)],nS);var aZ=class{constructor(t,e){this._renderCallback=t,this._coreBrowserService=e,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(t){return this._refreshCallbacks.push(t),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(t,e,n){this._rowCount=n,t=t!==void 0?t:0,e=e!==void 0?e:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,t):t,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,e):e,!this._animationFrame&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0){this._runRefreshCallbacks();return}let t=Math.max(this._rowStart,0),e=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(t,e),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let t of this._refreshCallbacks)t(0);this._refreshCallbacks=[]}},mD={};gJ(mD,{getSafariVersion:()=>lZ,isChromeOS:()=>vD,isFirefox:()=>gD,isIpad:()=>cZ,isIphone:()=>uZ,isLegacyEdge:()=>oZ,isLinux:()=>vk,isMac:()=>_g,isNode:()=>qy,isSafari:()=>yD,isWindows:()=>bD});var qy=typeof process<"u"&&"title"in process,Gf=qy?"node":navigator.userAgent,Yf=qy?"node":navigator.platform,gD=Gf.includes("Firefox"),oZ=Gf.includes("Edge"),yD=/^((?!chrome|android).)*safari/i.test(Gf);function lZ(){if(!yD)return 0;let t=Gf.match(/Version\/(\d+)/);return t===null||t.length<2?0:parseInt(t[1])}var _g=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(Yf),cZ=Yf==="iPad",uZ=Yf==="iPhone",bD=["Windows","Win16","Win32","WinCE"].includes(Yf),vk=Yf.indexOf("Linux")>=0,vD=/\bCrOS\b/.test(Gf),xD=class{constructor(){this._tasks=[],this._i=0}enqueue(t){this._tasks.push(t),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(t){this._idleCallback=void 0;let e=0,n=0,s=t.timeRemaining(),r=0;for(;this._i<this._tasks.length;){if(e=performance.now(),this._tasks[this._i]()||this._i++,e=Math.max(1,performance.now()-e),n=Math.max(e,n),r=t.timeRemaining(),n*1.5>r){s-e<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(s-e))}ms`),this._start();return}s=r}this.clear()}},hZ=class extends xD{_requestCallback(t){return setTimeout(()=>t(this._createDeadline(16)))}_cancelCallback(t){clearTimeout(t)}_createDeadline(t){let e=performance.now()+t;return{timeRemaining:()=>Math.max(0,e-performance.now())}}},dZ=class extends xD{_requestCallback(t){return requestIdleCallback(t)}_cancelCallback(t){cancelIdleCallback(t)}},wg=!qy&&"requestIdleCallback"in window?dZ:hZ,fZ=class{constructor(){this._queue=new wg}set(t){this._queue.clear(),this._queue.enqueue(t)}flush(){this._queue.flush()}},sS=class extends xt{constructor(t,e,n,s,r,i,o,c,d){super(),this._rowCount=t,this._optionsService=n,this._charSizeService=s,this._coreService=r,this._coreBrowserService=c,this._renderer=this._register(new cu),this._pausedResizeTask=new fZ,this._observerDisposable=this._register(new cu),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this._register(new je),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this._register(new je),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this._register(new je),this.onRender=this._onRender.event,this._onRefreshRequest=this._register(new je),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new aZ((h,g)=>this._renderRows(h,g),this._coreBrowserService),this._register(this._renderDebouncer),this._syncOutputHandler=new pZ(this._coreBrowserService,this._coreService,()=>this._fullRefresh()),this._register(sn(()=>this._syncOutputHandler.dispose())),this._register(this._coreBrowserService.onDprChange(()=>this.handleDevicePixelRatioChange())),this._register(o.onResize(()=>this._fullRefresh())),this._register(o.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this._register(i.onDecorationRegistered(()=>this._fullRefresh())),this._register(i.onDecorationRemoved(()=>this._fullRefresh())),this._register(this._optionsService.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(o.cols,o.rows),this._fullRefresh()})),this._register(this._optionsService.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(o.buffer.y,o.buffer.y,!0))),this._register(d.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(this._coreBrowserService.window,e),this._register(this._coreBrowserService.onWindowChange(h=>this._registerIntersectionObserver(h,e)))}get dimensions(){return this._renderer.value.dimensions}_registerIntersectionObserver(t,e){if("IntersectionObserver"in t){let n=new t.IntersectionObserver(s=>this._handleIntersectionChange(s[s.length-1]),{threshold:0});n.observe(e),this._observerDisposable.value=sn(()=>n.disconnect())}}_handleIntersectionChange(t){this._isPaused=t.isIntersecting===void 0?t.intersectionRatio===0:!t.isIntersecting,!this._isPaused&&!this._charSizeService.hasValidSize&&this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(t,e,n=!1){if(this._isPaused){this._needsFullRefresh=!0;return}if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(t,e);return}let s=this._syncOutputHandler.flush();s&&(t=Math.min(t,s.start),e=Math.max(e,s.end)),n||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(t,e,this._rowCount)}_renderRows(t,e){if(this._renderer.value){if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(t,e);return}t=Math.min(t,this._rowCount-1),e=Math.min(e,this._rowCount-1),this._renderer.value.renderRows(t,e),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:t,end:e}),this._onRender.fire({start:t,end:e}),this._isNextRenderRedrawOnly=!0}}resize(t,e){this._rowCount=e,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(t){this._renderer.value=t,this._renderer.value&&(this._renderer.value.onRequestRedraw(e=>this.refreshRows(e.start,e.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(t){return this._renderDebouncer.addRefreshCallback(t)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(t,e){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(t,e)):this._renderer.value.handleResize(t,e),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(t,e,n){this._selectionState.start=t,this._selectionState.end=e,this._selectionState.columnSelectMode=n,this._renderer.value?.handleSelectionChanged(t,e,n)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};sS=fn([Le(2,js),Le(3,Fy),Le(4,Al),Le(5,Wf),Le(6,Es),Le(7,ya),Le(8,Ou)],sS);var pZ=class{constructor(t,e,n){this._coreBrowserService=t,this._coreService=e,this._onTimeout=n,this._start=0,this._end=0,this._isBuffering=!1}bufferRows(t,e){this._isBuffering?(this._start=Math.min(this._start,t),this._end=Math.max(this._end,e)):(this._start=t,this._end=e,this._isBuffering=!0),this._timeout===void 0&&(this._timeout=this._coreBrowserService.window.setTimeout(()=>{this._timeout=void 0,this._coreService.decPrivateModes.synchronizedOutput=!1,this._onTimeout()},1e3))}flush(){if(this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0),!this._isBuffering)return;let t={start:this._start,end:this._end};return this._isBuffering=!1,t}dispose(){this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0)}};function mZ(t,e,n,s){let r=n.buffer.x,i=n.buffer.y;if(!n.buffer.hasScrollback)return bZ(r,i,t,e,n,s)+Ky(i,e,n,s)+vZ(r,i,t,e,n,s);let o;if(i===e)return o=r>t?"D":"C",mf(Math.abs(r-t),pf(o,s));o=i>e?"D":"C";let c=Math.abs(i-e),d=yZ(i>e?t:r,n)+(c-1)*n.cols+1+gZ(i>e?r:t);return mf(d,pf(o,s))}function gZ(t,e){return t-1}function yZ(t,e){return e.cols-t}function bZ(t,e,n,s,r,i){return Ky(e,s,r,i).length===0?"":mf(wD(t,e,t,e-vl(e,r),!1,r).length,pf("D",i))}function Ky(t,e,n,s){let r=t-vl(t,n),i=e-vl(e,n),o=Math.abs(r-i)-xZ(t,e,n);return mf(o,pf(_D(t,e),s))}function vZ(t,e,n,s,r,i){let o;Ky(e,s,r,i).length>0?o=s-vl(s,r):o=e;let c=s,d=_Z(t,e,n,s,r,i);return mf(wD(t,o,n,c,d==="C",r).length,pf(d,i))}function xZ(t,e,n){let s=0,r=t-vl(t,n),i=e-vl(e,n);for(let o=0;o<Math.abs(r-i);o++){let c=_D(t,e)==="A"?-1:1;n.buffer.lines.get(r+c*o)?.isWrapped&&s++}return s}function vl(t,e){let n=0,s=e.buffer.lines.get(t),r=s?.isWrapped;for(;r&&t>=0&&t<e.rows;)n++,s=e.buffer.lines.get(--t),r=s?.isWrapped;return n}function _Z(t,e,n,s,r,i){let o;return Ky(n,s,r,i).length>0?o=s-vl(s,r):o=e,t<n&&o<=s||t>=n&&o<s?"C":"D"}function _D(t,e){return t>e?"A":"B"}function wD(t,e,n,s,r,i){let o=t,c=e,d="";for(;(o!==n||c!==s)&&c>=0&&c<i.buffer.lines.length;)o+=r?1:-1,r&&o>i.cols-1?(d+=i.buffer.translateBufferLineToString(c,!1,t,o),o=0,t=0,c++):!r&&o<0&&(d+=i.buffer.translateBufferLineToString(c,!1,0,t+1),o=i.cols-1,t=o,c--);return d+i.buffer.translateBufferLineToString(c,!1,t,o)}function pf(t,e){let n=e?"O":"[";return ve.ESC+n+t}function mf(t,e){t=Math.floor(t);let n="";for(let s=0;s<t;s++)n+=e;return n}var wZ=class{constructor(t){this._bufferService=t,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:!this.selectionEnd||!this.selectionStart?this.selectionStart:this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let t=this.selectionStart[0]+this.selectionStartLength;return t>this._bufferService.cols?t%this._bufferService.cols===0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(t/this._bufferService.cols)-1]:[t%this._bufferService.cols,this.selectionStart[1]+Math.floor(t/this._bufferService.cols)]:[t,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let t=this.selectionStart[0]+this.selectionStartLength;return t>this._bufferService.cols?[t%this._bufferService.cols,this.selectionStart[1]+Math.floor(t/this._bufferService.cols)]:[Math.max(t,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let t=this.selectionStart,e=this.selectionEnd;return!t||!e?!1:t[1]>e[1]||t[1]===e[1]&&t[0]>e[0]}handleTrim(t){return this.selectionStart&&(this.selectionStart[1]-=t),this.selectionEnd&&(this.selectionEnd[1]-=t),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}};function jj(t,e){if(t.start.y>t.end.y)throw new Error(`Buffer range end (${t.end.x}, ${t.end.y}) cannot be before start (${t.start.x}, ${t.start.y})`);return e*(t.end.y-t.start.y)+(t.end.x-t.start.x+1)}var vx=50,SZ=15,kZ=50,CZ=500,NZ="",AZ=new RegExp(NZ,"g"),rS=class extends xt{constructor(t,e,n,s,r,i,o,c,d){super(),this._element=t,this._screenElement=e,this._linkifier=n,this._bufferService=s,this._coreService=r,this._mouseService=i,this._optionsService=o,this._renderService=c,this._coreBrowserService=d,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new Mr,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this._register(new je),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this._register(new je),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this._register(new je),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this._register(new je),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=h=>this._handleMouseMove(h),this._mouseUpListener=h=>this._handleMouseUp(h),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(h=>this._handleTrim(h)),this._register(this._bufferService.buffers.onBufferActivate(h=>this._handleBufferActivate(h))),this.enable(),this._model=new wZ(this._bufferService),this._activeSelectionMode=0,this._register(sn(()=>{this._removeMouseDownListeners()})),this._register(this._bufferService.onResize(h=>{h.rowsChanged&&this.clearSelection()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let t=this._model.finalSelectionStart,e=this._model.finalSelectionEnd;return!t||!e?!1:t[0]!==e[0]||t[1]!==e[1]}get selectionText(){let t=this._model.finalSelectionStart,e=this._model.finalSelectionEnd;if(!t||!e)return"";let n=this._bufferService.buffer,s=[];if(this._activeSelectionMode===3){if(t[0]===e[0])return"";let r=t[0]<e[0]?t[0]:e[0],i=t[0]<e[0]?e[0]:t[0];for(let o=t[1];o<=e[1];o++){let c=n.translateBufferLineToString(o,!0,r,i);s.push(c)}}else{let r=t[1]===e[1]?e[0]:void 0;s.push(n.translateBufferLineToString(t[1],!0,t[0],r));for(let i=t[1]+1;i<=e[1]-1;i++){let o=n.lines.get(i),c=n.translateBufferLineToString(i,!0);o?.isWrapped?s[s.length-1]+=c:s.push(c)}if(t[1]!==e[1]){let i=n.lines.get(e[1]),o=n.translateBufferLineToString(e[1],!0,0,e[0]);i&&i.isWrapped?s[s.length-1]+=o:s.push(o)}}return s.map(r=>r.replace(AZ," ")).join(bD?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(t){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),vk&&t&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(t){let e=this._getMouseBufferCoords(t),n=this._model.finalSelectionStart,s=this._model.finalSelectionEnd;return!n||!s||!e?!1:this._areCoordsInSelection(e,n,s)}isCellInSelection(t,e){let n=this._model.finalSelectionStart,s=this._model.finalSelectionEnd;return!n||!s?!1:this._areCoordsInSelection([t,e],n,s)}_areCoordsInSelection(t,e,n){return t[1]>e[1]&&t[1]<n[1]||e[1]===n[1]&&t[1]===e[1]&&t[0]>=e[0]&&t[0]<n[0]||e[1]<n[1]&&t[1]===n[1]&&t[0]<n[0]||e[1]<n[1]&&t[1]===e[1]&&t[0]>=e[0]}_selectWordAtCursor(t,e){let n=this._linkifier.currentLink?.link?.range;if(n)return this._model.selectionStart=[n.start.x-1,n.start.y-1],this._model.selectionStartLength=jj(n,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let s=this._getMouseBufferCoords(t);return s?(this._selectWordAt(s,e),this._model.selectionEnd=void 0,!0):!1}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(t,e){this._model.clearSelection(),t=Math.max(t,0),e=Math.min(e,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,t],this._model.selectionEnd=[this._bufferService.cols,e],this.refresh(),this._onSelectionChange.fire()}_handleTrim(t){this._model.handleTrim(t)&&this.refresh()}_getMouseBufferCoords(t){let e=this._mouseService.getCoords(t,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(e)return e[0]--,e[1]--,e[1]+=this._bufferService.buffer.ydisp,e}_getMouseEventScrollAmount(t){let e=bk(this._coreBrowserService.window,t,this._screenElement)[1],n=this._renderService.dimensions.css.canvas.height;return e>=0&&e<=n?0:(e>n&&(e-=n),e=Math.min(Math.max(e,-vx),vx),e/=vx,e/Math.abs(e)+Math.round(e*(SZ-1)))}shouldForceSelection(t){return _g?t.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:t.shiftKey}handleMouseDown(t){if(this._mouseDownTimeStamp=t.timeStamp,!(t.button===2&&this.hasSelection)&&t.button===0){if(!this._enabled){if(!this.shouldForceSelection(t))return;t.stopPropagation()}t.preventDefault(),this._dragScrollAmount=0,this._enabled&&t.shiftKey?this._handleIncrementalClick(t):t.detail===1?this._handleSingleClick(t):t.detail===2?this._handleDoubleClick(t):t.detail===3&&this._handleTripleClick(t),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),kZ)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(t){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(t))}_handleSingleClick(t){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(t)?3:0,this._model.selectionStart=this._getMouseBufferCoords(t),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let e=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);e&&e.length!==this._model.selectionStart[0]&&e.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(t){this._selectWordAtCursor(t,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(t){let e=this._getMouseBufferCoords(t);e&&(this._activeSelectionMode=2,this._selectLineAt(e[1]))}shouldColumnSelect(t){return t.altKey&&!(_g&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(t){if(t.stopImmediatePropagation(),!this._model.selectionStart)return;let e=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(t),!this._model.selectionEnd){this.refresh(!0);return}this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(t),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let n=this._bufferService.buffer;if(this._model.selectionEnd[1]<n.lines.length){let s=n.lines.get(this._model.selectionEnd[1]);s&&s.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}(!e||e[0]!==this._model.selectionEnd[0]||e[1]!==this._model.selectionEnd[1])&&this.refresh(!0)}_dragScroll(){if(!(!this._model.selectionEnd||!this._model.selectionStart)&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let t=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(t.ydisp+this._bufferService.rows,t.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=t.ydisp),this.refresh()}}_handleMouseUp(t){let e=t.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&e<CZ&&t.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let n=this._mouseService.getCoords(t,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(n&&n[0]!==void 0&&n[1]!==void 0){let s=mZ(n[0]-1,n[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(s,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let t=this._model.finalSelectionStart,e=this._model.finalSelectionEnd,n=!!t&&!!e&&(t[0]!==e[0]||t[1]!==e[1]);if(!n){this._oldHasSelection&&this._fireOnSelectionChange(t,e,n);return}!t||!e||(!this._oldSelectionStart||!this._oldSelectionEnd||t[0]!==this._oldSelectionStart[0]||t[1]!==this._oldSelectionStart[1]||e[0]!==this._oldSelectionEnd[0]||e[1]!==this._oldSelectionEnd[1])&&this._fireOnSelectionChange(t,e,n)}_fireOnSelectionChange(t,e,n){this._oldSelectionStart=t,this._oldSelectionEnd=e,this._oldHasSelection=n,this._onSelectionChange.fire()}_handleBufferActivate(t){this.clearSelection(),this._trimListener.dispose(),this._trimListener=t.activeBuffer.lines.onTrim(e=>this._handleTrim(e))}_convertViewportColToCharacterIndex(t,e){let n=e;for(let s=0;e>=s;s++){let r=t.loadCell(s,this._workCell).getChars().length;this._workCell.getWidth()===0?n--:r>1&&e!==s&&(n+=r-1)}return n}setSelection(t,e,n){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[t,e],this._model.selectionStartLength=n,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(t){this._isClickInSelection(t)||(this._selectWordAtCursor(t,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(t,e,n=!0,s=!0){if(t[0]>=this._bufferService.cols)return;let r=this._bufferService.buffer,i=r.lines.get(t[1]);if(!i)return;let o=r.translateBufferLineToString(t[1],!1),c=this._convertViewportColToCharacterIndex(i,t[0]),d=c,h=t[0]-c,g=0,m=0,b=0,y=0;if(o.charAt(c)===" "){for(;c>0&&o.charAt(c-1)===" ";)c--;for(;d<o.length&&o.charAt(d+1)===" ";)d++}else{let S=t[0],k=t[0];i.getWidth(S)===0&&(g++,S--),i.getWidth(k)===2&&(m++,k++);let C=i.getString(k).length;for(C>1&&(y+=C-1,d+=C-1);S>0&&c>0&&!this._isCharWordSeparator(i.loadCell(S-1,this._workCell));){i.loadCell(S-1,this._workCell);let N=this._workCell.getChars().length;this._workCell.getWidth()===0?(g++,S--):N>1&&(b+=N-1,c-=N-1),c--,S--}for(;k<i.length&&d+1<o.length&&!this._isCharWordSeparator(i.loadCell(k+1,this._workCell));){i.loadCell(k+1,this._workCell);let N=this._workCell.getChars().length;this._workCell.getWidth()===2?(m++,k++):N>1&&(y+=N-1,d+=N-1),d++,k++}}d++;let w=c+h-g+b,x=Math.min(this._bufferService.cols,d-c+g+m-b-y);if(!(!e&&o.slice(c,d).trim()==="")){if(n&&w===0&&i.getCodePoint(0)!==32){let S=r.lines.get(t[1]-1);if(S&&i.isWrapped&&S.getCodePoint(this._bufferService.cols-1)!==32){let k=this._getWordAt([this._bufferService.cols-1,t[1]-1],!1,!0,!1);if(k){let C=this._bufferService.cols-k.start;w-=C,x+=C}}}if(s&&w+x===this._bufferService.cols&&i.getCodePoint(this._bufferService.cols-1)!==32){let S=r.lines.get(t[1]+1);if(S?.isWrapped&&S.getCodePoint(0)!==32){let k=this._getWordAt([0,t[1]+1],!1,!1,!0);k&&(x+=k.length)}}return{start:w,length:x}}}_selectWordAt(t,e){let n=this._getWordAt(t,e);if(n){for(;n.start<0;)n.start+=this._bufferService.cols,t[1]--;this._model.selectionStart=[n.start,t[1]],this._model.selectionStartLength=n.length}}_selectToWordAt(t){let e=this._getWordAt(t,!0);if(e){let n=t[1];for(;e.start<0;)e.start+=this._bufferService.cols,n--;if(!this._model.areSelectionValuesReversed())for(;e.start+e.length>this._bufferService.cols;)e.length-=this._bufferService.cols,n++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?e.start:e.start+e.length,n]}}_isCharWordSeparator(t){return t.getWidth()===0?!1:this._optionsService.rawOptions.wordSeparator.indexOf(t.getChars())>=0}_selectLineAt(t){let e=this._bufferService.buffer.getWrappedRangeForLine(t),n={start:{x:0,y:e.first},end:{x:this._bufferService.cols-1,y:e.last}};this._model.selectionStart=[0,e.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=jj(n,this._bufferService.cols)}};rS=fn([Le(3,Es),Le(4,Al),Le(5,hk),Le(6,js),Le(7,ba),Le(8,ya)],rS);var Tj=class{constructor(){this._data={}}set(t,e,n){this._data[t]||(this._data[t]={}),this._data[t][e]=n}get(t,e){return this._data[t]?this._data[t][e]:void 0}clear(){this._data={}}},Rj=class{constructor(){this._color=new Tj,this._css=new Tj}setCss(t,e,n){this._css.set(t,e,n)}getCss(t,e){return this._css.get(t,e)}setColor(t,e,n){this._color.set(t,e,n)}getColor(t,e){return this._color.get(t,e)}clear(){this._color.clear(),this._css.clear()}},On=Object.freeze((()=>{let t=[ln.toColor("#2e3436"),ln.toColor("#cc0000"),ln.toColor("#4e9a06"),ln.toColor("#c4a000"),ln.toColor("#3465a4"),ln.toColor("#75507b"),ln.toColor("#06989a"),ln.toColor("#d3d7cf"),ln.toColor("#555753"),ln.toColor("#ef2929"),ln.toColor("#8ae234"),ln.toColor("#fce94f"),ln.toColor("#729fcf"),ln.toColor("#ad7fa8"),ln.toColor("#34e2e2"),ln.toColor("#eeeeec")],e=[0,95,135,175,215,255];for(let n=0;n<216;n++){let s=e[n/36%6|0],r=e[n/6%6|0],i=e[n%6];t.push({css:An.toCss(s,r,i),rgba:An.toRgba(s,r,i)})}for(let n=0;n<24;n++){let s=8+n*10;t.push({css:An.toCss(s,s,s),rgba:An.toRgba(s,s,s)})}return t})()),Po=ln.toColor("#ffffff"),_d=ln.toColor("#000000"),Oj=ln.toColor("#ffffff"),Mj=_d,zh={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117},EZ=Po,iS=class extends xt{constructor(t){super(),this._optionsService=t,this._contrastCache=new Rj,this._halfContrastCache=new Rj,this._onChangeColors=this._register(new je),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:Po,background:_d,cursor:Oj,cursorAccent:Mj,selectionForeground:void 0,selectionBackgroundTransparent:zh,selectionBackgroundOpaque:Qt.blend(_d,zh),selectionInactiveBackgroundTransparent:zh,selectionInactiveBackgroundOpaque:Qt.blend(_d,zh),scrollbarSliderBackground:Qt.opacity(Po,.2),scrollbarSliderHoverBackground:Qt.opacity(Po,.4),scrollbarSliderActiveBackground:Qt.opacity(Po,.5),overviewRulerBorder:Po,ansi:On.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this._register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this._register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}get colors(){return this._colors}_setTheme(t={}){let e=this._colors;if(e.foreground=Ft(t.foreground,Po),e.background=Ft(t.background,_d),e.cursor=Qt.blend(e.background,Ft(t.cursor,Oj)),e.cursorAccent=Qt.blend(e.background,Ft(t.cursorAccent,Mj)),e.selectionBackgroundTransparent=Ft(t.selectionBackground,zh),e.selectionBackgroundOpaque=Qt.blend(e.background,e.selectionBackgroundTransparent),e.selectionInactiveBackgroundTransparent=Ft(t.selectionInactiveBackground,e.selectionBackgroundTransparent),e.selectionInactiveBackgroundOpaque=Qt.blend(e.background,e.selectionInactiveBackgroundTransparent),e.selectionForeground=t.selectionForeground?Ft(t.selectionForeground,Nj):void 0,e.selectionForeground===Nj&&(e.selectionForeground=void 0),Qt.isOpaque(e.selectionBackgroundTransparent)&&(e.selectionBackgroundTransparent=Qt.opacity(e.selectionBackgroundTransparent,.3)),Qt.isOpaque(e.selectionInactiveBackgroundTransparent)&&(e.selectionInactiveBackgroundTransparent=Qt.opacity(e.selectionInactiveBackgroundTransparent,.3)),e.scrollbarSliderBackground=Ft(t.scrollbarSliderBackground,Qt.opacity(e.foreground,.2)),e.scrollbarSliderHoverBackground=Ft(t.scrollbarSliderHoverBackground,Qt.opacity(e.foreground,.4)),e.scrollbarSliderActiveBackground=Ft(t.scrollbarSliderActiveBackground,Qt.opacity(e.foreground,.5)),e.overviewRulerBorder=Ft(t.overviewRulerBorder,EZ),e.ansi=On.slice(),e.ansi[0]=Ft(t.black,On[0]),e.ansi[1]=Ft(t.red,On[1]),e.ansi[2]=Ft(t.green,On[2]),e.ansi[3]=Ft(t.yellow,On[3]),e.ansi[4]=Ft(t.blue,On[4]),e.ansi[5]=Ft(t.magenta,On[5]),e.ansi[6]=Ft(t.cyan,On[6]),e.ansi[7]=Ft(t.white,On[7]),e.ansi[8]=Ft(t.brightBlack,On[8]),e.ansi[9]=Ft(t.brightRed,On[9]),e.ansi[10]=Ft(t.brightGreen,On[10]),e.ansi[11]=Ft(t.brightYellow,On[11]),e.ansi[12]=Ft(t.brightBlue,On[12]),e.ansi[13]=Ft(t.brightMagenta,On[13]),e.ansi[14]=Ft(t.brightCyan,On[14]),e.ansi[15]=Ft(t.brightWhite,On[15]),t.extendedAnsi){let n=Math.min(e.ansi.length-16,t.extendedAnsi.length);for(let s=0;s<n;s++)e.ansi[s+16]=Ft(t.extendedAnsi[s],On[s+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(t){this._restoreColor(t),this._onChangeColors.fire(this.colors)}_restoreColor(t){if(t===void 0){for(let e=0;e<this._restoreColors.ansi.length;++e)this._colors.ansi[e]=this._restoreColors.ansi[e];return}switch(t){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[t]=this._restoreColors.ansi[t]}}modifyColors(t){t(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};iS=fn([Le(0,js)],iS);function Ft(t,e){if(t!==void 0)try{return ln.toColor(t)}catch{}return e}var jZ=class{constructor(...t){this._entries=new Map;for(let[e,n]of t)this.set(e,n)}set(t,e){let n=this._entries.get(t);return this._entries.set(t,e),n}forEach(t){for(let[e,n]of this._entries.entries())t(e,n)}has(t){return this._entries.has(t)}get(t){return this._entries.get(t)}},TZ=class{constructor(){this._services=new jZ,this._services.set(uk,this)}setService(t,e){this._services.set(t,e)}getService(t){return this._services.get(t)}createInstance(t,...e){let n=SJ(t).sort((i,o)=>i.index-o.index),s=[];for(let i of n){let o=this._services.get(i.id);if(!o)throw new Error(`[createInstance] ${t.name} depends on UNKNOWN service ${i.id._id}.`);s.push(o)}let r=n.length>0?n[0].index:e.length;if(e.length!==r)throw new Error(`[createInstance] First service dependency of ${t.name} at position ${r+1} conflicts with ${e.length} static arguments`);return new t(...e,...s)}},RZ={trace:0,debug:1,info:2,warn:3,error:4,off:5},OZ="xterm.js: ",aS=class extends xt{constructor(t){super(),this._optionsService=t,this._logLevel=5,this._updateLogLevel(),this._register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel()))}get logLevel(){return this._logLevel}_updateLogLevel(){this._logLevel=RZ[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(t){for(let e=0;e<t.length;e++)typeof t[e]=="function"&&(t[e]=t[e]())}_log(t,e,n){this._evalLazyOptionalParams(n),t.call(console,(this._optionsService.options.logger?"":OZ)+e,...n)}trace(t,...e){this._logLevel<=0&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,t,e)}debug(t,...e){this._logLevel<=1&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,t,e)}info(t,...e){this._logLevel<=2&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,t,e)}warn(t,...e){this._logLevel<=3&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,t,e)}error(t,...e){this._logLevel<=4&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,t,e)}};aS=fn([Le(0,js)],aS);var Bj=class extends xt{constructor(t){super(),this._maxLength=t,this.onDeleteEmitter=this._register(new je),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this._register(new je),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this._register(new je),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(t){if(this._maxLength===t)return;let e=new Array(t);for(let n=0;n<Math.min(t,this.length);n++)e[n]=this._array[this._getCyclicIndex(n)];this._array=e,this._maxLength=t,this._startIndex=0}get length(){return this._length}set length(t){if(t>this._length)for(let e=this._length;e<t;e++)this._array[e]=void 0;this._length=t}get(t){return this._array[this._getCyclicIndex(t)]}set(t,e){this._array[this._getCyclicIndex(t)]=e}push(t){this._array[this._getCyclicIndex(this._length)]=t,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(t,e,...n){if(e){for(let s=t;s<this._length-e;s++)this._array[this._getCyclicIndex(s)]=this._array[this._getCyclicIndex(s+e)];this._length-=e,this.onDeleteEmitter.fire({index:t,amount:e})}for(let s=this._length-1;s>=t;s--)this._array[this._getCyclicIndex(s+n.length)]=this._array[this._getCyclicIndex(s)];for(let s=0;s<n.length;s++)this._array[this._getCyclicIndex(t+s)]=n[s];if(n.length&&this.onInsertEmitter.fire({index:t,amount:n.length}),this._length+n.length>this._maxLength){let s=this._length+n.length-this._maxLength;this._startIndex+=s,this._length=this._maxLength,this.onTrimEmitter.fire(s)}else this._length+=n.length}trimStart(t){t>this._length&&(t=this._length),this._startIndex+=t,this._length-=t,this.onTrimEmitter.fire(t)}shiftElements(t,e,n){if(!(e<=0)){if(t<0||t>=this._length)throw new Error("start argument out of range");if(t+n<0)throw new Error("Cannot shift elements in list beyond index 0");if(n>0){for(let r=e-1;r>=0;r--)this.set(t+r+n,this.get(t+r));let s=t+e+n-this._length;if(s>0)for(this._length+=s;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let s=0;s<e;s++)this.set(t+s+n,this.get(t+s))}}_getCyclicIndex(t){return(this._startIndex+t)%this._maxLength}},vt=3,Nn=Object.freeze(new Kf),zm=0,xx=2,wd=class SD{constructor(e,n,s=!1){this.isWrapped=s,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(e*vt);let r=n||Mr.fromCharData([0,UB,1,0]);for(let i=0;i<e;++i)this.setCell(i,r);this.length=e}get(e){let n=this._data[e*vt+0],s=n&2097151;return[this._data[e*vt+1],n&2097152?this._combined[e]:s?Xa(s):"",n>>22,n&2097152?this._combined[e].charCodeAt(this._combined[e].length-1):s]}set(e,n){this._data[e*vt+1]=n[0],n[1].length>1?(this._combined[e]=n[1],this._data[e*vt+0]=e|2097152|n[2]<<22):this._data[e*vt+0]=n[1].charCodeAt(0)|n[2]<<22}getWidth(e){return this._data[e*vt+0]>>22}hasWidth(e){return this._data[e*vt+0]&12582912}getFg(e){return this._data[e*vt+1]}getBg(e){return this._data[e*vt+2]}hasContent(e){return this._data[e*vt+0]&4194303}getCodePoint(e){let n=this._data[e*vt+0];return n&2097152?this._combined[e].charCodeAt(this._combined[e].length-1):n&2097151}isCombined(e){return this._data[e*vt+0]&2097152}getString(e){let n=this._data[e*vt+0];return n&2097152?this._combined[e]:n&2097151?Xa(n&2097151):""}isProtected(e){return this._data[e*vt+2]&536870912}loadCell(e,n){return zm=e*vt,n.content=this._data[zm+0],n.fg=this._data[zm+1],n.bg=this._data[zm+2],n.content&2097152&&(n.combinedData=this._combined[e]),n.bg&268435456&&(n.extended=this._extendedAttrs[e]),n}setCell(e,n){n.content&2097152&&(this._combined[e]=n.combinedData),n.bg&268435456&&(this._extendedAttrs[e]=n.extended),this._data[e*vt+0]=n.content,this._data[e*vt+1]=n.fg,this._data[e*vt+2]=n.bg}setCellFromCodepoint(e,n,s,r){r.bg&268435456&&(this._extendedAttrs[e]=r.extended),this._data[e*vt+0]=n|s<<22,this._data[e*vt+1]=r.fg,this._data[e*vt+2]=r.bg}addCodepointToCell(e,n,s){let r=this._data[e*vt+0];r&2097152?this._combined[e]+=Xa(n):r&2097151?(this._combined[e]=Xa(r&2097151)+Xa(n),r&=-2097152,r|=2097152):r=n|1<<22,s&&(r&=-12582913,r|=s<<22),this._data[e*vt+0]=r}insertCells(e,n,s){if(e%=this.length,e&&this.getWidth(e-1)===2&&this.setCellFromCodepoint(e-1,0,1,s),n<this.length-e){let r=new Mr;for(let i=this.length-e-n-1;i>=0;--i)this.setCell(e+n+i,this.loadCell(e+i,r));for(let i=0;i<n;++i)this.setCell(e+i,s)}else for(let r=e;r<this.length;++r)this.setCell(r,s);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,s)}deleteCells(e,n,s){if(e%=this.length,n<this.length-e){let r=new Mr;for(let i=0;i<this.length-e-n;++i)this.setCell(e+i,this.loadCell(e+n+i,r));for(let i=this.length-n;i<this.length;++i)this.setCell(i,s)}else for(let r=e;r<this.length;++r)this.setCell(r,s);e&&this.getWidth(e-1)===2&&this.setCellFromCodepoint(e-1,0,1,s),this.getWidth(e)===0&&!this.hasContent(e)&&this.setCellFromCodepoint(e,0,1,s)}replaceCells(e,n,s,r=!1){if(r){for(e&&this.getWidth(e-1)===2&&!this.isProtected(e-1)&&this.setCellFromCodepoint(e-1,0,1,s),n<this.length&&this.getWidth(n-1)===2&&!this.isProtected(n)&&this.setCellFromCodepoint(n,0,1,s);e<n&&e<this.length;)this.isProtected(e)||this.setCell(e,s),e++;return}for(e&&this.getWidth(e-1)===2&&this.setCellFromCodepoint(e-1,0,1,s),n<this.length&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n,0,1,s);e<n&&e<this.length;)this.setCell(e++,s)}resize(e,n){if(e===this.length)return this._data.length*4*xx<this._data.buffer.byteLength;let s=e*vt;if(e>this.length){if(this._data.buffer.byteLength>=s*4)this._data=new Uint32Array(this._data.buffer,0,s);else{let r=new Uint32Array(s);r.set(this._data),this._data=r}for(let r=this.length;r<e;++r)this.setCell(r,n)}else{this._data=this._data.subarray(0,s);let r=Object.keys(this._combined);for(let o=0;o<r.length;o++){let c=parseInt(r[o],10);c>=e&&delete this._combined[c]}let i=Object.keys(this._extendedAttrs);for(let o=0;o<i.length;o++){let c=parseInt(i[o],10);c>=e&&delete this._extendedAttrs[c]}}return this.length=e,s*4*xx<this._data.buffer.byteLength}cleanupMemory(){if(this._data.length*4*xx<this._data.buffer.byteLength){let e=new Uint32Array(this._data.length);return e.set(this._data),this._data=e,1}return 0}fill(e,n=!1){if(n){for(let s=0;s<this.length;++s)this.isProtected(s)||this.setCell(s,e);return}this._combined={},this._extendedAttrs={};for(let s=0;s<this.length;++s)this.setCell(s,e)}copyFrom(e){this.length!==e.length?this._data=new Uint32Array(e._data):this._data.set(e._data),this.length=e.length,this._combined={};for(let n in e._combined)this._combined[n]=e._combined[n];this._extendedAttrs={};for(let n in e._extendedAttrs)this._extendedAttrs[n]=e._extendedAttrs[n];this.isWrapped=e.isWrapped}clone(){let e=new SD(0);e._data=new Uint32Array(this._data),e.length=this.length;for(let n in this._combined)e._combined[n]=this._combined[n];for(let n in this._extendedAttrs)e._extendedAttrs[n]=this._extendedAttrs[n];return e.isWrapped=this.isWrapped,e}getTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(this._data[e*vt+0]&4194303)return e+(this._data[e*vt+0]>>22);return 0}getNoBgTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(this._data[e*vt+0]&4194303||this._data[e*vt+2]&50331648)return e+(this._data[e*vt+0]>>22);return 0}copyCellsFrom(e,n,s,r,i){let o=e._data;if(i)for(let d=r-1;d>=0;d--){for(let h=0;h<vt;h++)this._data[(s+d)*vt+h]=o[(n+d)*vt+h];o[(n+d)*vt+2]&268435456&&(this._extendedAttrs[s+d]=e._extendedAttrs[n+d])}else for(let d=0;d<r;d++){for(let h=0;h<vt;h++)this._data[(s+d)*vt+h]=o[(n+d)*vt+h];o[(n+d)*vt+2]&268435456&&(this._extendedAttrs[s+d]=e._extendedAttrs[n+d])}let c=Object.keys(e._combined);for(let d=0;d<c.length;d++){let h=parseInt(c[d],10);h>=n&&(this._combined[h-n+s]=e._combined[h])}}translateToString(e,n,s,r){n=n??0,s=s??this.length,e&&(s=Math.min(s,this.getTrimmedLength())),r&&(r.length=0);let i="";for(;n<s;){let o=this._data[n*vt+0],c=o&2097151,d=o&2097152?this._combined[n]:c?Xa(c):to;if(i+=d,r)for(let h=0;h<d.length;++h)r.push(n);n+=o>>22||1}return r&&r.push(n),i}};function MZ(t,e,n,s,r,i){let o=[];for(let c=0;c<t.length-1;c++){let d=c,h=t.get(++d);if(!h.isWrapped)continue;let g=[t.get(c)];for(;d<t.length&&h.isWrapped;)g.push(h),h=t.get(++d);if(!i&&s>=c&&s<d){c+=g.length-1;continue}let m=0,b=gf(g,m,e),y=1,w=0;for(;y<g.length;){let S=gf(g,y,e),k=S-w,C=n-b,N=Math.min(k,C);g[m].copyCellsFrom(g[y],w,b,N,!1),b+=N,b===n&&(m++,b=0),w+=N,w===S&&(y++,w=0),b===0&&m!==0&&g[m-1].getWidth(n-1)===2&&(g[m].copyCellsFrom(g[m-1],n-1,b++,1,!1),g[m-1].setCell(n-1,r))}g[m].replaceCells(b,n,r);let x=0;for(let S=g.length-1;S>0&&(S>m||g[S].getTrimmedLength()===0);S--)x++;x>0&&(o.push(c+g.length-x),o.push(x)),c+=g.length-1}return o}function BZ(t,e){let n=[],s=0,r=e[s],i=0;for(let o=0;o<t.length;o++)if(r===o){let c=e[++s];t.onDeleteEmitter.fire({index:o-i,amount:c}),o+=c-1,i+=c,r=e[++s]}else n.push(o);return{layout:n,countRemoved:i}}function DZ(t,e){let n=[];for(let s=0;s<e.length;s++)n.push(t.get(e[s]));for(let s=0;s<n.length;s++)t.set(s,n[s]);t.length=e.length}function LZ(t,e,n){let s=[],r=t.map((d,h)=>gf(t,h,e)).reduce((d,h)=>d+h),i=0,o=0,c=0;for(;c<r;){if(r-c<n){s.push(r-c);break}i+=n;let d=gf(t,o,e);i>d&&(i-=d,o++);let h=t[o].getWidth(i-1)===2;h&&i--;let g=h?n-1:n;s.push(g),c+=g}return s}function gf(t,e,n){if(e===t.length-1)return t[e].getTrimmedLength();let s=!t[e].hasContent(n-1)&&t[e].getWidth(n-1)===1,r=t[e+1].getWidth(0)===2;return s&&r?n-1:n}var kD=class CD{constructor(e){this.line=e,this.isDisposed=!1,this._disposables=[],this._id=CD._nextId++,this._onDispose=this.register(new je),this.onDispose=this._onDispose.event}get id(){return this._id}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),bl(this._disposables),this._disposables.length=0)}register(e){return this._disposables.push(e),e}};kD._nextId=1;var IZ=kD,In={},$o=In.B;In[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""};In.A={"#":""};In.B=void 0;In[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""};In.C=In[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};In.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};In.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};In.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};In.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""};In.E=In[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};In.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""};In.H=In[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};In["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""};var Dj=4294967295,Lj=class{constructor(t,e,n){this._hasScrollback=t,this._optionsService=e,this._bufferService=n,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=Nn.clone(),this.savedCharset=$o,this.markers=[],this._nullCell=Mr.fromCharData([0,UB,1,0]),this._whitespaceCell=Mr.fromCharData([0,to,1,32]),this._isClearing=!1,this._memoryCleanupQueue=new wg,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new Bj(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(t){return t?(this._nullCell.fg=t.fg,this._nullCell.bg=t.bg,this._nullCell.extended=t.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new bg),this._nullCell}getWhitespaceCell(t){return t?(this._whitespaceCell.fg=t.fg,this._whitespaceCell.bg=t.bg,this._whitespaceCell.extended=t.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new bg),this._whitespaceCell}getBlankLine(t,e){return new wd(this._bufferService.cols,this.getNullCell(t),e)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let t=this.ybase+this.y-this.ydisp;return t>=0&&t<this._rows}_getCorrectBufferLength(t){if(!this._hasScrollback)return t;let e=t+this._optionsService.rawOptions.scrollback;return e>Dj?Dj:e}fillViewportRows(t){if(this.lines.length===0){t===void 0&&(t=Nn);let e=this._rows;for(;e--;)this.lines.push(this.getBlankLine(t))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new Bj(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(t,e){let n=this.getNullCell(Nn),s=0,r=this._getCorrectBufferLength(e);if(r>this.lines.maxLength&&(this.lines.maxLength=r),this.lines.length>0){if(this._cols<t)for(let o=0;o<this.lines.length;o++)s+=+this.lines.get(o).resize(t,n);let i=0;if(this._rows<e)for(let o=this._rows;o<e;o++)this.lines.length<e+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new wd(t,n)):this.ybase>0&&this.lines.length<=this.ybase+this.y+i+1?(this.ybase--,i++,this.ydisp>0&&this.ydisp--):this.lines.push(new wd(t,n)));else for(let o=this._rows;o>e;o--)this.lines.length>e+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(r<this.lines.maxLength){let o=this.lines.length-r;o>0&&(this.lines.trimStart(o),this.ybase=Math.max(this.ybase-o,0),this.ydisp=Math.max(this.ydisp-o,0),this.savedY=Math.max(this.savedY-o,0)),this.lines.maxLength=r}this.x=Math.min(this.x,t-1),this.y=Math.min(this.y,e-1),i&&(this.y+=i),this.savedX=Math.min(this.savedX,t-1),this.scrollTop=0}if(this.scrollBottom=e-1,this._isReflowEnabled&&(this._reflow(t,e),this._cols>t))for(let i=0;i<this.lines.length;i++)s+=+this.lines.get(i).resize(t,n);this._cols=t,this._rows=e,this._memoryCleanupQueue.clear(),s>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let t=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,t=!1);let e=0;for(;this._memoryCleanupPosition<this.lines.length;)if(e+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),e>100)return!0;return t}get _isReflowEnabled(){let t=this._optionsService.rawOptions.windowsPty;return t&&t.buildNumber?this._hasScrollback&&t.backend==="conpty"&&t.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(t,e){this._cols!==t&&(t>this._cols?this._reflowLarger(t,e):this._reflowSmaller(t,e))}_reflowLarger(t,e){let n=this._optionsService.rawOptions.reflowCursorLine,s=MZ(this.lines,this._cols,t,this.ybase+this.y,this.getNullCell(Nn),n);if(s.length>0){let r=BZ(this.lines,s);DZ(this.lines,r.layout),this._reflowLargerAdjustViewport(t,e,r.countRemoved)}}_reflowLargerAdjustViewport(t,e,n){let s=this.getNullCell(Nn),r=n;for(;r-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<e&&this.lines.push(new wd(t,s))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-n,0)}_reflowSmaller(t,e){let n=this._optionsService.rawOptions.reflowCursorLine,s=this.getNullCell(Nn),r=[],i=0;for(let o=this.lines.length-1;o>=0;o--){let c=this.lines.get(o);if(!c||!c.isWrapped&&c.getTrimmedLength()<=t)continue;let d=[c];for(;c.isWrapped&&o>0;)c=this.lines.get(--o),d.unshift(c);if(!n){let N=this.ybase+this.y;if(N>=o&&N<o+d.length)continue}let h=d[d.length-1].getTrimmedLength(),g=LZ(d,this._cols,t),m=g.length-d.length,b;this.ybase===0&&this.y!==this.lines.length-1?b=Math.max(0,this.y-this.lines.maxLength+m):b=Math.max(0,this.lines.length-this.lines.maxLength+m);let y=[];for(let N=0;N<m;N++){let R=this.getBlankLine(Nn,!0);y.push(R)}y.length>0&&(r.push({start:o+d.length+i,newLines:y}),i+=y.length),d.push(...y);let w=g.length-1,x=g[w];x===0&&(w--,x=g[w]);let S=d.length-m-1,k=h;for(;S>=0;){let N=Math.min(k,x);if(d[w]===void 0)break;if(d[w].copyCellsFrom(d[S],k-N,x-N,N,!0),x-=N,x===0&&(w--,x=g[w]),k-=N,k===0){S--;let R=Math.max(S,0);k=gf(d,R,this._cols)}}for(let N=0;N<d.length;N++)g[N]<t&&d[N].setCell(g[N],s);let C=m-b;for(;C-- >0;)this.ybase===0?this.y<e-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+i)-e&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+m,this.ybase+e-1)}if(r.length>0){let o=[],c=[];for(let x=0;x<this.lines.length;x++)c.push(this.lines.get(x));let d=this.lines.length,h=d-1,g=0,m=r[g];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+i);let b=0;for(let x=Math.min(this.lines.maxLength-1,d+i-1);x>=0;x--)if(m&&m.start>h+b){for(let S=m.newLines.length-1;S>=0;S--)this.lines.set(x--,m.newLines[S]);x++,o.push({index:h+1,amount:m.newLines.length}),b+=m.newLines.length,m=r[++g]}else this.lines.set(x,c[h--]);let y=0;for(let x=o.length-1;x>=0;x--)o[x].index+=y,this.lines.onInsertEmitter.fire(o[x]),y+=o[x].amount;let w=Math.max(0,d+i-this.lines.maxLength);w>0&&this.lines.onTrimEmitter.fire(w)}}translateBufferLineToString(t,e,n=0,s){let r=this.lines.get(t);return r?r.translateToString(e,n,s):""}getWrappedRangeForLine(t){let e=t,n=t;for(;e>0&&this.lines.get(e).isWrapped;)e--;for(;n+1<this.lines.length&&this.lines.get(n+1).isWrapped;)n++;return{first:e,last:n}}setupTabStops(t){for(t!=null?this.tabs[t]||(t=this.prevStop(t)):(this.tabs={},t=0);t<this._cols;t+=this._optionsService.rawOptions.tabStopWidth)this.tabs[t]=!0}prevStop(t){for(t==null&&(t=this.x);!this.tabs[--t]&&t>0;);return t>=this._cols?this._cols-1:t<0?0:t}nextStop(t){for(t==null&&(t=this.x);!this.tabs[++t]&&t<this._cols;);return t>=this._cols?this._cols-1:t<0?0:t}clearMarkers(t){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].line===t&&(this.markers[e].dispose(),this.markers.splice(e--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].dispose();this.markers.length=0,this._isClearing=!1}addMarker(t){let e=new IZ(t);return this.markers.push(e),e.register(this.lines.onTrim(n=>{e.line-=n,e.line<0&&e.dispose()})),e.register(this.lines.onInsert(n=>{e.line>=n.index&&(e.line+=n.amount)})),e.register(this.lines.onDelete(n=>{e.line>=n.index&&e.line<n.index+n.amount&&e.dispose(),e.line>n.index&&(e.line-=n.amount)})),e.register(e.onDispose(()=>this._removeMarker(e))),e}_removeMarker(t){this._isClearing||this.markers.splice(this.markers.indexOf(t),1)}},PZ=class extends xt{constructor(t,e){super(),this._optionsService=t,this._bufferService=e,this._onBufferActivate=this._register(new je),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this._register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this._register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new Lj(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new Lj(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(t){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(t),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(t,e){this._normal.resize(t,e),this._alt.resize(t,e),this.setupTabStops(t)}setupTabStops(t){this._normal.setupTabStops(t),this._alt.setupTabStops(t)}},ND=2,AD=1,oS=class extends xt{constructor(t){super(),this.isUserScrolling=!1,this._onResize=this._register(new je),this.onResize=this._onResize.event,this._onScroll=this._register(new je),this.onScroll=this._onScroll.event,this.cols=Math.max(t.rawOptions.cols||0,ND),this.rows=Math.max(t.rawOptions.rows||0,AD),this.buffers=this._register(new PZ(t,this)),this._register(this.buffers.onBufferActivate(e=>{this._onScroll.fire(e.activeBuffer.ydisp)}))}get buffer(){return this.buffers.active}resize(t,e){let n=this.cols!==t,s=this.rows!==e;this.cols=t,this.rows=e,this.buffers.resize(t,e),this._onResize.fire({cols:t,rows:e,colsChanged:n,rowsChanged:s})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(t,e=!1){let n=this.buffer,s;s=this._cachedBlankLine,(!s||s.length!==this.cols||s.getFg(0)!==t.fg||s.getBg(0)!==t.bg)&&(s=n.getBlankLine(t,e),this._cachedBlankLine=s),s.isWrapped=e;let r=n.ybase+n.scrollTop,i=n.ybase+n.scrollBottom;if(n.scrollTop===0){let o=n.lines.isFull;i===n.lines.length-1?o?n.lines.recycle().copyFrom(s):n.lines.push(s.clone()):n.lines.splice(i+1,0,s.clone()),o?this.isUserScrolling&&(n.ydisp=Math.max(n.ydisp-1,0)):(n.ybase++,this.isUserScrolling||n.ydisp++)}else{let o=i-r+1;n.lines.shiftElements(r+1,o-1,-1),n.lines.set(i,s.clone())}this.isUserScrolling||(n.ydisp=n.ybase),this._onScroll.fire(n.ydisp)}scrollLines(t,e){let n=this.buffer;if(t<0){if(n.ydisp===0)return;this.isUserScrolling=!0}else t+n.ydisp>=n.ybase&&(this.isUserScrolling=!1);let s=n.ydisp;n.ydisp=Math.max(Math.min(n.ydisp+t,n.ybase),0),s!==n.ydisp&&(e||this._onScroll.fire(n.ydisp))}};oS=fn([Le(0,js)],oS);var wc={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnEraseInDisplay:!1,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},reflowCursorLine:!1,rescaleOverlappingGlyphs:!1,rightClickSelectsWord:_g,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRuler:{}},$Z=["normal","bold","100","200","300","400","500","600","700","800","900"],zZ=class extends xt{constructor(t){super(),this._onOptionChange=this._register(new je),this.onOptionChange=this._onOptionChange.event;let e={...wc};for(let n in t)if(n in e)try{let s=t[n];e[n]=this._sanitizeAndValidateOption(n,s)}catch(s){console.error(s)}this.rawOptions=e,this.options={...e},this._setupOptions(),this._register(sn(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(t,e){return this.onOptionChange(n=>{n===t&&e(this.rawOptions[t])})}onMultipleOptionChange(t,e){return this.onOptionChange(n=>{t.indexOf(n)!==-1&&e()})}_setupOptions(){let t=n=>{if(!(n in wc))throw new Error(`No option with key "${n}"`);return this.rawOptions[n]},e=(n,s)=>{if(!(n in wc))throw new Error(`No option with key "${n}"`);s=this._sanitizeAndValidateOption(n,s),this.rawOptions[n]!==s&&(this.rawOptions[n]=s,this._onOptionChange.fire(n))};for(let n in this.rawOptions){let s={get:t.bind(this,n),set:e.bind(this,n)};Object.defineProperty(this.options,n,s)}}_sanitizeAndValidateOption(t,e){switch(t){case"cursorStyle":if(e||(e=wc[t]),!HZ(e))throw new Error(`"${e}" is not a valid value for ${t}`);break;case"wordSeparator":e||(e=wc[t]);break;case"fontWeight":case"fontWeightBold":if(typeof e=="number"&&1<=e&&e<=1e3)break;e=$Z.includes(e)?e:wc[t];break;case"cursorWidth":e=Math.floor(e);case"lineHeight":case"tabStopWidth":if(e<1)throw new Error(`${t} cannot be less than 1, value: ${e}`);break;case"minimumContrastRatio":e=Math.max(1,Math.min(21,Math.round(e*10)/10));break;case"scrollback":if(e=Math.min(e,4294967295),e<0)throw new Error(`${t} cannot be less than 0, value: ${e}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(e<=0)throw new Error(`${t} cannot be less than or equal to 0, value: ${e}`);break;case"rows":case"cols":if(!e&&e!==0)throw new Error(`${t} must be numeric, value: ${e}`);break;case"windowsPty":e=e??{};break}return e}};function HZ(t){return t==="block"||t==="underline"||t==="bar"}function Sd(t,e=5){if(typeof t!="object")return t;let n=Array.isArray(t)?[]:{};for(let s in t)n[s]=e<=1?t[s]:t[s]&&Sd(t[s],e-1);return n}var Ij=Object.freeze({insertMode:!1}),Pj=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,cursorBlink:void 0,cursorStyle:void 0,origin:!1,reverseWraparound:!1,sendFocus:!1,synchronizedOutput:!1,wraparound:!0}),lS=class extends xt{constructor(t,e,n){super(),this._bufferService=t,this._logService=e,this._optionsService=n,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this._register(new je),this.onData=this._onData.event,this._onUserInput=this._register(new je),this.onUserInput=this._onUserInput.event,this._onBinary=this._register(new je),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this._register(new je),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=Sd(Ij),this.decPrivateModes=Sd(Pj)}reset(){this.modes=Sd(Ij),this.decPrivateModes=Sd(Pj)}triggerDataEvent(t,e=!1){if(this._optionsService.rawOptions.disableStdin)return;let n=this._bufferService.buffer;e&&this._optionsService.rawOptions.scrollOnUserInput&&n.ybase!==n.ydisp&&this._onRequestScrollToBottom.fire(),e&&this._onUserInput.fire(),this._logService.debug(`sending data "${t}"`),this._logService.trace("sending data (codes)",()=>t.split("").map(s=>s.charCodeAt(0))),this._onData.fire(t)}triggerBinaryEvent(t){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${t}"`),this._logService.trace("sending binary (codes)",()=>t.split("").map(e=>e.charCodeAt(0))),this._onBinary.fire(t))}};lS=fn([Le(0,Es),Le(1,WB),Le(2,js)],lS);var $j={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:t=>t.button===4||t.action!==1?!1:(t.ctrl=!1,t.alt=!1,t.shift=!1,!0)},VT200:{events:19,restrict:t=>t.action!==32},DRAG:{events:23,restrict:t=>!(t.action===32&&t.button===3)},ANY:{events:31,restrict:t=>!0}};function _x(t,e){let n=(t.ctrl?16:0)|(t.shift?4:0)|(t.alt?8:0);return t.button===4?(n|=64,n|=t.action):(n|=t.button&3,t.button&4&&(n|=64),t.button&8&&(n|=128),t.action===32?n|=32:t.action===0&&!e&&(n|=3)),n}var wx=String.fromCharCode,zj={DEFAULT:t=>{let e=[_x(t,!1)+32,t.col+32,t.row+32];return e[0]>255||e[1]>255||e[2]>255?"":`\x1B[M${wx(e[0])}${wx(e[1])}${wx(e[2])}`},SGR:t=>{let e=t.action===0&&t.button!==4?"m":"M";return`\x1B[<${_x(t,!0)};${t.col};${t.row}${e}`},SGR_PIXELS:t=>{let e=t.action===0&&t.button!==4?"m":"M";return`\x1B[<${_x(t,!0)};${t.x};${t.y}${e}`}},cS=class extends xt{constructor(t,e,n){super(),this._bufferService=t,this._coreService=e,this._optionsService=n,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._wheelPartialScroll=0,this._onProtocolChange=this._register(new je),this.onProtocolChange=this._onProtocolChange.event;for(let s of Object.keys($j))this.addProtocol(s,$j[s]);for(let s of Object.keys(zj))this.addEncoding(s,zj[s]);this.reset()}addProtocol(t,e){this._protocols[t]=e}addEncoding(t,e){this._encodings[t]=e}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(t){if(!this._protocols[t])throw new Error(`unknown protocol "${t}"`);this._activeProtocol=t,this._onProtocolChange.fire(this._protocols[t].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(t){if(!this._encodings[t])throw new Error(`unknown encoding "${t}"`);this._activeEncoding=t}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null,this._wheelPartialScroll=0}consumeWheelEvent(t,e,n){if(t.deltaY===0||t.shiftKey||e===void 0||n===void 0)return 0;let s=e/n,r=this._applyScrollModifier(t.deltaY,t);return t.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(r/=s+0,Math.abs(t.deltaY)<50&&(r*=.3),this._wheelPartialScroll+=r,r=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(r*=this._bufferService.rows),r}_applyScrollModifier(t,e){return e.altKey||e.ctrlKey||e.shiftKey?t*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:t*this._optionsService.rawOptions.scrollSensitivity}triggerMouseEvent(t){if(t.col<0||t.col>=this._bufferService.cols||t.row<0||t.row>=this._bufferService.rows||t.button===4&&t.action===32||t.button===3&&t.action!==32||t.button!==4&&(t.action===2||t.action===3)||(t.col++,t.row++,t.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,t,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(t))return!1;let e=this._encodings[this._activeEncoding](t);return e&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(e):this._coreService.triggerDataEvent(e,!0)),this._lastEvent=t,!0}explainEvents(t){return{down:!!(t&1),up:!!(t&2),drag:!!(t&4),move:!!(t&8),wheel:!!(t&16)}}_equalEvents(t,e,n){if(n){if(t.x!==e.x||t.y!==e.y)return!1}else if(t.col!==e.col||t.row!==e.row)return!1;return!(t.button!==e.button||t.action!==e.action||t.ctrl!==e.ctrl||t.alt!==e.alt||t.shift!==e.shift)}};cS=fn([Le(0,Es),Le(1,Al),Le(2,js)],cS);var Sx=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],UZ=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],Mn;function VZ(t,e){let n=0,s=e.length-1,r;if(t<e[0][0]||t>e[s][1])return!1;for(;s>=n;)if(r=n+s>>1,t>e[r][1])n=r+1;else if(t<e[r][0])s=r-1;else return!0;return!1}var FZ=class{constructor(){if(this.version="6",!Mn){Mn=new Uint8Array(65536),Mn.fill(1),Mn[0]=0,Mn.fill(0,1,32),Mn.fill(0,127,160),Mn.fill(2,4352,4448),Mn[9001]=2,Mn[9002]=2,Mn.fill(2,11904,42192),Mn[12351]=1,Mn.fill(2,44032,55204),Mn.fill(2,63744,64256),Mn.fill(2,65040,65050),Mn.fill(2,65072,65136),Mn.fill(2,65280,65377),Mn.fill(2,65504,65511);for(let t=0;t<Sx.length;++t)Mn.fill(0,Sx[t][0],Sx[t][1]+1)}}wcwidth(t){return t<32?0:t<127?1:t<65536?Mn[t]:VZ(t,UZ)?0:t>=131072&&t<=196605||t>=196608&&t<=262141?2:1}charProperties(t,e){let n=this.wcwidth(t),s=n===0&&e!==0;if(s){let r=Wo.extractWidth(e);r===0?s=!1:r>n&&(n=r)}return Wo.createPropertyValue(0,n,s)}},Wo=class p0{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new je,this.onChange=this._onChange.event;let e=new FZ;this.register(e),this._active=e.version,this._activeProvider=e}static extractShouldJoin(e){return(e&1)!==0}static extractWidth(e){return e>>1&3}static extractCharKind(e){return e>>3}static createPropertyValue(e,n,s=!1){return(e&16777215)<<3|(n&3)<<1|(s?1:0)}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(e){if(!this._providers[e])throw new Error(`unknown Unicode version "${e}"`);this._active=e,this._activeProvider=this._providers[e],this._onChange.fire(e)}register(e){this._providers[e.version]=e}wcwidth(e){return this._activeProvider.wcwidth(e)}getStringCellWidth(e){let n=0,s=0,r=e.length;for(let i=0;i<r;++i){let o=e.charCodeAt(i);if(55296<=o&&o<=56319){if(++i>=r)return n+this.wcwidth(o);let h=e.charCodeAt(i);56320<=h&&h<=57343?o=(o-55296)*1024+h-56320+65536:n+=this.wcwidth(h)}let c=this.charProperties(o,s),d=p0.extractWidth(c);p0.extractShouldJoin(c)&&(d-=p0.extractWidth(s)),n+=d,s=c}return n}charProperties(e,n){return this._activeProvider.charProperties(e,n)}},qZ=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(t){this.glevel=t,this.charset=this._charsets[t]}setgCharset(t,e){this._charsets[t]=e,this.glevel===t&&(this.charset=e)}};function Hj(t){let e=t.buffer.lines.get(t.buffer.ybase+t.buffer.y-1)?.get(t.cols-1),n=t.buffer.lines.get(t.buffer.ybase+t.buffer.y);n&&e&&(n.isWrapped=e[3]!==0&&e[3]!==32)}var Hh=2147483647,KZ=256,ED=class uS{constructor(e=32,n=32){if(this.maxLength=e,this.maxSubParamsLength=n,n>KZ)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(e),this.length=0,this._subParams=new Int32Array(n),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(e),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}static fromArray(e){let n=new uS;if(!e.length)return n;for(let s=Array.isArray(e[0])?1:0;s<e.length;++s){let r=e[s];if(Array.isArray(r))for(let i=0;i<r.length;++i)n.addSubParam(r[i]);else n.addParam(r)}return n}clone(){let e=new uS(this.maxLength,this.maxSubParamsLength);return e.params.set(this.params),e.length=this.length,e._subParams.set(this._subParams),e._subParamsLength=this._subParamsLength,e._subParamsIdx.set(this._subParamsIdx),e._rejectDigits=this._rejectDigits,e._rejectSubDigits=this._rejectSubDigits,e._digitIsSub=this._digitIsSub,e}toArray(){let e=[];for(let n=0;n<this.length;++n){e.push(this.params[n]);let s=this._subParamsIdx[n]>>8,r=this._subParamsIdx[n]&255;r-s>0&&e.push(Array.prototype.slice.call(this._subParams,s,r))}return e}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(e){if(this._digitIsSub=!1,this.length>=this.maxLength){this._rejectDigits=!0;return}if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=e>Hh?Hh:e}addSubParam(e){if(this._digitIsSub=!0,!!this.length){if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength){this._rejectSubDigits=!0;return}if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=e>Hh?Hh:e,this._subParamsIdx[this.length-1]++}}hasSubParams(e){return(this._subParamsIdx[e]&255)-(this._subParamsIdx[e]>>8)>0}getSubParams(e){let n=this._subParamsIdx[e]>>8,s=this._subParamsIdx[e]&255;return s-n>0?this._subParams.subarray(n,s):null}getSubParamsAll(){let e={};for(let n=0;n<this.length;++n){let s=this._subParamsIdx[n]>>8,r=this._subParamsIdx[n]&255;r-s>0&&(e[n]=this._subParams.slice(s,r))}return e}addDigit(e){let n;if(this._rejectDigits||!(n=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let s=this._digitIsSub?this._subParams:this.params,r=s[n-1];s[n-1]=~r?Math.min(r*10+e,Hh):e}},Uh=[],WZ=class{constructor(){this._state=0,this._active=Uh,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(t,e){this._handlers[t]===void 0&&(this._handlers[t]=[]);let n=this._handlers[t];return n.push(e),{dispose:()=>{let s=n.indexOf(e);s!==-1&&n.splice(s,1)}}}clearHandler(t){this._handlers[t]&&delete this._handlers[t]}setHandlerFallback(t){this._handlerFb=t}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=Uh}reset(){if(this._state===2)for(let t=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;t>=0;--t)this._active[t].end(!1);this._stack.paused=!1,this._active=Uh,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||Uh,!this._active.length)this._handlerFb(this._id,"START");else for(let t=this._active.length-1;t>=0;t--)this._active[t].start()}_put(t,e,n){if(!this._active.length)this._handlerFb(this._id,"PUT",Vy(t,e,n));else for(let s=this._active.length-1;s>=0;s--)this._active[s].put(t,e,n)}start(){this.reset(),this._state=1}put(t,e,n){if(this._state!==3){if(this._state===1)for(;e<n;){let s=t[e++];if(s===59){this._state=2,this._start();break}if(s<48||57<s){this._state=3;return}this._id===-1&&(this._id=0),this._id=this._id*10+s-48}this._state===2&&n-e>0&&this._put(t,e,n)}}end(t,e=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),!this._active.length)this._handlerFb(this._id,"END",t);else{let n=!1,s=this._active.length-1,r=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,n=e,r=this._stack.fallThrough,this._stack.paused=!1),!r&&n===!1){for(;s>=0&&(n=this._active[s].end(t),n!==!0);s--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,n;s--}for(;s>=0;s--)if(n=this._active[s].end(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,n}this._active=Uh,this._id=-1,this._state=0}}},tr=class{constructor(t){this._handler=t,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(t,e,n){this._hitLimit||(this._data+=Vy(t,e,n),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}end(t){let e=!1;if(this._hitLimit)e=!1;else if(t&&(e=this._handler(this._data),e instanceof Promise))return e.then(n=>(this._data="",this._hitLimit=!1,n));return this._data="",this._hitLimit=!1,e}},Vh=[],GZ=class{constructor(){this._handlers=Object.create(null),this._active=Vh,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=Vh}registerHandler(t,e){this._handlers[t]===void 0&&(this._handlers[t]=[]);let n=this._handlers[t];return n.push(e),{dispose:()=>{let s=n.indexOf(e);s!==-1&&n.splice(s,1)}}}clearHandler(t){this._handlers[t]&&delete this._handlers[t]}setHandlerFallback(t){this._handlerFb=t}reset(){if(this._active.length)for(let t=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;t>=0;--t)this._active[t].unhook(!1);this._stack.paused=!1,this._active=Vh,this._ident=0}hook(t,e){if(this.reset(),this._ident=t,this._active=this._handlers[t]||Vh,!this._active.length)this._handlerFb(this._ident,"HOOK",e);else for(let n=this._active.length-1;n>=0;n--)this._active[n].hook(e)}put(t,e,n){if(!this._active.length)this._handlerFb(this._ident,"PUT",Vy(t,e,n));else for(let s=this._active.length-1;s>=0;s--)this._active[s].put(t,e,n)}unhook(t,e=!0){if(!this._active.length)this._handlerFb(this._ident,"UNHOOK",t);else{let n=!1,s=this._active.length-1,r=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,n=e,r=this._stack.fallThrough,this._stack.paused=!1),!r&&n===!1){for(;s>=0&&(n=this._active[s].unhook(t),n!==!0);s--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,n;s--}for(;s>=0;s--)if(n=this._active[s].unhook(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,n}this._active=Vh,this._ident=0}},kd=new ED;kd.addParam(0);var Uj=class{constructor(t){this._handler=t,this._data="",this._params=kd,this._hitLimit=!1}hook(t){this._params=t.length>1||t.params[0]?t.clone():kd,this._data="",this._hitLimit=!1}put(t,e,n){this._hitLimit||(this._data+=Vy(t,e,n),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}unhook(t){let e=!1;if(this._hitLimit)e=!1;else if(t&&(e=this._handler(this._data,this._params),e instanceof Promise))return e.then(n=>(this._params=kd,this._data="",this._hitLimit=!1,n));return this._params=kd,this._data="",this._hitLimit=!1,e}},YZ=class{constructor(t){this.table=new Uint8Array(t)}setDefault(t,e){this.table.fill(t<<4|e)}add(t,e,n,s){this.table[e<<8|t]=n<<4|s}addMany(t,e,n,s){for(let r=0;r<t.length;r++)this.table[e<<8|t[r]]=n<<4|s}},Ar=160,XZ=(function(){let t=new YZ(4095),e=Array.apply(null,Array(256)).map((c,d)=>d),n=(c,d)=>e.slice(c,d),s=n(32,127),r=n(0,24);r.push(25),r.push.apply(r,n(28,32));let i=n(0,14),o;t.setDefault(1,0),t.addMany(s,0,2,0);for(o in i)t.addMany([24,26,153,154],o,3,0),t.addMany(n(128,144),o,3,0),t.addMany(n(144,152),o,3,0),t.add(156,o,0,0),t.add(27,o,11,1),t.add(157,o,4,8),t.addMany([152,158,159],o,0,7),t.add(155,o,11,3),t.add(144,o,11,9);return t.addMany(r,0,3,0),t.addMany(r,1,3,1),t.add(127,1,0,1),t.addMany(r,8,0,8),t.addMany(r,3,3,3),t.add(127,3,0,3),t.addMany(r,4,3,4),t.add(127,4,0,4),t.addMany(r,6,3,6),t.addMany(r,5,3,5),t.add(127,5,0,5),t.addMany(r,2,3,2),t.add(127,2,0,2),t.add(93,1,4,8),t.addMany(s,8,5,8),t.add(127,8,5,8),t.addMany([156,27,24,26,7],8,6,0),t.addMany(n(28,32),8,0,8),t.addMany([88,94,95],1,0,7),t.addMany(s,7,0,7),t.addMany(r,7,0,7),t.add(156,7,0,0),t.add(127,7,0,7),t.add(91,1,11,3),t.addMany(n(64,127),3,7,0),t.addMany(n(48,60),3,8,4),t.addMany([60,61,62,63],3,9,4),t.addMany(n(48,60),4,8,4),t.addMany(n(64,127),4,7,0),t.addMany([60,61,62,63],4,0,6),t.addMany(n(32,64),6,0,6),t.add(127,6,0,6),t.addMany(n(64,127),6,0,0),t.addMany(n(32,48),3,9,5),t.addMany(n(32,48),5,9,5),t.addMany(n(48,64),5,0,6),t.addMany(n(64,127),5,7,0),t.addMany(n(32,48),4,9,5),t.addMany(n(32,48),1,9,2),t.addMany(n(32,48),2,9,2),t.addMany(n(48,127),2,10,0),t.addMany(n(48,80),1,10,0),t.addMany(n(81,88),1,10,0),t.addMany([89,90,92],1,10,0),t.addMany(n(96,127),1,10,0),t.add(80,1,11,9),t.addMany(r,9,0,9),t.add(127,9,0,9),t.addMany(n(28,32),9,0,9),t.addMany(n(32,48),9,9,12),t.addMany(n(48,60),9,8,10),t.addMany([60,61,62,63],9,9,10),t.addMany(r,11,0,11),t.addMany(n(32,128),11,0,11),t.addMany(n(28,32),11,0,11),t.addMany(r,10,0,10),t.add(127,10,0,10),t.addMany(n(28,32),10,0,10),t.addMany(n(48,60),10,8,10),t.addMany([60,61,62,63],10,0,11),t.addMany(n(32,48),10,9,12),t.addMany(r,12,0,12),t.add(127,12,0,12),t.addMany(n(28,32),12,0,12),t.addMany(n(32,48),12,9,12),t.addMany(n(48,64),12,0,11),t.addMany(n(64,127),12,12,13),t.addMany(n(64,127),10,12,13),t.addMany(n(64,127),9,12,13),t.addMany(r,13,13,13),t.addMany(s,13,13,13),t.add(127,13,0,13),t.addMany([27,156,24,26],13,14,0),t.add(Ar,0,2,0),t.add(Ar,8,5,8),t.add(Ar,6,0,6),t.add(Ar,11,0,11),t.add(Ar,13,13,13),t})(),JZ=class extends xt{constructor(t=XZ){super(),this._transitions=t,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new ED,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(e,n,s)=>{},this._executeHandlerFb=e=>{},this._csiHandlerFb=(e,n)=>{},this._escHandlerFb=e=>{},this._errorHandlerFb=e=>e,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this._register(sn(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this._register(new WZ),this._dcsParser=this._register(new GZ),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(t,e=[64,126]){let n=0;if(t.prefix){if(t.prefix.length>1)throw new Error("only one byte as prefix supported");if(n=t.prefix.charCodeAt(0),n&&60>n||n>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(t.intermediates){if(t.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let r=0;r<t.intermediates.length;++r){let i=t.intermediates.charCodeAt(r);if(32>i||i>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");n<<=8,n|=i}}if(t.final.length!==1)throw new Error("final must be a single byte");let s=t.final.charCodeAt(0);if(e[0]>s||s>e[1])throw new Error(`final must be in range ${e[0]} .. ${e[1]}`);return n<<=8,n|=s,n}identToString(t){let e=[];for(;t;)e.push(String.fromCharCode(t&255)),t>>=8;return e.reverse().join("")}setPrintHandler(t){this._printHandler=t}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(t,e){let n=this._identifier(t,[48,126]);this._escHandlers[n]===void 0&&(this._escHandlers[n]=[]);let s=this._escHandlers[n];return s.push(e),{dispose:()=>{let r=s.indexOf(e);r!==-1&&s.splice(r,1)}}}clearEscHandler(t){this._escHandlers[this._identifier(t,[48,126])]&&delete this._escHandlers[this._identifier(t,[48,126])]}setEscHandlerFallback(t){this._escHandlerFb=t}setExecuteHandler(t,e){this._executeHandlers[t.charCodeAt(0)]=e}clearExecuteHandler(t){this._executeHandlers[t.charCodeAt(0)]&&delete this._executeHandlers[t.charCodeAt(0)]}setExecuteHandlerFallback(t){this._executeHandlerFb=t}registerCsiHandler(t,e){let n=this._identifier(t);this._csiHandlers[n]===void 0&&(this._csiHandlers[n]=[]);let s=this._csiHandlers[n];return s.push(e),{dispose:()=>{let r=s.indexOf(e);r!==-1&&s.splice(r,1)}}}clearCsiHandler(t){this._csiHandlers[this._identifier(t)]&&delete this._csiHandlers[this._identifier(t)]}setCsiHandlerFallback(t){this._csiHandlerFb=t}registerDcsHandler(t,e){return this._dcsParser.registerHandler(this._identifier(t),e)}clearDcsHandler(t){this._dcsParser.clearHandler(this._identifier(t))}setDcsHandlerFallback(t){this._dcsParser.setHandlerFallback(t)}registerOscHandler(t,e){return this._oscParser.registerHandler(t,e)}clearOscHandler(t){this._oscParser.clearHandler(t)}setOscHandlerFallback(t){this._oscParser.setHandlerFallback(t)}setErrorHandler(t){this._errorHandler=t}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(t,e,n,s,r){this._parseStack.state=t,this._parseStack.handlers=e,this._parseStack.handlerPos=n,this._parseStack.transition=s,this._parseStack.chunkPos=r}parse(t,e,n){let s=0,r=0,i=0,o;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,i=this._parseStack.chunkPos+1;else{if(n===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let c=this._parseStack.handlers,d=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(n===!1&&d>-1){for(;d>=0&&(o=c[d](this._params),o!==!0);d--)if(o instanceof Promise)return this._parseStack.handlerPos=d,o}this._parseStack.handlers=[];break;case 4:if(n===!1&&d>-1){for(;d>=0&&(o=c[d](),o!==!0);d--)if(o instanceof Promise)return this._parseStack.handlerPos=d,o}this._parseStack.handlers=[];break;case 6:if(s=t[this._parseStack.chunkPos],o=this._dcsParser.unhook(s!==24&&s!==26,n),o)return o;s===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(s=t[this._parseStack.chunkPos],o=this._oscParser.end(s!==24&&s!==26,n),o)return o;s===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break}this._parseStack.state=0,i=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=this._parseStack.transition&15}for(let c=i;c<e;++c){switch(s=t[c],r=this._transitions.table[this.currentState<<8|(s<160?s:Ar)],r>>4){case 2:for(let b=c+1;;++b){if(b>=e||(s=t[b])<32||s>126&&s<Ar){this._printHandler(t,c,b),c=b-1;break}if(++b>=e||(s=t[b])<32||s>126&&s<Ar){this._printHandler(t,c,b),c=b-1;break}if(++b>=e||(s=t[b])<32||s>126&&s<Ar){this._printHandler(t,c,b),c=b-1;break}if(++b>=e||(s=t[b])<32||s>126&&s<Ar){this._printHandler(t,c,b),c=b-1;break}}break;case 3:this._executeHandlers[s]?this._executeHandlers[s]():this._executeHandlerFb(s),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:c,code:s,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let d=this._csiHandlers[this._collect<<8|s],h=d?d.length-1:-1;for(;h>=0&&(o=d[h](this._params),o!==!0);h--)if(o instanceof Promise)return this._preserveStack(3,d,h,r,c),o;h<0&&this._csiHandlerFb(this._collect<<8|s,this._params),this.precedingJoinState=0;break;case 8:do switch(s){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(s-48)}while(++c<e&&(s=t[c])>47&&s<60);c--;break;case 9:this._collect<<=8,this._collect|=s;break;case 10:let g=this._escHandlers[this._collect<<8|s],m=g?g.length-1:-1;for(;m>=0&&(o=g[m](),o!==!0);m--)if(o instanceof Promise)return this._preserveStack(4,g,m,r,c),o;m<0&&this._escHandlerFb(this._collect<<8|s),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|s,this._params);break;case 13:for(let b=c+1;;++b)if(b>=e||(s=t[b])===24||s===26||s===27||s>127&&s<Ar){this._dcsParser.put(t,c,b),c=b-1;break}break;case 14:if(o=this._dcsParser.unhook(s!==24&&s!==26),o)return this._preserveStack(6,[],0,r,c),o;s===27&&(r|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let b=c+1;;b++)if(b>=e||(s=t[b])<32||s>127&&s<Ar){this._oscParser.put(t,c,b),c=b-1;break}break;case 6:if(o=this._oscParser.end(s!==24&&s!==26),o)return this._preserveStack(5,[],0,r,c),o;s===27&&(r|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break}this.currentState=r&15}}},QZ=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,ZZ=/^[\da-f]+$/;function Vj(t){if(!t)return;let e=t.toLowerCase();if(e.indexOf("rgb:")===0){e=e.slice(4);let n=QZ.exec(e);if(n){let s=n[1]?15:n[4]?255:n[7]?4095:65535;return[Math.round(parseInt(n[1]||n[4]||n[7]||n[10],16)/s*255),Math.round(parseInt(n[2]||n[5]||n[8]||n[11],16)/s*255),Math.round(parseInt(n[3]||n[6]||n[9]||n[12],16)/s*255)]}}else if(e.indexOf("#")===0&&(e=e.slice(1),ZZ.exec(e)&&[3,6,9,12].includes(e.length))){let n=e.length/3,s=[0,0,0];for(let r=0;r<3;++r){let i=parseInt(e.slice(n*r,n*r+n),16);s[r]=n===1?i<<4:n===2?i:n===3?i>>4:i>>8}return s}}function kx(t,e){let n=t.toString(16),s=n.length<2?"0"+n:n;switch(e){case 4:return n[0];case 8:return s;case 12:return(s+s).slice(0,3);default:return s+s}}function eee(t,e=16){let[n,s,r]=t;return`rgb:${kx(n,e)}/${kx(s,e)}/${kx(r,e)}`}var tee={"(":0,")":1,"*":2,"+":3,"-":1,".":2},Ga=131072,Fj=10;function qj(t,e){if(t>24)return e.setWinLines||!1;switch(t){case 1:return!!e.restoreWin;case 2:return!!e.minimizeWin;case 3:return!!e.setWinPosition;case 4:return!!e.setWinSizePixels;case 5:return!!e.raiseWin;case 6:return!!e.lowerWin;case 7:return!!e.refreshWin;case 8:return!!e.setWinSizeChars;case 9:return!!e.maximizeWin;case 10:return!!e.fullscreenWin;case 11:return!!e.getWinState;case 13:return!!e.getWinPosition;case 14:return!!e.getWinSizePixels;case 15:return!!e.getScreenSizePixels;case 16:return!!e.getCellSizePixels;case 18:return!!e.getWinSizeChars;case 19:return!!e.getScreenSizeChars;case 20:return!!e.getIconTitle;case 21:return!!e.getWinTitle;case 22:return!!e.pushTitle;case 23:return!!e.popTitle;case 24:return!!e.setWinLines}return!1}var Kj=5e3,Wj=0,nee=class extends xt{constructor(t,e,n,s,r,i,o,c,d=new JZ){super(),this._bufferService=t,this._charsetService=e,this._coreService=n,this._logService=s,this._optionsService=r,this._oscLinkService=i,this._coreMouseService=o,this._unicodeService=c,this._parser=d,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new _J,this._utf8Decoder=new wJ,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=Nn.clone(),this._eraseAttrDataInternal=Nn.clone(),this._onRequestBell=this._register(new je),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this._register(new je),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this._register(new je),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this._register(new je),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this._register(new je),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this._register(new je),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this._register(new je),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this._register(new je),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this._register(new je),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this._register(new je),this.onLineFeed=this._onLineFeed.event,this._onScroll=this._register(new je),this.onScroll=this._onScroll.event,this._onTitleChange=this._register(new je),this.onTitleChange=this._onTitleChange.event,this._onColor=this._register(new je),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this._register(this._parser),this._dirtyRowTracker=new hS(this._bufferService),this._activeBuffer=this._bufferService.buffer,this._register(this._bufferService.buffers.onBufferActivate(h=>this._activeBuffer=h.activeBuffer)),this._parser.setCsiHandlerFallback((h,g)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(h),params:g.toArray()})}),this._parser.setEscHandlerFallback(h=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(h)})}),this._parser.setExecuteHandlerFallback(h=>{this._logService.debug("Unknown EXECUTE code: ",{code:h})}),this._parser.setOscHandlerFallback((h,g,m)=>{this._logService.debug("Unknown OSC code: ",{identifier:h,action:g,data:m})}),this._parser.setDcsHandlerFallback((h,g,m)=>{g==="HOOK"&&(m=m.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(h),action:g,payload:m})}),this._parser.setPrintHandler((h,g,m)=>this.print(h,g,m)),this._parser.registerCsiHandler({final:"@"},h=>this.insertChars(h)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},h=>this.scrollLeft(h)),this._parser.registerCsiHandler({final:"A"},h=>this.cursorUp(h)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},h=>this.scrollRight(h)),this._parser.registerCsiHandler({final:"B"},h=>this.cursorDown(h)),this._parser.registerCsiHandler({final:"C"},h=>this.cursorForward(h)),this._parser.registerCsiHandler({final:"D"},h=>this.cursorBackward(h)),this._parser.registerCsiHandler({final:"E"},h=>this.cursorNextLine(h)),this._parser.registerCsiHandler({final:"F"},h=>this.cursorPrecedingLine(h)),this._parser.registerCsiHandler({final:"G"},h=>this.cursorCharAbsolute(h)),this._parser.registerCsiHandler({final:"H"},h=>this.cursorPosition(h)),this._parser.registerCsiHandler({final:"I"},h=>this.cursorForwardTab(h)),this._parser.registerCsiHandler({final:"J"},h=>this.eraseInDisplay(h,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},h=>this.eraseInDisplay(h,!0)),this._parser.registerCsiHandler({final:"K"},h=>this.eraseInLine(h,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},h=>this.eraseInLine(h,!0)),this._parser.registerCsiHandler({final:"L"},h=>this.insertLines(h)),this._parser.registerCsiHandler({final:"M"},h=>this.deleteLines(h)),this._parser.registerCsiHandler({final:"P"},h=>this.deleteChars(h)),this._parser.registerCsiHandler({final:"S"},h=>this.scrollUp(h)),this._parser.registerCsiHandler({final:"T"},h=>this.scrollDown(h)),this._parser.registerCsiHandler({final:"X"},h=>this.eraseChars(h)),this._parser.registerCsiHandler({final:"Z"},h=>this.cursorBackwardTab(h)),this._parser.registerCsiHandler({final:"`"},h=>this.charPosAbsolute(h)),this._parser.registerCsiHandler({final:"a"},h=>this.hPositionRelative(h)),this._parser.registerCsiHandler({final:"b"},h=>this.repeatPrecedingCharacter(h)),this._parser.registerCsiHandler({final:"c"},h=>this.sendDeviceAttributesPrimary(h)),this._parser.registerCsiHandler({prefix:">",final:"c"},h=>this.sendDeviceAttributesSecondary(h)),this._parser.registerCsiHandler({final:"d"},h=>this.linePosAbsolute(h)),this._parser.registerCsiHandler({final:"e"},h=>this.vPositionRelative(h)),this._parser.registerCsiHandler({final:"f"},h=>this.hVPosition(h)),this._parser.registerCsiHandler({final:"g"},h=>this.tabClear(h)),this._parser.registerCsiHandler({final:"h"},h=>this.setMode(h)),this._parser.registerCsiHandler({prefix:"?",final:"h"},h=>this.setModePrivate(h)),this._parser.registerCsiHandler({final:"l"},h=>this.resetMode(h)),this._parser.registerCsiHandler({prefix:"?",final:"l"},h=>this.resetModePrivate(h)),this._parser.registerCsiHandler({final:"m"},h=>this.charAttributes(h)),this._parser.registerCsiHandler({final:"n"},h=>this.deviceStatus(h)),this._parser.registerCsiHandler({prefix:"?",final:"n"},h=>this.deviceStatusPrivate(h)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},h=>this.softReset(h)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},h=>this.setCursorStyle(h)),this._parser.registerCsiHandler({final:"r"},h=>this.setScrollRegion(h)),this._parser.registerCsiHandler({final:"s"},h=>this.saveCursor(h)),this._parser.registerCsiHandler({final:"t"},h=>this.windowOptions(h)),this._parser.registerCsiHandler({final:"u"},h=>this.restoreCursor(h)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},h=>this.insertColumns(h)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},h=>this.deleteColumns(h)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},h=>this.selectProtected(h)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},h=>this.requestMode(h,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},h=>this.requestMode(h,!1)),this._parser.setExecuteHandler(ve.BEL,()=>this.bell()),this._parser.setExecuteHandler(ve.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(ve.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(ve.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(ve.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(ve.BS,()=>this.backspace()),this._parser.setExecuteHandler(ve.HT,()=>this.tab()),this._parser.setExecuteHandler(ve.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(ve.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(d0.IND,()=>this.index()),this._parser.setExecuteHandler(d0.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(d0.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new tr(h=>(this.setTitle(h),this.setIconName(h),!0))),this._parser.registerOscHandler(1,new tr(h=>this.setIconName(h))),this._parser.registerOscHandler(2,new tr(h=>this.setTitle(h))),this._parser.registerOscHandler(4,new tr(h=>this.setOrReportIndexedColor(h))),this._parser.registerOscHandler(8,new tr(h=>this.setHyperlink(h))),this._parser.registerOscHandler(10,new tr(h=>this.setOrReportFgColor(h))),this._parser.registerOscHandler(11,new tr(h=>this.setOrReportBgColor(h))),this._parser.registerOscHandler(12,new tr(h=>this.setOrReportCursorColor(h))),this._parser.registerOscHandler(104,new tr(h=>this.restoreIndexedColor(h))),this._parser.registerOscHandler(110,new tr(h=>this.restoreFgColor(h))),this._parser.registerOscHandler(111,new tr(h=>this.restoreBgColor(h))),this._parser.registerOscHandler(112,new tr(h=>this.restoreCursorColor(h))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let h in In)this._parser.registerEscHandler({intermediates:"(",final:h},()=>this.selectCharset("("+h)),this._parser.registerEscHandler({intermediates:")",final:h},()=>this.selectCharset(")"+h)),this._parser.registerEscHandler({intermediates:"*",final:h},()=>this.selectCharset("*"+h)),this._parser.registerEscHandler({intermediates:"+",final:h},()=>this.selectCharset("+"+h)),this._parser.registerEscHandler({intermediates:"-",final:h},()=>this.selectCharset("-"+h)),this._parser.registerEscHandler({intermediates:".",final:h},()=>this.selectCharset("."+h)),this._parser.registerEscHandler({intermediates:"/",final:h},()=>this.selectCharset("/"+h));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(h=>(this._logService.error("Parsing error: ",h),h)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new Uj((h,g)=>this.requestStatusString(h,g)))}getAttrData(){return this._curAttrData}_preserveStack(t,e,n,s){this._parseStack.paused=!0,this._parseStack.cursorStartX=t,this._parseStack.cursorStartY=e,this._parseStack.decodedLength=n,this._parseStack.position=s}_logSlowResolvingAsync(t){this._logService.logLevel<=3&&Promise.race([t,new Promise((e,n)=>setTimeout(()=>n("#SLOW_TIMEOUT"),Kj))]).catch(e=>{if(e!=="#SLOW_TIMEOUT")throw e;console.warn(`async parser handler taking longer than ${Kj} ms`)})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(t,e){let n,s=this._activeBuffer.x,r=this._activeBuffer.y,i=0,o=this._parseStack.paused;if(o){if(n=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,e))return this._logSlowResolvingAsync(n),n;s=this._parseStack.cursorStartX,r=this._parseStack.cursorStartY,this._parseStack.paused=!1,t.length>Ga&&(i=this._parseStack.position+Ga)}if(this._logService.logLevel<=1&&this._logService.debug(`parsing data ${typeof t=="string"?` "${t}"`:` "${Array.prototype.map.call(t,h=>String.fromCharCode(h)).join("")}"`}`),this._logService.logLevel===0&&this._logService.trace("parsing data (codes)",typeof t=="string"?t.split("").map(h=>h.charCodeAt(0)):t),this._parseBuffer.length<t.length&&this._parseBuffer.length<Ga&&(this._parseBuffer=new Uint32Array(Math.min(t.length,Ga))),o||this._dirtyRowTracker.clearRange(),t.length>Ga)for(let h=i;h<t.length;h+=Ga){let g=h+Ga<t.length?h+Ga:t.length,m=typeof t=="string"?this._stringDecoder.decode(t.substring(h,g),this._parseBuffer):this._utf8Decoder.decode(t.subarray(h,g),this._parseBuffer);if(n=this._parser.parse(this._parseBuffer,m))return this._preserveStack(s,r,m,h),this._logSlowResolvingAsync(n),n}else if(!o){let h=typeof t=="string"?this._stringDecoder.decode(t,this._parseBuffer):this._utf8Decoder.decode(t,this._parseBuffer);if(n=this._parser.parse(this._parseBuffer,h))return this._preserveStack(s,r,h,0),this._logSlowResolvingAsync(n),n}(this._activeBuffer.x!==s||this._activeBuffer.y!==r)&&this._onCursorMove.fire();let c=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),d=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);d<this._bufferService.rows&&this._onRequestRefreshRows.fire({start:Math.min(d,this._bufferService.rows-1),end:Math.min(c,this._bufferService.rows-1)})}print(t,e,n){let s,r,i=this._charsetService.charset,o=this._optionsService.rawOptions.screenReaderMode,c=this._bufferService.cols,d=this._coreService.decPrivateModes.wraparound,h=this._coreService.modes.insertMode,g=this._curAttrData,m=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&n-e>0&&m.getWidth(this._activeBuffer.x-1)===2&&m.setCellFromCodepoint(this._activeBuffer.x-1,0,1,g);let b=this._parser.precedingJoinState;for(let y=e;y<n;++y){if(s=t[y],s<127&&i){let k=i[String.fromCharCode(s)];k&&(s=k.charCodeAt(0))}let w=this._unicodeService.charProperties(s,b);r=Wo.extractWidth(w);let x=Wo.extractShouldJoin(w),S=x?Wo.extractWidth(b):0;if(b=w,o&&this._onA11yChar.fire(Xa(s)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+r-S>c){if(d){let k=m,C=this._activeBuffer.x-S;for(this._activeBuffer.x=S,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),m=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),S>0&&m instanceof wd&&m.copyCellsFrom(k,C,0,S,!1);C<c;)k.setCellFromCodepoint(C++,0,1,g)}else if(this._activeBuffer.x=c-1,r===2)continue}if(x&&this._activeBuffer.x){let k=m.getWidth(this._activeBuffer.x-1)?1:2;m.addCodepointToCell(this._activeBuffer.x-k,s,r);for(let C=r-S;--C>=0;)m.setCellFromCodepoint(this._activeBuffer.x++,0,0,g);continue}if(h&&(m.insertCells(this._activeBuffer.x,r-S,this._activeBuffer.getNullCell(g)),m.getWidth(c-1)===2&&m.setCellFromCodepoint(c-1,0,1,g)),m.setCellFromCodepoint(this._activeBuffer.x++,s,r,g),r>0)for(;--r;)m.setCellFromCodepoint(this._activeBuffer.x++,0,0,g)}this._parser.precedingJoinState=b,this._activeBuffer.x<c&&n-e>0&&m.getWidth(this._activeBuffer.x)===0&&!m.hasContent(this._activeBuffer.x)&&m.setCellFromCodepoint(this._activeBuffer.x,0,1,g),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(t,e){return t.final==="t"&&!t.prefix&&!t.intermediates?this._parser.registerCsiHandler(t,n=>qj(n.params[0],this._optionsService.rawOptions.windowOptions)?e(n):!0):this._parser.registerCsiHandler(t,e)}registerDcsHandler(t,e){return this._parser.registerDcsHandler(t,new Uj(e))}registerEscHandler(t,e){return this._parser.registerEscHandler(t,e)}registerOscHandler(t,e){return this._parser.registerOscHandler(t,new tr(e))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);t.hasWidth(this._activeBuffer.x)&&!t.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-t),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(t=this._bufferService.cols-1){this._activeBuffer.x=Math.min(t,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(t,e){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=t,this._activeBuffer.y=this._activeBuffer.scrollTop+e):(this._activeBuffer.x=t,this._activeBuffer.y=e),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(t,e){this._restrictCursor(),this._setCursor(this._activeBuffer.x+t,this._activeBuffer.y+e)}cursorUp(t){let e=this._activeBuffer.y-this._activeBuffer.scrollTop;return e>=0?this._moveCursor(0,-Math.min(e,t.params[0]||1)):this._moveCursor(0,-(t.params[0]||1)),!0}cursorDown(t){let e=this._activeBuffer.scrollBottom-this._activeBuffer.y;return e>=0?this._moveCursor(0,Math.min(e,t.params[0]||1)):this._moveCursor(0,t.params[0]||1),!0}cursorForward(t){return this._moveCursor(t.params[0]||1,0),!0}cursorBackward(t){return this._moveCursor(-(t.params[0]||1),0),!0}cursorNextLine(t){return this.cursorDown(t),this._activeBuffer.x=0,!0}cursorPrecedingLine(t){return this.cursorUp(t),this._activeBuffer.x=0,!0}cursorCharAbsolute(t){return this._setCursor((t.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(t){return this._setCursor(t.length>=2?(t.params[1]||1)-1:0,(t.params[0]||1)-1),!0}charPosAbsolute(t){return this._setCursor((t.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(t){return this._moveCursor(t.params[0]||1,0),!0}linePosAbsolute(t){return this._setCursor(this._activeBuffer.x,(t.params[0]||1)-1),!0}vPositionRelative(t){return this._moveCursor(0,t.params[0]||1),!0}hVPosition(t){return this.cursorPosition(t),!0}tabClear(t){let e=t.params[0];return e===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:e===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(t){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let e=t.params[0]||1;for(;e--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(t){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let e=t.params[0]||1;for(;e--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(t){let e=t.params[0];return e===1&&(this._curAttrData.bg|=536870912),(e===2||e===0)&&(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(t,e,n,s=!1,r=!1){let i=this._activeBuffer.lines.get(this._activeBuffer.ybase+t);i.replaceCells(e,n,this._activeBuffer.getNullCell(this._eraseAttrData()),r),s&&(i.isWrapped=!1)}_resetBufferLine(t,e=!1){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+t);n&&(n.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),e),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+t),n.isWrapped=!1)}eraseInDisplay(t,e=!1){this._restrictCursor(this._bufferService.cols);let n;switch(t.params[0]){case 0:for(n=this._activeBuffer.y,this._dirtyRowTracker.markDirty(n),this._eraseInBufferLine(n++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,e);n<this._bufferService.rows;n++)this._resetBufferLine(n,e);this._dirtyRowTracker.markDirty(n);break;case 1:for(n=this._activeBuffer.y,this._dirtyRowTracker.markDirty(n),this._eraseInBufferLine(n,0,this._activeBuffer.x+1,!0,e),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(n+1).isWrapped=!1);n--;)this._resetBufferLine(n,e);this._dirtyRowTracker.markDirty(0);break;case 2:if(this._optionsService.rawOptions.scrollOnEraseInDisplay){for(n=this._bufferService.rows,this._dirtyRowTracker.markRangeDirty(0,n-1);n--&&!this._activeBuffer.lines.get(this._activeBuffer.ybase+n)?.getTrimmedLength(););for(;n>=0;n--)this._bufferService.scroll(this._eraseAttrData())}else{for(n=this._bufferService.rows,this._dirtyRowTracker.markDirty(n-1);n--;)this._resetBufferLine(n,e);this._dirtyRowTracker.markDirty(0)}break;case 3:let s=this._activeBuffer.lines.length-this._bufferService.rows;s>0&&(this._activeBuffer.lines.trimStart(s),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-s,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-s,0),this._onScroll.fire(0));break}return!0}eraseInLine(t,e=!1){switch(this._restrictCursor(this._bufferService.cols),t.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,e);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,e);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,e);break}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(t){this._restrictCursor();let e=t.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let n=this._activeBuffer.ybase+this._activeBuffer.y,s=this._bufferService.rows-1-this._activeBuffer.scrollBottom,r=this._bufferService.rows-1+this._activeBuffer.ybase-s+1;for(;e--;)this._activeBuffer.lines.splice(r-1,1),this._activeBuffer.lines.splice(n,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(t){this._restrictCursor();let e=t.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let n=this._activeBuffer.ybase+this._activeBuffer.y,s;for(s=this._bufferService.rows-1-this._activeBuffer.scrollBottom,s=this._bufferService.rows-1+this._activeBuffer.ybase-s;e--;)this._activeBuffer.lines.splice(n,1),this._activeBuffer.lines.splice(s,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(t){this._restrictCursor();let e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return e&&(e.insertCells(this._activeBuffer.x,t.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(t){this._restrictCursor();let e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return e&&(e.deleteCells(this._activeBuffer.x,t.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(t){let e=t.params[0]||1;for(;e--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(t){let e=t.params[0]||1;for(;e--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(Nn));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(t){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let e=t.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);s.deleteCells(0,e,this._activeBuffer.getNullCell(this._eraseAttrData())),s.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(t){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let e=t.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);s.insertCells(0,e,this._activeBuffer.getNullCell(this._eraseAttrData())),s.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(t){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let e=t.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);s.insertCells(this._activeBuffer.x,e,this._activeBuffer.getNullCell(this._eraseAttrData())),s.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(t){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let e=t.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);s.deleteCells(this._activeBuffer.x,e,this._activeBuffer.getNullCell(this._eraseAttrData())),s.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(t){this._restrictCursor();let e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return e&&(e.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(t.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(t){let e=this._parser.precedingJoinState;if(!e)return!0;let n=t.params[0]||1,s=Wo.extractWidth(e),r=this._activeBuffer.x-s,i=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(r),o=new Uint32Array(i.length*n),c=0;for(let h=0;h<i.length;){let g=i.codePointAt(h)||0;o[c++]=g,h+=g>65535?2:1}let d=c;for(let h=1;h<n;++h)o.copyWithin(d,0,c),d+=c;return this.print(o,0,d),!0}sendDeviceAttributesPrimary(t){return t.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(ve.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(ve.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(t){return t.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(ve.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(ve.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(t.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(ve.ESC+"[>83;40003;0c")),!0}_is(t){return(this._optionsService.rawOptions.termName+"").indexOf(t)===0}setMode(t){for(let e=0;e<t.length;e++)switch(t.params[e]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0;break}return!0}setModePrivate(t){for(let e=0;e<t.length;e++)switch(t.params[e]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,$o),this._charsetService.setgCharset(1,$o),this._charsetService.setgCharset(2,$o),this._charsetService.setgCharset(3,$o);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!0;break}return!0}resetMode(t){for(let e=0;e<t.length;e++)switch(t.params[e]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1;break}return!0}resetModePrivate(t){for(let e=0;e<t.length;e++)switch(t.params[e]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),t.params[e]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!1,this._onRequestRefreshRows.fire(void 0);break}return!0}requestMode(t,e){let n;(x=>(x[x.NOT_RECOGNIZED=0]="NOT_RECOGNIZED",x[x.SET=1]="SET",x[x.RESET=2]="RESET",x[x.PERMANENTLY_SET=3]="PERMANENTLY_SET",x[x.PERMANENTLY_RESET=4]="PERMANENTLY_RESET"))(n||={});let s=this._coreService.decPrivateModes,{activeProtocol:r,activeEncoding:i}=this._coreMouseService,o=this._coreService,{buffers:c,cols:d}=this._bufferService,{active:h,alt:g}=c,m=this._optionsService.rawOptions,b=(x,S)=>(o.triggerDataEvent(`${ve.ESC}[${e?"":"?"}${x};${S}$y`),!0),y=x=>x?1:2,w=t.params[0];return e?w===2?b(w,4):w===4?b(w,y(o.modes.insertMode)):w===12?b(w,3):w===20?b(w,y(m.convertEol)):b(w,0):w===1?b(w,y(s.applicationCursorKeys)):w===3?b(w,m.windowOptions.setWinLines?d===80?2:d===132?1:0:0):w===6?b(w,y(s.origin)):w===7?b(w,y(s.wraparound)):w===8?b(w,3):w===9?b(w,y(r==="X10")):w===12?b(w,y(m.cursorBlink)):w===25?b(w,y(!o.isCursorHidden)):w===45?b(w,y(s.reverseWraparound)):w===66?b(w,y(s.applicationKeypad)):w===67?b(w,4):w===1e3?b(w,y(r==="VT200")):w===1002?b(w,y(r==="DRAG")):w===1003?b(w,y(r==="ANY")):w===1004?b(w,y(s.sendFocus)):w===1005?b(w,4):w===1006?b(w,y(i==="SGR")):w===1015?b(w,4):w===1016?b(w,y(i==="SGR_PIXELS")):w===1048?b(w,1):w===47||w===1047||w===1049?b(w,y(h===g)):w===2004?b(w,y(s.bracketedPasteMode)):w===2026?b(w,y(s.synchronizedOutput)):b(w,0)}_updateAttrColor(t,e,n,s,r){return e===2?(t|=50331648,t&=-16777216,t|=Kf.fromColorRGB([n,s,r])):e===5&&(t&=-50331904,t|=33554432|n&255),t}_extractColor(t,e,n){let s=[0,0,-1,0,0,0],r=0,i=0;do{if(s[i+r]=t.params[e+i],t.hasSubParams(e+i)){let o=t.getSubParams(e+i),c=0;do s[1]===5&&(r=1),s[i+c+1+r]=o[c];while(++c<o.length&&c+i+1+r<s.length);break}if(s[1]===5&&i+r>=2||s[1]===2&&i+r>=5)break;s[1]&&(r=1)}while(++i+e<t.length&&i+r<s.length);for(let o=2;o<s.length;++o)s[o]===-1&&(s[o]=0);switch(s[0]){case 38:n.fg=this._updateAttrColor(n.fg,s[1],s[3],s[4],s[5]);break;case 48:n.bg=this._updateAttrColor(n.bg,s[1],s[3],s[4],s[5]);break;case 58:n.extended=n.extended.clone(),n.extended.underlineColor=this._updateAttrColor(n.extended.underlineColor,s[1],s[3],s[4],s[5])}return i}_processUnderline(t,e){e.extended=e.extended.clone(),(!~t||t>5)&&(t=1),e.extended.underlineStyle=t,e.fg|=268435456,t===0&&(e.fg&=-268435457),e.updateExtended()}_processSGR0(t){t.fg=Nn.fg,t.bg=Nn.bg,t.extended=t.extended.clone(),t.extended.underlineStyle=0,t.extended.underlineColor&=-67108864,t.updateExtended()}charAttributes(t){if(t.length===1&&t.params[0]===0)return this._processSGR0(this._curAttrData),!0;let e=t.length,n,s=this._curAttrData;for(let r=0;r<e;r++)n=t.params[r],n>=30&&n<=37?(s.fg&=-50331904,s.fg|=16777216|n-30):n>=40&&n<=47?(s.bg&=-50331904,s.bg|=16777216|n-40):n>=90&&n<=97?(s.fg&=-50331904,s.fg|=16777216|n-90|8):n>=100&&n<=107?(s.bg&=-50331904,s.bg|=16777216|n-100|8):n===0?this._processSGR0(s):n===1?s.fg|=134217728:n===3?s.bg|=67108864:n===4?(s.fg|=268435456,this._processUnderline(t.hasSubParams(r)?t.getSubParams(r)[0]:1,s)):n===5?s.fg|=536870912:n===7?s.fg|=67108864:n===8?s.fg|=1073741824:n===9?s.fg|=2147483648:n===2?s.bg|=134217728:n===21?this._processUnderline(2,s):n===22?(s.fg&=-134217729,s.bg&=-134217729):n===23?s.bg&=-67108865:n===24?(s.fg&=-268435457,this._processUnderline(0,s)):n===25?s.fg&=-536870913:n===27?s.fg&=-67108865:n===28?s.fg&=-1073741825:n===29?s.fg&=2147483647:n===39?(s.fg&=-67108864,s.fg|=Nn.fg&16777215):n===49?(s.bg&=-67108864,s.bg|=Nn.bg&16777215):n===38||n===48||n===58?r+=this._extractColor(t,r,s):n===53?s.bg|=1073741824:n===55?s.bg&=-1073741825:n===59?(s.extended=s.extended.clone(),s.extended.underlineColor=-1,s.updateExtended()):n===100?(s.fg&=-67108864,s.fg|=Nn.fg&16777215,s.bg&=-67108864,s.bg|=Nn.bg&16777215):this._logService.debug("Unknown SGR attribute: %d.",n);return!0}deviceStatus(t){switch(t.params[0]){case 5:this._coreService.triggerDataEvent(`${ve.ESC}[0n`);break;case 6:let e=this._activeBuffer.y+1,n=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${ve.ESC}[${e};${n}R`);break}return!0}deviceStatusPrivate(t){if(t.params[0]===6){let e=this._activeBuffer.y+1,n=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${ve.ESC}[?${e};${n}R`)}return!0}softReset(t){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=Nn.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(t){let e=t.length===0?1:t.params[0];if(e===0)this._coreService.decPrivateModes.cursorStyle=void 0,this._coreService.decPrivateModes.cursorBlink=void 0;else{switch(e){case 1:case 2:this._coreService.decPrivateModes.cursorStyle="block";break;case 3:case 4:this._coreService.decPrivateModes.cursorStyle="underline";break;case 5:case 6:this._coreService.decPrivateModes.cursorStyle="bar";break}let n=e%2===1;this._coreService.decPrivateModes.cursorBlink=n}return!0}setScrollRegion(t){let e=t.params[0]||1,n;return(t.length<2||(n=t.params[1])>this._bufferService.rows||n===0)&&(n=this._bufferService.rows),n>e&&(this._activeBuffer.scrollTop=e-1,this._activeBuffer.scrollBottom=n-1,this._setCursor(0,0)),!0}windowOptions(t){if(!qj(t.params[0],this._optionsService.rawOptions.windowOptions))return!0;let e=t.length>1?t.params[1]:0;switch(t.params[0]){case 14:e!==2&&this._onRequestWindowsOptionsReport.fire(0);break;case 16:this._onRequestWindowsOptionsReport.fire(1);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${ve.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:(e===0||e===2)&&(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>Fj&&this._windowTitleStack.shift()),(e===0||e===1)&&(this._iconNameStack.push(this._iconName),this._iconNameStack.length>Fj&&this._iconNameStack.shift());break;case 23:(e===0||e===2)&&this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),(e===0||e===1)&&this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop());break}return!0}saveCursor(t){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(t){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(t){return this._windowTitle=t,this._onTitleChange.fire(t),!0}setIconName(t){return this._iconName=t,!0}setOrReportIndexedColor(t){let e=[],n=t.split(";");for(;n.length>1;){let s=n.shift(),r=n.shift();if(/^\d+$/.exec(s)){let i=parseInt(s);if(Gj(i))if(r==="?")e.push({type:0,index:i});else{let o=Vj(r);o&&e.push({type:1,index:i,color:o})}}}return e.length&&this._onColor.fire(e),!0}setHyperlink(t){let e=t.indexOf(";");if(e===-1)return!0;let n=t.slice(0,e).trim(),s=t.slice(e+1);return s?this._createHyperlink(n,s):n.trim()?!1:this._finishHyperlink()}_createHyperlink(t,e){this._getCurrentLinkId()&&this._finishHyperlink();let n=t.split(":"),s,r=n.findIndex(i=>i.startsWith("id="));return r!==-1&&(s=n[r].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:s,uri:e}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(t,e){let n=t.split(";");for(let s=0;s<n.length&&!(e>=this._specialColors.length);++s,++e)if(n[s]==="?")this._onColor.fire([{type:0,index:this._specialColors[e]}]);else{let r=Vj(n[s]);r&&this._onColor.fire([{type:1,index:this._specialColors[e],color:r}])}return!0}setOrReportFgColor(t){return this._setOrReportSpecialColor(t,0)}setOrReportBgColor(t){return this._setOrReportSpecialColor(t,1)}setOrReportCursorColor(t){return this._setOrReportSpecialColor(t,2)}restoreIndexedColor(t){if(!t)return this._onColor.fire([{type:2}]),!0;let e=[],n=t.split(";");for(let s=0;s<n.length;++s)if(/^\d+$/.exec(n[s])){let r=parseInt(n[s]);Gj(r)&&e.push({type:2,index:r})}return e.length&&this._onColor.fire(e),!0}restoreFgColor(t){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(t){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(t){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,$o),!0}selectCharset(t){return t.length!==2?(this.selectDefaultCharset(),!0):(t[0]==="/"||this._charsetService.setgCharset(tee[t[0]],In[t[1]]||$o),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let t=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,t,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=Nn.clone(),this._eraseAttrDataInternal=Nn.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=this._curAttrData.bg&67108863,this._eraseAttrDataInternal}setgLevel(t){return this._charsetService.setgLevel(t),!0}screenAlignmentPattern(){let t=new Mr;t.content=1<<22|69,t.fg=this._curAttrData.fg,t.bg=this._curAttrData.bg,this._setCursor(0,0);for(let e=0;e<this._bufferService.rows;++e){let n=this._activeBuffer.ybase+this._activeBuffer.y+e,s=this._activeBuffer.lines.get(n);s&&(s.fill(t),s.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(t,e){let n=o=>(this._coreService.triggerDataEvent(`${ve.ESC}${o}${ve.ESC}\\`),!0),s=this._bufferService.buffer,r=this._optionsService.rawOptions;return n(t==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:t==='"p'?'P1$r61;1"p':t==="r"?`P1$r${s.scrollTop+1};${s.scrollBottom+1}r`:t==="m"?"P1$r0m":t===" q"?`P1$r${{block:2,underline:4,bar:6}[r.cursorStyle]-(r.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(t,e){this._dirtyRowTracker.markRangeDirty(t,e)}},hS=class{constructor(t){this._bufferService=t,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(t){t<this.start?this.start=t:t>this.end&&(this.end=t)}markRangeDirty(t,e){t>e&&(Wj=t,t=e,e=Wj),t<this.start&&(this.start=t),e>this.end&&(this.end=e)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};hS=fn([Le(0,Es)],hS);function Gj(t){return 0<=t&&t<256}var see=5e7,Yj=12,ree=50,iee=class extends xt{constructor(t){super(),this._action=t,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this._register(new je),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(t,e){if(e!==void 0&&this._syncCalls>e){this._syncCalls=0;return}if(this._pendingData+=t.length,this._writeBuffer.push(t),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;this._isSyncWriting=!0;let n;for(;n=this._writeBuffer.shift();){this._action(n);let s=this._callbacks.shift();s&&s()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(t,e){if(this._pendingData>see)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput){this._didUserInput=!1,this._pendingData+=t.length,this._writeBuffer.push(t),this._callbacks.push(e),this._innerWrite();return}setTimeout(()=>this._innerWrite())}this._pendingData+=t.length,this._writeBuffer.push(t),this._callbacks.push(e)}_innerWrite(t=0,e=!0){let n=t||performance.now();for(;this._writeBuffer.length>this._bufferOffset;){let s=this._writeBuffer[this._bufferOffset],r=this._action(s,e);if(r){let o=c=>performance.now()-n>=Yj?setTimeout(()=>this._innerWrite(0,c)):this._innerWrite(n,c);r.catch(c=>(queueMicrotask(()=>{throw c}),Promise.resolve(!1))).then(o);return}let i=this._callbacks[this._bufferOffset];if(i&&i(),this._bufferOffset++,this._pendingData-=s.length,performance.now()-n>=Yj)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>ree&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}},dS=class{constructor(t){this._bufferService=t,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(t){let e=this._bufferService.buffer;if(t.id===void 0){let c=e.addMarker(e.ybase+e.y),d={data:t,id:this._nextId++,lines:[c]};return c.onDispose(()=>this._removeMarkerFromLink(d,c)),this._dataByLinkId.set(d.id,d),d.id}let n=t,s=this._getEntryIdKey(n),r=this._entriesWithId.get(s);if(r)return this.addLineToLink(r.id,e.ybase+e.y),r.id;let i=e.addMarker(e.ybase+e.y),o={id:this._nextId++,key:this._getEntryIdKey(n),data:n,lines:[i]};return i.onDispose(()=>this._removeMarkerFromLink(o,i)),this._entriesWithId.set(o.key,o),this._dataByLinkId.set(o.id,o),o.id}addLineToLink(t,e){let n=this._dataByLinkId.get(t);if(n&&n.lines.every(s=>s.line!==e)){let s=this._bufferService.buffer.addMarker(e);n.lines.push(s),s.onDispose(()=>this._removeMarkerFromLink(n,s))}}getLinkData(t){return this._dataByLinkId.get(t)?.data}_getEntryIdKey(t){return`${t.id};;${t.uri}`}_removeMarkerFromLink(t,e){let n=t.lines.indexOf(e);n!==-1&&(t.lines.splice(n,1),t.lines.length===0&&(t.data.id!==void 0&&this._entriesWithId.delete(t.key),this._dataByLinkId.delete(t.id)))}};dS=fn([Le(0,Es)],dS);var Xj=!1,aee=class extends xt{constructor(t){super(),this._windowsWrappingHeuristics=this._register(new cu),this._onBinary=this._register(new je),this.onBinary=this._onBinary.event,this._onData=this._register(new je),this.onData=this._onData.event,this._onLineFeed=this._register(new je),this.onLineFeed=this._onLineFeed.event,this._onResize=this._register(new je),this.onResize=this._onResize.event,this._onWriteParsed=this._register(new je),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this._register(new je),this._instantiationService=new TZ,this.optionsService=this._register(new zZ(t)),this._instantiationService.setService(js,this.optionsService),this._bufferService=this._register(this._instantiationService.createInstance(oS)),this._instantiationService.setService(Es,this._bufferService),this._logService=this._register(this._instantiationService.createInstance(aS)),this._instantiationService.setService(WB,this._logService),this.coreService=this._register(this._instantiationService.createInstance(lS)),this._instantiationService.setService(Al,this.coreService),this.coreMouseService=this._register(this._instantiationService.createInstance(cS)),this._instantiationService.setService(KB,this.coreMouseService),this.unicodeService=this._register(this._instantiationService.createInstance(Wo)),this._instantiationService.setService(NJ,this.unicodeService),this._charsetService=this._instantiationService.createInstance(qZ),this._instantiationService.setService(CJ,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(dS),this._instantiationService.setService(GB,this._oscLinkService),this._inputHandler=this._register(new nee(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this._register(ns.forward(this._inputHandler.onLineFeed,this._onLineFeed)),this._register(this._inputHandler),this._register(ns.forward(this._bufferService.onResize,this._onResize)),this._register(ns.forward(this.coreService.onData,this._onData)),this._register(ns.forward(this.coreService.onBinary,this._onBinary)),this._register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom(!0))),this._register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this._register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this._register(this._bufferService.onScroll(()=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this._register(new iee((e,n)=>this._inputHandler.parse(e,n))),this._register(ns.forward(this._writeBuffer.onWriteParsed,this._onWriteParsed))}get onScroll(){return this._onScrollApi||(this._onScrollApi=this._register(new je),this._onScroll.event(t=>{this._onScrollApi?.fire(t.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(t){for(let e in t)this.optionsService.options[e]=t[e]}write(t,e){this._writeBuffer.write(t,e)}writeSync(t,e){this._logService.logLevel<=3&&!Xj&&(this._logService.warn("writeSync is unreliable and will be removed soon."),Xj=!0),this._writeBuffer.writeSync(t,e)}input(t,e=!0){this.coreService.triggerDataEvent(t,e)}resize(t,e){isNaN(t)||isNaN(e)||(t=Math.max(t,ND),e=Math.max(e,AD),this._bufferService.resize(t,e))}scroll(t,e=!1){this._bufferService.scroll(t,e)}scrollLines(t,e){this._bufferService.scrollLines(t,e)}scrollPages(t){this.scrollLines(t*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(t){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(t){let e=t-this._bufferService.buffer.ydisp;e!==0&&this.scrollLines(e)}registerEscHandler(t,e){return this._inputHandler.registerEscHandler(t,e)}registerDcsHandler(t,e){return this._inputHandler.registerDcsHandler(t,e)}registerCsiHandler(t,e){return this._inputHandler.registerCsiHandler(t,e)}registerOscHandler(t,e){return this._inputHandler.registerOscHandler(t,e)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let t=!1,e=this.optionsService.rawOptions.windowsPty;e&&e.buildNumber!==void 0&&e.buildNumber!==void 0?t=e.backend==="conpty"&&e.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(t=!0),t?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let t=[];t.push(this.onLineFeed(Hj.bind(null,this._bufferService))),t.push(this.registerCsiHandler({final:"H"},()=>(Hj(this._bufferService),!1))),this._windowsWrappingHeuristics.value=sn(()=>{for(let e of t)e.dispose()})}}},oee={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};function lee(t,e,n,s){let r={type:0,cancel:!1,key:void 0},i=(t.shiftKey?1:0)|(t.altKey?2:0)|(t.ctrlKey?4:0)|(t.metaKey?8:0);switch(t.keyCode){case 0:t.key==="UIKeyInputUpArrow"?e?r.key=ve.ESC+"OA":r.key=ve.ESC+"[A":t.key==="UIKeyInputLeftArrow"?e?r.key=ve.ESC+"OD":r.key=ve.ESC+"[D":t.key==="UIKeyInputRightArrow"?e?r.key=ve.ESC+"OC":r.key=ve.ESC+"[C":t.key==="UIKeyInputDownArrow"&&(e?r.key=ve.ESC+"OB":r.key=ve.ESC+"[B");break;case 8:r.key=t.ctrlKey?"\b":ve.DEL,t.altKey&&(r.key=ve.ESC+r.key);break;case 9:if(t.shiftKey){r.key=ve.ESC+"[Z";break}r.key=ve.HT,r.cancel=!0;break;case 13:r.key=t.altKey?ve.ESC+ve.CR:ve.CR,r.cancel=!0;break;case 27:r.key=ve.ESC,t.altKey&&(r.key=ve.ESC+ve.ESC),r.cancel=!0;break;case 37:if(t.metaKey)break;i?r.key=ve.ESC+"[1;"+(i+1)+"D":e?r.key=ve.ESC+"OD":r.key=ve.ESC+"[D";break;case 39:if(t.metaKey)break;i?r.key=ve.ESC+"[1;"+(i+1)+"C":e?r.key=ve.ESC+"OC":r.key=ve.ESC+"[C";break;case 38:if(t.metaKey)break;i?r.key=ve.ESC+"[1;"+(i+1)+"A":e?r.key=ve.ESC+"OA":r.key=ve.ESC+"[A";break;case 40:if(t.metaKey)break;i?r.key=ve.ESC+"[1;"+(i+1)+"B":e?r.key=ve.ESC+"OB":r.key=ve.ESC+"[B";break;case 45:!t.shiftKey&&!t.ctrlKey&&(r.key=ve.ESC+"[2~");break;case 46:i?r.key=ve.ESC+"[3;"+(i+1)+"~":r.key=ve.ESC+"[3~";break;case 36:i?r.key=ve.ESC+"[1;"+(i+1)+"H":e?r.key=ve.ESC+"OH":r.key=ve.ESC+"[H";break;case 35:i?r.key=ve.ESC+"[1;"+(i+1)+"F":e?r.key=ve.ESC+"OF":r.key=ve.ESC+"[F";break;case 33:t.shiftKey?r.type=2:t.ctrlKey?r.key=ve.ESC+"[5;"+(i+1)+"~":r.key=ve.ESC+"[5~";break;case 34:t.shiftKey?r.type=3:t.ctrlKey?r.key=ve.ESC+"[6;"+(i+1)+"~":r.key=ve.ESC+"[6~";break;case 112:i?r.key=ve.ESC+"[1;"+(i+1)+"P":r.key=ve.ESC+"OP";break;case 113:i?r.key=ve.ESC+"[1;"+(i+1)+"Q":r.key=ve.ESC+"OQ";break;case 114:i?r.key=ve.ESC+"[1;"+(i+1)+"R":r.key=ve.ESC+"OR";break;case 115:i?r.key=ve.ESC+"[1;"+(i+1)+"S":r.key=ve.ESC+"OS";break;case 116:i?r.key=ve.ESC+"[15;"+(i+1)+"~":r.key=ve.ESC+"[15~";break;case 117:i?r.key=ve.ESC+"[17;"+(i+1)+"~":r.key=ve.ESC+"[17~";break;case 118:i?r.key=ve.ESC+"[18;"+(i+1)+"~":r.key=ve.ESC+"[18~";break;case 119:i?r.key=ve.ESC+"[19;"+(i+1)+"~":r.key=ve.ESC+"[19~";break;case 120:i?r.key=ve.ESC+"[20;"+(i+1)+"~":r.key=ve.ESC+"[20~";break;case 121:i?r.key=ve.ESC+"[21;"+(i+1)+"~":r.key=ve.ESC+"[21~";break;case 122:i?r.key=ve.ESC+"[23;"+(i+1)+"~":r.key=ve.ESC+"[23~";break;case 123:i?r.key=ve.ESC+"[24;"+(i+1)+"~":r.key=ve.ESC+"[24~";break;default:if(t.ctrlKey&&!t.shiftKey&&!t.altKey&&!t.metaKey)t.keyCode>=65&&t.keyCode<=90?r.key=String.fromCharCode(t.keyCode-64):t.keyCode===32?r.key=ve.NUL:t.keyCode>=51&&t.keyCode<=55?r.key=String.fromCharCode(t.keyCode-51+27):t.keyCode===56?r.key=ve.DEL:t.keyCode===219?r.key=ve.ESC:t.keyCode===220?r.key=ve.FS:t.keyCode===221&&(r.key=ve.GS);else if((!n||s)&&t.altKey&&!t.metaKey){let o=oee[t.keyCode]?.[t.shiftKey?1:0];if(o)r.key=ve.ESC+o;else if(t.keyCode>=65&&t.keyCode<=90){let c=t.ctrlKey?t.keyCode-64:t.keyCode+32,d=String.fromCharCode(c);t.shiftKey&&(d=d.toUpperCase()),r.key=ve.ESC+d}else if(t.keyCode===32)r.key=ve.ESC+(t.ctrlKey?ve.NUL:" ");else if(t.key==="Dead"&&t.code.startsWith("Key")){let c=t.code.slice(3,4);t.shiftKey||(c=c.toLowerCase()),r.key=ve.ESC+c,r.cancel=!0}}else n&&!t.altKey&&!t.ctrlKey&&!t.shiftKey&&t.metaKey?t.keyCode===65&&(r.type=1):t.key&&!t.ctrlKey&&!t.altKey&&!t.metaKey&&t.keyCode>=48&&t.key.length===1?r.key=t.key:t.key&&t.ctrlKey&&(t.key==="_"&&(r.key=ve.US),t.key==="@"&&(r.key=ve.NUL));break}return r}var gn=0,cee=class{constructor(t){this._getKey=t,this._array=[],this._insertedValues=[],this._flushInsertedTask=new wg,this._isFlushingInserted=!1,this._deletedIndices=[],this._flushDeletedTask=new wg,this._isFlushingDeleted=!1}clear(){this._array.length=0,this._insertedValues.length=0,this._flushInsertedTask.clear(),this._isFlushingInserted=!1,this._deletedIndices.length=0,this._flushDeletedTask.clear(),this._isFlushingDeleted=!1}insert(t){this._flushCleanupDeleted(),this._insertedValues.length===0&&this._flushInsertedTask.enqueue(()=>this._flushInserted()),this._insertedValues.push(t)}_flushInserted(){let t=this._insertedValues.sort((r,i)=>this._getKey(r)-this._getKey(i)),e=0,n=0,s=new Array(this._array.length+this._insertedValues.length);for(let r=0;r<s.length;r++)n>=this._array.length||this._getKey(t[e])<=this._getKey(this._array[n])?(s[r]=t[e],e++):s[r]=this._array[n++];this._array=s,this._insertedValues.length=0}_flushCleanupInserted(){!this._isFlushingInserted&&this._insertedValues.length>0&&this._flushInsertedTask.flush()}delete(t){if(this._flushCleanupInserted(),this._array.length===0)return!1;let e=this._getKey(t);if(e===void 0||(gn=this._search(e),gn===-1)||this._getKey(this._array[gn])!==e)return!1;do if(this._array[gn]===t)return this._deletedIndices.length===0&&this._flushDeletedTask.enqueue(()=>this._flushDeleted()),this._deletedIndices.push(gn),!0;while(++gn<this._array.length&&this._getKey(this._array[gn])===e);return!1}_flushDeleted(){this._isFlushingDeleted=!0;let t=this._deletedIndices.sort((r,i)=>r-i),e=0,n=new Array(this._array.length-t.length),s=0;for(let r=0;r<this._array.length;r++)t[e]===r?e++:n[s++]=this._array[r];this._array=n,this._deletedIndices.length=0,this._isFlushingDeleted=!1}_flushCleanupDeleted(){!this._isFlushingDeleted&&this._deletedIndices.length>0&&this._flushDeletedTask.flush()}*getKeyIterator(t){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(gn=this._search(t),!(gn<0||gn>=this._array.length)&&this._getKey(this._array[gn])===t))do yield this._array[gn];while(++gn<this._array.length&&this._getKey(this._array[gn])===t)}forEachByKey(t,e){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(gn=this._search(t),!(gn<0||gn>=this._array.length)&&this._getKey(this._array[gn])===t))do e(this._array[gn]);while(++gn<this._array.length&&this._getKey(this._array[gn])===t)}values(){return this._flushCleanupInserted(),this._flushCleanupDeleted(),[...this._array].values()}_search(t){let e=0,n=this._array.length-1;for(;n>=e;){let s=e+n>>1,r=this._getKey(this._array[s]);if(r>t)n=s-1;else if(r<t)e=s+1;else{for(;s>0&&this._getKey(this._array[s-1])===t;)s--;return s}}return e}},Cx=0,Jj=0,uee=class extends xt{constructor(){super(),this._decorations=new cee(t=>t?.marker.line),this._onDecorationRegistered=this._register(new je),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this._register(new je),this.onDecorationRemoved=this._onDecorationRemoved.event,this._register(sn(()=>this.reset()))}get decorations(){return this._decorations.values()}registerDecoration(t){if(t.marker.isDisposed)return;let e=new hee(t);if(e){let n=e.marker.onDispose(()=>e.dispose()),s=e.onDispose(()=>{s.dispose(),e&&(this._decorations.delete(e)&&this._onDecorationRemoved.fire(e),n.dispose())});this._decorations.insert(e),this._onDecorationRegistered.fire(e)}return e}reset(){for(let t of this._decorations.values())t.dispose();this._decorations.clear()}*getDecorationsAtCell(t,e,n){let s=0,r=0;for(let i of this._decorations.getKeyIterator(e))s=i.options.x??0,r=s+(i.options.width??1),t>=s&&t<r&&(!n||(i.options.layer??"bottom")===n)&&(yield i)}forEachDecorationAtCell(t,e,n,s){this._decorations.forEachByKey(e,r=>{Cx=r.options.x??0,Jj=Cx+(r.options.width??1),t>=Cx&&t<Jj&&(!n||(r.options.layer??"bottom")===n)&&s(r)})}},hee=class extends oo{constructor(t){super(),this.options=t,this.onRenderEmitter=this.add(new je),this.onRender=this.onRenderEmitter.event,this._onDispose=this.add(new je),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=t.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=ln.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=ln.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}dispose(){this._onDispose.fire(),super.dispose()}},dee=1e3,fee=class{constructor(t,e=dee){this._renderCallback=t,this._debounceThresholdMS=e,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(t,e,n){this._rowCount=n,t=t!==void 0?t:0,e=e!==void 0?e:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,t):t,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,e):e;let s=performance.now();if(s-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=s,this._innerRefresh();else if(!this._additionalRefreshRequested){let r=s-this._lastRefreshMs,i=this._debounceThresholdMS-r;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=performance.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},i)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let t=Math.max(this._rowStart,0),e=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(t,e)}},Qj=20,Sg=class extends xt{constructor(t,e,n,s){super(),this._terminal=t,this._coreBrowserService=n,this._renderService=s,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="";let r=this._coreBrowserService.mainDocument;this._accessibilityContainer=r.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=r.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let i=0;i<this._terminal.rows;i++)this._rowElements[i]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[i]);if(this._topBoundaryFocusListener=i=>this._handleBoundaryFocus(i,0),this._bottomBoundaryFocusListener=i=>this._handleBoundaryFocus(i,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=r.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this._register(new fee(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this._register(this._terminal.onResize(i=>this._handleResize(i.rows))),this._register(this._terminal.onRender(i=>this._refreshRows(i.start,i.end))),this._register(this._terminal.onScroll(()=>this._refreshRows())),this._register(this._terminal.onA11yChar(i=>this._handleChar(i))),this._register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this._register(this._terminal.onA11yTab(i=>this._handleTab(i))),this._register(this._terminal.onKey(i=>this._handleKey(i.key))),this._register(this._terminal.onBlur(()=>this._clearLiveRegion())),this._register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._register(ot(r,"selectionchange",()=>this._handleSelectionChange())),this._register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRowsDimensions(),this._refreshRows(),this._register(sn(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(t){for(let e=0;e<t;e++)this._handleChar(" ")}_handleChar(t){this._liveRegionLineCount<Qj+1&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==t&&(this._charsToAnnounce+=t):this._charsToAnnounce+=t,t===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===Qj+1&&(this._liveRegion.textContent+=Ow.get())))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(t){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(t)||this._charsToConsume.push(t)}_refreshRows(t,e){this._liveRegionDebouncer.refresh(t,e,this._terminal.rows)}_renderRows(t,e){let n=this._terminal.buffer,s=n.lines.length.toString();for(let r=t;r<=e;r++){let i=n.lines.get(n.ydisp+r),o=[],c=i?.translateToString(!0,void 0,void 0,o)||"",d=(n.ydisp+r+1).toString(),h=this._rowElements[r];h&&(c.length===0?(h.textContent="",this._rowColumns.set(h,[0,1])):(h.textContent=c,this._rowColumns.set(h,o)),h.setAttribute("aria-posinset",d),h.setAttribute("aria-setsize",s),this._alignRowWidth(h))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(t,e){let n=t.target,s=this._rowElements[e===0?1:this._rowElements.length-2],r=n.getAttribute("aria-posinset"),i=e===0?"1":`${this._terminal.buffer.lines.length}`;if(r===i||t.relatedTarget!==s)return;let o,c;if(e===0?(o=n,c=this._rowElements.pop(),this._rowContainer.removeChild(c)):(o=this._rowElements.shift(),c=n,this._rowContainer.removeChild(o)),o.removeEventListener("focus",this._topBoundaryFocusListener),c.removeEventListener("focus",this._bottomBoundaryFocusListener),e===0){let d=this._createAccessibilityTreeNode();this._rowElements.unshift(d),this._rowContainer.insertAdjacentElement("afterbegin",d)}else{let d=this._createAccessibilityTreeNode();this._rowElements.push(d),this._rowContainer.appendChild(d)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(e===0?-1:1),this._rowElements[e===0?1:this._rowElements.length-2].focus(),t.preventDefault(),t.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;let t=this._coreBrowserService.mainDocument.getSelection();if(!t)return;if(t.isCollapsed){this._rowContainer.contains(t.anchorNode)&&this._terminal.clearSelection();return}if(!t.anchorNode||!t.focusNode){console.error("anchorNode and/or focusNode are null");return}let e={node:t.anchorNode,offset:t.anchorOffset},n={node:t.focusNode,offset:t.focusOffset};if((e.node.compareDocumentPosition(n.node)&Node.DOCUMENT_POSITION_PRECEDING||e.node===n.node&&e.offset>n.offset)&&([e,n]=[n,e]),e.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(e={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(e.node))return;let s=this._rowElements.slice(-1)[0];if(n.node.compareDocumentPosition(s)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(n={node:s,offset:s.textContent?.length??0}),!this._rowContainer.contains(n.node))return;let r=({node:c,offset:d})=>{let h=c instanceof Text?c.parentNode:c,g=parseInt(h?.getAttribute("aria-posinset"),10)-1;if(isNaN(g))return console.warn("row is invalid. Race condition?"),null;let m=this._rowColumns.get(h);if(!m)return console.warn("columns is null. Race condition?"),null;let b=d<m.length?m[d]:m.slice(-1)[0]+1;return b>=this._terminal.cols&&(++g,b=0),{row:g,column:b}},i=r(e),o=r(n);if(!(!i||!o)){if(i.row>o.row||i.row===o.row&&i.column>=o.column)throw new Error("invalid range");this._terminal.select(i.column,i.row,(o.row-i.row)*this._terminal.cols-i.column+o.column)}}_handleResize(t){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let e=this._rowContainer.children.length;e<this._terminal.rows;e++)this._rowElements[e]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[e]);for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let t=this._coreBrowserService.mainDocument.createElement("div");return t.setAttribute("role","listitem"),t.tabIndex=-1,this._refreshRowDimensions(t),t}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){Object.assign(this._accessibilityContainer.style,{width:`${this._renderService.dimensions.css.canvas.width}px`,fontSize:`${this._terminal.options.fontSize}px`}),this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let t=0;t<this._terminal.rows;t++)this._refreshRowDimensions(this._rowElements[t]),this._alignRowWidth(this._rowElements[t])}}_refreshRowDimensions(t){t.style.height=`${this._renderService.dimensions.css.cell.height}px`}_alignRowWidth(t){t.style.transform="";let e=t.getBoundingClientRect().width,n=this._rowColumns.get(t)?.slice(-1)?.[0];if(!n)return;let s=n*this._renderService.dimensions.css.cell.width;t.style.transform=`scaleX(${s/e})`}};Sg=fn([Le(1,uk),Le(2,ya),Le(3,ba)],Sg);var fS=class extends xt{constructor(t,e,n,s,r){super(),this._element=t,this._mouseService=e,this._renderService=n,this._bufferService=s,this._linkProviderService=r,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this._register(new je),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this._register(new je),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this._register(sn(()=>{bl(this._linkCacheDisposables),this._linkCacheDisposables.length=0,this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this._register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this._register(ot(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this._register(ot(this._element,"mousemove",this._handleMouseMove.bind(this))),this._register(ot(this._element,"mousedown",this._handleMouseDown.bind(this))),this._register(ot(this._element,"mouseup",this._handleMouseUp.bind(this)))}get currentLink(){return this._currentLink}_handleMouseMove(t){this._lastMouseEvent=t;let e=this._positionFromMouseEvent(t,this._element,this._mouseService);if(!e)return;this._isMouseOut=!1;let n=t.composedPath();for(let s=0;s<n.length;s++){let r=n[s];if(r.classList.contains("xterm"))break;if(r.classList.contains("xterm-hover"))return}(!this._lastBufferCell||e.x!==this._lastBufferCell.x||e.y!==this._lastBufferCell.y)&&(this._handleHover(e),this._lastBufferCell=e)}_handleHover(t){if(this._activeLine!==t.y||this._wasResized){this._clearCurrentLink(),this._askForLink(t,!1),this._wasResized=!1;return}this._currentLink&&this._linkAtPosition(this._currentLink.link,t)||(this._clearCurrentLink(),this._askForLink(t,!0))}_askForLink(t,e){(!this._activeProviderReplies||!e)&&(this._activeProviderReplies?.forEach(s=>{s?.forEach(r=>{r.link.dispose&&r.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=t.y);let n=!1;for(let[s,r]of this._linkProviderService.linkProviders.entries())e?this._activeProviderReplies?.get(s)&&(n=this._checkLinkProviderResult(s,t,n)):r.provideLinks(t.y,i=>{if(this._isMouseOut)return;let o=i?.map(c=>({link:c}));this._activeProviderReplies?.set(s,o),n=this._checkLinkProviderResult(s,t,n),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(t.y,this._activeProviderReplies)})}_removeIntersectingLinks(t,e){let n=new Set;for(let s=0;s<e.size;s++){let r=e.get(s);if(r)for(let i=0;i<r.length;i++){let o=r[i],c=o.link.range.start.y<t?0:o.link.range.start.x,d=o.link.range.end.y>t?this._bufferService.cols:o.link.range.end.x;for(let h=c;h<=d;h++){if(n.has(h)){r.splice(i--,1);break}n.add(h)}}}}_checkLinkProviderResult(t,e,n){if(!this._activeProviderReplies)return n;let s=this._activeProviderReplies.get(t),r=!1;for(let i=0;i<t;i++)(!this._activeProviderReplies.has(i)||this._activeProviderReplies.get(i))&&(r=!0);if(!r&&s){let i=s.find(o=>this._linkAtPosition(o.link,e));i&&(n=!0,this._handleNewLink(i))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!n)for(let i=0;i<this._activeProviderReplies.size;i++){let o=this._activeProviderReplies.get(i)?.find(c=>this._linkAtPosition(c.link,e));if(o){n=!0,this._handleNewLink(o);break}}return n}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(t){if(!this._currentLink)return;let e=this._positionFromMouseEvent(t,this._element,this._mouseService);e&&this._mouseDownLink&&pee(this._mouseDownLink.link,this._currentLink.link)&&this._linkAtPosition(this._currentLink.link,e)&&this._currentLink.link.activate(t,this._currentLink.link.text)}_clearCurrentLink(t,e){!this._currentLink||!this._lastMouseEvent||(!t||!e||this._currentLink.link.range.start.y>=t&&this._currentLink.link.range.end.y<=e)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,bl(this._linkCacheDisposables),this._linkCacheDisposables.length=0)}_handleNewLink(t){if(!this._lastMouseEvent)return;let e=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);e&&this._linkAtPosition(t.link,e)&&(this._currentLink=t,this._currentLink.state={decorations:{underline:t.link.decorations===void 0?!0:t.link.decorations.underline,pointerCursor:t.link.decorations===void 0?!0:t.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,t.link,this._lastMouseEvent),t.link.decorations={},Object.defineProperties(t.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:n=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==n&&(this._currentLink.state.decorations.pointerCursor=n,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",n))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:n=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==n&&(this._currentLink.state.decorations.underline=n,this._currentLink.state.isHovered&&this._fireUnderlineEvent(t.link,n))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(n=>{if(!this._currentLink)return;let s=n.start===0?0:n.start+1+this._bufferService.buffer.ydisp,r=this._bufferService.buffer.ydisp+1+n.end;if(this._currentLink.link.range.start.y>=s&&this._currentLink.link.range.end.y<=r&&(this._clearCurrentLink(s,r),this._lastMouseEvent)){let i=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);i&&this._askForLink(i,!1)}})))}_linkHover(t,e,n){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(e,!0),this._currentLink.state.decorations.pointerCursor&&t.classList.add("xterm-cursor-pointer")),e.hover&&e.hover(n,e.text)}_fireUnderlineEvent(t,e){let n=t.range,s=this._bufferService.buffer.ydisp,r=this._createLinkUnderlineEvent(n.start.x-1,n.start.y-s-1,n.end.x,n.end.y-s-1,void 0);(e?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(r)}_linkLeave(t,e,n){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(e,!1),this._currentLink.state.decorations.pointerCursor&&t.classList.remove("xterm-cursor-pointer")),e.leave&&e.leave(n,e.text)}_linkAtPosition(t,e){let n=t.range.start.y*this._bufferService.cols+t.range.start.x,s=t.range.end.y*this._bufferService.cols+t.range.end.x,r=e.y*this._bufferService.cols+e.x;return n<=r&&r<=s}_positionFromMouseEvent(t,e,n){let s=n.getCoords(t,e,this._bufferService.cols,this._bufferService.rows);if(s)return{x:s[0],y:s[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(t,e,n,s,r){return{x1:t,y1:e,x2:n,y2:s,cols:this._bufferService.cols,fg:r}}};fS=fn([Le(1,hk),Le(2,ba),Le(3,Es),Le(4,XB)],fS);function pee(t,e){return t.text===e.text&&t.range.start.x===e.range.start.x&&t.range.start.y===e.range.start.y&&t.range.end.x===e.range.end.x&&t.range.end.y===e.range.end.y}var mee=class extends aee{constructor(t={}){super(t),this._linkifier=this._register(new cu),this.browser=mD,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this._register(new cu),this._onCursorMove=this._register(new je),this.onCursorMove=this._onCursorMove.event,this._onKey=this._register(new je),this.onKey=this._onKey.event,this._onRender=this._register(new je),this.onRender=this._onRender.event,this._onSelectionChange=this._register(new je),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this._register(new je),this.onTitleChange=this._onTitleChange.event,this._onBell=this._register(new je),this.onBell=this._onBell.event,this._onFocus=this._register(new je),this._onBlur=this._register(new je),this._onA11yCharEmitter=this._register(new je),this._onA11yTabEmitter=this._register(new je),this._onWillOpen=this._register(new je),this._setup(),this._decorationService=this._instantiationService.createInstance(uee),this._instantiationService.setService(Wf,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(rZ),this._instantiationService.setService(XB,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(Bw)),this._register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this._register(this._inputHandler.onRequestRefreshRows(e=>this.refresh(e?.start??0,e?.end??this.rows-1))),this._register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this._register(this._inputHandler.onRequestReset(()=>this.reset())),this._register(this._inputHandler.onRequestWindowsOptionsReport(e=>this._reportWindowsOptions(e))),this._register(this._inputHandler.onColor(e=>this._handleColorEvent(e))),this._register(ns.forward(this._inputHandler.onCursorMove,this._onCursorMove)),this._register(ns.forward(this._inputHandler.onTitleChange,this._onTitleChange)),this._register(ns.forward(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this._register(ns.forward(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this._register(this._bufferService.onResize(e=>this._afterResize(e.cols,e.rows))),this._register(sn(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}get linkifier(){return this._linkifier.value}get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}_handleColorEvent(t){if(this._themeService)for(let e of t){let n,s="";switch(e.index){case 256:n="foreground",s="10";break;case 257:n="background",s="11";break;case 258:n="cursor",s="12";break;default:n="ansi",s="4;"+e.index}switch(e.type){case 0:let r=Qt.toColorRGB(n==="ansi"?this._themeService.colors.ansi[e.index]:this._themeService.colors[n]);this.coreService.triggerDataEvent(`${ve.ESC}]${s};${eee(r)}${fD.ST}`);break;case 1:if(n==="ansi")this._themeService.modifyColors(i=>i.ansi[e.index]=An.toColor(...e.color));else{let i=n;this._themeService.modifyColors(o=>o[i]=An.toColor(...e.color))}break;case 2:this._themeService.restoreColor(e.index);break}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(t){t?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(Sg,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(t){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(ve.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(ve.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let t=this.buffer.ybase+this.buffer.y,e=this.buffer.lines.get(t);if(!e)return;let n=Math.min(this.buffer.x,this.cols-1),s=this._renderService.dimensions.css.cell.height,r=e.getWidth(n),i=this._renderService.dimensions.css.cell.width*r,o=this.buffer.y*this._renderService.dimensions.css.cell.height,c=n*this._renderService.dimensions.css.cell.width;this.textarea.style.left=c+"px",this.textarea.style.top=o+"px",this.textarea.style.width=i+"px",this.textarea.style.height=s+"px",this.textarea.style.lineHeight=s+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this._register(ot(this.element,"copy",e=>{this.hasSelection()&&vJ(e,this._selectionService)}));let t=e=>xJ(e,this.textarea,this.coreService,this.optionsService);this._register(ot(this.textarea,"paste",t)),this._register(ot(this.element,"paste",t)),gD?this._register(ot(this.element,"mousedown",e=>{e.button===2&&lj(e,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this._register(ot(this.element,"contextmenu",e=>{lj(e,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),vk&&this._register(ot(this.element,"auxclick",e=>{e.button===1&&HB(e,this.textarea,this.screenElement)}))}_bindKeys(){this._register(ot(this.textarea,"keyup",t=>this._keyUp(t),!0)),this._register(ot(this.textarea,"keydown",t=>this._keyDown(t),!0)),this._register(ot(this.textarea,"keypress",t=>this._keyPress(t),!0)),this._register(ot(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this._register(ot(this.textarea,"compositionupdate",t=>this._compositionHelper.compositionupdate(t))),this._register(ot(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this._register(ot(this.textarea,"input",t=>this._inputEvent(t),!0)),this._register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(t){if(!t)throw new Error("Terminal requires a parent element.");if(t.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService){this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView);return}this._document=t.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),t.appendChild(this.element);let e=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),e.appendChild(this._viewportElement),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._register(ot(this.screenElement,"mousemove",r=>this.updateCursorStyle(r))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),e.appendChild(this.screenElement);let n=this.textarea=this._document.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",Rw.get()),vD||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._register(this.optionsService.onSpecificOptionChange("disableStdin",()=>n.readOnly=this.optionsService.rawOptions.disableStdin)),this.textarea.readOnly=this.optionsService.rawOptions.disableStdin,this._coreBrowserService=this._register(this._instantiationService.createInstance(nZ,this.textarea,t.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(ya,this._coreBrowserService),this._register(ot(this.textarea,"focus",r=>this._handleTextAreaFocus(r))),this._register(ot(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(tS,this._document,this._helperContainer),this._instantiationService.setService(Fy,this._charSizeService),this._themeService=this._instantiationService.createInstance(iS),this._instantiationService.setService(Ou,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(xg),this._instantiationService.setService(YB,this._characterJoinerService),this._renderService=this._register(this._instantiationService.createInstance(sS,this.rows,this.screenElement)),this._instantiationService.setService(ba,this._renderService),this._register(this._renderService.onRenderedViewportChange(r=>this._onRender.fire(r))),this.onResize(r=>this._renderService.resize(r.cols,r.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(Qw,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(nS),this._instantiationService.setService(hk,this._mouseService);let s=this._linkifier.value=this._register(this._instantiationService.createInstance(fS,this.screenElement));this.element.appendChild(e);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this._register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this._register(this.onBlur(()=>this._renderService.handleBlur())),this._register(this.onFocus(()=>this._renderService.handleFocus())),this._viewport=this._register(this._instantiationService.createInstance(Xw,this.element,this.screenElement)),this._register(this._viewport.onRequestScrollLines(r=>{super.scrollLines(r,!1),this.refresh(0,this.rows-1)})),this._selectionService=this._register(this._instantiationService.createInstance(rS,this.element,this.screenElement,s)),this._instantiationService.setService(EJ,this._selectionService),this._register(this._selectionService.onRequestScrollLines(r=>this.scrollLines(r.amount,r.suppressScrollEvent))),this._register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this._register(this._selectionService.onRequestRedraw(r=>this._renderService.handleSelectionChanged(r.start,r.end,r.columnSelectMode))),this._register(this._selectionService.onLinuxMouseSelection(r=>{this.textarea.value=r,this.textarea.focus(),this.textarea.select()})),this._register(ns.any(this._onScroll.event,this._inputHandler.onScroll)(()=>{this._selectionService.refresh(),this._viewport?.queueSync()})),this._register(this._instantiationService.createInstance(Jw,this.screenElement)),this._register(ot(this.element,"mousedown",r=>this._selectionService.handleMouseDown(r))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(Sg,this)),this._register(this.optionsService.onSpecificOptionChange("screenReaderMode",r=>this._handleScreenReaderModeOptionChange(r))),this.options.overviewRuler.width&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(vg,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRuler",r=>{!this._overviewRulerRenderer&&r&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(vg,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(eS,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){let t=this,e=this.element;function n(i){let o=t._mouseService.getMouseReportCoords(i,t.screenElement);if(!o)return!1;let c,d;switch(i.overrideType||i.type){case"mousemove":d=32,i.buttons===void 0?(c=3,i.button!==void 0&&(c=i.button<3?i.button:3)):c=i.buttons&1?0:i.buttons&4?1:i.buttons&2?2:3;break;case"mouseup":d=0,c=i.button<3?i.button:3;break;case"mousedown":d=1,c=i.button<3?i.button:3;break;case"wheel":if(t._customWheelEventHandler&&t._customWheelEventHandler(i)===!1)return!1;let h=i.deltaY;if(h===0||t.coreMouseService.consumeWheelEvent(i,t._renderService?.dimensions?.device?.cell?.height,t._coreBrowserService?.dpr)===0)return!1;d=h<0?0:1,c=4;break;default:return!1}return d===void 0||c===void 0||c>4?!1:t.coreMouseService.triggerMouseEvent({col:o.col,row:o.row,x:o.x,y:o.y,button:c,action:d,ctrl:i.ctrlKey,alt:i.altKey,shift:i.shiftKey})}let s={mouseup:null,wheel:null,mousedrag:null,mousemove:null},r={mouseup:i=>(n(i),i.buttons||(this._document.removeEventListener("mouseup",s.mouseup),s.mousedrag&&this._document.removeEventListener("mousemove",s.mousedrag)),this.cancel(i)),wheel:i=>(n(i),this.cancel(i,!0)),mousedrag:i=>{i.buttons&&n(i)},mousemove:i=>{i.buttons||n(i)}};this._register(this.coreMouseService.onProtocolChange(i=>{i?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(i)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),i&8?s.mousemove||(e.addEventListener("mousemove",r.mousemove),s.mousemove=r.mousemove):(e.removeEventListener("mousemove",s.mousemove),s.mousemove=null),i&16?s.wheel||(e.addEventListener("wheel",r.wheel,{passive:!1}),s.wheel=r.wheel):(e.removeEventListener("wheel",s.wheel),s.wheel=null),i&2?s.mouseup||(s.mouseup=r.mouseup):(this._document.removeEventListener("mouseup",s.mouseup),s.mouseup=null),i&4?s.mousedrag||(s.mousedrag=r.mousedrag):(this._document.removeEventListener("mousemove",s.mousedrag),s.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this._register(ot(e,"mousedown",i=>{if(i.preventDefault(),this.focus(),!(!this.coreMouseService.areMouseEventsActive||this._selectionService.shouldForceSelection(i)))return n(i),s.mouseup&&this._document.addEventListener("mouseup",s.mouseup),s.mousedrag&&this._document.addEventListener("mousemove",s.mousedrag),this.cancel(i)})),this._register(ot(e,"wheel",i=>{if(!s.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(i)===!1)return!1;if(!this.buffer.hasScrollback){if(i.deltaY===0)return!1;if(t.coreMouseService.consumeWheelEvent(i,t._renderService?.dimensions?.device?.cell?.height,t._coreBrowserService?.dpr)===0)return this.cancel(i,!0);let o=ve.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(i.deltaY<0?"A":"B");return this.coreService.triggerDataEvent(o,!0),this.cancel(i,!0)}}},{passive:!1}))}refresh(t,e){this._renderService?.refreshRows(t,e)}updateCursorStyle(t){this._selectionService?.shouldColumnSelect(t)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(t,e){this._viewport?this._viewport.scrollLines(t):super.scrollLines(t,e),this.refresh(0,this.rows-1)}scrollPages(t){this.scrollLines(t*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(t){t&&this._viewport?this._viewport.scrollToLine(this.buffer.ybase,!0):this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(t){let e=t-this._bufferService.buffer.ydisp;e!==0&&this.scrollLines(e)}paste(t){zB(t,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(t){this._customKeyEventHandler=t}attachCustomWheelEventHandler(t){this._customWheelEventHandler=t}registerLinkProvider(t){return this._linkProviderService.registerLinkProvider(t)}registerCharacterJoiner(t){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let e=this._characterJoinerService.register(t);return this.refresh(0,this.rows-1),e}deregisterCharacterJoiner(t){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(t)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(t){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+t)}registerDecoration(t){return this._decorationService.registerDecoration(t)}hasSelection(){return this._selectionService?this._selectionService.hasSelection:!1}select(t,e,n){this._selectionService.setSelection(t,e,n)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(!(!this._selectionService||!this._selectionService.hasSelection))return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(t,e){this._selectionService?.selectLines(t,e)}_keyDown(t){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(t)===!1)return!1;let e=this.browser.isMac&&this.options.macOptionIsMeta&&t.altKey;if(!e&&!this._compositionHelper.keydown(t))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(!0),!1;!e&&(t.key==="Dead"||t.key==="AltGraph")&&(this._unprocessedDeadKey=!0);let n=lee(t,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(t),n.type===3||n.type===2){let s=this.rows-1;return this.scrollLines(n.type===2?-s:s),this.cancel(t,!0)}if(n.type===1&&this.selectAll(),this._isThirdLevelShift(this.browser,t)||(n.cancel&&this.cancel(t,!0),!n.key)||t.key&&!t.ctrlKey&&!t.altKey&&!t.metaKey&&t.key.length===1&&t.key.charCodeAt(0)>=65&&t.key.charCodeAt(0)<=90)return!0;if(this._unprocessedDeadKey)return this._unprocessedDeadKey=!1,!0;if((n.key===ve.ETX||n.key===ve.CR)&&(this.textarea.value=""),this._onKey.fire({key:n.key,domEvent:t}),this._showCursor(),this.coreService.triggerDataEvent(n.key,!0),!this.optionsService.rawOptions.screenReaderMode||t.altKey||t.ctrlKey)return this.cancel(t,!0);this._keyDownHandled=!0}_isThirdLevelShift(t,e){let n=t.isMac&&!this.options.macOptionIsMeta&&e.altKey&&!e.ctrlKey&&!e.metaKey||t.isWindows&&e.altKey&&e.ctrlKey&&!e.metaKey||t.isWindows&&e.getModifierState("AltGraph");return e.type==="keypress"?n:n&&(!e.keyCode||e.keyCode>47)}_keyUp(t){this._keyDownSeen=!1,!(this._customKeyEventHandler&&this._customKeyEventHandler(t)===!1)&&(gee(t)||this.focus(),this.updateCursorStyle(t),this._keyPressHandled=!1)}_keyPress(t){let e;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(t)===!1)return!1;if(this.cancel(t),t.charCode)e=t.charCode;else if(t.which===null||t.which===void 0)e=t.keyCode;else if(t.which!==0&&t.charCode!==0)e=t.which;else return!1;return!e||(t.altKey||t.ctrlKey||t.metaKey)&&!this._isThirdLevelShift(this.browser,t)?!1:(e=String.fromCharCode(e),this._onKey.fire({key:e,domEvent:t}),this._showCursor(),this.coreService.triggerDataEvent(e,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,!0)}_inputEvent(t){if(t.data&&t.inputType==="insertText"&&(!t.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let e=t.data;return this.coreService.triggerDataEvent(e,!0),this.cancel(t),!0}return!1}resize(t,e){if(t===this.cols&&e===this.rows){this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure();return}super.resize(t,e)}_afterResize(t,e){this._charSizeService?.measure()}clear(){if(!(this.buffer.ybase===0&&this.buffer.y===0)){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let t=1;t<this.rows;t++)this.buffer.lines.push(this.buffer.getBlankLine(Nn));this._onScroll.fire({position:this.buffer.ydisp}),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;let t=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this._customKeyEventHandler=t,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(ve.ESC+"[I"):this.coreService.triggerDataEvent(ve.ESC+"[O")}_reportWindowsOptions(t){if(this._renderService)switch(t){case 0:let e=this._renderService.dimensions.css.canvas.width.toFixed(0),n=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${ve.ESC}[4;${n};${e}t`);break;case 1:let s=this._renderService.dimensions.css.cell.width.toFixed(0),r=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${ve.ESC}[6;${r};${s}t`);break}}cancel(t,e){if(!(!this.options.cancelEvents&&!e))return t.preventDefault(),t.stopPropagation(),!1}};function gee(t){return t.keyCode===16||t.keyCode===17||t.keyCode===18}var yee=class{constructor(){this._addons=[]}dispose(){for(let t=this._addons.length-1;t>=0;t--)this._addons[t].instance.dispose()}loadAddon(t,e){let n={instance:e,dispose:e.dispose,isDisposed:!1};this._addons.push(n),e.dispose=()=>this._wrappedAddonDispose(n),e.activate(t)}_wrappedAddonDispose(t){if(t.isDisposed)return;let e=-1;for(let n=0;n<this._addons.length;n++)if(this._addons[n]===t){e=n;break}if(e===-1)throw new Error("Could not dispose an addon that has not been loaded");t.isDisposed=!0,t.dispose.apply(t.instance),this._addons.splice(e,1)}},bee=class{constructor(t){this._line=t}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(t,e){if(!(t<0||t>=this._line.length))return e?(this._line.loadCell(t,e),e):this._line.loadCell(t,new Mr)}translateToString(t,e,n){return this._line.translateToString(t,e,n)}},Zj=class{constructor(t,e){this._buffer=t,this.type=e}init(t){return this._buffer=t,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(t){let e=this._buffer.lines.get(t);if(e)return new bee(e)}getNullCell(){return new Mr}},vee=class extends xt{constructor(t){super(),this._core=t,this._onBufferChange=this._register(new je),this.onBufferChange=this._onBufferChange.event,this._normal=new Zj(this._core.buffers.normal,"normal"),this._alternate=new Zj(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}},xee=class{constructor(t){this._core=t}registerCsiHandler(t,e){return this._core.registerCsiHandler(t,n=>e(n.toArray()))}addCsiHandler(t,e){return this.registerCsiHandler(t,e)}registerDcsHandler(t,e){return this._core.registerDcsHandler(t,(n,s)=>e(n,s.toArray()))}addDcsHandler(t,e){return this.registerDcsHandler(t,e)}registerEscHandler(t,e){return this._core.registerEscHandler(t,e)}addEscHandler(t,e){return this.registerEscHandler(t,e)}registerOscHandler(t,e){return this._core.registerOscHandler(t,e)}addOscHandler(t,e){return this.registerOscHandler(t,e)}},_ee=class{constructor(t){this._core=t}register(t){this._core.unicodeService.register(t)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(t){this._core.unicodeService.activeVersion=t}},wee=["cols","rows"],ui=0,See=class extends xt{constructor(t){super(),this._core=this._register(new mee(t)),this._addonManager=this._register(new yee),this._publicOptions={...this._core.options};let e=s=>this._core.options[s],n=(s,r)=>{this._checkReadonlyOptions(s),this._core.options[s]=r};for(let s in this._core.options){let r={get:e.bind(this,s),set:n.bind(this,s)};Object.defineProperty(this._publicOptions,s,r)}}_checkReadonlyOptions(t){if(wee.includes(t))throw new Error(`Option "${t}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new xee(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new _ee(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this._register(new vee(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let t=this._core.coreService.decPrivateModes,e="none";switch(this._core.coreMouseService.activeProtocol){case"X10":e="x10";break;case"VT200":e="vt200";break;case"DRAG":e="drag";break;case"ANY":e="any";break}return{applicationCursorKeysMode:t.applicationCursorKeys,applicationKeypadMode:t.applicationKeypad,bracketedPasteMode:t.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:e,originMode:t.origin,reverseWraparoundMode:t.reverseWraparound,sendFocusMode:t.sendFocus,synchronizedOutputMode:t.synchronizedOutput,wraparoundMode:t.wraparound}}get options(){return this._publicOptions}set options(t){for(let e in t)this._publicOptions[e]=t[e]}blur(){this._core.blur()}focus(){this._core.focus()}input(t,e=!0){this._core.input(t,e)}resize(t,e){this._verifyIntegers(t,e),this._core.resize(t,e)}open(t){this._core.open(t)}attachCustomKeyEventHandler(t){this._core.attachCustomKeyEventHandler(t)}attachCustomWheelEventHandler(t){this._core.attachCustomWheelEventHandler(t)}registerLinkProvider(t){return this._core.registerLinkProvider(t)}registerCharacterJoiner(t){return this._checkProposedApi(),this._core.registerCharacterJoiner(t)}deregisterCharacterJoiner(t){this._checkProposedApi(),this._core.deregisterCharacterJoiner(t)}registerMarker(t=0){return this._verifyIntegers(t),this._core.registerMarker(t)}registerDecoration(t){return this._checkProposedApi(),this._verifyPositiveIntegers(t.x??0,t.width??0,t.height??0),this._core.registerDecoration(t)}hasSelection(){return this._core.hasSelection()}select(t,e,n){this._verifyIntegers(t,e,n),this._core.select(t,e,n)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(t,e){this._verifyIntegers(t,e),this._core.selectLines(t,e)}dispose(){super.dispose()}scrollLines(t){this._verifyIntegers(t),this._core.scrollLines(t)}scrollPages(t){this._verifyIntegers(t),this._core.scrollPages(t)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(t){this._verifyIntegers(t),this._core.scrollToLine(t)}clear(){this._core.clear()}write(t,e){this._core.write(t,e)}writeln(t,e){this._core.write(t),this._core.write(`\r
`,e)}paste(t){this._core.paste(t)}refresh(t,e){this._verifyIntegers(t,e),this._core.refresh(t,e)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(t){this._addonManager.loadAddon(this,t)}static get strings(){return{get promptLabel(){return Rw.get()},set promptLabel(t){Rw.set(t)},get tooMuchOutput(){return Ow.get()},set tooMuchOutput(t){Ow.set(t)}}}_verifyIntegers(...t){for(ui of t)if(ui===1/0||isNaN(ui)||ui%1!==0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...t){for(ui of t)if(ui&&(ui===1/0||isNaN(ui)||ui%1!==0||ui<0))throw new Error("This API only accepts positive integers")}};var kee=2,Cee=1,Nee=class{activate(t){this._terminal=t}dispose(){}fit(){let t=this.proposeDimensions();if(!t||!this._terminal||isNaN(t.cols)||isNaN(t.rows))return;let e=this._terminal._core;(this._terminal.rows!==t.rows||this._terminal.cols!==t.cols)&&(e._renderService.clear(),this._terminal.resize(t.cols,t.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let t=this._terminal._core._renderService.dimensions;if(t.css.cell.width===0||t.css.cell.height===0)return;let e=this._terminal.options.scrollback===0?0:this._terminal.options.overviewRuler?.width||14,n=window.getComputedStyle(this._terminal.element.parentElement),s=parseInt(n.getPropertyValue("height")),r=Math.max(0,parseInt(n.getPropertyValue("width"))),i=window.getComputedStyle(this._terminal.element),o={top:parseInt(i.getPropertyValue("padding-top")),bottom:parseInt(i.getPropertyValue("padding-bottom")),right:parseInt(i.getPropertyValue("padding-right")),left:parseInt(i.getPropertyValue("padding-left"))},c=o.top+o.bottom,d=o.right+o.left,h=s-c,g=r-d-e;return{cols:Math.max(kee,Math.floor(g/t.css.cell.width)),rows:Math.max(Cee,Math.floor(h/t.css.cell.height))}}};var Aee=class{constructor(e,n,s,r={}){this._terminal=e,this._regex=n,this._handler=s,this._options=r}provideLinks(e,n){let s=jee.computeLink(e,this._regex,this._terminal,this._handler);n(this._addCallbacks(s))}_addCallbacks(e){return e.map(n=>(n.leave=this._options.leave,n.hover=(s,r)=>{if(this._options.hover){let{range:i}=n;this._options.hover(s,r,i)}},n))}};function Eee(t){try{let e=new URL(t),n=e.password&&e.username?`${e.protocol}//${e.username}:${e.password}@${e.host}`:e.username?`${e.protocol}//${e.username}@${e.host}`:`${e.protocol}//${e.host}`;return t.toLocaleLowerCase().startsWith(n.toLocaleLowerCase())}catch{return!1}}var jee=class m0{static computeLink(e,n,s,r){let i=new RegExp(n.source,(n.flags||"")+"g"),[o,c]=m0._getWindowedLineStrings(e-1,s),d=o.join(""),h,g=[];for(;h=i.exec(d);){let m=h[0];if(!Eee(m))continue;let[b,y]=m0._mapStrIdx(s,c,0,h.index),[w,x]=m0._mapStrIdx(s,b,y,m.length);if(b===-1||y===-1||w===-1||x===-1)continue;let S={start:{x:y+1,y:b+1},end:{x,y:w+1}};g.push({range:S,text:m,activate:r})}return g}static _getWindowedLineStrings(e,n){let s,r=e,i=e,o=0,c="",d=[];if(s=n.buffer.active.getLine(e)){let h=s.translateToString(!0);if(s.isWrapped&&h[0]!==" "){for(o=0;(s=n.buffer.active.getLine(--r))&&o<2048&&(c=s.translateToString(!0),o+=c.length,d.push(c),!(!s.isWrapped||c.indexOf(" ")!==-1)););d.reverse()}for(d.push(h),o=0;(s=n.buffer.active.getLine(++i))&&s.isWrapped&&o<2048&&(c=s.translateToString(!0),o+=c.length,d.push(c),c.indexOf(" ")===-1););}return[d,r]}static _mapStrIdx(e,n,s,r){let i=e.buffer.active,o=i.getNullCell(),c=s;for(;r;){let d=i.getLine(n);if(!d)return[-1,-1];for(let h=c;h<d.length;++h){d.getCell(h,o);let g=o.getChars();if(o.getWidth()&&(r-=g.length||1,h===d.length-1&&g==="")){let m=i.getLine(n+1);m&&m.isWrapped&&(m.getCell(0,o),o.getWidth()===2&&(r+=1))}if(r<0)return[n,h]}n++,c=0}return[n,c]}},Tee=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function Ree(t,e){let n=window.open();if(n){try{n.opener=null}catch{}n.location.href=e}else console.warn("Opening link blocked as opener could not be cleared")}var Oee=class{constructor(t=Ree,e={}){this._handler=t,this._options=e}activate(t){this._terminal=t;let e=this._options,n=e.urlRegex||Tee;this._linkProvider=this._terminal.registerLinkProvider(new Aee(this._terminal,n,this._handler,e))}dispose(){this._linkProvider?.dispose()}};const Mee=0,Bee=1,Dee=2,Lee=4,Iee=["/bin/bash","/bin/sh"];class Pee{ws=null;options;isClosing=!1;hasConnected=!1;constructor(e){this.options=e}async connect(){const e=this.options.command||Iee;for(const n of e)try{await this.tryConnect([n]),this.hasConnected=!0;return}catch{if(n===e[e.length-1])throw new Error(`No shell available (tried: ${e.join(", ")})`)}}tryConnect(e){return new Promise((n,s)=>{const{context:r,namespace:i,pod:o,container:c}=this.options,d=new URLSearchParams;d.set("container",c),d.set("stdin","true"),d.set("stdout","true"),d.set("stderr","true"),d.set("tty","true");for(const y of e)d.append("command",y);const g=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/contexts/${r}/api/v1/namespaces/${i}/pods/${o}/exec?${d.toString()}`;this.ws=new WebSocket(g,["v4.channel.k8s.io"]);let m=!1;const b=setTimeout(()=>{m||(m=!0,this.ws?.close(),s(new Error("Connection timeout")))},5e3);this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{setTimeout(()=>{!m&&this.ws?.readyState===WebSocket.OPEN&&(clearTimeout(b),m=!0,n())},200)},this.ws.onmessage=y=>{if(y.data instanceof ArrayBuffer){const w=new Uint8Array(y.data);if(w.length<1)return;const x=w[0],S=new TextDecoder().decode(w.slice(1));switch(x){case Bee:case Dee:S&&this.options.onData(S);break}}},this.ws.onerror=()=>{clearTimeout(b),m||(m=!0,s(new Error("WebSocket connection failed")))},this.ws.onclose=y=>{clearTimeout(b),m?!this.isClosing&&this.hasConnected&&this.options.onClose?.():(m=!0,s(new Error(y.reason||`Connection closed (code: ${y.code})`)))}})}send(e){if(this.ws?.readyState===WebSocket.OPEN){const s=new TextEncoder().encode(e),r=new Uint8Array(s.length+1);r[0]=Mee,r.set(s,1),this.ws.send(r)}}resize(e,n){if(this.ws?.readyState===WebSocket.OPEN){const s=JSON.stringify({Width:e,Height:n}),i=new TextEncoder().encode(s),o=new Uint8Array(i.length+1);o[0]=Lee,o.set(i,1),this.ws.send(o)}}disconnect(){this.isClosing=!0,this.ws&&(this.ws.close(),this.ws=null)}get isConnected(){return this.ws?.readyState===WebSocket.OPEN}}function $ee(t){const e=[],n=t.spec,s=t.status;if(n?.containers)for(const r of n.containers){const i=s?.containerStatuses?.find(o=>o.name===r.name);e.push({name:r.name,ready:i?.ready??!1})}return e}function zee({resource:t,toolbarRef:e}){const{context:n}=ei(),s=F.useRef(null),r=F.useRef(null),i=F.useRef(null),o=F.useRef(null),[c,d]=F.useState(!1),[h,g]=F.useState(!1),[m,b]=F.useState(""),[y,w]=F.useState(!1),x=t.metadata?.namespace,S=t.metadata?.name,k=$ee(t);F.useEffect(()=>{k.length>0&&!m&&b(k[0].name)},[k,m]),F.useEffect(()=>{if(!s.current||r.current)return;const E=new See({cursorBlink:!0,fontSize:13,fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace',theme:{background:"#0a0a0a",foreground:"#e5e5e5",cursor:"#e5e5e5",cursorAccent:"#0a0a0a",selectionBackground:"#3b82f680",black:"#171717",red:"#ef4444",green:"#22c55e",yellow:"#eab308",blue:"#3b82f6",magenta:"#a855f7",cyan:"#06b6d4",white:"#e5e5e5",brightBlack:"#404040",brightRed:"#f87171",brightGreen:"#4ade80",brightYellow:"#facc15",brightBlue:"#60a5fa",brightMagenta:"#c084fc",brightCyan:"#22d3ee",brightWhite:"#ffffff"},allowProposedApi:!0}),z=new Nee,U=new Oee;E.loadAddon(z),E.loadAddon(U),E.open(s.current),z.fit(),r.current=E,i.current=z;const Y=()=>{z.fit(),o.current?.isConnected&&o.current.resize(E.cols,E.rows)},D=new ResizeObserver(Y);return D.observe(s.current),window.addEventListener("resize",Y),()=>{D.disconnect(),window.removeEventListener("resize",Y),E.dispose(),r.current=null,i.current=null}},[]);const C=F.useCallback(async()=>{if(!x||!S||!m||!r.current)return;o.current?.disconnect(),g(!0);const E=r.current;E.clear(),E.writeln(`Connecting to ${S}/${m}...`),E.writeln("");try{const z=new Pee({context:n,namespace:x,pod:S,container:m,onData:Y=>{E.write(Y)},onError:Y=>{E.writeln(`\r
\x1B[31mError: ${Y}\x1B[0m`)},onClose:()=>{d(!1),E.writeln(`\r
\x1B[33mConnection closed.\x1B[0m`)}});await z.connect(),o.current=z,d(!0);const U=i.current;U&&(U.fit(),z.resize(E.cols,E.rows)),E.onData(Y=>{z.send(Y)})}catch(z){const U=z instanceof Error?z.message:"Failed to connect";E.writeln(`\r
\x1B[31mFailed to connect: ${U}\x1B[0m`)}finally{g(!1)}},[n,x,S,m]),N=F.useCallback(()=>{o.current?.disconnect(),o.current=null,d(!1)},[]),R=F.useRef(!1);F.useEffect(()=>{if(m&&!R.current&&r.current){R.current=!0;const E=setTimeout(()=>{C()},100);return()=>clearTimeout(E)}},[m,C]),F.useEffect(()=>()=>{o.current?.disconnect(),o.current=null},[]);const B=E=>{b(E),w(!1),N()};return f.jsxs("div",{className:"flex flex-col h-full bg-[#0a0a0a]",children:[e&&f.jsx(ck,{toolbarRef:e,children:k.length>1&&f.jsxs("div",{className:"relative",children:[f.jsxs("button",{onClick:()=>w(!y),className:"flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-200 dark:hover:bg-neutral-800 rounded transition-colors",children:[f.jsx("span",{className:"max-w-30 truncate",children:m}),f.jsx(rs,{size:12})]}),y&&f.jsx("div",{className:"absolute right-0 top-full mt-1 z-50 bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg shadow-lg py-1 min-w-40",children:k.map(E=>f.jsxs("button",{onClick:()=>B(E.name),className:`w-full text-left px-3 py-1.5 text-xs hover:bg-neutral-100 dark:hover:bg-neutral-700 flex items-center gap-2 ${E.name===m?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-500/10":"text-neutral-700 dark:text-neutral-300"}`,children:[f.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${E.ready?"bg-emerald-500":"bg-neutral-400"}`}),E.name]},E.name))})]})}),f.jsx("div",{ref:s,className:"flex-1 p-2",style:{minHeight:0}}),f.jsxs("div",{className:"shrink-0 px-4 py-1.5 border-t border-neutral-800 bg-neutral-900/50 flex items-center gap-3 text-xs text-neutral-500",children:[f.jsxs("span",{className:"flex items-center gap-1.5",children:[f.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${c?"bg-emerald-500":h?"bg-amber-500 animate-pulse":"bg-neutral-600"}`}),c?"Connected":h?"Connecting...":"Disconnected"]}),m&&f.jsxs("span",{className:"text-neutral-600",children:[S,"/",m]})]})]})}function Hee(t){const e=Me.c(20),{metadata:n}=t,s=n.labels,r=n.annotations;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=new Set(["pod-template-hash","controller-revision-hash","pod-template-generation"]),e[0]=i):i=e[0];const o=i;let c;e[1]===Symbol.for("react.memo_cache_sentinel")?(c=new Set(["kubectl.kubernetes.io/last-applied-configuration","deployment.kubernetes.io/revision","control-plane.alpha.kubernetes.io/leader","deprecated.daemonset.template.generation","kubernetes.io/description"]),e[1]=c):c=e[1];const d=c;let h;e[2]!==s?(h=s?Object.fromEntries(Object.entries(s).filter(B=>{const[E]=B;return!o.has(E)})):void 0,e[2]=s,e[3]=h):h=e[3];const g=h;let m;e[4]!==r?(m=r?Object.fromEntries(Object.entries(r).filter(B=>{const[E]=B;return!d.has(E)})):void 0,e[4]=r,e[5]=m):m=e[5];const b=m,y=[...Object.entries(g??{}).map(qee),...Object.entries(b??{}).map(Fee)];let w;e[6]!==g?(w=g&&Object.keys(g).length>0,e[6]=g,e[7]=w):w=e[7];const x=w;let S;e[8]!==b?(S=b&&Object.keys(b).length>0,e[8]=b,e[9]=S):S=e[9];const k=S;if(y.length===0)return null;let C;e[10]!==g||e[11]!==x?(C=x&&f.jsxs(f.Fragment,{children:[f.jsx("tr",{children:f.jsx("td",{colSpan:2,className:"pb-2",children:f.jsx("span",{className:"text-[10px] font-medium uppercase tracking-wider text-neutral-500 dark:text-neutral-500",children:"Labels"})})}),Object.entries(g).map(Vee)]}),e[10]=g,e[11]=x,e[12]=C):C=e[12];let N;e[13]!==b||e[14]!==k||e[15]!==x?(N=k&&f.jsxs(f.Fragment,{children:[f.jsx("tr",{children:f.jsx("td",{colSpan:2,className:x?"pt-4 pb-2":"pb-2",children:f.jsx("span",{className:"text-[10px] font-medium uppercase tracking-wider text-neutral-500 dark:text-neutral-500",children:"Annotations"})})}),Object.entries(b).map(Uee)]}),e[13]=b,e[14]=k,e[15]=x,e[16]=N):N=e[16];let R;return e[17]!==C||e[18]!==N?(R=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("table",{className:"w-full text-xs",children:f.jsxs("tbody",{children:[C,N]})})}),e[17]=C,e[18]=N,e[19]=R):R=e[19],R}function Uee(t,e,n){const[s,r]=t;return f.jsxs("tr",{className:e<n.length-1?"border-b border-neutral-200 dark:border-neutral-700/50":"",children:[f.jsx("td",{className:"py-1.5 pr-3 text-purple-600 dark:text-purple-400 align-top whitespace-nowrap w-[1%]",children:s}),f.jsx("td",{className:"py-1.5 text-neutral-600 dark:text-neutral-300 break-all",children:r})]},`annotation-${s}`)}function Vee(t){const[e,n]=t;return f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[f.jsx("td",{className:"py-1.5 pr-3 text-sky-600 dark:text-sky-400 align-top whitespace-nowrap w-[1%]",children:e}),f.jsx("td",{className:"py-1.5 text-emerald-600 dark:text-emerald-400 break-all",children:n})]},`label-${e}`)}function Fee(t){const[e,n]=t;return{key:e,value:n,type:"annotation"}}function qee(t){const[e,n]=t;return{key:e,value:n,type:"label"}}function Kee(t){const e=Me.c(6),{events:n,loading:s}=t;if(s&&n.length===0){let o;return e[0]===Symbol.for("react.memo_cache_sentinel")?(o=f.jsxs("div",{className:"flex items-center gap-2 text-neutral-600 dark:text-neutral-500 text-sm",children:[f.jsx(na,{size:14,className:"animate-spin"}),"Loading events..."]}),e[0]=o):o=e[0],o}if(n.length===0){let o;return e[1]===Symbol.for("react.memo_cache_sentinel")?(o=f.jsx("div",{className:"text-neutral-600 dark:text-neutral-500 text-sm italic",children:"No events found for this resource"}),e[1]=o):o=e[1],o}let r;e[2]!==n?(r=n.map(Wee),e[2]=n,e[3]=r):r=e[3];let i;return e[4]!==r?(i=f.jsx("div",{className:"space-y-2",children:r}),e[4]=r,e[5]=i):i=e[5],i}function Wee(t){return f.jsx(Gee,{event:t},t.metadata?.uid||`${t.reason}-${t.lastTimestamp}`)}function Gee(t){const e=Me.c(36),{event:n}=t;let s;e[0]!==n.eventTime||e[1]!==n.lastTimestamp||e[2]!==n.metadata?(s=()=>n.lastTimestamp?n.lastTimestamp instanceof Date?n.lastTimestamp.toISOString():String(n.lastTimestamp):n.eventTime?String(n.eventTime):n.metadata?.creationTimestamp?n.metadata.creationTimestamp instanceof Date?n.metadata.creationTimestamp.toISOString():String(n.metadata.creationTimestamp):new Date().toISOString(),e[0]=n.eventTime,e[1]=n.lastTimestamp,e[2]=n.metadata,e[3]=s):s=e[3];const r=s;let i,o,c,d,h;if(e[4]!==n.reason||e[5]!==n.type||e[6]!==r){const x=r(),S=n.type==="Warning";h=`p-3 rounded-lg border ${S?"bg-amber-500/5 border-amber-500/20":"bg-neutral-100 dark:bg-neutral-900/50 border-neutral-300 dark:border-neutral-700/50"}`,c="flex items-start justify-between gap-2 mb-1";const k=`px-1.5 py-0.5 rounded text-xs font-medium ${S?"bg-amber-500/20 text-amber-600 dark:text-amber-400":"bg-emerald-500/20 text-emerald-600 dark:text-emerald-400"}`;let C;e[12]!==n.type||e[13]!==k?(C=f.jsx("span",{className:k,children:n.type}),e[12]=n.type,e[13]=k,e[14]=C):C=e[14];let N;e[15]!==n.reason?(N=f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-200",children:n.reason}),e[15]=n.reason,e[16]=N):N=e[16],e[17]!==C||e[18]!==N?(d=f.jsxs("div",{className:"flex items-center gap-2",children:[C,N]}),e[17]=C,e[18]=N,e[19]=d):d=e[19],i="text-xs text-neutral-600 dark:text-neutral-500 whitespace-nowrap",o=Yee(x),e[4]=n.reason,e[5]=n.type,e[6]=r,e[7]=i,e[8]=o,e[9]=c,e[10]=d,e[11]=h}else i=e[7],o=e[8],c=e[9],d=e[10],h=e[11];let g;e[20]!==i||e[21]!==o?(g=f.jsx("span",{className:i,children:o}),e[20]=i,e[21]=o,e[22]=g):g=e[22];let m;e[23]!==c||e[24]!==d||e[25]!==g?(m=f.jsxs("div",{className:c,children:[d,g]}),e[23]=c,e[24]=d,e[25]=g,e[26]=m):m=e[26];let b;e[27]!==n.message?(b=f.jsx("p",{className:"text-sm text-neutral-700 dark:text-neutral-400",children:n.message}),e[27]=n.message,e[28]=b):b=e[28];let y;e[29]!==n.count?(y=n.count&&n.count>1&&f.jsxs("p",{className:"text-xs text-neutral-600 dark:text-neutral-500 mt-1",children:["Occurred ",n.count," times"]}),e[29]=n.count,e[30]=y):y=e[30];let w;return e[31]!==y||e[32]!==h||e[33]!==m||e[34]!==b?(w=f.jsxs("div",{className:h,children:[m,b,y]}),e[31]=y,e[32]=h,e[33]=m,e[34]=b,e[35]=w):w=e[35],w}function Yee(t){const e=new Date(t),s=new Date().getTime()-e.getTime(),r=Math.floor(s/1e3),i=Math.floor(r/60),o=Math.floor(i/60),c=Math.floor(o/24);return c>0?`${c}d ago`:o>0?`${o}h ago`:i>0?`${i}m ago`:`${r}s ago`}function eT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=Array(e);n<e;n++)s[n]=t[n];return s}function Xee(t){if(Array.isArray(t))return t}function Jee(t,e,n){return(e=rte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qee(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s,r,i,o,c=[],d=!0,h=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(d=(s=i.call(n)).done)&&(c.push(s.value),c.length!==e);d=!0);}catch(g){h=!0,r=g}finally{try{if(!d&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(h)throw r}}return c}}function Zee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function nT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tT(Object(n),!0).forEach(function(s){Jee(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tT(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function ete(t,e){if(t==null)return{};var n,s,r=tte(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function tte(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)!==-1)continue;n[s]=t[s]}return n}function nte(t,e){return Xee(t)||Qee(t,e)||ite(t,e)||Zee()}function ste(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rte(t){var e=ste(t,"string");return typeof e=="symbol"?e:e+""}function ite(t,e){if(t){if(typeof t=="string")return eT(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eT(t,e):void 0}}function ate(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function rT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sT(Object(n),!0).forEach(function(s){ate(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sT(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function ote(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(s){return e.reduceRight(function(r,i){return i(r)},s)}}function Cd(t){return function e(){for(var n=this,s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return r.length>=t.length?t.apply(this,r):function(){for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];return e.apply(n,[].concat(r,c))}}}function kg(t){return{}.toString.call(t).includes("Object")}function lte(t){return!Object.keys(t).length}function yf(t){return typeof t=="function"}function cte(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ute(t,e){return kg(e)||lo("changeType"),Object.keys(e).some(function(n){return!cte(t,n)})&&lo("changeField"),e}function hte(t){yf(t)||lo("selectorType")}function dte(t){yf(t)||kg(t)||lo("handlerType"),kg(t)&&Object.values(t).some(function(e){return!yf(e)})&&lo("handlersType")}function fte(t){t||lo("initialIsRequired"),kg(t)||lo("initialType"),lte(t)&&lo("initialContent")}function pte(t,e){throw new Error(t[e]||t.default)}var mte={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},lo=Cd(pte)(mte),Hm={changes:ute,selector:hte,handler:dte,initial:fte};function gte(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Hm.initial(t),Hm.handler(e);var n={current:t},s=Cd(vte)(n,e),r=Cd(bte)(n),i=Cd(Hm.changes)(t),o=Cd(yte)(n);function c(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(g){return g};return Hm.selector(h),h(n.current)}function d(h){ote(s,r,i,o)(h)}return[c,d]}function yte(t,e){return yf(e)?e(t.current):e}function bte(t,e){return t.current=rT(rT({},t.current),e),e}function vte(t,e,n){return yf(e)?e(t.current):Object.keys(n).forEach(function(s){var r;return(r=e[s])===null||r===void 0?void 0:r.call(e,t.current[s])}),n}var xte={create:gte},_te={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function wte(t){return function e(){for(var n=this,s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return r.length>=t.length?t.apply(this,r):function(){for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];return e.apply(n,[].concat(r,c))}}}function Ste(t){return{}.toString.call(t).includes("Object")}function kte(t){return t||iT("configIsRequired"),Ste(t)||iT("configType"),t.urls?(Cte(),{paths:{vs:t.urls.monacoBase}}):t}function Cte(){console.warn(jD.deprecation)}function Nte(t,e){throw new Error(t[e]||t.default)}var jD={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},iT=wte(Nte)(jD),Ate={config:kte},Ete=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return function(r){return n.reduceRight(function(i,o){return o(i)},r)}};function TD(t,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&t[n]&&Object.assign(e[n],TD(t[n],e[n]))}),nT(nT({},t),e)}var jte={type:"cancelation",msg:"operation is manually canceled"};function Nx(t){var e=!1,n=new Promise(function(s,r){t.then(function(i){return e?r(jte):s(i)}),t.catch(r)});return n.cancel=function(){return e=!0},n}var Tte=["monaco"],Rte=xte.create({config:_te,isInitialized:!1,resolve:null,reject:null,monaco:null}),RD=nte(Rte,2),Xf=RD[0],Wy=RD[1];function Ote(t){var e=Ate.config(t),n=e.monaco,s=ete(e,Tte);Wy(function(r){return{config:TD(r.config,s),monaco:n}})}function Mte(){var t=Xf(function(e){var n=e.monaco,s=e.isInitialized,r=e.resolve;return{monaco:n,isInitialized:s,resolve:r}});if(!t.isInitialized){if(Wy({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),Nx(Ax);if(window.monaco&&window.monaco.editor)return OD(window.monaco),t.resolve(window.monaco),Nx(Ax);Ete(Bte,Lte)(Ite)}return Nx(Ax)}function Bte(t){return document.body.appendChild(t)}function Dte(t){var e=document.createElement("script");return t&&(e.src=t),e}function Lte(t){var e=Xf(function(s){var r=s.config,i=s.reject;return{config:r,reject:i}}),n=Dte("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=e.reject,n}function Ite(){var t=Xf(function(n){var s=n.config,r=n.resolve,i=n.reject;return{config:s,resolve:r,reject:i}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(n){var s=n.m||n;OD(s),t.resolve(s)},function(n){t.reject(n)})}function OD(t){Xf().monaco||Wy({monaco:t})}function Pte(){return Xf(function(t){var e=t.monaco;return e})}var Ax=new Promise(function(t,e){return Wy({resolve:t,reject:e})}),MD={config:Ote,init:Mte,__getMonacoInstance:Pte},$te={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Ex=$te,zte={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},Hte=zte;function Ute({children:t}){return Wr.createElement("div",{style:Hte.container},t)}var Vte=Ute,Fte=Vte;function qte({width:t,height:e,isEditorReady:n,loading:s,_ref:r,className:i,wrapperProps:o}){return Wr.createElement("section",{style:{...Ex.wrapper,width:t,height:e},...o},!n&&Wr.createElement(Fte,null,s),Wr.createElement("div",{ref:r,style:{...Ex.fullWidth,...!n&&Ex.hide},className:i}))}var Kte=qte,BD=F.memo(Kte);function Wte(t){F.useEffect(t,[])}var DD=Wte;function Gte(t,e,n=!0){let s=F.useRef(!0);F.useEffect(s.current||!n?()=>{s.current=!1}:t,e)}var lr=Gte;function Fd(){}function Ic(t,e,n,s){return Yte(t,s)||Xte(t,e,n,s)}function Yte(t,e){return t.editor.getModel(LD(t,e))}function Xte(t,e,n,s){return t.editor.createModel(e,n,s?LD(t,s):void 0)}function LD(t,e){return t.Uri.parse(e)}function Jte({original:t,modified:e,language:n,originalLanguage:s,modifiedLanguage:r,originalModelPath:i,modifiedModelPath:o,keepCurrentOriginalModel:c=!1,keepCurrentModifiedModel:d=!1,theme:h="light",loading:g="Loading...",options:m={},height:b="100%",width:y="100%",className:w,wrapperProps:x={},beforeMount:S=Fd,onMount:k=Fd}){let[C,N]=F.useState(!1),[R,B]=F.useState(!0),E=F.useRef(null),z=F.useRef(null),U=F.useRef(null),Y=F.useRef(k),D=F.useRef(S),W=F.useRef(!1);DD(()=>{let I=MD.init();return I.then(L=>(z.current=L)&&B(!1)).catch(L=>L?.type!=="cancelation"&&console.error("Monaco initialization: error:",L)),()=>E.current?X():I.cancel()}),lr(()=>{if(E.current&&z.current){let I=E.current.getOriginalEditor(),L=Ic(z.current,t||"",s||n||"text",i||"");L!==I.getModel()&&I.setModel(L)}},[i],C),lr(()=>{if(E.current&&z.current){let I=E.current.getModifiedEditor(),L=Ic(z.current,e||"",r||n||"text",o||"");L!==I.getModel()&&I.setModel(L)}},[o],C),lr(()=>{let I=E.current.getModifiedEditor();I.getOption(z.current.editor.EditorOption.readOnly)?I.setValue(e||""):e!==I.getValue()&&(I.executeEdits("",[{range:I.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),I.pushUndoStop())},[e],C),lr(()=>{E.current?.getModel()?.original.setValue(t||"")},[t],C),lr(()=>{let{original:I,modified:L}=E.current.getModel();z.current.editor.setModelLanguage(I,s||n||"text"),z.current.editor.setModelLanguage(L,r||n||"text")},[n,s,r],C),lr(()=>{z.current?.editor.setTheme(h)},[h],C),lr(()=>{E.current?.updateOptions(m)},[m],C);let V=F.useCallback(()=>{if(!z.current)return;D.current(z.current);let I=Ic(z.current,t||"",s||n||"text",i||""),L=Ic(z.current,e||"",r||n||"text",o||"");E.current?.setModel({original:I,modified:L})},[n,e,r,t,s,i,o]),q=F.useCallback(()=>{!W.current&&U.current&&(E.current=z.current.editor.createDiffEditor(U.current,{automaticLayout:!0,...m}),V(),z.current?.editor.setTheme(h),N(!0),W.current=!0)},[m,h,V]);F.useEffect(()=>{C&&Y.current(E.current,z.current)},[C]),F.useEffect(()=>{!R&&!C&&q()},[R,C,q]);function X(){let I=E.current?.getModel();c||I?.original?.dispose(),d||I?.modified?.dispose(),E.current?.dispose()}return Wr.createElement(BD,{width:y,height:b,isEditorReady:C,loading:g,_ref:U,className:w,wrapperProps:x})}var Qte=Jte;F.memo(Qte);function Zte(t){let e=F.useRef();return F.useEffect(()=>{e.current=t},[t]),e.current}var ene=Zte,Um=new Map;function tne({defaultValue:t,defaultLanguage:e,defaultPath:n,value:s,language:r,path:i,theme:o="light",line:c,loading:d="Loading...",options:h={},overrideServices:g={},saveViewState:m=!0,keepCurrentModel:b=!1,width:y="100%",height:w="100%",className:x,wrapperProps:S={},beforeMount:k=Fd,onMount:C=Fd,onChange:N,onValidate:R=Fd}){let[B,E]=F.useState(!1),[z,U]=F.useState(!0),Y=F.useRef(null),D=F.useRef(null),W=F.useRef(null),V=F.useRef(C),q=F.useRef(k),X=F.useRef(),I=F.useRef(s),L=ene(i),J=F.useRef(!1),G=F.useRef(!1);DD(()=>{let O=MD.init();return O.then(K=>(Y.current=K)&&U(!1)).catch(K=>K?.type!=="cancelation"&&console.error("Monaco initialization: error:",K)),()=>D.current?T():O.cancel()}),lr(()=>{let O=Ic(Y.current,t||s||"",e||r||"",i||n||"");O!==D.current?.getModel()&&(m&&Um.set(L,D.current?.saveViewState()),D.current?.setModel(O),m&&D.current?.restoreViewState(Um.get(i)))},[i],B),lr(()=>{D.current?.updateOptions(h)},[h],B),lr(()=>{!D.current||s===void 0||(D.current.getOption(Y.current.editor.EditorOption.readOnly)?D.current.setValue(s):s!==D.current.getValue()&&(G.current=!0,D.current.executeEdits("",[{range:D.current.getModel().getFullModelRange(),text:s,forceMoveMarkers:!0}]),D.current.pushUndoStop(),G.current=!1))},[s],B),lr(()=>{let O=D.current?.getModel();O&&r&&Y.current?.editor.setModelLanguage(O,r)},[r],B),lr(()=>{c!==void 0&&D.current?.revealLine(c)},[c],B),lr(()=>{Y.current?.editor.setTheme(o)},[o],B);let P=F.useCallback(()=>{if(!(!W.current||!Y.current)&&!J.current){q.current(Y.current);let O=i||n,K=Ic(Y.current,s||t||"",e||r||"",O||"");D.current=Y.current?.editor.create(W.current,{model:K,automaticLayout:!0,...h},g),m&&D.current.restoreViewState(Um.get(O)),Y.current.editor.setTheme(o),c!==void 0&&D.current.revealLine(c),E(!0),J.current=!0}},[t,e,n,s,r,i,h,g,m,o,c]);F.useEffect(()=>{B&&V.current(D.current,Y.current)},[B]),F.useEffect(()=>{!z&&!B&&P()},[z,B,P]),I.current=s,F.useEffect(()=>{B&&N&&(X.current?.dispose(),X.current=D.current?.onDidChangeModelContent(O=>{G.current||N(D.current.getValue(),O)}))},[B,N]),F.useEffect(()=>{if(B){let O=Y.current.editor.onDidChangeMarkers(K=>{let j=D.current.getModel()?.uri;if(j&&K.find(Z=>Z.path===j.path)){let Z=Y.current.editor.getModelMarkers({resource:j});R?.(Z)}});return()=>{O?.dispose()}}return()=>{}},[B,R]);function T(){X.current?.dispose(),b?m&&Um.set(i,D.current.saveViewState()):D.current.getModel()?.dispose(),D.current.dispose()}return Wr.createElement(BD,{width:y,height:w,isEditorReady:B,loading:d,_ref:W,className:x,wrapperProps:S})}var nne=tne,sne=F.memo(nne),rne=sne;const xk=Symbol.for("yaml.alias"),pS=Symbol.for("yaml.document"),co=Symbol.for("yaml.map"),ID=Symbol.for("yaml.pair"),Si=Symbol.for("yaml.scalar"),Bu=Symbol.for("yaml.seq"),Ir=Symbol.for("yaml.node.type"),El=t=>!!t&&typeof t=="object"&&t[Ir]===xk,Jf=t=>!!t&&typeof t=="object"&&t[Ir]===pS,Qf=t=>!!t&&typeof t=="object"&&t[Ir]===co,xn=t=>!!t&&typeof t=="object"&&t[Ir]===ID,Yt=t=>!!t&&typeof t=="object"&&t[Ir]===Si,Zf=t=>!!t&&typeof t=="object"&&t[Ir]===Bu;function yn(t){if(t&&typeof t=="object")switch(t[Ir]){case co:case Bu:return!0}return!1}function vn(t){if(t&&typeof t=="object")switch(t[Ir]){case xk:case co:case Si:case Bu:return!0}return!1}const PD=t=>(Yt(t)||yn(t))&&!!t.anchor,zo=Symbol("break visit"),ine=Symbol("skip children"),qd=Symbol("remove node");function Du(t,e){const n=ane(e);Jf(t)?Pc(null,t.contents,n,Object.freeze([t]))===qd&&(t.contents=null):Pc(null,t,n,Object.freeze([]))}Du.BREAK=zo;Du.SKIP=ine;Du.REMOVE=qd;function Pc(t,e,n,s){const r=one(t,e,n,s);if(vn(r)||xn(r))return lne(t,s,r),Pc(t,r,n,s);if(typeof r!="symbol"){if(yn(e)){s=Object.freeze(s.concat(e));for(let i=0;i<e.items.length;++i){const o=Pc(i,e.items[i],n,s);if(typeof o=="number")i=o-1;else{if(o===zo)return zo;o===qd&&(e.items.splice(i,1),i-=1)}}}else if(xn(e)){s=Object.freeze(s.concat(e));const i=Pc("key",e.key,n,s);if(i===zo)return zo;i===qd&&(e.key=null);const o=Pc("value",e.value,n,s);if(o===zo)return zo;o===qd&&(e.value=null)}}return r}function ane(t){return typeof t=="object"&&(t.Collection||t.Node||t.Value)?Object.assign({Alias:t.Node,Map:t.Node,Scalar:t.Node,Seq:t.Node},t.Value&&{Map:t.Value,Scalar:t.Value,Seq:t.Value},t.Collection&&{Map:t.Collection,Seq:t.Collection},t):t}function one(t,e,n,s){if(typeof n=="function")return n(t,e,s);if(Qf(e))return n.Map?.(t,e,s);if(Zf(e))return n.Seq?.(t,e,s);if(xn(e))return n.Pair?.(t,e,s);if(Yt(e))return n.Scalar?.(t,e,s);if(El(e))return n.Alias?.(t,e,s)}function lne(t,e,n){const s=e[e.length-1];if(yn(s))s.items[t]=n;else if(xn(s))t==="key"?s.key=n:s.value=n;else if(Jf(s))s.contents=n;else{const r=El(s)?"alias":"scalar";throw new Error(`Cannot replace node with ${r} parent`)}}const cne={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},une=t=>t.replace(/[!,[\]{}]/g,e=>cne[e]);class _s{constructor(e,n){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},_s.defaultYaml,e),this.tags=Object.assign({},_s.defaultTags,n)}clone(){const e=new _s(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new _s(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:_s.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},_s.defaultTags);break}return e}add(e,n){this.atNextDocument&&(this.yaml={explicit:_s.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},_s.defaultTags),this.atNextDocument=!1);const s=e.trim().split(/[ \t]+/),r=s.shift();switch(r){case"%TAG":{if(s.length!==2&&(n(0,"%TAG directive should contain exactly two parts"),s.length<2))return!1;const[i,o]=s;return this.tags[i]=o,!0}case"%YAML":{if(this.yaml.explicit=!0,s.length!==1)return n(0,"%YAML directive should contain exactly one part"),!1;const[i]=s;if(i==="1.1"||i==="1.2")return this.yaml.version=i,!0;{const o=/^\d+\.\d+$/.test(i);return n(6,`Unsupported YAML version ${i}`,o),!1}}default:return n(0,`Unknown directive ${r}`,!0),!1}}tagName(e,n){if(e==="!")return"!";if(e[0]!=="!")return n(`Not a valid tag: ${e}`),null;if(e[1]==="<"){const o=e.slice(2,-1);return o==="!"||o==="!!"?(n(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&n("Verbatim tags must end with a >"),o)}const[,s,r]=e.match(/^(.*!)([^!]*)$/s);r||n(`The ${e} tag has no suffix`);const i=this.tags[s];if(i)try{return i+decodeURIComponent(r)}catch(o){return n(String(o)),null}return s==="!"?e:(n(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[n,s]of Object.entries(this.tags))if(e.startsWith(s))return n+une(e.substring(s.length));return e[0]==="!"?e:`!<${e}>`}toString(e){const n=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],s=Object.entries(this.tags);let r;if(e&&s.length>0&&vn(e.contents)){const i={};Du(e.contents,(o,c)=>{vn(c)&&c.tag&&(i[c.tag]=!0)}),r=Object.keys(i)}else r=[];for(const[i,o]of s)i==="!!"&&o==="tag:yaml.org,2002:"||(!e||r.some(c=>c.startsWith(o)))&&n.push(`%TAG ${i} ${o}`);return n.join(`
`)}}_s.defaultYaml={explicit:!1,version:"1.2"};_s.defaultTags={"!!":"tag:yaml.org,2002:"};function $D(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){const n=`Anchor must not contain whitespace or control characters: ${JSON.stringify(t)}`;throw new Error(n)}return!0}function zD(t){const e=new Set;return Du(t,{Value(n,s){s.anchor&&e.add(s.anchor)}}),e}function HD(t,e){for(let n=1;;++n){const s=`${t}${n}`;if(!e.has(s))return s}}function hne(t,e){const n=[],s=new Map;let r=null;return{onAnchor:i=>{n.push(i),r??(r=zD(t));const o=HD(e,r);return r.add(o),o},setAnchors:()=>{for(const i of n){const o=s.get(i);if(typeof o=="object"&&o.anchor&&(Yt(o.node)||yn(o.node)))o.node.anchor=o.anchor;else{const c=new Error("Failed to resolve repeated object (this should not happen)");throw c.source=i,c}}},sourceObjects:s}}function $c(t,e,n,s){if(s&&typeof s=="object")if(Array.isArray(s))for(let r=0,i=s.length;r<i;++r){const o=s[r],c=$c(t,s,String(r),o);c===void 0?delete s[r]:c!==o&&(s[r]=c)}else if(s instanceof Map)for(const r of Array.from(s.keys())){const i=s.get(r),o=$c(t,s,r,i);o===void 0?s.delete(r):o!==i&&s.set(r,o)}else if(s instanceof Set)for(const r of Array.from(s)){const i=$c(t,s,r,r);i===void 0?s.delete(r):i!==r&&(s.delete(r),s.add(i))}else for(const[r,i]of Object.entries(s)){const o=$c(t,s,r,i);o===void 0?delete s[r]:o!==i&&(s[r]=o)}return t.call(e,n,s)}function Br(t,e,n){if(Array.isArray(t))return t.map((s,r)=>Br(s,String(r),n));if(t&&typeof t.toJSON=="function"){if(!n||!PD(t))return t.toJSON(e,n);const s={aliasCount:0,count:1,res:void 0};n.anchors.set(t,s),n.onCreate=i=>{s.res=i,delete n.onCreate};const r=t.toJSON(e,n);return n.onCreate&&n.onCreate(r),r}return typeof t=="bigint"&&!n?.keep?Number(t):t}class _k{constructor(e){Object.defineProperty(this,Ir,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:n,maxAliasCount:s,onAnchor:r,reviver:i}={}){if(!Jf(e))throw new TypeError("A document argument is required");const o={anchors:new Map,doc:e,keep:!0,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof s=="number"?s:100},c=Br(this,"",o);if(typeof r=="function")for(const{count:d,res:h}of o.anchors.values())r(h,d);return typeof i=="function"?$c(i,{"":c},"",c):c}}class wk extends _k{constructor(e){super(xk),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e,n){let s;n?.aliasResolveCache?s=n.aliasResolveCache:(s=[],Du(e,{Node:(i,o)=>{(El(o)||PD(o))&&s.push(o)}}),n&&(n.aliasResolveCache=s));let r;for(const i of s){if(i===this)break;i.anchor===this.source&&(r=i)}return r}toJSON(e,n){if(!n)return{source:this.source};const{anchors:s,doc:r,maxAliasCount:i}=n,o=this.resolve(r,n);if(!o){const d=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(d)}let c=s.get(o);if(c||(Br(o,null,n),c=s.get(o)),c?.res===void 0){const d="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(d)}if(i>=0&&(c.count+=1,c.aliasCount===0&&(c.aliasCount=g0(r,o,s)),c.count*c.aliasCount>i)){const d="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(d)}return c.res}toString(e,n,s){const r=`*${this.source}`;if(e){if($D(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const i=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(i)}if(e.implicitKey)return`${r} `}return r}}function g0(t,e,n){if(El(e)){const s=e.resolve(t),r=n&&s&&n.get(s);return r?r.count*r.aliasCount:0}else if(yn(e)){let s=0;for(const r of e.items){const i=g0(t,r,n);i>s&&(s=i)}return s}else if(xn(e)){const s=g0(t,e.key,n),r=g0(t,e.value,n);return Math.max(s,r)}return 1}const UD=t=>!t||typeof t!="function"&&typeof t!="object";class ht extends _k{constructor(e){super(Si),this.value=e}toJSON(e,n){return n?.keep?this.value:Br(this.value,e,n)}toString(){return String(this.value)}}ht.BLOCK_FOLDED="BLOCK_FOLDED";ht.BLOCK_LITERAL="BLOCK_LITERAL";ht.PLAIN="PLAIN";ht.QUOTE_DOUBLE="QUOTE_DOUBLE";ht.QUOTE_SINGLE="QUOTE_SINGLE";const dne="tag:yaml.org,2002:";function fne(t,e,n){if(e){const s=n.filter(i=>i.tag===e),r=s.find(i=>!i.format)??s[0];if(!r)throw new Error(`Tag ${e} not found`);return r}return n.find(s=>s.identify?.(t)&&!s.format)}function bf(t,e,n){if(Jf(t)&&(t=t.contents),vn(t))return t;if(xn(t)){const m=n.schema[co].createNode?.(n.schema,null,n);return m.items.push(t),m}(t instanceof String||t instanceof Number||t instanceof Boolean||typeof BigInt<"u"&&t instanceof BigInt)&&(t=t.valueOf());const{aliasDuplicateObjects:s,onAnchor:r,onTagObj:i,schema:o,sourceObjects:c}=n;let d;if(s&&t&&typeof t=="object"){if(d=c.get(t),d)return d.anchor??(d.anchor=r(t)),new wk(d.anchor);d={anchor:null,node:null},c.set(t,d)}e?.startsWith("!!")&&(e=dne+e.slice(2));let h=fne(t,e,o.tags);if(!h){if(t&&typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object"){const m=new ht(t);return d&&(d.node=m),m}h=t instanceof Map?o[co]:Symbol.iterator in Object(t)?o[Bu]:o[co]}i&&(i(h),delete n.onTagObj);const g=h?.createNode?h.createNode(n.schema,t,n):typeof h?.nodeClass?.from=="function"?h.nodeClass.from(n.schema,t,n):new ht(t);return e?g.tag=e:h.default||(g.tag=h.tag),d&&(d.node=g),g}function Cg(t,e,n){let s=n;for(let r=e.length-1;r>=0;--r){const i=e[r];if(typeof i=="number"&&Number.isInteger(i)&&i>=0){const o=[];o[i]=s,s=o}else s=new Map([[i,s]])}return bf(s,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}const Nd=t=>t==null||typeof t=="object"&&!!t[Symbol.iterator]().next().done;class VD extends _k{constructor(e,n){super(e),Object.defineProperty(this,"schema",{value:n,configurable:!0,enumerable:!1,writable:!0})}clone(e){const n=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(n.schema=e),n.items=n.items.map(s=>vn(s)||xn(s)?s.clone(e):s),this.range&&(n.range=this.range.slice()),n}addIn(e,n){if(Nd(e))this.add(n);else{const[s,...r]=e,i=this.get(s,!0);if(yn(i))i.addIn(r,n);else if(i===void 0&&this.schema)this.set(s,Cg(this.schema,r,n));else throw new Error(`Expected YAML collection at ${s}. Remaining path: ${r}`)}}deleteIn(e){const[n,...s]=e;if(s.length===0)return this.delete(n);const r=this.get(n,!0);if(yn(r))return r.deleteIn(s);throw new Error(`Expected YAML collection at ${n}. Remaining path: ${s}`)}getIn(e,n){const[s,...r]=e,i=this.get(s,!0);return r.length===0?!n&&Yt(i)?i.value:i:yn(i)?i.getIn(r,n):void 0}hasAllNullValues(e){return this.items.every(n=>{if(!xn(n))return!1;const s=n.value;return s==null||e&&Yt(s)&&s.value==null&&!s.commentBefore&&!s.comment&&!s.tag})}hasIn(e){const[n,...s]=e;if(s.length===0)return this.has(n);const r=this.get(n,!0);return yn(r)?r.hasIn(s):!1}setIn(e,n){const[s,...r]=e;if(r.length===0)this.set(s,n);else{const i=this.get(s,!0);if(yn(i))i.setIn(r,n);else if(i===void 0&&this.schema)this.set(s,Cg(this.schema,r,n));else throw new Error(`Expected YAML collection at ${s}. Remaining path: ${r}`)}}}const pne=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function ta(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}const Go=(t,e,n)=>t.endsWith(`
`)?ta(n,e):n.includes(`
`)?`
`+ta(n,e):(t.endsWith(" ")?"":" ")+n,FD="flow",mS="block",y0="quoted";function Gy(t,e,n="flow",{indentAtStart:s,lineWidth:r=80,minContentWidth:i=20,onFold:o,onOverflow:c}={}){if(!r||r<0)return t;r<i&&(i=0);const d=Math.max(1+i,1+r-e.length);if(t.length<=d)return t;const h=[],g={};let m=r-e.length;typeof s=="number"&&(s>r-Math.max(2,i)?h.push(0):m=r-s);let b,y,w=!1,x=-1,S=-1,k=-1;n===mS&&(x=aT(t,x,e.length),x!==-1&&(m=x+d));for(let N;N=t[x+=1];){if(n===y0&&N==="\\"){switch(S=x,t[x+1]){case"x":x+=3;break;case"u":x+=5;break;case"U":x+=9;break;default:x+=1}k=x}if(N===`
`)n===mS&&(x=aT(t,x,e.length)),m=x+e.length+d,b=void 0;else{if(N===" "&&y&&y!==" "&&y!==`
`&&y!=="	"){const R=t[x+1];R&&R!==" "&&R!==`
`&&R!=="	"&&(b=x)}if(x>=m)if(b)h.push(b),m=b+d,b=void 0;else if(n===y0){for(;y===" "||y==="	";)y=N,N=t[x+=1],w=!0;const R=x>k+1?x-2:S-1;if(g[R])return t;h.push(R),g[R]=!0,m=R+d,b=void 0}else w=!0}y=N}if(w&&c&&c(),h.length===0)return t;o&&o();let C=t.slice(0,h[0]);for(let N=0;N<h.length;++N){const R=h[N],B=h[N+1]||t.length;R===0?C=`
${e}${t.slice(0,B)}`:(n===y0&&g[R]&&(C+=`${t[R]}\\`),C+=`
${e}${t.slice(R+1,B)}`)}return C}function aT(t,e,n){let s=e,r=e+1,i=t[r];for(;i===" "||i==="	";)if(e<r+n)i=t[++e];else{do i=t[++e];while(i&&i!==`
`);s=e,r=e+1,i=t[r]}return s}const Yy=(t,e)=>({indentAtStart:e?t.indent.length:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),Xy=t=>/^(%|---|\.\.\.)/m.test(t);function mne(t,e,n){if(!e||e<0)return!1;const s=e-n,r=t.length;if(r<=s)return!1;for(let i=0,o=0;i<r;++i)if(t[i]===`
`){if(i-o>s)return!0;if(o=i+1,r-o<=s)return!1}return!0}function Kd(t,e){const n=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return n;const{implicitKey:s}=e,r=e.options.doubleQuotedMinMultiLineLength,i=e.indent||(Xy(t)?"  ":"");let o="",c=0;for(let d=0,h=n[d];h;h=n[++d])if(h===" "&&n[d+1]==="\\"&&n[d+2]==="n"&&(o+=n.slice(c,d)+"\\ ",d+=1,c=d,h="\\"),h==="\\")switch(n[d+1]){case"u":{o+=n.slice(c,d);const g=n.substr(d+2,4);switch(g){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:g.substr(0,2)==="00"?o+="\\x"+g.substr(2):o+=n.substr(d,6)}d+=5,c=d+1}break;case"n":if(s||n[d+2]==='"'||n.length<r)d+=1;else{for(o+=n.slice(c,d)+`

`;n[d+2]==="\\"&&n[d+3]==="n"&&n[d+4]!=='"';)o+=`
`,d+=2;o+=i,n[d+2]===" "&&(o+="\\"),d+=1,c=d+1}break;default:d+=1}return o=c?o+n.slice(c):n,s?o:Gy(o,i,y0,Yy(e,!1))}function gS(t,e){if(e.options.singleQuote===!1||e.implicitKey&&t.includes(`
`)||/[ \t]\n|\n[ \t]/.test(t))return Kd(t,e);const n=e.indent||(Xy(t)?"  ":""),s="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return e.implicitKey?s:Gy(s,n,FD,Yy(e,!1))}function zc(t,e){const{singleQuote:n}=e.options;let s;if(n===!1)s=Kd;else{const r=t.includes('"'),i=t.includes("'");r&&!i?s=gS:i&&!r?s=Kd:s=n?gS:Kd}return s(t,e)}let yS;try{yS=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{yS=/\n+(?!\n|$)/g}function b0({comment:t,type:e,value:n},s,r,i){const{blockQuote:o,commentString:c,lineWidth:d}=s.options;if(!o||/\n[\t ]+$/.test(n))return zc(n,s);const h=s.indent||(s.forceBlockIndent||Xy(n)?"  ":""),g=o==="literal"?!0:o==="folded"||e===ht.BLOCK_FOLDED?!1:e===ht.BLOCK_LITERAL?!0:!mne(n,d,h.length);if(!n)return g?`|
`:`>
`;let m,b;for(b=n.length;b>0;--b){const B=n[b-1];if(B!==`
`&&B!=="	"&&B!==" ")break}let y=n.substring(b);const w=y.indexOf(`
`);w===-1?m="-":n===y||w!==y.length-1?(m="+",i&&i()):m="",y&&(n=n.slice(0,-y.length),y[y.length-1]===`
`&&(y=y.slice(0,-1)),y=y.replace(yS,`$&${h}`));let x=!1,S,k=-1;for(S=0;S<n.length;++S){const B=n[S];if(B===" ")x=!0;else if(B===`
`)k=S;else break}let C=n.substring(0,k<S?k+1:S);C&&(n=n.substring(C.length),C=C.replace(/\n+/g,`$&${h}`));let R=(x?h?"2":"1":"")+m;if(t&&(R+=" "+c(t.replace(/ ?[\r\n]+/g," ")),r&&r()),!g){const B=n.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${h}`);let E=!1;const z=Yy(s,!0);o!=="folded"&&e!==ht.BLOCK_FOLDED&&(z.onOverflow=()=>{E=!0});const U=Gy(`${C}${B}${y}`,h,mS,z);if(!E)return`>${R}
${h}${U}`}return n=n.replace(/\n+/g,`$&${h}`),`|${R}
${h}${C}${n}${y}`}function gne(t,e,n,s){const{type:r,value:i}=t,{actualString:o,implicitKey:c,indent:d,indentStep:h,inFlow:g}=e;if(c&&i.includes(`
`)||g&&/[[\]{},]/.test(i))return zc(i,e);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(i))return c||g||!i.includes(`
`)?zc(i,e):b0(t,e,n,s);if(!c&&!g&&r!==ht.PLAIN&&i.includes(`
`))return b0(t,e,n,s);if(Xy(i)){if(d==="")return e.forceBlockIndent=!0,b0(t,e,n,s);if(c&&d===h)return zc(i,e)}const m=i.replace(/\n+/g,`$&
${d}`);if(o){const b=x=>x.default&&x.tag!=="tag:yaml.org,2002:str"&&x.test?.test(m),{compat:y,tags:w}=e.doc.schema;if(w.some(b)||y?.some(b))return zc(i,e)}return c?m:Gy(m,d,FD,Yy(e,!1))}function Sk(t,e,n,s){const{implicitKey:r,inFlow:i}=e,o=typeof t.value=="string"?t:Object.assign({},t,{value:String(t.value)});let{type:c}=t;c!==ht.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)&&(c=ht.QUOTE_DOUBLE);const d=g=>{switch(g){case ht.BLOCK_FOLDED:case ht.BLOCK_LITERAL:return r||i?zc(o.value,e):b0(o,e,n,s);case ht.QUOTE_DOUBLE:return Kd(o.value,e);case ht.QUOTE_SINGLE:return gS(o.value,e);case ht.PLAIN:return gne(o,e,n,s);default:return null}};let h=d(c);if(h===null){const{defaultKeyType:g,defaultStringType:m}=e.options,b=r&&g||m;if(h=d(b),h===null)throw new Error(`Unsupported default string type ${b}`)}return h}function qD(t,e){const n=Object.assign({blockQuote:!0,commentString:pne,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e);let s;switch(n.collectionStyle){case"block":s=!1;break;case"flow":s=!0;break;default:s=null}return{anchors:new Set,doc:t,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:typeof n.indent=="number"?" ".repeat(n.indent):"  ",inFlow:s,options:n}}function yne(t,e){if(e.tag){const r=t.filter(i=>i.tag===e.tag);if(r.length>0)return r.find(i=>i.format===e.format)??r[0]}let n,s;if(Yt(e)){s=e.value;let r=t.filter(i=>i.identify?.(s));if(r.length>1){const i=r.filter(o=>o.test);i.length>0&&(r=i)}n=r.find(i=>i.format===e.format)??r.find(i=>!i.format)}else s=e,n=t.find(r=>r.nodeClass&&s instanceof r.nodeClass);if(!n){const r=s?.constructor?.name??(s===null?"null":typeof s);throw new Error(`Tag not resolved for ${r} value`)}return n}function bne(t,e,{anchors:n,doc:s}){if(!s.directives)return"";const r=[],i=(Yt(t)||yn(t))&&t.anchor;i&&$D(i)&&(n.add(i),r.push(`&${i}`));const o=t.tag??(e.default?null:e.tag);return o&&r.push(s.directives.tagString(o)),r.join(" ")}function uu(t,e,n,s){if(xn(t))return t.toString(e,n,s);if(El(t)){if(e.doc.directives)return t.toString(e);if(e.resolvedAliases?.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let r;const i=vn(t)?t:e.doc.createNode(t,{onTagObj:d=>r=d});r??(r=yne(e.doc.schema.tags,i));const o=bne(i,r,e);o.length>0&&(e.indentAtStart=(e.indentAtStart??0)+o.length+1);const c=typeof r.stringify=="function"?r.stringify(i,e,n,s):Yt(i)?Sk(i,e,n,s):i.toString(e,n,s);return o?Yt(i)||c[0]==="{"||c[0]==="["?`${o} ${c}`:`${o}
${e.indent}${c}`:c}function vne({key:t,value:e},n,s,r){const{allNullValues:i,doc:o,indent:c,indentStep:d,options:{commentString:h,indentSeq:g,simpleKeys:m}}=n;let b=vn(t)&&t.comment||null;if(m){if(b)throw new Error("With simple keys, key nodes cannot have comments");if(yn(t)||!vn(t)&&typeof t=="object"){const z="With simple keys, collection cannot be used as a key value";throw new Error(z)}}let y=!m&&(!t||b&&e==null&&!n.inFlow||yn(t)||(Yt(t)?t.type===ht.BLOCK_FOLDED||t.type===ht.BLOCK_LITERAL:typeof t=="object"));n=Object.assign({},n,{allNullValues:!1,implicitKey:!y&&(m||!i),indent:c+d});let w=!1,x=!1,S=uu(t,n,()=>w=!0,()=>x=!0);if(!y&&!n.inFlow&&S.length>1024){if(m)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");y=!0}if(n.inFlow){if(i||e==null)return w&&s&&s(),S===""?"?":y?`? ${S}`:S}else if(i&&!m||e==null&&y)return S=`? ${S}`,b&&!w?S+=Go(S,n.indent,h(b)):x&&r&&r(),S;w&&(b=null),y?(b&&(S+=Go(S,n.indent,h(b))),S=`? ${S}
${c}:`):(S=`${S}:`,b&&(S+=Go(S,n.indent,h(b))));let k,C,N;vn(e)?(k=!!e.spaceBefore,C=e.commentBefore,N=e.comment):(k=!1,C=null,N=null,e&&typeof e=="object"&&(e=o.createNode(e))),n.implicitKey=!1,!y&&!b&&Yt(e)&&(n.indentAtStart=S.length+1),x=!1,!g&&d.length>=2&&!n.inFlow&&!y&&Zf(e)&&!e.flow&&!e.tag&&!e.anchor&&(n.indent=n.indent.substring(2));let R=!1;const B=uu(e,n,()=>R=!0,()=>x=!0);let E=" ";if(b||k||C){if(E=k?`
`:"",C){const z=h(C);E+=`
${ta(z,n.indent)}`}B===""&&!n.inFlow?E===`
`&&N&&(E=`

`):E+=`
${n.indent}`}else if(!y&&yn(e)){const z=B[0],U=B.indexOf(`
`),Y=U!==-1,D=n.inFlow??e.flow??e.items.length===0;if(Y||!D){let W=!1;if(Y&&(z==="&"||z==="!")){let V=B.indexOf(" ");z==="&"&&V!==-1&&V<U&&B[V+1]==="!"&&(V=B.indexOf(" ",V+1)),(V===-1||U<V)&&(W=!0)}W||(E=`
${n.indent}`)}}else(B===""||B[0]===`
`)&&(E="");return S+=E+B,n.inFlow?R&&s&&s():N&&!R?S+=Go(S,n.indent,h(N)):x&&r&&r(),S}function KD(t,e){(t==="debug"||t==="warn")&&console.warn(e)}const Vm="<<",sa={identify:t=>t===Vm||typeof t=="symbol"&&t.description===Vm,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new ht(Symbol(Vm)),{addToJSMap:WD}),stringify:()=>Vm},xne=(t,e)=>(sa.identify(e)||Yt(e)&&(!e.type||e.type===ht.PLAIN)&&sa.identify(e.value))&&t?.doc.schema.tags.some(n=>n.tag===sa.tag&&n.default);function WD(t,e,n){if(n=t&&El(n)?n.resolve(t.doc):n,Zf(n))for(const s of n.items)jx(t,e,s);else if(Array.isArray(n))for(const s of n)jx(t,e,s);else jx(t,e,n)}function jx(t,e,n){const s=t&&El(n)?n.resolve(t.doc):n;if(!Qf(s))throw new Error("Merge sources must be maps or map aliases");const r=s.toJSON(null,t,Map);for(const[i,o]of r)e instanceof Map?e.has(i)||e.set(i,o):e instanceof Set?e.add(i):Object.prototype.hasOwnProperty.call(e,i)||Object.defineProperty(e,i,{value:o,writable:!0,enumerable:!0,configurable:!0});return e}function GD(t,e,{key:n,value:s}){if(vn(n)&&n.addToJSMap)n.addToJSMap(t,e,s);else if(xne(t,n))WD(t,e,s);else{const r=Br(n,"",t);if(e instanceof Map)e.set(r,Br(s,r,t));else if(e instanceof Set)e.add(r);else{const i=_ne(n,r,t),o=Br(s,i,t);i in e?Object.defineProperty(e,i,{value:o,writable:!0,enumerable:!0,configurable:!0}):e[i]=o}}return e}function _ne(t,e,n){if(e===null)return"";if(typeof e!="object")return String(e);if(vn(t)&&n?.doc){const s=qD(n.doc,{});s.anchors=new Set;for(const i of n.anchors.keys())s.anchors.add(i.anchor);s.inFlow=!0,s.inStringifyKey=!0;const r=t.toString(s);if(!n.mapKeyWarned){let i=JSON.stringify(r);i.length>40&&(i=i.substring(0,36)+'..."'),KD(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${i}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return r}return JSON.stringify(e)}function kk(t,e,n){const s=bf(t,void 0,n),r=bf(e,void 0,n);return new Cs(s,r)}class Cs{constructor(e,n=null){Object.defineProperty(this,Ir,{value:ID}),this.key=e,this.value=n}clone(e){let{key:n,value:s}=this;return vn(n)&&(n=n.clone(e)),vn(s)&&(s=s.clone(e)),new Cs(n,s)}toJSON(e,n){const s=n?.mapAsMap?new Map:{};return GD(n,s,this)}toString(e,n,s){return e?.doc?vne(this,e,n,s):JSON.stringify(this)}}function YD(t,e,n){return(e.inFlow??t.flow?Sne:wne)(t,e,n)}function wne({comment:t,items:e},n,{blockItemPrefix:s,flowChars:r,itemIndent:i,onChompKeep:o,onComment:c}){const{indent:d,options:{commentString:h}}=n,g=Object.assign({},n,{indent:i,type:null});let m=!1;const b=[];for(let w=0;w<e.length;++w){const x=e[w];let S=null;if(vn(x))!m&&x.spaceBefore&&b.push(""),Ng(n,b,x.commentBefore,m),x.comment&&(S=x.comment);else if(xn(x)){const C=vn(x.key)?x.key:null;C&&(!m&&C.spaceBefore&&b.push(""),Ng(n,b,C.commentBefore,m))}m=!1;let k=uu(x,g,()=>S=null,()=>m=!0);S&&(k+=Go(k,i,h(S))),m&&S&&(m=!1),b.push(s+k)}let y;if(b.length===0)y=r.start+r.end;else{y=b[0];for(let w=1;w<b.length;++w){const x=b[w];y+=x?`
${d}${x}`:`
`}}return t?(y+=`
`+ta(h(t),d),c&&c()):m&&o&&o(),y}function Sne({items:t},e,{flowChars:n,itemIndent:s}){const{indent:r,indentStep:i,flowCollectionPadding:o,options:{commentString:c}}=e;s+=i;const d=Object.assign({},e,{indent:s,inFlow:!0,type:null});let h=!1,g=0;const m=[];for(let w=0;w<t.length;++w){const x=t[w];let S=null;if(vn(x))x.spaceBefore&&m.push(""),Ng(e,m,x.commentBefore,!1),x.comment&&(S=x.comment);else if(xn(x)){const C=vn(x.key)?x.key:null;C&&(C.spaceBefore&&m.push(""),Ng(e,m,C.commentBefore,!1),C.comment&&(h=!0));const N=vn(x.value)?x.value:null;N?(N.comment&&(S=N.comment),N.commentBefore&&(h=!0)):x.value==null&&C?.comment&&(S=C.comment)}S&&(h=!0);let k=uu(x,d,()=>S=null);w<t.length-1&&(k+=","),S&&(k+=Go(k,s,c(S))),!h&&(m.length>g||k.includes(`
`))&&(h=!0),m.push(k),g=m.length}const{start:b,end:y}=n;if(m.length===0)return b+y;if(!h){const w=m.reduce((x,S)=>x+S.length+2,2);h=e.options.lineWidth>0&&w>e.options.lineWidth}if(h){let w=b;for(const x of m)w+=x?`
${i}${r}${x}`:`
`;return`${w}
${r}${y}`}else return`${b}${o}${m.join(" ")}${o}${y}`}function Ng({indent:t,options:{commentString:e}},n,s,r){if(s&&r&&(s=s.replace(/^\n+/,"")),s){const i=ta(e(s),t);n.push(i.trimStart())}}function Yo(t,e){const n=Yt(e)?e.value:e;for(const s of t)if(xn(s)&&(s.key===e||s.key===n||Yt(s.key)&&s.key.value===n))return s}class jr extends VD{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(co,e),this.items=[]}static from(e,n,s){const{keepUndefined:r,replacer:i}=s,o=new this(e),c=(d,h)=>{if(typeof i=="function")h=i.call(n,d,h);else if(Array.isArray(i)&&!i.includes(d))return;(h!==void 0||r)&&o.items.push(kk(d,h,s))};if(n instanceof Map)for(const[d,h]of n)c(d,h);else if(n&&typeof n=="object")for(const d of Object.keys(n))c(d,n[d]);return typeof e.sortMapEntries=="function"&&o.items.sort(e.sortMapEntries),o}add(e,n){let s;xn(e)?s=e:!e||typeof e!="object"||!("key"in e)?s=new Cs(e,e?.value):s=new Cs(e.key,e.value);const r=Yo(this.items,s.key),i=this.schema?.sortMapEntries;if(r){if(!n)throw new Error(`Key ${s.key} already set`);Yt(r.value)&&UD(s.value)?r.value.value=s.value:r.value=s.value}else if(i){const o=this.items.findIndex(c=>i(s,c)<0);o===-1?this.items.push(s):this.items.splice(o,0,s)}else this.items.push(s)}delete(e){const n=Yo(this.items,e);return n?this.items.splice(this.items.indexOf(n),1).length>0:!1}get(e,n){const r=Yo(this.items,e)?.value;return(!n&&Yt(r)?r.value:r)??void 0}has(e){return!!Yo(this.items,e)}set(e,n){this.add(new Cs(e,n),!0)}toJSON(e,n,s){const r=s?new s:n?.mapAsMap?new Map:{};n?.onCreate&&n.onCreate(r);for(const i of this.items)GD(n,r,i);return r}toString(e,n,s){if(!e)return JSON.stringify(this);for(const r of this.items)if(!xn(r))throw new Error(`Map items must all be pairs; found ${JSON.stringify(r)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),YD(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:s,onComment:n})}}const Lu={collection:"map",default:!0,nodeClass:jr,tag:"tag:yaml.org,2002:map",resolve(t,e){return Qf(t)||e("Expected a mapping for this tag"),t},createNode:(t,e,n)=>jr.from(t,e,n)};class xl extends VD{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(Bu,e),this.items=[]}add(e){this.items.push(e)}delete(e){const n=Fm(e);return typeof n!="number"?!1:this.items.splice(n,1).length>0}get(e,n){const s=Fm(e);if(typeof s!="number")return;const r=this.items[s];return!n&&Yt(r)?r.value:r}has(e){const n=Fm(e);return typeof n=="number"&&n<this.items.length}set(e,n){const s=Fm(e);if(typeof s!="number")throw new Error(`Expected a valid index, not ${e}.`);const r=this.items[s];Yt(r)&&UD(n)?r.value=n:this.items[s]=n}toJSON(e,n){const s=[];n?.onCreate&&n.onCreate(s);let r=0;for(const i of this.items)s.push(Br(i,String(r++),n));return s}toString(e,n,s){return e?YD(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:s,onComment:n}):JSON.stringify(this)}static from(e,n,s){const{replacer:r}=s,i=new this(e);if(n&&Symbol.iterator in Object(n)){let o=0;for(let c of n){if(typeof r=="function"){const d=n instanceof Set?c:String(o++);c=r.call(n,d,c)}i.items.push(bf(c,void 0,s))}}return i}}function Fm(t){let e=Yt(t)?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}const Iu={collection:"seq",default:!0,nodeClass:xl,tag:"tag:yaml.org,2002:seq",resolve(t,e){return Zf(t)||e("Expected a sequence for this tag"),t},createNode:(t,e,n)=>xl.from(t,e,n)},Jy={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify(t,e,n,s){return e=Object.assign({actualString:!0},e),Sk(t,e,n,s)}},Qy={identify:t=>t==null,createNode:()=>new ht(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new ht(null),stringify:({source:t},e)=>typeof t=="string"&&Qy.test.test(t)?t:e.options.nullStr},Ck={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new ht(t[0]==="t"||t[0]==="T"),stringify({source:t,value:e},n){if(t&&Ck.test.test(t)){const s=t[0]==="t"||t[0]==="T";if(e===s)return t}return e?n.options.trueStr:n.options.falseStr}};function ni({format:t,minFractionDigits:e,tag:n,value:s}){if(typeof s=="bigint")return String(s);const r=typeof s=="number"?s:Number(s);if(!isFinite(r))return isNaN(r)?".nan":r<0?"-.inf":".inf";let i=Object.is(s,-0)?"-0":JSON.stringify(s);if(!t&&e&&(!n||n==="tag:yaml.org,2002:float")&&/^\d/.test(i)){let o=i.indexOf(".");o<0&&(o=i.length,i+=".");let c=e-(i.length-o-1);for(;c-- >0;)i+="0"}return i}const XD={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:ni},JD={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():ni(t)}},QD={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){const e=new ht(parseFloat(t)),n=t.indexOf(".");return n!==-1&&t[t.length-1]==="0"&&(e.minFractionDigits=t.length-n-1),e},stringify:ni},Zy=t=>typeof t=="bigint"||Number.isInteger(t),Nk=(t,e,n,{intAsBigInt:s})=>s?BigInt(t):parseInt(t.substring(e),n);function ZD(t,e,n){const{value:s}=t;return Zy(s)&&s>=0?n+s.toString(e):ni(t)}const e8={identify:t=>Zy(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,n)=>Nk(t,2,8,n),stringify:t=>ZD(t,8,"0o")},t8={identify:Zy,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,n)=>Nk(t,0,10,n),stringify:ni},n8={identify:t=>Zy(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,n)=>Nk(t,2,16,n),stringify:t=>ZD(t,16,"0x")},kne=[Lu,Iu,Jy,Qy,Ck,e8,t8,n8,XD,JD,QD];function oT(t){return typeof t=="bigint"||Number.isInteger(t)}const qm=({value:t})=>JSON.stringify(t),Cne=[{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:qm},{identify:t=>t==null,createNode:()=>new ht(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:qm},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:t=>t==="true",stringify:qm},{identify:oT,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:n})=>n?BigInt(t):parseInt(t,10),stringify:({value:t})=>oT(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:qm}],Nne={default:!0,tag:"",test:/^/,resolve(t,e){return e(`Unresolved plain scalar ${JSON.stringify(t)}`),t}},Ane=[Lu,Iu].concat(Cne,Nne),Ak={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if(typeof atob=="function"){const n=atob(t.replace(/[\n\r]/g,"")),s=new Uint8Array(n.length);for(let r=0;r<n.length;++r)s[r]=n.charCodeAt(r);return s}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:n},s,r,i){if(!n)return"";const o=n;let c;if(typeof btoa=="function"){let d="";for(let h=0;h<o.length;++h)d+=String.fromCharCode(o[h]);c=btoa(d)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e??(e=ht.BLOCK_LITERAL),e!==ht.QUOTE_DOUBLE){const d=Math.max(s.options.lineWidth-s.indent.length,s.options.minContentWidth),h=Math.ceil(c.length/d),g=new Array(h);for(let m=0,b=0;m<h;++m,b+=d)g[m]=c.substr(b,d);c=g.join(e===ht.BLOCK_LITERAL?`
`:" ")}return Sk({comment:t,type:e,value:c},s,r,i)}};function s8(t,e){if(Zf(t))for(let n=0;n<t.items.length;++n){let s=t.items[n];if(!xn(s)){if(Qf(s)){s.items.length>1&&e("Each pair must have its own sequence indicator");const r=s.items[0]||new Cs(new ht(null));if(s.commentBefore&&(r.key.commentBefore=r.key.commentBefore?`${s.commentBefore}
${r.key.commentBefore}`:s.commentBefore),s.comment){const i=r.value??r.key;i.comment=i.comment?`${s.comment}
${i.comment}`:s.comment}s=r}t.items[n]=xn(s)?s:new Cs(s)}}else e("Expected a sequence for this tag");return t}function r8(t,e,n){const{replacer:s}=n,r=new xl(t);r.tag="tag:yaml.org,2002:pairs";let i=0;if(e&&Symbol.iterator in Object(e))for(let o of e){typeof s=="function"&&(o=s.call(e,String(i++),o));let c,d;if(Array.isArray(o))if(o.length===2)c=o[0],d=o[1];else throw new TypeError(`Expected [key, value] tuple: ${o}`);else if(o&&o instanceof Object){const h=Object.keys(o);if(h.length===1)c=h[0],d=o[c];else throw new TypeError(`Expected tuple with one key, not ${h.length} keys`)}else c=o;r.items.push(kk(c,d,n))}return r}const Ek={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:s8,createNode:r8};class Kc extends xl{constructor(){super(),this.add=jr.prototype.add.bind(this),this.delete=jr.prototype.delete.bind(this),this.get=jr.prototype.get.bind(this),this.has=jr.prototype.has.bind(this),this.set=jr.prototype.set.bind(this),this.tag=Kc.tag}toJSON(e,n){if(!n)return super.toJSON(e);const s=new Map;n?.onCreate&&n.onCreate(s);for(const r of this.items){let i,o;if(xn(r)?(i=Br(r.key,"",n),o=Br(r.value,i,n)):i=Br(r,"",n),s.has(i))throw new Error("Ordered maps must not include duplicate keys");s.set(i,o)}return s}static from(e,n,s){const r=r8(e,n,s),i=new this;return i.items=r.items,i}}Kc.tag="tag:yaml.org,2002:omap";const jk={collection:"seq",identify:t=>t instanceof Map,nodeClass:Kc,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){const n=s8(t,e),s=[];for(const{key:r}of n.items)Yt(r)&&(s.includes(r.value)?e(`Ordered maps must not include duplicate keys: ${r.value}`):s.push(r.value));return Object.assign(new Kc,n)},createNode:(t,e,n)=>Kc.from(t,e,n)};function i8({value:t,source:e},n){return e&&(t?a8:o8).test.test(e)?e:t?n.options.trueStr:n.options.falseStr}const a8={identify:t=>t===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new ht(!0),stringify:i8},o8={identify:t=>t===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new ht(!1),stringify:i8},Ene={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:ni},jne={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():ni(t)}},Tne={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){const e=new ht(parseFloat(t.replace(/_/g,""))),n=t.indexOf(".");if(n!==-1){const s=t.substring(n+1).replace(/_/g,"");s[s.length-1]==="0"&&(e.minFractionDigits=s.length)}return e},stringify:ni},ep=t=>typeof t=="bigint"||Number.isInteger(t);function e1(t,e,n,{intAsBigInt:s}){const r=t[0];if((r==="-"||r==="+")&&(e+=1),t=t.substring(e).replace(/_/g,""),s){switch(n){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`;break}const o=BigInt(t);return r==="-"?BigInt(-1)*o:o}const i=parseInt(t,n);return r==="-"?-1*i:i}function Tk(t,e,n){const{value:s}=t;if(ep(s)){const r=s.toString(e);return s<0?"-"+n+r.substr(1):n+r}return ni(t)}const Rne={identify:ep,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,n)=>e1(t,2,2,n),stringify:t=>Tk(t,2,"0b")},One={identify:ep,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,n)=>e1(t,1,8,n),stringify:t=>Tk(t,8,"0")},Mne={identify:ep,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,n)=>e1(t,0,10,n),stringify:ni},Bne={identify:ep,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,n)=>e1(t,2,16,n),stringify:t=>Tk(t,16,"0x")};class Wc extends jr{constructor(e){super(e),this.tag=Wc.tag}add(e){let n;xn(e)?n=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?n=new Cs(e.key,null):n=new Cs(e,null),Yo(this.items,n.key)||this.items.push(n)}get(e,n){const s=Yo(this.items,e);return!n&&xn(s)?Yt(s.key)?s.key.value:s.key:s}set(e,n){if(typeof n!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof n}`);const s=Yo(this.items,e);s&&!n?this.items.splice(this.items.indexOf(s),1):!s&&n&&this.items.push(new Cs(e))}toJSON(e,n){return super.toJSON(e,n,Set)}toString(e,n,s){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),n,s);throw new Error("Set items must all have null values")}static from(e,n,s){const{replacer:r}=s,i=new this(e);if(n&&Symbol.iterator in Object(n))for(let o of n)typeof r=="function"&&(o=r.call(n,o,o)),i.items.push(kk(o,null,s));return i}}Wc.tag="tag:yaml.org,2002:set";const Rk={collection:"map",identify:t=>t instanceof Set,nodeClass:Wc,default:!1,tag:"tag:yaml.org,2002:set",createNode:(t,e,n)=>Wc.from(t,e,n),resolve(t,e){if(Qf(t)){if(t.hasAllNullValues(!0))return Object.assign(new Wc,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t}};function Ok(t,e){const n=t[0],s=n==="-"||n==="+"?t.substring(1):t,r=o=>e?BigInt(o):Number(o),i=s.replace(/_/g,"").split(":").reduce((o,c)=>o*r(60)+r(c),r(0));return n==="-"?r(-1)*i:i}function l8(t){let{value:e}=t,n=o=>o;if(typeof e=="bigint")n=o=>BigInt(o);else if(isNaN(e)||!isFinite(e))return ni(t);let s="";e<0&&(s="-",e*=n(-1));const r=n(60),i=[e%r];return e<60?i.unshift(0):(e=(e-i[0])/r,i.unshift(e%r),e>=60&&(e=(e-i[0])/r,i.unshift(e))),s+i.map(o=>String(o).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const c8={identify:t=>typeof t=="bigint"||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:n})=>Ok(t,n),stringify:l8},u8={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>Ok(t,!1),stringify:l8},t1={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){const e=t.match(t1.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,s,r,i,o,c]=e.map(Number),d=e[7]?Number((e[7]+"00").substr(1,3)):0;let h=Date.UTC(n,s-1,r,i||0,o||0,c||0,d);const g=e[8];if(g&&g!=="Z"){let m=Ok(g,!1);Math.abs(m)<30&&(m*=60),h-=6e4*m}return new Date(h)},stringify:({value:t})=>t?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""},lT=[Lu,Iu,Jy,Qy,a8,o8,Rne,One,Mne,Bne,Ene,jne,Tne,Ak,sa,jk,Ek,Rk,c8,u8,t1],cT=new Map([["core",kne],["failsafe",[Lu,Iu,Jy]],["json",Ane],["yaml11",lT],["yaml-1.1",lT]]),uT={binary:Ak,bool:Ck,float:QD,floatExp:JD,floatNaN:XD,floatTime:u8,int:t8,intHex:n8,intOct:e8,intTime:c8,map:Lu,merge:sa,null:Qy,omap:jk,pairs:Ek,seq:Iu,set:Rk,timestamp:t1},Dne={"tag:yaml.org,2002:binary":Ak,"tag:yaml.org,2002:merge":sa,"tag:yaml.org,2002:omap":jk,"tag:yaml.org,2002:pairs":Ek,"tag:yaml.org,2002:set":Rk,"tag:yaml.org,2002:timestamp":t1};function Tx(t,e,n){const s=cT.get(e);if(s&&!t)return n&&!s.includes(sa)?s.concat(sa):s.slice();let r=s;if(!r)if(Array.isArray(t))r=[];else{const i=Array.from(cT.keys()).filter(o=>o!=="yaml11").map(o=>JSON.stringify(o)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${i} or define customTags array`)}if(Array.isArray(t))for(const i of t)r=r.concat(i);else typeof t=="function"&&(r=t(r.slice()));return n&&(r=r.concat(sa)),r.reduce((i,o)=>{const c=typeof o=="string"?uT[o]:o;if(!c){const d=JSON.stringify(o),h=Object.keys(uT).map(g=>JSON.stringify(g)).join(", ");throw new Error(`Unknown custom tag ${d}; use one of ${h}`)}return i.includes(c)||i.push(c),i},[])}const Lne=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0;class Mk{constructor({compat:e,customTags:n,merge:s,resolveKnownTags:r,schema:i,sortMapEntries:o,toStringDefaults:c}){this.compat=Array.isArray(e)?Tx(e,"compat"):e?Tx(null,e):null,this.name=typeof i=="string"&&i||"core",this.knownTags=r?Dne:{},this.tags=Tx(n,this.name,s),this.toStringOptions=c??null,Object.defineProperty(this,co,{value:Lu}),Object.defineProperty(this,Si,{value:Jy}),Object.defineProperty(this,Bu,{value:Iu}),this.sortMapEntries=typeof o=="function"?o:o===!0?Lne:null}clone(){const e=Object.create(Mk.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}function Ine(t,e){const n=[];let s=e.directives===!0;if(e.directives!==!1&&t.directives){const d=t.directives.toString(t);d?(n.push(d),s=!0):t.directives.docStart&&(s=!0)}s&&n.push("---");const r=qD(t,e),{commentString:i}=r.options;if(t.commentBefore){n.length!==1&&n.unshift("");const d=i(t.commentBefore);n.unshift(ta(d,""))}let o=!1,c=null;if(t.contents){if(vn(t.contents)){if(t.contents.spaceBefore&&s&&n.push(""),t.contents.commentBefore){const g=i(t.contents.commentBefore);n.push(ta(g,""))}r.forceBlockIndent=!!t.comment,c=t.contents.comment}const d=c?void 0:()=>o=!0;let h=uu(t.contents,r,()=>c=null,d);c&&(h+=Go(h,"",i(c))),(h[0]==="|"||h[0]===">")&&n[n.length-1]==="---"?n[n.length-1]=`--- ${h}`:n.push(h)}else n.push(uu(t.contents,r));if(t.directives?.docEnd)if(t.comment){const d=i(t.comment);d.includes(`
`)?(n.push("..."),n.push(ta(d,""))):n.push(`... ${d}`)}else n.push("...");else{let d=t.comment;d&&o&&(d=d.replace(/^\n+/,"")),d&&((!o||c)&&n[n.length-1]!==""&&n.push(""),n.push(ta(i(d),"")))}return n.join(`
`)+`
`}let Bk=class h8{constructor(e,n,s){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,Ir,{value:pS});let r=null;typeof n=="function"||Array.isArray(n)?r=n:s===void 0&&n&&(s=n,n=void 0);const i=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},s);this.options=i;let{version:o}=i;s?._directives?(this.directives=s._directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new _s({version:o}),this.setSchema(o,s),this.contents=e===void 0?null:this.createNode(e,r,s)}clone(){const e=Object.create(h8.prototype,{[Ir]:{value:pS}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=vn(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){Sc(this.contents)&&this.contents.add(e)}addIn(e,n){Sc(this.contents)&&this.contents.addIn(e,n)}createAlias(e,n){if(!e.anchor){const s=zD(this);e.anchor=!n||s.has(n)?HD(n||"a",s):n}return new wk(e.anchor)}createNode(e,n,s){let r;if(typeof n=="function")e=n.call({"":e},"",e),r=n;else if(Array.isArray(n)){const S=C=>typeof C=="number"||C instanceof String||C instanceof Number,k=n.filter(S).map(String);k.length>0&&(n=n.concat(k)),r=n}else s===void 0&&n&&(s=n,n=void 0);const{aliasDuplicateObjects:i,anchorPrefix:o,flow:c,keepUndefined:d,onTagObj:h,tag:g}=s??{},{onAnchor:m,setAnchors:b,sourceObjects:y}=hne(this,o||"a"),w={aliasDuplicateObjects:i??!0,keepUndefined:d??!1,onAnchor:m,onTagObj:h,replacer:r,schema:this.schema,sourceObjects:y},x=bf(e,g,w);return c&&yn(x)&&(x.flow=!0),b(),x}createPair(e,n,s={}){const r=this.createNode(e,null,s),i=this.createNode(n,null,s);return new Cs(r,i)}delete(e){return Sc(this.contents)?this.contents.delete(e):!1}deleteIn(e){return Nd(e)?this.contents==null?!1:(this.contents=null,!0):Sc(this.contents)?this.contents.deleteIn(e):!1}get(e,n){return yn(this.contents)?this.contents.get(e,n):void 0}getIn(e,n){return Nd(e)?!n&&Yt(this.contents)?this.contents.value:this.contents:yn(this.contents)?this.contents.getIn(e,n):void 0}has(e){return yn(this.contents)?this.contents.has(e):!1}hasIn(e){return Nd(e)?this.contents!==void 0:yn(this.contents)?this.contents.hasIn(e):!1}set(e,n){this.contents==null?this.contents=Cg(this.schema,[e],n):Sc(this.contents)&&this.contents.set(e,n)}setIn(e,n){Nd(e)?this.contents=n:this.contents==null?this.contents=Cg(this.schema,Array.from(e),n):Sc(this.contents)&&this.contents.setIn(e,n)}setSchema(e,n={}){typeof e=="number"&&(e=String(e));let s;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new _s({version:"1.1"}),s={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new _s({version:e}),s={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,s=null;break;default:{const r=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${r}`)}}if(n.schema instanceof Object)this.schema=n.schema;else if(s)this.schema=new Mk(Object.assign(s,n));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:n,mapAsMap:s,maxAliasCount:r,onAnchor:i,reviver:o}={}){const c={anchors:new Map,doc:this,keep:!e,mapAsMap:s===!0,mapKeyWarned:!1,maxAliasCount:typeof r=="number"?r:100},d=Br(this.contents,n??"",c);if(typeof i=="function")for(const{count:h,res:g}of c.anchors.values())i(g,h);return typeof o=="function"?$c(o,{"":d},"",d):d}toJSON(e,n){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:n})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const n=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${n}`)}return Ine(this,e)}};function Sc(t){if(yn(t))return!0;throw new Error("Expected a YAML collection as document contents")}class d8 extends Error{constructor(e,n,s,r){super(),this.name=e,this.code=s,this.message=r,this.pos=n}}class Ad extends d8{constructor(e,n,s){super("YAMLParseError",e,n,s)}}class Pne extends d8{constructor(e,n,s){super("YAMLWarning",e,n,s)}}const hT=(t,e)=>n=>{if(n.pos[0]===-1)return;n.linePos=n.pos.map(c=>e.linePos(c));const{line:s,col:r}=n.linePos[0];n.message+=` at line ${s}, column ${r}`;let i=r-1,o=t.substring(e.lineStarts[s-1],e.lineStarts[s]).replace(/[\n\r]+$/,"");if(i>=60&&o.length>80){const c=Math.min(i-39,o.length-79);o=""+o.substring(c),i-=c-1}if(o.length>80&&(o=o.substring(0,79)+""),s>1&&/^ *$/.test(o.substring(0,i))){let c=t.substring(e.lineStarts[s-2],e.lineStarts[s-1]);c.length>80&&(c=c.substring(0,79)+`
`),o=c+o}if(/[^ ]/.test(o)){let c=1;const d=n.linePos[1];d?.line===s&&d.col>r&&(c=Math.max(1,Math.min(d.col-r,80-i)));const h=" ".repeat(i)+"^".repeat(c);n.message+=`:

${o}
${h}
`}};function hu(t,{flow:e,indicator:n,next:s,offset:r,onError:i,parentIndent:o,startOnNewline:c}){let d=!1,h=c,g=c,m="",b="",y=!1,w=!1,x=null,S=null,k=null,C=null,N=null,R=null,B=null;for(const U of t)switch(w&&(U.type!=="space"&&U.type!=="newline"&&U.type!=="comma"&&i(U.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),w=!1),x&&(h&&U.type!=="comment"&&U.type!=="newline"&&i(x,"TAB_AS_INDENT","Tabs are not allowed as indentation"),x=null),U.type){case"space":!e&&(n!=="doc-start"||s?.type!=="flow-collection")&&U.source.includes("	")&&(x=U),g=!0;break;case"comment":{g||i(U,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const Y=U.source.substring(1)||" ";m?m+=b+Y:m=Y,b="",h=!1;break}case"newline":h?m?m+=U.source:(!R||n!=="seq-item-ind")&&(d=!0):b+=U.source,h=!0,y=!0,(S||k)&&(C=U),g=!0;break;case"anchor":S&&i(U,"MULTIPLE_ANCHORS","A node can have at most one anchor"),U.source.endsWith(":")&&i(U.offset+U.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),S=U,B??(B=U.offset),h=!1,g=!1,w=!0;break;case"tag":{k&&i(U,"MULTIPLE_TAGS","A node can have at most one tag"),k=U,B??(B=U.offset),h=!1,g=!1,w=!0;break}case n:(S||k)&&i(U,"BAD_PROP_ORDER",`Anchors and tags must be after the ${U.source} indicator`),R&&i(U,"UNEXPECTED_TOKEN",`Unexpected ${U.source} in ${e??"collection"}`),R=U,h=n==="seq-item-ind"||n==="explicit-key-ind",g=!1;break;case"comma":if(e){N&&i(U,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),N=U,h=!1,g=!1;break}default:i(U,"UNEXPECTED_TOKEN",`Unexpected ${U.type} token`),h=!1,g=!1}const E=t[t.length-1],z=E?E.offset+E.source.length:r;return w&&s&&s.type!=="space"&&s.type!=="newline"&&s.type!=="comma"&&(s.type!=="scalar"||s.source!=="")&&i(s.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),x&&(h&&x.indent<=o||s?.type==="block-map"||s?.type==="block-seq")&&i(x,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:N,found:R,spaceBefore:d,comment:m,hasNewline:y,anchor:S,tag:k,newlineAfterProp:C,end:z,start:B??z}}function vf(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes(`
`))return!0;if(t.end){for(const e of t.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(const e of t.items){for(const n of e.start)if(n.type==="newline")return!0;if(e.sep){for(const n of e.sep)if(n.type==="newline")return!0}if(vf(e.key)||vf(e.value))return!0}return!1;default:return!0}}function bS(t,e,n){if(e?.type==="flow-collection"){const s=e.end[0];s.indent===t&&(s.source==="]"||s.source==="}")&&vf(e)&&n(s,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function f8(t,e,n){const{uniqueKeys:s}=t.options;if(s===!1)return!1;const r=typeof s=="function"?s:(i,o)=>i===o||Yt(i)&&Yt(o)&&i.value===o.value;return e.some(i=>r(i.key,n))}const dT="All mapping items must start at the same column";function $ne({composeNode:t,composeEmptyNode:e},n,s,r,i){const o=i?.nodeClass??jr,c=new o(n.schema);n.atRoot&&(n.atRoot=!1);let d=s.offset,h=null;for(const g of s.items){const{start:m,key:b,sep:y,value:w}=g,x=hu(m,{indicator:"explicit-key-ind",next:b??y?.[0],offset:d,onError:r,parentIndent:s.indent,startOnNewline:!0}),S=!x.found;if(S){if(b&&(b.type==="block-seq"?r(d,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in b&&b.indent!==s.indent&&r(d,"BAD_INDENT",dT)),!x.anchor&&!x.tag&&!y){h=x.end,x.comment&&(c.comment?c.comment+=`
`+x.comment:c.comment=x.comment);continue}(x.newlineAfterProp||vf(b))&&r(b??m[m.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else x.found?.indent!==s.indent&&r(d,"BAD_INDENT",dT);n.atKey=!0;const k=x.end,C=b?t(n,b,x,r):e(n,k,m,null,x,r);n.schema.compat&&bS(s.indent,b,r),n.atKey=!1,f8(n,c.items,C)&&r(k,"DUPLICATE_KEY","Map keys must be unique");const N=hu(y??[],{indicator:"map-value-ind",next:w,offset:C.range[2],onError:r,parentIndent:s.indent,startOnNewline:!b||b.type==="block-scalar"});if(d=N.end,N.found){S&&(w?.type==="block-map"&&!N.hasNewline&&r(d,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&x.start<N.found.offset-1024&&r(C.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const R=w?t(n,w,N,r):e(n,d,y,null,N,r);n.schema.compat&&bS(s.indent,w,r),d=R.range[2];const B=new Cs(C,R);n.options.keepSourceTokens&&(B.srcToken=g),c.items.push(B)}else{S&&r(C.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),N.comment&&(C.comment?C.comment+=`
`+N.comment:C.comment=N.comment);const R=new Cs(C);n.options.keepSourceTokens&&(R.srcToken=g),c.items.push(R)}}return h&&h<d&&r(h,"IMPOSSIBLE","Map comment with trailing content"),c.range=[s.offset,d,h??d],c}function zne({composeNode:t,composeEmptyNode:e},n,s,r,i){const o=i?.nodeClass??xl,c=new o(n.schema);n.atRoot&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let d=s.offset,h=null;for(const{start:g,value:m}of s.items){const b=hu(g,{indicator:"seq-item-ind",next:m,offset:d,onError:r,parentIndent:s.indent,startOnNewline:!0});if(!b.found)if(b.anchor||b.tag||m)m?.type==="block-seq"?r(b.end,"BAD_INDENT","All sequence items must start at the same column"):r(d,"MISSING_CHAR","Sequence item without - indicator");else{h=b.end,b.comment&&(c.comment=b.comment);continue}const y=m?t(n,m,b,r):e(n,b.end,g,null,b,r);n.schema.compat&&bS(s.indent,m,r),d=y.range[2],c.items.push(y)}return c.range=[s.offset,d,h??d],c}function tp(t,e,n,s){let r="";if(t){let i=!1,o="";for(const c of t){const{source:d,type:h}=c;switch(h){case"space":i=!0;break;case"comment":{n&&!i&&s(c,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const g=d.substring(1)||" ";r?r+=o+g:r=g,o="";break}case"newline":r&&(o+=d),i=!0;break;default:s(c,"UNEXPECTED_TOKEN",`Unexpected ${h} at node end`)}e+=d.length}}return{comment:r,offset:e}}const Rx="Block collections are not allowed within flow collections",Ox=t=>t&&(t.type==="block-map"||t.type==="block-seq");function Hne({composeNode:t,composeEmptyNode:e},n,s,r,i){const o=s.start.source==="{",c=o?"flow map":"flow sequence",d=i?.nodeClass??(o?jr:xl),h=new d(n.schema);h.flow=!0;const g=n.atRoot;g&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let m=s.offset+s.start.source.length;for(let S=0;S<s.items.length;++S){const k=s.items[S],{start:C,key:N,sep:R,value:B}=k,E=hu(C,{flow:c,indicator:"explicit-key-ind",next:N??R?.[0],offset:m,onError:r,parentIndent:s.indent,startOnNewline:!1});if(!E.found){if(!E.anchor&&!E.tag&&!R&&!B){S===0&&E.comma?r(E.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${c}`):S<s.items.length-1&&r(E.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${c}`),E.comment&&(h.comment?h.comment+=`
`+E.comment:h.comment=E.comment),m=E.end;continue}!o&&n.options.strict&&vf(N)&&r(N,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(S===0)E.comma&&r(E.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${c}`);else if(E.comma||r(E.start,"MISSING_CHAR",`Missing , between ${c} items`),E.comment){let z="";e:for(const U of C)switch(U.type){case"comma":case"space":break;case"comment":z=U.source.substring(1);break e;default:break e}if(z){let U=h.items[h.items.length-1];xn(U)&&(U=U.value??U.key),U.comment?U.comment+=`
`+z:U.comment=z,E.comment=E.comment.substring(z.length+1)}}if(!o&&!R&&!E.found){const z=B?t(n,B,E,r):e(n,E.end,R,null,E,r);h.items.push(z),m=z.range[2],Ox(B)&&r(z.range,"BLOCK_IN_FLOW",Rx)}else{n.atKey=!0;const z=E.end,U=N?t(n,N,E,r):e(n,z,C,null,E,r);Ox(N)&&r(U.range,"BLOCK_IN_FLOW",Rx),n.atKey=!1;const Y=hu(R??[],{flow:c,indicator:"map-value-ind",next:B,offset:U.range[2],onError:r,parentIndent:s.indent,startOnNewline:!1});if(Y.found){if(!o&&!E.found&&n.options.strict){if(R)for(const V of R){if(V===Y.found)break;if(V.type==="newline"){r(V,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}E.start<Y.found.offset-1024&&r(Y.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else B&&("source"in B&&B.source?.[0]===":"?r(B,"MISSING_CHAR",`Missing space after : in ${c}`):r(Y.start,"MISSING_CHAR",`Missing , or : between ${c} items`));const D=B?t(n,B,Y,r):Y.found?e(n,Y.end,R,null,Y,r):null;D?Ox(B)&&r(D.range,"BLOCK_IN_FLOW",Rx):Y.comment&&(U.comment?U.comment+=`
`+Y.comment:U.comment=Y.comment);const W=new Cs(U,D);if(n.options.keepSourceTokens&&(W.srcToken=k),o){const V=h;f8(n,V.items,U)&&r(z,"DUPLICATE_KEY","Map keys must be unique"),V.items.push(W)}else{const V=new jr(n.schema);V.flow=!0,V.items.push(W);const q=(D??U).range;V.range=[U.range[0],q[1],q[2]],h.items.push(V)}m=D?D.range[2]:Y.end}}const b=o?"}":"]",[y,...w]=s.end;let x=m;if(y?.source===b)x=y.offset+y.source.length;else{const S=c[0].toUpperCase()+c.substring(1),k=g?`${S} must end with a ${b}`:`${S} in block collection must be sufficiently indented and end with a ${b}`;r(m,g?"MISSING_CHAR":"BAD_INDENT",k),y&&y.source.length!==1&&w.unshift(y)}if(w.length>0){const S=tp(w,x,n.options.strict,r);S.comment&&(h.comment?h.comment+=`
`+S.comment:h.comment=S.comment),h.range=[s.offset,x,S.offset]}else h.range=[s.offset,x,x];return h}function Mx(t,e,n,s,r,i){const o=n.type==="block-map"?$ne(t,e,n,s,i):n.type==="block-seq"?zne(t,e,n,s,i):Hne(t,e,n,s,i),c=o.constructor;return r==="!"||r===c.tagName?(o.tag=c.tagName,o):(r&&(o.tag=r),o)}function Une(t,e,n,s,r){const i=s.tag,o=i?e.directives.tagName(i.source,b=>r(i,"TAG_RESOLVE_FAILED",b)):null;if(n.type==="block-seq"){const{anchor:b,newlineAfterProp:y}=s,w=b&&i?b.offset>i.offset?b:i:b??i;w&&(!y||y.offset<w.offset)&&r(w,"MISSING_CHAR","Missing newline after block sequence props")}const c=n.type==="block-map"?"map":n.type==="block-seq"?"seq":n.start.source==="{"?"map":"seq";if(!i||!o||o==="!"||o===jr.tagName&&c==="map"||o===xl.tagName&&c==="seq")return Mx(t,e,n,r,o);let d=e.schema.tags.find(b=>b.tag===o&&b.collection===c);if(!d){const b=e.schema.knownTags[o];if(b?.collection===c)e.schema.tags.push(Object.assign({},b,{default:!1})),d=b;else return b?r(i,"BAD_COLLECTION_TYPE",`${b.tag} used for ${c} collection, but expects ${b.collection??"scalar"}`,!0):r(i,"TAG_RESOLVE_FAILED",`Unresolved tag: ${o}`,!0),Mx(t,e,n,r,o)}const h=Mx(t,e,n,r,o,d),g=d.resolve?.(h,b=>r(i,"TAG_RESOLVE_FAILED",b),e.options)??h,m=vn(g)?g:new ht(g);return m.range=h.range,m.tag=o,d?.format&&(m.format=d.format),m}function Vne(t,e,n){const s=e.offset,r=Fne(e,t.options.strict,n);if(!r)return{value:"",type:null,comment:"",range:[s,s,s]};const i=r.mode===">"?ht.BLOCK_FOLDED:ht.BLOCK_LITERAL,o=e.source?qne(e.source):[];let c=o.length;for(let x=o.length-1;x>=0;--x){const S=o[x][1];if(S===""||S==="\r")c=x;else break}if(c===0){const x=r.chomp==="+"&&o.length>0?`
`.repeat(Math.max(1,o.length-1)):"";let S=s+r.length;return e.source&&(S+=e.source.length),{value:x,type:i,comment:r.comment,range:[s,S,S]}}let d=e.indent+r.indent,h=e.offset+r.length,g=0;for(let x=0;x<c;++x){const[S,k]=o[x];if(k===""||k==="\r")r.indent===0&&S.length>d&&(d=S.length);else{S.length<d&&n(h+S.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),r.indent===0&&(d=S.length),g=x,d===0&&!t.atRoot&&n(h,"BAD_INDENT","Block scalar values in collections must be indented");break}h+=S.length+k.length+1}for(let x=o.length-1;x>=c;--x)o[x][0].length>d&&(c=x+1);let m="",b="",y=!1;for(let x=0;x<g;++x)m+=o[x][0].slice(d)+`
`;for(let x=g;x<c;++x){let[S,k]=o[x];h+=S.length+k.length+1;const C=k[k.length-1]==="\r";if(C&&(k=k.slice(0,-1)),k&&S.length<d){const R=`Block scalar lines must not be less indented than their ${r.indent?"explicit indentation indicator":"first line"}`;n(h-k.length-(C?2:1),"BAD_INDENT",R),S=""}i===ht.BLOCK_LITERAL?(m+=b+S.slice(d)+k,b=`
`):S.length>d||k[0]==="	"?(b===" "?b=`
`:!y&&b===`
`&&(b=`

`),m+=b+S.slice(d)+k,b=`
`,y=!0):k===""?b===`
`?m+=`
`:b=`
`:(m+=b+k,b=" ",y=!1)}switch(r.chomp){case"-":break;case"+":for(let x=c;x<o.length;++x)m+=`
`+o[x][0].slice(d);m[m.length-1]!==`
`&&(m+=`
`);break;default:m+=`
`}const w=s+r.length+e.source.length;return{value:m,type:i,comment:r.comment,range:[s,w,w]}}function Fne({offset:t,props:e},n,s){if(e[0].type!=="block-scalar-header")return s(e[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:r}=e[0],i=r[0];let o=0,c="",d=-1;for(let b=1;b<r.length;++b){const y=r[b];if(!c&&(y==="-"||y==="+"))c=y;else{const w=Number(y);!o&&w?o=w:d===-1&&(d=t+b)}}d!==-1&&s(d,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${r}`);let h=!1,g="",m=r.length;for(let b=1;b<e.length;++b){const y=e[b];switch(y.type){case"space":h=!0;case"newline":m+=y.source.length;break;case"comment":n&&!h&&s(y,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),m+=y.source.length,g=y.source.substring(1);break;case"error":s(y,"UNEXPECTED_TOKEN",y.message),m+=y.source.length;break;default:{const w=`Unexpected token in block scalar header: ${y.type}`;s(y,"UNEXPECTED_TOKEN",w);const x=y.source;x&&typeof x=="string"&&(m+=x.length)}}}return{mode:i,indent:o,chomp:c,comment:g,length:m}}function qne(t){const e=t.split(/\n( *)/),n=e[0],s=n.match(/^( *)/),i=[s?.[1]?[s[1],n.slice(s[1].length)]:["",n]];for(let o=1;o<e.length;o+=2)i.push([e[o],e[o+1]]);return i}function Kne(t,e,n){const{offset:s,type:r,source:i,end:o}=t;let c,d;const h=(b,y,w)=>n(s+b,y,w);switch(r){case"scalar":c=ht.PLAIN,d=Wne(i,h);break;case"single-quoted-scalar":c=ht.QUOTE_SINGLE,d=Gne(i,h);break;case"double-quoted-scalar":c=ht.QUOTE_DOUBLE,d=Yne(i,h);break;default:return n(t,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${r}`),{value:"",type:null,comment:"",range:[s,s+i.length,s+i.length]}}const g=s+i.length,m=tp(o,g,e,n);return{value:d,type:c,comment:m.comment,range:[s,g,m.offset]}}function Wne(t,e){let n="";switch(t[0]){case"	":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":{n=`block scalar indicator ${t[0]}`;break}case"@":case"`":{n=`reserved character ${t[0]}`;break}}return n&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`),p8(t)}function Gne(t,e){return(t[t.length-1]!=="'"||t.length===1)&&e(t.length,"MISSING_CHAR","Missing closing 'quote"),p8(t.slice(1,-1)).replace(/''/g,"'")}function p8(t){let e,n;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),n=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let s=e.exec(t);if(!s)return t;let r=s[1],i=" ",o=e.lastIndex;for(n.lastIndex=o;s=n.exec(t);)s[1]===""?i===`
`?r+=i:i=`
`:(r+=i+s[1],i=" "),o=n.lastIndex;const c=/[ \t]*(.*)/sy;return c.lastIndex=o,s=c.exec(t),r+i+(s?.[1]??"")}function Yne(t,e){let n="";for(let s=1;s<t.length-1;++s){const r=t[s];if(!(r==="\r"&&t[s+1]===`
`))if(r===`
`){const{fold:i,offset:o}=Xne(t,s);n+=i,s=o}else if(r==="\\"){let i=t[++s];const o=Jne[i];if(o)n+=o;else if(i===`
`)for(i=t[s+1];i===" "||i==="	";)i=t[++s+1];else if(i==="\r"&&t[s+1]===`
`)for(i=t[++s+1];i===" "||i==="	";)i=t[++s+1];else if(i==="x"||i==="u"||i==="U"){const c={x:2,u:4,U:8}[i];n+=Qne(t,s+1,c,e),s+=c}else{const c=t.substr(s-1,2);e(s-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${c}`),n+=c}}else if(r===" "||r==="	"){const i=s;let o=t[s+1];for(;o===" "||o==="	";)o=t[++s+1];o!==`
`&&!(o==="\r"&&t[s+2]===`
`)&&(n+=s>i?t.slice(i,s+1):r)}else n+=r}return(t[t.length-1]!=='"'||t.length===1)&&e(t.length,"MISSING_CHAR",'Missing closing "quote'),n}function Xne(t,e){let n="",s=t[e+1];for(;(s===" "||s==="	"||s===`
`||s==="\r")&&!(s==="\r"&&t[e+2]!==`
`);)s===`
`&&(n+=`
`),e+=1,s=t[e+1];return n||(n=" "),{fold:n,offset:e}}const Jne={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"",_:"",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function Qne(t,e,n,s){const r=t.substr(e,n),o=r.length===n&&/^[0-9a-fA-F]+$/.test(r)?parseInt(r,16):NaN;if(isNaN(o)){const c=t.substr(e-2,n+2);return s(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${c}`),c}return String.fromCodePoint(o)}function m8(t,e,n,s){const{value:r,type:i,comment:o,range:c}=e.type==="block-scalar"?Vne(t,e,s):Kne(e,t.options.strict,s),d=n?t.directives.tagName(n.source,m=>s(n,"TAG_RESOLVE_FAILED",m)):null;let h;t.options.stringKeys&&t.atKey?h=t.schema[Si]:d?h=Zne(t.schema,r,d,n,s):e.type==="scalar"?h=ese(t,r,e,s):h=t.schema[Si];let g;try{const m=h.resolve(r,b=>s(n??e,"TAG_RESOLVE_FAILED",b),t.options);g=Yt(m)?m:new ht(m)}catch(m){const b=m instanceof Error?m.message:String(m);s(n??e,"TAG_RESOLVE_FAILED",b),g=new ht(r)}return g.range=c,g.source=r,i&&(g.type=i),d&&(g.tag=d),h.format&&(g.format=h.format),o&&(g.comment=o),g}function Zne(t,e,n,s,r){if(n==="!")return t[Si];const i=[];for(const c of t.tags)if(!c.collection&&c.tag===n)if(c.default&&c.test)i.push(c);else return c;for(const c of i)if(c.test?.test(e))return c;const o=t.knownTags[n];return o&&!o.collection?(t.tags.push(Object.assign({},o,{default:!1,test:void 0})),o):(r(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,n!=="tag:yaml.org,2002:str"),t[Si])}function ese({atKey:t,directives:e,schema:n},s,r,i){const o=n.tags.find(c=>(c.default===!0||t&&c.default==="key")&&c.test?.test(s))||n[Si];if(n.compat){const c=n.compat.find(d=>d.default&&d.test?.test(s))??n[Si];if(o.tag!==c.tag){const d=e.tagString(o.tag),h=e.tagString(c.tag),g=`Value may be parsed as either ${d} or ${h}`;i(r,"TAG_RESOLVE_FAILED",g,!0)}}return o}function tse(t,e,n){if(e){n??(n=e.length);for(let s=n-1;s>=0;--s){let r=e[s];switch(r.type){case"space":case"comment":case"newline":t-=r.source.length;continue}for(r=e[++s];r?.type==="space";)t+=r.source.length,r=e[++s];break}}return t}const nse={composeNode:g8,composeEmptyNode:Dk};function g8(t,e,n,s){const r=t.atKey,{spaceBefore:i,comment:o,anchor:c,tag:d}=n;let h,g=!0;switch(e.type){case"alias":h=sse(t,e,s),(c||d)&&s(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":h=m8(t,e,d,s),c&&(h.anchor=c.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":h=Une(nse,t,e,n,s),c&&(h.anchor=c.source.substring(1));break;default:{const m=e.type==="error"?e.message:`Unsupported token (type: ${e.type})`;s(e,"UNEXPECTED_TOKEN",m),h=Dk(t,e.offset,void 0,null,n,s),g=!1}}return c&&h.anchor===""&&s(c,"BAD_ALIAS","Anchor cannot be an empty string"),r&&t.options.stringKeys&&(!Yt(h)||typeof h.value!="string"||h.tag&&h.tag!=="tag:yaml.org,2002:str")&&s(d??e,"NON_STRING_KEY","With stringKeys, all keys must be strings"),i&&(h.spaceBefore=!0),o&&(e.type==="scalar"&&e.source===""?h.comment=o:h.commentBefore=o),t.options.keepSourceTokens&&g&&(h.srcToken=e),h}function Dk(t,e,n,s,{spaceBefore:r,comment:i,anchor:o,tag:c,end:d},h){const g={type:"scalar",offset:tse(e,n,s),indent:-1,source:""},m=m8(t,g,c,h);return o&&(m.anchor=o.source.substring(1),m.anchor===""&&h(o,"BAD_ALIAS","Anchor cannot be an empty string")),r&&(m.spaceBefore=!0),i&&(m.comment=i,m.range[2]=d),m}function sse({options:t},{offset:e,source:n,end:s},r){const i=new wk(n.substring(1));i.source===""&&r(e,"BAD_ALIAS","Alias cannot be an empty string"),i.source.endsWith(":")&&r(e+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const o=e+n.length,c=tp(s,o,t.strict,r);return i.range=[e,o,c.offset],c.comment&&(i.comment=c.comment),i}function rse(t,e,{offset:n,start:s,value:r,end:i},o){const c=Object.assign({_directives:e},t),d=new Bk(void 0,c),h={atKey:!1,atRoot:!0,directives:d.directives,options:d.options,schema:d.schema},g=hu(s,{indicator:"doc-start",next:r??i?.[0],offset:n,onError:o,parentIndent:0,startOnNewline:!0});g.found&&(d.directives.docStart=!0,r&&(r.type==="block-map"||r.type==="block-seq")&&!g.hasNewline&&o(g.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),d.contents=r?g8(h,r,g,o):Dk(h,g.end,s,null,g,o);const m=d.contents.range[2],b=tp(i,m,!1,o);return b.comment&&(d.comment=b.comment),d.range=[n,m,b.offset],d}function Fh(t){if(typeof t=="number")return[t,t+1];if(Array.isArray(t))return t.length===2?t:[t[0],t[1]];const{offset:e,source:n}=t;return[e,e+(typeof n=="string"?n.length:1)]}function fT(t){let e="",n=!1,s=!1;for(let r=0;r<t.length;++r){const i=t[r];switch(i[0]){case"#":e+=(e===""?"":s?`

`:`
`)+(i.substring(1)||" "),n=!0,s=!1;break;case"%":t[r+1]?.[0]!=="#"&&(r+=1),n=!1;break;default:n||(s=!0),n=!1}}return{comment:e,afterEmptyLine:s}}class ise{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(n,s,r,i)=>{const o=Fh(n);i?this.warnings.push(new Pne(o,s,r)):this.errors.push(new Ad(o,s,r))},this.directives=new _s({version:e.version||"1.2"}),this.options=e}decorate(e,n){const{comment:s,afterEmptyLine:r}=fT(this.prelude);if(s){const i=e.contents;if(n)e.comment=e.comment?`${e.comment}
${s}`:s;else if(r||e.directives.docStart||!i)e.commentBefore=s;else if(yn(i)&&!i.flow&&i.items.length>0){let o=i.items[0];xn(o)&&(o=o.key);const c=o.commentBefore;o.commentBefore=c?`${s}
${c}`:s}else{const o=i.commentBefore;i.commentBefore=o?`${s}
${o}`:s}}n?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:fT(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,n=!1,s=-1){for(const r of e)yield*this.next(r);yield*this.end(n,s)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,(n,s,r)=>{const i=Fh(e);i[0]+=n,this.onError(i,"BAD_DIRECTIVE",s,r)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{const n=rse(this.options,this.directives,e,this.onError);this.atDirectives&&!n.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(n,!1),this.doc&&(yield this.doc),this.doc=n,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const n=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,s=new Ad(Fh(e),"UNEXPECTED_TOKEN",n);this.atDirectives||!this.doc?this.errors.push(s):this.doc.errors.push(s);break}case"doc-end":{if(!this.doc){const s="Unexpected doc-end without preceding document";this.errors.push(new Ad(Fh(e),"UNEXPECTED_TOKEN",s));break}this.doc.directives.docEnd=!0;const n=tp(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),n.comment){const s=this.doc.comment;this.doc.comment=s?`${s}
${n.comment}`:n.comment}this.doc.range[2]=n.offset;break}default:this.errors.push(new Ad(Fh(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,n=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){const s=Object.assign({_directives:this.directives},this.options),r=new Bk(void 0,s);this.atDirectives&&this.onError(n,"MISSING_CHAR","Missing directives-end indicator line"),r.range=[0,n,n],this.decorate(r,!1),yield r}}}const y8="\uFEFF",b8="",v8="",vS="";function ase(t){switch(t){case y8:return"byte-order-mark";case b8:return"doc-mode";case v8:return"flow-error-end";case vS:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}function Vr(t){switch(t){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}const pT=new Set("0123456789ABCDEFabcdef"),ose=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),Km=new Set(",[]{}"),lse=new Set(` ,[]{}
\r	`),Bx=t=>!t||lse.has(t);class cse{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,n=!1){if(e){if(typeof e!="string")throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null}this.atEnd=!n;let s=this.next??"stream";for(;s&&(n||this.hasChars(1));)s=yield*this.parseNext(s)}atLineEnd(){let e=this.pos,n=this.buffer[e];for(;n===" "||n==="	";)n=this.buffer[++e];return!n||n==="#"||n===`
`?!0:n==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let n=this.buffer[e];if(this.indentNext>0){let s=0;for(;n===" ";)n=this.buffer[++s+e];if(n==="\r"){const r=this.buffer[s+e+1];if(r===`
`||!r&&!this.atEnd)return e+s+1}return n===`
`||s>=this.indentNext||!n&&!this.atEnd?e+s:-1}if(n==="-"||n==="."){const s=this.buffer.substr(e,3);if((s==="---"||s==="...")&&Vr(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===y8&&(yield*this.pushCount(1),e=e.substring(1)),e[0]==="%"){let n=e.length,s=e.indexOf("#");for(;s!==-1;){const i=e[s-1];if(i===" "||i==="	"){n=s-1;break}else s=e.indexOf("#",s+1)}for(;;){const i=e[n-1];if(i===" "||i==="	")n-=1;else break}const r=(yield*this.pushCount(n))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-r),this.pushNewline(),"stream"}if(this.atLineEnd()){const n=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-n),yield*this.pushNewline(),"stream"}return yield b8,yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const n=this.peek(3);if((n==="---"||n==="...")&&Vr(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,n==="---"?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!Vr(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[e,n]=this.peek(2);if(!n&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&Vr(n)){const s=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=s,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const e=this.getLine();if(e===null)return this.setNext("doc");let n=yield*this.pushIndicators();switch(e[n]){case"#":yield*this.pushCount(e.length-n);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(Bx),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return n+=yield*this.parseBlockScalarHeader(),n+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-n),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,n,s=-1;do e=yield*this.pushNewline(),e>0?(n=yield*this.pushSpaces(!1),this.indentValue=s=n):n=0,n+=yield*this.pushSpaces(!0);while(e+n>0);const r=this.getLine();if(r===null)return this.setNext("flow");if((s!==-1&&s<this.indentNext&&r[0]!=="#"||s===0&&(r.startsWith("---")||r.startsWith("..."))&&Vr(r[3]))&&!(s===this.indentNext-1&&this.flowLevel===1&&(r[0]==="]"||r[0]==="}")))return this.flowLevel=0,yield v8,yield*this.parseLineStart();let i=0;for(;r[i]===",";)i+=yield*this.pushCount(1),i+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(i+=yield*this.pushIndicators(),r[i]){case void 0:return"flow";case"#":return yield*this.pushCount(r.length-i),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(Bx),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const o=this.charAt(1);if(this.flowKey||Vr(o)||o===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let n=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;n!==-1&&this.buffer[n+1]==="'";)n=this.buffer.indexOf("'",n+2);else for(;n!==-1;){let i=0;for(;this.buffer[n-1-i]==="\\";)i+=1;if(i%2===0)break;n=this.buffer.indexOf('"',n+1)}const s=this.buffer.substring(0,n);let r=s.indexOf(`
`,this.pos);if(r!==-1){for(;r!==-1;){const i=this.continueScalar(r+1);if(i===-1)break;r=s.indexOf(`
`,i)}r!==-1&&(n=r-(s[r-1]==="\r"?2:1))}if(n===-1){if(!this.atEnd)return this.setNext("quoted-scalar");n=this.buffer.length}return yield*this.pushToIndex(n+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const n=this.buffer[++e];if(n==="+")this.blockScalarKeep=!0;else if(n>"0"&&n<="9")this.blockScalarIndent=Number(n)-1;else if(n!=="-")break}return yield*this.pushUntil(n=>Vr(n)||n==="#")}*parseBlockScalar(){let e=this.pos-1,n=0,s;e:for(let i=this.pos;s=this.buffer[i];++i)switch(s){case" ":n+=1;break;case`
`:e=i,n=0;break;case"\r":{const o=this.buffer[i+1];if(!o&&!this.atEnd)return this.setNext("block-scalar");if(o===`
`)break}default:break e}if(!s&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=n:this.indentNext=this.blockScalarIndent+(this.indentNext===0?1:this.indentNext);do{const i=this.continueScalar(e+1);if(i===-1)break;e=this.buffer.indexOf(`
`,i)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}let r=e+1;for(s=this.buffer[r];s===" ";)s=this.buffer[++r];if(s==="	"){for(;s==="	"||s===" "||s==="\r"||s===`
`;)s=this.buffer[++r];e=r-1}else if(!this.blockScalarKeep)do{let i=e-1,o=this.buffer[i];o==="\r"&&(o=this.buffer[--i]);const c=i;for(;o===" ";)o=this.buffer[--i];if(o===`
`&&i>=this.pos&&i+1+n>c)e=i;else break}while(!0);return yield vS,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let n=this.pos-1,s=this.pos-1,r;for(;r=this.buffer[++s];)if(r===":"){const i=this.buffer[s+1];if(Vr(i)||e&&Km.has(i))break;n=s}else if(Vr(r)){let i=this.buffer[s+1];if(r==="\r"&&(i===`
`?(s+=1,r=`
`,i=this.buffer[s+1]):n=s),i==="#"||e&&Km.has(i))break;if(r===`
`){const o=this.continueScalar(s+1);if(o===-1)break;s=Math.max(s,o-2)}}else{if(e&&Km.has(r))break;n=s}return!r&&!this.atEnd?this.setNext("plain-scalar"):(yield vS,yield*this.pushToIndex(n+1,!0),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,n){const s=this.buffer.slice(this.pos,e);return s?(yield s,this.pos+=s.length,s.length):(n&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(Bx))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const e=this.flowLevel>0,n=this.charAt(1);if(Vr(n)||e&&Km.has(n))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,n=this.buffer[e];for(;!Vr(n)&&n!==">";)n=this.buffer[++e];return yield*this.pushToIndex(n===">"?e+1:e,!1)}else{let e=this.pos+1,n=this.buffer[e];for(;n;)if(ose.has(n))n=this.buffer[++e];else if(n==="%"&&pT.has(this.buffer[e+1])&&pT.has(this.buffer[e+2]))n=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){const e=this.buffer[this.pos];return e===`
`?yield*this.pushCount(1):e==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(e){let n=this.pos-1,s;do s=this.buffer[++n];while(s===" "||e&&s==="	");const r=n-this.pos;return r>0&&(yield this.buffer.substr(this.pos,r),this.pos=n),r}*pushUntil(e){let n=this.pos,s=this.buffer[n];for(;!e(s);)s=this.buffer[++n];return yield*this.pushToIndex(n,!1)}}class use{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let n=0,s=this.lineStarts.length;for(;n<s;){const i=n+s>>1;this.lineStarts[i]<e?n=i+1:s=i}if(this.lineStarts[n]===e)return{line:n+1,col:1};if(n===0)return{line:0,col:e};const r=this.lineStarts[n-1];return{line:n,col:e-r+1}}}}function Ja(t,e){for(let n=0;n<t.length;++n)if(t[n].type===e)return!0;return!1}function mT(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function x8(t){switch(t?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function Wm(t){switch(t.type){case"document":return t.start;case"block-map":{const e=t.items[t.items.length-1];return e.sep??e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function kc(t){if(t.length===0)return[];let e=t.length;e:for(;--e>=0;)switch(t[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;t[++e]?.type==="space";);return t.splice(e,t.length)}function gT(t){if(t.start.type==="flow-seq-start")for(const e of t.items)e.sep&&!e.value&&!Ja(e.start,"explicit-key-ind")&&!Ja(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,x8(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}class hse{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new cse,this.onNewLine=e}*parse(e,n=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(const s of this.lexer.lex(e,n))yield*this.next(s);n||(yield*this.end())}*next(e){if(this.source=e,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}const n=ase(e);if(n)if(n==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=n,yield*this.step(),n){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{const s=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:s,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const e=this.peek(1);if(this.type==="doc-end"&&e?.type!=="doc-end"){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){const n=e??this.stack.pop();if(!n)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield n;else{const s=this.peek(1);switch(n.type==="block-scalar"?n.indent="indent"in s?s.indent:0:n.type==="flow-collection"&&s.type==="document"&&(n.indent=0),n.type==="flow-collection"&&gT(n),s.type){case"document":s.value=n;break;case"block-scalar":s.props.push(n);break;case"block-map":{const r=s.items[s.items.length-1];if(r.value){s.items.push({start:[],key:n,sep:[]}),this.onKeyLine=!0;return}else if(r.sep)r.value=n;else{Object.assign(r,{key:n,sep:[]}),this.onKeyLine=!r.explicitKey;return}break}case"block-seq":{const r=s.items[s.items.length-1];r.value?s.items.push({start:[],value:n}):r.value=n;break}case"flow-collection":{const r=s.items[s.items.length-1];!r||r.value?s.items.push({start:[],key:n,sep:[]}):r.sep?r.value=n:Object.assign(r,{key:n,sep:[]});return}default:yield*this.pop(),yield*this.pop(n)}if((s.type==="document"||s.type==="block-map"||s.type==="block-seq")&&(n.type==="block-map"||n.type==="block-seq")){const r=n.items[n.items.length-1];r&&!r.sep&&!r.value&&r.start.length>0&&mT(r.start)===-1&&(n.indent===0||r.start.every(i=>i.type!=="comment"||i.indent<n.indent))&&(s.type==="document"?s.end=r.start:s.items.push({start:r.start}),n.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{mT(e.start)!==-1?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}const n=this.startBlockValue(e);n?this.stack.push(n):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){const n=Wm(this.peek(2)),s=kc(n);let r;e.end?(r=e.end,r.push(this.sourceToken),delete e.end):r=[this.sourceToken];const i={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:s,key:e,sep:r}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=i}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){const n=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,n.value){const s="end"in n.value?n.value.end:void 0;(Array.isArray(s)?s[s.length-1]:void 0)?.type==="comment"?s?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else if(n.sep)n.sep.push(this.sourceToken);else{if(this.atIndentedComment(n.start,e.indent)){const r=e.items[e.items.length-2]?.value?.end;if(Array.isArray(r)){Array.prototype.push.apply(r,n.start),r.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return}if(this.indent>=e.indent){const s=!this.onKeyLine&&this.indent===e.indent,r=s&&(n.sep||n.explicitKey)&&this.type!=="seq-item-ind";let i=[];if(r&&n.sep&&!n.value){const o=[];for(let c=0;c<n.sep.length;++c){const d=n.sep[c];switch(d.type){case"newline":o.push(c);break;case"space":break;case"comment":d.indent>e.indent&&(o.length=0);break;default:o.length=0}}o.length>=2&&(i=n.sep.splice(o[1]))}switch(this.type){case"anchor":case"tag":r||n.value?(i.push(this.sourceToken),e.items.push({start:i}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"explicit-key-ind":!n.sep&&!n.explicitKey?(n.start.push(this.sourceToken),n.explicitKey=!0):r||n.value?(i.push(this.sourceToken),e.items.push({start:i,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}),this.onKeyLine=!0;return;case"map-value-ind":if(n.explicitKey)if(n.sep)if(n.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(Ja(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:i,key:null,sep:[this.sourceToken]}]});else if(x8(n.key)&&!Ja(n.sep,"newline")){const o=kc(n.start),c=n.key,d=n.sep;d.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:c,sep:d}]})}else i.length>0?n.sep=n.sep.concat(i,this.sourceToken):n.sep.push(this.sourceToken);else if(Ja(n.start,"newline"))Object.assign(n,{key:null,sep:[this.sourceToken]});else{const o=kc(n.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]})}else n.sep?n.value||r?e.items.push({start:i,key:null,sep:[this.sourceToken]}):Ja(n.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const o=this.flowScalar(this.type);r||n.value?(e.items.push({start:i,key:o,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(o):(Object.assign(n,{key:o,sep:[]}),this.onKeyLine=!0);return}default:{const o=this.startBlockValue(e);if(o){if(o.type==="block-seq"){if(!n.explicitKey&&n.sep&&!Ja(n.sep,"newline")){yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source});return}}else s&&e.items.push({start:i});this.stack.push(o);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){const n=e.items[e.items.length-1];switch(this.type){case"newline":if(n.value){const s="end"in n.value?n.value.end:void 0;(Array.isArray(s)?s[s.length-1]:void 0)?.type==="comment"?s?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(n.start,e.indent)){const r=e.items[e.items.length-2]?.value?.end;if(Array.isArray(r)){Array.prototype.push.apply(r,n.start),r.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return;case"anchor":case"tag":if(n.value||this.indent<=e.indent)break;n.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;n.value||Ja(n.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return}if(this.indent>e.indent){const s=this.startBlockValue(e);if(s){this.stack.push(s);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){const n=e.items[e.items.length-1];if(this.type==="flow-error-end"){let s;do yield*this.pop(),s=this.peek(1);while(s?.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!n||n.sep?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return;case"map-value-ind":!n||n.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!n||n.value?e.items.push({start:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const r=this.flowScalar(this.type);!n||n.value?e.items.push({start:[],key:r,sep:[]}):n.sep?this.stack.push(r):Object.assign(n,{key:r,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}const s=this.startBlockValue(e);s?this.stack.push(s):(yield*this.pop(),yield*this.step())}else{const s=this.peek(2);if(s.type==="block-map"&&(this.type==="map-value-ind"&&s.indent===e.indent||this.type==="newline"&&!s.items[s.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&s.type!=="flow-collection"){const r=Wm(s),i=kc(r);gT(e);const o=e.end.splice(1,e.end.length);o.push(this.sourceToken);const c={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:i,key:e,sep:o}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=c}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const n=Wm(e),s=kc(n);return s.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;const n=Wm(e),s=kc(n);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,n){return this.type!=="comment"||this.indent<=n?!1:e.every(s=>s.type==="newline"||s.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}}function dse(t){const e=t.prettyErrors!==!1;return{lineCounter:t.lineCounter||e&&new use||null,prettyErrors:e}}function fse(t,e={}){const{lineCounter:n,prettyErrors:s}=dse(e),r=new hse(n?.addNewLine),i=new ise(e);let o=null;for(const c of i.compose(r.parse(t),!0,t.length))if(!o)o=c;else if(o.options.logLevel!=="silent"){o.errors.push(new Ad(c.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return s&&n&&(o.errors.forEach(hT(t,n)),o.warnings.forEach(hT(t,n))),o}function Dx(t,e,n){let s;const r=fse(t,n);if(!r)return null;if(r.warnings.forEach(i=>KD(r.options.logLevel,i)),r.errors.length>0){if(r.options.logLevel!=="silent")throw r.errors[0];r.errors=[]}return r.toJS(Object.assign({reviver:s},n))}function yT(t,e,n){let s=null;if(typeof e=="function"||Array.isArray(e)?s=e:n===void 0&&e&&(n=e),typeof n=="string"&&(n=n.length),typeof n=="number"){const r=Math.round(n);n=r<1?void 0:r>8?{indent:8}:{indent:r}}if(t===void 0){const{keepUndefined:r}=n??e??{};if(!r)return}return Jf(t)&&!s?t.toString(n):new Bk(t,s,n).toString(n)}function Lx(){return document.documentElement.classList.contains("dark")||window.matchMedia("(prefers-color-scheme: dark)").matches}function pse({resource:t,loading:e,error:n,onSave:s,toolbarRef:r}){const[i,o]=F.useState(""),[c,d]=F.useState(""),[h,g]=F.useState(!1),[m,b]=F.useState(null),[y,w]=F.useState(!1),[x,S]=F.useState(null),[k,C]=F.useState(Lx),N=F.useRef(null),R=F.useRef(null),[B,E]=F.useState(!1);F.useEffect(()=>{const V=new MutationObserver(()=>{C(Lx())});V.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]});const q=window.matchMedia("(prefers-color-scheme: dark)"),X=()=>C(Lx());return q.addEventListener("change",X),()=>{V.disconnect(),q.removeEventListener("change",X)}},[]);const z=F.useCallback(async V=>{const q=V.getModel();if(!q)return E(!0);const X=q.getValue().split(`
`),I=/^(\s*)(managedFields|ownerReferences|kubectl\.kubernetes\.io\/last-applied-configuration):/,L=X.flatMap((J,G)=>{const P=J.match(I);if(!P)return[];const T=P[1].length,O=X.slice(G+1).findIndex(j=>j.trimStart().length>0&&j.length-j.trimStart().length<=T),K=O===-1?X.length:G+1+O;return K>G+1?[{start:G+1,end:K}]:[]});for(const{start:J,end:G}of L.reverse())V.setSelection({startLineNumber:J,startColumn:1,endLineNumber:G,endColumn:1}),await V.getAction("editor.fold")?.run();V.setPosition({lineNumber:1,column:1}),V.revealLine(1),E(!0)},[]);F.useEffect(()=>{if(t){const V=yT(t,{lineWidth:0});V!==c&&(h?d(V):(o(V),d(V),b(null),S(null),N.current&&(E(!1),setTimeout(()=>z(N.current),100))))}},[t,c,h,z]),F.useEffect(()=>{if(!i){b(null);return}try{Dx(i),b(null)}catch(V){b(V instanceof Error?V.message:"Invalid YAML")}},[i]);const U=(V,q)=>{N.current=V,R.current=q,q.languages.registerDocumentFormattingEditProvider("yaml",{provideDocumentFormattingEdits:X=>{try{const I=X.getValue(),L=Dx(I),J=yT(L,{lineWidth:0});return[{range:X.getFullModelRange(),text:J}]}catch{return[]}}}),E(!1),setTimeout(()=>z(V),100)},Y=V=>{const q=V||"";o(q),g(q!==c),S(null)},D=F.useCallback(()=>{o(c),g(!1),b(null),S(null)},[c]),W=F.useCallback(async()=>{if(!(m||!h))try{w(!0),S(null);const V=Dx(i);await s(V),d(i),g(!1)}catch(V){S(V instanceof Error?V.message:"Failed to save")}finally{w(!1)}},[m,h,i,s]);return e?f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsxs("div",{className:"flex items-center gap-2 text-neutral-600 dark:text-neutral-400 text-sm",children:[f.jsx(na,{size:14,className:"animate-spin"}),"Loading resource..."]})}):n?f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsx("div",{className:"text-sm text-red-600 dark:text-red-400",children:n})}):t?f.jsxs("div",{className:"flex flex-col h-full",children:[r&&f.jsxs(ck,{toolbarRef:r,children:[f.jsx("button",{onClick:W,disabled:!h||!!m||y,className:"flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 hover:bg-neutral-200 dark:hover:bg-neutral-800 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Save changes",children:y?f.jsx(na,{size:12,className:"animate-spin"}):f.jsx(jP,{size:12})}),f.jsx("button",{onClick:D,disabled:!h||y,className:"flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-200 dark:hover:bg-neutral-800 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Reset changes",children:f.jsx(NP,{size:12})})]}),(m||x)&&f.jsx("div",{className:"shrink-0 flex items-center gap-2 px-4 py-2 bg-red-50 dark:bg-red-500/10 border-b border-red-200 dark:border-red-500/20",children:m?f.jsxs(f.Fragment,{children:[f.jsx(fu,{size:14,className:"text-red-500 shrink-0"}),f.jsxs("span",{className:"text-xs text-red-700 dark:text-red-400",children:["Invalid YAML: ",m]})]}):f.jsxs(f.Fragment,{children:[f.jsx(Og,{size:14,className:"text-red-500 shrink-0"}),f.jsx("span",{className:"text-xs text-red-700 dark:text-red-400",children:x})]})}),f.jsx("div",{className:`flex-1 min-h-0 transition-opacity duration-150 ${B?"opacity-100":"opacity-0"}`,children:f.jsx(rne,{height:"100%",language:"yaml",theme:k?"vs-dark":"light",value:i,onChange:Y,onMount:U,loading:f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsx(na,{size:20,className:"animate-spin text-neutral-400"})}),options:{minimap:{enabled:!1},fontSize:13,fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace',lineNumbers:"on",scrollBeyondLastLine:!1,wordWrap:"on",wrappingIndent:"indent",automaticLayout:!0,tabSize:2,insertSpaces:!0,renderWhitespace:"selection",bracketPairColorization:{enabled:!0},guides:{indentation:!0,bracketPairs:!0},padding:{top:12,bottom:12},scrollbar:{verticalScrollbarSize:10,horizontalScrollbarSize:10}}})})]}):f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"No resource loaded"})})}const mse=new Set(["managedFields"]);function gse(t){const e=t.metadata;if(!e)return t;const n=Object.fromEntries(Object.entries(e).filter(([s])=>!mse.has(s)));return{...t,metadata:n}}function _8({isOpen:t,onClose:e,otherPanelOpen:n=!1,resource:s}){const{context:r}=ei(),[i,o]=F.useState(null),[c,d]=F.useState(!1),[h,g]=F.useState(null),[m,b]=F.useState([]),[y,w]=F.useState(!1),[x,S]=F.useState("yaml"),[k,C]=F.useState(null),[N,R]=F.useState(null),[B,E]=F.useState(null),z=F.useRef(null),U=F.useRef(null),Y=5e3,D=F.useCallback(async()=>{if(!(!s||!s.name||!s.kind))try{const Ee=await JA(r,s.kind,s.apiVersion);if(Ee){const Ue=await zx(r,Ee,s.name,s.namespace);o(Ue)}const Je=await Hx(r,s.name,s.namespace);b(Je)}catch{}},[r,s]);F.useEffect(()=>{if(!t||!s?.name||!i)return;const Ee=setInterval(()=>{D()},Y);return()=>clearInterval(Ee)},[t,s?.name,i,D]);const W=i?MB(i):[],V=async Ee=>{R(null),C(Ee.id);try{await Ee.execute(r,i),D()}catch(Je){R(Je instanceof Error?Je.message:"Action failed")}finally{C(null),E(null)}},q=Ee=>{Ee.confirm?E(Ee):V(Ee)},X=F.useCallback(async Ee=>{if(!s||!s.name||!z.current)throw new Error("Resource configuration not available");const Je=await KT(r,z.current,s.name,Ee,s.namespace);o(Je)},[r,s]);if(F.useEffect(()=>{const Ee=s?.kind||"";if(S(nj(Ee)?"overview":"yaml"),!s||!s.name||!s.kind){o(null),g(null),b([]);return}const Je=s.name,Ue=s.namespace,bt=s.apiVersion,qt=async()=>{d(!0),g(null);try{const Pt=await JA(r,Ee,bt);if(!Pt){g(`Unknown resource kind: ${Ee}`),d(!1);return}z.current=Pt;const Wn=await zx(r,Pt,Je,Ue);o(Wn)}catch(Pt){g(Pt instanceof Error?Pt.message:"Failed to fetch resource"),o(null)}finally{d(!1)}},It=async()=>{w(!0);try{const Pt=await Hx(r,Je,Ue);b(Pt)}catch(Pt){console.error("Failed to fetch events:",Pt),b([])}finally{w(!1)}};qt(),It()},[r,s]),!t||!s||!s.name)return null;const I=i,L=I?gse(I):null,J=s.name,G=s.kind||"Resource",P=nj(G),T=new Set(["pod-template-hash","controller-revision-hash","pod-template-generation"]),O=new Set(["kubectl.kubernetes.io/last-applied-configuration","deployment.kubernetes.io/revision","control-plane.alpha.kubernetes.io/leader","deprecated.daemonset.template.generation","kubernetes.io/description"]),K=L?.metadata,j=K?.labels,Z=K?.annotations,le=j?Object.keys(j).filter(Ee=>!T.has(Ee)).length:0,te=Z?Object.keys(Z).filter(Ee=>!O.has(Ee)).length:0,pe=le>0||te>0,Ce=["Pod","Deployment","DaemonSet","ReplicaSet","StatefulSet","Job"].includes(G)&&!!s.namespace,tt=G==="Pod"&&!!s.namespace;return f.jsxs("aside",{className:"fixed top-0 h-screen bg-white border-l border-neutral-200 dark:bg-neutral-900 dark:border-neutral-800 flex flex-col z-20 shadow-xl transition-all duration-300",style:{right:n?"28rem":"0",width:n?"28rem":"40rem"},children:["      ",f.jsxs("header",{className:"shrink-0 h-16 flex items-center justify-between pl-5 pr-4 border-b border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900",children:[f.jsx("div",{className:"flex items-center gap-3 min-w-0",children:f.jsxs("div",{className:"min-w-0",children:[f.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-neutral-100 truncate",children:J}),f.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-500",children:s.namespace||"cluster-scoped"})]})}),f.jsx("button",{onClick:e,className:"p-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-400 dark:hover:text-neutral-200 dark:hover:bg-neutral-800 rounded-md transition-colors",title:"Close",children:f.jsx(Og,{size:18})})]}),f.jsxs("div",{className:"shrink-0 flex items-center border-b border-neutral-200 dark:border-neutral-800 bg-neutral-50 dark:bg-neutral-900/50",children:[f.jsxs("div",{className:"flex",children:[P&&f.jsx("button",{onClick:()=>S("overview"),className:`px-4 py-2.5 text-sm font-medium transition-colors ${x==="overview"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 -mb-px":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200"}`,children:"Overview"}),pe&&f.jsx("button",{onClick:()=>S("metadata"),className:`px-4 py-2.5 text-sm font-medium transition-colors ${x==="metadata"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 -mb-px":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200"}`,children:"Metadata"}),f.jsx("button",{onClick:()=>S("yaml"),className:`px-4 py-2.5 text-sm font-medium transition-colors ${x==="yaml"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 -mb-px":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200"}`,children:"Manifest"}),m.length>0&&f.jsx("button",{onClick:()=>S("events"),className:`px-4 py-2.5 text-sm font-medium transition-colors ${x==="events"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 -mb-px":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200"}`,children:"Events"}),Ce&&f.jsx("button",{onClick:()=>S("logs"),className:`px-4 py-2.5 text-sm font-medium transition-colors ${x==="logs"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 -mb-px":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200"}`,children:"Logs"}),tt&&f.jsx("button",{onClick:()=>S("terminal"),className:`px-4 py-2.5 text-sm font-medium transition-colors ${x==="terminal"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 -mb-px":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200"}`,children:"Terminal"})]}),f.jsxs("div",{className:"ml-auto pr-4 flex items-center gap-1",children:[f.jsx("div",{ref:U,className:"flex items-center gap-1"}),x==="overview"&&W.length>0&&f.jsx(f.Fragment,{children:W.map(Ee=>{const Je=Ee.isDisabled?.(i),Ue=Je===!0||typeof Je=="string",bt=typeof Je=="string"?Je:void 0,qt=k===Ee.id;return f.jsx("button",{onClick:()=>q(Ee),disabled:Ue||qt,title:bt||Ee.label,className:`
                      flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium rounded transition-colors
                      ${Ue||qt?"opacity-50 cursor-not-allowed":""}
                      ${Ee.variant==="primary"?"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 hover:bg-neutral-200 dark:hover:bg-neutral-800":Ee.variant==="warning"?"text-amber-600 dark:text-amber-400 hover:text-amber-700 dark:hover:text-amber-300 hover:bg-neutral-200 dark:hover:bg-neutral-800":Ee.variant==="danger"?"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 hover:bg-neutral-200 dark:hover:bg-neutral-800":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-200 dark:hover:bg-neutral-800"}
                    `,children:qt?f.jsx(En,{size:12,className:"animate-spin"}):Ee.icon},Ee.id)})})]})]}),N&&f.jsx("div",{className:"shrink-0 mx-4 mt-2 p-2 bg-red-500/10 border border-red-500/30 rounded text-red-600 dark:text-red-400 text-xs",children:N}),B&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:f.jsxs("div",{className:"bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg p-4 max-w-md mx-4 shadow-xl",children:[f.jsx("h3",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-200 mb-2",children:B.confirm?.title}),f.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400 mb-4",children:B.confirm?.message}),f.jsxs("div",{className:"flex justify-end gap-2",children:[f.jsx("button",{onClick:()=>E(null),className:"px-3 py-1.5 text-xs font-medium text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded transition-colors",children:"Cancel"}),f.jsxs("button",{onClick:()=>V(B),disabled:k===B.id,className:`
                  px-3 py-1.5 text-xs font-medium text-white rounded transition-colors
                  ${B.variant==="danger"?"bg-red-600 hover:bg-red-700":B.variant==="warning"?"bg-amber-600 hover:bg-amber-700":"bg-blue-600 hover:bg-blue-700"}
                  ${k===B.id?"opacity-50 cursor-not-allowed":""}
                `,children:[k===B.id?f.jsx(En,{size:12,className:"animate-spin inline mr-1"}):null,B.confirm?.confirmLabel||"Confirm"]})]})]})}),x==="overview"&&P&&f.jsxs("div",{className:"flex-1 overflow-auto p-4",children:[c&&f.jsxs("div",{className:"flex items-center gap-2 text-neutral-600 dark:text-neutral-400 text-sm mb-4",children:[f.jsx(na,{size:14,className:"animate-spin"}),"Loading full resource..."]}),h&&f.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mb-4",children:h}),i&&!c&&f.jsx(YX,{resource:i,hideActions:!0})]}),x==="yaml"&&f.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:f.jsx(pse,{resource:i,loading:c,error:h,onSave:X,toolbarRef:U})}),x==="metadata"&&f.jsx("div",{className:"flex-1 overflow-auto p-5",children:L&&f.jsx(Hee,{metadata:L.metadata})}),x==="events"&&f.jsx("div",{className:"flex-1 overflow-auto p-5",children:f.jsx(Kee,{events:m,loading:y})}),x==="logs"&&Ce&&i&&f.jsx("div",{className:"flex-1 overflow-hidden",children:f.jsx(pJ,{resource:i,toolbarRef:U})}),x==="terminal"&&tt&&i&&f.jsx("div",{className:"flex-1 overflow-hidden",children:f.jsx(zee,{resource:i,toolbarRef:U})})]})}const Ix="ai";function yse(t){return t.name.charAt(0).toUpperCase()+t.name.slice(1)}function bse(t){const e=Me.c(42),{resource:n}=t,{context:s,namespace:r}=ei(),{isOpen:i,toggle:o,close:c}=OS();let d;e[0]!==i?(d=i(Ix),e[0]=i,e[1]=d):d=e[1];const h=d;let g,m;e[2]!==s||e[3]!==r||e[4]!==n?(g=()=>RS(s,n,r),m=[s,n,r],e[2]=s,e[3]=r,e[4]=n,e[5]=g,e[6]=m):(g=e[5],m=e[6]);const{data:b,loading:y,error:w,refetch:x,isRefetching:S}=GT(g,m);let k;e[7]!==n.group||e[8]!==n.kind||e[9]!==n.version?(k=I=>I.object.metadata?{name:I.object.metadata.name||"",namespace:I.object.metadata.namespace,uid:I.object.metadata.uid||"",resourceVersion:I.object.metadata.resourceVersion||"",kind:n.kind,apiVersion:n.group?`${n.group}/${n.version}`:n.version||""}:null,e[7]=n.group,e[8]=n.kind,e[9]=n.version,e[10]=k):k=e[10];const C=k;let N;e[11]===Symbol.for("react.memo_cache_sentinel")?(N=vK(),e[11]=N):N=e[11];const R=N;let B;e[12]!==s||e[13]!==r||e[14]!==n.group||e[15]!==n.kind||e[16]!==n.version?(B=I=>({currentContext:s,currentNamespace:I?.object.metadata?.namespace||r||"all namespaces",selectedResourceKind:n.group?`${n.kind} (${n.group}/${n.version})`:`${n.kind} (${n.version})`,selectedResourceName:I?.object.metadata?.name}),e[12]=s,e[13]=r,e[14]=n.group,e[15]=n.kind,e[16]=n.version,e[17]=B):B=e[17];const E=B;let z;e[18]!==h||e[19]!==o?(z=()=>sl().ai?f.jsx("button",{onClick:()=>o(Ix),className:`p-2 rounded-md transition-colors ${h?"text-sky-400 hover:text-sky-300 hover:bg-neutral-100 dark:hover:bg-neutral-800":"text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800"}`,title:"AI Assistant",children:f.jsx(UT,{size:18})}):null,e[18]=h,e[19]=o,e[20]=z):z=e[20];const U=z;let Y;e[21]!==c||e[22]!==E||e[23]!==h?(Y=(I,L)=>{const J=E(I);return f.jsx(BO,{isOpen:h,onClose:()=>c(Ix),otherPanelOpen:L,adapter:R,environment:J})},e[21]=c,e[22]=E,e[23]=h,e[24]=Y):Y=e[24];const D=Y;let W;e[25]!==C||e[26]!==h?(W=(I,L,J)=>{const G=C(I);return f.jsx(_8,{isOpen:!0,onClose:L,otherPanelOpen:J||h,resource:G})},e[25]=C,e[26]=h,e[27]=W):W=e[27];const V=W;let q;e[28]!==n?(q=yse(n),e[28]=n,e[29]=q):q=e[29];let X;return e[30]!==b||e[31]!==w||e[32]!==S||e[33]!==y||e[34]!==r||e[35]!==x||e[36]!==V||e[37]!==D||e[38]!==U||e[39]!==n||e[40]!==q?(X=f.jsx(XT,{config:n,title:q,namespace:r,data:b,loading:y,error:w,refetch:x,isRefetching:S,renderDetailPanel:V,renderHeaderActions:U,renderExtraPanels:D}),e[30]=b,e[31]=w,e[32]=S,e[33]=y,e[34]=r,e[35]=x,e[36]=V,e[37]=D,e[38]=U,e[39]=n,e[40]=q,e[41]=X):X=e[41],X}async function jl(t){const e=await fetch(`/docker${t}`);if(!e.ok)throw new Error(`Docker API request failed: ${e.status} ${e.statusText}`);return e.json()}async function Wd(t=!0){return jl(`/containers/json?all=${t}`)}async function xS(t){return jl(`/containers/${t}/json`)}async function Lk(){return jl("/images/json")}async function vse(t,e=!1){return n1(`/images/${t}?force=${e}`)}async function xse(){return(await jl("/volumes")).Volumes??[]}async function bT(t){return jl(`/volumes/${encodeURIComponent(t)}`)}async function _se(t,e=!1){return n1(`/volumes/${encodeURIComponent(t)}?force=${e}`)}async function wse(){return jl("/networks")}async function vT(t){return jl(`/networks/${t}`)}async function Sse(t){return n1(`/networks/${t}`)}async function np(t){const e=await fetch(`/docker${t}`,{method:"POST"});if(!e.ok){const n=await e.text();throw new Error(n||`Docker API request failed: ${e.status} ${e.statusText}`)}}async function n1(t){const e=await fetch(`/docker${t}`,{method:"DELETE"});if(!e.ok){const n=await e.text();throw new Error(n||`Docker API request failed: ${e.status} ${e.statusText}`)}}async function kse(t){return np(`/containers/${t}/start`)}async function Cse(t){return np(`/containers/${t}/stop`)}async function Nse(t){return np(`/containers/${t}/restart`)}async function Ase(t){return np(`/containers/${t}/pause`)}async function Ese(t){return np(`/containers/${t}/unpause`)}async function jse(t,e=!1){return n1(`/containers/${t}?force=${e}`)}function w8(t,e={}){const n=new URLSearchParams;return n.set("stdout",String(e.stdout??!0)),n.set("stderr",String(e.stderr??!0)),n.set("timestamps",String(e.timestamps??!0)),e.follow&&n.set("follow","true"),e.tail!==void 0&&n.set("tail",String(e.tail)),e.since!==void 0&&n.set("since",String(e.since)),e.until!==void 0&&n.set("until",String(e.until)),`/docker/containers/${t}/logs?${n.toString()}`}async function Tse(t,e={}){const n=w8(t,{...e,follow:!1}),s=await fetch(n);if(!s.ok)throw new Error(`Failed to fetch logs: ${s.status} ${s.statusText}`);return s.text()}async function Rse(t,e,n,s){const r=w8(t,{...e,follow:!0}),i=await fetch(r,{signal:s});if(!i.ok)throw new Error(`Failed to stream logs: ${i.status} ${i.statusText}`);const o=i.body?.getReader();if(!o)throw new Error("No response body");const c=new TextDecoder;let d=[],h="",g=null;const m=w=>{h+=w;const x=h.split(`
`);h=x.pop()||"";for(const S of x)S.trim()&&n(S)},b=w=>{const x=c.decode(w,{stream:!0});m(x)},y=()=>{for(;d.length>=8;){const w=d[4]<<24|d[5]<<16|d[6]<<8|d[7];if(d.length<8+w)break;const x=new Uint8Array(d.slice(8,8+w));d=d.slice(8+w);const S=c.decode(x,{stream:!0});m(S)}};try{for(;;){const{done:w,value:x}=await o.read();if(w)break;if(g===null&&x.length>0){const S=x[0];x.length>=4&&S<=2&&x[1]===0&&x[2]===0&&x[3]===0?g=!0:g=!1}g?(d.push(...x),y()):b(x)}h.trim()&&n(h)}finally{o.releaseLock()}}function tl(t){return!t||t.length===0?"unnamed":t[0].replace(/^\//,"")}function Ose(t){if(t==="<none>:<none>")return{repository:"<none>",tag:"<none>"};if(t.includes("@")){const[r,i]=t.split("@");return{repository:r,tag:i}}const e=t.lastIndexOf("/"),s=(e>=0?t.substring(e+1):t).lastIndexOf(":");if(s>=0){const r=e>=0?e+1+s:s;return{repository:t.substring(0,r),tag:t.substring(r+1)}}return{repository:t,tag:"latest"}}function v0(t){return t<1024?`${t} B`:t<1024*1024?`${(t/1024).toFixed(1)} KB`:t<1024*1024*1024?`${(t/(1024*1024)).toFixed(1)} MB`:`${(t/(1024*1024*1024)).toFixed(2)} GB`}function Mse(t){return!t||t.length===0?"-":t.filter(e=>e.PublicPort).map(e=>`${e.PublicPort}:${e.PrivatePort}/${e.Type}`).join(", ")||"-"}function S8(t){if(!t||t<=0)return"-";const e=new Date(t*1e3),s=new Date().getTime()-e.getTime(),r=Math.floor(s/1e3),i=Math.floor(r/60),o=Math.floor(i/60),c=Math.floor(o/24);return c>0?`${c}d`:o>0?`${o}h`:i>0?`${i}m`:`${r}s`}function xT(t){const e=[{name:"Name",type:"string",format:"",description:"Container name",priority:0},{name:"Image",type:"string",format:"",description:"Container image",priority:0},{name:"Status",type:"string",format:"",description:"Container status",priority:0},{name:"State",type:"string",format:"",description:"Container state",priority:1},{name:"Ports",type:"string",format:"",description:"Published ports",priority:1},{name:"Age",type:"string",format:"",description:"Time since created",priority:1}],n=t.map(s=>({cells:[tl(s.Names??[]),s.Image??"",s.Status??"",s.State??"",Mse(s.Ports??[]),S8(s.Created??0)],object:s}));return{columnDefinitions:e,rows:n}}function _T(t){const e=[{name:"Repository",type:"string",format:"",description:"Image repository",priority:0},{name:"Tag",type:"string",format:"",description:"Image tag",priority:0},{name:"Image ID",type:"string",format:"",description:"Image identifier",priority:0},{name:"Size",type:"string",format:"",description:"Image size",priority:1},{name:"Age",type:"string",format:"",description:"Time since created",priority:1}],n=t.map(s=>{const r=s.RepoTags?.[0]||"<none>:<none>",{repository:i,tag:o}=Ose(r);return{cells:[i||"<none>",o||"<none>",s.Id?.replace("sha256:","").substring(0,12)??"<none>",v0(s.Size),S8(s.Created??0)],object:s}});return{columnDefinitions:e,rows:n}}function wT(t){const e=[{name:"Name",type:"string",format:"",description:"Volume name",priority:0},{name:"Driver",type:"string",format:"",description:"Volume driver",priority:0},{name:"Scope",type:"string",format:"",description:"Volume scope",priority:1},{name:"Mountpoint",type:"string",format:"",description:"Mount location",priority:2}],n=t.map(s=>({cells:[s.Name??"",s.Driver??"local",s.Scope??"local",s.Mountpoint??""],object:s}));return{columnDefinitions:e,rows:n}}function ST(t){const e=[{name:"Name",type:"string",format:"",description:"Network name",priority:0},{name:"Driver",type:"string",format:"",description:"Network driver",priority:0},{name:"Scope",type:"string",format:"",description:"Network scope",priority:1},{name:"ID",type:"string",format:"",description:"Network identifier",priority:2}],n=t.map(s=>({cells:[s.Name??"",s.Driver??"bridge",s.Scope??"local",s.Id?.substring(0,12)??""],object:s}));return{columnDefinitions:e,rows:n}}const Bse=[{name:"list_containers",description:"List all Docker containers (running and stopped)",parameters:{type:"object",properties:{all:{type:"string",description:"Whether to include stopped containers (default: true)"}},required:[]}},{name:"list_images",description:"List all Docker images on the system",parameters:{type:"object",properties:{},required:[]}},{name:"inspect_container",description:"Get detailed information about a specific container",parameters:{type:"object",properties:{container:{type:"string",description:"The container name or ID"}},required:["container"]}},{name:"get_container_logs",description:"Get logs from a specific container",parameters:{type:"object",properties:{container:{type:"string",description:"The container name or ID"},tail:{type:"string",description:"Number of lines to return from the end of the logs (default: 100)"}},required:["container"]}}];async function Dse(t,e){switch(t){case"list_containers":{const n=e.all!=="false";return{containers:(await Wd(n)).map(r=>({id:r.Id?.substring(0,12),name:tl(r.Names??[]),image:r.Image,state:r.State,status:r.Status,ports:r.Ports?.filter(i=>i.PublicPort).map(i=>`${i.PublicPort}:${i.PrivatePort}/${i.Type}`)}))}}case"list_images":return{images:(await Lk()).map(s=>{const r=s.RepoTags?.[0]||"<none>:<none>",[i,o]=r.split(":");return{id:s.Id.replace("sha256:","").substring(0,12),repository:i,tag:o,size:Lse(s.Size),created:new Date(s.Created*1e3).toISOString()}})};case"inspect_container":try{const s=(await Wd(!0)).find(i=>i.Id?.startsWith(e.container)||tl(i.Names??[]).toLowerCase()===e.container.toLowerCase());if(!s?.Id)return{error:`Container not found: ${e.container}`};const r=await xS(s.Id);return{id:r.Id?.substring(0,12),name:r.Name?.replace(/^\//,""),image:r.Config?.Image,state:{status:r.State?.Status,running:r.State?.Running,startedAt:r.State?.StartedAt,finishedAt:r.State?.FinishedAt,exitCode:r.State?.ExitCode},config:{env:r.Config?.Env,cmd:r.Config?.Cmd,workingDir:r.Config?.WorkingDir,exposedPorts:r.Config?.ExposedPorts?Object.keys(r.Config.ExposedPorts):[]},hostConfig:{portBindings:r.HostConfig?.PortBindings,binds:r.HostConfig?.Binds,networkMode:r.HostConfig?.NetworkMode,restartPolicy:r.HostConfig?.RestartPolicy},networkSettings:{ipAddress:r.NetworkSettings?.IPAddress,networks:r.NetworkSettings?.Networks?Object.keys(r.NetworkSettings.Networks):[]},mounts:r.Mounts?.map(i=>({type:i.Type,source:i.Source,destination:i.Destination,mode:i.Mode}))}}catch(n){return{error:`Failed to inspect container: ${n}`}}case"get_container_logs":try{const s=(await Wd(!0)).find(o=>o.Id?.startsWith(e.container)||tl(o.Names??[]).toLowerCase()===e.container.toLowerCase());if(!s?.Id)return{error:`Container not found: ${e.container}`};const r=parseInt(e.tail||"100",10);return{logs:await Tse(s.Id,{tail:r})||"(no logs available)"}}catch(n){return{error:`Failed to get logs: ${n}`}}default:return{error:`Unknown tool: ${t}`}}}function Lse(t){return t<1024?`${t} B`:t<1024*1024?`${(t/1024).toFixed(1)} KB`:t<1024*1024*1024?`${(t/(1024*1024)).toFixed(1)} MB`:`${(t/(1024*1024*1024)).toFixed(2)} GB`}function Ise(){return{id:"docker",name:"Docker Assistant",placeholder:"Ask about your containers and images...",tools:Bse,async executeTool(t){const e=JSON.parse(t.arguments),n=await Dse(t.name,e);return{id:t.id,data:n}},buildInstructions(t){const e=t;let n="";const s=[];return e.selectedResourceType&&s.push(`- Currently viewing: ${e.selectedResourceType}`),e.selectedContainerName&&s.push(`- Currently selected container: ${e.selectedContainerName}`),s.length>0&&(n=`

The user is currently viewing:
${s.join(`
`)}

Use this context to provide more relevant answers.`),`You are a helpful Docker assistant. You can help users understand and manage their Docker containers and images.
When users ask about containers or images, use the available tools to fetch real data from the Docker daemon.
Provide clear, concise explanations and highlight any issues or warnings you find.
Format your responses using markdown for better readability.${n}`}}}function Pse(t){switch(t?.toLowerCase()){case"running":return"running";case"paused":return"paused";case"exited":return"exited";case"created":return"created";case"dead":return"dead";case"removing":return"removing";case"restarting":return"restarting";default:return}}function $se(t){switch(t?.toLowerCase()){case"running":return"success";case"paused":return"warning";case"restarting":return"warning";case"exited":case"dead":return"error";default:return"neutral"}}const zse={types:["container"],adapt(t){const e=[],n=t.State,s=t.Config,r=t.NetworkSettings,i=[{label:"Status",value:n?.Status??"Unknown",status:$se(n?.Status),icon:n?.Running?F.createElement(Uc,{size:14}):n?.Paused?F.createElement(Yd,{size:14}):F.createElement(GA,{size:14})}];n?.Running&&i.push({label:"PID",value:n.Pid??0,status:"neutral"}),n?.ExitCode!==void 0&&n.ExitCode!==0&&i.push({label:"Exit Code",value:n.ExitCode,status:"error"}),e.push({id:"status",data:{type:"status-cards",items:i}});const o=[{label:"ID",value:t.Id?.substring(0,12)},{label:"Name",value:t.Name?.replace(/^\//,"")},{label:"Image",value:s?.Image},{label:"Created",value:t.Created?new Date(t.Created).toLocaleString():void 0},{label:"Platform",value:t.Platform},{label:"Driver",value:t.Driver}];n?.StartedAt&&n.StartedAt!=="0001-01-01T00:00:00Z"&&o.push({label:"Started",value:new Date(n.StartedAt).toLocaleString()}),n?.FinishedAt&&n.FinishedAt!=="0001-01-01T00:00:00Z"&&o.push({label:"Finished",value:new Date(n.FinishedAt).toLocaleString()}),e.push({id:"info",title:"Container",data:{type:"info-grid",items:o,columns:2}});const c=[{name:t.Name?.replace(/^\//,"")??"container",image:s?.Image??"",state:Pse(n?.Status),stateReason:n?.Error||void 0,command:s?.Cmd??void 0,args:void 0,ports:Object.entries(s?.ExposedPorts??{}).map(([d])=>{const[h,g]=d.split("/");return{containerPort:parseInt(h,10),protocol:g?.toUpperCase()}}),mounts:t.Mounts?.map(d=>({name:d.Name??d.Type??"mount",mountPath:d.Destination??"",readOnly:!d.RW}))}];if(e.push({id:"containers",title:"Configuration",data:{type:"containers",items:c}}),r?.Networks&&Object.keys(r.Networks).length>0){const d=[],h=[];for(const[g,m]of Object.entries(r.Networks))m.IPAddress&&d.push({type:`${g} IP`,address:m.IPAddress}),m.Gateway&&d.push({type:`${g} Gateway`,address:m.Gateway}),m.MacAddress&&h.push({label:`${g} MAC`,value:m.MacAddress});d.length>0&&e.push({id:"network-addresses",title:"Network",data:{type:"addresses",addresses:d}}),h.length>0&&e.push({id:"network-info",data:{type:"info-grid",items:h,columns:2}})}if(r?.Ports&&Object.keys(r.Ports).length>0){const d=[];for(const[h,g]of Object.entries(r.Ports))if(g&&g.length>0)for(const m of g)d.push({label:h,value:`${m.HostIp||"0.0.0.0"}:${m.HostPort}`});else d.push({label:h,value:"not published"});e.push({id:"ports",title:"Ports",data:{type:"info-grid",items:d,columns:2}})}if(t.Mounts&&t.Mounts.length>0){const d=t.Mounts.map(h=>({name:h.Name??h.Source??"volume",type:h.Type??"unknown",source:h.Source??"",extra:h.Driver?{Driver:h.Driver}:void 0,mounts:[{container:t.Name?.replace(/^\//,"")??"container",mountPath:h.Destination??"",readOnly:!h.RW}]}));e.push({id:"volumes",title:"Mounts",data:{type:"volumes",items:d}})}if(s?.Env&&s.Env.length>0){const d={};for(const h of s.Env){const[g,...m]=h.split("=");d[g]=m.join("=")}e.push({id:"env",data:{type:"labels",labels:d,title:"Environment Variables"}})}return s?.Labels&&Object.keys(s.Labels).length>0&&e.push({id:"labels",data:{type:"labels",labels:s.Labels}}),{sections:e}},actions:[{id:"start",label:"Start",icon:F.createElement(Uc,{size:14}),variant:"primary",execute:async(t,e)=>{await kse(e.Id)},isVisible:t=>!t.State?.Running},{id:"stop",label:"Stop",icon:F.createElement(GA,{size:14}),variant:"warning",execute:async(t,e)=>{await Cse(e.Id)},isVisible:t=>t.State?.Running===!0},{id:"restart",label:"Restart",icon:F.createElement(En,{size:14}),variant:"secondary",execute:async(t,e)=>{await Nse(e.Id)},isVisible:t=>t.State?.Running===!0},{id:"pause",label:"Pause",icon:F.createElement(Yd,{size:14}),variant:"secondary",execute:async(t,e)=>{await Ase(e.Id)},isVisible:t=>{const e=t;return e.State?.Running===!0&&!e.State?.Paused}},{id:"unpause",label:"Unpause",icon:F.createElement(Uc,{size:14}),variant:"secondary",execute:async(t,e)=>{await Ese(e.Id)},isVisible:t=>t.State?.Paused===!0},{id:"delete",label:"Delete",icon:F.createElement(kf,{size:14}),variant:"danger",confirm:{title:"Delete Container",message:"Are you sure you want to delete this container? This action cannot be undone.",confirmLabel:"Delete"},execute:async(t,e)=>{await jse(e.Id)},isVisible:t=>!t.State?.Running}]};function Hse(t){return t?new Date(t*1e3).toLocaleString():"Unknown"}function kT(t){if(!t||t==="<none>:<none>")return{repository:"<none>",tag:"<none>"};if(t.includes("@")){const[r,i]=t.split("@");return{repository:r,tag:i}}const e=t.lastIndexOf("/"),s=(e>=0?t.substring(e+1):t).lastIndexOf(":");if(s>=0){const r=e>=0?e+1+s:s;return{repository:t.substring(0,r),tag:t.substring(r+1)}}return{repository:t,tag:"latest"}}const Use={types:["image"],adapt(t){const e=[],n=t.RepoTags??[],s=t.RepoDigests??[],r=n[0]||"<none>:<none>",{repository:i,tag:o}=kT(r),c=[{label:"Size",value:v0(t.Size),status:"neutral",icon:F.createElement(Dr,{size:14})}];n.length>0&&c.push({label:"Tags",value:n.length,status:"neutral",icon:F.createElement(VT,{size:14})}),t.Containers!==void 0&&t.Containers>=0&&c.push({label:"Containers",value:t.Containers,status:t.Containers>0?"success":"neutral"}),e.push({id:"status",data:{type:"status-cards",items:c}});const d=[{label:"Repository",value:i!=="<none>"?i:void 0},{label:"Tag",value:o!=="<none>"?o:void 0},{label:"Image ID",value:t.Id?.replace("sha256:","").substring(0,12)},{label:"Full ID",value:t.Id?.replace("sha256:","")},{label:"Size",value:v0(t.Size)},{label:"Virtual Size",value:t.VirtualSize?v0(t.VirtualSize):void 0},{label:"Created",value:Hse(t.Created)}];if(t.ParentId&&d.push({label:"Parent",value:t.ParentId.replace("sha256:","").substring(0,12)}),e.push({id:"info",title:"Information",data:{type:"info-grid",items:d.filter(g=>g.value)}}),n.length>1){const g=n.map(m=>{const b=kT(m);return{label:b.repository,value:b.tag}});e.push({id:"tags",title:"Tags",data:{type:"info-grid",items:g}})}if(s.length>0){const g=s.map(m=>{const[b,y]=m.split("@");return{label:b,value:y?.substring(7,19)+"..."}});e.push({id:"digests",title:"Digests",data:{type:"info-grid",items:g}})}const h=t.Labels;return h&&Object.keys(h).length>0&&e.push({id:"labels",data:{type:"labels",labels:h}}),{sections:e}},actions:[{id:"delete",label:"Delete",icon:F.createElement(kf,{size:14}),variant:"danger",confirm:{title:"Delete Image",message:"Are you sure you want to delete this image? This action cannot be undone.",confirmLabel:"Delete"},execute:async(t,e)=>{await vse(e.Id)},isDisabled:t=>{const e=t;return e.Containers&&e.Containers>0?"Image is used by containers":!1}}]};function Vse(t){if(t==null||t<0)return"Unknown";if(t===0)return"0 B";const e=["B","KB","MB","GB","TB"],n=Math.floor(Math.log(t)/Math.log(1024));return`${(t/Math.pow(1024,n)).toFixed(n>0?1:0)} ${e[n]}`}const Fse={types:["volume"],adapt(t){const e=[],n=[{label:"Driver",value:t.Driver??"local",status:"neutral",icon:F.createElement(ms,{size:14})}];t.UsageData?.Size!==void 0&&t.UsageData.Size>=0&&n.push({label:"Size",value:Vse(t.UsageData.Size),status:"neutral"}),t.UsageData?.RefCount!==void 0&&t.UsageData.RefCount>=0&&n.push({label:"Containers",value:t.UsageData.RefCount,status:t.UsageData.RefCount>0?"success":"neutral"}),e.push({id:"status",data:{type:"status-cards",items:n}});const s=[{label:"Name",value:t.Name},{label:"Driver",value:t.Driver},{label:"Scope",value:t.Scope},{label:"Mountpoint",value:t.Mountpoint}];t.CreatedAt&&s.push({label:"Created",value:new Date(t.CreatedAt).toLocaleString()}),e.push({id:"info",title:"Information",data:{type:"info-grid",items:s.filter(o=>o.value)}});const r=t.Labels;r&&Object.keys(r).length>0&&e.push({id:"labels",data:{type:"labels",labels:r}});const i=t.Options;if(i&&Object.keys(i).length>0){const o=Object.entries(i).map(([c,d])=>({label:c,value:d}));e.push({id:"options",title:"Driver Options",data:{type:"info-grid",items:o}})}return{sections:e}},actions:[{id:"delete",label:"Delete",icon:F.createElement(kf,{size:14}),variant:"danger",confirm:{title:"Delete Volume",message:"Are you sure you want to delete this volume? This action cannot be undone and all data will be lost.",confirmLabel:"Delete"},execute:async(t,e)=>{await _se(e.Name)},isDisabled:t=>{const e=t;return e.UsageData?.RefCount&&e.UsageData.RefCount>0?"Volume is in use by containers":!1}}]},CT=["bridge","host","none"],qse={types:["network"],adapt(t){const e=[],n=t.IPAM,s=t.Containers,r=[{label:"Driver",value:t.Driver??"bridge",status:"neutral",icon:F.createElement(Ln,{size:14})},{label:"Scope",value:t.Scope??"local",status:"neutral",icon:F.createElement(ur,{size:14})}];t.Internal&&r.push({label:"Internal",value:"Yes",status:"warning",icon:F.createElement(Sf,{size:14})});const i=s?Object.keys(s).length:0;r.push({label:"Containers",value:i,status:i>0?"success":"neutral"}),e.push({id:"status",data:{type:"status-cards",items:r}});const o=[{label:"Name",value:t.Name},{label:"ID",value:t.Id?.substring(0,12)},{label:"Driver",value:t.Driver},{label:"Scope",value:t.Scope}];if(t.Created&&o.push({label:"Created",value:new Date(t.Created).toLocaleString()}),t.EnableIPv6&&o.push({label:"IPv6",value:"Enabled"}),t.Internal&&o.push({label:"Internal",value:"Yes"}),t.Attachable&&o.push({label:"Attachable",value:"Yes"}),t.Ingress&&o.push({label:"Ingress",value:"Yes"}),e.push({id:"info",title:"Information",data:{type:"info-grid",items:o.filter(d=>d.value)}}),n?.Config&&n.Config.length>0){const d=[];d.push({label:"Driver",value:n.Driver??"default"}),n.Config.forEach((h,g)=>{const m=n.Config.length>1?`[${g+1}] `:"";h.Subnet&&d.push({label:`${m}Subnet`,value:h.Subnet}),h.Gateway&&d.push({label:`${m}Gateway`,value:h.Gateway}),h.IPRange&&d.push({label:`${m}IP Range`,value:h.IPRange})}),e.push({id:"ipam",title:"IPAM Configuration",data:{type:"info-grid",items:d}})}if(s&&Object.keys(s).length>0){const d=Object.entries(s).map(([h,g])=>({label:g.Name||h.substring(0,12),value:g.IPv4Address||g.IPv6Address||"No IP"}));e.push({id:"containers",title:"Connected Containers",data:{type:"info-grid",items:d}})}const c=t.Labels;return c&&Object.keys(c).length>0&&e.push({id:"labels",data:{type:"labels",labels:c}}),{sections:e}},actions:[{id:"delete",label:"Delete",icon:F.createElement(kf,{size:14}),variant:"danger",confirm:{title:"Delete Network",message:"Are you sure you want to delete this network? This action cannot be undone.",confirmLabel:"Delete"},execute:async(t,e)=>{await Sse(e.Id)},isDisabled:t=>{const e=t;return e.Name&&CT.includes(e.Name)?"Cannot delete built-in network":e.Containers&&Object.keys(e.Containers).length>0?"Network has connected containers":!1},isVisible:t=>{const e=t;return!e.Name||!CT.includes(e.Name)}}]};function qh(t){return t.toLowerCase().replace(/[-_.]/g,"")}const NT=[{kind:"containers",label:"Containers",icon:Qr,category:"Docker"},{kind:"images",label:"Images",icon:Dr,category:"Docker"}];function Kse(t){const{onSelectResource:e,onClose:n}=t;return{id:"docker",resourceTypes:NT,supportsNamespaces:!1,searchModePrefixes:[{prefix:">",mode:"resources"}],getAvailableResourceTypes(){return NT},getNamespaces(){return[]},resourceTypeToSearchResult(r){return{id:`type-${r.kind}`,type:"resource-type",label:r.label,sublabel:r.category,icon:r.icon,category:r.category,data:{dockerResourceType:r.kind}}},async searchResources(r){if(!r||r.length<2)return[];const i=[],o=qh(r);try{const[c,d]=await Promise.all([Wd(!0),Lk()]);for(const h of c){const m=(h.Names||[])[0]?.replace(/^\//,"")||h.Id?.substring(0,12)||"";qh(m).includes(o)&&i.push({id:`container/${h.Id}`,type:"resource",label:m,sublabel:`Container  ${h.State||"unknown"}`,icon:Qr,category:"Docker",data:{dockerResourceType:"containers",resourceId:h.Id,resourceName:m}})}for(const h of d){const m=(h.RepoTags||[])[0]||h.Id?.substring(7,19)||"";qh(m).includes(o)&&i.push({id:`image/${h.Id}`,type:"resource",label:m,sublabel:"Image",icon:Dr,category:"Docker",data:{dockerResourceType:"images",resourceId:h.Id,resourceName:m}})}}catch{}return i.sort((c,d)=>{const h=qh(c.label)===o,g=qh(d.label)===o;return h&&!g?-1:!h&&g?1:c.label.localeCompare(d.label)}),i.slice(0,50)},handleSelect(r){if(r.type==="resource-type"||r.type==="resource"){const i=r.data.dockerResourceType;i&&e(i)}n()},getPlaceholder(r){return r==="resources"?"Search resource types...":"Search containers and images... (> types)"},getHelpItems(){return[{prefix:">",label:"Resource types"}]},getCurrentScopeLabel(){return null}}}const Wse=[zse,Use,Fse,qse],Ik=new Map;Wse.forEach(t=>{t.types.forEach(e=>{Ik.set(e.toLowerCase(),t)})});function k8(t){return Ik.get(t.toLowerCase())??null}function Gse(t){return Ik.has(t.toLowerCase())}function Yse(t,e){const n=k8(e);return n?n.adapt(t):null}function C8(t,e="container"){const n=k8(e);return n?.actions?n.actions.filter(s=>!s.isVisible||s.isVisible(t)):[]}function Xse(t){return"Config"in t&&"State"in t?"container":"RepoTags"in t||"RepoDigests"in t?"image":"Mountpoint"in t&&"Driver"in t&&!("IPAM"in t)?"volume":"IPAM"in t?"network":"container"}function Jse(t){const e=Me.c(12),{resource:n,onActionComplete:s,hideActions:r}=t,i=r===void 0?!1:r;let o,c,d,h;if(e[0]!==i||e[1]!==s||e[2]!==n){h=Symbol.for("react.early_return_sentinel");e:{const m=Xse(n),b=Yse(n,m),y=C8(n,m);if(!b||b.sections.length===0){let w;e[7]===Symbol.for("react.memo_cache_sentinel")?(w=f.jsx("div",{className:"text-neutral-500 text-sm",children:"No visualization available"}),e[7]=w):w=e[7],h=w;break e}o="space-y-4",c=!i&&y.length>0&&f.jsx(BB,{actions:y,resource:n,onActionComplete:s}),d=b.sections.map(Qse)}e[0]=i,e[1]=s,e[2]=n,e[3]=o,e[4]=c,e[5]=d,e[6]=h}else o=e[3],c=e[4],d=e[5],h=e[6];if(h!==Symbol.for("react.early_return_sentinel"))return h;let g;return e[8]!==o||e[9]!==c||e[10]!==d?(g=f.jsxs("div",{className:o,children:[c,d]}),e[8]=o,e[9]=c,e[10]=d,e[11]=g):g=e[11],g}function Qse(t){return f.jsx(DB,{section:t},t.id)}const Zse=1e3;function AT(t){return t.replace(/\x1b\[[0-9;]*[a-zA-Z]/g,"")}function ere(t){const e=t.replace(/\r/g,""),n=e.match(/^(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?Z)\s*(.*)$/);if(n){const[,s,r]=n;return{timestamp:s,message:AT(r)}}return{message:AT(e)}}function tre(t){const e=Me.c(20),{container:n,tailLines:s}=t,r=s===void 0?Zse:s;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=[],e[0]=i):i=e[0];const[o,c]=F.useState(i),[d,h]=F.useState(null),g=F.useRef(null),m=n.Id;let b;e[1]!==n.Names?(b=n.Names??[],e[1]=n.Names,e[2]=b):b=e[2];let y;e[3]!==b?(y=tl(b),e[3]=b,e[4]=y):y=e[4];const w=y,x=n.State==="running";let S,k;e[5]!==m||e[6]!==w||e[7]!==x||e[8]!==r?(S=()=>{if(!x||!m)return;const E=new AbortController;return g.current=E,Rse(m,{follow:!0,stdout:!0,stderr:!0,timestamps:!0,tail:r},z=>{const U=ere(z),Y={timestamp:U.timestamp,message:U.message,source:w};c(D=>[...D,Y])},E.signal).catch(z=>{z.name!=="AbortError"&&h(z.message)}),()=>{E.abort()}},k=[m,w,x,r],e[5]=m,e[6]=w,e[7]=x,e[8]=r,e[9]=S,e[10]=k):(S=e[9],k=e[10]),F.useEffect(S,k);const C=x,N=x?void 0:"Container is not running. Start the container to view logs.";let R;e[11]!==w||e[12]!==C?(R=C?[w]:[],e[11]=w,e[12]=C,e[13]=R):R=e[13];let B;return e[14]!==d||e[15]!==C||e[16]!==o||e[17]!==R||e[18]!==N?(B={logs:o,sources:R,isLoading:!1,error:d,isAvailable:C,unavailableMessage:N},e[14]=d,e[15]=C,e[16]=o,e[17]=R,e[18]=N,e[19]=B):B=e[19],B}function nre(t){const e=Me.c(9),{container:n,toolbarRef:s}=t;let r;e[0]!==n?(r={container:n},e[0]=n,e[1]=r):r=e[1];const{logs:i,sources:o,isLoading:c,error:d,unavailableMessage:h}=tre(r);let g;return e[2]!==d||e[3]!==c||e[4]!==i||e[5]!==o||e[6]!==s||e[7]!==h?(g=f.jsx(PB,{logs:i,sources:o,isLoading:c,error:d,emptyMessage:"Waiting for logs...",unavailableMessage:h,toolbarRef:s}),e[2]=d,e[3]=c,e[4]=i,e[5]=o,e[6]=s,e[7]=h,e[8]=g):g=e[8],g}function sre(t){const e=Me.c(3),{container:n,toolbarRef:s}=t;let r;return e[0]!==n||e[1]!==s?(r=f.jsx(nre,{container:n,toolbarRef:s},n.Id),e[0]=n,e[1]=s,e[2]=r):r=e[2],r}function rre({isOpen:t,onClose:e,otherPanelOpen:n=!1,resource:s,resourceType:r="containers"}){const[i,o]=F.useState(null),[c,d]=F.useState(!1),[h,g]=F.useState(null),[m,b]=F.useState("overview"),[y,w]=F.useState(null),[x,S]=F.useState(null),k=F.useRef(null),C=5e3,R=F.useCallback(I=>I?r==="containers"||r==="images"?I.Id??"":r==="volumes"?I.Name??"":r==="networks"?I.Id??"":"":"",[r])(s),E=F.useCallback(I=>{if(!I)return"";if(r==="containers")return tl(I.Names??[]);if(r==="images"){const L=I,J=L.RepoTags?.[0];return J||(L.Id?.replace("sha256:","").substring(0,12)??"")}return r==="volumes"||r==="networks"?I.Name??"":""},[r])(s),z=F.useCallback(async()=>{if(R)try{let I;if(r==="containers")I=await xS(R);else{if(r==="images")return;r==="volumes"?I=await bT(R):r==="networks"&&(I=await vT(R))}I&&o(I)}catch{}},[R,r]);F.useEffect(()=>{if(!t||!R||!i||r==="images")return;const I=setInterval(()=>{z()},C);return()=>clearInterval(I)},[t,R,i,z,r]),F.useEffect(()=>{if(b("overview"),!R){o(null),g(null);return}if(r==="images"){o(s);return}(async()=>{d(!0),g(null);try{let L;r==="containers"?L=await xS(R):r==="volumes"?L=await bT(R):r==="networks"&&(L=await vT(R)),L&&o(L)}catch(L){g(L instanceof Error?L.message:"Failed to fetch resource details")}finally{d(!1)}})()},[R,r,s]);const U=r==="containers"?"container":r==="images"?"image":r==="volumes"?"volume":"network",Y=i?C8(i,U).filter(I=>!(I.isVisible&&!I.isVisible(i))):[],D=async I=>{if(I.confirm){S(I);return}await W(I)},W=async I=>{if(i){w(I.id),S(null);try{await I.execute("",i),await z()}catch(L){console.error("Action failed:",L)}finally{w(null)}}};if(!t)return null;const q=r==="containers"?[{id:"overview",label:"Overview"},{id:"logs",label:"Logs"}]:[{id:"overview",label:"Overview"}],X=Gse(U);return f.jsxs("div",{className:`fixed right-0 top-0 h-full bg-white dark:bg-neutral-900 border-l border-neutral-200 dark:border-neutral-700 shadow-xl z-30 flex flex-col transition-all duration-300 ${n?"w-md":"w-xl"}`,children:[f.jsxs("div",{className:"shrink-0 h-14 flex items-center justify-between px-4 border-b border-neutral-200 dark:border-neutral-800",children:[f.jsx("div",{className:"flex items-center gap-3 min-w-0",children:f.jsxs("div",{className:"min-w-0",children:[f.jsx("h2",{className:"font-semibold text-sm text-neutral-900 dark:text-neutral-100 truncate",children:E||"Resource"}),s&&f.jsx("span",{className:"text-xs text-neutral-400 font-mono mt-0.5",children:R.substring(0,12)})]})}),f.jsx("div",{className:"flex items-center gap-1",children:f.jsx("button",{onClick:e,className:"p-2 rounded-lg text-neutral-500 hover:text-neutral-700 hover:bg-neutral-100 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 transition-colors",title:"Close",children:f.jsx(Og,{size:16})})})]}),f.jsxs("div",{className:"shrink-0 border-b border-neutral-200 dark:border-neutral-800 flex items-center",children:[f.jsx("div",{className:"flex",children:q.filter(I=>I.id!=="overview"||X).map(I=>f.jsx("button",{onClick:()=>b(I.id),className:`px-4 py-2.5 text-sm font-medium transition-colors ${m===I.id?"text-neutral-900 dark:text-neutral-100 border-b-2 border-neutral-900 dark:border-neutral-100":"text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300"}`,children:I.label},I.id))}),f.jsxs("div",{className:"ml-auto pr-4 flex items-center gap-1",children:[f.jsx("div",{ref:k,className:"flex items-center gap-1"}),m==="overview"&&Y.map(I=>{const L=I.isDisabled?.(i),J=L===!0||typeof L=="string",G=typeof L=="string"?L:void 0,P=y===I.id;return f.jsx("button",{onClick:()=>D(I),disabled:J||P,title:G||I.label,className:`
                  flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium rounded transition-colors
                  ${J||P?"opacity-50 cursor-not-allowed":""}
                  ${I.variant==="primary"?"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 hover:bg-neutral-200 dark:hover:bg-neutral-800":I.variant==="warning"?"text-amber-600 dark:text-amber-400 hover:text-amber-700 dark:hover:text-amber-300 hover:bg-neutral-200 dark:hover:bg-neutral-800":I.variant==="danger"?"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 hover:bg-neutral-200 dark:hover:bg-neutral-800":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-200 dark:hover:bg-neutral-800"}
                `,children:P?f.jsx(na,{size:14,className:"animate-spin"}):I.icon},I.id)})]})]}),x&&f.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-lg shadow-xl max-w-md w-full mx-4 p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-neutral-100 mb-2",children:x.confirm?.title}),f.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mb-6",children:x.confirm?.message}),f.jsxs("div",{className:"flex justify-end gap-3",children:[f.jsx("button",{onClick:()=>S(null),className:"px-4 py-2 text-sm font-medium text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 transition-colors",children:"Cancel"}),f.jsx("button",{onClick:()=>W(x),className:`px-4 py-2 text-sm font-medium rounded transition-colors ${x.variant==="danger"?"bg-red-600 hover:bg-red-700 text-white":x.variant==="warning"?"bg-amber-600 hover:bg-amber-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:x.confirm?.confirmLabel||"Confirm"})]})]})}),f.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:c&&!i?f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsx(na,{className:"w-6 h-6 text-neutral-400 animate-spin"})}):h?f.jsx("div",{className:"p-4 text-red-500 text-sm",children:h}):s?f.jsxs(f.Fragment,{children:[m==="overview"&&i&&f.jsx("div",{className:"h-full overflow-auto p-4",children:f.jsx(Jse,{resource:i,onActionComplete:z,hideActions:!0})}),m==="logs"&&r==="containers"&&s&&f.jsx(sre,{container:s,toolbarRef:k})]}):f.jsx("div",{className:"p-4 text-neutral-500 text-sm",children:"No resource selected"})})]})}const Px="ai",ire=5e3;function ET(t,e){switch(e){case"containers":return t.Id??"";case"images":return t.Id??"";case"volumes":return t.Name??"";case"networks":return t.Id??"";default:return""}}function are({resourceType:t}){const[e,n]=F.useState([]),[s,r]=F.useState(!0),[i,o]=F.useState(null),[c,d]=F.useState(!1),h=F.useRef(!0),{isOpen:g,toggle:m,close:b}=OS(),y=g(Px),w=Ise(),x=F.useCallback(async(D=!1)=>{D||r(!0),D&&d(!0);try{let W;switch(t){case"containers":{const q=await Wd(!0);W=xT(q);break}case"images":{const q=await Lk();W=_T(q);break}case"volumes":{const q=await xse();W=wT(q);break}case"networks":{const q=await wse();W=ST(q);break}}const V=[...W.rows].sort((q,X)=>{const I=ET(q.object,t),L=ET(X.object,t);return I.localeCompare(L)});n(V),D||o(null)}catch(W){D||o(W instanceof Error?W:new Error("Failed to fetch Docker data"))}finally{r(!1),d(!1)}},[t]);F.useEffect(()=>{h.current=!0,x(!1)},[x]),F.useEffect(()=>{const D=setInterval(()=>{(!h.current||e.length>0)&&x(!0),h.current=!1},ire);return()=>clearInterval(D)},[x,e.length]);const S=F.useMemo(()=>({name:t,namespaced:!1}),[t]),k=F.useMemo(()=>{switch(t){case"containers":return xT(e.map(D=>D.object));case"images":return _T(e.map(D=>D.object));case"volumes":return wT(e.map(D=>D.object));case"networks":return ST(e.map(D=>D.object))}},[t,e]),N={containers:"Containers",images:"Images",volumes:"Volumes",networks:"Networks"}[t],R=F.useCallback(D=>{const W=D?.object;return{selectedResourceType:t,selectedContainerId:t==="containers"?W?.Id?.substring(0,12):void 0,selectedContainerName:t==="containers"&&W?.Names?tl(W.Names):void 0}},[t]),B=F.useCallback(()=>sl().ai?f.jsx("button",{onClick:()=>m(Px),className:`p-2 rounded-md transition-colors ${y?"text-sky-400 hover:text-sky-300 hover:bg-neutral-100 dark:hover:bg-neutral-800":"text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800"}`,title:"AI Assistant",children:f.jsx(UT,{size:18})}):null,[y,m]),E=F.useCallback((D,W)=>{const V=R(D);return f.jsx(BO,{isOpen:y,onClose:()=>b(Px),otherPanelOpen:W,adapter:w,environment:V})},[y,b,w,R]),z=t==="containers"||t==="images"||t==="volumes"||t==="networks",U=F.useMemo(()=>z?(D,W,V)=>f.jsx(rre,{isOpen:!0,onClose:W,otherPanelOpen:V||y,resource:D.object,resourceType:t}):void 0,[z,t,y]),Y=F.useCallback(()=>{x(!1)},[x]);return f.jsx(XT,{config:S,title:N,data:k,loading:s,error:i,refetch:Y,isRefetching:c,showDetailPanel:z,renderDetailPanel:U,renderHeaderActions:B,renderExtraPanels:E})}const du={Pod:Qr,Deployment:ES,DaemonSet:AS,StatefulSet:fo,Job:Mg,CronJob:ua,Service:IP,Ingress:ur,Gateway:Ln,HTTPRoute:Xd,GRPCRoute:Xd,NetworkPolicy:mu,PersistentVolume:ms,PersistentVolumeClaim:SS,ConfigMap:xi,Secret:_f,Node:Xr},ore={Pod:{bg:"#dcfce7",bgDark:"#14532d",border:"#22c55e",borderDark:"#4ade80",text:"#166534",textDark:"#86efac"},Deployment:{bg:"#dbeafe",bgDark:"#1e3a8a",border:"#3b82f6",borderDark:"#60a5fa",text:"#1e40af",textDark:"#93c5fd"},DaemonSet:{bg:"#f3e8ff",bgDark:"#581c87",border:"#a855f7",borderDark:"#c084fc",text:"#6b21a8",textDark:"#d8b4fe"},StatefulSet:{bg:"#ede9fe",bgDark:"#5b21b6",border:"#8b5cf6",borderDark:"#a78bfa",text:"#5b21b6",textDark:"#c4b5fd"},Job:{bg:"#fef3c7",bgDark:"#78350f",border:"#f59e0b",borderDark:"#fbbf24",text:"#92400e",textDark:"#fcd34d"},CronJob:{bg:"#ffedd5",bgDark:"#7c2d12",border:"#f97316",borderDark:"#fb923c",text:"#9a3412",textDark:"#fdba74"},Service:{bg:"#cffafe",bgDark:"#164e63",border:"#06b6d4",borderDark:"#22d3ee",text:"#155e75",textDark:"#67e8f9"},Ingress:{bg:"#ccfbf1",bgDark:"#134e4a",border:"#14b8a6",borderDark:"#2dd4bf",text:"#115e59",textDark:"#5eead4"},Gateway:{bg:"#d1fae5",bgDark:"#065f46",border:"#10b981",borderDark:"#34d399",text:"#065f46",textDark:"#6ee7b7"},HTTPRoute:{bg:"#a7f3d0",bgDark:"#047857",border:"#34d399",borderDark:"#6ee7b7",text:"#047857",textDark:"#a7f3d0"},GRPCRoute:{bg:"#a7f3d0",bgDark:"#047857",border:"#34d399",borderDark:"#6ee7b7",text:"#047857",textDark:"#a7f3d0"},NetworkPolicy:{bg:"#fef3c7",bgDark:"#78350f",border:"#f59e0b",borderDark:"#fbbf24",text:"#92400e",textDark:"#fcd34d"},PersistentVolume:{bg:"#f1f5f9",bgDark:"#334155",border:"#64748b",borderDark:"#94a3b8",text:"#334155",textDark:"#cbd5e1"},PersistentVolumeClaim:{bg:"#f8fafc",bgDark:"#475569",border:"#94a3b8",borderDark:"#cbd5e1",text:"#475569",textDark:"#e2e8f0"},ConfigMap:{bg:"#fef9c3",bgDark:"#713f12",border:"#eab308",borderDark:"#facc15",text:"#854d0e",textDark:"#fde047"},Secret:{bg:"#fee2e2",bgDark:"#7f1d1d",border:"#ef4444",borderDark:"#f87171",text:"#991b1b",textDark:"#fca5a5"}},lre={bg:"#f3f4f6",bgDark:"#374151",border:"#9ca3af",borderDark:"#6b7280",text:"#374151",textDark:"#d1d5db"};function nl(t,e){const n=ore[t]||lre;return{bg:e?n.bgDark:n.bg,border:e?n.borderDark:n.border,text:e?n.textDark:n.text}}function N8(t){let e="Unknown",n="#9ca3af",s="#6b7280";if(t.kind==="Pod"){const r=t.status?.phase||"Unknown";e=r,r==="Running"?(n="#22c55e",s="#4ade80"):r==="Pending"?(n="#eab308",s="#facc15"):r==="Failed"?(n="#ef4444",s="#f87171"):r==="Succeeded"&&(n="#22c55e",s="#4ade80")}else if(t.kind==="DaemonSet"){const r=t.status?.desiredNumberScheduled||0,i=t.status?.numberReady||0;e=`${i}/${r}`,i===r&&r>0?(n="#22c55e",s="#4ade80"):(n="#eab308",s="#facc15")}else if(["Deployment","StatefulSet"].includes(t.kind)){const r=t.status?.replicas||0,i=t.status?.readyReplicas||0;e=`${i}/${r}`,i===r&&r>0?(n="#22c55e",s="#4ade80"):(n="#eab308",s="#facc15")}else if(t.kind==="Service")e="Active",n="#22c55e",s="#4ade80";else if(t.kind==="Job"){const r=t.status?.succeeded||0,i=t.status?.failed||0;r>0?(e="Succeeded",n="#22c55e",s="#4ade80"):i>0?(e="Failed",n="#ef4444",s="#f87171"):(e="Running",n="#eab308",s="#facc15")}else t.kind==="PersistentVolumeClaim"?(e=t.status?.phase||"Unknown",e==="Bound"?(n="#22c55e",s="#4ade80"):(n="#eab308",s="#facc15")):["ConfigMap","Secret","Ingress","CronJob"].includes(t.kind)&&(e="Active",n="#22c55e",s="#4ade80");return{status:e,color:n,colorDark:s}}const Kh=160,$x=60,jT=48,Ag=120,Xo=32,x0=6,_S=32,Hc=8,Qi=20,no=4,Gd=5,cre=32,ure=10,Ya=12,TT=36,Gm=20;function hre(){const{context:t,namespace:e}=ei(),[n,s]=F.useState([]),[r,i]=F.useState([]),[o,c]=F.useState(!0),[d,h]=F.useState(null),[g,m]=F.useState({x:40,y:40,scale:1}),[b,y]=F.useState(!1),[w,x]=F.useState({x:0,y:0}),[S,k]=F.useState(null),[C,N]=F.useState(!1),R=F.useRef(null);F.useEffect(()=>{const G=()=>{const K=document.documentElement.classList.contains("dark"),j=window.matchMedia("(prefers-color-scheme: dark)");N(K||j.matches)};G();const P=new MutationObserver(G);P.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]});const T=window.matchMedia("(prefers-color-scheme: dark)"),O=()=>G();return T.addEventListener("change",O),()=>{P.disconnect(),T.removeEventListener("change",O)}},[]);const B=F.useCallback(async()=>{c(!0),h(null);try{const G=e?`/namespaces/${e}`:"",P=[{path:`/api/v1${G}/pods`,kind:"Pod"},{path:`/apis/apps/v1${G}/deployments`,kind:"Deployment"},{path:`/apis/apps/v1${G}/replicasets`,kind:"ReplicaSet"},{path:`/apis/apps/v1${G}/statefulsets`,kind:"StatefulSet"},{path:`/apis/apps/v1${G}/daemonsets`,kind:"DaemonSet"},{path:`/api/v1${G}/services`,kind:"Service"},{path:`/api/v1${G}/configmaps`,kind:"ConfigMap"},{path:`/api/v1${G}/secrets`,kind:"Secret"},{path:`/api/v1${G}/persistentvolumeclaims`,kind:"PersistentVolumeClaim"},{path:`/apis/batch/v1${G}/jobs`,kind:"Job"},{path:`/apis/batch/v1${G}/cronjobs`,kind:"CronJob"},{path:`/apis/networking.k8s.io/v1${G}/ingresses`,kind:"Ingress"},{path:`/apis/networking.k8s.io/v1${G}/networkpolicies`,kind:"NetworkPolicy"},{path:`/apis/gateway.networking.k8s.io/v1${G}/gateways`,kind:"Gateway"},{path:`/apis/gateway.networking.k8s.io/v1${G}/httproutes`,kind:"HTTPRoute"},{path:`/apis/gateway.networking.k8s.io/v1${G}/grpcroutes`,kind:"GRPCRoute"}],T=await Promise.allSettled(P.map(async({path:j,kind:Z})=>{try{return((await ha(j,t)).items||[]).map(te=>({...te,kind:Z}))}catch{return[]}})),O=[];T.forEach(j=>{j.status==="fulfilled"&&O.push(...j.value)}),i(O);const K=wre(O);s(K)}catch(G){h(G instanceof Error?G.message:"Failed to load resources")}finally{c(!1)}},[t,e]);F.useEffect(()=>{B()},[B]);const E=F.useCallback(G=>{G.button===0&&(y(!0),x({x:G.clientX-g.x,y:G.clientY-g.y}))},[g.x,g.y]),z=F.useCallback(G=>{b&&m(P=>({...P,x:G.clientX-w.x,y:G.clientY-w.y}))},[b,w]),U=F.useCallback(()=>{y(!1)},[]),Y=F.useCallback(G=>{G.preventDefault();const P=G.deltaY>0?.9:1.1,T=Math.min(Math.max(g.scale*P,.1),3),O=R.current?.getBoundingClientRect();if(O){const K=G.clientX-O.left,j=G.clientY-O.top,Z=K-(K-g.x)*(T/g.scale),le=j-(j-g.y)*(T/g.scale);m({x:Z,y:le,scale:T})}},[g]),D=()=>m(G=>({...G,scale:Math.min(G.scale*1.2,3)})),W=()=>m(G=>({...G,scale:Math.max(G.scale/1.2,.1)})),V=()=>{if(!R.current||n.length===0)return;const G=R.current.getBoundingClientRect(),P=Math.max(...n.map(Z=>Z.x+Z.width),800),T=Math.max(...n.map(Z=>Z.y+Z.height),600),O=(G.width-80)/P,K=(G.height-80)/T,j=Math.min(O,K,1);m({x:40,y:40,scale:j})},q=F.useMemo(()=>{if(n.length===0)return{width:800,height:600};const G=Math.max(...n.map(T=>T.x+T.width)),P=Math.max(...n.map(T=>T.y+T.height));return{width:G+100,height:P+100}},[n]);F.useEffect(()=>{if(n.length>0&&R.current){const G=R.current.getBoundingClientRect(),P=(G.width-80)/q.width,T=(G.height-80)/q.height,O=Math.min(P,T,1);m({x:40,y:40,scale:O})}},[n,q]),F.useEffect(()=>{k(null)},[e]);const X=F.useCallback(G=>{k(G)},[]),I=F.useCallback((G,P,T)=>{const O=r.find(K=>K.kind===G&&K.metadata.name===P&&K.metadata.namespace===T);O&&k({uid:O.metadata.uid,resource:O,x:0,y:0,width:0,height:0})},[r]),L=S?{name:S.resource.metadata.name,namespace:S.resource.metadata.namespace,uid:S.resource.metadata.uid,kind:S.resource.kind,apiVersion:S.resource.apiVersion}:null,J=S!==null;return o?f.jsx("div",{className:"flex items-center justify-center h-full bg-white dark:bg-neutral-950",children:f.jsxs("div",{className:"flex items-center gap-2 text-neutral-500",children:[f.jsx(En,{className:"animate-spin",size:20}),f.jsx("span",{children:"Loading resources..."})]})}):d?f.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4 bg-white dark:bg-neutral-950",children:[f.jsx("div",{className:"text-red-500",children:d}),f.jsxs("button",{onClick:B,className:"flex items-center gap-2 px-4 py-2 text-sm bg-neutral-100 hover:bg-neutral-200 dark:bg-neutral-800 dark:hover:bg-neutral-700 rounded-md transition-colors",children:[f.jsx(En,{size:16}),"Retry"]})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:`h-full w-full relative bg-neutral-100 dark:bg-neutral-900 overflow-hidden transition-all duration-300 ${J?"mr-120":""}`,children:[f.jsxs("div",{className:"absolute top-4 right-4 z-10 flex items-center gap-1 bg-white dark:bg-neutral-800 rounded-lg shadow-sm border border-neutral-200 dark:border-neutral-700",children:[f.jsx("button",{onClick:B,className:"p-2 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-l-lg",title:"Refresh",children:f.jsx(En,{size:16,className:"text-neutral-600 dark:text-neutral-400"})}),f.jsx("div",{className:"w-px h-5 bg-neutral-200 dark:bg-neutral-700"}),f.jsx("button",{onClick:D,className:"p-2 hover:bg-neutral-100 dark:hover:bg-neutral-700",title:"Zoom In",children:f.jsx(JP,{size:16,className:"text-neutral-600 dark:text-neutral-400"})}),f.jsx("button",{onClick:W,className:"p-2 hover:bg-neutral-100 dark:hover:bg-neutral-700",title:"Zoom Out",children:f.jsx(ZP,{size:16,className:"text-neutral-600 dark:text-neutral-400"})}),f.jsx("button",{onClick:V,className:"p-2 hover:bg-neutral-100 dark:hover:bg-neutral-700",title:"Fit View",children:f.jsx(hP,{size:16,className:"text-neutral-600 dark:text-neutral-400"})}),f.jsxs("div",{className:"px-2 text-xs text-neutral-500 border-l border-neutral-200 dark:border-neutral-700 rounded-r-lg",children:[Math.round(g.scale*100),"%"]})]}),f.jsxs("div",{className:"absolute bottom-4 right-4 z-10 px-3 py-2 bg-white dark:bg-neutral-800 rounded-lg shadow-sm border border-neutral-200 dark:border-neutral-700",children:[f.jsx("div",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-400 mb-2",children:"Connections"}),f.jsxs("div",{className:"flex flex-col gap-1 text-xs",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{width:"24",height:"8",children:f.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#64748b",strokeWidth:"2"})}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Owner"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{width:"24",height:"8",children:f.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#8b5cf6",strokeWidth:"2",strokeDasharray:"4,2"})}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Selector"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{width:"24",height:"8",children:f.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#06b6d4",strokeWidth:"2",strokeDasharray:"4,2"})}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Service"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{width:"24",height:"8",children:f.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#14b8a6",strokeWidth:"2",strokeDasharray:"4,2"})}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Ingress"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{width:"24",height:"8",children:f.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#10b981",strokeWidth:"2",strokeDasharray:"4,2"})}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Gateway"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{width:"24",height:"8",children:f.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#f59e0b",strokeWidth:"1.5",strokeDasharray:"2,2"})}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"NetworkPolicy"})]})]})]}),f.jsx("div",{ref:R,className:"w-full h-full cursor-grab active:cursor-grabbing overflow-hidden",onMouseDown:E,onMouseMove:z,onMouseUp:U,onMouseLeave:U,onWheel:Y,children:f.jsxs("svg",{width:q.width,height:q.height,style:{transform:`translate(${g.x}px, ${g.y}px) scale(${g.scale})`,transformOrigin:"0 0"},children:[f.jsxs("defs",{children:[f.jsx("marker",{id:"arrow-owner",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#64748b"})}),f.jsx("marker",{id:"arrow-selector",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#8b5cf6"})}),f.jsx("marker",{id:"arrow-service",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#06b6d4"})}),f.jsx("marker",{id:"arrow-ingress",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#14b8a6"})}),f.jsx("marker",{id:"arrow-gateway",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#10b981"})}),f.jsx("marker",{id:"arrow-network-policy",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"5",markerHeight:"5",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#f59e0b"})}),f.jsx("marker",{id:"arrow-owner-dark",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#94a3b8"})}),f.jsx("marker",{id:"arrow-selector-dark",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#c084fc"})}),f.jsx("marker",{id:"arrow-service-dark",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#22d3ee"})}),f.jsx("marker",{id:"arrow-ingress-dark",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#2dd4bf"})}),f.jsx("marker",{id:"arrow-gateway-dark",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#34d399"})}),f.jsx("marker",{id:"arrow-network-policy-dark",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"5",markerHeight:"5",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#fbbf24"})})]}),n.map(G=>f.jsx(dre,{application:G,onNodeClick:X,onConfigClick:I,isDarkMode:C},G.id))]})})]}),f.jsx(_8,{isOpen:J,onClose:()=>k(null),resource:L})]})}function dre(t){const e=Me.c(40),{application:n,onNodeClick:s,onConfigClick:r,isDarkMode:i}=t;let o;e[0]!==n.nodes?(o=new Map(n.nodes.map(fre)),n.nodes.forEach(C=>{C.childPods&&C.childPods.forEach(N=>{o.set(N.uid,{...N,x:C.x+N.x,y:C.y+N.y})})}),e[0]=n.nodes,e[1]=o):o=e[1];const c=o;let d;e[2]!==n.nodes?(d=n.nodes.filter(C=>!C.resource.kind.match(/^Pod$/)||!n.nodes.some(N=>["Deployment","StatefulSet","DaemonSet","Job"].includes(N.resource.kind)&&N.childPods?.some(R=>R.uid===C.uid))),e[2]=n.nodes,e[3]=d):d=e[3];const h=d,g=n.name&&n.name.length>0,m=i?"#262626":"white",b=i?"#404040":"#e5e7eb";let y;e[4]!==n.height||e[5]!==n.width||e[6]!==n.x||e[7]!==n.y||e[8]!==m||e[9]!==b?(y=f.jsx("rect",{x:n.x,y:n.y,width:n.width,height:n.height,rx:12,fill:m,stroke:b,strokeWidth:1}),e[4]=n.height,e[5]=n.width,e[6]=n.x,e[7]=n.y,e[8]=m,e[9]=b,e[10]=y):y=e[10];let w;e[11]!==n.name||e[12]!==n.namespace||e[13]!==n.width||e[14]!==n.x||e[15]!==n.y||e[16]!==i||e[17]!==g?(w=g&&f.jsxs("g",{children:[f.jsx("text",{x:n.x+10,y:n.y+13,fontSize:12,fontWeight:600,fill:i?"#e5e5e5":"#374151",dominantBaseline:"hanging",children:n.name.length>Math.floor((n.width-20)/7)?n.name.slice(0,Math.floor((n.width-20)/7)-1)+"":n.name}),n.namespace&&f.jsx("text",{x:n.x+10,y:n.y+26,fontSize:10,fill:i?"#a3a3a3":"#6b7280",dominantBaseline:"hanging",children:n.namespace.length>Math.floor((n.width-20)/6)?n.namespace.slice(0,Math.floor((n.width-20)/6)-1)+"":n.namespace})]}),e[11]=n.name,e[12]=n.namespace,e[13]=n.width,e[14]=n.x,e[15]=n.y,e[16]=i,e[17]=g,e[18]=w):w=e[18];let x;if(e[19]!==n.edges||e[20]!==i||e[21]!==c){let C;e[23]!==i||e[24]!==c?(C=(N,R)=>{const B=c.get(N.from),E=c.get(N.to);return!B||!E||N.type==="owner"&&(B.childPods?.some(U=>U.uid===E.uid)||E.childPods?.some(U=>U.uid===B.uid))?null:f.jsx(pre,{from:B,to:E,type:N.type,isDarkMode:i},R)},e[23]=i,e[24]=c,e[25]=C):C=e[25],x=n.edges.map(C),e[19]=n.edges,e[20]=i,e[21]=c,e[22]=x}else x=e[22];let S;if(e[26]!==i||e[27]!==r||e[28]!==s||e[29]!==h){let C;e[31]!==i||e[32]!==r||e[33]!==s?(C=N=>f.jsx(mre,{node:N,onClick:()=>s(N),onPodClick:s,onConfigClick:r,isDarkMode:i},N.uid),e[31]=i,e[32]=r,e[33]=s,e[34]=C):C=e[34],S=h.map(C),e[26]=i,e[27]=r,e[28]=s,e[29]=h,e[30]=S}else S=e[30];let k;return e[35]!==y||e[36]!==w||e[37]!==x||e[38]!==S?(k=f.jsxs("g",{children:[y,w,x,S]}),e[35]=y,e[36]=w,e[37]=x,e[38]=S,e[39]=k):k=e[39],k}function fre(t){return[t.uid,t]}function pre(t){const e=Me.c(14),{from:n,to:s,type:r,isDarkMode:i}=t,o=n.x+n.width,c=n.y+n.height/2,d=s.x,h=s.y+s.height/2,g=(o+d)/2,m=`M ${o} ${c} C ${g} ${c}, ${g} ${h}, ${d} ${h}`,b=i?"#94a3b8":"#64748b",y=i?"#c084fc":"#8b5cf6",w=i?"#22d3ee":"#06b6d4",x=i?"#2dd4bf":"#14b8a6",S=i?"#34d399":"#10b981",k=i?"#fbbf24":"#f59e0b";let C;e[0]!==b||e[1]!==y||e[2]!==w||e[3]!==x||e[4]!==S||e[5]!==k?(C={owner:b,selector:y,service:w,ingress:x,gateway:S,"network-policy":k},e[0]=b,e[1]=y,e[2]=w,e[3]=x,e[4]=S,e[5]=k,e[6]=C):C=e[6];const N=C;let R;e[7]===Symbol.for("react.memo_cache_sentinel")?(R={owner:void 0,selector:"6,3",service:"6,3",ingress:"4,2",gateway:"4,2","network-policy":"2,2"},e[7]=R):R=e[7];const B=R,E=N[r],z=r==="network-policy"?1.5:2,U=B[r],Y=`url(#arrow-${r}${i?"-dark":""})`;let D;return e[8]!==m||e[9]!==z||e[10]!==U||e[11]!==Y||e[12]!==E?(D=f.jsx("path",{d:m,fill:"none",stroke:E,strokeWidth:z,strokeDasharray:U,markerEnd:Y}),e[8]=m,e[9]=z,e[10]=U,e[11]=Y,e[12]=E,e[13]=D):D=e[13],D}function mre(t){const e=Me.c(62),{node:n,onClick:s,onPodClick:r,onConfigClick:i,isDarkMode:o}=t,{resource:c,x:d,y:h,width:g,height:m}=n;if(c.kind==="NetworkPolicy"){let P;return e[0]!==o||e[1]!==n||e[2]!==s?(P=f.jsx(vre,{node:n,onClick:s,isDarkMode:o}),e[0]=o,e[1]=n,e[2]=s,e[3]=P):P=e[3],P}if(c.kind==="Service"){let P;return e[4]!==o||e[5]!==n||e[6]!==s?(P=f.jsx(RT,{node:n,onClick:s,isDarkMode:o}),e[4]=o,e[5]=n,e[6]=s,e[7]=P):P=e[7],P}if(["Gateway","HTTPRoute","GRPCRoute"].includes(c.kind)){let P;return e[8]!==o||e[9]!==n||e[10]!==s?(P=f.jsx(RT,{node:n,onClick:s,isDarkMode:o}),e[8]=o,e[9]=n,e[10]=s,e[11]=P):P=e[11],P}if(c.kind==="Ingress"){let P;return e[12]!==o||e[13]!==n||e[14]!==s?(P=f.jsx(yre,{node:n,onClick:s,isDarkMode:o}),e[12]=o,e[13]=n,e[14]=s,e[15]=P):P=e[15],P}if(["Deployment","StatefulSet","DaemonSet","Job"].includes(c.kind)&&n.childPods&&n.childPods.length>0){let P;return e[16]!==o||e[17]!==n||e[18]!==s||e[19]!==i||e[20]!==r?(P=f.jsx(gre,{node:n,onClick:s,onPodClick:r,onConfigClick:i,isDarkMode:o}),e[16]=o,e[17]=n,e[18]=s,e[19]=i,e[20]=r,e[21]=P):P=e[21],P}let b;e[22]!==o||e[23]!==c.kind?(b=nl(c.kind,o),e[22]=o,e[23]=c.kind,e[24]=b):b=e[24];const y=b,w=du[c.kind]||Rg;let x;e[25]!==c?(x=N8(c),e[25]=c,e[26]=x):x=e[26];const S=x,k=o?S.colorDark:S.color,C=Math.floor((g-20)/6.5),N=c.metadata.name.length>C?c.metadata.name.slice(0,C-2)+"":c.metadata.name,R=`translate(${d}, ${h})`;let B;e[27]!==s?(B=P=>{P.stopPropagation(),s()},e[27]=s,e[28]=B):B=e[28];let E;e[29]===Symbol.for("react.memo_cache_sentinel")?(E={cursor:"pointer"},e[29]=E):E=e[29];let z;e[30]!==y.bg||e[31]!==y.border||e[32]!==m||e[33]!==g?(z=f.jsx("rect",{width:g,height:m,rx:8,fill:y.bg,stroke:y.border,strokeWidth:2}),e[30]=y.bg,e[31]=y.border,e[32]=m,e[33]=g,e[34]=z):z=e[34];let U;e[35]!==y.text?(U={color:y.text},e[35]=y.text,e[36]=U):U=e[36];let Y;e[37]!==w?(Y=f.jsx(w,{size:16}),e[37]=w,e[38]=Y):Y=e[38];let D;e[39]!==U||e[40]!==Y?(D=f.jsx("foreignObject",{width:18,height:18,children:f.jsx("div",{style:U,children:Y})}),e[39]=U,e[40]=Y,e[41]=D):D=e[41];let W;e[42]!==y.text||e[43]!==c.kind?(W=f.jsx("text",{x:22,y:13,fontSize:11,fill:y.text,fontWeight:600,children:c.kind}),e[42]=y.text,e[43]=c.kind,e[44]=W):W=e[44];let V;e[45]!==W||e[46]!==D?(V=f.jsxs("g",{transform:"translate(10, 10)",children:[D,W]}),e[45]=W,e[46]=D,e[47]=V):V=e[47];const q=g-12;let X;e[48]!==k||e[49]!==q?(X=f.jsx("circle",{cx:q,cy:14,r:5,fill:k}),e[48]=k,e[49]=q,e[50]=X):X=e[50];const I=m-12,L=o?"#e5e7eb":"#1f2937";let J;e[51]!==N||e[52]!==I||e[53]!==L?(J=f.jsx("text",{x:10,y:I,fontSize:12,fontWeight:600,fill:L,children:N}),e[51]=N,e[52]=I,e[53]=L,e[54]=J):J=e[54];let G;return e[55]!==V||e[56]!==X||e[57]!==J||e[58]!==R||e[59]!==B||e[60]!==z?(G=f.jsxs("g",{transform:R,onClick:B,style:E,className:"hover:opacity-80 transition-opacity",children:[z,V,X,J]}),e[55]=V,e[56]=X,e[57]=J,e[58]=R,e[59]=B,e[60]=z,e[61]=G):G=e[61],G}function RT(t){const e=Me.c(26),{node:n,onClick:s,isDarkMode:r}=t,{resource:i,x:o,y:c,width:d,height:h}=n;let g;e[0]!==r||e[1]!==i.kind?(g=nl(i.kind,r),e[0]=r,e[1]=i.kind,e[2]=g):g=e[2];const m=g,b=du[i.kind]||Rg,y=`translate(${o}, ${c})`;let w;e[3]!==s?(w=z=>{z.stopPropagation(),s()},e[3]=s,e[4]=w):w=e[4];let x;e[5]===Symbol.for("react.memo_cache_sentinel")?(x={cursor:"pointer"},e[5]=x):x=e[5];let S;e[6]!==m.bg||e[7]!==m.border||e[8]!==h||e[9]!==d?(S=f.jsx("rect",{width:d,height:h,rx:8,fill:m.bg,stroke:m.border,strokeWidth:2}),e[6]=m.bg,e[7]=m.border,e[8]=h,e[9]=d,e[10]=S):S=e[10];const k=`translate(${d/2-12}, ${h/2-12})`;let C;e[11]!==m.text?(C={color:m.text},e[11]=m.text,e[12]=C):C=e[12];let N;e[13]!==b?(N=f.jsx(b,{size:22}),e[13]=b,e[14]=N):N=e[14];let R;e[15]!==C||e[16]!==N?(R=f.jsx("foreignObject",{width:24,height:24,children:f.jsx("div",{style:C,children:N})}),e[15]=C,e[16]=N,e[17]=R):R=e[17];let B;e[18]!==k||e[19]!==R?(B=f.jsx("g",{transform:k,children:R}),e[18]=k,e[19]=R,e[20]=B):B=e[20];let E;return e[21]!==B||e[22]!==y||e[23]!==w||e[24]!==S?(E=f.jsxs("g",{transform:y,onClick:w,style:x,className:"hover:opacity-80 transition-opacity",children:[S,B]}),e[21]=B,e[22]=y,e[23]=w,e[24]=S,e[25]=E):E=e[25],E}function gre(t){const e=Me.c(54),{node:n,onClick:s,onPodClick:r,onConfigClick:i,isDarkMode:o}=t,{resource:c,x:d,y:h,width:g,height:m,childPods:b}=n;let y;e[0]!==b?(y=b===void 0?[]:b,e[0]=b,e[1]=y):y=e[1];const w=y;let x;e[2]!==o||e[3]!==c.kind?(x=nl(c.kind,o),e[2]=o,e[3]=c.kind,e[4]=x):x=e[4];const S=x,k=du[c.kind]||Rg,C=Math.floor((g-60)/6),N=c.metadata.name.length>C?c.metadata.name.slice(0,C-2)+"":c.metadata.name;let R;e[5]!==n?(R=n.configIcons||[],e[5]=n,e[6]=R):R=e[6];const B=R,E=`translate(${d}, ${h})`;let z;e[7]!==s?(z=O=>{O.stopPropagation(),s()},e[7]=s,e[8]=z):z=e[8];let U;e[9]===Symbol.for("react.memo_cache_sentinel")?(U={cursor:"pointer"},e[9]=U):U=e[9];let Y;e[10]!==S.bg||e[11]!==S.border||e[12]!==m||e[13]!==z||e[14]!==g?(Y=f.jsx("rect",{width:g,height:m,rx:10,fill:S.bg,stroke:S.border,strokeWidth:2,onClick:z,style:U,className:"hover:opacity-90"}),e[10]=S.bg,e[11]=S.border,e[12]=m,e[13]=z,e[14]=g,e[15]=Y):Y=e[15];let D;e[16]!==s?(D=O=>{O.stopPropagation(),s()},e[16]=s,e[17]=D):D=e[17];let W;e[18]===Symbol.for("react.memo_cache_sentinel")?(W={cursor:"pointer"},e[18]=W):W=e[18];let V;e[19]!==S.text?(V={color:S.text},e[19]=S.text,e[20]=V):V=e[20];let q;e[21]!==k?(q=f.jsx(k,{size:16}),e[21]=k,e[22]=q):q=e[22];let X;e[23]!==V||e[24]!==q?(X=f.jsx("foreignObject",{width:18,height:18,children:f.jsx("div",{style:V,children:q})}),e[23]=V,e[24]=q,e[25]=X):X=e[25];let I;e[26]!==S.text||e[27]!==N?(I=f.jsx("text",{x:22,y:13,fontSize:11,fill:S.text,fontWeight:600,children:N}),e[26]=S.text,e[27]=N,e[28]=I):I=e[28];let L;e[29]!==X||e[30]!==I?(L=f.jsxs("g",{transform:"translate(8, 8)",children:[X,I]}),e[29]=X,e[30]=I,e[31]=L):L=e[31];let J;e[32]!==L||e[33]!==D?(J=f.jsx("g",{onClick:D,style:W,children:L}),e[32]=L,e[33]=D,e[34]=J):J=e[34];let G;if(e[35]!==w||e[36]!==o||e[37]!==r){let O;e[39]!==o||e[40]!==r?(O=(K,j)=>{const Z=nl("Pod",o),le=N8(K.resource),te=o?le.colorDark:le.color,pe=_S+j*(Xo+x0),_e=Math.floor((Ag-30)/5.5),Ce=K.resource.metadata.name.length>_e?K.resource.metadata.name.slice(0,_e-2)+"":K.resource.metadata.name;return f.jsxs("g",{transform:`translate(${Hc}, ${pe})`,onClick:tt=>{tt.stopPropagation(),r?.(K)},style:{cursor:"pointer"},className:"hover:opacity-80",children:[f.jsx("rect",{width:Ag,height:Xo,rx:4,fill:Z.bg,stroke:Z.border,strokeWidth:1.5}),f.jsx("circle",{cx:12,cy:Xo/2,r:4,fill:te}),f.jsx("text",{x:22,y:Xo/2+4,fontSize:10,fill:o?"#e5e7eb":"#1f2937",fontWeight:500,children:Ce})]},K.uid)},e[39]=o,e[40]=r,e[41]=O):O=e[41],G=w.map(O),e[35]=w,e[36]=o,e[37]=r,e[38]=G}else G=e[38];let P;e[42]!==B||e[43]!==m||e[44]!==o||e[45]!==i||e[46]!==c.metadata.namespace?(P=B.length>0&&f.jsx("g",{transform:`translate(${Hc}, ${m-Math.ceil(B.length/Gd)*(Qi+no)-no})`,children:B.map((O,K)=>{const j=du[O.kind],Z=nl(O.kind,o),le=Math.floor(K/Gd),pe=K%Gd*(Qi+no),_e=le*(Qi+no);return f.jsxs("g",{transform:`translate(${pe}, ${_e})`,onClick:Ce=>{Ce.stopPropagation(),i&&i(O.kind,O.name,c.metadata.namespace)},style:{cursor:"pointer"},className:"hover:opacity-80",children:[f.jsx("title",{children:O.name}),f.jsx("rect",{width:Qi,height:Qi,rx:3,fill:Z.bg,stroke:Z.border,strokeWidth:1}),f.jsx("g",{transform:`translate(${Qi/2-6}, ${Qi/2-6})`,children:f.jsx("foreignObject",{width:12,height:12,children:f.jsx("div",{style:{color:Z.text},children:f.jsx(j,{size:12})})})})]},`${O.kind}-${O.name}-${K}`)})}),e[42]=B,e[43]=m,e[44]=o,e[45]=i,e[46]=c.metadata.namespace,e[47]=P):P=e[47];let T;return e[48]!==J||e[49]!==G||e[50]!==P||e[51]!==E||e[52]!==Y?(T=f.jsxs("g",{transform:E,children:[Y,J,G,P]}),e[48]=J,e[49]=G,e[50]=P,e[51]=E,e[52]=Y,e[53]=T):T=e[53],T}function yre(t){const e=Me.c(52),{node:n,onClick:s,isDarkMode:r}=t,{resource:i,x:o,y:c,width:d,height:h}=n;let g;e[0]!==r?(g=nl("Ingress",r),e[0]=r,e[1]=g):g=e[1];const m=g,b=du.Ingress,y=i.spec;let w,x,S,k,C,N,R,B;if(e[2]!==m.bg||e[3]!==m.border||e[4]!==m.text||e[5]!==h||e[6]!==r||e[7]!==s||e[8]!==i.metadata.name||e[9]!==y.rules||e[10]!==d||e[11]!==o||e[12]!==c){const D=y.rules?.map(bre).filter(Boolean)||[],W=Math.floor((d-20)/6.5);w=i.metadata.name.length>W?i.metadata.name.slice(0,W-2)+"":i.metadata.name,x=`translate(${o}, ${c})`,e[21]!==s?(S=L=>{L.stopPropagation(),s()},e[21]=s,e[22]=S):S=e[22],e[23]===Symbol.for("react.memo_cache_sentinel")?(k={cursor:"pointer"},e[23]=k):k=e[23],C="hover:opacity-80 transition-opacity",e[24]!==m.bg||e[25]!==m.border||e[26]!==h||e[27]!==d?(N=f.jsx("rect",{width:d,height:h,rx:8,fill:m.bg,stroke:m.border,strokeWidth:2}),e[24]=m.bg,e[25]=m.border,e[26]=h,e[27]=d,e[28]=N):N=e[28];let V;e[29]!==m.text?(V={color:m.text},e[29]=m.text,e[30]=V):V=e[30];let q;e[31]===Symbol.for("react.memo_cache_sentinel")?(q=f.jsx(b,{size:16}),e[31]=q):q=e[31];let X;e[32]!==V?(X=f.jsx("foreignObject",{width:18,height:18,children:f.jsx("div",{style:V,children:q})}),e[32]=V,e[33]=X):X=e[33];let I;e[34]!==m.text?(I=f.jsx("text",{x:22,y:13,fontSize:11,fill:m.text,fontWeight:600,children:"Ingress"}),e[34]=m.text,e[35]=I):I=e[35],e[36]!==X||e[37]!==I?(R=f.jsxs("g",{transform:"translate(10, 10)",children:[X,I]}),e[36]=X,e[37]=I,e[38]=R):R=e[38],B=D.length>0&&D[0]&&f.jsx("text",{x:d-10,y:18,fontSize:9,fill:r?"#5eead4":"#115e59",textAnchor:"end",children:D[0].length>18?D[0].slice(0,16)+"":D[0]}),e[2]=m.bg,e[3]=m.border,e[4]=m.text,e[5]=h,e[6]=r,e[7]=s,e[8]=i.metadata.name,e[9]=y.rules,e[10]=d,e[11]=o,e[12]=c,e[13]=w,e[14]=x,e[15]=S,e[16]=k,e[17]=C,e[18]=N,e[19]=R,e[20]=B}else w=e[13],x=e[14],S=e[15],k=e[16],C=e[17],N=e[18],R=e[19],B=e[20];const E=h-12,z=r?"#e5e7eb":"#1f2937";let U;e[39]!==w||e[40]!==z||e[41]!==E?(U=f.jsx("text",{x:10,y:E,fontSize:12,fontWeight:600,fill:z,children:w}),e[39]=w,e[40]=z,e[41]=E,e[42]=U):U=e[42];let Y;return e[43]!==U||e[44]!==x||e[45]!==S||e[46]!==k||e[47]!==C||e[48]!==N||e[49]!==R||e[50]!==B?(Y=f.jsxs("g",{transform:x,onClick:S,style:k,className:C,children:[N,R,B,U]}),e[43]=U,e[44]=x,e[45]=S,e[46]=k,e[47]=C,e[48]=N,e[49]=R,e[50]=B,e[51]=Y):Y=e[51],Y}function bre(t){return t.host}function vre(t){const e=Me.c(55),{node:n,onClick:s,isDarkMode:r}=t,{resource:i,x:o,y:c,width:d,height:h}=n;let g;e[0]!==r?(g=nl("NetworkPolicy",r),e[0]=r,e[1]=g):g=e[1];const m=g,b=du.NetworkPolicy,y=i.spec;let w;e[2]!==y.policyTypes?(w=y.policyTypes||[],e[2]=y.policyTypes,e[3]=w):w=e[3];const x=w;let S;e[4]!==x||e[5]!==y.ingress?(S=x.includes("Ingress")||y.ingress,e[4]=x,e[5]=y.ingress,e[6]=S):S=e[6];const k=S;let C;e[7]!==x||e[8]!==y.egress?(C=x.includes("Egress")||y.egress,e[7]=x,e[8]=y.egress,e[9]=C):C=e[9];const N=C;let R;e[10]!==y.ingress?(R=y.ingress||[],e[10]=y.ingress,e[11]=R):R=e[11];const B=R;let E;e[12]!==y.egress?(E=y.egress||[],e[12]=y.egress,e[13]=E):E=e[13];const z=E,U=k&&B.length===0,Y=N&&z.length===0,D=U&&Y,W=Math.floor((d-20)/6.5),V=i.metadata.name.length>W?i.metadata.name.slice(0,W-2)+"":i.metadata.name;let q;e[14]!==Y||e[15]!==z||e[16]!==N||e[17]!==k||e[18]!==U||e[19]!==B||e[20]!==D?(q=()=>{const It=[];return D?" Deny All":(U?It.push(" No Ingress"):k&&B.length>0&&It.push(`${B.length}`),Y?It.push(" No Egress"):N&&z.length>0&&It.push(`${z.length}`),It.join(" ")||" Allow")},e[14]=Y,e[15]=z,e[16]=N,e[17]=k,e[18]=U,e[19]=B,e[20]=D,e[21]=q):q=e[21];const X=q,I=`translate(${o}, ${c})`;let L;e[22]!==s?(L=It=>{It.stopPropagation(),s()},e[22]=s,e[23]=L):L=e[23];let J;e[24]===Symbol.for("react.memo_cache_sentinel")?(J={cursor:"pointer"},e[24]=J):J=e[24];const G=D?r?"#7f1d1d":"#fef2f2":m.bg,P=D?r?"#f87171":"#ef4444":m.border;let T;e[25]!==h||e[26]!==G||e[27]!==P||e[28]!==d?(T=f.jsx("rect",{width:d,height:h,rx:8,fill:G,stroke:P,strokeWidth:2}),e[25]=h,e[26]=G,e[27]=P,e[28]=d,e[29]=T):T=e[29];const O=D?r?"#f87171":"#ef4444":m.text;let K;e[30]!==O?(K={color:O},e[30]=O,e[31]=K):K=e[31];let j;e[32]===Symbol.for("react.memo_cache_sentinel")?(j=f.jsx(b,{size:16}),e[32]=j):j=e[32];let Z;e[33]!==K?(Z=f.jsx("foreignObject",{width:18,height:18,children:f.jsx("div",{style:K,children:j})}),e[33]=K,e[34]=Z):Z=e[34];const le=D?r?"#f87171":"#ef4444":m.text;let te;e[35]!==le?(te=f.jsx("text",{x:22,y:13,fontSize:10,fill:le,fontWeight:600,children:"NetworkPolicy"}),e[35]=le,e[36]=te):te=e[36];let pe;e[37]!==Z||e[38]!==te?(pe=f.jsxs("g",{transform:"translate(10, 10)",children:[Z,te]}),e[37]=Z,e[38]=te,e[39]=pe):pe=e[39];const _e=d-10,Ce=D?r?"#fca5a5":"#dc2626":r?"#fcd34d":"#92400e",tt=X();let Ee;e[40]!==_e||e[41]!==Ce||e[42]!==tt?(Ee=f.jsx("text",{x:_e,y:18,fontSize:9,fill:Ce,textAnchor:"end",fontWeight:500,children:tt}),e[40]=_e,e[41]=Ce,e[42]=tt,e[43]=Ee):Ee=e[43];const Je=h-12,Ue=r?"#e5e7eb":"#1f2937";let bt;e[44]!==V||e[45]!==Je||e[46]!==Ue?(bt=f.jsx("text",{x:10,y:Je,fontSize:12,fontWeight:600,fill:Ue,children:V}),e[44]=V,e[45]=Je,e[46]=Ue,e[47]=bt):bt=e[47];let qt;return e[48]!==T||e[49]!==pe||e[50]!==Ee||e[51]!==bt||e[52]!==I||e[53]!==L?(qt=f.jsxs("g",{transform:I,onClick:L,style:J,className:"hover:opacity-80 transition-opacity",children:[T,pe,Ee,bt]}),e[48]=T,e[49]=pe,e[50]=Ee,e[51]=bt,e[52]=I,e[53]=L,e[54]=qt):qt=e[54],qt}function xre(t){const e=t.metadata.labels||{};return e["app.kubernetes.io/instance"]||e.release||e.app||e["app.kubernetes.io/name"]||e["k8s-app"]||e.name||e["app.kubernetes.io/component"]||e["app.kubernetes.io/part-of"]}const _re={Deployment:1,StatefulSet:2,DaemonSet:3,CronJob:4,Job:5,Pod:6};function wre(t){const e=new Map;t.forEach(P=>{P.metadata.uid&&e.set(P.metadata.uid,P)});const n=new Map,s=new Map,r=(P,T)=>{n.has(P)||n.set(P,new Set),n.has(T)||n.set(T,new Set),n.get(P).add(T),n.get(T).add(P)},i=(P,T,O)=>{const K=`${P}-${T}`;s.has(K)||s.set(K,[]),s.get(K).push({from:P,to:T,type:O})},o=new Map,c=new Map;t.forEach(P=>{const T=(P.metadata.ownerReferences||[]).filter(O=>e.has(O.uid));if(T.length>0){const O=T[0];c.set(P.metadata.uid,O.uid),o.has(O.uid)||o.set(O.uid,[]),o.get(O.uid).push(P.metadata.uid),r(P.metadata.uid,O.uid),i(O.uid,P.metadata.uid,"owner")}});const d=["Deployment","StatefulSet","DaemonSet","Job"];t.forEach(P=>{if(!d.includes(P.kind))return;const T=P.spec?.selector?.matchLabels;!T||Object.keys(T).length===0||t.filter(O=>O.kind==="Pod"&&O.metadata.namespace===P.metadata.namespace).forEach(O=>{const K=O.metadata.labels||{};Object.entries(T).every(([j,Z])=>K[j]===Z)&&r(P.metadata.uid,O.metadata.uid)})});const h=new Map,g=new Map,m=new Set;t.filter(P=>P.kind==="Pod").forEach(P=>{const T=P.metadata.ownerReferences?.[0];if(!T)return;if(T.kind==="Node"){m.add(P.metadata.uid);return}const O=e.get(T.uid);if(O){if(d.includes(O.kind)){h.has(O.metadata.uid)||h.set(O.metadata.uid,[]),h.get(O.metadata.uid).push(P),g.set(P.metadata.uid,O.metadata.uid);return}if(O.kind==="ReplicaSet"){const K=O.metadata.ownerReferences?.[0];if(K){const j=e.get(K.uid);j&&j.kind==="Deployment"&&(h.has(j.metadata.uid)||h.set(j.metadata.uid,[]),h.get(j.metadata.uid).push(P),g.set(P.metadata.uid,j.metadata.uid))}}}}),h.forEach(P=>{P.sort((T,O)=>T.metadata.name.localeCompare(O.metadata.name))}),t.forEach(P=>{if(P.kind!=="Service")return;const T=P.spec?.selector;!T||Object.keys(T).length===0||t.filter(O=>O.kind==="Pod"&&O.metadata.namespace===P.metadata.namespace).forEach(O=>{const K=O.metadata.labels||{};Object.entries(T).every(([j,Z])=>K[j]===Z)&&(r(P.metadata.uid,O.metadata.uid),i(P.metadata.uid,O.metadata.uid,"service"))})}),t.forEach(P=>{if(P.kind!=="NetworkPolicy")return;const T=P.spec,O=P.metadata.namespace||"",K=T.podSelector?.matchLabels||{},j=Object.keys(K).length===0;t.filter(Z=>Z.kind==="Pod"&&Z.metadata.namespace===O).forEach(Z=>{const le=Z.metadata.labels||{};if(j||Object.entries(K).every(([pe,_e])=>le[pe]===_e)){const pe=g.get(Z.metadata.uid);i(pe||Z.metadata.uid,P.metadata.uid,"network-policy")}})});const b=new Map;t.forEach(P=>{if(P.kind==="Service"){const T=`${P.metadata.namespace||""}/${P.metadata.name}`;b.set(T,P)}}),t.forEach(P=>{if(P.kind!=="Ingress")return;const T=P.spec,O=P.metadata.namespace||"";if(T.defaultBackend?.service?.name){const K=b.get(`${O}/${T.defaultBackend.service.name}`);K&&(r(P.metadata.uid,K.metadata.uid),i(P.metadata.uid,K.metadata.uid,"ingress"))}T.rules?.forEach(K=>{K.http?.paths?.forEach(j=>{if(j.backend?.service?.name){const Z=b.get(`${O}/${j.backend.service.name}`);Z&&(r(P.metadata.uid,Z.metadata.uid),i(P.metadata.uid,Z.metadata.uid,"ingress"))}})})}),t.forEach(P=>{if(P.kind!=="HTTPRoute"&&P.kind!=="GRPCRoute")return;const T=P.spec,O=P.metadata.namespace||"";T.parentRefs?.forEach(K=>{if(!K.kind||K.kind==="Gateway"){const j=t.find(Z=>Z.kind==="Gateway"&&Z.metadata.name===K.name&&Z.metadata.namespace===O);j&&(r(j.metadata.uid,P.metadata.uid),i(j.metadata.uid,P.metadata.uid,"gateway"))}}),T.rules?.forEach(K=>{K.backendRefs?.forEach(j=>{if(!j.kind||j.kind==="Service"){const Z=b.get(`${O}/${j.name}`);Z&&(r(P.metadata.uid,Z.metadata.uid),i(P.metadata.uid,Z.metadata.uid,"gateway"))}})})});const y=new Map,w=new Map,x=new Map;t.forEach(P=>{const T=`${P.metadata.namespace||""}/${P.metadata.name}`;P.kind==="ConfigMap"?y.set(T,P):P.kind==="Secret"?w.set(T,P):P.kind==="PersistentVolumeClaim"&&x.set(T,P)});const S=(P,T,O)=>{P?.forEach(K=>{K.env?.forEach(j=>{j.valueFrom?.configMapKeyRef?.name&&T.add(j.valueFrom.configMapKeyRef.name),j.valueFrom?.secretKeyRef?.name&&O.add(j.valueFrom.secretKeyRef.name)}),K.envFrom?.forEach(j=>{j.configMapRef?.name&&T.add(j.configMapRef.name),j.secretRef?.name&&O.add(j.secretRef.name)})})},k=new Map;t.filter(P=>P.kind==="Pod").forEach(P=>{const T=g.get(P.metadata.uid);if(!T)return;const O=P.spec,K=new Set,j=new Set,Z=new Set;O.volumes?.forEach(te=>{te.configMap?.name&&K.add(te.configMap.name),te.secret?.secretName&&j.add(te.secret.secretName),te.persistentVolumeClaim?.claimName&&Z.add(te.persistentVolumeClaim.claimName),te.projected?.sources?.forEach(pe=>{pe.configMap?.name&&K.add(pe.configMap.name),pe.secret?.name&&j.add(pe.secret.name)})}),S(O.containers,K,j),S(O.initContainers,K,j),k.has(T)||k.set(T,new Map);const le=k.get(T);K.size>0&&(le.has("ConfigMap")||le.set("ConfigMap",new Set),K.forEach(te=>le.get("ConfigMap").add(te))),j.size>0&&(le.has("Secret")||le.set("Secret",new Set),j.forEach(te=>le.get("Secret").add(te))),Z.size>0&&(le.has("PersistentVolumeClaim")||le.set("PersistentVolumeClaim",new Set),Z.forEach(te=>le.get("PersistentVolumeClaim").add(te)))});const C=P=>{const T=c.get(P);return T?C(T):P},N=new Map,R=new Map,B=new Map;t.forEach(P=>{if(P.kind!=="Pod")return;const T=P.metadata.namespace||"",O=C(P.metadata.uid),K=P.spec,j=new Set,Z=new Set,le=new Set;K.volumes?.forEach(te=>{te.configMap?.name&&j.add(te.configMap.name),te.secret?.secretName&&Z.add(te.secret.secretName),te.persistentVolumeClaim?.claimName&&le.add(te.persistentVolumeClaim.claimName),te.projected?.sources?.forEach(pe=>{pe.configMap?.name&&j.add(pe.configMap.name),pe.secret?.name&&Z.add(pe.secret.name)})}),S(K.containers,j,Z),S(K.initContainers,j,Z),j.forEach(te=>{const pe=`${T}/${te}`;N.has(pe)||N.set(pe,new Set),N.get(pe).add(O)}),Z.forEach(te=>{const pe=`${T}/${te}`;R.has(pe)||R.set(pe,new Set),R.get(pe).add(O)}),le.forEach(te=>{const pe=`${T}/${te}`;B.has(pe)||B.set(pe,new Set),B.get(pe).add(O)})});const E=new Set;N.forEach((P,T)=>{if(P.size>1){const O=y.get(T);O&&E.add(O.metadata.uid)}}),R.forEach((P,T)=>{if(P.size>1){const O=w.get(T);O&&E.add(O.metadata.uid)}}),B.forEach((P,T)=>{if(P.size>1){const O=x.get(T);O&&E.add(O.metadata.uid)}}),t.forEach(P=>{if(P.kind!=="Pod")return;const T=P.metadata.namespace||"",O=P.spec,K=new Set,j=new Set,Z=new Set;O.volumes?.forEach(le=>{le.configMap?.name&&K.add(le.configMap.name),le.secret?.secretName&&j.add(le.secret.secretName),le.persistentVolumeClaim?.claimName&&Z.add(le.persistentVolumeClaim.claimName),le.projected?.sources?.forEach(te=>{te.configMap?.name&&K.add(te.configMap.name),te.secret?.name&&j.add(te.secret.name)})}),S(O.containers,K,j),S(O.initContainers,K,j),K.forEach(le=>{const te=y.get(`${T}/${le}`);te&&!E.has(te.metadata.uid)&&(r(P.metadata.uid,te.metadata.uid),i(te.metadata.uid,P.metadata.uid,"owner"))}),j.forEach(le=>{const te=w.get(`${T}/${le}`);te&&!E.has(te.metadata.uid)&&(r(P.metadata.uid,te.metadata.uid),i(te.metadata.uid,P.metadata.uid,"owner"))}),Z.forEach(le=>{const te=x.get(`${T}/${le}`);te&&!E.has(te.metadata.uid)&&(r(P.metadata.uid,te.metadata.uid),i(te.metadata.uid,P.metadata.uid,"owner"))})});const z=new Set,U=[];function Y(P,T){z.has(P)||m.has(P)||(z.add(P),T.push(P),(n.get(P)||new Set).forEach(O=>Y(O,T)))}t.forEach(P=>{if(!m.has(P.metadata.uid)&&!z.has(P.metadata.uid)){const T=[];Y(P.metadata.uid,T),T.length>0&&U.push(T)}}),U.sort((P,T)=>T.length-P.length);const D=[],W={Gateway:0,Ingress:0,HTTPRoute:1,GRPCRoute:1,Service:2,Deployment:3,StatefulSet:3,DaemonSet:3,Job:3,CronJob:3,Pod:3,ConfigMap:4,Secret:4,PersistentVolumeClaim:4,NetworkPolicy:5};U.forEach((P,T)=>{const O=P.map(Qe=>e.get(Qe)).filter(Boolean);if(O.length===0)return;const K=O.filter(Qe=>!(Qe.kind==="ReplicaSet"||Qe.kind==="Pod"&&g.has(Qe.metadata.uid)||["ConfigMap","Secret","PersistentVolumeClaim"].includes(Qe.kind)));if(K.length===0)return;const j=new Map;K.forEach(Qe=>{const rt=W[Qe.kind]??3;j.has(rt)||j.set(rt,[]),j.get(rt).push(Qe.metadata.uid)}),j.forEach(Qe=>{Qe.sort((rt,Mt)=>{const _t=e.get(rt),cn=e.get(Mt);return _t.metadata.name.localeCompare(cn.metadata.name)})});const Z=new Map;K.forEach(Qe=>{if(["Service","Gateway","HTTPRoute","GRPCRoute"].includes(Qe.kind)){Z.set(Qe.metadata.uid,{width:jT,height:jT});return}const rt=h.get(Qe.metadata.uid);if(rt&&rt.length>0){const Mt=k.get(Qe.metadata.uid);let _t=0;Mt&&Mt.forEach(se=>_t+=se.size);const cn=Ag+Hc*2,fe=Math.min(_t,Gd),we=fe>0?fe*(Qi+no)-no+Hc*2:0,qe=Math.max(cn,we),Ze=_t>0?Math.ceil(_t/Gd):0,ct=Ze>0?Ze*(Qi+no)+no:0,en=_S+rt.length*(Xo+x0)-x0+Hc+ct;Z.set(Qe.metadata.uid,{width:qe,height:en})}else Z.set(Qe.metadata.uid,{width:Kh,height:$x})});const le=new Map;let te=0,pe=Ya+TT;const _e=Array.from(j.keys()).sort((Qe,rt)=>Qe-rt),Ce=new Map;_e.forEach(Qe=>{const rt=Math.max(...(j.get(Qe)||[]).map(Mt=>Z.get(Mt)?.width||Kh));Ce.set(Qe,rt)});let tt=Ya;_e.forEach(Qe=>{const rt=Ce.get(Qe)||Kh;let Mt=Ya+TT;j.get(Qe).forEach(_t=>{const cn=Z.get(_t)||{width:Kh,height:$x},fe=(rt-cn.width)/2;le.set(_t,{x:tt+fe,y:Mt}),pe=Math.max(pe,Mt+cn.height),Mt+=cn.height+ure}),te=Math.max(te,tt+rt),tt+=rt+cre});const Ee=te+Ya,Je=pe+Ya,Ue=K.map(Qe=>{const rt=le.get(Qe.metadata.uid),Mt=Z.get(Qe.metadata.uid)||{width:Kh,height:$x},cn=h.get(Qe.metadata.uid)?.map((qe,Ze)=>({uid:qe.metadata.uid,resource:qe,x:Hc,y:_S+Ze*(Xo+x0),width:Ag,height:Xo})),fe=k.get(Qe.metadata.uid),we=[];return fe&&fe.forEach((qe,Ze)=>{qe.forEach(ct=>we.push({kind:Ze,name:ct}))}),{uid:Qe.metadata.uid,resource:Qe,x:rt.x,y:rt.y,width:Mt.width,height:Mt.height,childPods:cn,configIcons:we}}),bt=[],qt=new Set,It=new Set;K.forEach(Qe=>{const rt=h.get(Qe.metadata.uid);rt&&rt.forEach(Mt=>It.add(Mt.metadata.uid))}),s.forEach(Qe=>{Qe.forEach(rt=>{const Mt=K.some(we=>we.metadata.uid===rt.from),_t=K.some(we=>we.metadata.uid===rt.to),cn=It.has(rt.to),fe=It.has(rt.from);if(Mt&&_t||Mt&&cn||_t&&fe){const we=`${rt.from}-${rt.to}-${rt.type}`;qt.has(we)||(qt.add(we),bt.push(rt))}})});let Pt,Wn=1/0;K.forEach(Qe=>{const rt=_re[Qe.kind];rt!==void 0&&rt<Wn&&(Wn=rt,Pt=Qe)});const ls=Pt?xre(Pt)||Pt.metadata.name:void 0,ys=Pt?.metadata.namespace;D.push({id:`app-${T}`,name:ls||"",namespace:ys,nodes:Ue,edges:bt,x:0,y:0,width:Ee,height:Je})});const V=new Map;D.forEach(P=>{const T=P.namespace||"",O=P.name||"",K=`${T}/${O}`;V.has(K)||V.set(K,[]),V.get(K).push(P)});const q=[];V.forEach((P,T)=>{if(P.length===1)q.push(P[0]);else{P.sort((pe,_e)=>{const Ce=pe.nodes[0]?.resource.metadata.name||"",tt=_e.nodes[0]?.resource.metadata.name||"";return Ce.localeCompare(tt)});const O=[],K=[];let j=Ya,Z=0;P.forEach(pe=>{pe.nodes.forEach(_e=>{O.push({..._e,x:_e.x+j-Ya,y:_e.y})}),K.push(...pe.edges),j+=pe.width+Gm,Z=Math.max(Z,pe.height)});const[le,te]=T.split("/");q.push({id:`app-${T}`,name:te,namespace:le,nodes:O,edges:K,x:0,y:0,width:j-Gm+Ya,height:Z})}}),q.sort((P,T)=>T.height-P.height);const X=1800;let I=0,L=[];const J=[];q.forEach(P=>{I+P.width>X&&L.length>0&&(J.push([...L]),I=0,L=[]),L.push({app:P,tempX:I}),I+=P.width+Gm}),L.length>0&&J.push(L);let G=0;return J.forEach(P=>{const T=Math.max(...P.map(O=>O.app.height));P.forEach(({app:O,tempX:K})=>{const j=K,Z=G+(T-O.height)/2;O.nodes.forEach(le=>{le.x+=j,le.y+=Z}),O.x=j,O.y=Z}),G+=T+Gm}),q}function Sre(){const t=Me.c(4);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=f.jsxs("div",{className:"mb-8 relative",children:[f.jsx("img",{src:"/logo.png",alt:"Logo",className:"w-70 h-70 mx-auto dark:hidden"}),f.jsx("img",{src:"/logo_dark.png",alt:"Logo",className:"w-70 h-70 mx-auto hidden dark:block"})]}),t[0]=e):e=t[0];let n;t[1]===Symbol.for("react.memo_cache_sentinel")?(n=f.jsxs("div",{className:"p-4 rounded-xl bg-neutral-50 dark:bg-neutral-800/30",children:[f.jsx("div",{className:"w-9 h-9 mx-auto mb-2.5 rounded-lg bg-emerald-100 dark:bg-emerald-500/10 flex items-center justify-center",children:f.jsx(Dr,{size:18,className:"text-emerald-600 dark:text-emerald-400"})}),f.jsx("h3",{className:"font-medium text-sm text-neutral-900 dark:text-neutral-100 mb-0.5",children:"Topology"}),f.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"Resource relationships"})]}),t[1]=n):n=t[1];let s;t[2]===Symbol.for("react.memo_cache_sentinel")?(s=f.jsxs("div",{className:"p-4 rounded-xl bg-neutral-50 dark:bg-neutral-800/30",children:[f.jsx("div",{className:"w-9 h-9 mx-auto mb-2.5 rounded-lg bg-sky-100 dark:bg-sky-500/10 flex items-center justify-center",children:f.jsx(fo,{size:18,className:"text-sky-600 dark:text-sky-400"})}),f.jsx("h3",{className:"font-medium text-sm text-neutral-900 dark:text-neutral-100 mb-0.5",children:"Browser"}),f.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"Browse any resource"})]}),t[2]=s):s=t[2];let r;return t[3]===Symbol.for("react.memo_cache_sentinel")?(r=f.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:f.jsxs("div",{className:"max-w-2xl mx-auto px-8 text-center",children:[e,f.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[n,s,f.jsxs("div",{className:"p-4 rounded-xl bg-neutral-50 dark:bg-neutral-800/30",children:[f.jsx("div",{className:"w-9 h-9 mx-auto mb-2.5 rounded-lg bg-purple-100 dark:bg-purple-500/10 flex items-center justify-center",children:f.jsx(Mg,{size:18,className:"text-purple-600 dark:text-purple-400"})}),f.jsx("h3",{className:"font-medium text-sm text-neutral-900 dark:text-neutral-100 mb-0.5",children:"Details"}),f.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"Full specifications"})]})]})]})}),t[3]=r):r=t[3],r}function Cc(t){return t.toLowerCase().replace(/[-_.]/g,"")}function kre(t){const e=Me.c(92),{isOpen:n,onClose:s,adapter:r}=t,[i,o]=F.useState(""),[c,d]=F.useState(0);let h;e[0]===Symbol.for("react.memo_cache_sentinel")?(h=[],e[0]=h):h=e[0];const[g,m]=F.useState(h),[b,y]=F.useState(!1),[w,x]=F.useState(!1),[S,k]=F.useState(r.id),[C,N]=F.useState(!1),R=F.useRef(null),B=F.useRef(null),E=F.useRef(null);r.id!==S&&(k(r.id),x(!r.initialize));let z,U;e[1]!==r?(z=()=>{r.initialize&&r.initialize().then(()=>{x(Ere)})},U=[r],e[1]=r,e[2]=z,e[3]=U):(z=e[2],U=e[3]),F.useEffect(z,U),n&&!C?(N(!0),o(""),d(0),m([])):!n&&C&&N(!1);let Y;if(e[4]!==r.searchModePrefixes||e[5]!==i){e:{const me=[...r.searchModePrefixes].sort(Are);for(const{prefix:it,mode:Re}of me)if(i.startsWith(it)){Y={searchMode:Re,searchQuery:i.slice(it.length).trim()};break e}let Pe;e[7]!==i?(Pe=i.trim(),e[7]=i,e[8]=Pe):Pe=e[8];let st;e[9]!==Pe?(st={searchMode:"search",searchQuery:Pe},e[9]=Pe,e[10]=st):st=e[10],Y=st}e[4]=r.searchModePrefixes,e[5]=i,e[6]=Y}else Y=e[6];const{searchMode:D,searchQuery:W}=Y;let V;e:{if(!w){let Pe;e[11]===Symbol.for("react.memo_cache_sentinel")?(Pe=[],e[11]=Pe):Pe=e[11],V=Pe;break e}let me;e[12]!==r?(me=r.getAvailableResourceTypes(),e[12]=r,e[13]=me):me=e[13],V=me}const q=V;let X;if(e[14]!==q||e[15]!==W){const me=Cc(W);X=q.filter(Pe=>Cc(Pe.label).includes(me)||Cc(Pe.kind).includes(me)||Cc(Pe.category).includes(me)),e[14]=q,e[15]=W,e[16]=X}else X=e[16];const I=X;let L;e:{if(!r.supportsNamespaces){let Pe;e[17]===Symbol.for("react.memo_cache_sentinel")?(Pe=[],e[17]=Pe):Pe=e[17],L=Pe;break e}let me;if(e[18]!==r||e[19]!==W){const Pe=Cc(W);me=r.getNamespaces().filter(st=>Cc(st.name).includes(Pe)),e[18]=r,e[19]=W,e[20]=me}else me=e[20];L=me}const J=L;let G;e:{if(D==="resources"){let Pe;if(e[21]!==r||e[22]!==I){let st;e[24]!==r?(st=it=>r.resourceTypeToSearchResult(it),e[24]=r,e[25]=st):st=e[25],Pe=I.map(st),e[21]=r,e[22]=I,e[23]=Pe}else Pe=e[23];G=Pe;break e}if(D==="namespaces"&&r.supportsNamespaces&&r.namespaceToSearchResult){let Pe;if(e[26]!==r.namespaceToSearchResult||e[27]!==J){let st;e[29]!==r.namespaceToSearchResult?(st=it=>r.namespaceToSearchResult(it),e[29]=r.namespaceToSearchResult,e[30]=st):st=e[30],Pe=J.map(st),e[26]=r.namespaceToSearchResult,e[27]=J,e[28]=Pe}else Pe=e[28];G=Pe;break e}let me;e[31]===Symbol.for("react.memo_cache_sentinel")?(me=[],e[31]=me):me=e[31],G=me}const P=G,T=D==="search"||D==="searchAll"?g:P,O=(D==="search"||D==="searchAll")&&W.length>=2&&w,[K,j]=F.useState(D),[Z,le]=F.useState(P.length);D!==K?(j(D),le(P.length),D!=="search"&&D!=="searchAll"&&d(0)):D!=="search"&&D!=="searchAll"&&P.length!==Z&&(le(P.length),d(0));const[te,pe]=F.useState(O);O&&!te?(pe(!0),y(!0)):!O&&te&&pe(!1);let _e,Ce;e[32]!==r||e[33]!==D||e[34]!==W||e[35]!==O?(Ce=()=>(E.current&&clearTimeout(E.current),O&&(E.current=setTimeout(async()=>{const me=await r.searchResources(W,D==="searchAll");m(me),d(0),y(!1)},300)),()=>{E.current&&clearTimeout(E.current)}),_e=[O,D,W,r],e[32]=r,e[33]=D,e[34]=W,e[35]=O,e[36]=_e,e[37]=Ce):(_e=e[36],Ce=e[37]),F.useEffect(Ce,_e),(D==="search"||D==="searchAll")&&W.length<2&&g.length>0&&(m([]),y(!1));let Ee;e[38]!==r?(Ee=me=>{r.handleSelect(me)},e[38]=r,e[39]=Ee):Ee=e[39];const Je=Ee;let Ue;e[40]!==c||e[41]!==Je||e[42]!==s||e[43]!==T?(Ue=me=>{e:switch(me.key){case"ArrowDown":{me.preventDefault(),d(Pe=>Math.min(Pe+1,T.length-1));break e}case"ArrowUp":{me.preventDefault(),d(Nre);break e}case"Enter":{me.preventDefault(),T[c]&&Je(T[c]);break e}case"Escape":me.preventDefault(),s()}},e[40]=c,e[41]=Je,e[42]=s,e[43]=T,e[44]=Ue):Ue=e[44];const bt=Ue;let qt,It;e[45]!==n?(qt=()=>{n&&setTimeout(()=>R.current?.focus(),0)},It=[n],e[45]=n,e[46]=qt,e[47]=It):(qt=e[46],It=e[47]),F.useEffect(qt,It);let Pt,Wn;e[48]!==c?(Pt=()=>{c>=0&&B.current&&B.current.querySelector(`[data-index="${c}"]`)?.scrollIntoView({block:"nearest"})},Wn=[c],e[48]=c,e[49]=Pt,e[50]=Wn):(Pt=e[49],Wn=e[50]),F.useEffect(Pt,Wn);let ls;e[51]!==r||e[52]!==D?(ls=r.getPlaceholder(D,r.getCurrentScopeLabel?.()??void 0),e[51]=r,e[52]=D,e[53]=ls):ls=e[53];const ys=ls;let Qe;e[54]!==r?(Qe=r.getHelpItems(),e[54]=r,e[55]=Qe):Qe=e[55];const rt=Qe;if(!n)return null;let Mt,_t;e[56]!==s?(Mt=me=>{me.target===me.currentTarget&&s()},_t=f.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:s}),e[56]=s,e[57]=Mt,e[58]=_t):(Mt=e[57],_t=e[58]);let cn;e[59]===Symbol.for("react.memo_cache_sentinel")?(cn=f.jsx(jS,{size:20,className:"text-neutral-400 dark:text-neutral-500 shrink-0"}),e[59]=cn):cn=e[59];let fe;e[60]===Symbol.for("react.memo_cache_sentinel")?(fe=me=>o(me.target.value),e[60]=fe):fe=e[60];let we;e[61]!==bt||e[62]!==ys||e[63]!==i?(we=f.jsx("input",{ref:R,type:"text",className:"flex-1 bg-transparent text-neutral-900 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 outline-none text-base",value:i,onChange:fe,onKeyDown:bt,placeholder:ys,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1}),e[61]=bt,e[62]=ys,e[63]=i,e[64]=we):we=e[64];let qe;e[65]!==b?(qe=b&&f.jsx("div",{className:"shrink-0 w-4 h-4 border-2 border-neutral-300 dark:border-neutral-600 border-t-neutral-500 dark:border-t-neutral-400 rounded-full animate-spin"}),e[65]=b,e[66]=qe):qe=e[66];let Ze;e[67]!==we||e[68]!==qe?(Ze=f.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 border-b border-neutral-200 dark:border-neutral-700",children:[cn,we,qe]}),e[67]=we,e[68]=qe,e[69]=Ze):Ze=e[69];let ct;e[70]!==c||e[71]!==Je||e[72]!==rt||e[73]!==b||e[74]!==T||e[75]!==D||e[76]!==W?(ct=f.jsx("div",{ref:B,className:"max-h-[60vh] overflow-y-auto",children:T.length===0?f.jsx("div",{className:"px-4 py-8 text-center text-neutral-500 dark:text-neutral-400",children:b?"Searching...":W.length>0&&(D==="search"||D==="searchAll")&&W.length<2?"Type at least 2 characters to search":W.length>0?"No results found":f.jsxs("div",{className:"space-y-2",children:[f.jsx("p",{children:"Type to search or use prefixes:"}),f.jsx("div",{className:"text-sm space-y-1",children:rt.map(Cre)})]})}):f.jsx("div",{className:"py-2",children:T.map((me,Pe)=>{const st=me.icon,it=Pe===c;return f.jsxs("div",{"data-index":Pe,onClick:()=>Je(me),className:`flex items-center gap-3 px-4 py-2.5 cursor-pointer ${it?"bg-neutral-100 dark:bg-neutral-800":"hover:bg-neutral-50 dark:hover:bg-neutral-800/50"}`,children:[f.jsx(st,{size:18,className:`shrink-0 ${me.type==="namespace"?"text-blue-500":me.type==="resource"?"text-green-500":"text-neutral-400 dark:text-neutral-500"}`}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"text-sm text-neutral-900 dark:text-neutral-100 truncate",children:me.label}),me.sublabel&&f.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate",children:me.sublabel})]}),f.jsxs("div",{className:"shrink-0 text-xs text-neutral-400 dark:text-neutral-500",children:[me.type==="resource-type"&&"Type",me.type==="namespace"&&"Namespace",me.type==="resource"&&"Resource"]})]},me.id)})})}),e[70]=c,e[71]=Je,e[72]=rt,e[73]=b,e[74]=T,e[75]=D,e[76]=W,e[77]=ct):ct=e[77];let en;e[78]===Symbol.for("react.memo_cache_sentinel")?(en=f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("span",{children:[f.jsx("kbd",{className:"px-1 py-0.5 bg-neutral-100 dark:bg-neutral-800 rounded",children:""})," Navigate"]}),f.jsxs("span",{children:[f.jsx("kbd",{className:"px-1 py-0.5 bg-neutral-100 dark:bg-neutral-800 rounded",children:""})," Select"]}),f.jsxs("span",{children:[f.jsx("kbd",{className:"px-1 py-0.5 bg-neutral-100 dark:bg-neutral-800 rounded",children:"esc"})," Close"]})]}),e[78]=en):en=e[78];let se;e[79]!==r||e[80]!==D?(se=r.getCurrentScopeLabel?.()&&D==="search"&&f.jsxs("span",{children:["Scope: ",r.getCurrentScopeLabel()]}),e[79]=r,e[80]=D,e[81]=se):se=e[81];let ie;e[82]!==se?(ie=f.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-t border-neutral-200 dark:border-neutral-700 text-xs text-neutral-400 dark:text-neutral-500",children:[en,se]}),e[82]=se,e[83]=ie):ie=e[83];let he;e[84]!==Ze||e[85]!==ct||e[86]!==ie?(he=f.jsxs("div",{className:"relative w-full max-w-2xl mx-4 bg-white dark:bg-neutral-900 rounded-xl shadow-2xl border border-neutral-200 dark:border-neutral-700 overflow-hidden",children:[Ze,ct,ie]}),e[84]=Ze,e[85]=ct,e[86]=ie,e[87]=he):he=e[87];let Se;return e[88]!==Mt||e[89]!==_t||e[90]!==he?(Se=LB.createPortal(f.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-[15vh]",onClick:Mt,children:[_t,he]}),document.body),e[88]=Mt,e[89]=_t,e[90]=he,e[91]=Se):Se=e[91],Se}function Cre(t){return f.jsxs("p",{children:[f.jsx("kbd",{className:"px-1.5 py-0.5 bg-neutral-100 dark:bg-neutral-800 rounded text-xs",children:t.prefix})," ",t.label]},t.prefix)}function Nre(t){return Math.max(t-1,0)}function Are(t,e){return e.prefix.length-t.prefix.length}function Ere(t){return t||!0}function jre(t){const e=Me.c(12),{children:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=new Set,e[0]=s):s=e[0];const[r,i]=F.useState(s);let o;e[1]!==r?(o=k=>r.has(k),e[1]=r,e[2]=o):o=e[2];const c=o;let d;e[3]===Symbol.for("react.memo_cache_sentinel")?(d=k=>{i(C=>{const N=new Set(C);return N.add(k),N})},e[3]=d):d=e[3];const h=d;let g;e[4]===Symbol.for("react.memo_cache_sentinel")?(g=k=>{i(C=>{const N=new Set(C);return N.delete(k),N})},e[4]=g):g=e[4];const m=g;let b;e[5]===Symbol.for("react.memo_cache_sentinel")?(b=k=>{i(C=>{const N=new Set(C);return N.has(k)?N.delete(k):N.add(k),N})},e[5]=b):b=e[5];const y=b;let w;e[6]!==c||e[7]!==r?(w={openPanels:r,isOpen:c,open:h,close:m,toggle:y},e[6]=c,e[7]=r,e[8]=w):w=e[8];const x=w;let S;return e[9]!==n||e[10]!==x?(S=f.jsx(YT.Provider,{value:x,children:n}),e[9]=n,e[10]=x,e[11]=S):S=e[11],S}function OT(t){return t.group?`${t.name}.${t.group}`:t.name}function Tre(t){const e=Me.c(30),{children:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=sl(),e[0]=s):s=e[0];const r=s;let i;e[1]===Symbol.for("react.memo_cache_sentinel")?(i=()=>r.defaultContext||r.contexts[0]?.name||"",e[1]=i):i=e[1];const[o,c]=F.useState(i);let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=()=>r.defaultNamespace,e[2]=d):d=e[2];const[h,g]=F.useState(d),[m,b]=F.useState(null),y=F.useRef(void 0),w=F.useRef(null);let x,S;e[3]!==o?(x=()=>o?a$(o):Promise.resolve({items:[]}),S=[o],e[3]=o,e[4]=x,e[5]=S):(x=e[4],S=e[5]);const{data:k}=GT(x,S);let C;e[6]!==k?.items?(C=k?.items||[],e[6]=k?.items,e[7]=C):C=e[7];const N=C;let R,B;e[8]!==N?(R=()=>{if(y.current&&N.length>0){const I=y.current;N.some(J=>J.metadata?.name===I)&&g(I),y.current=void 0}},B=[N],e[8]=N,e[9]=R,e[10]=B):(R=e[9],B=e[10]),F.useEffect(R,B),o&&r$(o);let E;e[11]!==o||e[12]!==h||e[13]!==m?(E=I=>{t$(o),xK(o),y.current=h,w.current=m?OT(m):null,c(I),g(void 0),b(null)},e[11]=o,e[12]=h,e[13]=m,e[14]=E):E=e[14];const z=E;let U,Y;e[15]!==o?(U=()=>{if(w.current&&o){const I=w.current;w.current=null,_l(o,I.split(".")[0]).then(L=>{L&&OT(L)===I&&b(L)}).catch(Rre)}},Y=[o],e[15]=o,e[16]=U,e[17]=Y):(U=e[16],Y=e[17]),F.useEffect(U,Y);let D;e[18]!==o?(D={getResource:(I,L,J)=>zx(o,I,L,J),getResourceList:(I,L)=>Dg(o,I,L),getResourceTable:(I,L)=>RS(o,I,L),getResourceEvents:(I,L)=>Hx(o,I,L),updateResource:(I,L,J,G)=>KT(o,I,L,J,G)},e[18]=o,e[19]=D):D=e[19];const W=D;let V;e[20]!==W||e[21]!==z||e[22]!==N||e[23]!==o||e[24]!==h||e[25]!==m?(V={context:o,contexts:r.contexts,namespace:h,namespaces:N,selectedResource:m,setContext:z,setNamespace:g,setSelectedResource:b,api:W},e[20]=W,e[21]=z,e[22]=N,e[23]=o,e[24]=h,e[25]=m,e[26]=V):V=e[26];const q=V;let X;return e[27]!==n||e[28]!==q?(X=f.jsx(WT.Provider,{value:q,children:n}),e[27]=n,e[28]=q,e[29]=X):X=e[29],X}function Rre(){}const MT="bridge-app-mode";function Ore(t){const e=Me.c(8),{children:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=sl(),e[0]=s):s=e[0];const i=s.docker?.available??!1;let o;e[1]===Symbol.for("react.memo_cache_sentinel")?(o=()=>localStorage.getItem(MT)==="docker"&&i?"docker":"kubernetes",e[1]=o):o=e[1];const[c,d]=F.useState(o);let h;e[2]===Symbol.for("react.memo_cache_sentinel")?(h=w=>{w==="docker"&&!i||(d(w),localStorage.setItem(MT,w))},e[2]=h):h=e[2];const g=h,m=c==="docker"&&!i?"kubernetes":c;c!==m&&d(m);let b;e[3]!==m?(b={mode:m,setMode:g,dockerAvailable:i},e[3]=m,e[4]=b):b=e[4];let y;return e[5]!==n||e[6]!==b?(y=f.jsx(qT.Provider,{value:b,children:n}),e[5]=n,e[6]=b,e[7]=y):y=e[7],y}function Mre(){const t=Me.c(33),{mode:e}=TS(),{context:n,namespace:s,namespaces:r,setNamespace:i,selectedResource:o,setSelectedResource:c}=ei(),[d,h]=F.useState(!1),[g,m]=F.useState("containers");let b;t[0]===Symbol.for("react.memo_cache_sentinel")?(b=()=>{h(!1)},t[0]=b):b=t[0];const y=b;let w;e:{if(e==="docker"){let q;t[1]===Symbol.for("react.memo_cache_sentinel")?(q=Kse({onSelectResource:m,onClose:y}),t[1]=q):q=t[1],w=q;break e}let V;t[2]!==n||t[3]!==s||t[4]!==r||t[5]!==i||t[6]!==c?(V=sX({context:n,namespace:s,namespaces:r,setNamespace:i,setSelectedResource:c,onClose:y}),t[2]=n,t[3]=s,t[4]=r,t[5]=i,t[6]=c,t[7]=V):V=t[7],w=V}const x=w;let S;t[8]!==c?(S=V=>{c(V)},t[8]=c,t[9]=S):S=t[9];const k=S;let C,N;t[10]===Symbol.for("react.memo_cache_sentinel")?(C=()=>{const V=q=>{(q.metaKey||q.ctrlKey)&&q.key==="k"&&(q.preventDefault(),h(Bre))};return document.addEventListener("keydown",V),()=>document.removeEventListener("keydown",V)},N=[],t[10]=C,t[11]=N):(C=t[10],N=t[11]),F.useEffect(C,N);const R=o===null,B=R?"overview":`${o.group||""}/${o.name}`;let E;t[12]!==R||t[13]!==e||t[14]!==s||t[15]!==B||t[16]!==g||t[17]!==o?(E=()=>e==="docker"?f.jsx(are,{resourceType:g}):R?f.jsxs("main",{className:"flex-1 flex flex-col h-full min-w-0",children:[f.jsxs("header",{className:"shrink-0 h-14 flex items-center justify-between px-5 mt-2",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("h2",{className:"text-lg font-medium text-neutral-900 dark:text-neutral-100",children:"Overview"}),s&&f.jsx("span",{className:"px-2.5 py-0.5 rounded-md text-xs bg-neutral-200/80 text-neutral-500 dark:bg-neutral-800 dark:text-neutral-400",children:s})]}),f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("button",{onClick:()=>h(!0),className:"p-2 rounded-md text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 transition-colors",title:"Command Palette (K)",children:f.jsx(jS,{size:18})})})]}),f.jsx("section",{className:"flex-1 overflow-hidden min-h-0",children:s?f.jsx(hre,{}):f.jsx(Sre,{})})]}):f.jsx(bse,{resource:o},B),t[12]=R,t[13]=e,t[14]=s,t[15]=B,t[16]=g,t[17]=o,t[18]=E):E=t[18];const z=E;let U;t[19]!==k||t[20]!==R||t[21]!==g||t[22]!==o?(U=f.jsx("div",{className:"py-2 pl-2 shrink-0 h-full",children:f.jsx(x$,{selectedResource:o,onSelectResource:k,isOverviewSelected:R,selectedDockerResource:g,onSelectDockerResource:m})}),t[19]=k,t[20]=R,t[21]=g,t[22]=o,t[23]=U):U=t[23];let Y;t[24]!==z?(Y=z(),t[24]=z,t[25]=Y):Y=t[25];let D;t[26]!==x||t[27]!==d?(D=f.jsx(kre,{isOpen:d,onClose:y,adapter:x}),t[26]=x,t[27]=d,t[28]=D):D=t[28];let W;return t[29]!==U||t[30]!==Y||t[31]!==D?(W=f.jsxs("div",{className:"flex h-screen overflow-hidden bg-neutral-50 text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100",children:[U,Y,D]}),t[29]=U,t[30]=Y,t[31]=D,t[32]=W):W=t[32],W}function Bre(t){return!t}function Dre(){const t=Me.c(3),{context:e}=ei();if(!e){let s;return t[0]===Symbol.for("react.memo_cache_sentinel")?(s=f.jsx("div",{className:"flex h-screen items-center justify-center bg-neutral-50 text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100",children:f.jsx("p",{className:"text-neutral-500",children:"No Kubernetes contexts available"})}),t[0]=s):s=t[0],s}let n;return t[1]!==e?(n=f.jsx(Mre,{},e),t[1]=e,t[2]=n):n=t[2],n}function Lre(){const t=Me.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=f.jsx(Tre,{children:f.jsx(jre,{children:f.jsx(Ore,{children:f.jsx(Dre,{})})})}),t[0]=e):e=t[0],e}l$().then(()=>{KI.createRoot(document.getElementById("root")).render(f.jsx(F.StrictMode,{children:f.jsx(Lre,{})}))});
