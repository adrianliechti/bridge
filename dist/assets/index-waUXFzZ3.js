(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();var b5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var nb={exports:{}},Sh={};var x5;function eI(){if(x5)return Sh;x5=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,r,a){var o=null;if(a!==void 0&&(o=""+a),r.key!==void 0&&(o=""+r.key),"key"in r){a={};for(var c in r)c!=="key"&&(a[c]=r[c])}else a=r;return r=a.ref,{$$typeof:t,type:s,key:o,ref:r!==void 0?r:null,props:a}}return Sh.Fragment=e,Sh.jsx=n,Sh.jsxs=n,Sh}var _5;function tI(){return _5||(_5=1,nb.exports=eI()),nb.exports}var f=tI(),sb={exports:{}},lt={};var w5;function nI(){if(w5)return lt;w5=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),v=Symbol.iterator;function y(T){return T===null||typeof T!="object"?null:(T=v&&T[v]||T["@@iterator"],typeof T=="function"?T:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function k(T,H,N){this.props=T,this.context=H,this.refs=S,this.updater=N||_}k.prototype.isReactComponent={},k.prototype.setState=function(T,H){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,H,"setState")},k.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function C(){}C.prototype=k.prototype;function E(T,H,N){this.props=T,this.context=H,this.refs=S,this.updater=N||_}var B=E.prototype=new C;B.constructor=E,w(B,k.prototype),B.isPureReactComponent=!0;var D=Array.isArray;function j(){}var P={H:null,A:null,T:null,S:null},U=Object.prototype.hasOwnProperty;function X(T,H,N){var Y=N.ref;return{$$typeof:t,type:T,key:H,ref:Y!==void 0?Y:null,props:N}}function $(T,H){return X(T.type,H,T.props)}function Z(T){return typeof T=="object"&&T!==null&&T.$$typeof===t}function F(T){var H={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(N){return H[N]})}var W=/\/+/g;function Q(T,H){return typeof T=="object"&&T!==null&&T.key!=null?F(""+T.key):H.toString(36)}function V(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(j,j):(T.status="pending",T.then(function(H){T.status==="pending"&&(T.status="fulfilled",T.value=H)},function(H){T.status==="pending"&&(T.status="rejected",T.reason=H)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function M(T,H,N,Y,oe){var ee=typeof T;(ee==="undefined"||ee==="boolean")&&(T=null);var de=!1;if(T===null)de=!0;else switch(ee){case"bigint":case"string":case"number":de=!0;break;case"object":switch(T.$$typeof){case t:case e:de=!0;break;case g:return de=T._init,M(de(T._payload),H,N,Y,oe)}}if(de)return oe=oe(T),de=Y===""?"."+Q(T,0):Y,D(oe)?(N="",de!=null&&(N=de.replace(W,"$&/")+"/"),M(oe,H,N,"",function(Fe){return Fe})):oe!=null&&(Z(oe)&&(oe=$(oe,N+(oe.key==null||T&&T.key===oe.key?"":(""+oe.key).replace(W,"$&/")+"/")+de)),H.push(oe)),1;de=0;var we=Y===""?".":Y+":";if(D(T))for(var Se=0;Se<T.length;Se++)Y=T[Se],ee=we+Q(Y,Se),de+=M(Y,H,N,ee,oe);else if(Se=y(T),typeof Se=="function")for(T=Se.call(T),Se=0;!(Y=T.next()).done;)Y=Y.value,ee=we+Q(Y,Se++),de+=M(Y,H,N,ee,oe);else if(ee==="object"){if(typeof T.then=="function")return M(V(T),H,N,Y,oe);throw H=String(T),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return de}function G(T,H,N){if(T==null)return T;var Y=[],oe=0;return M(T,Y,"","",function(ee){return H.call(N,ee,oe++)}),Y}function q(T){if(T._status===-1){var H=T._result;H=H(),H.then(function(N){(T._status===0||T._status===-1)&&(T._status=1,T._result=N)},function(N){(T._status===0||T._status===-1)&&(T._status=2,T._result=N)}),T._status===-1&&(T._status=0,T._result=H)}if(T._status===1)return T._result.default;throw T._result}var z=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},O={map:G,forEach:function(T,H,N){G(T,function(){H.apply(this,arguments)},N)},count:function(T){var H=0;return G(T,function(){H++}),H},toArray:function(T){return G(T,function(H){return H})||[]},only:function(T){if(!Z(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return lt.Activity=m,lt.Children=O,lt.Component=k,lt.Fragment=n,lt.Profiler=r,lt.PureComponent=E,lt.StrictMode=s,lt.Suspense=h,lt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,lt.__COMPILER_RUNTIME={__proto__:null,c:function(T){return P.H.useMemoCache(T)}},lt.cache=function(T){return function(){return T.apply(null,arguments)}},lt.cacheSignal=function(){return null},lt.cloneElement=function(T,H,N){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var Y=w({},T.props),oe=T.key;if(H!=null)for(ee in H.key!==void 0&&(oe=""+H.key),H)!U.call(H,ee)||ee==="key"||ee==="__self"||ee==="__source"||ee==="ref"&&H.ref===void 0||(Y[ee]=H[ee]);var ee=arguments.length-2;if(ee===1)Y.children=N;else if(1<ee){for(var de=Array(ee),we=0;we<ee;we++)de[we]=arguments[we+2];Y.children=de}return X(T.type,oe,Y)},lt.createContext=function(T){return T={$$typeof:o,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:a,_context:T},T},lt.createElement=function(T,H,N){var Y,oe={},ee=null;if(H!=null)for(Y in H.key!==void 0&&(ee=""+H.key),H)U.call(H,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(oe[Y]=H[Y]);var de=arguments.length-2;if(de===1)oe.children=N;else if(1<de){for(var we=Array(de),Se=0;Se<de;Se++)we[Se]=arguments[Se+2];oe.children=we}if(T&&T.defaultProps)for(Y in de=T.defaultProps,de)oe[Y]===void 0&&(oe[Y]=de[Y]);return X(T,ee,oe)},lt.createRef=function(){return{current:null}},lt.forwardRef=function(T){return{$$typeof:c,render:T}},lt.isValidElement=Z,lt.lazy=function(T){return{$$typeof:g,_payload:{_status:-1,_result:T},_init:q}},lt.memo=function(T,H){return{$$typeof:d,type:T,compare:H===void 0?null:H}},lt.startTransition=function(T){var H=P.T,N={};P.T=N;try{var Y=T(),oe=P.S;oe!==null&&oe(N,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(j,z)}catch(ee){z(ee)}finally{H!==null&&N.types!==null&&(H.types=N.types),P.T=H}},lt.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},lt.use=function(T){return P.H.use(T)},lt.useActionState=function(T,H,N){return P.H.useActionState(T,H,N)},lt.useCallback=function(T,H){return P.H.useCallback(T,H)},lt.useContext=function(T){return P.H.useContext(T)},lt.useDebugValue=function(){},lt.useDeferredValue=function(T,H){return P.H.useDeferredValue(T,H)},lt.useEffect=function(T,H){return P.H.useEffect(T,H)},lt.useEffectEvent=function(T){return P.H.useEffectEvent(T)},lt.useId=function(){return P.H.useId()},lt.useImperativeHandle=function(T,H,N){return P.H.useImperativeHandle(T,H,N)},lt.useInsertionEffect=function(T,H){return P.H.useInsertionEffect(T,H)},lt.useLayoutEffect=function(T,H){return P.H.useLayoutEffect(T,H)},lt.useMemo=function(T,H){return P.H.useMemo(T,H)},lt.useOptimistic=function(T,H){return P.H.useOptimistic(T,H)},lt.useReducer=function(T,H,N){return P.H.useReducer(T,H,N)},lt.useRef=function(T){return P.H.useRef(T)},lt.useState=function(T){return P.H.useState(T)},lt.useSyncExternalStore=function(T,H,N){return P.H.useSyncExternalStore(T,H,N)},lt.useTransition=function(){return P.H.useTransition()},lt.version="19.2.3",lt}var S5;function gg(){return S5||(S5=1,sb.exports=nI()),sb.exports}var K=gg();const Wr=lS(K);var rb={exports:{}},kh={},ib={exports:{}},ab={};var k5;function sI(){return k5||(k5=1,(function(t){function e(M,G){var q=M.length;M.push(G);e:for(;0<q;){var z=q-1>>>1,O=M[z];if(0<r(O,G))M[z]=G,M[q]=O,q=z;else break e}}function n(M){return M.length===0?null:M[0]}function s(M){if(M.length===0)return null;var G=M[0],q=M.pop();if(q!==G){M[0]=q;e:for(var z=0,O=M.length,T=O>>>1;z<T;){var H=2*(z+1)-1,N=M[H],Y=H+1,oe=M[Y];if(0>r(N,q))Y<O&&0>r(oe,N)?(M[z]=oe,M[Y]=q,z=Y):(M[z]=N,M[H]=q,z=H);else if(Y<O&&0>r(oe,q))M[z]=oe,M[Y]=q,z=Y;else break e}}return G}function r(M,G){var q=M.sortIndex-G.sortIndex;return q!==0?q:M.id-G.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var h=[],d=[],g=1,m=null,v=3,y=!1,_=!1,w=!1,S=!1,k=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function B(M){for(var G=n(d);G!==null;){if(G.callback===null)s(d);else if(G.startTime<=M)s(d),G.sortIndex=G.expirationTime,e(h,G);else break;G=n(d)}}function D(M){if(w=!1,B(M),!_)if(n(h)!==null)_=!0,j||(j=!0,F());else{var G=n(d);G!==null&&V(D,G.startTime-M)}}var j=!1,P=-1,U=5,X=-1;function $(){return S?!0:!(t.unstable_now()-X<U)}function Z(){if(S=!1,j){var M=t.unstable_now();X=M;var G=!0;try{e:{_=!1,w&&(w=!1,C(P),P=-1),y=!0;var q=v;try{t:{for(B(M),m=n(h);m!==null&&!(m.expirationTime>M&&$());){var z=m.callback;if(typeof z=="function"){m.callback=null,v=m.priorityLevel;var O=z(m.expirationTime<=M);if(M=t.unstable_now(),typeof O=="function"){m.callback=O,B(M),G=!0;break t}m===n(h)&&s(h),B(M)}else s(h);m=n(h)}if(m!==null)G=!0;else{var T=n(d);T!==null&&V(D,T.startTime-M),G=!1}}break e}finally{m=null,v=q,y=!1}G=void 0}}finally{G?F():j=!1}}}var F;if(typeof E=="function")F=function(){E(Z)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Q=W.port2;W.port1.onmessage=Z,F=function(){Q.postMessage(null)}}else F=function(){k(Z,0)};function V(M,G){P=k(function(){M(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(M){switch(v){case 1:case 2:case 3:var G=3;break;default:G=v}var q=v;v=G;try{return M()}finally{v=q}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(M,G){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var q=v;v=M;try{return G()}finally{v=q}},t.unstable_scheduleCallback=function(M,G,q){var z=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?z+q:z):q=z,M){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=q+O,M={id:g++,callback:G,priorityLevel:M,startTime:q,expirationTime:O,sortIndex:-1},q>z?(M.sortIndex=q,e(d,M),n(h)===null&&M===n(d)&&(w?(C(P),P=-1):w=!0,V(D,q-z))):(M.sortIndex=O,e(h,M),_||y||(_=!0,j||(j=!0,F()))),M},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(M){var G=v;return function(){var q=v;v=G;try{return M.apply(this,arguments)}finally{v=q}}}})(ab)),ab}var C5;function rI(){return C5||(C5=1,ib.exports=sI()),ib.exports}var lb={exports:{}},os={};var N5;function iI(){if(N5)return os;N5=1;var t=gg();function e(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)d+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(h,d,g){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:m==null?null:""+m,children:h,containerInfo:d,implementation:g}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(h,d){if(h==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return os.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,os.createPortal=function(h,d){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(h,d,null,g)},os.flushSync=function(h){var d=o.T,g=s.p;try{if(o.T=null,s.p=2,h)return h()}finally{o.T=d,s.p=g,s.d.f()}},os.preconnect=function(h,d){typeof h=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,s.d.C(h,d))},os.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},os.preinit=function(h,d){if(typeof h=="string"&&d&&typeof d.as=="string"){var g=d.as,m=c(g,d.crossOrigin),v=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;g==="style"?s.d.S(h,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:m,integrity:v,fetchPriority:y}):g==="script"&&s.d.X(h,{crossOrigin:m,integrity:v,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},os.preinitModule=function(h,d){if(typeof h=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var g=c(d.as,d.crossOrigin);s.d.M(h,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&s.d.M(h)},os.preload=function(h,d){if(typeof h=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var g=d.as,m=c(g,d.crossOrigin);s.d.L(h,g,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},os.preloadModule=function(h,d){if(typeof h=="string")if(d){var g=c(d.as,d.crossOrigin);s.d.m(h,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else s.d.m(h)},os.requestFormReset=function(h){s.d.r(h)},os.unstable_batchedUpdates=function(h,d){return h(d)},os.useFormState=function(h,d,g){return o.H.useFormState(h,d,g)},os.useFormStatus=function(){return o.H.useHostTransitionStatus()},os.version="19.2.3",os}var A5;function oT(){if(A5)return lb.exports;A5=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),lb.exports=iI(),lb.exports}var E5;function aI(){if(E5)return kh;E5=1;var t=rI(),e=gg(),n=oT();function s(i){var l="https://react.dev/errors/"+i;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)l+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+i+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var l=i,u=i;if(i.alternate)for(;l.return;)l=l.return;else{i=l;do l=i,(l.flags&4098)!==0&&(u=l.return),i=l.return;while(i)}return l.tag===3?u:null}function o(i){if(i.tag===13){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function c(i){if(i.tag===31){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function h(i){if(a(i)!==i)throw Error(s(188))}function d(i){var l=i.alternate;if(!l){if(l=a(i),l===null)throw Error(s(188));return l!==i?null:i}for(var u=i,p=l;;){var b=u.return;if(b===null)break;var x=b.alternate;if(x===null){if(p=b.return,p!==null){u=p;continue}break}if(b.child===x.child){for(x=b.child;x;){if(x===u)return h(b),i;if(x===p)return h(b),l;x=x.sibling}throw Error(s(188))}if(u.return!==p.return)u=b,p=x;else{for(var A=!1,L=b.child;L;){if(L===u){A=!0,u=b,p=x;break}if(L===p){A=!0,p=b,u=x;break}L=L.sibling}if(!A){for(L=x.child;L;){if(L===u){A=!0,u=x,p=b;break}if(L===p){A=!0,p=x,u=b;break}L=L.sibling}if(!A)throw Error(s(189))}}if(u.alternate!==p)throw Error(s(190))}if(u.tag!==3)throw Error(s(188));return u.stateNode.current===u?i:l}function g(i){var l=i.tag;if(l===5||l===26||l===27||l===6)return i;for(i=i.child;i!==null;){if(l=g(i),l!==null)return l;i=i.sibling}return null}var m=Object.assign,v=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),E=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function F(i){return i===null||typeof i!="object"?null:(i=Z&&i[Z]||i["@@iterator"],typeof i=="function"?i:null)}var W=Symbol.for("react.client.reference");function Q(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===W?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case k:return"Profiler";case S:return"StrictMode";case D:return"Suspense";case j:return"SuspenseList";case X:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case _:return"Portal";case E:return i.displayName||"Context";case C:return(i._context.displayName||"Context")+".Consumer";case B:var l=i.render;return i=i.displayName,i||(i=l.displayName||l.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case P:return l=i.displayName||null,l!==null?l:Q(i.type)||"Memo";case U:l=i._payload,i=i._init;try{return Q(i(l))}catch{}}return null}var V=Array.isArray,M=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},z=[],O=-1;function T(i){return{current:i}}function H(i){0>O||(i.current=z[O],z[O]=null,O--)}function N(i,l){O++,z[O]=i.current,i.current=l}var Y=T(null),oe=T(null),ee=T(null),de=T(null);function we(i,l){switch(N(ee,l),N(oe,i),N(Y,null),l.nodeType){case 9:case 11:i=(i=l.documentElement)&&(i=i.namespaceURI)?U4(i):0;break;default:if(i=l.tagName,l=l.namespaceURI)l=U4(l),i=V4(l,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}H(Y),N(Y,i)}function Se(){H(Y),H(oe),H(ee)}function Fe(i){i.memoizedState!==null&&N(de,i);var l=Y.current,u=V4(l,i.type);l!==u&&(N(oe,i),N(Y,u))}function xe(i){oe.current===i&&(H(Y),H(oe)),de.current===i&&(H(de),bh._currentValue=q)}var qe,je;function Qe(i){if(qe===void 0)try{throw Error()}catch(u){var l=u.stack.trim().match(/\n( *(at )?)/);qe=l&&l[1]||"",je=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+qe+i+je}var nt=!1;function Lt(i,l){if(!i||nt)return"";nt=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(l){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(he){var ue=he}Reflect.construct(i,[],ye)}else{try{ye.call()}catch(he){ue=he}i.call(ye.prototype)}}else{try{throw Error()}catch(he){ue=he}(ye=i())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(he){if(he&&ue&&typeof he.stack=="string")return[he.stack,ue.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=p.DetermineComponentFrameRoot(),A=x[0],L=x[1];if(A&&L){var J=A.split(`
`),le=L.split(`
`);for(b=p=0;p<J.length&&!J[p].includes("DetermineComponentFrameRoot");)p++;for(;b<le.length&&!le[b].includes("DetermineComponentFrameRoot");)b++;if(p===J.length||b===le.length)for(p=J.length-1,b=le.length-1;1<=p&&0<=b&&J[p]!==le[b];)b--;for(;1<=p&&0<=b;p--,b--)if(J[p]!==le[b]){if(p!==1||b!==1)do if(p--,b--,0>b||J[p]!==le[b]){var me=`
`+J[p].replace(" at new "," at ");return i.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",i.displayName)),me}while(1<=p&&0<=b);break}}}finally{nt=!1,Error.prepareStackTrace=u}return(u=i?i.displayName||i.name:"")?Qe(u):""}function Et(i,l){switch(i.tag){case 26:case 27:case 5:return Qe(i.type);case 16:return Qe("Lazy");case 13:return i.child!==l&&l!==null?Qe("Suspense Fallback"):Qe("Suspense");case 19:return Qe("SuspenseList");case 0:case 15:return Lt(i.type,!1);case 11:return Lt(i.type.render,!1);case 1:return Lt(i.type,!0);case 31:return Qe("Activity");default:return""}}function qn(i){try{var l="",u=null;do l+=Et(i,u),u=i,i=i.return;while(i);return l}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var As=Object.prototype.hasOwnProperty,Ks=t.unstable_scheduleCallback,et=t.unstable_cancelCallback,at=t.unstable_shouldYield,Zt=t.unstable_requestPaint,Ot=t.unstable_now,Kn=t.unstable_getCurrentPriorityLevel,pe=t.unstable_ImmediatePriority,_e=t.unstable_UserBlockingPriority,Ge=t.unstable_NormalPriority,it=t.unstable_LowPriority,wt=t.unstable_IdlePriority,An=t.log,re=t.unstable_setDisableYieldValue,ae=null,fe=null;function Ce(i){if(typeof An=="function"&&re(i),fe&&typeof fe.setStrictMode=="function")try{fe.setStrictMode(ae,i)}catch{}}var Re=Math.clz32?Math.clz32:gt,It=Math.log,Bt=Math.LN2;function gt(i){return i>>>=0,i===0?32:31-(It(i)/Bt|0)|0}var Be=256,De=262144,Pe=4194304;function ze(i){var l=i&42;if(l!==0)return l;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function dt(i,l,u){var p=i.pendingLanes;if(p===0)return 0;var b=0,x=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var L=p&134217727;return L!==0?(p=L&~x,p!==0?b=ze(p):(A&=L,A!==0?b=ze(A):u||(u=L&~i,u!==0&&(b=ze(u))))):(L=p&~x,L!==0?b=ze(L):A!==0?b=ze(A):u||(u=p&~i,u!==0&&(b=ze(u)))),b===0?0:l!==0&&l!==b&&(l&x)===0&&(x=b&-b,u=l&-l,x>=u||x===32&&(u&4194048)!==0)?l:b}function Mt(i,l){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&l)===0}function sn(i,l){switch(i){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Es(){var i=Pe;return Pe<<=1,(Pe&62914560)===0&&(Pe=4194304),i}function jo(i){for(var l=[],u=0;31>u;u++)l.push(i);return l}function yl(i,l){i.pendingLanes|=l,l!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Fy(i,l,u,p,b,x){var A=i.pendingLanes;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=u,i.entangledLanes&=u,i.errorRecoveryDisabledLanes&=u,i.shellSuspendCounter=0;var L=i.entanglements,J=i.expirationTimes,le=i.hiddenUpdates;for(u=A&~u;0<u;){var me=31-Re(u),ye=1<<me;L[me]=0,J[me]=-1;var ue=le[me];if(ue!==null)for(le[me]=null,me=0;me<ue.length;me++){var he=ue[me];he!==null&&(he.lane&=-536870913)}u&=~ye}p!==0&&kk(i,p,0),x!==0&&b===0&&i.tag!==0&&(i.suspendedLanes|=x&~(A&~l))}function kk(i,l,u){i.pendingLanes|=l,i.suspendedLanes&=~l;var p=31-Re(l);i.entangledLanes|=l,i.entanglements[p]=i.entanglements[p]|1073741824|u&261930}function Ck(i,l){var u=i.entangledLanes|=l;for(i=i.entanglements;u;){var p=31-Re(u),b=1<<p;b&l|i[p]&l&&(i[p]|=l),u&=~b}}function Nk(i,l){var u=l&-l;return u=(u&42)!==0?1:qy(u),(u&(i.suspendedLanes|l))!==0?0:u}function qy(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ky(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Ak(){var i=G.p;return i!==0?i:(i=window.event,i===void 0?32:d5(i.type))}function Ek(i,l){var u=G.p;try{return G.p=i,l()}finally{G.p=u}}var ya=Math.random().toString(36).slice(2),Wn="__reactFiber$"+ya,js="__reactProps$"+ya,To="__reactContainer$"+ya,Wy="__reactEvents$"+ya,VD="__reactListeners$"+ya,FD="__reactHandles$"+ya,jk="__reactResources$"+ya,Mu="__reactMarker$"+ya;function Gy(i){delete i[Wn],delete i[js],delete i[Wy],delete i[VD],delete i[FD]}function Ro(i){var l=i[Wn];if(l)return l;for(var u=i.parentNode;u;){if(l=u[To]||u[Wn]){if(u=l.alternate,l.child!==null||u!==null&&u.child!==null)for(i=X4(i);i!==null;){if(u=i[Wn])return u;i=X4(i)}return l}i=u,u=i.parentNode}return null}function Oo(i){if(i=i[Wn]||i[To]){var l=i.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return i}return null}function Du(i){var l=i.tag;if(l===5||l===26||l===27||l===6)return i.stateNode;throw Error(s(33))}function Bo(i){var l=i[jk];return l||(l=i[jk]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function In(i){i[Mu]=!0}var Tk=new Set,Rk={};function vl(i,l){Mo(i,l),Mo(i+"Capture",l)}function Mo(i,l){for(Rk[i]=l,i=0;i<l.length;i++)Tk.add(l[i])}var qD=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ok={},Bk={};function KD(i){return As.call(Bk,i)?!0:As.call(Ok,i)?!1:qD.test(i)?Bk[i]=!0:(Ok[i]=!0,!1)}function Gf(i,l,u){if(KD(l))if(u===null)i.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":i.removeAttribute(l);return;case"boolean":var p=l.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){i.removeAttribute(l);return}}i.setAttribute(l,""+u)}}function Yf(i,l,u){if(u===null)i.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttribute(l,""+u)}}function ji(i,l,u,p){if(p===null)i.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttributeNS(l,u,""+p)}}function gr(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Mk(i){var l=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function WD(i,l,u){var p=Object.getOwnPropertyDescriptor(i.constructor.prototype,l);if(!i.hasOwnProperty(l)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var b=p.get,x=p.set;return Object.defineProperty(i,l,{configurable:!0,get:function(){return b.call(this)},set:function(A){u=""+A,x.call(this,A)}}),Object.defineProperty(i,l,{enumerable:p.enumerable}),{getValue:function(){return u},setValue:function(A){u=""+A},stopTracking:function(){i._valueTracker=null,delete i[l]}}}}function Yy(i){if(!i._valueTracker){var l=Mk(i)?"checked":"value";i._valueTracker=WD(i,l,""+i[l])}}function Dk(i){if(!i)return!1;var l=i._valueTracker;if(!l)return!0;var u=l.getValue(),p="";return i&&(p=Mk(i)?i.checked?"true":"false":i.value),i=p,i!==u?(l.setValue(i),!0):!1}function Xf(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var GD=/[\n"\\]/g;function yr(i){return i.replace(GD,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Xy(i,l,u,p,b,x,A,L){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),l!=null?A==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+gr(l)):i.value!==""+gr(l)&&(i.value=""+gr(l)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),l!=null?Jy(i,A,gr(l)):u!=null?Jy(i,A,gr(u)):p!=null&&i.removeAttribute("value"),b==null&&x!=null&&(i.defaultChecked=!!x),b!=null&&(i.checked=b&&typeof b!="function"&&typeof b!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?i.name=""+gr(L):i.removeAttribute("name")}function Lk(i,l,u,p,b,x,A,L){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(i.type=x),l!=null||u!=null){if(!(x!=="submit"&&x!=="reset"||l!=null)){Yy(i);return}u=u!=null?""+gr(u):"",l=l!=null?""+gr(l):u,L||l===i.value||(i.value=l),i.defaultValue=l}p=p??b,p=typeof p!="function"&&typeof p!="symbol"&&!!p,i.checked=L?i.checked:!!p,i.defaultChecked=!!p,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),Yy(i)}function Jy(i,l,u){l==="number"&&Xf(i.ownerDocument)===i||i.defaultValue===""+u||(i.defaultValue=""+u)}function Do(i,l,u,p){if(i=i.options,l){l={};for(var b=0;b<u.length;b++)l["$"+u[b]]=!0;for(u=0;u<i.length;u++)b=l.hasOwnProperty("$"+i[u].value),i[u].selected!==b&&(i[u].selected=b),b&&p&&(i[u].defaultSelected=!0)}else{for(u=""+gr(u),l=null,b=0;b<i.length;b++){if(i[b].value===u){i[b].selected=!0,p&&(i[b].defaultSelected=!0);return}l!==null||i[b].disabled||(l=i[b])}l!==null&&(l.selected=!0)}}function Ik(i,l,u){if(l!=null&&(l=""+gr(l),l!==i.value&&(i.value=l),u==null)){i.defaultValue!==l&&(i.defaultValue=l);return}i.defaultValue=u!=null?""+gr(u):""}function Pk(i,l,u,p){if(l==null){if(p!=null){if(u!=null)throw Error(s(92));if(V(p)){if(1<p.length)throw Error(s(93));p=p[0]}u=p}u==null&&(u=""),l=u}u=gr(l),i.defaultValue=u,p=i.textContent,p===u&&p!==""&&p!==null&&(i.value=p),Yy(i)}function Lo(i,l){if(l){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=l;return}}i.textContent=l}var YD=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zk(i,l,u){var p=l.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?p?i.setProperty(l,""):l==="float"?i.cssFloat="":i[l]="":p?i.setProperty(l,u):typeof u!="number"||u===0||YD.has(l)?l==="float"?i.cssFloat=u:i[l]=(""+u).trim():i[l]=u+"px"}function $k(i,l,u){if(l!=null&&typeof l!="object")throw Error(s(62));if(i=i.style,u!=null){for(var p in u)!u.hasOwnProperty(p)||l!=null&&l.hasOwnProperty(p)||(p.indexOf("--")===0?i.setProperty(p,""):p==="float"?i.cssFloat="":i[p]="");for(var b in l)p=l[b],l.hasOwnProperty(b)&&u[b]!==p&&zk(i,b,p)}else for(var x in l)l.hasOwnProperty(x)&&zk(i,x,l[x])}function Qy(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var XD=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),JD=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jf(i){return JD.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Ti(){}var Zy=null;function e1(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Io=null,Po=null;function Hk(i){var l=Oo(i);if(l&&(i=l.stateNode)){var u=i[js]||null;e:switch(i=l.stateNode,l.type){case"input":if(Xy(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),l=u.name,u.type==="radio"&&l!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+yr(""+l)+'"][type="radio"]'),l=0;l<u.length;l++){var p=u[l];if(p!==i&&p.form===i.form){var b=p[js]||null;if(!b)throw Error(s(90));Xy(p,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(l=0;l<u.length;l++)p=u[l],p.form===i.form&&Dk(p)}break e;case"textarea":Ik(i,u.value,u.defaultValue);break e;case"select":l=u.value,l!=null&&Do(i,!!u.multiple,l,!1)}}}var t1=!1;function Uk(i,l,u){if(t1)return i(l,u);t1=!0;try{var p=i(l);return p}finally{if(t1=!1,(Io!==null||Po!==null)&&(Pp(),Io&&(l=Io,i=Po,Po=Io=null,Hk(l),i)))for(l=0;l<i.length;l++)Hk(i[l])}}function Lu(i,l){var u=i.stateNode;if(u===null)return null;var p=u[js]||null;if(p===null)return null;u=p[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(s(231,l,typeof u));return u}var Ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),n1=!1;if(Ri)try{var Iu={};Object.defineProperty(Iu,"passive",{get:function(){n1=!0}}),window.addEventListener("test",Iu,Iu),window.removeEventListener("test",Iu,Iu)}catch{n1=!1}var va=null,s1=null,Qf=null;function Vk(){if(Qf)return Qf;var i,l=s1,u=l.length,p,b="value"in va?va.value:va.textContent,x=b.length;for(i=0;i<u&&l[i]===b[i];i++);var A=u-i;for(p=1;p<=A&&l[u-p]===b[x-p];p++);return Qf=b.slice(i,1<p?1-p:void 0)}function Zf(i){var l=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&l===13&&(i=13)):i=l,i===10&&(i=13),32<=i||i===13?i:0}function ep(){return!0}function Fk(){return!1}function Ts(i){function l(u,p,b,x,A){this._reactName=u,this._targetInst=b,this.type=p,this.nativeEvent=x,this.target=A,this.currentTarget=null;for(var L in i)i.hasOwnProperty(L)&&(u=i[L],this[L]=u?u(x):x[L]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?ep:Fk,this.isPropagationStopped=Fk,this}return m(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=ep)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=ep)},persist:function(){},isPersistent:ep}),l}var bl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tp=Ts(bl),Pu=m({},bl,{view:0,detail:0}),QD=Ts(Pu),r1,i1,zu,np=m({},Pu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:l1,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==zu&&(zu&&i.type==="mousemove"?(r1=i.screenX-zu.screenX,i1=i.screenY-zu.screenY):i1=r1=0,zu=i),r1)},movementY:function(i){return"movementY"in i?i.movementY:i1}}),qk=Ts(np),ZD=m({},np,{dataTransfer:0}),e8=Ts(ZD),t8=m({},Pu,{relatedTarget:0}),a1=Ts(t8),n8=m({},bl,{animationName:0,elapsedTime:0,pseudoElement:0}),s8=Ts(n8),r8=m({},bl,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),i8=Ts(r8),a8=m({},bl,{data:0}),Kk=Ts(a8),l8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},c8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function u8(i){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(i):(i=c8[i])?!!l[i]:!1}function l1(){return u8}var h8=m({},Pu,{key:function(i){if(i.key){var l=l8[i.key]||i.key;if(l!=="Unidentified")return l}return i.type==="keypress"?(i=Zf(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?o8[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:l1,charCode:function(i){return i.type==="keypress"?Zf(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Zf(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),d8=Ts(h8),f8=m({},np,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wk=Ts(f8),p8=m({},Pu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:l1}),m8=Ts(p8),g8=m({},bl,{propertyName:0,elapsedTime:0,pseudoElement:0}),y8=Ts(g8),v8=m({},np,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),b8=Ts(v8),x8=m({},bl,{newState:0,oldState:0}),_8=Ts(x8),w8=[9,13,27,32],o1=Ri&&"CompositionEvent"in window,$u=null;Ri&&"documentMode"in document&&($u=document.documentMode);var S8=Ri&&"TextEvent"in window&&!$u,Gk=Ri&&(!o1||$u&&8<$u&&11>=$u),Yk=" ",Xk=!1;function Jk(i,l){switch(i){case"keyup":return w8.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qk(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var zo=!1;function k8(i,l){switch(i){case"compositionend":return Qk(l);case"keypress":return l.which!==32?null:(Xk=!0,Yk);case"textInput":return i=l.data,i===Yk&&Xk?null:i;default:return null}}function C8(i,l){if(zo)return i==="compositionend"||!o1&&Jk(i,l)?(i=Vk(),Qf=s1=va=null,zo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Gk&&l.locale!=="ko"?null:l.data;default:return null}}var N8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zk(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l==="input"?!!N8[i.type]:l==="textarea"}function eC(i,l,u,p){Io?Po?Po.push(p):Po=[p]:Io=p,l=qp(l,"onChange"),0<l.length&&(u=new tp("onChange","change",null,u,p),i.push({event:u,listeners:l}))}var Hu=null,Uu=null;function A8(i){L4(i,0)}function sp(i){var l=Du(i);if(Dk(l))return i}function tC(i,l){if(i==="change")return l}var nC=!1;if(Ri){var c1;if(Ri){var u1="oninput"in document;if(!u1){var sC=document.createElement("div");sC.setAttribute("oninput","return;"),u1=typeof sC.oninput=="function"}c1=u1}else c1=!1;nC=c1&&(!document.documentMode||9<document.documentMode)}function rC(){Hu&&(Hu.detachEvent("onpropertychange",iC),Uu=Hu=null)}function iC(i){if(i.propertyName==="value"&&sp(Uu)){var l=[];eC(l,Uu,i,e1(i)),Uk(A8,l)}}function E8(i,l,u){i==="focusin"?(rC(),Hu=l,Uu=u,Hu.attachEvent("onpropertychange",iC)):i==="focusout"&&rC()}function j8(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return sp(Uu)}function T8(i,l){if(i==="click")return sp(l)}function R8(i,l){if(i==="input"||i==="change")return sp(l)}function O8(i,l){return i===l&&(i!==0||1/i===1/l)||i!==i&&l!==l}var Ws=typeof Object.is=="function"?Object.is:O8;function Vu(i,l){if(Ws(i,l))return!0;if(typeof i!="object"||i===null||typeof l!="object"||l===null)return!1;var u=Object.keys(i),p=Object.keys(l);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var b=u[p];if(!As.call(l,b)||!Ws(i[b],l[b]))return!1}return!0}function aC(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function lC(i,l){var u=aC(i);i=0;for(var p;u;){if(u.nodeType===3){if(p=i+u.textContent.length,i<=l&&p>=l)return{node:u,offset:l-i};i=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=aC(u)}}function oC(i,l){return i&&l?i===l?!0:i&&i.nodeType===3?!1:l&&l.nodeType===3?oC(i,l.parentNode):"contains"in i?i.contains(l):i.compareDocumentPosition?!!(i.compareDocumentPosition(l)&16):!1:!1}function cC(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var l=Xf(i.document);l instanceof i.HTMLIFrameElement;){try{var u=typeof l.contentWindow.location.href=="string"}catch{u=!1}if(u)i=l.contentWindow;else break;l=Xf(i.document)}return l}function h1(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l&&(l==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||l==="textarea"||i.contentEditable==="true")}var B8=Ri&&"documentMode"in document&&11>=document.documentMode,$o=null,d1=null,Fu=null,f1=!1;function uC(i,l,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;f1||$o==null||$o!==Xf(p)||(p=$o,"selectionStart"in p&&h1(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Fu&&Vu(Fu,p)||(Fu=p,p=qp(d1,"onSelect"),0<p.length&&(l=new tp("onSelect","select",null,l,u),i.push({event:l,listeners:p}),l.target=$o)))}function xl(i,l){var u={};return u[i.toLowerCase()]=l.toLowerCase(),u["Webkit"+i]="webkit"+l,u["Moz"+i]="moz"+l,u}var Ho={animationend:xl("Animation","AnimationEnd"),animationiteration:xl("Animation","AnimationIteration"),animationstart:xl("Animation","AnimationStart"),transitionrun:xl("Transition","TransitionRun"),transitionstart:xl("Transition","TransitionStart"),transitioncancel:xl("Transition","TransitionCancel"),transitionend:xl("Transition","TransitionEnd")},p1={},hC={};Ri&&(hC=document.createElement("div").style,"AnimationEvent"in window||(delete Ho.animationend.animation,delete Ho.animationiteration.animation,delete Ho.animationstart.animation),"TransitionEvent"in window||delete Ho.transitionend.transition);function _l(i){if(p1[i])return p1[i];if(!Ho[i])return i;var l=Ho[i],u;for(u in l)if(l.hasOwnProperty(u)&&u in hC)return p1[i]=l[u];return i}var dC=_l("animationend"),fC=_l("animationiteration"),pC=_l("animationstart"),M8=_l("transitionrun"),D8=_l("transitionstart"),L8=_l("transitioncancel"),mC=_l("transitionend"),gC=new Map,m1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");m1.push("scrollEnd");function $r(i,l){gC.set(i,l),vl(l,[i])}var rp=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},vr=[],Uo=0,g1=0;function ip(){for(var i=Uo,l=g1=Uo=0;l<i;){var u=vr[l];vr[l++]=null;var p=vr[l];vr[l++]=null;var b=vr[l];vr[l++]=null;var x=vr[l];if(vr[l++]=null,p!==null&&b!==null){var A=p.pending;A===null?b.next=b:(b.next=A.next,A.next=b),p.pending=b}x!==0&&yC(u,b,x)}}function ap(i,l,u,p){vr[Uo++]=i,vr[Uo++]=l,vr[Uo++]=u,vr[Uo++]=p,g1|=p,i.lanes|=p,i=i.alternate,i!==null&&(i.lanes|=p)}function y1(i,l,u,p){return ap(i,l,u,p),lp(i)}function wl(i,l){return ap(i,null,null,l),lp(i)}function yC(i,l,u){i.lanes|=u;var p=i.alternate;p!==null&&(p.lanes|=u);for(var b=!1,x=i.return;x!==null;)x.childLanes|=u,p=x.alternate,p!==null&&(p.childLanes|=u),x.tag===22&&(i=x.stateNode,i===null||i._visibility&1||(b=!0)),i=x,x=x.return;return i.tag===3?(x=i.stateNode,b&&l!==null&&(b=31-Re(u),i=x.hiddenUpdates,p=i[b],p===null?i[b]=[l]:p.push(l),l.lane=u|536870912),x):null}function lp(i){if(50<dh)throw dh=0,Nv=null,Error(s(185));for(var l=i.return;l!==null;)i=l,l=i.return;return i.tag===3?i.stateNode:null}var Vo={};function I8(i,l,u,p){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gs(i,l,u,p){return new I8(i,l,u,p)}function v1(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Oi(i,l){var u=i.alternate;return u===null?(u=Gs(i.tag,l,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=l,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&65011712,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,l=i.dependencies,u.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u.refCleanup=i.refCleanup,u}function vC(i,l){i.flags&=65011714;var u=i.alternate;return u===null?(i.childLanes=0,i.lanes=l,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,l=u.dependencies,i.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),i}function op(i,l,u,p,b,x){var A=0;if(p=i,typeof i=="function")v1(i)&&(A=1);else if(typeof i=="string")A=UL(i,u,Y.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case X:return i=Gs(31,u,l,b),i.elementType=X,i.lanes=x,i;case w:return Sl(u.children,b,x,l);case S:A=8,b|=24;break;case k:return i=Gs(12,u,l,b|2),i.elementType=k,i.lanes=x,i;case D:return i=Gs(13,u,l,b),i.elementType=D,i.lanes=x,i;case j:return i=Gs(19,u,l,b),i.elementType=j,i.lanes=x,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case E:A=10;break e;case C:A=9;break e;case B:A=11;break e;case P:A=14;break e;case U:A=16,p=null;break e}A=29,u=Error(s(130,i===null?"null":typeof i,"")),p=null}return l=Gs(A,u,l,b),l.elementType=i,l.type=p,l.lanes=x,l}function Sl(i,l,u,p){return i=Gs(7,i,p,l),i.lanes=u,i}function b1(i,l,u){return i=Gs(6,i,null,l),i.lanes=u,i}function bC(i){var l=Gs(18,null,null,0);return l.stateNode=i,l}function x1(i,l,u){return l=Gs(4,i.children!==null?i.children:[],i.key,l),l.lanes=u,l.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},l}var xC=new WeakMap;function br(i,l){if(typeof i=="object"&&i!==null){var u=xC.get(i);return u!==void 0?u:(l={value:i,source:l,stack:qn(l)},xC.set(i,l),l)}return{value:i,source:l,stack:qn(l)}}var Fo=[],qo=0,cp=null,qu=0,xr=[],_r=0,ba=null,ti=1,ni="";function Bi(i,l){Fo[qo++]=qu,Fo[qo++]=cp,cp=i,qu=l}function _C(i,l,u){xr[_r++]=ti,xr[_r++]=ni,xr[_r++]=ba,ba=i;var p=ti;i=ni;var b=32-Re(p)-1;p&=~(1<<b),u+=1;var x=32-Re(l)+b;if(30<x){var A=b-b%5;x=(p&(1<<A)-1).toString(32),p>>=A,b-=A,ti=1<<32-Re(l)+b|u<<b|p,ni=x+i}else ti=1<<x|u<<b|p,ni=i}function _1(i){i.return!==null&&(Bi(i,1),_C(i,1,0))}function w1(i){for(;i===cp;)cp=Fo[--qo],Fo[qo]=null,qu=Fo[--qo],Fo[qo]=null;for(;i===ba;)ba=xr[--_r],xr[_r]=null,ni=xr[--_r],xr[_r]=null,ti=xr[--_r],xr[_r]=null}function wC(i,l){xr[_r++]=ti,xr[_r++]=ni,xr[_r++]=ba,ti=l.id,ni=l.overflow,ba=i}var Gn=null,Yt=null,Ct=!1,xa=null,wr=!1,S1=Error(s(519));function _a(i){var l=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ku(br(l,i)),S1}function SC(i){var l=i.stateNode,u=i.type,p=i.memoizedProps;switch(l[Wn]=i,l[js]=p,u){case"dialog":xt("cancel",l),xt("close",l);break;case"iframe":case"object":case"embed":xt("load",l);break;case"video":case"audio":for(u=0;u<ph.length;u++)xt(ph[u],l);break;case"source":xt("error",l);break;case"img":case"image":case"link":xt("error",l),xt("load",l);break;case"details":xt("toggle",l);break;case"input":xt("invalid",l),Lk(l,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":xt("invalid",l);break;case"textarea":xt("invalid",l),Pk(l,p.value,p.defaultValue,p.children)}u=p.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||l.textContent===""+u||p.suppressHydrationWarning===!0||$4(l.textContent,u)?(p.popover!=null&&(xt("beforetoggle",l),xt("toggle",l)),p.onScroll!=null&&xt("scroll",l),p.onScrollEnd!=null&&xt("scrollend",l),p.onClick!=null&&(l.onclick=Ti),l=!0):l=!1,l||_a(i,!0)}function kC(i){for(Gn=i.return;Gn;)switch(Gn.tag){case 5:case 31:case 13:wr=!1;return;case 27:case 3:wr=!0;return;default:Gn=Gn.return}}function Ko(i){if(i!==Gn)return!1;if(!Ct)return kC(i),Ct=!0,!1;var l=i.tag,u;if((u=l!==3&&l!==27)&&((u=l===5)&&(u=i.type,u=!(u!=="form"&&u!=="button")||Hv(i.type,i.memoizedProps)),u=!u),u&&Yt&&_a(i),kC(i),l===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Yt=Y4(i)}else if(l===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Yt=Y4(i)}else l===27?(l=Yt,Da(i.type)?(i=Kv,Kv=null,Yt=i):Yt=l):Yt=Gn?kr(i.stateNode.nextSibling):null;return!0}function kl(){Yt=Gn=null,Ct=!1}function k1(){var i=xa;return i!==null&&(Ms===null?Ms=i:Ms.push.apply(Ms,i),xa=null),i}function Ku(i){xa===null?xa=[i]:xa.push(i)}var C1=T(null),Cl=null,Mi=null;function wa(i,l,u){N(C1,l._currentValue),l._currentValue=u}function Di(i){i._currentValue=C1.current,H(C1)}function N1(i,l,u){for(;i!==null;){var p=i.alternate;if((i.childLanes&l)!==l?(i.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),i===u)break;i=i.return}}function A1(i,l,u,p){var b=i.child;for(b!==null&&(b.return=i);b!==null;){var x=b.dependencies;if(x!==null){var A=b.child;x=x.firstContext;e:for(;x!==null;){var L=x;x=b;for(var J=0;J<l.length;J++)if(L.context===l[J]){x.lanes|=u,L=x.alternate,L!==null&&(L.lanes|=u),N1(x.return,u,i),p||(A=null);break e}x=L.next}}else if(b.tag===18){if(A=b.return,A===null)throw Error(s(341));A.lanes|=u,x=A.alternate,x!==null&&(x.lanes|=u),N1(A,u,i),A=null}else A=b.child;if(A!==null)A.return=b;else for(A=b;A!==null;){if(A===i){A=null;break}if(b=A.sibling,b!==null){b.return=A.return,A=b;break}A=A.return}b=A}}function Wo(i,l,u,p){i=null;for(var b=l,x=!1;b!==null;){if(!x){if((b.flags&524288)!==0)x=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var A=b.alternate;if(A===null)throw Error(s(387));if(A=A.memoizedProps,A!==null){var L=b.type;Ws(b.pendingProps.value,A.value)||(i!==null?i.push(L):i=[L])}}else if(b===de.current){if(A=b.alternate,A===null)throw Error(s(387));A.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(i!==null?i.push(bh):i=[bh])}b=b.return}i!==null&&A1(l,i,u,p),l.flags|=262144}function up(i){for(i=i.firstContext;i!==null;){if(!Ws(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Nl(i){Cl=i,Mi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Yn(i){return CC(Cl,i)}function hp(i,l){return Cl===null&&Nl(i),CC(i,l)}function CC(i,l){var u=l._currentValue;if(l={context:l,memoizedValue:u,next:null},Mi===null){if(i===null)throw Error(s(308));Mi=l,i.dependencies={lanes:0,firstContext:l},i.flags|=524288}else Mi=Mi.next=l;return u}var P8=typeof AbortController<"u"?AbortController:function(){var i=[],l=this.signal={aborted:!1,addEventListener:function(u,p){i.push(p)}};this.abort=function(){l.aborted=!0,i.forEach(function(u){return u()})}},z8=t.unstable_scheduleCallback,$8=t.unstable_NormalPriority,vn={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function E1(){return{controller:new P8,data:new Map,refCount:0}}function Wu(i){i.refCount--,i.refCount===0&&z8($8,function(){i.controller.abort()})}var Gu=null,j1=0,Go=0,Yo=null;function H8(i,l){if(Gu===null){var u=Gu=[];j1=0,Go=Ov(),Yo={status:"pending",value:void 0,then:function(p){u.push(p)}}}return j1++,l.then(NC,NC),l}function NC(){if(--j1===0&&Gu!==null){Yo!==null&&(Yo.status="fulfilled");var i=Gu;Gu=null,Go=0,Yo=null;for(var l=0;l<i.length;l++)(0,i[l])()}}function U8(i,l){var u=[],p={status:"pending",value:null,reason:null,then:function(b){u.push(b)}};return i.then(function(){p.status="fulfilled",p.value=l;for(var b=0;b<u.length;b++)(0,u[b])(l)},function(b){for(p.status="rejected",p.reason=b,b=0;b<u.length;b++)(0,u[b])(void 0)}),p}var AC=M.S;M.S=function(i,l){u4=Ot(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&H8(i,l),AC!==null&&AC(i,l)};var Al=T(null);function T1(){var i=Al.current;return i!==null?i:qt.pooledCache}function dp(i,l){l===null?N(Al,Al.current):N(Al,l.pool)}function EC(){var i=T1();return i===null?null:{parent:vn._currentValue,pool:i}}var Xo=Error(s(460)),R1=Error(s(474)),fp=Error(s(542)),pp={then:function(){}};function jC(i){return i=i.status,i==="fulfilled"||i==="rejected"}function TC(i,l,u){switch(u=i[u],u===void 0?i.push(l):u!==l&&(l.then(Ti,Ti),l=u),l.status){case"fulfilled":return l.value;case"rejected":throw i=l.reason,OC(i),i;default:if(typeof l.status=="string")l.then(Ti,Ti);else{if(i=qt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=l,i.status="pending",i.then(function(p){if(l.status==="pending"){var b=l;b.status="fulfilled",b.value=p}},function(p){if(l.status==="pending"){var b=l;b.status="rejected",b.reason=p}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw i=l.reason,OC(i),i}throw jl=l,Xo}}function El(i){try{var l=i._init;return l(i._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(jl=u,Xo):u}}var jl=null;function RC(){if(jl===null)throw Error(s(459));var i=jl;return jl=null,i}function OC(i){if(i===Xo||i===fp)throw Error(s(483))}var Jo=null,Yu=0;function mp(i){var l=Yu;return Yu+=1,Jo===null&&(Jo=[]),TC(Jo,i,l)}function Xu(i,l){l=l.props.ref,i.ref=l!==void 0?l:null}function gp(i,l){throw l.$$typeof===v?Error(s(525)):(i=Object.prototype.toString.call(l),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":i)))}function BC(i){function l(se,te){if(i){var ie=se.deletions;ie===null?(se.deletions=[te],se.flags|=16):ie.push(te)}}function u(se,te){if(!i)return null;for(;te!==null;)l(se,te),te=te.sibling;return null}function p(se){for(var te=new Map;se!==null;)se.key!==null?te.set(se.key,se):te.set(se.index,se),se=se.sibling;return te}function b(se,te){return se=Oi(se,te),se.index=0,se.sibling=null,se}function x(se,te,ie){return se.index=ie,i?(ie=se.alternate,ie!==null?(ie=ie.index,ie<te?(se.flags|=67108866,te):ie):(se.flags|=67108866,te)):(se.flags|=1048576,te)}function A(se){return i&&se.alternate===null&&(se.flags|=67108866),se}function L(se,te,ie,ge){return te===null||te.tag!==6?(te=b1(ie,se.mode,ge),te.return=se,te):(te=b(te,ie),te.return=se,te)}function J(se,te,ie,ge){var Xe=ie.type;return Xe===w?me(se,te,ie.props.children,ge,ie.key):te!==null&&(te.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===U&&El(Xe)===te.type)?(te=b(te,ie.props),Xu(te,ie),te.return=se,te):(te=op(ie.type,ie.key,ie.props,null,se.mode,ge),Xu(te,ie),te.return=se,te)}function le(se,te,ie,ge){return te===null||te.tag!==4||te.stateNode.containerInfo!==ie.containerInfo||te.stateNode.implementation!==ie.implementation?(te=x1(ie,se.mode,ge),te.return=se,te):(te=b(te,ie.children||[]),te.return=se,te)}function me(se,te,ie,ge,Xe){return te===null||te.tag!==7?(te=Sl(ie,se.mode,ge,Xe),te.return=se,te):(te=b(te,ie),te.return=se,te)}function ye(se,te,ie){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return te=b1(""+te,se.mode,ie),te.return=se,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case y:return ie=op(te.type,te.key,te.props,null,se.mode,ie),Xu(ie,te),ie.return=se,ie;case _:return te=x1(te,se.mode,ie),te.return=se,te;case U:return te=El(te),ye(se,te,ie)}if(V(te)||F(te))return te=Sl(te,se.mode,ie,null),te.return=se,te;if(typeof te.then=="function")return ye(se,mp(te),ie);if(te.$$typeof===E)return ye(se,hp(se,te),ie);gp(se,te)}return null}function ue(se,te,ie,ge){var Xe=te!==null?te.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return Xe!==null?null:L(se,te,""+ie,ge);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case y:return ie.key===Xe?J(se,te,ie,ge):null;case _:return ie.key===Xe?le(se,te,ie,ge):null;case U:return ie=El(ie),ue(se,te,ie,ge)}if(V(ie)||F(ie))return Xe!==null?null:me(se,te,ie,ge,null);if(typeof ie.then=="function")return ue(se,te,mp(ie),ge);if(ie.$$typeof===E)return ue(se,te,hp(se,ie),ge);gp(se,ie)}return null}function he(se,te,ie,ge,Xe){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return se=se.get(ie)||null,L(te,se,""+ge,Xe);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case y:return se=se.get(ge.key===null?ie:ge.key)||null,J(te,se,ge,Xe);case _:return se=se.get(ge.key===null?ie:ge.key)||null,le(te,se,ge,Xe);case U:return ge=El(ge),he(se,te,ie,ge,Xe)}if(V(ge)||F(ge))return se=se.get(ie)||null,me(te,se,ge,Xe,null);if(typeof ge.then=="function")return he(se,te,ie,mp(ge),Xe);if(ge.$$typeof===E)return he(se,te,ie,hp(te,ge),Xe);gp(te,ge)}return null}function Ue(se,te,ie,ge){for(var Xe=null,jt=null,We=te,ft=te=0,kt=null;We!==null&&ft<ie.length;ft++){We.index>ft?(kt=We,We=null):kt=We.sibling;var Tt=ue(se,We,ie[ft],ge);if(Tt===null){We===null&&(We=kt);break}i&&We&&Tt.alternate===null&&l(se,We),te=x(Tt,te,ft),jt===null?Xe=Tt:jt.sibling=Tt,jt=Tt,We=kt}if(ft===ie.length)return u(se,We),Ct&&Bi(se,ft),Xe;if(We===null){for(;ft<ie.length;ft++)We=ye(se,ie[ft],ge),We!==null&&(te=x(We,te,ft),jt===null?Xe=We:jt.sibling=We,jt=We);return Ct&&Bi(se,ft),Xe}for(We=p(We);ft<ie.length;ft++)kt=he(We,se,ft,ie[ft],ge),kt!==null&&(i&&kt.alternate!==null&&We.delete(kt.key===null?ft:kt.key),te=x(kt,te,ft),jt===null?Xe=kt:jt.sibling=kt,jt=kt);return i&&We.forEach(function($a){return l(se,$a)}),Ct&&Bi(se,ft),Xe}function tt(se,te,ie,ge){if(ie==null)throw Error(s(151));for(var Xe=null,jt=null,We=te,ft=te=0,kt=null,Tt=ie.next();We!==null&&!Tt.done;ft++,Tt=ie.next()){We.index>ft?(kt=We,We=null):kt=We.sibling;var $a=ue(se,We,Tt.value,ge);if($a===null){We===null&&(We=kt);break}i&&We&&$a.alternate===null&&l(se,We),te=x($a,te,ft),jt===null?Xe=$a:jt.sibling=$a,jt=$a,We=kt}if(Tt.done)return u(se,We),Ct&&Bi(se,ft),Xe;if(We===null){for(;!Tt.done;ft++,Tt=ie.next())Tt=ye(se,Tt.value,ge),Tt!==null&&(te=x(Tt,te,ft),jt===null?Xe=Tt:jt.sibling=Tt,jt=Tt);return Ct&&Bi(se,ft),Xe}for(We=p(We);!Tt.done;ft++,Tt=ie.next())Tt=he(We,se,ft,Tt.value,ge),Tt!==null&&(i&&Tt.alternate!==null&&We.delete(Tt.key===null?ft:Tt.key),te=x(Tt,te,ft),jt===null?Xe=Tt:jt.sibling=Tt,jt=Tt);return i&&We.forEach(function(ZL){return l(se,ZL)}),Ct&&Bi(se,ft),Xe}function Vt(se,te,ie,ge){if(typeof ie=="object"&&ie!==null&&ie.type===w&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case y:e:{for(var Xe=ie.key;te!==null;){if(te.key===Xe){if(Xe=ie.type,Xe===w){if(te.tag===7){u(se,te.sibling),ge=b(te,ie.props.children),ge.return=se,se=ge;break e}}else if(te.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===U&&El(Xe)===te.type){u(se,te.sibling),ge=b(te,ie.props),Xu(ge,ie),ge.return=se,se=ge;break e}u(se,te);break}else l(se,te);te=te.sibling}ie.type===w?(ge=Sl(ie.props.children,se.mode,ge,ie.key),ge.return=se,se=ge):(ge=op(ie.type,ie.key,ie.props,null,se.mode,ge),Xu(ge,ie),ge.return=se,se=ge)}return A(se);case _:e:{for(Xe=ie.key;te!==null;){if(te.key===Xe)if(te.tag===4&&te.stateNode.containerInfo===ie.containerInfo&&te.stateNode.implementation===ie.implementation){u(se,te.sibling),ge=b(te,ie.children||[]),ge.return=se,se=ge;break e}else{u(se,te);break}else l(se,te);te=te.sibling}ge=x1(ie,se.mode,ge),ge.return=se,se=ge}return A(se);case U:return ie=El(ie),Vt(se,te,ie,ge)}if(V(ie))return Ue(se,te,ie,ge);if(F(ie)){if(Xe=F(ie),typeof Xe!="function")throw Error(s(150));return ie=Xe.call(ie),tt(se,te,ie,ge)}if(typeof ie.then=="function")return Vt(se,te,mp(ie),ge);if(ie.$$typeof===E)return Vt(se,te,hp(se,ie),ge);gp(se,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint"?(ie=""+ie,te!==null&&te.tag===6?(u(se,te.sibling),ge=b(te,ie),ge.return=se,se=ge):(u(se,te),ge=b1(ie,se.mode,ge),ge.return=se,se=ge),A(se)):u(se,te)}return function(se,te,ie,ge){try{Yu=0;var Xe=Vt(se,te,ie,ge);return Jo=null,Xe}catch(We){if(We===Xo||We===fp)throw We;var jt=Gs(29,We,null,se.mode);return jt.lanes=ge,jt.return=se,jt}}}var Tl=BC(!0),MC=BC(!1),Sa=!1;function O1(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function B1(i,l){i=i.updateQueue,l.updateQueue===i&&(l.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ka(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ca(i,l,u){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(Dt&2)!==0){var b=p.pending;return b===null?l.next=l:(l.next=b.next,b.next=l),p.pending=l,l=lp(i),yC(i,null,u),l}return ap(i,p,l,u),lp(i)}function Ju(i,l,u){if(l=l.updateQueue,l!==null&&(l=l.shared,(u&4194048)!==0)){var p=l.lanes;p&=i.pendingLanes,u|=p,l.lanes=u,Ck(i,u)}}function M1(i,l){var u=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var b=null,x=null;if(u=u.firstBaseUpdate,u!==null){do{var A={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};x===null?b=x=A:x=x.next=A,u=u.next}while(u!==null);x===null?b=x=l:x=x.next=l}else b=x=l;u={baseState:p.baseState,firstBaseUpdate:b,lastBaseUpdate:x,shared:p.shared,callbacks:p.callbacks},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=l:i.next=l,u.lastBaseUpdate=l}var D1=!1;function Qu(){if(D1){var i=Yo;if(i!==null)throw i}}function Zu(i,l,u,p){D1=!1;var b=i.updateQueue;Sa=!1;var x=b.firstBaseUpdate,A=b.lastBaseUpdate,L=b.shared.pending;if(L!==null){b.shared.pending=null;var J=L,le=J.next;J.next=null,A===null?x=le:A.next=le,A=J;var me=i.alternate;me!==null&&(me=me.updateQueue,L=me.lastBaseUpdate,L!==A&&(L===null?me.firstBaseUpdate=le:L.next=le,me.lastBaseUpdate=J))}if(x!==null){var ye=b.baseState;A=0,me=le=J=null,L=x;do{var ue=L.lane&-536870913,he=ue!==L.lane;if(he?(St&ue)===ue:(p&ue)===ue){ue!==0&&ue===Go&&(D1=!0),me!==null&&(me=me.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});e:{var Ue=i,tt=L;ue=l;var Vt=u;switch(tt.tag){case 1:if(Ue=tt.payload,typeof Ue=="function"){ye=Ue.call(Vt,ye,ue);break e}ye=Ue;break e;case 3:Ue.flags=Ue.flags&-65537|128;case 0:if(Ue=tt.payload,ue=typeof Ue=="function"?Ue.call(Vt,ye,ue):Ue,ue==null)break e;ye=m({},ye,ue);break e;case 2:Sa=!0}}ue=L.callback,ue!==null&&(i.flags|=64,he&&(i.flags|=8192),he=b.callbacks,he===null?b.callbacks=[ue]:he.push(ue))}else he={lane:ue,tag:L.tag,payload:L.payload,callback:L.callback,next:null},me===null?(le=me=he,J=ye):me=me.next=he,A|=ue;if(L=L.next,L===null){if(L=b.shared.pending,L===null)break;he=L,L=he.next,he.next=null,b.lastBaseUpdate=he,b.shared.pending=null}}while(!0);me===null&&(J=ye),b.baseState=J,b.firstBaseUpdate=le,b.lastBaseUpdate=me,x===null&&(b.shared.lanes=0),Ta|=A,i.lanes=A,i.memoizedState=ye}}function DC(i,l){if(typeof i!="function")throw Error(s(191,i));i.call(l)}function LC(i,l){var u=i.callbacks;if(u!==null)for(i.callbacks=null,i=0;i<u.length;i++)DC(u[i],l)}var Qo=T(null),yp=T(0);function IC(i,l){i=Fi,N(yp,i),N(Qo,l),Fi=i|l.baseLanes}function L1(){N(yp,Fi),N(Qo,Qo.current)}function I1(){Fi=yp.current,H(Qo),H(yp)}var Ys=T(null),Sr=null;function Na(i){var l=i.alternate;N(dn,dn.current&1),N(Ys,i),Sr===null&&(l===null||Qo.current!==null||l.memoizedState!==null)&&(Sr=i)}function P1(i){N(dn,dn.current),N(Ys,i),Sr===null&&(Sr=i)}function PC(i){i.tag===22?(N(dn,dn.current),N(Ys,i),Sr===null&&(Sr=i)):Aa()}function Aa(){N(dn,dn.current),N(Ys,Ys.current)}function Xs(i){H(Ys),Sr===i&&(Sr=null),H(dn)}var dn=T(0);function vp(i){for(var l=i;l!==null;){if(l.tag===13){var u=l.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Fv(u)||qv(u)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Li=0,ut=null,Ht=null,bn=null,bp=!1,Zo=!1,Rl=!1,xp=0,eh=0,ec=null,V8=0;function on(){throw Error(s(321))}function z1(i,l){if(l===null)return!1;for(var u=0;u<l.length&&u<i.length;u++)if(!Ws(i[u],l[u]))return!1;return!0}function $1(i,l,u,p,b,x){return Li=x,ut=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,M.H=i===null||i.memoizedState===null?_N:tv,Rl=!1,x=u(p,b),Rl=!1,Zo&&(x=$C(l,u,p,b)),zC(i),x}function zC(i){M.H=sh;var l=Ht!==null&&Ht.next!==null;if(Li=0,bn=Ht=ut=null,bp=!1,eh=0,ec=null,l)throw Error(s(300));i===null||xn||(i=i.dependencies,i!==null&&up(i)&&(xn=!0))}function $C(i,l,u,p){ut=i;var b=0;do{if(Zo&&(ec=null),eh=0,Zo=!1,25<=b)throw Error(s(301));if(b+=1,bn=Ht=null,i.updateQueue!=null){var x=i.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}M.H=wN,x=l(u,p)}while(Zo);return x}function F8(){var i=M.H,l=i.useState()[0];return l=typeof l.then=="function"?th(l):l,i=i.useState()[0],(Ht!==null?Ht.memoizedState:null)!==i&&(ut.flags|=1024),l}function H1(){var i=xp!==0;return xp=0,i}function U1(i,l,u){l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~u}function V1(i){if(bp){for(i=i.memoizedState;i!==null;){var l=i.queue;l!==null&&(l.pending=null),i=i.next}bp=!1}Li=0,bn=Ht=ut=null,Zo=!1,eh=xp=0,ec=null}function ms(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bn===null?ut.memoizedState=bn=i:bn=bn.next=i,bn}function fn(){if(Ht===null){var i=ut.alternate;i=i!==null?i.memoizedState:null}else i=Ht.next;var l=bn===null?ut.memoizedState:bn.next;if(l!==null)bn=l,Ht=i;else{if(i===null)throw ut.alternate===null?Error(s(467)):Error(s(310));Ht=i,i={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},bn===null?ut.memoizedState=bn=i:bn=bn.next=i}return bn}function _p(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function th(i){var l=eh;return eh+=1,ec===null&&(ec=[]),i=TC(ec,i,l),l=ut,(bn===null?l.memoizedState:bn.next)===null&&(l=l.alternate,M.H=l===null||l.memoizedState===null?_N:tv),i}function wp(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return th(i);if(i.$$typeof===E)return Yn(i)}throw Error(s(438,String(i)))}function F1(i){var l=null,u=ut.updateQueue;if(u!==null&&(l=u.memoCache),l==null){var p=ut.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(l={data:p.data.map(function(b){return b.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),u===null&&(u=_p(),ut.updateQueue=u),u.memoCache=l,u=l.data[l.index],u===void 0)for(u=l.data[l.index]=Array(i),p=0;p<i;p++)u[p]=$;return l.index++,u}function Ii(i,l){return typeof l=="function"?l(i):l}function Sp(i){var l=fn();return q1(l,Ht,i)}function q1(i,l,u){var p=i.queue;if(p===null)throw Error(s(311));p.lastRenderedReducer=u;var b=i.baseQueue,x=p.pending;if(x!==null){if(b!==null){var A=b.next;b.next=x.next,x.next=A}l.baseQueue=b=x,p.pending=null}if(x=i.baseState,b===null)i.memoizedState=x;else{l=b.next;var L=A=null,J=null,le=l,me=!1;do{var ye=le.lane&-536870913;if(ye!==le.lane?(St&ye)===ye:(Li&ye)===ye){var ue=le.revertLane;if(ue===0)J!==null&&(J=J.next={lane:0,revertLane:0,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),ye===Go&&(me=!0);else if((Li&ue)===ue){le=le.next,ue===Go&&(me=!0);continue}else ye={lane:0,revertLane:le.revertLane,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},J===null?(L=J=ye,A=x):J=J.next=ye,ut.lanes|=ue,Ta|=ue;ye=le.action,Rl&&u(x,ye),x=le.hasEagerState?le.eagerState:u(x,ye)}else ue={lane:ye,revertLane:le.revertLane,gesture:le.gesture,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},J===null?(L=J=ue,A=x):J=J.next=ue,ut.lanes|=ye,Ta|=ye;le=le.next}while(le!==null&&le!==l);if(J===null?A=x:J.next=L,!Ws(x,i.memoizedState)&&(xn=!0,me&&(u=Yo,u!==null)))throw u;i.memoizedState=x,i.baseState=A,i.baseQueue=J,p.lastRenderedState=x}return b===null&&(p.lanes=0),[i.memoizedState,p.dispatch]}function K1(i){var l=fn(),u=l.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=i;var p=u.dispatch,b=u.pending,x=l.memoizedState;if(b!==null){u.pending=null;var A=b=b.next;do x=i(x,A.action),A=A.next;while(A!==b);Ws(x,l.memoizedState)||(xn=!0),l.memoizedState=x,l.baseQueue===null&&(l.baseState=x),u.lastRenderedState=x}return[x,p]}function HC(i,l,u){var p=ut,b=fn(),x=Ct;if(x){if(u===void 0)throw Error(s(407));u=u()}else u=l();var A=!Ws((Ht||b).memoizedState,u);if(A&&(b.memoizedState=u,xn=!0),b=b.queue,Y1(FC.bind(null,p,b,i),[i]),b.getSnapshot!==l||A||bn!==null&&bn.memoizedState.tag&1){if(p.flags|=2048,tc(9,{destroy:void 0},VC.bind(null,p,b,u,l),null),qt===null)throw Error(s(349));x||(Li&127)!==0||UC(p,l,u)}return u}function UC(i,l,u){i.flags|=16384,i={getSnapshot:l,value:u},l=ut.updateQueue,l===null?(l=_p(),ut.updateQueue=l,l.stores=[i]):(u=l.stores,u===null?l.stores=[i]:u.push(i))}function VC(i,l,u,p){l.value=u,l.getSnapshot=p,qC(l)&&KC(i)}function FC(i,l,u){return u(function(){qC(l)&&KC(i)})}function qC(i){var l=i.getSnapshot;i=i.value;try{var u=l();return!Ws(i,u)}catch{return!0}}function KC(i){var l=wl(i,2);l!==null&&Ds(l,i,2)}function W1(i){var l=ms();if(typeof i=="function"){var u=i;if(i=u(),Rl){Ce(!0);try{u()}finally{Ce(!1)}}}return l.memoizedState=l.baseState=i,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:i},l}function WC(i,l,u,p){return i.baseState=u,q1(i,Ht,typeof p=="function"?p:Ii)}function q8(i,l,u,p,b){if(Np(i))throw Error(s(485));if(i=l.action,i!==null){var x={payload:b,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){x.listeners.push(A)}};M.T!==null?u(!0):x.isTransition=!1,p(x),u=l.pending,u===null?(x.next=l.pending=x,GC(l,x)):(x.next=u.next,l.pending=u.next=x)}}function GC(i,l){var u=l.action,p=l.payload,b=i.state;if(l.isTransition){var x=M.T,A={};M.T=A;try{var L=u(b,p),J=M.S;J!==null&&J(A,L),YC(i,l,L)}catch(le){G1(i,l,le)}finally{x!==null&&A.types!==null&&(x.types=A.types),M.T=x}}else try{x=u(b,p),YC(i,l,x)}catch(le){G1(i,l,le)}}function YC(i,l,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(p){XC(i,l,p)},function(p){return G1(i,l,p)}):XC(i,l,u)}function XC(i,l,u){l.status="fulfilled",l.value=u,JC(l),i.state=u,l=i.pending,l!==null&&(u=l.next,u===l?i.pending=null:(u=u.next,l.next=u,GC(i,u)))}function G1(i,l,u){var p=i.pending;if(i.pending=null,p!==null){p=p.next;do l.status="rejected",l.reason=u,JC(l),l=l.next;while(l!==p)}i.action=null}function JC(i){i=i.listeners;for(var l=0;l<i.length;l++)(0,i[l])()}function QC(i,l){return l}function ZC(i,l){if(Ct){var u=qt.formState;if(u!==null){e:{var p=ut;if(Ct){if(Yt){t:{for(var b=Yt,x=wr;b.nodeType!==8;){if(!x){b=null;break t}if(b=kr(b.nextSibling),b===null){b=null;break t}}x=b.data,b=x==="F!"||x==="F"?b:null}if(b){Yt=kr(b.nextSibling),p=b.data==="F!";break e}}_a(p)}p=!1}p&&(l=u[0])}}return u=ms(),u.memoizedState=u.baseState=l,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:QC,lastRenderedState:l},u.queue=p,u=vN.bind(null,ut,p),p.dispatch=u,p=W1(!1),x=ev.bind(null,ut,!1,p.queue),p=ms(),b={state:l,dispatch:null,action:i,pending:null},p.queue=b,u=q8.bind(null,ut,b,x,u),b.dispatch=u,p.memoizedState=i,[l,u,!1]}function eN(i){var l=fn();return tN(l,Ht,i)}function tN(i,l,u){if(l=q1(i,l,QC)[0],i=Sp(Ii)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var p=th(l)}catch(A){throw A===Xo?fp:A}else p=l;l=fn();var b=l.queue,x=b.dispatch;return u!==l.memoizedState&&(ut.flags|=2048,tc(9,{destroy:void 0},K8.bind(null,b,u),null)),[p,x,i]}function K8(i,l){i.action=l}function nN(i){var l=fn(),u=Ht;if(u!==null)return tN(l,u,i);fn(),l=l.memoizedState,u=fn();var p=u.queue.dispatch;return u.memoizedState=i,[l,p,!1]}function tc(i,l,u,p){return i={tag:i,create:u,deps:p,inst:l,next:null},l=ut.updateQueue,l===null&&(l=_p(),ut.updateQueue=l),u=l.lastEffect,u===null?l.lastEffect=i.next=i:(p=u.next,u.next=i,i.next=p,l.lastEffect=i),i}function sN(){return fn().memoizedState}function kp(i,l,u,p){var b=ms();ut.flags|=i,b.memoizedState=tc(1|l,{destroy:void 0},u,p===void 0?null:p)}function Cp(i,l,u,p){var b=fn();p=p===void 0?null:p;var x=b.memoizedState.inst;Ht!==null&&p!==null&&z1(p,Ht.memoizedState.deps)?b.memoizedState=tc(l,x,u,p):(ut.flags|=i,b.memoizedState=tc(1|l,x,u,p))}function rN(i,l){kp(8390656,8,i,l)}function Y1(i,l){Cp(2048,8,i,l)}function W8(i){ut.flags|=4;var l=ut.updateQueue;if(l===null)l=_p(),ut.updateQueue=l,l.events=[i];else{var u=l.events;u===null?l.events=[i]:u.push(i)}}function iN(i){var l=fn().memoizedState;return W8({ref:l,nextImpl:i}),function(){if((Dt&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}function aN(i,l){return Cp(4,2,i,l)}function lN(i,l){return Cp(4,4,i,l)}function oN(i,l){if(typeof l=="function"){i=i();var u=l(i);return function(){typeof u=="function"?u():l(null)}}if(l!=null)return i=i(),l.current=i,function(){l.current=null}}function cN(i,l,u){u=u!=null?u.concat([i]):null,Cp(4,4,oN.bind(null,l,i),u)}function X1(){}function uN(i,l){var u=fn();l=l===void 0?null:l;var p=u.memoizedState;return l!==null&&z1(l,p[1])?p[0]:(u.memoizedState=[i,l],i)}function hN(i,l){var u=fn();l=l===void 0?null:l;var p=u.memoizedState;if(l!==null&&z1(l,p[1]))return p[0];if(p=i(),Rl){Ce(!0);try{i()}finally{Ce(!1)}}return u.memoizedState=[p,l],p}function J1(i,l,u){return u===void 0||(Li&1073741824)!==0&&(St&261930)===0?i.memoizedState=l:(i.memoizedState=u,i=d4(),ut.lanes|=i,Ta|=i,u)}function dN(i,l,u,p){return Ws(u,l)?u:Qo.current!==null?(i=J1(i,u,p),Ws(i,l)||(xn=!0),i):(Li&42)===0||(Li&1073741824)!==0&&(St&261930)===0?(xn=!0,i.memoizedState=u):(i=d4(),ut.lanes|=i,Ta|=i,l)}function fN(i,l,u,p,b){var x=G.p;G.p=x!==0&&8>x?x:8;var A=M.T,L={};M.T=L,ev(i,!1,l,u);try{var J=b(),le=M.S;if(le!==null&&le(L,J),J!==null&&typeof J=="object"&&typeof J.then=="function"){var me=U8(J,p);nh(i,l,me,Zs(i))}else nh(i,l,p,Zs(i))}catch(ye){nh(i,l,{then:function(){},status:"rejected",reason:ye},Zs())}finally{G.p=x,A!==null&&L.types!==null&&(A.types=L.types),M.T=A}}function G8(){}function Q1(i,l,u,p){if(i.tag!==5)throw Error(s(476));var b=pN(i).queue;fN(i,b,l,q,u===null?G8:function(){return mN(i),u(p)})}function pN(i){var l=i.memoizedState;if(l!==null)return l;l={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:q},next:null};var u={};return l.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:u},next:null},i.memoizedState=l,i=i.alternate,i!==null&&(i.memoizedState=l),l}function mN(i){var l=pN(i);l.next===null&&(l=i.alternate.memoizedState),nh(i,l.next.queue,{},Zs())}function Z1(){return Yn(bh)}function gN(){return fn().memoizedState}function yN(){return fn().memoizedState}function Y8(i){for(var l=i.return;l!==null;){switch(l.tag){case 24:case 3:var u=Zs();i=ka(u);var p=Ca(l,i,u);p!==null&&(Ds(p,l,u),Ju(p,l,u)),l={cache:E1()},i.payload=l;return}l=l.return}}function X8(i,l,u){var p=Zs();u={lane:p,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Np(i)?bN(l,u):(u=y1(i,l,u,p),u!==null&&(Ds(u,i,p),xN(u,l,p)))}function vN(i,l,u){var p=Zs();nh(i,l,u,p)}function nh(i,l,u,p){var b={lane:p,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Np(i))bN(l,b);else{var x=i.alternate;if(i.lanes===0&&(x===null||x.lanes===0)&&(x=l.lastRenderedReducer,x!==null))try{var A=l.lastRenderedState,L=x(A,u);if(b.hasEagerState=!0,b.eagerState=L,Ws(L,A))return ap(i,l,b,0),qt===null&&ip(),!1}catch{}if(u=y1(i,l,b,p),u!==null)return Ds(u,i,p),xN(u,l,p),!0}return!1}function ev(i,l,u,p){if(p={lane:2,revertLane:Ov(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Np(i)){if(l)throw Error(s(479))}else l=y1(i,u,p,2),l!==null&&Ds(l,i,2)}function Np(i){var l=i.alternate;return i===ut||l!==null&&l===ut}function bN(i,l){Zo=bp=!0;var u=i.pending;u===null?l.next=l:(l.next=u.next,u.next=l),i.pending=l}function xN(i,l,u){if((u&4194048)!==0){var p=l.lanes;p&=i.pendingLanes,u|=p,l.lanes=u,Ck(i,u)}}var sh={readContext:Yn,use:wp,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useLayoutEffect:on,useInsertionEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useSyncExternalStore:on,useId:on,useHostTransitionStatus:on,useFormState:on,useActionState:on,useOptimistic:on,useMemoCache:on,useCacheRefresh:on};sh.useEffectEvent=on;var _N={readContext:Yn,use:wp,useCallback:function(i,l){return ms().memoizedState=[i,l===void 0?null:l],i},useContext:Yn,useEffect:rN,useImperativeHandle:function(i,l,u){u=u!=null?u.concat([i]):null,kp(4194308,4,oN.bind(null,l,i),u)},useLayoutEffect:function(i,l){return kp(4194308,4,i,l)},useInsertionEffect:function(i,l){kp(4,2,i,l)},useMemo:function(i,l){var u=ms();l=l===void 0?null:l;var p=i();if(Rl){Ce(!0);try{i()}finally{Ce(!1)}}return u.memoizedState=[p,l],p},useReducer:function(i,l,u){var p=ms();if(u!==void 0){var b=u(l);if(Rl){Ce(!0);try{u(l)}finally{Ce(!1)}}}else b=l;return p.memoizedState=p.baseState=b,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:b},p.queue=i,i=i.dispatch=X8.bind(null,ut,i),[p.memoizedState,i]},useRef:function(i){var l=ms();return i={current:i},l.memoizedState=i},useState:function(i){i=W1(i);var l=i.queue,u=vN.bind(null,ut,l);return l.dispatch=u,[i.memoizedState,u]},useDebugValue:X1,useDeferredValue:function(i,l){var u=ms();return J1(u,i,l)},useTransition:function(){var i=W1(!1);return i=fN.bind(null,ut,i.queue,!0,!1),ms().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,l,u){var p=ut,b=ms();if(Ct){if(u===void 0)throw Error(s(407));u=u()}else{if(u=l(),qt===null)throw Error(s(349));(St&127)!==0||UC(p,l,u)}b.memoizedState=u;var x={value:u,getSnapshot:l};return b.queue=x,rN(FC.bind(null,p,x,i),[i]),p.flags|=2048,tc(9,{destroy:void 0},VC.bind(null,p,x,u,l),null),u},useId:function(){var i=ms(),l=qt.identifierPrefix;if(Ct){var u=ni,p=ti;u=(p&~(1<<32-Re(p)-1)).toString(32)+u,l="_"+l+"R_"+u,u=xp++,0<u&&(l+="H"+u.toString(32)),l+="_"}else u=V8++,l="_"+l+"r_"+u.toString(32)+"_";return i.memoizedState=l},useHostTransitionStatus:Z1,useFormState:ZC,useActionState:ZC,useOptimistic:function(i){var l=ms();l.memoizedState=l.baseState=i;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=u,l=ev.bind(null,ut,!0,u),u.dispatch=l,[i,l]},useMemoCache:F1,useCacheRefresh:function(){return ms().memoizedState=Y8.bind(null,ut)},useEffectEvent:function(i){var l=ms(),u={impl:i};return l.memoizedState=u,function(){if((Dt&2)!==0)throw Error(s(440));return u.impl.apply(void 0,arguments)}}},tv={readContext:Yn,use:wp,useCallback:uN,useContext:Yn,useEffect:Y1,useImperativeHandle:cN,useInsertionEffect:aN,useLayoutEffect:lN,useMemo:hN,useReducer:Sp,useRef:sN,useState:function(){return Sp(Ii)},useDebugValue:X1,useDeferredValue:function(i,l){var u=fn();return dN(u,Ht.memoizedState,i,l)},useTransition:function(){var i=Sp(Ii)[0],l=fn().memoizedState;return[typeof i=="boolean"?i:th(i),l]},useSyncExternalStore:HC,useId:gN,useHostTransitionStatus:Z1,useFormState:eN,useActionState:eN,useOptimistic:function(i,l){var u=fn();return WC(u,Ht,i,l)},useMemoCache:F1,useCacheRefresh:yN};tv.useEffectEvent=iN;var wN={readContext:Yn,use:wp,useCallback:uN,useContext:Yn,useEffect:Y1,useImperativeHandle:cN,useInsertionEffect:aN,useLayoutEffect:lN,useMemo:hN,useReducer:K1,useRef:sN,useState:function(){return K1(Ii)},useDebugValue:X1,useDeferredValue:function(i,l){var u=fn();return Ht===null?J1(u,i,l):dN(u,Ht.memoizedState,i,l)},useTransition:function(){var i=K1(Ii)[0],l=fn().memoizedState;return[typeof i=="boolean"?i:th(i),l]},useSyncExternalStore:HC,useId:gN,useHostTransitionStatus:Z1,useFormState:nN,useActionState:nN,useOptimistic:function(i,l){var u=fn();return Ht!==null?WC(u,Ht,i,l):(u.baseState=i,[i,u.queue.dispatch])},useMemoCache:F1,useCacheRefresh:yN};wN.useEffectEvent=iN;function nv(i,l,u,p){l=i.memoizedState,u=u(p,l),u=u==null?l:m({},l,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var sv={enqueueSetState:function(i,l,u){i=i._reactInternals;var p=Zs(),b=ka(p);b.payload=l,u!=null&&(b.callback=u),l=Ca(i,b,p),l!==null&&(Ds(l,i,p),Ju(l,i,p))},enqueueReplaceState:function(i,l,u){i=i._reactInternals;var p=Zs(),b=ka(p);b.tag=1,b.payload=l,u!=null&&(b.callback=u),l=Ca(i,b,p),l!==null&&(Ds(l,i,p),Ju(l,i,p))},enqueueForceUpdate:function(i,l){i=i._reactInternals;var u=Zs(),p=ka(u);p.tag=2,l!=null&&(p.callback=l),l=Ca(i,p,u),l!==null&&(Ds(l,i,u),Ju(l,i,u))}};function SN(i,l,u,p,b,x,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,x,A):l.prototype&&l.prototype.isPureReactComponent?!Vu(u,p)||!Vu(b,x):!0}function kN(i,l,u,p){i=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(u,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(u,p),l.state!==i&&sv.enqueueReplaceState(l,l.state,null)}function Ol(i,l){var u=l;if("ref"in l){u={};for(var p in l)p!=="ref"&&(u[p]=l[p])}if(i=i.defaultProps){u===l&&(u=m({},u));for(var b in i)u[b]===void 0&&(u[b]=i[b])}return u}function CN(i){rp(i)}function NN(i){console.error(i)}function AN(i){rp(i)}function Ap(i,l){try{var u=i.onUncaughtError;u(l.value,{componentStack:l.stack})}catch(p){setTimeout(function(){throw p})}}function EN(i,l,u){try{var p=i.onCaughtError;p(u.value,{componentStack:u.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function rv(i,l,u){return u=ka(u),u.tag=3,u.payload={element:null},u.callback=function(){Ap(i,l)},u}function jN(i){return i=ka(i),i.tag=3,i}function TN(i,l,u,p){var b=u.type.getDerivedStateFromError;if(typeof b=="function"){var x=p.value;i.payload=function(){return b(x)},i.callback=function(){EN(l,u,p)}}var A=u.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){EN(l,u,p),typeof b!="function"&&(Ra===null?Ra=new Set([this]):Ra.add(this));var L=p.stack;this.componentDidCatch(p.value,{componentStack:L!==null?L:""})})}function J8(i,l,u,p,b){if(u.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(l=u.alternate,l!==null&&Wo(l,u,b,!0),u=Ys.current,u!==null){switch(u.tag){case 31:case 13:return Sr===null?zp():u.alternate===null&&cn===0&&(cn=3),u.flags&=-257,u.flags|=65536,u.lanes=b,p===pp?u.flags|=16384:(l=u.updateQueue,l===null?u.updateQueue=new Set([p]):l.add(p),jv(i,p,b)),!1;case 22:return u.flags|=65536,p===pp?u.flags|=16384:(l=u.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([p])},u.updateQueue=l):(u=l.retryQueue,u===null?l.retryQueue=new Set([p]):u.add(p)),jv(i,p,b)),!1}throw Error(s(435,u.tag))}return jv(i,p,b),zp(),!1}if(Ct)return l=Ys.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=b,p!==S1&&(i=Error(s(422),{cause:p}),Ku(br(i,u)))):(p!==S1&&(l=Error(s(423),{cause:p}),Ku(br(l,u))),i=i.current.alternate,i.flags|=65536,b&=-b,i.lanes|=b,p=br(p,u),b=rv(i.stateNode,p,b),M1(i,b),cn!==4&&(cn=2)),!1;var x=Error(s(520),{cause:p});if(x=br(x,u),hh===null?hh=[x]:hh.push(x),cn!==4&&(cn=2),l===null)return!0;p=br(p,u),u=l;do{switch(u.tag){case 3:return u.flags|=65536,i=b&-b,u.lanes|=i,i=rv(u.stateNode,p,i),M1(u,i),!1;case 1:if(l=u.type,x=u.stateNode,(u.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ra===null||!Ra.has(x))))return u.flags|=65536,b&=-b,u.lanes|=b,b=jN(b),TN(b,i,u,p),M1(u,b),!1}u=u.return}while(u!==null);return!1}var iv=Error(s(461)),xn=!1;function Xn(i,l,u,p){l.child=i===null?MC(l,null,u,p):Tl(l,i.child,u,p)}function RN(i,l,u,p,b){u=u.render;var x=l.ref;if("ref"in p){var A={};for(var L in p)L!=="ref"&&(A[L]=p[L])}else A=p;return Nl(l),p=$1(i,l,u,A,x,b),L=H1(),i!==null&&!xn?(U1(i,l,b),Pi(i,l,b)):(Ct&&L&&_1(l),l.flags|=1,Xn(i,l,p,b),l.child)}function ON(i,l,u,p,b){if(i===null){var x=u.type;return typeof x=="function"&&!v1(x)&&x.defaultProps===void 0&&u.compare===null?(l.tag=15,l.type=x,BN(i,l,x,p,b)):(i=op(u.type,null,p,l,l.mode,b),i.ref=l.ref,i.return=l,l.child=i)}if(x=i.child,!fv(i,b)){var A=x.memoizedProps;if(u=u.compare,u=u!==null?u:Vu,u(A,p)&&i.ref===l.ref)return Pi(i,l,b)}return l.flags|=1,i=Oi(x,p),i.ref=l.ref,i.return=l,l.child=i}function BN(i,l,u,p,b){if(i!==null){var x=i.memoizedProps;if(Vu(x,p)&&i.ref===l.ref)if(xn=!1,l.pendingProps=p=x,fv(i,b))(i.flags&131072)!==0&&(xn=!0);else return l.lanes=i.lanes,Pi(i,l,b)}return av(i,l,u,p,b)}function MN(i,l,u,p){var b=p.children,x=i!==null?i.memoizedState:null;if(i===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((l.flags&128)!==0){if(x=x!==null?x.baseLanes|u:u,i!==null){for(p=l.child=i.child,b=0;p!==null;)b=b|p.lanes|p.childLanes,p=p.sibling;p=b&~x}else p=0,l.child=null;return DN(i,l,x,u,p)}if((u&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},i!==null&&dp(l,x!==null?x.cachePool:null),x!==null?IC(l,x):L1(),PC(l);else return p=l.lanes=536870912,DN(i,l,x!==null?x.baseLanes|u:u,u,p)}else x!==null?(dp(l,x.cachePool),IC(l,x),Aa(),l.memoizedState=null):(i!==null&&dp(l,null),L1(),Aa());return Xn(i,l,b,u),l.child}function rh(i,l){return i!==null&&i.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function DN(i,l,u,p,b){var x=T1();return x=x===null?null:{parent:vn._currentValue,pool:x},l.memoizedState={baseLanes:u,cachePool:x},i!==null&&dp(l,null),L1(),PC(l),i!==null&&Wo(i,l,p,!0),l.childLanes=b,null}function Ep(i,l){return l=Tp({mode:l.mode,children:l.children},i.mode),l.ref=i.ref,i.child=l,l.return=i,l}function LN(i,l,u){return Tl(l,i.child,null,u),i=Ep(l,l.pendingProps),i.flags|=2,Xs(l),l.memoizedState=null,i}function Q8(i,l,u){var p=l.pendingProps,b=(l.flags&128)!==0;if(l.flags&=-129,i===null){if(Ct){if(p.mode==="hidden")return i=Ep(l,p),l.lanes=536870912,rh(null,i);if(P1(l),(i=Yt)?(i=G4(i,wr),i=i!==null&&i.data==="&"?i:null,i!==null&&(l.memoizedState={dehydrated:i,treeContext:ba!==null?{id:ti,overflow:ni}:null,retryLane:536870912,hydrationErrors:null},u=bC(i),u.return=l,l.child=u,Gn=l,Yt=null)):i=null,i===null)throw _a(l);return l.lanes=536870912,null}return Ep(l,p)}var x=i.memoizedState;if(x!==null){var A=x.dehydrated;if(P1(l),b)if(l.flags&256)l.flags&=-257,l=LN(i,l,u);else if(l.memoizedState!==null)l.child=i.child,l.flags|=128,l=null;else throw Error(s(558));else if(xn||Wo(i,l,u,!1),b=(u&i.childLanes)!==0,xn||b){if(p=qt,p!==null&&(A=Nk(p,u),A!==0&&A!==x.retryLane))throw x.retryLane=A,wl(i,A),Ds(p,i,A),iv;zp(),l=LN(i,l,u)}else i=x.treeContext,Yt=kr(A.nextSibling),Gn=l,Ct=!0,xa=null,wr=!1,i!==null&&wC(l,i),l=Ep(l,p),l.flags|=4096;return l}return i=Oi(i.child,{mode:p.mode,children:p.children}),i.ref=l.ref,l.child=i,i.return=l,i}function jp(i,l){var u=l.ref;if(u===null)i!==null&&i.ref!==null&&(l.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(s(284));(i===null||i.ref!==u)&&(l.flags|=4194816)}}function av(i,l,u,p,b){return Nl(l),u=$1(i,l,u,p,void 0,b),p=H1(),i!==null&&!xn?(U1(i,l,b),Pi(i,l,b)):(Ct&&p&&_1(l),l.flags|=1,Xn(i,l,u,b),l.child)}function IN(i,l,u,p,b,x){return Nl(l),l.updateQueue=null,u=$C(l,p,u,b),zC(i),p=H1(),i!==null&&!xn?(U1(i,l,x),Pi(i,l,x)):(Ct&&p&&_1(l),l.flags|=1,Xn(i,l,u,x),l.child)}function PN(i,l,u,p,b){if(Nl(l),l.stateNode===null){var x=Vo,A=u.contextType;typeof A=="object"&&A!==null&&(x=Yn(A)),x=new u(p,x),l.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=sv,l.stateNode=x,x._reactInternals=l,x=l.stateNode,x.props=p,x.state=l.memoizedState,x.refs={},O1(l),A=u.contextType,x.context=typeof A=="object"&&A!==null?Yn(A):Vo,x.state=l.memoizedState,A=u.getDerivedStateFromProps,typeof A=="function"&&(nv(l,u,A,p),x.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(A=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),A!==x.state&&sv.enqueueReplaceState(x,x.state,null),Zu(l,p,x,b),Qu(),x.state=l.memoizedState),typeof x.componentDidMount=="function"&&(l.flags|=4194308),p=!0}else if(i===null){x=l.stateNode;var L=l.memoizedProps,J=Ol(u,L);x.props=J;var le=x.context,me=u.contextType;A=Vo,typeof me=="object"&&me!==null&&(A=Yn(me));var ye=u.getDerivedStateFromProps;me=typeof ye=="function"||typeof x.getSnapshotBeforeUpdate=="function",L=l.pendingProps!==L,me||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(L||le!==A)&&kN(l,x,p,A),Sa=!1;var ue=l.memoizedState;x.state=ue,Zu(l,p,x,b),Qu(),le=l.memoizedState,L||ue!==le||Sa?(typeof ye=="function"&&(nv(l,u,ye,p),le=l.memoizedState),(J=Sa||SN(l,u,J,p,ue,le,A))?(me||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(l.flags|=4194308)):(typeof x.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=le),x.props=p,x.state=le,x.context=A,p=J):(typeof x.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{x=l.stateNode,B1(i,l),A=l.memoizedProps,me=Ol(u,A),x.props=me,ye=l.pendingProps,ue=x.context,le=u.contextType,J=Vo,typeof le=="object"&&le!==null&&(J=Yn(le)),L=u.getDerivedStateFromProps,(le=typeof L=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(A!==ye||ue!==J)&&kN(l,x,p,J),Sa=!1,ue=l.memoizedState,x.state=ue,Zu(l,p,x,b),Qu();var he=l.memoizedState;A!==ye||ue!==he||Sa||i!==null&&i.dependencies!==null&&up(i.dependencies)?(typeof L=="function"&&(nv(l,u,L,p),he=l.memoizedState),(me=Sa||SN(l,u,me,p,ue,he,J)||i!==null&&i.dependencies!==null&&up(i.dependencies))?(le||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(p,he,J),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(p,he,J)),typeof x.componentDidUpdate=="function"&&(l.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof x.componentDidUpdate!="function"||A===i.memoizedProps&&ue===i.memoizedState||(l.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&ue===i.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=he),x.props=p,x.state=he,x.context=J,p=me):(typeof x.componentDidUpdate!="function"||A===i.memoizedProps&&ue===i.memoizedState||(l.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&ue===i.memoizedState||(l.flags|=1024),p=!1)}return x=p,jp(i,l),p=(l.flags&128)!==0,x||p?(x=l.stateNode,u=p&&typeof u.getDerivedStateFromError!="function"?null:x.render(),l.flags|=1,i!==null&&p?(l.child=Tl(l,i.child,null,b),l.child=Tl(l,null,u,b)):Xn(i,l,u,b),l.memoizedState=x.state,i=l.child):i=Pi(i,l,b),i}function zN(i,l,u,p){return kl(),l.flags|=256,Xn(i,l,u,p),l.child}var lv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ov(i){return{baseLanes:i,cachePool:EC()}}function cv(i,l,u){return i=i!==null?i.childLanes&~u:0,l&&(i|=Qs),i}function $N(i,l,u){var p=l.pendingProps,b=!1,x=(l.flags&128)!==0,A;if((A=x)||(A=i!==null&&i.memoizedState===null?!1:(dn.current&2)!==0),A&&(b=!0,l.flags&=-129),A=(l.flags&32)!==0,l.flags&=-33,i===null){if(Ct){if(b?Na(l):Aa(),(i=Yt)?(i=G4(i,wr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(l.memoizedState={dehydrated:i,treeContext:ba!==null?{id:ti,overflow:ni}:null,retryLane:536870912,hydrationErrors:null},u=bC(i),u.return=l,l.child=u,Gn=l,Yt=null)):i=null,i===null)throw _a(l);return qv(i)?l.lanes=32:l.lanes=536870912,null}var L=p.children;return p=p.fallback,b?(Aa(),b=l.mode,L=Tp({mode:"hidden",children:L},b),p=Sl(p,b,u,null),L.return=l,p.return=l,L.sibling=p,l.child=L,p=l.child,p.memoizedState=ov(u),p.childLanes=cv(i,A,u),l.memoizedState=lv,rh(null,p)):(Na(l),uv(l,L))}var J=i.memoizedState;if(J!==null&&(L=J.dehydrated,L!==null)){if(x)l.flags&256?(Na(l),l.flags&=-257,l=hv(i,l,u)):l.memoizedState!==null?(Aa(),l.child=i.child,l.flags|=128,l=null):(Aa(),L=p.fallback,b=l.mode,p=Tp({mode:"visible",children:p.children},b),L=Sl(L,b,u,null),L.flags|=2,p.return=l,L.return=l,p.sibling=L,l.child=p,Tl(l,i.child,null,u),p=l.child,p.memoizedState=ov(u),p.childLanes=cv(i,A,u),l.memoizedState=lv,l=rh(null,p));else if(Na(l),qv(L)){if(A=L.nextSibling&&L.nextSibling.dataset,A)var le=A.dgst;A=le,p=Error(s(419)),p.stack="",p.digest=A,Ku({value:p,source:null,stack:null}),l=hv(i,l,u)}else if(xn||Wo(i,l,u,!1),A=(u&i.childLanes)!==0,xn||A){if(A=qt,A!==null&&(p=Nk(A,u),p!==0&&p!==J.retryLane))throw J.retryLane=p,wl(i,p),Ds(A,i,p),iv;Fv(L)||zp(),l=hv(i,l,u)}else Fv(L)?(l.flags|=192,l.child=i.child,l=null):(i=J.treeContext,Yt=kr(L.nextSibling),Gn=l,Ct=!0,xa=null,wr=!1,i!==null&&wC(l,i),l=uv(l,p.children),l.flags|=4096);return l}return b?(Aa(),L=p.fallback,b=l.mode,J=i.child,le=J.sibling,p=Oi(J,{mode:"hidden",children:p.children}),p.subtreeFlags=J.subtreeFlags&65011712,le!==null?L=Oi(le,L):(L=Sl(L,b,u,null),L.flags|=2),L.return=l,p.return=l,p.sibling=L,l.child=p,rh(null,p),p=l.child,L=i.child.memoizedState,L===null?L=ov(u):(b=L.cachePool,b!==null?(J=vn._currentValue,b=b.parent!==J?{parent:J,pool:J}:b):b=EC(),L={baseLanes:L.baseLanes|u,cachePool:b}),p.memoizedState=L,p.childLanes=cv(i,A,u),l.memoizedState=lv,rh(i.child,p)):(Na(l),u=i.child,i=u.sibling,u=Oi(u,{mode:"visible",children:p.children}),u.return=l,u.sibling=null,i!==null&&(A=l.deletions,A===null?(l.deletions=[i],l.flags|=16):A.push(i)),l.child=u,l.memoizedState=null,u)}function uv(i,l){return l=Tp({mode:"visible",children:l},i.mode),l.return=i,i.child=l}function Tp(i,l){return i=Gs(22,i,null,l),i.lanes=0,i}function hv(i,l,u){return Tl(l,i.child,null,u),i=uv(l,l.pendingProps.children),i.flags|=2,l.memoizedState=null,i}function HN(i,l,u){i.lanes|=l;var p=i.alternate;p!==null&&(p.lanes|=l),N1(i.return,l,u)}function dv(i,l,u,p,b,x){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:b,treeForkCount:x}:(A.isBackwards=l,A.rendering=null,A.renderingStartTime=0,A.last=p,A.tail=u,A.tailMode=b,A.treeForkCount=x)}function UN(i,l,u){var p=l.pendingProps,b=p.revealOrder,x=p.tail;p=p.children;var A=dn.current,L=(A&2)!==0;if(L?(A=A&1|2,l.flags|=128):A&=1,N(dn,A),Xn(i,l,p,u),p=Ct?qu:0,!L&&i!==null&&(i.flags&128)!==0)e:for(i=l.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&HN(i,u,l);else if(i.tag===19)HN(i,u,l);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===l)break e;for(;i.sibling===null;){if(i.return===null||i.return===l)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(b){case"forwards":for(u=l.child,b=null;u!==null;)i=u.alternate,i!==null&&vp(i)===null&&(b=u),u=u.sibling;u=b,u===null?(b=l.child,l.child=null):(b=u.sibling,u.sibling=null),dv(l,!1,b,u,x,p);break;case"backwards":case"unstable_legacy-backwards":for(u=null,b=l.child,l.child=null;b!==null;){if(i=b.alternate,i!==null&&vp(i)===null){l.child=b;break}i=b.sibling,b.sibling=u,u=b,b=i}dv(l,!0,u,null,x,p);break;case"together":dv(l,!1,null,null,void 0,p);break;default:l.memoizedState=null}return l.child}function Pi(i,l,u){if(i!==null&&(l.dependencies=i.dependencies),Ta|=l.lanes,(u&l.childLanes)===0)if(i!==null){if(Wo(i,l,u,!1),(u&l.childLanes)===0)return null}else return null;if(i!==null&&l.child!==i.child)throw Error(s(153));if(l.child!==null){for(i=l.child,u=Oi(i,i.pendingProps),l.child=u,u.return=l;i.sibling!==null;)i=i.sibling,u=u.sibling=Oi(i,i.pendingProps),u.return=l;u.sibling=null}return l.child}function fv(i,l){return(i.lanes&l)!==0?!0:(i=i.dependencies,!!(i!==null&&up(i)))}function Z8(i,l,u){switch(l.tag){case 3:we(l,l.stateNode.containerInfo),wa(l,vn,i.memoizedState.cache),kl();break;case 27:case 5:Fe(l);break;case 4:we(l,l.stateNode.containerInfo);break;case 10:wa(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,P1(l),null;break;case 13:var p=l.memoizedState;if(p!==null)return p.dehydrated!==null?(Na(l),l.flags|=128,null):(u&l.child.childLanes)!==0?$N(i,l,u):(Na(l),i=Pi(i,l,u),i!==null?i.sibling:null);Na(l);break;case 19:var b=(i.flags&128)!==0;if(p=(u&l.childLanes)!==0,p||(Wo(i,l,u,!1),p=(u&l.childLanes)!==0),b){if(p)return UN(i,l,u);l.flags|=128}if(b=l.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),N(dn,dn.current),p)break;return null;case 22:return l.lanes=0,MN(i,l,u,l.pendingProps);case 24:wa(l,vn,i.memoizedState.cache)}return Pi(i,l,u)}function VN(i,l,u){if(i!==null)if(i.memoizedProps!==l.pendingProps)xn=!0;else{if(!fv(i,u)&&(l.flags&128)===0)return xn=!1,Z8(i,l,u);xn=(i.flags&131072)!==0}else xn=!1,Ct&&(l.flags&1048576)!==0&&_C(l,qu,l.index);switch(l.lanes=0,l.tag){case 16:e:{var p=l.pendingProps;if(i=El(l.elementType),l.type=i,typeof i=="function")v1(i)?(p=Ol(i,p),l.tag=1,l=PN(null,l,i,p,u)):(l.tag=0,l=av(null,l,i,p,u));else{if(i!=null){var b=i.$$typeof;if(b===B){l.tag=11,l=RN(null,l,i,p,u);break e}else if(b===P){l.tag=14,l=ON(null,l,i,p,u);break e}}throw l=Q(i)||i,Error(s(306,l,""))}}return l;case 0:return av(i,l,l.type,l.pendingProps,u);case 1:return p=l.type,b=Ol(p,l.pendingProps),PN(i,l,p,b,u);case 3:e:{if(we(l,l.stateNode.containerInfo),i===null)throw Error(s(387));p=l.pendingProps;var x=l.memoizedState;b=x.element,B1(i,l),Zu(l,p,null,u);var A=l.memoizedState;if(p=A.cache,wa(l,vn,p),p!==x.cache&&A1(l,[vn],u,!0),Qu(),p=A.element,x.isDehydrated)if(x={element:p,isDehydrated:!1,cache:A.cache},l.updateQueue.baseState=x,l.memoizedState=x,l.flags&256){l=zN(i,l,p,u);break e}else if(p!==b){b=br(Error(s(424)),l),Ku(b),l=zN(i,l,p,u);break e}else for(i=l.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,Yt=kr(i.firstChild),Gn=l,Ct=!0,xa=null,wr=!0,u=MC(l,null,p,u),l.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(kl(),p===b){l=Pi(i,l,u);break e}Xn(i,l,p,u)}l=l.child}return l;case 26:return jp(i,l),i===null?(u=e5(l.type,null,l.pendingProps,null))?l.memoizedState=u:Ct||(u=l.type,i=l.pendingProps,p=Kp(ee.current).createElement(u),p[Wn]=l,p[js]=i,Jn(p,u,i),In(p),l.stateNode=p):l.memoizedState=e5(l.type,i.memoizedProps,l.pendingProps,i.memoizedState),null;case 27:return Fe(l),i===null&&Ct&&(p=l.stateNode=J4(l.type,l.pendingProps,ee.current),Gn=l,wr=!0,b=Yt,Da(l.type)?(Kv=b,Yt=kr(p.firstChild)):Yt=b),Xn(i,l,l.pendingProps.children,u),jp(i,l),i===null&&(l.flags|=4194304),l.child;case 5:return i===null&&Ct&&((b=p=Yt)&&(p=jL(p,l.type,l.pendingProps,wr),p!==null?(l.stateNode=p,Gn=l,Yt=kr(p.firstChild),wr=!1,b=!0):b=!1),b||_a(l)),Fe(l),b=l.type,x=l.pendingProps,A=i!==null?i.memoizedProps:null,p=x.children,Hv(b,x)?p=null:A!==null&&Hv(b,A)&&(l.flags|=32),l.memoizedState!==null&&(b=$1(i,l,F8,null,null,u),bh._currentValue=b),jp(i,l),Xn(i,l,p,u),l.child;case 6:return i===null&&Ct&&((i=u=Yt)&&(u=TL(u,l.pendingProps,wr),u!==null?(l.stateNode=u,Gn=l,Yt=null,i=!0):i=!1),i||_a(l)),null;case 13:return $N(i,l,u);case 4:return we(l,l.stateNode.containerInfo),p=l.pendingProps,i===null?l.child=Tl(l,null,p,u):Xn(i,l,p,u),l.child;case 11:return RN(i,l,l.type,l.pendingProps,u);case 7:return Xn(i,l,l.pendingProps,u),l.child;case 8:return Xn(i,l,l.pendingProps.children,u),l.child;case 12:return Xn(i,l,l.pendingProps.children,u),l.child;case 10:return p=l.pendingProps,wa(l,l.type,p.value),Xn(i,l,p.children,u),l.child;case 9:return b=l.type._context,p=l.pendingProps.children,Nl(l),b=Yn(b),p=p(b),l.flags|=1,Xn(i,l,p,u),l.child;case 14:return ON(i,l,l.type,l.pendingProps,u);case 15:return BN(i,l,l.type,l.pendingProps,u);case 19:return UN(i,l,u);case 31:return Q8(i,l,u);case 22:return MN(i,l,u,l.pendingProps);case 24:return Nl(l),p=Yn(vn),i===null?(b=T1(),b===null&&(b=qt,x=E1(),b.pooledCache=x,x.refCount++,x!==null&&(b.pooledCacheLanes|=u),b=x),l.memoizedState={parent:p,cache:b},O1(l),wa(l,vn,b)):((i.lanes&u)!==0&&(B1(i,l),Zu(l,null,null,u),Qu()),b=i.memoizedState,x=l.memoizedState,b.parent!==p?(b={parent:p,cache:p},l.memoizedState=b,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=b),wa(l,vn,p)):(p=x.cache,wa(l,vn,p),p!==b.cache&&A1(l,[vn],u,!0))),Xn(i,l,l.pendingProps.children,u),l.child;case 29:throw l.pendingProps}throw Error(s(156,l.tag))}function zi(i){i.flags|=4}function pv(i,l,u,p,b){if((l=(i.mode&32)!==0)&&(l=!1),l){if(i.flags|=16777216,(b&335544128)===b)if(i.stateNode.complete)i.flags|=8192;else if(g4())i.flags|=8192;else throw jl=pp,R1}else i.flags&=-16777217}function FN(i,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!i5(l))if(g4())i.flags|=8192;else throw jl=pp,R1}function Rp(i,l){l!==null&&(i.flags|=4),i.flags&16384&&(l=i.tag!==22?Es():536870912,i.lanes|=l,ic|=l)}function ih(i,l){if(!Ct)switch(i.tailMode){case"hidden":l=i.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?l||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function Xt(i){var l=i.alternate!==null&&i.alternate.child===i.child,u=0,p=0;if(l)for(var b=i.child;b!==null;)u|=b.lanes|b.childLanes,p|=b.subtreeFlags&65011712,p|=b.flags&65011712,b.return=i,b=b.sibling;else for(b=i.child;b!==null;)u|=b.lanes|b.childLanes,p|=b.subtreeFlags,p|=b.flags,b.return=i,b=b.sibling;return i.subtreeFlags|=p,i.childLanes=u,l}function eL(i,l,u){var p=l.pendingProps;switch(w1(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(l),null;case 1:return Xt(l),null;case 3:return u=l.stateNode,p=null,i!==null&&(p=i.memoizedState.cache),l.memoizedState.cache!==p&&(l.flags|=2048),Di(vn),Se(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(Ko(l)?zi(l):i===null||i.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,k1())),Xt(l),null;case 26:var b=l.type,x=l.memoizedState;return i===null?(zi(l),x!==null?(Xt(l),FN(l,x)):(Xt(l),pv(l,b,null,p,u))):x?x!==i.memoizedState?(zi(l),Xt(l),FN(l,x)):(Xt(l),l.flags&=-16777217):(i=i.memoizedProps,i!==p&&zi(l),Xt(l),pv(l,b,i,p,u)),null;case 27:if(xe(l),u=ee.current,b=l.type,i!==null&&l.stateNode!=null)i.memoizedProps!==p&&zi(l);else{if(!p){if(l.stateNode===null)throw Error(s(166));return Xt(l),null}i=Y.current,Ko(l)?SC(l):(i=J4(b,p,u),l.stateNode=i,zi(l))}return Xt(l),null;case 5:if(xe(l),b=l.type,i!==null&&l.stateNode!=null)i.memoizedProps!==p&&zi(l);else{if(!p){if(l.stateNode===null)throw Error(s(166));return Xt(l),null}if(x=Y.current,Ko(l))SC(l);else{var A=Kp(ee.current);switch(x){case 1:x=A.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:x=A.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":x=A.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":x=A.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":x=A.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof p.is=="string"?A.createElement("select",{is:p.is}):A.createElement("select"),p.multiple?x.multiple=!0:p.size&&(x.size=p.size);break;default:x=typeof p.is=="string"?A.createElement(b,{is:p.is}):A.createElement(b)}}x[Wn]=l,x[js]=p;e:for(A=l.child;A!==null;){if(A.tag===5||A.tag===6)x.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===l)break e;for(;A.sibling===null;){if(A.return===null||A.return===l)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}l.stateNode=x;e:switch(Jn(x,b,p),b){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&zi(l)}}return Xt(l),pv(l,l.type,i===null?null:i.memoizedProps,l.pendingProps,u),null;case 6:if(i&&l.stateNode!=null)i.memoizedProps!==p&&zi(l);else{if(typeof p!="string"&&l.stateNode===null)throw Error(s(166));if(i=ee.current,Ko(l)){if(i=l.stateNode,u=l.memoizedProps,p=null,b=Gn,b!==null)switch(b.tag){case 27:case 5:p=b.memoizedProps}i[Wn]=l,i=!!(i.nodeValue===u||p!==null&&p.suppressHydrationWarning===!0||$4(i.nodeValue,u)),i||_a(l,!0)}else i=Kp(i).createTextNode(p),i[Wn]=l,l.stateNode=i}return Xt(l),null;case 31:if(u=l.memoizedState,i===null||i.memoizedState!==null){if(p=Ko(l),u!==null){if(i===null){if(!p)throw Error(s(318));if(i=l.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[Wn]=l}else kl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Xt(l),i=!1}else u=k1(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=u),i=!0;if(!i)return l.flags&256?(Xs(l),l):(Xs(l),null);if((l.flags&128)!==0)throw Error(s(558))}return Xt(l),null;case 13:if(p=l.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(b=Ko(l),p!==null&&p.dehydrated!==null){if(i===null){if(!b)throw Error(s(318));if(b=l.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(s(317));b[Wn]=l}else kl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Xt(l),b=!1}else b=k1(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=b),b=!0;if(!b)return l.flags&256?(Xs(l),l):(Xs(l),null)}return Xs(l),(l.flags&128)!==0?(l.lanes=u,l):(u=p!==null,i=i!==null&&i.memoizedState!==null,u&&(p=l.child,b=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(b=p.alternate.memoizedState.cachePool.pool),x=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(x=p.memoizedState.cachePool.pool),x!==b&&(p.flags|=2048)),u!==i&&u&&(l.child.flags|=8192),Rp(l,l.updateQueue),Xt(l),null);case 4:return Se(),i===null&&Lv(l.stateNode.containerInfo),Xt(l),null;case 10:return Di(l.type),Xt(l),null;case 19:if(H(dn),p=l.memoizedState,p===null)return Xt(l),null;if(b=(l.flags&128)!==0,x=p.rendering,x===null)if(b)ih(p,!1);else{if(cn!==0||i!==null&&(i.flags&128)!==0)for(i=l.child;i!==null;){if(x=vp(i),x!==null){for(l.flags|=128,ih(p,!1),i=x.updateQueue,l.updateQueue=i,Rp(l,i),l.subtreeFlags=0,i=u,u=l.child;u!==null;)vC(u,i),u=u.sibling;return N(dn,dn.current&1|2),Ct&&Bi(l,p.treeForkCount),l.child}i=i.sibling}p.tail!==null&&Ot()>Lp&&(l.flags|=128,b=!0,ih(p,!1),l.lanes=4194304)}else{if(!b)if(i=vp(x),i!==null){if(l.flags|=128,b=!0,i=i.updateQueue,l.updateQueue=i,Rp(l,i),ih(p,!0),p.tail===null&&p.tailMode==="hidden"&&!x.alternate&&!Ct)return Xt(l),null}else 2*Ot()-p.renderingStartTime>Lp&&u!==536870912&&(l.flags|=128,b=!0,ih(p,!1),l.lanes=4194304);p.isBackwards?(x.sibling=l.child,l.child=x):(i=p.last,i!==null?i.sibling=x:l.child=x,p.last=x)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=Ot(),i.sibling=null,u=dn.current,N(dn,b?u&1|2:u&1),Ct&&Bi(l,p.treeForkCount),i):(Xt(l),null);case 22:case 23:return Xs(l),I1(),p=l.memoizedState!==null,i!==null?i.memoizedState!==null!==p&&(l.flags|=8192):p&&(l.flags|=8192),p?(u&536870912)!==0&&(l.flags&128)===0&&(Xt(l),l.subtreeFlags&6&&(l.flags|=8192)):Xt(l),u=l.updateQueue,u!==null&&Rp(l,u.retryQueue),u=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==u&&(l.flags|=2048),i!==null&&H(Al),null;case 24:return u=null,i!==null&&(u=i.memoizedState.cache),l.memoizedState.cache!==u&&(l.flags|=2048),Di(vn),Xt(l),null;case 25:return null;case 30:return null}throw Error(s(156,l.tag))}function tL(i,l){switch(w1(l),l.tag){case 1:return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 3:return Di(vn),Se(),i=l.flags,(i&65536)!==0&&(i&128)===0?(l.flags=i&-65537|128,l):null;case 26:case 27:case 5:return xe(l),null;case 31:if(l.memoizedState!==null){if(Xs(l),l.alternate===null)throw Error(s(340));kl()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 13:if(Xs(l),i=l.memoizedState,i!==null&&i.dehydrated!==null){if(l.alternate===null)throw Error(s(340));kl()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 19:return H(dn),null;case 4:return Se(),null;case 10:return Di(l.type),null;case 22:case 23:return Xs(l),I1(),i!==null&&H(Al),i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 24:return Di(vn),null;case 25:return null;default:return null}}function qN(i,l){switch(w1(l),l.tag){case 3:Di(vn),Se();break;case 26:case 27:case 5:xe(l);break;case 4:Se();break;case 31:l.memoizedState!==null&&Xs(l);break;case 13:Xs(l);break;case 19:H(dn);break;case 10:Di(l.type);break;case 22:case 23:Xs(l),I1(),i!==null&&H(Al);break;case 24:Di(vn)}}function ah(i,l){try{var u=l.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var b=p.next;u=b;do{if((u.tag&i)===i){p=void 0;var x=u.create,A=u.inst;p=x(),A.destroy=p}u=u.next}while(u!==b)}}catch(L){$t(l,l.return,L)}}function Ea(i,l,u){try{var p=l.updateQueue,b=p!==null?p.lastEffect:null;if(b!==null){var x=b.next;p=x;do{if((p.tag&i)===i){var A=p.inst,L=A.destroy;if(L!==void 0){A.destroy=void 0,b=l;var J=u,le=L;try{le()}catch(me){$t(b,J,me)}}}p=p.next}while(p!==x)}}catch(me){$t(l,l.return,me)}}function KN(i){var l=i.updateQueue;if(l!==null){var u=i.stateNode;try{LC(l,u)}catch(p){$t(i,i.return,p)}}}function WN(i,l,u){u.props=Ol(i.type,i.memoizedProps),u.state=i.memoizedState;try{u.componentWillUnmount()}catch(p){$t(i,l,p)}}function lh(i,l){try{var u=i.ref;if(u!==null){switch(i.tag){case 26:case 27:case 5:var p=i.stateNode;break;case 30:p=i.stateNode;break;default:p=i.stateNode}typeof u=="function"?i.refCleanup=u(p):u.current=p}}catch(b){$t(i,l,b)}}function si(i,l){var u=i.ref,p=i.refCleanup;if(u!==null)if(typeof p=="function")try{p()}catch(b){$t(i,l,b)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(b){$t(i,l,b)}else u.current=null}function GN(i){var l=i.type,u=i.memoizedProps,p=i.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":u.autoFocus&&p.focus();break e;case"img":u.src?p.src=u.src:u.srcSet&&(p.srcset=u.srcSet)}}catch(b){$t(i,i.return,b)}}function mv(i,l,u){try{var p=i.stateNode;SL(p,i.type,u,l),p[js]=l}catch(b){$t(i,i.return,b)}}function YN(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Da(i.type)||i.tag===4}function gv(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||YN(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Da(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function yv(i,l,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,l?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(i,l):(l=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,l.appendChild(i),u=u._reactRootContainer,u!=null||l.onclick!==null||(l.onclick=Ti));else if(p!==4&&(p===27&&Da(i.type)&&(u=i.stateNode,l=null),i=i.child,i!==null))for(yv(i,l,u),i=i.sibling;i!==null;)yv(i,l,u),i=i.sibling}function Op(i,l,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,l?u.insertBefore(i,l):u.appendChild(i);else if(p!==4&&(p===27&&Da(i.type)&&(u=i.stateNode),i=i.child,i!==null))for(Op(i,l,u),i=i.sibling;i!==null;)Op(i,l,u),i=i.sibling}function XN(i){var l=i.stateNode,u=i.memoizedProps;try{for(var p=i.type,b=l.attributes;b.length;)l.removeAttributeNode(b[0]);Jn(l,p,u),l[Wn]=i,l[js]=u}catch(x){$t(i,i.return,x)}}var $i=!1,_n=!1,vv=!1,JN=typeof WeakSet=="function"?WeakSet:Set,Pn=null;function nL(i,l){if(i=i.containerInfo,zv=Zp,i=cC(i),h1(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var b=p.anchorOffset,x=p.focusNode;p=p.focusOffset;try{u.nodeType,x.nodeType}catch{u=null;break e}var A=0,L=-1,J=-1,le=0,me=0,ye=i,ue=null;t:for(;;){for(var he;ye!==u||b!==0&&ye.nodeType!==3||(L=A+b),ye!==x||p!==0&&ye.nodeType!==3||(J=A+p),ye.nodeType===3&&(A+=ye.nodeValue.length),(he=ye.firstChild)!==null;)ue=ye,ye=he;for(;;){if(ye===i)break t;if(ue===u&&++le===b&&(L=A),ue===x&&++me===p&&(J=A),(he=ye.nextSibling)!==null)break;ye=ue,ue=ye.parentNode}ye=he}u=L===-1||J===-1?null:{start:L,end:J}}else u=null}u=u||{start:0,end:0}}else u=null;for($v={focusedElem:i,selectionRange:u},Zp=!1,Pn=l;Pn!==null;)if(l=Pn,i=l.child,(l.subtreeFlags&1028)!==0&&i!==null)i.return=l,Pn=i;else for(;Pn!==null;){switch(l=Pn,x=l.alternate,i=l.flags,l.tag){case 0:if((i&4)!==0&&(i=l.updateQueue,i=i!==null?i.events:null,i!==null))for(u=0;u<i.length;u++)b=i[u],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&x!==null){i=void 0,u=l,b=x.memoizedProps,x=x.memoizedState,p=u.stateNode;try{var Ue=Ol(u.type,b);i=p.getSnapshotBeforeUpdate(Ue,x),p.__reactInternalSnapshotBeforeUpdate=i}catch(tt){$t(u,u.return,tt)}}break;case 3:if((i&1024)!==0){if(i=l.stateNode.containerInfo,u=i.nodeType,u===9)Vv(i);else if(u===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Vv(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=l.sibling,i!==null){i.return=l.return,Pn=i;break}Pn=l.return}}function QN(i,l,u){var p=u.flags;switch(u.tag){case 0:case 11:case 15:Ui(i,u),p&4&&ah(5,u);break;case 1:if(Ui(i,u),p&4)if(i=u.stateNode,l===null)try{i.componentDidMount()}catch(A){$t(u,u.return,A)}else{var b=Ol(u.type,l.memoizedProps);l=l.memoizedState;try{i.componentDidUpdate(b,l,i.__reactInternalSnapshotBeforeUpdate)}catch(A){$t(u,u.return,A)}}p&64&&KN(u),p&512&&lh(u,u.return);break;case 3:if(Ui(i,u),p&64&&(i=u.updateQueue,i!==null)){if(l=null,u.child!==null)switch(u.child.tag){case 27:case 5:l=u.child.stateNode;break;case 1:l=u.child.stateNode}try{LC(i,l)}catch(A){$t(u,u.return,A)}}break;case 27:l===null&&p&4&&XN(u);case 26:case 5:Ui(i,u),l===null&&p&4&&GN(u),p&512&&lh(u,u.return);break;case 12:Ui(i,u);break;case 31:Ui(i,u),p&4&&t4(i,u);break;case 13:Ui(i,u),p&4&&n4(i,u),p&64&&(i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(u=hL.bind(null,u),RL(i,u))));break;case 22:if(p=u.memoizedState!==null||$i,!p){l=l!==null&&l.memoizedState!==null||_n,b=$i;var x=_n;$i=p,(_n=l)&&!x?Vi(i,u,(u.subtreeFlags&8772)!==0):Ui(i,u),$i=b,_n=x}break;case 30:break;default:Ui(i,u)}}function ZN(i){var l=i.alternate;l!==null&&(i.alternate=null,ZN(l)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(l=i.stateNode,l!==null&&Gy(l)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var en=null,Rs=!1;function Hi(i,l,u){for(u=u.child;u!==null;)e4(i,l,u),u=u.sibling}function e4(i,l,u){if(fe&&typeof fe.onCommitFiberUnmount=="function")try{fe.onCommitFiberUnmount(ae,u)}catch{}switch(u.tag){case 26:_n||si(u,l),Hi(i,l,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:_n||si(u,l);var p=en,b=Rs;Da(u.type)&&(en=u.stateNode,Rs=!1),Hi(i,l,u),gh(u.stateNode),en=p,Rs=b;break;case 5:_n||si(u,l);case 6:if(p=en,b=Rs,en=null,Hi(i,l,u),en=p,Rs=b,en!==null)if(Rs)try{(en.nodeType===9?en.body:en.nodeName==="HTML"?en.ownerDocument.body:en).removeChild(u.stateNode)}catch(x){$t(u,l,x)}else try{en.removeChild(u.stateNode)}catch(x){$t(u,l,x)}break;case 18:en!==null&&(Rs?(i=en,K4(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,u.stateNode),fc(i)):K4(en,u.stateNode));break;case 4:p=en,b=Rs,en=u.stateNode.containerInfo,Rs=!0,Hi(i,l,u),en=p,Rs=b;break;case 0:case 11:case 14:case 15:Ea(2,u,l),_n||Ea(4,u,l),Hi(i,l,u);break;case 1:_n||(si(u,l),p=u.stateNode,typeof p.componentWillUnmount=="function"&&WN(u,l,p)),Hi(i,l,u);break;case 21:Hi(i,l,u);break;case 22:_n=(p=_n)||u.memoizedState!==null,Hi(i,l,u),_n=p;break;default:Hi(i,l,u)}}function t4(i,l){if(l.memoizedState===null&&(i=l.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{fc(i)}catch(u){$t(l,l.return,u)}}}function n4(i,l){if(l.memoizedState===null&&(i=l.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{fc(i)}catch(u){$t(l,l.return,u)}}function sL(i){switch(i.tag){case 31:case 13:case 19:var l=i.stateNode;return l===null&&(l=i.stateNode=new JN),l;case 22:return i=i.stateNode,l=i._retryCache,l===null&&(l=i._retryCache=new JN),l;default:throw Error(s(435,i.tag))}}function Bp(i,l){var u=sL(i);l.forEach(function(p){if(!u.has(p)){u.add(p);var b=dL.bind(null,i,p);p.then(b,b)}})}function Os(i,l){var u=l.deletions;if(u!==null)for(var p=0;p<u.length;p++){var b=u[p],x=i,A=l,L=A;e:for(;L!==null;){switch(L.tag){case 27:if(Da(L.type)){en=L.stateNode,Rs=!1;break e}break;case 5:en=L.stateNode,Rs=!1;break e;case 3:case 4:en=L.stateNode.containerInfo,Rs=!0;break e}L=L.return}if(en===null)throw Error(s(160));e4(x,A,b),en=null,Rs=!1,x=b.alternate,x!==null&&(x.return=null),b.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)s4(l,i),l=l.sibling}var Hr=null;function s4(i,l){var u=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Os(l,i),Bs(i),p&4&&(Ea(3,i,i.return),ah(3,i),Ea(5,i,i.return));break;case 1:Os(l,i),Bs(i),p&512&&(_n||u===null||si(u,u.return)),p&64&&$i&&(i=i.updateQueue,i!==null&&(p=i.callbacks,p!==null&&(u=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=u===null?p:u.concat(p))));break;case 26:var b=Hr;if(Os(l,i),Bs(i),p&512&&(_n||u===null||si(u,u.return)),p&4){var x=u!==null?u.memoizedState:null;if(p=i.memoizedState,u===null)if(p===null)if(i.stateNode===null){e:{p=i.type,u=i.memoizedProps,b=b.ownerDocument||b;t:switch(p){case"title":x=b.getElementsByTagName("title")[0],(!x||x[Mu]||x[Wn]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=b.createElement(p),b.head.insertBefore(x,b.querySelector("head > title"))),Jn(x,p,u),x[Wn]=i,In(x),p=x;break e;case"link":var A=s5("link","href",b).get(p+(u.href||""));if(A){for(var L=0;L<A.length;L++)if(x=A[L],x.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&x.getAttribute("rel")===(u.rel==null?null:u.rel)&&x.getAttribute("title")===(u.title==null?null:u.title)&&x.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){A.splice(L,1);break t}}x=b.createElement(p),Jn(x,p,u),b.head.appendChild(x);break;case"meta":if(A=s5("meta","content",b).get(p+(u.content||""))){for(L=0;L<A.length;L++)if(x=A[L],x.getAttribute("content")===(u.content==null?null:""+u.content)&&x.getAttribute("name")===(u.name==null?null:u.name)&&x.getAttribute("property")===(u.property==null?null:u.property)&&x.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&x.getAttribute("charset")===(u.charSet==null?null:u.charSet)){A.splice(L,1);break t}}x=b.createElement(p),Jn(x,p,u),b.head.appendChild(x);break;default:throw Error(s(468,p))}x[Wn]=i,In(x),p=x}i.stateNode=p}else r5(b,i.type,i.stateNode);else i.stateNode=n5(b,p,i.memoizedProps);else x!==p?(x===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):x.count--,p===null?r5(b,i.type,i.stateNode):n5(b,p,i.memoizedProps)):p===null&&i.stateNode!==null&&mv(i,i.memoizedProps,u.memoizedProps)}break;case 27:Os(l,i),Bs(i),p&512&&(_n||u===null||si(u,u.return)),u!==null&&p&4&&mv(i,i.memoizedProps,u.memoizedProps);break;case 5:if(Os(l,i),Bs(i),p&512&&(_n||u===null||si(u,u.return)),i.flags&32){b=i.stateNode;try{Lo(b,"")}catch(Ue){$t(i,i.return,Ue)}}p&4&&i.stateNode!=null&&(b=i.memoizedProps,mv(i,b,u!==null?u.memoizedProps:b)),p&1024&&(vv=!0);break;case 6:if(Os(l,i),Bs(i),p&4){if(i.stateNode===null)throw Error(s(162));p=i.memoizedProps,u=i.stateNode;try{u.nodeValue=p}catch(Ue){$t(i,i.return,Ue)}}break;case 3:if(Yp=null,b=Hr,Hr=Wp(l.containerInfo),Os(l,i),Hr=b,Bs(i),p&4&&u!==null&&u.memoizedState.isDehydrated)try{fc(l.containerInfo)}catch(Ue){$t(i,i.return,Ue)}vv&&(vv=!1,r4(i));break;case 4:p=Hr,Hr=Wp(i.stateNode.containerInfo),Os(l,i),Bs(i),Hr=p;break;case 12:Os(l,i),Bs(i);break;case 31:Os(l,i),Bs(i),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,Bp(i,p)));break;case 13:Os(l,i),Bs(i),i.child.flags&8192&&i.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Dp=Ot()),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,Bp(i,p)));break;case 22:b=i.memoizedState!==null;var J=u!==null&&u.memoizedState!==null,le=$i,me=_n;if($i=le||b,_n=me||J,Os(l,i),_n=me,$i=le,Bs(i),p&8192)e:for(l=i.stateNode,l._visibility=b?l._visibility&-2:l._visibility|1,b&&(u===null||J||$i||_n||Bl(i)),u=null,l=i;;){if(l.tag===5||l.tag===26){if(u===null){J=u=l;try{if(x=J.stateNode,b)A=x.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{L=J.stateNode;var ye=J.memoizedProps.style,ue=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;L.style.display=ue==null||typeof ue=="boolean"?"":(""+ue).trim()}}catch(Ue){$t(J,J.return,Ue)}}}else if(l.tag===6){if(u===null){J=l;try{J.stateNode.nodeValue=b?"":J.memoizedProps}catch(Ue){$t(J,J.return,Ue)}}}else if(l.tag===18){if(u===null){J=l;try{var he=J.stateNode;b?W4(he,!0):W4(J.stateNode,!1)}catch(Ue){$t(J,J.return,Ue)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===i)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break e;for(;l.sibling===null;){if(l.return===null||l.return===i)break e;u===l&&(u=null),l=l.return}u===l&&(u=null),l.sibling.return=l.return,l=l.sibling}p&4&&(p=i.updateQueue,p!==null&&(u=p.retryQueue,u!==null&&(p.retryQueue=null,Bp(i,u))));break;case 19:Os(l,i),Bs(i),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,Bp(i,p)));break;case 30:break;case 21:break;default:Os(l,i),Bs(i)}}function Bs(i){var l=i.flags;if(l&2){try{for(var u,p=i.return;p!==null;){if(YN(p)){u=p;break}p=p.return}if(u==null)throw Error(s(160));switch(u.tag){case 27:var b=u.stateNode,x=gv(i);Op(i,x,b);break;case 5:var A=u.stateNode;u.flags&32&&(Lo(A,""),u.flags&=-33);var L=gv(i);Op(i,L,A);break;case 3:case 4:var J=u.stateNode.containerInfo,le=gv(i);yv(i,le,J);break;default:throw Error(s(161))}}catch(me){$t(i,i.return,me)}i.flags&=-3}l&4096&&(i.flags&=-4097)}function r4(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var l=i;r4(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),i=i.sibling}}function Ui(i,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)QN(i,l.alternate,l),l=l.sibling}function Bl(i){for(i=i.child;i!==null;){var l=i;switch(l.tag){case 0:case 11:case 14:case 15:Ea(4,l,l.return),Bl(l);break;case 1:si(l,l.return);var u=l.stateNode;typeof u.componentWillUnmount=="function"&&WN(l,l.return,u),Bl(l);break;case 27:gh(l.stateNode);case 26:case 5:si(l,l.return),Bl(l);break;case 22:l.memoizedState===null&&Bl(l);break;case 30:Bl(l);break;default:Bl(l)}i=i.sibling}}function Vi(i,l,u){for(u=u&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var p=l.alternate,b=i,x=l,A=x.flags;switch(x.tag){case 0:case 11:case 15:Vi(b,x,u),ah(4,x);break;case 1:if(Vi(b,x,u),p=x,b=p.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(le){$t(p,p.return,le)}if(p=x,b=p.updateQueue,b!==null){var L=p.stateNode;try{var J=b.shared.hiddenCallbacks;if(J!==null)for(b.shared.hiddenCallbacks=null,b=0;b<J.length;b++)DC(J[b],L)}catch(le){$t(p,p.return,le)}}u&&A&64&&KN(x),lh(x,x.return);break;case 27:XN(x);case 26:case 5:Vi(b,x,u),u&&p===null&&A&4&&GN(x),lh(x,x.return);break;case 12:Vi(b,x,u);break;case 31:Vi(b,x,u),u&&A&4&&t4(b,x);break;case 13:Vi(b,x,u),u&&A&4&&n4(b,x);break;case 22:x.memoizedState===null&&Vi(b,x,u),lh(x,x.return);break;case 30:break;default:Vi(b,x,u)}l=l.sibling}}function bv(i,l){var u=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),i=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(i=l.memoizedState.cachePool.pool),i!==u&&(i!=null&&i.refCount++,u!=null&&Wu(u))}function xv(i,l){i=null,l.alternate!==null&&(i=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==i&&(l.refCount++,i!=null&&Wu(i))}function Ur(i,l,u,p){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)i4(i,l,u,p),l=l.sibling}function i4(i,l,u,p){var b=l.flags;switch(l.tag){case 0:case 11:case 15:Ur(i,l,u,p),b&2048&&ah(9,l);break;case 1:Ur(i,l,u,p);break;case 3:Ur(i,l,u,p),b&2048&&(i=null,l.alternate!==null&&(i=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==i&&(l.refCount++,i!=null&&Wu(i)));break;case 12:if(b&2048){Ur(i,l,u,p),i=l.stateNode;try{var x=l.memoizedProps,A=x.id,L=x.onPostCommit;typeof L=="function"&&L(A,l.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(J){$t(l,l.return,J)}}else Ur(i,l,u,p);break;case 31:Ur(i,l,u,p);break;case 13:Ur(i,l,u,p);break;case 23:break;case 22:x=l.stateNode,A=l.alternate,l.memoizedState!==null?x._visibility&2?Ur(i,l,u,p):oh(i,l):x._visibility&2?Ur(i,l,u,p):(x._visibility|=2,nc(i,l,u,p,(l.subtreeFlags&10256)!==0||!1)),b&2048&&bv(A,l);break;case 24:Ur(i,l,u,p),b&2048&&xv(l.alternate,l);break;default:Ur(i,l,u,p)}}function nc(i,l,u,p,b){for(b=b&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var x=i,A=l,L=u,J=p,le=A.flags;switch(A.tag){case 0:case 11:case 15:nc(x,A,L,J,b),ah(8,A);break;case 23:break;case 22:var me=A.stateNode;A.memoizedState!==null?me._visibility&2?nc(x,A,L,J,b):oh(x,A):(me._visibility|=2,nc(x,A,L,J,b)),b&&le&2048&&bv(A.alternate,A);break;case 24:nc(x,A,L,J,b),b&&le&2048&&xv(A.alternate,A);break;default:nc(x,A,L,J,b)}l=l.sibling}}function oh(i,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var u=i,p=l,b=p.flags;switch(p.tag){case 22:oh(u,p),b&2048&&bv(p.alternate,p);break;case 24:oh(u,p),b&2048&&xv(p.alternate,p);break;default:oh(u,p)}l=l.sibling}}var ch=8192;function sc(i,l,u){if(i.subtreeFlags&ch)for(i=i.child;i!==null;)a4(i,l,u),i=i.sibling}function a4(i,l,u){switch(i.tag){case 26:sc(i,l,u),i.flags&ch&&i.memoizedState!==null&&VL(u,Hr,i.memoizedState,i.memoizedProps);break;case 5:sc(i,l,u);break;case 3:case 4:var p=Hr;Hr=Wp(i.stateNode.containerInfo),sc(i,l,u),Hr=p;break;case 22:i.memoizedState===null&&(p=i.alternate,p!==null&&p.memoizedState!==null?(p=ch,ch=16777216,sc(i,l,u),ch=p):sc(i,l,u));break;default:sc(i,l,u)}}function l4(i){var l=i.alternate;if(l!==null&&(i=l.child,i!==null)){l.child=null;do l=i.sibling,i.sibling=null,i=l;while(i!==null)}}function uh(i){var l=i.deletions;if((i.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var p=l[u];Pn=p,c4(p,i)}l4(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)o4(i),i=i.sibling}function o4(i){switch(i.tag){case 0:case 11:case 15:uh(i),i.flags&2048&&Ea(9,i,i.return);break;case 3:uh(i);break;case 12:uh(i);break;case 22:var l=i.stateNode;i.memoizedState!==null&&l._visibility&2&&(i.return===null||i.return.tag!==13)?(l._visibility&=-3,Mp(i)):uh(i);break;default:uh(i)}}function Mp(i){var l=i.deletions;if((i.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var p=l[u];Pn=p,c4(p,i)}l4(i)}for(i=i.child;i!==null;){switch(l=i,l.tag){case 0:case 11:case 15:Ea(8,l,l.return),Mp(l);break;case 22:u=l.stateNode,u._visibility&2&&(u._visibility&=-3,Mp(l));break;default:Mp(l)}i=i.sibling}}function c4(i,l){for(;Pn!==null;){var u=Pn;switch(u.tag){case 0:case 11:case 15:Ea(8,u,l);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var p=u.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Wu(u.memoizedState.cache)}if(p=u.child,p!==null)p.return=u,Pn=p;else e:for(u=i;Pn!==null;){p=Pn;var b=p.sibling,x=p.return;if(ZN(p),p===u){Pn=null;break e}if(b!==null){b.return=x,Pn=b;break e}Pn=x}}}var rL={getCacheForType:function(i){var l=Yn(vn),u=l.data.get(i);return u===void 0&&(u=i(),l.data.set(i,u)),u},cacheSignal:function(){return Yn(vn).controller.signal}},iL=typeof WeakMap=="function"?WeakMap:Map,Dt=0,qt=null,bt=null,St=0,zt=0,Js=null,ja=!1,rc=!1,_v=!1,Fi=0,cn=0,Ta=0,Ml=0,wv=0,Qs=0,ic=0,hh=null,Ms=null,Sv=!1,Dp=0,u4=0,Lp=1/0,Ip=null,Ra=null,En=0,Oa=null,ac=null,qi=0,kv=0,Cv=null,h4=null,dh=0,Nv=null;function Zs(){return(Dt&2)!==0&&St!==0?St&-St:M.T!==null?Ov():Ak()}function d4(){if(Qs===0)if((St&536870912)===0||Ct){var i=De;De<<=1,(De&3932160)===0&&(De=262144),Qs=i}else Qs=536870912;return i=Ys.current,i!==null&&(i.flags|=32),Qs}function Ds(i,l,u){(i===qt&&(zt===2||zt===9)||i.cancelPendingCommit!==null)&&(lc(i,0),Ba(i,St,Qs,!1)),yl(i,u),((Dt&2)===0||i!==qt)&&(i===qt&&((Dt&2)===0&&(Ml|=u),cn===4&&Ba(i,St,Qs,!1)),ri(i))}function f4(i,l,u){if((Dt&6)!==0)throw Error(s(327));var p=!u&&(l&127)===0&&(l&i.expiredLanes)===0||Mt(i,l),b=p?oL(i,l):Ev(i,l,!0),x=p;do{if(b===0){rc&&!p&&Ba(i,l,0,!1);break}else{if(u=i.current.alternate,x&&!aL(u)){b=Ev(i,l,!1),x=!1;continue}if(b===2){if(x=l,i.errorRecoveryDisabledLanes&x)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){l=A;e:{var L=i;b=hh;var J=L.current.memoizedState.isDehydrated;if(J&&(lc(L,A).flags|=256),A=Ev(L,A,!1),A!==2){if(_v&&!J){L.errorRecoveryDisabledLanes|=x,Ml|=x,b=4;break e}x=Ms,Ms=b,x!==null&&(Ms===null?Ms=x:Ms.push.apply(Ms,x))}b=A}if(x=!1,b!==2)continue}}if(b===1){lc(i,0),Ba(i,l,0,!0);break}e:{switch(p=i,x=b,x){case 0:case 1:throw Error(s(345));case 4:if((l&4194048)!==l)break;case 6:Ba(p,l,Qs,!ja);break e;case 2:Ms=null;break;case 3:case 5:break;default:throw Error(s(329))}if((l&62914560)===l&&(b=Dp+300-Ot(),10<b)){if(Ba(p,l,Qs,!ja),dt(p,0,!0)!==0)break e;qi=l,p.timeoutHandle=F4(p4.bind(null,p,u,Ms,Ip,Sv,l,Qs,Ml,ic,ja,x,"Throttled",-0,0),b);break e}p4(p,u,Ms,Ip,Sv,l,Qs,Ml,ic,ja,x,null,-0,0)}}break}while(!0);ri(i)}function p4(i,l,u,p,b,x,A,L,J,le,me,ye,ue,he){if(i.timeoutHandle=-1,ye=l.subtreeFlags,ye&8192||(ye&16785408)===16785408){ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ti},a4(l,x,ye);var Ue=(x&62914560)===x?Dp-Ot():(x&4194048)===x?u4-Ot():0;if(Ue=FL(ye,Ue),Ue!==null){qi=x,i.cancelPendingCommit=Ue(w4.bind(null,i,l,x,u,p,b,A,L,J,me,ye,null,ue,he)),Ba(i,x,A,!le);return}}w4(i,l,x,u,p,b,A,L,J)}function aL(i){for(var l=i;;){var u=l.tag;if((u===0||u===11||u===15)&&l.flags&16384&&(u=l.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var p=0;p<u.length;p++){var b=u[p],x=b.getSnapshot;b=b.value;try{if(!Ws(x(),b))return!1}catch{return!1}}if(u=l.child,l.subtreeFlags&16384&&u!==null)u.return=l,l=u;else{if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ba(i,l,u,p){l&=~wv,l&=~Ml,i.suspendedLanes|=l,i.pingedLanes&=~l,p&&(i.warmLanes|=l),p=i.expirationTimes;for(var b=l;0<b;){var x=31-Re(b),A=1<<x;p[x]=-1,b&=~A}u!==0&&kk(i,u,l)}function Pp(){return(Dt&6)===0?(fh(0),!1):!0}function Av(){if(bt!==null){if(zt===0)var i=bt.return;else i=bt,Mi=Cl=null,V1(i),Jo=null,Yu=0,i=bt;for(;i!==null;)qN(i.alternate,i),i=i.return;bt=null}}function lc(i,l){var u=i.timeoutHandle;u!==-1&&(i.timeoutHandle=-1,NL(u)),u=i.cancelPendingCommit,u!==null&&(i.cancelPendingCommit=null,u()),qi=0,Av(),qt=i,bt=u=Oi(i.current,null),St=l,zt=0,Js=null,ja=!1,rc=Mt(i,l),_v=!1,ic=Qs=wv=Ml=Ta=cn=0,Ms=hh=null,Sv=!1,(l&8)!==0&&(l|=l&32);var p=i.entangledLanes;if(p!==0)for(i=i.entanglements,p&=l;0<p;){var b=31-Re(p),x=1<<b;l|=i[b],p&=~x}return Fi=l,ip(),u}function m4(i,l){ut=null,M.H=sh,l===Xo||l===fp?(l=RC(),zt=3):l===R1?(l=RC(),zt=4):zt=l===iv?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Js=l,bt===null&&(cn=1,Ap(i,br(l,i.current)))}function g4(){var i=Ys.current;return i===null?!0:(St&4194048)===St?Sr===null:(St&62914560)===St||(St&536870912)!==0?i===Sr:!1}function y4(){var i=M.H;return M.H=sh,i===null?sh:i}function v4(){var i=M.A;return M.A=rL,i}function zp(){cn=4,ja||(St&4194048)!==St&&Ys.current!==null||(rc=!0),(Ta&134217727)===0&&(Ml&134217727)===0||qt===null||Ba(qt,St,Qs,!1)}function Ev(i,l,u){var p=Dt;Dt|=2;var b=y4(),x=v4();(qt!==i||St!==l)&&(Ip=null,lc(i,l)),l=!1;var A=cn;e:do try{if(zt!==0&&bt!==null){var L=bt,J=Js;switch(zt){case 8:Av(),A=6;break e;case 3:case 2:case 9:case 6:Ys.current===null&&(l=!0);var le=zt;if(zt=0,Js=null,oc(i,L,J,le),u&&rc){A=0;break e}break;default:le=zt,zt=0,Js=null,oc(i,L,J,le)}}lL(),A=cn;break}catch(me){m4(i,me)}while(!0);return l&&i.shellSuspendCounter++,Mi=Cl=null,Dt=p,M.H=b,M.A=x,bt===null&&(qt=null,St=0,ip()),A}function lL(){for(;bt!==null;)b4(bt)}function oL(i,l){var u=Dt;Dt|=2;var p=y4(),b=v4();qt!==i||St!==l?(Ip=null,Lp=Ot()+500,lc(i,l)):rc=Mt(i,l);e:do try{if(zt!==0&&bt!==null){l=bt;var x=Js;t:switch(zt){case 1:zt=0,Js=null,oc(i,l,x,1);break;case 2:case 9:if(jC(x)){zt=0,Js=null,x4(l);break}l=function(){zt!==2&&zt!==9||qt!==i||(zt=7),ri(i)},x.then(l,l);break e;case 3:zt=7;break e;case 4:zt=5;break e;case 7:jC(x)?(zt=0,Js=null,x4(l)):(zt=0,Js=null,oc(i,l,x,7));break;case 5:var A=null;switch(bt.tag){case 26:A=bt.memoizedState;case 5:case 27:var L=bt;if(A?i5(A):L.stateNode.complete){zt=0,Js=null;var J=L.sibling;if(J!==null)bt=J;else{var le=L.return;le!==null?(bt=le,$p(le)):bt=null}break t}}zt=0,Js=null,oc(i,l,x,5);break;case 6:zt=0,Js=null,oc(i,l,x,6);break;case 8:Av(),cn=6;break e;default:throw Error(s(462))}}cL();break}catch(me){m4(i,me)}while(!0);return Mi=Cl=null,M.H=p,M.A=b,Dt=u,bt!==null?0:(qt=null,St=0,ip(),cn)}function cL(){for(;bt!==null&&!at();)b4(bt)}function b4(i){var l=VN(i.alternate,i,Fi);i.memoizedProps=i.pendingProps,l===null?$p(i):bt=l}function x4(i){var l=i,u=l.alternate;switch(l.tag){case 15:case 0:l=IN(u,l,l.pendingProps,l.type,void 0,St);break;case 11:l=IN(u,l,l.pendingProps,l.type.render,l.ref,St);break;case 5:V1(l);default:qN(u,l),l=bt=vC(l,Fi),l=VN(u,l,Fi)}i.memoizedProps=i.pendingProps,l===null?$p(i):bt=l}function oc(i,l,u,p){Mi=Cl=null,V1(l),Jo=null,Yu=0;var b=l.return;try{if(J8(i,b,l,u,St)){cn=1,Ap(i,br(u,i.current)),bt=null;return}}catch(x){if(b!==null)throw bt=b,x;cn=1,Ap(i,br(u,i.current)),bt=null;return}l.flags&32768?(Ct||p===1?i=!0:rc||(St&536870912)!==0?i=!1:(ja=i=!0,(p===2||p===9||p===3||p===6)&&(p=Ys.current,p!==null&&p.tag===13&&(p.flags|=16384))),_4(l,i)):$p(l)}function $p(i){var l=i;do{if((l.flags&32768)!==0){_4(l,ja);return}i=l.return;var u=eL(l.alternate,l,Fi);if(u!==null){bt=u;return}if(l=l.sibling,l!==null){bt=l;return}bt=l=i}while(l!==null);cn===0&&(cn=5)}function _4(i,l){do{var u=tL(i.alternate,i);if(u!==null){u.flags&=32767,bt=u;return}if(u=i.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!l&&(i=i.sibling,i!==null)){bt=i;return}bt=i=u}while(i!==null);cn=6,bt=null}function w4(i,l,u,p,b,x,A,L,J){i.cancelPendingCommit=null;do Hp();while(En!==0);if((Dt&6)!==0)throw Error(s(327));if(l!==null){if(l===i.current)throw Error(s(177));if(x=l.lanes|l.childLanes,x|=g1,Fy(i,u,x,A,L,J),i===qt&&(bt=qt=null,St=0),ac=l,Oa=i,qi=u,kv=x,Cv=b,h4=p,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,fL(Ge,function(){return A4(),null})):(i.callbackNode=null,i.callbackPriority=0),p=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||p){p=M.T,M.T=null,b=G.p,G.p=2,A=Dt,Dt|=4;try{nL(i,l,u)}finally{Dt=A,G.p=b,M.T=p}}En=1,S4(),k4(),C4()}}function S4(){if(En===1){En=0;var i=Oa,l=ac,u=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||u){u=M.T,M.T=null;var p=G.p;G.p=2;var b=Dt;Dt|=4;try{s4(l,i);var x=$v,A=cC(i.containerInfo),L=x.focusedElem,J=x.selectionRange;if(A!==L&&L&&L.ownerDocument&&oC(L.ownerDocument.documentElement,L)){if(J!==null&&h1(L)){var le=J.start,me=J.end;if(me===void 0&&(me=le),"selectionStart"in L)L.selectionStart=le,L.selectionEnd=Math.min(me,L.value.length);else{var ye=L.ownerDocument||document,ue=ye&&ye.defaultView||window;if(ue.getSelection){var he=ue.getSelection(),Ue=L.textContent.length,tt=Math.min(J.start,Ue),Vt=J.end===void 0?tt:Math.min(J.end,Ue);!he.extend&&tt>Vt&&(A=Vt,Vt=tt,tt=A);var se=lC(L,tt),te=lC(L,Vt);if(se&&te&&(he.rangeCount!==1||he.anchorNode!==se.node||he.anchorOffset!==se.offset||he.focusNode!==te.node||he.focusOffset!==te.offset)){var ie=ye.createRange();ie.setStart(se.node,se.offset),he.removeAllRanges(),tt>Vt?(he.addRange(ie),he.extend(te.node,te.offset)):(ie.setEnd(te.node,te.offset),he.addRange(ie))}}}}for(ye=[],he=L;he=he.parentNode;)he.nodeType===1&&ye.push({element:he,left:he.scrollLeft,top:he.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<ye.length;L++){var ge=ye[L];ge.element.scrollLeft=ge.left,ge.element.scrollTop=ge.top}}Zp=!!zv,$v=zv=null}finally{Dt=b,G.p=p,M.T=u}}i.current=l,En=2}}function k4(){if(En===2){En=0;var i=Oa,l=ac,u=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||u){u=M.T,M.T=null;var p=G.p;G.p=2;var b=Dt;Dt|=4;try{QN(i,l.alternate,l)}finally{Dt=b,G.p=p,M.T=u}}En=3}}function C4(){if(En===4||En===3){En=0,Zt();var i=Oa,l=ac,u=qi,p=h4;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?En=5:(En=0,ac=Oa=null,N4(i,i.pendingLanes));var b=i.pendingLanes;if(b===0&&(Ra=null),Ky(u),l=l.stateNode,fe&&typeof fe.onCommitFiberRoot=="function")try{fe.onCommitFiberRoot(ae,l,void 0,(l.current.flags&128)===128)}catch{}if(p!==null){l=M.T,b=G.p,G.p=2,M.T=null;try{for(var x=i.onRecoverableError,A=0;A<p.length;A++){var L=p[A];x(L.value,{componentStack:L.stack})}}finally{M.T=l,G.p=b}}(qi&3)!==0&&Hp(),ri(i),b=i.pendingLanes,(u&261930)!==0&&(b&42)!==0?i===Nv?dh++:(dh=0,Nv=i):dh=0,fh(0)}}function N4(i,l){(i.pooledCacheLanes&=l)===0&&(l=i.pooledCache,l!=null&&(i.pooledCache=null,Wu(l)))}function Hp(){return S4(),k4(),C4(),A4()}function A4(){if(En!==5)return!1;var i=Oa,l=kv;kv=0;var u=Ky(qi),p=M.T,b=G.p;try{G.p=32>u?32:u,M.T=null,u=Cv,Cv=null;var x=Oa,A=qi;if(En=0,ac=Oa=null,qi=0,(Dt&6)!==0)throw Error(s(331));var L=Dt;if(Dt|=4,o4(x.current),i4(x,x.current,A,u),Dt=L,fh(0,!1),fe&&typeof fe.onPostCommitFiberRoot=="function")try{fe.onPostCommitFiberRoot(ae,x)}catch{}return!0}finally{G.p=b,M.T=p,N4(i,l)}}function E4(i,l,u){l=br(u,l),l=rv(i.stateNode,l,2),i=Ca(i,l,2),i!==null&&(yl(i,2),ri(i))}function $t(i,l,u){if(i.tag===3)E4(i,i,u);else for(;l!==null;){if(l.tag===3){E4(l,i,u);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Ra===null||!Ra.has(p))){i=br(u,i),u=jN(2),p=Ca(l,u,2),p!==null&&(TN(u,p,l,i),yl(p,2),ri(p));break}}l=l.return}}function jv(i,l,u){var p=i.pingCache;if(p===null){p=i.pingCache=new iL;var b=new Set;p.set(l,b)}else b=p.get(l),b===void 0&&(b=new Set,p.set(l,b));b.has(u)||(_v=!0,b.add(u),i=uL.bind(null,i,l,u),l.then(i,i))}function uL(i,l,u){var p=i.pingCache;p!==null&&p.delete(l),i.pingedLanes|=i.suspendedLanes&u,i.warmLanes&=~u,qt===i&&(St&u)===u&&(cn===4||cn===3&&(St&62914560)===St&&300>Ot()-Dp?(Dt&2)===0&&lc(i,0):wv|=u,ic===St&&(ic=0)),ri(i)}function j4(i,l){l===0&&(l=Es()),i=wl(i,l),i!==null&&(yl(i,l),ri(i))}function hL(i){var l=i.memoizedState,u=0;l!==null&&(u=l.retryLane),j4(i,u)}function dL(i,l){var u=0;switch(i.tag){case 31:case 13:var p=i.stateNode,b=i.memoizedState;b!==null&&(u=b.retryLane);break;case 19:p=i.stateNode;break;case 22:p=i.stateNode._retryCache;break;default:throw Error(s(314))}p!==null&&p.delete(l),j4(i,u)}function fL(i,l){return Ks(i,l)}var Up=null,cc=null,Tv=!1,Vp=!1,Rv=!1,Ma=0;function ri(i){i!==cc&&i.next===null&&(cc===null?Up=cc=i:cc=cc.next=i),Vp=!0,Tv||(Tv=!0,mL())}function fh(i,l){if(!Rv&&Vp){Rv=!0;do for(var u=!1,p=Up;p!==null;){if(i!==0){var b=p.pendingLanes;if(b===0)var x=0;else{var A=p.suspendedLanes,L=p.pingedLanes;x=(1<<31-Re(42|i)+1)-1,x&=b&~(A&~L),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(u=!0,B4(p,x))}else x=St,x=dt(p,p===qt?x:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(x&3)===0||Mt(p,x)||(u=!0,B4(p,x));p=p.next}while(u);Rv=!1}}function pL(){T4()}function T4(){Vp=Tv=!1;var i=0;Ma!==0&&CL()&&(i=Ma);for(var l=Ot(),u=null,p=Up;p!==null;){var b=p.next,x=R4(p,l);x===0?(p.next=null,u===null?Up=b:u.next=b,b===null&&(cc=u)):(u=p,(i!==0||(x&3)!==0)&&(Vp=!0)),p=b}En!==0&&En!==5||fh(i),Ma!==0&&(Ma=0)}function R4(i,l){for(var u=i.suspendedLanes,p=i.pingedLanes,b=i.expirationTimes,x=i.pendingLanes&-62914561;0<x;){var A=31-Re(x),L=1<<A,J=b[A];J===-1?((L&u)===0||(L&p)!==0)&&(b[A]=sn(L,l)):J<=l&&(i.expiredLanes|=L),x&=~L}if(l=qt,u=St,u=dt(i,i===l?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),p=i.callbackNode,u===0||i===l&&(zt===2||zt===9)||i.cancelPendingCommit!==null)return p!==null&&p!==null&&et(p),i.callbackNode=null,i.callbackPriority=0;if((u&3)===0||Mt(i,u)){if(l=u&-u,l===i.callbackPriority)return l;switch(p!==null&&et(p),Ky(u)){case 2:case 8:u=_e;break;case 32:u=Ge;break;case 268435456:u=wt;break;default:u=Ge}return p=O4.bind(null,i),u=Ks(u,p),i.callbackPriority=l,i.callbackNode=u,l}return p!==null&&p!==null&&et(p),i.callbackPriority=2,i.callbackNode=null,2}function O4(i,l){if(En!==0&&En!==5)return i.callbackNode=null,i.callbackPriority=0,null;var u=i.callbackNode;if(Hp()&&i.callbackNode!==u)return null;var p=St;return p=dt(i,i===qt?p:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),p===0?null:(f4(i,p,l),R4(i,Ot()),i.callbackNode!=null&&i.callbackNode===u?O4.bind(null,i):null)}function B4(i,l){if(Hp())return null;f4(i,l,!0)}function mL(){AL(function(){(Dt&6)!==0?Ks(pe,pL):T4()})}function Ov(){if(Ma===0){var i=Go;i===0&&(i=Be,Be<<=1,(Be&261888)===0&&(Be=256)),Ma=i}return Ma}function M4(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Jf(""+i)}function D4(i,l){var u=l.ownerDocument.createElement("input");return u.name=l.name,u.value=l.value,i.id&&u.setAttribute("form",i.id),l.parentNode.insertBefore(u,l),i=new FormData(i),u.parentNode.removeChild(u),i}function gL(i,l,u,p,b){if(l==="submit"&&u&&u.stateNode===b){var x=M4((b[js]||null).action),A=p.submitter;A&&(l=(l=A[js]||null)?M4(l.formAction):A.getAttribute("formAction"),l!==null&&(x=l,A=null));var L=new tp("action","action",null,p,b);i.push({event:L,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Ma!==0){var J=A?D4(b,A):new FormData(b);Q1(u,{pending:!0,data:J,method:b.method,action:x},null,J)}}else typeof x=="function"&&(L.preventDefault(),J=A?D4(b,A):new FormData(b),Q1(u,{pending:!0,data:J,method:b.method,action:x},x,J))},currentTarget:b}]})}}for(var Bv=0;Bv<m1.length;Bv++){var Mv=m1[Bv],yL=Mv.toLowerCase(),vL=Mv[0].toUpperCase()+Mv.slice(1);$r(yL,"on"+vL)}$r(dC,"onAnimationEnd"),$r(fC,"onAnimationIteration"),$r(pC,"onAnimationStart"),$r("dblclick","onDoubleClick"),$r("focusin","onFocus"),$r("focusout","onBlur"),$r(M8,"onTransitionRun"),$r(D8,"onTransitionStart"),$r(L8,"onTransitionCancel"),$r(mC,"onTransitionEnd"),Mo("onMouseEnter",["mouseout","mouseover"]),Mo("onMouseLeave",["mouseout","mouseover"]),Mo("onPointerEnter",["pointerout","pointerover"]),Mo("onPointerLeave",["pointerout","pointerover"]),vl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vl("onBeforeInput",["compositionend","keypress","textInput","paste"]),vl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ph="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ph));function L4(i,l){l=(l&4)!==0;for(var u=0;u<i.length;u++){var p=i[u],b=p.event;p=p.listeners;e:{var x=void 0;if(l)for(var A=p.length-1;0<=A;A--){var L=p[A],J=L.instance,le=L.currentTarget;if(L=L.listener,J!==x&&b.isPropagationStopped())break e;x=L,b.currentTarget=le;try{x(b)}catch(me){rp(me)}b.currentTarget=null,x=J}else for(A=0;A<p.length;A++){if(L=p[A],J=L.instance,le=L.currentTarget,L=L.listener,J!==x&&b.isPropagationStopped())break e;x=L,b.currentTarget=le;try{x(b)}catch(me){rp(me)}b.currentTarget=null,x=J}}}}function xt(i,l){var u=l[Wy];u===void 0&&(u=l[Wy]=new Set);var p=i+"__bubble";u.has(p)||(I4(l,i,2,!1),u.add(p))}function Dv(i,l,u){var p=0;l&&(p|=4),I4(u,i,p,l)}var Fp="_reactListening"+Math.random().toString(36).slice(2);function Lv(i){if(!i[Fp]){i[Fp]=!0,Tk.forEach(function(u){u!=="selectionchange"&&(bL.has(u)||Dv(u,!1,i),Dv(u,!0,i))});var l=i.nodeType===9?i:i.ownerDocument;l===null||l[Fp]||(l[Fp]=!0,Dv("selectionchange",!1,l))}}function I4(i,l,u,p){switch(d5(l)){case 2:var b=WL;break;case 8:b=GL;break;default:b=Jv}u=b.bind(null,l,u,i),b=void 0,!n1||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(b=!0),p?b!==void 0?i.addEventListener(l,u,{capture:!0,passive:b}):i.addEventListener(l,u,!0):b!==void 0?i.addEventListener(l,u,{passive:b}):i.addEventListener(l,u,!1)}function Iv(i,l,u,p,b){var x=p;if((l&1)===0&&(l&2)===0&&p!==null)e:for(;;){if(p===null)return;var A=p.tag;if(A===3||A===4){var L=p.stateNode.containerInfo;if(L===b)break;if(A===4)for(A=p.return;A!==null;){var J=A.tag;if((J===3||J===4)&&A.stateNode.containerInfo===b)return;A=A.return}for(;L!==null;){if(A=Ro(L),A===null)return;if(J=A.tag,J===5||J===6||J===26||J===27){p=x=A;continue e}L=L.parentNode}}p=p.return}Uk(function(){var le=x,me=e1(u),ye=[];e:{var ue=gC.get(i);if(ue!==void 0){var he=tp,Ue=i;switch(i){case"keypress":if(Zf(u)===0)break e;case"keydown":case"keyup":he=d8;break;case"focusin":Ue="focus",he=a1;break;case"focusout":Ue="blur",he=a1;break;case"beforeblur":case"afterblur":he=a1;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=qk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=e8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=m8;break;case dC:case fC:case pC:he=s8;break;case mC:he=y8;break;case"scroll":case"scrollend":he=QD;break;case"wheel":he=b8;break;case"copy":case"cut":case"paste":he=i8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=Wk;break;case"toggle":case"beforetoggle":he=_8}var tt=(l&4)!==0,Vt=!tt&&(i==="scroll"||i==="scrollend"),se=tt?ue!==null?ue+"Capture":null:ue;tt=[];for(var te=le,ie;te!==null;){var ge=te;if(ie=ge.stateNode,ge=ge.tag,ge!==5&&ge!==26&&ge!==27||ie===null||se===null||(ge=Lu(te,se),ge!=null&&tt.push(mh(te,ge,ie))),Vt)break;te=te.return}0<tt.length&&(ue=new he(ue,Ue,null,u,me),ye.push({event:ue,listeners:tt}))}}if((l&7)===0){e:{if(ue=i==="mouseover"||i==="pointerover",he=i==="mouseout"||i==="pointerout",ue&&u!==Zy&&(Ue=u.relatedTarget||u.fromElement)&&(Ro(Ue)||Ue[To]))break e;if((he||ue)&&(ue=me.window===me?me:(ue=me.ownerDocument)?ue.defaultView||ue.parentWindow:window,he?(Ue=u.relatedTarget||u.toElement,he=le,Ue=Ue?Ro(Ue):null,Ue!==null&&(Vt=a(Ue),tt=Ue.tag,Ue!==Vt||tt!==5&&tt!==27&&tt!==6)&&(Ue=null)):(he=null,Ue=le),he!==Ue)){if(tt=qk,ge="onMouseLeave",se="onMouseEnter",te="mouse",(i==="pointerout"||i==="pointerover")&&(tt=Wk,ge="onPointerLeave",se="onPointerEnter",te="pointer"),Vt=he==null?ue:Du(he),ie=Ue==null?ue:Du(Ue),ue=new tt(ge,te+"leave",he,u,me),ue.target=Vt,ue.relatedTarget=ie,ge=null,Ro(me)===le&&(tt=new tt(se,te+"enter",Ue,u,me),tt.target=ie,tt.relatedTarget=Vt,ge=tt),Vt=ge,he&&Ue)t:{for(tt=xL,se=he,te=Ue,ie=0,ge=se;ge;ge=tt(ge))ie++;ge=0;for(var Xe=te;Xe;Xe=tt(Xe))ge++;for(;0<ie-ge;)se=tt(se),ie--;for(;0<ge-ie;)te=tt(te),ge--;for(;ie--;){if(se===te||te!==null&&se===te.alternate){tt=se;break t}se=tt(se),te=tt(te)}tt=null}else tt=null;he!==null&&P4(ye,ue,he,tt,!1),Ue!==null&&Vt!==null&&P4(ye,Vt,Ue,tt,!0)}}e:{if(ue=le?Du(le):window,he=ue.nodeName&&ue.nodeName.toLowerCase(),he==="select"||he==="input"&&ue.type==="file")var jt=tC;else if(Zk(ue))if(nC)jt=R8;else{jt=j8;var We=E8}else he=ue.nodeName,!he||he.toLowerCase()!=="input"||ue.type!=="checkbox"&&ue.type!=="radio"?le&&Qy(le.elementType)&&(jt=tC):jt=T8;if(jt&&(jt=jt(i,le))){eC(ye,jt,u,me);break e}We&&We(i,ue,le),i==="focusout"&&le&&ue.type==="number"&&le.memoizedProps.value!=null&&Jy(ue,"number",ue.value)}switch(We=le?Du(le):window,i){case"focusin":(Zk(We)||We.contentEditable==="true")&&($o=We,d1=le,Fu=null);break;case"focusout":Fu=d1=$o=null;break;case"mousedown":f1=!0;break;case"contextmenu":case"mouseup":case"dragend":f1=!1,uC(ye,u,me);break;case"selectionchange":if(B8)break;case"keydown":case"keyup":uC(ye,u,me)}var ft;if(o1)e:{switch(i){case"compositionstart":var kt="onCompositionStart";break e;case"compositionend":kt="onCompositionEnd";break e;case"compositionupdate":kt="onCompositionUpdate";break e}kt=void 0}else zo?Jk(i,u)&&(kt="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(kt="onCompositionStart");kt&&(Gk&&u.locale!=="ko"&&(zo||kt!=="onCompositionStart"?kt==="onCompositionEnd"&&zo&&(ft=Vk()):(va=me,s1="value"in va?va.value:va.textContent,zo=!0)),We=qp(le,kt),0<We.length&&(kt=new Kk(kt,i,null,u,me),ye.push({event:kt,listeners:We}),ft?kt.data=ft:(ft=Qk(u),ft!==null&&(kt.data=ft)))),(ft=S8?k8(i,u):C8(i,u))&&(kt=qp(le,"onBeforeInput"),0<kt.length&&(We=new Kk("onBeforeInput","beforeinput",null,u,me),ye.push({event:We,listeners:kt}),We.data=ft)),gL(ye,i,le,u,me)}L4(ye,l)})}function mh(i,l,u){return{instance:i,listener:l,currentTarget:u}}function qp(i,l){for(var u=l+"Capture",p=[];i!==null;){var b=i,x=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||x===null||(b=Lu(i,u),b!=null&&p.unshift(mh(i,b,x)),b=Lu(i,l),b!=null&&p.push(mh(i,b,x))),i.tag===3)return p;i=i.return}return[]}function xL(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function P4(i,l,u,p,b){for(var x=l._reactName,A=[];u!==null&&u!==p;){var L=u,J=L.alternate,le=L.stateNode;if(L=L.tag,J!==null&&J===p)break;L!==5&&L!==26&&L!==27||le===null||(J=le,b?(le=Lu(u,x),le!=null&&A.unshift(mh(u,le,J))):b||(le=Lu(u,x),le!=null&&A.push(mh(u,le,J)))),u=u.return}A.length!==0&&i.push({event:l,listeners:A})}var _L=/\r\n?/g,wL=/\u0000|\uFFFD/g;function z4(i){return(typeof i=="string"?i:""+i).replace(_L,`
`).replace(wL,"")}function $4(i,l){return l=z4(l),z4(i)===l}function Ut(i,l,u,p,b,x){switch(u){case"children":typeof p=="string"?l==="body"||l==="textarea"&&p===""||Lo(i,p):(typeof p=="number"||typeof p=="bigint")&&l!=="body"&&Lo(i,""+p);break;case"className":Yf(i,"class",p);break;case"tabIndex":Yf(i,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Yf(i,u,p);break;case"style":$k(i,p,x);break;case"data":if(l!=="object"){Yf(i,"data",p);break}case"src":case"href":if(p===""&&(l!=="a"||u!=="href")){i.removeAttribute(u);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){i.removeAttribute(u);break}p=Jf(""+p),i.setAttribute(u,p);break;case"action":case"formAction":if(typeof p=="function"){i.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(u==="formAction"?(l!=="input"&&Ut(i,l,"name",b.name,b,null),Ut(i,l,"formEncType",b.formEncType,b,null),Ut(i,l,"formMethod",b.formMethod,b,null),Ut(i,l,"formTarget",b.formTarget,b,null)):(Ut(i,l,"encType",b.encType,b,null),Ut(i,l,"method",b.method,b,null),Ut(i,l,"target",b.target,b,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){i.removeAttribute(u);break}p=Jf(""+p),i.setAttribute(u,p);break;case"onClick":p!=null&&(i.onclick=Ti);break;case"onScroll":p!=null&&xt("scroll",i);break;case"onScrollEnd":p!=null&&xt("scrollend",i);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(s(61));if(u=p.__html,u!=null){if(b.children!=null)throw Error(s(60));i.innerHTML=u}}break;case"multiple":i.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":i.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){i.removeAttribute("xlink:href");break}u=Jf(""+p),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(u,""+p):i.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(u,""):i.removeAttribute(u);break;case"capture":case"download":p===!0?i.setAttribute(u,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(u,p):i.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?i.setAttribute(u,p):i.removeAttribute(u);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?i.removeAttribute(u):i.setAttribute(u,p);break;case"popover":xt("beforetoggle",i),xt("toggle",i),Gf(i,"popover",p);break;case"xlinkActuate":ji(i,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":ji(i,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":ji(i,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":ji(i,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":ji(i,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":ji(i,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":ji(i,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":ji(i,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":ji(i,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":Gf(i,"is",p);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=XD.get(u)||u,Gf(i,u,p))}}function Pv(i,l,u,p,b,x){switch(u){case"style":$k(i,p,x);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(s(61));if(u=p.__html,u!=null){if(b.children!=null)throw Error(s(60));i.innerHTML=u}}break;case"children":typeof p=="string"?Lo(i,p):(typeof p=="number"||typeof p=="bigint")&&Lo(i,""+p);break;case"onScroll":p!=null&&xt("scroll",i);break;case"onScrollEnd":p!=null&&xt("scrollend",i);break;case"onClick":p!=null&&(i.onclick=Ti);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Rk.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(b=u.endsWith("Capture"),l=u.slice(2,b?u.length-7:void 0),x=i[js]||null,x=x!=null?x[u]:null,typeof x=="function"&&i.removeEventListener(l,x,b),typeof p=="function")){typeof x!="function"&&x!==null&&(u in i?i[u]=null:i.hasAttribute(u)&&i.removeAttribute(u)),i.addEventListener(l,p,b);break e}u in i?i[u]=p:p===!0?i.setAttribute(u,""):Gf(i,u,p)}}}function Jn(i,l,u){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xt("error",i),xt("load",i);var p=!1,b=!1,x;for(x in u)if(u.hasOwnProperty(x)){var A=u[x];if(A!=null)switch(x){case"src":p=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,l));default:Ut(i,l,x,A,u,null)}}b&&Ut(i,l,"srcSet",u.srcSet,u,null),p&&Ut(i,l,"src",u.src,u,null);return;case"input":xt("invalid",i);var L=x=A=b=null,J=null,le=null;for(p in u)if(u.hasOwnProperty(p)){var me=u[p];if(me!=null)switch(p){case"name":b=me;break;case"type":A=me;break;case"checked":J=me;break;case"defaultChecked":le=me;break;case"value":x=me;break;case"defaultValue":L=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(s(137,l));break;default:Ut(i,l,p,me,u,null)}}Lk(i,x,L,J,le,A,b,!1);return;case"select":xt("invalid",i),p=A=x=null;for(b in u)if(u.hasOwnProperty(b)&&(L=u[b],L!=null))switch(b){case"value":x=L;break;case"defaultValue":A=L;break;case"multiple":p=L;default:Ut(i,l,b,L,u,null)}l=x,u=A,i.multiple=!!p,l!=null?Do(i,!!p,l,!1):u!=null&&Do(i,!!p,u,!0);return;case"textarea":xt("invalid",i),x=b=p=null;for(A in u)if(u.hasOwnProperty(A)&&(L=u[A],L!=null))switch(A){case"value":p=L;break;case"defaultValue":b=L;break;case"children":x=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(s(91));break;default:Ut(i,l,A,L,u,null)}Pk(i,p,b,x);return;case"option":for(J in u)u.hasOwnProperty(J)&&(p=u[J],p!=null)&&(J==="selected"?i.selected=p&&typeof p!="function"&&typeof p!="symbol":Ut(i,l,J,p,u,null));return;case"dialog":xt("beforetoggle",i),xt("toggle",i),xt("cancel",i),xt("close",i);break;case"iframe":case"object":xt("load",i);break;case"video":case"audio":for(p=0;p<ph.length;p++)xt(ph[p],i);break;case"image":xt("error",i),xt("load",i);break;case"details":xt("toggle",i);break;case"embed":case"source":case"link":xt("error",i),xt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in u)if(u.hasOwnProperty(le)&&(p=u[le],p!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,l));default:Ut(i,l,le,p,u,null)}return;default:if(Qy(l)){for(me in u)u.hasOwnProperty(me)&&(p=u[me],p!==void 0&&Pv(i,l,me,p,u,void 0));return}}for(L in u)u.hasOwnProperty(L)&&(p=u[L],p!=null&&Ut(i,l,L,p,u,null))}function SL(i,l,u,p){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,x=null,A=null,L=null,J=null,le=null,me=null;for(he in u){var ye=u[he];if(u.hasOwnProperty(he)&&ye!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":J=ye;default:p.hasOwnProperty(he)||Ut(i,l,he,null,p,ye)}}for(var ue in p){var he=p[ue];if(ye=u[ue],p.hasOwnProperty(ue)&&(he!=null||ye!=null))switch(ue){case"type":x=he;break;case"name":b=he;break;case"checked":le=he;break;case"defaultChecked":me=he;break;case"value":A=he;break;case"defaultValue":L=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(s(137,l));break;default:he!==ye&&Ut(i,l,ue,he,p,ye)}}Xy(i,A,L,J,le,me,x,b);return;case"select":he=A=L=ue=null;for(x in u)if(J=u[x],u.hasOwnProperty(x)&&J!=null)switch(x){case"value":break;case"multiple":he=J;default:p.hasOwnProperty(x)||Ut(i,l,x,null,p,J)}for(b in p)if(x=p[b],J=u[b],p.hasOwnProperty(b)&&(x!=null||J!=null))switch(b){case"value":ue=x;break;case"defaultValue":L=x;break;case"multiple":A=x;default:x!==J&&Ut(i,l,b,x,p,J)}l=L,u=A,p=he,ue!=null?Do(i,!!u,ue,!1):!!p!=!!u&&(l!=null?Do(i,!!u,l,!0):Do(i,!!u,u?[]:"",!1));return;case"textarea":he=ue=null;for(L in u)if(b=u[L],u.hasOwnProperty(L)&&b!=null&&!p.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:Ut(i,l,L,null,p,b)}for(A in p)if(b=p[A],x=u[A],p.hasOwnProperty(A)&&(b!=null||x!=null))switch(A){case"value":ue=b;break;case"defaultValue":he=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:b!==x&&Ut(i,l,A,b,p,x)}Ik(i,ue,he);return;case"option":for(var Ue in u)ue=u[Ue],u.hasOwnProperty(Ue)&&ue!=null&&!p.hasOwnProperty(Ue)&&(Ue==="selected"?i.selected=!1:Ut(i,l,Ue,null,p,ue));for(J in p)ue=p[J],he=u[J],p.hasOwnProperty(J)&&ue!==he&&(ue!=null||he!=null)&&(J==="selected"?i.selected=ue&&typeof ue!="function"&&typeof ue!="symbol":Ut(i,l,J,ue,p,he));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var tt in u)ue=u[tt],u.hasOwnProperty(tt)&&ue!=null&&!p.hasOwnProperty(tt)&&Ut(i,l,tt,null,p,ue);for(le in p)if(ue=p[le],he=u[le],p.hasOwnProperty(le)&&ue!==he&&(ue!=null||he!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(s(137,l));break;default:Ut(i,l,le,ue,p,he)}return;default:if(Qy(l)){for(var Vt in u)ue=u[Vt],u.hasOwnProperty(Vt)&&ue!==void 0&&!p.hasOwnProperty(Vt)&&Pv(i,l,Vt,void 0,p,ue);for(me in p)ue=p[me],he=u[me],!p.hasOwnProperty(me)||ue===he||ue===void 0&&he===void 0||Pv(i,l,me,ue,p,he);return}}for(var se in u)ue=u[se],u.hasOwnProperty(se)&&ue!=null&&!p.hasOwnProperty(se)&&Ut(i,l,se,null,p,ue);for(ye in p)ue=p[ye],he=u[ye],!p.hasOwnProperty(ye)||ue===he||ue==null&&he==null||Ut(i,l,ye,ue,p,he)}function H4(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function kL(){if(typeof performance.getEntriesByType=="function"){for(var i=0,l=0,u=performance.getEntriesByType("resource"),p=0;p<u.length;p++){var b=u[p],x=b.transferSize,A=b.initiatorType,L=b.duration;if(x&&L&&H4(A)){for(A=0,L=b.responseEnd,p+=1;p<u.length;p++){var J=u[p],le=J.startTime;if(le>L)break;var me=J.transferSize,ye=J.initiatorType;me&&H4(ye)&&(J=J.responseEnd,A+=me*(J<L?1:(L-le)/(J-le)))}if(--p,l+=8*(x+A)/(b.duration/1e3),i++,10<i)break}}if(0<i)return l/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var zv=null,$v=null;function Kp(i){return i.nodeType===9?i:i.ownerDocument}function U4(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function V4(i,l){if(i===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&l==="foreignObject"?0:i}function Hv(i,l){return i==="textarea"||i==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Uv=null;function CL(){var i=window.event;return i&&i.type==="popstate"?i===Uv?!1:(Uv=i,!0):(Uv=null,!1)}var F4=typeof setTimeout=="function"?setTimeout:void 0,NL=typeof clearTimeout=="function"?clearTimeout:void 0,q4=typeof Promise=="function"?Promise:void 0,AL=typeof queueMicrotask=="function"?queueMicrotask:typeof q4<"u"?function(i){return q4.resolve(null).then(i).catch(EL)}:F4;function EL(i){setTimeout(function(){throw i})}function Da(i){return i==="head"}function K4(i,l){var u=l,p=0;do{var b=u.nextSibling;if(i.removeChild(u),b&&b.nodeType===8)if(u=b.data,u==="/$"||u==="/&"){if(p===0){i.removeChild(b),fc(l);return}p--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")p++;else if(u==="html")gh(i.ownerDocument.documentElement);else if(u==="head"){u=i.ownerDocument.head,gh(u);for(var x=u.firstChild;x;){var A=x.nextSibling,L=x.nodeName;x[Mu]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&x.rel.toLowerCase()==="stylesheet"||u.removeChild(x),x=A}}else u==="body"&&gh(i.ownerDocument.body);u=b}while(u);fc(l)}function W4(i,l){var u=i;i=0;do{var p=u.nextSibling;if(u.nodeType===1?l?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(l?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),p&&p.nodeType===8)if(u=p.data,u==="/$"){if(i===0)break;i--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||i++;u=p}while(u)}function Vv(i){var l=i.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var u=l;switch(l=l.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Vv(u),Gy(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}i.removeChild(u)}}function jL(i,l,u,p){for(;i.nodeType===1;){var b=u;if(i.nodeName.toLowerCase()!==l.toLowerCase()){if(!p&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(p){if(!i[Mu])switch(l){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(x=i.getAttribute("rel"),x==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(x!==b.rel||i.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||i.getAttribute("title")!==(b.title==null?null:b.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(x=i.getAttribute("src"),(x!==(b.src==null?null:b.src)||i.getAttribute("type")!==(b.type==null?null:b.type)||i.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&x&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(l==="input"&&i.type==="hidden"){var x=b.name==null?null:""+b.name;if(b.type==="hidden"&&i.getAttribute("name")===x)return i}else return i;if(i=kr(i.nextSibling),i===null)break}return null}function TL(i,l,u){if(l==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=kr(i.nextSibling),i===null))return null;return i}function G4(i,l){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=kr(i.nextSibling),i===null))return null;return i}function Fv(i){return i.data==="$?"||i.data==="$~"}function qv(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function RL(i,l){var u=i.ownerDocument;if(i.data==="$~")i._reactRetry=l;else if(i.data!=="$?"||u.readyState!=="loading")l();else{var p=function(){l(),u.removeEventListener("DOMContentLoaded",p)};u.addEventListener("DOMContentLoaded",p),i._reactRetry=p}}function kr(i){for(;i!=null;i=i.nextSibling){var l=i.nodeType;if(l===1||l===3)break;if(l===8){if(l=i.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return i}var Kv=null;function Y4(i){i=i.nextSibling;for(var l=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"||u==="/&"){if(l===0)return kr(i.nextSibling);l--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||l++}i=i.nextSibling}return null}function X4(i){i=i.previousSibling;for(var l=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(l===0)return i;l--}else u!=="/$"&&u!=="/&"||l++}i=i.previousSibling}return null}function J4(i,l,u){switch(l=Kp(u),i){case"html":if(i=l.documentElement,!i)throw Error(s(452));return i;case"head":if(i=l.head,!i)throw Error(s(453));return i;case"body":if(i=l.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function gh(i){for(var l=i.attributes;l.length;)i.removeAttributeNode(l[0]);Gy(i)}var Cr=new Map,Q4=new Set;function Wp(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ki=G.d;G.d={f:OL,r:BL,D:ML,C:DL,L:LL,m:IL,X:zL,S:PL,M:$L};function OL(){var i=Ki.f(),l=Pp();return i||l}function BL(i){var l=Oo(i);l!==null&&l.tag===5&&l.type==="form"?mN(l):Ki.r(i)}var uc=typeof document>"u"?null:document;function Z4(i,l,u){var p=uc;if(p&&typeof l=="string"&&l){var b=yr(l);b='link[rel="'+i+'"][href="'+b+'"]',typeof u=="string"&&(b+='[crossorigin="'+u+'"]'),Q4.has(b)||(Q4.add(b),i={rel:i,crossOrigin:u,href:l},p.querySelector(b)===null&&(l=p.createElement("link"),Jn(l,"link",i),In(l),p.head.appendChild(l)))}}function ML(i){Ki.D(i),Z4("dns-prefetch",i,null)}function DL(i,l){Ki.C(i,l),Z4("preconnect",i,l)}function LL(i,l,u){Ki.L(i,l,u);var p=uc;if(p&&i&&l){var b='link[rel="preload"][as="'+yr(l)+'"]';l==="image"&&u&&u.imageSrcSet?(b+='[imagesrcset="'+yr(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(b+='[imagesizes="'+yr(u.imageSizes)+'"]')):b+='[href="'+yr(i)+'"]';var x=b;switch(l){case"style":x=hc(i);break;case"script":x=dc(i)}Cr.has(x)||(i=m({rel:"preload",href:l==="image"&&u&&u.imageSrcSet?void 0:i,as:l},u),Cr.set(x,i),p.querySelector(b)!==null||l==="style"&&p.querySelector(yh(x))||l==="script"&&p.querySelector(vh(x))||(l=p.createElement("link"),Jn(l,"link",i),In(l),p.head.appendChild(l)))}}function IL(i,l){Ki.m(i,l);var u=uc;if(u&&i){var p=l&&typeof l.as=="string"?l.as:"script",b='link[rel="modulepreload"][as="'+yr(p)+'"][href="'+yr(i)+'"]',x=b;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=dc(i)}if(!Cr.has(x)&&(i=m({rel:"modulepreload",href:i},l),Cr.set(x,i),u.querySelector(b)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(vh(x)))return}p=u.createElement("link"),Jn(p,"link",i),In(p),u.head.appendChild(p)}}}function PL(i,l,u){Ki.S(i,l,u);var p=uc;if(p&&i){var b=Bo(p).hoistableStyles,x=hc(i);l=l||"default";var A=b.get(x);if(!A){var L={loading:0,preload:null};if(A=p.querySelector(yh(x)))L.loading=5;else{i=m({rel:"stylesheet",href:i,"data-precedence":l},u),(u=Cr.get(x))&&Wv(i,u);var J=A=p.createElement("link");In(J),Jn(J,"link",i),J._p=new Promise(function(le,me){J.onload=le,J.onerror=me}),J.addEventListener("load",function(){L.loading|=1}),J.addEventListener("error",function(){L.loading|=2}),L.loading|=4,Gp(A,l,p)}A={type:"stylesheet",instance:A,count:1,state:L},b.set(x,A)}}}function zL(i,l){Ki.X(i,l);var u=uc;if(u&&i){var p=Bo(u).hoistableScripts,b=dc(i),x=p.get(b);x||(x=u.querySelector(vh(b)),x||(i=m({src:i,async:!0},l),(l=Cr.get(b))&&Gv(i,l),x=u.createElement("script"),In(x),Jn(x,"link",i),u.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},p.set(b,x))}}function $L(i,l){Ki.M(i,l);var u=uc;if(u&&i){var p=Bo(u).hoistableScripts,b=dc(i),x=p.get(b);x||(x=u.querySelector(vh(b)),x||(i=m({src:i,async:!0,type:"module"},l),(l=Cr.get(b))&&Gv(i,l),x=u.createElement("script"),In(x),Jn(x,"link",i),u.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},p.set(b,x))}}function e5(i,l,u,p){var b=(b=ee.current)?Wp(b):null;if(!b)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(l=hc(u.href),u=Bo(b).hoistableStyles,p=u.get(l),p||(p={type:"style",instance:null,count:0,state:null},u.set(l,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){i=hc(u.href);var x=Bo(b).hoistableStyles,A=x.get(i);if(A||(b=b.ownerDocument||b,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(i,A),(x=b.querySelector(yh(i)))&&!x._p&&(A.instance=x,A.state.loading=5),Cr.has(i)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Cr.set(i,u),x||HL(b,i,u,A.state))),l&&p===null)throw Error(s(528,""));return A}if(l&&p!==null)throw Error(s(529,""));return null;case"script":return l=u.async,u=u.src,typeof u=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=dc(u),u=Bo(b).hoistableScripts,p=u.get(l),p||(p={type:"script",instance:null,count:0,state:null},u.set(l,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function hc(i){return'href="'+yr(i)+'"'}function yh(i){return'link[rel="stylesheet"]['+i+"]"}function t5(i){return m({},i,{"data-precedence":i.precedence,precedence:null})}function HL(i,l,u,p){i.querySelector('link[rel="preload"][as="style"]['+l+"]")?p.loading=1:(l=i.createElement("link"),p.preload=l,l.addEventListener("load",function(){return p.loading|=1}),l.addEventListener("error",function(){return p.loading|=2}),Jn(l,"link",u),In(l),i.head.appendChild(l))}function dc(i){return'[src="'+yr(i)+'"]'}function vh(i){return"script[async]"+i}function n5(i,l,u){if(l.count++,l.instance===null)switch(l.type){case"style":var p=i.querySelector('style[data-href~="'+yr(u.href)+'"]');if(p)return l.instance=p,In(p),p;var b=m({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return p=(i.ownerDocument||i).createElement("style"),In(p),Jn(p,"style",b),Gp(p,u.precedence,i),l.instance=p;case"stylesheet":b=hc(u.href);var x=i.querySelector(yh(b));if(x)return l.state.loading|=4,l.instance=x,In(x),x;p=t5(u),(b=Cr.get(b))&&Wv(p,b),x=(i.ownerDocument||i).createElement("link"),In(x);var A=x;return A._p=new Promise(function(L,J){A.onload=L,A.onerror=J}),Jn(x,"link",p),l.state.loading|=4,Gp(x,u.precedence,i),l.instance=x;case"script":return x=dc(u.src),(b=i.querySelector(vh(x)))?(l.instance=b,In(b),b):(p=u,(b=Cr.get(x))&&(p=m({},u),Gv(p,b)),i=i.ownerDocument||i,b=i.createElement("script"),In(b),Jn(b,"link",p),i.head.appendChild(b),l.instance=b);case"void":return null;default:throw Error(s(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(p=l.instance,l.state.loading|=4,Gp(p,u.precedence,i));return l.instance}function Gp(i,l,u){for(var p=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=p.length?p[p.length-1]:null,x=b,A=0;A<p.length;A++){var L=p[A];if(L.dataset.precedence===l)x=L;else if(x!==b)break}x?x.parentNode.insertBefore(i,x.nextSibling):(l=u.nodeType===9?u.head:u,l.insertBefore(i,l.firstChild))}function Wv(i,l){i.crossOrigin==null&&(i.crossOrigin=l.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=l.referrerPolicy),i.title==null&&(i.title=l.title)}function Gv(i,l){i.crossOrigin==null&&(i.crossOrigin=l.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=l.referrerPolicy),i.integrity==null&&(i.integrity=l.integrity)}var Yp=null;function s5(i,l,u){if(Yp===null){var p=new Map,b=Yp=new Map;b.set(u,p)}else b=Yp,p=b.get(u),p||(p=new Map,b.set(u,p));if(p.has(i))return p;for(p.set(i,null),u=u.getElementsByTagName(i),b=0;b<u.length;b++){var x=u[b];if(!(x[Mu]||x[Wn]||i==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var A=x.getAttribute(l)||"";A=i+A;var L=p.get(A);L?L.push(x):p.set(A,[x])}}return p}function r5(i,l,u){i=i.ownerDocument||i,i.head.insertBefore(u,l==="title"?i.querySelector("head > title"):null)}function UL(i,l,u){if(u===1||l.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;return l.rel==="stylesheet"?(i=l.disabled,typeof l.precedence=="string"&&i==null):!0;case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function i5(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function VL(i,l,u,p){if(u.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var b=hc(p.href),x=l.querySelector(yh(b));if(x){l=x._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(i.count++,i=Xp.bind(i),l.then(i,i)),u.state.loading|=4,u.instance=x,In(x);return}x=l.ownerDocument||l,p=t5(p),(b=Cr.get(b))&&Wv(p,b),x=x.createElement("link"),In(x);var A=x;A._p=new Promise(function(L,J){A.onload=L,A.onerror=J}),Jn(x,"link",p),u.instance=x}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(u,l),(l=u.state.preload)&&(u.state.loading&3)===0&&(i.count++,u=Xp.bind(i),l.addEventListener("load",u),l.addEventListener("error",u))}}var Yv=0;function FL(i,l){return i.stylesheets&&i.count===0&&Qp(i,i.stylesheets),0<i.count||0<i.imgCount?function(u){var p=setTimeout(function(){if(i.stylesheets&&Qp(i,i.stylesheets),i.unsuspend){var x=i.unsuspend;i.unsuspend=null,x()}},6e4+l);0<i.imgBytes&&Yv===0&&(Yv=62500*kL());var b=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Qp(i,i.stylesheets),i.unsuspend)){var x=i.unsuspend;i.unsuspend=null,x()}},(i.imgBytes>Yv?50:800)+l);return i.unsuspend=u,function(){i.unsuspend=null,clearTimeout(p),clearTimeout(b)}}:null}function Xp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qp(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Jp=null;function Qp(i,l){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Jp=new Map,l.forEach(qL,i),Jp=null,Xp.call(i))}function qL(i,l){if(!(l.state.loading&4)){var u=Jp.get(i);if(u)var p=u.get(null);else{u=new Map,Jp.set(i,u);for(var b=i.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<b.length;x++){var A=b[x];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(u.set(A.dataset.precedence,A),p=A)}p&&u.set(null,p)}b=l.instance,A=b.getAttribute("data-precedence"),x=u.get(A)||p,x===p&&u.set(null,b),u.set(A,b),this.count++,p=Xp.bind(this),b.addEventListener("load",p),b.addEventListener("error",p),x?x.parentNode.insertBefore(b,x.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(b,i.firstChild)),l.state.loading|=4}}var bh={$$typeof:E,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function KL(i,l,u,p,b,x,A,L,J){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=jo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jo(0),this.hiddenUpdates=jo(null),this.identifierPrefix=p,this.onUncaughtError=b,this.onCaughtError=x,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=J,this.incompleteTransitions=new Map}function a5(i,l,u,p,b,x,A,L,J,le,me,ye){return i=new KL(i,l,u,A,J,le,me,ye,L),l=1,x===!0&&(l|=24),x=Gs(3,null,null,l),i.current=x,x.stateNode=i,l=E1(),l.refCount++,i.pooledCache=l,l.refCount++,x.memoizedState={element:p,isDehydrated:u,cache:l},O1(x),i}function l5(i){return i?(i=Vo,i):Vo}function o5(i,l,u,p,b,x){b=l5(b),p.context===null?p.context=b:p.pendingContext=b,p=ka(l),p.payload={element:u},x=x===void 0?null:x,x!==null&&(p.callback=x),u=Ca(i,p,l),u!==null&&(Ds(u,i,l),Ju(u,i,l))}function c5(i,l){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<l?u:l}}function Xv(i,l){c5(i,l),(i=i.alternate)&&c5(i,l)}function u5(i){if(i.tag===13||i.tag===31){var l=wl(i,67108864);l!==null&&Ds(l,i,67108864),Xv(i,67108864)}}function h5(i){if(i.tag===13||i.tag===31){var l=Zs();l=qy(l);var u=wl(i,l);u!==null&&Ds(u,i,l),Xv(i,l)}}var Zp=!0;function WL(i,l,u,p){var b=M.T;M.T=null;var x=G.p;try{G.p=2,Jv(i,l,u,p)}finally{G.p=x,M.T=b}}function GL(i,l,u,p){var b=M.T;M.T=null;var x=G.p;try{G.p=8,Jv(i,l,u,p)}finally{G.p=x,M.T=b}}function Jv(i,l,u,p){if(Zp){var b=Qv(p);if(b===null)Iv(i,l,p,em,u),f5(i,p);else if(XL(b,i,l,u,p))p.stopPropagation();else if(f5(i,p),l&4&&-1<YL.indexOf(i)){for(;b!==null;){var x=Oo(b);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var A=ze(x.pendingLanes);if(A!==0){var L=x;for(L.pendingLanes|=2,L.entangledLanes|=2;A;){var J=1<<31-Re(A);L.entanglements[1]|=J,A&=~J}ri(x),(Dt&6)===0&&(Lp=Ot()+500,fh(0))}}break;case 31:case 13:L=wl(x,2),L!==null&&Ds(L,x,2),Pp(),Xv(x,2)}if(x=Qv(p),x===null&&Iv(i,l,p,em,u),x===b)break;b=x}b!==null&&p.stopPropagation()}else Iv(i,l,p,null,u)}}function Qv(i){return i=e1(i),Zv(i)}var em=null;function Zv(i){if(em=null,i=Ro(i),i!==null){var l=a(i);if(l===null)i=null;else{var u=l.tag;if(u===13){if(i=o(l),i!==null)return i;i=null}else if(u===31){if(i=c(l),i!==null)return i;i=null}else if(u===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;i=null}else l!==i&&(i=null)}}return em=i,null}function d5(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Kn()){case pe:return 2;case _e:return 8;case Ge:case it:return 32;case wt:return 268435456;default:return 32}default:return 32}}var eb=!1,La=null,Ia=null,Pa=null,xh=new Map,_h=new Map,za=[],YL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function f5(i,l){switch(i){case"focusin":case"focusout":La=null;break;case"dragenter":case"dragleave":Ia=null;break;case"mouseover":case"mouseout":Pa=null;break;case"pointerover":case"pointerout":xh.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":_h.delete(l.pointerId)}}function wh(i,l,u,p,b,x){return i===null||i.nativeEvent!==x?(i={blockedOn:l,domEventName:u,eventSystemFlags:p,nativeEvent:x,targetContainers:[b]},l!==null&&(l=Oo(l),l!==null&&u5(l)),i):(i.eventSystemFlags|=p,l=i.targetContainers,b!==null&&l.indexOf(b)===-1&&l.push(b),i)}function XL(i,l,u,p,b){switch(l){case"focusin":return La=wh(La,i,l,u,p,b),!0;case"dragenter":return Ia=wh(Ia,i,l,u,p,b),!0;case"mouseover":return Pa=wh(Pa,i,l,u,p,b),!0;case"pointerover":var x=b.pointerId;return xh.set(x,wh(xh.get(x)||null,i,l,u,p,b)),!0;case"gotpointercapture":return x=b.pointerId,_h.set(x,wh(_h.get(x)||null,i,l,u,p,b)),!0}return!1}function p5(i){var l=Ro(i.target);if(l!==null){var u=a(l);if(u!==null){if(l=u.tag,l===13){if(l=o(u),l!==null){i.blockedOn=l,Ek(i.priority,function(){h5(u)});return}}else if(l===31){if(l=c(u),l!==null){i.blockedOn=l,Ek(i.priority,function(){h5(u)});return}}else if(l===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function tm(i){if(i.blockedOn!==null)return!1;for(var l=i.targetContainers;0<l.length;){var u=Qv(i.nativeEvent);if(u===null){u=i.nativeEvent;var p=new u.constructor(u.type,u);Zy=p,u.target.dispatchEvent(p),Zy=null}else return l=Oo(u),l!==null&&u5(l),i.blockedOn=u,!1;l.shift()}return!0}function m5(i,l,u){tm(i)&&u.delete(l)}function JL(){eb=!1,La!==null&&tm(La)&&(La=null),Ia!==null&&tm(Ia)&&(Ia=null),Pa!==null&&tm(Pa)&&(Pa=null),xh.forEach(m5),_h.forEach(m5)}function nm(i,l){i.blockedOn===l&&(i.blockedOn=null,eb||(eb=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,JL)))}var sm=null;function g5(i){sm!==i&&(sm=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){sm===i&&(sm=null);for(var l=0;l<i.length;l+=3){var u=i[l],p=i[l+1],b=i[l+2];if(typeof p!="function"){if(Zv(p||u)===null)continue;break}var x=Oo(u);x!==null&&(i.splice(l,3),l-=3,Q1(x,{pending:!0,data:b,method:u.method,action:p},p,b))}}))}function fc(i){function l(J){return nm(J,i)}La!==null&&nm(La,i),Ia!==null&&nm(Ia,i),Pa!==null&&nm(Pa,i),xh.forEach(l),_h.forEach(l);for(var u=0;u<za.length;u++){var p=za[u];p.blockedOn===i&&(p.blockedOn=null)}for(;0<za.length&&(u=za[0],u.blockedOn===null);)p5(u),u.blockedOn===null&&za.shift();if(u=(i.ownerDocument||i).$$reactFormReplay,u!=null)for(p=0;p<u.length;p+=3){var b=u[p],x=u[p+1],A=b[js]||null;if(typeof x=="function")A||g5(u);else if(A){var L=null;if(x&&x.hasAttribute("formAction")){if(b=x,A=x[js]||null)L=A.formAction;else if(Zv(b)!==null)continue}else L=A.action;typeof L=="function"?u[p+1]=L:(u.splice(p,3),p-=3),g5(u)}}}function y5(){function i(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(A){return b=A})},focusReset:"manual",scroll:"manual"})}function l(){b!==null&&(b(),b=null),p||setTimeout(u,20)}function u(){if(!p&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,b=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(u,100),function(){p=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),b!==null&&(b(),b=null)}}}function tb(i){this._internalRoot=i}rm.prototype.render=tb.prototype.render=function(i){var l=this._internalRoot;if(l===null)throw Error(s(409));var u=l.current,p=Zs();o5(u,p,i,l,null,null)},rm.prototype.unmount=tb.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var l=i.containerInfo;o5(i.current,2,null,i,null,null),Pp(),l[To]=null}};function rm(i){this._internalRoot=i}rm.prototype.unstable_scheduleHydration=function(i){if(i){var l=Ak();i={blockedOn:null,target:i,priority:l};for(var u=0;u<za.length&&l!==0&&l<za[u].priority;u++);za.splice(u,0,i),u===0&&p5(i)}};var v5=e.version;if(v5!=="19.2.3")throw Error(s(527,v5,"19.2.3"));G.findDOMNode=function(i){var l=i._reactInternals;if(l===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=d(l),i=i!==null?g(i):null,i=i===null?null:i.stateNode,i};var QL={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var im=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!im.isDisabled&&im.supportsFiber)try{ae=im.inject(QL),fe=im}catch{}}return kh.createRoot=function(i,l){if(!r(i))throw Error(s(299));var u=!1,p="",b=CN,x=NN,A=AN;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(A=l.onRecoverableError)),l=a5(i,1,!1,null,null,u,p,null,b,x,A,y5),i[To]=l.current,Lv(i),new tb(l)},kh.hydrateRoot=function(i,l,u){if(!r(i))throw Error(s(299));var p=!1,b="",x=CN,A=NN,L=AN,J=null;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(b=u.identifierPrefix),u.onUncaughtError!==void 0&&(x=u.onUncaughtError),u.onCaughtError!==void 0&&(A=u.onCaughtError),u.onRecoverableError!==void 0&&(L=u.onRecoverableError),u.formState!==void 0&&(J=u.formState)),l=a5(i,1,!0,l,u??null,p,b,J,x,A,L,y5),l.context=l5(null),u=l.current,p=Zs(),p=qy(p),b=ka(p),b.callback=null,Ca(u,b,p),u=p,l.current.lanes=u,yl(l,u),ri(l),i[To]=l.current,Lv(i),new rm(l)},kh.version="19.2.3",kh}var j5;function lI(){if(j5)return rb.exports;j5=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),rb.exports=aI(),rb.exports}var oI=lI(),ob={exports:{}},cb={};var T5;function cI(){if(T5)return cb;T5=1;var t=gg().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return cb.c=function(e){return t.H.useMemoCache(e)},cb}var R5;function uI(){return R5||(R5=1,ob.exports=cI()),ob.exports}var He=uI();const hI=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),dI=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),O5=t=>{const e=dI(t);return e.charAt(0).toUpperCase()+e.slice(1)},cT=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),fI=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var pI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const mI=K.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:a,iconNode:o,...c},h)=>K.createElement("svg",{ref:h,...pI,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:cT("lucide",r),...!a&&!fI(c)&&{"aria-hidden":"true"},...c},[...o.map(([d,g])=>K.createElement(d,g)),...Array.isArray(a)?a:[a]]));const Te=(t,e)=>{const n=K.forwardRef(({className:s,...r},a)=>K.createElement(mI,{ref:a,iconNode:e,className:cT(`lucide-${hI(O5(t))}`,`lucide-${t}`,s),...r}));return n.displayName=O5(t),n};const gI=[["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}],["path",{d:"M10 4v4",key:"pp8u80"}],["path",{d:"M2 8h20",key:"d11cs7"}],["path",{d:"M6 4v4",key:"1svtjw"}]],uT=Te("app-window",gI);const yI=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],dl=Te("box",yI);const vI=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],hT=Te("calendar",vI);const bI=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Cn=Te("check",bI);const xI=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],rs=Te("chevron-down",xI);const _I=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Br=Te("chevron-right",_I);const wI=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],SI=Te("chevron-up",wI);const kI=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],CI=Te("chevrons-up-down",kI);const NI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],xo=Te("circle-alert",NI);const AI=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],EI=Te("circle-check-big",AI);const jI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Qr=Te("circle-check",jI);const TI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],pf=Te("circle-question-mark",TI);const RI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Si=Te("circle-x",RI);const OI=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],oa=Te("clock",OI);const BI=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],MI=Te("cloud",BI);const DI=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],LI=Te("columns-3",DI);const II=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],us=Te("copy",II);const PI=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],yg=Te("cpu",PI);const zI=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],fl=Te("database",zI);const $I=[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]],HI=Te("diamond",$I);const UI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],oS=Te("disc",UI);const VI=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],cS=Te("external-link",VI);const FI=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],uS=Te("eye-off",FI);const qI=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],hS=Te("eye",qI);const KI=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],c0=Te("file-check",KI);const WI=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],GI=Te("file-down",WI);const YI=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],bi=Te("file-text",YI);const XI=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],vg=Te("folder-open",XI);const JI=[["path",{d:"M2 9.35V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h7",key:"y8kt7d"}],["path",{d:"m8 16 3-3-3-3",key:"rlqrt1"}]],QI=Te("folder-symlink",JI);const ZI=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],e7=Te("folder-tree",ZI);const t7=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],n7=Te("funnel",t7);const s7=[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]],dS=Te("ghost",s7);const r7=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],u0=Te("git-branch",r7);const i7=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],a7=Te("git-compare",i7);const l7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Mr=Te("globe",l7);const o7=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],Hs=Te("hard-drive",o7);const c7=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],u7=Te("hash",c7);const h7=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],bg=Te("hexagon",h7);const d7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],f7=Te("info",d7);const p7=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],mf=Te("key-round",p7);const m7=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],gf=Te("key",m7);const g7=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],cl=Te("layers",g7);const y7=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],dT=Te("layout-grid",y7);const v7=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],uu=Te("link",v7);const b7=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],x7=Te("list",b7);const _7=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Xl=Te("loader-circle",_7);const w7=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],xg=Te("lock",w7);const S7=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],k7=Te("mail",S7);const C7=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],N7=Te("maximize-2",C7);const A7=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],ns=Te("network",A7);const E7=[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]],j7=Te("newspaper",E7);const T7=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],fT=Te("package",T7);const R7=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],fS=Te("pause",R7);const O7=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],pS=Te("play",O7);const B7=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M17 8a1 1 0 0 1 1 1v4a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1z",key:"1xoxul"}],["path",{d:"M9 8V2",key:"14iosj"}]],pT=Te("plug",B7);const M7=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],D7=Te("puzzle",M7);const L7=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],I7=Te("radio",L7);const P7=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Mn=Te("refresh-cw",P7);const z7=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],mS=Te("rocket",z7);const $7=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],H7=Te("rotate-ccw",$7);const U7=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],Vd=Te("route",U7);const V7=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],F7=Te("save",V7);const q7=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],gS=Te("search",q7);const K7=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],W7=Te("send",K7);const G7=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],Xr=Te("server",G7);const Y7=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],X7=Te("settings",Y7);const J7=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Q7=Te("share-2",J7);const Z7=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],mT=Te("shield-check",Z7);const eP=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],hu=Te("shield",eP);const tP=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],nP=Te("sparkles",tP);const sP=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],rP=Te("tag",sP);const iP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],aP=Te("target",iP);const lP=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],oP=Te("trash-2",lP);const cP=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],h0=Te("triangle-alert",cP);const uP=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],gT=Te("user",uP);const hP=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],yS=Te("x",hP);const dP=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],_g=Te("zap",dP);const fP=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],pP=Te("zoom-in",fP);const mP=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],gP=Te("zoom-out",mP),d0=new Map,f0=new Map,Sd=new Map;function yP(t){t?(d0.delete(t),f0.delete(t),Sd.delete(t)):(d0.clear(),f0.clear(),Sd.clear())}function B5(t){return t===""?0:t==="apps"?1:t==="batch"?2:t==="networking.k8s.io"?3:t==="storage.k8s.io"?4:t==="rbac.authorization.k8s.io"?5:t.endsWith(".k8s.io")?10:100}function vP(t){const e=t.group||"";return e?`${t.name}.${e}`:t.name}function Jl(t){const e=t.group||"",n=t.version||"v1";return e?`/apis/${e}/${n}`:"/api/v1"}function M5(t,e,n){const s=vP(n);t.set(s,n);const r=B5(n.group||""),a=o=>{const c=e.get(o);if(!c)e.set(o,n);else{const h=B5(c.group||"");r<h&&e.set(o,n)}};if(a(n.name),n.singularName&&a(n.singularName),n.shortNames)for(const o of n.shortNames)a(o)}async function ub(t,e){const n=`/contexts/${e}${t}`,s=await fetch(n);if(!s.ok)throw new Error(`API request failed: ${s.status} ${s.statusText}`);return s.json()}async function wg(t){const e=f0.get(t);if(e)return e;const n=Sd.get(t);if(n)return n;const s=(async()=>{const r=new Map,a=new Map;try{const o=await ub("/api/v1",t);for(const c of o.resources){if(c.name.includes("/"))continue;const h={...c,group:"",version:"v1"};M5(r,a,h)}}catch(o){console.warn("Failed to fetch core v1 resources:",o)}try{const o=await ub("/apis",t);await Promise.all(o.groups.map(async c=>{const h=c.preferredVersion?.version||c.versions[0]?.version;if(!h)return;const d=`/apis/${c.name}/${h}`;try{const g=await ub(d,t);for(const m of g.resources){if(m.name.includes("/"))continue;const v={...m,group:m.group||c.name,version:m.version||h};M5(r,a,v)}}catch(g){console.warn(`Failed to fetch resources for ${d}:`,g)}}))}catch(o){console.warn("Failed to fetch API groups:",o)}return d0.set(t,r),f0.set(t,a),Sd.delete(t),a})();return Sd.set(t,s),s}async function _o(t,e){return(await wg(t)).get(e)}async function bP(t,e){return await wg(t),d0.get(t)?.get(e)}async function D5(t,e,n){const s=await wg(t);let r="";n&&n.includes("/")&&(r=n.split("/")[0]);for(const a of s.values())if(a.kind===e)if(n){if((a.group||"")===r)return a}else return a;if(n){for(const a of s.values())if(a.kind===e)return a}}function xP(t){wg(t).catch(console.error)}function _P(t){const e=t.spec;if(!e)throw new Error("CRD is missing spec");const n=e.versions.find(a=>a.storage),s=e.versions.find(a=>a.served),r=n?.name||s?.name||e.versions[0]?.name;return{name:e.names.plural,singularName:e.names.singular||"",namespaced:e.scope==="Namespaced",group:e.group,version:r,kind:e.names.kind,verbs:["get","list","watch","create","update","patch","delete"],shortNames:e.names.shortNames}}async function ca(t,e){const n=e?`/contexts/${e}${t}`:t,s=await fetch(n);if(!s.ok)throw new Error(`API request failed: ${s.status} ${s.statusText}`);return s.json()}async function wP(t){return ca("/api/v1/namespaces",t)}async function SP(t){return(await ca("/apis/apiextensions.k8s.io/v1/customresourcedefinitions",t)).items}async function Cx(t,e,n,s){const r=Jl(e),a=e.namespaced&&s?`${r}/namespaces/${s}/${e.name}/${n}`:`${r}/${e.name}/${n}`;return ca(a,t)}async function yT(t,e,n,s,r){const a=Jl(e),o=e.namespaced&&r?`${a}/namespaces/${r}/${e.name}/${n}`:`${a}/${e.name}/${n}`,c=`/contexts/${t}${o}`,h=await fetch(c,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!h.ok){const d=await h.text();let g=`API request failed: ${h.status} ${h.statusText}`;try{const m=JSON.parse(d);m.message&&(g=m.message)}catch{}throw new Error(g)}return h.json()}async function Sg(t,e,n){const s=Jl(e),r=e.namespaced&&n?`${s}/namespaces/${n}/${e.name}`:`${s}/${e.name}`;return(await ca(r,t)).items}async function Nx(t,e,n){const s=n?`involvedObject.name=${e},involvedObject.namespace=${n}`:`involvedObject.name=${e}`,r=n?`/api/v1/namespaces/${n}/events?fieldSelector=${encodeURIComponent(s)}`:`/api/v1/events?fieldSelector=${encodeURIComponent(s)}`;return(await ca(r,t)).items.sort((o,c)=>{const h=o.lastTimestamp||o.eventTime||o.metadata?.creationTimestamp||"",d=c.lastTimestamp||c.eventTime||c.metadata?.creationTimestamp||"";return new Date(d).getTime()-new Date(h).getTime()})}let kc={contexts:[]};async function kP(){try{const[t,e]=await Promise.all([fetch("/config.json"),fetch("/contexts")]);if(t.ok){const n=await t.json();kc={...kc,...n}}else console.warn("Failed to load config.json, using defaults");if(e.ok){const n=await e.json();kc.contexts=n}else console.warn("Failed to load contexts, using defaults");return kc}catch(t){return console.warn("Error loading config:",t),kc}}function Fd(){return kc}function CP(t,e){return e.some(n=>n.includes("*")?new RegExp(`^${n.replace(/\*/g,".*")}$`).test(t):n===t)}function NP({namespaces:t,selectedNamespace:e,onSelectNamespace:n,disabled:s=!1,spaceLabels:r=[],platformNamespaces:a=[]}){const[o,c]=K.useState(!1),[h,d]=K.useState(""),[g,m]=K.useState(-1),v=K.useRef(null),y=K.useRef(null),_=K.useRef(null),w=K.useMemo(()=>U=>CP(U,a),[a]),S=K.useMemo(()=>{const U=[],X=new Set;for(const F of r){const W=new Map;for(const Q of t){const V=Q.metadata?.name;if(!V||X.has(V))continue;const M=Q.metadata?.labels?.[F];M&&(W.has(M)||W.set(M,[]),W.get(M).push(Q),X.add(V))}for(const[Q,V]of Array.from(W.entries()).sort(([M],[G])=>M.localeCompare(G)))U.push({label:Q,namespaces:V.sort((M,G)=>(M.metadata?.name||"").localeCompare(G.metadata?.name||""))})}const $=t.filter(F=>{const W=F.metadata?.name;return W&&!X.has(W)&&!w(W)}).sort((F,W)=>(F.metadata?.name||"").localeCompare(W.metadata?.name||""));$.length>0&&U.push({label:"User",namespaces:$});const Z=t.filter(F=>{const W=F.metadata?.name;return W&&!X.has(W)&&w(W)}).sort((F,W)=>(F.metadata?.name||"").localeCompare(W.metadata?.name||""));return Z.length>0&&U.push({label:"Platform",namespaces:Z}),U},[t,r,w]),k=K.useMemo(()=>h===""?S:S.map(U=>({...U,namespaces:U.namespaces.filter(X=>X.metadata?.name?.toLowerCase().includes(h.toLowerCase()))})).filter(U=>U.namespaces.length>0),[S,h]),C=K.useMemo(()=>{const U=[];(h===""||"all namespaces".includes(h.toLowerCase()))&&U.push({value:"",label:"All Namespaces"});for(const $ of k)for(const Z of $.namespaces){const F=Z.metadata?.name;F&&U.push({value:F,label:F})}return U},[k,h]),E=k.some(U=>U.namespaces.length>0),B=h===""||"all namespaces".includes(h.toLowerCase());K.useEffect(()=>{if(!o)return;function U(X){v.current&&!v.current.contains(X.target)&&(c(!1),d(""))}return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[o]),K.useEffect(()=>{o&&(y.current?.focus(),m(-1))},[o]);const D=U=>{n(U||void 0),c(!1),d("")},j=U=>{switch(U.key){case"ArrowDown":U.preventDefault(),m(X=>Math.min(X+1,C.length-1));break;case"ArrowUp":U.preventDefault(),m(X=>Math.max(X-1,0));break;case"Enter":U.preventDefault(),g>=0&&g<C.length&&D(C[g].value);break;case"Escape":c(!1),d("");break}};K.useEffect(()=>{g>=0&&_.current&&_.current.querySelector(`[data-index="${g}"]`)?.scrollIntoView({block:"nearest"})},[g]);let P=-1;return f.jsxs("div",{className:"relative",ref:v,children:[f.jsxs("div",{className:"relative",children:[f.jsx("input",{ref:y,type:"text",className:"w-full px-3 py-1.5 pr-8 bg-neutral-50 dark:bg-neutral-950 border border-neutral-200 dark:border-neutral-700 text-neutral-900 dark:text-neutral-100 rounded-lg text-sm text-left disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-1 focus:ring-neutral-400/50 dark:focus:ring-neutral-500/50 cursor-default placeholder:text-neutral-400",value:o?h:s?"Cluster":e||"All Namespaces",onChange:U=>d(U.target.value),onFocus:()=>!s&&c(!0),onKeyDown:j,placeholder:o?"Search...":void 0,disabled:s,readOnly:!o}),f.jsx("button",{type:"button",onClick:()=>!s&&c(!o),className:"absolute inset-y-0 right-0 flex items-center pr-2",disabled:s,children:f.jsx(rs,{size:16,className:"text-neutral-400 dark:text-neutral-500"})})]}),o&&f.jsx("div",{ref:_,className:"absolute z-50 w-full mt-1 bg-white dark:bg-neutral-950 rounded-lg shadow-xl max-h-96 overflow-y-auto focus:outline-none border border-neutral-200 dark:border-neutral-700",children:!E&&!B?f.jsx("div",{className:"px-3 py-3 text-sm text-neutral-500 dark:text-neutral-400",children:"No namespaces found"}):f.jsxs(f.Fragment,{children:[B&&f.jsxs("div",{"data-index":++P,onClick:()=>D(""),className:`px-3 py-2 cursor-pointer text-sm flex items-center justify-between ${g===P?"bg-neutral-100 dark:bg-neutral-700":""} ${e===void 0?"text-neutral-900 dark:text-neutral-100":"text-neutral-600 dark:text-neutral-400"}`,children:[f.jsx("span",{className:"truncate",children:"All Namespaces"}),e===void 0&&f.jsx(Cn,{size:16,className:"text-neutral-500 dark:text-neutral-400"})]}),k.map(U=>f.jsxs("div",{className:"py-1",children:[f.jsx("div",{className:"px-3 py-1 text-[10px] font-semibold text-neutral-400 dark:text-neutral-500 uppercase tracking-wider",children:U.label}),U.namespaces.map(X=>{const $=X.metadata?.name;if(!$)return null;const Z=++P,F=e===$,W=g===Z;return f.jsxs("div",{"data-index":Z,onClick:()=>D($),className:`mx-1 px-2.5 py-1.5 rounded-md cursor-pointer text-sm flex items-center justify-between ${W?"bg-neutral-100 dark:bg-neutral-700":""} ${F?"text-neutral-900 dark:text-neutral-100":"text-neutral-600 dark:text-neutral-400"}`,children:[f.jsx("span",{className:"truncate",children:$}),F&&f.jsx(Cn,{size:16,className:"text-neutral-500 dark:text-neutral-400"})]},$)})]},U.label))]})})]})}function AP(t){const e=He.c(24),{contexts:n,selectedContext:s,onSelectContext:r}=t,[a,o]=K.useState(!1),c=K.useRef(null);let h,d;e[0]!==a?(h=()=>{if(!a)return;const B=function(j){c.current&&!c.current.contains(j.target)&&o(!1)};return document.addEventListener("mousedown",B),()=>document.removeEventListener("mousedown",B)},d=[a],e[0]=a,e[1]=h,e[2]=d):(h=e[1],d=e[2]),K.useEffect(h,d);let g;e[3]!==r?(g=B=>{r(B),o(!1)},e[3]=r,e[4]=g):g=e[4];const m=g;if(n.length<=1)return null;let v;e[5]!==a?(v=()=>o(!a),e[5]=a,e[6]=v):v=e[6];let y;e[7]===Symbol.for("react.memo_cache_sentinel")?(y=f.jsx(Xr,{size:12,className:"opacity-60 group-hover:opacity-80"}),e[7]=y):y=e[7];let _;e[8]!==s?(_=f.jsx("span",{className:"truncate flex-1 text-left",children:s}),e[8]=s,e[9]=_):_=e[9];const w=`opacity-40 group-hover:opacity-60 transition-transform ${a?"rotate-180":""}`;let S;e[10]!==w?(S=f.jsx(rs,{size:12,className:w}),e[10]=w,e[11]=S):S=e[11];let k;e[12]!==v||e[13]!==_||e[14]!==S?(k=f.jsxs("button",{type:"button",onClick:v,className:"flex items-center gap-1.5 w-full px-1 py-0.5 text-xs text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-300 transition-colors rounded group",children:[y,_,S]}),e[12]=v,e[13]=_,e[14]=S,e[15]=k):k=e[15];let C;e[16]!==n||e[17]!==m||e[18]!==a||e[19]!==s?(C=a&&f.jsx("div",{className:"absolute z-50 left-0 right-0 mt-1 bg-white dark:bg-neutral-950 rounded-lg shadow-xl max-h-64 overflow-y-auto border border-neutral-200 dark:border-neutral-700",children:f.jsxs("div",{className:"py-1",children:[f.jsx("div",{className:"px-3 py-1 text-[10px] font-semibold text-neutral-400 dark:text-neutral-500 uppercase tracking-wider",children:"Clusters"}),n.map(B=>{const D=s===B.name;return f.jsxs("div",{onClick:()=>m(B.name),className:`mx-1 px-2.5 py-1.5 rounded-md cursor-pointer text-sm flex items-center justify-between hover:bg-neutral-100 dark:hover:bg-neutral-800 ${D?"text-neutral-900 dark:text-neutral-100":"text-neutral-600 dark:text-neutral-400"}`,children:[f.jsxs("div",{className:"flex items-center gap-2 truncate",children:[f.jsx(Xr,{size:14,className:"opacity-50 shrink-0"}),f.jsx("span",{className:"truncate",children:B.name})]}),D&&f.jsx(Cn,{size:14,className:"text-neutral-500 dark:text-neutral-400 shrink-0"})]},B.name)})]})}),e[16]=n,e[17]=m,e[18]=a,e[19]=s,e[20]=C):C=e[20];let E;return e[21]!==C||e[22]!==k?(E=f.jsxs("div",{className:"relative",ref:c,children:[k,C]}),e[21]=C,e[22]=k,e[23]=E):E=e[23],E}async function EP(t,e){const n=`/contexts/${e}${t}`,s=await fetch(n,{headers:{Accept:"application/json;as=Table;v=v1;g=meta.k8s.io"}});if(!s.ok)throw new Error(`API request failed: ${s.status} ${s.statusText}`);return s.json()}async function vS(t,e,n){const s=Jl(e),r=e.namespaced&&n?`${s}/namespaces/${n}/${e.name}`:`${s}/${e.name}`;return EP(r,t)}const vT=K.createContext(null);function hr(){const t=K.useContext(vT);if(!t)throw new Error("useCluster must be used within a ClusterProvider");return t}function L5(t,e){return t.name===e.name&&(t.group||"")===(e.group||"")}const I5=[{kind:"pods",label:"Pods",icon:dl,category:"workloads"},{kind:"deployments",label:"Deployments",icon:mS,category:"workloads"},{kind:"daemonsets",label:"DaemonSets",icon:dS,category:"workloads"},{kind:"statefulsets",label:"StatefulSets",icon:fl,category:"workloads"},{kind:"replicasets",label:"ReplicaSets",icon:cl,category:"workloads"},{kind:"jobs",label:"Jobs",icon:_g,category:"workloads"},{kind:"cronjobs",label:"CronJobs",icon:oa,category:"workloads"},{kind:"secrets",label:"Secrets",icon:mf,category:"config"},{kind:"configmaps",label:"ConfigMaps",icon:bi,category:"config"},{kind:"applications",label:"Applications",icon:uT,category:"config"},{kind:"applicationsets",label:"ApplicationSets",icon:dT,category:"config"},{kind:"certificates",label:"Certificates",icon:mT,category:"config"},{kind:"certificaterequests",label:"CertificateRequests",icon:c0,category:"config"},{kind:"services",label:"Services",icon:pT,category:"network"},{kind:"ingresses",label:"Ingresses",icon:Mr,category:"network"},{kind:"gateways",label:"Gateways",icon:ns,category:"network"},{kind:"httproutes",label:"HTTPRoutes",icon:Mr,category:"network"},{kind:"grpcroutes",label:"GRPCRoutes",icon:Mr,category:"network"},{kind:"tcproutes",label:"TCPRoutes",icon:ns,category:"network"},{kind:"udproutes",label:"UDPRoutes",icon:ns,category:"network"},{kind:"tlsroutes",label:"TLSRoutes",icon:ns,category:"network"},{kind:"persistentvolumes",label:"PersistentVolumes",icon:Hs,category:"storage"},{kind:"persistentvolumeclaims",label:"PersistentVolumeClaims",icon:oS,category:"storage"},{kind:"namespaces",label:"Namespaces",icon:vg,category:"cluster"},{kind:"nodes",label:"Nodes",icon:Xr,category:"cluster"},{kind:"events",label:"Events",icon:j7,category:"cluster"}],P5={workloads:"Workloads",config:"Config",network:"Network",storage:"Storage",cluster:"Cluster",crd:"Custom Resources"};function jP(t){const e=He.c(58),{selectedResource:n,onSelectResource:s,isOverviewSelected:r}=t,{context:a,contexts:o,namespace:c,namespaces:h,setContext:d,setNamespace:g}=hr();let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m=new Map,e[0]=m):m=e[0];const[v,y]=K.useState(m);let _;e[1]===Symbol.for("react.memo_cache_sentinel")?(_=[],e[1]=_):_=e[1];const[w,S]=K.useState(_);let k;e[2]===Symbol.for("react.memo_cache_sentinel")?(k={workloads:!0,config:!0,network:!0,storage:!0,cluster:!0,crd:!1},e[2]=k):k=e[2];const[C,E]=K.useState(k);let B,D;e[3]!==a?(B=()=>{(async()=>{const z=new Map;for(const O of I5){const T=await _o(a,O.kind);T&&z.set(O.kind,T)}y(z)})()},D=[a],e[3]=a,e[4]=B,e[5]=D):(B=e[4],D=e[5]),K.useEffect(B,D);let j,P;e[6]!==a?(j=()=>{SP(a).then(q=>{const z=q.map(_P);z.sort(MP),S(z)}).catch(BP)},P=[a],e[6]=a,e[7]=j,e[8]=P):(j=e[7],P=e[8]),K.useEffect(j,P);let U;e[9]===Symbol.for("react.memo_cache_sentinel")?(U=q=>{E(z=>({...z,[q]:!z[q]}))},e[9]=U):U=e[9];const X=U;let $,Z,F,W,Q,V;if(e[10]!==v||e[11]!==a||e[12]!==o||e[13]!==w||e[14]!==C||e[15]!==r||e[16]!==c||e[17]!==h||e[18]!==s||e[19]!==n||e[20]!==d||e[21]!==g){const q=I5.reduce(OP,{}),z=w.reduce(RP,{}),O=Object.entries(z).sort(TP);W="w-56 h-full shrink-0 bg-white dark:bg-black/40 backdrop-blur-xl flex flex-col rounded-xl border border-neutral-300/50 dark:border-neutral-700/50";let T;e[28]!==a||e[29]!==o||e[30]!==d?(T=f.jsx(AP,{contexts:o,selectedContext:a,onSelectContext:d}),e[28]=a,e[29]=o,e[30]=d,e[31]=T):T=e[31];const H=n!==null&&!n.namespaced;let N,Y;e[32]===Symbol.for("react.memo_cache_sentinel")?(N=Fd().platform?.spaces?.labels,Y=Fd().platform?.namespaces,e[32]=N,e[33]=Y):(N=e[32],Y=e[33]);let oe;e[34]!==c||e[35]!==h||e[36]!==g||e[37]!==H?(oe=f.jsx(NP,{namespaces:h,selectedNamespace:c,onSelectNamespace:g,disabled:H,spaceLabels:N,platformNamespaces:Y}),e[34]=c,e[35]=h,e[36]=g,e[37]=H,e[38]=oe):oe=e[38],e[39]!==T||e[40]!==oe?(Q=f.jsxs("div",{className:"shrink-0 px-3 pt-3 pb-2 space-y-2",children:[T,oe]}),e[39]=T,e[40]=oe,e[41]=Q):Q=e[41],V="flex-1 py-1 overflow-y-auto overflow-x-hidden min-h-0";const ee=`flex items-center w-full px-3 py-2 text-sm rounded-lg transition-colors ${r?"bg-white/90 text-neutral-900 shadow-sm dark:bg-neutral-800 dark:text-neutral-100":"text-neutral-600 hover:bg-white/50 hover:text-neutral-900 dark:text-neutral-400 dark:hover:bg-neutral-800/50 dark:hover:text-neutral-200"}`;let de;e[42]!==s?(de=()=>s(null),e[42]=s,e[43]=de):de=e[43];let we,Se;e[44]===Symbol.for("react.memo_cache_sentinel")?(we=f.jsx(ns,{size:16,className:"mr-2.5 shrink-0 opacity-70"}),Se=f.jsx("span",{className:"font-medium",children:"Overview"}),e[44]=we,e[45]=Se):(we=e[44],Se=e[45]),e[46]!==ee||e[47]!==de?($=f.jsx("div",{className:"mb-2 px-2",children:f.jsxs("button",{className:ee,onClick:de,children:[we,Se]})}),e[46]=ee,e[47]=de,e[48]=$):$=e[48],Z=Object.entries(q).map(Fe=>{const[xe,qe]=Fe;return f.jsxs("div",{className:"mb-1",children:[f.jsxs("button",{className:"flex items-center w-full px-4 py-1.5 text-[11px] font-semibold uppercase tracking-wider text-neutral-500 hover:text-neutral-700 dark:text-neutral-500 dark:hover:text-neutral-400 transition-colors",onClick:()=>X(xe),children:[f.jsx("span",{className:"mr-1.5 opacity-60",children:C[xe]?f.jsx(rs,{size:12}):f.jsx(Br,{size:12})}),f.jsx("span",{children:P5[xe]})]}),C[xe]&&f.jsx("ul",{className:"px-2",children:qe.map(je=>{const Qe=v.get(je.kind);if(!Qe)return null;const nt=n!==null&&L5(Qe,n);return f.jsx("li",{children:f.jsxs("button",{className:`flex items-center w-full px-3 py-2 text-sm rounded-lg transition-colors ${nt?"bg-white/90 text-neutral-900 shadow-sm dark:bg-neutral-800 dark:text-neutral-100":"text-neutral-600 hover:bg-white/50 hover:text-neutral-900 dark:text-neutral-400 dark:hover:bg-neutral-800/50 dark:hover:text-neutral-200"}`,onClick:()=>s(Qe),children:[f.jsx(je.icon,{size:16,className:"mr-2.5 shrink-0 opacity-70"}),f.jsx("span",{className:"truncate",children:je.label})]})},je.kind)})})]},xe)}),F=w.length>0&&f.jsxs("div",{className:"mb-1",children:[f.jsxs("button",{className:"flex items-center w-full px-4 py-1.5 text-[11px] font-semibold uppercase tracking-wider text-neutral-500 hover:text-neutral-700 dark:text-neutral-500 dark:hover:text-neutral-400 transition-colors",onClick:()=>X("crd"),children:[f.jsx("span",{className:"mr-1.5 opacity-60",children:C.crd?f.jsx(rs,{size:12}):f.jsx(Br,{size:12})}),f.jsx("span",{children:P5.crd}),f.jsx("span",{className:"ml-auto px-1.5 py-0.5 bg-neutral-300/60 rounded text-[10px] text-neutral-500 dark:bg-neutral-700 dark:text-neutral-500",children:w.length})]}),C.crd&&f.jsx("div",{className:"px-2",children:O.map(Fe=>{const[xe,qe]=Fe;return f.jsxs("div",{className:"mb-1",children:[f.jsx("div",{className:"px-3 py-1 text-[10px] text-neutral-400 truncate lowercase dark:text-neutral-600",title:xe,children:xe}),f.jsx("ul",{children:qe.map(je=>{const Qe=n!==null&&L5(je,n);return f.jsx("li",{children:f.jsxs("button",{className:`flex items-center w-full px-3 py-2 text-sm rounded-lg transition-colors ${Qe?"bg-white/90 text-neutral-900 shadow-sm dark:bg-neutral-800 dark:text-neutral-100":"text-neutral-600 hover:bg-white/50 hover:text-neutral-900 dark:text-neutral-400 dark:hover:bg-neutral-800/50 dark:hover:text-neutral-200"}`,onClick:()=>s(je),title:`${je.kind} (${je.group})`,children:[f.jsx(bg,{size:16,className:"mr-2.5 shrink-0 opacity-70"}),f.jsx("span",{className:"truncate",children:je.kind})]})},`${je.group||""}/${je.name}`)})})]},xe)})})]}),e[10]=v,e[11]=a,e[12]=o,e[13]=w,e[14]=C,e[15]=r,e[16]=c,e[17]=h,e[18]=s,e[19]=n,e[20]=d,e[21]=g,e[22]=$,e[23]=Z,e[24]=F,e[25]=W,e[26]=Q,e[27]=V}else $=e[22],Z=e[23],F=e[24],W=e[25],Q=e[26],V=e[27];let M;e[49]!==$||e[50]!==Z||e[51]!==F||e[52]!==V?(M=f.jsxs("nav",{className:V,children:[$,Z,F]}),e[49]=$,e[50]=Z,e[51]=F,e[52]=V,e[53]=M):M=e[53];let G;return e[54]!==W||e[55]!==Q||e[56]!==M?(G=f.jsxs("aside",{className:W,children:[Q,M]}),e[54]=W,e[55]=Q,e[56]=M,e[57]=G):G=e[57],G}function TP(t,e){const[n]=t,[s]=e,r=n.split(".").reverse().join("."),a=s.split(".").reverse().join(".");return r.localeCompare(a)}function RP(t,e){const n=e.group||"core";return t[n]||(t[n]=[]),t[n].push(e),t}function OP(t,e){return t[e.category]||(t[e.category]=[]),t[e.category].push(e),t}function BP(t){console.error("Failed to load CRDs:",t)}function MP(t,e){return t.kind.localeCompare(e.kind)}const DP=["selector","containers","images","labels","annotations","nominated node","readiness gates","node selector"];function LP(){const t=He.c(3),[e,n]=K.useState(IP);let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=o=>{const c=o.toLowerCase();n(h=>{const d=new Set(h);return d.has(c)?d.delete(c):d.add(c),d})},t[0]=s):s=t[0];const r=s;let a;return t[1]!==e?(a={hiddenColumns:e,toggleColumn:r},t[1]=e,t[2]=a):a=t[2],a}function IP(){return new Set(DP)}const bT=K.createContext(null);function PP(){const t=K.useContext(bT);if(!t)throw new Error("usePanels must be used within a PanelProvider");return t}const zP=5e3;function xT(t,e=[],n={}){const{refetchInterval:s=zP,refetchShowLoading:r=!1}=n,[a,o]=K.useState(null),[c,h]=K.useState(!0),[d,g]=K.useState(null),[m,v]=K.useState(!1),y=K.useRef(!0),_=K.useCallback(async(S=!1)=>{(!S||r)&&h(!0),S&&v(!0);try{const k=await t();o(k),g(null)}catch(k){S||g(k instanceof Error?k:new Error("Unknown error"))}finally{h(!1),v(!1)}},[t,r,...e]);K.useEffect(()=>{y.current=!0,_(!1)},[_]),K.useEffect(()=>{if(!s||s<=0)return;const S=setInterval(()=>{(!y.current||a!==null)&&_(!0),y.current=!1},s);return()=>clearInterval(S)},[_,s,a]);const w=K.useCallback(()=>{_(!1)},[_]);return{data:a,loading:c,error:d,refetch:w,isRefetching:m}}function $P(t,e){return t==null?"<none>":e.format==="date-time"&&typeof t=="string"?HP(t):Array.isArray(t)?t.length>0?t.join(", "):"<none>":typeof t=="object"?JSON.stringify(t):String(t)}function HP(t){const e=new Date(t),s=new Date().getTime()-e.getTime(),r=Math.floor(s/1e3),a=Math.floor(r/60),o=Math.floor(a/60),c=Math.floor(o/24);return c>0?`${c}d`:o>0?`${o}h`:a>0?`${a}m`:`${r}s`}function UP(t){const e=t.name.toLowerCase();return e==="status"||e==="phase"||e==="ready"||e==="condition"}function VP(t){const e=He.c(84),{config:n,hiddenColumns:s,onColumnsLoaded:r,selectedItem:a,onSelectItem:o}=t,{context:c,namespace:h}=hr();let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d={column:null,direction:null},e[0]=d):d=e[0];const[g,m]=K.useState(d);let v,y;e[1]!==n||e[2]!==c||e[3]!==h?(v=()=>vS(c,n,h),y=[c,n,h],e[1]=n,e[2]=c,e[3]=h,e[4]=v,e[5]=y):(v=e[4],y=e[5]);const{data:_,loading:w,error:S,refetch:k,isRefetching:C}=xT(v,y),E=h===void 0&&n.namespaced===!0;let B;e[6]===Symbol.for("react.memo_cache_sentinel")?(B={name:"Namespace",type:"string",format:"",description:"Namespace of the resource",priority:0},e[6]=B):B=e[6];const D=B;let j;if(e[7]!==_||e[8]!==s||e[9]!==E){e:{if(!_?.columnDefinitions){let N;e[11]===Symbol.for("react.memo_cache_sentinel")?(N=[],e[11]=N):N=e[11],j=N;break e}let T;e[12]!==s?(T=N=>!s.has(N.name.toLowerCase()),e[12]=s,e[13]=T):T=e[13];const H=_.columnDefinitions.filter(T);if(E&&!s.has("namespace")){const N=H.findIndex(FP);if(N!==-1){j=[...H.slice(0,N+1),D,...H.slice(N+1)];break e}}j=H}e[7]=_,e[8]=s,e[9]=E,e[10]=j}else j=e[10];const P=j;let U;e:{if(!_?.rows||!g.column||!g.direction){let ee;e[14]!==_?.rows?(ee=_?.rows??[],e[14]=_?.rows,e[15]=ee):ee=e[15],U=ee;break e}if(g.column==="Namespace"&&E){let ee;if(e[16]!==_.rows||e[17]!==g.direction){let de;e[19]!==g.direction?(de=(we,Se)=>{const Fe=we.object.metadata.namespace||"",xe=Se.object.metadata.namespace||"",qe=Fe.localeCompare(xe);return g.direction==="asc"?qe:-qe},e[19]=g.direction,e[20]=de):de=e[20],ee=[..._.rows].sort(de),e[16]=_.rows,e[17]=g.direction,e[18]=ee}else ee=e[18];U=ee;break e}let H;if(e[21]!==_.columnDefinitions||e[22]!==g.column){let ee;e[24]!==g.column?(ee=de=>de.name===g.column,e[24]=g.column,e[25]=ee):ee=e[25],H=_.columnDefinitions.findIndex(ee),e[21]=_.columnDefinitions,e[22]=g.column,e[23]=H}else H=e[23];const N=H;if(N===-1){U=_.rows;break e}const Y=_.columnDefinitions[N];let oe;if(e[26]!==Y||e[27]!==N||e[28]!==_.rows||e[29]!==g.direction){let ee;e[31]!==Y||e[32]!==N||e[33]!==g.direction?(ee=(de,we)=>{const Se=de.cells[N],Fe=we.cells[N];if(Se==null&&Fe==null)return 0;if(Se==null)return g.direction==="asc"?-1:1;if(Fe==null)return g.direction==="asc"?1:-1;let xe;if(Y.format==="date-time"){const qe=new Date(String(Se)).getTime(),je=new Date(String(Fe)).getTime();xe=qe-je}else typeof Se=="number"&&typeof Fe=="number"?xe=Se-Fe:xe=String(Se).localeCompare(String(Fe));return g.direction==="asc"?xe:-xe},e[31]=Y,e[32]=N,e[33]=g.direction,e[34]=ee):ee=e[34],oe=[..._.rows].sort(ee),e[26]=Y,e[27]=N,e[28]=_.rows,e[29]=g.direction,e[30]=oe}else oe=e[30];U=oe}const X=U;let $;e[35]===Symbol.for("react.memo_cache_sentinel")?($=T=>{m(H=>H.column!==T?{column:T,direction:"asc"}:H.direction==="asc"?{column:T,direction:"desc"}:{column:null,direction:null})},e[35]=$):$=e[35];const Z=$;let F,W;if(e[36]!==_||e[37]!==r?(F=()=>{_?.columnDefinitions&&r&&r(_.columnDefinitions)},W=[_,r],e[36]=_,e[37]=r,e[38]=F,e[39]=W):(F=e[38],W=e[39]),K.useEffect(F,W),w){let T;e[40]===Symbol.for("react.memo_cache_sentinel")?(T=f.jsx("div",{className:"w-6 h-6 border-2 border-neutral-200 border-t-neutral-400 dark:border-neutral-700 dark:border-t-neutral-500 rounded-full animate-spin"}),e[40]=T):T=e[40];let H;return e[41]!==n.name?(H=f.jsx("div",{className:"h-full flex items-center justify-center",children:f.jsxs("div",{className:"flex flex-col items-center gap-3 text-neutral-400 dark:text-neutral-500",children:[T,f.jsxs("span",{className:"text-sm",children:["Loading ",n.name,"..."]})]})}),e[41]=n.name,e[42]=H):H=e[42],H}if(S){let T;e[43]===Symbol.for("react.memo_cache_sentinel")?(T=f.jsx(h0,{size:18}),e[43]=T):T=e[43];let H;e[44]!==S.message?(H=f.jsx("span",{className:"text-sm",children:S.message}),e[44]=S.message,e[45]=H):H=e[45];let N;e[46]!==k?(N=f.jsx("button",{onClick:k,className:"px-3 py-1.5 text-sm text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 underline underline-offset-2",children:"Retry"}),e[46]=k,e[47]=N):N=e[47];let Y;return e[48]!==H||e[49]!==N?(Y=f.jsx("div",{className:"h-full flex items-center justify-center",children:f.jsxs("div",{className:"flex items-center gap-3 text-red-500 dark:text-red-400",children:[T,H,N]})}),e[48]=H,e[49]=N,e[50]=Y):Y=e[50],Y}if(!_||!_.columnDefinitions||_.rows.length===0){let T;e[51]===Symbol.for("react.memo_cache_sentinel")?(T=f.jsx("svg",{className:"w-8 h-8 mb-2 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),e[51]=T):T=e[51];let H;return e[52]!==n.name?(H=f.jsx("div",{className:"h-full flex items-center justify-center",children:f.jsxs("div",{className:"flex flex-col items-center text-neutral-400 dark:text-neutral-500",children:[T,f.jsxs("span",{className:"text-sm",children:["No ",n.name," found"]})]})}),e[52]=n.name,e[53]=H):H=e[53],H}let Q;e[54]!==C?(Q=C&&f.jsx("div",{className:"absolute top-2 right-4 z-20",children:f.jsx(Mn,{size:14,className:"text-neutral-400 dark:text-neutral-500 animate-spin"})}),e[54]=C,e[55]=Q):Q=e[55];let V;if(e[56]!==g||e[57]!==P){let T;e[59]!==g?(T=(H,N)=>{const Y=g.column===H.name;return f.jsx("th",{title:H.description,onClick:()=>Z(H.name),className:`text-left px-4 py-2 text-[11px] font-medium whitespace-nowrap cursor-pointer transition-colors select-none group bg-neutral-100 dark:bg-neutral-950 ${Y?"text-neutral-900 dark:text-neutral-200":"text-neutral-500 dark:text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-400"}`,children:f.jsxs("div",{className:"flex items-center gap-1",children:[H.name,f.jsx("span",{className:`transition-opacity ${Y?"opacity-100":"opacity-0 group-hover:opacity-40"}`,children:Y&&g.direction==="asc"?f.jsx(SI,{size:12}):Y&&g.direction==="desc"?f.jsx(rs,{size:12}):f.jsx(CI,{size:12})})]})},N)},e[59]=g,e[60]=T):T=e[60],V=P.map(T),e[56]=g,e[57]=P,e[58]=V}else V=e[58];let M;e[61]!==V?(M=f.jsx("thead",{className:"sticky top-0 z-10 bg-neutral-100 dark:bg-neutral-950",children:f.jsx("tr",{children:V})}),e[61]=V,e[62]=M):M=e[62];let G;if(e[63]!==_||e[64]!==o||e[65]!==a?.object||e[66]!==E||e[67]!==X||e[68]!==P){let T;e[70]!==_||e[71]!==o||e[72]!==a?.object||e[73]!==E||e[74]!==P?(T=(H,N)=>{const Y=a?.object.metadata.uid===H.object.metadata.uid,oe=N%2===1;return f.jsx("tr",{onClick:()=>o?.(Y?null:H),className:`transition-colors cursor-pointer ${Y?"bg-blue-500/20 dark:bg-blue-500/20":oe?"bg-neutral-200/40 dark:bg-neutral-800/30 hover:bg-neutral-200/70 dark:hover:bg-neutral-800/50":"hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30"}`,children:P.map((ee,de)=>{const we=ee.name==="Namespace"&&E,Se=we?-1:_.columnDefinitions.findIndex(je=>je.name===ee.name),Fe=we?H.object.metadata.namespace:H.cells[Se],xe=$P(Fe,ee),qe=ee.name.toLowerCase()==="name";return UP(ee)?f.jsx("td",{className:`px-4 py-2 whitespace-nowrap ${de===0?"rounded-l-lg":""} ${de===P.length-1?"rounded-r-lg":""}`,children:f.jsxs("span",{className:`inline-flex items-center gap-1.5 text-xs font-medium capitalize ${xe.toLowerCase().match(/running|active|ready|available|bound|succeeded|complete|healthy|true/)?"text-emerald-600 dark:text-emerald-400":xe.toLowerCase().match(/pending|creating|waiting|progressing|scheduled/)?"text-amber-600 dark:text-amber-400":xe.toLowerCase().match(/failed|error|crashloopbackoff|terminated|unknown|lost|false/)?"text-red-600 dark:text-red-400":"text-neutral-500 dark:text-neutral-400"}`,children:[f.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${xe.toLowerCase().match(/running|active|ready|available|bound|succeeded|complete|healthy|true/)?"bg-emerald-500":xe.toLowerCase().match(/pending|creating|waiting|progressing|scheduled/)?"bg-amber-500":xe.toLowerCase().match(/failed|error|crashloopbackoff|terminated|unknown|lost|false/)?"bg-red-500":"bg-neutral-400"}`}),xe]})},de):f.jsx("td",{className:`px-4 py-2 whitespace-nowrap ${de===0?"rounded-l-lg":""} ${de===P.length-1?"rounded-r-lg":""} ${qe?"text-neutral-900 dark:text-neutral-300":"text-neutral-500 dark:text-neutral-500"}`,children:xe},de)})},H.object.metadata.uid)},e[70]=_,e[71]=o,e[72]=a?.object,e[73]=E,e[74]=P,e[75]=T):T=e[75],G=X.map(T),e[63]=_,e[64]=o,e[65]=a?.object,e[66]=E,e[67]=X,e[68]=P,e[69]=G}else G=e[69];let q;e[76]!==G?(q=f.jsx("tbody",{children:G}),e[76]=G,e[77]=q):q=e[77];let z;e[78]!==M||e[79]!==q?(z=f.jsx("div",{className:"overflow-auto h-full",children:f.jsxs("table",{className:"w-full text-[13px]",children:[M,q]})}),e[78]=M,e[79]=q,e[80]=z):z=e[80];let O;return e[81]!==Q||e[82]!==z?(O=f.jsxs("div",{className:"pl-2 h-full relative",children:[Q,z]}),e[81]=Q,e[82]=z,e[83]=O):O=e[83],O}function FP(t){return t.name.toLowerCase()==="name"}function qP(t){const e=He.c(19),{columns:n,hiddenColumns:s,onToggleColumn:r}=t,[a,o]=K.useState(!1),c=K.useRef(null);let h,d;e[0]!==a?(h=()=>{if(!a)return;const k=function(E){c.current&&!c.current.contains(E.target)&&o(!1)};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},d=[a],e[0]=a,e[1]=h,e[2]=d):(h=e[1],d=e[2]),K.useEffect(h,d);let g,m;if(e[3]!==a?(g=()=>{if(!a)return;const k=function(E){E.key==="Escape"&&o(!1)};return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)},m=[a],e[3]=a,e[4]=g,e[5]=m):(g=e[4],m=e[5]),K.useEffect(g,m),n.length===0)return null;let v;e[6]!==a?(v=()=>o(!a),e[6]=a,e[7]=v):v=e[7];let y;e[8]===Symbol.for("react.memo_cache_sentinel")?(y=f.jsx(LI,{size:18}),e[8]=y):y=e[8];let _;e[9]!==v?(_=f.jsx("button",{onClick:v,className:"p-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded-md transition-colors focus:outline-none",title:"Toggle columns",children:y}),e[9]=v,e[10]=_):_=e[10];let w;e[11]!==n||e[12]!==s||e[13]!==a||e[14]!==r?(w=a&&f.jsx("div",{className:"absolute right-0 z-50 mt-1 p-2 bg-white border border-neutral-300 dark:bg-neutral-900 dark:border-neutral-700 rounded-lg shadow-xl min-w-45 max-h-75 overflow-y-auto",children:n.map(k=>{const C=!s.has(k.name.toLowerCase());return f.jsxs("label",{className:"flex items-center gap-2 px-2 py-1.5 cursor-pointer rounded hover:bg-neutral-100 dark:hover:bg-neutral-800",children:[f.jsx("span",{onClick:()=>r(k.name),className:`size-4 rounded border flex items-center justify-center cursor-pointer transition-colors ${C?"bg-neutral-500 border-neutral-500 dark:bg-neutral-600 dark:border-neutral-500":"border-neutral-300 bg-white dark:border-neutral-600 dark:bg-neutral-800"}`,children:C&&f.jsx(Cn,{size:12,className:"text-white dark:text-neutral-300"})}),f.jsx("span",{onClick:()=>r(k.name),className:"text-sm text-neutral-700 dark:text-neutral-400 cursor-pointer",children:k.name})]},k.name)})}),e[11]=n,e[12]=s,e[13]=a,e[14]=r,e[15]=w):w=e[15];let S;return e[16]!==_||e[17]!==w?(S=f.jsxs("div",{className:"relative",ref:c,children:[_,w]}),e[16]=_,e[17]=w,e[18]=S):S=e[18],S}function st(t,e,n,s,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function ce(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)}let _T=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return _T=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^n()&15>>+s/4).toString(16))};function Ax(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Ex=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Je extends Error{}class is extends Je{constructor(e,n,s,r){super(`${is.makeMessage(e,n,s)}`),this.status=e,this.headers=r,this.requestID=r?.get("x-request-id"),this.error=n;const a=n;this.code=a?.code,this.param=a?.param,this.type=a?.type}static makeMessage(e,n,s){const r=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):s;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,s,r){if(!e||!r)return new kg({message:s,cause:Ex(n)});const a=n?.error;return e===400?new wT(e,a,s,r):e===401?new ST(e,a,s,r):e===403?new kT(e,a,s,r):e===404?new CT(e,a,s,r):e===409?new NT(e,a,s,r):e===422?new AT(e,a,s,r):e===429?new ET(e,a,s,r):e>=500?new jT(e,a,s,r):new is(e,a,s,r)}}class Rr extends is{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class kg extends is{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class bS extends kg{constructor({message:e}={}){super({message:e??"Request timed out."})}}class wT extends is{}class ST extends is{}class kT extends is{}class CT extends is{}class NT extends is{}class AT extends is{}class ET extends is{}class jT extends is{}class TT extends Je{constructor(){super("Could not parse response content as the length limit was reached")}}class RT extends Je{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Uh extends Error{constructor(e){super(e)}}const KP=/^[a-z][a-z0-9+.-]*:/i,WP=t=>KP.test(t);let zs=t=>(zs=Array.isArray,zs(t)),z5=zs;function OT(t){return typeof t!="object"?{}:t??{}}function GP(t){if(!t)return!0;for(const e in t)return!1;return!0}function YP(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function hb(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const XP=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Je(`${t} must be an integer`);if(e<0)throw new Je(`${t} must be a positive integer`);return e},JP=t=>{try{return JSON.parse(t)}catch{return}},yf=t=>new Promise(e=>setTimeout(e,t)),Cc="6.15.0",QP=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function ZP(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const ez=()=>{const t=ZP();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cc,"X-Stainless-OS":H5(Deno.build.os),"X-Stainless-Arch":$5(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cc,"X-Stainless-OS":H5(globalThis.process.platform??"unknown"),"X-Stainless-Arch":$5(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=tz();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function tz(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const s=n.exec(navigator.userAgent);if(s){const r=s[1]||0,a=s[2]||0,o=s[3]||0;return{browser:e,version:`${r}.${a}.${o}`}}}return null}const $5=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",H5=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let U5;const nz=()=>U5??(U5=ez());function sz(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function BT(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function MT(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return BT({start(){},async pull(n){const{done:s,value:r}=await e.next();s?n.close():n.enqueue(r)},async cancel(){await e.return?.()}})}function DT(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function rz(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const iz=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),LT="RFC3986",IT=t=>String(t),V5={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:IT},az="RFC1738";let jx=(t,e)=>(jx=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),jx(t,e));const ii=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),db=1024,lz=(t,e,n,s,r)=>{if(t.length===0)return t;let a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});let o="";for(let c=0;c<a.length;c+=db){const h=a.length>=db?a.slice(c,c+db):a,d=[];for(let g=0;g<h.length;++g){let m=h.charCodeAt(g);if(m===45||m===46||m===95||m===126||m>=48&&m<=57||m>=65&&m<=90||m>=97&&m<=122||r===az&&(m===40||m===41)){d[d.length]=h.charAt(g);continue}if(m<128){d[d.length]=ii[m];continue}if(m<2048){d[d.length]=ii[192|m>>6]+ii[128|m&63];continue}if(m<55296||m>=57344){d[d.length]=ii[224|m>>12]+ii[128|m>>6&63]+ii[128|m&63];continue}g+=1,m=65536+((m&1023)<<10|h.charCodeAt(g)&1023),d[d.length]=ii[240|m>>18]+ii[128|m>>12&63]+ii[128|m>>6&63]+ii[128|m&63]}o+=d.join("")}return o};function oz(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function F5(t,e){if(zs(t)){const n=[];for(let s=0;s<t.length;s+=1)n.push(e(t[s]));return n}return e(t)}const PT={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},zT=function(t,e){Array.prototype.push.apply(t,zs(e)?e:[e])};let q5;const On={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:lz,encodeValuesOnly:!1,format:LT,formatter:IT,indices:!1,serializeDate(t){return(q5??(q5=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function cz(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const fb={};function $T(t,e,n,s,r,a,o,c,h,d,g,m,v,y,_,w,S,k){let C=t,E=k,B=0,D=!1;for(;(E=E.get(fb))!==void 0&&!D;){const $=E.get(t);if(B+=1,typeof $<"u"){if($===B)throw new RangeError("Cyclic object value");D=!0}typeof E.get(fb)>"u"&&(B=0)}if(typeof d=="function"?C=d(e,C):C instanceof Date?C=v?.(C):n==="comma"&&zs(C)&&(C=F5(C,function($){return $ instanceof Date?v?.($):$})),C===null){if(a)return h&&!w?h(e,On.encoder,S,"key",y):e;C=""}if(cz(C)||oz(C)){if(h){const $=w?e:h(e,On.encoder,S,"key",y);return[_?.($)+"="+_?.(h(C,On.encoder,S,"value",y))]}return[_?.(e)+"="+_?.(String(C))]}const j=[];if(typeof C>"u")return j;let P;if(n==="comma"&&zs(C))w&&h&&(C=F5(C,h)),P=[{value:C.length>0?C.join(",")||null:void 0}];else if(zs(d))P=d;else{const $=Object.keys(C);P=g?$.sort(g):$}const U=c?String(e).replace(/\./g,"%2E"):String(e),X=s&&zs(C)&&C.length===1?U+"[]":U;if(r&&zs(C)&&C.length===0)return X+"[]";for(let $=0;$<P.length;++$){const Z=P[$],F=typeof Z=="object"&&typeof Z.value<"u"?Z.value:C[Z];if(o&&F===null)continue;const W=m&&c?Z.replace(/\./g,"%2E"):Z,Q=zs(C)?typeof n=="function"?n(X,W):X:X+(m?"."+W:"["+W+"]");k.set(t,B);const V=new WeakMap;V.set(fb,k),zT(j,$T(F,Q,n,s,r,a,o,c,n==="comma"&&w&&zs(C)?null:h,d,g,m,v,y,_,w,S,V))}return j}function uz(t=On){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||On.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=LT;if(typeof t.format<"u"){if(!jx(V5,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const s=V5[n];let r=On.filter;(typeof t.filter=="function"||zs(t.filter))&&(r=t.filter);let a;if(t.arrayFormat&&t.arrayFormat in PT?a=t.arrayFormat:"indices"in t?a=t.indices?"indices":"repeat":a=On.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:On.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:On.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:On.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:On.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?On.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:On.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:On.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:On.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:On.encodeValuesOnly,filter:r,format:n,formatter:s,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:On.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:On.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:On.strictNullHandling}}function hz(t,e={}){let n=t;const s=uz(e);let r,a;typeof s.filter=="function"?(a=s.filter,n=a("",n)):zs(s.filter)&&(a=s.filter,r=a);const o=[];if(typeof n!="object"||n===null)return"";const c=PT[s.arrayFormat],h=c==="comma"&&s.commaRoundTrip;r||(r=Object.keys(n)),s.sort&&r.sort(s.sort);const d=new WeakMap;for(let v=0;v<r.length;++v){const y=r[v];s.skipNulls&&n[y]===null||zT(o,$T(n[y],y,c,h,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,d))}const g=o.join(s.delimiter);let m=s.addQueryPrefix===!0?"?":"";return s.charsetSentinel&&(s.charset==="iso-8859-1"?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),g.length>0?m+g:""}function dz(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let s=0;for(const r of t)n.set(r,s),s+=r.length;return n}let K5;function xS(t){let e;return(K5??(e=new globalThis.TextEncoder,K5=e.encode.bind(e)))(t)}let W5;function G5(t){let e;return(W5??(e=new globalThis.TextDecoder,W5=e.decode.bind(e)))(t)}var nr,sr;class Cg{constructor(){nr.set(this,void 0),sr.set(this,void 0),st(this,nr,new Uint8Array),st(this,sr,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?xS(e):e;st(this,nr,dz([ce(this,nr,"f"),n]));const s=[];let r;for(;(r=fz(ce(this,nr,"f"),ce(this,sr,"f")))!=null;){if(r.carriage&&ce(this,sr,"f")==null){st(this,sr,r.index);continue}if(ce(this,sr,"f")!=null&&(r.index!==ce(this,sr,"f")+1||r.carriage)){s.push(G5(ce(this,nr,"f").subarray(0,ce(this,sr,"f")-1))),st(this,nr,ce(this,nr,"f").subarray(ce(this,sr,"f"))),st(this,sr,null);continue}const a=ce(this,sr,"f")!==null?r.preceding-1:r.preceding,o=G5(ce(this,nr,"f").subarray(0,a));s.push(o),st(this,nr,ce(this,nr,"f").subarray(r.index)),st(this,sr,null)}return s}flush(){return ce(this,nr,"f").length?this.decode(`
`):[]}}nr=new WeakMap,sr=new WeakMap;Cg.NEWLINE_CHARS=new Set([`
`,"\r"]);Cg.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function fz(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function pz(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}const p0={off:0,error:200,warn:300,info:400,debug:500},Y5=(t,e,n)=>{if(t){if(YP(p0,t))return t;Qn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(p0))}`)}};function Vh(){}function am(t,e,n){return!e||p0[t]>p0[n]?Vh:e[t].bind(e)}const mz={error:Vh,warn:Vh,info:Vh,debug:Vh};let X5=new WeakMap;function Qn(t){const e=t.logger,n=t.logLevel??"off";if(!e)return mz;const s=X5.get(e);if(s&&s[0]===n)return s[1];const r={error:am("error",e,n),warn:am("warn",e,n),info:am("info",e,n),debug:am("debug",e,n)};return X5.set(e,[n,r]),r}const Il=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Ch;class fi{constructor(e,n,s){this.iterator=e,Ch.set(this,void 0),this.controller=n,st(this,Ch,s)}static fromSSEResponse(e,n,s){let r=!1;const a=s?Qn(s):console;async function*o(){if(r)throw new Je("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let c=!1;try{for await(const h of gz(e,n))if(!c){if(h.data.startsWith("[DONE]")){c=!0;continue}if(h.event===null||!h.event.startsWith("thread.")){let d;try{d=JSON.parse(h.data)}catch(g){throw a.error("Could not parse message into JSON:",h.data),a.error("From chunk:",h.raw),g}if(d&&d.error)throw new is(void 0,d.error,void 0,e.headers);yield d}else{let d;try{d=JSON.parse(h.data)}catch(g){throw console.error("Could not parse message into JSON:",h.data),console.error("From chunk:",h.raw),g}if(h.event=="error")throw new is(void 0,d.error,d.message,void 0);yield{event:h.event,data:d}}}c=!0}catch(h){if(Ax(h))return;throw h}finally{c||n.abort()}}return new fi(o,n,s)}static fromReadableStream(e,n,s){let r=!1;async function*a(){const c=new Cg,h=DT(e);for await(const d of h)for(const g of c.decode(d))yield g;for(const d of c.flush())yield d}async function*o(){if(r)throw new Je("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let c=!1;try{for await(const h of a())c||h&&(yield JSON.parse(h));c=!0}catch(h){if(Ax(h))return;throw h}finally{c||n.abort()}}return new fi(o,n,s)}[(Ch=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],s=this.iterator(),r=a=>({next:()=>{if(a.length===0){const o=s.next();e.push(o),n.push(o)}return a.shift()}});return[new fi(()=>r(e),this.controller,ce(this,Ch,"f")),new fi(()=>r(n),this.controller,ce(this,Ch,"f"))]}toReadableStream(){const e=this;let n;return BT({async start(){n=e[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:a}=await n.next();if(a)return s.close();const o=xS(JSON.stringify(r)+`
`);s.enqueue(o)}catch(r){s.error(r)}},async cancel(){await n.return?.()}})}}async function*gz(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Je("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Je("Attempted to iterate over a response with no body");const n=new vz,s=new Cg,r=DT(t.body);for await(const a of yz(r))for(const o of s.decode(a)){const c=n.decode(o);c&&(yield c)}for(const a of s.flush()){const o=n.decode(a);o&&(yield o)}}async function*yz(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const s=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?xS(n):n;let r=new Uint8Array(e.length+s.length);r.set(e),r.set(s,e.length),e=r;let a;for(;(a=pz(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class vz{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,s,r]=bz(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function bz(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function HT(t,e){const{response:n,requestLogID:s,retryOfRequestLogID:r,startTime:a}=e,o=await(async()=>{if(e.options.stream)return Qn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):fi.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const h=n.headers.get("content-type")?.split(";")[0]?.trim();if(h?.includes("application/json")||h?.endsWith("+json")){const m=await n.json();return UT(m,n)}return await n.text()})();return Qn(t).debug(`[${s}] response parsed`,Il({retryOfRequestLogID:r,url:n.url,status:n.status,body:o,durationMs:Date.now()-a})),o}function UT(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var Fh;class Ng extends Promise{constructor(e,n,s=HT){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=s,Fh.set(this,void 0),st(this,Fh,e)}_thenUnwrap(e){return new Ng(ce(this,Fh,"f"),this.responsePromise,async(n,s)=>UT(e(await this.parseResponse(n,s),s),s.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(ce(this,Fh,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}Fh=new WeakMap;var lm;class _S{constructor(e,n,s,r){lm.set(this,void 0),st(this,lm,e),this.options=r,this.response=n,this.body=s}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Je("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await ce(this,lm,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(lm=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class xz extends Ng{constructor(e,n,s){super(e,n,async(r,a)=>new s(r,a.response,await HT(r,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class Ag extends _S{constructor(e,n,s,r){super(e,n,s,r),this.data=s.data||[],this.object=s.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class Nn extends _S{constructor(e,n,s,r){super(e,n,s,r),this.data=s.data||[],this.has_more=s.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),n=e[e.length-1]?.id;return n?{...this.options,query:{...OT(this.options.query),after:n}}:null}}class m0 extends _S{constructor(e,n,s,r){super(e,n,s,r),this.data=s.data||[],this.has_more=s.has_more||!1,this.last_id=s.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...OT(this.options.query),after:e}}:null}}const VT=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function kd(t,e,n){return VT(),new File(t,e??"unknown_file",n)}function Pm(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const wS=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",J5=async(t,e)=>Tx(t.body)?{...t,body:await FT(t.body,e)}:t,no=async(t,e)=>({...t,body:await FT(t.body,e)}),Q5=new WeakMap;function _z(t){const e=typeof t=="function"?t:t.fetch,n=Q5.get(e);if(n)return n;const s=(async()=>{try{const r="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new r(a).text()}catch{return!0}})();return Q5.set(e,s),s}const FT=async(t,e)=>{if(!await _z(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([s,r])=>Rx(n,s,r))),n},qT=t=>t instanceof Blob&&"name"in t,wz=t=>typeof t=="object"&&t!==null&&(t instanceof Response||wS(t)||qT(t)),Tx=t=>{if(wz(t))return!0;if(Array.isArray(t))return t.some(Tx);if(t&&typeof t=="object"){for(const e in t)if(Tx(t[e]))return!0}return!1},Rx=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,kd([await n.blob()],Pm(n)));else if(wS(n))t.append(e,kd([await new Response(MT(n)).blob()],Pm(n)));else if(qT(n))t.append(e,n,Pm(n));else if(Array.isArray(n))await Promise.all(n.map(s=>Rx(t,e+"[]",s)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([s,r])=>Rx(t,`${e}[${s}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},KT=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Sz=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&KT(t),kz=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Cz(t,e,n){if(VT(),t=await t,Sz(t))return t instanceof File?t:kd([await t.arrayBuffer()],t.name);if(kz(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),kd(await Ox(r),e,n)}const s=await Ox(t);if(e||(e=Pm(t)),!n?.type){const r=s.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof r=="string"&&(n={...n,type:r})}return kd(s,e,n)}async function Ox(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(KT(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(wS(t))for await(const n of t)e.push(...await Ox(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${Nz(t)}`)}return e}function Nz(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class Ye{constructor(e){this._client=e}}function WT(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Z5=Object.freeze(Object.create(null)),Az=(t=WT)=>function(n,...s){if(n.length===1)return n[0];let r=!1;const a=[],o=n.reduce((g,m,v)=>{/[?#]/.test(m)&&(r=!0);const y=s[v];let _=(r?encodeURIComponent:t)(""+y);return v!==s.length&&(y==null||typeof y=="object"&&y.toString===Object.getPrototypeOf(Object.getPrototypeOf(y.hasOwnProperty??Z5)??Z5)?.toString)&&(_=y+"",a.push({start:g.length+m.length,length:_.length,error:`Value of type ${Object.prototype.toString.call(y).slice(8,-1)} is not a valid path parameter`})),g+m+(v===s.length?"":_)},""),c=o.split(/[?#]/,1)[0],h=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=h.exec(c))!==null;)a.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(a.sort((g,m)=>g.start-m.start),a.length>0){let g=0;const m=a.reduce((v,y)=>{const _=" ".repeat(y.start-g),w="^".repeat(y.length);return g=y.start+y.length,v+_+w},"");throw new Je(`Path parameters result in path with invalid segments:
${a.map(v=>v.error).join(`
`)}
${o}
${m}`)}return o},ke=Az(WT);let GT=class extends Ye{list(e,n={},s){return this._client.getAPIList(ke`/chat/completions/${e}/messages`,Nn,{query:n,...s})}};function g0(t){return t!==void 0&&"function"in t&&t.function!==void 0}function SS(t){return t?.$brand==="auto-parseable-response-format"}function vf(t){return t?.$brand==="auto-parseable-tool"}function Ez(t,e){return!e||!YT(e)?{...t,choices:t.choices.map(n=>(XT(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:kS(t,e)}function kS(t,e){const n=t.choices.map(s=>{if(s.finish_reason==="length")throw new TT;if(s.finish_reason==="content_filter")throw new RT;return XT(s.message.tool_calls),{...s,message:{...s.message,...s.message.tool_calls?{tool_calls:s.message.tool_calls?.map(r=>Tz(e,r))??void 0}:void 0,parsed:s.message.content&&!s.message.refusal?jz(e,s.message.content):null}}});return{...t,choices:n}}function jz(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function Tz(t,e){const n=t.tools?.find(s=>g0(s)&&s.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:vf(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function Rz(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const n=t.tools?.find(s=>g0(s)&&s.function?.name===e.function.name);return g0(n)&&(vf(n)||n?.function.strict||!1)}function YT(t){return SS(t.response_format)?!0:t.tools?.some(e=>vf(e)||e.type==="function"&&e.function.strict===!0)??!1}function XT(t){for(const e of t||[])if(e.type!=="function")throw new Je(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function Oz(t){for(const e of t??[]){if(e.type!=="function")throw new Je(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Je(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const y0=t=>t?.role==="assistant",JT=t=>t?.role==="tool";var Bx,zm,$m,qh,Kh,Hm,Wh,Yi,Gh,v0,b0,Nc,QT;class CS{constructor(){Bx.add(this),this.controller=new AbortController,zm.set(this,void 0),$m.set(this,()=>{}),qh.set(this,()=>{}),Kh.set(this,void 0),Hm.set(this,()=>{}),Wh.set(this,()=>{}),Yi.set(this,{}),Gh.set(this,!1),v0.set(this,!1),b0.set(this,!1),Nc.set(this,!1),st(this,zm,new Promise((e,n)=>{st(this,$m,e,"f"),st(this,qh,n,"f")})),st(this,Kh,new Promise((e,n)=>{st(this,Hm,e,"f"),st(this,Wh,n,"f")})),ce(this,zm,"f").catch(()=>{}),ce(this,Kh,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},ce(this,Bx,"m",QT).bind(this))},0)}_connected(){this.ended||(ce(this,$m,"f").call(this),this._emit("connect"))}get ended(){return ce(this,Gh,"f")}get errored(){return ce(this,v0,"f")}get aborted(){return ce(this,b0,"f")}abort(){this.controller.abort()}on(e,n){return(ce(this,Yi,"f")[e]||(ce(this,Yi,"f")[e]=[])).push({listener:n}),this}off(e,n){const s=ce(this,Yi,"f")[e];if(!s)return this;const r=s.findIndex(a=>a.listener===n);return r>=0&&s.splice(r,1),this}once(e,n){return(ce(this,Yi,"f")[e]||(ce(this,Yi,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,s)=>{st(this,Nc,!0),e!=="error"&&this.once("error",s),this.once(e,n)})}async done(){st(this,Nc,!0),await ce(this,Kh,"f")}_emit(e,...n){if(ce(this,Gh,"f"))return;e==="end"&&(st(this,Gh,!0),ce(this,Hm,"f").call(this));const s=ce(this,Yi,"f")[e];if(s&&(ce(this,Yi,"f")[e]=s.filter(r=>!r.once),s.forEach(({listener:r})=>r(...n))),e==="abort"){const r=n[0];!ce(this,Nc,"f")&&!s?.length&&Promise.reject(r),ce(this,qh,"f").call(this,r),ce(this,Wh,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=n[0];!ce(this,Nc,"f")&&!s?.length&&Promise.reject(r),ce(this,qh,"f").call(this,r),ce(this,Wh,"f").call(this,r),this._emit("end")}}_emitFinal(){}}zm=new WeakMap,$m=new WeakMap,qh=new WeakMap,Kh=new WeakMap,Hm=new WeakMap,Wh=new WeakMap,Yi=new WeakMap,Gh=new WeakMap,v0=new WeakMap,b0=new WeakMap,Nc=new WeakMap,Bx=new WeakSet,QT=function(e){if(st(this,v0,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Rr),e instanceof Rr)return st(this,b0,!0),this._emit("abort",e);if(e instanceof Je)return this._emit("error",e);if(e instanceof Error){const n=new Je(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Je(String(e)))};function Bz(t){return typeof t.parse=="function"}var ys,Mx,x0,Dx,Lx,Ix,ZT,eR;const Mz=10;class tR extends CS{constructor(){super(...arguments),ys.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),JT(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(y0(e)&&e.tool_calls)for(const s of e.tool_calls)s.type==="function"&&this._emit("functionToolCall",s.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Je("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),ce(this,ys,"m",Mx).call(this)}async finalMessage(){return await this.done(),ce(this,ys,"m",x0).call(this)}async finalFunctionToolCall(){return await this.done(),ce(this,ys,"m",Dx).call(this)}async finalFunctionToolCallResult(){return await this.done(),ce(this,ys,"m",Lx).call(this)}async totalUsage(){return await this.done(),ce(this,ys,"m",Ix).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=ce(this,ys,"m",x0).call(this);n&&this._emit("finalMessage",n);const s=ce(this,ys,"m",Mx).call(this);s&&this._emit("finalContent",s);const r=ce(this,ys,"m",Dx).call(this);r&&this._emit("finalFunctionToolCall",r);const a=ce(this,ys,"m",Lx).call(this);a!=null&&this._emit("finalFunctionToolCallResult",a),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",ce(this,ys,"m",Ix).call(this))}async _createChatCompletion(e,n,s){const r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),ce(this,ys,"m",ZT).call(this,n);const a=await e.chat.completions.create({...n,stream:!1},{...s,signal:this.controller.signal});return this._connected(),this._addChatCompletion(kS(a,n))}async _runChatCompletion(e,n,s){for(const r of n.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,n,s)}async _runTools(e,n,s){const r="tool",{tool_choice:a="auto",stream:o,...c}=n,h=typeof a!="string"&&a.type==="function"&&a?.function?.name,{maxChatCompletions:d=Mz}=s||{},g=n.tools.map(y=>{if(vf(y)){if(!y.$callback)throw new Je("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:y.$callback,name:y.function.name,description:y.function.description||"",parameters:y.function.parameters,parse:y.$parseRaw,strict:!0}}}return y}),m={};for(const y of g)y.type==="function"&&(m[y.function.name||y.function.function.name]=y.function);const v="tools"in n?g.map(y=>y.type==="function"?{type:"function",function:{name:y.function.name||y.function.function.name,parameters:y.function.parameters,description:y.function.description,strict:y.function.strict}}:y):void 0;for(const y of n.messages)this._addMessage(y,!1);for(let y=0;y<d;++y){const w=(await this._createChatCompletion(e,{...c,tool_choice:a,tools:v,messages:[...this.messages]},s)).choices[0]?.message;if(!w)throw new Je("missing message in ChatCompletion response");if(!w.tool_calls?.length)return;for(const S of w.tool_calls){if(S.type!=="function")continue;const k=S.id,{name:C,arguments:E}=S.function,B=m[C];if(B){if(h&&h!==C){const U=`Invalid tool_call: ${JSON.stringify(C)}. ${JSON.stringify(h)} requested. Please try again`;this._addMessage({role:r,tool_call_id:k,content:U});continue}}else{const U=`Invalid tool_call: ${JSON.stringify(C)}. Available options are: ${Object.keys(m).map(X=>JSON.stringify(X)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:k,content:U});continue}let D;try{D=Bz(B)?await B.parse(E):E}catch(U){const X=U instanceof Error?U.message:String(U);this._addMessage({role:r,tool_call_id:k,content:X});continue}const j=await B.function(D,this),P=ce(this,ys,"m",eR).call(this,j);if(this._addMessage({role:r,tool_call_id:k,content:P}),h)return}}}}ys=new WeakSet,Mx=function(){return ce(this,ys,"m",x0).call(this).content??null},x0=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(y0(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new Je("stream ended without producing a ChatCompletionMessage with role=assistant")},Dx=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(y0(n)&&n?.tool_calls?.length)return n.tool_calls.filter(s=>s.type==="function").at(-1)?.function}},Lx=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(JT(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(s=>s.role==="assistant"&&s.tool_calls?.some(r=>r.type==="function"&&r.id===n.tool_call_id)))return n.content}},Ix=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},ZT=function(e){if(e.n!=null&&e.n>1)throw new Je("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},eR=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class NS extends tR{static runTools(e,n,s){const r=new NS,a={...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,n,a)),r}_addMessage(e,n=!0){super._addMessage(e,n),y0(e)&&e.content&&this._emit("content",e.content)}}const nR=1,sR=2,rR=4,iR=8,aR=16,lR=32,oR=64,cR=128,uR=256,hR=cR|uR,dR=aR|lR|hR|oR,fR=nR|sR|dR,pR=rR|iR,Dz=fR|pR,zn={STR:nR,NUM:sR,ARR:rR,OBJ:iR,NULL:aR,BOOL:lR,NAN:oR,INFINITY:cR,MINUS_INFINITY:uR,INF:hR,SPECIAL:dR,ATOM:fR,COLLECTION:pR,ALL:Dz};class Lz extends Error{}class Iz extends Error{}function Pz(t,e=zn.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return zz(t.trim(),e)}const zz=(t,e)=>{const n=t.length;let s=0;const r=v=>{throw new Lz(`${v} at position ${s}`)},a=v=>{throw new Iz(`${v} at position ${s}`)},o=()=>(m(),s>=n&&r("Unexpected end of input"),t[s]==='"'?c():t[s]==="{"?h():t[s]==="["?d():t.substring(s,s+4)==="null"||zn.NULL&e&&n-s<4&&"null".startsWith(t.substring(s))?(s+=4,null):t.substring(s,s+4)==="true"||zn.BOOL&e&&n-s<4&&"true".startsWith(t.substring(s))?(s+=4,!0):t.substring(s,s+5)==="false"||zn.BOOL&e&&n-s<5&&"false".startsWith(t.substring(s))?(s+=5,!1):t.substring(s,s+8)==="Infinity"||zn.INFINITY&e&&n-s<8&&"Infinity".startsWith(t.substring(s))?(s+=8,1/0):t.substring(s,s+9)==="-Infinity"||zn.MINUS_INFINITY&e&&1<n-s&&n-s<9&&"-Infinity".startsWith(t.substring(s))?(s+=9,-1/0):t.substring(s,s+3)==="NaN"||zn.NAN&e&&n-s<3&&"NaN".startsWith(t.substring(s))?(s+=3,NaN):g()),c=()=>{const v=s;let y=!1;for(s++;s<n&&(t[s]!=='"'||y&&t[s-1]==="\\");)y=t[s]==="\\"?!y:!1,s++;if(t.charAt(s)=='"')try{return JSON.parse(t.substring(v,++s-Number(y)))}catch(_){a(String(_))}else if(zn.STR&e)try{return JSON.parse(t.substring(v,s-Number(y))+'"')}catch{return JSON.parse(t.substring(v,t.lastIndexOf("\\"))+'"')}r("Unterminated string literal")},h=()=>{s++,m();const v={};try{for(;t[s]!=="}";){if(m(),s>=n&&zn.OBJ&e)return v;const y=c();m(),s++;try{const _=o();Object.defineProperty(v,y,{value:_,writable:!0,enumerable:!0,configurable:!0})}catch(_){if(zn.OBJ&e)return v;throw _}m(),t[s]===","&&s++}}catch{if(zn.OBJ&e)return v;r("Expected '}' at end of object")}return s++,v},d=()=>{s++;const v=[];try{for(;t[s]!=="]";)v.push(o()),m(),t[s]===","&&s++}catch{if(zn.ARR&e)return v;r("Expected ']' at end of array")}return s++,v},g=()=>{if(s===0){t==="-"&&zn.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(t)}catch(y){if(zn.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}a(String(y))}}const v=s;for(t[s]==="-"&&s++;t[s]&&!",]}".includes(t[s]);)s++;s==n&&!(zn.NUM&e)&&r("Unterminated number literal");try{return JSON.parse(t.substring(v,s))}catch{t.substring(v,s)==="-"&&zn.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(t.substring(v,t.lastIndexOf("e")))}catch(_){a(String(_))}}},m=()=>{for(;s<n&&` 
\r	`.includes(t[s]);)s++};return o()},eA=t=>Pz(t,zn.ALL^zn.NUM);var jn,Wi,pc,Ha,pb,om,mb,gb,yb,cm,vb,tA;class qd extends tR{constructor(e){super(),jn.add(this),Wi.set(this,void 0),pc.set(this,void 0),Ha.set(this,void 0),st(this,Wi,e),st(this,pc,[])}get currentChatCompletionSnapshot(){return ce(this,Ha,"f")}static fromReadableStream(e){const n=new qd(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,s){const r=new qd(n);return r._run(()=>r._runChatCompletion(e,{...n,stream:!0},{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,n,s){super._createChatCompletion;const r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),ce(this,jn,"m",pb).call(this);const a=await e.chat.completions.create({...n,stream:!0},{...s,signal:this.controller.signal});this._connected();for await(const o of a)ce(this,jn,"m",mb).call(this,o);if(a.controller.signal?.aborted)throw new Rr;return this._addChatCompletion(ce(this,jn,"m",cm).call(this))}async _fromReadableStream(e,n){const s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),ce(this,jn,"m",pb).call(this),this._connected();const r=fi.fromReadableStream(e,this.controller);let a;for await(const o of r)a&&a!==o.id&&this._addChatCompletion(ce(this,jn,"m",cm).call(this)),ce(this,jn,"m",mb).call(this,o),a=o.id;if(r.controller.signal?.aborted)throw new Rr;return this._addChatCompletion(ce(this,jn,"m",cm).call(this))}[(Wi=new WeakMap,pc=new WeakMap,Ha=new WeakMap,jn=new WeakSet,pb=function(){this.ended||st(this,Ha,void 0)},om=function(n){let s=ce(this,pc,"f")[n.index];return s||(s={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},ce(this,pc,"f")[n.index]=s,s)},mb=function(n){if(this.ended)return;const s=ce(this,jn,"m",tA).call(this,n);this._emit("chunk",n,s);for(const r of n.choices){const a=s.choices[r.index];r.delta.content!=null&&a.message?.role==="assistant"&&a.message?.content&&(this._emit("content",r.delta.content,a.message.content),this._emit("content.delta",{delta:r.delta.content,snapshot:a.message.content,parsed:a.message.parsed})),r.delta.refusal!=null&&a.message?.role==="assistant"&&a.message?.refusal&&this._emit("refusal.delta",{delta:r.delta.refusal,snapshot:a.message.refusal}),r.logprobs?.content!=null&&a.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:r.logprobs?.content,snapshot:a.logprobs?.content??[]}),r.logprobs?.refusal!=null&&a.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:r.logprobs?.refusal,snapshot:a.logprobs?.refusal??[]});const o=ce(this,jn,"m",om).call(this,a);a.finish_reason&&(ce(this,jn,"m",yb).call(this,a),o.current_tool_call_index!=null&&ce(this,jn,"m",gb).call(this,a,o.current_tool_call_index));for(const c of r.delta.tool_calls??[])o.current_tool_call_index!==c.index&&(ce(this,jn,"m",yb).call(this,a),o.current_tool_call_index!=null&&ce(this,jn,"m",gb).call(this,a,o.current_tool_call_index)),o.current_tool_call_index=c.index;for(const c of r.delta.tool_calls??[]){const h=a.message.tool_calls?.[c.index];h?.type&&(h?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:h.function?.name,index:c.index,arguments:h.function.arguments,parsed_arguments:h.function.parsed_arguments,arguments_delta:c.function?.arguments??""}):(h?.type,void 0))}}},gb=function(n,s){if(ce(this,jn,"m",om).call(this,n).done_tool_calls.has(s))return;const a=n.message.tool_calls?.[s];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const o=ce(this,Wi,"f")?.tools?.find(c=>g0(c)&&c.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:s,arguments:a.function.arguments,parsed_arguments:vf(o)?o.$parseRaw(a.function.arguments):o?.function.strict?JSON.parse(a.function.arguments):null})}else a.type},yb=function(n){const s=ce(this,jn,"m",om).call(this,n);if(n.message.content&&!s.content_done){s.content_done=!0;const r=ce(this,jn,"m",vb).call(this);this._emit("content.done",{content:n.message.content,parsed:r?r.$parseRaw(n.message.content):null})}n.message.refusal&&!s.refusal_done&&(s.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!s.logprobs_content_done&&(s.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!s.logprobs_refusal_done&&(s.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},cm=function(){if(this.ended)throw new Je("stream has ended, this shouldn't happen");const n=ce(this,Ha,"f");if(!n)throw new Je("request ended without sending any chunks");return st(this,Ha,void 0),st(this,pc,[]),$z(n,ce(this,Wi,"f"))},vb=function(){const n=ce(this,Wi,"f")?.response_format;return SS(n)?n:null},tA=function(n){var s,r,a,o;let c=ce(this,Ha,"f");const{choices:h,...d}=n;c?Object.assign(c,d):c=st(this,Ha,{...d,choices:[]});for(const{delta:g,finish_reason:m,index:v,logprobs:y=null,..._}of n.choices){let w=c.choices[v];if(w||(w=c.choices[v]={finish_reason:m,index:v,message:{},logprobs:y,..._}),y)if(!w.logprobs)w.logprobs=Object.assign({},y);else{const{content:j,refusal:P,...U}=y;Object.assign(w.logprobs,U),j&&((s=w.logprobs).content??(s.content=[]),w.logprobs.content.push(...j)),P&&((r=w.logprobs).refusal??(r.refusal=[]),w.logprobs.refusal.push(...P))}if(m&&(w.finish_reason=m,ce(this,Wi,"f")&&YT(ce(this,Wi,"f")))){if(m==="length")throw new TT;if(m==="content_filter")throw new RT}if(Object.assign(w,_),!g)continue;const{content:S,refusal:k,function_call:C,role:E,tool_calls:B,...D}=g;if(Object.assign(w.message,D),k&&(w.message.refusal=(w.message.refusal||"")+k),E&&(w.message.role=E),C&&(w.message.function_call?(C.name&&(w.message.function_call.name=C.name),C.arguments&&((a=w.message.function_call).arguments??(a.arguments=""),w.message.function_call.arguments+=C.arguments)):w.message.function_call=C),S&&(w.message.content=(w.message.content||"")+S,!w.message.refusal&&ce(this,jn,"m",vb).call(this)&&(w.message.parsed=eA(w.message.content))),B){w.message.tool_calls||(w.message.tool_calls=[]);for(const{index:j,id:P,type:U,function:X,...$}of B){const Z=(o=w.message.tool_calls)[j]??(o[j]={});Object.assign(Z,$),P&&(Z.id=P),U&&(Z.type=U),X&&(Z.function??(Z.function={name:X.name??"",arguments:""})),X?.name&&(Z.function.name=X.name),X?.arguments&&(Z.function.arguments+=X.arguments,Rz(ce(this,Wi,"f"),Z)&&(Z.function.parsed_arguments=eA(Z.function.arguments)))}}}return c},Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("chunk",r=>{const a=n.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{s=!0;for(const r of n)r.resolve(void 0);n.length=0}),this.on("abort",r=>{s=!0;for(const a of n)a.reject(r);n.length=0}),this.on("error",r=>{s=!0;for(const a of n)a.reject(r);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((a,o)=>n.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new fi(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function $z(t,e){const{id:n,choices:s,created:r,model:a,system_fingerprint:o,...c}=t,h={...c,id:n,choices:s.map(({message:d,finish_reason:g,index:m,logprobs:v,...y})=>{if(!g)throw new Je(`missing finish_reason for choice ${m}`);const{content:_=null,function_call:w,tool_calls:S,...k}=d,C=d.role;if(!C)throw new Je(`missing role for choice ${m}`);if(w){const{arguments:E,name:B}=w;if(E==null)throw new Je(`missing function_call.arguments for choice ${m}`);if(!B)throw new Je(`missing function_call.name for choice ${m}`);return{...y,message:{content:_,function_call:{arguments:E,name:B},role:C,refusal:d.refusal??null},finish_reason:g,index:m,logprobs:v}}return S?{...y,index:m,finish_reason:g,logprobs:v,message:{...k,role:C,content:_,refusal:d.refusal??null,tool_calls:S.map((E,B)=>{const{function:D,type:j,id:P,...U}=E,{arguments:X,name:$,...Z}=D||{};if(P==null)throw new Je(`missing choices[${m}].tool_calls[${B}].id
${um(t)}`);if(j==null)throw new Je(`missing choices[${m}].tool_calls[${B}].type
${um(t)}`);if($==null)throw new Je(`missing choices[${m}].tool_calls[${B}].function.name
${um(t)}`);if(X==null)throw new Je(`missing choices[${m}].tool_calls[${B}].function.arguments
${um(t)}`);return{...U,id:P,type:j,function:{...Z,name:$,arguments:X}}})}}:{...y,message:{...k,content:_,role:C,refusal:d.refusal??null},finish_reason:g,index:m,logprobs:v}}),created:r,model:a,object:"chat.completion",...o?{system_fingerprint:o}:{}};return Ez(h,e)}function um(t){return JSON.stringify(t)}class _0 extends qd{static fromReadableStream(e){const n=new _0(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,s){const r=new _0(n),a={...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,n,a)),r}}let AS=class extends Ye{constructor(){super(...arguments),this.messages=new GT(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(ke`/chat/completions/${e}`,n)}update(e,n,s){return this._client.post(ke`/chat/completions/${e}`,{body:n,...s})}list(e={},n){return this._client.getAPIList("/chat/completions",Nn,{query:e,...n})}delete(e,n){return this._client.delete(ke`/chat/completions/${e}`,n)}parse(e,n){return Oz(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(s=>kS(s,e))}runTools(e,n){return e.stream?_0.runTools(this._client,e,n):NS.runTools(this._client,e,n)}stream(e,n){return qd.createChatCompletion(this._client,e,n)}};AS.Messages=GT;class ES extends Ye{constructor(){super(...arguments),this.completions=new AS(this._client)}}ES.Completions=AS;const mR=Symbol("brand.privateNullableHeaders");function*Hz(t){if(!t)return;if(mR in t){const{values:s,nulls:r}=t;yield*s.entries();for(const a of r)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():z5(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let s of n){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const a=z5(s[1])?s[1]:[s[1]];let o=!1;for(const c of a)c!==void 0&&(e&&!o&&(o=!0,yield[r,null]),yield[r,c])}}const Ve=t=>{const e=new Headers,n=new Set;for(const s of t){const r=new Set;for(const[a,o]of Hz(s)){const c=a.toLowerCase();r.has(c)||(e.delete(a),r.add(c)),o===null?(e.delete(a),n.add(c)):(e.append(a,o),n.delete(c))}}return{[mR]:!0,values:e,nulls:n}};class gR extends Ye{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:Ve([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class yR extends Ye{create(e,n){return this._client.post("/audio/transcriptions",no({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class vR extends Ye{create(e,n){return this._client.post("/audio/translations",no({body:e,...n,__metadata:{model:e.model}},this._client))}}class bf extends Ye{constructor(){super(...arguments),this.transcriptions=new yR(this._client),this.translations=new vR(this._client),this.speech=new gR(this._client)}}bf.Transcriptions=yR;bf.Translations=vR;bf.Speech=gR;class bR extends Ye{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(ke`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",Nn,{query:e,...n})}cancel(e,n){return this._client.post(ke`/batches/${e}/cancel`,n)}}class xR extends Ye{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:Ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(ke`/assistants/${e}`,{...n,headers:Ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,s){return this._client.post(ke`/assistants/${e}`,{body:n,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e={},n){return this._client.getAPIList("/assistants",Nn,{query:e,...n,headers:Ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(ke`/assistants/${e}`,{...n,headers:Ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let _R=class extends Ye{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:Ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class wR extends Ye{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:Ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let Eg=class extends Ye{constructor(){super(...arguments),this.sessions=new _R(this._client),this.transcriptionSessions=new wR(this._client)}};Eg.Sessions=_R;Eg.TranscriptionSessions=wR;class SR extends Ye{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:Ve([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(e,n){return this._client.post(ke`/chatkit/sessions/${e}/cancel`,{...n,headers:Ve([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let kR=class extends Ye{retrieve(e,n){return this._client.get(ke`/chatkit/threads/${e}`,{...n,headers:Ve([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",m0,{query:e,...n,headers:Ve([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(e,n){return this._client.delete(ke`/chatkit/threads/${e}`,{...n,headers:Ve([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(e,n={},s){return this._client.getAPIList(ke`/chatkit/threads/${e}/items`,m0,{query:n,...s,headers:Ve([{"OpenAI-Beta":"chatkit_beta=v1"},s?.headers])})}};class jg extends Ye{constructor(){super(...arguments),this.sessions=new SR(this._client),this.threads=new kR(this._client)}}jg.Sessions=SR;jg.Threads=kR;class CR extends Ye{create(e,n,s){return this._client.post(ke`/threads/${e}/messages`,{body:n,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}retrieve(e,n,s){const{thread_id:r}=n;return this._client.get(ke`/threads/${r}/messages/${e}`,{...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}update(e,n,s){const{thread_id:r,...a}=n;return this._client.post(ke`/threads/${r}/messages/${e}`,{body:a,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n={},s){return this._client.getAPIList(ke`/threads/${e}/messages`,Nn,{query:n,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}delete(e,n,s){const{thread_id:r}=n;return this._client.delete(ke`/threads/${r}/messages/${e}`,{...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}class NR extends Ye{retrieve(e,n,s){const{thread_id:r,run_id:a,...o}=n;return this._client.get(ke`/threads/${r}/runs/${a}/steps/${e}`,{query:o,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n,s){const{thread_id:r,...a}=n;return this._client.getAPIList(ke`/threads/${r}/runs/${e}/steps`,Nn,{query:a,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}const Uz=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,s=new Uint8Array(n);for(let r=0;r<n;r++)s[r]=e.charCodeAt(r);return Array.from(new Float32Array(s.buffer))}};var Vz={};const mc=t=>{if(typeof globalThis.process<"u")return Vz?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var Zn,Vl,Px,di,Um,Kr,Fl,Oc,Hl,w0,ir,Vm,Fm,Cd,Yh,Xh,nA,sA,rA,iA,aA,lA,oA;class Nd extends CS{constructor(){super(...arguments),Zn.add(this),Px.set(this,[]),di.set(this,{}),Um.set(this,{}),Kr.set(this,void 0),Fl.set(this,void 0),Oc.set(this,void 0),Hl.set(this,void 0),w0.set(this,void 0),ir.set(this,void 0),Vm.set(this,void 0),Fm.set(this,void 0),Cd.set(this,void 0)}[(Px=new WeakMap,di=new WeakMap,Um=new WeakMap,Kr=new WeakMap,Fl=new WeakMap,Oc=new WeakMap,Hl=new WeakMap,w0=new WeakMap,ir=new WeakMap,Vm=new WeakMap,Fm=new WeakMap,Cd=new WeakMap,Zn=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("event",r=>{const a=n.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{s=!0;for(const r of n)r.resolve(void 0);n.length=0}),this.on("abort",r=>{s=!0;for(const a of n)a.reject(r);n.length=0}),this.on("error",r=>{s=!0;for(const a of n)a.reject(r);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((a,o)=>n.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new Vl;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=fi.fromReadableStream(e,this.controller);for await(const a of r)ce(this,Zn,"m",Yh).call(this,a);if(r.controller.signal?.aborted)throw new Rr;return this._addRun(ce(this,Zn,"m",Xh).call(this))}toReadableStream(){return new fi(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,s,r){const a=new Vl;return a._run(()=>a._runToolAssistantStream(e,n,s,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,n,s,r){const a=r?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...s,stream:!0},c=await e.submitToolOutputs(n,o,{...r,signal:this.controller.signal});this._connected();for await(const h of c)ce(this,Zn,"m",Yh).call(this,h);if(c.controller.signal?.aborted)throw new Rr;return this._addRun(ce(this,Zn,"m",Xh).call(this))}static createThreadAssistantStream(e,n,s){const r=new Vl;return r._run(()=>r._threadAssistantStream(e,n,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,n,s,r){const a=new Vl;return a._run(()=>a._runAssistantStream(e,n,s,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return ce(this,Vm,"f")}currentRun(){return ce(this,Fm,"f")}currentMessageSnapshot(){return ce(this,Kr,"f")}currentRunStepSnapshot(){return ce(this,Cd,"f")}async finalRunSteps(){return await this.done(),Object.values(ce(this,di,"f"))}async finalMessages(){return await this.done(),Object.values(ce(this,Um,"f"))}async finalRun(){if(await this.done(),!ce(this,Fl,"f"))throw Error("Final run was not received.");return ce(this,Fl,"f")}async _createThreadAssistantStream(e,n,s){const r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},o=await e.createAndRun(a,{...s,signal:this.controller.signal});this._connected();for await(const c of o)ce(this,Zn,"m",Yh).call(this,c);if(o.controller.signal?.aborted)throw new Rr;return this._addRun(ce(this,Zn,"m",Xh).call(this))}async _createAssistantStream(e,n,s,r){const a=r?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...s,stream:!0},c=await e.create(n,o,{...r,signal:this.controller.signal});this._connected();for await(const h of c)ce(this,Zn,"m",Yh).call(this,h);if(c.controller.signal?.aborted)throw new Rr;return this._addRun(ce(this,Zn,"m",Xh).call(this))}static accumulateDelta(e,n){for(const[s,r]of Object.entries(n)){if(!e.hasOwnProperty(s)){e[s]=r;continue}let a=e[s];if(a==null){e[s]=r;continue}if(s==="index"||s==="type"){e[s]=r;continue}if(typeof a=="string"&&typeof r=="string")a+=r;else if(typeof a=="number"&&typeof r=="number")a+=r;else if(hb(a)&&hb(r))a=this.accumulateDelta(a,r);else if(Array.isArray(a)&&Array.isArray(r)){if(a.every(o=>typeof o=="string"||typeof o=="number")){a.push(...r);continue}for(const o of r){if(!hb(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const c=o.index;if(c==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof c!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${c}`);const h=a[c];h==null?a.push(o):a[c]=this.accumulateDelta(h,o)}continue}else throw Error(`Unhandled record type: ${s}, deltaValue: ${r}, accValue: ${a}`);e[s]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,n,s){return await this._createThreadAssistantStream(n,e,s)}async _runAssistantStream(e,n,s,r){return await this._createAssistantStream(n,e,s,r)}async _runToolAssistantStream(e,n,s,r){return await this._createToolAssistantStream(n,e,s,r)}}Vl=Nd,Yh=function(e){if(!this.ended)switch(st(this,Vm,e),ce(this,Zn,"m",rA).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":ce(this,Zn,"m",oA).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ce(this,Zn,"m",sA).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":ce(this,Zn,"m",nA).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Xh=function(){if(this.ended)throw new Je("stream has ended, this shouldn't happen");if(!ce(this,Fl,"f"))throw Error("Final run has not been received");return ce(this,Fl,"f")},nA=function(e){const[n,s]=ce(this,Zn,"m",aA).call(this,e,ce(this,Kr,"f"));st(this,Kr,n),ce(this,Um,"f")[n.id]=n;for(const r of s){const a=n.content[r.index];a?.type=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const r of e.data.delta.content){if(r.type=="text"&&r.text){let a=r.text,o=n.content[r.index];if(o&&o.type=="text")this._emit("textDelta",a,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=ce(this,Oc,"f")){if(ce(this,Hl,"f"))switch(ce(this,Hl,"f").type){case"text":this._emit("textDone",ce(this,Hl,"f").text,ce(this,Kr,"f"));break;case"image_file":this._emit("imageFileDone",ce(this,Hl,"f").image_file,ce(this,Kr,"f"));break}st(this,Oc,r.index)}st(this,Hl,n.content[r.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(ce(this,Oc,"f")!==void 0){const r=e.data.content[ce(this,Oc,"f")];if(r)switch(r.type){case"image_file":this._emit("imageFileDone",r.image_file,ce(this,Kr,"f"));break;case"text":this._emit("textDone",r.text,ce(this,Kr,"f"));break}}ce(this,Kr,"f")&&this._emit("messageDone",e.data),st(this,Kr,void 0)}},sA=function(e){const n=ce(this,Zn,"m",iA).call(this,e);switch(st(this,Cd,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const s=e.data.delta;if(s.step_details&&s.step_details.type=="tool_calls"&&s.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const a of s.step_details.tool_calls)a.index==ce(this,w0,"f")?this._emit("toolCallDelta",a,n.step_details.tool_calls[a.index]):(ce(this,ir,"f")&&this._emit("toolCallDone",ce(this,ir,"f")),st(this,w0,a.index),st(this,ir,n.step_details.tool_calls[a.index]),ce(this,ir,"f")&&this._emit("toolCallCreated",ce(this,ir,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":st(this,Cd,void 0),e.data.step_details.type=="tool_calls"&&ce(this,ir,"f")&&(this._emit("toolCallDone",ce(this,ir,"f")),st(this,ir,void 0)),this._emit("runStepDone",e.data,n);break}},rA=function(e){ce(this,Px,"f").push(e),this._emit("event",e)},iA=function(e){switch(e.event){case"thread.run.step.created":return ce(this,di,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=ce(this,di,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let s=e.data;if(s.delta){const r=Vl.accumulateDelta(n,s.delta);ce(this,di,"f")[e.data.id]=r}return ce(this,di,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":ce(this,di,"f")[e.data.id]=e.data;break}if(ce(this,di,"f")[e.data.id])return ce(this,di,"f")[e.data.id];throw new Error("No snapshot available")},aA=function(e,n){let s=[];switch(e.event){case"thread.message.created":return[e.data,s];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const a of r.delta.content)if(a.index in n.content){let o=n.content[a.index];n.content[a.index]=ce(this,Zn,"m",lA).call(this,a,o)}else n.content[a.index]=a,s.push(a);return[n,s];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,s];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},lA=function(e,n){return Vl.accumulateDelta(n,e)},oA=function(e){switch(st(this,Fm,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":st(this,Fl,e.data),ce(this,ir,"f")&&(this._emit("toolCallDone",ce(this,ir,"f")),st(this,ir,void 0));break}};let jS=class extends Ye{constructor(){super(...arguments),this.steps=new NR(this._client)}create(e,n,s){const{include:r,...a}=n;return this._client.post(ke`/threads/${e}/runs`,{query:{include:r},body:a,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers]),stream:n.stream??!1})}retrieve(e,n,s){const{thread_id:r}=n;return this._client.get(ke`/threads/${r}/runs/${e}`,{...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}update(e,n,s){const{thread_id:r,...a}=n;return this._client.post(ke`/threads/${r}/runs/${e}`,{body:a,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n={},s){return this._client.getAPIList(ke`/threads/${e}/runs`,Nn,{query:n,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}cancel(e,n,s){const{thread_id:r}=n;return this._client.post(ke`/threads/${r}/runs/${e}/cancel`,{...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async createAndPoll(e,n,s){const r=await this.create(e,n,s);return await this.poll(r.id,{thread_id:e},s)}createAndStream(e,n,s){return Nd.createAssistantStream(e,this._client.beta.threads.runs,n,s)}async poll(e,n,s){const r=Ve([s?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":s?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:o}=await this.retrieve(e,n,{...s,headers:{...s?.headers,...r}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let c=5e3;if(s?.pollIntervalMs)c=s.pollIntervalMs;else{const h=o.headers.get("openai-poll-after-ms");if(h){const d=parseInt(h);isNaN(d)||(c=d)}}await yf(c);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,n,s){return Nd.createAssistantStream(e,this._client.beta.threads.runs,n,s)}submitToolOutputs(e,n,s){const{thread_id:r,...a}=n;return this._client.post(ke`/threads/${r}/runs/${e}/submit_tool_outputs`,{body:a,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,s){const r=await this.submitToolOutputs(e,n,s);return await this.poll(r.id,n,s)}submitToolOutputsStream(e,n,s){return Nd.createToolAssistantStream(e,this._client.beta.threads.runs,n,s)}};jS.Steps=NR;class Tg extends Ye{constructor(){super(...arguments),this.runs=new jS(this._client),this.messages=new CR(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:Ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(ke`/threads/${e}`,{...n,headers:Ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,s){return this._client.post(ke`/threads/${e}`,{body:n,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}delete(e,n){return this._client.delete(ke`/threads/${e}`,{...n,headers:Ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:Ve([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const s=await this.createAndRun(e,n);return await this.runs.poll(s.id,{thread_id:s.thread_id},n)}createAndRunStream(e,n){return Nd.createThreadAssistantStream(e,this._client.beta.threads,n)}}Tg.Runs=jS;Tg.Messages=CR;class du extends Ye{constructor(){super(...arguments),this.realtime=new Eg(this._client),this.chatkit=new jg(this._client),this.assistants=new xR(this._client),this.threads=new Tg(this._client)}}du.Realtime=Eg;du.ChatKit=jg;du.Assistants=xR;du.Threads=Tg;class AR extends Ye{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class ER extends Ye{retrieve(e,n,s){const{container_id:r}=n;return this._client.get(ke`/containers/${r}/files/${e}/content`,{...s,headers:Ve([{Accept:"application/binary"},s?.headers]),__binaryResponse:!0})}}let TS=class extends Ye{constructor(){super(...arguments),this.content=new ER(this._client)}create(e,n,s){return this._client.post(ke`/containers/${e}/files`,no({body:n,...s},this._client))}retrieve(e,n,s){const{container_id:r}=n;return this._client.get(ke`/containers/${r}/files/${e}`,s)}list(e,n={},s){return this._client.getAPIList(ke`/containers/${e}/files`,Nn,{query:n,...s})}delete(e,n,s){const{container_id:r}=n;return this._client.delete(ke`/containers/${r}/files/${e}`,{...s,headers:Ve([{Accept:"*/*"},s?.headers])})}};TS.Content=ER;class RS extends Ye{constructor(){super(...arguments),this.files=new TS(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(ke`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",Nn,{query:e,...n})}delete(e,n){return this._client.delete(ke`/containers/${e}`,{...n,headers:Ve([{Accept:"*/*"},n?.headers])})}}RS.Files=TS;class jR extends Ye{create(e,n,s){const{include:r,...a}=n;return this._client.post(ke`/conversations/${e}/items`,{query:{include:r},body:a,...s})}retrieve(e,n,s){const{conversation_id:r,...a}=n;return this._client.get(ke`/conversations/${r}/items/${e}`,{query:a,...s})}list(e,n={},s){return this._client.getAPIList(ke`/conversations/${e}/items`,m0,{query:n,...s})}delete(e,n,s){const{conversation_id:r}=n;return this._client.delete(ke`/conversations/${r}/items/${e}`,s)}}class OS extends Ye{constructor(){super(...arguments),this.items=new jR(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(ke`/conversations/${e}`,n)}update(e,n,s){return this._client.post(ke`/conversations/${e}`,{body:n,...s})}delete(e,n){return this._client.delete(ke`/conversations/${e}`,n)}}OS.Items=jR;class TR extends Ye{create(e,n){const s=!!e.encoding_format;let r=s?e.encoding_format:"base64";s&&Qn(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:r},...n});return s?a:(Qn(this._client).debug("embeddings/decoding base64 embeddings from base64"),a._thenUnwrap(o=>(o&&o.data&&o.data.forEach(c=>{const h=c.embedding;c.embedding=Uz(h)}),o)))}}class RR extends Ye{retrieve(e,n,s){const{eval_id:r,run_id:a}=n;return this._client.get(ke`/evals/${r}/runs/${a}/output_items/${e}`,s)}list(e,n,s){const{eval_id:r,...a}=n;return this._client.getAPIList(ke`/evals/${r}/runs/${e}/output_items`,Nn,{query:a,...s})}}class BS extends Ye{constructor(){super(...arguments),this.outputItems=new RR(this._client)}create(e,n,s){return this._client.post(ke`/evals/${e}/runs`,{body:n,...s})}retrieve(e,n,s){const{eval_id:r}=n;return this._client.get(ke`/evals/${r}/runs/${e}`,s)}list(e,n={},s){return this._client.getAPIList(ke`/evals/${e}/runs`,Nn,{query:n,...s})}delete(e,n,s){const{eval_id:r}=n;return this._client.delete(ke`/evals/${r}/runs/${e}`,s)}cancel(e,n,s){const{eval_id:r}=n;return this._client.post(ke`/evals/${r}/runs/${e}`,s)}}BS.OutputItems=RR;class MS extends Ye{constructor(){super(...arguments),this.runs=new BS(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(ke`/evals/${e}`,n)}update(e,n,s){return this._client.post(ke`/evals/${e}`,{body:n,...s})}list(e={},n){return this._client.getAPIList("/evals",Nn,{query:e,...n})}delete(e,n){return this._client.delete(ke`/evals/${e}`,n)}}MS.Runs=BS;let OR=class extends Ye{create(e,n){return this._client.post("/files",no({body:e,...n},this._client))}retrieve(e,n){return this._client.get(ke`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",Nn,{query:e,...n})}delete(e,n){return this._client.delete(ke`/files/${e}`,n)}content(e,n){return this._client.get(ke`/files/${e}/content`,{...n,headers:Ve([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:s=1800*1e3}={}){const r=new Set(["processed","error","deleted"]),a=Date.now();let o=await this.retrieve(e);for(;!o.status||!r.has(o.status);)if(await yf(n),o=await this.retrieve(e),Date.now()-a>s)throw new bS({message:`Giving up on waiting for file ${e} to finish processing after ${s} milliseconds.`});return o}};class BR extends Ye{}let MR=class extends Ye{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class DS extends Ye{constructor(){super(...arguments),this.graders=new MR(this._client)}}DS.Graders=MR;class DR extends Ye{create(e,n,s){return this._client.getAPIList(ke`/fine_tuning/checkpoints/${e}/permissions`,Ag,{body:n,method:"post",...s})}retrieve(e,n={},s){return this._client.get(ke`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...s})}delete(e,n,s){const{fine_tuned_model_checkpoint:r}=n;return this._client.delete(ke`/fine_tuning/checkpoints/${r}/permissions/${e}`,s)}}let LS=class extends Ye{constructor(){super(...arguments),this.permissions=new DR(this._client)}};LS.Permissions=DR;class LR extends Ye{list(e,n={},s){return this._client.getAPIList(ke`/fine_tuning/jobs/${e}/checkpoints`,Nn,{query:n,...s})}}class IS extends Ye{constructor(){super(...arguments),this.checkpoints=new LR(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(ke`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",Nn,{query:e,...n})}cancel(e,n){return this._client.post(ke`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},s){return this._client.getAPIList(ke`/fine_tuning/jobs/${e}/events`,Nn,{query:n,...s})}pause(e,n){return this._client.post(ke`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(ke`/fine_tuning/jobs/${e}/resume`,n)}}IS.Checkpoints=LR;class fu extends Ye{constructor(){super(...arguments),this.methods=new BR(this._client),this.jobs=new IS(this._client),this.checkpoints=new LS(this._client),this.alpha=new DS(this._client)}}fu.Methods=BR;fu.Jobs=IS;fu.Checkpoints=LS;fu.Alpha=DS;class IR extends Ye{}class PS extends Ye{constructor(){super(...arguments),this.graderModels=new IR(this._client)}}PS.GraderModels=IR;class PR extends Ye{createVariation(e,n){return this._client.post("/images/variations",no({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",no({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class zR extends Ye{retrieve(e,n){return this._client.get(ke`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",Ag,e)}delete(e,n){return this._client.delete(ke`/models/${e}`,n)}}class $R extends Ye{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class HR extends Ye{accept(e,n,s){return this._client.post(ke`/realtime/calls/${e}/accept`,{body:n,...s,headers:Ve([{Accept:"*/*"},s?.headers])})}hangup(e,n){return this._client.post(ke`/realtime/calls/${e}/hangup`,{...n,headers:Ve([{Accept:"*/*"},n?.headers])})}refer(e,n,s){return this._client.post(ke`/realtime/calls/${e}/refer`,{body:n,...s,headers:Ve([{Accept:"*/*"},s?.headers])})}reject(e,n={},s){return this._client.post(ke`/realtime/calls/${e}/reject`,{body:n,...s,headers:Ve([{Accept:"*/*"},s?.headers])})}}class UR extends Ye{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class Rg extends Ye{constructor(){super(...arguments),this.clientSecrets=new UR(this._client),this.calls=new HR(this._client)}}Rg.ClientSecrets=UR;Rg.Calls=HR;function Fz(t,e){return!e||!Kz(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(s=>({...s,parsed:null}))}:n)}:VR(t,e)}function VR(t,e){const n=t.output.map(r=>{if(r.type==="function_call")return{...r,parsed_arguments:Yz(e,r)};if(r.type==="message"){const a=r.content.map(o=>o.type==="output_text"?{...o,parsed:qz(e,o.text)}:o);return{...r,content:a}}return r}),s=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||zx(s),Object.defineProperty(s,"output_parsed",{enumerable:!0,get(){for(const r of s.output)if(r.type==="message"){for(const a of r.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),s}function qz(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function Kz(t){return!!SS(t.text?.format)}function Wz(t){return t?.$brand==="auto-parseable-tool"}function Gz(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function Yz(t,e){const n=Gz(t.tools??[],e.name);return{...e,...e,parsed_arguments:Wz(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function zx(t){const e=[];for(const n of t.output)if(n.type==="message")for(const s of n.content)s.type==="output_text"&&e.push(s.text);t.output_text=e.join("")}var gc,hm,Ua,dm,cA,uA,hA,dA;class zS extends CS{constructor(e){super(),gc.add(this),hm.set(this,void 0),Ua.set(this,void 0),dm.set(this,void 0),st(this,hm,e)}static createResponse(e,n,s){const r=new zS(n);return r._run(()=>r._createOrRetrieveResponse(e,n,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createOrRetrieveResponse(e,n,s){const r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),ce(this,gc,"m",cA).call(this);let a,o=null;"response_id"in n?(a=await e.responses.retrieve(n.response_id,{stream:!0},{...s,signal:this.controller.signal,stream:!0}),o=n.starting_after??null):a=await e.responses.create({...n,stream:!0},{...s,signal:this.controller.signal}),this._connected();for await(const c of a)ce(this,gc,"m",uA).call(this,c,o);if(a.controller.signal?.aborted)throw new Rr;return ce(this,gc,"m",hA).call(this)}[(hm=new WeakMap,Ua=new WeakMap,dm=new WeakMap,gc=new WeakSet,cA=function(){this.ended||st(this,Ua,void 0)},uA=function(n,s){if(this.ended)return;const r=(o,c)=>{(s==null||c.sequence_number>s)&&this._emit(o,c)},a=ce(this,gc,"m",dA).call(this,n);switch(r("event",n),n.type){case"response.output_text.delta":{const o=a.output[n.output_index];if(!o)throw new Je(`missing output at index ${n.output_index}`);if(o.type==="message"){const c=o.content[n.content_index];if(!c)throw new Je(`missing content at index ${n.content_index}`);if(c.type!=="output_text")throw new Je(`expected content to be 'output_text', got ${c.type}`);r("response.output_text.delta",{...n,snapshot:c.text})}break}case"response.function_call_arguments.delta":{const o=a.output[n.output_index];if(!o)throw new Je(`missing output at index ${n.output_index}`);o.type==="function_call"&&r("response.function_call_arguments.delta",{...n,snapshot:o.arguments});break}default:r(n.type,n);break}},hA=function(){if(this.ended)throw new Je("stream has ended, this shouldn't happen");const n=ce(this,Ua,"f");if(!n)throw new Je("request ended without sending any events");st(this,Ua,void 0);const s=Xz(n,ce(this,hm,"f"));return st(this,dm,s),s},dA=function(n){let s=ce(this,Ua,"f");if(!s){if(n.type!=="response.created")throw new Je(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return s=st(this,Ua,n.response),s}switch(n.type){case"response.output_item.added":{s.output.push(n.item);break}case"response.content_part.added":{const r=s.output[n.output_index];if(!r)throw new Je(`missing output at index ${n.output_index}`);const a=r.type,o=n.part;a==="message"&&o.type!=="reasoning_text"?r.content.push(o):a==="reasoning"&&o.type==="reasoning_text"&&(r.content||(r.content=[]),r.content.push(o));break}case"response.output_text.delta":{const r=s.output[n.output_index];if(!r)throw new Je(`missing output at index ${n.output_index}`);if(r.type==="message"){const a=r.content[n.content_index];if(!a)throw new Je(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new Je(`expected content to be 'output_text', got ${a.type}`);a.text+=n.delta}break}case"response.function_call_arguments.delta":{const r=s.output[n.output_index];if(!r)throw new Je(`missing output at index ${n.output_index}`);r.type==="function_call"&&(r.arguments+=n.delta);break}case"response.reasoning_text.delta":{const r=s.output[n.output_index];if(!r)throw new Je(`missing output at index ${n.output_index}`);if(r.type==="reasoning"){const a=r.content?.[n.content_index];if(!a)throw new Je(`missing content at index ${n.content_index}`);if(a.type!=="reasoning_text")throw new Je(`expected content to be 'reasoning_text', got ${a.type}`);a.text+=n.delta}break}case"response.completed":{st(this,Ua,n.response);break}}return s},Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("event",r=>{const a=n.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{s=!0;for(const r of n)r.resolve(void 0);n.length=0}),this.on("abort",r=>{s=!0;for(const a of n)a.reject(r);n.length=0}),this.on("error",r=>{s=!0;for(const a of n)a.reject(r);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((a,o)=>n.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=ce(this,dm,"f");if(!e)throw new Je("stream ended without producing a ChatCompletion");return e}}function Xz(t,e){return Fz(t,e)}class FR extends Ye{list(e,n={},s){return this._client.getAPIList(ke`/responses/${e}/input_items`,Nn,{query:n,...s})}}class qR extends Ye{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class Og extends Ye{constructor(){super(...arguments),this.inputItems=new FR(this._client),this.inputTokens=new qR(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&zx(s),s))}retrieve(e,n={},s){return this._client.get(ke`/responses/${e}`,{query:n,...s,stream:n?.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&zx(r),r))}delete(e,n){return this._client.delete(ke`/responses/${e}`,{...n,headers:Ve([{Accept:"*/*"},n?.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(s=>VR(s,e))}stream(e,n){return zS.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(ke`/responses/${e}/cancel`,n)}compact(e,n){return this._client.post("/responses/compact",{body:e,...n})}}Og.InputItems=FR;Og.InputTokens=qR;class KR extends Ye{create(e,n,s){return this._client.post(ke`/uploads/${e}/parts`,no({body:n,...s},this._client))}}class $S extends Ye{constructor(){super(...arguments),this.parts=new KR(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(ke`/uploads/${e}/cancel`,n)}complete(e,n,s){return this._client.post(ke`/uploads/${e}/complete`,{body:n,...s})}}$S.Parts=KR;const Jz=async t=>{const e=await Promise.allSettled(t),n=e.filter(r=>r.status==="rejected");if(n.length){for(const r of n)console.error(r.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const s=[];for(const r of e)r.status==="fulfilled"&&s.push(r.value);return s};class WR extends Ye{create(e,n,s){return this._client.post(ke`/vector_stores/${e}/file_batches`,{body:n,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}retrieve(e,n,s){const{vector_store_id:r}=n;return this._client.get(ke`/vector_stores/${r}/file_batches/${e}`,{...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}cancel(e,n,s){const{vector_store_id:r}=n;return this._client.post(ke`/vector_stores/${r}/file_batches/${e}/cancel`,{...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async createAndPoll(e,n,s){const r=await this.create(e,n);return await this.poll(e,r.id,s)}listFiles(e,n,s){const{vector_store_id:r,...a}=n;return this._client.getAPIList(ke`/vector_stores/${r}/file_batches/${e}/files`,Nn,{query:a,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async poll(e,n,s){const r=Ve([s?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":s?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:o}=await this.retrieve(n,{vector_store_id:e},{...s,headers:r}).withResponse();switch(a.status){case"in_progress":let c=5e3;if(s?.pollIntervalMs)c=s.pollIntervalMs;else{const h=o.headers.get("openai-poll-after-ms");if(h){const d=parseInt(h);isNaN(d)||(c=d)}}await yf(c);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:n,fileIds:s=[]},r){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=r?.maxConcurrency??5,o=Math.min(a,n.length),c=this._client,h=n.values(),d=[...s];async function g(v){for(let y of v){const _=await c.files.create({file:y,purpose:"assistants"},r);d.push(_.id)}}const m=Array(o).fill(h).map(g);return await Jz(m),await this.createAndPoll(e,{file_ids:d})}}class GR extends Ye{create(e,n,s){return this._client.post(ke`/vector_stores/${e}/files`,{body:n,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}retrieve(e,n,s){const{vector_store_id:r}=n;return this._client.get(ke`/vector_stores/${r}/files/${e}`,{...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}update(e,n,s){const{vector_store_id:r,...a}=n;return this._client.post(ke`/vector_stores/${r}/files/${e}`,{body:a,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e,n={},s){return this._client.getAPIList(ke`/vector_stores/${e}/files`,Nn,{query:n,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}delete(e,n,s){const{vector_store_id:r}=n;return this._client.delete(ke`/vector_stores/${r}/files/${e}`,{...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}async createAndPoll(e,n,s){const r=await this.create(e,n,s);return await this.poll(e,r.id,s)}async poll(e,n,s){const r=Ve([s?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":s?.pollIntervalMs?.toString()??void 0}]);for(;;){const a=await this.retrieve(n,{vector_store_id:e},{...s,headers:r}).withResponse(),o=a.data;switch(o.status){case"in_progress":let c=5e3;if(s?.pollIntervalMs)c=s.pollIntervalMs;else{const h=a.response.headers.get("openai-poll-after-ms");if(h){const d=parseInt(h);isNaN(d)||(c=d)}}await yf(c);break;case"failed":case"completed":return o}}}async upload(e,n,s){const r=await this._client.files.create({file:n,purpose:"assistants"},s);return this.create(e,{file_id:r.id},s)}async uploadAndPoll(e,n,s){const r=await this.upload(e,n,s);return await this.poll(e,r.id,s)}content(e,n,s){const{vector_store_id:r}=n;return this._client.getAPIList(ke`/vector_stores/${r}/files/${e}/content`,Ag,{...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}class Bg extends Ye{constructor(){super(...arguments),this.files=new GR(this._client),this.fileBatches=new WR(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:Ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(ke`/vector_stores/${e}`,{...n,headers:Ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,s){return this._client.post(ke`/vector_stores/${e}`,{body:n,...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",Nn,{query:e,...n,headers:Ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(ke`/vector_stores/${e}`,{...n,headers:Ve([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(e,n,s){return this._client.getAPIList(ke`/vector_stores/${e}/search`,Ag,{body:n,method:"post",...s,headers:Ve([{"OpenAI-Beta":"assistants=v2"},s?.headers])})}}Bg.Files=GR;Bg.FileBatches=WR;class YR extends Ye{create(e,n){return this._client.post("/videos",J5({body:e,...n},this._client))}retrieve(e,n){return this._client.get(ke`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",m0,{query:e,...n})}delete(e,n){return this._client.delete(ke`/videos/${e}`,n)}downloadContent(e,n={},s){return this._client.get(ke`/videos/${e}/content`,{query:n,...s,headers:Ve([{Accept:"application/binary"},s?.headers]),__binaryResponse:!0})}remix(e,n,s){return this._client.post(ke`/videos/${e}/remix`,J5({body:n,...s},this._client))}}var Ac,XR,qm;class JR extends Ye{constructor(){super(...arguments),Ac.add(this)}async unwrap(e,n,s=this._client.webhookSecret,r=300){return await this.verifySignature(e,n,s,r),JSON.parse(e)}async verifySignature(e,n,s=this._client.webhookSecret,r=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");ce(this,Ac,"m",XR).call(this,s);const a=Ve([n]).values,o=ce(this,Ac,"m",qm).call(this,a,"webhook-signature"),c=ce(this,Ac,"m",qm).call(this,a,"webhook-timestamp"),h=ce(this,Ac,"m",qm).call(this,a,"webhook-id"),d=parseInt(c,10);if(isNaN(d))throw new Uh("Invalid webhook timestamp format");const g=Math.floor(Date.now()/1e3);if(g-d>r)throw new Uh("Webhook timestamp is too old");if(d>g+r)throw new Uh("Webhook timestamp is too new");const m=o.split(" ").map(w=>w.startsWith("v1,")?w.substring(3):w),v=s.startsWith("whsec_")?Buffer.from(s.replace("whsec_",""),"base64"):Buffer.from(s,"utf-8"),y=h?`${h}.${c}.${e}`:`${c}.${e}`,_=await crypto.subtle.importKey("raw",v,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const w of m)try{const S=Buffer.from(w,"base64");if(await crypto.subtle.verify("HMAC",_,S,new TextEncoder().encode(y)))return}catch{continue}throw new Uh("The given webhook signature does not match the expected signature")}}Ac=new WeakSet,XR=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},qm=function(e,n){if(!e)throw new Error("Headers are required");const s=e.get(n);if(s==null)throw new Error(`Missing required header: ${n}`);return s};var $x,HS,Km,QR;class mt{constructor({baseURL:e=mc("OPENAI_BASE_URL"),apiKey:n=mc("OPENAI_API_KEY"),organization:s=mc("OPENAI_ORG_ID")??null,project:r=mc("OPENAI_PROJECT_ID")??null,webhookSecret:a=mc("OPENAI_WEBHOOK_SECRET")??null,...o}={}){if($x.add(this),Km.set(this,void 0),this.completions=new AR(this),this.chat=new ES(this),this.embeddings=new TR(this),this.files=new OR(this),this.images=new PR(this),this.audio=new bf(this),this.moderations=new $R(this),this.models=new zR(this),this.fineTuning=new fu(this),this.graders=new PS(this),this.vectorStores=new Bg(this),this.webhooks=new JR(this),this.beta=new du(this),this.batches=new bR(this),this.uploads=new $S(this),this.responses=new Og(this),this.realtime=new Rg(this),this.conversations=new OS(this),this.evals=new MS(this),this.containers=new RS(this),this.videos=new YR(this),n===void 0)throw new Je("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const c={apiKey:n,organization:s,project:r,webhookSecret:a,...o,baseURL:e||"https://api.openai.com/v1"};if(!c.dangerouslyAllowBrowser&&QP())throw new Je(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=c.baseURL,this.timeout=c.timeout??HS.DEFAULT_TIMEOUT,this.logger=c.logger??console;const h="warn";this.logLevel=h,this.logLevel=Y5(c.logLevel,"ClientOptions.logLevel",this)??Y5(mc("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??h,this.fetchOptions=c.fetchOptions,this.maxRetries=c.maxRetries??2,this.fetch=c.fetch??sz(),st(this,Km,iz),this._options=c,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=s,this.project=r,this.webhookSecret=a}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return Ve([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return hz(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Cc}`}defaultIdempotencyKey(){return`stainless-node-retry-${_T()}`}makeStatusError(e,n,s,r){return is.generate(e,n,s,r)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(s){throw s instanceof Je?s:new Je(`Failed to get token from 'apiKey' function: ${s.message}`,{cause:s})}if(typeof n!="string"||!n)throw new Je(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,s){const r=!ce(this,$x,"m",QR).call(this)&&s||this.baseURL,a=WP(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return GP(o)||(n={...o,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:s}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,s){return this.request(Promise.resolve(s).then(r=>({method:e,path:n,...r})))}request(e,n=null){return new Ng(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,s){const r=await e,a=r.maxRetries??this.maxRetries;n==null&&(n=a),await this.prepareOptions(r);const{req:o,url:c,timeout:h}=await this.buildRequest(r,{retryCount:a-n});await this.prepareRequest(o,{url:c,options:r});const d="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=s===void 0?"":`, retryOf: ${s}`,m=Date.now();if(Qn(this).debug(`[${d}] sending request`,Il({retryOfRequestLogID:s,method:r.method,url:c,options:r,headers:o.headers})),r.signal?.aborted)throw new Rr;const v=new AbortController,y=await this.fetchWithTimeout(c,o,h,v).catch(Ex),_=Date.now();if(y instanceof globalThis.Error){const k=`retrying, ${n} attempts remaining`;if(r.signal?.aborted)throw new Rr;const C=Ax(y)||/timed? ?out/i.test(String(y)+("cause"in y?String(y.cause):""));if(n)return Qn(this).info(`[${d}] connection ${C?"timed out":"failed"} - ${k}`),Qn(this).debug(`[${d}] connection ${C?"timed out":"failed"} (${k})`,Il({retryOfRequestLogID:s,url:c,durationMs:_-m,message:y.message})),this.retryRequest(r,n,s??d);throw Qn(this).info(`[${d}] connection ${C?"timed out":"failed"} - error; no more retries left`),Qn(this).debug(`[${d}] connection ${C?"timed out":"failed"} (error; no more retries left)`,Il({retryOfRequestLogID:s,url:c,durationMs:_-m,message:y.message})),C?new bS:new kg({cause:y})}const w=[...y.headers.entries()].filter(([k])=>k==="x-request-id").map(([k,C])=>", "+k+": "+JSON.stringify(C)).join(""),S=`[${d}${g}${w}] ${o.method} ${c} ${y.ok?"succeeded":"failed"} with status ${y.status} in ${_-m}ms`;if(!y.ok){const k=await this.shouldRetry(y);if(n&&k){const P=`retrying, ${n} attempts remaining`;return await rz(y.body),Qn(this).info(`${S} - ${P}`),Qn(this).debug(`[${d}] response error (${P})`,Il({retryOfRequestLogID:s,url:y.url,status:y.status,headers:y.headers,durationMs:_-m})),this.retryRequest(r,n,s??d,y.headers)}const C=k?"error; no more retries left":"error; not retryable";Qn(this).info(`${S} - ${C}`);const E=await y.text().catch(P=>Ex(P).message),B=JP(E),D=B?void 0:E;throw Qn(this).debug(`[${d}] response error (${C})`,Il({retryOfRequestLogID:s,url:y.url,status:y.status,headers:y.headers,message:D,durationMs:Date.now()-m})),this.makeStatusError(y.status,B,D,y.headers)}return Qn(this).info(S),Qn(this).debug(`[${d}] response start`,Il({retryOfRequestLogID:s,url:y.url,status:y.status,headers:y.headers,durationMs:_-m})),{response:y,options:r,controller:v,requestLogID:d,retryOfRequestLogID:s,startTime:m}}getAPIList(e,n,s){return this.requestAPIList(n,{method:"get",path:e,...s})}requestAPIList(e,n){const s=this.makeRequest(n,null,void 0);return new xz(this,s,e)}async fetchWithTimeout(e,n,s,r){const{signal:a,method:o,...c}=n||{};a&&a.addEventListener("abort",()=>r.abort());const h=setTimeout(()=>r.abort(),s),d=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,g={signal:r.signal,...d?{duplex:"half"}:{},method:"GET",...c};o&&(g.method=o.toUpperCase());try{return await this.fetch.call(void 0,e,g)}finally{clearTimeout(h)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,s,r){let a;const o=r?.get("retry-after-ms");if(o){const h=parseFloat(o);Number.isNaN(h)||(a=h)}const c=r?.get("retry-after");if(c&&!a){const h=parseFloat(c);Number.isNaN(h)?a=Date.parse(c)-Date.now():a=h*1e3}if(!(a&&0<=a&&a<60*1e3)){const h=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,h)}return await yf(a),this.makeRequest(e,n-1,s)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,o=Math.min(.5*Math.pow(2,a),8),c=1-Math.random()*.25;return o*c*1e3}async buildRequest(e,{retryCount:n=0}={}){const s={...e},{method:r,path:a,query:o,defaultBaseURL:c}=s,h=this.buildURL(a,o,c);"timeout"in s&&XP("timeout",s.timeout),s.timeout=s.timeout??this.timeout;const{bodyHeaders:d,body:g}=this.buildBody({options:s}),m=await this.buildHeaders({options:e,method:r,bodyHeaders:d,retryCount:n});return{req:{method:r,headers:m,...s.signal&&{signal:s.signal},...globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"},...g&&{body:g},...this.fetchOptions??{},...s.fetchOptions??{}},url:h,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:s,retryCount:r}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const o=Ve([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...nz(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,s,e.headers]);return this.validateHeaders(o),o.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Ve([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:MT(e)}:ce(this,Km,"f").call(this,{body:e,headers:s})}}HS=mt,Km=new WeakMap,$x=new WeakSet,QR=function(){return this.baseURL!=="https://api.openai.com/v1"};mt.OpenAI=HS;mt.DEFAULT_TIMEOUT=6e5;mt.OpenAIError=Je;mt.APIError=is;mt.APIConnectionError=kg;mt.APIConnectionTimeoutError=bS;mt.APIUserAbortError=Rr;mt.NotFoundError=CT;mt.ConflictError=NT;mt.RateLimitError=ET;mt.BadRequestError=wT;mt.AuthenticationError=ST;mt.InternalServerError=jT;mt.PermissionDeniedError=kT;mt.UnprocessableEntityError=AT;mt.InvalidWebhookSignatureError=Uh;mt.toFile=Cz;mt.Completions=AR;mt.Chat=ES;mt.Embeddings=TR;mt.Files=OR;mt.Images=PR;mt.Audio=bf;mt.Moderations=$R;mt.Models=zR;mt.FineTuning=fu;mt.Graders=PS;mt.VectorStores=Bg;mt.Webhooks=JR;mt.Beta=du;mt.Batches=bR;mt.Uploads=$S;mt.Responses=Og;mt.Realtime=Rg;mt.Conversations=OS;mt.Evals=MS;mt.Containers=RS;mt.Videos=YR;const Qz=new mt({baseURL:`${window.location.origin}/openai/v1`,apiKey:"not-needed",dangerouslyAllowBrowser:!0}),Xa={User:"user",Assistant:"assistant",Tool:"tool"};function Zz(t){return t.map(e=>({type:"function",name:e.name,description:e.description,parameters:e.parameters,strict:!1}))}async function e$(t,e,n,s,r){const a=[];for(const g of n)switch(g.role){case Xa.User:{a.push({type:"message",role:"user",content:[{type:"input_text",text:g.content}]});break}case Xa.Tool:{if(g.toolResult){const m=typeof g.toolResult.data=="string"?g.toolResult.data:JSON.stringify(g.toolResult.data);a.push({type:"function_call_output",call_id:g.toolResult.id,output:m})}break}case Xa.Assistant:{if(g.toolCalls&&g.toolCalls.length>0)for(const m of g.toolCalls)a.push({type:"function_call",call_id:m.id,name:m.name,arguments:m.arguments});else a.push({type:"message",role:"assistant",content:g.content});break}}const o=Qz.responses.stream({model:t,tools:Zz(s),input:a,instructions:e});if(r){let g="";o.on("response.output_text.delta",m=>{const v=m.delta;g+=v,r(v,g)})}const c=await o.finalResponse();if(!c.output)return{role:Xa.Assistant,content:""};let h="";const d=[];for(const g of c.output)if(g.type==="message"){if(g.content)for(const m of g.content)m.type==="output_text"&&(h=m.text)}else g.type==="function_call"&&g.call_id&&d.push({id:g.call_id,name:g.name,arguments:g.arguments});return{role:Xa.Assistant,content:h,toolCalls:d.length>0?d:void 0}}const t$=[{name:"list_resources",description:"List Kubernetes resources of a specific type in a namespace or cluster-wide",parameters:{type:"object",properties:{resource:{type:"string",description:"The type of resource to list (e.g., pods, deployments, services, configmaps, secrets, ingresses, gateways, httproutes, grpcroutes, tcproutes, udproutes, tlsroutes, jobs, cronjobs, daemonsets, statefulsets, replicasets, nodes, namespaces, persistentvolumes, persistentvolumeclaims, events)"},namespace:{type:"string",description:'The namespace to list resources from. Use "all" for all namespaces, or omit for cluster-scoped resources'}},required:["resource"]}},{name:"get_resource",description:"Get detailed information about a specific Kubernetes resource",parameters:{type:"object",properties:{resource:{type:"string",description:"The type of resource (e.g., pod, deployment, service)"},name:{type:"string",description:"The name of the resource"},namespace:{type:"string",description:"The namespace of the resource (required for namespaced resources)"}},required:["resource","name"]}},{name:"get_pod_logs",description:"Get logs from a specific pod",parameters:{type:"object",properties:{name:{type:"string",description:"The name of the pod"},namespace:{type:"string",description:"The namespace of the pod"},container:{type:"string",description:"The container name (optional, defaults to first container)"},tailLines:{type:"string",description:"Number of lines to return from the end of the logs (default: 100)"}},required:["name","namespace"]}},{name:"describe_resource",description:"Get events and status conditions for a Kubernetes resource",parameters:{type:"object",properties:{resource:{type:"string",description:"The type of resource (e.g., pod, deployment, service)"},name:{type:"string",description:"The name of the resource"},namespace:{type:"string",description:"The namespace of the resource"}},required:["resource","name","namespace"]}}];async function bb(t,e){const n=e.toLowerCase(),s=await _o(t,n);return s?{config:s,plural:s.name}:null}async function n$(t,e,n){switch(e){case"list_resources":{const s=await bb(t,n.resource);if(!s)return{error:`Unknown resource type: ${n.resource}`};const{config:r,plural:a}=s,o=Jl(r);let c;r.namespaced&&n.namespace&&n.namespace!=="all"?c=`${o}/namespaces/${n.namespace}/${a}`:c=`${o}/${a}`;const h=await fetch(`/contexts/${t}${c}`);if(!h.ok)return{error:`Failed to list ${a}: ${h.status} ${h.statusText}`};const d=await h.json();return{kind:d.kind,items:d.items?.map(g=>({name:g.metadata?.name,namespace:g.metadata?.namespace,createdAt:g.metadata?.creationTimestamp,status:g.status}))||[]}}case"get_resource":{const s=await bb(t,n.resource);if(!s)return{error:`Unknown resource type: ${n.resource}`};const{config:r,plural:a}=s,o=Jl(r);let c;r.namespaced&&n.namespace?c=`${o}/namespaces/${n.namespace}/${a}/${n.name}`:c=`${o}/${a}/${n.name}`;const h=await fetch(`/contexts/${t}${c}`);return h.ok?h.json():{error:`Failed to get ${n.resource} ${n.name}: ${h.status} ${h.statusText}`}}case"get_pod_logs":{const s=n.tailLines||"100";let r=`/api/v1/namespaces/${n.namespace}/pods/${n.name}/log?tailLines=${s}`;n.container&&(r+=`&container=${n.container}`);const a=await fetch(`/contexts/${t}${r}`);return a.ok?{logs:await a.text()||"(no logs available)"}:{error:`Failed to get logs: ${a.status} ${a.statusText}`}}case"describe_resource":{const s=await bb(t,n.resource);if(!s)return{error:`Unknown resource type: ${n.resource}`};const{config:r,plural:a}=s,o=Jl(r);let c;r.namespaced&&n.namespace?c=`${o}/namespaces/${n.namespace}/${a}/${n.name}`:c=`${o}/${a}/${n.name}`;const h=await fetch(`/contexts/${t}${c}`);if(!h.ok)return{error:`Failed to get ${n.resource} ${n.name}: ${h.status}`};const d=await h.json(),g=`/api/v1/namespaces/${n.namespace}/events?fieldSelector=involvedObject.name=${n.name}`,m=await fetch(`/contexts/${t}${g}`);let v=[];return m.ok&&(v=(await m.json()).items?.map(_=>({type:_.type,reason:_.reason,message:_.message,lastTimestamp:_.lastTimestamp}))||[]),{metadata:d.metadata,spec:d.spec,status:d.status,events:v}}default:return{error:`Unknown tool: ${e}`}}}async function s$(t,e){const n=JSON.parse(e.arguments),s=await n$(t,e.name,n);return{id:e.id,data:s}}async function r$(t,e,n){const s=n?.model||"",r=n.environment.currentContext;let a="";if(n?.environment){const m=n.environment,v=[];m.currentNamespace&&v.push(`- Current namespace: ${m.currentNamespace}`),m.selectedResourceKind&&v.push(`- Currently viewing resource type: ${m.selectedResourceKind}`),m.selectedResourceName&&v.push(`- Currently selected resource: ${m.selectedResourceName}`),v.length>0&&(a=`

The user is currently viewing:
${v.join(`
`)}

Use this context to provide more relevant answers. When the user asks about resources without specifying a namespace, use the current namespace.`)}const o=n?.instructions||`You are a helpful Kubernetes assistant. You can help users understand and manage their Kubernetes clusters.
When users ask about resources, use the available tools to fetch real data from the cluster.
Provide clear, concise explanations and highlight any issues or warnings you find.
Format your responses using markdown for better readability.${a}`;let h=[...e,{role:Xa.User,content:t}],d=0;const g=10;for(;d<g;){d++;const m=await e$(s,o,h,t$,n?.onStream);if(!m.toolCalls||m.toolCalls.length===0)return{response:m,history:[...h,m]};h=[...h,m];for(const v of m.toolCalls){const y=JSON.parse(v.arguments);n?.onToolCall?.(v.name,y);const _=await s$(r,v);h.push({role:Xa.Tool,content:"",toolResult:_})}}return{response:{role:Xa.Assistant,content:"I apologize, but I encountered an issue processing your request. Please try again."},history:h}}function i$(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const a$=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,l$=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,o$={};function fA(t,e){return(o$.jsx?l$:a$).test(t)}const c$=/[ \t\n\f\r]/g;function u$(t){return typeof t=="object"?t.type==="text"?pA(t.value):!1:pA(t)}function pA(t){return t.replace(c$,"")===""}let xf=class{constructor(e,n,s){this.normal=n,this.property=e,s&&(this.space=s)}};xf.prototype.normal={};xf.prototype.property={};xf.prototype.space=void 0;function ZR(t,e){const n={},s={};for(const r of t)Object.assign(n,r.property),Object.assign(s,r.normal);return new xf(n,s,e)}function Hx(t){return t.toLowerCase()}class Vs{constructor(e,n){this.attribute=n,this.property=e}}Vs.prototype.attribute="";Vs.prototype.booleanish=!1;Vs.prototype.boolean=!1;Vs.prototype.commaOrSpaceSeparated=!1;Vs.prototype.commaSeparated=!1;Vs.prototype.defined=!1;Vs.prototype.mustUseProperty=!1;Vs.prototype.number=!1;Vs.prototype.overloadedBoolean=!1;Vs.prototype.property="";Vs.prototype.spaceSeparated=!1;Vs.prototype.space=void 0;let h$=0;const pt=wo(),wn=wo(),Ux=wo(),Ae=wo(),Wt=wo(),$c=wo(),rr=wo();function wo(){return 2**++h$}const Vx=Object.freeze(Object.defineProperty({__proto__:null,boolean:pt,booleanish:wn,commaOrSpaceSeparated:rr,commaSeparated:$c,number:Ae,overloadedBoolean:Ux,spaceSeparated:Wt},Symbol.toStringTag,{value:"Module"})),xb=Object.keys(Vx);class US extends Vs{constructor(e,n,s,r){let a=-1;if(super(e,n),mA(this,"space",r),typeof s=="number")for(;++a<xb.length;){const o=xb[a];mA(this,xb[a],(s&Vx[o])===Vx[o])}}}US.prototype.defined=!0;function mA(t,e,n){n&&(t[e]=n)}function pu(t){const e={},n={};for(const[s,r]of Object.entries(t.properties)){const a=new US(s,t.transform(t.attributes||{},s),r,t.space);t.mustUseProperty&&t.mustUseProperty.includes(s)&&(a.mustUseProperty=!0),e[s]=a,n[Hx(s)]=s,n[Hx(a.attribute)]=s}return new xf(e,n,t.space)}const eO=pu({properties:{ariaActiveDescendant:null,ariaAtomic:wn,ariaAutoComplete:null,ariaBusy:wn,ariaChecked:wn,ariaColCount:Ae,ariaColIndex:Ae,ariaColSpan:Ae,ariaControls:Wt,ariaCurrent:null,ariaDescribedBy:Wt,ariaDetails:null,ariaDisabled:wn,ariaDropEffect:Wt,ariaErrorMessage:null,ariaExpanded:wn,ariaFlowTo:Wt,ariaGrabbed:wn,ariaHasPopup:null,ariaHidden:wn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Wt,ariaLevel:Ae,ariaLive:null,ariaModal:wn,ariaMultiLine:wn,ariaMultiSelectable:wn,ariaOrientation:null,ariaOwns:Wt,ariaPlaceholder:null,ariaPosInSet:Ae,ariaPressed:wn,ariaReadOnly:wn,ariaRelevant:null,ariaRequired:wn,ariaRoleDescription:Wt,ariaRowCount:Ae,ariaRowIndex:Ae,ariaRowSpan:Ae,ariaSelected:wn,ariaSetSize:Ae,ariaSort:null,ariaValueMax:Ae,ariaValueMin:Ae,ariaValueNow:Ae,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function tO(t,e){return e in t?t[e]:e}function nO(t,e){return tO(t,e.toLowerCase())}const d$=pu({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:$c,acceptCharset:Wt,accessKey:Wt,action:null,allow:null,allowFullScreen:pt,allowPaymentRequest:pt,allowUserMedia:pt,alt:null,as:null,async:pt,autoCapitalize:null,autoComplete:Wt,autoFocus:pt,autoPlay:pt,blocking:Wt,capture:null,charSet:null,checked:pt,cite:null,className:Wt,cols:Ae,colSpan:null,content:null,contentEditable:wn,controls:pt,controlsList:Wt,coords:Ae|$c,crossOrigin:null,data:null,dateTime:null,decoding:null,default:pt,defer:pt,dir:null,dirName:null,disabled:pt,download:Ux,draggable:wn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:pt,formTarget:null,headers:Wt,height:Ae,hidden:Ux,high:Ae,href:null,hrefLang:null,htmlFor:Wt,httpEquiv:Wt,id:null,imageSizes:null,imageSrcSet:null,inert:pt,inputMode:null,integrity:null,is:null,isMap:pt,itemId:null,itemProp:Wt,itemRef:Wt,itemScope:pt,itemType:Wt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:pt,low:Ae,manifest:null,max:null,maxLength:Ae,media:null,method:null,min:null,minLength:Ae,multiple:pt,muted:pt,name:null,nonce:null,noModule:pt,noValidate:pt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:pt,optimum:Ae,pattern:null,ping:Wt,placeholder:null,playsInline:pt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:pt,referrerPolicy:null,rel:Wt,required:pt,reversed:pt,rows:Ae,rowSpan:Ae,sandbox:Wt,scope:null,scoped:pt,seamless:pt,selected:pt,shadowRootClonable:pt,shadowRootDelegatesFocus:pt,shadowRootMode:null,shape:null,size:Ae,sizes:null,slot:null,span:Ae,spellCheck:wn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ae,step:null,style:null,tabIndex:Ae,target:null,title:null,translate:null,type:null,typeMustMatch:pt,useMap:null,value:wn,width:Ae,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Wt,axis:null,background:null,bgColor:null,border:Ae,borderColor:null,bottomMargin:Ae,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:pt,declare:pt,event:null,face:null,frame:null,frameBorder:null,hSpace:Ae,leftMargin:Ae,link:null,longDesc:null,lowSrc:null,marginHeight:Ae,marginWidth:Ae,noResize:pt,noHref:pt,noShade:pt,noWrap:pt,object:null,profile:null,prompt:null,rev:null,rightMargin:Ae,rules:null,scheme:null,scrolling:wn,standby:null,summary:null,text:null,topMargin:Ae,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ae,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:pt,disableRemotePlayback:pt,prefix:null,property:null,results:Ae,security:null,unselectable:null},space:"html",transform:nO}),f$=pu({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:rr,accentHeight:Ae,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ae,amplitude:Ae,arabicForm:null,ascent:Ae,attributeName:null,attributeType:null,azimuth:Ae,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ae,by:null,calcMode:null,capHeight:Ae,className:Wt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ae,diffuseConstant:Ae,direction:null,display:null,dur:null,divisor:Ae,dominantBaseline:null,download:pt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ae,enableBackground:null,end:null,event:null,exponent:Ae,externalResourcesRequired:null,fill:null,fillOpacity:Ae,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:$c,g2:$c,glyphName:$c,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ae,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ae,horizOriginX:Ae,horizOriginY:Ae,id:null,ideographic:Ae,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ae,k:Ae,k1:Ae,k2:Ae,k3:Ae,k4:Ae,kernelMatrix:rr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ae,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ae,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ae,overlineThickness:Ae,paintOrder:null,panose1:null,path:null,pathLength:Ae,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Wt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ae,pointsAtY:Ae,pointsAtZ:Ae,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:rr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:rr,rev:rr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:rr,requiredFeatures:rr,requiredFonts:rr,requiredFormats:rr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ae,specularExponent:Ae,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ae,strikethroughThickness:Ae,string:null,stroke:null,strokeDashArray:rr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ae,strokeOpacity:Ae,strokeWidth:null,style:null,surfaceScale:Ae,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:rr,tabIndex:Ae,tableValues:null,target:null,targetX:Ae,targetY:Ae,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:rr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ae,underlineThickness:Ae,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ae,values:null,vAlphabetic:Ae,vMathematical:Ae,vectorEffect:null,vHanging:Ae,vIdeographic:Ae,version:null,vertAdvY:Ae,vertOriginX:Ae,vertOriginY:Ae,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ae,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:tO}),sO=pu({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),rO=pu({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:nO}),iO=pu({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),p$={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},m$=/[A-Z]/g,gA=/-[a-z]/g,g$=/^data[-\w.:]+$/i;function y$(t,e){const n=Hx(e);let s=e,r=Vs;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&g$.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(gA,b$);s="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!gA.test(a)){let o=a.replace(m$,v$);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}r=US}return new r(s,e)}function v$(t){return"-"+t.toLowerCase()}function b$(t){return t.charAt(1).toUpperCase()}const x$=ZR([eO,d$,sO,rO,iO],"html"),VS=ZR([eO,f$,sO,rO,iO],"svg");function _$(t){return t.join(" ").trim()}var yc={},_b,yA;function w$(){if(yA)return _b;yA=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,s=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,c=/^\s+|\s+$/g,h=`
`,d="/",g="*",m="",v="comment",y="declaration";function _(S,k){if(typeof S!="string")throw new TypeError("First argument must be a string");if(!S)return[];k=k||{};var C=1,E=1;function B(Q){var V=Q.match(e);V&&(C+=V.length);var M=Q.lastIndexOf(h);E=~M?Q.length-M:E+Q.length}function D(){var Q={line:C,column:E};return function(V){return V.position=new j(Q),X(),V}}function j(Q){this.start=Q,this.end={line:C,column:E},this.source=k.source}j.prototype.content=S;function P(Q){var V=new Error(k.source+":"+C+":"+E+": "+Q);if(V.reason=Q,V.filename=k.source,V.line=C,V.column=E,V.source=S,!k.silent)throw V}function U(Q){var V=Q.exec(S);if(V){var M=V[0];return B(M),S=S.slice(M.length),V}}function X(){U(n)}function $(Q){var V;for(Q=Q||[];V=Z();)V!==!1&&Q.push(V);return Q}function Z(){var Q=D();if(!(d!=S.charAt(0)||g!=S.charAt(1))){for(var V=2;m!=S.charAt(V)&&(g!=S.charAt(V)||d!=S.charAt(V+1));)++V;if(V+=2,m===S.charAt(V-1))return P("End of comment missing");var M=S.slice(2,V-2);return E+=2,B(M),S=S.slice(V),E+=2,Q({type:v,comment:M})}}function F(){var Q=D(),V=U(s);if(V){if(Z(),!U(r))return P("property missing ':'");var M=U(a),G=Q({type:y,property:w(V[0].replace(t,m)),value:M?w(M[0].replace(t,m)):m});return U(o),G}}function W(){var Q=[];$(Q);for(var V;V=F();)V!==!1&&(Q.push(V),$(Q));return Q}return X(),W()}function w(S){return S?S.replace(c,m):m}return _b=_,_b}var vA;function S$(){if(vA)return yc;vA=1;var t=yc&&yc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(yc,"__esModule",{value:!0}),yc.default=n;const e=t(w$());function n(s,r){let a=null;if(!s||typeof s!="string")return a;const o=(0,e.default)(s),c=typeof r=="function";return o.forEach(h=>{if(h.type!=="declaration")return;const{property:d,value:g}=h;c?r(d,g,h):g&&(a=a||{},a[d]=g)}),a}return yc}var Nh={},bA;function k$(){if(bA)return Nh;bA=1,Object.defineProperty(Nh,"__esModule",{value:!0}),Nh.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,s=/^-(webkit|moz|ms|o|khtml)-/,r=/^-(ms)-/,a=function(d){return!d||n.test(d)||t.test(d)},o=function(d,g){return g.toUpperCase()},c=function(d,g){return"".concat(g,"-")},h=function(d,g){return g===void 0&&(g={}),a(d)?d:(d=d.toLowerCase(),g.reactCompat?d=d.replace(r,c):d=d.replace(s,c),d.replace(e,o))};return Nh.camelCase=h,Nh}var Ah,xA;function C$(){if(xA)return Ah;xA=1;var t=Ah&&Ah.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},e=t(S$()),n=k$();function s(r,a){var o={};return!r||typeof r!="string"||(0,e.default)(r,function(c,h){c&&h&&(o[(0,n.camelCase)(c,a)]=h)}),o}return s.default=s,Ah=s,Ah}var N$=C$();const A$=lS(N$),aO=lO("end"),FS=lO("start");function lO(t){return e;function e(n){const s=n&&n.position&&n.position[t]||{};if(typeof s.line=="number"&&s.line>0&&typeof s.column=="number"&&s.column>0)return{line:s.line,column:s.column,offset:typeof s.offset=="number"&&s.offset>-1?s.offset:void 0}}}function E$(t){const e=FS(t),n=aO(t);if(e&&n)return{start:e,end:n}}function Ad(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?_A(t.position):"start"in t||"end"in t?_A(t):"line"in t||"column"in t?Fx(t):""}function Fx(t){return wA(t&&t.line)+":"+wA(t&&t.column)}function _A(t){return Fx(t&&t.start)+"-"+Fx(t&&t.end)}function wA(t){return t&&typeof t=="number"?t:1}class ps extends Error{constructor(e,n,s){super(),typeof n=="string"&&(s=n,n=void 0);let r="",a={},o=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof e=="string"?r=e:!a.cause&&e&&(o=!0,r=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof s=="string"){const h=s.indexOf(":");h===-1?a.ruleId=s:(a.source=s.slice(0,h),a.ruleId=s.slice(h+1))}if(!a.place&&a.ancestors&&a.ancestors){const h=a.ancestors[a.ancestors.length-1];h&&(a.place=h.position)}const c=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=c?c.line:void 0,this.name=Ad(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=o&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}ps.prototype.file="";ps.prototype.name="";ps.prototype.reason="";ps.prototype.message="";ps.prototype.stack="";ps.prototype.column=void 0;ps.prototype.line=void 0;ps.prototype.ancestors=void 0;ps.prototype.cause=void 0;ps.prototype.fatal=void 0;ps.prototype.place=void 0;ps.prototype.ruleId=void 0;ps.prototype.source=void 0;const qS={}.hasOwnProperty,j$=new Map,T$=/[A-Z]/g,R$=new Set(["table","tbody","thead","tfoot","tr"]),O$=new Set(["td","th"]),oO="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function B$(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let s;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");s=H$(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");s=$$(n,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:s,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?VS:x$,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},a=cO(r,t,void 0);return a&&typeof a!="string"?a:r.create(t,r.Fragment,{children:a||void 0},void 0)}function cO(t,e,n){if(e.type==="element")return M$(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return D$(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return I$(t,e,n);if(e.type==="mdxjsEsm")return L$(t,e);if(e.type==="root")return P$(t,e,n);if(e.type==="text")return z$(t,e)}function M$(t,e,n){const s=t.schema;let r=s;e.tagName.toLowerCase()==="svg"&&s.space==="html"&&(r=VS,t.schema=r),t.ancestors.push(e);const a=hO(t,e.tagName,!1),o=U$(t,e);let c=WS(t,e);return R$.has(e.tagName)&&(c=c.filter(function(h){return typeof h=="string"?!u$(h):!0})),uO(t,o,a,e),KS(o,c),t.ancestors.pop(),t.schema=s,t.create(e,a,o,n)}function D$(t,e){if(e.data&&e.data.estree&&t.evaluater){const s=e.data.estree.body[0];return s.type,t.evaluater.evaluateExpression(s.expression)}Kd(t,e.position)}function L$(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Kd(t,e.position)}function I$(t,e,n){const s=t.schema;let r=s;e.name==="svg"&&s.space==="html"&&(r=VS,t.schema=r),t.ancestors.push(e);const a=e.name===null?t.Fragment:hO(t,e.name,!0),o=V$(t,e),c=WS(t,e);return uO(t,o,a,e),KS(o,c),t.ancestors.pop(),t.schema=s,t.create(e,a,o,n)}function P$(t,e,n){const s={};return KS(s,WS(t,e)),t.create(e,t.Fragment,s,n)}function z$(t,e){return e.value}function uO(t,e,n,s){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=s)}function KS(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function $$(t,e,n){return s;function s(r,a,o,c){const d=Array.isArray(o.children)?n:e;return c?d(a,o,c):d(a,o)}}function H$(t,e){return n;function n(s,r,a,o){const c=Array.isArray(a.children),h=FS(s);return e(r,a,o,c,{columnNumber:h?h.column-1:void 0,fileName:t,lineNumber:h?h.line:void 0},void 0)}}function U$(t,e){const n={};let s,r;for(r in e.properties)if(r!=="children"&&qS.call(e.properties,r)){const a=F$(t,r,e.properties[r]);if(a){const[o,c]=a;t.tableCellAlignToStyle&&o==="align"&&typeof c=="string"&&O$.has(e.tagName)?s=c:n[o]=c}}if(s){const a=n.style||(n.style={});a[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=s}return n}function V$(t,e){const n={};for(const s of e.attributes)if(s.type==="mdxJsxExpressionAttribute")if(s.data&&s.data.estree&&t.evaluater){const a=s.data.estree.body[0];a.type;const o=a.expression;o.type;const c=o.properties[0];c.type,Object.assign(n,t.evaluater.evaluateExpression(c.argument))}else Kd(t,e.position);else{const r=s.name;let a;if(s.value&&typeof s.value=="object")if(s.value.data&&s.value.data.estree&&t.evaluater){const c=s.value.data.estree.body[0];c.type,a=t.evaluater.evaluateExpression(c.expression)}else Kd(t,e.position);else a=s.value===null?!0:s.value;n[r]=a}return n}function WS(t,e){const n=[];let s=-1;const r=t.passKeys?new Map:j$;for(;++s<e.children.length;){const a=e.children[s];let o;if(t.passKeys){const h=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(h){const d=r.get(h)||0;o=h+"-"+d,r.set(h,d+1)}}const c=cO(t,a,o);c!==void 0&&n.push(c)}return n}function F$(t,e,n){const s=y$(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=s.commaSeparated?i$(n):_$(n)),s.property==="style"){let r=typeof n=="object"?n:q$(t,String(n));return t.stylePropertyNameCase==="css"&&(r=K$(r)),["style",r]}return[t.elementAttributeNameCase==="react"&&s.space?p$[s.property]||s.property:s.attribute,n]}}function q$(t,e){try{return A$(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const s=n,r=new ps("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=t.filePath||void 0,r.url=oO+"#cannot-parse-style-attribute",r}}function hO(t,e,n){let s;if(!n)s={type:"Literal",value:e};else if(e.includes(".")){const r=e.split(".");let a=-1,o;for(;++a<r.length;){const c=fA(r[a])?{type:"Identifier",name:r[a]}:{type:"Literal",value:r[a]};o=o?{type:"MemberExpression",object:o,property:c,computed:!!(a&&c.type==="Literal"),optional:!1}:c}s=o}else s=fA(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(s.type==="Literal"){const r=s.value;return qS.call(t.components,r)?t.components[r]:r}if(t.evaluater)return t.evaluater.evaluateExpression(s);Kd(t)}function Kd(t,e){const n=new ps("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=oO+"#cannot-handle-mdx-estrees-without-createevaluater",n}function K$(t){const e={};let n;for(n in t)qS.call(t,n)&&(e[W$(n)]=t[n]);return e}function W$(t){let e=t.replace(T$,G$);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function G$(t){return"-"+t.toLowerCase()}const wb={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Y$={};function GS(t,e){const n=Y$,s=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,r=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return dO(t,s,r)}function dO(t,e,n){if(X$(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return SA(t.children,e,n)}return Array.isArray(t)?SA(t,e,n):""}function SA(t,e,n){const s=[];let r=-1;for(;++r<t.length;)s[r]=dO(t[r],e,n);return s.join("")}function X$(t){return!!(t&&typeof t=="object")}const kA=document.createElement("i");function YS(t){const e="&"+t+";";kA.innerHTML=e;const n=kA.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function ur(t,e,n,s){const r=t.length;let a=0,o;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,n=n>0?n:0,s.length<1e4)o=Array.from(s),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);a<s.length;)o=s.slice(a,a+1e4),o.unshift(e,0),t.splice(...o),a+=1e4,e+=1e4}function jr(t,e){return t.length>0?(ur(t,t.length,0,e),t):e}const CA={}.hasOwnProperty;function fO(t){const e={};let n=-1;for(;++n<t.length;)J$(e,t[n]);return e}function J$(t,e){let n;for(n in e){const r=(CA.call(t,n)?t[n]:void 0)||(t[n]={}),a=e[n];let o;if(a)for(o in a){CA.call(r,o)||(r[o]=[]);const c=a[o];Q$(r[o],Array.isArray(c)?c:c?[c]:[])}}}function Q$(t,e){let n=-1;const s=[];for(;++n<e.length;)(e[n].add==="after"?t:s).push(e[n]);ur(t,0,0,s)}function pO(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Gr(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const xs=pl(/[A-Za-z]/),hs=pl(/[\dA-Za-z]/),Z$=pl(/[#-'*+\--9=?A-Z^-~]/);function S0(t){return t!==null&&(t<32||t===127)}const qx=pl(/\d/),e9=pl(/[\dA-Fa-f]/),t9=pl(/[!-/:-@[-`{-~]/);function Ze(t){return t!==null&&t<-2}function Kt(t){return t!==null&&(t<0||t===32)}function _t(t){return t===-2||t===-1||t===32}const Mg=pl(new RegExp("\\p{P}|\\p{S}","u")),so=pl(/\s/);function pl(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function mu(t){const e=[];let n=-1,s=0,r=0;for(;++n<t.length;){const a=t.charCodeAt(n);let o="";if(a===37&&hs(t.charCodeAt(n+1))&&hs(t.charCodeAt(n+2)))r=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(o=String.fromCharCode(a));else if(a>55295&&a<57344){const c=t.charCodeAt(n+1);a<56320&&c>56319&&c<57344?(o=String.fromCharCode(a,c),r=1):o=""}else o=String.fromCharCode(a);o&&(e.push(t.slice(s,n),encodeURIComponent(o)),s=n+r+1,o=""),r&&(n+=r,r=0)}return e.join("")+t.slice(s)}function Nt(t,e,n,s){const r=s?s-1:Number.POSITIVE_INFINITY;let a=0;return o;function o(h){return _t(h)?(t.enter(n),c(h)):e(h)}function c(h){return _t(h)&&a++<r?(t.consume(h),c):(t.exit(n),e(h))}}const n9={tokenize:s9};function s9(t){const e=t.attempt(this.parser.constructs.contentInitial,s,r);let n;return e;function s(c){if(c===null){t.consume(c);return}return t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),Nt(t,e,"linePrefix")}function r(c){return t.enter("paragraph"),a(c)}function a(c){const h=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=h),n=h,o(c)}function o(c){if(c===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(c);return}return Ze(c)?(t.consume(c),t.exit("chunkText"),a):(t.consume(c),o)}}const r9={tokenize:i9},NA={tokenize:a9};function i9(t){const e=this,n=[];let s=0,r,a,o;return c;function c(E){if(s<n.length){const B=n[s];return e.containerState=B[1],t.attempt(B[0].continuation,h,d)(E)}return d(E)}function h(E){if(s++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&C();const B=e.events.length;let D=B,j;for(;D--;)if(e.events[D][0]==="exit"&&e.events[D][1].type==="chunkFlow"){j=e.events[D][1].end;break}k(s);let P=B;for(;P<e.events.length;)e.events[P][1].end={...j},P++;return ur(e.events,D+1,0,e.events.slice(B)),e.events.length=P,d(E)}return c(E)}function d(E){if(s===n.length){if(!r)return v(E);if(r.currentConstruct&&r.currentConstruct.concrete)return _(E);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(NA,g,m)(E)}function g(E){return r&&C(),k(s),v(E)}function m(E){return e.parser.lazy[e.now().line]=s!==n.length,o=e.now().offset,_(E)}function v(E){return e.containerState={},t.attempt(NA,y,_)(E)}function y(E){return s++,n.push([e.currentConstruct,e.containerState]),v(E)}function _(E){if(E===null){r&&C(),k(0),t.consume(E);return}return r=r||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:a}),w(E)}function w(E){if(E===null){S(t.exit("chunkFlow"),!0),k(0),t.consume(E);return}return Ze(E)?(t.consume(E),S(t.exit("chunkFlow")),s=0,e.interrupt=void 0,c):(t.consume(E),w)}function S(E,B){const D=e.sliceStream(E);if(B&&D.push(null),E.previous=a,a&&(a.next=E),a=E,r.defineSkip(E.start),r.write(D),e.parser.lazy[E.start.line]){let j=r.events.length;for(;j--;)if(r.events[j][1].start.offset<o&&(!r.events[j][1].end||r.events[j][1].end.offset>o))return;const P=e.events.length;let U=P,X,$;for(;U--;)if(e.events[U][0]==="exit"&&e.events[U][1].type==="chunkFlow"){if(X){$=e.events[U][1].end;break}X=!0}for(k(s),j=P;j<e.events.length;)e.events[j][1].end={...$},j++;ur(e.events,U+1,0,e.events.slice(P)),e.events.length=j}}function k(E){let B=n.length;for(;B-- >E;){const D=n[B];e.containerState=D[1],D[0].exit.call(e,t)}n.length=E}function C(){r.write([null]),a=void 0,r=void 0,e.containerState._closeFlow=void 0}}function a9(t,e,n){return Nt(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function qc(t){if(t===null||Kt(t)||so(t))return 1;if(Mg(t))return 2}function Dg(t,e,n){const s=[];let r=-1;for(;++r<t.length;){const a=t[r].resolveAll;a&&!s.includes(a)&&(e=a(e,n),s.push(a))}return e}const Kx={name:"attention",resolveAll:l9,tokenize:o9};function l9(t,e){let n=-1,s,r,a,o,c,h,d,g;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(s=n;s--;)if(t[s][0]==="exit"&&t[s][1].type==="attentionSequence"&&t[s][1]._open&&e.sliceSerialize(t[s][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[s][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[s][1].end.offset-t[s][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;h=t[s][1].end.offset-t[s][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const m={...t[s][1].end},v={...t[n][1].start};AA(m,-h),AA(v,h),o={type:h>1?"strongSequence":"emphasisSequence",start:m,end:{...t[s][1].end}},c={type:h>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:v},a={type:h>1?"strongText":"emphasisText",start:{...t[s][1].end},end:{...t[n][1].start}},r={type:h>1?"strong":"emphasis",start:{...o.start},end:{...c.end}},t[s][1].end={...o.start},t[n][1].start={...c.end},d=[],t[s][1].end.offset-t[s][1].start.offset&&(d=jr(d,[["enter",t[s][1],e],["exit",t[s][1],e]])),d=jr(d,[["enter",r,e],["enter",o,e],["exit",o,e],["enter",a,e]]),d=jr(d,Dg(e.parser.constructs.insideSpan.null,t.slice(s+1,n),e)),d=jr(d,[["exit",a,e],["enter",c,e],["exit",c,e],["exit",r,e]]),t[n][1].end.offset-t[n][1].start.offset?(g=2,d=jr(d,[["enter",t[n][1],e],["exit",t[n][1],e]])):g=0,ur(t,s-1,n-s+3,d),n=s+d.length-g-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function o9(t,e){const n=this.parser.constructs.attentionMarkers.null,s=this.previous,r=qc(s);let a;return o;function o(h){return a=h,t.enter("attentionSequence"),c(h)}function c(h){if(h===a)return t.consume(h),c;const d=t.exit("attentionSequence"),g=qc(h),m=!g||g===2&&r||n.includes(h),v=!r||r===2&&g||n.includes(s);return d._open=!!(a===42?m:m&&(r||!v)),d._close=!!(a===42?v:v&&(g||!m)),e(h)}}function AA(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const c9={name:"autolink",tokenize:u9};function u9(t,e,n){let s=0;return r;function r(y){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),a}function a(y){return xs(y)?(t.consume(y),o):y===64?n(y):d(y)}function o(y){return y===43||y===45||y===46||hs(y)?(s=1,c(y)):d(y)}function c(y){return y===58?(t.consume(y),s=0,h):(y===43||y===45||y===46||hs(y))&&s++<32?(t.consume(y),c):(s=0,d(y))}function h(y){return y===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),e):y===null||y===32||y===60||S0(y)?n(y):(t.consume(y),h)}function d(y){return y===64?(t.consume(y),g):Z$(y)?(t.consume(y),d):n(y)}function g(y){return hs(y)?m(y):n(y)}function m(y){return y===46?(t.consume(y),s=0,g):y===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),e):v(y)}function v(y){if((y===45||hs(y))&&s++<63){const _=y===45?v:m;return t.consume(y),_}return n(y)}}const _f={partial:!0,tokenize:h9};function h9(t,e,n){return s;function s(a){return _t(a)?Nt(t,r,"linePrefix")(a):r(a)}function r(a){return a===null||Ze(a)?e(a):n(a)}}const mO={continuation:{tokenize:f9},exit:p9,name:"blockQuote",tokenize:d9};function d9(t,e,n){const s=this;return r;function r(o){if(o===62){const c=s.containerState;return c.open||(t.enter("blockQuote",{_container:!0}),c.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),a}return n(o)}function a(o){return _t(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function f9(t,e,n){const s=this;return r;function r(o){return _t(o)?Nt(t,a,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):a(o)}function a(o){return t.attempt(mO,e,n)(o)}}function p9(t){t.exit("blockQuote")}const gO={name:"characterEscape",tokenize:m9};function m9(t,e,n){return s;function s(a){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(a),t.exit("escapeMarker"),r}function r(a){return t9(a)?(t.enter("characterEscapeValue"),t.consume(a),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(a)}}const yO={name:"characterReference",tokenize:g9};function g9(t,e,n){const s=this;let r=0,a,o;return c;function c(m){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(m),t.exit("characterReferenceMarker"),h}function h(m){return m===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(m),t.exit("characterReferenceMarkerNumeric"),d):(t.enter("characterReferenceValue"),a=31,o=hs,g(m))}function d(m){return m===88||m===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(m),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),a=6,o=e9,g):(t.enter("characterReferenceValue"),a=7,o=qx,g(m))}function g(m){if(m===59&&r){const v=t.exit("characterReferenceValue");return o===hs&&!YS(s.sliceSerialize(v))?n(m):(t.enter("characterReferenceMarker"),t.consume(m),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(m)&&r++<a?(t.consume(m),g):n(m)}}const EA={partial:!0,tokenize:v9},jA={concrete:!0,name:"codeFenced",tokenize:y9};function y9(t,e,n){const s=this,r={partial:!0,tokenize:D};let a=0,o=0,c;return h;function h(j){return d(j)}function d(j){const P=s.events[s.events.length-1];return a=P&&P[1].type==="linePrefix"?P[2].sliceSerialize(P[1],!0).length:0,c=j,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),g(j)}function g(j){return j===c?(o++,t.consume(j),g):o<3?n(j):(t.exit("codeFencedFenceSequence"),_t(j)?Nt(t,m,"whitespace")(j):m(j))}function m(j){return j===null||Ze(j)?(t.exit("codeFencedFence"),s.interrupt?e(j):t.check(EA,w,B)(j)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),v(j))}function v(j){return j===null||Ze(j)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),m(j)):_t(j)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Nt(t,y,"whitespace")(j)):j===96&&j===c?n(j):(t.consume(j),v)}function y(j){return j===null||Ze(j)?m(j):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),_(j))}function _(j){return j===null||Ze(j)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),m(j)):j===96&&j===c?n(j):(t.consume(j),_)}function w(j){return t.attempt(r,B,S)(j)}function S(j){return t.enter("lineEnding"),t.consume(j),t.exit("lineEnding"),k}function k(j){return a>0&&_t(j)?Nt(t,C,"linePrefix",a+1)(j):C(j)}function C(j){return j===null||Ze(j)?t.check(EA,w,B)(j):(t.enter("codeFlowValue"),E(j))}function E(j){return j===null||Ze(j)?(t.exit("codeFlowValue"),C(j)):(t.consume(j),E)}function B(j){return t.exit("codeFenced"),e(j)}function D(j,P,U){let X=0;return $;function $(V){return j.enter("lineEnding"),j.consume(V),j.exit("lineEnding"),Z}function Z(V){return j.enter("codeFencedFence"),_t(V)?Nt(j,F,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(V):F(V)}function F(V){return V===c?(j.enter("codeFencedFenceSequence"),W(V)):U(V)}function W(V){return V===c?(X++,j.consume(V),W):X>=o?(j.exit("codeFencedFenceSequence"),_t(V)?Nt(j,Q,"whitespace")(V):Q(V)):U(V)}function Q(V){return V===null||Ze(V)?(j.exit("codeFencedFence"),P(V)):U(V)}}}function v9(t,e,n){const s=this;return r;function r(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),a)}function a(o){return s.parser.lazy[s.now().line]?n(o):e(o)}}const Sb={name:"codeIndented",tokenize:x9},b9={partial:!0,tokenize:_9};function x9(t,e,n){const s=this;return r;function r(d){return t.enter("codeIndented"),Nt(t,a,"linePrefix",5)(d)}function a(d){const g=s.events[s.events.length-1];return g&&g[1].type==="linePrefix"&&g[2].sliceSerialize(g[1],!0).length>=4?o(d):n(d)}function o(d){return d===null?h(d):Ze(d)?t.attempt(b9,o,h)(d):(t.enter("codeFlowValue"),c(d))}function c(d){return d===null||Ze(d)?(t.exit("codeFlowValue"),o(d)):(t.consume(d),c)}function h(d){return t.exit("codeIndented"),e(d)}}function _9(t,e,n){const s=this;return r;function r(o){return s.parser.lazy[s.now().line]?n(o):Ze(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),r):Nt(t,a,"linePrefix",5)(o)}function a(o){const c=s.events[s.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(o):Ze(o)?r(o):n(o)}}const w9={name:"codeText",previous:k9,resolve:S9,tokenize:C9};function S9(t){let e=t.length-4,n=3,s,r;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(s=n;++s<e;)if(t[s][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(s=n-1,e++;++s<=e;)r===void 0?s!==e&&t[s][1].type!=="lineEnding"&&(r=s):(s===e||t[s][1].type==="lineEnding")&&(t[r][1].type="codeTextData",s!==r+2&&(t[r][1].end=t[s-1][1].end,t.splice(r+2,s-r-2),e-=s-r-2,s=r+2),r=void 0);return t}function k9(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function C9(t,e,n){let s=0,r,a;return o;function o(m){return t.enter("codeText"),t.enter("codeTextSequence"),c(m)}function c(m){return m===96?(t.consume(m),s++,c):(t.exit("codeTextSequence"),h(m))}function h(m){return m===null?n(m):m===32?(t.enter("space"),t.consume(m),t.exit("space"),h):m===96?(a=t.enter("codeTextSequence"),r=0,g(m)):Ze(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),h):(t.enter("codeTextData"),d(m))}function d(m){return m===null||m===32||m===96||Ze(m)?(t.exit("codeTextData"),h(m)):(t.consume(m),d)}function g(m){return m===96?(t.consume(m),r++,g):r===s?(t.exit("codeTextSequence"),t.exit("codeText"),e(m)):(a.type="codeTextData",d(m))}}class N9{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const s=n??Number.POSITIVE_INFINITY;return s<this.left.length?this.left.slice(e,s):e>this.left.length?this.right.slice(this.right.length-s+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-s+this.left.length).reverse())}splice(e,n,s){const r=n||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return s&&Eh(this.left,s),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Eh(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Eh(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Eh(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Eh(this.left,n.reverse())}}}function Eh(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function vO(t){const e={};let n=-1,s,r,a,o,c,h,d;const g=new N9(t);for(;++n<g.length;){for(;n in e;)n=e[n];if(s=g.get(n),n&&s[1].type==="chunkFlow"&&g.get(n-1)[1].type==="listItemPrefix"&&(h=s[1]._tokenizer.events,a=0,a<h.length&&h[a][1].type==="lineEndingBlank"&&(a+=2),a<h.length&&h[a][1].type==="content"))for(;++a<h.length&&h[a][1].type!=="content";)h[a][1].type==="chunkText"&&(h[a][1]._isInFirstContentOfListItem=!0,a++);if(s[0]==="enter")s[1].contentType&&(Object.assign(e,A9(g,n)),n=e[n],d=!0);else if(s[1]._container){for(a=n,r=void 0;a--;)if(o=g.get(a),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(r&&(g.get(r)[1].type="lineEndingBlank"),o[1].type="lineEnding",r=a);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;r&&(s[1].end={...g.get(r)[1].start},c=g.slice(r,n),c.unshift(s),g.splice(r,n-r+1,c))}}return ur(t,0,Number.POSITIVE_INFINITY,g.slice(0)),!d}function A9(t,e){const n=t.get(e)[1],s=t.get(e)[2];let r=e-1;const a=[];let o=n._tokenizer;o||(o=s.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const c=o.events,h=[],d={};let g,m,v=-1,y=n,_=0,w=0;const S=[w];for(;y;){for(;t.get(++r)[1]!==y;);a.push(r),y._tokenizer||(g=s.sliceStream(y),y.next||g.push(null),m&&o.defineSkip(y.start),y._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(g),y._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),m=y,y=y.next}for(y=n;++v<c.length;)c[v][0]==="exit"&&c[v-1][0]==="enter"&&c[v][1].type===c[v-1][1].type&&c[v][1].start.line!==c[v][1].end.line&&(w=v+1,S.push(w),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(o.events=[],y?(y._tokenizer=void 0,y.previous=void 0):S.pop(),v=S.length;v--;){const k=c.slice(S[v],S[v+1]),C=a.pop();h.push([C,C+k.length-1]),t.splice(C,2,k)}for(h.reverse(),v=-1;++v<h.length;)d[_+h[v][0]]=_+h[v][1],_+=h[v][1]-h[v][0]-1;return d}const E9={resolve:T9,tokenize:R9},j9={partial:!0,tokenize:O9};function T9(t){return vO(t),t}function R9(t,e){let n;return s;function s(c){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),r(c)}function r(c){return c===null?a(c):Ze(c)?t.check(j9,o,a)(c):(t.consume(c),r)}function a(c){return t.exit("chunkContent"),t.exit("content"),e(c)}function o(c){return t.consume(c),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}function O9(t,e,n){const s=this;return r;function r(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Nt(t,a,"linePrefix")}function a(o){if(o===null||Ze(o))return n(o);const c=s.events[s.events.length-1];return!s.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(o):t.interrupt(s.parser.constructs.flow,n,e)(o)}}function bO(t,e,n,s,r,a,o,c,h){const d=h||Number.POSITIVE_INFINITY;let g=0;return m;function m(k){return k===60?(t.enter(s),t.enter(r),t.enter(a),t.consume(k),t.exit(a),v):k===null||k===32||k===41||S0(k)?n(k):(t.enter(s),t.enter(o),t.enter(c),t.enter("chunkString",{contentType:"string"}),w(k))}function v(k){return k===62?(t.enter(a),t.consume(k),t.exit(a),t.exit(r),t.exit(s),e):(t.enter(c),t.enter("chunkString",{contentType:"string"}),y(k))}function y(k){return k===62?(t.exit("chunkString"),t.exit(c),v(k)):k===null||k===60||Ze(k)?n(k):(t.consume(k),k===92?_:y)}function _(k){return k===60||k===62||k===92?(t.consume(k),y):y(k)}function w(k){return!g&&(k===null||k===41||Kt(k))?(t.exit("chunkString"),t.exit(c),t.exit(o),t.exit(s),e(k)):g<d&&k===40?(t.consume(k),g++,w):k===41?(t.consume(k),g--,w):k===null||k===32||k===40||S0(k)?n(k):(t.consume(k),k===92?S:w)}function S(k){return k===40||k===41||k===92?(t.consume(k),w):w(k)}}function xO(t,e,n,s,r,a){const o=this;let c=0,h;return d;function d(y){return t.enter(s),t.enter(r),t.consume(y),t.exit(r),t.enter(a),g}function g(y){return c>999||y===null||y===91||y===93&&!h||y===94&&!c&&"_hiddenFootnoteSupport"in o.parser.constructs?n(y):y===93?(t.exit(a),t.enter(r),t.consume(y),t.exit(r),t.exit(s),e):Ze(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),g):(t.enter("chunkString",{contentType:"string"}),m(y))}function m(y){return y===null||y===91||y===93||Ze(y)||c++>999?(t.exit("chunkString"),g(y)):(t.consume(y),h||(h=!_t(y)),y===92?v:m)}function v(y){return y===91||y===92||y===93?(t.consume(y),c++,m):m(y)}}function _O(t,e,n,s,r,a){let o;return c;function c(v){return v===34||v===39||v===40?(t.enter(s),t.enter(r),t.consume(v),t.exit(r),o=v===40?41:v,h):n(v)}function h(v){return v===o?(t.enter(r),t.consume(v),t.exit(r),t.exit(s),e):(t.enter(a),d(v))}function d(v){return v===o?(t.exit(a),h(o)):v===null?n(v):Ze(v)?(t.enter("lineEnding"),t.consume(v),t.exit("lineEnding"),Nt(t,d,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),g(v))}function g(v){return v===o||v===null||Ze(v)?(t.exit("chunkString"),d(v)):(t.consume(v),v===92?m:g)}function m(v){return v===o||v===92?(t.consume(v),g):g(v)}}function Ed(t,e){let n;return s;function s(r){return Ze(r)?(t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),n=!0,s):_t(r)?Nt(t,s,n?"linePrefix":"lineSuffix")(r):e(r)}}const B9={name:"definition",tokenize:D9},M9={partial:!0,tokenize:L9};function D9(t,e,n){const s=this;let r;return a;function a(y){return t.enter("definition"),o(y)}function o(y){return xO.call(s,t,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function c(y){return r=Gr(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)),y===58?(t.enter("definitionMarker"),t.consume(y),t.exit("definitionMarker"),h):n(y)}function h(y){return Kt(y)?Ed(t,d)(y):d(y)}function d(y){return bO(t,g,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function g(y){return t.attempt(M9,m,m)(y)}function m(y){return _t(y)?Nt(t,v,"whitespace")(y):v(y)}function v(y){return y===null||Ze(y)?(t.exit("definition"),s.parser.defined.push(r),e(y)):n(y)}}function L9(t,e,n){return s;function s(c){return Kt(c)?Ed(t,r)(c):n(c)}function r(c){return _O(t,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function a(c){return _t(c)?Nt(t,o,"whitespace")(c):o(c)}function o(c){return c===null||Ze(c)?e(c):n(c)}}const I9={name:"hardBreakEscape",tokenize:P9};function P9(t,e,n){return s;function s(a){return t.enter("hardBreakEscape"),t.consume(a),r}function r(a){return Ze(a)?(t.exit("hardBreakEscape"),e(a)):n(a)}}const z9={name:"headingAtx",resolve:$9,tokenize:H9};function $9(t,e){let n=t.length-2,s=3,r,a;return t[s][1].type==="whitespace"&&(s+=2),n-2>s&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(s===n-1||n-4>s&&t[n-2][1].type==="whitespace")&&(n-=s+1===n?2:4),n>s&&(r={type:"atxHeadingText",start:t[s][1].start,end:t[n][1].end},a={type:"chunkText",start:t[s][1].start,end:t[n][1].end,contentType:"text"},ur(t,s,n-s+1,[["enter",r,e],["enter",a,e],["exit",a,e],["exit",r,e]])),t}function H9(t,e,n){let s=0;return r;function r(g){return t.enter("atxHeading"),a(g)}function a(g){return t.enter("atxHeadingSequence"),o(g)}function o(g){return g===35&&s++<6?(t.consume(g),o):g===null||Kt(g)?(t.exit("atxHeadingSequence"),c(g)):n(g)}function c(g){return g===35?(t.enter("atxHeadingSequence"),h(g)):g===null||Ze(g)?(t.exit("atxHeading"),e(g)):_t(g)?Nt(t,c,"whitespace")(g):(t.enter("atxHeadingText"),d(g))}function h(g){return g===35?(t.consume(g),h):(t.exit("atxHeadingSequence"),c(g))}function d(g){return g===null||g===35||Kt(g)?(t.exit("atxHeadingText"),c(g)):(t.consume(g),d)}}const U9=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],TA=["pre","script","style","textarea"],V9={concrete:!0,name:"htmlFlow",resolveTo:K9,tokenize:W9},F9={partial:!0,tokenize:Y9},q9={partial:!0,tokenize:G9};function K9(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function W9(t,e,n){const s=this;let r,a,o,c,h;return d;function d(N){return g(N)}function g(N){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(N),m}function m(N){return N===33?(t.consume(N),v):N===47?(t.consume(N),a=!0,w):N===63?(t.consume(N),r=3,s.interrupt?e:O):xs(N)?(t.consume(N),o=String.fromCharCode(N),S):n(N)}function v(N){return N===45?(t.consume(N),r=2,y):N===91?(t.consume(N),r=5,c=0,_):xs(N)?(t.consume(N),r=4,s.interrupt?e:O):n(N)}function y(N){return N===45?(t.consume(N),s.interrupt?e:O):n(N)}function _(N){const Y="CDATA[";return N===Y.charCodeAt(c++)?(t.consume(N),c===Y.length?s.interrupt?e:F:_):n(N)}function w(N){return xs(N)?(t.consume(N),o=String.fromCharCode(N),S):n(N)}function S(N){if(N===null||N===47||N===62||Kt(N)){const Y=N===47,oe=o.toLowerCase();return!Y&&!a&&TA.includes(oe)?(r=1,s.interrupt?e(N):F(N)):U9.includes(o.toLowerCase())?(r=6,Y?(t.consume(N),k):s.interrupt?e(N):F(N)):(r=7,s.interrupt&&!s.parser.lazy[s.now().line]?n(N):a?C(N):E(N))}return N===45||hs(N)?(t.consume(N),o+=String.fromCharCode(N),S):n(N)}function k(N){return N===62?(t.consume(N),s.interrupt?e:F):n(N)}function C(N){return _t(N)?(t.consume(N),C):$(N)}function E(N){return N===47?(t.consume(N),$):N===58||N===95||xs(N)?(t.consume(N),B):_t(N)?(t.consume(N),E):$(N)}function B(N){return N===45||N===46||N===58||N===95||hs(N)?(t.consume(N),B):D(N)}function D(N){return N===61?(t.consume(N),j):_t(N)?(t.consume(N),D):E(N)}function j(N){return N===null||N===60||N===61||N===62||N===96?n(N):N===34||N===39?(t.consume(N),h=N,P):_t(N)?(t.consume(N),j):U(N)}function P(N){return N===h?(t.consume(N),h=null,X):N===null||Ze(N)?n(N):(t.consume(N),P)}function U(N){return N===null||N===34||N===39||N===47||N===60||N===61||N===62||N===96||Kt(N)?D(N):(t.consume(N),U)}function X(N){return N===47||N===62||_t(N)?E(N):n(N)}function $(N){return N===62?(t.consume(N),Z):n(N)}function Z(N){return N===null||Ze(N)?F(N):_t(N)?(t.consume(N),Z):n(N)}function F(N){return N===45&&r===2?(t.consume(N),M):N===60&&r===1?(t.consume(N),G):N===62&&r===4?(t.consume(N),T):N===63&&r===3?(t.consume(N),O):N===93&&r===5?(t.consume(N),z):Ze(N)&&(r===6||r===7)?(t.exit("htmlFlowData"),t.check(F9,H,W)(N)):N===null||Ze(N)?(t.exit("htmlFlowData"),W(N)):(t.consume(N),F)}function W(N){return t.check(q9,Q,H)(N)}function Q(N){return t.enter("lineEnding"),t.consume(N),t.exit("lineEnding"),V}function V(N){return N===null||Ze(N)?W(N):(t.enter("htmlFlowData"),F(N))}function M(N){return N===45?(t.consume(N),O):F(N)}function G(N){return N===47?(t.consume(N),o="",q):F(N)}function q(N){if(N===62){const Y=o.toLowerCase();return TA.includes(Y)?(t.consume(N),T):F(N)}return xs(N)&&o.length<8?(t.consume(N),o+=String.fromCharCode(N),q):F(N)}function z(N){return N===93?(t.consume(N),O):F(N)}function O(N){return N===62?(t.consume(N),T):N===45&&r===2?(t.consume(N),O):F(N)}function T(N){return N===null||Ze(N)?(t.exit("htmlFlowData"),H(N)):(t.consume(N),T)}function H(N){return t.exit("htmlFlow"),e(N)}}function G9(t,e,n){const s=this;return r;function r(o){return Ze(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),a):n(o)}function a(o){return s.parser.lazy[s.now().line]?n(o):e(o)}}function Y9(t,e,n){return s;function s(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),t.attempt(_f,e,n)}}const X9={name:"htmlText",tokenize:J9};function J9(t,e,n){const s=this;let r,a,o;return c;function c(O){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(O),h}function h(O){return O===33?(t.consume(O),d):O===47?(t.consume(O),D):O===63?(t.consume(O),E):xs(O)?(t.consume(O),U):n(O)}function d(O){return O===45?(t.consume(O),g):O===91?(t.consume(O),a=0,_):xs(O)?(t.consume(O),C):n(O)}function g(O){return O===45?(t.consume(O),y):n(O)}function m(O){return O===null?n(O):O===45?(t.consume(O),v):Ze(O)?(o=m,G(O)):(t.consume(O),m)}function v(O){return O===45?(t.consume(O),y):m(O)}function y(O){return O===62?M(O):O===45?v(O):m(O)}function _(O){const T="CDATA[";return O===T.charCodeAt(a++)?(t.consume(O),a===T.length?w:_):n(O)}function w(O){return O===null?n(O):O===93?(t.consume(O),S):Ze(O)?(o=w,G(O)):(t.consume(O),w)}function S(O){return O===93?(t.consume(O),k):w(O)}function k(O){return O===62?M(O):O===93?(t.consume(O),k):w(O)}function C(O){return O===null||O===62?M(O):Ze(O)?(o=C,G(O)):(t.consume(O),C)}function E(O){return O===null?n(O):O===63?(t.consume(O),B):Ze(O)?(o=E,G(O)):(t.consume(O),E)}function B(O){return O===62?M(O):E(O)}function D(O){return xs(O)?(t.consume(O),j):n(O)}function j(O){return O===45||hs(O)?(t.consume(O),j):P(O)}function P(O){return Ze(O)?(o=P,G(O)):_t(O)?(t.consume(O),P):M(O)}function U(O){return O===45||hs(O)?(t.consume(O),U):O===47||O===62||Kt(O)?X(O):n(O)}function X(O){return O===47?(t.consume(O),M):O===58||O===95||xs(O)?(t.consume(O),$):Ze(O)?(o=X,G(O)):_t(O)?(t.consume(O),X):M(O)}function $(O){return O===45||O===46||O===58||O===95||hs(O)?(t.consume(O),$):Z(O)}function Z(O){return O===61?(t.consume(O),F):Ze(O)?(o=Z,G(O)):_t(O)?(t.consume(O),Z):X(O)}function F(O){return O===null||O===60||O===61||O===62||O===96?n(O):O===34||O===39?(t.consume(O),r=O,W):Ze(O)?(o=F,G(O)):_t(O)?(t.consume(O),F):(t.consume(O),Q)}function W(O){return O===r?(t.consume(O),r=void 0,V):O===null?n(O):Ze(O)?(o=W,G(O)):(t.consume(O),W)}function Q(O){return O===null||O===34||O===39||O===60||O===61||O===96?n(O):O===47||O===62||Kt(O)?X(O):(t.consume(O),Q)}function V(O){return O===47||O===62||Kt(O)?X(O):n(O)}function M(O){return O===62?(t.consume(O),t.exit("htmlTextData"),t.exit("htmlText"),e):n(O)}function G(O){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(O),t.exit("lineEnding"),q}function q(O){return _t(O)?Nt(t,z,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(O):z(O)}function z(O){return t.enter("htmlTextData"),o(O)}}const XS={name:"labelEnd",resolveAll:tH,resolveTo:nH,tokenize:sH},Q9={tokenize:rH},Z9={tokenize:iH},eH={tokenize:aH};function tH(t){let e=-1;const n=[];for(;++e<t.length;){const s=t[e][1];if(n.push(t[e]),s.type==="labelImage"||s.type==="labelLink"||s.type==="labelEnd"){const r=s.type==="labelImage"?4:2;s.type="data",e+=r}}return t.length!==n.length&&ur(t,0,t.length,n),t}function nH(t,e){let n=t.length,s=0,r,a,o,c;for(;n--;)if(r=t[n][1],a){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;t[n][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(a=n,r.type!=="labelLink")){s=2;break}}else r.type==="labelEnd"&&(o=n);const h={type:t[a][1].type==="labelLink"?"link":"image",start:{...t[a][1].start},end:{...t[t.length-1][1].end}},d={type:"label",start:{...t[a][1].start},end:{...t[o][1].end}},g={type:"labelText",start:{...t[a+s+2][1].end},end:{...t[o-2][1].start}};return c=[["enter",h,e],["enter",d,e]],c=jr(c,t.slice(a+1,a+s+3)),c=jr(c,[["enter",g,e]]),c=jr(c,Dg(e.parser.constructs.insideSpan.null,t.slice(a+s+4,o-3),e)),c=jr(c,[["exit",g,e],t[o-2],t[o-1],["exit",d,e]]),c=jr(c,t.slice(o+1)),c=jr(c,[["exit",h,e]]),ur(t,a,t.length,c),t}function sH(t,e,n){const s=this;let r=s.events.length,a,o;for(;r--;)if((s.events[r][1].type==="labelImage"||s.events[r][1].type==="labelLink")&&!s.events[r][1]._balanced){a=s.events[r][1];break}return c;function c(v){return a?a._inactive?m(v):(o=s.parser.defined.includes(Gr(s.sliceSerialize({start:a.end,end:s.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(v),t.exit("labelMarker"),t.exit("labelEnd"),h):n(v)}function h(v){return v===40?t.attempt(Q9,g,o?g:m)(v):v===91?t.attempt(Z9,g,o?d:m)(v):o?g(v):m(v)}function d(v){return t.attempt(eH,g,m)(v)}function g(v){return e(v)}function m(v){return a._balanced=!0,n(v)}}function rH(t,e,n){return s;function s(m){return t.enter("resource"),t.enter("resourceMarker"),t.consume(m),t.exit("resourceMarker"),r}function r(m){return Kt(m)?Ed(t,a)(m):a(m)}function a(m){return m===41?g(m):bO(t,o,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(m)}function o(m){return Kt(m)?Ed(t,h)(m):g(m)}function c(m){return n(m)}function h(m){return m===34||m===39||m===40?_O(t,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(m):g(m)}function d(m){return Kt(m)?Ed(t,g)(m):g(m)}function g(m){return m===41?(t.enter("resourceMarker"),t.consume(m),t.exit("resourceMarker"),t.exit("resource"),e):n(m)}}function iH(t,e,n){const s=this;return r;function r(c){return xO.call(s,t,a,o,"reference","referenceMarker","referenceString")(c)}function a(c){return s.parser.defined.includes(Gr(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)))?e(c):n(c)}function o(c){return n(c)}}function aH(t,e,n){return s;function s(a){return t.enter("reference"),t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),r}function r(a){return a===93?(t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),t.exit("reference"),e):n(a)}}const lH={name:"labelStartImage",resolveAll:XS.resolveAll,tokenize:oH};function oH(t,e,n){const s=this;return r;function r(c){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(c),t.exit("labelImageMarker"),a}function a(c){return c===91?(t.enter("labelMarker"),t.consume(c),t.exit("labelMarker"),t.exit("labelImage"),o):n(c)}function o(c){return c===94&&"_hiddenFootnoteSupport"in s.parser.constructs?n(c):e(c)}}const cH={name:"labelStartLink",resolveAll:XS.resolveAll,tokenize:uH};function uH(t,e,n){const s=this;return r;function r(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),a}function a(o){return o===94&&"_hiddenFootnoteSupport"in s.parser.constructs?n(o):e(o)}}const kb={name:"lineEnding",tokenize:hH};function hH(t,e){return n;function n(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),Nt(t,e,"linePrefix")}}const Wm={name:"thematicBreak",tokenize:dH};function dH(t,e,n){let s=0,r;return a;function a(d){return t.enter("thematicBreak"),o(d)}function o(d){return r=d,c(d)}function c(d){return d===r?(t.enter("thematicBreakSequence"),h(d)):s>=3&&(d===null||Ze(d))?(t.exit("thematicBreak"),e(d)):n(d)}function h(d){return d===r?(t.consume(d),s++,h):(t.exit("thematicBreakSequence"),_t(d)?Nt(t,c,"whitespace")(d):c(d))}}const Ps={continuation:{tokenize:gH},exit:vH,name:"list",tokenize:mH},fH={partial:!0,tokenize:bH},pH={partial:!0,tokenize:yH};function mH(t,e,n){const s=this,r=s.events[s.events.length-1];let a=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,o=0;return c;function c(y){const _=s.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(_==="listUnordered"?!s.containerState.marker||y===s.containerState.marker:qx(y)){if(s.containerState.type||(s.containerState.type=_,t.enter(_,{_container:!0})),_==="listUnordered")return t.enter("listItemPrefix"),y===42||y===45?t.check(Wm,n,d)(y):d(y);if(!s.interrupt||y===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),h(y)}return n(y)}function h(y){return qx(y)&&++o<10?(t.consume(y),h):(!s.interrupt||o<2)&&(s.containerState.marker?y===s.containerState.marker:y===41||y===46)?(t.exit("listItemValue"),d(y)):n(y)}function d(y){return t.enter("listItemMarker"),t.consume(y),t.exit("listItemMarker"),s.containerState.marker=s.containerState.marker||y,t.check(_f,s.interrupt?n:g,t.attempt(fH,v,m))}function g(y){return s.containerState.initialBlankLine=!0,a++,v(y)}function m(y){return _t(y)?(t.enter("listItemPrefixWhitespace"),t.consume(y),t.exit("listItemPrefixWhitespace"),v):n(y)}function v(y){return s.containerState.size=a+s.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(y)}}function gH(t,e,n){const s=this;return s.containerState._closeFlow=void 0,t.check(_f,r,a);function r(c){return s.containerState.furtherBlankLines=s.containerState.furtherBlankLines||s.containerState.initialBlankLine,Nt(t,e,"listItemIndent",s.containerState.size+1)(c)}function a(c){return s.containerState.furtherBlankLines||!_t(c)?(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,o(c)):(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,t.attempt(pH,e,o)(c))}function o(c){return s.containerState._closeFlow=!0,s.interrupt=void 0,Nt(t,t.attempt(Ps,e,n),"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function yH(t,e,n){const s=this;return Nt(t,r,"listItemIndent",s.containerState.size+1);function r(a){const o=s.events[s.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===s.containerState.size?e(a):n(a)}}function vH(t){t.exit(this.containerState.type)}function bH(t,e,n){const s=this;return Nt(t,r,"listItemPrefixWhitespace",s.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(a){const o=s.events[s.events.length-1];return!_t(a)&&o&&o[1].type==="listItemPrefixWhitespace"?e(a):n(a)}}const RA={name:"setextUnderline",resolveTo:xH,tokenize:_H};function xH(t,e){let n=t.length,s,r,a;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){s=n;break}t[n][1].type==="paragraph"&&(r=n)}else t[n][1].type==="content"&&t.splice(n,1),!a&&t[n][1].type==="definition"&&(a=n);const o={type:"setextHeading",start:{...t[s][1].start},end:{...t[t.length-1][1].end}};return t[r][1].type="setextHeadingText",a?(t.splice(r,0,["enter",o,e]),t.splice(a+1,0,["exit",t[s][1],e]),t[s][1].end={...t[a][1].end}):t[s][1]=o,t.push(["exit",o,e]),t}function _H(t,e,n){const s=this;let r;return a;function a(d){let g=s.events.length,m;for(;g--;)if(s.events[g][1].type!=="lineEnding"&&s.events[g][1].type!=="linePrefix"&&s.events[g][1].type!=="content"){m=s.events[g][1].type==="paragraph";break}return!s.parser.lazy[s.now().line]&&(s.interrupt||m)?(t.enter("setextHeadingLine"),r=d,o(d)):n(d)}function o(d){return t.enter("setextHeadingLineSequence"),c(d)}function c(d){return d===r?(t.consume(d),c):(t.exit("setextHeadingLineSequence"),_t(d)?Nt(t,h,"lineSuffix")(d):h(d))}function h(d){return d===null||Ze(d)?(t.exit("setextHeadingLine"),e(d)):n(d)}}const wH={tokenize:SH};function SH(t){const e=this,n=t.attempt(_f,s,t.attempt(this.parser.constructs.flowInitial,r,Nt(t,t.attempt(this.parser.constructs.flow,r,t.attempt(E9,r)),"linePrefix")));return n;function s(a){if(a===null){t.consume(a);return}return t.enter("lineEndingBlank"),t.consume(a),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const kH={resolveAll:SO()},CH=wO("string"),NH=wO("text");function wO(t){return{resolveAll:SO(t==="text"?AH:void 0),tokenize:e};function e(n){const s=this,r=this.parser.constructs[t],a=n.attempt(r,o,c);return o;function o(g){return d(g)?a(g):c(g)}function c(g){if(g===null){n.consume(g);return}return n.enter("data"),n.consume(g),h}function h(g){return d(g)?(n.exit("data"),a(g)):(n.consume(g),h)}function d(g){if(g===null)return!0;const m=r[g];let v=-1;if(m)for(;++v<m.length;){const y=m[v];if(!y.previous||y.previous.call(s,s.previous))return!0}return!1}}}function SO(t){return e;function e(n,s){let r=-1,a;for(;++r<=n.length;)a===void 0?n[r]&&n[r][1].type==="data"&&(a=r,r++):(!n[r]||n[r][1].type!=="data")&&(r!==a+2&&(n[a][1].end=n[r-1][1].end,n.splice(a+2,r-a-2),r=a+2),a=void 0);return t?t(n,s):n}}function AH(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const s=t[n-1][1],r=e.sliceStream(s);let a=r.length,o=-1,c=0,h;for(;a--;){const d=r[a];if(typeof d=="string"){for(o=d.length;d.charCodeAt(o-1)===32;)c++,o--;if(o)break;o=-1}else if(d===-2)h=!0,c++;else if(d!==-1){a++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(c=0),c){const d={type:n===t.length||h||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?o:s.start._bufferIndex+o,_index:s.start._index+a,line:s.end.line,column:s.end.column-c,offset:s.end.offset-c},end:{...s.end}};s.end={...d.start},s.start.offset===s.end.offset?Object.assign(s,d):(t.splice(n,0,["enter",d,e],["exit",d,e]),n+=2)}n++}return t}const EH={42:Ps,43:Ps,45:Ps,48:Ps,49:Ps,50:Ps,51:Ps,52:Ps,53:Ps,54:Ps,55:Ps,56:Ps,57:Ps,62:mO},jH={91:B9},TH={[-2]:Sb,[-1]:Sb,32:Sb},RH={35:z9,42:Wm,45:[RA,Wm],60:V9,61:RA,95:Wm,96:jA,126:jA},OH={38:yO,92:gO},BH={[-5]:kb,[-4]:kb,[-3]:kb,33:lH,38:yO,42:Kx,60:[c9,X9],91:cH,92:[I9,gO],93:XS,95:Kx,96:w9},MH={null:[Kx,kH]},DH={null:[42,95]},LH={null:[]},IH=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:DH,contentInitial:jH,disable:LH,document:EH,flow:RH,flowInitial:TH,insideSpan:MH,string:OH,text:BH},Symbol.toStringTag,{value:"Module"}));function PH(t,e,n){let s={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const r={},a=[];let o=[],c=[];const h={attempt:P(D),check:P(j),consume:C,enter:E,exit:B,interrupt:P(j,{interrupt:!0})},d={code:null,containerState:{},defineSkip:w,events:[],now:_,parser:t,previous:null,sliceSerialize:v,sliceStream:y,write:m};let g=e.tokenize.call(d,h);return e.resolveAll&&a.push(e),d;function m(Z){return o=jr(o,Z),S(),o[o.length-1]!==null?[]:(U(e,0),d.events=Dg(a,d.events,d),d.events)}function v(Z,F){return $H(y(Z),F)}function y(Z){return zH(o,Z)}function _(){const{_bufferIndex:Z,_index:F,line:W,column:Q,offset:V}=s;return{_bufferIndex:Z,_index:F,line:W,column:Q,offset:V}}function w(Z){r[Z.line]=Z.column,$()}function S(){let Z;for(;s._index<o.length;){const F=o[s._index];if(typeof F=="string")for(Z=s._index,s._bufferIndex<0&&(s._bufferIndex=0);s._index===Z&&s._bufferIndex<F.length;)k(F.charCodeAt(s._bufferIndex));else k(F)}}function k(Z){g=g(Z)}function C(Z){Ze(Z)?(s.line++,s.column=1,s.offset+=Z===-3?2:1,$()):Z!==-1&&(s.column++,s.offset++),s._bufferIndex<0?s._index++:(s._bufferIndex++,s._bufferIndex===o[s._index].length&&(s._bufferIndex=-1,s._index++)),d.previous=Z}function E(Z,F){const W=F||{};return W.type=Z,W.start=_(),d.events.push(["enter",W,d]),c.push(W),W}function B(Z){const F=c.pop();return F.end=_(),d.events.push(["exit",F,d]),F}function D(Z,F){U(Z,F.from)}function j(Z,F){F.restore()}function P(Z,F){return W;function W(Q,V,M){let G,q,z,O;return Array.isArray(Q)?H(Q):"tokenize"in Q?H([Q]):T(Q);function T(ee){return de;function de(we){const Se=we!==null&&ee[we],Fe=we!==null&&ee.null,xe=[...Array.isArray(Se)?Se:Se?[Se]:[],...Array.isArray(Fe)?Fe:Fe?[Fe]:[]];return H(xe)(we)}}function H(ee){return G=ee,q=0,ee.length===0?M:N(ee[q])}function N(ee){return de;function de(we){return O=X(),z=ee,ee.partial||(d.currentConstruct=ee),ee.name&&d.parser.constructs.disable.null.includes(ee.name)?oe():ee.tokenize.call(F?Object.assign(Object.create(d),F):d,h,Y,oe)(we)}}function Y(ee){return Z(z,O),V}function oe(ee){return O.restore(),++q<G.length?N(G[q]):M}}}function U(Z,F){Z.resolveAll&&!a.includes(Z)&&a.push(Z),Z.resolve&&ur(d.events,F,d.events.length-F,Z.resolve(d.events.slice(F),d)),Z.resolveTo&&(d.events=Z.resolveTo(d.events,d))}function X(){const Z=_(),F=d.previous,W=d.currentConstruct,Q=d.events.length,V=Array.from(c);return{from:Q,restore:M};function M(){s=Z,d.previous=F,d.currentConstruct=W,d.events.length=Q,c=V,$()}}function $(){s.line in r&&s.column<2&&(s.column=r[s.line],s.offset+=r[s.line]-1)}}function zH(t,e){const n=e.start._index,s=e.start._bufferIndex,r=e.end._index,a=e.end._bufferIndex;let o;if(n===r)o=[t[n].slice(s,a)];else{if(o=t.slice(n,r),s>-1){const c=o[0];typeof c=="string"?o[0]=c.slice(s):o.shift()}a>0&&o.push(t[r].slice(0,a))}return o}function $H(t,e){let n=-1;const s=[];let r;for(;++n<t.length;){const a=t[n];let o;if(typeof a=="string")o=a;else switch(a){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&r)continue;o=" ";break}default:o=String.fromCharCode(a)}r=a===-2,s.push(o)}return s.join("")}function HH(t){const s={constructs:fO([IH,...(t||{}).extensions||[]]),content:r(n9),defined:[],document:r(r9),flow:r(wH),lazy:{},string:r(CH),text:r(NH)};return s;function r(a){return o;function o(c){return PH(s,a,c)}}}function UH(t){for(;!vO(t););return t}const OA=/[\0\t\n\r]/g;function VH(){let t=1,e="",n=!0,s;return r;function r(a,o,c){const h=[];let d,g,m,v,y;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(o||void 0).decode(a)),m=0,e="",n&&(a.charCodeAt(0)===65279&&m++,n=void 0);m<a.length;){if(OA.lastIndex=m,d=OA.exec(a),v=d&&d.index!==void 0?d.index:a.length,y=a.charCodeAt(v),!d){e=a.slice(m);break}if(y===10&&m===v&&s)h.push(-3),s=void 0;else switch(s&&(h.push(-5),s=void 0),m<v&&(h.push(a.slice(m,v)),t+=v-m),y){case 0:{h.push(65533),t++;break}case 9:{for(g=Math.ceil(t/4)*4,h.push(-2);t++<g;)h.push(-1);break}case 10:{h.push(-4),t=1;break}default:s=!0,t=1}m=v+1}return c&&(s&&h.push(-5),e&&h.push(e),h.push(null)),h}}const FH=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function qH(t){return t.replace(FH,KH)}function KH(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const r=n.charCodeAt(1),a=r===120||r===88;return pO(n.slice(a?2:1),a?16:10)}return YS(n)||t}const kO={}.hasOwnProperty;function WH(t,e,n){return typeof e!="string"&&(n=e,e=void 0),GH(n)(UH(HH(n).document().write(VH()(t,e,!0))))}function GH(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(As),autolinkProtocol:X,autolinkEmail:X,atxHeading:a(nt),blockQuote:a(Fe),characterEscape:X,characterReference:X,codeFenced:a(xe),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:a(xe,o),codeText:a(qe,o),codeTextData:X,data:X,codeFlowValue:X,definition:a(je),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:a(Qe),hardBreakEscape:a(Lt),hardBreakTrailing:a(Lt),htmlFlow:a(Et,o),htmlFlowData:X,htmlText:a(Et,o),htmlTextData:X,image:a(qn),label:o,link:a(As),listItem:a(et),listItemValue:v,listOrdered:a(Ks,m),listUnordered:a(Ks),paragraph:a(at),reference:N,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:a(nt),strong:a(Zt),thematicBreak:a(Kn)},exit:{atxHeading:h(),atxHeadingSequence:D,autolink:h(),autolinkEmail:Se,autolinkProtocol:we,blockQuote:h(),characterEscapeValue:$,characterReferenceMarkerHexadecimal:oe,characterReferenceMarkerNumeric:oe,characterReferenceValue:ee,characterReference:de,codeFenced:h(S),codeFencedFence:w,codeFencedFenceInfo:y,codeFencedFenceMeta:_,codeFlowValue:$,codeIndented:h(k),codeText:h(V),codeTextData:$,data:$,definition:h(),definitionDestinationString:B,definitionLabelString:C,definitionTitleString:E,emphasis:h(),hardBreakEscape:h(F),hardBreakTrailing:h(F),htmlFlow:h(W),htmlFlowData:$,htmlText:h(Q),htmlTextData:$,image:h(G),label:z,labelText:q,lineEnding:Z,link:h(M),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:Y,resourceDestinationString:O,resourceTitleString:T,resource:H,setextHeading:h(U),setextHeadingLineSequence:P,setextHeadingText:j,strong:h(),thematicBreak:h()}};CO(e,(t||{}).mdastExtensions||[]);const n={};return s;function s(pe){let _e={type:"root",children:[]};const Ge={stack:[_e],tokenStack:[],config:e,enter:c,exit:d,buffer:o,resume:g,data:n},it=[];let wt=-1;for(;++wt<pe.length;)if(pe[wt][1].type==="listOrdered"||pe[wt][1].type==="listUnordered")if(pe[wt][0]==="enter")it.push(wt);else{const An=it.pop();wt=r(pe,An,wt)}for(wt=-1;++wt<pe.length;){const An=e[pe[wt][0]];kO.call(An,pe[wt][1].type)&&An[pe[wt][1].type].call(Object.assign({sliceSerialize:pe[wt][2].sliceSerialize},Ge),pe[wt][1])}if(Ge.tokenStack.length>0){const An=Ge.tokenStack[Ge.tokenStack.length-1];(An[1]||BA).call(Ge,void 0,An[0])}for(_e.position={start:Va(pe.length>0?pe[0][1].start:{line:1,column:1,offset:0}),end:Va(pe.length>0?pe[pe.length-2][1].end:{line:1,column:1,offset:0})},wt=-1;++wt<e.transforms.length;)_e=e.transforms[wt](_e)||_e;return _e}function r(pe,_e,Ge){let it=_e-1,wt=-1,An=!1,re,ae,fe,Ce;for(;++it<=Ge;){const Re=pe[it];switch(Re[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Re[0]==="enter"?wt++:wt--,Ce=void 0;break}case"lineEndingBlank":{Re[0]==="enter"&&(re&&!Ce&&!wt&&!fe&&(fe=it),Ce=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ce=void 0}if(!wt&&Re[0]==="enter"&&Re[1].type==="listItemPrefix"||wt===-1&&Re[0]==="exit"&&(Re[1].type==="listUnordered"||Re[1].type==="listOrdered")){if(re){let It=it;for(ae=void 0;It--;){const Bt=pe[It];if(Bt[1].type==="lineEnding"||Bt[1].type==="lineEndingBlank"){if(Bt[0]==="exit")continue;ae&&(pe[ae][1].type="lineEndingBlank",An=!0),Bt[1].type="lineEnding",ae=It}else if(!(Bt[1].type==="linePrefix"||Bt[1].type==="blockQuotePrefix"||Bt[1].type==="blockQuotePrefixWhitespace"||Bt[1].type==="blockQuoteMarker"||Bt[1].type==="listItemIndent"))break}fe&&(!ae||fe<ae)&&(re._spread=!0),re.end=Object.assign({},ae?pe[ae][1].start:Re[1].end),pe.splice(ae||it,0,["exit",re,Re[2]]),it++,Ge++}if(Re[1].type==="listItemPrefix"){const It={type:"listItem",_spread:!1,start:Object.assign({},Re[1].start),end:void 0};re=It,pe.splice(it,0,["enter",It,Re[2]]),it++,Ge++,fe=void 0,Ce=!0}}}return pe[_e][1]._spread=An,Ge}function a(pe,_e){return Ge;function Ge(it){c.call(this,pe(it),it),_e&&_e.call(this,it)}}function o(){this.stack.push({type:"fragment",children:[]})}function c(pe,_e,Ge){this.stack[this.stack.length-1].children.push(pe),this.stack.push(pe),this.tokenStack.push([_e,Ge||void 0]),pe.position={start:Va(_e.start),end:void 0}}function h(pe){return _e;function _e(Ge){pe&&pe.call(this,Ge),d.call(this,Ge)}}function d(pe,_e){const Ge=this.stack.pop(),it=this.tokenStack.pop();if(it)it[0].type!==pe.type&&(_e?_e.call(this,pe,it[0]):(it[1]||BA).call(this,pe,it[0]));else throw new Error("Cannot close `"+pe.type+"` ("+Ad({start:pe.start,end:pe.end})+"): its not open");Ge.position.end=Va(pe.end)}function g(){return GS(this.stack.pop())}function m(){this.data.expectingFirstListItemValue=!0}function v(pe){if(this.data.expectingFirstListItemValue){const _e=this.stack[this.stack.length-2];_e.start=Number.parseInt(this.sliceSerialize(pe),10),this.data.expectingFirstListItemValue=void 0}}function y(){const pe=this.resume(),_e=this.stack[this.stack.length-1];_e.lang=pe}function _(){const pe=this.resume(),_e=this.stack[this.stack.length-1];_e.meta=pe}function w(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function S(){const pe=this.resume(),_e=this.stack[this.stack.length-1];_e.value=pe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function k(){const pe=this.resume(),_e=this.stack[this.stack.length-1];_e.value=pe.replace(/(\r?\n|\r)$/g,"")}function C(pe){const _e=this.resume(),Ge=this.stack[this.stack.length-1];Ge.label=_e,Ge.identifier=Gr(this.sliceSerialize(pe)).toLowerCase()}function E(){const pe=this.resume(),_e=this.stack[this.stack.length-1];_e.title=pe}function B(){const pe=this.resume(),_e=this.stack[this.stack.length-1];_e.url=pe}function D(pe){const _e=this.stack[this.stack.length-1];if(!_e.depth){const Ge=this.sliceSerialize(pe).length;_e.depth=Ge}}function j(){this.data.setextHeadingSlurpLineEnding=!0}function P(pe){const _e=this.stack[this.stack.length-1];_e.depth=this.sliceSerialize(pe).codePointAt(0)===61?1:2}function U(){this.data.setextHeadingSlurpLineEnding=void 0}function X(pe){const Ge=this.stack[this.stack.length-1].children;let it=Ge[Ge.length-1];(!it||it.type!=="text")&&(it=Ot(),it.position={start:Va(pe.start),end:void 0},Ge.push(it)),this.stack.push(it)}function $(pe){const _e=this.stack.pop();_e.value+=this.sliceSerialize(pe),_e.position.end=Va(pe.end)}function Z(pe){const _e=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ge=_e.children[_e.children.length-1];Ge.position.end=Va(pe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(_e.type)&&(X.call(this,pe),$.call(this,pe))}function F(){this.data.atHardBreak=!0}function W(){const pe=this.resume(),_e=this.stack[this.stack.length-1];_e.value=pe}function Q(){const pe=this.resume(),_e=this.stack[this.stack.length-1];_e.value=pe}function V(){const pe=this.resume(),_e=this.stack[this.stack.length-1];_e.value=pe}function M(){const pe=this.stack[this.stack.length-1];if(this.data.inReference){const _e=this.data.referenceType||"shortcut";pe.type+="Reference",pe.referenceType=_e,delete pe.url,delete pe.title}else delete pe.identifier,delete pe.label;this.data.referenceType=void 0}function G(){const pe=this.stack[this.stack.length-1];if(this.data.inReference){const _e=this.data.referenceType||"shortcut";pe.type+="Reference",pe.referenceType=_e,delete pe.url,delete pe.title}else delete pe.identifier,delete pe.label;this.data.referenceType=void 0}function q(pe){const _e=this.sliceSerialize(pe),Ge=this.stack[this.stack.length-2];Ge.label=qH(_e),Ge.identifier=Gr(_e).toLowerCase()}function z(){const pe=this.stack[this.stack.length-1],_e=this.resume(),Ge=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ge.type==="link"){const it=pe.children;Ge.children=it}else Ge.alt=_e}function O(){const pe=this.resume(),_e=this.stack[this.stack.length-1];_e.url=pe}function T(){const pe=this.resume(),_e=this.stack[this.stack.length-1];_e.title=pe}function H(){this.data.inReference=void 0}function N(){this.data.referenceType="collapsed"}function Y(pe){const _e=this.resume(),Ge=this.stack[this.stack.length-1];Ge.label=_e,Ge.identifier=Gr(this.sliceSerialize(pe)).toLowerCase(),this.data.referenceType="full"}function oe(pe){this.data.characterReferenceType=pe.type}function ee(pe){const _e=this.sliceSerialize(pe),Ge=this.data.characterReferenceType;let it;Ge?(it=pO(_e,Ge==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):it=YS(_e);const wt=this.stack[this.stack.length-1];wt.value+=it}function de(pe){const _e=this.stack.pop();_e.position.end=Va(pe.end)}function we(pe){$.call(this,pe);const _e=this.stack[this.stack.length-1];_e.url=this.sliceSerialize(pe)}function Se(pe){$.call(this,pe);const _e=this.stack[this.stack.length-1];_e.url="mailto:"+this.sliceSerialize(pe)}function Fe(){return{type:"blockquote",children:[]}}function xe(){return{type:"code",lang:null,meta:null,value:""}}function qe(){return{type:"inlineCode",value:""}}function je(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Qe(){return{type:"emphasis",children:[]}}function nt(){return{type:"heading",depth:0,children:[]}}function Lt(){return{type:"break"}}function Et(){return{type:"html",value:""}}function qn(){return{type:"image",title:null,url:"",alt:null}}function As(){return{type:"link",title:null,url:"",children:[]}}function Ks(pe){return{type:"list",ordered:pe.type==="listOrdered",start:null,spread:pe._spread,children:[]}}function et(pe){return{type:"listItem",spread:pe._spread,checked:null,children:[]}}function at(){return{type:"paragraph",children:[]}}function Zt(){return{type:"strong",children:[]}}function Ot(){return{type:"text",value:""}}function Kn(){return{type:"thematicBreak"}}}function Va(t){return{line:t.line,column:t.column,offset:t.offset}}function CO(t,e){let n=-1;for(;++n<e.length;){const s=e[n];Array.isArray(s)?CO(t,s):YH(t,s)}}function YH(t,e){let n;for(n in e)if(kO.call(e,n))switch(n){case"canContainEols":{const s=e[n];s&&t[n].push(...s);break}case"transforms":{const s=e[n];s&&t[n].push(...s);break}case"enter":case"exit":{const s=e[n];s&&Object.assign(t[n],s);break}}}function BA(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Ad({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Ad({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Ad({start:e.start,end:e.end})+") is still open")}function XH(t){const e=this;e.parser=n;function n(s){return WH(s,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function JH(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function QH(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function ZH(t,e){const n=e.value?e.value+`
`:"",s={},r=e.lang?e.lang.split(/\s+/):[];r.length>0&&(s.className=["language-"+r[0]]);let a={type:"element",tagName:"code",properties:s,children:[{type:"text",value:n}]};return e.meta&&(a.data={meta:e.meta}),t.patch(e,a),a=t.applyData(e,a),a={type:"element",tagName:"pre",properties:{},children:[a]},t.patch(e,a),a}function eU(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function tU(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function nU(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",s=String(e.identifier).toUpperCase(),r=mu(s.toLowerCase()),a=t.footnoteOrder.indexOf(s);let o,c=t.footnoteCounts.get(s);c===void 0?(c=0,t.footnoteOrder.push(s),o=t.footnoteOrder.length):o=a+1,c+=1,t.footnoteCounts.set(s,c);const h={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+r,id:n+"fnref-"+r+(c>1?"-"+c:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,h);const d={type:"element",tagName:"sup",properties:{},children:[h]};return t.patch(e,d),t.applyData(e,d)}function sU(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function rU(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function NO(t,e){const n=e.referenceType;let s="]";if(n==="collapsed"?s+="[]":n==="full"&&(s+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+s}];const r=t.all(e),a=r[0];a&&a.type==="text"?a.value="["+a.value:r.unshift({type:"text",value:"["});const o=r[r.length-1];return o&&o.type==="text"?o.value+=s:r.push({type:"text",value:s}),r}function iU(t,e){const n=String(e.identifier).toUpperCase(),s=t.definitionById.get(n);if(!s)return NO(t,e);const r={src:mu(s.url||""),alt:e.alt};s.title!==null&&s.title!==void 0&&(r.title=s.title);const a={type:"element",tagName:"img",properties:r,children:[]};return t.patch(e,a),t.applyData(e,a)}function aU(t,e){const n={src:mu(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const s={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,s),t.applyData(e,s)}function lU(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const s={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,s),t.applyData(e,s)}function oU(t,e){const n=String(e.identifier).toUpperCase(),s=t.definitionById.get(n);if(!s)return NO(t,e);const r={href:mu(s.url||"")};s.title!==null&&s.title!==void 0&&(r.title=s.title);const a={type:"element",tagName:"a",properties:r,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function cU(t,e){const n={href:mu(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const s={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function uU(t,e,n){const s=t.all(e),r=n?hU(n):AO(e),a={},o=[];if(typeof e.checked=="boolean"){const g=s[0];let m;g&&g.type==="element"&&g.tagName==="p"?m=g:(m={type:"element",tagName:"p",properties:{},children:[]},s.unshift(m)),m.children.length>0&&m.children.unshift({type:"text",value:" "}),m.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let c=-1;for(;++c<s.length;){const g=s[c];(r||c!==0||g.type!=="element"||g.tagName!=="p")&&o.push({type:"text",value:`
`}),g.type==="element"&&g.tagName==="p"&&!r?o.push(...g.children):o.push(g)}const h=s[s.length-1];h&&(r||h.type!=="element"||h.tagName!=="p")&&o.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:a,children:o};return t.patch(e,d),t.applyData(e,d)}function hU(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let s=-1;for(;!e&&++s<n.length;)e=AO(n[s])}return e}function AO(t){const e=t.spread;return e??t.children.length>1}function dU(t,e){const n={},s=t.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++r<s.length;){const o=s[r];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(s,!0)};return t.patch(e,a),t.applyData(e,a)}function fU(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function pU(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function mU(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function gU(t,e){const n=t.all(e),s=n.shift(),r=[];if(s){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([s],!0)};t.patch(e.children[0],o),r.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},c=FS(e.children[1]),h=aO(e.children[e.children.length-1]);c&&h&&(o.position={start:c,end:h}),r.push(o)}const a={type:"element",tagName:"table",properties:{},children:t.wrap(r,!0)};return t.patch(e,a),t.applyData(e,a)}function yU(t,e,n){const s=n?n.children:void 0,a=(s?s.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,c=o?o.length:e.children.length;let h=-1;const d=[];for(;++h<c;){const m=e.children[h],v={},y=o?o[h]:void 0;y&&(v.align=y);let _={type:"element",tagName:a,properties:v,children:[]};m&&(_.children=t.all(m),t.patch(m,_),_=t.applyData(m,_)),d.push(_)}const g={type:"element",tagName:"tr",properties:{},children:t.wrap(d,!0)};return t.patch(e,g),t.applyData(e,g)}function vU(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const MA=9,DA=32;function bU(t){const e=String(t),n=/\r?\n|\r/g;let s=n.exec(e),r=0;const a=[];for(;s;)a.push(LA(e.slice(r,s.index),r>0,!0),s[0]),r=s.index+s[0].length,s=n.exec(e);return a.push(LA(e.slice(r),r>0,!1)),a.join("")}function LA(t,e,n){let s=0,r=t.length;if(e){let a=t.codePointAt(s);for(;a===MA||a===DA;)s++,a=t.codePointAt(s)}if(n){let a=t.codePointAt(r-1);for(;a===MA||a===DA;)r--,a=t.codePointAt(r-1)}return r>s?t.slice(s,r):""}function xU(t,e){const n={type:"text",value:bU(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function _U(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const wU={blockquote:JH,break:QH,code:ZH,delete:eU,emphasis:tU,footnoteReference:nU,heading:sU,html:rU,imageReference:iU,image:aU,inlineCode:lU,linkReference:oU,link:cU,listItem:uU,list:dU,paragraph:fU,root:pU,strong:mU,table:gU,tableCell:vU,tableRow:yU,text:xU,thematicBreak:_U,toml:fm,yaml:fm,definition:fm,footnoteDefinition:fm};function fm(){}const EO=-1,Lg=0,jd=1,k0=2,JS=3,QS=4,ZS=5,e2=6,jO=7,TO=8,IA=typeof self=="object"?self:globalThis,SU=(t,e)=>{const n=(r,a)=>(t.set(a,r),r),s=r=>{if(t.has(r))return t.get(r);const[a,o]=e[r];switch(a){case Lg:case EO:return n(o,r);case jd:{const c=n([],r);for(const h of o)c.push(s(h));return c}case k0:{const c=n({},r);for(const[h,d]of o)c[s(h)]=s(d);return c}case JS:return n(new Date(o),r);case QS:{const{source:c,flags:h}=o;return n(new RegExp(c,h),r)}case ZS:{const c=n(new Map,r);for(const[h,d]of o)c.set(s(h),s(d));return c}case e2:{const c=n(new Set,r);for(const h of o)c.add(s(h));return c}case jO:{const{name:c,message:h}=o;return n(new IA[c](h),r)}case TO:return n(BigInt(o),r);case"BigInt":return n(Object(BigInt(o)),r);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:c}=new Uint8Array(o);return n(new DataView(c),o)}}return n(new IA[a](o),r)};return s},PA=t=>SU(new Map,t)(0),vc="",{toString:kU}={},{keys:CU}=Object,jh=t=>{const e=typeof t;if(e!=="object"||!t)return[Lg,e];const n=kU.call(t).slice(8,-1);switch(n){case"Array":return[jd,vc];case"Object":return[k0,vc];case"Date":return[JS,vc];case"RegExp":return[QS,vc];case"Map":return[ZS,vc];case"Set":return[e2,vc];case"DataView":return[jd,n]}return n.includes("Array")?[jd,n]:n.includes("Error")?[jO,n]:[k0,n]},pm=([t,e])=>t===Lg&&(e==="function"||e==="symbol"),NU=(t,e,n,s)=>{const r=(o,c)=>{const h=s.push(o)-1;return n.set(c,h),h},a=o=>{if(n.has(o))return n.get(o);let[c,h]=jh(o);switch(c){case Lg:{let g=o;switch(h){case"bigint":c=TO,g=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+h);g=null;break;case"undefined":return r([EO],o)}return r([c,g],o)}case jd:{if(h){let v=o;return h==="DataView"?v=new Uint8Array(o.buffer):h==="ArrayBuffer"&&(v=new Uint8Array(o)),r([h,[...v]],o)}const g=[],m=r([c,g],o);for(const v of o)g.push(a(v));return m}case k0:{if(h)switch(h){case"BigInt":return r([h,o.toString()],o);case"Boolean":case"Number":case"String":return r([h,o.valueOf()],o)}if(e&&"toJSON"in o)return a(o.toJSON());const g=[],m=r([c,g],o);for(const v of CU(o))(t||!pm(jh(o[v])))&&g.push([a(v),a(o[v])]);return m}case JS:return r([c,o.toISOString()],o);case QS:{const{source:g,flags:m}=o;return r([c,{source:g,flags:m}],o)}case ZS:{const g=[],m=r([c,g],o);for(const[v,y]of o)(t||!(pm(jh(v))||pm(jh(y))))&&g.push([a(v),a(y)]);return m}case e2:{const g=[],m=r([c,g],o);for(const v of o)(t||!pm(jh(v)))&&g.push(a(v));return m}}const{message:d}=o;return r([c,{name:h,message:d}],o)};return a},zA=(t,{json:e,lossy:n}={})=>{const s=[];return NU(!(e||n),!!e,new Map,s)(t),s},C0=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?PA(zA(t,e)):structuredClone(t):(t,e)=>PA(zA(t,e));function AU(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function EU(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function jU(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||AU,s=t.options.footnoteBackLabel||EU,r=t.options.footnoteLabel||"Footnotes",a=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},c=[];let h=-1;for(;++h<t.footnoteOrder.length;){const d=t.footnoteById.get(t.footnoteOrder[h]);if(!d)continue;const g=t.all(d),m=String(d.identifier).toUpperCase(),v=mu(m.toLowerCase());let y=0;const _=[],w=t.footnoteCounts.get(m);for(;w!==void 0&&++y<=w;){_.length>0&&_.push({type:"text",value:" "});let C=typeof n=="string"?n:n(h,y);typeof C=="string"&&(C={type:"text",value:C}),_.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+v+(y>1?"-"+y:""),dataFootnoteBackref:"",ariaLabel:typeof s=="string"?s:s(h,y),className:["data-footnote-backref"]},children:Array.isArray(C)?C:[C]})}const S=g[g.length-1];if(S&&S.type==="element"&&S.tagName==="p"){const C=S.children[S.children.length-1];C&&C.type==="text"?C.value+=" ":S.children.push({type:"text",value:" "}),S.children.push(..._)}else g.push(..._);const k={type:"element",tagName:"li",properties:{id:e+"fn-"+v},children:t.wrap(g,!0)};t.patch(d,k),c.push(k)}if(c.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...C0(o),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(c,!0)},{type:"text",value:`
`}]}}const Ig=(function(t){if(t==null)return BU;if(typeof t=="function")return Pg(t);if(typeof t=="object")return Array.isArray(t)?TU(t):RU(t);if(typeof t=="string")return OU(t);throw new Error("Expected function, string, or object as test")});function TU(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=Ig(t[n]);return Pg(s);function s(...r){let a=-1;for(;++a<e.length;)if(e[a].apply(this,r))return!0;return!1}}function RU(t){const e=t;return Pg(n);function n(s){const r=s;let a;for(a in t)if(r[a]!==e[a])return!1;return!0}}function OU(t){return Pg(e);function e(n){return n&&n.type===t}}function Pg(t){return e;function e(n,s,r){return!!(MU(n)&&t.call(this,n,typeof s=="number"?s:void 0,r||void 0))}}function BU(){return!0}function MU(t){return t!==null&&typeof t=="object"&&"type"in t}const RO=[],DU=!0,Wx=!1,LU="skip";function OO(t,e,n,s){let r;typeof e=="function"&&typeof n!="function"?(s=n,n=e):r=e;const a=Ig(r),o=s?-1:1;c(t,void 0,[])();function c(h,d,g){const m=h&&typeof h=="object"?h:{};if(typeof m.type=="string"){const y=typeof m.tagName=="string"?m.tagName:typeof m.name=="string"?m.name:void 0;Object.defineProperty(v,"name",{value:"node ("+(h.type+(y?"<"+y+">":""))+")"})}return v;function v(){let y=RO,_,w,S;if((!e||a(h,d,g[g.length-1]||void 0))&&(y=IU(n(h,g)),y[0]===Wx))return y;if("children"in h&&h.children){const k=h;if(k.children&&y[0]!==LU)for(w=(s?k.children.length:-1)+o,S=g.concat(k);w>-1&&w<k.children.length;){const C=k.children[w];if(_=c(C,w,S)(),_[0]===Wx)return _;w=typeof _[1]=="number"?_[1]:w+o}}return y}}}function IU(t){return Array.isArray(t)?t:typeof t=="number"?[DU,t]:t==null?RO:[t]}function t2(t,e,n,s){let r,a,o;typeof e=="function"&&typeof n!="function"?(a=void 0,o=e,r=n):(a=e,o=n,r=s),OO(t,a,c,r);function c(h,d){const g=d[d.length-1],m=g?g.children.indexOf(h):void 0;return o(h,m,g)}}const Gx={}.hasOwnProperty,PU={};function zU(t,e){const n=e||PU,s=new Map,r=new Map,a=new Map,o={...wU,...n.handlers},c={all:d,applyData:HU,definitionById:s,footnoteById:r,footnoteCounts:a,footnoteOrder:[],handlers:o,one:h,options:n,patch:$U,wrap:VU};return t2(t,function(g){if(g.type==="definition"||g.type==="footnoteDefinition"){const m=g.type==="definition"?s:r,v=String(g.identifier).toUpperCase();m.has(v)||m.set(v,g)}}),c;function h(g,m){const v=g.type,y=c.handlers[v];if(Gx.call(c.handlers,v)&&y)return y(c,g,m);if(c.options.passThrough&&c.options.passThrough.includes(v)){if("children"in g){const{children:w,...S}=g,k=C0(S);return k.children=c.all(g),k}return C0(g)}return(c.options.unknownHandler||UU)(c,g,m)}function d(g){const m=[];if("children"in g){const v=g.children;let y=-1;for(;++y<v.length;){const _=c.one(v[y],g);if(_){if(y&&v[y-1].type==="break"&&(!Array.isArray(_)&&_.type==="text"&&(_.value=$A(_.value)),!Array.isArray(_)&&_.type==="element")){const w=_.children[0];w&&w.type==="text"&&(w.value=$A(w.value))}Array.isArray(_)?m.push(..._):m.push(_)}}}return m}}function $U(t,e){t.position&&(e.position=E$(t))}function HU(t,e){let n=e;if(t&&t.data){const s=t.data.hName,r=t.data.hChildren,a=t.data.hProperties;if(typeof s=="string")if(n.type==="element")n.tagName=s;else{const o="children"in n?n.children:[n];n={type:"element",tagName:s,properties:{},children:o}}n.type==="element"&&a&&Object.assign(n.properties,C0(a)),"children"in n&&n.children&&r!==null&&r!==void 0&&(n.children=r)}return n}function UU(t,e){const n=e.data||{},s="value"in e&&!(Gx.call(n,"hProperties")||Gx.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function VU(t,e){const n=[];let s=-1;for(e&&n.push({type:"text",value:`
`});++s<t.length;)s&&n.push({type:"text",value:`
`}),n.push(t[s]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function $A(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function HA(t,e){const n=zU(t,e),s=n.one(t,void 0),r=jU(n),a=Array.isArray(s)?{type:"root",children:s}:s||{type:"root",children:[]};return r&&a.children.push({type:"text",value:`
`},r),a}function FU(t,e){return t&&"run"in t?async function(n,s){const r=HA(n,{file:s,...e});await t.run(r,s)}:function(n,s){return HA(n,{file:s,...t||e})}}function UA(t){if(t)throw t}var Cb,VA;function qU(){if(VA)return Cb;VA=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,s=Object.getOwnPropertyDescriptor,r=function(d){return typeof Array.isArray=="function"?Array.isArray(d):e.call(d)==="[object Array]"},a=function(d){if(!d||e.call(d)!=="[object Object]")return!1;var g=t.call(d,"constructor"),m=d.constructor&&d.constructor.prototype&&t.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!g&&!m)return!1;var v;for(v in d);return typeof v>"u"||t.call(d,v)},o=function(d,g){n&&g.name==="__proto__"?n(d,g.name,{enumerable:!0,configurable:!0,value:g.newValue,writable:!0}):d[g.name]=g.newValue},c=function(d,g){if(g==="__proto__")if(t.call(d,g)){if(s)return s(d,g).value}else return;return d[g]};return Cb=function h(){var d,g,m,v,y,_,w=arguments[0],S=1,k=arguments.length,C=!1;for(typeof w=="boolean"&&(C=w,w=arguments[1]||{},S=2),(w==null||typeof w!="object"&&typeof w!="function")&&(w={});S<k;++S)if(d=arguments[S],d!=null)for(g in d)m=c(w,g),v=c(d,g),w!==v&&(C&&v&&(a(v)||(y=r(v)))?(y?(y=!1,_=m&&r(m)?m:[]):_=m&&a(m)?m:{},o(w,{name:g,newValue:h(C,_,v)})):typeof v<"u"&&o(w,{name:g,newValue:v}));return w},Cb}var KU=qU();const Nb=lS(KU);function Yx(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function WU(){const t=[],e={run:n,use:s};return e;function n(...r){let a=-1;const o=r.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);c(null,...r);function c(h,...d){const g=t[++a];let m=-1;if(h){o(h);return}for(;++m<r.length;)(d[m]===null||d[m]===void 0)&&(d[m]=r[m]);r=d,g?GU(g,c)(...d):o(null,...d)}}function s(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return t.push(r),e}}function GU(t,e){let n;return s;function s(...o){const c=t.length>o.length;let h;c&&o.push(r);try{h=t.apply(this,o)}catch(d){const g=d;if(c&&n)throw g;return r(g)}c||(h&&h.then&&typeof h.then=="function"?h.then(a,r):h instanceof Error?r(h):a(h))}function r(o,...c){n||(n=!0,e(o,...c))}function a(o){r(null,o)}}const hi={basename:YU,dirname:XU,extname:JU,join:QU,sep:"/"};function YU(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');wf(t);let n=0,s=-1,r=t.length,a;if(e===void 0||e.length===0||e.length>t.length){for(;r--;)if(t.codePointAt(r)===47){if(a){n=r+1;break}}else s<0&&(a=!0,s=r+1);return s<0?"":t.slice(n,s)}if(e===t)return"";let o=-1,c=e.length-1;for(;r--;)if(t.codePointAt(r)===47){if(a){n=r+1;break}}else o<0&&(a=!0,o=r+1),c>-1&&(t.codePointAt(r)===e.codePointAt(c--)?c<0&&(s=r):(c=-1,s=o));return n===s?s=o:s<0&&(s=t.length),t.slice(n,s)}function XU(t){if(wf(t),t.length===0)return".";let e=-1,n=t.length,s;for(;--n;)if(t.codePointAt(n)===47){if(s){e=n;break}}else s||(s=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function JU(t){wf(t);let e=t.length,n=-1,s=0,r=-1,a=0,o;for(;e--;){const c=t.codePointAt(e);if(c===47){if(o){s=e+1;break}continue}n<0&&(o=!0,n=e+1),c===46?r<0?r=e:a!==1&&(a=1):r>-1&&(a=-1)}return r<0||n<0||a===0||a===1&&r===n-1&&r===s+1?"":t.slice(r,n)}function QU(...t){let e=-1,n;for(;++e<t.length;)wf(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":ZU(n)}function ZU(t){wf(t);const e=t.codePointAt(0)===47;let n=eV(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function eV(t,e){let n="",s=0,r=-1,a=0,o=-1,c,h;for(;++o<=t.length;){if(o<t.length)c=t.codePointAt(o);else{if(c===47)break;c=47}if(c===47){if(!(r===o-1||a===1))if(r!==o-1&&a===2){if(n.length<2||s!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(h=n.lastIndexOf("/"),h!==n.length-1){h<0?(n="",s=0):(n=n.slice(0,h),s=n.length-1-n.lastIndexOf("/")),r=o,a=0;continue}}else if(n.length>0){n="",s=0,r=o,a=0;continue}}e&&(n=n.length>0?n+"/..":"..",s=2)}else n.length>0?n+="/"+t.slice(r+1,o):n=t.slice(r+1,o),s=o-r-1;r=o,a=0}else c===46&&a>-1?a++:a=-1}return n}function wf(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const tV={cwd:nV};function nV(){return"/"}function Xx(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function sV(t){if(typeof t=="string")t=new URL(t);else if(!Xx(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return rV(t)}function rV(t){if(t.hostname!==""){const s=new TypeError('File URL host must be "localhost" or empty on darwin');throw s.code="ERR_INVALID_FILE_URL_HOST",s}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const s=e.codePointAt(n+2);if(s===70||s===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const Ab=["history","path","basename","stem","extname","dirname"];class BO{constructor(e){let n;e?Xx(e)?n={path:e}:typeof e=="string"||iV(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":tV.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let s=-1;for(;++s<Ab.length;){const a=Ab[s];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let r;for(r in n)Ab.includes(r)||(this[r]=n[r])}get basename(){return typeof this.path=="string"?hi.basename(this.path):void 0}set basename(e){jb(e,"basename"),Eb(e,"basename"),this.path=hi.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?hi.dirname(this.path):void 0}set dirname(e){FA(this.basename,"dirname"),this.path=hi.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?hi.extname(this.path):void 0}set extname(e){if(Eb(e,"extname"),FA(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=hi.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Xx(e)&&(e=sV(e)),jb(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?hi.basename(this.path,this.extname):void 0}set stem(e){jb(e,"stem"),Eb(e,"stem"),this.path=hi.join(this.dirname||"",e+(this.extname||""))}fail(e,n,s){const r=this.message(e,n,s);throw r.fatal=!0,r}info(e,n,s){const r=this.message(e,n,s);return r.fatal=void 0,r}message(e,n,s){const r=new ps(e,n,s);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Eb(t,e){if(t&&t.includes(hi.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+hi.sep+"`")}function jb(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function FA(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function iV(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const aV=(function(t){const s=this.constructor.prototype,r=s[t],a=function(){return r.apply(a,arguments)};return Object.setPrototypeOf(a,s),a}),lV={}.hasOwnProperty;class n2 extends aV{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=WU()}copy(){const e=new n2;let n=-1;for(;++n<this.attachers.length;){const s=this.attachers[n];e.use(...s)}return e.data(Nb(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Ob("data",this.frozen),this.namespace[e]=n,this):lV.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Ob("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...s]=this.attachers[this.freezeIndex];if(s[0]===!1)continue;s[0]===!0&&(s[0]=void 0);const r=n.call(e,...s);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=mm(e),s=this.parser||this.Parser;return Tb("parse",s),s(String(n),n)}process(e,n){const s=this;return this.freeze(),Tb("process",this.parser||this.Parser),Rb("process",this.compiler||this.Compiler),n?r(void 0,n):new Promise(r);function r(a,o){const c=mm(e),h=s.parse(c);s.run(h,c,function(g,m,v){if(g||!m||!v)return d(g);const y=m,_=s.stringify(y,v);uV(_)?v.value=_:v.result=_,d(g,v)});function d(g,m){g||!m?o(g):a?a(m):n(void 0,m)}}}processSync(e){let n=!1,s;return this.freeze(),Tb("processSync",this.parser||this.Parser),Rb("processSync",this.compiler||this.Compiler),this.process(e,r),KA("processSync","process",n),s;function r(a,o){n=!0,UA(a),s=o}}run(e,n,s){qA(e),this.freeze();const r=this.transformers;return!s&&typeof n=="function"&&(s=n,n=void 0),s?a(void 0,s):new Promise(a);function a(o,c){const h=mm(n);r.run(e,h,d);function d(g,m,v){const y=m||e;g?c(g):o?o(y):s(void 0,y,v)}}}runSync(e,n){let s=!1,r;return this.run(e,n,a),KA("runSync","run",s),r;function a(o,c){UA(o),r=c,s=!0}}stringify(e,n){this.freeze();const s=mm(n),r=this.compiler||this.Compiler;return Rb("stringify",r),qA(e),r(e,s)}use(e,...n){const s=this.attachers,r=this.namespace;if(Ob("use",this.frozen),e!=null)if(typeof e=="function")h(e,n);else if(typeof e=="object")Array.isArray(e)?c(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(d){if(typeof d=="function")h(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[g,...m]=d;h(g,m)}else o(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function o(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(d.plugins),d.settings&&(r.settings=Nb(!0,r.settings,d.settings))}function c(d){let g=-1;if(d!=null)if(Array.isArray(d))for(;++g<d.length;){const m=d[g];a(m)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function h(d,g){let m=-1,v=-1;for(;++m<s.length;)if(s[m][0]===d){v=m;break}if(v===-1)s.push([d,...g]);else if(g.length>0){let[y,..._]=g;const w=s[v][1];Yx(w)&&Yx(y)&&(y=Nb(!0,w,y)),s[v]=[d,y,..._]}}}}const oV=new n2().freeze();function Tb(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Rb(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Ob(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function qA(t){if(!Yx(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function KA(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function mm(t){return cV(t)?t:new BO(t)}function cV(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function uV(t){return typeof t=="string"||hV(t)}function hV(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const dV="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",WA=[],GA={allowDangerousHtml:!0},fV=/^(https?|ircs?|mailto|xmpp)$/i,pV=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function mV(t){const e=gV(t),n=yV(t);return vV(e.runSync(e.parse(n),n),t)}function gV(t){const e=t.rehypePlugins||WA,n=t.remarkPlugins||WA,s=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...GA}:GA;return oV().use(XH).use(n).use(FU,s).use(e)}function yV(t){const e=t.children||"",n=new BO;return typeof e=="string"&&(n.value=e),n}function vV(t,e){const n=e.allowedElements,s=e.allowElement,r=e.components,a=e.disallowedElements,o=e.skipHtml,c=e.unwrapDisallowed,h=e.urlTransform||bV;for(const g of pV)Object.hasOwn(e,g.from)&&(""+g.from+(g.to?"use `"+g.to+"` instead":"remove it")+dV+g.id,void 0);return t2(t,d),B$(t,{Fragment:f.Fragment,components:r,ignoreInvalidStyle:!0,jsx:f.jsx,jsxs:f.jsxs,passKeys:!0,passNode:!0});function d(g,m,v){if(g.type==="raw"&&v&&typeof m=="number")return o?v.children.splice(m,1):v.children[m]={type:"text",value:g.value},m;if(g.type==="element"){let y;for(y in wb)if(Object.hasOwn(wb,y)&&Object.hasOwn(g.properties,y)){const _=g.properties[y],w=wb[y];(w===null||w.includes(g.tagName))&&(g.properties[y]=h(String(_||""),y,g))}}if(g.type==="element"){let y=n?!n.includes(g.tagName):a?a.includes(g.tagName):!1;if(!y&&s&&typeof m=="number"&&(y=!s(g,m,v)),y&&v&&typeof m=="number")return c&&g.children?v.children.splice(m,1,...g.children):v.children.splice(m,1),m}}}function bV(t){const e=t.indexOf(":"),n=t.indexOf("?"),s=t.indexOf("#"),r=t.indexOf("/");return e===-1||r!==-1&&e>r||n!==-1&&e>n||s!==-1&&e>s||fV.test(t.slice(0,e))?t:""}function YA(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let s=0,r=n.indexOf(e);for(;r!==-1;)s++,r=n.indexOf(e,r+e.length);return s}function xV(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function MO(t,e,n){const r=Ig((n||{}).ignore||[]),a=_V(e);let o=-1;for(;++o<a.length;)OO(t,"text",c);function c(d,g){let m=-1,v;for(;++m<g.length;){const y=g[m],_=v?v.children:void 0;if(r(y,_?_.indexOf(y):void 0,v))return;v=y}if(v)return h(d,g)}function h(d,g){const m=g[g.length-1],v=a[o][0],y=a[o][1];let _=0;const S=m.children.indexOf(d);let k=!1,C=[];v.lastIndex=0;let E=v.exec(d.value);for(;E;){const B=E.index,D={index:E.index,input:E.input,stack:[...g,d]};let j=y(...E,D);if(typeof j=="string"&&(j=j.length>0?{type:"text",value:j}:void 0),j===!1?v.lastIndex=B+1:(_!==B&&C.push({type:"text",value:d.value.slice(_,B)}),Array.isArray(j)?C.push(...j):j&&C.push(j),_=B+E[0].length,k=!0),!v.global)break;E=v.exec(d.value)}return k?(_<d.value.length&&C.push({type:"text",value:d.value.slice(_)}),m.children.splice(S,1,...C)):C=[d],S+C.length}}function _V(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let s=-1;for(;++s<n.length;){const r=n[s];e.push([wV(r[0]),SV(r[1])])}return e}function wV(t){return typeof t=="string"?new RegExp(xV(t),"g"):t}function SV(t){return typeof t=="function"?t:function(){return t}}const Bb="phrasing",Mb=["autolink","link","image","label"];function kV(){return{transforms:[RV],enter:{literalAutolink:NV,literalAutolinkEmail:Db,literalAutolinkHttp:Db,literalAutolinkWww:Db},exit:{literalAutolink:TV,literalAutolinkEmail:jV,literalAutolinkHttp:AV,literalAutolinkWww:EV}}}function CV(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Bb,notInConstruct:Mb},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Bb,notInConstruct:Mb},{character:":",before:"[ps]",after:"\\/",inConstruct:Bb,notInConstruct:Mb}]}}function NV(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Db(t){this.config.enter.autolinkProtocol.call(this,t)}function AV(t){this.config.exit.autolinkProtocol.call(this,t)}function EV(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function jV(t){this.config.exit.autolinkEmail.call(this,t)}function TV(t){this.exit(t)}function RV(t){MO(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,OV],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),BV]],{ignore:["link","linkReference"]})}function OV(t,e,n,s,r){let a="";if(!DO(r)||(/^w/i.test(e)&&(n=e+n,e="",a="http://"),!MV(n)))return!1;const o=DV(n+s);if(!o[0])return!1;const c={type:"link",title:null,url:a+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[c,{type:"text",value:o[1]}]:c}function BV(t,e,n,s){return!DO(s,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function MV(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function DV(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],s=n.indexOf(")");const r=YA(t,"(");let a=YA(t,")");for(;s!==-1&&r>a;)t+=n.slice(0,s+1),n=n.slice(s+1),s=n.indexOf(")"),a++;return[t,n]}function DO(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||so(n)||Mg(n))&&(!e||n!==47)}LO.peek=FV;function LV(){this.buffer()}function IV(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function PV(){this.buffer()}function zV(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function $V(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Gr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function HV(t){this.exit(t)}function UV(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Gr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function VV(t){this.exit(t)}function FV(){return"["}function LO(t,e,n,s){const r=n.createTracker(s);let a=r.move("[^");const o=n.enter("footnoteReference"),c=n.enter("reference");return a+=r.move(n.safe(n.associationId(t),{after:"]",before:a})),c(),o(),a+=r.move("]"),a}function qV(){return{enter:{gfmFootnoteCallString:LV,gfmFootnoteCall:IV,gfmFootnoteDefinitionLabelString:PV,gfmFootnoteDefinition:zV},exit:{gfmFootnoteCallString:$V,gfmFootnoteCall:HV,gfmFootnoteDefinitionLabelString:UV,gfmFootnoteDefinition:VV}}}function KV(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:LO},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(s,r,a,o){const c=a.createTracker(o);let h=c.move("[^");const d=a.enter("footnoteDefinition"),g=a.enter("label");return h+=c.move(a.safe(a.associationId(s),{before:h,after:"]"})),g(),h+=c.move("]:"),s.children&&s.children.length>0&&(c.shift(4),h+=c.move((e?`
`:" ")+a.indentLines(a.containerFlow(s,c.current()),e?IO:WV))),d(),h}}function WV(t,e,n){return e===0?t:IO(t,e,n)}function IO(t,e,n){return(n?"":"    ")+t}const GV=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];PO.peek=ZV;function YV(){return{canContainEols:["delete"],enter:{strikethrough:JV},exit:{strikethrough:QV}}}function XV(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:GV}],handlers:{delete:PO}}}function JV(t){this.enter({type:"delete",children:[]},t)}function QV(t){this.exit(t)}function PO(t,e,n,s){const r=n.createTracker(s),a=n.enter("strikethrough");let o=r.move("~~");return o+=n.containerPhrasing(t,{...r.current(),before:o,after:"~"}),o+=r.move("~~"),a(),o}function ZV(){return"~"}function eF(t){return t.length}function tF(t,e){const n=e||{},s=(n.align||[]).concat(),r=n.stringLength||eF,a=[],o=[],c=[],h=[];let d=0,g=-1;for(;++g<t.length;){const w=[],S=[];let k=-1;for(t[g].length>d&&(d=t[g].length);++k<t[g].length;){const C=nF(t[g][k]);if(n.alignDelimiters!==!1){const E=r(C);S[k]=E,(h[k]===void 0||E>h[k])&&(h[k]=E)}w.push(C)}o[g]=w,c[g]=S}let m=-1;if(typeof s=="object"&&"length"in s)for(;++m<d;)a[m]=XA(s[m]);else{const w=XA(s);for(;++m<d;)a[m]=w}m=-1;const v=[],y=[];for(;++m<d;){const w=a[m];let S="",k="";w===99?(S=":",k=":"):w===108?S=":":w===114&&(k=":");let C=n.alignDelimiters===!1?1:Math.max(1,h[m]-S.length-k.length);const E=S+"-".repeat(C)+k;n.alignDelimiters!==!1&&(C=S.length+C+k.length,C>h[m]&&(h[m]=C),y[m]=C),v[m]=E}o.splice(1,0,v),c.splice(1,0,y),g=-1;const _=[];for(;++g<o.length;){const w=o[g],S=c[g];m=-1;const k=[];for(;++m<d;){const C=w[m]||"";let E="",B="";if(n.alignDelimiters!==!1){const D=h[m]-(S[m]||0),j=a[m];j===114?E=" ".repeat(D):j===99?D%2?(E=" ".repeat(D/2+.5),B=" ".repeat(D/2-.5)):(E=" ".repeat(D/2),B=E):B=" ".repeat(D)}n.delimiterStart!==!1&&!m&&k.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&C==="")&&(n.delimiterStart!==!1||m)&&k.push(" "),n.alignDelimiters!==!1&&k.push(E),k.push(C),n.alignDelimiters!==!1&&k.push(B),n.padding!==!1&&k.push(" "),(n.delimiterEnd!==!1||m!==d-1)&&k.push("|")}_.push(n.delimiterEnd===!1?k.join("").replace(/ +$/,""):k.join(""))}return _.join(`
`)}function nF(t){return t==null?"":String(t)}function XA(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function sF(t,e,n,s){const r=n.enter("blockquote"),a=n.createTracker(s);a.move("> "),a.shift(2);const o=n.indentLines(n.containerFlow(t,a.current()),rF);return r(),o}function rF(t,e,n){return">"+(n?"":" ")+t}function iF(t,e){return JA(t,e.inConstruct,!0)&&!JA(t,e.notInConstruct,!1)}function JA(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let s=-1;for(;++s<e.length;)if(t.includes(e[s]))return!0;return!1}function QA(t,e,n,s){let r=-1;for(;++r<n.unsafe.length;)if(n.unsafe[r].character===`
`&&iF(n.stack,n.unsafe[r]))return/[ \t]/.test(s.before)?"":" ";return`\\
`}function aF(t,e){const n=String(t);let s=n.indexOf(e),r=s,a=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;s!==-1;)s===r?++a>o&&(o=a):a=1,r=s+e.length,s=n.indexOf(e,r);return o}function lF(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function oF(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function cF(t,e,n,s){const r=oF(n),a=t.value||"",o=r==="`"?"GraveAccent":"Tilde";if(lF(t,n)){const m=n.enter("codeIndented"),v=n.indentLines(a,uF);return m(),v}const c=n.createTracker(s),h=r.repeat(Math.max(aF(a,r)+1,3)),d=n.enter("codeFenced");let g=c.move(h);if(t.lang){const m=n.enter(`codeFencedLang${o}`);g+=c.move(n.safe(t.lang,{before:g,after:" ",encode:["`"],...c.current()})),m()}if(t.lang&&t.meta){const m=n.enter(`codeFencedMeta${o}`);g+=c.move(" "),g+=c.move(n.safe(t.meta,{before:g,after:`
`,encode:["`"],...c.current()})),m()}return g+=c.move(`
`),a&&(g+=c.move(a+`
`)),g+=c.move(h),d(),g}function uF(t,e,n){return(n?"":"    ")+t}function s2(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function hF(t,e,n,s){const r=s2(n),a=r==='"'?"Quote":"Apostrophe",o=n.enter("definition");let c=n.enter("label");const h=n.createTracker(s);let d=h.move("[");return d+=h.move(n.safe(n.associationId(t),{before:d,after:"]",...h.current()})),d+=h.move("]: "),c(),!t.url||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),d+=h.move("<"),d+=h.move(n.safe(t.url,{before:d,after:">",...h.current()})),d+=h.move(">")):(c=n.enter("destinationRaw"),d+=h.move(n.safe(t.url,{before:d,after:t.title?" ":`
`,...h.current()}))),c(),t.title&&(c=n.enter(`title${a}`),d+=h.move(" "+r),d+=h.move(n.safe(t.title,{before:d,after:r,...h.current()})),d+=h.move(r),c()),o(),d}function dF(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Wd(t){return"&#x"+t.toString(16).toUpperCase()+";"}function N0(t,e,n){const s=qc(t),r=qc(e);return s===void 0?r===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:s===1?r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}zO.peek=fF;function zO(t,e,n,s){const r=dF(n),a=n.enter("emphasis"),o=n.createTracker(s),c=o.move(r);let h=o.move(n.containerPhrasing(t,{after:r,before:c,...o.current()}));const d=h.charCodeAt(0),g=N0(s.before.charCodeAt(s.before.length-1),d,r);g.inside&&(h=Wd(d)+h.slice(1));const m=h.charCodeAt(h.length-1),v=N0(s.after.charCodeAt(0),m,r);v.inside&&(h=h.slice(0,-1)+Wd(m));const y=o.move(r);return a(),n.attentionEncodeSurroundingInfo={after:v.outside,before:g.outside},c+h+y}function fF(t,e,n){return n.options.emphasis||"*"}function pF(t,e){let n=!1;return t2(t,function(s){if("value"in s&&/\r?\n|\r/.test(s.value)||s.type==="break")return n=!0,Wx}),!!((!t.depth||t.depth<3)&&GS(t)&&(e.options.setext||n))}function mF(t,e,n,s){const r=Math.max(Math.min(6,t.depth||1),1),a=n.createTracker(s);if(pF(t,n)){const g=n.enter("headingSetext"),m=n.enter("phrasing"),v=n.containerPhrasing(t,{...a.current(),before:`
`,after:`
`});return m(),g(),v+`
`+(r===1?"=":"-").repeat(v.length-(Math.max(v.lastIndexOf("\r"),v.lastIndexOf(`
`))+1))}const o="#".repeat(r),c=n.enter("headingAtx"),h=n.enter("phrasing");a.move(o+" ");let d=n.containerPhrasing(t,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(d)&&(d=Wd(d.charCodeAt(0))+d.slice(1)),d=d?o+" "+d:o,n.options.closeAtx&&(d+=" "+o),h(),c(),d}$O.peek=gF;function $O(t){return t.value||""}function gF(){return"<"}HO.peek=yF;function HO(t,e,n,s){const r=s2(n),a=r==='"'?"Quote":"Apostrophe",o=n.enter("image");let c=n.enter("label");const h=n.createTracker(s);let d=h.move("![");return d+=h.move(n.safe(t.alt,{before:d,after:"]",...h.current()})),d+=h.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),d+=h.move("<"),d+=h.move(n.safe(t.url,{before:d,after:">",...h.current()})),d+=h.move(">")):(c=n.enter("destinationRaw"),d+=h.move(n.safe(t.url,{before:d,after:t.title?" ":")",...h.current()}))),c(),t.title&&(c=n.enter(`title${a}`),d+=h.move(" "+r),d+=h.move(n.safe(t.title,{before:d,after:r,...h.current()})),d+=h.move(r),c()),d+=h.move(")"),o(),d}function yF(){return"!"}UO.peek=vF;function UO(t,e,n,s){const r=t.referenceType,a=n.enter("imageReference");let o=n.enter("label");const c=n.createTracker(s);let h=c.move("![");const d=n.safe(t.alt,{before:h,after:"]",...c.current()});h+=c.move(d+"]["),o();const g=n.stack;n.stack=[],o=n.enter("reference");const m=n.safe(n.associationId(t),{before:h,after:"]",...c.current()});return o(),n.stack=g,a(),r==="full"||!d||d!==m?h+=c.move(m+"]"):r==="shortcut"?h=h.slice(0,-1):h+=c.move("]"),h}function vF(){return"!"}VO.peek=bF;function VO(t,e,n){let s=t.value||"",r="`",a=-1;for(;new RegExp("(^|[^`])"+r+"([^`]|$)").test(s);)r+="`";for(/[^ \r\n]/.test(s)&&(/^[ \r\n]/.test(s)&&/[ \r\n]$/.test(s)||/^`|`$/.test(s))&&(s=" "+s+" ");++a<n.unsafe.length;){const o=n.unsafe[a],c=n.compilePattern(o);let h;if(o.atBreak)for(;h=c.exec(s);){let d=h.index;s.charCodeAt(d)===10&&s.charCodeAt(d-1)===13&&d--,s=s.slice(0,d)+" "+s.slice(h.index+1)}}return r+s+r}function bF(){return"`"}function FO(t,e){const n=GS(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}qO.peek=xF;function qO(t,e,n,s){const r=s2(n),a=r==='"'?"Quote":"Apostrophe",o=n.createTracker(s);let c,h;if(FO(t,n)){const g=n.stack;n.stack=[],c=n.enter("autolink");let m=o.move("<");return m+=o.move(n.containerPhrasing(t,{before:m,after:">",...o.current()})),m+=o.move(">"),c(),n.stack=g,m}c=n.enter("link"),h=n.enter("label");let d=o.move("[");return d+=o.move(n.containerPhrasing(t,{before:d,after:"](",...o.current()})),d+=o.move("]("),h(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(h=n.enter("destinationLiteral"),d+=o.move("<"),d+=o.move(n.safe(t.url,{before:d,after:">",...o.current()})),d+=o.move(">")):(h=n.enter("destinationRaw"),d+=o.move(n.safe(t.url,{before:d,after:t.title?" ":")",...o.current()}))),h(),t.title&&(h=n.enter(`title${a}`),d+=o.move(" "+r),d+=o.move(n.safe(t.title,{before:d,after:r,...o.current()})),d+=o.move(r),h()),d+=o.move(")"),c(),d}function xF(t,e,n){return FO(t,n)?"<":"["}KO.peek=_F;function KO(t,e,n,s){const r=t.referenceType,a=n.enter("linkReference");let o=n.enter("label");const c=n.createTracker(s);let h=c.move("[");const d=n.containerPhrasing(t,{before:h,after:"]",...c.current()});h+=c.move(d+"]["),o();const g=n.stack;n.stack=[],o=n.enter("reference");const m=n.safe(n.associationId(t),{before:h,after:"]",...c.current()});return o(),n.stack=g,a(),r==="full"||!d||d!==m?h+=c.move(m+"]"):r==="shortcut"?h=h.slice(0,-1):h+=c.move("]"),h}function _F(){return"["}function r2(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function wF(t){const e=r2(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function SF(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function WO(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function kF(t,e,n,s){const r=n.enter("list"),a=n.bulletCurrent;let o=t.ordered?SF(n):r2(n);const c=t.ordered?o==="."?")":".":wF(n);let h=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const g=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&g&&(!g.children||!g.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(h=!0),WO(n)===o&&g){let m=-1;for(;++m<t.children.length;){const v=t.children[m];if(v&&v.type==="listItem"&&v.children&&v.children[0]&&v.children[0].type==="thematicBreak"){h=!0;break}}}}h&&(o=c),n.bulletCurrent=o;const d=n.containerFlow(t,s);return n.bulletLastUsed=o,n.bulletCurrent=a,r(),d}function CF(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function NF(t,e,n,s){const r=CF(n);let a=n.bulletCurrent||r2(n);e&&e.type==="list"&&e.ordered&&(a=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+a);let o=a.length+1;(r==="tab"||r==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const c=n.createTracker(s);c.move(a+" ".repeat(o-a.length)),c.shift(o);const h=n.enter("listItem"),d=n.indentLines(n.containerFlow(t,c.current()),g);return h(),d;function g(m,v,y){return v?(y?"":" ".repeat(o))+m:(y?a:a+" ".repeat(o-a.length))+m}}function AF(t,e,n,s){const r=n.enter("paragraph"),a=n.enter("phrasing"),o=n.containerPhrasing(t,s);return a(),r(),o}const EF=Ig(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function jF(t,e,n,s){return(t.children.some(function(o){return EF(o)})?n.containerPhrasing:n.containerFlow).call(n,t,s)}function TF(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}GO.peek=RF;function GO(t,e,n,s){const r=TF(n),a=n.enter("strong"),o=n.createTracker(s),c=o.move(r+r);let h=o.move(n.containerPhrasing(t,{after:r,before:c,...o.current()}));const d=h.charCodeAt(0),g=N0(s.before.charCodeAt(s.before.length-1),d,r);g.inside&&(h=Wd(d)+h.slice(1));const m=h.charCodeAt(h.length-1),v=N0(s.after.charCodeAt(0),m,r);v.inside&&(h=h.slice(0,-1)+Wd(m));const y=o.move(r+r);return a(),n.attentionEncodeSurroundingInfo={after:v.outside,before:g.outside},c+h+y}function RF(t,e,n){return n.options.strong||"*"}function OF(t,e,n,s){return n.safe(t.value,s)}function BF(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function MF(t,e,n){const s=(WO(n)+(n.options.ruleSpaces?" ":"")).repeat(BF(n));return n.options.ruleSpaces?s.slice(0,-1):s}const YO={blockquote:sF,break:QA,code:cF,definition:hF,emphasis:zO,hardBreak:QA,heading:mF,html:$O,image:HO,imageReference:UO,inlineCode:VO,link:qO,linkReference:KO,list:kF,listItem:NF,paragraph:AF,root:jF,strong:GO,text:OF,thematicBreak:MF};function DF(){return{enter:{table:LF,tableData:ZA,tableHeader:ZA,tableRow:PF},exit:{codeText:zF,table:IF,tableData:Lb,tableHeader:Lb,tableRow:Lb}}}function LF(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function IF(t){this.exit(t),this.data.inTable=void 0}function PF(t){this.enter({type:"tableRow",children:[]},t)}function Lb(t){this.exit(t)}function ZA(t){this.enter({type:"tableCell",children:[]},t)}function zF(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,$F));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function $F(t,e){return e==="|"?e:t}function HF(t){const e=t||{},n=e.tableCellPadding,s=e.tablePipeAlign,r=e.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:v,table:o,tableCell:h,tableRow:c}};function o(y,_,w,S){return d(g(y,w,S),y.align)}function c(y,_,w,S){const k=m(y,w,S),C=d([k]);return C.slice(0,C.indexOf(`
`))}function h(y,_,w,S){const k=w.enter("tableCell"),C=w.enter("phrasing"),E=w.containerPhrasing(y,{...S,before:a,after:a});return C(),k(),E}function d(y,_){return tF(y,{align:_,alignDelimiters:s,padding:n,stringLength:r})}function g(y,_,w){const S=y.children;let k=-1;const C=[],E=_.enter("table");for(;++k<S.length;)C[k]=m(S[k],_,w);return E(),C}function m(y,_,w){const S=y.children;let k=-1;const C=[],E=_.enter("tableRow");for(;++k<S.length;)C[k]=h(S[k],y,_,w);return E(),C}function v(y,_,w){let S=YO.inlineCode(y,_,w);return w.stack.includes("tableCell")&&(S=S.replace(/\|/g,"\\$&")),S}}function UF(){return{exit:{taskListCheckValueChecked:eE,taskListCheckValueUnchecked:eE,paragraph:FF}}}function VF(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:qF}}}function eE(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function FF(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const s=n.children[0];if(s&&s.type==="text"){const r=e.children;let a=-1,o;for(;++a<r.length;){const c=r[a];if(c.type==="paragraph"){o=c;break}}o===n&&(s.value=s.value.slice(1),s.value.length===0?n.children.shift():n.position&&s.position&&typeof s.position.start.offset=="number"&&(s.position.start.column++,s.position.start.offset++,n.position.start=Object.assign({},s.position.start)))}}this.exit(t)}function qF(t,e,n,s){const r=t.children[0],a=typeof t.checked=="boolean"&&r&&r.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",c=n.createTracker(s);a&&c.move(o);let h=YO.listItem(t,e,n,{...s,...c.current()});return a&&(h=h.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,d)),h;function d(g){return g+o}}function KF(){return[kV(),qV(),YV(),DF(),UF()]}function WF(t){return{extensions:[CV(),KV(t),XV(),HF(t),VF()]}}const GF={tokenize:eq,partial:!0},XO={tokenize:tq,partial:!0},JO={tokenize:nq,partial:!0},QO={tokenize:sq,partial:!0},YF={tokenize:rq,partial:!0},ZO={name:"wwwAutolink",tokenize:QF,previous:t6},e6={name:"protocolAutolink",tokenize:ZF,previous:n6},ua={name:"emailAutolink",tokenize:JF,previous:s6},ki={};function XF(){return{text:ki}}let Dl=48;for(;Dl<123;)ki[Dl]=ua,Dl++,Dl===58?Dl=65:Dl===91&&(Dl=97);ki[43]=ua;ki[45]=ua;ki[46]=ua;ki[95]=ua;ki[72]=[ua,e6];ki[104]=[ua,e6];ki[87]=[ua,ZO];ki[119]=[ua,ZO];function JF(t,e,n){const s=this;let r,a;return o;function o(m){return!Jx(m)||!s6.call(s,s.previous)||i2(s.events)?n(m):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),c(m))}function c(m){return Jx(m)?(t.consume(m),c):m===64?(t.consume(m),h):n(m)}function h(m){return m===46?t.check(YF,g,d)(m):m===45||m===95||hs(m)?(a=!0,t.consume(m),h):g(m)}function d(m){return t.consume(m),r=!0,h}function g(m){return a&&r&&xs(s.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(m)):n(m)}}function QF(t,e,n){const s=this;return r;function r(o){return o!==87&&o!==119||!t6.call(s,s.previous)||i2(s.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(GF,t.attempt(XO,t.attempt(JO,a),n),n)(o))}function a(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function ZF(t,e,n){const s=this;let r="",a=!1;return o;function o(m){return(m===72||m===104)&&n6.call(s,s.previous)&&!i2(s.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),r+=String.fromCodePoint(m),t.consume(m),c):n(m)}function c(m){if(xs(m)&&r.length<5)return r+=String.fromCodePoint(m),t.consume(m),c;if(m===58){const v=r.toLowerCase();if(v==="http"||v==="https")return t.consume(m),h}return n(m)}function h(m){return m===47?(t.consume(m),a?d:(a=!0,h)):n(m)}function d(m){return m===null||S0(m)||Kt(m)||so(m)||Mg(m)?n(m):t.attempt(XO,t.attempt(JO,g),n)(m)}function g(m){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(m)}}function eq(t,e,n){let s=0;return r;function r(o){return(o===87||o===119)&&s<3?(s++,t.consume(o),r):o===46&&s===3?(t.consume(o),a):n(o)}function a(o){return o===null?n(o):e(o)}}function tq(t,e,n){let s,r,a;return o;function o(d){return d===46||d===95?t.check(QO,h,c)(d):d===null||Kt(d)||so(d)||d!==45&&Mg(d)?h(d):(a=!0,t.consume(d),o)}function c(d){return d===95?s=!0:(r=s,s=void 0),t.consume(d),o}function h(d){return r||s||!a?n(d):e(d)}}function nq(t,e){let n=0,s=0;return r;function r(o){return o===40?(n++,t.consume(o),r):o===41&&s<n?a(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(QO,e,a)(o):o===null||Kt(o)||so(o)?e(o):(t.consume(o),r)}function a(o){return o===41&&s++,t.consume(o),r}}function sq(t,e,n){return s;function s(c){return c===33||c===34||c===39||c===41||c===42||c===44||c===46||c===58||c===59||c===63||c===95||c===126?(t.consume(c),s):c===38?(t.consume(c),a):c===93?(t.consume(c),r):c===60||c===null||Kt(c)||so(c)?e(c):n(c)}function r(c){return c===null||c===40||c===91||Kt(c)||so(c)?e(c):s(c)}function a(c){return xs(c)?o(c):n(c)}function o(c){return c===59?(t.consume(c),s):xs(c)?(t.consume(c),o):n(c)}}function rq(t,e,n){return s;function s(a){return t.consume(a),r}function r(a){return hs(a)?n(a):e(a)}}function t6(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||Kt(t)}function n6(t){return!xs(t)}function s6(t){return!(t===47||Jx(t))}function Jx(t){return t===43||t===45||t===46||t===95||hs(t)}function i2(t){let e=t.length,n=!1;for(;e--;){const s=t[e][1];if((s.type==="labelLink"||s.type==="labelImage")&&!s._balanced){n=!0;break}if(s._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const iq={tokenize:fq,partial:!0};function aq(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:uq,continuation:{tokenize:hq},exit:dq}},text:{91:{name:"gfmFootnoteCall",tokenize:cq},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:lq,resolveTo:oq}}}}function lq(t,e,n){const s=this;let r=s.events.length;const a=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let o;for(;r--;){const h=s.events[r][1];if(h.type==="labelImage"){o=h;break}if(h.type==="gfmFootnoteCall"||h.type==="labelLink"||h.type==="label"||h.type==="image"||h.type==="link")break}return c;function c(h){if(!o||!o._balanced)return n(h);const d=Gr(s.sliceSerialize({start:o.end,end:s.now()}));return d.codePointAt(0)!==94||!a.includes(d.slice(1))?n(h):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),e(h))}}function oq(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const s={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},r={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};r.end.column++,r.end.offset++,r.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},r.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},c=[t[n+1],t[n+2],["enter",s,e],t[n+3],t[n+4],["enter",r,e],["exit",r,e],["enter",a,e],["enter",o,e],["exit",o,e],["exit",a,e],t[t.length-2],t[t.length-1],["exit",s,e]];return t.splice(n,t.length-n+1,...c),t}function cq(t,e,n){const s=this,r=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let a=0,o;return c;function c(m){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(m),t.exit("gfmFootnoteCallLabelMarker"),h}function h(m){return m!==94?n(m):(t.enter("gfmFootnoteCallMarker"),t.consume(m),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",d)}function d(m){if(a>999||m===93&&!o||m===null||m===91||Kt(m))return n(m);if(m===93){t.exit("chunkString");const v=t.exit("gfmFootnoteCallString");return r.includes(Gr(s.sliceSerialize(v)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(m),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(m)}return Kt(m)||(o=!0),a++,t.consume(m),m===92?g:d}function g(m){return m===91||m===92||m===93?(t.consume(m),a++,d):d(m)}}function uq(t,e,n){const s=this,r=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let a,o=0,c;return h;function h(_){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(_),t.exit("gfmFootnoteDefinitionLabelMarker"),d}function d(_){return _===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(_),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",g):n(_)}function g(_){if(o>999||_===93&&!c||_===null||_===91||Kt(_))return n(_);if(_===93){t.exit("chunkString");const w=t.exit("gfmFootnoteDefinitionLabelString");return a=Gr(s.sliceSerialize(w)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(_),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),v}return Kt(_)||(c=!0),o++,t.consume(_),_===92?m:g}function m(_){return _===91||_===92||_===93?(t.consume(_),o++,g):g(_)}function v(_){return _===58?(t.enter("definitionMarker"),t.consume(_),t.exit("definitionMarker"),r.includes(a)||r.push(a),Nt(t,y,"gfmFootnoteDefinitionWhitespace")):n(_)}function y(_){return e(_)}}function hq(t,e,n){return t.check(_f,e,t.attempt(iq,e,n))}function dq(t){t.exit("gfmFootnoteDefinition")}function fq(t,e,n){const s=this;return Nt(t,r,"gfmFootnoteDefinitionIndent",5);function r(a){const o=s.events[s.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(a):n(a)}}function pq(t){let n=(t||{}).singleTilde;const s={name:"strikethrough",tokenize:a,resolveAll:r};return n==null&&(n=!0),{text:{126:s},insideSpan:{null:[s]},attentionMarkers:{null:[126]}};function r(o,c){let h=-1;for(;++h<o.length;)if(o[h][0]==="enter"&&o[h][1].type==="strikethroughSequenceTemporary"&&o[h][1]._close){let d=h;for(;d--;)if(o[d][0]==="exit"&&o[d][1].type==="strikethroughSequenceTemporary"&&o[d][1]._open&&o[h][1].end.offset-o[h][1].start.offset===o[d][1].end.offset-o[d][1].start.offset){o[h][1].type="strikethroughSequence",o[d][1].type="strikethroughSequence";const g={type:"strikethrough",start:Object.assign({},o[d][1].start),end:Object.assign({},o[h][1].end)},m={type:"strikethroughText",start:Object.assign({},o[d][1].end),end:Object.assign({},o[h][1].start)},v=[["enter",g,c],["enter",o[d][1],c],["exit",o[d][1],c],["enter",m,c]],y=c.parser.constructs.insideSpan.null;y&&ur(v,v.length,0,Dg(y,o.slice(d+1,h),c)),ur(v,v.length,0,[["exit",m,c],["enter",o[h][1],c],["exit",o[h][1],c],["exit",g,c]]),ur(o,d-1,h-d+3,v),h=d+v.length-2;break}}for(h=-1;++h<o.length;)o[h][1].type==="strikethroughSequenceTemporary"&&(o[h][1].type="data");return o}function a(o,c,h){const d=this.previous,g=this.events;let m=0;return v;function v(_){return d===126&&g[g.length-1][1].type!=="characterEscape"?h(_):(o.enter("strikethroughSequenceTemporary"),y(_))}function y(_){const w=qc(d);if(_===126)return m>1?h(_):(o.consume(_),m++,y);if(m<2&&!n)return h(_);const S=o.exit("strikethroughSequenceTemporary"),k=qc(_);return S._open=!k||k===2&&!!w,S._close=!w||w===2&&!!k,c(_)}}}class mq{constructor(){this.map=[]}add(e,n,s){gq(this,e,n,s)}consume(e){if(this.map.sort(function(a,o){return a[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const s=[];for(;n>0;)n-=1,s.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];s.push(e.slice()),e.length=0;let r=s.pop();for(;r;){for(const a of r)e.push(a);r=s.pop()}this.map.length=0}}function gq(t,e,n,s){let r=0;if(!(n===0&&s.length===0)){for(;r<t.map.length;){if(t.map[r][0]===e){t.map[r][1]+=n,t.map[r][2].push(...s);return}r+=1}t.map.push([e,n,s])}}function yq(t,e){let n=!1;const s=[];for(;e<t.length;){const r=t[e];if(n){if(r[0]==="enter")r[1].type==="tableContent"&&s.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(r[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const a=s.length-1;s[a]=s[a]==="left"?"center":"right"}}else if(r[1].type==="tableDelimiterRow")break}else r[0]==="enter"&&r[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return s}function vq(){return{flow:{null:{name:"table",tokenize:bq,resolveAll:xq}}}}function bq(t,e,n){const s=this;let r=0,a=0,o;return c;function c($){let Z=s.events.length-1;for(;Z>-1;){const Q=s.events[Z][1].type;if(Q==="lineEnding"||Q==="linePrefix")Z--;else break}const F=Z>-1?s.events[Z][1].type:null,W=F==="tableHead"||F==="tableRow"?j:h;return W===j&&s.parser.lazy[s.now().line]?n($):W($)}function h($){return t.enter("tableHead"),t.enter("tableRow"),d($)}function d($){return $===124||(o=!0,a+=1),g($)}function g($){return $===null?n($):Ze($)?a>1?(a=0,s.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume($),t.exit("lineEnding"),y):n($):_t($)?Nt(t,g,"whitespace")($):(a+=1,o&&(o=!1,r+=1),$===124?(t.enter("tableCellDivider"),t.consume($),t.exit("tableCellDivider"),o=!0,g):(t.enter("data"),m($)))}function m($){return $===null||$===124||Kt($)?(t.exit("data"),g($)):(t.consume($),$===92?v:m)}function v($){return $===92||$===124?(t.consume($),m):m($)}function y($){return s.interrupt=!1,s.parser.lazy[s.now().line]?n($):(t.enter("tableDelimiterRow"),o=!1,_t($)?Nt(t,_,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):_($))}function _($){return $===45||$===58?S($):$===124?(o=!0,t.enter("tableCellDivider"),t.consume($),t.exit("tableCellDivider"),w):D($)}function w($){return _t($)?Nt(t,S,"whitespace")($):S($)}function S($){return $===58?(a+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume($),t.exit("tableDelimiterMarker"),k):$===45?(a+=1,k($)):$===null||Ze($)?B($):D($)}function k($){return $===45?(t.enter("tableDelimiterFiller"),C($)):D($)}function C($){return $===45?(t.consume($),C):$===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume($),t.exit("tableDelimiterMarker"),E):(t.exit("tableDelimiterFiller"),E($))}function E($){return _t($)?Nt(t,B,"whitespace")($):B($)}function B($){return $===124?_($):$===null||Ze($)?!o||r!==a?D($):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e($)):D($)}function D($){return n($)}function j($){return t.enter("tableRow"),P($)}function P($){return $===124?(t.enter("tableCellDivider"),t.consume($),t.exit("tableCellDivider"),P):$===null||Ze($)?(t.exit("tableRow"),e($)):_t($)?Nt(t,P,"whitespace")($):(t.enter("data"),U($))}function U($){return $===null||$===124||Kt($)?(t.exit("data"),P($)):(t.consume($),$===92?X:U)}function X($){return $===92||$===124?(t.consume($),U):U($)}}function xq(t,e){let n=-1,s=!0,r=0,a=[0,0,0,0],o=[0,0,0,0],c=!1,h=0,d,g,m;const v=new mq;for(;++n<t.length;){const y=t[n],_=y[1];y[0]==="enter"?_.type==="tableHead"?(c=!1,h!==0&&(tE(v,e,h,d,g),g=void 0,h=0),d={type:"table",start:Object.assign({},_.start),end:Object.assign({},_.end)},v.add(n,0,[["enter",d,e]])):_.type==="tableRow"||_.type==="tableDelimiterRow"?(s=!0,m=void 0,a=[0,0,0,0],o=[0,n+1,0,0],c&&(c=!1,g={type:"tableBody",start:Object.assign({},_.start),end:Object.assign({},_.end)},v.add(n,0,[["enter",g,e]])),r=_.type==="tableDelimiterRow"?2:g?3:1):r&&(_.type==="data"||_.type==="tableDelimiterMarker"||_.type==="tableDelimiterFiller")?(s=!1,o[2]===0&&(a[1]!==0&&(o[0]=o[1],m=gm(v,e,a,r,void 0,m),a=[0,0,0,0]),o[2]=n)):_.type==="tableCellDivider"&&(s?s=!1:(a[1]!==0&&(o[0]=o[1],m=gm(v,e,a,r,void 0,m)),a=o,o=[a[1],n,0,0])):_.type==="tableHead"?(c=!0,h=n):_.type==="tableRow"||_.type==="tableDelimiterRow"?(h=n,a[1]!==0?(o[0]=o[1],m=gm(v,e,a,r,n,m)):o[1]!==0&&(m=gm(v,e,o,r,n,m)),r=0):r&&(_.type==="data"||_.type==="tableDelimiterMarker"||_.type==="tableDelimiterFiller")&&(o[3]=n)}for(h!==0&&tE(v,e,h,d,g),v.consume(e.events),n=-1;++n<e.events.length;){const y=e.events[n];y[0]==="enter"&&y[1].type==="table"&&(y[1]._align=yq(e.events,n))}return t}function gm(t,e,n,s,r,a){const o=s===1?"tableHeader":s===2?"tableDelimiter":"tableData",c="tableContent";n[0]!==0&&(a.end=Object.assign({},Ec(e.events,n[0])),t.add(n[0],0,[["exit",a,e]]));const h=Ec(e.events,n[1]);if(a={type:o,start:Object.assign({},h),end:Object.assign({},h)},t.add(n[1],0,[["enter",a,e]]),n[2]!==0){const d=Ec(e.events,n[2]),g=Ec(e.events,n[3]),m={type:c,start:Object.assign({},d),end:Object.assign({},g)};if(t.add(n[2],0,[["enter",m,e]]),s!==2){const v=e.events[n[2]],y=e.events[n[3]];if(v[1].end=Object.assign({},y[1].end),v[1].type="chunkText",v[1].contentType="text",n[3]>n[2]+1){const _=n[2]+1,w=n[3]-n[2]-1;t.add(_,w,[])}}t.add(n[3]+1,0,[["exit",m,e]])}return r!==void 0&&(a.end=Object.assign({},Ec(e.events,r)),t.add(r,0,[["exit",a,e]]),a=void 0),a}function tE(t,e,n,s,r){const a=[],o=Ec(e.events,n);r&&(r.end=Object.assign({},o),a.push(["exit",r,e])),s.end=Object.assign({},o),a.push(["exit",s,e]),t.add(n+1,0,a)}function Ec(t,e){const n=t[e],s=n[0]==="enter"?"start":"end";return n[1][s]}const _q={name:"tasklistCheck",tokenize:Sq};function wq(){return{text:{91:_q}}}function Sq(t,e,n){const s=this;return r;function r(h){return s.previous!==null||!s._gfmTasklistFirstContentOfListItem?n(h):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(h),t.exit("taskListCheckMarker"),a)}function a(h){return Kt(h)?(t.enter("taskListCheckValueUnchecked"),t.consume(h),t.exit("taskListCheckValueUnchecked"),o):h===88||h===120?(t.enter("taskListCheckValueChecked"),t.consume(h),t.exit("taskListCheckValueChecked"),o):n(h)}function o(h){return h===93?(t.enter("taskListCheckMarker"),t.consume(h),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),c):n(h)}function c(h){return Ze(h)?e(h):_t(h)?t.check({tokenize:kq},e,n)(h):n(h)}}function kq(t,e,n){return Nt(t,s,"whitespace");function s(r){return r===null?n(r):e(r)}}function Cq(t){return fO([XF(),aq(),pq(t),vq(),wq()])}const Nq={};function Aq(t){const e=this,n=t||Nq,s=e.data(),r=s.micromarkExtensions||(s.micromarkExtensions=[]),a=s.fromMarkdownExtensions||(s.fromMarkdownExtensions=[]),o=s.toMarkdownExtensions||(s.toMarkdownExtensions=[]);r.push(Cq(n)),a.push(KF()),o.push(WF(n))}function Eq(t){MO(t,[/\r?\n|\r/g,jq])}function jq(){return{type:"break"}}function Tq(){return function(t){Eq(t)}}const Rq={pre:({children:t})=>f.jsx(f.Fragment,{children:t}),li:({children:t,...e})=>f.jsx("li",{className:"py-0.5 ml-0",...e,children:t}),ul:({children:t,...e})=>f.jsx("ul",{className:"list-disc list-outside ml-5 pl-0 my-2",...e,children:t}),ol:({children:t,...e})=>f.jsx("ol",{className:"list-decimal list-outside ml-5 pl-0 my-2",...e,children:t}),strong:({children:t,...e})=>f.jsx("span",{className:"font-semibold",...e,children:t}),a:({children:t,href:e,...n})=>{let s=e||"";return s&&!s.startsWith("http")&&!s.startsWith("#")&&(s=`https://${s}`),f.jsx("a",{className:"text-sky-400 hover:underline",href:s,target:"_blank",rel:"noreferrer noopener",...n,children:t})},h1:({children:t,...e})=>f.jsx("h1",{className:"text-xl font-semibold mt-4 mb-2",...e,children:t}),h2:({children:t,...e})=>f.jsx("h2",{className:"text-lg font-semibold mt-4 mb-2",...e,children:t}),h3:({children:t,...e})=>f.jsx("h3",{className:"text-base font-semibold mt-3 mb-1",...e,children:t}),h4:({children:t,...e})=>f.jsx("h4",{className:"text-sm font-semibold mt-3 mb-1",...e,children:t}),h5:({children:t,...e})=>f.jsx("h5",{className:"text-sm font-semibold mt-2 mb-1",...e,children:t}),h6:({children:t,...e})=>f.jsx("h6",{className:"text-xs font-semibold mt-2 mb-1",...e,children:t}),p:({children:t,...e})=>f.jsx("p",{className:"my-2 leading-relaxed",...e,children:t}),table:({children:t,...e})=>f.jsx("div",{className:"overflow-x-auto my-3",children:f.jsx("table",{className:"w-full border-collapse border border-neutral-600 text-xs",...e,children:t})}),thead:({children:t,...e})=>f.jsx("thead",{className:"bg-neutral-700",...e,children:t}),tbody:({children:t,...e})=>f.jsx("tbody",{...e,children:t}),tr:({children:t,...e})=>f.jsx("tr",{className:"border-b border-neutral-600",...e,children:t}),th:({children:t,...e})=>f.jsx("th",{className:"p-2 text-left font-semibold border-r last:border-r-0 border-neutral-600",...e,children:t}),td:({children:t,...e})=>f.jsx("td",{className:"p-2 border-r last:border-r-0 border-neutral-600",...e,children:t}),blockquote:({children:t,...e})=>f.jsx("blockquote",{className:"border-l-4 border-neutral-500 pl-3 py-1 my-2 italic text-neutral-300",...e,children:t}),hr:({...t})=>f.jsx("hr",{className:"my-4 border-neutral-600",...t}),code({children:t,className:e,...n}){const s=/language-(\w+)/.exec(e||""),r=String(t).replace(/\n$/,""),a=r.includes(`
`);if(!s&&!a)return f.jsx("code",{...n,className:`${e||""} bg-neutral-700 px-1.5 py-0.5 rounded text-xs font-mono text-sky-300`,children:t});const o=s?.[1]||"text";return f.jsxs("div",{className:"my-3",children:[f.jsx("div",{className:"flex items-center justify-between bg-neutral-700 px-3 py-1 rounded-t text-xs text-neutral-400",children:f.jsx("span",{children:o})}),f.jsx("pre",{className:"bg-neutral-800 p-3 rounded-b overflow-x-auto",children:f.jsx("code",{className:"text-xs font-mono text-neutral-200",children:r})})]})}},Oq=[Aq,Tq],Bq=t=>{const e=He.c(6),{children:n}=t;if(!n)return null;let s=n,r;if(e[0]!==s){s=s.replace(/^(#{1,6}\s+.+)\n```/gm,"$1\n\n```");let o;e[3]===Symbol.for("react.memo_cache_sentinel")?(o=/```\n(#{1,6}\s+)/gm,e[3]=o):o=e[3],r=s.replace(o,"```\n\n$1"),e[0]=s,e[1]=r,e[2]=s}else r=e[1],s=e[2];s=r;let a;return e[4]!==s?(a=f.jsx(mV,{remarkPlugins:Oq,components:Rq,children:s}),e[4]=s,e[5]=a):a=e[5],a},Mq=K.memo(Bq,(t,e)=>t.children===e.children);function Dq({isOpen:t,onClose:e,otherPanelOpen:n=!1,environment:s}){const{context:r}=hr(),[a,o]=K.useState([]),[c,h]=K.useState([]),[d,g]=K.useState(""),[m,v]=K.useState(!1),y=K.useRef(null),_=K.useRef(null);K.useEffect(()=>{y.current?.scrollIntoView({behavior:"smooth"})},[a]),K.useEffect(()=>{t&&_.current?.focus()},[t]);const w=async C=>{if(C.preventDefault(),!d.trim()||m)return;const E={id:Date.now().toString(),role:"user",content:d.trim()},B=(Date.now()+1).toString();o(D=>[...D,E]),g(""),v(!0),o(D=>[...D,{id:B,role:"assistant",content:"",isStreaming:!0}]);try{const{response:D,history:j}=await r$(E.content,c,{environment:{currentContext:r,...s},model:Fd().ai?.model||"",onStream:(P,U)=>{o(X=>X.map($=>$.id===B?{...$,content:U}:$))},onToolCall:(P,U)=>{console.log("Tool call:",P,U)}});h(j),o(P=>P.map(U=>U.id===B?{...U,content:D.content,isStreaming:!1}:U))}catch(D){console.error("Chat error:",D),o(j=>j.map(P=>P.id===B?{...P,content:"Sorry, I encountered an error. Please try again.",isStreaming:!1}:P))}finally{v(!1)}},S=C=>{C.key==="Enter"&&!C.shiftKey&&(C.preventDefault(),w(C))},k=()=>{o([]),h([])};return f.jsxs("div",{className:`fixed top-0 right-0 h-screen bg-white border-l border-neutral-200 dark:bg-neutral-900 dark:border-neutral-800 flex flex-col transition-all duration-300 ease-in-out z-30 ${t?"opacity-100 translate-x-0":"opacity-0 translate-x-full pointer-events-none"}`,style:{width:n?"28rem":"40rem"},children:[f.jsxs("div",{className:"shrink-0 h-16 px-4 flex items-center justify-between border-b border-neutral-200 dark:border-neutral-800",children:[f.jsx("h3",{className:"font-semibold text-neutral-900 dark:text-neutral-100",children:"AI Assistant"}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:k,className:"p-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded-md transition-colors",title:"Clear chat",children:f.jsx(oP,{size:18})}),f.jsx("button",{onClick:e,className:"p-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded-md transition-colors",children:f.jsx(yS,{size:18})})]})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0",children:[a.map(C=>f.jsx("div",{className:`text-sm ${C.role==="user"?"bg-neutral-100 dark:bg-neutral-800/50 -mx-4 px-4 py-3 border-l-2 border-sky-500":""}`,children:f.jsx("div",{className:C.role==="user"?"text-neutral-900 dark:text-neutral-100":"text-neutral-800 dark:text-neutral-200",children:C.content?C.role==="assistant"?f.jsx(Mq,{children:C.content}):f.jsx("span",{className:"whitespace-pre-wrap",children:C.content}):C.isStreaming&&f.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[f.jsx(Xl,{size:14,className:"animate-spin"}),"Thinking..."]})})},C.id)),f.jsx("div",{ref:y})]}),f.jsx("form",{onSubmit:w,className:"shrink-0 p-4 border-t border-neutral-200 dark:border-neutral-800",children:f.jsxs("div",{className:"flex items-end gap-2",children:[f.jsx("textarea",{ref:_,value:d,onChange:C=>g(C.target.value),onKeyDown:S,placeholder:"Ask about your resources...",rows:1,disabled:m,className:"flex-1 px-4 py-2.5 bg-neutral-50 border border-neutral-300 dark:bg-neutral-800 dark:border-neutral-700 rounded-xl text-neutral-900 dark:text-neutral-100 text-sm placeholder-neutral-500 resize-none focus:outline-none focus:ring-2 focus:ring-sky-600 focus:border-transparent disabled:opacity-50",style:{maxHeight:"120px"}}),f.jsx("button",{type:"submit",disabled:!d.trim()||m,className:"p-2.5 bg-sky-600 hover:bg-sky-500 disabled:bg-neutral-300 dark:disabled:bg-neutral-700 disabled:text-neutral-500 text-white rounded-xl transition-colors",children:m?f.jsx(Xl,{size:18,className:"animate-spin"}):f.jsx(W7,{size:18})})]})})]})}const Td=new Map,Rd=new Map;function Lq(t){t?(Td.delete(t),Rd.delete(t)):(Td.clear(),Rd.clear())}async function a2(t){const e=Td.get(t);if(e!==void 0)return e;const n=Rd.get(t);if(n)return n;const s=(async()=>{try{const a=await bP(t,"pods.metrics.k8s.io")!==void 0;return Td.set(t,a),a}catch(r){return console.warn("Failed to check metrics availability:",r),Td.set(t,!1),!1}finally{Rd.delete(t)}})();return Rd.set(t,s),s}function nl(t){if(!t)return 0;if(t.endsWith("n"))return parseInt(t.slice(0,-1),10)||0;if(t.endsWith("m"))return(parseInt(t.slice(0,-1),10)||0)*1e6;const e=parseFloat(t);return isNaN(e)?0:e*1e9}function sl(t){if(!t)return 0;const e=t.match(/^(\d+(?:\.\d+)?)(Ki|Mi|Gi|Ti|K|M|G|T|k|m|g|t)?$/);if(!e){const r=parseInt(t,10);return isNaN(r)?0:r}const n=parseFloat(e[1]),s=e[2];if(!s)return n;switch(s){case"Ki":return n*1024;case"Mi":return n*1024*1024;case"Gi":return n*1024*1024*1024;case"Ti":return n*1024*1024*1024*1024;case"K":case"k":return n*1e3;case"M":case"m":return n*1e3*1e3;case"G":case"g":return n*1e3*1e3*1e3;case"T":case"t":return n*1e3*1e3*1e3*1e3;default:return n}}function Gd(t){if(t>=1e9){const e=t/1e9;return e>=10?`${Math.round(e)}`:`${e.toFixed(1)}`}return`${Math.round(t/1e6)}m`}function Yd(t){return t>=1024*1024*1024?`${(t/(1024*1024*1024)).toFixed(1)}Gi`:t>=1024*1024?`${(t/(1024*1024)).toFixed(0)}Mi`:t>=1024?`${(t/1024).toFixed(0)}Ki`:`${t}B`}function nE(t,e){return e<=0?0:Math.min(100,Math.round(t/e*100))}async function Iq(t,e,n){try{return await a2(t)?await ca(`/apis/metrics.k8s.io/v1beta1/namespaces/${n}/pods/${e}`,t):null}catch{return null}}async function l2(t,e,n){try{if(!await a2(t))return[];const s=Object.entries(n).map(([a,o])=>`${a}=${o}`).join(",");return(await ca(`/apis/metrics.k8s.io/v1beta1/namespaces/${e}/pods?labelSelector=${encodeURIComponent(s)}`,t)).items||[]}catch{return[]}}async function Pq(t,e){try{return await a2(t)?await ca(`/apis/metrics.k8s.io/v1beta1/nodes/${e}`,t):null}catch{return null}}function o2(t){const e=new Map;for(const s of t)for(const r of s.containers){const a=e.get(r.name)||{cpuNanos:0,memoryBytes:0,count:0};a.cpuNanos+=nl(r.usage.cpu),a.memoryBytes+=sl(r.usage.memory),a.count++,e.set(r.name,a)}const n=new Map;for(const[s,r]of e)n.set(s,{cpu:{usage:Gd(r.cpuNanos),usageNanoCores:r.cpuNanos},memory:{usage:Yd(r.memoryBytes),usageBytes:r.memoryBytes}});return n}const zq={PodScheduled:{true:"Pod has been assigned to a node",false:"Pod is waiting to be scheduled to a node"},PodReadyToStartContainers:{true:"Pod sandbox and networking are configured",false:"Pod sandbox or networking is being set up"},Initialized:{true:"All init containers have completed successfully",false:"Init containers are still running or failed"},ContainersReady:{true:"All containers in the pod are ready",false:"One or more containers are not ready"},Ready:{true:"Pod is ready to serve requests",false:"Pod is not ready to serve requests"},DisruptionTarget:{true:"Pod is about to be terminated due to disruption",false:"Pod is not targeted for disruption"}},$q={Available:{true:"Deployment has minimum availability",false:"Deployment does not have minimum availability"},Progressing:{true:"Deployment is making progress",false:"Deployment has stalled or failed to progress"},ReplicaFailure:{true:"One or more replicas failed to be created",false:"All replicas are healthy"}},c2={ReplicaFailure:{true:"One or more pods failed to be created",false:"All pods are healthy"}},Hq={...c2},Uq={...c2},sE={Complete:{true:"Job has completed successfully",false:"Job has not completed yet"},Failed:{true:"Job has failed",false:"Job has not failed"},Suspended:{true:"Job is suspended",false:"Job is not suspended"},FailureTarget:{true:"Job is about to fail",false:"Job is not targeted for failure"},SuccessCriteriaMet:{true:"Job success criteria have been met",false:"Job success criteria have not been met yet"}},Vq={Ready:{true:"Node is healthy and ready to accept pods",false:"Node is not ready to accept pods"},MemoryPressure:{true:"Node is running low on memory",false:"Node has sufficient memory"},DiskPressure:{true:"Node is running low on disk space",false:"Node has sufficient disk space"},PIDPressure:{true:"Node is running too many processes",false:"Node has sufficient process capacity"},NetworkUnavailable:{true:"Node network is not configured correctly",false:"Node network is configured correctly"}},Fq={Resizing:{true:"Volume is being resized",false:"Volume is not being resized"},FileSystemResizePending:{true:"Filesystem resize is pending (requires pod restart)",false:"No filesystem resize pending"}},rE={Ready:{true:"Certificate is valid and up to date",false:"Certificate is not ready"},Issuing:{true:"Certificate is being issued or renewed",false:"Certificate is not being issued"}},qq={Accepted:{true:"Gateway configuration has been accepted",false:"Gateway configuration has not been accepted"},Programmed:{true:"Gateway is programmed and ready to route traffic",false:"Gateway is not yet programmed"},Ready:{true:"Gateway is ready to route traffic",false:"Gateway is not ready"}},iE={Accepted:{true:"Route has been accepted by the gateway",false:"Route has not been accepted"},ResolvedRefs:{true:"All references in the route have been resolved",false:"Some references could not be resolved"}},Kq={Pod:zq,Deployment:$q,ReplicaSet:c2,StatefulSet:Hq,DaemonSet:Uq,Job:sE,CronJob:sE,Node:Vq,PersistentVolumeClaim:Fq,Certificate:rE,CertificateRequest:rE,Gateway:qq,HTTPRoute:iE,GRPCRoute:iE};function u2(t,e,n){const s=n==="True",r=Kq[t];return r&&r[e]?s?r[e].true:r[e].false:`${e.replace(/([A-Z])/g," $1").trim()} is ${n}`}function dr(t,e){return e?e.map(n=>({type:n.type||"",status:n.status||"",reason:n.reason,message:n.message,description:u2(t,n.type||"",n.status||"")})):[]}function Qx(t){const e=Math.floor((Date.now()-t.getTime())/1e3);if(e<60)return`${e}s ago`;const n=Math.floor(e/60);if(n<60)return`${n}m ago`;const s=Math.floor(n/60);return s<24?`${s}h ago`:`${Math.floor(s/24)}d ago`}function Th(t){const e=t.match(/^(\d+)(Ki|Mi|Gi|Ti|K|M|G|T)?$/);if(!e)return t;const n=parseInt(e[1],10),s=e[2];return s?s==="Ki"&&n>=1024*1024?`${(n/(1024*1024)).toFixed(1)}Gi`:s==="Ki"&&n>=1024?`${(n/1024).toFixed(1)}Mi`:s==="Mi"&&n>=1024?`${(n/1024).toFixed(1)}Gi`:t:n>=1024*1024*1024?`${(n/(1024*1024*1024)).toFixed(1)}Gi`:n>=1024*1024?`${(n/(1024*1024)).toFixed(1)}Mi`:n>=1024?`${(n/1024).toFixed(1)}Ki`:`${n}B`}function r6(t){switch(t){case"ReadWriteOnce":return"bg-blue-500/20 text-blue-400 border border-blue-500/30";case"ReadOnlyMany":return"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30";case"ReadWriteMany":return"bg-purple-500/20 text-purple-400 border border-purple-500/30";case"ReadWriteOncePod":return"bg-amber-500/20 text-amber-400 border border-amber-500/30";default:return"bg-gray-700 text-gray-300"}}function i6(t){switch(t){case"ReadWriteOnce":return"RWO";case"ReadOnlyMany":return"ROX";case"ReadWriteMany":return"RWX";case"ReadWriteOncePod":return"RWOP";default:return t}}function Wq(t){const e=t.split(" ");if(e.length!==5)return t;const[n,s,r,a,o]=e;if(t==="* * * * *")return"Every minute";if(t==="0 * * * *")return"Every hour";if(t==="0 0 * * *")return"Every day at midnight";if(t==="0 0 * * 0")return"Every Sunday at midnight";if(t==="0 0 1 * *")return"First day of every month at midnight";const c=[];if(n!=="*"&&c.push(`at minute ${n}`),s!=="*"&&c.push(`at hour ${s}`),r!=="*"&&c.push(`on day ${r}`),a!=="*"&&c.push(`in month ${a}`),o!=="*"){const h=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],d=parseInt(o);c.push(`on ${isNaN(d)?o:h[d]||o}`)}return c.length>0?c.join(", "):"Custom schedule"}function aE(t){return{name:t.name,image:t.image||"",resources:t.resources?{requests:t.resources.requests,limits:t.resources.limits}:void 0,ports:t.ports?.map(e=>({name:e.name,containerPort:e.containerPort,protocol:e.protocol})),command:t.command,args:t.args,mounts:t.volumeMounts?.map(e=>({name:e.name,mountPath:e.mountPath,readOnly:e.readOnly,subPath:e.subPath}))}}function gu(t,e,n){const s=[];return e&&e.length>0&&s.push({id:"init-containers",title:"Init Containers",data:{type:"containers",items:e.map(aE)}}),t&&t.length>0&&s.push({id:"containers",title:"Containers",data:{type:"containers",items:t.map(aE),metricsLoader:n}}),s}function Gq(t){if(!t||t.length===0)return null;let e=0,n=0,s=0,r=0,a=!1,o=!1,c=!1,h=!1;for(const d of t){const g=d.resources;if(!g)continue;const m=g.requests,v=g.limits;m?.cpu&&(e+=nl(m.cpu),a=!0),v?.cpu&&(n+=nl(v.cpu),o=!0),m?.memory&&(s+=sl(m.memory),c=!0),v?.memory&&(r+=sl(v.memory),h=!0)}return!a&&!o&&!c&&!h?null:{cpu:{requests:a?Gd(e):void 0,requestsNanoCores:a?e:void 0,limits:o?Gd(n):void 0,limitsNanoCores:o?n:void 0},memory:{requests:c?Yd(s):void 0,requestsBytes:c?s:void 0,limits:h?Yd(r):void 0,limitsBytes:h?r:void 0}}}function So(t){const e=Gq(t);return e?{id:"resource-quota",data:{type:"resource-quota",data:e}}:null}const Yq={kinds:["Deployment","Deployments"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata,a=r?.namespace;if(!n)return{sections:[]};const o=n.replicas??1,c=s?.readyReplicas??0,h=s?.updatedReplicas??0,d=s?.availableReplicas??0,g=async()=>{const y=n.selector?.matchLabels;if(!a||!y||Object.keys(y).length===0)return null;const _=await l2(t,a,y);return _.length===0?null:o2(_)},m=[...n.template?.spec?.containers??[],...n.template?.spec?.initContainers??[]],v=So(m);return{sections:[{id:"replicas",title:"Replica Status",data:{type:"gauges",items:[{label:"Ready",current:c,total:o,color:"emerald"},{label:"Updated",current:h,total:o,color:"blue"},{label:"Available",current:d,total:o,color:"cyan"}],showPodGrid:{total:o,ready:c,available:d,icon:"box"}}},{id:"strategy",data:{type:"info-grid",items:[{label:"Strategy",value:n.strategy?.type||"RollingUpdate"},...n.strategy?.rollingUpdate?[{label:"Max Surge",value:String(n.strategy.rollingUpdate.maxSurge??"25%"),color:"text-cyan-400"},{label:"Max Unavailable",value:String(n.strategy.rollingUpdate.maxUnavailable??"25%"),color:"text-amber-400"}]:[]],columns:3}},{id:"replicasets",data:{type:"related-replicasets",title:"ReplicaSets",loader:async()=>{if(!a||!r?.name)return[];try{const y=await _o(t,"replicasets");if(!y)return[];const _=await Sg(t,y,a),w=r.name??"",S=r.uid;return _.filter(k=>{const C=k.metadata,E=C.name;if(C.ownerReferences?.some(D=>D.kind==="Deployment"&&D.name===w||D.uid===S))return!0;if(E.startsWith(w+"-")){const D=E.slice(w.length+1);return/^[a-z0-9]{7,10}$/.test(D)}return!1}).map(k=>{const C=k.metadata,E=k.spec,B=k.status,D=C.annotations;return{name:C.name,replicas:B?.replicas??0,readyReplicas:B?.readyReplicas??0,revision:D?.["deployment.kubernetes.io/revision"],images:E?.template?.spec?.containers?.map(j=>j.image)??[],isCurrent:(B?.replicas??0)>0}}).sort((k,C)=>{const E=parseInt(k.revision??"0");return parseInt(C.revision??"0")-E})}catch(y){return console.error("Failed to fetch ReplicaSets:",y),[]}}}},...gu(n.template?.spec?.containers,n.template?.spec?.initContainers,g),...v?[v]:[],...(s?.conditions??[]).length>0?[{id:"conditions",data:{type:"conditions",items:dr("Deployment",s?.conditions)}}]:[]]}}},Xq={kinds:["Pod","Pods"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata,a=r?.namespace;if(!n)return{sections:[]};const o=n.containers??[],c=n.initContainers??[],h=s?.containerStatuses??[],d=s?.initContainerStatuses??[],g=h.reduce((_,w)=>_+(w.restartCount??0),0),m=async()=>{const _=r?.name,w=a;if(!_||!w)return null;const S=await Iq(t,_,w);if(!S)return null;const k=new Map;for(const C of S.containers)k.set(C.name,{cpu:{usage:Gd(nl(C.usage.cpu)),usageNanoCores:nl(C.usage.cpu)},memory:{usage:Yd(sl(C.usage.memory)),usageBytes:sl(C.usage.memory)}});return k},v=[...o,...c],y=So(v);return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Phase",value:s?.phase||"Unknown",status:Qq(s?.phase)},{label:"Pod IP",value:s?.podIP||"Pending"},{label:"Node",value:n.nodeName||"Not scheduled"},{label:"Restarts",value:g,status:g>0?"warning":"success"}]}},...y?[y]:[],...c.length>0?[{id:"init-containers",title:"Init Containers",data:{type:"containers",items:c.map(_=>lE(_,d))}}]:[],{id:"containers",title:"Containers",data:{type:"containers",items:o.map(_=>lE(_,h)),metricsLoader:m}},...n.volumes?.length?[{id:"volumes",title:"Volumes",data:{type:"volumes",items:n.volumes.map(_=>Jq(_,[...o,...c]))}}]:[],...(s?.conditions??[]).length>0?[{id:"conditions",data:{type:"conditions",items:dr("Pod",s?.conditions)}}]:[]]}}};function lE(t,e){const n=e.find(o=>o.name===t.name),s=Zq(n),r=n?.lastState?.terminated,a=n?.state?.terminated;return{name:t.name,image:t.image||"",state:s.state,stateReason:s.reason,stateMessage:s.message,ready:n?.ready,restartCount:n?.restartCount,currentTermination:a?{reason:a.reason,message:a.message,exitCode:a.exitCode,signal:a.signal,startedAt:a.startedAt?.toISOString?.()??a.startedAt,finishedAt:a.finishedAt?.toISOString?.()??a.finishedAt}:void 0,lastTermination:r?{reason:r.reason,exitCode:r.exitCode,signal:r.signal,finishedAt:r.finishedAt?.toISOString?.()??r.finishedAt}:void 0,resources:t.resources?{requests:t.resources.requests,limits:t.resources.limits}:void 0,ports:t.ports?.map(o=>({name:o.name,containerPort:o.containerPort,protocol:o.protocol})),command:t.command,args:t.args,mounts:t.volumeMounts?.map(o=>({name:o.name,mountPath:o.mountPath,readOnly:o.readOnly,subPath:o.subPath}))}}function Jq(t,e){const n=eK(t),s=[];for(const r of e)if(r.volumeMounts)for(const a of r.volumeMounts)a.name===t.name&&s.push({container:r.name,mountPath:a.mountPath,readOnly:a.readOnly??!1,subPath:a.subPath});return{name:t.name,type:n.type,source:n.detail,extra:n.extra,mounts:s}}function Qq(t){switch(t?.toLowerCase()){case"running":return"success";case"succeeded":return"success";case"pending":return"warning";case"failed":return"error";default:return"neutral"}}function Zq(t){return t?.state?t.state.running?{state:"running"}:t.state.waiting?{state:"waiting",reason:t.state.waiting.reason,message:t.state.waiting.message}:t.state.terminated?{state:"terminated",reason:t.state.terminated.reason,message:t.state.terminated.message}:{}:{}}function ym(t){const e=t.toString(8).padStart(4,"0"),n=parseInt(e[e.length-4]||"0",10),s=parseInt(e[e.length-3],10),r=parseInt(e[e.length-2],10),a=parseInt(e[e.length-1],10),o=(n&4)!==0,c=(n&2)!==0,h=(n&1)!==0,d=_=>_&4?"r":"-",g=_=>_&2?"w":"-",m=s&1?o?"s":"x":o?"S":"-",v=r&1?c?"s":"x":c?"S":"-",y=a&1?h?"t":"x":h?"T":"-";return d(s)+g(s)+m+d(r)+g(r)+v+d(a)+g(a)+y}function eK(t){if(t.configMap)return{type:"ConfigMap",detail:t.configMap.name||"",extra:{...t.configMap.optional!==void 0&&{optional:String(t.configMap.optional)},...t.configMap.defaultMode!==void 0&&{mode:ym(t.configMap.defaultMode)}}};if(t.secret)return{type:"Secret",detail:t.secret.secretName||"",extra:{...t.secret.optional!==void 0&&{optional:String(t.secret.optional)},...t.secret.defaultMode!==void 0&&{mode:ym(t.secret.defaultMode)}}};if(t.emptyDir)return{type:"EmptyDir",detail:t.emptyDir.medium||"default",extra:{...t.emptyDir.sizeLimit&&{sizeLimit:t.emptyDir.sizeLimit}}};if(t.hostPath)return{type:"HostPath",detail:t.hostPath.path,extra:{...t.hostPath.type&&{type:t.hostPath.type}}};if(t.persistentVolumeClaim)return{type:"PVC",detail:t.persistentVolumeClaim.claimName,extra:{...t.persistentVolumeClaim.readOnly&&{readOnly:"true"}}};if(t.projected){const e=t.projected.sources||[],n=e.map(s=>s.configMap?"ConfigMap":s.secret?"Secret":s.serviceAccountToken?"ServiceAccountToken":s.downwardAPI?"DownwardAPI":"Unknown");return{type:"Projected",detail:`${e.length} sources`,extra:{sources:n.join(", "),...t.projected.defaultMode!==void 0&&{mode:ym(t.projected.defaultMode)}}}}return t.downwardAPI?{type:"DownwardAPI",detail:`${t.downwardAPI.items?.length||0} items`,extra:{...t.downwardAPI.defaultMode!==void 0&&{mode:ym(t.downwardAPI.defaultMode)}}}:t.nfs?{type:"NFS",detail:`${t.nfs.server}:${t.nfs.path}`,extra:{...t.nfs.readOnly&&{readOnly:"true"}}}:t.csi?{type:"CSI",detail:t.csi.driver,extra:{...t.csi.fsType&&{fsType:t.csi.fsType},...t.csi.readOnly&&{readOnly:"true"}}}:{type:"Unknown",detail:""}}const tK={kinds:["StatefulSet","StatefulSets"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata,a=r?.namespace;if(!n)return{sections:[]};const o=n.replicas??1,c=s?.readyReplicas??0,h=s?.currentReplicas??0,d=s?.updatedReplicas??0,g=s?.availableReplicas??0,m=Array.from({length:o},(w,S)=>`${r?.name}-${S}`),v=async()=>{const w=n.selector?.matchLabels;if(!a||!w||Object.keys(w).length===0)return null;const S=await l2(t,a,w);return S.length===0?null:o2(S)},y=[...n.template?.spec?.containers??[],...n.template?.spec?.initContainers??[]],_=So(y);return{sections:[{id:"replicas",title:"Replica Status",data:{type:"gauges",items:[{label:"Ready",current:c,total:o,color:"emerald"},{label:"Current",current:h,total:o,color:"blue"},{label:"Updated",current:d,total:o,color:"cyan"}],showPodGrid:{total:o,ready:c,available:g,showOrdinal:!0,icon:"database",podTitles:m}}},{id:"config",data:{type:"info-grid",items:[{label:"Service Name",value:n.serviceName,color:"text-cyan-400"},{label:"Pod Management",value:n.podManagementPolicy||"OrderedReady"},{label:"Update Strategy",value:n.updateStrategy?.type||"RollingUpdate"},...n.updateStrategy?.rollingUpdate?.partition!==void 0?[{label:"Partition",value:n.updateStrategy.rollingUpdate.partition,color:"text-amber-400"}]:[]],columns:2}},...s?.currentRevision?[{id:"revisions",title:"Revisions",data:{type:"info-grid",items:[{label:"Current",value:s.currentRevision,color:"text-cyan-400"},...s.updateRevision&&s.updateRevision!==s.currentRevision?[{label:"Update",value:s.updateRevision,color:"text-amber-400"}]:[]],columns:1}}]:[],...n.volumeClaimTemplates?.length?[{id:"volume-templates",title:"Volume Claim Templates",data:{type:"volume-claim-templates",items:n.volumeClaimTemplates.map(w=>({name:w.metadata?.name||"",size:w.spec?.resources?.requests?.storage,storageClass:w.spec?.storageClassName,accessModes:w.spec?.accessModes}))}}]:[],{id:"pvcs",data:{type:"related-pvcs",title:"Persistent Volume Claims",loader:async()=>{if(!a||!r?.name)return[];try{const w=await _o(t,"persistentvolumeclaims");if(!w)return[];const S=await Sg(t,w,a),k=r.name,C=n?.volumeClaimTemplates?.map(E=>E.metadata?.name)??[];return S.filter(E=>{const D=E.metadata.name;return C.some(j=>D.startsWith(`${j}-${k}-`))}).map(E=>{const B=E.metadata,D=E.spec,j=E.status;return{name:B.name,status:j?.phase??"Unknown",capacity:j?.capacity?.storage,storageClass:D?.storageClassName}})}catch(w){return console.error("Failed to fetch PVCs:",w),[]}}}},...gu(n.template?.spec?.containers,n.template?.spec?.initContainers,v),..._?[_]:[],...(s?.conditions??[]).length>0?[{id:"conditions",data:{type:"conditions",items:dr("StatefulSet",s?.conditions)}}]:[]]}}},nK={kinds:["DaemonSet","DaemonSets"],adapt(t,e){const n=e.spec,s=e.status,a=e.metadata?.namespace;if(!n)return{sections:[]};const o=s?.desiredNumberScheduled??0,c=s?.currentNumberScheduled??0,h=s?.numberReady??0,d=s?.numberAvailable??0,g=s?.numberMisscheduled??0,m=s?.updatedNumberScheduled??0,v=async()=>{const w=n.selector?.matchLabels;if(!a||!w||Object.keys(w).length===0)return null;const S=await l2(t,a,w);return S.length===0?null:o2(S)},y=[...n.template?.spec?.containers??[],...n.template?.spec?.initContainers??[]],_=So(y);return{sections:[{id:"distribution",title:"Node Distribution",data:{type:"gauges",items:[{label:"Scheduled",current:c,total:o,color:"blue"},{label:"Ready",current:h,total:o,color:"emerald"},{label:"Available",current:d,total:o,color:"cyan"}],showPodGrid:{total:o,ready:h,current:c,icon:"server"}}},{id:"status",data:{type:"info-grid",items:[{label:"Update Strategy",value:n.updateStrategy?.type||"RollingUpdate"},{label:"Updated",value:`${m}/${o}`,color:"text-cyan-400"},...g>0?[{label:"Misscheduled",value:`${g} pods on wrong nodes`,color:"text-red-400"}]:[]],columns:2}},...n.updateStrategy?.rollingUpdate?[{id:"rolling-update",title:"Rolling Update Config",data:{type:"info-grid",items:[{label:"Max Unavailable",value:String(n.updateStrategy.rollingUpdate.maxUnavailable??1),color:"text-amber-400"},...n.updateStrategy.rollingUpdate.maxSurge?[{label:"Max Surge",value:String(n.updateStrategy.rollingUpdate.maxSurge),color:"text-cyan-400"}]:[]],columns:2}}]:[],...n.template?.spec?.nodeSelector&&Object.keys(n.template.spec.nodeSelector).length>0?[{id:"node-selector",data:{type:"labels",labels:n.template.spec.nodeSelector,title:"Node Selector"}}]:[],...gu(n.template?.spec?.containers,n.template?.spec?.initContainers,v),..._?[_]:[],...(s?.conditions??[]).length>0?[{id:"conditions",data:{type:"conditions",items:dr("DaemonSet",s?.conditions)}}]:[]]}}},sK={kinds:["Node","Nodes"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata;if(!s)return{sections:[]};const a=s.nodeInfo,o=s.conditions??[],c=s.addresses??[],h=s.capacity??{},d=s.allocatable??{},g=n?.taints??[],m=r?.labels??{},y=o.find(w=>w.type==="Ready")?.status==="True",_=Object.keys(m).filter(w=>w.startsWith("node-role.kubernetes.io/")).map(w=>w.replace("node-role.kubernetes.io/",""));return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Status",value:y?"Ready":"NotReady",status:y?"success":"error",icon:y?f.jsx(Qr,{size:14}):f.jsx(Si,{size:14})},{label:"Role",value:_.length>0?_.join(", "):"worker",icon:f.jsx(Xr,{size:14,className:"text-purple-400"})}]}},{id:"metrics",data:{type:"node-metrics",title:"Resource Usage",loader:async()=>{const w=r?.name;if(!w)return null;const S=await Pq(t,w);if(!S)return null;const k=d.cpu??"0",C=d.memory??"0";return{cpu:{usage:Gd(nl(S.usage.cpu)),usageNanoCores:nl(S.usage.cpu),allocatable:k,allocatableNanoCores:nl(k)},memory:{usage:Yd(sl(S.usage.memory)),usageBytes:sl(S.usage.memory),allocatable:Th(C),allocatableBytes:sl(C)}}}}},...c.length>0?[{id:"addresses",title:"Addresses",data:{type:"addresses",addresses:c.map(w=>({type:w.type||"",address:w.address||""}))}}]:[],{id:"resources",title:"Resources",data:{type:"capacity-bars",items:[{label:"CPU",icon:f.jsx(yg,{size:14,className:"text-blue-400"}),capacity:h.cpu??"0",allocatable:d.cpu??"0"},{label:"Memory",icon:f.jsx(Hs,{size:14,className:"text-purple-400"}),capacity:Th(h.memory??"0"),allocatable:Th(d.memory??"0")},{label:"Pods",icon:f.jsx(dl,{size:14,className:"text-emerald-400"}),capacity:h.pods??"0",allocatable:d.pods??"0"},...h["ephemeral-storage"]?[{label:"Storage",icon:f.jsx(Hs,{size:14,className:"text-amber-400"}),capacity:Th(h["ephemeral-storage"]),allocatable:Th(d["ephemeral-storage"]??"0")}]:[]]}},...a?[{id:"system-info",title:"System Info",data:{type:"info-grid",items:[{label:"OS",value:a.operatingSystem},{label:"Arch",value:a.architecture},{label:"Kernel",value:a.kernelVersion},{label:"OS Image",value:a.osImage},{label:"Container Runtime",value:a.containerRuntimeVersion},{label:"Kubelet",value:a.kubeletVersion},{label:"Kube-Proxy",value:a.kubeProxyVersion}],columns:2}}]:[],...g.length>0?[{id:"taints",title:"Taints",data:{type:"taints",items:g.map(w=>({key:w.key||"",value:w.value,effect:w.effect||""}))}}]:[],...o.length>0?[{id:"conditions",data:{type:"conditions",items:dr("Node",o)}}]:[]]}}},rK={kinds:["CronJob","CronJobs"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata,a=r?.namespace;if(!n)return{sections:[]};const o=n.suspend??!1,c=n.schedule,h=s?.lastScheduleTime?new Date(s.lastScheduleTime):null,d=s?.lastSuccessfulTime?new Date(s.lastSuccessfulTime):null,g=s?.active?.length??0,m=Wq(c),v=[...n.jobTemplate?.spec?.template?.spec?.containers??[],...n.jobTemplate?.spec?.template?.spec?.initContainers??[]],y=So(v);return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Status",value:o?"Suspended":"Active",status:o?"warning":"success",icon:o?f.jsx(fS,{size:14}):f.jsx(pS,{size:14})},{label:"Active Jobs",value:String(g),status:g>0?"warning":"neutral",icon:f.jsx(oa,{size:14,className:"text-blue-400"})}]}},...y?[y]:[],{id:"schedule",data:{type:"schedule",schedule:c,description:m}},{id:"timing",data:{type:"info-grid",items:[...h?[{label:"Last Scheduled",value:Qx(h),color:"text-purple-400"}]:[],...d?[{label:"Last Successful",value:Qx(d),color:"text-emerald-400"}]:[]],columns:2}},{id:"job-config",title:"Job Configuration",data:{type:"info-grid",items:[{label:"Concurrency Policy",value:n.concurrencyPolicy||"Allow",color:iK(n.concurrencyPolicy)},...n.startingDeadlineSeconds?[{label:"Starting Deadline",value:`${n.startingDeadlineSeconds}s`}]:[],{label:"Successful History",value:n.successfulJobsHistoryLimit??3},{label:"Failed History",value:n.failedJobsHistoryLimit??1},...n.jobTemplate?.spec?.backoffLimit!==void 0?[{label:"Backoff Limit",value:n.jobTemplate.spec.backoffLimit}]:[],...n.jobTemplate?.spec?.activeDeadlineSeconds?[{label:"Job Deadline",value:`${n.jobTemplate.spec.activeDeadlineSeconds}s`,color:"text-amber-400"}]:[]],columns:2}},{id:"jobs",data:{type:"related-jobs",title:"Recent Jobs",loader:async()=>{if(!a||!r?.name)return[];try{const _=await _o(t,"jobs");if(!_)return[];const w=await Sg(t,_,a),S=r.name??"",k=r.uid;return w.filter(C=>{const E=C.metadata,B=E.name;if(E.ownerReferences?.some(j=>j.kind==="CronJob"&&j.name===S||j.uid===k))return!0;if(B.startsWith(S+"-")){const j=B.slice(S.length+1);return/^\d{10}$/.test(j)}return!1}).map(C=>{const E=C.metadata,B=C.status,D=B?.conditions,j=D?.some(U=>U.type==="Complete"&&U.status==="True"),P=D?.some(U=>U.type==="Failed"&&U.status==="True");return{name:E.name,status:j?"Complete":P?"Failed":"Running",startTime:B?.startTime,completionTime:B?.completionTime,succeeded:B?.succeeded,failed:B?.failed}}).sort((C,E)=>{const B=C.startTime?new Date(C.startTime).getTime():0;return(E.startTime?new Date(E.startTime).getTime():0)-B})}catch(_){return console.error("Failed to fetch Jobs:",_),[]}}}},...gu(n.jobTemplate?.spec?.template?.spec?.containers,n.jobTemplate?.spec?.template?.spec?.initContainers)]}}};function iK(t){switch(t){case"Forbid":return"text-red-400";case"Replace":return"text-amber-400";default:return"text-emerald-400"}}const aK={kinds:["Job","Jobs"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=n.completions??1,a=n.parallelism??1,o=s?.succeeded??0,c=s?.failed??0,h=s?.active??0,d=n.backoffLimit??6,g=o>=r,m=s?.conditions?.some(k=>k.type==="Failed"&&k.status==="True"),v=g?"Complete":m?"Failed":h>0?"Running":"Pending",y=s?.startTime?new Date(s.startTime):void 0,_=s?.completionTime?new Date(s.completionTime):void 0,w=[...n.template?.spec?.containers??[],...n.template?.spec?.initContainers??[]],S=So(w);return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Status",value:v,status:g?"success":m?"error":h>0?"warning":"neutral",icon:g?f.jsx(Qr,{size:14}):m?f.jsx(Si,{size:14}):f.jsx(pS,{size:14})},...y?[{label:"Duration",value:lK(y,_),icon:f.jsx(oa,{size:14,className:"text-blue-400"})}]:[]]}},...S?[S]:[],{id:"progress",title:"Progress",data:{type:"job-progress",completions:r,succeeded:o,failed:c,active:h}},{id:"config",data:{type:"info-grid",items:[{label:"Parallelism",value:a,color:"text-cyan-400"},{label:"Backoff Limit",value:`${d}${c>0?` (${c} failures)`:""}`,color:c>=d?"text-red-400":c>0?"text-amber-400":void 0},...n.activeDeadlineSeconds?[{label:"Deadline",value:`${n.activeDeadlineSeconds}s`,color:"text-amber-400"}]:[],...n.ttlSecondsAfterFinished!==void 0?[{label:"TTL After Finished",value:`${n.ttlSecondsAfterFinished}s`}]:[],...n.completionMode?[{label:"Completion Mode",value:n.completionMode,color:"text-purple-400"}]:[]],columns:2}},...y?[{id:"timeline",title:"Timeline",data:{type:"timeline",startTime:y,completionTime:_}}]:[],...gu(n.template?.spec?.containers,n.template?.spec?.initContainers),...s?.conditions?.length?[{id:"conditions",data:{type:"conditions",items:dr("Job",s?.conditions)}}]:[]]}}};function lK(t,e){const s=(e??new Date).getTime()-t.getTime(),r=Math.floor(s/1e3),a=Math.floor(r/60),o=Math.floor(a/60),c=Math.floor(o/24);return c>0?`${c}d ${o%24}h`:o>0?`${o}h ${a%60}m`:a>0?`${a}m ${r%60}s`:`${r}s`}const oK={kinds:["ReplicaSet","ReplicaSets"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata;if(!n)return{sections:[]};const a=n.replicas??1,o=s?.replicas??0,c=s?.readyReplicas??0,h=s?.availableReplicas??0,d=r?.ownerReferences?.[0],g=r?.annotations?.["deployment.kubernetes.io/revision"],m=[...n.template?.spec?.containers??[],...n.template?.spec?.initContainers??[]],v=So(m);return{sections:[...d?[{id:"owner",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"text-xs text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(uu,{size:10})," Owned By"]}),f.jsxs("div",{className:"text-sm flex items-center gap-2",children:[f.jsxs("span",{className:"text-neutral-500",children:[d.kind,":"]}),f.jsx("span",{className:"text-cyan-400",children:d.name}),g&&f.jsxs("span",{className:"text-xs bg-neutral-700 px-1.5 py-0.5 rounded text-neutral-400",children:["rev ",g]})]})]})}}]:[],{id:"replicas",title:"Replica Status",data:{type:"gauges",items:[{label:"Ready",current:c,total:a,color:"emerald"},{label:"Current",current:o,total:a,color:"blue"},{label:"Available",current:h,total:a,color:"cyan"}],showPodGrid:{total:Math.max(a,o),ready:c,available:h,current:o,icon:"box"}}},...v?[v]:[],...n.selector?.matchLabels?[{id:"selector",data:{type:"labels",labels:n.selector.matchLabels,title:"Selector"}}]:[],...gu(n.template?.spec?.containers,n.template?.spec?.initContainers),...(s?.conditions??[]).length>0?[{id:"conditions",data:{type:"conditions",items:dr("ReplicaSet",s?.conditions)}}]:[]]}}},cK={kinds:["PersistentVolume","PersistentVolumes"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=s?.phase??"Unknown",a=n.capacity?.storage??"Unknown";return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Phase",value:r,status:uK(r)},{label:"Capacity",value:a,icon:f.jsx(Hs,{size:14,className:"text-purple-400"})},{label:"Reclaim Policy",value:n.persistentVolumeReclaimPolicy??"Delete",status:n.persistentVolumeReclaimPolicy==="Retain"?"warning":"neutral"},{label:"Volume Mode",value:n.volumeMode??"Filesystem"}]}},...n.accessModes?.length?[{id:"access-modes",title:"Access Modes",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.accessModes.map((o,c)=>f.jsx("span",{className:`text-xs px-2 py-1 rounded ${r6(o)}`,children:i6(o)},c))})}}]:[],...n.storageClassName?[{id:"storage-class",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Storage Class"}),f.jsxs("div",{className:"text-sm text-purple-600 dark:text-purple-400 flex items-center gap-2",children:[f.jsx(fl,{size:14}),n.storageClassName]})]})}}]:[],...n.claimRef?[{id:"claim-ref",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(uu,{size:10})," Bound To"]}),f.jsxs("div",{className:"text-sm",children:[f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-500",children:[n.claimRef.namespace,"/"]}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:n.claimRef.name})]})]})}}]:[],{id:"source",title:"Volume Source",data:{type:"custom",render:()=>{const o=hK(n),c=o.find(d=>d.label==="Type")?.value||"Unknown",h=o.filter(d=>d.label!=="Type");return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3 space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:"Type:"}),f.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-purple-500/20 text-purple-700 dark:text-purple-400",children:c})]}),h.length>0&&f.jsx("div",{className:"space-y-1 pl-1",children:h.map((d,g)=>f.jsxs("div",{className:"text-xs",children:[f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-500",children:[d.label,":"]})," ",f.jsx("span",{className:d.color?`${d.color.replace("text-cyan-400","text-cyan-600 dark:text-cyan-400").replace("text-purple-400","text-purple-600 dark:text-purple-400")}`:"text-neutral-900 dark:text-neutral-300",children:d.value})]},g))})]})}}},...n.nodeAffinity?.required?.nodeSelectorTerms?[{id:"node-affinity",title:"Node Affinity",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.nodeAffinity.required.nodeSelectorTerms.map((o,c)=>f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-2",children:o.matchExpressions?.map((h,d)=>f.jsxs("div",{className:"text-xs",children:[f.jsx("span",{className:"text-purple-400",children:h.key}),f.jsx("span",{className:"text-neutral-500 mx-1",children:h.operator}),h.values&&f.jsx("span",{className:"text-cyan-400",children:h.values.join(", ")})]},d))},c))})}}]:[],...n.mountOptions?.length?[{id:"mount-options",title:"Mount Options",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-1",children:n.mountOptions.map((o,c)=>f.jsx("span",{className:"text-xs bg-neutral-200 dark:bg-neutral-800 px-2 py-1 rounded text-neutral-800 dark:text-neutral-300",children:o},c))})}}]:[]]}}};function uK(t){switch(t){case"Bound":return"success";case"Available":return"success";case"Released":return"warning";case"Failed":return"error";default:return"neutral"}}function hK(t){if(!t)return[];const e=[];return t.hostPath?(e.push({label:"Type",value:"HostPath"}),e.push({label:"Path",value:t.hostPath.path,color:"text-cyan-400"})):t.nfs?(e.push({label:"Type",value:"NFS"}),e.push({label:"Server",value:t.nfs.server,color:"text-cyan-400"}),e.push({label:"Path",value:t.nfs.path,color:"text-cyan-400"})):t.csi?(e.push({label:"Type",value:"CSI"}),e.push({label:"Driver",value:t.csi.driver,color:"text-purple-400"}),t.csi.volumeHandle&&e.push({label:"Handle",value:t.csi.volumeHandle,color:"text-cyan-400"})):t.local?(e.push({label:"Type",value:"Local"}),e.push({label:"Path",value:t.local.path,color:"text-cyan-400"})):t.awsElasticBlockStore?(e.push({label:"Type",value:"AWS EBS"}),e.push({label:"Volume ID",value:t.awsElasticBlockStore.volumeID,color:"text-cyan-400"})):t.gcePersistentDisk?(e.push({label:"Type",value:"GCE PD"}),e.push({label:"PD Name",value:t.gcePersistentDisk.pdName,color:"text-cyan-400"})):t.azureDisk?(e.push({label:"Type",value:"Azure Disk"}),e.push({label:"Disk Name",value:t.azureDisk.diskName,color:"text-cyan-400"})):e.push({label:"Type",value:"Unknown"}),e}const dK={kinds:["PersistentVolumeClaim","PersistentVolumeClaims"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=s?.phase??"Unknown",a=n.volumeName,o=n.resources?.requests?.storage,c=s?.capacity?.storage,h=[{id:"status",data:{type:"status-cards",items:[{label:"Phase",value:r,status:fK(r)},{label:"Requested",value:o??"Not specified",icon:f.jsx(Hs,{size:14,className:"text-purple-400"})},...c?[{label:"Actual Capacity",value:c,status:"success"}]:[],{label:"Volume Mode",value:n.volumeMode??"Filesystem"}]}}];return n.accessModes?.length&&h.push({id:"access-modes",title:"Access Modes",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.accessModes.map((d,g)=>f.jsx("span",{className:`text-xs px-2 py-1 rounded ${r6(d)}`,children:i6(d)},g))})}}),n.storageClassName&&h.push({id:"storage-class",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Storage Class"}),f.jsxs("div",{className:"text-sm text-purple-600 dark:text-purple-400 flex items-center gap-2",children:[f.jsx(fl,{size:14}),n.storageClassName]})]})}}),a?h.push({id:"bound-volume",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(uu,{size:10})," Bound To"]}),f.jsxs("div",{className:"text-sm",children:[f.jsx("span",{className:"text-neutral-700 dark:text-neutral-400",children:"platform/"}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:a})]})]})}}):h.push({id:"no-volume",data:{type:"custom",render:()=>f.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3",children:f.jsxs("div",{className:"text-yellow-400 text-sm flex items-center gap-2",children:[f.jsx(cS,{size:14}),"Not bound to any volume"]})})}}),n.selector?.matchLabels&&Object.keys(n.selector.matchLabels).length>0&&h.push({id:"selector",title:"Volume Selector",data:{type:"labels",labels:n.selector.matchLabels}}),s?.conditions?.length&&h.push({id:"conditions",data:{type:"conditions",items:dr("PersistentVolumeClaim",s.conditions)}}),{sections:h}}};function fK(t){switch(t){case"Bound":return"success";case"Pending":return"warning";case"Lost":return"error";default:return"neutral"}}const pK="/apis/argoproj.io/v1alpha1";async function a6(t,e,n,s){const r=`/contexts/${t}${pK}/namespaces/${n}/applications/${e}`,a=await fetch(r,{method:"PATCH",headers:{"Content-Type":"application/merge-patch+json"},body:JSON.stringify(s)});if(!a.ok){const o=await a.text();throw new Error(`Failed to patch application: ${a.status} ${a.statusText} - ${o}`)}return a}async function oE(t,e,n="argocd",s={}){const a={operation:{sync:{syncStrategy:s.strategy==="apply"?{apply:{}}:{hook:{}},...s.revision&&{revision:s.revision},...s.prune!==void 0&&{prune:s.prune},...s.dryRun!==void 0&&{dryRun:s.dryRun}}}};await a6(t,e,n,a)}async function cE(t,e,n="argocd",s=!1){await a6(t,e,n,{metadata:{annotations:{"argocd.argoproj.io/refresh":s?"hard":"normal"}}})}function mK(t){switch(t){case"Synced":return"success";case"OutOfSync":return"warning";default:return"neutral"}}function gK(t){switch(t){case"Healthy":return"success";case"Progressing":return"warning";case"Degraded":case"Missing":return"error";case"Suspended":return"warning";default:return"neutral"}}function yK(t){switch(t){case"Synced":return f.jsx(Qr,{size:14,className:"text-emerald-400"});case"OutOfSync":return f.jsx(Mn,{size:14,className:"text-amber-400"});default:return f.jsx(xo,{size:14,className:"text-gray-400"})}}function vK(t){switch(t){case"Healthy":return f.jsx(Qr,{size:14,className:"text-emerald-400"});case"Progressing":return f.jsx(Mn,{size:14,className:"text-blue-400 animate-spin"});case"Degraded":return f.jsx(Si,{size:14,className:"text-red-400"});case"Missing":return f.jsx(xo,{size:14,className:"text-red-400"});case"Suspended":return f.jsx(fS,{size:14,className:"text-amber-400"});default:return f.jsx(pf,{size:14,className:"text-gray-400"})}}function bK(t,e=12){switch(t){case"Healthy":return f.jsx(Qr,{size:e,className:"text-emerald-400 shrink-0"});case"Progressing":return f.jsx(Mn,{size:e,className:"text-blue-400 animate-spin shrink-0"});case"Degraded":return f.jsx(Si,{size:e,className:"text-red-400 shrink-0"});case"Missing":return f.jsx(xo,{size:e,className:"text-red-400 shrink-0"});case"Suspended":return f.jsx(fS,{size:e,className:"text-amber-400 shrink-0"});default:return f.jsx(pf,{size:e,className:"text-gray-400 shrink-0"})}}function xK(t){const e={Synced:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",OutOfSync:"bg-amber-500/20 text-amber-400 border-amber-500/30",Unknown:"bg-gray-500/20 text-gray-400 border-gray-500/30"},n=e[t]||e.Unknown;return f.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${n}`,children:t||"Unknown"})}function Ib(t){if(!t)return"Unknown";const e=new Date(t),s=Math.floor((new Date().getTime()-e.getTime())/1e3);return s<60?`${s}s ago`:s<3600?`${Math.floor(s/60)}m ago`:s<86400?`${Math.floor(s/3600)}h ago`:`${Math.floor(s/86400)}d ago`}function _K(t){if(!t)return"Unknown";const e=t.match(/[:/]([^/:]+\/[^/:]+?)(?:\.git)?$/);return e?e[1]:t}const wK={kinds:["Application","Applications"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=n.source||n.sources?.[0],a=s?.sync?.status||"Unknown",o=s?.health?.status||"Unknown",c=s?.operationState?.phase,h={healthy:0,progressing:0,degraded:0,missing:0,suspended:0,unknown:0};s?.resources?.forEach(g=>{const m=g.health?.status;let v;m?v=m.toLowerCase():v=g.status==="Synced"?"healthy":"unknown",v in h&&h[v]++});const d=s?.resources?.length||0;return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Sync Status",value:a,status:mK(a),icon:yK(a)},{label:"Health",value:o,status:gK(o),icon:vK(o)},...c?[{label:"Operation",value:c,status:c==="Succeeded"?"success":c==="Failed"?"error":"warning",icon:c==="Running"?f.jsx(Mn,{size:14,className:"animate-spin"}):void 0}]:[]]}},...d>0?[{id:"resource-health",title:"Resource Health",data:{type:"gauges",items:[{label:"Healthy",current:h.healthy,total:d,color:"emerald"},{label:"Progressing",current:h.progressing,total:d,color:"blue"},{label:"Degraded",current:h.degraded+h.missing,total:d,color:"amber"}]}}]:[],...s?.resources?.length?[{id:"resources",title:"Managed Resources",data:{type:"custom",render:()=>{const g=new Map;s.resources.forEach(v=>{const y=v.kind||"Unknown";g.has(y)||g.set(y,[]),g.get(y).push(v)});const m=Array.from(g.keys()).sort((v,y)=>{const _=g.get(v),w=g.get(y),S=_.some(C=>C.health?.status!=="Healthy"),k=w.some(C=>C.health?.status!=="Healthy");return S&&!k?-1:!S&&k?1:v.localeCompare(y)});return f.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:m.map(v=>{const y=g.get(v),_=[...y].sort((w,S)=>{const k=w.health?.status==="Healthy",C=S.health?.status==="Healthy";return!k&&C?-1:k&&!C?1:(w.name||"").localeCompare(S.name||"")});return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-2",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[f.jsx(fT,{size:12,className:"text-neutral-500"}),f.jsx("span",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-400",children:v}),f.jsxs("span",{className:"text-[10px] text-neutral-500 dark:text-neutral-600",children:["(",y.length,")"]})]}),f.jsx("div",{className:"space-y-1",children:_.map((w,S)=>f.jsxs("div",{className:"flex items-center gap-2 text-xs pl-4",children:[bK(w.health?.status),f.jsx("span",{className:"text-neutral-700 dark:text-neutral-300 truncate flex-1",title:w.name,children:w.name}),w.namespace&&f.jsx("span",{className:"text-neutral-500 dark:text-neutral-600 text-[10px]",children:w.namespace}),xK(w.status),w.requiresPruning&&f.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded border bg-red-500/20 text-red-400 border-red-500/30",children:"Prune"})]},`${w.namespace}-${w.name}-${S}`))})]},v)})})}}}]:[],{id:"source",title:"Source",data:{type:"info-grid",items:[{label:"Repository",value:_K(r?.repoURL),color:"text-cyan-400"},{label:"Path",value:r?.path||r?.chart||"/",color:"text-purple-400"},{label:"Target Revision",value:r?.targetRevision||"HEAD",color:"text-blue-400"},...s?.sync?.revision?[{label:"Current Revision",value:s.sync.revision.substring(0,7),color:"text-emerald-400"}]:[]],columns:2}},{id:"destination",title:"Destination",data:{type:"info-grid",items:[{label:"Server",value:n.destination?.name||n.destination?.server||"Unknown"},{label:"Namespace",value:n.destination?.namespace||"default",color:"text-cyan-400"},{label:"Project",value:n.project||"default",color:"text-purple-400"}],columns:2}},...n.syncPolicy?[{id:"sync-policy",title:"Sync Policy",data:{type:"info-grid",items:[...n.syncPolicy.automated?[{label:"Auto Sync",value:"Enabled",color:"text-emerald-400"},{label:"Prune",value:n.syncPolicy.automated.prune?"Yes":"No",color:n.syncPolicy.automated.prune?"text-amber-400":void 0},{label:"Self Heal",value:n.syncPolicy.automated.selfHeal?"Yes":"No",color:n.syncPolicy.automated.selfHeal?"text-emerald-400":void 0}]:[{label:"Auto Sync",value:"Disabled",color:"text-gray-400"}],...n.syncPolicy.retry?.limit?[{label:"Retry Limit",value:n.syncPolicy.retry.limit}]:[]],columns:2}}]:[],...n.syncPolicy?.syncOptions?.length?[{id:"sync-options",data:{type:"labels",labels:Object.fromEntries(n.syncPolicy.syncOptions.map(g=>{const[m,v]=g.split("=");return[m,v||"true"]})),title:"Sync Options"}}]:[],...s?.reconciledAt||s?.operationState?.finishedAt?[{id:"timing",data:{type:"info-grid",items:[...s?.reconciledAt?[{label:"Last Reconciled",value:Ib(s.reconciledAt)}]:[],...s?.operationState?.startedAt?[{label:"Operation Started",value:Ib(s.operationState.startedAt)}]:[],...s?.operationState?.finishedAt?[{label:"Operation Finished",value:Ib(s.operationState.finishedAt)}]:[]],columns:2}}]:[],...s?.health?.message?[{id:"health-message",title:"Health Message",data:{type:"info-grid",items:[{label:"Message",value:s.health.message}],columns:1}}]:[],...s?.operationState?.message?[{id:"operation-message",title:"Operation Message",data:{type:"info-grid",items:[{label:"Message",value:s.operationState.message}],columns:1}}]:[],...s?.summary?.images?.length?[{id:"images",title:"Images",data:{type:"container-images",containers:s.summary.images.map((g,m)=>({name:`image-${m+1}`,image:g}))}}]:[]]}},actions:[{id:"sync",label:"Sync",icon:f.jsx(pS,{size:14}),variant:"primary",confirm:{title:"Sync Application",message:"This will sync the application to match the desired state in Git. Continue?",confirmLabel:"Sync"},execute:async(t,e)=>{const n=e.metadata?.name,s=e.metadata?.namespace||"argocd";if(!n)throw new Error("Application name is required");await oE(t,n,s)},isDisabled:t=>t.status?.operationState?.phase==="Running"?"Sync already in progress":!1},{id:"sync-prune",label:"Sync (Prune)",icon:f.jsx(HI,{size:14}),variant:"warning",confirm:{title:"Sync with Prune",message:"This will sync the application and DELETE resources that are no longer in Git. This action cannot be undone. Continue?",confirmLabel:"Sync & Prune"},execute:async(t,e)=>{const n=e.metadata?.name,s=e.metadata?.namespace||"argocd";if(!n)throw new Error("Application name is required");await oE(t,n,s,{prune:!0})},isDisabled:t=>t.status?.operationState?.phase==="Running"?"Sync already in progress":!1},{id:"refresh",label:"Refresh",icon:f.jsx(Mn,{size:14}),variant:"secondary",execute:async(t,e)=>{const n=e.metadata?.name,s=e.metadata?.namespace||"argocd";if(!n)throw new Error("Application name is required");await cE(t,n,s)}},{id:"hard-refresh",label:"Hard Refresh",icon:f.jsx(a7,{size:14}),variant:"secondary",execute:async(t,e)=>{const n=e.metadata?.name,s=e.metadata?.namespace||"argocd";if(!n)throw new Error("Application name is required");await cE(t,n,s,!0)}}]};function SK(t){return!t||t.length===0?{status:"Unknown",level:"neutral"}:t.find(r=>r.type==="ErrorOccurred"&&r.status==="True")?{status:"Error",level:"error"}:t.find(r=>r.type==="ResourcesUpToDate")?.status==="True"?{status:"Healthy",level:"success"}:t.find(r=>r.type==="ParametersGenerated")?.status==="True"?{status:"Progressing",level:"warning"}:{status:"Unknown",level:"neutral"}}function kK(t){switch(t){case"success":return f.jsx(Qr,{size:14,className:"text-emerald-400"});case"warning":return f.jsx(Mn,{size:14,className:"text-amber-400"});case"error":return f.jsx(Si,{size:14,className:"text-red-400"});default:return f.jsx(pf,{size:14,className:"text-gray-400"})}}function CK(t){if(t.list){const e=t.list.elements?.length||0;return{name:"List",icon:f.jsx(x7,{size:12,className:"text-blue-400"}),details:`${e} element${e!==1?"s":""}`}}if(t.clusters)return{name:"Clusters",icon:f.jsx(Xr,{size:12,className:"text-purple-400"}),details:t.clusters.selector?.matchLabels?Object.entries(t.clusters.selector.matchLabels).map(([e,n])=>`${e}=${n}`).join(", "):"All clusters"};if(t.git){const e=t.git.directories&&t.git.directories.length>0,n=t.git.files&&t.git.files.length>0;return{name:n?"Git Files":"Git Directories",icon:f.jsx(u0,{size:12,className:"text-cyan-400"}),details:e?t.git.directories?.map(s=>s.path).join(", "):n?t.git.files?.map(s=>s.path).join(", "):t.git.revision||"HEAD"}}if(t.matrix){const e=t.matrix.generators?.length||0;return{name:"Matrix",icon:f.jsx(cl,{size:12,className:"text-amber-400"}),details:`${e} generator${e!==1?"s":""}`}}if(t.merge){const e=t.merge.generators?.length||0;return{name:"Merge",icon:f.jsx(cl,{size:12,className:"text-orange-400"}),details:`${e} generator${e!==1?"s":""}`}}return t.scmProvider?{name:`SCM Provider (${t.scmProvider.github?"GitHub":t.scmProvider.gitlab?"GitLab":t.scmProvider.bitbucket?"Bitbucket":t.scmProvider.bitbucketServer?"Bitbucket Server":t.scmProvider.gitea?"Gitea":t.scmProvider.azureDevOps?"Azure DevOps":"Unknown"})`,icon:f.jsx(MI,{size:12,className:"text-green-400"}),details:t.scmProvider.github?.organization||t.scmProvider.gitlab?.group||t.scmProvider.bitbucket?.owner||t.scmProvider.azureDevOps?.organization}:t.pullRequest?{name:`Pull Request (${t.pullRequest.github?"GitHub":t.pullRequest.gitlab?"GitLab":t.pullRequest.bitbucketServer?"Bitbucket Server":"Unknown"})`,icon:f.jsx(u0,{size:12,className:"text-pink-400"}),details:t.pullRequest.github?.repo||t.pullRequest.gitlab?.project||t.pullRequest.bitbucketServer?.repo}:t.clusterDecisionResource?{name:"Cluster Decision Resource",icon:f.jsx(e7,{size:12,className:"text-indigo-400"}),details:t.clusterDecisionResource.configMapRef}:{name:"Unknown",icon:f.jsx(pf,{size:12,className:"text-gray-400"})}}function NK(t){if(!t)return"Unknown";const e=t.match(/[:/]([^/:]+\/[^/:]+?)(?:\.git)?$/);return e?e[1]:t}function AK(t){if(!t)return"Unknown";const e=new Date(t),s=Math.floor((new Date().getTime()-e.getTime())/1e3);return s<60?`${s}s ago`:s<3600?`${Math.floor(s/60)}m ago`:s<86400?`${Math.floor(s/3600)}h ago`:`${Math.floor(s/86400)}d ago`}const EK={kinds:["ApplicationSet","ApplicationSets"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata;if(!n)return{sections:[]};const a=n.template,o=a?.spec?.source||a?.spec?.sources?.[0],c=SK(s?.conditions),h=s?.applicationStatus?.length||0,d=dr("ApplicationSet",s?.conditions);return{sections:[{id:"status",data:{type:"status-cards",items:[{label:"Status",value:c.status,status:c.level,icon:kK(c.level)},{label:"Applications",value:h,status:h>0?"success":"neutral",icon:f.jsx(fT,{size:14,className:h>0?"text-emerald-400":"text-gray-400"})},{label:"Generators",value:n.generators?.length||0,status:"neutral",icon:f.jsx(cl,{size:14,className:"text-blue-400"})}]}},...n.generators?.length?[{id:"generators",title:"Generators",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.generators.map((g,m)=>{const v=CK(g);return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-2.5 flex items-center gap-3",children:[f.jsx("div",{className:"p-1.5 bg-neutral-200 dark:bg-neutral-700/50 rounded",children:v.icon}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"text-xs font-medium text-neutral-900 dark:text-neutral-200",children:v.name}),v.details&&f.jsx("div",{className:"text-[10px] text-neutral-500 truncate",title:v.details,children:v.details})]})]},m)})})}}]:[],...s?.applicationStatus?.length?[{id:"applications",title:"Generated Applications",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-1 max-h-60 overflow-y-auto",children:s.applicationStatus.map((g,m)=>{const v=g.status==="Successful"||g.status==="Healthy"?"success":g.status==="Waiting"||g.status==="Progressing"?"warning":g.status==="Error"||g.status==="Failed"?"error":"neutral";return f.jsxs("div",{className:"flex items-center gap-2 text-xs bg-neutral-100 dark:bg-neutral-800/30 rounded px-2 py-1.5",children:[v==="success"&&f.jsx(Qr,{size:12,className:"text-emerald-400 shrink-0"}),v==="warning"&&f.jsx(Mn,{size:12,className:"text-amber-400 shrink-0"}),v==="error"&&f.jsx(Si,{size:12,className:"text-red-400 shrink-0"}),v==="neutral"&&f.jsx(pf,{size:12,className:"text-gray-400 shrink-0"}),f.jsx("span",{className:"text-neutral-700 dark:text-neutral-300 truncate flex-1",title:g.application,children:g.application||"Unknown"}),g.status&&f.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${v==="success"?"bg-emerald-500/20 text-emerald-400 border-emerald-500/30":v==="warning"?"bg-amber-500/20 text-amber-400 border-amber-500/30":v==="error"?"bg-red-500/20 text-red-400 border-red-500/30":"bg-gray-500/20 text-gray-400 border-gray-500/30"}`,children:g.status})]},g.application||m)})})}}]:[],...o?[{id:"template-source",title:"Template Source",data:{type:"info-grid",items:[{label:"Repository",value:NK(o.repoURL),color:"text-cyan-400"},{label:"Path",value:o.path||o.chart||"/",color:"text-purple-400"},{label:"Revision",value:o.targetRevision||"HEAD",color:"text-blue-400"}],columns:2}}]:[],...a?.spec?.destination?[{id:"template-destination",title:"Template Destination",data:{type:"info-grid",items:[{label:"Server",value:a.spec.destination.name||a.spec.destination.server||"{{server}}"},{label:"Namespace",value:a.spec.destination.namespace||"{{namespace}}",color:"text-cyan-400"},{label:"Project",value:a.spec.project||"default",color:"text-purple-400"}],columns:2}}]:[],...n.syncPolicy?[{id:"sync-policy",title:"Sync Policy",data:{type:"info-grid",items:[{label:"Preserve Resources on Deletion",value:n.syncPolicy.preserveResourcesOnDeletion?"Yes":"No",color:n.syncPolicy.preserveResourcesOnDeletion?"text-amber-400":void 0},...n.syncPolicy.applicationsSync?[{label:"Applications Sync",value:n.syncPolicy.applicationsSync,color:"text-blue-400"}]:[]],columns:2}}]:[],...n.strategy?[{id:"strategy",title:"Rollout Strategy",data:{type:"info-grid",items:[{label:"Type",value:n.strategy.type||"AllAtOnce",color:n.strategy.type==="RollingSync"?"text-cyan-400":void 0},...n.strategy.rollingSync?.steps?.length?[{label:"Steps",value:n.strategy.rollingSync.steps.length}]:[]],columns:2}}]:[],...n.goTemplate!==void 0?[{id:"template-options",title:"Template Options",data:{type:"info-grid",items:[{label:"Go Template",value:n.goTemplate?"Enabled":"Disabled",color:n.goTemplate?"text-emerald-400":"text-gray-400"},...n.goTemplateOptions?.length?[{label:"Options",value:n.goTemplateOptions.join(", ")}]:[]],columns:2}}]:[],...r?.creationTimestamp?[{id:"timing",data:{type:"info-grid",items:[{label:"Created",value:AK(r.creationTimestamp)}],columns:1}}]:[],...d.length>0?[{id:"conditions",data:{type:"conditions",items:d}}]:[]]}}};function jK(t){const e=t?.find(n=>n.type==="Ready");return e?{ready:e.status==="True",reason:e.reason,message:e.message}:{ready:!1}}function TK(t,e){return t?"success":e==="Issuing"||e==="Pending"?"warning":"error"}function RK(t,e){return t?f.jsx(Qr,{size:14,className:"text-emerald-400"}):e==="Issuing"||e==="Pending"?f.jsx(Mn,{size:14,className:"text-amber-400 animate-spin"}):f.jsx(Si,{size:14,className:"text-red-400"})}function OK(t){if(!t)return"Default (90d)";const e=t.match(/^(\d+)h$/);if(e){const n=parseInt(e[1],10);return n>=8760?`${Math.round(n/8760)}y`:n>=720?`${Math.round(n/720)}mo`:n>=24?`${Math.round(n/24)}d`:`${n}h`}return t}function vm(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function BK(t){if(!t)return{text:"Unknown",status:"neutral"};const e=new Date,s=new Date(t).getTime()-e.getTime(),r=Math.floor(s/(1e3*60*60*24));return s<0?{text:"Expired",status:"error"}:r<7?{text:`${r}d remaining`,status:"error"}:r<30?{text:`${r}d remaining`,status:"warning"}:r>365?{text:`${Math.floor(r/365)}y remaining`,status:"success"}:r>30?{text:`${Math.floor(r/30)}mo remaining`,status:"success"}:{text:`${r}d remaining`,status:"success"}}function MK(t){if(!t)return"RSA 2048";const e=t.algorithm??"RSA",n=t.size??(e==="ECDSA"?256:2048);return`${e} ${n}`}const DK={kinds:["Certificate","Certificates"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const{ready:r,reason:a}=jK(s?.conditions),o=BK(s?.notAfter),c=[{id:"status",data:{type:"status-cards",items:[{label:"Status",value:r?"Ready":a??"Not Ready",status:TK(r,a),icon:RK(r,a)},{label:"Expires",value:o.text,status:o.status,icon:f.jsx(oa,{size:14,className:o.status==="error"?"text-red-400":o.status==="warning"?"text-amber-400":"text-emerald-400"})},{label:"Type",value:n.isCA?"CA Certificate":"TLS Certificate",status:"neutral",icon:f.jsx(hu,{size:14,className:n.isCA?"text-purple-400":"text-blue-400"})},{label:"Revision",value:s?.revision??1,status:"neutral"}]}}];if(c.push({id:"details",title:"Certificate Details",data:{type:"info-grid",columns:2,items:[{label:"Secret Name",value:n.secretName},...n.commonName?[{label:"Common Name",value:n.commonName}]:[],{label:"Duration",value:OK(n.duration)},{label:"Algorithm",value:MK(n.privateKey)},...s?.notBefore?[{label:"Valid From",value:vm(s.notBefore)}]:[],...s?.notAfter?[{label:"Valid Until",value:vm(s.notAfter)}]:[],...s?.renewalTime?[{label:"Renewal Time",value:vm(s.renewalTime)}]:[]]}}),c.push({id:"issuer",title:"Issuer",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(gf,{size:14,className:"text-purple-400"}),f.jsx("span",{className:"text-sm font-medium text-purple-300",children:n.issuerRef.kind??"Issuer"})]}),f.jsx("div",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:n.issuerRef.name}),n.issuerRef.group&&f.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:n.issuerRef.group})]})}}),n.dnsNames?.length&&c.push({id:"dns-names",title:"DNS Names",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.dnsNames.map((h,d)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-blue-500/20 text-blue-300 border border-blue-500/30",children:h},d))})}}),n.ipAddresses?.length&&c.push({id:"ip-addresses",title:"IP Addresses",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.ipAddresses.map((h,d)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-cyan-500/20 text-cyan-300 border border-cyan-500/30",children:h},d))})}}),n.uris?.length&&c.push({id:"uris",title:"URIs",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-1",children:n.uris.map((h,d)=>f.jsx("div",{className:"text-xs text-neutral-700 dark:text-neutral-300 font-mono",children:h},d))})}}),n.emailAddresses?.length&&c.push({id:"email-addresses",title:"Email Addresses",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.emailAddresses.map((h,d)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-amber-500/20 text-amber-300 border border-amber-500/30",children:h},d))})}}),n.usages?.length&&c.push({id:"usages",title:"Key Usages",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.usages.map((h,d)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-neutral-200 dark:bg-neutral-700 text-neutral-700 dark:text-neutral-300",children:h},d))})}}),n.privateKey&&c.push({id:"private-key",title:"Private Key",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(xg,{size:14,className:"text-neutral-400"}),f.jsx("span",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Configuration"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-500",children:"Algorithm:"}),f.jsx("span",{className:"ml-1 text-neutral-700 dark:text-neutral-300",children:n.privateKey.algorithm??"RSA"})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-500",children:"Size:"}),f.jsx("span",{className:"ml-1 text-neutral-700 dark:text-neutral-300",children:n.privateKey.size??2048})]}),n.privateKey.encoding&&f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-500",children:"Encoding:"}),f.jsx("span",{className:"ml-1 text-neutral-700 dark:text-neutral-300",children:n.privateKey.encoding})]}),n.privateKey.rotationPolicy&&f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-500",children:"Rotation:"}),f.jsx("span",{className:"ml-1 text-neutral-700 dark:text-neutral-300",children:n.privateKey.rotationPolicy})]})]})]})}}),n.subject&&Object.keys(n.subject).some(h=>{const d=n.subject[h];return Array.isArray(d)?d.length>0:!!d})){const h=[];n.subject.organizations?.length&&h.push(`O=${n.subject.organizations.join(", ")}`),n.subject.organizationalUnits?.length&&h.push(`OU=${n.subject.organizationalUnits.join(", ")}`),n.subject.countries?.length&&h.push(`C=${n.subject.countries.join(", ")}`),n.subject.localities?.length&&h.push(`L=${n.subject.localities.join(", ")}`),n.subject.provinces?.length&&h.push(`ST=${n.subject.provinces.join(", ")}`),c.push({id:"subject",title:"Subject",data:{type:"custom",render:()=>f.jsx("div",{className:"text-xs text-neutral-700 dark:text-neutral-300 font-mono bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:h.join(", ")})}})}if(n.keystores){const h=[];n.keystores.jks?.create&&h.push("JKS"),n.keystores.pkcs12?.create&&h.push("PKCS#12"),h.length>0&&c.push({id:"keystores",title:"Keystores",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:h.map((d,g)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-green-500/20 text-green-300 border border-green-500/30",children:d},g))})}})}return s?.failedIssuanceAttempts&&s.failedIssuanceAttempts>0&&c.push({id:"failed-issuance",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 text-red-400",children:[f.jsx(xo,{size:14}),f.jsxs("span",{className:"text-sm font-medium",children:["Failed Issuance Attempts: ",s.failedIssuanceAttempts]})]}),s.lastFailureTime&&f.jsxs("div",{className:"text-xs text-neutral-500 mt-1",children:["Last failure: ",vm(s.lastFailureTime)]})]})}}),s?.conditions&&s.conditions.length>0&&c.push({id:"conditions",data:{type:"conditions",items:dr("Certificate",s.conditions)}}),{sections:c}}};var uE={};var hE;function LK(){if(hE)return uE;hE=1;var t;return(function(e){(function(n){var s=typeof globalThis=="object"?globalThis:typeof b5=="object"?b5:typeof self=="object"?self:typeof this=="object"?this:h(),r=a(e);typeof s.Reflect<"u"&&(r=a(s.Reflect,r)),n(r,s),typeof s.Reflect>"u"&&(s.Reflect=e);function a(d,g){return function(m,v){Object.defineProperty(d,m,{configurable:!0,writable:!0,value:v}),g&&g(m,v)}}function o(){try{return Function("return this;")()}catch{}}function c(){try{return(0,eval)("(function() { return this; })()")}catch{}}function h(){return o()||c()}})(function(n,s){var r=Object.prototype.hasOwnProperty,a=typeof Symbol=="function",o=a&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",c=a&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",h=typeof Object.create=="function",d={__proto__:[]}instanceof Array,g=!h&&!d,m={create:h?function(){return An(Object.create(null))}:d?function(){return An({__proto__:null})}:function(){return An({})},has:g?function(re,ae){return r.call(re,ae)}:function(re,ae){return ae in re},get:g?function(re,ae){return r.call(re,ae)?re[ae]:void 0}:function(re,ae){return re[ae]}},v=Object.getPrototypeOf(Function),y=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Ge(),_=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:it(),w=typeof WeakMap=="function"?WeakMap:wt(),S=a?Symbol.for("@reflect-metadata:registry"):void 0,k=Ot(),C=Kn(k);function E(re,ae,fe,Ce){if(N(fe)){if(!qe(re))throw new TypeError;if(!Qe(ae))throw new TypeError;return W(re,ae)}else{if(!qe(re))throw new TypeError;if(!ee(ae))throw new TypeError;if(!ee(Ce)&&!N(Ce)&&!Y(Ce))throw new TypeError;return Y(Ce)&&(Ce=void 0),fe=xe(fe),Q(re,ae,fe,Ce)}}n("decorate",E);function B(re,ae){function fe(Ce,Re){if(!ee(Ce))throw new TypeError;if(!N(Re)&&!nt(Re))throw new TypeError;z(re,ae,Ce,Re)}return fe}n("metadata",B);function D(re,ae,fe,Ce){if(!ee(fe))throw new TypeError;return N(Ce)||(Ce=xe(Ce)),z(re,ae,fe,Ce)}n("defineMetadata",D);function j(re,ae,fe){if(!ee(ae))throw new TypeError;return N(fe)||(fe=xe(fe)),V(re,ae,fe)}n("hasMetadata",j);function P(re,ae,fe){if(!ee(ae))throw new TypeError;return N(fe)||(fe=xe(fe)),M(re,ae,fe)}n("hasOwnMetadata",P);function U(re,ae,fe){if(!ee(ae))throw new TypeError;return N(fe)||(fe=xe(fe)),G(re,ae,fe)}n("getMetadata",U);function X(re,ae,fe){if(!ee(ae))throw new TypeError;return N(fe)||(fe=xe(fe)),q(re,ae,fe)}n("getOwnMetadata",X);function $(re,ae){if(!ee(re))throw new TypeError;return N(ae)||(ae=xe(ae)),O(re,ae)}n("getMetadataKeys",$);function Z(re,ae){if(!ee(re))throw new TypeError;return N(ae)||(ae=xe(ae)),T(re,ae)}n("getOwnMetadataKeys",Z);function F(re,ae,fe){if(!ee(ae))throw new TypeError;if(N(fe)||(fe=xe(fe)),!ee(ae))throw new TypeError;N(fe)||(fe=xe(fe));var Ce=_e(ae,fe,!1);return N(Ce)?!1:Ce.OrdinaryDeleteMetadata(re,ae,fe)}n("deleteMetadata",F);function W(re,ae){for(var fe=re.length-1;fe>=0;--fe){var Ce=re[fe],Re=Ce(ae);if(!N(Re)&&!Y(Re)){if(!Qe(Re))throw new TypeError;ae=Re}}return ae}function Q(re,ae,fe,Ce){for(var Re=re.length-1;Re>=0;--Re){var It=re[Re],Bt=It(ae,fe,Ce);if(!N(Bt)&&!Y(Bt)){if(!ee(Bt))throw new TypeError;Ce=Bt}}return Ce}function V(re,ae,fe){var Ce=M(re,ae,fe);if(Ce)return!0;var Re=at(ae);return Y(Re)?!1:V(re,Re,fe)}function M(re,ae,fe){var Ce=_e(ae,fe,!1);return N(Ce)?!1:Se(Ce.OrdinaryHasOwnMetadata(re,ae,fe))}function G(re,ae,fe){var Ce=M(re,ae,fe);if(Ce)return q(re,ae,fe);var Re=at(ae);if(!Y(Re))return G(re,Re,fe)}function q(re,ae,fe){var Ce=_e(ae,fe,!1);if(!N(Ce))return Ce.OrdinaryGetOwnMetadata(re,ae,fe)}function z(re,ae,fe,Ce){var Re=_e(fe,Ce,!0);Re.OrdinaryDefineOwnMetadata(re,ae,fe,Ce)}function O(re,ae){var fe=T(re,ae),Ce=at(re);if(Ce===null)return fe;var Re=O(Ce,ae);if(Re.length<=0)return fe;if(fe.length<=0)return Re;for(var It=new _,Bt=[],gt=0,Be=fe;gt<Be.length;gt++){var De=Be[gt],Pe=It.has(De);Pe||(It.add(De),Bt.push(De))}for(var ze=0,dt=Re;ze<dt.length;ze++){var De=dt[ze],Pe=It.has(De);Pe||(It.add(De),Bt.push(De))}return Bt}function T(re,ae){var fe=_e(re,ae,!1);return fe?fe.OrdinaryOwnMetadataKeys(re,ae):[]}function H(re){if(re===null)return 1;switch(typeof re){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return re===null?1:6;default:return 6}}function N(re){return re===void 0}function Y(re){return re===null}function oe(re){return typeof re=="symbol"}function ee(re){return typeof re=="object"?re!==null:typeof re=="function"}function de(re,ae){switch(H(re)){case 0:return re;case 1:return re;case 2:return re;case 3:return re;case 4:return re;case 5:return re}var fe="string",Ce=Et(re,o);if(Ce!==void 0){var Re=Ce.call(re,fe);if(ee(Re))throw new TypeError;return Re}return we(re)}function we(re,ae){var fe,Ce,Re;{var It=re.toString;if(je(It)){var Ce=It.call(re);if(!ee(Ce))return Ce}var fe=re.valueOf;if(je(fe)){var Ce=fe.call(re);if(!ee(Ce))return Ce}}throw new TypeError}function Se(re){return!!re}function Fe(re){return""+re}function xe(re){var ae=de(re);return oe(ae)?ae:Fe(ae)}function qe(re){return Array.isArray?Array.isArray(re):re instanceof Object?re instanceof Array:Object.prototype.toString.call(re)==="[object Array]"}function je(re){return typeof re=="function"}function Qe(re){return typeof re=="function"}function nt(re){switch(H(re)){case 3:return!0;case 4:return!0;default:return!1}}function Lt(re,ae){return re===ae||re!==re&&ae!==ae}function Et(re,ae){var fe=re[ae];if(fe!=null){if(!je(fe))throw new TypeError;return fe}}function qn(re){var ae=Et(re,c);if(!je(ae))throw new TypeError;var fe=ae.call(re);if(!ee(fe))throw new TypeError;return fe}function As(re){return re.value}function Ks(re){var ae=re.next();return ae.done?!1:ae}function et(re){var ae=re.return;ae&&ae.call(re)}function at(re){var ae=Object.getPrototypeOf(re);if(typeof re!="function"||re===v||ae!==v)return ae;var fe=re.prototype,Ce=fe&&Object.getPrototypeOf(fe);if(Ce==null||Ce===Object.prototype)return ae;var Re=Ce.constructor;return typeof Re!="function"||Re===re?ae:Re}function Zt(){var re;!N(S)&&typeof s.Reflect<"u"&&!(S in s.Reflect)&&typeof s.Reflect.defineMetadata=="function"&&(re=pe(s.Reflect));var ae,fe,Ce,Re=new w,It={registerProvider:Bt,getProvider:Be,setProvider:Pe};return It;function Bt(ze){if(!Object.isExtensible(It))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case re===ze:break;case N(ae):ae=ze;break;case ae===ze:break;case N(fe):fe=ze;break;case fe===ze:break;default:Ce===void 0&&(Ce=new _),Ce.add(ze);break}}function gt(ze,dt){if(!N(ae)){if(ae.isProviderFor(ze,dt))return ae;if(!N(fe)){if(fe.isProviderFor(ze,dt))return ae;if(!N(Ce))for(var Mt=qn(Ce);;){var sn=Ks(Mt);if(!sn)return;var Es=As(sn);if(Es.isProviderFor(ze,dt))return et(Mt),Es}}}if(!N(re)&&re.isProviderFor(ze,dt))return re}function Be(ze,dt){var Mt=Re.get(ze),sn;return N(Mt)||(sn=Mt.get(dt)),N(sn)&&(sn=gt(ze,dt),N(sn)||(N(Mt)&&(Mt=new y,Re.set(ze,Mt)),Mt.set(dt,sn))),sn}function De(ze){if(N(ze))throw new TypeError;return ae===ze||fe===ze||!N(Ce)&&Ce.has(ze)}function Pe(ze,dt,Mt){if(!De(Mt))throw new Error("Metadata provider not registered.");var sn=Be(ze,dt);if(sn!==Mt){if(!N(sn))return!1;var Es=Re.get(ze);N(Es)&&(Es=new y,Re.set(ze,Es)),Es.set(dt,Mt)}return!0}}function Ot(){var re;return!N(S)&&ee(s.Reflect)&&Object.isExtensible(s.Reflect)&&(re=s.Reflect[S]),N(re)&&(re=Zt()),!N(S)&&ee(s.Reflect)&&Object.isExtensible(s.Reflect)&&Object.defineProperty(s.Reflect,S,{enumerable:!1,configurable:!1,writable:!1,value:re}),re}function Kn(re){var ae=new w,fe={isProviderFor:function(De,Pe){var ze=ae.get(De);return N(ze)?!1:ze.has(Pe)},OrdinaryDefineOwnMetadata:Bt,OrdinaryHasOwnMetadata:Re,OrdinaryGetOwnMetadata:It,OrdinaryOwnMetadataKeys:gt,OrdinaryDeleteMetadata:Be};return k.registerProvider(fe),fe;function Ce(De,Pe,ze){var dt=ae.get(De),Mt=!1;if(N(dt)){if(!ze)return;dt=new y,ae.set(De,dt),Mt=!0}var sn=dt.get(Pe);if(N(sn)){if(!ze)return;if(sn=new y,dt.set(Pe,sn),!re.setProvider(De,Pe,fe))throw dt.delete(Pe),Mt&&ae.delete(De),new Error("Wrong provider for target.")}return sn}function Re(De,Pe,ze){var dt=Ce(Pe,ze,!1);return N(dt)?!1:Se(dt.has(De))}function It(De,Pe,ze){var dt=Ce(Pe,ze,!1);if(!N(dt))return dt.get(De)}function Bt(De,Pe,ze,dt){var Mt=Ce(ze,dt,!0);Mt.set(De,Pe)}function gt(De,Pe){var ze=[],dt=Ce(De,Pe,!1);if(N(dt))return ze;for(var Mt=dt.keys(),sn=qn(Mt),Es=0;;){var jo=Ks(sn);if(!jo)return ze.length=Es,ze;var yl=As(jo);try{ze[Es]=yl}catch(Fy){try{et(sn)}finally{throw Fy}}Es++}}function Be(De,Pe,ze){var dt=Ce(Pe,ze,!1);if(N(dt)||!dt.delete(De))return!1;if(dt.size===0){var Mt=ae.get(Pe);N(Mt)||(Mt.delete(ze),Mt.size===0&&ae.delete(Mt))}return!0}}function pe(re){var ae=re.defineMetadata,fe=re.hasOwnMetadata,Ce=re.getOwnMetadata,Re=re.getOwnMetadataKeys,It=re.deleteMetadata,Bt=new w,gt={isProviderFor:function(Be,De){var Pe=Bt.get(Be);return!N(Pe)&&Pe.has(De)?!0:Re(Be,De).length?(N(Pe)&&(Pe=new _,Bt.set(Be,Pe)),Pe.add(De),!0):!1},OrdinaryDefineOwnMetadata:ae,OrdinaryHasOwnMetadata:fe,OrdinaryGetOwnMetadata:Ce,OrdinaryOwnMetadataKeys:Re,OrdinaryDeleteMetadata:It};return gt}function _e(re,ae,fe){var Ce=k.getProvider(re,ae);if(!N(Ce))return Ce;if(fe){if(k.setProvider(re,ae,C))return C;throw new Error("Illegal state.")}}function Ge(){var re={},ae=[],fe=(function(){function gt(Be,De,Pe){this._index=0,this._keys=Be,this._values=De,this._selector=Pe}return gt.prototype["@@iterator"]=function(){return this},gt.prototype[c]=function(){return this},gt.prototype.next=function(){var Be=this._index;if(Be>=0&&Be<this._keys.length){var De=this._selector(this._keys[Be],this._values[Be]);return Be+1>=this._keys.length?(this._index=-1,this._keys=ae,this._values=ae):this._index++,{value:De,done:!1}}return{value:void 0,done:!0}},gt.prototype.throw=function(Be){throw this._index>=0&&(this._index=-1,this._keys=ae,this._values=ae),Be},gt.prototype.return=function(Be){return this._index>=0&&(this._index=-1,this._keys=ae,this._values=ae),{value:Be,done:!0}},gt})(),Ce=(function(){function gt(){this._keys=[],this._values=[],this._cacheKey=re,this._cacheIndex=-2}return Object.defineProperty(gt.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),gt.prototype.has=function(Be){return this._find(Be,!1)>=0},gt.prototype.get=function(Be){var De=this._find(Be,!1);return De>=0?this._values[De]:void 0},gt.prototype.set=function(Be,De){var Pe=this._find(Be,!0);return this._values[Pe]=De,this},gt.prototype.delete=function(Be){var De=this._find(Be,!1);if(De>=0){for(var Pe=this._keys.length,ze=De+1;ze<Pe;ze++)this._keys[ze-1]=this._keys[ze],this._values[ze-1]=this._values[ze];return this._keys.length--,this._values.length--,Lt(Be,this._cacheKey)&&(this._cacheKey=re,this._cacheIndex=-2),!0}return!1},gt.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=re,this._cacheIndex=-2},gt.prototype.keys=function(){return new fe(this._keys,this._values,Re)},gt.prototype.values=function(){return new fe(this._keys,this._values,It)},gt.prototype.entries=function(){return new fe(this._keys,this._values,Bt)},gt.prototype["@@iterator"]=function(){return this.entries()},gt.prototype[c]=function(){return this.entries()},gt.prototype._find=function(Be,De){if(!Lt(this._cacheKey,Be)){this._cacheIndex=-1;for(var Pe=0;Pe<this._keys.length;Pe++)if(Lt(this._keys[Pe],Be)){this._cacheIndex=Pe;break}}return this._cacheIndex<0&&De&&(this._cacheIndex=this._keys.length,this._keys.push(Be),this._values.push(void 0)),this._cacheIndex},gt})();return Ce;function Re(gt,Be){return gt}function It(gt,Be){return Be}function Bt(gt,Be){return[gt,Be]}}function it(){var re=(function(){function ae(){this._map=new y}return Object.defineProperty(ae.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),ae.prototype.has=function(fe){return this._map.has(fe)},ae.prototype.add=function(fe){return this._map.set(fe,fe),this},ae.prototype.delete=function(fe){return this._map.delete(fe)},ae.prototype.clear=function(){this._map.clear()},ae.prototype.keys=function(){return this._map.keys()},ae.prototype.values=function(){return this._map.keys()},ae.prototype.entries=function(){return this._map.entries()},ae.prototype["@@iterator"]=function(){return this.keys()},ae.prototype[c]=function(){return this.keys()},ae})();return re}function wt(){var re=16,ae=m.create(),fe=Ce();return(function(){function Be(){this._key=Ce()}return Be.prototype.has=function(De){var Pe=Re(De,!1);return Pe!==void 0?m.has(Pe,this._key):!1},Be.prototype.get=function(De){var Pe=Re(De,!1);return Pe!==void 0?m.get(Pe,this._key):void 0},Be.prototype.set=function(De,Pe){var ze=Re(De,!0);return ze[this._key]=Pe,this},Be.prototype.delete=function(De){var Pe=Re(De,!1);return Pe!==void 0?delete Pe[this._key]:!1},Be.prototype.clear=function(){this._key=Ce()},Be})();function Ce(){var Be;do Be="@@WeakMap@@"+gt();while(m.has(ae,Be));return ae[Be]=!0,Be}function Re(Be,De){if(!r.call(Be,fe)){if(!De)return;Object.defineProperty(Be,fe,{value:m.create()})}return Be[fe]}function It(Be,De){for(var Pe=0;Pe<De;++Pe)Be[Pe]=Math.random()*255|0;return Be}function Bt(Be){if(typeof Uint8Array=="function"){var De=new Uint8Array(Be);return typeof crypto<"u"?crypto.getRandomValues(De):typeof msCrypto<"u"?msCrypto.getRandomValues(De):It(De,Be),De}return It(new Array(Be),Be)}function gt(){var Be=Bt(re);Be[6]=Be[6]&79|64,Be[8]=Be[8]&191|128;for(var De="",Pe=0;Pe<re;++Pe){var ze=Be[Pe];(Pe===4||Pe===6||Pe===8)&&(De+="-"),ze<16&&(De+="0"),De+=ze.toString(16).toLowerCase()}return De}}function An(re){return re.__=void 0,delete re.__,re}})})(t||(t={})),uE}LK();const IK="[object ArrayBuffer]";class Oe{static isArrayBuffer(e){return Object.prototype.toString.call(e)===IK}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:e.byteLength===e.buffer.byteLength||e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,n){if(e.constructor===n)return e;if(this.isArrayBuffer(e))return new n(e);if(this.isArrayBufferView(e))return new n(e.buffer,e.byteOffset,e.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,n){const s=Oe.toUint8Array(e),r=Oe.toUint8Array(n);if(s.length!==r.byteLength)return!1;for(let a=0;a<s.length;a++)if(s[a]!==r[a])return!1;return!0}static concat(...e){let n;Array.isArray(e[0])&&!(e[1]instanceof Function)||Array.isArray(e[0])&&e[1]instanceof Function?n=e[0]:e[e.length-1]instanceof Function?n=e.slice(0,e.length-1):n=e;let s=0;for(const o of n)s+=o.byteLength;const r=new Uint8Array(s);let a=0;for(const o of n){const c=this.toUint8Array(o);r.set(c,a),a+=c.length}return e[e.length-1]instanceof Function?this.toView(r,e[e.length-1]):r.buffer}}const Pb="string",PK=/^[0-9a-f\s]+$/i,zK=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,$K=/^[a-zA-Z0-9-_]+$/;class dE{static fromString(e){const n=unescape(encodeURIComponent(e)),s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s.buffer}static toString(e){const n=Oe.toUint8Array(e);let s="";for(let a=0;a<n.length;a++)s+=String.fromCharCode(n[a]);return decodeURIComponent(escape(s))}}class ai{static toString(e,n=!1){const s=Oe.toArrayBuffer(e),r=new DataView(s);let a="";for(let o=0;o<s.byteLength;o+=2){const c=r.getUint16(o,n);a+=String.fromCharCode(c)}return a}static fromString(e,n=!1){const s=new ArrayBuffer(e.length*2),r=new DataView(s);for(let a=0;a<e.length;a++)r.setUint16(a*2,e.charCodeAt(a),n);return s}}class Ke{static isHex(e){return typeof e===Pb&&PK.test(e)}static isBase64(e){return typeof e===Pb&&zK.test(e)}static isBase64Url(e){return typeof e===Pb&&$K.test(e)}static ToString(e,n="utf8"){const s=Oe.toUint8Array(e);switch(n.toLowerCase()){case"utf8":return this.ToUtf8String(s);case"binary":return this.ToBinary(s);case"hex":return this.ToHex(s);case"base64":return this.ToBase64(s);case"base64url":return this.ToBase64Url(s);case"utf16le":return ai.toString(s,!0);case"utf16":case"utf16be":return ai.toString(s);default:throw new Error(`Unknown type of encoding '${n}'`)}}static FromString(e,n="utf8"){if(!e)return new ArrayBuffer(0);switch(n.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return ai.fromString(e,!0);case"utf16":case"utf16be":return ai.fromString(e);default:throw new Error(`Unknown type of encoding '${n}'`)}}static ToBase64(e){const n=Oe.toUint8Array(e);if(typeof btoa<"u"){const s=this.ToString(n,"binary");return btoa(s)}else return Buffer.from(n).toString("base64")}static FromBase64(e){const n=this.formatString(e);if(!n)return new ArrayBuffer(0);if(!Ke.isBase64(n))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return typeof atob<"u"?this.FromBinary(atob(n)):new Uint8Array(Buffer.from(n,"base64")).buffer}static FromBase64Url(e){const n=this.formatString(e);if(!n)return new ArrayBuffer(0);if(!Ke.isBase64Url(n))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(n.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,n=Ke.DEFAULT_UTF8_ENCODING){switch(n){case"ascii":return this.FromBinary(e);case"utf8":return dE.fromString(e);case"utf16":case"utf16be":return ai.fromString(e);case"utf16le":case"usc2":return ai.fromString(e,!0);default:throw new Error(`Unknown type of encoding '${n}'`)}}static ToUtf8String(e,n=Ke.DEFAULT_UTF8_ENCODING){switch(n){case"ascii":return this.ToBinary(e);case"utf8":return dE.toString(e);case"utf16":case"utf16be":return ai.toString(e);case"utf16le":case"usc2":return ai.toString(e,!0);default:throw new Error(`Unknown type of encoding '${n}'`)}}static FromBinary(e){const n=e.length,s=new Uint8Array(n);for(let r=0;r<n;r++)s[r]=e.charCodeAt(r);return s.buffer}static ToBinary(e){const n=Oe.toUint8Array(e);let s="";for(let r=0;r<n.length;r++)s+=String.fromCharCode(n[r]);return s}static ToHex(e){const n=Oe.toUint8Array(e);let s="";const r=n.length;for(let a=0;a<r;a++){const o=n[a];o<16&&(s+="0"),s+=o.toString(16)}return s}static FromHex(e){let n=this.formatString(e);if(!n)return new ArrayBuffer(0);if(!Ke.isHex(n))throw new TypeError("Argument 'hexString' is not HEX encoded");n.length%2&&(n=`0${n}`);const s=new Uint8Array(n.length/2);for(let r=0;r<n.length;r=r+2){const a=n.slice(r,r+2);s[r/2]=parseInt(a,16)}return s.buffer}static ToUtf16String(e,n=!1){return ai.toString(e,n)}static FromUtf16String(e,n=!1){return ai.fromString(e,n)}static Base64Padding(e){const n=4-e.length%4;if(n<4)for(let s=0;s<n;s++)e+="=";return e}static formatString(e){return e?.replace(/[\n\r\t ]/g,"")||""}}Ke.DEFAULT_UTF8_ENCODING="utf8";function HK(...t){const e=t.map(r=>r.byteLength).reduce((r,a)=>r+a),n=new Uint8Array(e);let s=0;return t.map(r=>new Uint8Array(r)).forEach(r=>{for(const a of r)n[s++]=a}),n.buffer}function l6(t,e){if(!(t&&e)||t.byteLength!==e.byteLength)return!1;const n=new Uint8Array(t),s=new Uint8Array(e);for(let r=0;r<t.byteLength;r++)if(n[r]!==s[r])return!1;return!0}function Kc(t,e){let n=0;if(t.length===1)return t[0];for(let s=t.length-1;s>=0;s--)n+=t[t.length-1-s]*Math.pow(2,e*s);return n}function ro(t,e,n=-1){const s=n;let r=t,a=0,o=Math.pow(2,e);for(let c=1;c<8;c++){if(t<o){let h;if(s<0)h=new ArrayBuffer(c),a=c;else{if(s<c)return new ArrayBuffer(0);h=new ArrayBuffer(s),a=s}const d=new Uint8Array(h);for(let g=c-1;g>=0;g--){const m=Math.pow(2,g*e);d[a-g-1]=Math.floor(r/m),r-=d[a-g-1]*m}return h}o*=Math.pow(2,e)}return new ArrayBuffer(0)}function Zx(...t){let e=0,n=0;for(const a of t)e+=a.length;const s=new ArrayBuffer(e),r=new Uint8Array(s);for(const a of t)r.set(a,n),n+=a.length;return r}function o6(){const t=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const c=t[0]===255&&t[1]&128,h=t[0]===0&&(t[1]&128)===0;(c||h)&&this.warnings.push("Needlessly long format")}const e=new ArrayBuffer(this.valueHex.byteLength),n=new Uint8Array(e);for(let c=0;c<this.valueHex.byteLength;c++)n[c]=0;n[0]=t[0]&128;const s=Kc(n,8),r=new ArrayBuffer(this.valueHex.byteLength),a=new Uint8Array(r);for(let c=0;c<this.valueHex.byteLength;c++)a[c]=t[c];return a[0]&=127,Kc(a,8)-s}function UK(t){const e=t<0?t*-1:t;let n=128;for(let s=1;s<8;s++){if(e<=n){if(t<0){const o=n-e,c=ro(o,8,s),h=new Uint8Array(c);return h[0]|=128,c}let r=ro(e,8,s),a=new Uint8Array(r);if(a[0]&128){const o=r.slice(0),c=new Uint8Array(o);r=new ArrayBuffer(r.byteLength+1),a=new Uint8Array(r);for(let h=0;h<o.byteLength;h++)a[h+1]=c[h];a[0]=0}return r}n*=Math.pow(2,8)}return new ArrayBuffer(0)}function VK(t,e){if(t.byteLength!==e.byteLength)return!1;const n=new Uint8Array(t),s=new Uint8Array(e);for(let r=0;r<n.length;r++)if(n[r]!==s[r])return!1;return!0}function lr(t,e){const n=t.toString(10);if(e<n.length)return"";const s=e-n.length,r=new Array(s);for(let o=0;o<s;o++)r[o]="0";return r.join("").concat(n)}function A0(){if(typeof BigInt>"u")throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function h2(t){let e=0,n=0;for(let r=0;r<t.length;r++){const a=t[r];e+=a.byteLength}const s=new Uint8Array(e);for(let r=0;r<t.length;r++){const a=t[r];s.set(new Uint8Array(a),n),n+=a.byteLength}return s.buffer}function ha(t,e,n,s){return e instanceof Uint8Array?e.byteLength?n<0?(t.error="Wrong parameter: inputOffset less than zero",!1):s<0?(t.error="Wrong parameter: inputLength less than zero",!1):e.byteLength-n-s<0?(t.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):!0:(t.error="Wrong parameter: inputBuffer has zero length",!1):(t.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class zg{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return h2(this.items)}}const Rh=[new Uint8Array([1])],fE="0123456789",zb="name",pE="valueHexView",FK="isHexOnly",qK="idBlock",KK="tagClass",WK="tagNumber",GK="isConstructed",YK="fromBER",XK="toBER",JK="local",$s="",Ci=new ArrayBuffer(0),$g=new Uint8Array(0),Xd="EndOfContent",c6="OCTET STRING",u6="BIT STRING";function Ni(t){var e;return e=class extends t{get valueHex(){return this.valueHexView.slice().buffer}set valueHex(s){this.valueHexView=new Uint8Array(s)}constructor(...s){var r;super(...s);const a=s[0]||{};this.isHexOnly=(r=a.isHexOnly)!==null&&r!==void 0?r:!1,this.valueHexView=a.valueHex?Oe.toUint8Array(a.valueHex):$g}fromBER(s,r,a){const o=s instanceof ArrayBuffer?new Uint8Array(s):s;if(!ha(this,o,r,a))return-1;const c=r+a;return this.valueHexView=o.subarray(r,c),this.valueHexView.length?(this.blockLength=a,c):(this.warnings.push("Zero buffer length"),r)}toBER(s=!1){return this.isHexOnly?s?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",Ci)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:Ke.ToHex(this.valueHexView)}}},e.NAME="hexBlock",e}class ko{static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}constructor({blockLength:e=0,error:n=$s,warnings:s=[],valueBeforeDecode:r=$g}={}){this.blockLength=e,this.error=n,this.warnings=s,this.valueBeforeDecodeView=Oe.toUint8Array(r)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:Ke.ToHex(this.valueBeforeDecodeView)}}}ko.NAME="baseBlock";class ks extends ko{fromBER(e,n,s){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,n){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}ks.NAME="valueBlock";class h6 extends Ni(ko){constructor({idBlock:e={}}={}){var n,s,r,a;super(),e?(this.isHexOnly=(n=e.isHexOnly)!==null&&n!==void 0?n:!1,this.valueHexView=e.valueHex?Oe.toUint8Array(e.valueHex):$g,this.tagClass=(s=e.tagClass)!==null&&s!==void 0?s:-1,this.tagNumber=(r=e.tagNumber)!==null&&r!==void 0?r:-1,this.isConstructed=(a=e.isConstructed)!==null&&a!==void 0?a:!1):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let n=0;switch(this.tagClass){case 1:n|=0;break;case 2:n|=64;break;case 3:n|=128;break;case 4:n|=192;break;default:return this.error="Unknown tag class",Ci}if(this.isConstructed&&(n|=32),this.tagNumber<31&&!this.isHexOnly){const r=new Uint8Array(1);if(!e){let a=this.tagNumber;a&=31,n|=a,r[0]=n}return r.buffer}if(!this.isHexOnly){const r=ro(this.tagNumber,7),a=new Uint8Array(r),o=r.byteLength,c=new Uint8Array(o+1);if(c[0]=n|31,!e){for(let h=0;h<o-1;h++)c[h+1]=a[h]|128;c[o]=a[o-1]}return c.buffer}const s=new Uint8Array(this.valueHexView.byteLength+1);if(s[0]=n|31,!e){const r=this.valueHexView;for(let a=0;a<r.length-1;a++)s[a+1]=r[a]|128;s[this.valueHexView.byteLength]=r[r.length-1]}return s.buffer}fromBER(e,n,s){const r=Oe.toUint8Array(e);if(!ha(this,r,n,s))return-1;const a=r.subarray(n,n+s);if(a.length===0)return this.error="Zero buffer length",-1;switch(a[0]&192){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(a[0]&32)===32,this.isHexOnly=!1;const c=a[0]&31;if(c!==31)this.tagNumber=c,this.blockLength=1;else{let h=1,d=this.valueHexView=new Uint8Array(255),g=255;for(;a[h]&128;){if(d[h-1]=a[h]&127,h++,h>=a.length)return this.error="End of input reached before message was fully decoded",-1;if(h===g){g+=255;const v=new Uint8Array(g);for(let y=0;y<d.length;y++)v[y]=d[y];d=this.valueHexView=new Uint8Array(g)}}this.blockLength=h+1,d[h-1]=a[h]&127;const m=new Uint8Array(h);for(let v=0;v<h;v++)m[v]=d[v];d=this.valueHexView=new Uint8Array(h),d.set(m),this.blockLength<=9?this.tagNumber=Kc(d,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(this.tagClass===1&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return n+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}h6.NAME="identificationBlock";class d6 extends ko{constructor({lenBlock:e={}}={}){var n,s,r;super(),this.isIndefiniteForm=(n=e.isIndefiniteForm)!==null&&n!==void 0?n:!1,this.longFormUsed=(s=e.longFormUsed)!==null&&s!==void 0?s:!1,this.length=(r=e.length)!==null&&r!==void 0?r:0}fromBER(e,n,s){const r=Oe.toUint8Array(e);if(!ha(this,r,n,s))return-1;const a=r.subarray(n,n+s);if(a.length===0)return this.error="Zero buffer length",-1;if(a[0]===255)return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=a[0]===128,this.isIndefiniteForm)return this.blockLength=1,n+this.blockLength;if(this.longFormUsed=!!(a[0]&128),this.longFormUsed===!1)return this.length=a[0],this.blockLength=1,n+this.blockLength;const o=a[0]&127;if(o>8)return this.error="Too big integer",-1;if(o+1>a.length)return this.error="End of input reached before message was fully decoded",-1;const c=n+1,h=r.subarray(c,c+o);return h[o-1]===0&&this.warnings.push("Needlessly long encoded length"),this.length=Kc(h,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=o+1,n+this.blockLength}toBER(e=!1){let n,s;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return n=new ArrayBuffer(1),e===!1&&(s=new Uint8Array(n),s[0]=128),n;if(this.longFormUsed){const r=ro(this.length,8);if(r.byteLength>127)return this.error="Too big length",Ci;if(n=new ArrayBuffer(r.byteLength+1),e)return n;const a=new Uint8Array(r);s=new Uint8Array(n),s[0]=r.byteLength|128;for(let o=0;o<r.byteLength;o++)s[o+1]=a[o];return n}return n=new ArrayBuffer(1),e===!1&&(s=new Uint8Array(n),s[0]=this.length),n}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}d6.NAME="lengthBlock";const $e={};class as extends ko{constructor({name:e=$s,optional:n=!1,primitiveSchema:s,...r}={},a){super(r),this.name=e,this.optional=n,s&&(this.primitiveSchema=s),this.idBlock=new h6(r),this.lenBlock=new d6(r),this.valueBlock=a?new a(r):new ks(r)}fromBER(e,n,s){const r=this.valueBlock.fromBER(e,n,this.lenBlock.isIndefiniteForm?s:this.lenBlock.length);return r===-1?(this.error=this.valueBlock.error,r):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}toBER(e,n){const s=n||new zg;n||f6(this);const r=this.idBlock.toBER(e);if(s.write(r),this.lenBlock.isIndefiniteForm)s.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,s),s.write(new ArrayBuffer(2));else{const a=this.valueBlock.toBER(e);this.lenBlock.length=a.byteLength;const o=this.lenBlock.toBER(e);s.write(o),s.write(a)}return n?Ci:s.final()}toJSON(){const e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return e==="ascii"?this.onAsciiEncoding():Ke.ToHex(this.toBER())}onAsciiEncoding(){const e=this.constructor.NAME,n=Ke.ToHex(this.valueBlock.valueBeforeDecodeView);return`${e} : ${n}`}isEqual(e){if(this===e)return!0;if(!(e instanceof this.constructor))return!1;const n=this.toBER(),s=e.toBER();return VK(n,s)}}as.NAME="BaseBlock";function f6(t){var e;if(t instanceof $e.Constructed)for(const n of t.valueBlock.value)f6(n)&&(t.lenBlock.isIndefiniteForm=!0);return!!(!((e=t.lenBlock)===null||e===void 0)&&e.isIndefiniteForm)}class d2 extends as{getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}constructor({value:e=$s,...n}={},s){super(n,s),e&&this.fromString(e)}fromBER(e,n,s){const r=this.valueBlock.fromBER(e,n,this.lenBlock.isIndefiniteForm?s:this.lenBlock.length);return r===-1?(this.error=this.valueBlock.error,r):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}d2.NAME="BaseStringBlock";class p6 extends Ni(ks){constructor({isHexOnly:e=!0,...n}={}){super(n),this.isHexOnly=e}}p6.NAME="PrimitiveValueBlock";var m6;class Sf extends as{constructor(e={}){super(e,p6),this.idBlock.isConstructed=!1}}m6=Sf;$e.Primitive=m6;Sf.NAME="PRIMITIVE";function QK(t,e){if(t instanceof e)return t;const n=new e;return n.idBlock=t.idBlock,n.lenBlock=t.lenBlock,n.warnings=t.warnings,n.valueBeforeDecodeView=t.valueBeforeDecodeView,n}function yu(t,e=0,n=t.length){const s=e;let r=new as({},ks);const a=new ko;if(!ha(a,t,e,n))return r.error=a.error,{offset:-1,result:r};if(!t.subarray(e,e+n).length)return r.error="Zero buffer length",{offset:-1,result:r};let c=r.idBlock.fromBER(t,e,n);if(r.idBlock.warnings.length&&r.warnings.concat(r.idBlock.warnings),c===-1)return r.error=r.idBlock.error,{offset:-1,result:r};if(e=c,n-=r.idBlock.blockLength,c=r.lenBlock.fromBER(t,e,n),r.lenBlock.warnings.length&&r.warnings.concat(r.lenBlock.warnings),c===-1)return r.error=r.lenBlock.error,{offset:-1,result:r};if(e=c,n-=r.lenBlock.blockLength,!r.idBlock.isConstructed&&r.lenBlock.isIndefiniteForm)return r.error="Indefinite length form used for primitive encoding form",{offset:-1,result:r};let h=as;switch(r.idBlock.tagClass){case 1:if(r.idBlock.tagNumber>=37&&r.idBlock.isHexOnly===!1)return r.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:r};switch(r.idBlock.tagNumber){case 0:if(r.idBlock.isConstructed&&r.lenBlock.length>0)return r.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:r};h=$e.EndOfContent;break;case 1:h=$e.Boolean;break;case 2:h=$e.Integer;break;case 3:h=$e.BitString;break;case 4:h=$e.OctetString;break;case 5:h=$e.Null;break;case 6:h=$e.ObjectIdentifier;break;case 10:h=$e.Enumerated;break;case 12:h=$e.Utf8String;break;case 13:h=$e.RelativeObjectIdentifier;break;case 14:h=$e.TIME;break;case 15:return r.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:r};case 16:h=$e.Sequence;break;case 17:h=$e.Set;break;case 18:h=$e.NumericString;break;case 19:h=$e.PrintableString;break;case 20:h=$e.TeletexString;break;case 21:h=$e.VideotexString;break;case 22:h=$e.IA5String;break;case 23:h=$e.UTCTime;break;case 24:h=$e.GeneralizedTime;break;case 25:h=$e.GraphicString;break;case 26:h=$e.VisibleString;break;case 27:h=$e.GeneralString;break;case 28:h=$e.UniversalString;break;case 29:h=$e.CharacterString;break;case 30:h=$e.BmpString;break;case 31:h=$e.DATE;break;case 32:h=$e.TimeOfDay;break;case 33:h=$e.DateTime;break;case 34:h=$e.Duration;break;default:{const d=r.idBlock.isConstructed?new $e.Constructed:new $e.Primitive;d.idBlock=r.idBlock,d.lenBlock=r.lenBlock,d.warnings=r.warnings,r=d}}break;default:h=r.idBlock.isConstructed?$e.Constructed:$e.Primitive}return r=QK(r,h),c=r.fromBER(t,e,r.lenBlock.isIndefiniteForm?n:r.lenBlock.length),r.valueBeforeDecodeView=t.subarray(s,s+r.blockLength),{offset:c,result:r}}function Hc(t){if(!t.byteLength){const e=new as({},ks);return e.error="Input buffer has zero length",{offset:-1,result:e}}return yu(Oe.toUint8Array(t).slice(),0,t.byteLength)}function ZK(t,e){return t?1:e}class rl extends ks{constructor({value:e=[],isIndefiniteForm:n=!1,...s}={}){super(s),this.value=e,this.isIndefiniteForm=n}fromBER(e,n,s){const r=Oe.toUint8Array(e);if(!ha(this,r,n,s))return-1;if(this.valueBeforeDecodeView=r.subarray(n,n+s),this.valueBeforeDecodeView.length===0)return this.warnings.push("Zero buffer length"),n;let a=n;for(;ZK(this.isIndefiniteForm,s)>0;){const o=yu(r,a,s);if(o.offset===-1)return this.error=o.result.error,this.warnings.concat(o.result.warnings),-1;if(a=o.offset,this.blockLength+=o.result.blockLength,s-=o.result.blockLength,this.value.push(o.result),this.isIndefiniteForm&&o.result.constructor.NAME===Xd)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===Xd?this.value.pop():this.warnings.push("No EndOfContent block encoded")),a}toBER(e,n){const s=n||new zg;for(let r=0;r<this.value.length;r++)this.value[r].toBER(e,s);return n?Ci:s.final()}toJSON(){const e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const n of this.value)e.value.push(n.toJSON());return e}}rl.NAME="ConstructedValueBlock";var g6;class _s extends as{constructor(e={}){super(e,rl),this.idBlock.isConstructed=!0}fromBER(e,n,s){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const r=this.valueBlock.fromBER(e,n,this.lenBlock.isIndefiniteForm?s:this.lenBlock.length);return r===-1?(this.error=this.valueBlock.error,r):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}onAsciiEncoding(){const e=[];for(const s of this.valueBlock.value)e.push(s.toString("ascii").split(`
`).map(r=>`  ${r}`).join(`
`));const n=this.idBlock.tagClass===3?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${n} :
${e.join(`
`)}`:`${n} :`}}g6=_s;$e.Constructed=g6;_s.NAME="CONSTRUCTED";class y6 extends ks{fromBER(e,n,s){return n}toBER(e){return Ci}}y6.override="EndOfContentValueBlock";var v6;class f2 extends as{constructor(e={}){super(e,y6),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}v6=f2;$e.EndOfContent=v6;f2.NAME=Xd;var b6;class io extends as{constructor(e={}){super(e,ks),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,n,s){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=s,n+s>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):n+s}toBER(e,n){const s=new ArrayBuffer(2);if(!e){const r=new Uint8Array(s);r[0]=5,r[1]=0}return n&&n.write(s),s}onAsciiEncoding(){return`${this.constructor.NAME}`}}b6=io;$e.Null=b6;io.NAME="NULL";class x6 extends Ni(ks){get value(){for(const e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}constructor({value:e,...n}={}){super(n),n.valueHex?this.valueHexView=Oe.toUint8Array(n.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}fromBER(e,n,s){const r=Oe.toUint8Array(e);return ha(this,r,n,s)?(this.valueHexView=r.subarray(n,n+s),s>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,o6.call(this),this.blockLength=s,n+s):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}x6.NAME="BooleanValueBlock";var _6;let Hg=class extends as{getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}constructor(e={}){super(e,x6),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}};_6=Hg;$e.Boolean=_6;Hg.NAME="BOOLEAN";class w6 extends Ni(rl){constructor({isConstructed:e=!1,...n}={}){super(n),this.isConstructed=e}fromBER(e,n,s){let r=0;if(this.isConstructed){if(this.isHexOnly=!1,r=rl.prototype.fromBER.call(this,e,n,s),r===-1)return r;for(let a=0;a<this.value.length;a++){const o=this.value[a].constructor.NAME;if(o===Xd){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(o!==c6)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,r=super.fromBER(e,n,s),this.blockLength=s;return r}toBER(e,n){return this.isConstructed?rl.prototype.toBER.call(this,e,n):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}w6.NAME="OctetStringValueBlock";var p2;let Ql=class extends as{constructor({idBlock:e={},lenBlock:n={},...s}={}){var r,a;(r=s.isConstructed)!==null&&r!==void 0||(s.isConstructed=!!(!((a=s.value)===null||a===void 0)&&a.length)),super({idBlock:{isConstructed:s.isConstructed,...e},lenBlock:{...n,isIndefiniteForm:!!s.isIndefiniteForm},...s},w6),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,n,s){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,s===0)return this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),n;if(!this.valueBlock.isConstructed){const a=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(n,n+s);try{if(a.byteLength){const o=yu(a,0,a.byteLength);o.offset!==-1&&o.offset===s&&(this.valueBlock.value=[o.result])}}catch{}}return super.fromBER(e,n,s)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return _s.prototype.onAsciiEncoding.call(this);const e=this.constructor.NAME,n=Ke.ToHex(this.valueBlock.valueHexView);return`${e} : ${n}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const e=[];for(const n of this.valueBlock.value)n instanceof p2&&e.push(n.valueBlock.valueHexView);return Oe.concat(e)}};p2=Ql;$e.OctetString=p2;Ql.NAME=c6;class S6 extends Ni(rl){constructor({unusedBits:e=0,isConstructed:n=!1,...s}={}){super(s),this.unusedBits=e,this.isConstructed=n,this.blockLength=this.valueHexView.byteLength}fromBER(e,n,s){if(!s)return n;let r=-1;if(this.isConstructed){if(r=rl.prototype.fromBER.call(this,e,n,s),r===-1)return r;for(const c of this.value){const h=c.constructor.NAME;if(h===Xd){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(h!==u6)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const d=c.valueBlock;if(this.unusedBits>0&&d.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=d.unusedBits}return r}const a=Oe.toUint8Array(e);if(!ha(this,a,n,s))return-1;const o=a.subarray(n,n+s);if(this.unusedBits=o[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const c=o.subarray(1);try{if(c.byteLength){const h=yu(c,0,c.byteLength);h.offset!==-1&&h.offset===s-1&&(this.value=[h.result])}}catch{}}return this.valueHexView=o.subarray(1),this.blockLength=o.length,n+s}toBER(e,n){if(this.isConstructed)return rl.prototype.toBER.call(this,e,n);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength){const r=new Uint8Array(1);return r[0]=0,r.buffer}const s=new Uint8Array(this.valueHexView.length+1);return s[0]=this.unusedBits,s.set(this.valueHexView,1),s.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}S6.NAME="BitStringValueBlock";var k6;let Zl=class extends as{constructor({idBlock:e={},lenBlock:n={},...s}={}){var r,a;(r=s.isConstructed)!==null&&r!==void 0||(s.isConstructed=!!(!((a=s.value)===null||a===void 0)&&a.length)),super({idBlock:{isConstructed:s.isConstructed,...e},lenBlock:{...n,isIndefiniteForm:!!s.isIndefiniteForm},...s},S6),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,n,s){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,n,s)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return _s.prototype.onAsciiEncoding.call(this);{const e=[],n=this.valueBlock.valueHexView;for(const o of n)e.push(o.toString(2).padStart(8,"0"));const s=e.join(""),r=this.constructor.NAME,a=s.substring(0,s.length-this.valueBlock.unusedBits);return`${r} : ${a}`}}};k6=Zl;$e.BitString=k6;Zl.NAME=u6;var C6;function eW(t,e){const n=new Uint8Array([0]),s=new Uint8Array(t),r=new Uint8Array(e);let a=s.slice(0);const o=a.length-1,c=r.slice(0),h=c.length-1;let d=0;const g=h<o?o:h;let m=0;for(let v=g;v>=0;v--,m++)!0===m<c.length?d=a[o-m]+c[h-m]+n[0]:d=a[o-m]+n[0],n[0]=d/10,!0===m>=a.length?a=Zx(new Uint8Array([d%10]),a):a[o-m]=d%10;return n[0]>0&&(a=Zx(n,a)),a}function mE(t){if(t>=Rh.length)for(let e=Rh.length;e<=t;e++){const n=new Uint8Array([0]);let s=Rh[e-1].slice(0);for(let r=s.length-1;r>=0;r--){const a=new Uint8Array([(s[r]<<1)+n[0]]);n[0]=a[0]/10,s[r]=a[0]%10}n[0]>0&&(s=Zx(n,s)),Rh.push(s)}return Rh[t]}function tW(t,e){let n=0;const s=new Uint8Array(t),r=new Uint8Array(e),a=s.slice(0),o=a.length-1,c=r.slice(0),h=c.length-1;let d,g=0;for(let m=h;m>=0;m--,g++)d=a[o-g]-c[h-g]-n,!0===d<0?(n=1,a[o-g]=d+10):(n=0,a[o-g]=d);if(n>0)for(let m=o-h+1;m>=0;m--,g++)if(d=a[o-g]-n,d<0)n=1,a[o-g]=d+10;else{n=0,a[o-g]=d;break}return a.slice()}class m2 extends Ni(ks){setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=o6.call(this)))}constructor({value:e,...n}={}){super(n),this._valueDec=0,n.valueHex&&this.setValueHex(),e!==void 0&&(this.valueDec=e)}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(UK(e))}get valueDec(){return this._valueDec}fromDER(e,n,s,r=0){const a=this.fromBER(e,n,s);if(a===-1)return a;const o=this.valueHexView;return o[0]===0&&(o[1]&128)!==0?this.valueHexView=o.subarray(1):r!==0&&o.length<r&&(r-o.length>1&&(r=o.length+1),this.valueHexView=o.subarray(r-o.length)),a}toDER(e=!1){const n=this.valueHexView;switch(!0){case(n[0]&128)!==0:{const s=new Uint8Array(this.valueHexView.length+1);s[0]=0,s.set(n,1),this.valueHexView=s}break;case(n[0]===0&&(n[1]&128)===0):this.valueHexView=this.valueHexView.subarray(1);break}return this.toBER(e)}fromBER(e,n,s){const r=super.fromBER(e,n,s);return r===-1||this.setValueHex(),r}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const e=this.valueHexView.length*8-1;let n=new Uint8Array(this.valueHexView.length*8/3),s=0,r;const a=this.valueHexView;let o="",c=!1;for(let h=a.byteLength-1;h>=0;h--){r=a[h];for(let d=0;d<8;d++)(r&1)===1&&(s===e?(n=tW(mE(s),n),o="-"):n=eW(n,mE(s))),s++,r>>=1}for(let h=0;h<n.length;h++)n[h]&&(c=!0),c&&(o+=fE.charAt(n[h]));return c===!1&&(o+=fE.charAt(0)),o}}C6=m2;m2.NAME="IntegerValueBlock";Object.defineProperty(C6.prototype,"valueHex",{set:function(t){this.valueHexView=new Uint8Array(t),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});var Od;class vu extends as{constructor(e={}){super(e,m2),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return A0(),BigInt(this.valueBlock.toString())}static fromBigInt(e){A0();const n=BigInt(e),s=new zg,r=n.toString(16).replace(/^-/,""),a=new Uint8Array(Ke.FromHex(r));if(n<0){const c=new Uint8Array(a.length+(a[0]&128?1:0));c[0]|=128;const d=BigInt(`0x${Ke.ToHex(c)}`)+n,g=Oe.toUint8Array(Ke.FromHex(d.toString(16)));g[0]|=128,s.write(g)}else a[0]&128&&s.write(new Uint8Array([0])),s.write(a);return new Od({valueHex:s.final()})}convertToDER(){const e=new Od({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new Od({valueHex:this.valueBlock.valueHexView[0]===0?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}Od=vu;$e.Integer=Od;vu.NAME="INTEGER";var N6;class Ug extends vu{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}N6=Ug;$e.Enumerated=N6;Ug.NAME="ENUMERATED";class e_ extends Ni(ks){constructor({valueDec:e=-1,isFirstSid:n=!1,...s}={}){super(s),this.valueDec=e,this.isFirstSid=n}fromBER(e,n,s){if(!s)return n;const r=Oe.toUint8Array(e);if(!ha(this,r,n,s))return-1;const a=r.subarray(n,n+s);this.valueHexView=new Uint8Array(s);for(let c=0;c<s&&(this.valueHexView[c]=a[c]&127,this.blockLength++,(a[c]&128)!==0);c++);const o=new Uint8Array(this.blockLength);for(let c=0;c<this.blockLength;c++)o[c]=this.valueHexView[c];return this.valueHexView=o,(a[this.blockLength-1]&128)!==0?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=Kc(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),n+this.blockLength)}set valueBigInt(e){A0();let n=BigInt(e).toString(2);for(;n.length%7;)n="0"+n;const s=new Uint8Array(n.length/7);for(let r=0;r<s.length;r++)s[r]=parseInt(n.slice(r*7,r*7+7),2)+(r+1<s.length?128:0);this.fromBER(s.buffer,0,s.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const r=this.valueHexView,a=new Uint8Array(this.blockLength);for(let o=0;o<this.blockLength-1;o++)a[o]=r[o]|128;return a[this.blockLength-1]=r[this.blockLength-1],a.buffer}const n=ro(this.valueDec,7);if(n.byteLength===0)return this.error="Error during encoding SID value",Ci;const s=new Uint8Array(n.byteLength);if(!e){const r=new Uint8Array(n),a=n.byteLength-1;for(let o=0;o<a;o++)s[o]=r[o]|128;s[a]=r[a]}return s}toString(){let e="";if(this.isHexOnly)e=Ke.ToHex(this.valueHexView);else if(this.isFirstSid){let n=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",n-=40):(e="2.",n-=80),e+=n.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}e_.NAME="sidBlock";class A6 extends ks{constructor({value:e=$s,...n}={}){super(n),this.value=[],e&&this.fromString(e)}fromBER(e,n,s){let r=n;for(;s>0;){const a=new e_;if(r=a.fromBER(e,r,s),r===-1)return this.blockLength=0,this.error=a.error,r;this.value.length===0&&(a.isFirstSid=!0),this.blockLength+=a.blockLength,s-=a.blockLength,this.value.push(a)}return r}toBER(e){const n=[];for(let s=0;s<this.value.length;s++){const r=this.value[s].toBER(e);if(r.byteLength===0)return this.error=this.value[s].error,Ci;n.push(r)}return h2(n)}fromString(e){this.value=[];let n=0,s=0,r="",a=!1;do if(s=e.indexOf(".",n),s===-1?r=e.substring(n):r=e.substring(n,s),n=s+1,a){const o=this.value[0];let c=0;switch(o.valueDec){case 0:break;case 1:c=40;break;case 2:c=80;break;default:this.value=[];return}const h=parseInt(r,10);if(isNaN(h))return;o.valueDec=h+c,a=!1}else{const o=new e_;if(r>Number.MAX_SAFE_INTEGER){A0();const c=BigInt(r);o.valueBigInt=c}else if(o.valueDec=parseInt(r,10),isNaN(o.valueDec))return;this.value.length||(o.isFirstSid=!0,a=!0),this.value.push(o)}while(s!==-1)}toString(){let e="",n=!1;for(let s=0;s<this.value.length;s++){n=this.value[s].isHexOnly;let r=this.value[s].toString();s!==0&&(e=`${e}.`),n?(r=`{${r}}`,this.value[s].isFirstSid?e=`2.{${r} - 80}`:e+=r):e+=r}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let n=0;n<this.value.length;n++)e.sidArray.push(this.value[n].toJSON());return e}}A6.NAME="ObjectIdentifierValueBlock";var E6;class Vg extends as{getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}constructor(e={}){super(e,A6),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}E6=Vg;$e.ObjectIdentifier=E6;Vg.NAME="OBJECT IDENTIFIER";class t_ extends Ni(ko){constructor({valueDec:e=0,...n}={}){super(n),this.valueDec=e}fromBER(e,n,s){if(s===0)return n;const r=Oe.toUint8Array(e);if(!ha(this,r,n,s))return-1;const a=r.subarray(n,n+s);this.valueHexView=new Uint8Array(s);for(let c=0;c<s&&(this.valueHexView[c]=a[c]&127,this.blockLength++,(a[c]&128)!==0);c++);const o=new Uint8Array(this.blockLength);for(let c=0;c<this.blockLength;c++)o[c]=this.valueHexView[c];return this.valueHexView=o,(a[this.blockLength-1]&128)!==0?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=Kc(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),n+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const r=this.valueHexView,a=new Uint8Array(this.blockLength);for(let o=0;o<this.blockLength-1;o++)a[o]=r[o]|128;return a[this.blockLength-1]=r[this.blockLength-1],a.buffer}const n=ro(this.valueDec,7);if(n.byteLength===0)return this.error="Error during encoding SID value",Ci;const s=new Uint8Array(n.byteLength);if(!e){const r=new Uint8Array(n),a=n.byteLength-1;for(let o=0;o<a;o++)s[o]=r[o]|128;s[a]=r[a]}return s.buffer}toString(){let e="";return this.isHexOnly?e=Ke.ToHex(this.valueHexView):e=this.valueDec.toString(),e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}t_.NAME="relativeSidBlock";class j6 extends ks{constructor({value:e=$s,...n}={}){super(n),this.value=[],e&&this.fromString(e)}fromBER(e,n,s){let r=n;for(;s>0;){const a=new t_;if(r=a.fromBER(e,r,s),r===-1)return this.blockLength=0,this.error=a.error,r;this.blockLength+=a.blockLength,s-=a.blockLength,this.value.push(a)}return r}toBER(e,n){const s=[];for(let r=0;r<this.value.length;r++){const a=this.value[r].toBER(e);if(a.byteLength===0)return this.error=this.value[r].error,Ci;s.push(a)}return h2(s)}fromString(e){this.value=[];let n=0,s=0,r="";do{s=e.indexOf(".",n),s===-1?r=e.substring(n):r=e.substring(n,s),n=s+1;const a=new t_;if(a.valueDec=parseInt(r,10),isNaN(a.valueDec))return!0;this.value.push(a)}while(s!==-1);return!0}toString(){let e="",n=!1;for(let s=0;s<this.value.length;s++){n=this.value[s].isHexOnly;let r=this.value[s].toString();s!==0&&(e=`${e}.`),n&&(r=`{${r}}`),e+=r}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let n=0;n<this.value.length;n++)e.sidArray.push(this.value[n].toJSON());return e}}j6.NAME="RelativeObjectIdentifierValueBlock";var T6;class g2 extends as{getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}constructor(e={}){super(e,j6),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}T6=g2;$e.RelativeObjectIdentifier=T6;g2.NAME="RelativeObjectIdentifier";var R6;class Yr extends _s{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}R6=Yr;$e.Sequence=R6;Yr.NAME="SEQUENCE";var O6;let gi=class extends _s{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}};O6=gi;$e.Set=O6;gi.NAME="SET";class B6 extends Ni(ks){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=$s}toJSON(){return{...super.toJSON(),value:this.value}}}B6.NAME="StringValueBlock";class M6 extends B6{}M6.NAME="SimpleStringValueBlock";class fr extends d2{constructor({...e}={}){super(e,M6)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,Oe.toUint8Array(e))}fromString(e){const n=e.length,s=this.valueBlock.valueHexView=new Uint8Array(n);for(let r=0;r<n;r++)s[r]=e.charCodeAt(r);this.valueBlock.value=e}}fr.NAME="SIMPLE STRING";class D6 extends fr{fromBuffer(e){this.valueBlock.valueHexView=Oe.toUint8Array(e);try{this.valueBlock.value=Ke.ToUtf8String(e)}catch(n){this.warnings.push(`Error during "decodeURIComponent": ${n}, using raw string`),this.valueBlock.value=Ke.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(Ke.FromUtf8String(e)),this.valueBlock.value=e}}D6.NAME="Utf8StringValueBlock";var L6;class da extends D6{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}L6=da;$e.Utf8String=L6;da.NAME="UTF8String";class I6 extends fr{fromBuffer(e){this.valueBlock.value=Ke.ToUtf16String(e),this.valueBlock.valueHexView=Oe.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(Ke.FromUtf16String(e))}}I6.NAME="BmpStringValueBlock";var P6;class Fg extends I6{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}P6=Fg;$e.BmpString=P6;Fg.NAME="BMPString";class z6 extends fr{fromBuffer(e){const n=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),s=new Uint8Array(n);for(let r=0;r<s.length;r+=4)s[r]=s[r+3],s[r+1]=s[r+2],s[r+2]=0,s[r+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(n))}fromString(e){const n=e.length,s=this.valueBlock.valueHexView=new Uint8Array(n*4);for(let r=0;r<n;r++){const a=ro(e.charCodeAt(r),8),o=new Uint8Array(a);if(o.length>4)continue;const c=4-o.length;for(let h=o.length-1;h>=0;h--)s[r*4+h+c]=o[h]}this.valueBlock.value=e}}z6.NAME="UniversalStringValueBlock";var $6;class qg extends z6{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}$6=qg;$e.UniversalString=$6;qg.NAME="UniversalString";var H6;class Kg extends fr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}H6=Kg;$e.NumericString=H6;Kg.NAME="NumericString";var U6;class Wg extends fr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}U6=Wg;$e.PrintableString=U6;Wg.NAME="PrintableString";var V6;class Gg extends fr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}V6=Gg;$e.TeletexString=V6;Gg.NAME="TeletexString";var F6;class Yg extends fr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}F6=Yg;$e.VideotexString=F6;Yg.NAME="VideotexString";var q6;class Xg extends fr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}q6=Xg;$e.IA5String=q6;Xg.NAME="IA5String";var K6;class Jg extends fr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}K6=Jg;$e.GraphicString=K6;Jg.NAME="GraphicString";var W6;class kf extends fr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}W6=kf;$e.VisibleString=W6;kf.NAME="VisibleString";var G6;class Qg extends fr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}G6=Qg;$e.GeneralString=G6;Qg.NAME="GeneralString";var Y6;class Zg extends fr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}Y6=Zg;$e.CharacterString=Y6;Zg.NAME="CharacterString";var X6;class Cf extends kf{constructor({value:e,valueDate:n,...s}={}){if(super(s),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let r=0;r<e.length;r++)this.valueBlock.valueHexView[r]=e.charCodeAt(r)}n&&(this.fromDate(n),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,Oe.toUint8Array(e)))}toBuffer(){const e=this.toString(),n=new ArrayBuffer(e.length),s=new Uint8Array(n);for(let r=0;r<e.length;r++)s[r]=e.charCodeAt(r);return n}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){const s=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(e);if(s===null){this.error="Wrong input string for conversion";return}const r=parseInt(s[1],10);r>=50?this.year=1900+r:this.year=2e3+r,this.month=parseInt(s[2],10),this.day=parseInt(s[3],10),this.hour=parseInt(s[4],10),this.minute=parseInt(s[5],10),this.second=parseInt(s[6],10)}toString(e="iso"){if(e==="iso"){const n=new Array(7);return n[0]=lr(this.year<2e3?this.year-1900:this.year-2e3,2),n[1]=lr(this.month,2),n[2]=lr(this.day,2),n[3]=lr(this.hour,2),n[4]=lr(this.minute,2),n[5]=lr(this.second,2),n[6]="Z",n.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}X6=Cf;$e.UTCTime=X6;Cf.NAME="UTCTime";var J6;class ey extends Cf{constructor(e={}){var n;super(e),(n=this.millisecond)!==null&&n!==void 0||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){const e=Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond);return new Date(e)}fromString(e){let n=!1,s="",r="",a=0,o,c=0,h=0;if(e[e.length-1]==="Z")s=e.substring(0,e.length-1),n=!0;else{const m=new Number(e[e.length-1]);if(isNaN(m.valueOf()))throw new Error("Wrong input string for conversion");s=e}if(n){if(s.indexOf("+")!==-1)throw new Error("Wrong input string for conversion");if(s.indexOf("-")!==-1)throw new Error("Wrong input string for conversion")}else{let m=1,v=s.indexOf("+"),y="";if(v===-1&&(v=s.indexOf("-"),m=-1),v!==-1){if(y=s.substring(v+1),s=s.substring(0,v),y.length!==2&&y.length!==4)throw new Error("Wrong input string for conversion");let _=parseInt(y.substring(0,2),10);if(isNaN(_.valueOf()))throw new Error("Wrong input string for conversion");if(c=m*_,y.length===4){if(_=parseInt(y.substring(2,4),10),isNaN(_.valueOf()))throw new Error("Wrong input string for conversion");h=m*_}}}let d=s.indexOf(".");if(d===-1&&(d=s.indexOf(",")),d!==-1){const m=new Number(`0${s.substring(d)}`);if(isNaN(m.valueOf()))throw new Error("Wrong input string for conversion");a=m.valueOf(),r=s.substring(0,d)}else r=s;switch(!0){case r.length===8:if(o=/(\d{4})(\d{2})(\d{2})/ig,d!==-1)throw new Error("Wrong input string for conversion");break;case r.length===10:if(o=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,d!==-1){let m=60*a;this.minute=Math.floor(m),m=60*(m-this.minute),this.second=Math.floor(m),m=1e3*(m-this.second),this.millisecond=Math.floor(m)}break;case r.length===12:if(o=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,d!==-1){let m=60*a;this.second=Math.floor(m),m=1e3*(m-this.second),this.millisecond=Math.floor(m)}break;case r.length===14:if(o=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,d!==-1){const m=1e3*a;this.millisecond=Math.floor(m)}break;default:throw new Error("Wrong input string for conversion")}const g=o.exec(r);if(g===null)throw new Error("Wrong input string for conversion");for(let m=1;m<g.length;m++)switch(m){case 1:this.year=parseInt(g[m],10);break;case 2:this.month=parseInt(g[m],10);break;case 3:this.day=parseInt(g[m],10);break;case 4:this.hour=parseInt(g[m],10)+c;break;case 5:this.minute=parseInt(g[m],10)+h;break;case 6:this.second=parseInt(g[m],10);break;default:throw new Error("Wrong input string for conversion")}if(n===!1){const m=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=m.getUTCFullYear(),this.month=m.getUTCMonth(),this.day=m.getUTCDay(),this.hour=m.getUTCHours(),this.minute=m.getUTCMinutes(),this.second=m.getUTCSeconds(),this.millisecond=m.getUTCMilliseconds()}}toString(e="iso"){if(e==="iso"){const n=[];return n.push(lr(this.year,4)),n.push(lr(this.month,2)),n.push(lr(this.day,2)),n.push(lr(this.hour,2)),n.push(lr(this.minute,2)),n.push(lr(this.second,2)),this.millisecond!==0&&(n.push("."),n.push(lr(this.millisecond,3))),n.push("Z"),n.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}J6=ey;$e.GeneralizedTime=J6;ey.NAME="GeneralizedTime";var Q6;class y2 extends da{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}Q6=y2;$e.DATE=Q6;y2.NAME="DATE";var Z6;class v2 extends da{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}Z6=v2;$e.TimeOfDay=Z6;v2.NAME="TimeOfDay";var eB;class b2 extends da{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}eB=b2;$e.DateTime=eB;b2.NAME="DateTime";var tB;class x2 extends da{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}tB=x2;$e.Duration=tB;x2.NAME="Duration";var nB;class _2 extends da{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}nB=_2;$e.TIME=nB;_2.NAME="TIME";class ao{constructor({name:e=$s,optional:n=!1}={}){this.name=e,this.optional=n}}class w2 extends ao{constructor({value:e=[],...n}={}){super(n),this.value=e}}class E0 extends ao{constructor({value:e=new ao,local:n=!1,...s}={}){super(s),this.value=e,this.local=n}}class nW{get data(){return this.dataView.slice().buffer}set data(e){this.dataView=Oe.toUint8Array(e)}constructor({data:e=$g}={}){this.dataView=Oe.toUint8Array(e)}fromBER(e,n,s){const r=n+s;return this.dataView=Oe.toUint8Array(e).subarray(n,r),r}toBER(e){return this.dataView.slice().buffer}}function Ja(t,e,n){if(n instanceof w2){for(const a of n.value)if(Ja(t,e,a).verified)return{verified:!0,result:t};{const a={verified:!1,result:{error:"Wrong values for Choice type"}};return n.hasOwnProperty(zb)&&(a.name=n.name),a}}if(n instanceof ao)return n.hasOwnProperty(zb)&&(t[n.name]=e),{verified:!0,result:t};if(!(t instanceof Object))return{verified:!1,result:{error:"Wrong root object"}};if(!(e instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(!(n instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(qK in n))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(YK in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(XK in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const s=n.idBlock.toBER(!1);if(s.byteLength===0)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(n.idBlock.fromBER(s,0,s.byteLength)===-1)return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(n.idBlock.hasOwnProperty(KK)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.tagClass!==e.idBlock.tagClass)return{verified:!1,result:t};if(n.idBlock.hasOwnProperty(WK)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.tagNumber!==e.idBlock.tagNumber)return{verified:!1,result:t};if(n.idBlock.hasOwnProperty(GK)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.isConstructed!==e.idBlock.isConstructed)return{verified:!1,result:t};if(!(FK in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.isHexOnly!==e.idBlock.isHexOnly)return{verified:!1,result:t};if(n.idBlock.isHexOnly){if(!(pE in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const a=n.idBlock.valueHexView,o=e.idBlock.valueHexView;if(a.length!==o.length)return{verified:!1,result:t};for(let c=0;c<a.length;c++)if(a[c]!==o[1])return{verified:!1,result:t}}if(n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,$s),n.name&&(t[n.name]=e)),n instanceof $e.Constructed){let a=0,o={verified:!1,result:{error:"Unknown error"}},c=n.valueBlock.value.length;if(c>0&&n.valueBlock.value[0]instanceof E0&&(c=e.valueBlock.value.length),c===0)return{verified:!0,result:t};if(e.valueBlock.value.length===0&&n.valueBlock.value.length!==0){let h=!0;for(let d=0;d<n.valueBlock.value.length;d++)h=h&&(n.valueBlock.value[d].optional||!1);return h?{verified:!0,result:t}:(n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,$s),n.name&&delete t[n.name]),t.error="Inconsistent object length",{verified:!1,result:t})}for(let h=0;h<c;h++)if(h-a>=e.valueBlock.value.length){if(n.valueBlock.value[h].optional===!1){const d={verified:!1,result:t};return t.error="Inconsistent length between ASN.1 data and schema",n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,$s),n.name&&(delete t[n.name],d.name=n.name)),d}}else if(n.valueBlock.value[0]instanceof E0){if(o=Ja(t,e.valueBlock.value[h],n.valueBlock.value[0].value),o.verified===!1)if(n.valueBlock.value[0].optional)a++;else return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,$s),n.name&&delete t[n.name]),o;if(zb in n.valueBlock.value[0]&&n.valueBlock.value[0].name.length>0){let d={};JK in n.valueBlock.value[0]&&n.valueBlock.value[0].local?d=e:d=t,typeof d[n.valueBlock.value[0].name]>"u"&&(d[n.valueBlock.value[0].name]=[]),d[n.valueBlock.value[0].name].push(e.valueBlock.value[h])}}else if(o=Ja(t,e.valueBlock.value[h-a],n.valueBlock.value[h]),o.verified===!1)if(n.valueBlock.value[h].optional)a++;else return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,$s),n.name&&delete t[n.name]),o;if(o.verified===!1){const h={verified:!1,result:t};return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,$s),n.name&&(delete t[n.name],h.name=n.name)),h}return{verified:!0,result:t}}if(n.primitiveSchema&&pE in e.valueBlock){const a=yu(e.valueBlock.valueHexView);if(a.offset===-1){const o={verified:!1,result:a.result};return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,$s),n.name&&(delete t[n.name],o.name=n.name)),o}return Ja(t,a.result,n.primitiveSchema)}return{verified:!0,result:t}}function sW(t,e){if(!(e instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};const n=yu(Oe.toUint8Array(t));return n.offset===-1?{verified:!1,result:n.result}:Ja(n.result,n.result,e)}const sB=Object.freeze(Object.defineProperty({__proto__:null,Any:ao,BaseBlock:as,BaseStringBlock:d2,BitString:Zl,BmpString:Fg,Boolean:Hg,CharacterString:Zg,Choice:w2,Constructed:_s,DATE:y2,DateTime:b2,Duration:x2,EndOfContent:f2,Enumerated:Ug,GeneralString:Qg,GeneralizedTime:ey,GraphicString:Jg,HexBlock:Ni,IA5String:Xg,Integer:vu,Null:io,NumericString:Kg,ObjectIdentifier:Vg,OctetString:Ql,Primitive:Sf,PrintableString:Wg,RawData:nW,RelativeObjectIdentifier:g2,Repeated:E0,Sequence:Yr,Set:gi,TIME:_2,TeletexString:Gg,TimeOfDay:v2,UTCTime:Cf,UniversalString:qg,Utf8String:da,ValueBlock:ks,VideotexString:Yg,ViewWriter:zg,VisibleString:kf,compareSchema:Ja,fromBER:Hc,verifySchema:sW},Symbol.toStringTag,{value:"Module"}));var be;(function(t){t[t.Sequence=0]="Sequence",t[t.Set=1]="Set",t[t.Choice=2]="Choice"})(be||(be={}));var ne;(function(t){t[t.Any=1]="Any",t[t.Boolean=2]="Boolean",t[t.OctetString=3]="OctetString",t[t.BitString=4]="BitString",t[t.Integer=5]="Integer",t[t.Enumerated=6]="Enumerated",t[t.ObjectIdentifier=7]="ObjectIdentifier",t[t.Utf8String=8]="Utf8String",t[t.BmpString=9]="BmpString",t[t.UniversalString=10]="UniversalString",t[t.NumericString=11]="NumericString",t[t.PrintableString=12]="PrintableString",t[t.TeletexString=13]="TeletexString",t[t.VideotexString=14]="VideotexString",t[t.IA5String=15]="IA5String",t[t.GraphicString=16]="GraphicString",t[t.VisibleString=17]="VisibleString",t[t.GeneralString=18]="GeneralString",t[t.CharacterString=19]="CharacterString",t[t.UTCTime=20]="UTCTime",t[t.GeneralizedTime=21]="GeneralizedTime",t[t.DATE=22]="DATE",t[t.TimeOfDay=23]="TimeOfDay",t[t.DateTime=24]="DateTime",t[t.Duration=25]="Duration",t[t.TIME=26]="TIME",t[t.Null=27]="Null"})(ne||(ne={}));class ty{constructor(e,n=0){if(this.unusedBits=0,this.value=new ArrayBuffer(0),e)if(typeof e=="number")this.fromNumber(e);else if(Oe.isBufferSource(e))this.unusedBits=n,this.value=Oe.toArrayBuffer(e);else throw TypeError("Unsupported type of 'params' argument for BitString")}fromASN(e){if(!(e instanceof Zl))throw new TypeError("Argument 'asn' is not instance of ASN.1 BitString");return this.unusedBits=e.valueBlock.unusedBits,this.value=e.valueBlock.valueHex,this}toASN(){return new Zl({unusedBits:this.unusedBits,valueHex:this.value})}toSchema(e){return new Zl({name:e})}toNumber(){let e="";const n=new Uint8Array(this.value);for(const s of n)e+=s.toString(2).padStart(8,"0");return e=e.split("").reverse().join(""),this.unusedBits&&(e=e.slice(this.unusedBits).padStart(this.unusedBits,"0")),parseInt(e,2)}fromNumber(e){let n=e.toString(2);const s=n.length+7>>3;this.unusedBits=(s<<3)-n.length;const r=new Uint8Array(s);n=n.padStart(s<<3,"0").split("").reverse().join("");let a=0;for(;a<s;)r[a]=parseInt(n.slice(a<<3,(a<<3)+8),2),a++;this.value=r.buffer}}class At{get byteLength(){return this.buffer.byteLength}get byteOffset(){return 0}constructor(e){typeof e=="number"?this.buffer=new ArrayBuffer(e):Oe.isBufferSource(e)?this.buffer=Oe.toArrayBuffer(e):Array.isArray(e)?this.buffer=new Uint8Array(e):this.buffer=new ArrayBuffer(0)}fromASN(e){if(!(e instanceof Ql))throw new TypeError("Argument 'asn' is not instance of ASN.1 OctetString");return this.buffer=e.valueBlock.valueHex,this}toASN(){return new Ql({valueHex:this.buffer})}toSchema(e){return new Ql({name:e})}}const rW={fromASN:t=>t instanceof io?null:t.valueBeforeDecodeView,toASN:t=>{if(t===null)return new io;const e=Hc(t);if(e.result.error)throw new Error(e.result.error);return e.result}},iW={fromASN:t=>t.valueBlock.valueHexView.byteLength>=4?t.valueBlock.toString():t.valueBlock.valueDec,toASN:t=>new vu({value:+t})},aW={fromASN:t=>t.valueBlock.valueDec,toASN:t=>new Ug({value:t})},Qt={fromASN:t=>t.valueBlock.valueHexView,toASN:t=>new vu({valueHex:t})},lW={fromASN:t=>t.valueBlock.valueHexView,toASN:t=>new Zl({valueHex:t})},oW={fromASN:t=>t.valueBlock.toString(),toASN:t=>new Vg({value:t})},cW={fromASN:t=>t.valueBlock.value,toASN:t=>new Hg({value:t})},j0={fromASN:t=>t.valueBlock.valueHexView,toASN:t=>new Ql({valueHex:t})},uW={fromASN:t=>new At(t.getValue()),toASN:t=>t.toASN()};function Pr(t){return{fromASN:e=>e.valueBlock.value,toASN:e=>new t({value:e})}}const rB=Pr(da),hW=Pr(Fg),dW=Pr(qg),fW=Pr(Kg),pW=Pr(Wg),mW=Pr(Gg),gW=Pr(Yg),yW=Pr(Xg),vW=Pr(Jg),bW=Pr(kf),xW=Pr(Qg),_W=Pr(Zg),wW={fromASN:t=>t.toDate(),toASN:t=>new Cf({valueDate:t})},SW={fromASN:t=>t.toDate(),toASN:t=>new ey({valueDate:t})},kW={fromASN:()=>null,toASN:()=>new io};function Bd(t){switch(t){case ne.Any:return rW;case ne.BitString:return lW;case ne.BmpString:return hW;case ne.Boolean:return cW;case ne.CharacterString:return _W;case ne.Enumerated:return aW;case ne.GeneralString:return xW;case ne.GeneralizedTime:return SW;case ne.GraphicString:return vW;case ne.IA5String:return yW;case ne.Integer:return iW;case ne.Null:return kW;case ne.NumericString:return fW;case ne.ObjectIdentifier:return oW;case ne.OctetString:return j0;case ne.PrintableString:return pW;case ne.TeletexString:return mW;case ne.UTCTime:return wW;case ne.UniversalString:return dW;case ne.Utf8String:return rB;case ne.VideotexString:return gW;case ne.VisibleString:return bW;default:return null}}function Zi(t){return typeof t=="function"&&t.prototype?t.prototype.toASN&&t.prototype.fromASN?!0:Zi(t.prototype):!!(t&&typeof t=="object"&&"toASN"in t&&"fromASN"in t)}function iB(t){var e;if(t){const n=Object.getPrototypeOf(t);return((e=n?.prototype)===null||e===void 0?void 0:e.constructor)===Array?!0:iB(n)}return!1}function CW(t,e){if(!(t&&e)||t.byteLength!==e.byteLength)return!1;const n=new Uint8Array(t),s=new Uint8Array(e);for(let r=0;r<t.byteLength;r++)if(n[r]!==s[r])return!1;return!0}class NW{constructor(){this.items=new WeakMap}has(e){return this.items.has(e)}get(e,n=!1){const s=this.items.get(e);if(!s)throw new Error(`Cannot get schema for '${e.prototype.constructor.name}' target`);if(n&&!s.schema)throw new Error(`Schema '${e.prototype.constructor.name}' doesn't contain ASN.1 schema. Call 'AsnSchemaStorage.cache'.`);return s}cache(e){const n=this.get(e);n.schema||(n.schema=this.create(e,!0))}createDefault(e){const n={type:be.Sequence,items:{}},s=this.findParentSchema(e);return s&&(Object.assign(n,s),n.items=Object.assign({},n.items,s.items)),n}create(e,n){const s=this.items.get(e)||this.createDefault(e),r=[];for(const a in s.items){const o=s.items[a],c=n?a:"";let h;if(typeof o.type=="number"){const g=ne[o.type],m=sB[g];if(!m)throw new Error(`Cannot get ASN1 class by name '${g}'`);h=new m({name:c})}else Zi(o.type)?h=new o.type().toSchema(c):o.optional?this.get(o.type).type===be.Choice?h=new ao({name:c}):(h=this.create(o.type,!1),h.name=c):h=new ao({name:c});const d=!!o.optional||o.defaultValue!==void 0;if(o.repeated){h.name="";const g=o.repeated==="set"?gi:Yr;h=new g({name:"",value:[new E0({name:c,value:h})]})}if(o.context!==null&&o.context!==void 0)if(o.implicit)if(typeof o.type=="number"||Zi(o.type)){const g=o.repeated?_s:Sf;r.push(new g({name:c,optional:d,idBlock:{tagClass:3,tagNumber:o.context}}))}else{this.cache(o.type);const g=!!o.repeated;let m=g?h:this.get(o.type,!0).schema;m="valueBlock"in m?m.valueBlock.value:m.value,r.push(new _s({name:g?"":c,optional:d,idBlock:{tagClass:3,tagNumber:o.context},value:m}))}else r.push(new _s({optional:d,idBlock:{tagClass:3,tagNumber:o.context},value:[h]}));else h.optional=d,r.push(h)}switch(s.type){case be.Sequence:return new Yr({value:r,name:""});case be.Set:return new gi({value:r,name:""});case be.Choice:return new w2({value:r,name:""});default:throw new Error("Unsupported ASN1 type in use")}}set(e,n){return this.items.set(e,n),this}findParentSchema(e){const n=Object.getPrototypeOf(e);return n?this.items.get(n)||this.findParentSchema(n):null}}const es=new NW,Ne=t=>e=>{let n;es.has(e)?n=es.get(e):(n=es.createDefault(e),es.set(e,n)),Object.assign(n,t)},I=t=>(e,n)=>{let s;es.has(e.constructor)?s=es.get(e.constructor):(s=es.createDefault(e.constructor),es.set(e.constructor,s));const r=Object.assign({},t);if(typeof r.type=="number"&&!r.converter){const a=Bd(t.type);if(!a)throw new Error(`Cannot get default converter for property '${n}' of ${e.constructor.name}`);r.converter=a}r.raw=t.raw,s.items[n]=r};class Oh extends Error{constructor(){super(...arguments),this.schemas=[]}}class AW{static parse(e,n){const s=Hc(e);if(s.result.error)throw new Error(s.result.error);return this.fromASN(s.result,n)}static fromASN(e,n){try{if(Zi(n))return new n().fromASN(e);const s=es.get(n);es.cache(n);let r=s.schema;const a=this.handleChoiceTypes(e,s,n,r);if(a?.result)return a.result;a?.targetSchema&&(r=a.targetSchema);const o=this.handleSequenceTypes(e,s,n,r),c=new n;return iB(n)?this.handleArrayTypes(e,s,n):(this.processSchemaItems(s,o,c),c)}catch(s){throw s instanceof Oh&&s.schemas.push(n.name),s}}static handleChoiceTypes(e,n,s,r){if(e.constructor===_s&&n.type===be.Choice&&e.idBlock.tagClass===3)for(const a in n.items){const o=n.items[a];if(o.context===e.idBlock.tagNumber&&o.implicit&&typeof o.type=="function"&&es.has(o.type)){const c=es.get(o.type);if(c&&c.type===be.Sequence){const h=new Yr;if("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)&&"value"in h.valueBlock){h.valueBlock.value=e.valueBlock.value;const d=this.fromASN(h,o.type),g=new s;return g[a]=d,{result:g}}}}}else if(e.constructor===_s&&n.type!==be.Choice){const a=new _s({idBlock:{tagClass:3,tagNumber:e.idBlock.tagNumber},value:n.schema.valueBlock.value});for(const o in n.items)delete e[o];return{targetSchema:a}}return null}static handleSequenceTypes(e,n,s,r){if(n.type===be.Sequence){const a=Ja({},e,r);if(!a.verified)throw new Oh(`Data does not match to ${s.name} ASN1 schema.${a.result.error?` ${a.result.error}`:""}`);return a}else{const a=Ja({},e,r);if(!a.verified)throw new Oh(`Data does not match to ${s.name} ASN1 schema.${a.result.error?` ${a.result.error}`:""}`);return a}}static processRepeatedField(e,n,s){let r=e.slice(n);if(r.length===1&&r[0].constructor.name==="Sequence"){const a=r[0];a.valueBlock&&a.valueBlock.value&&Array.isArray(a.valueBlock.value)&&(r=a.valueBlock.value)}if(typeof s.type=="number"){const a=Bd(s.type);if(!a)throw new Error(`No converter for ASN.1 type ${s.type}`);return r.filter(o=>o&&o.valueBlock).map(o=>{try{return a.fromASN(o)}catch{return}}).filter(o=>o!==void 0)}else return r.filter(a=>a&&a.valueBlock).map(a=>{try{return this.fromASN(a,s.type)}catch{return}}).filter(a=>a!==void 0)}static processPrimitiveField(e,n){const s=Bd(n.type);if(!s)throw new Error(`No converter for ASN.1 type ${n.type}`);return s.fromASN(e)}static isOptionalChoiceField(e){return e.optional&&typeof e.type=="function"&&es.has(e.type)&&es.get(e.type).type===be.Choice}static processOptionalChoiceField(e,n){try{return{processed:!0,value:this.fromASN(e,n.type)}}catch(s){if(s instanceof Oh&&/Wrong values for Choice type/.test(s.message))return{processed:!1};throw s}}static handleArrayTypes(e,n,s){if(!("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)))throw new Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");const r=n.itemType;if(typeof r=="number"){const a=Bd(r);if(!a)throw new Error(`Cannot get default converter for array item of ${s.name} ASN1 schema`);return s.from(e.valueBlock.value,o=>a.fromASN(o))}else return s.from(e.valueBlock.value,a=>this.fromASN(a,r))}static processSchemaItems(e,n,s){for(const r in e.items){const a=n.result[r];if(!a)continue;const o=e.items[r],c=o.type;let h;typeof c=="number"||Zi(c)?h=this.processPrimitiveSchemaItem(a,o,c):h=this.processComplexSchemaItem(a,o,c),h&&typeof h=="object"&&"value"in h&&"raw"in h?(s[r]=h.value,s[`${r}Raw`]=h.raw):s[r]=h}}static processPrimitiveSchemaItem(e,n,s){var r;const a=(r=n.converter)!==null&&r!==void 0?r:Zi(s)?new s:null;if(!a)throw new Error("Converter is empty");return n.repeated?this.processRepeatedPrimitiveItem(e,n,a):this.processSinglePrimitiveItem(e,n,s,a)}static processRepeatedPrimitiveItem(e,n,s){if(n.implicit){const r=n.repeated==="sequence"?Yr:gi,a=new r;a.valueBlock=e.valueBlock;const o=Hc(a.toBER(!1));if(o.offset===-1)throw new Error(`Cannot parse the child item. ${o.result.error}`);if(!("value"in o.result.valueBlock&&Array.isArray(o.result.valueBlock.value)))throw new Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");const c=o.result.valueBlock.value;return Array.from(c,h=>s.fromASN(h))}else return Array.from(e,r=>s.fromASN(r))}static processSinglePrimitiveItem(e,n,s,r){let a=e;if(n.implicit){let o;if(Zi(s))o=new s().toSchema("");else{const c=ne[s],h=sB[c];if(!h)throw new Error(`Cannot get '${c}' class from asn1js module`);o=new h}o.valueBlock=a.valueBlock,a=Hc(o.toBER(!1)).result}return r.fromASN(a)}static processComplexSchemaItem(e,n,s){if(n.repeated){if(!Array.isArray(e))throw new Error("Cannot get list of items from the ASN.1 parsed value. ASN.1 value should be iterable.");return Array.from(e,r=>this.fromASN(r,s))}else{const r=this.handleImplicitTagging(e,n,s);if(this.isOptionalChoiceField(n))try{return this.fromASN(r,s)}catch(a){if(a instanceof Oh&&/Wrong values for Choice type/.test(a.message))return;throw a}else{const a=this.fromASN(r,s);return n.raw?{value:a,raw:e.valueBeforeDecodeView}:a}}}static handleImplicitTagging(e,n,s){if(n.implicit&&typeof n.context=="number"){const r=es.get(s);if(r.type===be.Sequence){const a=new Yr;if("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)&&"value"in a.valueBlock)return a.valueBlock.value=e.valueBlock.value,a}else if(r.type===be.Set){const a=new gi;if("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)&&"value"in a.valueBlock)return a.valueBlock.value=e.valueBlock.value,a}}return e}}class S2{static serialize(e){return e instanceof as?e.toBER(!1):this.toASN(e).toBER(!1)}static toASN(e){if(e&&typeof e=="object"&&Zi(e))return e.toASN();if(!(e&&typeof e=="object"))throw new TypeError("Parameter 1 should be type of Object.");const n=e.constructor,s=es.get(n);es.cache(n);let r=[];if(s.itemType){if(!Array.isArray(e))throw new TypeError("Parameter 1 should be type of Array.");if(typeof s.itemType=="number"){const o=Bd(s.itemType);if(!o)throw new Error(`Cannot get default converter for array item of ${n.name} ASN1 schema`);r=e.map(c=>o.toASN(c))}else r=e.map(o=>this.toAsnItem({type:s.itemType},"[]",n,o))}else for(const o in s.items){const c=s.items[o],h=e[o];if(h===void 0||c.defaultValue===h||typeof c.defaultValue=="object"&&typeof h=="object"&&CW(this.serialize(c.defaultValue),this.serialize(h)))continue;const d=S2.toAsnItem(c,o,n,h);if(typeof c.context=="number")if(c.implicit)if(!c.repeated&&(typeof c.type=="number"||Zi(c.type))){const g={};g.valueHex=d instanceof io?d.valueBeforeDecodeView:d.valueBlock.toBER(),r.push(new Sf({optional:c.optional,idBlock:{tagClass:3,tagNumber:c.context},...g}))}else r.push(new _s({optional:c.optional,idBlock:{tagClass:3,tagNumber:c.context},value:d.valueBlock.value}));else r.push(new _s({optional:c.optional,idBlock:{tagClass:3,tagNumber:c.context},value:[d]}));else c.repeated?r=r.concat(d):r.push(d)}let a;switch(s.type){case be.Sequence:a=new Yr({value:r});break;case be.Set:a=new gi({value:r});break;case be.Choice:if(!r[0])throw new Error(`Schema '${n.name}' has wrong data. Choice cannot be empty.`);a=r[0];break}return a}static toAsnItem(e,n,s,r){let a;if(typeof e.type=="number"){const o=e.converter;if(!o)throw new Error(`Property '${n}' doesn't have converter for type ${ne[e.type]} in schema '${s.name}'`);if(e.repeated){if(!Array.isArray(r))throw new TypeError("Parameter 'objProp' should be type of Array.");const c=Array.from(r,d=>o.toASN(d)),h=e.repeated==="sequence"?Yr:gi;a=new h({value:c})}else a=o.toASN(r)}else if(e.repeated){if(!Array.isArray(r))throw new TypeError("Parameter 'objProp' should be type of Array.");const o=Array.from(r,h=>this.toASN(h)),c=e.repeated==="sequence"?Yr:gi;a=new c({value:o})}else a=this.toASN(r);return a}}class Pt extends Array{constructor(e=[]){if(typeof e=="number")super(e);else{super();for(const n of e)this.push(n)}}}class Me{static serialize(e){return S2.serialize(e)}static parse(e,n){return AW.parse(e,n)}static toString(e){const n=Oe.isBufferSource(e)?Oe.toArrayBuffer(e):Me.serialize(e),s=Hc(n);if(s.offset===-1)throw new Error(`Cannot decode ASN.1 data. ${s.result.error}`);return s.result.toString()}}function R(t,e,n,s){var r=arguments.length,a=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,n):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,s);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a}function ht(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)}function tn(t,e,n,s,r){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?r.call(t,n):r?r.value=n:e.set(t,n),n}class gE{static isIPv4(e){return/^(\d{1,3}\.){3}\d{1,3}$/.test(e)}static parseIPv4(e){const n=e.split(".");if(n.length!==4)throw new Error("Invalid IPv4 address");return n.map(s=>{const r=parseInt(s,10);if(isNaN(r)||r<0||r>255)throw new Error("Invalid IPv4 address part");return r})}static parseIPv6(e){const s=this.expandIPv6(e).split(":");if(s.length!==8)throw new Error("Invalid IPv6 address");return s.reduce((r,a)=>{const o=parseInt(a,16);if(isNaN(o)||o<0||o>65535)throw new Error("Invalid IPv6 address part");return r.push(o>>8&255),r.push(o&255),r},[])}static expandIPv6(e){if(!e.includes("::"))return e;const n=e.split("::");if(n.length>2)throw new Error("Invalid IPv6 address");const s=n[0]?n[0].split(":"):[],r=n[1]?n[1].split(":"):[],a=8-(s.length+r.length);if(a<0)throw new Error("Invalid IPv6 address");return[...s,...Array(a).fill("0"),...r].join(":")}static formatIPv6(e){const n=[];for(let s=0;s<16;s+=2)n.push((e[s]<<8|e[s+1]).toString(16));return this.compressIPv6(n.join(":"))}static compressIPv6(e){const n=e.split(":");let s=-1,r=0,a=-1,o=0;for(let c=0;c<n.length;c++)n[c]==="0"?(a===-1&&(a=c),o++):(o>r&&(s=a,r=o),a=-1,o=0);if(o>r&&(s=a,r=o),r>1){const c=n.slice(0,s).join(":"),h=n.slice(s+r).join(":");return`${c}::${h}`}return e}static parseCIDR(e){const[n,s]=e.split("/"),r=parseInt(s,10);if(this.isIPv4(n)){if(r<0||r>32)throw new Error("Invalid IPv4 prefix length");return[this.parseIPv4(n),r]}else{if(r<0||r>128)throw new Error("Invalid IPv6 prefix length");return[this.parseIPv6(n),r]}}static decodeIP(e){if(e.length===64&&parseInt(e,16)===0)return"::/0";if(e.length!==16)return e;const n=parseInt(e.slice(8),16).toString(2).split("").reduce((r,a)=>r+ +a,0);let s=e.slice(0,8).replace(/(.{2})/g,r=>`${parseInt(r,16)}.`);return s=s.slice(0,-1),`${s}/${n}`}static toString(e){const n=new Uint8Array(e);if(n.length===4)return Array.from(n).join(".");if(n.length===16)return this.formatIPv6(n);if(n.length===8||n.length===32){const s=n.length/2,r=n.slice(0,s),a=n.slice(s);if(n.every(h=>h===0))return n.length===8?"0.0.0.0/0":"::/0";const c=a.reduce((h,d)=>h+(d.toString(2).match(/1/g)||[]).length,0);return n.length===8?`${Array.from(r).join(".")}/${c}`:`${this.formatIPv6(r)}/${c}`}return this.decodeIP(Ke.ToHex(e))}static fromString(e){if(e.includes("/")){const[s,r]=this.parseCIDR(e),a=new Uint8Array(s.length);let o=r;for(let h=0;h<a.length;h++)o>=8?(a[h]=255,o-=8):o>0&&(a[h]=255<<8-o,o=0);const c=new Uint8Array(s.length*2);return c.set(s,0),c.set(a,s.length),c.buffer}const n=this.isIPv4(e)?this.parseIPv4(e):this.parseIPv6(e);return new Uint8Array(n).buffer}}var n_,s_,r_;let ls=class{constructor(e={}){Object.assign(this,e)}toString(){return this.bmpString||this.printableString||this.teletexString||this.universalString||this.utf8String||""}};R([I({type:ne.TeletexString})],ls.prototype,"teletexString",void 0);R([I({type:ne.PrintableString})],ls.prototype,"printableString",void 0);R([I({type:ne.UniversalString})],ls.prototype,"universalString",void 0);R([I({type:ne.Utf8String})],ls.prototype,"utf8String",void 0);R([I({type:ne.BmpString})],ls.prototype,"bmpString",void 0);ls=R([Ne({type:be.Choice})],ls);let Wc=class extends ls{constructor(e={}){super(e),Object.assign(this,e)}toString(){return this.ia5String||(this.anyValue?Ke.ToHex(this.anyValue):super.toString())}};R([I({type:ne.IA5String})],Wc.prototype,"ia5String",void 0);R([I({type:ne.Any})],Wc.prototype,"anyValue",void 0);Wc=R([Ne({type:be.Choice})],Wc);class ny{constructor(e={}){this.type="",this.value=new Wc,Object.assign(this,e)}}R([I({type:ne.ObjectIdentifier})],ny.prototype,"type",void 0);R([I({type:Wc})],ny.prototype,"value",void 0);let Gc=n_=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,n_.prototype)}};Gc=n_=R([Ne({type:be.Set,itemType:ny})],Gc);let i_=s_=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,s_.prototype)}};i_=s_=R([Ne({type:be.Sequence,itemType:Gc})],i_);let Bn=r_=class extends i_{constructor(e){super(e),Object.setPrototypeOf(this,r_.prototype)}};Bn=r_=R([Ne({type:be.Sequence})],Bn);const EW={fromASN:t=>gE.toString(j0.fromASN(t)),toASN:t=>j0.toASN(gE.fromString(t))};class Jd{constructor(e={}){this.typeId="",this.value=new ArrayBuffer(0),Object.assign(this,e)}}R([I({type:ne.ObjectIdentifier})],Jd.prototype,"typeId",void 0);R([I({type:ne.Any,context:0})],Jd.prototype,"value",void 0);class k2{constructor(e={}){this.partyName=new ls,Object.assign(this,e)}}R([I({type:ls,optional:!0,context:0,implicit:!0})],k2.prototype,"nameAssigner",void 0);R([I({type:ls,context:1,implicit:!0})],k2.prototype,"partyName",void 0);let ot=class{constructor(e={}){Object.assign(this,e)}};R([I({type:Jd,context:0,implicit:!0})],ot.prototype,"otherName",void 0);R([I({type:ne.IA5String,context:1,implicit:!0})],ot.prototype,"rfc822Name",void 0);R([I({type:ne.IA5String,context:2,implicit:!0})],ot.prototype,"dNSName",void 0);R([I({type:ne.Any,context:3,implicit:!0})],ot.prototype,"x400Address",void 0);R([I({type:Bn,context:4,implicit:!1})],ot.prototype,"directoryName",void 0);R([I({type:k2,context:5})],ot.prototype,"ediPartyName",void 0);R([I({type:ne.IA5String,context:6,implicit:!0})],ot.prototype,"uniformResourceIdentifier",void 0);R([I({type:ne.OctetString,context:7,implicit:!0,converter:EW})],ot.prototype,"iPAddress",void 0);R([I({type:ne.ObjectIdentifier,context:8,implicit:!0})],ot.prototype,"registeredID",void 0);ot=R([Ne({type:be.Choice})],ot);const C2="1.3.6.1.5.5.7",jW=`${C2}.1`,bu=`${C2}.3`,sy=`${C2}.48`,yE=`${sy}.1`,vE=`${sy}.2`,bE=`${sy}.3`,xE=`${sy}.5`,fa="2.5.29";var a_;const l_=`${jW}.1`;class Nf{constructor(e={}){this.accessMethod="",this.accessLocation=new ot,Object.assign(this,e)}}R([I({type:ne.ObjectIdentifier})],Nf.prototype,"accessMethod",void 0);R([I({type:ot})],Nf.prototype,"accessLocation",void 0);let Bc=a_=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,a_.prototype)}};Bc=a_=R([Ne({type:be.Sequence,itemType:Nf})],Bc);const o_=`${fa}.35`;class N2 extends At{}class ql{constructor(e={}){e&&Object.assign(this,e)}}R([I({type:N2,context:0,optional:!0,implicit:!0})],ql.prototype,"keyIdentifier",void 0);R([I({type:ot,context:1,optional:!0,implicit:!0,repeated:"sequence"})],ql.prototype,"authorityCertIssuer",void 0);R([I({type:ne.Integer,context:2,optional:!0,implicit:!0,converter:Qt})],ql.prototype,"authorityCertSerialNumber",void 0);const aB=`${fa}.19`;class T0{constructor(e={}){this.cA=!1,Object.assign(this,e)}}R([I({type:ne.Boolean,defaultValue:!1})],T0.prototype,"cA",void 0);R([I({type:ne.Integer,optional:!0})],T0.prototype,"pathLenConstraint",void 0);var c_;let fs=c_=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,c_.prototype)}};fs=c_=R([Ne({type:be.Sequence,itemType:ot})],fs);var u_;let _E=u_=class extends fs{constructor(e){super(e),Object.setPrototypeOf(this,u_.prototype)}};_E=u_=R([Ne({type:be.Sequence})],_E);var h_;const lB=`${fa}.32`;let sa=class{constructor(e={}){Object.assign(this,e)}toString(){return this.ia5String||this.visibleString||this.bmpString||this.utf8String||""}};R([I({type:ne.IA5String})],sa.prototype,"ia5String",void 0);R([I({type:ne.VisibleString})],sa.prototype,"visibleString",void 0);R([I({type:ne.BmpString})],sa.prototype,"bmpString",void 0);R([I({type:ne.Utf8String})],sa.prototype,"utf8String",void 0);sa=R([Ne({type:be.Choice})],sa);class A2{constructor(e={}){this.organization=new sa,this.noticeNumbers=[],Object.assign(this,e)}}R([I({type:sa})],A2.prototype,"organization",void 0);R([I({type:ne.Integer,repeated:"sequence"})],A2.prototype,"noticeNumbers",void 0);class E2{constructor(e={}){Object.assign(this,e)}}R([I({type:A2,optional:!0})],E2.prototype,"noticeRef",void 0);R([I({type:sa,optional:!0})],E2.prototype,"explicitText",void 0);let R0=class{constructor(e={}){Object.assign(this,e)}};R([I({type:ne.IA5String})],R0.prototype,"cPSuri",void 0);R([I({type:E2})],R0.prototype,"userNotice",void 0);R0=R([Ne({type:be.Choice})],R0);class j2{constructor(e={}){this.policyQualifierId="",this.qualifier=new ArrayBuffer(0),Object.assign(this,e)}}R([I({type:ne.ObjectIdentifier})],j2.prototype,"policyQualifierId",void 0);R([I({type:ne.Any})],j2.prototype,"qualifier",void 0);class ry{constructor(e={}){this.policyIdentifier="",Object.assign(this,e)}}R([I({type:ne.ObjectIdentifier})],ry.prototype,"policyIdentifier",void 0);R([I({type:j2,repeated:"sequence",optional:!0})],ry.prototype,"policyQualifiers",void 0);let O0=h_=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,h_.prototype)}};O0=h_=R([Ne({type:be.Sequence,itemType:ry})],O0);let B0=class{constructor(e=0){this.value=e}};R([I({type:ne.Integer})],B0.prototype,"value",void 0);B0=R([Ne({type:be.Choice})],B0);let wE=class extends B0{};wE=R([Ne({type:be.Choice})],wE);var d_;const f_=`${fa}.31`;var Fr;(function(t){t[t.unused=1]="unused",t[t.keyCompromise=2]="keyCompromise",t[t.cACompromise=4]="cACompromise",t[t.affiliationChanged=8]="affiliationChanged",t[t.superseded=16]="superseded",t[t.cessationOfOperation=32]="cessationOfOperation",t[t.certificateHold=64]="certificateHold",t[t.privilegeWithdrawn=128]="privilegeWithdrawn",t[t.aACompromise=256]="aACompromise"})(Fr||(Fr={}));class oB extends ty{toJSON(){const e=[],n=this.toNumber();return n&Fr.aACompromise&&e.push("aACompromise"),n&Fr.affiliationChanged&&e.push("affiliationChanged"),n&Fr.cACompromise&&e.push("cACompromise"),n&Fr.certificateHold&&e.push("certificateHold"),n&Fr.cessationOfOperation&&e.push("cessationOfOperation"),n&Fr.keyCompromise&&e.push("keyCompromise"),n&Fr.privilegeWithdrawn&&e.push("privilegeWithdrawn"),n&Fr.superseded&&e.push("superseded"),n&Fr.unused&&e.push("unused"),e}toString(){return`[${this.toJSON().join(", ")}]`}}let lo=class{constructor(e={}){Object.assign(this,e)}};R([I({type:ot,context:0,repeated:"sequence",implicit:!0})],lo.prototype,"fullName",void 0);R([I({type:Gc,context:1,implicit:!0})],lo.prototype,"nameRelativeToCRLIssuer",void 0);lo=R([Ne({type:be.Choice})],lo);class xu{constructor(e={}){Object.assign(this,e)}}R([I({type:lo,context:0,optional:!0})],xu.prototype,"distributionPoint",void 0);R([I({type:oB,context:1,optional:!0,implicit:!0})],xu.prototype,"reasons",void 0);R([I({type:ot,context:2,optional:!0,repeated:"sequence",implicit:!0})],xu.prototype,"cRLIssuer",void 0);let Uc=d_=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,d_.prototype)}};Uc=d_=R([Ne({type:be.Sequence,itemType:xu})],Uc);var p_;let SE=p_=class extends Uc{constructor(e){super(e),Object.setPrototypeOf(this,p_.prototype)}};SE=p_=R([Ne({type:be.Sequence,itemType:xu})],SE);class ds{constructor(e={}){this.onlyContainsUserCerts=ds.ONLY,this.onlyContainsCACerts=ds.ONLY,this.indirectCRL=ds.ONLY,this.onlyContainsAttributeCerts=ds.ONLY,Object.assign(this,e)}}ds.ONLY=!1;R([I({type:lo,context:0,optional:!0})],ds.prototype,"distributionPoint",void 0);R([I({type:ne.Boolean,context:1,defaultValue:ds.ONLY,implicit:!0})],ds.prototype,"onlyContainsUserCerts",void 0);R([I({type:ne.Boolean,context:2,defaultValue:ds.ONLY,implicit:!0})],ds.prototype,"onlyContainsCACerts",void 0);R([I({type:oB,context:3,optional:!0,implicit:!0})],ds.prototype,"onlySomeReasons",void 0);R([I({type:ne.Boolean,context:4,defaultValue:ds.ONLY,implicit:!0})],ds.prototype,"indirectCRL",void 0);R([I({type:ne.Boolean,context:5,defaultValue:ds.ONLY,implicit:!0})],ds.prototype,"onlyContainsAttributeCerts",void 0);var Md;(function(t){t[t.unspecified=0]="unspecified",t[t.keyCompromise=1]="keyCompromise",t[t.cACompromise=2]="cACompromise",t[t.affiliationChanged=3]="affiliationChanged",t[t.superseded=4]="superseded",t[t.cessationOfOperation=5]="cessationOfOperation",t[t.certificateHold=6]="certificateHold",t[t.removeFromCRL=8]="removeFromCRL",t[t.privilegeWithdrawn=9]="privilegeWithdrawn",t[t.aACompromise=10]="aACompromise"})(Md||(Md={}));let m_=class{constructor(e=Md.unspecified){this.reason=Md.unspecified,this.reason=e}toJSON(){return Md[this.reason]}toString(){return this.toJSON()}};R([I({type:ne.Enumerated})],m_.prototype,"reason",void 0);m_=R([Ne({type:be.Choice})],m_);var g_;const cB=`${fa}.37`;let M0=g_=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,g_.prototype)}};M0=g_=R([Ne({type:be.Sequence,itemType:ne.ObjectIdentifier})],M0);const TW=`${bu}.1`,RW=`${bu}.2`,OW=`${bu}.3`,BW=`${bu}.4`,MW=`${bu}.8`,DW=`${bu}.9`;let y_=class{constructor(e=new ArrayBuffer(0)){this.value=e}};R([I({type:ne.Integer,converter:Qt})],y_.prototype,"value",void 0);y_=R([Ne({type:be.Choice})],y_);let v_=class{constructor(e){this.value=new Date,e&&(this.value=e)}};R([I({type:ne.GeneralizedTime})],v_.prototype,"value",void 0);v_=R([Ne({type:be.Choice})],v_);var b_;const uB=`${fa}.18`;let kE=b_=class extends fs{constructor(e){super(e),Object.setPrototypeOf(this,b_.prototype)}};kE=b_=R([Ne({type:be.Sequence})],kE);const hB=`${fa}.15`;var qr;(function(t){t[t.digitalSignature=1]="digitalSignature",t[t.nonRepudiation=2]="nonRepudiation",t[t.keyEncipherment=4]="keyEncipherment",t[t.dataEncipherment=8]="dataEncipherment",t[t.keyAgreement=16]="keyAgreement",t[t.keyCertSign=32]="keyCertSign",t[t.cRLSign=64]="cRLSign",t[t.encipherOnly=128]="encipherOnly",t[t.decipherOnly=256]="decipherOnly"})(qr||(qr={}));class $b extends ty{toJSON(){const e=this.toNumber(),n=[];return e&qr.cRLSign&&n.push("crlSign"),e&qr.dataEncipherment&&n.push("dataEncipherment"),e&qr.decipherOnly&&n.push("decipherOnly"),e&qr.digitalSignature&&n.push("digitalSignature"),e&qr.encipherOnly&&n.push("encipherOnly"),e&qr.keyAgreement&&n.push("keyAgreement"),e&qr.keyCertSign&&n.push("keyCertSign"),e&qr.keyEncipherment&&n.push("keyEncipherment"),e&qr.nonRepudiation&&n.push("nonRepudiation"),n}toString(){return`[${this.toJSON().join(", ")}]`}}var x_;class iy{constructor(e={}){this.base=new ot,this.minimum=0,Object.assign(this,e)}}R([I({type:ot})],iy.prototype,"base",void 0);R([I({type:ne.Integer,context:0,defaultValue:0,implicit:!0})],iy.prototype,"minimum",void 0);R([I({type:ne.Integer,context:1,optional:!0,implicit:!0})],iy.prototype,"maximum",void 0);let D0=x_=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,x_.prototype)}};D0=x_=R([Ne({type:be.Sequence,itemType:iy})],D0);class dB{constructor(e={}){Object.assign(this,e)}}R([I({type:D0,context:0,optional:!0,implicit:!0})],dB.prototype,"permittedSubtrees",void 0);R([I({type:D0,context:1,optional:!0,implicit:!0})],dB.prototype,"excludedSubtrees",void 0);class fB{constructor(e={}){Object.assign(this,e)}}R([I({type:ne.Integer,context:0,implicit:!0,optional:!0,converter:Qt})],fB.prototype,"requireExplicitPolicy",void 0);R([I({type:ne.Integer,context:1,implicit:!0,optional:!0,converter:Qt})],fB.prototype,"inhibitPolicyMapping",void 0);var __;class T2{constructor(e={}){this.issuerDomainPolicy="",this.subjectDomainPolicy="",Object.assign(this,e)}}R([I({type:ne.ObjectIdentifier})],T2.prototype,"issuerDomainPolicy",void 0);R([I({type:ne.ObjectIdentifier})],T2.prototype,"subjectDomainPolicy",void 0);let CE=__=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,__.prototype)}};CE=__=R([Ne({type:be.Sequence,itemType:T2})],CE);var w_;const pB=`${fa}.17`;let S_=w_=class extends fs{constructor(e){super(e),Object.setPrototypeOf(this,w_.prototype)}};S_=w_=R([Ne({type:be.Sequence})],S_);let ra=class{constructor(e={}){this.type="",this.values=[],Object.assign(this,e)}};R([I({type:ne.ObjectIdentifier})],ra.prototype,"type",void 0);R([I({type:ne.Any,repeated:"set"})],ra.prototype,"values",void 0);var k_;let NE=k_=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,k_.prototype)}};NE=k_=R([Ne({type:be.Sequence,itemType:ra})],NE);const mB=`${fa}.14`;class il extends N2{}class gB{constructor(e={}){Object.assign(this,e)}}R([I({type:ne.GeneralizedTime,context:0,implicit:!0,optional:!0})],gB.prototype,"notBefore",void 0);R([I({type:ne.GeneralizedTime,context:1,implicit:!0,optional:!0})],gB.prototype,"notAfter",void 0);var Dd;(function(t){t[t.keyUpdateAllowed=1]="keyUpdateAllowed",t[t.newExtensions=2]="newExtensions",t[t.pKIXCertificate=4]="pKIXCertificate"})(Dd||(Dd={}));class yB extends ty{toJSON(){const e=[],n=this.toNumber();return n&Dd.pKIXCertificate&&e.push("pKIXCertificate"),n&Dd.newExtensions&&e.push("newExtensions"),n&Dd.keyUpdateAllowed&&e.push("keyUpdateAllowed"),e}toString(){return`[${this.toJSON().join(", ")}]`}}class vB{constructor(e={}){this.entrustVers="",this.entrustInfoFlags=new yB,Object.assign(this,e)}}R([I({type:ne.GeneralString})],vB.prototype,"entrustVers",void 0);R([I({type:yB})],vB.prototype,"entrustInfoFlags",void 0);var C_;let AE=C_=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,C_.prototype)}};AE=C_=R([Ne({type:be.Sequence,itemType:Nf})],AE);class Ie{constructor(e={}){this.algorithm="",Object.assign(this,e)}isEqual(e){return e instanceof Ie&&e.algorithm==this.algorithm&&(e.parameters&&this.parameters&&l6(e.parameters,this.parameters)||e.parameters===this.parameters)}}R([I({type:ne.ObjectIdentifier})],Ie.prototype,"algorithm",void 0);R([I({type:ne.Any,optional:!0})],Ie.prototype,"parameters",void 0);class pi{constructor(e={}){this.algorithm=new Ie,this.subjectPublicKey=new ArrayBuffer(0),Object.assign(this,e)}}R([I({type:Ie})],pi.prototype,"algorithm",void 0);R([I({type:ne.BitString})],pi.prototype,"subjectPublicKey",void 0);let ss=class{constructor(e){if(e)if(typeof e=="string"||typeof e=="number"||e instanceof Date){const n=new Date(e);n.getUTCFullYear()>2049?this.generalTime=n:this.utcTime=n}else Object.assign(this,e)}getTime(){const e=this.utcTime||this.generalTime;if(!e)throw new Error("Cannot get time from CHOICE object");return e}};R([I({type:ne.UTCTime})],ss.prototype,"utcTime",void 0);R([I({type:ne.GeneralizedTime})],ss.prototype,"generalTime",void 0);ss=R([Ne({type:be.Choice})],ss);class ay{constructor(e){this.notBefore=new ss(new Date),this.notAfter=new ss(new Date),e&&(this.notBefore=new ss(e.notBefore),this.notAfter=new ss(e.notAfter))}}R([I({type:ss})],ay.prototype,"notBefore",void 0);R([I({type:ss})],ay.prototype,"notAfter",void 0);var N_;let Jr=class bB{constructor(e={}){this.extnID="",this.critical=bB.CRITICAL,this.extnValue=new At,Object.assign(this,e)}};Jr.CRITICAL=!1;R([I({type:ne.ObjectIdentifier})],Jr.prototype,"extnID",void 0);R([I({type:ne.Boolean,defaultValue:Jr.CRITICAL})],Jr.prototype,"critical",void 0);R([I({type:At})],Jr.prototype,"extnValue",void 0);let oo=N_=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,N_.prototype)}};oo=N_=R([Ne({type:be.Sequence,itemType:Jr})],oo);var Yc;(function(t){t[t.v1=0]="v1",t[t.v2=1]="v2",t[t.v3=2]="v3"})(Yc||(Yc={}));class zr{constructor(e={}){this.version=Yc.v1,this.serialNumber=new ArrayBuffer(0),this.signature=new Ie,this.issuer=new Bn,this.validity=new ay,this.subject=new Bn,this.subjectPublicKeyInfo=new pi,Object.assign(this,e)}}R([I({type:ne.Integer,context:0,defaultValue:Yc.v1})],zr.prototype,"version",void 0);R([I({type:ne.Integer,converter:Qt})],zr.prototype,"serialNumber",void 0);R([I({type:Ie})],zr.prototype,"signature",void 0);R([I({type:Bn})],zr.prototype,"issuer",void 0);R([I({type:ay})],zr.prototype,"validity",void 0);R([I({type:Bn})],zr.prototype,"subject",void 0);R([I({type:pi})],zr.prototype,"subjectPublicKeyInfo",void 0);R([I({type:ne.BitString,context:1,implicit:!0,optional:!0})],zr.prototype,"issuerUniqueID",void 0);R([I({type:ne.BitString,context:2,implicit:!0,optional:!0})],zr.prototype,"subjectUniqueID",void 0);R([I({type:oo,context:3,optional:!0})],zr.prototype,"extensions",void 0);class Xc{constructor(e={}){this.tbsCertificate=new zr,this.signatureAlgorithm=new Ie,this.signatureValue=new ArrayBuffer(0),Object.assign(this,e)}}R([I({type:zr,raw:!0})],Xc.prototype,"tbsCertificate",void 0);R([I({type:Ie})],Xc.prototype,"signatureAlgorithm",void 0);R([I({type:ne.BitString})],Xc.prototype,"signatureValue",void 0);class ly{constructor(e={}){this.userCertificate=new ArrayBuffer(0),this.revocationDate=new ss,Object.assign(this,e)}}R([I({type:ne.Integer,converter:Qt})],ly.prototype,"userCertificate",void 0);R([I({type:ss})],ly.prototype,"revocationDate",void 0);R([I({type:Jr,optional:!0,repeated:"sequence"})],ly.prototype,"crlEntryExtensions",void 0);class pa{constructor(e={}){this.signature=new Ie,this.issuer=new Bn,this.thisUpdate=new ss,Object.assign(this,e)}}R([I({type:ne.Integer,optional:!0})],pa.prototype,"version",void 0);R([I({type:Ie})],pa.prototype,"signature",void 0);R([I({type:Bn})],pa.prototype,"issuer",void 0);R([I({type:ss})],pa.prototype,"thisUpdate",void 0);R([I({type:ss,optional:!0})],pa.prototype,"nextUpdate",void 0);R([I({type:ly,repeated:"sequence",optional:!0})],pa.prototype,"revokedCertificates",void 0);R([I({type:Jr,optional:!0,context:0,repeated:"sequence"})],pa.prototype,"crlExtensions",void 0);class R2{constructor(e={}){this.tbsCertList=new pa,this.signatureAlgorithm=new Ie,this.signature=new ArrayBuffer(0),Object.assign(this,e)}}R([I({type:pa,raw:!0})],R2.prototype,"tbsCertList",void 0);R([I({type:Ie})],R2.prototype,"signatureAlgorithm",void 0);R([I({type:ne.BitString})],R2.prototype,"signature",void 0);class _u{constructor(e={}){this.issuer=new Bn,this.serialNumber=new ArrayBuffer(0),Object.assign(this,e)}}R([I({type:Bn})],_u.prototype,"issuer",void 0);R([I({type:ne.Integer,converter:Qt})],_u.prototype,"serialNumber",void 0);let Jc=class{constructor(e={}){Object.assign(this,e)}};R([I({type:il,context:0,implicit:!0})],Jc.prototype,"subjectKeyIdentifier",void 0);R([I({type:_u})],Jc.prototype,"issuerAndSerialNumber",void 0);Jc=R([Ne({type:be.Choice})],Jc);var ia;(function(t){t[t.v0=0]="v0",t[t.v1=1]="v1",t[t.v2=2]="v2",t[t.v3=3]="v3",t[t.v4=4]="v4",t[t.v5=5]="v5"})(ia||(ia={}));let Qd=class extends Ie{};Qd=R([Ne({type:be.Sequence})],Qd);let L0=class extends Ie{};L0=R([Ne({type:be.Sequence})],L0);let xi=class extends Ie{};xi=R([Ne({type:be.Sequence})],xi);let I0=class extends Ie{};I0=R([Ne({type:be.Sequence})],I0);let EE=class extends Ie{};EE=R([Ne({type:be.Sequence})],EE);let A_=class extends Ie{};A_=R([Ne({type:be.Sequence})],A_);let wu=class{constructor(e={}){this.attrType="",this.attrValues=[],Object.assign(this,e)}};R([I({type:ne.ObjectIdentifier})],wu.prototype,"attrType",void 0);R([I({type:ne.Any,repeated:"set"})],wu.prototype,"attrValues",void 0);var E_;class Ai{constructor(e={}){this.version=ia.v0,this.sid=new Jc,this.digestAlgorithm=new Qd,this.signatureAlgorithm=new L0,this.signature=new At,Object.assign(this,e)}}R([I({type:ne.Integer})],Ai.prototype,"version",void 0);R([I({type:Jc})],Ai.prototype,"sid",void 0);R([I({type:Qd})],Ai.prototype,"digestAlgorithm",void 0);R([I({type:wu,repeated:"set",context:0,implicit:!0,optional:!0,raw:!0})],Ai.prototype,"signedAttrs",void 0);R([I({type:L0})],Ai.prototype,"signatureAlgorithm",void 0);R([I({type:At})],Ai.prototype,"signature",void 0);R([I({type:wu,repeated:"set",context:1,implicit:!0,optional:!0})],Ai.prototype,"unsignedAttrs",void 0);let P0=E_=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,E_.prototype)}};P0=E_=R([Ne({type:be.Set,itemType:Ai})],P0);let jE=class extends Ai{};jE=R([Ne({type:be.Sequence})],jE);let TE=class extends ss{};TE=R([Ne({type:be.Choice})],TE);class O2{constructor(e={}){this.acIssuer=new ot,this.acSerial=0,this.attrs=[],Object.assign(this,e)}}R([I({type:ot})],O2.prototype,"acIssuer",void 0);R([I({type:ne.Integer})],O2.prototype,"acSerial",void 0);R([I({type:ra,repeated:"sequence"})],O2.prototype,"attrs",void 0);var j_;let z0=j_=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,j_.prototype)}};z0=j_=R([Ne({type:be.Sequence,itemType:ne.ObjectIdentifier})],z0);class oy{constructor(e={}){this.permitUnSpecified=!0,Object.assign(this,e)}}R([I({type:ne.Integer,optional:!0})],oy.prototype,"pathLenConstraint",void 0);R([I({type:z0,implicit:!0,context:0,optional:!0})],oy.prototype,"permittedAttrs",void 0);R([I({type:z0,implicit:!0,context:1,optional:!0})],oy.prototype,"excludedAttrs",void 0);R([I({type:ne.Boolean,defaultValue:!0})],oy.prototype,"permitUnSpecified",void 0);class Co{constructor(e={}){this.issuer=new fs,this.serial=new ArrayBuffer(0),this.issuerUID=new ArrayBuffer(0),Object.assign(this,e)}}R([I({type:fs})],Co.prototype,"issuer",void 0);R([I({type:ne.Integer,converter:Qt})],Co.prototype,"serial",void 0);R([I({type:ne.BitString,optional:!0})],Co.prototype,"issuerUID",void 0);var T_;(function(t){t[t.publicKey=0]="publicKey",t[t.publicKeyCert=1]="publicKeyCert",t[t.otherObjectTypes=2]="otherObjectTypes"})(T_||(T_={}));class No{constructor(e={}){this.digestedObjectType=T_.publicKey,this.digestAlgorithm=new Ie,this.objectDigest=new ArrayBuffer(0),Object.assign(this,e)}}R([I({type:ne.Enumerated})],No.prototype,"digestedObjectType",void 0);R([I({type:ne.ObjectIdentifier,optional:!0})],No.prototype,"otherObjectTypeID",void 0);R([I({type:Ie})],No.prototype,"digestAlgorithm",void 0);R([I({type:ne.BitString})],No.prototype,"objectDigest",void 0);class cy{constructor(e={}){Object.assign(this,e)}}R([I({type:fs,optional:!0})],cy.prototype,"issuerName",void 0);R([I({type:Co,context:0,implicit:!0,optional:!0})],cy.prototype,"baseCertificateID",void 0);R([I({type:No,context:1,implicit:!0,optional:!0})],cy.prototype,"objectDigestInfo",void 0);let Qc=class{constructor(e={}){Object.assign(this,e)}};R([I({type:ot,repeated:"sequence"})],Qc.prototype,"v1Form",void 0);R([I({type:cy,context:0,implicit:!0})],Qc.prototype,"v2Form",void 0);Qc=R([Ne({type:be.Choice})],Qc);class uy{constructor(e={}){this.notBeforeTime=new Date,this.notAfterTime=new Date,Object.assign(this,e)}}R([I({type:ne.GeneralizedTime})],uy.prototype,"notBeforeTime",void 0);R([I({type:ne.GeneralizedTime})],uy.prototype,"notAfterTime",void 0);class Af{constructor(e={}){Object.assign(this,e)}}R([I({type:Co,implicit:!0,context:0,optional:!0})],Af.prototype,"baseCertificateID",void 0);R([I({type:fs,implicit:!0,context:1,optional:!0})],Af.prototype,"entityName",void 0);R([I({type:No,implicit:!0,context:2,optional:!0})],Af.prototype,"objectDigestInfo",void 0);var R_;(function(t){t[t.v2=1]="v2"})(R_||(R_={}));class Zr{constructor(e={}){this.version=R_.v2,this.holder=new Af,this.issuer=new Qc,this.signature=new Ie,this.serialNumber=new ArrayBuffer(0),this.attrCertValidityPeriod=new uy,this.attributes=[],Object.assign(this,e)}}R([I({type:ne.Integer})],Zr.prototype,"version",void 0);R([I({type:Af})],Zr.prototype,"holder",void 0);R([I({type:Qc})],Zr.prototype,"issuer",void 0);R([I({type:Ie})],Zr.prototype,"signature",void 0);R([I({type:ne.Integer,converter:Qt})],Zr.prototype,"serialNumber",void 0);R([I({type:uy})],Zr.prototype,"attrCertValidityPeriod",void 0);R([I({type:ra,repeated:"sequence"})],Zr.prototype,"attributes",void 0);R([I({type:ne.BitString,optional:!0})],Zr.prototype,"issuerUniqueID",void 0);R([I({type:oo,optional:!0})],Zr.prototype,"extensions",void 0);class hy{constructor(e={}){this.acinfo=new Zr,this.signatureAlgorithm=new Ie,this.signatureValue=new ArrayBuffer(0),Object.assign(this,e)}}R([I({type:Zr})],hy.prototype,"acinfo",void 0);R([I({type:Ie})],hy.prototype,"signatureAlgorithm",void 0);R([I({type:ne.BitString})],hy.prototype,"signatureValue",void 0);var $0;(function(t){t[t.unmarked=1]="unmarked",t[t.unclassified=2]="unclassified",t[t.restricted=4]="restricted",t[t.confidential=8]="confidential",t[t.secret=16]="secret",t[t.topSecret=32]="topSecret"})($0||($0={}));class O_ extends ty{}class B2{constructor(e={}){this.type="",this.value=new ArrayBuffer(0),Object.assign(this,e)}}R([I({type:ne.ObjectIdentifier,implicit:!0,context:0})],B2.prototype,"type",void 0);R([I({type:ne.Any,implicit:!0,context:1})],B2.prototype,"value",void 0);class M2{constructor(e={}){this.policyId="",this.classList=new O_($0.unclassified),Object.assign(this,e)}}R([I({type:ne.ObjectIdentifier})],M2.prototype,"policyId",void 0);R([I({type:O_,defaultValue:new O_($0.unclassified)})],M2.prototype,"classList",void 0);R([I({type:B2,repeated:"set"})],M2.prototype,"securityCategories",void 0);class dy{constructor(e={}){Object.assign(this,e)}}R([I({type:At})],dy.prototype,"cotets",void 0);R([I({type:ne.ObjectIdentifier})],dy.prototype,"oid",void 0);R([I({type:ne.Utf8String})],dy.prototype,"string",void 0);class xB{constructor(e={}){this.values=[],Object.assign(this,e)}}R([I({type:fs,implicit:!0,context:0,optional:!0})],xB.prototype,"policyAuthority",void 0);R([I({type:dy,repeated:"sequence"})],xB.prototype,"values",void 0);var B_;class fy{constructor(e={}){this.targetCertificate=new Co,Object.assign(this,e)}}R([I({type:Co})],fy.prototype,"targetCertificate",void 0);R([I({type:ot,optional:!0})],fy.prototype,"targetName",void 0);R([I({type:No,optional:!0})],fy.prototype,"certDigestInfo",void 0);let Zc=class{constructor(e={}){Object.assign(this,e)}};R([I({type:ot,context:0,implicit:!0})],Zc.prototype,"targetName",void 0);R([I({type:ot,context:1,implicit:!0})],Zc.prototype,"targetGroup",void 0);R([I({type:fy,context:2,implicit:!0})],Zc.prototype,"targetCert",void 0);Zc=R([Ne({type:be.Choice})],Zc);let M_=B_=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,B_.prototype)}};M_=B_=R([Ne({type:be.Sequence,itemType:Zc})],M_);var D_;let RE=D_=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,D_.prototype)}};RE=D_=R([Ne({type:be.Sequence,itemType:M_})],RE);class _B{constructor(e={}){Object.assign(this,e)}}R([I({type:fs,implicit:!0,context:0,optional:!0})],_B.prototype,"roleAuthority",void 0);R([I({type:ot,implicit:!0,context:1})],_B.prototype,"roleName",void 0);class D2{constructor(e={}){this.service=new ot,this.ident=new ot,Object.assign(this,e)}}R([I({type:ot})],D2.prototype,"service",void 0);R([I({type:ot})],D2.prototype,"ident",void 0);R([I({type:At,optional:!0})],D2.prototype,"authInfo",void 0);var L_;class L2{constructor(e={}){this.otherCertFormat="",this.otherCert=new ArrayBuffer(0),Object.assign(this,e)}}R([I({type:ne.ObjectIdentifier})],L2.prototype,"otherCertFormat",void 0);R([I({type:ne.Any})],L2.prototype,"otherCert",void 0);let eu=class{constructor(e={}){Object.assign(this,e)}};R([I({type:Xc})],eu.prototype,"certificate",void 0);R([I({type:hy,context:2,implicit:!0})],eu.prototype,"v2AttrCert",void 0);R([I({type:L2,context:3,implicit:!0})],eu.prototype,"other",void 0);eu=R([Ne({type:be.Choice})],eu);let H0=L_=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,L_.prototype)}};H0=L_=R([Ne({type:be.Set,itemType:eu})],H0);class Su{constructor(e={}){this.contentType="",this.content=new ArrayBuffer(0),Object.assign(this,e)}}R([I({type:ne.ObjectIdentifier})],Su.prototype,"contentType",void 0);R([I({type:ne.Any,context:0})],Su.prototype,"content",void 0);let Zd=class{constructor(e={}){Object.assign(this,e)}};R([I({type:At})],Zd.prototype,"single",void 0);R([I({type:ne.Any})],Zd.prototype,"any",void 0);Zd=R([Ne({type:be.Choice})],Zd);class py{constructor(e={}){this.eContentType="",Object.assign(this,e)}}R([I({type:ne.ObjectIdentifier})],py.prototype,"eContentType",void 0);R([I({type:Zd,context:0,optional:!0})],py.prototype,"eContent",void 0);let ef=class{constructor(e={}){Object.assign(this,e)}};R([I({type:At,context:0,implicit:!0,optional:!0})],ef.prototype,"value",void 0);R([I({type:At,converter:uW,context:0,implicit:!0,optional:!0,repeated:"sequence"})],ef.prototype,"constructedValue",void 0);ef=R([Ne({type:be.Choice})],ef);class Ef{constructor(e={}){this.contentType="",this.contentEncryptionAlgorithm=new I0,Object.assign(this,e)}}R([I({type:ne.ObjectIdentifier})],Ef.prototype,"contentType",void 0);R([I({type:I0})],Ef.prototype,"contentEncryptionAlgorithm",void 0);R([I({type:ef,optional:!0})],Ef.prototype,"encryptedContent",void 0);class my{constructor(e={}){this.keyAttrId="",Object.assign(this,e)}}R([I({type:ne.ObjectIdentifier})],my.prototype,"keyAttrId",void 0);R([I({type:ne.Any,optional:!0})],my.prototype,"keyAttr",void 0);var I_;class gy{constructor(e={}){this.subjectKeyIdentifier=new il,Object.assign(this,e)}}R([I({type:il})],gy.prototype,"subjectKeyIdentifier",void 0);R([I({type:ne.GeneralizedTime,optional:!0})],gy.prototype,"date",void 0);R([I({type:my,optional:!0})],gy.prototype,"other",void 0);let tu=class{constructor(e={}){Object.assign(this,e)}};R([I({type:gy,context:0,implicit:!0,optional:!0})],tu.prototype,"rKeyId",void 0);R([I({type:_u,optional:!0})],tu.prototype,"issuerAndSerialNumber",void 0);tu=R([Ne({type:be.Choice})],tu);class I2{constructor(e={}){this.rid=new tu,this.encryptedKey=new At,Object.assign(this,e)}}R([I({type:tu})],I2.prototype,"rid",void 0);R([I({type:At})],I2.prototype,"encryptedKey",void 0);let U0=I_=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,I_.prototype)}};U0=I_=R([Ne({type:be.Sequence,itemType:I2})],U0);class P2{constructor(e={}){this.algorithm=new Ie,this.publicKey=new ArrayBuffer(0),Object.assign(this,e)}}R([I({type:Ie})],P2.prototype,"algorithm",void 0);R([I({type:ne.BitString})],P2.prototype,"publicKey",void 0);let co=class{constructor(e={}){Object.assign(this,e)}};R([I({type:il,context:0,implicit:!0,optional:!0})],co.prototype,"subjectKeyIdentifier",void 0);R([I({type:P2,context:1,implicit:!0,optional:!0})],co.prototype,"originatorKey",void 0);R([I({type:_u,optional:!0})],co.prototype,"issuerAndSerialNumber",void 0);co=R([Ne({type:be.Choice})],co);class ku{constructor(e={}){this.version=ia.v3,this.originator=new co,this.keyEncryptionAlgorithm=new xi,this.recipientEncryptedKeys=new U0,Object.assign(this,e)}}R([I({type:ne.Integer})],ku.prototype,"version",void 0);R([I({type:co,context:0})],ku.prototype,"originator",void 0);R([I({type:At,context:1,optional:!0})],ku.prototype,"ukm",void 0);R([I({type:xi})],ku.prototype,"keyEncryptionAlgorithm",void 0);R([I({type:U0})],ku.prototype,"recipientEncryptedKeys",void 0);let nu=class{constructor(e={}){Object.assign(this,e)}};R([I({type:il,context:0,implicit:!0})],nu.prototype,"subjectKeyIdentifier",void 0);R([I({type:_u})],nu.prototype,"issuerAndSerialNumber",void 0);nu=R([Ne({type:be.Choice})],nu);class jf{constructor(e={}){this.version=ia.v0,this.rid=new nu,this.keyEncryptionAlgorithm=new xi,this.encryptedKey=new At,Object.assign(this,e)}}R([I({type:ne.Integer})],jf.prototype,"version",void 0);R([I({type:nu})],jf.prototype,"rid",void 0);R([I({type:xi})],jf.prototype,"keyEncryptionAlgorithm",void 0);R([I({type:At})],jf.prototype,"encryptedKey",void 0);class Tf{constructor(e={}){this.keyIdentifier=new At,Object.assign(this,e)}}R([I({type:At})],Tf.prototype,"keyIdentifier",void 0);R([I({type:ne.GeneralizedTime,optional:!0})],Tf.prototype,"date",void 0);R([I({type:my,optional:!0})],Tf.prototype,"other",void 0);class Rf{constructor(e={}){this.version=ia.v4,this.kekid=new Tf,this.keyEncryptionAlgorithm=new xi,this.encryptedKey=new At,Object.assign(this,e)}}R([I({type:ne.Integer})],Rf.prototype,"version",void 0);R([I({type:Tf})],Rf.prototype,"kekid",void 0);R([I({type:xi})],Rf.prototype,"keyEncryptionAlgorithm",void 0);R([I({type:At})],Rf.prototype,"encryptedKey",void 0);class Of{constructor(e={}){this.version=ia.v0,this.keyEncryptionAlgorithm=new xi,this.encryptedKey=new At,Object.assign(this,e)}}R([I({type:ne.Integer})],Of.prototype,"version",void 0);R([I({type:A_,context:0,optional:!0})],Of.prototype,"keyDerivationAlgorithm",void 0);R([I({type:xi})],Of.prototype,"keyEncryptionAlgorithm",void 0);R([I({type:At})],Of.prototype,"encryptedKey",void 0);class z2{constructor(e={}){this.oriType="",this.oriValue=new ArrayBuffer(0),Object.assign(this,e)}}R([I({type:ne.ObjectIdentifier})],z2.prototype,"oriType",void 0);R([I({type:ne.Any})],z2.prototype,"oriValue",void 0);let ul=class{constructor(e={}){Object.assign(this,e)}};R([I({type:jf,optional:!0})],ul.prototype,"ktri",void 0);R([I({type:ku,context:1,implicit:!0,optional:!0})],ul.prototype,"kari",void 0);R([I({type:Rf,context:2,implicit:!0,optional:!0})],ul.prototype,"kekri",void 0);R([I({type:Of,context:3,implicit:!0,optional:!0})],ul.prototype,"pwri",void 0);R([I({type:z2,context:4,implicit:!0,optional:!0})],ul.prototype,"ori",void 0);ul=R([Ne({type:be.Choice})],ul);var P_;let V0=P_=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,P_.prototype)}};V0=P_=R([Ne({type:be.Set,itemType:ul})],V0);var z_;class yy{constructor(e={}){this.otherRevInfoFormat="",this.otherRevInfo=new ArrayBuffer(0),Object.assign(this,e)}}R([I({type:ne.ObjectIdentifier})],yy.prototype,"otherRevInfoFormat",void 0);R([I({type:ne.Any})],yy.prototype,"otherRevInfo",void 0);let F0=class{constructor(e={}){this.other=new yy,Object.assign(this,e)}};R([I({type:yy,context:1,implicit:!0})],F0.prototype,"other",void 0);F0=R([Ne({type:be.Choice})],F0);let q0=z_=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,z_.prototype)}};q0=z_=R([Ne({type:be.Set,itemType:F0})],q0);class $2{constructor(e={}){Object.assign(this,e)}}R([I({type:H0,context:0,implicit:!0,optional:!0})],$2.prototype,"certs",void 0);R([I({type:q0,context:1,implicit:!0,optional:!0})],$2.prototype,"crls",void 0);var $_;let H_=$_=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,$_.prototype)}};H_=$_=R([Ne({type:be.Set,itemType:wu})],H_);class Bf{constructor(e={}){this.version=ia.v0,this.recipientInfos=new V0,this.encryptedContentInfo=new Ef,Object.assign(this,e)}}R([I({type:ne.Integer})],Bf.prototype,"version",void 0);R([I({type:$2,context:0,implicit:!0,optional:!0})],Bf.prototype,"originatorInfo",void 0);R([I({type:V0})],Bf.prototype,"recipientInfos",void 0);R([I({type:Ef})],Bf.prototype,"encryptedContentInfo",void 0);R([I({type:H_,context:1,implicit:!0,optional:!0})],Bf.prototype,"unprotectedAttrs",void 0);const LW="1.2.840.113549.1.7.2";var U_;let K0=U_=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,U_.prototype)}};K0=U_=R([Ne({type:be.Set,itemType:Qd})],K0);class Cu{constructor(e={}){this.version=ia.v0,this.digestAlgorithms=new K0,this.encapContentInfo=new py,this.signerInfos=new P0,Object.assign(this,e)}}R([I({type:ne.Integer})],Cu.prototype,"version",void 0);R([I({type:K0})],Cu.prototype,"digestAlgorithms",void 0);R([I({type:py})],Cu.prototype,"encapContentInfo",void 0);R([I({type:H0,context:0,implicit:!0,optional:!0})],Cu.prototype,"certificates",void 0);R([I({type:q0,context:1,implicit:!0,optional:!0})],Cu.prototype,"crls",void 0);R([I({type:P0})],Cu.prototype,"signerInfos",void 0);const tf="1.2.840.10045.2.1",H2="1.2.840.10045.4.1",wB="1.2.840.10045.4.3.1",U2="1.2.840.10045.4.3.2",V2="1.2.840.10045.4.3.3",F2="1.2.840.10045.4.3.4",OE="1.2.840.10045.3.1.7",BE="1.3.132.0.34",ME="1.3.132.0.35";function Mf(t){return new Ie({algorithm:t})}const IW=Mf(H2);Mf(wB);const PW=Mf(U2),zW=Mf(V2),$W=Mf(F2);let nf=class{constructor(e={}){Object.assign(this,e)}};R([I({type:ne.ObjectIdentifier})],nf.prototype,"fieldType",void 0);R([I({type:ne.Any})],nf.prototype,"parameters",void 0);nf=R([Ne({type:be.Sequence})],nf);class HW extends At{}let su=class{constructor(e={}){Object.assign(this,e)}};R([I({type:ne.OctetString})],su.prototype,"a",void 0);R([I({type:ne.OctetString})],su.prototype,"b",void 0);R([I({type:ne.BitString,optional:!0})],su.prototype,"seed",void 0);su=R([Ne({type:be.Sequence})],su);var V_;(function(t){t[t.ecpVer1=1]="ecpVer1"})(V_||(V_={}));let aa=class{constructor(e={}){this.version=V_.ecpVer1,Object.assign(this,e)}};R([I({type:ne.Integer})],aa.prototype,"version",void 0);R([I({type:nf})],aa.prototype,"fieldID",void 0);R([I({type:su})],aa.prototype,"curve",void 0);R([I({type:HW})],aa.prototype,"base",void 0);R([I({type:ne.Integer,converter:Qt})],aa.prototype,"order",void 0);R([I({type:ne.Integer,optional:!0})],aa.prototype,"cofactor",void 0);aa=R([Ne({type:be.Sequence})],aa);let hl=class{constructor(e={}){Object.assign(this,e)}};R([I({type:ne.ObjectIdentifier})],hl.prototype,"namedCurve",void 0);R([I({type:ne.Null})],hl.prototype,"implicitCurve",void 0);R([I({type:aa})],hl.prototype,"specifiedCurve",void 0);hl=R([Ne({type:be.Choice})],hl);class vy{constructor(e={}){this.version=1,this.privateKey=new At,Object.assign(this,e)}}R([I({type:ne.Integer})],vy.prototype,"version",void 0);R([I({type:At})],vy.prototype,"privateKey",void 0);R([I({type:hl,context:0,optional:!0})],vy.prototype,"parameters",void 0);R([I({type:ne.BitString,context:1,optional:!0})],vy.prototype,"publicKey",void 0);class W0{constructor(e={}){this.r=new ArrayBuffer(0),this.s=new ArrayBuffer(0),Object.assign(this,e)}}R([I({type:ne.Integer,converter:Qt})],W0.prototype,"r",void 0);R([I({type:ne.Integer,converter:Qt})],W0.prototype,"s",void 0);const Fs="1.2.840.113549.1.1",uo=`${Fs}.1`,UW=`${Fs}.7`,VW=`${Fs}.9`,Ld=`${Fs}.10`,FW=`${Fs}.2`,qW=`${Fs}.4`,G0=`${Fs}.5`,KW=`${Fs}.14`,F_=`${Fs}.11`,Y0=`${Fs}.12`,X0=`${Fs}.13`,SB=`${Fs}.15`,kB=`${Fs}.16`,J0="1.3.14.3.2.26",CB="2.16.840.1.101.3.4.2.4",Q0="2.16.840.1.101.3.4.2.1",Z0="2.16.840.1.101.3.4.2.2",eg="2.16.840.1.101.3.4.2.3",WW="2.16.840.1.101.3.4.2.5",GW="2.16.840.1.101.3.4.2.6",YW="1.2.840.113549.2.2",XW="1.2.840.113549.2.5",by=`${Fs}.8`;function Ln(t){return new Ie({algorithm:t,parameters:null})}Ln(YW);Ln(XW);const ho=Ln(J0);Ln(CB);Ln(Q0);Ln(Z0);Ln(eg);Ln(WW);Ln(GW);const NB=new Ie({algorithm:by,parameters:Me.serialize(ho)}),AB=new Ie({algorithm:VW,parameters:Me.serialize(j0.toASN(new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer))});Ln(uo);Ln(FW);Ln(qW);Ln(G0);Ln(SB);Ln(kB);Ln(Y0);Ln(X0);Ln(SB);Ln(kB);class xy{constructor(e={}){this.hashAlgorithm=new Ie(ho),this.maskGenAlgorithm=new Ie({algorithm:by,parameters:Me.serialize(ho)}),this.pSourceAlgorithm=new Ie(AB),Object.assign(this,e)}}R([I({type:Ie,context:0,defaultValue:ho})],xy.prototype,"hashAlgorithm",void 0);R([I({type:Ie,context:1,defaultValue:NB})],xy.prototype,"maskGenAlgorithm",void 0);R([I({type:Ie,context:2,defaultValue:AB})],xy.prototype,"pSourceAlgorithm",void 0);new Ie({algorithm:UW,parameters:Me.serialize(new xy)});class fo{constructor(e={}){this.hashAlgorithm=new Ie(ho),this.maskGenAlgorithm=new Ie({algorithm:by,parameters:Me.serialize(ho)}),this.saltLength=20,this.trailerField=1,Object.assign(this,e)}}R([I({type:Ie,context:0,defaultValue:ho})],fo.prototype,"hashAlgorithm",void 0);R([I({type:Ie,context:1,defaultValue:NB})],fo.prototype,"maskGenAlgorithm",void 0);R([I({type:ne.Integer,context:2,defaultValue:20})],fo.prototype,"saltLength",void 0);R([I({type:ne.Integer,context:3,defaultValue:1})],fo.prototype,"trailerField",void 0);new Ie({algorithm:Ld,parameters:Me.serialize(new fo)});class _y{constructor(e={}){this.digestAlgorithm=new Ie,this.digest=new At,Object.assign(this,e)}}R([I({type:Ie})],_y.prototype,"digestAlgorithm",void 0);R([I({type:At})],_y.prototype,"digest",void 0);var q_;class wy{constructor(e={}){this.prime=new ArrayBuffer(0),this.exponent=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0),Object.assign(this,e)}}R([I({type:ne.Integer,converter:Qt})],wy.prototype,"prime",void 0);R([I({type:ne.Integer,converter:Qt})],wy.prototype,"exponent",void 0);R([I({type:ne.Integer,converter:Qt})],wy.prototype,"coefficient",void 0);let K_=q_=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,q_.prototype)}};K_=q_=R([Ne({type:be.Sequence,itemType:wy})],K_);class Ei{constructor(e={}){this.version=0,this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),this.privateExponent=new ArrayBuffer(0),this.prime1=new ArrayBuffer(0),this.prime2=new ArrayBuffer(0),this.exponent1=new ArrayBuffer(0),this.exponent2=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0),Object.assign(this,e)}}R([I({type:ne.Integer})],Ei.prototype,"version",void 0);R([I({type:ne.Integer,converter:Qt})],Ei.prototype,"modulus",void 0);R([I({type:ne.Integer,converter:Qt})],Ei.prototype,"publicExponent",void 0);R([I({type:ne.Integer,converter:Qt})],Ei.prototype,"privateExponent",void 0);R([I({type:ne.Integer,converter:Qt})],Ei.prototype,"prime1",void 0);R([I({type:ne.Integer,converter:Qt})],Ei.prototype,"prime2",void 0);R([I({type:ne.Integer,converter:Qt})],Ei.prototype,"exponent1",void 0);R([I({type:ne.Integer,converter:Qt})],Ei.prototype,"exponent2",void 0);R([I({type:ne.Integer,converter:Qt})],Ei.prototype,"coefficient",void 0);R([I({type:K_,optional:!0})],Ei.prototype,"otherPrimeInfos",void 0);class q2{constructor(e={}){this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),Object.assign(this,e)}}R([I({type:ne.Integer,converter:Qt})],q2.prototype,"modulus",void 0);R([I({type:ne.Integer,converter:Qt})],q2.prototype,"publicExponent",void 0);var W_;(function(t){t[t.Transient=0]="Transient",t[t.Singleton=1]="Singleton",t[t.ResolutionScoped=2]="ResolutionScoped",t[t.ContainerScoped=3]="ContainerScoped"})(W_||(W_={}));const Ls=W_;var G_=function(t,e){return G_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var r in s)s.hasOwnProperty(r)&&(n[r]=s[r])},G_(t,e)};function K2(t,e){G_(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function JW(t,e,n,s){function r(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function c(g){try{d(s.next(g))}catch(m){o(m)}}function h(g){try{d(s.throw(g))}catch(m){o(m)}}function d(g){g.done?a(g.value):r(g.value).then(c,h)}d((s=s.apply(t,[])).next())})}function QW(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},s,r,a,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(d){return function(g){return h([d,g])}}function h(d){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,r&&(a=d[0]&2?r.return:d[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,d[1])).done)return a;switch(r=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,r=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){n.label=d[1];break}if(d[0]===6&&n.label<a[1]){n.label=a[1],a=d;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(d);break}a[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(t,n)}catch(g){d=[6,g],r=0}finally{s=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function bm(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function tg(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),r,a=[],o;try{for(;(e===void 0||e-- >0)&&!(r=s.next()).done;)a.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return a}function Ul(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(tg(arguments[e]));return t}var ZW="injectionTokens";function eG(t){var e=Reflect.getMetadata("design:paramtypes",t)||[],n=Reflect.getOwnMetadata(ZW,t)||{};return Object.keys(n).forEach(function(s){e[+s]=n[s]}),e}function EB(t){return!!t.useClass}function Y_(t){return!!t.useFactory}var jB=(function(){function t(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return t.prototype.createProxy=function(e){var n=this,s={},r=!1,a,o=function(){return r||(a=e(n.wrap()),r=!0),a};return new Proxy(s,this.createHandler(o))},t.prototype.createHandler=function(e){var n={},s=function(r){n[r]=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];a[0]=e();var c=Reflect[r];return c.apply(void 0,Ul(a))}};return this.reflectMethods.forEach(s),n},t})();function bc(t){return typeof t=="string"||typeof t=="symbol"}function tG(t){return typeof t=="object"&&"token"in t&&"multiple"in t}function DE(t){return typeof t=="object"&&"token"in t&&"transform"in t}function nG(t){return typeof t=="function"||t instanceof jB}function Gm(t){return!!t.useToken}function Ym(t){return t.useValue!=null}function sG(t){return EB(t)||Ym(t)||Gm(t)||Y_(t)}var W2=(function(){function t(){this._registryMap=new Map}return t.prototype.entries=function(){return this._registryMap.entries()},t.prototype.getAll=function(e){return this.ensure(e),this._registryMap.get(e)},t.prototype.get=function(e){this.ensure(e);var n=this._registryMap.get(e);return n[n.length-1]||null},t.prototype.set=function(e,n){this.ensure(e),this._registryMap.get(e).push(n)},t.prototype.setAll=function(e,n){this._registryMap.set(e,n)},t.prototype.has=function(e){return this.ensure(e),this._registryMap.get(e).length>0},t.prototype.clear=function(){this._registryMap.clear()},t.prototype.ensure=function(e){this._registryMap.has(e)||this._registryMap.set(e,[])},t})(),rG=(function(t){K2(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(W2),xm=(function(){function t(){this.scopedResolutions=new Map}return t})();function iG(t,e){if(t===null)return"at position #"+e;var n=t.split(",")[e].trim();return'"'+n+'" at position #'+e}function aG(t,e,n){return n===void 0&&(n="    "),Ul([t],e.message.split(`
`).map(function(s){return n+s})).join(`
`)}function lG(t,e,n){var s=tg(t.toString().match(/constructor\(([\w, ]+)\)/)||[],2),r=s[1],a=r===void 0?null:r,o=iG(a,e);return aG("Cannot inject the dependency "+o+' of "'+t.name+'" constructor. Reason:',n)}function oG(t){if(typeof t.dispose!="function")return!1;var e=t.dispose;return!(e.length>0)}var cG=(function(t){K2(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(W2),uG=(function(t){K2(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(W2),hG=(function(){function t(){this.preResolution=new cG,this.postResolution=new uG}return t})(),TB=new Map,dG=(function(){function t(e){this.parent=e,this._registry=new rG,this.interceptors=new hG,this.disposed=!1,this.disposables=new Set}return t.prototype.register=function(e,n,s){s===void 0&&(s={lifecycle:Ls.Transient}),this.ensureNotDisposed();var r;if(sG(n)?r=n:r={useClass:n},Gm(r))for(var a=[e],o=r;o!=null;){var c=o.useToken;if(a.includes(c))throw new Error("Token registration cycle detected! "+Ul(a,[c]).join(" -> "));a.push(c);var h=this._registry.get(c);h&&Gm(h.provider)?o=h.provider:o=null}if((s.lifecycle===Ls.Singleton||s.lifecycle==Ls.ContainerScoped||s.lifecycle==Ls.ResolutionScoped)&&(Ym(r)||Y_(r)))throw new Error('Cannot use lifecycle "'+Ls[s.lifecycle]+'" with ValueProviders or FactoryProviders');return this._registry.set(e,{provider:r,options:s}),this},t.prototype.registerType=function(e,n){return this.ensureNotDisposed(),bc(n)?this.register(e,{useToken:n}):this.register(e,{useClass:n})},t.prototype.registerInstance=function(e,n){return this.ensureNotDisposed(),this.register(e,{useValue:n})},t.prototype.registerSingleton=function(e,n){if(this.ensureNotDisposed(),bc(e)){if(bc(n))return this.register(e,{useToken:n},{lifecycle:Ls.Singleton});if(n)return this.register(e,{useClass:n},{lifecycle:Ls.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var s=e;return n&&!bc(n)&&(s=n),this.register(e,{useClass:s},{lifecycle:Ls.Singleton})},t.prototype.resolve=function(e,n,s){n===void 0&&(n=new xm),s===void 0&&(s=!1),this.ensureNotDisposed();var r=this.getRegistration(e);if(!r&&bc(e)){if(s)return;throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"')}if(this.executePreResolutionInterceptor(e,"Single"),r){var a=this.resolveRegistration(r,n);return this.executePostResolutionInterceptor(e,a,"Single"),a}if(nG(e)){var a=this.construct(e,n);return this.executePostResolutionInterceptor(e,a,"Single"),a}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},t.prototype.executePreResolutionInterceptor=function(e,n){var s,r;if(this.interceptors.preResolution.has(e)){var a=[];try{for(var o=bm(this.interceptors.preResolution.getAll(e)),c=o.next();!c.done;c=o.next()){var h=c.value;h.options.frequency!="Once"&&a.push(h),h.callback(e,n)}}catch(d){s={error:d}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(s)throw s.error}}this.interceptors.preResolution.setAll(e,a)}},t.prototype.executePostResolutionInterceptor=function(e,n,s){var r,a;if(this.interceptors.postResolution.has(e)){var o=[];try{for(var c=bm(this.interceptors.postResolution.getAll(e)),h=c.next();!h.done;h=c.next()){var d=h.value;d.options.frequency!="Once"&&o.push(d),d.callback(e,n,s)}}catch(g){r={error:g}}finally{try{h&&!h.done&&(a=c.return)&&a.call(c)}finally{if(r)throw r.error}}this.interceptors.postResolution.setAll(e,o)}},t.prototype.resolveRegistration=function(e,n){if(this.ensureNotDisposed(),e.options.lifecycle===Ls.ResolutionScoped&&n.scopedResolutions.has(e))return n.scopedResolutions.get(e);var s=e.options.lifecycle===Ls.Singleton,r=e.options.lifecycle===Ls.ContainerScoped,a=s||r,o;return Ym(e.provider)?o=e.provider.useValue:Gm(e.provider)?o=a?e.instance||(e.instance=this.resolve(e.provider.useToken,n)):this.resolve(e.provider.useToken,n):EB(e.provider)?o=a?e.instance||(e.instance=this.construct(e.provider.useClass,n)):this.construct(e.provider.useClass,n):Y_(e.provider)?o=e.provider.useFactory(this):o=this.construct(e.provider,n),e.options.lifecycle===Ls.ResolutionScoped&&n.scopedResolutions.set(e,o),o},t.prototype.resolveAll=function(e,n,s){var r=this;n===void 0&&(n=new xm),s===void 0&&(s=!1),this.ensureNotDisposed();var a=this.getAllRegistrations(e);if(!a&&bc(e)){if(s)return[];throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"')}if(this.executePreResolutionInterceptor(e,"All"),a){var o=a.map(function(h){return r.resolveRegistration(h,n)});return this.executePostResolutionInterceptor(e,o,"All"),o}var c=[this.construct(e,n)];return this.executePostResolutionInterceptor(e,c,"All"),c},t.prototype.isRegistered=function(e,n){return n===void 0&&(n=!1),this.ensureNotDisposed(),this._registry.has(e)||n&&(this.parent||!1)&&this.parent.isRegistered(e,!0)},t.prototype.reset=function(){this.ensureNotDisposed(),this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},t.prototype.clearInstances=function(){var e,n;this.ensureNotDisposed();try{for(var s=bm(this._registry.entries()),r=s.next();!r.done;r=s.next()){var a=tg(r.value,2),o=a[0],c=a[1];this._registry.setAll(o,c.filter(function(h){return!Ym(h.provider)}).map(function(h){return h.instance=void 0,h}))}}catch(h){e={error:h}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}},t.prototype.createChildContainer=function(){var e,n;this.ensureNotDisposed();var s=new t(this);try{for(var r=bm(this._registry.entries()),a=r.next();!a.done;a=r.next()){var o=tg(a.value,2),c=o[0],h=o[1];h.some(function(d){var g=d.options;return g.lifecycle===Ls.ContainerScoped})&&s._registry.setAll(c,h.map(function(d){return d.options.lifecycle===Ls.ContainerScoped?{provider:d.provider,options:d.options}:d}))}}catch(d){e={error:d}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return s},t.prototype.beforeResolution=function(e,n,s){s===void 0&&(s={frequency:"Always"}),this.interceptors.preResolution.set(e,{callback:n,options:s})},t.prototype.afterResolution=function(e,n,s){s===void 0&&(s={frequency:"Always"}),this.interceptors.postResolution.set(e,{callback:n,options:s})},t.prototype.dispose=function(){return JW(this,void 0,void 0,function(){var e;return QW(this,function(n){switch(n.label){case 0:return this.disposed=!0,e=[],this.disposables.forEach(function(s){var r=s.dispose();r&&e.push(r)}),[4,Promise.all(e)];case 1:return n.sent(),[2]}})})},t.prototype.getRegistration=function(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null},t.prototype.getAllRegistrations=function(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null},t.prototype.construct=function(e,n){var s=this;if(e instanceof jB)return e.createProxy(function(a){return s.resolve(a,n)});var r=(function(){var a=TB.get(e);if(!a||a.length===0){if(e.length===0)return new e;throw new Error('TypeInfo not known for "'+e.name+'"')}var o=a.map(s.resolveParams(n,e));return new(e.bind.apply(e,Ul([void 0],o)))})();return oG(r)&&this.disposables.add(r),r},t.prototype.resolveParams=function(e,n){var s=this;return function(r,a){var o,c,h;try{return tG(r)?DE(r)?r.multiple?(o=s.resolve(r.transform)).transform.apply(o,Ul([s.resolveAll(r.token,new xm,r.isOptional)],r.transformArgs)):(c=s.resolve(r.transform)).transform.apply(c,Ul([s.resolve(r.token,e,r.isOptional)],r.transformArgs)):r.multiple?s.resolveAll(r.token,new xm,r.isOptional):s.resolve(r.token,e,r.isOptional):DE(r)?(h=s.resolve(r.transform,e)).transform.apply(h,Ul([s.resolve(r.token,e)],r.transformArgs)):s.resolve(r,e)}catch(d){throw new Error(lG(n,a,d))}}},t.prototype.ensureNotDisposed=function(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")},t})(),Ss=new dG;function Sy(t){return function(e){TB.set(e,eG(e))}}if(typeof Reflect>"u"||!Reflect.getMetadata)throw new Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`);var X_;class ky{constructor(e={}){this.attrId="",this.attrValues=[],Object.assign(e)}}R([I({type:ne.ObjectIdentifier})],ky.prototype,"attrId",void 0);R([I({type:ne.Any,repeated:"set"})],ky.prototype,"attrValues",void 0);let LE=X_=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,X_.prototype)}};LE=X_=R([Ne({type:be.Sequence,itemType:ky})],LE);var J_;let IE=J_=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,J_.prototype)}};IE=J_=R([Ne({type:be.Sequence,itemType:Su})],IE);class RB{constructor(e={}){this.certId="",this.certValue=new ArrayBuffer(0),Object.assign(this,e)}}R([I({type:ne.ObjectIdentifier})],RB.prototype,"certId",void 0);R([I({type:ne.Any,context:0})],RB.prototype,"certValue",void 0);class OB{constructor(e={}){this.crlId="",this.crltValue=new ArrayBuffer(0),Object.assign(this,e)}}R([I({type:ne.ObjectIdentifier})],OB.prototype,"crlId",void 0);R([I({type:ne.Any,context:0})],OB.prototype,"crltValue",void 0);class BB extends At{}let Cy=class{constructor(e={}){this.encryptionAlgorithm=new Ie,this.encryptedData=new BB,Object.assign(this,e)}};R([I({type:Ie})],Cy.prototype,"encryptionAlgorithm",void 0);R([I({type:BB})],Cy.prototype,"encryptedData",void 0);var Q_,Z_;(function(t){t[t.v1=0]="v1"})(Z_||(Z_={}));class MB extends At{}let ew=Q_=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,Q_.prototype)}};ew=Q_=R([Ne({type:be.Sequence,itemType:ra})],ew);class Df{constructor(e={}){this.version=Z_.v1,this.privateKeyAlgorithm=new Ie,this.privateKey=new MB,Object.assign(this,e)}}R([I({type:ne.Integer})],Df.prototype,"version",void 0);R([I({type:Ie})],Df.prototype,"privateKeyAlgorithm",void 0);R([I({type:MB})],Df.prototype,"privateKey",void 0);R([I({type:ew,implicit:!0,context:0,optional:!0})],Df.prototype,"attributes",void 0);let PE=class extends Df{};PE=R([Ne({type:be.Sequence})],PE);let zE=class extends Cy{};zE=R([Ne({type:be.Sequence})],zE);class DB{constructor(e={}){this.secretTypeId="",this.secretValue=new ArrayBuffer(0),Object.assign(this,e)}}R([I({type:ne.ObjectIdentifier})],DB.prototype,"secretTypeId",void 0);R([I({type:ne.Any,context:0})],DB.prototype,"secretValue",void 0);class Lf{constructor(e={}){this.mac=new _y,this.macSalt=new At,this.iterations=1,Object.assign(this,e)}}R([I({type:_y})],Lf.prototype,"mac",void 0);R([I({type:At})],Lf.prototype,"macSalt",void 0);R([I({type:ne.Integer,defaultValue:1})],Lf.prototype,"iterations",void 0);class Ny{constructor(e={}){this.version=3,this.authSafe=new Su,this.macData=new Lf,Object.assign(this,e)}}R([I({type:ne.Integer})],Ny.prototype,"version",void 0);R([I({type:Su})],Ny.prototype,"authSafe",void 0);R([I({type:Lf,optional:!0})],Ny.prototype,"macData",void 0);var tw;class Ay{constructor(e={}){this.bagId="",this.bagValue=new ArrayBuffer(0),Object.assign(this,e)}}R([I({type:ne.ObjectIdentifier})],Ay.prototype,"bagId",void 0);R([I({type:ne.Any,context:0})],Ay.prototype,"bagValue",void 0);R([I({type:ky,repeated:"set",optional:!0})],Ay.prototype,"bagAttributes",void 0);let $E=tw=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,tw.prototype)}};$E=tw=R([Ne({type:be.Sequence,itemType:Ay})],$E);var nw,sw,rw;const LB="1.2.840.113549.1.9",IB=`${LB}.7`,G2=`${LB}.14`;let ng=class extends ls{constructor(e={}){super(e)}toString(){return this.ia5String||super.toString()}};R([I({type:ne.IA5String})],ng.prototype,"ia5String",void 0);ng=R([Ne({type:be.Choice})],ng);let HE=class extends Su{};HE=R([Ne({type:be.Sequence})],HE);let UE=class extends Ny{};UE=R([Ne({type:be.Sequence})],UE);let VE=class extends Cy{};VE=R([Ne({type:be.Sequence})],VE);let iw=class{constructor(e=""){this.value=e}toString(){return this.value}};R([I({type:ne.IA5String})],iw.prototype,"value",void 0);iw=R([Ne({type:be.Choice})],iw);let FE=class extends ng{};FE=R([Ne({type:be.Choice})],FE);let qE=class extends ls{};qE=R([Ne({type:be.Choice})],qE);let aw=class{constructor(e=new Date){this.value=e}};R([I({type:ne.GeneralizedTime})],aw.prototype,"value",void 0);aw=R([Ne({type:be.Choice})],aw);let KE=class extends ls{};KE=R([Ne({type:be.Choice})],KE);let lw=class{constructor(e="M"){this.value=e}toString(){return this.value}};R([I({type:ne.PrintableString})],lw.prototype,"value",void 0);lw=R([Ne({type:be.Choice})],lw);let sg=class{constructor(e=""){this.value=e}toString(){return this.value}};R([I({type:ne.PrintableString})],sg.prototype,"value",void 0);sg=R([Ne({type:be.Choice})],sg);let WE=class extends sg{};WE=R([Ne({type:be.Choice})],WE);let GE=class extends ls{};GE=R([Ne({type:be.Choice})],GE);let ow=class{constructor(e=""){this.value=e}toString(){return this.value}};R([I({type:ne.ObjectIdentifier})],ow.prototype,"value",void 0);ow=R([Ne({type:be.Choice})],ow);let YE=class extends ss{};YE=R([Ne({type:be.Choice})],YE);let cw=class{constructor(e=0){this.value=e}toString(){return this.value.toString()}};R([I({type:ne.Integer})],cw.prototype,"value",void 0);cw=R([Ne({type:be.Choice})],cw);let XE=class extends Ai{};XE=R([Ne({type:be.Sequence})],XE);let rg=class extends ls{};rg=R([Ne({type:be.Choice})],rg);let JE=nw=class extends oo{constructor(e){super(e),Object.setPrototypeOf(this,nw.prototype)}};JE=nw=R([Ne({type:be.Sequence})],JE);let QE=sw=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,sw.prototype)}};QE=sw=R([Ne({type:be.Set,itemType:wu})],QE);let uw=class{constructor(e=""){this.value=e}toString(){return this.value}};R([I({type:ne.BmpString})],uw.prototype,"value",void 0);uw=R([Ne({type:be.Choice})],uw);let hw=class extends Ie{};hw=R([Ne({type:be.Sequence})],hw);let ZE=rw=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,rw.prototype)}};ZE=rw=R([Ne({type:be.Sequence,itemType:hw})],ZE);var dw;let ig=dw=class extends Pt{constructor(e){super(e),Object.setPrototypeOf(this,dw.prototype)}};ig=dw=R([Ne({type:be.Sequence,itemType:ra})],ig);class Nu{constructor(e={}){this.version=0,this.subject=new Bn,this.subjectPKInfo=new pi,this.attributes=new ig,Object.assign(this,e)}}R([I({type:ne.Integer})],Nu.prototype,"version",void 0);R([I({type:Bn})],Nu.prototype,"subject",void 0);R([I({type:pi})],Nu.prototype,"subjectPKInfo",void 0);R([I({type:ig,implicit:!0,context:0,optional:!0})],Nu.prototype,"attributes",void 0);class sf{constructor(e={}){this.certificationRequestInfo=new Nu,this.signatureAlgorithm=new Ie,this.signature=new ArrayBuffer(0),Object.assign(this,e)}}R([I({type:Nu,raw:!0})],sf.prototype,"certificationRequestInfo",void 0);R([I({type:Ie})],sf.prototype,"signatureAlgorithm",void 0);R([I({type:ne.BitString})],sf.prototype,"signature",void 0);const If="crypto.algorithm";class fG{getAlgorithms(){return Ss.resolveAll(If)}toAsnAlgorithm(e){({...e});for(const n of this.getAlgorithms()){const s=n.toAsnAlgorithm(e);if(s)return s}if(/^[0-9.]+$/.test(e.name)){const n=new Ie({algorithm:e.name});if("parameters"in e){const s=e;n.parameters=s.parameters}return n}throw new Error("Cannot convert WebCrypto algorithm to ASN.1 algorithm")}toWebAlgorithm(e){for(const s of this.getAlgorithms()){const r=s.toWebAlgorithm(e);if(r)return r}return{name:e.algorithm,parameters:e.parameters}}}const ru="crypto.algorithmProvider";Ss.registerSingleton(ru,fG);var Xm;const qs="1.3.36.3.3.2.8.1.1",e3=`${qs}.1`,t3=`${qs}.2`,n3=`${qs}.3`,s3=`${qs}.4`,r3=`${qs}.5`,i3=`${qs}.6`,a3=`${qs}.7`,l3=`${qs}.8`,o3=`${qs}.9`,c3=`${qs}.10`,u3=`${qs}.11`,h3=`${qs}.12`,d3=`${qs}.13`,f3=`${qs}.14`,p3="brainpoolP160r1",m3="brainpoolP160t1",g3="brainpoolP192r1",y3="brainpoolP192t1",v3="brainpoolP224r1",b3="brainpoolP224t1",x3="brainpoolP256r1",_3="brainpoolP256t1",w3="brainpoolP320r1",S3="brainpoolP320t1",k3="brainpoolP384r1",C3="brainpoolP384t1",N3="brainpoolP512r1",A3="brainpoolP512t1",rn="ECDSA";let rf=Xm=class{toAsnAlgorithm(e){switch(e.name.toLowerCase()){case rn.toLowerCase():if("hash"in e)switch((typeof e.hash=="string"?e.hash:e.hash.name).toLowerCase()){case"sha-1":return IW;case"sha-256":return PW;case"sha-384":return zW;case"sha-512":return $W}else if("namedCurve"in e){let n="";switch(e.namedCurve){case"P-256":n=OE;break;case"K-256":n=Xm.SECP256K1;break;case"P-384":n=BE;break;case"P-521":n=ME;break;case p3:n=e3;break;case m3:n=t3;break;case g3:n=n3;break;case y3:n=s3;break;case v3:n=r3;break;case b3:n=i3;break;case x3:n=a3;break;case _3:n=l3;break;case w3:n=o3;break;case S3:n=c3;break;case k3:n=u3;break;case C3:n=h3;break;case N3:n=d3;break;case A3:n=f3;break}if(n)return new Ie({algorithm:tf,parameters:Me.serialize(new hl({namedCurve:n}))})}}return null}toWebAlgorithm(e){switch(e.algorithm){case H2:return{name:rn,hash:{name:"SHA-1"}};case U2:return{name:rn,hash:{name:"SHA-256"}};case V2:return{name:rn,hash:{name:"SHA-384"}};case F2:return{name:rn,hash:{name:"SHA-512"}};case tf:{if(!e.parameters)throw new TypeError("Cannot get required parameters from EC algorithm");switch(Me.parse(e.parameters,hl).namedCurve){case OE:return{name:rn,namedCurve:"P-256"};case Xm.SECP256K1:return{name:rn,namedCurve:"K-256"};case BE:return{name:rn,namedCurve:"P-384"};case ME:return{name:rn,namedCurve:"P-521"};case e3:return{name:rn,namedCurve:p3};case t3:return{name:rn,namedCurve:m3};case n3:return{name:rn,namedCurve:g3};case s3:return{name:rn,namedCurve:y3};case r3:return{name:rn,namedCurve:v3};case i3:return{name:rn,namedCurve:b3};case a3:return{name:rn,namedCurve:x3};case l3:return{name:rn,namedCurve:_3};case o3:return{name:rn,namedCurve:w3};case c3:return{name:rn,namedCurve:S3};case u3:return{name:rn,namedCurve:k3};case h3:return{name:rn,namedCurve:C3};case d3:return{name:rn,namedCurve:N3};case f3:return{name:rn,namedCurve:A3}}}}return null}};rf.SECP256K1="1.3.132.0.10";rf=Xm=R([Sy()],rf);Ss.registerSingleton(If,rf);const PB=Symbol("name"),zB=Symbol("value");class Rt{constructor(e,n={},s=""){this[PB]=e,this[zB]=s;for(const r in n)this[r]=n[r]}}Rt.NAME=PB;Rt.VALUE=zB;class pG{static toTextObject(e){const n=new Rt("Algorithm Identifier",{},ml.toString(e.algorithm));if(e.parameters)if(e.algorithm===tf){const s=new rf().toWebAlgorithm(e);s&&"namedCurve"in s?n["Named Curve"]=s.namedCurve:n.Parameters=e.parameters}else n.Parameters=e.parameters;return n}}class ml{static toString(e){const n=this.items[e];return n||e}}ml.items={[J0]:"sha1",[CB]:"sha224",[Q0]:"sha256",[Z0]:"sha384",[eg]:"sha512",[uo]:"rsaEncryption",[G0]:"sha1WithRSAEncryption",[KW]:"sha224WithRSAEncryption",[F_]:"sha256WithRSAEncryption",[Y0]:"sha384WithRSAEncryption",[X0]:"sha512WithRSAEncryption",[tf]:"ecPublicKey",[H2]:"ecdsaWithSHA1",[wB]:"ecdsaWithSHA224",[U2]:"ecdsaWithSHA256",[V2]:"ecdsaWithSHA384",[F2]:"ecdsaWithSHA512",[TW]:"TLS WWW server authentication",[RW]:"TLS WWW client authentication",[OW]:"Code Signing",[BW]:"E-mail Protection",[MW]:"Time Stamping",[DW]:"OCSP Signing",[LW]:"Signed Data"};class po{static serialize(e){return this.serializeObj(e).join(`
`)}static pad(e=0){return"".padStart(2*e," ")}static serializeObj(e,n=0){const s=[];let r=this.pad(n++),a="";const o=e[Rt.VALUE];o&&(a=` ${o}`),s.push(`${r}${e[Rt.NAME]}:${a}`),r=this.pad(n);for(const c in e){if(typeof c=="symbol")continue;const h=e[c],d=c?`${c}: `:"";if(typeof h=="string"||typeof h=="number"||typeof h=="boolean")s.push(`${r}${d}${h}`);else if(h instanceof Date)s.push(`${r}${d}${h.toUTCString()}`);else if(Array.isArray(h))for(const g of h)g[Rt.NAME]=c,s.push(...this.serializeObj(g,n));else if(h instanceof Rt)h[Rt.NAME]=c,s.push(...this.serializeObj(h,n));else if(Oe.isBufferSource(h))c?(s.push(`${r}${d}`),s.push(...this.serializeBufferSource(h,n+1))):s.push(...this.serializeBufferSource(h,n));else if("toTextObject"in h){const g=h.toTextObject();g[Rt.NAME]=c,s.push(...this.serializeObj(g,n))}else throw new TypeError("Cannot serialize data in text format. Unsupported type.")}return s}static serializeBufferSource(e,n=0){const s=this.pad(n),r=Oe.toUint8Array(e),a=[];for(let o=0;o<r.length;){const c=[];for(let h=0;h<16&&o<r.length;h++){h===8&&c.push("");const d=r[o++].toString(16).padStart(2,"0");c.push(d)}a.push(`${s}${c.join(" ")}`)}return a}static serializeAlgorithm(e){return this.algorithmSerializer.toTextObject(e)}}po.oidSerializer=ml;po.algorithmSerializer=pG;var jc;class gl{get rawData(){return ht(this,jc,"f")||tn(this,jc,Me.serialize(this.asn),"f"),ht(this,jc,"f")}constructor(...e){jc.set(this,void 0),Oe.isBufferSource(e[0])?(this.asn=Me.parse(e[0],e[1]),tn(this,jc,Oe.toArrayBuffer(e[0]),"f"),this.onInit(this.asn)):(this.asn=e[0],this.onInit(this.asn))}equal(e){return e instanceof gl?l6(e.rawData,this.rawData):!1}toString(e="text"){switch(e){case"asn":return Me.toString(this.rawData);case"text":return po.serialize(this.toTextObject());case"hex":return Ke.ToHex(this.rawData);case"base64":return Ke.ToBase64(this.rawData);case"base64url":return Ke.ToBase64Url(this.rawData);default:throw TypeError("Argument 'format' is unsupported value")}}getTextName(){return this.constructor.NAME}toTextObject(){const e=this.toTextObjectEmpty();return e[""]=this.rawData,e}toTextObjectEmpty(e){return new Rt(this.getTextName(),{},e)}}jc=new WeakMap;gl.NAME="ASN";class pr extends gl{constructor(...e){let n;Oe.isBufferSource(e[0])?n=Oe.toArrayBuffer(e[0]):n=Me.serialize(new Jr({extnID:e[0],critical:e[1],extnValue:new At(Oe.toArrayBuffer(e[2]))})),super(n,Jr)}onInit(e){this.type=e.extnID,this.critical=e.critical,this.value=e.extnValue.buffer}toTextObject(){const e=this.toTextObjectWithoutValue();return e[""]=this.value,e}toTextObjectWithoutValue(){const e=this.toTextObjectEmpty(this.critical?"critical":void 0);return e[Rt.NAME]===pr.NAME&&(e[Rt.NAME]=ml.toString(this.type)),e}}var $B;class Qa{static isCryptoKeyPair(e){return e&&e.privateKey&&e.publicKey}static isCryptoKey(e){return e&&e.usages&&e.type&&e.algorithm&&e.extractable!==void 0}constructor(){this.items=new Map,this[$B]="CryptoProvider",typeof self<"u"&&typeof crypto<"u"?this.set(Qa.DEFAULT,crypto):typeof global<"u"&&global.crypto&&global.crypto.subtle&&this.set(Qa.DEFAULT,global.crypto)}clear(){this.items.clear()}delete(e){return this.items.delete(e)}forEach(e,n){return this.items.forEach(e,n)}has(e){return this.items.has(e)}get size(){return this.items.size}entries(){return this.items.entries()}keys(){return this.items.keys()}values(){return this.items.values()}[Symbol.iterator](){return this.items[Symbol.iterator]()}get(e=Qa.DEFAULT){const n=this.items.get(e.toLowerCase());if(!n)throw new Error(`Cannot get Crypto by name '${e}'`);return n}set(e,n){if(typeof e=="string"){if(!n)throw new TypeError("Argument 'value' is required");this.items.set(e.toLowerCase(),n)}else this.items.set(Qa.DEFAULT,e);return this}}$B=Symbol.toStringTag;Qa.DEFAULT="default";const bs=new Qa,mG=/^[0-2](?:\.[1-9][0-9]*)+$/;function gG(t){return new RegExp(mG).test(t)}class HB{constructor(e={}){this.items={};for(const n in e)this.register(n,e[n])}get(e){return this.items[e]||null}findId(e){return gG(e)?e:this.get(e)}register(e,n){this.items[e]=n,this.items[n]=e}}const Us=new HB;Us.register("CN","2.5.4.3");Us.register("L","2.5.4.7");Us.register("ST","2.5.4.8");Us.register("O","2.5.4.10");Us.register("OU","2.5.4.11");Us.register("C","2.5.4.6");Us.register("DC","0.9.2342.19200300.100.1.25");Us.register("E","1.2.840.113549.1.9.1");Us.register("G","2.5.4.42");Us.register("I","2.5.4.43");Us.register("SN","2.5.4.4");Us.register("T","2.5.4.12");function yG(t,e){return`\\${Ke.ToHex(Ke.FromUtf8String(e)).toUpperCase()}`}function vG(t){return t.replace(/([,+"\\<>;])/g,"\\$1").replace(/^([ #])/,"\\$1").replace(/([ ]$)/,"\\$1").replace(/([\r\n\t])/,yG)}class mo{static isASCII(e){for(let n=0;n<e.length;n++)if(e.charCodeAt(n)>255)return!1;return!0}static isPrintableString(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/g.test(e)}constructor(e,n={}){this.extraNames=new HB,this.asn=new Bn;for(const s in n)if(Object.prototype.hasOwnProperty.call(n,s)){const r=n[s];this.extraNames.register(s,r)}typeof e=="string"?this.asn=this.fromString(e):e instanceof Bn?this.asn=e:Oe.isBufferSource(e)?this.asn=Me.parse(e,Bn):this.asn=this.fromJSON(e)}getField(e){const n=this.extraNames.findId(e)||Us.findId(e),s=[];for(const r of this.asn)for(const a of r)a.type===n&&s.push(a.value.toString());return s}getName(e){return this.extraNames.get(e)||Us.get(e)}toString(){return this.asn.map(e=>e.map(n=>{const s=this.getName(n.type)||n.type,r=n.value.anyValue?`#${Ke.ToHex(n.value.anyValue)}`:vG(n.value.toString());return`${s}=${r}`}).join("+")).join(", ")}toJSON(){var e;const n=[];for(const s of this.asn){const r={};for(const a of s){const o=this.getName(a.type)||a.type;(e=r[o])!==null&&e!==void 0||(r[o]=[]),r[o].push(a.value.anyValue?`#${Ke.ToHex(a.value.anyValue)}`:a.value.toString())}n.push(r)}return n}fromString(e){const n=new Bn,s=/(\d\.[\d.]*\d|[A-Za-z]+)=((?:"")|(?:".*?[^\\]")|(?:[^,+"\\](?=[,+]|$))|(?:[^,+].*?(?:[^\\][,+]))|(?:))([,+])?/g;let r=null,a=",";for(;r=s.exec(`${e},`);){let[,o,c]=r;const h=c[c.length-1];(h===","||h==="+")&&(c=c.slice(0,c.length-1),r[3]=h);const d=r[3];o=this.getTypeOid(o);const g=this.createAttribute(o,c);a==="+"?n[n.length-1].push(g):n.push(new Gc([g])),a=d}return n}fromJSON(e){const n=new Bn;for(const s of e){const r=new Gc;for(const a in s){const o=this.getTypeOid(a),c=s[a];for(const h of c){const d=this.createAttribute(o,h);r.push(d)}}n.push(r)}return n}getTypeOid(e){if(/[\d.]+/.test(e)||(e=this.getName(e)||""),!e)throw new Error(`Cannot get OID for name type '${e}'`);return e}createAttribute(e,n){const s=new ny({type:e});if(typeof n=="object")for(const r in n)switch(r){case"ia5String":s.value.ia5String=n[r];break;case"utf8String":s.value.utf8String=n[r];break;case"universalString":s.value.universalString=n[r];break;case"bmpString":s.value.bmpString=n[r];break;case"printableString":s.value.printableString=n[r];break}else if(n[0]==="#")s.value.anyValue=Ke.FromHex(n.slice(1));else{const r=this.processStringValue(n);e===this.getName("E")||e===this.getName("DC")?s.value.ia5String=r:mo.isPrintableString(r)?s.value.printableString=r:s.value.utf8String=r}return s}processStringValue(e){const n=/"(.*?[^\\])?"/.exec(e);return n&&(e=n[1]),e.replace(/\\0a/ig,`
`).replace(/\\0d/ig,"\r").replace(/\\0g/ig,"	").replace(/\\(.)/g,"$1")}toArrayBuffer(){return Me.serialize(this.asn)}async getThumbprint(...e){var n;let s,r="SHA-1";return e.length>=1&&!(!((n=e[0])===null||n===void 0)&&n.subtle)?(r=e[0]||r,s=e[1]||bs.get()):s=e[0]||bs.get(),await s.subtle.digest(r,this.toArrayBuffer())}}const UB="Cannot initialize GeneralName from ASN.1 data.",E3=`${UB} Unsupported string format in use.`,bG=`${UB} Value doesn't match to GUID regular expression.`,j3=/^([0-9a-f]{8})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{12})$/i,T3="1.3.6.1.4.1.311.25.1",R3="1.3.6.1.4.1.311.20.2.3",Hb="dns",Ub="dn",Vb="email",Fb="ip",qb="url",Kb="guid",Wb="upn",_m="id";class Za extends gl{constructor(...e){let n;if(e.length===2)switch(e[0]){case Ub:{const s=new mo(e[1]).toArrayBuffer(),r=Me.parse(s,Bn);n=new ot({directoryName:r});break}case Hb:n=new ot({dNSName:e[1]});break;case Vb:n=new ot({rfc822Name:e[1]});break;case Kb:{const s=new RegExp(j3,"i").exec(e[1]);if(!s)throw new Error("Cannot parse GUID value. Value doesn't match to regular expression");const r=s.slice(1).map((a,o)=>o<3?Ke.ToHex(new Uint8Array(Ke.FromHex(a)).reverse()):a).join("");n=new ot({otherName:new Jd({typeId:T3,value:Me.serialize(new At(Ke.FromHex(r)))})});break}case Fb:n=new ot({iPAddress:e[1]});break;case _m:n=new ot({registeredID:e[1]});break;case Wb:{n=new ot({otherName:new Jd({typeId:R3,value:Me.serialize(rB.toASN(e[1]))})});break}case qb:n=new ot({uniformResourceIdentifier:e[1]});break;default:throw new Error("Cannot create GeneralName. Unsupported type of the name")}else Oe.isBufferSource(e[0])?n=Me.parse(e[0],ot):n=e[0];super(n)}onInit(e){if(e.dNSName!=null)this.type=Hb,this.value=e.dNSName;else if(e.rfc822Name!=null)this.type=Vb,this.value=e.rfc822Name;else if(e.iPAddress!=null)this.type=Fb,this.value=e.iPAddress;else if(e.uniformResourceIdentifier!=null)this.type=qb,this.value=e.uniformResourceIdentifier;else if(e.registeredID!=null)this.type=_m,this.value=e.registeredID;else if(e.directoryName!=null)this.type=Ub,this.value=new mo(e.directoryName).toString();else if(e.otherName!=null)if(e.otherName.typeId===T3){this.type=Kb;const n=Me.parse(e.otherName.value,At),s=new RegExp(j3,"i").exec(Ke.ToHex(n));if(!s)throw new Error(bG);this.value=s.slice(1).map((r,a)=>a<3?Ke.ToHex(new Uint8Array(Ke.FromHex(r)).reverse()):r).join("-")}else if(e.otherName.typeId===R3)this.type=Wb,this.value=Me.parse(e.otherName.value,ls).toString();else throw new Error(E3);else throw new Error(E3)}toJSON(){return{type:this.type,value:this.value}}toTextObject(){let e;switch(this.type){case Ub:case Hb:case Kb:case Fb:case _m:case Wb:case qb:e=this.type.toUpperCase();break;case Vb:e="Email";break;default:throw new Error("Unsupported GeneralName type")}let n=this.value;return this.type===_m&&(n=ml.toString(n)),new Rt(e,void 0,n)}}class go extends gl{constructor(e){let n;if(e instanceof fs)n=e;else if(Array.isArray(e)){const s=[];for(const r of e)if(r instanceof ot)s.push(r);else{const a=Me.parse(new Za(r.type,r.value).rawData,ot);s.push(a)}n=new fs(s)}else if(Oe.isBufferSource(e))n=Me.parse(e,fs);else throw new Error("Cannot initialize GeneralNames. Incorrect incoming arguments");super(n)}onInit(e){const n=[];for(const s of e){let r=null;try{r=new Za(s)}catch{continue}n.push(r)}this.items=n}toJSON(){return this.items.map(e=>e.toJSON())}toTextObject(){const e=super.toTextObjectEmpty();for(const n of this.items){const s=n.toTextObject();let r=e[s[Rt.NAME]];Array.isArray(r)||(r=[],e[s[Rt.NAME]]=r),r.push(s)}return e}}go.NAME="GeneralNames";const Id="-{5}",af="\\n",xG=`[^${af}]+`,_G=`${Id}BEGIN (${xG}(?=${Id}))${Id}`,wG=`${Id}END \\1${Id}`,iu="\\n",SG=`[^:${af}]+`,kG=`(?:[^${af}]+${iu}(?: +[^${af}]+${iu})*)`,CG="[a-zA-Z0-9=+/]+",NG=`(?:${CG}${iu})+`,O3=`${_G}${iu}(?:((?:${SG}: ${kG})+))?${iu}?(${NG})${wG}`;class cr{static isPem(e){return typeof e=="string"&&new RegExp(O3,"g").test(e.replace(/\r/g,""))}static decodeWithHeaders(e){e=e.replace(/\r/g,"");const n=new RegExp(O3,"g"),s=[];let r=null;for(;r=n.exec(e);){const a=r[3].replace(new RegExp(`[${af}]+`,"g"),""),o={type:r[1],headers:[],rawData:Ke.FromBase64(a)},c=r[2];if(c){const h=c.split(new RegExp(iu,"g"));let d=null;for(const g of h){const[m,v]=g.split(/:(.*)/);if(v===void 0){if(!d)throw new Error("Cannot parse PEM string. Incorrect header value");d.value+=m.trim()}else d&&o.headers.push(d),d={key:m,value:v.trim()}}d&&o.headers.push(d)}s.push(o)}return s}static decode(e){return this.decodeWithHeaders(e).map(s=>s.rawData)}static decodeFirst(e){const n=this.decode(e);if(!n.length)throw new RangeError("PEM string doesn't contain any objects");return n[0]}static encode(e,n){if(Array.isArray(e)){const s=new Array;return n?e.forEach(r=>{if(!Oe.isBufferSource(r))throw new TypeError("Cannot encode array of BufferSource in PEM format. Not all items of the array are BufferSource");s.push(this.encodeStruct({type:n,rawData:Oe.toArrayBuffer(r)}))}):e.forEach(r=>{if(!("type"in r))throw new TypeError("Cannot encode array of PemStruct in PEM format. Not all items of the array are PemStrut");s.push(this.encodeStruct(r))}),s.join(`
`)}else{if(!n)throw new Error("Required argument 'tag' is missed");return this.encodeStruct({type:n,rawData:Oe.toArrayBuffer(e)})}}static encodeStruct(e){var n;const s=e.type.toLocaleUpperCase(),r=[];if(r.push(`-----BEGIN ${s}-----`),!((n=e.headers)===null||n===void 0)&&n.length){for(const d of e.headers)r.push(`${d.key}: ${d.value}`);r.push("")}const a=Ke.ToBase64(e.rawData);let o,c=0;const h=Array();for(;c<a.length&&(a.length-c<64?o=a.substring(c):(o=a.substring(c,c+64),c+=64),o.length!==0);)if(h.push(o),o.length<64)break;return r.push(...h),r.push(`-----END ${s}-----`),r.join(`
`)}}cr.CertificateTag="CERTIFICATE";cr.CrlTag="CRL";cr.CertificateRequestTag="CERTIFICATE REQUEST";cr.PublicKeyTag="PUBLIC KEY";cr.PrivateKeyTag="PRIVATE KEY";class la extends gl{static isAsnEncoded(e){return Oe.isBufferSource(e)||typeof e=="string"}static toArrayBuffer(e){if(typeof e=="string"){if(cr.isPem(e))return cr.decode(e)[0];if(Ke.isHex(e))return Ke.FromHex(e);if(Ke.isBase64(e))return Ke.FromBase64(e);if(Ke.isBase64Url(e))return Ke.FromBase64Url(e);throw new TypeError("Unsupported format of 'raw' argument. Must be one of DER, PEM, HEX, Base64, or Base4Url")}else{const n=Oe.toUint8Array(e);if(n.length>0&&n[0]===48)return Oe.toArrayBuffer(e);const s=Ke.ToBinary(e);if(cr.isPem(s))return cr.decode(s)[0];if(Ke.isHex(s))return Ke.FromHex(s);if(Ke.isBase64(s))return Ke.FromBase64(s);if(Ke.isBase64Url(s))return Ke.FromBase64Url(s);throw new TypeError("Unsupported format of 'raw' argument. Must be one of DER, PEM, HEX, Base64, or Base4Url")}}constructor(...e){la.isAsnEncoded(e[0])?super(la.toArrayBuffer(e[0]),e[1]):super(e[0])}toString(e="pem"){return e==="pem"?cr.encode(this.rawData,this.tag):super.toString(e)}}class yi extends la{static async create(e,n=bs.get()){if(e instanceof yi)return e;if(Qa.isCryptoKey(e)){if(e.type!=="public")throw new TypeError("Public key is required");const s=await n.subtle.exportKey("spki",e);return new yi(s)}else{if(e.publicKey)return e.publicKey;if(Oe.isBufferSource(e))return new yi(e);throw new TypeError("Unsupported PublicKeyType")}}constructor(e){la.isAsnEncoded(e)?super(e,pi):super(e),this.tag=cr.PublicKeyTag}async export(...e){let n,s=["verify"],r={hash:"SHA-256",...this.algorithm};e.length>1?(r=e[0]||r,s=e[1]||s,n=e[2]||bs.get()):n=e[0]||bs.get();let a=this.rawData;const o=Me.parse(this.rawData,pi);return o.algorithm.algorithm===Ld&&(a=AG(o,a)),n.subtle.importKey("spki",a,r,!0,s)}onInit(e){const n=Ss.resolve(ru),s=this.algorithm=n.toWebAlgorithm(e.algorithm);if(e.algorithm.algorithm===uo){const r=Me.parse(e.subjectPublicKey,q2),a=Oe.toUint8Array(r.modulus);s.publicExponent=Oe.toUint8Array(r.publicExponent),s.modulusLength=(a[0]?a:a.slice(1)).byteLength<<3}}async getThumbprint(...e){var n;let s,r="SHA-1";return e.length>=1&&!(!((n=e[0])===null||n===void 0)&&n.subtle)?(r=e[0]||r,s=e[1]||bs.get()):s=e[0]||bs.get(),await s.subtle.digest(r,this.rawData)}async getKeyIdentifier(...e){let n,s="SHA-1";e.length===1?typeof e[0]=="string"?(s=e[0],n=bs.get()):n=e[0]:e.length===2?(s=e[0],n=e[1]):n=bs.get();const r=Me.parse(this.rawData,pi);return await n.subtle.digest(s,r.subjectPublicKey)}toTextObject(){const e=this.toTextObjectEmpty(),n=Me.parse(this.rawData,pi);switch(e.Algorithm=po.serializeAlgorithm(n.algorithm),n.algorithm.algorithm){case tf:e["EC Point"]=n.subjectPublicKey;break;case uo:default:e["Raw Data"]=n.subjectPublicKey}return e}}function AG(t,e){return t.algorithm=new Ie({algorithm:uo,parameters:null}),e=Me.serialize(t),e}class lf extends pr{static async create(e,n=!1,s=bs.get()){if("name"in e&&"serialNumber"in e)return new lf(e,n);const a=await(await yi.create(e,s)).getKeyIdentifier(s);return new lf(Ke.ToHex(a),n)}constructor(...e){if(Oe.isBufferSource(e[0]))super(e[0]);else if(typeof e[0]=="string"){const n=new ql({keyIdentifier:new N2(Ke.FromHex(e[0]))});super(o_,e[1],Me.serialize(n))}else{const n=e[0],s=n.name instanceof go?Me.parse(n.name.rawData,fs):n.name,r=new ql({authorityCertIssuer:s,authorityCertSerialNumber:Ke.FromHex(n.serialNumber)});super(o_,e[1],Me.serialize(r))}}onInit(e){super.onInit(e);const n=Me.parse(e.extnValue,ql);n.keyIdentifier&&(this.keyId=Ke.ToHex(n.keyIdentifier)),(n.authorityCertIssuer||n.authorityCertSerialNumber)&&(this.certId={name:n.authorityCertIssuer||[],serialNumber:n.authorityCertSerialNumber?Ke.ToHex(n.authorityCertSerialNumber):""})}toTextObject(){const e=this.toTextObjectWithoutValue(),n=Me.parse(this.value,ql);return n.authorityCertIssuer&&(e["Authority Issuer"]=new go(n.authorityCertIssuer).toTextObject()),n.authorityCertSerialNumber&&(e["Authority Serial Number"]=n.authorityCertSerialNumber),n.keyIdentifier&&(e[""]=n.keyIdentifier),e}}lf.NAME="Authority Key Identifier";class VB extends pr{constructor(...e){if(Oe.isBufferSource(e[0])){super(e[0]);const n=Me.parse(this.value,T0);this.ca=n.cA,this.pathLength=n.pathLenConstraint}else{const n=new T0({cA:e[0],pathLenConstraint:e[1]});super(aB,e[2],Me.serialize(n)),this.ca=e[0],this.pathLength=e[1]}}toTextObject(){const e=this.toTextObjectWithoutValue();return this.ca&&(e.CA=this.ca),this.pathLength!==void 0&&(e["Path Length"]=this.pathLength),e}}VB.NAME="Basic Constraints";var B3;(function(t){t.serverAuth="1.3.6.1.5.5.7.3.1",t.clientAuth="1.3.6.1.5.5.7.3.2",t.codeSigning="1.3.6.1.5.5.7.3.3",t.emailProtection="1.3.6.1.5.5.7.3.4",t.timeStamping="1.3.6.1.5.5.7.3.8",t.ocspSigning="1.3.6.1.5.5.7.3.9"})(B3||(B3={}));class FB extends pr{constructor(...e){if(Oe.isBufferSource(e[0])){super(e[0]);const n=Me.parse(this.value,M0);this.usages=n.map(s=>s)}else{const n=new M0(e[0]);super(cB,e[1],Me.serialize(n)),this.usages=e[0]}}toTextObject(){const e=this.toTextObjectWithoutValue();return e[""]=this.usages.map(n=>ml.toString(n)).join(", "),e}}FB.NAME="Extended Key Usages";var Ji;(function(t){t[t.digitalSignature=1]="digitalSignature",t[t.nonRepudiation=2]="nonRepudiation",t[t.keyEncipherment=4]="keyEncipherment",t[t.dataEncipherment=8]="dataEncipherment",t[t.keyAgreement=16]="keyAgreement",t[t.keyCertSign=32]="keyCertSign",t[t.cRLSign=64]="cRLSign",t[t.encipherOnly=128]="encipherOnly",t[t.decipherOnly=256]="decipherOnly"})(Ji||(Ji={}));class qB extends pr{constructor(...e){if(Oe.isBufferSource(e[0])){super(e[0]);const n=Me.parse(this.value,$b);this.usages=n.toNumber()}else{const n=new $b(e[0]);super(hB,e[1],Me.serialize(n)),this.usages=e[0]}}toTextObject(){const e=this.toTextObjectWithoutValue(),n=Me.parse(this.value,$b);return e[""]=n.toJSON().join(", "),e}}qB.NAME="Key Usages";class Ey extends pr{static async create(e,n=!1,s=bs.get()){const a=await(await yi.create(e,s)).getKeyIdentifier(s);return new Ey(Ke.ToHex(a),n)}constructor(...e){if(Oe.isBufferSource(e[0])){super(e[0]);const n=Me.parse(this.value,il);this.keyId=Ke.ToHex(n)}else{const n=typeof e[0]=="string"?Ke.FromHex(e[0]):e[0],s=new il(n);super(mB,e[1],Me.serialize(s)),this.keyId=Ke.ToHex(n)}}toTextObject(){const e=this.toTextObjectWithoutValue(),n=Me.parse(this.value,il);return e[""]=n,e}}Ey.NAME="Subject Key Identifier";class KB extends pr{constructor(...e){Oe.isBufferSource(e[0])?super(e[0]):super(pB,e[1],new go(e[0]||[]).rawData)}onInit(e){super.onInit(e);const n=Me.parse(e.extnValue,S_);this.names=new go(n)}toTextObject(){const e=this.toTextObjectWithoutValue(),n=this.names.toTextObject();for(const s in n)e[s]=n[s];return e}}KB.NAME="Subject Alternative Name";class mr{static register(e,n){this.items.set(e,n)}static create(e){const n=new pr(e),s=this.items.get(n.type);return s?new s(e):n}}mr.items=new Map;class WB extends pr{constructor(...e){var n;if(Oe.isBufferSource(e[0])){super(e[0]);const s=Me.parse(this.value,O0);this.policies=s.map(r=>r.policyIdentifier)}else{const s=e[0],r=(n=e[1])!==null&&n!==void 0?n:!1,a=new O0(s.map(o=>new ry({policyIdentifier:o})));super(lB,r,Me.serialize(a)),this.policies=s}}toTextObject(){const e=this.toTextObjectWithoutValue();return e.Policy=this.policies.map(n=>new Rt("",{},ml.toString(n))),e}}WB.NAME="Certificate Policies";mr.register(lB,WB);class GB extends pr{constructor(...e){var n;if(Oe.isBufferSource(e[0]))super(e[0]);else if(Array.isArray(e[0])&&typeof e[0][0]=="string"){const r=e[0].map(o=>new xu({distributionPoint:new lo({fullName:[new ot({uniformResourceIdentifier:o})]})})),a=new Uc(r);super(f_,e[1],Me.serialize(a))}else{const s=new Uc(e[0]);super(f_,e[1],Me.serialize(s))}(n=this.distributionPoints)!==null&&n!==void 0||(this.distributionPoints=[])}onInit(e){super.onInit(e);const n=Me.parse(e.extnValue,Uc);this.distributionPoints=n}toTextObject(){const e=this.toTextObjectWithoutValue();return e["Distribution Point"]=this.distributionPoints.map(n=>{var s;const r={};return n.distributionPoint&&(r[""]=(s=n.distributionPoint.fullName)===null||s===void 0?void 0:s.map(a=>new Za(a).toString()).join(", ")),n.reasons&&(r.Reasons=n.reasons.toString()),n.cRLIssuer&&(r["CRL Issuer"]=n.cRLIssuer.map(a=>a.toString()).join(", ")),r}),e}}GB.NAME="CRL Distribution Points";class YB extends pr{constructor(...e){var n,s,r,a;if(Oe.isBufferSource(e[0]))super(e[0]);else if(e[0]instanceof Bc){const o=new Bc(e[0]);super(l_,e[1],Me.serialize(o))}else{const o=e[0],c=new Bc;Sm(c,o,yE,"ocsp"),Sm(c,o,vE,"caIssuers"),Sm(c,o,bE,"timeStamping"),Sm(c,o,xE,"caRepository"),super(l_,e[1],Me.serialize(c))}(n=this.ocsp)!==null&&n!==void 0||(this.ocsp=[]),(s=this.caIssuers)!==null&&s!==void 0||(this.caIssuers=[]),(r=this.timeStamping)!==null&&r!==void 0||(this.timeStamping=[]),(a=this.caRepository)!==null&&a!==void 0||(this.caRepository=[])}onInit(e){super.onInit(e),this.ocsp=[],this.caIssuers=[],this.timeStamping=[],this.caRepository=[],Me.parse(e.extnValue,Bc).forEach(s=>{switch(s.accessMethod){case yE:this.ocsp.push(new Za(s.accessLocation));break;case vE:this.caIssuers.push(new Za(s.accessLocation));break;case bE:this.timeStamping.push(new Za(s.accessLocation));break;case xE:this.caRepository.push(new Za(s.accessLocation));break}})}toTextObject(){const e=this.toTextObjectWithoutValue();return this.ocsp.length&&wm(e,"OCSP",this.ocsp),this.caIssuers.length&&wm(e,"CA Issuers",this.caIssuers),this.timeStamping.length&&wm(e,"Time Stamping",this.timeStamping),this.caRepository.length&&wm(e,"CA Repository",this.caRepository),e}}YB.NAME="Authority Info Access";function wm(t,e,n){if(n.length===1)t[e]=n[0].toTextObject();else{const s=new Rt("");n.forEach((r,a)=>{const o=r.toTextObject(),c=`${o[Rt.NAME]} ${a+1}`;let h=s[c];Array.isArray(h)||(h=[],s[c]=h),h.push(o)}),t[e]=s}}function Sm(t,e,n,s){const r=e[s];r&&(Array.isArray(r)?r:[r]).forEach(o=>{typeof o=="string"&&(o=new Za("url",o)),t.push(new Nf({accessMethod:n,accessLocation:Me.parse(o.rawData,ot)}))})}class XB extends pr{constructor(...e){Oe.isBufferSource(e[0])?super(e[0]):super(uB,e[1],new go(e[0]||[]).rawData)}onInit(e){super.onInit(e);const n=Me.parse(e.extnValue,fs);this.names=new go(n)}toTextObject(){const e=this.toTextObjectWithoutValue(),n=this.names.toTextObject();for(const s in n)e[s]=n[s];return e}}XB.NAME="Issuer Alternative Name";class Au extends gl{constructor(...e){let n;if(Oe.isBufferSource(e[0]))n=Oe.toArrayBuffer(e[0]);else{const s=e[0],r=Array.isArray(e[1])?e[1].map(a=>Oe.toArrayBuffer(a)):[];n=Me.serialize(new ra({type:s,values:r}))}super(n,ra)}onInit(e){this.type=e.type,this.values=e.values}toTextObject(){const e=this.toTextObjectWithoutValue();return e.Value=this.values.map(n=>new Rt("",{"":n})),e}toTextObjectWithoutValue(){const e=this.toTextObjectEmpty();return e[Rt.NAME]===Au.NAME&&(e[Rt.NAME]=ml.toString(this.type)),e}}Au.NAME="Attribute";class JB extends Au{constructor(...e){var n;if(Oe.isBufferSource(e[0]))super(e[0]);else{const s=new rg({printableString:e[0]});super(IB,[Me.serialize(s)])}(n=this.password)!==null&&n!==void 0||(this.password="")}onInit(e){if(super.onInit(e),this.values[0]){const n=Me.parse(this.values[0],rg);this.password=n.toString()}}toTextObject(){const e=this.toTextObjectWithoutValue();return e[Rt.VALUE]=this.password,e}}JB.NAME="Challenge Password";class Y2 extends Au{constructor(...e){var n;if(Oe.isBufferSource(e[0]))super(e[0]);else{const s=e[0],r=new oo;for(const a of s)r.push(Me.parse(a.rawData,Jr));super(G2,[Me.serialize(r)])}(n=this.items)!==null&&n!==void 0||(this.items=[])}onInit(e){if(super.onInit(e),this.values[0]){const n=Me.parse(this.values[0],oo);this.items=n.map(s=>mr.create(Me.serialize(s)))}}toTextObject(){const e=this.toTextObjectWithoutValue(),n=this.items.map(s=>s.toTextObject());for(const s of n)e[s[Rt.NAME]]=s;return e}}Y2.NAME="Extensions";class jy{static register(e,n){this.items.set(e,n)}static create(e){const n=new Au(e),s=this.items.get(n.type);return s?new s(e):n}}jy.items=new Map;const Ty="crypto.signatureFormatter";class EG{toAsnSignature(e,n){return Oe.toArrayBuffer(n)}toWebSignature(e,n){return Oe.toArrayBuffer(n)}}var Jm;let fw=Jm=class{static createPssParams(e,n){const s=Jm.getHashAlgorithm(e);return s?new fo({hashAlgorithm:s,maskGenAlgorithm:new Ie({algorithm:by,parameters:Me.serialize(s)}),saltLength:n}):null}static getHashAlgorithm(e){const n=Ss.resolve(ru);return typeof e=="string"?n.toAsnAlgorithm({name:e}):typeof e=="object"&&e&&"name"in e?n.toAsnAlgorithm(e):null}toAsnAlgorithm(e){switch(e.name.toLowerCase()){case"rsassa-pkcs1-v1_5":if("hash"in e){let n;if(typeof e.hash=="string")n=e.hash;else if(e.hash&&typeof e.hash=="object"&&"name"in e.hash&&typeof e.hash.name=="string")n=e.hash.name.toUpperCase();else throw new Error("Cannot get hash algorithm name");switch(n.toLowerCase()){case"sha-1":return new Ie({algorithm:G0,parameters:null});case"sha-256":return new Ie({algorithm:F_,parameters:null});case"sha-384":return new Ie({algorithm:Y0,parameters:null});case"sha-512":return new Ie({algorithm:X0,parameters:null})}}else return new Ie({algorithm:uo,parameters:null});break;case"rsa-pss":if("hash"in e){if(!("saltLength"in e&&typeof e.saltLength=="number"))throw new Error("Cannot get 'saltLength' from 'alg' argument");const n=Jm.createPssParams(e.hash,e.saltLength);if(!n)throw new Error("Cannot create PSS parameters");return new Ie({algorithm:Ld,parameters:Me.serialize(n)})}else return new Ie({algorithm:Ld,parameters:null})}return null}toWebAlgorithm(e){switch(e.algorithm){case uo:return{name:"RSASSA-PKCS1-v1_5"};case G0:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case F_:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case Y0:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case X0:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case Ld:if(e.parameters){const n=Me.parse(e.parameters,fo);return{name:"RSA-PSS",hash:Ss.resolve(ru).toWebAlgorithm(n.hashAlgorithm),saltLength:n.saltLength}}else return{name:"RSA-PSS"}}return null}};fw=Jm=R([Sy()],fw);Ss.registerSingleton(If,fw);let pw=class{toAsnAlgorithm(e){switch(e.name.toLowerCase()){case"sha-1":return new Ie({algorithm:J0});case"sha-256":return new Ie({algorithm:Q0});case"sha-384":return new Ie({algorithm:Z0});case"sha-512":return new Ie({algorithm:eg})}return null}toWebAlgorithm(e){switch(e.algorithm){case J0:return{name:"SHA-1"};case Q0:return{name:"SHA-256"};case Z0:return{name:"SHA-384"};case eg:return{name:"SHA-512"}}return null}};pw=R([Sy()],pw);Ss.registerSingleton(If,pw);class Or{addPadding(e,n){const s=Oe.toUint8Array(n),r=new Uint8Array(e);return r.set(s,e-s.length),r.buffer}removePadding(e,n=!1){let s=Oe.toUint8Array(e);for(let r=0;r<s.length;r++)if(s[r]){s=s.slice(r);break}if(n&&s[0]>127){const r=new Uint8Array(s.length+1);return r.set(s,1),r.buffer}return s.buffer}toAsnSignature(e,n){if(e.name==="ECDSA"){const s=e.namedCurve,r=Or.namedCurveSize.get(s)||Or.defaultNamedCurveSize,a=new W0,o=Oe.toUint8Array(n);return a.r=this.removePadding(o.slice(0,r),!0),a.s=this.removePadding(o.slice(r,r+r),!0),Me.serialize(a)}return null}toWebSignature(e,n){if(e.name==="ECDSA"){const s=Me.parse(n,W0),r=e.namedCurve,a=Or.namedCurveSize.get(r)||Or.defaultNamedCurveSize,o=this.addPadding(a,this.removePadding(s.r)),c=this.addPadding(a,this.removePadding(s.s));return HK(o,c)}return null}}Or.namedCurveSize=new Map;Or.defaultNamedCurveSize=32;const Gb="1.3.101.110",M3="1.3.101.111",Yb="1.3.101.112",D3="1.3.101.113";let mw=class{toAsnAlgorithm(e){let n=null;switch(e.name.toLowerCase()){case"ed25519":n=Yb;break;case"x25519":n=Gb;break;case"eddsa":switch(e.namedCurve.toLowerCase()){case"ed25519":n=Yb;break;case"ed448":n=D3;break}break;case"ecdh-es":switch(e.namedCurve.toLowerCase()){case"x25519":n=Gb;break;case"x448":n=M3;break}}return n?new Ie({algorithm:n}):null}toWebAlgorithm(e){switch(e.algorithm){case Yb:return{name:"Ed25519"};case D3:return{name:"EdDSA",namedCurve:"Ed448"};case Gb:return{name:"X25519"};case M3:return{name:"ECDH-ES",namedCurve:"X448"}}return null}};mw=R([Sy()],mw);Ss.registerSingleton(If,mw);var Jh,Qh,Zh,ed,td,nd,sd,Tc;class jG extends la{get subjectName(){return ht(this,Qh,"f")||tn(this,Qh,new mo(this.asn.certificationRequestInfo.subject),"f"),ht(this,Qh,"f")}get subject(){return ht(this,Zh,"f")||tn(this,Zh,this.subjectName.toString(),"f"),ht(this,Zh,"f")}get signatureAlgorithm(){if(!ht(this,ed,"f")){const e=Ss.resolve(ru);tn(this,ed,e.toWebAlgorithm(this.asn.signatureAlgorithm),"f")}return ht(this,ed,"f")}get signature(){return ht(this,td,"f")||tn(this,td,this.asn.signature,"f"),ht(this,td,"f")}get publicKey(){return ht(this,nd,"f")||tn(this,nd,new yi(this.asn.certificationRequestInfo.subjectPKInfo),"f"),ht(this,nd,"f")}get attributes(){return ht(this,sd,"f")||tn(this,sd,this.asn.certificationRequestInfo.attributes.map(e=>jy.create(Me.serialize(e))),"f"),ht(this,sd,"f")}get extensions(){if(!ht(this,Tc,"f")){tn(this,Tc,[],"f");const e=this.getAttribute(G2);e instanceof Y2&&tn(this,Tc,e.items,"f")}return ht(this,Tc,"f")}get tbs(){return ht(this,Jh,"f")||tn(this,Jh,this.asn.certificationRequestInfoRaw||Me.serialize(this.asn.certificationRequestInfo),"f"),ht(this,Jh,"f")}constructor(e){const n=la.isAsnEncoded(e)?[e,sf]:[e];super(n[0],n[1]),Jh.set(this,void 0),Qh.set(this,void 0),Zh.set(this,void 0),ed.set(this,void 0),td.set(this,void 0),nd.set(this,void 0),sd.set(this,void 0),Tc.set(this,void 0),this.tag=cr.CertificateRequestTag}onInit(e){}getAttribute(e){for(const n of this.attributes)if(n.type===e)return n;return null}getAttributes(e){return this.attributes.filter(n=>n.type===e)}getExtension(e){for(const n of this.extensions)if(n.type===e)return n;return null}getExtensions(e){return this.extensions.filter(n=>n.type===e)}async verify(e=bs.get()){const n={...this.publicKey.algorithm,...this.signatureAlgorithm},s=await this.publicKey.export(n,["verify"],e),r=Ss.resolveAll(Ty).reverse();let a=null;for(const c of r)if(a=c.toWebSignature(n,this.signature),a)break;if(!a)throw Error("Cannot convert WebCrypto signature value to ASN.1 format");return await e.subtle.verify(this.signatureAlgorithm,s,a,this.tbs)}toTextObject(){const e=this.toTextObjectEmpty(),n=Me.parse(this.rawData,sf),s=n.certificationRequestInfo,r=new Rt("",{Version:`${Yc[s.version]} (${s.version})`,Subject:this.subject,"Subject Public Key Info":this.publicKey});if(this.attributes.length){const a=new Rt("");for(const o of this.attributes){const c=o.toTextObject();a[c[Rt.NAME]]=c}r.Attributes=a}return e.Data=r,e.Signature=new Rt("",{Algorithm:po.serializeAlgorithm(n.signatureAlgorithm),"":n.signature}),e}}Jh=new WeakMap,Qh=new WeakMap,Zh=new WeakMap,ed=new WeakMap,td=new WeakMap,nd=new WeakMap,sd=new WeakMap,Tc=new WeakMap;jG.NAME="PKCS#10 Certificate Request";var rd,id,ad,ld,od,cd,ud,hd,dd,fd,Rc,pd;class QB extends la{get publicKey(){return ht(this,pd,"f")||tn(this,pd,new yi(this.asn.tbsCertificate.subjectPublicKeyInfo),"f"),ht(this,pd,"f")}get serialNumber(){if(!ht(this,id,"f")){const e=this.asn.tbsCertificate;let n=new Uint8Array(e.serialNumber);n.length>1&&n[0]===0&&n[1]>127&&(n=n.slice(1)),tn(this,id,Ke.ToHex(n),"f")}return ht(this,id,"f")}get subjectName(){return ht(this,ad,"f")||tn(this,ad,new mo(this.asn.tbsCertificate.subject),"f"),ht(this,ad,"f")}get subject(){return ht(this,ld,"f")||tn(this,ld,this.subjectName.toString(),"f"),ht(this,ld,"f")}get issuerName(){return ht(this,od,"f")||tn(this,od,new mo(this.asn.tbsCertificate.issuer),"f"),ht(this,od,"f")}get issuer(){return ht(this,cd,"f")||tn(this,cd,this.issuerName.toString(),"f"),ht(this,cd,"f")}get notBefore(){if(!ht(this,ud,"f")){const e=this.asn.tbsCertificate.validity.notBefore.utcTime||this.asn.tbsCertificate.validity.notBefore.generalTime;if(!e)throw new Error("Cannot get 'notBefore' value");tn(this,ud,e,"f")}return ht(this,ud,"f")}get notAfter(){if(!ht(this,hd,"f")){const e=this.asn.tbsCertificate.validity.notAfter.utcTime||this.asn.tbsCertificate.validity.notAfter.generalTime;if(!e)throw new Error("Cannot get 'notAfter' value");tn(this,hd,e,"f")}return ht(this,hd,"f")}get signatureAlgorithm(){if(!ht(this,dd,"f")){const e=Ss.resolve(ru);tn(this,dd,e.toWebAlgorithm(this.asn.signatureAlgorithm),"f")}return ht(this,dd,"f")}get signature(){return ht(this,fd,"f")||tn(this,fd,this.asn.signatureValue,"f"),ht(this,fd,"f")}get extensions(){return ht(this,Rc,"f")||(tn(this,Rc,[],"f"),this.asn.tbsCertificate.extensions&&tn(this,Rc,this.asn.tbsCertificate.extensions.map(e=>mr.create(Me.serialize(e))),"f")),ht(this,Rc,"f")}get tbs(){return ht(this,rd,"f")||tn(this,rd,this.asn.tbsCertificateRaw||Me.serialize(this.asn.tbsCertificate),"f"),ht(this,rd,"f")}constructor(e){const n=la.isAsnEncoded(e)?[e,Xc]:[e];super(n[0],n[1]),rd.set(this,void 0),id.set(this,void 0),ad.set(this,void 0),ld.set(this,void 0),od.set(this,void 0),cd.set(this,void 0),ud.set(this,void 0),hd.set(this,void 0),dd.set(this,void 0),fd.set(this,void 0),Rc.set(this,void 0),pd.set(this,void 0),this.tag=cr.CertificateTag}onInit(e){}getExtension(e){for(const n of this.extensions)if(typeof e=="string"){if(n.type===e)return n}else if(n instanceof e)return n;return null}getExtensions(e){return this.extensions.filter(n=>typeof e=="string"?n.type===e:n instanceof e)}async verify(e={},n=bs.get()){let s,r;const a=e.publicKey;try{if(!a)s={...this.publicKey.algorithm,...this.signatureAlgorithm},r=await this.publicKey.export(s,["verify"],n);else if("publicKey"in a)s={...a.publicKey.algorithm,...this.signatureAlgorithm},r=await a.publicKey.export(s,["verify"],n);else if(a instanceof yi)s={...a.algorithm,...this.signatureAlgorithm},r=await a.export(s,["verify"],n);else if(Oe.isBufferSource(a)){const d=new yi(a);s={...d.algorithm,...this.signatureAlgorithm},r=await d.export(s,["verify"],n)}else s={...a.algorithm,...this.signatureAlgorithm},r=a}catch{return!1}const o=Ss.resolveAll(Ty).reverse();let c=null;for(const d of o)if(c=d.toWebSignature(s,this.signature),c)break;if(!c)throw Error("Cannot convert ASN.1 signature value to WebCrypto format");const h=await n.subtle.verify(this.signatureAlgorithm,r,c,this.tbs);if(e.signatureOnly)return h;{const g=(e.date||new Date).getTime();return h&&this.notBefore.getTime()<g&&g<this.notAfter.getTime()}}async getThumbprint(...e){let n,s="SHA-1";return e[0]&&(e[0].subtle?n=e[0]:(s=e[0]||s,n=e[1])),n??(n=bs.get()),await n.subtle.digest(s,this.rawData)}async isSelfSigned(e=bs.get()){return this.subject===this.issuer&&await this.verify({signatureOnly:!0},e)}toTextObject(){const e=this.toTextObjectEmpty(),n=Me.parse(this.rawData,Xc),s=n.tbsCertificate,r=new Rt("",{Version:`${Yc[s.version]} (${s.version})`,"Serial Number":s.serialNumber,"Signature Algorithm":po.serializeAlgorithm(s.signature),Issuer:this.issuer,Validity:new Rt("",{"Not Before":s.validity.notBefore.getTime(),"Not After":s.validity.notAfter.getTime()}),Subject:this.subject,"Subject Public Key Info":this.publicKey});if(s.issuerUniqueID&&(r["Issuer Unique ID"]=s.issuerUniqueID),s.subjectUniqueID&&(r["Subject Unique ID"]=s.subjectUniqueID),this.extensions.length){const a=new Rt("");for(const o of this.extensions){const c=o.toTextObject();a[c[Rt.NAME]]=c}r.Extensions=a}return e.Data=r,e.Signature=new Rt("",{Algorithm:po.serializeAlgorithm(n.signatureAlgorithm),"":n.signatureValue}),e}}rd=new WeakMap,id=new WeakMap,ad=new WeakMap,ld=new WeakMap,od=new WeakMap,cd=new WeakMap,ud=new WeakMap,hd=new WeakMap,dd=new WeakMap,fd=new WeakMap,Rc=new WeakMap,pd=new WeakMap;QB.NAME="Certificate";var L3;(function(t){t[t.unspecified=0]="unspecified",t[t.keyCompromise=1]="keyCompromise",t[t.cACompromise=2]="cACompromise",t[t.affiliationChanged=3]="affiliationChanged",t[t.superseded=4]="superseded",t[t.cessationOfOperation=5]="cessationOfOperation",t[t.certificateHold=6]="certificateHold",t[t.removeFromCRL=8]="removeFromCRL",t[t.privilegeWithdrawn=9]="privilegeWithdrawn",t[t.aACompromise=10]="aACompromise"})(L3||(L3={}));mr.register(aB,VB);mr.register(cB,FB);mr.register(hB,qB);mr.register(mB,Ey);mr.register(o_,lf);mr.register(pB,KB);mr.register(f_,GB);mr.register(l_,YB);mr.register(uB,XB);jy.register(IB,JB);jy.register(G2,Y2);Ss.registerSingleton(Ty,EG);Ss.registerSingleton(Ty,Or);Or.namedCurveSize.set("P-256",32);Or.namedCurveSize.set("K-256",32);Or.namedCurveSize.set("P-384",48);Or.namedCurveSize.set("P-521",66);const TG=["-----BEGIN CERTIFICATE-----","-----BEGIN X509 CERTIFICATE-----","-----BEGIN TRUSTED CERTIFICATE-----"],RG=["-----BEGIN PRIVATE KEY-----","-----BEGIN RSA PRIVATE KEY-----","-----BEGIN EC PRIVATE KEY-----","-----BEGIN ENCRYPTED PRIVATE KEY-----"],OG=["-----BEGIN PUBLIC KEY-----","-----BEGIN RSA PUBLIC KEY-----"],BG=["-----BEGIN CERTIFICATE REQUEST-----","-----BEGIN NEW CERTIFICATE REQUEST-----"];function MG(t){const e=t.trim();for(const n of TG)if(e.startsWith(n))return{type:"certificate",content:e};for(const n of RG)if(e.startsWith(n))return{type:"private-key",content:e};for(const n of OG)if(e.startsWith(n))return{type:"public-key",content:e};for(const n of BG)if(e.startsWith(n))return{type:"csr",content:e};return null}function DG(t){try{const e=new QB(t),n=new Date,s={};for(const k of e.subject.split(", ")){const[C,E]=k.split("=");C&&E&&(s[C]=E)}const r={};for(const k of e.issuer.split(", ")){const[C,E]=k.split("=");C&&E&&(r[C]=E)}const a=e.notBefore,o=e.notAfter,c=n>o,h=n<a,d=Math.ceil((o.getTime()-n.getTime())/(1e3*60*60*24)),g=e.subject===e.issuer;let m="Unknown";try{const k=e.publicKey;m=k.algorithm.name||"Unknown","namedCurve"in k.algorithm&&(m+=` (${k.algorithm.namedCurve})`),"modulusLength"in k.algorithm&&(m+=` ${k.algorithm.modulusLength}-bit`)}catch{}const v=e.signatureAlgorithm.name||"Unknown";let y,_,w,S=!1;for(const k of e.extensions){if(k.type==="2.5.29.15")try{const C=k;y=[],C.usages&Ji.digitalSignature&&y.push("Digital Signature"),C.usages&Ji.keyEncipherment&&y.push("Key Encipherment"),C.usages&Ji.dataEncipherment&&y.push("Data Encipherment"),C.usages&Ji.keyAgreement&&y.push("Key Agreement"),C.usages&Ji.keyCertSign&&y.push("Certificate Signing"),C.usages&Ji.cRLSign&&y.push("CRL Signing"),C.usages&Ji.nonRepudiation&&y.push("Non-Repudiation")}catch{}if(k.type==="2.5.29.37")try{_=k.usages.map(E=>{const B=String(E);return{"1.3.6.1.5.5.7.3.1":"Server Authentication","1.3.6.1.5.5.7.3.2":"Client Authentication","1.3.6.1.5.5.7.3.3":"Code Signing","1.3.6.1.5.5.7.3.4":"Email Protection","1.3.6.1.5.5.7.3.8":"Time Stamping","1.3.6.1.5.5.7.3.9":"OCSP Signing"}[B]||B})}catch{}if(k.type==="2.5.29.17")try{w=k.names.items.map(E=>E.type==="dns"?`DNS:${E.value}`:E.type==="ip"?`IP:${E.value}`:E.type==="email"?`Email:${E.value}`:E.type==="url"?`URI:${E.value}`:String(E.value))}catch{}if(k.type==="2.5.29.19")try{S=k.ca}catch{}}return{subject:s,issuer:r,serialNumber:e.serialNumber,notBefore:a,notAfter:o,isExpired:c,isNotYetValid:h,daysUntilExpiry:d,keyAlgorithm:m,signatureAlgorithm:v,keyUsage:y,extKeyUsage:_,subjectAltNames:w,isSelfSigned:g,isCA:S}}catch(e){return console.error("Failed to parse certificate:",e),null}}function I3(t){return t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",timeZoneName:"short"})}function Xb(t){const e=["CN","O","OU","L","ST","C"],n=[];for(const s of e)t[s]&&n.push(`${s}=${t[s]}`);for(const[s,r]of Object.entries(t))e.includes(s)||n.push(`${s}=${r}`);return n.join(", ")}function gw(t){const e=He.c(34),{name:n,pem:s}=t,[r,a]=K.useState(!0),[o,c]=K.useState(!1);let h,d;if(e[0]!==o||e[1]!==r||e[2]!==n||e[3]!==s){d=Symbol.for("react.early_return_sentinel");e:{const g=DG(s);let m;e[6]!==s?(m=async()=>{await navigator.clipboard.writeText(s),c(!0),setTimeout(()=>c(!1),2e3)},e[6]=s,e[7]=m):m=e[7];const v=m;if(!g){let $;e[8]===Symbol.for("react.memo_cache_sentinel")?($=f.jsx(h0,{size:14,className:"text-amber-500"}),e[8]=$):$=e[8];let Z;e[9]!==n?(Z=f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n}),e[9]=n,e[10]=Z):Z=e[10];let F;e[11]===Symbol.for("react.memo_cache_sentinel")?(F=f.jsx("span",{className:"text-xs text-neutral-500",children:"Failed to parse certificate"}),e[11]=F):F=e[11];let W;e[12]!==Z?(W=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-3",children:f.jsxs("div",{className:"flex items-center gap-2",children:[$,Z,F]})}),e[12]=Z,e[13]=W):W=e[13],d=W;break e}let y="text-emerald-500",_="bg-emerald-100 dark:bg-emerald-500/20",w="Valid";g.isExpired?(y="text-red-500",_="bg-red-100 dark:bg-red-500/20",w="Expired"):g.isNotYetValid?(y="text-amber-500",_="bg-amber-100 dark:bg-amber-500/20",w="Not Yet Valid"):g.daysUntilExpiry<=30&&(y="text-amber-500",_="bg-amber-100 dark:bg-amber-500/20",w=`Expires in ${g.daysUntilExpiry} days`);let S;e[14]!==r?(S=()=>a(!r),e[14]=r,e[15]=S):S=e[15];let k;e[16]===Symbol.for("react.memo_cache_sentinel")?(k=f.jsx(hu,{size:14,className:"text-blue-500 dark:text-blue-400"}),e[16]=k):k=e[16];let C;e[17]!==n?(C=f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n}),e[17]=n,e[18]=C):C=e[18];const E=`text-xs px-1.5 py-0.5 rounded ${_} ${y}`;let B;e[19]!==w||e[20]!==E?(B=f.jsx("span",{className:E,children:w}),e[19]=w,e[20]=E,e[21]=B):B=e[21];let D;e[22]!==v?(D=$=>{$.stopPropagation(),v()},e[22]=v,e[23]=D):D=e[23];let j;e[24]!==o?(j=o?f.jsx(Cn,{size:14,className:"text-emerald-500"}):f.jsx(us,{size:14,className:"text-neutral-400"}),e[24]=o,e[25]=j):j=e[25];let P;e[26]!==j||e[27]!==D?(P=f.jsx("button",{onClick:D,className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy certificate",children:j}),e[26]=j,e[27]=D,e[28]=P):P=e[28];let U;e[29]!==r?(U=r?f.jsx(rs,{size:14,className:"text-neutral-400"}):f.jsx(Br,{size:14,className:"text-neutral-400"}),e[29]=r,e[30]=U):U=e[30];let X;e[31]!==P||e[32]!==U?(X=f.jsxs("div",{className:"flex items-center gap-1",children:[P,U]}),e[31]=P,e[32]=U,e[33]=X):X=e[33],h=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:S,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[k,C,B,g.isCA&&f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-purple-100 dark:bg-purple-500/20 text-purple-600 dark:text-purple-400",children:"CA"}),g.isSelfSigned&&f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-neutral-200 dark:bg-neutral-600/50 text-neutral-600 dark:text-neutral-400",children:"Self-Signed"})]}),X]}),r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3 space-y-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Subject"}),f.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300",children:g.subject.CN||Xb(g.subject)}),g.subject.CN&&Object.keys(g.subject).length>1&&f.jsx("div",{className:"text-xs font-mono text-neutral-500 mt-0.5",children:Xb(g.subject)})]}),!g.isSelfSigned&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Issuer"}),f.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300",children:g.issuer.CN||Xb(g.issuer)})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Not Before"}),f.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300",children:I3(g.notBefore)})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Not After"}),f.jsxs("div",{className:`text-xs font-mono flex items-center gap-1 ${g.isExpired?"text-red-500":g.daysUntilExpiry<=30?"text-amber-500":"text-neutral-700 dark:text-neutral-300"}`,children:[g.isExpired?f.jsx(h0,{size:12}):g.daysUntilExpiry<=30?f.jsx(oa,{size:12}):f.jsx(EI,{size:12,className:"text-emerald-500"}),I3(g.notAfter)]})]})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Serial Number"}),f.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300 break-all",children:g.serialNumber})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Key Algorithm"}),f.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300",children:g.keyAlgorithm})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Signature Algorithm"}),f.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300",children:g.signatureAlgorithm})]})]}),g.subjectAltNames&&g.subjectAltNames.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Subject Alternative Names"}),f.jsx("div",{className:"flex flex-wrap gap-1",children:g.subjectAltNames.map(PG)})]}),g.keyUsage&&g.keyUsage.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Key Usage"}),f.jsx("div",{className:"flex flex-wrap gap-1",children:g.keyUsage.map(IG)})]}),g.extKeyUsage&&g.extKeyUsage.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Extended Key Usage"}),f.jsx("div",{className:"flex flex-wrap gap-1",children:g.extKeyUsage.map(LG)})]})]})]})}e[0]=o,e[1]=r,e[2]=n,e[3]=s,e[4]=h,e[5]=d}else h=e[4],d=e[5];return d!==Symbol.for("react.early_return_sentinel")?d:h}function LG(t,e){return f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-neutral-200 dark:bg-neutral-600/50 text-neutral-600 dark:text-neutral-400",children:t},e)}function IG(t,e){return f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-neutral-200 dark:bg-neutral-600/50 text-neutral-600 dark:text-neutral-400",children:t},e)}function PG(t,e){return f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-blue-100 dark:bg-blue-500/20 text-blue-600 dark:text-blue-400 font-mono",children:t},e)}function zG(t){const e=He.c(32),{name:n,pem:s}=t,[r,a]=K.useState(!1),[o,c]=K.useState(!1);let h;e[0]!==s?(h=async()=>{await navigator.clipboard.writeText(s),c(!0),setTimeout(()=>c(!1),2e3)},e[0]=s,e[1]=h):h=e[1];const d=h;let g;e[2]!==r?(g=()=>a(!r),e[2]=r,e[3]=g):g=e[3];let m;e[4]===Symbol.for("react.memo_cache_sentinel")?(m=f.jsx(hu,{size:14,className:"text-red-500 dark:text-red-400"}),e[4]=m):m=e[4];let v;e[5]!==n?(v=f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n}),e[5]=n,e[6]=v):v=e[6];let y;e[7]===Symbol.for("react.memo_cache_sentinel")?(y=f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-red-100 dark:bg-red-500/20 text-red-600 dark:text-red-400",children:"Private Key"}),e[7]=y):y=e[7];let _;e[8]!==v?(_=f.jsxs("div",{className:"flex items-center gap-2",children:[m,v,y]}),e[8]=v,e[9]=_):_=e[9];let w;e[10]!==d?(w=P=>{P.stopPropagation(),d()},e[10]=d,e[11]=w):w=e[11];let S;e[12]!==o?(S=o?f.jsx(Cn,{size:14,className:"text-emerald-500"}):f.jsx(us,{size:14,className:"text-neutral-400"}),e[12]=o,e[13]=S):S=e[13];let k;e[14]!==w||e[15]!==S?(k=f.jsx("button",{onClick:w,className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy private key",children:S}),e[14]=w,e[15]=S,e[16]=k):k=e[16];let C;e[17]!==r?(C=r?f.jsx(rs,{size:14,className:"text-neutral-400"}):f.jsx(Br,{size:14,className:"text-neutral-400"}),e[17]=r,e[18]=C):C=e[18];let E;e[19]!==C||e[20]!==k?(E=f.jsxs("div",{className:"flex items-center gap-1",children:[k,C]}),e[19]=C,e[20]=k,e[21]=E):E=e[21];let B;e[22]!==E||e[23]!==g||e[24]!==_?(B=f.jsxs("button",{onClick:g,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[_,E]}),e[22]=E,e[23]=g,e[24]=_,e[25]=B):B=e[25];let D;e[26]!==r||e[27]!==s?(D=r&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:s})}),e[26]=r,e[27]=s,e[28]=D):D=e[28];let j;return e[29]!==B||e[30]!==D?(j=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[B,D]}),e[29]=B,e[30]=D,e[31]=j):j=e[31],j}function ZB(t){const e=He.c(32),{name:n,pem:s}=t,[r,a]=K.useState(!1),[o,c]=K.useState(!1);let h;e[0]!==s?(h=async()=>{await navigator.clipboard.writeText(s),c(!0),setTimeout(()=>c(!1),2e3)},e[0]=s,e[1]=h):h=e[1];const d=h;let g;e[2]!==r?(g=()=>a(!r),e[2]=r,e[3]=g):g=e[3];let m;e[4]===Symbol.for("react.memo_cache_sentinel")?(m=f.jsx(hu,{size:14,className:"text-amber-500 dark:text-amber-400"}),e[4]=m):m=e[4];let v;e[5]!==n?(v=f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n}),e[5]=n,e[6]=v):v=e[6];let y;e[7]===Symbol.for("react.memo_cache_sentinel")?(y=f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-amber-100 dark:bg-amber-500/20 text-amber-600 dark:text-amber-400",children:"Certificate Request"}),e[7]=y):y=e[7];let _;e[8]!==v?(_=f.jsxs("div",{className:"flex items-center gap-2",children:[m,v,y]}),e[8]=v,e[9]=_):_=e[9];let w;e[10]!==d?(w=P=>{P.stopPropagation(),d()},e[10]=d,e[11]=w):w=e[11];let S;e[12]!==o?(S=o?f.jsx(Cn,{size:14,className:"text-emerald-500"}):f.jsx(us,{size:14,className:"text-neutral-400"}),e[12]=o,e[13]=S):S=e[13];let k;e[14]!==w||e[15]!==S?(k=f.jsx("button",{onClick:w,className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy CSR",children:S}),e[14]=w,e[15]=S,e[16]=k):k=e[16];let C;e[17]!==r?(C=r?f.jsx(rs,{size:14,className:"text-neutral-400"}):f.jsx(Br,{size:14,className:"text-neutral-400"}),e[17]=r,e[18]=C):C=e[18];let E;e[19]!==C||e[20]!==k?(E=f.jsxs("div",{className:"flex items-center gap-1",children:[k,C]}),e[19]=C,e[20]=k,e[21]=E):E=e[21];let B;e[22]!==E||e[23]!==g||e[24]!==_?(B=f.jsxs("button",{onClick:g,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[_,E]}),e[22]=E,e[23]=g,e[24]=_,e[25]=B):B=e[25];let D;e[26]!==r||e[27]!==s?(D=r&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:s})}),e[26]=r,e[27]=s,e[28]=D):D=e[28];let j;return e[29]!==B||e[30]!==D?(j=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[B,D]}),e[29]=B,e[30]=D,e[31]=j):j=e[31],j}function $G(t){const e=He.c(6),{name:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=f.jsx(hu,{size:14,className:"text-blue-500 dark:text-blue-400"}),e[0]=s):s=e[0];let r;e[1]!==n?(r=f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n}),e[1]=n,e[2]=r):r=e[2];let a;e[3]===Symbol.for("react.memo_cache_sentinel")?(a=f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-blue-100 dark:bg-blue-500/20 text-blue-600 dark:text-blue-400",children:"Public Key"}),e[3]=a):a=e[3];let o;return e[4]!==r?(o=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-3",children:f.jsxs("div",{className:"flex items-center gap-2",children:[s,r,a]})}),e[4]=r,e[5]=o):o=e[5],o}function HG(t){const e=t?.find(m=>m.type==="Approved"),n=t?.find(m=>m.type==="Denied"),s=t?.find(m=>m.type==="Ready"),r=t?.find(m=>m.type==="InvalidRequest"),a=e?.status==="True",o=n?.status==="True",c=s?.status==="True",h=s?.status==="False"||r?.status==="True";let d,g;return c?(d=s?.reason,g=s?.message):h?(d=s?.reason||r?.reason,g=s?.message||r?.message):o?(d=n?.reason,g=n?.message):a&&(d=e?.reason,g=e?.message),{approved:a,denied:o,ready:c,failed:h,reason:d,message:g}}function UG(t){return t.ready?{text:"Issued",level:"success"}:t.failed||t.denied?{text:t.denied?"Denied":"Failed",level:"error"}:t.approved?{text:"Approved",level:"warning"}:{text:"Pending",level:"warning"}}function VG(t){return t.ready?f.jsx(Qr,{size:14,className:"text-emerald-400"}):t.failed||t.denied?f.jsx(Si,{size:14,className:"text-red-400"}):t.approved?f.jsx(Mn,{size:14,className:"text-amber-400 animate-spin"}):f.jsx(xo,{size:14,className:"text-amber-400"})}function FG(t){if(!t)return"Default (90d)";const e=t.match(/^(\d+)h/);if(e){const n=parseInt(e[1],10);return n>=8760?`${Math.round(n/8760)}y`:n>=720?`${Math.round(n/720)}mo`:n>=24?`${Math.round(n/24)}d`:`${n}h`}return t}function P3(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function Jb(t){if(!t)return null;try{return atob(t)}catch{return null}}const qG={kinds:["CertificateRequest","CertificateRequests"],adapt(t,e){const n=e.spec,s=e.status,r=e.metadata;if(!n)return{sections:[]};const a=HG(s?.conditions),o=UG(a),c=r?.annotations?.["cert-manager.io/certificate-name"],h=r?.annotations?.["cert-manager.io/certificate-revision"],d=[{id:"status",data:{type:"status-cards",items:[{label:"Status",value:o.text,status:o.level,icon:VG(a)},...a.approved?[{label:"Approved",value:"Yes",status:"success",icon:f.jsx(Qr,{size:14,className:"text-emerald-400"})}]:[],...n.isCA?[{label:"Type",value:"CA Certificate",status:"neutral",icon:f.jsx(c0,{size:14,className:"text-purple-400"})}]:[{label:"Type",value:"TLS Certificate",status:"neutral",icon:f.jsx(c0,{size:14,className:"text-blue-400"})}],...h?[{label:"Revision",value:h,status:"neutral"}]:[]]}}];if(c&&d.push({id:"parent-certificate",title:"Parent Certificate",data:{type:"custom",render:()=>f.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(uu,{size:14,className:"text-blue-400"}),f.jsx("span",{className:"text-sm text-blue-300",children:c})]})})}}),d.push({id:"details",title:"Request Details",data:{type:"info-grid",columns:2,items:[{label:"Duration",value:FG(n.duration)},...r?.creationTimestamp?[{label:"Created",value:P3(r.creationTimestamp)}]:[],...n.username?[{label:"Requested By",value:n.username.split(":").pop()||n.username}]:[]]}}),d.push({id:"issuer",title:"Issuer",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(gf,{size:14,className:"text-purple-400"}),f.jsx("span",{className:"text-sm font-medium text-purple-300",children:n.issuerRef.kind??"Issuer"})]}),f.jsx("div",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:n.issuerRef.name}),n.issuerRef.group&&f.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:n.issuerRef.group})]})}}),(n.username||n.groups?.length)&&d.push({id:"requester",title:"Requester",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(gT,{size:14,className:"text-neutral-600 dark:text-neutral-400"}),f.jsx("span",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Identity"})]}),n.username&&f.jsxs("div",{className:"text-xs text-neutral-700 dark:text-neutral-400 mb-1",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"User:"})," ",f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-mono",children:n.username})]}),n.groups&&n.groups.length>0&&f.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:n.groups.map((g,m)=>f.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-neutral-200 dark:bg-neutral-700 text-neutral-700 dark:text-neutral-400",children:g},m))})]})}}),n.usages?.length&&d.push({id:"usages",title:"Key Usages",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.usages.map((g,m)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-neutral-200 dark:bg-neutral-700 text-neutral-700 dark:text-neutral-300",children:g},m))})}}),s?.certificate){const g=Jb(s.certificate),m=s.ca?Jb(s.ca):null;d.push({id:"certificate-issued",title:"Certificate",data:{type:"custom",render:()=>f.jsxs("div",{className:"space-y-3",children:[g&&f.jsx(gw,{name:"Issued Certificate",pem:g}),m&&f.jsx(gw,{name:"CA Certificate",pem:m})]})}})}if(n.request){const g=Jb(n.request);g&&d.push({id:"csr",title:"Certificate Signing Request",data:{type:"custom",render:()=>f.jsx(ZB,{name:"Certificate Request",pem:g})}})}return s?.failureTime&&d.push({id:"failure",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 text-red-400",children:[f.jsx(oa,{size:14}),f.jsx("span",{className:"text-sm font-medium",children:"Failed"})]}),f.jsxs("div",{className:"text-xs text-neutral-500 mt-1",children:["Failure time: ",P3(s.failureTime)]}),a.message&&f.jsx("div",{className:"text-xs text-red-400/70 mt-1",children:a.message})]})}}),s?.conditions&&s.conditions.length>0&&d.push({id:"conditions",data:{type:"conditions",items:dr("CertificateRequest",s.conditions)}}),{sections:d}}};function eM(t){if(t)return t instanceof Date?t.toISOString():t}function z3(t){const e=eM(t);return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"N/A"}function $3(t){const e=eM(t);if(!e)return"N/A";const n=new Date(e),r=new Date().getTime()-n.getTime(),a=Math.floor(r/1e3),o=Math.floor(a/60),c=Math.floor(o/60),h=Math.floor(c/24);return h>0?`${h}d ago`:c>0?`${c}h ago`:o>0?`${o}m ago`:a>0?`${a}s ago`:"just now"}const KG={kinds:["Event","Events"],adapt(t,e){const n=e.metadata,s=e.involvedObject,r=e.source,a=e.type==="Warning",o=e.count??1,c=e.firstTimestamp||e.eventTime||n?.creationTimestamp,h=e.lastTimestamp||e.eventTime,d=[{id:"status",data:{type:"status-cards",items:[{label:"Type",value:e.type||"Normal",status:a?"warning":"success",icon:a?f.jsx(h0,{size:14,className:"text-amber-400"}):f.jsx(f7,{size:14,className:"text-emerald-400"})},{label:"Reason",value:e.reason||"Unknown",status:"neutral"},...o>1?[{label:"Count",value:o,status:"neutral",icon:f.jsx(u7,{size:14,className:"text-blue-400"})}]:[]]}}];return e.message&&d.push({id:"message",title:"Message",data:{type:"custom",render:()=>f.jsx("div",{className:`p-3 rounded-lg border ${a?"bg-amber-500/10 border-amber-500/30":"bg-neutral-100 dark:bg-neutral-900/50 border-neutral-200 dark:border-neutral-700"}`,children:f.jsx("p",{className:"text-sm text-neutral-700 dark:text-neutral-300 whitespace-pre-wrap",children:e.message})})}}),s&&s.name&&d.push({id:"involved-object",title:"Involved Object",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(aP,{size:14,className:"text-blue-400"}),f.jsx("span",{className:"text-sm font-medium text-blue-300",children:s.kind||"Resource"})]}),f.jsxs("div",{className:"space-y-1 text-xs",children:[f.jsxs("div",{className:"text-neutral-300",children:[f.jsx("span",{className:"text-neutral-500",children:"Name: "}),f.jsx("span",{className:"text-cyan-400 font-mono",children:s.name})]}),s.namespace&&f.jsxs("div",{className:"text-neutral-300",children:[f.jsx("span",{className:"text-neutral-500",children:"Namespace: "}),f.jsx("span",{className:"text-purple-400",children:s.namespace})]}),s.fieldPath&&f.jsxs("div",{className:"text-neutral-300",children:[f.jsx("span",{className:"text-neutral-500",children:"Field: "}),f.jsx("span",{className:"text-neutral-400 font-mono",children:s.fieldPath})]}),s.apiVersion&&f.jsxs("div",{className:"text-neutral-300",children:[f.jsx("span",{className:"text-neutral-500",children:"API Version: "}),f.jsx("span",{className:"text-neutral-400",children:s.apiVersion})]})]})]})}}),d.push({id:"timestamps",title:"Timestamps",data:{type:"custom",render:()=>f.jsxs("div",{className:"space-y-2",children:[c&&f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx(hT,{size:14,className:"text-neutral-500"}),f.jsx("span",{className:"text-neutral-500",children:"First seen:"}),f.jsx("span",{className:"text-neutral-300",children:z3(c)}),f.jsxs("span",{className:"text-neutral-500",children:["(",$3(c),")"]})]}),h&&o>1&&f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx(Mn,{size:14,className:"text-neutral-500"}),f.jsx("span",{className:"text-neutral-500",children:"Last seen:"}),f.jsx("span",{className:"text-neutral-300",children:z3(h)}),f.jsxs("span",{className:"text-neutral-500",children:["(",$3(h),")"]})]})]})}}),r&&(r.component||r.host)&&d.push({id:"source",title:"Source",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(Xr,{size:14,className:"text-neutral-400"}),f.jsx("span",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Event Source"})]}),f.jsxs("div",{className:"space-y-1 text-xs",children:[r.component&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-300",children:[f.jsx("span",{className:"text-neutral-500",children:"Component: "}),f.jsx("span",{className:"text-cyan-400",children:r.component})]}),r.host&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-300",children:[f.jsx("span",{className:"text-neutral-500",children:"Host: "}),f.jsx("span",{className:"text-neutral-400 font-mono",children:r.host})]})]})]})}}),(e.reportingComponent||e.reportingInstance)&&d.push({id:"reporting",title:"Reporting",data:{type:"info-grid",columns:2,items:[...e.reportingComponent?[{label:"Component",value:e.reportingComponent}]:[],...e.reportingInstance?[{label:"Instance",value:e.reportingInstance}]:[],...e.action?[{label:"Action",value:e.action}]:[]]}}),e.related&&e.related.name&&e.related.name!==s?.name&&d.push({id:"related",title:"Related Object",data:{type:"info-grid",columns:2,items:[{label:"Kind",value:e.related.kind||"Unknown"},{label:"Name",value:e.related.name},...e.related.namespace?[{label:"Namespace",value:e.related.namespace}]:[]]}}),{sections:d}}};function WG(t){switch(t){case"LoadBalancer":return{label:"LoadBalancer",status:"success",icon:f.jsx(Mr,{size:14,className:"text-emerald-400"})};case"NodePort":return{label:"NodePort",status:"warning",icon:f.jsx(Xr,{size:14,className:"text-amber-400"})};case"ExternalName":return{label:"ExternalName",status:"neutral",icon:f.jsx(cS,{size:14,className:"text-purple-400"})};default:return{label:t||"ClusterIP",status:"neutral",icon:f.jsx(ns,{size:14,className:"text-blue-400"})}}}const GG={kinds:["Service","Services"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=WG(n.type),a=n.type==="LoadBalancer",o=s?.loadBalancer?.ingress,c=a&&o&&o.length>0,h=[{id:"status",data:{type:"status-cards",items:[{label:"Type",value:r.label,status:r.status,icon:r.icon},...n.clusterIP&&n.clusterIP!=="None"?[{label:"Cluster IP",value:n.clusterIP,status:"neutral",icon:f.jsx(ns,{size:14,className:"text-blue-400"})}]:[],...n.clusterIP==="None"?[{label:"Cluster IP",value:"Headless",status:"neutral",icon:f.jsx(ns,{size:14,className:"text-neutral-400"})}]:[],...n.externalName?[{label:"External Name",value:n.externalName,status:"neutral",icon:f.jsx(cS,{size:14,className:"text-purple-400"})}]:[]]}}];return n.ports&&n.ports.length>0&&h.push({id:"ports",title:"Ports",data:{type:"custom",render:()=>f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsxs("table",{className:"w-full text-xs",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700",children:[f.jsx("th",{className:"pb-2 text-left text-neutral-500 font-medium",children:"Name"}),f.jsx("th",{className:"pb-2 text-left text-neutral-500 font-medium",children:"Protocol"}),f.jsx("th",{className:"pb-2 text-right text-neutral-500 font-medium",children:"Port"}),f.jsx("th",{className:"pb-2 text-right text-neutral-500 font-medium",children:"Target"}),f.jsx("th",{className:"pb-2 text-right text-neutral-500 font-medium",children:"NodePort"})]})}),f.jsx("tbody",{children:n.ports.map((g,m)=>f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-2 text-neutral-900 dark:text-neutral-300",children:g.name||f.jsx("span",{className:"text-neutral-400 italic",children:"unnamed"})}),f.jsx("td",{className:"py-2",children:f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-neutral-200 dark:bg-neutral-700 text-neutral-600 dark:text-neutral-400",children:g.protocol||"TCP"})}),f.jsx("td",{className:"py-2 text-right font-mono text-neutral-700 dark:text-neutral-300",children:g.port}),f.jsx("td",{className:"py-2 text-right font-mono text-neutral-700 dark:text-neutral-300",children:g.targetPort||f.jsx("span",{className:"text-neutral-400",children:""})}),f.jsx("td",{className:"py-2 text-right font-mono text-amber-500 dark:text-amber-400",children:g.nodePort||f.jsx("span",{className:"text-neutral-400",children:""})})]},m))})]})})}}),a&&h.push({id:"loadbalancer",title:"Load Balancer",data:{type:"custom",render:()=>f.jsx("div",{className:`rounded-lg p-3 border ${c?"bg-emerald-500/10 border-emerald-500/30":"bg-amber-500/10 border-amber-500/30"}`,children:c?f.jsx("div",{className:"space-y-2",children:o.map((g,m)=>f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Mr,{size:14,className:"text-emerald-400"}),f.jsx("span",{className:"text-sm font-mono text-emerald-300",children:g.ip||g.hostname||"N/A"})]},m))}):f.jsxs("div",{className:"flex items-center gap-2 text-amber-400",children:[f.jsx(Mr,{size:14}),f.jsx("span",{className:"text-sm",children:"Pending external IP assignment..."})]})})}}),n.externalIPs&&n.externalIPs.length>0&&h.push({id:"external-ips",title:"External IPs",data:{type:"custom",render:()=>f.jsx("div",{className:"flex flex-wrap gap-2",children:n.externalIPs.map((g,m)=>f.jsx("span",{className:"text-xs px-2 py-1 rounded bg-purple-500/20 text-purple-300 font-mono",children:g},m))})}}),n.selector&&Object.keys(n.selector).length>0&&h.push({id:"selector",data:{type:"labels",labels:n.selector,title:"Selector"}}),(n.externalTrafficPolicy||n.internalTrafficPolicy||n.sessionAffinity!=="None")&&h.push({id:"traffic",title:"Traffic Configuration",data:{type:"info-grid",columns:2,items:[...n.externalTrafficPolicy?[{label:"External Traffic",value:n.externalTrafficPolicy,color:n.externalTrafficPolicy==="Local"?"text-amber-400":void 0}]:[],...n.internalTrafficPolicy?[{label:"Internal Traffic",value:n.internalTrafficPolicy}]:[],...n.sessionAffinity&&n.sessionAffinity!=="None"?[{label:"Session Affinity",value:n.sessionAffinity,color:"text-purple-400"}]:[],...n.sessionAffinityConfig?.clientIP?.timeoutSeconds?[{label:"Affinity Timeout",value:`${n.sessionAffinityConfig.clientIP.timeoutSeconds}s`}]:[],...n.healthCheckNodePort?[{label:"Health Check Port",value:n.healthCheckNodePort}]:[]]}}),a&&(n.loadBalancerIP||n.loadBalancerSourceRanges?.length||n.loadBalancerClass)&&h.push({id:"lb-config",title:"Load Balancer Configuration",data:{type:"custom",render:()=>f.jsxs("div",{className:"space-y-2",children:[n.loadBalancerIP&&f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx("span",{className:"text-neutral-500",children:"Requested IP:"}),f.jsx("span",{className:"text-neutral-300 font-mono",children:n.loadBalancerIP})]}),n.loadBalancerClass&&f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx("span",{className:"text-neutral-500",children:"Class:"}),f.jsx("span",{className:"text-neutral-300",children:n.loadBalancerClass})]}),n.loadBalancerSourceRanges&&n.loadBalancerSourceRanges.length>0&&f.jsxs("div",{className:"text-sm",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(xg,{size:14,className:"text-neutral-500"}),f.jsx("span",{className:"text-neutral-500",children:"Source Ranges:"})]}),f.jsx("div",{className:"flex flex-wrap gap-1 ml-5",children:n.loadBalancerSourceRanges.map((g,m)=>f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-amber-500/20 text-amber-300 font-mono",children:g},m))})]}),n.allocateLoadBalancerNodePorts===!1&&f.jsx("div",{className:"text-xs text-neutral-500",children:"NodePort allocation disabled"})]})}}),s?.conditions&&s.conditions.length>0&&h.push({id:"conditions",data:{type:"conditions",items:dr("Service",s.conditions)}}),{sections:h}}};async function YG(t){try{const e=atob(t),n=atob(e),s=new Uint8Array(n.length);for(let v=0;v<n.length;v++)s[v]=n.charCodeAt(v);const r=new DecompressionStream("gzip"),a=r.writable.getWriter();a.write(s),a.close();const o=r.readable.getReader(),c=[];for(;;){const{done:v,value:y}=await o.read();if(v)break;c.push(y)}const h=c.reduce((v,y)=>v+y.length,0),d=new Uint8Array(h);let g=0;for(const v of c)d.set(v,g),g+=v.length;const m=new TextDecoder().decode(d);return JSON.parse(m)}catch(e){return console.error("Failed to decode Helm release:",e),null}}function XG(t){switch(t?.toLowerCase()){case"deployed":return"text-emerald-400";case"failed":return"text-red-400";case"pending-install":case"pending-upgrade":case"pending-rollback":return"text-yellow-400";case"uninstalling":case"superseded":return"text-neutral-400";default:return"text-neutral-300"}}function JG(t){const e=He.c(52),{encoded:n}=t,[s,r]=K.useState(null),[a,o]=K.useState(null),[c,h]=K.useState(!0),[d,g]=K.useState(!1),[m,v]=K.useState(!1),[y,_]=K.useState(!1),[w,S]=K.useState(null);let k,C;e[0]!==n?(k=()=>{YG(n).then(we=>{r(we),h(!1)}).catch(()=>{o("Failed to decode Helm release data"),h(!1)})},C=[n],e[0]=n,e[1]=k,e[2]=C):(k=e[1],C=e[2]),K.useEffect(k,C);let E;e[3]===Symbol.for("react.memo_cache_sentinel")?(E=async(we,Se)=>{await navigator.clipboard.writeText(Se),S(we),setTimeout(()=>S(null),2e3)},e[3]=E):E=e[3];const B=E;if(c){let we;return e[4]===Symbol.for("react.memo_cache_sentinel")?(we=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Decoding Helm release..."})}),e[4]=we):we=e[4],we}if(a||!s){const we=a||"Failed to decode release";let Se;return e[5]!==we?(Se=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("span",{className:"text-xs text-red-600 dark:text-red-400",children:we})}),e[5]=we,e[6]=Se):Se=e[6],Se}const D=s.chart?.metadata,j=s.info;let P;e[7]!==D?(P=D?.description&&f.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:D.description}),e[7]=D,e[8]=P):P=e[8];let U;e[9]===Symbol.for("react.memo_cache_sentinel")?(U=f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 dark:text-neutral-500 whitespace-nowrap",children:"Release"}),e[9]=U):U=e[9];const X=s.name||"Unknown";let $;e[10]!==X?($=f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[U,f.jsx("td",{className:"py-1.5 text-neutral-900 dark:text-neutral-300",children:X})]}),e[10]=X,e[11]=$):$=e[11];let Z;e[12]===Symbol.for("react.memo_cache_sentinel")?(Z=f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 dark:text-neutral-500 whitespace-nowrap",children:"Revision"}),e[12]=Z):Z=e[12];const F=s.version||1;let W;e[13]!==F?(W=f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[Z,f.jsx("td",{className:"py-1.5 text-neutral-900 dark:text-neutral-300",children:F})]}),e[13]=F,e[14]=W):W=e[14];let Q;e[15]===Symbol.for("react.memo_cache_sentinel")?(Q=f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 dark:text-neutral-500 whitespace-nowrap",children:"Status"}),e[15]=Q):Q=e[15];const V=j?.status;let M;e[16]!==V?(M=XG(V),e[16]=V,e[17]=M):M=e[17];const G=`py-1.5 font-medium ${M}`,q=j?.status||"Unknown";let z;e[18]!==G||e[19]!==q?(z=f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[Q,f.jsx("td",{className:G,children:q})]}),e[18]=G,e[19]=q,e[20]=z):z=e[20];let O;e[21]!==D?(O=D&&f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 dark:text-neutral-500 whitespace-nowrap",children:"Chart"}),f.jsxs("td",{className:"py-1.5 text-neutral-900 dark:text-neutral-300",children:[D.name,"-",D.version]})]}),e[21]=D,e[22]=O):O=e[22];let T;e[23]!==D?(T=D?.appVersion&&f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 dark:text-neutral-500 whitespace-nowrap",children:"App Version"}),f.jsx("td",{className:"py-1.5 text-cyan-600 dark:text-cyan-400",children:D.appVersion})]}),e[23]=D,e[24]=T):T=e[24];let H;e[25]!==j?(H=j?.last_deployed&&f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 dark:text-neutral-500 whitespace-nowrap",children:"Last Deployed"}),f.jsx("td",{className:"py-1.5 text-neutral-900 dark:text-neutral-300",children:new Date(j.last_deployed).toLocaleString()})]}),e[25]=j,e[26]=H):H=e[26];let N;e[27]!==W||e[28]!==z||e[29]!==O||e[30]!==T||e[31]!==H||e[32]!==$?(N=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("table",{className:"w-full text-xs",children:f.jsxs("tbody",{children:[$,W,z,O,T,H]})})}),e[27]=W,e[28]=z,e[29]=O,e[30]=T,e[31]=H,e[32]=$,e[33]=N):N=e[33];let Y;e[34]!==w||e[35]!==s.config||e[36]!==d?(Y=s.config&&Object.keys(s.config).length>0&&f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:()=>g(!d),className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(gf,{size:14,className:"text-amber-500 dark:text-amber-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:"User Values"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:we=>{we.stopPropagation(),B("values",JSON.stringify(s.config,null,2))},className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy values",children:w==="values"?f.jsx(Cn,{size:14,className:"text-emerald-500"}):f.jsx(us,{size:14,className:"text-neutral-400"})}),d?f.jsx(rs,{size:14,className:"text-neutral-400"}):f.jsx(Br,{size:14,className:"text-neutral-400"})]})]}),d&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:JSON.stringify(s.config,null,2)})})]}),e[34]=w,e[35]=s.config,e[36]=d,e[37]=Y):Y=e[37];let oe;e[38]!==w||e[39]!==j||e[40]!==y?(oe=j?.notes&&f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:()=>_(!y),className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(bi,{size:14,className:"text-blue-500 dark:text-blue-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:"Release Notes"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:we=>{we.stopPropagation(),B("notes",j.notes||"")},className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy notes",children:w==="notes"?f.jsx(Cn,{size:14,className:"text-emerald-500"}):f.jsx(us,{size:14,className:"text-neutral-400"})}),y?f.jsx(rs,{size:14,className:"text-neutral-400"}):f.jsx(Br,{size:14,className:"text-neutral-400"})]})]}),y&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:j.notes})})]}),e[38]=w,e[39]=j,e[40]=y,e[41]=oe):oe=e[41];let ee;e[42]!==w||e[43]!==s.manifest||e[44]!==m?(ee=s.manifest&&f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:()=>v(!m),className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(bi,{size:14,className:"text-purple-500 dark:text-purple-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:"Rendered Manifest"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:we=>{we.stopPropagation(),B("manifest",s.manifest||"")},className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy manifest",children:w==="manifest"?f.jsx(Cn,{size:14,className:"text-emerald-500"}):f.jsx(us,{size:14,className:"text-neutral-400"})}),m?f.jsx(rs,{size:14,className:"text-neutral-400"}):f.jsx(Br,{size:14,className:"text-neutral-400"})]})]}),m&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-96 overflow-y-auto",children:s.manifest})})]}),e[42]=w,e[43]=s.manifest,e[44]=m,e[45]=ee):ee=e[45];let de;return e[46]!==N||e[47]!==Y||e[48]!==oe||e[49]!==ee||e[50]!==P?(de=f.jsxs("div",{className:"space-y-4",children:[P,N,Y,oe,ee]}),e[46]=N,e[47]=Y,e[48]=oe,e[49]=ee,e[50]=P,e[51]=de):de=e[51],de}function QG(t){try{const e=atob(t);return JSON.parse(e)}catch{return null}}function ZG(t){try{const e=atob(t),[n,...s]=e.split(":");return{username:n,password:s.join(":")}}catch{return null}}function eY(t){const e=He.c(21),{encoded:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=new Set,e[0]=s):s=e[0];const[r,a]=K.useState(s),[o,c]=K.useState(null),[h,d]=K.useState(!1);let g,m,v,y,_;if(e[1]!==o||e[2]!==n||e[3]!==r){_=Symbol.for("react.early_return_sentinel");e:{const k=QG(n);m=k?JSON.stringify(k,null,2):null;let C;e[9]===Symbol.for("react.memo_cache_sentinel")?(C=async(D,j)=>{await navigator.clipboard.writeText(j),c(D),setTimeout(()=>c(null),2e3)},e[9]=C):C=e[9],g=C;const E=D=>{a(j=>{const P=new Set(j);return P.has(D)?P.delete(D):P.add(D),P})};if(!k||!k.auths){let D;e[10]===Symbol.for("react.memo_cache_sentinel")?(D=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("span",{className:"text-xs text-red-600 dark:text-red-400",children:"Failed to decode Docker config"})}),e[10]=D):D=e[10],_=D;break e}const B=Object.entries(k.auths);if(B.length===0){let D;e[11]===Symbol.for("react.memo_cache_sentinel")?(D=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"No registries configured"})}),e[11]=D):D=e[11],_=D;break e}v="space-y-3",y=B.map(D=>{const[j,P]=D;let U=P.username,X=P.password;if(!U&&P.auth){const Z=ZG(P.auth);Z&&(U=Z.username,X=Z.password)}const $=r.has(j);return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[f.jsx(Xr,{size:14,className:"text-blue-500 dark:text-blue-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-900 dark:text-neutral-200 break-all",children:j})]}),f.jsx("table",{className:"w-full text-xs",children:f.jsxs("tbody",{children:[U&&f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 whitespace-nowrap w-1",children:f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(gT,{size:12}),"Username"]})}),f.jsx("td",{className:"py-1.5 text-neutral-900 dark:text-neutral-300",children:U}),f.jsx("td",{className:"py-1.5",children:f.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[f.jsx("div",{className:"w-7"}),f.jsx("button",{onClick:()=>g(`${j}-username`,U),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:"Copy username",children:o===`${j}-username`?f.jsx(Cn,{size:12,className:"text-emerald-500"}):f.jsx(us,{size:12,className:"text-neutral-400"})})]})})]}),X&&f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 whitespace-nowrap w-1",children:f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(gf,{size:12}),"Password"]})}),f.jsx("td",{className:"py-1.5 font-mono",children:$?f.jsx("span",{className:"text-neutral-900 dark:text-neutral-300 break-all",children:X}):f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:""})}),f.jsx("td",{className:"py-1.5",children:f.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[f.jsx("button",{onClick:()=>E(j),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:$?"Hide password":"Reveal password",children:$?f.jsx(uS,{size:12,className:"text-neutral-400"}):f.jsx(hS,{size:12,className:"text-neutral-400"})}),f.jsx("button",{onClick:()=>g(`${j}-password`,X),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:"Copy password",children:o===`${j}-password`?f.jsx(Cn,{size:12,className:"text-emerald-500"}):f.jsx(us,{size:12,className:"text-neutral-400"})})]})})]}),P.email&&f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 whitespace-nowrap w-1",children:f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(k7,{size:12}),"Email"]})}),f.jsx("td",{className:"py-1.5 text-neutral-900 dark:text-neutral-300",children:P.email}),f.jsx("td",{className:"py-1.5",children:f.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[f.jsx("div",{className:"w-7"}),f.jsx("button",{onClick:()=>g(`${j}-email`,P.email),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:"Copy email",children:o===`${j}-email`?f.jsx(Cn,{size:12,className:"text-emerald-500"}):f.jsx(us,{size:12,className:"text-neutral-400"})})]})})]})]})})]},j)})}e[1]=o,e[2]=n,e[3]=r,e[4]=g,e[5]=m,e[6]=v,e[7]=y,e[8]=_}else g=e[4],m=e[5],v=e[6],y=e[7],_=e[8];if(_!==Symbol.for("react.early_return_sentinel"))return _;let w;e[12]!==o||e[13]!==g||e[14]!==m||e[15]!==h?(w=m&&f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:()=>d(!h),className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(bi,{size:14,className:"text-purple-500 dark:text-purple-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:"Docker Config"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:k=>{k.stopPropagation(),g("raw",m)},className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy JSON",children:o==="raw"?f.jsx(Cn,{size:14,className:"text-emerald-500"}):f.jsx(us,{size:14,className:"text-neutral-400"})}),h?f.jsx(rs,{size:14,className:"text-neutral-400"}):f.jsx(Br,{size:14,className:"text-neutral-400"})]})]}),h&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:m})})]}),e[12]=o,e[13]=g,e[14]=m,e[15]=h,e[16]=w):w=e[16];let S;return e[17]!==v||e[18]!==y||e[19]!==w?(S=f.jsxs("div",{className:v,children:[y,w]}),e[17]=v,e[18]=y,e[19]=w,e[20]=S):S=e[20],S}function tY(t){try{return atob(t)}catch{return null}}function nY(t){let e=0;for(let n=0;n<Math.min(t.length,1e3);n++){const s=t.charCodeAt(n);(s===0||s<32&&s!==9&&s!==10&&s!==13)&&e++}return e>t.length*.1}function H3(t){return t.replace(/^[\r\n]+|[\r\n]+$/g,"").includes(`
`)}function sY(t){return!t.endsWith(".crt")&&!t.endsWith(".pem")&&t!=="ca.crt"&&t!=="tls.crt"&&t!=="namespace"}function rY(t){const e=He.c(12),{entries:n}=t,[s,r]=K.useState(null);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=new Set,e[0]=a):a=e[0];const[o,c]=K.useState(a);let h;e[1]===Symbol.for("react.memo_cache_sentinel")?(h=async(_,w)=>{await navigator.clipboard.writeText(w),r(_),setTimeout(()=>r(null),2e3)},e[1]=h):h=e[1];const d=h;let g;e[2]===Symbol.for("react.memo_cache_sentinel")?(g=_=>{c(w=>{const S=new Set(w);return S.has(_)?S.delete(_):S.add(_),S})},e[2]=g):g=e[2];const m=g;let v;if(e[3]!==s||e[4]!==n||e[5]!==o){let _;e[7]!==s||e[8]!==o?(_=w=>{const{key:S,decoded:k,isSensitive:C}=w;return f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 whitespace-nowrap",children:S}),f.jsx("td",{className:"py-1.5 font-mono break-all",children:C&&!o.has(S)?f.jsx("span",{className:"text-neutral-400",children:""}):f.jsx("span",{className:"text-neutral-900 dark:text-neutral-300",children:k})}),f.jsx("td",{className:"py-1.5 w-1",children:f.jsxs("div",{className:"flex items-center gap-1",children:[C?f.jsx("button",{onClick:()=>m(S),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:o.has(S)?"Hide value":"Reveal value",children:o.has(S)?f.jsx(uS,{size:12,className:"text-neutral-400"}):f.jsx(hS,{size:12,className:"text-neutral-400"})}):f.jsx("div",{className:"w-7"}),f.jsx("button",{onClick:()=>d(S,k),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:"Copy value",children:s===S?f.jsx(Cn,{size:12,className:"text-emerald-500"}):f.jsx(us,{size:12,className:"text-neutral-400"})})]})})]},S)},e[7]=s,e[8]=o,e[9]=_):_=e[9],v=n.map(_),e[3]=s,e[4]=n,e[5]=o,e[6]=v}else v=e[6];let y;return e[10]!==v?(y=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("table",{className:"w-full text-xs",children:f.jsx("tbody",{children:v})})}),e[10]=v,e[11]=y):y=e[11],y}function iY(t){const e=He.c(35),{name:n,decoded:s,isSensitive:r}=t,[a,o]=K.useState(!1),[c,h]=K.useState(!1),[d,g]=K.useState(!1);let m;e[0]!==s?(m=async()=>{await navigator.clipboard.writeText(s),g(!0),setTimeout(()=>g(!1),2e3)},e[0]=s,e[1]=m):m=e[1];const v=m;let y;e[2]!==a?(y=()=>o(!a),e[2]=a,e[3]=y):y=e[3];let _;e[4]===Symbol.for("react.memo_cache_sentinel")?(_=f.jsx(gf,{size:14,className:"text-amber-500 dark:text-amber-400"}),e[4]=_):_=e[4];let w;e[5]!==n?(w=f.jsxs("div",{className:"flex items-center gap-2",children:[_,f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n})]}),e[5]=n,e[6]=w):w=e[6];let S;e[7]!==v?(S=X=>{X.stopPropagation(),v()},e[7]=v,e[8]=S):S=e[8];let k;e[9]!==d?(k=d?f.jsx(Cn,{size:14,className:"text-emerald-500"}):f.jsx(us,{size:14,className:"text-neutral-400"}),e[9]=d,e[10]=k):k=e[10];let C;e[11]!==S||e[12]!==k?(C=f.jsx("button",{onClick:S,className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy value",children:k}),e[11]=S,e[12]=k,e[13]=C):C=e[13];let E;e[14]!==r||e[15]!==c?(E=r&&f.jsx("button",{onClick:X=>{X.stopPropagation(),h(!c)},className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:c?"Hide value":"Reveal value",children:c?f.jsx(uS,{size:14,className:"text-neutral-400"}):f.jsx(hS,{size:14,className:"text-neutral-400"})}),e[14]=r,e[15]=c,e[16]=E):E=e[16];let B;e[17]!==a?(B=a?f.jsx(rs,{size:14,className:"text-neutral-400"}):f.jsx(Br,{size:14,className:"text-neutral-400"}),e[17]=a,e[18]=B):B=e[18];let D;e[19]!==C||e[20]!==E||e[21]!==B?(D=f.jsxs("div",{className:"flex items-center gap-1",children:[C,E,B]}),e[19]=C,e[20]=E,e[21]=B,e[22]=D):D=e[22];let j;e[23]!==D||e[24]!==y||e[25]!==w?(j=f.jsxs("button",{onClick:y,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[w,D]}),e[23]=D,e[24]=y,e[25]=w,e[26]=j):j=e[26];let P;e[27]!==s||e[28]!==a||e[29]!==r||e[30]!==c?(P=a&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:r&&!c?f.jsx("span",{className:"text-xs text-neutral-400 font-mono",children:""}):f.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:s})}),e[27]=s,e[28]=a,e[29]=r,e[30]=c,e[31]=P):P=e[31];let U;return e[32]!==j||e[33]!==P?(U=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[j,P]}),e[32]=j,e[33]=P,e[34]=U):U=e[34],U}const aY={kinds:["Secret","Secrets"],adapt(t,e){const n=e.data||{},s=e.stringData||{},r=[...new Set([...Object.keys(n),...Object.keys(s)])];if(e.type==="helm.sh/release.v1"&&n.release)return{sections:[{id:"helm-release",data:{type:"custom",render:()=>f.jsx(JG,{encoded:n.release})}}]};if(e.type==="kubernetes.io/dockerconfigjson"&&n[".dockerconfigjson"])return{sections:[{id:"docker-config",data:{type:"custom",render:()=>f.jsx(eY,{encoded:n[".dockerconfigjson"]})}}]};const a=[];e.immutable&&a.push({id:"status",data:{type:"status-cards",items:[{label:"Immutable",value:"Yes",status:"warning",icon:f.jsx(xg,{size:14,className:"text-amber-400"})}]}});const o=[],c=[],h=[],d=[],g=[],m=[],v=[];return r.forEach(y=>{const _=n[y]||btoa(s[y]||""),w=tY(_),S=sY(y);if(!w)h.push(y);else if(nY(w))h.push(y);else{const k=MG(w);if(k)switch(k.type){case"certificate":d.push({key:y,pem:k.content});break;case"private-key":g.push({key:y,pem:k.content});break;case"public-key":m.push(y);break;case"csr":v.push({key:y,pem:k.content});break;default:H3(w)?c.push({key:y,decoded:w,isSensitive:S}):o.push({key:y,decoded:w,isSensitive:S})}else H3(w)?c.push({key:y,decoded:w,isSensitive:S}):o.push({key:y,decoded:w,isSensitive:S})}}),d.length>0&&a.push({id:"certificates",title:"Certificates",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:d.map(({key:y,pem:_})=>f.jsx(gw,{name:y,pem:_},y))})}}),g.length>0&&a.push({id:"private-keys",title:"Private Keys",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:g.map(({key:y,pem:_})=>f.jsx(zG,{name:y,pem:_},y))})}}),m.length>0&&a.push({id:"public-keys",title:"Public Keys",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:m.map(y=>f.jsx($G,{name:y},y))})}}),v.length>0&&a.push({id:"csrs",title:"Certificate Requests",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:v.map(({key:y,pem:_})=>f.jsx(ZB,{name:y,pem:_},y))})}}),o.length>0&&a.push({id:"data-simple",title:"Data",data:{type:"custom",render:()=>f.jsx(rY,{entries:o})}}),c.length>0&&a.push({id:"data-multiline",title:o.length>0?"Files":"Data",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:c.map(({key:y,decoded:_,isSensitive:w})=>f.jsx(iY,{name:y,decoded:_,isSensitive:w},y))})}}),h.length>0&&a.push({id:"binary-data",title:"Binary Data",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:h.map(y=>f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-3",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(bi,{size:14,className:"text-purple-500 dark:text-purple-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:y}),f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-purple-100 dark:bg-purple-500/20 text-purple-600 dark:text-purple-400",children:"Binary"})]})},y))})}}),{sections:a}}};function lY(t){return t.includes(`
`)}function oY(t){const e=He.c(29),{name:n,value:s}=t,[r,a]=K.useState(!1),[o,c]=K.useState(!1);let h;e[0]!==s?(h=async()=>{await navigator.clipboard.writeText(s),c(!0),setTimeout(()=>c(!1),2e3)},e[0]=s,e[1]=h):h=e[1];const d=h;let g;e[2]!==r?(g=()=>a(!r),e[2]=r,e[3]=g):g=e[3];let m;e[4]===Symbol.for("react.memo_cache_sentinel")?(m=f.jsx(bi,{size:14,className:"text-blue-500 dark:text-blue-400"}),e[4]=m):m=e[4];let v;e[5]!==n?(v=f.jsxs("div",{className:"flex items-center gap-2",children:[m,f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n})]}),e[5]=n,e[6]=v):v=e[6];let y;e[7]!==d?(y=D=>{D.stopPropagation(),d()},e[7]=d,e[8]=y):y=e[8];let _;e[9]!==o?(_=o?f.jsx(Cn,{size:14,className:"text-emerald-500"}):f.jsx(us,{size:14,className:"text-neutral-400"}),e[9]=o,e[10]=_):_=e[10];let w;e[11]!==y||e[12]!==_?(w=f.jsx("button",{onClick:y,className:"p-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",title:"Copy value",children:_}),e[11]=y,e[12]=_,e[13]=w):w=e[13];let S;e[14]!==r?(S=r?f.jsx(rs,{size:14,className:"text-neutral-400"}):f.jsx(Br,{size:14,className:"text-neutral-400"}),e[14]=r,e[15]=S):S=e[15];let k;e[16]!==w||e[17]!==S?(k=f.jsxs("div",{className:"flex items-center gap-1",children:[w,S]}),e[16]=w,e[17]=S,e[18]=k):k=e[18];let C;e[19]!==g||e[20]!==v||e[21]!==k?(C=f.jsxs("button",{onClick:g,className:"w-full flex items-center justify-between p-3 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[v,k]}),e[19]=g,e[20]=v,e[21]=k,e[22]=C):C=e[22];let E;e[23]!==r||e[24]!==s?(E=r&&f.jsx("div",{className:"border-t border-neutral-200 dark:border-neutral-700 p-3",children:f.jsx("pre",{className:"text-xs text-neutral-700 dark:text-neutral-400 font-mono whitespace-pre-wrap break-all max-h-64 overflow-y-auto",children:s})}),e[23]=r,e[24]=s,e[25]=E):E=e[25];let B;return e[26]!==C||e[27]!==E?(B=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg overflow-hidden",children:[C,E]}),e[26]=C,e[27]=E,e[28]=B):B=e[28],B}function cY(t){const e=He.c(8),{entries:n}=t,[s,r]=K.useState(null);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=async(d,g)=>{await navigator.clipboard.writeText(g),r(d),setTimeout(()=>r(null),2e3)},e[0]=a):a=e[0];const o=a;let c;if(e[1]!==s||e[2]!==n){let d;e[4]!==s?(d=g=>{const[m,v]=g;return f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 last:border-0",children:[f.jsx("td",{className:"py-1.5 pr-3 text-neutral-500 whitespace-nowrap",children:m}),f.jsx("td",{className:"py-1.5 font-mono break-all text-neutral-900 dark:text-neutral-300",children:v}),f.jsx("td",{className:"py-1.5 w-1",children:f.jsx("button",{onClick:()=>o(m,v),className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:"Copy value",children:s===m?f.jsx(Cn,{size:12,className:"text-emerald-500"}):f.jsx(us,{size:12,className:"text-neutral-400"})})})]},m)},e[4]=s,e[5]=d):d=e[5],c=n.map(d),e[1]=s,e[2]=n,e[3]=c}else c=e[3];let h;return e[6]!==c?(h=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("table",{className:"w-full text-xs",children:f.jsx("tbody",{children:c})})}),e[6]=c,e[7]=h):h=e[7],h}function uY(t){const e=He.c(16),{name:n,value:s}=t,[r,a]=K.useState(!1);let o;e[0]!==s?(o=async()=>{await navigator.clipboard.writeText(s),a(!0),setTimeout(()=>a(!1),2e3)},e[0]=s,e[1]=o):o=e[1];const c=o;let h;e[2]===Symbol.for("react.memo_cache_sentinel")?(h=f.jsx(bi,{size:14,className:"text-purple-500 dark:text-purple-400"}),e[2]=h):h=e[2];let d;e[3]!==n?(d=f.jsx("span",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:n}),e[3]=n,e[4]=d):d=e[4];let g;e[5]===Symbol.for("react.memo_cache_sentinel")?(g=f.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-purple-100 dark:bg-purple-500/20 text-purple-600 dark:text-purple-400",children:"Binary"}),e[5]=g):g=e[5];let m;e[6]!==d?(m=f.jsxs("div",{className:"flex items-center gap-2",children:[h,d,g]}),e[6]=d,e[7]=m):m=e[7];let v;e[8]!==r?(v=r?f.jsx(Cn,{size:12,className:"text-emerald-500"}):f.jsx(us,{size:12,className:"text-neutral-400"}),e[8]=r,e[9]=v):v=e[9];let y;e[10]!==c||e[11]!==v?(y=f.jsx("button",{onClick:c,className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",title:"Copy base64 value",children:v}),e[10]=c,e[11]=v,e[12]=y):y=e[12];let _;return e[13]!==m||e[14]!==y?(_=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-3",children:f.jsxs("div",{className:"flex items-center justify-between",children:[m,y]})}),e[13]=m,e[14]=y,e[15]=_):_=e[15],_}const hY={kinds:["ConfigMap","ConfigMaps"],adapt(t,e){const n=e.data||{},s=e.binaryData||{},r=Object.keys(n),a=Object.keys(s),o=r.length+a.length,c=[{id:"status",data:{type:"status-cards",items:[...e.immutable?[{label:"Immutable",value:"Yes",status:"warning",icon:f.jsx(xg,{size:14,className:"text-amber-400"})}]:[]]}}],h=[],d=[];return r.forEach(g=>{lY(n[g])?d.push([g,n[g]]):h.push([g,n[g]])}),h.length>0&&c.push({id:"data-simple",title:"Data",data:{type:"custom",render:()=>f.jsx(cY,{entries:h})}}),d.length>0&&c.push({id:"data-multiline",title:h.length>0?"Files":"Data",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:d.map(([g,m])=>f.jsx(oY,{name:g,value:m},g))})}}),a.length>0&&c.push({id:"binary-data",title:"Binary Data",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:a.map(g=>f.jsx(uY,{name:g,value:s[g]},g))})}}),o===0&&c.push({id:"empty",data:{type:"custom",render:()=>f.jsxs("div",{className:"text-center py-8 text-neutral-400 dark:text-neutral-500",children:[f.jsx(bi,{size:32,className:"mx-auto mb-2 opacity-50"}),f.jsx("p",{className:"text-sm",children:"This ConfigMap is empty"})]})}}),{sections:c}}},dY={kinds:["Gateway","Gateways"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=s?.conditions?.find(d=>d.type==="Accepted"),a=s?.conditions?.find(d=>d.type==="Programmed"),o=r?.status==="True",c=a?.status==="True",h=s?.listeners?.reduce((d,g)=>d+(g.attachedRoutes||0),0)||0;return{sections:[{id:"status",title:"Gateway Status",data:{type:"status-cards",items:[{label:"Gateway Class",value:n.gatewayClassName,status:"neutral"},{label:"Accepted",value:o?"Yes":"No",status:o?"success":"error"},{label:"Programmed",value:c?"Yes":"No",status:c?"success":"error"},{label:"Attached Routes",value:h,status:"neutral"}]}},...s?.addresses&&s.addresses.length>0?[{id:"addresses",title:"Addresses",data:{type:"info-grid",items:s.addresses.map(d=>({label:d.type||"IPAddress",value:d.value,color:"text-blue-400"})),columns:2}}]:[],{id:"listeners",title:"Listeners",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.listeners.map(d=>f.jsx(fY,{listener:d,status:s},d.name))})}},...(s?.conditions??[]).length>0?[{id:"conditions",data:{type:"conditions",items:dr("Gateway",s?.conditions)}}]:[]]}}};function fY(t){const e=He.c(32),{listener:n,status:s}=t,[r,a]=Wr.useState(!1);let o;e[0]!==n.name||e[1]!==s?.listeners?(o=s?.listeners?.find(B=>B.name===n.name),e[0]=n.name,e[1]=s?.listeners,e[2]=o):o=e[2];const h=o?.attachedRoutes??0;let d;e[3]!==r?(d=()=>a(!r),e[3]=r,e[4]=d):d=e[4];let g;e[5]===Symbol.for("react.memo_cache_sentinel")?(g=f.jsx(I7,{size:14,className:"text-emerald-400"}),e[5]=g):g=e[5];let m;e[6]!==n.name?(m=f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:n.name}),e[6]=n.name,e[7]=m):m=e[7];let v;e[8]!==n.protocol?(v=f.jsx("span",{className:"px-1.5 py-0.5 rounded text-xs bg-blue-500/20 text-blue-400",children:n.protocol}),e[8]=n.protocol,e[9]=v):v=e[9];let y;e[10]!==m||e[11]!==v?(y=f.jsxs("div",{className:"flex items-center gap-2",children:[m,v]}),e[10]=m,e[11]=v,e[12]=y):y=e[12];const _=h!==1?"s":"";let w;e[13]!==h||e[14]!==n.port||e[15]!==_?(w=f.jsxs("div",{className:"text-xs text-neutral-500",children:["Port ",n.port,"  ",h," route",_]}),e[13]=h,e[14]=n.port,e[15]=_,e[16]=w):w=e[16];let S;e[17]!==y||e[18]!==w?(S=f.jsxs("div",{className:"flex-1 min-w-0",children:[y,w]}),e[17]=y,e[18]=w,e[19]=S):S=e[19];let k;e[20]!==d||e[21]!==S?(k=f.jsxs("button",{onClick:d,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[g,S]}),e[20]=d,e[21]=S,e[22]=k):k=e[22];let C;e[23]!==h||e[24]!==r||e[25]!==n.hostname||e[26]!==n.port||e[27]!==n.protocol?(C=r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Protocol & Port"}),f.jsxs("div",{className:"text-xs space-y-1",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Protocol:"}),f.jsx("span",{className:"text-blue-400",children:n.protocol})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Port:"}),f.jsx("span",{className:"text-cyan-400",children:n.port})]})]})]}),n.hostname&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Hostname"}),f.jsx("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Mr,{size:10,className:"text-cyan-400"}),f.jsx("span",{className:"text-cyan-400",children:n.hostname})]})})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Attached Routes"}),f.jsxs("div",{className:"text-xs",children:[f.jsx("span",{className:"text-emerald-400 font-medium",children:h}),f.jsxs("span",{className:"text-neutral-500 ml-1",children:["route",h!==1?"s":""," attached"]})]})]})]}),e[23]=h,e[24]=r,e[25]=n.hostname,e[26]=n.port,e[27]=n.protocol,e[28]=C):C=e[28];let E;return e[29]!==k||e[30]!==C?(E=f.jsxs("div",{className:"border border-emerald-500/30 bg-emerald-500/5 rounded-lg overflow-hidden",children:[k,C]}),e[29]=k,e[30]=C,e[31]=E):E=e[31],E}const pY={kinds:["HTTPRoute","HTTPRoutes"],adapt(t,e){const n=e.spec,s=e.status;return n?{sections:[...n.parentRefs&&n.parentRefs.length>0?[{id:"parents",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(uu,{size:10})," Parent Gateway",n.parentRefs.length>1?"s":""]}),f.jsx("div",{className:"space-y-1",children:n.parentRefs.map((r,a)=>{const c=s?.parents?.find(d=>d.parentRef.name===r.name)?.conditions?.find(d=>d.type==="Accepted"),h=c?.status==="True";return f.jsxs("div",{className:"text-sm flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Gateway:"}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:r.name}),r.namespace&&f.jsxs("span",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:["(",r.namespace,")"]}),f.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${h?"bg-emerald-500/20 text-emerald-600 dark:text-emerald-400":"bg-amber-500/20 text-amber-700 dark:text-amber-400"}`,children:h?"Accepted":c?.reason||"Unknown"})]},a)})})]})}}]:[],...n.hostnames&&n.hostnames.length>0?[{id:"hostnames",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 border border-neutral-200 dark:border-neutral-700 rounded-lg p-3",children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-2",children:"Hostnames"}),f.jsx("div",{className:"flex flex-wrap gap-2",children:n.hostnames.map((r,a)=>f.jsx("div",{className:"bg-cyan-500/10 border border-cyan-500/30 rounded px-2.5 py-1 text-sm text-cyan-600 dark:text-cyan-400 font-mono",children:r},a))})]})}}]:[],...n.rules&&n.rules.length>0?[{id:"rules",title:"Routing Rules",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.rules.map((r,a)=>f.jsx(mY,{rule:r,index:a},r.matches?.[0]?.path?.value||`rule-${a}`))})}}]:[],...s?.parents?.some(r=>r.conditions&&r.conditions.length>0)?[{id:"parent-conditions",title:"Parent Status",data:{type:"conditions",items:s.parents.flatMap(r=>(r.conditions||[]).map(a=>({type:`${r.parentRef.name}: ${a.type}`,status:a.status,reason:a.reason,message:a.message,description:u2("HTTPRoute",a.type,a.status)})))}}]:[]]}:{sections:[]}}};function mY(t){const e=He.c(22),{rule:n,index:s}=t,[r,a]=Wr.useState(!1),o=n.matches?.length||0,c=n.backendRefs?.length||0;let h;e[0]!==r?(h=()=>a(!r),e[0]=r,e[1]=h):h=e[1];let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=f.jsx(Vd,{size:14,className:"text-purple-400"}),e[2]=d):d=e[2];const g=s+1;let m;e[3]!==g?(m=f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:["Rule ",g]})}),e[3]=g,e[4]=m):m=e[4];const v=o>0?`${o} match${o!==1?"es":""}`:"All requests",y=c!==1?"s":"";let _;e[5]!==c||e[6]!==v||e[7]!==y?(_=f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:[v,"  ",c," backend",y]}),e[5]=c,e[6]=v,e[7]=y,e[8]=_):_=e[8];let w;e[9]!==m||e[10]!==_?(w=f.jsxs("div",{className:"flex-1 min-w-0",children:[m,_]}),e[9]=m,e[10]=_,e[11]=w):w=e[11];let S;e[12]!==h||e[13]!==w?(S=f.jsxs("button",{onClick:h,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[d,w]}),e[12]=h,e[13]=w,e[14]=S):S=e[14];let k;e[15]!==r||e[16]!==n.backendRefs||e[17]!==n.matches?(k=r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[n.matches&&n.matches.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Matches"}),f.jsx("div",{className:"space-y-2",children:n.matches.map(yY)})]}),n.backendRefs&&n.backendRefs.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Backend Services"}),f.jsx("div",{className:"space-y-2",children:n.backendRefs.map(gY)})]})]}),e[15]=r,e[16]=n.backendRefs,e[17]=n.matches,e[18]=k):k=e[18];let C;return e[19]!==k||e[20]!==S?(C=f.jsxs("div",{className:"border border-purple-500/30 bg-purple-500/5 rounded-lg overflow-hidden",children:[S,k]}),e[19]=k,e[20]=S,e[21]=C):C=e[21],C}function gY(t,e){return f.jsx("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(u0,{size:10,className:"text-emerald-600 dark:text-emerald-400"}),f.jsx("span",{className:"text-emerald-600 dark:text-emerald-400",children:t.name}),t.port&&f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:":"}),f.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:t.port})]}),t.weight!==void 0&&f.jsxs("span",{className:"ml-auto px-1 py-0.5 rounded bg-amber-500/20 text-amber-400 text-[10px]",children:["weight: ",t.weight]})]})},e)}function yY(t,e){return f.jsxs("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:[t.path?.value&&f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(Vd,{size:10,className:"text-cyan-600 dark:text-cyan-400"}),f.jsx("span",{className:"text-neutral-600 dark:text-neutral-400",children:"Path:"}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-mono",children:t.path.value})]}),t.method&&f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400 ml-4",children:"Method:"}),f.jsx("span",{className:"px-1 py-0.5 rounded bg-blue-500/20 text-blue-400 text-[10px] font-mono",children:t.method})]})]},e)}const vY={kinds:["GRPCRoute","GRPCRoutes"],adapt(t,e){const n=e.spec,s=e.status;return n?{sections:[...n.parentRefs&&n.parentRefs.length>0?[{id:"parents",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(uu,{size:10})," Parent Gateway",n.parentRefs.length>1?"s":""]}),f.jsx("div",{className:"space-y-1",children:n.parentRefs.map((r,a)=>{const c=s?.parents?.find(d=>d.parentRef.name===r.name)?.conditions?.find(d=>d.type==="Accepted"),h=c?.status==="True";return f.jsxs("div",{className:"text-sm flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Gateway:"}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:r.name}),r.namespace&&f.jsxs("span",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:["(",r.namespace,")"]}),f.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${h?"bg-emerald-500/20 text-emerald-600 dark:text-emerald-400":"bg-amber-500/20 text-amber-700 dark:text-amber-400"}`,children:h?"Accepted":c?.reason||"Unknown"})]},a)})})]})}}]:[],...n.hostnames&&n.hostnames.length>0?[{id:"hostnames",data:{type:"custom",render:()=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 border border-neutral-200 dark:border-neutral-700 rounded-lg p-3",children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-2",children:"Hostnames"}),f.jsx("div",{className:"flex flex-wrap gap-2",children:n.hostnames.map((r,a)=>f.jsx("div",{className:"bg-cyan-500/10 border border-cyan-500/30 rounded px-2.5 py-1 text-sm text-cyan-600 dark:text-cyan-400 font-mono",children:r},a))})]})}}]:[],...n.rules&&n.rules.length>0?[{id:"rules",title:"Routing Rules",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.rules.map((r,a)=>f.jsx(bY,{rule:r,index:a},r.matches?.[0]?.method?.service||`rule-${a}`))})}}]:[],...s?.parents?.some(r=>r.conditions&&r.conditions.length>0)?[{id:"parent-conditions",title:"Parent Status",data:{type:"conditions",items:s.parents.flatMap(r=>(r.conditions||[]).map(a=>({type:`${r.parentRef.name}: ${a.type}`,status:a.status,reason:a.reason,message:a.message,description:u2("GRPCRoute",a.type,a.status)})))}}]:[]]}:{sections:[]}}};function bY(t){const e=He.c(22),{rule:n,index:s}=t,[r,a]=Wr.useState(!1),o=n.matches?.length||0,c=n.backendRefs?.length||0;let h;e[0]!==r?(h=()=>a(!r),e[0]=r,e[1]=h):h=e[1];let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=f.jsx(ns,{size:14,className:"text-indigo-400"}),e[2]=d):d=e[2];const g=s+1;let m;e[3]!==g?(m=f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:["Rule ",g]})}),e[3]=g,e[4]=m):m=e[4];const v=o>0?`${o} match${o!==1?"es":""}`:"All methods",y=c!==1?"s":"";let _;e[5]!==c||e[6]!==v||e[7]!==y?(_=f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:[v,"  ",c," backend",y]}),e[5]=c,e[6]=v,e[7]=y,e[8]=_):_=e[8];let w;e[9]!==m||e[10]!==_?(w=f.jsxs("div",{className:"flex-1 min-w-0",children:[m,_]}),e[9]=m,e[10]=_,e[11]=w):w=e[11];let S;e[12]!==h||e[13]!==w?(S=f.jsxs("button",{onClick:h,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[d,w]}),e[12]=h,e[13]=w,e[14]=S):S=e[14];let k;e[15]!==r||e[16]!==n.backendRefs||e[17]!==n.matches?(k=r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[n.matches&&n.matches.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"gRPC Method Matches"}),f.jsx("div",{className:"space-y-2",children:n.matches.map(_Y)})]}),n.backendRefs&&n.backendRefs.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Backend Services"}),f.jsx("div",{className:"space-y-2",children:n.backendRefs.map(xY)})]})]}),e[15]=r,e[16]=n.backendRefs,e[17]=n.matches,e[18]=k):k=e[18];let C;return e[19]!==k||e[20]!==S?(C=f.jsxs("div",{className:"border border-indigo-500/30 bg-indigo-500/5 rounded-lg overflow-hidden",children:[S,k]}),e[19]=k,e[20]=S,e[21]=C):C=e[21],C}function xY(t,e){return f.jsx("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(u0,{size:10,className:"text-emerald-600 dark:text-emerald-400"}),f.jsx("span",{className:"text-emerald-600 dark:text-emerald-400",children:t.name}),t.port&&f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:":"}),f.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:t.port})]}),t.weight!==void 0&&f.jsxs("span",{className:"ml-auto px-1 py-0.5 rounded bg-amber-500/20 text-amber-400 text-[10px]",children:["weight: ",t.weight]})]})},e)}function _Y(t,e){return f.jsxs("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:[t.method?.service&&f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(ns,{size:10,className:"text-purple-600 dark:text-purple-400"}),f.jsx("span",{className:"text-neutral-600 dark:text-neutral-400",children:"Service:"}),f.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-mono",children:t.method.service})]}),t.method?.method&&f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-400 ml-4",children:"Method:"}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-mono",children:t.method.method})]})]},e)}const wY={kinds:["Ingress","Ingresses"],adapt(t,e){const n=e.spec,s=e.status;if(!n)return{sections:[]};const r=s?.loadBalancer?.ingress&&s.loadBalancer.ingress.length>0;return{sections:[{id:"status",title:"Ingress Status",data:{type:"status-cards",items:[{label:"Ingress Class",value:n.ingressClassName||"default",status:"neutral"},{label:"Load Balancer",value:r?"Ready":"Pending",status:r?"success":"warning"}]}},...r?[{id:"load-balancer",title:"Load Balancer",data:{type:"info-grid",items:(s?.loadBalancer?.ingress||[]).map(a=>({label:a.hostname?"Hostname":"IP Address",value:a.hostname||a.ip||"Unknown",color:"text-blue-400"})),columns:2}}]:[],...n.tls&&n.tls.length>0?[{id:"tls",title:"TLS Configuration",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.tls.map((a,o)=>f.jsx(CY,{tls:a,index:o},a.secretName||`tls-${o}`))})}}]:[],...n.rules&&n.rules.length>0?[{id:"rules",title:"Routing Rules",data:{type:"custom",render:()=>f.jsx("div",{className:"space-y-2",children:n.rules.map((a,o)=>f.jsx(SY,{rule:a,index:o},a.host||`rule-${o}`))})}}]:[],...n.defaultBackend?.service?[{id:"default-backend",title:"Default Backend",data:{type:"info-grid",items:[{label:"Service",value:n.defaultBackend.service.name},{label:"Port",value:String(n.defaultBackend.service.port?.number||n.defaultBackend.service.port?.name||"unknown")}],columns:2}}]:[]]}}};function SY(t){const e=He.c(21),{rule:n,index:s}=t,[r,a]=Wr.useState(!1);let o;e[0]!==r?(o=()=>a(!r),e[0]=r,e[1]=o):o=e[1];let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=f.jsx(ns,{size:14,className:"text-blue-400"}),e[2]=c):c=e[2];const h=n.host||`Rule ${s+1}`;let d;e[3]!==h?(d=f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:h})}),e[3]=h,e[4]=d):d=e[4];const g=n.http?.paths.length||0,m=n.http?.paths.length!==1?"s":"";let v;e[5]!==g||e[6]!==m?(v=f.jsxs("div",{className:"text-xs text-neutral-500",children:[g," path",m]}),e[5]=g,e[6]=m,e[7]=v):v=e[7];let y;e[8]!==d||e[9]!==v?(y=f.jsxs("div",{className:"flex-1 min-w-0",children:[d,v]}),e[8]=d,e[9]=v,e[10]=y):y=e[10];let _;e[11]!==o||e[12]!==y?(_=f.jsxs("button",{onClick:o,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[c,y]}),e[11]=o,e[12]=y,e[13]=_):_=e[13];let w;e[14]!==r||e[15]!==n.host||e[16]!==n.http?(w=r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[n.host&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Host"}),f.jsx("div",{className:"text-xs text-cyan-400",children:n.host})]}),n.http?.paths&&n.http.paths.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Paths"}),f.jsx("div",{className:"space-y-2",children:n.http.paths.map(kY)})]})]}),e[14]=r,e[15]=n.host,e[16]=n.http,e[17]=w):w=e[17];let S;return e[18]!==w||e[19]!==_?(S=f.jsxs("div",{className:"border border-blue-500/30 bg-blue-500/5 rounded-lg overflow-hidden",children:[_,w]}),e[18]=w,e[19]=_,e[20]=S):S=e[20],S}function kY(t,e){const n=t.backend.service?.port?.number||t.backend.service?.port?.name||"";return f.jsxs("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(Vd,{size:10,className:"text-purple-400"}),f.jsx("span",{className:"text-neutral-700 dark:text-neutral-300 font-mono",children:t.path||"/"}),f.jsx("span",{className:"px-1 py-0.5 rounded bg-purple-500/20 text-purple-400 text-[10px]",children:t.pathType})]}),f.jsxs("div",{className:"ml-4 flex items-center gap-2",children:[f.jsx("span",{className:"text-neutral-600",children:""}),f.jsx("span",{className:"text-emerald-400",children:t.backend.service?.name||"unknown"}),f.jsx("span",{className:"text-neutral-600",children:":"}),f.jsx("span",{className:"text-blue-400",children:n})]})]},e)}function CY(t){const e=He.c(22),{tls:n,index:s}=t,[r,a]=Wr.useState(!1);let o;e[0]!==r?(o=()=>a(!r),e[0]=r,e[1]=o):o=e[1];let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=f.jsx(mf,{size:14,className:"text-amber-400"}),e[2]=c):c=e[2];const h=n.secretName||`TLS ${s+1}`;let d;e[3]!==h?(d=f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:h})}),e[3]=h,e[4]=d):d=e[4];let g;e[5]!==n.hosts?(g=n.hosts?.join(", ")||"All hosts",e[5]=n.hosts,e[6]=g):g=e[6];let m;e[7]!==g?(m=f.jsx("div",{className:"text-xs text-neutral-500 truncate",children:g}),e[7]=g,e[8]=m):m=e[8];let v;e[9]!==d||e[10]!==m?(v=f.jsxs("div",{className:"flex-1 min-w-0",children:[d,m]}),e[9]=d,e[10]=m,e[11]=v):v=e[11];let y;e[12]!==o||e[13]!==v?(y=f.jsxs("button",{onClick:o,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[c,v]}),e[12]=o,e[13]=v,e[14]=y):y=e[14];let _;e[15]!==r||e[16]!==n.hosts||e[17]!==n.secretName?(_=r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Secret"}),f.jsx("div",{className:"text-xs text-purple-400",children:n.secretName||"default"})]}),n.hosts&&n.hosts.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Hosts"}),f.jsx("div",{className:"space-y-1",children:n.hosts.map(NY)})]})]}),e[15]=r,e[16]=n.hosts,e[17]=n.secretName,e[18]=_):_=e[18];let w;return e[19]!==y||e[20]!==_?(w=f.jsxs("div",{className:"border border-amber-500/30 bg-amber-500/5 rounded-lg overflow-hidden",children:[y,_]}),e[19]=y,e[20]=_,e[21]=w):w=e[21],w}function NY(t,e){return f.jsx("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Mr,{size:10,className:"text-cyan-400"}),f.jsx("span",{className:"text-cyan-400",children:t})]})},e)}const AY=[Yq,Xq,tK,nK,sK,rK,aK,oK,cK,dK,wK,EK,DK,qG,KG,GG,aY,hY,dY,pY,vY,wY],X2=new Map;AY.forEach(t=>{t.kinds.forEach(e=>{X2.set(e.toLowerCase(),t)})});function tM(t){return X2.get(t.toLowerCase())??null}function U3(t){return X2.has(t.toLowerCase())}function EY(t,e){const n=e.kind;if(!n)return null;const s=tM(n);return s?s.adapt(t,e):null}function nM(t){const e=t.kind;if(!e)return[];const n=tM(e);return n?.actions?n.actions.filter(s=>!s.isVisible||s.isVisible(t)):[]}function jY({actions:t,resource:e,onActionComplete:n}){const{context:s}=hr(),[r,a]=K.useState(null),[o,c]=K.useState(null),[h,d]=K.useState(null);if(t.length===0)return null;const g=async y=>{d(null),a(y.id);try{await y.execute(s,e),n?.()}catch(_){d(_ instanceof Error?_.message:"Action failed")}finally{a(null),c(null)}},m=y=>{y.confirm?c(y):g(y)},v=(y="secondary")=>{switch(y){case"primary":return"bg-blue-600 hover:bg-blue-700 text-white border-blue-600";case"danger":return"bg-red-600 hover:bg-red-700 text-white border-red-600";case"warning":return"bg-amber-600 hover:bg-amber-700 text-white border-amber-600";default:return"bg-neutral-700 hover:bg-neutral-600 text-neutral-200 border-neutral-600"}};return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:t.map(y=>{const _=y.isDisabled?.(e),w=_===!0||typeof _=="string",S=typeof _=="string"?_:void 0,k=r===y.id;return f.jsxs("button",{onClick:()=>m(y),disabled:w||k,title:S,className:`
                flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded border
                transition-colors duration-150
                ${v(y.variant)}
                ${w?"opacity-50 cursor-not-allowed":"cursor-pointer"}
                ${k?"opacity-75":""}
              `,children:[k?f.jsx(Mn,{size:14,className:"animate-spin"}):y.icon,y.label]},y.id)})}),h&&f.jsx("div",{className:"mb-4 p-2 bg-red-500/10 border border-red-500/30 rounded text-red-400 text-xs",children:h}),o&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:f.jsxs("div",{className:"bg-neutral-800 border border-neutral-700 rounded-lg p-4 max-w-md mx-4 shadow-xl",children:[f.jsx("h3",{className:"text-sm font-semibold text-neutral-200 mb-2",children:o.confirm?.title}),f.jsx("p",{className:"text-xs text-neutral-400 mb-4",children:o.confirm?.message}),f.jsxs("div",{className:"flex justify-end gap-2",children:[f.jsx("button",{onClick:()=>c(null),className:"px-3 py-1.5 text-xs font-medium rounded border border-neutral-600 bg-neutral-700 hover:bg-neutral-600 text-neutral-200",children:"Cancel"}),f.jsxs("button",{onClick:()=>g(o),disabled:r===o.id,className:`
                  flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded border
                  ${v(o.variant)}
                  ${r===o.id?"opacity-75":""}
                `,children:[r===o.id&&f.jsx(Mn,{size:14,className:"animate-spin"}),o.confirm?.confirmLabel||"Confirm"]})]})]})})]})}function TY(t){const e=He.c(6),{items:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s={success:"text-emerald-400",warning:"text-amber-400",error:"text-red-400",neutral:"text-neutral-900 dark:text-neutral-100"},e[0]=s):s=e[0];const r=s;let a;if(e[1]!==n){let c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=(h,d)=>f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800 rounded-lg p-3",children:[f.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:h.label}),f.jsxs("div",{className:`text-sm font-medium flex items-center gap-2 ${r[h.status||"neutral"]}`,children:[h.icon,h.value]}),h.description&&f.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:h.description})]},d),e[3]=c):c=e[3],a=n.map(c),e[1]=n,e[2]=a}else a=e[2];let o;return e[4]!==a?(o=f.jsx("div",{className:"grid grid-cols-2 gap-3",children:a}),e[4]=a,e[5]=o):o=e[5],o}function RY(t){const e=He.c(12),{items:n,podGrid:s}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r={emerald:"text-emerald-400",blue:"text-blue-400",cyan:"text-cyan-400",purple:"text-purple-400",amber:"text-amber-400"},e[0]=r):r=e[0];const a=r;let o;e[1]===Symbol.for("react.memo_cache_sentinel")?(o={emerald:"bg-emerald-500",blue:"bg-blue-500",cyan:"bg-cyan-500",purple:"bg-purple-500",amber:"bg-amber-500"},e[1]=o):o=e[1];const c=o;let h;if(e[2]!==n){let v;e[4]===Symbol.for("react.memo_cache_sentinel")?(v=(y,_)=>{const w=y.total>0?Math.min(y.current/y.total*100,100):0;return f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:y.label}),f.jsxs("span",{className:a[y.color],children:[y.current,"/",y.total]})]}),f.jsx("div",{className:"h-1 bg-neutral-300 dark:bg-neutral-700 rounded-full overflow-hidden",children:f.jsx("div",{className:`h-full ${c[y.color]}`,style:{width:`${w}%`}})})]},_)},e[4]=v):v=e[4],h=n.map(v),e[2]=n,e[3]=h}else h=e[3];let d;e[5]!==h?(d=f.jsx("div",{className:"flex items-center gap-4 mb-3",children:h}),e[5]=h,e[6]=d):d=e[6];let g;e[7]!==s?(g=s&&f.jsx(OY,{data:s}),e[7]=s,e[8]=g):g=e[8];let m;return e[9]!==d||e[10]!==g?(m=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800 rounded-lg p-3",children:[d,g]}),e[9]=d,e[10]=g,e[11]=m):m=e[11],m}function OY(t){const e=He.c(10),{data:n}=t,s=n.icon==="database"?fl:n.icon==="server"?Xr:dl;let r;e[0]!==n.total?(r=Array.from({length:n.total}),e[0]=n.total,e[1]=r):r=e[1];let a;return e[2]!==s||e[3]!==n.available||e[4]!==n.current||e[5]!==n.podTitles||e[6]!==n.ready||e[7]!==n.showOrdinal||e[8]!==r?(a=f.jsx("div",{className:"flex flex-wrap gap-1",children:r.map((o,c)=>{const h=c<n.ready,d=n.available!==void 0?c<n.available:h,g=n.current!==void 0?c<n.current:d,m=n.podTitles?.[c]??`Pod ${c}`;return f.jsxs("div",{className:`${n.showOrdinal?"w-8 h-8":"w-6 h-6"} rounded flex flex-col items-center justify-center ${h?"bg-emerald-500/20 border border-emerald-500/50":d?"bg-cyan-500/20 border border-cyan-500/50":g?"bg-amber-500/20 border border-amber-500/50":"bg-neutral-300/50 dark:bg-neutral-700/50 border border-neutral-400 dark:border-neutral-600"}`,title:`${m}: ${h?"Ready":d?"Available":g?"Current":"Pending"}`,children:[f.jsx(s,{size:n.showOrdinal?10:12,className:h?"text-emerald-600 dark:text-emerald-400":d?"text-cyan-600 dark:text-cyan-400":g?"text-amber-600 dark:text-amber-400":"text-neutral-600 dark:text-neutral-500"}),n.showOrdinal&&f.jsx("span",{className:`text-[9px] ${h?"text-emerald-600 dark:text-emerald-400":d?"text-cyan-600 dark:text-cyan-400":g?"text-amber-600 dark:text-amber-400":"text-neutral-600 dark:text-neutral-500"}`,children:c})]},c)})}),e[2]=s,e[3]=n.available,e[4]=n.current,e[5]=n.podTitles,e[6]=n.ready,e[7]=n.showOrdinal,e[8]=r,e[9]=a):a=e[9],a}const BY=new Set(["MemoryPressure","DiskPressure","PIDPressure","NetworkUnavailable","Failed","ErrorOccurred"]);function MY(t){return t.replace(/([a-z])([A-Z])/g,"$1 $2")}function DY(t){const e=He.c(13),{conditions:n}=t;if(!n||n.length===0)return null;const s=PY;let r,a,o,c;if(e[0]!==n){c=Symbol.for("react.early_return_sentinel");e:{let g;e[5]===Symbol.for("react.memo_cache_sentinel")?(g=y=>!s(y),e[5]=g):g=e[5];const m=n.filter(g);if(m.length===0){c=null;break e}const v=[...m].sort(IY);e[6]===Symbol.for("react.memo_cache_sentinel")?(o=f.jsx("h5",{className:"text-xs font-medium text-neutral-500 uppercase tracking-wider mb-2",children:"Conditions"}),e[6]=o):o=e[6],r="rounded-lg overflow-hidden border border-neutral-200 dark:border-neutral-700/50",a=v.map(LY)}e[0]=n,e[1]=r,e[2]=a,e[3]=o,e[4]=c}else r=e[1],a=e[2],o=e[3],c=e[4];if(c!==Symbol.for("react.early_return_sentinel"))return c;let h;e[7]!==r||e[8]!==a?(h=f.jsx("div",{className:r,children:a}),e[7]=r,e[8]=a,e[9]=h):h=e[9];let d;return e[10]!==o||e[11]!==h?(d=f.jsxs("div",{children:[o,h]}),e[10]=o,e[11]=h,e[12]=d):d=e[12],d}function LY(t,e){const n=t.status==="Unknown";let s,r,a,o,c;return n?(s="bg-amber-50/50 dark:bg-amber-500/5",r="bg-amber-100 dark:bg-amber-500/20",a=xo,o="text-amber-500 dark:text-amber-400",c="text-amber-700 dark:text-amber-400"):(s="bg-red-50/50 dark:bg-red-500/5",r="bg-red-100 dark:bg-red-500/20",a=Si,o="text-red-500 dark:text-red-400",c="text-red-700 dark:text-red-400"),f.jsxs("div",{className:`${s} ${e>0?"border-t border-neutral-200 dark:border-neutral-700/50":""}`,children:[f.jsxs("div",{className:"flex items-center gap-3 px-3 py-2",children:[f.jsx("div",{className:`shrink-0 w-6 h-6 rounded-full flex items-center justify-center ${r}`,children:f.jsx(a,{size:14,className:o})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("span",{className:`text-sm font-medium ${c}`,children:MY(t.type)}),t.description&&f.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-500",children:t.description})]})]}),t.message&&f.jsx("div",{className:"px-3 pb-2 pl-12",children:f.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-500 wrap-break-word",children:t.message})})]},`${t.type}-${e}`)}function IY(t,e){const n=t.status==="Unknown",s=e.status==="Unknown";return n===s?0:n?1:-1}function PY(t){const e=BY.has(t.type),n=t.status==="True";return e?!n:n}function zY(t,e){if(t==="running")return{label:"Running",borderClass:"border-emerald-500/30 bg-emerald-500/5",badgeClass:"bg-emerald-500/20 text-emerald-400",iconClass:"text-emerald-400"};if(t==="waiting"){const n=e==="CrashLoopBackOff"||e==="Error";return{label:e||"Waiting",borderClass:n?"border-red-500/30 bg-red-500/5":"border-amber-500/30 bg-amber-500/5",badgeClass:n?"bg-red-500/20 text-red-400":"bg-amber-500/20 text-amber-400",iconClass:n?"text-red-400":"text-amber-400"}}return t==="terminated"?{label:e||"Terminated",borderClass:"border-neutral-300 bg-neutral-100 dark:border-neutral-700 dark:bg-neutral-900/50",badgeClass:"bg-neutral-200 text-neutral-600 dark:bg-neutral-700 dark:text-neutral-400",iconClass:"text-neutral-500 dark:text-neutral-400"}:{label:"Unknown",borderClass:"border-neutral-300 bg-neutral-100 dark:border-neutral-700 dark:bg-neutral-900/50",badgeClass:"bg-neutral-200 text-neutral-600 dark:bg-neutral-700 dark:text-neutral-400",iconClass:"text-neutral-500 dark:text-neutral-400"}}const $Y=15e3;function HY(t){const e=He.c(10),{items:n,metricsLoader:s}=t,[r,a]=K.useState(null);let o,c;if(e[0]!==s?(o=()=>{if(!s)return;let g=!0;const m=async()=>{const y=await s();g&&a(y)};m();const v=setInterval(m,$Y);return()=>{g=!1,clearInterval(v)}},c=[s],e[0]=s,e[1]=o,e[2]=c):(o=e[1],c=e[2]),K.useEffect(o,c),n.length===0)return null;let h;if(e[3]!==n||e[4]!==r){let g;e[6]!==r?(g=m=>f.jsx(UY,{container:m,metrics:r?.get(m.name)},m.name),e[6]=r,e[7]=g):g=e[7],h=n.map(g),e[3]=n,e[4]=r,e[5]=h}else h=e[5];let d;return e[8]!==h?(d=f.jsx("div",{className:"space-y-2",children:h}),e[8]=h,e[9]=d):d=e[9],d}function UY(t){const e=He.c(49),{container:n,metrics:s}=t,[r,a]=K.useState(!1);let o;e[0]!==n.state||e[1]!==n.stateReason?(o=zY(n.state,n.stateReason),e[0]=n.state,e[1]=n.stateReason,e[2]=o):o=e[2];const c=o,h=`border rounded-lg overflow-hidden ${c.borderClass}`;let d;e[3]!==r?(d=()=>a(!r),e[3]=r,e[4]=d):d=e[4];let g;e[5]!==c.iconClass?(g=f.jsx(dl,{size:16,className:c.iconClass}),e[5]=c.iconClass,e[6]=g):g=e[6];let m;e[7]!==n.name?(m=f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:n.name}),e[7]=n.name,e[8]=m):m=e[8];let v;e[9]!==n.state||e[10]!==c.badgeClass||e[11]!==c.label?(v=n.state&&f.jsx("span",{className:`px-1.5 py-0.5 rounded text-xs ${c.badgeClass}`,children:c.label}),e[9]=n.state,e[10]=c.badgeClass,e[11]=c.label,e[12]=v):v=e[12];let y;e[13]!==m||e[14]!==v?(y=f.jsxs("div",{className:"flex items-center gap-2",children:[m,v]}),e[13]=m,e[14]=v,e[15]=y):y=e[15];let _;e[16]!==n.image?(_=f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 truncate",children:n.image}),e[16]=n.image,e[17]=_):_=e[17];let w;e[18]!==y||e[19]!==_?(w=f.jsxs("div",{className:"flex-1 min-w-0",children:[y,_]}),e[18]=y,e[19]=_,e[20]=w):w=e[20];let S;e[21]!==s?(S=s&&f.jsxs("div",{className:"flex items-center gap-3 text-xs font-mono",children:[f.jsx("span",{className:"text-blue-400",title:"CPU",children:s.cpu.usage}),f.jsx("span",{className:"text-purple-400",title:"Memory",children:s.memory.usage})]}),e[21]=s,e[22]=S):S=e[22];let k;e[23]!==n.restartCount?(k=(n.restartCount??0)>0&&f.jsxs("div",{className:"text-xs text-amber-400",children:[n.restartCount," restarts"]}),e[23]=n.restartCount,e[24]=k):k=e[24];let C;e[25]!==S||e[26]!==k||e[27]!==d||e[28]!==g||e[29]!==w?(C=f.jsxs("button",{onClick:d,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[g,w,S,k]}),e[25]=S,e[26]=k,e[27]=d,e[28]=g,e[29]=w,e[30]=C):C=e[30];let E;e[31]!==n.args||e[32]!==n.command||e[33]!==n.currentTermination||e[34]!==n.image||e[35]!==n.lastTermination||e[36]!==n.mounts||e[37]!==n.ports||e[38]!==n.resources||e[39]!==n.state||e[40]!==n.stateMessage||e[41]!==n.stateReason||e[42]!==r||e[43]!==s?(E=r&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[n.currentTermination&&f.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded p-2",children:[f.jsx("div",{className:"text-xs text-red-400 font-medium mb-1",children:"Terminated"}),f.jsxs("div",{className:"text-xs space-y-1",children:[n.currentTermination.reason&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Reason:"})," ",n.currentTermination.reason]}),n.currentTermination.exitCode!==void 0&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Exit Code:"})," ",n.currentTermination.exitCode]}),n.currentTermination.signal!==void 0&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Signal:"})," ",n.currentTermination.signal]}),n.currentTermination.finishedAt&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Finished:"})," ",new Date(n.currentTermination.finishedAt).toLocaleString()]}),n.currentTermination.message&&f.jsxs("div",{className:"mt-2 p-2 bg-neutral-900/50 rounded",children:[f.jsx("div",{className:"text-neutral-600 dark:text-neutral-500 mb-1",children:"Message:"}),f.jsx("div",{className:"text-red-300 text-[11px] font-mono break-all whitespace-pre-wrap",children:n.currentTermination.message})]})]})]}),n.state==="waiting"&&n.stateMessage&&f.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded p-2",children:[f.jsxs("div",{className:"text-xs text-amber-400 font-medium mb-1",children:["Waiting: ",n.stateReason]}),f.jsx("div",{className:"text-amber-300 text-[11px] font-mono break-all whitespace-pre-wrap",children:n.stateMessage})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Image"}),f.jsx("div",{className:"text-xs text-cyan-600 dark:text-cyan-400 break-all",children:n.image})]}),(n.command||n.args)&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Command"}),f.jsx("code",{className:"text-xs text-neutral-900 dark:text-neutral-300 bg-neutral-200 dark:bg-neutral-800 px-2 py-1 rounded block",children:[...n.command||[],...n.args||[]].join(" ")})]}),n.lastTermination&&f.jsxs("div",{className:"bg-red-500/5 border border-red-500/20 rounded p-2",children:[f.jsx("div",{className:"text-xs text-red-400 font-medium mb-1",children:"Last Termination"}),f.jsxs("div",{className:"text-xs space-y-0.5",children:[n.lastTermination.reason&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Reason:"})," ",n.lastTermination.reason]}),n.lastTermination.exitCode!==void 0&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Exit Code:"})," ",n.lastTermination.exitCode]}),n.lastTermination.signal!==void 0&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Signal:"})," ",n.lastTermination.signal]}),n.lastTermination.finishedAt&&f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Finished:"})," ",new Date(n.lastTermination.finishedAt).toLocaleString()]})]})]}),n.ports&&n.ports.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Ports"}),f.jsx("div",{className:"flex flex-wrap gap-1",children:n.ports.map(KY)})]}),!s&&n.resources&&f.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.resources.requests&&f.jsxs("div",{children:[f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(yg,{size:10})," Requests"]}),f.jsx("div",{className:"text-xs space-y-0.5",children:Object.entries(n.resources.requests).map(qY)})]}),n.resources.limits&&f.jsxs("div",{children:[f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1 flex items-center gap-1",children:[f.jsx(Hs,{size:10})," Limits"]}),f.jsx("div",{className:"text-xs space-y-0.5",children:Object.entries(n.resources.limits).map(FY)})]})]}),n.mounts&&n.mounts.length>0&&f.jsxs("div",{children:[f.jsxs("div",{className:"text-xs text-neutral-500 mb-2 flex items-center gap-1",children:[f.jsx(Hs,{size:10})," Volume Mounts"]}),f.jsx("div",{className:"text-xs space-y-1.5",children:n.mounts.map(VY)})]})]}),e[31]=n.args,e[32]=n.command,e[33]=n.currentTermination,e[34]=n.image,e[35]=n.lastTermination,e[36]=n.mounts,e[37]=n.ports,e[38]=n.resources,e[39]=n.state,e[40]=n.stateMessage,e[41]=n.stateReason,e[42]=r,e[43]=s,e[44]=E):E=e[44];let B;return e[45]!==C||e[46]!==E||e[47]!==h?(B=f.jsxs("div",{className:h,children:[C,E]}),e[45]=C,e[46]=E,e[47]=h,e[48]=B):B=e[48],B}function VY(t,e){return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded p-2 flex items-center gap-2",children:[f.jsx("span",{className:"text-purple-400 truncate max-w-35",title:t.name,children:t.name}),f.jsx("span",{className:"text-neutral-600",children:""}),f.jsx("span",{className:"text-cyan-400 font-mono truncate flex-1",title:t.mountPath,children:t.mountPath}),t.readOnly&&f.jsx("span",{className:"text-amber-400 text-[10px] px-1 py-0.5 bg-amber-500/10 rounded",children:"(ro)"})]},e)}function FY(t){const[e,n]=t;return f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-500",children:[e,":"]})," ",n]},e)}function qY(t){const[e,n]=t;return f.jsxs("div",{className:"text-neutral-700 dark:text-neutral-400",children:[f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-500",children:[e,":"]})," ",n]},e)}function KY(t,e){return f.jsxs("span",{className:"text-xs text-neutral-900 dark:text-neutral-100 bg-neutral-200 dark:bg-neutral-800 px-2 py-1 rounded",children:[t.containerPort,"/",t.protocol||"TCP",t.name&&f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-500 ml-1",children:["(",t.name,")"]})]},e)}function WY(t){const e=He.c(4),{items:n}=t;if(n.length===0)return null;let s;e[0]!==n?(s=n.map(GY),e[0]=n,e[1]=s):s=e[1];let r;return e[2]!==s?(r=f.jsx("div",{className:"space-y-2",children:s}),e[2]=s,e[3]=r):r=e[3],r}function GY(t){return f.jsx(YY,{volume:t},t.name)}function YY(t){const e=He.c(33),{volume:n}=t,[s,r]=K.useState(!1);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a={ConfigMap:"border-blue-500/30 bg-blue-500/5",Secret:"border-amber-500/30 bg-amber-500/5",PVC:"border-emerald-500/30 bg-emerald-500/5",EmptyDir:"border-neutral-500/30 bg-neutral-500/5",HostPath:"border-red-500/30 bg-red-500/5",Projected:"border-purple-500/30 bg-purple-500/5",DownwardAPI:"border-cyan-500/30 bg-cyan-500/5",NFS:"border-orange-500/30 bg-orange-500/5",CSI:"border-indigo-500/30 bg-indigo-500/5"},e[0]=a):a=e[0];const o=a;let c;e[1]===Symbol.for("react.memo_cache_sentinel")?(c={ConfigMap:f.jsx(X7,{size:14,className:"text-blue-400"}),Secret:f.jsx(mf,{size:14,className:"text-amber-400"}),PVC:f.jsx(fl,{size:14,className:"text-emerald-400"}),EmptyDir:f.jsx(vg,{size:14,className:"text-neutral-400"}),HostPath:f.jsx(QI,{size:14,className:"text-red-400"}),Projected:f.jsx(cl,{size:14,className:"text-purple-400"}),DownwardAPI:f.jsx(GI,{size:14,className:"text-cyan-400"}),NFS:f.jsx(ns,{size:14,className:"text-orange-400"}),CSI:f.jsx(D7,{size:14,className:"text-indigo-400"})},e[1]=c):c=e[1];const h=c;let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d={ConfigMap:"bg-blue-500/20 text-blue-400",Secret:"bg-amber-500/20 text-amber-400",PVC:"bg-emerald-500/20 text-emerald-400",EmptyDir:"bg-neutral-500/20 text-neutral-400",HostPath:"bg-red-500/20 text-red-400",Projected:"bg-purple-500/20 text-purple-400",DownwardAPI:"bg-cyan-500/20 text-cyan-400",NFS:"bg-orange-500/20 text-orange-400",CSI:"bg-indigo-500/20 text-indigo-400"},e[2]=d):d=e[2];const g=d,m=`border rounded-lg overflow-hidden ${o[n.type]||"border-neutral-300 dark:border-neutral-700 bg-neutral-100 dark:bg-neutral-900/50"}`;let v;e[3]!==s?(v=()=>r(!s),e[3]=s,e[4]=v):v=e[4];let y;e[5]!==n.type?(y=h[n.type]||f.jsx(Hs,{size:14,className:"text-neutral-600 dark:text-neutral-400"}),e[5]=n.type,e[6]=y):y=e[6];let _;e[7]!==n.name?(_=f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:n.name})}),e[7]=n.name,e[8]=_):_=e[8];let w;e[9]!==n.source?(w=n.source&&f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400/70",children:n.source}),e[9]=n.source,e[10]=w):w=e[10];let S;e[11]!==n.mounts?(S=n.mounts.length>0&&f.jsxs("span",{className:"ml-2",children:[" ",n.mounts.map(QY).join(", ")]}),e[11]=n.mounts,e[12]=S):S=e[12];let k;e[13]!==w||e[14]!==S?(k=f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 truncate",children:[w,S]}),e[13]=w,e[14]=S,e[15]=k):k=e[15];let C;e[16]!==k||e[17]!==_?(C=f.jsxs("div",{className:"flex-1 min-w-0",children:[_,k]}),e[16]=k,e[17]=_,e[18]=C):C=e[18];let E;e[19]!==C||e[20]!==v||e[21]!==y?(E=f.jsxs("button",{onClick:v,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors cursor-pointer",children:[y,C]}),e[19]=C,e[20]=v,e[21]=y,e[22]=E):E=e[22];let B;e[23]!==s||e[24]!==n.extra||e[25]!==n.mounts||e[26]!==n.source||e[27]!==n.type?(B=s&&f.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Source"}),f.jsxs("div",{className:"text-xs",children:[f.jsx("span",{className:`px-1.5 py-0.5 rounded ${g[n.type]||"bg-neutral-200 dark:bg-neutral-700 text-neutral-600 dark:text-neutral-400"}`,children:n.type}),n.source&&f.jsx("span",{className:"ml-2 text-cyan-600 dark:text-cyan-400",children:n.source})]}),n.extra&&Object.keys(n.extra).length>0&&f.jsx("div",{className:"mt-2 text-xs space-y-1",children:Object.entries(n.extra).map(JY)})]}),n.mounts.length>0&&f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 mb-1",children:"Mount Points"}),f.jsx("div",{className:"space-y-2",children:n.mounts.map(XY)})]})]}),e[23]=s,e[24]=n.extra,e[25]=n.mounts,e[26]=n.source,e[27]=n.type,e[28]=B):B=e[28];let D;return e[29]!==E||e[30]!==B||e[31]!==m?(D=f.jsxs("div",{className:m,children:[E,B]}),e[29]=E,e[30]=B,e[31]=m,e[32]=D):D=e[32],D}function XY(t,e){return f.jsxs("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 rounded p-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(dl,{size:10,className:"text-blue-400"}),f.jsx("span",{className:"text-neutral-900 dark:text-neutral-300",children:t.container}),f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:""}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-mono",children:t.mountPath}),t.readOnly&&f.jsx("span",{className:"px-1 py-0.5 rounded bg-amber-500/20 text-amber-400 text-[10px]",children:"read-only"})]}),t.subPath&&f.jsxs("div",{className:"ml-4 mt-1 text-neutral-600 dark:text-neutral-500",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"subPath:"})," ",f.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:t.subPath})]})]},e)}function JY(t){const[e,n]=t;return f.jsxs("div",{className:"text-neutral-600 dark:text-neutral-400",children:[f.jsxs("span",{className:"text-neutral-500",children:[e,":"]})," ",f.jsx("span",{className:"text-neutral-900 dark:text-neutral-300",children:String(n)})]},e)}function QY(t){return t.mountPath}function ZY(t){const e=He.c(4),{items:n}=t;if(n.length===0)return null;let s;e[0]!==n?(s=n.map(eX),e[0]=n,e[1]=s):s=e[1];let r;return e[2]!==s?(r=f.jsx("div",{className:"space-y-3",children:s}),e[2]=s,e[3]=r):r=e[3],r}function eX(t,e){return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsxs("div",{className:"flex items-center gap-2 text-sm text-neutral-900 dark:text-neutral-300",children:[t.icon,t.label]}),f.jsxs("div",{className:"text-xs",children:[f.jsx("span",{className:"text-cyan-400",children:t.allocatable}),f.jsx("span",{className:"text-neutral-500",children:" / "}),f.jsx("span",{className:"text-neutral-400",children:t.capacity})]})]}),f.jsxs("div",{className:"text-[10px] text-neutral-500 flex justify-between",children:[f.jsx("span",{children:"Allocatable"}),f.jsx("span",{children:"Capacity"})]})]},e)}function tX(t){const e=He.c(6),{items:n}=t;if(n.length===0)return null;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s={NoSchedule:"bg-red-500/20 text-red-400 border-red-500/30",PreferNoSchedule:"bg-amber-500/20 text-amber-400 border-amber-500/30",NoExecute:"bg-purple-500/20 text-purple-400 border-purple-500/30"},e[0]=s):s=e[0];const r=s;let a;if(e[1]!==n){let c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=(h,d)=>f.jsxs("span",{className:"text-xs bg-neutral-200 dark:bg-neutral-700 px-2 py-0.5 rounded flex items-center gap-1",title:`${h.key}=${h.value||""}:${h.effect}`,children:[f.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:h.key}),h.value&&f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"text-neutral-400",children:"="}),f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:h.value})]}),f.jsx("span",{className:`ml-1 px-1 py-0.5 rounded text-[10px] border ${r[h.effect]??"bg-neutral-700 text-neutral-300"}`,children:h.effect})]},d),e[3]=c):c=e[3],a=n.map(c),e[1]=n,e[2]=a}else a=e[2];let o;return e[4]!==a?(o=f.jsx("div",{className:"flex flex-wrap gap-1",children:a}),e[4]=a,e[5]=o):o=e[5],o}function nX(t){const e=He.c(18),{loader:n,title:s}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],e[0]=r):r=e[0];const[a,o]=K.useState(r),[c,h]=K.useState(!0);let d,g;if(e[1]!==n?(d=()=>{n().then(o).finally(()=>h(!1))},g=[n],e[1]=n,e[2]=d,e[3]=g):(d=e[2],g=e[3]),K.useEffect(d,g),c){let w;e[4]!==s?(w=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[4]=s,e[5]=w):w=e[5];let S;e[6]===Symbol.for("react.memo_cache_sentinel")?(S=f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:"Loading ReplicaSets..."}),e[6]=S):S=e[6];let k;return e[7]!==w?(k=f.jsxs("div",{children:[w,S]}),e[7]=w,e[8]=k):k=e[8],k}if(a.length===0)return null;let m;e[9]!==s?(m=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[9]=s,e[10]=m):m=e[10];let v;e[11]!==a?(v=a.map(sX),e[11]=a,e[12]=v):v=e[12];let y;e[13]!==v?(y=f.jsx("div",{className:"space-y-2",children:v}),e[13]=v,e[14]=y):y=e[14];let _;return e[15]!==m||e[16]!==y?(_=f.jsxs("div",{children:[m,y]}),e[15]=m,e[16]=y,e[17]=_):_=e[17],_}function sX(t){return f.jsx("div",{className:`border rounded-lg p-3 ${t.isCurrent?"border-blue-500/30 bg-blue-500/5":"border-neutral-300 dark:border-neutral-700 bg-neutral-100 dark:bg-neutral-900/50 opacity-60"}`,children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(cl,{size:16,className:t.isCurrent?"text-blue-400":"text-neutral-600 dark:text-neutral-500"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100 truncate",title:t.name,children:t.name}),t.revision&&f.jsxs("span",{className:"text-xs bg-neutral-200 dark:bg-neutral-700 px-1.5 py-0.5 rounded text-neutral-700 dark:text-neutral-400",children:["rev ",t.revision]})]}),t.images.length>0&&f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500 truncate",children:t.images.join(", ")})]}),f.jsxs("div",{className:"text-xs",children:[f.jsxs("span",{className:t.readyReplicas===t.replicas?"text-emerald-600 dark:text-emerald-400":"text-amber-600 dark:text-amber-400",children:[t.readyReplicas,"/",t.replicas]}),f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500 ml-1",children:"ready"})]})]})},t.name)}function rX(t){const e=He.c(18),{loader:n,title:s}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],e[0]=r):r=e[0];const[a,o]=K.useState(r),[c,h]=K.useState(!0);let d,g;if(e[1]!==n?(d=()=>{n().then(o).finally(()=>h(!1))},g=[n],e[1]=n,e[2]=d,e[3]=g):(d=e[2],g=e[3]),K.useEffect(d,g),c){let w;e[4]!==s?(w=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[4]=s,e[5]=w):w=e[5];let S;e[6]===Symbol.for("react.memo_cache_sentinel")?(S=f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:"Loading PVCs..."}),e[6]=S):S=e[6];let k;return e[7]!==w?(k=f.jsxs("div",{children:[w,S]}),e[7]=w,e[8]=k):k=e[8],k}if(a.length===0)return null;let m;e[9]!==s?(m=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[9]=s,e[10]=m):m=e[10];let v;e[11]!==a?(v=a.map(iX),e[11]=a,e[12]=v):v=e[12];let y;e[13]!==v?(y=f.jsx("div",{className:"space-y-2",children:v}),e[13]=v,e[14]=y):y=e[14];let _;return e[15]!==m||e[16]!==y?(_=f.jsxs("div",{children:[m,y]}),e[15]=m,e[16]=y,e[17]=_):_=e[17],_}function iX(t){return f.jsx("div",{className:`border rounded-lg p-3 ${t.status==="Bound"?"border-emerald-500/30 bg-emerald-500/5":"border-neutral-300 dark:border-neutral-700 bg-neutral-100 dark:bg-neutral-900/50"}`,children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Hs,{size:16,className:t.status==="Bound"?"text-emerald-600 dark:text-emerald-400":"text-neutral-600 dark:text-neutral-500"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100 truncate",children:t.name})}),f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:[t.storageClass||"default"," storage class"]})]}),f.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[t.capacity&&f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:t.capacity}),f.jsx("span",{className:t.status==="Bound"?"text-emerald-600 dark:text-emerald-400":"text-amber-600 dark:text-amber-400",children:t.status})]})]})},t.name)}function aX(t){const e=He.c(25),{loader:n,title:s}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],e[0]=r):r=e[0];const[a,o]=K.useState(r),[c,h]=K.useState(!0),[d,g]=K.useState(!0);let m,v;if(e[1]!==n?(m=()=>{n().then(o).finally(()=>h(!1))},v=[n],e[1]=n,e[2]=m,e[3]=v):(m=e[2],v=e[3]),K.useEffect(m,v),c){let B;e[4]!==s?(B=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[4]=s,e[5]=B):B=e[5];let D;e[6]===Symbol.for("react.memo_cache_sentinel")?(D=f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:"Loading jobs..."}),e[6]=D):D=e[6];let j;return e[7]!==B?(j=f.jsxs("div",{children:[B,D]}),e[7]=B,e[8]=j):j=e[8],j}if(a.length===0)return null;let y;e[9]!==d||e[10]!==a?(y=d?a:a.slice(0,3),e[9]=d,e[10]=a,e[11]=y):y=e[11];const _=y;let w;e[12]!==s?(w=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[12]=s,e[13]=w):w=e[13];let S;e[14]!==_?(S=_.map(lX),e[14]=_,e[15]=S):S=e[15];let k;e[16]!==d||e[17]!==a.length?(k=a.length>3&&f.jsxs("button",{onClick:()=>g(!d),className:"flex items-center gap-1 text-xs text-neutral-600 dark:text-neutral-500 hover:text-neutral-900 dark:hover:text-neutral-300 transition-colors mt-2",children:[d?f.jsx(rs,{size:12}):f.jsx(Br,{size:12}),d?"Show less":`Show ${a.length-3} more`]}),e[16]=d,e[17]=a.length,e[18]=k):k=e[18];let C;e[19]!==S||e[20]!==k?(C=f.jsxs("div",{className:"space-y-2",children:[S,k]}),e[19]=S,e[20]=k,e[21]=C):C=e[21];let E;return e[22]!==w||e[23]!==C?(E=f.jsxs("div",{children:[w,C]}),e[22]=w,e[23]=C,e[24]=E):E=e[24],E}function lX(t){return f.jsx("div",{className:`border rounded-lg p-3 ${t.status==="Complete"?"border-emerald-500/30 bg-emerald-500/5":t.status==="Failed"?"border-red-500/30 bg-red-500/5":"border-amber-500/30 bg-amber-500/5"}`,children:f.jsxs("div",{className:"flex items-center gap-3",children:[t.status==="Complete"?f.jsx(Qr,{size:16,className:"text-emerald-400"}):t.status==="Failed"?f.jsx(Si,{size:16,className:"text-red-400"}):f.jsx(oa,{size:16,className:"text-amber-400"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100 truncate",title:t.name,children:t.name})}),t.startTime&&f.jsxs("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:["Started ",Qx(new Date(t.startTime))]})]}),f.jsx("span",{className:`text-xs ${t.status==="Complete"?"text-emerald-600 dark:text-emerald-400":t.status==="Failed"?"text-red-600 dark:text-red-400":"text-amber-600 dark:text-amber-400"}`,children:t.status})]})},t.name)}function oX(t){const e=He.c(4),{items:n}=t;let s;e[0]!==n?(s=n.map(cX),e[0]=n,e[1]=s):s=e[1];let r;return e[2]!==s?(r=f.jsx("div",{className:"space-y-2",children:s}),e[2]=s,e[3]=r):r=e[3],r}function cX(t,e){return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(Hs,{size:14,className:"text-purple-400"}),f.jsx("span",{className:"text-sm text-neutral-900 dark:text-neutral-100",children:t.name})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[t.size&&f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Size:"})," ",f.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:t.size})]}),t.storageClass&&f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Class:"})," ",f.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:t.storageClass})]}),t.accessModes&&f.jsxs("div",{className:"col-span-2",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Access:"})," ",f.jsx("span",{className:"text-neutral-900 dark:text-neutral-300",children:t.accessModes.join(", ")})]})]})]},e)}function uX(t){const e=He.c(8),{schedule:n,description:s}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(hT,{size:16,className:"text-purple-400"}),f.jsx("span",{className:"text-sm text-neutral-900 dark:text-neutral-100",children:"Schedule"})]}),e[0]=r):r=e[0];let a;e[1]!==n?(a=f.jsx("div",{className:"font-mono text-cyan-600 dark:text-cyan-400 text-lg mb-1",children:n}),e[1]=n,e[2]=a):a=e[2];let o;e[3]!==s?(o=f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:s}),e[3]=s,e[4]=o):o=e[4];let c;return e[5]!==a||e[6]!==o?(c=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[r,a,o]}),e[5]=a,e[6]=o,e[7]=c):c=e[7],c}function hX(t){const e=He.c(35),{completions:n,succeeded:s,failed:r,active:a}=t;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=f.jsx("span",{className:"text-sm text-neutral-900 dark:text-neutral-300",children:"Completions"}),e[0]=o):o=e[0];const c=s>=n?"text-emerald-600 dark:text-emerald-400":"text-cyan-600 dark:text-cyan-400";let h;e[1]!==s||e[2]!==c?(h=f.jsx("span",{className:c,children:s}),e[1]=s,e[2]=c,e[3]=h):h=e[3];let d;e[4]!==n?(d=f.jsxs("span",{className:"text-neutral-600 dark:text-neutral-500",children:[" / ",n]}),e[4]=n,e[5]=d):d=e[5];let g;e[6]!==h||e[7]!==d?(g=f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o,f.jsxs("span",{className:"text-sm",children:[h,d]})]}),e[6]=h,e[7]=d,e[8]=g):g=e[8];let m;e[9]!==n||e[10]!==s?(m=s>0&&f.jsx("div",{className:"h-full bg-emerald-500",style:{width:`${s/n*100}%`}}),e[9]=n,e[10]=s,e[11]=m):m=e[11];let v;e[12]!==n||e[13]!==r?(v=r>0&&f.jsx("div",{className:"h-full bg-red-500",style:{width:`${r/(n+r)*100}%`}}),e[12]=n,e[13]=r,e[14]=v):v=e[14];let y;e[15]!==m||e[16]!==v?(y=f.jsxs("div",{className:"h-2 bg-neutral-300 dark:bg-neutral-700 rounded-full overflow-hidden flex",children:[m,v]}),e[15]=m,e[16]=v,e[17]=y):y=e[17];let _;e[18]===Symbol.for("react.memo_cache_sentinel")?(_=f.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),e[18]=_):_=e[18];let w;e[19]!==s?(w=f.jsxs("div",{className:"flex items-center gap-1",children:[_,f.jsxs("span",{className:"text-neutral-700 dark:text-neutral-400",children:["Succeeded: ",s]})]}),e[19]=s,e[20]=w):w=e[20];let S;e[21]===Symbol.for("react.memo_cache_sentinel")?(S=f.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"}),e[21]=S):S=e[21];let k;e[22]!==a?(k=f.jsxs("div",{className:"flex items-center gap-1",children:[S,f.jsxs("span",{className:"text-neutral-700 dark:text-neutral-400",children:["Active: ",a]})]}),e[22]=a,e[23]=k):k=e[23];let C;e[24]===Symbol.for("react.memo_cache_sentinel")?(C=f.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),e[24]=C):C=e[24];let E;e[25]!==r?(E=f.jsxs("div",{className:"flex items-center gap-1",children:[C,f.jsxs("span",{className:"text-neutral-700 dark:text-neutral-400",children:["Failed: ",r]})]}),e[25]=r,e[26]=E):E=e[26];let B;e[27]!==w||e[28]!==k||e[29]!==E?(B=f.jsxs("div",{className:"flex items-center gap-4 mt-3 text-xs",children:[w,k,E]}),e[27]=w,e[28]=k,e[29]=E,e[30]=B):B=e[30];let D;return e[31]!==B||e[32]!==g||e[33]!==y?(D=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3",children:[g,y,B]}),e[31]=B,e[32]=g,e[33]=y,e[34]=D):D=e[34],D}function dX(t){const e=He.c(7),{startTime:n,completionTime:s}=t;let r;e[0]!==n?(r=n&&f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Started:"})," ",f.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:n.toLocaleString()})]}),e[0]=n,e[1]=r):r=e[1];let a;e[2]!==s?(a=s&&f.jsxs("div",{children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-500",children:"Completed:"})," ",f.jsx("span",{className:"text-emerald-600 dark:text-emerald-400",children:s.toLocaleString()})]}),e[2]=s,e[3]=a):a=e[3];let o;return e[4]!==r||e[5]!==a?(o=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3 space-y-2 text-xs",children:[r,a]}),e[4]=r,e[5]=a,e[6]=o):o=e[6],o}function fX(t){const e=He.c(11),{items:n,columns:s}=t,r=s===void 0?2:s;let a,o;if(e[0]!==r||e[1]!==n){const h=n.filter(pX),d=r===3?"grid-cols-3":r===2?"grid-cols-2":"grid-cols-1";let g;e[4]!==r?(g=y=>{if(r!==3)return"";const _=y%3;return _===0?"text-left":_===1?"text-center":"text-right"},e[4]=r,e[5]=g):g=e[5];const m=g;a=`bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-3 grid gap-2 text-xs ${d}`;let v;e[6]!==m?(v=(y,_)=>f.jsxs("div",{className:`overflow-hidden ${m(_)}`,children:[f.jsxs("span",{className:"text-neutral-500 dark:text-neutral-500",children:[y.label,":"]})," ",f.jsx("span",{className:y.color||"text-neutral-900 dark:text-neutral-300",children:y.value})]},_),e[6]=m,e[7]=v):v=e[7],o=h.map(v),e[0]=r,e[1]=n,e[2]=a,e[3]=o}else a=e[2],o=e[3];let c;return e[8]!==a||e[9]!==o?(c=f.jsx("div",{className:a,children:o}),e[8]=a,e[9]=o,e[10]=c):c=e[10],c}function pX(t){return t.value!==void 0&&t.value!==null}function mX(t){const e=He.c(20),{labels:n,title:s}=t,r=s===void 0?"Labels":s;let a,o,c,h,d;if(e[0]!==n||e[1]!==r){d=Symbol.for("react.early_return_sentinel");e:{const y=Object.entries(n);if(y.length===0){d=null;break e}const _=["node-role.kubernetes.io/","kubernetes.io/os","kubernetes.io/arch","node.kubernetes.io/instance-type","topology.kubernetes.io/"],w=[...y].sort((k,C)=>{const E=_.some(D=>k[0].startsWith(D)),B=_.some(D=>C[0].startsWith(D));return E&&!B?-1:!E&&B?1:0});let S;e[7]===Symbol.for("react.memo_cache_sentinel")?(S=f.jsx(rP,{size:12}),e[7]=S):S=e[7],e[8]!==r?(h=f.jsxs("h5",{className:"flex items-center gap-2 text-xs font-medium text-neutral-500 uppercase tracking-wider mb-2",children:[S,r]}),e[8]=r,e[9]=h):h=e[9],o="w-full text-xs table-fixed",e[10]===Symbol.for("react.memo_cache_sentinel")?(c=f.jsxs("colgroup",{children:[f.jsx("col",{className:"w-[40%]"}),f.jsx("col",{className:"w-[60%]"})]}),e[10]=c):c=e[10],a=w.map((k,C)=>{const[E,B]=k,D=_.some(j=>E.startsWith(j));return f.jsxs("tr",{className:C%2===0?"bg-neutral-50 dark:bg-neutral-800/30":"",children:[f.jsx("td",{className:`py-1.5 px-2 truncate ${D?"text-blue-600 dark:text-blue-400":"text-sky-600 dark:text-sky-400"}`,title:E,children:E}),f.jsx("td",{className:"py-1.5 px-2 text-emerald-600 dark:text-emerald-400 truncate",title:B,children:B})]},E)})}e[0]=n,e[1]=r,e[2]=a,e[3]=o,e[4]=c,e[5]=h,e[6]=d}else a=e[2],o=e[3],c=e[4],h=e[5],d=e[6];if(d!==Symbol.for("react.early_return_sentinel"))return d;let g;e[11]!==a?(g=f.jsx("tbody",{children:a}),e[11]=a,e[12]=g):g=e[12];let m;e[13]!==o||e[14]!==c||e[15]!==g?(m=f.jsxs("table",{className:o,children:[c,g]}),e[13]=o,e[14]=c,e[15]=g,e[16]=m):m=e[16];let v;return e[17]!==h||e[18]!==m?(v=f.jsxs("div",{children:[h,m]}),e[17]=h,e[18]=m,e[19]=v):v=e[19],v}function gX(t){const e=He.c(4),{containers:n}=t;let s;e[0]!==n?(s=n.map(yX),e[0]=n,e[1]=s):s=e[1];let r;return e[2]!==s?(r=f.jsx("div",{className:"space-y-1",children:s}),e[2]=s,e[3]=r):r=e[3],r}function yX(t){return f.jsxs("div",{className:"text-xs bg-neutral-100 dark:bg-neutral-900/50 px-2 py-1.5 rounded flex items-center gap-2",children:[f.jsx(dl,{size:12,className:"text-blue-400"}),f.jsxs("span",{className:"text-neutral-900 dark:text-neutral-300",children:[t.name,":"]}),f.jsx("span",{className:"text-cyan-400 truncate",children:t.image})]},t.name)}function vX(t){const e=He.c(4),{addresses:n}=t;let s;e[0]!==n?(s=n.map(bX),e[0]=n,e[1]=s):s=e[1];let r;return e[2]!==s?(r=f.jsx("div",{className:"grid grid-cols-2 gap-2",children:s}),e[2]=s,e[3]=r):r=e[3],r}function bX(t,e){return f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-2",children:[f.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-500",children:t.type}),f.jsx("div",{className:"text-sm text-cyan-600 dark:text-cyan-400 font-mono",children:t.address})]},e)}const xX=15e3;function _X(t){const e=He.c(56),{loader:n,title:s}=t,[r,a]=K.useState(null),[o,c]=K.useState(!0);let h,d;if(e[0]!==n?(h=()=>{let T=!0;const H=async()=>{const Y=await n();T&&(a(Y),c(!1))};H();const N=setInterval(H,xX);return()=>{T=!1,clearInterval(N)}},d=[n],e[0]=n,e[1]=h,e[2]=d):(h=e[1],d=e[2]),K.useEffect(h,d),!o&&r===null)return null;if(o){let T;e[3]!==s?(T=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[3]=s,e[4]=T):T=e[4];let H;e[5]===Symbol.for("react.memo_cache_sentinel")?(H=f.jsxs("div",{className:"flex items-center gap-2 text-xs text-neutral-500",children:[f.jsx(Mn,{size:12,className:"animate-spin"}),"Loading metrics..."]}),e[5]=H):H=e[5];let N;return e[6]!==T?(N=f.jsxs("div",{children:[T,H]}),e[6]=T,e[7]=N):N=e[7],N}if(!r)return null;const g=nE(r.cpu.usageNanoCores,r.cpu.allocatableNanoCores),m=nE(r.memory.usageBytes,r.memory.allocatableBytes);let v;e[8]!==s?(v=s&&f.jsx("h5",{className:"text-xs font-medium text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[8]=s,e[9]=v):v=e[9];let y;e[10]===Symbol.for("react.memo_cache_sentinel")?(y=f.jsxs("span",{className:"text-xs text-neutral-400 flex items-center gap-1.5",children:[f.jsx(yg,{size:12}),"CPU Usage"]}),e[10]=y):y=e[10];const _=g>80?"text-amber-400":"text-blue-400";let w;e[11]!==r.cpu.usage||e[12]!==_?(w=f.jsx("span",{className:_,children:r.cpu.usage}),e[11]=r.cpu.usage,e[12]=_,e[13]=w):w=e[13];let S;e[14]!==r.cpu.allocatable?(S=f.jsxs("span",{className:"text-neutral-500",children:[" / ",r.cpu.allocatable]}),e[14]=r.cpu.allocatable,e[15]=S):S=e[15];let k;e[16]!==w||e[17]!==S?(k=f.jsxs("div",{className:"flex items-center justify-between",children:[y,f.jsxs("span",{className:"text-xs font-mono",children:[w,S]})]}),e[16]=w,e[17]=S,e[18]=k):k=e[18];const C=`h-full transition-all duration-300 ${g>80?"bg-amber-500":"bg-blue-500"}`,E=`${g}%`;let B;e[19]!==E?(B={width:E},e[19]=E,e[20]=B):B=e[20];let D;e[21]!==B||e[22]!==C?(D=f.jsx("div",{className:"h-2 bg-neutral-700 rounded-full overflow-hidden",children:f.jsx("div",{className:C,style:B})}),e[21]=B,e[22]=C,e[23]=D):D=e[23];let j;e[24]!==g?(j=f.jsxs("div",{className:"text-xs text-neutral-500 text-right",children:[g,"% utilized"]}),e[24]=g,e[25]=j):j=e[25];let P;e[26]!==D||e[27]!==j||e[28]!==k?(P=f.jsxs("div",{className:"bg-neutral-900/50 rounded-lg p-3 space-y-2",children:[k,D,j]}),e[26]=D,e[27]=j,e[28]=k,e[29]=P):P=e[29];let U;e[30]===Symbol.for("react.memo_cache_sentinel")?(U=f.jsxs("span",{className:"text-xs text-neutral-400 flex items-center gap-1.5",children:[f.jsx(Hs,{size:12}),"Memory Usage"]}),e[30]=U):U=e[30];const X=m>80?"text-amber-400":"text-purple-400";let $;e[31]!==r.memory.usage||e[32]!==X?($=f.jsx("span",{className:X,children:r.memory.usage}),e[31]=r.memory.usage,e[32]=X,e[33]=$):$=e[33];let Z;e[34]!==r.memory.allocatable?(Z=f.jsxs("span",{className:"text-neutral-500",children:[" / ",r.memory.allocatable]}),e[34]=r.memory.allocatable,e[35]=Z):Z=e[35];let F;e[36]!==$||e[37]!==Z?(F=f.jsxs("div",{className:"flex items-center justify-between",children:[U,f.jsxs("span",{className:"text-xs font-mono",children:[$,Z]})]}),e[36]=$,e[37]=Z,e[38]=F):F=e[38];const W=`h-full transition-all duration-300 ${m>80?"bg-amber-500":"bg-purple-500"}`,Q=`${m}%`;let V;e[39]!==Q?(V={width:Q},e[39]=Q,e[40]=V):V=e[40];let M;e[41]!==W||e[42]!==V?(M=f.jsx("div",{className:"h-2 bg-neutral-700 rounded-full overflow-hidden",children:f.jsx("div",{className:W,style:V})}),e[41]=W,e[42]=V,e[43]=M):M=e[43];let G;e[44]!==m?(G=f.jsxs("div",{className:"text-xs text-neutral-500 text-right",children:[m,"% utilized"]}),e[44]=m,e[45]=G):G=e[45];let q;e[46]!==F||e[47]!==M||e[48]!==G?(q=f.jsxs("div",{className:"bg-neutral-900/50 rounded-lg p-3 space-y-2",children:[F,M,G]}),e[46]=F,e[47]=M,e[48]=G,e[49]=q):q=e[49];let z;e[50]!==P||e[51]!==q?(z=f.jsxs("div",{className:"space-y-3",children:[P,q]}),e[50]=P,e[51]=q,e[52]=z):z=e[52];let O;return e[53]!==z||e[54]!==v?(O=f.jsxs("div",{children:[v,z]}),e[53]=z,e[54]=v,e[55]=O):O=e[55],O}function wX(t){const e=He.c(24),{data:n}=t,{cpu:s,memory:r}=n;if(!(s.requests||s.limits||r.requests||r.limits))return null;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=f.jsx("h5",{className:"text-xs font-medium text-neutral-500 uppercase tracking-wider mb-2",children:"Resource Quota"}),e[0]=o):o=e[0];let c;e[1]===Symbol.for("react.memo_cache_sentinel")?(c=f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(yg,{size:14,className:"text-blue-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"CPU"})]}),e[1]=c):c=e[1];let h;e[2]===Symbol.for("react.memo_cache_sentinel")?(h=f.jsx("span",{className:"text-xs text-neutral-500",children:"Requests"}),e[2]=h):h=e[2];const d=s.requests||"";let g;e[3]!==d?(g=f.jsxs("div",{className:"flex items-center justify-between",children:[h,f.jsx("span",{className:"text-sm font-mono text-neutral-900 dark:text-neutral-100",children:d})]}),e[3]=d,e[4]=g):g=e[4];let m;e[5]===Symbol.for("react.memo_cache_sentinel")?(m=f.jsx("span",{className:"text-xs text-neutral-500",children:"Limits"}),e[5]=m):m=e[5];const v=s.limits||"";let y;e[6]!==v?(y=f.jsxs("div",{className:"flex items-center justify-between",children:[m,f.jsx("span",{className:"text-sm font-mono text-neutral-900 dark:text-neutral-100",children:v})]}),e[6]=v,e[7]=y):y=e[7];let _;e[8]!==g||e[9]!==y?(_=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800 rounded-lg p-3",children:[c,f.jsxs("div",{className:"space-y-1.5",children:[g,y]})]}),e[8]=g,e[9]=y,e[10]=_):_=e[10];let w;e[11]===Symbol.for("react.memo_cache_sentinel")?(w=f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(Hs,{size:14,className:"text-purple-400"}),f.jsx("span",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Memory"})]}),e[11]=w):w=e[11];let S;e[12]===Symbol.for("react.memo_cache_sentinel")?(S=f.jsx("span",{className:"text-xs text-neutral-500",children:"Requests"}),e[12]=S):S=e[12];const k=r.requests||"";let C;e[13]!==k?(C=f.jsxs("div",{className:"flex items-center justify-between",children:[S,f.jsx("span",{className:"text-sm font-mono text-neutral-900 dark:text-neutral-100",children:k})]}),e[13]=k,e[14]=C):C=e[14];let E;e[15]===Symbol.for("react.memo_cache_sentinel")?(E=f.jsx("span",{className:"text-xs text-neutral-500",children:"Limits"}),e[15]=E):E=e[15];const B=r.limits||"";let D;e[16]!==B?(D=f.jsxs("div",{className:"flex items-center justify-between",children:[E,f.jsx("span",{className:"text-sm font-mono text-neutral-900 dark:text-neutral-100",children:B})]}),e[16]=B,e[17]=D):D=e[17];let j;e[18]!==C||e[19]!==D?(j=f.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800 rounded-lg p-3",children:[w,f.jsxs("div",{className:"space-y-1.5",children:[C,D]})]}),e[18]=C,e[19]=D,e[20]=j):j=e[20];let P;return e[21]!==j||e[22]!==_?(P=f.jsxs("div",{children:[o,f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[_,j]})]}),e[21]=j,e[22]=_,e[23]=P):P=e[23],P}function SX(t){const e=He.c(9),{section:n}=t,{title:s,data:r}=n;let a;e[0]!==r?(a=kX(r),e[0]=r,e[1]=a):a=e[1];const o=a;if(o===null)return null;if(!s){let d;return e[2]!==o?(d=f.jsx(f.Fragment,{children:o}),e[2]=o,e[3]=d):d=e[3],d}let c;e[4]!==s?(c=f.jsx("h5",{className:"text-xs font-medium text-neutral-500 uppercase tracking-wider mb-2",children:s}),e[4]=s,e[5]=c):c=e[5];let h;return e[6]!==o||e[7]!==c?(h=f.jsxs("div",{children:[c,o]}),e[6]=o,e[7]=c,e[8]=h):h=e[8],h}function kX(t){switch(t.type){case"status-cards":return f.jsx(TY,{items:t.items});case"gauges":return f.jsx(RY,{items:t.items,podGrid:t.showPodGrid});case"conditions":return f.jsx(DY,{conditions:t.items});case"info-grid":return f.jsx(fX,{items:t.items,columns:t.columns});case"containers":return f.jsx(HY,{items:t.items,metricsLoader:t.metricsLoader});case"volumes":return f.jsx(WY,{items:t.items});case"labels":return f.jsx(mX,{labels:t.labels,title:t.title});case"capacity-bars":return f.jsx(ZY,{items:t.items});case"taints":return f.jsx(tX,{items:t.items});case"container-images":return f.jsx(gX,{containers:t.containers});case"related-replicasets":return f.jsx(nX,{loader:t.loader,title:t.title});case"related-pvcs":return f.jsx(rX,{loader:t.loader,title:t.title});case"related-jobs":return f.jsx(aX,{loader:t.loader,title:t.title});case"volume-claim-templates":return f.jsx(oX,{items:t.items});case"schedule":return f.jsx(uX,{schedule:t.schedule,description:t.description});case"job-progress":return f.jsx(hX,{...t});case"timeline":return f.jsx(dX,{startTime:t.startTime,completionTime:t.completionTime});case"addresses":return f.jsx(vX,{addresses:t.addresses});case"node-metrics":return f.jsx(_X,{loader:t.loader,title:t.title});case"resource-quota":return f.jsx(wX,{data:t.data});case"custom":return t.render();default:return null}}function CX(t){const e=He.c(25),{resource:n,onActionComplete:s,hideActions:r}=t,a=r===void 0?!1:r,{context:o}=hr();let c,h,d,g,m;if(e[0]!==o||e[1]!==a||e[2]!==s||e[3]!==n){m=Symbol.for("react.early_return_sentinel");e:{const y=EY(o,n);let _;e[9]!==n?(_=nM(n),e[9]=n,e[10]=_):_=e[10];const w=_,S=n.metadata?.annotations?.["kubernetes.io/description"];if(!y||y.sections.length===0){let k;e[11]!==n.kind?(k=f.jsxs("div",{className:"text-neutral-500 text-sm",children:["No visualization available for ",n.kind]}),e[11]=n.kind,e[12]=k):k=e[12],m=k;break e}c="space-y-4",e[13]!==w||e[14]!==a||e[15]!==s||e[16]!==n?(h=!a&&f.jsx(jY,{actions:w,resource:n,onActionComplete:s}),e[13]=w,e[14]=a,e[15]=s,e[16]=n,e[17]=h):h=e[17],e[18]!==S?(d=S&&f.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:S}),e[18]=S,e[19]=d):d=e[19],g=y.sections.map(NX)}e[0]=o,e[1]=a,e[2]=s,e[3]=n,e[4]=c,e[5]=h,e[6]=d,e[7]=g,e[8]=m}else c=e[4],h=e[5],d=e[6],g=e[7],m=e[8];if(m!==Symbol.for("react.early_return_sentinel"))return m;let v;return e[20]!==c||e[21]!==h||e[22]!==d||e[23]!==g?(v=f.jsxs("div",{className:c,children:[h,d,g]}),e[20]=c,e[21]=h,e[22]=d,e[23]=g,e[24]=v):v=e[24],v}function NX(t){return f.jsx(SX,{section:t},t.id)}function V3(t,e,n){const s=t.match(/^(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d+Z)\s+(.*)$/);return s?{podName:e,container:n,timestamp:s[1],message:s[2]}:{podName:e,container:n,message:t}}async function AX(t,e,n,s){const r=new URLSearchParams;s.container&&r.set("container",s.container),r.set("follow","true"),r.set("tailLines",String(s.tailLines)),r.set("timestamps","true");const a=`/contexts/${t}/api/v1/namespaces/${e}/pods/${n}/log?${r.toString()}`;try{const o=await fetch(a,{signal:s.signal});if(!o.ok)throw new Error(`Failed to fetch logs: ${o.status} ${o.statusText}`);if(!o.body)throw new Error("No response body");const c=o.body.getReader(),h=new TextDecoder;let d="";for(;;){const{done:g,value:m}=await c.read();if(g)break;d+=h.decode(m,{stream:!0});const v=d.split(`
`);d=v.pop()||"";for(const y of v)y.trim()&&s.onLog(V3(y,n,s.container))}d.trim()&&s.onLog(V3(d,n,s.container))}catch(o){if(o.name==="AbortError")return;s.onError?.(o)}}function EX(t){const e=new AbortController;for(const n of t.podNames)AX(t.context,t.namespace,n,{container:t.container,follow:t.follow,tailLines:t.tailLines,timestamps:t.timestamps,onLog:t.onLog,onError:t.onError,signal:e.signal});return e}async function jX(t,e,n,s){let r;switch(n.toLowerCase()){case"deployment":r=`/apis/apps/v1/namespaces/${e}/deployments/${s}`;break;case"daemonset":r=`/apis/apps/v1/namespaces/${e}/daemonsets/${s}`;break;case"replicaset":r=`/apis/apps/v1/namespaces/${e}/replicasets/${s}`;break;case"statefulset":r=`/apis/apps/v1/namespaces/${e}/statefulsets/${s}`;break;case"job":r=`/apis/batch/v1/namespaces/${e}/jobs/${s}`;break;default:throw new Error(`Unsupported workload kind: ${n}`)}const a=await fetch(`/contexts/${t}${r}`);if(!a.ok)throw new Error(`Failed to fetch ${n}: ${a.status}`);const c=(await a.json()).spec?.selector?.matchLabels;if(!c)throw new Error("Workload has no selector labels");const h=Object.entries(c).map(([m,v])=>`${m}=${v}`).join(","),d=await fetch(`/contexts/${t}/api/v1/namespaces/${e}/pods?labelSelector=${encodeURIComponent(h)}`);if(!d.ok)throw new Error(`Failed to fetch pods: ${d.status}`);return(await d.json()).items.map(m=>m.metadata.name)}var sM=oT();function J2(t){const e=He.c(6),{toolbarRef:n,children:s}=t,[r,a]=K.useState(null);let o,c;e[0]!==n?(o=()=>{a(n.current)},c=[n],e[0]=n,e[1]=o,e[2]=c):(o=e[1],c=e[2]),K.useEffect(o,c);let h;return e[3]!==s||e[4]!==r?(h=r?sM.createPortal(s,r):null,e[3]=s,e[4]=r,e[5]=h):h=e[5],h}const F3=["text-cyan-400","text-emerald-400","text-amber-400","text-purple-400","text-pink-400","text-blue-400","text-red-400","text-orange-400"];function TX(t,e){const n=e.indexOf(t);return F3[n%F3.length]}function RX(t){if(!t)return"";try{return new Date(t).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3})}catch{return t}}const OX=/^([IWEF])(\d{4})\s+(\d{2}:\d{2}:\d{2}\.\d+)\s+\d+\s+([\w.]+:\d+)]\s*(.*)$/;function BX(t){const e=t.match(OX);if(!e)return null;const[,n,,,s,r]=e,a=n==="E"?"error":n==="W"?"warn":n==="F"?"error":"info",o=rM(r),c=[`source: ${s}`];for(const[h,d]of Object.entries(o))c.push(`${h}: ${d}`);return{format:"klog",formatted:c.join(`
`),level:a}}function rM(t){const e={},n=/(?:"([^"]*)"|([\w.]+)=(?:"([^"]*)"|([^\s]*)))/g;let s,r=0;for(;(s=n.exec(t))!==null;)if(s[1]!==void 0)e[`msg${r||""}`]=s[1],r++;else{const a=s[2],o=s[3]??s[4]??"";e[a]=o}return e}function MX(t){const e=t.trim();if(!/\w+=/.test(e))return null;const n=rM(e),s=Object.keys(n);if(s.length<2)return null;let r="unknown";const a=(n.level??n.lvl??n.severity??"").toLowerCase();return a.includes("err")||a==="fatal"?r="error":a.includes("warn")?r="warn":a==="info"?r="info":a==="debug"&&(r="debug"),{format:"logfmt",formatted:s.map(c=>`${c}: ${n[c]}`).join(`
`),level:r}}function DX(t){const e=t.trim();if(e.startsWith("{")||e.startsWith("["))try{const r=JSON.parse(e);return{format:"json",formatted:JSON.stringify(r,null,2),jsonData:r}}catch{}const n=BX(e);if(n)return n;const s=MX(e);return s||{format:"plain",formatted:t}}const LX={error:"text-red-600 dark:text-red-400",warn:"text-yellow-600 dark:text-yellow-400",info:"text-blue-600 dark:text-blue-400",debug:"text-neutral-600 dark:text-neutral-400",trace:"text-neutral-500 dark:text-neutral-500",unknown:"text-neutral-700 dark:text-neutral-300"},IX={error:"bg-red-50 dark:bg-red-500/10 border-l-2 border-red-400 dark:border-red-500/50",warn:"bg-yellow-50 dark:bg-yellow-500/10 border-l-2 border-yellow-400 dark:border-yellow-500/50",info:"",debug:"",trace:"",unknown:""};function PX(t,e,n){if(n&&n!=="unknown")return n;if(e){const a=e.level??e.severity??e.lvl??e.log_level??"",o=String(a).toLowerCase();if(o.includes("err")||o==="fatal"||o==="critical")return"error";if(o.includes("warn"))return"warn";if(o==="info")return"info";if(o==="debug")return"debug";if(o==="trace")return"trace"}const r=t.toLowerCase().slice(0,100);return/\b(error|err|fatal|critical|panic|exception)\b/.test(r)?"error":/\b(warn|warning)\b/.test(r)?"warn":/\binfo\b/.test(r)?"info":/\bdebug\b/.test(r)?"debug":/\btrace\b/.test(r)?"trace":"unknown"}function zX(t,e){const[n,s]=K.useState({podNames:[],loading:!1,error:null}),r=e.kind,a=e.metadata?.name,o=e.metadata?.namespace;return K.useEffect(()=>{if(!r||!a||!o)return;if(r==="Pod"){s({podNames:[a],loading:!1,error:null});return}let c=!1;async function h(){try{const d=await jX(t,o,r,a);c||s({podNames:d,loading:!1,error:null})}catch(d){c||s(g=>({...g,loading:!1,error:d.message}))}}return s(d=>({...d,loading:!0,error:null})),h(),()=>{c=!0}},[t,o,r,a]),n}const $X=4e3;function HX(t){const e=He.c(58),{resource:n,toolbarRef:s}=t,{context:r}=hr();let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=[],e[0]=a):a=e[0];const[o,c]=K.useState(a),[h,d]=K.useState(null),[g,m]=K.useState(!0),[v,y]=K.useState(!1),[_,w]=K.useState(!1),[S,k]=K.useState(!1),C=K.useRef(null),E=K.useRef(null);let B;e[1]!==o?(B=async()=>{const Qe=o.map(UX).join(`
`);await navigator.clipboard.writeText(Qe),w(!0),setTimeout(()=>w(!1),2e3)},e[1]=o,e[2]=B):B=e[2];const D=B,j=K.useRef(null),P=n.metadata?.namespace,{podNames:U,loading:X,error:$}=zX(r,n);let Z;e[3]===Symbol.for("react.memo_cache_sentinel")?(Z=()=>{if(!E.current)return;const{scrollTop:Qe,scrollHeight:nt,clientHeight:Lt}=E.current,Et=nt-Qe-Lt<50;m(Et)},e[3]=Z):Z=e[3];const F=Z;let W;e[4]!==g?(W=()=>{g&&C.current&&C.current.scrollIntoView({behavior:"smooth"})},e[4]=g,e[5]=W):W=e[5];let Q;e[6]!==g||e[7]!==o?(Q=[o,g],e[6]=g,e[7]=o,e[8]=Q):Q=e[8],K.useEffect(W,Q);const V=U.length>0&&!v&&!X;let M,G;e[9]!==r||e[10]!==P||e[11]!==U||e[12]!==V?(M=()=>{if(V){const Qe=setTimeout(()=>{U.length>0&&P&&(d(null),y(!0),j.current=EX({context:r,namespace:P,podNames:U,follow:!0,tailLines:$X,timestamps:!0,onLog:nt=>{c(Lt=>[...Lt,nt])},onError:nt=>{d(nt.message)}}))},0);return()=>clearTimeout(Qe)}},G=[V,r,P,U],e[9]=r,e[10]=P,e[11]=U,e[12]=V,e[13]=M,e[14]=G):(M=e[13],G=e[14]),K.useEffect(M,G);let q,z;e[15]===Symbol.for("react.memo_cache_sentinel")?(q=()=>()=>{j.current?.abort(),j.current=null},z=[],e[15]=q,e[16]=z):(q=e[15],z=e[16]),K.useEffect(q,z);let O;e[17]===Symbol.for("react.memo_cache_sentinel")?(O=()=>{m(!0),C.current?.scrollIntoView({behavior:"smooth"})},e[17]=O):O=e[17];const T=O,H=$||h;let N;e[18]!==_||e[19]!==D||e[20]!==o.length||e[21]!==S||e[22]!==s?(N=s&&f.jsxs(J2,{toolbarRef:s,children:[f.jsx("button",{onClick:()=>k(!S),className:`flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium rounded transition-colors ${S?"text-amber-600 dark:text-amber-400 bg-amber-100 dark:bg-amber-500/20":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-200 dark:hover:bg-neutral-800"}`,title:S?"Show all logs":"Show only errors & warnings",children:f.jsx(n7,{size:12})}),f.jsx("button",{onClick:D,disabled:o.length===0,className:"flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-200 dark:hover:bg-neutral-800 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Copy logs",children:_?f.jsx(Cn,{size:12,className:"text-emerald-500"}):f.jsx(us,{size:12})})]}),e[18]=_,e[19]=D,e[20]=o.length,e[21]=S,e[22]=s,e[23]=N):N=e[23];let Y;e[24]!==X?(Y=X&&f.jsx("div",{className:"p-4 text-neutral-500 dark:text-neutral-500",children:"Loading pods..."}),e[24]=X,e[25]=Y):Y=e[25];let oe;e[26]!==H?(oe=H&&f.jsx("div",{className:"p-4 text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-500/10 border-b border-red-300 dark:border-red-500/30",children:H}),e[26]=H,e[27]=oe):oe=e[27];let ee;e[28]!==X||e[29]!==U.length?(ee=!X&&U.length===0&&f.jsx("div",{className:"p-4 text-neutral-500 dark:text-neutral-500",children:"No pods found"}),e[28]=X,e[29]=U.length,e[30]=ee):ee=e[30];let de;e[31]!==H||e[32]!==X||e[33]!==o.length||e[34]!==U.length?(de=o.length===0&&!X&&U.length>0&&!H&&f.jsx("div",{className:"p-4 text-neutral-500 dark:text-neutral-500",children:"Waiting for logs..."}),e[31]=H,e[32]=X,e[33]=o.length,e[34]=U.length,e[35]=de):de=e[35];let we;if(e[36]!==o||e[37]!==U||e[38]!==S){let Qe;e[40]!==U||e[41]!==S?(Qe=(nt,Lt)=>{const Et=DX(nt.message),qn=PX(nt.message,Et.jsonData,Et.level);if(S&&qn!=="error"&&qn!=="warn")return null;const As=LX[qn],Ks=IX[qn],et=Et.format!=="plain";return f.jsxs("div",{className:`hover:bg-neutral-100 dark:hover:bg-neutral-900/50 rounded px-2 py-1 group ${Ks}`,children:[f.jsxs("div",{className:"flex items-center gap-2 text-[10px] leading-tight mb-0.5",children:[f.jsx("span",{className:"text-neutral-500 dark:text-neutral-600",children:RX(nt.timestamp)}),f.jsx("span",{className:`${TX(nt.podName,U)}`,title:nt.podName,children:nt.podName}),nt.container&&nt.container!==nt.podName&&f.jsx("span",{className:"text-neutral-500 dark:text-neutral-500",children:nt.container})]}),et?f.jsx("pre",{className:`${As} whitespace-pre overflow-x-auto scrollbar-hide leading-snug text-[11px]`,children:Et.formatted}):f.jsx("div",{className:`${As} break-all whitespace-pre-wrap leading-snug`,children:Et.formatted})]},Lt)},e[40]=U,e[41]=S,e[42]=Qe):Qe=e[42],we=o.map(Qe),e[36]=o,e[37]=U,e[38]=S,e[39]=we}else we=e[39];let Se;e[43]===Symbol.for("react.memo_cache_sentinel")?(Se=f.jsx("div",{ref:C}),e[43]=Se):Se=e[43];let Fe;e[44]!==we?(Fe=f.jsxs("div",{className:"p-2 space-y-1",children:[we,Se]}),e[44]=we,e[45]=Fe):Fe=e[45];let xe;e[46]!==Y||e[47]!==oe||e[48]!==ee||e[49]!==de||e[50]!==Fe?(xe=f.jsxs("div",{ref:E,onScroll:F,className:"flex-1 overflow-auto font-mono text-xs",children:[Y,oe,ee,de,Fe]}),e[46]=Y,e[47]=oe,e[48]=ee,e[49]=de,e[50]=Fe,e[51]=xe):xe=e[51];let qe;e[52]!==g?(qe=!g&&f.jsx("div",{className:"shrink-0 px-4 py-2 border-t border-neutral-200 dark:border-neutral-800 bg-neutral-100 dark:bg-neutral-900/50",children:f.jsxs("button",{onClick:T,className:"flex items-center gap-1 text-xs text-neutral-600 dark:text-neutral-500 hover:text-neutral-900 dark:hover:text-neutral-300",children:[f.jsx(rs,{size:12}),"Scroll to bottom"]})}),e[52]=g,e[53]=qe):qe=e[53];let je;return e[54]!==N||e[55]!==xe||e[56]!==qe?(je=f.jsxs("div",{className:"flex flex-col h-full bg-neutral-50 dark:bg-neutral-950",children:[N,xe,qe]}),e[54]=N,e[55]=xe,e[56]=qe,e[57]=je):je=e[57],je}function UX(t){return`${t.timestamp} [${t.podName}] ${t.message}`}var iM=Object.defineProperty,VX=Object.getOwnPropertyDescriptor,FX=(t,e)=>{for(var n in e)iM(t,n,{get:e[n],enumerable:!0})},hn=(t,e,n,s)=>{for(var r=s>1?void 0:s?VX(e,n):e,a=t.length-1,o;a>=0;a--)(o=t[a])&&(r=(s?o(e,n,r):o(r))||r);return s&&r&&iM(e,n,r),r},Le=(t,e)=>(n,s)=>e(n,s,t),q3="Terminal input",yw={get:()=>q3,set:t=>q3=t},K3="Too much output to announce, navigate to rows manually to read",vw={get:()=>K3,set:t=>K3=t};function qX(t){return t.replace(/\r?\n/g,"\r")}function KX(t,e){return e?"\x1B[200~"+t+"\x1B[201~":t}function WX(t,e){t.clipboardData&&t.clipboardData.setData("text/plain",e.selectionText),t.preventDefault()}function GX(t,e,n,s){if(t.stopPropagation(),t.clipboardData){let r=t.clipboardData.getData("text/plain");aM(r,e,n,s)}}function aM(t,e,n,s){t=qX(t),t=KX(t,n.decPrivateModes.bracketedPasteMode&&s.rawOptions.ignoreBracketedPasteMode!==!0),n.triggerDataEvent(t,!0),e.value=""}function lM(t,e,n){let s=n.getBoundingClientRect(),r=t.clientX-s.left-10,a=t.clientY-s.top-10;e.style.width="20px",e.style.height="20px",e.style.left=`${r}px`,e.style.top=`${a}px`,e.style.zIndex="1000",e.focus()}function W3(t,e,n,s,r){lM(t,e,n),r&&s.rightClickSelect(t),e.value=s.selectionText,e.select()}function Ga(t){return t>65535?(t-=65536,String.fromCharCode((t>>10)+55296)+String.fromCharCode(t%1024+56320)):String.fromCharCode(t)}function Ry(t,e=0,n=t.length){let s="";for(let r=e;r<n;++r){let a=t[r];a>65535?(a-=65536,s+=String.fromCharCode((a>>10)+55296)+String.fromCharCode(a%1024+56320)):s+=String.fromCharCode(a)}return s}var YX=class{constructor(){this._interim=0}clear(){this._interim=0}decode(t,e){let n=t.length;if(!n)return 0;let s=0,r=0;if(this._interim){let a=t.charCodeAt(r++);56320<=a&&a<=57343?e[s++]=(this._interim-55296)*1024+a-56320+65536:(e[s++]=this._interim,e[s++]=a),this._interim=0}for(let a=r;a<n;++a){let o=t.charCodeAt(a);if(55296<=o&&o<=56319){if(++a>=n)return this._interim=o,s;let c=t.charCodeAt(a);56320<=c&&c<=57343?e[s++]=(o-55296)*1024+c-56320+65536:(e[s++]=o,e[s++]=c);continue}o!==65279&&(e[s++]=o)}return s}},XX=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(t,e){let n=t.length;if(!n)return 0;let s=0,r,a,o,c,h=0,d=0;if(this.interim[0]){let v=!1,y=this.interim[0];y&=(y&224)===192?31:(y&240)===224?15:7;let _=0,w;for(;(w=this.interim[++_]&63)&&_<4;)y<<=6,y|=w;let S=(this.interim[0]&224)===192?2:(this.interim[0]&240)===224?3:4,k=S-_;for(;d<k;){if(d>=n)return 0;if(w=t[d++],(w&192)!==128){d--,v=!0;break}else this.interim[_++]=w,y<<=6,y|=w&63}v||(S===2?y<128?d--:e[s++]=y:S===3?y<2048||y>=55296&&y<=57343||y===65279||(e[s++]=y):y<65536||y>1114111||(e[s++]=y)),this.interim.fill(0)}let g=n-4,m=d;for(;m<n;){for(;m<g&&!((r=t[m])&128)&&!((a=t[m+1])&128)&&!((o=t[m+2])&128)&&!((c=t[m+3])&128);)e[s++]=r,e[s++]=a,e[s++]=o,e[s++]=c,m+=4;if(r=t[m++],r<128)e[s++]=r;else if((r&224)===192){if(m>=n)return this.interim[0]=r,s;if(a=t[m++],(a&192)!==128){m--;continue}if(h=(r&31)<<6|a&63,h<128){m--;continue}e[s++]=h}else if((r&240)===224){if(m>=n)return this.interim[0]=r,s;if(a=t[m++],(a&192)!==128){m--;continue}if(m>=n)return this.interim[0]=r,this.interim[1]=a,s;if(o=t[m++],(o&192)!==128){m--;continue}if(h=(r&15)<<12|(a&63)<<6|o&63,h<2048||h>=55296&&h<=57343||h===65279)continue;e[s++]=h}else if((r&248)===240){if(m>=n)return this.interim[0]=r,s;if(a=t[m++],(a&192)!==128){m--;continue}if(m>=n)return this.interim[0]=r,this.interim[1]=a,s;if(o=t[m++],(o&192)!==128){m--;continue}if(m>=n)return this.interim[0]=r,this.interim[1]=a,this.interim[2]=o,s;if(c=t[m++],(c&192)!==128){m--;continue}if(h=(r&7)<<18|(a&63)<<12|(o&63)<<6|c&63,h<65536||h>1114111)continue;e[s++]=h}}return s}},oM="",el=" ",Pf=class cM{constructor(){this.fg=0,this.bg=0,this.extended=new ag}static toColorRGB(e){return[e>>>16&255,e>>>8&255,e&255]}static fromColorRGB(e){return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255}clone(){let e=new cM;return e.fg=this.fg,e.bg=this.bg,e.extended=this.extended.clone(),e}isInverse(){return this.fg&67108864}isBold(){return this.fg&134217728}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:this.fg&268435456}isBlink(){return this.fg&536870912}isInvisible(){return this.fg&1073741824}isItalic(){return this.bg&67108864}isDim(){return this.bg&134217728}isStrikethrough(){return this.fg&2147483648}isProtected(){return this.bg&536870912}isOverline(){return this.bg&1073741824}getFgColorMode(){return this.fg&50331648}getBgColorMode(){return this.bg&50331648}isFgRGB(){return(this.fg&50331648)===50331648}isBgRGB(){return(this.bg&50331648)===50331648}isFgPalette(){return(this.fg&50331648)===16777216||(this.fg&50331648)===33554432}isBgPalette(){return(this.bg&50331648)===16777216||(this.bg&50331648)===33554432}isFgDefault(){return(this.fg&50331648)===0}isBgDefault(){return(this.bg&50331648)===0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(this.fg&50331648){case 16777216:case 33554432:return this.fg&255;case 50331648:return this.fg&16777215;default:return-1}}getBgColor(){switch(this.bg&50331648){case 16777216:case 33554432:return this.bg&255;case 50331648:return this.bg&16777215;default:return-1}}hasExtendedAttrs(){return this.bg&268435456}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(this.bg&268435456&&~this.extended.underlineColor)switch(this.extended.underlineColor&50331648){case 16777216:case 33554432:return this.extended.underlineColor&255;case 50331648:return this.extended.underlineColor&16777215;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return this.bg&268435456&&~this.extended.underlineColor?this.extended.underlineColor&50331648:this.getFgColorMode()}isUnderlineColorRGB(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===50331648:this.isFgRGB()}isUnderlineColorPalette(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===16777216||(this.extended.underlineColor&50331648)===33554432:this.isFgPalette()}isUnderlineColorDefault(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===0:this.isFgDefault()}getUnderlineStyle(){return this.fg&268435456?this.bg&268435456?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}},ag=class uM{constructor(e=0,n=0){this._ext=0,this._urlId=0,this._ext=e,this._urlId=n}get ext(){return this._urlId?this._ext&-469762049|this.underlineStyle<<26:this._ext}set ext(e){this._ext=e}get underlineStyle(){return this._urlId?5:(this._ext&469762048)>>26}set underlineStyle(e){this._ext&=-469762049,this._ext|=e<<26&469762048}get underlineColor(){return this._ext&67108863}set underlineColor(e){this._ext&=-67108864,this._ext|=e&67108863}get urlId(){return this._urlId}set urlId(e){this._urlId=e}get underlineVariantOffset(){let e=(this._ext&3758096384)>>29;return e<0?e^4294967288:e}set underlineVariantOffset(e){this._ext&=536870911,this._ext|=e<<29&3758096384}clone(){return new uM(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}},Dr=class hM extends Pf{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new ag,this.combinedData=""}static fromCharData(e){let n=new hM;return n.setFromCharData(e),n}isCombined(){return this.content&2097152}getWidth(){return this.content>>22}getChars(){return this.content&2097152?this.combinedData:this.content&2097151?Ga(this.content&2097151):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):this.content&2097151}setFromCharData(e){this.fg=e[0],this.bg=0;let n=!1;if(e[1].length>2)n=!0;else if(e[1].length===2){let s=e[1].charCodeAt(0);if(55296<=s&&s<=56319){let r=e[1].charCodeAt(1);56320<=r&&r<=57343?this.content=(s-55296)*1024+r-56320+65536|e[2]<<22:n=!0}else n=!0}else this.content=e[1].charCodeAt(0)|e[2]<<22;n&&(this.combinedData=e[1],this.content=2097152|e[2]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},G3="di$target",bw="di$dependencies",Qb=new Map;function JX(t){return t[bw]||[]}function Fn(t){if(Qb.has(t))return Qb.get(t);let e=function(n,s,r){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");QX(e,n,r)};return e._id=t,Qb.set(t,e),e}function QX(t,e,n){e[G3]===e?e[bw].push({id:t,index:n}):(e[bw]=[{id:t,index:n}],e[G3]=e)}var Cs=Fn("BufferService"),dM=Fn("CoreMouseService"),Ao=Fn("CoreService"),ZX=Fn("CharsetService"),Q2=Fn("InstantiationService"),fM=Fn("LogService"),Ns=Fn("OptionsService"),pM=Fn("OscLinkService"),eJ=Fn("UnicodeService"),zf=Fn("DecorationService"),xw=class{constructor(t,e,n){this._bufferService=t,this._optionsService=e,this._oscLinkService=n}provideLinks(t,e){let n=this._bufferService.buffer.lines.get(t-1);if(!n){e(void 0);return}let s=[],r=this._optionsService.rawOptions.linkHandler,a=new Dr,o=n.getTrimmedLength(),c=-1,h=-1,d=!1;for(let g=0;g<o;g++)if(!(h===-1&&!n.hasContent(g))){if(n.loadCell(g,a),a.hasExtendedAttrs()&&a.extended.urlId)if(h===-1){h=g,c=a.extended.urlId;continue}else d=a.extended.urlId!==c;else h!==-1&&(d=!0);if(d||h!==-1&&g===o-1){let m=this._oscLinkService.getLinkData(c)?.uri;if(m){let v={start:{x:h+1,y:t},end:{x:g+(!d&&g===o-1?1:0),y:t}},y=!1;if(!r?.allowNonHttpProtocols)try{let _=new URL(m);["http:","https:"].includes(_.protocol)||(y=!0)}catch{y=!0}y||s.push({text:m,range:v,activate:(_,w)=>r?r.activate(_,w,v):tJ(_,w),hover:(_,w)=>r?.hover?.(_,w,v),leave:(_,w)=>r?.leave?.(_,w,v)})}d=!1,a.hasExtendedAttrs()&&a.extended.urlId?(h=g,c=a.extended.urlId):(h=-1,c=-1)}}e(s)}};xw=hn([Le(0,Cs),Le(1,Ns),Le(2,pM)],xw);function tJ(t,e){if(confirm(`Do you want to navigate to ${e}?

WARNING: This link could potentially be dangerous`)){let n=window.open();if(n){try{n.opener=null}catch{}n.location.href=e}else console.warn("Opening link blocked as opener could not be cleared")}}var Oy=Fn("CharSizeService"),ma=Fn("CoreBrowserService"),Z2=Fn("MouseService"),ga=Fn("RenderService"),nJ=Fn("SelectionService"),mM=Fn("CharacterJoinerService"),Eu=Fn("ThemeService"),gM=Fn("LinkProviderService"),sJ=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(t){setTimeout(()=>{throw t.stack?Y3.isErrorNoTelemetry(t)?new Y3(t.message+`

`+t.stack):new Error(t.message+`

`+t.stack):t},0)}}addListener(t){return this.listeners.push(t),()=>{this._removeListener(t)}}emit(t){this.listeners.forEach(e=>{e(t)})}_removeListener(t){this.listeners.splice(this.listeners.indexOf(t),1)}setUnexpectedErrorHandler(t){this.unexpectedErrorHandler=t}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(t){this.unexpectedErrorHandler(t),this.emit(t)}onUnexpectedExternalError(t){this.unexpectedErrorHandler(t)}},rJ=new sJ;function Qm(t){iJ(t)||rJ.onUnexpectedError(t)}var _w="Canceled";function iJ(t){return t instanceof aJ?!0:t instanceof Error&&t.name===_w&&t.message===_w}var aJ=class extends Error{constructor(){super(_w),this.name=this.message}};function lJ(t){return new Error(`Illegal argument: ${t}`)}var Y3=class ww extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof ww)return e;let n=new ww;return n.message=e.message,n.stack=e.stack,n}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}},Sw=class yM extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,yM.prototype)}};function er(t,e=0){return t[t.length-(1+e)]}var oJ;(t=>{function e(a){return a<0}t.isLessThan=e;function n(a){return a<=0}t.isLessThanOrEqual=n;function s(a){return a>0}t.isGreaterThan=s;function r(a){return a===0}t.isNeitherLessOrGreaterThan=r,t.greaterThan=1,t.lessThan=-1,t.neitherLessOrGreaterThan=0})(oJ||={});function cJ(t,e){let n=this,s=!1,r;return function(){return s||(s=!0,e||(r=t.apply(n,arguments))),r}}var vM;(t=>{function e(B){return B&&typeof B=="object"&&typeof B[Symbol.iterator]=="function"}t.is=e;let n=Object.freeze([]);function s(){return n}t.empty=s;function*r(B){yield B}t.single=r;function a(B){return e(B)?B:r(B)}t.wrap=a;function o(B){return B||n}t.from=o;function*c(B){for(let D=B.length-1;D>=0;D--)yield B[D]}t.reverse=c;function h(B){return!B||B[Symbol.iterator]().next().done===!0}t.isEmpty=h;function d(B){return B[Symbol.iterator]().next().value}t.first=d;function g(B,D){let j=0;for(let P of B)if(D(P,j++))return!0;return!1}t.some=g;function m(B,D){for(let j of B)if(D(j))return j}t.find=m;function*v(B,D){for(let j of B)D(j)&&(yield j)}t.filter=v;function*y(B,D){let j=0;for(let P of B)yield D(P,j++)}t.map=y;function*_(B,D){let j=0;for(let P of B)yield*D(P,j++)}t.flatMap=_;function*w(...B){for(let D of B)yield*D}t.concat=w;function S(B,D,j){let P=j;for(let U of B)P=D(P,U);return P}t.reduce=S;function*k(B,D,j=B.length){for(D<0&&(D+=B.length),j<0?j+=B.length:j>B.length&&(j=B.length);D<j;D++)yield B[D]}t.slice=k;function C(B,D=Number.POSITIVE_INFINITY){let j=[];if(D===0)return[j,B];let P=B[Symbol.iterator]();for(let U=0;U<D;U++){let X=P.next();if(X.done)return[j,t.empty()];j.push(X.value)}return[j,{[Symbol.iterator](){return P}}]}t.consume=C;async function E(B){let D=[];for await(let j of B)D.push(j);return Promise.resolve(D)}t.asyncToArray=E})(vM||={});function yo(t){if(vM.is(t)){let e=[];for(let n of t)if(n)try{n.dispose()}catch(s){e.push(s)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}function uJ(...t){return nn(()=>yo(t))}function nn(t){return{dispose:cJ(()=>{t()})}}var bM=class xM{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{yo(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?xM.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),void 0)}};bM.DISABLE_DISPOSED_WARNING=!1;var al=bM,vt=class{constructor(){this._store=new al,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};vt.None=Object.freeze({dispose(){}});var au=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(t){this._isDisposed||t===this._value||(this._value?.dispose(),this._value=t)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}clearAndLeak(){let t=this._value;return this._value=void 0,t}},ea=typeof window=="object"?window:globalThis,kw=class Cw{constructor(e){this.element=e,this.next=Cw.Undefined,this.prev=Cw.Undefined}};kw.Undefined=new kw(void 0);var an=kw,X3=class{constructor(){this._first=an.Undefined,this._last=an.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===an.Undefined}clear(){let t=this._first;for(;t!==an.Undefined;){let e=t.next;t.prev=an.Undefined,t.next=an.Undefined,t=e}this._first=an.Undefined,this._last=an.Undefined,this._size=0}unshift(t){return this._insert(t,!1)}push(t){return this._insert(t,!0)}_insert(t,e){let n=new an(t);if(this._first===an.Undefined)this._first=n,this._last=n;else if(e){let r=this._last;this._last=n,n.prev=r,r.next=n}else{let r=this._first;this._first=n,n.next=r,r.prev=n}this._size+=1;let s=!1;return()=>{s||(s=!0,this._remove(n))}}shift(){if(this._first!==an.Undefined){let t=this._first.element;return this._remove(this._first),t}}pop(){if(this._last!==an.Undefined){let t=this._last.element;return this._remove(this._last),t}}_remove(t){if(t.prev!==an.Undefined&&t.next!==an.Undefined){let e=t.prev;e.next=t.next,t.next.prev=e}else t.prev===an.Undefined&&t.next===an.Undefined?(this._first=an.Undefined,this._last=an.Undefined):t.next===an.Undefined?(this._last=this._last.prev,this._last.next=an.Undefined):t.prev===an.Undefined&&(this._first=this._first.next,this._first.prev=an.Undefined);this._size-=1}*[Symbol.iterator](){let t=this._first;for(;t!==an.Undefined;)yield t.element,t=t.next}},hJ=globalThis.performance&&typeof globalThis.performance.now=="function",dJ=class _M{static create(e){return new _M(e)}constructor(e){this._now=hJ&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}},ts;(t=>{t.None=()=>vt.None;function e(F,W){return m(F,()=>{},0,void 0,!0,void 0,W)}t.defer=e;function n(F){return(W,Q=null,V)=>{let M=!1,G;return G=F(q=>{if(!M)return G?G.dispose():M=!0,W.call(Q,q)},null,V),M&&G.dispose(),G}}t.once=n;function s(F,W,Q){return d((V,M=null,G)=>F(q=>V.call(M,W(q)),null,G),Q)}t.map=s;function r(F,W,Q){return d((V,M=null,G)=>F(q=>{W(q),V.call(M,q)},null,G),Q)}t.forEach=r;function a(F,W,Q){return d((V,M=null,G)=>F(q=>W(q)&&V.call(M,q),null,G),Q)}t.filter=a;function o(F){return F}t.signal=o;function c(...F){return(W,Q=null,V)=>{let M=uJ(...F.map(G=>G(q=>W.call(Q,q))));return g(M,V)}}t.any=c;function h(F,W,Q,V){let M=Q;return s(F,G=>(M=W(M,G),M),V)}t.reduce=h;function d(F,W){let Q,V={onWillAddFirstListener(){Q=F(M.fire,M)},onDidRemoveLastListener(){Q?.dispose()}},M=new Ee(V);return W?.add(M),M.event}function g(F,W){return W instanceof Array?W.push(F):W&&W.add(F),F}function m(F,W,Q=100,V=!1,M=!1,G,q){let z,O,T,H=0,N,Y={leakWarningThreshold:G,onWillAddFirstListener(){z=F(ee=>{H++,O=W(O,ee),V&&!T&&(oe.fire(O),O=void 0),N=()=>{let de=O;O=void 0,T=void 0,(!V||H>1)&&oe.fire(de),H=0},typeof Q=="number"?(clearTimeout(T),T=setTimeout(N,Q)):T===void 0&&(T=0,queueMicrotask(N))})},onWillRemoveListener(){M&&H>0&&N?.()},onDidRemoveLastListener(){N=void 0,z.dispose()}},oe=new Ee(Y);return q?.add(oe),oe.event}t.debounce=m;function v(F,W=0,Q){return t.debounce(F,(V,M)=>V?(V.push(M),V):[M],W,void 0,!0,void 0,Q)}t.accumulate=v;function y(F,W=(V,M)=>V===M,Q){let V=!0,M;return a(F,G=>{let q=V||!W(G,M);return V=!1,M=G,q},Q)}t.latch=y;function _(F,W,Q){return[t.filter(F,W,Q),t.filter(F,V=>!W(V),Q)]}t.split=_;function w(F,W=!1,Q=[],V){let M=Q.slice(),G=F(O=>{M?M.push(O):z.fire(O)});V&&V.add(G);let q=()=>{M?.forEach(O=>z.fire(O)),M=null},z=new Ee({onWillAddFirstListener(){G||(G=F(O=>z.fire(O)),V&&V.add(G))},onDidAddFirstListener(){M&&(W?setTimeout(q):q())},onDidRemoveLastListener(){G&&G.dispose(),G=null}});return V&&V.add(z),z.event}t.buffer=w;function S(F,W){return(Q,V,M)=>{let G=W(new C);return F(function(q){let z=G.evaluate(q);z!==k&&Q.call(V,z)},void 0,M)}}t.chain=S;let k=Symbol("HaltChainable");class C{constructor(){this.steps=[]}map(W){return this.steps.push(W),this}forEach(W){return this.steps.push(Q=>(W(Q),Q)),this}filter(W){return this.steps.push(Q=>W(Q)?Q:k),this}reduce(W,Q){let V=Q;return this.steps.push(M=>(V=W(V,M),V)),this}latch(W=(Q,V)=>Q===V){let Q=!0,V;return this.steps.push(M=>{let G=Q||!W(M,V);return Q=!1,V=M,G?M:k}),this}evaluate(W){for(let Q of this.steps)if(W=Q(W),W===k)break;return W}}function E(F,W,Q=V=>V){let V=(...z)=>q.fire(Q(...z)),M=()=>F.on(W,V),G=()=>F.removeListener(W,V),q=new Ee({onWillAddFirstListener:M,onDidRemoveLastListener:G});return q.event}t.fromNodeEventEmitter=E;function B(F,W,Q=V=>V){let V=(...z)=>q.fire(Q(...z)),M=()=>F.addEventListener(W,V),G=()=>F.removeEventListener(W,V),q=new Ee({onWillAddFirstListener:M,onDidRemoveLastListener:G});return q.event}t.fromDOMEventEmitter=B;function D(F){return new Promise(W=>n(F)(W))}t.toPromise=D;function j(F){let W=new Ee;return F.then(Q=>{W.fire(Q)},()=>{W.fire(void 0)}).finally(()=>{W.dispose()}),W.event}t.fromPromise=j;function P(F,W){return F(Q=>W.fire(Q))}t.forward=P;function U(F,W,Q){return W(Q),F(V=>W(V))}t.runAndSubscribe=U;class X{constructor(W,Q){this._observable=W,this._counter=0,this._hasChanged=!1;let V={onWillAddFirstListener:()=>{W.addObserver(this)},onDidRemoveLastListener:()=>{W.removeObserver(this)}};this.emitter=new Ee(V),Q&&Q.add(this.emitter)}beginUpdate(W){this._counter++}handlePossibleChange(W){}handleChange(W,Q){this._hasChanged=!0}endUpdate(W){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function $(F,W){return new X(F,W).emitter.event}t.fromObservable=$;function Z(F){return(W,Q,V)=>{let M=0,G=!1,q={beginUpdate(){M++},endUpdate(){M--,M===0&&(F.reportChanges(),G&&(G=!1,W.call(Q)))},handlePossibleChange(){},handleChange(){G=!0}};F.addObserver(q),F.reportChanges();let z={dispose(){F.removeObserver(q)}};return V instanceof al?V.add(z):Array.isArray(V)&&V.push(z),z}}t.fromObservableLight=Z})(ts||={});var Nw=class Aw{constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${Aw._idPool++}`,Aw.all.add(this)}start(e){this._stopWatch=new dJ,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}};Nw.all=new Set,Nw._idPool=0;var fJ=Nw,pJ=-1,wM=class SM{constructor(e,n,s=(SM._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e,this.threshold=n,this.name=s,this._warnCountdown=0}dispose(){this._stacks?.clear()}check(e,n){let s=this.threshold;if(s<=0||n<s)return;this._stacks||(this._stacks=new Map);let r=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,r+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=s*.5;let[a,o]=this.getMostFrequentStack(),c=`[${this.name}] potential listener LEAK detected, having ${n} listeners already. MOST frequent listener (${o}):`;console.warn(c),console.warn(a);let h=new yJ(c,a);this._errorHandler(h)}return()=>{let a=this._stacks.get(e.value)||0;this._stacks.set(e.value,a-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,n=0;for(let[s,r]of this._stacks)(!e||n<r)&&(e=[s,r],n=r);return e}};wM._idPool=1;var mJ=wM,gJ=class kM{constructor(e){this.value=e}static create(){let e=new Error;return new kM(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},yJ=class extends Error{constructor(t,e){super(t),this.name="ListenerLeakError",this.stack=e}},vJ=class extends Error{constructor(t,e){super(t),this.name="ListenerRefusalError",this.stack=e}},bJ=0,Zb=class{constructor(t){this.value=t,this.id=bJ++}},xJ=2,_J,Ee=class{constructor(e){this._size=0,this._options=e,this._leakageMon=this._options?.leakWarningThreshold?new mJ(e?.onListenerError??Qm,this._options?.leakWarningThreshold??pJ):void 0,this._perfMon=this._options?._profName?new fJ(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){this._disposed||(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose())}get event(){return this._event??=(e,n,s)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let c=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(c);let h=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],d=new vJ(`${c}. HINT: Stack shows most frequent listener (${h[1]}-times)`,h[0]);return(this._options?.onListenerError||Qm)(d),vt.None}if(this._disposed)return vt.None;n&&(e=e.bind(n));let r=new Zb(e),a;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(r.stack=gJ.create(),a=this._leakageMon.check(r.stack,this._size+1)),this._listeners?this._listeners instanceof Zb?(this._deliveryQueue??=new wJ,this._listeners=[this._listeners,r]):this._listeners.push(r):(this._options?.onWillAddFirstListener?.(this),this._listeners=r,this._options?.onDidAddFirstListener?.(this)),this._size++;let o=nn(()=>{a?.(),this._removeListener(r)});return s instanceof al?s.add(o):Array.isArray(s)&&s.push(o),o},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let n=this._listeners,s=n.indexOf(e);if(s===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,n[s]=void 0;let r=this._deliveryQueue.current===this;if(this._size*xJ<=n.length){let a=0;for(let o=0;o<n.length;o++)n[o]?n[a++]=n[o]:r&&(this._deliveryQueue.end--,a<this._deliveryQueue.i&&this._deliveryQueue.i--);n.length=a}}_deliver(e,n){if(!e)return;let s=this._options?.onListenerError||Qm;if(!s){e.value(n);return}try{e.value(n)}catch(r){s(r)}}_deliverQueue(e){let n=e.current._listeners;for(;e.i<e.end;)this._deliver(n[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof Zb)this._deliver(this._listeners,e);else{let n=this._deliveryQueue;n.enqueue(this,e,this._listeners.length),this._deliverQueue(n)}this._perfMon?.stop()}hasListeners(){return this._size>0}},wJ=class{constructor(){this.i=-1,this.end=0}enqueue(t,e,n){this.i=0,this.end=n,this.current=t,this.value=e}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},Ew=class{constructor(){this.mapWindowIdToZoomLevel=new Map,this._onDidChangeZoomLevel=new Ee,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this.mapWindowIdToZoomFactor=new Map,this._onDidChangeFullscreen=new Ee,this.onDidChangeFullscreen=this._onDidChangeFullscreen.event,this.mapWindowIdToFullScreen=new Map}getZoomLevel(e){return this.mapWindowIdToZoomLevel.get(this.getWindowId(e))??0}setZoomLevel(e,n){if(this.getZoomLevel(n)===e)return;let s=this.getWindowId(n);this.mapWindowIdToZoomLevel.set(s,e),this._onDidChangeZoomLevel.fire(s)}getZoomFactor(e){return this.mapWindowIdToZoomFactor.get(this.getWindowId(e))??1}setZoomFactor(e,n){this.mapWindowIdToZoomFactor.set(this.getWindowId(n),e)}setFullscreen(e,n){if(this.isFullscreen(n)===e)return;let s=this.getWindowId(n);this.mapWindowIdToFullScreen.set(s,e),this._onDidChangeFullscreen.fire(s)}isFullscreen(e){return!!this.mapWindowIdToFullScreen.get(this.getWindowId(e))}getWindowId(e){return e.vscodeWindowId}};Ew.INSTANCE=new Ew;var ek=Ew;function SJ(t,e,n){typeof e=="string"&&(e=t.matchMedia(e)),e.addEventListener("change",n)}ek.INSTANCE.onDidChangeZoomLevel;function kJ(t){return ek.INSTANCE.getZoomFactor(t)}ek.INSTANCE.onDidChangeFullscreen;var ju=typeof navigator=="object"?navigator.userAgent:"",jw=ju.indexOf("Firefox")>=0,CJ=ju.indexOf("AppleWebKit")>=0,tk=ju.indexOf("Chrome")>=0,NJ=!tk&&ju.indexOf("Safari")>=0;ju.indexOf("Electron/")>=0;ju.indexOf("Android")>=0;var ex=!1;if(typeof ea.matchMedia=="function"){let t=ea.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),e=ea.matchMedia("(display-mode: fullscreen)");ex=t.matches,SJ(ea,t,({matches:n})=>{ex&&e.matches||(ex=n)})}var Mc="en",Tw=!1,Rw=!1,Zm=!1,CM=!1,km,e0=Mc,J3=Mc,AJ,Xi,eo=globalThis,ar;typeof eo.vscode<"u"&&typeof eo.vscode.process<"u"?ar=eo.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(ar=process);var EJ=typeof ar?.versions?.electron=="string",jJ=EJ&&ar?.type==="renderer";if(typeof ar=="object"){Tw=ar.platform==="win32",Rw=ar.platform==="darwin",Zm=ar.platform==="linux",Zm&&ar.env.SNAP&&ar.env.SNAP_REVISION,ar.env.CI||ar.env.BUILD_ARTIFACTSTAGINGDIRECTORY,km=Mc,e0=Mc;let t=ar.env.VSCODE_NLS_CONFIG;if(t)try{let e=JSON.parse(t);km=e.userLocale,J3=e.osLocale,e0=e.resolvedLanguage||Mc,AJ=e.languagePack?.translationsConfigFile}catch{}CM=!0}else typeof navigator=="object"&&!jJ?(Xi=navigator.userAgent,Tw=Xi.indexOf("Windows")>=0,Rw=Xi.indexOf("Macintosh")>=0,(Xi.indexOf("Macintosh")>=0||Xi.indexOf("iPad")>=0||Xi.indexOf("iPhone")>=0)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Zm=Xi.indexOf("Linux")>=0,Xi?.indexOf("Mobi")>=0,e0=globalThis._VSCODE_NLS_LANGUAGE||Mc,km=navigator.language.toLowerCase(),J3=km):console.error("Unable to resolve platform.");var NM=Tw,vi=Rw,TJ=Zm,Q3=CM,_i=Xi,Fa=e0,RJ;(t=>{function e(){return Fa}t.value=e;function n(){return Fa.length===2?Fa==="en":Fa.length>=3?Fa[0]==="e"&&Fa[1]==="n"&&Fa[2]==="-":!1}t.isDefaultVariant=n;function s(){return Fa==="en"}t.isDefault=s})(RJ||={});var OJ=typeof eo.postMessage=="function"&&!eo.importScripts;(()=>{if(OJ){let t=[];eo.addEventListener("message",n=>{if(n.data&&n.data.vscodeScheduleAsyncWork)for(let s=0,r=t.length;s<r;s++){let a=t[s];if(a.id===n.data.vscodeScheduleAsyncWork){t.splice(s,1),a.callback();return}}});let e=0;return n=>{let s=++e;t.push({id:s,callback:n}),eo.postMessage({vscodeScheduleAsyncWork:s},"*")}}return t=>setTimeout(t)})();var BJ=!!(_i&&_i.indexOf("Chrome")>=0);_i&&_i.indexOf("Firefox")>=0;!BJ&&_i&&_i.indexOf("Safari")>=0;_i&&_i.indexOf("Edg/")>=0;_i&&_i.indexOf("Android")>=0;var xc=typeof navigator=="object"?navigator:{};Q3||document.queryCommandSupported&&document.queryCommandSupported("copy")||xc&&xc.clipboard&&xc.clipboard.writeText,Q3||xc&&xc.clipboard&&xc.clipboard.readText;var nk=class{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(t,e){this._keyCodeToStr[t]=e,this._strToKeyCode[e.toLowerCase()]=t}keyCodeToStr(t){return this._keyCodeToStr[t]}strToKeyCode(t){return this._strToKeyCode[t.toLowerCase()]||0}},tx=new nk,Z3=new nk,ej=new nk,MJ=new Array(230),AM;(t=>{function e(c){return tx.keyCodeToStr(c)}t.toString=e;function n(c){return tx.strToKeyCode(c)}t.fromString=n;function s(c){return Z3.keyCodeToStr(c)}t.toUserSettingsUS=s;function r(c){return ej.keyCodeToStr(c)}t.toUserSettingsGeneral=r;function a(c){return Z3.strToKeyCode(c)||ej.strToKeyCode(c)}t.fromUserSettings=a;function o(c){if(c>=98&&c<=113)return null;switch(c){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return tx.keyCodeToStr(c)}t.toElectronAccelerator=o})(AM||={});var DJ=class EM{constructor(e,n,s,r,a){this.ctrlKey=e,this.shiftKey=n,this.altKey=s,this.metaKey=r,this.keyCode=a}equals(e){return e instanceof EM&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}getHashCode(){let e=this.ctrlKey?"1":"0",n=this.shiftKey?"1":"0",s=this.altKey?"1":"0",r=this.metaKey?"1":"0";return`K${e}${n}${s}${r}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new LJ([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},LJ=class{constructor(t){if(t.length===0)throw lJ("chords");this.chords=t}getHashCode(){let t="";for(let e=0,n=this.chords.length;e<n;e++)e!==0&&(t+=";"),t+=this.chords[e].getHashCode();return t}equals(t){if(t===null||this.chords.length!==t.chords.length)return!1;for(let e=0;e<this.chords.length;e++)if(!this.chords[e].equals(t.chords[e]))return!1;return!0}};function IJ(t){if(t.charCode){let n=String.fromCharCode(t.charCode).toUpperCase();return AM.fromString(n)}let e=t.keyCode;if(e===3)return 7;if(jw)switch(e){case 59:return 85;case 60:if(TJ)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(vi)return 57;break}else if(CJ&&(vi&&e===93||!vi&&e===92))return 57;return MJ[e]||0}var PJ=vi?256:2048,zJ=512,$J=1024,HJ=vi?2048:256,tj=class{constructor(t){this._standardKeyboardEventBrand=!0;let e=t;this.browserEvent=e,this.target=e.target,this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,this.altGraphKey=e.getModifierState?.("AltGraph"),this.keyCode=IJ(e),this.code=e.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(t){return this._asKeybinding===t}_computeKeybinding(){let t=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(t=this.keyCode);let e=0;return this.ctrlKey&&(e|=PJ),this.altKey&&(e|=zJ),this.shiftKey&&(e|=$J),this.metaKey&&(e|=HJ),e|=t,e}_computeKeyCodeChord(){let t=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(t=this.keyCode),new DJ(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,t)}},nj=new WeakMap;function UJ(t){if(!t.parent||t.parent===t)return null;try{let e=t.location,n=t.parent.location;if(e.origin!=="null"&&n.origin!=="null"&&e.origin!==n.origin)return null}catch{return null}return t.parent}var VJ=class{static getSameOriginWindowChain(t){let e=nj.get(t);if(!e){e=[],nj.set(t,e);let n=t,s;do s=UJ(n),s?e.push({window:new WeakRef(n),iframeElement:n.frameElement||null}):e.push({window:new WeakRef(n),iframeElement:null}),n=s;while(n)}return e.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(t,e){if(!e||t===e)return{top:0,left:0};let n=0,s=0,r=this.getSameOriginWindowChain(t);for(let a of r){let o=a.window.deref();if(n+=o?.scrollY??0,s+=o?.scrollX??0,o===e||!a.iframeElement)break;let c=a.iframeElement.getBoundingClientRect();n+=c.top,s+=c.left}return{top:n,left:s}}},Cm=class{constructor(t,e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=e.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);let n=VJ.getPositionOfChildWindowRelativeToAncestorWindow(t,e.view);this.posx-=n.left,this.posy-=n.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}},sj=class{constructor(t,e=0,n=0){this.browserEvent=t||null,this.target=t?t.target||t.targetNode||t.srcElement:null,this.deltaY=n,this.deltaX=e;let s=!1;if(tk){let r=navigator.userAgent.match(/Chrome\/(\d+)/);s=(r?parseInt(r[1]):123)<=122}if(t){let r=t,a=t,o=t.view?.devicePixelRatio||1;if(typeof r.wheelDeltaY<"u")s?this.deltaY=r.wheelDeltaY/(120*o):this.deltaY=r.wheelDeltaY/120;else if(typeof a.VERTICAL_AXIS<"u"&&a.axis===a.VERTICAL_AXIS)this.deltaY=-a.detail/3;else if(t.type==="wheel"){let c=t;c.deltaMode===c.DOM_DELTA_LINE?jw&&!vi?this.deltaY=-t.deltaY/3:this.deltaY=-t.deltaY:this.deltaY=-t.deltaY/40}if(typeof r.wheelDeltaX<"u")NJ&&NM?this.deltaX=-(r.wheelDeltaX/120):s?this.deltaX=r.wheelDeltaX/(120*o):this.deltaX=r.wheelDeltaX/120;else if(typeof a.HORIZONTAL_AXIS<"u"&&a.axis===a.HORIZONTAL_AXIS)this.deltaX=-t.detail/3;else if(t.type==="wheel"){let c=t;c.deltaMode===c.DOM_DELTA_LINE?jw&&!vi?this.deltaX=-t.deltaX/3:this.deltaX=-t.deltaX:this.deltaX=-t.deltaX/40}this.deltaY===0&&this.deltaX===0&&t.wheelDelta&&(s?this.deltaY=t.wheelDelta/(120*o):this.deltaY=t.wheelDelta/120)}}preventDefault(){this.browserEvent?.preventDefault()}stopPropagation(){this.browserEvent?.stopPropagation()}},jM=Object.freeze(function(t,e){let n=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(n)}}}),FJ;(t=>{function e(n){return n===t.None||n===t.Cancelled||n instanceof qJ?!0:!n||typeof n!="object"?!1:typeof n.isCancellationRequested=="boolean"&&typeof n.onCancellationRequested=="function"}t.isCancellationToken=e,t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ts.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:jM})})(FJ||={});var qJ=class{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?jM:(this._emitter||(this._emitter=new Ee),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},sk=class{constructor(t,e){this._isDisposed=!1,this._token=-1,typeof t=="function"&&typeof e=="number"&&this.setIfNotSet(t,e)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(t,e){if(this._isDisposed)throw new Sw("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,t()},e)}setIfNotSet(t,e){if(this._isDisposed)throw new Sw("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,t()},e))}},KJ=class{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(t,e,n=globalThis){if(this.isDisposed)throw new Sw("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();let s=n.setInterval(()=>{t()},e);this.disposable=nn(()=>{n.clearInterval(s),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}},WJ;(t=>{async function e(s){let r,a=await Promise.all(s.map(o=>o.then(c=>c,c=>{r||(r=c)})));if(typeof r<"u")throw r;return a}t.settled=e;function n(s){return new Promise(async(r,a)=>{try{await s(r,a)}catch(o){a(o)}})}t.withAsyncBody=n})(WJ||={});var rj=class Ar{static fromArray(e){return new Ar(n=>{n.emitMany(e)})}static fromPromise(e){return new Ar(async n=>{n.emitMany(await e)})}static fromPromises(e){return new Ar(async n=>{await Promise.all(e.map(async s=>n.emitOne(await s)))})}static merge(e){return new Ar(async n=>{await Promise.all(e.map(async s=>{for await(let r of s)n.emitOne(r)}))})}constructor(e,n){this._state=0,this._results=[],this._error=null,this._onReturn=n,this._onStateChanged=new Ee,queueMicrotask(async()=>{let s={emitOne:r=>this.emitOne(r),emitMany:r=>this.emitMany(r),reject:r=>this.reject(r)};try{await Promise.resolve(e(s)),this.resolve()}catch(r){this.reject(r)}finally{s.emitOne=void 0,s.emitMany=void 0,s.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await ts.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>(this._onReturn?.(),{done:!0,value:void 0})}}static map(e,n){return new Ar(async s=>{for await(let r of e)s.emitOne(n(r))})}map(e){return Ar.map(this,e)}static filter(e,n){return new Ar(async s=>{for await(let r of e)n(r)&&s.emitOne(r)})}filter(e){return Ar.filter(this,e)}static coalesce(e){return Ar.filter(e,n=>!!n)}coalesce(){return Ar.coalesce(this)}static async toPromise(e){let n=[];for await(let s of e)n.push(s);return n}toPromise(){return Ar.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};rj.EMPTY=rj.fromArray([]);var{getWindow:mi,getWindowId:GJ,onDidRegisterWindow:YJ}=(function(){let t=new Map,e={window:ea,disposables:new al};t.set(ea.vscodeWindowId,e);let n=new Ee,s=new Ee,r=new Ee;function a(o,c){return(typeof o=="number"?t.get(o):void 0)??(c?e:void 0)}return{onDidRegisterWindow:n.event,onWillUnregisterWindow:r.event,onDidUnregisterWindow:s.event,registerWindow(o){if(t.has(o.vscodeWindowId))return vt.None;let c=new al,h={window:o,disposables:c.add(new al)};return t.set(o.vscodeWindowId,h),c.add(nn(()=>{t.delete(o.vscodeWindowId),s.fire(o)})),c.add(rt(o,$n.BEFORE_UNLOAD,()=>{r.fire(o)})),n.fire(h),c},getWindows(){return t.values()},getWindowsCount(){return t.size},getWindowId(o){return o.vscodeWindowId},hasWindow(o){return t.has(o)},getWindowById:a,getWindow(o){let c=o;if(c?.ownerDocument?.defaultView)return c.ownerDocument.defaultView.window;let h=o;return h?.view?h.view.window:ea},getDocument(o){return mi(o).document}}})(),XJ=class{constructor(t,e,n,s){this._node=t,this._type=e,this._handler=n,this._options=s||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}};function rt(t,e,n,s){return new XJ(t,e,n,s)}var ij=function(t,e,n,s){return rt(t,e,n,s)},rk,JJ=class extends KJ{constructor(t){super(),this.defaultTarget=t&&mi(t)}cancelAndSet(t,e,n){return super.cancelAndSet(t,e,n??this.defaultTarget)}},aj=class{constructor(t,e=0){this._runner=t,this.priority=e,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(t){Qm(t)}}static sort(t,e){return e.priority-t.priority}};(function(){let t=new Map,e=new Map,n=new Map,s=new Map,r=a=>{n.set(a,!1);let o=t.get(a)??[];for(e.set(a,o),t.set(a,[]),s.set(a,!0);o.length>0;)o.sort(aj.sort),o.shift().execute();s.set(a,!1)};rk=(a,o,c=0)=>{let h=GJ(a),d=new aj(o,c),g=t.get(h);return g||(g=[],t.set(h,g)),g.push(d),n.get(h)||(n.set(h,!0),a.requestAnimationFrame(()=>r(h))),d}})();function QJ(t){let e=t.getBoundingClientRect(),n=mi(t);return{left:e.left+n.scrollX,top:e.top+n.scrollY,width:e.width,height:e.height}}var $n={CLICK:"click",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",KEY_DOWN:"keydown",KEY_UP:"keyup",BEFORE_UNLOAD:"beforeunload",CHANGE:"change",FOCUS:"focus",BLUR:"blur",INPUT:"input"},ZJ=class{constructor(t){this.domNode=t,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingTop="",this._paddingLeft="",this._paddingBottom="",this._paddingRight="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(t){let e=Is(t);this._maxWidth!==e&&(this._maxWidth=e,this.domNode.style.maxWidth=this._maxWidth)}setWidth(t){let e=Is(t);this._width!==e&&(this._width=e,this.domNode.style.width=this._width)}setHeight(t){let e=Is(t);this._height!==e&&(this._height=e,this.domNode.style.height=this._height)}setTop(t){let e=Is(t);this._top!==e&&(this._top=e,this.domNode.style.top=this._top)}setLeft(t){let e=Is(t);this._left!==e&&(this._left=e,this.domNode.style.left=this._left)}setBottom(t){let e=Is(t);this._bottom!==e&&(this._bottom=e,this.domNode.style.bottom=this._bottom)}setRight(t){let e=Is(t);this._right!==e&&(this._right=e,this.domNode.style.right=this._right)}setPaddingTop(t){let e=Is(t);this._paddingTop!==e&&(this._paddingTop=e,this.domNode.style.paddingTop=this._paddingTop)}setPaddingLeft(t){let e=Is(t);this._paddingLeft!==e&&(this._paddingLeft=e,this.domNode.style.paddingLeft=this._paddingLeft)}setPaddingBottom(t){let e=Is(t);this._paddingBottom!==e&&(this._paddingBottom=e,this.domNode.style.paddingBottom=this._paddingBottom)}setPaddingRight(t){let e=Is(t);this._paddingRight!==e&&(this._paddingRight=e,this.domNode.style.paddingRight=this._paddingRight)}setFontFamily(t){this._fontFamily!==t&&(this._fontFamily=t,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(t){let e=Is(t);this._fontSize!==e&&(this._fontSize=e,this.domNode.style.fontSize=this._fontSize)}setFontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(t){this._fontFeatureSettings!==t&&(this._fontFeatureSettings=t,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(t){this._fontVariationSettings!==t&&(this._fontVariationSettings=t,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(t){this._textDecoration!==t&&(this._textDecoration=t,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(t){let e=Is(t);this._lineHeight!==e&&(this._lineHeight=e,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(t){let e=Is(t);this._letterSpacing!==e&&(this._letterSpacing=e,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(t){this._className!==t&&(this._className=t,this.domNode.className=this._className)}toggleClassName(t,e){this.domNode.classList.toggle(t,e),this._className=this.domNode.className}setDisplay(t){this._display!==t&&(this._display=t,this.domNode.style.display=this._display)}setPosition(t){this._position!==t&&(this._position=t,this.domNode.style.position=this._position)}setVisibility(t){this._visibility!==t&&(this._visibility=t,this.domNode.style.visibility=this._visibility)}setColor(t){this._color!==t&&(this._color=t,this.domNode.style.color=this._color)}setBackgroundColor(t){this._backgroundColor!==t&&(this._backgroundColor=t,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(t){this._layerHint!==t&&(this._layerHint=t,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(t){this._boxShadow!==t&&(this._boxShadow=t,this.domNode.style.boxShadow=t)}setContain(t){this._contain!==t&&(this._contain=t,this.domNode.style.contain=this._contain)}setAttribute(t,e){this.domNode.setAttribute(t,e)}removeAttribute(t){this.domNode.removeAttribute(t)}appendChild(t){this.domNode.appendChild(t.domNode)}removeChild(t){this.domNode.removeChild(t.domNode)}};function Is(t){return typeof t=="number"?`${t}px`:t}function Pd(t){return new ZJ(t)}var TM=class{constructor(){this._hooks=new al,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(t,e){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let n=this._onStopCallback;this._onStopCallback=null,t&&n&&n(e)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(t,e,n,s,r){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=s,this._onStopCallback=r;let a=t;try{t.setPointerCapture(e),this._hooks.add(nn(()=>{try{t.releasePointerCapture(e)}catch{}}))}catch{a=mi(t)}this._hooks.add(rt(a,$n.POINTER_MOVE,o=>{if(o.buttons!==n){this.stopMonitoring(!0);return}o.preventDefault(),this._pointerMoveCallback(o)})),this._hooks.add(rt(a,$n.POINTER_UP,o=>this.stopMonitoring(!0)))}};function eQ(t,e,n){let s=null,r=null;if(typeof n.value=="function"?(s="value",r=n.value,r.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof n.get=="function"&&(s="get",r=n.get),!r)throw new Error("not supported");let a=`$memoize$${e}`;n[s]=function(...o){return this.hasOwnProperty(a)||Object.defineProperty(this,a,{configurable:!1,enumerable:!1,writable:!1,value:r.apply(this,o)}),this[a]}}var ui;(t=>(t.Tap="-xterm-gesturetap",t.Change="-xterm-gesturechange",t.Start="-xterm-gesturestart",t.End="-xterm-gesturesend",t.Contextmenu="-xterm-gesturecontextmenu"))(ui||={});var md=class cs extends vt{constructor(){super(),this.dispatched=!1,this.targets=new X3,this.ignoreTargets=new X3,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(ts.runAndSubscribe(YJ,({window:e,disposables:n})=>{n.add(rt(e.document,"touchstart",s=>this.onTouchStart(s),{passive:!1})),n.add(rt(e.document,"touchend",s=>this.onTouchEnd(e,s))),n.add(rt(e.document,"touchmove",s=>this.onTouchMove(s),{passive:!1}))},{window:ea,disposables:this._store}))}static addTarget(e){if(!cs.isTouchDevice())return vt.None;cs.INSTANCE||(cs.INSTANCE=new cs);let n=cs.INSTANCE.targets.push(e);return nn(n)}static ignoreTarget(e){if(!cs.isTouchDevice())return vt.None;cs.INSTANCE||(cs.INSTANCE=new cs);let n=cs.INSTANCE.ignoreTargets.push(e);return nn(n)}static isTouchDevice(){return"ontouchstart"in ea||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){let n=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let s=0,r=e.targetTouches.length;s<r;s++){let a=e.targetTouches.item(s);this.activeTouches[a.identifier]={id:a.identifier,initialTarget:a.target,initialTimeStamp:n,initialPageX:a.pageX,initialPageY:a.pageY,rollingTimestamps:[n],rollingPageX:[a.pageX],rollingPageY:[a.pageY]};let o=this.newGestureEvent(ui.Start,a.target);o.pageX=a.pageX,o.pageY=a.pageY,this.dispatchEvent(o)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e,n){let s=Date.now(),r=Object.keys(this.activeTouches).length;for(let a=0,o=n.changedTouches.length;a<o;a++){let c=n.changedTouches.item(a);if(!this.activeTouches.hasOwnProperty(String(c.identifier))){console.warn("move of an UNKNOWN touch",c);continue}let h=this.activeTouches[c.identifier],d=Date.now()-h.initialTimeStamp;if(d<cs.HOLD_DELAY&&Math.abs(h.initialPageX-er(h.rollingPageX))<30&&Math.abs(h.initialPageY-er(h.rollingPageY))<30){let g=this.newGestureEvent(ui.Tap,h.initialTarget);g.pageX=er(h.rollingPageX),g.pageY=er(h.rollingPageY),this.dispatchEvent(g)}else if(d>=cs.HOLD_DELAY&&Math.abs(h.initialPageX-er(h.rollingPageX))<30&&Math.abs(h.initialPageY-er(h.rollingPageY))<30){let g=this.newGestureEvent(ui.Contextmenu,h.initialTarget);g.pageX=er(h.rollingPageX),g.pageY=er(h.rollingPageY),this.dispatchEvent(g)}else if(r===1){let g=er(h.rollingPageX),m=er(h.rollingPageY),v=er(h.rollingTimestamps)-h.rollingTimestamps[0],y=g-h.rollingPageX[0],_=m-h.rollingPageY[0],w=[...this.targets].filter(S=>h.initialTarget instanceof Node&&S.contains(h.initialTarget));this.inertia(e,w,s,Math.abs(y)/v,y>0?1:-1,g,Math.abs(_)/v,_>0?1:-1,m)}this.dispatchEvent(this.newGestureEvent(ui.End,h.initialTarget)),delete this.activeTouches[c.identifier]}this.dispatched&&(n.preventDefault(),n.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,n){let s=document.createEvent("CustomEvent");return s.initEvent(e,!1,!0),s.initialTarget=n,s.tapCount=0,s}dispatchEvent(e){if(e.type===ui.Tap){let n=new Date().getTime(),s=0;n-this._lastSetTapCountTime>cs.CLEAR_TAP_COUNT_TIME?s=1:s=2,this._lastSetTapCountTime=n,e.tapCount=s}else(e.type===ui.Change||e.type===ui.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(let s of this.ignoreTargets)if(s.contains(e.initialTarget))return;let n=[];for(let s of this.targets)if(s.contains(e.initialTarget)){let r=0,a=e.initialTarget;for(;a&&a!==s;)r++,a=a.parentElement;n.push([r,s])}n.sort((s,r)=>s[0]-r[0]);for(let[s,r]of n)r.dispatchEvent(e),this.dispatched=!0}}inertia(e,n,s,r,a,o,c,h,d){this.handle=rk(e,()=>{let g=Date.now(),m=g-s,v=0,y=0,_=!0;r+=cs.SCROLL_FRICTION*m,c+=cs.SCROLL_FRICTION*m,r>0&&(_=!1,v=a*r*m),c>0&&(_=!1,y=h*c*m);let w=this.newGestureEvent(ui.Change);w.translationX=v,w.translationY=y,n.forEach(S=>S.dispatchEvent(w)),_||this.inertia(e,n,g,r,a,o+v,c,h,d+y)})}onTouchMove(e){let n=Date.now();for(let s=0,r=e.changedTouches.length;s<r;s++){let a=e.changedTouches.item(s);if(!this.activeTouches.hasOwnProperty(String(a.identifier))){console.warn("end of an UNKNOWN touch",a);continue}let o=this.activeTouches[a.identifier],c=this.newGestureEvent(ui.Change,o.initialTarget);c.translationX=a.pageX-er(o.rollingPageX),c.translationY=a.pageY-er(o.rollingPageY),c.pageX=a.pageX,c.pageY=a.pageY,this.dispatchEvent(c),o.rollingPageX.length>3&&(o.rollingPageX.shift(),o.rollingPageY.shift(),o.rollingTimestamps.shift()),o.rollingPageX.push(a.pageX),o.rollingPageY.push(a.pageY),o.rollingTimestamps.push(n)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}};md.SCROLL_FRICTION=-.005,md.HOLD_DELAY=700,md.CLEAR_TAP_COUNT_TIME=400,hn([eQ],md,"isTouchDevice",1);var tQ=md,ik=class extends vt{onclick(t,e){this._register(rt(t,$n.CLICK,n=>e(new Cm(mi(t),n))))}onmousedown(t,e){this._register(rt(t,$n.MOUSE_DOWN,n=>e(new Cm(mi(t),n))))}onmouseover(t,e){this._register(rt(t,$n.MOUSE_OVER,n=>e(new Cm(mi(t),n))))}onmouseleave(t,e){this._register(rt(t,$n.MOUSE_LEAVE,n=>e(new Cm(mi(t),n))))}onkeydown(t,e){this._register(rt(t,$n.KEY_DOWN,n=>e(new tj(n))))}onkeyup(t,e){this._register(rt(t,$n.KEY_UP,n=>e(new tj(n))))}oninput(t,e){this._register(rt(t,$n.INPUT,e))}onblur(t,e){this._register(rt(t,$n.BLUR,e))}onfocus(t,e){this._register(rt(t,$n.FOCUS,e))}onchange(t,e){this._register(rt(t,$n.CHANGE,e))}ignoreGesture(t){return tQ.ignoreTarget(t)}},lj=11,nQ=class extends ik{constructor(t){super(),this._onActivate=t.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=t.bgWidth+"px",this.bgDomNode.style.height=t.bgHeight+"px",typeof t.top<"u"&&(this.bgDomNode.style.top="0px"),typeof t.left<"u"&&(this.bgDomNode.style.left="0px"),typeof t.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof t.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=t.className,this.domNode.style.position="absolute",this.domNode.style.width=lj+"px",this.domNode.style.height=lj+"px",typeof t.top<"u"&&(this.domNode.style.top=t.top+"px"),typeof t.left<"u"&&(this.domNode.style.left=t.left+"px"),typeof t.bottom<"u"&&(this.domNode.style.bottom=t.bottom+"px"),typeof t.right<"u"&&(this.domNode.style.right=t.right+"px"),this._pointerMoveMonitor=this._register(new TM),this._register(ij(this.bgDomNode,$n.POINTER_DOWN,e=>this._arrowPointerDown(e))),this._register(ij(this.domNode,$n.POINTER_DOWN,e=>this._arrowPointerDown(e))),this._pointerdownRepeatTimer=this._register(new JJ),this._pointerdownScheduleRepeatTimer=this._register(new sk)}_arrowPointerDown(t){if(!t.target||!(t.target instanceof Element))return;let e=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,mi(t))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(e,200),this._pointerMoveMonitor.startMonitoring(t.target,t.pointerId,t.buttons,n=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),t.preventDefault()}},sQ=class Ow{constructor(e,n,s,r,a,o,c){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(n=n|0,s=s|0,r=r|0,a=a|0,o=o|0,c=c|0),this.rawScrollLeft=r,this.rawScrollTop=c,n<0&&(n=0),r+n>s&&(r=s-n),r<0&&(r=0),a<0&&(a=0),c+a>o&&(c=o-a),c<0&&(c=0),this.width=n,this.scrollWidth=s,this.scrollLeft=r,this.height=a,this.scrollHeight=o,this.scrollTop=c}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,n){return new Ow(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,n?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,n?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new Ow(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,n){let s=this.width!==e.width,r=this.scrollWidth!==e.scrollWidth,a=this.scrollLeft!==e.scrollLeft,o=this.height!==e.height,c=this.scrollHeight!==e.scrollHeight,h=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:n,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:s,scrollWidthChanged:r,scrollLeftChanged:a,heightChanged:o,scrollHeightChanged:c,scrollTopChanged:h}}},rQ=class extends vt{constructor(t){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new Ee),this.onScroll=this._onScroll.event,this._smoothScrollDuration=t.smoothScrollDuration,this._scheduleAtNextAnimationFrame=t.scheduleAtNextAnimationFrame,this._state=new sQ(t.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(t){this._smoothScrollDuration=t}validateScrollPosition(t){return this._state.withScrollPosition(t)}getScrollDimensions(){return this._state}setScrollDimensions(t,e){let n=this._state.withScrollDimensions(t,e);this._setState(n,!!this._smoothScrolling),this._smoothScrolling?.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(t){let e=this._state.withScrollPosition(t);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(e,!1)}setScrollPositionSmooth(t,e){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(t);if(this._smoothScrolling){t={scrollLeft:typeof t.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:t.scrollLeft,scrollTop:typeof t.scrollTop>"u"?this._smoothScrolling.to.scrollTop:t.scrollTop};let n=this._state.withScrollPosition(t);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let s;e?s=new cj(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):s=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=s}else{let n=this._state.withScrollPosition(t);this._smoothScrolling=cj.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;let t=this._smoothScrolling.tick(),e=this._state.withScrollPosition(t);if(this._setState(e,!0),!!this._smoothScrolling){if(t.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(t,e){let n=this._state;n.equals(t)||(this._state=t,this._onScroll.fire(this._state.createScrollEvent(n,e)))}},oj=class{constructor(t,e,n){this.scrollLeft=t,this.scrollTop=e,this.isDone=n}};function nx(t,e){let n=e-t;return function(s){return t+n*lQ(s)}}function iQ(t,e,n){return function(s){return s<n?t(s/n):e((s-n)/(1-n))}}var cj=class Bw{constructor(e,n,s,r){this.from=e,this.to=n,this.duration=r,this.startTime=s,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,n,s){if(Math.abs(e-n)>2.5*s){let r,a;return e<n?(r=e+.75*s,a=n-.75*s):(r=e-.75*s,a=n+.75*s),iQ(nx(e,r),nx(a,n),.33)}return nx(e,n)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){let n=(e-this.startTime)/this.duration;if(n<1){let s=this.scrollLeft(n),r=this.scrollTop(n);return new oj(s,r,!1)}return new oj(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,n,s){return Bw.start(e,n,s)}static start(e,n,s){s=s+10;let r=Date.now()-10;return new Bw(e,n,r,s)}};function aQ(t){return Math.pow(t,3)}function lQ(t){return 1-aQ(1-t)}var oQ=class extends vt{constructor(t,e,n){super(),this._visibility=t,this._visibleClassName=e,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new sk)}setVisibility(t){this._visibility!==t&&(this._visibility=t,this._updateShouldBeVisible())}setShouldBeVisible(t){this._rawShouldBeVisible=t,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){let t=this._applyVisibilitySetting();this._shouldBeVisible!==t&&(this._shouldBeVisible=t,this.ensureVisibility())}setIsNeeded(t){this._isNeeded!==t&&(this._isNeeded=t,this.ensureVisibility())}setDomNode(t){this._domNode=t,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode?.setClassName(this._visibleClassName)},0))}_hide(t){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode?.setClassName(this._invisibleClassName+(t?" fade":"")))}},cQ=140,RM=class extends ik{constructor(t){super(),this._lazyRender=t.lazyRender,this._host=t.host,this._scrollable=t.scrollable,this._scrollByPage=t.scrollByPage,this._scrollbarState=t.scrollbarState,this._visibilityController=this._register(new oQ(t.visibility,"visible scrollbar "+t.extraScrollbarClassName,"invisible scrollbar "+t.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new TM),this._shouldRender=!0,this.domNode=Pd(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(rt(this.domNode.domNode,$n.POINTER_DOWN,e=>this._domNodePointerDown(e)))}_createArrow(t){let e=this._register(new nQ(t));this.domNode.domNode.appendChild(e.bgDomNode),this.domNode.domNode.appendChild(e.domNode)}_createSlider(t,e,n,s){this.slider=Pd(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(t),this.slider.setLeft(e),typeof n=="number"&&this.slider.setWidth(n),typeof s=="number"&&this.slider.setHeight(s),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(rt(this.slider.domNode,$n.POINTER_DOWN,r=>{r.button===0&&(r.preventDefault(),this._sliderPointerDown(r))})),this.onclick(this.slider.domNode,r=>{r.leftButton&&r.stopPropagation()})}_onElementSize(t){return this._scrollbarState.setVisibleSize(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(t){return this._scrollbarState.setScrollSize(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(t){return this._scrollbarState.setScrollPosition(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(t){t.target===this.domNode.domNode&&this._onPointerDown(t)}delegatePointerDown(t){let e=this.domNode.domNode.getClientRects()[0].top,n=e+this._scrollbarState.getSliderPosition(),s=e+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),r=this._sliderPointerPosition(t);n<=r&&r<=s?t.button===0&&(t.preventDefault(),this._sliderPointerDown(t)):this._onPointerDown(t)}_onPointerDown(t){let e,n;if(t.target===this.domNode.domNode&&typeof t.offsetX=="number"&&typeof t.offsetY=="number")e=t.offsetX,n=t.offsetY;else{let r=QJ(this.domNode.domNode);e=t.pageX-r.left,n=t.pageY-r.top}let s=this._pointerDownRelativePosition(e,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(s):this._scrollbarState.getDesiredScrollPositionFromOffset(s)),t.button===0&&(t.preventDefault(),this._sliderPointerDown(t))}_sliderPointerDown(t){if(!t.target||!(t.target instanceof Element))return;let e=this._sliderPointerPosition(t),n=this._sliderOrthogonalPointerPosition(t),s=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(t.target,t.pointerId,t.buttons,r=>{let a=this._sliderOrthogonalPointerPosition(r),o=Math.abs(a-n);if(NM&&o>cQ){this._setDesiredScrollPositionNow(s.getScrollPosition());return}let c=this._sliderPointerPosition(r)-e;this._setDesiredScrollPositionNow(s.getDesiredScrollPositionFromDelta(c))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(t){let e={};this.writeScrollPosition(e,t),this._scrollable.setScrollPositionNow(e)}updateScrollbarSize(t){this._updateScrollbarSize(t),this._scrollbarState.setScrollbarSize(t),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}},OM=class Mw{constructor(e,n,s,r,a,o){this._scrollbarSize=Math.round(n),this._oppositeScrollbarSize=Math.round(s),this._arrowSize=Math.round(e),this._visibleSize=r,this._scrollSize=a,this._scrollPosition=o,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new Mw(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){let n=Math.round(e);return this._visibleSize!==n?(this._visibleSize=n,this._refreshComputedValues(),!0):!1}setScrollSize(e){let n=Math.round(e);return this._scrollSize!==n?(this._scrollSize=n,this._refreshComputedValues(),!0):!1}setScrollPosition(e){let n=Math.round(e);return this._scrollPosition!==n?(this._scrollPosition=n,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,n,s,r,a){let o=Math.max(0,s-e),c=Math.max(0,o-2*n),h=r>0&&r>s;if(!h)return{computedAvailableSize:Math.round(o),computedIsNeeded:h,computedSliderSize:Math.round(c),computedSliderRatio:0,computedSliderPosition:0};let d=Math.round(Math.max(20,Math.floor(s*c/r))),g=(c-d)/(r-s),m=a*g;return{computedAvailableSize:Math.round(o),computedIsNeeded:h,computedSliderSize:Math.round(d),computedSliderRatio:g,computedSliderPosition:Math.round(m)}}_refreshComputedValues(){let e=Mw._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;let n=e-this._arrowSize-this._computedSliderSize/2;return Math.round(n/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;let n=e-this._arrowSize,s=this._scrollPosition;return n<this._computedSliderPosition?s-=this._visibleSize:s+=this._visibleSize,s}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;let n=this._computedSliderPosition+e;return Math.round(n/this._computedSliderRatio)}},uQ=class extends RM{constructor(t,e,n){let s=t.getScrollDimensions(),r=t.getCurrentScrollPosition();if(super({lazyRender:e.lazyRender,host:n,scrollbarState:new OM(e.horizontalHasArrows?e.arrowSize:0,e.horizontal===2?0:e.horizontalScrollbarSize,e.vertical===2?0:e.verticalScrollbarSize,s.width,s.scrollWidth,r.scrollLeft),visibility:e.horizontal,extraScrollbarClassName:"horizontal",scrollable:t,scrollByPage:e.scrollByPage}),e.horizontalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(Math.floor((e.horizontalScrollbarSize-e.horizontalSliderSize)/2),0,void 0,e.horizontalSliderSize)}_updateSlider(t,e){this.slider.setWidth(t),this.slider.setLeft(e)}_renderDomNode(t,e){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(t){return this._shouldRender=this._onElementScrollSize(t.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(t.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(t.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(t,e){return t}_sliderPointerPosition(t){return t.pageX}_sliderOrthogonalPointerPosition(t){return t.pageY}_updateScrollbarSize(t){this.slider.setHeight(t)}writeScrollPosition(t,e){t.scrollLeft=e}updateOptions(t){this.updateScrollbarSize(t.horizontal===2?0:t.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(t.vertical===2?0:t.verticalScrollbarSize),this._visibilityController.setVisibility(t.horizontal),this._scrollByPage=t.scrollByPage}},hQ=class extends RM{constructor(t,e,n){let s=t.getScrollDimensions(),r=t.getCurrentScrollPosition();if(super({lazyRender:e.lazyRender,host:n,scrollbarState:new OM(e.verticalHasArrows?e.arrowSize:0,e.vertical===2?0:e.verticalScrollbarSize,0,s.height,s.scrollHeight,r.scrollTop),visibility:e.vertical,extraScrollbarClassName:"vertical",scrollable:t,scrollByPage:e.scrollByPage}),e.verticalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(0,Math.floor((e.verticalScrollbarSize-e.verticalSliderSize)/2),e.verticalSliderSize,void 0)}_updateSlider(t,e){this.slider.setHeight(t),this.slider.setTop(e)}_renderDomNode(t,e){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(t){return this._shouldRender=this._onElementScrollSize(t.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(t.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(t.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(t,e){return e}_sliderPointerPosition(t){return t.pageY}_sliderOrthogonalPointerPosition(t){return t.pageX}_updateScrollbarSize(t){this.slider.setWidth(t)}writeScrollPosition(t,e){t.scrollTop=e}updateOptions(t){this.updateScrollbarSize(t.vertical===2?0:t.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(t.vertical),this._scrollByPage=t.scrollByPage}},dQ=500,uj=50,fQ=class{constructor(t,e,n){this.timestamp=t,this.deltaX=e,this.deltaY=n,this.score=0}},Dw=class{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,n=0,s=1,r=this._rear;do{let a=r===this._front?e:Math.pow(2,-s);if(e-=a,n+=this._memory[r].score*a,r===this._front)break;r=(this._capacity+r-1)%this._capacity,s++}while(!0);return n<=.5}acceptStandardWheelEvent(e){if(tk){let n=mi(e.browserEvent),s=kJ(n);this.accept(Date.now(),e.deltaX*s,e.deltaY*s)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,n,s){let r=null,a=new fQ(e,n,s);this._front===-1&&this._rear===-1?(this._memory[0]=a,this._front=0,this._rear=0):(r=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=a),a.score=this._computeScore(a,r)}_computeScore(e,n){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let s=.5;if((!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(s+=.25),n){let r=Math.abs(e.deltaX),a=Math.abs(e.deltaY),o=Math.abs(n.deltaX),c=Math.abs(n.deltaY),h=Math.max(Math.min(r,o),1),d=Math.max(Math.min(a,c),1),g=Math.max(r,o),m=Math.max(a,c);g%h===0&&m%d===0&&(s-=.5)}return Math.min(Math.max(s,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}};Dw.INSTANCE=new Dw;var pQ=Dw,mQ=class extends ik{constructor(t,e,n){super(),this._onScroll=this._register(new Ee),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new Ee),this.onWillScroll=this._onWillScroll.event,this._options=yQ(e),this._scrollable=n,this._register(this._scrollable.onScroll(r=>{this._onWillScroll.fire(r),this._onDidScroll(r),this._onScroll.fire(r)}));let s={onMouseWheel:r=>this._onMouseWheel(r),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new hQ(this._scrollable,this._options,s)),this._horizontalScrollbar=this._register(new uQ(this._scrollable,this._options,s)),this._domNode=document.createElement("div"),this._domNode.className="xterm-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.appendChild(t),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=Pd(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=Pd(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=Pd(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,r=>this._onMouseOver(r)),this.onmouseleave(this._listenOnDomNode,r=>this._onMouseLeave(r)),this._hideTimeout=this._register(new sk),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}get options(){return this._options}dispose(){this._mouseWheelToDispose=yo(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(t){this._verticalScrollbar.delegatePointerDown(t)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(t){this._scrollable.setScrollDimensions(t,!1)}updateClassName(t){this._options.className=t,vi&&(this._options.className+=" mac"),this._domNode.className="xterm-scrollable-element "+this._options.className}updateOptions(t){typeof t.handleMouseWheel<"u"&&(this._options.handleMouseWheel=t.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof t.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=t.mouseWheelScrollSensitivity),typeof t.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=t.fastScrollSensitivity),typeof t.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=t.scrollPredominantAxis),typeof t.horizontal<"u"&&(this._options.horizontal=t.horizontal),typeof t.vertical<"u"&&(this._options.vertical=t.vertical),typeof t.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=t.horizontalScrollbarSize),typeof t.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=t.verticalScrollbarSize),typeof t.scrollByPage<"u"&&(this._options.scrollByPage=t.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}setRevealOnScroll(t){this._revealOnScroll=t}delegateScrollFromMouseWheelEvent(t){this._onMouseWheel(new sj(t))}_setListeningToMouseWheel(t){if(this._mouseWheelToDispose.length>0!==t&&(this._mouseWheelToDispose=yo(this._mouseWheelToDispose),t)){let e=n=>{this._onMouseWheel(new sj(n))};this._mouseWheelToDispose.push(rt(this._listenOnDomNode,$n.MOUSE_WHEEL,e,{passive:!1}))}}_onMouseWheel(t){if(t.browserEvent?.defaultPrevented)return;let e=pQ.INSTANCE;e.acceptStandardWheelEvent(t);let n=!1;if(t.deltaY||t.deltaX){let r=t.deltaY*this._options.mouseWheelScrollSensitivity,a=t.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&a+r===0?a=r=0:Math.abs(r)>=Math.abs(a)?a=0:r=0),this._options.flipAxes&&([r,a]=[a,r]);let o=!vi&&t.browserEvent&&t.browserEvent.shiftKey;(this._options.scrollYToX||o)&&!a&&(a=r,r=0),t.browserEvent&&t.browserEvent.altKey&&(a=a*this._options.fastScrollSensitivity,r=r*this._options.fastScrollSensitivity);let c=this._scrollable.getFutureScrollPosition(),h={};if(r){let d=uj*r,g=c.scrollTop-(d<0?Math.floor(d):Math.ceil(d));this._verticalScrollbar.writeScrollPosition(h,g)}if(a){let d=uj*a,g=c.scrollLeft-(d<0?Math.floor(d):Math.ceil(d));this._horizontalScrollbar.writeScrollPosition(h,g)}h=this._scrollable.validateScrollPosition(h),(c.scrollLeft!==h.scrollLeft||c.scrollTop!==h.scrollTop)&&(this._options.mouseWheelSmoothScroll&&e.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(h):this._scrollable.setScrollPositionNow(h),n=!0)}let s=n;!s&&this._options.alwaysConsumeMouseWheel&&(s=!0),!s&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(s=!0),s&&(t.preventDefault(),t.stopPropagation())}_onDidScroll(t){this._shouldRender=this._horizontalScrollbar.onDidScroll(t)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(t)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let t=this._scrollable.getCurrentScrollPosition(),e=t.scrollTop>0,n=t.scrollLeft>0,s=n?" left":"",r=e?" top":"",a=n||e?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${s}`),this._topShadowDomNode.setClassName(`shadow${r}`),this._topLeftShadowDomNode.setClassName(`shadow${a}${r}${s}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(t){this._mouseIsOver=!1,this._hide()}_onMouseOver(t){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),dQ)}},gQ=class extends mQ{constructor(t,e,n){super(t,e,n)}setScrollPosition(t){t.reuseAnimation?this._scrollable.setScrollPositionSmooth(t,t.reuseAnimation):this._scrollable.setScrollPositionNow(t)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}};function yQ(t){let e={lazyRender:typeof t.lazyRender<"u"?t.lazyRender:!1,className:typeof t.className<"u"?t.className:"",useShadows:typeof t.useShadows<"u"?t.useShadows:!0,handleMouseWheel:typeof t.handleMouseWheel<"u"?t.handleMouseWheel:!0,flipAxes:typeof t.flipAxes<"u"?t.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof t.consumeMouseWheelIfScrollbarIsNeeded<"u"?t.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof t.alwaysConsumeMouseWheel<"u"?t.alwaysConsumeMouseWheel:!1,scrollYToX:typeof t.scrollYToX<"u"?t.scrollYToX:!1,mouseWheelScrollSensitivity:typeof t.mouseWheelScrollSensitivity<"u"?t.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof t.fastScrollSensitivity<"u"?t.fastScrollSensitivity:5,scrollPredominantAxis:typeof t.scrollPredominantAxis<"u"?t.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof t.mouseWheelSmoothScroll<"u"?t.mouseWheelSmoothScroll:!0,arrowSize:typeof t.arrowSize<"u"?t.arrowSize:11,listenOnDomNode:typeof t.listenOnDomNode<"u"?t.listenOnDomNode:null,horizontal:typeof t.horizontal<"u"?t.horizontal:1,horizontalScrollbarSize:typeof t.horizontalScrollbarSize<"u"?t.horizontalScrollbarSize:10,horizontalSliderSize:typeof t.horizontalSliderSize<"u"?t.horizontalSliderSize:0,horizontalHasArrows:typeof t.horizontalHasArrows<"u"?t.horizontalHasArrows:!1,vertical:typeof t.vertical<"u"?t.vertical:1,verticalScrollbarSize:typeof t.verticalScrollbarSize<"u"?t.verticalScrollbarSize:10,verticalHasArrows:typeof t.verticalHasArrows<"u"?t.verticalHasArrows:!1,verticalSliderSize:typeof t.verticalSliderSize<"u"?t.verticalSliderSize:0,scrollByPage:typeof t.scrollByPage<"u"?t.scrollByPage:!1};return e.horizontalSliderSize=typeof t.horizontalSliderSize<"u"?t.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof t.verticalSliderSize<"u"?t.verticalSliderSize:e.verticalScrollbarSize,vi&&(e.className+=" mac"),e}var Lw=class extends vt{constructor(t,e,n,s,r,a,o,c){super(),this._bufferService=n,this._optionsService=o,this._renderService=c,this._onRequestScrollLines=this._register(new Ee),this.onRequestScrollLines=this._onRequestScrollLines.event,this._isSyncing=!1,this._isHandlingScroll=!1,this._suppressOnScrollHandler=!1;let h=this._register(new rQ({forceIntegerValues:!1,smoothScrollDuration:this._optionsService.rawOptions.smoothScrollDuration,scheduleAtNextAnimationFrame:d=>rk(s.window,d)}));this._register(this._optionsService.onSpecificOptionChange("smoothScrollDuration",()=>{h.setSmoothScrollDuration(this._optionsService.rawOptions.smoothScrollDuration)})),this._scrollableElement=this._register(new gQ(e,{vertical:1,horizontal:2,useShadows:!1,mouseWheelSmoothScroll:!0,...this._getChangeOptions()},h)),this._register(this._optionsService.onMultipleOptionChange(["scrollSensitivity","fastScrollSensitivity","overviewRuler"],()=>this._scrollableElement.updateOptions(this._getChangeOptions()))),this._register(r.onProtocolChange(d=>{this._scrollableElement.updateOptions({handleMouseWheel:!(d&16)})})),this._scrollableElement.setScrollDimensions({height:0,scrollHeight:0}),this._register(ts.runAndSubscribe(a.onChangeColors,()=>{this._scrollableElement.getDomNode().style.backgroundColor=a.colors.background.css})),t.appendChild(this._scrollableElement.getDomNode()),this._register(nn(()=>this._scrollableElement.getDomNode().remove())),this._styleElement=s.mainDocument.createElement("style"),e.appendChild(this._styleElement),this._register(nn(()=>this._styleElement.remove())),this._register(ts.runAndSubscribe(a.onChangeColors,()=>{this._styleElement.textContent=[".xterm .xterm-scrollable-element > .scrollbar > .slider {",`  background: ${a.colors.scrollbarSliderBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider:hover {",`  background: ${a.colors.scrollbarSliderHoverBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider.active {",`  background: ${a.colors.scrollbarSliderActiveBackground.css};`,"}"].join(`
`)})),this._register(this._bufferService.onResize(()=>this.queueSync())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._latestYDisp=void 0,this.queueSync()})),this._register(this._bufferService.onScroll(()=>this._sync())),this._register(this._scrollableElement.onScroll(d=>this._handleScroll(d)))}scrollLines(t){let e=this._scrollableElement.getScrollPosition();this._scrollableElement.setScrollPosition({reuseAnimation:!0,scrollTop:e.scrollTop+t*this._renderService.dimensions.css.cell.height})}scrollToLine(t,e){e&&(this._latestYDisp=t),this._scrollableElement.setScrollPosition({reuseAnimation:!e,scrollTop:t*this._renderService.dimensions.css.cell.height})}_getChangeOptions(){return{mouseWheelScrollSensitivity:this._optionsService.rawOptions.scrollSensitivity,fastScrollSensitivity:this._optionsService.rawOptions.fastScrollSensitivity,verticalScrollbarSize:this._optionsService.rawOptions.overviewRuler?.width||14}}queueSync(t){t!==void 0&&(this._latestYDisp=t),this._queuedAnimationFrame===void 0&&(this._queuedAnimationFrame=this._renderService.addRefreshCallback(()=>{this._queuedAnimationFrame=void 0,this._sync(this._latestYDisp)}))}_sync(t=this._bufferService.buffer.ydisp){!this._renderService||this._isSyncing||(this._isSyncing=!0,this._suppressOnScrollHandler=!0,this._scrollableElement.setScrollDimensions({height:this._renderService.dimensions.css.canvas.height,scrollHeight:this._renderService.dimensions.css.cell.height*this._bufferService.buffer.lines.length}),this._suppressOnScrollHandler=!1,t!==this._latestYDisp&&this._scrollableElement.setScrollPosition({scrollTop:t*this._renderService.dimensions.css.cell.height}),this._isSyncing=!1)}_handleScroll(t){if(!this._renderService||this._isHandlingScroll||this._suppressOnScrollHandler)return;this._isHandlingScroll=!0;let e=Math.round(t.scrollTop/this._renderService.dimensions.css.cell.height),n=e-this._bufferService.buffer.ydisp;n!==0&&(this._latestYDisp=e,this._onRequestScrollLines.fire(n)),this._isHandlingScroll=!1}};Lw=hn([Le(2,Cs),Le(3,ma),Le(4,dM),Le(5,Eu),Le(6,Ns),Le(7,ga)],Lw);var Iw=class extends vt{constructor(t,e,n,s,r){super(),this._screenElement=t,this._bufferService=e,this._coreBrowserService=n,this._decorationService=s,this._renderService=r,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this._register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this._register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this._register(this._decorationService.onDecorationRemoved(a=>this._removeDecoration(a))),this._register(nn(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let t of this._decorationService.decorations)this._renderDecoration(t);this._dimensionsChanged=!1}_renderDecoration(t){this._refreshStyle(t),this._dimensionsChanged&&this._refreshXPosition(t)}_createElement(t){let e=this._coreBrowserService.mainDocument.createElement("div");e.classList.add("xterm-decoration"),e.classList.toggle("xterm-decoration-top-layer",t?.options?.layer==="top"),e.style.width=`${Math.round((t.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,e.style.height=`${(t.options.height||1)*this._renderService.dimensions.css.cell.height}px`,e.style.top=`${(t.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height}px`,e.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let n=t.options.x??0;return n&&n>this._bufferService.cols&&(e.style.display="none"),this._refreshXPosition(t,e),e}_refreshStyle(t){let e=t.marker.line-this._bufferService.buffers.active.ydisp;if(e<0||e>=this._bufferService.rows)t.element&&(t.element.style.display="none",t.onRenderEmitter.fire(t.element));else{let n=this._decorationElements.get(t);n||(n=this._createElement(t),t.element=n,this._decorationElements.set(t,n),this._container.appendChild(n),t.onDispose(()=>{this._decorationElements.delete(t),n.remove()})),n.style.display=this._altBufferIsActive?"none":"block",this._altBufferIsActive||(n.style.width=`${Math.round((t.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,n.style.height=`${(t.options.height||1)*this._renderService.dimensions.css.cell.height}px`,n.style.top=`${e*this._renderService.dimensions.css.cell.height}px`,n.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`),t.onRenderEmitter.fire(n)}}_refreshXPosition(t,e=t.element){if(!e)return;let n=t.options.x??0;(t.options.anchor||"left")==="right"?e.style.right=n?`${n*this._renderService.dimensions.css.cell.width}px`:"":e.style.left=n?`${n*this._renderService.dimensions.css.cell.width}px`:""}_removeDecoration(t){this._decorationElements.get(t)?.remove(),this._decorationElements.delete(t),t.dispose()}};Iw=hn([Le(1,Cs),Le(2,ma),Le(3,zf),Le(4,ga)],Iw);var vQ=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(t){if(t.options.overviewRulerOptions){for(let e of this._zones)if(e.color===t.options.overviewRulerOptions.color&&e.position===t.options.overviewRulerOptions.position){if(this._lineIntersectsZone(e,t.marker.line))return;if(this._lineAdjacentToZone(e,t.marker.line,t.options.overviewRulerOptions.position)){this._addLineToZone(e,t.marker.line);return}}if(this._zonePoolIndex<this._zonePool.length){this._zonePool[this._zonePoolIndex].color=t.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=t.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=t.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=t.marker.line,this._zones.push(this._zonePool[this._zonePoolIndex++]);return}this._zones.push({color:t.options.overviewRulerOptions.color,position:t.options.overviewRulerOptions.position,startBufferLine:t.marker.line,endBufferLine:t.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(t){this._linePadding=t}_lineIntersectsZone(t,e){return e>=t.startBufferLine&&e<=t.endBufferLine}_lineAdjacentToZone(t,e,n){return e>=t.startBufferLine-this._linePadding[n||"full"]&&e<=t.endBufferLine+this._linePadding[n||"full"]}_addLineToZone(t,e){t.startBufferLine=Math.min(t.startBufferLine,e),t.endBufferLine=Math.max(t.endBufferLine,e)}},li={full:0,left:0,center:0,right:0},qa={full:0,left:0,center:0,right:0},Bh={full:0,left:0,center:0,right:0},lg=class extends vt{constructor(t,e,n,s,r,a,o,c){super(),this._viewportElement=t,this._screenElement=e,this._bufferService=n,this._decorationService=s,this._renderService=r,this._optionsService=a,this._themeService=o,this._coreBrowserService=c,this._colorZoneStore=new vQ,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement),this._register(nn(()=>this._canvas?.remove()));let h=this._canvas.getContext("2d");if(h)this._ctx=h;else throw new Error("Ctx cannot be null");this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this._register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0))),this._register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this._register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})),this._register(this._renderService.onRender(()=>{(!this._containerHeight||this._containerHeight!==this._screenElement.clientHeight)&&(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._register(this._optionsService.onSpecificOptionChange("overviewRuler",()=>this._queueRefresh(!0))),this._register(this._themeService.onChangeColors(()=>this._queueRefresh())),this._queueRefresh(!0)}get _width(){return this._optionsService.options.overviewRuler?.width||0}_refreshDrawConstants(){let t=Math.floor((this._canvas.width-1)/3),e=Math.ceil((this._canvas.width-1)/3);qa.full=this._canvas.width,qa.left=t,qa.center=e,qa.right=t,this._refreshDrawHeightConstants(),Bh.full=1,Bh.left=1,Bh.center=1+qa.left,Bh.right=1+qa.left+qa.center}_refreshDrawHeightConstants(){li.full=Math.round(2*this._coreBrowserService.dpr);let t=this._canvas.height/this._bufferService.buffer.lines.length,e=Math.round(Math.max(Math.min(t,12),6)*this._coreBrowserService.dpr);li.left=e,li.center=e,li.right=e}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*li.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*li.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*li.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*li.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let e of this._decorationService.decorations)this._colorZoneStore.addDecoration(e);this._ctx.lineWidth=1,this._renderRulerOutline();let t=this._colorZoneStore.zones;for(let e of t)e.position!=="full"&&this._renderColorZone(e);for(let e of t)e.position==="full"&&this._renderColorZone(e);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderRulerOutline(){this._ctx.fillStyle=this._themeService.colors.overviewRulerBorder.css,this._ctx.fillRect(0,0,1,this._canvas.height),this._optionsService.rawOptions.overviewRuler.showTopBorder&&this._ctx.fillRect(1,0,this._canvas.width-1,1),this._optionsService.rawOptions.overviewRuler.showBottomBorder&&this._ctx.fillRect(1,this._canvas.height-1,this._canvas.width-1,this._canvas.height)}_renderColorZone(t){this._ctx.fillStyle=t.color,this._ctx.fillRect(Bh[t.position||"full"],Math.round((this._canvas.height-1)*(t.startBufferLine/this._bufferService.buffers.active.lines.length)-li[t.position||"full"]/2),qa[t.position||"full"],Math.round((this._canvas.height-1)*((t.endBufferLine-t.startBufferLine)/this._bufferService.buffers.active.lines.length)+li[t.position||"full"]))}_queueRefresh(t,e){this._shouldUpdateDimensions=t||this._shouldUpdateDimensions,this._shouldUpdateAnchor=e||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};lg=hn([Le(2,Cs),Le(3,zf),Le(4,ga),Le(5,Ns),Le(6,Eu),Le(7,ma)],lg);var ve;(t=>(t.NUL="\0",t.SOH="",t.STX="",t.ETX="",t.EOT="",t.ENQ="",t.ACK="",t.BEL="\x07",t.BS="\b",t.HT="	",t.LF=`
`,t.VT="\v",t.FF="\f",t.CR="\r",t.SO="",t.SI="",t.DLE="",t.DC1="",t.DC2="",t.DC3="",t.DC4="",t.NAK="",t.SYN="",t.ETB="",t.CAN="",t.EM="",t.SUB="",t.ESC="\x1B",t.FS="",t.GS="",t.RS="",t.US="",t.SP=" ",t.DEL=""))(ve||={});var t0;(t=>(t.PAD="",t.HOP="",t.BPH="",t.NBH="",t.IND="",t.NEL="",t.SSA="",t.ESA="",t.HTS="",t.HTJ="",t.VTS="",t.PLD="",t.PLU="",t.RI="",t.SS2="",t.SS3="",t.DCS="",t.PU1="",t.PU2="",t.STS="",t.CCH="",t.MW="",t.SPA="",t.EPA="",t.SOS="",t.SGCI="",t.SCI="",t.CSI="",t.ST="",t.OSC="",t.PM="",t.APC=""))(t0||={});var BM;(t=>t.ST=`${ve.ESC}\\`)(BM||={});var Pw=class{constructor(t,e,n,s,r,a){this._textarea=t,this._compositionView=e,this._bufferService=n,this._optionsService=s,this._coreService=r,this._renderService=a,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}get isComposing(){return this._isComposing}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(t){this._compositionView.textContent=t.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(t){if(this._isComposing||this._isSendingComposition){if(t.keyCode===20||t.keyCode===229||t.keyCode===16||t.keyCode===17||t.keyCode===18)return!1;this._finalizeComposition(!1)}return t.keyCode===229?(this._handleAnyTextareaChanges(),!1):!0}_finalizeComposition(t){if(this._compositionView.classList.remove("active"),this._isComposing=!1,t){let e={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){this._isSendingComposition=!1;let n;e.start+=this._dataAlreadySent.length,this._isComposing?n=this._textarea.value.substring(e.start,this._compositionPosition.start):n=this._textarea.value.substring(e.start),n.length>0&&this._coreService.triggerDataEvent(n,!0)}},0)}else{this._isSendingComposition=!1;let e=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(e,!0)}}_handleAnyTextareaChanges(){let t=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let e=this._textarea.value,n=e.replace(t,"");this._dataAlreadySent=n,e.length>t.length?this._coreService.triggerDataEvent(n,!0):e.length<t.length?this._coreService.triggerDataEvent(`${ve.DEL}`,!0):e.length===t.length&&e!==t&&this._coreService.triggerDataEvent(e,!0)}},0)}updateCompositionElements(t){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let e=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),n=this._renderService.dimensions.css.cell.height,s=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,r=e*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=r+"px",this._compositionView.style.top=s+"px",this._compositionView.style.height=n+"px",this._compositionView.style.lineHeight=n+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let a=this._compositionView.getBoundingClientRect();this._textarea.style.left=r+"px",this._textarea.style.top=s+"px",this._textarea.style.width=Math.max(a.width,1)+"px",this._textarea.style.height=Math.max(a.height,1)+"px",this._textarea.style.lineHeight=a.height+"px"}t||setTimeout(()=>this.updateCompositionElements(!0),0)}}};Pw=hn([Le(2,Cs),Le(3,Ns),Le(4,Ao),Le(5,ga)],Pw);var Hn=0,Un=0,Vn=0,un=0,hj={css:"#00000000",rgba:0},kn;(t=>{function e(r,a,o,c){return c!==void 0?`#${Ll(r)}${Ll(a)}${Ll(o)}${Ll(c)}`:`#${Ll(r)}${Ll(a)}${Ll(o)}`}t.toCss=e;function n(r,a,o,c=255){return(r<<24|a<<16|o<<8|c)>>>0}t.toRgba=n;function s(r,a,o,c){return{css:t.toCss(r,a,o,c),rgba:t.toRgba(r,a,o,c)}}t.toColor=s})(kn||={});var Jt;(t=>{function e(h,d){if(un=(d.rgba&255)/255,un===1)return{css:d.css,rgba:d.rgba};let g=d.rgba>>24&255,m=d.rgba>>16&255,v=d.rgba>>8&255,y=h.rgba>>24&255,_=h.rgba>>16&255,w=h.rgba>>8&255;Hn=y+Math.round((g-y)*un),Un=_+Math.round((m-_)*un),Vn=w+Math.round((v-w)*un);let S=kn.toCss(Hn,Un,Vn),k=kn.toRgba(Hn,Un,Vn);return{css:S,rgba:k}}t.blend=e;function n(h){return(h.rgba&255)===255}t.isOpaque=n;function s(h,d,g){let m=n0.ensureContrastRatio(h.rgba,d.rgba,g);if(m)return kn.toColor(m>>24&255,m>>16&255,m>>8&255)}t.ensureContrastRatio=s;function r(h){let d=(h.rgba|255)>>>0;return[Hn,Un,Vn]=n0.toChannels(d),{css:kn.toCss(Hn,Un,Vn),rgba:d}}t.opaque=r;function a(h,d){return un=Math.round(d*255),[Hn,Un,Vn]=n0.toChannels(h.rgba),{css:kn.toCss(Hn,Un,Vn,un),rgba:kn.toRgba(Hn,Un,Vn,un)}}t.opacity=a;function o(h,d){return un=h.rgba&255,a(h,un*d/255)}t.multiplyOpacity=o;function c(h){return[h.rgba>>24&255,h.rgba>>16&255,h.rgba>>8&255]}t.toColorRGB=c})(Jt||={});var ln;(t=>{let e,n;try{let r=document.createElement("canvas");r.width=1,r.height=1;let a=r.getContext("2d",{willReadFrequently:!0});a&&(e=a,e.globalCompositeOperation="copy",n=e.createLinearGradient(0,0,1,1))}catch{}function s(r){if(r.match(/#[\da-f]{3,8}/i))switch(r.length){case 4:return Hn=parseInt(r.slice(1,2).repeat(2),16),Un=parseInt(r.slice(2,3).repeat(2),16),Vn=parseInt(r.slice(3,4).repeat(2),16),kn.toColor(Hn,Un,Vn);case 5:return Hn=parseInt(r.slice(1,2).repeat(2),16),Un=parseInt(r.slice(2,3).repeat(2),16),Vn=parseInt(r.slice(3,4).repeat(2),16),un=parseInt(r.slice(4,5).repeat(2),16),kn.toColor(Hn,Un,Vn,un);case 7:return{css:r,rgba:(parseInt(r.slice(1),16)<<8|255)>>>0};case 9:return{css:r,rgba:parseInt(r.slice(1),16)>>>0}}let a=r.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(a)return Hn=parseInt(a[1]),Un=parseInt(a[2]),Vn=parseInt(a[3]),un=Math.round((a[5]===void 0?1:parseFloat(a[5]))*255),kn.toColor(Hn,Un,Vn,un);if(!e||!n)throw new Error("css.toColor: Unsupported css format");if(e.fillStyle=n,e.fillStyle=r,typeof e.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(e.fillRect(0,0,1,1),[Hn,Un,Vn,un]=e.getImageData(0,0,1,1).data,un!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:kn.toRgba(Hn,Un,Vn,un),css:r}}t.toColor=s})(ln||={});var gs;(t=>{function e(s){return n(s>>16&255,s>>8&255,s&255)}t.relativeLuminance=e;function n(s,r,a){let o=s/255,c=r/255,h=a/255,d=o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4),g=c<=.03928?c/12.92:Math.pow((c+.055)/1.055,2.4),m=h<=.03928?h/12.92:Math.pow((h+.055)/1.055,2.4);return d*.2126+g*.7152+m*.0722}t.relativeLuminance2=n})(gs||={});var n0;(t=>{function e(o,c){if(un=(c&255)/255,un===1)return c;let h=c>>24&255,d=c>>16&255,g=c>>8&255,m=o>>24&255,v=o>>16&255,y=o>>8&255;return Hn=m+Math.round((h-m)*un),Un=v+Math.round((d-v)*un),Vn=y+Math.round((g-y)*un),kn.toRgba(Hn,Un,Vn)}t.blend=e;function n(o,c,h){let d=gs.relativeLuminance(o>>8),g=gs.relativeLuminance(c>>8);if(Gi(d,g)<h){if(g<d){let y=s(o,c,h),_=Gi(d,gs.relativeLuminance(y>>8));if(_<h){let w=r(o,c,h),S=Gi(d,gs.relativeLuminance(w>>8));return _>S?y:w}return y}let m=r(o,c,h),v=Gi(d,gs.relativeLuminance(m>>8));if(v<h){let y=s(o,c,h),_=Gi(d,gs.relativeLuminance(y>>8));return v>_?m:y}return m}}t.ensureContrastRatio=n;function s(o,c,h){let d=o>>24&255,g=o>>16&255,m=o>>8&255,v=c>>24&255,y=c>>16&255,_=c>>8&255,w=Gi(gs.relativeLuminance2(v,y,_),gs.relativeLuminance2(d,g,m));for(;w<h&&(v>0||y>0||_>0);)v-=Math.max(0,Math.ceil(v*.1)),y-=Math.max(0,Math.ceil(y*.1)),_-=Math.max(0,Math.ceil(_*.1)),w=Gi(gs.relativeLuminance2(v,y,_),gs.relativeLuminance2(d,g,m));return(v<<24|y<<16|_<<8|255)>>>0}t.reduceLuminance=s;function r(o,c,h){let d=o>>24&255,g=o>>16&255,m=o>>8&255,v=c>>24&255,y=c>>16&255,_=c>>8&255,w=Gi(gs.relativeLuminance2(v,y,_),gs.relativeLuminance2(d,g,m));for(;w<h&&(v<255||y<255||_<255);)v=Math.min(255,v+Math.ceil((255-v)*.1)),y=Math.min(255,y+Math.ceil((255-y)*.1)),_=Math.min(255,_+Math.ceil((255-_)*.1)),w=Gi(gs.relativeLuminance2(v,y,_),gs.relativeLuminance2(d,g,m));return(v<<24|y<<16|_<<8|255)>>>0}t.increaseLuminance=r;function a(o){return[o>>24&255,o>>16&255,o>>8&255,o&255]}t.toChannels=a})(n0||={});function Ll(t){let e=t.toString(16);return e.length<2?"0"+e:e}function Gi(t,e){return t<e?(e+.05)/(t+.05):(t+.05)/(e+.05)}var bQ=class extends Pf{constructor(t,e,n){super(),this.content=0,this.combinedData="",this.fg=t.fg,this.bg=t.bg,this.combinedData=e,this._width=n}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(t){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},og=class{constructor(t){this._bufferService=t,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new Dr}register(t){let e={id:this._nextCharacterJoinerId++,handler:t};return this._characterJoiners.push(e),e.id}deregister(t){for(let e=0;e<this._characterJoiners.length;e++)if(this._characterJoiners[e].id===t)return this._characterJoiners.splice(e,1),!0;return!1}getJoinedCharacters(t){if(this._characterJoiners.length===0)return[];let e=this._bufferService.buffer.lines.get(t);if(!e||e.length===0)return[];let n=[],s=e.translateToString(!0),r=0,a=0,o=0,c=e.getFg(0),h=e.getBg(0);for(let d=0;d<e.getTrimmedLength();d++)if(e.loadCell(d,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==c||this._workCell.bg!==h){if(d-r>1){let g=this._getJoinedRanges(s,o,a,e,r);for(let m=0;m<g.length;m++)n.push(g[m])}r=d,o=a,c=this._workCell.fg,h=this._workCell.bg}a+=this._workCell.getChars().length||el.length}if(this._bufferService.cols-r>1){let d=this._getJoinedRanges(s,o,a,e,r);for(let g=0;g<d.length;g++)n.push(d[g])}return n}_getJoinedRanges(t,e,n,s,r){let a=t.substring(e,n),o=[];try{o=this._characterJoiners[0].handler(a)}catch(c){console.error(c)}for(let c=1;c<this._characterJoiners.length;c++)try{let h=this._characterJoiners[c].handler(a);for(let d=0;d<h.length;d++)og._mergeRanges(o,h[d])}catch(h){console.error(h)}return this._stringRangesToCellRanges(o,s,r),o}_stringRangesToCellRanges(t,e,n){let s=0,r=!1,a=0,o=t[s];if(o){for(let c=n;c<this._bufferService.cols;c++){let h=e.getWidth(c),d=e.getString(c).length||el.length;if(h!==0){if(!r&&o[0]<=a&&(o[0]=c,r=!0),o[1]<=a){if(o[1]=c,o=t[++s],!o)break;o[0]<=a?(o[0]=c,r=!0):r=!1}a+=d}}o&&(o[1]=this._bufferService.cols)}}static _mergeRanges(t,e){let n=!1;for(let s=0;s<t.length;s++){let r=t[s];if(n){if(e[1]<=r[0])return t[s-1][1]=e[1],t;if(e[1]<=r[1])return t[s-1][1]=Math.max(e[1],r[1]),t.splice(s,1),t;t.splice(s,1),s--}else{if(e[1]<=r[0])return t.splice(s,0,e),t;if(e[1]<=r[1])return r[0]=Math.min(e[0],r[0]),t;e[0]<r[1]&&(r[0]=Math.min(e[0],r[0]),n=!0);continue}}return n?t[t.length-1][1]=e[1]:t.push(e),t}};og=hn([Le(0,Cs)],og);function xQ(t){return 57508<=t&&t<=57558}function _Q(t){return 9472<=t&&t<=9631}function wQ(t){return xQ(t)||_Q(t)}function SQ(){return{css:{canvas:Nm(),cell:Nm()},device:{canvas:Nm(),cell:Nm(),char:{width:0,height:0,left:0,top:0}}}}function Nm(){return{width:0,height:0}}var zw=class{constructor(t,e,n,s,r,a,o){this._document=t,this._characterJoinerService=e,this._optionsService=n,this._coreBrowserService=s,this._coreService=r,this._decorationService=a,this._themeService=o,this._workCell=new Dr,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(t,e,n){this._selectionStart=t,this._selectionEnd=e,this._columnSelectMode=n}createRow(t,e,n,s,r,a,o,c,h,d,g){let m=[],v=this._characterJoinerService.getJoinedCharacters(e),y=this._themeService.colors,_=t.getNoBgTrimmedLength();n&&_<a+1&&(_=a+1);let w,S=0,k="",C=0,E=0,B=0,D=0,j=!1,P=0,U=!1,X=0,$=0,Z=[],F=d!==-1&&g!==-1;for(let W=0;W<_;W++){t.loadCell(W,this._workCell);let Q=this._workCell.getWidth();if(Q===0)continue;let V=!1,M=W>=$,G=W,q=this._workCell;if(v.length>0&&W===v[0][0]&&M){let je=v.shift(),Qe=this._isCellInSelection(je[0],e);for(C=je[0]+1;C<je[1];C++)M&&=Qe===this._isCellInSelection(C,e);M&&=!n||a<je[0]||a>=je[1],M?(V=!0,q=new bQ(this._workCell,t.translateToString(!0,je[0],je[1]),je[1]-je[0]),G=je[1]-1,Q=q.getWidth()):$=je[1]}let z=this._isCellInSelection(W,e),O=n&&W===a,T=F&&W>=d&&W<=g,H=!1;this._decorationService.forEachDecorationAtCell(W,e,void 0,je=>{H=!0});let N=q.getChars()||el;if(N===" "&&(q.isUnderline()||q.isOverline())&&(N=""),X=Q*c-h.get(N,q.isBold(),q.isItalic()),!w)w=this._document.createElement("span");else if(S&&(z&&U||!z&&!U&&q.bg===E)&&(z&&U&&y.selectionForeground||q.fg===B)&&q.extended.ext===D&&T===j&&X===P&&!O&&!V&&!H&&M){q.isInvisible()?k+=el:k+=N,S++;continue}else S&&(w.textContent=k),w=this._document.createElement("span"),S=0,k="";if(E=q.bg,B=q.fg,D=q.extended.ext,j=T,P=X,U=z,V&&a>=W&&a<=G&&(a=W),!this._coreService.isCursorHidden&&O&&this._coreService.isCursorInitialized){if(Z.push("xterm-cursor"),this._coreBrowserService.isFocused)o&&Z.push("xterm-cursor-blink"),Z.push(s==="bar"?"xterm-cursor-bar":s==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(r)switch(r){case"outline":Z.push("xterm-cursor-outline");break;case"block":Z.push("xterm-cursor-block");break;case"bar":Z.push("xterm-cursor-bar");break;case"underline":Z.push("xterm-cursor-underline");break}}if(q.isBold()&&Z.push("xterm-bold"),q.isItalic()&&Z.push("xterm-italic"),q.isDim()&&Z.push("xterm-dim"),q.isInvisible()?k=el:k=q.getChars()||el,q.isUnderline()&&(Z.push(`xterm-underline-${q.extended.underlineStyle}`),k===" "&&(k=""),!q.isUnderlineColorDefault()))if(q.isUnderlineColorRGB())w.style.textDecorationColor=`rgb(${Pf.toColorRGB(q.getUnderlineColor()).join(",")})`;else{let je=q.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&q.isBold()&&je<8&&(je+=8),w.style.textDecorationColor=y.ansi[je].css}q.isOverline()&&(Z.push("xterm-overline"),k===" "&&(k="")),q.isStrikethrough()&&Z.push("xterm-strikethrough"),T&&(w.style.textDecoration="underline");let Y=q.getFgColor(),oe=q.getFgColorMode(),ee=q.getBgColor(),de=q.getBgColorMode(),we=!!q.isInverse();if(we){let je=Y;Y=ee,ee=je;let Qe=oe;oe=de,de=Qe}let Se,Fe,xe=!1;this._decorationService.forEachDecorationAtCell(W,e,void 0,je=>{je.options.layer!=="top"&&xe||(je.backgroundColorRGB&&(de=50331648,ee=je.backgroundColorRGB.rgba>>8&16777215,Se=je.backgroundColorRGB),je.foregroundColorRGB&&(oe=50331648,Y=je.foregroundColorRGB.rgba>>8&16777215,Fe=je.foregroundColorRGB),xe=je.options.layer==="top")}),!xe&&z&&(Se=this._coreBrowserService.isFocused?y.selectionBackgroundOpaque:y.selectionInactiveBackgroundOpaque,ee=Se.rgba>>8&16777215,de=50331648,xe=!0,y.selectionForeground&&(oe=50331648,Y=y.selectionForeground.rgba>>8&16777215,Fe=y.selectionForeground)),xe&&Z.push("xterm-decoration-top");let qe;switch(de){case 16777216:case 33554432:qe=y.ansi[ee],Z.push(`xterm-bg-${ee}`);break;case 50331648:qe=kn.toColor(ee>>16,ee>>8&255,ee&255),this._addStyle(w,`background-color:#${dj((ee>>>0).toString(16),"0",6)}`);break;default:we?(qe=y.foreground,Z.push("xterm-bg-257")):qe=y.background}switch(Se||q.isDim()&&(Se=Jt.multiplyOpacity(qe,.5)),oe){case 16777216:case 33554432:q.isBold()&&Y<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Y+=8),this._applyMinimumContrast(w,qe,y.ansi[Y],q,Se,void 0)||Z.push(`xterm-fg-${Y}`);break;case 50331648:let je=kn.toColor(Y>>16&255,Y>>8&255,Y&255);this._applyMinimumContrast(w,qe,je,q,Se,Fe)||this._addStyle(w,`color:#${dj(Y.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(w,qe,y.foreground,q,Se,Fe)||we&&Z.push("xterm-fg-257")}Z.length&&(w.className=Z.join(" "),Z.length=0),!O&&!V&&!H&&M?S++:w.textContent=k,X!==this.defaultSpacing&&(w.style.letterSpacing=`${X}px`),m.push(w),W=G}return w&&S&&(w.textContent=k),m}_applyMinimumContrast(t,e,n,s,r,a){if(this._optionsService.rawOptions.minimumContrastRatio===1||wQ(s.getCode()))return!1;let o=this._getContrastCache(s),c;if(!r&&!a&&(c=o.getColor(e.rgba,n.rgba)),c===void 0){let h=this._optionsService.rawOptions.minimumContrastRatio/(s.isDim()?2:1);c=Jt.ensureContrastRatio(r||e,a||n,h),o.setColor((r||e).rgba,(a||n).rgba,c??null)}return c?(this._addStyle(t,`color:${c.css}`),!0):!1}_getContrastCache(t){return t.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(t,e){t.setAttribute("style",`${t.getAttribute("style")||""}${e};`)}_isCellInSelection(t,e){let n=this._selectionStart,s=this._selectionEnd;return!n||!s?!1:this._columnSelectMode?n[0]<=s[0]?t>=n[0]&&e>=n[1]&&t<s[0]&&e<=s[1]:t<n[0]&&e>=n[1]&&t>=s[0]&&e<=s[1]:e>n[1]&&e<s[1]||n[1]===s[1]&&e===n[1]&&t>=n[0]&&t<s[0]||n[1]<s[1]&&e===s[1]&&t<s[0]||n[1]<s[1]&&e===n[1]&&t>=n[0]}};zw=hn([Le(1,mM),Le(2,Ns),Le(3,ma),Le(4,Ao),Le(5,zf),Le(6,Eu)],zw);function dj(t,e,n){for(;t.length<n;)t=e+t;return t}var kQ=class{constructor(t,e){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=t.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let n=t.createElement("span");n.classList.add("xterm-char-measure-element");let s=t.createElement("span");s.classList.add("xterm-char-measure-element"),s.style.fontWeight="bold";let r=t.createElement("span");r.classList.add("xterm-char-measure-element"),r.style.fontStyle="italic";let a=t.createElement("span");a.classList.add("xterm-char-measure-element"),a.style.fontWeight="bold",a.style.fontStyle="italic",this._measureElements=[n,s,r,a],this._container.appendChild(n),this._container.appendChild(s),this._container.appendChild(r),this._container.appendChild(a),e.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(t,e,n,s){t===this._font&&e===this._fontSize&&n===this._weight&&s===this._weightBold||(this._font=t,this._fontSize=e,this._weight=n,this._weightBold=s,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${n}`,this._measureElements[1].style.fontWeight=`${s}`,this._measureElements[2].style.fontWeight=`${n}`,this._measureElements[3].style.fontWeight=`${s}`,this.clear())}get(t,e,n){let s=0;if(!e&&!n&&t.length===1&&(s=t.charCodeAt(0))<256){if(this._flat[s]!==-9999)return this._flat[s];let o=this._measure(t,0);return o>0&&(this._flat[s]=o),o}let r=t;e&&(r+="B"),n&&(r+="I");let a=this._holey.get(r);if(a===void 0){let o=0;e&&(o|=1),n&&(o|=2),a=this._measure(t,o),a>0&&this._holey.set(r,a)}return a}_measure(t,e){let n=this._measureElements[e];return n.textContent=t.repeat(32),n.offsetWidth/32}},CQ=class{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(t,e,n,s=!1){if(this.selectionStart=e,this.selectionEnd=n,!e||!n||e[0]===n[0]&&e[1]===n[1]){this.clear();return}let r=t.buffers.active.ydisp,a=e[1]-r,o=n[1]-r,c=Math.max(a,0),h=Math.min(o,t.rows-1);if(c>=t.rows||h<0){this.clear();return}this.hasSelection=!0,this.columnSelectMode=s,this.viewportStartRow=a,this.viewportEndRow=o,this.viewportCappedStartRow=c,this.viewportCappedEndRow=h,this.startCol=e[0],this.endCol=n[0]}isCellSelected(t,e,n){return this.hasSelection?(n-=t.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?e>=this.startCol&&n>=this.viewportCappedStartRow&&e<this.endCol&&n<=this.viewportCappedEndRow:e<this.startCol&&n>=this.viewportCappedStartRow&&e>=this.endCol&&n<=this.viewportCappedEndRow:n>this.viewportStartRow&&n<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&n===this.viewportStartRow&&e>=this.startCol&&e<this.endCol||this.viewportStartRow<this.viewportEndRow&&n===this.viewportEndRow&&e<this.endCol||this.viewportStartRow<this.viewportEndRow&&n===this.viewportStartRow&&e>=this.startCol):!1}};function NQ(){return new CQ}var sx="xterm-dom-renderer-owner-",Nr="xterm-rows",Am="xterm-fg-",fj="xterm-bg-",Mh="xterm-focus",Em="xterm-selection",AQ=1,$w=class extends vt{constructor(t,e,n,s,r,a,o,c,h,d,g,m,v,y){super(),this._terminal=t,this._document=e,this._element=n,this._screenElement=s,this._viewportElement=r,this._helperContainer=a,this._linkifier2=o,this._charSizeService=h,this._optionsService=d,this._bufferService=g,this._coreService=m,this._coreBrowserService=v,this._themeService=y,this._terminalClass=AQ++,this._rowElements=[],this._selectionRenderModel=NQ(),this.onRequestRedraw=this._register(new Ee).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(Nr),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(Em),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=SQ(),this._updateDimensions(),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._themeService.onChangeColors(_=>this._injectCss(_))),this._injectCss(this._themeService.colors),this._rowFactory=c.createInstance(zw,document),this._element.classList.add(sx+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this._register(this._linkifier2.onShowLinkUnderline(_=>this._handleLinkHover(_))),this._register(this._linkifier2.onHideLinkUnderline(_=>this._handleLinkLeave(_))),this._register(nn(()=>{this._element.classList.remove(sx+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new kQ(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let t=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*t,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*t),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/t),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/t),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let n of this._rowElements)n.style.width=`${this.dimensions.css.canvas.width}px`,n.style.height=`${this.dimensions.css.cell.height}px`,n.style.lineHeight=`${this.dimensions.css.cell.height}px`,n.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let e=`${this._terminalSelector} .${Nr} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=e,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(t){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let e=`${this._terminalSelector} .${Nr} { pointer-events: none; color: ${t.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;e+=`${this._terminalSelector} .${Nr} .xterm-dim { color: ${Jt.multiplyOpacity(t.foreground,.5).css};}`,e+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;let n=`blink_underline_${this._terminalClass}`,s=`blink_bar_${this._terminalClass}`,r=`blink_block_${this._terminalClass}`;e+=`@keyframes ${n} { 50% {  border-bottom-style: hidden; }}`,e+=`@keyframes ${s} { 50% {  box-shadow: none; }}`,e+=`@keyframes ${r} { 0% {  background-color: ${t.cursor.css};  color: ${t.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${t.cursor.css}; }}`,e+=`${this._terminalSelector} .${Nr}.${Mh} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${n} 1s step-end infinite;}${this._terminalSelector} .${Nr}.${Mh} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${s} 1s step-end infinite;}${this._terminalSelector} .${Nr}.${Mh} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${r} 1s step-end infinite;}${this._terminalSelector} .${Nr} .xterm-cursor.xterm-cursor-block { background-color: ${t.cursor.css}; color: ${t.cursorAccent.css};}${this._terminalSelector} .${Nr} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${t.cursor.css} !important; color: ${t.cursorAccent.css} !important;}${this._terminalSelector} .${Nr} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${t.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${Nr} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${t.cursor.css} inset;}${this._terminalSelector} .${Nr} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${t.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,e+=`${this._terminalSelector} .${Em} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${Em} div { position: absolute; background-color: ${t.selectionBackgroundOpaque.css};}${this._terminalSelector} .${Em} div { position: absolute; background-color: ${t.selectionInactiveBackgroundOpaque.css};}`;for(let[a,o]of t.ansi.entries())e+=`${this._terminalSelector} .${Am}${a} { color: ${o.css}; }${this._terminalSelector} .${Am}${a}.xterm-dim { color: ${Jt.multiplyOpacity(o,.5).css}; }${this._terminalSelector} .${fj}${a} { background-color: ${o.css}; }`;e+=`${this._terminalSelector} .${Am}257 { color: ${Jt.opaque(t.background).css}; }${this._terminalSelector} .${Am}257.xterm-dim { color: ${Jt.multiplyOpacity(Jt.opaque(t.background),.5).css}; }${this._terminalSelector} .${fj}257 { background-color: ${t.foreground.css}; }`,this._themeStyleElement.textContent=e}_setDefaultSpacing(){let t=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${t}px`,this._rowFactory.defaultSpacing=t}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(t,e){for(let n=this._rowElements.length;n<=e;n++){let s=this._document.createElement("div");this._rowContainer.appendChild(s),this._rowElements.push(s)}for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(t,e){this._refreshRowElements(t,e),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(Mh),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(Mh),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(t,e,n){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(t,e,n),this.renderRows(0,this._bufferService.rows-1),!t||!e||(this._selectionRenderModel.update(this._terminal,t,e,n),!this._selectionRenderModel.hasSelection))return;let s=this._selectionRenderModel.viewportStartRow,r=this._selectionRenderModel.viewportEndRow,a=this._selectionRenderModel.viewportCappedStartRow,o=this._selectionRenderModel.viewportCappedEndRow,c=this._document.createDocumentFragment();if(n){let h=t[0]>e[0];c.appendChild(this._createSelectionElement(a,h?e[0]:t[0],h?t[0]:e[0],o-a+1))}else{let h=s===a?t[0]:0,d=a===r?e[0]:this._bufferService.cols;c.appendChild(this._createSelectionElement(a,h,d));let g=o-a-1;if(c.appendChild(this._createSelectionElement(a+1,0,this._bufferService.cols,g)),a!==o){let m=r===o?e[0]:this._bufferService.cols;c.appendChild(this._createSelectionElement(o,0,m))}}this._selectionContainer.appendChild(c)}_createSelectionElement(t,e,n,s=1){let r=this._document.createElement("div"),a=e*this.dimensions.css.cell.width,o=this.dimensions.css.cell.width*(n-e);return a+o>this.dimensions.css.canvas.width&&(o=this.dimensions.css.canvas.width-a),r.style.height=`${s*this.dimensions.css.cell.height}px`,r.style.top=`${t*this.dimensions.css.cell.height}px`,r.style.left=`${a}px`,r.style.width=`${o}px`,r}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let t of this._rowElements)t.replaceChildren()}renderRows(t,e){let n=this._bufferService.buffer,s=n.ybase+n.y,r=Math.min(n.x,this._bufferService.cols-1),a=this._coreService.decPrivateModes.cursorBlink??this._optionsService.rawOptions.cursorBlink,o=this._coreService.decPrivateModes.cursorStyle??this._optionsService.rawOptions.cursorStyle,c=this._optionsService.rawOptions.cursorInactiveStyle;for(let h=t;h<=e;h++){let d=h+n.ydisp,g=this._rowElements[h],m=n.lines.get(d);if(!g||!m)break;g.replaceChildren(...this._rowFactory.createRow(m,d,d===s,o,c,r,a,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${sx}${this._terminalClass}`}_handleLinkHover(t){this._setCellUnderline(t.x1,t.x2,t.y1,t.y2,t.cols,!0)}_handleLinkLeave(t){this._setCellUnderline(t.x1,t.x2,t.y1,t.y2,t.cols,!1)}_setCellUnderline(t,e,n,s,r,a){n<0&&(t=0),s<0&&(e=0);let o=this._bufferService.rows-1;n=Math.max(Math.min(n,o),0),s=Math.max(Math.min(s,o),0),r=Math.min(r,this._bufferService.cols);let c=this._bufferService.buffer,h=c.ybase+c.y,d=Math.min(c.x,r-1),g=this._optionsService.rawOptions.cursorBlink,m=this._optionsService.rawOptions.cursorStyle,v=this._optionsService.rawOptions.cursorInactiveStyle;for(let y=n;y<=s;++y){let _=y+c.ydisp,w=this._rowElements[y],S=c.lines.get(_);if(!w||!S)break;w.replaceChildren(...this._rowFactory.createRow(S,_,_===h,m,v,d,g,this.dimensions.css.cell.width,this._widthCache,a?y===n?t:0:-1,a?(y===s?e:r)-1:-1))}}};$w=hn([Le(7,Q2),Le(8,Oy),Le(9,Ns),Le(10,Cs),Le(11,Ao),Le(12,ma),Le(13,Eu)],$w);var Hw=class extends vt{constructor(t,e,n){super(),this._optionsService=n,this.width=0,this.height=0,this._onCharSizeChange=this._register(new Ee),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this._register(new jQ(this._optionsService))}catch{this._measureStrategy=this._register(new EQ(t,e,this._optionsService))}this._register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}get hasValidSize(){return this.width>0&&this.height>0}measure(){let t=this._measureStrategy.measure();(t.width!==this.width||t.height!==this.height)&&(this.width=t.width,this.height=t.height,this._onCharSizeChange.fire())}};Hw=hn([Le(2,Ns)],Hw);var MM=class extends vt{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(t,e){t!==void 0&&t>0&&e!==void 0&&e>0&&(this._result.width=t,this._result.height=e)}},EQ=class extends MM{constructor(t,e,n){super(),this._document=t,this._parentElement=e,this._optionsService=n,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}},jQ=class extends MM{constructor(t){super(),this._optionsService=t,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");let e=this._ctx.measureText("W");if(!("width"in e&&"fontBoundingBoxAscent"in e&&"fontBoundingBoxDescent"in e))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;let t=this._ctx.measureText("W");return this._validateAndSet(t.width,t.fontBoundingBoxAscent+t.fontBoundingBoxDescent),this._result}},TQ=class extends vt{constructor(t,e,n){super(),this._textarea=t,this._window=e,this.mainDocument=n,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=this._register(new RQ(this._window)),this._onDprChange=this._register(new Ee),this.onDprChange=this._onDprChange.event,this._onWindowChange=this._register(new Ee),this.onWindowChange=this._onWindowChange.event,this._register(this.onWindowChange(s=>this._screenDprMonitor.setWindow(s))),this._register(ts.forward(this._screenDprMonitor.onDprChange,this._onDprChange)),this._register(rt(this._textarea,"focus",()=>this._isFocused=!0)),this._register(rt(this._textarea,"blur",()=>this._isFocused=!1))}get window(){return this._window}set window(t){this._window!==t&&(this._window=t,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}},RQ=class extends vt{constructor(t){super(),this._parentWindow=t,this._windowResizeListener=this._register(new au),this._onDprChange=this._register(new Ee),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this._register(nn(()=>this.clearListener()))}setWindow(t){this._parentWindow=t,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=rt(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){!this._resolutionMediaMatchList||!this._outerListener||(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}},OQ=class extends vt{constructor(){super(),this.linkProviders=[],this._register(nn(()=>this.linkProviders.length=0))}registerLinkProvider(t){return this.linkProviders.push(t),{dispose:()=>{let e=this.linkProviders.indexOf(t);e!==-1&&this.linkProviders.splice(e,1)}}}};function ak(t,e,n){let s=n.getBoundingClientRect(),r=t.getComputedStyle(n),a=parseInt(r.getPropertyValue("padding-left")),o=parseInt(r.getPropertyValue("padding-top"));return[e.clientX-s.left-a,e.clientY-s.top-o]}function BQ(t,e,n,s,r,a,o,c,h){if(!a)return;let d=ak(t,e,n);if(d)return d[0]=Math.ceil((d[0]+(h?o/2:0))/o),d[1]=Math.ceil(d[1]/c),d[0]=Math.min(Math.max(d[0],1),s+(h?1:0)),d[1]=Math.min(Math.max(d[1],1),r),d}var Uw=class{constructor(t,e){this._renderService=t,this._charSizeService=e}getCoords(t,e,n,s,r){return BQ(window,t,e,n,s,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,r)}getMouseReportCoords(t,e){let n=ak(window,t,e);if(this._charSizeService.hasValidSize)return n[0]=Math.min(Math.max(n[0],0),this._renderService.dimensions.css.canvas.width-1),n[1]=Math.min(Math.max(n[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(n[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(n[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(n[0]),y:Math.floor(n[1])}}};Uw=hn([Le(0,ga),Le(1,Oy)],Uw);var MQ=class{constructor(t,e){this._renderCallback=t,this._coreBrowserService=e,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(t){return this._refreshCallbacks.push(t),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(t,e,n){this._rowCount=n,t=t!==void 0?t:0,e=e!==void 0?e:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,t):t,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,e):e,!this._animationFrame&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0){this._runRefreshCallbacks();return}let t=Math.max(this._rowStart,0),e=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(t,e),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let t of this._refreshCallbacks)t(0);this._refreshCallbacks=[]}},DM={};FX(DM,{getSafariVersion:()=>LQ,isChromeOS:()=>zM,isFirefox:()=>LM,isIpad:()=>IQ,isIphone:()=>PQ,isLegacyEdge:()=>DQ,isLinux:()=>lk,isMac:()=>cg,isNode:()=>By,isSafari:()=>IM,isWindows:()=>PM});var By=typeof process<"u"&&"title"in process,$f=By?"node":navigator.userAgent,Hf=By?"node":navigator.platform,LM=$f.includes("Firefox"),DQ=$f.includes("Edge"),IM=/^((?!chrome|android).)*safari/i.test($f);function LQ(){if(!IM)return 0;let t=$f.match(/Version\/(\d+)/);return t===null||t.length<2?0:parseInt(t[1])}var cg=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(Hf),IQ=Hf==="iPad",PQ=Hf==="iPhone",PM=["Windows","Win16","Win32","WinCE"].includes(Hf),lk=Hf.indexOf("Linux")>=0,zM=/\bCrOS\b/.test($f),$M=class{constructor(){this._tasks=[],this._i=0}enqueue(t){this._tasks.push(t),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(t){this._idleCallback=void 0;let e=0,n=0,s=t.timeRemaining(),r=0;for(;this._i<this._tasks.length;){if(e=performance.now(),this._tasks[this._i]()||this._i++,e=Math.max(1,performance.now()-e),n=Math.max(e,n),r=t.timeRemaining(),n*1.5>r){s-e<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(s-e))}ms`),this._start();return}s=r}this.clear()}},zQ=class extends $M{_requestCallback(t){return setTimeout(()=>t(this._createDeadline(16)))}_cancelCallback(t){clearTimeout(t)}_createDeadline(t){let e=performance.now()+t;return{timeRemaining:()=>Math.max(0,e-performance.now())}}},$Q=class extends $M{_requestCallback(t){return requestIdleCallback(t)}_cancelCallback(t){cancelIdleCallback(t)}},ug=!By&&"requestIdleCallback"in window?$Q:zQ,HQ=class{constructor(){this._queue=new ug}set(t){this._queue.clear(),this._queue.enqueue(t)}flush(){this._queue.flush()}},Vw=class extends vt{constructor(t,e,n,s,r,a,o,c,h){super(),this._rowCount=t,this._optionsService=n,this._charSizeService=s,this._coreService=r,this._coreBrowserService=c,this._renderer=this._register(new au),this._pausedResizeTask=new HQ,this._observerDisposable=this._register(new au),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this._register(new Ee),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this._register(new Ee),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this._register(new Ee),this.onRender=this._onRender.event,this._onRefreshRequest=this._register(new Ee),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new MQ((d,g)=>this._renderRows(d,g),this._coreBrowserService),this._register(this._renderDebouncer),this._syncOutputHandler=new UQ(this._coreBrowserService,this._coreService,()=>this._fullRefresh()),this._register(nn(()=>this._syncOutputHandler.dispose())),this._register(this._coreBrowserService.onDprChange(()=>this.handleDevicePixelRatioChange())),this._register(o.onResize(()=>this._fullRefresh())),this._register(o.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this._register(a.onDecorationRegistered(()=>this._fullRefresh())),this._register(a.onDecorationRemoved(()=>this._fullRefresh())),this._register(this._optionsService.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(o.cols,o.rows),this._fullRefresh()})),this._register(this._optionsService.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(o.buffer.y,o.buffer.y,!0))),this._register(h.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(this._coreBrowserService.window,e),this._register(this._coreBrowserService.onWindowChange(d=>this._registerIntersectionObserver(d,e)))}get dimensions(){return this._renderer.value.dimensions}_registerIntersectionObserver(t,e){if("IntersectionObserver"in t){let n=new t.IntersectionObserver(s=>this._handleIntersectionChange(s[s.length-1]),{threshold:0});n.observe(e),this._observerDisposable.value=nn(()=>n.disconnect())}}_handleIntersectionChange(t){this._isPaused=t.isIntersecting===void 0?t.intersectionRatio===0:!t.isIntersecting,!this._isPaused&&!this._charSizeService.hasValidSize&&this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(t,e,n=!1){if(this._isPaused){this._needsFullRefresh=!0;return}if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(t,e);return}let s=this._syncOutputHandler.flush();s&&(t=Math.min(t,s.start),e=Math.max(e,s.end)),n||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(t,e,this._rowCount)}_renderRows(t,e){if(this._renderer.value){if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(t,e);return}t=Math.min(t,this._rowCount-1),e=Math.min(e,this._rowCount-1),this._renderer.value.renderRows(t,e),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:t,end:e}),this._onRender.fire({start:t,end:e}),this._isNextRenderRedrawOnly=!0}}resize(t,e){this._rowCount=e,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(t){this._renderer.value=t,this._renderer.value&&(this._renderer.value.onRequestRedraw(e=>this.refreshRows(e.start,e.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(t){return this._renderDebouncer.addRefreshCallback(t)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(t,e){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(t,e)):this._renderer.value.handleResize(t,e),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(t,e,n){this._selectionState.start=t,this._selectionState.end=e,this._selectionState.columnSelectMode=n,this._renderer.value?.handleSelectionChanged(t,e,n)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};Vw=hn([Le(2,Ns),Le(3,Oy),Le(4,Ao),Le(5,zf),Le(6,Cs),Le(7,ma),Le(8,Eu)],Vw);var UQ=class{constructor(t,e,n){this._coreBrowserService=t,this._coreService=e,this._onTimeout=n,this._start=0,this._end=0,this._isBuffering=!1}bufferRows(t,e){this._isBuffering?(this._start=Math.min(this._start,t),this._end=Math.max(this._end,e)):(this._start=t,this._end=e,this._isBuffering=!0),this._timeout===void 0&&(this._timeout=this._coreBrowserService.window.setTimeout(()=>{this._timeout=void 0,this._coreService.decPrivateModes.synchronizedOutput=!1,this._onTimeout()},1e3))}flush(){if(this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0),!this._isBuffering)return;let t={start:this._start,end:this._end};return this._isBuffering=!1,t}dispose(){this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0)}};function VQ(t,e,n,s){let r=n.buffer.x,a=n.buffer.y;if(!n.buffer.hasScrollback)return KQ(r,a,t,e,n,s)+My(a,e,n,s)+WQ(r,a,t,e,n,s);let o;if(a===e)return o=r>t?"D":"C",cf(Math.abs(r-t),of(o,s));o=a>e?"D":"C";let c=Math.abs(a-e),h=qQ(a>e?t:r,n)+(c-1)*n.cols+1+FQ(a>e?r:t);return cf(h,of(o,s))}function FQ(t,e){return t-1}function qQ(t,e){return e.cols-t}function KQ(t,e,n,s,r,a){return My(e,s,r,a).length===0?"":cf(UM(t,e,t,e-vo(e,r),!1,r).length,of("D",a))}function My(t,e,n,s){let r=t-vo(t,n),a=e-vo(e,n),o=Math.abs(r-a)-GQ(t,e,n);return cf(o,of(HM(t,e),s))}function WQ(t,e,n,s,r,a){let o;My(e,s,r,a).length>0?o=s-vo(s,r):o=e;let c=s,h=YQ(t,e,n,s,r,a);return cf(UM(t,o,n,c,h==="C",r).length,of(h,a))}function GQ(t,e,n){let s=0,r=t-vo(t,n),a=e-vo(e,n);for(let o=0;o<Math.abs(r-a);o++){let c=HM(t,e)==="A"?-1:1;n.buffer.lines.get(r+c*o)?.isWrapped&&s++}return s}function vo(t,e){let n=0,s=e.buffer.lines.get(t),r=s?.isWrapped;for(;r&&t>=0&&t<e.rows;)n++,s=e.buffer.lines.get(--t),r=s?.isWrapped;return n}function YQ(t,e,n,s,r,a){let o;return My(n,s,r,a).length>0?o=s-vo(s,r):o=e,t<n&&o<=s||t>=n&&o<s?"C":"D"}function HM(t,e){return t>e?"A":"B"}function UM(t,e,n,s,r,a){let o=t,c=e,h="";for(;(o!==n||c!==s)&&c>=0&&c<a.buffer.lines.length;)o+=r?1:-1,r&&o>a.cols-1?(h+=a.buffer.translateBufferLineToString(c,!1,t,o),o=0,t=0,c++):!r&&o<0&&(h+=a.buffer.translateBufferLineToString(c,!1,0,t+1),o=a.cols-1,t=o,c--);return h+a.buffer.translateBufferLineToString(c,!1,t,o)}function of(t,e){let n=e?"O":"[";return ve.ESC+n+t}function cf(t,e){t=Math.floor(t);let n="";for(let s=0;s<t;s++)n+=e;return n}var XQ=class{constructor(t){this._bufferService=t,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:!this.selectionEnd||!this.selectionStart?this.selectionStart:this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let t=this.selectionStart[0]+this.selectionStartLength;return t>this._bufferService.cols?t%this._bufferService.cols===0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(t/this._bufferService.cols)-1]:[t%this._bufferService.cols,this.selectionStart[1]+Math.floor(t/this._bufferService.cols)]:[t,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let t=this.selectionStart[0]+this.selectionStartLength;return t>this._bufferService.cols?[t%this._bufferService.cols,this.selectionStart[1]+Math.floor(t/this._bufferService.cols)]:[Math.max(t,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let t=this.selectionStart,e=this.selectionEnd;return!t||!e?!1:t[1]>e[1]||t[1]===e[1]&&t[0]>e[0]}handleTrim(t){return this.selectionStart&&(this.selectionStart[1]-=t),this.selectionEnd&&(this.selectionEnd[1]-=t),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}};function pj(t,e){if(t.start.y>t.end.y)throw new Error(`Buffer range end (${t.end.x}, ${t.end.y}) cannot be before start (${t.start.x}, ${t.start.y})`);return e*(t.end.y-t.start.y)+(t.end.x-t.start.x+1)}var rx=50,JQ=15,QQ=50,ZQ=500,eZ="",tZ=new RegExp(eZ,"g"),Fw=class extends vt{constructor(t,e,n,s,r,a,o,c,h){super(),this._element=t,this._screenElement=e,this._linkifier=n,this._bufferService=s,this._coreService=r,this._mouseService=a,this._optionsService=o,this._renderService=c,this._coreBrowserService=h,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new Dr,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this._register(new Ee),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this._register(new Ee),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this._register(new Ee),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this._register(new Ee),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=d=>this._handleMouseMove(d),this._mouseUpListener=d=>this._handleMouseUp(d),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(d=>this._handleTrim(d)),this._register(this._bufferService.buffers.onBufferActivate(d=>this._handleBufferActivate(d))),this.enable(),this._model=new XQ(this._bufferService),this._activeSelectionMode=0,this._register(nn(()=>{this._removeMouseDownListeners()})),this._register(this._bufferService.onResize(d=>{d.rowsChanged&&this.clearSelection()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let t=this._model.finalSelectionStart,e=this._model.finalSelectionEnd;return!t||!e?!1:t[0]!==e[0]||t[1]!==e[1]}get selectionText(){let t=this._model.finalSelectionStart,e=this._model.finalSelectionEnd;if(!t||!e)return"";let n=this._bufferService.buffer,s=[];if(this._activeSelectionMode===3){if(t[0]===e[0])return"";let r=t[0]<e[0]?t[0]:e[0],a=t[0]<e[0]?e[0]:t[0];for(let o=t[1];o<=e[1];o++){let c=n.translateBufferLineToString(o,!0,r,a);s.push(c)}}else{let r=t[1]===e[1]?e[0]:void 0;s.push(n.translateBufferLineToString(t[1],!0,t[0],r));for(let a=t[1]+1;a<=e[1]-1;a++){let o=n.lines.get(a),c=n.translateBufferLineToString(a,!0);o?.isWrapped?s[s.length-1]+=c:s.push(c)}if(t[1]!==e[1]){let a=n.lines.get(e[1]),o=n.translateBufferLineToString(e[1],!0,0,e[0]);a&&a.isWrapped?s[s.length-1]+=o:s.push(o)}}return s.map(r=>r.replace(tZ," ")).join(PM?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(t){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),lk&&t&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(t){let e=this._getMouseBufferCoords(t),n=this._model.finalSelectionStart,s=this._model.finalSelectionEnd;return!n||!s||!e?!1:this._areCoordsInSelection(e,n,s)}isCellInSelection(t,e){let n=this._model.finalSelectionStart,s=this._model.finalSelectionEnd;return!n||!s?!1:this._areCoordsInSelection([t,e],n,s)}_areCoordsInSelection(t,e,n){return t[1]>e[1]&&t[1]<n[1]||e[1]===n[1]&&t[1]===e[1]&&t[0]>=e[0]&&t[0]<n[0]||e[1]<n[1]&&t[1]===n[1]&&t[0]<n[0]||e[1]<n[1]&&t[1]===e[1]&&t[0]>=e[0]}_selectWordAtCursor(t,e){let n=this._linkifier.currentLink?.link?.range;if(n)return this._model.selectionStart=[n.start.x-1,n.start.y-1],this._model.selectionStartLength=pj(n,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let s=this._getMouseBufferCoords(t);return s?(this._selectWordAt(s,e),this._model.selectionEnd=void 0,!0):!1}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(t,e){this._model.clearSelection(),t=Math.max(t,0),e=Math.min(e,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,t],this._model.selectionEnd=[this._bufferService.cols,e],this.refresh(),this._onSelectionChange.fire()}_handleTrim(t){this._model.handleTrim(t)&&this.refresh()}_getMouseBufferCoords(t){let e=this._mouseService.getCoords(t,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(e)return e[0]--,e[1]--,e[1]+=this._bufferService.buffer.ydisp,e}_getMouseEventScrollAmount(t){let e=ak(this._coreBrowserService.window,t,this._screenElement)[1],n=this._renderService.dimensions.css.canvas.height;return e>=0&&e<=n?0:(e>n&&(e-=n),e=Math.min(Math.max(e,-rx),rx),e/=rx,e/Math.abs(e)+Math.round(e*(JQ-1)))}shouldForceSelection(t){return cg?t.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:t.shiftKey}handleMouseDown(t){if(this._mouseDownTimeStamp=t.timeStamp,!(t.button===2&&this.hasSelection)&&t.button===0){if(!this._enabled){if(!this.shouldForceSelection(t))return;t.stopPropagation()}t.preventDefault(),this._dragScrollAmount=0,this._enabled&&t.shiftKey?this._handleIncrementalClick(t):t.detail===1?this._handleSingleClick(t):t.detail===2?this._handleDoubleClick(t):t.detail===3&&this._handleTripleClick(t),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),QQ)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(t){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(t))}_handleSingleClick(t){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(t)?3:0,this._model.selectionStart=this._getMouseBufferCoords(t),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let e=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);e&&e.length!==this._model.selectionStart[0]&&e.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(t){this._selectWordAtCursor(t,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(t){let e=this._getMouseBufferCoords(t);e&&(this._activeSelectionMode=2,this._selectLineAt(e[1]))}shouldColumnSelect(t){return t.altKey&&!(cg&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(t){if(t.stopImmediatePropagation(),!this._model.selectionStart)return;let e=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(t),!this._model.selectionEnd){this.refresh(!0);return}this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(t),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let n=this._bufferService.buffer;if(this._model.selectionEnd[1]<n.lines.length){let s=n.lines.get(this._model.selectionEnd[1]);s&&s.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}(!e||e[0]!==this._model.selectionEnd[0]||e[1]!==this._model.selectionEnd[1])&&this.refresh(!0)}_dragScroll(){if(!(!this._model.selectionEnd||!this._model.selectionStart)&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let t=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(t.ydisp+this._bufferService.rows,t.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=t.ydisp),this.refresh()}}_handleMouseUp(t){let e=t.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&e<ZQ&&t.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let n=this._mouseService.getCoords(t,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(n&&n[0]!==void 0&&n[1]!==void 0){let s=VQ(n[0]-1,n[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(s,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let t=this._model.finalSelectionStart,e=this._model.finalSelectionEnd,n=!!t&&!!e&&(t[0]!==e[0]||t[1]!==e[1]);if(!n){this._oldHasSelection&&this._fireOnSelectionChange(t,e,n);return}!t||!e||(!this._oldSelectionStart||!this._oldSelectionEnd||t[0]!==this._oldSelectionStart[0]||t[1]!==this._oldSelectionStart[1]||e[0]!==this._oldSelectionEnd[0]||e[1]!==this._oldSelectionEnd[1])&&this._fireOnSelectionChange(t,e,n)}_fireOnSelectionChange(t,e,n){this._oldSelectionStart=t,this._oldSelectionEnd=e,this._oldHasSelection=n,this._onSelectionChange.fire()}_handleBufferActivate(t){this.clearSelection(),this._trimListener.dispose(),this._trimListener=t.activeBuffer.lines.onTrim(e=>this._handleTrim(e))}_convertViewportColToCharacterIndex(t,e){let n=e;for(let s=0;e>=s;s++){let r=t.loadCell(s,this._workCell).getChars().length;this._workCell.getWidth()===0?n--:r>1&&e!==s&&(n+=r-1)}return n}setSelection(t,e,n){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[t,e],this._model.selectionStartLength=n,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(t){this._isClickInSelection(t)||(this._selectWordAtCursor(t,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(t,e,n=!0,s=!0){if(t[0]>=this._bufferService.cols)return;let r=this._bufferService.buffer,a=r.lines.get(t[1]);if(!a)return;let o=r.translateBufferLineToString(t[1],!1),c=this._convertViewportColToCharacterIndex(a,t[0]),h=c,d=t[0]-c,g=0,m=0,v=0,y=0;if(o.charAt(c)===" "){for(;c>0&&o.charAt(c-1)===" ";)c--;for(;h<o.length&&o.charAt(h+1)===" ";)h++}else{let S=t[0],k=t[0];a.getWidth(S)===0&&(g++,S--),a.getWidth(k)===2&&(m++,k++);let C=a.getString(k).length;for(C>1&&(y+=C-1,h+=C-1);S>0&&c>0&&!this._isCharWordSeparator(a.loadCell(S-1,this._workCell));){a.loadCell(S-1,this._workCell);let E=this._workCell.getChars().length;this._workCell.getWidth()===0?(g++,S--):E>1&&(v+=E-1,c-=E-1),c--,S--}for(;k<a.length&&h+1<o.length&&!this._isCharWordSeparator(a.loadCell(k+1,this._workCell));){a.loadCell(k+1,this._workCell);let E=this._workCell.getChars().length;this._workCell.getWidth()===2?(m++,k++):E>1&&(y+=E-1,h+=E-1),h++,k++}}h++;let _=c+d-g+v,w=Math.min(this._bufferService.cols,h-c+g+m-v-y);if(!(!e&&o.slice(c,h).trim()==="")){if(n&&_===0&&a.getCodePoint(0)!==32){let S=r.lines.get(t[1]-1);if(S&&a.isWrapped&&S.getCodePoint(this._bufferService.cols-1)!==32){let k=this._getWordAt([this._bufferService.cols-1,t[1]-1],!1,!0,!1);if(k){let C=this._bufferService.cols-k.start;_-=C,w+=C}}}if(s&&_+w===this._bufferService.cols&&a.getCodePoint(this._bufferService.cols-1)!==32){let S=r.lines.get(t[1]+1);if(S?.isWrapped&&S.getCodePoint(0)!==32){let k=this._getWordAt([0,t[1]+1],!1,!1,!0);k&&(w+=k.length)}}return{start:_,length:w}}}_selectWordAt(t,e){let n=this._getWordAt(t,e);if(n){for(;n.start<0;)n.start+=this._bufferService.cols,t[1]--;this._model.selectionStart=[n.start,t[1]],this._model.selectionStartLength=n.length}}_selectToWordAt(t){let e=this._getWordAt(t,!0);if(e){let n=t[1];for(;e.start<0;)e.start+=this._bufferService.cols,n--;if(!this._model.areSelectionValuesReversed())for(;e.start+e.length>this._bufferService.cols;)e.length-=this._bufferService.cols,n++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?e.start:e.start+e.length,n]}}_isCharWordSeparator(t){return t.getWidth()===0?!1:this._optionsService.rawOptions.wordSeparator.indexOf(t.getChars())>=0}_selectLineAt(t){let e=this._bufferService.buffer.getWrappedRangeForLine(t),n={start:{x:0,y:e.first},end:{x:this._bufferService.cols-1,y:e.last}};this._model.selectionStart=[0,e.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=pj(n,this._bufferService.cols)}};Fw=hn([Le(3,Cs),Le(4,Ao),Le(5,Z2),Le(6,Ns),Le(7,ga),Le(8,ma)],Fw);var mj=class{constructor(){this._data={}}set(t,e,n){this._data[t]||(this._data[t]={}),this._data[t][e]=n}get(t,e){return this._data[t]?this._data[t][e]:void 0}clear(){this._data={}}},gj=class{constructor(){this._color=new mj,this._css=new mj}setCss(t,e,n){this._css.set(t,e,n)}getCss(t,e){return this._css.get(t,e)}setColor(t,e,n){this._color.set(t,e,n)}getColor(t,e){return this._color.get(t,e)}clear(){this._color.clear(),this._css.clear()}},Tn=Object.freeze((()=>{let t=[ln.toColor("#2e3436"),ln.toColor("#cc0000"),ln.toColor("#4e9a06"),ln.toColor("#c4a000"),ln.toColor("#3465a4"),ln.toColor("#75507b"),ln.toColor("#06989a"),ln.toColor("#d3d7cf"),ln.toColor("#555753"),ln.toColor("#ef2929"),ln.toColor("#8ae234"),ln.toColor("#fce94f"),ln.toColor("#729fcf"),ln.toColor("#ad7fa8"),ln.toColor("#34e2e2"),ln.toColor("#eeeeec")],e=[0,95,135,175,215,255];for(let n=0;n<216;n++){let s=e[n/36%6|0],r=e[n/6%6|0],a=e[n%6];t.push({css:kn.toCss(s,r,a),rgba:kn.toRgba(s,r,a)})}for(let n=0;n<24;n++){let s=8+n*10;t.push({css:kn.toCss(s,s,s),rgba:kn.toRgba(s,s,s)})}return t})()),Pl=ln.toColor("#ffffff"),gd=ln.toColor("#000000"),yj=ln.toColor("#ffffff"),vj=gd,Dh={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117},nZ=Pl,qw=class extends vt{constructor(t){super(),this._optionsService=t,this._contrastCache=new gj,this._halfContrastCache=new gj,this._onChangeColors=this._register(new Ee),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:Pl,background:gd,cursor:yj,cursorAccent:vj,selectionForeground:void 0,selectionBackgroundTransparent:Dh,selectionBackgroundOpaque:Jt.blend(gd,Dh),selectionInactiveBackgroundTransparent:Dh,selectionInactiveBackgroundOpaque:Jt.blend(gd,Dh),scrollbarSliderBackground:Jt.opacity(Pl,.2),scrollbarSliderHoverBackground:Jt.opacity(Pl,.4),scrollbarSliderActiveBackground:Jt.opacity(Pl,.5),overviewRulerBorder:Pl,ansi:Tn.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this._register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this._register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}get colors(){return this._colors}_setTheme(t={}){let e=this._colors;if(e.foreground=Ft(t.foreground,Pl),e.background=Ft(t.background,gd),e.cursor=Jt.blend(e.background,Ft(t.cursor,yj)),e.cursorAccent=Jt.blend(e.background,Ft(t.cursorAccent,vj)),e.selectionBackgroundTransparent=Ft(t.selectionBackground,Dh),e.selectionBackgroundOpaque=Jt.blend(e.background,e.selectionBackgroundTransparent),e.selectionInactiveBackgroundTransparent=Ft(t.selectionInactiveBackground,e.selectionBackgroundTransparent),e.selectionInactiveBackgroundOpaque=Jt.blend(e.background,e.selectionInactiveBackgroundTransparent),e.selectionForeground=t.selectionForeground?Ft(t.selectionForeground,hj):void 0,e.selectionForeground===hj&&(e.selectionForeground=void 0),Jt.isOpaque(e.selectionBackgroundTransparent)&&(e.selectionBackgroundTransparent=Jt.opacity(e.selectionBackgroundTransparent,.3)),Jt.isOpaque(e.selectionInactiveBackgroundTransparent)&&(e.selectionInactiveBackgroundTransparent=Jt.opacity(e.selectionInactiveBackgroundTransparent,.3)),e.scrollbarSliderBackground=Ft(t.scrollbarSliderBackground,Jt.opacity(e.foreground,.2)),e.scrollbarSliderHoverBackground=Ft(t.scrollbarSliderHoverBackground,Jt.opacity(e.foreground,.4)),e.scrollbarSliderActiveBackground=Ft(t.scrollbarSliderActiveBackground,Jt.opacity(e.foreground,.5)),e.overviewRulerBorder=Ft(t.overviewRulerBorder,nZ),e.ansi=Tn.slice(),e.ansi[0]=Ft(t.black,Tn[0]),e.ansi[1]=Ft(t.red,Tn[1]),e.ansi[2]=Ft(t.green,Tn[2]),e.ansi[3]=Ft(t.yellow,Tn[3]),e.ansi[4]=Ft(t.blue,Tn[4]),e.ansi[5]=Ft(t.magenta,Tn[5]),e.ansi[6]=Ft(t.cyan,Tn[6]),e.ansi[7]=Ft(t.white,Tn[7]),e.ansi[8]=Ft(t.brightBlack,Tn[8]),e.ansi[9]=Ft(t.brightRed,Tn[9]),e.ansi[10]=Ft(t.brightGreen,Tn[10]),e.ansi[11]=Ft(t.brightYellow,Tn[11]),e.ansi[12]=Ft(t.brightBlue,Tn[12]),e.ansi[13]=Ft(t.brightMagenta,Tn[13]),e.ansi[14]=Ft(t.brightCyan,Tn[14]),e.ansi[15]=Ft(t.brightWhite,Tn[15]),t.extendedAnsi){let n=Math.min(e.ansi.length-16,t.extendedAnsi.length);for(let s=0;s<n;s++)e.ansi[s+16]=Ft(t.extendedAnsi[s],Tn[s+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(t){this._restoreColor(t),this._onChangeColors.fire(this.colors)}_restoreColor(t){if(t===void 0){for(let e=0;e<this._restoreColors.ansi.length;++e)this._colors.ansi[e]=this._restoreColors.ansi[e];return}switch(t){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[t]=this._restoreColors.ansi[t]}}modifyColors(t){t(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};qw=hn([Le(0,Ns)],qw);function Ft(t,e){if(t!==void 0)try{return ln.toColor(t)}catch{}return e}var sZ=class{constructor(...t){this._entries=new Map;for(let[e,n]of t)this.set(e,n)}set(t,e){let n=this._entries.get(t);return this._entries.set(t,e),n}forEach(t){for(let[e,n]of this._entries.entries())t(e,n)}has(t){return this._entries.has(t)}get(t){return this._entries.get(t)}},rZ=class{constructor(){this._services=new sZ,this._services.set(Q2,this)}setService(t,e){this._services.set(t,e)}getService(t){return this._services.get(t)}createInstance(t,...e){let n=JX(t).sort((a,o)=>a.index-o.index),s=[];for(let a of n){let o=this._services.get(a.id);if(!o)throw new Error(`[createInstance] ${t.name} depends on UNKNOWN service ${a.id._id}.`);s.push(o)}let r=n.length>0?n[0].index:e.length;if(e.length!==r)throw new Error(`[createInstance] First service dependency of ${t.name} at position ${r+1} conflicts with ${e.length} static arguments`);return new t(...e,...s)}},iZ={trace:0,debug:1,info:2,warn:3,error:4,off:5},aZ="xterm.js: ",Kw=class extends vt{constructor(t){super(),this._optionsService=t,this._logLevel=5,this._updateLogLevel(),this._register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel()))}get logLevel(){return this._logLevel}_updateLogLevel(){this._logLevel=iZ[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(t){for(let e=0;e<t.length;e++)typeof t[e]=="function"&&(t[e]=t[e]())}_log(t,e,n){this._evalLazyOptionalParams(n),t.call(console,(this._optionsService.options.logger?"":aZ)+e,...n)}trace(t,...e){this._logLevel<=0&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,t,e)}debug(t,...e){this._logLevel<=1&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,t,e)}info(t,...e){this._logLevel<=2&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,t,e)}warn(t,...e){this._logLevel<=3&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,t,e)}error(t,...e){this._logLevel<=4&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,t,e)}};Kw=hn([Le(0,Ns)],Kw);var bj=class extends vt{constructor(t){super(),this._maxLength=t,this.onDeleteEmitter=this._register(new Ee),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this._register(new Ee),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this._register(new Ee),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(t){if(this._maxLength===t)return;let e=new Array(t);for(let n=0;n<Math.min(t,this.length);n++)e[n]=this._array[this._getCyclicIndex(n)];this._array=e,this._maxLength=t,this._startIndex=0}get length(){return this._length}set length(t){if(t>this._length)for(let e=this._length;e<t;e++)this._array[e]=void 0;this._length=t}get(t){return this._array[this._getCyclicIndex(t)]}set(t,e){this._array[this._getCyclicIndex(t)]=e}push(t){this._array[this._getCyclicIndex(this._length)]=t,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(t,e,...n){if(e){for(let s=t;s<this._length-e;s++)this._array[this._getCyclicIndex(s)]=this._array[this._getCyclicIndex(s+e)];this._length-=e,this.onDeleteEmitter.fire({index:t,amount:e})}for(let s=this._length-1;s>=t;s--)this._array[this._getCyclicIndex(s+n.length)]=this._array[this._getCyclicIndex(s)];for(let s=0;s<n.length;s++)this._array[this._getCyclicIndex(t+s)]=n[s];if(n.length&&this.onInsertEmitter.fire({index:t,amount:n.length}),this._length+n.length>this._maxLength){let s=this._length+n.length-this._maxLength;this._startIndex+=s,this._length=this._maxLength,this.onTrimEmitter.fire(s)}else this._length+=n.length}trimStart(t){t>this._length&&(t=this._length),this._startIndex+=t,this._length-=t,this.onTrimEmitter.fire(t)}shiftElements(t,e,n){if(!(e<=0)){if(t<0||t>=this._length)throw new Error("start argument out of range");if(t+n<0)throw new Error("Cannot shift elements in list beyond index 0");if(n>0){for(let r=e-1;r>=0;r--)this.set(t+r+n,this.get(t+r));let s=t+e+n-this._length;if(s>0)for(this._length+=s;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let s=0;s<e;s++)this.set(t+s+n,this.get(t+s))}}_getCyclicIndex(t){return(this._startIndex+t)%this._maxLength}},yt=3,Sn=Object.freeze(new Pf),jm=0,ix=2,yd=class VM{constructor(e,n,s=!1){this.isWrapped=s,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(e*yt);let r=n||Dr.fromCharData([0,oM,1,0]);for(let a=0;a<e;++a)this.setCell(a,r);this.length=e}get(e){let n=this._data[e*yt+0],s=n&2097151;return[this._data[e*yt+1],n&2097152?this._combined[e]:s?Ga(s):"",n>>22,n&2097152?this._combined[e].charCodeAt(this._combined[e].length-1):s]}set(e,n){this._data[e*yt+1]=n[0],n[1].length>1?(this._combined[e]=n[1],this._data[e*yt+0]=e|2097152|n[2]<<22):this._data[e*yt+0]=n[1].charCodeAt(0)|n[2]<<22}getWidth(e){return this._data[e*yt+0]>>22}hasWidth(e){return this._data[e*yt+0]&12582912}getFg(e){return this._data[e*yt+1]}getBg(e){return this._data[e*yt+2]}hasContent(e){return this._data[e*yt+0]&4194303}getCodePoint(e){let n=this._data[e*yt+0];return n&2097152?this._combined[e].charCodeAt(this._combined[e].length-1):n&2097151}isCombined(e){return this._data[e*yt+0]&2097152}getString(e){let n=this._data[e*yt+0];return n&2097152?this._combined[e]:n&2097151?Ga(n&2097151):""}isProtected(e){return this._data[e*yt+2]&536870912}loadCell(e,n){return jm=e*yt,n.content=this._data[jm+0],n.fg=this._data[jm+1],n.bg=this._data[jm+2],n.content&2097152&&(n.combinedData=this._combined[e]),n.bg&268435456&&(n.extended=this._extendedAttrs[e]),n}setCell(e,n){n.content&2097152&&(this._combined[e]=n.combinedData),n.bg&268435456&&(this._extendedAttrs[e]=n.extended),this._data[e*yt+0]=n.content,this._data[e*yt+1]=n.fg,this._data[e*yt+2]=n.bg}setCellFromCodepoint(e,n,s,r){r.bg&268435456&&(this._extendedAttrs[e]=r.extended),this._data[e*yt+0]=n|s<<22,this._data[e*yt+1]=r.fg,this._data[e*yt+2]=r.bg}addCodepointToCell(e,n,s){let r=this._data[e*yt+0];r&2097152?this._combined[e]+=Ga(n):r&2097151?(this._combined[e]=Ga(r&2097151)+Ga(n),r&=-2097152,r|=2097152):r=n|1<<22,s&&(r&=-12582913,r|=s<<22),this._data[e*yt+0]=r}insertCells(e,n,s){if(e%=this.length,e&&this.getWidth(e-1)===2&&this.setCellFromCodepoint(e-1,0,1,s),n<this.length-e){let r=new Dr;for(let a=this.length-e-n-1;a>=0;--a)this.setCell(e+n+a,this.loadCell(e+a,r));for(let a=0;a<n;++a)this.setCell(e+a,s)}else for(let r=e;r<this.length;++r)this.setCell(r,s);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,s)}deleteCells(e,n,s){if(e%=this.length,n<this.length-e){let r=new Dr;for(let a=0;a<this.length-e-n;++a)this.setCell(e+a,this.loadCell(e+n+a,r));for(let a=this.length-n;a<this.length;++a)this.setCell(a,s)}else for(let r=e;r<this.length;++r)this.setCell(r,s);e&&this.getWidth(e-1)===2&&this.setCellFromCodepoint(e-1,0,1,s),this.getWidth(e)===0&&!this.hasContent(e)&&this.setCellFromCodepoint(e,0,1,s)}replaceCells(e,n,s,r=!1){if(r){for(e&&this.getWidth(e-1)===2&&!this.isProtected(e-1)&&this.setCellFromCodepoint(e-1,0,1,s),n<this.length&&this.getWidth(n-1)===2&&!this.isProtected(n)&&this.setCellFromCodepoint(n,0,1,s);e<n&&e<this.length;)this.isProtected(e)||this.setCell(e,s),e++;return}for(e&&this.getWidth(e-1)===2&&this.setCellFromCodepoint(e-1,0,1,s),n<this.length&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n,0,1,s);e<n&&e<this.length;)this.setCell(e++,s)}resize(e,n){if(e===this.length)return this._data.length*4*ix<this._data.buffer.byteLength;let s=e*yt;if(e>this.length){if(this._data.buffer.byteLength>=s*4)this._data=new Uint32Array(this._data.buffer,0,s);else{let r=new Uint32Array(s);r.set(this._data),this._data=r}for(let r=this.length;r<e;++r)this.setCell(r,n)}else{this._data=this._data.subarray(0,s);let r=Object.keys(this._combined);for(let o=0;o<r.length;o++){let c=parseInt(r[o],10);c>=e&&delete this._combined[c]}let a=Object.keys(this._extendedAttrs);for(let o=0;o<a.length;o++){let c=parseInt(a[o],10);c>=e&&delete this._extendedAttrs[c]}}return this.length=e,s*4*ix<this._data.buffer.byteLength}cleanupMemory(){if(this._data.length*4*ix<this._data.buffer.byteLength){let e=new Uint32Array(this._data.length);return e.set(this._data),this._data=e,1}return 0}fill(e,n=!1){if(n){for(let s=0;s<this.length;++s)this.isProtected(s)||this.setCell(s,e);return}this._combined={},this._extendedAttrs={};for(let s=0;s<this.length;++s)this.setCell(s,e)}copyFrom(e){this.length!==e.length?this._data=new Uint32Array(e._data):this._data.set(e._data),this.length=e.length,this._combined={};for(let n in e._combined)this._combined[n]=e._combined[n];this._extendedAttrs={};for(let n in e._extendedAttrs)this._extendedAttrs[n]=e._extendedAttrs[n];this.isWrapped=e.isWrapped}clone(){let e=new VM(0);e._data=new Uint32Array(this._data),e.length=this.length;for(let n in this._combined)e._combined[n]=this._combined[n];for(let n in this._extendedAttrs)e._extendedAttrs[n]=this._extendedAttrs[n];return e.isWrapped=this.isWrapped,e}getTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(this._data[e*yt+0]&4194303)return e+(this._data[e*yt+0]>>22);return 0}getNoBgTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(this._data[e*yt+0]&4194303||this._data[e*yt+2]&50331648)return e+(this._data[e*yt+0]>>22);return 0}copyCellsFrom(e,n,s,r,a){let o=e._data;if(a)for(let h=r-1;h>=0;h--){for(let d=0;d<yt;d++)this._data[(s+h)*yt+d]=o[(n+h)*yt+d];o[(n+h)*yt+2]&268435456&&(this._extendedAttrs[s+h]=e._extendedAttrs[n+h])}else for(let h=0;h<r;h++){for(let d=0;d<yt;d++)this._data[(s+h)*yt+d]=o[(n+h)*yt+d];o[(n+h)*yt+2]&268435456&&(this._extendedAttrs[s+h]=e._extendedAttrs[n+h])}let c=Object.keys(e._combined);for(let h=0;h<c.length;h++){let d=parseInt(c[h],10);d>=n&&(this._combined[d-n+s]=e._combined[d])}}translateToString(e,n,s,r){n=n??0,s=s??this.length,e&&(s=Math.min(s,this.getTrimmedLength())),r&&(r.length=0);let a="";for(;n<s;){let o=this._data[n*yt+0],c=o&2097151,h=o&2097152?this._combined[n]:c?Ga(c):el;if(a+=h,r)for(let d=0;d<h.length;++d)r.push(n);n+=o>>22||1}return r&&r.push(n),a}};function lZ(t,e,n,s,r,a){let o=[];for(let c=0;c<t.length-1;c++){let h=c,d=t.get(++h);if(!d.isWrapped)continue;let g=[t.get(c)];for(;h<t.length&&d.isWrapped;)g.push(d),d=t.get(++h);if(!a&&s>=c&&s<h){c+=g.length-1;continue}let m=0,v=uf(g,m,e),y=1,_=0;for(;y<g.length;){let S=uf(g,y,e),k=S-_,C=n-v,E=Math.min(k,C);g[m].copyCellsFrom(g[y],_,v,E,!1),v+=E,v===n&&(m++,v=0),_+=E,_===S&&(y++,_=0),v===0&&m!==0&&g[m-1].getWidth(n-1)===2&&(g[m].copyCellsFrom(g[m-1],n-1,v++,1,!1),g[m-1].setCell(n-1,r))}g[m].replaceCells(v,n,r);let w=0;for(let S=g.length-1;S>0&&(S>m||g[S].getTrimmedLength()===0);S--)w++;w>0&&(o.push(c+g.length-w),o.push(w)),c+=g.length-1}return o}function oZ(t,e){let n=[],s=0,r=e[s],a=0;for(let o=0;o<t.length;o++)if(r===o){let c=e[++s];t.onDeleteEmitter.fire({index:o-a,amount:c}),o+=c-1,a+=c,r=e[++s]}else n.push(o);return{layout:n,countRemoved:a}}function cZ(t,e){let n=[];for(let s=0;s<e.length;s++)n.push(t.get(e[s]));for(let s=0;s<n.length;s++)t.set(s,n[s]);t.length=e.length}function uZ(t,e,n){let s=[],r=t.map((h,d)=>uf(t,d,e)).reduce((h,d)=>h+d),a=0,o=0,c=0;for(;c<r;){if(r-c<n){s.push(r-c);break}a+=n;let h=uf(t,o,e);a>h&&(a-=h,o++);let d=t[o].getWidth(a-1)===2;d&&a--;let g=d?n-1:n;s.push(g),c+=g}return s}function uf(t,e,n){if(e===t.length-1)return t[e].getTrimmedLength();let s=!t[e].hasContent(n-1)&&t[e].getWidth(n-1)===1,r=t[e+1].getWidth(0)===2;return s&&r?n-1:n}var FM=class qM{constructor(e){this.line=e,this.isDisposed=!1,this._disposables=[],this._id=qM._nextId++,this._onDispose=this.register(new Ee),this.onDispose=this._onDispose.event}get id(){return this._id}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),yo(this._disposables),this._disposables.length=0)}register(e){return this._disposables.push(e),e}};FM._nextId=1;var hZ=FM,Dn={},zl=Dn.B;Dn[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""};Dn.A={"#":""};Dn.B=void 0;Dn[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""};Dn.C=Dn[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};Dn.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};Dn.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};Dn.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};Dn.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""};Dn.E=Dn[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};Dn.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""};Dn.H=Dn[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};Dn["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""};var xj=4294967295,_j=class{constructor(t,e,n){this._hasScrollback=t,this._optionsService=e,this._bufferService=n,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=Sn.clone(),this.savedCharset=zl,this.markers=[],this._nullCell=Dr.fromCharData([0,oM,1,0]),this._whitespaceCell=Dr.fromCharData([0,el,1,32]),this._isClearing=!1,this._memoryCleanupQueue=new ug,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new bj(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(t){return t?(this._nullCell.fg=t.fg,this._nullCell.bg=t.bg,this._nullCell.extended=t.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new ag),this._nullCell}getWhitespaceCell(t){return t?(this._whitespaceCell.fg=t.fg,this._whitespaceCell.bg=t.bg,this._whitespaceCell.extended=t.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new ag),this._whitespaceCell}getBlankLine(t,e){return new yd(this._bufferService.cols,this.getNullCell(t),e)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let t=this.ybase+this.y-this.ydisp;return t>=0&&t<this._rows}_getCorrectBufferLength(t){if(!this._hasScrollback)return t;let e=t+this._optionsService.rawOptions.scrollback;return e>xj?xj:e}fillViewportRows(t){if(this.lines.length===0){t===void 0&&(t=Sn);let e=this._rows;for(;e--;)this.lines.push(this.getBlankLine(t))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new bj(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(t,e){let n=this.getNullCell(Sn),s=0,r=this._getCorrectBufferLength(e);if(r>this.lines.maxLength&&(this.lines.maxLength=r),this.lines.length>0){if(this._cols<t)for(let o=0;o<this.lines.length;o++)s+=+this.lines.get(o).resize(t,n);let a=0;if(this._rows<e)for(let o=this._rows;o<e;o++)this.lines.length<e+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new yd(t,n)):this.ybase>0&&this.lines.length<=this.ybase+this.y+a+1?(this.ybase--,a++,this.ydisp>0&&this.ydisp--):this.lines.push(new yd(t,n)));else for(let o=this._rows;o>e;o--)this.lines.length>e+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(r<this.lines.maxLength){let o=this.lines.length-r;o>0&&(this.lines.trimStart(o),this.ybase=Math.max(this.ybase-o,0),this.ydisp=Math.max(this.ydisp-o,0),this.savedY=Math.max(this.savedY-o,0)),this.lines.maxLength=r}this.x=Math.min(this.x,t-1),this.y=Math.min(this.y,e-1),a&&(this.y+=a),this.savedX=Math.min(this.savedX,t-1),this.scrollTop=0}if(this.scrollBottom=e-1,this._isReflowEnabled&&(this._reflow(t,e),this._cols>t))for(let a=0;a<this.lines.length;a++)s+=+this.lines.get(a).resize(t,n);this._cols=t,this._rows=e,this._memoryCleanupQueue.clear(),s>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let t=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,t=!1);let e=0;for(;this._memoryCleanupPosition<this.lines.length;)if(e+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),e>100)return!0;return t}get _isReflowEnabled(){let t=this._optionsService.rawOptions.windowsPty;return t&&t.buildNumber?this._hasScrollback&&t.backend==="conpty"&&t.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(t,e){this._cols!==t&&(t>this._cols?this._reflowLarger(t,e):this._reflowSmaller(t,e))}_reflowLarger(t,e){let n=this._optionsService.rawOptions.reflowCursorLine,s=lZ(this.lines,this._cols,t,this.ybase+this.y,this.getNullCell(Sn),n);if(s.length>0){let r=oZ(this.lines,s);cZ(this.lines,r.layout),this._reflowLargerAdjustViewport(t,e,r.countRemoved)}}_reflowLargerAdjustViewport(t,e,n){let s=this.getNullCell(Sn),r=n;for(;r-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<e&&this.lines.push(new yd(t,s))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-n,0)}_reflowSmaller(t,e){let n=this._optionsService.rawOptions.reflowCursorLine,s=this.getNullCell(Sn),r=[],a=0;for(let o=this.lines.length-1;o>=0;o--){let c=this.lines.get(o);if(!c||!c.isWrapped&&c.getTrimmedLength()<=t)continue;let h=[c];for(;c.isWrapped&&o>0;)c=this.lines.get(--o),h.unshift(c);if(!n){let E=this.ybase+this.y;if(E>=o&&E<o+h.length)continue}let d=h[h.length-1].getTrimmedLength(),g=uZ(h,this._cols,t),m=g.length-h.length,v;this.ybase===0&&this.y!==this.lines.length-1?v=Math.max(0,this.y-this.lines.maxLength+m):v=Math.max(0,this.lines.length-this.lines.maxLength+m);let y=[];for(let E=0;E<m;E++){let B=this.getBlankLine(Sn,!0);y.push(B)}y.length>0&&(r.push({start:o+h.length+a,newLines:y}),a+=y.length),h.push(...y);let _=g.length-1,w=g[_];w===0&&(_--,w=g[_]);let S=h.length-m-1,k=d;for(;S>=0;){let E=Math.min(k,w);if(h[_]===void 0)break;if(h[_].copyCellsFrom(h[S],k-E,w-E,E,!0),w-=E,w===0&&(_--,w=g[_]),k-=E,k===0){S--;let B=Math.max(S,0);k=uf(h,B,this._cols)}}for(let E=0;E<h.length;E++)g[E]<t&&h[E].setCell(g[E],s);let C=m-v;for(;C-- >0;)this.ybase===0?this.y<e-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+a)-e&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+m,this.ybase+e-1)}if(r.length>0){let o=[],c=[];for(let w=0;w<this.lines.length;w++)c.push(this.lines.get(w));let h=this.lines.length,d=h-1,g=0,m=r[g];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+a);let v=0;for(let w=Math.min(this.lines.maxLength-1,h+a-1);w>=0;w--)if(m&&m.start>d+v){for(let S=m.newLines.length-1;S>=0;S--)this.lines.set(w--,m.newLines[S]);w++,o.push({index:d+1,amount:m.newLines.length}),v+=m.newLines.length,m=r[++g]}else this.lines.set(w,c[d--]);let y=0;for(let w=o.length-1;w>=0;w--)o[w].index+=y,this.lines.onInsertEmitter.fire(o[w]),y+=o[w].amount;let _=Math.max(0,h+a-this.lines.maxLength);_>0&&this.lines.onTrimEmitter.fire(_)}}translateBufferLineToString(t,e,n=0,s){let r=this.lines.get(t);return r?r.translateToString(e,n,s):""}getWrappedRangeForLine(t){let e=t,n=t;for(;e>0&&this.lines.get(e).isWrapped;)e--;for(;n+1<this.lines.length&&this.lines.get(n+1).isWrapped;)n++;return{first:e,last:n}}setupTabStops(t){for(t!=null?this.tabs[t]||(t=this.prevStop(t)):(this.tabs={},t=0);t<this._cols;t+=this._optionsService.rawOptions.tabStopWidth)this.tabs[t]=!0}prevStop(t){for(t==null&&(t=this.x);!this.tabs[--t]&&t>0;);return t>=this._cols?this._cols-1:t<0?0:t}nextStop(t){for(t==null&&(t=this.x);!this.tabs[++t]&&t<this._cols;);return t>=this._cols?this._cols-1:t<0?0:t}clearMarkers(t){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].line===t&&(this.markers[e].dispose(),this.markers.splice(e--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].dispose();this.markers.length=0,this._isClearing=!1}addMarker(t){let e=new hZ(t);return this.markers.push(e),e.register(this.lines.onTrim(n=>{e.line-=n,e.line<0&&e.dispose()})),e.register(this.lines.onInsert(n=>{e.line>=n.index&&(e.line+=n.amount)})),e.register(this.lines.onDelete(n=>{e.line>=n.index&&e.line<n.index+n.amount&&e.dispose(),e.line>n.index&&(e.line-=n.amount)})),e.register(e.onDispose(()=>this._removeMarker(e))),e}_removeMarker(t){this._isClearing||this.markers.splice(this.markers.indexOf(t),1)}},dZ=class extends vt{constructor(t,e){super(),this._optionsService=t,this._bufferService=e,this._onBufferActivate=this._register(new Ee),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this._register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this._register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new _j(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new _j(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(t){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(t),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(t,e){this._normal.resize(t,e),this._alt.resize(t,e),this.setupTabStops(t)}setupTabStops(t){this._normal.setupTabStops(t),this._alt.setupTabStops(t)}},KM=2,WM=1,Ww=class extends vt{constructor(t){super(),this.isUserScrolling=!1,this._onResize=this._register(new Ee),this.onResize=this._onResize.event,this._onScroll=this._register(new Ee),this.onScroll=this._onScroll.event,this.cols=Math.max(t.rawOptions.cols||0,KM),this.rows=Math.max(t.rawOptions.rows||0,WM),this.buffers=this._register(new dZ(t,this)),this._register(this.buffers.onBufferActivate(e=>{this._onScroll.fire(e.activeBuffer.ydisp)}))}get buffer(){return this.buffers.active}resize(t,e){let n=this.cols!==t,s=this.rows!==e;this.cols=t,this.rows=e,this.buffers.resize(t,e),this._onResize.fire({cols:t,rows:e,colsChanged:n,rowsChanged:s})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(t,e=!1){let n=this.buffer,s;s=this._cachedBlankLine,(!s||s.length!==this.cols||s.getFg(0)!==t.fg||s.getBg(0)!==t.bg)&&(s=n.getBlankLine(t,e),this._cachedBlankLine=s),s.isWrapped=e;let r=n.ybase+n.scrollTop,a=n.ybase+n.scrollBottom;if(n.scrollTop===0){let o=n.lines.isFull;a===n.lines.length-1?o?n.lines.recycle().copyFrom(s):n.lines.push(s.clone()):n.lines.splice(a+1,0,s.clone()),o?this.isUserScrolling&&(n.ydisp=Math.max(n.ydisp-1,0)):(n.ybase++,this.isUserScrolling||n.ydisp++)}else{let o=a-r+1;n.lines.shiftElements(r+1,o-1,-1),n.lines.set(a,s.clone())}this.isUserScrolling||(n.ydisp=n.ybase),this._onScroll.fire(n.ydisp)}scrollLines(t,e){let n=this.buffer;if(t<0){if(n.ydisp===0)return;this.isUserScrolling=!0}else t+n.ydisp>=n.ybase&&(this.isUserScrolling=!1);let s=n.ydisp;n.ydisp=Math.max(Math.min(n.ydisp+t,n.ybase),0),s!==n.ydisp&&(e||this._onScroll.fire(n.ydisp))}};Ww=hn([Le(0,Ns)],Ww);var _c={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnEraseInDisplay:!1,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},reflowCursorLine:!1,rescaleOverlappingGlyphs:!1,rightClickSelectsWord:cg,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRuler:{}},fZ=["normal","bold","100","200","300","400","500","600","700","800","900"],pZ=class extends vt{constructor(t){super(),this._onOptionChange=this._register(new Ee),this.onOptionChange=this._onOptionChange.event;let e={..._c};for(let n in t)if(n in e)try{let s=t[n];e[n]=this._sanitizeAndValidateOption(n,s)}catch(s){console.error(s)}this.rawOptions=e,this.options={...e},this._setupOptions(),this._register(nn(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(t,e){return this.onOptionChange(n=>{n===t&&e(this.rawOptions[t])})}onMultipleOptionChange(t,e){return this.onOptionChange(n=>{t.indexOf(n)!==-1&&e()})}_setupOptions(){let t=n=>{if(!(n in _c))throw new Error(`No option with key "${n}"`);return this.rawOptions[n]},e=(n,s)=>{if(!(n in _c))throw new Error(`No option with key "${n}"`);s=this._sanitizeAndValidateOption(n,s),this.rawOptions[n]!==s&&(this.rawOptions[n]=s,this._onOptionChange.fire(n))};for(let n in this.rawOptions){let s={get:t.bind(this,n),set:e.bind(this,n)};Object.defineProperty(this.options,n,s)}}_sanitizeAndValidateOption(t,e){switch(t){case"cursorStyle":if(e||(e=_c[t]),!mZ(e))throw new Error(`"${e}" is not a valid value for ${t}`);break;case"wordSeparator":e||(e=_c[t]);break;case"fontWeight":case"fontWeightBold":if(typeof e=="number"&&1<=e&&e<=1e3)break;e=fZ.includes(e)?e:_c[t];break;case"cursorWidth":e=Math.floor(e);case"lineHeight":case"tabStopWidth":if(e<1)throw new Error(`${t} cannot be less than 1, value: ${e}`);break;case"minimumContrastRatio":e=Math.max(1,Math.min(21,Math.round(e*10)/10));break;case"scrollback":if(e=Math.min(e,4294967295),e<0)throw new Error(`${t} cannot be less than 0, value: ${e}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(e<=0)throw new Error(`${t} cannot be less than or equal to 0, value: ${e}`);break;case"rows":case"cols":if(!e&&e!==0)throw new Error(`${t} must be numeric, value: ${e}`);break;case"windowsPty":e=e??{};break}return e}};function mZ(t){return t==="block"||t==="underline"||t==="bar"}function vd(t,e=5){if(typeof t!="object")return t;let n=Array.isArray(t)?[]:{};for(let s in t)n[s]=e<=1?t[s]:t[s]&&vd(t[s],e-1);return n}var wj=Object.freeze({insertMode:!1}),Sj=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,cursorBlink:void 0,cursorStyle:void 0,origin:!1,reverseWraparound:!1,sendFocus:!1,synchronizedOutput:!1,wraparound:!0}),Gw=class extends vt{constructor(t,e,n){super(),this._bufferService=t,this._logService=e,this._optionsService=n,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this._register(new Ee),this.onData=this._onData.event,this._onUserInput=this._register(new Ee),this.onUserInput=this._onUserInput.event,this._onBinary=this._register(new Ee),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this._register(new Ee),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=vd(wj),this.decPrivateModes=vd(Sj)}reset(){this.modes=vd(wj),this.decPrivateModes=vd(Sj)}triggerDataEvent(t,e=!1){if(this._optionsService.rawOptions.disableStdin)return;let n=this._bufferService.buffer;e&&this._optionsService.rawOptions.scrollOnUserInput&&n.ybase!==n.ydisp&&this._onRequestScrollToBottom.fire(),e&&this._onUserInput.fire(),this._logService.debug(`sending data "${t}"`),this._logService.trace("sending data (codes)",()=>t.split("").map(s=>s.charCodeAt(0))),this._onData.fire(t)}triggerBinaryEvent(t){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${t}"`),this._logService.trace("sending binary (codes)",()=>t.split("").map(e=>e.charCodeAt(0))),this._onBinary.fire(t))}};Gw=hn([Le(0,Cs),Le(1,fM),Le(2,Ns)],Gw);var kj={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:t=>t.button===4||t.action!==1?!1:(t.ctrl=!1,t.alt=!1,t.shift=!1,!0)},VT200:{events:19,restrict:t=>t.action!==32},DRAG:{events:23,restrict:t=>!(t.action===32&&t.button===3)},ANY:{events:31,restrict:t=>!0}};function ax(t,e){let n=(t.ctrl?16:0)|(t.shift?4:0)|(t.alt?8:0);return t.button===4?(n|=64,n|=t.action):(n|=t.button&3,t.button&4&&(n|=64),t.button&8&&(n|=128),t.action===32?n|=32:t.action===0&&!e&&(n|=3)),n}var lx=String.fromCharCode,Cj={DEFAULT:t=>{let e=[ax(t,!1)+32,t.col+32,t.row+32];return e[0]>255||e[1]>255||e[2]>255?"":`\x1B[M${lx(e[0])}${lx(e[1])}${lx(e[2])}`},SGR:t=>{let e=t.action===0&&t.button!==4?"m":"M";return`\x1B[<${ax(t,!0)};${t.col};${t.row}${e}`},SGR_PIXELS:t=>{let e=t.action===0&&t.button!==4?"m":"M";return`\x1B[<${ax(t,!0)};${t.x};${t.y}${e}`}},Yw=class extends vt{constructor(t,e,n){super(),this._bufferService=t,this._coreService=e,this._optionsService=n,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._wheelPartialScroll=0,this._onProtocolChange=this._register(new Ee),this.onProtocolChange=this._onProtocolChange.event;for(let s of Object.keys(kj))this.addProtocol(s,kj[s]);for(let s of Object.keys(Cj))this.addEncoding(s,Cj[s]);this.reset()}addProtocol(t,e){this._protocols[t]=e}addEncoding(t,e){this._encodings[t]=e}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(t){if(!this._protocols[t])throw new Error(`unknown protocol "${t}"`);this._activeProtocol=t,this._onProtocolChange.fire(this._protocols[t].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(t){if(!this._encodings[t])throw new Error(`unknown encoding "${t}"`);this._activeEncoding=t}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null,this._wheelPartialScroll=0}consumeWheelEvent(t,e,n){if(t.deltaY===0||t.shiftKey||e===void 0||n===void 0)return 0;let s=e/n,r=this._applyScrollModifier(t.deltaY,t);return t.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(r/=s+0,Math.abs(t.deltaY)<50&&(r*=.3),this._wheelPartialScroll+=r,r=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(r*=this._bufferService.rows),r}_applyScrollModifier(t,e){return e.altKey||e.ctrlKey||e.shiftKey?t*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:t*this._optionsService.rawOptions.scrollSensitivity}triggerMouseEvent(t){if(t.col<0||t.col>=this._bufferService.cols||t.row<0||t.row>=this._bufferService.rows||t.button===4&&t.action===32||t.button===3&&t.action!==32||t.button!==4&&(t.action===2||t.action===3)||(t.col++,t.row++,t.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,t,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(t))return!1;let e=this._encodings[this._activeEncoding](t);return e&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(e):this._coreService.triggerDataEvent(e,!0)),this._lastEvent=t,!0}explainEvents(t){return{down:!!(t&1),up:!!(t&2),drag:!!(t&4),move:!!(t&8),wheel:!!(t&16)}}_equalEvents(t,e,n){if(n){if(t.x!==e.x||t.y!==e.y)return!1}else if(t.col!==e.col||t.row!==e.row)return!1;return!(t.button!==e.button||t.action!==e.action||t.ctrl!==e.ctrl||t.alt!==e.alt||t.shift!==e.shift)}};Yw=hn([Le(0,Cs),Le(1,Ao),Le(2,Ns)],Yw);var ox=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],gZ=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],Rn;function yZ(t,e){let n=0,s=e.length-1,r;if(t<e[0][0]||t>e[s][1])return!1;for(;s>=n;)if(r=n+s>>1,t>e[r][1])n=r+1;else if(t<e[r][0])s=r-1;else return!0;return!1}var vZ=class{constructor(){if(this.version="6",!Rn){Rn=new Uint8Array(65536),Rn.fill(1),Rn[0]=0,Rn.fill(0,1,32),Rn.fill(0,127,160),Rn.fill(2,4352,4448),Rn[9001]=2,Rn[9002]=2,Rn.fill(2,11904,42192),Rn[12351]=1,Rn.fill(2,44032,55204),Rn.fill(2,63744,64256),Rn.fill(2,65040,65050),Rn.fill(2,65072,65136),Rn.fill(2,65280,65377),Rn.fill(2,65504,65511);for(let t=0;t<ox.length;++t)Rn.fill(0,ox[t][0],ox[t][1]+1)}}wcwidth(t){return t<32?0:t<127?1:t<65536?Rn[t]:yZ(t,gZ)?0:t>=131072&&t<=196605||t>=196608&&t<=262141?2:1}charProperties(t,e){let n=this.wcwidth(t),s=n===0&&e!==0;if(s){let r=Kl.extractWidth(e);r===0?s=!1:r>n&&(n=r)}return Kl.createPropertyValue(0,n,s)}},Kl=class s0{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new Ee,this.onChange=this._onChange.event;let e=new vZ;this.register(e),this._active=e.version,this._activeProvider=e}static extractShouldJoin(e){return(e&1)!==0}static extractWidth(e){return e>>1&3}static extractCharKind(e){return e>>3}static createPropertyValue(e,n,s=!1){return(e&16777215)<<3|(n&3)<<1|(s?1:0)}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(e){if(!this._providers[e])throw new Error(`unknown Unicode version "${e}"`);this._active=e,this._activeProvider=this._providers[e],this._onChange.fire(e)}register(e){this._providers[e.version]=e}wcwidth(e){return this._activeProvider.wcwidth(e)}getStringCellWidth(e){let n=0,s=0,r=e.length;for(let a=0;a<r;++a){let o=e.charCodeAt(a);if(55296<=o&&o<=56319){if(++a>=r)return n+this.wcwidth(o);let d=e.charCodeAt(a);56320<=d&&d<=57343?o=(o-55296)*1024+d-56320+65536:n+=this.wcwidth(d)}let c=this.charProperties(o,s),h=s0.extractWidth(c);s0.extractShouldJoin(c)&&(h-=s0.extractWidth(s)),n+=h,s=c}return n}charProperties(e,n){return this._activeProvider.charProperties(e,n)}},bZ=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(t){this.glevel=t,this.charset=this._charsets[t]}setgCharset(t,e){this._charsets[t]=e,this.glevel===t&&(this.charset=e)}};function Nj(t){let e=t.buffer.lines.get(t.buffer.ybase+t.buffer.y-1)?.get(t.cols-1),n=t.buffer.lines.get(t.buffer.ybase+t.buffer.y);n&&e&&(n.isWrapped=e[3]!==0&&e[3]!==32)}var Lh=2147483647,xZ=256,GM=class Xw{constructor(e=32,n=32){if(this.maxLength=e,this.maxSubParamsLength=n,n>xZ)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(e),this.length=0,this._subParams=new Int32Array(n),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(e),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}static fromArray(e){let n=new Xw;if(!e.length)return n;for(let s=Array.isArray(e[0])?1:0;s<e.length;++s){let r=e[s];if(Array.isArray(r))for(let a=0;a<r.length;++a)n.addSubParam(r[a]);else n.addParam(r)}return n}clone(){let e=new Xw(this.maxLength,this.maxSubParamsLength);return e.params.set(this.params),e.length=this.length,e._subParams.set(this._subParams),e._subParamsLength=this._subParamsLength,e._subParamsIdx.set(this._subParamsIdx),e._rejectDigits=this._rejectDigits,e._rejectSubDigits=this._rejectSubDigits,e._digitIsSub=this._digitIsSub,e}toArray(){let e=[];for(let n=0;n<this.length;++n){e.push(this.params[n]);let s=this._subParamsIdx[n]>>8,r=this._subParamsIdx[n]&255;r-s>0&&e.push(Array.prototype.slice.call(this._subParams,s,r))}return e}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(e){if(this._digitIsSub=!1,this.length>=this.maxLength){this._rejectDigits=!0;return}if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=e>Lh?Lh:e}addSubParam(e){if(this._digitIsSub=!0,!!this.length){if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength){this._rejectSubDigits=!0;return}if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=e>Lh?Lh:e,this._subParamsIdx[this.length-1]++}}hasSubParams(e){return(this._subParamsIdx[e]&255)-(this._subParamsIdx[e]>>8)>0}getSubParams(e){let n=this._subParamsIdx[e]>>8,s=this._subParamsIdx[e]&255;return s-n>0?this._subParams.subarray(n,s):null}getSubParamsAll(){let e={};for(let n=0;n<this.length;++n){let s=this._subParamsIdx[n]>>8,r=this._subParamsIdx[n]&255;r-s>0&&(e[n]=this._subParams.slice(s,r))}return e}addDigit(e){let n;if(this._rejectDigits||!(n=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let s=this._digitIsSub?this._subParams:this.params,r=s[n-1];s[n-1]=~r?Math.min(r*10+e,Lh):e}},Ih=[],_Z=class{constructor(){this._state=0,this._active=Ih,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(t,e){this._handlers[t]===void 0&&(this._handlers[t]=[]);let n=this._handlers[t];return n.push(e),{dispose:()=>{let s=n.indexOf(e);s!==-1&&n.splice(s,1)}}}clearHandler(t){this._handlers[t]&&delete this._handlers[t]}setHandlerFallback(t){this._handlerFb=t}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=Ih}reset(){if(this._state===2)for(let t=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;t>=0;--t)this._active[t].end(!1);this._stack.paused=!1,this._active=Ih,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||Ih,!this._active.length)this._handlerFb(this._id,"START");else for(let t=this._active.length-1;t>=0;t--)this._active[t].start()}_put(t,e,n){if(!this._active.length)this._handlerFb(this._id,"PUT",Ry(t,e,n));else for(let s=this._active.length-1;s>=0;s--)this._active[s].put(t,e,n)}start(){this.reset(),this._state=1}put(t,e,n){if(this._state!==3){if(this._state===1)for(;e<n;){let s=t[e++];if(s===59){this._state=2,this._start();break}if(s<48||57<s){this._state=3;return}this._id===-1&&(this._id=0),this._id=this._id*10+s-48}this._state===2&&n-e>0&&this._put(t,e,n)}}end(t,e=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),!this._active.length)this._handlerFb(this._id,"END",t);else{let n=!1,s=this._active.length-1,r=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,n=e,r=this._stack.fallThrough,this._stack.paused=!1),!r&&n===!1){for(;s>=0&&(n=this._active[s].end(t),n!==!0);s--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,n;s--}for(;s>=0;s--)if(n=this._active[s].end(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,n}this._active=Ih,this._id=-1,this._state=0}}},tr=class{constructor(t){this._handler=t,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(t,e,n){this._hitLimit||(this._data+=Ry(t,e,n),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}end(t){let e=!1;if(this._hitLimit)e=!1;else if(t&&(e=this._handler(this._data),e instanceof Promise))return e.then(n=>(this._data="",this._hitLimit=!1,n));return this._data="",this._hitLimit=!1,e}},Ph=[],wZ=class{constructor(){this._handlers=Object.create(null),this._active=Ph,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=Ph}registerHandler(t,e){this._handlers[t]===void 0&&(this._handlers[t]=[]);let n=this._handlers[t];return n.push(e),{dispose:()=>{let s=n.indexOf(e);s!==-1&&n.splice(s,1)}}}clearHandler(t){this._handlers[t]&&delete this._handlers[t]}setHandlerFallback(t){this._handlerFb=t}reset(){if(this._active.length)for(let t=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;t>=0;--t)this._active[t].unhook(!1);this._stack.paused=!1,this._active=Ph,this._ident=0}hook(t,e){if(this.reset(),this._ident=t,this._active=this._handlers[t]||Ph,!this._active.length)this._handlerFb(this._ident,"HOOK",e);else for(let n=this._active.length-1;n>=0;n--)this._active[n].hook(e)}put(t,e,n){if(!this._active.length)this._handlerFb(this._ident,"PUT",Ry(t,e,n));else for(let s=this._active.length-1;s>=0;s--)this._active[s].put(t,e,n)}unhook(t,e=!0){if(!this._active.length)this._handlerFb(this._ident,"UNHOOK",t);else{let n=!1,s=this._active.length-1,r=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,n=e,r=this._stack.fallThrough,this._stack.paused=!1),!r&&n===!1){for(;s>=0&&(n=this._active[s].unhook(t),n!==!0);s--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,n;s--}for(;s>=0;s--)if(n=this._active[s].unhook(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,n}this._active=Ph,this._ident=0}},bd=new GM;bd.addParam(0);var Aj=class{constructor(t){this._handler=t,this._data="",this._params=bd,this._hitLimit=!1}hook(t){this._params=t.length>1||t.params[0]?t.clone():bd,this._data="",this._hitLimit=!1}put(t,e,n){this._hitLimit||(this._data+=Ry(t,e,n),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}unhook(t){let e=!1;if(this._hitLimit)e=!1;else if(t&&(e=this._handler(this._data,this._params),e instanceof Promise))return e.then(n=>(this._params=bd,this._data="",this._hitLimit=!1,n));return this._params=bd,this._data="",this._hitLimit=!1,e}},SZ=class{constructor(t){this.table=new Uint8Array(t)}setDefault(t,e){this.table.fill(t<<4|e)}add(t,e,n,s){this.table[e<<8|t]=n<<4|s}addMany(t,e,n,s){for(let r=0;r<t.length;r++)this.table[e<<8|t[r]]=n<<4|s}},Er=160,kZ=(function(){let t=new SZ(4095),e=Array.apply(null,Array(256)).map((c,h)=>h),n=(c,h)=>e.slice(c,h),s=n(32,127),r=n(0,24);r.push(25),r.push.apply(r,n(28,32));let a=n(0,14),o;t.setDefault(1,0),t.addMany(s,0,2,0);for(o in a)t.addMany([24,26,153,154],o,3,0),t.addMany(n(128,144),o,3,0),t.addMany(n(144,152),o,3,0),t.add(156,o,0,0),t.add(27,o,11,1),t.add(157,o,4,8),t.addMany([152,158,159],o,0,7),t.add(155,o,11,3),t.add(144,o,11,9);return t.addMany(r,0,3,0),t.addMany(r,1,3,1),t.add(127,1,0,1),t.addMany(r,8,0,8),t.addMany(r,3,3,3),t.add(127,3,0,3),t.addMany(r,4,3,4),t.add(127,4,0,4),t.addMany(r,6,3,6),t.addMany(r,5,3,5),t.add(127,5,0,5),t.addMany(r,2,3,2),t.add(127,2,0,2),t.add(93,1,4,8),t.addMany(s,8,5,8),t.add(127,8,5,8),t.addMany([156,27,24,26,7],8,6,0),t.addMany(n(28,32),8,0,8),t.addMany([88,94,95],1,0,7),t.addMany(s,7,0,7),t.addMany(r,7,0,7),t.add(156,7,0,0),t.add(127,7,0,7),t.add(91,1,11,3),t.addMany(n(64,127),3,7,0),t.addMany(n(48,60),3,8,4),t.addMany([60,61,62,63],3,9,4),t.addMany(n(48,60),4,8,4),t.addMany(n(64,127),4,7,0),t.addMany([60,61,62,63],4,0,6),t.addMany(n(32,64),6,0,6),t.add(127,6,0,6),t.addMany(n(64,127),6,0,0),t.addMany(n(32,48),3,9,5),t.addMany(n(32,48),5,9,5),t.addMany(n(48,64),5,0,6),t.addMany(n(64,127),5,7,0),t.addMany(n(32,48),4,9,5),t.addMany(n(32,48),1,9,2),t.addMany(n(32,48),2,9,2),t.addMany(n(48,127),2,10,0),t.addMany(n(48,80),1,10,0),t.addMany(n(81,88),1,10,0),t.addMany([89,90,92],1,10,0),t.addMany(n(96,127),1,10,0),t.add(80,1,11,9),t.addMany(r,9,0,9),t.add(127,9,0,9),t.addMany(n(28,32),9,0,9),t.addMany(n(32,48),9,9,12),t.addMany(n(48,60),9,8,10),t.addMany([60,61,62,63],9,9,10),t.addMany(r,11,0,11),t.addMany(n(32,128),11,0,11),t.addMany(n(28,32),11,0,11),t.addMany(r,10,0,10),t.add(127,10,0,10),t.addMany(n(28,32),10,0,10),t.addMany(n(48,60),10,8,10),t.addMany([60,61,62,63],10,0,11),t.addMany(n(32,48),10,9,12),t.addMany(r,12,0,12),t.add(127,12,0,12),t.addMany(n(28,32),12,0,12),t.addMany(n(32,48),12,9,12),t.addMany(n(48,64),12,0,11),t.addMany(n(64,127),12,12,13),t.addMany(n(64,127),10,12,13),t.addMany(n(64,127),9,12,13),t.addMany(r,13,13,13),t.addMany(s,13,13,13),t.add(127,13,0,13),t.addMany([27,156,24,26],13,14,0),t.add(Er,0,2,0),t.add(Er,8,5,8),t.add(Er,6,0,6),t.add(Er,11,0,11),t.add(Er,13,13,13),t})(),CZ=class extends vt{constructor(t=kZ){super(),this._transitions=t,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new GM,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(e,n,s)=>{},this._executeHandlerFb=e=>{},this._csiHandlerFb=(e,n)=>{},this._escHandlerFb=e=>{},this._errorHandlerFb=e=>e,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this._register(nn(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this._register(new _Z),this._dcsParser=this._register(new wZ),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(t,e=[64,126]){let n=0;if(t.prefix){if(t.prefix.length>1)throw new Error("only one byte as prefix supported");if(n=t.prefix.charCodeAt(0),n&&60>n||n>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(t.intermediates){if(t.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let r=0;r<t.intermediates.length;++r){let a=t.intermediates.charCodeAt(r);if(32>a||a>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");n<<=8,n|=a}}if(t.final.length!==1)throw new Error("final must be a single byte");let s=t.final.charCodeAt(0);if(e[0]>s||s>e[1])throw new Error(`final must be in range ${e[0]} .. ${e[1]}`);return n<<=8,n|=s,n}identToString(t){let e=[];for(;t;)e.push(String.fromCharCode(t&255)),t>>=8;return e.reverse().join("")}setPrintHandler(t){this._printHandler=t}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(t,e){let n=this._identifier(t,[48,126]);this._escHandlers[n]===void 0&&(this._escHandlers[n]=[]);let s=this._escHandlers[n];return s.push(e),{dispose:()=>{let r=s.indexOf(e);r!==-1&&s.splice(r,1)}}}clearEscHandler(t){this._escHandlers[this._identifier(t,[48,126])]&&delete this._escHandlers[this._identifier(t,[48,126])]}setEscHandlerFallback(t){this._escHandlerFb=t}setExecuteHandler(t,e){this._executeHandlers[t.charCodeAt(0)]=e}clearExecuteHandler(t){this._executeHandlers[t.charCodeAt(0)]&&delete this._executeHandlers[t.charCodeAt(0)]}setExecuteHandlerFallback(t){this._executeHandlerFb=t}registerCsiHandler(t,e){let n=this._identifier(t);this._csiHandlers[n]===void 0&&(this._csiHandlers[n]=[]);let s=this._csiHandlers[n];return s.push(e),{dispose:()=>{let r=s.indexOf(e);r!==-1&&s.splice(r,1)}}}clearCsiHandler(t){this._csiHandlers[this._identifier(t)]&&delete this._csiHandlers[this._identifier(t)]}setCsiHandlerFallback(t){this._csiHandlerFb=t}registerDcsHandler(t,e){return this._dcsParser.registerHandler(this._identifier(t),e)}clearDcsHandler(t){this._dcsParser.clearHandler(this._identifier(t))}setDcsHandlerFallback(t){this._dcsParser.setHandlerFallback(t)}registerOscHandler(t,e){return this._oscParser.registerHandler(t,e)}clearOscHandler(t){this._oscParser.clearHandler(t)}setOscHandlerFallback(t){this._oscParser.setHandlerFallback(t)}setErrorHandler(t){this._errorHandler=t}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(t,e,n,s,r){this._parseStack.state=t,this._parseStack.handlers=e,this._parseStack.handlerPos=n,this._parseStack.transition=s,this._parseStack.chunkPos=r}parse(t,e,n){let s=0,r=0,a=0,o;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,a=this._parseStack.chunkPos+1;else{if(n===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let c=this._parseStack.handlers,h=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(n===!1&&h>-1){for(;h>=0&&(o=c[h](this._params),o!==!0);h--)if(o instanceof Promise)return this._parseStack.handlerPos=h,o}this._parseStack.handlers=[];break;case 4:if(n===!1&&h>-1){for(;h>=0&&(o=c[h](),o!==!0);h--)if(o instanceof Promise)return this._parseStack.handlerPos=h,o}this._parseStack.handlers=[];break;case 6:if(s=t[this._parseStack.chunkPos],o=this._dcsParser.unhook(s!==24&&s!==26,n),o)return o;s===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(s=t[this._parseStack.chunkPos],o=this._oscParser.end(s!==24&&s!==26,n),o)return o;s===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break}this._parseStack.state=0,a=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=this._parseStack.transition&15}for(let c=a;c<e;++c){switch(s=t[c],r=this._transitions.table[this.currentState<<8|(s<160?s:Er)],r>>4){case 2:for(let v=c+1;;++v){if(v>=e||(s=t[v])<32||s>126&&s<Er){this._printHandler(t,c,v),c=v-1;break}if(++v>=e||(s=t[v])<32||s>126&&s<Er){this._printHandler(t,c,v),c=v-1;break}if(++v>=e||(s=t[v])<32||s>126&&s<Er){this._printHandler(t,c,v),c=v-1;break}if(++v>=e||(s=t[v])<32||s>126&&s<Er){this._printHandler(t,c,v),c=v-1;break}}break;case 3:this._executeHandlers[s]?this._executeHandlers[s]():this._executeHandlerFb(s),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:c,code:s,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let h=this._csiHandlers[this._collect<<8|s],d=h?h.length-1:-1;for(;d>=0&&(o=h[d](this._params),o!==!0);d--)if(o instanceof Promise)return this._preserveStack(3,h,d,r,c),o;d<0&&this._csiHandlerFb(this._collect<<8|s,this._params),this.precedingJoinState=0;break;case 8:do switch(s){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(s-48)}while(++c<e&&(s=t[c])>47&&s<60);c--;break;case 9:this._collect<<=8,this._collect|=s;break;case 10:let g=this._escHandlers[this._collect<<8|s],m=g?g.length-1:-1;for(;m>=0&&(o=g[m](),o!==!0);m--)if(o instanceof Promise)return this._preserveStack(4,g,m,r,c),o;m<0&&this._escHandlerFb(this._collect<<8|s),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|s,this._params);break;case 13:for(let v=c+1;;++v)if(v>=e||(s=t[v])===24||s===26||s===27||s>127&&s<Er){this._dcsParser.put(t,c,v),c=v-1;break}break;case 14:if(o=this._dcsParser.unhook(s!==24&&s!==26),o)return this._preserveStack(6,[],0,r,c),o;s===27&&(r|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let v=c+1;;v++)if(v>=e||(s=t[v])<32||s>127&&s<Er){this._oscParser.put(t,c,v),c=v-1;break}break;case 6:if(o=this._oscParser.end(s!==24&&s!==26),o)return this._preserveStack(5,[],0,r,c),o;s===27&&(r|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break}this.currentState=r&15}}},NZ=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,AZ=/^[\da-f]+$/;function Ej(t){if(!t)return;let e=t.toLowerCase();if(e.indexOf("rgb:")===0){e=e.slice(4);let n=NZ.exec(e);if(n){let s=n[1]?15:n[4]?255:n[7]?4095:65535;return[Math.round(parseInt(n[1]||n[4]||n[7]||n[10],16)/s*255),Math.round(parseInt(n[2]||n[5]||n[8]||n[11],16)/s*255),Math.round(parseInt(n[3]||n[6]||n[9]||n[12],16)/s*255)]}}else if(e.indexOf("#")===0&&(e=e.slice(1),AZ.exec(e)&&[3,6,9,12].includes(e.length))){let n=e.length/3,s=[0,0,0];for(let r=0;r<3;++r){let a=parseInt(e.slice(n*r,n*r+n),16);s[r]=n===1?a<<4:n===2?a:n===3?a>>4:a>>8}return s}}function cx(t,e){let n=t.toString(16),s=n.length<2?"0"+n:n;switch(e){case 4:return n[0];case 8:return s;case 12:return(s+s).slice(0,3);default:return s+s}}function EZ(t,e=16){let[n,s,r]=t;return`rgb:${cx(n,e)}/${cx(s,e)}/${cx(r,e)}`}var jZ={"(":0,")":1,"*":2,"+":3,"-":1,".":2},Ka=131072,jj=10;function Tj(t,e){if(t>24)return e.setWinLines||!1;switch(t){case 1:return!!e.restoreWin;case 2:return!!e.minimizeWin;case 3:return!!e.setWinPosition;case 4:return!!e.setWinSizePixels;case 5:return!!e.raiseWin;case 6:return!!e.lowerWin;case 7:return!!e.refreshWin;case 8:return!!e.setWinSizeChars;case 9:return!!e.maximizeWin;case 10:return!!e.fullscreenWin;case 11:return!!e.getWinState;case 13:return!!e.getWinPosition;case 14:return!!e.getWinSizePixels;case 15:return!!e.getScreenSizePixels;case 16:return!!e.getCellSizePixels;case 18:return!!e.getWinSizeChars;case 19:return!!e.getScreenSizeChars;case 20:return!!e.getIconTitle;case 21:return!!e.getWinTitle;case 22:return!!e.pushTitle;case 23:return!!e.popTitle;case 24:return!!e.setWinLines}return!1}var Rj=5e3,Oj=0,TZ=class extends vt{constructor(t,e,n,s,r,a,o,c,h=new CZ){super(),this._bufferService=t,this._charsetService=e,this._coreService=n,this._logService=s,this._optionsService=r,this._oscLinkService=a,this._coreMouseService=o,this._unicodeService=c,this._parser=h,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new YX,this._utf8Decoder=new XX,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=Sn.clone(),this._eraseAttrDataInternal=Sn.clone(),this._onRequestBell=this._register(new Ee),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this._register(new Ee),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this._register(new Ee),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this._register(new Ee),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this._register(new Ee),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this._register(new Ee),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this._register(new Ee),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this._register(new Ee),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this._register(new Ee),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this._register(new Ee),this.onLineFeed=this._onLineFeed.event,this._onScroll=this._register(new Ee),this.onScroll=this._onScroll.event,this._onTitleChange=this._register(new Ee),this.onTitleChange=this._onTitleChange.event,this._onColor=this._register(new Ee),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this._register(this._parser),this._dirtyRowTracker=new Jw(this._bufferService),this._activeBuffer=this._bufferService.buffer,this._register(this._bufferService.buffers.onBufferActivate(d=>this._activeBuffer=d.activeBuffer)),this._parser.setCsiHandlerFallback((d,g)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(d),params:g.toArray()})}),this._parser.setEscHandlerFallback(d=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(d)})}),this._parser.setExecuteHandlerFallback(d=>{this._logService.debug("Unknown EXECUTE code: ",{code:d})}),this._parser.setOscHandlerFallback((d,g,m)=>{this._logService.debug("Unknown OSC code: ",{identifier:d,action:g,data:m})}),this._parser.setDcsHandlerFallback((d,g,m)=>{g==="HOOK"&&(m=m.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(d),action:g,payload:m})}),this._parser.setPrintHandler((d,g,m)=>this.print(d,g,m)),this._parser.registerCsiHandler({final:"@"},d=>this.insertChars(d)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},d=>this.scrollLeft(d)),this._parser.registerCsiHandler({final:"A"},d=>this.cursorUp(d)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},d=>this.scrollRight(d)),this._parser.registerCsiHandler({final:"B"},d=>this.cursorDown(d)),this._parser.registerCsiHandler({final:"C"},d=>this.cursorForward(d)),this._parser.registerCsiHandler({final:"D"},d=>this.cursorBackward(d)),this._parser.registerCsiHandler({final:"E"},d=>this.cursorNextLine(d)),this._parser.registerCsiHandler({final:"F"},d=>this.cursorPrecedingLine(d)),this._parser.registerCsiHandler({final:"G"},d=>this.cursorCharAbsolute(d)),this._parser.registerCsiHandler({final:"H"},d=>this.cursorPosition(d)),this._parser.registerCsiHandler({final:"I"},d=>this.cursorForwardTab(d)),this._parser.registerCsiHandler({final:"J"},d=>this.eraseInDisplay(d,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},d=>this.eraseInDisplay(d,!0)),this._parser.registerCsiHandler({final:"K"},d=>this.eraseInLine(d,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},d=>this.eraseInLine(d,!0)),this._parser.registerCsiHandler({final:"L"},d=>this.insertLines(d)),this._parser.registerCsiHandler({final:"M"},d=>this.deleteLines(d)),this._parser.registerCsiHandler({final:"P"},d=>this.deleteChars(d)),this._parser.registerCsiHandler({final:"S"},d=>this.scrollUp(d)),this._parser.registerCsiHandler({final:"T"},d=>this.scrollDown(d)),this._parser.registerCsiHandler({final:"X"},d=>this.eraseChars(d)),this._parser.registerCsiHandler({final:"Z"},d=>this.cursorBackwardTab(d)),this._parser.registerCsiHandler({final:"`"},d=>this.charPosAbsolute(d)),this._parser.registerCsiHandler({final:"a"},d=>this.hPositionRelative(d)),this._parser.registerCsiHandler({final:"b"},d=>this.repeatPrecedingCharacter(d)),this._parser.registerCsiHandler({final:"c"},d=>this.sendDeviceAttributesPrimary(d)),this._parser.registerCsiHandler({prefix:">",final:"c"},d=>this.sendDeviceAttributesSecondary(d)),this._parser.registerCsiHandler({final:"d"},d=>this.linePosAbsolute(d)),this._parser.registerCsiHandler({final:"e"},d=>this.vPositionRelative(d)),this._parser.registerCsiHandler({final:"f"},d=>this.hVPosition(d)),this._parser.registerCsiHandler({final:"g"},d=>this.tabClear(d)),this._parser.registerCsiHandler({final:"h"},d=>this.setMode(d)),this._parser.registerCsiHandler({prefix:"?",final:"h"},d=>this.setModePrivate(d)),this._parser.registerCsiHandler({final:"l"},d=>this.resetMode(d)),this._parser.registerCsiHandler({prefix:"?",final:"l"},d=>this.resetModePrivate(d)),this._parser.registerCsiHandler({final:"m"},d=>this.charAttributes(d)),this._parser.registerCsiHandler({final:"n"},d=>this.deviceStatus(d)),this._parser.registerCsiHandler({prefix:"?",final:"n"},d=>this.deviceStatusPrivate(d)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},d=>this.softReset(d)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},d=>this.setCursorStyle(d)),this._parser.registerCsiHandler({final:"r"},d=>this.setScrollRegion(d)),this._parser.registerCsiHandler({final:"s"},d=>this.saveCursor(d)),this._parser.registerCsiHandler({final:"t"},d=>this.windowOptions(d)),this._parser.registerCsiHandler({final:"u"},d=>this.restoreCursor(d)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},d=>this.insertColumns(d)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},d=>this.deleteColumns(d)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},d=>this.selectProtected(d)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},d=>this.requestMode(d,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},d=>this.requestMode(d,!1)),this._parser.setExecuteHandler(ve.BEL,()=>this.bell()),this._parser.setExecuteHandler(ve.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(ve.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(ve.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(ve.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(ve.BS,()=>this.backspace()),this._parser.setExecuteHandler(ve.HT,()=>this.tab()),this._parser.setExecuteHandler(ve.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(ve.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(t0.IND,()=>this.index()),this._parser.setExecuteHandler(t0.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(t0.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new tr(d=>(this.setTitle(d),this.setIconName(d),!0))),this._parser.registerOscHandler(1,new tr(d=>this.setIconName(d))),this._parser.registerOscHandler(2,new tr(d=>this.setTitle(d))),this._parser.registerOscHandler(4,new tr(d=>this.setOrReportIndexedColor(d))),this._parser.registerOscHandler(8,new tr(d=>this.setHyperlink(d))),this._parser.registerOscHandler(10,new tr(d=>this.setOrReportFgColor(d))),this._parser.registerOscHandler(11,new tr(d=>this.setOrReportBgColor(d))),this._parser.registerOscHandler(12,new tr(d=>this.setOrReportCursorColor(d))),this._parser.registerOscHandler(104,new tr(d=>this.restoreIndexedColor(d))),this._parser.registerOscHandler(110,new tr(d=>this.restoreFgColor(d))),this._parser.registerOscHandler(111,new tr(d=>this.restoreBgColor(d))),this._parser.registerOscHandler(112,new tr(d=>this.restoreCursorColor(d))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let d in Dn)this._parser.registerEscHandler({intermediates:"(",final:d},()=>this.selectCharset("("+d)),this._parser.registerEscHandler({intermediates:")",final:d},()=>this.selectCharset(")"+d)),this._parser.registerEscHandler({intermediates:"*",final:d},()=>this.selectCharset("*"+d)),this._parser.registerEscHandler({intermediates:"+",final:d},()=>this.selectCharset("+"+d)),this._parser.registerEscHandler({intermediates:"-",final:d},()=>this.selectCharset("-"+d)),this._parser.registerEscHandler({intermediates:".",final:d},()=>this.selectCharset("."+d)),this._parser.registerEscHandler({intermediates:"/",final:d},()=>this.selectCharset("/"+d));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(d=>(this._logService.error("Parsing error: ",d),d)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new Aj((d,g)=>this.requestStatusString(d,g)))}getAttrData(){return this._curAttrData}_preserveStack(t,e,n,s){this._parseStack.paused=!0,this._parseStack.cursorStartX=t,this._parseStack.cursorStartY=e,this._parseStack.decodedLength=n,this._parseStack.position=s}_logSlowResolvingAsync(t){this._logService.logLevel<=3&&Promise.race([t,new Promise((e,n)=>setTimeout(()=>n("#SLOW_TIMEOUT"),Rj))]).catch(e=>{if(e!=="#SLOW_TIMEOUT")throw e;console.warn(`async parser handler taking longer than ${Rj} ms`)})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(t,e){let n,s=this._activeBuffer.x,r=this._activeBuffer.y,a=0,o=this._parseStack.paused;if(o){if(n=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,e))return this._logSlowResolvingAsync(n),n;s=this._parseStack.cursorStartX,r=this._parseStack.cursorStartY,this._parseStack.paused=!1,t.length>Ka&&(a=this._parseStack.position+Ka)}if(this._logService.logLevel<=1&&this._logService.debug(`parsing data ${typeof t=="string"?` "${t}"`:` "${Array.prototype.map.call(t,d=>String.fromCharCode(d)).join("")}"`}`),this._logService.logLevel===0&&this._logService.trace("parsing data (codes)",typeof t=="string"?t.split("").map(d=>d.charCodeAt(0)):t),this._parseBuffer.length<t.length&&this._parseBuffer.length<Ka&&(this._parseBuffer=new Uint32Array(Math.min(t.length,Ka))),o||this._dirtyRowTracker.clearRange(),t.length>Ka)for(let d=a;d<t.length;d+=Ka){let g=d+Ka<t.length?d+Ka:t.length,m=typeof t=="string"?this._stringDecoder.decode(t.substring(d,g),this._parseBuffer):this._utf8Decoder.decode(t.subarray(d,g),this._parseBuffer);if(n=this._parser.parse(this._parseBuffer,m))return this._preserveStack(s,r,m,d),this._logSlowResolvingAsync(n),n}else if(!o){let d=typeof t=="string"?this._stringDecoder.decode(t,this._parseBuffer):this._utf8Decoder.decode(t,this._parseBuffer);if(n=this._parser.parse(this._parseBuffer,d))return this._preserveStack(s,r,d,0),this._logSlowResolvingAsync(n),n}(this._activeBuffer.x!==s||this._activeBuffer.y!==r)&&this._onCursorMove.fire();let c=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),h=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);h<this._bufferService.rows&&this._onRequestRefreshRows.fire({start:Math.min(h,this._bufferService.rows-1),end:Math.min(c,this._bufferService.rows-1)})}print(t,e,n){let s,r,a=this._charsetService.charset,o=this._optionsService.rawOptions.screenReaderMode,c=this._bufferService.cols,h=this._coreService.decPrivateModes.wraparound,d=this._coreService.modes.insertMode,g=this._curAttrData,m=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&n-e>0&&m.getWidth(this._activeBuffer.x-1)===2&&m.setCellFromCodepoint(this._activeBuffer.x-1,0,1,g);let v=this._parser.precedingJoinState;for(let y=e;y<n;++y){if(s=t[y],s<127&&a){let k=a[String.fromCharCode(s)];k&&(s=k.charCodeAt(0))}let _=this._unicodeService.charProperties(s,v);r=Kl.extractWidth(_);let w=Kl.extractShouldJoin(_),S=w?Kl.extractWidth(v):0;if(v=_,o&&this._onA11yChar.fire(Ga(s)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+r-S>c){if(h){let k=m,C=this._activeBuffer.x-S;for(this._activeBuffer.x=S,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),m=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),S>0&&m instanceof yd&&m.copyCellsFrom(k,C,0,S,!1);C<c;)k.setCellFromCodepoint(C++,0,1,g)}else if(this._activeBuffer.x=c-1,r===2)continue}if(w&&this._activeBuffer.x){let k=m.getWidth(this._activeBuffer.x-1)?1:2;m.addCodepointToCell(this._activeBuffer.x-k,s,r);for(let C=r-S;--C>=0;)m.setCellFromCodepoint(this._activeBuffer.x++,0,0,g);continue}if(d&&(m.insertCells(this._activeBuffer.x,r-S,this._activeBuffer.getNullCell(g)),m.getWidth(c-1)===2&&m.setCellFromCodepoint(c-1,0,1,g)),m.setCellFromCodepoint(this._activeBuffer.x++,s,r,g),r>0)for(;--r;)m.setCellFromCodepoint(this._activeBuffer.x++,0,0,g)}this._parser.precedingJoinState=v,this._activeBuffer.x<c&&n-e>0&&m.getWidth(this._activeBuffer.x)===0&&!m.hasContent(this._activeBuffer.x)&&m.setCellFromCodepoint(this._activeBuffer.x,0,1,g),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(t,e){return t.final==="t"&&!t.prefix&&!t.intermediates?this._parser.registerCsiHandler(t,n=>Tj(n.params[0],this._optionsService.rawOptions.windowOptions)?e(n):!0):this._parser.registerCsiHandler(t,e)}registerDcsHandler(t,e){return this._parser.registerDcsHandler(t,new Aj(e))}registerEscHandler(t,e){return this._parser.registerEscHandler(t,e)}registerOscHandler(t,e){return this._parser.registerOscHandler(t,new tr(e))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);t.hasWidth(this._activeBuffer.x)&&!t.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-t),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(t=this._bufferService.cols-1){this._activeBuffer.x=Math.min(t,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(t,e){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=t,this._activeBuffer.y=this._activeBuffer.scrollTop+e):(this._activeBuffer.x=t,this._activeBuffer.y=e),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(t,e){this._restrictCursor(),this._setCursor(this._activeBuffer.x+t,this._activeBuffer.y+e)}cursorUp(t){let e=this._activeBuffer.y-this._activeBuffer.scrollTop;return e>=0?this._moveCursor(0,-Math.min(e,t.params[0]||1)):this._moveCursor(0,-(t.params[0]||1)),!0}cursorDown(t){let e=this._activeBuffer.scrollBottom-this._activeBuffer.y;return e>=0?this._moveCursor(0,Math.min(e,t.params[0]||1)):this._moveCursor(0,t.params[0]||1),!0}cursorForward(t){return this._moveCursor(t.params[0]||1,0),!0}cursorBackward(t){return this._moveCursor(-(t.params[0]||1),0),!0}cursorNextLine(t){return this.cursorDown(t),this._activeBuffer.x=0,!0}cursorPrecedingLine(t){return this.cursorUp(t),this._activeBuffer.x=0,!0}cursorCharAbsolute(t){return this._setCursor((t.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(t){return this._setCursor(t.length>=2?(t.params[1]||1)-1:0,(t.params[0]||1)-1),!0}charPosAbsolute(t){return this._setCursor((t.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(t){return this._moveCursor(t.params[0]||1,0),!0}linePosAbsolute(t){return this._setCursor(this._activeBuffer.x,(t.params[0]||1)-1),!0}vPositionRelative(t){return this._moveCursor(0,t.params[0]||1),!0}hVPosition(t){return this.cursorPosition(t),!0}tabClear(t){let e=t.params[0];return e===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:e===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(t){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let e=t.params[0]||1;for(;e--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(t){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let e=t.params[0]||1;for(;e--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(t){let e=t.params[0];return e===1&&(this._curAttrData.bg|=536870912),(e===2||e===0)&&(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(t,e,n,s=!1,r=!1){let a=this._activeBuffer.lines.get(this._activeBuffer.ybase+t);a.replaceCells(e,n,this._activeBuffer.getNullCell(this._eraseAttrData()),r),s&&(a.isWrapped=!1)}_resetBufferLine(t,e=!1){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+t);n&&(n.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),e),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+t),n.isWrapped=!1)}eraseInDisplay(t,e=!1){this._restrictCursor(this._bufferService.cols);let n;switch(t.params[0]){case 0:for(n=this._activeBuffer.y,this._dirtyRowTracker.markDirty(n),this._eraseInBufferLine(n++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,e);n<this._bufferService.rows;n++)this._resetBufferLine(n,e);this._dirtyRowTracker.markDirty(n);break;case 1:for(n=this._activeBuffer.y,this._dirtyRowTracker.markDirty(n),this._eraseInBufferLine(n,0,this._activeBuffer.x+1,!0,e),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(n+1).isWrapped=!1);n--;)this._resetBufferLine(n,e);this._dirtyRowTracker.markDirty(0);break;case 2:if(this._optionsService.rawOptions.scrollOnEraseInDisplay){for(n=this._bufferService.rows,this._dirtyRowTracker.markRangeDirty(0,n-1);n--&&!this._activeBuffer.lines.get(this._activeBuffer.ybase+n)?.getTrimmedLength(););for(;n>=0;n--)this._bufferService.scroll(this._eraseAttrData())}else{for(n=this._bufferService.rows,this._dirtyRowTracker.markDirty(n-1);n--;)this._resetBufferLine(n,e);this._dirtyRowTracker.markDirty(0)}break;case 3:let s=this._activeBuffer.lines.length-this._bufferService.rows;s>0&&(this._activeBuffer.lines.trimStart(s),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-s,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-s,0),this._onScroll.fire(0));break}return!0}eraseInLine(t,e=!1){switch(this._restrictCursor(this._bufferService.cols),t.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,e);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,e);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,e);break}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(t){this._restrictCursor();let e=t.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let n=this._activeBuffer.ybase+this._activeBuffer.y,s=this._bufferService.rows-1-this._activeBuffer.scrollBottom,r=this._bufferService.rows-1+this._activeBuffer.ybase-s+1;for(;e--;)this._activeBuffer.lines.splice(r-1,1),this._activeBuffer.lines.splice(n,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(t){this._restrictCursor();let e=t.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let n=this._activeBuffer.ybase+this._activeBuffer.y,s;for(s=this._bufferService.rows-1-this._activeBuffer.scrollBottom,s=this._bufferService.rows-1+this._activeBuffer.ybase-s;e--;)this._activeBuffer.lines.splice(n,1),this._activeBuffer.lines.splice(s,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(t){this._restrictCursor();let e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return e&&(e.insertCells(this._activeBuffer.x,t.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(t){this._restrictCursor();let e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return e&&(e.deleteCells(this._activeBuffer.x,t.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(t){let e=t.params[0]||1;for(;e--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(t){let e=t.params[0]||1;for(;e--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(Sn));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(t){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let e=t.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);s.deleteCells(0,e,this._activeBuffer.getNullCell(this._eraseAttrData())),s.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(t){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let e=t.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);s.insertCells(0,e,this._activeBuffer.getNullCell(this._eraseAttrData())),s.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(t){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let e=t.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);s.insertCells(this._activeBuffer.x,e,this._activeBuffer.getNullCell(this._eraseAttrData())),s.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(t){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let e=t.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);s.deleteCells(this._activeBuffer.x,e,this._activeBuffer.getNullCell(this._eraseAttrData())),s.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(t){this._restrictCursor();let e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return e&&(e.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(t.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(t){let e=this._parser.precedingJoinState;if(!e)return!0;let n=t.params[0]||1,s=Kl.extractWidth(e),r=this._activeBuffer.x-s,a=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(r),o=new Uint32Array(a.length*n),c=0;for(let d=0;d<a.length;){let g=a.codePointAt(d)||0;o[c++]=g,d+=g>65535?2:1}let h=c;for(let d=1;d<n;++d)o.copyWithin(h,0,c),h+=c;return this.print(o,0,h),!0}sendDeviceAttributesPrimary(t){return t.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(ve.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(ve.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(t){return t.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(ve.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(ve.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(t.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(ve.ESC+"[>83;40003;0c")),!0}_is(t){return(this._optionsService.rawOptions.termName+"").indexOf(t)===0}setMode(t){for(let e=0;e<t.length;e++)switch(t.params[e]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0;break}return!0}setModePrivate(t){for(let e=0;e<t.length;e++)switch(t.params[e]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,zl),this._charsetService.setgCharset(1,zl),this._charsetService.setgCharset(2,zl),this._charsetService.setgCharset(3,zl);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!0;break}return!0}resetMode(t){for(let e=0;e<t.length;e++)switch(t.params[e]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1;break}return!0}resetModePrivate(t){for(let e=0;e<t.length;e++)switch(t.params[e]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),t.params[e]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!1,this._onRequestRefreshRows.fire(void 0);break}return!0}requestMode(t,e){let n;(w=>(w[w.NOT_RECOGNIZED=0]="NOT_RECOGNIZED",w[w.SET=1]="SET",w[w.RESET=2]="RESET",w[w.PERMANENTLY_SET=3]="PERMANENTLY_SET",w[w.PERMANENTLY_RESET=4]="PERMANENTLY_RESET"))(n||={});let s=this._coreService.decPrivateModes,{activeProtocol:r,activeEncoding:a}=this._coreMouseService,o=this._coreService,{buffers:c,cols:h}=this._bufferService,{active:d,alt:g}=c,m=this._optionsService.rawOptions,v=(w,S)=>(o.triggerDataEvent(`${ve.ESC}[${e?"":"?"}${w};${S}$y`),!0),y=w=>w?1:2,_=t.params[0];return e?_===2?v(_,4):_===4?v(_,y(o.modes.insertMode)):_===12?v(_,3):_===20?v(_,y(m.convertEol)):v(_,0):_===1?v(_,y(s.applicationCursorKeys)):_===3?v(_,m.windowOptions.setWinLines?h===80?2:h===132?1:0:0):_===6?v(_,y(s.origin)):_===7?v(_,y(s.wraparound)):_===8?v(_,3):_===9?v(_,y(r==="X10")):_===12?v(_,y(m.cursorBlink)):_===25?v(_,y(!o.isCursorHidden)):_===45?v(_,y(s.reverseWraparound)):_===66?v(_,y(s.applicationKeypad)):_===67?v(_,4):_===1e3?v(_,y(r==="VT200")):_===1002?v(_,y(r==="DRAG")):_===1003?v(_,y(r==="ANY")):_===1004?v(_,y(s.sendFocus)):_===1005?v(_,4):_===1006?v(_,y(a==="SGR")):_===1015?v(_,4):_===1016?v(_,y(a==="SGR_PIXELS")):_===1048?v(_,1):_===47||_===1047||_===1049?v(_,y(d===g)):_===2004?v(_,y(s.bracketedPasteMode)):_===2026?v(_,y(s.synchronizedOutput)):v(_,0)}_updateAttrColor(t,e,n,s,r){return e===2?(t|=50331648,t&=-16777216,t|=Pf.fromColorRGB([n,s,r])):e===5&&(t&=-50331904,t|=33554432|n&255),t}_extractColor(t,e,n){let s=[0,0,-1,0,0,0],r=0,a=0;do{if(s[a+r]=t.params[e+a],t.hasSubParams(e+a)){let o=t.getSubParams(e+a),c=0;do s[1]===5&&(r=1),s[a+c+1+r]=o[c];while(++c<o.length&&c+a+1+r<s.length);break}if(s[1]===5&&a+r>=2||s[1]===2&&a+r>=5)break;s[1]&&(r=1)}while(++a+e<t.length&&a+r<s.length);for(let o=2;o<s.length;++o)s[o]===-1&&(s[o]=0);switch(s[0]){case 38:n.fg=this._updateAttrColor(n.fg,s[1],s[3],s[4],s[5]);break;case 48:n.bg=this._updateAttrColor(n.bg,s[1],s[3],s[4],s[5]);break;case 58:n.extended=n.extended.clone(),n.extended.underlineColor=this._updateAttrColor(n.extended.underlineColor,s[1],s[3],s[4],s[5])}return a}_processUnderline(t,e){e.extended=e.extended.clone(),(!~t||t>5)&&(t=1),e.extended.underlineStyle=t,e.fg|=268435456,t===0&&(e.fg&=-268435457),e.updateExtended()}_processSGR0(t){t.fg=Sn.fg,t.bg=Sn.bg,t.extended=t.extended.clone(),t.extended.underlineStyle=0,t.extended.underlineColor&=-67108864,t.updateExtended()}charAttributes(t){if(t.length===1&&t.params[0]===0)return this._processSGR0(this._curAttrData),!0;let e=t.length,n,s=this._curAttrData;for(let r=0;r<e;r++)n=t.params[r],n>=30&&n<=37?(s.fg&=-50331904,s.fg|=16777216|n-30):n>=40&&n<=47?(s.bg&=-50331904,s.bg|=16777216|n-40):n>=90&&n<=97?(s.fg&=-50331904,s.fg|=16777216|n-90|8):n>=100&&n<=107?(s.bg&=-50331904,s.bg|=16777216|n-100|8):n===0?this._processSGR0(s):n===1?s.fg|=134217728:n===3?s.bg|=67108864:n===4?(s.fg|=268435456,this._processUnderline(t.hasSubParams(r)?t.getSubParams(r)[0]:1,s)):n===5?s.fg|=536870912:n===7?s.fg|=67108864:n===8?s.fg|=1073741824:n===9?s.fg|=2147483648:n===2?s.bg|=134217728:n===21?this._processUnderline(2,s):n===22?(s.fg&=-134217729,s.bg&=-134217729):n===23?s.bg&=-67108865:n===24?(s.fg&=-268435457,this._processUnderline(0,s)):n===25?s.fg&=-536870913:n===27?s.fg&=-67108865:n===28?s.fg&=-1073741825:n===29?s.fg&=2147483647:n===39?(s.fg&=-67108864,s.fg|=Sn.fg&16777215):n===49?(s.bg&=-67108864,s.bg|=Sn.bg&16777215):n===38||n===48||n===58?r+=this._extractColor(t,r,s):n===53?s.bg|=1073741824:n===55?s.bg&=-1073741825:n===59?(s.extended=s.extended.clone(),s.extended.underlineColor=-1,s.updateExtended()):n===100?(s.fg&=-67108864,s.fg|=Sn.fg&16777215,s.bg&=-67108864,s.bg|=Sn.bg&16777215):this._logService.debug("Unknown SGR attribute: %d.",n);return!0}deviceStatus(t){switch(t.params[0]){case 5:this._coreService.triggerDataEvent(`${ve.ESC}[0n`);break;case 6:let e=this._activeBuffer.y+1,n=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${ve.ESC}[${e};${n}R`);break}return!0}deviceStatusPrivate(t){if(t.params[0]===6){let e=this._activeBuffer.y+1,n=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${ve.ESC}[?${e};${n}R`)}return!0}softReset(t){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=Sn.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(t){let e=t.length===0?1:t.params[0];if(e===0)this._coreService.decPrivateModes.cursorStyle=void 0,this._coreService.decPrivateModes.cursorBlink=void 0;else{switch(e){case 1:case 2:this._coreService.decPrivateModes.cursorStyle="block";break;case 3:case 4:this._coreService.decPrivateModes.cursorStyle="underline";break;case 5:case 6:this._coreService.decPrivateModes.cursorStyle="bar";break}let n=e%2===1;this._coreService.decPrivateModes.cursorBlink=n}return!0}setScrollRegion(t){let e=t.params[0]||1,n;return(t.length<2||(n=t.params[1])>this._bufferService.rows||n===0)&&(n=this._bufferService.rows),n>e&&(this._activeBuffer.scrollTop=e-1,this._activeBuffer.scrollBottom=n-1,this._setCursor(0,0)),!0}windowOptions(t){if(!Tj(t.params[0],this._optionsService.rawOptions.windowOptions))return!0;let e=t.length>1?t.params[1]:0;switch(t.params[0]){case 14:e!==2&&this._onRequestWindowsOptionsReport.fire(0);break;case 16:this._onRequestWindowsOptionsReport.fire(1);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${ve.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:(e===0||e===2)&&(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>jj&&this._windowTitleStack.shift()),(e===0||e===1)&&(this._iconNameStack.push(this._iconName),this._iconNameStack.length>jj&&this._iconNameStack.shift());break;case 23:(e===0||e===2)&&this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),(e===0||e===1)&&this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop());break}return!0}saveCursor(t){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(t){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(t){return this._windowTitle=t,this._onTitleChange.fire(t),!0}setIconName(t){return this._iconName=t,!0}setOrReportIndexedColor(t){let e=[],n=t.split(";");for(;n.length>1;){let s=n.shift(),r=n.shift();if(/^\d+$/.exec(s)){let a=parseInt(s);if(Bj(a))if(r==="?")e.push({type:0,index:a});else{let o=Ej(r);o&&e.push({type:1,index:a,color:o})}}}return e.length&&this._onColor.fire(e),!0}setHyperlink(t){let e=t.indexOf(";");if(e===-1)return!0;let n=t.slice(0,e).trim(),s=t.slice(e+1);return s?this._createHyperlink(n,s):n.trim()?!1:this._finishHyperlink()}_createHyperlink(t,e){this._getCurrentLinkId()&&this._finishHyperlink();let n=t.split(":"),s,r=n.findIndex(a=>a.startsWith("id="));return r!==-1&&(s=n[r].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:s,uri:e}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(t,e){let n=t.split(";");for(let s=0;s<n.length&&!(e>=this._specialColors.length);++s,++e)if(n[s]==="?")this._onColor.fire([{type:0,index:this._specialColors[e]}]);else{let r=Ej(n[s]);r&&this._onColor.fire([{type:1,index:this._specialColors[e],color:r}])}return!0}setOrReportFgColor(t){return this._setOrReportSpecialColor(t,0)}setOrReportBgColor(t){return this._setOrReportSpecialColor(t,1)}setOrReportCursorColor(t){return this._setOrReportSpecialColor(t,2)}restoreIndexedColor(t){if(!t)return this._onColor.fire([{type:2}]),!0;let e=[],n=t.split(";");for(let s=0;s<n.length;++s)if(/^\d+$/.exec(n[s])){let r=parseInt(n[s]);Bj(r)&&e.push({type:2,index:r})}return e.length&&this._onColor.fire(e),!0}restoreFgColor(t){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(t){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(t){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,zl),!0}selectCharset(t){return t.length!==2?(this.selectDefaultCharset(),!0):(t[0]==="/"||this._charsetService.setgCharset(jZ[t[0]],Dn[t[1]]||zl),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let t=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,t,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=Sn.clone(),this._eraseAttrDataInternal=Sn.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=this._curAttrData.bg&67108863,this._eraseAttrDataInternal}setgLevel(t){return this._charsetService.setgLevel(t),!0}screenAlignmentPattern(){let t=new Dr;t.content=1<<22|69,t.fg=this._curAttrData.fg,t.bg=this._curAttrData.bg,this._setCursor(0,0);for(let e=0;e<this._bufferService.rows;++e){let n=this._activeBuffer.ybase+this._activeBuffer.y+e,s=this._activeBuffer.lines.get(n);s&&(s.fill(t),s.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(t,e){let n=o=>(this._coreService.triggerDataEvent(`${ve.ESC}${o}${ve.ESC}\\`),!0),s=this._bufferService.buffer,r=this._optionsService.rawOptions;return n(t==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:t==='"p'?'P1$r61;1"p':t==="r"?`P1$r${s.scrollTop+1};${s.scrollBottom+1}r`:t==="m"?"P1$r0m":t===" q"?`P1$r${{block:2,underline:4,bar:6}[r.cursorStyle]-(r.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(t,e){this._dirtyRowTracker.markRangeDirty(t,e)}},Jw=class{constructor(t){this._bufferService=t,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(t){t<this.start?this.start=t:t>this.end&&(this.end=t)}markRangeDirty(t,e){t>e&&(Oj=t,t=e,e=Oj),t<this.start&&(this.start=t),e>this.end&&(this.end=e)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};Jw=hn([Le(0,Cs)],Jw);function Bj(t){return 0<=t&&t<256}var RZ=5e7,Mj=12,OZ=50,BZ=class extends vt{constructor(t){super(),this._action=t,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this._register(new Ee),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(t,e){if(e!==void 0&&this._syncCalls>e){this._syncCalls=0;return}if(this._pendingData+=t.length,this._writeBuffer.push(t),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;this._isSyncWriting=!0;let n;for(;n=this._writeBuffer.shift();){this._action(n);let s=this._callbacks.shift();s&&s()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(t,e){if(this._pendingData>RZ)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput){this._didUserInput=!1,this._pendingData+=t.length,this._writeBuffer.push(t),this._callbacks.push(e),this._innerWrite();return}setTimeout(()=>this._innerWrite())}this._pendingData+=t.length,this._writeBuffer.push(t),this._callbacks.push(e)}_innerWrite(t=0,e=!0){let n=t||performance.now();for(;this._writeBuffer.length>this._bufferOffset;){let s=this._writeBuffer[this._bufferOffset],r=this._action(s,e);if(r){let o=c=>performance.now()-n>=Mj?setTimeout(()=>this._innerWrite(0,c)):this._innerWrite(n,c);r.catch(c=>(queueMicrotask(()=>{throw c}),Promise.resolve(!1))).then(o);return}let a=this._callbacks[this._bufferOffset];if(a&&a(),this._bufferOffset++,this._pendingData-=s.length,performance.now()-n>=Mj)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>OZ&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}},Qw=class{constructor(t){this._bufferService=t,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(t){let e=this._bufferService.buffer;if(t.id===void 0){let c=e.addMarker(e.ybase+e.y),h={data:t,id:this._nextId++,lines:[c]};return c.onDispose(()=>this._removeMarkerFromLink(h,c)),this._dataByLinkId.set(h.id,h),h.id}let n=t,s=this._getEntryIdKey(n),r=this._entriesWithId.get(s);if(r)return this.addLineToLink(r.id,e.ybase+e.y),r.id;let a=e.addMarker(e.ybase+e.y),o={id:this._nextId++,key:this._getEntryIdKey(n),data:n,lines:[a]};return a.onDispose(()=>this._removeMarkerFromLink(o,a)),this._entriesWithId.set(o.key,o),this._dataByLinkId.set(o.id,o),o.id}addLineToLink(t,e){let n=this._dataByLinkId.get(t);if(n&&n.lines.every(s=>s.line!==e)){let s=this._bufferService.buffer.addMarker(e);n.lines.push(s),s.onDispose(()=>this._removeMarkerFromLink(n,s))}}getLinkData(t){return this._dataByLinkId.get(t)?.data}_getEntryIdKey(t){return`${t.id};;${t.uri}`}_removeMarkerFromLink(t,e){let n=t.lines.indexOf(e);n!==-1&&(t.lines.splice(n,1),t.lines.length===0&&(t.data.id!==void 0&&this._entriesWithId.delete(t.key),this._dataByLinkId.delete(t.id)))}};Qw=hn([Le(0,Cs)],Qw);var Dj=!1,MZ=class extends vt{constructor(t){super(),this._windowsWrappingHeuristics=this._register(new au),this._onBinary=this._register(new Ee),this.onBinary=this._onBinary.event,this._onData=this._register(new Ee),this.onData=this._onData.event,this._onLineFeed=this._register(new Ee),this.onLineFeed=this._onLineFeed.event,this._onResize=this._register(new Ee),this.onResize=this._onResize.event,this._onWriteParsed=this._register(new Ee),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this._register(new Ee),this._instantiationService=new rZ,this.optionsService=this._register(new pZ(t)),this._instantiationService.setService(Ns,this.optionsService),this._bufferService=this._register(this._instantiationService.createInstance(Ww)),this._instantiationService.setService(Cs,this._bufferService),this._logService=this._register(this._instantiationService.createInstance(Kw)),this._instantiationService.setService(fM,this._logService),this.coreService=this._register(this._instantiationService.createInstance(Gw)),this._instantiationService.setService(Ao,this.coreService),this.coreMouseService=this._register(this._instantiationService.createInstance(Yw)),this._instantiationService.setService(dM,this.coreMouseService),this.unicodeService=this._register(this._instantiationService.createInstance(Kl)),this._instantiationService.setService(eJ,this.unicodeService),this._charsetService=this._instantiationService.createInstance(bZ),this._instantiationService.setService(ZX,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(Qw),this._instantiationService.setService(pM,this._oscLinkService),this._inputHandler=this._register(new TZ(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this._register(ts.forward(this._inputHandler.onLineFeed,this._onLineFeed)),this._register(this._inputHandler),this._register(ts.forward(this._bufferService.onResize,this._onResize)),this._register(ts.forward(this.coreService.onData,this._onData)),this._register(ts.forward(this.coreService.onBinary,this._onBinary)),this._register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom(!0))),this._register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this._register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this._register(this._bufferService.onScroll(()=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this._register(new BZ((e,n)=>this._inputHandler.parse(e,n))),this._register(ts.forward(this._writeBuffer.onWriteParsed,this._onWriteParsed))}get onScroll(){return this._onScrollApi||(this._onScrollApi=this._register(new Ee),this._onScroll.event(t=>{this._onScrollApi?.fire(t.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(t){for(let e in t)this.optionsService.options[e]=t[e]}write(t,e){this._writeBuffer.write(t,e)}writeSync(t,e){this._logService.logLevel<=3&&!Dj&&(this._logService.warn("writeSync is unreliable and will be removed soon."),Dj=!0),this._writeBuffer.writeSync(t,e)}input(t,e=!0){this.coreService.triggerDataEvent(t,e)}resize(t,e){isNaN(t)||isNaN(e)||(t=Math.max(t,KM),e=Math.max(e,WM),this._bufferService.resize(t,e))}scroll(t,e=!1){this._bufferService.scroll(t,e)}scrollLines(t,e){this._bufferService.scrollLines(t,e)}scrollPages(t){this.scrollLines(t*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(t){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(t){let e=t-this._bufferService.buffer.ydisp;e!==0&&this.scrollLines(e)}registerEscHandler(t,e){return this._inputHandler.registerEscHandler(t,e)}registerDcsHandler(t,e){return this._inputHandler.registerDcsHandler(t,e)}registerCsiHandler(t,e){return this._inputHandler.registerCsiHandler(t,e)}registerOscHandler(t,e){return this._inputHandler.registerOscHandler(t,e)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let t=!1,e=this.optionsService.rawOptions.windowsPty;e&&e.buildNumber!==void 0&&e.buildNumber!==void 0?t=e.backend==="conpty"&&e.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(t=!0),t?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let t=[];t.push(this.onLineFeed(Nj.bind(null,this._bufferService))),t.push(this.registerCsiHandler({final:"H"},()=>(Nj(this._bufferService),!1))),this._windowsWrappingHeuristics.value=nn(()=>{for(let e of t)e.dispose()})}}},DZ={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};function LZ(t,e,n,s){let r={type:0,cancel:!1,key:void 0},a=(t.shiftKey?1:0)|(t.altKey?2:0)|(t.ctrlKey?4:0)|(t.metaKey?8:0);switch(t.keyCode){case 0:t.key==="UIKeyInputUpArrow"?e?r.key=ve.ESC+"OA":r.key=ve.ESC+"[A":t.key==="UIKeyInputLeftArrow"?e?r.key=ve.ESC+"OD":r.key=ve.ESC+"[D":t.key==="UIKeyInputRightArrow"?e?r.key=ve.ESC+"OC":r.key=ve.ESC+"[C":t.key==="UIKeyInputDownArrow"&&(e?r.key=ve.ESC+"OB":r.key=ve.ESC+"[B");break;case 8:r.key=t.ctrlKey?"\b":ve.DEL,t.altKey&&(r.key=ve.ESC+r.key);break;case 9:if(t.shiftKey){r.key=ve.ESC+"[Z";break}r.key=ve.HT,r.cancel=!0;break;case 13:r.key=t.altKey?ve.ESC+ve.CR:ve.CR,r.cancel=!0;break;case 27:r.key=ve.ESC,t.altKey&&(r.key=ve.ESC+ve.ESC),r.cancel=!0;break;case 37:if(t.metaKey)break;a?r.key=ve.ESC+"[1;"+(a+1)+"D":e?r.key=ve.ESC+"OD":r.key=ve.ESC+"[D";break;case 39:if(t.metaKey)break;a?r.key=ve.ESC+"[1;"+(a+1)+"C":e?r.key=ve.ESC+"OC":r.key=ve.ESC+"[C";break;case 38:if(t.metaKey)break;a?r.key=ve.ESC+"[1;"+(a+1)+"A":e?r.key=ve.ESC+"OA":r.key=ve.ESC+"[A";break;case 40:if(t.metaKey)break;a?r.key=ve.ESC+"[1;"+(a+1)+"B":e?r.key=ve.ESC+"OB":r.key=ve.ESC+"[B";break;case 45:!t.shiftKey&&!t.ctrlKey&&(r.key=ve.ESC+"[2~");break;case 46:a?r.key=ve.ESC+"[3;"+(a+1)+"~":r.key=ve.ESC+"[3~";break;case 36:a?r.key=ve.ESC+"[1;"+(a+1)+"H":e?r.key=ve.ESC+"OH":r.key=ve.ESC+"[H";break;case 35:a?r.key=ve.ESC+"[1;"+(a+1)+"F":e?r.key=ve.ESC+"OF":r.key=ve.ESC+"[F";break;case 33:t.shiftKey?r.type=2:t.ctrlKey?r.key=ve.ESC+"[5;"+(a+1)+"~":r.key=ve.ESC+"[5~";break;case 34:t.shiftKey?r.type=3:t.ctrlKey?r.key=ve.ESC+"[6;"+(a+1)+"~":r.key=ve.ESC+"[6~";break;case 112:a?r.key=ve.ESC+"[1;"+(a+1)+"P":r.key=ve.ESC+"OP";break;case 113:a?r.key=ve.ESC+"[1;"+(a+1)+"Q":r.key=ve.ESC+"OQ";break;case 114:a?r.key=ve.ESC+"[1;"+(a+1)+"R":r.key=ve.ESC+"OR";break;case 115:a?r.key=ve.ESC+"[1;"+(a+1)+"S":r.key=ve.ESC+"OS";break;case 116:a?r.key=ve.ESC+"[15;"+(a+1)+"~":r.key=ve.ESC+"[15~";break;case 117:a?r.key=ve.ESC+"[17;"+(a+1)+"~":r.key=ve.ESC+"[17~";break;case 118:a?r.key=ve.ESC+"[18;"+(a+1)+"~":r.key=ve.ESC+"[18~";break;case 119:a?r.key=ve.ESC+"[19;"+(a+1)+"~":r.key=ve.ESC+"[19~";break;case 120:a?r.key=ve.ESC+"[20;"+(a+1)+"~":r.key=ve.ESC+"[20~";break;case 121:a?r.key=ve.ESC+"[21;"+(a+1)+"~":r.key=ve.ESC+"[21~";break;case 122:a?r.key=ve.ESC+"[23;"+(a+1)+"~":r.key=ve.ESC+"[23~";break;case 123:a?r.key=ve.ESC+"[24;"+(a+1)+"~":r.key=ve.ESC+"[24~";break;default:if(t.ctrlKey&&!t.shiftKey&&!t.altKey&&!t.metaKey)t.keyCode>=65&&t.keyCode<=90?r.key=String.fromCharCode(t.keyCode-64):t.keyCode===32?r.key=ve.NUL:t.keyCode>=51&&t.keyCode<=55?r.key=String.fromCharCode(t.keyCode-51+27):t.keyCode===56?r.key=ve.DEL:t.keyCode===219?r.key=ve.ESC:t.keyCode===220?r.key=ve.FS:t.keyCode===221&&(r.key=ve.GS);else if((!n||s)&&t.altKey&&!t.metaKey){let o=DZ[t.keyCode]?.[t.shiftKey?1:0];if(o)r.key=ve.ESC+o;else if(t.keyCode>=65&&t.keyCode<=90){let c=t.ctrlKey?t.keyCode-64:t.keyCode+32,h=String.fromCharCode(c);t.shiftKey&&(h=h.toUpperCase()),r.key=ve.ESC+h}else if(t.keyCode===32)r.key=ve.ESC+(t.ctrlKey?ve.NUL:" ");else if(t.key==="Dead"&&t.code.startsWith("Key")){let c=t.code.slice(3,4);t.shiftKey||(c=c.toLowerCase()),r.key=ve.ESC+c,r.cancel=!0}}else n&&!t.altKey&&!t.ctrlKey&&!t.shiftKey&&t.metaKey?t.keyCode===65&&(r.type=1):t.key&&!t.ctrlKey&&!t.altKey&&!t.metaKey&&t.keyCode>=48&&t.key.length===1?r.key=t.key:t.key&&t.ctrlKey&&(t.key==="_"&&(r.key=ve.US),t.key==="@"&&(r.key=ve.NUL));break}return r}var pn=0,IZ=class{constructor(t){this._getKey=t,this._array=[],this._insertedValues=[],this._flushInsertedTask=new ug,this._isFlushingInserted=!1,this._deletedIndices=[],this._flushDeletedTask=new ug,this._isFlushingDeleted=!1}clear(){this._array.length=0,this._insertedValues.length=0,this._flushInsertedTask.clear(),this._isFlushingInserted=!1,this._deletedIndices.length=0,this._flushDeletedTask.clear(),this._isFlushingDeleted=!1}insert(t){this._flushCleanupDeleted(),this._insertedValues.length===0&&this._flushInsertedTask.enqueue(()=>this._flushInserted()),this._insertedValues.push(t)}_flushInserted(){let t=this._insertedValues.sort((r,a)=>this._getKey(r)-this._getKey(a)),e=0,n=0,s=new Array(this._array.length+this._insertedValues.length);for(let r=0;r<s.length;r++)n>=this._array.length||this._getKey(t[e])<=this._getKey(this._array[n])?(s[r]=t[e],e++):s[r]=this._array[n++];this._array=s,this._insertedValues.length=0}_flushCleanupInserted(){!this._isFlushingInserted&&this._insertedValues.length>0&&this._flushInsertedTask.flush()}delete(t){if(this._flushCleanupInserted(),this._array.length===0)return!1;let e=this._getKey(t);if(e===void 0||(pn=this._search(e),pn===-1)||this._getKey(this._array[pn])!==e)return!1;do if(this._array[pn]===t)return this._deletedIndices.length===0&&this._flushDeletedTask.enqueue(()=>this._flushDeleted()),this._deletedIndices.push(pn),!0;while(++pn<this._array.length&&this._getKey(this._array[pn])===e);return!1}_flushDeleted(){this._isFlushingDeleted=!0;let t=this._deletedIndices.sort((r,a)=>r-a),e=0,n=new Array(this._array.length-t.length),s=0;for(let r=0;r<this._array.length;r++)t[e]===r?e++:n[s++]=this._array[r];this._array=n,this._deletedIndices.length=0,this._isFlushingDeleted=!1}_flushCleanupDeleted(){!this._isFlushingDeleted&&this._deletedIndices.length>0&&this._flushDeletedTask.flush()}*getKeyIterator(t){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(pn=this._search(t),!(pn<0||pn>=this._array.length)&&this._getKey(this._array[pn])===t))do yield this._array[pn];while(++pn<this._array.length&&this._getKey(this._array[pn])===t)}forEachByKey(t,e){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(pn=this._search(t),!(pn<0||pn>=this._array.length)&&this._getKey(this._array[pn])===t))do e(this._array[pn]);while(++pn<this._array.length&&this._getKey(this._array[pn])===t)}values(){return this._flushCleanupInserted(),this._flushCleanupDeleted(),[...this._array].values()}_search(t){let e=0,n=this._array.length-1;for(;n>=e;){let s=e+n>>1,r=this._getKey(this._array[s]);if(r>t)n=s-1;else if(r<t)e=s+1;else{for(;s>0&&this._getKey(this._array[s-1])===t;)s--;return s}}return e}},ux=0,Lj=0,PZ=class extends vt{constructor(){super(),this._decorations=new IZ(t=>t?.marker.line),this._onDecorationRegistered=this._register(new Ee),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this._register(new Ee),this.onDecorationRemoved=this._onDecorationRemoved.event,this._register(nn(()=>this.reset()))}get decorations(){return this._decorations.values()}registerDecoration(t){if(t.marker.isDisposed)return;let e=new zZ(t);if(e){let n=e.marker.onDispose(()=>e.dispose()),s=e.onDispose(()=>{s.dispose(),e&&(this._decorations.delete(e)&&this._onDecorationRemoved.fire(e),n.dispose())});this._decorations.insert(e),this._onDecorationRegistered.fire(e)}return e}reset(){for(let t of this._decorations.values())t.dispose();this._decorations.clear()}*getDecorationsAtCell(t,e,n){let s=0,r=0;for(let a of this._decorations.getKeyIterator(e))s=a.options.x??0,r=s+(a.options.width??1),t>=s&&t<r&&(!n||(a.options.layer??"bottom")===n)&&(yield a)}forEachDecorationAtCell(t,e,n,s){this._decorations.forEachByKey(e,r=>{ux=r.options.x??0,Lj=ux+(r.options.width??1),t>=ux&&t<Lj&&(!n||(r.options.layer??"bottom")===n)&&s(r)})}},zZ=class extends al{constructor(t){super(),this.options=t,this.onRenderEmitter=this.add(new Ee),this.onRender=this.onRenderEmitter.event,this._onDispose=this.add(new Ee),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=t.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=ln.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=ln.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}dispose(){this._onDispose.fire(),super.dispose()}},$Z=1e3,HZ=class{constructor(t,e=$Z){this._renderCallback=t,this._debounceThresholdMS=e,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(t,e,n){this._rowCount=n,t=t!==void 0?t:0,e=e!==void 0?e:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,t):t,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,e):e;let s=performance.now();if(s-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=s,this._innerRefresh();else if(!this._additionalRefreshRequested){let r=s-this._lastRefreshMs,a=this._debounceThresholdMS-r;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=performance.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},a)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let t=Math.max(this._rowStart,0),e=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(t,e)}},Ij=20,hg=class extends vt{constructor(t,e,n,s){super(),this._terminal=t,this._coreBrowserService=n,this._renderService=s,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="";let r=this._coreBrowserService.mainDocument;this._accessibilityContainer=r.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=r.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let a=0;a<this._terminal.rows;a++)this._rowElements[a]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[a]);if(this._topBoundaryFocusListener=a=>this._handleBoundaryFocus(a,0),this._bottomBoundaryFocusListener=a=>this._handleBoundaryFocus(a,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=r.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this._register(new HZ(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this._register(this._terminal.onResize(a=>this._handleResize(a.rows))),this._register(this._terminal.onRender(a=>this._refreshRows(a.start,a.end))),this._register(this._terminal.onScroll(()=>this._refreshRows())),this._register(this._terminal.onA11yChar(a=>this._handleChar(a))),this._register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this._register(this._terminal.onA11yTab(a=>this._handleTab(a))),this._register(this._terminal.onKey(a=>this._handleKey(a.key))),this._register(this._terminal.onBlur(()=>this._clearLiveRegion())),this._register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._register(rt(r,"selectionchange",()=>this._handleSelectionChange())),this._register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRowsDimensions(),this._refreshRows(),this._register(nn(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(t){for(let e=0;e<t;e++)this._handleChar(" ")}_handleChar(t){this._liveRegionLineCount<Ij+1&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==t&&(this._charsToAnnounce+=t):this._charsToAnnounce+=t,t===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===Ij+1&&(this._liveRegion.textContent+=vw.get())))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(t){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(t)||this._charsToConsume.push(t)}_refreshRows(t,e){this._liveRegionDebouncer.refresh(t,e,this._terminal.rows)}_renderRows(t,e){let n=this._terminal.buffer,s=n.lines.length.toString();for(let r=t;r<=e;r++){let a=n.lines.get(n.ydisp+r),o=[],c=a?.translateToString(!0,void 0,void 0,o)||"",h=(n.ydisp+r+1).toString(),d=this._rowElements[r];d&&(c.length===0?(d.textContent="",this._rowColumns.set(d,[0,1])):(d.textContent=c,this._rowColumns.set(d,o)),d.setAttribute("aria-posinset",h),d.setAttribute("aria-setsize",s),this._alignRowWidth(d))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(t,e){let n=t.target,s=this._rowElements[e===0?1:this._rowElements.length-2],r=n.getAttribute("aria-posinset"),a=e===0?"1":`${this._terminal.buffer.lines.length}`;if(r===a||t.relatedTarget!==s)return;let o,c;if(e===0?(o=n,c=this._rowElements.pop(),this._rowContainer.removeChild(c)):(o=this._rowElements.shift(),c=n,this._rowContainer.removeChild(o)),o.removeEventListener("focus",this._topBoundaryFocusListener),c.removeEventListener("focus",this._bottomBoundaryFocusListener),e===0){let h=this._createAccessibilityTreeNode();this._rowElements.unshift(h),this._rowContainer.insertAdjacentElement("afterbegin",h)}else{let h=this._createAccessibilityTreeNode();this._rowElements.push(h),this._rowContainer.appendChild(h)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(e===0?-1:1),this._rowElements[e===0?1:this._rowElements.length-2].focus(),t.preventDefault(),t.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;let t=this._coreBrowserService.mainDocument.getSelection();if(!t)return;if(t.isCollapsed){this._rowContainer.contains(t.anchorNode)&&this._terminal.clearSelection();return}if(!t.anchorNode||!t.focusNode){console.error("anchorNode and/or focusNode are null");return}let e={node:t.anchorNode,offset:t.anchorOffset},n={node:t.focusNode,offset:t.focusOffset};if((e.node.compareDocumentPosition(n.node)&Node.DOCUMENT_POSITION_PRECEDING||e.node===n.node&&e.offset>n.offset)&&([e,n]=[n,e]),e.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(e={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(e.node))return;let s=this._rowElements.slice(-1)[0];if(n.node.compareDocumentPosition(s)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(n={node:s,offset:s.textContent?.length??0}),!this._rowContainer.contains(n.node))return;let r=({node:c,offset:h})=>{let d=c instanceof Text?c.parentNode:c,g=parseInt(d?.getAttribute("aria-posinset"),10)-1;if(isNaN(g))return console.warn("row is invalid. Race condition?"),null;let m=this._rowColumns.get(d);if(!m)return console.warn("columns is null. Race condition?"),null;let v=h<m.length?m[h]:m.slice(-1)[0]+1;return v>=this._terminal.cols&&(++g,v=0),{row:g,column:v}},a=r(e),o=r(n);if(!(!a||!o)){if(a.row>o.row||a.row===o.row&&a.column>=o.column)throw new Error("invalid range");this._terminal.select(a.column,a.row,(o.row-a.row)*this._terminal.cols-a.column+o.column)}}_handleResize(t){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let e=this._rowContainer.children.length;e<this._terminal.rows;e++)this._rowElements[e]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[e]);for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let t=this._coreBrowserService.mainDocument.createElement("div");return t.setAttribute("role","listitem"),t.tabIndex=-1,this._refreshRowDimensions(t),t}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){Object.assign(this._accessibilityContainer.style,{width:`${this._renderService.dimensions.css.canvas.width}px`,fontSize:`${this._terminal.options.fontSize}px`}),this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let t=0;t<this._terminal.rows;t++)this._refreshRowDimensions(this._rowElements[t]),this._alignRowWidth(this._rowElements[t])}}_refreshRowDimensions(t){t.style.height=`${this._renderService.dimensions.css.cell.height}px`}_alignRowWidth(t){t.style.transform="";let e=t.getBoundingClientRect().width,n=this._rowColumns.get(t)?.slice(-1)?.[0];if(!n)return;let s=n*this._renderService.dimensions.css.cell.width;t.style.transform=`scaleX(${s/e})`}};hg=hn([Le(1,Q2),Le(2,ma),Le(3,ga)],hg);var Zw=class extends vt{constructor(t,e,n,s,r){super(),this._element=t,this._mouseService=e,this._renderService=n,this._bufferService=s,this._linkProviderService=r,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this._register(new Ee),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this._register(new Ee),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this._register(nn(()=>{yo(this._linkCacheDisposables),this._linkCacheDisposables.length=0,this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this._register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this._register(rt(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this._register(rt(this._element,"mousemove",this._handleMouseMove.bind(this))),this._register(rt(this._element,"mousedown",this._handleMouseDown.bind(this))),this._register(rt(this._element,"mouseup",this._handleMouseUp.bind(this)))}get currentLink(){return this._currentLink}_handleMouseMove(t){this._lastMouseEvent=t;let e=this._positionFromMouseEvent(t,this._element,this._mouseService);if(!e)return;this._isMouseOut=!1;let n=t.composedPath();for(let s=0;s<n.length;s++){let r=n[s];if(r.classList.contains("xterm"))break;if(r.classList.contains("xterm-hover"))return}(!this._lastBufferCell||e.x!==this._lastBufferCell.x||e.y!==this._lastBufferCell.y)&&(this._handleHover(e),this._lastBufferCell=e)}_handleHover(t){if(this._activeLine!==t.y||this._wasResized){this._clearCurrentLink(),this._askForLink(t,!1),this._wasResized=!1;return}this._currentLink&&this._linkAtPosition(this._currentLink.link,t)||(this._clearCurrentLink(),this._askForLink(t,!0))}_askForLink(t,e){(!this._activeProviderReplies||!e)&&(this._activeProviderReplies?.forEach(s=>{s?.forEach(r=>{r.link.dispose&&r.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=t.y);let n=!1;for(let[s,r]of this._linkProviderService.linkProviders.entries())e?this._activeProviderReplies?.get(s)&&(n=this._checkLinkProviderResult(s,t,n)):r.provideLinks(t.y,a=>{if(this._isMouseOut)return;let o=a?.map(c=>({link:c}));this._activeProviderReplies?.set(s,o),n=this._checkLinkProviderResult(s,t,n),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(t.y,this._activeProviderReplies)})}_removeIntersectingLinks(t,e){let n=new Set;for(let s=0;s<e.size;s++){let r=e.get(s);if(r)for(let a=0;a<r.length;a++){let o=r[a],c=o.link.range.start.y<t?0:o.link.range.start.x,h=o.link.range.end.y>t?this._bufferService.cols:o.link.range.end.x;for(let d=c;d<=h;d++){if(n.has(d)){r.splice(a--,1);break}n.add(d)}}}}_checkLinkProviderResult(t,e,n){if(!this._activeProviderReplies)return n;let s=this._activeProviderReplies.get(t),r=!1;for(let a=0;a<t;a++)(!this._activeProviderReplies.has(a)||this._activeProviderReplies.get(a))&&(r=!0);if(!r&&s){let a=s.find(o=>this._linkAtPosition(o.link,e));a&&(n=!0,this._handleNewLink(a))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!n)for(let a=0;a<this._activeProviderReplies.size;a++){let o=this._activeProviderReplies.get(a)?.find(c=>this._linkAtPosition(c.link,e));if(o){n=!0,this._handleNewLink(o);break}}return n}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(t){if(!this._currentLink)return;let e=this._positionFromMouseEvent(t,this._element,this._mouseService);e&&this._mouseDownLink&&UZ(this._mouseDownLink.link,this._currentLink.link)&&this._linkAtPosition(this._currentLink.link,e)&&this._currentLink.link.activate(t,this._currentLink.link.text)}_clearCurrentLink(t,e){!this._currentLink||!this._lastMouseEvent||(!t||!e||this._currentLink.link.range.start.y>=t&&this._currentLink.link.range.end.y<=e)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,yo(this._linkCacheDisposables),this._linkCacheDisposables.length=0)}_handleNewLink(t){if(!this._lastMouseEvent)return;let e=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);e&&this._linkAtPosition(t.link,e)&&(this._currentLink=t,this._currentLink.state={decorations:{underline:t.link.decorations===void 0?!0:t.link.decorations.underline,pointerCursor:t.link.decorations===void 0?!0:t.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,t.link,this._lastMouseEvent),t.link.decorations={},Object.defineProperties(t.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:n=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==n&&(this._currentLink.state.decorations.pointerCursor=n,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",n))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:n=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==n&&(this._currentLink.state.decorations.underline=n,this._currentLink.state.isHovered&&this._fireUnderlineEvent(t.link,n))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(n=>{if(!this._currentLink)return;let s=n.start===0?0:n.start+1+this._bufferService.buffer.ydisp,r=this._bufferService.buffer.ydisp+1+n.end;if(this._currentLink.link.range.start.y>=s&&this._currentLink.link.range.end.y<=r&&(this._clearCurrentLink(s,r),this._lastMouseEvent)){let a=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);a&&this._askForLink(a,!1)}})))}_linkHover(t,e,n){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(e,!0),this._currentLink.state.decorations.pointerCursor&&t.classList.add("xterm-cursor-pointer")),e.hover&&e.hover(n,e.text)}_fireUnderlineEvent(t,e){let n=t.range,s=this._bufferService.buffer.ydisp,r=this._createLinkUnderlineEvent(n.start.x-1,n.start.y-s-1,n.end.x,n.end.y-s-1,void 0);(e?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(r)}_linkLeave(t,e,n){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(e,!1),this._currentLink.state.decorations.pointerCursor&&t.classList.remove("xterm-cursor-pointer")),e.leave&&e.leave(n,e.text)}_linkAtPosition(t,e){let n=t.range.start.y*this._bufferService.cols+t.range.start.x,s=t.range.end.y*this._bufferService.cols+t.range.end.x,r=e.y*this._bufferService.cols+e.x;return n<=r&&r<=s}_positionFromMouseEvent(t,e,n){let s=n.getCoords(t,e,this._bufferService.cols,this._bufferService.rows);if(s)return{x:s[0],y:s[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(t,e,n,s,r){return{x1:t,y1:e,x2:n,y2:s,cols:this._bufferService.cols,fg:r}}};Zw=hn([Le(1,Z2),Le(2,ga),Le(3,Cs),Le(4,gM)],Zw);function UZ(t,e){return t.text===e.text&&t.range.start.x===e.range.start.x&&t.range.start.y===e.range.start.y&&t.range.end.x===e.range.end.x&&t.range.end.y===e.range.end.y}var VZ=class extends MZ{constructor(t={}){super(t),this._linkifier=this._register(new au),this.browser=DM,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this._register(new au),this._onCursorMove=this._register(new Ee),this.onCursorMove=this._onCursorMove.event,this._onKey=this._register(new Ee),this.onKey=this._onKey.event,this._onRender=this._register(new Ee),this.onRender=this._onRender.event,this._onSelectionChange=this._register(new Ee),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this._register(new Ee),this.onTitleChange=this._onTitleChange.event,this._onBell=this._register(new Ee),this.onBell=this._onBell.event,this._onFocus=this._register(new Ee),this._onBlur=this._register(new Ee),this._onA11yCharEmitter=this._register(new Ee),this._onA11yTabEmitter=this._register(new Ee),this._onWillOpen=this._register(new Ee),this._setup(),this._decorationService=this._instantiationService.createInstance(PZ),this._instantiationService.setService(zf,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(OQ),this._instantiationService.setService(gM,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(xw)),this._register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this._register(this._inputHandler.onRequestRefreshRows(e=>this.refresh(e?.start??0,e?.end??this.rows-1))),this._register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this._register(this._inputHandler.onRequestReset(()=>this.reset())),this._register(this._inputHandler.onRequestWindowsOptionsReport(e=>this._reportWindowsOptions(e))),this._register(this._inputHandler.onColor(e=>this._handleColorEvent(e))),this._register(ts.forward(this._inputHandler.onCursorMove,this._onCursorMove)),this._register(ts.forward(this._inputHandler.onTitleChange,this._onTitleChange)),this._register(ts.forward(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this._register(ts.forward(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this._register(this._bufferService.onResize(e=>this._afterResize(e.cols,e.rows))),this._register(nn(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}get linkifier(){return this._linkifier.value}get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}_handleColorEvent(t){if(this._themeService)for(let e of t){let n,s="";switch(e.index){case 256:n="foreground",s="10";break;case 257:n="background",s="11";break;case 258:n="cursor",s="12";break;default:n="ansi",s="4;"+e.index}switch(e.type){case 0:let r=Jt.toColorRGB(n==="ansi"?this._themeService.colors.ansi[e.index]:this._themeService.colors[n]);this.coreService.triggerDataEvent(`${ve.ESC}]${s};${EZ(r)}${BM.ST}`);break;case 1:if(n==="ansi")this._themeService.modifyColors(a=>a.ansi[e.index]=kn.toColor(...e.color));else{let a=n;this._themeService.modifyColors(o=>o[a]=kn.toColor(...e.color))}break;case 2:this._themeService.restoreColor(e.index);break}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(t){t?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(hg,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(t){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(ve.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(ve.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let t=this.buffer.ybase+this.buffer.y,e=this.buffer.lines.get(t);if(!e)return;let n=Math.min(this.buffer.x,this.cols-1),s=this._renderService.dimensions.css.cell.height,r=e.getWidth(n),a=this._renderService.dimensions.css.cell.width*r,o=this.buffer.y*this._renderService.dimensions.css.cell.height,c=n*this._renderService.dimensions.css.cell.width;this.textarea.style.left=c+"px",this.textarea.style.top=o+"px",this.textarea.style.width=a+"px",this.textarea.style.height=s+"px",this.textarea.style.lineHeight=s+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this._register(rt(this.element,"copy",e=>{this.hasSelection()&&WX(e,this._selectionService)}));let t=e=>GX(e,this.textarea,this.coreService,this.optionsService);this._register(rt(this.textarea,"paste",t)),this._register(rt(this.element,"paste",t)),LM?this._register(rt(this.element,"mousedown",e=>{e.button===2&&W3(e,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this._register(rt(this.element,"contextmenu",e=>{W3(e,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),lk&&this._register(rt(this.element,"auxclick",e=>{e.button===1&&lM(e,this.textarea,this.screenElement)}))}_bindKeys(){this._register(rt(this.textarea,"keyup",t=>this._keyUp(t),!0)),this._register(rt(this.textarea,"keydown",t=>this._keyDown(t),!0)),this._register(rt(this.textarea,"keypress",t=>this._keyPress(t),!0)),this._register(rt(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this._register(rt(this.textarea,"compositionupdate",t=>this._compositionHelper.compositionupdate(t))),this._register(rt(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this._register(rt(this.textarea,"input",t=>this._inputEvent(t),!0)),this._register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(t){if(!t)throw new Error("Terminal requires a parent element.");if(t.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService){this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView);return}this._document=t.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),t.appendChild(this.element);let e=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),e.appendChild(this._viewportElement),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._register(rt(this.screenElement,"mousemove",r=>this.updateCursorStyle(r))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),e.appendChild(this.screenElement);let n=this.textarea=this._document.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",yw.get()),zM||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._register(this.optionsService.onSpecificOptionChange("disableStdin",()=>n.readOnly=this.optionsService.rawOptions.disableStdin)),this.textarea.readOnly=this.optionsService.rawOptions.disableStdin,this._coreBrowserService=this._register(this._instantiationService.createInstance(TQ,this.textarea,t.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(ma,this._coreBrowserService),this._register(rt(this.textarea,"focus",r=>this._handleTextAreaFocus(r))),this._register(rt(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(Hw,this._document,this._helperContainer),this._instantiationService.setService(Oy,this._charSizeService),this._themeService=this._instantiationService.createInstance(qw),this._instantiationService.setService(Eu,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(og),this._instantiationService.setService(mM,this._characterJoinerService),this._renderService=this._register(this._instantiationService.createInstance(Vw,this.rows,this.screenElement)),this._instantiationService.setService(ga,this._renderService),this._register(this._renderService.onRenderedViewportChange(r=>this._onRender.fire(r))),this.onResize(r=>this._renderService.resize(r.cols,r.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(Pw,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(Uw),this._instantiationService.setService(Z2,this._mouseService);let s=this._linkifier.value=this._register(this._instantiationService.createInstance(Zw,this.screenElement));this.element.appendChild(e);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this._register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this._register(this.onBlur(()=>this._renderService.handleBlur())),this._register(this.onFocus(()=>this._renderService.handleFocus())),this._viewport=this._register(this._instantiationService.createInstance(Lw,this.element,this.screenElement)),this._register(this._viewport.onRequestScrollLines(r=>{super.scrollLines(r,!1),this.refresh(0,this.rows-1)})),this._selectionService=this._register(this._instantiationService.createInstance(Fw,this.element,this.screenElement,s)),this._instantiationService.setService(nJ,this._selectionService),this._register(this._selectionService.onRequestScrollLines(r=>this.scrollLines(r.amount,r.suppressScrollEvent))),this._register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this._register(this._selectionService.onRequestRedraw(r=>this._renderService.handleSelectionChanged(r.start,r.end,r.columnSelectMode))),this._register(this._selectionService.onLinuxMouseSelection(r=>{this.textarea.value=r,this.textarea.focus(),this.textarea.select()})),this._register(ts.any(this._onScroll.event,this._inputHandler.onScroll)(()=>{this._selectionService.refresh(),this._viewport?.queueSync()})),this._register(this._instantiationService.createInstance(Iw,this.screenElement)),this._register(rt(this.element,"mousedown",r=>this._selectionService.handleMouseDown(r))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(hg,this)),this._register(this.optionsService.onSpecificOptionChange("screenReaderMode",r=>this._handleScreenReaderModeOptionChange(r))),this.options.overviewRuler.width&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(lg,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRuler",r=>{!this._overviewRulerRenderer&&r&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(lg,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance($w,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){let t=this,e=this.element;function n(a){let o=t._mouseService.getMouseReportCoords(a,t.screenElement);if(!o)return!1;let c,h;switch(a.overrideType||a.type){case"mousemove":h=32,a.buttons===void 0?(c=3,a.button!==void 0&&(c=a.button<3?a.button:3)):c=a.buttons&1?0:a.buttons&4?1:a.buttons&2?2:3;break;case"mouseup":h=0,c=a.button<3?a.button:3;break;case"mousedown":h=1,c=a.button<3?a.button:3;break;case"wheel":if(t._customWheelEventHandler&&t._customWheelEventHandler(a)===!1)return!1;let d=a.deltaY;if(d===0||t.coreMouseService.consumeWheelEvent(a,t._renderService?.dimensions?.device?.cell?.height,t._coreBrowserService?.dpr)===0)return!1;h=d<0?0:1,c=4;break;default:return!1}return h===void 0||c===void 0||c>4?!1:t.coreMouseService.triggerMouseEvent({col:o.col,row:o.row,x:o.x,y:o.y,button:c,action:h,ctrl:a.ctrlKey,alt:a.altKey,shift:a.shiftKey})}let s={mouseup:null,wheel:null,mousedrag:null,mousemove:null},r={mouseup:a=>(n(a),a.buttons||(this._document.removeEventListener("mouseup",s.mouseup),s.mousedrag&&this._document.removeEventListener("mousemove",s.mousedrag)),this.cancel(a)),wheel:a=>(n(a),this.cancel(a,!0)),mousedrag:a=>{a.buttons&&n(a)},mousemove:a=>{a.buttons||n(a)}};this._register(this.coreMouseService.onProtocolChange(a=>{a?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(a)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),a&8?s.mousemove||(e.addEventListener("mousemove",r.mousemove),s.mousemove=r.mousemove):(e.removeEventListener("mousemove",s.mousemove),s.mousemove=null),a&16?s.wheel||(e.addEventListener("wheel",r.wheel,{passive:!1}),s.wheel=r.wheel):(e.removeEventListener("wheel",s.wheel),s.wheel=null),a&2?s.mouseup||(s.mouseup=r.mouseup):(this._document.removeEventListener("mouseup",s.mouseup),s.mouseup=null),a&4?s.mousedrag||(s.mousedrag=r.mousedrag):(this._document.removeEventListener("mousemove",s.mousedrag),s.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this._register(rt(e,"mousedown",a=>{if(a.preventDefault(),this.focus(),!(!this.coreMouseService.areMouseEventsActive||this._selectionService.shouldForceSelection(a)))return n(a),s.mouseup&&this._document.addEventListener("mouseup",s.mouseup),s.mousedrag&&this._document.addEventListener("mousemove",s.mousedrag),this.cancel(a)})),this._register(rt(e,"wheel",a=>{if(!s.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(a)===!1)return!1;if(!this.buffer.hasScrollback){if(a.deltaY===0)return!1;if(t.coreMouseService.consumeWheelEvent(a,t._renderService?.dimensions?.device?.cell?.height,t._coreBrowserService?.dpr)===0)return this.cancel(a,!0);let o=ve.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(a.deltaY<0?"A":"B");return this.coreService.triggerDataEvent(o,!0),this.cancel(a,!0)}}},{passive:!1}))}refresh(t,e){this._renderService?.refreshRows(t,e)}updateCursorStyle(t){this._selectionService?.shouldColumnSelect(t)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(t,e){this._viewport?this._viewport.scrollLines(t):super.scrollLines(t,e),this.refresh(0,this.rows-1)}scrollPages(t){this.scrollLines(t*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(t){t&&this._viewport?this._viewport.scrollToLine(this.buffer.ybase,!0):this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(t){let e=t-this._bufferService.buffer.ydisp;e!==0&&this.scrollLines(e)}paste(t){aM(t,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(t){this._customKeyEventHandler=t}attachCustomWheelEventHandler(t){this._customWheelEventHandler=t}registerLinkProvider(t){return this._linkProviderService.registerLinkProvider(t)}registerCharacterJoiner(t){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let e=this._characterJoinerService.register(t);return this.refresh(0,this.rows-1),e}deregisterCharacterJoiner(t){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(t)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(t){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+t)}registerDecoration(t){return this._decorationService.registerDecoration(t)}hasSelection(){return this._selectionService?this._selectionService.hasSelection:!1}select(t,e,n){this._selectionService.setSelection(t,e,n)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(!(!this._selectionService||!this._selectionService.hasSelection))return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(t,e){this._selectionService?.selectLines(t,e)}_keyDown(t){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(t)===!1)return!1;let e=this.browser.isMac&&this.options.macOptionIsMeta&&t.altKey;if(!e&&!this._compositionHelper.keydown(t))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(!0),!1;!e&&(t.key==="Dead"||t.key==="AltGraph")&&(this._unprocessedDeadKey=!0);let n=LZ(t,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(t),n.type===3||n.type===2){let s=this.rows-1;return this.scrollLines(n.type===2?-s:s),this.cancel(t,!0)}if(n.type===1&&this.selectAll(),this._isThirdLevelShift(this.browser,t)||(n.cancel&&this.cancel(t,!0),!n.key)||t.key&&!t.ctrlKey&&!t.altKey&&!t.metaKey&&t.key.length===1&&t.key.charCodeAt(0)>=65&&t.key.charCodeAt(0)<=90)return!0;if(this._unprocessedDeadKey)return this._unprocessedDeadKey=!1,!0;if((n.key===ve.ETX||n.key===ve.CR)&&(this.textarea.value=""),this._onKey.fire({key:n.key,domEvent:t}),this._showCursor(),this.coreService.triggerDataEvent(n.key,!0),!this.optionsService.rawOptions.screenReaderMode||t.altKey||t.ctrlKey)return this.cancel(t,!0);this._keyDownHandled=!0}_isThirdLevelShift(t,e){let n=t.isMac&&!this.options.macOptionIsMeta&&e.altKey&&!e.ctrlKey&&!e.metaKey||t.isWindows&&e.altKey&&e.ctrlKey&&!e.metaKey||t.isWindows&&e.getModifierState("AltGraph");return e.type==="keypress"?n:n&&(!e.keyCode||e.keyCode>47)}_keyUp(t){this._keyDownSeen=!1,!(this._customKeyEventHandler&&this._customKeyEventHandler(t)===!1)&&(FZ(t)||this.focus(),this.updateCursorStyle(t),this._keyPressHandled=!1)}_keyPress(t){let e;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(t)===!1)return!1;if(this.cancel(t),t.charCode)e=t.charCode;else if(t.which===null||t.which===void 0)e=t.keyCode;else if(t.which!==0&&t.charCode!==0)e=t.which;else return!1;return!e||(t.altKey||t.ctrlKey||t.metaKey)&&!this._isThirdLevelShift(this.browser,t)?!1:(e=String.fromCharCode(e),this._onKey.fire({key:e,domEvent:t}),this._showCursor(),this.coreService.triggerDataEvent(e,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,!0)}_inputEvent(t){if(t.data&&t.inputType==="insertText"&&(!t.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let e=t.data;return this.coreService.triggerDataEvent(e,!0),this.cancel(t),!0}return!1}resize(t,e){if(t===this.cols&&e===this.rows){this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure();return}super.resize(t,e)}_afterResize(t,e){this._charSizeService?.measure()}clear(){if(!(this.buffer.ybase===0&&this.buffer.y===0)){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let t=1;t<this.rows;t++)this.buffer.lines.push(this.buffer.getBlankLine(Sn));this._onScroll.fire({position:this.buffer.ydisp}),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;let t=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this._customKeyEventHandler=t,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(ve.ESC+"[I"):this.coreService.triggerDataEvent(ve.ESC+"[O")}_reportWindowsOptions(t){if(this._renderService)switch(t){case 0:let e=this._renderService.dimensions.css.canvas.width.toFixed(0),n=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${ve.ESC}[4;${n};${e}t`);break;case 1:let s=this._renderService.dimensions.css.cell.width.toFixed(0),r=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${ve.ESC}[6;${r};${s}t`);break}}cancel(t,e){if(!(!this.options.cancelEvents&&!e))return t.preventDefault(),t.stopPropagation(),!1}};function FZ(t){return t.keyCode===16||t.keyCode===17||t.keyCode===18}var qZ=class{constructor(){this._addons=[]}dispose(){for(let t=this._addons.length-1;t>=0;t--)this._addons[t].instance.dispose()}loadAddon(t,e){let n={instance:e,dispose:e.dispose,isDisposed:!1};this._addons.push(n),e.dispose=()=>this._wrappedAddonDispose(n),e.activate(t)}_wrappedAddonDispose(t){if(t.isDisposed)return;let e=-1;for(let n=0;n<this._addons.length;n++)if(this._addons[n]===t){e=n;break}if(e===-1)throw new Error("Could not dispose an addon that has not been loaded");t.isDisposed=!0,t.dispose.apply(t.instance),this._addons.splice(e,1)}},KZ=class{constructor(t){this._line=t}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(t,e){if(!(t<0||t>=this._line.length))return e?(this._line.loadCell(t,e),e):this._line.loadCell(t,new Dr)}translateToString(t,e,n){return this._line.translateToString(t,e,n)}},Pj=class{constructor(t,e){this._buffer=t,this.type=e}init(t){return this._buffer=t,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(t){let e=this._buffer.lines.get(t);if(e)return new KZ(e)}getNullCell(){return new Dr}},WZ=class extends vt{constructor(t){super(),this._core=t,this._onBufferChange=this._register(new Ee),this.onBufferChange=this._onBufferChange.event,this._normal=new Pj(this._core.buffers.normal,"normal"),this._alternate=new Pj(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}},GZ=class{constructor(t){this._core=t}registerCsiHandler(t,e){return this._core.registerCsiHandler(t,n=>e(n.toArray()))}addCsiHandler(t,e){return this.registerCsiHandler(t,e)}registerDcsHandler(t,e){return this._core.registerDcsHandler(t,(n,s)=>e(n,s.toArray()))}addDcsHandler(t,e){return this.registerDcsHandler(t,e)}registerEscHandler(t,e){return this._core.registerEscHandler(t,e)}addEscHandler(t,e){return this.registerEscHandler(t,e)}registerOscHandler(t,e){return this._core.registerOscHandler(t,e)}addOscHandler(t,e){return this.registerOscHandler(t,e)}},YZ=class{constructor(t){this._core=t}register(t){this._core.unicodeService.register(t)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(t){this._core.unicodeService.activeVersion=t}},XZ=["cols","rows"],oi=0,JZ=class extends vt{constructor(t){super(),this._core=this._register(new VZ(t)),this._addonManager=this._register(new qZ),this._publicOptions={...this._core.options};let e=s=>this._core.options[s],n=(s,r)=>{this._checkReadonlyOptions(s),this._core.options[s]=r};for(let s in this._core.options){let r={get:e.bind(this,s),set:n.bind(this,s)};Object.defineProperty(this._publicOptions,s,r)}}_checkReadonlyOptions(t){if(XZ.includes(t))throw new Error(`Option "${t}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new GZ(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new YZ(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this._register(new WZ(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let t=this._core.coreService.decPrivateModes,e="none";switch(this._core.coreMouseService.activeProtocol){case"X10":e="x10";break;case"VT200":e="vt200";break;case"DRAG":e="drag";break;case"ANY":e="any";break}return{applicationCursorKeysMode:t.applicationCursorKeys,applicationKeypadMode:t.applicationKeypad,bracketedPasteMode:t.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:e,originMode:t.origin,reverseWraparoundMode:t.reverseWraparound,sendFocusMode:t.sendFocus,synchronizedOutputMode:t.synchronizedOutput,wraparoundMode:t.wraparound}}get options(){return this._publicOptions}set options(t){for(let e in t)this._publicOptions[e]=t[e]}blur(){this._core.blur()}focus(){this._core.focus()}input(t,e=!0){this._core.input(t,e)}resize(t,e){this._verifyIntegers(t,e),this._core.resize(t,e)}open(t){this._core.open(t)}attachCustomKeyEventHandler(t){this._core.attachCustomKeyEventHandler(t)}attachCustomWheelEventHandler(t){this._core.attachCustomWheelEventHandler(t)}registerLinkProvider(t){return this._core.registerLinkProvider(t)}registerCharacterJoiner(t){return this._checkProposedApi(),this._core.registerCharacterJoiner(t)}deregisterCharacterJoiner(t){this._checkProposedApi(),this._core.deregisterCharacterJoiner(t)}registerMarker(t=0){return this._verifyIntegers(t),this._core.registerMarker(t)}registerDecoration(t){return this._checkProposedApi(),this._verifyPositiveIntegers(t.x??0,t.width??0,t.height??0),this._core.registerDecoration(t)}hasSelection(){return this._core.hasSelection()}select(t,e,n){this._verifyIntegers(t,e,n),this._core.select(t,e,n)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(t,e){this._verifyIntegers(t,e),this._core.selectLines(t,e)}dispose(){super.dispose()}scrollLines(t){this._verifyIntegers(t),this._core.scrollLines(t)}scrollPages(t){this._verifyIntegers(t),this._core.scrollPages(t)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(t){this._verifyIntegers(t),this._core.scrollToLine(t)}clear(){this._core.clear()}write(t,e){this._core.write(t,e)}writeln(t,e){this._core.write(t),this._core.write(`\r
`,e)}paste(t){this._core.paste(t)}refresh(t,e){this._verifyIntegers(t,e),this._core.refresh(t,e)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(t){this._addonManager.loadAddon(this,t)}static get strings(){return{get promptLabel(){return yw.get()},set promptLabel(t){yw.set(t)},get tooMuchOutput(){return vw.get()},set tooMuchOutput(t){vw.set(t)}}}_verifyIntegers(...t){for(oi of t)if(oi===1/0||isNaN(oi)||oi%1!==0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...t){for(oi of t)if(oi&&(oi===1/0||isNaN(oi)||oi%1!==0||oi<0))throw new Error("This API only accepts positive integers")}};var QZ=2,ZZ=1,eee=class{activate(t){this._terminal=t}dispose(){}fit(){let t=this.proposeDimensions();if(!t||!this._terminal||isNaN(t.cols)||isNaN(t.rows))return;let e=this._terminal._core;(this._terminal.rows!==t.rows||this._terminal.cols!==t.cols)&&(e._renderService.clear(),this._terminal.resize(t.cols,t.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let t=this._terminal._core._renderService.dimensions;if(t.css.cell.width===0||t.css.cell.height===0)return;let e=this._terminal.options.scrollback===0?0:this._terminal.options.overviewRuler?.width||14,n=window.getComputedStyle(this._terminal.element.parentElement),s=parseInt(n.getPropertyValue("height")),r=Math.max(0,parseInt(n.getPropertyValue("width"))),a=window.getComputedStyle(this._terminal.element),o={top:parseInt(a.getPropertyValue("padding-top")),bottom:parseInt(a.getPropertyValue("padding-bottom")),right:parseInt(a.getPropertyValue("padding-right")),left:parseInt(a.getPropertyValue("padding-left"))},c=o.top+o.bottom,h=o.right+o.left,d=s-c,g=r-h-e;return{cols:Math.max(QZ,Math.floor(g/t.css.cell.width)),rows:Math.max(ZZ,Math.floor(d/t.css.cell.height))}}};var tee=class{constructor(e,n,s,r={}){this._terminal=e,this._regex=n,this._handler=s,this._options=r}provideLinks(e,n){let s=see.computeLink(e,this._regex,this._terminal,this._handler);n(this._addCallbacks(s))}_addCallbacks(e){return e.map(n=>(n.leave=this._options.leave,n.hover=(s,r)=>{if(this._options.hover){let{range:a}=n;this._options.hover(s,r,a)}},n))}};function nee(t){try{let e=new URL(t),n=e.password&&e.username?`${e.protocol}//${e.username}:${e.password}@${e.host}`:e.username?`${e.protocol}//${e.username}@${e.host}`:`${e.protocol}//${e.host}`;return t.toLocaleLowerCase().startsWith(n.toLocaleLowerCase())}catch{return!1}}var see=class r0{static computeLink(e,n,s,r){let a=new RegExp(n.source,(n.flags||"")+"g"),[o,c]=r0._getWindowedLineStrings(e-1,s),h=o.join(""),d,g=[];for(;d=a.exec(h);){let m=d[0];if(!nee(m))continue;let[v,y]=r0._mapStrIdx(s,c,0,d.index),[_,w]=r0._mapStrIdx(s,v,y,m.length);if(v===-1||y===-1||_===-1||w===-1)continue;let S={start:{x:y+1,y:v+1},end:{x:w,y:_+1}};g.push({range:S,text:m,activate:r})}return g}static _getWindowedLineStrings(e,n){let s,r=e,a=e,o=0,c="",h=[];if(s=n.buffer.active.getLine(e)){let d=s.translateToString(!0);if(s.isWrapped&&d[0]!==" "){for(o=0;(s=n.buffer.active.getLine(--r))&&o<2048&&(c=s.translateToString(!0),o+=c.length,h.push(c),!(!s.isWrapped||c.indexOf(" ")!==-1)););h.reverse()}for(h.push(d),o=0;(s=n.buffer.active.getLine(++a))&&s.isWrapped&&o<2048&&(c=s.translateToString(!0),o+=c.length,h.push(c),c.indexOf(" ")===-1););}return[h,r]}static _mapStrIdx(e,n,s,r){let a=e.buffer.active,o=a.getNullCell(),c=s;for(;r;){let h=a.getLine(n);if(!h)return[-1,-1];for(let d=c;d<h.length;++d){h.getCell(d,o);let g=o.getChars();if(o.getWidth()&&(r-=g.length||1,d===h.length-1&&g==="")){let m=a.getLine(n+1);m&&m.isWrapped&&(m.getCell(0,o),o.getWidth()===2&&(r+=1))}if(r<0)return[n,d]}n++,c=0}return[n,c]}},ree=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function iee(t,e){let n=window.open();if(n){try{n.opener=null}catch{}n.location.href=e}else console.warn("Opening link blocked as opener could not be cleared")}var aee=class{constructor(t=iee,e={}){this._handler=t,this._options=e}activate(t){this._terminal=t;let e=this._options,n=e.urlRegex||ree;this._linkProvider=this._terminal.registerLinkProvider(new tee(this._terminal,n,this._handler,e))}dispose(){this._linkProvider?.dispose()}};const lee=0,oee=1,cee=2,uee=4,hee=["/bin/bash","/bin/sh"];class dee{ws=null;options;isClosing=!1;hasConnected=!1;constructor(e){this.options=e}async connect(){const e=this.options.command||hee;for(const n of e)try{await this.tryConnect([n]),this.hasConnected=!0;return}catch{if(n===e[e.length-1])throw new Error(`No shell available (tried: ${e.join(", ")})`)}}tryConnect(e){return new Promise((n,s)=>{const{context:r,namespace:a,pod:o,container:c}=this.options,h=new URLSearchParams;h.set("container",c),h.set("stdin","true"),h.set("stdout","true"),h.set("stderr","true"),h.set("tty","true");for(const y of e)h.append("command",y);const g=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/contexts/${r}/api/v1/namespaces/${a}/pods/${o}/exec?${h.toString()}`;this.ws=new WebSocket(g,["v4.channel.k8s.io"]);let m=!1;const v=setTimeout(()=>{m||(m=!0,this.ws?.close(),s(new Error("Connection timeout")))},5e3);this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{setTimeout(()=>{!m&&this.ws?.readyState===WebSocket.OPEN&&(clearTimeout(v),m=!0,n())},200)},this.ws.onmessage=y=>{if(y.data instanceof ArrayBuffer){const _=new Uint8Array(y.data);if(_.length<1)return;const w=_[0],S=new TextDecoder().decode(_.slice(1));switch(w){case oee:case cee:S&&this.options.onData(S);break}}},this.ws.onerror=()=>{clearTimeout(v),m||(m=!0,s(new Error("WebSocket connection failed")))},this.ws.onclose=y=>{clearTimeout(v),m?!this.isClosing&&this.hasConnected&&this.options.onClose?.():(m=!0,s(new Error(y.reason||`Connection closed (code: ${y.code})`)))}})}send(e){if(this.ws?.readyState===WebSocket.OPEN){const s=new TextEncoder().encode(e),r=new Uint8Array(s.length+1);r[0]=lee,r.set(s,1),this.ws.send(r)}}resize(e,n){if(this.ws?.readyState===WebSocket.OPEN){const s=JSON.stringify({Width:e,Height:n}),a=new TextEncoder().encode(s),o=new Uint8Array(a.length+1);o[0]=uee,o.set(a,1),this.ws.send(o)}}disconnect(){this.isClosing=!0,this.ws&&(this.ws.close(),this.ws=null)}get isConnected(){return this.ws?.readyState===WebSocket.OPEN}}function fee(t){const e=[],n=t.spec,s=t.status;if(n?.containers)for(const r of n.containers){const a=s?.containerStatuses?.find(o=>o.name===r.name);e.push({name:r.name,ready:a?.ready??!1})}return e}function pee({resource:t,toolbarRef:e}){const{context:n}=hr(),s=K.useRef(null),r=K.useRef(null),a=K.useRef(null),o=K.useRef(null),[c,h]=K.useState(!1),[d,g]=K.useState(!1),[m,v]=K.useState(""),[y,_]=K.useState(!1),w=t.metadata?.namespace,S=t.metadata?.name,k=fee(t);K.useEffect(()=>{k.length>0&&!m&&v(k[0].name)},[k,m]),K.useEffect(()=>{if(!s.current||r.current)return;const j=new JZ({cursorBlink:!0,fontSize:13,fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace',theme:{background:"#0a0a0a",foreground:"#e5e5e5",cursor:"#e5e5e5",cursorAccent:"#0a0a0a",selectionBackground:"#3b82f680",black:"#171717",red:"#ef4444",green:"#22c55e",yellow:"#eab308",blue:"#3b82f6",magenta:"#a855f7",cyan:"#06b6d4",white:"#e5e5e5",brightBlack:"#404040",brightRed:"#f87171",brightGreen:"#4ade80",brightYellow:"#facc15",brightBlue:"#60a5fa",brightMagenta:"#c084fc",brightCyan:"#22d3ee",brightWhite:"#ffffff"},allowProposedApi:!0}),P=new eee,U=new aee;j.loadAddon(P),j.loadAddon(U),j.open(s.current),P.fit(),r.current=j,a.current=P;const X=()=>{P.fit(),o.current?.isConnected&&o.current.resize(j.cols,j.rows)},$=new ResizeObserver(X);return $.observe(s.current),window.addEventListener("resize",X),()=>{$.disconnect(),window.removeEventListener("resize",X),j.dispose(),r.current=null,a.current=null}},[]);const C=K.useCallback(async()=>{if(!w||!S||!m||!r.current)return;o.current?.disconnect(),g(!0);const j=r.current;j.clear(),j.writeln(`Connecting to ${S}/${m}...`),j.writeln("");try{const P=new dee({context:n,namespace:w,pod:S,container:m,onData:X=>{j.write(X)},onError:X=>{j.writeln(`\r
\x1B[31mError: ${X}\x1B[0m`)},onClose:()=>{h(!1),j.writeln(`\r
\x1B[33mConnection closed.\x1B[0m`)}});await P.connect(),o.current=P,h(!0);const U=a.current;U&&(U.fit(),P.resize(j.cols,j.rows)),j.onData(X=>{P.send(X)})}catch(P){const U=P instanceof Error?P.message:"Failed to connect";j.writeln(`\r
\x1B[31mFailed to connect: ${U}\x1B[0m`)}finally{g(!1)}},[n,w,S,m]),E=K.useCallback(()=>{o.current?.disconnect(),o.current=null,h(!1)},[]),B=K.useRef(!1);K.useEffect(()=>{if(m&&!B.current&&r.current){B.current=!0;const j=setTimeout(()=>{C()},100);return()=>clearTimeout(j)}},[m,C]),K.useEffect(()=>()=>{o.current?.disconnect(),o.current=null},[]);const D=j=>{v(j),_(!1),E()};return f.jsxs("div",{className:"flex flex-col h-full bg-[#0a0a0a]",children:[e&&f.jsx(J2,{toolbarRef:e,children:k.length>1&&f.jsxs("div",{className:"relative",children:[f.jsxs("button",{onClick:()=>_(!y),className:"flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-200 dark:hover:bg-neutral-800 rounded transition-colors",children:[f.jsx("span",{className:"max-w-30 truncate",children:m}),f.jsx(rs,{size:12})]}),y&&f.jsx("div",{className:"absolute right-0 top-full mt-1 z-50 bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg shadow-lg py-1 min-w-40",children:k.map(j=>f.jsxs("button",{onClick:()=>D(j.name),className:`w-full text-left px-3 py-1.5 text-xs hover:bg-neutral-100 dark:hover:bg-neutral-700 flex items-center gap-2 ${j.name===m?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-500/10":"text-neutral-700 dark:text-neutral-300"}`,children:[f.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${j.ready?"bg-emerald-500":"bg-neutral-400"}`}),j.name]},j.name))})]})}),f.jsx("div",{ref:s,className:"flex-1 p-2",style:{minHeight:0}}),f.jsxs("div",{className:"shrink-0 px-4 py-1.5 border-t border-neutral-800 bg-neutral-900/50 flex items-center gap-3 text-xs text-neutral-500",children:[f.jsxs("span",{className:"flex items-center gap-1.5",children:[f.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${c?"bg-emerald-500":d?"bg-amber-500 animate-pulse":"bg-neutral-600"}`}),c?"Connected":d?"Connecting...":"Disconnected"]}),m&&f.jsxs("span",{className:"text-neutral-600",children:[S,"/",m]})]})]})}function mee(t){const e=He.c(20),{metadata:n}=t,s=n.labels,r=n.annotations;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=new Set(["pod-template-hash","controller-revision-hash","pod-template-generation"]),e[0]=a):a=e[0];const o=a;let c;e[1]===Symbol.for("react.memo_cache_sentinel")?(c=new Set(["kubectl.kubernetes.io/last-applied-configuration","deployment.kubernetes.io/revision","control-plane.alpha.kubernetes.io/leader","deprecated.daemonset.template.generation","kubernetes.io/description"]),e[1]=c):c=e[1];const h=c;let d;e[2]!==s?(d=s?Object.fromEntries(Object.entries(s).filter(D=>{const[j]=D;return!o.has(j)})):void 0,e[2]=s,e[3]=d):d=e[3];const g=d;let m;e[4]!==r?(m=r?Object.fromEntries(Object.entries(r).filter(D=>{const[j]=D;return!h.has(j)})):void 0,e[4]=r,e[5]=m):m=e[5];const v=m,y=[...Object.entries(g??{}).map(bee),...Object.entries(v??{}).map(vee)];let _;e[6]!==g?(_=g&&Object.keys(g).length>0,e[6]=g,e[7]=_):_=e[7];const w=_;let S;e[8]!==v?(S=v&&Object.keys(v).length>0,e[8]=v,e[9]=S):S=e[9];const k=S;if(y.length===0)return null;let C;e[10]!==g||e[11]!==w?(C=w&&f.jsxs(f.Fragment,{children:[f.jsx("tr",{children:f.jsx("td",{colSpan:2,className:"pb-2",children:f.jsx("span",{className:"text-[10px] font-medium uppercase tracking-wider text-neutral-500 dark:text-neutral-500",children:"Labels"})})}),Object.entries(g).map(yee)]}),e[10]=g,e[11]=w,e[12]=C):C=e[12];let E;e[13]!==v||e[14]!==k||e[15]!==w?(E=k&&f.jsxs(f.Fragment,{children:[f.jsx("tr",{children:f.jsx("td",{colSpan:2,className:w?"pt-4 pb-2":"pb-2",children:f.jsx("span",{className:"text-[10px] font-medium uppercase tracking-wider text-neutral-500 dark:text-neutral-500",children:"Annotations"})})}),Object.entries(v).map(gee)]}),e[13]=v,e[14]=k,e[15]=w,e[16]=E):E=e[16];let B;return e[17]!==C||e[18]!==E?(B=f.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-lg p-4",children:f.jsx("table",{className:"w-full text-xs",children:f.jsxs("tbody",{children:[C,E]})})}),e[17]=C,e[18]=E,e[19]=B):B=e[19],B}function gee(t,e,n){const[s,r]=t;return f.jsxs("tr",{className:e<n.length-1?"border-b border-neutral-200 dark:border-neutral-700/50":"",children:[f.jsx("td",{className:"py-1.5 pr-3 text-purple-600 dark:text-purple-400 align-top whitespace-nowrap w-[1%]",children:s}),f.jsx("td",{className:"py-1.5 text-neutral-600 dark:text-neutral-300 break-all",children:r})]},`annotation-${s}`)}function yee(t){const[e,n]=t;return f.jsxs("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50",children:[f.jsx("td",{className:"py-1.5 pr-3 text-sky-600 dark:text-sky-400 align-top whitespace-nowrap w-[1%]",children:e}),f.jsx("td",{className:"py-1.5 text-emerald-600 dark:text-emerald-400 break-all",children:n})]},`label-${e}`)}function vee(t){const[e,n]=t;return{key:e,value:n,type:"annotation"}}function bee(t){const[e,n]=t;return{key:e,value:n,type:"label"}}function xee(t){const e=He.c(6),{events:n,loading:s}=t;if(s&&n.length===0){let o;return e[0]===Symbol.for("react.memo_cache_sentinel")?(o=f.jsxs("div",{className:"flex items-center gap-2 text-neutral-600 dark:text-neutral-500 text-sm",children:[f.jsx(Xl,{size:14,className:"animate-spin"}),"Loading events..."]}),e[0]=o):o=e[0],o}if(n.length===0){let o;return e[1]===Symbol.for("react.memo_cache_sentinel")?(o=f.jsx("div",{className:"text-neutral-600 dark:text-neutral-500 text-sm italic",children:"No events found for this resource"}),e[1]=o):o=e[1],o}let r;e[2]!==n?(r=n.map(_ee),e[2]=n,e[3]=r):r=e[3];let a;return e[4]!==r?(a=f.jsx("div",{className:"space-y-2",children:r}),e[4]=r,e[5]=a):a=e[5],a}function _ee(t){return f.jsx(wee,{event:t},t.metadata?.uid||`${t.reason}-${t.lastTimestamp}`)}function wee(t){const e=He.c(36),{event:n}=t;let s;e[0]!==n.eventTime||e[1]!==n.lastTimestamp||e[2]!==n.metadata?(s=()=>n.lastTimestamp?n.lastTimestamp instanceof Date?n.lastTimestamp.toISOString():String(n.lastTimestamp):n.eventTime?String(n.eventTime):n.metadata?.creationTimestamp?n.metadata.creationTimestamp instanceof Date?n.metadata.creationTimestamp.toISOString():String(n.metadata.creationTimestamp):new Date().toISOString(),e[0]=n.eventTime,e[1]=n.lastTimestamp,e[2]=n.metadata,e[3]=s):s=e[3];const r=s;let a,o,c,h,d;if(e[4]!==n.reason||e[5]!==n.type||e[6]!==r){const w=r(),S=n.type==="Warning";d=`p-3 rounded-lg border ${S?"bg-amber-500/5 border-amber-500/20":"bg-neutral-100 dark:bg-neutral-900/50 border-neutral-300 dark:border-neutral-700/50"}`,c="flex items-start justify-between gap-2 mb-1";const k=`px-1.5 py-0.5 rounded text-xs font-medium ${S?"bg-amber-500/20 text-amber-600 dark:text-amber-400":"bg-emerald-500/20 text-emerald-600 dark:text-emerald-400"}`;let C;e[12]!==n.type||e[13]!==k?(C=f.jsx("span",{className:k,children:n.type}),e[12]=n.type,e[13]=k,e[14]=C):C=e[14];let E;e[15]!==n.reason?(E=f.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-200",children:n.reason}),e[15]=n.reason,e[16]=E):E=e[16],e[17]!==C||e[18]!==E?(h=f.jsxs("div",{className:"flex items-center gap-2",children:[C,E]}),e[17]=C,e[18]=E,e[19]=h):h=e[19],a="text-xs text-neutral-600 dark:text-neutral-500 whitespace-nowrap",o=See(w),e[4]=n.reason,e[5]=n.type,e[6]=r,e[7]=a,e[8]=o,e[9]=c,e[10]=h,e[11]=d}else a=e[7],o=e[8],c=e[9],h=e[10],d=e[11];let g;e[20]!==a||e[21]!==o?(g=f.jsx("span",{className:a,children:o}),e[20]=a,e[21]=o,e[22]=g):g=e[22];let m;e[23]!==c||e[24]!==h||e[25]!==g?(m=f.jsxs("div",{className:c,children:[h,g]}),e[23]=c,e[24]=h,e[25]=g,e[26]=m):m=e[26];let v;e[27]!==n.message?(v=f.jsx("p",{className:"text-sm text-neutral-700 dark:text-neutral-400",children:n.message}),e[27]=n.message,e[28]=v):v=e[28];let y;e[29]!==n.count?(y=n.count&&n.count>1&&f.jsxs("p",{className:"text-xs text-neutral-600 dark:text-neutral-500 mt-1",children:["Occurred ",n.count," times"]}),e[29]=n.count,e[30]=y):y=e[30];let _;return e[31]!==y||e[32]!==d||e[33]!==m||e[34]!==v?(_=f.jsxs("div",{className:d,children:[m,v,y]}),e[31]=y,e[32]=d,e[33]=m,e[34]=v,e[35]=_):_=e[35],_}function See(t){const e=new Date(t),s=new Date().getTime()-e.getTime(),r=Math.floor(s/1e3),a=Math.floor(r/60),o=Math.floor(a/60),c=Math.floor(o/24);return c>0?`${c}d ago`:o>0?`${o}h ago`:a>0?`${a}m ago`:`${r}s ago`}function zj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=Array(e);n<e;n++)s[n]=t[n];return s}function kee(t){if(Array.isArray(t))return t}function Cee(t,e,n){return(e=Oee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nee(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s,r,a,o,c=[],h=!0,d=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(h=(s=a.call(n)).done)&&(c.push(s.value),c.length!==e);h=!0);}catch(g){d=!0,r=g}finally{try{if(!h&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw r}}return c}}function Aee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Hj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$j(Object(n),!0).forEach(function(s){Cee(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$j(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function Eee(t,e){if(t==null)return{};var n,s,r=jee(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function jee(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)!==-1)continue;n[s]=t[s]}return n}function Tee(t,e){return kee(t)||Nee(t,e)||Bee(t,e)||Aee()}function Ree(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Oee(t){var e=Ree(t,"string");return typeof e=="symbol"?e:e+""}function Bee(t,e){if(t){if(typeof t=="string")return zj(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zj(t,e):void 0}}function Mee(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Vj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Uj(Object(n),!0).forEach(function(s){Mee(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Uj(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function Dee(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(s){return e.reduceRight(function(r,a){return a(r)},s)}}function xd(t){return function e(){for(var n=this,s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return r.length>=t.length?t.apply(this,r):function(){for(var o=arguments.length,c=new Array(o),h=0;h<o;h++)c[h]=arguments[h];return e.apply(n,[].concat(r,c))}}}function dg(t){return{}.toString.call(t).includes("Object")}function Lee(t){return!Object.keys(t).length}function hf(t){return typeof t=="function"}function Iee(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Pee(t,e){return dg(e)||ll("changeType"),Object.keys(e).some(function(n){return!Iee(t,n)})&&ll("changeField"),e}function zee(t){hf(t)||ll("selectorType")}function $ee(t){hf(t)||dg(t)||ll("handlerType"),dg(t)&&Object.values(t).some(function(e){return!hf(e)})&&ll("handlersType")}function Hee(t){t||ll("initialIsRequired"),dg(t)||ll("initialType"),Lee(t)&&ll("initialContent")}function Uee(t,e){throw new Error(t[e]||t.default)}var Vee={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},ll=xd(Uee)(Vee),Tm={changes:Pee,selector:zee,handler:$ee,initial:Hee};function Fee(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Tm.initial(t),Tm.handler(e);var n={current:t},s=xd(Wee)(n,e),r=xd(Kee)(n),a=xd(Tm.changes)(t),o=xd(qee)(n);function c(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(g){return g};return Tm.selector(d),d(n.current)}function h(d){Dee(s,r,a,o)(d)}return[c,h]}function qee(t,e){return hf(e)?e(t.current):e}function Kee(t,e){return t.current=Vj(Vj({},t.current),e),e}function Wee(t,e,n){return hf(e)?e(t.current):Object.keys(n).forEach(function(s){var r;return(r=e[s])===null||r===void 0?void 0:r.call(e,t.current[s])}),n}var Gee={create:Fee},Yee={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function Xee(t){return function e(){for(var n=this,s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return r.length>=t.length?t.apply(this,r):function(){for(var o=arguments.length,c=new Array(o),h=0;h<o;h++)c[h]=arguments[h];return e.apply(n,[].concat(r,c))}}}function Jee(t){return{}.toString.call(t).includes("Object")}function Qee(t){return t||Fj("configIsRequired"),Jee(t)||Fj("configType"),t.urls?(Zee(),{paths:{vs:t.urls.monacoBase}}):t}function Zee(){console.warn(YM.deprecation)}function ete(t,e){throw new Error(t[e]||t.default)}var YM={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Fj=Xee(ete)(YM),tte={config:Qee},nte=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return function(r){return n.reduceRight(function(a,o){return o(a)},r)}};function XM(t,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&t[n]&&Object.assign(e[n],XM(t[n],e[n]))}),Hj(Hj({},t),e)}var ste={type:"cancelation",msg:"operation is manually canceled"};function hx(t){var e=!1,n=new Promise(function(s,r){t.then(function(a){return e?r(ste):s(a)}),t.catch(r)});return n.cancel=function(){return e=!0},n}var rte=["monaco"],ite=Gee.create({config:Yee,isInitialized:!1,resolve:null,reject:null,monaco:null}),JM=Tee(ite,2),Uf=JM[0],Dy=JM[1];function ate(t){var e=tte.config(t),n=e.monaco,s=Eee(e,rte);Dy(function(r){return{config:XM(r.config,s),monaco:n}})}function lte(){var t=Uf(function(e){var n=e.monaco,s=e.isInitialized,r=e.resolve;return{monaco:n,isInitialized:s,resolve:r}});if(!t.isInitialized){if(Dy({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),hx(dx);if(window.monaco&&window.monaco.editor)return QM(window.monaco),t.resolve(window.monaco),hx(dx);nte(ote,ute)(hte)}return hx(dx)}function ote(t){return document.body.appendChild(t)}function cte(t){var e=document.createElement("script");return t&&(e.src=t),e}function ute(t){var e=Uf(function(s){var r=s.config,a=s.reject;return{config:r,reject:a}}),n=cte("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=e.reject,n}function hte(){var t=Uf(function(n){var s=n.config,r=n.resolve,a=n.reject;return{config:s,resolve:r,reject:a}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(n){var s=n.m||n;QM(s),t.resolve(s)},function(n){t.reject(n)})}function QM(t){Uf().monaco||Dy({monaco:t})}function dte(){return Uf(function(t){var e=t.monaco;return e})}var dx=new Promise(function(t,e){return Dy({resolve:t,reject:e})}),ZM={config:ate,init:lte,__getMonacoInstance:dte},fte={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},fx=fte,pte={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},mte=pte;function gte({children:t}){return Wr.createElement("div",{style:mte.container},t)}var yte=gte,vte=yte;function bte({width:t,height:e,isEditorReady:n,loading:s,_ref:r,className:a,wrapperProps:o}){return Wr.createElement("section",{style:{...fx.wrapper,width:t,height:e},...o},!n&&Wr.createElement(vte,null,s),Wr.createElement("div",{ref:r,style:{...fx.fullWidth,...!n&&fx.hide},className:a}))}var xte=bte,eD=K.memo(xte);function _te(t){K.useEffect(t,[])}var tD=_te;function wte(t,e,n=!0){let s=K.useRef(!0);K.useEffect(s.current||!n?()=>{s.current=!1}:t,e)}var or=wte;function zd(){}function Dc(t,e,n,s){return Ste(t,s)||kte(t,e,n,s)}function Ste(t,e){return t.editor.getModel(nD(t,e))}function kte(t,e,n,s){return t.editor.createModel(e,n,s?nD(t,s):void 0)}function nD(t,e){return t.Uri.parse(e)}function Cte({original:t,modified:e,language:n,originalLanguage:s,modifiedLanguage:r,originalModelPath:a,modifiedModelPath:o,keepCurrentOriginalModel:c=!1,keepCurrentModifiedModel:h=!1,theme:d="light",loading:g="Loading...",options:m={},height:v="100%",width:y="100%",className:_,wrapperProps:w={},beforeMount:S=zd,onMount:k=zd}){let[C,E]=K.useState(!1),[B,D]=K.useState(!0),j=K.useRef(null),P=K.useRef(null),U=K.useRef(null),X=K.useRef(k),$=K.useRef(S),Z=K.useRef(!1);tD(()=>{let V=ZM.init();return V.then(M=>(P.current=M)&&D(!1)).catch(M=>M?.type!=="cancelation"&&console.error("Monaco initialization: error:",M)),()=>j.current?Q():V.cancel()}),or(()=>{if(j.current&&P.current){let V=j.current.getOriginalEditor(),M=Dc(P.current,t||"",s||n||"text",a||"");M!==V.getModel()&&V.setModel(M)}},[a],C),or(()=>{if(j.current&&P.current){let V=j.current.getModifiedEditor(),M=Dc(P.current,e||"",r||n||"text",o||"");M!==V.getModel()&&V.setModel(M)}},[o],C),or(()=>{let V=j.current.getModifiedEditor();V.getOption(P.current.editor.EditorOption.readOnly)?V.setValue(e||""):e!==V.getValue()&&(V.executeEdits("",[{range:V.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),V.pushUndoStop())},[e],C),or(()=>{j.current?.getModel()?.original.setValue(t||"")},[t],C),or(()=>{let{original:V,modified:M}=j.current.getModel();P.current.editor.setModelLanguage(V,s||n||"text"),P.current.editor.setModelLanguage(M,r||n||"text")},[n,s,r],C),or(()=>{P.current?.editor.setTheme(d)},[d],C),or(()=>{j.current?.updateOptions(m)},[m],C);let F=K.useCallback(()=>{if(!P.current)return;$.current(P.current);let V=Dc(P.current,t||"",s||n||"text",a||""),M=Dc(P.current,e||"",r||n||"text",o||"");j.current?.setModel({original:V,modified:M})},[n,e,r,t,s,a,o]),W=K.useCallback(()=>{!Z.current&&U.current&&(j.current=P.current.editor.createDiffEditor(U.current,{automaticLayout:!0,...m}),F(),P.current?.editor.setTheme(d),E(!0),Z.current=!0)},[m,d,F]);K.useEffect(()=>{C&&X.current(j.current,P.current)},[C]),K.useEffect(()=>{!B&&!C&&W()},[B,C,W]);function Q(){let V=j.current?.getModel();c||V?.original?.dispose(),h||V?.modified?.dispose(),j.current?.dispose()}return Wr.createElement(eD,{width:y,height:v,isEditorReady:C,loading:g,_ref:U,className:_,wrapperProps:w})}var Nte=Cte;K.memo(Nte);function Ate(t){let e=K.useRef();return K.useEffect(()=>{e.current=t},[t]),e.current}var Ete=Ate,Rm=new Map;function jte({defaultValue:t,defaultLanguage:e,defaultPath:n,value:s,language:r,path:a,theme:o="light",line:c,loading:h="Loading...",options:d={},overrideServices:g={},saveViewState:m=!0,keepCurrentModel:v=!1,width:y="100%",height:_="100%",className:w,wrapperProps:S={},beforeMount:k=zd,onMount:C=zd,onChange:E,onValidate:B=zd}){let[D,j]=K.useState(!1),[P,U]=K.useState(!0),X=K.useRef(null),$=K.useRef(null),Z=K.useRef(null),F=K.useRef(C),W=K.useRef(k),Q=K.useRef(),V=K.useRef(s),M=Ete(a),G=K.useRef(!1),q=K.useRef(!1);tD(()=>{let T=ZM.init();return T.then(H=>(X.current=H)&&U(!1)).catch(H=>H?.type!=="cancelation"&&console.error("Monaco initialization: error:",H)),()=>$.current?O():T.cancel()}),or(()=>{let T=Dc(X.current,t||s||"",e||r||"",a||n||"");T!==$.current?.getModel()&&(m&&Rm.set(M,$.current?.saveViewState()),$.current?.setModel(T),m&&$.current?.restoreViewState(Rm.get(a)))},[a],D),or(()=>{$.current?.updateOptions(d)},[d],D),or(()=>{!$.current||s===void 0||($.current.getOption(X.current.editor.EditorOption.readOnly)?$.current.setValue(s):s!==$.current.getValue()&&(q.current=!0,$.current.executeEdits("",[{range:$.current.getModel().getFullModelRange(),text:s,forceMoveMarkers:!0}]),$.current.pushUndoStop(),q.current=!1))},[s],D),or(()=>{let T=$.current?.getModel();T&&r&&X.current?.editor.setModelLanguage(T,r)},[r],D),or(()=>{c!==void 0&&$.current?.revealLine(c)},[c],D),or(()=>{X.current?.editor.setTheme(o)},[o],D);let z=K.useCallback(()=>{if(!(!Z.current||!X.current)&&!G.current){W.current(X.current);let T=a||n,H=Dc(X.current,s||t||"",e||r||"",T||"");$.current=X.current?.editor.create(Z.current,{model:H,automaticLayout:!0,...d},g),m&&$.current.restoreViewState(Rm.get(T)),X.current.editor.setTheme(o),c!==void 0&&$.current.revealLine(c),j(!0),G.current=!0}},[t,e,n,s,r,a,d,g,m,o,c]);K.useEffect(()=>{D&&F.current($.current,X.current)},[D]),K.useEffect(()=>{!P&&!D&&z()},[P,D,z]),V.current=s,K.useEffect(()=>{D&&E&&(Q.current?.dispose(),Q.current=$.current?.onDidChangeModelContent(T=>{q.current||E($.current.getValue(),T)}))},[D,E]),K.useEffect(()=>{if(D){let T=X.current.editor.onDidChangeMarkers(H=>{let N=$.current.getModel()?.uri;if(N&&H.find(Y=>Y.path===N.path)){let Y=X.current.editor.getModelMarkers({resource:N});B?.(Y)}});return()=>{T?.dispose()}}return()=>{}},[D,B]);function O(){Q.current?.dispose(),v?m&&Rm.set(a,$.current.saveViewState()):$.current.getModel()?.dispose(),$.current.dispose()}return Wr.createElement(eD,{width:y,height:_,isEditorReady:D,loading:h,_ref:Z,className:w,wrapperProps:S})}var Tte=jte,Rte=K.memo(Tte),Ote=Rte;const ok=Symbol.for("yaml.alias"),eS=Symbol.for("yaml.document"),ol=Symbol.for("yaml.map"),sD=Symbol.for("yaml.pair"),wi=Symbol.for("yaml.scalar"),Tu=Symbol.for("yaml.seq"),Ir=Symbol.for("yaml.node.type"),Eo=t=>!!t&&typeof t=="object"&&t[Ir]===ok,Vf=t=>!!t&&typeof t=="object"&&t[Ir]===eS,Ff=t=>!!t&&typeof t=="object"&&t[Ir]===ol,yn=t=>!!t&&typeof t=="object"&&t[Ir]===sD,Gt=t=>!!t&&typeof t=="object"&&t[Ir]===wi,qf=t=>!!t&&typeof t=="object"&&t[Ir]===Tu;function mn(t){if(t&&typeof t=="object")switch(t[Ir]){case ol:case Tu:return!0}return!1}function gn(t){if(t&&typeof t=="object")switch(t[Ir]){case ok:case ol:case wi:case Tu:return!0}return!1}const rD=t=>(Gt(t)||mn(t))&&!!t.anchor,$l=Symbol("break visit"),Bte=Symbol("skip children"),$d=Symbol("remove node");function Ru(t,e){const n=Mte(e);Vf(t)?Lc(null,t.contents,n,Object.freeze([t]))===$d&&(t.contents=null):Lc(null,t,n,Object.freeze([]))}Ru.BREAK=$l;Ru.SKIP=Bte;Ru.REMOVE=$d;function Lc(t,e,n,s){const r=Dte(t,e,n,s);if(gn(r)||yn(r))return Lte(t,s,r),Lc(t,r,n,s);if(typeof r!="symbol"){if(mn(e)){s=Object.freeze(s.concat(e));for(let a=0;a<e.items.length;++a){const o=Lc(a,e.items[a],n,s);if(typeof o=="number")a=o-1;else{if(o===$l)return $l;o===$d&&(e.items.splice(a,1),a-=1)}}}else if(yn(e)){s=Object.freeze(s.concat(e));const a=Lc("key",e.key,n,s);if(a===$l)return $l;a===$d&&(e.key=null);const o=Lc("value",e.value,n,s);if(o===$l)return $l;o===$d&&(e.value=null)}}return r}function Mte(t){return typeof t=="object"&&(t.Collection||t.Node||t.Value)?Object.assign({Alias:t.Node,Map:t.Node,Scalar:t.Node,Seq:t.Node},t.Value&&{Map:t.Value,Scalar:t.Value,Seq:t.Value},t.Collection&&{Map:t.Collection,Seq:t.Collection},t):t}function Dte(t,e,n,s){if(typeof n=="function")return n(t,e,s);if(Ff(e))return n.Map?.(t,e,s);if(qf(e))return n.Seq?.(t,e,s);if(yn(e))return n.Pair?.(t,e,s);if(Gt(e))return n.Scalar?.(t,e,s);if(Eo(e))return n.Alias?.(t,e,s)}function Lte(t,e,n){const s=e[e.length-1];if(mn(s))s.items[t]=n;else if(yn(s))t==="key"?s.key=n:s.value=n;else if(Vf(s))s.contents=n;else{const r=Eo(s)?"alias":"scalar";throw new Error(`Cannot replace node with ${r} parent`)}}const Ite={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},Pte=t=>t.replace(/[!,[\]{}]/g,e=>Ite[e]);class vs{constructor(e,n){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},vs.defaultYaml,e),this.tags=Object.assign({},vs.defaultTags,n)}clone(){const e=new vs(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new vs(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:vs.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},vs.defaultTags);break}return e}add(e,n){this.atNextDocument&&(this.yaml={explicit:vs.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},vs.defaultTags),this.atNextDocument=!1);const s=e.trim().split(/[ \t]+/),r=s.shift();switch(r){case"%TAG":{if(s.length!==2&&(n(0,"%TAG directive should contain exactly two parts"),s.length<2))return!1;const[a,o]=s;return this.tags[a]=o,!0}case"%YAML":{if(this.yaml.explicit=!0,s.length!==1)return n(0,"%YAML directive should contain exactly one part"),!1;const[a]=s;if(a==="1.1"||a==="1.2")return this.yaml.version=a,!0;{const o=/^\d+\.\d+$/.test(a);return n(6,`Unsupported YAML version ${a}`,o),!1}}default:return n(0,`Unknown directive ${r}`,!0),!1}}tagName(e,n){if(e==="!")return"!";if(e[0]!=="!")return n(`Not a valid tag: ${e}`),null;if(e[1]==="<"){const o=e.slice(2,-1);return o==="!"||o==="!!"?(n(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&n("Verbatim tags must end with a >"),o)}const[,s,r]=e.match(/^(.*!)([^!]*)$/s);r||n(`The ${e} tag has no suffix`);const a=this.tags[s];if(a)try{return a+decodeURIComponent(r)}catch(o){return n(String(o)),null}return s==="!"?e:(n(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[n,s]of Object.entries(this.tags))if(e.startsWith(s))return n+Pte(e.substring(s.length));return e[0]==="!"?e:`!<${e}>`}toString(e){const n=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],s=Object.entries(this.tags);let r;if(e&&s.length>0&&gn(e.contents)){const a={};Ru(e.contents,(o,c)=>{gn(c)&&c.tag&&(a[c.tag]=!0)}),r=Object.keys(a)}else r=[];for(const[a,o]of s)a==="!!"&&o==="tag:yaml.org,2002:"||(!e||r.some(c=>c.startsWith(o)))&&n.push(`%TAG ${a} ${o}`);return n.join(`
`)}}vs.defaultYaml={explicit:!1,version:"1.2"};vs.defaultTags={"!!":"tag:yaml.org,2002:"};function iD(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){const n=`Anchor must not contain whitespace or control characters: ${JSON.stringify(t)}`;throw new Error(n)}return!0}function aD(t){const e=new Set;return Ru(t,{Value(n,s){s.anchor&&e.add(s.anchor)}}),e}function lD(t,e){for(let n=1;;++n){const s=`${t}${n}`;if(!e.has(s))return s}}function zte(t,e){const n=[],s=new Map;let r=null;return{onAnchor:a=>{n.push(a),r??(r=aD(t));const o=lD(e,r);return r.add(o),o},setAnchors:()=>{for(const a of n){const o=s.get(a);if(typeof o=="object"&&o.anchor&&(Gt(o.node)||mn(o.node)))o.node.anchor=o.anchor;else{const c=new Error("Failed to resolve repeated object (this should not happen)");throw c.source=a,c}}},sourceObjects:s}}function Ic(t,e,n,s){if(s&&typeof s=="object")if(Array.isArray(s))for(let r=0,a=s.length;r<a;++r){const o=s[r],c=Ic(t,s,String(r),o);c===void 0?delete s[r]:c!==o&&(s[r]=c)}else if(s instanceof Map)for(const r of Array.from(s.keys())){const a=s.get(r),o=Ic(t,s,r,a);o===void 0?s.delete(r):o!==a&&s.set(r,o)}else if(s instanceof Set)for(const r of Array.from(s)){const a=Ic(t,s,r,r);a===void 0?s.delete(r):a!==r&&(s.delete(r),s.add(a))}else for(const[r,a]of Object.entries(s)){const o=Ic(t,s,r,a);o===void 0?delete s[r]:o!==a&&(s[r]=o)}return t.call(e,n,s)}function Lr(t,e,n){if(Array.isArray(t))return t.map((s,r)=>Lr(s,String(r),n));if(t&&typeof t.toJSON=="function"){if(!n||!rD(t))return t.toJSON(e,n);const s={aliasCount:0,count:1,res:void 0};n.anchors.set(t,s),n.onCreate=a=>{s.res=a,delete n.onCreate};const r=t.toJSON(e,n);return n.onCreate&&n.onCreate(r),r}return typeof t=="bigint"&&!n?.keep?Number(t):t}class ck{constructor(e){Object.defineProperty(this,Ir,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:n,maxAliasCount:s,onAnchor:r,reviver:a}={}){if(!Vf(e))throw new TypeError("A document argument is required");const o={anchors:new Map,doc:e,keep:!0,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof s=="number"?s:100},c=Lr(this,"",o);if(typeof r=="function")for(const{count:h,res:d}of o.anchors.values())r(d,h);return typeof a=="function"?Ic(a,{"":c},"",c):c}}class uk extends ck{constructor(e){super(ok),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e,n){let s;n?.aliasResolveCache?s=n.aliasResolveCache:(s=[],Ru(e,{Node:(a,o)=>{(Eo(o)||rD(o))&&s.push(o)}}),n&&(n.aliasResolveCache=s));let r;for(const a of s){if(a===this)break;a.anchor===this.source&&(r=a)}return r}toJSON(e,n){if(!n)return{source:this.source};const{anchors:s,doc:r,maxAliasCount:a}=n,o=this.resolve(r,n);if(!o){const h=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(h)}let c=s.get(o);if(c||(Lr(o,null,n),c=s.get(o)),c?.res===void 0){const h="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(h)}if(a>=0&&(c.count+=1,c.aliasCount===0&&(c.aliasCount=i0(r,o,s)),c.count*c.aliasCount>a)){const h="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(h)}return c.res}toString(e,n,s){const r=`*${this.source}`;if(e){if(iD(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const a=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(a)}if(e.implicitKey)return`${r} `}return r}}function i0(t,e,n){if(Eo(e)){const s=e.resolve(t),r=n&&s&&n.get(s);return r?r.count*r.aliasCount:0}else if(mn(e)){let s=0;for(const r of e.items){const a=i0(t,r,n);a>s&&(s=a)}return s}else if(yn(e)){const s=i0(t,e.key,n),r=i0(t,e.value,n);return Math.max(s,r)}return 1}const oD=t=>!t||typeof t!="function"&&typeof t!="object";class ct extends ck{constructor(e){super(wi),this.value=e}toJSON(e,n){return n?.keep?this.value:Lr(this.value,e,n)}toString(){return String(this.value)}}ct.BLOCK_FOLDED="BLOCK_FOLDED";ct.BLOCK_LITERAL="BLOCK_LITERAL";ct.PLAIN="PLAIN";ct.QUOTE_DOUBLE="QUOTE_DOUBLE";ct.QUOTE_SINGLE="QUOTE_SINGLE";const $te="tag:yaml.org,2002:";function Hte(t,e,n){if(e){const s=n.filter(a=>a.tag===e),r=s.find(a=>!a.format)??s[0];if(!r)throw new Error(`Tag ${e} not found`);return r}return n.find(s=>s.identify?.(t)&&!s.format)}function df(t,e,n){if(Vf(t)&&(t=t.contents),gn(t))return t;if(yn(t)){const m=n.schema[ol].createNode?.(n.schema,null,n);return m.items.push(t),m}(t instanceof String||t instanceof Number||t instanceof Boolean||typeof BigInt<"u"&&t instanceof BigInt)&&(t=t.valueOf());const{aliasDuplicateObjects:s,onAnchor:r,onTagObj:a,schema:o,sourceObjects:c}=n;let h;if(s&&t&&typeof t=="object"){if(h=c.get(t),h)return h.anchor??(h.anchor=r(t)),new uk(h.anchor);h={anchor:null,node:null},c.set(t,h)}e?.startsWith("!!")&&(e=$te+e.slice(2));let d=Hte(t,e,o.tags);if(!d){if(t&&typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object"){const m=new ct(t);return h&&(h.node=m),m}d=t instanceof Map?o[ol]:Symbol.iterator in Object(t)?o[Tu]:o[ol]}a&&(a(d),delete n.onTagObj);const g=d?.createNode?d.createNode(n.schema,t,n):typeof d?.nodeClass?.from=="function"?d.nodeClass.from(n.schema,t,n):new ct(t);return e?g.tag=e:d.default||(g.tag=d.tag),h&&(h.node=g),g}function fg(t,e,n){let s=n;for(let r=e.length-1;r>=0;--r){const a=e[r];if(typeof a=="number"&&Number.isInteger(a)&&a>=0){const o=[];o[a]=s,s=o}else s=new Map([[a,s]])}return df(s,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}const _d=t=>t==null||typeof t=="object"&&!!t[Symbol.iterator]().next().done;class cD extends ck{constructor(e,n){super(e),Object.defineProperty(this,"schema",{value:n,configurable:!0,enumerable:!1,writable:!0})}clone(e){const n=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(n.schema=e),n.items=n.items.map(s=>gn(s)||yn(s)?s.clone(e):s),this.range&&(n.range=this.range.slice()),n}addIn(e,n){if(_d(e))this.add(n);else{const[s,...r]=e,a=this.get(s,!0);if(mn(a))a.addIn(r,n);else if(a===void 0&&this.schema)this.set(s,fg(this.schema,r,n));else throw new Error(`Expected YAML collection at ${s}. Remaining path: ${r}`)}}deleteIn(e){const[n,...s]=e;if(s.length===0)return this.delete(n);const r=this.get(n,!0);if(mn(r))return r.deleteIn(s);throw new Error(`Expected YAML collection at ${n}. Remaining path: ${s}`)}getIn(e,n){const[s,...r]=e,a=this.get(s,!0);return r.length===0?!n&&Gt(a)?a.value:a:mn(a)?a.getIn(r,n):void 0}hasAllNullValues(e){return this.items.every(n=>{if(!yn(n))return!1;const s=n.value;return s==null||e&&Gt(s)&&s.value==null&&!s.commentBefore&&!s.comment&&!s.tag})}hasIn(e){const[n,...s]=e;if(s.length===0)return this.has(n);const r=this.get(n,!0);return mn(r)?r.hasIn(s):!1}setIn(e,n){const[s,...r]=e;if(r.length===0)this.set(s,n);else{const a=this.get(s,!0);if(mn(a))a.setIn(r,n);else if(a===void 0&&this.schema)this.set(s,fg(this.schema,r,n));else throw new Error(`Expected YAML collection at ${s}. Remaining path: ${r}`)}}}const Ute=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function ta(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}const Wl=(t,e,n)=>t.endsWith(`
`)?ta(n,e):n.includes(`
`)?`
`+ta(n,e):(t.endsWith(" ")?"":" ")+n,uD="flow",tS="block",a0="quoted";function Ly(t,e,n="flow",{indentAtStart:s,lineWidth:r=80,minContentWidth:a=20,onFold:o,onOverflow:c}={}){if(!r||r<0)return t;r<a&&(a=0);const h=Math.max(1+a,1+r-e.length);if(t.length<=h)return t;const d=[],g={};let m=r-e.length;typeof s=="number"&&(s>r-Math.max(2,a)?d.push(0):m=r-s);let v,y,_=!1,w=-1,S=-1,k=-1;n===tS&&(w=qj(t,w,e.length),w!==-1&&(m=w+h));for(let E;E=t[w+=1];){if(n===a0&&E==="\\"){switch(S=w,t[w+1]){case"x":w+=3;break;case"u":w+=5;break;case"U":w+=9;break;default:w+=1}k=w}if(E===`
`)n===tS&&(w=qj(t,w,e.length)),m=w+e.length+h,v=void 0;else{if(E===" "&&y&&y!==" "&&y!==`
`&&y!=="	"){const B=t[w+1];B&&B!==" "&&B!==`
`&&B!=="	"&&(v=w)}if(w>=m)if(v)d.push(v),m=v+h,v=void 0;else if(n===a0){for(;y===" "||y==="	";)y=E,E=t[w+=1],_=!0;const B=w>k+1?w-2:S-1;if(g[B])return t;d.push(B),g[B]=!0,m=B+h,v=void 0}else _=!0}y=E}if(_&&c&&c(),d.length===0)return t;o&&o();let C=t.slice(0,d[0]);for(let E=0;E<d.length;++E){const B=d[E],D=d[E+1]||t.length;B===0?C=`
${e}${t.slice(0,D)}`:(n===a0&&g[B]&&(C+=`${t[B]}\\`),C+=`
${e}${t.slice(B+1,D)}`)}return C}function qj(t,e,n){let s=e,r=e+1,a=t[r];for(;a===" "||a==="	";)if(e<r+n)a=t[++e];else{do a=t[++e];while(a&&a!==`
`);s=e,r=e+1,a=t[r]}return s}const Iy=(t,e)=>({indentAtStart:e?t.indent.length:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),Py=t=>/^(%|---|\.\.\.)/m.test(t);function Vte(t,e,n){if(!e||e<0)return!1;const s=e-n,r=t.length;if(r<=s)return!1;for(let a=0,o=0;a<r;++a)if(t[a]===`
`){if(a-o>s)return!0;if(o=a+1,r-o<=s)return!1}return!0}function Hd(t,e){const n=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return n;const{implicitKey:s}=e,r=e.options.doubleQuotedMinMultiLineLength,a=e.indent||(Py(t)?"  ":"");let o="",c=0;for(let h=0,d=n[h];d;d=n[++h])if(d===" "&&n[h+1]==="\\"&&n[h+2]==="n"&&(o+=n.slice(c,h)+"\\ ",h+=1,c=h,d="\\"),d==="\\")switch(n[h+1]){case"u":{o+=n.slice(c,h);const g=n.substr(h+2,4);switch(g){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:g.substr(0,2)==="00"?o+="\\x"+g.substr(2):o+=n.substr(h,6)}h+=5,c=h+1}break;case"n":if(s||n[h+2]==='"'||n.length<r)h+=1;else{for(o+=n.slice(c,h)+`

`;n[h+2]==="\\"&&n[h+3]==="n"&&n[h+4]!=='"';)o+=`
`,h+=2;o+=a,n[h+2]===" "&&(o+="\\"),h+=1,c=h+1}break;default:h+=1}return o=c?o+n.slice(c):n,s?o:Ly(o,a,a0,Iy(e,!1))}function nS(t,e){if(e.options.singleQuote===!1||e.implicitKey&&t.includes(`
`)||/[ \t]\n|\n[ \t]/.test(t))return Hd(t,e);const n=e.indent||(Py(t)?"  ":""),s="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return e.implicitKey?s:Ly(s,n,uD,Iy(e,!1))}function Pc(t,e){const{singleQuote:n}=e.options;let s;if(n===!1)s=Hd;else{const r=t.includes('"'),a=t.includes("'");r&&!a?s=nS:a&&!r?s=Hd:s=n?nS:Hd}return s(t,e)}let sS;try{sS=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{sS=/\n+(?!\n|$)/g}function l0({comment:t,type:e,value:n},s,r,a){const{blockQuote:o,commentString:c,lineWidth:h}=s.options;if(!o||/\n[\t ]+$/.test(n))return Pc(n,s);const d=s.indent||(s.forceBlockIndent||Py(n)?"  ":""),g=o==="literal"?!0:o==="folded"||e===ct.BLOCK_FOLDED?!1:e===ct.BLOCK_LITERAL?!0:!Vte(n,h,d.length);if(!n)return g?`|
`:`>
`;let m,v;for(v=n.length;v>0;--v){const D=n[v-1];if(D!==`
`&&D!=="	"&&D!==" ")break}let y=n.substring(v);const _=y.indexOf(`
`);_===-1?m="-":n===y||_!==y.length-1?(m="+",a&&a()):m="",y&&(n=n.slice(0,-y.length),y[y.length-1]===`
`&&(y=y.slice(0,-1)),y=y.replace(sS,`$&${d}`));let w=!1,S,k=-1;for(S=0;S<n.length;++S){const D=n[S];if(D===" ")w=!0;else if(D===`
`)k=S;else break}let C=n.substring(0,k<S?k+1:S);C&&(n=n.substring(C.length),C=C.replace(/\n+/g,`$&${d}`));let B=(w?d?"2":"1":"")+m;if(t&&(B+=" "+c(t.replace(/ ?[\r\n]+/g," ")),r&&r()),!g){const D=n.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${d}`);let j=!1;const P=Iy(s,!0);o!=="folded"&&e!==ct.BLOCK_FOLDED&&(P.onOverflow=()=>{j=!0});const U=Ly(`${C}${D}${y}`,d,tS,P);if(!j)return`>${B}
${d}${U}`}return n=n.replace(/\n+/g,`$&${d}`),`|${B}
${d}${C}${n}${y}`}function Fte(t,e,n,s){const{type:r,value:a}=t,{actualString:o,implicitKey:c,indent:h,indentStep:d,inFlow:g}=e;if(c&&a.includes(`
`)||g&&/[[\]{},]/.test(a))return Pc(a,e);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(a))return c||g||!a.includes(`
`)?Pc(a,e):l0(t,e,n,s);if(!c&&!g&&r!==ct.PLAIN&&a.includes(`
`))return l0(t,e,n,s);if(Py(a)){if(h==="")return e.forceBlockIndent=!0,l0(t,e,n,s);if(c&&h===d)return Pc(a,e)}const m=a.replace(/\n+/g,`$&
${h}`);if(o){const v=w=>w.default&&w.tag!=="tag:yaml.org,2002:str"&&w.test?.test(m),{compat:y,tags:_}=e.doc.schema;if(_.some(v)||y?.some(v))return Pc(a,e)}return c?m:Ly(m,h,uD,Iy(e,!1))}function hk(t,e,n,s){const{implicitKey:r,inFlow:a}=e,o=typeof t.value=="string"?t:Object.assign({},t,{value:String(t.value)});let{type:c}=t;c!==ct.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)&&(c=ct.QUOTE_DOUBLE);const h=g=>{switch(g){case ct.BLOCK_FOLDED:case ct.BLOCK_LITERAL:return r||a?Pc(o.value,e):l0(o,e,n,s);case ct.QUOTE_DOUBLE:return Hd(o.value,e);case ct.QUOTE_SINGLE:return nS(o.value,e);case ct.PLAIN:return Fte(o,e,n,s);default:return null}};let d=h(c);if(d===null){const{defaultKeyType:g,defaultStringType:m}=e.options,v=r&&g||m;if(d=h(v),d===null)throw new Error(`Unsupported default string type ${v}`)}return d}function hD(t,e){const n=Object.assign({blockQuote:!0,commentString:Ute,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e);let s;switch(n.collectionStyle){case"block":s=!1;break;case"flow":s=!0;break;default:s=null}return{anchors:new Set,doc:t,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:typeof n.indent=="number"?" ".repeat(n.indent):"  ",inFlow:s,options:n}}function qte(t,e){if(e.tag){const r=t.filter(a=>a.tag===e.tag);if(r.length>0)return r.find(a=>a.format===e.format)??r[0]}let n,s;if(Gt(e)){s=e.value;let r=t.filter(a=>a.identify?.(s));if(r.length>1){const a=r.filter(o=>o.test);a.length>0&&(r=a)}n=r.find(a=>a.format===e.format)??r.find(a=>!a.format)}else s=e,n=t.find(r=>r.nodeClass&&s instanceof r.nodeClass);if(!n){const r=s?.constructor?.name??(s===null?"null":typeof s);throw new Error(`Tag not resolved for ${r} value`)}return n}function Kte(t,e,{anchors:n,doc:s}){if(!s.directives)return"";const r=[],a=(Gt(t)||mn(t))&&t.anchor;a&&iD(a)&&(n.add(a),r.push(`&${a}`));const o=t.tag??(e.default?null:e.tag);return o&&r.push(s.directives.tagString(o)),r.join(" ")}function lu(t,e,n,s){if(yn(t))return t.toString(e,n,s);if(Eo(t)){if(e.doc.directives)return t.toString(e);if(e.resolvedAliases?.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let r;const a=gn(t)?t:e.doc.createNode(t,{onTagObj:h=>r=h});r??(r=qte(e.doc.schema.tags,a));const o=Kte(a,r,e);o.length>0&&(e.indentAtStart=(e.indentAtStart??0)+o.length+1);const c=typeof r.stringify=="function"?r.stringify(a,e,n,s):Gt(a)?hk(a,e,n,s):a.toString(e,n,s);return o?Gt(a)||c[0]==="{"||c[0]==="["?`${o} ${c}`:`${o}
${e.indent}${c}`:c}function Wte({key:t,value:e},n,s,r){const{allNullValues:a,doc:o,indent:c,indentStep:h,options:{commentString:d,indentSeq:g,simpleKeys:m}}=n;let v=gn(t)&&t.comment||null;if(m){if(v)throw new Error("With simple keys, key nodes cannot have comments");if(mn(t)||!gn(t)&&typeof t=="object"){const P="With simple keys, collection cannot be used as a key value";throw new Error(P)}}let y=!m&&(!t||v&&e==null&&!n.inFlow||mn(t)||(Gt(t)?t.type===ct.BLOCK_FOLDED||t.type===ct.BLOCK_LITERAL:typeof t=="object"));n=Object.assign({},n,{allNullValues:!1,implicitKey:!y&&(m||!a),indent:c+h});let _=!1,w=!1,S=lu(t,n,()=>_=!0,()=>w=!0);if(!y&&!n.inFlow&&S.length>1024){if(m)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");y=!0}if(n.inFlow){if(a||e==null)return _&&s&&s(),S===""?"?":y?`? ${S}`:S}else if(a&&!m||e==null&&y)return S=`? ${S}`,v&&!_?S+=Wl(S,n.indent,d(v)):w&&r&&r(),S;_&&(v=null),y?(v&&(S+=Wl(S,n.indent,d(v))),S=`? ${S}
${c}:`):(S=`${S}:`,v&&(S+=Wl(S,n.indent,d(v))));let k,C,E;gn(e)?(k=!!e.spaceBefore,C=e.commentBefore,E=e.comment):(k=!1,C=null,E=null,e&&typeof e=="object"&&(e=o.createNode(e))),n.implicitKey=!1,!y&&!v&&Gt(e)&&(n.indentAtStart=S.length+1),w=!1,!g&&h.length>=2&&!n.inFlow&&!y&&qf(e)&&!e.flow&&!e.tag&&!e.anchor&&(n.indent=n.indent.substring(2));let B=!1;const D=lu(e,n,()=>B=!0,()=>w=!0);let j=" ";if(v||k||C){if(j=k?`
`:"",C){const P=d(C);j+=`
${ta(P,n.indent)}`}D===""&&!n.inFlow?j===`
`&&E&&(j=`

`):j+=`
${n.indent}`}else if(!y&&mn(e)){const P=D[0],U=D.indexOf(`
`),X=U!==-1,$=n.inFlow??e.flow??e.items.length===0;if(X||!$){let Z=!1;if(X&&(P==="&"||P==="!")){let F=D.indexOf(" ");P==="&"&&F!==-1&&F<U&&D[F+1]==="!"&&(F=D.indexOf(" ",F+1)),(F===-1||U<F)&&(Z=!0)}Z||(j=`
${n.indent}`)}}else(D===""||D[0]===`
`)&&(j="");return S+=j+D,n.inFlow?B&&s&&s():E&&!B?S+=Wl(S,n.indent,d(E)):w&&r&&r(),S}function dD(t,e){(t==="debug"||t==="warn")&&console.warn(e)}const Om="<<",na={identify:t=>t===Om||typeof t=="symbol"&&t.description===Om,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new ct(Symbol(Om)),{addToJSMap:fD}),stringify:()=>Om},Gte=(t,e)=>(na.identify(e)||Gt(e)&&(!e.type||e.type===ct.PLAIN)&&na.identify(e.value))&&t?.doc.schema.tags.some(n=>n.tag===na.tag&&n.default);function fD(t,e,n){if(n=t&&Eo(n)?n.resolve(t.doc):n,qf(n))for(const s of n.items)px(t,e,s);else if(Array.isArray(n))for(const s of n)px(t,e,s);else px(t,e,n)}function px(t,e,n){const s=t&&Eo(n)?n.resolve(t.doc):n;if(!Ff(s))throw new Error("Merge sources must be maps or map aliases");const r=s.toJSON(null,t,Map);for(const[a,o]of r)e instanceof Map?e.has(a)||e.set(a,o):e instanceof Set?e.add(a):Object.prototype.hasOwnProperty.call(e,a)||Object.defineProperty(e,a,{value:o,writable:!0,enumerable:!0,configurable:!0});return e}function pD(t,e,{key:n,value:s}){if(gn(n)&&n.addToJSMap)n.addToJSMap(t,e,s);else if(Gte(t,n))fD(t,e,s);else{const r=Lr(n,"",t);if(e instanceof Map)e.set(r,Lr(s,r,t));else if(e instanceof Set)e.add(r);else{const a=Yte(n,r,t),o=Lr(s,a,t);a in e?Object.defineProperty(e,a,{value:o,writable:!0,enumerable:!0,configurable:!0}):e[a]=o}}return e}function Yte(t,e,n){if(e===null)return"";if(typeof e!="object")return String(e);if(gn(t)&&n?.doc){const s=hD(n.doc,{});s.anchors=new Set;for(const a of n.anchors.keys())s.anchors.add(a.anchor);s.inFlow=!0,s.inStringifyKey=!0;const r=t.toString(s);if(!n.mapKeyWarned){let a=JSON.stringify(r);a.length>40&&(a=a.substring(0,36)+'..."'),dD(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${a}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return r}return JSON.stringify(e)}function dk(t,e,n){const s=df(t,void 0,n),r=df(e,void 0,n);return new ws(s,r)}class ws{constructor(e,n=null){Object.defineProperty(this,Ir,{value:sD}),this.key=e,this.value=n}clone(e){let{key:n,value:s}=this;return gn(n)&&(n=n.clone(e)),gn(s)&&(s=s.clone(e)),new ws(n,s)}toJSON(e,n){const s=n?.mapAsMap?new Map:{};return pD(n,s,this)}toString(e,n,s){return e?.doc?Wte(this,e,n,s):JSON.stringify(this)}}function mD(t,e,n){return(e.inFlow??t.flow?Jte:Xte)(t,e,n)}function Xte({comment:t,items:e},n,{blockItemPrefix:s,flowChars:r,itemIndent:a,onChompKeep:o,onComment:c}){const{indent:h,options:{commentString:d}}=n,g=Object.assign({},n,{indent:a,type:null});let m=!1;const v=[];for(let _=0;_<e.length;++_){const w=e[_];let S=null;if(gn(w))!m&&w.spaceBefore&&v.push(""),pg(n,v,w.commentBefore,m),w.comment&&(S=w.comment);else if(yn(w)){const C=gn(w.key)?w.key:null;C&&(!m&&C.spaceBefore&&v.push(""),pg(n,v,C.commentBefore,m))}m=!1;let k=lu(w,g,()=>S=null,()=>m=!0);S&&(k+=Wl(k,a,d(S))),m&&S&&(m=!1),v.push(s+k)}let y;if(v.length===0)y=r.start+r.end;else{y=v[0];for(let _=1;_<v.length;++_){const w=v[_];y+=w?`
${h}${w}`:`
`}}return t?(y+=`
`+ta(d(t),h),c&&c()):m&&o&&o(),y}function Jte({items:t},e,{flowChars:n,itemIndent:s}){const{indent:r,indentStep:a,flowCollectionPadding:o,options:{commentString:c}}=e;s+=a;const h=Object.assign({},e,{indent:s,inFlow:!0,type:null});let d=!1,g=0;const m=[];for(let _=0;_<t.length;++_){const w=t[_];let S=null;if(gn(w))w.spaceBefore&&m.push(""),pg(e,m,w.commentBefore,!1),w.comment&&(S=w.comment);else if(yn(w)){const C=gn(w.key)?w.key:null;C&&(C.spaceBefore&&m.push(""),pg(e,m,C.commentBefore,!1),C.comment&&(d=!0));const E=gn(w.value)?w.value:null;E?(E.comment&&(S=E.comment),E.commentBefore&&(d=!0)):w.value==null&&C?.comment&&(S=C.comment)}S&&(d=!0);let k=lu(w,h,()=>S=null);_<t.length-1&&(k+=","),S&&(k+=Wl(k,s,c(S))),!d&&(m.length>g||k.includes(`
`))&&(d=!0),m.push(k),g=m.length}const{start:v,end:y}=n;if(m.length===0)return v+y;if(!d){const _=m.reduce((w,S)=>w+S.length+2,2);d=e.options.lineWidth>0&&_>e.options.lineWidth}if(d){let _=v;for(const w of m)_+=w?`
${a}${r}${w}`:`
`;return`${_}
${r}${y}`}else return`${v}${o}${m.join(" ")}${o}${y}`}function pg({indent:t,options:{commentString:e}},n,s,r){if(s&&r&&(s=s.replace(/^\n+/,"")),s){const a=ta(e(s),t);n.push(a.trimStart())}}function Gl(t,e){const n=Gt(e)?e.value:e;for(const s of t)if(yn(s)&&(s.key===e||s.key===n||Gt(s.key)&&s.key.value===n))return s}class Tr extends cD{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(ol,e),this.items=[]}static from(e,n,s){const{keepUndefined:r,replacer:a}=s,o=new this(e),c=(h,d)=>{if(typeof a=="function")d=a.call(n,h,d);else if(Array.isArray(a)&&!a.includes(h))return;(d!==void 0||r)&&o.items.push(dk(h,d,s))};if(n instanceof Map)for(const[h,d]of n)c(h,d);else if(n&&typeof n=="object")for(const h of Object.keys(n))c(h,n[h]);return typeof e.sortMapEntries=="function"&&o.items.sort(e.sortMapEntries),o}add(e,n){let s;yn(e)?s=e:!e||typeof e!="object"||!("key"in e)?s=new ws(e,e?.value):s=new ws(e.key,e.value);const r=Gl(this.items,s.key),a=this.schema?.sortMapEntries;if(r){if(!n)throw new Error(`Key ${s.key} already set`);Gt(r.value)&&oD(s.value)?r.value.value=s.value:r.value=s.value}else if(a){const o=this.items.findIndex(c=>a(s,c)<0);o===-1?this.items.push(s):this.items.splice(o,0,s)}else this.items.push(s)}delete(e){const n=Gl(this.items,e);return n?this.items.splice(this.items.indexOf(n),1).length>0:!1}get(e,n){const r=Gl(this.items,e)?.value;return(!n&&Gt(r)?r.value:r)??void 0}has(e){return!!Gl(this.items,e)}set(e,n){this.add(new ws(e,n),!0)}toJSON(e,n,s){const r=s?new s:n?.mapAsMap?new Map:{};n?.onCreate&&n.onCreate(r);for(const a of this.items)pD(n,r,a);return r}toString(e,n,s){if(!e)return JSON.stringify(this);for(const r of this.items)if(!yn(r))throw new Error(`Map items must all be pairs; found ${JSON.stringify(r)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),mD(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:s,onComment:n})}}const Ou={collection:"map",default:!0,nodeClass:Tr,tag:"tag:yaml.org,2002:map",resolve(t,e){return Ff(t)||e("Expected a mapping for this tag"),t},createNode:(t,e,n)=>Tr.from(t,e,n)};class bo extends cD{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(Tu,e),this.items=[]}add(e){this.items.push(e)}delete(e){const n=Bm(e);return typeof n!="number"?!1:this.items.splice(n,1).length>0}get(e,n){const s=Bm(e);if(typeof s!="number")return;const r=this.items[s];return!n&&Gt(r)?r.value:r}has(e){const n=Bm(e);return typeof n=="number"&&n<this.items.length}set(e,n){const s=Bm(e);if(typeof s!="number")throw new Error(`Expected a valid index, not ${e}.`);const r=this.items[s];Gt(r)&&oD(n)?r.value=n:this.items[s]=n}toJSON(e,n){const s=[];n?.onCreate&&n.onCreate(s);let r=0;for(const a of this.items)s.push(Lr(a,String(r++),n));return s}toString(e,n,s){return e?mD(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:s,onComment:n}):JSON.stringify(this)}static from(e,n,s){const{replacer:r}=s,a=new this(e);if(n&&Symbol.iterator in Object(n)){let o=0;for(let c of n){if(typeof r=="function"){const h=n instanceof Set?c:String(o++);c=r.call(n,h,c)}a.items.push(df(c,void 0,s))}}return a}}function Bm(t){let e=Gt(t)?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}const Bu={collection:"seq",default:!0,nodeClass:bo,tag:"tag:yaml.org,2002:seq",resolve(t,e){return qf(t)||e("Expected a sequence for this tag"),t},createNode:(t,e,n)=>bo.from(t,e,n)},zy={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify(t,e,n,s){return e=Object.assign({actualString:!0},e),hk(t,e,n,s)}},$y={identify:t=>t==null,createNode:()=>new ct(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new ct(null),stringify:({source:t},e)=>typeof t=="string"&&$y.test.test(t)?t:e.options.nullStr},fk={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new ct(t[0]==="t"||t[0]==="T"),stringify({source:t,value:e},n){if(t&&fk.test.test(t)){const s=t[0]==="t"||t[0]==="T";if(e===s)return t}return e?n.options.trueStr:n.options.falseStr}};function ei({format:t,minFractionDigits:e,tag:n,value:s}){if(typeof s=="bigint")return String(s);const r=typeof s=="number"?s:Number(s);if(!isFinite(r))return isNaN(r)?".nan":r<0?"-.inf":".inf";let a=Object.is(s,-0)?"-0":JSON.stringify(s);if(!t&&e&&(!n||n==="tag:yaml.org,2002:float")&&/^\d/.test(a)){let o=a.indexOf(".");o<0&&(o=a.length,a+=".");let c=e-(a.length-o-1);for(;c-- >0;)a+="0"}return a}const gD={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:ei},yD={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():ei(t)}},vD={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){const e=new ct(parseFloat(t)),n=t.indexOf(".");return n!==-1&&t[t.length-1]==="0"&&(e.minFractionDigits=t.length-n-1),e},stringify:ei},Hy=t=>typeof t=="bigint"||Number.isInteger(t),pk=(t,e,n,{intAsBigInt:s})=>s?BigInt(t):parseInt(t.substring(e),n);function bD(t,e,n){const{value:s}=t;return Hy(s)&&s>=0?n+s.toString(e):ei(t)}const xD={identify:t=>Hy(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,n)=>pk(t,2,8,n),stringify:t=>bD(t,8,"0o")},_D={identify:Hy,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,n)=>pk(t,0,10,n),stringify:ei},wD={identify:t=>Hy(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,n)=>pk(t,2,16,n),stringify:t=>bD(t,16,"0x")},Qte=[Ou,Bu,zy,$y,fk,xD,_D,wD,gD,yD,vD];function Kj(t){return typeof t=="bigint"||Number.isInteger(t)}const Mm=({value:t})=>JSON.stringify(t),Zte=[{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:Mm},{identify:t=>t==null,createNode:()=>new ct(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:Mm},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:t=>t==="true",stringify:Mm},{identify:Kj,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:n})=>n?BigInt(t):parseInt(t,10),stringify:({value:t})=>Kj(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:Mm}],ene={default:!0,tag:"",test:/^/,resolve(t,e){return e(`Unresolved plain scalar ${JSON.stringify(t)}`),t}},tne=[Ou,Bu].concat(Zte,ene),mk={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if(typeof atob=="function"){const n=atob(t.replace(/[\n\r]/g,"")),s=new Uint8Array(n.length);for(let r=0;r<n.length;++r)s[r]=n.charCodeAt(r);return s}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:n},s,r,a){if(!n)return"";const o=n;let c;if(typeof btoa=="function"){let h="";for(let d=0;d<o.length;++d)h+=String.fromCharCode(o[d]);c=btoa(h)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e??(e=ct.BLOCK_LITERAL),e!==ct.QUOTE_DOUBLE){const h=Math.max(s.options.lineWidth-s.indent.length,s.options.minContentWidth),d=Math.ceil(c.length/h),g=new Array(d);for(let m=0,v=0;m<d;++m,v+=h)g[m]=c.substr(v,h);c=g.join(e===ct.BLOCK_LITERAL?`
`:" ")}return hk({comment:t,type:e,value:c},s,r,a)}};function SD(t,e){if(qf(t))for(let n=0;n<t.items.length;++n){let s=t.items[n];if(!yn(s)){if(Ff(s)){s.items.length>1&&e("Each pair must have its own sequence indicator");const r=s.items[0]||new ws(new ct(null));if(s.commentBefore&&(r.key.commentBefore=r.key.commentBefore?`${s.commentBefore}
${r.key.commentBefore}`:s.commentBefore),s.comment){const a=r.value??r.key;a.comment=a.comment?`${s.comment}
${a.comment}`:s.comment}s=r}t.items[n]=yn(s)?s:new ws(s)}}else e("Expected a sequence for this tag");return t}function kD(t,e,n){const{replacer:s}=n,r=new bo(t);r.tag="tag:yaml.org,2002:pairs";let a=0;if(e&&Symbol.iterator in Object(e))for(let o of e){typeof s=="function"&&(o=s.call(e,String(a++),o));let c,h;if(Array.isArray(o))if(o.length===2)c=o[0],h=o[1];else throw new TypeError(`Expected [key, value] tuple: ${o}`);else if(o&&o instanceof Object){const d=Object.keys(o);if(d.length===1)c=d[0],h=o[c];else throw new TypeError(`Expected tuple with one key, not ${d.length} keys`)}else c=o;r.items.push(dk(c,h,n))}return r}const gk={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:SD,createNode:kD};class Vc extends bo{constructor(){super(),this.add=Tr.prototype.add.bind(this),this.delete=Tr.prototype.delete.bind(this),this.get=Tr.prototype.get.bind(this),this.has=Tr.prototype.has.bind(this),this.set=Tr.prototype.set.bind(this),this.tag=Vc.tag}toJSON(e,n){if(!n)return super.toJSON(e);const s=new Map;n?.onCreate&&n.onCreate(s);for(const r of this.items){let a,o;if(yn(r)?(a=Lr(r.key,"",n),o=Lr(r.value,a,n)):a=Lr(r,"",n),s.has(a))throw new Error("Ordered maps must not include duplicate keys");s.set(a,o)}return s}static from(e,n,s){const r=kD(e,n,s),a=new this;return a.items=r.items,a}}Vc.tag="tag:yaml.org,2002:omap";const yk={collection:"seq",identify:t=>t instanceof Map,nodeClass:Vc,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){const n=SD(t,e),s=[];for(const{key:r}of n.items)Gt(r)&&(s.includes(r.value)?e(`Ordered maps must not include duplicate keys: ${r.value}`):s.push(r.value));return Object.assign(new Vc,n)},createNode:(t,e,n)=>Vc.from(t,e,n)};function CD({value:t,source:e},n){return e&&(t?ND:AD).test.test(e)?e:t?n.options.trueStr:n.options.falseStr}const ND={identify:t=>t===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new ct(!0),stringify:CD},AD={identify:t=>t===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new ct(!1),stringify:CD},nne={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:ei},sne={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():ei(t)}},rne={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){const e=new ct(parseFloat(t.replace(/_/g,""))),n=t.indexOf(".");if(n!==-1){const s=t.substring(n+1).replace(/_/g,"");s[s.length-1]==="0"&&(e.minFractionDigits=s.length)}return e},stringify:ei},Kf=t=>typeof t=="bigint"||Number.isInteger(t);function Uy(t,e,n,{intAsBigInt:s}){const r=t[0];if((r==="-"||r==="+")&&(e+=1),t=t.substring(e).replace(/_/g,""),s){switch(n){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`;break}const o=BigInt(t);return r==="-"?BigInt(-1)*o:o}const a=parseInt(t,n);return r==="-"?-1*a:a}function vk(t,e,n){const{value:s}=t;if(Kf(s)){const r=s.toString(e);return s<0?"-"+n+r.substr(1):n+r}return ei(t)}const ine={identify:Kf,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,n)=>Uy(t,2,2,n),stringify:t=>vk(t,2,"0b")},ane={identify:Kf,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,n)=>Uy(t,1,8,n),stringify:t=>vk(t,8,"0")},lne={identify:Kf,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,n)=>Uy(t,0,10,n),stringify:ei},one={identify:Kf,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,n)=>Uy(t,2,16,n),stringify:t=>vk(t,16,"0x")};class Fc extends Tr{constructor(e){super(e),this.tag=Fc.tag}add(e){let n;yn(e)?n=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?n=new ws(e.key,null):n=new ws(e,null),Gl(this.items,n.key)||this.items.push(n)}get(e,n){const s=Gl(this.items,e);return!n&&yn(s)?Gt(s.key)?s.key.value:s.key:s}set(e,n){if(typeof n!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof n}`);const s=Gl(this.items,e);s&&!n?this.items.splice(this.items.indexOf(s),1):!s&&n&&this.items.push(new ws(e))}toJSON(e,n){return super.toJSON(e,n,Set)}toString(e,n,s){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),n,s);throw new Error("Set items must all have null values")}static from(e,n,s){const{replacer:r}=s,a=new this(e);if(n&&Symbol.iterator in Object(n))for(let o of n)typeof r=="function"&&(o=r.call(n,o,o)),a.items.push(dk(o,null,s));return a}}Fc.tag="tag:yaml.org,2002:set";const bk={collection:"map",identify:t=>t instanceof Set,nodeClass:Fc,default:!1,tag:"tag:yaml.org,2002:set",createNode:(t,e,n)=>Fc.from(t,e,n),resolve(t,e){if(Ff(t)){if(t.hasAllNullValues(!0))return Object.assign(new Fc,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t}};function xk(t,e){const n=t[0],s=n==="-"||n==="+"?t.substring(1):t,r=o=>e?BigInt(o):Number(o),a=s.replace(/_/g,"").split(":").reduce((o,c)=>o*r(60)+r(c),r(0));return n==="-"?r(-1)*a:a}function ED(t){let{value:e}=t,n=o=>o;if(typeof e=="bigint")n=o=>BigInt(o);else if(isNaN(e)||!isFinite(e))return ei(t);let s="";e<0&&(s="-",e*=n(-1));const r=n(60),a=[e%r];return e<60?a.unshift(0):(e=(e-a[0])/r,a.unshift(e%r),e>=60&&(e=(e-a[0])/r,a.unshift(e))),s+a.map(o=>String(o).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const jD={identify:t=>typeof t=="bigint"||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:n})=>xk(t,n),stringify:ED},TD={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>xk(t,!1),stringify:ED},Vy={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){const e=t.match(Vy.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,s,r,a,o,c]=e.map(Number),h=e[7]?Number((e[7]+"00").substr(1,3)):0;let d=Date.UTC(n,s-1,r,a||0,o||0,c||0,h);const g=e[8];if(g&&g!=="Z"){let m=xk(g,!1);Math.abs(m)<30&&(m*=60),d-=6e4*m}return new Date(d)},stringify:({value:t})=>t?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""},Wj=[Ou,Bu,zy,$y,ND,AD,ine,ane,lne,one,nne,sne,rne,mk,na,yk,gk,bk,jD,TD,Vy],Gj=new Map([["core",Qte],["failsafe",[Ou,Bu,zy]],["json",tne],["yaml11",Wj],["yaml-1.1",Wj]]),Yj={binary:mk,bool:fk,float:vD,floatExp:yD,floatNaN:gD,floatTime:TD,int:_D,intHex:wD,intOct:xD,intTime:jD,map:Ou,merge:na,null:$y,omap:yk,pairs:gk,seq:Bu,set:bk,timestamp:Vy},cne={"tag:yaml.org,2002:binary":mk,"tag:yaml.org,2002:merge":na,"tag:yaml.org,2002:omap":yk,"tag:yaml.org,2002:pairs":gk,"tag:yaml.org,2002:set":bk,"tag:yaml.org,2002:timestamp":Vy};function mx(t,e,n){const s=Gj.get(e);if(s&&!t)return n&&!s.includes(na)?s.concat(na):s.slice();let r=s;if(!r)if(Array.isArray(t))r=[];else{const a=Array.from(Gj.keys()).filter(o=>o!=="yaml11").map(o=>JSON.stringify(o)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${a} or define customTags array`)}if(Array.isArray(t))for(const a of t)r=r.concat(a);else typeof t=="function"&&(r=t(r.slice()));return n&&(r=r.concat(na)),r.reduce((a,o)=>{const c=typeof o=="string"?Yj[o]:o;if(!c){const h=JSON.stringify(o),d=Object.keys(Yj).map(g=>JSON.stringify(g)).join(", ");throw new Error(`Unknown custom tag ${h}; use one of ${d}`)}return a.includes(c)||a.push(c),a},[])}const une=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0;class _k{constructor({compat:e,customTags:n,merge:s,resolveKnownTags:r,schema:a,sortMapEntries:o,toStringDefaults:c}){this.compat=Array.isArray(e)?mx(e,"compat"):e?mx(null,e):null,this.name=typeof a=="string"&&a||"core",this.knownTags=r?cne:{},this.tags=mx(n,this.name,s),this.toStringOptions=c??null,Object.defineProperty(this,ol,{value:Ou}),Object.defineProperty(this,wi,{value:zy}),Object.defineProperty(this,Tu,{value:Bu}),this.sortMapEntries=typeof o=="function"?o:o===!0?une:null}clone(){const e=Object.create(_k.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}function hne(t,e){const n=[];let s=e.directives===!0;if(e.directives!==!1&&t.directives){const h=t.directives.toString(t);h?(n.push(h),s=!0):t.directives.docStart&&(s=!0)}s&&n.push("---");const r=hD(t,e),{commentString:a}=r.options;if(t.commentBefore){n.length!==1&&n.unshift("");const h=a(t.commentBefore);n.unshift(ta(h,""))}let o=!1,c=null;if(t.contents){if(gn(t.contents)){if(t.contents.spaceBefore&&s&&n.push(""),t.contents.commentBefore){const g=a(t.contents.commentBefore);n.push(ta(g,""))}r.forceBlockIndent=!!t.comment,c=t.contents.comment}const h=c?void 0:()=>o=!0;let d=lu(t.contents,r,()=>c=null,h);c&&(d+=Wl(d,"",a(c))),(d[0]==="|"||d[0]===">")&&n[n.length-1]==="---"?n[n.length-1]=`--- ${d}`:n.push(d)}else n.push(lu(t.contents,r));if(t.directives?.docEnd)if(t.comment){const h=a(t.comment);h.includes(`
`)?(n.push("..."),n.push(ta(h,""))):n.push(`... ${h}`)}else n.push("...");else{let h=t.comment;h&&o&&(h=h.replace(/^\n+/,"")),h&&((!o||c)&&n[n.length-1]!==""&&n.push(""),n.push(ta(a(h),"")))}return n.join(`
`)+`
`}let wk=class RD{constructor(e,n,s){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,Ir,{value:eS});let r=null;typeof n=="function"||Array.isArray(n)?r=n:s===void 0&&n&&(s=n,n=void 0);const a=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},s);this.options=a;let{version:o}=a;s?._directives?(this.directives=s._directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new vs({version:o}),this.setSchema(o,s),this.contents=e===void 0?null:this.createNode(e,r,s)}clone(){const e=Object.create(RD.prototype,{[Ir]:{value:eS}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=gn(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){wc(this.contents)&&this.contents.add(e)}addIn(e,n){wc(this.contents)&&this.contents.addIn(e,n)}createAlias(e,n){if(!e.anchor){const s=aD(this);e.anchor=!n||s.has(n)?lD(n||"a",s):n}return new uk(e.anchor)}createNode(e,n,s){let r;if(typeof n=="function")e=n.call({"":e},"",e),r=n;else if(Array.isArray(n)){const S=C=>typeof C=="number"||C instanceof String||C instanceof Number,k=n.filter(S).map(String);k.length>0&&(n=n.concat(k)),r=n}else s===void 0&&n&&(s=n,n=void 0);const{aliasDuplicateObjects:a,anchorPrefix:o,flow:c,keepUndefined:h,onTagObj:d,tag:g}=s??{},{onAnchor:m,setAnchors:v,sourceObjects:y}=zte(this,o||"a"),_={aliasDuplicateObjects:a??!0,keepUndefined:h??!1,onAnchor:m,onTagObj:d,replacer:r,schema:this.schema,sourceObjects:y},w=df(e,g,_);return c&&mn(w)&&(w.flow=!0),v(),w}createPair(e,n,s={}){const r=this.createNode(e,null,s),a=this.createNode(n,null,s);return new ws(r,a)}delete(e){return wc(this.contents)?this.contents.delete(e):!1}deleteIn(e){return _d(e)?this.contents==null?!1:(this.contents=null,!0):wc(this.contents)?this.contents.deleteIn(e):!1}get(e,n){return mn(this.contents)?this.contents.get(e,n):void 0}getIn(e,n){return _d(e)?!n&&Gt(this.contents)?this.contents.value:this.contents:mn(this.contents)?this.contents.getIn(e,n):void 0}has(e){return mn(this.contents)?this.contents.has(e):!1}hasIn(e){return _d(e)?this.contents!==void 0:mn(this.contents)?this.contents.hasIn(e):!1}set(e,n){this.contents==null?this.contents=fg(this.schema,[e],n):wc(this.contents)&&this.contents.set(e,n)}setIn(e,n){_d(e)?this.contents=n:this.contents==null?this.contents=fg(this.schema,Array.from(e),n):wc(this.contents)&&this.contents.setIn(e,n)}setSchema(e,n={}){typeof e=="number"&&(e=String(e));let s;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new vs({version:"1.1"}),s={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new vs({version:e}),s={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,s=null;break;default:{const r=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${r}`)}}if(n.schema instanceof Object)this.schema=n.schema;else if(s)this.schema=new _k(Object.assign(s,n));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:n,mapAsMap:s,maxAliasCount:r,onAnchor:a,reviver:o}={}){const c={anchors:new Map,doc:this,keep:!e,mapAsMap:s===!0,mapKeyWarned:!1,maxAliasCount:typeof r=="number"?r:100},h=Lr(this.contents,n??"",c);if(typeof a=="function")for(const{count:d,res:g}of c.anchors.values())a(g,d);return typeof o=="function"?Ic(o,{"":h},"",h):h}toJSON(e,n){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:n})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const n=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${n}`)}return hne(this,e)}};function wc(t){if(mn(t))return!0;throw new Error("Expected a YAML collection as document contents")}class OD extends Error{constructor(e,n,s,r){super(),this.name=e,this.code=s,this.message=r,this.pos=n}}class wd extends OD{constructor(e,n,s){super("YAMLParseError",e,n,s)}}class dne extends OD{constructor(e,n,s){super("YAMLWarning",e,n,s)}}const Xj=(t,e)=>n=>{if(n.pos[0]===-1)return;n.linePos=n.pos.map(c=>e.linePos(c));const{line:s,col:r}=n.linePos[0];n.message+=` at line ${s}, column ${r}`;let a=r-1,o=t.substring(e.lineStarts[s-1],e.lineStarts[s]).replace(/[\n\r]+$/,"");if(a>=60&&o.length>80){const c=Math.min(a-39,o.length-79);o=""+o.substring(c),a-=c-1}if(o.length>80&&(o=o.substring(0,79)+""),s>1&&/^ *$/.test(o.substring(0,a))){let c=t.substring(e.lineStarts[s-2],e.lineStarts[s-1]);c.length>80&&(c=c.substring(0,79)+`
`),o=c+o}if(/[^ ]/.test(o)){let c=1;const h=n.linePos[1];h?.line===s&&h.col>r&&(c=Math.max(1,Math.min(h.col-r,80-a)));const d=" ".repeat(a)+"^".repeat(c);n.message+=`:

${o}
${d}
`}};function ou(t,{flow:e,indicator:n,next:s,offset:r,onError:a,parentIndent:o,startOnNewline:c}){let h=!1,d=c,g=c,m="",v="",y=!1,_=!1,w=null,S=null,k=null,C=null,E=null,B=null,D=null;for(const U of t)switch(_&&(U.type!=="space"&&U.type!=="newline"&&U.type!=="comma"&&a(U.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),_=!1),w&&(d&&U.type!=="comment"&&U.type!=="newline"&&a(w,"TAB_AS_INDENT","Tabs are not allowed as indentation"),w=null),U.type){case"space":!e&&(n!=="doc-start"||s?.type!=="flow-collection")&&U.source.includes("	")&&(w=U),g=!0;break;case"comment":{g||a(U,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const X=U.source.substring(1)||" ";m?m+=v+X:m=X,v="",d=!1;break}case"newline":d?m?m+=U.source:(!B||n!=="seq-item-ind")&&(h=!0):v+=U.source,d=!0,y=!0,(S||k)&&(C=U),g=!0;break;case"anchor":S&&a(U,"MULTIPLE_ANCHORS","A node can have at most one anchor"),U.source.endsWith(":")&&a(U.offset+U.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),S=U,D??(D=U.offset),d=!1,g=!1,_=!0;break;case"tag":{k&&a(U,"MULTIPLE_TAGS","A node can have at most one tag"),k=U,D??(D=U.offset),d=!1,g=!1,_=!0;break}case n:(S||k)&&a(U,"BAD_PROP_ORDER",`Anchors and tags must be after the ${U.source} indicator`),B&&a(U,"UNEXPECTED_TOKEN",`Unexpected ${U.source} in ${e??"collection"}`),B=U,d=n==="seq-item-ind"||n==="explicit-key-ind",g=!1;break;case"comma":if(e){E&&a(U,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),E=U,d=!1,g=!1;break}default:a(U,"UNEXPECTED_TOKEN",`Unexpected ${U.type} token`),d=!1,g=!1}const j=t[t.length-1],P=j?j.offset+j.source.length:r;return _&&s&&s.type!=="space"&&s.type!=="newline"&&s.type!=="comma"&&(s.type!=="scalar"||s.source!=="")&&a(s.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),w&&(d&&w.indent<=o||s?.type==="block-map"||s?.type==="block-seq")&&a(w,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:E,found:B,spaceBefore:h,comment:m,hasNewline:y,anchor:S,tag:k,newlineAfterProp:C,end:P,start:D??P}}function ff(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes(`
`))return!0;if(t.end){for(const e of t.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(const e of t.items){for(const n of e.start)if(n.type==="newline")return!0;if(e.sep){for(const n of e.sep)if(n.type==="newline")return!0}if(ff(e.key)||ff(e.value))return!0}return!1;default:return!0}}function rS(t,e,n){if(e?.type==="flow-collection"){const s=e.end[0];s.indent===t&&(s.source==="]"||s.source==="}")&&ff(e)&&n(s,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function BD(t,e,n){const{uniqueKeys:s}=t.options;if(s===!1)return!1;const r=typeof s=="function"?s:(a,o)=>a===o||Gt(a)&&Gt(o)&&a.value===o.value;return e.some(a=>r(a.key,n))}const Jj="All mapping items must start at the same column";function fne({composeNode:t,composeEmptyNode:e},n,s,r,a){const o=a?.nodeClass??Tr,c=new o(n.schema);n.atRoot&&(n.atRoot=!1);let h=s.offset,d=null;for(const g of s.items){const{start:m,key:v,sep:y,value:_}=g,w=ou(m,{indicator:"explicit-key-ind",next:v??y?.[0],offset:h,onError:r,parentIndent:s.indent,startOnNewline:!0}),S=!w.found;if(S){if(v&&(v.type==="block-seq"?r(h,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in v&&v.indent!==s.indent&&r(h,"BAD_INDENT",Jj)),!w.anchor&&!w.tag&&!y){d=w.end,w.comment&&(c.comment?c.comment+=`
`+w.comment:c.comment=w.comment);continue}(w.newlineAfterProp||ff(v))&&r(v??m[m.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else w.found?.indent!==s.indent&&r(h,"BAD_INDENT",Jj);n.atKey=!0;const k=w.end,C=v?t(n,v,w,r):e(n,k,m,null,w,r);n.schema.compat&&rS(s.indent,v,r),n.atKey=!1,BD(n,c.items,C)&&r(k,"DUPLICATE_KEY","Map keys must be unique");const E=ou(y??[],{indicator:"map-value-ind",next:_,offset:C.range[2],onError:r,parentIndent:s.indent,startOnNewline:!v||v.type==="block-scalar"});if(h=E.end,E.found){S&&(_?.type==="block-map"&&!E.hasNewline&&r(h,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&w.start<E.found.offset-1024&&r(C.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const B=_?t(n,_,E,r):e(n,h,y,null,E,r);n.schema.compat&&rS(s.indent,_,r),h=B.range[2];const D=new ws(C,B);n.options.keepSourceTokens&&(D.srcToken=g),c.items.push(D)}else{S&&r(C.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),E.comment&&(C.comment?C.comment+=`
`+E.comment:C.comment=E.comment);const B=new ws(C);n.options.keepSourceTokens&&(B.srcToken=g),c.items.push(B)}}return d&&d<h&&r(d,"IMPOSSIBLE","Map comment with trailing content"),c.range=[s.offset,h,d??h],c}function pne({composeNode:t,composeEmptyNode:e},n,s,r,a){const o=a?.nodeClass??bo,c=new o(n.schema);n.atRoot&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let h=s.offset,d=null;for(const{start:g,value:m}of s.items){const v=ou(g,{indicator:"seq-item-ind",next:m,offset:h,onError:r,parentIndent:s.indent,startOnNewline:!0});if(!v.found)if(v.anchor||v.tag||m)m?.type==="block-seq"?r(v.end,"BAD_INDENT","All sequence items must start at the same column"):r(h,"MISSING_CHAR","Sequence item without - indicator");else{d=v.end,v.comment&&(c.comment=v.comment);continue}const y=m?t(n,m,v,r):e(n,v.end,g,null,v,r);n.schema.compat&&rS(s.indent,m,r),h=y.range[2],c.items.push(y)}return c.range=[s.offset,h,d??h],c}function Wf(t,e,n,s){let r="";if(t){let a=!1,o="";for(const c of t){const{source:h,type:d}=c;switch(d){case"space":a=!0;break;case"comment":{n&&!a&&s(c,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const g=h.substring(1)||" ";r?r+=o+g:r=g,o="";break}case"newline":r&&(o+=h),a=!0;break;default:s(c,"UNEXPECTED_TOKEN",`Unexpected ${d} at node end`)}e+=h.length}}return{comment:r,offset:e}}const gx="Block collections are not allowed within flow collections",yx=t=>t&&(t.type==="block-map"||t.type==="block-seq");function mne({composeNode:t,composeEmptyNode:e},n,s,r,a){const o=s.start.source==="{",c=o?"flow map":"flow sequence",h=a?.nodeClass??(o?Tr:bo),d=new h(n.schema);d.flow=!0;const g=n.atRoot;g&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let m=s.offset+s.start.source.length;for(let S=0;S<s.items.length;++S){const k=s.items[S],{start:C,key:E,sep:B,value:D}=k,j=ou(C,{flow:c,indicator:"explicit-key-ind",next:E??B?.[0],offset:m,onError:r,parentIndent:s.indent,startOnNewline:!1});if(!j.found){if(!j.anchor&&!j.tag&&!B&&!D){S===0&&j.comma?r(j.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${c}`):S<s.items.length-1&&r(j.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${c}`),j.comment&&(d.comment?d.comment+=`
`+j.comment:d.comment=j.comment),m=j.end;continue}!o&&n.options.strict&&ff(E)&&r(E,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(S===0)j.comma&&r(j.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${c}`);else if(j.comma||r(j.start,"MISSING_CHAR",`Missing , between ${c} items`),j.comment){let P="";e:for(const U of C)switch(U.type){case"comma":case"space":break;case"comment":P=U.source.substring(1);break e;default:break e}if(P){let U=d.items[d.items.length-1];yn(U)&&(U=U.value??U.key),U.comment?U.comment+=`
`+P:U.comment=P,j.comment=j.comment.substring(P.length+1)}}if(!o&&!B&&!j.found){const P=D?t(n,D,j,r):e(n,j.end,B,null,j,r);d.items.push(P),m=P.range[2],yx(D)&&r(P.range,"BLOCK_IN_FLOW",gx)}else{n.atKey=!0;const P=j.end,U=E?t(n,E,j,r):e(n,P,C,null,j,r);yx(E)&&r(U.range,"BLOCK_IN_FLOW",gx),n.atKey=!1;const X=ou(B??[],{flow:c,indicator:"map-value-ind",next:D,offset:U.range[2],onError:r,parentIndent:s.indent,startOnNewline:!1});if(X.found){if(!o&&!j.found&&n.options.strict){if(B)for(const F of B){if(F===X.found)break;if(F.type==="newline"){r(F,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}j.start<X.found.offset-1024&&r(X.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else D&&("source"in D&&D.source?.[0]===":"?r(D,"MISSING_CHAR",`Missing space after : in ${c}`):r(X.start,"MISSING_CHAR",`Missing , or : between ${c} items`));const $=D?t(n,D,X,r):X.found?e(n,X.end,B,null,X,r):null;$?yx(D)&&r($.range,"BLOCK_IN_FLOW",gx):X.comment&&(U.comment?U.comment+=`
`+X.comment:U.comment=X.comment);const Z=new ws(U,$);if(n.options.keepSourceTokens&&(Z.srcToken=k),o){const F=d;BD(n,F.items,U)&&r(P,"DUPLICATE_KEY","Map keys must be unique"),F.items.push(Z)}else{const F=new Tr(n.schema);F.flow=!0,F.items.push(Z);const W=($??U).range;F.range=[U.range[0],W[1],W[2]],d.items.push(F)}m=$?$.range[2]:X.end}}const v=o?"}":"]",[y,..._]=s.end;let w=m;if(y?.source===v)w=y.offset+y.source.length;else{const S=c[0].toUpperCase()+c.substring(1),k=g?`${S} must end with a ${v}`:`${S} in block collection must be sufficiently indented and end with a ${v}`;r(m,g?"MISSING_CHAR":"BAD_INDENT",k),y&&y.source.length!==1&&_.unshift(y)}if(_.length>0){const S=Wf(_,w,n.options.strict,r);S.comment&&(d.comment?d.comment+=`
`+S.comment:d.comment=S.comment),d.range=[s.offset,w,S.offset]}else d.range=[s.offset,w,w];return d}function vx(t,e,n,s,r,a){const o=n.type==="block-map"?fne(t,e,n,s,a):n.type==="block-seq"?pne(t,e,n,s,a):mne(t,e,n,s,a),c=o.constructor;return r==="!"||r===c.tagName?(o.tag=c.tagName,o):(r&&(o.tag=r),o)}function gne(t,e,n,s,r){const a=s.tag,o=a?e.directives.tagName(a.source,v=>r(a,"TAG_RESOLVE_FAILED",v)):null;if(n.type==="block-seq"){const{anchor:v,newlineAfterProp:y}=s,_=v&&a?v.offset>a.offset?v:a:v??a;_&&(!y||y.offset<_.offset)&&r(_,"MISSING_CHAR","Missing newline after block sequence props")}const c=n.type==="block-map"?"map":n.type==="block-seq"?"seq":n.start.source==="{"?"map":"seq";if(!a||!o||o==="!"||o===Tr.tagName&&c==="map"||o===bo.tagName&&c==="seq")return vx(t,e,n,r,o);let h=e.schema.tags.find(v=>v.tag===o&&v.collection===c);if(!h){const v=e.schema.knownTags[o];if(v?.collection===c)e.schema.tags.push(Object.assign({},v,{default:!1})),h=v;else return v?r(a,"BAD_COLLECTION_TYPE",`${v.tag} used for ${c} collection, but expects ${v.collection??"scalar"}`,!0):r(a,"TAG_RESOLVE_FAILED",`Unresolved tag: ${o}`,!0),vx(t,e,n,r,o)}const d=vx(t,e,n,r,o,h),g=h.resolve?.(d,v=>r(a,"TAG_RESOLVE_FAILED",v),e.options)??d,m=gn(g)?g:new ct(g);return m.range=d.range,m.tag=o,h?.format&&(m.format=h.format),m}function yne(t,e,n){const s=e.offset,r=vne(e,t.options.strict,n);if(!r)return{value:"",type:null,comment:"",range:[s,s,s]};const a=r.mode===">"?ct.BLOCK_FOLDED:ct.BLOCK_LITERAL,o=e.source?bne(e.source):[];let c=o.length;for(let w=o.length-1;w>=0;--w){const S=o[w][1];if(S===""||S==="\r")c=w;else break}if(c===0){const w=r.chomp==="+"&&o.length>0?`
`.repeat(Math.max(1,o.length-1)):"";let S=s+r.length;return e.source&&(S+=e.source.length),{value:w,type:a,comment:r.comment,range:[s,S,S]}}let h=e.indent+r.indent,d=e.offset+r.length,g=0;for(let w=0;w<c;++w){const[S,k]=o[w];if(k===""||k==="\r")r.indent===0&&S.length>h&&(h=S.length);else{S.length<h&&n(d+S.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),r.indent===0&&(h=S.length),g=w,h===0&&!t.atRoot&&n(d,"BAD_INDENT","Block scalar values in collections must be indented");break}d+=S.length+k.length+1}for(let w=o.length-1;w>=c;--w)o[w][0].length>h&&(c=w+1);let m="",v="",y=!1;for(let w=0;w<g;++w)m+=o[w][0].slice(h)+`
`;for(let w=g;w<c;++w){let[S,k]=o[w];d+=S.length+k.length+1;const C=k[k.length-1]==="\r";if(C&&(k=k.slice(0,-1)),k&&S.length<h){const B=`Block scalar lines must not be less indented than their ${r.indent?"explicit indentation indicator":"first line"}`;n(d-k.length-(C?2:1),"BAD_INDENT",B),S=""}a===ct.BLOCK_LITERAL?(m+=v+S.slice(h)+k,v=`
`):S.length>h||k[0]==="	"?(v===" "?v=`
`:!y&&v===`
`&&(v=`

`),m+=v+S.slice(h)+k,v=`
`,y=!0):k===""?v===`
`?m+=`
`:v=`
`:(m+=v+k,v=" ",y=!1)}switch(r.chomp){case"-":break;case"+":for(let w=c;w<o.length;++w)m+=`
`+o[w][0].slice(h);m[m.length-1]!==`
`&&(m+=`
`);break;default:m+=`
`}const _=s+r.length+e.source.length;return{value:m,type:a,comment:r.comment,range:[s,_,_]}}function vne({offset:t,props:e},n,s){if(e[0].type!=="block-scalar-header")return s(e[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:r}=e[0],a=r[0];let o=0,c="",h=-1;for(let v=1;v<r.length;++v){const y=r[v];if(!c&&(y==="-"||y==="+"))c=y;else{const _=Number(y);!o&&_?o=_:h===-1&&(h=t+v)}}h!==-1&&s(h,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${r}`);let d=!1,g="",m=r.length;for(let v=1;v<e.length;++v){const y=e[v];switch(y.type){case"space":d=!0;case"newline":m+=y.source.length;break;case"comment":n&&!d&&s(y,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),m+=y.source.length,g=y.source.substring(1);break;case"error":s(y,"UNEXPECTED_TOKEN",y.message),m+=y.source.length;break;default:{const _=`Unexpected token in block scalar header: ${y.type}`;s(y,"UNEXPECTED_TOKEN",_);const w=y.source;w&&typeof w=="string"&&(m+=w.length)}}}return{mode:a,indent:o,chomp:c,comment:g,length:m}}function bne(t){const e=t.split(/\n( *)/),n=e[0],s=n.match(/^( *)/),a=[s?.[1]?[s[1],n.slice(s[1].length)]:["",n]];for(let o=1;o<e.length;o+=2)a.push([e[o],e[o+1]]);return a}function xne(t,e,n){const{offset:s,type:r,source:a,end:o}=t;let c,h;const d=(v,y,_)=>n(s+v,y,_);switch(r){case"scalar":c=ct.PLAIN,h=_ne(a,d);break;case"single-quoted-scalar":c=ct.QUOTE_SINGLE,h=wne(a,d);break;case"double-quoted-scalar":c=ct.QUOTE_DOUBLE,h=Sne(a,d);break;default:return n(t,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${r}`),{value:"",type:null,comment:"",range:[s,s+a.length,s+a.length]}}const g=s+a.length,m=Wf(o,g,e,n);return{value:h,type:c,comment:m.comment,range:[s,g,m.offset]}}function _ne(t,e){let n="";switch(t[0]){case"	":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":{n=`block scalar indicator ${t[0]}`;break}case"@":case"`":{n=`reserved character ${t[0]}`;break}}return n&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`),MD(t)}function wne(t,e){return(t[t.length-1]!=="'"||t.length===1)&&e(t.length,"MISSING_CHAR","Missing closing 'quote"),MD(t.slice(1,-1)).replace(/''/g,"'")}function MD(t){let e,n;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),n=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let s=e.exec(t);if(!s)return t;let r=s[1],a=" ",o=e.lastIndex;for(n.lastIndex=o;s=n.exec(t);)s[1]===""?a===`
`?r+=a:a=`
`:(r+=a+s[1],a=" "),o=n.lastIndex;const c=/[ \t]*(.*)/sy;return c.lastIndex=o,s=c.exec(t),r+a+(s?.[1]??"")}function Sne(t,e){let n="";for(let s=1;s<t.length-1;++s){const r=t[s];if(!(r==="\r"&&t[s+1]===`
`))if(r===`
`){const{fold:a,offset:o}=kne(t,s);n+=a,s=o}else if(r==="\\"){let a=t[++s];const o=Cne[a];if(o)n+=o;else if(a===`
`)for(a=t[s+1];a===" "||a==="	";)a=t[++s+1];else if(a==="\r"&&t[s+1]===`
`)for(a=t[++s+1];a===" "||a==="	";)a=t[++s+1];else if(a==="x"||a==="u"||a==="U"){const c={x:2,u:4,U:8}[a];n+=Nne(t,s+1,c,e),s+=c}else{const c=t.substr(s-1,2);e(s-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${c}`),n+=c}}else if(r===" "||r==="	"){const a=s;let o=t[s+1];for(;o===" "||o==="	";)o=t[++s+1];o!==`
`&&!(o==="\r"&&t[s+2]===`
`)&&(n+=s>a?t.slice(a,s+1):r)}else n+=r}return(t[t.length-1]!=='"'||t.length===1)&&e(t.length,"MISSING_CHAR",'Missing closing "quote'),n}function kne(t,e){let n="",s=t[e+1];for(;(s===" "||s==="	"||s===`
`||s==="\r")&&!(s==="\r"&&t[e+2]!==`
`);)s===`
`&&(n+=`
`),e+=1,s=t[e+1];return n||(n=" "),{fold:n,offset:e}}const Cne={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"",_:"",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function Nne(t,e,n,s){const r=t.substr(e,n),o=r.length===n&&/^[0-9a-fA-F]+$/.test(r)?parseInt(r,16):NaN;if(isNaN(o)){const c=t.substr(e-2,n+2);return s(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${c}`),c}return String.fromCodePoint(o)}function DD(t,e,n,s){const{value:r,type:a,comment:o,range:c}=e.type==="block-scalar"?yne(t,e,s):xne(e,t.options.strict,s),h=n?t.directives.tagName(n.source,m=>s(n,"TAG_RESOLVE_FAILED",m)):null;let d;t.options.stringKeys&&t.atKey?d=t.schema[wi]:h?d=Ane(t.schema,r,h,n,s):e.type==="scalar"?d=Ene(t,r,e,s):d=t.schema[wi];let g;try{const m=d.resolve(r,v=>s(n??e,"TAG_RESOLVE_FAILED",v),t.options);g=Gt(m)?m:new ct(m)}catch(m){const v=m instanceof Error?m.message:String(m);s(n??e,"TAG_RESOLVE_FAILED",v),g=new ct(r)}return g.range=c,g.source=r,a&&(g.type=a),h&&(g.tag=h),d.format&&(g.format=d.format),o&&(g.comment=o),g}function Ane(t,e,n,s,r){if(n==="!")return t[wi];const a=[];for(const c of t.tags)if(!c.collection&&c.tag===n)if(c.default&&c.test)a.push(c);else return c;for(const c of a)if(c.test?.test(e))return c;const o=t.knownTags[n];return o&&!o.collection?(t.tags.push(Object.assign({},o,{default:!1,test:void 0})),o):(r(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,n!=="tag:yaml.org,2002:str"),t[wi])}function Ene({atKey:t,directives:e,schema:n},s,r,a){const o=n.tags.find(c=>(c.default===!0||t&&c.default==="key")&&c.test?.test(s))||n[wi];if(n.compat){const c=n.compat.find(h=>h.default&&h.test?.test(s))??n[wi];if(o.tag!==c.tag){const h=e.tagString(o.tag),d=e.tagString(c.tag),g=`Value may be parsed as either ${h} or ${d}`;a(r,"TAG_RESOLVE_FAILED",g,!0)}}return o}function jne(t,e,n){if(e){n??(n=e.length);for(let s=n-1;s>=0;--s){let r=e[s];switch(r.type){case"space":case"comment":case"newline":t-=r.source.length;continue}for(r=e[++s];r?.type==="space";)t+=r.source.length,r=e[++s];break}}return t}const Tne={composeNode:LD,composeEmptyNode:Sk};function LD(t,e,n,s){const r=t.atKey,{spaceBefore:a,comment:o,anchor:c,tag:h}=n;let d,g=!0;switch(e.type){case"alias":d=Rne(t,e,s),(c||h)&&s(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":d=DD(t,e,h,s),c&&(d.anchor=c.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":d=gne(Tne,t,e,n,s),c&&(d.anchor=c.source.substring(1));break;default:{const m=e.type==="error"?e.message:`Unsupported token (type: ${e.type})`;s(e,"UNEXPECTED_TOKEN",m),d=Sk(t,e.offset,void 0,null,n,s),g=!1}}return c&&d.anchor===""&&s(c,"BAD_ALIAS","Anchor cannot be an empty string"),r&&t.options.stringKeys&&(!Gt(d)||typeof d.value!="string"||d.tag&&d.tag!=="tag:yaml.org,2002:str")&&s(h??e,"NON_STRING_KEY","With stringKeys, all keys must be strings"),a&&(d.spaceBefore=!0),o&&(e.type==="scalar"&&e.source===""?d.comment=o:d.commentBefore=o),t.options.keepSourceTokens&&g&&(d.srcToken=e),d}function Sk(t,e,n,s,{spaceBefore:r,comment:a,anchor:o,tag:c,end:h},d){const g={type:"scalar",offset:jne(e,n,s),indent:-1,source:""},m=DD(t,g,c,d);return o&&(m.anchor=o.source.substring(1),m.anchor===""&&d(o,"BAD_ALIAS","Anchor cannot be an empty string")),r&&(m.spaceBefore=!0),a&&(m.comment=a,m.range[2]=h),m}function Rne({options:t},{offset:e,source:n,end:s},r){const a=new uk(n.substring(1));a.source===""&&r(e,"BAD_ALIAS","Alias cannot be an empty string"),a.source.endsWith(":")&&r(e+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const o=e+n.length,c=Wf(s,o,t.strict,r);return a.range=[e,o,c.offset],c.comment&&(a.comment=c.comment),a}function One(t,e,{offset:n,start:s,value:r,end:a},o){const c=Object.assign({_directives:e},t),h=new wk(void 0,c),d={atKey:!1,atRoot:!0,directives:h.directives,options:h.options,schema:h.schema},g=ou(s,{indicator:"doc-start",next:r??a?.[0],offset:n,onError:o,parentIndent:0,startOnNewline:!0});g.found&&(h.directives.docStart=!0,r&&(r.type==="block-map"||r.type==="block-seq")&&!g.hasNewline&&o(g.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),h.contents=r?LD(d,r,g,o):Sk(d,g.end,s,null,g,o);const m=h.contents.range[2],v=Wf(a,m,!1,o);return v.comment&&(h.comment=v.comment),h.range=[n,m,v.offset],h}function zh(t){if(typeof t=="number")return[t,t+1];if(Array.isArray(t))return t.length===2?t:[t[0],t[1]];const{offset:e,source:n}=t;return[e,e+(typeof n=="string"?n.length:1)]}function Qj(t){let e="",n=!1,s=!1;for(let r=0;r<t.length;++r){const a=t[r];switch(a[0]){case"#":e+=(e===""?"":s?`

`:`
`)+(a.substring(1)||" "),n=!0,s=!1;break;case"%":t[r+1]?.[0]!=="#"&&(r+=1),n=!1;break;default:n||(s=!0),n=!1}}return{comment:e,afterEmptyLine:s}}class Bne{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(n,s,r,a)=>{const o=zh(n);a?this.warnings.push(new dne(o,s,r)):this.errors.push(new wd(o,s,r))},this.directives=new vs({version:e.version||"1.2"}),this.options=e}decorate(e,n){const{comment:s,afterEmptyLine:r}=Qj(this.prelude);if(s){const a=e.contents;if(n)e.comment=e.comment?`${e.comment}
${s}`:s;else if(r||e.directives.docStart||!a)e.commentBefore=s;else if(mn(a)&&!a.flow&&a.items.length>0){let o=a.items[0];yn(o)&&(o=o.key);const c=o.commentBefore;o.commentBefore=c?`${s}
${c}`:s}else{const o=a.commentBefore;a.commentBefore=o?`${s}
${o}`:s}}n?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:Qj(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,n=!1,s=-1){for(const r of e)yield*this.next(r);yield*this.end(n,s)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,(n,s,r)=>{const a=zh(e);a[0]+=n,this.onError(a,"BAD_DIRECTIVE",s,r)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{const n=One(this.options,this.directives,e,this.onError);this.atDirectives&&!n.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(n,!1),this.doc&&(yield this.doc),this.doc=n,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const n=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,s=new wd(zh(e),"UNEXPECTED_TOKEN",n);this.atDirectives||!this.doc?this.errors.push(s):this.doc.errors.push(s);break}case"doc-end":{if(!this.doc){const s="Unexpected doc-end without preceding document";this.errors.push(new wd(zh(e),"UNEXPECTED_TOKEN",s));break}this.doc.directives.docEnd=!0;const n=Wf(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),n.comment){const s=this.doc.comment;this.doc.comment=s?`${s}
${n.comment}`:n.comment}this.doc.range[2]=n.offset;break}default:this.errors.push(new wd(zh(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,n=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){const s=Object.assign({_directives:this.directives},this.options),r=new wk(void 0,s);this.atDirectives&&this.onError(n,"MISSING_CHAR","Missing directives-end indicator line"),r.range=[0,n,n],this.decorate(r,!1),yield r}}}const ID="\uFEFF",PD="",zD="",iS="";function Mne(t){switch(t){case ID:return"byte-order-mark";case PD:return"doc-mode";case zD:return"flow-error-end";case iS:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}function Vr(t){switch(t){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}const Zj=new Set("0123456789ABCDEFabcdef"),Dne=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),Dm=new Set(",[]{}"),Lne=new Set(` ,[]{}
\r	`),bx=t=>!t||Lne.has(t);class Ine{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,n=!1){if(e){if(typeof e!="string")throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null}this.atEnd=!n;let s=this.next??"stream";for(;s&&(n||this.hasChars(1));)s=yield*this.parseNext(s)}atLineEnd(){let e=this.pos,n=this.buffer[e];for(;n===" "||n==="	";)n=this.buffer[++e];return!n||n==="#"||n===`
`?!0:n==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let n=this.buffer[e];if(this.indentNext>0){let s=0;for(;n===" ";)n=this.buffer[++s+e];if(n==="\r"){const r=this.buffer[s+e+1];if(r===`
`||!r&&!this.atEnd)return e+s+1}return n===`
`||s>=this.indentNext||!n&&!this.atEnd?e+s:-1}if(n==="-"||n==="."){const s=this.buffer.substr(e,3);if((s==="---"||s==="...")&&Vr(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===ID&&(yield*this.pushCount(1),e=e.substring(1)),e[0]==="%"){let n=e.length,s=e.indexOf("#");for(;s!==-1;){const a=e[s-1];if(a===" "||a==="	"){n=s-1;break}else s=e.indexOf("#",s+1)}for(;;){const a=e[n-1];if(a===" "||a==="	")n-=1;else break}const r=(yield*this.pushCount(n))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-r),this.pushNewline(),"stream"}if(this.atLineEnd()){const n=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-n),yield*this.pushNewline(),"stream"}return yield PD,yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const n=this.peek(3);if((n==="---"||n==="...")&&Vr(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,n==="---"?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!Vr(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[e,n]=this.peek(2);if(!n&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&Vr(n)){const s=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=s,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const e=this.getLine();if(e===null)return this.setNext("doc");let n=yield*this.pushIndicators();switch(e[n]){case"#":yield*this.pushCount(e.length-n);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(bx),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return n+=yield*this.parseBlockScalarHeader(),n+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-n),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,n,s=-1;do e=yield*this.pushNewline(),e>0?(n=yield*this.pushSpaces(!1),this.indentValue=s=n):n=0,n+=yield*this.pushSpaces(!0);while(e+n>0);const r=this.getLine();if(r===null)return this.setNext("flow");if((s!==-1&&s<this.indentNext&&r[0]!=="#"||s===0&&(r.startsWith("---")||r.startsWith("..."))&&Vr(r[3]))&&!(s===this.indentNext-1&&this.flowLevel===1&&(r[0]==="]"||r[0]==="}")))return this.flowLevel=0,yield zD,yield*this.parseLineStart();let a=0;for(;r[a]===",";)a+=yield*this.pushCount(1),a+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(a+=yield*this.pushIndicators(),r[a]){case void 0:return"flow";case"#":return yield*this.pushCount(r.length-a),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(bx),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const o=this.charAt(1);if(this.flowKey||Vr(o)||o===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let n=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;n!==-1&&this.buffer[n+1]==="'";)n=this.buffer.indexOf("'",n+2);else for(;n!==-1;){let a=0;for(;this.buffer[n-1-a]==="\\";)a+=1;if(a%2===0)break;n=this.buffer.indexOf('"',n+1)}const s=this.buffer.substring(0,n);let r=s.indexOf(`
`,this.pos);if(r!==-1){for(;r!==-1;){const a=this.continueScalar(r+1);if(a===-1)break;r=s.indexOf(`
`,a)}r!==-1&&(n=r-(s[r-1]==="\r"?2:1))}if(n===-1){if(!this.atEnd)return this.setNext("quoted-scalar");n=this.buffer.length}return yield*this.pushToIndex(n+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const n=this.buffer[++e];if(n==="+")this.blockScalarKeep=!0;else if(n>"0"&&n<="9")this.blockScalarIndent=Number(n)-1;else if(n!=="-")break}return yield*this.pushUntil(n=>Vr(n)||n==="#")}*parseBlockScalar(){let e=this.pos-1,n=0,s;e:for(let a=this.pos;s=this.buffer[a];++a)switch(s){case" ":n+=1;break;case`
`:e=a,n=0;break;case"\r":{const o=this.buffer[a+1];if(!o&&!this.atEnd)return this.setNext("block-scalar");if(o===`
`)break}default:break e}if(!s&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=n:this.indentNext=this.blockScalarIndent+(this.indentNext===0?1:this.indentNext);do{const a=this.continueScalar(e+1);if(a===-1)break;e=this.buffer.indexOf(`
`,a)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}let r=e+1;for(s=this.buffer[r];s===" ";)s=this.buffer[++r];if(s==="	"){for(;s==="	"||s===" "||s==="\r"||s===`
`;)s=this.buffer[++r];e=r-1}else if(!this.blockScalarKeep)do{let a=e-1,o=this.buffer[a];o==="\r"&&(o=this.buffer[--a]);const c=a;for(;o===" ";)o=this.buffer[--a];if(o===`
`&&a>=this.pos&&a+1+n>c)e=a;else break}while(!0);return yield iS,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let n=this.pos-1,s=this.pos-1,r;for(;r=this.buffer[++s];)if(r===":"){const a=this.buffer[s+1];if(Vr(a)||e&&Dm.has(a))break;n=s}else if(Vr(r)){let a=this.buffer[s+1];if(r==="\r"&&(a===`
`?(s+=1,r=`
`,a=this.buffer[s+1]):n=s),a==="#"||e&&Dm.has(a))break;if(r===`
`){const o=this.continueScalar(s+1);if(o===-1)break;s=Math.max(s,o-2)}}else{if(e&&Dm.has(r))break;n=s}return!r&&!this.atEnd?this.setNext("plain-scalar"):(yield iS,yield*this.pushToIndex(n+1,!0),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,n){const s=this.buffer.slice(this.pos,e);return s?(yield s,this.pos+=s.length,s.length):(n&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(bx))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const e=this.flowLevel>0,n=this.charAt(1);if(Vr(n)||e&&Dm.has(n))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,n=this.buffer[e];for(;!Vr(n)&&n!==">";)n=this.buffer[++e];return yield*this.pushToIndex(n===">"?e+1:e,!1)}else{let e=this.pos+1,n=this.buffer[e];for(;n;)if(Dne.has(n))n=this.buffer[++e];else if(n==="%"&&Zj.has(this.buffer[e+1])&&Zj.has(this.buffer[e+2]))n=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){const e=this.buffer[this.pos];return e===`
`?yield*this.pushCount(1):e==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(e){let n=this.pos-1,s;do s=this.buffer[++n];while(s===" "||e&&s==="	");const r=n-this.pos;return r>0&&(yield this.buffer.substr(this.pos,r),this.pos=n),r}*pushUntil(e){let n=this.pos,s=this.buffer[n];for(;!e(s);)s=this.buffer[++n];return yield*this.pushToIndex(n,!1)}}class Pne{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let n=0,s=this.lineStarts.length;for(;n<s;){const a=n+s>>1;this.lineStarts[a]<e?n=a+1:s=a}if(this.lineStarts[n]===e)return{line:n+1,col:1};if(n===0)return{line:0,col:e};const r=this.lineStarts[n-1];return{line:n,col:e-r+1}}}}function Ya(t,e){for(let n=0;n<t.length;++n)if(t[n].type===e)return!0;return!1}function eT(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function $D(t){switch(t?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function Lm(t){switch(t.type){case"document":return t.start;case"block-map":{const e=t.items[t.items.length-1];return e.sep??e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function Sc(t){if(t.length===0)return[];let e=t.length;e:for(;--e>=0;)switch(t[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;t[++e]?.type==="space";);return t.splice(e,t.length)}function tT(t){if(t.start.type==="flow-seq-start")for(const e of t.items)e.sep&&!e.value&&!Ya(e.start,"explicit-key-ind")&&!Ya(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,$D(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}class zne{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Ine,this.onNewLine=e}*parse(e,n=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(const s of this.lexer.lex(e,n))yield*this.next(s);n||(yield*this.end())}*next(e){if(this.source=e,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}const n=Mne(e);if(n)if(n==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=n,yield*this.step(),n){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{const s=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:s,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const e=this.peek(1);if(this.type==="doc-end"&&e?.type!=="doc-end"){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){const n=e??this.stack.pop();if(!n)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield n;else{const s=this.peek(1);switch(n.type==="block-scalar"?n.indent="indent"in s?s.indent:0:n.type==="flow-collection"&&s.type==="document"&&(n.indent=0),n.type==="flow-collection"&&tT(n),s.type){case"document":s.value=n;break;case"block-scalar":s.props.push(n);break;case"block-map":{const r=s.items[s.items.length-1];if(r.value){s.items.push({start:[],key:n,sep:[]}),this.onKeyLine=!0;return}else if(r.sep)r.value=n;else{Object.assign(r,{key:n,sep:[]}),this.onKeyLine=!r.explicitKey;return}break}case"block-seq":{const r=s.items[s.items.length-1];r.value?s.items.push({start:[],value:n}):r.value=n;break}case"flow-collection":{const r=s.items[s.items.length-1];!r||r.value?s.items.push({start:[],key:n,sep:[]}):r.sep?r.value=n:Object.assign(r,{key:n,sep:[]});return}default:yield*this.pop(),yield*this.pop(n)}if((s.type==="document"||s.type==="block-map"||s.type==="block-seq")&&(n.type==="block-map"||n.type==="block-seq")){const r=n.items[n.items.length-1];r&&!r.sep&&!r.value&&r.start.length>0&&eT(r.start)===-1&&(n.indent===0||r.start.every(a=>a.type!=="comment"||a.indent<n.indent))&&(s.type==="document"?s.end=r.start:s.items.push({start:r.start}),n.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{eT(e.start)!==-1?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}const n=this.startBlockValue(e);n?this.stack.push(n):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){const n=Lm(this.peek(2)),s=Sc(n);let r;e.end?(r=e.end,r.push(this.sourceToken),delete e.end):r=[this.sourceToken];const a={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:s,key:e,sep:r}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=a}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){const n=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,n.value){const s="end"in n.value?n.value.end:void 0;(Array.isArray(s)?s[s.length-1]:void 0)?.type==="comment"?s?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else if(n.sep)n.sep.push(this.sourceToken);else{if(this.atIndentedComment(n.start,e.indent)){const r=e.items[e.items.length-2]?.value?.end;if(Array.isArray(r)){Array.prototype.push.apply(r,n.start),r.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return}if(this.indent>=e.indent){const s=!this.onKeyLine&&this.indent===e.indent,r=s&&(n.sep||n.explicitKey)&&this.type!=="seq-item-ind";let a=[];if(r&&n.sep&&!n.value){const o=[];for(let c=0;c<n.sep.length;++c){const h=n.sep[c];switch(h.type){case"newline":o.push(c);break;case"space":break;case"comment":h.indent>e.indent&&(o.length=0);break;default:o.length=0}}o.length>=2&&(a=n.sep.splice(o[1]))}switch(this.type){case"anchor":case"tag":r||n.value?(a.push(this.sourceToken),e.items.push({start:a}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"explicit-key-ind":!n.sep&&!n.explicitKey?(n.start.push(this.sourceToken),n.explicitKey=!0):r||n.value?(a.push(this.sourceToken),e.items.push({start:a,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}),this.onKeyLine=!0;return;case"map-value-ind":if(n.explicitKey)if(n.sep)if(n.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(Ya(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:a,key:null,sep:[this.sourceToken]}]});else if($D(n.key)&&!Ya(n.sep,"newline")){const o=Sc(n.start),c=n.key,h=n.sep;h.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:c,sep:h}]})}else a.length>0?n.sep=n.sep.concat(a,this.sourceToken):n.sep.push(this.sourceToken);else if(Ya(n.start,"newline"))Object.assign(n,{key:null,sep:[this.sourceToken]});else{const o=Sc(n.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]})}else n.sep?n.value||r?e.items.push({start:a,key:null,sep:[this.sourceToken]}):Ya(n.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const o=this.flowScalar(this.type);r||n.value?(e.items.push({start:a,key:o,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(o):(Object.assign(n,{key:o,sep:[]}),this.onKeyLine=!0);return}default:{const o=this.startBlockValue(e);if(o){if(o.type==="block-seq"){if(!n.explicitKey&&n.sep&&!Ya(n.sep,"newline")){yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source});return}}else s&&e.items.push({start:a});this.stack.push(o);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){const n=e.items[e.items.length-1];switch(this.type){case"newline":if(n.value){const s="end"in n.value?n.value.end:void 0;(Array.isArray(s)?s[s.length-1]:void 0)?.type==="comment"?s?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(n.start,e.indent)){const r=e.items[e.items.length-2]?.value?.end;if(Array.isArray(r)){Array.prototype.push.apply(r,n.start),r.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return;case"anchor":case"tag":if(n.value||this.indent<=e.indent)break;n.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;n.value||Ya(n.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return}if(this.indent>e.indent){const s=this.startBlockValue(e);if(s){this.stack.push(s);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){const n=e.items[e.items.length-1];if(this.type==="flow-error-end"){let s;do yield*this.pop(),s=this.peek(1);while(s?.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!n||n.sep?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return;case"map-value-ind":!n||n.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!n||n.value?e.items.push({start:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const r=this.flowScalar(this.type);!n||n.value?e.items.push({start:[],key:r,sep:[]}):n.sep?this.stack.push(r):Object.assign(n,{key:r,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}const s=this.startBlockValue(e);s?this.stack.push(s):(yield*this.pop(),yield*this.step())}else{const s=this.peek(2);if(s.type==="block-map"&&(this.type==="map-value-ind"&&s.indent===e.indent||this.type==="newline"&&!s.items[s.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&s.type!=="flow-collection"){const r=Lm(s),a=Sc(r);tT(e);const o=e.end.splice(1,e.end.length);o.push(this.sourceToken);const c={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:a,key:e,sep:o}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=c}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const n=Lm(e),s=Sc(n);return s.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;const n=Lm(e),s=Sc(n);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,n){return this.type!=="comment"||this.indent<=n?!1:e.every(s=>s.type==="newline"||s.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}}function $ne(t){const e=t.prettyErrors!==!1;return{lineCounter:t.lineCounter||e&&new Pne||null,prettyErrors:e}}function Hne(t,e={}){const{lineCounter:n,prettyErrors:s}=$ne(e),r=new zne(n?.addNewLine),a=new Bne(e);let o=null;for(const c of a.compose(r.parse(t),!0,t.length))if(!o)o=c;else if(o.options.logLevel!=="silent"){o.errors.push(new wd(c.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return s&&n&&(o.errors.forEach(Xj(t,n)),o.warnings.forEach(Xj(t,n))),o}function xx(t,e,n){let s;const r=Hne(t,n);if(!r)return null;if(r.warnings.forEach(a=>dD(r.options.logLevel,a)),r.errors.length>0){if(r.options.logLevel!=="silent")throw r.errors[0];r.errors=[]}return r.toJS(Object.assign({reviver:s},n))}function nT(t,e,n){let s=null;if(typeof e=="function"||Array.isArray(e)?s=e:n===void 0&&e&&(n=e),typeof n=="string"&&(n=n.length),typeof n=="number"){const r=Math.round(n);n=r<1?void 0:r>8?{indent:8}:{indent:r}}if(t===void 0){const{keepUndefined:r}=n??e??{};if(!r)return}return Vf(t)&&!s?t.toString(n):new wk(t,s,n).toString(n)}function _x(){return document.documentElement.classList.contains("dark")||window.matchMedia("(prefers-color-scheme: dark)").matches}function Une({resource:t,loading:e,error:n,onSave:s,toolbarRef:r}){const[a,o]=K.useState(""),[c,h]=K.useState(""),[d,g]=K.useState(!1),[m,v]=K.useState(null),[y,_]=K.useState(!1),[w,S]=K.useState(null),[k,C]=K.useState(_x),E=K.useRef(null),B=K.useRef(null),[D,j]=K.useState(!1);K.useEffect(()=>{const F=new MutationObserver(()=>{C(_x())});F.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]});const W=window.matchMedia("(prefers-color-scheme: dark)"),Q=()=>C(_x());return W.addEventListener("change",Q),()=>{F.disconnect(),W.removeEventListener("change",Q)}},[]);const P=K.useCallback(async F=>{const W=F.getModel();if(!W)return j(!0);const Q=W.getValue().split(`
`),V=/^(\s*)(managedFields|ownerReferences|kubectl\.kubernetes\.io\/last-applied-configuration):/,M=Q.flatMap((G,q)=>{const z=G.match(V);if(!z)return[];const O=z[1].length,T=Q.slice(q+1).findIndex(N=>N.trimStart().length>0&&N.length-N.trimStart().length<=O),H=T===-1?Q.length:q+1+T;return H>q+1?[{start:q+1,end:H}]:[]});for(const{start:G,end:q}of M.reverse())F.setSelection({startLineNumber:G,startColumn:1,endLineNumber:q,endColumn:1}),await F.getAction("editor.fold")?.run();F.setPosition({lineNumber:1,column:1}),F.revealLine(1),j(!0)},[]);K.useEffect(()=>{if(t){const F=nT(t,{lineWidth:0});F!==c&&(d?h(F):(o(F),h(F),v(null),S(null),E.current&&(j(!1),setTimeout(()=>P(E.current),100))))}},[t,c,d,P]),K.useEffect(()=>{if(!a){v(null);return}try{xx(a),v(null)}catch(F){v(F instanceof Error?F.message:"Invalid YAML")}},[a]);const U=(F,W)=>{E.current=F,B.current=W,W.languages.registerDocumentFormattingEditProvider("yaml",{provideDocumentFormattingEdits:Q=>{try{const V=Q.getValue(),M=xx(V),G=nT(M,{lineWidth:0});return[{range:Q.getFullModelRange(),text:G}]}catch{return[]}}}),j(!1),setTimeout(()=>P(F),100)},X=F=>{const W=F||"";o(W),g(W!==c),S(null)},$=K.useCallback(()=>{o(c),g(!1),v(null),S(null)},[c]),Z=K.useCallback(async()=>{if(!(m||!d))try{_(!0),S(null);const F=xx(a);await s(F),h(a),g(!1)}catch(F){S(F instanceof Error?F.message:"Failed to save")}finally{_(!1)}},[m,d,a,s]);return e?f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsxs("div",{className:"flex items-center gap-2 text-neutral-600 dark:text-neutral-400 text-sm",children:[f.jsx(Xl,{size:14,className:"animate-spin"}),"Loading resource..."]})}):n?f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsx("div",{className:"text-sm text-red-600 dark:text-red-400",children:n})}):t?f.jsxs("div",{className:"flex flex-col h-full",children:[r&&f.jsxs(J2,{toolbarRef:r,children:[f.jsx("button",{onClick:Z,disabled:!d||!!m||y,className:"flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 hover:bg-neutral-200 dark:hover:bg-neutral-800 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Save changes",children:y?f.jsx(Xl,{size:12,className:"animate-spin"}):f.jsx(F7,{size:12})}),f.jsx("button",{onClick:$,disabled:!d||y,className:"flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-200 dark:hover:bg-neutral-800 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Reset changes",children:f.jsx(H7,{size:12})})]}),(m||w)&&f.jsx("div",{className:"shrink-0 flex items-center gap-2 px-4 py-2 bg-red-50 dark:bg-red-500/10 border-b border-red-200 dark:border-red-500/20",children:m?f.jsxs(f.Fragment,{children:[f.jsx(xo,{size:14,className:"text-red-500 shrink-0"}),f.jsxs("span",{className:"text-xs text-red-700 dark:text-red-400",children:["Invalid YAML: ",m]})]}):f.jsxs(f.Fragment,{children:[f.jsx(yS,{size:14,className:"text-red-500 shrink-0"}),f.jsx("span",{className:"text-xs text-red-700 dark:text-red-400",children:w})]})}),f.jsx("div",{className:`flex-1 min-h-0 transition-opacity duration-150 ${D?"opacity-100":"opacity-0"}`,children:f.jsx(Ote,{height:"100%",language:"yaml",theme:k?"vs-dark":"light",value:a,onChange:X,onMount:U,loading:f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsx(Xl,{size:20,className:"animate-spin text-neutral-400"})}),options:{minimap:{enabled:!1},fontSize:13,fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace',lineNumbers:"on",scrollBeyondLastLine:!1,wordWrap:"on",wrappingIndent:"indent",automaticLayout:!0,tabSize:2,insertSpaces:!0,renderWhitespace:"selection",bracketPairColorization:{enabled:!0},guides:{indentation:!0,bracketPairs:!0},padding:{top:12,bottom:12},scrollbar:{verticalScrollbarSize:10,horizontalScrollbarSize:10}}})})]}):f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"No resource loaded"})})}const Vne=new Set(["managedFields"]);function Fne(t){const e=t.metadata;if(!e)return t;const n=Object.fromEntries(Object.entries(e).filter(([s])=>!Vne.has(s)));return{...t,metadata:n}}function HD({isOpen:t,onClose:e,otherPanelOpen:n=!1,resource:s}){const{context:r}=hr(),[a,o]=K.useState(null),[c,h]=K.useState(!1),[d,g]=K.useState(null),[m,v]=K.useState([]),[y,_]=K.useState(!1),[w,S]=K.useState("yaml"),[k,C]=K.useState(null),[E,B]=K.useState(null),[D,j]=K.useState(null),P=K.useRef(null),U=K.useRef(null),X=5e3,$=K.useCallback(async()=>{if(!(!s||!s.name||!s.kind))try{const xe=await D5(r,s.kind,s.apiVersion);if(xe){const je=await Cx(r,xe,s.name,s.namespace);o(je)}const qe=await Nx(r,s.name,s.namespace);v(qe)}catch{}},[r,s]);K.useEffect(()=>{if(!t||!s?.name||!a)return;const xe=setInterval(()=>{$()},X);return()=>clearInterval(xe)},[t,s?.name,a,$]);const Z=a?nM(a):[],F=async xe=>{B(null),C(xe.id);try{await xe.execute(r,a),$()}catch(qe){B(qe instanceof Error?qe.message:"Action failed")}finally{C(null),j(null)}},W=xe=>{xe.confirm?j(xe):F(xe)},Q=K.useCallback(async xe=>{if(!s||!s.name||!P.current)throw new Error("Resource configuration not available");const qe=await yT(r,P.current,s.name,xe,s.namespace);o(qe)},[r,s]);if(K.useEffect(()=>{const xe=s?.kind||"";if(S(U3(xe)?"overview":"yaml"),!s||!s.name||!s.kind){o(null),g(null),v([]);return}const qe=s.name,je=s.namespace,Qe=s.apiVersion,nt=async()=>{h(!0),g(null);try{const Et=await D5(r,xe,Qe);if(!Et){g(`Unknown resource kind: ${xe}`),h(!1);return}P.current=Et;const qn=await Cx(r,Et,qe,je);o(qn)}catch(Et){g(Et instanceof Error?Et.message:"Failed to fetch resource"),o(null)}finally{h(!1)}},Lt=async()=>{_(!0);try{const Et=await Nx(r,qe,je);v(Et)}catch(Et){console.error("Failed to fetch events:",Et),v([])}finally{_(!1)}};nt(),Lt()},[r,s]),!t||!s||!s.name)return null;const V=a,M=V?Fne(V):null,G=s.name,q=s.kind||"Resource",z=U3(q),O=new Set(["pod-template-hash","controller-revision-hash","pod-template-generation"]),T=new Set(["kubectl.kubernetes.io/last-applied-configuration","deployment.kubernetes.io/revision","control-plane.alpha.kubernetes.io/leader","deprecated.daemonset.template.generation","kubernetes.io/description"]),H=M?.metadata,N=H?.labels,Y=H?.annotations,oe=N?Object.keys(N).filter(xe=>!O.has(xe)).length:0,ee=Y?Object.keys(Y).filter(xe=>!T.has(xe)).length:0,de=oe>0||ee>0,Se=["Pod","Deployment","DaemonSet","ReplicaSet","StatefulSet","Job"].includes(q)&&!!s.namespace,Fe=q==="Pod"&&!!s.namespace;return f.jsxs("aside",{className:"fixed top-0 h-screen bg-white border-l border-neutral-200 dark:bg-neutral-900 dark:border-neutral-800 flex flex-col z-20 shadow-xl transition-all duration-300",style:{right:n?"28rem":"0",width:n?"28rem":"40rem"},children:["      ",f.jsxs("header",{className:"shrink-0 h-16 flex items-center justify-between pl-5 pr-4 border-b border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900",children:[f.jsx("div",{className:"flex items-center gap-3 min-w-0",children:f.jsxs("div",{className:"min-w-0",children:[f.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-neutral-100 truncate",children:G}),f.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-500",children:s.namespace||"cluster-scoped"})]})}),f.jsx("button",{onClick:e,className:"p-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-400 dark:hover:text-neutral-200 dark:hover:bg-neutral-800 rounded-md transition-colors",title:"Close",children:f.jsx(yS,{size:18})})]}),f.jsxs("div",{className:"shrink-0 flex items-center border-b border-neutral-200 dark:border-neutral-800 bg-neutral-50 dark:bg-neutral-900/50",children:[f.jsxs("div",{className:"flex",children:[z&&f.jsx("button",{onClick:()=>S("overview"),className:`px-4 py-2.5 text-sm font-medium transition-colors ${w==="overview"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 -mb-px":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200"}`,children:"Overview"}),de&&f.jsx("button",{onClick:()=>S("metadata"),className:`px-4 py-2.5 text-sm font-medium transition-colors ${w==="metadata"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 -mb-px":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200"}`,children:"Metadata"}),f.jsx("button",{onClick:()=>S("yaml"),className:`px-4 py-2.5 text-sm font-medium transition-colors ${w==="yaml"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 -mb-px":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200"}`,children:"Manifest"}),m.length>0&&f.jsx("button",{onClick:()=>S("events"),className:`px-4 py-2.5 text-sm font-medium transition-colors ${w==="events"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 -mb-px":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200"}`,children:"Events"}),Se&&f.jsx("button",{onClick:()=>S("logs"),className:`px-4 py-2.5 text-sm font-medium transition-colors ${w==="logs"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 -mb-px":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200"}`,children:"Logs"}),Fe&&f.jsx("button",{onClick:()=>S("terminal"),className:`px-4 py-2.5 text-sm font-medium transition-colors ${w==="terminal"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 -mb-px":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200"}`,children:"Terminal"})]}),f.jsxs("div",{className:"ml-auto pr-4 flex items-center gap-1",children:[f.jsx("div",{ref:U,className:"flex items-center gap-1"}),w==="overview"&&Z.length>0&&f.jsx(f.Fragment,{children:Z.map(xe=>{const qe=xe.isDisabled?.(a),je=qe===!0||typeof qe=="string",Qe=typeof qe=="string"?qe:void 0,nt=k===xe.id;return f.jsx("button",{onClick:()=>W(xe),disabled:je||nt,title:Qe||xe.label,className:`
                      flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium rounded transition-colors
                      ${je||nt?"opacity-50 cursor-not-allowed":""}
                      ${xe.variant==="primary"?"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 hover:bg-neutral-200 dark:hover:bg-neutral-800":xe.variant==="warning"?"text-amber-600 dark:text-amber-400 hover:text-amber-700 dark:hover:text-amber-300 hover:bg-neutral-200 dark:hover:bg-neutral-800":xe.variant==="danger"?"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 hover:bg-neutral-200 dark:hover:bg-neutral-800":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-200 dark:hover:bg-neutral-800"}
                    `,children:nt?f.jsx(Mn,{size:12,className:"animate-spin"}):xe.icon},xe.id)})})]})]}),E&&f.jsx("div",{className:"shrink-0 mx-4 mt-2 p-2 bg-red-500/10 border border-red-500/30 rounded text-red-600 dark:text-red-400 text-xs",children:E}),D&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:f.jsxs("div",{className:"bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg p-4 max-w-md mx-4 shadow-xl",children:[f.jsx("h3",{className:"text-sm font-semibold text-neutral-900 dark:text-neutral-200 mb-2",children:D.confirm?.title}),f.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400 mb-4",children:D.confirm?.message}),f.jsxs("div",{className:"flex justify-end gap-2",children:[f.jsx("button",{onClick:()=>j(null),className:"px-3 py-1.5 text-xs font-medium text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded transition-colors",children:"Cancel"}),f.jsxs("button",{onClick:()=>F(D),disabled:k===D.id,className:`
                  px-3 py-1.5 text-xs font-medium text-white rounded transition-colors
                  ${D.variant==="danger"?"bg-red-600 hover:bg-red-700":D.variant==="warning"?"bg-amber-600 hover:bg-amber-700":"bg-blue-600 hover:bg-blue-700"}
                  ${k===D.id?"opacity-50 cursor-not-allowed":""}
                `,children:[k===D.id?f.jsx(Mn,{size:12,className:"animate-spin inline mr-1"}):null,D.confirm?.confirmLabel||"Confirm"]})]})]})}),w==="overview"&&z&&f.jsxs("div",{className:"flex-1 overflow-auto p-4",children:[c&&f.jsxs("div",{className:"flex items-center gap-2 text-neutral-600 dark:text-neutral-400 text-sm mb-4",children:[f.jsx(Xl,{size:14,className:"animate-spin"}),"Loading full resource..."]}),d&&f.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mb-4",children:d}),a&&!c&&f.jsx(CX,{resource:a,hideActions:!0})]}),w==="yaml"&&f.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:f.jsx(Une,{resource:a,loading:c,error:d,onSave:Q,toolbarRef:U})}),w==="metadata"&&f.jsx("div",{className:"flex-1 overflow-auto p-5",children:M&&f.jsx(mee,{metadata:M.metadata})}),w==="events"&&f.jsx("div",{className:"flex-1 overflow-auto p-5",children:f.jsx(xee,{events:m,loading:y})}),w==="logs"&&Se&&a&&f.jsx("div",{className:"flex-1 overflow-hidden",children:f.jsx(HX,{resource:a,toolbarRef:U})}),w==="terminal"&&Fe&&a&&f.jsx("div",{className:"flex-1 overflow-hidden",children:f.jsx(pee,{resource:a,toolbarRef:U})})]})}const wx="ai",$h="detail";function sT(t){return t.name.charAt(0).toUpperCase()+t.name.slice(1)}function qne(t){const e=He.c(74),{resource:n}=t,{namespace:s}=hr();let r;e[0]!==n?(r=()=>sT(n),e[0]=n,e[1]=r):r=e[1];const[a,o]=K.useState(r);let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=[],e[2]=c):c=e[2];const[h,d]=K.useState(c),[g,m]=K.useState(null),{hiddenColumns:v,toggleColumn:y}=LP(),{isOpen:_,open:w,close:S,toggle:k}=PP(),C=_(wx),E=_($h);let B,D;e[3]!==n?(B=()=>{o(sT(n))},D=[n],e[3]=n,e[4]=B,e[5]=D):(B=e[4],D=e[5]),K.useEffect(B,D);let j;e[6]!==S?(j=()=>{m(null),S($h)},e[6]=S,e[7]=j):j=e[7];let P;e[8]!==S||e[9]!==s||e[10]!==n?(P=[n,s,S],e[8]=S,e[9]=s,e[10]=n,e[11]=P):P=e[11],K.useEffect(j,P);let U;e[12]!==S||e[13]!==w?(U=nt=>{m(nt),nt?w($h):S($h)},e[12]=S,e[13]=w,e[14]=U):U=e[14];const X=U;let $;e[15]===Symbol.for("react.memo_cache_sentinel")?($=nt=>{d(nt)},e[15]=$):$=e[15];const Z=$,F=()=>{const nt=[E,C].filter(Boolean).length;return nt>=2?"pr-[56rem]":nt===1?"pr-[40rem]":""},W="flex-1 flex flex-col h-full min-w-0",Q=`shrink-0 h-14 flex items-center justify-between px-5 mt-2 transition-all duration-300 ${F()}`;let V;e[16]!==a?(V=f.jsx("h2",{className:"text-lg font-medium text-neutral-900 dark:text-neutral-100",children:a}),e[16]=a,e[17]=V):V=e[17];let M;e[18]!==s?(M=s&&f.jsx("span",{className:"px-2.5 py-0.5 rounded-md text-xs bg-neutral-200/80 text-neutral-500 dark:bg-neutral-800 dark:text-neutral-400",children:s}),e[18]=s,e[19]=M):M=e[19];let G;e[20]!==V||e[21]!==M?(G=f.jsxs("div",{className:"flex items-center gap-4",children:[V,M]}),e[20]=V,e[21]=M,e[22]=G):G=e[22];let q;e[23]===Symbol.for("react.memo_cache_sentinel")?(q=f.jsx("button",{onClick:Kne,className:"p-2 rounded-md text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 transition-colors",title:"Command Palette (K)",children:f.jsx(gS,{size:18})}),e[23]=q):q=e[23];let z;e[24]!==h||e[25]!==v||e[26]!==y?(z=f.jsx(qP,{columns:h,hiddenColumns:v,onToggleColumn:y}),e[24]=h,e[25]=v,e[26]=y,e[27]=z):z=e[27];let O;e[28]!==C||e[29]!==k?(O=Fd().ai&&f.jsx("button",{onClick:()=>k(wx),className:`p-2 rounded-md transition-colors ${C?"text-sky-400 hover:text-sky-300 hover:bg-neutral-100 dark:hover:bg-neutral-800":"text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800"}`,title:"AI Assistant",children:f.jsx(nP,{size:18})}),e[28]=C,e[29]=k,e[30]=O):O=e[30];let T;e[31]!==z||e[32]!==O?(T=f.jsxs("div",{className:"flex items-center gap-2",children:[q,z,O]}),e[31]=z,e[32]=O,e[33]=T):T=e[33];let H;e[34]!==Q||e[35]!==G||e[36]!==T?(H=f.jsxs("header",{className:Q,children:[G,T]}),e[34]=Q,e[35]=G,e[36]=T,e[37]=H):H=e[37];let N;e[38]!==Z||e[39]!==X||e[40]!==v||e[41]!==n||e[42]!==g?(N=f.jsx("section",{className:"flex-1 min-h-0 overflow-hidden",children:f.jsx(VP,{config:n,hiddenColumns:v,onColumnsLoaded:Z,selectedItem:g,onSelectItem:X})}),e[38]=Z,e[39]=X,e[40]=v,e[41]=n,e[42]=g,e[43]=N):N=e[43];let Y;e[44]!==H||e[45]!==N?(Y=f.jsxs("main",{className:W,children:[H,N]}),e[44]=H,e[45]=N,e[46]=Y):Y=e[46];let oe;e[47]!==S?(oe=()=>S(wx),e[47]=S,e[48]=oe):oe=e[48];const ee=g?.object.metadata.namespace||s||"all namespaces",de=n.group?`${n.kind} (${n.group}/${n.version})`:`${n.kind} (${n.version})`,we=g?.object.metadata.name;let Se;e[49]!==ee||e[50]!==de||e[51]!==we?(Se={currentNamespace:ee,selectedResourceKind:de,selectedResourceName:we},e[49]=ee,e[50]=de,e[51]=we,e[52]=Se):Se=e[52];let Fe;e[53]!==C||e[54]!==E||e[55]!==oe||e[56]!==Se?(Fe=f.jsx(Dq,{isOpen:C,onClose:oe,otherPanelOpen:E,environment:Se}),e[53]=C,e[54]=E,e[55]=oe,e[56]=Se,e[57]=Fe):Fe=e[57];let xe;e[58]!==S?(xe=()=>{m(null),S($h)},e[58]=S,e[59]=xe):xe=e[59];let qe;e[60]!==n.group||e[61]!==n.kind||e[62]!==n.version||e[63]!==g?(qe=g?{name:g.object.metadata.name,namespace:g.object.metadata.namespace,uid:g.object.metadata.uid,resourceVersion:g.object.metadata.resourceVersion,kind:n.kind,apiVersion:n.group?`${n.group}/${n.version}`:n.version}:null,e[60]=n.group,e[61]=n.kind,e[62]=n.version,e[63]=g,e[64]=qe):qe=e[64];let je;e[65]!==C||e[66]!==E||e[67]!==xe||e[68]!==qe?(je=f.jsx(HD,{isOpen:E,onClose:xe,otherPanelOpen:C,resource:qe}),e[65]=C,e[66]=E,e[67]=xe,e[68]=qe,e[69]=je):je=e[69];let Qe;return e[70]!==Y||e[71]!==Fe||e[72]!==je?(Qe=f.jsxs(f.Fragment,{children:[Y,Fe,je]}),e[70]=Y,e[71]=Fe,e[72]=je,e[73]=Qe):Qe=e[73],Qe}function Kne(){const t=new KeyboardEvent("keydown",{key:"k",metaKey:!0,ctrlKey:!0,bubbles:!0});document.dispatchEvent(t)}const cu={Pod:dl,Deployment:mS,DaemonSet:dS,StatefulSet:fl,Job:_g,CronJob:oa,Service:Q7,Ingress:Mr,Gateway:ns,HTTPRoute:Vd,GRPCRoute:Vd,NetworkPolicy:hu,PersistentVolume:Hs,PersistentVolumeClaim:oS,ConfigMap:bi,Secret:mf,Node:Xr},Wne={Pod:{bg:"#dcfce7",bgDark:"#14532d",border:"#22c55e",borderDark:"#4ade80",text:"#166534",textDark:"#86efac"},Deployment:{bg:"#dbeafe",bgDark:"#1e3a8a",border:"#3b82f6",borderDark:"#60a5fa",text:"#1e40af",textDark:"#93c5fd"},DaemonSet:{bg:"#f3e8ff",bgDark:"#581c87",border:"#a855f7",borderDark:"#c084fc",text:"#6b21a8",textDark:"#d8b4fe"},StatefulSet:{bg:"#ede9fe",bgDark:"#5b21b6",border:"#8b5cf6",borderDark:"#a78bfa",text:"#5b21b6",textDark:"#c4b5fd"},Job:{bg:"#fef3c7",bgDark:"#78350f",border:"#f59e0b",borderDark:"#fbbf24",text:"#92400e",textDark:"#fcd34d"},CronJob:{bg:"#ffedd5",bgDark:"#7c2d12",border:"#f97316",borderDark:"#fb923c",text:"#9a3412",textDark:"#fdba74"},Service:{bg:"#cffafe",bgDark:"#164e63",border:"#06b6d4",borderDark:"#22d3ee",text:"#155e75",textDark:"#67e8f9"},Ingress:{bg:"#ccfbf1",bgDark:"#134e4a",border:"#14b8a6",borderDark:"#2dd4bf",text:"#115e59",textDark:"#5eead4"},Gateway:{bg:"#d1fae5",bgDark:"#065f46",border:"#10b981",borderDark:"#34d399",text:"#065f46",textDark:"#6ee7b7"},HTTPRoute:{bg:"#a7f3d0",bgDark:"#047857",border:"#34d399",borderDark:"#6ee7b7",text:"#047857",textDark:"#a7f3d0"},GRPCRoute:{bg:"#a7f3d0",bgDark:"#047857",border:"#34d399",borderDark:"#6ee7b7",text:"#047857",textDark:"#a7f3d0"},NetworkPolicy:{bg:"#fef3c7",bgDark:"#78350f",border:"#f59e0b",borderDark:"#fbbf24",text:"#92400e",textDark:"#fcd34d"},PersistentVolume:{bg:"#f1f5f9",bgDark:"#334155",border:"#64748b",borderDark:"#94a3b8",text:"#334155",textDark:"#cbd5e1"},PersistentVolumeClaim:{bg:"#f8fafc",bgDark:"#475569",border:"#94a3b8",borderDark:"#cbd5e1",text:"#475569",textDark:"#e2e8f0"},ConfigMap:{bg:"#fef9c3",bgDark:"#713f12",border:"#eab308",borderDark:"#facc15",text:"#854d0e",textDark:"#fde047"},Secret:{bg:"#fee2e2",bgDark:"#7f1d1d",border:"#ef4444",borderDark:"#f87171",text:"#991b1b",textDark:"#fca5a5"}},Gne={bg:"#f3f4f6",bgDark:"#374151",border:"#9ca3af",borderDark:"#6b7280",text:"#374151",textDark:"#d1d5db"};function to(t,e){const n=Wne[t]||Gne;return{bg:e?n.bgDark:n.bg,border:e?n.borderDark:n.border,text:e?n.textDark:n.text}}function UD(t){let e="Unknown",n="#9ca3af",s="#6b7280";if(t.kind==="Pod"){const r=t.status?.phase||"Unknown";e=r,r==="Running"?(n="#22c55e",s="#4ade80"):r==="Pending"?(n="#eab308",s="#facc15"):r==="Failed"?(n="#ef4444",s="#f87171"):r==="Succeeded"&&(n="#22c55e",s="#4ade80")}else if(t.kind==="DaemonSet"){const r=t.status?.desiredNumberScheduled||0,a=t.status?.numberReady||0;e=`${a}/${r}`,a===r&&r>0?(n="#22c55e",s="#4ade80"):(n="#eab308",s="#facc15")}else if(["Deployment","StatefulSet"].includes(t.kind)){const r=t.status?.replicas||0,a=t.status?.readyReplicas||0;e=`${a}/${r}`,a===r&&r>0?(n="#22c55e",s="#4ade80"):(n="#eab308",s="#facc15")}else if(t.kind==="Service")e="Active",n="#22c55e",s="#4ade80";else if(t.kind==="Job"){const r=t.status?.succeeded||0,a=t.status?.failed||0;r>0?(e="Succeeded",n="#22c55e",s="#4ade80"):a>0?(e="Failed",n="#ef4444",s="#f87171"):(e="Running",n="#eab308",s="#facc15")}else t.kind==="PersistentVolumeClaim"?(e=t.status?.phase||"Unknown",e==="Bound"?(n="#22c55e",s="#4ade80"):(n="#eab308",s="#facc15")):["ConfigMap","Secret","Ingress","CronJob"].includes(t.kind)&&(e="Active",n="#22c55e",s="#4ade80");return{status:e,color:n,colorDark:s}}const Hh=160,Sx=60,rT=48,mg=120,Yl=32,o0=6,aS=32,zc=8,Qi=20,tl=4,Ud=5,Yne=32,Xne=10,Wa=12,iT=36,Im=20;function Jne(){const{context:t,namespace:e}=hr(),[n,s]=K.useState([]),[r,a]=K.useState([]),[o,c]=K.useState(!0),[h,d]=K.useState(null),[g,m]=K.useState({x:40,y:40,scale:1}),[v,y]=K.useState(!1),[_,w]=K.useState({x:0,y:0}),[S,k]=K.useState(null),[C,E]=K.useState(!1),B=K.useRef(null);K.useEffect(()=>{const q=()=>{const H=document.documentElement.classList.contains("dark"),N=window.matchMedia("(prefers-color-scheme: dark)");E(H||N.matches)};q();const z=new MutationObserver(q);z.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]});const O=window.matchMedia("(prefers-color-scheme: dark)"),T=()=>q();return O.addEventListener("change",T),()=>{z.disconnect(),O.removeEventListener("change",T)}},[]);const D=K.useCallback(async()=>{c(!0),d(null);try{const q=e?`/namespaces/${e}`:"",z=[{path:`/api/v1${q}/pods`,kind:"Pod"},{path:`/apis/apps/v1${q}/deployments`,kind:"Deployment"},{path:`/apis/apps/v1${q}/replicasets`,kind:"ReplicaSet"},{path:`/apis/apps/v1${q}/statefulsets`,kind:"StatefulSet"},{path:`/apis/apps/v1${q}/daemonsets`,kind:"DaemonSet"},{path:`/api/v1${q}/services`,kind:"Service"},{path:`/api/v1${q}/configmaps`,kind:"ConfigMap"},{path:`/api/v1${q}/secrets`,kind:"Secret"},{path:`/api/v1${q}/persistentvolumeclaims`,kind:"PersistentVolumeClaim"},{path:`/apis/batch/v1${q}/jobs`,kind:"Job"},{path:`/apis/batch/v1${q}/cronjobs`,kind:"CronJob"},{path:`/apis/networking.k8s.io/v1${q}/ingresses`,kind:"Ingress"},{path:`/apis/networking.k8s.io/v1${q}/networkpolicies`,kind:"NetworkPolicy"},{path:`/apis/gateway.networking.k8s.io/v1${q}/gateways`,kind:"Gateway"},{path:`/apis/gateway.networking.k8s.io/v1${q}/httproutes`,kind:"HTTPRoute"},{path:`/apis/gateway.networking.k8s.io/v1${q}/grpcroutes`,kind:"GRPCRoute"}],O=await Promise.allSettled(z.map(async({path:N,kind:Y})=>{try{return((await ca(N,t)).items||[]).map(ee=>({...ee,kind:Y}))}catch{return[]}})),T=[];O.forEach(N=>{N.status==="fulfilled"&&T.push(...N.value)}),a(T);const H=ose(T);s(H)}catch(q){d(q instanceof Error?q.message:"Failed to load resources")}finally{c(!1)}},[t,e]);K.useEffect(()=>{D()},[D]);const j=K.useCallback(q=>{q.button===0&&(y(!0),w({x:q.clientX-g.x,y:q.clientY-g.y}))},[g.x,g.y]),P=K.useCallback(q=>{v&&m(z=>({...z,x:q.clientX-_.x,y:q.clientY-_.y}))},[v,_]),U=K.useCallback(()=>{y(!1)},[]),X=K.useCallback(q=>{q.preventDefault();const z=q.deltaY>0?.9:1.1,O=Math.min(Math.max(g.scale*z,.1),3),T=B.current?.getBoundingClientRect();if(T){const H=q.clientX-T.left,N=q.clientY-T.top,Y=H-(H-g.x)*(O/g.scale),oe=N-(N-g.y)*(O/g.scale);m({x:Y,y:oe,scale:O})}},[g]),$=()=>m(q=>({...q,scale:Math.min(q.scale*1.2,3)})),Z=()=>m(q=>({...q,scale:Math.max(q.scale/1.2,.1)})),F=()=>{if(!B.current||n.length===0)return;const q=B.current.getBoundingClientRect(),z=Math.max(...n.map(Y=>Y.x+Y.width),800),O=Math.max(...n.map(Y=>Y.y+Y.height),600),T=(q.width-80)/z,H=(q.height-80)/O,N=Math.min(T,H,1);m({x:40,y:40,scale:N})},W=K.useMemo(()=>{if(n.length===0)return{width:800,height:600};const q=Math.max(...n.map(O=>O.x+O.width)),z=Math.max(...n.map(O=>O.y+O.height));return{width:q+100,height:z+100}},[n]);K.useEffect(()=>{if(n.length>0&&B.current){const q=B.current.getBoundingClientRect(),z=(q.width-80)/W.width,O=(q.height-80)/W.height,T=Math.min(z,O,1);m({x:40,y:40,scale:T})}},[n,W]),K.useEffect(()=>{k(null)},[e]);const Q=K.useCallback(q=>{k(q)},[]),V=K.useCallback((q,z,O)=>{const T=r.find(H=>H.kind===q&&H.metadata.name===z&&H.metadata.namespace===O);T&&k({uid:T.metadata.uid,resource:T,x:0,y:0,width:0,height:0})},[r]),M=S?{name:S.resource.metadata.name,namespace:S.resource.metadata.namespace,uid:S.resource.metadata.uid,kind:S.resource.kind,apiVersion:S.resource.apiVersion}:null,G=S!==null;return o?f.jsx("div",{className:"flex items-center justify-center h-full bg-white dark:bg-neutral-950",children:f.jsxs("div",{className:"flex items-center gap-2 text-neutral-500",children:[f.jsx(Mn,{className:"animate-spin",size:20}),f.jsx("span",{children:"Loading resources..."})]})}):h?f.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4 bg-white dark:bg-neutral-950",children:[f.jsx("div",{className:"text-red-500",children:h}),f.jsxs("button",{onClick:D,className:"flex items-center gap-2 px-4 py-2 text-sm bg-neutral-100 hover:bg-neutral-200 dark:bg-neutral-800 dark:hover:bg-neutral-700 rounded-md transition-colors",children:[f.jsx(Mn,{size:16}),"Retry"]})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:`h-full w-full relative bg-neutral-100 dark:bg-neutral-900 overflow-hidden transition-all duration-300 ${G?"mr-120":""}`,children:[f.jsxs("div",{className:"absolute top-4 right-4 z-10 flex items-center gap-1 bg-white dark:bg-neutral-800 rounded-lg shadow-sm border border-neutral-200 dark:border-neutral-700",children:[f.jsx("button",{onClick:D,className:"p-2 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-l-lg",title:"Refresh",children:f.jsx(Mn,{size:16,className:"text-neutral-600 dark:text-neutral-400"})}),f.jsx("div",{className:"w-px h-5 bg-neutral-200 dark:bg-neutral-700"}),f.jsx("button",{onClick:$,className:"p-2 hover:bg-neutral-100 dark:hover:bg-neutral-700",title:"Zoom In",children:f.jsx(pP,{size:16,className:"text-neutral-600 dark:text-neutral-400"})}),f.jsx("button",{onClick:Z,className:"p-2 hover:bg-neutral-100 dark:hover:bg-neutral-700",title:"Zoom Out",children:f.jsx(gP,{size:16,className:"text-neutral-600 dark:text-neutral-400"})}),f.jsx("button",{onClick:F,className:"p-2 hover:bg-neutral-100 dark:hover:bg-neutral-700",title:"Fit View",children:f.jsx(N7,{size:16,className:"text-neutral-600 dark:text-neutral-400"})}),f.jsxs("div",{className:"px-2 text-xs text-neutral-500 border-l border-neutral-200 dark:border-neutral-700 rounded-r-lg",children:[Math.round(g.scale*100),"%"]})]}),f.jsxs("div",{className:"absolute bottom-4 right-4 z-10 px-3 py-2 bg-white dark:bg-neutral-800 rounded-lg shadow-sm border border-neutral-200 dark:border-neutral-700",children:[f.jsx("div",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-400 mb-2",children:"Connections"}),f.jsxs("div",{className:"flex flex-col gap-1 text-xs",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{width:"24",height:"8",children:f.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#64748b",strokeWidth:"2"})}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Owner"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{width:"24",height:"8",children:f.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#8b5cf6",strokeWidth:"2",strokeDasharray:"4,2"})}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Selector"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{width:"24",height:"8",children:f.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#06b6d4",strokeWidth:"2",strokeDasharray:"4,2"})}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Service"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{width:"24",height:"8",children:f.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#14b8a6",strokeWidth:"2",strokeDasharray:"4,2"})}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Ingress"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{width:"24",height:"8",children:f.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#10b981",strokeWidth:"2",strokeDasharray:"4,2"})}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Gateway"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{width:"24",height:"8",children:f.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#f59e0b",strokeWidth:"1.5",strokeDasharray:"2,2"})}),f.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"NetworkPolicy"})]})]})]}),f.jsx("div",{ref:B,className:"w-full h-full cursor-grab active:cursor-grabbing overflow-hidden",onMouseDown:j,onMouseMove:P,onMouseUp:U,onMouseLeave:U,onWheel:X,children:f.jsxs("svg",{width:W.width,height:W.height,style:{transform:`translate(${g.x}px, ${g.y}px) scale(${g.scale})`,transformOrigin:"0 0"},children:[f.jsxs("defs",{children:[f.jsx("marker",{id:"arrow-owner",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#64748b"})}),f.jsx("marker",{id:"arrow-selector",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#8b5cf6"})}),f.jsx("marker",{id:"arrow-service",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#06b6d4"})}),f.jsx("marker",{id:"arrow-ingress",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#14b8a6"})}),f.jsx("marker",{id:"arrow-gateway",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#10b981"})}),f.jsx("marker",{id:"arrow-network-policy",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"5",markerHeight:"5",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#f59e0b"})}),f.jsx("marker",{id:"arrow-owner-dark",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#94a3b8"})}),f.jsx("marker",{id:"arrow-selector-dark",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#c084fc"})}),f.jsx("marker",{id:"arrow-service-dark",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#22d3ee"})}),f.jsx("marker",{id:"arrow-ingress-dark",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#2dd4bf"})}),f.jsx("marker",{id:"arrow-gateway-dark",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#34d399"})}),f.jsx("marker",{id:"arrow-network-policy-dark",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"5",markerHeight:"5",orient:"auto-start-reverse",children:f.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#fbbf24"})})]}),n.map(q=>f.jsx(Qne,{application:q,onNodeClick:Q,onConfigClick:V,isDarkMode:C},q.id))]})})]}),f.jsx(HD,{isOpen:G,onClose:()=>k(null),resource:M})]})}function Qne(t){const e=He.c(40),{application:n,onNodeClick:s,onConfigClick:r,isDarkMode:a}=t;let o;e[0]!==n.nodes?(o=new Map(n.nodes.map(Zne)),n.nodes.forEach(C=>{C.childPods&&C.childPods.forEach(E=>{o.set(E.uid,{...E,x:C.x+E.x,y:C.y+E.y})})}),e[0]=n.nodes,e[1]=o):o=e[1];const c=o;let h;e[2]!==n.nodes?(h=n.nodes.filter(C=>!C.resource.kind.match(/^Pod$/)||!n.nodes.some(E=>["Deployment","StatefulSet","DaemonSet","Job"].includes(E.resource.kind)&&E.childPods?.some(B=>B.uid===C.uid))),e[2]=n.nodes,e[3]=h):h=e[3];const d=h,g=n.name&&n.name.length>0,m=a?"#262626":"white",v=a?"#404040":"#e5e7eb";let y;e[4]!==n.height||e[5]!==n.width||e[6]!==n.x||e[7]!==n.y||e[8]!==m||e[9]!==v?(y=f.jsx("rect",{x:n.x,y:n.y,width:n.width,height:n.height,rx:12,fill:m,stroke:v,strokeWidth:1}),e[4]=n.height,e[5]=n.width,e[6]=n.x,e[7]=n.y,e[8]=m,e[9]=v,e[10]=y):y=e[10];let _;e[11]!==n.name||e[12]!==n.namespace||e[13]!==n.width||e[14]!==n.x||e[15]!==n.y||e[16]!==a||e[17]!==g?(_=g&&f.jsxs("g",{children:[f.jsx("text",{x:n.x+10,y:n.y+13,fontSize:12,fontWeight:600,fill:a?"#e5e5e5":"#374151",dominantBaseline:"hanging",children:n.name.length>Math.floor((n.width-20)/7)?n.name.slice(0,Math.floor((n.width-20)/7)-1)+"":n.name}),n.namespace&&f.jsx("text",{x:n.x+10,y:n.y+26,fontSize:10,fill:a?"#a3a3a3":"#6b7280",dominantBaseline:"hanging",children:n.namespace.length>Math.floor((n.width-20)/6)?n.namespace.slice(0,Math.floor((n.width-20)/6)-1)+"":n.namespace})]}),e[11]=n.name,e[12]=n.namespace,e[13]=n.width,e[14]=n.x,e[15]=n.y,e[16]=a,e[17]=g,e[18]=_):_=e[18];let w;if(e[19]!==n.edges||e[20]!==a||e[21]!==c){let C;e[23]!==a||e[24]!==c?(C=(E,B)=>{const D=c.get(E.from),j=c.get(E.to);return!D||!j||E.type==="owner"&&(D.childPods?.some(U=>U.uid===j.uid)||j.childPods?.some(U=>U.uid===D.uid))?null:f.jsx(ese,{from:D,to:j,type:E.type,isDarkMode:a},B)},e[23]=a,e[24]=c,e[25]=C):C=e[25],w=n.edges.map(C),e[19]=n.edges,e[20]=a,e[21]=c,e[22]=w}else w=e[22];let S;if(e[26]!==a||e[27]!==r||e[28]!==s||e[29]!==d){let C;e[31]!==a||e[32]!==r||e[33]!==s?(C=E=>f.jsx(tse,{node:E,onClick:()=>s(E),onPodClick:s,onConfigClick:r,isDarkMode:a},E.uid),e[31]=a,e[32]=r,e[33]=s,e[34]=C):C=e[34],S=d.map(C),e[26]=a,e[27]=r,e[28]=s,e[29]=d,e[30]=S}else S=e[30];let k;return e[35]!==y||e[36]!==_||e[37]!==w||e[38]!==S?(k=f.jsxs("g",{children:[y,_,w,S]}),e[35]=y,e[36]=_,e[37]=w,e[38]=S,e[39]=k):k=e[39],k}function Zne(t){return[t.uid,t]}function ese(t){const e=He.c(14),{from:n,to:s,type:r,isDarkMode:a}=t,o=n.x+n.width,c=n.y+n.height/2,h=s.x,d=s.y+s.height/2,g=(o+h)/2,m=`M ${o} ${c} C ${g} ${c}, ${g} ${d}, ${h} ${d}`,v=a?"#94a3b8":"#64748b",y=a?"#c084fc":"#8b5cf6",_=a?"#22d3ee":"#06b6d4",w=a?"#2dd4bf":"#14b8a6",S=a?"#34d399":"#10b981",k=a?"#fbbf24":"#f59e0b";let C;e[0]!==v||e[1]!==y||e[2]!==_||e[3]!==w||e[4]!==S||e[5]!==k?(C={owner:v,selector:y,service:_,ingress:w,gateway:S,"network-policy":k},e[0]=v,e[1]=y,e[2]=_,e[3]=w,e[4]=S,e[5]=k,e[6]=C):C=e[6];const E=C;let B;e[7]===Symbol.for("react.memo_cache_sentinel")?(B={owner:void 0,selector:"6,3",service:"6,3",ingress:"4,2",gateway:"4,2","network-policy":"2,2"},e[7]=B):B=e[7];const D=B,j=E[r],P=r==="network-policy"?1.5:2,U=D[r],X=`url(#arrow-${r}${a?"-dark":""})`;let $;return e[8]!==m||e[9]!==P||e[10]!==U||e[11]!==X||e[12]!==j?($=f.jsx("path",{d:m,fill:"none",stroke:j,strokeWidth:P,strokeDasharray:U,markerEnd:X}),e[8]=m,e[9]=P,e[10]=U,e[11]=X,e[12]=j,e[13]=$):$=e[13],$}function tse(t){const e=He.c(62),{node:n,onClick:s,onPodClick:r,onConfigClick:a,isDarkMode:o}=t,{resource:c,x:h,y:d,width:g,height:m}=n;if(c.kind==="NetworkPolicy"){let z;return e[0]!==o||e[1]!==n||e[2]!==s?(z=f.jsx(ise,{node:n,onClick:s,isDarkMode:o}),e[0]=o,e[1]=n,e[2]=s,e[3]=z):z=e[3],z}if(c.kind==="Service"){let z;return e[4]!==o||e[5]!==n||e[6]!==s?(z=f.jsx(aT,{node:n,onClick:s,isDarkMode:o}),e[4]=o,e[5]=n,e[6]=s,e[7]=z):z=e[7],z}if(["Gateway","HTTPRoute","GRPCRoute"].includes(c.kind)){let z;return e[8]!==o||e[9]!==n||e[10]!==s?(z=f.jsx(aT,{node:n,onClick:s,isDarkMode:o}),e[8]=o,e[9]=n,e[10]=s,e[11]=z):z=e[11],z}if(c.kind==="Ingress"){let z;return e[12]!==o||e[13]!==n||e[14]!==s?(z=f.jsx(sse,{node:n,onClick:s,isDarkMode:o}),e[12]=o,e[13]=n,e[14]=s,e[15]=z):z=e[15],z}if(["Deployment","StatefulSet","DaemonSet","Job"].includes(c.kind)&&n.childPods&&n.childPods.length>0){let z;return e[16]!==o||e[17]!==n||e[18]!==s||e[19]!==a||e[20]!==r?(z=f.jsx(nse,{node:n,onClick:s,onPodClick:r,onConfigClick:a,isDarkMode:o}),e[16]=o,e[17]=n,e[18]=s,e[19]=a,e[20]=r,e[21]=z):z=e[21],z}let v;e[22]!==o||e[23]!==c.kind?(v=to(c.kind,o),e[22]=o,e[23]=c.kind,e[24]=v):v=e[24];const y=v,_=cu[c.kind]||bg;let w;e[25]!==c?(w=UD(c),e[25]=c,e[26]=w):w=e[26];const S=w,k=o?S.colorDark:S.color,C=Math.floor((g-20)/6.5),E=c.metadata.name.length>C?c.metadata.name.slice(0,C-2)+"":c.metadata.name,B=`translate(${h}, ${d})`;let D;e[27]!==s?(D=z=>{z.stopPropagation(),s()},e[27]=s,e[28]=D):D=e[28];let j;e[29]===Symbol.for("react.memo_cache_sentinel")?(j={cursor:"pointer"},e[29]=j):j=e[29];let P;e[30]!==y.bg||e[31]!==y.border||e[32]!==m||e[33]!==g?(P=f.jsx("rect",{width:g,height:m,rx:8,fill:y.bg,stroke:y.border,strokeWidth:2}),e[30]=y.bg,e[31]=y.border,e[32]=m,e[33]=g,e[34]=P):P=e[34];let U;e[35]!==y.text?(U={color:y.text},e[35]=y.text,e[36]=U):U=e[36];let X;e[37]!==_?(X=f.jsx(_,{size:16}),e[37]=_,e[38]=X):X=e[38];let $;e[39]!==U||e[40]!==X?($=f.jsx("foreignObject",{width:18,height:18,children:f.jsx("div",{style:U,children:X})}),e[39]=U,e[40]=X,e[41]=$):$=e[41];let Z;e[42]!==y.text||e[43]!==c.kind?(Z=f.jsx("text",{x:22,y:13,fontSize:11,fill:y.text,fontWeight:600,children:c.kind}),e[42]=y.text,e[43]=c.kind,e[44]=Z):Z=e[44];let F;e[45]!==Z||e[46]!==$?(F=f.jsxs("g",{transform:"translate(10, 10)",children:[$,Z]}),e[45]=Z,e[46]=$,e[47]=F):F=e[47];const W=g-12;let Q;e[48]!==k||e[49]!==W?(Q=f.jsx("circle",{cx:W,cy:14,r:5,fill:k}),e[48]=k,e[49]=W,e[50]=Q):Q=e[50];const V=m-12,M=o?"#e5e7eb":"#1f2937";let G;e[51]!==E||e[52]!==V||e[53]!==M?(G=f.jsx("text",{x:10,y:V,fontSize:12,fontWeight:600,fill:M,children:E}),e[51]=E,e[52]=V,e[53]=M,e[54]=G):G=e[54];let q;return e[55]!==F||e[56]!==Q||e[57]!==G||e[58]!==B||e[59]!==D||e[60]!==P?(q=f.jsxs("g",{transform:B,onClick:D,style:j,className:"hover:opacity-80 transition-opacity",children:[P,F,Q,G]}),e[55]=F,e[56]=Q,e[57]=G,e[58]=B,e[59]=D,e[60]=P,e[61]=q):q=e[61],q}function aT(t){const e=He.c(26),{node:n,onClick:s,isDarkMode:r}=t,{resource:a,x:o,y:c,width:h,height:d}=n;let g;e[0]!==r||e[1]!==a.kind?(g=to(a.kind,r),e[0]=r,e[1]=a.kind,e[2]=g):g=e[2];const m=g,v=cu[a.kind]||bg,y=`translate(${o}, ${c})`;let _;e[3]!==s?(_=P=>{P.stopPropagation(),s()},e[3]=s,e[4]=_):_=e[4];let w;e[5]===Symbol.for("react.memo_cache_sentinel")?(w={cursor:"pointer"},e[5]=w):w=e[5];let S;e[6]!==m.bg||e[7]!==m.border||e[8]!==d||e[9]!==h?(S=f.jsx("rect",{width:h,height:d,rx:8,fill:m.bg,stroke:m.border,strokeWidth:2}),e[6]=m.bg,e[7]=m.border,e[8]=d,e[9]=h,e[10]=S):S=e[10];const k=`translate(${h/2-12}, ${d/2-12})`;let C;e[11]!==m.text?(C={color:m.text},e[11]=m.text,e[12]=C):C=e[12];let E;e[13]!==v?(E=f.jsx(v,{size:22}),e[13]=v,e[14]=E):E=e[14];let B;e[15]!==C||e[16]!==E?(B=f.jsx("foreignObject",{width:24,height:24,children:f.jsx("div",{style:C,children:E})}),e[15]=C,e[16]=E,e[17]=B):B=e[17];let D;e[18]!==k||e[19]!==B?(D=f.jsx("g",{transform:k,children:B}),e[18]=k,e[19]=B,e[20]=D):D=e[20];let j;return e[21]!==D||e[22]!==y||e[23]!==_||e[24]!==S?(j=f.jsxs("g",{transform:y,onClick:_,style:w,className:"hover:opacity-80 transition-opacity",children:[S,D]}),e[21]=D,e[22]=y,e[23]=_,e[24]=S,e[25]=j):j=e[25],j}function nse(t){const e=He.c(54),{node:n,onClick:s,onPodClick:r,onConfigClick:a,isDarkMode:o}=t,{resource:c,x:h,y:d,width:g,height:m,childPods:v}=n;let y;e[0]!==v?(y=v===void 0?[]:v,e[0]=v,e[1]=y):y=e[1];const _=y;let w;e[2]!==o||e[3]!==c.kind?(w=to(c.kind,o),e[2]=o,e[3]=c.kind,e[4]=w):w=e[4];const S=w,k=cu[c.kind]||bg,C=Math.floor((g-60)/6),E=c.metadata.name.length>C?c.metadata.name.slice(0,C-2)+"":c.metadata.name;let B;e[5]!==n?(B=n.configIcons||[],e[5]=n,e[6]=B):B=e[6];const D=B,j=`translate(${h}, ${d})`;let P;e[7]!==s?(P=T=>{T.stopPropagation(),s()},e[7]=s,e[8]=P):P=e[8];let U;e[9]===Symbol.for("react.memo_cache_sentinel")?(U={cursor:"pointer"},e[9]=U):U=e[9];let X;e[10]!==S.bg||e[11]!==S.border||e[12]!==m||e[13]!==P||e[14]!==g?(X=f.jsx("rect",{width:g,height:m,rx:10,fill:S.bg,stroke:S.border,strokeWidth:2,onClick:P,style:U,className:"hover:opacity-90"}),e[10]=S.bg,e[11]=S.border,e[12]=m,e[13]=P,e[14]=g,e[15]=X):X=e[15];let $;e[16]!==s?($=T=>{T.stopPropagation(),s()},e[16]=s,e[17]=$):$=e[17];let Z;e[18]===Symbol.for("react.memo_cache_sentinel")?(Z={cursor:"pointer"},e[18]=Z):Z=e[18];let F;e[19]!==S.text?(F={color:S.text},e[19]=S.text,e[20]=F):F=e[20];let W;e[21]!==k?(W=f.jsx(k,{size:16}),e[21]=k,e[22]=W):W=e[22];let Q;e[23]!==F||e[24]!==W?(Q=f.jsx("foreignObject",{width:18,height:18,children:f.jsx("div",{style:F,children:W})}),e[23]=F,e[24]=W,e[25]=Q):Q=e[25];let V;e[26]!==S.text||e[27]!==E?(V=f.jsx("text",{x:22,y:13,fontSize:11,fill:S.text,fontWeight:600,children:E}),e[26]=S.text,e[27]=E,e[28]=V):V=e[28];let M;e[29]!==Q||e[30]!==V?(M=f.jsxs("g",{transform:"translate(8, 8)",children:[Q,V]}),e[29]=Q,e[30]=V,e[31]=M):M=e[31];let G;e[32]!==M||e[33]!==$?(G=f.jsx("g",{onClick:$,style:Z,children:M}),e[32]=M,e[33]=$,e[34]=G):G=e[34];let q;if(e[35]!==_||e[36]!==o||e[37]!==r){let T;e[39]!==o||e[40]!==r?(T=(H,N)=>{const Y=to("Pod",o),oe=UD(H.resource),ee=o?oe.colorDark:oe.color,de=aS+N*(Yl+o0),we=Math.floor((mg-30)/5.5),Se=H.resource.metadata.name.length>we?H.resource.metadata.name.slice(0,we-2)+"":H.resource.metadata.name;return f.jsxs("g",{transform:`translate(${zc}, ${de})`,onClick:Fe=>{Fe.stopPropagation(),r?.(H)},style:{cursor:"pointer"},className:"hover:opacity-80",children:[f.jsx("rect",{width:mg,height:Yl,rx:4,fill:Y.bg,stroke:Y.border,strokeWidth:1.5}),f.jsx("circle",{cx:12,cy:Yl/2,r:4,fill:ee}),f.jsx("text",{x:22,y:Yl/2+4,fontSize:10,fill:o?"#e5e7eb":"#1f2937",fontWeight:500,children:Se})]},H.uid)},e[39]=o,e[40]=r,e[41]=T):T=e[41],q=_.map(T),e[35]=_,e[36]=o,e[37]=r,e[38]=q}else q=e[38];let z;e[42]!==D||e[43]!==m||e[44]!==o||e[45]!==a||e[46]!==c.metadata.namespace?(z=D.length>0&&f.jsx("g",{transform:`translate(${zc}, ${m-Math.ceil(D.length/Ud)*(Qi+tl)-tl})`,children:D.map((T,H)=>{const N=cu[T.kind],Y=to(T.kind,o),oe=Math.floor(H/Ud),de=H%Ud*(Qi+tl),we=oe*(Qi+tl);return f.jsxs("g",{transform:`translate(${de}, ${we})`,onClick:Se=>{Se.stopPropagation(),a&&a(T.kind,T.name,c.metadata.namespace)},style:{cursor:"pointer"},className:"hover:opacity-80",children:[f.jsx("title",{children:T.name}),f.jsx("rect",{width:Qi,height:Qi,rx:3,fill:Y.bg,stroke:Y.border,strokeWidth:1}),f.jsx("g",{transform:`translate(${Qi/2-6}, ${Qi/2-6})`,children:f.jsx("foreignObject",{width:12,height:12,children:f.jsx("div",{style:{color:Y.text},children:f.jsx(N,{size:12})})})})]},`${T.kind}-${T.name}-${H}`)})}),e[42]=D,e[43]=m,e[44]=o,e[45]=a,e[46]=c.metadata.namespace,e[47]=z):z=e[47];let O;return e[48]!==G||e[49]!==q||e[50]!==z||e[51]!==j||e[52]!==X?(O=f.jsxs("g",{transform:j,children:[X,G,q,z]}),e[48]=G,e[49]=q,e[50]=z,e[51]=j,e[52]=X,e[53]=O):O=e[53],O}function sse(t){const e=He.c(52),{node:n,onClick:s,isDarkMode:r}=t,{resource:a,x:o,y:c,width:h,height:d}=n;let g;e[0]!==r?(g=to("Ingress",r),e[0]=r,e[1]=g):g=e[1];const m=g,v=cu.Ingress,y=a.spec;let _,w,S,k,C,E,B,D;if(e[2]!==m.bg||e[3]!==m.border||e[4]!==m.text||e[5]!==d||e[6]!==r||e[7]!==s||e[8]!==a.metadata.name||e[9]!==y.rules||e[10]!==h||e[11]!==o||e[12]!==c){const $=y.rules?.map(rse).filter(Boolean)||[],Z=Math.floor((h-20)/6.5);_=a.metadata.name.length>Z?a.metadata.name.slice(0,Z-2)+"":a.metadata.name,w=`translate(${o}, ${c})`,e[21]!==s?(S=M=>{M.stopPropagation(),s()},e[21]=s,e[22]=S):S=e[22],e[23]===Symbol.for("react.memo_cache_sentinel")?(k={cursor:"pointer"},e[23]=k):k=e[23],C="hover:opacity-80 transition-opacity",e[24]!==m.bg||e[25]!==m.border||e[26]!==d||e[27]!==h?(E=f.jsx("rect",{width:h,height:d,rx:8,fill:m.bg,stroke:m.border,strokeWidth:2}),e[24]=m.bg,e[25]=m.border,e[26]=d,e[27]=h,e[28]=E):E=e[28];let F;e[29]!==m.text?(F={color:m.text},e[29]=m.text,e[30]=F):F=e[30];let W;e[31]===Symbol.for("react.memo_cache_sentinel")?(W=f.jsx(v,{size:16}),e[31]=W):W=e[31];let Q;e[32]!==F?(Q=f.jsx("foreignObject",{width:18,height:18,children:f.jsx("div",{style:F,children:W})}),e[32]=F,e[33]=Q):Q=e[33];let V;e[34]!==m.text?(V=f.jsx("text",{x:22,y:13,fontSize:11,fill:m.text,fontWeight:600,children:"Ingress"}),e[34]=m.text,e[35]=V):V=e[35],e[36]!==Q||e[37]!==V?(B=f.jsxs("g",{transform:"translate(10, 10)",children:[Q,V]}),e[36]=Q,e[37]=V,e[38]=B):B=e[38],D=$.length>0&&$[0]&&f.jsx("text",{x:h-10,y:18,fontSize:9,fill:r?"#5eead4":"#115e59",textAnchor:"end",children:$[0].length>18?$[0].slice(0,16)+"":$[0]}),e[2]=m.bg,e[3]=m.border,e[4]=m.text,e[5]=d,e[6]=r,e[7]=s,e[8]=a.metadata.name,e[9]=y.rules,e[10]=h,e[11]=o,e[12]=c,e[13]=_,e[14]=w,e[15]=S,e[16]=k,e[17]=C,e[18]=E,e[19]=B,e[20]=D}else _=e[13],w=e[14],S=e[15],k=e[16],C=e[17],E=e[18],B=e[19],D=e[20];const j=d-12,P=r?"#e5e7eb":"#1f2937";let U;e[39]!==_||e[40]!==P||e[41]!==j?(U=f.jsx("text",{x:10,y:j,fontSize:12,fontWeight:600,fill:P,children:_}),e[39]=_,e[40]=P,e[41]=j,e[42]=U):U=e[42];let X;return e[43]!==U||e[44]!==w||e[45]!==S||e[46]!==k||e[47]!==C||e[48]!==E||e[49]!==B||e[50]!==D?(X=f.jsxs("g",{transform:w,onClick:S,style:k,className:C,children:[E,B,D,U]}),e[43]=U,e[44]=w,e[45]=S,e[46]=k,e[47]=C,e[48]=E,e[49]=B,e[50]=D,e[51]=X):X=e[51],X}function rse(t){return t.host}function ise(t){const e=He.c(55),{node:n,onClick:s,isDarkMode:r}=t,{resource:a,x:o,y:c,width:h,height:d}=n;let g;e[0]!==r?(g=to("NetworkPolicy",r),e[0]=r,e[1]=g):g=e[1];const m=g,v=cu.NetworkPolicy,y=a.spec;let _;e[2]!==y.policyTypes?(_=y.policyTypes||[],e[2]=y.policyTypes,e[3]=_):_=e[3];const w=_;let S;e[4]!==w||e[5]!==y.ingress?(S=w.includes("Ingress")||y.ingress,e[4]=w,e[5]=y.ingress,e[6]=S):S=e[6];const k=S;let C;e[7]!==w||e[8]!==y.egress?(C=w.includes("Egress")||y.egress,e[7]=w,e[8]=y.egress,e[9]=C):C=e[9];const E=C;let B;e[10]!==y.ingress?(B=y.ingress||[],e[10]=y.ingress,e[11]=B):B=e[11];const D=B;let j;e[12]!==y.egress?(j=y.egress||[],e[12]=y.egress,e[13]=j):j=e[13];const P=j,U=k&&D.length===0,X=E&&P.length===0,$=U&&X,Z=Math.floor((h-20)/6.5),F=a.metadata.name.length>Z?a.metadata.name.slice(0,Z-2)+"":a.metadata.name;let W;e[14]!==X||e[15]!==P||e[16]!==E||e[17]!==k||e[18]!==U||e[19]!==D||e[20]!==$?(W=()=>{const Lt=[];return $?" Deny All":(U?Lt.push(" No Ingress"):k&&D.length>0&&Lt.push(`${D.length}`),X?Lt.push(" No Egress"):E&&P.length>0&&Lt.push(`${P.length}`),Lt.join(" ")||" Allow")},e[14]=X,e[15]=P,e[16]=E,e[17]=k,e[18]=U,e[19]=D,e[20]=$,e[21]=W):W=e[21];const Q=W,V=`translate(${o}, ${c})`;let M;e[22]!==s?(M=Lt=>{Lt.stopPropagation(),s()},e[22]=s,e[23]=M):M=e[23];let G;e[24]===Symbol.for("react.memo_cache_sentinel")?(G={cursor:"pointer"},e[24]=G):G=e[24];const q=$?r?"#7f1d1d":"#fef2f2":m.bg,z=$?r?"#f87171":"#ef4444":m.border;let O;e[25]!==d||e[26]!==q||e[27]!==z||e[28]!==h?(O=f.jsx("rect",{width:h,height:d,rx:8,fill:q,stroke:z,strokeWidth:2}),e[25]=d,e[26]=q,e[27]=z,e[28]=h,e[29]=O):O=e[29];const T=$?r?"#f87171":"#ef4444":m.text;let H;e[30]!==T?(H={color:T},e[30]=T,e[31]=H):H=e[31];let N;e[32]===Symbol.for("react.memo_cache_sentinel")?(N=f.jsx(v,{size:16}),e[32]=N):N=e[32];let Y;e[33]!==H?(Y=f.jsx("foreignObject",{width:18,height:18,children:f.jsx("div",{style:H,children:N})}),e[33]=H,e[34]=Y):Y=e[34];const oe=$?r?"#f87171":"#ef4444":m.text;let ee;e[35]!==oe?(ee=f.jsx("text",{x:22,y:13,fontSize:10,fill:oe,fontWeight:600,children:"NetworkPolicy"}),e[35]=oe,e[36]=ee):ee=e[36];let de;e[37]!==Y||e[38]!==ee?(de=f.jsxs("g",{transform:"translate(10, 10)",children:[Y,ee]}),e[37]=Y,e[38]=ee,e[39]=de):de=e[39];const we=h-10,Se=$?r?"#fca5a5":"#dc2626":r?"#fcd34d":"#92400e",Fe=Q();let xe;e[40]!==we||e[41]!==Se||e[42]!==Fe?(xe=f.jsx("text",{x:we,y:18,fontSize:9,fill:Se,textAnchor:"end",fontWeight:500,children:Fe}),e[40]=we,e[41]=Se,e[42]=Fe,e[43]=xe):xe=e[43];const qe=d-12,je=r?"#e5e7eb":"#1f2937";let Qe;e[44]!==F||e[45]!==qe||e[46]!==je?(Qe=f.jsx("text",{x:10,y:qe,fontSize:12,fontWeight:600,fill:je,children:F}),e[44]=F,e[45]=qe,e[46]=je,e[47]=Qe):Qe=e[47];let nt;return e[48]!==O||e[49]!==de||e[50]!==xe||e[51]!==Qe||e[52]!==V||e[53]!==M?(nt=f.jsxs("g",{transform:V,onClick:M,style:G,className:"hover:opacity-80 transition-opacity",children:[O,de,xe,Qe]}),e[48]=O,e[49]=de,e[50]=xe,e[51]=Qe,e[52]=V,e[53]=M,e[54]=nt):nt=e[54],nt}function ase(t){const e=t.metadata.labels||{};return e["app.kubernetes.io/instance"]||e.release||e.app||e["app.kubernetes.io/name"]||e["k8s-app"]||e.name||e["app.kubernetes.io/component"]||e["app.kubernetes.io/part-of"]}const lse={Deployment:1,StatefulSet:2,DaemonSet:3,CronJob:4,Job:5,Pod:6};function ose(t){const e=new Map;t.forEach(z=>{z.metadata.uid&&e.set(z.metadata.uid,z)});const n=new Map,s=new Map,r=(z,O)=>{n.has(z)||n.set(z,new Set),n.has(O)||n.set(O,new Set),n.get(z).add(O),n.get(O).add(z)},a=(z,O,T)=>{const H=`${z}-${O}`;s.has(H)||s.set(H,[]),s.get(H).push({from:z,to:O,type:T})},o=new Map,c=new Map;t.forEach(z=>{const O=(z.metadata.ownerReferences||[]).filter(T=>e.has(T.uid));if(O.length>0){const T=O[0];c.set(z.metadata.uid,T.uid),o.has(T.uid)||o.set(T.uid,[]),o.get(T.uid).push(z.metadata.uid),r(z.metadata.uid,T.uid),a(T.uid,z.metadata.uid,"owner")}});const h=["Deployment","StatefulSet","DaemonSet","Job"];t.forEach(z=>{if(!h.includes(z.kind))return;const O=z.spec?.selector?.matchLabels;!O||Object.keys(O).length===0||t.filter(T=>T.kind==="Pod"&&T.metadata.namespace===z.metadata.namespace).forEach(T=>{const H=T.metadata.labels||{};Object.entries(O).every(([N,Y])=>H[N]===Y)&&r(z.metadata.uid,T.metadata.uid)})});const d=new Map,g=new Map,m=new Set;t.filter(z=>z.kind==="Pod").forEach(z=>{const O=z.metadata.ownerReferences?.[0];if(!O)return;if(O.kind==="Node"){m.add(z.metadata.uid);return}const T=e.get(O.uid);if(T){if(h.includes(T.kind)){d.has(T.metadata.uid)||d.set(T.metadata.uid,[]),d.get(T.metadata.uid).push(z),g.set(z.metadata.uid,T.metadata.uid);return}if(T.kind==="ReplicaSet"){const H=T.metadata.ownerReferences?.[0];if(H){const N=e.get(H.uid);N&&N.kind==="Deployment"&&(d.has(N.metadata.uid)||d.set(N.metadata.uid,[]),d.get(N.metadata.uid).push(z),g.set(z.metadata.uid,N.metadata.uid))}}}}),d.forEach(z=>{z.sort((O,T)=>O.metadata.name.localeCompare(T.metadata.name))}),t.forEach(z=>{if(z.kind!=="Service")return;const O=z.spec?.selector;!O||Object.keys(O).length===0||t.filter(T=>T.kind==="Pod"&&T.metadata.namespace===z.metadata.namespace).forEach(T=>{const H=T.metadata.labels||{};Object.entries(O).every(([N,Y])=>H[N]===Y)&&(r(z.metadata.uid,T.metadata.uid),a(z.metadata.uid,T.metadata.uid,"service"))})}),t.forEach(z=>{if(z.kind!=="NetworkPolicy")return;const O=z.spec,T=z.metadata.namespace||"",H=O.podSelector?.matchLabels||{},N=Object.keys(H).length===0;t.filter(Y=>Y.kind==="Pod"&&Y.metadata.namespace===T).forEach(Y=>{const oe=Y.metadata.labels||{};if(N||Object.entries(H).every(([de,we])=>oe[de]===we)){const de=g.get(Y.metadata.uid);a(de||Y.metadata.uid,z.metadata.uid,"network-policy")}})});const v=new Map;t.forEach(z=>{if(z.kind==="Service"){const O=`${z.metadata.namespace||""}/${z.metadata.name}`;v.set(O,z)}}),t.forEach(z=>{if(z.kind!=="Ingress")return;const O=z.spec,T=z.metadata.namespace||"";if(O.defaultBackend?.service?.name){const H=v.get(`${T}/${O.defaultBackend.service.name}`);H&&(r(z.metadata.uid,H.metadata.uid),a(z.metadata.uid,H.metadata.uid,"ingress"))}O.rules?.forEach(H=>{H.http?.paths?.forEach(N=>{if(N.backend?.service?.name){const Y=v.get(`${T}/${N.backend.service.name}`);Y&&(r(z.metadata.uid,Y.metadata.uid),a(z.metadata.uid,Y.metadata.uid,"ingress"))}})})}),t.forEach(z=>{if(z.kind!=="HTTPRoute"&&z.kind!=="GRPCRoute")return;const O=z.spec,T=z.metadata.namespace||"";O.parentRefs?.forEach(H=>{if(!H.kind||H.kind==="Gateway"){const N=t.find(Y=>Y.kind==="Gateway"&&Y.metadata.name===H.name&&Y.metadata.namespace===T);N&&(r(N.metadata.uid,z.metadata.uid),a(N.metadata.uid,z.metadata.uid,"gateway"))}}),O.rules?.forEach(H=>{H.backendRefs?.forEach(N=>{if(!N.kind||N.kind==="Service"){const Y=v.get(`${T}/${N.name}`);Y&&(r(z.metadata.uid,Y.metadata.uid),a(z.metadata.uid,Y.metadata.uid,"gateway"))}})})});const y=new Map,_=new Map,w=new Map;t.forEach(z=>{const O=`${z.metadata.namespace||""}/${z.metadata.name}`;z.kind==="ConfigMap"?y.set(O,z):z.kind==="Secret"?_.set(O,z):z.kind==="PersistentVolumeClaim"&&w.set(O,z)});const S=(z,O,T)=>{z?.forEach(H=>{H.env?.forEach(N=>{N.valueFrom?.configMapKeyRef?.name&&O.add(N.valueFrom.configMapKeyRef.name),N.valueFrom?.secretKeyRef?.name&&T.add(N.valueFrom.secretKeyRef.name)}),H.envFrom?.forEach(N=>{N.configMapRef?.name&&O.add(N.configMapRef.name),N.secretRef?.name&&T.add(N.secretRef.name)})})},k=new Map;t.filter(z=>z.kind==="Pod").forEach(z=>{const O=g.get(z.metadata.uid);if(!O)return;const T=z.spec,H=new Set,N=new Set,Y=new Set;T.volumes?.forEach(ee=>{ee.configMap?.name&&H.add(ee.configMap.name),ee.secret?.secretName&&N.add(ee.secret.secretName),ee.persistentVolumeClaim?.claimName&&Y.add(ee.persistentVolumeClaim.claimName),ee.projected?.sources?.forEach(de=>{de.configMap?.name&&H.add(de.configMap.name),de.secret?.name&&N.add(de.secret.name)})}),S(T.containers,H,N),S(T.initContainers,H,N),k.has(O)||k.set(O,new Map);const oe=k.get(O);H.size>0&&(oe.has("ConfigMap")||oe.set("ConfigMap",new Set),H.forEach(ee=>oe.get("ConfigMap").add(ee))),N.size>0&&(oe.has("Secret")||oe.set("Secret",new Set),N.forEach(ee=>oe.get("Secret").add(ee))),Y.size>0&&(oe.has("PersistentVolumeClaim")||oe.set("PersistentVolumeClaim",new Set),Y.forEach(ee=>oe.get("PersistentVolumeClaim").add(ee)))});const C=z=>{const O=c.get(z);return O?C(O):z},E=new Map,B=new Map,D=new Map;t.forEach(z=>{if(z.kind!=="Pod")return;const O=z.metadata.namespace||"",T=C(z.metadata.uid),H=z.spec,N=new Set,Y=new Set,oe=new Set;H.volumes?.forEach(ee=>{ee.configMap?.name&&N.add(ee.configMap.name),ee.secret?.secretName&&Y.add(ee.secret.secretName),ee.persistentVolumeClaim?.claimName&&oe.add(ee.persistentVolumeClaim.claimName),ee.projected?.sources?.forEach(de=>{de.configMap?.name&&N.add(de.configMap.name),de.secret?.name&&Y.add(de.secret.name)})}),S(H.containers,N,Y),S(H.initContainers,N,Y),N.forEach(ee=>{const de=`${O}/${ee}`;E.has(de)||E.set(de,new Set),E.get(de).add(T)}),Y.forEach(ee=>{const de=`${O}/${ee}`;B.has(de)||B.set(de,new Set),B.get(de).add(T)}),oe.forEach(ee=>{const de=`${O}/${ee}`;D.has(de)||D.set(de,new Set),D.get(de).add(T)})});const j=new Set;E.forEach((z,O)=>{if(z.size>1){const T=y.get(O);T&&j.add(T.metadata.uid)}}),B.forEach((z,O)=>{if(z.size>1){const T=_.get(O);T&&j.add(T.metadata.uid)}}),D.forEach((z,O)=>{if(z.size>1){const T=w.get(O);T&&j.add(T.metadata.uid)}}),t.forEach(z=>{if(z.kind!=="Pod")return;const O=z.metadata.namespace||"",T=z.spec,H=new Set,N=new Set,Y=new Set;T.volumes?.forEach(oe=>{oe.configMap?.name&&H.add(oe.configMap.name),oe.secret?.secretName&&N.add(oe.secret.secretName),oe.persistentVolumeClaim?.claimName&&Y.add(oe.persistentVolumeClaim.claimName),oe.projected?.sources?.forEach(ee=>{ee.configMap?.name&&H.add(ee.configMap.name),ee.secret?.name&&N.add(ee.secret.name)})}),S(T.containers,H,N),S(T.initContainers,H,N),H.forEach(oe=>{const ee=y.get(`${O}/${oe}`);ee&&!j.has(ee.metadata.uid)&&(r(z.metadata.uid,ee.metadata.uid),a(ee.metadata.uid,z.metadata.uid,"owner"))}),N.forEach(oe=>{const ee=_.get(`${O}/${oe}`);ee&&!j.has(ee.metadata.uid)&&(r(z.metadata.uid,ee.metadata.uid),a(ee.metadata.uid,z.metadata.uid,"owner"))}),Y.forEach(oe=>{const ee=w.get(`${O}/${oe}`);ee&&!j.has(ee.metadata.uid)&&(r(z.metadata.uid,ee.metadata.uid),a(ee.metadata.uid,z.metadata.uid,"owner"))})});const P=new Set,U=[];function X(z,O){P.has(z)||m.has(z)||(P.add(z),O.push(z),(n.get(z)||new Set).forEach(T=>X(T,O)))}t.forEach(z=>{if(!m.has(z.metadata.uid)&&!P.has(z.metadata.uid)){const O=[];X(z.metadata.uid,O),O.length>0&&U.push(O)}}),U.sort((z,O)=>O.length-z.length);const $=[],Z={Gateway:0,Ingress:0,HTTPRoute:1,GRPCRoute:1,Service:2,Deployment:3,StatefulSet:3,DaemonSet:3,Job:3,CronJob:3,Pod:3,ConfigMap:4,Secret:4,PersistentVolumeClaim:4,NetworkPolicy:5};U.forEach((z,O)=>{const T=z.map(et=>e.get(et)).filter(Boolean);if(T.length===0)return;const H=T.filter(et=>!(et.kind==="ReplicaSet"||et.kind==="Pod"&&g.has(et.metadata.uid)||["ConfigMap","Secret","PersistentVolumeClaim"].includes(et.kind)));if(H.length===0)return;const N=new Map;H.forEach(et=>{const at=Z[et.kind]??3;N.has(at)||N.set(at,[]),N.get(at).push(et.metadata.uid)}),N.forEach(et=>{et.sort((at,Zt)=>{const Ot=e.get(at),Kn=e.get(Zt);return Ot.metadata.name.localeCompare(Kn.metadata.name)})});const Y=new Map;H.forEach(et=>{if(["Service","Gateway","HTTPRoute","GRPCRoute"].includes(et.kind)){Y.set(et.metadata.uid,{width:rT,height:rT});return}const at=d.get(et.metadata.uid);if(at&&at.length>0){const Zt=k.get(et.metadata.uid);let Ot=0;Zt&&Zt.forEach(re=>Ot+=re.size);const Kn=mg+zc*2,pe=Math.min(Ot,Ud),_e=pe>0?pe*(Qi+tl)-tl+zc*2:0,Ge=Math.max(Kn,_e),it=Ot>0?Math.ceil(Ot/Ud):0,wt=it>0?it*(Qi+tl)+tl:0,An=aS+at.length*(Yl+o0)-o0+zc+wt;Y.set(et.metadata.uid,{width:Ge,height:An})}else Y.set(et.metadata.uid,{width:Hh,height:Sx})});const oe=new Map;let ee=0,de=Wa+iT;const we=Array.from(N.keys()).sort((et,at)=>et-at),Se=new Map;we.forEach(et=>{const at=Math.max(...(N.get(et)||[]).map(Zt=>Y.get(Zt)?.width||Hh));Se.set(et,at)});let Fe=Wa;we.forEach(et=>{const at=Se.get(et)||Hh;let Zt=Wa+iT;N.get(et).forEach(Ot=>{const Kn=Y.get(Ot)||{width:Hh,height:Sx},pe=(at-Kn.width)/2;oe.set(Ot,{x:Fe+pe,y:Zt}),de=Math.max(de,Zt+Kn.height),Zt+=Kn.height+Xne}),ee=Math.max(ee,Fe+at),Fe+=at+Yne});const xe=ee+Wa,qe=de+Wa,je=H.map(et=>{const at=oe.get(et.metadata.uid),Zt=Y.get(et.metadata.uid)||{width:Hh,height:Sx},Kn=d.get(et.metadata.uid)?.map((Ge,it)=>({uid:Ge.metadata.uid,resource:Ge,x:zc,y:aS+it*(Yl+o0),width:mg,height:Yl})),pe=k.get(et.metadata.uid),_e=[];return pe&&pe.forEach((Ge,it)=>{Ge.forEach(wt=>_e.push({kind:it,name:wt}))}),{uid:et.metadata.uid,resource:et,x:at.x,y:at.y,width:Zt.width,height:Zt.height,childPods:Kn,configIcons:_e}}),Qe=[],nt=new Set,Lt=new Set;H.forEach(et=>{const at=d.get(et.metadata.uid);at&&at.forEach(Zt=>Lt.add(Zt.metadata.uid))}),s.forEach(et=>{et.forEach(at=>{const Zt=H.some(_e=>_e.metadata.uid===at.from),Ot=H.some(_e=>_e.metadata.uid===at.to),Kn=Lt.has(at.to),pe=Lt.has(at.from);if(Zt&&Ot||Zt&&Kn||Ot&&pe){const _e=`${at.from}-${at.to}-${at.type}`;nt.has(_e)||(nt.add(_e),Qe.push(at))}})});let Et,qn=1/0;H.forEach(et=>{const at=lse[et.kind];at!==void 0&&at<qn&&(qn=at,Et=et)});const As=Et?ase(Et)||Et.metadata.name:void 0,Ks=Et?.metadata.namespace;$.push({id:`app-${O}`,name:As||"",namespace:Ks,nodes:je,edges:Qe,x:0,y:0,width:xe,height:qe})});const F=new Map;$.forEach(z=>{const O=z.namespace||"",T=z.name||"",H=`${O}/${T}`;F.has(H)||F.set(H,[]),F.get(H).push(z)});const W=[];F.forEach((z,O)=>{if(z.length===1)W.push(z[0]);else{z.sort((de,we)=>{const Se=de.nodes[0]?.resource.metadata.name||"",Fe=we.nodes[0]?.resource.metadata.name||"";return Se.localeCompare(Fe)});const T=[],H=[];let N=Wa,Y=0;z.forEach(de=>{de.nodes.forEach(we=>{T.push({...we,x:we.x+N-Wa,y:we.y})}),H.push(...de.edges),N+=de.width+Im,Y=Math.max(Y,de.height)});const[oe,ee]=O.split("/");W.push({id:`app-${O}`,name:ee,namespace:oe,nodes:T,edges:H,x:0,y:0,width:N-Im+Wa,height:Y})}}),W.sort((z,O)=>O.height-z.height);const Q=1800;let V=0,M=[];const G=[];W.forEach(z=>{V+z.width>Q&&M.length>0&&(G.push([...M]),V=0,M=[]),M.push({app:z,tempX:V}),V+=z.width+Im}),M.length>0&&G.push(M);let q=0;return G.forEach(z=>{const O=Math.max(...z.map(T=>T.app.height));z.forEach(({app:T,tempX:H})=>{const N=H,Y=q+(O-T.height)/2;T.nodes.forEach(oe=>{oe.x+=N,oe.y+=Y}),T.x=N,T.y=Y}),q+=O+Im}),W}function cse(){const t=He.c(4);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=f.jsxs("div",{className:"mb-8 relative",children:[f.jsx("img",{src:"/logo.png",alt:"Logo",className:"w-70 h-70 mx-auto dark:hidden"}),f.jsx("img",{src:"/logo_dark.png",alt:"Logo",className:"w-70 h-70 mx-auto hidden dark:block"})]}),t[0]=e):e=t[0];let n;t[1]===Symbol.for("react.memo_cache_sentinel")?(n=f.jsxs("div",{className:"p-4 rounded-xl bg-neutral-50 dark:bg-neutral-800/30",children:[f.jsx("div",{className:"w-9 h-9 mx-auto mb-2.5 rounded-lg bg-emerald-100 dark:bg-emerald-500/10 flex items-center justify-center",children:f.jsx(cl,{size:18,className:"text-emerald-600 dark:text-emerald-400"})}),f.jsx("h3",{className:"font-medium text-sm text-neutral-900 dark:text-neutral-100 mb-0.5",children:"Topology"}),f.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"Resource relationships"})]}),t[1]=n):n=t[1];let s;t[2]===Symbol.for("react.memo_cache_sentinel")?(s=f.jsxs("div",{className:"p-4 rounded-xl bg-neutral-50 dark:bg-neutral-800/30",children:[f.jsx("div",{className:"w-9 h-9 mx-auto mb-2.5 rounded-lg bg-sky-100 dark:bg-sky-500/10 flex items-center justify-center",children:f.jsx(fl,{size:18,className:"text-sky-600 dark:text-sky-400"})}),f.jsx("h3",{className:"font-medium text-sm text-neutral-900 dark:text-neutral-100 mb-0.5",children:"Browser"}),f.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"Browse any resource"})]}),t[2]=s):s=t[2];let r;return t[3]===Symbol.for("react.memo_cache_sentinel")?(r=f.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:f.jsxs("div",{className:"max-w-2xl mx-auto px-8 text-center",children:[e,f.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[n,s,f.jsxs("div",{className:"p-4 rounded-xl bg-neutral-50 dark:bg-neutral-800/30",children:[f.jsx("div",{className:"w-9 h-9 mx-auto mb-2.5 rounded-lg bg-purple-100 dark:bg-purple-500/10 flex items-center justify-center",children:f.jsx(_g,{size:18,className:"text-purple-600 dark:text-purple-400"})}),f.jsx("h3",{className:"font-medium text-sm text-neutral-900 dark:text-neutral-100 mb-0.5",children:"Details"}),f.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"Full specifications"})]})]})]})}),t[3]=r):r=t[3],r}const kx=[{kind:"pods",label:"Pods",icon:dl,category:"Workloads"},{kind:"deployments",label:"Deployments",icon:mS,category:"Workloads"},{kind:"daemonsets",label:"DaemonSets",icon:dS,category:"Workloads"},{kind:"statefulsets",label:"StatefulSets",icon:fl,category:"Workloads"},{kind:"replicasets",label:"ReplicaSets",icon:cl,category:"Workloads"},{kind:"jobs",label:"Jobs",icon:_g,category:"Workloads"},{kind:"cronjobs",label:"CronJobs",icon:oa,category:"Workloads"},{kind:"secrets",label:"Secrets",icon:mf,category:"Config"},{kind:"configmaps",label:"ConfigMaps",icon:bi,category:"Config"},{kind:"applications",label:"Applications",icon:uT,category:"Config"},{kind:"applicationsets",label:"ApplicationSets",icon:dT,category:"Config"},{kind:"certificates",label:"Certificates",icon:mT,category:"Config"},{kind:"certificaterequests",label:"CertificateRequests",icon:c0,category:"Config"},{kind:"services",label:"Services",icon:pT,category:"Network"},{kind:"ingresses",label:"Ingresses",icon:Mr,category:"Network"},{kind:"gateways",label:"Gateways",icon:ns,category:"Network"},{kind:"httproutes",label:"HTTPRoutes",icon:Mr,category:"Network"},{kind:"grpcroutes",label:"GRPCRoutes",icon:Mr,category:"Network"},{kind:"tcproutes",label:"TCPRoutes",icon:ns,category:"Network"},{kind:"udproutes",label:"UDPRoutes",icon:ns,category:"Network"},{kind:"tlsroutes",label:"TLSRoutes",icon:ns,category:"Network"},{kind:"persistentvolumes",label:"PersistentVolumes",icon:Hs,category:"Storage"},{kind:"persistentvolumeclaims",label:"PersistentVolumeClaims",icon:oS,category:"Storage"},{kind:"namespaces",label:"Namespaces",icon:vg,category:"Cluster"},{kind:"nodes",label:"Nodes",icon:Xr,category:"Cluster"}];function ci(t){return t.toLowerCase().replace(/[-_.]/g,"")}function use({isOpen:t,onClose:e}){const{context:n,namespace:s,namespaces:r,setNamespace:a,setSelectedResource:o}=hr(),[c,h]=K.useState(""),[d,g]=K.useState(0),[m,v]=K.useState([]),[y,_]=K.useState(!1),[w,S]=K.useState(new Map),k=K.useRef(null),C=K.useRef(null),E=K.useRef(null),B=K.useCallback(()=>{h(""),g(0),v([])},[]),D=K.useRef(!1);K.useEffect(()=>{t&&!D.current&&B(),D.current=t},[t,B]);const{mode:j,searchQuery:P}=K.useMemo(()=>c.startsWith("@@")?{mode:"searchAll",searchQuery:c.slice(2).trim()}:c.startsWith(">")?{mode:"resources",searchQuery:c.slice(1).trim()}:c.startsWith("@")?{mode:"namespaces",searchQuery:c.slice(1).trim()}:{mode:"search",searchQuery:c.trim()},[c]);K.useEffect(()=>{n&&(async()=>{const G=new Map;for(const q of kx)try{const z=await _o(n,q.kind);z&&G.set(q.kind,z)}catch{}S(G)})()},[n]);const U=K.useMemo(()=>{const M=ci(P);return kx.filter(G=>w.has(G.kind)).filter(G=>ci(G.label).includes(M)||ci(G.kind).includes(M)||ci(G.category).includes(M))},[P,w]),X=K.useMemo(()=>{const M=ci(P);return r.filter(G=>ci(G.metadata?.name||"").includes(M))},[P,r]),$=K.useMemo(()=>j==="resources"?U.map(M=>({id:`type-${M.kind}`,type:"resource-type",label:M.label,sublabel:M.category,icon:M.icon,category:M.category,data:{resourceConfig:w.get(M.kind)}})):j==="namespaces"?X.map(M=>({id:`ns-${M.metadata?.name}`,type:"namespace",label:M.metadata?.name||"",icon:vg,data:{namespace:M.metadata?.name}})):[],[j,U,X,w]),Z=j==="search"||j==="searchAll"?m:$,F=K.useCallback(async(M,G)=>{if(!M||M.length<2)return[];const q=[],z=ci(M),O=G?void 0:s,T=kx.filter(N=>w.has(N.kind)).map(async N=>{const Y=w.get(N.kind);if(!Y)return[];try{const oe=await vS(n,Y,O),ee=[];for(const de of oe.rows){const we=de.object.metadata.name,Se=de.object.metadata.namespace;ci(we).includes(z)&&ee.push({id:`${N.kind}/${Se||""}/${we}`,type:"resource",label:we,sublabel:Se?`${N.label} in ${Se}`:N.label,icon:N.icon,category:N.category,data:{resourceConfig:Y,namespace:Se,resourceName:we}})}return ee}catch{return[]}}),H=await Promise.all(T);for(const N of H)q.push(...N);return q.sort((N,Y)=>{const oe=ci(N.label)===z,ee=ci(Y.label)===z;return oe&&!ee?-1:!oe&&ee?1:N.label.localeCompare(Y.label)}),q.slice(0,50)},[n,s,w]);K.useEffect(()=>(E.current&&clearTimeout(E.current),(j==="search"||j==="searchAll")&&P.length>=2?(_(!0),E.current=setTimeout(async()=>{const M=await F(P,j==="searchAll");v(M),g(0),_(!1)},300)):(j==="search"||j==="searchAll")&&(v([]),_(!1)),()=>{E.current&&clearTimeout(E.current)}),[j,P,F]),K.useEffect(()=>{j!=="search"&&j!=="searchAll"&&g(0)},[j,$]);const W=K.useCallback(M=>{M.type==="resource-type"?M.data.resourceConfig&&o(M.data.resourceConfig):M.type==="namespace"?a(M.data.namespace):M.type==="resource"&&M.data.resourceConfig&&(M.data.namespace&&M.data.namespace!==s&&a(M.data.namespace),o(M.data.resourceConfig)),e()},[o,a,s,e]),Q=K.useCallback(M=>{switch(M.key){case"ArrowDown":M.preventDefault(),g(G=>Math.min(G+1,Z.length-1));break;case"ArrowUp":M.preventDefault(),g(G=>Math.max(G-1,0));break;case"Enter":M.preventDefault(),Z[d]&&W(Z[d]);break;case"Escape":M.preventDefault(),e();break}},[Z,d,W,e]);K.useEffect(()=>{t&&setTimeout(()=>k.current?.focus(),0)},[t]),K.useEffect(()=>{d>=0&&C.current&&C.current.querySelector(`[data-index="${d}"]`)?.scrollIntoView({block:"nearest"})},[d]);const V=K.useMemo(()=>{switch(j){case"resources":return"Search resource types...";case"namespaces":return"Search namespaces...";case"searchAll":return"Search resources across all namespaces...";default:return`Search resources in ${s||"current namespace"}... (> types, @ ns, @@ all)`}},[j,s]);return t?sM.createPortal(f.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-[15vh]",onClick:M=>{M.target===M.currentTarget&&e()},children:[f.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:e}),f.jsxs("div",{className:"relative w-full max-w-2xl mx-4 bg-white dark:bg-neutral-900 rounded-xl shadow-2xl border border-neutral-200 dark:border-neutral-700 overflow-hidden",children:[f.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 border-b border-neutral-200 dark:border-neutral-700",children:[f.jsx(gS,{size:20,className:"text-neutral-400 dark:text-neutral-500 shrink-0"}),f.jsx("input",{ref:k,type:"text",className:"flex-1 bg-transparent text-neutral-900 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 outline-none text-base",value:c,onChange:M=>h(M.target.value),onKeyDown:Q,placeholder:V,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1}),y&&f.jsx("div",{className:"shrink-0 w-4 h-4 border-2 border-neutral-300 dark:border-neutral-600 border-t-neutral-500 dark:border-t-neutral-400 rounded-full animate-spin"})]}),f.jsx("div",{ref:C,className:"max-h-[60vh] overflow-y-auto",children:Z.length===0?f.jsx("div",{className:"px-4 py-8 text-center text-neutral-500 dark:text-neutral-400",children:y?"Searching...":P.length>0&&(j==="search"||j==="searchAll")&&P.length<2?"Type at least 2 characters to search":P.length>0?"No results found":f.jsxs("div",{className:"space-y-2",children:[f.jsx("p",{children:"Type to search or use prefixes:"}),f.jsxs("div",{className:"text-sm space-y-1",children:[f.jsxs("p",{children:[f.jsx("kbd",{className:"px-1.5 py-0.5 bg-neutral-100 dark:bg-neutral-800 rounded text-xs",children:">"})," Resource types"]}),f.jsxs("p",{children:[f.jsx("kbd",{className:"px-1.5 py-0.5 bg-neutral-100 dark:bg-neutral-800 rounded text-xs",children:"@"})," Namespaces"]}),f.jsxs("p",{children:[f.jsx("kbd",{className:"px-1.5 py-0.5 bg-neutral-100 dark:bg-neutral-800 rounded text-xs",children:"@@"})," Search all namespaces"]})]})]})}):f.jsx("div",{className:"py-2",children:Z.map((M,G)=>{const q=M.icon,z=G===d;return f.jsxs("div",{"data-index":G,onClick:()=>W(M),className:`flex items-center gap-3 px-4 py-2.5 cursor-pointer ${z?"bg-neutral-100 dark:bg-neutral-800":"hover:bg-neutral-50 dark:hover:bg-neutral-800/50"}`,children:[f.jsx(q,{size:18,className:`shrink-0 ${M.type==="namespace"?"text-blue-500":M.type==="resource"?"text-green-500":"text-neutral-400 dark:text-neutral-500"}`}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"text-sm text-neutral-900 dark:text-neutral-100 truncate",children:M.label}),M.sublabel&&f.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate",children:M.sublabel})]}),f.jsxs("div",{className:"shrink-0 text-xs text-neutral-400 dark:text-neutral-500",children:[M.type==="resource-type"&&"Type",M.type==="namespace"&&"Namespace",M.type==="resource"&&"Resource"]})]},M.id)})})}),f.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-t border-neutral-200 dark:border-neutral-700 text-xs text-neutral-400 dark:text-neutral-500",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("span",{children:[f.jsx("kbd",{className:"px-1 py-0.5 bg-neutral-100 dark:bg-neutral-800 rounded",children:""})," Navigate"]}),f.jsxs("span",{children:[f.jsx("kbd",{className:"px-1 py-0.5 bg-neutral-100 dark:bg-neutral-800 rounded",children:""})," Select"]}),f.jsxs("span",{children:[f.jsx("kbd",{className:"px-1 py-0.5 bg-neutral-100 dark:bg-neutral-800 rounded",children:"esc"})," Close"]})]}),s&&j==="search"&&f.jsxs("span",{children:["Scope: ",s]})]})]})]}),document.body):null}function hse(t){const e=He.c(12),{children:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=new Set,e[0]=s):s=e[0];const[r,a]=K.useState(s);let o;e[1]!==r?(o=k=>r.has(k),e[1]=r,e[2]=o):o=e[2];const c=o;let h;e[3]===Symbol.for("react.memo_cache_sentinel")?(h=k=>{a(C=>{const E=new Set(C);return E.add(k),E})},e[3]=h):h=e[3];const d=h;let g;e[4]===Symbol.for("react.memo_cache_sentinel")?(g=k=>{a(C=>{const E=new Set(C);return E.delete(k),E})},e[4]=g):g=e[4];const m=g;let v;e[5]===Symbol.for("react.memo_cache_sentinel")?(v=k=>{a(C=>{const E=new Set(C);return E.has(k)?E.delete(k):E.add(k),E})},e[5]=v):v=e[5];const y=v;let _;e[6]!==c||e[7]!==r?(_={openPanels:r,isOpen:c,open:d,close:m,toggle:y},e[6]=c,e[7]=r,e[8]=_):_=e[8];const w=_;let S;return e[9]!==n||e[10]!==w?(S=f.jsx(bT.Provider,{value:w,children:n}),e[9]=n,e[10]=w,e[11]=S):S=e[11],S}function lT(t){return t.group?`${t.name}.${t.group}`:t.name}function dse(t){const e=He.c(30),{children:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=Fd(),e[0]=s):s=e[0];const r=s;let a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a=()=>r.defaultContext||r.contexts[0]?.name||"",e[1]=a):a=e[1];const[o,c]=K.useState(a);let h;e[2]===Symbol.for("react.memo_cache_sentinel")?(h=()=>r.defaultNamespace,e[2]=h):h=e[2];const[d,g]=K.useState(h),[m,v]=K.useState(null),y=K.useRef(void 0),_=K.useRef(null);let w,S;e[3]!==o?(w=()=>o?wP(o):Promise.resolve({items:[]}),S=[o],e[3]=o,e[4]=w,e[5]=S):(w=e[4],S=e[5]);const{data:k}=xT(w,S);let C;e[6]!==k?.items?(C=k?.items||[],e[6]=k?.items,e[7]=C):C=e[7];const E=C;let B,D;e[8]!==E?(B=()=>{if(y.current&&E.length>0){const V=y.current;E.some(G=>G.metadata?.name===V)&&g(V),y.current=void 0}},D=[E],e[8]=E,e[9]=B,e[10]=D):(B=e[9],D=e[10]),K.useEffect(B,D),o&&xP(o);let j;e[11]!==o||e[12]!==d||e[13]!==m?(j=V=>{yP(o),Lq(o),y.current=d,_.current=m?lT(m):null,c(V),g(void 0),v(null)},e[11]=o,e[12]=d,e[13]=m,e[14]=j):j=e[14];const P=j;let U,X;e[15]!==o?(U=()=>{if(_.current&&o){const V=_.current;_.current=null,_o(o,V.split(".")[0]).then(M=>{M&&lT(M)===V&&v(M)}).catch(fse)}},X=[o],e[15]=o,e[16]=U,e[17]=X):(U=e[16],X=e[17]),K.useEffect(U,X);let $;e[18]!==o?($={getResource:(V,M,G)=>Cx(o,V,M,G),getResourceList:(V,M)=>Sg(o,V,M),getResourceTable:(V,M)=>vS(o,V,M),getResourceEvents:(V,M)=>Nx(o,V,M),updateResource:(V,M,G,q)=>yT(o,V,M,G,q)},e[18]=o,e[19]=$):$=e[19];const Z=$;let F;e[20]!==Z||e[21]!==P||e[22]!==E||e[23]!==o||e[24]!==d||e[25]!==m?(F={context:o,contexts:r.contexts,namespace:d,namespaces:E,selectedResource:m,setContext:P,setNamespace:g,setSelectedResource:v,api:Z},e[20]=Z,e[21]=P,e[22]=E,e[23]=o,e[24]=d,e[25]=m,e[26]=F):F=e[26];const W=F;let Q;return e[27]!==n||e[28]!==W?(Q=f.jsx(vT.Provider,{value:W,children:n}),e[27]=n,e[28]=W,e[29]=Q):Q=e[29],Q}function fse(){}function pse(){const t=He.c(20),{namespace:e,selectedResource:n,setSelectedResource:s}=hr(),[r,a]=K.useState(!1);let o;t[0]!==s?(o=k=>{s(k)},t[0]=s,t[1]=o):o=t[1];const c=o;let h,d;t[2]===Symbol.for("react.memo_cache_sentinel")?(h=()=>{const k=C=>{(C.metaKey||C.ctrlKey)&&C.key==="k"&&(C.preventDefault(),a(mse))};return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)},d=[],t[2]=h,t[3]=d):(h=t[2],d=t[3]),K.useEffect(h,d);const g=n===null,m=g?"overview":`${n.group||""}/${n.name}`;let v;t[4]!==c||t[5]!==g||t[6]!==n?(v=f.jsx("div",{className:"py-2 pl-2 shrink-0 h-full",children:f.jsx(jP,{selectedResource:n,onSelectResource:c,isOverviewSelected:g})}),t[4]=c,t[5]=g,t[6]=n,t[7]=v):v=t[7];let y;t[8]!==g||t[9]!==e||t[10]!==m||t[11]!==n?(y=g?f.jsxs("main",{className:"flex-1 flex flex-col h-full min-w-0",children:[f.jsxs("header",{className:"shrink-0 h-14 flex items-center justify-between px-5 mt-2",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("h2",{className:"text-lg font-medium text-neutral-900 dark:text-neutral-100",children:"Overview"}),e&&f.jsx("span",{className:"px-2.5 py-0.5 rounded-md text-xs bg-neutral-200/80 text-neutral-500 dark:bg-neutral-800 dark:text-neutral-400",children:e})]}),f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("button",{onClick:()=>a(!0),className:"p-2 rounded-md text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 dark:text-neutral-500 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 transition-colors",title:"Command Palette (K)",children:f.jsx(gS,{size:18})})})]}),f.jsx("section",{className:"flex-1 overflow-hidden min-h-0",children:e?f.jsx(Jne,{}):f.jsx(cse,{})})]}):f.jsx(qne,{resource:n},m),t[8]=g,t[9]=e,t[10]=m,t[11]=n,t[12]=y):y=t[12];let _;t[13]===Symbol.for("react.memo_cache_sentinel")?(_=()=>a(!1),t[13]=_):_=t[13];let w;t[14]!==r?(w=f.jsx(use,{isOpen:r,onClose:_}),t[14]=r,t[15]=w):w=t[15];let S;return t[16]!==v||t[17]!==y||t[18]!==w?(S=f.jsxs("div",{className:"flex h-screen overflow-hidden bg-neutral-50 text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100",children:[v,y,w]}),t[16]=v,t[17]=y,t[18]=w,t[19]=S):S=t[19],S}function mse(t){return!t}function gse(){const t=He.c(3),{context:e}=hr();if(!e){let s;return t[0]===Symbol.for("react.memo_cache_sentinel")?(s=f.jsx("div",{className:"flex h-screen items-center justify-center bg-neutral-50 text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100",children:f.jsx("p",{className:"text-neutral-500",children:"No Kubernetes contexts available"})}),t[0]=s):s=t[0],s}let n;return t[1]!==e?(n=f.jsx(pse,{},e),t[1]=e,t[2]=n):n=t[2],n}function yse(){const t=He.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=f.jsx(dse,{children:f.jsx(hse,{children:f.jsx(gse,{})})}),t[0]=e):e=t[0],e}kP().then(()=>{oI.createRoot(document.getElementById("root")).render(f.jsx(K.StrictMode,{children:f.jsx(yse,{})}))});
